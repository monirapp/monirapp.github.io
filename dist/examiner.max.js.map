{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/examiner/examiner.js"],"names":[],"mappings":"AAAA;ACAA;;;;;;;;;;;;;;;;AAgBA,IAAI,uBAAuB,IAAvB,CAAJ,EAAkC;AAChC,kBAAgB,IAAhB;AACD;;AAED;;;AAGA,SAAS,eAAT,CAAyB,GAAzB,EAA8B;AAC5B,MAAM,WAAW,IAAI,IAAI,mBAAR,CAA4B,UAAS,SAAT,EAAoB;AAC/D,QAAM,UAAU,UAAU,UAAV,EAAhB;AACA,SAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,QAAQ,MAA5B,EAAoC,GAApC,EAAyC;AACvC,UAAI,QAAQ,CAAR,EAAW,SAAX,IAAwB,UAAxB,IACG,QAAQ,CAAR,EAAW,IAAX,IAAmB,yBAD1B,EACqD;AACnD;AACD;AACD,UAAM,OAAO,QAAQ,CAAR,EAAW,WAAX,CAAuB,CAAvB,CAAb;AACA,UAAI,CAAC,IAAD,IAAS,CAAC,KAAK,YAAnB,EAAiC;AAC/B;AACD;;AARsC,UAUhC,QAVgC,GAUpB,QAAQ,CAAR,CAVoB,CAUhC,QAVgC;;AAWvC,UAAI,UAAU,KAAK,YAAnB;AACA,UAAI,KAAK,aAAT,EAAwB;AACtB,YAAM,QAAQ,KAAK,aAAL,CAAmB,KAAnB,CAAyB,mBAAzB,CAAd;AACA,YAAI,MAAM,MAAN,GAAe,CAAnB,EAAsB;AACpB,uCAA2B,MAAM,CAAN,CAA3B;AACD;AACF;AACD,eAAQ,MAAM,GAAd,sBACuB,QADvB,gBAC0C,OAD1C,EAEI,+BAFJ,EAGI,+BAHJ;AAKD;AACF,GA1BgB,CAAjB;AA2BA,WAAS,OAAT,CAAiB,EAAC,YAAY,CAAC,UAAD,CAAb,EAAjB;AACD;;AAED;;;;AAIA,SAAS,sBAAT,CAAgC,GAAhC,EAAqC;AACnC,SAAO,CAAC,CAAC,IAAI,mBAAN,IACA,CAAC,CAAC,IAAI,qBADN,IAEC,mBAAmB,IAAI,qBAAJ,CAA0B,SAFrD;AAGD","file":"examiner.max.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nif (isLongTaskApiSupported(self)) {\n  detectLongTasks(self);\n}\n\n/**\n * @param {!Window} win\n */\nfunction detectLongTasks(win) {\n  const observer = new win.PerformanceObserver(function(entryList) {\n    const entries = entryList.getEntries();\n    for (let i = 0; i < entries.length; i++) {\n      if (entries[i].entryType != 'longtask'\n          || entries[i].name != 'cross-origin-descendant') {\n        continue;\n      }\n      const attr = entries[i].attribution[0];\n      if (!attr || !attr.containerSrc) {\n        continue;\n      }\n\n      const {duration} = entries[i];\n      let culprit = attr.containerSrc;\n      if (attr.containerName) {\n        const match = attr.containerName.match(/\"type\":\"([^\\\"]*)\"/);\n        if (match.length > 1) {\n          culprit = `<amp-ad type=\"${match[1]}\">`;\n        }\n      }\n      console./*OK*/log(\n          `%c LONG TASK %c ${duration}ms from ${culprit}`,\n          'background: red; color: white',\n          'background: #fff; color: #000'\n      );\n    }\n  });\n  observer.observe({entryTypes: ['longtask']});\n}\n\n/**\n * @param {!Window} win\n * @return {boolean}\n */\nfunction isLongTaskApiSupported(win) {\n  return !!win.PerformanceObserver\n      && !!win.TaskAttributionTiming\n      && ('containerName' in win.TaskAttributionTiming.prototype);\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvZXhhbWluZXIvZXhhbWluZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTs7Ozs7Ozs7Ozs7Ozs7OztBQWdCQSxJQUFJLHVCQUF1QixJQUF2QixDQUFKLEVBQWtDO0FBQ2hDLGtCQUFnQixJQUFoQjtBQUNEOztBQUVEOzs7QUFHQSxTQUFTLGVBQVQsQ0FBeUIsR0FBekIsRUFBOEI7QUFDNUIsTUFBTSxXQUFXLElBQUksSUFBSSxtQkFBUixDQUE0QixVQUFTLFNBQVQsRUFBb0I7QUFDL0QsUUFBTSxVQUFVLFVBQVUsVUFBVixFQUFoQjtBQUNBLFNBQUssSUFBSSxJQUFJLENBQWIsRUFBZ0IsSUFBSSxRQUFRLE1BQTVCLEVBQW9DLEdBQXBDLEVBQXlDO0FBQ3ZDLFVBQUksUUFBUSxDQUFSLEVBQVcsU0FBWCxJQUF3QixVQUF4QixJQUNHLFFBQVEsQ0FBUixFQUFXLElBQVgsSUFBbUIseUJBRDFCLEVBQ3FEO0FBQ25EO0FBQ0Q7QUFDRCxVQUFNLE9BQU8sUUFBUSxDQUFSLEVBQVcsV0FBWCxDQUF1QixDQUF2QixDQUFiO0FBQ0EsVUFBSSxDQUFDLElBQUQsSUFBUyxDQUFDLEtBQUssWUFBbkIsRUFBaUM7QUFDL0I7QUFDRDs7QUFSc0MsVUFVaEMsUUFWZ0MsR0FVcEIsUUFBUSxDQUFSLENBVm9CLENBVWhDLFFBVmdDOztBQVd2QyxVQUFJLFVBQVUsS0FBSyxZQUFuQjtBQUNBLFVBQUksS0FBSyxhQUFULEVBQXdCO0FBQ3RCLFlBQU0sUUFBUSxLQUFLLGFBQUwsQ0FBbUIsS0FBbkIsQ0FBeUIsbUJBQXpCLENBQWQ7QUFDQSxZQUFJLE1BQU0sTUFBTixHQUFlLENBQW5CLEVBQXNCO0FBQ3BCLHVDQUEyQixNQUFNLENBQU4sQ0FBM0I7QUFDRDtBQUNGO0FBQ0QsZUFBUSxNQUFNLEdBQWQsc0JBQ3VCLFFBRHZCLGdCQUMwQyxPQUQxQyxFQUVJLCtCQUZKLEVBR0ksK0JBSEo7QUFLRDtBQUNGLEdBMUJnQixDQUFqQjtBQTJCQSxXQUFTLE9BQVQsQ0FBaUIsRUFBQyxZQUFZLENBQUMsVUFBRCxDQUFiLEVBQWpCO0FBQ0Q7O0FBRUQ7Ozs7QUFJQSxTQUFTLHNCQUFULENBQWdDLEdBQWhDLEVBQXFDO0FBQ25DLFNBQU8sQ0FBQyxDQUFDLElBQUksbUJBQU4sSUFDQSxDQUFDLENBQUMsSUFBSSxxQkFETixJQUVDLG1CQUFtQixJQUFJLHFCQUFKLENBQTBCLFNBRnJEO0FBR0QiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmlmIChpc0xvbmdUYXNrQXBpU3VwcG9ydGVkKHNlbGYpKSB7XG4gIGRldGVjdExvbmdUYXNrcyhzZWxmKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICovXG5mdW5jdGlvbiBkZXRlY3RMb25nVGFza3Mod2luKSB7XG4gIGNvbnN0IG9ic2VydmVyID0gbmV3IHdpbi5QZXJmb3JtYW5jZU9ic2VydmVyKGZ1bmN0aW9uKGVudHJ5TGlzdCkge1xuICAgIGNvbnN0IGVudHJpZXMgPSBlbnRyeUxpc3QuZ2V0RW50cmllcygpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZW50cmllcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGVudHJpZXNbaV0uZW50cnlUeXBlICE9ICdsb25ndGFzaydcbiAgICAgICAgICB8fCBlbnRyaWVzW2ldLm5hbWUgIT0gJ2Nyb3NzLW9yaWdpbi1kZXNjZW5kYW50Jykge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGF0dHIgPSBlbnRyaWVzW2ldLmF0dHJpYnV0aW9uWzBdO1xuICAgICAgaWYgKCFhdHRyIHx8ICFhdHRyLmNvbnRhaW5lclNyYykge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qge2R1cmF0aW9ufSA9IGVudHJpZXNbaV07XG4gICAgICBsZXQgY3VscHJpdCA9IGF0dHIuY29udGFpbmVyU3JjO1xuICAgICAgaWYgKGF0dHIuY29udGFpbmVyTmFtZSkge1xuICAgICAgICBjb25zdCBtYXRjaCA9IGF0dHIuY29udGFpbmVyTmFtZS5tYXRjaCgvXCJ0eXBlXCI6XCIoW15cXFwiXSopXCIvKTtcbiAgICAgICAgaWYgKG1hdGNoLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICBjdWxwcml0ID0gYDxhbXAtYWQgdHlwZT1cIiR7bWF0Y2hbMV19XCI+YDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc29sZS4vKk9LKi9sb2coXG4gICAgICAgICAgYCVjIExPTkcgVEFTSyAlYyAke2R1cmF0aW9ufW1zIGZyb20gJHtjdWxwcml0fWAsXG4gICAgICAgICAgJ2JhY2tncm91bmQ6IHJlZDsgY29sb3I6IHdoaXRlJyxcbiAgICAgICAgICAnYmFja2dyb3VuZDogI2ZmZjsgY29sb3I6ICMwMDAnXG4gICAgICApO1xuICAgIH1cbiAgfSk7XG4gIG9ic2VydmVyLm9ic2VydmUoe2VudHJ5VHlwZXM6IFsnbG9uZ3Rhc2snXX0pO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc0xvbmdUYXNrQXBpU3VwcG9ydGVkKHdpbikge1xuICByZXR1cm4gISF3aW4uUGVyZm9ybWFuY2VPYnNlcnZlclxuICAgICAgJiYgISF3aW4uVGFza0F0dHJpYnV0aW9uVGltaW5nXG4gICAgICAmJiAoJ2NvbnRhaW5lck5hbWUnIGluIHdpbi5UYXNrQXR0cmlidXRpb25UaW1pbmcucHJvdG90eXBlKTtcbn1cbiJdfQ=="}