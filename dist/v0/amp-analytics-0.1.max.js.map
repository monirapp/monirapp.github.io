{"version":3,"sources":["node_modules/browser-pack/_prelude.js","extensions/amp-analytics/0.1/activity-impl.js","extensions/amp-analytics/0.1/amp-analytics.js","extensions/amp-analytics/0.1/analytics-root.js","extensions/amp-analytics/0.1/batching-plugins.js","extensions/amp-analytics/0.1/config.js","extensions/amp-analytics/0.1/events.js","extensions/amp-analytics/0.1/iframe-transport-message-queue.js","extensions/amp-analytics/0.1/iframe-transport-vendors.js","extensions/amp-analytics/0.1/iframe-transport.js","extensions/amp-analytics/0.1/instrumentation.js","extensions/amp-analytics/0.1/requests.js","extensions/amp-analytics/0.1/resource-timing.js","extensions/amp-analytics/0.1/sandbox-vars-whitelist.js","extensions/amp-analytics/0.1/transport.js","extensions/amp-analytics/0.1/variables.js","extensions/amp-analytics/0.1/vendors.js","extensions/amp-analytics/0.1/visibility-manager.js","extensions/amp-analytics/0.1/visibility-model.js","node_modules/document-register-element/build/document-register-element.patched.js","node_modules/promise-pjs/promise.js","src/3p-frame-messaging.js","src/ad-helper.js","src/common-signals.js","src/config.js","src/cookies.js","src/document-ready.js","src/dom.js","src/element-service.js","src/event-helper-listen.js","src/event-helper.js","src/experiments.js","src/friendly-iframe-embed.js","src/iframe-helper.js","src/intersection-observer-polyfill.js","src/json.js","src/layout-rect.js","src/layout.js","src/log.js","src/mode-object.js","src/mode.js","src/observable.js","src/pixel.js","src/polyfills.js","src/polyfills/array-includes.js","src/polyfills/custom-elements.js","src/polyfills/document-contains.js","src/polyfills/domtokenlist-toggle.js","src/polyfills/math-sign.js","src/polyfills/object-assign.js","src/polyfills/promise.js","src/service.js","src/service/jank-meter.js","src/services.js","src/static-template.js","src/string.js","src/style.js","src/types.js","src/url-parse-query-string.js","src/url-try-decode-uri-component.js","src/url.js","src/utils/array.js","src/utils/base64.js","src/utils/bytes.js","src/utils/lru-cache.js","src/utils/object.js","src/utils/promise.js","src/utils/signals.js","src/video-interface.js","third_party/css-escape/css-escape.js"],"names":[],"mappings":"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KAAL,CAAW,YAAX,GAA0B,KAAK,iBADV,EAC6B,CAD7B,CAAzB;AAEA,UAAM,cAAc,KAAK,GAAL,CAAS,qBAAT,EAAgC,gBAAhC,CAApB;AACA,aAAO,KAAK,GAAL,CACH,WADG,EAEH,yBAAyB,QAFtB,EAGH,oBAAoB,QAHjB,CAAP;AAID;;;;;;AAIH;;;;;;;;AAMA,SAAS,QAAT,CAAkB,IAAlB,EAAwB,QAAxB,EAAkC;AAChC,SAAO,QAAQ,QAAR,GAAmB,OAAO,QAA1B,GAAqC,CAA5C;AACD;;;AC9cD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACn6CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;QCzbgB,M,GAAA,M;QAeA,gB,GAAA,gB;QAiBA,kB,GAAA,kB;QAoBA,Y,GAAA,Y;;AA9GhB;;AACA;;AACA;;AACA;;AAGA;AAtBA;;;;;;;;;;;;;;;;AAuBA,IAAM,qBAAqB,MAA3B;AACO,IAAM,gCAAY;AACvB,sBAAoB,SADG;AAEvB,sBAAoB,WAFG;AAGvB,oBAAkB,SAHK;AAIvB,oBAAkB;AAJK,CAAlB;;AAOP;AACO,IAAM,oCAAc;AACzB;AACA,oBAAkB,kBAFO;AAGzB,eAAa,aAHY;AAIzB,sBAAoB,oBAJK;AAKzB,iBAAe,eALU;AAMzB,sBAAoB,oBANK;AAOzB,gBAAc,cAPW;AAQzB,cAAY,YARa;AASzB,sBAAoB,oBATK;AAUzB,qBAAmB,mBAVM;AAWzB,cAAY,YAXa;AAYzB,YAAU,UAZe;AAazB,qBAAmB,mBAbM;;AAezB;AACA,sBAAoB,oBAhBK;AAiBzB,+BAA6B,6BAjBJ;AAkBzB,6BAA2B,2BAlBF;AAmBzB,sCAAoC,oCAnBX;;AAqBzB;AACA,kBAAgB,gBAtBS;AAuBzB,YAAU,UAvBe;;AAyBzB;AACA,gCAA8B,8BA1BL;AA2BzB,2BAAyB,yBA3BA;AA4BzB,6BAA2B,2BA5BF;;AA8BzB;AACA,w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","file":"amp-analytics-0.1.max.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Provides an ability to collect data about activities the user\n * has performed on the page.\n */\n\nimport {Services} from '../../../src/services';\nimport {hasOwn} from '../../../src/utils/object';\nimport {listen} from '../../../src/event-helper';\nimport {registerServiceBuilderForDoc} from '../../../src/service';\n\n\n/**\n * The amount of time after an activity the user is considered engaged.\n * @private @const {number}\n */\nconst DEFAULT_ENGAGED_SECONDS = 5;\n\n/**\n * @enum {string}\n */\nconst ActivityEventType = {\n  ACTIVE: 'active',\n  INACTIVE: 'inactive',\n};\n\n/**\n * @typedef {{\n *   type: string,\n *   time: number\n * }}\n */\nlet ActivityEventDef;\n\n/**\n * Find the engaged time between the event and the time (exclusive of the time)\n * @param {ActivityEventDef} activityEvent\n * @param {number} time\n * @return {number}\n * @private\n */\nfunction findEngagedTimeBetween(activityEvent, time) {\n  let engagementBonus = 0;\n\n  if (activityEvent.type === ActivityEventType.ACTIVE) {\n    engagementBonus = DEFAULT_ENGAGED_SECONDS;\n  }\n\n  return Math.min(time - activityEvent.time, engagementBonus);\n}\n\nclass ActivityHistory {\n\n  /**\n   * Creates an instance of ActivityHistory.\n   */\n  constructor() {\n    /** @private {number} */\n    this.totalEngagedTime_ = 0;\n\n    /**\n     * prevActivityEvent_ remains undefined until the first valid push call.\n     * @private {ActivityEventDef|undefined}\n     */\n    this.prevActivityEvent_ = undefined;\n  }\n\n  /**\n   * Indicate that an activity took place at the given time.\n   * @param {ActivityEventDef} activityEvent\n   */\n  push(activityEvent) {\n    if (!this.prevActivityEvent_) {\n      this.prevActivityEvent_ = activityEvent;\n    }\n\n    if (this.prevActivityEvent_.time < activityEvent.time) {\n      this.totalEngagedTime_ +=\n          findEngagedTimeBetween(this.prevActivityEvent_, activityEvent.time);\n      this.prevActivityEvent_ = activityEvent;\n    }\n  }\n\n  /**\n   * Get the total engaged time up to the given time recorded in\n   * ActivityHistory.\n   * @param {number} time\n   * @return {number}\n   */\n  getTotalEngagedTime(time) {\n    let totalEngagedTime = 0;\n    if (this.prevActivityEvent_ !== undefined) {\n      totalEngagedTime = this.totalEngagedTime_ +\n          findEngagedTimeBetween(this.prevActivityEvent_, time);\n    }\n    return totalEngagedTime;\n  }\n\n}\n\n\n/**\n * Array of event types which will be listened for on the document to indicate\n * activity. Other activities are also observed on the Viewer and Viewport\n * objects. See {@link setUpActivityListeners_} for listener implementation.\n * @private @const {Array<string>}\n */\nconst ACTIVE_EVENT_TYPES = [\n  'mousedown', 'mouseup', 'mousemove', 'keydown', 'keyup',\n];\n\n/**\n * @param {!../../../src/service/ampdoc-impl.AmpDoc} ampDoc\n */\nexport function installActivityServiceForTesting(ampDoc) {\n  registerServiceBuilderForDoc(ampDoc, 'activity', Activity);\n}\n\nexport class Activity {\n\n  /**\n   * Activity tracks basic user activity on the page.\n   *  - Listeners are not registered on the activity event types until the\n   *    Viewer's `whenFirstVisible` is resolved.\n   *  - When the `whenFirstVisible` of Viewer is resolved, a first activity\n   *    is recorded.\n   *  - The first activity in any second causes all other activities to be\n   *    ignored. This is similar to debounce functionality since some events\n   *    (e.g. scroll) could occur in rapid succession.\n   *  - In any one second period, active events or inactive events can override\n   *    each other. Whichever type occured last has precedence.\n   *  - Active events give a 5 second \"bonus\" to engaged time.\n   *  - Inactive events cause an immediate stop to the engaged time bonus of\n   *    any previous activity event.\n   *  - At any point after instantiation, `getTotalEngagedTime` can be used\n   *    to get the engage time up to the time the function is called. If\n   *    `whenFirstVisible` has not yet resolved, engaged time is 0.\n   * @param {!../../../src/service/ampdoc-impl.AmpDoc} ampdoc\n   */\n  constructor(ampdoc) {\n    /** @const {!../../../src/service/ampdoc-impl.AmpDoc} ampdoc */\n    this.ampdoc = ampdoc;\n\n    /** @private @const {function()} */\n    this.boundStopIgnore_ = this.stopIgnore_.bind(this);\n\n    /** @private @const {function()} */\n    this.boundHandleActivity_ = this.handleActivity_.bind(this);\n\n    /** @private @const {function()} */\n    this.boundHandleVisibilityChange_ = this.handleVisibilityChange_.bind(this);\n\n    /**\n     * Contains the incrementalEngagedTime timestamps for named triggers.\n     * @private {Object<string, number>}\n     */\n    this.totalEngagedTimeByTrigger_ = {\n      /*\n       * \"$triggerName\" : ${lastRequestTimestamp}\n      */\n    };\n\n    /** @private {Array<!UnlistenDef>} */\n    this.unlistenFuncs_ = [];\n\n    /** @private {boolean} */\n    this.ignoreActivity_ = false;\n\n    /** @private {boolean} */\n    this.ignoreInactive_ = false;\n\n    /** @private @const {!ActivityHistory} */\n    this.activityHistory_ = new ActivityHistory();\n\n    /** @private @const {!../../../src/service/viewer-impl.Viewer} */\n    this.viewer_ = Services.viewerForDoc(this.ampdoc);\n\n    /** @private @const {!../../../src/service/viewport/viewport-impl.Viewport} */\n    this.viewport_ = Services.viewportForDoc(this.ampdoc);\n\n    this.viewer_.whenFirstVisible().then(this.start_.bind(this));\n  }\n\n  /** @private */\n  start_() {\n    /** @private @const {number} */\n    this.startTime_ = Date.now();\n    // record an activity since this is when the page became visible\n    this.handleActivity_();\n    this.setUpActivityListeners_();\n  }\n\n  /** @private */\n  getTimeSinceStart_() {\n    const timeSinceStart = Date.now() - this.startTime_;\n    // Ensure that a negative time is never returned. This may cause loss of\n    // data if there is a time change during the session but it will decrease\n    // the likelyhood of errors in that situation.\n    return (timeSinceStart > 0 ? timeSinceStart : 0);\n  }\n\n  /**\n   * Return to a state where neither activities or inactivity events are\n   * ignored when that event type is fired.\n   * @private\n   */\n  stopIgnore_() {\n    this.ignoreActivity_ = false;\n    this.ignoreInactive_ = false;\n  }\n\n  /** @private */\n  setUpActivityListeners_() {\n    for (let i = 0; i < ACTIVE_EVENT_TYPES.length; i++) {\n      this.unlistenFuncs_.push(listen(this.ampdoc.getRootNode(),\n          ACTIVE_EVENT_TYPES[i], this.boundHandleActivity_));\n    }\n\n    this.unlistenFuncs_.push(\n        this.viewer_.onVisibilityChanged(this.boundHandleVisibilityChange_));\n\n    // Viewport.onScroll does not return an unlisten function.\n    // TODO(britice): If Viewport is updated to return an unlisten function,\n    // update this to capture the unlisten function.\n    this.viewport_.onScroll(this.boundHandleActivity_);\n  }\n\n  /** @private */\n  handleActivity_() {\n    if (this.ignoreActivity_) {\n      return;\n    }\n    this.ignoreActivity_ = true;\n    this.ignoreInactive_ = false;\n\n    this.handleActivityEvent_(ActivityEventType.ACTIVE);\n  }\n\n  /** @private */\n  handleInactive_() {\n    if (this.ignoreInactive_) {\n      return;\n    }\n    this.ignoreInactive_ = true;\n    this.ignoreActivity_ = false;\n\n    this.handleActivityEvent_(ActivityEventType.INACTIVE);\n  }\n\n  /**\n   * @param {ActivityEventType} type\n   * @private\n   */\n  handleActivityEvent_(type) {\n    const timeSinceStart = this.getTimeSinceStart_();\n    const secondKey = Math.floor(timeSinceStart / 1000);\n    const timeToWait = 1000 - (timeSinceStart % 1000);\n\n    // stop ignoring activity at the start of the next activity bucket\n    setTimeout(this.boundStopIgnore_, timeToWait);\n\n    this.activityHistory_.push({\n      type,\n      time: secondKey,\n    });\n  }\n\n  /** @private */\n  handleVisibilityChange_() {\n    if (this.viewer_.isVisible()) {\n      this.handleActivity_();\n    } else {\n      this.handleInactive_();\n    }\n  }\n\n  /**\n   * Remove all listeners associated with this Activity instance.\n   * @private\n   */\n  unlisten_() {\n    for (let i = 0; i < this.unlistenFuncs_.length; i++) {\n      const unlistenFunc = this.unlistenFuncs_[i];\n      // TODO(britice): Due to eslint typechecking, this check may not be\n      // necessary.\n      if (typeof unlistenFunc === 'function') {\n        unlistenFunc();\n      }\n    }\n    this.unlistenFuncs_ = [];\n  }\n\n  /**\n   * @private\n   * @visibleForTesting\n   */\n  cleanup_() {\n    this.unlisten_();\n  }\n\n  /**\n   * Get total engaged time since the page became visible.\n   * @return {number}\n   */\n  getTotalEngagedTime() {\n    const secondsSinceStart = Math.floor(this.getTimeSinceStart_() / 1000);\n    return this.activityHistory_.getTotalEngagedTime(secondsSinceStart);\n  }\n\n  /**\n   * Get the incremental engaged time since the last push and reset it if asked.\n   * @param {string} name\n   * @param {boolean=} reset\n   * @return {number}\n   */\n  getIncrementalEngagedTime(name, reset = true) {\n    if (!hasOwn(this.totalEngagedTimeByTrigger_, name)) {\n      if (reset) {\n        this.totalEngagedTimeByTrigger_[name] = this.getTotalEngagedTime();\n      }\n      return this.getTotalEngagedTime();\n    }\n    const currentIncrementalEngagedTime =\n      this.totalEngagedTimeByTrigger_[name];\n    if (reset === false) {\n      return this.getTotalEngagedTime() - currentIncrementalEngagedTime;\n    }\n    this.totalEngagedTimeByTrigger_[name] = this.getTotalEngagedTime();\n    return this.totalEngagedTimeByTrigger_[name] -\n      currentIncrementalEngagedTime;\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Activity} from './activity-impl';\nimport {AnalyticsConfig, mergeObjects} from './config';\nimport {AnalyticsEventType} from './events';\nimport {\n  ExpansionOptions,\n  installVariableService,\n  variableServiceFor,\n} from './variables';\nimport {IframeTransport, getIframeTransportScriptUrl} from './iframe-transport';\nimport {\n  InstrumentationService,\n  instrumentationServicePromiseForDoc,\n} from './instrumentation';\nimport {LayoutPriority} from '../../../src/layout';\nimport {\n  RequestHandler,\n} from './requests';\nimport {Services} from '../../../src/services';\nimport {dev, rethrowAsync, user} from '../../../src/log';\nimport {dict, hasOwn, map} from '../../../src/utils/object';\nimport {expandTemplate} from '../../../src/string';\nimport {getAmpAdResourceId} from '../../../src/ad-helper';\nimport {getMode} from '../../../src/mode';\nimport {getTopWindow} from '../../../src/service';\nimport {isArray} from '../../../src/types';\nimport {isEnumValue} from '../../../src/types';\nimport {sendRequest, sendRequestUsingIframe} from './transport';\nimport {serializeResourceTiming} from './resource-timing';\nimport {toggle} from '../../../src/style';\n\nconst TAG = 'amp-analytics';\n\nconst MAX_REPLACES = 16; // The maximum number of entries in a extraUrlParamsReplaceMap\n\nconst WHITELIST_EVENT_IN_SANDBOX = [\n  AnalyticsEventType.VISIBLE,\n  AnalyticsEventType.HIDDEN,\n];\n\nexport class AmpAnalytics extends AMP.BaseElement {\n\n  /** @param {!AmpElement} element */\n  constructor(element) {\n    super(element);\n\n    /** @private {!Promise} */\n    this.consentPromise_ = Promise.resolve();\n\n    /**\n     * The html id of the `amp-user-notification` element.\n     * @private {?string}\n     */\n    this.consentNotificationId_ = null;\n\n    /** @private {boolean} */\n    this.isSandbox_ = false;\n\n    /**\n     * @private {Object<string, RequestHandler>} A map of request handler with requests\n     */\n    this.requests_ = {};\n\n    /**\n     * @private {JsonObject}\n     */\n    this.config_ = dict();\n\n    /** @private {?./instrumentation.InstrumentationService} */\n    this.instrumentation_ = null;\n\n    /** @private {?./instrumentation.AnalyticsGroup} */\n    this.analyticsGroup_ = null;\n\n    /** @private {!./variables.VariableService} */\n    this.variableService_ = variableServiceFor(this.win);\n\n    /** @private {!../../../src/service/crypto-impl.Crypto} */\n    this.cryptoService_ = Services.cryptoFor(this.win);\n\n    /** @private {?Promise} */\n    this.iniPromise_ = null;\n\n    /** @private {?IframeTransport} */\n    this.iframeTransport_ = null;\n\n    /** @private {boolean} */\n    this.isInabox_ = getMode(this.win).runtime == 'inabox';\n\n    /**\n     * Maximum time (since epoch) to report resource timing metrics.\n     * We stop reporting after 1 minute.\n     * @private @const {number}\n     */\n    this.maxResourceTimingReportingTime_ = Date.now() + (60 * 1000);\n  }\n\n  /** @override */\n  getLayoutPriority() {\n    // Load immediately if inabox, otherwise after other content.\n    return this.isInabox_ ? LayoutPriority.CONTENT : LayoutPriority.METADATA;\n  }\n\n  /** @override */\n  isAlwaysFixed() {\n    return true;\n  }\n\n  /** @override */\n  isLayoutSupported(unusedLayout) {\n    return true;\n  }\n\n  /** @override */\n  buildCallback() {\n    this.isSandbox_ = this.element.hasAttribute('sandbox');\n\n    this.element.setAttribute('aria-hidden', 'true');\n\n    this.consentNotificationId_ = this.element\n        .getAttribute('data-consent-notification-id');\n\n    if (this.consentNotificationId_ != null) {\n      this.consentPromise_ =\n          Services.userNotificationManagerForDoc(this.element)\n              .then(service => service.get(dev().assertString(\n                  this.consentNotificationId_)));\n    }\n\n    if (this.element.getAttribute('trigger') == 'immediate') {\n      this.ensureInitialized_();\n    }\n  }\n\n  /** @override */\n  layoutCallback() {\n    // Now that we are rendered, stop rendering the element to reduce\n    // resource consumption.\n    return this.ensureInitialized_();\n  }\n\n  /** @override */\n  detachedCallback() {\n    if (this.analyticsGroup_) {\n      this.analyticsGroup_.dispose();\n      this.analyticsGroup_ = null;\n    }\n    for (let i = 0; i < this.requests_.length; i++) {\n      this.requests_[i].dispose();\n      delete this.requests_[i];\n    }\n  }\n\n  /** @override */\n  resumeCallback() {\n    if (this.config_['transport'] && this.config_['transport']['iframe']) {\n      this.initIframeTransport_();\n    }\n  }\n\n  /** @override */\n  unlayoutCallback() {\n    if (Services.viewerForDoc(this.getAmpDoc()).isVisible()) {\n      // amp-analytics tag was just set to display:none. Page is still loaded.\n      return false;\n    }\n\n    // Page was unloaded - free up owned resources.\n    if (this.iframeTransport_) {\n      this.iframeTransport_.detach();\n      this.iframeTransport_ = null;\n    }\n    return super.unlayoutCallback();\n  }\n\n  /**\n   * @return {!Promise}\n   * @private\n   */\n  ensureInitialized_() {\n    if (this.iniPromise_) {\n      return this.iniPromise_;\n    }\n    toggle(this.element, false);\n    this.iniPromise_ =\n        Services.viewerForDoc(this.getAmpDoc()).whenFirstVisible()\n            // Rudimentary \"idle\" signal.\n            .then(() => Services.timerFor(this.win).promise(1))\n            .then(() => this.consentPromise_)\n            .then(() => instrumentationServicePromiseForDoc(this.getAmpDoc()))\n            .then(instrumentation => {\n              this.instrumentation_ = instrumentation;\n              return new AnalyticsConfig(this.element).loadConfig();\n            })\n            .then(config => {\n              this.config_ = config;\n            })\n            .then(this.registerTriggers_.bind(this));\n    return this.iniPromise_;\n  }\n\n  /**\n   * Registers triggers.\n   * @return {!Promise|undefined}\n   * @private\n   */\n  registerTriggers_() {\n    if (this.hasOptedOut_()) {\n      // Nothing to do when the user has opted out.\n      const TAG = this.getName_();\n      user().fine(TAG, 'User has opted out. No hits will be sent.');\n      return Promise.resolve();\n    }\n\n    this.generateRequests_();\n\n    if (!this.config_['triggers']) {\n      const TAG = this.getName_();\n      this.user().error(TAG, 'No triggers were found in the ' +\n          'config. No analytics data will be sent.');\n      return Promise.resolve();\n    }\n\n    this.processExtraUrlParams_(this.config_['extraUrlParams'],\n        this.config_['extraUrlParamsReplaceMap']);\n\n    this.analyticsGroup_ =\n        this.instrumentation_.createAnalyticsGroup(this.element);\n\n    if (this.config_['transport'] && this.config_['transport']['iframe']) {\n      this.initIframeTransport_();\n    }\n\n    const promises = [];\n    // Trigger callback can be synchronous. Do the registration at the end.\n    for (const k in this.config_['triggers']) {\n      if (hasOwn(this.config_['triggers'], k)) {\n        const trigger = this.config_['triggers'][k];\n        const expansionOptions = this.expansionOptions_(\n            {}, trigger, undefined, true);\n        const TAG = this.getName_();\n        if (!trigger) {\n          this.user().error(TAG, 'Trigger should be an object: ', k);\n          continue;\n        }\n        if (!trigger['on'] || !trigger['request']) {\n          this.user().error(TAG, '\"on\" and \"request\" ' +\n              'attributes are required for data to be collected.');\n          continue;\n        }\n        // Check for not supported trigger for sandboxed analytics\n        if (this.isSandbox_) {\n          const eventType = trigger['on'];\n          if (isEnumValue(AnalyticsEventType, eventType) &&\n              !WHITELIST_EVENT_IN_SANDBOX.includes(eventType)) {\n            this.user().error(TAG, eventType +\n                ' is not supported for amp-analytics in scope');\n            continue;\n          }\n        }\n\n        this.processExtraUrlParams_(trigger['extraUrlParams'],\n            this.config_['extraUrlParamsReplaceMap']);\n        promises.push(this.isSampledIn_(trigger).then(result => {\n          if (!result) {\n            return;\n          }\n          // replace selector and selectionMethod\n          if (this.isSandbox_) {\n            // Only support selection of parent element for analytics in scope\n            if (!this.element.parentElement) {\n              // In case parent element has been removed from DOM, do nothing\n              return;\n            }\n            trigger['selector'] = this.element.parentElement.tagName;\n            trigger['selectionMethod'] = 'closest';\n            this.addTriggerNoInline_(trigger);\n          } else if (trigger['selector']) {\n            // Expand the selector using variable expansion.\n            return this.variableService_.expandTemplate(\n                trigger['selector'], expansionOptions)\n                .then(selector => {\n                  trigger['selector'] = selector;\n                  this.addTriggerNoInline_(trigger);\n                });\n          } else {\n            this.addTriggerNoInline_(trigger);\n          }\n        }));\n      }\n    }\n    return Promise.all(promises);\n  }\n\n  /**\n   * amp-analytics will create an iframe for vendors in\n   * extensions/amp-analytics/0.1/vendors.js who have transport/iframe defined.\n   * This is limited to MRC-accreddited vendors. The frame is removed if the\n   * user navigates/swipes away from the page, and is recreated if the user\n   * navigates back to the page.\n   * @private\n   */\n  initIframeTransport_() {\n    if (this.iframeTransport_) {\n      return;\n    }\n    this.preload(getIframeTransportScriptUrl(this.getAmpDoc().win), 'script');\n    const ampAdResourceId = this.assertAmpAdResourceId();\n\n    this.iframeTransport_ = new IframeTransport(\n        // Create  3p transport frame within creative frame if inabox.\n        this.isInabox_ ? this.win : this.getAmpDoc().win,\n        this.element.getAttribute('type'),\n        this.config_['transport'], ampAdResourceId);\n  }\n\n  /**\n   * Asks the browser to preload a URL. Always also does a preconnect\n   * because browser support for that is better.\n   *\n   * @param {string} url\n   * @param {string=} opt_preloadAs\n   * @visibleForTesting\n   */\n  preload(url, opt_preloadAs) {\n    this.preconnect.preload(url, opt_preloadAs);\n  }\n\n  /**\n   * Gets the resourceID of the parent amp-ad element.\n   * Throws an exception if no such element.\n   * @return {string}\n   * @visibleForTesting\n   */\n  assertAmpAdResourceId() {\n    return user().assertString(\n        getAmpAdResourceId(this.element, getTopWindow(this.win)),\n        `${this.getName_()}: No friendly amp-ad ancestor element was found ` +\n        'for amp-analytics tag with iframe transport.');\n  }\n\n  /**\n   * Calls `AnalyticsGroup.addTrigger` and reports any errors. \"NoInline\" is\n   * to avoid inlining this method so that `try/catch` does it veto\n   * optimizations.\n   * @param {!JsonObject} config\n   * @private\n   */\n  addTriggerNoInline_(config) {\n    try {\n      this.analyticsGroup_.addTrigger(\n          config, this.handleEvent_.bind(this, config));\n    } catch (e) {\n      const TAG = this.getName_();\n      const eventType = config['on'];\n      rethrowAsync(TAG, 'Failed to process trigger \"' + eventType + '\"', e);\n    }\n  }\n\n  /**\n   * Replace the names of keys in params object with the values in replace map.\n   *\n   * @param {!Object<string, string>} params The params that need to be renamed.\n   * @param {!Object<string, string>} replaceMap A map of pattern and replacement\n   *    value.\n   * @private\n   */\n  processExtraUrlParams_(params, replaceMap) {\n    if (params && replaceMap) {\n      // If the config includes a extraUrlParamsReplaceMap, apply it as a set\n      // of params to String.replace to allow aliasing of the keys in\n      // extraUrlParams.\n      let count = 0;\n      for (const replaceMapKey in replaceMap) {\n        if (++count > MAX_REPLACES) {\n          const TAG = this.getName_();\n          this.user().error(TAG,\n              'More than ' + MAX_REPLACES + ' extraUrlParamsReplaceMap rules ' +\n              'aren\\'t allowed; Skipping the rest');\n          break;\n        }\n\n        for (const extraUrlParamsKey in params) {\n          const newkey = extraUrlParamsKey.replace(\n              replaceMapKey,\n              replaceMap[replaceMapKey]\n          );\n          if (extraUrlParamsKey != newkey) {\n            const value = params[extraUrlParamsKey];\n            delete params[extraUrlParamsKey];\n            params[newkey] = value;\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * @return {boolean} true if the user has opted out.\n   */\n  hasOptedOut_() {\n    if (!this.config_['optout']) {\n      return false;\n    }\n\n    const props = this.config_['optout'].split('.');\n    let k = this.win;\n    for (let i = 0; i < props.length; i++) {\n      if (!k) {\n        return false;\n      }\n      k = k[props[i]];\n    }\n    // The actual property being called is controlled by vendor configs only\n    // that are approved in code reviews. User customization of the `optout`\n    // property is not allowed.\n    return k();\n  }\n\n  /**\n   * Goes through all the requests in predefined vendor config and tag's config\n   * and creates a map of request name to request template. These requests can\n   * then be used while sending a request to a server.\n   *\n   * @private\n   */\n  generateRequests_() {\n    if (!this.config_ || !this.config_['requests']) {\n      const TAG = this.getName_();\n      this.user().error(TAG, 'No request strings defined. Analytics ' +\n          'data will not be sent from this page.');\n      return;\n    }\n\n    if (this.config_['requests']) {\n      for (const k in this.config_['requests']) {\n        if (hasOwn(this.config_['requests'], k)) {\n          const request = this.config_['requests'][k];\n          if (!request['baseUrl']) {\n            this.user().error(TAG, 'request must have a baseUrl');\n            delete this.config_['requests'][k];\n          }\n        }\n      }\n\n      // Expand any placeholders. For requests, we expand each string up to 5\n      // times to support nested requests. Leave any unresolved placeholders.\n      // Expand any requests placeholder.\n      for (const k in this.config_['requests']) {\n        this.config_['requests'][k]['baseUrl'] =\n            expandTemplate(this.config_['requests'][k]['baseUrl'], key => {\n              const request = this.config_['requests'][key];\n              return (request && request['baseUrl']) || '${' + key + '}';\n            }, 5);\n      }\n\n      const requests = {};\n      for (const k in this.config_['requests']) {\n        if (hasOwn(this.config_['requests'], k)) {\n          const request = this.config_['requests'][k];\n          requests[k] = new RequestHandler(\n              this.element, request, this.preconnect,\n              this.sendRequest_.bind(this),\n              this.isSandbox_);\n        }\n      }\n      this.requests_ = requests;\n    }\n  }\n\n  /**\n   * Callback for events that are registered by the config's triggers. This\n   * method generates requests and sends them out.\n   *\n   * @param {!JsonObject} trigger JSON config block that resulted in this event.\n   * @param {!Object} event Object with details about the event.\n   * @private\n   */\n  handleEvent_(trigger, event) {\n    const requests = isArray(trigger['request'])\n      ? trigger['request'] : [trigger['request']];\n\n    for (let r = 0; r < requests.length; r++) {\n      const requestName = requests[r];\n      this.handleRequestForEvent_(requestName, trigger, event);\n    }\n  }\n\n  /**\n   * Processes a request for an event callback and sends it out.\n   *\n   * @param {string} requestName The requestName to process.\n   * @param {!JsonObject} trigger JSON config block that resulted in this event.\n   * @param {!Object} event Object with details about the event.\n   * @private\n   */\n  handleRequestForEvent_(requestName, trigger, event) {\n    if (!this.element.ownerDocument.defaultView) {\n      const TAG = this.getName_();\n      dev().warn(TAG, 'request against destroyed embed: ', trigger['on']);\n    }\n\n    const request = this.requests_[requestName];\n\n    if (!request) {\n      const TAG = this.getName_();\n      this.user().error(TAG, 'Ignoring event. Request string ' +\n          'not found: ', trigger['request']);\n      return;\n    }\n\n    this.checkTriggerEnabled_(trigger, event).then(enabled => {\n      if (!enabled) {\n        return;\n      }\n      this.expandAndSendRequest_(request, trigger, event);\n    });\n  }\n\n  /**\n   * @param {!JsonObject} trigger JSON config block that resulted in this event.\n   * @param {!ExpansionOptions} expansionOptions Expansion options.\n   * @return {!Object<string, (string|!Promise<string>|function(): string)>}\n   * @private\n   */\n  getDynamicVariableBindings_(trigger, expansionOptions) {\n    const dynamicBindings = {};\n    const resourceTimingSpec = trigger['resourceTimingSpec'];\n    if (resourceTimingSpec) {\n      // Check if we're done reporting resource timing metrics before binding\n      // before binding the resource timing variable.\n      if (!resourceTimingSpec['done'] &&\n          Date.now() < this.maxResourceTimingReportingTime_) {\n        const binding = 'RESOURCE_TIMING';\n        const analyticsVar = 'resourceTiming';\n        dynamicBindings[binding] =\n            serializeResourceTiming(this.win, resourceTimingSpec);\n        expansionOptions.vars[analyticsVar] = binding;\n      }\n    }\n    return dynamicBindings;\n  }\n\n  /**\n   * @param {RequestHandler} request The request to process.\n   * @param {!JsonObject} trigger JSON config block that resulted in this event.\n   * @param {!Object} event Object with details about the event.\n   * @private\n   */\n  expandAndSendRequest_(request, trigger, event) {\n    this.config_['vars']['requestCount']++;\n    const expansionOptions = this.expansionOptions_(event, trigger);\n    const dynamicBindings =\n        this.getDynamicVariableBindings_(trigger, expansionOptions);\n    request.send(\n        this.config_['extraUrlParams'], trigger, expansionOptions,\n        dynamicBindings);\n  }\n\n  /**\n   * @param {!JsonObject} trigger The config to use to determine sampling.\n   * @return {!Promise<boolean>} Whether the request should be sampled in or\n   * not based on sampleSpec.\n   * @private\n   */\n  isSampledIn_(trigger) {\n    /** @const {!JsonObject} */\n    const spec = trigger['sampleSpec'];\n    const resolve = Promise.resolve(true);\n    const TAG = this.getName_();\n    if (!spec) {\n      return resolve;\n    }\n    const sampleOn = spec['sampleOn'];\n    if (!sampleOn) {\n      this.user().error(TAG, 'Invalid sampleOn value.');\n      return resolve;\n    }\n    const threshold = parseFloat(spec['threshold']); // Threshold can be NaN.\n    if (threshold >= 0 && threshold <= 100) {\n      const expansionOptions = this.expansionOptions_({}, trigger);\n      return this.expandTemplateWithUrlParams_(sampleOn, expansionOptions)\n          .then(key => this.cryptoService_.uniform(key))\n          .then(digest => digest * 100 < threshold);\n    }\n    user()./*OK*/error(TAG, 'Invalid threshold for sampling.');\n    return resolve;\n  }\n\n  /**\n   * Checks if request for a trigger is enabled.\n   * @param {!JsonObject} trigger The config to use to determine if trigger is\n   * enabled.\n   * @param {!Object} event Object with details about the event.\n   * @return {!Promise<boolean>} Whether trigger must be called.\n   * @private\n   */\n  checkTriggerEnabled_(trigger, event) {\n    const expansionOptions = this.expansionOptions_(event, trigger);\n    const enabledOnTagLevel =\n        this.checkSpecEnabled_(this.config_['enabled'], expansionOptions);\n    const enabledOnTriggerLevel =\n        this.checkSpecEnabled_(trigger['enabled'], expansionOptions);\n\n    return Promise.all([enabledOnTagLevel, enabledOnTriggerLevel])\n        .then(enabled => {\n          dev().assert(enabled.length === 2);\n          return enabled[0] && enabled[1];\n        });\n  }\n\n  /**\n   * Checks result of 'enabled' spec evaluation. Returns false if spec is\n   * provided and value resolves to a falsey value (empty string, 0, false,\n   * null, NaN or undefined).\n   * @param {string} spec Expression that will be evaluated.\n   * @param {!ExpansionOptions} expansionOptions Expansion options.\n   * @return {!Promise<boolean>} False only if spec is provided and value is\n   * falsey.\n   * @private\n   */\n  checkSpecEnabled_(spec, expansionOptions) {\n    // Spec absence always resolves to true.\n    if (spec === undefined) {\n      return Promise.resolve(true);\n    }\n\n    return this.expandTemplateWithUrlParams_(spec, expansionOptions)\n        .then(val => {\n          return val !== '' && val !== '0' && val !== 'false' &&\n              val !== 'null' && val !== 'NaN' && val !== 'undefined';\n        });\n  }\n\n  /**\n   * Expands spec using provided expansion options and applies url replacement\n   * if necessary.\n   * @param {string} spec Expression that needs to be expanded.\n   * @param {!ExpansionOptions} expansionOptions Expansion options.\n   * @return {!Promise<string>} expanded spec.\n   * @private\n   */\n  expandTemplateWithUrlParams_(spec, expansionOptions) {\n    return this.variableService_.expandTemplate(spec, expansionOptions)\n        .then(key => Services.urlReplacementsForDoc(\n            this.element).expandUrlAsync(key));\n  }\n\n  /**\n   * @param {string} request The full request string to send.\n   * @param {!JsonObject} trigger\n   * @private\n   */\n  sendRequest_(request, trigger) {\n    if (!request) {\n      const TAG = this.getName_();\n      this.user().error(TAG, 'Request not sent. Contents empty.');\n      return;\n    }\n    if (trigger['iframePing']) {\n      user().assert(trigger['on'] == 'visible',\n          'iframePing is only available on page view requests.');\n      sendRequestUsingIframe(this.win, request);\n    } else if (this.config_['transport'] &&\n        this.config_['transport']['iframe']) {\n      user().assert(this.iframeTransport_,\n          'iframe transport was inadvertently deleted');\n      this.iframeTransport_.sendRequest(request);\n    } else {\n      sendRequest(this.win, request, this.config_['transport'] || {});\n    }\n  }\n\n  /**\n   * @return {string} Returns a string to identify this tag. May not be unique\n   * if the element id is not unique.\n   * @private\n   */\n  getName_() {\n    return 'AmpAnalytics ' +\n        (this.element.getAttribute('id') || '<unknown id>');\n  }\n\n  /**\n   * @param {!Object<string, Object<string, string|Array<string>>>} source1\n   * @param {!Object<string, Object<string, string|Array<string>>>} source2\n   * @param {number=} opt_iterations\n   * @param {boolean=} opt_noEncode\n   * @return {!ExpansionOptions}\n   */\n  expansionOptions_(source1, source2, opt_iterations, opt_noEncode) {\n    const vars = map();\n    mergeObjects(this.config_['vars'], vars);\n    mergeObjects(source2['vars'], vars);\n    mergeObjects(source1['vars'], vars);\n    return new ExpansionOptions(vars, opt_iterations, opt_noEncode);\n  }\n}\n\nAMP.extension(TAG, '0.1', AMP => {\n  // Register doc-service factory.\n  AMP.registerServiceForDoc(\n      'amp-analytics-instrumentation', InstrumentationService);\n  AMP.registerServiceForDoc('activity', Activity);\n  installVariableService(AMP.win);\n  // Register the element.\n  AMP.registerElement(TAG, AmpAnalytics);\n});\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Services} from '../../../src/services';\nimport {\n  VisibilityManagerForDoc,\n  VisibilityManagerForEmbed,\n} from './visibility-manager';\nimport {\n  closestBySelector,\n  matches,\n  scopedQuerySelector,\n} from '../../../src/dom';\nimport {dev, user} from '../../../src/log';\nimport {getMode} from '../../../src/mode';\nimport {layoutRectLtwh} from '../../../src/layout-rect';\nimport {map} from '../../../src/utils/object';\nimport {tryResolve} from '../../../src/utils/promise';\nimport {whenContentIniLoad} from '../../../src/friendly-iframe-embed';\n\nconst TAG = 'amp-analytics';\n\n\n/**\n * An analytics root. Analytics can be scoped to either ampdoc, embed or\n * an arbitrary AMP element.\n *\n * TODO(dvoytenko): consider moving this concept into core as `AmpRoot`\n * interface that will be implemented by `AmpDoc` and `FriendlyIframeEmbed`.\n *\n * @implements {../../../src/service.Disposable}\n * @abstract\n */\nexport class AnalyticsRoot {\n  /**\n   * @param {!../../../src/service/ampdoc-impl.AmpDoc} ampdoc\n   * @param {?AnalyticsRoot} parent\n   */\n  constructor(ampdoc, parent) {\n    /** @const */\n    this.ampdoc = ampdoc;\n\n    /** @const */\n    this.parent = parent;\n\n    /** @const */\n    this.trackers_ = map();\n\n    /** @private {?./visibility-manager.VisibilityManager} */\n    this.visibilityManager_ = null;\n  }\n\n  /** @override */\n  dispose() {\n    for (const k in this.trackers_) {\n      this.trackers_[k].dispose();\n      delete this.trackers_[k];\n    }\n    if (this.visibilityManager_) {\n      this.visibilityManager_.dispose();\n    }\n  }\n\n  /**\n   * Returns the type of the tracker.\n   * @return {string}\n   * @abstract\n   */\n  getType() {}\n\n  /**\n   * The root node the analytics is scoped to.\n   *\n   * @return {!Document|!ShadowRoot|!Element}\n   * @abstract\n   */\n  getRoot() {}\n\n  /**\n   * The viewer of analytics root\n   * @return {!../../../src/service/viewer-impl.Viewer}\n   */\n  getViewer() {\n    return Services.viewerForDoc(this.ampdoc);\n  }\n\n  /**\n   * The root element within the analytics root.\n   *\n   * @return {!Element}\n   */\n  getRootElement() {\n    const root = this.getRoot();\n    return dev().assertElement(root.documentElement || root.body || root);\n  }\n\n  /**\n   * The host element of the analytics root.\n   *\n   * @return {?Element}\n   * @abstract\n   */\n  getHostElement() {}\n\n  /**\n   * The signals for the root.\n   *\n   * @return {!../../../src/utils/signals.Signals}\n   * @abstract\n   */\n  signals() {}\n\n  /**\n   * Whether this analytics root contains the specified node.\n   *\n   * @param {!Node} node\n   * @return {boolean}\n   */\n  contains(node) {\n    return this.getRoot().contains(node);\n  }\n\n  /**\n   * Returns the element with the specified ID in the scope of this root.\n   *\n   * @param {string} unusedId\n   * @return {?Element}\n   * @abstract\n   */\n  getElementById(unusedId) {}\n\n  /**\n   * Returns the tracker for the specified name and list of allowed types.\n   *\n   * @param {string} name\n   * @param {!Object<string, function(new:./events.EventTracker)>} whitelist\n   * @return {?./events.EventTracker}\n   */\n  getTrackerForWhitelist(name, whitelist) {\n    const trackerProfile = whitelist[name];\n    if (trackerProfile) {\n      return this.getTracker(name, trackerProfile);\n    }\n    return null;\n  }\n\n  /**\n   * Returns the tracker for the specified name and type. If the tracker\n   * has not been requested before, it will be created.\n   *\n   * @param {string} name\n   * @param {function(new:./events.CustomEventTracker, !AnalyticsRoot)|function(new:./events.ClickEventTracker, !AnalyticsRoot)|function(new:./events.SignalTracker, !AnalyticsRoot)|function(new:./events.IniLoadTracker, !AnalyticsRoot)|function(new:./events.VideoEventTracker, !AnalyticsRoot)|function(new:./events.VideoEventTracker, !AnalyticsRoot)|function(new:./events.VisibilityTracker, !AnalyticsRoot)} klass\n   * @return {!./events.EventTracker}\n   */\n  getTracker(name, klass) {\n    let tracker = this.trackers_[name];\n    if (!tracker) {\n      tracker = new klass(this);\n      this.trackers_[name] = tracker;\n    }\n    return tracker;\n  }\n\n  /**\n   * Returns the tracker for the specified name or `null`.\n   * @param {string} name\n   * @return {?./events.EventTracker}\n   */\n  getTrackerOptional(name) {\n    return this.trackers_[name] || null;\n  }\n\n  /**\n   * Searches the element that matches the selector within the scope of the\n   * analytics root in relationship to the specified context node.\n   *\n   * @param {!Element} context\n   * @param {string} selector DOM query selector.\n   * @param {?string=} selectionMethod Allowed values are `null`,\n   *   `'closest'` and `'scope'`.\n   * @return {!Promise<!Element>} Element corresponding to the selector.\n   */\n  getElement(context, selector, selectionMethod = null) {\n    // Special case selectors. The selection method is irrelavant.\n    // And no need to wait for document ready.\n    if (selector == ':root') {\n      return tryResolve(() => this.getRootElement());\n    }\n    if (selector == ':host') {\n      return new Promise(resolve => {\n        resolve(user().assertElement(\n            this.getHostElement(), `Element \"${selector}\" not found`));\n      });\n    }\n\n    // Wait for document-ready to avoid false missed searches\n    return this.ampdoc.whenReady().then(() => {\n      let found;\n      let result = null;\n      // Query search based on the selection method.\n      try {\n        if (selectionMethod == 'scope') {\n          found = scopedQuerySelector(context, selector);\n        } else if (selectionMethod == 'closest') {\n          found = closestBySelector(context, selector);\n        } else {\n          found = this.getRoot().querySelector(selector);\n        }\n      } catch (e) {\n        user().assert(false, `Invalid query selector ${selector}`);\n      }\n\n      // DOM search can \"look\" outside the boundaries of the root, thus make\n      // sure the result is contained.\n      if (found && this.contains(found)) {\n        result = found;\n      }\n      return user().assertElement(\n          result, `Element \"${selector}\" not found`);\n    });\n  }\n\n  /**\n   * Searches the AMP element that matches the selector within the scope of the\n   * analytics root in relationship to the specified context node.\n   *\n   * @param {!Element} context\n   * @param {string} selector DOM query selector.\n   * @param {?string=} selectionMethod Allowed values are `null`,\n   *   `'closest'` and `'scope'`.\n   * @return {!Promise<!AmpElement>} AMP element corresponding to the selector if found.\n   */\n  getAmpElement(context, selector, selectionMethod) {\n    return this.getElement(context, selector, selectionMethod).then(element => {\n      user().assert(\n          element.classList.contains('i-amphtml-element'),\n          'Element \"%s\" is required to be an AMP element', selector);\n      return element;\n    });\n  }\n\n  /**\n   * Creates listener-filter for DOM events to check against the specified\n   * selector. If the node (or its ancestors) match the selector the listener\n   * will be called.\n   *\n   * @param {function(!Element, !Event)} listener The first argument is the\n   *   matched target node and the second is the original event.\n   * @param {!Element} context\n   * @param {string} selector DOM query selector.\n   * @param {?string=} selectionMethod Allowed values are `null`,\n   *   `'closest'` and `'scope'`.\n   * @return {function(!Event)}\n   */\n  createSelectiveListener(\n    listener, context, selector, selectionMethod = null) {\n    return event => {\n      if (selector == ':host') {\n        // `:host` is not reachable via selective listener b/c event path\n        // cannot be retargeted across the boundary of the embed.\n        return;\n      }\n\n      // Navigate up the DOM tree to find the actual target.\n      const rootElement = this.getRootElement();\n      const isSelectAny = (selector == '*');\n      const isSelectRoot = (selector == ':root');\n      let {target} = event;\n      while (target) {\n\n        // Target must be contained by this root.\n        if (!this.contains(target)) {\n          break;\n        }\n        // `:scope` context must contain the target.\n        if (selectionMethod == 'scope' &&\n            !isSelectRoot && !context.contains(target)) {\n          break;\n        }\n        // `closest()` target must contain the conext.\n        if (selectionMethod == 'closest' && !target.contains(context)) {\n          // However, the search must continue!\n          target = target.parentElement;\n          continue;\n        }\n\n        // Check if the target matches the selector.\n        if (isSelectAny ||\n            (isSelectRoot && target == rootElement) ||\n            matchesNoInline(target, selector)) {\n          listener(target, event);\n          // Don't fire the event multiple times even if the more than one\n          // ancestor matches the selector.\n          break;\n        }\n\n        target = target.parentElement;\n      }\n    };\n  }\n\n  /**\n   * Returns the promise that will be resolved as soon as the elements within\n   * the root have been loaded inside the first viewport of the root.\n   * @return {!Promise}\n   * @abstract\n   */\n  whenIniLoaded() {}\n\n  /**\n   * Returns the visibility root corresponding to this analytics root (ampdoc\n   * or embed). The visibility root is created lazily as needed and takes\n   * care of all visibility tracking functions.\n   * @return {!./visibility-manager.VisibilityManager}\n   */\n  getVisibilityManager() {\n    if (!this.visibilityManager_) {\n      this.visibilityManager_ = this.createVisibilityManager();\n    }\n    return this.visibilityManager_;\n  }\n\n  /**\n   * @return {!./visibility-manager.VisibilityManager}\n   * @protected\n   * @abstract\n   */\n  createVisibilityManager() {}\n}\n\n\n/**\n * The implementation of the analytics root for an ampdoc.\n */\nexport class AmpdocAnalyticsRoot extends AnalyticsRoot {\n  /**\n   * @param {!../../../src/service/ampdoc-impl.AmpDoc} ampdoc\n   */\n  constructor(ampdoc) {\n    super(ampdoc, /* parent */ null);\n  }\n\n  /** @override */\n  getType() {\n    return 'ampdoc';\n  }\n\n  /** @override */\n  getRoot() {\n    return this.ampdoc.getRootNode();\n  }\n\n  /** @override */\n  getHostElement() {\n    // ampdoc is always the root of everything - no host.\n    return null;\n  }\n\n  /** @override */\n  signals() {\n    return this.ampdoc.signals();\n  }\n\n  /** @override */\n  getElementById(id) {\n    return this.ampdoc.getElementById(id);\n  }\n\n  /** @override */\n  whenIniLoaded() {\n    const viewport = Services.viewportForDoc(this.ampdoc);\n    let rect;\n    if (getMode(this.ampdoc.win).runtime == 'inabox') {\n      // TODO(dvoytenko, #7971): This is currently addresses incorrect position\n      // calculations in a in-a-box viewport where all elements are offset\n      // to the bottom of the embed. The current approach, even if fixed, still\n      // creates a significant probability of risk condition.\n      // Once address, we can simply switch to the 0/0 approach in the `else`\n      // clause.\n      rect = viewport.getLayoutRect(this.getRootElement());\n    } else {\n      const size = viewport.getSize();\n      rect = layoutRectLtwh(0, 0, size.width, size.height);\n    }\n    return whenContentIniLoad(this.ampdoc, this.ampdoc.win, rect);\n  }\n\n  /** @override */\n  createVisibilityManager() {\n    return new VisibilityManagerForDoc(this.ampdoc);\n  }\n}\n\n\n/**\n * The implementation of the analytics root for FIE.\n */\nexport class EmbedAnalyticsRoot extends AnalyticsRoot {\n  /**\n   * @param {!../../../src/service/ampdoc-impl.AmpDoc} ampdoc\n   * @param {!../../../src/friendly-iframe-embed.FriendlyIframeEmbed} embed\n   * @param {?AnalyticsRoot} parent\n   */\n  constructor(ampdoc, embed, parent) {\n    super(ampdoc, parent);\n    /** @const */\n    this.embed = embed;\n  }\n\n  /** @override */\n  getType() {\n    return 'embed';\n  }\n\n  /** @override */\n  getRoot() {\n    return this.embed.win.document;\n  }\n\n  /** @override */\n  getHostElement() {\n    return this.embed.iframe;\n  }\n\n  /** @override */\n  signals() {\n    return this.embed.signals();\n  }\n\n  /** @override */\n  getElementById(id) {\n    return this.embed.win.document.getElementById(id);\n  }\n\n  /** @override */\n  whenIniLoaded() {\n    return this.embed.whenIniLoaded();\n  }\n\n  /** @override */\n  createVisibilityManager() {\n    return new VisibilityManagerForEmbed(\n        this.parent.getVisibilityManager(),\n        this.embed);\n  }\n}\n\n\n/**\n * @param  {!Element} el\n * @param  {string} selector\n * @return {boolean}\n */\nfunction matchesNoInline(el, selector) {\n  try {\n    return matches(el, selector);\n  } catch (e) {\n    user().error(TAG, 'Bad query selector.', selector, e);\n    return false;\n  }\n}\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {getMode} from '../../../src/mode';\n\n/** @typedef {{\n *    trigger: string,\n *    timestamp: null,\n *    extraUrlParams: ?JsonObject\n *  }} */\nexport let batchSegmentDef;\n\n/**\n * Please register your batch plugin function below.\n * Please keep the object in alphabetic order.\n * Note: extraUrlParams passed in are not encoded. Please make sure to proper\n * encode segments and make sure the final output url is valid.\n */\nexport const BatchingPluginFunctions = {\n  '_ping_': ping,\n};\n\n\n/**\n * Please add your batch plugin function below in alphabetic order. All batch\n * plugin function should accept input of a string, an array of batchSegment\n * Then return a string. Note: extraUrlParams passed in are not encoded. Please\n * make sure to proper encode segments and make sure the final output url is\n * valid.\n */\n\n// Below is a function prototype for easy copy\n// /**\n//  * @param {string} baseUrl\n//  * @param {Array<!batchSegmentDef>} batchSegments\n//  * @return {string}\n//  */\n// function ping(baseUrl, batchSegments) {}\n\n/**\n * @param {string} unusedBaseUrlForTesting\n * @param {Array<!batchSegmentDef>} unusedBatchSegmentsForTesting\n * @return {string}\n */\nfunction ping(unusedBaseUrlForTesting, unusedBatchSegmentsForTesting) {\n  if (getMode().localDev || getMode().test) {\n    return 'testFinalUrl';\n  }\n  throw new Error('batchPlugin _ping_ is for testing only');\n}\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ANALYTICS_CONFIG} from './vendors';\nimport {Services} from '../../../src/services';\nimport {assertHttpsUrl} from '../../../src/url';\nimport {dev, user} from '../../../src/log';\nimport {dict, hasOwn} from '../../../src/utils/object';\nimport {getMode} from '../../../src/mode';\nimport {isArray, isObject} from '../../../src/types';\nimport {isJsonScriptTag} from '../../../src/dom';\nimport {parseJson} from '../../../src/json';\nimport {toWin} from '../../../src/types';\n\nconst TAG = 'analytics-config';\n\nexport class AnalyticsConfig {\n\n  /**\n   * @param {!Element} element\n   */\n  constructor(element) {\n\n    /** @private {!Element} */\n    this.element_ = element;\n\n    /** @private {?Window} */\n    this.win_ = null;\n\n    /**\n     * @const {!JsonObject} Copied here for tests.\n     * @private\n     */\n    this.predefinedConfig_ = ANALYTICS_CONFIG;\n\n    /**\n     * @private {JsonObject}\n     */\n    this.config_ = dict();\n\n    /**\n     * @private {JsonObject}\n     */\n    this.remoteConfig_ = dict();\n\n    /** @private {boolean} */\n    this.isSandbox_ = false;\n  }\n\n  /**\n   * @return {!Promise<JsonObject>}\n   */\n  loadConfig() {\n    this.win_ = this.element_.ownerDocument.defaultView;\n    this.isSandbox_ = this.element_.hasAttribute('sandbox');\n\n    return this.fetchRemoteConfig_()\n        .then(this.processConfigs_.bind(this))\n        .then(() => this.config_);\n  }\n\n  /**\n   * Returns a promise that resolves when configuration is re-written if\n   * configRewriter is configured by a vendor.\n   *\n   * @private\n   * @return {!Promise<undefined>}\n   */\n  processConfigs_() {\n    const configRewriterUrl = this.getConfigRewriter_()['url'];\n\n    const config = dict({});\n    const inlineConfig = this.getInlineConfigNoInline();\n    this.validateTransport_(inlineConfig);\n    mergeObjects(inlineConfig, config);\n    mergeObjects(this.remoteConfig_, config);\n\n    if (!configRewriterUrl || this.isSandbox_) {\n      this.config_ = this.mergeConfigs_(config);\n      // use default configuration merge.\n      return Promise.resolve();\n    }\n\n    assertHttpsUrl(configRewriterUrl, this.element_);\n    const TAG = this.getName_();\n    dev().fine(TAG, 'Rewriting config', configRewriterUrl);\n\n    const fetchConfig = {\n      method: 'POST',\n      body: config,\n      requireAmpResponseSourceOrigin: false,\n    };\n    if (this.element_.hasAttribute('data-credentials')) {\n      fetchConfig.credentials = this.element_.getAttribute('data-credentials');\n    }\n    return Services.urlReplacementsForDoc(this.element_)\n        .expandUrlAsync(configRewriterUrl)\n        .then(expandedUrl => {\n          return Services.xhrFor(toWin(this.win_)).fetchJson(\n              expandedUrl, fetchConfig);\n        })\n        .then(res => res.json())\n        .then(jsonValue => {\n          this.config_ = this.mergeConfigs_(jsonValue);\n          dev().fine(TAG, 'Configuration re-written', configRewriterUrl);\n        }, err => {\n          user().error(TAG,\n              'Error rewriting configuration: ', configRewriterUrl, err);\n        });\n  }\n\n  /**\n   * Returns a promise that resolves when remote config is ready (or\n   * immediately if no remote config is specified.)\n   * @private\n   * @return {!Promise<undefined>}\n   */\n  fetchRemoteConfig_() {\n    let remoteConfigUrl = this.element_.getAttribute('config');\n    if (!remoteConfigUrl || this.isSandbox_) {\n      return Promise.resolve();\n    }\n    assertHttpsUrl(remoteConfigUrl, this.element_);\n    const TAG = this.getName_();\n    dev().fine(TAG, 'Fetching remote config', remoteConfigUrl);\n    const fetchConfig = {\n      requireAmpResponseSourceOrigin: false,\n    };\n    if (this.element_.hasAttribute('data-credentials')) {\n      fetchConfig.credentials = this.element_.getAttribute('data-credentials');\n    }\n    return Services.urlReplacementsForDoc(this.element_)\n        .expandUrlAsync(remoteConfigUrl)\n        .then(expandedUrl => {\n          remoteConfigUrl = expandedUrl;\n          return Services.xhrFor(toWin(this.win_)).fetchJson(\n              remoteConfigUrl, fetchConfig);\n        })\n        .then(res => res.json())\n        .then(jsonValue => {\n          this.remoteConfig_ = jsonValue;\n          dev().fine(TAG, 'Remote config loaded', remoteConfigUrl);\n        }, err => {\n          user().error(TAG,\n              'Error loading remote config: ', remoteConfigUrl, err);\n        });\n  }\n\n  /**\n   * Merges various sources of configs and stores them in a member variable.\n   *\n   * Order of precedence for configs from highest to lowest:\n   * - Remote config: specified through an attribute of the tag.\n   * - Inline config: specified insize the tag.\n   * - Predefined config: Defined as part of the platform.\n   * - Default config: Built-in config shared by all amp-analytics tags.\n   *\n   * @private\n   * @param {!JsonObject} rewrittenConfig\n   * @return {!JsonObject}\n   */\n  mergeConfigs_(rewrittenConfig) {\n    // Initialize config with analytics related vars.\n    const config = dict({\n      'vars': {\n        'requestCount': 0,\n      },\n    });\n    const defaultConfig = this.predefinedConfig_['default'] || {};\n    mergeObjects(expandConfigRequest(defaultConfig), config);\n    mergeObjects(expandConfigRequest(this.getTypeConfig_()), config,\n        /* predefined */ true);\n    mergeObjects(expandConfigRequest(rewrittenConfig), config);\n    return config;\n  }\n\n  /**\n   * Reads configRewriter from a vendor config.\n   * @return {!JsonObject}\n   */\n  getConfigRewriter_() {\n    return this.getTypeConfig_()['configRewriter'] || {};\n  }\n\n  /**\n   * Reads a vendor configuration.\n   * @return {!JsonObject}\n   */\n  getTypeConfig_() {\n    const type = this.element_.getAttribute('type');\n    return this.predefinedConfig_[type] || {};\n  }\n\n  /**\n   * @private\n   * @return {!JsonObject}\n   */\n  getInlineConfigNoInline() {\n    if (this.element_.CONFIG) {\n      // If the analytics element is created by runtime, return cached config.\n      return this.element_.CONFIG;\n    }\n    let inlineConfig = {};\n    const TAG = this.getName_();\n    try {\n      const {children} = this.element_;\n      if (children.length == 1) {\n        const child = children[0];\n        if (isJsonScriptTag(child)) {\n          inlineConfig = parseJson(children[0].textContent);\n        } else {\n          user().error(TAG, 'The analytics config should ' +\n              'be put in a <script> tag with type=\"application/json\"');\n        }\n      } else if (children.length > 1) {\n        user().error(TAG, 'The tag should contain only one' +\n            ' <script> child.');\n      }\n    }\n    catch (er) {\n      user().error(TAG, 'Analytics config could not be ' +\n          'parsed. Is it in a valid JSON format?', er);\n    }\n    return /** @type {!JsonObject} */ (inlineConfig);\n  }\n\n  /**\n   * Validates transport configuration.\n   * @param {!JsonObject} inlineConfig\n   */\n  validateTransport_(inlineConfig) {\n    const type = this.element_.getAttribute('type');\n    if (this.predefinedConfig_[type]) {\n      // TODO(zhouyx, #7096) Track overwrite percentage. Prevent transport\n      // overwriting\n      if (inlineConfig['transport'] || this.remoteConfig_['transport']) {\n        const TAG = this.getName_();\n        user().error(TAG, 'Inline or remote config should not ' +\n            'overwrite vendor transport settings');\n      }\n    }\n\n    // Do NOT allow inline or remote config to use 'transport: iframe'\n    if (inlineConfig['transport'] && inlineConfig['transport']['iframe']) {\n      user().error(TAG, 'Inline configs are not allowed to ' +\n          'specify transport iframe');\n      if (!getMode().localDev || getMode().test) {\n        inlineConfig['transport']['iframe'] = undefined;\n      }\n    }\n\n    if (this.remoteConfig_['transport'] &&\n        this.remoteConfig_['transport']['iframe']) {\n      user().error(TAG, 'Remote configs are not allowed to ' +\n          'specify transport iframe');\n      this.remoteConfig_['transport']['iframe'] = undefined;\n    }\n  }\n\n  /**\n   * @return {string} Returns a string to identify this tag. May not be unique\n   * if the element id is not unique.\n   * @private\n   */\n  getName_() {\n    return 'AmpAnalytics ' +\n        (this.element_.getAttribute('id') || '<unknown id>');\n  }\n}\n\n\n/**\n * Merges two objects. If the value is array or plain object, the values are\n * merged otherwise the value is overwritten.\n *\n * @param {Object|Array} from Object or array to merge from\n * @param {Object|Array} to Object or Array to merge into\n * @param {boolean=} opt_predefinedConfig\n */\nexport function mergeObjects(from, to, opt_predefinedConfig) {\n  if (to === null || to === undefined) {\n    to = {};\n  }\n\n  // Assert that optouts are allowed only in predefined configs.\n  // The last expression adds an exception of known, safe optout function\n  // that is already being used in the wild.\n  user().assert(opt_predefinedConfig\n      || !from || !from['optout']\n      || from['optout'] == '_gaUserPrefs.ioo',\n  'optout property is only available to vendor config.');\n\n  for (const property in from) {\n    user().assert(opt_predefinedConfig || property != 'iframePing',\n        'iframePing config is only available to vendor config.');\n    // Only deal with own properties.\n    if (hasOwn(from, property)) {\n      if (isArray(from[property])) {\n        if (!isArray(to[property])) {\n          to[property] = [];\n        }\n        to[property] = mergeObjects(from[property], to[property],\n            opt_predefinedConfig);\n      } else if (isObject(from[property])) {\n        if (!isObject(to[property])) {\n          to[property] = {};\n        }\n        to[property] = mergeObjects(from[property], to[property],\n            opt_predefinedConfig);\n      } else {\n        to[property] = from[property];\n      }\n    }\n  }\n  return to;\n}\n\n/**\n * Expand config's request to object\n * @param {!JsonObject} config\n * @visibleForTesting\n */\nexport function expandConfigRequest(config) {\n  if (!config['requests']) {\n    return config;\n  }\n  for (const k in config['requests']) {\n    if (hasOwn(config['requests'], k)) {\n      config['requests'][k] = expandRequestStr(config['requests'][k]);\n    }\n  }\n  return config;\n}\n\n/**\n * Expand single request to an object\n * @param {!JsonObject} request\n */\nfunction expandRequestStr(request) {\n  if (isObject(request)) {\n    return request;\n  }\n  return {\n    'baseUrl': request,\n  };\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {CommonSignals} from '../../../src/common-signals';\nimport {Observable} from '../../../src/observable';\nimport {\n  PlayingStates,\n  VideoAnalyticsDetailsDef,\n  VideoAnalyticsEvents,\n} from '../../../src/video-interface';\nimport {dev, user} from '../../../src/log';\nimport {getData} from '../../../src/event-helper';\nimport {getDataParamsFromAttributes} from '../../../src/dom';\nimport {hasOwn} from '../../../src/utils/object';\nimport {isEnumValue} from '../../../src/types';\nimport {startsWith} from '../../../src/string';\n\nconst MIN_TIMER_INTERVAL_SECONDS = 0.5;\nconst DEFAULT_MAX_TIMER_LENGTH_SECONDS = 7200;\nconst VARIABLE_DATA_ATTRIBUTE_KEY = /^vars(.+)/;\nconst NO_UNLISTEN = function() {};\nconst TAG = 'analytics-events';\n\n/**\n * Events that can result in analytics data to be sent.\n * @const\n * @enum {string}\n */\nexport const AnalyticsEventType = {\n  VISIBLE: 'visible',\n  CLICK: 'click',\n  TIMER: 'timer',\n  SCROLL: 'scroll',\n  HIDDEN: 'hidden',\n};\n\nconst ALLOWED_FOR_ALL_ROOT_TYPES = ['ampdoc', 'embed'];\n\n/**\n * Events that can result in analytics data to be sent.\n * @const {!Object<string, {\n *     name: string,\n *     allowedFor: !Array<string>,\n *     klass: function(new:./events.EventTracker)\n *   }>}\n */\nconst TRACKER_TYPE = Object.freeze({\n  'click': {\n    name: 'click',\n    allowedFor: ALLOWED_FOR_ALL_ROOT_TYPES.concat(['timer']),\n    // Escape the temporal dead zone by not referencing a class directly.\n    klass: function(root) { return new ClickEventTracker(root); },\n  },\n  'custom': {\n    name: 'custom',\n    allowedFor: ALLOWED_FOR_ALL_ROOT_TYPES.concat(['timer']),\n    klass: function(root) { return new CustomEventTracker(root); },\n  },\n  'render-start': {\n    name: 'render-start',\n    allowedFor: ALLOWED_FOR_ALL_ROOT_TYPES.concat(['timer', 'visible']),\n    klass: function(root) { return new SignalTracker(root); },\n  },\n  'ini-load': {\n    name: 'ini-load',\n    allowedFor: ALLOWED_FOR_ALL_ROOT_TYPES.concat(['timer', 'visible']),\n    klass: function(root) { return new IniLoadTracker(root); },\n  },\n  'timer': {\n    name: 'timer',\n    allowedFor: ALLOWED_FOR_ALL_ROOT_TYPES,\n    klass: function(root) { return new TimerEventTracker(root); },\n  },\n  'visible': {\n    name: 'visible',\n    allowedFor: ALLOWED_FOR_ALL_ROOT_TYPES.concat(['timer']),\n    klass: function(root) { return new VisibilityTracker(root); },\n  },\n  'hidden': {\n    name: 'visible', // Reuse tracker with visibility\n    allowedFor: ALLOWED_FOR_ALL_ROOT_TYPES.concat(['timer']),\n    klass: function(root) { return new VisibilityTracker(root); },\n  },\n  'video': {\n    name: 'video',\n    allowedFor: ALLOWED_FOR_ALL_ROOT_TYPES.concat(['timer']),\n    klass: function(root) { return new VideoEventTracker(root); },\n  },\n});\n\n/**\n * @param {string} triggerType\n * @return {boolean}\n */\nfunction isVideoTriggerType(triggerType) {\n  return startsWith(triggerType, 'video');\n}\n\n/**\n * @param {string} triggerType\n * @return {boolean}\n */\nfunction isReservedTriggerType(triggerType) {\n  return !!TRACKER_TYPE[triggerType] ||\n      isEnumValue(AnalyticsEventType, triggerType);\n}\n\n/**\n * @param {string} eventType\n * @return {string}\n */\nexport function getTrackerKeyName(eventType) {\n  if (isVideoTriggerType(eventType)) {\n    return 'video';\n  }\n  if (!isReservedTriggerType(eventType)) {\n    return 'custom';\n  }\n  return hasOwn(TRACKER_TYPE, eventType) ?\n    TRACKER_TYPE[eventType].name : eventType;\n}\n\n/**\n * @param {string} parentType\n * @return {!Object<string, function(new:EventTracker)>}\n */\nexport function getTrackerTypesForParentType(parentType) {\n  const filtered = {};\n  Object.keys(TRACKER_TYPE).forEach(key => {\n    if (hasOwn(TRACKER_TYPE, key) &&\n        TRACKER_TYPE[key].allowedFor.indexOf(parentType) != -1) {\n      filtered[key] = TRACKER_TYPE[key].klass;\n    }\n  }, this);\n  return filtered;\n}\n\n/**\n * @interface\n */\nclass SignalTrackerDef {\n  /**\n   * @param {string} unusedEventType\n   * @return {!Promise}\n   */\n  getRootSignal(unusedEventType) {}\n\n  /**\n   * @param {string} unusedEventType\n   * @param {!Element} unusedElement\n   * @return {!Promise}\n   */\n  getElementSignal(unusedEventType, unusedElement) {}\n}\n\n/**\n * The analytics event.\n */\nexport class AnalyticsEvent {\n  /**\n   * @param {!Element} target The most relevant target element.\n   * @param {string} type The type of event.\n   * @param {!Object<string, string>=} opt_vars A map of vars and their values.\n   */\n  constructor(target, type, opt_vars) {\n    /** @const */\n    this.target = target;\n    /** @const */\n    this.type = type;\n    /** @const */\n    this.vars = opt_vars || Object.create(null);\n  }\n}\n\n\n/**\n * The base class for all trackers. A tracker tracks all events of the same\n * type for a single analytics root.\n *\n * @implements {../../../src/service.Disposable}\n * @abstract\n * @visibleForTesting\n */\nexport class EventTracker {\n  /**\n   * @param {!./analytics-root.AnalyticsRoot} root\n   */\n  constructor(root) {\n    /** @const */\n    this.root = root;\n  }\n\n  /** @override @abstract */\n  dispose() {}\n\n  /**\n   * @param {!Element} unusedContext\n   * @param {string} unusedEventType\n   * @param {!JsonObject} unusedConfig\n   * @param {function(!AnalyticsEvent)} unusedListener\n   * @return {!UnlistenDef}\n   * @abstract\n   */\n  add(unusedContext, unusedEventType, unusedConfig, unusedListener) {}\n}\n\n\n/**\n * Tracks custom events.\n */\nexport class CustomEventTracker extends EventTracker {\n  /**\n   * @param {!./analytics-root.AnalyticsRoot} root\n   */\n  constructor(root) {\n    super(root);\n\n    /** @const @private {!Object<string, !Observable<!AnalyticsEvent>>} */\n    this.observables_ = {};\n\n    /**\n     * Early events have to be buffered because there's no way to predict\n     * how fast all `amp-analytics` elements will be instrumented.\n     * @private {!Object<string, !Array<!AnalyticsEvent>>|undefined}\n     */\n    this.buffer_ = {};\n\n    /**\n     * Sandbox events get their own buffer, because handler to those events will\n     * be added after parent element's layout. (Time varies, can be later than\n     * 10s) sandbox events buffer will never expire but will cleared when\n     * handler is ready.\n     * @private {!Object<string, !Array<!AnalyticsEvent>|undefined>|undefined}\n     */\n    this.sandboxBuffer_ = {};\n\n    // Stop buffering of custom events after 10 seconds. Assumption is that all\n    // `amp-analytics` elements will have been instrumented by this time.\n    setTimeout(() => {\n      this.buffer_ = undefined;\n    }, 10000);\n  }\n\n  /** @override */\n  dispose() {\n    this.buffer_ = undefined;\n    this.sandboxBuffer_ = undefined;\n    for (const k in this.observables_) {\n      this.observables_[k].removeAll();\n    }\n  }\n\n  /** @override */\n  add(context, eventType, config, listener) {\n    let selector = config['selector'];\n    if (!selector) {\n      selector = ':root';\n    }\n    const selectionMethod = config['selectionMethod'] || null;\n\n    const targetReady =\n        this.root.getElement(context, selector, selectionMethod);\n\n    const isSandboxEvent = startsWith(eventType, 'sandbox-');\n\n    // Push recent events if any.\n    const buffer = isSandboxEvent ?\n      this.sandboxBuffer_ && this.sandboxBuffer_[eventType] :\n      this.buffer_ && this.buffer_[eventType];\n\n    if (buffer) {\n      const bufferLength = buffer.length;\n      targetReady.then(target => {\n        setTimeout(() => {\n          for (let i = 0; i < bufferLength; i++) {\n            const event = buffer[i];\n            if (target.contains(event.target)) {\n              listener(event);\n            }\n          }\n          if (isSandboxEvent) {\n            // We assume sandbox event will only has single listener.\n            // It is safe to clear buffer once handler is ready.\n            this.sandboxBuffer_[eventType] = undefined;\n          }\n        }, 1);\n      });\n    }\n\n    let observables = this.observables_[eventType];\n    if (!observables) {\n      observables = new Observable();\n      this.observables_[eventType] = observables;\n    }\n\n    return this.observables_[eventType].add(event => {\n      // Wait for target selected\n      targetReady.then(target => {\n        if (target.contains(event.target)) {\n          listener(event);\n        }\n      });\n    });\n  }\n\n  /**\n   * Triggers a custom event for the associated root.\n   * @param {!AnalyticsEvent} event\n   */\n  trigger(event) {\n    const eventType = event.type;\n    const isSandboxEvent = startsWith(eventType, 'sandbox-');\n    const observables = this.observables_[eventType];\n\n    // If listeners already present - trigger right away.\n    if (observables) {\n      observables.fire(event);\n      if (isSandboxEvent) {\n        // No need to buffer sandbox event if handler ready\n        return;\n      }\n    }\n\n    // Create buffer and enqueue buffer if needed\n    if (isSandboxEvent) {\n      this.sandboxBuffer_[eventType] = this.sandboxBuffer_[eventType] || [];\n      this.sandboxBuffer_[eventType].push(event);\n    } else {\n      // Check if buffer has expired\n      if (this.buffer_) {\n        this.buffer_[eventType] = this.buffer_[eventType] || [];\n        this.buffer_[eventType].push(event);\n      }\n    }\n  }\n}\n\n\n/**\n * Tracks click events.\n */\nexport class ClickEventTracker extends EventTracker {\n  /**\n   * @param {!./analytics-root.AnalyticsRoot} root\n   */\n  constructor(root) {\n    super(root);\n\n    /** @private {!Observable<!Event>} */\n    this.clickObservable_ = new Observable();\n\n    /** @private @const {function(!Event)} */\n    this.boundOnClick_ = this.clickObservable_.fire.bind(this.clickObservable_);\n    this.root.getRoot().addEventListener('click', this.boundOnClick_);\n  }\n\n  /** @override */\n  dispose() {\n    this.root.getRoot().removeEventListener('click', this.boundOnClick_);\n    this.clickObservable_.removeAll();\n  }\n\n  /** @override */\n  add(context, eventType, config, listener) {\n    const selector = user().assert(config['selector'],\n        'Missing required selector on click trigger');\n    const selectionMethod = config['selectionMethod'] || null;\n    return this.clickObservable_.add(this.root.createSelectiveListener(\n        this.handleClick_.bind(this, listener),\n        (context.parentElement || context),\n        selector,\n        selectionMethod));\n  }\n\n  /**\n   * @param {function(!AnalyticsEvent)} listener\n   * @param {!Element} target\n   * @param {!Event} unusedEvent\n   * @private\n   */\n  handleClick_(listener, target, unusedEvent) {\n    const params = getDataParamsFromAttributes(\n        target,\n        /* computeParamNameFunc */ undefined,\n        VARIABLE_DATA_ATTRIBUTE_KEY);\n    listener(new AnalyticsEvent(target, 'click', params));\n  }\n}\n\n\n/**\n * Tracks events based on signals.\n * @implements {SignalTrackerDef}\n */\nexport class SignalTracker extends EventTracker {\n  /**\n   * @param {!./analytics-root.AnalyticsRoot} root\n   */\n  constructor(root) {\n    super(root);\n  }\n\n  /** @override */\n  dispose() {\n  }\n\n  /** @override */\n  add(context, eventType, config, listener) {\n    let target;\n    let signalsPromise;\n    const selector = config['selector'] || ':root';\n    if (selector == ':root' || selector == ':host') {\n      // Root selectors are delegated to analytics roots.\n      target = this.root.getRootElement();\n      signalsPromise = this.getRootSignal(eventType);\n    } else {\n      // Look for the AMP-element. Wait for DOM to be fully parsed to avoid\n      // false missed searches.\n      const selectionMethod = config['selectionMethod'];\n      signalsPromise = this.root.getAmpElement(\n          (context.parentElement || context),\n          selector,\n          selectionMethod\n      ).then(element => {\n        target = element;\n        return this.getElementSignal(eventType, target);\n      });\n    }\n\n    // Wait for the target and the event signal.\n    signalsPromise.then(() => {\n      listener(new AnalyticsEvent(target, eventType));\n    });\n    return NO_UNLISTEN;\n  }\n\n  /** @override */\n  getRootSignal(eventType) {\n    return this.root.signals().whenSignal(eventType);\n  }\n\n  /** @override */\n  getElementSignal(eventType, element) {\n    if (typeof element.signals != 'function') {\n      return Promise.resolve();\n    }\n    return element.signals().whenSignal(eventType);\n  }\n}\n\n/**\n * Tracks when the elements in the first viewport has been loaded - \"ini-load\".\n * @implements {SignalTrackerDef}\n */\nexport class IniLoadTracker extends EventTracker {\n  /**\n   * @param {!./analytics-root.AnalyticsRoot} root\n   */\n  constructor(root) {\n    super(root);\n  }\n\n  /** @override */\n  dispose() {\n  }\n\n  /** @override */\n  add(context, eventType, config, listener) {\n    let target;\n    let promise;\n    const selector = config['selector'] || ':root';\n    if (selector == ':root' || selector == ':host') {\n      // Root selectors are delegated to analytics roots.\n      target = this.root.getRootElement();\n      promise = this.getRootSignal();\n    } else {\n      // An AMP-element. Wait for DOM to be fully parsed to avoid\n      // false missed searches.\n      const selectionMethod = config['selectionMethod'];\n      promise = this.root.getAmpElement(\n          (context.parentElement || context),\n          selector,\n          selectionMethod\n      ).then(element => {\n        target = element;\n        return this.getElementSignal('ini-load', target);\n      });\n    }\n    // Wait for the target and the event.\n    promise.then(() => {\n      listener(new AnalyticsEvent(target, eventType));\n    });\n    return NO_UNLISTEN;\n  }\n\n  /** @override */\n  getRootSignal() {\n    return this.root.whenIniLoaded();\n  }\n\n  /** @override */\n  getElementSignal(unusedEventType, element) {\n    if (typeof element.signals != 'function') {\n      return Promise.resolve();\n    }\n    const signals = element.signals();\n    return Promise.race([\n      signals.whenSignal(CommonSignals.INI_LOAD),\n      signals.whenSignal(CommonSignals.LOAD_END),\n    ]);\n  }\n}\n\n\n/**\n * Timer event handler.\n */\nclass TimerEventHandler {\n  /**\n   * @param {JsonObject} timerSpec The timer specification.\n   * @param {function(): UnlistenDef=} opt_startBuilder Factory for building\n   *     start trackers for this timer.\n   * @param {function(): UnlistenDef=} opt_stopBuilder Factory for building stop\n   *     trackers for this timer.\n   */\n  constructor(timerSpec, opt_startBuilder, opt_stopBuilder) {\n    /** @private {number|undefined} */\n    this.intervalId_ = undefined;\n\n    user().assert('interval' in timerSpec,\n        'Timer interval specification required');\n    /** @private @const {number} */\n    this.intervalLength_ = Number(timerSpec['interval']) || 0;\n    user().assert(this.intervalLength_ >= MIN_TIMER_INTERVAL_SECONDS,\n        'Bad timer interval specification');\n\n    /** @private @const {number} */\n    this.maxTimerLength_ = 'maxTimerLength' in timerSpec ?\n      Number(timerSpec['maxTimerLength']) : DEFAULT_MAX_TIMER_LENGTH_SECONDS;\n    user().assert(this.maxTimerLength_ > 0, 'Bad maxTimerLength specification');\n\n    /** @private @const {boolean} */\n    this.maxTimerInSpec_ = 'maxTimerLength' in timerSpec;\n\n    /** @private @const {boolean} */\n    this.callImmediate_ = 'immediate' in timerSpec ?\n      Boolean(timerSpec['immediate']) : true;\n\n    /** @private {?function()} */\n    this.intervalCallback_ = null;\n\n    /** @private {?UnlistenDef} */\n    this.unlistenStart_ = null;\n\n    /** @private {?UnlistenDef} */\n    this.unlistenStop_ = null;\n\n    /** @private @const {?function(): UnlistenDef} */\n    this.startBuilder_ = opt_startBuilder || null;\n\n    /** @private @const {?function(): UnlistenDef} */\n    this.stopBuilder_ = opt_stopBuilder || null;\n\n    /** @private {number|undefined} */\n    this.startTime_ = undefined; // milliseconds\n\n    /** @private {number|undefined} */\n    this.lastRequestTime_ = undefined; // milliseconds\n  }\n\n  /**\n   * @param {function()} startTimer\n   */\n  init(startTimer) {\n    if (!this.startBuilder_) {\n      // Timer starts on load.\n      startTimer();\n    } else {\n      // Timer starts on event.\n      this.listenForStart_();\n    }\n  }\n\n  /**\n   * Unlistens for start and stop.\n   */\n  dispose() {\n    this.unlistenForStop_();\n    this.unlistenForStart_();\n  }\n\n  /** @private */\n  listenForStart_() {\n    if (this.startBuilder_) {\n      this.unlistenStart_ = this.startBuilder_();\n    }\n  }\n\n  /** @private */\n  unlistenForStart_() {\n    if (this.unlistenStart_) {\n      this.unlistenStart_();\n      this.unlistenStart_ = null;\n    }\n  }\n\n  /** @private */\n  listenForStop_() {\n    if (this.stopBuilder_) {\n      try {\n        this.unlistenStop_ = this.stopBuilder_();\n      } catch (e) {\n        this.dispose(); // Stop timer and then throw error.\n        throw e;\n      }\n    }\n  }\n\n  /** @private */\n  unlistenForStop_() {\n    if (this.unlistenStop_) {\n      this.unlistenStop_();\n      this.unlistenStop_ = null;\n    }\n  }\n\n  /** @return {boolean} */\n  isRunning() {\n    return !!this.intervalId_;\n  }\n\n  /**\n   * @param {!Window} win\n   * @param {function()} timerCallback\n   * @param {function()} timeoutCallback\n   */\n  startIntervalInWindow(win, timerCallback, timeoutCallback) {\n    if (this.isRunning()) {\n      return;\n    }\n    this.startTime_ = Date.now();\n    this.lastRequestTime_ = undefined;\n    this.intervalCallback_ = timerCallback;\n    this.intervalId_ = win.setInterval(() => {\n      timerCallback();\n    }, this.intervalLength_ * 1000);\n\n    // If there's no way to turn off the timer, cap it.\n    if (!this.stopBuilder_ || (this.stopBuilder_ && this.maxTimerInSpec_)) {\n      win.setTimeout(() => {\n        timeoutCallback();\n      }, this.maxTimerLength_ * 1000);\n    }\n\n    this.unlistenForStart_();\n    if (this.callImmediate_) {\n      timerCallback();\n    }\n    this.listenForStop_();\n  }\n\n  /**\n   * @param {!Window} win\n   * @restricted\n   */\n  stopTimer_(win) {\n    if (!this.isRunning()) {\n      return;\n    }\n    this.intervalCallback_();\n    this.intervalCallback_ = null;\n    win.clearInterval(this.intervalId_);\n    this.intervalId_ = undefined;\n    this.lastRequestTime_ = undefined;\n    this.unlistenForStop_();\n    this.listenForStart_();\n  }\n\n  /** @private @return {number} */\n  calculateDuration_() {\n    if (this.startTime_) {\n      return Date.now() - (this.lastRequestTime_ || this.startTime_);\n    }\n    return 0;\n  }\n\n  /** @return {{timerDuration: number, timerStart: number}} */\n  getTimerVars() {\n    let timerDuration = 0;\n    if (this.isRunning()) {\n      timerDuration = this.calculateDuration_();\n      this.lastRequestTime_ = Date.now();\n    }\n    return {\n      'timerDuration': timerDuration,\n      'timerStart': this.startTime_ || 0,\n    };\n  }\n}\n\n\n/**\n * Tracks timer events.\n */\nexport class TimerEventTracker extends EventTracker {\n  /**\n   * @param {!./analytics-root.AnalyticsRoot} root\n   */\n  constructor(root) {\n    super(root);\n    /** @const @private {!Object<number, TimerEventHandler>} */\n    this.trackers_ = {};\n\n    /** @private {number} */\n    this.timerIdSequence_ = 1;\n  }\n\n  /**\n   * @return {!Array<number>}\n   * @visibleForTesting\n   */\n  getTrackedTimerKeys() {\n    return /** @type {!Array<number>} */ (Object.keys(this.trackers_));\n  }\n\n  /** @override */\n  dispose() {\n    this.getTrackedTimerKeys().forEach(timerId => {\n      this.removeTracker_(timerId);\n    });\n  }\n\n  /** @override */\n  add(context, eventType, config, listener) {\n    const timerSpec = config['timerSpec'];\n    user().assert(timerSpec && typeof timerSpec == 'object',\n        'Bad timer specification');\n    const timerStart = 'startSpec' in timerSpec ? timerSpec['startSpec'] : null;\n    user().assert(!timerStart || typeof timerStart == 'object',\n        'Bad timer start specification');\n    const timerStop = 'stopSpec' in timerSpec ? timerSpec['stopSpec'] : null;\n    user().assert((!timerStart && !timerStop) || typeof timerStop == 'object',\n        'Bad timer stop specification');\n\n    const timerId = this.generateTimerId_();\n    let startBuilder;\n    let stopBuilder;\n    if (timerStart) {\n      const startTracker = this.getTracker_(timerStart);\n      user().assert(startTracker, 'Cannot track timer start');\n      startBuilder = startTracker.add.bind(startTracker, context,\n          timerStart['on'], timerStart,\n          this.handleTimerToggle_.bind(this, timerId, eventType, listener));\n    }\n    if (timerStop) {\n      const stopTracker = this.getTracker_(timerStop);\n      user().assert(stopTracker, 'Cannot track timer stop');\n      stopBuilder = stopTracker.add.bind(stopTracker, context,\n          timerStop['on'], timerStop,\n          this.handleTimerToggle_.bind(this, timerId, eventType, listener));\n    }\n\n    const timerHandler = new TimerEventHandler(\n        timerSpec, startBuilder, stopBuilder);\n    this.trackers_[timerId] = timerHandler;\n\n    timerHandler.init(\n        this.startTimer_.bind(this, timerId, eventType, listener));\n    return () => {\n      this.removeTracker_(timerId);\n    };\n  }\n\n  /**\n   * @return {number}\n   * @private\n   */\n  generateTimerId_() {\n    return ++this.timerIdSequence_;\n  }\n\n  /**\n   * @param {!JsonObject} config\n   * @return {?EventTracker}\n   * @private\n   */\n  getTracker_(config) {\n    const eventType = user().assertString(config['on']);\n    const trackerKey = getTrackerKeyName(eventType);\n\n    return this.root.getTrackerForWhitelist(\n        trackerKey, getTrackerTypesForParentType('timer'));\n  }\n\n  /**\n   * Toggles which listeners are active depending on timer state, so no race\n   * conditions can occur in the case where the timer starts and stops on the\n   * same event type from the same target.\n   * @param {number} timerId\n   * @param {string} eventType\n   * @param {function(!AnalyticsEvent)} listener\n   * @private\n   */\n  handleTimerToggle_(timerId, eventType, listener) {\n    const timerHandler = this.trackers_[timerId];\n    if (!timerHandler) {\n      return;\n    }\n    if (timerHandler.isRunning()) {\n      this.stopTimer_(timerId);\n    } else {\n      this.startTimer_(timerId, eventType, listener);\n    }\n  }\n\n  /**\n   * @param {number} timerId\n   * @param {string} eventType\n   * @param {function(!AnalyticsEvent)} listener\n   * @private\n   */\n  startTimer_(timerId, eventType, listener) {\n    const timerHandler = this.trackers_[timerId];\n    const timerCallback = () => {\n      listener(this.createEvent_(timerId, eventType));\n    };\n    timerHandler.startIntervalInWindow(this.root.ampdoc.win, timerCallback,\n        this.removeTracker_.bind(this, timerId));\n  }\n\n  /**\n   * @param {number} timerId\n   * @private\n   */\n  stopTimer_(timerId) {\n    this.trackers_[timerId].stopTimer_(this.root.ampdoc.win);\n  }\n\n  /**\n   * @param {number} timerId\n   * @param {string} eventType\n   * @return {!AnalyticsEvent}\n   * @private\n   */\n  createEvent_(timerId, eventType) {\n    return new AnalyticsEvent(this.root.getRootElement(), eventType,\n        this.trackers_[timerId].getTimerVars());\n  }\n\n  /**\n   * @param {number} timerId\n   * @private\n   */\n  removeTracker_(timerId) {\n    if (this.trackers_[timerId]) {\n      this.stopTimer_(timerId);\n      this.trackers_[timerId].dispose();\n      delete this.trackers_[timerId];\n    }\n  }\n}\n\n\n/**\n * Tracks video session events\n */\nexport class VideoEventTracker extends EventTracker {\n  /**\n   * @param {!./analytics-root.AnalyticsRoot} root\n   */\n  constructor(root) {\n    super(root);\n\n    /** @private {?Observable<!Event>} */\n    this.sessionObservable_ = new Observable();\n\n    /** @private {?function(!Event)} */\n    this.boundOnSession_ =\n        this.sessionObservable_.fire.bind(this.sessionObservable_);\n\n    Object.keys(VideoAnalyticsEvents).forEach(key => {\n      this.root.getRoot().addEventListener(\n          VideoAnalyticsEvents[key], this.boundOnSession_);\n    });\n  }\n\n  /** @override */\n  dispose() {\n    const root = this.root.getRoot();\n    Object.keys(VideoAnalyticsEvents).forEach(key => {\n      root.removeEventListener(VideoAnalyticsEvents[key], this.boundOnSession_);\n    });\n    this.boundOnSession_ = null;\n    this.sessionObservable_ = null;\n  }\n\n  /** @override */\n  add(context, eventType, config, listener) {\n    const videoSpec = config['videoSpec'] || {};\n    const selector = config['selector'] || videoSpec['selector'];\n    const selectionMethod = config['selectionMethod'] || null;\n    const targetReady =\n        this.root.getElement(context, selector, selectionMethod);\n\n    const endSessionWhenInvisible = videoSpec['end-session-when-invisible'];\n    const excludeAutoplay = videoSpec['exclude-autoplay'];\n    const interval = videoSpec['interval'];\n    const on = config['on'];\n\n    let intervalCounter = 0;\n\n    return this.sessionObservable_.add(event => {\n      const {type} = event;\n      const isVisibleType = (type === VideoAnalyticsEvents.SESSION_VISIBLE);\n      const normalizedType =\n          isVisibleType ? VideoAnalyticsEvents.SESSION : type;\n      const details = /** @type {!VideoAnalyticsDetailsDef} */ (getData(event));\n\n      if (normalizedType !== on) {\n        return;\n      }\n\n      if (normalizedType === VideoAnalyticsEvents.SECONDS_PLAYED && !interval) {\n        user().error(TAG, 'video-seconds-played requires interval spec ' +\n            'with non-zero value');\n        return;\n      }\n\n      if (normalizedType === VideoAnalyticsEvents.SECONDS_PLAYED) {\n        intervalCounter++;\n        if (intervalCounter % interval !== 0) {\n          return;\n        }\n      }\n\n      if (isVisibleType && !endSessionWhenInvisible) {\n        return;\n      }\n\n      if (excludeAutoplay && details['state'] === PlayingStates.PLAYING_AUTO) {\n        return;\n      }\n\n      const el = dev().assertElement(event.target,\n          'No target specified by video session event.');\n      targetReady.then(target => {\n        if (target.contains(el)) {\n          listener(new AnalyticsEvent(target, normalizedType, details));\n        }\n      });\n    });\n  }\n}\n\n\n/**\n * Tracks visibility events.\n */\nexport class VisibilityTracker extends EventTracker {\n  /**\n   * @param {!./analytics-root.AnalyticsRoot} root\n   */\n  constructor(root) {\n    super(root);\n\n    /** @private */\n    this.waitForTrackers_ = {};\n  }\n\n  /** @override */\n  dispose() {\n  }\n\n  /** @override */\n  add(context, eventType, config, listener) {\n    const visibilitySpec = config['visibilitySpec'] || {};\n    const selector = config['selector'] || visibilitySpec['selector'];\n    const waitForSpec = visibilitySpec['waitFor'];\n    const visibilityManager = this.root.getVisibilityManager();\n    // special polyfill for eventType: 'hidden'\n    let createReadyReportPromiseFunc = null;\n    if (eventType == 'hidden') {\n      createReadyReportPromiseFunc = this.createReportReadyPromise_.bind(this);\n    }\n\n    // Root selectors are delegated to analytics roots.\n    if (!selector || selector == ':root' || selector == ':host') {\n      // When `selector` is specified, we always use \"ini-load\" signal as\n      // a \"ready\" signal.\n      return visibilityManager.listenRoot(\n          visibilitySpec,\n          this.getReadyPromise(waitForSpec, selector),\n          createReadyReportPromiseFunc,\n          this.onEvent_.bind(\n              this, eventType, listener, this.root.getRootElement()));\n    }\n\n    // An AMP-element. Wait for DOM to be fully parsed to avoid\n    // false missed searches.\n    const selectionMethod = config['selectionMethod'] ||\n          visibilitySpec['selectionMethod'];\n    const unlistenPromise = this.root.getAmpElement(\n        (context.parentElement || context),\n        selector,\n        selectionMethod\n    ).then(element => {\n      return visibilityManager.listenElement(\n          element,\n          visibilitySpec,\n          this.getReadyPromise(waitForSpec, selector, element),\n          createReadyReportPromiseFunc,\n          this.onEvent_.bind(this, eventType, listener, element));\n    });\n    return function() {\n      unlistenPromise.then(unlisten => {\n        unlisten();\n      });\n    };\n  }\n\n  /**\n   * @return {!Promise}\n   */\n  createReportReadyPromise_() {\n    const viewer = this.root.getViewer();\n\n    if (!viewer.isVisible()) {\n      return Promise.resolve();\n    }\n\n    return new Promise(resolve => {\n      viewer.onVisibilityChanged(() => {\n        if (!viewer.isVisible()) {\n          resolve();\n        }\n      });\n    });\n  }\n\n  /**\n   * @param {string|undefined} waitForSpec\n   * @param {string|undefined} selector\n   * @param {Element=} opt_element\n   * @return {?Promise}\n   * @visibleForTesting\n   */\n  getReadyPromise(waitForSpec, selector, opt_element) {\n    if (!waitForSpec) {\n      // Default case:\n      if (!selector) {\n        // waitFor selector is not defined, wait for nothing\n        return null;\n      } else {\n        // otherwise wait for ini-load by default\n        waitForSpec = 'ini-load';\n      }\n    }\n\n    const trackerWhitelist = getTrackerTypesForParentType('visible');\n    user().assert(waitForSpec == 'none' ||\n        trackerWhitelist[waitForSpec] !== undefined,\n    'waitFor value %s not supported', waitForSpec);\n\n    const waitForTracker = this.waitForTrackers_[waitForSpec] ||\n        this.root.getTrackerForWhitelist(waitForSpec, trackerWhitelist);\n    if (waitForTracker) {\n      this.waitForTrackers_[waitForSpec] = waitForTracker;\n    } else {\n      return null;\n    }\n\n    // Wait for root signal if there's no element selected.\n    return opt_element ?\n      waitForTracker.getElementSignal(waitForSpec, opt_element)\n      : waitForTracker.getRootSignal(waitForSpec);\n  }\n\n  /**\n   * @param {string} eventType\n   * @param {function(!AnalyticsEvent)} listener\n   * @param {!Element} target\n   * @param {!Object<string, *>} state\n   * @private\n   */\n  onEvent_(eventType, listener, target, state) {\n    const attr = getDataParamsFromAttributes(\n        target,\n        /* computeParamNameFunc */ undefined,\n        VARIABLE_DATA_ATTRIBUTE_KEY);\n    for (const key in attr) {\n      state[key] = attr[key];\n    }\n    listener(new AnalyticsEvent(target, eventType, state));\n  }\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {MessageType} from '../../../src/3p-frame-messaging';\nimport {SubscriptionApi} from '../../../src/iframe-helper';\nimport {dev} from '../../../src/log';\n\n/** @private @const {string} */\nconst TAG_ = 'amp-analytics.IframeTransportMessageQueue';\n\n/** @private @const {number} */\nconst MAX_QUEUE_SIZE_ = 100;\n\n/**\n * @visibleForTesting\n */\nexport class IframeTransportMessageQueue {\n  /**\n   * Constructor\n   * @param {!Window} win The window element\n   * @param {!HTMLIFrameElement} frame The cross-domain iframe to send\n   * messages to\n   */\n  constructor(win, frame) {\n\n    /** @private {!HTMLIFrameElement} */\n    this.frame_ = frame;\n\n    /** @private {boolean} */\n    this.isReady_ = false;\n\n    /**\n     * @private\n     * {!Array<!../../../src/3p-frame-messaging.IframeTransportEvent>}\n     */\n    this.pendingEvents_ = [];\n\n    /** @private {!../../../src/iframe-helper.SubscriptionApi} */\n    this.postMessageApi_ = new SubscriptionApi(this.frame_,\n        MessageType.SEND_IFRAME_TRANSPORT_EVENTS,\n        true,\n        () => {\n          this.setIsReady();\n        });\n  }\n\n  /**\n   * Returns whether the queue has been marked as ready yet\n   * @return {boolean}\n   * @visibleForTesting\n   */\n  isReady() {\n    return this.isReady_;\n  }\n\n  /**\n   * Indicate that a cross-domain frame is ready to receive messages, and\n   * send all messages that were previously queued for it.\n   * @visibleForTesting\n   */\n  setIsReady() {\n    this.isReady_ = true;\n    this.flushQueue_();\n  }\n\n  /**\n   * Returns how many creativeId -> message(s) mappings there are\n   * @return {number}\n   * @visibleForTesting\n   */\n  queueSize() {\n    return this.pendingEvents_.length;\n  }\n\n  /**\n   * Enqueues an event to be sent to a cross-domain iframe.\n   * @param {!../../../src/3p-frame-messaging.IframeTransportEvent} event\n   * Identifies the event and which Transport instance (essentially which\n   * creative) is sending it.\n   */\n  enqueue(event) {\n    dev().assert(event && event.creativeId && event.message,\n        'Attempted to enqueue malformed message for: ' +\n        event.creativeId);\n    this.pendingEvents_.push(event);\n    if (this.queueSize() >= MAX_QUEUE_SIZE_) {\n      dev().warn(TAG_, 'Exceeded maximum size of queue for: ' +\n          event.creativeId);\n      this.pendingEvents_.shift();\n    }\n    this.flushQueue_();\n  }\n\n  /**\n   * Send queued data (if there is any) to a cross-domain iframe\n   * @private\n   */\n  flushQueue_() {\n    if (this.isReady() && this.queueSize()) {\n      this.postMessageApi_.send(MessageType.IFRAME_TRANSPORT_EVENTS,\n          /** @type {!JsonObject} */\n          ({events: this.pendingEvents_}));\n      this.pendingEvents_ = [];\n    }\n  }\n}\n\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Vendors who have IAB viewability certification may use iframe transport\n * (see ../amp-analytics.md and ../integrating-analytics.md). In this case,\n * put only the specification of the iframe location in the object below.\n *\n * This object is separated from vendors.js to be shared with extensions\n * other than amp-analytics, for instance amp-ad-exit.\n *\n * @const {!JsonObject}\n */\nexport const IFRAME_TRANSPORTS = /** @type {!JsonObject} */ ({\n  'bg': 'https://tpc.googlesyndication.com/b4a/b4a-runner.html',\n  'moat': 'https://js.moatads.com/ampanalytics093284/iframe.html',\n});\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {IframeTransportMessageQueue} from './iframe-transport-message-queue';\nimport {createElementWithAttributes} from '../../../src/dom';\nimport {dev, user} from '../../../src/log';\nimport {getMode} from '../../../src/mode';\nimport {hasOwn} from '../../../src/utils/object';\nimport {isLongTaskApiSupported} from '../../../src/service/jank-meter';\nimport {setStyles} from '../../../src/style';\nimport {urls} from '../../../src/config';\n\n/** @private @const {string} */\nconst TAG_ = 'amp-analytics.IframeTransport';\n\n/** @private @const {number} */\nconst LONG_TASK_REPORTING_THRESHOLD = 5;\n\n/** @typedef {{\n *    frame: Element,\n *    sentinel: string,\n *    usageCount: number,\n *    queue: IframeTransportMessageQueue,\n *  }} */\nexport let FrameData;\n\n/**\n * Get the URL of the client lib\n * @param {!Window} ampWin The window object of the AMP document\n * @param {boolean=} opt_forceProdUrl If true, prod URL will be returned even\n *     in local/test modes.\n * @return {string}\n */\nexport function getIframeTransportScriptUrl(ampWin, opt_forceProdUrl) {\n  if ((getMode().localDev || getMode().test) && !opt_forceProdUrl &&\n      ampWin.parent && ampWin.parent.location) {\n    const loc = ampWin.parent.location;\n    return `${loc.protocol}//${loc.host}/dist/iframe-transport-client-lib.js`;\n  }\n  return urls.thirdParty +\n      '/$internalRuntimeVersion$/iframe-transport-client-v0.js';\n}\n\n/**\n * @visibleForTesting\n */\nexport class IframeTransport {\n  /**\n   * @param {!Window} ampWin The window object of the AMP document\n   * @param {string} type The value of the amp-analytics tag's type attribute\n   * @param {!JsonObject} config\n   * @param {string} id If (potentially) using sendResponseToCreative(), it\n   *     should be something that the recipient can use to identify the\n   *     context of the message, e.g. the resourceID of a DOM element.\n   */\n  constructor(ampWin, type, config, id) {\n    /** @private @const {!Window} */\n    this.ampWin_ = ampWin;\n\n    /** @private @const {string} */\n    this.type_ = type;\n\n    /** @private @const {string} */\n    this.creativeId_ = id;\n\n    dev().assert(config && config['iframe'],\n        'Must supply iframe URL to constructor!');\n    this.frameUrl_ = config['iframe'];\n\n    /** @private {number} */\n    this.numLongTasks_ = 0;\n\n    this.processCrossDomainIframe();\n  }\n\n  /**\n   * Called when a Transport instance is being removed from the DOM\n   */\n  detach() {\n    IframeTransport.markCrossDomainIframeAsDone(this.ampWin_.document,\n        this.type_);\n  }\n\n  /**\n   * If iframe is specified in config/transport, check whether third-party\n   * iframe already exists, and if not, create it.\n   */\n  processCrossDomainIframe() {\n    let frameData;\n    if (IframeTransport.hasCrossDomainIframe(this.type_)) {\n      frameData = IframeTransport.getFrameData(this.type_);\n      ++(frameData.usageCount);\n    } else {\n      frameData = this.createCrossDomainIframe();\n      this.ampWin_.document.body.appendChild(frameData.frame);\n      this.createPerformanceObserver_();\n    }\n    dev().assert(frameData, 'Trying to use non-existent frame');\n  }\n\n  /**\n   * Create a cross-domain iframe for third-party vendor analytics\n   * @return {!FrameData}\n   * @visibleForTesting\n   */\n  createCrossDomainIframe() {\n    // Explanation of IDs:\n    // Each instance of IframeTransport (owned by a specific amp-analytics\n    // tag, in turn owned by a specific creative) has an ID\n    // (this.getCreativeId()).\n    // Each cross-domain iframe also has an ID, stored here in sentinel.\n    // These two types of IDs have different formats.\n    // There is a many-to-one relationship, in that several creatives may\n    // utilize the same analytics vendor, so perhaps two creatives might\n    // both use the same vendor iframe.\n    // Of course, a given creative may use multiple analytics vendors, but\n    // in that case it would use multiple amp-analytics tags, so the\n    // iframeTransport.getCreativeId() -> sentinel relationship is *not*\n    // many-to-many.\n    const sentinel = IframeTransport.createUniqueId_();\n    const frameName = JSON.stringify(/** @type {JsonObject} */ ({\n      scriptSrc: getIframeTransportScriptUrl(this.ampWin_),\n      sentinel,\n      type: this.type_,\n    }));\n    const frame = createElementWithAttributes(this.ampWin_.document, 'iframe',\n        /** @type {!JsonObject} */ ({\n          sandbox: 'allow-scripts allow-same-origin',\n          name: frameName,\n          'data-amp-3p-sentinel': sentinel,\n        }));\n    frame.sentinel = sentinel;\n    setStyles(frame, {\n      display: 'none',\n    });\n    frame.src = this.frameUrl_;\n    const frameData = /** @const {FrameData} */ ({\n      frame,\n      usageCount: 1,\n      queue: new IframeTransportMessageQueue(this.ampWin_,\n          /** @type {!HTMLIFrameElement} */\n          (frame)),\n    });\n    IframeTransport.crossDomainIframes_[this.type_] = frameData;\n    return frameData;\n  }\n\n  /**\n   * Uses the Long Task API to create an observer for when 3p vendor frames\n   * take more than 50ms of continuous CPU time.\n   * Currently the only action in response to that is to log. It will log\n   * once per LONG_TASK_REPORTING_THRESHOLD that a long task occurs. (This\n   * implies that there is a grace period for the first\n   * LONG_TASK_REPORTING_THRESHOLD-1 occurrences.)\n   * @private\n   */\n  createPerformanceObserver_() {\n    if (!isLongTaskApiSupported(this.ampWin_)) {\n      return;\n    }\n    // TODO(jonkeller): Consider merging with jank-meter.js\n    IframeTransport.performanceObservers_[this.type_] =\n        new this.ampWin_.PerformanceObserver(entryList => {\n          if (!entryList) {\n            return;\n          }\n          entryList.getEntries().forEach(entry => {\n            if (entry && entry['entryType'] == 'longtask' &&\n              (entry['name'] == 'cross-origin-descendant') &&\n              entry.attribution) {\n              entry.attribution.forEach(attrib => {\n                if (this.frameUrl_ == attrib.containerSrc &&\n                    ++this.numLongTasks_ % LONG_TASK_REPORTING_THRESHOLD == 0) {\n                  user().error(TAG_, `Long Task: Vendor: \"${this.type_}\"`);\n                }\n              });\n            }\n          });\n        });\n    IframeTransport.performanceObservers_[this.type_].observe({\n      entryTypes: ['longtask'],\n    });\n  }\n\n  /**\n   * Called when a creative no longer needs its cross-domain iframe (for\n   * instance, because the creative has been removed from the DOM).\n   * Once all creatives using a frame are done with it, the frame can be\n   * destroyed.\n   * @param {!HTMLDocument} ampDoc The AMP document\n   * @param {string} type The type attribute of the amp-analytics tag\n   */\n  static markCrossDomainIframeAsDone(ampDoc, type) {\n    const frameData = IframeTransport.getFrameData(type);\n    dev().assert(frameData && frameData.frame && frameData.usageCount,\n        'Marked the ' + type + ' frame as done, but there is no' +\n        ' record of it existing.');\n    if (--(frameData.usageCount)) {\n      // Some other instance is still using it\n      return;\n    }\n    ampDoc.body.removeChild(frameData.frame);\n    delete IframeTransport.crossDomainIframes_[type];\n    if (IframeTransport.performanceObservers_[type]) {\n      IframeTransport.performanceObservers_[type].disconnect();\n      IframeTransport.performanceObservers_[type] = null;\n    }\n  }\n\n  /**\n   * Returns whether this type of cross-domain frame is already known\n   * @param {string} type The type attribute of the amp-analytics tag\n   * @return {boolean}\n   * @visibleForTesting\n   */\n  static hasCrossDomainIframe(type) {\n    return hasOwn(IframeTransport.crossDomainIframes_, type);\n  }\n\n  /**\n   * Create a unique value to differentiate messages from a particular\n   * creative to the cross-domain iframe, or to identify the iframe itself.\n   * @return {string}\n   * @private\n   */\n  static createUniqueId_() {\n    return String(++(IframeTransport.nextId_));\n  }\n\n  /**\n   * Sends an AMP Analytics trigger event to a vendor's cross-domain iframe,\n   * or queues the message if the frame is not yet ready to receive messages.\n   * @param {string} event A string describing the trigger event\n   * @visibleForTesting\n   */\n  sendRequest(event) {\n    const frameData = IframeTransport.getFrameData(this.type_);\n    dev().assert(frameData, 'Trying to send message to non-existent frame');\n    dev().assert(frameData.queue,\n        'Event queue is missing for messages from ' + this.type_ +\n        ' to creative ID ' + this.creativeId_);\n    frameData.queue.enqueue(\n        /**\n         * @type {!../../../src/3p-frame-messaging.IframeTransportEvent}\n         */\n        ({creativeId: this.creativeId_, message: event}));\n  }\n\n  /**\n   * Gets the FrameData associated with a particular cross-domain frame type.\n   * @param {string} type The type attribute of the amp-analytics tag\n   * @return {FrameData}\n   * @visibleForTesting\n   */\n  static getFrameData(type) {\n    return IframeTransport.crossDomainIframes_[type];\n  }\n\n  /**\n   * Removes all knowledge of cross-domain iframes.\n   * Does not actually remove them from the DOM.\n   * @visibleForTesting\n   */\n  static resetCrossDomainIframes() {\n    IframeTransport.crossDomainIframes_ = {};\n  }\n\n  /**\n   * @return {string} Unique ID of this instance of IframeTransport\n   * @visibleForTesting\n   */\n  getCreativeId() {\n    return this.creativeId_;\n  }\n\n  /**\n   * @return {string} Type attribute of parent amp-analytics instance\n   * @visibleForTesting\n   */\n  getType() {\n    return this.type_;\n  }\n}\n\n/** @private {Object<string, FrameData>} */\nIframeTransport.crossDomainIframes_ = {};\n\n/** @private {number} */\nIframeTransport.nextId_ = 0;\n\n/** @private {Object<string, PerformanceObserver>} */\nIframeTransport.performanceObservers_ = {};\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AmpdocAnalyticsRoot,\n  EmbedAnalyticsRoot,\n} from './analytics-root';\nimport {\n  AnalyticsEvent,\n  AnalyticsEventType,\n  CustomEventTracker,\n  getTrackerKeyName,\n  getTrackerTypesForParentType,\n} from './events';\nimport {Observable} from '../../../src/observable';\nimport {Services} from '../../../src/services';\nimport {dev, user} from '../../../src/log';\nimport {\n  getFriendlyIframeEmbedOptional,\n} from '../../../src/friendly-iframe-embed';\nimport {\n  getParentWindowFrameElement,\n  getServiceForDoc,\n  getServicePromiseForDoc,\n  registerServiceBuilderForDoc,\n} from '../../../src/service';\nimport {hasOwn} from '../../../src/utils/object';\n\nconst SCROLL_PRECISION_PERCENT = 5;\nconst VAR_H_SCROLL_BOUNDARY = 'horizontalScrollBoundary';\nconst VAR_V_SCROLL_BOUNDARY = 'verticalScrollBoundary';\nconst PROP = '__AMP_AN_ROOT';\n\n\n\n/** @const {string} */\nconst TAG = 'Analytics.Instrumentation';\n\n\n/**\n * Events that can result in analytics data to be sent.\n * @const {Array<AnalyticsEventType>}\n */\nconst ALLOWED_IN_EMBED = [\n  AnalyticsEventType.VISIBLE,\n  AnalyticsEventType.CLICK,\n  AnalyticsEventType.TIMER,\n  AnalyticsEventType.HIDDEN,\n];\n\n\n/**\n * @implements {../../../src/service.Disposable}\n * @private\n * @visibleForTesting\n */\nexport class InstrumentationService {\n  /**\n   * @param {!../../../src/service/ampdoc-impl.AmpDoc} ampdoc\n   */\n  constructor(ampdoc) {\n    /** @const */\n    this.ampdoc = ampdoc;\n\n    /** @const */\n    this.ampdocRoot_ = new AmpdocAnalyticsRoot(this.ampdoc);\n\n    /** @const {!../../../src/service/viewport/viewport-impl.Viewport} */\n    this.viewport_ = Services.viewportForDoc(this.ampdoc);\n\n    /** @private {boolean} */\n    this.scrollHandlerRegistered_ = false;\n\n    /** @private {!Observable<\n      !../../../src/service/viewport/viewport-impl.ViewportChangedEventDef>} */\n    this.scrollObservable_ = new Observable();\n  }\n\n  /** @override */\n  dispose() {\n    this.ampdocRoot_.dispose();\n  }\n\n  /**\n   * @param {!Node} context\n   * @return {!./analytics-root.AnalyticsRoot}\n   */\n  getAnalyticsRoot(context) {\n    return this.findRoot_(context);\n  }\n\n  /**\n   * @param {!Element} analyticsElement\n   * @return {!AnalyticsGroup}\n   */\n  createAnalyticsGroup(analyticsElement) {\n    const root = this.findRoot_(analyticsElement);\n    return new AnalyticsGroup(root, analyticsElement, this);\n  }\n\n  /**\n   * Triggers the analytics event with the specified type.\n   *\n   * @param {!Element} target\n   * @param {string} eventType\n   * @param {!Object<string, string>=} opt_vars A map of vars and their values.\n   */\n  triggerEventForTarget(target, eventType, opt_vars) {\n    // TODO(dvoytenko): rename to `triggerEvent`.\n    const event = new AnalyticsEvent(target, eventType, opt_vars);\n    const root = this.findRoot_(target);\n    const tracker = /** @type {!CustomEventTracker} */ (\n      root.getTracker('custom', CustomEventTracker));\n    tracker.trigger(event);\n  }\n\n  /**\n   * @param {!Node} context\n   * @return {!./analytics-root.AnalyticsRoot}\n   */\n  findRoot_(context) {\n    // FIE\n    const frame = getParentWindowFrameElement(context, this.ampdoc.win);\n    if (frame) {\n      const embed = getFriendlyIframeEmbedOptional(frame);\n      if (embed) {\n        const embedNotNull = embed;\n        return this.getOrCreateRoot_(embed, () => {\n          return new EmbedAnalyticsRoot(this.ampdoc, embedNotNull,\n              this.ampdocRoot_);\n        });\n      }\n    }\n\n    // Ampdoc root\n    return this.ampdocRoot_;\n  }\n\n  /**\n   * @param {!Object} holder\n   * @param {function():!./analytics-root.AnalyticsRoot} factory\n   * @return {!./analytics-root.AnalyticsRoot}\n   */\n  getOrCreateRoot_(holder, factory) {\n    let root = /** @type {?./analytics-root.AnalyticsRoot} */ (holder[PROP]);\n    if (!root) {\n      root = factory();\n      holder[PROP] = root;\n    }\n    return root;\n  }\n\n  /**\n   * @param {!JsonObject} config Configuration for instrumentation.\n   * @param {function(!AnalyticsEvent)} listener The callback to call when the event\n   *  occurs.\n   * @param {!Element} analyticsElement The element associated with the\n   *  config.\n   * @private\n   * @restricted\n   */\n  addListenerDepr_(config, listener, analyticsElement) {\n    const eventType = config['on'];\n    if (!this.isTriggerAllowed_(eventType, analyticsElement)) {\n      user().error(TAG, 'Trigger type \"' + eventType + '\" is not ' +\n        'allowed in the embed.');\n      return;\n    }\n    if (eventType === AnalyticsEventType.SCROLL) {\n      if (!config['scrollSpec']) {\n        user().error(TAG, 'Missing scrollSpec on scroll trigger.');\n        return;\n      }\n      this.registerScrollTrigger_(config['scrollSpec'], listener);\n\n      // Trigger an event to fire events that might have already happened.\n      const size = this.viewport_.getSize();\n      this.onScroll_({\n        top: this.viewport_.getScrollTop(),\n        left: this.viewport_.getScrollLeft(),\n        width: size.width,\n        height: size.height,\n        relayoutAll: false,\n        velocity: 0, // Hack for typing.\n      });\n    }\n  }\n\n  /**\n   * @param {string} type\n   * @param {!Object<string, string>=} opt_vars\n   * @return {!AnalyticsEvent}\n   * @private\n   */\n  createEventDepr_(type, opt_vars) {\n    // TODO(dvoytenko): Remove when Tracker migration is complete.\n    return new AnalyticsEvent(\n        this.ampdocRoot_.getRootElement(), type, opt_vars);\n  }\n\n  /**\n   * @param {!../../../src/service/viewport/viewport-impl.ViewportChangedEventDef} e\n   * @private\n   */\n  onScroll_(e) {\n    this.scrollObservable_.fire(e);\n  }\n\n  /**\n   * Register for a listener to be called when the boundaries specified in\n   * config are reached.\n   * @param {!JsonObject} config the config that specifies the boundaries.\n   * @param {function(!AnalyticsEvent)} listener\n   * @private\n   */\n  registerScrollTrigger_(config, listener) {\n    if (!Array.isArray(config['verticalBoundaries']) &&\n        !Array.isArray(config['horizontalBoundaries'])) {\n      user().error(TAG, 'Boundaries are required for the scroll ' +\n          'trigger to work.');\n      return;\n    }\n\n    // Ensure that the scroll events are being listened to.\n    if (!this.scrollHandlerRegistered_) {\n      this.scrollHandlerRegistered_ = true;\n      this.viewport_.onChanged(this.onScroll_.bind(this));\n    }\n\n    /**\n     * @param {!Object<number, boolean>} bounds\n     * @param {number} scrollPos Number representing the current scroll\n     * @param {string} varName variable name to assign to the bound that\n     * triggers the event\n     * position.\n     */\n    const triggerScrollEvents = (bounds, scrollPos, varName) => {\n      if (!scrollPos) {\n        return;\n      }\n      // Goes through each of the boundaries and fires an event if it has not\n      // been fired so far and it should be.\n      for (const b in bounds) {\n        if (!hasOwn(bounds, b)) {\n          continue;\n        }\n        const bound = parseInt(b, 10);\n        if (bound > scrollPos || bounds[bound]) {\n          continue;\n        }\n        bounds[bound] = true;\n        const vars = Object.create(null);\n        vars[varName] = b;\n        listener(this.createEventDepr_(AnalyticsEventType.SCROLL, vars));\n      }\n    };\n\n    const boundsV = this.normalizeBoundaries_(config['verticalBoundaries']);\n    const boundsH = this.normalizeBoundaries_(config['horizontalBoundaries']);\n    this.scrollObservable_.add(e => {\n      // Calculates percentage scrolled by adding screen height/width to\n      // top/left and dividing by the total scroll height/width.\n      triggerScrollEvents(boundsV,\n          (e.top + e.height) * 100 / this.viewport_.getScrollHeight(),\n          VAR_V_SCROLL_BOUNDARY);\n      triggerScrollEvents(boundsH,\n          (e.left + e.width) * 100 / this.viewport_.getScrollWidth(),\n          VAR_H_SCROLL_BOUNDARY);\n    });\n  }\n\n  /**\n   * Rounds the boundaries for scroll trigger to nearest\n   * SCROLL_PRECISION_PERCENT and returns an object with normalized boundaries\n   * as keys and false as values.\n   *\n   * @param {!Array<number>} bounds array of bounds.\n   * @return {!Object<number,boolean>} Object with normalized bounds as keys\n   * and false as value.\n   * @private\n   */\n  normalizeBoundaries_(bounds) {\n    const result = {};\n    if (!bounds || !Array.isArray(bounds)) {\n      return result;\n    }\n\n    for (let b = 0; b < bounds.length; b++) {\n      let bound = bounds[b];\n      if (typeof bound !== 'number' || !isFinite(bound)) {\n        user().error(TAG, 'Scroll trigger boundaries must be finite.');\n        return result;\n      }\n\n      bound = Math.min(Math.round(bound / SCROLL_PRECISION_PERCENT) *\n          SCROLL_PRECISION_PERCENT, 100);\n      result[bound] = false;\n    }\n    return result;\n  }\n\n  /**\n   * Checks to confirm that a given trigger type is allowed for the element.\n   * Specifically, it confirms that if the element is in the embed, only a\n   * subset of the trigger types are allowed.\n   * @param  {!AnalyticsEventType} triggerType\n   * @param  {!Element} element\n   * @return {boolean} True if the trigger is allowed. False otherwise.\n   */\n  isTriggerAllowed_(triggerType, element) {\n    if (element.ownerDocument.defaultView != this.ampdoc.win) {\n      return ALLOWED_IN_EMBED.includes(triggerType);\n    }\n    return true;\n  }\n}\n\n\n/**\n * Represents the group of analytics triggers for a single config. All triggers\n * are declared and released at the same time.\n *\n * @implements {../../../src/service.Disposable}\n */\nexport class AnalyticsGroup {\n  /**\n   * @param {!./analytics-root.AnalyticsRoot} root\n   * @param {!Element} analyticsElement\n   * @param {!InstrumentationService} service\n   */\n  constructor(root, analyticsElement, service) {\n    // TODO(dvoytenko): remove `service` as soon as migration is complete.\n\n    /** @const */\n    this.root_ = root;\n    /** @const */\n    this.analyticsElement_ = analyticsElement;\n    /** @const */\n    this.service_ = service;\n\n    /** @private @const {!Array<!UnlistenDef>} */\n    this.listeners_ = [];\n  }\n\n  /** @override */\n  dispose() {\n    this.listeners_.forEach(listener => {\n      listener();\n    });\n  }\n\n  /**\n   * Adds a trigger with the specified config and listener. The config must\n   * contain `on` property specifying the type of the event.\n   *\n   * Triggers registered on a group are automatically released when the\n   * group is disposed.\n   *\n   * @param {!JsonObject} config\n   * @param {function(!AnalyticsEvent)} handler\n   */\n  addTrigger(config, handler) {\n    const eventType = dev().assertString(config['on']);\n    const trackerKey = getTrackerKeyName(eventType);\n    const trackerWhitelist = getTrackerTypesForParentType(this.root_.getType());\n\n    if (this.isDeprecatedListenerEvent(trackerKey)) {\n      // TODO(dvoytenko): remove this use and `addListenerDepr_` once all\n      // triggers have been migrated..\n      this.service_.addListenerDepr_(config, handler, this.analyticsElement_);\n      return;\n    }\n\n    const tracker = this.root_.getTrackerForWhitelist(\n        trackerKey, trackerWhitelist);\n    user().assert(!!tracker,\n        'Trigger type \"%s\" is not allowed in the %s', eventType,\n        this.root_.getType());\n    const unlisten = tracker.add(this.analyticsElement_, eventType, config,\n        handler);\n    this.listeners_.push(unlisten);\n  }\n\n  /**\n   * @param {string} triggerType\n   * @return {boolean}\n   */\n  isDeprecatedListenerEvent(triggerType) {\n    return triggerType == 'scroll';\n  }\n}\n\n\n/**\n * It's important to resolve instrumentation asynchronously in elements that\n * depends on it in multi-doc scope. Otherwise an element life-cycle could\n * resolve way before we have the service available.\n *\n * @param {!Element|!../../../src/service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n * @return {!Promise<InstrumentationService>}\n */\nexport function instrumentationServicePromiseForDoc(elementOrAmpDoc) {\n  return /** @type {!Promise<InstrumentationService>} */ (\n    getServicePromiseForDoc(elementOrAmpDoc, 'amp-analytics-instrumentation'));\n}\n\n/**\n * @param {!Element|!../../../src/service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n * @return {!InstrumentationService}\n */\nexport function instrumentationServiceForDocForTesting(elementOrAmpDoc) {\n  registerServiceBuilderForDoc(\n      elementOrAmpDoc, 'amp-analytics-instrumentation', InstrumentationService);\n  return getServiceForDoc(elementOrAmpDoc, 'amp-analytics-instrumentation');\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {BatchingPluginFunctions, batchSegmentDef} from './batching-plugins';\nimport {\n  ExpansionOptions,\n  variableServiceFor,\n} from './variables';\nimport {SANDBOX_AVAILABLE_VARS} from './sandbox-vars-whitelist';\nimport {Services} from '../../../src/services';\nimport {appendEncodedParamStringToUrl} from '../../../src/url';\nimport {dev, user} from '../../../src/log';\nimport {dict} from '../../../src/utils/object';\nimport {filterSplice} from '../../../src/utils/array';\nimport {isArray, isFiniteNumber} from '../../../src/types';\nimport {map} from '../../../src/utils/object';\nimport {parseQueryString} from '../../../src/url';\n\nconst TAG = 'AMP-ANALYTICS';\n\nconst BATCH_INTERVAL_MIN = 200;\n\nexport class RequestHandler {\n  /**\n   * @param {!Element} ampAnalyticsElement\n   * @param {!JsonObject} request\n   * @param {!../../../src/preconnect.Preconnect} preconnect\n   * @param {function(string, !JsonObject)} handler\n   * @param {boolean} isSandbox\n   */\n  constructor(ampAnalyticsElement, request, preconnect, handler, isSandbox) {\n\n    /** @const {!Window} */\n    this.win = ampAnalyticsElement.getAmpDoc().win;\n\n    /** @const {string} */\n    this.baseUrl = dev().assert(request['baseUrl']);\n\n    /** @private {Array<number>|number|undefined} */\n    this.batchInterval_ = request['batchInterval']; //unit is sec\n\n    /** @private {?number} */\n    this.reportWindow_ = Number(request['reportWindow']) || null; // unit is sec\n\n    /** @private {?number} */\n    this.batchIntervalPointer_ = null;\n\n    /** @private @const {string} */\n    this.batchPluginId_ = request['batchPlugin'];\n\n    user().assert((this.batchPluginId_ ? this.batchInterval_ : true),\n        'Invalid request: batchPlugin cannot be set on non-batched request');\n\n    /** @const {?function(string, !Array<!batchSegmentDef>)} */\n    this.batchingPlugin_ = this.batchPluginId_\n      ? user().assert(BatchingPluginFunctions[this.batchPluginId_],\n          `Invalid request: unsupported batch plugin ${this.batchPluginId_}`)\n      : null;\n\n    /** @private {!./variables.VariableService} */\n    this.variableService_ = variableServiceFor(this.win);\n\n    /** @private {!../../../src/service/url-replacements-impl.UrlReplacements} */\n    this.urlReplacementService_ =\n      Services.urlReplacementsForDoc(ampAnalyticsElement);\n\n    /** @private {?Promise<string>} */\n    this.baseUrlPromise_ = null;\n\n    /** @private {?Promise<string>} */\n    this.baseUrlTemplatePromise_ = null;\n\n    /** @private {!Array<!Promise<string>>}*/\n    this.extraUrlParamsPromise_ = [];\n\n    /** @private {!Array<!Promise<!batchSegmentDef>>} */\n    this.batchSegmentPromises_ = [];\n\n    /** @private {!../../../src/preconnect.Preconnect} */\n    this.preconnect_ = preconnect;\n\n    /** @private {function(string, !JsonObject)} */\n    this.handler_ = handler;\n\n    /** @const @private {!Object|undefined} */\n    this.whiteList_ = isSandbox ? SANDBOX_AVAILABLE_VARS : undefined;\n\n    /** @private {?number} */\n    this.batchIntervalTimeoutId_ = null;\n\n    /** @private {?number} */\n    this.reportWindowTimeoutId_ = null;\n\n    /** @private {boolean} */\n    this.reportRequest_ = true;\n\n    /** @private {?JsonObject} */\n    this.lastTrigger_ = null;\n\n    /** @private {number} */\n    this.queueSize_ = 0;\n\n    this.initReportWindow_();\n    this.initBatchInterval_();\n  }\n\n  /**\n   * Exposed method to send a request on event.\n   * Real ping may be batched and send out later.\n   * @param {?JsonObject} configParams\n   * @param {!JsonObject} trigger\n   * @param {!./variables.ExpansionOptions} expansionOption\n   * @param {!Object<string, *>} dynamicBindings A mapping of variables to\n   *     stringable values. For example, values could be strings, functions that\n   *     return strings, promises, etc.\n   */\n  send(configParams, trigger, expansionOption, dynamicBindings) {\n    const isImportant = trigger['important'];\n\n    const isImmediate =\n        (trigger['important'] === true) || (!this.batchInterval_);\n    if (!this.reportRequest_ && !isImportant) {\n      // Ignore non important trigger out reportWindow\n      return;\n    }\n\n    this.queueSize_++;\n    this.lastTrigger_ = trigger;\n    const triggerParams = trigger['extraUrlParams'];\n\n    const macros = this.variableService_.getMacros();\n    const bindings = Object.assign({}, dynamicBindings, macros);\n\n    if (!this.baseUrlPromise_) {\n      expansionOption.freezeVar('extraUrlParams');\n      this.baseUrlTemplatePromise_ =\n          this.variableService_.expandTemplate(this.baseUrl, expansionOption);\n      this.baseUrlPromise_ = this.baseUrlTemplatePromise_.then(baseUrl => {\n        return this.urlReplacementService_.expandUrlAsync(\n            baseUrl, bindings, this.whiteList_);\n      });\n    }\n\n    const extraUrlParamsPromise = this.expandExtraUrlParams_(\n        configParams, triggerParams, expansionOption)\n        .then(expandExtraUrlParams => {\n          // Construct the extraUrlParamsString: Remove null param and encode\n          // component\n          const expandedExtraUrlParamsStr =\n              this.getExtraUrlParamsString_(expandExtraUrlParams);\n          return this.urlReplacementService_.expandUrlAsync(\n              expandedExtraUrlParamsStr, bindings, this.whiteList_);\n        });\n\n    if (this.batchingPlugin_) {\n      const batchSegment = dict({\n        'trigger': trigger['on'],\n        'timestamp': this.win.Date.now(),\n        'extraUrlParams': null,\n      });\n      this.batchSegmentPromises_.push(extraUrlParamsPromise.then(str => {\n        batchSegment['extraUrlParams'] =\n                parseQueryString(str);\n        return batchSegment;\n      }));\n    }\n\n    this.extraUrlParamsPromise_.push(extraUrlParamsPromise);\n    this.trigger_(isImmediate);\n  }\n\n  /**\n   * Dispose function that clear request handler state.\n   */\n  dispose() {\n    this.reset_();\n\n    // Clear batchInterval timeout\n    if (this.batchIntervalTimeoutId_) {\n      this.win.clearTimeout(this.batchIntervalTimeoutId_);\n      this.batchIntervalTimeoutId_ = null;\n    }\n\n    if (this.reportWindowTimeoutId_) {\n      this.win.clearTimeout(this.reportWindowTimeoutId_);\n      this.reportWindowTimeoutId_ = null;\n    }\n  }\n\n  /**\n   * Function that schedule the actual request send.\n   * @param {boolean} isImmediate\n   * @private\n   */\n  trigger_(isImmediate) {\n    if (this.queueSize_ == 0) {\n      // Do nothing if no request in queue\n      return;\n    }\n\n    if (isImmediate) {\n      // If not batched, or batchInterval scheduler schedule trigger immediately\n      this.fire_();\n      return;\n    }\n  }\n\n  /**\n   * Send out request. Should only be called by `trigger_` function\n   * @private\n   */\n  fire_() {\n    const {\n      extraUrlParamsPromise_: extraUrlParamsPromise,\n      baseUrlTemplatePromise_: baseUrlTemplatePromise,\n      baseUrlPromise_: baseUrlPromise,\n      batchSegmentPromises_: batchSegmentsPromise,\n    } = this;\n    const lastTrigger = /** @type {!JsonObject} */ (this.lastTrigger_);\n    this.reset_();\n\n    baseUrlTemplatePromise.then(preUrl => {\n      this.preconnect_.url(preUrl, true);\n      baseUrlPromise.then(baseUrl => {\n        let requestUrlPromise;\n        if (this.batchingPlugin_) {\n          requestUrlPromise =\n              this.constructBatchSegments_(baseUrl, batchSegmentsPromise);\n        } else {\n          requestUrlPromise =\n              this.constructExtraUrlParamStrs_(baseUrl, extraUrlParamsPromise);\n        }\n        requestUrlPromise.then(requestUrl => {\n          this.handler_(requestUrl, lastTrigger);\n        });\n      });\n    });\n  }\n\n  /**\n   * Construct the final requestUrl with baseUrl and extraUrlParams\n   * @param {string} baseUrl\n   * @param {!Array<!Promise<string>>} extraUrlParamStrsPromise\n   */\n  constructExtraUrlParamStrs_(baseUrl, extraUrlParamStrsPromise) {\n    return Promise.all(extraUrlParamStrsPromise).then(paramStrs => {\n      filterSplice(paramStrs, item => {return !!item;});\n      const extraUrlParamsStr = paramStrs.join('&');\n      let requestUrl;\n      if (baseUrl.indexOf('${extraUrlParams}') >= 0) {\n        requestUrl = baseUrl.replace('${extraUrlParams}', extraUrlParamsStr);\n      } else {\n        requestUrl = appendEncodedParamStringToUrl(baseUrl, extraUrlParamsStr);\n      }\n      return requestUrl;\n    });\n  }\n\n  /**\n   * Construct the final requestUrl by calling the batch plugin function\n   * @param {string} baseUrl\n   * @param {!Array<!Promise<batchSegmentDef>>} batchSegmentsPromise\n   */\n  constructBatchSegments_(baseUrl, batchSegmentsPromise) {\n    dev().assert(this.batchingPlugin_ &&\n        typeof this.batchingPlugin_ == 'function', 'Should never call ' +\n        'constructBatchSegments_ with invalid batchingPlugin function');\n\n    return Promise.all(batchSegmentsPromise).then(batchSegments => {\n      try {\n        return this.batchingPlugin_(baseUrl, batchSegments);\n      } catch (e) {\n        dev().error(TAG,\n            `Error: batchPlugin function ${this.batchPluginId_}`, e);\n        return '';\n      }\n    });\n  }\n\n  /**\n   * Reset batching status\n   * @private\n   */\n  reset_() {\n    this.queueSize_ = 0;\n    this.baseUrlPromise_ = null;\n    this.baseUrlTemplatePromise_ = null;\n    this.extraUrlParamsPromise_ = [];\n    this.batchSegmentPromises_ = [];\n    this.lastTrigger_ = null;\n  }\n\n  /**\n   * Function that handler extraUrlParams from config and trigger.\n   * @param {?JsonObject} configParams\n   * @param {?JsonObject} triggerParams\n   * @param {!./variables.ExpansionOptions} expansionOption\n   * @return {!Promise<!JsonObject>}\n   * @private\n   */\n  expandExtraUrlParams_(configParams, triggerParams, expansionOption) {\n    const requestPromises = [];\n    const params = map();\n    // Don't encode param values here,\n    // as we'll do it later in the getExtraUrlParamsString_ call.\n    const option = new ExpansionOptions(\n        expansionOption.vars,\n        expansionOption.iterations,\n        true /* noEncode */);\n    // Add any given extraUrlParams as query string param\n    if (configParams || triggerParams) {\n      Object.assign(params, configParams, triggerParams);\n      for (const k in params) {\n        if (typeof params[k] == 'string') {\n          requestPromises.push(\n              this.variableService_.expandTemplate(params[k], option)\n                  .then(value => { params[k] = value; }));\n        }\n      }\n    }\n    return Promise.all(requestPromises).then(() => {\n      return params;\n    });\n  }\n\n  /**\n   * Handle the params map and form the final extraUrlParams string\n   * @param {!Object} params\n   * @return {string}\n   */\n  getExtraUrlParamsString_(params) {\n    const s = [];\n    for (const k in params) {\n      const v = params[k];\n      if (v == null) {\n        continue;\n      } else {\n        const sv = this.variableService_.encodeVars(k, v);\n        s.push(`${encodeURIComponent(k)}=${sv}`);\n      }\n    }\n    return s.join('&');\n  }\n\n  /**\n   * Handle batchInterval\n   */\n  initBatchInterval_() {\n    if (!this.batchInterval_) {\n      return;\n    }\n\n    this.batchInterval_ = isArray(this.batchInterval_) ?\n      this.batchInterval_ : [this.batchInterval_];\n\n    for (let i = 0; i < this.batchInterval_.length; i++) {\n      let interval = this.batchInterval_[i];\n      user().assert(isFiniteNumber(interval),\n          `Invalid batchInterval value: ${this.batchInterval_}` +\n          'interval must be a number');\n      interval = Number(interval) * 1000;\n      user().assert(interval >= BATCH_INTERVAL_MIN,\n          `Invalid batchInterval value: ${this.batchInterval_}, ` +\n          `interval value must be greater than ${BATCH_INTERVAL_MIN}ms.`);\n      this.batchInterval_[i] = interval;\n    }\n\n    this.batchIntervalPointer_ = 0;\n\n    this.refreshBatchInterval_();\n  }\n\n  /**\n   * Initializes report window.\n   */\n  initReportWindow_() {\n    if (this.reportWindow_) {\n      this.reportWindowTimeoutId_ = this.win.setTimeout(() => {\n        // Flush batch queue;\n        this.trigger_(true);\n        this.reportRequest_ = false;\n        // Clear batchInterval timeout\n        if (this.batchIntervalTimeoutId_) {\n          this.win.clearTimeout(this.batchIntervalTimeoutId_);\n          this.batchIntervalTimeoutId_ = null;\n        }\n      }, this.reportWindow_ * 1000);\n    }\n  }\n\n  /**\n   * Schedule sending request regarding to batchInterval\n   */\n  refreshBatchInterval_() {\n    dev().assert(this.batchIntervalPointer_ != null,\n        'Should not start batchInterval without pointer');\n    const interval = this.batchIntervalPointer_ < this.batchInterval_.length ?\n      this.batchInterval_[this.batchIntervalPointer_++] :\n      this.batchInterval_[this.batchInterval_.length - 1];\n\n    this.batchIntervalTimeoutId_ = this.win.setTimeout(() => {\n      this.trigger_(true);\n      this.refreshBatchInterval_();\n    }, interval);\n  }\n}\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ExpansionOptions, variableServiceFor} from './variables';\nimport {findIndex} from '../../../src/utils/array';\nimport {isObject} from '../../../src/types';\nimport {parseUrlDeprecated} from '../../../src/url';\nimport {user} from '../../../src/log';\n\n/**\n * A user-supplied JSON object that defines a resource to be reported. It is\n * expected to have some fields.\n * A resource timing enty will match against this resource if all of the\n * following properties match.\n * @property {string=} host A string whose value should be a RegExp. It defines\n *     a host or set of hosts to match against. By default, the RegExp will\n *     match all hosts if omitted.\n * @property {string=} path A string whose value should be a RegExp. It defines\n *     a path or set of paths to match against. By default, the RegExp will\n *     match all paths if omitted.\n * @property {string=} query A string whose value should be a RegExp. It defines\n *     a query string or set of query strings to match against. By default, the\n *     RegExp will match all query strings if omitted.\n * @typedef {!JsonObject}\n */\nlet IndividualResourceSpecDef;\n\n/**\n * A parsed resource spec for a specific host or sets of hosts (as defined by\n * the hostPattern).\n * @typedef{{\n *   hostPattern: !RegExp,\n *   resouces: !Array<{\n *     name: string,\n *     pathPattern: !RegExp,\n *     queryPattern: !RegExp,\n *   }>,\n * }}\n */\nlet ResourceSpecForHostDef;\n\n/**\n * The default maximum buffer size for resource timing entries. After the limit\n * has been reached, the browser will stop recording resource timing entries.\n * This number is chosen by the spec: https://w3c.github.io/resource-timing.\n * @const {number}\n */\nconst RESOURCE_TIMING_BUFFER_SIZE = 150;\n\n/**\n * Yields the thread before running the function to avoid causing jank. (i.e. a\n * task that takes over 16ms.)\n * @param {function(): OUT} fn\n * @return {!Promise<OUT>}\n * @template OUT\n */\nfunction yieldThread(fn) {\n  return new Promise(resolve => {\n    setTimeout(() => resolve(fn()));\n  });\n}\n\n/**\n * Checks whether the given object is a valid resource timing spec.\n * @param {!JsonObject} spec\n * @return {boolean}\n */\nfunction validateResourceTimingSpec(spec) {\n  if (!isObject(spec['resources'])) {\n    user().warn('ANALYTICS', 'resourceTimingSpec missing \"resources\" field');\n    return false;\n  }\n  if (!spec['encoding'] || !spec['encoding']['entry'] ||\n      !spec['encoding']['delim']) {\n    user().warn(\n        'ANALYTICS',\n        'resourceTimingSpec is missing or has incomplete encoding options');\n    return false;\n  }\n  if (spec['encoding']['base'] < 2 || spec['encoding']['base'] > 36) {\n    user().warn(\n        'ANALYTICS',\n        'resource timing variables only supports bases between 2 and 36');\n    return false;\n  }\n  if (spec['responseAfter'] != null &&\n      typeof spec['responseAfter'] != 'number') {\n    user().warn(\n        'ANALYTICS', 'resourceTimingSpec[\"responseAfter\"] must be a number');\n    return false;\n  }\n  return true;\n}\n\n/**\n * Gets all resource timing entries from the given window.\n * @param {!Window} win\n * @return {!Array<!PerformanceResourceTiming>}\n */\nfunction getResourceTimingEntries(win) {\n  return /** @type {!Array<!PerformanceResourceTiming>} */ (\n    win.performance.getEntriesByType('resource'));\n}\n\n/**\n * Converts a resource timing entry to the variables for this resource.\n * @param {!PerformanceResourceTiming} entry\n * @param {string} name Name of the resource set by the resourceTimingSpec.\n * @param {function(number, number=): string} format A function to format\n *    timestamps and intervals. (Two numbers will be passed in for intervals.)\n * @return {!ExpansionOptions}\n */\nfunction entryToExpansionOptions(entry, name, format) {\n  const vars = {\n    // ${key} is the name of the resource from the resourceTimingSpec. i.e. it's\n    // the key of the object that specifies the host and path patterns that this\n    // resource matched against.\n    'key': name,\n    'startTime': format(entry.startTime),\n    'redirectTime': format(entry.redirectEnd, entry.redirectStart),\n    'domainLookupTime': format(entry.domainLookupEnd, entry.domainLookupStart),\n    'tcpConnectTime': format(entry.connectEnd, entry.connectStart),\n    'serverResponseTime': format(entry.responseStart, entry.requestStart),\n    'networkTransferTime': format(entry.responseEnd, entry.responseStart),\n    'transferSize': format(entry.transferSize || 0),\n    'encodedBodySize': format(entry.encodedBodySize || 0),\n    'decodedBodySize': format(entry.decodedBodySize || 0),\n    'duration': format(entry.duration),\n    'initiatorType': entry.initiatorType,\n  };\n  return new ExpansionOptions(vars, 1 /* opt_iterations */);\n}\n\n/**\n * Returns the variables for the given resource timing entry if it matches one\n * of the defined resources, or null otherwise.\n * @param {!PerformanceResourceTiming} entry\n * @param {!Array<!ResourceSpecForHostDef>} resourcesByHost An array of resource\n *     specs to match against.\n * @return {?string} The name of the entry, or null if no matching name exists.\n */\nfunction nameForEntry(entry, resourcesByHost) {\n  const url = parseUrlDeprecated(entry.name);\n  for (let i = 0; i < resourcesByHost.length; ++i) {\n    const {hostPattern, resources} = resourcesByHost[i];\n    if (!hostPattern.test(url.host)) {\n      continue;\n    }\n    const index = findIndex(\n        resources,\n        res => res.pathPattern.test(url.pathname) &&\n            res.queryPattern.test(url.search));\n    if (index != -1) {\n      return resources[index].name;\n    }\n  }\n  return null; // No match.\n}\n\n/**\n * Groups all resource specs (which are defined in terms of {host, path, query}\n * patterns) by host pattern. This is used downstream to avoid running RegExps\n * for host patterns multiple times because we expect multiple resources to\n * use the same host pattern.\n * @param {!Object<string, !IndividualResourceSpecDef>} resourceDefs A map of\n *     names to the resource spec for that name.\n * @return {!Array<!ResourceSpecForHostDef>}\n */\nfunction groupSpecsByHost(resourceDefs) {\n  const byHost = {};\n  for (const name in resourceDefs) {\n    const host = resourceDefs[name]['host'] || '';\n    const path = resourceDefs[name]['path'] || '';\n    const query = resourceDefs[name]['query'] || '';\n    const pattern = {\n      name,\n      pathPattern: new RegExp(path),\n      queryPattern: new RegExp(query),\n    };\n    if (byHost[host]) {\n      byHost[host].resources.push(pattern);\n    } else {\n      byHost[host] = {\n        hostPattern: new RegExp(host),\n        resources: [pattern],\n      };\n    }\n  }\n  const byHostArray = [];\n  for (const host in byHost) {\n    byHostArray.push(byHost[host]);\n  }\n  return byHostArray;\n}\n\n/**\n * Filters out resource timing entries that don't have a name defined in\n * resourceDefs. It returns a new array where each element contains a\n * resource timing entry and the corresponding name.\n * @param {!Array<!PerformanceResourceTiming>} entries\n * @param {!Object<string, !IndividualResourceSpecDef>} resourceDefs\n * @return {!Array<{entry: !PerformanceResourceTiming, name: string}>}\n */\nfunction filterEntries(entries, resourceDefs) {\n  // Group resource timing definitions by host since we expect multiple\n  // definitions to have the same host.\n  const byHost = groupSpecsByHost(resourceDefs);\n  const results = [];\n  entries.forEach(entry => {\n    const name = nameForEntry(entry, byHost);\n    if (name) {\n      results.push({entry, name});\n    }\n  });\n  return results;\n}\n\n/**\n * Serializes resource timing entries that match the resourceTimingSpec into a\n * single string.\n * @param {!Array<!PerformanceResourceTiming>} entries\n * @param {!JsonObject} resourceTimingSpec\n * @param {!Window} win\n * @return {!Promise<string>}\n */\nfunction serialize(entries, resourceTimingSpec, win) {\n  const resources = resourceTimingSpec['resources'];\n  const encoding = resourceTimingSpec['encoding'];\n\n  const variableService = variableServiceFor(win);\n  const format = (val, relativeTo = 0) =>\n    Math.round(val - relativeTo).toString(encoding['base'] || 10);\n\n  const promises =\n      filterEntries(entries, resources)\n          .map(({entry, name}) => entryToExpansionOptions(entry, name, format))\n          .map(\n              expansion =>\n                variableService.expandTemplate(encoding['entry'], expansion));\n  return Promise.all(promises).then(vars => vars.join(encoding['delim']));\n}\n\n/**\n * Serializes resource timing entries according to the resource timing spec.\n * @param {!Window} win\n * @param {!JsonObject} resourceTimingSpec\n * @return {!Promise<string>}\n */\nexport function serializeResourceTiming(win, resourceTimingSpec) {\n  // Check that the performance timing API exists before and that the spec is\n  // valid before proceeding. If not, we simply return an empty string.\n  if (resourceTimingSpec['done'] || !win.performance || !win.performance.now ||\n      !win.performance.getEntriesByType ||\n      !validateResourceTimingSpec(resourceTimingSpec)) {\n    resourceTimingSpec['done'] = true;\n    return Promise.resolve('');\n  }\n  let entries = getResourceTimingEntries(win);\n  if (entries.length >= RESOURCE_TIMING_BUFFER_SIZE) {\n    // We've exceeded the maximum buffer size so no additional metrics will be\n    // reported for this resourceTimingSpec.\n    resourceTimingSpec['done'] = true;\n  }\n\n  const responseAfter = resourceTimingSpec['responseAfter'] || 0;\n  // Update responseAfter for next time to avoid reporting the same resource\n  // multiple times.\n  resourceTimingSpec['responseAfter'] =\n      Math.max(responseAfter, win.performance.now());\n\n  // Filter resources that are too early.\n  entries = entries.filter(e => e.startTime + e.duration >= responseAfter);\n  if (!entries.length) {\n    return Promise.resolve('');\n  }\n  // Yield the thread in case iterating over all resources takes a long time.\n  return yieldThread(() => serialize(entries, resourceTimingSpec, win));\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Used for inserted scoped analytics element.\n * @const {!Object<string, boolean>}\n */\nexport const SANDBOX_AVAILABLE_VARS = {\n  'RANDOM': true,\n  'CANONICAL_URL': true,\n  'CANONICAL_HOST': true,\n  'CANONICAL_HOSTNAME': true,\n  'CANONICAL_PATH': true,\n  'AMPDOC_URL': true,\n  'AMPDOC_HOST': true,\n  'AMPDOC_HOSTNAME': true,\n  'SOURCE_URL': true,\n  'SOURCE_HOST': true,\n  'SOURCE_HOSTNAME': true,\n  'SOURCE_PATH': true,\n  'TIMESTAMP': true,\n  'TIMEZONE': true,\n  'TIMEZONE_CODE': true,\n  'VIEWPORT_HEIGHT': true,\n  'VIEWPORT_WIDTH': true,\n  'SCREEN_WIDTH': true,\n  'SCREEN_HEIGHT': true,\n  'AVAILABLE_SCREEN_HEIGHT': true,\n  'AVAILABLE_SCREEN_WIDTH': true,\n  'SCREEN_COLOR_DEPTH': true,\n  'DOCUMENT_CHARSET': true,\n  'BROWSER_LANGUAGE': true,\n  'AMP_VERSION': true,\n  'BACKGROUND_STATE': true,\n  'USER_AGENT': true,\n  'FIRST_CONTENTFUL_PAINT': true,\n  'FIRST_VIEWPORT_READY': true,\n  'MAKE_BODY_VISIBLE': true,\n};\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Services} from '../../../src/services';\nimport {\n  assertHttpsUrl,\n  checkCorsUrl,\n  parseUrlDeprecated,\n} from '../../../src/url';\nimport {createPixel} from '../../../src/pixel';\nimport {dev, user} from '../../../src/log';\nimport {loadPromise} from '../../../src/event-helper';\nimport {removeElement} from '../../../src/dom';\nimport {setStyle} from '../../../src/style';\n\n/** @const {string} */\nconst TAG_ = 'amp-analytics.Transport';\n\n/**\n * @param {!Window} win\n * @param {string} request\n * @param {!Object<string, string|boolean>} transportOptions\n */\nexport function sendRequest(win, request, transportOptions) {\n  assertHttpsUrl(request, 'amp-analytics request');\n  checkCorsUrl(request);\n\n  const referrerPolicy = transportOptions['referrerPolicy'];\n\n  if (referrerPolicy === 'no-referrer') {\n    transportOptions['beacon'] = false;\n    transportOptions['xhrpost'] = false;\n  }\n\n  if (transportOptions['beacon'] &&\n      Transport.sendRequestUsingBeacon(win, request)) {\n    return;\n  }\n  if (transportOptions['xhrpost'] &&\n      Transport.sendRequestUsingXhr(win, request)) {\n    return;\n  }\n  const image = transportOptions['image'];\n  if (image) {\n    const suppressWarnings = (typeof image == 'object' &&\n        image['suppressWarnings']);\n    Transport.sendRequestUsingImage(\n        win, request, suppressWarnings, /** @type {string|undefined} */ (referrerPolicy));\n    return;\n  }\n  user().warn(TAG_, 'Failed to send request', request, transportOptions);\n}\n\n/**\n * @visibleForTesting\n */\nexport class Transport {\n\n  /**\n   * @param {!Window} win\n   * @param {string} request\n   * @param {boolean} suppressWarnings\n   * @param {string|undefined} referrerPolicy\n   */\n  static sendRequestUsingImage(win, request, suppressWarnings, referrerPolicy) {\n    const image = createPixel(win, request, referrerPolicy);\n    loadPromise(image).then(() => {\n      dev().fine(TAG_, 'Sent image request', request);\n    }).catch(() => {\n      if (!suppressWarnings) {\n        user().warn(TAG_, 'Response unparseable or failed to send image ' +\n            'request', request);\n      }\n    });\n  }\n\n  /**\n   * @param {!Window} win\n   * @param {string} request\n   * @return {boolean} True if this browser supports navigator.sendBeacon.\n   */\n  static sendRequestUsingBeacon(win, request) {\n    if (!win.navigator.sendBeacon) {\n      return false;\n    }\n    const result = win.navigator.sendBeacon(request, '');\n    if (result) {\n      dev().fine(TAG_, 'Sent beacon request', request);\n    }\n    return result;\n  }\n\n  /**\n   * @param {!Window} win\n   * @param {string} request\n   * @return {boolean} True if this browser supports cross-domain XHR.\n   */\n  static sendRequestUsingXhr(win, request) {\n    if (!win.XMLHttpRequest) {\n      return false;\n    }\n    /** @const {XMLHttpRequest} */\n    const xhr = new win.XMLHttpRequest();\n    if (!('withCredentials' in xhr)) {\n      return false; // Looks like XHR level 1 - CORS is not supported.\n    }\n    xhr.open('POST', request, true);\n    xhr.withCredentials = true;\n\n    // Prevent pre-flight HEAD request.\n    xhr.setRequestHeader('Content-Type', 'text/plain');\n\n    xhr.onreadystatechange = () => {\n      if (xhr.readyState == 4) {\n        dev().fine(TAG_, 'Sent XHR request', request);\n      }\n    };\n\n    xhr.send('');\n    return true;\n  }\n}\n\n/**\n * Sends a ping request using an iframe, that is removed 5 seconds after\n * it is loaded.\n * This is not available as a standard transport, but rather used for\n * specific, whitelisted requests.\n * Note that this is unrelated to the cross-domain iframe use case above in\n * sendRequestUsingCrossDomainIframe()\n * @param {!Window} win\n * @param {string} request The request URL.\n */\nexport function sendRequestUsingIframe(win, request) {\n  assertHttpsUrl(request, 'amp-analytics request');\n  /** @const {!Element} */\n  const iframe = win.document.createElement('iframe');\n  setStyle(iframe, 'display', 'none');\n  iframe.onload = iframe.onerror = () => {\n    Services.timerFor(win).delay(() => {\n      removeElement(iframe);\n    }, 5000);\n  };\n  user().assert(\n      parseUrlDeprecated(request).origin !=\n        parseUrlDeprecated(win.location.href).origin,\n      'Origin of iframe request must not be equal to the document origin.' +\n      ' See https://github.com/ampproject/' +\n      ' amphtml/blob/master/spec/amp-iframe-origin-policy.md for details.');\n  iframe.setAttribute('amp-analytics', '');\n  iframe.setAttribute('sandbox', 'allow-scripts allow-same-origin');\n  iframe.src = request;\n  win.document.body.appendChild(iframe);\n  return iframe;\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Services} from '../../../src/services';\nimport {base64UrlEncodeFromString} from '../../../src/utils/base64';\nimport {dev, user} from '../../../src/log';\nimport {getService, registerServiceBuilder} from '../../../src/service';\nimport {isArray, isFiniteNumber} from '../../../src/types';\n// TODO(calebcordry) remove this once experiment is launched\n// also remove from dep-check-config whitelist;\nimport {isExperimentOn} from '../../../src/experiments';\n\n/** @const {string} */\nconst TAG = 'Analytics.Variables';\n\n/** @const {RegExp} */\nconst VARIABLE_ARGS_REGEXP = /^(?:([^\\s]*)(\\([^)]*\\))|[^]+)$/;\n\n/** @typedef {{name: string, argList: string}} */\nlet FunctionNameArgsDef;\n\n/**\n * The structure that contains all details needed to expand a template\n * @struct\n * @const\n * @package For type.\n */\nexport class ExpansionOptions {\n  /**\n   * @param {!Object<string, *>} vars\n   * @param {number=} opt_iterations\n   * @param {boolean=} opt_noEncode\n   */\n  constructor(vars, opt_iterations, opt_noEncode) {\n    /** @const {!Object<string, string|Array<string>>} */\n    this.vars = vars;\n    /** @const {number} */\n    this.iterations = opt_iterations === undefined ? 2 : opt_iterations;\n    /** @const {boolean} */\n    this.noEncode = !!opt_noEncode;\n    this.freezeVars = {};\n  }\n\n  /**\n   * Freeze special variable name so that they don't get expanded.\n   * For example ${extraUrlParams}\n   * @param {string} str\n   */\n  freezeVar(str) {\n    this.freezeVars[str] = true;\n  }\n}\n\n\n\n/**\n * @param {string} str\n * @param {string} s\n * @param {string=} opt_l\n * @return {string}\n */\nfunction substrMacro(str, s, opt_l) {\n  const start = Number(s);\n  let {length} = str;\n  user().assert(isFiniteNumber(start),\n      'Start index ' + start + 'in substr macro should be a number');\n  if (opt_l) {\n    length = Number(opt_l);\n    user().assert(isFiniteNumber(length),\n        'Length ' + length + ' in substr macro should be a number');\n  }\n\n  return str.substr(start, length);\n}\n\n/**\n * @param {string} value\n * @param {string} defaultValue\n * @return {string}\n */\nfunction defaultMacro(value, defaultValue) {\n  if (!value || !value.length) {\n    return user().assertString(defaultValue);\n  }\n  return value;\n}\n\n/**\n * @param {string} string input to be replaced\n * @param {string} matchPattern string representation of regex pattern\n * @param {string=} opt_newSubStr pattern to be substituted in\n * @return {string}\n */\nfunction replaceMacro(string, matchPattern, opt_newSubStr) {\n  if (!matchPattern) {\n    user().warn(TAG, 'REPLACE macro must have two or more arguments');\n  }\n  if (!opt_newSubStr) {\n    opt_newSubStr = '';\n  }\n  const regex = new RegExp(matchPattern, 'g');\n  return string.replace(regex, opt_newSubStr);\n}\n\n\n/**\n * Provides support for processing of advanced variable syntax like nested\n * expansions macros etc.\n */\nexport class VariableService {\n  /**\n   * @param {!Window} window\n   */\n  constructor(window) {\n\n    /** @private {!Window} */\n    this.win_ = window;\n\n    /** @private {!Object<string, *>} */\n    this.macros_ = {};\n\n    this.register_('$DEFAULT', defaultMacro);\n    this.register_('$SUBSTR', substrMacro);\n    this.register_('$TRIM', value => value.trim());\n    this.register_('$JSON', value => JSON.stringify(value));\n    this.register_('$TOLOWERCASE', value => value.toLowerCase());\n    this.register_('$TOUPPERCASE', value => value.toUpperCase());\n    this.register_('$NOT', value => String(!value));\n    this.register_('$BASE64', value => base64UrlEncodeFromString(value));\n    this.register_('$HASH', this.hashMacro_.bind(this));\n    this.register_('$IF',\n        (value, thenValue, elseValue) => value ? thenValue : elseValue);\n    this.register_('$REPLACE', replaceMacro);\n  }\n\n  /**\n   * @return {!Object} contains all registered macros\n   */\n  getMacros() {\n    const isV2ExpansionOn = this.win_ && isExperimentOn(this.win_,\n        'url-replacement-v2');\n    return isV2ExpansionOn ? this.macros_ : {};\n  }\n\n  /**\n   * @param {string} name\n   * @param {*} macro\n   */\n  register_(name, macro) {\n    dev().assert(!this.macros_[name], 'Macro \"' + name\n        + '\" already registered.');\n    this.macros_[name] = macro;\n  }\n\n  /**\n   * @param {string} template The template to expand\n   * @param {!ExpansionOptions} options configuration to use for expansion\n   * @return {!Promise<string>} The expanded string\n   */\n  expandTemplate(template, options) {\n    if (options.iterations < 0) {\n      user().error(TAG, 'Maximum depth reached while expanding variables. ' +\n          'Please ensure that the variables are not recursive.');\n      return Promise.resolve(template);\n    }\n\n    const replacementPromises = [];\n    let replacement = template.replace(/\\${([^}]*)}/g, (match, key) => {\n      if (!key) {\n        return Promise.resolve('');\n      }\n\n      const {name, argList} = this.getNameArgs_(key);\n      if (options.freezeVars[name]) {\n        // Do nothing with frozen params\n        return match;\n      }\n\n      const raw = options.vars[name] != null ? options.vars[name] : '';\n\n      let p;\n      if (typeof raw == 'string') {\n        // Expand string values further.\n        p = this.expandTemplate(raw,\n            new ExpansionOptions(options.vars, options.iterations - 1,\n                true /* noEncode */));\n      } else {\n        // Values can also be arrays and objects. Don't expand them.\n        p = Promise.resolve(raw);\n      }\n\n      p = p.then(finalRawValue => {\n        // Then encode the value\n        const val = options.noEncode\n          ? finalRawValue\n          : this.encodeVars(name, finalRawValue);\n        return val ? val + argList : val;\n      })\n          .then(encodedValue => {\n          // Replace it in the string\n            replacement = replacement.replace(match, encodedValue);\n          });\n\n      // Queue current replacement promise after the last replacement.\n      replacementPromises.push(p);\n\n      // Since the replacement will happen later, return the original template.\n      return match;\n    });\n\n    // Once all the promises are complete, return the expanded value.\n    return Promise.all(replacementPromises).then(() => replacement);\n  }\n\n  /**\n   * Returns an array containing two values: name and args parsed from the key.\n   *\n   * @param {string} key The key to be parsed.\n   * @return {!FunctionNameArgsDef}\n   * @private\n   */\n  getNameArgs_(key) {\n    if (!key) {\n      return {name: '', argList: ''};\n    }\n    const match = key.match(VARIABLE_ARGS_REGEXP);\n    user().assert(match, 'Variable with invalid format found: ' + key);\n    return {name: match[1] || match[0], argList: match[2] || ''};\n  }\n\n  /**\n   * @param {string} unusedName Name of the variable. Only used in tests.\n   * @param {string|!Array<string>} raw The values to URI encode.\n   * @return {string} The encoded value.\n   */\n  encodeVars(unusedName, raw) {\n    if (raw == null) {\n      return '';\n    }\n\n    if (isArray(raw)) {\n      return raw.map(this.encodeVars.bind(this, unusedName)).join(',');\n    }\n    // Separate out names and arguments from the value and encode the value.\n    const {name, argList} = this.getNameArgs_(String(raw));\n    return encodeURIComponent(name) + argList;\n  }\n\n  /**\n   * @param {string} value\n   * @return {!Promise<string>}\n   */\n  hashMacro_(value) {\n    return Services.cryptoFor(this.win_).sha384Base64(value);\n  }\n}\n\n\n/**\n * @param {!Window} win\n */\nexport function installVariableService(win) {\n  registerServiceBuilder(win, 'amp-analytics-variables', VariableService);\n}\n\n/**\n * @param {!Window} win\n * @return {!VariableService}\n */\nexport function variableServiceFor(win) {\n  return getService(win, 'amp-analytics-variables');\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {IFRAME_TRANSPORTS} from './iframe-transport-vendors';\nimport {hasOwn} from '../../../src/utils/object';\n\n/**\n * @const {!JsonObject}\n */\nexport const ANALYTICS_CONFIG = /** @type {!JsonObject} */ ({\n\n  // Default parent configuration applied to all amp-analytics tags.\n  'default': {\n    'transport': {'beacon': true, 'xhrpost': true, 'image': true},\n    'vars': {\n      'accessReaderId': 'ACCESS_READER_ID',\n      'adNavTiming': 'AD_NAV_TIMING', // only available in A4A embeds\n      'adNavType': 'AD_NAV_TYPE', // only available in A4A embeds\n      'adRedirectCount': 'AD_NAV_REDIRECT_COUNT', // only available in A4A\n      'ampdocHost': 'AMPDOC_HOST',\n      'ampdocHostname': 'AMPDOC_HOSTNAME',\n      'ampdocUrl': 'AMPDOC_URL',\n      'ampGeo': 'AMP_GEO',\n      'ampState': 'AMP_STATE',\n      'ampVersion': 'AMP_VERSION',\n      'ancestorOrigin': 'ANCESTOR_ORIGIN',\n      'authdata': 'AUTHDATA',\n      'availableScreenHeight': 'AVAILABLE_SCREEN_HEIGHT',\n      'availableScreenWidth': 'AVAILABLE_SCREEN_WIDTH',\n      'backgroundState': 'BACKGROUND_STATE',\n      'browserLanguage': 'BROWSER_LANGUAGE',\n      'canonicalHost': 'CANONICAL_HOST',\n      'canonicalHostname': 'CANONICAL_HOSTNAME',\n      'canonicalPath': 'CANONICAL_PATH',\n      'canonicalUrl': 'CANONICAL_URL',\n      'clientId': 'CLIENT_ID',\n      'contentLoadTime': 'CONTENT_LOAD_TIME',\n      'counter': 'COUNTER',\n      'documentCharset': 'DOCUMENT_CHARSET',\n      'documentReferrer': 'DOCUMENT_REFERRER',\n      'domainLookupTime': 'DOMAIN_LOOKUP_TIME',\n      'domInteractiveTime': 'DOM_INTERACTIVE_TIME',\n      'externalReferrer': 'EXTERNAL_REFERRER',\n      'firstContentfulPaint': 'FIRST_CONTENTFUL_PAINT',\n      'firstViewportReady': 'FIRST_VIEWPORT_READY',\n      'fragmentParam': 'FRAGMENT_PARAM',\n      'makeBodyVisible': 'MAKE_BODY_VISIBLE',\n      'htmlAttr': 'HTML_ATTR',\n      'incrementalEngagedTime': 'INCREMENTAL_ENGAGED_TIME',\n      'navRedirectCount': 'NAV_REDIRECT_COUNT',\n      'navTiming': 'NAV_TIMING',\n      'navType': 'NAV_TYPE',\n      'pageDownloadTime': 'PAGE_DOWNLOAD_TIME',\n      'pageLoadTime': 'PAGE_LOAD_TIME',\n      'pageViewId': 'PAGE_VIEW_ID',\n      'queryParam': 'QUERY_PARAM',\n      'random': 'RANDOM',\n      'redirectTime': 'REDIRECT_TIME',\n      'screenColorDepth': 'SCREEN_COLOR_DEPTH',\n      'screenHeight': 'SCREEN_HEIGHT',\n      'screenWidth': 'SCREEN_WIDTH',\n      'scrollHeight': 'SCROLL_HEIGHT',\n      'scrollLeft': 'SCROLL_LEFT',\n      'scrollTop': 'SCROLL_TOP',\n      'scrollWidth': 'SCROLL_WIDTH',\n      'serverResponseTime': 'SERVER_RESPONSE_TIME',\n      'sourceUrl': 'SOURCE_URL',\n      'sourceHost': 'SOURCE_HOST',\n      'sourceHostname': 'SOURCE_HOSTNAME',\n      'sourcePath': 'SOURCE_PATH',\n      'tcpConnectTime': 'TCP_CONNECT_TIME',\n      'timestamp': 'TIMESTAMP',\n      'timezone': 'TIMEZONE',\n      'timezoneCode': 'TIMEZONE_CODE',\n      'title': 'TITLE',\n      'totalEngagedTime': 'TOTAL_ENGAGED_TIME',\n      'userAgent': 'USER_AGENT',\n      'viewer': 'VIEWER',\n      'viewportHeight': 'VIEWPORT_HEIGHT',\n      'viewportWidth': 'VIEWPORT_WIDTH',\n    },\n  },\n  'acquialift': {\n    'vars': {\n      'decisionApiUrl': 'us-east-1-decisionapi.lift.acquia.com',\n      'accountId': 'xxxxxxxx',\n      'siteId': 'xxxxxxxx',\n    },\n    'transport': {'beacon': true, 'xhrpost': true, 'image': false},\n    'requests': {\n      'base': 'https://${decisionApiUrl}/capture?account_id=${accountId}&site_id=${siteId}',\n      'basicCapture': '${base}' +\n        '&ident=${clientId(tc_ptid)}' +\n        '&identsrc=amp' +\n        '&es=Amp' +\n        '&url=${canonicalUrl}' +\n        '&rurl=${documentReferrer}' +\n        '&cttl=${title}',\n      'pageview': '${basicCapture}' +\n        '&en=Content View',\n      'click': '${basicCapture}' +\n        '&en=Click-Through',\n    },\n    'triggers': {\n      'defaultPageview': {\n        'on': 'visible',\n        'request': 'pageview',\n      },\n    },\n  },\n\n  'afsanalytics': {\n    'vars': {\n      'server': 'www',\n      'websiteid': 'xxxxxxxx',\n      'event': 'click',\n      'clicklabel': 'clicked from AMP page',\n    },\n    'transport': {'beacon': false, 'xhrpost': false, 'image': true},\n    'requests': {\n      'host': '//${server}.afsanalytics.com',\n      'base': '${host}/cgi_bin/',\n      'pageview': '${base}connect.cgi?usr=${websiteid}Pauto' +\n        '&js=1' +\n        '&amp=1' +\n        '&title=${title}' +\n        '&url=${canonicalUrl}' +\n        '&refer=${documentReferrer}' +\n        '&resolution=${screenWidth}x${screenHeight}' +\n        '&color=${screenColorDepth}' +\n        '&Tips=${random}',\n      'click': '${base}click.cgi?usr=${websiteid}' +\n        '&event=${event}' +\n        '&exit=${clicklabel}',\n    },\n    'triggers': {\n      'defaultPageview': {\n        'on': 'visible',\n        'request': 'pageview',\n      },\n    },\n  },\n\n  'alexametrics': {\n    'requests': {\n      'base': 'https://${ampAtrkHost}/atrk.gif?account=${atrk_acct}&domain=${domain}',\n      'pageview': '${base}&jsv=amp-${ampVersion}' +\n        '&frame_height=${viewportHeight}&frame_width=${viewportWidth}' +\n        '&title=${title}&time=${timestamp}&time_zone_offset=${timezone}' +\n        '&screen_params=${screenWidth}x${screenHeight}x${screenColorDepth}' +\n        '&ref_url=${documentReferrer}&host_url=${sourceUrl}' +\n        '&random_number=${random}&user_cookie=${clientId(__auc)}' +\n        '&user_cookie_flag=0&user_lang=${browserLanguage}' +\n        '&amp_doc_url=${ampdocUrl}',\n    },\n    'vars': {\n      'atrk_acct': '',\n      'domain': '',\n      'ampAtrkHost': 'certify-amp.alexametrics.com',\n    },\n    'triggers': {\n      'trackPageview': {\n        'on': 'visible',\n        'request': 'pageview',\n      },\n    },\n    'transport': {\n      'xhrpost': false,\n      'beacon': false,\n      'image': true,\n    },\n  },\n\n  'atinternet': {\n    'transport': {'beacon': false, 'xhrpost': false, 'image': true},\n    'requests': {\n      'base': 'https://${log}${domain}/hit.xiti?s=${site}&ts=${timestamp}&r=${screenWidth}x${screenHeight}x${screenColorDepth}&re=${availableScreenWidth}x${availableScreenHeight}',\n      'suffix': '&medium=amp&${extraUrlParams}&ref=${documentReferrer}',\n      'pageview': '${base}&' +\n        'p=${title}&' +\n        's2=${level2}${suffix}',\n      'click': '${base}&' +\n        'pclick=${title}&' +\n        's2click=${level2}&' +\n        'p=${label}&' +\n        's2=${level2Click}&' +\n        'type=click&click=${type}${suffix}',\n    },\n  },\n\n  'umenganalytics': {\n    'vars': {\n      'siteid': '',\n      'initial_view_time': '',\n      'eventName': '',\n      'eventProps': '',\n    },\n    'requests': {\n      'base': 'https://b.cnzz.com/utrack?' +\n      '&_siteid=${siteid}' +\n      '&_distinct_id=${clientId(umeng_amp_id)}' +\n      '&_t=${timestamp}' +\n      '&_s=google' +\n      '&_b=web' +\n      '&_r=${externalReferrer}' +\n      '&_h=${screenHeight}' +\n      '&_w=${screenWidth}' +\n      '&_ivt=${initial_view_time}',\n      'pageview': '${base}&_ename=$w_page_view&_eprops=${eventProps}',\n      'event': '${base}&_ename=${eventName}&_eprops=${eventProps}',\n    },\n    'triggers': {\n      'defaultPageview': {\n        'on': 'visible',\n        'request': 'pageview',\n      },\n    },\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n    },\n  },\n\n  'baiduanalytics': {\n    'requests': {\n      'host': 'https://hm.baidu.com',\n      'base': '${host}/hm.gif?' +\n          'si=${token}&nv=0&st=4&v=pixel-1.0&rnd=${timestamp}',\n      'pageview': '${base}&et=0',\n      'event': '${base}&ep=${category}*${action}*' +\n          '${label}*${value}&et=4&api=8_0',\n    },\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n    },\n  },\n\n  'burt': {\n    'vars': {\n      'trackingKey': 'ignore',\n      'category': '',\n      'subCategory': '',\n    },\n    'requests': {\n      'host': '//${trackingKey}.c.richmetrics.com/',\n      'base': '${host}imglog?' +\n        'e=${trackingKey}&' +\n        'pi=${trackingKey}' +\n          '|${pageViewId}' +\n          '|${canonicalPath}' +\n          '|${clientId(burt-amp-user-id)}&' +\n        'ui=${clientId(burt-amp-user-id)}&' +\n        'v=amp&' +\n        'ts=${timestamp}&' +\n        'sn=${requestCount}&',\n      'pageview': '${base}' +\n        'type=page&' +\n        'ca=${category}&' +\n        'sc=${subCategory}&' +\n        'ln=${browserLanguage}&' +\n        'lr=${documentReferrer}&' +\n        'eu=${sourceUrl}&' +\n        'tz=${timezone}&' +\n        'pd=${scrollWidth}x${scrollHeight}&' +\n        'sd=${screenWidth}x${screenHeight}&' +\n        'wd=${availableScreenWidth}x${availableScreenHeight}&' +\n        'ws=${scrollLeft}x${scrollTop}',\n      'pageping': '${base}' +\n        'type=pageping',\n    },\n    'triggers': {\n      'pageview': {\n        'on': 'visible',\n        'request': 'pageview',\n      },\n      'pageping': {\n        'on': 'timer',\n        'timerSpec': {\n          'interval': 15,\n          'maxTimerLength': 1200,\n        },\n        'request': 'pageping',\n      },\n    },\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n    },\n  },\n\n  'byside': {\n    'vars': {\n\t  'webcareZone': 'webcare',\n      'webcareId': '',\n      'channel': '',\n      'fid': '',\n\t  'lang': 'pt',\n    },\n    'requests': {\n      'host': '//${webcareZone}.byside.com/',\n      'base': '${host}BWA${webcareId}/amp/',\n      'pageview': '${base}pixel.php',\n\t  'event': '${base}signal.php?event_id=${eventId}' +\n\t    '&event_label=${eventLabel}&fields=${fields}',\n    },\n    'extraUrlParams': {\n      'webcare_id': '${webcareId}',\n      'bwch': '${channel}',\n      'lang': '${lang}',\n      'fid': '${fid}',\n      'bwit': 'A',\n      'tuid': '${clientId(byside_webcare_tuid)}',\n      'suid': '',\n      'puid': '${pageViewId}p${timestamp}',\n      'referrer': '${documentReferrer}',\n      'page': '${sourceUrl}',\n      'amppage': '${ampdocUrl}',\n      'bwpt': '${title}',\n      'bres': '${viewportWidth}x${viewportHeight}',\n      'res': '${screenWidth}x${screenHeight}',\n      'v': 'v20171116a',\n      'ampv': '${ampVersion}',\n      'viewer': '${viewer}',\n      'ua': '${userAgent}',\n      'r': '${random}',\n    },\n    'triggers': {\n      'pageview': {\n        'on': 'visible',\n        'request': 'pageview',\n      },\n    },\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n    },\n  },\n\n  'chartbeat': {\n    'requests': {\n      'host': 'https://ping.chartbeat.net',\n      'basePrefix': '/ping?h=${domain}&' +\n        'p=${canonicalPath}&' +\n        'u=${clientId(_cb)}&' +\n        'd=${canonicalHost}&' +\n        'g=${uid}&' +\n        'g0=${sections}&' +\n        'g1=${authors}&' +\n        'g2=${zone}&' +\n        'g3=${sponsorName}&' +\n        'g4=${contentType}&' +\n        'c=120&' +\n        'x=${scrollTop}&' +\n        'y=${scrollHeight}&' +\n        'j=${decayTime}&' +\n        'R=1&' +\n        'W=0&' +\n        'I=0&' +\n        'E=${totalEngagedTime}&' +\n        'r=${documentReferrer}&' +\n        't=${pageViewId}${clientId(_cb)}&' +\n        'b=${pageLoadTime}&' +\n        'i=${title}&' +\n        'T=${timestamp}&' +\n        'tz=${timezone}&' +\n        'C=2',\n      'baseSuffix': '&_',\n      'interval': '${host}${basePrefix}${baseSuffix}',\n      'anchorClick': '${host}${basePrefix}${baseSuffix}',\n    },\n    'triggers': {\n      'trackInterval': {\n        'on': 'timer',\n        'timerSpec': {\n          'interval': 15,\n          'maxTimerLength': 7200,\n        },\n        'request': 'interval',\n        'vars': {\n          'decayTime': 30,\n        },\n      },\n      'trackAnchorClick': {\n        'on': 'click',\n        'selector': 'a',\n        'request': 'anchorClick',\n        'vars': {\n          'decayTime': 30,\n        },\n      },\n    },\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n    },\n  },\n\n  'clicky': {\n    'vars': {\n      'site_id': '',\n    },\n    'requests': {\n      'base': 'https://in.getclicky.com/in.php?' +\n        'site_id=${site_id}',\n      'baseSuffix': '&mime=${contentType}&' +\n        'x=${random}',\n      'pageview': '${base}&' +\n        'res=${screenWidth}x${screenHeight}&' +\n        'lang=${browserLanguage}&' +\n        'secure=1&' +\n        'type=pageview&' +\n        'href=${canonicalPath}&' +\n        'title=${title}' +\n        '${baseSuffix}',\n      'interval': '${base}&' +\n        'type=ping' +\n        '${baseSuffix}',\n    },\n    'triggers': {\n      'defaultPageview': {\n        'on': 'visible',\n        'request': 'pageview',\n      },\n      'interval': {\n        'on': 'timer',\n        'timerSpec': {\n          'interval': 60,\n          'maxTimerLength': 600,\n        },\n        'request': 'interval',\n      },\n    },\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n    },\n  },\n\n  'colanalytics': {\n    'requests': {\n      'host': 'https://ase.clmbtech.com',\n      'base': '${host}/message',\n      'pageview': '${base}?cid=${id}' +\n        '&val_101=${id}' +\n        '&val_101=${canonicalPath}' +\n        '&ch=${canonicalHost}' +\n        '&uuid=${uid}' +\n        '&au=${authors}' +\n        '&zo=${zone}' +\n        '&sn=${sponsorName}' +\n        '&ct=${contentType}' +\n        '&st=${scrollTop}' +\n        '&sh=${scrollHeight}' +\n        '&dct=${decayTime}' +\n        '&tet=${totalEngagedTime}' +\n        '&dr=${documentReferrer}' +\n        '&plt=${pageLoadTime}' +\n        '&val_108=${title}' +\n        '&val_120=3',\n    },\n    'triggers': {\n      'defaultPageview': {\n        'on': 'visible',\n        'request': 'pageview',\n      },\n    },\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n    },\n  },\n\n  'comscore': {\n    'vars': {\n      'c2': '1000001',\n    },\n    'requests': {\n      'host': 'https://sb.scorecardresearch.com',\n      'base': '${host}/b?',\n      'pageview': '${base}c1=2' +\n        '&c2=${c2}' +\n        '&cs_pv=${pageViewId}' +\n        '&c12=${clientId(comScore)}' +\n        '&rn=${random}' +\n        '&c8=${title}' +\n        '&c7=${canonicalUrl}' +\n        '&c9=${documentReferrer}' +\n        '&cs_c7amp=${ampdocUrl}',\n    },\n    'triggers': {\n      'defaultPageview': {\n        'on': 'visible',\n        'request': 'pageview',\n      },\n    },\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n    },\n  },\n\n  'cxense': {\n    'requests': {\n      'host': 'https://scomcluster.cxense.com',\n      'base': '${host}/Repo/rep.gif',\n      'pageview': '${base}?ver=1&typ=pgv&sid=${siteId}&ckp=${clientId(cX_P)}&' +\n          'loc=${sourceUrl}&rnd=${random}&ref=${documentReferrer}&' +\n          'ltm=${timestamp}&wsz=${screenWidth}x${screenHeight}&' +\n          'bln=${browserLanguage}&chs=${documentCharset}&' +\n          'col=${screenColorDepth}&tzo=${timezone}&cp_cx_channel=amp',\n    },\n    'triggers': {\n      'defaultPageview': {\n        'on': 'visible',\n        'request': 'pageview',\n      },\n    },\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n    },\n  },\n\n  'dynatrace': {\n    'requests': {\n      'endpoint': '${protocol}://${tenant}${separator}${environment}:${port}/ampbf/${tenantpath}',\n      'pageview': '${endpoint}?type=js&' +\n        'flavor=amp&' +\n        'v=1&' +\n        'a=1%7C1%7C_load_%7C_load_%7C-%7C${navTiming(navigationStart)}%7C' +\n\t\t'${navTiming(domContentLoadedEventEnd)}%7C0%2C2%7C2%7C_onload_%7C' +\n\t\t'_load_%7C-%7C${navTiming(domContentLoadedEventStart)}%7C' +\n\t\t'${navTiming(domContentLoadedEventEnd)}%7C0&' +\n        'fId=${pageViewId}&' +\n        'vID=${clientId(rxVisitor)}&' +\n        'referer=${sourceUrl}&' +\n        'title=${title}&' +\n        'sw=${screenWidth}&' +\n        'sh=${screenHeight}&' +\n        'w=${viewportWidth}&' +\n        'h=${viewportHeight}&' +\n        'nt=a${navType}' +\n        'b${navTiming(navigationStart)}' +\n        'c${navTiming(navigationStart,redirectStart)}' +\n        'd${navTiming(navigationStart,redirectEnd)}' +\n        'e${navTiming(navigationStart,fetchStart)}' +\n        'f${navTiming(navigationStart,domainLookupStart)}' +\n        'g${navTiming(navigationStart,domainLookupEnd)}' +\n        'h${navTiming(navigationStart,connectStart)}' +\n        'i${navTiming(navigationStart,connectEnd)}' +\n        'j${navTiming(navigationStart,secureConnectionStart)}' +\n        'k${navTiming(navigationStart,requestStart)}' +\n        'l${navTiming(navigationStart,responseStart)}' +\n        'm${navTiming(navigationStart,responseEnd)}' +\n        'n${navTiming(navigationStart,domLoading)}' +\n        'o${navTiming(navigationStart,domInteractive)}' +\n        'p${navTiming(navigationStart,domContentLoadedEventStart)}' +\n        'q${navTiming(navigationStart,domContentLoadedEventEnd)}' +\n        'r${navTiming(navigationStart,domComplete)}' +\n        's${navTiming(navigationStart,loadEventStart)}' +\n        't${navTiming(navigationStart,loadEventEnd)}&' +\n        'app=${app}&' +\n        'time=${timestamp}',\n    },\n    'triggers': {\n      'trackPageview': {\n        'on': 'visible',\n        'request': 'pageview',\n      },\n    },\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n    },\n    'vars': {\n      'app': 'ampapp',\n      'protocol': 'https',\n      'tenant': '',\n      'environment': 'live.dynatrace.com',\n      'port': '443',\n      'separator': '.',\n    },\n  },\n\n  'euleriananalytics': {\n    'vars': {\n      'analyticsHost': '',\n      'documentLocation': 'SOURCE_URL',\n    },\n    'requests': {\n      'base': 'https://${analyticsHost}',\n      'basePrefix': '-/${random}?' +\n        'euid-amp=${clientId(etuix)}&' +\n        'url=${documentLocation}&',\n      'pageview': '${base}/col2/${basePrefix}' +\n        'rf=${externalReferrer}&' +\n        'urlp=${pagePath}&' +\n        'ss=${screenWidth}x${screenHeight}&' +\n        'sd=${screenColorDepth}',\n      'action': '${base}/action/${basePrefix}' +\n        'eact=${actionCode}&' +\n        'actr=${actionRef}',\n      'user': '${base}/uparam/${basePrefix}' +\n        'euk${userParamKey}=${userParamVal}',\n      'contextflag': '${base}/cflag2/${basePrefix}' +\n        'ecf0k=${cflagKey}&ecf0v=${cflagVal}',\n    },\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n    },\n  },\n\n  'facebookpixel': {\n    'vars': {\n      'pixelId': 'PIXEL-ID',\n    },\n    'requests': {\n      'host': 'https://www.facebook.com',\n      'base': '${host}/tr?noscript=1',\n      'pageview': '${base}&ev=PageView&' +\n          'id=${pixelId}',\n      'event': '${base}&ev=${eventName}&' +\n          'id=${pixelId}' +\n          '&cd[content_name]=${content_name}',\n      'eventViewContent': '${base}&ev=ViewContent&' +\n          'id=${pixelId}' +\n          '&cd[value]=${value}' +\n          '&cd[currency]=${currency}' +\n          '&cd[content_name]=${content_name}' +\n          '&cd[content_type]=${content_type}' +\n          '&cd[content_ids]=${content_ids}',\n      'eventSearch': '${base}&ev=Search&' +\n          'id=${pixelId}' +\n          '&cd[value]=${value}' +\n          '&cd[currency]=${currency}' +\n          '&cd[content_category]=${content_category}' +\n          '&cd[content_ids]=${content_ids}' +\n          '&cd[search_string]=${search_string}',\n      'eventAddToCart': '${base}&ev=AddToCart&' +\n          'id=${pixelId}' +\n          '&cd[value]=${value}' +\n          '&cd[currency]=${currency}' +\n          '&cd[content_name]=${content_name}' +\n          '&cd[content_type]=${content_type}' +\n          '&cd[content_ids]=${content_ids}',\n      'eventAddToWishlist': '${base}&ev=AddToWishlist&' +\n          'id=${pixelId}' +\n          '&cd[value]=${value}' +\n          '&cd[currency]=${currency}' +\n          '&cd[content_name]=${content_name}' +\n          '&cd[content_category]=${content_category}' +\n          '&cd[content_ids]=${content_ids}',\n      'eventInitiateCheckout': '${base}&ev=InitiateCheckout&' +\n          'id=${pixelId}' +\n          '&cd[value]=${value}' +\n          '&cd[currency]=${currency}' +\n          '&cd[content_name]=${content_name}' +\n          '&cd[content_category]=${content_category}' +\n          '&cd[num_items]=${num_items}' +\n          '&cd[content_ids]=${content_ids}',\n      'eventAddPaymentInfo': '${base}&ev=AddPaymentInfo&' +\n          'id=${pixelId}' +\n          '&cd[value]=${value}' +\n          '&cd[currency]=${currency}' +\n          '&cd[content_category]=${content_category}' +\n          '&cd[content_ids]=${content_ids}',\n      'eventPurchase': '${base}&ev=Purchase&' +\n          'id=${pixelId}' +\n          '&cd[value]=${value}' +\n          '&cd[currency]=${currency}' +\n          '&cd[content_name]=${content_name}' +\n          '&cd[content_type]=${content_type}' +\n          '&cd[content_ids]=${content_ids}' +\n          '&cd[num_items]=${num_items}',\n      'eventLead': '${base}&ev=Lead&' +\n          'id=${pixelId}' +\n          '&cd[value]=${value}' +\n          '&cd[currency]=${currency}' +\n          '&cd[content_name]=${content_name}' +\n          '&cd[content_category]=${content_category}',\n      'eventCompleteRegistration': '${base}&ev=CompleteRegistration&' +\n          'id=${pixelId}' +\n          '&cd[value]=${value}' +\n          '&cd[currency]=${currency}' +\n          '&cd[content_name]=${content_name}' +\n          '&cd[status]=${status}',\n    },\n    'triggers': {\n      'trackPageview': {\n        'on': 'visible',\n        'request': 'pageview',\n      },\n    },\n  },\n\n  'gemius': {\n    'requests': {\n      'base': 'https://${prefix}.hit.gemius.pl/_${timestamp}/redot.gif?l=91&id=${identifier}&screen=${screenWidth}x${screenHeight}&window=${viewportWidth}x${viewportHeight}&fr=1&href=${sourceUrl}&ref=${documentReferrer}&extra=gemamp%3D1%7Campid%3D${clientId(gemius)}%7C${extraparams}',\n      'pageview': '${base}&et=view&hsrc=1',\n      'event': '${base}&et=action&hsrc=3',\n    },\n    'triggers': {\n      'defaultPageview': {\n        'on': 'visible',\n        'request': 'pageview',\n      },\n    },\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n    },\n  },\n\n  'googleadwords': { // https://developers.google.com/adwords/amp/landing-pages\n    'requests': {\n      'conversion_prefix': 'https://www.googleadservices.com/pagead/conversion/',\n      'remarketing_prefix':\n          'https://googleads.g.doubleclick.net/pagead/viewthroughconversion/',\n      'common_params': '${googleConversionId}/?' +\n          'cv=amp2&' + // Increment when making changes.\n          'label=${googleConversionLabel}&' +\n          'random=${random}&' +\n          'url=${sourceUrl}&' +\n          'ref=${documentReferrer}&' +\n          'fst=${pageViewId}&' +\n          'num=${counter(googleadwords)}&' +\n          'fmt=3&' +\n          'async=1&' +\n          'u_h=${screenHeight}&u_w=${screenWidth}&' +\n          'u_ah=${availableScreenHeight}&u_aw=${availableScreenWidth}&' +\n          'u_cd=${screenColorDepth}&' +\n          'u_tz=${timezone}&' +\n          'tiba=${title}&' +\n          'guid=ON&script=0',\n      'conversion_params': 'value=${googleConversionValue}&' +\n          'currency_code=${googleConversionCurrency}&' +\n          'bg=${googleConversionColor}&' +\n          'hl=${googleConversionLanguage}',\n      'conversion': '${conversion_prefix}${common_params}&${conversion_params}',\n      'remarketing': '${remarketing_prefix}${common_params}',\n    },\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n    },\n  },\n\n  'gtag': {\n    'configRewriter': {\n      'url': 'https://www.googletagmanager.com/gtag/amp',\n    },\n    'vars': {\n      'eventValue': '0',\n      'documentLocation': 'SOURCE_URL',\n      'clientId': 'CLIENT_ID(AMP_ECID_GOOGLE,,_ga)',\n      'dataSource': 'AMP',\n      'anonymizeIP': 'aip',\n      'errorParam': '${errorName}-${errorMessage}',\n    },\n    'requests': {\n      'uaHost': 'https://www.google-analytics.com',\n      'uaBasePrefix':\n          'v=1&' +\n           '_v=a1&' +\n           'ds=${dataSource}&' +\n           '${anonymizeIP}&' +\n           '_s=${requestCount}&' +\n           'dt=${title}&' +\n           'sr=${screenWidth}x${screenHeight}&' +\n           'cid=${clientId}&' +\n           'tid=${trackingId}&' +\n           'dl=${documentLocation}&' +\n           'dr=${externalReferrer}&' +\n           'sd=${screenColorDepth}&' +\n           'ul=${browserLanguage}&' +\n           'de=${documentCharset}',\n      'uaBaseSuffix':\n          '&a=${pageViewId}&' +\n           'z=${random}',\n      'uaPageviewCommon':\n           '&t=pageview&' +\n           'jid=${random}&' +\n           'gjid=${random}&' +\n           '_r=1',\n      'uaPageview':\n          '${uaHost}/r/collect?${uaBasePrefix}' +\n           '${uaPageviewCommon}' +\n           '${uaBaseSuffix}',\n      'uaPageviewNpa':\n          '${uaHost}/collect?${uaBasePrefix}' +\n           '${uaPageviewCommon}' +\n           '${uaBaseSuffix}',\n      'uaEvent':\n          '${uaHost}/collect?${uaBasePrefix}&' +\n           't=event&' +\n           'jid=' +\n           '${uaBaseSuffix}',\n      'uaTiming':\n          '${uaHost}/collect?${uaBasePrefix}&' +\n           'jid=&' +\n           'plt=${pageLoadTime}&' +\n           'dns=${domainLookupTime}&' +\n           'tcp=${tcpConnectTime}&' +\n           'rrt=${redirectTime}&' +\n           'srt=${serverResponseTime}&' +\n           'pdt=${pageDownloadTime}&' +\n           'clt=${contentLoadTime}&' +\n           'dit=${domInteractiveTime}' +\n           '${uaBaseSuffix}',\n      'uaError':\n          '${uaHost}/collect?${uaBasePrefix}&' +\n           't=exception&' +\n           'exd=${errorParam}' +\n           '${uaBaseSuffix}',\n      'awConversionPrefix':\n          'https://www.googleadservices.com/pagead/conversion/',\n      'awRemarketingPrefix':\n          'https://googleads.g.doubleclick.net/pagead/viewthroughconversion/',\n      'awCommonParams':\n          '${conversionId}/?' +\n           'cv=amp3&' + // Increment when making changes.\n           'label=${conversionLabel}&' +\n           'random=${random}&' +\n           'url=${sourceUrl}&' +\n           'ref=${documentReferrer}&' +\n           'fst=${pageViewId}&' +\n           'num=${counter(googleadwords)}&' +\n           'fmt=3&' +\n           'async=1&' +\n           'u_h=${screenHeight}&u_w=${screenWidth}&' +\n           'u_ah=${availableScreenHeight}&u_aw=${availableScreenWidth}&' +\n           'u_cd=${screenColorDepth}&' +\n           'u_tz=${timezone}&' +\n           'tiba=${title}&' +\n           'guid=ON&script=0',\n      'awConversion': '${awConversionPrefix}${awCommonParams}',\n      'awRemarketing': '${awRemarketingPrefix}${awCommonParams}',\n      'flBase': 'https://ad.doubleclick.net/activity;src=${flSrc};type=${flType};cat=${flCat}',\n    },\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n    },\n  },\n\n  'googleanalytics': {\n    'vars': {\n      'eventValue': '0',\n      'documentLocation': 'SOURCE_URL',\n      'clientId': 'CLIENT_ID(AMP_ECID_GOOGLE,,_ga)',\n      'dataSource': 'AMP',\n      'anonymizeIP': 'aip',\n      'errorParam': '${errorName}-${errorMessage}',\n    },\n    'requests': {\n      'host': 'https://www.google-analytics.com',\n      'basePrefix': 'v=1&' +\n          '_v=a1&' +\n          'ds=${dataSource}&' +\n          '${anonymizeIP}&' +\n          '_s=${requestCount}&' +\n          'dt=${title}&' +\n          'sr=${screenWidth}x${screenHeight}&' +\n          '_utmht=${timestamp}&' +\n          'cid=${clientId}&' +\n          'tid=${account}&' +\n          'dl=${documentLocation}&' +\n          'dr=${externalReferrer}&' +\n          'sd=${screenColorDepth}&' +\n          'ul=${browserLanguage}&' +\n          'de=${documentCharset}',\n      'baseSuffix': '&a=${pageViewId}&' +\n          'z=${random}',\n      'pageview': '${host}/r/collect?${basePrefix}&' +\n          't=pageview&' +\n          'jid=${random}&' +\n          '_r=1' +\n          '${baseSuffix}',\n      'event': '${host}/collect?${basePrefix}&' +\n          't=event&' +\n          'jid=&' +\n          'ec=${eventCategory}&' +\n          'ea=${eventAction}&' +\n          'el=${eventLabel}&' +\n          'ev=${eventValue}' +\n          '${baseSuffix}',\n      'social': '${host}/collect?${basePrefix}&' +\n          't=social&' +\n          'jid=&' +\n          'sa=${socialAction}&' +\n          'sn=${socialNetwork}&' +\n          'st=${socialTarget}' +\n          '${baseSuffix}',\n      'timing': '${host}/collect?${basePrefix}&' +\n          't=${timingRequestType}&' +\n          'jid=&' +\n          'plt=${pageLoadTime}&' +\n          'dns=${domainLookupTime}&' +\n          'tcp=${tcpConnectTime}&' +\n          'rrt=${redirectTime}&' +\n          'srt=${serverResponseTime}&' +\n          'pdt=${pageDownloadTime}&' +\n          'clt=${contentLoadTime}&' +\n          'dit=${domInteractiveTime}' +\n          '${baseSuffix}',\n      'error': '${host}/collect?${basePrefix}&' +\n          't=exception&' +\n          'exd=${errorParam}' +\n          '${baseSuffix}',\n    },\n    'triggers': {\n      'performanceTiming': {\n        'on': 'visible',\n        'request': 'timing',\n        'sampleSpec': {\n          'sampleOn': '${clientId}',\n          'threshold': 1,\n        },\n        'vars': {\n          'timingRequestType': 'timing',\n        },\n      },\n      'adwordsTiming': {\n        'on': 'visible',\n        'request': 'timing',\n        'enabled': '${queryParam(gclid)}',\n        'vars': {\n          'timingRequestType': 'adtiming',\n        },\n      },\n    },\n    'extraUrlParamsReplaceMap': {\n      'dimension': 'cd',\n      'metric': 'cm',\n    },\n    'optout': '_gaUserPrefs.ioo',\n  },\n\n  'lotame': {\n    'requests': {\n      'pageview': 'https://bcp.crwdcntrl.net/amp?c=${account}&pv=y',\n    },\n    'triggers': {\n      'track pageview': {\n        'on': 'visible',\n        'request': 'pageview',\n      },\n    },\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n    },\n  },\n\n  'marinsoftware': {\n    'requests': {\n      'base': 'https://tracker.marinsm.com/tp',\n      'baseParams': 'cid=${trackerId}' +\n        '&ampVersion=${ampVersion}' +\n        '&ds=AMP' +\n        '&ref=${externalReferrer}' +\n        '&page=${sourceUrl}' +\n        '&uuid=${clientId(marin_amp_id)}' +\n        '&rnd=${random}',\n      'pageView': '${base}?' +\n        '${baseParams}' +\n        '&act=1',\n      'conversion': '${base}?' +\n        '${baseParams}' +\n        '&act=2' +\n        '&trans=UTM:I' +\n          '|${orderId}' +\n          '|${marinConversionType}' +\n          '|${productName}' +\n          '|${category}' +\n          '|${price}' +\n          '|${quantity}',\n    },\n    'transport': {\n      'beacon': true,\n      'xhrpost': false,\n      'image': true,\n    },\n  },\n\n  'mediametrie': {\n    'requests': {\n      'host': 'https://prof.estat.com/m/web',\n      'pageview': '${host}/${serial}?' +\n        'c=${level1}' +\n        '&dom=${ampdocUrl}' +\n        '&enc=${documentCharset}' +\n        '&l3=${level3}' +\n        '&l4=${level4}' +\n        '&n=${random}' +\n        '&p=${level2}' +\n        '&r=${documentReferrer}' +\n        '&sch=${screenHeight}' +\n        '&scw=${screenWidth}' +\n        '&tn=amp' +\n        '&v=1' +\n        '&vh=${availableScreenHeight}' +\n        '&vw=${availableScreenWidth}',\n    },\n    'triggers': {\n      'trackPageview': {\n        'on': 'visible',\n        'request': 'pageview',\n      },\n    },\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n    },\n  },\n\n  'mediarithmics': {\n    'vars': {\n      'domain': 'events.mediarithmics.com',\n      'url': 'SOURCE_URL',\n      'event_name': '$page_view',\n      'referrer': 'DOCUMENT_REFERRER',\n    },\n    'requests': {\n      'host': 'https://${domain}',\n      'pageview': '${host}/v1/visits/pixel?' +\n        '$site_token=${site_token}' +\n        '&$url=${url}' +\n        '&$ev=${event_name}' +\n        '&$referrer=${referrer}',\n    },\n    'triggers': {\n      'trackPageview': {\n        'on': 'visible',\n        'request': 'pageview',\n      },\n    },\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n    },\n  },\n\n  'mediator': {\n    'requests': {\n      'host': '//collector.mediator.media/script/${mediator_id}/amp/',\n      'renderstart': '${host}init/?url=${canonicalUrl}',\n      'prefix': '${host}register/?url=${canonicalUrl}' +\n                '&ref=${documentReferrer}&',\n      'suffix': 'vh=${viewportHeight}&sh=${scrollHeight}&st=${scrollTop}',\n      'pageview': '${prefix}e=v',\n      'timer': '${prefix}e=t&${suffix}',\n      's0': '${prefix}e=s0',\n      's1': '${prefix}e=s1',\n      's2': '${prefix}e=s2',\n      's3': '${prefix}e=s3',\n    },\n    'vars': {\n      'mediator_id': '',\n    },\n    'triggers': {\n      'renderStart': {\n        'on': 'render-start',\n        'request': 'renderstart',\n      },\n      'trackPageview': {\n        'on': 'visible',\n        'request': 'pageview',\n      },\n      'scrollPing0': {\n        'on': 'scroll',\n        'scrollSpec': {\n          'verticalBoundaries': [\n            5,\n          ],\n        },\n        'request': 's0',\n      },\n      'scrollPing1': {\n        'on': 'scroll',\n        'scrollSpec': {\n          'verticalBoundaries': [\n            35,\n          ],\n        },\n        'request': 's1',\n      },\n      'scrollPing2': {\n        'on': 'scroll',\n        'scrollSpec': {\n          'verticalBoundaries': [\n            65,\n          ],\n        },\n        'request': 's2',\n      },\n      'scrollPing3': {\n        'on': 'scroll',\n        'scrollSpec': {\n          'verticalBoundaries': [\n            95,\n          ],\n        },\n        'request': 's3',\n      },\n      'pageTimer': {\n        'on': 'timer',\n        'timerSpec': {\n          'interval': 5,\n          'maxTimerLength': 600,\n          'immediate': false,\n        },\n        'request': 'timer',\n      },\n    },\n  },\n\n  'metrika': {\n    'transport': {'beacon': true, 'xhrpost': true, 'image': false},\n    'requests': {\n      'pageview': '${_watch}?browser-info=${_brInfo}&${_siteInfo}&${_suffix}',\n      'notBounce': '${_watch}?browser-info=ar%3A1%3Anb%3A1%3A${_brInfo}' +\n        '&${_suffix}',\n      'externalLink': '${_watch}?browser-info=ln%3A1%3A${_brInfo}&${_suffix}',\n      'reachGoal': '${_watch}?browser-info=ar%3A1%3A${_brInfo}&${_siteInfo}' +\n        '&${_goalSuffix}',\n      '_domain': 'https://mc.yandex.ru',\n      '_watch': '${_domain}/watch/${counterId}',\n      '_suffix': 'page-url=${sourceUrl}&page-ref=${documentReferrer}',\n      '_goalSuffix': 'page-url=goal%3A%2F%2F${sourceHost}%2F${goalId}' +\n      '&page-ref=${sourceUrl}',\n      '_techInfo': [\n        'amp%3A1%3Az%3A${timezone}%3Ai%3A${timestamp}%3Arn%3A${random}',\n        'la%3A${browserLanguage}%3Aen%3A${documentCharset}',\n        'rqn%3A${requestCount}',\n        's%3A${screenWidth}x${screenHeight}x${screenColorDepth}',\n        'w%3A${availableScreenWidth}x${availableScreenHeight}',\n        'ds%3A${_timings}%3Auid%3A${clientId(_ym_uid)}%3Apvid%3A${pageViewId}',\n      ].join('%3A'),\n      '_timings': [\n        '${domainLookupTime}%2C${tcpConnectTime}',\n        '${serverResponseTime}%2C${pageDownloadTime}',\n        '${redirectTime}%2C${navTiming(redirectStart,redirectEnd)}',\n        '${navRedirectCount}%2C${navTiming(domLoading,domInteractive)}',\n        '${navTiming(domContentLoadedEventStart,domContentLoadedEventEnd)}',\n        '${navTiming(navigationStart,domComplete)}',\n        '${pageLoadTime}%2C${navTiming(loadEventStart,loadEventEnd)}',\n        '${contentLoadTime}',\n      ].join('%2C'),\n      '_brInfo': '${_techInfo}%3A${_title}',\n      '_title': 't%3A${title}',\n      '_siteInfo': 'site-info=${yaParams}',\n    },\n    'triggers': {\n      'pageview': {\n        'on': 'visible',\n        'request': 'pageview',\n      },\n    },\n  },\n\n  'mobify': {\n    'vars': {\n      'projectSlug': 'mobify-project-id',\n      'templateName': 'page-type',\n    },\n    'requests': {\n      '_host': 'https://engagement-collector.mobify.net',\n      '_dimensions': [\n        '%22platform%22%3a%22AMP%22',\n        '%22client_id%22%3a%22${clientId(sandy-client-id)}%22',\n        '%22title%22%3a%22${title}%22',\n        '%22location%22%3a%22${sourceUrl}%22',\n        '%22page%22%3a%22${sourcePath}%22',\n        '%22src_location%22%3a%22${ampdocUrl}%22',\n        '%22referrer%22%3a%22${documentReferrer}%22',\n        '%22templateName%22%3a%22${templateName}%22',\n      ].join('%2c'),\n      '_basePrefix': '${_host}/s.gif?' +\n        'slug=${projectSlug}&' +\n        'timestamp_local=${timestamp}&' +\n        'channel=web&' +\n        'dimensions=%7b${_dimensions}%7d',\n      'ampstart': '${_basePrefix}&data=%7b%22category%22%3a%22timing%22%2c' +\n        '%22action%22%3a%22ampStart%22%2c%22value%22' +\n        '%3a${navTiming(navigationStart,domLoading)}%7d',\n      'pageview': '${_basePrefix}&data=%7b%22action%22%3a%22pageview%22%7d',\n      'pageload': '${_basePrefix}&data=%7b%22category%22%3a%22timing%22%2c' +\n        '%22action%22%3a%22load%22%2c%22value%22%3a${pageLoadTime}%7d',\n      'pagedcl': '${_basePrefix}&data=%7b%22category%22%3a%22timing%22%2c' +\n        '%22action%22%3a%22DOMContentLoaded%22%2c%22value%22' +\n        '%3a${contentLoadTime}%7d',\n    },\n    'triggers': {\n      'triggerName': {\n        'on': 'visible',\n        'request': ['ampstart', 'pageload', 'pagedcl'],\n      },\n      'pageview': {\n        'on': 'ini-load',\n        'request': 'pageview',\n      },\n    },\n    'transport': {\n      'beacon': true,\n      'xhrpost': false,\n      'image': true,\n    },\n  },\n\n  'mparticle': {\n    'vars': {\n      'eventType': 'Unknown',\n      'debug': false,\n      'amp_clientId': 'CLIENT_ID(mparticle_amp_id)',\n    },\n    'requests': {\n      'host': 'https://pixels.mparticle.com',\n      'endpointPath': '/v1/${apiKey}/Pixel',\n      'baseParams': 'et=${eventType}&' +\n          'amp_id=${amp_clientId}&' +\n          'attrs_k=${eventAttributes_Keys}&' +\n          'attrs_v=${eventAttributes_Values}&' +\n          'ua_k=${userAttributes_Keys}&' +\n          'ua_v=${userAttributes_Values}&' +\n          'ui_t=${userIdentities_Types}&' +\n          'ui_v=${userIdentities_Values}&' +\n          'flags_k=${customFlags_Keys}&' +\n          'flags_v=${customFlags_Values}&' +\n          'ct=${timestamp}&' +\n          'dbg=${debug}&' +\n          'lc=${location}&' +\n          'av=${appVersion}',\n      'pageview': '${host}${endpointPath}?' +\n          'dt=ScreenView&' +\n          'n=${canonicalPath}&' +\n          'hn=${ampdocUrl}&' +\n          'ttl=${title}&' +\n          '${baseParams}',\n      'event': '${host}${endpointPath}?' +\n          'dt=AppEvent&' +\n          'n=${eventName}&' +\n          '${baseParams}',\n    },\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n    },\n  },\n\n  'newrelic': {\n    'requests': {\n      'pageview': 'https://${beacon}/amp?appId=${appId}' +\n        '&licenseKey=${licenseKey}' +\n        '&ampUrl=${ampdocUrl}' +\n        '&canonicalUrl=${canonicalUrl}' +\n        '&timeToDomContentLoadedEventEnd=' +\n          '${navTiming(domContentLoadedEventEnd)}' +\n        '&timeToDomInteractive=${navTiming(domInteractive)}' +\n        '&timeToDomComplete=${navTiming(domComplete)}' +\n        '&timeToDomLoading=${navTiming(domLoading)}' +\n        '&timeToResponseStart=${navTiming(responseStart)}' +\n        '&timeToResponseEnd=${navTiming(responseEnd)}' +\n        '&timeToLoadEventStart=${navTiming(loadEventStart)}' +\n        '&timeToLoadEventEnd=${navTiming(loadEventEnd)}' +\n        '&timeToConnectStart=${navTiming(connectStart)}' +\n        '&timeToConnectEnd=${navTiming(connectEnd)}' +\n        '&timeToFetchStart=${navTiming(fetchStart)}' +\n        '&timeToRequestStart=${navTiming(requestStart)}' +\n        '&timeToUnloadEventStart=${navTiming(unloadEventStart)}' +\n        '&timeToUnloadEventEnd=${navTiming(unloadEventEnd)}' +\n        '&timeToDomainLookupStart=${navTiming(domainLookupStart)}' +\n        '&timeToDomainLookupEnd=${navTiming(domainLookupEnd)}' +\n        '&timeToRedirectStart=${navTiming(redirectStart)}' +\n        '&timeToRedirectEnd=${navTiming(redirectEnd)}' +\n        '&timeToSecureConnection=${navTiming(secureConnectionStart)}' +\n        '&timestamp=${timestamp}' +\n        '&ampVersion=${ampVersion}' +\n        '&pageLoadTime=${pageLoadTime}',\n    },\n    'vars': {\n      'beacon': 'bam.nr-data.net',\n      'appId': [],\n      'licenseKey': '',\n    },\n    'triggers': {\n      'trackPageview': {\n        'on': 'ini-load',\n        'request': 'pageview',\n      },\n    },\n  },\n\n  'nielsen': {\n    'vars': {\n      'sessionId': 'CLIENT_ID(imrworldwide)',\n      'prefix': '',\n    },\n    'requests': {\n      'session': 'https://${prefix}uaid-linkage.imrworldwide.com/cgi-bin/gn?prd=session&c13=asid,P${apid}&sessionId=${sessionId}_${pageViewId}&pingtype=4&enc=false&c61=createtm,${timestamp}&rnd=${random}',\n      'cloudapi': 'https://${prefix}cloudapi.imrworldwide.com/nmapi/v2/${apid}/${sessionId}_${pageViewId}/a?b=%7B%22devInfo%22%3A%7B%22devId%22%3A%22${sessionId}_${pageViewId}%22%2C%22apn%22%3A%22${apn}%22%2C%22apv%22%3A%22${apv}%22%2C%22apid%22%3A%22${apid}%22%7D%2C%22metadata%22%3A%7B%22static%22%3A%7B%22type%22%3A%22static%22%2C%22section%22%3A%22${section}%22%2C%22assetid%22%3A%22${pageViewId}%22%2C%22segA%22%3A%22${segA}%22%2C%22segB%22%3A%22${segB}%22%2C%22segC%22%3A%22${segC}%22%2C%22adModel%22%3A%220%22%2C%22dataSrc%22%3A%22cms%22%7D%2C%22content%22%3A%7B%7D%2C%22ad%22%3A%7B%7D%7D%2C%22event%22%3A%22playhead%22%2C%22position%22%3A%22${timestamp}%22%2C%22data%22%3A%7B%22hidden%22%3A%22${backgroundState}%22%2C%22blur%22%3A%22${backgroundState}%22%2C%22position%22%3A%22${timestamp}%22%7D%2C%22type%22%3A%22static%22%2C%22utc%22%3A%22${timestamp}%22%2C%22index%22%3A%22${requestCount}%22%7D',\n    },\n    'triggers': {\n      'visible': {\n        'on': 'visible',\n        'request': ['session', 'cloudapi'],\n      },\n      'hidden': {\n        'on': 'hidden',\n        'request': 'cloudapi',\n      },\n      'duration': {\n        'on': 'timer',\n        'timerSpec': {\n          'interval': 10,\n          'maxTimerLength': 86400,\n          'immediate': false,\n        },\n        'request': 'cloudapi',\n      },\n    },\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n      'referrerPolicy': 'no-referrer',\n    },\n  },\n\n  'nielsen-marketing-cloud': {\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n    },\n    'vars': {\n      'pubId': '',\n      'siteId': '',\n    },\n    'requests': {\n      'host': 'loadeu.exelator.com',\n      'pathPrefix': 'load/',\n      'trackurl': 'https://${host}/${pathPrefix}?p=${pubId}&g=${siteId}&j=0',\n    },\n    'triggers': {\n      'defaultPageview': {\n        'on': 'visible',\n        'request': 'trackurl',\n      },\n    },\n  },\n\n  'oewadirect': {\n    'transport': {'beacon': false, 'xhrpost': false, 'image': true},\n    'requests': {\n      'pageview': 'https://${s}.oewabox.at/j0=,,,r=${canonicalUrl};+,amp=1+cp=${cp}+ssl=1+hn=${canonicalHost};;;?lt=${pageViewId}&x=${screenWidth}x${screenHeight}x24&c=CLIENT_ID(oewa)',\n    },\n    'triggers': {\n      'pageview': {\n        'on': 'visible',\n        'request': 'pageview',\n      },\n    },\n  },\n\n  'oewa': {\n    'transport': {'beacon': false, 'xhrpost': false, 'image': true},\n    'requests': {\n      'pageview': '${url}?s=${s}' +\n        '&amp=1' +\n        '&cp=${cp}' +\n        '&host=${canonicalHost}' +\n        '&path=${canonicalPath}',\n    },\n    'triggers': {\n      'pageview': {\n        'on': 'visible',\n        'request': 'pageview',\n      },\n    },\n  },\n  'parsely': {\n    'requests': {\n      'host': 'https://srv.pixel.parsely.com',\n      'basePrefix': '${host}/plogger/?' +\n        'rand=${timestamp}&' +\n        'idsite=${apikey}&' +\n        'url=${ampdocUrl}&' +\n        'urlref=${documentReferrer}&' +\n        'screen=${screenWidth}x${screenHeight}%7C' +\n          '${availableScreenWidth}x${availableScreenHeight}%7C' +\n          '${screenColorDepth}&' +\n        'title=${title}&' +\n        'date=${timestamp}&' +\n        'ampid=${clientId(_parsely_visitor)}',\n      'pageview': '${basePrefix}&action=pageview',\n      'heartbeat': '${basePrefix}&action=heartbeat' +\n      '&tt=${totalEngagedTime}&inc=${incrementalEngagedTime(parsely-js)}',\n    },\n    'triggers': {\n      'defaultPageview': {\n        'on': 'visible',\n        'request': 'pageview',\n      },\n      'defaultHeartbeat': {\n        'on': 'timer',\n        'enabled': '${incrementalEngagedTime(parsely-js,false)}',\n        'timerSpec': {\n          'interval': 10,\n          'maxTimerLength': 7200,\n        },\n        'request': 'heartbeat',\n      },\n    },\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n    },\n  },\n\n  'piano': {\n    'requests': {\n      'host': 'https://api-v3.tinypass.com',\n      'basePrefix': '/api/v3',\n      'baseSuffix': '&pageview_id=${pageViewId}&rand=${random}&' +\n        'amp_client_id=${clientId}&aid=${aid}',\n      'pageview': '${host}${basePrefix}/page/track?url=${canonicalUrl}&' +\n        'referer=${documentReferrer}&content_created=${contentCreated}&' +\n        'content_author=${contentAuthor}&content_section=${contentSection}&' +\n        'timezone_offset=${timezone}&tags=${tags}&amp_url=${ampdocUrl}&' +\n        'screen=${screenWidth}x${screenHeight}${baseSuffix}',\n    },\n  },\n\n  'piStats': {\n    'requests': {\n      'host': 'https://events.pi-stats.com',\n      'basePrefix': '${host}/eventsamp/?' +\n          'e=PageLoad&' +\n          'pid=${property}&' +\n          'url=${ampdocUrl}&' +\n          'cnt=${cntId}&' +\n          'lang=${language}&' +\n          'ref=${documentReferrer}&' +\n          'id=${clientId(piStatsDEVICEID)}&' +\n          'ua=${userAgent}&' +\n          'ctype=web&' +\n          'blang=${browserLanguage}&' +\n          'v=2.0&' +\n          'dist=Javascript',\n      'pageview': '${basePrefix}&eventtype=pageview',\n    },\n    'triggers': {\n      'defaultPageview': {\n        'on': 'visible',\n        'request': 'pageview',\n      },\n    },\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n    },\n  },\n\n  'quantcast': {\n    'vars': {\n      'labels': '',\n    },\n    'requests': {\n      'host': 'https://pixel.quantserve.com/pixel',\n      'pageview': '${host};r=${random};a=${pcode};labels=${labels};' +\n        'fpan=;fpa=${clientId(__qca)};ns=0;ce=1;cm=;je=0;' +\n        'sr=${screenWidth}x${screenHeight}x${screenColorDepth};' +\n        'enc=n;et=${timestamp};ref=${documentReferrer};url=${canonicalUrl}',\n    },\n    'triggers': {\n      'defaultPageview': {\n        'on': 'visible',\n        'request': 'pageview',\n      },\n    },\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n    },\n  },\n\n  'adobeanalytics': {\n    'transport': {'xhrpost': false, 'beacon': false, 'image': true},\n    'vars': {\n      'pageName': 'TITLE',\n      'host': '',\n      'reportSuites': '',\n      'linkType': 'o',\n      'linkUrl': '',\n      'linkName': '',\n    },\n    'requests': {\n      'requestPath': '/b/ss/${reportSuites}/0/amp-1.0/s${random}',\n      // vid starts with z to work around #2198\n      'basePrefix': 'vid=z${clientId(adobe_amp_id)}' +\n          '&ndh=0' +\n          '&ce=${documentCharset}' +\n          '&pageName=${pageName}' +\n          '&g=${ampdocUrl}' +\n          '&r=${documentReferrer}' +\n          '&bh=${availableScreenHeight}' +\n          '&bw=${availableScreenWidth}' +\n          '&c=${screenColorDepth}' +\n          '&j=amp' +\n          '&s=${screenWidth}x${screenHeight}',\n      'pageview': 'https://${host}${requestPath}?${basePrefix}',\n      'click': 'https://${host}${requestPath}?${basePrefix}&pe=lnk_${linkType}&pev1=${linkUrl}&pev2=${linkName}',\n    },\n  },\n\n  'adobeanalytics_nativeConfig': {\n    'triggers': {\n      'pageLoad': {\n        'on': 'visible',\n        'request': 'iframeMessage',\n      },\n    },\n  },\n\n  'infonline': {\n    'vars': {\n      'sv': 'ke',\n      'ap': '1',\n    },\n    'transport': {'beacon': false, 'xhrpost': false, 'image': true},\n    'requests': {\n      'pageview': '${url}?st=${st}' +\n        '&sv=${sv}' +\n        '&ap=${ap}' +\n        '&co=${co}' +\n        '&cp=${cp}' +\n        '&host=${canonicalHost}' +\n        '&path=${canonicalPath}',\n    },\n    'triggers': {\n      'pageview': {\n        'on': 'visible',\n        'request': 'pageview',\n      },\n    },\n  },\n  'simplereach': {\n    'vars': {\n      'pid': '',\n      'published_at': '',\n      'authors': [],\n      'channels': [],\n      'tags': [],\n    },\n    'requests': {\n      'host': 'https://edge.simplereach.com',\n      'baseParams': 'amp=true' +\n        '&pid=${pid}' +\n        '&title=${title}' +\n        '&url=${canonicalUrl}' +\n        '&date=${published_at}' +\n        '&authors=${authors}' +\n        '&channels=${categories}' +\n        '&tags=${tags}' +\n        '&referrer=${documentReferrer}' +\n        '&page_url=${sourceUrl}' +\n        '&user_id=${clientId(sr_amp_id)}' +\n        '&domain=${canonicalHost}' +\n        '&article_id=${article_id}' +\n        '&ignore_metadata=${ignore_metadata}',\n      'visible': '${host}/n?${baseParams}',\n      'timer': '${host}/t?${baseParams}' +\n        '&t=5000' +\n        '&e=5000',\n    },\n    'triggers': {\n      'visible': {\n        'on': 'visible',\n        'request': 'visible',\n      },\n      'timer': {\n        'on': 'timer',\n        'timerSpec': {\n          'interval': 5,\n          'maxTimerLength': 1200,\n        },\n        'request': 'timer',\n      },\n    },\n  },\n\n  'segment': {\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n    },\n    'vars': {\n      'anonymousId': 'CLIENT_ID(segment_amp_id)',\n    },\n    'requests': {\n      'host': 'https://api.segment.io/v1/pixel',\n      'base': '?writeKey=${writeKey}' +\n        '&context.library.name=amp' +\n        '&anonymousId=${anonymousId}' +\n        '&context.locale=${browserLanguage}' +\n        '&context.page.path=${canonicalPath}' +\n        '&context.page.url=${canonicalUrl}' +\n        '&context.page.referrer=${documentReferrer}' +\n        '&context.page.title=${title}' +\n        '&context.screen.width=${screenWidth}' +\n        '&context.screen.height=${screenHeight}',\n      'page': '${host}/page${base}&name=${name}',\n      'track': '${host}/track${base}&event=${event}',\n    },\n    'triggers': {\n      'page': {\n        'on': 'visible',\n        'request': 'page',\n      },\n    },\n  },\n\n  'shinystat': {\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n    },\n    'requests': {\n      'base': 'https://amp.shinystat.com/cgi-bin/shinyamp.cgi',\n      'commpar': 'AMP=1&RM=${random}' +\n                 '&USER=${account}' +\n                 '&PAG=${page}' +\n                 '&HR=${sourceUrl}' +\n                 '&REFER=${documentReferrer}' +\n                 '&RES=${screenWidth}X${screenHeight}' +\n                 '&COLOR=${screenColorDepth}' +\n                 '&CID=${clientId(AMP_CID)}' +\n                 '&PAGID=${pageViewId}' +\n                 '&TITL=${title}' +\n                 '&RQC=${requestCount}',\n      'pagepar': '&VIE=${viewer}' +\n                 '&PLT=${pageLoadTime}',\n      'eventpar': '&SSXL=1',\n      'linkpar': '&LINK=${outboundLink}',\n      'pageview': '${base}?${commpar}${pagepar}',\n      'event': '${base}?${commpar}${eventpar}',\n      'link': '${base}?${commpar}${linkpar}',\n    },\n    'triggers': {\n      'pageview': {\n        'on': 'visible',\n        'request': 'pageview',\n      },\n    },\n  },\n\n  'snowplow': {\n    'vars': {\n      'duid': 'CLIENT_ID(_sp_id)',\n    },\n    'requests': {\n      'aaVersion': 'amp-0.2',\n      'basePrefix': 'https://${collectorHost}/i?url=${canonicalUrl}&page=${title}&' +\n          'res=${screenWidth}x${screenHeight}&stm=${timestamp}&' +\n          'tz=${timezone}&aid=${appId}&p=web&tv=${aaVersion}&' +\n          'cd=${screenColorDepth}&cs=${documentCharset}&' +\n          'duid=${duid}&' +\n          'lang=${browserLanguage}&refr=${documentReferrer}&stm=${timezone}&' +\n          'vp=${viewportWidth}x${viewportHeight}',\n      'pageView': '${basePrefix}&e=pv',\n      'structEvent': '${basePrefix}&e=se&' +\n          'se_ca=${structEventCategory}&se_ac=${structEventAction}&' +\n          'se_la=${structEventLabel}&se_pr=${structEventProperty}&' +\n          'se_va=${structEventValue}',\n    },\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n    },\n  },\n\n  'top100': {\n    'vars': {\n      'pid': '',\n      'rid': 'PAGE_VIEW_ID',\n      'ruid': 'CLIENT_ID(ruid)',\n      'version': '1.0.0',\n    },\n    'requests': {\n      'host': 'https://kraken.rambler.ru',\n      'base': '${host}/cnt/?pid=${pid}' +\n                          '&rid=${rid}' +\n                          '&v=${version}' +\n                          '&rn=${random}' +\n                          '&ruid=${ruid}' +\n                          '&ct=amp',\n      'pageview': '${base}&et=pv' +\n                  '${_pageData}' +\n                  '${_screenData}',\n      '_screenData': '&sr=${screenWidth}x${screenHeight}' +\n                     '&cd=${screenColorDepth}-bit' +\n                     '&bs=${scrollWidth}x${scrollHeight}',\n      '_pageData': '&pt=${title}' +\n                   '&rf=${documentReferrer}' +\n                   '&en=${documentCharset}' +\n                   '&la=${browserLanguage}' +\n                   '&tz=${timezone}',\n    },\n    'triggers': {\n      'trackPageview': {\n        'on': 'visible',\n        'request': 'pageview',\n      },\n    },\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n    },\n  },\n\n  'treasuredata': {\n    'vars': {\n      'host': 'in.treasuredata.com',\n      'writeKey': '',\n      'database': '',\n      'table': 'events',\n    },\n    'requests': {\n      'base': 'https://${host}/postback/v3/event/${database}',\n      'baseParams': 'td_write_key=${writeKey}' +\n        '&td_global_id=td_global_id' +\n        '&td_client_id=CLIENT_ID(_td)' +\n        '&td_charset=DOCUMENT_CHARSET' +\n        '&td_language=BROWSER_LANGUAGE' +\n        '&td_color=SCREEN_COLOR_DEPTH' +\n        '&td_screen=${screenWidth}x${scrollHeight}' +\n        '&td_viewport=${availableScreenWidth}x${availableScreenHeight}' +\n        '&td_title=TITLE' +\n        '&td_url=SOURCE_URL' +\n        '&td_user_agent=USER_AGENT' +\n        '&td_host=SOURCE_HOST' +\n        '&td_path=SOURCE_PATH' +\n        '&td_referrer=DOCUMENT_REFERRER' +\n        '&td_ip=td_ip',\n      'pageview': '${base}/${table}?${baseParams}',\n      'event': '${base}/${table}?${baseParams}',\n    },\n  },\n\n  'webtrekk': {\n    'requests': {\n      'trackURL': 'https://${trackDomain}/${trackId}/wt',\n      'parameterPrefix': '?p=432,${contentId},1,' +\n        '${screenWidth}x${screenHeight},${screenColorDepth},1,' +\n        '${timestamp},${documentReferrer},${viewportWidth}x' +\n        '${viewportHeight},0&tz=${timezone}' +\n        '&eid=${clientId(amp-wt3-eid)}&la=${browserLanguage}',\n      'parameterSuffix': '&pu=${sourceUrl}',\n      'pageParameter': '&cp1=${pageParameter1}' +\n        '&cp2=${pageParameter2}&cp3=${pageParameter3}' +\n        '&cp4=${pageParameter4}&cp5=${pageParameter5}' +\n        '&cp6=${pageParameter6}&cp7=${pageParameter7}' +\n        '&cp8=${pageParameter8}&cp9=${pageParameter9}' +\n        '&cp10=${pageParameter10}',\n      'pageCategories': '&cg1=${pageCategory1}' +\n        '&cg2=${pageCategory2}&cg3=${pageCategory3}' +\n        '&cg4=${pageCategory4}&cg5=${pageCategory5}' +\n        '&cg6=${pageCategory6}&cg7=${pageCategory7}' +\n        '&cg8=${pageCategory8}&cg9=${pageCategory9}' +\n        '&cg10=${pageCategory10}',\n      'pageview': '${trackURL}${parameterPrefix}${pageParameter}' +\n        '${pageCategories}${parameterSuffix}',\n      'actionParameter': '&ck1=${actionParameter1}' +\n        '&ck2=${actionParameter2}&ck3=${actionParameter3}' +\n        '&ck4=${actionParameter4}&ck5=${actionParameter5}',\n      'event': '${trackURL}${parameterPrefix}&ct=${actionName}' +\n        '${actionParameter}${parameterSuffix}',\n    },\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n    },\n  },\n\n  'webtrekk_v2': {\n    'vars': {\n      'actionName': 'webtrekk_ignore',\n      'contentId': '${title}',\n      'mediaName': '${id}',\n      'everId': '${clientId(amp-wt3-eid)}',\n    },\n    'requests': {\n      'trackURL': 'https://${trackDomain}/${trackId}/wt',\n      'basePrefix': '?p=440,${contentId},1,' +\n        '${screenWidth}x${screenHeight},${screenColorDepth},1,',\n      'baseSuffix': ',${documentReferrer},' +\n        '${viewportWidth}x${viewportHeight},0' +\n        '&tz=${timezone}&eid=${everId}&la=${browserLanguage}',\n      'parameterPrefix': '${basePrefix}${timestamp}${baseSuffix}',\n      'parameterSuffix': '&pu=${sourceUrl}&eor=1',\n      'pageview': '${trackURL}${parameterPrefix}&${extraUrlParams}' +\n        '&cp570=${pageLoadTime}${parameterSuffix}',\n      'event': '${trackURL}${parameterPrefix}&ct=${actionName}' +\n        '&${extraUrlParams}${parameterSuffix}',\n      'scroll': '${trackURL}${parameterPrefix}&ct=${actionName}' +\n        '&ck540=${verticalScrollBoundary}${parameterSuffix}',\n      'mediaPrefix': '${trackURL}${basePrefix}${baseSuffix}' +\n        '&mi=${mediaName}',\n      'mediaSuffix': '&mt1=${currentTime}&mt2=${duration}' +\n        '&${extraUrlParams}${parameterSuffix}&x=${playedTotal}',\n      'mediaPlay': '${mediaPrefix}&mk=play${mediaSuffix}',\n      'mediaPause': '${mediaPrefix}&mk=pause${mediaSuffix}',\n      'mediaPosition': '${mediaPrefix}&mk=pos${mediaSuffix}',\n      'mediaEnded': '${mediaPrefix}&mk=eof${mediaSuffix}',\n    },\n    'extraUrlParamsReplaceMap': {\n      'pageParameter': 'cp',\n      'contentGroup': 'cg',\n      'actionParameter': 'ck',\n      'sessionParameter': 'cs',\n      'ecommerceParameter': 'cb',\n      'urmCategory': 'uc',\n      'campaignParameter': 'cc',\n      'mediaCategory': 'mg',\n    },\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n    },\n  },\n\n  'mpulse': {\n    'requests': {\n      'onvisible': 'https://${beacon_url}?' +\n        'h.d=${h.d}' +\n        '&h.key=${h.key}' +\n        '&h.t=${h.t}' +\n        '&h.cr=${h.cr}' +\n        '&rt.start=navigation' +\n        '&rt.si=${clientId(amp_mpulse)}' +\n        '&rt.ss=${timestamp}' +\n        '&rt.end=${timestamp}' +\n        '&t_resp=${navTiming(navigationStart,responseStart)}' +\n        '&t_page=${navTiming(responseStart,loadEventStart)}' +\n        '&t_done=${navTiming(navigationStart,loadEventStart)}' +\n        '&nt_nav_type=${navType}' +\n        '&nt_red_cnt=${navRedirectCount}' +\n        '&nt_nav_st=${navTiming(navigationStart)}' +\n        '&nt_red_st=${navTiming(redirectStart)}' +\n        '&nt_red_end=${navTiming(redirectEnd)}' +\n        '&nt_fet_st=${navTiming(fetchStart)}' +\n        '&nt_dns_st=${navTiming(domainLookupStart)}' +\n        '&nt_dns_end=${navTiming(domainLookupEnd)}' +\n        '&nt_con_st=${navTiming(connectStart)}' +\n        '&nt_ssl_st=${navTiming(secureConnectionStart)}' +\n        '&nt_con_end=${navTiming(connectEnd)}' +\n        '&nt_req_st=${navTiming(requestStart)}' +\n        '&nt_res_st=${navTiming(responseStart)}' +\n        '&nt_unload_st=${navTiming(unloadEventStart)}' +\n        '&nt_unload_end=${navTiming(unloadEventEnd)}' +\n        '&nt_domloading=${navTiming(domLoading)}' +\n        '&nt_res_end=${navTiming(responseEnd)}' +\n        '&nt_domint=${navTiming(domInteractive)}' +\n        '&nt_domcontloaded_st=${navTiming(domContentLoadedEventStart)}' +\n        '&nt_domcontloaded_end=${navTiming(domContentLoadedEventEnd)}' +\n        '&nt_domcomp=${navTiming(domComplete)}' +\n        '&nt_load_st=${navTiming(loadEventStart)}' +\n        '&nt_load_end=${navTiming(loadEventEnd)}' +\n        '&v=1' +\n        '&http.initiator=amp' +\n        '&u=${sourceUrl}' +\n        '&amp.u=${ampdocUrl}' +\n        '&r2=${documentReferrer}' +\n        '&scr.xy=${screenWidth}x${screenHeight}',\n    },\n\n    'triggers': {\n      'onvisible': {\n        'on': 'visible',\n        'request': 'onvisible',\n      },\n    },\n\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n    },\n\n    'extraUrlParamsReplaceMap': {\n      'ab_test': 'h.ab',\n      'page_group': 'h.pg',\n      'custom_dimension.': 'cdim.',\n      'custom_metric.': 'cmet.',\n    },\n  },\n\n  'linkpulse': {\n    'vars': {\n      'id': '',\n      'pageUrl': 'CANONICAL_URL',\n      'title': 'TITLE',\n      'section': '',\n      'channel': 'amp',\n      'type': '',\n      'host': 'pp.lp4.io',\n      'empty': '',\n    },\n    'requests': {\n      'base': 'https://${host}',\n      'pageview': '${base}/p?i=${id}' +\n                '&r=${documentReferrer}' +\n                '&p=${pageUrl}' +\n                '&s=${section}' +\n                '&t=${type}' +\n                '&c=${channel}' +\n                '&mt=${title}' +\n                '&_t=amp' +\n                '&_r=${random}',\n      'pageload': '${base}/pl?i=${id}' +\n                '&ct=${domInteractiveTime}' +\n                '&rt=${pageDownloadTime}' +\n                '&pt=${pageLoadTime}' +\n                '&p=${pageUrl}' +\n                '&c=${channel}' +\n                '&t=${type}' +\n                '&s=${section}' +\n                '&_t=amp' +\n                '&_r=${random}',\n      'ping': '${base}/u?i=${id}' +\n                '&u=${clientId(_lp4_u)}' +\n                '&p=${pageUrl}' +\n                '&uActive=true' +\n                '&isPing=yes' +\n                '&c=${channel}' +\n                '&t=${type}' +\n                '&s=${section}' +\n                '&_t=amp' +\n                '&_r=${random}',\n    },\n    'triggers': {\n      'pageview': {\n        'on': 'visible',\n        'request': 'pageview',\n      },\n      'pageload': {\n        'on': 'visible',\n        'request': 'pageload',\n      },\n      'ping': {\n        'on': 'timer',\n        'timerSpec': {\n          'interval': 30,\n          'maxTimerLength': 7200,\n        },\n        'request': 'ping',\n\n      },\n    },\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n    },\n  },\n  'rakam': {\n    'vars': {\n      'deviceId': 'CLIENT_ID(rakam_device_id)',\n    },\n    'requests': {\n      'base': '?api.api_key=${writeKey}' +\n        '&prop._platform=amp' +\n        '&prop._device_id=${deviceId}' +\n        '&prop.locale=${browserLanguage}' +\n        '&prop.path=${canonicalPath}' +\n        '&prop.url=${canonicalUrl}' +\n        '&prop.color_depth=${screenColorDepth}' +\n        '&prop._referrer=${documentReferrer}' +\n        '&prop.title=${title}' +\n        '&prop.timezone=${timezone}' +\n        '&prop._time=${timestamp}' +\n        '&prop.resolution=${screenWidth} × ${screenHeight}',\n      'pageview': 'https://${apiEndpoint}/event/pixel${base}&collection=${pageViewName}',\n      'custom': 'https://${apiEndpoint}/event/pixel${base}&collection=${collection}',\n    },\n  },\n  'ibeatanalytics': {\n    'requests': {\n      'host': 'https://ibeat.indiatimes.com',\n      'base': 'https://ibeat.indiatimes.com/iBeat/pageTrendlogAmp.html',\n      'pageview': '${base}?' +\n                '&h=${h}' +\n                '&d=${h}' +\n                '&url=${url}' +\n                '&k=${key}' +\n                '&ts=${time}' +\n                '&ch=${channel}' +\n                '&sid=${uid}' +\n                '&at=${agentType}' +\n                '&ref=${documentReferrer}' +\n                '&aid=${aid}' +\n                '&loc=1' +\n                '&ct=1' +\n                '&cat=${cat}' +\n                '&scat=${scat}' +\n                '&ac=1' +\n                '&tg=${tags}' +\n                '&ctids=${catIds}' +\n                '&pts=${pagePublishTime}' +\n                '&auth=${author}' +\n                '&pos=${position}' +\n                '&iBeatField=${ibeatFields}' +\n                '&cid=${clientId(MSCSAuthDetails)}',\n    },\n    'triggers': {\n      'defaultPageview': {\n        'on': 'visible',\n        'request': 'pageview',\n      },\n    },\n  },\n\n  'topmailru': {\n    'transport': {\n      'beacon': false,\n      'xhrpost': false,\n      'image': true,\n    },\n    'vars': {\n      'url': '${sourceUrl}',\n      'referrer': '${documentReferrer}',\n    },\n    'requests': {\n      'pageView': '${_domain}/counter?${_basicMessage};title=${title}',\n      'reachGoal': '${_domain}/tracker?${_basicMessage};title=${title}' +\n                   ';e=RG%3A${value}%2F${goal}',\n      'sendEvent': '${_domain}/tracker?${_basicMessage}' +\n                   ';e=CE%3A${value}%2F${category}%3B${action}%3B${label}',\n      '_domain': 'https://top-fwz1.mail.ru',\n      '_basicMessage': 'js=13;id=${id};u=${url};r=${referrer}' +\n                       ';s=${screenWidth}*${screenHeight}' +\n                       ';vp=${viewportWidth}*${viewportHeight}' +\n                       ';st=${start};gender=${gender};age=${age}' +\n                       ';pid=${pid};userid=${userid};device=${device}' +\n                       ';params=${params};_=${random}',\n    },\n    'triggers': {\n      'pageView': {\n        'on': 'visible',\n        'request': 'pageView',\n      },\n    },\n  },\n\n  'moat': {\n    'vars': {\n      'element': ':root',\n    },\n    'requests': {\n      'load': JSON.stringify(/** @type {!JsonObject} */ ({\n        'type': 'load',\n        'pcode': '${pcode}',\n        'l0t': '${l0t}',\n        'acctType': '${acctType}',\n        'adType': '${adType}',\n        'qs': '${qs}',\n        'element': {\n          'src': '${htmlAttr(img,src,width)}',\n          'viewer': '${viewer}',\n        },\n        'document': {\n          'AMPDocumentHostname': '${ampdocHostname}',\n          'AMPDocumentURL': '${ampdocUrl}',\n          'canonicalHost': '${canonicalHost}',\n          'canonicalHostname': '${canonicalHostname}',\n          'canonicalPath': '${canonicalPath}',\n          'canonicalURL': '${canonicalUrl}',\n          'documentCharset': '${documentCharset}',\n          'documentReferrer': '${documentReferrer}',\n          'externalReferrer': '${externalReferrer}',\n          'sourceURL': '${sourceUrl}',\n          'sourceHost': '${sourceHost}',\n          'sourceHostname': '${sourceHostname}',\n          'sourcePath': '${sourcePath}',\n          'title': '${title}',\n          'viewer': '${viewer}',\n        },\n        'device': {\n          'availableScreenHeight': '${availableScreenHeight}',\n          'availableScreenWidth': '${availableScreenWidth}',\n          'browserLanguage': '${browserLanguage}',\n          'screenColorDepth': '${screenColorDepth}',\n          'screenHeight': '${screenHeight}',\n          'screenWidth': '${screenWidth}',\n          'scrollHeight': '${scrollHeight}',\n          'scrollWidth': '${scrollWidth}',\n          'scrollLeft': '${scrollLeft}',\n          'scrollTop': '${scrollTop}',\n          'timezone': '${timezone}',\n          'userAgent': '${userAgent}',\n          'viewportHeight': '${viewportHeight}',\n          'viewportWidth': '${viewportWidth}',\n        },\n        'requestCount': '${requestCount}',\n        'timeStamp': '${timestamp}',\n      })),\n      'unload': JSON.stringify(/** @type {!JsonObject} */ ({\n        'type': 'unload',\n        'pcode': '${pcode}',\n        'l0t': '${l0t}',\n        'requestCount': '${requestCount}',\n        'timeStamp': '${timestamp}',\n      })),\n      'click': JSON.stringify(/** @type {!JsonObject} */ ({\n        'type': 'click',\n        'pcode': '${pcode}',\n        'l0t': '${l0t}',\n        'requestCount': '${requestCount}',\n        'timeStamp': '${timestamp}',\n      })),\n      'viewability': JSON.stringify(/** @type {!JsonObject} */ ({\n        'type': 'viewability',\n        'pcode': '${pcode}',\n        'l0t': '${l0t}',\n        'backgroundState': '${backgroundState}',\n        'intersectionRect': '${intersectionRect}',\n        'intersectionRatio': '${intersectionRatio}',\n        'maxVisiblePercentage': '${maxVisiblePercentage}',\n        'minVisiblePercentage': '${minVisiblePercentage}',\n        'x': '${elementX}',\n        'y': '${elementY}',\n        'height': '${elementHeight}',\n        'width': '${elementWidth}',\n        'viewportHeight': '${viewportHeight}',\n        'viewportWidth': '${viewportWidth}',\n        'opacity': '${opacity}',\n        'timeStamp': '${timestamp}',\n        'requestCount': '${requestCount}',\n      })),\n      'iframe': JSON.stringify(/** @type {!JsonObject} */ ({\n        'type': 'iframe',\n        'pcode': '${pcode}',\n        'height': '${elementHeight}',\n        'width': '${elementWidth}',\n        'x': '${elementX}',\n        'y': '${elementY}',\n        'requestCount': '${requestCount}',\n      })),\n    },\n    'triggers': {\n      'load': {\n        'on': 'ini-load',\n        'request': 'load',\n      },\n      'unload': {\n        'on': 'ad-refresh',\n        'selector': '${element}',\n        'request': 'unload',\n      },\n      'click': {\n        'on': 'click',\n        'selector': '${element}',\n        'request': 'click',\n      },\n      'viewability': {\n        'on': 'visible',\n        'selector': '${element}',\n        'request': 'viewability',\n        'visibilitySpec': {\n          'repeat': true,\n          'visiblePercentageThresholds': [\n            [0,0],[0,5],[5,10],[10,15],[15,20],[20,25],\n            [25,30],[30,35],[35,40],[40,45],[45,50],\n            [50,55],[55,60],[60,65],[65,70],[70,75],\n            [75,80],[80,85],[85,90],[90,95],[95,100],[100,100],\n          ],\n        },\n      },\n      'iframe': {\n        'on': 'visible',\n        'selector': ':root',\n        'request': 'iframe',\n        'visibilitySpec': {\n          'repeat': true,\n          'visiblePercentageThresholds': [[0,0]],\n        },\n      },\n    },\n  },\n\n  'bg': {\n  },\n});\n\nANALYTICS_CONFIG['infonline']['triggers']['pageview']['iframe' +\n/* TEMPORARY EXCEPTION */ 'Ping'] = true;\n\nANALYTICS_CONFIG['adobeanalytics_nativeConfig']\n    ['triggers']['pageLoad']['iframe' +\n    /* TEMPORARY EXCEPTION */ 'Ping'] = true;\n\nANALYTICS_CONFIG['oewa']['triggers']['pageview']['iframe' +\n/* TEMPORARY EXCEPTION */ 'Ping'] = true;\n\nmergeIframeTransportConfig(ANALYTICS_CONFIG, IFRAME_TRANSPORTS);\n\n/**\n * Merges iframe transport config.\n *\n * @param {!JsonObject} config\n * @param {!JsonObject} iframeTransportConfig\n */\nfunction mergeIframeTransportConfig(config, iframeTransportConfig) {\n  for (const vendor in iframeTransportConfig) {\n    if (hasOwn(iframeTransportConfig, vendor)) {\n      const url = iframeTransportConfig[vendor];\n      config[vendor]['transport'] =\n          Object.assign({}, config[vendor]['transport'], {'iframe': url});\n    }\n  }\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  DEFAULT_THRESHOLD,\n  IntersectionObserverPolyfill,\n  nativeIntersectionObserverSupported,\n} from '../../../src/intersection-observer-polyfill';\nimport {Services} from '../../../src/services';\nimport {VisibilityModel} from './visibility-model';\nimport {dev, user} from '../../../src/log';\nimport {getMode} from '../../../src/mode';\nimport {isArray, isFiniteNumber} from '../../../src/types';\nimport {layoutRectLtwh} from '../../../src/layout-rect';\nimport {map} from '../../../src/utils/object';\n\nconst TAG = 'VISIBILITY-MANAGER';\n\nconst VISIBILITY_ID_PROP = '__AMP_VIS_ID';\n\n/** @type {number} */\nlet visibilityIdCounter = 1;\n\n\n/**\n * @param {!Element} element\n * @return {number}\n */\nfunction getElementId(element) {\n  let id = element[VISIBILITY_ID_PROP];\n  if (!id) {\n    id = ++visibilityIdCounter;\n    element[VISIBILITY_ID_PROP] = id;\n  }\n  return id;\n}\n\n\n/**\n * A base class for `VisibilityManagerForDoc` and `VisibilityManagerForEmbed`.\n * The instance of this class corresponds 1:1 to `AnalyticsRoot`. It represents\n * a collection of all visibility triggers declared within the `AnalyticsRoot`.\n * @implements {../../../src/service.Disposable}\n * @abstract\n */\nexport class VisibilityManager {\n  /**\n   * @param {?VisibilityManager} parent\n   * @param {!../../../src/service/ampdoc-impl.AmpDoc} ampdoc\n   */\n  constructor(parent, ampdoc) {\n    /** @const @protected */\n    this.parent = parent;\n\n    /** @const @protected */\n    this.ampdoc = ampdoc;\n\n    /** @const @private */\n    this.resources_ = Services.resourcesForDoc(ampdoc);\n\n    /** @private {number} */\n    this.rootVisibility_ = 0;\n\n    /** @const @private {!Array<!VisibilityModel>}> */\n    this.models_ = [];\n\n    /** @private {?Array<!VisibilityManager>} */\n    this.children_ = null;\n\n    /** @const @private {!Array<!UnlistenDef>} */\n    this.unsubscribe_ = [];\n\n    if (this.parent) {\n      this.parent.addChild_(this);\n    }\n  }\n\n  /**\n   * @param {!VisibilityManager} child\n   * @private\n   */\n  addChild_(child) {\n    if (!this.children_) {\n      this.children_ = [];\n    }\n    this.children_.push(child);\n  }\n\n  /**\n   * @param {!VisibilityManager} child\n   * @private\n   */\n  removeChild_(child) {\n    if (this.children_) {\n      const index = this.children_.indexOf(child);\n      if (index != -1) {\n        this.children_.splice(index, 1);\n      }\n    }\n  }\n\n  /** @override */\n  dispose() {\n    // Give the chance for all events to complete.\n    this.setRootVisibility(0);\n\n    // Dispose all models.\n    for (let i = this.models_.length - 1; i >= 0; i--) {\n      this.models_[i].dispose();\n    }\n\n    // Unsubscribe everything else.\n    this.unsubscribe_.forEach(unsubscribe => {\n      unsubscribe();\n    });\n    this.unsubscribe_.length = 0;\n\n    if (this.parent) {\n      this.parent.removeChild_(this);\n    }\n    if (this.children_) {\n      for (let i = 0; i < this.children_.length; i++) {\n        this.children_[i].dispose();\n      }\n    }\n  }\n\n  /**\n   * @param {!UnlistenDef} handler\n   */\n  unsubscribe(handler) {\n    this.unsubscribe_.push(handler);\n  }\n\n  /**\n   * The start time from which all visibility events and times are measured.\n   * @return {number}\n   * @abstract\n   */\n  getStartTime() {}\n\n  /**\n   * Whether the visibility root is currently in the background.\n   * @return {boolean}\n   * @abstract\n   */\n  isBackgrounded() {}\n\n  /**\n   * Whether the visibility root has been created in the background mode.\n   * @return {boolean}\n   * @abstract\n   */\n  isBackgroundedAtStart() {}\n\n  /**\n   * Returns the root's layout rect.\n   * @return {!../../../src/layout-rect.LayoutRectDef}}\n   * @abstract\n   */\n  getRootLayoutBox() {}\n\n  /**\n   * @return {number}\n   */\n  getRootVisibility() {\n    if (!this.parent) {\n      return this.rootVisibility_;\n    }\n    return this.parent.getRootVisibility() > 0 ? this.rootVisibility_ : 0;\n  }\n\n  /**\n   * @param {number} visibility\n   */\n  setRootVisibility(visibility) {\n    this.rootVisibility_ = visibility;\n    this.updateModels_();\n    if (this.children_) {\n      for (let i = 0; i < this.children_.length; i++) {\n        this.children_[i].updateModels_();\n      }\n    }\n  }\n\n  /** @private */\n  updateModels_() {\n    for (let i = 0; i < this.models_.length; i++) {\n      this.models_[i].update();\n    }\n  }\n\n  /**\n   * Listens to the visibility events on the root as the whole and the given\n   * visibility spec. The visibility tracking can be deferred until\n   * `readyPromise` is resolved, if specified.\n   * @param {!Object<string, *>} spec\n   * @param {?Promise} readyPromise\n   * @param {?function():!Promise} createReportPromiseFunc\n   * @param {function(!Object<string, *>)} callback\n   * @return {!UnlistenDef}\n   */\n  listenRoot(spec, readyPromise, createReportPromiseFunc, callback) {\n    const calcVisibility = this.getRootVisibility.bind(this);\n    return this.createModelAndListen_(calcVisibility, spec, readyPromise,\n        createReportPromiseFunc, callback);\n  }\n\n  /**\n   * Listens to the visibility events for the specified element and the given\n   * visibility spec. The visibility tracking can be deferred until\n   * `readyPromise` is resolved, if specified.\n   * @param {!Element} element\n   * @param {!Object<string, *>} spec\n   * @param {?Promise} readyPromise\n   * @param {?function():!Promise} createReportPromiseFunc\n   * @param {function(!Object<string, *>)} callback\n   * @return {!UnlistenDef}\n   */\n  listenElement(\n    element, spec, readyPromise, createReportPromiseFunc, callback) {\n    const calcVisibility = this.getElementVisibility.bind(this, element);\n    return this.createModelAndListen_(calcVisibility, spec, readyPromise,\n        createReportPromiseFunc, callback, element);\n  }\n\n  /**\n   * Create visibilityModel and listen to visible events.\n   * @param {function():number} calcVisibility\n   * @param {!Object<string, *>} spec\n   * @param {?Promise} readyPromise\n   * @param {?function():!Promise} createReportPromiseFunc\n   * @param {function(!Object<string, *>)} callback\n   * @param {!Element=} opt_element\n   * @return {!UnlistenDef}\n   */\n  createModelAndListen_(calcVisibility, spec,\n    readyPromise, createReportPromiseFunc, callback, opt_element) {\n    if (spec['visiblePercentageThresholds'] &&\n        spec['visiblePercentageMin'] == undefined &&\n        spec['visiblePercentageMax'] == undefined) {\n      const unlisteners = [];\n      const ranges = spec['visiblePercentageThresholds'];\n      if (!ranges || !isArray(ranges)) {\n        user().error(TAG, 'invalid visiblePercentageThresholds');\n        return () => {};\n      }\n      for (let i = 0; i < ranges.length; i++) {\n        const percents = ranges[i];\n        if (!isArray(percents) || percents.length != 2) {\n          user().error(TAG,\n              'visiblePercentageThresholds entry length is not 2');\n          continue;\n        }\n        if (!isFiniteNumber(percents[0]) || !isFiniteNumber(percents[1])) {\n          // not valid number\n          user().error(TAG,\n              'visiblePercentageThresholds entry is not valid number');\n          continue;\n        }\n        const min = Number(percents[0]);\n        const max = Number(percents[1]);\n        // Min and max must be valid percentages. Min may not be more than max.\n        // Max is inclusive. Min is usually exclusive, but there are two\n        // special cases: if min and max are both 0, or both 100, then both\n        // are inclusive. Otherwise it would not be possible to trigger an\n        // event on exactly 0% or 100%.\n        if (min < 0 || max > 100 || min > max ||\n            (min == max && min != 100 && max != 0)) {\n          user().error(TAG,\n              'visiblePercentageThresholds entry invalid min/max value');\n          continue;\n        }\n        const newSpec = spec;\n        newSpec['visiblePercentageMin'] = min;\n        newSpec['visiblePercentageMax'] = max;\n        const model = new VisibilityModel(newSpec, calcVisibility);\n        unlisteners.push(this.listen_(model, spec, readyPromise,\n            createReportPromiseFunc, callback, opt_element));\n      }\n      return () => {\n        unlisteners.forEach(unlistener => unlistener());\n      };\n    }\n\n    const model = new VisibilityModel(spec, calcVisibility);\n    return this.listen_(model, spec, readyPromise,\n        createReportPromiseFunc, callback, opt_element);\n  }\n\n  /**\n   * @param {!VisibilityModel} model\n   * @param {!Object<string, *>} spec\n   * @param {?Promise} readyPromise\n   * @param {?function():!Promise} createReportPromiseFunc\n   * @param {function(!Object<string, *>)} callback\n   * @param {!Element=} opt_element\n   * @return {!UnlistenDef}\n   * @private\n   */\n  listen_(model, spec,\n    readyPromise, createReportPromiseFunc, callback, opt_element) {\n    // Block visibility.\n    if (readyPromise) {\n      model.setReady(false);\n      readyPromise.then(() => {\n        model.setReady(true);\n      });\n    }\n\n    if (createReportPromiseFunc) {\n      model.setReportReady(createReportPromiseFunc);\n    }\n\n    // Process the event.\n    model.onTriggerEvent(() => {\n      const startTime = this.getStartTime();\n      const state = model.getState(startTime);\n\n      // Additional doc-level state.\n      state['backgrounded'] = this.isBackgrounded() ? 1 : 0;\n      state['backgroundedAtStart'] = this.isBackgroundedAtStart() ? 1 : 0;\n      state['totalTime'] = Date.now() - startTime;\n\n      // Optionally, element-level state.\n      let layoutBox;\n      if (opt_element) {\n        const resource =\n            this.resources_.getResourceForElementOptional(opt_element);\n        layoutBox =\n            resource ?\n              resource.getLayoutBox() :\n              Services.viewportForDoc(this.ampdoc).getLayoutRect(opt_element);\n        const intersectionRatio = this.getElementVisibility(opt_element);\n        const intersectionRect = this.getElementIntersectionRect(opt_element);\n        Object.assign(state, {\n          'intersectionRatio': intersectionRatio,\n          'intersectionRect': JSON.stringify(intersectionRect),\n        });\n\n      } else {\n        layoutBox = this.getRootLayoutBox();\n      }\n      model.maybeDispose();\n\n      if (layoutBox) {\n        Object.assign(state, {\n          'elementX': layoutBox.left,\n          'elementY': layoutBox.top,\n          'elementWidth': layoutBox.width,\n          'elementHeight': layoutBox.height,\n        });\n      }\n      callback(state);\n    });\n\n    this.models_.push(model);\n    model.unsubscribe(() => {\n      const index = this.models_.indexOf(model);\n      if (index != -1) {\n        this.models_.splice(index, 1);\n      }\n    });\n\n    // Observe the element via InOb.\n    if (opt_element) {\n      // It's important that this happens after all the setup is done, b/c\n      // intersection observer can fire immedidately. Per spec, this should\n      // NOT happen. However, all of the existing InOb polyfills, as well as\n      // some versions of native implementations, make this mistake.\n      model.unsubscribe(this.observe(opt_element, () => model.update()));\n    }\n\n    // Start update.\n    model.update();\n    return function() {\n      model.dispose();\n    };\n  }\n\n  /**\n   * Observes the intersections of the specified element in the viewport.\n   * @param {!Element} unusedElement\n   * @param {function(number)} unusedListener\n   * @return {!UnlistenDef}\n   * @protected\n   * @abstract\n   */\n  observe(unusedElement, unusedListener) {}\n\n  /**\n   * @param {!Element} unusedElement\n   * @return {number}\n   * @abstract\n   */\n  getElementVisibility(unusedElement) {}\n\n  /**\n   * @param {!Element} unusedElement\n   * @return {?JsonObject}\n   * @abstract\n   */\n  getElementIntersectionRect(unusedElement) {}\n}\n\n\n/**\n * The implementation of `VisibilityManager` for an AMP document. Two\n * distinct modes are supported: the main AMP doc and a in-a-box doc.\n */\nexport class VisibilityManagerForDoc extends VisibilityManager {\n  /**\n   * @param {!../../../src/service/ampdoc-impl.AmpDoc} ampdoc\n   */\n  constructor(ampdoc) {\n    super(/* parent */ null, ampdoc);\n\n    /** @const @private */\n    this.viewer_ = Services.viewerForDoc(ampdoc);\n\n    /** @const @private */\n    this.viewport_ = Services.viewportForDoc(ampdoc);\n\n    /** @private {boolean} */\n    this.backgrounded_ = !this.viewer_.isVisible();\n\n    /** @const @private {boolean} */\n    this.backgroundedAtStart_ = this.isBackgrounded();\n\n    /**\n     * @const\n     * @private {!Object<number, {\n     *   element: !Element,\n     *   intersectionRatio: number,\n     *   listeners: !Array<function(number)>\n     * }>}\n     */\n    this.trackedElements_ = map();\n\n    /** @private {?IntersectionObserver|?IntersectionObserverPolyfill} */\n    this.intersectionObserver_ = null;\n\n    if (getMode(this.ampdoc.win).runtime == 'inabox') {\n      // In-a-box: visibility depends on the InOb.\n      const root = this.ampdoc.getRootNode();\n      const rootElement = dev().assertElement(\n          root.documentElement || root.body || root);\n      this.unsubscribe(this.observe(\n          rootElement,\n          this.setRootVisibility.bind(this)));\n    } else {\n      // Main document: visibility is based on the viewer.\n      this.setRootVisibility(this.viewer_.isVisible() ? 1 : 0);\n      this.unsubscribe(this.viewer_.onVisibilityChanged(() => {\n        const isVisible = this.viewer_.isVisible();\n        if (!isVisible) {\n          this.backgrounded_ = true;\n        }\n        this.setRootVisibility(isVisible ? 1 : 0);\n      }));\n    }\n  }\n\n  /** @override */\n  dispose() {\n    super.dispose();\n    if (this.intersectionObserver_) {\n      this.intersectionObserver_.disconnect();\n      this.intersectionObserver_ = null;\n    }\n  }\n\n  /** @override */\n  getStartTime() {\n    return dev().assertNumber(this.viewer_.getFirstVisibleTime());\n  }\n\n  /** @override */\n  isBackgrounded() {\n    return this.backgrounded_;\n  }\n\n  /** @override */\n  isBackgroundedAtStart() {\n    return this.backgroundedAtStart_;\n  }\n\n  /** @override */\n  getRootLayoutBox() {\n    // This code is the same for \"in-a-box\" and standalone doc.\n    const root = this.ampdoc.getRootNode();\n    const rootElement = dev().assertElement(\n        root.documentElement || root.body || root);\n    return this.viewport_.getLayoutRect(rootElement);\n  }\n\n  /** @override */\n  observe(element, listener) {\n    this.polyfillAmpElementIfNeeded_(element);\n\n    const id = getElementId(element);\n    let trackedElement = this.trackedElements_[id];\n    if (!trackedElement) {\n      trackedElement = {\n        element,\n        intersectionRatio: 0,\n        intersectionRect: null,\n        listeners: [],\n      };\n      this.trackedElements_[id] = trackedElement;\n    } else if (trackedElement.intersectionRatio > 0) {\n      // This has already been tracked and the `intersectionRatio` is fresh.\n      listener(trackedElement.intersectionRatio);\n    }\n    trackedElement.listeners.push(listener);\n    this.getIntersectionObserver_().observe(element);\n    return () => {\n      const trackedElement = this.trackedElements_[id];\n      if (trackedElement) {\n        const index = trackedElement.listeners.indexOf(listener);\n        if (index != -1) {\n          trackedElement.listeners.splice(index, 1);\n        }\n        if (trackedElement.listeners.length == 0) {\n          this.intersectionObserver_.unobserve(element);\n          delete this.trackedElements_[id];\n        }\n      }\n    };\n  }\n\n  /** @override */\n  getElementVisibility(element) {\n    if (this.getRootVisibility() == 0) {\n      return 0;\n    }\n    const id = getElementId(element);\n    const trackedElement = this.trackedElements_[id];\n    return (trackedElement && trackedElement.intersectionRatio) || 0;\n  }\n\n  /**\n   * Gets the intersection element.\n   *\n   * @param {!Element} element\n   * @return {?JsonObject}\n   */\n  getElementIntersectionRect(element) {\n    if (this.getElementVisibility(element) <= 0) {\n      return null;\n    }\n    const id = getElementId(element);\n    const trackedElement = this.trackedElements_[id];\n    if (trackedElement) {\n      return /** @type {!JsonObject} */ (trackedElement.intersectionRect);\n    }\n    return null;\n  }\n\n  /**\n   * @return {!IntersectionObserver|!IntersectionObserverPolyfill}\n   * @private\n   */\n  getIntersectionObserver_() {\n    if (!this.intersectionObserver_) {\n      this.intersectionObserver_ = this.createIntersectionObserver_();\n    }\n    return this.intersectionObserver_;\n  }\n\n  /**\n   * @return {!IntersectionObserver|!IntersectionObserverPolyfill}\n   * @private\n   */\n  createIntersectionObserver_() {\n    // Native.\n    const {win} = this.ampdoc;\n    if (nativeIntersectionObserverSupported(win)) {\n      return new win.IntersectionObserver(\n          this.onIntersectionChanges_.bind(this),\n          {threshold: DEFAULT_THRESHOLD});\n    }\n\n    // Polyfill.\n    const intersectionObserverPolyfill = new IntersectionObserverPolyfill(\n        this.onIntersectionChanges_.bind(this),\n        {threshold: DEFAULT_THRESHOLD});\n    const ticker = () => {\n      intersectionObserverPolyfill.tick(this.viewport_.getRect());\n    };\n    this.unsubscribe(this.viewport_.onScroll(ticker));\n    this.unsubscribe(this.viewport_.onChanged(ticker));\n    // Tick in the next event loop. That's how native InOb works.\n    setTimeout(ticker);\n    return intersectionObserverPolyfill;\n  }\n\n  /**\n   * @param {!Element} element\n   * @private\n   */\n  polyfillAmpElementIfNeeded_(element) {\n    const {win} = this.ampdoc;\n    if (nativeIntersectionObserverSupported(win)) {\n      return;\n    }\n\n    // InOb polyfill requires partial AmpElement implementation.\n    if (typeof element.getLayoutBox == 'function') {\n      return;\n    }\n    element.getLayoutBox = () => {\n      return this.viewport_.getLayoutRect(element);\n    };\n    element.getOwner = () => null;\n  }\n\n  /**\n   * @param {!Array<!IntersectionObserverEntry>} entries\n   * @private\n   */\n  onIntersectionChanges_(entries) {\n    entries.forEach(change => {\n      let intersection = change.intersectionRect;\n      // IntersectionRect type now changed from ClientRect to DOMRectReadOnly.\n      // TODO(@zhouyx): Fix all InOb related type.\n      intersection = layoutRectLtwh(Number(intersection.left),\n          Number(intersection.top),\n          Number(intersection.width),\n          Number(intersection.height));\n      this.onIntersectionChange_(\n          change.target,\n          change.intersectionRatio,\n          intersection);\n    });\n  }\n\n  /**\n   * @param {!Element} target\n   * @param {number} intersectionRatio\n   * @param {!../../../src/layout-rect.LayoutRectDef} intersectionRect\n   * @private\n   */\n  onIntersectionChange_(target, intersectionRatio, intersectionRect) {\n    intersectionRatio = Math.min(Math.max(intersectionRatio, 0), 1);\n    const id = getElementId(target);\n    const trackedElement = this.trackedElements_[id];\n    if (trackedElement) {\n      trackedElement.intersectionRatio = intersectionRatio;\n      trackedElement.intersectionRect = intersectionRect;\n      for (let i = 0; i < trackedElement.listeners.length; i++) {\n        trackedElement.listeners[i](intersectionRatio);\n      }\n    }\n  }\n}\n\n\n/**\n * The implementation of `VisibilityManager` for a FIE embed. This visibility\n * root delegates most of tracking functions to its parent, the ampdoc root.\n */\nexport class VisibilityManagerForEmbed extends VisibilityManager {\n  /**\n   * @param {!VisibilityManager} parent\n   * @param {!../../../src/friendly-iframe-embed.FriendlyIframeEmbed} embed\n   */\n  constructor(parent, embed) {\n    super(parent, parent.ampdoc);\n\n    /** @const */\n    this.embed = embed;\n\n    /** @const @private {boolean} */\n    this.backgroundedAtStart_ = this.parent.isBackgrounded();\n\n    this.unsubscribe(this.parent.observe(\n        dev().assertElement(embed.host),\n        this.setRootVisibility.bind(this)));\n  }\n\n  /** @override */\n  getStartTime() {\n    return this.embed.getStartTime();\n  }\n\n  /** @override */\n  isBackgrounded() {\n    return this.parent.isBackgrounded();\n  }\n\n  /** @override */\n  isBackgroundedAtStart() {\n    return this.backgroundedAtStart_;\n  }\n\n  /**\n   * Gets the layout box of the embedded document. Note that this may be\n   * smaller than the size allocated by the host. In that case, the document\n   * will be centered, and the unfilled space will not be reflected in this\n   * return value.\n   * embed.iframe is used to calculate the root layoutbox, since it is more\n   * important for the embedded document to know its own size, rather than\n   * the size of the host rectangle which it may or may not entirely fill.\n   * embed.host is used to calculate the root visibility, however, since\n   * the visibility of the host element directly determines the embedded\n   * document's visibility.\n   * @override\n   */\n  getRootLayoutBox() {\n    const rootElement = dev().assertElement(this.embed.iframe);\n    return Services.viewportForDoc(this.ampdoc).getLayoutRect(rootElement);\n  }\n\n  /** @override */\n  observe(element, listener) {\n    return this.parent.observe(element, listener);\n  }\n\n  /** @override */\n  getElementVisibility(element) {\n    if (this.getRootVisibility() == 0) {\n      return 0;\n    }\n    return this.parent.getElementVisibility(element);\n  }\n\n  /**\n   * Returns intersecting element.\n   * @override\n   */\n  getElementIntersectionRect(element) {\n    if (this.getRootVisibility() == 0) {\n      return null;\n    }\n    return this.parent.getElementIntersectionRect(element);\n  }\n\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Deferred} from '../../../src/utils/promise';\nimport {Observable} from '../../../src/observable';\nimport {dev} from '../../../src/log';\n\n/**\n * This class implements visibility calculations based on the\n * visibility ratio. It's used for documents, embeds and individual element.\n * @implements {../../../src/service.Disposable}\n */\nexport class VisibilityModel {\n  /**\n   * @param {!Object<string, *>} spec\n   * @param {function():number} calcVisibility\n   */\n  constructor(spec, calcVisibility) {\n    /** @const @private */\n    this.calcVisibility_ = calcVisibility;\n\n    /**\n     * Spec parameters.\n     * @private {{\n     *   visiblePercentageMin: number,\n     *   visiblePercentageMax: number,\n     *   totalTimeMin: number,\n     *   totalTimeMax: number,\n     *   continuousTimeMin: number,\n     *   continuousTimeMax: number,\n     * }}\n     */\n    this.spec_ = {\n      visiblePercentageMin: Number(spec['visiblePercentageMin']) / 100 || 0,\n      visiblePercentageMax: Number(spec['visiblePercentageMax']) / 100 || 1,\n      totalTimeMin: Number(spec['totalTimeMin']) || 0,\n      totalTimeMax: Number(spec['totalTimeMax']) || Infinity,\n      continuousTimeMin: Number(spec['continuousTimeMin']) || 0,\n      continuousTimeMax: Number(spec['continuousTimeMax']) || Infinity,\n    };\n    // Above, if visiblePercentageMax was not specified, assume 100%.\n    // Here, do allow 0% to be the value if that is what was specified.\n    if (String(spec['visiblePercentageMax']).trim() === '0') {\n      this.spec_.visiblePercentageMax = 0;\n    }\n\n    /** @private {boolean} */\n    this.repeat_ = spec['repeat'] === true;\n\n    /** @private {?Observable} */\n    this.onTriggerObservable_ = new Observable();\n\n    const deferred = new Deferred();\n\n    /** @private */\n    this.eventPromise_ = deferred.promise;\n\n    /** @private {?function()} */\n    this.eventResolver_ = deferred.resolve;\n\n    this.eventPromise_.then(() => {\n      this.onTriggerObservable_.fire();\n    });\n\n    /** @private {!Array<!UnlistenDef>} */\n    this.unsubscribe_ = [];\n\n    /** @const @private {time} */\n    this.createdTime_ = Date.now();\n\n    /** @private {boolean} */\n    this.ready_ = true;\n\n    /** @private {boolean} */\n    this.reportReady_ = true;\n\n    /** @private {?function():!Promise} */\n    this.createReportReadyPromise_ = null;\n\n    /** @private {?number} */\n    this.scheduledUpdateTimeoutId_ = null;\n\n    /** @private {boolean} */\n    this.matchesVisibility_ = false;\n\n    /** @private {boolean} */\n    this.everMatchedVisibility_ = false;\n\n    /** @private {time} duration in milliseconds */\n    this.continuousTime_ = 0;\n\n    /** @private {time} duration in milliseconds */\n    this.maxContinuousVisibleTime_ = 0;\n\n    /** @private {time} duration in milliseconds */\n    this.totalVisibleTime_ = 0;\n\n    /** @private {time} milliseconds since epoch */\n    this.firstSeenTime_ = 0;\n\n    /** @private {time} milliseconds since epoch */\n    this.lastSeenTime_ = 0;\n\n    /** @private {time} milliseconds since epoch */\n    this.firstVisibleTime_ = 0;\n\n    /** @private {time} milliseconds since epoch */\n    this.lastVisibleTime_ = 0;\n\n    /** @private {time} percent value in a [0, 1] range */\n    this.loadTimeVisibility_ = 0;\n\n    /** @private {number} percent value in a [0, 1] range */\n    this.minVisiblePercentage_ = 0;\n\n    /** @private {number} percent value in a [0, 1] range */\n    this.maxVisiblePercentage_ = 0;\n\n    /** @private {time} milliseconds since epoch */\n    this.lastVisibleUpdateTime_ = 0;\n\n    /** @private {boolean} */\n    this.waitToReset_ = false;\n\n    /** @private {?number} */\n    this.scheduleRepeatId_ = null;\n  }\n\n  /**\n   * Refresh counter on visible reset.\n   * TODO: Right now all state value are scoped state values that gets reset.\n   * We may need to add support to global state values,\n   * that never reset like globalTotalVisibleTime.\n   * Note: loadTimeVisibility is an exception.\n   * @private\n   */\n  reset_() {\n    dev().assert(!this.eventResolver_,\n        'Attempt to refresh visible event before previous one resolve');\n    const deferred = new Deferred();\n    this.eventPromise_ = deferred.promise;\n    this.eventResolver_ = deferred.resolve;\n\n    this.eventPromise_.then(() => {\n      this.onTriggerObservable_.fire();\n    });\n    this.scheduleRepeatId_ = null;\n    this.everMatchedVisibility_ = false;\n    this.matchesVisibility_ = false;\n    this.continuousTime_ = 0;\n    this.maxContinuousVisibleTime_ = 0;\n    this.totalVisibleTime_ = 0;\n    this.firstVisibleTime_ = 0;\n    this.firstSeenTime_ = 0;\n    this.lastSeenTime_ = 0;\n    this.lastVisibleTime_ = 0;\n    this.minVisiblePercentage_ = 0;\n    this.maxVisiblePercentage_ = 0;\n    this.lastVisibleUpdateTime_ = 0;\n    this.waitToReset_ = false;\n  }\n\n  /**\n   * Function that visibilityManager can used to dispose model or reset model\n   */\n  maybeDispose() {\n    if (!this.repeat_) {\n      this.dispose();\n    }\n  }\n\n  /** @override */\n  dispose() {\n    if (this.scheduledUpdateTimeoutId_) {\n      clearTimeout(this.scheduledUpdateTimeoutId_);\n      this.scheduledUpdateTimeoutId_ = null;\n    }\n    if (this.scheduleRepeatId_) {\n      clearTimeout(this.scheduleRepeatId_);\n      this.scheduleRepeatId_ = null;\n    }\n    this.unsubscribe_.forEach(unsubscribe => {\n      unsubscribe();\n    });\n    this.unsubscribe_.length = 0;\n    this.eventResolver_ = null;\n    if (this.onTriggerObservable_) {\n      this.onTriggerObservable_.removeAll();\n      this.onTriggerObservable_ = null;\n    }\n  }\n\n  /**\n   * Adds the unsubscribe handler that will be called when this visibility\n   * model is destroyed.\n   * @param {!UnlistenDef} handler\n   */\n  unsubscribe(handler) {\n    this.unsubscribe_.push(handler);\n  }\n\n  /**\n   * Adds the event handler that will be called when all visibility conditions\n   * have been met.\n   * @param {function()} handler\n   */\n  onTriggerEvent(handler) {\n    if (this.onTriggerObservable_) {\n      this.onTriggerObservable_.add(handler);\n    }\n    if (this.eventPromise_ && !this.eventResolver_) {\n      // If eventPromise has already resolved, need to call handler manually.\n      handler();\n    }\n  }\n\n  /**\n   * Sets whether this object is ready. Ready means that visibility is\n   * ready to be calculated, e.g. because an element has been\n   * sufficiently rendered.\n   * @param {boolean} ready\n   */\n  setReady(ready) {\n    this.ready_ = ready;\n    this.update();\n  }\n\n  /**\n   * Sets that the model needs to wait on extra report ready promise\n   * after all visibility conditions have been met to call report handler\n   * @param {function():!Promise} callback\n   */\n  setReportReady(callback) {\n    this.reportReady_ = false;\n    this.createReportReadyPromise_ = callback;\n  }\n\n  /**\n   * @return {number}\n   * @private\n   */\n  getVisibility_() {\n    return this.ready_ ? this.calcVisibility_() : 0;\n  }\n\n  /**\n   * Runs the calculation cycle.\n   */\n  update() {\n    this.update_(this.getVisibility_());\n  }\n\n  /**\n   * Returns the calculated state of visibility.\n   * @param {time} startTime\n   * @return {!Object<string, string|number>}\n   */\n  getState(startTime) {\n    return {\n      // Observed times, relative to the `startTime`.\n      firstSeenTime: timeBase(this.firstSeenTime_, startTime),\n      lastSeenTime: timeBase(this.lastSeenTime_, startTime),\n      lastVisibleTime: timeBase(this.lastVisibleTime_, startTime),\n      firstVisibleTime: timeBase(this.firstVisibleTime_, startTime),\n\n      // Durations.\n      maxContinuousVisibleTime: this.maxContinuousVisibleTime_,\n      totalVisibleTime: this.totalVisibleTime_,\n\n      // Visibility percents.\n      loadTimeVisibility: this.loadTimeVisibility_ * 100 || 0,\n      minVisiblePercentage: this.minVisiblePercentage_ * 100,\n      maxVisiblePercentage: this.maxVisiblePercentage_ * 100,\n    };\n  }\n\n  /**\n   * @param {number} visibility\n   * @private\n   */\n  update_(visibility) {\n    // Update state and check if all conditions are satisfied\n    if (this.waitToReset_) {\n      if (!this.isVisibilityMatch_(visibility)) {\n        // We were waiting for a condition to become unmet, and now it has\n        this.reset_();\n      }\n      return;\n    }\n    if (!this.eventResolver_) {\n      return;\n    }\n    const conditionsMet = this.updateCounters_(visibility);\n    if (conditionsMet) {\n      if (this.scheduledUpdateTimeoutId_) {\n        clearTimeout(this.scheduledUpdateTimeoutId_);\n        this.scheduledUpdateTimeoutId_ = null;\n      }\n      if (this.reportReady_) {\n        // TODO(jonkeller): Can we eliminate eventResolver_?\n        this.eventResolver_();\n        this.eventResolver_ = null;\n        if (this.repeat_) {\n          this.waitToReset_ = true;\n          this.continuousTime_ = 0;\n        }\n      } else if (this.createReportReadyPromise_) {\n        // Report when report ready promise resolve\n        const reportReadyPromise = this.createReportReadyPromise_();\n        this.createReportReadyPromise_ = null;\n        reportReadyPromise.then(() => {\n          this.reportReady_ = true;\n          // Need to update one more time in case time exceeds\n          // maxContinuousVisibleTime.\n          this.update();\n        });\n      }\n    } else if (this.matchesVisibility_ && !this.scheduledUpdateTimeoutId_) {\n      // There is unmet duration condition, schedule a check\n      const timeToWait = this.computeTimeToWait_();\n      if (timeToWait > 0) {\n        this.scheduledUpdateTimeoutId_ = setTimeout(() => {\n          this.scheduledUpdateTimeoutId_ = null;\n          this.update();\n        }, timeToWait);\n      }\n    } else if (!this.matchesVisibility_ && this.scheduledUpdateTimeoutId_) {\n      clearTimeout(this.scheduledUpdateTimeoutId_);\n      this.scheduledUpdateTimeoutId_ = null;\n    }\n  }\n\n  /**\n   * Check if visibility fall into the percentage range\n   * @param {number} visibility\n   * @return {boolean}\n   */\n  isVisibilityMatch_(visibility) {\n    dev().assert(visibility >= 0 && visibility <= 1,\n        'invalid visibility value: %s', visibility);\n    // Special case: If visiblePercentageMin is 100%, then it doesn't make\n    // sense to do the usual (min, max] since that would never be true.\n    if (this.spec_.visiblePercentageMin == 1) {\n      return visibility == 1;\n    }\n    // Special case: If visiblePercentageMax is 0%, then we\n    // want to ping when the creative becomes not visible.\n    if (this.spec_.visiblePercentageMax == 0) {\n      return visibility == 0;\n    }\n    return visibility > this.spec_.visiblePercentageMin &&\n        visibility <= this.spec_.visiblePercentageMax;\n  }\n\n  /**\n   * @param {number} visibility\n   * @return {boolean} true\n   * @private\n   */\n  updateCounters_(visibility) {\n    dev().assert(visibility >= 0 && visibility <= 1,\n        'invalid visibility value: %s', visibility);\n    const now = Date.now();\n\n    if (visibility > 0) {\n      this.firstSeenTime_ = this.firstSeenTime_ || now;\n      this.lastSeenTime_ = now;\n      // Consider it as load time visibility if this happens within 300ms of\n      // page load.\n      if (!this.loadTimeVisibility_ && (now - this.createdTime_) < 300) {\n        this.loadTimeVisibility_ = visibility;\n      }\n    }\n\n    const prevMatchesVisibility = this.matchesVisibility_;\n    const timeSinceLastUpdate =\n        this.lastVisibleUpdateTime_ ? now - this.lastVisibleUpdateTime_ : 0;\n    this.matchesVisibility_ = this.isVisibilityMatch_(visibility);\n    if (this.matchesVisibility_) {\n      this.everMatchedVisibility_ = true;\n      if (prevMatchesVisibility) {\n        // Keep counting.\n        this.totalVisibleTime_ += timeSinceLastUpdate;\n        this.continuousTime_ += timeSinceLastUpdate;\n        this.maxContinuousVisibleTime_ =\n            Math.max(this.maxContinuousVisibleTime_, this.continuousTime_);\n      } else {\n        // The resource came into view: start counting.\n        dev().assert(!this.lastVisibleUpdateTime_);\n        this.firstVisibleTime_ = this.firstVisibleTime_ || now;\n      }\n      this.lastVisibleUpdateTime_ = now;\n      this.minVisiblePercentage_ =\n          this.minVisiblePercentage_ > 0 ?\n            Math.min(this.minVisiblePercentage_, visibility) :\n            visibility;\n      this.maxVisiblePercentage_ =\n          Math.max(this.maxVisiblePercentage_, visibility);\n      this.lastVisibleTime_ = now;\n    } else if (prevMatchesVisibility) {\n      // The resource went out of view. Do final calculations and reset state.\n      dev().assert(this.lastVisibleUpdateTime_ > 0);\n\n      this.maxContinuousVisibleTime_ = Math.max(\n          this.maxContinuousVisibleTime_,\n          this.continuousTime_ + timeSinceLastUpdate);\n\n      // Reset for next visibility event.\n      this.lastVisibleUpdateTime_ = 0;\n      this.totalVisibleTime_ += timeSinceLastUpdate;\n      this.continuousTime_ = 0; // Clear only after max is calculated above.\n      this.lastVisibleTime_ = now;\n    }\n\n    return this.everMatchedVisibility_ &&\n        (this.totalVisibleTime_ >= this.spec_.totalTimeMin) &&\n        (this.totalVisibleTime_ <= this.spec_.totalTimeMax) &&\n        (this.maxContinuousVisibleTime_ >= this.spec_.continuousTimeMin) &&\n        (this.maxContinuousVisibleTime_ <= this.spec_.continuousTimeMax);\n  }\n\n  /**\n   * Computes time, assuming the object is currently visible, that it'd take\n   * it to match all timing requirements.\n   * @return {time}\n   * @private\n   */\n  computeTimeToWait_() {\n    const waitForContinuousTime = Math.max(\n        this.spec_.continuousTimeMin - this.continuousTime_, 0);\n    const waitForTotalTime = Math.max(\n        this.spec_.totalTimeMin - this.totalVisibleTime_, 0);\n    const maxWaitTime = Math.max(waitForContinuousTime, waitForTotalTime);\n    return Math.min(\n        maxWaitTime,\n        waitForContinuousTime || Infinity,\n        waitForTotalTime || Infinity);\n  }\n}\n\n\n/**\n * Calculates the specified time based on the given `baseTime`.\n * @param {time} time\n * @param {time} baseTime\n * @return {time}\n */\nfunction timeBase(time, baseTime) {\n  return time >= baseTime ? time - baseTime : 0;\n}\n","/*!\n\nCopyright (C) 2014-2016 by Andrea Giammarchi - @WebReflection\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n*/\n// global window Object\n// optional polyfill info\n//    'auto' used by default, everything is feature detected\n//    'force' use the polyfill even if not fully needed\nfunction installCustomElements(window, polyfill) {'use strict';\n\n  // DO NOT USE THIS FILE DIRECTLY, IT WON'T WORK\n  // THIS IS A PROJECT BASED ON A BUILD SYSTEM\n  // THIS FILE IS JUST WRAPPED UP RESULTING IN\n  // build/document-register-element.node.js\n\n  var\n    document = window.document,\n    Object = window.Object\n  ;\n\n  var htmlClass = (function (info) {\n    // (C) Andrea Giammarchi - @WebReflection - MIT Style\n    var\n      catchClass = /^[A-Z]+[a-z]/,\n      filterBy = function (re) {\n        var arr = [], tag;\n        for (tag in register) {\n          if (re.test(tag)) arr.push(tag);\n        }\n        return arr;\n      },\n      add = function (Class, tag) {\n        tag = tag.toLowerCase();\n        if (!(tag in register)) {\n          register[Class] = (register[Class] || []).concat(tag);\n          register[tag] = (register[tag.toUpperCase()] = Class);\n        }\n      },\n      register = (Object.create || Object)(null),\n      htmlClass = {},\n      i, section, tags, Class\n    ;\n    for (section in info) {\n      for (Class in info[section]) {\n        tags = info[section][Class];\n        register[Class] = tags;\n        for (i = 0; i < tags.length; i++) {\n          register[tags[i].toLowerCase()] =\n          register[tags[i].toUpperCase()] = Class;\n        }\n      }\n    }\n    htmlClass.get = function get(tagOrClass) {\n      return typeof tagOrClass === 'string' ?\n        (register[tagOrClass] || (catchClass.test(tagOrClass) ? [] : '')) :\n        filterBy(tagOrClass);\n    };\n    htmlClass.set = function set(tag, Class) {\n      return (catchClass.test(tag) ?\n        add(tag, Class) :\n        add(Class, tag)\n      ), htmlClass;\n    };\n    return htmlClass;\n  }({\n    \"collections\": {\n      \"HTMLAllCollection\": [\n        \"all\"\n      ],\n      \"HTMLCollection\": [\n        \"forms\"\n      ],\n      \"HTMLFormControlsCollection\": [\n        \"elements\"\n      ],\n      \"HTMLOptionsCollection\": [\n        \"options\"\n      ]\n    },\n    \"elements\": {\n      \"Element\": [\n        \"element\"\n      ],\n      \"HTMLAnchorElement\": [\n        \"a\"\n      ],\n      \"HTMLAppletElement\": [\n        \"applet\"\n      ],\n      \"HTMLAreaElement\": [\n        \"area\"\n      ],\n      \"HTMLAttachmentElement\": [\n        \"attachment\"\n      ],\n      \"HTMLAudioElement\": [\n        \"audio\"\n      ],\n      \"HTMLBRElement\": [\n        \"br\"\n      ],\n      \"HTMLBaseElement\": [\n        \"base\"\n      ],\n      \"HTMLBodyElement\": [\n        \"body\"\n      ],\n      \"HTMLButtonElement\": [\n        \"button\"\n      ],\n      \"HTMLCanvasElement\": [\n        \"canvas\"\n      ],\n      \"HTMLContentElement\": [\n        \"content\"\n      ],\n      \"HTMLDListElement\": [\n        \"dl\"\n      ],\n      \"HTMLDataElement\": [\n        \"data\"\n      ],\n      \"HTMLDataListElement\": [\n        \"datalist\"\n      ],\n      \"HTMLDetailsElement\": [\n        \"details\"\n      ],\n      \"HTMLDialogElement\": [\n        \"dialog\"\n      ],\n      \"HTMLDirectoryElement\": [\n        \"dir\"\n      ],\n      \"HTMLDivElement\": [\n        \"div\"\n      ],\n      \"HTMLDocument\": [\n        \"document\"\n      ],\n      \"HTMLElement\": [\n        \"element\",\n        \"abbr\",\n        \"address\",\n        \"article\",\n        \"aside\",\n        \"b\",\n        \"bdi\",\n        \"bdo\",\n        \"cite\",\n        \"code\",\n        \"command\",\n        \"dd\",\n        \"dfn\",\n        \"dt\",\n        \"em\",\n        \"figcaption\",\n        \"figure\",\n        \"footer\",\n        \"header\",\n        \"i\",\n        \"kbd\",\n        \"mark\",\n        \"nav\",\n        \"noscript\",\n        \"rp\",\n        \"rt\",\n        \"ruby\",\n        \"s\",\n        \"samp\",\n        \"section\",\n        \"small\",\n        \"strong\",\n        \"sub\",\n        \"summary\",\n        \"sup\",\n        \"u\",\n        \"var\",\n        \"wbr\"\n      ],\n      \"HTMLEmbedElement\": [\n        \"embed\"\n      ],\n      \"HTMLFieldSetElement\": [\n        \"fieldset\"\n      ],\n      \"HTMLFontElement\": [\n        \"font\"\n      ],\n      \"HTMLFormElement\": [\n        \"form\"\n      ],\n      \"HTMLFrameElement\": [\n        \"frame\"\n      ],\n      \"HTMLFrameSetElement\": [\n        \"frameset\"\n      ],\n      \"HTMLHRElement\": [\n        \"hr\"\n      ],\n      \"HTMLHeadElement\": [\n        \"head\"\n      ],\n      \"HTMLHeadingElement\": [\n        \"h1\",\n        \"h2\",\n        \"h3\",\n        \"h4\",\n        \"h5\",\n        \"h6\"\n      ],\n      \"HTMLHtmlElement\": [\n        \"html\"\n      ],\n      \"HTMLIFrameElement\": [\n        \"iframe\"\n      ],\n      \"HTMLImageElement\": [\n        \"img\"\n      ],\n      \"HTMLInputElement\": [\n        \"input\"\n      ],\n      \"HTMLKeygenElement\": [\n        \"keygen\"\n      ],\n      \"HTMLLIElement\": [\n        \"li\"\n      ],\n      \"HTMLLabelElement\": [\n        \"label\"\n      ],\n      \"HTMLLegendElement\": [\n        \"legend\"\n      ],\n      \"HTMLLinkElement\": [\n        \"link\"\n      ],\n      \"HTMLMapElement\": [\n        \"map\"\n      ],\n      \"HTMLMarqueeElement\": [\n        \"marquee\"\n      ],\n      \"HTMLMediaElement\": [\n        \"media\"\n      ],\n      \"HTMLMenuElement\": [\n        \"menu\"\n      ],\n      \"HTMLMenuItemElement\": [\n        \"menuitem\"\n      ],\n      \"HTMLMetaElement\": [\n        \"meta\"\n      ],\n      \"HTMLMeterElement\": [\n        \"meter\"\n      ],\n      \"HTMLModElement\": [\n        \"del\",\n        \"ins\"\n      ],\n      \"HTMLOListElement\": [\n        \"ol\"\n      ],\n      \"HTMLObjectElement\": [\n        \"object\"\n      ],\n      \"HTMLOptGroupElement\": [\n        \"optgroup\"\n      ],\n      \"HTMLOptionElement\": [\n        \"option\"\n      ],\n      \"HTMLOutputElement\": [\n        \"output\"\n      ],\n      \"HTMLParagraphElement\": [\n        \"p\"\n      ],\n      \"HTMLParamElement\": [\n        \"param\"\n      ],\n      \"HTMLPictureElement\": [\n        \"picture\"\n      ],\n      \"HTMLPreElement\": [\n        \"pre\"\n      ],\n      \"HTMLProgressElement\": [\n        \"progress\"\n      ],\n      \"HTMLQuoteElement\": [\n        \"blockquote\",\n        \"q\",\n        \"quote\"\n      ],\n      \"HTMLScriptElement\": [\n        \"script\"\n      ],\n      \"HTMLSelectElement\": [\n        \"select\"\n      ],\n      \"HTMLShadowElement\": [\n        \"shadow\"\n      ],\n      \"HTMLSlotElement\": [\n        \"slot\"\n      ],\n      \"HTMLSourceElement\": [\n        \"source\"\n      ],\n      \"HTMLSpanElement\": [\n        \"span\"\n      ],\n      \"HTMLStyleElement\": [\n        \"style\"\n      ],\n      \"HTMLTableCaptionElement\": [\n        \"caption\"\n      ],\n      \"HTMLTableCellElement\": [\n        \"td\",\n        \"th\"\n      ],\n      \"HTMLTableColElement\": [\n        \"col\",\n        \"colgroup\"\n      ],\n      \"HTMLTableElement\": [\n        \"table\"\n      ],\n      \"HTMLTableRowElement\": [\n        \"tr\"\n      ],\n      \"HTMLTableSectionElement\": [\n        \"thead\",\n        \"tbody\",\n        \"tfoot\"\n      ],\n      \"HTMLTemplateElement\": [\n        \"template\"\n      ],\n      \"HTMLTextAreaElement\": [\n        \"textarea\"\n      ],\n      \"HTMLTimeElement\": [\n        \"time\"\n      ],\n      \"HTMLTitleElement\": [\n        \"title\"\n      ],\n      \"HTMLTrackElement\": [\n        \"track\"\n      ],\n      \"HTMLUListElement\": [\n        \"ul\"\n      ],\n      \"HTMLUnknownElement\": [\n        \"unknown\",\n        \"vhgroupv\",\n        \"vkeygen\"\n      ],\n      \"HTMLVideoElement\": [\n        \"video\"\n      ]\n    },\n    \"nodes\": {\n      \"Attr\": [\n        \"node\"\n      ],\n      \"Audio\": [\n        \"audio\"\n      ],\n      \"CDATASection\": [\n        \"node\"\n      ],\n      \"CharacterData\": [\n        \"node\"\n      ],\n      \"Comment\": [\n        \"#comment\"\n      ],\n      \"Document\": [\n        \"#document\"\n      ],\n      \"DocumentFragment\": [\n        \"#document-fragment\"\n      ],\n      \"DocumentType\": [\n        \"node\"\n      ],\n      \"HTMLDocument\": [\n        \"#document\"\n      ],\n      \"Image\": [\n        \"img\"\n      ],\n      \"Option\": [\n        \"option\"\n      ],\n      \"ProcessingInstruction\": [\n        \"node\"\n      ],\n      \"ShadowRoot\": [\n        \"#shadow-root\"\n      ],\n      \"Text\": [\n        \"#text\"\n      ],\n      \"XMLDocument\": [\n        \"xml\"\n      ]\n    }\n  }));\n  \n  \n    \n  // passed at runtime, configurable\n  // via nodejs module\n  if (!polyfill) polyfill = 'auto';\n  \n  var\n    // V0 polyfill entry\n    REGISTER_ELEMENT = 'registerElement',\n  \n    // IE < 11 only + old WebKit for attributes + feature detection\n    EXPANDO_UID = '__' + REGISTER_ELEMENT + (window.Math.random() * 10e4 >> 0),\n  \n    // shortcuts and costants\n    ADD_EVENT_LISTENER = 'addEventListener',\n    ATTACHED = 'attached',\n    CALLBACK = 'Callback',\n    DETACHED = 'detached',\n    EXTENDS = 'extends',\n  \n    ATTRIBUTE_CHANGED_CALLBACK = 'attributeChanged' + CALLBACK,\n    ATTACHED_CALLBACK = ATTACHED + CALLBACK,\n    CONNECTED_CALLBACK = 'connected' + CALLBACK,\n    DISCONNECTED_CALLBACK = 'disconnected' + CALLBACK,\n    CREATED_CALLBACK = 'created' + CALLBACK,\n    DETACHED_CALLBACK = DETACHED + CALLBACK,\n  \n    ADDITION = 'ADDITION',\n    MODIFICATION = 'MODIFICATION',\n    REMOVAL = 'REMOVAL',\n  \n    DOM_ATTR_MODIFIED = 'DOMAttrModified',\n    DOM_CONTENT_LOADED = 'DOMContentLoaded',\n    DOM_SUBTREE_MODIFIED = 'DOMSubtreeModified',\n  \n    PREFIX_TAG = '<',\n    PREFIX_IS = '=',\n  \n    // valid and invalid node names\n    validName = /^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,\n    invalidNames = [\n      'ANNOTATION-XML',\n      'COLOR-PROFILE',\n      'FONT-FACE',\n      'FONT-FACE-SRC',\n      'FONT-FACE-URI',\n      'FONT-FACE-FORMAT',\n      'FONT-FACE-NAME',\n      'MISSING-GLYPH'\n    ],\n  \n    // registered types and their prototypes\n    types = [],\n    protos = [],\n  \n    // to query subnodes\n    query = '',\n  \n    // html shortcut used to feature detect\n    documentElement = document.documentElement,\n  \n    // ES5 inline helpers || basic patches\n    indexOf = types.indexOf || function (v) {\n      for(var i = this.length; i-- && this[i] !== v;){}\n      return i;\n    },\n  \n    // other helpers / shortcuts\n    OP = Object.prototype,\n    hOP = OP.hasOwnProperty,\n    iPO = OP.isPrototypeOf,\n  \n    defineProperty = Object.defineProperty,\n    empty = [],\n    gOPD = Object.getOwnPropertyDescriptor,\n    gOPN = Object.getOwnPropertyNames,\n    gPO = Object.getPrototypeOf,\n    sPO = Object.setPrototypeOf,\n  \n    // jshint proto: true\n    hasProto = !!Object.__proto__,\n  \n    // V1 helpers\n    fixGetClass = false,\n    DRECEV1 = '__dreCEv1',\n    customElements = window.customElements,\n    usableCustomElements = polyfill !== 'force' && !!(\n      customElements &&\n      customElements.define &&\n      customElements.get &&\n      customElements.whenDefined\n    ),\n    Dict = Object.create || Object,\n    Map = window.Map || function Map() {\n      var K = [], V = [], i;\n      return {\n        get: function (k) {\n          return V[indexOf.call(K, k)];\n        },\n        set: function (k, v) {\n          i = indexOf.call(K, k);\n          if (i < 0) V[K.push(k) - 1] = v;\n          else V[i] = v;\n        }\n      };\n    },\n    Promise = window.Promise || function (fn) {\n      var\n        notify = [],\n        done = false,\n        p = {\n          'catch': function () {\n            return p;\n          },\n          'then': function (cb) {\n            notify.push(cb);\n            if (done) setTimeout(resolve, 1);\n            return p;\n          }\n        }\n      ;\n      function resolve(value) {\n        done = true;\n        while (notify.length) notify.shift()(value);\n      }\n      fn(resolve);\n      return p;\n    },\n    justCreated = false,\n    constructors = Dict(null),\n    waitingList = Dict(null),\n    nodeNames = new Map(),\n    secondArgument = function (is) {\n      return is.toLowerCase();\n    },\n  \n    // used to create unique instances\n    create = Object.create || function Bridge(proto) {\n      // silly broken polyfill probably ever used but short enough to work\n      return proto ? ((Bridge.prototype = proto), new Bridge()) : this;\n    },\n  \n    // will set the prototype if possible\n    // or copy over all properties\n    setPrototype = sPO || (\n      hasProto ?\n        function (o, p) {\n          o.__proto__ = p;\n          return o;\n        } : (\n      (gOPN && gOPD) ?\n        (function(){\n          function setProperties(o, p) {\n            for (var\n              key,\n              names = gOPN(p),\n              i = 0, length = names.length;\n              i < length; i++\n            ) {\n              key = names[i];\n              if (!hOP.call(o, key)) {\n                defineProperty(o, key, gOPD(p, key));\n              }\n            }\n          }\n          return function (o, p) {\n            do {\n              setProperties(o, p);\n            } while ((p = gPO(p)) && !iPO.call(p, o));\n            return o;\n          };\n        }()) :\n        function (o, p) {\n          for (var key in p) {\n            o[key] = p[key];\n          }\n          return o;\n        }\n    )),\n  \n    // DOM shortcuts and helpers, if any\n  \n    MutationObserver = window.MutationObserver ||\n                       window.WebKitMutationObserver,\n  \n    HTMLElementPrototype = (\n      window.HTMLElement ||\n      window.Element ||\n      window.Node\n    ).prototype,\n  \n    IE8 = !iPO.call(HTMLElementPrototype, documentElement),\n  \n    safeProperty = IE8 ? function (o, k, d) {\n      o[k] = d.value;\n      return o;\n    } : defineProperty,\n  \n    isValidNode = IE8 ?\n      function (node) {\n        return node.nodeType === 1;\n      } :\n      function (node) {\n        return iPO.call(HTMLElementPrototype, node);\n      },\n  \n    targets = IE8 && [],\n  \n    attachShadow = HTMLElementPrototype.attachShadow,\n    cloneNode = HTMLElementPrototype.cloneNode,\n    dispatchEvent = HTMLElementPrototype.dispatchEvent,\n    getAttribute = HTMLElementPrototype.getAttribute,\n    hasAttribute = HTMLElementPrototype.hasAttribute,\n    removeAttribute = HTMLElementPrototype.removeAttribute,\n    setAttribute = HTMLElementPrototype.setAttribute,\n  \n    // replaced later on\n    createElement = document.createElement,\n    patchedCreateElement = createElement,\n  \n    // shared observer for all attributes\n    attributesObserver = MutationObserver && {\n      attributes: true,\n      characterData: true,\n      attributeOldValue: true\n    },\n  \n    // useful to detect only if there's no MutationObserver\n    DOMAttrModified = MutationObserver || function(e) {\n      doesNotSupportDOMAttrModified = false;\n      documentElement.removeEventListener(\n        DOM_ATTR_MODIFIED,\n        DOMAttrModified\n      );\n    },\n  \n    // will both be used to make DOMNodeInserted asynchronous\n    asapQueue,\n    asapTimer = 0,\n  \n    // internal flags\n    V0 = REGISTER_ELEMENT in document,\n    setListener = true,\n    justSetup = false,\n    doesNotSupportDOMAttrModified = true,\n    dropDomContentLoaded = true,\n  \n    // needed for the innerHTML helper\n    notFromInnerHTMLHelper = true,\n  \n    // optionally defined later on\n    onSubtreeModified,\n    callDOMAttrModified,\n    getAttributesMirror,\n    observer,\n    observe,\n  \n    // based on setting prototype capability\n    // will check proto or the expando attribute\n    // in order to setup the node once\n    patchIfNotAlready,\n    patch\n  ;\n  \n  // only if needed\n  if (!V0) {\n  \n    if (sPO || hasProto) {\n        patchIfNotAlready = function (node, proto) {\n          if (!iPO.call(proto, node)) {\n            setupNode(node, proto);\n          }\n        };\n        patch = setupNode;\n    } else {\n        patchIfNotAlready = function (node, proto) {\n          if (!node[EXPANDO_UID]) {\n            node[EXPANDO_UID] = Object(true);\n            setupNode(node, proto);\n          }\n        };\n        patch = patchIfNotAlready;\n    }\n  \n    if (IE8) {\n      doesNotSupportDOMAttrModified = false;\n      (function (){\n        var\n          descriptor = gOPD(HTMLElementPrototype, ADD_EVENT_LISTENER),\n          addEventListener = descriptor.value,\n          patchedRemoveAttribute = function (name) {\n            var e = new CustomEvent(DOM_ATTR_MODIFIED, {bubbles: true});\n            e.attrName = name;\n            e.prevValue = getAttribute.call(this, name);\n            e.newValue = null;\n            e[REMOVAL] = e.attrChange = 2;\n            removeAttribute.call(this, name);\n            dispatchEvent.call(this, e);\n          },\n          patchedSetAttribute = function (name, value) {\n            var\n              had = hasAttribute.call(this, name),\n              old = had && getAttribute.call(this, name),\n              e = new CustomEvent(DOM_ATTR_MODIFIED, {bubbles: true})\n            ;\n            setAttribute.call(this, name, value);\n            e.attrName = name;\n            e.prevValue = had ? old : null;\n            e.newValue = value;\n            if (had) {\n              e[MODIFICATION] = e.attrChange = 1;\n            } else {\n              e[ADDITION] = e.attrChange = 0;\n            }\n            dispatchEvent.call(this, e);\n          },\n          onPropertyChange = function (e) {\n            // jshint eqnull:true\n            var\n              node = e.currentTarget,\n              superSecret = node[EXPANDO_UID],\n              propertyName = e.propertyName,\n              event\n            ;\n            if (superSecret.hasOwnProperty(propertyName)) {\n              superSecret = superSecret[propertyName];\n              event = new CustomEvent(DOM_ATTR_MODIFIED, {bubbles: true});\n              event.attrName = superSecret.name;\n              event.prevValue = superSecret.value || null;\n              event.newValue = (superSecret.value = node[propertyName] || null);\n              if (event.prevValue == null) {\n                event[ADDITION] = event.attrChange = 0;\n              } else {\n                event[MODIFICATION] = event.attrChange = 1;\n              }\n              dispatchEvent.call(node, event);\n            }\n          }\n        ;\n        descriptor.value = function (type, handler, capture) {\n          if (\n            type === DOM_ATTR_MODIFIED &&\n            this[ATTRIBUTE_CHANGED_CALLBACK] &&\n            this.setAttribute !== patchedSetAttribute\n          ) {\n            this[EXPANDO_UID] = {\n              className: {\n                name: 'class',\n                value: this.className\n              }\n            };\n            this.setAttribute = patchedSetAttribute;\n            this.removeAttribute = patchedRemoveAttribute;\n            addEventListener.call(this, 'propertychange', onPropertyChange);\n          }\n          addEventListener.call(this, type, handler, capture);\n        };\n        defineProperty(HTMLElementPrototype, ADD_EVENT_LISTENER, descriptor);\n      }());\n    } else if (!MutationObserver) {\n      documentElement[ADD_EVENT_LISTENER](DOM_ATTR_MODIFIED, DOMAttrModified);\n      documentElement.setAttribute(EXPANDO_UID, 1);\n      documentElement.removeAttribute(EXPANDO_UID);\n      if (doesNotSupportDOMAttrModified) {\n        onSubtreeModified = function (e) {\n          var\n            node = this,\n            oldAttributes,\n            newAttributes,\n            key\n          ;\n          if (node === e.target) {\n            oldAttributes = node[EXPANDO_UID];\n            node[EXPANDO_UID] = (newAttributes = getAttributesMirror(node));\n            for (key in newAttributes) {\n              if (!(key in oldAttributes)) {\n                // attribute was added\n                return callDOMAttrModified(\n                  0,\n                  node,\n                  key,\n                  oldAttributes[key],\n                  newAttributes[key],\n                  ADDITION\n                );\n              } else if (newAttributes[key] !== oldAttributes[key]) {\n                // attribute was changed\n                return callDOMAttrModified(\n                  1,\n                  node,\n                  key,\n                  oldAttributes[key],\n                  newAttributes[key],\n                  MODIFICATION\n                );\n              }\n            }\n            // checking if it has been removed\n            for (key in oldAttributes) {\n              if (!(key in newAttributes)) {\n                // attribute removed\n                return callDOMAttrModified(\n                  2,\n                  node,\n                  key,\n                  oldAttributes[key],\n                  newAttributes[key],\n                  REMOVAL\n                );\n              }\n            }\n          }\n        };\n        callDOMAttrModified = function (\n          attrChange,\n          currentTarget,\n          attrName,\n          prevValue,\n          newValue,\n          action\n        ) {\n          var e = {\n            attrChange: attrChange,\n            currentTarget: currentTarget,\n            attrName: attrName,\n            prevValue: prevValue,\n            newValue: newValue\n          };\n          e[action] = attrChange;\n          onDOMAttrModified(e);\n        };\n        getAttributesMirror = function (node) {\n          for (var\n            attr, name,\n            result = {},\n            attributes = node.attributes,\n            i = 0, length = attributes.length;\n            i < length; i++\n          ) {\n            attr = attributes[i];\n            name = attr.name;\n            if (name !== 'setAttribute') {\n              result[name] = attr.value;\n            }\n          }\n          return result;\n        };\n      }\n    }\n  \n    // set as enumerable, writable and configurable\n    document[REGISTER_ELEMENT] = function registerElement(type, options) {\n      upperType = type.toUpperCase();\n      if (setListener) {\n        // only first time document.registerElement is used\n        // we need to set this listener\n        // setting it by default might slow down for no reason\n        setListener = false;\n        if (MutationObserver) {\n          observer = (function(attached, detached){\n            function checkEmAll(list, callback) {\n              for (var i = 0, length = list.length; i < length; callback(list[i++])){}\n            }\n            return new MutationObserver(function (records) {\n              for (var\n                current, node, newValue,\n                i = 0, length = records.length; i < length; i++\n              ) {\n                current = records[i];\n                if (current.type === 'childList') {\n                  checkEmAll(current.addedNodes, attached);\n                  checkEmAll(current.removedNodes, detached);\n                } else {\n                  node = current.target;\n                  if (notFromInnerHTMLHelper &&\n                      node[ATTRIBUTE_CHANGED_CALLBACK] &&\n                      current.attributeName !== 'style') {\n                    newValue = getAttribute.call(node, current.attributeName);\n                    if (newValue !== current.oldValue) {\n                      node[ATTRIBUTE_CHANGED_CALLBACK](\n                        current.attributeName,\n                        current.oldValue,\n                        newValue\n                      );\n                    }\n                  }\n                }\n              }\n            });\n          }(executeAction(ATTACHED), executeAction(DETACHED)));\n          observe = function (node) {\n            observer.observe(\n              node,\n              {\n                childList: true,\n                subtree: true\n              }\n            );\n            return node;\n          };\n          observe(document);\n          if (attachShadow) {\n            HTMLElementPrototype.attachShadow = function () {\n              return observe(attachShadow.apply(this, arguments));\n            };\n          }\n        } else {\n          asapQueue = [];\n          document[ADD_EVENT_LISTENER]('DOMNodeInserted', onDOMNode(ATTACHED));\n          document[ADD_EVENT_LISTENER]('DOMNodeRemoved', onDOMNode(DETACHED));\n        }\n  \n        document[ADD_EVENT_LISTENER](DOM_CONTENT_LOADED, onReadyStateChange);\n        document[ADD_EVENT_LISTENER]('readystatechange', onReadyStateChange);\n  \n        HTMLElementPrototype.cloneNode = function (deep) {\n          var\n            node = cloneNode.call(this, !!deep),\n            i = getTypeIndex(node)\n          ;\n          if (-1 < i) patch(node, protos[i]);\n          if (deep && query.length) loopAndSetup(node.querySelectorAll(query));\n          return node;\n        };\n      }\n  \n      if (justSetup) return (justSetup = false);\n  \n      if (-2 < (\n        indexOf.call(types, PREFIX_IS + upperType) +\n        indexOf.call(types, PREFIX_TAG + upperType)\n      )) {\n        throwTypeError(type);\n      }\n  \n      if (!validName.test(upperType) || -1 < indexOf.call(invalidNames, upperType)) {\n        throw new Error('The type ' + type + ' is invalid');\n      }\n  \n      var\n        constructor = function () {\n          return extending ?\n            document.createElement(nodeName, upperType) :\n            document.createElement(nodeName);\n        },\n        opt = options || OP,\n        extending = hOP.call(opt, EXTENDS),\n        nodeName = extending ? options[EXTENDS].toUpperCase() : upperType,\n        upperType,\n        i\n      ;\n  \n      if (extending && -1 < (\n        indexOf.call(types, PREFIX_TAG + nodeName)\n      )) {\n        throwTypeError(nodeName);\n      }\n  \n      i = types.push((extending ? PREFIX_IS : PREFIX_TAG) + upperType) - 1;\n  \n      query = query.concat(\n        query.length ? ',' : '',\n        extending ? nodeName + '[is=\"' + type.toLowerCase() + '\"]' : nodeName\n      );\n  \n      constructor.prototype = (\n        protos[i] = hOP.call(opt, 'prototype') ?\n          opt.prototype :\n          create(HTMLElementPrototype)\n      );\n  \n      if (query.length) loopAndVerify(\n        document.querySelectorAll(query),\n        ATTACHED\n      );\n  \n      return constructor;\n    };\n  \n    document.createElement = (patchedCreateElement = function (localName, typeExtension) {\n      var\n        is = getIs(typeExtension),\n        node = is ?\n          createElement.call(document, localName, secondArgument(is)) :\n          createElement.call(document, localName),\n        name = '' + localName,\n        i = indexOf.call(\n          types,\n          (is ? PREFIX_IS : PREFIX_TAG) +\n          (is || name).toUpperCase()\n        ),\n        setup = -1 < i\n      ;\n      if (is) {\n        node.setAttribute('is', is = is.toLowerCase());\n        if (setup) {\n          setup = isInQSA(name.toUpperCase(), is);\n        }\n      }\n      notFromInnerHTMLHelper = !document.createElement.innerHTMLHelper;\n      if (setup) patch(node, protos[i]);\n      return node;\n    });\n  \n  }\n  \n  function ASAP() {\n    var queue = asapQueue.splice(0, asapQueue.length);\n    asapTimer = 0;\n    while (queue.length) {\n      queue.shift().call(\n        null, queue.shift()\n      );\n    }\n  }\n  \n  function loopAndVerify(list, action) {\n    for (var i = 0, length = list.length; i < length; i++) {\n      verifyAndSetupAndAction(list[i], action);\n    }\n  }\n  \n  function loopAndSetup(list) {\n    for (var i = 0, length = list.length, node; i < length; i++) {\n      node = list[i];\n      patch(node, protos[getTypeIndex(node)]);\n    }\n  }\n  \n  function executeAction(action) {\n    return function (node) {\n      if (isValidNode(node)) {\n        verifyAndSetupAndAction(node, action);\n        if (query.length) loopAndVerify(\n          node.querySelectorAll(query),\n          action\n        );\n      }\n    };\n  }\n  \n  function getTypeIndex(target) {\n    var\n      is = getAttribute.call(target, 'is'),\n      nodeName = target.nodeName.toUpperCase(),\n      i = indexOf.call(\n        types,\n        is ?\n            PREFIX_IS + is.toUpperCase() :\n            PREFIX_TAG + nodeName\n      )\n    ;\n    return is && -1 < i && !isInQSA(nodeName, is) ? -1 : i;\n  }\n  \n  function isInQSA(name, type) {\n    return -1 < query.indexOf(name + '[is=\"' + type + '\"]');\n  }\n  \n  function onDOMAttrModified(e) {\n    var\n      node = e.currentTarget,\n      attrChange = e.attrChange,\n      attrName = e.attrName,\n      target = e.target,\n      addition = e[ADDITION] || 2,\n      removal = e[REMOVAL] || 3\n    ;\n    if (notFromInnerHTMLHelper &&\n        (!target || target === node) &&\n        node[ATTRIBUTE_CHANGED_CALLBACK] &&\n        attrName !== 'style' && (\n          e.prevValue !== e.newValue ||\n          // IE9, IE10, and Opera 12 gotcha\n          e.newValue === '' && (\n            attrChange === addition ||\n            attrChange === removal\n          )\n    )) {\n      node[ATTRIBUTE_CHANGED_CALLBACK](\n        attrName,\n        attrChange === addition ? null : e.prevValue,\n        attrChange === removal ? null : e.newValue\n      );\n    }\n  }\n  \n  function onDOMNode(action) {\n    var executor = executeAction(action);\n    return function (e) {\n      asapQueue.push(executor, e.target);\n      if (asapTimer) clearTimeout(asapTimer);\n      asapTimer = setTimeout(ASAP, 1);\n    };\n  }\n  \n  function onReadyStateChange(e) {\n    if (dropDomContentLoaded) {\n      dropDomContentLoaded = false;\n      e.currentTarget.removeEventListener(DOM_CONTENT_LOADED, onReadyStateChange);\n    }\n    if (query.length) loopAndVerify(\n      (e.target || document).querySelectorAll(query),\n      e.detail === DETACHED ? DETACHED : ATTACHED\n    );\n    if (IE8) purge();\n  }\n  \n  function patchedSetAttribute(name, value) {\n    // jshint validthis:true\n    var self = this;\n    setAttribute.call(self, name, value);\n    onSubtreeModified.call(self, {target: self});\n  }\n  \n  function setupNode(node, proto) {\n    setPrototype(node, proto);\n    if (observer) {\n      observer.observe(node, attributesObserver);\n    } else {\n      if (doesNotSupportDOMAttrModified) {\n        node.setAttribute = patchedSetAttribute;\n        node[EXPANDO_UID] = getAttributesMirror(node);\n        node[ADD_EVENT_LISTENER](DOM_SUBTREE_MODIFIED, onSubtreeModified);\n      }\n      node[ADD_EVENT_LISTENER](DOM_ATTR_MODIFIED, onDOMAttrModified);\n    }\n    if (node[CREATED_CALLBACK] && notFromInnerHTMLHelper) {\n      node.created = true;\n      node[CREATED_CALLBACK]();\n      node.created = false;\n    }\n  }\n  \n  function purge() {\n    for (var\n      node,\n      i = 0,\n      length = targets.length;\n      i < length; i++\n    ) {\n      node = targets[i];\n      if (!documentElement.contains(node)) {\n        length--;\n        targets.splice(i--, 1);\n        verifyAndSetupAndAction(node, DETACHED);\n      }\n    }\n  }\n  \n  function throwTypeError(type) {\n    throw new Error('A ' + type + ' type is already registered');\n  }\n  \n  function verifyAndSetupAndAction(node, action) {\n    var\n      fn,\n      i = getTypeIndex(node)\n    ;\n    if (-1 < i) {\n      patchIfNotAlready(node, protos[i]);\n      i = 0;\n      if (action === ATTACHED && !node[ATTACHED]) {\n        node[DETACHED] = false;\n        node[ATTACHED] = true;\n        i = 1;\n        if (IE8 && indexOf.call(targets, node) < 0) {\n          targets.push(node);\n        }\n      } else if (action === DETACHED && !node[DETACHED]) {\n        node[ATTACHED] = false;\n        node[DETACHED] = true;\n        i = 1;\n      }\n      if (i && (fn = node[action + CALLBACK])) fn.call(node);\n    }\n  }\n  \n  \n  \n  // V1 in da House!\n  function CustomElementRegistry() {}\n  \n  CustomElementRegistry.prototype = {\n    constructor: CustomElementRegistry,\n    // a workaround for the stubborn WebKit\n    define: usableCustomElements ?\n      function (name, Class, options) {\n        if (options) {\n          CERDefine(name, Class, options);\n        } else {\n          var NAME = name.toUpperCase();\n          constructors[NAME] = {\n            constructor: Class,\n            create: [NAME]\n          };\n          nodeNames.set(Class, NAME);\n          customElements.define(name, Class);\n        }\n      } :\n      CERDefine,\n    get: usableCustomElements ?\n      function (name) {\n        return customElements.get(name) || get(name);\n      } :\n      get,\n    whenDefined: usableCustomElements ?\n      function (name) {\n        return Promise.race([\n          customElements.whenDefined(name),\n          whenDefined(name)\n        ]);\n      } :\n      whenDefined\n  };\n  \n  function CERDefine(name, Class, options) {\n    var\n      is = options && options[EXTENDS] || '',\n      CProto = Class.prototype,\n      proto = create(CProto),\n      attributes = Class.observedAttributes || empty,\n      definition = {prototype: proto}\n    ;\n    // TODO: is this needed at all since it's inherited?\n    // defineProperty(proto, 'constructor', {value: Class});\n    safeProperty(proto, CREATED_CALLBACK, {\n        value: function () {\n          if (justCreated) justCreated = false;\n          else if (!this[DRECEV1]) {\n            this[DRECEV1] = true;\n            new Class(this);\n            if (CProto[CREATED_CALLBACK])\n              CProto[CREATED_CALLBACK].call(this);\n            var info = constructors[nodeNames.get(Class)];\n            if (!usableCustomElements || info.create.length > 1) {\n              notifyAttributes(this);\n            }\n          }\n      }\n    });\n    safeProperty(proto, ATTRIBUTE_CHANGED_CALLBACK, {\n      value: function (name) {\n        if (-1 < indexOf.call(attributes, name))\n          CProto[ATTRIBUTE_CHANGED_CALLBACK].apply(this, arguments);\n      }\n    });\n    if (CProto[CONNECTED_CALLBACK]) {\n      safeProperty(proto, ATTACHED_CALLBACK, {\n        value: CProto[CONNECTED_CALLBACK]\n      });\n    }\n    if (CProto[DISCONNECTED_CALLBACK]) {\n      safeProperty(proto, DETACHED_CALLBACK, {\n        value: CProto[DISCONNECTED_CALLBACK]\n      });\n    }\n    if (is) definition[EXTENDS] = is;\n    name = name.toUpperCase();\n    constructors[name] = {\n      constructor: Class,\n      create: is ? [is, secondArgument(name)] : [name]\n    };\n    nodeNames.set(Class, name);\n    document[REGISTER_ELEMENT](name.toLowerCase(), definition);\n    whenDefined(name);\n    waitingList[name].r();\n  }\n  \n  function get(name) {\n    var info = constructors[name.toUpperCase()];\n    return info && info.constructor;\n  }\n  \n  function getIs(options) {\n    return typeof options === 'string' ?\n        options : (options && options.is || '');\n  }\n  \n  function notifyAttributes(self) {\n    var\n      callback = self[ATTRIBUTE_CHANGED_CALLBACK],\n      attributes = callback ? self.attributes : empty,\n      i = attributes.length,\n      attribute\n    ;\n    while (i--) {\n      attribute =  attributes[i]; // || attributes.item(i);\n      callback.call(\n        self,\n        attribute.name || attribute.nodeName,\n        null,\n        attribute.value || attribute.nodeValue\n      );\n    }\n  }\n  \n  function whenDefined(name) {\n    name = name.toUpperCase();\n    if (!(name in waitingList)) {\n      waitingList[name] = {};\n      waitingList[name].p = new Promise(function (resolve) {\n        waitingList[name].r = resolve;\n      });\n    }\n    return waitingList[name].p;\n  }\n  \n  function polyfillV1() {\n    if (customElements) delete window.customElements;\n    defineProperty(window, 'customElements', {\n      configurable: true,\n      value: new CustomElementRegistry()\n    });\n    defineProperty(window, 'CustomElementRegistry', {\n      configurable: true,\n      value: CustomElementRegistry\n    });\n    for (var\n      patchClass = function (name) {\n        var Class = window[name];\n        if (Class) {\n          window[name] = function CustomElementsV1(self) {\n            var info, isNative;\n            if (!self) self = this;\n            if (!self[DRECEV1]) {\n              justCreated = true;\n              info = constructors[nodeNames.get(self.constructor)];\n              isNative = usableCustomElements && info.create.length === 1;\n              self = isNative ?\n                Reflect.construct(Class, empty, info.constructor) :\n                document.createElement.apply(document, info.create);\n              self[DRECEV1] = true;\n              justCreated = false;\n              if (!isNative) notifyAttributes(self);\n            }\n            return self;\n          };\n          window[name].prototype = Class.prototype;\n          try {\n            Class.prototype.constructor = window[name];\n          } catch(WebKit) {\n            fixGetClass = true;\n            defineProperty(Class, DRECEV1, {value: window[name]});\n          }\n        }\n      },\n      Classes = htmlClass.get(/^HTML[A-Z]*[a-z]/),\n      i = Classes.length;\n      i--;\n      patchClass(Classes[i])\n    ) {}\n    (document.createElement = function (name, options) {\n      var is = getIs(options);\n      return is ?\n        patchedCreateElement.call(this, name, secondArgument(is)) :\n        patchedCreateElement.call(this, name);\n    });\n    if (!V0) {\n      justSetup = true;\n      document[REGISTER_ELEMENT]('');\n    }\n  }\n  \n  // if customElements is not there at all\n  if (!customElements || polyfill === 'force') polyfillV1();\n  else {\n    // if available test extends work as expected\n    try {\n      (function (DRE, options, name) {\n        options[EXTENDS] = 'a';\n        DRE.prototype = create(HTMLAnchorElement.prototype);\n        DRE.prototype.constructor = DRE;\n        window.customElements.define(name, DRE, options);\n        if (\n          getAttribute.call(document.createElement('a', {is: name}), 'is') !== name ||\n          (usableCustomElements && getAttribute.call(new DRE(), 'is') !== name)\n        ) {\n          throw options;\n        }\n      }(\n        function DRE() {\n          return Reflect.construct(HTMLAnchorElement, [], DRE);\n        },\n        {},\n        'document-register-element-a'\n      ));\n    } catch(o_O) {\n      // or force the polyfill if not\n      // and keep internal original reference\n      polyfillV1();\n    }\n  }\n  \n  try {\n    createElement.call(document, 'a', 'a');\n  } catch(FireFox) {\n    secondArgument = function (is) {\n      return {is: is.toLowerCase()};\n    };\n  }\n  \n}\n\nexports.installCustomElements = installCustomElements;\n\n","'use strict';\n\n/**\n * Constructs a ES6/Promises A+ Promise instance.\n *\n * @constructor\n * @param {function(function(*=), function (*=))} resolver\n */\nfunction Promise(resolver) {\n  if (!(this instanceof Promise)) {\n    throw new TypeError('Constructor Promise requires `new`');\n  }\n  if (!isFunction(resolver)) {\n    throw new TypeError('Must pass resolver function');\n  }\n\n  /**\n   * @type {function(this:Promise,*=,function(*=),function(*=),Deferred):!Promise}\n   * @private\n   */\n  this._state = PendingPromise;\n\n  /**\n   * @type {*}\n   * @private\n   */\n  this._value = [];\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this._isChainEnd = true;\n\n  doResolve(\n    this,\n    adopter(this, FulfilledPromise),\n    adopter(this, RejectedPromise),\n    { then: resolver }\n  );\n}\n\n/****************************\n  Public Instance Methods\n ****************************/\n\n/**\n * Creates a new promise instance that will receive the result of this promise\n * as inputs to the onFulfilled or onRejected callbacks.\n *\n * @param {function(*)} onFulfilled\n * @param {function(*)} onRejected\n */\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  onFulfilled = isFunction(onFulfilled) ? onFulfilled : void 0;\n  onRejected = isFunction(onRejected) ? onRejected : void 0;\n\n  if (onFulfilled || onRejected) {\n    this._isChainEnd = false;\n  }\n\n  return this._state(\n    this._value,\n    onFulfilled,\n    onRejected\n  );\n};\n\n/**\n * Creates a new promise that will handle the rejected state of this promise.\n *\n * @param {function(*)} onRejected\n * @returns {!Promise}\n */\nPromise.prototype.catch = function(onRejected) {\n  return this.then(void 0, onRejected);\n};\n\n/****************************\n  Public Static Methods\n ****************************/\n\n/**\n * Creates a fulfilled Promise of value. If value is itself a then-able,\n * resolves with the then-able's value.\n *\n * @this {!Promise}\n * @param {*=} value\n * @returns {!Promise}\n */\nPromise.resolve = function(value) {\n  var Constructor = this;\n  var promise;\n\n  if (isObject(value) && value instanceof this) {\n    promise = value;\n  } else {\n    promise = new Constructor(function(resolve) {\n      resolve(value);\n    });\n  }\n\n  return /** @type {!Promise} */(promise);\n};\n\n/**\n * Creates a rejected Promise of reason.\n *\n * @this {!Promise}\n * @param {*=} reason\n * @returns {!Promise}\n */\nPromise.reject = function(reason) {\n  var Constructor = this;\n  var promise = new Constructor(function(_, reject) {\n    reject(reason);\n  });\n\n  return /** @type {!Promise} */(promise);\n};\n\n/**\n * Creates a Promise that will resolve with an array of the values of the\n * passed in promises. If any promise rejects, the returned promise will\n * reject.\n *\n * @this {!Promise}\n * @param {!Array<Promise|*>} promises\n * @returns {!Promise}\n */\nPromise.all = function(promises) {\n  var Constructor = this;\n  var promise = new Constructor(function(resolve, reject) {\n    var length = promises.length;\n    var values = new Array(length);\n\n    if (length === 0) {\n      return resolve(values);\n    }\n\n    each(promises, function(promise, index) {\n      Constructor.resolve(promise).then(function(value) {\n        values[index] = value;\n        if (--length === 0) {\n          resolve(values);\n        }\n      }, reject);\n    });\n  });\n\n  return /** @type {!Promise} */(promise);\n};\n\n/**\n * Creates a Promise that will resolve or reject based on the first\n * resolved or rejected promise.\n *\n * @this {!Promise}\n * @param {!Array<Promise|*>} promises\n * @returns {!Promise}\n */\nPromise.race = function(promises) {\n  var Constructor = this;\n  var promise = new Constructor(function(resolve, reject) {\n    for (var i = 0; i < promises.length; i++) {\n      Constructor.resolve(promises[i]).then(resolve, reject);\n    }\n  });\n\n  return /** @type {!Promise} */(promise);\n};\n\nvar onPossiblyUnhandledRejection = function(reason, promise) {\n  throw reason;\n};\n\n/**\n * An internal use static function.\n */\nPromise._overrideUnhandledExceptionHandler = function(handler) {\n  onPossiblyUnhandledRejection = handler;\n};\n\n/****************************\n  Private functions\n ****************************/\n\n/**\n * The Fulfilled Promise state. Calls onFulfilled with the resolved value of\n * this promise, creating a new promise.\n *\n * If there is no onFulfilled, returns the current promise to avoid an promise\n * instance.\n *\n * @this {!Promise} The current promise\n * @param {*=} value The current promise's resolved value.\n * @param {function(*=)=} onFulfilled\n * @param {function(*=)=} unused\n * @param {Deferred} deferred A deferred object that holds a promise and its\n *     resolve and reject functions. It IS NOT passed when called from\n *     Promise#then to save an object instance (since we may return the current\n *     promise). It IS passed in when adopting the Fulfilled state from the\n *     Pending state.\n * @returns {!Promise}\n */\nfunction FulfilledPromise(value, onFulfilled, unused, deferred) {\n  if (!onFulfilled) {\n    deferredAdopt(deferred, FulfilledPromise, value);\n    return this;\n  }\n  if (!deferred) {\n    deferred = new Deferred(this.constructor);\n  }\n  defer(tryCatchDeferred(deferred, onFulfilled, value));\n  return deferred.promise;\n}\n\n/**\n * The Rejected Promise state. Calls onRejected with the resolved value of\n * this promise, creating a new promise.\n *\n * If there is no onRejected, returns the current promise to avoid an promise\n * instance.\n *\n * @this {!Promise} The current promise\n * @param {*=} reason The current promise's rejection reason.\n * @param {function(*=)=} unused\n * @param {function(*=)=} onRejected\n * @param {Deferred} deferred A deferred object that holds a promise and its\n *     resolve and reject functions. It IS NOT passed when called from\n *     Promise#then to save an object instance (since we may return the current\n *     promise). It IS passed in when adopting the Rejected state from the\n *     Pending state.\n * @returns {!Promise}\n */\nfunction RejectedPromise(reason, unused, onRejected, deferred) {\n  if (!onRejected) {\n    deferredAdopt(deferred, RejectedPromise, reason);\n    return this;\n  }\n  if (!deferred) {\n    deferred = new Deferred(this.constructor);\n  }\n  defer(tryCatchDeferred(deferred, onRejected, reason));\n  return deferred.promise;\n}\n\n/**\n * The Pending Promise state. Eventually calls onFulfilled once the promise has\n * resolved, or onRejected once the promise rejects.\n *\n * If there is no onFulfilled and no onRejected, returns the current promise to\n * avoid an promise instance.\n *\n * @this {!Promise} The current promise\n * @param {*=} queue The current promise's pending promises queue.\n * @param {function(*=)=} onFulfilled\n * @param {function(*=)=} onRejected\n * @param {Deferred} deferred A deferred object that holds a promise and its\n *     resolve and reject functions. It IS NOT passed when called from\n *     Promise#then to save an object instance (since we may return the current\n *     promise). It IS passed in when adopting the Pending state from the\n *     Pending state of another promise.\n * @returns {!Promise}\n */\nfunction PendingPromise(queue, onFulfilled, onRejected, deferred) {\n  if (!deferred) {\n    if (!onFulfilled && !onRejected) { return this; }\n    deferred = new Deferred(this.constructor);\n  }\n  queue.push({\n    deferred: deferred,\n    onFulfilled: onFulfilled || deferred.resolve,\n    onRejected: onRejected || deferred.reject\n  });\n  return deferred.promise;\n}\n\n/**\n * Constructs a deferred instance that holds a promise and its resolve and\n * reject functions.\n *\n * @constructor\n */\nfunction Deferred(Promise) {\n  var deferred = this;\n  /** @type {!Promise} */\n  this.promise = new Promise(function(resolve, reject) {\n    /** @type {function(*=)} */\n    deferred.resolve = resolve;\n\n    /** @type {function(*=)} */\n    deferred.reject = reject;\n  });\n  return deferred;\n}\n\n/**\n * Transitions the state of promise to another state. This is only ever called\n * on with a promise that is currently in the Pending state.\n *\n * @param {!Promise} promise\n * @param {function(this:Promise,*=,function(*=),function(*=),Deferred):!Promise} state\n * @param {*=} value\n */\nfunction adopt(promise, state, value, adoptee) {\n  var queue = promise._value;\n  promise._state = state;\n  promise._value = value;\n\n  if (adoptee && state === PendingPromise) {\n    adoptee._state(value, void 0, void 0, {\n      promise: promise,\n      resolve: void 0,\n      reject: void 0\n    });\n  }\n\n  for (var i = 0; i < queue.length; i++) {\n    var next = queue[i];\n    promise._state(\n      value,\n      next.onFulfilled,\n      next.onRejected,\n      next.deferred\n    );\n  }\n  queue.length = 0;\n\n  // Determine if this rejected promise will be \"handled\".\n  if (state === RejectedPromise && promise._isChainEnd) {\n    setTimeout(function() {\n      if (promise._isChainEnd) {\n        onPossiblyUnhandledRejection(value, promise);\n      }\n    }, 0);\n  }\n}\n\n/**\n * A partial application of adopt.\n *\n * @param {!Promise} promise\n * @param {function(this:Promise,*=,function(*=),function(*=),Deferred):!Promise} state\n * @returns {function(*=)}\n */\nfunction adopter(promise, state) {\n  return function(value) {\n    adopt(promise, state, value);\n  };\n}\n\n/**\n * Updates a deferred promises state. Necessary for updating an adopting\n * promise's state when the adoptee resolves.\n *\n * @param {?Deferred} deferred\n * @param {function(this:Promise,*=,function(*=),function(*=),Deferred):!Promise} state\n * @param {*=} value\n */\nfunction deferredAdopt(deferred, state, value) {\n  if (deferred) {\n    var promise = deferred.promise;\n    promise._state = state;\n    promise._value = value;\n  }\n}\n\n/**\n * A no-op function to prevent double resolving.\n */\nfunction noop() {}\n\n/**\n * Tests if fn is a Function\n *\n * @param {*} fn\n * @returns {boolean}\n */\nfunction isFunction(fn) {\n  return typeof fn === 'function';\n}\n\n/**\n * Tests if fn is an Object\n *\n * @param {*} obj\n * @returns {boolean}\n */\nfunction isObject(obj) {\n  return obj === Object(obj);\n}\n\n/**\n * Iterates over each element of an array, calling the iterator with the\n * element and its index.\n *\n * @param {!Array} collection\n * @param {function(*=,number)} iterator\n */\nfunction each(collection, iterator) {\n  for (var i = 0; i < collection.length; i++) {\n    iterator(collection[i], i);\n  }\n}\n\n/**\n * Creates a function that will attempt to resolve the deferred with the return\n * of fn. If any error is raised, rejects instead.\n *\n * @param {!Deferred} deferred\n * @param {function(*=)} fn\n * @param {*} arg\n * @returns {function()}\n */\nfunction tryCatchDeferred(deferred, fn, arg) {\n  var promise = deferred.promise;\n  var resolve = deferred.resolve;\n  var reject = deferred.reject;\n  return function() {\n    try {\n      var result = fn(arg);\n      doResolve(promise, resolve, reject, result, result);\n    } catch (e) {\n      reject(e);\n    }\n  };\n}\n\n/**\n * Queues and executes multiple deferred functions on another run loop.\n */\nvar defer = (function() {\n  /**\n   * Defers fn to another run loop.\n   */\n  var scheduleFlush;\n  if (typeof window !== 'undefined' && window.postMessage) {\n    window.addEventListener('message', flush);\n    scheduleFlush = function() {\n      window.postMessage('macro-task', '*');\n    };\n  } else {\n    scheduleFlush = function() {\n      setTimeout(flush, 0);\n    };\n  }\n\n  var queue = new Array(16);\n  var length = 0;\n\n  function flush() {\n    for (var i = 0; i < length; i++) {\n      var fn = queue[i];\n      queue[i] = null;\n      fn();\n    }\n    length = 0;\n  }\n\n  /**\n   * @param {function()} fn\n   */\n  function defer(fn) {\n    if (length === 0) { scheduleFlush(); }\n    queue[length++] = fn;\n  }\n\n  return defer;\n})();\n\n/**\n * The Promise resolution procedure.\n * https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n *\n * @param {!Promise} promise\n * @param {function(*=)} resolve\n * @param {function(*=)} reject\n * @param {*} value\n * @param {*=} context\n */\nfunction doResolve(promise, resolve, reject, value, context) {\n  var _reject = reject;\n  var then;\n  var _resolve;\n  try {\n    if (value === promise) {\n      throw new TypeError('Cannot fulfill promise with itself');\n    }\n    var isObj = isObject(value);\n    if (isObj && value instanceof promise.constructor) {\n      adopt(promise, value._state, value._value, value);\n    } else if (isObj && (then = value.then) && isFunction(then)) {\n      _resolve = function(value) {\n        _resolve = _reject = noop;\n        doResolve(promise, resolve, reject, value, value);\n      };\n      _reject = function(reason) {\n        _resolve = _reject = noop;\n        reject(reason);\n      };\n      then.call(\n        context,\n        function(value) { _resolve(value); },\n        function(reason) { _reject(reason); }\n      );\n    } else {\n      resolve(value);\n    }\n  } catch (e) {\n    _reject(e);\n  }\n}\n\nmodule.exports = Promise;\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {dev} from './log';\nimport {dict} from './utils/object';\nimport {internalListenImplementation} from './event-helper-listen';\nimport {parseJson} from './json';\n\n\n/** @const */\nconst AMP_MESSAGE_PREFIX = 'amp-';\nexport const CONSTANTS = {\n  responseTypeSuffix: '-result',\n  messageIdFieldName: 'messageId',\n  payloadFieldName: 'payload',\n  contentFieldName: 'content',\n};\n\n/** @enum {string} */\nexport const MessageType = {\n  // For amp-ad\n  SEND_EMBED_STATE: 'send-embed-state',\n  EMBED_STATE: 'embed-state',\n  SEND_EMBED_CONTEXT: 'send-embed-context',\n  EMBED_CONTEXT: 'embed-context',\n  SEND_INTERSECTIONS: 'send-intersections',\n  INTERSECTION: 'intersection',\n  EMBED_SIZE: 'embed-size',\n  EMBED_SIZE_CHANGED: 'embed-size-changed',\n  EMBED_SIZE_DENIED: 'embed-size-denied',\n  NO_CONTENT: 'no-content',\n  GET_HTML: 'get-html',\n  GET_CONSENT_STATE: 'get-consent-state',\n\n  // For the frame to be placed in full overlay mode for lightboxes\n  FULL_OVERLAY_FRAME: 'full-overlay-frame',\n  FULL_OVERLAY_FRAME_RESPONSE: 'full-overlay-frame-response',\n  CANCEL_FULL_OVERLAY_FRAME: 'cancel-full-overlay-frame',\n  CANCEL_FULL_OVERLAY_FRAME_RESPONSE: 'cancel-full-overlay-frame-response',\n\n  // For amp-inabox\n  SEND_POSITIONS: 'send-positions',\n  POSITION: 'position',\n\n  // For amp-analytics' iframe-transport\n  SEND_IFRAME_TRANSPORT_EVENTS: 'send-iframe-transport-events',\n  IFRAME_TRANSPORT_EVENTS: 'iframe-transport-events',\n  IFRAME_TRANSPORT_RESPONSE: 'iframe-transport-response',\n\n  // For user-error-in-iframe\n  USER_ERROR_IN_IFRAME: 'user-error-in-iframe',\n};\n\n/**\n * Listens for the specified event on the element.\n * @param {!EventTarget} element\n * @param {string} eventType\n * @param {function(!Event)} listener\n * @param {Object=} opt_evtListenerOpts\n * @return {!UnlistenDef}\n */\nexport function listen(element, eventType, listener, opt_evtListenerOpts) {\n  return internalListenImplementation(\n      element, eventType, listener, opt_evtListenerOpts);\n}\n\n\n/**\n * Serialize an AMP post message. Output looks like:\n * 'amp-011481323099490{\"type\":\"position\",\"sentinel\":\"12345\",\"foo\":\"bar\"}'\n * @param {string} type\n * @param {string} sentinel\n * @param {JsonObject=} data\n * @param {?string=} rtvVersion\n * @return {string}\n */\nexport function serializeMessage(type, sentinel, data = dict(),\n  rtvVersion = null) {\n  // TODO: consider wrap the data in a \"data\" field. { type, sentinal, data }\n  const message = data;\n  message['type'] = type;\n  message['sentinel'] = sentinel;\n  return AMP_MESSAGE_PREFIX + (rtvVersion || '') + JSON.stringify(message);\n}\n\n\n/**\n * Deserialize an AMP post message.\n * Returns null if it's not valid AMP message format.\n *\n * @param {*} message\n * @return {?JsonObject|undefined}\n */\nexport function deserializeMessage(message) {\n  if (!isAmpMessage(message)) {\n    return null;\n  }\n  const startPos = message.indexOf('{');\n  dev().assert(startPos != -1, 'JSON missing in %s', message);\n  try {\n    return parseJson(message.substr(startPos));\n  } catch (e) {\n    dev().error('MESSAGING', 'Failed to parse message: ' + message, e);\n    return null;\n  }\n}\n\n\n/**\n *  Returns true if message looks like it is an AMP postMessage\n *  @param {*} message\n *  @return {boolean}\n */\nexport function isAmpMessage(message) {\n  return (typeof message == 'string' &&\n      message.indexOf(AMP_MESSAGE_PREFIX) == 0 &&\n      message.indexOf('{') != -1);\n}\n\n/** @typedef {{creativeId: string, message: string}} */\nexport let IframeTransportEvent;\n// An event, and the transport ID of the amp-analytics tags that\n// generated it. For instance if the creative with transport\n// ID 2 sends \"hi\", then an IframeTransportEvent would look like:\n// { creativeId: \"2\", message: \"hi\" }\n// If the creative with transport ID 2 sent that, and also sent \"hello\",\n// and the creative with transport ID 3 sends \"goodbye\" then an *array* of 3\n// AmpAnalyticsIframeTransportEvent would be sent to the 3p frame like so:\n// [\n//   { creativeId: \"2\", message: \"hi\" }, // An AmpAnalyticsIframeTransportEvent\n//   { creativeId: \"2\", message: \"hello\" }, // Another\n//   { creativeId: \"3\", message: \"goodbye\" } // And another\n// ]\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {computedStyle} from './style';\nimport {dev} from './log';\nimport {getParentWindowFrameElement} from './service';\n\nconst AD_CONTAINER_PROP = '__AMP__AD_CONTAINER';\n\n/**\n * Tags that are allowed to have fixed positioning\n * @const {!Object<string, boolean>}\n */\nconst CONTAINERS = {\n  'AMP-FX-FLYING-CARPET': true,\n  'AMP-LIGHTBOX': true,\n  'AMP-STICKY-AD': true,\n  'AMP-LIGHTBOX-GALLERY': true,\n};\n\n/**\n * Determines if an element is fixed-positioned.\n * OK to use, because it's only called from onLayoutMeasure\n * @param {!Element} el\n * @param {!Window} win\n * @return {boolean}\n */\nfunction isPositionFixed(el, win) {\n  const {position} = computedStyle(win, el);\n  // We consider sticky positions as fixed, since they can be fixed.\n  return position == 'fixed' || position == 'sticky';\n}\n\n/**\n * @param {!Element} element\n * @param {!Window} win\n * @return {boolean} whether the element position is allowed. If the element\n * belongs to CONTAINERS, it is allowed to be position fixed.\n * If the element has a position fixed ancestor, it is not allowed.\n * This should only be called when a layout on the page was just forced\n * anyway.\n */\nexport function isAdPositionAllowed(element, win) {\n  let hasFixedAncestor = false;\n  let containers = 0;\n  let el = element;\n  do {\n    if (CONTAINERS[el.tagName]) {\n      // The containers must not themselves be contained in a fixed-position\n      // element. Continue the search.\n      containers++;\n      hasFixedAncestor = false;\n    } else if (isPositionFixed(dev().assertElement(el), win)) {\n      // Because certain blessed elements may contain a position fixed\n      // container (which contain an ad), we continue to search the\n      // ancestry tree.\n      hasFixedAncestor = true;\n    }\n    el = el.parentElement;\n  } while (el && el.tagName != 'BODY');\n  return !hasFixedAncestor && containers <= 1;\n}\n\n/**\n * Returns the blessed container element tagName if the ad is contained by one.\n * This is called during layout measure.\n * @param {!Element} element\n * @return {?string}\n */\nexport function getAdContainer(element) {\n  if (element[AD_CONTAINER_PROP] === undefined) {\n    let el = element.parentElement;\n    while (el && el.tagName != 'BODY') {\n      if (CONTAINERS[el.tagName]) {\n        return element[AD_CONTAINER_PROP] = el.tagName;\n      }\n      el = el.parentElement;\n    }\n    element[AD_CONTAINER_PROP] = null;\n  }\n  return element[AD_CONTAINER_PROP];\n}\n\n/**\n * Gets the resource ID of the amp-ad element containing the passed node.\n * If there is no containing amp-ad tag, then null will be returned.\n * TODO(jonkeller): Investigate whether non-A4A use case is needed. Issue 11436\n * @param {!Element} node\n * @param {!Window} topWin\n * @return {?string}\n */\nexport function getAmpAdResourceId(node, topWin) {\n  try {\n    const frameParent = getParentWindowFrameElement(node, topWin).parentElement;\n    if (frameParent.nodeName == 'AMP-AD') {\n      return String(frameParent.getResourceId());\n    }\n  } catch (e) {\n  }\n  // Whether we entered the catch above (e.g. due to attempt to access\n  // across xdomain boundary), or failed to enter the if further above, the\n  // node is not within a friendly amp-ad tag. So, there is no amp-ad\n  // resource ID. How to handle that is up to the caller, but see TODO above.\n  return null;\n}\n\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * Commonly used signals across different elements and documents.\n * @enum {string}\n */\nexport const CommonSignals = {\n\n  /**\n   * The element has been built.\n   */\n  BUILT: 'built',\n\n  /**\n   * The initial contents of an element/document/embed have been loaded.\n   */\n  INI_LOAD: 'ini-load',\n\n  /**\n   * The element has been loaded.\n   */\n  LOAD_END: 'load-end',\n\n  /**\n   * The element has started loading.\n   */\n  LOAD_START: 'load-start',\n\n  /**\n   * Rendering has been confirmed to have been started.\n   */\n  RENDER_START: 'render-start',\n\n  /**\n   * The element has been unlaid out.\n   */\n  UNLOAD: 'unload',\n};\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Allows for runtime configuration. Internally, the runtime should\n * use the src/config.js module for various constants. We can use the\n * AMP_CONFIG global to translate user-defined configurations to this\n * module.\n * @type {!Object<string, string>}\n */\nconst env = self.AMP_CONFIG || {};\n\nconst thirdPartyFrameRegex = typeof env['thirdPartyFrameRegex'] == 'string' ?\n  new RegExp(env['thirdPartyFrameRegex']) : env['thirdPartyFrameRegex'];\n\nconst cdnProxyRegex = typeof env['cdnProxyRegex'] == 'string' ?\n  new RegExp(env['cdnProxyRegex']) : env['cdnProxyRegex'];\n\n/** @type {!Object<string, string|boolean|RegExp>} */\nexport const urls = {\n  thirdParty: env['thirdPartyUrl'] || 'https://3p.ampproject.net',\n  thirdPartyFrameHost: env['thirdPartyFrameHost'] || 'ampproject.net',\n  thirdPartyFrameRegex: thirdPartyFrameRegex || /^d-\\d+\\.ampproject\\.net$/,\n  cdn: env['cdnUrl'] || 'https://cdn.ampproject.org',\n  /* Note that cdnProxyRegex is only ever checked against origins\n   * (proto://host[:port]) so does not need to consider path\n   */\n  cdnProxyRegex: cdnProxyRegex ||\n      /^https:\\/\\/([a-zA-Z0-9_-]+\\.)?cdn\\.ampproject\\.org$/,\n  localhostRegex: /^https?:\\/\\/localhost(:\\d+)?$/,\n  errorReporting: env['errorReportingUrl'] ||\n      'https://amp-error-reporting.appspot.com/r',\n  localDev: env['localDev'] || false,\n};\n\nexport const config = {\n  urls,\n};\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {endsWith} from './string';\nimport {\n  isProxyOrigin,\n  parseUrlDeprecated,\n  tryDecodeUriComponent,\n} from './url';\nimport {urls} from './config';\n\n\n/**\n * Returns the value of the cookie. The cookie access is restricted and must\n * go through the privacy review. Before using this method please file a\n * GitHub issue with \"Privacy Review\" label.\n *\n * Returns the cookie's value or `null`.\n *\n * @param {!Window} win\n * @param {string} name\n * @return {?string}\n */\nexport function getCookie(win, name) {\n  const cookieString = tryGetDocumentCookieNoInline(win);\n  if (!cookieString) {\n    return null;\n  }\n  const cookies = cookieString.split(';');\n  for (let i = 0; i < cookies.length; i++) {\n    const cookie = cookies[i].trim();\n    const eq = cookie.indexOf('=');\n    if (eq == -1) {\n      continue;\n    }\n    if (tryDecodeUriComponent(cookie.substring(0, eq).trim()) == name) {\n      const value = cookie.substring(eq + 1).trim();\n      return tryDecodeUriComponent(value, value);\n    }\n  }\n  return null;\n}\n\n/**\n * This method should not be inlined to prevent TryCatch deoptimization.\n * NoInline keyword at the end of function name also prevents Closure compiler\n * from inlining the function.\n * @param {!Window} win\n * @return {string}\n */\nfunction tryGetDocumentCookieNoInline(win) {\n  try {\n    return win.document.cookie;\n  } catch (e) {\n    // Act as if no cookie is available. Exceptions can be thrown when\n    // AMP docs are opened on origins that do not allow setting\n    // cookies such as null origins.\n    return '';\n  }\n}\n\n/**\n * Sets the value of the cookie. The cookie access is restricted and must\n * go through the privacy review. Before using this method please file a\n * GitHub issue with \"Privacy Review\" label.\n *\n * @param {!Window} win\n * @param {string} name\n * @param {string} value\n * @param {time} expirationTime\n * @param {{\n *   highestAvailableDomain:(boolean|undefined),\n *   domain:(string|undefined)\n * }=} opt_options\n *     - highestAvailableDomain: If true, set the cookie at the widest domain\n *       scope allowed by the browser. E.g. on example.com if we are currently\n *       on www.example.com.\n *     - domain: Explicit domain to set.\n *     - allowOnProxyOrigin: Allow setting a cookie on the AMP Cache.\n */\nexport function setCookie(win, name, value, expirationTime, opt_options) {\n  checkOriginForSettingCookie(win, opt_options, name);\n  if (opt_options && opt_options.highestAvailableDomain) {\n    const parts = win.location.hostname.split('.');\n    let domain = parts[parts.length - 1];\n    for (let i = parts.length - 2; i >= 0; i--) {\n      domain = parts[i] + '.' + domain;\n      trySetCookie(win, name, value, expirationTime, domain);\n      if (getCookie(win, name) == value) {\n        return;\n      }\n    }\n  }\n  let domain = undefined;\n  if (opt_options && opt_options.domain) {\n    domain = opt_options.domain;\n  }\n  trySetCookie(win, name, value, expirationTime, domain);\n}\n\n/**\n * Attempt to set a cookie with the given params.\n *\n * @param {!Window} win\n * @param {string} name\n * @param {string} value\n * @param {time} expirationTime\n * @param {string|undefined} domain\n */\nfunction trySetCookie(win, name, value, expirationTime, domain) {\n  // We do not allow setting cookies on the domain that contains both\n  // the cdn. and www. hosts.\n  if (domain == 'ampproject.org') {\n    // Actively delete them.\n    value = 'delete';\n    expirationTime = 0;\n  }\n  const cookie = encodeURIComponent(name) + '=' +\n      encodeURIComponent(value) +\n      '; path=/' +\n      (domain ? '; domain=' + domain : '') +\n      '; expires=' + new Date(expirationTime).toUTCString();\n  try {\n    win.document.cookie = cookie;\n  } catch (ignore) {\n    // Do not throw if setting the cookie failed Exceptions can be thrown\n    // when AMP docs are opened on origins that do not allow setting\n    // cookies such as null origins.\n  }\n}\n\n/**\n * Throws if a given cookie should not be set on the given origin.\n * This is a defense-in-depth. Callers should never run into this.\n *\n * @param {!Window} win\n * @param {!Object|undefined} options\n * @param {string} name For the error message.\n */\nfunction checkOriginForSettingCookie(win, options, name) {\n  if (options && options.allowOnProxyOrigin) {\n    return;\n  }\n  if (isProxyOrigin(win.location.href)) {\n    throw new Error('Should never attempt to set cookie on proxy origin: '\n        + name);\n  }\n\n  const current = parseUrlDeprecated(win.location.href).hostname.toLowerCase();\n  const proxy = parseUrlDeprecated(urls.cdn).hostname.toLowerCase();\n  if (current == proxy || endsWith(current, '.' + proxy)) {\n    throw new Error('Should never attempt to set cookie on proxy origin.'\n        + ' (in depth check): ' + name);\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * Whether the document is ready.\n * @param {!Document} doc\n * @return {boolean}\n */\nexport function isDocumentReady(doc) {\n  return doc.readyState != 'loading' && doc.readyState != 'uninitialized';\n}\n\n/**\n * Whether the document has loaded all the css and sub-resources.\n * @param {!Document} doc\n * @return {boolean}\n */\nfunction isDocumentComplete(doc) {\n  return doc.readyState == 'complete';\n}\n\n/**\n * Calls the callback when document is ready.\n * @param {!Document} doc\n * @param {function(!Document)} callback\n */\nexport function onDocumentReady(doc, callback) {\n  onDocumentState(doc, isDocumentReady, callback);\n}\n\n/**\n * Calls the callback when document's state satisfies the stateFn.\n * @param {!Document} doc\n * @param {function(!Document):boolean} stateFn\n * @param {function(!Document)} callback\n */\nfunction onDocumentState(doc, stateFn, callback) {\n  let ready = stateFn(doc);\n  if (ready) {\n    callback(doc);\n  } else {\n    const readyListener = () => {\n      if (stateFn(doc)) {\n        if (!ready) {\n          ready = true;\n          callback(doc);\n        }\n        doc.removeEventListener('readystatechange', readyListener);\n      }\n    };\n    doc.addEventListener('readystatechange', readyListener);\n  }\n}\n\n/**\n * Returns a promise that is resolved when document is ready.\n * @param {!Document} doc\n * @return {!Promise<!Document>}\n */\nexport function whenDocumentReady(doc) {\n  return new Promise(resolve => {\n    onDocumentReady(doc, resolve);\n  });\n}\n\n/**\n * Returns a promise that is resolved when document is complete.\n * @param {!Document} doc\n * @return {!Promise<!Document>}\n */\nexport function whenDocumentComplete(doc) {\n  return new Promise(resolve => {\n    onDocumentState(doc, isDocumentComplete, resolve);\n  });\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Deferred} from './utils/promise';\nimport {cssEscape} from '../third_party/css-escape/css-escape';\nimport {dev} from './log';\nimport {dict} from './utils/object';\nimport {startsWith} from './string';\nimport {toWin} from './types';\n\nconst HTML_ESCAPE_CHARS = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#x27;',\n  '`': '&#x60;',\n};\nconst HTML_ESCAPE_REGEX = /(&|<|>|\"|'|`)/g;\n\n/** @const {string} */\nexport const UPGRADE_TO_CUSTOMELEMENT_PROMISE =\n    '__AMP_UPG_PRM';\n\n/** @const {string} */\nexport const UPGRADE_TO_CUSTOMELEMENT_RESOLVER =\n    '__AMP_UPG_RES';\n\n/**\n * Waits until the child element is constructed. Once the child is found, the\n * callback is executed.\n * @param {!Element} parent\n * @param {function(!Element):boolean} checkFunc\n * @param {function()} callback\n */\nexport function waitForChild(parent, checkFunc, callback) {\n  if (checkFunc(parent)) {\n    callback();\n    return;\n  }\n  /** @const {!Window} */\n  const win = toWin(parent.ownerDocument.defaultView);\n  if (win.MutationObserver) {\n    /** @const {MutationObserver} */\n    const observer = new win.MutationObserver(() => {\n      if (checkFunc(parent)) {\n        observer.disconnect();\n        callback();\n      }\n    });\n    observer.observe(parent, {childList: true});\n  } else {\n    /** @const {number} */\n    const interval = win.setInterval(() => {\n      if (checkFunc(parent)) {\n        win.clearInterval(interval);\n        callback();\n      }\n    }, /* milliseconds */ 5);\n  }\n}\n\n/**\n * Waits until the child element is constructed. Once the child is found, the\n * promise is resolved.\n * @param {!Element} parent\n * @param {function(!Element):boolean} checkFunc\n * @return {!Promise}\n */\nexport function waitForChildPromise(parent, checkFunc) {\n  return new Promise(resolve => {\n    waitForChild(parent, checkFunc, resolve);\n  });\n}\n\n/**\n * Waits for document's body to be available.\n * Will be deprecated soon; use {@link AmpDoc#whenBodyAvailable} or\n * @{link DocumentState#onBodyAvailable} instead.\n * @param {!Document} doc\n * @param {function()} callback\n */\nexport function waitForBody(doc, callback) {\n  waitForChild(doc.documentElement, () => !!doc.body, callback);\n}\n\n\n/**\n * Waits for document's body to be available.\n * @param {!Document} doc\n * @return {!Promise}\n */\nexport function waitForBodyPromise(doc) {\n  return new Promise(resolve => {\n    waitForBody(doc, resolve);\n  });\n}\n\n\n/**\n * Removes the element.\n * @param {!Element} element\n */\nexport function removeElement(element) {\n  if (element.parentElement) {\n    element.parentElement.removeChild(element);\n  }\n}\n\n\n/**\n * Removes all child nodes of the specified element.\n * @param {!Element} parent\n */\nexport function removeChildren(parent) {\n  while (parent.firstChild) {\n    parent.removeChild(parent.firstChild);\n  }\n}\n\n\n/**\n * Copies all children nodes of element \"from\" to element \"to\". Child nodes\n * are deeply cloned. Notice, that this method should be used with care and\n * preferably on smaller subtrees.\n * @param {!Element} from\n * @param {!Element|!DocumentFragment} to\n */\nexport function copyChildren(from, to) {\n  const frag = to.ownerDocument.createDocumentFragment();\n  for (let n = from.firstChild; n; n = n.nextSibling) {\n    frag.appendChild(n.cloneNode(true));\n  }\n  to.appendChild(frag);\n}\n\n/**\n * Insert the element in the root after the element named after or\n * if that is null at the beginning.\n * @param {!Element|!ShadowRoot} root\n * @param {!Element} element\n * @param {?Node} after\n */\nexport function insertAfterOrAtStart(root, element, after) {\n  const before = after ? after.nextSibling : root.firstChild;\n  root.insertBefore(element, before);\n}\n\n/**\n * Add attributes to an element.\n * @param {!Element} element\n * @param {!JsonObject<string, string>} attributes\n * @return {!Element} created element\n */\nexport function addAttributesToElement(element, attributes) {\n  for (const attr in attributes) {\n    element.setAttribute(attr, attributes[attr]);\n  }\n  return element;\n}\n\n/**\n * Create a new element on document with specified tagName and attributes.\n * @param {!Document} doc\n * @param {string} tagName\n * @param {!JsonObject<string, string>} attributes\n * @return {!Element} created element\n */\nexport function createElementWithAttributes(doc, tagName, attributes) {\n  const element = doc.createElement(tagName);\n  return addAttributesToElement(element, attributes);\n}\n\n/**\n * Returns true if node is connected (attached).\n * @param {!Node} node\n * @return {boolean}\n * @see https://dom.spec.whatwg.org/#connected\n */\nexport function isConnectedNode(node) {\n  const connected = node.isConnected;\n  if (connected !== undefined) {\n    return connected;\n  }\n\n  // \"An element is connected if its shadow-including root is a document.\"\n  let n = node;\n  do {\n    n = rootNodeFor(n);\n    if (n.host) {\n      n = n.host;\n    } else {\n      break;\n    }\n  } while (true);\n  return n.nodeType === Node.DOCUMENT_NODE;\n}\n\n/**\n * Returns the root for a given node. Does not cross shadow DOM boundary.\n * @param {!Node} node\n * @return {!Node}\n */\nexport function rootNodeFor(node) {\n  if (Node.prototype.getRootNode) {\n    // Type checker says `getRootNode` may return null.\n    return node.getRootNode() || node;\n  }\n  let n;\n  for (n = node; !!n.parentNode; n = n.parentNode) {}\n  return n;\n}\n\n/**\n * Finds the closest element that satisfies the callback from this element\n * up the DOM subtree.\n * @param {!Element} element\n * @param {function(!Element):boolean} callback\n * @param {Element=} opt_stopAt optional elemnt to stop the search at.\n * @return {?Element}\n */\nexport function closest(element, callback, opt_stopAt) {\n  for (let el = element; el && el !== opt_stopAt; el = el.parentElement) {\n    if (callback(el)) {\n      return el;\n    }\n  }\n  return null;\n}\n\n\n/**\n * Finds the closest node that satisfies the callback from this node\n * up the DOM subtree.\n * @param {!Node} node\n * @param {function(!Node):boolean} callback\n * @return {?Node}\n */\nexport function closestNode(node, callback) {\n  for (let n = node; n; n = n.parentNode) {\n    if (callback(n)) {\n      return n;\n    }\n  }\n  return null;\n}\n\n\n/**\n * Finds the closest element with the specified name from this element\n * up the DOM subtree.\n * @param {!Element} element\n * @param {string} tagName\n * @return {?Element}\n */\nexport function closestByTag(element, tagName) {\n  if (element.closest) {\n    return element.closest(tagName);\n  }\n  tagName = tagName.toUpperCase();\n  return closest(element, el => {\n    return el.tagName == tagName;\n  });\n}\n\n/**\n * Finds the closest element with the specified selector from this element\n * @param {!Element} element\n * @param {string} selector\n * @return {?Element} closest ancestor if found.\n */\nexport function closestBySelector(element, selector) {\n  if (element.closest) {\n    return element.closest(selector);\n  }\n\n  return closest(element, el => {\n    return matches(el, selector);\n  });\n}\n\n/**\n * Checks if the given element matches the selector\n * @param  {!Element} el The element to verify\n * @param  {string} selector The selector to check against\n * @return {boolean} True if the element matched the selector. False otherwise.\n */\nexport function matches(el, selector) {\n  const matcher = el.matches ||\n      el.webkitMatchesSelector ||\n      el.mozMatchesSelector ||\n      el.msMatchesSelector ||\n      el.oMatchesSelector;\n  if (matcher) {\n    return matcher.call(el, selector);\n  }\n  return false; // IE8 always returns false.\n}\n\n/**\n * Finds the first descendant element with the specified name.\n * @param {!Element|!Document|!ShadowRoot} element\n * @param {string} tagName\n * @return {?Element}\n */\nexport function elementByTag(element, tagName) {\n  let elements;\n  // getElementsByTagName() is not supported on ShadowRoot.\n  if (typeof element.getElementsByTagName === 'function') {\n    elements = element.getElementsByTagName(tagName);\n  } else {\n    elements = element./*OK*/querySelectorAll(tagName);\n  }\n  return (elements && elements[0]) || null;\n}\n\n\n/**\n * Finds the first child element that satisfies the callback.\n * @param {!Element} parent\n * @param {function(!Element):boolean} callback\n * @return {?Element}\n */\nexport function childElement(parent, callback) {\n  for (let child = parent.firstElementChild; child;\n    child = child.nextElementSibling) {\n    if (callback(child)) {\n      return child;\n    }\n  }\n  return null;\n}\n\n\n/**\n * Finds all child elements that satisfy the callback.\n * @param {!Element} parent\n * @param {function(!Element):boolean} callback\n * @return {!Array<!Element>}\n */\nexport function childElements(parent, callback) {\n  const children = [];\n  for (let child = parent.firstElementChild; child;\n    child = child.nextElementSibling) {\n    if (callback(child)) {\n      children.push(child);\n    }\n  }\n  return children;\n}\n\n\n/**\n * Finds the last child element that satisfies the callback.\n * @param {!Element} parent\n * @param {function(!Element):boolean} callback\n * @return {?Element}\n */\nexport function lastChildElement(parent, callback) {\n  for (let child = parent.lastElementChild; child;\n    child = child.previousElementSibling) {\n    if (callback(child)) {\n      return child;\n    }\n  }\n  return null;\n}\n\n/**\n * Finds all child nodes that satisfy the callback.\n * These nodes can include Text, Comment and other child nodes.\n * @param {!Node} parent\n * @param {function(!Node):boolean} callback\n * @return {!Array<!Node>}\n */\nexport function childNodes(parent, callback) {\n  const nodes = [];\n  for (let child = parent.firstChild; child;\n    child = child.nextSibling) {\n    if (callback(child)) {\n      nodes.push(child);\n    }\n  }\n  return nodes;\n}\n\n/**\n * @type {boolean|undefined}\n * @visibleForTesting\n */\nlet scopeSelectorSupported;\n\n/**\n * @param {boolean|undefined} val\n * @visibleForTesting\n */\nexport function setScopeSelectorSupportedForTesting(val) {\n  scopeSelectorSupported = val;\n}\n\n/**\n * Test that the :scope selector is supported and behaves correctly.\n * @param {!Element} parent\n * @return {boolean}\n */\nfunction isScopeSelectorSupported(parent) {\n  const doc = parent.ownerDocument;\n  try {\n    const testElement = doc.createElement('div');\n    const testChild = doc.createElement('div');\n    testElement.appendChild(testChild);\n    // NOTE(cvializ, #12383): Firefox's implementation is incomplete,\n    // therefore we test actual functionality of`:scope` as well.\n    return testElement./*OK*/querySelector(':scope div') === testChild;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Finds the first child element that has the specified attribute.\n * @param {!Element} parent\n * @param {string} attr\n * @return {?Element}\n */\nexport function childElementByAttr(parent, attr) {\n  return scopedQuerySelector/*OK*/(parent, `> [${attr}]`);\n}\n\n\n/**\n * Finds the last child element that has the specified attribute.\n * @param {!Element} parent\n * @param {string} attr\n * @return {?Element}\n */\nexport function lastChildElementByAttr(parent, attr) {\n  return lastChildElement(parent, el => {\n    return el.hasAttribute(attr);\n  });\n}\n\n\n/**\n * Finds all child elements that has the specified attribute.\n * @param {!Element} parent\n * @param {string} attr\n * @return {!NodeList<!Element>}\n */\nexport function childElementsByAttr(parent, attr) {\n  return scopedQuerySelectorAll/*OK*/(parent, `> [${attr}]`);\n}\n\n\n/**\n * Finds the first child element that has the specified tag name.\n * @param {!Element} parent\n * @param {string} tagName\n * @return {?Element}\n */\nexport function childElementByTag(parent, tagName) {\n  return scopedQuerySelector/*OK*/(parent, `> ${tagName}`);\n}\n\n\n/**\n * Finds all child elements with the specified tag name.\n * @param {!Element} parent\n * @param {string} tagName\n * @return {!NodeList<!Element>}\n */\nexport function childElementsByTag(parent, tagName) {\n  return scopedQuerySelectorAll/*OK*/(parent, `> ${tagName}`);\n}\n\n\n/**\n * Finds the first element that matches `selector`, scoped inside `root`.\n * Note: in IE, this causes a quick mutation of the element's class list.\n * @param {!Element} root\n * @param {string} selector\n * @return {?Element}\n */\nexport function scopedQuerySelector(root, selector) {\n  if (scopeSelectorSupported == null) {\n    scopeSelectorSupported = isScopeSelectorSupported(root);\n  }\n  if (scopeSelectorSupported) {\n    return root./*OK*/querySelector(`:scope ${selector}`);\n  }\n\n  // Only IE.\n  const unique = 'i-amphtml-scoped';\n  root.classList.add(unique);\n  const element = root./*OK*/querySelector(`.${unique} ${selector}`);\n  root.classList.remove(unique);\n  return element;\n}\n\n\n/**\n * Finds the every element that matches `selector`, scoped inside `root`.\n * Note: in IE, this causes a quick mutation of the element's class list.\n * @param {!Element} root\n * @param {string} selector\n * @return {!NodeList<!Element>}\n */\nexport function scopedQuerySelectorAll(root, selector) {\n  if (scopeSelectorSupported == null) {\n    scopeSelectorSupported = isScopeSelectorSupported(root);\n  }\n  if (scopeSelectorSupported) {\n    return root./*OK*/querySelectorAll(`:scope ${selector}`);\n  }\n\n  // Only IE.\n  const unique = 'i-amphtml-scoped';\n  root.classList.add(unique);\n  const elements = root./*OK*/querySelectorAll(`.${unique} ${selector}`);\n  root.classList.remove(unique);\n  return elements;\n}\n\n\n/**\n * Returns element data-param- attributes as url parameters key-value pairs.\n * e.g. data-param-some-attr=value -> {someAttr: value}.\n * @param {!Element} element\n * @param {function(string):string=} opt_computeParamNameFunc to compute the\n *    parameter name, get passed the camel-case parameter name.\n * @param {!RegExp=} opt_paramPattern Regex pattern to match data attributes.\n * @return {!JsonObject}\n */\nexport function getDataParamsFromAttributes(element, opt_computeParamNameFunc,\n  opt_paramPattern) {\n  const computeParamNameFunc = opt_computeParamNameFunc || (key => key);\n  const {dataset} = element;\n  const params = dict();\n  const paramPattern = opt_paramPattern ? opt_paramPattern : /^param(.+)/;\n  for (const key in dataset) {\n    const matches = key.match(paramPattern);\n    if (matches) {\n      const param = matches[1][0].toLowerCase() + matches[1].substr(1);\n      params[computeParamNameFunc(param)] = dataset[key];\n    }\n  }\n  return params;\n}\n\n/**\n * Whether the element have a next node in the document order.\n * This means either:\n *  a. The element itself has a nextSibling.\n *  b. Any of the element ancestors has a nextSibling.\n * @param {!Element} element\n * @param {?Node} opt_stopNode\n * @return {boolean}\n */\nexport function hasNextNodeInDocumentOrder(element, opt_stopNode) {\n  let currentElement = element;\n  do {\n    if (currentElement.nextSibling) {\n      return true;\n    }\n  } while ((currentElement = currentElement.parentNode) &&\n            currentElement != opt_stopNode);\n  return false;\n}\n\n\n/**\n * Finds all ancestor elements that satisfy predicate.\n * @param {!Element} child\n * @param {function(!Element):boolean} predicate\n * @return {!Array<!Element>}\n */\nexport function ancestorElements(child, predicate) {\n  const ancestors = [];\n  for (let ancestor = child.parentElement; ancestor;\n    ancestor = ancestor.parentElement) {\n    if (predicate(ancestor)) {\n      ancestors.push(ancestor);\n    }\n  }\n  return ancestors;\n}\n\n\n/**\n * Finds all ancestor elements that has the specified tag name.\n * @param {!Element} child\n * @param {string} tagName\n * @return {!Array<!Element>}\n */\nexport function ancestorElementsByTag(child, tagName) {\n  tagName = tagName.toUpperCase();\n  return ancestorElements(child, el => {\n    return el.tagName == tagName;\n  });\n}\n\n/**\n * Returns a clone of the content of a template element.\n *\n * Polyfill to replace .content access for browsers that do not support\n * HTMLTemplateElements natively.\n *\n * @param {!HTMLTemplateElement|!Element} template\n * @return {!DocumentFragment}\n */\nexport function templateContentClone(template) {\n  if ('content' in template) {\n    return template.content.cloneNode(true);\n  } else {\n    const content = template.ownerDocument.createDocumentFragment();\n    copyChildren(template, content);\n    return content;\n  }\n}\n\n/**\n * Iterate over an array-like. Some collections like NodeList are\n * lazily evaluated in some browsers, and accessing `length` forces full\n * evaluation. We can improve performance by iterating until an element is\n * `undefined` to avoid checking the `length` property.\n * Test cases: https://jsperf.com/iterating-over-collections-of-elements\n * @param {!IArrayLike<T>} iterable\n * @param {function(T, number)} cb\n * @template T\n */\nexport function iterateCursor(iterable, cb) {\n  for (let i = 0, value; (value = iterable[i]) !== undefined; i++) {\n    cb(value, i);\n  }\n}\n\n/**\n * This method wraps around window's open method. It first tries to execute\n * `open` call with the provided target and if it fails, it retries the call\n * with the `_top` target. This is necessary given that in some embedding\n * scenarios, such as iOS' WKWebView, navigation to `_blank` and other targets\n * is blocked by default.\n *\n * @param {!Window} win\n * @param {string} url\n * @param {string} target\n * @param {string=} opt_features\n * @return {?Window}\n */\nexport function openWindowDialog(win, url, target, opt_features) {\n  // Try first with the specified target. If we're inside the WKWebView or\n  // a similar environments, this method is expected to fail by default for\n  // all targets except `_top`.\n  let res;\n  try {\n    res = win.open(url, target, opt_features);\n  } catch (e) {\n    dev().error('DOM', 'Failed to open url on target: ', target, e);\n  }\n\n  // Then try with `_top` target.\n  if (!res && target != '_top') {\n    res = win.open(url, '_top');\n  }\n  return res;\n}\n\n/**\n * Whether the element is a script tag with application/json type.\n * @param {!Element} element\n * @return {boolean}\n */\nexport function isJsonScriptTag(element) {\n  return element.tagName == 'SCRIPT' &&\n            element.getAttribute('type').toUpperCase() == 'APPLICATION/JSON';\n}\n\n/**\n * Whether the element is a script tag with application/json type.\n * @param {!Element} element\n * @return {boolean}\n */\nexport function isJsonLdScriptTag(element) {\n  return element.tagName == 'SCRIPT' &&\n      element.getAttribute('type').toUpperCase() == 'APPLICATION/LD+JSON';\n}\n\n/**\n * Whether the page's direction is right to left or not.\n * @param {!Document} doc\n * @return {boolean}\n */\nexport function isRTL(doc) {\n  const dir = doc.body.getAttribute('dir')\n                 || doc.documentElement.getAttribute('dir')\n                 || 'ltr';\n  return dir == 'rtl';\n}\n\n\n/**\n * Escapes an ident (ID or a class name) to be used as a CSS selector.\n *\n * See https://drafts.csswg.org/cssom/#serialize-an-identifier.\n *\n * @param {string} ident\n * @return {string}\n */\nexport function escapeCssSelectorIdent(ident) {\n  return cssEscape(ident);\n}\n\n/**\n * Escapes an ident in a way that can be used by :nth-child() psuedo-class.\n *\n * See https://github.com/w3c/csswg-drafts/issues/2306.\n *\n * @param {string|number} ident\n * @return {string}\n */\nexport function escapeCssSelectorNth(ident) {\n  const escaped = String(ident);\n  // Ensure it doesn't close the nth-child psuedo class.\n  dev().assert(escaped.indexOf(')') === -1);\n  return escaped;\n}\n\n/**\n * Escapes `<`, `>` and other HTML charcaters with their escaped forms.\n * @param {string} text\n * @return {string}\n */\nexport function escapeHtml(text) {\n  if (!text) {\n    return text;\n  }\n  return text.replace(HTML_ESCAPE_REGEX, escapeHtmlChar);\n}\n\n/**\n * @param {string} c\n * @return {string}\n */\nfunction escapeHtmlChar(c) {\n  return HTML_ESCAPE_CHARS[c];\n}\n\n/**\n * Tries to focus on the given element; fails silently if browser throws an\n * exception.\n * @param {!Element} element\n */\nexport function tryFocus(element) {\n  try {\n    element./*OK*/focus();\n  } catch (e) {\n    // IE <= 7 may throw exceptions when focusing on hidden items.\n  }\n}\n\n/**\n * Whether the given window is in an iframe or not.\n * @param {!Window} win\n * @return {boolean}\n */\nexport function isIframed(win) {\n  return win.parent && win.parent != win;\n}\n\n/**\n * Determines if this element is an AMP element\n * @param {!Element} element\n * @return {boolean}\n */\nexport function isAmpElement(element) {\n  const tag = element.tagName;\n  // Use prefix to recognize AMP element. This is necessary because stub\n  // may not be attached yet.\n  return startsWith(tag, 'AMP-') &&\n      // Some \"amp-*\" elements are not really AMP elements. :smh:\n      !(tag == 'AMP-STICKY-AD-TOP-PADDING' || tag == 'AMP-BODY');\n}\n\n/**\n * Return a promise that resolve when an AMP element upgrade from HTMLElement\n * to CustomElement\n * @param {!Element} element\n * @return {!Promise<!Element>}\n */\nexport function whenUpgradedToCustomElement(element) {\n  dev().assert(isAmpElement(element), 'element is not AmpElement');\n  if (element.createdCallback) {\n    // Element already is CustomElement;\n    return Promise.resolve(element);\n  }\n  // If Element is still HTMLElement, wait for it to upgrade to customElement\n  // Note: use pure string to avoid obfuscation between versions.\n  if (!element[UPGRADE_TO_CUSTOMELEMENT_PROMISE]) {\n    const deferred = new Deferred();\n    element[UPGRADE_TO_CUSTOMELEMENT_PROMISE] = deferred.promise;\n    element[UPGRADE_TO_CUSTOMELEMENT_RESOLVER] = deferred.resolve;\n\n  }\n\n  return element[UPGRADE_TO_CUSTOMELEMENT_PROMISE];\n}\n\n/**\n * Replacement for `Element.requestFullscreen()` method.\n * https://developer.mozilla.org/en-US/docs/Web/API/Element/requestFullscreen\n * @param {!Element} element\n */\nexport function fullscreenEnter(element) {\n  const requestFs = element.requestFullscreen\n   || element.requestFullScreen\n   || element.webkitRequestFullscreen\n   || element.webkitRequestFullScreen\n   || element.webkitEnterFullscreen\n   || element.webkitEnterFullScreen\n   || element.msRequestFullscreen\n   || element.msRequestFullScreen\n   || element.mozRequestFullscreen\n   || element.mozRequestFullScreen;\n  if (requestFs) {\n    requestFs.call(element);\n  }\n}\n\n/**\n * Replacement for `Document.exitFullscreen()` method.\n * https://developer.mozilla.org/en-US/docs/Web/API/Document/exitFullscreen\n * @param {!Element} element\n */\nexport function fullscreenExit(element) {\n  let exitFs = element.cancelFullScreen\n               || element.exitFullscreen\n               || element.exitFullScreen\n               || element.webkitExitFullscreen\n               || element.webkitExitFullScreen\n               || element.webkitCancelFullScreen\n               || element.mozCancelFullScreen\n               || element.msExitFullscreen;\n  if (exitFs) {\n    exitFs.call(element);\n    return;\n  }\n  if (element.ownerDocument) {\n    exitFs = element.ownerDocument.cancelFullScreen\n             || element.ownerDocument.exitFullscreen\n             || element.ownerDocument.exitFullScreen\n             || element.ownerDocument.webkitExitFullscreen\n             || element.ownerDocument.webkitExitFullScreen\n             || element.ownerDocument.webkitCancelFullScreen\n             || element.ownerDocument.mozCancelFullScreen\n             || element.ownerDocument.msExitFullscreen;\n  }\n  if (exitFs) {\n    exitFs.call(element.ownerDocument);\n    return;\n  }\n}\n\n\n/**\n * Replacement for `Document.fullscreenElement`.\n * https://developer.mozilla.org/en-US/docs/Web/API/Document/fullscreenElement\n * @param {!Element} element\n * @return {boolean}\n */\nexport function isFullscreenElement(element) {\n  const isFullscreen = element.webkitDisplayingFullscreen;\n  if (isFullscreen) {\n    return true;\n  }\n  if (element.ownerDocument) {\n    const fullscreenElement = element.ownerDocument.fullscreenElement\n             || element.ownerDocument.webkitFullscreenElement\n             || element.ownerDocument.mozFullScreenElement\n             || element.webkitCurrentFullScreenElement;\n    if (fullscreenElement == element) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Returns true if node is not disabled.\n *\n * IE8 can return false positives, see {@link matches}.\n * @param {!Element} element\n * @return {boolean}\n * @see https://www.w3.org/TR/html5/forms.html#concept-fe-disabled\n */\nexport function isEnabled(element) {\n  return !(element.disabled || matches(element, ':disabled'));\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as dom from './dom';\nimport {\n  getAmpdoc,\n  getExistingServiceForDocInEmbedScope,\n  getService,\n  getServicePromise,\n  getServicePromiseForDoc,\n  getServicePromiseOrNull,\n  getServicePromiseOrNullForDoc,\n  getTopWindow,\n} from './service';\nimport {toWin} from './types';\nimport {user} from './log';\n\n/**\n * Returns a promise for a service for the given id and window. Also expects an\n * element that has the actual implementation. The promise resolves when the\n * implementation loaded. Users should typically wrap this as a special purpose\n * function (e.g. Services.viewportForDoc(...)) for type safety and because the\n * factory should not be passed around.\n * @param {!Window} win\n * @param {string} id of the service.\n * @param {string} extension Name of the custom extension that provides the\n *     implementation of this service.\n * @param {boolean=} opt_element Whether this service is provided by an element,\n *     not the extension.\n * @return {!Promise<*>}\n */\nexport function getElementService(win, id, extension, opt_element) {\n  return getElementServiceIfAvailable(win, id, extension, opt_element).then(\n      service => assertService(service, id, extension));\n}\n\n/**\n * Same as getElementService but produces null if the given element is not\n * actually available on the current page.\n * @param {!Window} win\n * @param {string} id of the service.\n * @param {string} extension Name of the custom extension that provides the\n *     implementation of this service.\n * @param {boolean=} opt_element Whether this service is provided by an\n *     element, not the extension.\n * @return {!Promise<?Object>}\n */\nexport function getElementServiceIfAvailable(win, id, extension, opt_element) {\n  const s = getServicePromiseOrNull(win, id);\n  if (s) {\n    return /** @type {!Promise<?Object>} */ (s);\n  }\n  return getElementServicePromiseOrNull(win, id, extension, opt_element);\n}\n\n/**\n * @param {!Window} win\n * @param {string} elementName Name of an extended custom element.\n * @return {boolean} Whether this element is scheduled to be loaded.\n */\nfunction isElementScheduled(win, elementName) {\n  // Set in custom-element.js\n  if (!win.ampExtendedElements) {\n    return false;\n  }\n  return !!win.ampExtendedElements[elementName];\n}\n\n\n/**\n * Returns a promise for a service for the given id and window. Also expects an\n * element that has the actual implementation. The promise resolves when the\n * implementation loaded. Users should typically wrap this as a special purpose\n * function (e.g. Services.viewportForDoc(...)) for type safety and because the\n * factory should not be passed around.\n * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n * @param {string} id of the service.\n * @param {string} extension Name of the custom extension that provides the\n *     implementation of this service.\n * @param {boolean=} opt_element Whether this service is provided by an element,\n *     not the extension.\n * @return {!Promise<*>}\n */\nexport function getElementServiceForDoc(elementOrAmpDoc, id, extension,\n  opt_element) {\n  return getElementServiceIfAvailableForDoc(\n      elementOrAmpDoc, id, extension, opt_element)\n      .then(service => assertService(service, id, extension));\n}\n\n/**\n * Same as getElementService but produces null if the given element is not\n * actually available on the current page.\n * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n * @param {string} id of the service.\n * @param {string} extension Name of the custom extension that provides the\n *     implementation of this service.\n * @param {boolean=} opt_element Whether this service is provided by an\n *     element, not the extension.\n * @return {!Promise<?Object>}\n */\nexport function getElementServiceIfAvailableForDoc(\n  elementOrAmpDoc, id, extension, opt_element) {\n  const ampdoc = getAmpdoc(elementOrAmpDoc);\n  const s = getServicePromiseOrNullForDoc(elementOrAmpDoc, id);\n  if (s) {\n    return /** @type {!Promise<?Object>} */ (s);\n  }\n\n  return ampdoc.whenBodyAvailable()\n      .then(() => waitForExtensionIfPresent(\n          ampdoc.win, extension,\n          ampdoc.getHeadNode()))\n      .then(() => {\n        // If this service is provided by an element, then we can't depend on\n        // the service (they may not use the element).\n        if (opt_element) {\n          return getServicePromiseOrNullForDoc(elementOrAmpDoc, id);\n        } else if (isElementScheduled(ampdoc.win, extension)) {\n          return getServicePromiseForDoc(elementOrAmpDoc, id);\n        }\n        return null;\n      });\n}\n\n/**\n * Returns a promise for service for the given id in the embed scope of\n * a given node, if it exists. Otherwise, falls back to ampdoc scope IFF\n * the given node is in the top-level window.\n * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n * @param {string} id of the service.\n * @param {string} extension Name of the custom element that provides\n *     the implementation of this service.\n * @return {!Promise<?Object>}\n */\nexport function getElementServiceIfAvailableForDocInEmbedScope(\n  elementOrAmpDoc, id, extension) {\n  const s = getExistingServiceForDocInEmbedScope(elementOrAmpDoc, id);\n  if (s) {\n    return /** @type {!Promise<?Object>} */ (Promise.resolve(s));\n  }\n  // Return embed-scope element service promise if scheduled.\n  if (elementOrAmpDoc.nodeType) {\n    const win = toWin(elementOrAmpDoc.ownerDocument.defaultView);\n    const topWin = getTopWindow(win);\n    // In embeds, doc-scope services are window-scope. But make sure to\n    // only do this for embeds (not the top window), otherwise we'd grab\n    // a promise from the wrong service holder which would never resolve.\n    if (win !== topWin) {\n      return getElementServicePromiseOrNull(win, id, extension);\n    } else {\n      // Fallback to ampdoc IFF the given node is _not_ FIE.\n      return getElementServiceIfAvailableForDoc(elementOrAmpDoc, id, extension);\n    }\n  }\n  return /** @type {!Promise<?Object>} */ (Promise.resolve(null));\n}\n\n/**\n * Throws user error if `service` is null.\n * @param {Object} service\n * @param {string} id\n * @param {string} extension\n * @return {!Object}\n * @private\n */\nfunction assertService(service, id, extension) {\n  return /** @type {!Object} */ (user().assert(service,\n      'Service %s was requested to be provided through %s, ' +\n      'but %s is not loaded in the current page. To fix this ' +\n      'problem load the JavaScript file for %s in this page.',\n      id, extension, extension, extension));\n}\n\n/**\n * Get list of all the extension JS files\n * @param {HTMLHeadElement|Element|ShadowRoot} head\n * @return {!Array<string>}\n */\nexport function extensionScriptsInNode(head) {\n  // ampdoc.getHeadNode() can return null\n  if (!head) {\n    return [];\n  }\n  const scripts = [];\n  const list = head.querySelectorAll('script[custom-element]');\n  for (let i = 0; i < list.length; i++) {\n    scripts.push(list[i].getAttribute('custom-element'));\n  }\n  return scripts;\n}\n\n/**\n * Waits for body to be present then verifies that an extension script is\n * present in head for installation.\n * @param {!./service/ampdoc-impl.AmpDoc} ampdoc\n * @param {string} extensionId\n * @return {!Promise<boolean>}\n */\nexport function isExtensionScriptInNode(ampdoc, extensionId) {\n  return ampdoc.whenBodyAvailable()\n      .then(() => {\n        return extensionScriptInNode(\n            ampdoc.getHeadNode(), extensionId);\n      });\n}\n\n/**\n * Verifies that an extension script is present in head for\n * installation.\n * @param {HTMLHeadElement|Element|ShadowRoot} head\n * @param {string} extensionId\n * @private\n */\nfunction extensionScriptInNode(head, extensionId) {\n  return extensionScriptsInNode(head).includes(extensionId);\n}\n\n/**\n * Waits for an extension if its script is present\n * @param {!Window} win\n * @param {string} extension\n * @param {HTMLHeadElement|Element|ShadowRoot} head\n * @return {!Promise}\n * @private\n */\nfunction waitForExtensionIfPresent(win, extension, head) {\n  /**\n   * If there is an extension script wait for it to load before trying\n   * to get the service. Prevents a race condition when everything but\n   * the extensions is in cache. If there is no script then it's either\n   * not present, or the service was defined by a test. In those cases\n   * we don't wait around for an extension that does not exist.\n   */\n\n  // TODO(jpettitt) investigate registerExtension to short circuit\n  // the dom call in extensionScriptsInNode()\n  if (!extensionScriptInNode(head, extension)) {\n    return Promise.resolve();\n  }\n\n  const extensions = getService(win, 'extensions');\n  return /** @type {!Promise<?Object>} */ (\n    extensions.waitForExtension(win, extension));\n}\n\n/**\n * Returns the promise for service with `id` on the given window if available.\n * Otherwise, resolves with null (service was not registered).\n * @param {!Window} win\n * @param {string} id\n * @param {string} extension\n * @param {boolean=} opt_element\n * @return {!Promise<Object>}\n * @private\n */\nfunction getElementServicePromiseOrNull(win, id, extension, opt_element) {\n  return dom.waitForBodyPromise(win.document)\n      .then(() => waitForExtensionIfPresent(win, extension, win.document.head))\n      .then(() => {\n        // If this service is provided by an element, then we can't depend on\n        // the service (they may not use the element).\n        if (opt_element) {\n          return getServicePromiseOrNull(win, id);\n        } else if (isElementScheduled(win, extension)) {\n          return getServicePromise(win, id);\n        }\n        return null;\n      });\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n  * Whether addEventListener supports options or only takes capture as a boolean\n  * @type {boolean|undefined}\n  * @visibleForTesting\n  */\nlet optsSupported;\n\n/**\n * Listens for the specified event on the element.\n *\n * Do not use this directly. This method is implemented as a shared\n * dependency. Use `listen()` in either `event-helper` or `3p-frame-messaging`,\n * depending on your use case.\n *\n * @param {!EventTarget} element\n * @param {string} eventType\n * @param {function(!Event)} listener\n * @param {Object=} opt_evtListenerOpts\n * @return {!UnlistenDef}\n */\nexport function internalListenImplementation(element, eventType, listener,\n  opt_evtListenerOpts) {\n  let localElement = element;\n  let localListener = listener;\n  /**\n   * @type {?Function}\n   */\n  let wrapped;\n\n  wrapped = event => {\n    try {\n      return localListener(event);\n    } catch (e) {\n      // reportError is installed globally per window in the entry point.\n      self.reportError(e);\n      throw e;\n    }\n  };\n  const optsSupported = detectEvtListenerOptsSupport();\n  let capture = false;\n  if (opt_evtListenerOpts) {\n    capture = opt_evtListenerOpts.capture;\n  }\n  localElement.addEventListener(\n      eventType,\n      wrapped,\n      optsSupported ? opt_evtListenerOpts : capture\n  );\n  return () => {\n    if (localElement) {\n      localElement.removeEventListener(\n          eventType,\n          wrapped,\n          optsSupported ? opt_evtListenerOpts : capture\n      );\n    }\n    // Ensure these are GC'd\n    localListener = null;\n    localElement = null;\n    wrapped = null;\n  };\n}\n\n/**\n * Tests whether the browser supports options as an argument of addEventListener\n * or not.\n *\n * @return {boolean}\n */\nexport function detectEvtListenerOptsSupport() {\n  // Only run the test once\n  if (optsSupported !== undefined) {\n    return optsSupported;\n  }\n\n  optsSupported = false;\n  try {\n    // Test whether browser supports EventListenerOptions or not\n    const options = {\n      get capture() {\n        optsSupported = true;\n      },\n    };\n    self.addEventListener('test-options', null, options);\n    self.removeEventListener('test-options', null, options);\n  } catch (err) {\n    // EventListenerOptions are not supported\n  }\n  return optsSupported;\n}\n\n/**\n  * Resets the test for whether addEventListener supports options or not.\n  */\nexport function resetEvtListenerOptsSupportForTesting() {\n  optsSupported = undefined;\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {internalListenImplementation} from './event-helper-listen';\nimport {user} from './log';\n\n/** @const {string}  */\nconst LOAD_FAILURE_PREFIX = 'Failed to load:';\n\n/**\n * Returns a CustomEvent with a given type and detail; supports fallback for IE.\n * @param {!Window} win\n * @param {string} type\n * @param {!JsonObject|string|undefined|null} detail\n * @param {EventInit=} opt_eventInit\n * @return {!Event}\n */\nexport function createCustomEvent(win, type, detail, opt_eventInit) {\n  const eventInit = /** @type {!CustomEventInit} */ ({detail});\n  Object.assign(eventInit, opt_eventInit);\n  // win.CustomEvent is a function on Edge, Chrome, FF, Safari but\n  // is an object on IE 11.\n  if (typeof win.CustomEvent == 'function') {\n    return new win.CustomEvent(type, eventInit);\n  } else {\n    // Deprecated fallback for IE.\n    const e = win.document.createEvent('CustomEvent');\n    e.initCustomEvent(\n        type, !!eventInit.bubbles, !!eventInit.cancelable, detail);\n    return e;\n  }\n}\n\n/**\n * Listens for the specified event on the element.\n * @param {!EventTarget} element\n * @param {string} eventType\n * @param {function(!Event)} listener\n * @param {Object=} opt_evtListenerOpts\n * @return {!UnlistenDef}\n */\nexport function listen(element, eventType, listener, opt_evtListenerOpts) {\n  return internalListenImplementation(\n      element, eventType, listener, opt_evtListenerOpts);\n}\n\n/**\n * Returns the data property of an event with the correct type.\n * @param {!Event|{data: !JsonObject}} event\n * @return {?JsonObject|string|undefined}\n */\nexport function getData(event) {\n  return /** @type {?JsonObject|string|undefined} */ (event.data);\n}\n\n/**\n * Returns the detail property of an event with the correct type.\n * @param {!Event|{detail: !JsonObject}} event\n * @return {?JsonObject|string|undefined}\n */\nexport function getDetail(event) {\n  return /** @type {?JsonObject|string|undefined} */ (event.detail);\n}\n\n/**\n * Listens for the specified event on the element and removes the listener\n * as soon as event has been received.\n * @param {!EventTarget} element\n * @param {string} eventType\n * @param {function(!Event)} listener\n * @param {Object=} opt_evtListenerOpts\n * @return {!UnlistenDef}\n */\nexport function listenOnce(element, eventType, listener, opt_evtListenerOpts) {\n  let localListener = listener;\n  const unlisten = internalListenImplementation(element, eventType, event => {\n    try {\n      localListener(event);\n    } finally {\n      // Ensure listener is GC'd\n      localListener = null;\n      unlisten();\n    }\n  }, opt_evtListenerOpts);\n  return unlisten;\n}\n\n\n/**\n * Returns  a promise that will resolve as soon as the specified event has\n * fired on the element.\n * @param {!EventTarget} element\n * @param {string} eventType\n * @param {Object=} opt_evtListenerOpts\n * @param {function(!UnlistenDef)=} opt_cancel An optional function that, when\n *     provided, will be called with the unlistener. This gives the caller\n *     access to the unlistener, so it may be called manually when necessary.\n * @return {!Promise<!Event>}\n */\nexport function listenOncePromise(element, eventType, opt_evtListenerOpts,\n  opt_cancel) {\n  let unlisten;\n  const eventPromise = new Promise(resolve => {\n    unlisten = listenOnce(element, eventType, resolve, opt_evtListenerOpts);\n  });\n  eventPromise.then(unlisten, unlisten);\n  if (opt_cancel) {\n    opt_cancel(unlisten);\n  }\n  return eventPromise;\n}\n\n\n/**\n * Whether the specified element/window has been loaded already.\n * @param {!Element|!Window} eleOrWindow\n * @return {boolean}\n */\nexport function isLoaded(eleOrWindow) {\n  return !!(eleOrWindow.complete || eleOrWindow.readyState == 'complete'\n      // If the passed in thing is a Window, infer loaded state from\n      //\n      || (eleOrWindow.document\n          && eleOrWindow.document.readyState == 'complete'));\n}\n\n/**\n * Returns a promise that will resolve or fail based on the eleOrWindow's 'load'\n * and 'error' events. Optionally this method takes a timeout, which will reject\n * the promise if the resource has not loaded by then.\n * @param {T} eleOrWindow Supports both Elements and as a special case Windows.\n * @return {!Promise<T>}\n * @template T\n */\nexport function loadPromise(eleOrWindow) {\n  let unlistenLoad;\n  let unlistenError;\n  if (isLoaded(eleOrWindow)) {\n    return Promise.resolve(eleOrWindow);\n  }\n  const loadingPromise = new Promise((resolve, reject) => {\n    // Listen once since IE 5/6/7 fire the onload event continuously for\n    // animated GIFs.\n    const {tagName} = eleOrWindow;\n    if (tagName === 'AUDIO' || tagName === 'VIDEO') {\n      unlistenLoad = listenOnce(eleOrWindow, 'loadstart', resolve);\n    } else {\n      unlistenLoad = listenOnce(eleOrWindow, 'load', resolve);\n    }\n    // For elements, unlisten on error (don't for Windows).\n    if (tagName) {\n      unlistenError = listenOnce(eleOrWindow, 'error', reject);\n    }\n  });\n\n  return loadingPromise.then(() => {\n    if (unlistenError) {\n      unlistenError();\n    }\n    return eleOrWindow;\n  }, () => {\n    if (unlistenLoad) {\n      unlistenLoad();\n    }\n    failedToLoad(eleOrWindow);\n  });\n}\n\n/**\n * Emit error on load failure.\n * @param {!Element|!Window} eleOrWindow Supports both Elements and as a special\n *     case Windows.\n */\nfunction failedToLoad(eleOrWindow) {\n  // Report failed loads as user errors so that they automatically go\n  // into the \"document error\" bucket.\n  let target = eleOrWindow;\n  if (target && target.src) {\n    target = target.src;\n  }\n  throw user().createError(LOAD_FAILURE_PREFIX, target);\n}\n\n/**\n * Returns true if this error message is was created for a load error.\n * @param {string} message An error message\n * @return {boolean}\n */\nexport function isLoadErrorMessage(message) {\n  return message.indexOf(LOAD_FAILURE_PREFIX) != -1;\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Experiments system allows a developer to opt-in to test\n * features that are not yet fully tested.\n *\n * Experiments page: https://cdn.ampproject.org/experiments.html *\n */\n\nimport {getCookie, setCookie} from './cookies';\nimport {hasOwn} from './utils/object';\nimport {parseQueryString} from './url';\n\n/** @const {string} */\nconst COOKIE_NAME = 'AMP_EXP';\n\n/** @const {number} */\nconst COOKIE_MAX_AGE_DAYS = 180; // 6 month\n\n/** @const {time} */\nconst COOKIE_EXPIRATION_INTERVAL = COOKIE_MAX_AGE_DAYS * 24 * 60 * 60 * 1000;\n\n/** @const {string} */\nconst TOGGLES_WINDOW_PROPERTY = '__AMP__EXPERIMENT_TOGGLES';\n\n/**\n * @typedef {{\n *   isTrafficEligible: function(!Window):boolean,\n *   branches: !Array<string>\n * }}\n */\nexport let ExperimentInfo;\n\n/**\n * Whether we are in canary.\n * @param {!Window} win\n * @return {boolean}\n */\nexport function isCanary(win) {\n  return !!(win.AMP_CONFIG && win.AMP_CONFIG.canary);\n}\n\n/**\n * Returns binary type, e.g., canary, control, or production.\n * @param {!Window} win\n * @return {string}\n */\nexport function getBinaryType(win) {\n  return win.AMP_CONFIG && win.AMP_CONFIG.type ?\n    win.AMP_CONFIG.type : 'unknown';\n}\n\n/**\n * Whether the specified experiment is on or off.\n * @param {!Window} win\n * @param {string} experimentId\n * @return {boolean}\n */\nexport function isExperimentOn(win, experimentId) {\n  const toggles = experimentToggles(win);\n  return !!toggles[experimentId];\n}\n\n/**\n * Toggles the experiment on or off. Returns the actual value of the experiment\n * after toggling is done.\n * @param {!Window} win\n * @param {string} experimentId\n * @param {boolean=} opt_on\n * @param {boolean=} opt_transientExperiment  Whether to toggle the\n *     experiment state \"transiently\" (i.e., for this page load only) or\n *     durably (by saving the experiment IDs to the cookie after toggling).\n *     Default: false (save durably).\n * @return {boolean} New state for experimentId.\n */\nexport function toggleExperiment(win, experimentId, opt_on,\n  opt_transientExperiment) {\n  const currentlyOn = isExperimentOn(win, /*OK*/experimentId);\n  const on = !!(opt_on !== undefined ? opt_on : !currentlyOn);\n  if (on != currentlyOn) {\n    const toggles = experimentToggles(win);\n    toggles[experimentId] = on;\n\n    if (!opt_transientExperiment) {\n      const cookieToggles = getExperimentTogglesFromCookie(win);\n      cookieToggles[experimentId] = on;\n      saveExperimentTogglesToCookie(win, cookieToggles);\n    }\n  }\n  return on;\n}\n\n/**\n * Calculate whether the experiment is on or off based off of the\n * cookieFlag or the global config frequency given.\n * @param {!Window} win\n * @return {!Object<string, boolean>}\n */\nexport function experimentToggles(win) {\n  if (win[TOGGLES_WINDOW_PROPERTY]) {\n    return win[TOGGLES_WINDOW_PROPERTY];\n  }\n  win[TOGGLES_WINDOW_PROPERTY] = Object.create(null);\n  const toggles = win[TOGGLES_WINDOW_PROPERTY];\n\n  // Read the default config of this build.\n  if (win.AMP_CONFIG) {\n    for (const experimentId in win.AMP_CONFIG) {\n      const frequency = win.AMP_CONFIG[experimentId];\n      if (typeof frequency === 'number' && frequency >= 0 && frequency <= 1) {\n        toggles[experimentId] = Math.random() < frequency;\n      }\n    }\n  }\n  // Read document level override from meta tag.\n  if (win.AMP_CONFIG\n      && Array.isArray(win.AMP_CONFIG['allow-doc-opt-in'])\n      && win.AMP_CONFIG['allow-doc-opt-in'].length > 0) {\n    const allowed = win.AMP_CONFIG['allow-doc-opt-in'];\n    const meta =\n        win.document.head.querySelector('meta[name=\"amp-experiments-opt-in\"]');\n    if (meta) {\n      const optedInExperiments = meta.getAttribute('content').split(',');\n      for (let i = 0; i < optedInExperiments.length; i++) {\n        if (allowed.indexOf(optedInExperiments[i]) != -1) {\n          toggles[optedInExperiments[i]] = true;\n        }\n      }\n    }\n  }\n\n  Object.assign(toggles, getExperimentTogglesFromCookie(win));\n\n  if (win.AMP_CONFIG\n      && Array.isArray(win.AMP_CONFIG['allow-url-opt-in'])\n      && win.AMP_CONFIG['allow-url-opt-in'].length > 0) {\n    const allowed = win.AMP_CONFIG['allow-url-opt-in'];\n    const hash = win.location.originalHash || win.location.hash;\n    const params = parseQueryString(hash);\n    for (let i = 0; i < allowed.length; i++) {\n      const param = params[`e-${allowed[i]}`];\n      if (param == '1') {\n        toggles[allowed[i]] = true;\n      }\n      if (param == '0') {\n        toggles[allowed[i]] = false;\n      }\n    }\n  }\n  return toggles;\n}\n\n/**\n * Returns the cached experiments toggles, or null if they have not been\n * computed yet.\n * @param {!Window} win\n * @return {Object<string, boolean>}\n */\nexport function experimentTogglesOrNull(win) {\n  return win[TOGGLES_WINDOW_PROPERTY] || null;\n}\n\n/**\n * Returns a set of experiment IDs currently on.\n * @param {!Window} win\n * @return {!Object<string, boolean>}\n */\nfunction getExperimentTogglesFromCookie(win) {\n  const experimentCookie = getCookie(win, COOKIE_NAME);\n  const tokens = experimentCookie ? experimentCookie.split(/\\s*,\\s*/g) : [];\n\n  const toggles = Object.create(null);\n  for (let i = 0; i < tokens.length; i++) {\n    if (tokens[i].length == 0) {\n      continue;\n    }\n    if (tokens[i][0] == '-') {\n      toggles[tokens[i].substr(1)] = false;\n    } else {\n      toggles[tokens[i]] = true;\n    }\n  }\n\n  return toggles;\n}\n\n/**\n * Saves a set of experiment IDs currently on.\n * @param {!Window} win\n * @param {!Object<string, boolean>} toggles\n */\nfunction saveExperimentTogglesToCookie(win, toggles) {\n  const experimentIds = [];\n  for (const experiment in toggles) {\n    experimentIds.push((toggles[experiment] === false ? '-' : '') + experiment);\n  }\n\n  setCookie(win, COOKIE_NAME, experimentIds.join(','),\n      Date.now() + COOKIE_EXPIRATION_INTERVAL, {\n        // Set explicit domain, so the cookie gets send to sub domains.\n        domain: win.location.hostname,\n        allowOnProxyOrigin: true,\n      });\n}\n\n/**\n * See getExperimentTogglesFromCookie().\n * @param {!Window} win\n * @return {!Object<string, boolean>}\n * @visibleForTesting\n */\nexport function getExperimentToglesFromCookieForTesting(win) {\n  return getExperimentTogglesFromCookie(win);\n}\n\n/**\n * Resets the experimentsToggle cache for testing purposes.\n * @param {!Window} win\n * @visibleForTesting\n */\nexport function resetExperimentTogglesForTesting(win) {\n  setCookie(win, COOKIE_NAME, '', 0, {\n    domain: win.location.hostname,\n  });\n  win[TOGGLES_WINDOW_PROPERTY] = null;\n}\n\n/**\n * In some browser implementations of Math.random(), sequential calls of\n * Math.random() are correlated and can cause a bias.  In particular,\n * if the previous random() call was < 0.001 (as it will be if we select\n * into an experiment), the next value could be less than 0.5 more than\n * 50.7% of the time.  This provides an implementation that roots down into\n * the crypto API, when available, to produce less biased samples.\n *\n * @return {number} Pseudo-random floating-point value on the range [0, 1).\n */\nfunction slowButAccuratePrng() {\n  // TODO(tdrl): Implement.\n  return Math.random();\n}\n\n/**\n * Container for alternate random number generator implementations.  This\n * allows us to set an \"accurate\" PRNG for branch selection, but to mock it\n * out easily in tests.\n *\n * @visibleForTesting\n * @const {!{accuratePrng: function():number}}\n */\nexport const RANDOM_NUMBER_GENERATORS = {\n  accuratePrng: slowButAccuratePrng,\n};\n\n/**\n * Selects, uniformly at random, a single item from the array.\n * @param {!Array<string>} arr Object to select from.\n * @return {?string} Single item from arr or null if arr was empty.\n */\nfunction selectRandomItem(arr) {\n  const rn = RANDOM_NUMBER_GENERATORS.accuratePrng();\n  return arr[Math.floor(rn * arr.length)] || null;\n}\n\n/**\n * Selects which page-level experiment branches are enabled. If a given\n * experiment name is already set (including to the null / no branches selected\n * state), this won't alter its state.\n *\n * Check whether a given experiment is set using isExperimentOn(win,\n * experimentName) and, if it is on, look for which branch is selected in\n * win.experimentBranches[experimentName].\n *\n * @param {!Window} win Window context on which to save experiment\n *     selection state.\n * @param {!Object<string, !ExperimentInfo>} experiments  Set of experiments to\n *     configure for this page load.\n * @return {!Object<string, string>} Map of experiment names to selected\n *     branches.\n */\nexport function randomlySelectUnsetExperiments(win, experiments) {\n  win.experimentBranches = win.experimentBranches || {};\n  const selectedExperiments = {};\n  for (const experimentName in experiments) {\n    // Skip experimentName if it is not a key of experiments object or if it\n    // has already been populated by some other property.\n    if (!hasOwn(experiments, experimentName)) {\n      continue;\n    }\n    if (hasOwn(win.experimentBranches, experimentName)) {\n      selectedExperiments[experimentName] =\n          win.experimentBranches[experimentName];\n      continue;\n    }\n\n    if (!experiments[experimentName].isTrafficEligible ||\n        !experiments[experimentName].isTrafficEligible(win)) {\n      win.experimentBranches[experimentName] = null;\n      continue;\n    }\n\n    // If we're in the experiment, but we haven't already forced a specific\n    // experiment branch (e.g., via a test setup), then randomize the branch\n    // choice.\n    if (!win.experimentBranches[experimentName] &&\n      isExperimentOn(win, /*OK*/experimentName)) {\n      const {branches} = experiments[experimentName];\n      win.experimentBranches[experimentName] = selectRandomItem(branches);\n      selectedExperiments[experimentName] =\n          win.experimentBranches[experimentName];\n    }\n  }\n  return selectedExperiments;\n}\n\n/**\n * Returns the experiment branch enabled for the given experiment ID.\n * For example, 'control' or 'experiment'.\n *\n * @param {!Window} win Window context to check for experiment state.\n * @param {string} experimentName Name of the experiment to check.\n * @return {?string} Active experiment branch ID for experimentName (possibly\n *     null if experimentName has been tested but no branch was enabled).\n */\nexport function getExperimentBranch(win, experimentName) {\n  return win.experimentBranches ? win.experimentBranches[experimentName] : null;\n}\n\n/**\n * Force enable (or disable) a specific branch of a given experiment name.\n * Disables the experiment name altogether if branchId is falseish.\n *\n * @param {!Window} win Window context to check for experiment state.\n * @param {string} experimentName Name of the experiment to check.\n * @param {?string} branchId ID of branch to force or null to disable\n *     altogether.\n * @visibleForTesting\n */\nexport function forceExperimentBranch(win, experimentName, branchId) {\n  win.experimentBranches = win.experimentBranches || {};\n  toggleExperiment(win, experimentName, !!branchId, true);\n  win.experimentBranches[experimentName] = branchId;\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {CommonSignals} from './common-signals';\nimport {Observable} from './observable';\nimport {Services} from './services';\nimport {Signals} from './utils/signals';\nimport {closestBySelector, escapeHtml} from './dom';\nimport {dev, rethrowAsync, user} from './log';\nimport {disposeServicesForEmbed, getTopWindow} from './service';\nimport {isDocumentReady} from './document-ready';\nimport {layoutRectLtwh, moveLayoutRect} from './layout-rect';\nimport {loadPromise} from './event-helper';\nimport {\n  px,\n  resetStyles,\n  setImportantStyles,\n  setStyle,\n  setStyles,\n} from './style';\nimport {toWin} from './types';\n\n\n/** @const {string} */\nconst EMBED_PROP = '__AMP_EMBED__';\n\n/** @const {!Array<string>} */\nconst EXCLUDE_INI_LOAD =\n    ['AMP-AD', 'AMP-ANALYTICS', 'AMP-PIXEL', 'AMP-AD-EXIT'];\n\n\n/**\n * Parameters used to create the new \"friendly iframe\" embed.\n * - html: The complete content of an AMP embed, which is itself an AMP\n *   document. Can include whatever is normally allowed in an AMP document,\n *   except for AMP `<script>` declarations. Those should be passed as an\n *   array of `extensionIds`.\n * - extensionsIds: An optional array of AMP extension IDs used in this embed.\n * - fonts: An optional array of fonts used in this embed.\n *\n * @typedef {{\n *   host: (?AmpElement|undefined),\n *   url: string,\n *   html: string,\n *   extensionIds: (?Array<string>|undefined),\n *   fonts: (?Array<string>|undefined),\n * }}\n */\nexport let FriendlyIframeSpec;\n\n\n/**\n * @type {boolean|undefined}\n * @visibleForTesting\n */\nlet srcdocSupported;\n\n/**\n * @param {boolean|undefined} val\n * @visibleForTesting\n */\nexport function setSrcdocSupportedForTesting(val) {\n  srcdocSupported = val;\n}\n\n/**\n * Returns `true` if the Friendly Iframes are supported.\n * @return {boolean}\n */\nfunction isSrcdocSupported() {\n  if (srcdocSupported === undefined) {\n    srcdocSupported = 'srcdoc' in HTMLIFrameElement.prototype;\n  }\n  return srcdocSupported;\n}\n\n\n/**\n * Sets whether the embed is currently visible. The interpretation of visibility\n * is up to the embed parent. However, most of typical cases would rely on\n * whether the embed is currently in the viewport.\n * @param {!FriendlyIframeEmbed} embed\n * @param {boolean} visible\n * TODO(dvoytenko): Re-evaluate and probably drop once layers are ready.\n */\nexport function setFriendlyIframeEmbedVisible(embed, visible) {\n  embed.setVisible_(visible);\n}\n\n\n/**\n * Returns the embed created using `installFriendlyIframeEmbed` or `null`.\n * Caution: This will only return the FIE after the iframe has 'loaded'. If you\n * are checking before this signal you may be in a race condition that returns\n * null.\n * @param {!HTMLIFrameElement} iframe\n * @return {?FriendlyIframeEmbed}\n */\nexport function getFriendlyIframeEmbedOptional(iframe) {\n  return /** @type {?FriendlyIframeEmbed} */ (iframe[EMBED_PROP]);\n}\n\n\n/**\n * Creates the requested \"friendly iframe\" embed. Returns the promise that\n * will be resolved as soon as the embed is available. The actual\n * initialization of the embed will start as soon as the `iframe` is added\n * to the DOM.\n * @param {!HTMLIFrameElement} iframe\n * @param {!Element} container\n * @param {!FriendlyIframeSpec} spec\n * @param {function(!Window)=} opt_preinstallCallback\n * @return {!Promise<!FriendlyIframeEmbed>}\n */\nexport function installFriendlyIframeEmbed(iframe, container, spec,\n  opt_preinstallCallback) {\n  /** @const {!Window} */\n  const win = getTopWindow(toWin(iframe.ownerDocument.defaultView));\n  /** @const {!./service/extensions-impl.Extensions} */\n  const extensions = Services.extensionsFor(win);\n\n  setStyle(iframe, 'visibility', 'hidden');\n  iframe.setAttribute('referrerpolicy', 'unsafe-url');\n\n  // Pre-load extensions.\n  if (spec.extensionIds) {\n    spec.extensionIds.forEach(\n        extensionId => extensions.preloadExtension(extensionId));\n  }\n\n  const html = mergeHtml(spec);\n\n  // Receive the signal when iframe is ready: it's document is formed.\n  iframe.onload = () => {\n    // Chrome does not reflect the iframe readystate.\n    iframe.readyState = 'complete';\n  };\n  const registerViolationListener = () => {\n    iframe.contentWindow.addEventListener('securitypolicyviolation',\n        violationEvent => {\n          dev().warn('FIE', 'security policy violation', violationEvent);\n        });\n  };\n  let loadedPromise;\n  if (isSrcdocSupported()) {\n    iframe.srcdoc = html;\n    loadedPromise = loadPromise(iframe);\n    container.appendChild(iframe);\n    registerViolationListener();\n  } else {\n    iframe.src = 'about:blank';\n    container.appendChild(iframe);\n    const childDoc = iframe.contentWindow.document;\n    childDoc.open();\n    registerViolationListener();\n    childDoc.write(html);\n    // With document.write, `iframe.onload` arrives almost immediately, thus\n    // we need to wait for child's `window.onload`.\n    loadedPromise = loadPromise(iframe.contentWindow);\n    childDoc.close();\n  }\n\n  // Wait for document ready signal.\n  // This is complicated due to crbug.com/649201 on Chrome and a similar issue\n  // on Safari where newly created document's `readyState` immediately equals\n  // `complete`, even though the document itself is not yet available. There's\n  // no other reliable signal for `readyState` in a child window and thus\n  // we have to fallback to polling.\n  let readyPromise;\n  if (isIframeReady(iframe)) {\n    readyPromise = Promise.resolve();\n  } else {\n    readyPromise = new Promise(resolve => {\n      /** @const {number} */\n      const interval = win.setInterval(() => {\n        if (isIframeReady(iframe)) {\n          resolve();\n          win.clearInterval(interval);\n        }\n      }, /* milliseconds */ 5);\n\n      // For safety, make sure we definitely stop polling when child doc is\n      // loaded.\n      loadedPromise.catch(error => {\n        rethrowAsync(error);\n      }).then(() => {\n        resolve();\n        win.clearInterval(interval);\n      });\n    });\n  }\n\n  return readyPromise.then(() => {\n    const embed = new FriendlyIframeEmbed(iframe, spec, loadedPromise);\n    iframe[EMBED_PROP] = embed;\n\n    const childWin = /** @type {!Window} */ (iframe.contentWindow);\n    // Add extensions.\n    extensions.installExtensionsInChildWindow(\n        childWin, spec.extensionIds || [], opt_preinstallCallback);\n    // Ready to be shown.\n    embed.startRender_();\n    return embed;\n  });\n}\n\n\n/**\n * Returns `true` when iframe is ready.\n * @param {!HTMLIFrameElement} iframe\n * @return {boolean}\n */\nfunction isIframeReady(iframe) {\n  // This is complicated due to crbug.com/649201 on Chrome and a similar issue\n  // on Safari where newly created document's `readyState` immediately equals\n  // `complete`, even though the document itself is not yet available. There's\n  // no other reliable signal for `readyState` in a child window and thus\n  // the best way to check is to see the contents of the body.\n  const childDoc = iframe.contentWindow && iframe.contentWindow.document;\n  return !!(childDoc &&\n      isDocumentReady(childDoc) &&\n      childDoc.body &&\n      childDoc.body.firstChild);\n}\n\n\n/**\n * Merges base and fonts into html document.\n * @param {!FriendlyIframeSpec} spec\n */\nfunction mergeHtml(spec) {\n  const originalHtml = spec.html;\n  const originalHtmlUp = originalHtml.toUpperCase();\n\n  // Find the insertion point.\n  let ip = originalHtmlUp.indexOf('<HEAD');\n  if (ip != -1) {\n    ip = originalHtmlUp.indexOf('>', ip + 1) + 1;\n  }\n  if (ip == -1) {\n    ip = originalHtmlUp.indexOf('<BODY');\n  }\n  if (ip == -1) {\n    ip = originalHtmlUp.indexOf('<HTML');\n    if (ip != -1) {\n      ip = originalHtmlUp.indexOf('>', ip + 1) + 1;\n    }\n  }\n\n  const result = [];\n\n  // Preambule.\n  if (ip > 0) {\n    result.push(originalHtml.substring(0, ip));\n  }\n\n  // Add <BASE> tag.\n  result.push(`<base href=\"${escapeHtml(spec.url)}\">`);\n\n  // Load fonts.\n  if (spec.fonts) {\n    spec.fonts.forEach(font => {\n      result.push(\n          `<link href=\"${escapeHtml(font)}\" rel=\"stylesheet\" type=\"text/css\">`);\n    });\n  }\n\n  // Load CSP\n  result.push('<meta http-equiv=Content-Security-Policy ' +\n      'content=\"script-src \\'none\\';object-src \\'none\\';child-src \\'none\\'\">');\n\n  // Postambule.\n  if (ip > 0) {\n    result.push(originalHtml.substring(ip));\n  } else {\n    result.push(originalHtml);\n  }\n\n  return result.join('');\n}\n\n\n/**\n * Exposes `mergeHtml` for testing purposes.\n * @param {!FriendlyIframeSpec} spec\n * @visibleForTesting\n */\nexport function mergeHtmlForTesting(spec) {\n  return mergeHtml(spec);\n}\n\n\n/**\n * A \"friendly iframe\" embed. This is the iframe that's fully accessible to\n * the AMP runtime. It's similar to Shadow DOM in many respects, but it also\n * provides iframe/viewport measurements and enables the use of `vh`, `vw` and\n * `@media` CSS.\n *\n * The friendly iframe is managed by the top-level AMP Runtime. When it's\n * destroyed, the `destroy` method must be called to free up the shared\n * resources.\n */\nexport class FriendlyIframeEmbed {\n\n  /**\n   * @param {!HTMLIFrameElement} iframe\n   * @param {!FriendlyIframeSpec} spec\n   * @param {!Promise} loadedPromise\n   */\n  constructor(iframe, spec, loadedPromise) {\n    /** @const {!HTMLIFrameElement} */\n    this.iframe = iframe;\n\n    /** @const {!Window} */\n    this.win = /** @type{!Window} */(iframe.contentWindow);\n\n    /** @const {!FriendlyIframeSpec} */\n    this.spec = spec;\n\n    /** @const {?AmpElement} */\n    this.host = spec.host || null;\n\n    /** @const @private {time} */\n    this.startTime_ = Date.now();\n\n    /**\n     * Starts out as invisible. The interpretation of this flag is up to\n     * the emded parent.\n     * @private {boolean}\n     */\n    this.visible_ = false;\n\n    /** @private {!Observable<boolean>} */\n    this.visibilityObservable_ = new Observable();\n\n    /** @private @const */\n    this.signals_ = this.host ? this.host.signals() : new Signals();\n\n    /** @private @const {!Promise} */\n    this.winLoadedPromise_ = Promise.all([loadedPromise, this.whenReady()]);\n  }\n\n  /**\n   * Ensures that all resources from this iframe have been released.\n   */\n  destroy() {\n    Services.resourcesForDoc(this.iframe).removeForChildWindow(this.win);\n    disposeServicesForEmbed(this.win);\n  }\n\n  /**\n   * @return {time}\n   */\n  getStartTime() {\n    return this.startTime_;\n  }\n\n  /**\n   * Returns the base URL for the embedded document.\n   * @return {string}\n   */\n  getUrl() {\n    return this.spec.url;\n  }\n\n  /** @return {!Signals} */\n  signals() {\n    return this.signals_;\n  }\n\n  /**\n   * Returns a promise that will resolve when the embed document is ready.\n   * Notice that this signal coincides with the embed's `render-start`.\n   * @return {!Promise}\n   */\n  whenReady() {\n    return this.signals_.whenSignal(CommonSignals.RENDER_START);\n  }\n\n  /**\n   * Returns a promise that will resolve when the child window's `onload` event\n   * has been emitted. In friendly iframes this typically only includes font\n   * loading.\n   * @return {!Promise}\n   */\n  whenWindowLoaded() {\n    return this.winLoadedPromise_;\n  }\n\n  /**\n   * Returns a promise that will resolve when the initial load  of the embed's\n   * content has been completed.\n   * @return {!Promise}\n   */\n  whenIniLoaded() {\n    return this.signals_.whenSignal(CommonSignals.INI_LOAD);\n  }\n\n  /**\n   * @private\n   * @restricted\n   */\n  startRender_() {\n    if (this.host) {\n      this.host.renderStarted();\n    } else {\n      this.signals_.signal(CommonSignals.RENDER_START);\n    }\n    setStyle(this.iframe, 'visibility', '');\n    if (this.win.document && this.win.document.body) {\n      this.win.document.documentElement.classList.add('i-amphtml-fie');\n      setStyles(dev().assertElement(this.win.document.body), {\n        opacity: 1,\n        visibility: 'visible',\n        animation: 'none',\n      });\n    }\n\n    // Initial load signal signal.\n    let rect;\n    if (this.host) {\n      rect = this.host.getLayoutBox();\n    } else {\n      rect = layoutRectLtwh(\n          0, 0,\n          this.win./*OK*/innerWidth,\n          this.win./*OK*/innerHeight);\n    }\n    Promise.all([\n      this.whenReady(),\n      whenContentIniLoad(this.iframe, this.win, rect),\n    ]).then(() => {\n      this.signals_.signal(CommonSignals.INI_LOAD);\n    });\n  }\n\n  /**\n   * Whether the embed is currently visible. The interpretation of visibility\n   * is up to the embed parent. However, most of typical cases would rely on\n   * whether the embed is currently in the viewport.\n   * @return {boolean}\n   * TODO(dvoytenko): Re-evaluate and probably drop once layers are ready.\n   */\n  isVisible() {\n    return this.visible_;\n  }\n\n  /**\n   * See `isVisible` for more info.\n   * @param {function(boolean)} handler\n   * @return {!UnlistenDef}\n   */\n  onVisibilityChanged(handler) {\n    return this.visibilityObservable_.add(handler);\n  }\n\n  /**\n   * @param {boolean} visible\n   * @private\n   * @restricted\n   */\n  setVisible_(visible) {\n    if (this.visible_ != visible) {\n      this.visible_ = visible;\n      this.visibilityObservable_.fire(this.visible_);\n    }\n  }\n\n  /**\n   * @return {!HTMLBodyElement}\n   * @visibleForTesting\n   */\n  getBodyElement() {\n    return /** @type {!HTMLBodyElement} */ (\n      (this.iframe.contentDocument || this.iframe.contentWindow.document)\n          .body);\n  }\n\n  /**\n   * @return {!./service/resources-impl.Resources}\n   * @private\n   */\n  getResources_() {\n    return Services.resourcesForDoc(this.iframe);\n  }\n\n  /**\n   * Runs a measure/mutate cycle ensuring that the iframe change is propagated\n   * to the resource manager.\n   * @param {{measure: (function()|undefined), mutate: function()}} task\n   * @return {!Promise}\n   * @private\n   */\n  measureMutate_(task) {\n    return this.getResources_().measureMutateElement(this.iframe,\n        task.measure || null, task.mutate);\n  }\n\n  /**\n   * @return {!Promise}\n   */\n  enterFullOverlayMode() {\n    const ampAdParent = dev().assertElement(this.iframe.parentNode);\n\n    // Security assertion. Otherwise any 3p frame could request lighbox mode.\n    user().assert(ampAdParent.tagName.toLowerCase() == 'amp-ad',\n        'Only <amp-ad> is allowed to enter lightbox mode.');\n\n    const bodyStyle = {\n      'background': 'transparent',\n      'position': 'absolute',\n      'bottom': 'auto',\n      'right': 'auto',\n\n      // Set for replacing with vsync values.\n      'top': '',\n      'left': '',\n      'width': '',\n      'height': '',\n    };\n\n    const iframeStyle = {\n      'position': 'fixed',\n      'left': 0,\n      'right': 0,\n      'bottom': 0,\n      'width': '100vw',\n      'top': 0,\n      'height': '100vh',\n    };\n\n    return this.measureMutate_({\n      measure: () => {\n        const rect = this.host ?\n          this.host.getLayoutBox() :\n          this.iframe./*OK*/getBoundingClientRect();\n\n        // Offset by scroll top as iframe will be position: fixed.\n        const dy = -Services.viewportForDoc(this.iframe).getScrollTop();\n        const {top, left, width, height} = moveLayoutRect(rect, /* dx */ 0, dy);\n\n        // Offset body by header height to prevent visual jump.\n        Object.assign(bodyStyle, {\n          'top': px(top),\n          'left': px(left),\n          'width': px(width),\n          'height': px(height),\n        });\n      },\n      mutate: () => {\n        // !important to prevent abuse e.g. box @ ltwh = 0, 0, 0, 0\n        setImportantStyles(this.iframe, iframeStyle);\n\n        // We need to override runtime-level !important rules\n        setImportantStyles(this.getBodyElement(), bodyStyle);\n      },\n    });\n  }\n\n  /**\n   * @return {!Promise}\n   */\n  leaveFullOverlayMode() {\n    return this.measureMutate_({\n      mutate: () => {\n        resetStyles(this.iframe, [\n          'position',\n          'left',\n          'right',\n          'top',\n          'bottom',\n          'width',\n          'height',\n        ]);\n\n        // we're not resetting background here as we need to set it to\n        // transparent permanently.\n        resetStyles(this.getBodyElement(), [\n          'position',\n          'top',\n          'left',\n          'width',\n          'height',\n          'bottom',\n          'right',\n        ]);\n      },\n    });\n  }\n}\n\n/**\n * Returns the promise that will be resolved when all content elements\n * have been loaded in the initially visible set.\n * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n * @param {!Window} hostWin\n * @param {!./layout-rect.LayoutRectDef} rect\n * @return {!Promise}\n */\nexport function whenContentIniLoad(elementOrAmpDoc, hostWin, rect) {\n  return Services.resourcesForDoc(elementOrAmpDoc)\n      .getResourcesInRect(hostWin, rect)\n      .then(resources => {\n        const promises = [];\n        resources.forEach(r => {\n          if (!EXCLUDE_INI_LOAD.includes(r.element.tagName)) {\n            promises.push(r.loadedOnce());\n          }\n        });\n        return Promise.all(promises);\n      });\n}\n\n/**\n * @param {!Element} element\n * @return {boolean}\n */\nexport function isInFie(element) {\n  return !!closestBySelector(element, '.i-amphtml-fie');\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {addAttributesToElement, closestBySelector} from './dom';\nimport {deserializeMessage, isAmpMessage} from './3p-frame-messaging';\nimport {dev} from './log';\nimport {dict} from './utils/object';\nimport {filterSplice} from './utils/array';\nimport {getData} from './event-helper';\nimport {parseUrlDeprecated} from './url';\nimport {setStyle} from './style';\nimport {tryParseJson} from './json';\n\n/**\n * Sentinel used to force unlistening after a iframe is detached.\n * @type {string}\n */\nconst UNLISTEN_SENTINEL = 'unlisten';\n\n/**\n * @typedef {{\n *   frame: !Element,\n *   events: !Object<string, !Array<function(!JsonObject)>>\n * }}\n */\nlet WindowEventsDef;\n\n/**\n * Returns a mapping from a URL's origin to an array of windows and their\n * listenFor listeners.\n * @param {?Window} parentWin the window that created the iframe\n * @param {boolean=} opt_create create the mapping if it does not exist\n * @return {?Object<string, !Array<!WindowEventsDef>>}\n */\nfunction getListenFors(parentWin, opt_create) {\n  let {listeningFors} = parentWin;\n\n  if (!listeningFors && opt_create) {\n    listeningFors = parentWin.listeningFors = Object.create(null);\n  }\n  return listeningFors || null;\n}\n\n/**\n * Returns an array of WindowEventsDef that have had any listenFor listeners\n * registered for this sentinel.\n * @param {?Window} parentWin the window that created the iframe\n * @param {string} sentinel the sentinel of the message\n * @param {boolean=} opt_create create the array if it does not exist\n * @return {?Array<!WindowEventsDef>}\n */\nfunction getListenForSentinel(parentWin, sentinel, opt_create) {\n  const listeningFors = getListenFors(parentWin, opt_create);\n  if (!listeningFors) {\n    return listeningFors;\n  }\n\n  let listenSentinel = listeningFors[sentinel];\n  if (!listenSentinel && opt_create) {\n    listenSentinel = listeningFors[sentinel] = [];\n  }\n  return listenSentinel || null;\n}\n\n/**\n * Returns an mapping of event names to listenFor listeners.\n * @param {?Window} parentWin the window that created the iframe\n * @param {!Element} iframe the iframe element who's context will trigger the\n *     event\n * @param {boolean=} opt_is3P set to true if the iframe is 3p.\n * @return {?Object<string, !Array<function(!JsonObject, !Window, string)>>}\n */\nfunction getOrCreateListenForEvents(parentWin, iframe, opt_is3P) {\n  const {origin} = parseUrlDeprecated(iframe.src);\n  const sentinel = getSentinel_(iframe, opt_is3P);\n  const listenSentinel = getListenForSentinel(parentWin, sentinel, true);\n\n  let windowEvents;\n  for (let i = 0; i < listenSentinel.length; i++) {\n    const we = listenSentinel[i];\n    if (we.frame === iframe) {\n      windowEvents = we;\n      break;\n    }\n  }\n\n  if (!windowEvents) {\n    windowEvents = {\n      frame: iframe,\n      origin,\n      events: Object.create(null),\n    };\n    listenSentinel.push(windowEvents);\n  }\n\n  return windowEvents.events;\n}\n\n/**\n * Returns an mapping of event names to listenFor listeners.\n * @param {?Window} parentWin the window that created the iframe\n * @param {string} sentinel the sentinel of the message\n * @param {string} origin the source window's origin\n * @param {?Window} triggerWin the window that triggered the event\n * @return {?Object<string, !Array<function(!JsonObject, !Window, string)>>}\n */\nfunction getListenForEvents(parentWin, sentinel, origin, triggerWin) {\n  const listenSentinel = getListenForSentinel(parentWin, sentinel);\n\n  if (!listenSentinel) {\n    return listenSentinel;\n  }\n\n  // Find the entry for the frame.\n  // TODO(@nekodo): Add a WeakMap<Window, WindowEventsDef> cache to\n  //     speed up this process.\n  let windowEvents;\n  for (let i = 0; i < listenSentinel.length; i++) {\n    const we = listenSentinel[i];\n    const {contentWindow} = we.frame;\n    if (!contentWindow) {\n      setTimeout(dropListenSentinel, 0, listenSentinel);\n    } else if (sentinel === 'amp') {\n      // A non-3P code path, origin must match.\n      if (we.origin === origin && contentWindow == triggerWin) {\n        windowEvents = we;\n        break;\n      }\n    } else if (triggerWin == contentWindow ||\n        isDescendantWindow(contentWindow, triggerWin)) {\n      // 3p code path, we may accept messages from nested frames.\n      windowEvents = we;\n      break;\n    }\n  }\n\n  return windowEvents ? windowEvents.events : null;\n}\n\n/**\n * Checks whether one window is a descendant of another by climbing\n * the parent chain.\n * @param {?Window} ancestor potential ancestor window\n * @param {?Window} descendant potential descendant window\n * @return {boolean}\n */\nfunction isDescendantWindow(ancestor, descendant) {\n  for (let win = descendant; win && win != win.parent; win = win.parent) {\n    if (win == ancestor) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Removes any listenFors registed on listenSentinel that do not have\n * a contentWindow (the frame was removed from the DOM tree).\n * @param {!Array<!WindowEventsDef>} listenSentinel\n */\nfunction dropListenSentinel(listenSentinel) {\n  const noopData = dict({'sentinel': UNLISTEN_SENTINEL});\n\n  for (let i = listenSentinel.length - 1; i >= 0; i--) {\n    const windowEvents = listenSentinel[i];\n\n    if (!windowEvents.frame.contentWindow) {\n      listenSentinel.splice(i, 1);\n\n      const {events} = windowEvents;\n      for (const name in events) {\n        // Splice here, so that each unlisten does not shift the array\n        events[name].splice(0, Infinity).forEach(event => {\n          event(noopData);\n        });\n      }\n    }\n  }\n}\n\n/**\n * Registers the global listenFor event listener if it has yet to be.\n * @param {?Window} parentWin\n */\nfunction registerGlobalListenerIfNeeded(parentWin) {\n  if (parentWin.listeningFors) {\n    return;\n  }\n  const listenForListener = function(event) {\n    if (!getData(event)) {\n      return;\n    }\n    const data = parseIfNeeded(getData(event));\n    if (!data || !data['sentinel']) {\n      return;\n    }\n\n    const listenForEvents = getListenForEvents(\n        parentWin,\n        data['sentinel'],\n        event.origin,\n        event.source\n    );\n    if (!listenForEvents) {\n      return;\n    }\n\n    let listeners = listenForEvents[data['type']];\n    if (!listeners) {\n      return;\n    }\n\n    // We slice to avoid issues with adding another listener or unlistening\n    // during iteration. We could move to a Doubly Linked List with\n    // backtracking, but that's overly complicated.\n    listeners = listeners.slice();\n    for (let i = 0; i < listeners.length; i++) {\n      const listener = listeners[i];\n      listener(data, event.source, event.origin);\n    }\n  };\n\n  parentWin.addEventListener('message', listenForListener);\n}\n\n/**\n * Allows listening for message from the iframe. Returns an unlisten\n * function to remove the listener.\n *\n * @param {?Element} iframe\n * @param {string} typeOfMessage\n * @param {?function(!JsonObject, !Window, string)} callback Called when a\n *     message of this type arrives for this iframe.\n * @param {boolean=} opt_is3P set to true if the iframe is 3p.\n * @param {boolean=} opt_includingNestedWindows set to true if a messages from\n *     nested frames should also be accepted.\n * @return {!UnlistenDef}\n */\nexport function listenFor(\n  iframe, typeOfMessage, callback, opt_is3P, opt_includingNestedWindows) {\n  dev().assert(iframe.src, 'only iframes with src supported');\n  dev().assert(!iframe.parentNode, 'cannot register events on an attached ' +\n      'iframe. It will cause hair-pulling bugs like #2942');\n  dev().assert(callback);\n  const parentWin = iframe.ownerDocument.defaultView;\n\n  registerGlobalListenerIfNeeded(parentWin);\n\n  const listenForEvents = getOrCreateListenForEvents(\n      parentWin,\n      iframe,\n      opt_is3P\n  );\n\n\n  let events = listenForEvents[typeOfMessage] ||\n    (listenForEvents[typeOfMessage] = []);\n\n  let unlisten;\n  let listener = function(data, source, origin) {\n    // Exclude nested frames if necessary.\n    // Note that the source was already verified to be either the contentWindow\n    // of the iframe itself or a descendant window within it.\n    if (!opt_includingNestedWindows && source != iframe.contentWindow) {\n      return;\n    }\n\n    if (data.sentinel == UNLISTEN_SENTINEL) {\n      unlisten();\n      return;\n    }\n    callback(data, source, origin);\n  };\n\n  events.push(listener);\n\n  return unlisten = function() {\n    if (listener) {\n      const index = events.indexOf(listener);\n      if (index > -1) {\n        events.splice(index, 1);\n      }\n      // Make sure references to the unlisten function do not keep\n      // alive too much.\n      listener = null;\n      events = null;\n      callback = null;\n    }\n  };\n}\n\n/**\n * Returns a promise that resolves when one of given messages has been observed\n * for the first time. And remove listener for all other messages.\n * @param {!Element} iframe\n * @param {string|!Array<string>} typeOfMessages\n * @param {boolean=} opt_is3P\n * @return {!Promise<!{data: !JsonObject, source: !Window, origin: string}>}\n */\nexport function listenForOncePromise(iframe, typeOfMessages, opt_is3P) {\n  const unlistenList = [];\n  if (typeof typeOfMessages == 'string') {\n    typeOfMessages = [typeOfMessages];\n  }\n  return new Promise(resolve => {\n    for (let i = 0; i < typeOfMessages.length; i++) {\n      const message = typeOfMessages[i];\n      const unlisten = listenFor(iframe, message, (data, source, origin) => {\n        for (let i = 0; i < unlistenList.length; i++) {\n          unlistenList[i]();\n        }\n        resolve({data, source, origin});\n      }, opt_is3P);\n      unlistenList.push(unlisten);\n    }\n  });\n}\n\n/**\n * Posts a message to the iframe.\n * @param {!Element} iframe The iframe.\n * @param {string} type Type of the message.\n * @param {!JsonObject} object Message payload.\n * @param {string} targetOrigin origin of the target.\n * @param {boolean=} opt_is3P set to true if the iframe is 3p.\n */\nexport function postMessage(iframe, type, object, targetOrigin, opt_is3P) {\n  postMessageToWindows(iframe,\n      [{win: iframe.contentWindow, origin: targetOrigin}], type, object,\n      opt_is3P);\n}\n\n/**\n * Posts an identical message to multiple target windows with the same\n * sentinel.\n * The message is serialized only once.\n * @param {!Element} iframe The iframe.\n * @param {!Array<{win: !Window, origin: string}>} targets to send the message\n *     to, pairs of window and its origin.\n * @param {string} type Type of the message.\n * @param {!JsonObject} object Message payload.\n * @param {boolean=} opt_is3P set to true if the iframe is 3p.\n */\nexport function postMessageToWindows(iframe, targets, type, object, opt_is3P) {\n  if (!iframe.contentWindow) {\n    return;\n  }\n  object['type'] = type;\n  object['sentinel'] = getSentinel_(iframe, opt_is3P);\n  let payload = object;\n  if (opt_is3P) {\n    // Serialize ourselves because that is much faster in Chrome.\n    payload = 'amp-' + JSON.stringify(object);\n  }\n  for (let i = 0; i < targets.length; i++) {\n    const target = targets[i];\n    target.win./*OK*/postMessage(payload, target.origin);\n  }\n}\n\n/**\n * Gets the sentinel string.\n * @param {!Element} iframe The iframe.\n * @param {boolean=} opt_is3P set to true if the iframe is 3p.\n * @return {string} Sentinel string.\n * @private\n */\nfunction getSentinel_(iframe, opt_is3P) {\n  return opt_is3P ? iframe.getAttribute('data-amp-3p-sentinel') : 'amp';\n}\n\n/**\n * JSON parses event.data if it needs to be\n * @param {*} data\n * @return {?JsonObject} object message\n * @private\n * @visibleForTesting\n */\nexport function parseIfNeeded(data) {\n  if (typeof data == 'string') {\n    if (data.charAt(0) == '{') {\n      data = tryParseJson(data, e => {\n        dev().warn('IFRAME-HELPER',\n            'Postmessage could not be parsed. ' +\n            'Is it in a valid JSON format?', e);\n      }) || null;\n    } else if (isAmpMessage(data)) {\n      data = deserializeMessage(data);\n    } else {\n      data = null;\n    }\n  }\n  return /** @type {?JsonObject} */ (data);\n}\n\n\n\n/**\n * Manages a postMessage API for an iframe with a subscription message and\n * a way to broadcast messages to all subscribed windows, which\n * in turn must all be descendants of the contentWindow of the iframe.\n */\nexport class SubscriptionApi {\n  /**\n   * @param {!Element} iframe The iframe.\n   * @param {string} type Type of the subscription message.\n   * @param {boolean} is3p set to true if the iframe is 3p.\n   * @param {function(!JsonObject, !Window, string)} requestCallback Callback\n   *     invoked whenever a new window subscribes.\n   */\n  constructor(iframe, type, is3p, requestCallback) {\n    /** @private @const {!Element} */\n    this.iframe_ = iframe;\n    /** @private @const {boolean} */\n    this.is3p_ = is3p;\n    /** @private @const {!Array<{win: !Window, origin: string}>} */\n    this.clientWindows_ = [];\n\n    /** @private @const {!UnlistenDef} */\n    this.unlisten_ = listenFor(this.iframe_, type, (data, source, origin) => {\n      // This message might be from any window within the iframe, we need\n      // to keep track of which windows want to be sent updates.\n      if (!this.clientWindows_.some(entry => entry.win == source)) {\n        this.clientWindows_.push({win: source, origin});\n      }\n      requestCallback(data, source, origin);\n    }, this.is3p_,\n        // For 3P frames we also allow nested frames within them to subscribe..\n    this.is3p_ /* opt_includingNestedWindows */);\n  }\n\n  /**\n   * Sends a message to all subscribed windows.\n   * @param {string} type Type of the message.\n   * @param {!JsonObject} data Message payload.\n   */\n  send(type, data) {\n    // Remove clients that have been removed from the DOM.\n    filterSplice(this.clientWindows_, client => !!client.win.parent);\n    postMessageToWindows(\n        this.iframe_,\n        this.clientWindows_,\n        type,\n        data,\n        this.is3p_);\n  }\n\n  /**\n   * Destroys iframe.\n   */\n  destroy() {\n    this.unlisten_();\n    this.clientWindows_.length = 0;\n  }\n}\n\n/**\n * @param {!Element} element\n * @return {boolean}\n */\nexport function looksLikeTrackingIframe(element) {\n  const box = element.getLayoutBox();\n  // This heuristic is subject to change.\n  if (box.width > 10 || box.height > 10) {\n    return false;\n  }\n  // Iframe is not tracking iframe if open with user interaction\n  return !closestBySelector(element, '.i-amphtml-overlay');\n}\n\n// Most common ad sizes\n// Array of [width, height] pairs.\nconst adSizes = [\n  [300, 250],\n  [320, 50],\n  [300, 50],\n  [320, 100],\n];\n\n/**\n * Guess whether this element might be an ad.\n * @param {!Element} element An amp-iframe element.\n * @return {boolean}\n * @visibleForTesting\n */\nexport function isAdLike(element) {\n  const box = element.getLayoutBox();\n  const {height, width} = box;\n  for (let i = 0; i < adSizes.length; i++) {\n    const refWidth = adSizes[i][0];\n    const refHeight = adSizes[i][1];\n    if (refHeight > height) {\n      continue;\n    }\n    if (refWidth > width) {\n      continue;\n    }\n    // Fuzzy matching to account for padding.\n    if (height - refHeight <= 20 && width - refWidth <= 20) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * @param {!Element} iframe\n * @private\n */\nexport function disableScrollingOnIframe(iframe) {\n  addAttributesToElement(iframe, dict({'scrolling': 'no'}));\n\n  // This shouldn't work, but it does on Firefox.\n  // https://stackoverflow.com/a/15494969\n  setStyle(iframe, 'overflow', 'hidden');\n\n  return iframe;\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {SubscriptionApi} from './iframe-helper';\nimport {dev} from './log';\nimport {dict} from './utils/object';\nimport {isArray, isFiniteNumber} from './types';\nimport {layoutRectLtwh, moveLayoutRect, rectIntersection} from './layout-rect';\n\n/**\n * The structure that defines the rectangle used in intersection observers.\n *\n * @typedef {{\n *   top: number,\n *   bottom: number,\n *   left: number,\n *   right: number,\n *   width: number,\n *   height: number,\n *   x: number,\n *   y: number,\n * }}\n */\nexport let DOMRect;\n\nexport const DEFAULT_THRESHOLD =\n    [0, 0.05, 0.1, 0.15, 0.2, 0.25, 0.3, 0.35, 0.4,\n      0.45, 0.5, 0.55, 0.6, 0.65, 0.7, 0.75, 0.8, 0.85, 0.9, 0.95, 1];\n\n/** @typedef {{\n *    element: !Element,\n *    currentThresholdSlot: number,\n *  }}\n */\nlet ElementIntersectionStateDef;\n\n/** @const @private */\nconst TAG = 'INTERSECTION-OBSERVER';\n\n/** @const @private */\nconst INIT_TIME = Date.now();\n\n/**\n * A function to get the element's current IntersectionObserverEntry\n * regardless of the intersetion ratio. Only available when element is not\n * nested in a container iframe.\n * TODO: support opt_iframe if there's valid use cases.\n * @param {!./layout-rect.LayoutRectDef} element element's rect\n * @param {?./layout-rect.LayoutRectDef} owner element's owner rect\n * @param {!./layout-rect.LayoutRectDef} hostViewport hostViewport's rect\n * @return {!IntersectionObserverEntry} A change entry.\n */\nexport function getIntersectionChangeEntry(\n  element, owner, hostViewport) {\n  const intersection = rectIntersection(element, owner, hostViewport) ||\n      layoutRectLtwh(0, 0, 0, 0);\n  const ratio = intersectionRatio(intersection, element);\n  return calculateChangeEntry(\n      element, hostViewport, intersection, ratio);\n}\n\n/**\n * @param {!Window} win\n * @return {boolean}\n */\nexport function nativeIntersectionObserverSupported(win) {\n  return 'IntersectionObserver' in win &&\n      'IntersectionObserverEntry' in win &&\n      'intersectionRatio' in win.IntersectionObserverEntry.prototype;\n}\n\n/**\n * A class to help amp-iframe and amp-ad nested iframe listen to intersection\n * change.\n */\nexport class IntersectionObserverApi {\n  /**\n   * @param {!AMP.BaseElement} baseElement\n   * @param {!Element} iframe\n   * @param {boolean=} opt_is3p\n   */\n  constructor(baseElement, iframe, opt_is3p) {\n    /** @private @const {!AMP.BaseElement} */\n    this.baseElement_ = baseElement;\n\n    /** @private {?IntersectionObserverPolyfill} */\n    this.intersectionObserver_ = null;\n\n    /** @private {boolean} */\n    this.shouldObserve_ = false;\n\n    /** @private {boolean} */\n    this.isInViewport_ = false;\n\n    /** @private {?function()} */\n    this.unlistenOnDestroy_ = null;\n\n    /** @private @const {!./service/viewport/viewport-impl.Viewport} */\n    this.viewport_ = baseElement.getViewport();\n\n    /** @private {?SubscriptionApi} */\n    this.subscriptionApi_ = new SubscriptionApi(\n        iframe, 'send-intersections', opt_is3p || false, () => {\n          this.startSendingIntersection_();\n        });\n\n    this.intersectionObserver_ = new IntersectionObserverPolyfill(entries => {\n      // Remove target info from cross origin iframe.\n      for (let i = 0; i < entries.length; i++) {\n        delete entries[i]['target'];\n      }\n      this.subscriptionApi_.send('intersection', dict({'changes': entries}));\n    }, {threshold: DEFAULT_THRESHOLD});\n    this.intersectionObserver_.tick(this.viewport_.getRect());\n\n    /** @const {function()} */\n    this.fire = () => {\n      if (!this.shouldObserve_ || !this.isInViewport_) {\n        return;\n      }\n      this.intersectionObserver_.tick(this.viewport_.getRect());\n    };\n  }\n\n  /**\n   * Function to start listening to viewport event. and observer intersection\n   * change on the element.\n   */\n  startSendingIntersection_() {\n    this.shouldObserve_ = true;\n    this.intersectionObserver_.observe(this.baseElement_.element);\n    this.baseElement_.getVsync().measure(() => {\n      this.isInViewport_ = this.baseElement_.isInViewport();\n      this.fire();\n    });\n\n    const unlistenViewportScroll = this.viewport_.onScroll(this.fire);\n    const unlistenViewportChange = this.viewport_.onChanged(this.fire);\n    this.unlistenOnDestroy_ = () => {\n      unlistenViewportScroll();\n      unlistenViewportChange();\n    };\n  }\n\n  /**\n   * Enable to the PositionObserver to listen to viewport events\n   * @param {boolean} inViewport\n   */\n  onViewportCallback(inViewport) {\n    this.isInViewport_ = inViewport;\n  }\n\n  /**\n   * Clean all listenrs\n   */\n  destroy() {\n    this.shouldObserve_ = false;\n    this.intersectionObserver_ = null;\n    if (this.unlistenOnDestroy_) {\n      this.unlistenOnDestroy_();\n      this.unlistenOnDestroy_ = null;\n    }\n    this.subscriptionApi_.destroy();\n    this.subscriptionApi_ = null;\n  }\n}\n\n\n/**\n * The IntersectionObserverPolyfill class lets any element receive its\n * intersection data with the viewport. It acts like native browser supported\n * IntersectionObserver.\n * The IntersectionObserver receives a callback function and an optional option\n * as params. Whenever the element intersection ratio cross a threshold value,\n * IntersectionObserverPolyfill will call the provided callback function with\n * the change entry.\n * @visibleForTesting\n */\nexport class IntersectionObserverPolyfill {\n  /**\n   * @param {function(!Array<!IntersectionObserverEntry>)} callback\n   * @param {Object=} opt_option\n   */\n  constructor(callback, opt_option) {\n    /** @private @const {function(!Array<!IntersectionObserverEntry>)} */\n    this.callback_ = callback;\n\n    // The input threshold can be a number or an array of numbers.\n    let threshold = opt_option && opt_option.threshold;\n    if (threshold) {\n      threshold = isArray(threshold) ?\n        threshold : [threshold];\n    } else {\n      threshold = [0];\n    }\n\n    for (let i = 0; i < threshold.length; i++) {\n      dev().assert(isFiniteNumber(threshold[i]), 'Threshold should be a ' +\n          'finite number or an array of finite numbers');\n    }\n\n    /**\n     * A list of threshold, sorted in increasing numeric order\n     * @private @const {!Array}\n     */\n    this.threshold_ = threshold.sort();\n    dev().assert(this.threshold_[0] >= 0 &&\n        this.threshold_[this.threshold_.length - 1] <= 1,\n    'Threshold should be in the range from \"[0, 1]\"');\n\n    /** @private {?./layout-rect.LayoutRectDef} */\n    this.lastViewportRect_ = null;\n\n    /** @private {./layout-rect.LayoutRectDef|undefined} */\n    this.lastIframeRect_ = undefined;\n\n    /**\n     * Store a list of observed elements and their current threshold slot which\n     * their intersection ratio fills, range from [0, this.threshold_.length]\n     * @private {Array<!ElementIntersectionStateDef>}\n     */\n    this.observeEntries_ = [];\n  }\n\n  /**\n   */\n  disconnect() {\n    this.observeEntries_.length = 0;\n  }\n\n  /**\n   * Provide a way to observe the intersection change for a specific element\n   * Please note IntersectionObserverPolyfill only support AMP element now\n   * TODO: Support non AMP element\n   * @param {!Element} element\n   */\n  observe(element) {\n    // Check the element is an AMP element.\n    dev().assert(element.getLayoutBox);\n\n    // If the element already exists in current observeEntries, do nothing\n    for (let i = 0; i < this.observeEntries_.length; i++) {\n      if (this.observeEntries_[i].element === element) {\n        dev().warn(TAG, 'should observe same element once');\n        return;\n      }\n    }\n\n    const newState = {\n      element,\n      currentThresholdSlot: 0,\n    };\n\n    // Get the new observed element's first changeEntry based on last viewport\n    if (this.lastViewportRect_) {\n      const change = this.getValidIntersectionChangeEntry_(\n          newState, this.lastViewportRect_, this.lastIframeRect_);\n      if (change) {\n        this.callback_([change]);\n      }\n    }\n\n    // push new observed element\n    this.observeEntries_.push(newState);\n  }\n\n  /**\n   * Provide a way to unobserve intersection change for a specified element\n   * @param {!Element} element\n   */\n  unobserve(element) {\n    // find the unobserved element in observeEntries\n    for (let i = 0; i < this.observeEntries_.length; i++) {\n      if (this.observeEntries_[i].element === element) {\n        this.observeEntries_.splice(i, 1);\n        return;\n      }\n    }\n    dev().warn(TAG, 'unobserve non-observed element');\n  }\n\n  /**\n   * Tick function that update the DOMRect of the root of observed elements.\n   * Caller needs to make sure to pass in the correct container.\n   * Note: the opt_iframe param is the iframe position relative to the host doc,\n   * The iframe must be a non-scrollable iframe.\n   * @param {!./layout-rect.LayoutRectDef} hostViewport\n   * @param {./layout-rect.LayoutRectDef=} opt_iframe\n   */\n  tick(hostViewport, opt_iframe) {\n\n    if (opt_iframe) {\n      // If element inside an iframe. Adjust origin to the iframe.left/top.\n      hostViewport =\n          moveLayoutRect(hostViewport, -opt_iframe.left, -opt_iframe.top);\n      opt_iframe =\n          moveLayoutRect(opt_iframe, -opt_iframe.left, -opt_iframe.top);\n    }\n\n    this.lastViewportRect_ = hostViewport;\n    this.lastIframeRect_ = opt_iframe;\n\n    const changes = [];\n\n    for (let i = 0; i < this.observeEntries_.length; i++) {\n      const change = this.getValidIntersectionChangeEntry_(\n          this.observeEntries_[i], hostViewport, opt_iframe);\n      if (change) {\n        changes.push(change);\n      }\n    }\n\n    if (changes.length) {\n      this.callback_(changes);\n    }\n  }\n\n  /**\n   * Return a change entry for one element that should be compatible with\n   * IntersectionObserverEntry if it's valid with current config.\n   * When the new intersection ratio doesn't cross one of a threshold value,\n   * the function will return null.\n   *\n   * @param {!ElementIntersectionStateDef} state\n   * @param {!./layout-rect.LayoutRectDef} hostViewport hostViewport's rect\n   * @param {./layout-rect.LayoutRectDef=} opt_iframe iframe container rect\n   * @return {?IntersectionObserverEntry} A valid change entry or null if ratio\n   * @private\n   */\n  getValidIntersectionChangeEntry_(state, hostViewport, opt_iframe) {\n    const {element} = state;\n\n    // Normalize container LayoutRect to be relative to page\n    let ownerRect = null;\n\n    // If opt_iframe is provided, all LayoutRect has position relative to\n    // the iframe.\n    // If opt_iframe is not provided, all LayoutRect has position relative to\n    // the host document.\n    const elementRect = element.getLayoutBox();\n    const owner = element.getOwner();\n    ownerRect = owner && owner.getLayoutBox();\n\n    // calculate intersectionRect. that the element intersects with hostViewport\n    // and intersects with owner element and container iframe if exists.\n    const intersectionRect =\n        rectIntersection(elementRect, ownerRect, hostViewport, opt_iframe) ||\n        layoutRectLtwh(0, 0, 0, 0);\n    // calculate ratio, call callback based on new ratio value.\n    const ratio = intersectionRatio(intersectionRect, elementRect);\n    const newThresholdSlot = getThresholdSlot(this.threshold_, ratio);\n\n    if (newThresholdSlot == state.currentThresholdSlot) {\n      return null;\n    }\n    state.currentThresholdSlot = newThresholdSlot;\n\n    // To get same behavior as native IntersectionObserver set hostViewport null\n    // if inside an iframe\n    const changeEntry = calculateChangeEntry(elementRect,\n        (opt_iframe ? null : hostViewport), intersectionRect, ratio);\n    changeEntry.target = element;\n    return changeEntry;\n  }\n}\n\n/**\n * Returns the ratio of the smaller box's area to the larger box's area.\n * @param {!./layout-rect.LayoutRectDef} smaller\n * @param {!./layout-rect.LayoutRectDef} larger\n * @return {number}\n */\nfunction intersectionRatio(smaller, larger) {\n  return (smaller.width * smaller.height) / (larger.width * larger.height);\n}\n\n/**\n * Returns the slot number that the current ratio fills in.\n * @param {!Array} sortedThreshold valid sorted IoB threshold\n * @param {number} ratio Range from [0, 1]\n * @return {number} Range from [0, threshold.length]\n * @visibleForTesting\n */\nexport function getThresholdSlot(sortedThreshold, ratio) {\n  let startIdx = 0;\n  let endIdx = sortedThreshold.length;\n  // 0 is a special case that does not fit into [small, large) range\n  if (ratio == 0) {\n    return 0;\n  }\n  let mid = ((startIdx + endIdx) / 2) | 0;\n  while (startIdx < mid) {\n    const midValue = sortedThreshold[mid];\n    // In the range of [small, large)\n    if (ratio < midValue) {\n      endIdx = mid;\n    } else {\n      startIdx = mid;\n    }\n    mid = ((startIdx + endIdx) / 2) | 0;\n  }\n  return endIdx;\n}\n\n/**\n * Helper function to calculate the IntersectionObserver change entry.\n * @param {!./layout-rect.LayoutRectDef} element element's rect\n * @param {?./layout-rect.LayoutRectDef} hostViewport hostViewport's rect\n * @param {!./layout-rect.LayoutRectDef} intersection\n * @param {number} ratio\n * @return {!IntersectionObserverEntry}}\n */\nfunction calculateChangeEntry(\n  element, hostViewport, intersection, ratio) {\n  // If element not in an iframe.\n  // adjust all LayoutRect to hostViewport Origin.\n  let boundingClientRect = element;\n  let rootBounds = hostViewport;\n  // If no hostViewport is provided, element is inside an non-scrollable iframe.\n  // Every Layoutrect has already adjust their origin according to iframe\n  // rect origin. LayoutRect position is relative to iframe origin,\n  // thus relative to iframe's viewport origin because the viewport is at the\n  // iframe origin. No need to adjust position here.\n\n  if (hostViewport) {\n    // If element not in an iframe.\n    // adjust all LayoutRect to hostViewport Origin.\n    rootBounds = /** @type {!./layout-rect.LayoutRectDef} */ (rootBounds);\n    intersection = moveLayoutRect(intersection, -hostViewport.left,\n        -hostViewport.top);\n    // The element is relative to (0, 0), while the viewport moves. So, we must\n    // adjust.\n    boundingClientRect = moveLayoutRect(boundingClientRect,\n        -hostViewport.left, -hostViewport.top);\n    // Now, move the viewport to (0, 0)\n    rootBounds = moveLayoutRect(rootBounds,\n        -hostViewport.left, -hostViewport.top);\n  }\n\n  return /** @type {!IntersectionObserverEntry} */ ({\n    time: (typeof performance !== 'undefined' && performance.now) ?\n      performance.now() : Date.now() - INIT_TIME,\n    rootBounds,\n    boundingClientRect,\n    intersectionRect: intersection,\n    intersectionRatio: ratio,\n  });\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview This module declares JSON types as defined in the\n * {@link http://json.org/}.\n */\n\nimport {isObject} from './types';\n\n\n// NOTE Type are changed to {*} because of\n// https://github.com/google/closure-compiler/issues/1999\n\n/**\n * JSON scalar. It's either string, number or boolean.\n * @typedef {*} should be string|number|boolean\n */\nlet JSONScalarDef;\n\n\n/**\n * JSON object. It's a map with string keys and JSON values.\n * @typedef {*} should be !Object<string, ?JSONValueDef>\n */\nlet JSONObjectDef;\n\n\n/**\n * JSON array. It's an array with JSON values.\n * @typedef {*} should be !Array<?JSONValueDef>\n */\nlet JSONArrayDef;\n\n\n/**\n * JSON value. It's either a scalar, an object or an array.\n * @typedef {*} should be !JSONScalarDef|!JSONObjectDef|!JSONArrayDef\n */\nlet JSONValueDef;\n\n/**\n * Recreates objects with prototype-less copies.\n * @param {!JsonObject} obj\n * @return {!JsonObject}\n */\nexport function recreateNonProtoObject(obj) {\n  const copy = Object.create(null);\n  for (const k in obj) {\n    if (!hasOwnProperty(obj, k)) {\n      continue;\n    }\n    const v = obj[k];\n    copy[k] = isObject(v) ? recreateNonProtoObject(v) : v;\n  }\n  return /** @type {!JsonObject} */ (copy);\n}\n\n/**\n * Returns a value from an object for a field-based expression. The expression\n * is a simple nested dot-notation of fields, such as `field1.field2`. If any\n * field in a chain does not exist or is not an object or array, the returned\n * value will be `undefined`.\n *\n * @param {!JsonObject} obj\n * @param {string} expr\n * @return {*}\n */\nexport function getValueForExpr(obj, expr) {\n  // The `.` indicates \"the object itself\".\n  if (expr == '.') {\n    return obj;\n  }\n  // Otherwise, navigate via properties.\n  const parts = expr.split('.');\n  let value = obj;\n  for (let i = 0; i < parts.length; i++) {\n    const part = parts[i];\n    if (part &&\n        value &&\n        value[part] !== undefined &&\n        hasOwnProperty(value, part)\n    ) {\n      value = value[part];\n      continue;\n    }\n    value = undefined;\n    break;\n  }\n  return value;\n}\n\n/**\n * Simple wrapper around JSON.parse that casts the return value\n * to JsonObject.\n * Create a new wrapper if an array return value is desired.\n * @param {*} json JSON string to parse\n * @return {?JsonObject} May be extend to parse arrays.\n */\nexport function parseJson(json) {\n  return /** @type {?JsonObject} */(JSON.parse(/** @type {string} */ (json)));\n}\n\n/**\n * Parses the given `json` string without throwing an exception if not valid.\n * Returns `undefined` if parsing fails.\n * Returns the `Object` corresponding to the JSON string when parsing succeeds.\n * @param {*} json JSON string to parse\n * @param {function(!Error)=} opt_onFailed Optional function that will be called\n *     with the error if parsing fails.\n * @return {?JsonObject|undefined} May be extend to parse arrays.\n */\nexport function tryParseJson(json, opt_onFailed) {\n  try {\n    return parseJson(json);\n  } catch (e) {\n    if (opt_onFailed) {\n      opt_onFailed(e);\n    }\n    return undefined;\n  }\n}\n\n/**\n * Recursively checks strict equality of items in nested arrays and objects.\n *\n * @param {JSONValueDef} a\n * @param {JSONValueDef} b\n * @param {number} depth The maximum recursion depth. Must be finite.\n * @return {boolean}\n * @throws {Error} If depth argument is not finite.\n */\nexport function recursiveEquals(a, b, depth = 3) {\n  if (!isFinite(depth)) {\n    throw new Error('depth arg must be finite: ' + depth);\n  }\n  if (a === b) {\n    return true;\n  }\n  // Only check shallow equality for depth < 1.\n  if (depth < 1) {\n    return false;\n  }\n  if (typeof a !== typeof b) {\n    return false;\n  }\n  if (Array.isArray(a) && Array.isArray(b)) {\n    if (a.length !== b.length) {\n      return false;\n    }\n    for (let i = 0; i < a.length; i++) {\n      if (!recursiveEquals(a[i], b[i], depth - 1)) {\n        return false;\n      }\n    }\n    return true;\n  }\n  if (a && b && typeof a === 'object' && typeof b === 'object') {\n    const keysA = Object.keys(/** @type {!Object} */ (a));\n    const keysB = Object.keys(/** @type {!Object} */ (b));\n    if (keysA.length !== keysB.length) {\n      return false;\n    }\n    for (let i = 0; i < keysA.length; i++) {\n      const keyA = keysA[i];\n      const valueA = a[keyA];\n      const valueB = b[keyA];\n      if (!recursiveEquals(valueA, valueB, depth - 1)) {\n        return false;\n      }\n    }\n    return true;\n  }\n  return false;\n}\n\n\n/**\n * @param {*} obj\n * @param {string} key\n * @return {boolean}\n */\nfunction hasOwnProperty(obj, key) {\n  if (obj == null || typeof obj != 'object') {\n    return false;\n  }\n  return Object.prototype.hasOwnProperty.call(\n      /** @type {!Object} */ (obj), key);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * The structure that combines position and size for an element. The exact\n * interpretation of position and size depends on the use case.\n *\n * @typedef {{\n *   top: number,\n *   bottom: number,\n *   left: number,\n *   right: number,\n *   width: number,\n *   height: number,\n *   x: number,\n *   y: number\n * }}\n */\nexport let LayoutRectDef;\n\n\n/**\n * The structure that represents the margins of an Element.\n *\n * @typedef {{\n *   top: number,\n *   right: number,\n *   bottom: number,\n *   left: number\n * }}\n */\nexport let LayoutMarginsDef;\n\n\n/**\n * The structure that represents a requested change to the margins of an\n * Element. Any new values specified will replace existing ones (rather than\n * being additive).\n *\n * @typedef {{\n *   top: (number|undefined),\n *   right: (number|undefined),\n *   bottom: (number|undefined),\n *   left: (number|undefined)\n * }}\n */\nexport let LayoutMarginsChangeDef;\n\n/**\n* RelativePositions\n*\n* Describes the relative position of an element to another (whether the\n* first is inside the second, on top of the second or on the bottom\n* @enum {string}\n*/\nexport const RelativePositions = {\n  INSIDE: 'inside',\n  TOP: 'top',\n  BOTTOM: 'bottom',\n};\n\n/**\n * Creates a layout rect based on the left, top, width and height parameters\n * in that order.\n * @param {number} left\n * @param {number} top\n * @param {number} width\n * @param {number} height\n * @return {!LayoutRectDef}\n */\nexport function layoutRectLtwh(left, top, width, height) {\n  return {\n    left,\n    top,\n    width,\n    height,\n    bottom: top + height,\n    right: left + width,\n    x: left,\n    y: top,\n  };\n}\n\n\n/**\n * Creates a layout rect based on the DOMRect, e.g. obtained from calling\n * getBoundingClientRect.\n * @param {!ClientRect} rect\n * @return {!LayoutRectDef}\n */\nexport function layoutRectFromDomRect(rect) {\n  return layoutRectLtwh(Number(rect.left), Number(rect.top),\n      Number(rect.width), Number(rect.height));\n}\n\n/**\n * Returns true if the specified two rects overlap by a single pixel.\n * @param {!LayoutRectDef} r1\n * @param {!LayoutRectDef} r2\n * @return {boolean}\n */\nexport function layoutRectsOverlap(r1, r2) {\n  return (r1.top <= r2.bottom && r2.top <= r1.bottom &&\n      r1.left <= r2.right && r2.left <= r1.right);\n}\n\n\n/**\n * Returns the intersection between a, b or null if there is none.\n * @param {...?LayoutRectDef|undefined} var_args\n * @return {?LayoutRectDef}\n */\nexport function rectIntersection(var_args) {\n  let x0 = -Infinity;\n  let x1 = Infinity;\n  let y0 = -Infinity;\n  let y1 = Infinity;\n  for (let i = 0; i < arguments.length; i++) {\n    const current = arguments[i];\n    if (!current) {\n      continue;\n    }\n    x0 = Math.max(x0, current.left);\n    x1 = Math.min(x1, current.left + current.width);\n    y0 = Math.max(y0, current.top);\n    y1 = Math.min(y1, current.top + current.height);\n    if (x1 < x0 || y1 < y0) {\n      return null;\n    }\n  }\n  if (x1 == Infinity) {\n    return null;\n  }\n  return layoutRectLtwh(x0, y0, x1 - x0, y1 - y0);\n}\n\n/**\n * Returns the position of r2 relative to r1\n * @param {!LayoutRectDef} r1\n * @param {!LayoutRectDef} r2\n * @return {RelativePositions}\n */\nexport function layoutRectsRelativePos(r1, r2) {\n  if (r1.top < r2.top) {\n    return RelativePositions.TOP;\n  } else if (r1.bottom > r2.bottom) {\n    return RelativePositions.BOTTOM;\n  } else {\n    return RelativePositions.INSIDE;\n  }\n}\n\n/**\n * Expand the layout rect using multiples of width and height.\n * @param {!LayoutRectDef} rect Original rect.\n * @param {number} dw Expansion in width, specified as a multiple of width.\n * @param {number} dh Expansion in height, specified as a multiple of height.\n * @return {!LayoutRectDef}\n */\nexport function expandLayoutRect(rect, dw, dh) {\n  return layoutRectLtwh(rect.left - rect.width * dw,\n      rect.top - rect.height * dh,\n      rect.width * (1 + dw * 2),\n      rect.height * (1 + dh * 2));\n}\n\n/**\n * Moves the layout rect using dx and dy.\n * @param {!LayoutRectDef} rect Original rect.\n * @param {number} dx Move horizontally with this value.\n * @param {number} dy Move vertically with this value.\n * @return {!LayoutRectDef}\n */\nexport function moveLayoutRect(rect, dx, dy) {\n  if ((dx == 0 && dy == 0) ||\n      (rect.width == 0 && rect.height == 0)) {\n    return rect;\n  }\n  return layoutRectLtwh(rect.left + dx, rect.top + dy,\n      rect.width, rect.height);\n}\n\n\n/**\n * @param {!LayoutMarginsDef} margins\n * @param {!LayoutMarginsChangeDef} change\n * @return {boolean}\n */\nexport function areMarginsChanged(margins, change) {\n  return (change.top !== undefined && change.top != margins.top) ||\n      (change.right !== undefined && change.right != margins.right) ||\n      (change.bottom !== undefined && change.bottom != margins.bottom) ||\n      (change.left !== undefined && change.left != margins.left);\n}\n\n/**\n * @param {!LayoutRectDef} from\n * @param {!LayoutRectDef} to\n * @return {boolean}\n */\nexport function layoutRectSizeEquals(from, to) {\n  return from.width == to.width &&\n      from.height === to.height;\n}\n\n/**\n * @param {?LayoutRectDef} r1\n * @param {?LayoutRectDef} r2\n * @return {boolean}\n */\nexport function layoutRectEquals(r1, r2) {\n  if (!r1 || !r2) {\n    return false;\n  }\n  return r1.left == r2.left && r1.top == r2.top &&\n      r1.width == r2.width && r1.height == r2.height;\n}\n\n/**\n * @param {LayoutMarginsChangeDef|undefined} marginsChange\n * @return {LayoutMarginsChangeDef|undefined}\n */\nexport function cloneLayoutMarginsChangeDef(marginsChange) {\n  if (!marginsChange) {\n    return marginsChange;\n  }\n  return {\n    top: marginsChange.top,\n    bottom: marginsChange.bottom,\n    left: marginsChange.left,\n    right: marginsChange.right,\n  };\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Implements element layout. See https://goo.gl/9avXuT for\n * details.\n */\n\nimport {dev, user} from './log';\nimport {htmlFor} from './static-template';\nimport {isFiniteNumber} from './types';\nimport {setStyle, setStyles} from './style';\nimport {startsWith} from './string';\n\n/**\n * @enum {string}\n */\nexport const Layout = {\n  NODISPLAY: 'nodisplay',\n  FIXED: 'fixed',\n  FIXED_HEIGHT: 'fixed-height',\n  RESPONSIVE: 'responsive',\n  CONTAINER: 'container',\n  FILL: 'fill',\n  FLEX_ITEM: 'flex-item',\n  FLUID: 'fluid',\n  INTRINSIC: 'intrinsic',\n};\n\n\n/**\n * Layout priorities to use with BaseElement#getLayoutPriority() and\n * BaseElement#updateLayoutPriority().\n * @enum {number}\n */\nexport const LayoutPriority = {\n  CONTENT: 0,\n  METADATA: 1,\n  ADS: 2,\n  BACKGROUND: 3,\n};\n\n\n/**\n * CSS Length type. E.g. \"1px\" or \"20vh\".\n * @typedef {string}\n */\nexport let LengthDef;\n\n\n/**\n * @typedef {{\n *   width: string,\n *   height: string\n * }}\n */\nlet DimensionsDef;\n\n\n/**\n * The set of elements with natural dimensions, that is, elements\n * which have a known dimension either based on their value specified here,\n * or, if the value is null, a dimension specific to the browser.\n * `hasNaturalDimensions` checks for membership in this set.\n * `getNaturalDimensions` determines the dimensions for an element in the\n *    set and caches it.\n * @type {!Object<string, ?DimensionsDef>}\n * @private  Visible for testing only!\n */\nexport const naturalDimensions_ = {\n  'AMP-PIXEL': {width: '0px', height: '0px'},\n  'AMP-ANALYTICS': {width: '1px', height: '1px'},\n  // TODO(dvoytenko): audio should have width:auto.\n  'AMP-AUDIO': null,\n  'AMP-SOCIAL-SHARE': {width: '60px', height: '44px'},\n};\n\n\n/**\n * Elements that the progess can be shown for. This set has to be externalized\n * since the element's implementation may not be downloaded yet.\n * @enum {boolean}\n * @private  Visible for testing only!\n */\nexport const LOADING_ELEMENTS_ = {\n  'AMP-ANIM': true,\n  'AMP-BRIGHTCOVE': true,\n  'AMP-GOOGLE-DOCUMENT-EMBED': true,\n  'AMP-EMBED': true,\n  'AMP-FACEBOOK': true,\n  'AMP-FACEBOOK-COMMENTS': true,\n  'AMP-FACEBOOK-LIKE': true,\n  'AMP-FACEBOOK-PAGE': true,\n  'AMP-IFRAME': true,\n  'AMP-IMG': true,\n  'AMP-INSTAGRAM': true,\n  'AMP-LIST': true,\n  'AMP-OOYALA-PLAYER': true,\n  'AMP-PINTEREST': true,\n  'AMP-PLAYBUZZ': true,\n  'AMP-VIDEO': true,\n  'AMP-YOUTUBE': true,\n};\n\n\n/**\n * @param {string} s\n * @return {Layout|undefined} Returns undefined in case of failure to parse\n *   the layout string.\n */\nexport function parseLayout(s) {\n  for (const k in Layout) {\n    if (Layout[k] == s) {\n      return Layout[k];\n    }\n  }\n  return undefined;\n}\n\n\n/**\n * @param {!Layout} layout\n * @return {string}\n */\nexport function getLayoutClass(layout) {\n  return 'i-amphtml-layout-' + layout;\n}\n\n\n/**\n * Whether an element with this layout inherently defines the size.\n * @param {!Layout} layout\n * @return {boolean}\n */\nexport function isLayoutSizeDefined(layout) {\n  return (layout == Layout.FIXED ||\n      layout == Layout.FIXED_HEIGHT ||\n      layout == Layout.RESPONSIVE ||\n      layout == Layout.FILL ||\n      layout == Layout.FLEX_ITEM ||\n      layout == Layout.FLUID ||\n      layout == Layout.INTRINSIC);\n}\n\n\n/**\n * Whether the tag is an internal (service) AMP tag.\n * @param {!Node|string} tag\n * @return {boolean}\n */\nexport function isInternalElement(tag) {\n  const tagName = (typeof tag == 'string') ? tag : tag.tagName;\n  return tagName && startsWith(tagName.toLowerCase(), 'i-');\n}\n\n\n/**\n * Parses the CSS length value. If no units specified, the assumed value is\n * \"px\". Returns undefined in case of parsing error.\n * @param {string|undefined|null} s\n * @return {!LengthDef|undefined}\n */\nexport function parseLength(s) {\n  if (typeof s == 'number') {\n    return s + 'px';\n  }\n  if (!s) {\n    return undefined;\n  }\n  if (!/^\\d+(\\.\\d+)?(px|em|rem|vh|vw|vmin|vmax|cm|mm|q|in|pc|pt)?$/.test(s)) {\n    return undefined;\n  }\n  if (/^\\d+(\\.\\d+)?$/.test(s)) {\n    return s + 'px';\n  }\n  return s;\n}\n\n\n\n/**\n * Asserts that the supplied value is a non-percent CSS Length value.\n * @param {!LengthDef|string|null|undefined} length\n * @return {!LengthDef}\n */\nexport function assertLength(length) {\n  user().assert(\n      /^\\d+(\\.\\d+)?(px|em|rem|vh|vw|vmin|vmax|cm|mm|q|in|pc|pt)$/.test(length),\n      'Invalid length value: %s', length);\n  return /** @type {!LengthDef} */ (length);\n}\n\n\n\n\n/**\n * Asserts that the supplied value is a CSS Length value\n * (including percent unit).\n * @param {!LengthDef|string} length\n * @return {!LengthDef}\n */\nexport function assertLengthOrPercent(length) {\n  user().assert(/^\\d+(\\.\\d+)?(px|em|rem|vh|vw|vmin|vmax|%)$/.test(length),\n      'Invalid length or percent value: %s', length);\n  return length;\n}\n\n\n/**\n * Returns units from the CSS length value.\n * @param {!LengthDef|string|null|undefined} length\n * @return {string}\n */\nexport function getLengthUnits(length) {\n  assertLength(length);\n  dev().assertString(length);\n  const m = user().assert(length.match(/[a-z]+/i),\n      'Failed to read units from %s', length);\n  return m[0];\n}\n\n\n/**\n * Returns the numeric value of a CSS length value.\n * @param {!LengthDef|string|null|undefined} length\n * @return {number|undefined}\n */\nexport function getLengthNumeral(length) {\n  const res = parseFloat(length);\n  return isFiniteNumber(res) ? res : undefined;\n}\n\n\n/**\n * Determines whether the tagName is a known element that has natural dimensions\n * in our runtime or the browser.\n * @param {string} tagName The element tag name.\n * @return {boolean}\n */\nexport function hasNaturalDimensions(tagName) {\n  tagName = tagName.toUpperCase();\n  return naturalDimensions_[tagName] !== undefined;\n}\n\n\n/**\n * Determines the default dimensions for an element which could vary across\n * different browser implementations, like <audio> for instance.\n * This operation can only be completed for an element whitelisted by\n * `hasNaturalDimensions`.\n * @param {!Element} element\n * @return {DimensionsDef}\n */\nexport function getNaturalDimensions(element) {\n  const tagName = element.tagName.toUpperCase();\n  dev().assert(naturalDimensions_[tagName] !== undefined);\n  if (!naturalDimensions_[tagName]) {\n    const doc = element.ownerDocument;\n    const naturalTagName = tagName.replace(/^AMP\\-/, '');\n    const temp = doc.createElement(naturalTagName);\n    // For audio, should no-op elsewhere.\n    temp.controls = true;\n    setStyles(temp, {\n      position: 'absolute',\n      visibility: 'hidden',\n    });\n    doc.body.appendChild(temp);\n    naturalDimensions_[tagName] = {\n      width: (temp./*OK*/offsetWidth || 1) + 'px',\n      height: (temp./*OK*/offsetHeight || 1) + 'px',\n    };\n    doc.body.removeChild(temp);\n  }\n  return /** @type {DimensionsDef} */ (naturalDimensions_[tagName]);\n}\n\n\n/**\n * Whether the loading can be shown for the specified elemeent. This set has\n * to be externalized since the element's implementation may not be\n * downloaded yet.\n * @param {!Element} element\n * @return {boolean}\n */\nexport function isLoadingAllowed(element) {\n  const tagName = element.tagName.toUpperCase();\n  if (tagName == 'AMP-AD' || tagName == 'AMP-EMBED') {\n    return true;\n  }\n  return LOADING_ELEMENTS_[tagName] || false;\n}\n\n\n/**\n * Applies layout to the element. Visible for testing only.\n *\n * \\   \\  /  \\  /   / /   \\     |   _  \\     |  \\ |  | |  | |  \\ |  |  / _____|\n *  \\   \\/    \\/   / /  ^  \\    |  |_)  |    |   \\|  | |  | |   \\|  | |  |  __\n *   \\            / /  /_\\  \\   |      /     |  . `  | |  | |  . `  | |  | |_ |\n *    \\    /\\    / /  _____  \\  |  |\\  \\----.|  |\\   | |  | |  |\\   | |  |__| |\n *     \\__/  \\__/ /__/     \\__\\ | _| `._____||__| \\__| |__| |__| \\__|  \\______|\n *\n * The equivalent of this method is used for server-side rendering (SSR) and\n * any changes made to it must be made in coordination with caches that\n * implement SSR. For more information on SSR see bit.ly/amp-ssr.\n *\n * @param {!Element} element\n * @return {!Layout}\n */\nexport function applyStaticLayout(element) {\n  // Check if the layout has already been done by server-side rendering. The\n  // document may be visible to the user if the boilerplate was removed so\n  // please take care in making changes here.\n  const completedLayoutAttr = element.getAttribute('i-amphtml-layout');\n  if (completedLayoutAttr) {\n    const layout = /** @type {!Layout} */ (dev().assert(\n        parseLayout(completedLayoutAttr)));\n    if ((layout == Layout.RESPONSIVE || layout == Layout.INTRINSIC)\n      && element.firstElementChild) {\n      // Find sizer, but assume that it might not have been parsed yet.\n      element.sizerElement =\n          element.querySelector('i-amphtml-sizer') || undefined;\n    } else if (layout == Layout.NODISPLAY) {\n      applyNoDisplayLayout(element);\n    }\n    return layout;\n  }\n\n  // If the layout was already done by server-side rendering (SSR), then the\n  // code below will not run. Any changes below will necessitate a change to SSR\n  // and must be coordinated with caches that implement SSR. See bit.ly/amp-ssr.\n\n  // Parse layout from the element.\n  const layoutAttr = element.getAttribute('layout');\n  const widthAttr = element.getAttribute('width');\n  const heightAttr = element.getAttribute('height');\n  const sizesAttr = element.getAttribute('sizes');\n  const heightsAttr = element.getAttribute('heights');\n\n  // Input layout attributes.\n  const inputLayout = layoutAttr ? parseLayout(layoutAttr) : null;\n  user().assert(inputLayout !== undefined, 'Unknown layout: %s', layoutAttr);\n  /** @const {string|null|undefined} */\n  const inputWidth = (widthAttr && widthAttr != 'auto') ?\n    parseLength(widthAttr) : widthAttr;\n  user().assert(inputWidth !== undefined, 'Invalid width value: %s', widthAttr);\n  /** @const {string|null|undefined} */\n  const inputHeight = (heightAttr && heightAttr != 'fluid') ?\n    parseLength(heightAttr) : heightAttr;\n  user().assert(inputHeight !== undefined, 'Invalid height value: %s',\n      heightAttr);\n\n  // Effective layout attributes. These are effectively constants.\n  let width;\n  let height;\n  let layout;\n\n  // Calculate effective width and height.\n  if ((!inputLayout || inputLayout == Layout.FIXED ||\n      inputLayout == Layout.FIXED_HEIGHT) &&\n      (!inputWidth || !inputHeight) && hasNaturalDimensions(element.tagName)) {\n    // Default width and height: handle elements that do not specify a\n    // width/height and are defined to have natural browser dimensions.\n    const dimensions = getNaturalDimensions(element);\n    width = (inputWidth || inputLayout == Layout.FIXED_HEIGHT) ? inputWidth :\n      dimensions.width;\n    height = inputHeight || dimensions.height;\n  } else {\n    width = inputWidth;\n    height = inputHeight;\n  }\n\n  // Calculate effective layout.\n  if (inputLayout) {\n    layout = inputLayout;\n  } else if (!width && !height) {\n    layout = Layout.CONTAINER;\n  } else if (height == 'fluid') {\n    layout = Layout.FLUID;\n  } else if (height && (!width || width == 'auto')) {\n    layout = Layout.FIXED_HEIGHT;\n  } else if (height && width && (sizesAttr || heightsAttr)) {\n    layout = Layout.RESPONSIVE;\n  } else {\n    layout = Layout.FIXED;\n  }\n\n  // Verify layout attributes.\n  if (layout == Layout.FIXED || layout == Layout.FIXED_HEIGHT ||\n      layout == Layout.RESPONSIVE || layout == Layout.INTRINSIC) {\n    user().assert(height, 'Expected height to be available: %s', heightAttr);\n  }\n  if (layout == Layout.FIXED_HEIGHT) {\n    user().assert(!width || width == 'auto',\n        'Expected width to be either absent or equal \"auto\" ' +\n        'for fixed-height layout: %s', widthAttr);\n  }\n  if (layout == Layout.FIXED || layout == Layout.RESPONSIVE ||\n      layout == Layout.INTRINSIC) {\n    user().assert(width && width != 'auto',\n        'Expected width to be available and not equal to \"auto\": %s',\n        widthAttr);\n  }\n\n  if (layout == Layout.RESPONSIVE || layout == Layout.INTRINSIC) {\n    user().assert(getLengthUnits(width) == getLengthUnits(height),\n        'Length units should be the same for width and height: %s, %s',\n        widthAttr, heightAttr);\n  } else {\n    user().assert(heightsAttr === null,\n        'Unexpected \"heights\" attribute for none-responsive layout');\n  }\n\n  // Apply UI.\n  element.classList.add(getLayoutClass(layout));\n  if (isLayoutSizeDefined(layout)) {\n    element.classList.add('i-amphtml-layout-size-defined');\n  }\n  if (layout == Layout.NODISPLAY) {\n    // CSS defines layout=nodisplay automatically with `display:none`. Thus\n    // no additional styling is needed.\n    applyNoDisplayLayout(element);\n  } else if (layout == Layout.FIXED) {\n    setStyles(element, {\n      width: dev().assertString(width),\n      height: dev().assertString(height),\n    });\n  } else if (layout == Layout.FIXED_HEIGHT) {\n    setStyle(element, 'height', dev().assertString(height));\n  } else if (layout == Layout.RESPONSIVE) {\n    const sizer = element.ownerDocument.createElement('i-amphtml-sizer');\n    setStyles(sizer, {\n      display: 'block',\n      paddingTop:\n        ((getLengthNumeral(height) / getLengthNumeral(width)) * 100) + '%',\n    });\n    element.insertBefore(sizer, element.firstChild);\n    element.sizerElement = sizer;\n  } else if (layout == Layout.INTRINSIC) {\n    // Intrinsic uses an svg inside the sizer element rather than the padding\n    // trick Note a naked svg won't work becasue other thing expect the\n    // i-amphtml-sizer element\n    const sizer = htmlFor(element)`\n      <i-amphtml-sizer class=\"i-amphtml-sizer\">\n        <img class=\"i-amphtml-intrinsic-sizer\" />\n      </i-amphtml-sizer>`;\n    const intrinsicSizer = sizer.firstElementChild;\n    intrinsicSizer.setAttribute('src',\n        `data:image/svg+xml;charset=utf-8,<svg height=\"${height}\" width=\"${width}\" xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\"/>`);\n    element.insertBefore(sizer, element.firstChild);\n    // TODO(jpettitt): sizer is leaked and can't be cleaned up.\n    element.sizerElement = intrinsicSizer;\n  } else if (layout == Layout.FILL) {\n    // Do nothing.\n  } else if (layout == Layout.CONTAINER) {\n    // Do nothing. Elements themselves will check whether the supplied\n    // layout value is acceptable. In particular container is only OK\n    // sometimes.\n  } else if (layout == Layout.FLEX_ITEM) {\n    // Set height and width to a flex item if they exist.\n    // The size set to a flex item could be overridden by `display: flex` later.\n    if (width) {\n      setStyle(element, 'width', width);\n    }\n    if (height) {\n      setStyle(element, 'height', height);\n    }\n  } else if (layout == Layout.FLUID) {\n    element.classList.add('i-amphtml-layout-awaiting-size');\n    if (width) {\n      setStyle(element, 'width', width);\n    }\n    setStyle(element, 'height', 0);\n  }\n  return layout;\n}\n\n\n/**\n * @param {!Element} element\n */\nfunction applyNoDisplayLayout(element) {\n  // TODO(dvoytenko, #9353): once `toggleLayoutDisplay` API has been deployed\n  // everywhere, switch all relevant elements to this API. In the meantime,\n  // simply unblock display toggling via `style=\"display: ...\"`.\n  setStyle(element, 'display', 'none');\n  element.classList.add('i-amphtml-display');\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {getMode} from './mode';\nimport {getModeObject} from './mode-object';\nimport {isEnumValue} from './types';\n\n/**\n * Triple zero width space.\n *\n * This is added to user error messages, so that we can later identify\n * them, when the only thing that we have is the message. This is the\n * case in many browsers when the global exception handler is invoked.\n *\n * @const {string}\n */\nexport const USER_ERROR_SENTINEL = '\\u200B\\u200B\\u200B';\n\n\n/**\n * Four zero width space.\n *\n * @const {string}\n */\nexport const USER_ERROR_EMBED_SENTINEL = '\\u200B\\u200B\\u200B\\u200B';\n\n\n/**\n * @param {string} message\n * @return {boolean} Whether this message was a user error.\n */\nexport function isUserErrorMessage(message) {\n  return message.indexOf(USER_ERROR_SENTINEL) >= 0;\n}\n\n/**\n * @param {string} message\n * @return {boolean} Whether this message was a a user error from an iframe embed.\n */\nexport function isUserErrorEmbed(message) {\n  return message.indexOf(USER_ERROR_EMBED_SENTINEL) >= 0;\n}\n\n\n/**\n * @enum {number}\n * @private Visible for testing only.\n */\nexport const LogLevel = {\n  OFF: 0,\n  ERROR: 1,\n  WARN: 2,\n  INFO: 3,\n  FINE: 4,\n};\n\n/**\n * Sets reportError function. Called from error.js to break cyclic\n * dependency.\n * @param {function(*, !Element=)|undefined} fn\n */\nexport function setReportError(fn) {\n  self.reportError = fn;\n}\n\n/**\n * @type {!LogLevel|undefined}\n * @private\n */\nlet levelOverride_ = undefined;\n\n/**\n * @param {!LogLevel} level\n */\nexport function overrideLogLevel(level) {\n  levelOverride_ = level;\n}\n\n/**\n * Logging class. Use of sentinel string instead of a boolean to check user/dev\n * errors because errors could be rethrown by some native code as a new error,\n * and only a message would survive. Also, some browser don’t support a 5th\n * error object argument in window.onerror. List of supporting browser can be\n * found here:\n * https://blog.sentry.io/2016/01/04/client-javascript-reporting-window-onerror.html\n * @final\n * @private Visible for testing only.\n */\nexport class Log {\n  /**\n   * opt_suffix will be appended to error message to identify the type of the\n   * error message. We can't rely on the error object to pass along the type\n   * because some browsers do not have this param in its window.onerror API.\n   * See:\n   * https://blog.sentry.io/2016/01/04/client-javascript-reporting-window-onerror.html\n   *\n   * @param {!Window} win\n   * @param {function(!./mode.ModeDef):!LogLevel} levelFunc\n   * @param {string=} opt_suffix\n   */\n  constructor(win, levelFunc, opt_suffix) {\n    /**\n     * In tests we use the main test window instead of the iframe where\n     * the tests runs because only the former is relayed to the console.\n     * @const {!Window}\n     */\n    this.win = (getMode().test && win.AMP_TEST_IFRAME) ? win.parent : win;\n\n    /** @private @const {function(!./mode.ModeDef):!LogLevel} */\n    this.levelFunc_ = levelFunc;\n\n    /** @private @const {!LogLevel} */\n    this.level_ = this.defaultLevel_();\n\n    /** @private @const {string} */\n    this.suffix_ = opt_suffix || '';\n  }\n\n  /**\n   * @return {!LogLevel}\n   * @private\n   */\n  getLevel_() {\n    return (levelOverride_ !== undefined) ? levelOverride_ : this.level_;\n  }\n\n  /**\n   * @return {!LogLevel}\n   * @private\n   */\n  defaultLevel_() {\n    // No console - can't enable logging.\n    if (!this.win.console || !this.win.console.log) {\n      return LogLevel.OFF;\n    }\n\n    // Logging has been explicitly disabled.\n    if (getMode().log == '0') {\n      return LogLevel.OFF;\n    }\n\n    // Logging is enabled for tests directly.\n    if (getMode().test && this.win.ENABLE_LOG) {\n      return LogLevel.FINE;\n    }\n\n    // LocalDev by default allows INFO level, unless overriden by `#log`.\n    if (getMode().localDev && !getMode().log) {\n      return LogLevel.INFO;\n    }\n\n    // Delegate to the specific resolver.\n    return this.levelFunc_(getModeObject());\n  }\n\n  /**\n   * @param {string} tag\n   * @param {string} level\n   * @param {!Array} messages\n   */\n  msg_(tag, level, messages) {\n    if (this.getLevel_() != LogLevel.OFF) {\n      let fn = this.win.console.log;\n      if (level == 'ERROR') {\n        fn = this.win.console.error || fn;\n      } else if (level == 'INFO') {\n        fn = this.win.console.info || fn;\n      } else if (level == 'WARN') {\n        fn = this.win.console.warn || fn;\n      }\n      if (getMode().localDev) {\n        messages.unshift('[' + tag + ']');\n      }\n      fn.apply(this.win.console, messages);\n    }\n  }\n\n  /**\n   * Whether the logging is enabled.\n   * @return {boolean}\n   */\n  isEnabled() {\n    return this.getLevel_() != LogLevel.OFF;\n  }\n\n  /**\n   * Reports a fine-grained message.\n   * @param {string} tag\n   * @param {...*} var_args\n   */\n  fine(tag, var_args) {\n    if (this.getLevel_() >= LogLevel.FINE) {\n      this.msg_(tag, 'FINE', Array.prototype.slice.call(arguments, 1));\n    }\n  }\n\n  /**\n   * Reports a informational message.\n   * @param {string} tag\n   * @param {...*} var_args\n   */\n  info(tag, var_args) {\n    if (this.getLevel_() >= LogLevel.INFO) {\n      this.msg_(tag, 'INFO', Array.prototype.slice.call(arguments, 1));\n    }\n  }\n\n  /**\n   * Reports a warning message.\n   * @param {string} tag\n   * @param {...*} var_args\n   */\n  warn(tag, var_args) {\n    if (this.getLevel_() >= LogLevel.WARN) {\n      this.msg_(tag, 'WARN', Array.prototype.slice.call(arguments, 1));\n    }\n  }\n\n  /**\n   * Reports an error message. If the logging is disabled, the error is rethrown\n   * asynchronously.\n   * @param {string} tag\n   * @param {...*} var_args\n   * @return {!Error|undefined}\n   * @private\n   */\n  error_(tag, var_args) {\n    if (this.getLevel_() >= LogLevel.ERROR) {\n      this.msg_(tag, 'ERROR', Array.prototype.slice.call(arguments, 1));\n    } else {\n      const error = createErrorVargs.apply(null,\n          Array.prototype.slice.call(arguments, 1));\n      this.prepareError_(error);\n      return error;\n    }\n  }\n\n  /**\n   * Reports an error message.\n   * @param {string} tag\n   * @param {...*} var_args\n   */\n  error(tag, var_args) {\n    const error = this.error_.apply(this, arguments);\n    if (error) {\n      error.name = tag || error.name;\n      // reportError is installed globally per window in the entry point.\n      self.reportError(error);\n    }\n  }\n\n  /**\n   * Reports an error message and marks with an expected property. If the\n   * logging is disabled, the error is rethrown asynchronously.\n   * @param {string} unusedTag\n   * @param {...*} var_args\n   */\n  expectedError(unusedTag, var_args) {\n    const error = this.error_.apply(this, arguments);\n    if (error) {\n      error.expected = true;\n      // reportError is installed globally per window in the entry point.\n      self.reportError(error);\n    }\n  }\n\n  /**\n   * Creates an error object.\n   * @param {...*} var_args\n   * @return {!Error}\n   */\n  createError(var_args) {\n    const error = createErrorVargs.apply(null, arguments);\n    this.prepareError_(error);\n    return error;\n  }\n\n  /**\n   * Creates an error object with its expected property set to true.\n   * @param {...*} var_args\n   * @return {!Error}\n   */\n  createExpectedError(var_args) {\n    const error = createErrorVargs.apply(null, arguments);\n    this.prepareError_(error);\n    error.expected = true;\n    return error;\n  }\n\n  /**\n   * Throws an error if the first argument isn't trueish.\n   *\n   * Supports argument substitution into the message via %s placeholders.\n   *\n   * Throws an error object that has two extra properties:\n   * - associatedElement: This is the first element provided in the var args.\n   *   It can be used for improved display of error messages.\n   * - messageArray: The elements of the substituted message as non-stringified\n   *   elements in an array. When e.g. passed to console.error this yields\n   *   native displays of things like HTML elements.\n   *\n   * @param {T} shouldBeTrueish The value to assert. The assert fails if it does\n   *     not evaluate to true.\n   * @param {string=} opt_message The assertion message\n   * @param {...*} var_args Arguments substituted into %s in the message.\n   * @return {T} The value of shouldBeTrueish.\n   * @template T\n   * eslint \"google-camelcase/google-camelcase\": 0\n   */\n  assert(shouldBeTrueish, opt_message, var_args) {\n    let firstElement;\n    if (!shouldBeTrueish) {\n      const message = opt_message || 'Assertion failed';\n      const splitMessage = message.split('%s');\n      const first = splitMessage.shift();\n      let formatted = first;\n      const messageArray = [];\n      pushIfNonEmpty(messageArray, first);\n      for (let i = 2; i < arguments.length; i++) {\n        const val = arguments[i];\n        if (val && val.tagName) {\n          firstElement = val;\n        }\n        const nextConstant = splitMessage.shift();\n        messageArray.push(val);\n        pushIfNonEmpty(messageArray, nextConstant.trim());\n        formatted += toString(val) + nextConstant;\n      }\n      const e = new Error(formatted);\n      e.fromAssert = true;\n      e.associatedElement = firstElement;\n      e.messageArray = messageArray;\n      this.prepareError_(e);\n      // reportError is installed globally per window in the entry point.\n      self.reportError(e);\n      throw e;\n    }\n    return shouldBeTrueish;\n  }\n\n  /**\n   * Throws an error if the first argument isn't an Element\n   *\n   * Otherwise see `assert` for usage\n   *\n   * @param {*} shouldBeElement\n   * @param {string=} opt_message The assertion message\n   * @return {!Element} The value of shouldBeTrueish.\n   * @template T\n   * eslint \"google-camelcase/google-camelcase\": 2\n   */\n  assertElement(shouldBeElement, opt_message) {\n    const shouldBeTrueish = shouldBeElement && shouldBeElement.nodeType == 1;\n    this.assert(shouldBeTrueish, (opt_message || 'Element expected') + ': %s',\n        shouldBeElement);\n    return /** @type {!Element} */ (shouldBeElement);\n  }\n\n  /**\n   * Throws an error if the first argument isn't a string. The string can\n   * be empty.\n   *\n   * For more details see `assert`.\n   *\n   * @param {*} shouldBeString\n   * @param {string=} opt_message The assertion message\n   * @return {string} The string value. Can be an empty string.\n   * eslint \"google-camelcase/google-camelcase\": 2\n   */\n  assertString(shouldBeString, opt_message) {\n    this.assert(typeof shouldBeString == 'string',\n        (opt_message || 'String expected') + ': %s', shouldBeString);\n    return /** @type {string} */ (shouldBeString);\n  }\n\n  /**\n   * Throws an error if the first argument isn't a number. The allowed values\n   * include `0` and `NaN`.\n   *\n   * For more details see `assert`.\n   *\n   * @param {*} shouldBeNumber\n   * @param {string=} opt_message The assertion message\n   * @return {number} The number value. The allowed values include `0`\n   *   and `NaN`.\n   */\n  assertNumber(shouldBeNumber, opt_message) {\n    this.assert(typeof shouldBeNumber == 'number',\n        (opt_message || 'Number expected') + ': %s', shouldBeNumber);\n    return /** @type {number} */ (shouldBeNumber);\n  }\n\n  /**\n   * Throws an error if the first argument isn't a boolean.\n   *\n   * For more details see `assert`.\n   *\n   * @param {*} shouldBeBoolean\n   * @param {string=} opt_message The assertion message\n   * @return {boolean} The boolean value.\n   */\n  assertBoolean(shouldBeBoolean, opt_message) {\n    this.assert(!!shouldBeBoolean === shouldBeBoolean,\n        (opt_message || 'Boolean expected') + ': %s', shouldBeBoolean);\n    return /** @type {boolean} */ (shouldBeBoolean);\n  }\n\n  /**\n   * Asserts and returns the enum value. If the enum doesn't contain such a\n   * value, the error is thrown.\n   *\n   * @param {!Object<T>} enumObj\n   * @param {string} s\n   * @param {string=} opt_enumName\n   * @return {T}\n   * @template T\n   * eslint \"google-camelcase/google-camelcase\": 2\n   */\n  assertEnumValue(enumObj, s, opt_enumName) {\n    if (isEnumValue(enumObj, s)) {\n      return s;\n    }\n    this.assert(false,\n        'Unknown %s value: \"%s\"',\n        opt_enumName || 'enum', s);\n  }\n\n  /**\n   * @param {!Error} error\n   * @private\n   */\n  prepareError_(error) {\n    error = duplicateErrorIfNecessary(error);\n    if (this.suffix_) {\n      if (!error.message) {\n        error.message = this.suffix_;\n      } else if (error.message.indexOf(this.suffix_) == -1) {\n        error.message += this.suffix_;\n      }\n    } else if (isUserErrorMessage(error.message)) {\n      error.message = error.message.replace(USER_ERROR_SENTINEL, '');\n    }\n  }\n}\n\n/**\n * @param {string|!Element} val\n * @return {string}\n */\nfunction toString(val) {\n  // Do check equivalent to `val instanceof Element` without cross-window bug\n  if (val && val.nodeType == 1) {\n    return val.tagName.toLowerCase() + (val.id ? '#' + val.id : '');\n  }\n  return /** @type {string} */ (val);\n}\n\n\n/**\n * @param {!Array} array\n * @param {*} val\n */\nfunction pushIfNonEmpty(array, val) {\n  if (val != '') {\n    array.push(val);\n  }\n}\n\n/**\n * Some exceptions (DOMException, namely) have read-only message.\n * @param {!Error} error\n * @return {!Error};\n */\nexport function duplicateErrorIfNecessary(error) {\n  const {message} = error;\n  const test = String(Math.random());\n  error.message = test;\n\n  if (error.message === test) {\n    error.message = message;\n    return error;\n  }\n\n  const e = new Error(error.message);\n  // Copy all the extraneous things we attach.\n  for (const prop in error) {\n    e[prop] = error[prop];\n  }\n  // Ensure these are copied.\n  e.stack = error.stack;\n  return e;\n}\n\n/**\n * @param {...*} var_args\n * @return {!Error}\n * @visibleForTesting\n */\nexport function createErrorVargs(var_args) {\n  let error = null;\n  let message = '';\n  for (let i = 0; i < arguments.length; i++) {\n    const arg = arguments[i];\n    if (arg instanceof Error && !error) {\n      error = duplicateErrorIfNecessary(arg);\n    } else {\n      if (message) {\n        message += ' ';\n      }\n      message += arg;\n    }\n  }\n\n  if (!error) {\n    error = new Error(message);\n  } else if (message) {\n    error.message = message + ': ' + error.message;\n  }\n  return error;\n}\n\n\n/**\n * Rethrows the error without terminating the current context. This preserves\n * whether the original error designation is a user error or a dev error.\n * @param {...*} var_args\n */\nexport function rethrowAsync(var_args) {\n  const error = createErrorVargs.apply(null, arguments);\n  setTimeout(() => {\n    // reportError is installed globally per window in the entry point.\n    self.reportError(error);\n    throw error;\n  });\n}\n\n\n/**\n * Cache for logs. We do not use a Service since the service module depends\n * on Log and closure literally can't even.\n * @type {{user: ?Log, dev: ?Log, userForEmbed: ?Log}}\n */\nself.log = (self.log || {\n  user: null,\n  dev: null,\n  userForEmbed: null,\n});\n\nconst logs = self.log;\n\n/**\n * Eventually holds a constructor for Log objects. Lazily initialized, so we\n * can avoid ever referencing the real constructor except in JS binaries\n * that actually want to include the implementation.\n * @type {?Function}\n */\nlet logConstructor = null;\n\n/**\n * Initializes log contructor.\n */\nexport function initLogConstructor() {\n  logConstructor = Log;\n  // Initialize instances for use. If a binary (an extension for example) that\n  // does not call `initLogConstructor` invokes `dev()` or `user()` earlier than\n  // the binary that does call `initLogConstructor` (amp.js), the extension will\n  // throw an error as that extension will never be able to initialize the log\n  // instances and we also don't want it to call `initLogConstructor` either\n  // (since that will cause the Log implementation to be bundled into that\n  // binary). So we must initialize the instances eagerly so that they are ready\n  // for use (stored globally) after the main binary calls `initLogConstructor`.\n  dev();\n  user();\n}\n\n/**\n * Resets log contructor for testing.\n */\nexport function resetLogConstructorForTesting() {\n  logConstructor = null;\n}\n\n/**\n * Publisher level log.\n *\n * Enabled in the following conditions:\n *  1. Not disabled using `#log=0`.\n *  2. Development mode is enabled via `#development=1` or logging is explicitly\n *     enabled via `#log=D` where D >= 1.\n *  3. AMP.setLogLevel(D) is called, where D >= 1.\n *\n * @param {!Element=} opt_element\n * @return {!Log}\n */\nexport function user(opt_element) {\n  if (!logs.user) {\n    logs.user = getUserLogger(USER_ERROR_SENTINEL);\n  }\n  if (!isFromEmbed(logs.user.win, opt_element)) {\n    return logs.user;\n  } else {\n    if (logs.userForEmbed) {\n      return logs.userForEmbed;\n    }\n    return logs.userForEmbed = getUserLogger(USER_ERROR_EMBED_SENTINEL);\n  }\n}\n\n/**\n * Getter for user logger\n * @param {string=} suffix\n * @return {!Log}\n */\nfunction getUserLogger(suffix) {\n  if (!logConstructor) {\n    throw new Error('failed to call initLogConstructor');\n  }\n  return new logConstructor(self, mode => {\n    const logNum = parseInt(mode.log, 10);\n    if (mode.development || logNum >= 1) {\n      return LogLevel.FINE;\n    }\n    return LogLevel.WARN;\n  }, suffix);\n}\n\n/**\n * AMP development log. Calls to `devLog().assert` and `dev.fine` are stripped\n * in the PROD binary. However, `devLog().assert` result is preserved in either\n * case.\n *\n * Enabled in the following conditions:\n *  1. Not disabled using `#log=0`.\n *  2. Logging is explicitly enabled via `#log=D`, where D >= 2.\n *  3. AMP.setLogLevel(D) is called, where D >= 2.\n *\n * @return {!Log}\n */\nexport function dev() {\n  if (logs.dev) {\n    return logs.dev;\n  }\n  if (!logConstructor) {\n    throw new Error('failed to call initLogConstructor');\n  }\n  return logs.dev = new logConstructor(self, mode => {\n    const logNum = parseInt(mode.log, 10);\n    if (logNum >= 3) {\n      return LogLevel.FINE;\n    }\n    if (logNum >= 2) {\n      return LogLevel.INFO;\n    }\n    return LogLevel.OFF;\n  });\n}\n\n/**\n * @param {!Window} win\n * @param {!Element=} opt_element\n * @return {boolean} isEmbed\n */\nexport function isFromEmbed(win, opt_element) {\n  if (!opt_element) {\n    return false;\n  }\n  return opt_element.ownerDocument.defaultView != win;\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {getMode} from './mode';\n\n/**\n * Provides info about the current app. This return value may be cached and\n * passed around as it will always be DCE'd.\n * @param {?Window=} opt_win\n * @return {!./mode.ModeDef}\n */\nexport function getModeObject(opt_win) {\n  return {\n    localDev: getMode(opt_win).localDev,\n    development: getMode(opt_win).development,\n    filter: getMode(opt_win).filter,\n    minified: getMode(opt_win).minified,\n    lite: getMode(opt_win).lite,\n    test: getMode(opt_win).test,\n    log: getMode(opt_win).log,\n    version: getMode(opt_win).version,\n    rtvVersion: getMode(opt_win).rtvVersion,\n  };\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {parseQueryString_} from './url-parse-query-string';\n\n/**\n * @typedef {{\n *   localDev: boolean,\n *   development: boolean,\n *   filter: (string|undefined),\n *   minified: boolean,\n *   lite: boolean,\n *   test: boolean,\n *   log: (string|undefined),\n *   version: string,\n *   rtvVersion: string,\n * }}\n */\nexport let ModeDef;\n\n/** @type {string} */\nconst version = '$internalRuntimeVersion$';\n\n/**\n * `rtvVersion` is the prefixed version we serve off of the cdn.\n * The prefix denotes canary(00) or prod(01) or an experiment version ( > 01).\n * @type {string}\n */\nlet rtvVersion = '';\n\n/**\n * Provides info about the current app.\n * @param {?Window=} opt_win\n * @return {!ModeDef}\n */\nexport function getMode(opt_win) {\n  const win = opt_win || self;\n  if (win.AMP_MODE) {\n    return win.AMP_MODE;\n  }\n  return win.AMP_MODE = getMode_(win);\n}\n\n/**\n * Provides info about the current app.\n * @param {!Window} win\n * @return {!ModeDef}\n */\nfunction getMode_(win) {\n  // Magic constants that are replaced by closure compiler.\n  // IS_MINIFIED is always replaced with true when closure compiler is used\n  // while IS_DEV is only replaced when `gulp dist` is called without the\n  // --fortesting flag.\n  const IS_DEV = true;\n  const IS_MINIFIED = false;\n\n  const localDevEnabled = !!(self.AMP_CONFIG && self.AMP_CONFIG.localDev);\n  const runningTests = IS_DEV && !!(win.AMP_TEST || win.__karma__);\n  const isLocalDev = IS_DEV && (localDevEnabled || runningTests);\n  const hashQuery = parseQueryString_(\n      // location.originalHash is set by the viewer when it removes the fragment\n      // from the URL.\n      win.location.originalHash || win.location.hash);\n\n  const searchQuery = parseQueryString_(win.location.search);\n\n  if (!rtvVersion) {\n    rtvVersion = getRtvVersion(win, isLocalDev);\n  }\n\n  // The `minified`, `test` and `localDev` properties are replaced\n  // as boolean literals when we run `gulp dist` without the `--fortesting`\n  // flags. This improved DCE on the production file we deploy as the code\n  // paths for localhost/testing/development are eliminated.\n  return {\n    localDev: isLocalDev,\n    // Triggers validation or enable pub level logging. Validation can be\n    // bypassed via #validate=0.\n    // Note that AMP_DEV_MODE flag is used for testing purposes.\n    development: !!(hashQuery['development'] == '1' || win.AMP_DEV_MODE),\n    examiner: hashQuery['development'] == '2',\n    // Allows filtering validation errors by error category. For the\n    // available categories, see ErrorCategory in validator/validator.proto.\n    filter: hashQuery['filter'],\n    // amp-geo override\n    geoOverride: hashQuery['amp-geo'],\n    minified: IS_MINIFIED,\n    // Whether document is in an amp-lite viewer. It signal that the user\n    // would prefer to use less bandwidth.\n    lite: searchQuery['amp_lite'] != undefined,\n    test: runningTests,\n    log: hashQuery['log'],\n    version,\n    rtvVersion,\n  };\n}\n\n/**\n * Retrieve the `rtvVersion` which will have a numeric prefix\n * denoting canary/prod/experiment (unless `isLocalDev` is true).\n *\n * @param {!Window} win\n * @param {boolean} isLocalDev\n * @return {string}\n */\nfunction getRtvVersion(win, isLocalDev) {\n  // If it's local dev then we won't actually have a full version so\n  // just use the version.\n  if (isLocalDev) {\n    return version;\n  }\n\n  if (win.AMP_CONFIG && win.AMP_CONFIG.v) {\n    return win.AMP_CONFIG.v;\n  }\n\n  // Currently `$internalRuntimeVersion$` and thus `mode.version` contain only\n  // major version. The full version however must also carry the minor version.\n  // We will default to production default `01` minor version for now.\n  // TODO(erwinmombay): decide whether $internalRuntimeVersion$ should contain\n  // minor version.\n  return `01${version}`;\n}\n\n\n/**\n * @param {!Window} win\n * @param {boolean} isLocalDev\n * @return {string}\n * @visibleForTesting\n */\nexport function getRtvVersionForTesting(win, isLocalDev) {\n  return getRtvVersion(win, isLocalDev);\n}\n\n\n/** @visibleForTesting */\nexport function resetRtvVersionForTesting() {\n  rtvVersion = '';\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n\n/**\n * This class helps to manage observers. Observers can be added, removed or\n * fired through and instance of this class.\n * @template TYPE\n */\nexport class Observable {\n\n  /**\n   * Creates an instance of Observable.\n   */\n  constructor() {\n    /** @type {?Array<function(TYPE)>} */\n    this.handlers_ = null;\n  }\n\n  /**\n   * Adds the observer to this instance.\n   * @param {function(TYPE)} handler Observer's handler.\n   * @return {!UnlistenDef}\n   */\n  add(handler) {\n    if (!this.handlers_) {\n      this.handlers_ = [];\n    }\n    this.handlers_.push(handler);\n    return () => {\n      this.remove(handler);\n    };\n  }\n\n  /**\n   * Removes the observer from this instance.\n   * @param {function(TYPE)} handler Observer's instance.\n   */\n  remove(handler) {\n    if (!this.handlers_) {\n      return;\n    }\n    const index = this.handlers_.indexOf(handler);\n    if (index > -1) {\n      this.handlers_.splice(index, 1);\n    }\n  }\n\n  /**\n   * Removes all observers.\n   */\n  removeAll() {\n    if (!this.handlers_) {\n      return;\n    }\n    this.handlers_.length = 0;\n  }\n\n  /**\n   * Fires an event. All observers are called.\n   * @param {TYPE=} opt_event\n   */\n  fire(opt_event) {\n    if (!this.handlers_) {\n      return;\n    }\n    const handlers = this.handlers_;\n    for (let i = 0; i < handlers.length; i++) {\n      const handler = handlers[i];\n      handler(opt_event);\n    }\n  }\n\n  /**\n   * Returns number of handlers. Mostly needed for tests.\n   * @return {number}\n   */\n  getHandlerCount() {\n    if (!this.handlers_) {\n      return 0;\n    }\n    return this.handlers_.length;\n  }\n}\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {createElementWithAttributes} from '../src/dom';\nimport {dict} from '../src/utils/object';\nimport {user} from '../src/log';\n\n/** @const {string} */\nconst TAG = 'pixel';\n\n/**\n * @param {!Window} win\n * @param {string} src\n * @param {?string=} referrerPolicy\n * @return {!Element}\n */\nexport function createPixel(win, src, referrerPolicy) {\n  if (referrerPolicy && referrerPolicy !== 'no-referrer') {\n    user().error(TAG, 'Unsupported referrerPolicy: ' + referrerPolicy);\n  }\n\n  return referrerPolicy === 'no-referrer'\n    ? createNoReferrerPixel(win, src)\n    : createImagePixel(win, src);\n}\n\n/**\n * @param {!Window} win\n * @param {string} src\n * @return {!Element}\n */\nfunction createNoReferrerPixel(win, src) {\n  if (isReferrerPolicySupported()) {\n    return createImagePixel(win, src, true);\n  } else {\n    // if \"referrerPolicy\" is not supported, use iframe wrapper\n    // to scrub the referrer.\n    const iframe = createElementWithAttributes(\n        /** @type {!Document} */ (win.document), 'iframe', dict({\n          'src': 'about:blank',\n          'style': 'display:none',\n        }));\n    win.document.body.appendChild(iframe);\n    createImagePixel(iframe.contentWindow, src);\n    return iframe;\n  }\n}\n\n/**\n * @param {!Window} win\n * @param {string} src\n * @param {boolean=} noReferrer\n * @return {!Image}\n */\nfunction createImagePixel(win, src, noReferrer = false) {\n  const image = new win.Image();\n  if (noReferrer) {\n    image.referrerPolicy = 'no-referrer';\n  }\n  image.src = src;\n  return image;\n}\n\n/**\n * Check if element attribute \"referrerPolicy\" is supported by the browser.\n * Safari 11.1 does not support it yet.\n *\n * @return {boolean}\n */\nfunction isReferrerPolicySupported() {\n  return 'referrerPolicy' in Image.prototype;\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {getMode} from './mode';\nimport {install as installArrayIncludes} from './polyfills/array-includes';\nimport {install as installCustomElements} from './polyfills/custom-elements';\nimport {\n  install as installDOMTokenListToggle,\n} from './polyfills/domtokenlist-toggle';\nimport {install as installDocContains} from './polyfills/document-contains';\nimport {install as installMathSign} from './polyfills/math-sign';\nimport {install as installObjectAssign} from './polyfills/object-assign';\nimport {install as installPromise} from './polyfills/promise';\nimport {installCustomElements as installRegisterElement} from\n  'document-register-element/build/document-register-element.patched';\nimport {isExperimentOn} from './experiments';\n\nif (isExperimentOn(self, 'custom-elements-v1') || getMode().test) {\n  installCustomElements(self, class {});\n} else {\n  installRegisterElement(self, 'auto');\n}\ninstallDOMTokenListToggle(self);\ninstallMathSign(self);\ninstallObjectAssign(self);\ninstallPromise(self);\ninstallDocContains(self);\ninstallArrayIncludes(self);\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * Returns true if the element is in the array and false otherwise.\n *\n * @param {*} value\n * @param {number=} opt_fromIndex\n * @return {boolean}\n * @this {Array}\n */\nfunction includes(value, opt_fromIndex) {\n  const fromIndex = opt_fromIndex || 0;\n  const len = this.length;\n  let i = fromIndex >= 0 ? fromIndex : Math.max(len + fromIndex, 0);\n  for (; i < len; i++) {\n    const other = this[i];\n    // If value has been found OR (value is NaN AND other is NaN)\n    /*eslint \"no-self-compare\": 0*/\n    if (other === value || (value !== value && other !== other)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n* Sets the Array.contains polyfill if it does not exist.\n* @param {!Window} win\n*/\nexport function install(win) {\n  if (!win.Array.prototype.includes) {\n    win.Object.defineProperty(Array.prototype, 'includes', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: includes,\n    });\n  }\n}\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @typedef {{\n *   promise: !Promise<undefined>,\n *   resolve: function(),\n * }}\n */\nlet DeferredDef;\n\n/**\n * @typedef {!Function}\n */\nlet CustomElementConstructorDef;\n\n/**\n * @typedef {{\n *  name: string,\n *  ctor: !CustomElementConstructorDef,\n * }}\n */\nlet CustomElementDef;\n\n/**\n * Validates the custom element's name.\n * This intentionally ignores \"valid\" higher Unicode Code Points.\n * https://html.spec.whatwg.org/multipage/custom-elements.html#valid-custom-element-name\n */\nconst VALID_NAME = /^[a-z][a-z0-9._]*-[a-z0-9._-]*$/;\nconst INVALID_NAMES = [\n  'annotation-xml',\n  'color-profile',\n  'font-face',\n  'font-face-src',\n  'font-face-uri',\n  'font-face-format',\n  'font-face-name',\n  'missing-glyph',\n];\n\n/**\n * Asserts that the custom element name conforms to the spec.\n *\n * @param {!Function} SyntaxError\n * @param {string} name\n */\nfunction assertValidName(SyntaxError, name) {\n  if (!VALID_NAME.test(name) || INVALID_NAMES.indexOf(name) >= 0) {\n    throw new SyntaxError(`invalid custom element name \"${name}\"`);\n  }\n}\n\n/**\n * Does win have a full Custom Elements registry?\n *\n * @param {!Window} win\n * @return {boolean}\n */\nfunction hasCustomElements(win) {\n  const {customElements} = win;\n\n  return !!(\n    customElements &&\n    customElements.define &&\n    customElements.get &&\n    customElements.whenDefined);\n}\n\n/**\n * Was HTMLElement already patched for this window?\n *\n * @param {!Window} win\n * @return {boolean}\n */\nfunction isPatched(win) {\n  const tag = win.HTMLElement.toString();\n  return tag.indexOf('[native code]') === -1;\n}\n\n/**\n * The public Custom Elements API.\n */\nclass CustomElementRegistry {\n  /**\n   * @param {!Window} win\n   * @param {!Registry} registry\n   */\n  constructor(win, registry) {\n    /**\n     * @const @private\n     */\n    this.win_ = win;\n\n    /**\n     * @const @private\n     */\n    this.registry_ = registry;\n\n    /**\n     * @type {!Object<string, DeferredDef>}\n     * @private\n     * @const\n     */\n    this.pendingDefines_ = this.win_.Object.create(null);\n  }\n\n  /**\n   * Register the custom element.\n   *\n   * @param {string} name\n   * @param {!CustomElementConstructorDef} ctor\n   * @param {!Object=} options\n   */\n  define(name, ctor, options) {\n    this.registry_.define(name, ctor, options);\n\n    // If anyone is waiting for this custom element to be defined, resolve\n    // their promise.\n    const pending = this.pendingDefines_;\n    const deferred = pending[name];\n    if (deferred) {\n      deferred.resolve();\n      delete pending[name];\n    }\n  }\n\n  /**\n   * Get the constructor of the (already defined) custom element.\n   *\n   * @param {string} name\n   * @return {!CustomElementConstructorDef|undefined}\n   */\n  get(name) {\n    const def = this.registry_.getByName(name);\n    if (def) {\n      return def.ctor;\n    }\n  }\n\n  /**\n   * Returns a promise that waits until the custom element is defined.\n   * If the custom element is already defined, returns a resolved promise.\n   *\n   * @param {string} name\n   * @return {!Promise<undefined>}\n   */\n  whenDefined(name) {\n    const {Promise, SyntaxError} = this.win_;\n    assertValidName(SyntaxError, name);\n\n    if (this.registry_.getByName(name)) {\n      return Promise.resolve();\n    }\n\n    const pending = this.pendingDefines_;\n    const deferred = pending[name];\n    if (deferred) {\n      return deferred.promise;\n    }\n\n    let resolve;\n    const promise = new /*OK*/Promise(res => resolve = res);\n    pending[name] = {\n      promise,\n      resolve,\n    };\n\n    return promise;\n  }\n\n  /**\n   * Upgrade all custom elements inside root.\n   *\n   * @param {!Node} root\n   */\n  upgrade(root) {\n    this.registry_.upgrade(root);\n  }\n}\n\n/**\n * This internal APIs necessary to run the CustomElementRegistry.\n * Since Registry is never exposed externally, all methods are actually\n * available on the instance.\n */\nclass Registry {\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n    /**\n     * @private @const\n     */\n    this.win_ = win;\n\n    /**\n     * @private @const\n     */\n    this.doc_ = win.document;\n\n    /**\n     * @type {!Object<string, !CustomElementDef>}\n     * @private\n     * @const\n     */\n    this.definitions_ = win.Object.create(null);\n\n    /**\n     * A up-to-date DOM selector for all custom elements.\n     * @type {string}\n     */\n    this.query_ = '';\n\n    /**\n     * The currently upgrading element.\n     * @private {Element}\n     */\n    this.current_ = null;\n  }\n\n  /**\n   * The currently-being-upgraded custom element.\n   *\n   * When an already created (through the DOM parsing APIs, or innerHTML)\n   * custom element node is being upgraded, we can't just create a new node\n   * (it's illegal in the spec). But we still need to run the custom element's\n   * constructor code on the node. We avoid this conundrum by running the\n   * constructor while returning this current node in the HTMLElement\n   * class constructor (the base class of all custom elements).\n   *\n   * @return {Element}\n   */\n  current() {\n    const current = this.current_;\n    this.current_ = null;\n    return current;\n  }\n\n  /**\n   * Finds the custom element definition by name.\n   *\n   * @param {string} name\n   * @return {CustomElementDef|undefined}\n   */\n  getByName(name) {\n    const definition = this.definitions_[name];\n    if (definition) {\n      return definition;\n    }\n  }\n\n  /**\n   * Finds the custom element definition by constructor instance.\n   *\n   * @param {CustomElementConstructorDef} ctor\n   * @return {CustomElementDef|undefined}\n   */\n  getByConstructor(ctor) {\n    const definitions = this.definitions_;\n\n    for (const name in definitions) {\n      const def = definitions[name];\n      if (def.ctor === ctor) {\n        return def;\n      }\n    }\n  }\n\n  /**\n   * Registers the custom element definition, and upgrades all elements by that\n   * name in the root document.\n   *\n   * @param {string} name\n   * @param {!CustomElementConstructorDef} ctor\n   * @param {!Object|undefined} options\n   */\n  define(name, ctor, options) {\n    const {Error, SyntaxError} = this.win_;\n\n    if (options) {\n      throw new Error('Extending native custom elements is not supported');\n    }\n\n    assertValidName(SyntaxError, name);\n\n    if (this.getByName(name) ||\n        this.getByConstructor(ctor)) {\n      throw new Error(`duplicate definition \"${name}\"`);\n    }\n\n    // TODO(jridgewell): Record connectedCallback, disconnectedCallback,\n    // adoptedCallback, attributeChangedCallback, and observedAttributes.\n    // TODO(jridgewell): If attributeChangedCallback, gather observedAttributes\n    this.definitions_[name] = {\n      name,\n      ctor,\n    };\n\n    this.observe_(name);\n    this.upgrade(this.doc_, name);\n  }\n\n  /**\n   * Upgrades custom elements descendants of root (but not including root).\n   *\n   * When called with an opt_query, it both upgrades and connects the custom\n   * elements (this is used during the custom element define algorithm).\n   *\n   * @param {!Node} root\n   * @param {string=} opt_query\n   */\n  upgrade(root, opt_query) {\n    // Only CustomElementRegistry.p.define provides a query (the newly defined\n    // custom element). In this case, we are both upgrading _and_ connecting\n    // the custom elements.\n    const newlyDefined = !!opt_query;\n    const query = opt_query || this.query_;\n    const upgradeCandidates = this.queryAll_(root, query);\n\n    for (let i = 0; i < upgradeCandidates.length; i++) {\n      const candidate = upgradeCandidates[i];\n      if (newlyDefined) {\n        this.connectedCallback_(candidate);\n      } else {\n        this.upgradeSelf(candidate);\n      }\n    }\n  }\n\n  /**\n   * Upgrades the custom element node, if a custom element has been registered\n   * by this name.\n   *\n   * @param {!Node} node\n   */\n  upgradeSelf(node) {\n    const def = this.getByName(node.localName);\n    if (!def) {\n      return;\n    }\n\n    this.upgradeSelf_(/** @type {!Element} */(node), def);\n  }\n\n  /**\n   * @param {!Node} root\n   * @param {string} query\n   * @return {!Array|!NodeList}\n   */\n  queryAll_(root, query) {\n    if (!query || !root.querySelectorAll) {\n      // Nothing to do...\n      return [];\n    }\n\n    return root.querySelectorAll(query);\n  }\n\n  /**\n   * Upgrades the (already created via DOM parsing) custom element.\n   *\n   * @param {!Element} node\n   * @param {!CustomElementDef} def\n   */\n  upgradeSelf_(node, def) {\n    const {ctor} = def;\n    if (node instanceof ctor) {\n      return;\n    }\n\n    // Despite how it looks, this is not a useless construction.\n    // HTMLElementPolyfill (the base class of all custom elements) will return\n    // the current node, allowing the custom element's subclass constructor to\n    // run on the node. The node itself is already constructed, so the return\n    // value is just the node.\n    this.current_ = node;\n    const el = new ctor();\n\n    if (el !== node) {\n      throw new this.win_.Error(\n          'Constructor illegally returned a different instance.');\n    }\n  }\n\n  /**\n   * Fires connectedCallback on the custom element, if it has one.\n   * This also upgrades the custom element, since it may not have been\n   * accessible via the root document before (a detached DOM tree).\n   *\n   * @param {!Node} node\n   */\n  connectedCallback_(node) {\n    const def = this.getByName(node.localName);\n    if (!def) {\n      return;\n    }\n    this.upgradeSelf_(/** @type {!Element} */(node), def);\n    // TODO(jridgewell): It may be appropriate to adoptCallback, if the node\n    // used to be in another doc.\n    // TODO(jridgewell): I should be calling the definitions connectedCallback\n    // with node as the context.\n    if (node.connectedCallback) {\n      node.connectedCallback();\n    }\n  }\n\n  /**\n   * Fires disconnectedCallback on the custom element, if it has one.\n   *\n   * @param {!Node} node\n   */\n  disconnectedCallback_(node) {\n    // TODO(jridgewell): I should be calling the definitions connectedCallback\n    // with node as the context.\n    if (node.disconnectedCallback) {\n      node.disconnectedCallback();\n    }\n  }\n\n  /**\n   * Records name as a registered custom element to observe.\n   *\n   * Starts the Mutation Observer if this is the first registered custom\n   * element. This is deferred until the first custom element is defined to\n   * speed up initial rendering of the page.\n   *\n   * Mutation Observers are conveniently available in every browser we care\n   * about. When a node is connected to the root document, all custom\n   * elements (including that node iteself) will be upgraded and call\n   * connectedCallback. When a node is disconnectedCallback from the root\n   * document, all custom elements will call disconnectedCallback.\n   *\n   * @param {string} name\n   */\n  observe_(name) {\n    if (this.query_) {\n      this.query_ += `,${name}`;\n      return;\n    }\n\n    this.query_ = name;\n\n    // The first registered name starts the mutation observer.\n    const observer = new this.win_.MutationObserver(records => {\n      if (records) {\n        this.handleRecords_(records);\n      }\n    });\n    observer.observe(this.doc_, {\n      childList: true,\n      subtree: true,\n    });\n  }\n\n  /**\n   * Handle all the Mutation Observer's Mutation Records.\n   * All added custom elements will be upgraded (if not already) and call\n   * connectedCallback. All removed custom elements will call\n   * disconnectedCallback.\n   *\n   * @param {!Array<!MutationRecord>} records\n   */\n  handleRecords_(records) {\n    for (let i = 0; i < records.length; i++) {\n      const record = records[i];\n      if (!record) {\n        continue;\n      }\n\n      const {addedNodes, removedNodes} = record;\n      for (let i = 0; i < addedNodes.length; i++) {\n        const node = addedNodes[i];\n        const connectedCandidates = this.queryAll_(node, this.query_);\n        this.connectedCallback_(node);\n        for (let i = 0; i < connectedCandidates.length; i++) {\n          this.connectedCallback_(connectedCandidates[i]);\n        }\n      }\n\n      for (let i = 0; i < removedNodes.length; i++) {\n        const node = removedNodes[i];\n        const disconnectedCandidates = this.queryAll_(node, this.query_);\n        this.disconnectedCallback_(node);\n        for (let i = 0; i < disconnectedCandidates.length; i++) {\n          this.disconnectedCallback_(disconnectedCandidates[i]);\n        }\n      }\n    }\n  }\n}\n\n/**\n * Does the polyfilling.\n * @param {!Window} win\n */\nfunction polyfill(win) {\n  const {HTMLElement, Element, Node, Document, Object, document} = win;\n  const {createElement, cloneNode, importNode} = document;\n\n  const registry = new Registry(win);\n  const customElements = new CustomElementRegistry(win, registry);\n\n  // Expose the custom element registry.\n  // Object.getOwnPropertyDescriptor(window, 'customElements')\n  // {get: ƒ, set: undefined, enumerable: true, configurable: true}\n  Object.defineProperty(win, 'customElements', {\n    enumerable: true,\n    configurable: true,\n    // writable: false,\n    value: customElements,\n  });\n\n  // Patch createElement to immediately upgrade the custom element.\n  // This has the added benefit that it avoids the \"already created but needs\n  // constructor code run\" chicken-and-egg problem.\n  Document.prototype.createElement = function createElementPolyfill(name) {\n    const def = registry.getByName(name);\n    if (def) {\n      return new def.ctor();\n    }\n    return createElement.apply(this, arguments);\n  };\n\n  // Patch importNode to immediately upgrade custom elements.\n  // TODO(jridgewell): Can fire adoptedCallback for cross doc imports.\n  Document.prototype.importNode = function importNodePolyfill() {\n    const imported = importNode.apply(this, arguments);\n    if (imported) {\n      registry.upgradeSelf(imported);\n      registry.upgrade(imported);\n    }\n    return imported;\n  };\n\n  // Patch cloneNode to immediately upgrade custom elements.\n  Node.prototype.cloneNode = function cloneNodePolyfill() {\n    const cloned = cloneNode.apply(this, arguments);\n    registry.upgradeSelf(cloned);\n    registry.upgrade(cloned);\n    return cloned;\n  };\n\n  // Patch the innerHTML setter to immediately upgrade custom elements.\n  // Note, this could technically fire connectedCallbacks if this node was\n  // connected, but we leave that to the Mutation Observer.\n  const innerHTMLDesc = Object.getOwnPropertyDescriptor(Element.prototype,\n      'innerHTML');\n  const innerHTMLSetter = innerHTMLDesc.set;\n  innerHTMLDesc.set = function(html) {\n    innerHTMLSetter.call(this, html);\n    registry.upgrade(this);\n  };\n  Object.defineProperty(Element.prototype, 'innerHTML', innerHTMLDesc);\n\n  /**\n   * You can't use the real HTMLElement constructor, because you can't subclass\n   * it without using native classes. So, mock its approximation using\n   * createElement.\n   */\n  function HTMLElementPolyfill() {\n    const {constructor} = this;\n\n    // If we're upgrading an already created custom element, we can't create\n    // another new node (by the spec, it must be the same node).\n    let el = registry.current();\n\n    // If there's not a already created custom element, we're being invoked via\n    // `new`ing the constructor.\n    //\n    // Technically, we could get here via createElement, but we patched that.\n    // If it the custom element was registered, the patch turned it into a\n    // `new` call.\n    // If it was not registered, the native createElement is used. And if\n    // native createElement is being used and we got to this code, we're really\n    // in an infinite loop (a native createElement call just below) so we've\n    // got bigger problems.\n    //\n    // So just take my word we got here via `new`.\n    if (!el) {\n      // The custom element definition is an invariant. If the custom element\n      // is registered, everything works. If it's not, it throws in the member\n      // property access (only defined custom elements can be directly\n      // constructed via `new`).\n      const def = registry.getByConstructor(constructor);\n      el = createElement.call(document, def.name);\n    }\n\n    // Finally, if the node was already constructed, we need to reset it's\n    // prototype to the custom element prototype. And if it wasn't already\n    // constructed, we created a new node via native createElement, and we need\n    // to reset it's prototype. Basically always reset the prototype.\n    Object.setPrototypeOf(el, constructor.prototype);\n    return el;\n  }\n  subClass(Object, HTMLElement, HTMLElementPolyfill);\n\n  // Expose the polyfilled HTMLElement constructor for everyone to extend from.\n  win.HTMLElement = HTMLElementPolyfill;\n}\n\n/**\n * Wraps HTMLElement in a Reflect.construct constructor, so that transpiled\n * classes can `_this = superClass.call(this)` during their construction.\n *\n * This is only used when Custom Elements v1 is already available _and_ we're\n * using transpiled classes (which use ES5 construction idioms).\n *\n * @param {!Window} win\n */\nfunction wrapHTMLElement(win) {\n  const {HTMLElement, Reflect, Object} = win;\n  /**\n   */\n  function HTMLElementWrapper() {\n    const ctor = /** @type {function(...?):?|undefined} */(\n      /** @type {!HTMLElement} */(this).constructor);\n\n    // Reflect.construct allows us to construct a new HTMLElement without using\n    // `new` (which will always fail because native HTMLElement is a restricted\n    // constructor).\n    return Reflect.construct(HTMLElement, [], ctor);\n  }\n  subClass(Object, HTMLElement, HTMLElementWrapper);\n\n  // Expose the wrapped HTMLElement constructor for everyone to extend from.\n  win.HTMLElement = HTMLElementWrapper;\n}\n\n/**\n * Setups up prototype inheritance\n *\n * @param {!Object} Object\n * @param {!Function} superClass\n * @param {!Function} subClass\n */\nfunction subClass(Object, superClass, subClass) {\n  // Object.getOwnPropertyDescriptor(superClass.prototype, 'constructor')\n  // {value: ƒ, writable: true, enumerable: false, configurable: true}\n  subClass.prototype = Object.create(superClass.prototype, {\n    constructor: {\n      // enumerable: false,\n      configurable: true,\n      writable: true,\n      value: subClass,\n    },\n  });\n}\n\n/**\n * Polyfills Custom Elements v1 API. This has 4 modes:\n *\n * 1. Custom elements v1 already supported, using native classes\n * 2. Custom elements v1 already supported, using transpiled classes\n * 3. Custom elements v1 not supported, using native classes\n * 4. Custom elements v1 not supported, using transpiled classes\n *\n * In mode 1, nothing is done. In mode 2, a minimal polyfill is used to support\n * extending the HTMLElement base class. In mode 3 and 4, a full polyfill is\n * done.\n *\n * @param {!Window} win\n * @param {!Function} ctor\n */\nexport function install(win, ctor) {\n  if (isPatched(win)) {\n    return;\n  }\n\n  let install = true;\n  let installWrapper = false;\n\n  if (hasCustomElements(win)) {\n    // If ctor is constructable without new, it's a function. That means it was\n    // compiled down, and we need to do the minimal polyfill because all you\n    // cannot extend HTMLElement without native classes.\n    try {\n      const {Object, Reflect} = win;\n\n      // \"Construct\" ctor using ES5 idioms\n      const instance = Object.create(ctor.prototype);\n      ctor.call(instance);\n\n      // If that succeeded, we're in a transpiled environment\n      // Let's find out if we can wrap HTMLElement and avoid a full patch.\n      installWrapper = !!(Reflect && Reflect.construct);\n    } catch (e) {\n\n      // The ctor threw when we constructed is via ES5, so it's a real class.\n      // We're ok to not install the polyfill.\n      install = false;\n    }\n  }\n\n  if (installWrapper) {\n    wrapHTMLElement(win);\n  } else if (install) {\n    polyfill(win);\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * Polyfill for `document.contains()` method. Notice that according to spec\n * `document.contains` is inclusionary.\n * See https://developer.mozilla.org/en-US/docs/Web/API/Node/contains\n * @param {?Node} node\n * @return {boolean}\n * @this {Node}\n */\nfunction documentContainsPolyfill(node) {\n  // Per spec, \"contains\" method is inclusionary\n  // i.e. `node.contains(node) == true`. However, we still need to test\n  // equality to the document itself.\n  return node == this || this.documentElement.contains(node);\n}\n\n\n/**\n * Polyfills `HTMLDocument.contains` API.\n * @param {!Window} win\n */\nexport function install(win) {\n  // HTMLDocument is undefined in Internet Explorer 10, but it has Document,\n  // so we use that as a fallback.\n  const documentClass = win.HTMLDocument || win.Document;\n  if (!documentClass.prototype.contains) {\n    win.Object.defineProperty(documentClass.prototype, 'contains', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: documentContainsPolyfill,\n    });\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * Polyfill for `DOMTokenList.prototype.toggle(token, opt_force)` method. This\n * is specially important because IE does not support `opt_force` attribute. See\n * https://goo.gl/hgKNYY for details.\n * @param {string} token\n * @param {boolean=} opt_force\n * @this {DOMTokenList}\n * @return {boolean}\n */\nfunction domTokenListTogglePolyfill(token, opt_force) {\n  const remove = opt_force === undefined ? this.contains(token) : !opt_force;\n  if (remove) {\n    this.remove(token);\n    return false;\n  } else {\n    this.add(token);\n    return true;\n  }\n}\n\n\n/**\n * Polyfills `DOMTokenList.prototype.toggle` API in IE.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (isIe(win) && win.DOMTokenList) {\n    win.Object.defineProperty(win.DOMTokenList.prototype, 'toggle', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: domTokenListTogglePolyfill,\n    });\n  }\n}\n\n\n/**\n * Whether the current browser is a IE browser.\n * @param {!Window} win\n * @return {boolean}\n */\nfunction isIe(win) {\n  return /Trident|MSIE|IEMobile/i.test(win.navigator.userAgent);\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Parses the number x and returns its sign. For positive x returns 1, for\n * negative, -1. For 0 and -0, returns 0 and -0 respectively. For any number\n * that parses to NaN, returns NaN.\n *\n * @param {number} x\n * @return {number}\n */\nexport function sign(x) {\n  x = Number(x);\n\n  // If x is 0, -0, or NaN, return it.\n  if (!x) {\n    return x;\n  }\n\n  return x > 0 ? 1 : -1;\n}\n\n\n/**\n * Sets the Math.sign polyfill if it does not exist.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (!win.Math.sign) {\n    win.Object.defineProperty(win.Math, 'sign', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: sign,\n    });\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst {hasOwnProperty} = Object.prototype;\n\n/**\n * Copies values of all enumerable own properties from one or more source\n * objects (provided as extended arguments to the function) to a target object.\n *\n * @param {!Object} target\n * @param {...Object} var_args\n * @return {!Object}\n */\nexport function assign(target, var_args) {\n  if (target == null) {\n    throw new TypeError('Cannot convert undefined or null to object');\n  }\n\n  const output = Object(target);\n  for (let i = 1; i < arguments.length; i++) {\n    const source = arguments[i];\n    if (source != null) {\n      for (const key in source) {\n        if (hasOwnProperty.call(source, key)) {\n          output[key] = source[key];\n        }\n      }\n    }\n  }\n  return output;\n}\n\n\n/**\n * Sets the Object.assign polyfill if it does not exist.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (!win.Object.assign) {\n    win.Object.defineProperty(win.Object, 'assign', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: assign,\n    });\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nimport * as Promise from 'promise-pjs/promise';\n\n/**\n * Sets the Promise polyfill if it does not exist.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (!win.Promise) {\n    win.Promise = /** @type {?} */ (Promise);\n    // In babel the * export is an Object with a default property.\n    // In closure compiler it is the Promise function itself.\n    if (Promise.default) {\n      win.Promise = Promise.default;\n    }\n    // We copy the individual static methods, because closure\n    // compiler flattens the polyfill namespace.\n    win.Promise.resolve = Promise.resolve;\n    win.Promise.reject = Promise.reject;\n    win.Promise.all = Promise.all;\n    win.Promise.race = Promise.race;\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Registration and getter functions for AMP services.\n *\n * Invariant: Service getters never return null for registered services.\n */\n\n// src/polyfills.js must be the first import.\nimport './polyfills'; // eslint-disable-line sort-imports-es6-autofix/sort-imports-es6\n\nimport {Deferred} from './utils/promise';\nimport {dev} from './log';\nimport {toWin} from './types';\n\n\n/**\n * Holds info about a service.\n * - obj: Actual service implementation when available.\n * - promise: Promise for the obj.\n * - resolve: Function to resolve the promise with the object.\n * - context: Argument for ctor, either a window or an ampdoc.\n * - ctor: Function that constructs and returns the service.\n * @typedef {{\n *   obj: (?Object),\n *   promise: (?Promise),\n *   resolve: (?function(!Object)),\n *   context: (?Window|?./service/ampdoc-impl.AmpDoc),\n *   ctor: (?function(new:Object, !Window)|\n *          ?function(new:Object, !./service/ampdoc-impl.AmpDoc)),\n * }}\n */\nlet ServiceHolderDef;\n\n\n/**\n * This interface provides a `dispose` method that will be called by\n * runtime when a service needs to be disposed of.\n * @interface\n */\nexport class Disposable {\n\n  /**\n   * Instructs the service to release any resources it might be holding. Can\n   * be called only once in the lifecycle of a service.\n   */\n  dispose() {}\n}\n\n\n/**\n * This interface provides a `adoptEmbedWindow` method that will be called by\n * runtime for a new embed window.\n * @interface\n */\nexport class EmbeddableService {\n\n  /**\n   * Instructs the service to adopt the embed window and add any necessary\n   * listeners and resources.\n   * @param {!Window} unusedEmbedWin\n   */\n  adoptEmbedWindow(unusedEmbedWin) {}\n}\n\n\n/**\n * Returns a service with the given id. Assumes that it has been registered\n * already.\n * @param {!Window} win\n * @param {string} id\n * @param {boolean=} opt_fallbackToTopWin\n * @return {Object} The service.\n */\nexport function getExistingServiceInEmbedScope(win, id, opt_fallbackToTopWin) {\n  // First, try to resolve via local (embed) window.\n  const local = getLocalExistingServiceForEmbedWinOrNull(win, id);\n  if (local) {\n    return local;\n  }\n  if (opt_fallbackToTopWin) {\n    return getService(win, id);\n  }\n  return null;\n}\n\n/**\n * Returns a service with the given id. Assumes that it has been constructed\n * already.\n *\n * Unlike most service getters, passing `Node` is necessary for some FIE-scope\n * services since sometimes we only have the FIE Document for context.\n *\n * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n * @param {string} id\n * @param {boolean=} opt_fallbackToTopWin\n * @return {Object} The service.\n */\nexport function getExistingServiceForDocInEmbedScope(\n  nodeOrDoc, id, opt_fallbackToTopWin) {\n  // First, try to resolve via local (embed) window.\n  if (nodeOrDoc.nodeType) {\n    // If a node is passed, try to resolve via this node.\n    const win = toWin(/** @type {!Document} */ (\n      nodeOrDoc.ownerDocument || nodeOrDoc).defaultView);\n    const local = getLocalExistingServiceForEmbedWinOrNull(win, id);\n    if (local) {\n      return local;\n    }\n  }\n  // If an ampdoc is passed or fallback is allowed, continue resolving.\n  if (!nodeOrDoc.nodeType || opt_fallbackToTopWin) {\n    return getServiceForDocDeprecated(nodeOrDoc, id);\n  }\n  return null;\n}\n\n/**\n * Installs a service override on amp-doc level.\n * @param {!Window} embedWin\n * @param {string} id\n * @param {!Object} service The service.\n */\nexport function installServiceInEmbedScope(embedWin, id, service) {\n  const topWin = getTopWindow(embedWin);\n  dev().assert(embedWin != topWin,\n      'Service override can only be installed in embed window: %s', id);\n  dev().assert(!getLocalExistingServiceForEmbedWinOrNull(embedWin, id),\n      'Service override has already been installed: %s', id);\n  registerServiceInternal(embedWin, embedWin, id, () => service);\n  getServiceInternal(embedWin, id); // Force service to build.\n}\n\n/**\n * @param {!Window} embedWin\n * @param {string} id\n * @return {?Object}\n */\nfunction getLocalExistingServiceForEmbedWinOrNull(embedWin, id) {\n  // Note that this method currently only resolves against the given window.\n  // It does not try to go all the way up the parent window chain. We can change\n  // this in the future, but for now this gives us a better performance.\n  const topWin = getTopWindow(embedWin);\n  if (embedWin != topWin && isServiceRegistered(embedWin, id)) {\n    return getServiceInternal(embedWin, id);\n  } else {\n    return null;\n  }\n}\n\n/**\n * Registers a service given a class to be used as implementation.\n * @param {!Window} win\n * @param {string} id of the service.\n * @param {function(new:Object, !Window)} constructor\n * @param {boolean=} opt_instantiate Whether to immediately create the service\n */\nexport function registerServiceBuilder(win,\n  id,\n  constructor,\n  opt_instantiate) {\n  win = getTopWindow(win);\n  registerServiceInternal(win, win, id, constructor);\n  if (opt_instantiate) {\n    getServiceInternal(win, id);\n  }\n}\n\n\n/**\n * Returns a service and registers it given a class to be used as\n * implementation.\n * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n * @param {string} id of the service.\n * @param {function(new:Object, !./service/ampdoc-impl.AmpDoc)} constructor\n * @param {boolean=} opt_instantiate Whether to immediately create the service\n */\nexport function registerServiceBuilderForDoc(nodeOrDoc,\n  id,\n  constructor,\n  opt_instantiate) {\n  const ampdoc = getAmpdoc(nodeOrDoc);\n  const holder = getAmpdocServiceHolder(ampdoc);\n  registerServiceInternal(holder, ampdoc, id, constructor);\n  if (opt_instantiate) {\n    getServiceInternal(holder, id);\n  }\n}\n\n\n/**\n * Returns a service for the given id and window (a per-window singleton). Users\n * should typically wrap this as a special purpose function (e.g.\n * `Services.vsyncFor(win)`) for type safety and because the factory should not\n * be passed around.\n * @param {!Window} win\n * @param {string} id of the service.\n * @template T\n * @return {T}\n */\nexport function getService(win, id) {\n  win = getTopWindow(win);\n  return getServiceInternal(win, id);\n}\n\n\n/**\n * Returns a promise for a service for the given id and window. Also expects an\n * element that has the actual implementation. The promise resolves when the\n * implementation loaded. Users should typically wrap this as a special purpose\n * function (e.g. `Services.vsyncFor(win)`) for type safety and because the\n * factory should not be passed around.\n * @param {!Window} win\n * @param {string} id of the service.\n * @return {!Promise<!Object>}\n */\nexport function getServicePromise(win, id) {\n  return getServicePromiseInternal(win, id);\n}\n\n\n/**\n * Returns a service or null with the given id.\n * @param {!Window} win\n * @param {string} id\n * @return {?Object} The service.\n */\nexport function getExistingServiceOrNull(win, id) {\n  win = getTopWindow(win);\n  if (isServiceRegistered(win, id)) {\n    return getServiceInternal(win, id);\n  } else {\n    return null;\n  }\n}\n\n\n/**\n * Like getServicePromise but returns null if the service was never registered.\n * @param {!Window} win\n * @param {string} id\n * @return {?Promise<!Object>}\n */\nexport function getServicePromiseOrNull(win, id) {\n  return getServicePromiseOrNullInternal(win, id);\n}\n\n\n/**\n * Returns a service for the given id and ampdoc (a per-ampdoc singleton).\n * Expects service `id` to be registered.\n * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n * @param {string} id\n * @return {T}\n * @template T\n */\nexport function getServiceForDoc(elementOrAmpDoc, id) {\n  const ampdoc = getAmpdoc(elementOrAmpDoc);\n  const holder = getAmpdocServiceHolder(ampdoc);\n  return getServiceInternal(holder, id);\n}\n\n\n/**\n * tl;dr -- Use getServiceForDoc() instead of this.\n *\n * Privileged variant of getServiceForDoc() that accepts non-element params,\n * e.g. window.document. This is currently necessary for doc-level services\n * used in startup, e.g. Chunks. Eventually we want to remove this function\n * and have callers find the appropriate AmpDoc and use getServiceForDoc().\n *\n * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n * @param {string} id\n * @return {T}\n * @template T\n */\nexport function getServiceForDocDeprecated(nodeOrDoc, id) {\n  const ampdoc = getAmpdoc(nodeOrDoc);\n  const holder = getAmpdocServiceHolder(ampdoc);\n  return getServiceInternal(holder, id);\n}\n\n\n/**\n * Returns a promise for a service for the given id and ampdoc. Also expects\n * a service that has the actual implementation. The promise resolves when\n * the implementation loaded.\n * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n * @param {string} id\n * @return {!Promise<!Object>}\n */\nexport function getServicePromiseForDoc(elementOrAmpDoc, id) {\n  return getServicePromiseInternal(\n      getAmpdocServiceHolder(elementOrAmpDoc), id);\n}\n\n\n/**\n * Like getServicePromiseForDoc but returns null if the service was never\n * registered for this ampdoc.\n * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n * @param {string} id\n * @return {?Promise<!Object>}\n */\nexport function getServicePromiseOrNullForDoc(elementOrAmpDoc, id) {\n  return getServicePromiseOrNullInternal(\n      getAmpdocServiceHolder(elementOrAmpDoc), id);\n}\n\n/**\n * Set the parent and top windows on a child window (friendly iframe).\n * @param {!Window} win\n * @param {!Window} parentWin\n */\nexport function setParentWindow(win, parentWin) {\n  win.__AMP_PARENT = parentWin;\n  win.__AMP_TOP = getTopWindow(parentWin);\n}\n\n\n/**\n * Returns the parent window for a child window (friendly iframe).\n * @param {!Window} win\n * @return {!Window}\n */\nexport function getParentWindow(win) {\n  return win.__AMP_PARENT || win;\n}\n\n\n/**\n * Returns the top window where AMP Runtime is installed for a child window\n * (friendly iframe).\n * @param {!Window} win\n * @return {!Window}\n */\nexport function getTopWindow(win) {\n  return win.__AMP_TOP || win;\n}\n\n\n/**\n * Returns the parent \"friendly\" iframe if the node belongs to a child window.\n * @param {!Node} node\n * @param {!Window} topWin\n * @return {?HTMLIFrameElement}\n */\nexport function getParentWindowFrameElement(node, topWin) {\n  const childWin = (node.ownerDocument || node).defaultView;\n  if (childWin && childWin != topWin && getTopWindow(childWin) == topWin) {\n    try {\n      return /** @type {?HTMLIFrameElement} */ (childWin.frameElement);\n    } catch (e) {\n      // Ignore the error.\n    }\n  }\n  return null;\n}\n\n\n/**\n * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n * @return {!./service/ampdoc-impl.AmpDoc}\n */\nexport function getAmpdoc(nodeOrDoc) {\n  if (nodeOrDoc.nodeType) {\n    const win = toWin(/** @type {!Document} */ (\n      nodeOrDoc.ownerDocument || nodeOrDoc).defaultView);\n    return getAmpdocService(win).getAmpDoc(/** @type {!Node} */ (nodeOrDoc));\n  }\n  return /** @type {!./service/ampdoc-impl.AmpDoc} */ (nodeOrDoc);\n}\n\n\n/**\n * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n * @return {!./service/ampdoc-impl.AmpDoc|!Window}\n */\nfunction getAmpdocServiceHolder(nodeOrDoc) {\n  const ampdoc = getAmpdoc(nodeOrDoc);\n  return ampdoc.isSingleDoc() ? ampdoc.win : ampdoc;\n}\n\n\n/**\n * This is essentially a duplicate of `ampdoc.js`, but necessary to avoid\n * circular dependencies.\n * @param {!Window} win\n * @return {!./service/ampdoc-impl.AmpDocService}\n */\nfunction getAmpdocService(win) {\n  return /** @type {!./service/ampdoc-impl.AmpDocService} */ (\n    getService(win, 'ampdoc'));\n}\n\n\n/**\n * Get service `id` from `holder`. Assumes the service\n * has already been registered.\n * @param {!Object} holder Object holding the service instance.\n * @param {string} id of the service.\n * @return {Object}\n * @template T\n */\nfunction getServiceInternal(holder, id) {\n  dev().assert(isServiceRegistered(holder, id),\n      `Expected service ${id} to be registered`);\n  const services = getServices(holder);\n  const s = services[id];\n  if (!s.obj) {\n    dev().assert(s.ctor, `Service ${id} registered without ctor nor impl.`);\n    dev().assert(s.context, `Service ${id} registered without context.`);\n    s.obj = new s.ctor(s.context);\n    dev().assert(s.obj, `Service ${id} constructed to null.`);\n    s.ctor = null;\n    s.context = null;\n    // The service may have been requested already, in which case we have a\n    // pending promise we need to fulfill.\n    if (s.resolve) {\n      s.resolve(s.obj);\n    }\n  }\n  return s.obj;\n}\n\n/**\n * @param {!Object} holder Object holding the service instance.\n * @param {!Window|!./service/ampdoc-impl.AmpDoc} context Win or AmpDoc.\n * @param {string} id of the service.\n * @param {?function(new:Object, !Window)|?function(new:Object, !./service/ampdoc-impl.AmpDoc)} ctor Constructor function to new the service. Called with context.\n */\nfunction registerServiceInternal(holder, context, id, ctor) {\n  const services = getServices(holder);\n  let s = services[id];\n\n  if (!s) {\n    s = services[id] = {\n      obj: null,\n      promise: null,\n      resolve: null,\n      context: null,\n      ctor: null,\n    };\n  }\n\n  if (s.ctor || s.obj) {\n    // Service already registered.\n    return;\n  }\n\n  s.ctor = ctor;\n  s.context = context;\n\n  // The service may have been requested already, in which case there is a\n  // pending promise that needs to fulfilled.\n  if (s.resolve) {\n    // getServiceInternal will resolve the promise.\n    getServiceInternal(holder, id);\n  }\n}\n\n/**\n * @param {!Object} holder\n * @param {string} id of the service.\n * @return {!Promise<!Object>}\n */\nfunction getServicePromiseInternal(holder, id) {\n  const cached = getServicePromiseOrNullInternal(holder, id);\n  if (cached) {\n    return cached;\n  }\n  // Service is not registered.\n\n  // TODO(@cramforce): Add a check that if the element is eventually registered\n  // that the service is actually provided and this promise resolves.\n  const deferred = new Deferred();\n  const {promise, resolve} = deferred;\n\n  const services = getServices(holder);\n  services[id] = {\n    obj: null,\n    promise,\n    resolve,\n    context: null,\n    ctor: null,\n  };\n  return promise;\n}\n\n\n/**\n * Returns a promise for service `id` if the service has been registered\n * on `holder`.\n * @param {!Object} holder\n * @param {string} id of the service.\n * @return {?Promise<!Object>}\n */\nfunction getServicePromiseOrNullInternal(holder, id) {\n  const services = getServices(holder);\n  const s = services[id];\n  if (s) {\n    if (s.promise) {\n      return s.promise;\n    } else {\n      // Instantiate service if not already instantiated.\n      getServiceInternal(holder, id);\n      return s.promise = Promise.resolve(/** @type {!Object} */ (s.obj));\n    }\n  }\n  return null;\n}\n\n\n/**\n * Returns the object that holds the services registered in a holder.\n * @param {!Object} holder\n * @return {!Object<string,!ServiceHolderDef>}\n */\nfunction getServices(holder) {\n  let {services} = holder;\n  if (!services) {\n    services = holder.services = {};\n  }\n  return services;\n}\n\n\n/**\n * Whether the specified service implements `Disposable` interface.\n * @param {!Object} service\n * @return {boolean}\n */\nexport function isDisposable(service) {\n  return typeof service.dispose == 'function';\n}\n\n\n/**\n * Asserts that the specified service implements `Disposable` interface and\n * typecasts the instance to `Disposable`.\n * @param {!Object} service\n * @return {!Disposable}\n */\nexport function assertDisposable(service) {\n  dev().assert(isDisposable(service), 'required to implement Disposable');\n  return /** @type {!Disposable} */ (service);\n}\n\n\n/**\n * Disposes all disposable (implements `Disposable` interface) services in\n * ampdoc scope.\n * @param {!./service/ampdoc-impl.AmpDoc} ampdoc\n */\nexport function disposeServicesForDoc(ampdoc) {\n  disposeServicesInternal(ampdoc);\n}\n\n\n/**\n * Disposes all disposable (implements `Disposable` interface) services in\n * embed scope.\n * @param {!Window} embedWin\n */\nexport function disposeServicesForEmbed(embedWin) {\n  disposeServicesInternal(embedWin);\n}\n\n\n/**\n * @param {!Object} holder Object holding the service instances.\n */\nfunction disposeServicesInternal(holder) {\n  // TODO(dvoytenko): Consider marking holder as destroyed for later-arriving\n  // service to be canceled automatically.\n  const services = getServices(holder);\n  for (const id in services) {\n    if (!Object.prototype.hasOwnProperty.call(services, id)) {\n      continue;\n    }\n    const serviceHolder = services[id];\n    if (serviceHolder.obj) {\n      disposeServiceInternal(id, serviceHolder.obj);\n    } else if (serviceHolder.promise) {\n      serviceHolder.promise.then(\n          instance => disposeServiceInternal(id, instance));\n    }\n  }\n}\n\n\n/**\n * @param {string} id\n * @param {!Object} service\n */\nfunction disposeServiceInternal(id, service) {\n  if (!isDisposable(service)) {\n    return;\n  }\n  try {\n    assertDisposable(service).dispose();\n  } catch (e) {\n    // Ensure that a failure to dispose a service does not disrupt other\n    // services.\n    dev().error('SERVICE', 'failed to dispose service', id, e);\n  }\n}\n\n\n/**\n * Whether the specified service implements `EmbeddableService` interface.\n * @param {!Object} service\n * @return {boolean}\n */\nexport function isEmbeddable(service) {\n  return typeof service.adoptEmbedWindow == 'function';\n}\n\n\n/**\n * Adopts an embeddable (implements `EmbeddableService` interface) service\n * in embed scope.\n * @param {!Window} embedWin\n * @param {string} serviceId\n */\nexport function adoptServiceForEmbed(embedWin, serviceId) {\n  const adopted = adoptServiceForEmbedIfEmbeddable(embedWin, serviceId);\n  dev().assert(adopted, `Service ${serviceId} not found on parent ` +\n      'or doesn\\'t implement EmbeddableService.');\n}\n\n\n/**\n * Adopts an embeddable (implements `EmbeddableService` interface) service\n * in embed scope.\n * @param {!Window} embedWin\n * @param {string} serviceId\n * @return {boolean}\n */\nexport function adoptServiceForEmbedIfEmbeddable(embedWin, serviceId) {\n  const frameElement = /** @type {!Node} */ (dev().assert(\n      embedWin.frameElement,\n      'frameElement not found for embed'));\n  const ampdoc = getAmpdoc(frameElement);\n  const holder = getAmpdocServiceHolder(ampdoc);\n  if (!isServiceRegistered(holder, serviceId)) {\n    return false;\n  }\n  const service = getServiceForDocDeprecated(frameElement, serviceId);\n  if (!isEmbeddable(service)) {\n    return false;\n  }\n  service.adoptEmbedWindow(embedWin);\n  return true;\n}\n\n\n/**\n * Resets a single service, so it gets recreated on next getService invocation.\n * @param {!Object} holder\n * @param {string} id of the service.\n */\nexport function resetServiceForTesting(holder, id) {\n  if (holder.services) {\n    holder.services[id] = null;\n  }\n}\n\n/**\n * @param {!Object} holder Object holding the service instance.\n * @param {string} id of the service.\n * @return {boolean}\n */\nfunction isServiceRegistered(holder, id) {\n  const service = holder.services && holder.services[id];\n  // All registered services must have an implementation or a constructor.\n  return !!(service && (service.ctor || service.obj));\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Services} from '../services';\nimport {dev, user} from '../log';\nimport {htmlFor} from '../static-template';\nimport {isExperimentOn} from '../experiments';\n\n/** @const {number} */\nconst NTH_FRAME = 200;\n\nexport class JankMeter {\n\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n    /** @private {!Window} */\n    this.win_ = win;\n    /** @private {number} */\n    this.badFrameCnt_ = 0;\n    /** @private {number} */\n    this.totalFrameCnt_ = 0;\n    /** @private {number} */\n    this.longTaskChild_ = 0;\n    /** @private {number} */\n    this.longTaskSelf_ = 0;\n    /** @private {?number} */\n    this.scheduledTime_ = null;\n    /** @private {?./performance-impl.Performance} */\n    this.perf_ = Services.performanceForOrNull(win);\n\n    /** @private {?BatteryManager} */\n    this.batteryManager_ = null;\n    /** @private {?number} */\n    this.batteryLevelStart_ = null;\n    this.initializeBatteryManager_();\n\n    /** @private {?PerformanceObserver} */\n    this.longTaskObserver_ = null;\n    this.initializeLongTaskObserver_();\n  }\n\n  /**\n   * Callback for scheduled.\n   */\n  onScheduled() {\n    if (!this.isEnabled_()) {\n      return;\n    }\n    // only take the first schedule for the current frame.\n    if (this.scheduledTime_ == null) {\n      this.scheduledTime_ = this.win_.Date.now();\n    }\n  }\n\n  /**\n   * Callback for run.\n   */\n  onRun() {\n    if (!this.isEnabled_() || this.scheduledTime_ == null) {\n      return;\n    }\n    const paintLatency = this.win_.Date.now() - this.scheduledTime_;\n    this.scheduledTime_ = null;\n    this.totalFrameCnt_++;\n    if (paintLatency > 16) {\n      this.badFrameCnt_++;\n      dev().info('JANK', 'Paint latency: ' + paintLatency + 'ms');\n    }\n\n    // Report metrics on Nth frame, so we have sort of normalized numbers.\n    if (this.perf_ && this.totalFrameCnt_ == NTH_FRAME) {\n      // gfp: Good Frame Probability\n      const gfp = this.calculateGfp_();\n      this.perf_.tickDelta('gfp', gfp);\n      // bf: Bad Frames\n      this.perf_.tickDelta('bf', this.badFrameCnt_);\n      if (this.longTaskObserver_) {\n        // lts: Long Tasks of Self frame\n        this.perf_.tickDelta('lts', this.longTaskSelf_);\n        // ltc: Long Tasks of Child frames\n        this.perf_.tickDelta('ltc', this.longTaskChild_);\n        this.longTaskObserver_.disconnect();\n        this.longTaskObserver_ = null;\n      }\n      let batteryDrop = 0;\n      if (this.batteryManager_ && (this.batteryLevelStart_ != null)) {\n        batteryDrop = this.win_.Math.max(0, this.win_.Math.floor(\n            this.batteryManager_.level * 100 - this.batteryLevelStart_));\n        // bd: Battery Drop\n        this.perf_.tickDelta('bd', batteryDrop);\n      }\n      this.perf_.flush();\n      if (isJankMeterEnabled(this.win_)) {\n        this.displayMeterDisplay_(batteryDrop);\n      }\n    }\n  }\n\n  /**\n   * Returns if is enabled\n   *\n   * @return {?boolean}\n   */\n  isEnabled_() {\n    return isJankMeterEnabled(this.win_)\n        || (this.perf_\n            && this.perf_.isPerformanceTrackingOn()\n            && this.totalFrameCnt_ < NTH_FRAME);\n  }\n\n  /**\n   * @param {number} batteryDrop\n   * @private\n   */\n  displayMeterDisplay_(batteryDrop) {\n    const doc = this.win_.document;\n    const display = htmlFor(doc)`\n      <div class=\"i-amphtml-jank-meter\"></div>`;\n    display.textContent =\n        `bf:${this.badFrameCnt_}, lts: ${this.longTaskSelf_}, ` +\n        `ltc:${this.longTaskChild_}, bd:${batteryDrop}`;\n    doc.body.appendChild(display);\n  }\n\n  /**\n   * Calculate Good Frame Probability, which is a value range from 0 to 100.\n   * @return {number}\n   * @private\n   */\n  calculateGfp_() {\n    return this.win_.Math.floor(\n        (this.totalFrameCnt_ - this.badFrameCnt_) / this.totalFrameCnt_ * 100);\n  }\n\n  /**\n   * Initializes long task observer.\n   */\n  initializeLongTaskObserver_() {\n    if (!this.isEnabled_() || !isLongTaskApiSupported(this.win_)) {\n      return;\n    }\n    this.longTaskObserver_ = new this.win_.PerformanceObserver(entryList => {\n      const entries = entryList.getEntries();\n      for (let i = 0; i < entries.length; i++) {\n        if (entries[i].entryType == 'longtask') {\n          // longtask is any task with duration of bigger than 50ms\n          // we sum up the number of 50ms a task spans.\n          const span = this.win_.Math.floor(entries[i].duration / 50);\n          if (entries[i].name == 'cross-origin-descendant') {\n            this.longTaskChild_ += span;\n            user().info(\n                'LONGTASK', `from child frame ${entries[i].duration}ms`);\n          } else {\n            this.longTaskSelf_ += span;\n            dev().info('LONGTASK', `from self frame ${entries[i].duration}ms`);\n          }\n        }\n      }\n    });\n    this.longTaskObserver_.observe({entryTypes: ['longtask']});\n  }\n\n  /**\n   * Initializes battery manager.\n   */\n  initializeBatteryManager_() {\n    if (isBatteryApiSupported(this.win_)) {\n      this.win_.navigator.getBattery().then(battery => {\n        this.batteryManager_ = battery;\n        this.batteryLevelStart_ = battery.level * 100;\n      });\n    }\n  }\n}\n\n/**\n * @param {!Window} win\n * @return {boolean}\n */\nfunction isJankMeterEnabled(win) {\n  return isExperimentOn(win, 'jank-meter');\n}\n\n/**\n * @param {!Window} win\n * @return {boolean}\n */\nexport function isLongTaskApiSupported(win) {\n  return !!win.PerformanceObserver\n      && !!win.TaskAttributionTiming\n      && ('containerName' in win.TaskAttributionTiming.prototype);\n}\n\n/**\n * @param {!Window} unusedWin\n * @return {boolean}\n */\nfunction isBatteryApiSupported(unusedWin) {\n  // TODO: (@lannka, #9749)\n  return false;\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  getAmpdoc,\n  getExistingServiceForDocInEmbedScope,\n  getExistingServiceOrNull,\n  getService,\n  getServiceForDoc,\n  getServiceForDocDeprecated,\n  getServicePromiseForDoc,\n} from './service';\nimport {\n  getElementServiceForDoc,\n  getElementServiceIfAvailable,\n  getElementServiceIfAvailableForDoc,\n  getElementServiceIfAvailableForDocInEmbedScope,\n} from './element-service';\n\n/** @typedef {!../extensions/amp-subscriptions/0.1/amp-subscriptions.SubscriptionService} */\nexport let SubscriptionService;\n\nexport class Services {\n  /**\n   * Hint: Add extensions folder path to compile.js with\n   * warnings cannot find modules.\n   */\n\n  /**\n   * Returns a promise for the Access service.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!../extensions/amp-access/0.1/amp-access.AccessService>}\n   */\n  static accessServiceForDoc(elementOrAmpDoc) {\n    return (/** @type {!Promise<!../extensions/amp-access/0.1/amp-access.AccessService>} */ (\n      getElementServiceForDoc(elementOrAmpDoc, 'access', 'amp-access')));\n  }\n\n  /**\n   * Returns a promise for the Access service or a promise for null if the\n   * service is not available on the current page.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<?../extensions/amp-access/0.1/amp-access.AccessService>}\n   */\n  static accessServiceForDocOrNull(elementOrAmpDoc) {\n    return (/** @type {!Promise<?../extensions/amp-access/0.1/amp-access.AccessService>} */ (\n      getElementServiceIfAvailableForDoc(elementOrAmpDoc, 'access',\n          'amp-access')));\n  }\n\n  /**\n   * Returns a promise for the Subscriptions service.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!SubscriptionService>}\n   */\n  static subscriptionsServiceForDoc(elementOrAmpDoc) {\n    return (/** @type {!Promise<!SubscriptionService>} */ (\n      getElementServiceForDoc(elementOrAmpDoc, 'subscriptions',\n          'amp-subscriptions')));\n  }\n\n  /**\n   * Returns a promise for the Subscriptions service.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<?SubscriptionService>}\n   */\n  static subscriptionsServiceForDocOrNull(elementOrAmpDoc) {\n    return (/** @type {!Promise<?SubscriptionService>} */ (\n      getElementServiceIfAvailableForDoc(elementOrAmpDoc, 'subscriptions',\n          'amp-subscriptions')));\n  }\n\n  /**\n   * Unlike most service getters, passing `Node` is necessary for some FIE-scope\n   * services since sometimes we only have the FIE Document for context.\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/action-impl.ActionService}\n   */\n  static actionServiceForDoc(nodeOrDoc) {\n    return /** @type {!./service/action-impl.ActionService} */ (\n      getExistingServiceForDocInEmbedScope(\n          nodeOrDoc, 'action', /* opt_fallbackToTopWin */ true));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!Activity>}\n   */\n  static activityForDoc(elementOrAmpDoc) {\n    return /** @type {!Promise<!Activity>} */ (\n      getElementServiceForDoc(elementOrAmpDoc, 'activity', 'amp-analytics'));\n  }\n\n  /**\n   * Returns the global instance of the `AmpDocService` service that can be\n   * used to resolve an ampdoc for any node: either in the single-doc or\n   * shadow-doc environment.\n   * @param {!Window} window\n   * @return {!./service/ampdoc-impl.AmpDocService}\n   */\n  static ampdocServiceFor(window) {\n    return /** @type {!./service/ampdoc-impl.AmpDocService} */ (\n      getService(window, 'ampdoc'));\n  }\n\n  /**\n   * Returns the AmpDoc for the specified context node.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!./service/ampdoc-impl.AmpDoc}\n   */\n  static ampdoc(elementOrAmpDoc) {\n    return getAmpdoc(elementOrAmpDoc);\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @param {boolean=} loadAnalytics\n   * @return {!Promise<!../extensions/amp-analytics/0.1/instrumentation.InstrumentationService>}\n   */\n  static analyticsForDoc(elementOrAmpDoc, loadAnalytics = false) {\n    if (loadAnalytics) {\n      // Get Extensions service and force load analytics extension.\n      const ampdoc = getAmpdoc(elementOrAmpDoc);\n      Services.extensionsFor(ampdoc.win)./*OK*/installExtensionForDoc(\n          ampdoc, 'amp-analytics');\n    }\n    return /** @type {!Promise<!../extensions/amp-analytics/0.1/instrumentation.InstrumentationService>} */ (\n      getElementServiceForDoc(elementOrAmpDoc, 'amp-analytics-instrumentation',\n          'amp-analytics'));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<?../extensions/amp-analytics/0.1/instrumentation.InstrumentationService>}\n   */\n  static analyticsForDocOrNull(elementOrAmpDoc) {\n    return /** @type {!Promise<?../extensions/amp-analytics/0.1/instrumentation.InstrumentationService>} */ (\n      getElementServiceIfAvailableForDoc(elementOrAmpDoc,\n          'amp-analytics-instrumentation', 'amp-analytics'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/batched-xhr-impl.BatchedXhr}\n   */\n  static batchedXhrFor(window) {\n    return /** @type {!./service/batched-xhr-impl.BatchedXhr} */ (\n      getService(window, 'batched-xhr'));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<?../extensions/amp-bind/0.1/bind-impl.Bind>}\n   */\n  static bindForDocOrNull(elementOrAmpDoc) {\n    return /** @type {!Promise<?../extensions/amp-bind/0.1/bind-impl.Bind>} */ (\n      getElementServiceIfAvailableForDocInEmbedScope(\n          elementOrAmpDoc, 'bind', 'amp-bind'));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!./service/cid-impl.Cid>}\n   */\n  static cidForDoc(elementOrAmpDoc) {\n    return /** @type {!Promise<!./service/cid-impl.Cid>} */ (\n      getServicePromiseForDoc(elementOrAmpDoc, 'cid'));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!./service/navigation.Navigation}\n   */\n  static navigationForDoc(elementOrAmpDoc) {\n    return /** @type {!./service/navigation.Navigation} */ (\n      getServiceForDoc(elementOrAmpDoc, 'navigation'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/crypto-impl.Crypto}\n   */\n  static cryptoFor(window) {\n    return (/** @type {!./service/crypto-impl.Crypto} */ (\n      getService(window, 'crypto')));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!./service/document-info-impl.DocumentInfoDef} Info about the doc\n   */\n  static documentInfoForDoc(elementOrAmpDoc) {\n    return /** @type {!./service/document-info-impl.DocInfo} */ (\n      getServiceForDoc(elementOrAmpDoc, 'documentInfo')).get();\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/document-state.DocumentState}\n   */\n  static documentStateFor(window) {\n    return getService(window, 'documentState');\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/extensions-impl.Extensions}\n   */\n  static extensionsFor(window) {\n    return /** @type {!./service/extensions-impl.Extensions} */ (\n      getService(window, 'extensions'));\n  }\n\n  /**\n   * Returns service implemented in service/history-impl.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!./service/history-impl.History}\n   */\n  static historyForDoc(elementOrAmpDoc) {\n    return /** @type {!./service/history-impl.History} */ (\n      getServiceForDoc(elementOrAmpDoc, 'history'));\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {!./input.Input}\n   */\n  static inputFor(win) {\n    return getService(win, 'input');\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!./service/layers-impl.LayoutLayers}\n   */\n  static layersForDoc(elementOrAmpDoc) {\n    return /** @type {!./service/layers-impl.LayoutLayers} */ (\n      getServiceForDoc(elementOrAmpDoc, 'layers'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/performance-impl.Performance}\n   */\n  static performanceFor(window) {\n    return /** @type {!./service/performance-impl.Performance}*/ (\n      getService(window, 'performance'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/performance-impl.Performance}\n   */\n  static performanceForOrNull(window) {\n    return /** @type {!./service/performance-impl.Performance}*/ (\n      getExistingServiceOrNull(window, 'performance'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/platform-impl.Platform}\n   */\n  static platformFor(window) {\n    return /** @type {!./service/platform-impl.Platform} */ (\n      getService(window, 'platform'));\n  }\n\n  /**\n   * Uses getServiceForDocDeprecated() since Resources is a startup service.\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/resources-impl.Resources}\n   */\n  static resourcesForDoc(nodeOrDoc) {\n    return /** @type {!./service/resources-impl.Resources} */ (\n      getServiceForDocDeprecated(nodeOrDoc, 'resources'));\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {?Promise<?{incomingFragment: string, outgoingFragment: string}>}\n   */\n  static shareTrackingForOrNull(win) {\n    return (/** @type {!Promise<?{incomingFragment: string, outgoingFragment: string}>} */ (\n      getElementServiceIfAvailable(win, 'share-tracking',\n          'amp-share-tracking', true)));\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {?Promise<?../extensions/amp-story/1.0/variable-service.StoryVariableDef>}\n   */\n  static storyVariableServiceForOrNull(win) {\n    return (\n    /** @type {!Promise<?../extensions/amp-story/1.0/variable-service.StoryVariableDef>} */\n      (getElementServiceIfAvailable(win, 'story-variable', 'amp-story',\n          true)));\n  }\n\n  /**\n   * Version of the story store service depends on which version of amp-story\n   * the publisher is loading. They all have the same implementation.\n   * @param {!Window} win\n   * @return {?Promise<?../extensions/amp-story/1.0/amp-story-store-service.AmpStoryStoreService|?../extensions/amp-story/0.1/amp-story-store-service.AmpStoryStoreService>}\n   */\n  static storyStoreServiceForOrNull(win) {\n    return (\n    /** @type {!Promise<?../extensions/amp-story/1.0/amp-story-store-service.AmpStoryStoreService|?../extensions/amp-story/0.1/amp-story-store-service.AmpStoryStoreService>} */\n      (getElementServiceIfAvailable(win, 'story-store', 'amp-story')));\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {?../extensions/amp-story/1.0/amp-story-store-service.AmpStoryStoreService}\n   */\n  static storyStoreService(win) {\n    return (/** @type {?../extensions/amp-story/1.0/amp-story-store-service.AmpStoryStoreService} */\n      (getExistingServiceOrNull(win, 'story-store')));\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {?../extensions/amp-story/1.0/amp-story-request-service.AmpStoryRequestService}\n   */\n  static storyRequestService(win) {\n    return (/** @type {?../extensions/amp-story/1.0/amp-story-request-service.AmpStoryRequestService} */\n      (getExistingServiceOrNull(win, 'story-request')));\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {!Promise<?../extensions/amp-story/1.0/localization.LocalizationService>}\n   */\n  static localizationServiceForOrNull(win) {\n    return (\n    /** @type {!Promise<?../extensions/amp-story/1.0/localization.LocalizationService>} */\n      (getElementServiceIfAvailable(win, 'localization', 'amp-story', true)));\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {!../extensions/amp-story/1.0/localization.LocalizationService}\n   */\n  static localizationService(win) {\n    return getService(win, 'localization');\n  }\n\n  /**\n   * TODO(#14357): Remove this when amp-story:0.1 is deprecated.\n   * @param {!Window} win\n   * @return {!../extensions/amp-story/0.1/amp-story-store-service.AmpStoryStoreService}\n   */\n  static storyStoreServiceV01(win) {\n    return getService(win, 'story-store');\n  }\n\n  /**\n   * TODO(#14357): Remove this when amp-story:0.1 is deprecated.\n   * @param {!Window} win\n   * @return {!../extensions/amp-story/0.1/amp-story-request-service.AmpStoryRequestService}\n   */\n  static storyRequestServiceV01(win) {\n    return getService(win, 'story-request-v01');\n  }\n\n  /**\n   * TODO(#14357): Remove this when amp-story:0.1 is deprecated.\n   * @param {!Window} win\n   * @return {!Promise<?../extensions/amp-story/0.1/localization.LocalizationService>}\n   */\n  static localizationServiceForOrNullV01(win) {\n    return (\n    /** @type {!Promise<?../extensions/amp-story/0.1/localization.LocalizationService>} */\n      (getElementServiceIfAvailable(win, 'localization-v01', 'amp-story',\n          true)));\n  }\n\n  /**\n   * TODO(#14357): Remove this when amp-story:0.1 is deprecated.\n   * @param {!Window} win\n   * @return {!../extensions/amp-story/0.1/localization.LocalizationService}\n   */\n  static localizationServiceV01(win) {\n    return getService(win, 'localization-v01');\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {?Promise<?../extensions/amp-viewer-integration/0.1/variable-service.ViewerIntegrationVariableDef>}\n   */\n  static viewerIntegrationVariableServiceForOrNull(win) {\n    return (\n    /** @type {!Promise<?../extensions/amp-viewer-integration/0.1/variable-service.ViewerIntegrationVariableDef>} */\n      (getElementServiceIfAvailable(win, 'viewer-integration-variable',\n          'amp-viewer-integration', true)));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!../extensions/amp-animation/0.1/web-animation-service.WebAnimationService>}\n   */\n  static webAnimationServiceFor(elementOrAmpDoc) {\n    return (/** @type {!Promise<!../extensions/amp-animation/0.1/web-animation-service.WebAnimationService>} */\n      (getElementServiceForDoc(\n          elementOrAmpDoc, 'web-animation', 'amp-animation')));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!./service/storage-impl.Storage>}\n   */\n  static storageForDoc(elementOrAmpDoc) {\n    return /** @type {!Promise<!./service/storage-impl.Storage>} */ (\n      getServicePromiseForDoc(elementOrAmpDoc, 'storage'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/template-impl.Templates}\n   */\n  static templatesFor(window) {\n    return /** @type {!./service/template-impl.Templates} */ (\n      getService(window, 'templates'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/timer-impl.Timer}\n   */\n  static timerFor(window) {\n    return /** @type {!./service/timer-impl.Timer} */ (\n      getService(window, 'timer'));\n  }\n\n  /**\n   * Unlike most service getters, passing `Node` is necessary for some FIE-scope\n   * services since sometimes we only have the FIE Document for context.\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/url-replacements-impl.UrlReplacements}\n   */\n  static urlReplacementsForDoc(nodeOrDoc) {\n    return /** @type {!./service/url-replacements-impl.UrlReplacements} */ (\n      getExistingServiceForDocInEmbedScope(\n          nodeOrDoc, 'url-replace', /* opt_fallbackToTopWin */ true));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!../extensions/amp-user-notification/0.1/amp-user-notification.UserNotificationManager>}\n   */\n  static userNotificationManagerForDoc(elementOrAmpDoc) {\n    return (/** @type {!Promise<!../extensions/amp-user-notification/0.1/amp-user-notification.UserNotificationManager>} */\n      (getElementServiceForDoc(elementOrAmpDoc, 'userNotificationManager',\n          'amp-user-notification')));\n  }\n\n  /**\n   * Returns a promise for the consentPolicy Service or a promise for null if\n   * the service is not available on the current page.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<?../extensions/amp-consent/0.1/consent-policy-manager.ConsentPolicyManager>}\n   */\n  static consentPolicyServiceForDocOrNull(elementOrAmpDoc) {\n    return (/** @type {!Promise<?../extensions/amp-consent/0.1/consent-policy-manager.ConsentPolicyManager>} */\n      (getElementServiceIfAvailableForDoc(elementOrAmpDoc,\n          'consentPolicyManager', 'amp-consent')));\n  }\n\n  /**\n   * Returns a promise for the geo service or a promise for null if\n   * the service is not available on the current page.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<?../extensions/amp-geo/0.1/amp-geo.GeoDef>}\n   */\n  static geoForDocOrNull(elementOrAmpDoc) {\n    return /** @type {!Promise<?../extensions/amp-geo/0.1/amp-geo.GeoDef>} */ (\n      getElementServiceIfAvailableForDoc(\n          elementOrAmpDoc, 'geo', 'amp-geo', true));\n  }\n\n  /**\n   * Unlike most service getters, passing `Node` is necessary for some FIE-scope\n   * services since sometimes we only have the FIE Document for context.\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/url-impl.Url}\n   */\n  static urlForDoc(nodeOrDoc) {\n    return /** @type {!./service/url-impl.Url} */ (\n      getExistingServiceForDocInEmbedScope(\n          nodeOrDoc, 'url', /* opt_fallbackToTopWin */ true));\n  }\n\n  /**\n   * Returns a promise for the experiment variants or a promise for null if it\n   * is not available on the current page.\n   * @param {!Window} win\n   * @return {!Promise<?Object<string>>}\n   */\n  static variantForOrNull(win) {\n    return /** @type {!Promise<?Object<string>>} */ (\n      getElementServiceIfAvailable(win, 'variant', 'amp-experiment', true));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!./service/video-service-interface.VideoServiceInterface}\n   */\n  static videoManagerForDoc(elementOrAmpDoc) {\n    return (\n      /** @type {!./service/video-service-interface.VideoServiceInterface} */ (\n        getServiceForDoc(elementOrAmpDoc, 'video-manager')));\n  }\n\n  /**\n   * Uses getServiceForDocDeprecated() since Viewer is a startup service.\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/viewer-impl.Viewer}\n   */\n  static viewerForDoc(nodeOrDoc) {\n    return /** @type {!./service/viewer-impl.Viewer} */ (\n      getServiceForDocDeprecated(nodeOrDoc, 'viewer'));\n  }\n\n  /**\n   * Returns promise for the viewer. This is an unusual case and necessary only\n   * for services that need reference to the viewer before it has been\n   * initialized. Most of the code, however, just should use `viewerForDoc`.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!./service/viewer-impl.Viewer>}\n   */\n  static viewerPromiseForDoc(elementOrAmpDoc) {\n    return /** @type {!Promise<!./service/viewer-impl.Viewer>} */ (\n      getServicePromiseForDoc(elementOrAmpDoc, 'viewer'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/vsync-impl.Vsync}\n   */\n  static vsyncFor(window) {\n    return /** @type {!./service/vsync-impl.Vsync} */ (\n      getService(window, 'vsync'));\n  }\n\n  /**\n   * Uses getServiceForDocDeprecated() since Viewport is a startup service.\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/viewport/viewport-impl.Viewport}\n   */\n  static viewportForDoc(nodeOrDoc) {\n    return /** @type {!./service/viewport/viewport-impl.Viewport} */ (\n      getServiceForDocDeprecated(nodeOrDoc, 'viewport'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/xhr-impl.Xhr}\n   */\n  static xhrFor(window) {\n    return /** @type {!./service/xhr-impl.Xhr} */ (getService(window, 'xhr'));\n  }\n}\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {dev} from './log';\nimport {map} from './utils/object.js';\n\nlet container;\n\n/**\n * Creates the html helper for the doc.\n *\n * @param {!Element|!Document} nodeOrDoc\n * @return {function(!Array<string>):!Element}\n */\nexport function htmlFor(nodeOrDoc) {\n  const doc = nodeOrDoc.ownerDocument || nodeOrDoc;\n  if (!container || container.ownerDocument !== doc) {\n    container = doc.createElement('div');\n  }\n\n  return html;\n}\n\n/**\n * A tagged template literal helper to generate static DOM trees.\n * This must be used as a tagged template, ie\n *\n * ```\n * const div = html`<div><span></span></div>`;\n * ```\n *\n * Only the root element and its subtree will be returned. DO NOT use this to\n * render subtree's with dynamic content, it WILL result in an error!\n *\n * @param {!Array<string>} strings\n * @return {!Element}\n */\nfunction html(strings) {\n  dev().assert(strings.length === 1, 'Improper html template tag usage.');\n  container./*OK*/innerHTML = strings[0];\n\n  const el = container.firstElementChild;\n  dev().assert(el, 'No elements in template');\n  dev().assert(!el.nextElementSibling, 'Too many root elements in template');\n\n  // Clear to free memory.\n  container./*OK*/innerHTML = '';\n\n  return el;\n}\n\n/**\n * Queries an element for all elements with a \"ref\" attribute, removing\n * the attribute afterwards.\n * Returns a named map of all ref elements.\n *\n * @param {!Element} root\n * @return {!Object<string, !Element>}\n */\nexport function htmlRefs(root) {\n  const elements = root.querySelectorAll('[ref]');\n  const refs = map();\n\n  for (let i = 0; i < elements.length; i++) {\n    const element = elements[i];\n    const ref = dev().assert(element.getAttribute('ref'), 'Empty ref attr');\n    element.removeAttribute('ref');\n    dev().assert(refs[ref] === undefined, 'Duplicate ref');\n    refs[ref] = element;\n  }\n\n  return refs;\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @param {string} _match\n * @param {string} character\n * @return {string}\n */\nfunction toUpperCase(_match, character) {\n  return character.toUpperCase();\n}\n\n/**\n * @param {string} match\n * @return {string}\n */\nfunction prependDashAndToLowerCase(match) {\n  return '-' + match.toLowerCase();\n}\n\n/**\n * @param {string} name Attribute name containing dashes.\n * @return {string} Dashes removed and successive character sent to upper case.\n * visibleForTesting\n */\nexport function dashToCamelCase(name) {\n  return name.replace(/-([a-z])/g, toUpperCase);\n}\n\n/**\n * Converts a string that is in camelCase to one that is in dash-case.\n *\n * @param {string} string The string to convert.\n * @return {string} The string in dash-case.\n */\nexport function camelCaseToDash(string) {\n  return string.replace(/(?!^)[A-Z]/g, prependDashAndToLowerCase);\n}\n\n/**\n * @param {string} name Attribute name with dashes\n * @return {string} Dashes replaced by underlines.\n */\nexport function dashToUnderline(name) {\n  return name.replace('-', '_');\n}\n\n/**\n * Polyfill for String.prototype.endsWith.\n * @param {string} string\n * @param {string} suffix\n * @return {boolean}\n */\nexport function endsWith(string, suffix) {\n  const index = string.length - suffix.length;\n  return index >= 0 && string.indexOf(suffix, index) == index;\n}\n\n/**\n * Polyfill for String.prototype.startsWith.\n * @param {string} string\n * @param {string} prefix\n * @return {boolean}\n */\nexport function startsWith(string, prefix) {\n  if (prefix.length > string.length) {\n    return false;\n  }\n  return string.lastIndexOf(prefix, 0) == 0;\n}\n\n/**\n * Expands placeholders in a given template string with values.\n *\n * Placeholders use ${key-name} syntax and are replaced with the value\n * returned from the given getter function.\n *\n * @param {string} template The template string to expand.\n * @param {function(string):*} getter Function used to retrieve a value for a\n *   placeholder. Returns values will be coerced into strings.\n * @param {number=} opt_maxIterations Number of times to expand the template.\n *   Defaults to 1, but should be set to a larger value your placeholder tokens\n *   can be expanded to other placeholder tokens. Take caution with large values\n *   as recursively expanding a string can be exponentially expensive.\n */\nexport function expandTemplate(template, getter, opt_maxIterations) {\n  const maxIterations = opt_maxIterations || 1;\n  for (let i = 0; i < maxIterations; i++) {\n    let matches = 0;\n    template = template.replace(/\\${([^}]*)}/g, (_a, b) => {\n      matches++;\n      return getter(b);\n    });\n    if (!matches) {\n      break;\n    }\n  }\n  return template;\n}\n\n/**\n * Hash function djb2a\n * This is intended to be a simple, fast hashing function using minimal code.\n * It does *not* have good cryptographic properties.\n * @param {string} str\n * @return {string} 32-bit unsigned hash of the string\n */\nexport function stringHash32(str) {\n  const {length} = str;\n  let hash = 5381;\n  for (let i = 0; i < length; i++) {\n    hash = hash * 33 ^ str.charCodeAt(i);\n  }\n  // Convert from 32-bit signed to unsigned.\n  return String(hash >>> 0);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// Note: loaded by 3p system. Cannot rely on babel polyfills.\nimport {map} from './utils/object.js';\nimport {startsWith} from './string';\n\n\n/** @type {Object<string, string>} */\nlet propertyNameCache;\n\n/** @const {!Array<string>} */\nconst vendorPrefixes = ['Webkit', 'webkit', 'Moz', 'moz', 'ms', 'O', 'o'];\n\n\n/**\n * @export\n * @param {string} camelCase camel cased string\n * @return {string} title cased string\n */\nexport function camelCaseToTitleCase(camelCase) {\n  return camelCase.charAt(0).toUpperCase() + camelCase.slice(1);\n}\n\n/**\n * Checks the style if a prefixed version of a property exists and returns\n * it or returns an empty string.\n * @private\n * @param {!Object} style\n * @param {string} titleCase the title case version of a css property name\n * @return {string} the prefixed property name or null.\n */\nfunction getVendorJsPropertyName_(style, titleCase) {\n  for (let i = 0; i < vendorPrefixes.length; i++) {\n    const propertyName = vendorPrefixes[i] + titleCase;\n    if (style[propertyName] !== undefined) {\n      return propertyName;\n    }\n  }\n  return '';\n}\n\n/**\n * Returns the possibly prefixed JavaScript property name of a style property\n * (ex. WebkitTransitionDuration) given a camelCase'd version of the property\n * (ex. transitionDuration).\n * @export\n * @param {!Object} style\n * @param {string} camelCase the camel cased version of a css property name\n * @param {boolean=} opt_bypassCache bypass the memoized cache of property\n *   mapping\n * @return {string}\n */\nexport function getVendorJsPropertyName(style, camelCase, opt_bypassCache) {\n  if (startsWith(camelCase, '--')) {\n    // CSS vars are returned as is.\n    return camelCase;\n  }\n  if (!propertyNameCache) {\n    propertyNameCache = map();\n  }\n  let propertyName = propertyNameCache[camelCase];\n  if (!propertyName || opt_bypassCache) {\n    propertyName = camelCase;\n    if (style[camelCase] === undefined) {\n      const titleCase = camelCaseToTitleCase(camelCase);\n      const prefixedPropertyName = getVendorJsPropertyName_(style, titleCase);\n\n      if (style[prefixedPropertyName] !== undefined) {\n        propertyName = prefixedPropertyName;\n      }\n    }\n    if (!opt_bypassCache) {\n      propertyNameCache[camelCase] = propertyName;\n    }\n  }\n  return propertyName;\n}\n\n\n/**\n * Sets the CSS styles of the specified element with !important. The styles\n * are specified as a map from CSS property names to their values.\n * @param {!Element} element\n * @param {!Object<string, *>} styles\n */\nexport function setImportantStyles(element, styles) {\n  for (const k in styles) {\n    element.style.setProperty(\n        getVendorJsPropertyName(styles, k), styles[k].toString(), 'important');\n  }\n}\n\n\n/**\n * Sets the CSS style of the specified element with optional units, e.g. \"px\".\n * @param {?Element} element\n * @param {string} property\n * @param {*} value\n * @param {string=} opt_units\n * @param {boolean=} opt_bypassCache\n */\nexport function setStyle(element, property, value, opt_units, opt_bypassCache) {\n  const propertyName = getVendorJsPropertyName(element.style, property,\n      opt_bypassCache);\n  if (propertyName) {\n    element.style[propertyName] =\n      /** @type {string} */ (opt_units ? value + opt_units : value);\n  }\n}\n\n\n/**\n * Returns the value of the CSS style of the specified element.\n * @param {!Element} element\n * @param {string} property\n * @param {boolean=} opt_bypassCache\n * @return {*}\n */\nexport function getStyle(element, property, opt_bypassCache) {\n  const propertyName = getVendorJsPropertyName(element.style, property,\n      opt_bypassCache);\n  if (!propertyName) {\n    return undefined;\n  }\n  return element.style[propertyName];\n}\n\n\n/**\n * Sets the CSS styles of the specified element. The styles\n * a specified as a map from CSS property names to their values.\n * @param {!Element} element\n * @param {!Object<string, *>} styles\n */\nexport function setStyles(element, styles) {\n  for (const k in styles) {\n    setStyle(element, k, styles[k]);\n  }\n}\n\n\n/**\n * Shows or hides the specified element.\n * @param {!Element} element\n * @param {boolean=} opt_display\n */\nexport function toggle(element, opt_display) {\n  if (opt_display === undefined) {\n    opt_display = getStyle(element, 'display') == 'none';\n  }\n  setStyle(element, 'display', opt_display ? '' : 'none');\n}\n\n\n/**\n * Returns a pixel value.\n * @param {number} value\n * @return {string}\n */\nexport function px(value) {\n  return `${value}px`;\n}\n\n/**\n * Returns a degree value.\n * @param {number} value\n * @return {string}\n */\nexport function deg(value) {\n  return `${value}deg`;\n}\n\n/**\n * Returns a \"translateX\" for CSS \"transform\" property.\n * @param {number|string} value\n * @return {string}\n */\nexport function translateX(value) {\n  if (typeof value == 'string') {\n    return `translateX(${value})`;\n  }\n  return `translateX(${px(value)})`;\n}\n\n\n/**\n * Returns a \"translateX\" for CSS \"transform\" property.\n * @param {number|string} x\n * @param {(number|string)=} opt_y\n * @return {string}\n */\nexport function translate(x, opt_y) {\n  if (typeof x == 'number') {\n    x = px(x);\n  }\n  if (opt_y === undefined) {\n    return `translate(${x})`;\n  }\n  if (typeof opt_y == 'number') {\n    opt_y = px(opt_y);\n  }\n  return `translate(${x}, ${opt_y})`;\n}\n\n\n/**\n * Returns a \"scale\" for CSS \"transform\" property.\n * @param {number|string} value\n * @return {string}\n */\nexport function scale(value) {\n  return `scale(${value})`;\n}\n\n/**\n * Returns a \"rotate\" for CSS \"transform\" property.\n * @param {number|string} value\n * @return {string}\n */\nexport function rotate(value) {\n  if (typeof value == 'number') {\n    value = deg(value);\n  }\n  return `rotate(${value})`;\n}\n\n/**\n * Remove alpha value from a rgba color value.\n * Return the new color property with alpha equals if has the alpha value.\n * Caller needs to make sure the input color value is a valid rgba/rgb value\n * @param {string} rgbaColor\n * @return {string}\n */\nexport function removeAlphaFromColor(rgbaColor) {\n  return rgbaColor.replace(\n      /\\(([^,]+),([^,]+),([^,)]+),[^)]+\\)/g, '($1,$2,$3, 1)');\n}\n\n/**\n * Gets the computed style of the element. The helper is necessary to enforce\n * the possible `null` value returned by a buggy Firefox.\n *\n * @param {!Window} win\n * @param {!Element} el\n * @return {!Object<string, string>}\n */\nexport function computedStyle(win, el) {\n  const style = /** @type {?CSSStyleDeclaration} */(win.getComputedStyle(el));\n  return /** @type {!Object<string, string>} */(style) || map();\n}\n\n\n/**\n * Resets styles that were set dynamically (i.e. inline)\n * @param {!Element} element\n * @param {!Array<string>} properties\n */\nexport function resetStyles(element, properties) {\n  const styleObj = {};\n  properties.forEach(prop => {\n    styleObj[prop] = null;\n  });\n  setStyles(element, styleObj);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* @const */\nconst toString_ = Object.prototype.toString;\n\n/**\n * Returns the ECMA [[Class]] of a value\n * @param {*} value\n * @return {string}\n */\nfunction toString(value) {\n  return toString_.call(value);\n}\n\n/**\n * Determines if value is actually an Array.\n * @param {*} value\n * @return {boolean}\n */\nexport function isArray(value) {\n  return Array.isArray(value);\n}\n\n/**\n * Converts an array-like object to an array.\n * @param {?IArrayLike<T>|string} arrayLike\n * @return {!Array<T>}\n * @template T\n */\nexport function toArray(arrayLike) {\n  if (!arrayLike) {\n    return [];\n  }\n  const array = new Array(arrayLike.length);\n  for (let i = 0; i < arrayLike.length; i++) {\n    array[i] = arrayLike[i];\n  }\n  return array;\n}\n\n/**\n * Determines if value is actually an Object.\n * @param {*} value\n * @return {boolean}\n */\nexport function isObject(value) {\n  return toString(value) === '[object Object]';\n}\n\n/**\n * Determines if value is of number type and finite.\n * NaN and Infinity are not considered a finite number.\n * String numbers are not considered numbers.\n * @param {*} value\n * @return {boolean}\n */\nexport function isFiniteNumber(value) {\n  return (typeof value === 'number' && isFinite(value));\n}\n\n/**\n * Checks whether `s` is a valid value of `enumObj`.\n *\n * @param {!Object<T>} enumObj\n * @param {T} s\n * @return {boolean}\n * @template T\n */\nexport function isEnumValue(enumObj, s) {\n  for (const k in enumObj) {\n    if (enumObj[k] === s) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Externs declare that access `defaultView` from `document` or\n * `ownerDocument` is of type `(Window|null)` but most of our parameter types\n * assume that it is never null. This is OK in practice as we ever only get\n * null on disconnected documents or old IE.\n * This helper function casts it into just a simple Window return type.\n *\n * @param {!Window|null} winOrNull\n * @return {!Window}\n */\nexport function toWin(winOrNull) {\n  return /** @type {!Window} */ (winOrNull);\n}\n\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {tryDecodeUriComponent_} from './url-try-decode-uri-component';\n\nconst regex = /(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;\n\n/**\n * Parses the query string of an URL. This method returns a simple key/value\n * map. If there are duplicate keys the latest value is returned.\n *\n * DO NOT import the function from this file. Instead, import parseQueryString\n * from `src/url.js`.\n *\n * @param {string} queryString\n * @return {!JsonObject}\n */\nexport function parseQueryString_(queryString) {\n  const params = /** @type {!JsonObject} */ (Object.create(null));\n  if (!queryString) {\n    return params;\n  }\n\n  let match;\n  while ((match = regex.exec(queryString))) {\n    const name = tryDecodeUriComponent_(match[1], match[1]);\n    const value = match[2] ? tryDecodeUriComponent_(match[2], match[2]) : '';\n    params[name] = value;\n  }\n  return params;\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Tries to decode a URI component, falling back to opt_fallback (or an empty\n * string)\n *\n * DO NOT import the function from this file. Instead, import\n * tryDecodeUriComponent from `src/url.js`.\n *\n * @param {string} component\n * @param {string=} fallback\n * @return {string}\n */\nexport function tryDecodeUriComponent_(component, fallback = '') {\n  try {\n    return decodeURIComponent(component);\n  } catch (e) {\n    return fallback;\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {LruCache} from './utils/lru-cache';\nimport {dict} from './utils/object';\nimport {endsWith, startsWith} from './string';\nimport {getMode} from './mode';\nimport {isArray} from './types';\nimport {parseQueryString_} from './url-parse-query-string';\nimport {tryDecodeUriComponent_} from './url-try-decode-uri-component';\nimport {urls} from './config';\nimport {user} from './log';\n\n/**\n * @type {!JsonObject}\n */\nconst SERVING_TYPE_PREFIX = dict({\n  // No viewer\n  'c': true,\n  // In viewer\n  'v': true,\n  // Ad landing page\n  'a': true,\n  // Ad\n  'ad': true,\n});\n\n/**\n * Cached a-tag to avoid memory allocation during URL parsing.\n * @type {HTMLAnchorElement}\n */\nlet a;\n\n/**\n * We cached all parsed URLs. As of now there are no use cases\n * of AMP docs that would ever parse an actual large number of URLs,\n * but we often parse the same one over and over again.\n * @type {LruCache}\n */\nlet cache;\n\n/** @private @const Matches amp_js_* parameters in query string. */\nconst AMP_JS_PARAMS_REGEX = /[?&]amp_js[^&]*/;\n\n/** @private @const Matches amp_gsa parameters in query string. */\nconst AMP_GSA_PARAMS_REGEX = /[?&]amp_gsa[^&]*/;\n\n/** @private @const Matches amp_r parameters in query string. */\nconst AMP_R_PARAMS_REGEX = /[?&]amp_r[^&]*/;\n\n/** @private @const Matches usqp parameters from goog experiment in query string. */\nconst GOOGLE_EXPERIMENT_PARAMS_REGEX = /[?&]usqp[^&]*/;\n\nconst INVALID_PROTOCOLS = [\n  /*eslint no-script-url: 0*/ 'javascript:',\n  /*eslint no-script-url: 0*/ 'data:',\n  /*eslint no-script-url: 0*/ 'vbscript:',\n];\n\n/** @const {string} */\nexport const SOURCE_ORIGIN_PARAM = '__amp_source_origin';\n\n/**\n * Returns the correct origin for a given window.\n * @param {!Window} win\n * @return {string} origin\n */\nexport function getWinOrigin(win) {\n  return win.origin || parseUrlDeprecated(win.location.href).origin;\n}\n\n/**\n * Returns a Location-like object for the given URL. If it is relative,\n * the URL gets resolved.\n * Consider the returned object immutable. This is enforced during\n * testing by freezing the object.\n * @param {string} url\n * @param {boolean=} opt_nocache\n * @return {!Location}\n */\nexport function parseUrlDeprecated(url, opt_nocache) {\n  if (!a) {\n    a = /** @type {!HTMLAnchorElement} */ (self.document.createElement('a'));\n    cache = self.UrlCache || (self.UrlCache = new LruCache(100));\n  }\n\n  return parseUrlWithA(a, url, opt_nocache ? null : cache);\n}\n\n/**\n * Returns a Location-like object for the given URL. If it is relative,\n * the URL gets resolved.\n * Consider the returned object immutable. This is enforced during\n * testing by freezing the object.\n * @param {!HTMLAnchorElement} a\n * @param {string} url\n * @param {LruCache=} opt_cache\n * @return {!Location}\n * @restricted\n */\nexport function parseUrlWithA(a, url, opt_cache) {\n  if (opt_cache && opt_cache.has(url)) {\n    return opt_cache.get(url);\n  }\n\n  a.href = url;\n\n  // IE11 doesn't provide full URL components when parsing relative URLs.\n  // Assigning to itself again does the trick #3449.\n  if (!a.protocol) {\n    a.href = a.href;\n  }\n\n  const info = /** @type {!Location} */({\n    href: a.href,\n    protocol: a.protocol,\n    host: a.host,\n    hostname: a.hostname,\n    port: a.port == '0' ? '' : a.port,\n    pathname: a.pathname,\n    search: a.search,\n    hash: a.hash,\n    origin: null, // Set below.\n  });\n\n  // Some IE11 specific polyfills.\n  // 1) IE11 strips out the leading '/' in the pathname.\n  if (info.pathname[0] !== '/') {\n    info.pathname = '/' + info.pathname;\n  }\n\n  // 2) For URLs with implicit ports, IE11 parses to default ports while\n  // other browsers leave the port field empty.\n  if ((info.protocol == 'http:' && info.port == 80)\n      || (info.protocol == 'https:' && info.port == 443)) {\n    info.port = '';\n    info.host = info.hostname;\n  }\n\n  // For data URI a.origin is equal to the string 'null' which is not useful.\n  // We instead return the actual origin which is the full URL.\n  if (a.origin && a.origin != 'null') {\n    info.origin = a.origin;\n  } else if (info.protocol == 'data:' || !info.host) {\n    info.origin = info.href;\n  } else {\n    info.origin = info.protocol + '//' + info.host;\n  }\n\n  // Freeze during testing to avoid accidental mutation.\n  const frozen = (getMode().test && Object.freeze) ? Object.freeze(info) : info;\n\n  if (opt_cache) {\n    opt_cache.put(url, frozen);\n  }\n\n  return frozen;\n}\n\n/**\n * Appends the string just before the fragment part (or optionally\n * to the front of the query string) of the URL.\n * @param {string} url\n * @param {string} paramString\n * @param {boolean=} opt_addToFront\n * @return {string}\n */\nexport function appendEncodedParamStringToUrl(url, paramString,\n  opt_addToFront) {\n  if (!paramString) {\n    return url;\n  }\n  const mainAndFragment = url.split('#', 2);\n  const mainAndQuery = mainAndFragment[0].split('?', 2);\n\n  let newUrl = mainAndQuery[0] + (\n    mainAndQuery[1]\n      ? (opt_addToFront\n        ? `?${paramString}&${mainAndQuery[1]}`\n        : `?${mainAndQuery[1]}&${paramString}`)\n      : `?${paramString}`);\n  newUrl += mainAndFragment[1] ? `#${mainAndFragment[1]}` : '';\n  return newUrl;\n}\n/**\n * Appends a query string field and value to a url. `key` and `value`\n * will be ran through `encodeURIComponent` before appending.\n * @param {string} url\n * @param {string} key\n * @param {string} value\n * @param {boolean=} opt_addToFront\n * @return {string}\n */\nexport function addParamToUrl(url, key, value, opt_addToFront) {\n  const field = `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\n  return appendEncodedParamStringToUrl(url, field, opt_addToFront);\n}\n\n/**\n * Appends query string fields and values to a url. The `params` objects'\n * `key`s and `value`s will be transformed into query string keys/values.\n * @param {string} url\n * @param {!JsonObject<string, string|!Array<string>>} params\n * @return {string}\n */\nexport function addParamsToUrl(url, params) {\n  return appendEncodedParamStringToUrl(url, serializeQueryString(params));\n}\n\n/**\n * Serializes the passed parameter map into a query string with both keys\n * and values encoded.\n * @param {!JsonObject<string, string|!Array<string>>} params\n * @return {string}\n */\nexport function serializeQueryString(params) {\n  const s = [];\n  for (const k in params) {\n    const v = params[k];\n    if (v == null) {\n      continue;\n    } else if (isArray(v)) {\n      for (let i = 0; i < v.length; i++) {\n        const sv = /** @type {string} */ (v[i]);\n        s.push(`${encodeURIComponent(k)}=${encodeURIComponent(sv)}`);\n      }\n    } else {\n      const sv = /** @type {string} */ (v);\n      s.push(`${encodeURIComponent(k)}=${encodeURIComponent(sv)}`);\n    }\n  }\n  return s.join('&');\n}\n\n/**\n * Returns `true` if the URL is secure: either HTTPS or localhost (for testing).\n * @param {string|!Location} url\n * @return {boolean}\n */\nexport function isSecureUrlDeprecated(url) {\n  if (typeof url == 'string') {\n    url = parseUrlDeprecated(url);\n  }\n  return (url.protocol == 'https:' ||\n      url.hostname == 'localhost' ||\n      endsWith(url.hostname, '.localhost'));\n}\n\n/**\n * Asserts that a given url is HTTPS or protocol relative. It's a user-level\n * assert.\n *\n * Provides an exception for localhost.\n *\n * @param {?string|undefined} urlString\n * @param {!Element|string} elementContext Element where the url was found.\n * @param {string=} sourceName Used for error messages.\n * @return {string}\n */\nexport function assertHttpsUrl(\n  urlString, elementContext, sourceName = 'source') {\n  user().assert(urlString != null, '%s %s must be available',\n      elementContext, sourceName);\n  // (erwinm, #4560): type cast necessary until #4560 is fixed.\n  const theUrlString = /** @type {string} */ (urlString);\n  user().assert(isSecureUrlDeprecated(theUrlString) || /^(\\/\\/)/.test(theUrlString),\n      '%s %s must start with ' +\n      '\"https://\" or \"//\" or be relative and served from ' +\n      'either https or from localhost. Invalid value: %s',\n      elementContext, sourceName, theUrlString);\n  return theUrlString;\n}\n\n/**\n * Asserts that a given url is an absolute HTTP or HTTPS URL.\n * @param {string} urlString\n * @return {string}\n */\nexport function assertAbsoluteHttpOrHttpsUrl(urlString) {\n  user().assert(/^https?\\:/i.test(urlString),\n      'URL must start with \"http://\" or \"https://\". Invalid value: %s',\n      urlString);\n  return parseUrlDeprecated(urlString).href;\n}\n\n\n/**\n * Parses the query string of an URL. This method returns a simple key/value\n * map. If there are duplicate keys the latest value is returned.\n *\n * This function is implemented in a separate file to avoid a circular\n * dependency.\n *\n * @param {string} queryString\n * @return {!JsonObject}\n */\nexport function parseQueryString(queryString) {\n  return parseQueryString_(queryString);\n}\n\n/**\n * Returns the URL without fragment. If URL doesn't contain fragment, the same\n * string is returned.\n * @param {string} url\n * @return {string}\n */\nexport function removeFragment(url) {\n  const index = url.indexOf('#');\n  if (index == -1) {\n    return url;\n  }\n  return url.substring(0, index);\n}\n\n/**\n * Returns the fragment from the URL. If the URL doesn't contain fragment,\n * the empty string is returned.\n * @param {string} url\n * @return {string}\n */\nexport function getFragment(url) {\n  const index = url.indexOf('#');\n  if (index == -1) {\n    return '';\n  }\n  return url.substring(index);\n}\n\n/**\n * Returns whether the URL has the origin of a proxy.\n * @param {string|!Location} url URL of an AMP document.\n * @return {boolean}\n */\nexport function isProxyOrigin(url) {\n  if (typeof url == 'string') {\n    url = parseUrlDeprecated(url);\n  }\n  return urls.cdnProxyRegex.test(url.origin);\n}\n\n/**\n * For proxy-origin URLs, returns the serving type. Otherwise, returns null.\n * E.g., 'https://amp-com.cdn.ampproject.org/a/s/amp.com/amp_document.html'\n * returns 'a'.\n * @param {string|!Location} url URL of an AMP document.\n * @return {?string}\n */\nexport function getProxyServingType(url) {\n  if (typeof url == 'string') {\n    url = parseUrlDeprecated(url);\n  }\n  if (!isProxyOrigin(url)) {\n    return null;\n  }\n  const path = url.pathname.split('/', 2);\n  return path[1];\n}\n\n/**\n * Returns whether the URL origin is localhost.\n * @param {string|!Location} url URL of an AMP document.\n * @return {boolean}\n */\nexport function isLocalhostOrigin(url) {\n  if (typeof url == 'string') {\n    url = parseUrlDeprecated(url);\n  }\n  return urls.localhostRegex.test(url.origin);\n}\n\n/**\n * Returns whether the URL has valid protocol.\n * Deep link protocol is valid, but not javascript etc.\n * @param {string|!Location} url\n * @return {boolean}\n */\nexport function isProtocolValid(url) {\n  if (!url) {\n    return true;\n  }\n  if (typeof url == 'string') {\n    url = parseUrlDeprecated(url);\n  }\n  return !INVALID_PROTOCOLS.includes(url.protocol);\n}\n\n/**\n * Returns a URL without AMP JS parameters.\n * @param {string} url\n * @return {string}\n */\nexport function removeAmpJsParamsFromUrl(url) {\n  const parsed = parseUrlDeprecated(url);\n  const search = removeAmpJsParamsFromSearch(parsed.search);\n  return parsed.origin + parsed.pathname + search + parsed.hash;\n\n}\n\n/**\n * Returns a URL without a query string.\n * @param {string} url\n * @return {string}\n */\nexport function removeSearch(url) {\n  const index = url.indexOf('?');\n  if (index == -1) {\n    return url;\n  }\n  const fragment = getFragment(url);\n  return url.substring(0, index) + fragment;\n}\n\n/**\n * Removes parameters that start with amp js parameter pattern and returns the\n * new search string.\n * @param {string} urlSearch\n * @return {string}\n */\nfunction removeAmpJsParamsFromSearch(urlSearch) {\n  if (!urlSearch || urlSearch == '?') {\n    return '';\n  }\n  const search = urlSearch\n      .replace(AMP_JS_PARAMS_REGEX, '')\n      .replace(AMP_GSA_PARAMS_REGEX, '')\n      .replace(AMP_R_PARAMS_REGEX, '')\n      .replace(GOOGLE_EXPERIMENT_PARAMS_REGEX, '')\n      .replace(/^[?&]/, ''); // Removes first ? or &.\n  return search ? '?' + search : '';\n}\n\n/**\n * Returns the source URL of an AMP document for documents served\n * on a proxy origin or directly.\n * @param {string|!Location} url URL of an AMP document.\n * @return {string}\n */\nexport function getSourceUrl(url) {\n  if (typeof url == 'string') {\n    url = parseUrlDeprecated(url);\n  }\n\n  // Not a proxy URL - return the URL itself.\n  if (!isProxyOrigin(url)) {\n    return url.href;\n  }\n\n  // A proxy URL.\n  // Example path that is being matched here.\n  // https://cdn.ampproject.org/c/s/www.origin.com/foo/\n  // The /s/ is optional and signals a secure origin.\n  const path = url.pathname.split('/');\n  const prefix = path[1];\n  user().assert(SERVING_TYPE_PREFIX[prefix],\n      'Unknown path prefix in url %s', url.href);\n  const domainOrHttpsSignal = path[2];\n  const origin = domainOrHttpsSignal == 's'\n    ? 'https://' + decodeURIComponent(path[3])\n    : 'http://' + decodeURIComponent(domainOrHttpsSignal);\n  // Sanity test that what we found looks like a domain.\n  user().assert(origin.indexOf('.') > 0, 'Expected a . in origin %s', origin);\n  path.splice(1, domainOrHttpsSignal == 's' ? 3 : 2);\n  return origin + path.join('/') +\n      removeAmpJsParamsFromSearch(url.search) + (url.hash || '');\n}\n\n/**\n * Returns the source origin of an AMP document for documents served\n * on a proxy origin or directly.\n * @param {string|!Location} url URL of an AMP document.\n * @return {string} The source origin of the URL.\n */\nexport function getSourceOrigin(url) {\n  return parseUrlDeprecated(getSourceUrl(url)).origin;\n}\n\n/**\n * Returns absolute URL resolved based on the relative URL and the base.\n * @param {string} relativeUrlString\n * @param {string|!Location} baseUrl\n * @return {string}\n */\nexport function resolveRelativeUrl(relativeUrlString, baseUrl) {\n  if (typeof baseUrl == 'string') {\n    baseUrl = parseUrlDeprecated(baseUrl);\n  }\n  if (typeof URL == 'function') {\n    return new URL(relativeUrlString, baseUrl.href).toString();\n  }\n  return resolveRelativeUrlFallback_(relativeUrlString, baseUrl);\n}\n\n/**\n * Fallback for URL resolver when URL class is not available.\n * @param {string} relativeUrlString\n * @param {string|!Location} baseUrl\n * @return {string}\n * @private Visible for testing.\n */\nexport function resolveRelativeUrlFallback_(relativeUrlString, baseUrl) {\n  if (typeof baseUrl == 'string') {\n    baseUrl = parseUrlDeprecated(baseUrl);\n  }\n  relativeUrlString = relativeUrlString.replace(/\\\\/g, '/');\n  const relativeUrl = parseUrlDeprecated(relativeUrlString);\n\n  // Absolute URL.\n  if (startsWith(relativeUrlString.toLowerCase(), relativeUrl.protocol)) {\n    return relativeUrl.href;\n  }\n\n  // Protocol-relative URL.\n  if (startsWith(relativeUrlString, '//')) {\n    return baseUrl.protocol + relativeUrlString;\n  }\n\n  // Absolute path.\n  if (startsWith(relativeUrlString, '/')) {\n    return baseUrl.origin + relativeUrlString;\n  }\n\n  // Relative path.\n  return baseUrl.origin + baseUrl.pathname.replace(/\\/[^/]*$/, '/')\n      + relativeUrlString;\n}\n\n\n/**\n * Add \"__amp_source_origin\" query parameter to the URL.\n * @param {!Window} win\n * @param {string} url\n * @return {string}\n */\nexport function getCorsUrl(win, url) {\n  checkCorsUrl(url);\n  const sourceOrigin = getSourceOrigin(win.location.href);\n  return addParamToUrl(url, SOURCE_ORIGIN_PARAM, sourceOrigin);\n}\n\n\n/**\n * Checks if the url has __amp_source_origin and throws if it does.\n * @param {string} url\n */\nexport function checkCorsUrl(url) {\n  const parsedUrl = parseUrlDeprecated(url);\n  const query = parseQueryString(parsedUrl.search);\n  user().assert(!(SOURCE_ORIGIN_PARAM in query),\n      'Source origin is not allowed in %s', url);\n}\n\n/**\n * Tries to decode a URI component, falling back to opt_fallback (or an empty\n * string)\n *\n * @param {string} component\n * @param {string=} opt_fallback\n * @return {string}\n */\nexport function tryDecodeUriComponent(component, opt_fallback) {\n  return tryDecodeUriComponent_(component, opt_fallback);\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * Compares if two arrays contains exactly same elements of same number\n * of same order.\n * Notice that it does NOT handle NaN case as expected\n *\n * @param {!Array<T>} arr1\n * @param {!Array<T>} arr2\n * @return {boolean}\n * @template T\n */\nexport function areEqualOrdered(arr1, arr2) {\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n\n  for (let i = 0; i < arr1.length; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * A bit like Array#filter, but removes elements that filter false from the\n * array. Returns the filtered items.\n *\n * @param {!Array<T>} array\n * @param {function(T, number, !Array<T>):boolean} filter\n * @return {!Array<T>}\n * @template T\n */\nexport function filterSplice(array, filter) {\n  const splice = [];\n  let index = 0;\n  for (let i = 0; i < array.length; i++) {\n    const item = array[i];\n    if (filter(item, i, array)) {\n      if (index < i) {\n        array[index] = item;\n      }\n      index++;\n    } else {\n      splice.push(item);\n    }\n  }\n\n  if (index < array.length) {\n    array.length = index;\n  }\n\n  return splice;\n}\n\n/**\n * Returns the index of the first element matching the predicate.\n * Like Array#findIndex.\n *\n * @param {!Array<T>} array\n * @param {function(T, number, !Array<T>):boolean} predicate\n * @return {number}\n * @template T\n */\nexport function findIndex(array, predicate) {\n  for (let i = 0; i < array.length; i++) {\n    if (predicate(array[i], i, array)) {\n      return i;\n    }\n  }\n  return -1;\n}\n\n/**\n * Converts the given iterator to an array.\n *\n * @param {!Iterator<T>} iterator\n * @return {Array<T>}\n * @template T\n */\nexport function fromIterator(iterator) {\n  const array = [];\n  for (let e = iterator.next(); !e.done; e = iterator.next()) {\n    array.push(e.value);\n  }\n  return array;\n}\n\n/**\n * Adds item to array if it is not already present.\n *\n * @param {Array<T>} array\n * @param {T} item\n * @template T\n */\nexport function pushIfNotExist(array, item) {\n  if (array.indexOf(item) < 0) {\n    array.push(item);\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {bytesToString, stringToBytes, utf8Encode} from './bytes';\n\n/**\n * Character mapping from base64url to base64.\n * @const {!Object<string, string>}\n */\nconst base64UrlDecodeSubs = {'-': '+', '_': '/', '.': '='};\n\n/**\n * Character mapping from base64 to base64url.\n * @const {!Object<string, string>}\n */\nconst base64UrlEncodeSubs = {'+': '-', '/': '_', '=': '.'};\n\n/**\n * Converts a string which is in base64url encoding into a Uint8Array\n * containing the decoded value.\n * @param {string} str\n * @return {!Uint8Array}\n */\nexport function base64UrlDecodeToBytes(str) {\n  const encoded = atob(str.replace(/[-_.]/g, ch => base64UrlDecodeSubs[ch]));\n  return stringToBytes(encoded);\n}\n\n/**\n * Converts a string which is in base64 encoding into a Uint8Array\n * containing the decoded value.\n * @param {string} str\n * @return {!Uint8Array}\n */\nexport function base64DecodeToBytes(str) {\n  return stringToBytes(atob(str));\n}\n\n/**\n * Converts a bytes array into base64url encoded string.\n * base64url is defined in RFC 4648. It is sometimes referred to as \"web safe\".\n * @param {!Uint8Array} bytes\n * @return {string}\n */\nexport function base64UrlEncodeFromBytes(bytes) {\n  const str = bytesToString(bytes);\n  return btoa(str).replace(/[+/=]/g, ch => base64UrlEncodeSubs[ch]);\n}\n\n/**\n * Converts a string into base64url encoded string.\n * base64url is defined in RFC 4648. It is sometimes referred to as \"web safe\".\n * @param {string} str\n * @return {string}\n */\nexport function base64UrlEncodeFromString(str) {\n  const bytes = utf8Encode(str);\n  return base64UrlEncodeFromBytes(bytes);\n}\n\n/**\n * Converts a bytes array into base64 encoded string.\n * @param {!Uint8Array} bytes\n * @return {string}\n */\nexport function base64EncodeFromBytes(bytes) {\n  return btoa(bytesToString(bytes));\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {dev} from '../log';\n\n/**\n * Interpret a byte array as a UTF-8 string.\n * @param {!BufferSource} bytes\n * @return {string}\n */\nexport function utf8Decode(bytes) {\n  if (typeof TextDecoder !== 'undefined') {\n    return new TextDecoder('utf-8').decode(bytes);\n  }\n  const asciiString = bytesToString(new Uint8Array(bytes.buffer || bytes));\n  return decodeURIComponent(escape(asciiString));\n}\n\n/**\n * Turn a string into UTF-8 bytes.\n * @param {string} string\n * @return {!Uint8Array}\n */\nexport function utf8Encode(string) {\n  if (typeof TextEncoder !== 'undefined') {\n    return new TextEncoder('utf-8').encode(string);\n  }\n  return stringToBytes(unescape(encodeURIComponent(string)));\n}\n\n/**\n * Converts a string which holds 8-bit code points, such as the result of atob,\n * into a Uint8Array with the corresponding bytes.\n * If you have a string of characters, you probably want to be using utf8Encode.\n * @param {string} str\n * @return {!Uint8Array}\n */\nexport function stringToBytes(str) {\n  const bytes = new Uint8Array(str.length);\n  for (let i = 0; i < str.length; i++) {\n    const charCode = str.charCodeAt(i);\n    dev().assert(charCode <= 255, 'Characters must be in range [0,255]');\n    bytes[i] = charCode;\n  }\n  return bytes;\n}\n\n/**\n * Converts a 8-bit bytes array into a string\n * @param {!Uint8Array} bytes\n * @return {string}\n */\nexport function bytesToString(bytes) {\n  // Intentionally avoids String.fromCharCode.apply so we don't suffer a\n  // stack overflow. #10495, https://jsperf.com/bytesToString-2\n  const array = new Array(bytes.length);\n  for (let i = 0; i < bytes.length; i++) {\n    array[i] = String.fromCharCode(bytes[i]);\n  }\n  return array.join('');\n}\n\n/**\n * Converts a 4-item byte array to an unsigned integer.\n * Assumes bytes are big endian.\n * @param {!Uint8Array} bytes\n * @return {number}\n */\nexport function bytesToUInt32(bytes) {\n  if (bytes.length != 4) {\n    throw new Error('Received byte array with length != 4');\n  }\n  const val = (bytes[0] & 0xFF) << 24 |\n     (bytes[1] & 0xFF) << 16 |\n     (bytes[2] & 0xFF) << 8 |\n     (bytes[3] & 0xFF);\n  // Convert to unsigned.\n  return val >>> 0;\n}\n\n/**\n * Generate a random bytes array with specific length using\n * win.crypto.getRandomValues. Return null if it is not available.\n * @param {!Window} win\n * @param {number} length\n * @return {?Uint8Array}\n */\nexport function getCryptoRandomBytesArray(win, length) {\n  if (!win.crypto || !win.crypto.getRandomValues) {\n    return null;\n  }\n\n  // Widely available in browsers we support:\n  // http://caniuse.com/#search=getRandomValues\n  const uint8array = new Uint8Array(length);\n  win.crypto.getRandomValues(uint8array);\n  return uint8array;\n}\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {dev} from '../log';\n\n/** @const {string} */\nconst TAG = 'lru-cache';\n\n/**\n * @template T\n */\nexport class LruCache {\n  /**\n   * @param {number} capacity\n   */\n  constructor(capacity) {\n    /** @private @const {number} */\n    this.capacity_ = capacity;\n\n    /** @private {number} */\n    this.size_ = 0;\n\n    /**\n     * An incrementing counter to define the last access.\n     * @private {number}\n     */\n    this.access_ = 0;\n\n    /** @private {!Object<(number|string), {payload: T, access: number}>} */\n    this.cache_ = Object.create(null);\n  }\n\n  /**\n   * Returns whether key is cached.\n   *\n   * @param {number|string} key\n   * @return {boolean}\n   */\n  has(key) {\n    return !!this.cache_[key];\n  }\n\n  /**\n   * @param {number|string} key\n   * @return {T} The cached payload.\n   */\n  get(key) {\n    const cacheable = this.cache_[key];\n    if (cacheable) {\n      cacheable.access = ++this.access_;\n      return cacheable.payload;\n    }\n    return undefined;\n  }\n\n  /**\n   * @param {number|string} key\n   * @param {T} payload The payload to cache.\n   */\n  put(key, payload) {\n    if (!this.has(key)) {\n      this.size_++;\n    }\n    this.cache_[key] = {payload, access: this.access_};\n    this.evict_();\n  }\n\n  /**\n   * Evicts the oldest cache entry, if we've exceeded capacity.\n   */\n  evict_() {\n    if (this.size_ <= this.capacity_) {\n      return;\n    }\n\n    dev().warn(TAG, 'Trimming LRU cache');\n    const cache = this.cache_;\n    let oldest = this.access_ + 1;\n    let oldestKey;\n    for (const key in cache) {\n      const {access} = cache[key];\n      if (access < oldest) {\n        oldest = access;\n        oldestKey = key;\n      }\n    }\n\n    if (oldestKey !== undefined) {\n      delete cache[oldestKey];\n      this.size_--;\n    }\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {isObject} from '../types';\n\n/* @const */\nconst hasOwn_ = Object.prototype.hasOwnProperty;\n\n/**\n * Returns a map-like object.\n * If opt_initial is provided, copies its own properties into the\n * newly created object.\n * @param {T=} opt_initial This should typically be an object literal.\n * @return {T}\n * @template T\n */\nexport function map(opt_initial) {\n  const obj = Object.create(null);\n  if (opt_initial) {\n    Object.assign(obj, opt_initial);\n  }\n  return obj;\n}\n\n/**\n * Return an empty JsonObject or makes the passed in object literal\n * an JsonObject.\n * The JsonObject type is just a simple object that is at-dict.\n * See\n * https://github.com/google/closure-compiler/wiki/@struct-and-@dict-Annotations\n * for what a dict is type-wise.\n * The linter enforces that the argument is, in fact, at-dict like.\n * @param {!Object=} opt_initial\n * @return {!JsonObject}\n */\nexport function dict(opt_initial) {\n  // We do not copy. The linter enforces that the passed in object is a literal\n  // and thus the caller cannot have a reference to it.\n  return /** @type {!JsonObject} */ (opt_initial || {});\n}\n\n/**\n * Checks if the given key is a property in the map.\n *\n * @param {T}  obj a map like property.\n * @param {string}  key\n * @return {boolean}\n * @template T\n */\nexport function hasOwn(obj, key) {\n  return hasOwn_.call(obj, key);\n}\n\n/**\n * Returns obj[key] iff key is obj's own property (is not inherited).\n * Otherwise, returns undefined.\n *\n * @param {Object} obj\n * @param {string} key\n * @return {*}\n */\nexport function ownProperty(obj, key) {\n  if (hasOwn(obj, key)) {\n    return obj[key];\n  } else {\n    return undefined;\n  }\n}\n\n/**\n * Deep merges source into target.\n *\n * @param {!Object} target\n * @param {!Object} source\n * @param {number} depth The maximum merge depth. If exceeded, Object.assign\n *                       will be used instead.\n * @return {!Object}\n * @throws {Error} If source contains a circular reference.\n * Note: Only nested objects are deep-merged, primitives and arrays are not.\n */\nexport function deepMerge(target, source, depth = 10) {\n  // Keep track of seen objects to detect recursive references.\n  const seen = [];\n\n  /** @type {!Array<{t: !Object, s: !Object, d: number}>} */\n  const queue = [];\n  queue.push({t: target, s: source, d: 0});\n\n  // BFS to ensure objects don't have recursive references at shallower depths.\n  while (queue.length > 0) {\n    const {t, s, d} = queue.shift();\n    if (seen.includes(s)) {\n      throw new Error('Source object has a circular reference.');\n    }\n    seen.push(s);\n    if (t === s) {\n      continue;\n    }\n    if (d > depth) {\n      Object.assign(t, s);\n      continue;\n    }\n    Object.keys(s).forEach(key => {\n      const newValue = s[key];\n      // Perform a deep merge IFF both target and source have the same key\n      // whose corresponding values are objects.\n      if (hasOwn(t, key)) {\n        const oldValue = t[key];\n        if (isObject(newValue) && isObject(oldValue)) {\n          queue.push({t: oldValue, s: newValue, d: d + 1});\n          return;\n        }\n      }\n      t[key] = newValue;\n    });\n  }\n  return target;\n}\n\n/**\n * @param {!Object} o An object to remove properties from\n * @param {!Array<string>} props A list of properties to remove from the Object\n * @return {!Object} An object with the given properties removed\n */\nexport function omit(o, props) {\n  return Object.keys(o).reduce((acc, key) => {\n    if (!props.includes(key)) {\n      acc[key] = o[key];\n    }\n    return acc;\n  }, {});\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Returns a Deferred struct, which holds a pending promise and its associated\n * resolve and reject functions.\n *\n * This is preferred instead of creating a Promise instance to extract the\n * resolve/reject functions yourself:\n *\n * ```\n * // Avoid doing\n * let resolve;\n * const promise = new Promise(res => {\n *   resolve = res;\n * });\n *\n * // Good\n * const deferred = new Deferred();\n * const { promise, resolve } = deferred;\n * ```\n *\n * @template T\n */\nexport class Deferred {\n  /**\n   * Creates an instance of Deferred.\n   */\n  constructor() {\n    let resolve, reject;\n\n    /**\n     * @const {!Promise<T>}\n     */\n    this.promise = new /*OK*/Promise((res, rej) => {\n      resolve = res;\n      reject = rej;\n    });\n\n    /**\n     * @const {function(T=)}\n     */\n    this.resolve = resolve;\n\n    /**\n     * @const {function(*=)}\n     */\n    this.reject = reject;\n  }\n}\n\n/**\n * Creates a promise resolved to the return value of fn.\n * If fn sync throws, it will cause the promise to reject.\n *\n * @param {function():T} fn\n * @return {!Promise<T>}\n * @template T\n */\nexport function tryResolve(fn) {\n  return new Promise(resolve => {\n    resolve(fn());\n  });\n}\n\n/**\n * Returns a promise which resolves if a threshold amount of the given promises\n * resolve, and rejects otherwise.\n * @param {!Array<!Promise>} promises The array of promises to test.\n * @param {number} count The number of promises that must resolve for the\n *     returned promise to resolve.\n * @return {!Promise} A promise that resolves if any of the given promises\n *     resolve, and which rejects otherwise.\n */\nexport function some(promises, count = 1) {\n  return new Promise((resolve, reject) => {\n    count = Math.max(count, 0);\n    const extra = promises.length - count;\n    if (extra < 0) {\n      reject(new Error('not enough promises to resolve'));\n    }\n    if (promises.length == 0) {\n      resolve([]);\n    }\n    const values = [];\n    const reasons = [];\n\n    const onFulfilled = value => {\n      if (values.length < count) {\n        values.push(value);\n      }\n      if (values.length == count) {\n        resolve(values);\n      }\n    };\n    const onRejected = reason => {\n      if (reasons.length <= extra) {\n        reasons.push(reason);\n      }\n      if (reasons.length > extra) {\n        reject(reasons);\n      }\n    };\n    for (let i = 0; i < promises.length; i++) {\n      Promise.resolve(promises[i]).then(onFulfilled, onRejected);\n    }\n  });\n}\n\n/**\n * Resolves with the result of the last promise added.\n * @implements {IThenable}\n */\nexport class LastAddedResolver {\n  /**\n   * @param {!Array<!Promise>=} opt_promises\n   */\n  constructor(opt_promises) {\n    let resolve_, reject_;\n    /** @private @const {!Promise} */\n    this.promise_ = new Promise((resolve, reject) => {\n      resolve_ = resolve;\n      reject_ = reject;\n    });\n\n    /** @private */\n    this.resolve_ = resolve_;\n\n    /** @private */\n    this.reject_ = reject_;\n\n    /** @private */\n    this.count_ = 0;\n\n    if (opt_promises) {\n      for (let i = 0; i < opt_promises.length; i++) {\n        this.add(opt_promises[i]);\n      }\n    }\n  }\n\n  /**\n   * Add a promise to possibly be resolved.\n   * @param {!Promise} promise\n   * @return {!Promise}\n   */\n  add(promise) {\n    const countAtAdd = ++this.count_;\n    Promise.resolve(promise).then(result => {\n      if (this.count_ === countAtAdd) {\n        this.resolve_(result);\n      }\n    }, error => {\n      // Don't follow behavior of Promise.all and Promise.race error so that\n      // this will only reject when most recently added promise fails.\n      if (this.count_ === countAtAdd) {\n        this.reject_(error);\n      }\n    });\n    return this.promise_;\n  }\n\n  /** @override */\n  then(opt_resolve, opt_reject) {\n    return this.promise_.then(opt_resolve, opt_reject);\n  }\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Deferred} from './promise';\nimport {map} from './object';\n\n\n/**\n * This object tracts signals and allows blocking until a signal has been\n * received.\n */\nexport class Signals {\n\n  /**\n   * Creates an instance of Signals.\n   */\n  constructor() {\n    /**\n     * A mapping from a signal name to the signal response: either time or\n     * an error.\n     * @private @const {!Object<string, (time|!Error)>}\n     */\n    this.map_ = map();\n\n    /**\n     * A mapping from a signal name to the signal promise, resolve and reject.\n     * Only allocated when promise has been requested.\n     * @private {?Object<string, {\n     *   promise: !Promise,\n     *   resolve: (function(time)|undefined),\n     *   reject: (function(!Error)|undefined)\n     * }>}\n     */\n    this.promiseMap_ = null;\n  }\n\n  /**\n   * Returns the current known value of the signal. If signal is not yet\n   * available, `null` is returned.\n   * @param {string} name\n   * @return {number|!Error|null}\n   */\n  get(name) {\n    return this.map_[name] || null;\n  }\n\n  /**\n   * Returns the promise that's resolved when the signal is triggered. The\n   * resolved value is the time of the signal.\n   * @param {string} name\n   * @return {!Promise<time>}\n   */\n  whenSignal(name) {\n    let promiseStruct = this.promiseMap_ && this.promiseMap_[name];\n    if (!promiseStruct) {\n      const result = this.map_[name];\n      if (result != null) {\n        // Immediately resolve signal.\n        const promise = typeof result == 'number' ?\n          Promise.resolve(result) :\n          Promise.reject(result);\n        promiseStruct = {promise};\n      } else {\n        // Allocate the promise/resolver for when the signal arrives in the\n        // future.\n        const deferred = new Deferred();\n        const {promise, resolve, reject} = deferred;\n\n        promiseStruct = {promise, resolve, reject};\n      }\n      if (!this.promiseMap_) {\n        this.promiseMap_ = map();\n      }\n      this.promiseMap_[name] = promiseStruct;\n    }\n    return promiseStruct.promise;\n  }\n\n  /**\n   * Triggers the signal with the specified name on the element. The time is\n   * optional; if not provided, the current time is used. The associated\n   * promise is resolved with the resulting time.\n   * @param {string} name\n   * @param {time=} opt_time\n   */\n  signal(name, opt_time) {\n    if (this.map_[name] != null) {\n      // Do not duplicate signals.\n      return;\n    }\n    const time = opt_time || Date.now();\n    this.map_[name] = time;\n    const promiseStruct = this.promiseMap_ && this.promiseMap_[name];\n    if (promiseStruct && promiseStruct.resolve) {\n      promiseStruct.resolve(time);\n      promiseStruct.resolve = undefined;\n      promiseStruct.reject = undefined;\n    }\n  }\n\n  /**\n   * Rejects the signal. Indicates that the signal will never succeed. The\n   * associated signal is rejected.\n   * @param {string} name\n   * @param {!Error} error\n   */\n  rejectSignal(name, error) {\n    if (this.map_[name] != null) {\n      // Do not duplicate signals.\n      return;\n    }\n    this.map_[name] = error;\n    const promiseStruct = this.promiseMap_ && this.promiseMap_[name];\n    if (promiseStruct && promiseStruct.reject) {\n      promiseStruct.reject(error);\n      promiseStruct.resolve = undefined;\n      promiseStruct.reject = undefined;\n    }\n  }\n\n  /**\n   * Resets all signals.\n   * @param {string} name\n   */\n  reset(name) {\n    if (this.map_[name]) {\n      delete this.map_[name];\n    }\n    // Reset promise it has already been resolved.\n    const promiseStruct = this.promiseMap_ && this.promiseMap_[name];\n    if (promiseStruct && !promiseStruct.resolve) {\n      delete this.promiseMap_[name];\n    }\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const MIN_VISIBILITY_RATIO_FOR_AUTOPLAY = 0.5;\n\n/**\n * VideoInterface defines a common video API which any AMP component that plays\n * videos is expected to implement.\n *\n * AMP runtime uses this common API to provide consistent video experience and\n * analytics across all video players.\n *\n * Components implementing this interface must also extend\n * {@link ./base-element.BaseElement} and register with the\n * Video Manager {@link ./service/video-manager-impl.VideoManager} during\n * their `builtCallback`.\n *\n * @interface\n */\nexport class VideoInterface {\n\n  /**\n   * Whether the component supports video playback in the current platform.\n   * If false, component will be not treated as a video component.\n   * @return {boolean}\n   */\n  supportsPlatform() {}\n\n  /**\n   * Whether users can interact with the video such as pausing it.\n   * Example of non-interactive videos include design background videos where\n   * all controls are hidden from the user.\n   *\n   * @return {boolean}\n   */\n  isInteractive() {}\n\n  /**\n   * Current playback time in seconds at time of trigger\n   * @return {number}\n   */\n  getCurrentTime() {}\n\n  /**\n   * Total duration of the video in seconds\n   * @return {number}\n   */\n  getDuration() {}\n\n  /**\n   * Get a 2d array of start and stop times that the user has watched.\n   * @return {!Array<Array<number>>}\n   */\n  getPlayedRanges() {}\n\n  /**\n   * Plays the video..\n   *\n   * @param {boolean} unusedIsAutoplay Whether the call to the `play` method is\n   * triggered by the autoplay functionality. Video players can use this hint\n   * to make decisions such as not playing pre-roll video ads.\n   */\n  play(unusedIsAutoplay) {}\n\n  /**\n   * Pauses the video.\n   */\n  pause() {}\n\n  /**\n   * Mutes the video.\n   */\n  mute() {}\n\n  /**\n   * Unmutes the video.\n   */\n  unmute() {}\n\n  /**\n   * Makes the video UI controls visible.\n   *\n   * AMP will not call this method if `controls` attribute is not set.\n   */\n  showControls() {}\n\n  /**\n   * Hides the video UI controls.\n   *\n   * AMP will not call this method if `controls` attribute is not set.\n   */\n  hideControls() {}\n\n  /**\n   * Returns video's meta data (artwork, title, artist, album, etc.) for use\n   * with the Media Session API\n   * artwork (Array): URL to the poster image (preferably a 512x512 PNG)\n   * title (string): Name of the video\n   * artist (string): Name of the video's author/artist\n   * album (string): Name of the video's album if it exists\n   * @return {!./mediasession-helper.MetadataDef|undefined} metadata\n   */\n  getMetadata() {}\n\n  /**\n   * If this returns true then it will be assumed that the player implements\n   * a feature to enter fullscreen on device rotation internally, so that the\n   * video manager does not override it. If not, the video manager will\n   * implement this feature automatically for videos with the attribute\n   * `rotate-to-fullscreen`.\n   *\n   * @return {boolean}\n   */\n  preimplementsAutoFullscreen() {}\n\n  /**\n   * If this returns true then it will be assumed that the player implements\n   * the MediaSession API internally so that the video manager does not override\n   * it. If not, the video manager will use the metadata variable as well as\n   * inferred meta-data to update the video's Media Session notification.\n   *\n   * @return {boolean}\n   */\n  preimplementsMediaSessionAPI() {}\n\n  /**\n   * Enables fullscreen on the internal video element\n   * NOTE: While implementing, keep in mind that Safari/iOS do not allow taking\n   * any element other than <video> to fullscreen, if the player has an internal\n   * implementation of fullscreen (flash for example) then check\n   * if Services.platformFor(this.win).isSafari is true and use the internal\n   * implementation instead. If not, it is recommended to take the iframe\n   * to fullscreen using fullscreenEnter from dom.js\n   */\n  fullscreenEnter() {}\n\n  /**\n   * Quits fullscreen mode\n   */\n  fullscreenExit() {}\n\n  /**\n   * Returns whether the video is currently in fullscreen mode or not\n   * @return {boolean}\n   */\n  isFullscreen() {}\n}\n\n\n/**\n * Attributes\n *\n * Components implementing the VideoInterface are expected to support\n * the following attributes.\n *\n * @constant {!Object<string, string>}\n */\nexport const VideoAttributes = {\n  /**\n   * autoplay\n   *\n   * Whether the developer has configured autoplay on the component.\n   * This is normally done by setting `autoplay` attribute on the component.\n   *\n   * AMP runtime manages autoplay behaviour itself using methods such as `play`,\n   * `pause`, `showControls`, `hideControls`, `mute`, etc.. therefore components\n   * should not propagate the autoplay attribute to the underlying player\n   * implementation.\n   *\n   * When a video is requested to autoplay, AMP will automatically\n   * mute and hide the controls for the video, when video is 75% visible in\n   * the viewport, AMP will play the video and later pauses it when 25%\n   * or more of the video exits the viewport. If an auto-playing video also has\n   * controls, AMP will install a tap\n   * handler on the video, and when an end-user taps the video, AMP will show\n   * the controls.\n   *\n   */\n  AUTOPLAY: 'autoplay',\n  /**\n   * dock\n   *\n   * Setting the `dock` attribute on the component makes the video minimize\n   * to the corner when scrolled out of view and has been interacted with.\n   */\n  DOCK: 'dock',\n  /**\n   * rotate-to-fullscreen\n   *\n   * If enabled, this automatically expands the currently visible video and\n   * playing to fullscreen when the user changes the device's orientation to\n   * landscape if the video was started following a user interaction\n   * (not autoplay)\n   *\n   * Dependent upon browser support of\n   * http://caniuse.com/#feat=screen-orientation\n   * and http://caniuse.com/#feat=fullscreen\n   */\n  ROTATE_TO_FULLSCREEN: 'rotate-to-fullscreen',\n  /**\n   * noaudio\n   *\n   * If set and autoplay, the equalizer icon will not be displayed.\n   */\n  NO_AUDIO: 'noaudio',\n};\n\n\n/**\n * Events\n *\n * Components implementing the VideoInterface are expected to dispatch\n * the following DOM events.\n *\n * @constant {!Object<string, string>}\n */\nexport const VideoEvents = {\n  /**\n   * registered\n   *\n   * Fired when the video player element is built and has been registered with\n   * the video manager.\n   *\n   * @event registered\n   */\n  REGISTERED: 'registered',\n\n  /**\n   * load\n   *\n   * Fired when the video player is loaded and calls to methods such as `play()`\n   * are allowed.\n   *\n   * @event load\n   */\n  LOAD: 'load',\n\n  /**\n   * playing\n   *\n   * Fired when the video begins playing.\n   *\n   * @event playing\n   */\n  PLAYING: 'playing',\n\n  /**\n   * pause\n   *\n   * Fired when the video pauses.\n   *\n   * @event pause\n   */\n  PAUSE: 'pause',\n\n  /**\n   * ended\n   *\n   * Fired when the video ends.\n   *\n   * This event should be fired in addition to `pause` when video ends.\n   *\n   * @event ended\n   */\n  ENDED: 'ended',\n\n  /**\n   * muted\n   *\n   * Fired when the video is muted.\n   *\n   * @event muted\n   */\n  MUTED: 'muted',\n\n  /**\n   * unmuted\n   *\n   * Fired when the video is unmuted.\n   *\n   * @event unmuted\n   */\n  UNMUTED: 'unmuted',\n\n  /**\n   * amp:video:visibility\n   *\n   * Fired when the video's visibility changes. Normally fired\n   * from `viewportCallback`.\n   *\n   * @event amp:video:visibility\n   * @property {boolean} visible Whether the video player is visible or not.\n   */\n  VISIBILITY: 'amp:video:visibility',\n\n  /**\n   * reload\n   *\n   * Fired when the video's src changes.\n   *\n   * @event reloaded\n   */\n  RELOAD: 'reloaded',\n\n  /**\n   * pre/mid/post Ad start\n   *\n   * Fired when an Ad starts playing.\n   *\n   * This is used to remove any overlay shims during Ad play during autoplay\n   * or minimized-to-corner version of the player.\n   *\n   * @event ad_start\n   */\n  AD_START: 'ad_start',\n\n  /**\n   * pre/mid/post Ad ends\n   *\n   * Fired when an Ad ends playing.\n   *\n   * This is used to restore any overlay shims during Ad play during autoplay\n   * or minimized-to-corner version of the player.\n   *\n   * @event ad_end\n   */\n  AD_END: 'ad_end',\n};\n\n\n/**\n * Playing States\n *\n * Internal playing states used to distinguish between video playing on user's\n * command and videos playing automatically\n *\n * @constant {!Object<string, string>}\n */\nexport const PlayingStates = {\n  /**\n   * playing_manual\n   *\n   * When the video user manually interacted with the video and the video\n   * is now playing\n   *\n   * @event playing_manual\n   */\n  PLAYING_MANUAL: 'playing_manual',\n\n  /**\n   * playing_auto\n   *\n   * When the video has autoplay and the user hasn't interacted with it yet\n   *\n   * @event playing_auto\n   */\n  PLAYING_AUTO: 'playing_auto',\n\n  /**\n   * paused\n   *\n   * When the video is paused.\n   *\n   * @event paused\n   */\n  PAUSED: 'paused',\n};\n\n\n/** @enum {string} */\nexport const VideoAnalyticsEvents = {\n  /**\n   * video-ended\n   *\n   * Indicates that a video ended.\n   * @property {!VideoAnalyticsDetailsDef} details\n   * @event video-ended\n   */\n  ENDED: 'video-ended',\n\n  /**\n   * video-pause\n   *\n   * Indicates that a video paused.\n   * @property {!VideoAnalyticsDetailsDef} details\n   * @event video-pause\n   */\n  PAUSE: 'video-pause',\n\n  /**\n   * video-play\n   *\n   * Indicates that a video began to play.\n   * @property {!VideoAnalyticsDetailsDef} details\n   * @event video-play\n   */\n  PLAY: 'video-play',\n\n  /**\n   * video-session\n   *\n   * Indicates that some segment of the video played.\n   * @property {!VideoAnalyticsDetailsDef} details\n   * @event video-session\n   */\n  SESSION: 'video-session',\n\n  /**\n   * video-session-visible\n   *\n   * Indicates that some segment of the video played in the viewport.\n   * @property {!VideoAnalyticsDetailsDef} details\n   * @event video-session-visible\n   */\n  SESSION_VISIBLE: 'video-session-visible',\n\n  /**\n   * video-seconds-played\n   *\n   * Indicates that a video was playing when the\n   * video-seconds-played interval fired.\n   * @property {!VideoAnalyticsDetailsDef} details\n   * @event video-session-visible\n   */\n  SECONDS_PLAYED: 'video-seconds-played',\n};\n\n\n/**\n * @typedef {{\n *   autoplay: boolean,\n *   currentTime: number,\n *   duration: number,\n *   height: number,\n *   id: string,\n *   playedRangesJson: string,\n *   playedTotal: number,\n *   muted: boolean,\n *   state: string,\n *   width: number\n * }}\n */\nexport let VideoAnalyticsDetailsDef;\n\n\n/**\n * Helper union type to be used internally, so that the compiler treats\n * `VideoInterface` objects as `BaseElement`s, which they should be anyway.\n *\n * WARNING: Don't use this at the service level. Its `register` method should\n * only allow `VideoInterface` as a guarding measure.\n *\n * @typedef {!VideoInterface|!./base-element.BaseElement}\n */\nexport let VideoOrBaseElementDef;\n","/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */\n\n\n/**\n * This regex consists of 4 matching capture groups and one (non-matching) fallback:\n *\n * - (\\0), catch the null terminator character so it may be replaced by UTF\n *   Replacement Char\n * - ^(-)$, catch a solitary dash char, so that it may be backslash escaped.\n *   This is a separate capture group so that the legal-chars (group 4) doesn't\n *   capture it first, since that group doesn't need to escape its dash.\n * - ([\\x01-\\x1f\\x7f]|^-?[0-9]), catch a UTF control char, or any leading\n *   number (with an optional leading dash). The control or the number (but not\n *   the leading dash) must be hex-escaped,.\n * - ([\\x80-\\uffff0-9a-zA-Z_-]+), catch legal-chars, with the exception of a\n *   solitary dash, which will already have matched in group 1.\n * - [^], finally, a catch-all that allows us to backslash escape the char.\n *\n * Together, this matches everything necessary for CSS.escape.\n */\nvar regex = /(\\0)|^(-)$|([\\x01-\\x1f\\x7f]|^-?[0-9])|([\\x80-\\uffff0-9a-zA-Z_-]+)|[^]/g;\n\nfunction escaper(match, nil, dash, hexEscape, chars) {\n  // Chars is the legal-chars (group 4) capture\n  if (chars) {\n    return chars;\n  }\n  // Nil is the null terminator (group 1) capture\n  if (nil) {\n    return '\\uFFFD';\n  }\n  // Both UTF control chars, and leading numbers (with optional leading dash)\n  // (group 3) must be backslash escaped with a trailing space.  Funnily, the\n  // leading dash must not be escaped, but the number. :shrug:\n  if (hexEscape) {\n    return match.slice(0, -1) + '\\\\' + match.slice(-1).charCodeAt(0).toString(16) + ' '\n  }\n  // Finally, the solitary dash and the catch-all chars require backslash\n  // escaping.\n  return '\\\\' + match;\n}\n\n/**\n * https://drafts.csswg.org/cssom/#serialize-an-identifier\n * @param {string} value\n * @return {string}\n */\nexport function cssEscape(value) {\n  return String(value).replace(regex, escaper);\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJleHRlbnNpb25zL2FtcC1hbmFseXRpY3MvMC4xL2FjdGl2aXR5LWltcGwuanMiLCJleHRlbnNpb25zL2FtcC1hbmFseXRpY3MvMC4xL2FtcC1hbmFseXRpY3MuanMiLCJleHRlbnNpb25zL2FtcC1hbmFseXRpY3MvMC4xL2FuYWx5dGljcy1yb290LmpzIiwiZXh0ZW5zaW9ucy9hbXAtYW5hbHl0aWNzLzAuMS9iYXRjaGluZy1wbHVnaW5zLmpzIiwiZXh0ZW5zaW9ucy9hbXAtYW5hbHl0aWNzLzAuMS9jb25maWcuanMiLCJleHRlbnNpb25zL2FtcC1hbmFseXRpY3MvMC4xL2V2ZW50cy5qcyIsImV4dGVuc2lvbnMvYW1wLWFuYWx5dGljcy8wLjEvaWZyYW1lLXRyYW5zcG9ydC1tZXNzYWdlLXF1ZXVlLmpzIiwiZXh0ZW5zaW9ucy9hbXAtYW5hbHl0aWNzLzAuMS9pZnJhbWUtdHJhbnNwb3J0LXZlbmRvcnMuanMiLCJleHRlbnNpb25zL2FtcC1hbmFseXRpY3MvMC4xL2lmcmFtZS10cmFuc3BvcnQuanMiLCJleHRlbnNpb25zL2FtcC1hbmFseXRpY3MvMC4xL2luc3RydW1lbnRhdGlvbi5qcyIsImV4dGVuc2lvbnMvYW1wLWFuYWx5dGljcy8wLjEvcmVxdWVzdHMuanMiLCJleHRlbnNpb25zL2FtcC1hbmFseXRpY3MvMC4xL3Jlc291cmNlLXRpbWluZy5qcyIsImV4dGVuc2lvbnMvYW1wLWFuYWx5dGljcy8wLjEvc2FuZGJveC12YXJzLXdoaXRlbGlzdC5qcyIsImV4dGVuc2lvbnMvYW1wLWFuYWx5dGljcy8wLjEvdHJhbnNwb3J0LmpzIiwiZXh0ZW5zaW9ucy9hbXAtYW5hbHl0aWNzLzAuMS92YXJpYWJsZXMuanMiLCJleHRlbnNpb25zL2FtcC1hbmFseXRpY3MvMC4xL3ZlbmRvcnMuanMiLCJleHRlbnNpb25zL2FtcC1hbmFseXRpY3MvMC4xL3Zpc2liaWxpdHktbWFuYWdlci5qcyIsImV4dGVuc2lvbnMvYW1wLWFuYWx5dGljcy8wLjEvdmlzaWJpbGl0eS1tb2RlbC5qcyIsIm5vZGVfbW9kdWxlcy9kb2N1bWVudC1yZWdpc3Rlci1lbGVtZW50L2J1aWxkL2RvY3VtZW50LXJlZ2lzdGVyLWVsZW1lbnQucGF0Y2hlZC5qcyIsIm5vZGVfbW9kdWxlcy9wcm9taXNlLXBqcy9wcm9taXNlLmpzIiwic3JjLzNwLWZyYW1lLW1lc3NhZ2luZy5qcyIsInNyYy9hZC1oZWxwZXIuanMiLCJzcmMvY29tbW9uLXNpZ25hbHMuanMiLCJzcmMvY29uZmlnLmpzIiwic3JjL2Nvb2tpZXMuanMiLCJzcmMvZG9jdW1lbnQtcmVhZHkuanMiLCJzcmMvZG9tLmpzIiwic3JjL2VsZW1lbnQtc2VydmljZS5qcyIsInNyYy9ldmVudC1oZWxwZXItbGlzdGVuLmpzIiwic3JjL2V2ZW50LWhlbHBlci5qcyIsInNyYy9leHBlcmltZW50cy5qcyIsInNyYy9mcmllbmRseS1pZnJhbWUtZW1iZWQuanMiLCJzcmMvaWZyYW1lLWhlbHBlci5qcyIsInNyYy9pbnRlcnNlY3Rpb24tb2JzZXJ2ZXItcG9seWZpbGwuanMiLCJzcmMvanNvbi5qcyIsInNyYy9sYXlvdXQtcmVjdC5qcyIsInNyYy9sYXlvdXQuanMiLCJzcmMvbG9nLmpzIiwic3JjL21vZGUtb2JqZWN0LmpzIiwic3JjL21vZGUuanMiLCJzcmMvb2JzZXJ2YWJsZS5qcyIsInNyYy9waXhlbC5qcyIsInNyYy9wb2x5ZmlsbHMuanMiLCJzcmMvcG9seWZpbGxzL2FycmF5LWluY2x1ZGVzLmpzIiwic3JjL3BvbHlmaWxscy9jdXN0b20tZWxlbWVudHMuanMiLCJzcmMvcG9seWZpbGxzL2RvY3VtZW50LWNvbnRhaW5zLmpzIiwic3JjL3BvbHlmaWxscy9kb210b2tlbmxpc3QtdG9nZ2xlLmpzIiwic3JjL3BvbHlmaWxscy9tYXRoLXNpZ24uanMiLCJzcmMvcG9seWZpbGxzL29iamVjdC1hc3NpZ24uanMiLCJzcmMvcG9seWZpbGxzL3Byb21pc2UuanMiLCJzcmMvc2VydmljZS5qcyIsInNyYy9zZXJ2aWNlL2phbmstbWV0ZXIuanMiLCJzcmMvc2VydmljZXMuanMiLCJzcmMvc3RhdGljLXRlbXBsYXRlLmpzIiwic3JjL3N0cmluZy5qcyIsInNyYy9zdHlsZS5qcyIsInNyYy90eXBlcy5qcyIsInNyYy91cmwtcGFyc2UtcXVlcnktc3RyaW5nLmpzIiwic3JjL3VybC10cnktZGVjb2RlLXVyaS1jb21wb25lbnQuanMiLCJzcmMvdXJsLmpzIiwic3JjL3V0aWxzL2FycmF5LmpzIiwic3JjL3V0aWxzL2Jhc2U2NC5qcyIsInNyYy91dGlscy9ieXRlcy5qcyIsInNyYy91dGlscy9scnUtY2FjaGUuanMiLCJzcmMvdXRpbHMvb2JqZWN0LmpzIiwic3JjL3V0aWxzL3Byb21pc2UuanMiLCJzcmMvdXRpbHMvc2lnbmFscy5qcyIsInNyYy92aWRlby1pbnRlcmZhY2UuanMiLCJ0aGlyZF9wYXJ0eS9jc3MtZXNjYXBlL2Nzcy1lc2NhcGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OztxakJDQUE7Ozs7Ozs7Ozs7Ozs7Ozs7QUFnQkE7Ozs7O1FBaUhnQixnQyxHQUFBLGdDOztBQTVHaEI7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFHQTs7OztBQUlBLElBQU0sMEJBQTBCLENBQWhDOztBQUVBOzs7QUFHQSxJQUFNLG9CQUFvQjtBQUN4QixVQUFRLFFBRGdCO0FBRXhCLFlBQVU7QUFGYyxDQUExQjs7QUFLQTs7Ozs7O0FBTUEsSUFBSSx5QkFBSjs7QUFFQTs7Ozs7OztBQU9BLFNBQVMsc0JBQVQsQ0FBZ0MsYUFBaEMsRUFBK0MsSUFBL0MsRUFBcUQ7QUFDbkQsTUFBSSxrQkFBa0IsQ0FBdEI7O0FBRUEsTUFBSSxjQUFjLElBQWQsS0FBdUIsa0JBQWtCLE1BQTdDLEVBQXFEO0FBQ25ELHNCQUFrQix1QkFBbEI7QUFDRDs7QUFFRCxTQUFPLEtBQUssR0FBTCxDQUFTLE9BQU8sY0FBYyxJQUE5QixFQUFvQyxlQUFwQyxDQUFQO0FBQ0Q7O0lBRUssZTs7QUFFSjs7O0FB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ242Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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Ozs7QUFPQSxTQUFPLGFBakIyQjs7QUFtQmxDOzs7Ozs7O0FBT0EsUUFBTSxZQTFCNEI7O0FBNEJsQzs7Ozs7OztBQU9BLFdBQVMsZUFuQ3lCOztBQXFDbEM7Ozs7Ozs7QUFPQSxtQkFBaUIsdUJBNUNpQjs7QUE4Q2xDOzs7Ozs7OztBQVFBLGtCQUFnQjtBQXREa0IsQ0FBN0I7O0FBMERQOzs7Ozs7Ozs7Ozs7OztBQWNPLElBQUksb0VBQUo7O0FBR1A7Ozs7Ozs7OztBQVNPLElBQUksOERBQUo7Ozs7OztRQ3BhUyxTLEdBQUEsUztBQS9DaEI7O0FBR0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBaUJBLElBQUksUUFBUSx3RUFBWjs7QUFFQSxTQUFTLE9BQVQsQ0FBaUIsS0FBakIsRUFBd0IsR0FBeEIsRUFBNkIsSUFBN0IsRUFBbUMsU0FBbkMsRUFBOEMsS0FBOUMsRUFBcUQ7QUFDbkQ7QUFDQSxNQUFJLEtBQUosRUFBVztBQUNULFdBQU8sS0FBUDtBQUNEO0FBQ0Q7QUFDQSxNQUFJLEdBQUosRUFBUztBQUNQLFdBQU8sUUFBUDtBQUNEO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsTUFBSSxTQUFKLEVBQWU7QUFDYixXQUFPLE1BQU0sS0FBTixDQUFZLENBQVosRUFBZSxDQUFDLENBQWhCLElBQXFCLElBQXJCLEdBQTRCLE1BQU0sS0FBTixDQUFZLENBQUMsQ0FBYixFQUFnQixVQUFoQixDQUEyQixDQUEzQixFQUE4QixRQUE5QixDQUF1QyxFQUF2QyxDQUE1QixHQUF5RSxHQUFoRjtBQUNEO0FBQ0Q7QUFDQTtBQUNBLFNBQU8sT0FBTyxLQUFkO0FBQ0Q7O0FBRUQ7Ozs7O0FBS08sU0FBUyxTQUFULENBQW1CLEtBQW5CLEVBQTBCO0FBQy9CLFNBQU8sT0FBTyxLQUFQLEVBQWMsT0FBZCxDQUFzQixLQUF0QixFQUE2QixPQUE3QixDQUFQO0FBQ0QiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBQcm92aWRlcyBhbiBhYmlsaXR5IHRvIGNvbGxlY3QgZGF0YSBhYm91dCBhY3Rpdml0aWVzIHRoZSB1c2VyXG4gKiBoYXMgcGVyZm9ybWVkIG9uIHRoZSBwYWdlLlxuICovXG5cbmltcG9ydCB7U2VydmljZXN9IGZyb20gJy4uLy4uLy4uL3NyYy9zZXJ2aWNlcyc7XG5pbXBvcnQge2hhc093bn0gZnJvbSAnLi4vLi4vLi4vc3JjL3V0aWxzL29iamVjdCc7XG5pbXBvcnQge2xpc3Rlbn0gZnJvbSAnLi4vLi4vLi4vc3JjL2V2ZW50LWhlbHBlcic7XG5pbXBvcnQge3JlZ2lzdGVyU2VydmljZUJ1aWxkZXJGb3JEb2N9IGZyb20gJy4uLy4uLy4uL3NyYy9zZXJ2aWNlJztcblxuXG4vKipcbiAqIFRoZSBhbW91bnQgb2YgdGltZSBhZnRlciBhbiBhY3Rpdml0eSB0aGUgdXNlciBpcyBjb25zaWRlcmVkIGVuZ2FnZWQuXG4gKiBAcHJpdmF0ZSBAY29uc3Qge251bWJlcn1cbiAqL1xuY29uc3QgREVGQVVMVF9FTkdBR0VEX1NFQ09ORFMgPSA1O1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmNvbnN0IEFjdGl2aXR5RXZlbnRUeXBlID0ge1xuICBBQ1RJVkU6ICdhY3RpdmUnLFxuICBJTkFDVElWRTogJ2luYWN0aXZlJyxcbn07XG5cbi8qKlxuICogQHR5cGVkZWYge3tcbiAqICAgdHlwZTogc3RyaW5nLFxuICogICB0aW1lOiBudW1iZXJcbiAqIH19XG4gKi9cbmxldCBBY3Rpdml0eUV2ZW50RGVmO1xuXG4vKipcbiAqIEZpbmQgdGhlIGVuZ2FnZWQgdGltZSBiZXR3ZWVuIHRoZSBldmVudCBhbmQgdGhlIHRpbWUgKGV4Y2x1c2l2ZSBvZiB0aGUgdGltZSlcbiAqIEBwYXJhbSB7QWN0aXZpdHlFdmVudERlZn0gYWN0aXZpdHlFdmVudFxuICogQHBhcmFtIHtudW1iZXJ9IHRpbWVcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGZpbmRFbmdhZ2VkVGltZUJldHdlZW4oYWN0aXZpdHlFdmVudCwgdGltZSkge1xuICBsZXQgZW5nYWdlbWVudEJvbnVzID0gMDtcblxuICBpZiAoYWN0aXZpdHlFdmVudC50eXBlID09PSBBY3Rpdml0eUV2ZW50VHlwZS5BQ1RJVkUpIHtcbiAgICBlbmdhZ2VtZW50Qm9udXMgPSBERUZBVUxUX0VOR0FHRURfU0VDT05EUztcbiAgfVxuXG4gIHJldHVybiBNYXRoLm1pbih0aW1lIC0gYWN0aXZpdHlFdmVudC50aW1lLCBlbmdhZ2VtZW50Qm9udXMpO1xufVxuXG5jbGFzcyBBY3Rpdml0eUhpc3Rvcnkge1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIEFjdGl2aXR5SGlzdG9yeS5cbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8qKiBAcHJpdmF0ZSB7bnVtYmVyfSAqL1xuICAgIHRoaXMudG90YWxFbmdhZ2VkVGltZV8gPSAwO1xuXG4gICAgLyoqXG4gICAgICogcHJldkFjdGl2aXR5RXZlbnRfIHJlbWFpbnMgdW5kZWZpbmVkIHVudGlsIHRoZSBmaXJzdCB2YWxpZCBwdXNoIGNhbGwuXG4gICAgICogQHByaXZhdGUge0FjdGl2aXR5RXZlbnREZWZ8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMucHJldkFjdGl2aXR5RXZlbnRfID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIEluZGljYXRlIHRoYXQgYW4gYWN0aXZpdHkgdG9vayBwbGFjZSBhdCB0aGUgZ2l2ZW4gdGltZS5cbiAgICogQHBhcmFtIHtBY3Rpdml0eUV2ZW50RGVmfSBhY3Rpdml0eUV2ZW50XG4gICAqL1xuICBwdXNoKGFjdGl2aXR5RXZlbnQpIHtcbiAgICBpZiAoIXRoaXMucHJldkFjdGl2aXR5RXZlbnRfKSB7XG4gICAgICB0aGlzLnByZXZBY3Rpdml0eUV2ZW50XyA9IGFjdGl2aXR5RXZlbnQ7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucHJldkFjdGl2aXR5RXZlbnRfLnRpbWUgPCBhY3Rpdml0eUV2ZW50LnRpbWUpIHtcbiAgICAgIHRoaXMudG90YWxFbmdhZ2VkVGltZV8gKz1cbiAgICAgICAgICBmaW5kRW5nYWdlZFRpbWVCZXR3ZWVuKHRoaXMucHJldkFjdGl2aXR5RXZlbnRfLCBhY3Rpdml0eUV2ZW50LnRpbWUpO1xuICAgICAgdGhpcy5wcmV2QWN0aXZpdHlFdmVudF8gPSBhY3Rpdml0eUV2ZW50O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHRvdGFsIGVuZ2FnZWQgdGltZSB1cCB0byB0aGUgZ2l2ZW4gdGltZSByZWNvcmRlZCBpblxuICAgKiBBY3Rpdml0eUhpc3RvcnkuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIGdldFRvdGFsRW5nYWdlZFRpbWUodGltZSkge1xuICAgIGxldCB0b3RhbEVuZ2FnZWRUaW1lID0gMDtcbiAgICBpZiAodGhpcy5wcmV2QWN0aXZpdHlFdmVudF8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgdG90YWxFbmdhZ2VkVGltZSA9IHRoaXMudG90YWxFbmdhZ2VkVGltZV8gK1xuICAgICAgICAgIGZpbmRFbmdhZ2VkVGltZUJldHdlZW4odGhpcy5wcmV2QWN0aXZpdHlFdmVudF8sIHRpbWUpO1xuICAgIH1cbiAgICByZXR1cm4gdG90YWxFbmdhZ2VkVGltZTtcbiAgfVxuXG59XG5cblxuLyoqXG4gKiBBcnJheSBvZiBldmVudCB0eXBlcyB3aGljaCB3aWxsIGJlIGxpc3RlbmVkIGZvciBvbiB0aGUgZG9jdW1lbnQgdG8gaW5kaWNhdGVcbiAqIGFjdGl2aXR5LiBPdGhlciBhY3Rpdml0aWVzIGFyZSBhbHNvIG9ic2VydmVkIG9uIHRoZSBWaWV3ZXIgYW5kIFZpZXdwb3J0XG4gKiBvYmplY3RzLiBTZWUge0BsaW5rIHNldFVwQWN0aXZpdHlMaXN0ZW5lcnNffSBmb3IgbGlzdGVuZXIgaW1wbGVtZW50YXRpb24uXG4gKiBAcHJpdmF0ZSBAY29uc3Qge0FycmF5PHN0cmluZz59XG4gKi9cbmNvbnN0IEFDVElWRV9FVkVOVF9UWVBFUyA9IFtcbiAgJ21vdXNlZG93bicsICdtb3VzZXVwJywgJ21vdXNlbW92ZScsICdrZXlkb3duJywgJ2tleXVwJyxcbl07XG5cbi8qKlxuICogQHBhcmFtIHshLi4vLi4vLi4vc3JjL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBhbXBEb2NcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluc3RhbGxBY3Rpdml0eVNlcnZpY2VGb3JUZXN0aW5nKGFtcERvYykge1xuICByZWdpc3RlclNlcnZpY2VCdWlsZGVyRm9yRG9jKGFtcERvYywgJ2FjdGl2aXR5JywgQWN0aXZpdHkpO1xufVxuXG5leHBvcnQgY2xhc3MgQWN0aXZpdHkge1xuXG4gIC8qKlxuICAgKiBBY3Rpdml0eSB0cmFja3MgYmFzaWMgdXNlciBhY3Rpdml0eSBvbiB0aGUgcGFnZS5cbiAgICogIC0gTGlzdGVuZXJzIGFyZSBub3QgcmVnaXN0ZXJlZCBvbiB0aGUgYWN0aXZpdHkgZXZlbnQgdHlwZXMgdW50aWwgdGhlXG4gICAqICAgIFZpZXdlcidzIGB3aGVuRmlyc3RWaXNpYmxlYCBpcyByZXNvbHZlZC5cbiAgICogIC0gV2hlbiB0aGUgYHdoZW5GaXJzdFZpc2libGVgIG9mIFZpZXdlciBpcyByZXNvbHZlZCwgYSBmaXJzdCBhY3Rpdml0eVxuICAgKiAgICBpcyByZWNvcmRlZC5cbiAgICogIC0gVGhlIGZpcnN0IGFjdGl2aXR5IGluIGFueSBzZWNvbmQgY2F1c2VzIGFsbCBvdGhlciBhY3Rpdml0aWVzIHRvIGJlXG4gICAqICAgIGlnbm9yZWQuIFRoaXMgaXMgc2ltaWxhciB0byBkZWJvdW5jZSBmdW5jdGlvbmFsaXR5IHNpbmNlIHNvbWUgZXZlbnRzXG4gICAqICAgIChlLmcuIHNjcm9sbCkgY291bGQgb2NjdXIgaW4gcmFwaWQgc3VjY2Vzc2lvbi5cbiAgICogIC0gSW4gYW55IG9uZSBzZWNvbmQgcGVyaW9kLCBhY3RpdmUgZXZlbnRzIG9yIGluYWN0aXZlIGV2ZW50cyBjYW4gb3ZlcnJpZGVcbiAgICogICAgZWFjaCBvdGhlci4gV2hpY2hldmVyIHR5cGUgb2NjdXJlZCBsYXN0IGhhcyBwcmVjZWRlbmNlLlxuICAgKiAgLSBBY3RpdmUgZXZlbnRzIGdpdmUgYSA1IHNlY29uZCBcImJvbnVzXCIgdG8gZW5nYWdlZCB0aW1lLlxuICAgKiAgLSBJbmFjdGl2ZSBldmVudHMgY2F1c2UgYW4gaW1tZWRpYXRlIHN0b3AgdG8gdGhlIGVuZ2FnZWQgdGltZSBib251cyBvZlxuICAgKiAgICBhbnkgcHJldmlvdXMgYWN0aXZpdHkgZXZlbnQuXG4gICAqICAtIEF0IGFueSBwb2ludCBhZnRlciBpbnN0YW50aWF0aW9uLCBgZ2V0VG90YWxFbmdhZ2VkVGltZWAgY2FuIGJlIHVzZWRcbiAgICogICAgdG8gZ2V0IHRoZSBlbmdhZ2UgdGltZSB1cCB0byB0aGUgdGltZSB0aGUgZnVuY3Rpb24gaXMgY2FsbGVkLiBJZlxuICAgKiAgICBgd2hlbkZpcnN0VmlzaWJsZWAgaGFzIG5vdCB5ZXQgcmVzb2x2ZWQsIGVuZ2FnZWQgdGltZSBpcyAwLlxuICAgKiBAcGFyYW0geyEuLi8uLi8uLi9zcmMvc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGFtcGRvY1xuICAgKi9cbiAgY29uc3RydWN0b3IoYW1wZG9jKSB7XG4gICAgLyoqIEBjb25zdCB7IS4uLy4uLy4uL3NyYy9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gYW1wZG9jICovXG4gICAgdGhpcy5hbXBkb2MgPSBhbXBkb2M7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtmdW5jdGlvbigpfSAqL1xuICAgIHRoaXMuYm91bmRTdG9wSWdub3JlXyA9IHRoaXMuc3RvcElnbm9yZV8uYmluZCh0aGlzKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge2Z1bmN0aW9uKCl9ICovXG4gICAgdGhpcy5ib3VuZEhhbmRsZUFjdGl2aXR5XyA9IHRoaXMuaGFuZGxlQWN0aXZpdHlfLmJpbmQodGhpcyk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtmdW5jdGlvbigpfSAqL1xuICAgIHRoaXMuYm91bmRIYW5kbGVWaXNpYmlsaXR5Q2hhbmdlXyA9IHRoaXMuaGFuZGxlVmlzaWJpbGl0eUNoYW5nZV8uYmluZCh0aGlzKTtcblxuICAgIC8qKlxuICAgICAqIENvbnRhaW5zIHRoZSBpbmNyZW1lbnRhbEVuZ2FnZWRUaW1lIHRpbWVzdGFtcHMgZm9yIG5hbWVkIHRyaWdnZXJzLlxuICAgICAqIEBwcml2YXRlIHtPYmplY3Q8c3RyaW5nLCBudW1iZXI+fVxuICAgICAqL1xuICAgIHRoaXMudG90YWxFbmdhZ2VkVGltZUJ5VHJpZ2dlcl8gPSB7XG4gICAgICAvKlxuICAgICAgICogXCIkdHJpZ2dlck5hbWVcIiA6ICR7bGFzdFJlcXVlc3RUaW1lc3RhbXB9XG4gICAgICAqL1xuICAgIH07XG5cbiAgICAvKiogQHByaXZhdGUge0FycmF5PCFVbmxpc3RlbkRlZj59ICovXG4gICAgdGhpcy51bmxpc3RlbkZ1bmNzXyA9IFtdO1xuXG4gICAgLyoqIEBwcml2YXRlIHtib29sZWFufSAqL1xuICAgIHRoaXMuaWdub3JlQWN0aXZpdHlfID0gZmFsc2U7XG5cbiAgICAvKiogQHByaXZhdGUge2Jvb2xlYW59ICovXG4gICAgdGhpcy5pZ25vcmVJbmFjdGl2ZV8gPSBmYWxzZTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFBY3Rpdml0eUhpc3Rvcnl9ICovXG4gICAgdGhpcy5hY3Rpdml0eUhpc3RvcnlfID0gbmV3IEFjdGl2aXR5SGlzdG9yeSgpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uLy4uLy4uL3NyYy9zZXJ2aWNlL3ZpZXdlci1pbXBsLlZpZXdlcn0gKi9cbiAgICB0aGlzLnZpZXdlcl8gPSBTZXJ2aWNlcy52aWV3ZXJGb3JEb2ModGhpcy5hbXBkb2MpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uLy4uLy4uL3NyYy9zZXJ2aWNlL3ZpZXdwb3J0L3ZpZXdwb3J0LWltcGwuVmlld3BvcnR9ICovXG4gICAgdGhpcy52aWV3cG9ydF8gPSBTZXJ2aWNlcy52aWV3cG9ydEZvckRvYyh0aGlzLmFtcGRvYyk7XG5cbiAgICB0aGlzLnZpZXdlcl8ud2hlbkZpcnN0VmlzaWJsZSgpLnRoZW4odGhpcy5zdGFydF8uYmluZCh0aGlzKSk7XG4gIH1cblxuICAvKiogQHByaXZhdGUgKi9cbiAgc3RhcnRfKCkge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge251bWJlcn0gKi9cbiAgICB0aGlzLnN0YXJ0VGltZV8gPSBEYXRlLm5vdygpO1xuICAgIC8vIHJlY29yZCBhbiBhY3Rpdml0eSBzaW5jZSB0aGlzIGlzIHdoZW4gdGhlIHBhZ2UgYmVjYW1lIHZpc2libGVcbiAgICB0aGlzLmhhbmRsZUFjdGl2aXR5XygpO1xuICAgIHRoaXMuc2V0VXBBY3Rpdml0eUxpc3RlbmVyc18oKTtcbiAgfVxuXG4gIC8qKiBAcHJpdmF0ZSAqL1xuICBnZXRUaW1lU2luY2VTdGFydF8oKSB7XG4gICAgY29uc3QgdGltZVNpbmNlU3RhcnQgPSBEYXRlLm5vdygpIC0gdGhpcy5zdGFydFRpbWVfO1xuICAgIC8vIEVuc3VyZSB0aGF0IGEgbmVnYXRpdmUgdGltZSBpcyBuZXZlciByZXR1cm5lZC4gVGhpcyBtYXkgY2F1c2UgbG9zcyBvZlxuICAgIC8vIGRhdGEgaWYgdGhlcmUgaXMgYSB0aW1lIGNoYW5nZSBkdXJpbmcgdGhlIHNlc3Npb24gYnV0IGl0IHdpbGwgZGVjcmVhc2VcbiAgICAvLyB0aGUgbGlrZWx5aG9vZCBvZiBlcnJvcnMgaW4gdGhhdCBzaXR1YXRpb24uXG4gICAgcmV0dXJuICh0aW1lU2luY2VTdGFydCA+IDAgPyB0aW1lU2luY2VTdGFydCA6IDApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0byBhIHN0YXRlIHdoZXJlIG5laXRoZXIgYWN0aXZpdGllcyBvciBpbmFjdGl2aXR5IGV2ZW50cyBhcmVcbiAgICogaWdub3JlZCB3aGVuIHRoYXQgZXZlbnQgdHlwZSBpcyBmaXJlZC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN0b3BJZ25vcmVfKCkge1xuICAgIHRoaXMuaWdub3JlQWN0aXZpdHlfID0gZmFsc2U7XG4gICAgdGhpcy5pZ25vcmVJbmFjdGl2ZV8gPSBmYWxzZTtcbiAgfVxuXG4gIC8qKiBAcHJpdmF0ZSAqL1xuICBzZXRVcEFjdGl2aXR5TGlzdGVuZXJzXygpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IEFDVElWRV9FVkVOVF9UWVBFUy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy51bmxpc3RlbkZ1bmNzXy5wdXNoKGxpc3Rlbih0aGlzLmFtcGRvYy5nZXRSb290Tm9kZSgpLFxuICAgICAgICAgIEFDVElWRV9FVkVOVF9UWVBFU1tpXSwgdGhpcy5ib3VuZEhhbmRsZUFjdGl2aXR5XykpO1xuICAgIH1cblxuICAgIHRoaXMudW5saXN0ZW5GdW5jc18ucHVzaChcbiAgICAgICAgdGhpcy52aWV3ZXJfLm9uVmlzaWJpbGl0eUNoYW5nZWQodGhpcy5ib3VuZEhhbmRsZVZpc2liaWxpdHlDaGFuZ2VfKSk7XG5cbiAgICAvLyBWaWV3cG9ydC5vblNjcm9sbCBkb2VzIG5vdCByZXR1cm4gYW4gdW5saXN0ZW4gZnVuY3Rpb24uXG4gICAgLy8gVE9ETyhicml0aWNlKTogSWYgVmlld3BvcnQgaXMgdXBkYXRlZCB0byByZXR1cm4gYW4gdW5saXN0ZW4gZnVuY3Rpb24sXG4gICAgLy8gdXBkYXRlIHRoaXMgdG8gY2FwdHVyZSB0aGUgdW5saXN0ZW4gZnVuY3Rpb24uXG4gICAgdGhpcy52aWV3cG9ydF8ub25TY3JvbGwodGhpcy5ib3VuZEhhbmRsZUFjdGl2aXR5Xyk7XG4gIH1cblxuICAvKiogQHByaXZhdGUgKi9cbiAgaGFuZGxlQWN0aXZpdHlfKCkge1xuICAgIGlmICh0aGlzLmlnbm9yZUFjdGl2aXR5Xykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmlnbm9yZUFjdGl2aXR5XyA9IHRydWU7XG4gICAgdGhpcy5pZ25vcmVJbmFjdGl2ZV8gPSBmYWxzZTtcblxuICAgIHRoaXMuaGFuZGxlQWN0aXZpdHlFdmVudF8oQWN0aXZpdHlFdmVudFR5cGUuQUNUSVZFKTtcbiAgfVxuXG4gIC8qKiBAcHJpdmF0ZSAqL1xuICBoYW5kbGVJbmFjdGl2ZV8oKSB7XG4gICAgaWYgKHRoaXMuaWdub3JlSW5hY3RpdmVfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuaWdub3JlSW5hY3RpdmVfID0gdHJ1ZTtcbiAgICB0aGlzLmlnbm9yZUFjdGl2aXR5XyA9IGZhbHNlO1xuXG4gICAgdGhpcy5oYW5kbGVBY3Rpdml0eUV2ZW50XyhBY3Rpdml0eUV2ZW50VHlwZS5JTkFDVElWRSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtBY3Rpdml0eUV2ZW50VHlwZX0gdHlwZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlQWN0aXZpdHlFdmVudF8odHlwZSkge1xuICAgIGNvbnN0IHRpbWVTaW5jZVN0YXJ0ID0gdGhpcy5nZXRUaW1lU2luY2VTdGFydF8oKTtcbiAgICBjb25zdCBzZWNvbmRLZXkgPSBNYXRoLmZsb29yKHRpbWVTaW5jZVN0YXJ0IC8gMTAwMCk7XG4gICAgY29uc3QgdGltZVRvV2FpdCA9IDEwMDAgLSAodGltZVNpbmNlU3RhcnQgJSAxMDAwKTtcblxuICAgIC8vIHN0b3AgaWdub3JpbmcgYWN0aXZpdHkgYXQgdGhlIHN0YXJ0IG9mIHRoZSBuZXh0IGFjdGl2aXR5IGJ1Y2tldFxuICAgIHNldFRpbWVvdXQodGhpcy5ib3VuZFN0b3BJZ25vcmVfLCB0aW1lVG9XYWl0KTtcblxuICAgIHRoaXMuYWN0aXZpdHlIaXN0b3J5Xy5wdXNoKHtcbiAgICAgIHR5cGUsXG4gICAgICB0aW1lOiBzZWNvbmRLZXksXG4gICAgfSk7XG4gIH1cblxuICAvKiogQHByaXZhdGUgKi9cbiAgaGFuZGxlVmlzaWJpbGl0eUNoYW5nZV8oKSB7XG4gICAgaWYgKHRoaXMudmlld2VyXy5pc1Zpc2libGUoKSkge1xuICAgICAgdGhpcy5oYW5kbGVBY3Rpdml0eV8oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5oYW5kbGVJbmFjdGl2ZV8oKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGFsbCBsaXN0ZW5lcnMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgQWN0aXZpdHkgaW5zdGFuY2UuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB1bmxpc3Rlbl8oKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnVubGlzdGVuRnVuY3NfLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCB1bmxpc3RlbkZ1bmMgPSB0aGlzLnVubGlzdGVuRnVuY3NfW2ldO1xuICAgICAgLy8gVE9ETyhicml0aWNlKTogRHVlIHRvIGVzbGludCB0eXBlY2hlY2tpbmcsIHRoaXMgY2hlY2sgbWF5IG5vdCBiZVxuICAgICAgLy8gbmVjZXNzYXJ5LlxuICAgICAgaWYgKHR5cGVvZiB1bmxpc3RlbkZ1bmMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdW5saXN0ZW5GdW5jKCk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMudW5saXN0ZW5GdW5jc18gPSBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAgICovXG4gIGNsZWFudXBfKCkge1xuICAgIHRoaXMudW5saXN0ZW5fKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRvdGFsIGVuZ2FnZWQgdGltZSBzaW5jZSB0aGUgcGFnZSBiZWNhbWUgdmlzaWJsZS5cbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0VG90YWxFbmdhZ2VkVGltZSgpIHtcbiAgICBjb25zdCBzZWNvbmRzU2luY2VTdGFydCA9IE1hdGguZmxvb3IodGhpcy5nZXRUaW1lU2luY2VTdGFydF8oKSAvIDEwMDApO1xuICAgIHJldHVybiB0aGlzLmFjdGl2aXR5SGlzdG9yeV8uZ2V0VG90YWxFbmdhZ2VkVGltZShzZWNvbmRzU2luY2VTdGFydCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBpbmNyZW1lbnRhbCBlbmdhZ2VkIHRpbWUgc2luY2UgdGhlIGxhc3QgcHVzaCBhbmQgcmVzZXQgaXQgaWYgYXNrZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IHJlc2V0XG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIGdldEluY3JlbWVudGFsRW5nYWdlZFRpbWUobmFtZSwgcmVzZXQgPSB0cnVlKSB7XG4gICAgaWYgKCFoYXNPd24odGhpcy50b3RhbEVuZ2FnZWRUaW1lQnlUcmlnZ2VyXywgbmFtZSkpIHtcbiAgICAgIGlmIChyZXNldCkge1xuICAgICAgICB0aGlzLnRvdGFsRW5nYWdlZFRpbWVCeVRyaWdnZXJfW25hbWVdID0gdGhpcy5nZXRUb3RhbEVuZ2FnZWRUaW1lKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5nZXRUb3RhbEVuZ2FnZWRUaW1lKCk7XG4gICAgfVxuICAgIGNvbnN0IGN1cnJlbnRJbmNyZW1lbnRhbEVuZ2FnZWRUaW1lID1cbiAgICAgIHRoaXMudG90YWxFbmdhZ2VkVGltZUJ5VHJpZ2dlcl9bbmFtZV07XG4gICAgaWYgKHJlc2V0ID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0VG90YWxFbmdhZ2VkVGltZSgpIC0gY3VycmVudEluY3JlbWVudGFsRW5nYWdlZFRpbWU7XG4gICAgfVxuICAgIHRoaXMudG90YWxFbmdhZ2VkVGltZUJ5VHJpZ2dlcl9bbmFtZV0gPSB0aGlzLmdldFRvdGFsRW5nYWdlZFRpbWUoKTtcbiAgICByZXR1cm4gdGhpcy50b3RhbEVuZ2FnZWRUaW1lQnlUcmlnZ2VyX1tuYW1lXSAtXG4gICAgICBjdXJyZW50SW5jcmVtZW50YWxFbmdhZ2VkVGltZTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7QWN0aXZpdHl9IGZyb20gJy4vYWN0aXZpdHktaW1wbCc7XG5pbXBvcnQge0FuYWx5dGljc0NvbmZpZywgbWVyZ2VPYmplY3RzfSBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQge0FuYWx5dGljc0V2ZW50VHlwZX0gZnJvbSAnLi9ldmVudHMnO1xuaW1wb3J0IHtcbiAgRXhwYW5zaW9uT3B0aW9ucyxcbiAgaW5zdGFsbFZhcmlhYmxlU2VydmljZSxcbiAgdmFyaWFibGVTZXJ2aWNlRm9yLFxufSBmcm9tICcuL3ZhcmlhYmxlcyc7XG5pbXBvcnQge0lmcmFtZVRyYW5zcG9ydCwgZ2V0SWZyYW1lVHJhbnNwb3J0U2NyaXB0VXJsfSBmcm9tICcuL2lmcmFtZS10cmFuc3BvcnQnO1xuaW1wb3J0IHtcbiAgSW5zdHJ1bWVudGF0aW9uU2VydmljZSxcbiAgaW5zdHJ1bWVudGF0aW9uU2VydmljZVByb21pc2VGb3JEb2MsXG59IGZyb20gJy4vaW5zdHJ1bWVudGF0aW9uJztcbmltcG9ydCB7TGF5b3V0UHJpb3JpdHl9IGZyb20gJy4uLy4uLy4uL3NyYy9sYXlvdXQnO1xuaW1wb3J0IHtcbiAgUmVxdWVzdEhhbmRsZXIsXG59IGZyb20gJy4vcmVxdWVzdHMnO1xuaW1wb3J0IHtTZXJ2aWNlc30gZnJvbSAnLi4vLi4vLi4vc3JjL3NlcnZpY2VzJztcbmltcG9ydCB7ZGV2LCByZXRocm93QXN5bmMsIHVzZXJ9IGZyb20gJy4uLy4uLy4uL3NyYy9sb2cnO1xuaW1wb3J0IHtkaWN0LCBoYXNPd24sIG1hcH0gZnJvbSAnLi4vLi4vLi4vc3JjL3V0aWxzL29iamVjdCc7XG5pbXBvcnQge2V4cGFuZFRlbXBsYXRlfSBmcm9tICcuLi8uLi8uLi9zcmMvc3RyaW5nJztcbmltcG9ydCB7Z2V0QW1wQWRSZXNvdXJjZUlkfSBmcm9tICcuLi8uLi8uLi9zcmMvYWQtaGVscGVyJztcbmltcG9ydCB7Z2V0TW9kZX0gZnJvbSAnLi4vLi4vLi4vc3JjL21vZGUnO1xuaW1wb3J0IHtnZXRUb3BXaW5kb3d9IGZyb20gJy4uLy4uLy4uL3NyYy9zZXJ2aWNlJztcbmltcG9ydCB7aXNBcnJheX0gZnJvbSAnLi4vLi4vLi4vc3JjL3R5cGVzJztcbmltcG9ydCB7aXNFbnVtVmFsdWV9IGZyb20gJy4uLy4uLy4uL3NyYy90eXBlcyc7XG5pbXBvcnQge3NlbmRSZXF1ZXN0LCBzZW5kUmVxdWVzdFVzaW5nSWZyYW1lfSBmcm9tICcuL3RyYW5zcG9ydCc7XG5pbXBvcnQge3NlcmlhbGl6ZVJlc291cmNlVGltaW5nfSBmcm9tICcuL3Jlc291cmNlLXRpbWluZyc7XG5pbXBvcnQge3RvZ2dsZX0gZnJvbSAnLi4vLi4vLi4vc3JjL3N0eWxlJztcblxuY29uc3QgVEFHID0gJ2FtcC1hbmFseXRpY3MnO1xuXG5jb25zdCBNQVhfUkVQTEFDRVMgPSAxNjsgLy8gVGhlIG1heGltdW0gbnVtYmVyIG9mIGVudHJpZXMgaW4gYSBleHRyYVVybFBhcmFtc1JlcGxhY2VNYXBcblxuY29uc3QgV0hJVEVMSVNUX0VWRU5UX0lOX1NBTkRCT1ggPSBbXG4gIEFuYWx5dGljc0V2ZW50VHlwZS5WSVNJQkxFLFxuICBBbmFseXRpY3NFdmVudFR5cGUuSElEREVOLFxuXTtcblxuZXhwb3J0IGNsYXNzIEFtcEFuYWx5dGljcyBleHRlbmRzIEFNUC5CYXNlRWxlbWVudCB7XG5cbiAgLyoqIEBwYXJhbSB7IUFtcEVsZW1lbnR9IGVsZW1lbnQgKi9cbiAgY29uc3RydWN0b3IoZWxlbWVudCkge1xuICAgIHN1cGVyKGVsZW1lbnQpO1xuXG4gICAgLyoqIEBwcml2YXRlIHshUHJvbWlzZX0gKi9cbiAgICB0aGlzLmNvbnNlbnRQcm9taXNlXyA9IFByb21pc2UucmVzb2x2ZSgpO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGh0bWwgaWQgb2YgdGhlIGBhbXAtdXNlci1ub3RpZmljYXRpb25gIGVsZW1lbnQuXG4gICAgICogQHByaXZhdGUgez9zdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5jb25zZW50Tm90aWZpY2F0aW9uSWRfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLmlzU2FuZGJveF8gPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlIHtPYmplY3Q8c3RyaW5nLCBSZXF1ZXN0SGFuZGxlcj59IEEgbWFwIG9mIHJlcXVlc3QgaGFuZGxlciB3aXRoIHJlcXVlc3RzXG4gICAgICovXG4gICAgdGhpcy5yZXF1ZXN0c18gPSB7fTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlIHtKc29uT2JqZWN0fVxuICAgICAqL1xuICAgIHRoaXMuY29uZmlnXyA9IGRpY3QoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7Py4vaW5zdHJ1bWVudGF0aW9uLkluc3RydW1lbnRhdGlvblNlcnZpY2V9ICovXG4gICAgdGhpcy5pbnN0cnVtZW50YXRpb25fID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7Py4vaW5zdHJ1bWVudGF0aW9uLkFuYWx5dGljc0dyb3VwfSAqL1xuICAgIHRoaXMuYW5hbHl0aWNzR3JvdXBfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7IS4vdmFyaWFibGVzLlZhcmlhYmxlU2VydmljZX0gKi9cbiAgICB0aGlzLnZhcmlhYmxlU2VydmljZV8gPSB2YXJpYWJsZVNlcnZpY2VGb3IodGhpcy53aW4pO1xuXG4gICAgLyoqIEBwcml2YXRlIHshLi4vLi4vLi4vc3JjL3NlcnZpY2UvY3J5cHRvLWltcGwuQ3J5cHRvfSAqL1xuICAgIHRoaXMuY3J5cHRvU2VydmljZV8gPSBTZXJ2aWNlcy5jcnlwdG9Gb3IodGhpcy53aW4pO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/UHJvbWlzZX0gKi9cbiAgICB0aGlzLmluaVByb21pc2VfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P0lmcmFtZVRyYW5zcG9ydH0gKi9cbiAgICB0aGlzLmlmcmFtZVRyYW5zcG9ydF8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHtib29sZWFufSAqL1xuICAgIHRoaXMuaXNJbmFib3hfID0gZ2V0TW9kZSh0aGlzLndpbikucnVudGltZSA9PSAnaW5hYm94JztcblxuICAgIC8qKlxuICAgICAqIE1heGltdW0gdGltZSAoc2luY2UgZXBvY2gpIHRvIHJlcG9ydCByZXNvdXJjZSB0aW1pbmcgbWV0cmljcy5cbiAgICAgKiBXZSBzdG9wIHJlcG9ydGluZyBhZnRlciAxIG1pbnV0ZS5cbiAgICAgKiBAcHJpdmF0ZSBAY29uc3Qge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm1heFJlc291cmNlVGltaW5nUmVwb3J0aW5nVGltZV8gPSBEYXRlLm5vdygpICsgKDYwICogMTAwMCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldExheW91dFByaW9yaXR5KCkge1xuICAgIC8vIExvYWQgaW1tZWRpYXRlbHkgaWYgaW5hYm94LCBvdGhlcndpc2UgYWZ0ZXIgb3RoZXIgY29udGVudC5cbiAgICByZXR1cm4gdGhpcy5pc0luYWJveF8gPyBMYXlvdXRQcmlvcml0eS5DT05URU5UIDogTGF5b3V0UHJpb3JpdHkuTUVUQURBVEE7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGlzQWx3YXlzRml4ZWQoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGlzTGF5b3V0U3VwcG9ydGVkKHVudXNlZExheW91dCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBidWlsZENhbGxiYWNrKCkge1xuICAgIHRoaXMuaXNTYW5kYm94XyA9IHRoaXMuZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ3NhbmRib3gnKTtcblxuICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcblxuICAgIHRoaXMuY29uc2VudE5vdGlmaWNhdGlvbklkXyA9IHRoaXMuZWxlbWVudFxuICAgICAgICAuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbnNlbnQtbm90aWZpY2F0aW9uLWlkJyk7XG5cbiAgICBpZiAodGhpcy5jb25zZW50Tm90aWZpY2F0aW9uSWRfICE9IG51bGwpIHtcbiAgICAgIHRoaXMuY29uc2VudFByb21pc2VfID1cbiAgICAgICAgICBTZXJ2aWNlcy51c2VyTm90aWZpY2F0aW9uTWFuYWdlckZvckRvYyh0aGlzLmVsZW1lbnQpXG4gICAgICAgICAgICAgIC50aGVuKHNlcnZpY2UgPT4gc2VydmljZS5nZXQoZGV2KCkuYXNzZXJ0U3RyaW5nKFxuICAgICAgICAgICAgICAgICAgdGhpcy5jb25zZW50Tm90aWZpY2F0aW9uSWRfKSkpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0cmlnZ2VyJykgPT0gJ2ltbWVkaWF0ZScpIHtcbiAgICAgIHRoaXMuZW5zdXJlSW5pdGlhbGl6ZWRfKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBsYXlvdXRDYWxsYmFjaygpIHtcbiAgICAvLyBOb3cgdGhhdCB3ZSBhcmUgcmVuZGVyZWQsIHN0b3AgcmVuZGVyaW5nIHRoZSBlbGVtZW50IHRvIHJlZHVjZVxuICAgIC8vIHJlc291cmNlIGNvbnN1bXB0aW9uLlxuICAgIHJldHVybiB0aGlzLmVuc3VyZUluaXRpYWxpemVkXygpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBkZXRhY2hlZENhbGxiYWNrKCkge1xuICAgIGlmICh0aGlzLmFuYWx5dGljc0dyb3VwXykge1xuICAgICAgdGhpcy5hbmFseXRpY3NHcm91cF8uZGlzcG9zZSgpO1xuICAgICAgdGhpcy5hbmFseXRpY3NHcm91cF8gPSBudWxsO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucmVxdWVzdHNfLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnJlcXVlc3RzX1tpXS5kaXNwb3NlKCk7XG4gICAgICBkZWxldGUgdGhpcy5yZXF1ZXN0c19baV07XG4gICAgfVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICByZXN1bWVDYWxsYmFjaygpIHtcbiAgICBpZiAodGhpcy5jb25maWdfWyd0cmFuc3BvcnQnXSAmJiB0aGlzLmNvbmZpZ19bJ3RyYW5zcG9ydCddWydpZnJhbWUnXSkge1xuICAgICAgdGhpcy5pbml0SWZyYW1lVHJhbnNwb3J0XygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgdW5sYXlvdXRDYWxsYmFjaygpIHtcbiAgICBpZiAoU2VydmljZXMudmlld2VyRm9yRG9jKHRoaXMuZ2V0QW1wRG9jKCkpLmlzVmlzaWJsZSgpKSB7XG4gICAgICAvLyBhbXAtYW5hbHl0aWNzIHRhZyB3YXMganVzdCBzZXQgdG8gZGlzcGxheTpub25lLiBQYWdlIGlzIHN0aWxsIGxvYWRlZC5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBQYWdlIHdhcyB1bmxvYWRlZCAtIGZyZWUgdXAgb3duZWQgcmVzb3VyY2VzLlxuICAgIGlmICh0aGlzLmlmcmFtZVRyYW5zcG9ydF8pIHtcbiAgICAgIHRoaXMuaWZyYW1lVHJhbnNwb3J0Xy5kZXRhY2goKTtcbiAgICAgIHRoaXMuaWZyYW1lVHJhbnNwb3J0XyA9IG51bGw7XG4gICAgfVxuICAgIHJldHVybiBzdXBlci51bmxheW91dENhbGxiYWNrKCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBlbnN1cmVJbml0aWFsaXplZF8oKSB7XG4gICAgaWYgKHRoaXMuaW5pUHJvbWlzZV8pIHtcbiAgICAgIHJldHVybiB0aGlzLmluaVByb21pc2VfO1xuICAgIH1cbiAgICB0b2dnbGUodGhpcy5lbGVtZW50LCBmYWxzZSk7XG4gICAgdGhpcy5pbmlQcm9taXNlXyA9XG4gICAgICAgIFNlcnZpY2VzLnZpZXdlckZvckRvYyh0aGlzLmdldEFtcERvYygpKS53aGVuRmlyc3RWaXNpYmxlKClcbiAgICAgICAgICAgIC8vIFJ1ZGltZW50YXJ5IFwiaWRsZVwiIHNpZ25hbC5cbiAgICAgICAgICAgIC50aGVuKCgpID0+IFNlcnZpY2VzLnRpbWVyRm9yKHRoaXMud2luKS5wcm9taXNlKDEpKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy5jb25zZW50UHJvbWlzZV8pXG4gICAgICAgICAgICAudGhlbigoKSA9PiBpbnN0cnVtZW50YXRpb25TZXJ2aWNlUHJvbWlzZUZvckRvYyh0aGlzLmdldEFtcERvYygpKSlcbiAgICAgICAgICAgIC50aGVuKGluc3RydW1lbnRhdGlvbiA9PiB7XG4gICAgICAgICAgICAgIHRoaXMuaW5zdHJ1bWVudGF0aW9uXyA9IGluc3RydW1lbnRhdGlvbjtcbiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBbmFseXRpY3NDb25maWcodGhpcy5lbGVtZW50KS5sb2FkQ29uZmlnKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oY29uZmlnID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5jb25maWdfID0gY29uZmlnO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHRoaXMucmVnaXN0ZXJUcmlnZ2Vyc18uYmluZCh0aGlzKSk7XG4gICAgcmV0dXJuIHRoaXMuaW5pUHJvbWlzZV87XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIHRyaWdnZXJzLlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZXx1bmRlZmluZWR9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICByZWdpc3RlclRyaWdnZXJzXygpIHtcbiAgICBpZiAodGhpcy5oYXNPcHRlZE91dF8oKSkge1xuICAgICAgLy8gTm90aGluZyB0byBkbyB3aGVuIHRoZSB1c2VyIGhhcyBvcHRlZCBvdXQuXG4gICAgICBjb25zdCBUQUcgPSB0aGlzLmdldE5hbWVfKCk7XG4gICAgICB1c2VyKCkuZmluZShUQUcsICdVc2VyIGhhcyBvcHRlZCBvdXQuIE5vIGhpdHMgd2lsbCBiZSBzZW50LicpO1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHRoaXMuZ2VuZXJhdGVSZXF1ZXN0c18oKTtcblxuICAgIGlmICghdGhpcy5jb25maWdfWyd0cmlnZ2VycyddKSB7XG4gICAgICBjb25zdCBUQUcgPSB0aGlzLmdldE5hbWVfKCk7XG4gICAgICB0aGlzLnVzZXIoKS5lcnJvcihUQUcsICdObyB0cmlnZ2VycyB3ZXJlIGZvdW5kIGluIHRoZSAnICtcbiAgICAgICAgICAnY29uZmlnLiBObyBhbmFseXRpY3MgZGF0YSB3aWxsIGJlIHNlbnQuJyk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgdGhpcy5wcm9jZXNzRXh0cmFVcmxQYXJhbXNfKHRoaXMuY29uZmlnX1snZXh0cmFVcmxQYXJhbXMnXSxcbiAgICAgICAgdGhpcy5jb25maWdfWydleHRyYVVybFBhcmFtc1JlcGxhY2VNYXAnXSk7XG5cbiAgICB0aGlzLmFuYWx5dGljc0dyb3VwXyA9XG4gICAgICAgIHRoaXMuaW5zdHJ1bWVudGF0aW9uXy5jcmVhdGVBbmFseXRpY3NHcm91cCh0aGlzLmVsZW1lbnQpO1xuXG4gICAgaWYgKHRoaXMuY29uZmlnX1sndHJhbnNwb3J0J10gJiYgdGhpcy5jb25maWdfWyd0cmFuc3BvcnQnXVsnaWZyYW1lJ10pIHtcbiAgICAgIHRoaXMuaW5pdElmcmFtZVRyYW5zcG9ydF8oKTtcbiAgICB9XG5cbiAgICBjb25zdCBwcm9taXNlcyA9IFtdO1xuICAgIC8vIFRyaWdnZXIgY2FsbGJhY2sgY2FuIGJlIHN5bmNocm9ub3VzLiBEbyB0aGUgcmVnaXN0cmF0aW9uIGF0IHRoZSBlbmQuXG4gICAgZm9yIChjb25zdCBrIGluIHRoaXMuY29uZmlnX1sndHJpZ2dlcnMnXSkge1xuICAgICAgaWYgKGhhc093bih0aGlzLmNvbmZpZ19bJ3RyaWdnZXJzJ10sIGspKSB7XG4gICAgICAgIGNvbnN0IHRyaWdnZXIgPSB0aGlzLmNvbmZpZ19bJ3RyaWdnZXJzJ11ba107XG4gICAgICAgIGNvbnN0IGV4cGFuc2lvbk9wdGlvbnMgPSB0aGlzLmV4cGFuc2lvbk9wdGlvbnNfKFxuICAgICAgICAgICAge30sIHRyaWdnZXIsIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgICAgIGNvbnN0IFRBRyA9IHRoaXMuZ2V0TmFtZV8oKTtcbiAgICAgICAgaWYgKCF0cmlnZ2VyKSB7XG4gICAgICAgICAgdGhpcy51c2VyKCkuZXJyb3IoVEFHLCAnVHJpZ2dlciBzaG91bGQgYmUgYW4gb2JqZWN0OiAnLCBrKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRyaWdnZXJbJ29uJ10gfHwgIXRyaWdnZXJbJ3JlcXVlc3QnXSkge1xuICAgICAgICAgIHRoaXMudXNlcigpLmVycm9yKFRBRywgJ1wib25cIiBhbmQgXCJyZXF1ZXN0XCIgJyArXG4gICAgICAgICAgICAgICdhdHRyaWJ1dGVzIGFyZSByZXF1aXJlZCBmb3IgZGF0YSB0byBiZSBjb2xsZWN0ZWQuJyk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hlY2sgZm9yIG5vdCBzdXBwb3J0ZWQgdHJpZ2dlciBmb3Igc2FuZGJveGVkIGFuYWx5dGljc1xuICAgICAgICBpZiAodGhpcy5pc1NhbmRib3hfKSB7XG4gICAgICAgICAgY29uc3QgZXZlbnRUeXBlID0gdHJpZ2dlclsnb24nXTtcbiAgICAgICAgICBpZiAoaXNFbnVtVmFsdWUoQW5hbHl0aWNzRXZlbnRUeXBlLCBldmVudFR5cGUpICYmXG4gICAgICAgICAgICAgICFXSElURUxJU1RfRVZFTlRfSU5fU0FOREJPWC5pbmNsdWRlcyhldmVudFR5cGUpKSB7XG4gICAgICAgICAgICB0aGlzLnVzZXIoKS5lcnJvcihUQUcsIGV2ZW50VHlwZSArXG4gICAgICAgICAgICAgICAgJyBpcyBub3Qgc3VwcG9ydGVkIGZvciBhbXAtYW5hbHl0aWNzIGluIHNjb3BlJyk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnByb2Nlc3NFeHRyYVVybFBhcmFtc18odHJpZ2dlclsnZXh0cmFVcmxQYXJhbXMnXSxcbiAgICAgICAgICAgIHRoaXMuY29uZmlnX1snZXh0cmFVcmxQYXJhbXNSZXBsYWNlTWFwJ10pO1xuICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuaXNTYW1wbGVkSW5fKHRyaWdnZXIpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyByZXBsYWNlIHNlbGVjdG9yIGFuZCBzZWxlY3Rpb25NZXRob2RcbiAgICAgICAgICBpZiAodGhpcy5pc1NhbmRib3hfKSB7XG4gICAgICAgICAgICAvLyBPbmx5IHN1cHBvcnQgc2VsZWN0aW9uIG9mIHBhcmVudCBlbGVtZW50IGZvciBhbmFseXRpY3MgaW4gc2NvcGVcbiAgICAgICAgICAgIGlmICghdGhpcy5lbGVtZW50LnBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgLy8gSW4gY2FzZSBwYXJlbnQgZWxlbWVudCBoYXMgYmVlbiByZW1vdmVkIGZyb20gRE9NLCBkbyBub3RoaW5nXG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyaWdnZXJbJ3NlbGVjdG9yJ10gPSB0aGlzLmVsZW1lbnQucGFyZW50RWxlbWVudC50YWdOYW1lO1xuICAgICAgICAgICAgdHJpZ2dlclsnc2VsZWN0aW9uTWV0aG9kJ10gPSAnY2xvc2VzdCc7XG4gICAgICAgICAgICB0aGlzLmFkZFRyaWdnZXJOb0lubGluZV8odHJpZ2dlcik7XG4gICAgICAgICAgfSBlbHNlIGlmICh0cmlnZ2VyWydzZWxlY3RvciddKSB7XG4gICAgICAgICAgICAvLyBFeHBhbmQgdGhlIHNlbGVjdG9yIHVzaW5nIHZhcmlhYmxlIGV4cGFuc2lvbi5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZhcmlhYmxlU2VydmljZV8uZXhwYW5kVGVtcGxhdGUoXG4gICAgICAgICAgICAgICAgdHJpZ2dlclsnc2VsZWN0b3InXSwgZXhwYW5zaW9uT3B0aW9ucylcbiAgICAgICAgICAgICAgICAudGhlbihzZWxlY3RvciA9PiB7XG4gICAgICAgICAgICAgICAgICB0cmlnZ2VyWydzZWxlY3RvciddID0gc2VsZWN0b3I7XG4gICAgICAgICAgICAgICAgICB0aGlzLmFkZFRyaWdnZXJOb0lubGluZV8odHJpZ2dlcik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYWRkVHJpZ2dlck5vSW5saW5lXyh0cmlnZ2VyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBhbXAtYW5hbHl0aWNzIHdpbGwgY3JlYXRlIGFuIGlmcmFtZSBmb3IgdmVuZG9ycyBpblxuICAgKiBleHRlbnNpb25zL2FtcC1hbmFseXRpY3MvMC4xL3ZlbmRvcnMuanMgd2hvIGhhdmUgdHJhbnNwb3J0L2lmcmFtZSBkZWZpbmVkLlxuICAgKiBUaGlzIGlzIGxpbWl0ZWQgdG8gTVJDLWFjY3JlZGRpdGVkIHZlbmRvcnMuIFRoZSBmcmFtZSBpcyByZW1vdmVkIGlmIHRoZVxuICAgKiB1c2VyIG5hdmlnYXRlcy9zd2lwZXMgYXdheSBmcm9tIHRoZSBwYWdlLCBhbmQgaXMgcmVjcmVhdGVkIGlmIHRoZSB1c2VyXG4gICAqIG5hdmlnYXRlcyBiYWNrIHRvIHRoZSBwYWdlLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaW5pdElmcmFtZVRyYW5zcG9ydF8oKSB7XG4gICAgaWYgKHRoaXMuaWZyYW1lVHJhbnNwb3J0Xykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnByZWxvYWQoZ2V0SWZyYW1lVHJhbnNwb3J0U2NyaXB0VXJsKHRoaXMuZ2V0QW1wRG9jKCkud2luKSwgJ3NjcmlwdCcpO1xuICAgIGNvbnN0IGFtcEFkUmVzb3VyY2VJZCA9IHRoaXMuYXNzZXJ0QW1wQWRSZXNvdXJjZUlkKCk7XG5cbiAgICB0aGlzLmlmcmFtZVRyYW5zcG9ydF8gPSBuZXcgSWZyYW1lVHJhbnNwb3J0KFxuICAgICAgICAvLyBDcmVhdGUgIDNwIHRyYW5zcG9ydCBmcmFtZSB3aXRoaW4gY3JlYXRpdmUgZnJhbWUgaWYgaW5hYm94LlxuICAgICAgICB0aGlzLmlzSW5hYm94XyA/IHRoaXMud2luIDogdGhpcy5nZXRBbXBEb2MoKS53aW4sXG4gICAgICAgIHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSxcbiAgICAgICAgdGhpcy5jb25maWdfWyd0cmFuc3BvcnQnXSwgYW1wQWRSZXNvdXJjZUlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBc2tzIHRoZSBicm93c2VyIHRvIHByZWxvYWQgYSBVUkwuIEFsd2F5cyBhbHNvIGRvZXMgYSBwcmVjb25uZWN0XG4gICAqIGJlY2F1c2UgYnJvd3NlciBzdXBwb3J0IGZvciB0aGF0IGlzIGJldHRlci5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICAgKiBAcGFyYW0ge3N0cmluZz19IG9wdF9wcmVsb2FkQXNcbiAgICogQHZpc2libGVGb3JUZXN0aW5nXG4gICAqL1xuICBwcmVsb2FkKHVybCwgb3B0X3ByZWxvYWRBcykge1xuICAgIHRoaXMucHJlY29ubmVjdC5wcmVsb2FkKHVybCwgb3B0X3ByZWxvYWRBcyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgcmVzb3VyY2VJRCBvZiB0aGUgcGFyZW50IGFtcC1hZCBlbGVtZW50LlxuICAgKiBUaHJvd3MgYW4gZXhjZXB0aW9uIGlmIG5vIHN1Y2ggZWxlbWVudC5cbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAgICovXG4gIGFzc2VydEFtcEFkUmVzb3VyY2VJZCgpIHtcbiAgICByZXR1cm4gdXNlcigpLmFzc2VydFN0cmluZyhcbiAgICAgICAgZ2V0QW1wQWRSZXNvdXJjZUlkKHRoaXMuZWxlbWVudCwgZ2V0VG9wV2luZG93KHRoaXMud2luKSksXG4gICAgICAgIGAke3RoaXMuZ2V0TmFtZV8oKX06IE5vIGZyaWVuZGx5IGFtcC1hZCBhbmNlc3RvciBlbGVtZW50IHdhcyBmb3VuZCBgICtcbiAgICAgICAgJ2ZvciBhbXAtYW5hbHl0aWNzIHRhZyB3aXRoIGlmcmFtZSB0cmFuc3BvcnQuJyk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsbHMgYEFuYWx5dGljc0dyb3VwLmFkZFRyaWdnZXJgIGFuZCByZXBvcnRzIGFueSBlcnJvcnMuIFwiTm9JbmxpbmVcIiBpc1xuICAgKiB0byBhdm9pZCBpbmxpbmluZyB0aGlzIG1ldGhvZCBzbyB0aGF0IGB0cnkvY2F0Y2hgIGRvZXMgaXQgdmV0b1xuICAgKiBvcHRpbWl6YXRpb25zLlxuICAgKiBAcGFyYW0geyFKc29uT2JqZWN0fSBjb25maWdcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFkZFRyaWdnZXJOb0lubGluZV8oY29uZmlnKSB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuYW5hbHl0aWNzR3JvdXBfLmFkZFRyaWdnZXIoXG4gICAgICAgICAgY29uZmlnLCB0aGlzLmhhbmRsZUV2ZW50Xy5iaW5kKHRoaXMsIGNvbmZpZykpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnN0IFRBRyA9IHRoaXMuZ2V0TmFtZV8oKTtcbiAgICAgIGNvbnN0IGV2ZW50VHlwZSA9IGNvbmZpZ1snb24nXTtcbiAgICAgIHJldGhyb3dBc3luYyhUQUcsICdGYWlsZWQgdG8gcHJvY2VzcyB0cmlnZ2VyIFwiJyArIGV2ZW50VHlwZSArICdcIicsIGUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXBsYWNlIHRoZSBuYW1lcyBvZiBrZXlzIGluIHBhcmFtcyBvYmplY3Qgd2l0aCB0aGUgdmFsdWVzIGluIHJlcGxhY2UgbWFwLlxuICAgKlxuICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCBzdHJpbmc+fSBwYXJhbXMgVGhlIHBhcmFtcyB0aGF0IG5lZWQgdG8gYmUgcmVuYW1lZC5cbiAgICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgc3RyaW5nPn0gcmVwbGFjZU1hcCBBIG1hcCBvZiBwYXR0ZXJuIGFuZCByZXBsYWNlbWVudFxuICAgKiAgICB2YWx1ZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByb2Nlc3NFeHRyYVVybFBhcmFtc18ocGFyYW1zLCByZXBsYWNlTWFwKSB7XG4gICAgaWYgKHBhcmFtcyAmJiByZXBsYWNlTWFwKSB7XG4gICAgICAvLyBJZiB0aGUgY29uZmlnIGluY2x1ZGVzIGEgZXh0cmFVcmxQYXJhbXNSZXBsYWNlTWFwLCBhcHBseSBpdCBhcyBhIHNldFxuICAgICAgLy8gb2YgcGFyYW1zIHRvIFN0cmluZy5yZXBsYWNlIHRvIGFsbG93IGFsaWFzaW5nIG9mIHRoZSBrZXlzIGluXG4gICAgICAvLyBleHRyYVVybFBhcmFtcy5cbiAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICBmb3IgKGNvbnN0IHJlcGxhY2VNYXBLZXkgaW4gcmVwbGFjZU1hcCkge1xuICAgICAgICBpZiAoKytjb3VudCA+IE1BWF9SRVBMQUNFUykge1xuICAgICAgICAgIGNvbnN0IFRBRyA9IHRoaXMuZ2V0TmFtZV8oKTtcbiAgICAgICAgICB0aGlzLnVzZXIoKS5lcnJvcihUQUcsXG4gICAgICAgICAgICAgICdNb3JlIHRoYW4gJyArIE1BWF9SRVBMQUNFUyArICcgZXh0cmFVcmxQYXJhbXNSZXBsYWNlTWFwIHJ1bGVzICcgK1xuICAgICAgICAgICAgICAnYXJlblxcJ3QgYWxsb3dlZDsgU2tpcHBpbmcgdGhlIHJlc3QnKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoY29uc3QgZXh0cmFVcmxQYXJhbXNLZXkgaW4gcGFyYW1zKSB7XG4gICAgICAgICAgY29uc3QgbmV3a2V5ID0gZXh0cmFVcmxQYXJhbXNLZXkucmVwbGFjZShcbiAgICAgICAgICAgICAgcmVwbGFjZU1hcEtleSxcbiAgICAgICAgICAgICAgcmVwbGFjZU1hcFtyZXBsYWNlTWFwS2V5XVxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKGV4dHJhVXJsUGFyYW1zS2V5ICE9IG5ld2tleSkge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBwYXJhbXNbZXh0cmFVcmxQYXJhbXNLZXldO1xuICAgICAgICAgICAgZGVsZXRlIHBhcmFtc1tleHRyYVVybFBhcmFtc0tleV07XG4gICAgICAgICAgICBwYXJhbXNbbmV3a2V5XSA9IHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIHRoZSB1c2VyIGhhcyBvcHRlZCBvdXQuXG4gICAqL1xuICBoYXNPcHRlZE91dF8oKSB7XG4gICAgaWYgKCF0aGlzLmNvbmZpZ19bJ29wdG91dCddKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgcHJvcHMgPSB0aGlzLmNvbmZpZ19bJ29wdG91dCddLnNwbGl0KCcuJyk7XG4gICAgbGV0IGsgPSB0aGlzLndpbjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoIWspIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgayA9IGtbcHJvcHNbaV1dO1xuICAgIH1cbiAgICAvLyBUaGUgYWN0dWFsIHByb3BlcnR5IGJlaW5nIGNhbGxlZCBpcyBjb250cm9sbGVkIGJ5IHZlbmRvciBjb25maWdzIG9ubHlcbiAgICAvLyB0aGF0IGFyZSBhcHByb3ZlZCBpbiBjb2RlIHJldmlld3MuIFVzZXIgY3VzdG9taXphdGlvbiBvZiB0aGUgYG9wdG91dGBcbiAgICAvLyBwcm9wZXJ0eSBpcyBub3QgYWxsb3dlZC5cbiAgICByZXR1cm4gaygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdvZXMgdGhyb3VnaCBhbGwgdGhlIHJlcXVlc3RzIGluIHByZWRlZmluZWQgdmVuZG9yIGNvbmZpZyBhbmQgdGFnJ3MgY29uZmlnXG4gICAqIGFuZCBjcmVhdGVzIGEgbWFwIG9mIHJlcXVlc3QgbmFtZSB0byByZXF1ZXN0IHRlbXBsYXRlLiBUaGVzZSByZXF1ZXN0cyBjYW5cbiAgICogdGhlbiBiZSB1c2VkIHdoaWxlIHNlbmRpbmcgYSByZXF1ZXN0IHRvIGEgc2VydmVyLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2VuZXJhdGVSZXF1ZXN0c18oKSB7XG4gICAgaWYgKCF0aGlzLmNvbmZpZ18gfHwgIXRoaXMuY29uZmlnX1sncmVxdWVzdHMnXSkge1xuICAgICAgY29uc3QgVEFHID0gdGhpcy5nZXROYW1lXygpO1xuICAgICAgdGhpcy51c2VyKCkuZXJyb3IoVEFHLCAnTm8gcmVxdWVzdCBzdHJpbmdzIGRlZmluZWQuIEFuYWx5dGljcyAnICtcbiAgICAgICAgICAnZGF0YSB3aWxsIG5vdCBiZSBzZW50IGZyb20gdGhpcyBwYWdlLicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNvbmZpZ19bJ3JlcXVlc3RzJ10pIHtcbiAgICAgIGZvciAoY29uc3QgayBpbiB0aGlzLmNvbmZpZ19bJ3JlcXVlc3RzJ10pIHtcbiAgICAgICAgaWYgKGhhc093bih0aGlzLmNvbmZpZ19bJ3JlcXVlc3RzJ10sIGspKSB7XG4gICAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuY29uZmlnX1sncmVxdWVzdHMnXVtrXTtcbiAgICAgICAgICBpZiAoIXJlcXVlc3RbJ2Jhc2VVcmwnXSkge1xuICAgICAgICAgICAgdGhpcy51c2VyKCkuZXJyb3IoVEFHLCAncmVxdWVzdCBtdXN0IGhhdmUgYSBiYXNlVXJsJyk7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5jb25maWdfWydyZXF1ZXN0cyddW2tdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBFeHBhbmQgYW55IHBsYWNlaG9sZGVycy4gRm9yIHJlcXVlc3RzLCB3ZSBleHBhbmQgZWFjaCBzdHJpbmcgdXAgdG8gNVxuICAgICAgLy8gdGltZXMgdG8gc3VwcG9ydCBuZXN0ZWQgcmVxdWVzdHMuIExlYXZlIGFueSB1bnJlc29sdmVkIHBsYWNlaG9sZGVycy5cbiAgICAgIC8vIEV4cGFuZCBhbnkgcmVxdWVzdHMgcGxhY2Vob2xkZXIuXG4gICAgICBmb3IgKGNvbnN0IGsgaW4gdGhpcy5jb25maWdfWydyZXF1ZXN0cyddKSB7XG4gICAgICAgIHRoaXMuY29uZmlnX1sncmVxdWVzdHMnXVtrXVsnYmFzZVVybCddID1cbiAgICAgICAgICAgIGV4cGFuZFRlbXBsYXRlKHRoaXMuY29uZmlnX1sncmVxdWVzdHMnXVtrXVsnYmFzZVVybCddLCBrZXkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5jb25maWdfWydyZXF1ZXN0cyddW2tleV07XG4gICAgICAgICAgICAgIHJldHVybiAocmVxdWVzdCAmJiByZXF1ZXN0WydiYXNlVXJsJ10pIHx8ICckeycgKyBrZXkgKyAnfSc7XG4gICAgICAgICAgICB9LCA1KTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVxdWVzdHMgPSB7fTtcbiAgICAgIGZvciAoY29uc3QgayBpbiB0aGlzLmNvbmZpZ19bJ3JlcXVlc3RzJ10pIHtcbiAgICAgICAgaWYgKGhhc093bih0aGlzLmNvbmZpZ19bJ3JlcXVlc3RzJ10sIGspKSB7XG4gICAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuY29uZmlnX1sncmVxdWVzdHMnXVtrXTtcbiAgICAgICAgICByZXF1ZXN0c1trXSA9IG5ldyBSZXF1ZXN0SGFuZGxlcihcbiAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LCByZXF1ZXN0LCB0aGlzLnByZWNvbm5lY3QsXG4gICAgICAgICAgICAgIHRoaXMuc2VuZFJlcXVlc3RfLmJpbmQodGhpcyksXG4gICAgICAgICAgICAgIHRoaXMuaXNTYW5kYm94Xyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMucmVxdWVzdHNfID0gcmVxdWVzdHM7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIGZvciBldmVudHMgdGhhdCBhcmUgcmVnaXN0ZXJlZCBieSB0aGUgY29uZmlnJ3MgdHJpZ2dlcnMuIFRoaXNcbiAgICogbWV0aG9kIGdlbmVyYXRlcyByZXF1ZXN0cyBhbmQgc2VuZHMgdGhlbSBvdXQuXG4gICAqXG4gICAqIEBwYXJhbSB7IUpzb25PYmplY3R9IHRyaWdnZXIgSlNPTiBjb25maWcgYmxvY2sgdGhhdCByZXN1bHRlZCBpbiB0aGlzIGV2ZW50LlxuICAgKiBAcGFyYW0geyFPYmplY3R9IGV2ZW50IE9iamVjdCB3aXRoIGRldGFpbHMgYWJvdXQgdGhlIGV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlRXZlbnRfKHRyaWdnZXIsIGV2ZW50KSB7XG4gICAgY29uc3QgcmVxdWVzdHMgPSBpc0FycmF5KHRyaWdnZXJbJ3JlcXVlc3QnXSlcbiAgICAgID8gdHJpZ2dlclsncmVxdWVzdCddIDogW3RyaWdnZXJbJ3JlcXVlc3QnXV07XG5cbiAgICBmb3IgKGxldCByID0gMDsgciA8IHJlcXVlc3RzLmxlbmd0aDsgcisrKSB7XG4gICAgICBjb25zdCByZXF1ZXN0TmFtZSA9IHJlcXVlc3RzW3JdO1xuICAgICAgdGhpcy5oYW5kbGVSZXF1ZXN0Rm9yRXZlbnRfKHJlcXVlc3ROYW1lLCB0cmlnZ2VyLCBldmVudCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFByb2Nlc3NlcyBhIHJlcXVlc3QgZm9yIGFuIGV2ZW50IGNhbGxiYWNrIGFuZCBzZW5kcyBpdCBvdXQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0TmFtZSBUaGUgcmVxdWVzdE5hbWUgdG8gcHJvY2Vzcy5cbiAgICogQHBhcmFtIHshSnNvbk9iamVjdH0gdHJpZ2dlciBKU09OIGNvbmZpZyBibG9jayB0aGF0IHJlc3VsdGVkIGluIHRoaXMgZXZlbnQuXG4gICAqIEBwYXJhbSB7IU9iamVjdH0gZXZlbnQgT2JqZWN0IHdpdGggZGV0YWlscyBhYm91dCB0aGUgZXZlbnQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVSZXF1ZXN0Rm9yRXZlbnRfKHJlcXVlc3ROYW1lLCB0cmlnZ2VyLCBldmVudCkge1xuICAgIGlmICghdGhpcy5lbGVtZW50Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcpIHtcbiAgICAgIGNvbnN0IFRBRyA9IHRoaXMuZ2V0TmFtZV8oKTtcbiAgICAgIGRldigpLndhcm4oVEFHLCAncmVxdWVzdCBhZ2FpbnN0IGRlc3Ryb3llZCBlbWJlZDogJywgdHJpZ2dlclsnb24nXSk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVxdWVzdCA9IHRoaXMucmVxdWVzdHNfW3JlcXVlc3ROYW1lXTtcblxuICAgIGlmICghcmVxdWVzdCkge1xuICAgICAgY29uc3QgVEFHID0gdGhpcy5nZXROYW1lXygpO1xuICAgICAgdGhpcy51c2VyKCkuZXJyb3IoVEFHLCAnSWdub3JpbmcgZXZlbnQuIFJlcXVlc3Qgc3RyaW5nICcgK1xuICAgICAgICAgICdub3QgZm91bmQ6ICcsIHRyaWdnZXJbJ3JlcXVlc3QnXSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5jaGVja1RyaWdnZXJFbmFibGVkXyh0cmlnZ2VyLCBldmVudCkudGhlbihlbmFibGVkID0+IHtcbiAgICAgIGlmICghZW5hYmxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLmV4cGFuZEFuZFNlbmRSZXF1ZXN0XyhyZXF1ZXN0LCB0cmlnZ2VyLCBldmVudCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshSnNvbk9iamVjdH0gdHJpZ2dlciBKU09OIGNvbmZpZyBibG9jayB0aGF0IHJlc3VsdGVkIGluIHRoaXMgZXZlbnQuXG4gICAqIEBwYXJhbSB7IUV4cGFuc2lvbk9wdGlvbnN9IGV4cGFuc2lvbk9wdGlvbnMgRXhwYW5zaW9uIG9wdGlvbnMuXG4gICAqIEByZXR1cm4geyFPYmplY3Q8c3RyaW5nLCAoc3RyaW5nfCFQcm9taXNlPHN0cmluZz58ZnVuY3Rpb24oKTogc3RyaW5nKT59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXREeW5hbWljVmFyaWFibGVCaW5kaW5nc18odHJpZ2dlciwgZXhwYW5zaW9uT3B0aW9ucykge1xuICAgIGNvbnN0IGR5bmFtaWNCaW5kaW5ncyA9IHt9O1xuICAgIGNvbnN0IHJlc291cmNlVGltaW5nU3BlYyA9IHRyaWdnZXJbJ3Jlc291cmNlVGltaW5nU3BlYyddO1xuICAgIGlmIChyZXNvdXJjZVRpbWluZ1NwZWMpIHtcbiAgICAgIC8vIENoZWNrIGlmIHdlJ3JlIGRvbmUgcmVwb3J0aW5nIHJlc291cmNlIHRpbWluZyBtZXRyaWNzIGJlZm9yZSBiaW5kaW5nXG4gICAgICAvLyBiZWZvcmUgYmluZGluZyB0aGUgcmVzb3VyY2UgdGltaW5nIHZhcmlhYmxlLlxuICAgICAgaWYgKCFyZXNvdXJjZVRpbWluZ1NwZWNbJ2RvbmUnXSAmJlxuICAgICAgICAgIERhdGUubm93KCkgPCB0aGlzLm1heFJlc291cmNlVGltaW5nUmVwb3J0aW5nVGltZV8pIHtcbiAgICAgICAgY29uc3QgYmluZGluZyA9ICdSRVNPVVJDRV9USU1JTkcnO1xuICAgICAgICBjb25zdCBhbmFseXRpY3NWYXIgPSAncmVzb3VyY2VUaW1pbmcnO1xuICAgICAgICBkeW5hbWljQmluZGluZ3NbYmluZGluZ10gPVxuICAgICAgICAgICAgc2VyaWFsaXplUmVzb3VyY2VUaW1pbmcodGhpcy53aW4sIHJlc291cmNlVGltaW5nU3BlYyk7XG4gICAgICAgIGV4cGFuc2lvbk9wdGlvbnMudmFyc1thbmFseXRpY3NWYXJdID0gYmluZGluZztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGR5bmFtaWNCaW5kaW5ncztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1JlcXVlc3RIYW5kbGVyfSByZXF1ZXN0IFRoZSByZXF1ZXN0IHRvIHByb2Nlc3MuXG4gICAqIEBwYXJhbSB7IUpzb25PYmplY3R9IHRyaWdnZXIgSlNPTiBjb25maWcgYmxvY2sgdGhhdCByZXN1bHRlZCBpbiB0aGlzIGV2ZW50LlxuICAgKiBAcGFyYW0geyFPYmplY3R9IGV2ZW50IE9iamVjdCB3aXRoIGRldGFpbHMgYWJvdXQgdGhlIGV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZXhwYW5kQW5kU2VuZFJlcXVlc3RfKHJlcXVlc3QsIHRyaWdnZXIsIGV2ZW50KSB7XG4gICAgdGhpcy5jb25maWdfWyd2YXJzJ11bJ3JlcXVlc3RDb3VudCddKys7XG4gICAgY29uc3QgZXhwYW5zaW9uT3B0aW9ucyA9IHRoaXMuZXhwYW5zaW9uT3B0aW9uc18oZXZlbnQsIHRyaWdnZXIpO1xuICAgIGNvbnN0IGR5bmFtaWNCaW5kaW5ncyA9XG4gICAgICAgIHRoaXMuZ2V0RHluYW1pY1ZhcmlhYmxlQmluZGluZ3NfKHRyaWdnZXIsIGV4cGFuc2lvbk9wdGlvbnMpO1xuICAgIHJlcXVlc3Quc2VuZChcbiAgICAgICAgdGhpcy5jb25maWdfWydleHRyYVVybFBhcmFtcyddLCB0cmlnZ2VyLCBleHBhbnNpb25PcHRpb25zLFxuICAgICAgICBkeW5hbWljQmluZGluZ3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUpzb25PYmplY3R9IHRyaWdnZXIgVGhlIGNvbmZpZyB0byB1c2UgdG8gZGV0ZXJtaW5lIHNhbXBsaW5nLlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTxib29sZWFuPn0gV2hldGhlciB0aGUgcmVxdWVzdCBzaG91bGQgYmUgc2FtcGxlZCBpbiBvclxuICAgKiBub3QgYmFzZWQgb24gc2FtcGxlU3BlYy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGlzU2FtcGxlZEluXyh0cmlnZ2VyKSB7XG4gICAgLyoqIEBjb25zdCB7IUpzb25PYmplY3R9ICovXG4gICAgY29uc3Qgc3BlYyA9IHRyaWdnZXJbJ3NhbXBsZVNwZWMnXTtcbiAgICBjb25zdCByZXNvbHZlID0gUHJvbWlzZS5yZXNvbHZlKHRydWUpO1xuICAgIGNvbnN0IFRBRyA9IHRoaXMuZ2V0TmFtZV8oKTtcbiAgICBpZiAoIXNwZWMpIHtcbiAgICAgIHJldHVybiByZXNvbHZlO1xuICAgIH1cbiAgICBjb25zdCBzYW1wbGVPbiA9IHNwZWNbJ3NhbXBsZU9uJ107XG4gICAgaWYgKCFzYW1wbGVPbikge1xuICAgICAgdGhpcy51c2VyKCkuZXJyb3IoVEFHLCAnSW52YWxpZCBzYW1wbGVPbiB2YWx1ZS4nKTtcbiAgICAgIHJldHVybiByZXNvbHZlO1xuICAgIH1cbiAgICBjb25zdCB0aHJlc2hvbGQgPSBwYXJzZUZsb2F0KHNwZWNbJ3RocmVzaG9sZCddKTsgLy8gVGhyZXNob2xkIGNhbiBiZSBOYU4uXG4gICAgaWYgKHRocmVzaG9sZCA+PSAwICYmIHRocmVzaG9sZCA8PSAxMDApIHtcbiAgICAgIGNvbnN0IGV4cGFuc2lvbk9wdGlvbnMgPSB0aGlzLmV4cGFuc2lvbk9wdGlvbnNfKHt9LCB0cmlnZ2VyKTtcbiAgICAgIHJldHVybiB0aGlzLmV4cGFuZFRlbXBsYXRlV2l0aFVybFBhcmFtc18oc2FtcGxlT24sIGV4cGFuc2lvbk9wdGlvbnMpXG4gICAgICAgICAgLnRoZW4oa2V5ID0+IHRoaXMuY3J5cHRvU2VydmljZV8udW5pZm9ybShrZXkpKVxuICAgICAgICAgIC50aGVuKGRpZ2VzdCA9PiBkaWdlc3QgKiAxMDAgPCB0aHJlc2hvbGQpO1xuICAgIH1cbiAgICB1c2VyKCkuLypPSyovZXJyb3IoVEFHLCAnSW52YWxpZCB0aHJlc2hvbGQgZm9yIHNhbXBsaW5nLicpO1xuICAgIHJldHVybiByZXNvbHZlO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiByZXF1ZXN0IGZvciBhIHRyaWdnZXIgaXMgZW5hYmxlZC5cbiAgICogQHBhcmFtIHshSnNvbk9iamVjdH0gdHJpZ2dlciBUaGUgY29uZmlnIHRvIHVzZSB0byBkZXRlcm1pbmUgaWYgdHJpZ2dlciBpc1xuICAgKiBlbmFibGVkLlxuICAgKiBAcGFyYW0geyFPYmplY3R9IGV2ZW50IE9iamVjdCB3aXRoIGRldGFpbHMgYWJvdXQgdGhlIGV2ZW50LlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTxib29sZWFuPn0gV2hldGhlciB0cmlnZ2VyIG11c3QgYmUgY2FsbGVkLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY2hlY2tUcmlnZ2VyRW5hYmxlZF8odHJpZ2dlciwgZXZlbnQpIHtcbiAgICBjb25zdCBleHBhbnNpb25PcHRpb25zID0gdGhpcy5leHBhbnNpb25PcHRpb25zXyhldmVudCwgdHJpZ2dlcik7XG4gICAgY29uc3QgZW5hYmxlZE9uVGFnTGV2ZWwgPVxuICAgICAgICB0aGlzLmNoZWNrU3BlY0VuYWJsZWRfKHRoaXMuY29uZmlnX1snZW5hYmxlZCddLCBleHBhbnNpb25PcHRpb25zKTtcbiAgICBjb25zdCBlbmFibGVkT25UcmlnZ2VyTGV2ZWwgPVxuICAgICAgICB0aGlzLmNoZWNrU3BlY0VuYWJsZWRfKHRyaWdnZXJbJ2VuYWJsZWQnXSwgZXhwYW5zaW9uT3B0aW9ucyk7XG5cbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW2VuYWJsZWRPblRhZ0xldmVsLCBlbmFibGVkT25UcmlnZ2VyTGV2ZWxdKVxuICAgICAgICAudGhlbihlbmFibGVkID0+IHtcbiAgICAgICAgICBkZXYoKS5hc3NlcnQoZW5hYmxlZC5sZW5ndGggPT09IDIpO1xuICAgICAgICAgIHJldHVybiBlbmFibGVkWzBdICYmIGVuYWJsZWRbMV07XG4gICAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyByZXN1bHQgb2YgJ2VuYWJsZWQnIHNwZWMgZXZhbHVhdGlvbi4gUmV0dXJucyBmYWxzZSBpZiBzcGVjIGlzXG4gICAqIHByb3ZpZGVkIGFuZCB2YWx1ZSByZXNvbHZlcyB0byBhIGZhbHNleSB2YWx1ZSAoZW1wdHkgc3RyaW5nLCAwLCBmYWxzZSxcbiAgICogbnVsbCwgTmFOIG9yIHVuZGVmaW5lZCkuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzcGVjIEV4cHJlc3Npb24gdGhhdCB3aWxsIGJlIGV2YWx1YXRlZC5cbiAgICogQHBhcmFtIHshRXhwYW5zaW9uT3B0aW9uc30gZXhwYW5zaW9uT3B0aW9ucyBFeHBhbnNpb24gb3B0aW9ucy5cbiAgICogQHJldHVybiB7IVByb21pc2U8Ym9vbGVhbj59IEZhbHNlIG9ubHkgaWYgc3BlYyBpcyBwcm92aWRlZCBhbmQgdmFsdWUgaXNcbiAgICogZmFsc2V5LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY2hlY2tTcGVjRW5hYmxlZF8oc3BlYywgZXhwYW5zaW9uT3B0aW9ucykge1xuICAgIC8vIFNwZWMgYWJzZW5jZSBhbHdheXMgcmVzb2x2ZXMgdG8gdHJ1ZS5cbiAgICBpZiAoc3BlYyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRydWUpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmV4cGFuZFRlbXBsYXRlV2l0aFVybFBhcmFtc18oc3BlYywgZXhwYW5zaW9uT3B0aW9ucylcbiAgICAgICAgLnRoZW4odmFsID0+IHtcbiAgICAgICAgICByZXR1cm4gdmFsICE9PSAnJyAmJiB2YWwgIT09ICcwJyAmJiB2YWwgIT09ICdmYWxzZScgJiZcbiAgICAgICAgICAgICAgdmFsICE9PSAnbnVsbCcgJiYgdmFsICE9PSAnTmFOJyAmJiB2YWwgIT09ICd1bmRlZmluZWQnO1xuICAgICAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBhbmRzIHNwZWMgdXNpbmcgcHJvdmlkZWQgZXhwYW5zaW9uIG9wdGlvbnMgYW5kIGFwcGxpZXMgdXJsIHJlcGxhY2VtZW50XG4gICAqIGlmIG5lY2Vzc2FyeS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHNwZWMgRXhwcmVzc2lvbiB0aGF0IG5lZWRzIHRvIGJlIGV4cGFuZGVkLlxuICAgKiBAcGFyYW0geyFFeHBhbnNpb25PcHRpb25zfSBleHBhbnNpb25PcHRpb25zIEV4cGFuc2lvbiBvcHRpb25zLlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTxzdHJpbmc+fSBleHBhbmRlZCBzcGVjLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZXhwYW5kVGVtcGxhdGVXaXRoVXJsUGFyYW1zXyhzcGVjLCBleHBhbnNpb25PcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMudmFyaWFibGVTZXJ2aWNlXy5leHBhbmRUZW1wbGF0ZShzcGVjLCBleHBhbnNpb25PcHRpb25zKVxuICAgICAgICAudGhlbihrZXkgPT4gU2VydmljZXMudXJsUmVwbGFjZW1lbnRzRm9yRG9jKFxuICAgICAgICAgICAgdGhpcy5lbGVtZW50KS5leHBhbmRVcmxBc3luYyhrZXkpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdCBUaGUgZnVsbCByZXF1ZXN0IHN0cmluZyB0byBzZW5kLlxuICAgKiBAcGFyYW0geyFKc29uT2JqZWN0fSB0cmlnZ2VyXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzZW5kUmVxdWVzdF8ocmVxdWVzdCwgdHJpZ2dlcikge1xuICAgIGlmICghcmVxdWVzdCkge1xuICAgICAgY29uc3QgVEFHID0gdGhpcy5nZXROYW1lXygpO1xuICAgICAgdGhpcy51c2VyKCkuZXJyb3IoVEFHLCAnUmVxdWVzdCBub3Qgc2VudC4gQ29udGVudHMgZW1wdHkuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0cmlnZ2VyWydpZnJhbWVQaW5nJ10pIHtcbiAgICAgIHVzZXIoKS5hc3NlcnQodHJpZ2dlclsnb24nXSA9PSAndmlzaWJsZScsXG4gICAgICAgICAgJ2lmcmFtZVBpbmcgaXMgb25seSBhdmFpbGFibGUgb24gcGFnZSB2aWV3IHJlcXVlc3RzLicpO1xuICAgICAgc2VuZFJlcXVlc3RVc2luZ0lmcmFtZSh0aGlzLndpbiwgcmVxdWVzdCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZ19bJ3RyYW5zcG9ydCddICYmXG4gICAgICAgIHRoaXMuY29uZmlnX1sndHJhbnNwb3J0J11bJ2lmcmFtZSddKSB7XG4gICAgICB1c2VyKCkuYXNzZXJ0KHRoaXMuaWZyYW1lVHJhbnNwb3J0XyxcbiAgICAgICAgICAnaWZyYW1lIHRyYW5zcG9ydCB3YXMgaW5hZHZlcnRlbnRseSBkZWxldGVkJyk7XG4gICAgICB0aGlzLmlmcmFtZVRyYW5zcG9ydF8uc2VuZFJlcXVlc3QocmVxdWVzdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbmRSZXF1ZXN0KHRoaXMud2luLCByZXF1ZXN0LCB0aGlzLmNvbmZpZ19bJ3RyYW5zcG9ydCddIHx8IHt9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7c3RyaW5nfSBSZXR1cm5zIGEgc3RyaW5nIHRvIGlkZW50aWZ5IHRoaXMgdGFnLiBNYXkgbm90IGJlIHVuaXF1ZVxuICAgKiBpZiB0aGUgZWxlbWVudCBpZCBpcyBub3QgdW5pcXVlLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0TmFtZV8oKSB7XG4gICAgcmV0dXJuICdBbXBBbmFseXRpY3MgJyArXG4gICAgICAgICh0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpZCcpIHx8ICc8dW5rbm93biBpZD4nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCBPYmplY3Q8c3RyaW5nLCBzdHJpbmd8QXJyYXk8c3RyaW5nPj4+fSBzb3VyY2UxXG4gICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIE9iamVjdDxzdHJpbmcsIHN0cmluZ3xBcnJheTxzdHJpbmc+Pj59IHNvdXJjZTJcbiAgICogQHBhcmFtIHtudW1iZXI9fSBvcHRfaXRlcmF0aW9uc1xuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfbm9FbmNvZGVcbiAgICogQHJldHVybiB7IUV4cGFuc2lvbk9wdGlvbnN9XG4gICAqL1xuICBleHBhbnNpb25PcHRpb25zXyhzb3VyY2UxLCBzb3VyY2UyLCBvcHRfaXRlcmF0aW9ucywgb3B0X25vRW5jb2RlKSB7XG4gICAgY29uc3QgdmFycyA9IG1hcCgpO1xuICAgIG1lcmdlT2JqZWN0cyh0aGlzLmNvbmZpZ19bJ3ZhcnMnXSwgdmFycyk7XG4gICAgbWVyZ2VPYmplY3RzKHNvdXJjZTJbJ3ZhcnMnXSwgdmFycyk7XG4gICAgbWVyZ2VPYmplY3RzKHNvdXJjZTFbJ3ZhcnMnXSwgdmFycyk7XG4gICAgcmV0dXJuIG5ldyBFeHBhbnNpb25PcHRpb25zKHZhcnMsIG9wdF9pdGVyYXRpb25zLCBvcHRfbm9FbmNvZGUpO1xuICB9XG59XG5cbkFNUC5leHRlbnNpb24oVEFHLCAnMC4xJywgQU1QID0+IHtcbiAgLy8gUmVnaXN0ZXIgZG9jLXNlcnZpY2UgZmFjdG9yeS5cbiAgQU1QLnJlZ2lzdGVyU2VydmljZUZvckRvYyhcbiAgICAgICdhbXAtYW5hbHl0aWNzLWluc3RydW1lbnRhdGlvbicsIEluc3RydW1lbnRhdGlvblNlcnZpY2UpO1xuICBBTVAucmVnaXN0ZXJTZXJ2aWNlRm9yRG9jKCdhY3Rpdml0eScsIEFjdGl2aXR5KTtcbiAgaW5zdGFsbFZhcmlhYmxlU2VydmljZShBTVAud2luKTtcbiAgLy8gUmVnaXN0ZXIgdGhlIGVsZW1lbnQuXG4gIEFNUC5yZWdpc3RlckVsZW1lbnQoVEFHLCBBbXBBbmFseXRpY3MpO1xufSk7XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtTZXJ2aWNlc30gZnJvbSAnLi4vLi4vLi4vc3JjL3NlcnZpY2VzJztcbmltcG9ydCB7XG4gIFZpc2liaWxpdHlNYW5hZ2VyRm9yRG9jLFxuICBWaXNpYmlsaXR5TWFuYWdlckZvckVtYmVkLFxufSBmcm9tICcuL3Zpc2liaWxpdHktbWFuYWdlcic7XG5pbXBvcnQge1xuICBjbG9zZXN0QnlTZWxlY3RvcixcbiAgbWF0Y2hlcyxcbiAgc2NvcGVkUXVlcnlTZWxlY3Rvcixcbn0gZnJvbSAnLi4vLi4vLi4vc3JjL2RvbSc7XG5pbXBvcnQge2RldiwgdXNlcn0gZnJvbSAnLi4vLi4vLi4vc3JjL2xvZyc7XG5pbXBvcnQge2dldE1vZGV9IGZyb20gJy4uLy4uLy4uL3NyYy9tb2RlJztcbmltcG9ydCB7bGF5b3V0UmVjdEx0d2h9IGZyb20gJy4uLy4uLy4uL3NyYy9sYXlvdXQtcmVjdCc7XG5pbXBvcnQge21hcH0gZnJvbSAnLi4vLi4vLi4vc3JjL3V0aWxzL29iamVjdCc7XG5pbXBvcnQge3RyeVJlc29sdmV9IGZyb20gJy4uLy4uLy4uL3NyYy91dGlscy9wcm9taXNlJztcbmltcG9ydCB7d2hlbkNvbnRlbnRJbmlMb2FkfSBmcm9tICcuLi8uLi8uLi9zcmMvZnJpZW5kbHktaWZyYW1lLWVtYmVkJztcblxuY29uc3QgVEFHID0gJ2FtcC1hbmFseXRpY3MnO1xuXG5cbi8qKlxuICogQW4gYW5hbHl0aWNzIHJvb3QuIEFuYWx5dGljcyBjYW4gYmUgc2NvcGVkIHRvIGVpdGhlciBhbXBkb2MsIGVtYmVkIG9yXG4gKiBhbiBhcmJpdHJhcnkgQU1QIGVsZW1lbnQuXG4gKlxuICogVE9ETyhkdm95dGVua28pOiBjb25zaWRlciBtb3ZpbmcgdGhpcyBjb25jZXB0IGludG8gY29yZSBhcyBgQW1wUm9vdGBcbiAqIGludGVyZmFjZSB0aGF0IHdpbGwgYmUgaW1wbGVtZW50ZWQgYnkgYEFtcERvY2AgYW5kIGBGcmllbmRseUlmcmFtZUVtYmVkYC5cbiAqXG4gKiBAaW1wbGVtZW50cyB7Li4vLi4vLi4vc3JjL3NlcnZpY2UuRGlzcG9zYWJsZX1cbiAqIEBhYnN0cmFjdFxuICovXG5leHBvcnQgY2xhc3MgQW5hbHl0aWNzUm9vdCB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyEuLi8uLi8uLi9zcmMvc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGFtcGRvY1xuICAgKiBAcGFyYW0gez9BbmFseXRpY3NSb290fSBwYXJlbnRcbiAgICovXG4gIGNvbnN0cnVjdG9yKGFtcGRvYywgcGFyZW50KSB7XG4gICAgLyoqIEBjb25zdCAqL1xuICAgIHRoaXMuYW1wZG9jID0gYW1wZG9jO1xuXG4gICAgLyoqIEBjb25zdCAqL1xuICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuXG4gICAgLyoqIEBjb25zdCAqL1xuICAgIHRoaXMudHJhY2tlcnNfID0gbWFwKCk7XG5cbiAgICAvKiogQHByaXZhdGUgez8uL3Zpc2liaWxpdHktbWFuYWdlci5WaXNpYmlsaXR5TWFuYWdlcn0gKi9cbiAgICB0aGlzLnZpc2liaWxpdHlNYW5hZ2VyXyA9IG51bGw7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGRpc3Bvc2UoKSB7XG4gICAgZm9yIChjb25zdCBrIGluIHRoaXMudHJhY2tlcnNfKSB7XG4gICAgICB0aGlzLnRyYWNrZXJzX1trXS5kaXNwb3NlKCk7XG4gICAgICBkZWxldGUgdGhpcy50cmFja2Vyc19ba107XG4gICAgfVxuICAgIGlmICh0aGlzLnZpc2liaWxpdHlNYW5hZ2VyXykge1xuICAgICAgdGhpcy52aXNpYmlsaXR5TWFuYWdlcl8uZGlzcG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB0eXBlIG9mIHRoZSB0cmFja2VyLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqIEBhYnN0cmFjdFxuICAgKi9cbiAgZ2V0VHlwZSgpIHt9XG5cbiAgLyoqXG4gICAqIFRoZSByb290IG5vZGUgdGhlIGFuYWx5dGljcyBpcyBzY29wZWQgdG8uXG4gICAqXG4gICAqIEByZXR1cm4geyFEb2N1bWVudHwhU2hhZG93Um9vdHwhRWxlbWVudH1cbiAgICogQGFic3RyYWN0XG4gICAqL1xuICBnZXRSb290KCkge31cblxuICAvKipcbiAgICogVGhlIHZpZXdlciBvZiBhbmFseXRpY3Mgcm9vdFxuICAgKiBAcmV0dXJuIHshLi4vLi4vLi4vc3JjL3NlcnZpY2Uvdmlld2VyLWltcGwuVmlld2VyfVxuICAgKi9cbiAgZ2V0Vmlld2VyKCkge1xuICAgIHJldHVybiBTZXJ2aWNlcy52aWV3ZXJGb3JEb2ModGhpcy5hbXBkb2MpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSByb290IGVsZW1lbnQgd2l0aGluIHRoZSBhbmFseXRpY3Mgcm9vdC5cbiAgICpcbiAgICogQHJldHVybiB7IUVsZW1lbnR9XG4gICAqL1xuICBnZXRSb290RWxlbWVudCgpIHtcbiAgICBjb25zdCByb290ID0gdGhpcy5nZXRSb290KCk7XG4gICAgcmV0dXJuIGRldigpLmFzc2VydEVsZW1lbnQocm9vdC5kb2N1bWVudEVsZW1lbnQgfHwgcm9vdC5ib2R5IHx8IHJvb3QpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBob3N0IGVsZW1lbnQgb2YgdGhlIGFuYWx5dGljcyByb290LlxuICAgKlxuICAgKiBAcmV0dXJuIHs/RWxlbWVudH1cbiAgICogQGFic3RyYWN0XG4gICAqL1xuICBnZXRIb3N0RWxlbWVudCgpIHt9XG5cbiAgLyoqXG4gICAqIFRoZSBzaWduYWxzIGZvciB0aGUgcm9vdC5cbiAgICpcbiAgICogQHJldHVybiB7IS4uLy4uLy4uL3NyYy91dGlscy9zaWduYWxzLlNpZ25hbHN9XG4gICAqIEBhYnN0cmFjdFxuICAgKi9cbiAgc2lnbmFscygpIHt9XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhpcyBhbmFseXRpY3Mgcm9vdCBjb250YWlucyB0aGUgc3BlY2lmaWVkIG5vZGUuXG4gICAqXG4gICAqIEBwYXJhbSB7IU5vZGV9IG5vZGVcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGNvbnRhaW5zKG5vZGUpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRSb290KCkuY29udGFpbnMobm9kZSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZWxlbWVudCB3aXRoIHRoZSBzcGVjaWZpZWQgSUQgaW4gdGhlIHNjb3BlIG9mIHRoaXMgcm9vdC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVudXNlZElkXG4gICAqIEByZXR1cm4gez9FbGVtZW50fVxuICAgKiBAYWJzdHJhY3RcbiAgICovXG4gIGdldEVsZW1lbnRCeUlkKHVudXNlZElkKSB7fVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB0cmFja2VyIGZvciB0aGUgc3BlY2lmaWVkIG5hbWUgYW5kIGxpc3Qgb2YgYWxsb3dlZCB0eXBlcy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgZnVuY3Rpb24obmV3Oi4vZXZlbnRzLkV2ZW50VHJhY2tlcik+fSB3aGl0ZWxpc3RcbiAgICogQHJldHVybiB7Py4vZXZlbnRzLkV2ZW50VHJhY2tlcn1cbiAgICovXG4gIGdldFRyYWNrZXJGb3JXaGl0ZWxpc3QobmFtZSwgd2hpdGVsaXN0KSB7XG4gICAgY29uc3QgdHJhY2tlclByb2ZpbGUgPSB3aGl0ZWxpc3RbbmFtZV07XG4gICAgaWYgKHRyYWNrZXJQcm9maWxlKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRUcmFja2VyKG5hbWUsIHRyYWNrZXJQcm9maWxlKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdHJhY2tlciBmb3IgdGhlIHNwZWNpZmllZCBuYW1lIGFuZCB0eXBlLiBJZiB0aGUgdHJhY2tlclxuICAgKiBoYXMgbm90IGJlZW4gcmVxdWVzdGVkIGJlZm9yZSwgaXQgd2lsbCBiZSBjcmVhdGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKG5ldzouL2V2ZW50cy5DdXN0b21FdmVudFRyYWNrZXIsICFBbmFseXRpY3NSb290KXxmdW5jdGlvbihuZXc6Li9ldmVudHMuQ2xpY2tFdmVudFRyYWNrZXIsICFBbmFseXRpY3NSb290KXxmdW5jdGlvbihuZXc6Li9ldmVudHMuU2lnbmFsVHJhY2tlciwgIUFuYWx5dGljc1Jvb3QpfGZ1bmN0aW9uKG5ldzouL2V2ZW50cy5JbmlMb2FkVHJhY2tlciwgIUFuYWx5dGljc1Jvb3QpfGZ1bmN0aW9uKG5ldzouL2V2ZW50cy5WaWRlb0V2ZW50VHJhY2tlciwgIUFuYWx5dGljc1Jvb3QpfGZ1bmN0aW9uKG5ldzouL2V2ZW50cy5WaWRlb0V2ZW50VHJhY2tlciwgIUFuYWx5dGljc1Jvb3QpfGZ1bmN0aW9uKG5ldzouL2V2ZW50cy5WaXNpYmlsaXR5VHJhY2tlciwgIUFuYWx5dGljc1Jvb3QpfSBrbGFzc1xuICAgKiBAcmV0dXJuIHshLi9ldmVudHMuRXZlbnRUcmFja2VyfVxuICAgKi9cbiAgZ2V0VHJhY2tlcihuYW1lLCBrbGFzcykge1xuICAgIGxldCB0cmFja2VyID0gdGhpcy50cmFja2Vyc19bbmFtZV07XG4gICAgaWYgKCF0cmFja2VyKSB7XG4gICAgICB0cmFja2VyID0gbmV3IGtsYXNzKHRoaXMpO1xuICAgICAgdGhpcy50cmFja2Vyc19bbmFtZV0gPSB0cmFja2VyO1xuICAgIH1cbiAgICByZXR1cm4gdHJhY2tlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB0cmFja2VyIGZvciB0aGUgc3BlY2lmaWVkIG5hbWUgb3IgYG51bGxgLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcmV0dXJuIHs/Li9ldmVudHMuRXZlbnRUcmFja2VyfVxuICAgKi9cbiAgZ2V0VHJhY2tlck9wdGlvbmFsKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy50cmFja2Vyc19bbmFtZV0gfHwgbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWFyY2hlcyB0aGUgZWxlbWVudCB0aGF0IG1hdGNoZXMgdGhlIHNlbGVjdG9yIHdpdGhpbiB0aGUgc2NvcGUgb2YgdGhlXG4gICAqIGFuYWx5dGljcyByb290IGluIHJlbGF0aW9uc2hpcCB0byB0aGUgc3BlY2lmaWVkIGNvbnRleHQgbm9kZS5cbiAgICpcbiAgICogQHBhcmFtIHshRWxlbWVudH0gY29udGV4dFxuICAgKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3IgRE9NIHF1ZXJ5IHNlbGVjdG9yLlxuICAgKiBAcGFyYW0gez9zdHJpbmc9fSBzZWxlY3Rpb25NZXRob2QgQWxsb3dlZCB2YWx1ZXMgYXJlIGBudWxsYCxcbiAgICogICBgJ2Nsb3Nlc3QnYCBhbmQgYCdzY29wZSdgLlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhRWxlbWVudD59IEVsZW1lbnQgY29ycmVzcG9uZGluZyB0byB0aGUgc2VsZWN0b3IuXG4gICAqL1xuICBnZXRFbGVtZW50KGNvbnRleHQsIHNlbGVjdG9yLCBzZWxlY3Rpb25NZXRob2QgPSBudWxsKSB7XG4gICAgLy8gU3BlY2lhbCBjYXNlIHNlbGVjdG9ycy4gVGhlIHNlbGVjdGlvbiBtZXRob2QgaXMgaXJyZWxhdmFudC5cbiAgICAvLyBBbmQgbm8gbmVlZCB0byB3YWl0IGZvciBkb2N1bWVudCByZWFkeS5cbiAgICBpZiAoc2VsZWN0b3IgPT0gJzpyb290Jykge1xuICAgICAgcmV0dXJuIHRyeVJlc29sdmUoKCkgPT4gdGhpcy5nZXRSb290RWxlbWVudCgpKTtcbiAgICB9XG4gICAgaWYgKHNlbGVjdG9yID09ICc6aG9zdCcpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgcmVzb2x2ZSh1c2VyKCkuYXNzZXJ0RWxlbWVudChcbiAgICAgICAgICAgIHRoaXMuZ2V0SG9zdEVsZW1lbnQoKSwgYEVsZW1lbnQgXCIke3NlbGVjdG9yfVwiIG5vdCBmb3VuZGApKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFdhaXQgZm9yIGRvY3VtZW50LXJlYWR5IHRvIGF2b2lkIGZhbHNlIG1pc3NlZCBzZWFyY2hlc1xuICAgIHJldHVybiB0aGlzLmFtcGRvYy53aGVuUmVhZHkoKS50aGVuKCgpID0+IHtcbiAgICAgIGxldCBmb3VuZDtcbiAgICAgIGxldCByZXN1bHQgPSBudWxsO1xuICAgICAgLy8gUXVlcnkgc2VhcmNoIGJhc2VkIG9uIHRoZSBzZWxlY3Rpb24gbWV0aG9kLlxuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKHNlbGVjdGlvbk1ldGhvZCA9PSAnc2NvcGUnKSB7XG4gICAgICAgICAgZm91bmQgPSBzY29wZWRRdWVyeVNlbGVjdG9yKGNvbnRleHQsIHNlbGVjdG9yKTtcbiAgICAgICAgfSBlbHNlIGlmIChzZWxlY3Rpb25NZXRob2QgPT0gJ2Nsb3Nlc3QnKSB7XG4gICAgICAgICAgZm91bmQgPSBjbG9zZXN0QnlTZWxlY3Rvcihjb250ZXh0LCBzZWxlY3Rvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm91bmQgPSB0aGlzLmdldFJvb3QoKS5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB1c2VyKCkuYXNzZXJ0KGZhbHNlLCBgSW52YWxpZCBxdWVyeSBzZWxlY3RvciAke3NlbGVjdG9yfWApO1xuICAgICAgfVxuXG4gICAgICAvLyBET00gc2VhcmNoIGNhbiBcImxvb2tcIiBvdXRzaWRlIHRoZSBib3VuZGFyaWVzIG9mIHRoZSByb290LCB0aHVzIG1ha2VcbiAgICAgIC8vIHN1cmUgdGhlIHJlc3VsdCBpcyBjb250YWluZWQuXG4gICAgICBpZiAoZm91bmQgJiYgdGhpcy5jb250YWlucyhmb3VuZCkpIHtcbiAgICAgICAgcmVzdWx0ID0gZm91bmQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gdXNlcigpLmFzc2VydEVsZW1lbnQoXG4gICAgICAgICAgcmVzdWx0LCBgRWxlbWVudCBcIiR7c2VsZWN0b3J9XCIgbm90IGZvdW5kYCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2VhcmNoZXMgdGhlIEFNUCBlbGVtZW50IHRoYXQgbWF0Y2hlcyB0aGUgc2VsZWN0b3Igd2l0aGluIHRoZSBzY29wZSBvZiB0aGVcbiAgICogYW5hbHl0aWNzIHJvb3QgaW4gcmVsYXRpb25zaGlwIHRvIHRoZSBzcGVjaWZpZWQgY29udGV4dCBub2RlLlxuICAgKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fSBjb250ZXh0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzZWxlY3RvciBET00gcXVlcnkgc2VsZWN0b3IuXG4gICAqIEBwYXJhbSB7P3N0cmluZz19IHNlbGVjdGlvbk1ldGhvZCBBbGxvd2VkIHZhbHVlcyBhcmUgYG51bGxgLFxuICAgKiAgIGAnY2xvc2VzdCdgIGFuZCBgJ3Njb3BlJ2AuXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFBbXBFbGVtZW50Pn0gQU1QIGVsZW1lbnQgY29ycmVzcG9uZGluZyB0byB0aGUgc2VsZWN0b3IgaWYgZm91bmQuXG4gICAqL1xuICBnZXRBbXBFbGVtZW50KGNvbnRleHQsIHNlbGVjdG9yLCBzZWxlY3Rpb25NZXRob2QpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRFbGVtZW50KGNvbnRleHQsIHNlbGVjdG9yLCBzZWxlY3Rpb25NZXRob2QpLnRoZW4oZWxlbWVudCA9PiB7XG4gICAgICB1c2VyKCkuYXNzZXJ0KFxuICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpLWFtcGh0bWwtZWxlbWVudCcpLFxuICAgICAgICAgICdFbGVtZW50IFwiJXNcIiBpcyByZXF1aXJlZCB0byBiZSBhbiBBTVAgZWxlbWVudCcsIHNlbGVjdG9yKTtcbiAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgbGlzdGVuZXItZmlsdGVyIGZvciBET00gZXZlbnRzIHRvIGNoZWNrIGFnYWluc3QgdGhlIHNwZWNpZmllZFxuICAgKiBzZWxlY3Rvci4gSWYgdGhlIG5vZGUgKG9yIGl0cyBhbmNlc3RvcnMpIG1hdGNoIHRoZSBzZWxlY3RvciB0aGUgbGlzdGVuZXJcbiAgICogd2lsbCBiZSBjYWxsZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIUVsZW1lbnQsICFFdmVudCl9IGxpc3RlbmVyIFRoZSBmaXJzdCBhcmd1bWVudCBpcyB0aGVcbiAgICogICBtYXRjaGVkIHRhcmdldCBub2RlIGFuZCB0aGUgc2Vjb25kIGlzIHRoZSBvcmlnaW5hbCBldmVudC5cbiAgICogQHBhcmFtIHshRWxlbWVudH0gY29udGV4dFxuICAgKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3IgRE9NIHF1ZXJ5IHNlbGVjdG9yLlxuICAgKiBAcGFyYW0gez9zdHJpbmc9fSBzZWxlY3Rpb25NZXRob2QgQWxsb3dlZCB2YWx1ZXMgYXJlIGBudWxsYCxcbiAgICogICBgJ2Nsb3Nlc3QnYCBhbmQgYCdzY29wZSdgLlxuICAgKiBAcmV0dXJuIHtmdW5jdGlvbighRXZlbnQpfVxuICAgKi9cbiAgY3JlYXRlU2VsZWN0aXZlTGlzdGVuZXIoXG4gICAgbGlzdGVuZXIsIGNvbnRleHQsIHNlbGVjdG9yLCBzZWxlY3Rpb25NZXRob2QgPSBudWxsKSB7XG4gICAgcmV0dXJuIGV2ZW50ID0+IHtcbiAgICAgIGlmIChzZWxlY3RvciA9PSAnOmhvc3QnKSB7XG4gICAgICAgIC8vIGA6aG9zdGAgaXMgbm90IHJlYWNoYWJsZSB2aWEgc2VsZWN0aXZlIGxpc3RlbmVyIGIvYyBldmVudCBwYXRoXG4gICAgICAgIC8vIGNhbm5vdCBiZSByZXRhcmdldGVkIGFjcm9zcyB0aGUgYm91bmRhcnkgb2YgdGhlIGVtYmVkLlxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIE5hdmlnYXRlIHVwIHRoZSBET00gdHJlZSB0byBmaW5kIHRoZSBhY3R1YWwgdGFyZ2V0LlxuICAgICAgY29uc3Qgcm9vdEVsZW1lbnQgPSB0aGlzLmdldFJvb3RFbGVtZW50KCk7XG4gICAgICBjb25zdCBpc1NlbGVjdEFueSA9IChzZWxlY3RvciA9PSAnKicpO1xuICAgICAgY29uc3QgaXNTZWxlY3RSb290ID0gKHNlbGVjdG9yID09ICc6cm9vdCcpO1xuICAgICAgbGV0IHt0YXJnZXR9ID0gZXZlbnQ7XG4gICAgICB3aGlsZSAodGFyZ2V0KSB7XG5cbiAgICAgICAgLy8gVGFyZ2V0IG11c3QgYmUgY29udGFpbmVkIGJ5IHRoaXMgcm9vdC5cbiAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5zKHRhcmdldCkpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvLyBgOnNjb3BlYCBjb250ZXh0IG11c3QgY29udGFpbiB0aGUgdGFyZ2V0LlxuICAgICAgICBpZiAoc2VsZWN0aW9uTWV0aG9kID09ICdzY29wZScgJiZcbiAgICAgICAgICAgICFpc1NlbGVjdFJvb3QgJiYgIWNvbnRleHQuY29udGFpbnModGFyZ2V0KSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIC8vIGBjbG9zZXN0KClgIHRhcmdldCBtdXN0IGNvbnRhaW4gdGhlIGNvbmV4dC5cbiAgICAgICAgaWYgKHNlbGVjdGlvbk1ldGhvZCA9PSAnY2xvc2VzdCcgJiYgIXRhcmdldC5jb250YWlucyhjb250ZXh0KSkge1xuICAgICAgICAgIC8vIEhvd2V2ZXIsIHRoZSBzZWFyY2ggbXVzdCBjb250aW51ZSFcbiAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQucGFyZW50RWxlbWVudDtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSB0YXJnZXQgbWF0Y2hlcyB0aGUgc2VsZWN0b3IuXG4gICAgICAgIGlmIChpc1NlbGVjdEFueSB8fFxuICAgICAgICAgICAgKGlzU2VsZWN0Um9vdCAmJiB0YXJnZXQgPT0gcm9vdEVsZW1lbnQpIHx8XG4gICAgICAgICAgICBtYXRjaGVzTm9JbmxpbmUodGFyZ2V0LCBzZWxlY3RvcikpIHtcbiAgICAgICAgICBsaXN0ZW5lcih0YXJnZXQsIGV2ZW50KTtcbiAgICAgICAgICAvLyBEb24ndCBmaXJlIHRoZSBldmVudCBtdWx0aXBsZSB0aW1lcyBldmVuIGlmIHRoZSBtb3JlIHRoYW4gb25lXG4gICAgICAgICAgLy8gYW5jZXN0b3IgbWF0Y2hlcyB0aGUgc2VsZWN0b3IuXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICB0YXJnZXQgPSB0YXJnZXQucGFyZW50RWxlbWVudDtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHByb21pc2UgdGhhdCB3aWxsIGJlIHJlc29sdmVkIGFzIHNvb24gYXMgdGhlIGVsZW1lbnRzIHdpdGhpblxuICAgKiB0aGUgcm9vdCBoYXZlIGJlZW4gbG9hZGVkIGluc2lkZSB0aGUgZmlyc3Qgdmlld3BvcnQgb2YgdGhlIHJvb3QuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKiBAYWJzdHJhY3RcbiAgICovXG4gIHdoZW5JbmlMb2FkZWQoKSB7fVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB2aXNpYmlsaXR5IHJvb3QgY29ycmVzcG9uZGluZyB0byB0aGlzIGFuYWx5dGljcyByb290IChhbXBkb2NcbiAgICogb3IgZW1iZWQpLiBUaGUgdmlzaWJpbGl0eSByb290IGlzIGNyZWF0ZWQgbGF6aWx5IGFzIG5lZWRlZCBhbmQgdGFrZXNcbiAgICogY2FyZSBvZiBhbGwgdmlzaWJpbGl0eSB0cmFja2luZyBmdW5jdGlvbnMuXG4gICAqIEByZXR1cm4geyEuL3Zpc2liaWxpdHktbWFuYWdlci5WaXNpYmlsaXR5TWFuYWdlcn1cbiAgICovXG4gIGdldFZpc2liaWxpdHlNYW5hZ2VyKCkge1xuICAgIGlmICghdGhpcy52aXNpYmlsaXR5TWFuYWdlcl8pIHtcbiAgICAgIHRoaXMudmlzaWJpbGl0eU1hbmFnZXJfID0gdGhpcy5jcmVhdGVWaXNpYmlsaXR5TWFuYWdlcigpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy52aXNpYmlsaXR5TWFuYWdlcl87XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IS4vdmlzaWJpbGl0eS1tYW5hZ2VyLlZpc2liaWxpdHlNYW5hZ2VyfVxuICAgKiBAcHJvdGVjdGVkXG4gICAqIEBhYnN0cmFjdFxuICAgKi9cbiAgY3JlYXRlVmlzaWJpbGl0eU1hbmFnZXIoKSB7fVxufVxuXG5cbi8qKlxuICogVGhlIGltcGxlbWVudGF0aW9uIG9mIHRoZSBhbmFseXRpY3Mgcm9vdCBmb3IgYW4gYW1wZG9jLlxuICovXG5leHBvcnQgY2xhc3MgQW1wZG9jQW5hbHl0aWNzUm9vdCBleHRlbmRzIEFuYWx5dGljc1Jvb3Qge1xuICAvKipcbiAgICogQHBhcmFtIHshLi4vLi4vLi4vc3JjL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBhbXBkb2NcbiAgICovXG4gIGNvbnN0cnVjdG9yKGFtcGRvYykge1xuICAgIHN1cGVyKGFtcGRvYywgLyogcGFyZW50ICovIG51bGwpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXRUeXBlKCkge1xuICAgIHJldHVybiAnYW1wZG9jJztcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0Um9vdCgpIHtcbiAgICByZXR1cm4gdGhpcy5hbXBkb2MuZ2V0Um9vdE5vZGUoKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0SG9zdEVsZW1lbnQoKSB7XG4gICAgLy8gYW1wZG9jIGlzIGFsd2F5cyB0aGUgcm9vdCBvZiBldmVyeXRoaW5nIC0gbm8gaG9zdC5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc2lnbmFscygpIHtcbiAgICByZXR1cm4gdGhpcy5hbXBkb2Muc2lnbmFscygpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXRFbGVtZW50QnlJZChpZCkge1xuICAgIHJldHVybiB0aGlzLmFtcGRvYy5nZXRFbGVtZW50QnlJZChpZCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHdoZW5JbmlMb2FkZWQoKSB7XG4gICAgY29uc3Qgdmlld3BvcnQgPSBTZXJ2aWNlcy52aWV3cG9ydEZvckRvYyh0aGlzLmFtcGRvYyk7XG4gICAgbGV0IHJlY3Q7XG4gICAgaWYgKGdldE1vZGUodGhpcy5hbXBkb2Mud2luKS5ydW50aW1lID09ICdpbmFib3gnKSB7XG4gICAgICAvLyBUT0RPKGR2b3l0ZW5rbywgIzc5NzEpOiBUaGlzIGlzIGN1cnJlbnRseSBhZGRyZXNzZXMgaW5jb3JyZWN0IHBvc2l0aW9uXG4gICAgICAvLyBjYWxjdWxhdGlvbnMgaW4gYSBpbi1hLWJveCB2aWV3cG9ydCB3aGVyZSBhbGwgZWxlbWVudHMgYXJlIG9mZnNldFxuICAgICAgLy8gdG8gdGhlIGJvdHRvbSBvZiB0aGUgZW1iZWQuIFRoZSBjdXJyZW50IGFwcHJvYWNoLCBldmVuIGlmIGZpeGVkLCBzdGlsbFxuICAgICAgLy8gY3JlYXRlcyBhIHNpZ25pZmljYW50IHByb2JhYmlsaXR5IG9mIHJpc2sgY29uZGl0aW9uLlxuICAgICAgLy8gT25jZSBhZGRyZXNzLCB3ZSBjYW4gc2ltcGx5IHN3aXRjaCB0byB0aGUgMC8wIGFwcHJvYWNoIGluIHRoZSBgZWxzZWBcbiAgICAgIC8vIGNsYXVzZS5cbiAgICAgIHJlY3QgPSB2aWV3cG9ydC5nZXRMYXlvdXRSZWN0KHRoaXMuZ2V0Um9vdEVsZW1lbnQoKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHNpemUgPSB2aWV3cG9ydC5nZXRTaXplKCk7XG4gICAgICByZWN0ID0gbGF5b3V0UmVjdEx0d2goMCwgMCwgc2l6ZS53aWR0aCwgc2l6ZS5oZWlnaHQpO1xuICAgIH1cbiAgICByZXR1cm4gd2hlbkNvbnRlbnRJbmlMb2FkKHRoaXMuYW1wZG9jLCB0aGlzLmFtcGRvYy53aW4sIHJlY3QpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBjcmVhdGVWaXNpYmlsaXR5TWFuYWdlcigpIHtcbiAgICByZXR1cm4gbmV3IFZpc2liaWxpdHlNYW5hZ2VyRm9yRG9jKHRoaXMuYW1wZG9jKTtcbiAgfVxufVxuXG5cbi8qKlxuICogVGhlIGltcGxlbWVudGF0aW9uIG9mIHRoZSBhbmFseXRpY3Mgcm9vdCBmb3IgRklFLlxuICovXG5leHBvcnQgY2xhc3MgRW1iZWRBbmFseXRpY3NSb290IGV4dGVuZHMgQW5hbHl0aWNzUm9vdCB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyEuLi8uLi8uLi9zcmMvc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGFtcGRvY1xuICAgKiBAcGFyYW0geyEuLi8uLi8uLi9zcmMvZnJpZW5kbHktaWZyYW1lLWVtYmVkLkZyaWVuZGx5SWZyYW1lRW1iZWR9IGVtYmVkXG4gICAqIEBwYXJhbSB7P0FuYWx5dGljc1Jvb3R9IHBhcmVudFxuICAgKi9cbiAgY29uc3RydWN0b3IoYW1wZG9jLCBlbWJlZCwgcGFyZW50KSB7XG4gICAgc3VwZXIoYW1wZG9jLCBwYXJlbnQpO1xuICAgIC8qKiBAY29uc3QgKi9cbiAgICB0aGlzLmVtYmVkID0gZW1iZWQ7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldFR5cGUoKSB7XG4gICAgcmV0dXJuICdlbWJlZCc7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldFJvb3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuZW1iZWQud2luLmRvY3VtZW50O1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXRIb3N0RWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5lbWJlZC5pZnJhbWU7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNpZ25hbHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZW1iZWQuc2lnbmFscygpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXRFbGVtZW50QnlJZChpZCkge1xuICAgIHJldHVybiB0aGlzLmVtYmVkLndpbi5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHdoZW5JbmlMb2FkZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZW1iZWQud2hlbkluaUxvYWRlZCgpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBjcmVhdGVWaXNpYmlsaXR5TWFuYWdlcigpIHtcbiAgICByZXR1cm4gbmV3IFZpc2liaWxpdHlNYW5hZ2VyRm9yRW1iZWQoXG4gICAgICAgIHRoaXMucGFyZW50LmdldFZpc2liaWxpdHlNYW5hZ2VyKCksXG4gICAgICAgIHRoaXMuZW1iZWQpO1xuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0gIHshRWxlbWVudH0gZWxcbiAqIEBwYXJhbSAge3N0cmluZ30gc2VsZWN0b3JcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIG1hdGNoZXNOb0lubGluZShlbCwgc2VsZWN0b3IpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gbWF0Y2hlcyhlbCwgc2VsZWN0b3IpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdXNlcigpLmVycm9yKFRBRywgJ0JhZCBxdWVyeSBzZWxlY3Rvci4nLCBzZWxlY3RvciwgZSk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtnZXRNb2RlfSBmcm9tICcuLi8uLi8uLi9zcmMvbW9kZSc7XG5cbi8qKiBAdHlwZWRlZiB7e1xuICogICAgdHJpZ2dlcjogc3RyaW5nLFxuICogICAgdGltZXN0YW1wOiBudWxsLFxuICogICAgZXh0cmFVcmxQYXJhbXM6ID9Kc29uT2JqZWN0XG4gKiAgfX0gKi9cbmV4cG9ydCBsZXQgYmF0Y2hTZWdtZW50RGVmO1xuXG4vKipcbiAqIFBsZWFzZSByZWdpc3RlciB5b3VyIGJhdGNoIHBsdWdpbiBmdW5jdGlvbiBiZWxvdy5cbiAqIFBsZWFzZSBrZWVwIHRoZSBvYmplY3QgaW4gYWxwaGFiZXRpYyBvcmRlci5cbiAqIE5vdGU6IGV4dHJhVXJsUGFyYW1zIHBhc3NlZCBpbiBhcmUgbm90IGVuY29kZWQuIFBsZWFzZSBtYWtlIHN1cmUgdG8gcHJvcGVyXG4gKiBlbmNvZGUgc2VnbWVudHMgYW5kIG1ha2Ugc3VyZSB0aGUgZmluYWwgb3V0cHV0IHVybCBpcyB2YWxpZC5cbiAqL1xuZXhwb3J0IGNvbnN0IEJhdGNoaW5nUGx1Z2luRnVuY3Rpb25zID0ge1xuICAnX3BpbmdfJzogcGluZyxcbn07XG5cblxuLyoqXG4gKiBQbGVhc2UgYWRkIHlvdXIgYmF0Y2ggcGx1Z2luIGZ1bmN0aW9uIGJlbG93IGluIGFscGhhYmV0aWMgb3JkZXIuIEFsbCBiYXRjaFxuICogcGx1Z2luIGZ1bmN0aW9uIHNob3VsZCBhY2NlcHQgaW5wdXQgb2YgYSBzdHJpbmcsIGFuIGFycmF5IG9mIGJhdGNoU2VnbWVudFxuICogVGhlbiByZXR1cm4gYSBzdHJpbmcuIE5vdGU6IGV4dHJhVXJsUGFyYW1zIHBhc3NlZCBpbiBhcmUgbm90IGVuY29kZWQuIFBsZWFzZVxuICogbWFrZSBzdXJlIHRvIHByb3BlciBlbmNvZGUgc2VnbWVudHMgYW5kIG1ha2Ugc3VyZSB0aGUgZmluYWwgb3V0cHV0IHVybCBpc1xuICogdmFsaWQuXG4gKi9cblxuLy8gQmVsb3cgaXMgYSBmdW5jdGlvbiBwcm90b3R5cGUgZm9yIGVhc3kgY29weVxuLy8gLyoqXG4vLyAgKiBAcGFyYW0ge3N0cmluZ30gYmFzZVVybFxuLy8gICogQHBhcmFtIHtBcnJheTwhYmF0Y2hTZWdtZW50RGVmPn0gYmF0Y2hTZWdtZW50c1xuLy8gICogQHJldHVybiB7c3RyaW5nfVxuLy8gICovXG4vLyBmdW5jdGlvbiBwaW5nKGJhc2VVcmwsIGJhdGNoU2VnbWVudHMpIHt9XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHVudXNlZEJhc2VVcmxGb3JUZXN0aW5nXG4gKiBAcGFyYW0ge0FycmF5PCFiYXRjaFNlZ21lbnREZWY+fSB1bnVzZWRCYXRjaFNlZ21lbnRzRm9yVGVzdGluZ1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBwaW5nKHVudXNlZEJhc2VVcmxGb3JUZXN0aW5nLCB1bnVzZWRCYXRjaFNlZ21lbnRzRm9yVGVzdGluZykge1xuICBpZiAoZ2V0TW9kZSgpLmxvY2FsRGV2IHx8IGdldE1vZGUoKS50ZXN0KSB7XG4gICAgcmV0dXJuICd0ZXN0RmluYWxVcmwnO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcignYmF0Y2hQbHVnaW4gX3BpbmdfIGlzIGZvciB0ZXN0aW5nIG9ubHknKTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge0FOQUxZVElDU19DT05GSUd9IGZyb20gJy4vdmVuZG9ycyc7XG5pbXBvcnQge1NlcnZpY2VzfSBmcm9tICcuLi8uLi8uLi9zcmMvc2VydmljZXMnO1xuaW1wb3J0IHthc3NlcnRIdHRwc1VybH0gZnJvbSAnLi4vLi4vLi4vc3JjL3VybCc7XG5pbXBvcnQge2RldiwgdXNlcn0gZnJvbSAnLi4vLi4vLi4vc3JjL2xvZyc7XG5pbXBvcnQge2RpY3QsIGhhc093bn0gZnJvbSAnLi4vLi4vLi4vc3JjL3V0aWxzL29iamVjdCc7XG5pbXBvcnQge2dldE1vZGV9IGZyb20gJy4uLy4uLy4uL3NyYy9tb2RlJztcbmltcG9ydCB7aXNBcnJheSwgaXNPYmplY3R9IGZyb20gJy4uLy4uLy4uL3NyYy90eXBlcyc7XG5pbXBvcnQge2lzSnNvblNjcmlwdFRhZ30gZnJvbSAnLi4vLi4vLi4vc3JjL2RvbSc7XG5pbXBvcnQge3BhcnNlSnNvbn0gZnJvbSAnLi4vLi4vLi4vc3JjL2pzb24nO1xuaW1wb3J0IHt0b1dpbn0gZnJvbSAnLi4vLi4vLi4vc3JjL3R5cGVzJztcblxuY29uc3QgVEFHID0gJ2FuYWx5dGljcy1jb25maWcnO1xuXG5leHBvcnQgY2xhc3MgQW5hbHl0aWNzQ29uZmlnIHtcblxuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICAgKi9cbiAgY29uc3RydWN0b3IoZWxlbWVudCkge1xuXG4gICAgLyoqIEBwcml2YXRlIHshRWxlbWVudH0gKi9cbiAgICB0aGlzLmVsZW1lbnRfID0gZWxlbWVudDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P1dpbmRvd30gKi9cbiAgICB0aGlzLndpbl8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQGNvbnN0IHshSnNvbk9iamVjdH0gQ29waWVkIGhlcmUgZm9yIHRlc3RzLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5wcmVkZWZpbmVkQ29uZmlnXyA9IEFOQUxZVElDU19DT05GSUc7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZSB7SnNvbk9iamVjdH1cbiAgICAgKi9cbiAgICB0aGlzLmNvbmZpZ18gPSBkaWN0KCk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZSB7SnNvbk9iamVjdH1cbiAgICAgKi9cbiAgICB0aGlzLnJlbW90ZUNvbmZpZ18gPSBkaWN0KCk7XG5cbiAgICAvKiogQHByaXZhdGUge2Jvb2xlYW59ICovXG4gICAgdGhpcy5pc1NhbmRib3hfID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IVByb21pc2U8SnNvbk9iamVjdD59XG4gICAqL1xuICBsb2FkQ29uZmlnKCkge1xuICAgIHRoaXMud2luXyA9IHRoaXMuZWxlbWVudF8ub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldztcbiAgICB0aGlzLmlzU2FuZGJveF8gPSB0aGlzLmVsZW1lbnRfLmhhc0F0dHJpYnV0ZSgnc2FuZGJveCcpO1xuXG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hSZW1vdGVDb25maWdfKClcbiAgICAgICAgLnRoZW4odGhpcy5wcm9jZXNzQ29uZmlnc18uYmluZCh0aGlzKSlcbiAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy5jb25maWdfKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gY29uZmlndXJhdGlvbiBpcyByZS13cml0dGVuIGlmXG4gICAqIGNvbmZpZ1Jld3JpdGVyIGlzIGNvbmZpZ3VyZWQgYnkgYSB2ZW5kb3IuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm4geyFQcm9taXNlPHVuZGVmaW5lZD59XG4gICAqL1xuICBwcm9jZXNzQ29uZmlnc18oKSB7XG4gICAgY29uc3QgY29uZmlnUmV3cml0ZXJVcmwgPSB0aGlzLmdldENvbmZpZ1Jld3JpdGVyXygpWyd1cmwnXTtcblxuICAgIGNvbnN0IGNvbmZpZyA9IGRpY3Qoe30pO1xuICAgIGNvbnN0IGlubGluZUNvbmZpZyA9IHRoaXMuZ2V0SW5saW5lQ29uZmlnTm9JbmxpbmUoKTtcbiAgICB0aGlzLnZhbGlkYXRlVHJhbnNwb3J0XyhpbmxpbmVDb25maWcpO1xuICAgIG1lcmdlT2JqZWN0cyhpbmxpbmVDb25maWcsIGNvbmZpZyk7XG4gICAgbWVyZ2VPYmplY3RzKHRoaXMucmVtb3RlQ29uZmlnXywgY29uZmlnKTtcblxuICAgIGlmICghY29uZmlnUmV3cml0ZXJVcmwgfHwgdGhpcy5pc1NhbmRib3hfKSB7XG4gICAgICB0aGlzLmNvbmZpZ18gPSB0aGlzLm1lcmdlQ29uZmlnc18oY29uZmlnKTtcbiAgICAgIC8vIHVzZSBkZWZhdWx0IGNvbmZpZ3VyYXRpb24gbWVyZ2UuXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgYXNzZXJ0SHR0cHNVcmwoY29uZmlnUmV3cml0ZXJVcmwsIHRoaXMuZWxlbWVudF8pO1xuICAgIGNvbnN0IFRBRyA9IHRoaXMuZ2V0TmFtZV8oKTtcbiAgICBkZXYoKS5maW5lKFRBRywgJ1Jld3JpdGluZyBjb25maWcnLCBjb25maWdSZXdyaXRlclVybCk7XG5cbiAgICBjb25zdCBmZXRjaENvbmZpZyA9IHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogY29uZmlnLFxuICAgICAgcmVxdWlyZUFtcFJlc3BvbnNlU291cmNlT3JpZ2luOiBmYWxzZSxcbiAgICB9O1xuICAgIGlmICh0aGlzLmVsZW1lbnRfLmhhc0F0dHJpYnV0ZSgnZGF0YS1jcmVkZW50aWFscycpKSB7XG4gICAgICBmZXRjaENvbmZpZy5jcmVkZW50aWFscyA9IHRoaXMuZWxlbWVudF8uZ2V0QXR0cmlidXRlKCdkYXRhLWNyZWRlbnRpYWxzJyk7XG4gICAgfVxuICAgIHJldHVybiBTZXJ2aWNlcy51cmxSZXBsYWNlbWVudHNGb3JEb2ModGhpcy5lbGVtZW50XylcbiAgICAgICAgLmV4cGFuZFVybEFzeW5jKGNvbmZpZ1Jld3JpdGVyVXJsKVxuICAgICAgICAudGhlbihleHBhbmRlZFVybCA9PiB7XG4gICAgICAgICAgcmV0dXJuIFNlcnZpY2VzLnhockZvcih0b1dpbih0aGlzLndpbl8pKS5mZXRjaEpzb24oXG4gICAgICAgICAgICAgIGV4cGFuZGVkVXJsLCBmZXRjaENvbmZpZyk7XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxuICAgICAgICAudGhlbihqc29uVmFsdWUgPT4ge1xuICAgICAgICAgIHRoaXMuY29uZmlnXyA9IHRoaXMubWVyZ2VDb25maWdzXyhqc29uVmFsdWUpO1xuICAgICAgICAgIGRldigpLmZpbmUoVEFHLCAnQ29uZmlndXJhdGlvbiByZS13cml0dGVuJywgY29uZmlnUmV3cml0ZXJVcmwpO1xuICAgICAgICB9LCBlcnIgPT4ge1xuICAgICAgICAgIHVzZXIoKS5lcnJvcihUQUcsXG4gICAgICAgICAgICAgICdFcnJvciByZXdyaXRpbmcgY29uZmlndXJhdGlvbjogJywgY29uZmlnUmV3cml0ZXJVcmwsIGVycik7XG4gICAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiByZW1vdGUgY29uZmlnIGlzIHJlYWR5IChvclxuICAgKiBpbW1lZGlhdGVseSBpZiBubyByZW1vdGUgY29uZmlnIGlzIHNwZWNpZmllZC4pXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm4geyFQcm9taXNlPHVuZGVmaW5lZD59XG4gICAqL1xuICBmZXRjaFJlbW90ZUNvbmZpZ18oKSB7XG4gICAgbGV0IHJlbW90ZUNvbmZpZ1VybCA9IHRoaXMuZWxlbWVudF8uZ2V0QXR0cmlidXRlKCdjb25maWcnKTtcbiAgICBpZiAoIXJlbW90ZUNvbmZpZ1VybCB8fCB0aGlzLmlzU2FuZGJveF8pIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgYXNzZXJ0SHR0cHNVcmwocmVtb3RlQ29uZmlnVXJsLCB0aGlzLmVsZW1lbnRfKTtcbiAgICBjb25zdCBUQUcgPSB0aGlzLmdldE5hbWVfKCk7XG4gICAgZGV2KCkuZmluZShUQUcsICdGZXRjaGluZyByZW1vdGUgY29uZmlnJywgcmVtb3RlQ29uZmlnVXJsKTtcbiAgICBjb25zdCBmZXRjaENvbmZpZyA9IHtcbiAgICAgIHJlcXVpcmVBbXBSZXNwb25zZVNvdXJjZU9yaWdpbjogZmFsc2UsXG4gICAgfTtcbiAgICBpZiAodGhpcy5lbGVtZW50Xy5oYXNBdHRyaWJ1dGUoJ2RhdGEtY3JlZGVudGlhbHMnKSkge1xuICAgICAgZmV0Y2hDb25maWcuY3JlZGVudGlhbHMgPSB0aGlzLmVsZW1lbnRfLmdldEF0dHJpYnV0ZSgnZGF0YS1jcmVkZW50aWFscycpO1xuICAgIH1cbiAgICByZXR1cm4gU2VydmljZXMudXJsUmVwbGFjZW1lbnRzRm9yRG9jKHRoaXMuZWxlbWVudF8pXG4gICAgICAgIC5leHBhbmRVcmxBc3luYyhyZW1vdGVDb25maWdVcmwpXG4gICAgICAgIC50aGVuKGV4cGFuZGVkVXJsID0+IHtcbiAgICAgICAgICByZW1vdGVDb25maWdVcmwgPSBleHBhbmRlZFVybDtcbiAgICAgICAgICByZXR1cm4gU2VydmljZXMueGhyRm9yKHRvV2luKHRoaXMud2luXykpLmZldGNoSnNvbihcbiAgICAgICAgICAgICAgcmVtb3RlQ29uZmlnVXJsLCBmZXRjaENvbmZpZyk7XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxuICAgICAgICAudGhlbihqc29uVmFsdWUgPT4ge1xuICAgICAgICAgIHRoaXMucmVtb3RlQ29uZmlnXyA9IGpzb25WYWx1ZTtcbiAgICAgICAgICBkZXYoKS5maW5lKFRBRywgJ1JlbW90ZSBjb25maWcgbG9hZGVkJywgcmVtb3RlQ29uZmlnVXJsKTtcbiAgICAgICAgfSwgZXJyID0+IHtcbiAgICAgICAgICB1c2VyKCkuZXJyb3IoVEFHLFxuICAgICAgICAgICAgICAnRXJyb3IgbG9hZGluZyByZW1vdGUgY29uZmlnOiAnLCByZW1vdGVDb25maWdVcmwsIGVycik7XG4gICAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIE1lcmdlcyB2YXJpb3VzIHNvdXJjZXMgb2YgY29uZmlncyBhbmQgc3RvcmVzIHRoZW0gaW4gYSBtZW1iZXIgdmFyaWFibGUuXG4gICAqXG4gICAqIE9yZGVyIG9mIHByZWNlZGVuY2UgZm9yIGNvbmZpZ3MgZnJvbSBoaWdoZXN0IHRvIGxvd2VzdDpcbiAgICogLSBSZW1vdGUgY29uZmlnOiBzcGVjaWZpZWQgdGhyb3VnaCBhbiBhdHRyaWJ1dGUgb2YgdGhlIHRhZy5cbiAgICogLSBJbmxpbmUgY29uZmlnOiBzcGVjaWZpZWQgaW5zaXplIHRoZSB0YWcuXG4gICAqIC0gUHJlZGVmaW5lZCBjb25maWc6IERlZmluZWQgYXMgcGFydCBvZiB0aGUgcGxhdGZvcm0uXG4gICAqIC0gRGVmYXVsdCBjb25maWc6IEJ1aWx0LWluIGNvbmZpZyBzaGFyZWQgYnkgYWxsIGFtcC1hbmFseXRpY3MgdGFncy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHshSnNvbk9iamVjdH0gcmV3cml0dGVuQ29uZmlnXG4gICAqIEByZXR1cm4geyFKc29uT2JqZWN0fVxuICAgKi9cbiAgbWVyZ2VDb25maWdzXyhyZXdyaXR0ZW5Db25maWcpIHtcbiAgICAvLyBJbml0aWFsaXplIGNvbmZpZyB3aXRoIGFuYWx5dGljcyByZWxhdGVkIHZhcnMuXG4gICAgY29uc3QgY29uZmlnID0gZGljdCh7XG4gICAgICAndmFycyc6IHtcbiAgICAgICAgJ3JlcXVlc3RDb3VudCc6IDAsXG4gICAgICB9LFxuICAgIH0pO1xuICAgIGNvbnN0IGRlZmF1bHRDb25maWcgPSB0aGlzLnByZWRlZmluZWRDb25maWdfWydkZWZhdWx0J10gfHwge307XG4gICAgbWVyZ2VPYmplY3RzKGV4cGFuZENvbmZpZ1JlcXVlc3QoZGVmYXVsdENvbmZpZyksIGNvbmZpZyk7XG4gICAgbWVyZ2VPYmplY3RzKGV4cGFuZENvbmZpZ1JlcXVlc3QodGhpcy5nZXRUeXBlQ29uZmlnXygpKSwgY29uZmlnLFxuICAgICAgICAvKiBwcmVkZWZpbmVkICovIHRydWUpO1xuICAgIG1lcmdlT2JqZWN0cyhleHBhbmRDb25maWdSZXF1ZXN0KHJld3JpdHRlbkNvbmZpZyksIGNvbmZpZyk7XG4gICAgcmV0dXJuIGNvbmZpZztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWFkcyBjb25maWdSZXdyaXRlciBmcm9tIGEgdmVuZG9yIGNvbmZpZy5cbiAgICogQHJldHVybiB7IUpzb25PYmplY3R9XG4gICAqL1xuICBnZXRDb25maWdSZXdyaXRlcl8oKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VHlwZUNvbmZpZ18oKVsnY29uZmlnUmV3cml0ZXInXSB8fCB7fTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWFkcyBhIHZlbmRvciBjb25maWd1cmF0aW9uLlxuICAgKiBAcmV0dXJuIHshSnNvbk9iamVjdH1cbiAgICovXG4gIGdldFR5cGVDb25maWdfKCkge1xuICAgIGNvbnN0IHR5cGUgPSB0aGlzLmVsZW1lbnRfLmdldEF0dHJpYnV0ZSgndHlwZScpO1xuICAgIHJldHVybiB0aGlzLnByZWRlZmluZWRDb25maWdfW3R5cGVdIHx8IHt9O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXR1cm4geyFKc29uT2JqZWN0fVxuICAgKi9cbiAgZ2V0SW5saW5lQ29uZmlnTm9JbmxpbmUoKSB7XG4gICAgaWYgKHRoaXMuZWxlbWVudF8uQ09ORklHKSB7XG4gICAgICAvLyBJZiB0aGUgYW5hbHl0aWNzIGVsZW1lbnQgaXMgY3JlYXRlZCBieSBydW50aW1lLCByZXR1cm4gY2FjaGVkIGNvbmZpZy5cbiAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRfLkNPTkZJRztcbiAgICB9XG4gICAgbGV0IGlubGluZUNvbmZpZyA9IHt9O1xuICAgIGNvbnN0IFRBRyA9IHRoaXMuZ2V0TmFtZV8oKTtcbiAgICB0cnkge1xuICAgICAgY29uc3Qge2NoaWxkcmVufSA9IHRoaXMuZWxlbWVudF87XG4gICAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID09IDEpIHtcbiAgICAgICAgY29uc3QgY2hpbGQgPSBjaGlsZHJlblswXTtcbiAgICAgICAgaWYgKGlzSnNvblNjcmlwdFRhZyhjaGlsZCkpIHtcbiAgICAgICAgICBpbmxpbmVDb25maWcgPSBwYXJzZUpzb24oY2hpbGRyZW5bMF0udGV4dENvbnRlbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVzZXIoKS5lcnJvcihUQUcsICdUaGUgYW5hbHl0aWNzIGNvbmZpZyBzaG91bGQgJyArXG4gICAgICAgICAgICAgICdiZSBwdXQgaW4gYSA8c2NyaXB0PiB0YWcgd2l0aCB0eXBlPVwiYXBwbGljYXRpb24vanNvblwiJyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoY2hpbGRyZW4ubGVuZ3RoID4gMSkge1xuICAgICAgICB1c2VyKCkuZXJyb3IoVEFHLCAnVGhlIHRhZyBzaG91bGQgY29udGFpbiBvbmx5IG9uZScgK1xuICAgICAgICAgICAgJyA8c2NyaXB0PiBjaGlsZC4nKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGVyKSB7XG4gICAgICB1c2VyKCkuZXJyb3IoVEFHLCAnQW5hbHl0aWNzIGNvbmZpZyBjb3VsZCBub3QgYmUgJyArXG4gICAgICAgICAgJ3BhcnNlZC4gSXMgaXQgaW4gYSB2YWxpZCBKU09OIGZvcm1hdD8nLCBlcik7XG4gICAgfVxuICAgIHJldHVybiAvKiogQHR5cGUgeyFKc29uT2JqZWN0fSAqLyAoaW5saW5lQ29uZmlnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZXMgdHJhbnNwb3J0IGNvbmZpZ3VyYXRpb24uXG4gICAqIEBwYXJhbSB7IUpzb25PYmplY3R9IGlubGluZUNvbmZpZ1xuICAgKi9cbiAgdmFsaWRhdGVUcmFuc3BvcnRfKGlubGluZUNvbmZpZykge1xuICAgIGNvbnN0IHR5cGUgPSB0aGlzLmVsZW1lbnRfLmdldEF0dHJpYnV0ZSgndHlwZScpO1xuICAgIGlmICh0aGlzLnByZWRlZmluZWRDb25maWdfW3R5cGVdKSB7XG4gICAgICAvLyBUT0RPKHpob3V5eCwgIzcwOTYpIFRyYWNrIG92ZXJ3cml0ZSBwZXJjZW50YWdlLiBQcmV2ZW50IHRyYW5zcG9ydFxuICAgICAgLy8gb3ZlcndyaXRpbmdcbiAgICAgIGlmIChpbmxpbmVDb25maWdbJ3RyYW5zcG9ydCddIHx8IHRoaXMucmVtb3RlQ29uZmlnX1sndHJhbnNwb3J0J10pIHtcbiAgICAgICAgY29uc3QgVEFHID0gdGhpcy5nZXROYW1lXygpO1xuICAgICAgICB1c2VyKCkuZXJyb3IoVEFHLCAnSW5saW5lIG9yIHJlbW90ZSBjb25maWcgc2hvdWxkIG5vdCAnICtcbiAgICAgICAgICAgICdvdmVyd3JpdGUgdmVuZG9yIHRyYW5zcG9ydCBzZXR0aW5ncycpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIERvIE5PVCBhbGxvdyBpbmxpbmUgb3IgcmVtb3RlIGNvbmZpZyB0byB1c2UgJ3RyYW5zcG9ydDogaWZyYW1lJ1xuICAgIGlmIChpbmxpbmVDb25maWdbJ3RyYW5zcG9ydCddICYmIGlubGluZUNvbmZpZ1sndHJhbnNwb3J0J11bJ2lmcmFtZSddKSB7XG4gICAgICB1c2VyKCkuZXJyb3IoVEFHLCAnSW5saW5lIGNvbmZpZ3MgYXJlIG5vdCBhbGxvd2VkIHRvICcgK1xuICAgICAgICAgICdzcGVjaWZ5IHRyYW5zcG9ydCBpZnJhbWUnKTtcbiAgICAgIGlmICghZ2V0TW9kZSgpLmxvY2FsRGV2IHx8IGdldE1vZGUoKS50ZXN0KSB7XG4gICAgICAgIGlubGluZUNvbmZpZ1sndHJhbnNwb3J0J11bJ2lmcmFtZSddID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnJlbW90ZUNvbmZpZ19bJ3RyYW5zcG9ydCddICYmXG4gICAgICAgIHRoaXMucmVtb3RlQ29uZmlnX1sndHJhbnNwb3J0J11bJ2lmcmFtZSddKSB7XG4gICAgICB1c2VyKCkuZXJyb3IoVEFHLCAnUmVtb3RlIGNvbmZpZ3MgYXJlIG5vdCBhbGxvd2VkIHRvICcgK1xuICAgICAgICAgICdzcGVjaWZ5IHRyYW5zcG9ydCBpZnJhbWUnKTtcbiAgICAgIHRoaXMucmVtb3RlQ29uZmlnX1sndHJhbnNwb3J0J11bJ2lmcmFtZSddID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFJldHVybnMgYSBzdHJpbmcgdG8gaWRlbnRpZnkgdGhpcyB0YWcuIE1heSBub3QgYmUgdW5pcXVlXG4gICAqIGlmIHRoZSBlbGVtZW50IGlkIGlzIG5vdCB1bmlxdWUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXROYW1lXygpIHtcbiAgICByZXR1cm4gJ0FtcEFuYWx5dGljcyAnICtcbiAgICAgICAgKHRoaXMuZWxlbWVudF8uZ2V0QXR0cmlidXRlKCdpZCcpIHx8ICc8dW5rbm93biBpZD4nKTtcbiAgfVxufVxuXG5cbi8qKlxuICogTWVyZ2VzIHR3byBvYmplY3RzLiBJZiB0aGUgdmFsdWUgaXMgYXJyYXkgb3IgcGxhaW4gb2JqZWN0LCB0aGUgdmFsdWVzIGFyZVxuICogbWVyZ2VkIG90aGVyd2lzZSB0aGUgdmFsdWUgaXMgb3ZlcndyaXR0ZW4uXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IGZyb20gT2JqZWN0IG9yIGFycmF5IHRvIG1lcmdlIGZyb21cbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSB0byBPYmplY3Qgb3IgQXJyYXkgdG8gbWVyZ2UgaW50b1xuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X3ByZWRlZmluZWRDb25maWdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlT2JqZWN0cyhmcm9tLCB0bywgb3B0X3ByZWRlZmluZWRDb25maWcpIHtcbiAgaWYgKHRvID09PSBudWxsIHx8IHRvID09PSB1bmRlZmluZWQpIHtcbiAgICB0byA9IHt9O1xuICB9XG5cbiAgLy8gQXNzZXJ0IHRoYXQgb3B0b3V0cyBhcmUgYWxsb3dlZCBvbmx5IGluIHByZWRlZmluZWQgY29uZmlncy5cbiAgLy8gVGhlIGxhc3QgZXhwcmVzc2lvbiBhZGRzIGFuIGV4Y2VwdGlvbiBvZiBrbm93biwgc2FmZSBvcHRvdXQgZnVuY3Rpb25cbiAgLy8gdGhhdCBpcyBhbHJlYWR5IGJlaW5nIHVzZWQgaW4gdGhlIHdpbGQuXG4gIHVzZXIoKS5hc3NlcnQob3B0X3ByZWRlZmluZWRDb25maWdcbiAgICAgIHx8ICFmcm9tIHx8ICFmcm9tWydvcHRvdXQnXVxuICAgICAgfHwgZnJvbVsnb3B0b3V0J10gPT0gJ19nYVVzZXJQcmVmcy5pb28nLFxuICAnb3B0b3V0IHByb3BlcnR5IGlzIG9ubHkgYXZhaWxhYmxlIHRvIHZlbmRvciBjb25maWcuJyk7XG5cbiAgZm9yIChjb25zdCBwcm9wZXJ0eSBpbiBmcm9tKSB7XG4gICAgdXNlcigpLmFzc2VydChvcHRfcHJlZGVmaW5lZENvbmZpZyB8fCBwcm9wZXJ0eSAhPSAnaWZyYW1lUGluZycsXG4gICAgICAgICdpZnJhbWVQaW5nIGNvbmZpZyBpcyBvbmx5IGF2YWlsYWJsZSB0byB2ZW5kb3IgY29uZmlnLicpO1xuICAgIC8vIE9ubHkgZGVhbCB3aXRoIG93biBwcm9wZXJ0aWVzLlxuICAgIGlmIChoYXNPd24oZnJvbSwgcHJvcGVydHkpKSB7XG4gICAgICBpZiAoaXNBcnJheShmcm9tW3Byb3BlcnR5XSkpIHtcbiAgICAgICAgaWYgKCFpc0FycmF5KHRvW3Byb3BlcnR5XSkpIHtcbiAgICAgICAgICB0b1twcm9wZXJ0eV0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICB0b1twcm9wZXJ0eV0gPSBtZXJnZU9iamVjdHMoZnJvbVtwcm9wZXJ0eV0sIHRvW3Byb3BlcnR5XSxcbiAgICAgICAgICAgIG9wdF9wcmVkZWZpbmVkQ29uZmlnKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3QoZnJvbVtwcm9wZXJ0eV0pKSB7XG4gICAgICAgIGlmICghaXNPYmplY3QodG9bcHJvcGVydHldKSkge1xuICAgICAgICAgIHRvW3Byb3BlcnR5XSA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIHRvW3Byb3BlcnR5XSA9IG1lcmdlT2JqZWN0cyhmcm9tW3Byb3BlcnR5XSwgdG9bcHJvcGVydHldLFxuICAgICAgICAgICAgb3B0X3ByZWRlZmluZWRDb25maWcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG9bcHJvcGVydHldID0gZnJvbVtwcm9wZXJ0eV07XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB0bztcbn1cblxuLyoqXG4gKiBFeHBhbmQgY29uZmlnJ3MgcmVxdWVzdCB0byBvYmplY3RcbiAqIEBwYXJhbSB7IUpzb25PYmplY3R9IGNvbmZpZ1xuICogQHZpc2libGVGb3JUZXN0aW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHBhbmRDb25maWdSZXF1ZXN0KGNvbmZpZykge1xuICBpZiAoIWNvbmZpZ1sncmVxdWVzdHMnXSkge1xuICAgIHJldHVybiBjb25maWc7XG4gIH1cbiAgZm9yIChjb25zdCBrIGluIGNvbmZpZ1sncmVxdWVzdHMnXSkge1xuICAgIGlmIChoYXNPd24oY29uZmlnWydyZXF1ZXN0cyddLCBrKSkge1xuICAgICAgY29uZmlnWydyZXF1ZXN0cyddW2tdID0gZXhwYW5kUmVxdWVzdFN0cihjb25maWdbJ3JlcXVlc3RzJ11ba10pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gY29uZmlnO1xufVxuXG4vKipcbiAqIEV4cGFuZCBzaW5nbGUgcmVxdWVzdCB0byBhbiBvYmplY3RcbiAqIEBwYXJhbSB7IUpzb25PYmplY3R9IHJlcXVlc3RcbiAqL1xuZnVuY3Rpb24gZXhwYW5kUmVxdWVzdFN0cihyZXF1ZXN0KSB7XG4gIGlmIChpc09iamVjdChyZXF1ZXN0KSkge1xuICAgIHJldHVybiByZXF1ZXN0O1xuICB9XG4gIHJldHVybiB7XG4gICAgJ2Jhc2VVcmwnOiByZXF1ZXN0LFxuICB9O1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Q29tbW9uU2lnbmFsc30gZnJvbSAnLi4vLi4vLi4vc3JjL2NvbW1vbi1zaWduYWxzJztcbmltcG9ydCB7T2JzZXJ2YWJsZX0gZnJvbSAnLi4vLi4vLi4vc3JjL29ic2VydmFibGUnO1xuaW1wb3J0IHtcbiAgUGxheWluZ1N0YXRlcyxcbiAgVmlkZW9BbmFseXRpY3NEZXRhaWxzRGVmLFxuICBWaWRlb0FuYWx5dGljc0V2ZW50cyxcbn0gZnJvbSAnLi4vLi4vLi4vc3JjL3ZpZGVvLWludGVyZmFjZSc7XG5pbXBvcnQge2RldiwgdXNlcn0gZnJvbSAnLi4vLi4vLi4vc3JjL2xvZyc7XG5pbXBvcnQge2dldERhdGF9IGZyb20gJy4uLy4uLy4uL3NyYy9ldmVudC1oZWxwZXInO1xuaW1wb3J0IHtnZXREYXRhUGFyYW1zRnJvbUF0dHJpYnV0ZXN9IGZyb20gJy4uLy4uLy4uL3NyYy9kb20nO1xuaW1wb3J0IHtoYXNPd259IGZyb20gJy4uLy4uLy4uL3NyYy91dGlscy9vYmplY3QnO1xuaW1wb3J0IHtpc0VudW1WYWx1ZX0gZnJvbSAnLi4vLi4vLi4vc3JjL3R5cGVzJztcbmltcG9ydCB7c3RhcnRzV2l0aH0gZnJvbSAnLi4vLi4vLi4vc3JjL3N0cmluZyc7XG5cbmNvbnN0IE1JTl9USU1FUl9JTlRFUlZBTF9TRUNPTkRTID0gMC41O1xuY29uc3QgREVGQVVMVF9NQVhfVElNRVJfTEVOR1RIX1NFQ09ORFMgPSA3MjAwO1xuY29uc3QgVkFSSUFCTEVfREFUQV9BVFRSSUJVVEVfS0VZID0gL152YXJzKC4rKS87XG5jb25zdCBOT19VTkxJU1RFTiA9IGZ1bmN0aW9uKCkge307XG5jb25zdCBUQUcgPSAnYW5hbHl0aWNzLWV2ZW50cyc7XG5cbi8qKlxuICogRXZlbnRzIHRoYXQgY2FuIHJlc3VsdCBpbiBhbmFseXRpY3MgZGF0YSB0byBiZSBzZW50LlxuICogQGNvbnN0XG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgQW5hbHl0aWNzRXZlbnRUeXBlID0ge1xuICBWSVNJQkxFOiAndmlzaWJsZScsXG4gIENMSUNLOiAnY2xpY2snLFxuICBUSU1FUjogJ3RpbWVyJyxcbiAgU0NST0xMOiAnc2Nyb2xsJyxcbiAgSElEREVOOiAnaGlkZGVuJyxcbn07XG5cbmNvbnN0IEFMTE9XRURfRk9SX0FMTF9ST09UX1RZUEVTID0gWydhbXBkb2MnLCAnZW1iZWQnXTtcblxuLyoqXG4gKiBFdmVudHMgdGhhdCBjYW4gcmVzdWx0IGluIGFuYWx5dGljcyBkYXRhIHRvIGJlIHNlbnQuXG4gKiBAY29uc3QgeyFPYmplY3Q8c3RyaW5nLCB7XG4gKiAgICAgbmFtZTogc3RyaW5nLFxuICogICAgIGFsbG93ZWRGb3I6ICFBcnJheTxzdHJpbmc+LFxuICogICAgIGtsYXNzOiBmdW5jdGlvbihuZXc6Li9ldmVudHMuRXZlbnRUcmFja2VyKVxuICogICB9Pn1cbiAqL1xuY29uc3QgVFJBQ0tFUl9UWVBFID0gT2JqZWN0LmZyZWV6ZSh7XG4gICdjbGljayc6IHtcbiAgICBuYW1lOiAnY2xpY2snLFxuICAgIGFsbG93ZWRGb3I6IEFMTE9XRURfRk9SX0FMTF9ST09UX1RZUEVTLmNvbmNhdChbJ3RpbWVyJ10pLFxuICAgIC8vIEVzY2FwZSB0aGUgdGVtcG9yYWwgZGVhZCB6b25lIGJ5IG5vdCByZWZlcmVuY2luZyBhIGNsYXNzIGRpcmVjdGx5LlxuICAgIGtsYXNzOiBmdW5jdGlvbihyb290KSB7IHJldHVybiBuZXcgQ2xpY2tFdmVudFRyYWNrZXIocm9vdCk7IH0sXG4gIH0sXG4gICdjdXN0b20nOiB7XG4gICAgbmFtZTogJ2N1c3RvbScsXG4gICAgYWxsb3dlZEZvcjogQUxMT1dFRF9GT1JfQUxMX1JPT1RfVFlQRVMuY29uY2F0KFsndGltZXInXSksXG4gICAga2xhc3M6IGZ1bmN0aW9uKHJvb3QpIHsgcmV0dXJuIG5ldyBDdXN0b21FdmVudFRyYWNrZXIocm9vdCk7IH0sXG4gIH0sXG4gICdyZW5kZXItc3RhcnQnOiB7XG4gICAgbmFtZTogJ3JlbmRlci1zdGFydCcsXG4gICAgYWxsb3dlZEZvcjogQUxMT1dFRF9GT1JfQUxMX1JPT1RfVFlQRVMuY29uY2F0KFsndGltZXInLCAndmlzaWJsZSddKSxcbiAgICBrbGFzczogZnVuY3Rpb24ocm9vdCkgeyByZXR1cm4gbmV3IFNpZ25hbFRyYWNrZXIocm9vdCk7IH0sXG4gIH0sXG4gICdpbmktbG9hZCc6IHtcbiAgICBuYW1lOiAnaW5pLWxvYWQnLFxuICAgIGFsbG93ZWRGb3I6IEFMTE9XRURfRk9SX0FMTF9ST09UX1RZUEVTLmNvbmNhdChbJ3RpbWVyJywgJ3Zpc2libGUnXSksXG4gICAga2xhc3M6IGZ1bmN0aW9uKHJvb3QpIHsgcmV0dXJuIG5ldyBJbmlMb2FkVHJhY2tlcihyb290KTsgfSxcbiAgfSxcbiAgJ3RpbWVyJzoge1xuICAgIG5hbWU6ICd0aW1lcicsXG4gICAgYWxsb3dlZEZvcjogQUxMT1dFRF9GT1JfQUxMX1JPT1RfVFlQRVMsXG4gICAga2xhc3M6IGZ1bmN0aW9uKHJvb3QpIHsgcmV0dXJuIG5ldyBUaW1lckV2ZW50VHJhY2tlcihyb290KTsgfSxcbiAgfSxcbiAgJ3Zpc2libGUnOiB7XG4gICAgbmFtZTogJ3Zpc2libGUnLFxuICAgIGFsbG93ZWRGb3I6IEFMTE9XRURfRk9SX0FMTF9ST09UX1RZUEVTLmNvbmNhdChbJ3RpbWVyJ10pLFxuICAgIGtsYXNzOiBmdW5jdGlvbihyb290KSB7IHJldHVybiBuZXcgVmlzaWJpbGl0eVRyYWNrZXIocm9vdCk7IH0sXG4gIH0sXG4gICdoaWRkZW4nOiB7XG4gICAgbmFtZTogJ3Zpc2libGUnLCAvLyBSZXVzZSB0cmFja2VyIHdpdGggdmlzaWJpbGl0eVxuICAgIGFsbG93ZWRGb3I6IEFMTE9XRURfRk9SX0FMTF9ST09UX1RZUEVTLmNvbmNhdChbJ3RpbWVyJ10pLFxuICAgIGtsYXNzOiBmdW5jdGlvbihyb290KSB7IHJldHVybiBuZXcgVmlzaWJpbGl0eVRyYWNrZXIocm9vdCk7IH0sXG4gIH0sXG4gICd2aWRlbyc6IHtcbiAgICBuYW1lOiAndmlkZW8nLFxuICAgIGFsbG93ZWRGb3I6IEFMTE9XRURfRk9SX0FMTF9ST09UX1RZUEVTLmNvbmNhdChbJ3RpbWVyJ10pLFxuICAgIGtsYXNzOiBmdW5jdGlvbihyb290KSB7IHJldHVybiBuZXcgVmlkZW9FdmVudFRyYWNrZXIocm9vdCk7IH0sXG4gIH0sXG59KTtcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gdHJpZ2dlclR5cGVcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzVmlkZW9UcmlnZ2VyVHlwZSh0cmlnZ2VyVHlwZSkge1xuICByZXR1cm4gc3RhcnRzV2l0aCh0cmlnZ2VyVHlwZSwgJ3ZpZGVvJyk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHRyaWdnZXJUeXBlXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc1Jlc2VydmVkVHJpZ2dlclR5cGUodHJpZ2dlclR5cGUpIHtcbiAgcmV0dXJuICEhVFJBQ0tFUl9UWVBFW3RyaWdnZXJUeXBlXSB8fFxuICAgICAgaXNFbnVtVmFsdWUoQW5hbHl0aWNzRXZlbnRUeXBlLCB0cmlnZ2VyVHlwZSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50VHlwZVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhY2tlcktleU5hbWUoZXZlbnRUeXBlKSB7XG4gIGlmIChpc1ZpZGVvVHJpZ2dlclR5cGUoZXZlbnRUeXBlKSkge1xuICAgIHJldHVybiAndmlkZW8nO1xuICB9XG4gIGlmICghaXNSZXNlcnZlZFRyaWdnZXJUeXBlKGV2ZW50VHlwZSkpIHtcbiAgICByZXR1cm4gJ2N1c3RvbSc7XG4gIH1cbiAgcmV0dXJuIGhhc093bihUUkFDS0VSX1RZUEUsIGV2ZW50VHlwZSkgP1xuICAgIFRSQUNLRVJfVFlQRVtldmVudFR5cGVdLm5hbWUgOiBldmVudFR5cGU7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHBhcmVudFR5cGVcbiAqIEByZXR1cm4geyFPYmplY3Q8c3RyaW5nLCBmdW5jdGlvbihuZXc6RXZlbnRUcmFja2VyKT59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUcmFja2VyVHlwZXNGb3JQYXJlbnRUeXBlKHBhcmVudFR5cGUpIHtcbiAgY29uc3QgZmlsdGVyZWQgPSB7fTtcbiAgT2JqZWN0LmtleXMoVFJBQ0tFUl9UWVBFKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgaWYgKGhhc093bihUUkFDS0VSX1RZUEUsIGtleSkgJiZcbiAgICAgICAgVFJBQ0tFUl9UWVBFW2tleV0uYWxsb3dlZEZvci5pbmRleE9mKHBhcmVudFR5cGUpICE9IC0xKSB7XG4gICAgICBmaWx0ZXJlZFtrZXldID0gVFJBQ0tFUl9UWVBFW2tleV0ua2xhc3M7XG4gICAgfVxuICB9LCB0aGlzKTtcbiAgcmV0dXJuIGZpbHRlcmVkO1xufVxuXG4vKipcbiAqIEBpbnRlcmZhY2VcbiAqL1xuY2xhc3MgU2lnbmFsVHJhY2tlckRlZiB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdW51c2VkRXZlbnRUeXBlXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgZ2V0Um9vdFNpZ25hbCh1bnVzZWRFdmVudFR5cGUpIHt9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1bnVzZWRFdmVudFR5cGVcbiAgICogQHBhcmFtIHshRWxlbWVudH0gdW51c2VkRWxlbWVudFxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIGdldEVsZW1lbnRTaWduYWwodW51c2VkRXZlbnRUeXBlLCB1bnVzZWRFbGVtZW50KSB7fVxufVxuXG4vKipcbiAqIFRoZSBhbmFseXRpY3MgZXZlbnQuXG4gKi9cbmV4cG9ydCBjbGFzcyBBbmFseXRpY3NFdmVudCB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fSB0YXJnZXQgVGhlIG1vc3QgcmVsZXZhbnQgdGFyZ2V0IGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFRoZSB0eXBlIG9mIGV2ZW50LlxuICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCBzdHJpbmc+PX0gb3B0X3ZhcnMgQSBtYXAgb2YgdmFycyBhbmQgdGhlaXIgdmFsdWVzLlxuICAgKi9cbiAgY29uc3RydWN0b3IodGFyZ2V0LCB0eXBlLCBvcHRfdmFycykge1xuICAgIC8qKiBAY29uc3QgKi9cbiAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgICAvKiogQGNvbnN0ICovXG4gICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAvKiogQGNvbnN0ICovXG4gICAgdGhpcy52YXJzID0gb3B0X3ZhcnMgfHwgT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgfVxufVxuXG5cbi8qKlxuICogVGhlIGJhc2UgY2xhc3MgZm9yIGFsbCB0cmFja2Vycy4gQSB0cmFja2VyIHRyYWNrcyBhbGwgZXZlbnRzIG9mIHRoZSBzYW1lXG4gKiB0eXBlIGZvciBhIHNpbmdsZSBhbmFseXRpY3Mgcm9vdC5cbiAqXG4gKiBAaW1wbGVtZW50cyB7Li4vLi4vLi4vc3JjL3NlcnZpY2UuRGlzcG9zYWJsZX1cbiAqIEBhYnN0cmFjdFxuICogQHZpc2libGVGb3JUZXN0aW5nXG4gKi9cbmV4cG9ydCBjbGFzcyBFdmVudFRyYWNrZXIge1xuICAvKipcbiAgICogQHBhcmFtIHshLi9hbmFseXRpY3Mtcm9vdC5BbmFseXRpY3NSb290fSByb290XG4gICAqL1xuICBjb25zdHJ1Y3Rvcihyb290KSB7XG4gICAgLyoqIEBjb25zdCAqL1xuICAgIHRoaXMucm9vdCA9IHJvb3Q7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlIEBhYnN0cmFjdCAqL1xuICBkaXNwb3NlKCkge31cblxuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudH0gdW51c2VkQ29udGV4dFxuICAgKiBAcGFyYW0ge3N0cmluZ30gdW51c2VkRXZlbnRUeXBlXG4gICAqIEBwYXJhbSB7IUpzb25PYmplY3R9IHVudXNlZENvbmZpZ1xuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFBbmFseXRpY3NFdmVudCl9IHVudXNlZExpc3RlbmVyXG4gICAqIEByZXR1cm4geyFVbmxpc3RlbkRlZn1cbiAgICogQGFic3RyYWN0XG4gICAqL1xuICBhZGQodW51c2VkQ29udGV4dCwgdW51c2VkRXZlbnRUeXBlLCB1bnVzZWRDb25maWcsIHVudXNlZExpc3RlbmVyKSB7fVxufVxuXG5cbi8qKlxuICogVHJhY2tzIGN1c3RvbSBldmVudHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBDdXN0b21FdmVudFRyYWNrZXIgZXh0ZW5kcyBFdmVudFRyYWNrZXIge1xuICAvKipcbiAgICogQHBhcmFtIHshLi9hbmFseXRpY3Mtcm9vdC5BbmFseXRpY3NSb290fSByb290XG4gICAqL1xuICBjb25zdHJ1Y3Rvcihyb290KSB7XG4gICAgc3VwZXIocm9vdCk7XG5cbiAgICAvKiogQGNvbnN0IEBwcml2YXRlIHshT2JqZWN0PHN0cmluZywgIU9ic2VydmFibGU8IUFuYWx5dGljc0V2ZW50Pj59ICovXG4gICAgdGhpcy5vYnNlcnZhYmxlc18gPSB7fTtcblxuICAgIC8qKlxuICAgICAqIEVhcmx5IGV2ZW50cyBoYXZlIHRvIGJlIGJ1ZmZlcmVkIGJlY2F1c2UgdGhlcmUncyBubyB3YXkgdG8gcHJlZGljdFxuICAgICAqIGhvdyBmYXN0IGFsbCBgYW1wLWFuYWx5dGljc2AgZWxlbWVudHMgd2lsbCBiZSBpbnN0cnVtZW50ZWQuXG4gICAgICogQHByaXZhdGUgeyFPYmplY3Q8c3RyaW5nLCAhQXJyYXk8IUFuYWx5dGljc0V2ZW50Pj58dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMuYnVmZmVyXyA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogU2FuZGJveCBldmVudHMgZ2V0IHRoZWlyIG93biBidWZmZXIsIGJlY2F1c2UgaGFuZGxlciB0byB0aG9zZSBldmVudHMgd2lsbFxuICAgICAqIGJlIGFkZGVkIGFmdGVyIHBhcmVudCBlbGVtZW50J3MgbGF5b3V0LiAoVGltZSB2YXJpZXMsIGNhbiBiZSBsYXRlciB0aGFuXG4gICAgICogMTBzKSBzYW5kYm94IGV2ZW50cyBidWZmZXIgd2lsbCBuZXZlciBleHBpcmUgYnV0IHdpbGwgY2xlYXJlZCB3aGVuXG4gICAgICogaGFuZGxlciBpcyByZWFkeS5cbiAgICAgKiBAcHJpdmF0ZSB7IU9iamVjdDxzdHJpbmcsICFBcnJheTwhQW5hbHl0aWNzRXZlbnQ+fHVuZGVmaW5lZD58dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMuc2FuZGJveEJ1ZmZlcl8gPSB7fTtcblxuICAgIC8vIFN0b3AgYnVmZmVyaW5nIG9mIGN1c3RvbSBldmVudHMgYWZ0ZXIgMTAgc2Vjb25kcy4gQXNzdW1wdGlvbiBpcyB0aGF0IGFsbFxuICAgIC8vIGBhbXAtYW5hbHl0aWNzYCBlbGVtZW50cyB3aWxsIGhhdmUgYmVlbiBpbnN0cnVtZW50ZWQgYnkgdGhpcyB0aW1lLlxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5idWZmZXJfID0gdW5kZWZpbmVkO1xuICAgIH0sIDEwMDAwKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZGlzcG9zZSgpIHtcbiAgICB0aGlzLmJ1ZmZlcl8gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5zYW5kYm94QnVmZmVyXyA9IHVuZGVmaW5lZDtcbiAgICBmb3IgKGNvbnN0IGsgaW4gdGhpcy5vYnNlcnZhYmxlc18pIHtcbiAgICAgIHRoaXMub2JzZXJ2YWJsZXNfW2tdLnJlbW92ZUFsbCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYWRkKGNvbnRleHQsIGV2ZW50VHlwZSwgY29uZmlnLCBsaXN0ZW5lcikge1xuICAgIGxldCBzZWxlY3RvciA9IGNvbmZpZ1snc2VsZWN0b3InXTtcbiAgICBpZiAoIXNlbGVjdG9yKSB7XG4gICAgICBzZWxlY3RvciA9ICc6cm9vdCc7XG4gICAgfVxuICAgIGNvbnN0IHNlbGVjdGlvbk1ldGhvZCA9IGNvbmZpZ1snc2VsZWN0aW9uTWV0aG9kJ10gfHwgbnVsbDtcblxuICAgIGNvbnN0IHRhcmdldFJlYWR5ID1cbiAgICAgICAgdGhpcy5yb290LmdldEVsZW1lbnQoY29udGV4dCwgc2VsZWN0b3IsIHNlbGVjdGlvbk1ldGhvZCk7XG5cbiAgICBjb25zdCBpc1NhbmRib3hFdmVudCA9IHN0YXJ0c1dpdGgoZXZlbnRUeXBlLCAnc2FuZGJveC0nKTtcblxuICAgIC8vIFB1c2ggcmVjZW50IGV2ZW50cyBpZiBhbnkuXG4gICAgY29uc3QgYnVmZmVyID0gaXNTYW5kYm94RXZlbnQgP1xuICAgICAgdGhpcy5zYW5kYm94QnVmZmVyXyAmJiB0aGlzLnNhbmRib3hCdWZmZXJfW2V2ZW50VHlwZV0gOlxuICAgICAgdGhpcy5idWZmZXJfICYmIHRoaXMuYnVmZmVyX1tldmVudFR5cGVdO1xuXG4gICAgaWYgKGJ1ZmZlcikge1xuICAgICAgY29uc3QgYnVmZmVyTGVuZ3RoID0gYnVmZmVyLmxlbmd0aDtcbiAgICAgIHRhcmdldFJlYWR5LnRoZW4odGFyZ2V0ID0+IHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBidWZmZXJMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgZXZlbnQgPSBidWZmZXJbaV07XG4gICAgICAgICAgICBpZiAodGFyZ2V0LmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpIHtcbiAgICAgICAgICAgICAgbGlzdGVuZXIoZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNTYW5kYm94RXZlbnQpIHtcbiAgICAgICAgICAgIC8vIFdlIGFzc3VtZSBzYW5kYm94IGV2ZW50IHdpbGwgb25seSBoYXMgc2luZ2xlIGxpc3RlbmVyLlxuICAgICAgICAgICAgLy8gSXQgaXMgc2FmZSB0byBjbGVhciBidWZmZXIgb25jZSBoYW5kbGVyIGlzIHJlYWR5LlxuICAgICAgICAgICAgdGhpcy5zYW5kYm94QnVmZmVyX1tldmVudFR5cGVdID0gdW5kZWZpbmVkO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgMSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBsZXQgb2JzZXJ2YWJsZXMgPSB0aGlzLm9ic2VydmFibGVzX1tldmVudFR5cGVdO1xuICAgIGlmICghb2JzZXJ2YWJsZXMpIHtcbiAgICAgIG9ic2VydmFibGVzID0gbmV3IE9ic2VydmFibGUoKTtcbiAgICAgIHRoaXMub2JzZXJ2YWJsZXNfW2V2ZW50VHlwZV0gPSBvYnNlcnZhYmxlcztcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5vYnNlcnZhYmxlc19bZXZlbnRUeXBlXS5hZGQoZXZlbnQgPT4ge1xuICAgICAgLy8gV2FpdCBmb3IgdGFyZ2V0IHNlbGVjdGVkXG4gICAgICB0YXJnZXRSZWFkeS50aGVuKHRhcmdldCA9PiB7XG4gICAgICAgIGlmICh0YXJnZXQuY29udGFpbnMoZXZlbnQudGFyZ2V0KSkge1xuICAgICAgICAgIGxpc3RlbmVyKGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVHJpZ2dlcnMgYSBjdXN0b20gZXZlbnQgZm9yIHRoZSBhc3NvY2lhdGVkIHJvb3QuXG4gICAqIEBwYXJhbSB7IUFuYWx5dGljc0V2ZW50fSBldmVudFxuICAgKi9cbiAgdHJpZ2dlcihldmVudCkge1xuICAgIGNvbnN0IGV2ZW50VHlwZSA9IGV2ZW50LnR5cGU7XG4gICAgY29uc3QgaXNTYW5kYm94RXZlbnQgPSBzdGFydHNXaXRoKGV2ZW50VHlwZSwgJ3NhbmRib3gtJyk7XG4gICAgY29uc3Qgb2JzZXJ2YWJsZXMgPSB0aGlzLm9ic2VydmFibGVzX1tldmVudFR5cGVdO1xuXG4gICAgLy8gSWYgbGlzdGVuZXJzIGFscmVhZHkgcHJlc2VudCAtIHRyaWdnZXIgcmlnaHQgYXdheS5cbiAgICBpZiAob2JzZXJ2YWJsZXMpIHtcbiAgICAgIG9ic2VydmFibGVzLmZpcmUoZXZlbnQpO1xuICAgICAgaWYgKGlzU2FuZGJveEV2ZW50KSB7XG4gICAgICAgIC8vIE5vIG5lZWQgdG8gYnVmZmVyIHNhbmRib3ggZXZlbnQgaWYgaGFuZGxlciByZWFkeVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGJ1ZmZlciBhbmQgZW5xdWV1ZSBidWZmZXIgaWYgbmVlZGVkXG4gICAgaWYgKGlzU2FuZGJveEV2ZW50KSB7XG4gICAgICB0aGlzLnNhbmRib3hCdWZmZXJfW2V2ZW50VHlwZV0gPSB0aGlzLnNhbmRib3hCdWZmZXJfW2V2ZW50VHlwZV0gfHwgW107XG4gICAgICB0aGlzLnNhbmRib3hCdWZmZXJfW2V2ZW50VHlwZV0ucHVzaChldmVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIENoZWNrIGlmIGJ1ZmZlciBoYXMgZXhwaXJlZFxuICAgICAgaWYgKHRoaXMuYnVmZmVyXykge1xuICAgICAgICB0aGlzLmJ1ZmZlcl9bZXZlbnRUeXBlXSA9IHRoaXMuYnVmZmVyX1tldmVudFR5cGVdIHx8IFtdO1xuICAgICAgICB0aGlzLmJ1ZmZlcl9bZXZlbnRUeXBlXS5wdXNoKGV2ZW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuXG4vKipcbiAqIFRyYWNrcyBjbGljayBldmVudHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBDbGlja0V2ZW50VHJhY2tlciBleHRlbmRzIEV2ZW50VHJhY2tlciB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyEuL2FuYWx5dGljcy1yb290LkFuYWx5dGljc1Jvb3R9IHJvb3RcbiAgICovXG4gIGNvbnN0cnVjdG9yKHJvb3QpIHtcbiAgICBzdXBlcihyb290KTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7IU9ic2VydmFibGU8IUV2ZW50Pn0gKi9cbiAgICB0aGlzLmNsaWNrT2JzZXJ2YWJsZV8gPSBuZXcgT2JzZXJ2YWJsZSgpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7ZnVuY3Rpb24oIUV2ZW50KX0gKi9cbiAgICB0aGlzLmJvdW5kT25DbGlja18gPSB0aGlzLmNsaWNrT2JzZXJ2YWJsZV8uZmlyZS5iaW5kKHRoaXMuY2xpY2tPYnNlcnZhYmxlXyk7XG4gICAgdGhpcy5yb290LmdldFJvb3QoKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuYm91bmRPbkNsaWNrXyk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGRpc3Bvc2UoKSB7XG4gICAgdGhpcy5yb290LmdldFJvb3QoKS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuYm91bmRPbkNsaWNrXyk7XG4gICAgdGhpcy5jbGlja09ic2VydmFibGVfLnJlbW92ZUFsbCgpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhZGQoY29udGV4dCwgZXZlbnRUeXBlLCBjb25maWcsIGxpc3RlbmVyKSB7XG4gICAgY29uc3Qgc2VsZWN0b3IgPSB1c2VyKCkuYXNzZXJ0KGNvbmZpZ1snc2VsZWN0b3InXSxcbiAgICAgICAgJ01pc3NpbmcgcmVxdWlyZWQgc2VsZWN0b3Igb24gY2xpY2sgdHJpZ2dlcicpO1xuICAgIGNvbnN0IHNlbGVjdGlvbk1ldGhvZCA9IGNvbmZpZ1snc2VsZWN0aW9uTWV0aG9kJ10gfHwgbnVsbDtcbiAgICByZXR1cm4gdGhpcy5jbGlja09ic2VydmFibGVfLmFkZCh0aGlzLnJvb3QuY3JlYXRlU2VsZWN0aXZlTGlzdGVuZXIoXG4gICAgICAgIHRoaXMuaGFuZGxlQ2xpY2tfLmJpbmQodGhpcywgbGlzdGVuZXIpLFxuICAgICAgICAoY29udGV4dC5wYXJlbnRFbGVtZW50IHx8IGNvbnRleHQpLFxuICAgICAgICBzZWxlY3RvcixcbiAgICAgICAgc2VsZWN0aW9uTWV0aG9kKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbighQW5hbHl0aWNzRXZlbnQpfSBsaXN0ZW5lclxuICAgKiBAcGFyYW0geyFFbGVtZW50fSB0YXJnZXRcbiAgICogQHBhcmFtIHshRXZlbnR9IHVudXNlZEV2ZW50XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVDbGlja18obGlzdGVuZXIsIHRhcmdldCwgdW51c2VkRXZlbnQpIHtcbiAgICBjb25zdCBwYXJhbXMgPSBnZXREYXRhUGFyYW1zRnJvbUF0dHJpYnV0ZXMoXG4gICAgICAgIHRhcmdldCxcbiAgICAgICAgLyogY29tcHV0ZVBhcmFtTmFtZUZ1bmMgKi8gdW5kZWZpbmVkLFxuICAgICAgICBWQVJJQUJMRV9EQVRBX0FUVFJJQlVURV9LRVkpO1xuICAgIGxpc3RlbmVyKG5ldyBBbmFseXRpY3NFdmVudCh0YXJnZXQsICdjbGljaycsIHBhcmFtcykpO1xuICB9XG59XG5cblxuLyoqXG4gKiBUcmFja3MgZXZlbnRzIGJhc2VkIG9uIHNpZ25hbHMuXG4gKiBAaW1wbGVtZW50cyB7U2lnbmFsVHJhY2tlckRlZn1cbiAqL1xuZXhwb3J0IGNsYXNzIFNpZ25hbFRyYWNrZXIgZXh0ZW5kcyBFdmVudFRyYWNrZXIge1xuICAvKipcbiAgICogQHBhcmFtIHshLi9hbmFseXRpY3Mtcm9vdC5BbmFseXRpY3NSb290fSByb290XG4gICAqL1xuICBjb25zdHJ1Y3Rvcihyb290KSB7XG4gICAgc3VwZXIocm9vdCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGRpc3Bvc2UoKSB7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFkZChjb250ZXh0LCBldmVudFR5cGUsIGNvbmZpZywgbGlzdGVuZXIpIHtcbiAgICBsZXQgdGFyZ2V0O1xuICAgIGxldCBzaWduYWxzUHJvbWlzZTtcbiAgICBjb25zdCBzZWxlY3RvciA9IGNvbmZpZ1snc2VsZWN0b3InXSB8fCAnOnJvb3QnO1xuICAgIGlmIChzZWxlY3RvciA9PSAnOnJvb3QnIHx8IHNlbGVjdG9yID09ICc6aG9zdCcpIHtcbiAgICAgIC8vIFJvb3Qgc2VsZWN0b3JzIGFyZSBkZWxlZ2F0ZWQgdG8gYW5hbHl0aWNzIHJvb3RzLlxuICAgICAgdGFyZ2V0ID0gdGhpcy5yb290LmdldFJvb3RFbGVtZW50KCk7XG4gICAgICBzaWduYWxzUHJvbWlzZSA9IHRoaXMuZ2V0Um9vdFNpZ25hbChldmVudFR5cGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBMb29rIGZvciB0aGUgQU1QLWVsZW1lbnQuIFdhaXQgZm9yIERPTSB0byBiZSBmdWxseSBwYXJzZWQgdG8gYXZvaWRcbiAgICAgIC8vIGZhbHNlIG1pc3NlZCBzZWFyY2hlcy5cbiAgICAgIGNvbnN0IHNlbGVjdGlvbk1ldGhvZCA9IGNvbmZpZ1snc2VsZWN0aW9uTWV0aG9kJ107XG4gICAgICBzaWduYWxzUHJvbWlzZSA9IHRoaXMucm9vdC5nZXRBbXBFbGVtZW50KFxuICAgICAgICAgIChjb250ZXh0LnBhcmVudEVsZW1lbnQgfHwgY29udGV4dCksXG4gICAgICAgICAgc2VsZWN0b3IsXG4gICAgICAgICAgc2VsZWN0aW9uTWV0aG9kXG4gICAgICApLnRoZW4oZWxlbWVudCA9PiB7XG4gICAgICAgIHRhcmdldCA9IGVsZW1lbnQ7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEVsZW1lbnRTaWduYWwoZXZlbnRUeXBlLCB0YXJnZXQpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gV2FpdCBmb3IgdGhlIHRhcmdldCBhbmQgdGhlIGV2ZW50IHNpZ25hbC5cbiAgICBzaWduYWxzUHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgIGxpc3RlbmVyKG5ldyBBbmFseXRpY3NFdmVudCh0YXJnZXQsIGV2ZW50VHlwZSkpO1xuICAgIH0pO1xuICAgIHJldHVybiBOT19VTkxJU1RFTjtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0Um9vdFNpZ25hbChldmVudFR5cGUpIHtcbiAgICByZXR1cm4gdGhpcy5yb290LnNpZ25hbHMoKS53aGVuU2lnbmFsKGV2ZW50VHlwZSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldEVsZW1lbnRTaWduYWwoZXZlbnRUeXBlLCBlbGVtZW50KSB7XG4gICAgaWYgKHR5cGVvZiBlbGVtZW50LnNpZ25hbHMgIT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZXR1cm4gZWxlbWVudC5zaWduYWxzKCkud2hlblNpZ25hbChldmVudFR5cGUpO1xuICB9XG59XG5cbi8qKlxuICogVHJhY2tzIHdoZW4gdGhlIGVsZW1lbnRzIGluIHRoZSBmaXJzdCB2aWV3cG9ydCBoYXMgYmVlbiBsb2FkZWQgLSBcImluaS1sb2FkXCIuXG4gKiBAaW1wbGVtZW50cyB7U2lnbmFsVHJhY2tlckRlZn1cbiAqL1xuZXhwb3J0IGNsYXNzIEluaUxvYWRUcmFja2VyIGV4dGVuZHMgRXZlbnRUcmFja2VyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4vYW5hbHl0aWNzLXJvb3QuQW5hbHl0aWNzUm9vdH0gcm9vdFxuICAgKi9cbiAgY29uc3RydWN0b3Iocm9vdCkge1xuICAgIHN1cGVyKHJvb3QpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBkaXNwb3NlKCkge1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhZGQoY29udGV4dCwgZXZlbnRUeXBlLCBjb25maWcsIGxpc3RlbmVyKSB7XG4gICAgbGV0IHRhcmdldDtcbiAgICBsZXQgcHJvbWlzZTtcbiAgICBjb25zdCBzZWxlY3RvciA9IGNvbmZpZ1snc2VsZWN0b3InXSB8fCAnOnJvb3QnO1xuICAgIGlmIChzZWxlY3RvciA9PSAnOnJvb3QnIHx8IHNlbGVjdG9yID09ICc6aG9zdCcpIHtcbiAgICAgIC8vIFJvb3Qgc2VsZWN0b3JzIGFyZSBkZWxlZ2F0ZWQgdG8gYW5hbHl0aWNzIHJvb3RzLlxuICAgICAgdGFyZ2V0ID0gdGhpcy5yb290LmdldFJvb3RFbGVtZW50KCk7XG4gICAgICBwcm9taXNlID0gdGhpcy5nZXRSb290U2lnbmFsKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEFuIEFNUC1lbGVtZW50LiBXYWl0IGZvciBET00gdG8gYmUgZnVsbHkgcGFyc2VkIHRvIGF2b2lkXG4gICAgICAvLyBmYWxzZSBtaXNzZWQgc2VhcmNoZXMuXG4gICAgICBjb25zdCBzZWxlY3Rpb25NZXRob2QgPSBjb25maWdbJ3NlbGVjdGlvbk1ldGhvZCddO1xuICAgICAgcHJvbWlzZSA9IHRoaXMucm9vdC5nZXRBbXBFbGVtZW50KFxuICAgICAgICAgIChjb250ZXh0LnBhcmVudEVsZW1lbnQgfHwgY29udGV4dCksXG4gICAgICAgICAgc2VsZWN0b3IsXG4gICAgICAgICAgc2VsZWN0aW9uTWV0aG9kXG4gICAgICApLnRoZW4oZWxlbWVudCA9PiB7XG4gICAgICAgIHRhcmdldCA9IGVsZW1lbnQ7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEVsZW1lbnRTaWduYWwoJ2luaS1sb2FkJywgdGFyZ2V0KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBXYWl0IGZvciB0aGUgdGFyZ2V0IGFuZCB0aGUgZXZlbnQuXG4gICAgcHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgIGxpc3RlbmVyKG5ldyBBbmFseXRpY3NFdmVudCh0YXJnZXQsIGV2ZW50VHlwZSkpO1xuICAgIH0pO1xuICAgIHJldHVybiBOT19VTkxJU1RFTjtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0Um9vdFNpZ25hbCgpIHtcbiAgICByZXR1cm4gdGhpcy5yb290LndoZW5JbmlMb2FkZWQoKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0RWxlbWVudFNpZ25hbCh1bnVzZWRFdmVudFR5cGUsIGVsZW1lbnQpIHtcbiAgICBpZiAodHlwZW9mIGVsZW1lbnQuc2lnbmFscyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGNvbnN0IHNpZ25hbHMgPSBlbGVtZW50LnNpZ25hbHMoKTtcbiAgICByZXR1cm4gUHJvbWlzZS5yYWNlKFtcbiAgICAgIHNpZ25hbHMud2hlblNpZ25hbChDb21tb25TaWduYWxzLklOSV9MT0FEKSxcbiAgICAgIHNpZ25hbHMud2hlblNpZ25hbChDb21tb25TaWduYWxzLkxPQURfRU5EKSxcbiAgICBdKTtcbiAgfVxufVxuXG5cbi8qKlxuICogVGltZXIgZXZlbnQgaGFuZGxlci5cbiAqL1xuY2xhc3MgVGltZXJFdmVudEhhbmRsZXIge1xuICAvKipcbiAgICogQHBhcmFtIHtKc29uT2JqZWN0fSB0aW1lclNwZWMgVGhlIHRpbWVyIHNwZWNpZmljYXRpb24uXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKTogVW5saXN0ZW5EZWY9fSBvcHRfc3RhcnRCdWlsZGVyIEZhY3RvcnkgZm9yIGJ1aWxkaW5nXG4gICAqICAgICBzdGFydCB0cmFja2VycyBmb3IgdGhpcyB0aW1lci5cbiAgICogQHBhcmFtIHtmdW5jdGlvbigpOiBVbmxpc3RlbkRlZj19IG9wdF9zdG9wQnVpbGRlciBGYWN0b3J5IGZvciBidWlsZGluZyBzdG9wXG4gICAqICAgICB0cmFja2VycyBmb3IgdGhpcyB0aW1lci5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHRpbWVyU3BlYywgb3B0X3N0YXJ0QnVpbGRlciwgb3B0X3N0b3BCdWlsZGVyKSB7XG4gICAgLyoqIEBwcml2YXRlIHtudW1iZXJ8dW5kZWZpbmVkfSAqL1xuICAgIHRoaXMuaW50ZXJ2YWxJZF8gPSB1bmRlZmluZWQ7XG5cbiAgICB1c2VyKCkuYXNzZXJ0KCdpbnRlcnZhbCcgaW4gdGltZXJTcGVjLFxuICAgICAgICAnVGltZXIgaW50ZXJ2YWwgc3BlY2lmaWNhdGlvbiByZXF1aXJlZCcpO1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge251bWJlcn0gKi9cbiAgICB0aGlzLmludGVydmFsTGVuZ3RoXyA9IE51bWJlcih0aW1lclNwZWNbJ2ludGVydmFsJ10pIHx8IDA7XG4gICAgdXNlcigpLmFzc2VydCh0aGlzLmludGVydmFsTGVuZ3RoXyA+PSBNSU5fVElNRVJfSU5URVJWQUxfU0VDT05EUyxcbiAgICAgICAgJ0JhZCB0aW1lciBpbnRlcnZhbCBzcGVjaWZpY2F0aW9uJyk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtudW1iZXJ9ICovXG4gICAgdGhpcy5tYXhUaW1lckxlbmd0aF8gPSAnbWF4VGltZXJMZW5ndGgnIGluIHRpbWVyU3BlYyA/XG4gICAgICBOdW1iZXIodGltZXJTcGVjWydtYXhUaW1lckxlbmd0aCddKSA6IERFRkFVTFRfTUFYX1RJTUVSX0xFTkdUSF9TRUNPTkRTO1xuICAgIHVzZXIoKS5hc3NlcnQodGhpcy5tYXhUaW1lckxlbmd0aF8gPiAwLCAnQmFkIG1heFRpbWVyTGVuZ3RoIHNwZWNpZmljYXRpb24nKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge2Jvb2xlYW59ICovXG4gICAgdGhpcy5tYXhUaW1lckluU3BlY18gPSAnbWF4VGltZXJMZW5ndGgnIGluIHRpbWVyU3BlYztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge2Jvb2xlYW59ICovXG4gICAgdGhpcy5jYWxsSW1tZWRpYXRlXyA9ICdpbW1lZGlhdGUnIGluIHRpbWVyU3BlYyA/XG4gICAgICBCb29sZWFuKHRpbWVyU3BlY1snaW1tZWRpYXRlJ10pIDogdHJ1ZTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P2Z1bmN0aW9uKCl9ICovXG4gICAgdGhpcy5pbnRlcnZhbENhbGxiYWNrXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9Vbmxpc3RlbkRlZn0gKi9cbiAgICB0aGlzLnVubGlzdGVuU3RhcnRfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P1VubGlzdGVuRGVmfSAqL1xuICAgIHRoaXMudW5saXN0ZW5TdG9wXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHs/ZnVuY3Rpb24oKTogVW5saXN0ZW5EZWZ9ICovXG4gICAgdGhpcy5zdGFydEJ1aWxkZXJfID0gb3B0X3N0YXJ0QnVpbGRlciB8fCBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7P2Z1bmN0aW9uKCk6IFVubGlzdGVuRGVmfSAqL1xuICAgIHRoaXMuc3RvcEJ1aWxkZXJfID0gb3B0X3N0b3BCdWlsZGVyIHx8IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUge251bWJlcnx1bmRlZmluZWR9ICovXG4gICAgdGhpcy5zdGFydFRpbWVfID0gdW5kZWZpbmVkOyAvLyBtaWxsaXNlY29uZHNcblxuICAgIC8qKiBAcHJpdmF0ZSB7bnVtYmVyfHVuZGVmaW5lZH0gKi9cbiAgICB0aGlzLmxhc3RSZXF1ZXN0VGltZV8gPSB1bmRlZmluZWQ7IC8vIG1pbGxpc2Vjb25kc1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gc3RhcnRUaW1lclxuICAgKi9cbiAgaW5pdChzdGFydFRpbWVyKSB7XG4gICAgaWYgKCF0aGlzLnN0YXJ0QnVpbGRlcl8pIHtcbiAgICAgIC8vIFRpbWVyIHN0YXJ0cyBvbiBsb2FkLlxuICAgICAgc3RhcnRUaW1lcigpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUaW1lciBzdGFydHMgb24gZXZlbnQuXG4gICAgICB0aGlzLmxpc3RlbkZvclN0YXJ0XygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVbmxpc3RlbnMgZm9yIHN0YXJ0IGFuZCBzdG9wLlxuICAgKi9cbiAgZGlzcG9zZSgpIHtcbiAgICB0aGlzLnVubGlzdGVuRm9yU3RvcF8oKTtcbiAgICB0aGlzLnVubGlzdGVuRm9yU3RhcnRfKCk7XG4gIH1cblxuICAvKiogQHByaXZhdGUgKi9cbiAgbGlzdGVuRm9yU3RhcnRfKCkge1xuICAgIGlmICh0aGlzLnN0YXJ0QnVpbGRlcl8pIHtcbiAgICAgIHRoaXMudW5saXN0ZW5TdGFydF8gPSB0aGlzLnN0YXJ0QnVpbGRlcl8oKTtcbiAgICB9XG4gIH1cblxuICAvKiogQHByaXZhdGUgKi9cbiAgdW5saXN0ZW5Gb3JTdGFydF8oKSB7XG4gICAgaWYgKHRoaXMudW5saXN0ZW5TdGFydF8pIHtcbiAgICAgIHRoaXMudW5saXN0ZW5TdGFydF8oKTtcbiAgICAgIHRoaXMudW5saXN0ZW5TdGFydF8gPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAcHJpdmF0ZSAqL1xuICBsaXN0ZW5Gb3JTdG9wXygpIHtcbiAgICBpZiAodGhpcy5zdG9wQnVpbGRlcl8pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMudW5saXN0ZW5TdG9wXyA9IHRoaXMuc3RvcEJ1aWxkZXJfKCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHRoaXMuZGlzcG9zZSgpOyAvLyBTdG9wIHRpbWVyIGFuZCB0aGVuIHRocm93IGVycm9yLlxuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKiBAcHJpdmF0ZSAqL1xuICB1bmxpc3RlbkZvclN0b3BfKCkge1xuICAgIGlmICh0aGlzLnVubGlzdGVuU3RvcF8pIHtcbiAgICAgIHRoaXMudW5saXN0ZW5TdG9wXygpO1xuICAgICAgdGhpcy51bmxpc3RlblN0b3BfID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKiogQHJldHVybiB7Ym9vbGVhbn0gKi9cbiAgaXNSdW5uaW5nKCkge1xuICAgIHJldHVybiAhIXRoaXMuaW50ZXJ2YWxJZF87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICogQHBhcmFtIHtmdW5jdGlvbigpfSB0aW1lckNhbGxiYWNrXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gdGltZW91dENhbGxiYWNrXG4gICAqL1xuICBzdGFydEludGVydmFsSW5XaW5kb3cod2luLCB0aW1lckNhbGxiYWNrLCB0aW1lb3V0Q2FsbGJhY2spIHtcbiAgICBpZiAodGhpcy5pc1J1bm5pbmcoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnN0YXJ0VGltZV8gPSBEYXRlLm5vdygpO1xuICAgIHRoaXMubGFzdFJlcXVlc3RUaW1lXyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmludGVydmFsQ2FsbGJhY2tfID0gdGltZXJDYWxsYmFjaztcbiAgICB0aGlzLmludGVydmFsSWRfID0gd2luLnNldEludGVydmFsKCgpID0+IHtcbiAgICAgIHRpbWVyQ2FsbGJhY2soKTtcbiAgICB9LCB0aGlzLmludGVydmFsTGVuZ3RoXyAqIDEwMDApO1xuXG4gICAgLy8gSWYgdGhlcmUncyBubyB3YXkgdG8gdHVybiBvZmYgdGhlIHRpbWVyLCBjYXAgaXQuXG4gICAgaWYgKCF0aGlzLnN0b3BCdWlsZGVyXyB8fCAodGhpcy5zdG9wQnVpbGRlcl8gJiYgdGhpcy5tYXhUaW1lckluU3BlY18pKSB7XG4gICAgICB3aW4uc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRpbWVvdXRDYWxsYmFjaygpO1xuICAgICAgfSwgdGhpcy5tYXhUaW1lckxlbmd0aF8gKiAxMDAwKTtcbiAgICB9XG5cbiAgICB0aGlzLnVubGlzdGVuRm9yU3RhcnRfKCk7XG4gICAgaWYgKHRoaXMuY2FsbEltbWVkaWF0ZV8pIHtcbiAgICAgIHRpbWVyQ2FsbGJhY2soKTtcbiAgICB9XG4gICAgdGhpcy5saXN0ZW5Gb3JTdG9wXygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEByZXN0cmljdGVkXG4gICAqL1xuICBzdG9wVGltZXJfKHdpbikge1xuICAgIGlmICghdGhpcy5pc1J1bm5pbmcoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmludGVydmFsQ2FsbGJhY2tfKCk7XG4gICAgdGhpcy5pbnRlcnZhbENhbGxiYWNrXyA9IG51bGw7XG4gICAgd2luLmNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbElkXyk7XG4gICAgdGhpcy5pbnRlcnZhbElkXyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmxhc3RSZXF1ZXN0VGltZV8gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy51bmxpc3RlbkZvclN0b3BfKCk7XG4gICAgdGhpcy5saXN0ZW5Gb3JTdGFydF8oKTtcbiAgfVxuXG4gIC8qKiBAcHJpdmF0ZSBAcmV0dXJuIHtudW1iZXJ9ICovXG4gIGNhbGN1bGF0ZUR1cmF0aW9uXygpIHtcbiAgICBpZiAodGhpcy5zdGFydFRpbWVfKSB7XG4gICAgICByZXR1cm4gRGF0ZS5ub3coKSAtICh0aGlzLmxhc3RSZXF1ZXN0VGltZV8gfHwgdGhpcy5zdGFydFRpbWVfKTtcbiAgICB9XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICAvKiogQHJldHVybiB7e3RpbWVyRHVyYXRpb246IG51bWJlciwgdGltZXJTdGFydDogbnVtYmVyfX0gKi9cbiAgZ2V0VGltZXJWYXJzKCkge1xuICAgIGxldCB0aW1lckR1cmF0aW9uID0gMDtcbiAgICBpZiAodGhpcy5pc1J1bm5pbmcoKSkge1xuICAgICAgdGltZXJEdXJhdGlvbiA9IHRoaXMuY2FsY3VsYXRlRHVyYXRpb25fKCk7XG4gICAgICB0aGlzLmxhc3RSZXF1ZXN0VGltZV8gPSBEYXRlLm5vdygpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgJ3RpbWVyRHVyYXRpb24nOiB0aW1lckR1cmF0aW9uLFxuICAgICAgJ3RpbWVyU3RhcnQnOiB0aGlzLnN0YXJ0VGltZV8gfHwgMCxcbiAgICB9O1xuICB9XG59XG5cblxuLyoqXG4gKiBUcmFja3MgdGltZXIgZXZlbnRzLlxuICovXG5leHBvcnQgY2xhc3MgVGltZXJFdmVudFRyYWNrZXIgZXh0ZW5kcyBFdmVudFRyYWNrZXIge1xuICAvKipcbiAgICogQHBhcmFtIHshLi9hbmFseXRpY3Mtcm9vdC5BbmFseXRpY3NSb290fSByb290XG4gICAqL1xuICBjb25zdHJ1Y3Rvcihyb290KSB7XG4gICAgc3VwZXIocm9vdCk7XG4gICAgLyoqIEBjb25zdCBAcHJpdmF0ZSB7IU9iamVjdDxudW1iZXIsIFRpbWVyRXZlbnRIYW5kbGVyPn0gKi9cbiAgICB0aGlzLnRyYWNrZXJzXyA9IHt9O1xuXG4gICAgLyoqIEBwcml2YXRlIHtudW1iZXJ9ICovXG4gICAgdGhpcy50aW1lcklkU2VxdWVuY2VfID0gMTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshQXJyYXk8bnVtYmVyPn1cbiAgICogQHZpc2libGVGb3JUZXN0aW5nXG4gICAqL1xuICBnZXRUcmFja2VkVGltZXJLZXlzKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyFBcnJheTxudW1iZXI+fSAqLyAoT2JqZWN0LmtleXModGhpcy50cmFja2Vyc18pKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZGlzcG9zZSgpIHtcbiAgICB0aGlzLmdldFRyYWNrZWRUaW1lcktleXMoKS5mb3JFYWNoKHRpbWVySWQgPT4ge1xuICAgICAgdGhpcy5yZW1vdmVUcmFja2VyXyh0aW1lcklkKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYWRkKGNvbnRleHQsIGV2ZW50VHlwZSwgY29uZmlnLCBsaXN0ZW5lcikge1xuICAgIGNvbnN0IHRpbWVyU3BlYyA9IGNvbmZpZ1sndGltZXJTcGVjJ107XG4gICAgdXNlcigpLmFzc2VydCh0aW1lclNwZWMgJiYgdHlwZW9mIHRpbWVyU3BlYyA9PSAnb2JqZWN0JyxcbiAgICAgICAgJ0JhZCB0aW1lciBzcGVjaWZpY2F0aW9uJyk7XG4gICAgY29uc3QgdGltZXJTdGFydCA9ICdzdGFydFNwZWMnIGluIHRpbWVyU3BlYyA/IHRpbWVyU3BlY1snc3RhcnRTcGVjJ10gOiBudWxsO1xuICAgIHVzZXIoKS5hc3NlcnQoIXRpbWVyU3RhcnQgfHwgdHlwZW9mIHRpbWVyU3RhcnQgPT0gJ29iamVjdCcsXG4gICAgICAgICdCYWQgdGltZXIgc3RhcnQgc3BlY2lmaWNhdGlvbicpO1xuICAgIGNvbnN0IHRpbWVyU3RvcCA9ICdzdG9wU3BlYycgaW4gdGltZXJTcGVjID8gdGltZXJTcGVjWydzdG9wU3BlYyddIDogbnVsbDtcbiAgICB1c2VyKCkuYXNzZXJ0KCghdGltZXJTdGFydCAmJiAhdGltZXJTdG9wKSB8fCB0eXBlb2YgdGltZXJTdG9wID09ICdvYmplY3QnLFxuICAgICAgICAnQmFkIHRpbWVyIHN0b3Agc3BlY2lmaWNhdGlvbicpO1xuXG4gICAgY29uc3QgdGltZXJJZCA9IHRoaXMuZ2VuZXJhdGVUaW1lcklkXygpO1xuICAgIGxldCBzdGFydEJ1aWxkZXI7XG4gICAgbGV0IHN0b3BCdWlsZGVyO1xuICAgIGlmICh0aW1lclN0YXJ0KSB7XG4gICAgICBjb25zdCBzdGFydFRyYWNrZXIgPSB0aGlzLmdldFRyYWNrZXJfKHRpbWVyU3RhcnQpO1xuICAgICAgdXNlcigpLmFzc2VydChzdGFydFRyYWNrZXIsICdDYW5ub3QgdHJhY2sgdGltZXIgc3RhcnQnKTtcbiAgICAgIHN0YXJ0QnVpbGRlciA9IHN0YXJ0VHJhY2tlci5hZGQuYmluZChzdGFydFRyYWNrZXIsIGNvbnRleHQsXG4gICAgICAgICAgdGltZXJTdGFydFsnb24nXSwgdGltZXJTdGFydCxcbiAgICAgICAgICB0aGlzLmhhbmRsZVRpbWVyVG9nZ2xlXy5iaW5kKHRoaXMsIHRpbWVySWQsIGV2ZW50VHlwZSwgbGlzdGVuZXIpKTtcbiAgICB9XG4gICAgaWYgKHRpbWVyU3RvcCkge1xuICAgICAgY29uc3Qgc3RvcFRyYWNrZXIgPSB0aGlzLmdldFRyYWNrZXJfKHRpbWVyU3RvcCk7XG4gICAgICB1c2VyKCkuYXNzZXJ0KHN0b3BUcmFja2VyLCAnQ2Fubm90IHRyYWNrIHRpbWVyIHN0b3AnKTtcbiAgICAgIHN0b3BCdWlsZGVyID0gc3RvcFRyYWNrZXIuYWRkLmJpbmQoc3RvcFRyYWNrZXIsIGNvbnRleHQsXG4gICAgICAgICAgdGltZXJTdG9wWydvbiddLCB0aW1lclN0b3AsXG4gICAgICAgICAgdGhpcy5oYW5kbGVUaW1lclRvZ2dsZV8uYmluZCh0aGlzLCB0aW1lcklkLCBldmVudFR5cGUsIGxpc3RlbmVyKSk7XG4gICAgfVxuXG4gICAgY29uc3QgdGltZXJIYW5kbGVyID0gbmV3IFRpbWVyRXZlbnRIYW5kbGVyKFxuICAgICAgICB0aW1lclNwZWMsIHN0YXJ0QnVpbGRlciwgc3RvcEJ1aWxkZXIpO1xuICAgIHRoaXMudHJhY2tlcnNfW3RpbWVySWRdID0gdGltZXJIYW5kbGVyO1xuXG4gICAgdGltZXJIYW5kbGVyLmluaXQoXG4gICAgICAgIHRoaXMuc3RhcnRUaW1lcl8uYmluZCh0aGlzLCB0aW1lcklkLCBldmVudFR5cGUsIGxpc3RlbmVyKSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHRoaXMucmVtb3ZlVHJhY2tlcl8odGltZXJJZCk7XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZW5lcmF0ZVRpbWVySWRfKCkge1xuICAgIHJldHVybiArK3RoaXMudGltZXJJZFNlcXVlbmNlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFKc29uT2JqZWN0fSBjb25maWdcbiAgICogQHJldHVybiB7P0V2ZW50VHJhY2tlcn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldFRyYWNrZXJfKGNvbmZpZykge1xuICAgIGNvbnN0IGV2ZW50VHlwZSA9IHVzZXIoKS5hc3NlcnRTdHJpbmcoY29uZmlnWydvbiddKTtcbiAgICBjb25zdCB0cmFja2VyS2V5ID0gZ2V0VHJhY2tlcktleU5hbWUoZXZlbnRUeXBlKTtcblxuICAgIHJldHVybiB0aGlzLnJvb3QuZ2V0VHJhY2tlckZvcldoaXRlbGlzdChcbiAgICAgICAgdHJhY2tlcktleSwgZ2V0VHJhY2tlclR5cGVzRm9yUGFyZW50VHlwZSgndGltZXInKSk7XG4gIH1cblxuICAvKipcbiAgICogVG9nZ2xlcyB3aGljaCBsaXN0ZW5lcnMgYXJlIGFjdGl2ZSBkZXBlbmRpbmcgb24gdGltZXIgc3RhdGUsIHNvIG5vIHJhY2VcbiAgICogY29uZGl0aW9ucyBjYW4gb2NjdXIgaW4gdGhlIGNhc2Ugd2hlcmUgdGhlIHRpbWVyIHN0YXJ0cyBhbmQgc3RvcHMgb24gdGhlXG4gICAqIHNhbWUgZXZlbnQgdHlwZSBmcm9tIHRoZSBzYW1lIHRhcmdldC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWVySWRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50VHlwZVxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFBbmFseXRpY3NFdmVudCl9IGxpc3RlbmVyXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVUaW1lclRvZ2dsZV8odGltZXJJZCwgZXZlbnRUeXBlLCBsaXN0ZW5lcikge1xuICAgIGNvbnN0IHRpbWVySGFuZGxlciA9IHRoaXMudHJhY2tlcnNfW3RpbWVySWRdO1xuICAgIGlmICghdGltZXJIYW5kbGVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aW1lckhhbmRsZXIuaXNSdW5uaW5nKCkpIHtcbiAgICAgIHRoaXMuc3RvcFRpbWVyXyh0aW1lcklkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdGFydFRpbWVyXyh0aW1lcklkLCBldmVudFR5cGUsIGxpc3RlbmVyKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWVySWRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50VHlwZVxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFBbmFseXRpY3NFdmVudCl9IGxpc3RlbmVyXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGFydFRpbWVyXyh0aW1lcklkLCBldmVudFR5cGUsIGxpc3RlbmVyKSB7XG4gICAgY29uc3QgdGltZXJIYW5kbGVyID0gdGhpcy50cmFja2Vyc19bdGltZXJJZF07XG4gICAgY29uc3QgdGltZXJDYWxsYmFjayA9ICgpID0+IHtcbiAgICAgIGxpc3RlbmVyKHRoaXMuY3JlYXRlRXZlbnRfKHRpbWVySWQsIGV2ZW50VHlwZSkpO1xuICAgIH07XG4gICAgdGltZXJIYW5kbGVyLnN0YXJ0SW50ZXJ2YWxJbldpbmRvdyh0aGlzLnJvb3QuYW1wZG9jLndpbiwgdGltZXJDYWxsYmFjayxcbiAgICAgICAgdGhpcy5yZW1vdmVUcmFja2VyXy5iaW5kKHRoaXMsIHRpbWVySWQpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gdGltZXJJZFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RvcFRpbWVyXyh0aW1lcklkKSB7XG4gICAgdGhpcy50cmFja2Vyc19bdGltZXJJZF0uc3RvcFRpbWVyXyh0aGlzLnJvb3QuYW1wZG9jLndpbik7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWVySWRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50VHlwZVxuICAgKiBAcmV0dXJuIHshQW5hbHl0aWNzRXZlbnR9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjcmVhdGVFdmVudF8odGltZXJJZCwgZXZlbnRUeXBlKSB7XG4gICAgcmV0dXJuIG5ldyBBbmFseXRpY3NFdmVudCh0aGlzLnJvb3QuZ2V0Um9vdEVsZW1lbnQoKSwgZXZlbnRUeXBlLFxuICAgICAgICB0aGlzLnRyYWNrZXJzX1t0aW1lcklkXS5nZXRUaW1lclZhcnMoKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWVySWRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlbW92ZVRyYWNrZXJfKHRpbWVySWQpIHtcbiAgICBpZiAodGhpcy50cmFja2Vyc19bdGltZXJJZF0pIHtcbiAgICAgIHRoaXMuc3RvcFRpbWVyXyh0aW1lcklkKTtcbiAgICAgIHRoaXMudHJhY2tlcnNfW3RpbWVySWRdLmRpc3Bvc2UoKTtcbiAgICAgIGRlbGV0ZSB0aGlzLnRyYWNrZXJzX1t0aW1lcklkXTtcbiAgICB9XG4gIH1cbn1cblxuXG4vKipcbiAqIFRyYWNrcyB2aWRlbyBzZXNzaW9uIGV2ZW50c1xuICovXG5leHBvcnQgY2xhc3MgVmlkZW9FdmVudFRyYWNrZXIgZXh0ZW5kcyBFdmVudFRyYWNrZXIge1xuICAvKipcbiAgICogQHBhcmFtIHshLi9hbmFseXRpY3Mtcm9vdC5BbmFseXRpY3NSb290fSByb290XG4gICAqL1xuICBjb25zdHJ1Y3Rvcihyb290KSB7XG4gICAgc3VwZXIocm9vdCk7XG5cbiAgICAvKiogQHByaXZhdGUgez9PYnNlcnZhYmxlPCFFdmVudD59ICovXG4gICAgdGhpcy5zZXNzaW9uT2JzZXJ2YWJsZV8gPSBuZXcgT2JzZXJ2YWJsZSgpO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/ZnVuY3Rpb24oIUV2ZW50KX0gKi9cbiAgICB0aGlzLmJvdW5kT25TZXNzaW9uXyA9XG4gICAgICAgIHRoaXMuc2Vzc2lvbk9ic2VydmFibGVfLmZpcmUuYmluZCh0aGlzLnNlc3Npb25PYnNlcnZhYmxlXyk7XG5cbiAgICBPYmplY3Qua2V5cyhWaWRlb0FuYWx5dGljc0V2ZW50cykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgdGhpcy5yb290LmdldFJvb3QoKS5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgIFZpZGVvQW5hbHl0aWNzRXZlbnRzW2tleV0sIHRoaXMuYm91bmRPblNlc3Npb25fKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZGlzcG9zZSgpIHtcbiAgICBjb25zdCByb290ID0gdGhpcy5yb290LmdldFJvb3QoKTtcbiAgICBPYmplY3Qua2V5cyhWaWRlb0FuYWx5dGljc0V2ZW50cykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgcm9vdC5yZW1vdmVFdmVudExpc3RlbmVyKFZpZGVvQW5hbHl0aWNzRXZlbnRzW2tleV0sIHRoaXMuYm91bmRPblNlc3Npb25fKTtcbiAgICB9KTtcbiAgICB0aGlzLmJvdW5kT25TZXNzaW9uXyA9IG51bGw7XG4gICAgdGhpcy5zZXNzaW9uT2JzZXJ2YWJsZV8gPSBudWxsO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhZGQoY29udGV4dCwgZXZlbnRUeXBlLCBjb25maWcsIGxpc3RlbmVyKSB7XG4gICAgY29uc3QgdmlkZW9TcGVjID0gY29uZmlnWyd2aWRlb1NwZWMnXSB8fCB7fTtcbiAgICBjb25zdCBzZWxlY3RvciA9IGNvbmZpZ1snc2VsZWN0b3InXSB8fCB2aWRlb1NwZWNbJ3NlbGVjdG9yJ107XG4gICAgY29uc3Qgc2VsZWN0aW9uTWV0aG9kID0gY29uZmlnWydzZWxlY3Rpb25NZXRob2QnXSB8fCBudWxsO1xuICAgIGNvbnN0IHRhcmdldFJlYWR5ID1cbiAgICAgICAgdGhpcy5yb290LmdldEVsZW1lbnQoY29udGV4dCwgc2VsZWN0b3IsIHNlbGVjdGlvbk1ldGhvZCk7XG5cbiAgICBjb25zdCBlbmRTZXNzaW9uV2hlbkludmlzaWJsZSA9IHZpZGVvU3BlY1snZW5kLXNlc3Npb24td2hlbi1pbnZpc2libGUnXTtcbiAgICBjb25zdCBleGNsdWRlQXV0b3BsYXkgPSB2aWRlb1NwZWNbJ2V4Y2x1ZGUtYXV0b3BsYXknXTtcbiAgICBjb25zdCBpbnRlcnZhbCA9IHZpZGVvU3BlY1snaW50ZXJ2YWwnXTtcbiAgICBjb25zdCBvbiA9IGNvbmZpZ1snb24nXTtcblxuICAgIGxldCBpbnRlcnZhbENvdW50ZXIgPSAwO1xuXG4gICAgcmV0dXJuIHRoaXMuc2Vzc2lvbk9ic2VydmFibGVfLmFkZChldmVudCA9PiB7XG4gICAgICBjb25zdCB7dHlwZX0gPSBldmVudDtcbiAgICAgIGNvbnN0IGlzVmlzaWJsZVR5cGUgPSAodHlwZSA9PT0gVmlkZW9BbmFseXRpY3NFdmVudHMuU0VTU0lPTl9WSVNJQkxFKTtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWRUeXBlID1cbiAgICAgICAgICBpc1Zpc2libGVUeXBlID8gVmlkZW9BbmFseXRpY3NFdmVudHMuU0VTU0lPTiA6IHR5cGU7XG4gICAgICBjb25zdCBkZXRhaWxzID0gLyoqIEB0eXBlIHshVmlkZW9BbmFseXRpY3NEZXRhaWxzRGVmfSAqLyAoZ2V0RGF0YShldmVudCkpO1xuXG4gICAgICBpZiAobm9ybWFsaXplZFR5cGUgIT09IG9uKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKG5vcm1hbGl6ZWRUeXBlID09PSBWaWRlb0FuYWx5dGljc0V2ZW50cy5TRUNPTkRTX1BMQVlFRCAmJiAhaW50ZXJ2YWwpIHtcbiAgICAgICAgdXNlcigpLmVycm9yKFRBRywgJ3ZpZGVvLXNlY29uZHMtcGxheWVkIHJlcXVpcmVzIGludGVydmFsIHNwZWMgJyArXG4gICAgICAgICAgICAnd2l0aCBub24temVybyB2YWx1ZScpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChub3JtYWxpemVkVHlwZSA9PT0gVmlkZW9BbmFseXRpY3NFdmVudHMuU0VDT05EU19QTEFZRUQpIHtcbiAgICAgICAgaW50ZXJ2YWxDb3VudGVyKys7XG4gICAgICAgIGlmIChpbnRlcnZhbENvdW50ZXIgJSBpbnRlcnZhbCAhPT0gMCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoaXNWaXNpYmxlVHlwZSAmJiAhZW5kU2Vzc2lvbldoZW5JbnZpc2libGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXhjbHVkZUF1dG9wbGF5ICYmIGRldGFpbHNbJ3N0YXRlJ10gPT09IFBsYXlpbmdTdGF0ZXMuUExBWUlOR19BVVRPKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZWwgPSBkZXYoKS5hc3NlcnRFbGVtZW50KGV2ZW50LnRhcmdldCxcbiAgICAgICAgICAnTm8gdGFyZ2V0IHNwZWNpZmllZCBieSB2aWRlbyBzZXNzaW9uIGV2ZW50LicpO1xuICAgICAgdGFyZ2V0UmVhZHkudGhlbih0YXJnZXQgPT4ge1xuICAgICAgICBpZiAodGFyZ2V0LmNvbnRhaW5zKGVsKSkge1xuICAgICAgICAgIGxpc3RlbmVyKG5ldyBBbmFseXRpY3NFdmVudCh0YXJnZXQsIG5vcm1hbGl6ZWRUeXBlLCBkZXRhaWxzKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59XG5cblxuLyoqXG4gKiBUcmFja3MgdmlzaWJpbGl0eSBldmVudHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBWaXNpYmlsaXR5VHJhY2tlciBleHRlbmRzIEV2ZW50VHJhY2tlciB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyEuL2FuYWx5dGljcy1yb290LkFuYWx5dGljc1Jvb3R9IHJvb3RcbiAgICovXG4gIGNvbnN0cnVjdG9yKHJvb3QpIHtcbiAgICBzdXBlcihyb290KTtcblxuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIHRoaXMud2FpdEZvclRyYWNrZXJzXyA9IHt9O1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBkaXNwb3NlKCkge1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhZGQoY29udGV4dCwgZXZlbnRUeXBlLCBjb25maWcsIGxpc3RlbmVyKSB7XG4gICAgY29uc3QgdmlzaWJpbGl0eVNwZWMgPSBjb25maWdbJ3Zpc2liaWxpdHlTcGVjJ10gfHwge307XG4gICAgY29uc3Qgc2VsZWN0b3IgPSBjb25maWdbJ3NlbGVjdG9yJ10gfHwgdmlzaWJpbGl0eVNwZWNbJ3NlbGVjdG9yJ107XG4gICAgY29uc3Qgd2FpdEZvclNwZWMgPSB2aXNpYmlsaXR5U3BlY1snd2FpdEZvciddO1xuICAgIGNvbnN0IHZpc2liaWxpdHlNYW5hZ2VyID0gdGhpcy5yb290LmdldFZpc2liaWxpdHlNYW5hZ2VyKCk7XG4gICAgLy8gc3BlY2lhbCBwb2x5ZmlsbCBmb3IgZXZlbnRUeXBlOiAnaGlkZGVuJ1xuICAgIGxldCBjcmVhdGVSZWFkeVJlcG9ydFByb21pc2VGdW5jID0gbnVsbDtcbiAgICBpZiAoZXZlbnRUeXBlID09ICdoaWRkZW4nKSB7XG4gICAgICBjcmVhdGVSZWFkeVJlcG9ydFByb21pc2VGdW5jID0gdGhpcy5jcmVhdGVSZXBvcnRSZWFkeVByb21pc2VfLmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgLy8gUm9vdCBzZWxlY3RvcnMgYXJlIGRlbGVnYXRlZCB0byBhbmFseXRpY3Mgcm9vdHMuXG4gICAgaWYgKCFzZWxlY3RvciB8fCBzZWxlY3RvciA9PSAnOnJvb3QnIHx8IHNlbGVjdG9yID09ICc6aG9zdCcpIHtcbiAgICAgIC8vIFdoZW4gYHNlbGVjdG9yYCBpcyBzcGVjaWZpZWQsIHdlIGFsd2F5cyB1c2UgXCJpbmktbG9hZFwiIHNpZ25hbCBhc1xuICAgICAgLy8gYSBcInJlYWR5XCIgc2lnbmFsLlxuICAgICAgcmV0dXJuIHZpc2liaWxpdHlNYW5hZ2VyLmxpc3RlblJvb3QoXG4gICAgICAgICAgdmlzaWJpbGl0eVNwZWMsXG4gICAgICAgICAgdGhpcy5nZXRSZWFkeVByb21pc2Uod2FpdEZvclNwZWMsIHNlbGVjdG9yKSxcbiAgICAgICAgICBjcmVhdGVSZWFkeVJlcG9ydFByb21pc2VGdW5jLFxuICAgICAgICAgIHRoaXMub25FdmVudF8uYmluZChcbiAgICAgICAgICAgICAgdGhpcywgZXZlbnRUeXBlLCBsaXN0ZW5lciwgdGhpcy5yb290LmdldFJvb3RFbGVtZW50KCkpKTtcbiAgICB9XG5cbiAgICAvLyBBbiBBTVAtZWxlbWVudC4gV2FpdCBmb3IgRE9NIHRvIGJlIGZ1bGx5IHBhcnNlZCB0byBhdm9pZFxuICAgIC8vIGZhbHNlIG1pc3NlZCBzZWFyY2hlcy5cbiAgICBjb25zdCBzZWxlY3Rpb25NZXRob2QgPSBjb25maWdbJ3NlbGVjdGlvbk1ldGhvZCddIHx8XG4gICAgICAgICAgdmlzaWJpbGl0eVNwZWNbJ3NlbGVjdGlvbk1ldGhvZCddO1xuICAgIGNvbnN0IHVubGlzdGVuUHJvbWlzZSA9IHRoaXMucm9vdC5nZXRBbXBFbGVtZW50KFxuICAgICAgICAoY29udGV4dC5wYXJlbnRFbGVtZW50IHx8IGNvbnRleHQpLFxuICAgICAgICBzZWxlY3RvcixcbiAgICAgICAgc2VsZWN0aW9uTWV0aG9kXG4gICAgKS50aGVuKGVsZW1lbnQgPT4ge1xuICAgICAgcmV0dXJuIHZpc2liaWxpdHlNYW5hZ2VyLmxpc3RlbkVsZW1lbnQoXG4gICAgICAgICAgZWxlbWVudCxcbiAgICAgICAgICB2aXNpYmlsaXR5U3BlYyxcbiAgICAgICAgICB0aGlzLmdldFJlYWR5UHJvbWlzZSh3YWl0Rm9yU3BlYywgc2VsZWN0b3IsIGVsZW1lbnQpLFxuICAgICAgICAgIGNyZWF0ZVJlYWR5UmVwb3J0UHJvbWlzZUZ1bmMsXG4gICAgICAgICAgdGhpcy5vbkV2ZW50Xy5iaW5kKHRoaXMsIGV2ZW50VHlwZSwgbGlzdGVuZXIsIGVsZW1lbnQpKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB1bmxpc3RlblByb21pc2UudGhlbih1bmxpc3RlbiA9PiB7XG4gICAgICAgIHVubGlzdGVuKCk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgY3JlYXRlUmVwb3J0UmVhZHlQcm9taXNlXygpIHtcbiAgICBjb25zdCB2aWV3ZXIgPSB0aGlzLnJvb3QuZ2V0Vmlld2VyKCk7XG5cbiAgICBpZiAoIXZpZXdlci5pc1Zpc2libGUoKSkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIHZpZXdlci5vblZpc2liaWxpdHlDaGFuZ2VkKCgpID0+IHtcbiAgICAgICAgaWYgKCF2aWV3ZXIuaXNWaXNpYmxlKCkpIHtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfHVuZGVmaW5lZH0gd2FpdEZvclNwZWNcbiAgICogQHBhcmFtIHtzdHJpbmd8dW5kZWZpbmVkfSBzZWxlY3RvclxuICAgKiBAcGFyYW0ge0VsZW1lbnQ9fSBvcHRfZWxlbWVudFxuICAgKiBAcmV0dXJuIHs/UHJvbWlzZX1cbiAgICogQHZpc2libGVGb3JUZXN0aW5nXG4gICAqL1xuICBnZXRSZWFkeVByb21pc2Uod2FpdEZvclNwZWMsIHNlbGVjdG9yLCBvcHRfZWxlbWVudCkge1xuICAgIGlmICghd2FpdEZvclNwZWMpIHtcbiAgICAgIC8vIERlZmF1bHQgY2FzZTpcbiAgICAgIGlmICghc2VsZWN0b3IpIHtcbiAgICAgICAgLy8gd2FpdEZvciBzZWxlY3RvciBpcyBub3QgZGVmaW5lZCwgd2FpdCBmb3Igbm90aGluZ1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIG90aGVyd2lzZSB3YWl0IGZvciBpbmktbG9hZCBieSBkZWZhdWx0XG4gICAgICAgIHdhaXRGb3JTcGVjID0gJ2luaS1sb2FkJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB0cmFja2VyV2hpdGVsaXN0ID0gZ2V0VHJhY2tlclR5cGVzRm9yUGFyZW50VHlwZSgndmlzaWJsZScpO1xuICAgIHVzZXIoKS5hc3NlcnQod2FpdEZvclNwZWMgPT0gJ25vbmUnIHx8XG4gICAgICAgIHRyYWNrZXJXaGl0ZWxpc3Rbd2FpdEZvclNwZWNdICE9PSB1bmRlZmluZWQsXG4gICAgJ3dhaXRGb3IgdmFsdWUgJXMgbm90IHN1cHBvcnRlZCcsIHdhaXRGb3JTcGVjKTtcblxuICAgIGNvbnN0IHdhaXRGb3JUcmFja2VyID0gdGhpcy53YWl0Rm9yVHJhY2tlcnNfW3dhaXRGb3JTcGVjXSB8fFxuICAgICAgICB0aGlzLnJvb3QuZ2V0VHJhY2tlckZvcldoaXRlbGlzdCh3YWl0Rm9yU3BlYywgdHJhY2tlcldoaXRlbGlzdCk7XG4gICAgaWYgKHdhaXRGb3JUcmFja2VyKSB7XG4gICAgICB0aGlzLndhaXRGb3JUcmFja2Vyc19bd2FpdEZvclNwZWNdID0gd2FpdEZvclRyYWNrZXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIFdhaXQgZm9yIHJvb3Qgc2lnbmFsIGlmIHRoZXJlJ3Mgbm8gZWxlbWVudCBzZWxlY3RlZC5cbiAgICByZXR1cm4gb3B0X2VsZW1lbnQgP1xuICAgICAgd2FpdEZvclRyYWNrZXIuZ2V0RWxlbWVudFNpZ25hbCh3YWl0Rm9yU3BlYywgb3B0X2VsZW1lbnQpXG4gICAgICA6IHdhaXRGb3JUcmFja2VyLmdldFJvb3RTaWduYWwod2FpdEZvclNwZWMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFR5cGVcbiAgICogQHBhcmFtIHtmdW5jdGlvbighQW5hbHl0aWNzRXZlbnQpfSBsaXN0ZW5lclxuICAgKiBAcGFyYW0geyFFbGVtZW50fSB0YXJnZXRcbiAgICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgKj59IHN0YXRlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBvbkV2ZW50XyhldmVudFR5cGUsIGxpc3RlbmVyLCB0YXJnZXQsIHN0YXRlKSB7XG4gICAgY29uc3QgYXR0ciA9IGdldERhdGFQYXJhbXNGcm9tQXR0cmlidXRlcyhcbiAgICAgICAgdGFyZ2V0LFxuICAgICAgICAvKiBjb21wdXRlUGFyYW1OYW1lRnVuYyAqLyB1bmRlZmluZWQsXG4gICAgICAgIFZBUklBQkxFX0RBVEFfQVRUUklCVVRFX0tFWSk7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gYXR0cikge1xuICAgICAgc3RhdGVba2V5XSA9IGF0dHJba2V5XTtcbiAgICB9XG4gICAgbGlzdGVuZXIobmV3IEFuYWx5dGljc0V2ZW50KHRhcmdldCwgZXZlbnRUeXBlLCBzdGF0ZSkpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtNZXNzYWdlVHlwZX0gZnJvbSAnLi4vLi4vLi4vc3JjLzNwLWZyYW1lLW1lc3NhZ2luZyc7XG5pbXBvcnQge1N1YnNjcmlwdGlvbkFwaX0gZnJvbSAnLi4vLi4vLi4vc3JjL2lmcmFtZS1oZWxwZXInO1xuaW1wb3J0IHtkZXZ9IGZyb20gJy4uLy4uLy4uL3NyYy9sb2cnO1xuXG4vKiogQHByaXZhdGUgQGNvbnN0IHtzdHJpbmd9ICovXG5jb25zdCBUQUdfID0gJ2FtcC1hbmFseXRpY3MuSWZyYW1lVHJhbnNwb3J0TWVzc2FnZVF1ZXVlJztcblxuLyoqIEBwcml2YXRlIEBjb25zdCB7bnVtYmVyfSAqL1xuY29uc3QgTUFYX1FVRVVFX1NJWkVfID0gMTAwO1xuXG4vKipcbiAqIEB2aXNpYmxlRm9yVGVzdGluZ1xuICovXG5leHBvcnQgY2xhc3MgSWZyYW1lVHJhbnNwb3J0TWVzc2FnZVF1ZXVlIHtcbiAgLyoqXG4gICAqIENvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luIFRoZSB3aW5kb3cgZWxlbWVudFxuICAgKiBAcGFyYW0geyFIVE1MSUZyYW1lRWxlbWVudH0gZnJhbWUgVGhlIGNyb3NzLWRvbWFpbiBpZnJhbWUgdG8gc2VuZFxuICAgKiBtZXNzYWdlcyB0b1xuICAgKi9cbiAgY29uc3RydWN0b3Iod2luLCBmcmFtZSkge1xuXG4gICAgLyoqIEBwcml2YXRlIHshSFRNTElGcmFtZUVsZW1lbnR9ICovXG4gICAgdGhpcy5mcmFtZV8gPSBmcmFtZTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLmlzUmVhZHlfID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIHshQXJyYXk8IS4uLy4uLy4uL3NyYy8zcC1mcmFtZS1tZXNzYWdpbmcuSWZyYW1lVHJhbnNwb3J0RXZlbnQ+fVxuICAgICAqL1xuICAgIHRoaXMucGVuZGluZ0V2ZW50c18gPSBbXTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7IS4uLy4uLy4uL3NyYy9pZnJhbWUtaGVscGVyLlN1YnNjcmlwdGlvbkFwaX0gKi9cbiAgICB0aGlzLnBvc3RNZXNzYWdlQXBpXyA9IG5ldyBTdWJzY3JpcHRpb25BcGkodGhpcy5mcmFtZV8sXG4gICAgICAgIE1lc3NhZ2VUeXBlLlNFTkRfSUZSQU1FX1RSQU5TUE9SVF9FVkVOVFMsXG4gICAgICAgIHRydWUsXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICB0aGlzLnNldElzUmVhZHkoKTtcbiAgICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBxdWV1ZSBoYXMgYmVlbiBtYXJrZWQgYXMgcmVhZHkgeWV0XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqIEB2aXNpYmxlRm9yVGVzdGluZ1xuICAgKi9cbiAgaXNSZWFkeSgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1JlYWR5XztcbiAgfVxuXG4gIC8qKlxuICAgKiBJbmRpY2F0ZSB0aGF0IGEgY3Jvc3MtZG9tYWluIGZyYW1lIGlzIHJlYWR5IHRvIHJlY2VpdmUgbWVzc2FnZXMsIGFuZFxuICAgKiBzZW5kIGFsbCBtZXNzYWdlcyB0aGF0IHdlcmUgcHJldmlvdXNseSBxdWV1ZWQgZm9yIGl0LlxuICAgKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAgICovXG4gIHNldElzUmVhZHkoKSB7XG4gICAgdGhpcy5pc1JlYWR5XyA9IHRydWU7XG4gICAgdGhpcy5mbHVzaFF1ZXVlXygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgaG93IG1hbnkgY3JlYXRpdmVJZCAtPiBtZXNzYWdlKHMpIG1hcHBpbmdzIHRoZXJlIGFyZVxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqIEB2aXNpYmxlRm9yVGVzdGluZ1xuICAgKi9cbiAgcXVldWVTaXplKCkge1xuICAgIHJldHVybiB0aGlzLnBlbmRpbmdFdmVudHNfLmxlbmd0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbnF1ZXVlcyBhbiBldmVudCB0byBiZSBzZW50IHRvIGEgY3Jvc3MtZG9tYWluIGlmcmFtZS5cbiAgICogQHBhcmFtIHshLi4vLi4vLi4vc3JjLzNwLWZyYW1lLW1lc3NhZ2luZy5JZnJhbWVUcmFuc3BvcnRFdmVudH0gZXZlbnRcbiAgICogSWRlbnRpZmllcyB0aGUgZXZlbnQgYW5kIHdoaWNoIFRyYW5zcG9ydCBpbnN0YW5jZSAoZXNzZW50aWFsbHkgd2hpY2hcbiAgICogY3JlYXRpdmUpIGlzIHNlbmRpbmcgaXQuXG4gICAqL1xuICBlbnF1ZXVlKGV2ZW50KSB7XG4gICAgZGV2KCkuYXNzZXJ0KGV2ZW50ICYmIGV2ZW50LmNyZWF0aXZlSWQgJiYgZXZlbnQubWVzc2FnZSxcbiAgICAgICAgJ0F0dGVtcHRlZCB0byBlbnF1ZXVlIG1hbGZvcm1lZCBtZXNzYWdlIGZvcjogJyArXG4gICAgICAgIGV2ZW50LmNyZWF0aXZlSWQpO1xuICAgIHRoaXMucGVuZGluZ0V2ZW50c18ucHVzaChldmVudCk7XG4gICAgaWYgKHRoaXMucXVldWVTaXplKCkgPj0gTUFYX1FVRVVFX1NJWkVfKSB7XG4gICAgICBkZXYoKS53YXJuKFRBR18sICdFeGNlZWRlZCBtYXhpbXVtIHNpemUgb2YgcXVldWUgZm9yOiAnICtcbiAgICAgICAgICBldmVudC5jcmVhdGl2ZUlkKTtcbiAgICAgIHRoaXMucGVuZGluZ0V2ZW50c18uc2hpZnQoKTtcbiAgICB9XG4gICAgdGhpcy5mbHVzaFF1ZXVlXygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmQgcXVldWVkIGRhdGEgKGlmIHRoZXJlIGlzIGFueSkgdG8gYSBjcm9zcy1kb21haW4gaWZyYW1lXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBmbHVzaFF1ZXVlXygpIHtcbiAgICBpZiAodGhpcy5pc1JlYWR5KCkgJiYgdGhpcy5xdWV1ZVNpemUoKSkge1xuICAgICAgdGhpcy5wb3N0TWVzc2FnZUFwaV8uc2VuZChNZXNzYWdlVHlwZS5JRlJBTUVfVFJBTlNQT1JUX0VWRU5UUyxcbiAgICAgICAgICAvKiogQHR5cGUgeyFKc29uT2JqZWN0fSAqL1xuICAgICAgICAgICh7ZXZlbnRzOiB0aGlzLnBlbmRpbmdFdmVudHNffSkpO1xuICAgICAgdGhpcy5wZW5kaW5nRXZlbnRzXyA9IFtdO1xuICAgIH1cbiAgfVxufVxuXG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBWZW5kb3JzIHdobyBoYXZlIElBQiB2aWV3YWJpbGl0eSBjZXJ0aWZpY2F0aW9uIG1heSB1c2UgaWZyYW1lIHRyYW5zcG9ydFxuICogKHNlZSAuLi9hbXAtYW5hbHl0aWNzLm1kIGFuZCAuLi9pbnRlZ3JhdGluZy1hbmFseXRpY3MubWQpLiBJbiB0aGlzIGNhc2UsXG4gKiBwdXQgb25seSB0aGUgc3BlY2lmaWNhdGlvbiBvZiB0aGUgaWZyYW1lIGxvY2F0aW9uIGluIHRoZSBvYmplY3QgYmVsb3cuXG4gKlxuICogVGhpcyBvYmplY3QgaXMgc2VwYXJhdGVkIGZyb20gdmVuZG9ycy5qcyB0byBiZSBzaGFyZWQgd2l0aCBleHRlbnNpb25zXG4gKiBvdGhlciB0aGFuIGFtcC1hbmFseXRpY3MsIGZvciBpbnN0YW5jZSBhbXAtYWQtZXhpdC5cbiAqXG4gKiBAY29uc3QgeyFKc29uT2JqZWN0fVxuICovXG5leHBvcnQgY29uc3QgSUZSQU1FX1RSQU5TUE9SVFMgPSAvKiogQHR5cGUgeyFKc29uT2JqZWN0fSAqLyAoe1xuICAnYmcnOiAnaHR0cHM6Ly90cGMuZ29vZ2xlc3luZGljYXRpb24uY29tL2I0YS9iNGEtcnVubmVyLmh0bWwnLFxuICAnbW9hdCc6ICdodHRwczovL2pzLm1vYXRhZHMuY29tL2FtcGFuYWx5dGljczA5MzI4NC9pZnJhbWUuaHRtbCcsXG59KTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge0lmcmFtZVRyYW5zcG9ydE1lc3NhZ2VRdWV1ZX0gZnJvbSAnLi9pZnJhbWUtdHJhbnNwb3J0LW1lc3NhZ2UtcXVldWUnO1xuaW1wb3J0IHtjcmVhdGVFbGVtZW50V2l0aEF0dHJpYnV0ZXN9IGZyb20gJy4uLy4uLy4uL3NyYy9kb20nO1xuaW1wb3J0IHtkZXYsIHVzZXJ9IGZyb20gJy4uLy4uLy4uL3NyYy9sb2cnO1xuaW1wb3J0IHtnZXRNb2RlfSBmcm9tICcuLi8uLi8uLi9zcmMvbW9kZSc7XG5pbXBvcnQge2hhc093bn0gZnJvbSAnLi4vLi4vLi4vc3JjL3V0aWxzL29iamVjdCc7XG5pbXBvcnQge2lzTG9uZ1Rhc2tBcGlTdXBwb3J0ZWR9IGZyb20gJy4uLy4uLy4uL3NyYy9zZXJ2aWNlL2phbmstbWV0ZXInO1xuaW1wb3J0IHtzZXRTdHlsZXN9IGZyb20gJy4uLy4uLy4uL3NyYy9zdHlsZSc7XG5pbXBvcnQge3VybHN9IGZyb20gJy4uLy4uLy4uL3NyYy9jb25maWcnO1xuXG4vKiogQHByaXZhdGUgQGNvbnN0IHtzdHJpbmd9ICovXG5jb25zdCBUQUdfID0gJ2FtcC1hbmFseXRpY3MuSWZyYW1lVHJhbnNwb3J0JztcblxuLyoqIEBwcml2YXRlIEBjb25zdCB7bnVtYmVyfSAqL1xuY29uc3QgTE9OR19UQVNLX1JFUE9SVElOR19USFJFU0hPTEQgPSA1O1xuXG4vKiogQHR5cGVkZWYge3tcbiAqICAgIGZyYW1lOiBFbGVtZW50LFxuICogICAgc2VudGluZWw6IHN0cmluZyxcbiAqICAgIHVzYWdlQ291bnQ6IG51bWJlcixcbiAqICAgIHF1ZXVlOiBJZnJhbWVUcmFuc3BvcnRNZXNzYWdlUXVldWUsXG4gKiAgfX0gKi9cbmV4cG9ydCBsZXQgRnJhbWVEYXRhO1xuXG4vKipcbiAqIEdldCB0aGUgVVJMIG9mIHRoZSBjbGllbnQgbGliXG4gKiBAcGFyYW0geyFXaW5kb3d9IGFtcFdpbiBUaGUgd2luZG93IG9iamVjdCBvZiB0aGUgQU1QIGRvY3VtZW50XG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfZm9yY2VQcm9kVXJsIElmIHRydWUsIHByb2QgVVJMIHdpbGwgYmUgcmV0dXJuZWQgZXZlblxuICogICAgIGluIGxvY2FsL3Rlc3QgbW9kZXMuXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRJZnJhbWVUcmFuc3BvcnRTY3JpcHRVcmwoYW1wV2luLCBvcHRfZm9yY2VQcm9kVXJsKSB7XG4gIGlmICgoZ2V0TW9kZSgpLmxvY2FsRGV2IHx8IGdldE1vZGUoKS50ZXN0KSAmJiAhb3B0X2ZvcmNlUHJvZFVybCAmJlxuICAgICAgYW1wV2luLnBhcmVudCAmJiBhbXBXaW4ucGFyZW50LmxvY2F0aW9uKSB7XG4gICAgY29uc3QgbG9jID0gYW1wV2luLnBhcmVudC5sb2NhdGlvbjtcbiAgICByZXR1cm4gYCR7bG9jLnByb3RvY29sfS8vJHtsb2MuaG9zdH0vZGlzdC9pZnJhbWUtdHJhbnNwb3J0LWNsaWVudC1saWIuanNgO1xuICB9XG4gIHJldHVybiB1cmxzLnRoaXJkUGFydHkgK1xuICAgICAgJy8kaW50ZXJuYWxSdW50aW1lVmVyc2lvbiQvaWZyYW1lLXRyYW5zcG9ydC1jbGllbnQtdjAuanMnO1xufVxuXG4vKipcbiAqIEB2aXNpYmxlRm9yVGVzdGluZ1xuICovXG5leHBvcnQgY2xhc3MgSWZyYW1lVHJhbnNwb3J0IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gYW1wV2luIFRoZSB3aW5kb3cgb2JqZWN0IG9mIHRoZSBBTVAgZG9jdW1lbnRcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVGhlIHZhbHVlIG9mIHRoZSBhbXAtYW5hbHl0aWNzIHRhZydzIHR5cGUgYXR0cmlidXRlXG4gICAqIEBwYXJhbSB7IUpzb25PYmplY3R9IGNvbmZpZ1xuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgSWYgKHBvdGVudGlhbGx5KSB1c2luZyBzZW5kUmVzcG9uc2VUb0NyZWF0aXZlKCksIGl0XG4gICAqICAgICBzaG91bGQgYmUgc29tZXRoaW5nIHRoYXQgdGhlIHJlY2lwaWVudCBjYW4gdXNlIHRvIGlkZW50aWZ5IHRoZVxuICAgKiAgICAgY29udGV4dCBvZiB0aGUgbWVzc2FnZSwgZS5nLiB0aGUgcmVzb3VyY2VJRCBvZiBhIERPTSBlbGVtZW50LlxuICAgKi9cbiAgY29uc3RydWN0b3IoYW1wV2luLCB0eXBlLCBjb25maWcsIGlkKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgICB0aGlzLmFtcFdpbl8gPSBhbXBXaW47XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy50eXBlXyA9IHR5cGU7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5jcmVhdGl2ZUlkXyA9IGlkO1xuXG4gICAgZGV2KCkuYXNzZXJ0KGNvbmZpZyAmJiBjb25maWdbJ2lmcmFtZSddLFxuICAgICAgICAnTXVzdCBzdXBwbHkgaWZyYW1lIFVSTCB0byBjb25zdHJ1Y3RvciEnKTtcbiAgICB0aGlzLmZyYW1lVXJsXyA9IGNvbmZpZ1snaWZyYW1lJ107XG5cbiAgICAvKiogQHByaXZhdGUge251bWJlcn0gKi9cbiAgICB0aGlzLm51bUxvbmdUYXNrc18gPSAwO1xuXG4gICAgdGhpcy5wcm9jZXNzQ3Jvc3NEb21haW5JZnJhbWUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiBhIFRyYW5zcG9ydCBpbnN0YW5jZSBpcyBiZWluZyByZW1vdmVkIGZyb20gdGhlIERPTVxuICAgKi9cbiAgZGV0YWNoKCkge1xuICAgIElmcmFtZVRyYW5zcG9ydC5tYXJrQ3Jvc3NEb21haW5JZnJhbWVBc0RvbmUodGhpcy5hbXBXaW5fLmRvY3VtZW50LFxuICAgICAgICB0aGlzLnR5cGVfKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJZiBpZnJhbWUgaXMgc3BlY2lmaWVkIGluIGNvbmZpZy90cmFuc3BvcnQsIGNoZWNrIHdoZXRoZXIgdGhpcmQtcGFydHlcbiAgICogaWZyYW1lIGFscmVhZHkgZXhpc3RzLCBhbmQgaWYgbm90LCBjcmVhdGUgaXQuXG4gICAqL1xuICBwcm9jZXNzQ3Jvc3NEb21haW5JZnJhbWUoKSB7XG4gICAgbGV0IGZyYW1lRGF0YTtcbiAgICBpZiAoSWZyYW1lVHJhbnNwb3J0Lmhhc0Nyb3NzRG9tYWluSWZyYW1lKHRoaXMudHlwZV8pKSB7XG4gICAgICBmcmFtZURhdGEgPSBJZnJhbWVUcmFuc3BvcnQuZ2V0RnJhbWVEYXRhKHRoaXMudHlwZV8pO1xuICAgICAgKysoZnJhbWVEYXRhLnVzYWdlQ291bnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmcmFtZURhdGEgPSB0aGlzLmNyZWF0ZUNyb3NzRG9tYWluSWZyYW1lKCk7XG4gICAgICB0aGlzLmFtcFdpbl8uZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChmcmFtZURhdGEuZnJhbWUpO1xuICAgICAgdGhpcy5jcmVhdGVQZXJmb3JtYW5jZU9ic2VydmVyXygpO1xuICAgIH1cbiAgICBkZXYoKS5hc3NlcnQoZnJhbWVEYXRhLCAnVHJ5aW5nIHRvIHVzZSBub24tZXhpc3RlbnQgZnJhbWUnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBjcm9zcy1kb21haW4gaWZyYW1lIGZvciB0aGlyZC1wYXJ0eSB2ZW5kb3IgYW5hbHl0aWNzXG4gICAqIEByZXR1cm4geyFGcmFtZURhdGF9XG4gICAqIEB2aXNpYmxlRm9yVGVzdGluZ1xuICAgKi9cbiAgY3JlYXRlQ3Jvc3NEb21haW5JZnJhbWUoKSB7XG4gICAgLy8gRXhwbGFuYXRpb24gb2YgSURzOlxuICAgIC8vIEVhY2ggaW5zdGFuY2Ugb2YgSWZyYW1lVHJhbnNwb3J0IChvd25lZCBieSBhIHNwZWNpZmljIGFtcC1hbmFseXRpY3NcbiAgICAvLyB0YWcsIGluIHR1cm4gb3duZWQgYnkgYSBzcGVjaWZpYyBjcmVhdGl2ZSkgaGFzIGFuIElEXG4gICAgLy8gKHRoaXMuZ2V0Q3JlYXRpdmVJZCgpKS5cbiAgICAvLyBFYWNoIGNyb3NzLWRvbWFpbiBpZnJhbWUgYWxzbyBoYXMgYW4gSUQsIHN0b3JlZCBoZXJlIGluIHNlbnRpbmVsLlxuICAgIC8vIFRoZXNlIHR3byB0eXBlcyBvZiBJRHMgaGF2ZSBkaWZmZXJlbnQgZm9ybWF0cy5cbiAgICAvLyBUaGVyZSBpcyBhIG1hbnktdG8tb25lIHJlbGF0aW9uc2hpcCwgaW4gdGhhdCBzZXZlcmFsIGNyZWF0aXZlcyBtYXlcbiAgICAvLyB1dGlsaXplIHRoZSBzYW1lIGFuYWx5dGljcyB2ZW5kb3IsIHNvIHBlcmhhcHMgdHdvIGNyZWF0aXZlcyBtaWdodFxuICAgIC8vIGJvdGggdXNlIHRoZSBzYW1lIHZlbmRvciBpZnJhbWUuXG4gICAgLy8gT2YgY291cnNlLCBhIGdpdmVuIGNyZWF0aXZlIG1heSB1c2UgbXVsdGlwbGUgYW5hbHl0aWNzIHZlbmRvcnMsIGJ1dFxuICAgIC8vIGluIHRoYXQgY2FzZSBpdCB3b3VsZCB1c2UgbXVsdGlwbGUgYW1wLWFuYWx5dGljcyB0YWdzLCBzbyB0aGVcbiAgICAvLyBpZnJhbWVUcmFuc3BvcnQuZ2V0Q3JlYXRpdmVJZCgpIC0+IHNlbnRpbmVsIHJlbGF0aW9uc2hpcCBpcyAqbm90KlxuICAgIC8vIG1hbnktdG8tbWFueS5cbiAgICBjb25zdCBzZW50aW5lbCA9IElmcmFtZVRyYW5zcG9ydC5jcmVhdGVVbmlxdWVJZF8oKTtcbiAgICBjb25zdCBmcmFtZU5hbWUgPSBKU09OLnN0cmluZ2lmeSgvKiogQHR5cGUge0pzb25PYmplY3R9ICovICh7XG4gICAgICBzY3JpcHRTcmM6IGdldElmcmFtZVRyYW5zcG9ydFNjcmlwdFVybCh0aGlzLmFtcFdpbl8pLFxuICAgICAgc2VudGluZWwsXG4gICAgICB0eXBlOiB0aGlzLnR5cGVfLFxuICAgIH0pKTtcbiAgICBjb25zdCBmcmFtZSA9IGNyZWF0ZUVsZW1lbnRXaXRoQXR0cmlidXRlcyh0aGlzLmFtcFdpbl8uZG9jdW1lbnQsICdpZnJhbWUnLFxuICAgICAgICAvKiogQHR5cGUgeyFKc29uT2JqZWN0fSAqLyAoe1xuICAgICAgICAgIHNhbmRib3g6ICdhbGxvdy1zY3JpcHRzIGFsbG93LXNhbWUtb3JpZ2luJyxcbiAgICAgICAgICBuYW1lOiBmcmFtZU5hbWUsXG4gICAgICAgICAgJ2RhdGEtYW1wLTNwLXNlbnRpbmVsJzogc2VudGluZWwsXG4gICAgICAgIH0pKTtcbiAgICBmcmFtZS5zZW50aW5lbCA9IHNlbnRpbmVsO1xuICAgIHNldFN0eWxlcyhmcmFtZSwge1xuICAgICAgZGlzcGxheTogJ25vbmUnLFxuICAgIH0pO1xuICAgIGZyYW1lLnNyYyA9IHRoaXMuZnJhbWVVcmxfO1xuICAgIGNvbnN0IGZyYW1lRGF0YSA9IC8qKiBAY29uc3Qge0ZyYW1lRGF0YX0gKi8gKHtcbiAgICAgIGZyYW1lLFxuICAgICAgdXNhZ2VDb3VudDogMSxcbiAgICAgIHF1ZXVlOiBuZXcgSWZyYW1lVHJhbnNwb3J0TWVzc2FnZVF1ZXVlKHRoaXMuYW1wV2luXyxcbiAgICAgICAgICAvKiogQHR5cGUgeyFIVE1MSUZyYW1lRWxlbWVudH0gKi9cbiAgICAgICAgICAoZnJhbWUpKSxcbiAgICB9KTtcbiAgICBJZnJhbWVUcmFuc3BvcnQuY3Jvc3NEb21haW5JZnJhbWVzX1t0aGlzLnR5cGVfXSA9IGZyYW1lRGF0YTtcbiAgICByZXR1cm4gZnJhbWVEYXRhO1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZXMgdGhlIExvbmcgVGFzayBBUEkgdG8gY3JlYXRlIGFuIG9ic2VydmVyIGZvciB3aGVuIDNwIHZlbmRvciBmcmFtZXNcbiAgICogdGFrZSBtb3JlIHRoYW4gNTBtcyBvZiBjb250aW51b3VzIENQVSB0aW1lLlxuICAgKiBDdXJyZW50bHkgdGhlIG9ubHkgYWN0aW9uIGluIHJlc3BvbnNlIHRvIHRoYXQgaXMgdG8gbG9nLiBJdCB3aWxsIGxvZ1xuICAgKiBvbmNlIHBlciBMT05HX1RBU0tfUkVQT1JUSU5HX1RIUkVTSE9MRCB0aGF0IGEgbG9uZyB0YXNrIG9jY3Vycy4gKFRoaXNcbiAgICogaW1wbGllcyB0aGF0IHRoZXJlIGlzIGEgZ3JhY2UgcGVyaW9kIGZvciB0aGUgZmlyc3RcbiAgICogTE9OR19UQVNLX1JFUE9SVElOR19USFJFU0hPTEQtMSBvY2N1cnJlbmNlcy4pXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjcmVhdGVQZXJmb3JtYW5jZU9ic2VydmVyXygpIHtcbiAgICBpZiAoIWlzTG9uZ1Rhc2tBcGlTdXBwb3J0ZWQodGhpcy5hbXBXaW5fKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBUT0RPKGpvbmtlbGxlcik6IENvbnNpZGVyIG1lcmdpbmcgd2l0aCBqYW5rLW1ldGVyLmpzXG4gICAgSWZyYW1lVHJhbnNwb3J0LnBlcmZvcm1hbmNlT2JzZXJ2ZXJzX1t0aGlzLnR5cGVfXSA9XG4gICAgICAgIG5ldyB0aGlzLmFtcFdpbl8uUGVyZm9ybWFuY2VPYnNlcnZlcihlbnRyeUxpc3QgPT4ge1xuICAgICAgICAgIGlmICghZW50cnlMaXN0KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGVudHJ5TGlzdC5nZXRFbnRyaWVzKCkuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgICAgICAgICBpZiAoZW50cnkgJiYgZW50cnlbJ2VudHJ5VHlwZSddID09ICdsb25ndGFzaycgJiZcbiAgICAgICAgICAgICAgKGVudHJ5WyduYW1lJ10gPT0gJ2Nyb3NzLW9yaWdpbi1kZXNjZW5kYW50JykgJiZcbiAgICAgICAgICAgICAgZW50cnkuYXR0cmlidXRpb24pIHtcbiAgICAgICAgICAgICAgZW50cnkuYXR0cmlidXRpb24uZm9yRWFjaChhdHRyaWIgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZyYW1lVXJsXyA9PSBhdHRyaWIuY29udGFpbmVyU3JjICYmXG4gICAgICAgICAgICAgICAgICAgICsrdGhpcy5udW1Mb25nVGFza3NfICUgTE9OR19UQVNLX1JFUE9SVElOR19USFJFU0hPTEQgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgdXNlcigpLmVycm9yKFRBR18sIGBMb25nIFRhc2s6IFZlbmRvcjogXCIke3RoaXMudHlwZV99XCJgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICBJZnJhbWVUcmFuc3BvcnQucGVyZm9ybWFuY2VPYnNlcnZlcnNfW3RoaXMudHlwZV9dLm9ic2VydmUoe1xuICAgICAgZW50cnlUeXBlczogWydsb25ndGFzayddLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIGEgY3JlYXRpdmUgbm8gbG9uZ2VyIG5lZWRzIGl0cyBjcm9zcy1kb21haW4gaWZyYW1lIChmb3JcbiAgICogaW5zdGFuY2UsIGJlY2F1c2UgdGhlIGNyZWF0aXZlIGhhcyBiZWVuIHJlbW92ZWQgZnJvbSB0aGUgRE9NKS5cbiAgICogT25jZSBhbGwgY3JlYXRpdmVzIHVzaW5nIGEgZnJhbWUgYXJlIGRvbmUgd2l0aCBpdCwgdGhlIGZyYW1lIGNhbiBiZVxuICAgKiBkZXN0cm95ZWQuXG4gICAqIEBwYXJhbSB7IUhUTUxEb2N1bWVudH0gYW1wRG9jIFRoZSBBTVAgZG9jdW1lbnRcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVGhlIHR5cGUgYXR0cmlidXRlIG9mIHRoZSBhbXAtYW5hbHl0aWNzIHRhZ1xuICAgKi9cbiAgc3RhdGljIG1hcmtDcm9zc0RvbWFpbklmcmFtZUFzRG9uZShhbXBEb2MsIHR5cGUpIHtcbiAgICBjb25zdCBmcmFtZURhdGEgPSBJZnJhbWVUcmFuc3BvcnQuZ2V0RnJhbWVEYXRhKHR5cGUpO1xuICAgIGRldigpLmFzc2VydChmcmFtZURhdGEgJiYgZnJhbWVEYXRhLmZyYW1lICYmIGZyYW1lRGF0YS51c2FnZUNvdW50LFxuICAgICAgICAnTWFya2VkIHRoZSAnICsgdHlwZSArICcgZnJhbWUgYXMgZG9uZSwgYnV0IHRoZXJlIGlzIG5vJyArXG4gICAgICAgICcgcmVjb3JkIG9mIGl0IGV4aXN0aW5nLicpO1xuICAgIGlmICgtLShmcmFtZURhdGEudXNhZ2VDb3VudCkpIHtcbiAgICAgIC8vIFNvbWUgb3RoZXIgaW5zdGFuY2UgaXMgc3RpbGwgdXNpbmcgaXRcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYW1wRG9jLmJvZHkucmVtb3ZlQ2hpbGQoZnJhbWVEYXRhLmZyYW1lKTtcbiAgICBkZWxldGUgSWZyYW1lVHJhbnNwb3J0LmNyb3NzRG9tYWluSWZyYW1lc19bdHlwZV07XG4gICAgaWYgKElmcmFtZVRyYW5zcG9ydC5wZXJmb3JtYW5jZU9ic2VydmVyc19bdHlwZV0pIHtcbiAgICAgIElmcmFtZVRyYW5zcG9ydC5wZXJmb3JtYW5jZU9ic2VydmVyc19bdHlwZV0uZGlzY29ubmVjdCgpO1xuICAgICAgSWZyYW1lVHJhbnNwb3J0LnBlcmZvcm1hbmNlT2JzZXJ2ZXJzX1t0eXBlXSA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGlzIHR5cGUgb2YgY3Jvc3MtZG9tYWluIGZyYW1lIGlzIGFscmVhZHkga25vd25cbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVGhlIHR5cGUgYXR0cmlidXRlIG9mIHRoZSBhbXAtYW5hbHl0aWNzIHRhZ1xuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAgICovXG4gIHN0YXRpYyBoYXNDcm9zc0RvbWFpbklmcmFtZSh0eXBlKSB7XG4gICAgcmV0dXJuIGhhc093bihJZnJhbWVUcmFuc3BvcnQuY3Jvc3NEb21haW5JZnJhbWVzXywgdHlwZSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgdW5pcXVlIHZhbHVlIHRvIGRpZmZlcmVudGlhdGUgbWVzc2FnZXMgZnJvbSBhIHBhcnRpY3VsYXJcbiAgICogY3JlYXRpdmUgdG8gdGhlIGNyb3NzLWRvbWFpbiBpZnJhbWUsIG9yIHRvIGlkZW50aWZ5IHRoZSBpZnJhbWUgaXRzZWxmLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGF0aWMgY3JlYXRlVW5pcXVlSWRfKCkge1xuICAgIHJldHVybiBTdHJpbmcoKysoSWZyYW1lVHJhbnNwb3J0Lm5leHRJZF8pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBhbiBBTVAgQW5hbHl0aWNzIHRyaWdnZXIgZXZlbnQgdG8gYSB2ZW5kb3IncyBjcm9zcy1kb21haW4gaWZyYW1lLFxuICAgKiBvciBxdWV1ZXMgdGhlIG1lc3NhZ2UgaWYgdGhlIGZyYW1lIGlzIG5vdCB5ZXQgcmVhZHkgdG8gcmVjZWl2ZSBtZXNzYWdlcy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IEEgc3RyaW5nIGRlc2NyaWJpbmcgdGhlIHRyaWdnZXIgZXZlbnRcbiAgICogQHZpc2libGVGb3JUZXN0aW5nXG4gICAqL1xuICBzZW5kUmVxdWVzdChldmVudCkge1xuICAgIGNvbnN0IGZyYW1lRGF0YSA9IElmcmFtZVRyYW5zcG9ydC5nZXRGcmFtZURhdGEodGhpcy50eXBlXyk7XG4gICAgZGV2KCkuYXNzZXJ0KGZyYW1lRGF0YSwgJ1RyeWluZyB0byBzZW5kIG1lc3NhZ2UgdG8gbm9uLWV4aXN0ZW50IGZyYW1lJyk7XG4gICAgZGV2KCkuYXNzZXJ0KGZyYW1lRGF0YS5xdWV1ZSxcbiAgICAgICAgJ0V2ZW50IHF1ZXVlIGlzIG1pc3NpbmcgZm9yIG1lc3NhZ2VzIGZyb20gJyArIHRoaXMudHlwZV8gK1xuICAgICAgICAnIHRvIGNyZWF0aXZlIElEICcgKyB0aGlzLmNyZWF0aXZlSWRfKTtcbiAgICBmcmFtZURhdGEucXVldWUuZW5xdWV1ZShcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHshLi4vLi4vLi4vc3JjLzNwLWZyYW1lLW1lc3NhZ2luZy5JZnJhbWVUcmFuc3BvcnRFdmVudH1cbiAgICAgICAgICovXG4gICAgICAgICh7Y3JlYXRpdmVJZDogdGhpcy5jcmVhdGl2ZUlkXywgbWVzc2FnZTogZXZlbnR9KSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgRnJhbWVEYXRhIGFzc29jaWF0ZWQgd2l0aCBhIHBhcnRpY3VsYXIgY3Jvc3MtZG9tYWluIGZyYW1lIHR5cGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFRoZSB0eXBlIGF0dHJpYnV0ZSBvZiB0aGUgYW1wLWFuYWx5dGljcyB0YWdcbiAgICogQHJldHVybiB7RnJhbWVEYXRhfVxuICAgKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAgICovXG4gIHN0YXRpYyBnZXRGcmFtZURhdGEodHlwZSkge1xuICAgIHJldHVybiBJZnJhbWVUcmFuc3BvcnQuY3Jvc3NEb21haW5JZnJhbWVzX1t0eXBlXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGFsbCBrbm93bGVkZ2Ugb2YgY3Jvc3MtZG9tYWluIGlmcmFtZXMuXG4gICAqIERvZXMgbm90IGFjdHVhbGx5IHJlbW92ZSB0aGVtIGZyb20gdGhlIERPTS5cbiAgICogQHZpc2libGVGb3JUZXN0aW5nXG4gICAqL1xuICBzdGF0aWMgcmVzZXRDcm9zc0RvbWFpbklmcmFtZXMoKSB7XG4gICAgSWZyYW1lVHJhbnNwb3J0LmNyb3NzRG9tYWluSWZyYW1lc18gPSB7fTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFVuaXF1ZSBJRCBvZiB0aGlzIGluc3RhbmNlIG9mIElmcmFtZVRyYW5zcG9ydFxuICAgKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAgICovXG4gIGdldENyZWF0aXZlSWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRpdmVJZF87XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7c3RyaW5nfSBUeXBlIGF0dHJpYnV0ZSBvZiBwYXJlbnQgYW1wLWFuYWx5dGljcyBpbnN0YW5jZVxuICAgKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAgICovXG4gIGdldFR5cGUoKSB7XG4gICAgcmV0dXJuIHRoaXMudHlwZV87XG4gIH1cbn1cblxuLyoqIEBwcml2YXRlIHtPYmplY3Q8c3RyaW5nLCBGcmFtZURhdGE+fSAqL1xuSWZyYW1lVHJhbnNwb3J0LmNyb3NzRG9tYWluSWZyYW1lc18gPSB7fTtcblxuLyoqIEBwcml2YXRlIHtudW1iZXJ9ICovXG5JZnJhbWVUcmFuc3BvcnQubmV4dElkXyA9IDA7XG5cbi8qKiBAcHJpdmF0ZSB7T2JqZWN0PHN0cmluZywgUGVyZm9ybWFuY2VPYnNlcnZlcj59ICovXG5JZnJhbWVUcmFuc3BvcnQucGVyZm9ybWFuY2VPYnNlcnZlcnNfID0ge307XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgQW1wZG9jQW5hbHl0aWNzUm9vdCxcbiAgRW1iZWRBbmFseXRpY3NSb290LFxufSBmcm9tICcuL2FuYWx5dGljcy1yb290JztcbmltcG9ydCB7XG4gIEFuYWx5dGljc0V2ZW50LFxuICBBbmFseXRpY3NFdmVudFR5cGUsXG4gIEN1c3RvbUV2ZW50VHJhY2tlcixcbiAgZ2V0VHJhY2tlcktleU5hbWUsXG4gIGdldFRyYWNrZXJUeXBlc0ZvclBhcmVudFR5cGUsXG59IGZyb20gJy4vZXZlbnRzJztcbmltcG9ydCB7T2JzZXJ2YWJsZX0gZnJvbSAnLi4vLi4vLi4vc3JjL29ic2VydmFibGUnO1xuaW1wb3J0IHtTZXJ2aWNlc30gZnJvbSAnLi4vLi4vLi4vc3JjL3NlcnZpY2VzJztcbmltcG9ydCB7ZGV2LCB1c2VyfSBmcm9tICcuLi8uLi8uLi9zcmMvbG9nJztcbmltcG9ydCB7XG4gIGdldEZyaWVuZGx5SWZyYW1lRW1iZWRPcHRpb25hbCxcbn0gZnJvbSAnLi4vLi4vLi4vc3JjL2ZyaWVuZGx5LWlmcmFtZS1lbWJlZCc7XG5pbXBvcnQge1xuICBnZXRQYXJlbnRXaW5kb3dGcmFtZUVsZW1lbnQsXG4gIGdldFNlcnZpY2VGb3JEb2MsXG4gIGdldFNlcnZpY2VQcm9taXNlRm9yRG9jLFxuICByZWdpc3RlclNlcnZpY2VCdWlsZGVyRm9yRG9jLFxufSBmcm9tICcuLi8uLi8uLi9zcmMvc2VydmljZSc7XG5pbXBvcnQge2hhc093bn0gZnJvbSAnLi4vLi4vLi4vc3JjL3V0aWxzL29iamVjdCc7XG5cbmNvbnN0IFNDUk9MTF9QUkVDSVNJT05fUEVSQ0VOVCA9IDU7XG5jb25zdCBWQVJfSF9TQ1JPTExfQk9VTkRBUlkgPSAnaG9yaXpvbnRhbFNjcm9sbEJvdW5kYXJ5JztcbmNvbnN0IFZBUl9WX1NDUk9MTF9CT1VOREFSWSA9ICd2ZXJ0aWNhbFNjcm9sbEJvdW5kYXJ5JztcbmNvbnN0IFBST1AgPSAnX19BTVBfQU5fUk9PVCc7XG5cblxuXG4vKiogQGNvbnN0IHtzdHJpbmd9ICovXG5jb25zdCBUQUcgPSAnQW5hbHl0aWNzLkluc3RydW1lbnRhdGlvbic7XG5cblxuLyoqXG4gKiBFdmVudHMgdGhhdCBjYW4gcmVzdWx0IGluIGFuYWx5dGljcyBkYXRhIHRvIGJlIHNlbnQuXG4gKiBAY29uc3Qge0FycmF5PEFuYWx5dGljc0V2ZW50VHlwZT59XG4gKi9cbmNvbnN0IEFMTE9XRURfSU5fRU1CRUQgPSBbXG4gIEFuYWx5dGljc0V2ZW50VHlwZS5WSVNJQkxFLFxuICBBbmFseXRpY3NFdmVudFR5cGUuQ0xJQ0ssXG4gIEFuYWx5dGljc0V2ZW50VHlwZS5USU1FUixcbiAgQW5hbHl0aWNzRXZlbnRUeXBlLkhJRERFTixcbl07XG5cblxuLyoqXG4gKiBAaW1wbGVtZW50cyB7Li4vLi4vLi4vc3JjL3NlcnZpY2UuRGlzcG9zYWJsZX1cbiAqIEBwcml2YXRlXG4gKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAqL1xuZXhwb3J0IGNsYXNzIEluc3RydW1lbnRhdGlvblNlcnZpY2Uge1xuICAvKipcbiAgICogQHBhcmFtIHshLi4vLi4vLi4vc3JjL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBhbXBkb2NcbiAgICovXG4gIGNvbnN0cnVjdG9yKGFtcGRvYykge1xuICAgIC8qKiBAY29uc3QgKi9cbiAgICB0aGlzLmFtcGRvYyA9IGFtcGRvYztcblxuICAgIC8qKiBAY29uc3QgKi9cbiAgICB0aGlzLmFtcGRvY1Jvb3RfID0gbmV3IEFtcGRvY0FuYWx5dGljc1Jvb3QodGhpcy5hbXBkb2MpO1xuXG4gICAgLyoqIEBjb25zdCB7IS4uLy4uLy4uL3NyYy9zZXJ2aWNlL3ZpZXdwb3J0L3ZpZXdwb3J0LWltcGwuVmlld3BvcnR9ICovXG4gICAgdGhpcy52aWV3cG9ydF8gPSBTZXJ2aWNlcy52aWV3cG9ydEZvckRvYyh0aGlzLmFtcGRvYyk7XG5cbiAgICAvKiogQHByaXZhdGUge2Jvb2xlYW59ICovXG4gICAgdGhpcy5zY3JvbGxIYW5kbGVyUmVnaXN0ZXJlZF8gPSBmYWxzZTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7IU9ic2VydmFibGU8XG4gICAgICAhLi4vLi4vLi4vc3JjL3NlcnZpY2Uvdmlld3BvcnQvdmlld3BvcnQtaW1wbC5WaWV3cG9ydENoYW5nZWRFdmVudERlZj59ICovXG4gICAgdGhpcy5zY3JvbGxPYnNlcnZhYmxlXyA9IG5ldyBPYnNlcnZhYmxlKCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGRpc3Bvc2UoKSB7XG4gICAgdGhpcy5hbXBkb2NSb290Xy5kaXNwb3NlKCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshTm9kZX0gY29udGV4dFxuICAgKiBAcmV0dXJuIHshLi9hbmFseXRpY3Mtcm9vdC5BbmFseXRpY3NSb290fVxuICAgKi9cbiAgZ2V0QW5hbHl0aWNzUm9vdChjb250ZXh0KSB7XG4gICAgcmV0dXJuIHRoaXMuZmluZFJvb3RfKGNvbnRleHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IGFuYWx5dGljc0VsZW1lbnRcbiAgICogQHJldHVybiB7IUFuYWx5dGljc0dyb3VwfVxuICAgKi9cbiAgY3JlYXRlQW5hbHl0aWNzR3JvdXAoYW5hbHl0aWNzRWxlbWVudCkge1xuICAgIGNvbnN0IHJvb3QgPSB0aGlzLmZpbmRSb290XyhhbmFseXRpY3NFbGVtZW50KTtcbiAgICByZXR1cm4gbmV3IEFuYWx5dGljc0dyb3VwKHJvb3QsIGFuYWx5dGljc0VsZW1lbnQsIHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyaWdnZXJzIHRoZSBhbmFseXRpY3MgZXZlbnQgd2l0aCB0aGUgc3BlY2lmaWVkIHR5cGUuXG4gICAqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IHRhcmdldFxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRUeXBlXG4gICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz49fSBvcHRfdmFycyBBIG1hcCBvZiB2YXJzIGFuZCB0aGVpciB2YWx1ZXMuXG4gICAqL1xuICB0cmlnZ2VyRXZlbnRGb3JUYXJnZXQodGFyZ2V0LCBldmVudFR5cGUsIG9wdF92YXJzKSB7XG4gICAgLy8gVE9ETyhkdm95dGVua28pOiByZW5hbWUgdG8gYHRyaWdnZXJFdmVudGAuXG4gICAgY29uc3QgZXZlbnQgPSBuZXcgQW5hbHl0aWNzRXZlbnQodGFyZ2V0LCBldmVudFR5cGUsIG9wdF92YXJzKTtcbiAgICBjb25zdCByb290ID0gdGhpcy5maW5kUm9vdF8odGFyZ2V0KTtcbiAgICBjb25zdCB0cmFja2VyID0gLyoqIEB0eXBlIHshQ3VzdG9tRXZlbnRUcmFja2VyfSAqLyAoXG4gICAgICByb290LmdldFRyYWNrZXIoJ2N1c3RvbScsIEN1c3RvbUV2ZW50VHJhY2tlcikpO1xuICAgIHRyYWNrZXIudHJpZ2dlcihldmVudCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshTm9kZX0gY29udGV4dFxuICAgKiBAcmV0dXJuIHshLi9hbmFseXRpY3Mtcm9vdC5BbmFseXRpY3NSb290fVxuICAgKi9cbiAgZmluZFJvb3RfKGNvbnRleHQpIHtcbiAgICAvLyBGSUVcbiAgICBjb25zdCBmcmFtZSA9IGdldFBhcmVudFdpbmRvd0ZyYW1lRWxlbWVudChjb250ZXh0LCB0aGlzLmFtcGRvYy53aW4pO1xuICAgIGlmIChmcmFtZSkge1xuICAgICAgY29uc3QgZW1iZWQgPSBnZXRGcmllbmRseUlmcmFtZUVtYmVkT3B0aW9uYWwoZnJhbWUpO1xuICAgICAgaWYgKGVtYmVkKSB7XG4gICAgICAgIGNvbnN0IGVtYmVkTm90TnVsbCA9IGVtYmVkO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRPckNyZWF0ZVJvb3RfKGVtYmVkLCAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBFbWJlZEFuYWx5dGljc1Jvb3QodGhpcy5hbXBkb2MsIGVtYmVkTm90TnVsbCxcbiAgICAgICAgICAgICAgdGhpcy5hbXBkb2NSb290Xyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFtcGRvYyByb290XG4gICAgcmV0dXJuIHRoaXMuYW1wZG9jUm9vdF87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshT2JqZWN0fSBob2xkZXJcbiAgICogQHBhcmFtIHtmdW5jdGlvbigpOiEuL2FuYWx5dGljcy1yb290LkFuYWx5dGljc1Jvb3R9IGZhY3RvcnlcbiAgICogQHJldHVybiB7IS4vYW5hbHl0aWNzLXJvb3QuQW5hbHl0aWNzUm9vdH1cbiAgICovXG4gIGdldE9yQ3JlYXRlUm9vdF8oaG9sZGVyLCBmYWN0b3J5KSB7XG4gICAgbGV0IHJvb3QgPSAvKiogQHR5cGUgez8uL2FuYWx5dGljcy1yb290LkFuYWx5dGljc1Jvb3R9ICovIChob2xkZXJbUFJPUF0pO1xuICAgIGlmICghcm9vdCkge1xuICAgICAgcm9vdCA9IGZhY3RvcnkoKTtcbiAgICAgIGhvbGRlcltQUk9QXSA9IHJvb3Q7XG4gICAgfVxuICAgIHJldHVybiByb290O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUpzb25PYmplY3R9IGNvbmZpZyBDb25maWd1cmF0aW9uIGZvciBpbnN0cnVtZW50YXRpb24uXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIUFuYWx5dGljc0V2ZW50KX0gbGlzdGVuZXIgVGhlIGNhbGxiYWNrIHRvIGNhbGwgd2hlbiB0aGUgZXZlbnRcbiAgICogIG9jY3Vycy5cbiAgICogQHBhcmFtIHshRWxlbWVudH0gYW5hbHl0aWNzRWxlbWVudCBUaGUgZWxlbWVudCBhc3NvY2lhdGVkIHdpdGggdGhlXG4gICAqICBjb25maWcuXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXN0cmljdGVkXG4gICAqL1xuICBhZGRMaXN0ZW5lckRlcHJfKGNvbmZpZywgbGlzdGVuZXIsIGFuYWx5dGljc0VsZW1lbnQpIHtcbiAgICBjb25zdCBldmVudFR5cGUgPSBjb25maWdbJ29uJ107XG4gICAgaWYgKCF0aGlzLmlzVHJpZ2dlckFsbG93ZWRfKGV2ZW50VHlwZSwgYW5hbHl0aWNzRWxlbWVudCkpIHtcbiAgICAgIHVzZXIoKS5lcnJvcihUQUcsICdUcmlnZ2VyIHR5cGUgXCInICsgZXZlbnRUeXBlICsgJ1wiIGlzIG5vdCAnICtcbiAgICAgICAgJ2FsbG93ZWQgaW4gdGhlIGVtYmVkLicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoZXZlbnRUeXBlID09PSBBbmFseXRpY3NFdmVudFR5cGUuU0NST0xMKSB7XG4gICAgICBpZiAoIWNvbmZpZ1snc2Nyb2xsU3BlYyddKSB7XG4gICAgICAgIHVzZXIoKS5lcnJvcihUQUcsICdNaXNzaW5nIHNjcm9sbFNwZWMgb24gc2Nyb2xsIHRyaWdnZXIuJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMucmVnaXN0ZXJTY3JvbGxUcmlnZ2VyXyhjb25maWdbJ3Njcm9sbFNwZWMnXSwgbGlzdGVuZXIpO1xuXG4gICAgICAvLyBUcmlnZ2VyIGFuIGV2ZW50IHRvIGZpcmUgZXZlbnRzIHRoYXQgbWlnaHQgaGF2ZSBhbHJlYWR5IGhhcHBlbmVkLlxuICAgICAgY29uc3Qgc2l6ZSA9IHRoaXMudmlld3BvcnRfLmdldFNpemUoKTtcbiAgICAgIHRoaXMub25TY3JvbGxfKHtcbiAgICAgICAgdG9wOiB0aGlzLnZpZXdwb3J0Xy5nZXRTY3JvbGxUb3AoKSxcbiAgICAgICAgbGVmdDogdGhpcy52aWV3cG9ydF8uZ2V0U2Nyb2xsTGVmdCgpLFxuICAgICAgICB3aWR0aDogc2l6ZS53aWR0aCxcbiAgICAgICAgaGVpZ2h0OiBzaXplLmhlaWdodCxcbiAgICAgICAgcmVsYXlvdXRBbGw6IGZhbHNlLFxuICAgICAgICB2ZWxvY2l0eTogMCwgLy8gSGFjayBmb3IgdHlwaW5nLlxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlXG4gICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz49fSBvcHRfdmFyc1xuICAgKiBAcmV0dXJuIHshQW5hbHl0aWNzRXZlbnR9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjcmVhdGVFdmVudERlcHJfKHR5cGUsIG9wdF92YXJzKSB7XG4gICAgLy8gVE9ETyhkdm95dGVua28pOiBSZW1vdmUgd2hlbiBUcmFja2VyIG1pZ3JhdGlvbiBpcyBjb21wbGV0ZS5cbiAgICByZXR1cm4gbmV3IEFuYWx5dGljc0V2ZW50KFxuICAgICAgICB0aGlzLmFtcGRvY1Jvb3RfLmdldFJvb3RFbGVtZW50KCksIHR5cGUsIG9wdF92YXJzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuLi8uLi8uLi9zcmMvc2VydmljZS92aWV3cG9ydC92aWV3cG9ydC1pbXBsLlZpZXdwb3J0Q2hhbmdlZEV2ZW50RGVmfSBlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBvblNjcm9sbF8oZSkge1xuICAgIHRoaXMuc2Nyb2xsT2JzZXJ2YWJsZV8uZmlyZShlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBmb3IgYSBsaXN0ZW5lciB0byBiZSBjYWxsZWQgd2hlbiB0aGUgYm91bmRhcmllcyBzcGVjaWZpZWQgaW5cbiAgICogY29uZmlnIGFyZSByZWFjaGVkLlxuICAgKiBAcGFyYW0geyFKc29uT2JqZWN0fSBjb25maWcgdGhlIGNvbmZpZyB0aGF0IHNwZWNpZmllcyB0aGUgYm91bmRhcmllcy5cbiAgICogQHBhcmFtIHtmdW5jdGlvbighQW5hbHl0aWNzRXZlbnQpfSBsaXN0ZW5lclxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcmVnaXN0ZXJTY3JvbGxUcmlnZ2VyXyhjb25maWcsIGxpc3RlbmVyKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGNvbmZpZ1sndmVydGljYWxCb3VuZGFyaWVzJ10pICYmXG4gICAgICAgICFBcnJheS5pc0FycmF5KGNvbmZpZ1snaG9yaXpvbnRhbEJvdW5kYXJpZXMnXSkpIHtcbiAgICAgIHVzZXIoKS5lcnJvcihUQUcsICdCb3VuZGFyaWVzIGFyZSByZXF1aXJlZCBmb3IgdGhlIHNjcm9sbCAnICtcbiAgICAgICAgICAndHJpZ2dlciB0byB3b3JrLicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEVuc3VyZSB0aGF0IHRoZSBzY3JvbGwgZXZlbnRzIGFyZSBiZWluZyBsaXN0ZW5lZCB0by5cbiAgICBpZiAoIXRoaXMuc2Nyb2xsSGFuZGxlclJlZ2lzdGVyZWRfKSB7XG4gICAgICB0aGlzLnNjcm9sbEhhbmRsZXJSZWdpc3RlcmVkXyA9IHRydWU7XG4gICAgICB0aGlzLnZpZXdwb3J0Xy5vbkNoYW5nZWQodGhpcy5vblNjcm9sbF8uYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHshT2JqZWN0PG51bWJlciwgYm9vbGVhbj59IGJvdW5kc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzY3JvbGxQb3MgTnVtYmVyIHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBzY3JvbGxcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFyTmFtZSB2YXJpYWJsZSBuYW1lIHRvIGFzc2lnbiB0byB0aGUgYm91bmQgdGhhdFxuICAgICAqIHRyaWdnZXJzIHRoZSBldmVudFxuICAgICAqIHBvc2l0aW9uLlxuICAgICAqL1xuICAgIGNvbnN0IHRyaWdnZXJTY3JvbGxFdmVudHMgPSAoYm91bmRzLCBzY3JvbGxQb3MsIHZhck5hbWUpID0+IHtcbiAgICAgIGlmICghc2Nyb2xsUG9zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIEdvZXMgdGhyb3VnaCBlYWNoIG9mIHRoZSBib3VuZGFyaWVzIGFuZCBmaXJlcyBhbiBldmVudCBpZiBpdCBoYXMgbm90XG4gICAgICAvLyBiZWVuIGZpcmVkIHNvIGZhciBhbmQgaXQgc2hvdWxkIGJlLlxuICAgICAgZm9yIChjb25zdCBiIGluIGJvdW5kcykge1xuICAgICAgICBpZiAoIWhhc093bihib3VuZHMsIGIpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYm91bmQgPSBwYXJzZUludChiLCAxMCk7XG4gICAgICAgIGlmIChib3VuZCA+IHNjcm9sbFBvcyB8fCBib3VuZHNbYm91bmRdKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgYm91bmRzW2JvdW5kXSA9IHRydWU7XG4gICAgICAgIGNvbnN0IHZhcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICB2YXJzW3Zhck5hbWVdID0gYjtcbiAgICAgICAgbGlzdGVuZXIodGhpcy5jcmVhdGVFdmVudERlcHJfKEFuYWx5dGljc0V2ZW50VHlwZS5TQ1JPTEwsIHZhcnMpKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgYm91bmRzViA9IHRoaXMubm9ybWFsaXplQm91bmRhcmllc18oY29uZmlnWyd2ZXJ0aWNhbEJvdW5kYXJpZXMnXSk7XG4gICAgY29uc3QgYm91bmRzSCA9IHRoaXMubm9ybWFsaXplQm91bmRhcmllc18oY29uZmlnWydob3Jpem9udGFsQm91bmRhcmllcyddKTtcbiAgICB0aGlzLnNjcm9sbE9ic2VydmFibGVfLmFkZChlID0+IHtcbiAgICAgIC8vIENhbGN1bGF0ZXMgcGVyY2VudGFnZSBzY3JvbGxlZCBieSBhZGRpbmcgc2NyZWVuIGhlaWdodC93aWR0aCB0b1xuICAgICAgLy8gdG9wL2xlZnQgYW5kIGRpdmlkaW5nIGJ5IHRoZSB0b3RhbCBzY3JvbGwgaGVpZ2h0L3dpZHRoLlxuICAgICAgdHJpZ2dlclNjcm9sbEV2ZW50cyhib3VuZHNWLFxuICAgICAgICAgIChlLnRvcCArIGUuaGVpZ2h0KSAqIDEwMCAvIHRoaXMudmlld3BvcnRfLmdldFNjcm9sbEhlaWdodCgpLFxuICAgICAgICAgIFZBUl9WX1NDUk9MTF9CT1VOREFSWSk7XG4gICAgICB0cmlnZ2VyU2Nyb2xsRXZlbnRzKGJvdW5kc0gsXG4gICAgICAgICAgKGUubGVmdCArIGUud2lkdGgpICogMTAwIC8gdGhpcy52aWV3cG9ydF8uZ2V0U2Nyb2xsV2lkdGgoKSxcbiAgICAgICAgICBWQVJfSF9TQ1JPTExfQk9VTkRBUlkpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJvdW5kcyB0aGUgYm91bmRhcmllcyBmb3Igc2Nyb2xsIHRyaWdnZXIgdG8gbmVhcmVzdFxuICAgKiBTQ1JPTExfUFJFQ0lTSU9OX1BFUkNFTlQgYW5kIHJldHVybnMgYW4gb2JqZWN0IHdpdGggbm9ybWFsaXplZCBib3VuZGFyaWVzXG4gICAqIGFzIGtleXMgYW5kIGZhbHNlIGFzIHZhbHVlcy5cbiAgICpcbiAgICogQHBhcmFtIHshQXJyYXk8bnVtYmVyPn0gYm91bmRzIGFycmF5IG9mIGJvdW5kcy5cbiAgICogQHJldHVybiB7IU9iamVjdDxudW1iZXIsYm9vbGVhbj59IE9iamVjdCB3aXRoIG5vcm1hbGl6ZWQgYm91bmRzIGFzIGtleXNcbiAgICogYW5kIGZhbHNlIGFzIHZhbHVlLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgbm9ybWFsaXplQm91bmRhcmllc18oYm91bmRzKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgaWYgKCFib3VuZHMgfHwgIUFycmF5LmlzQXJyYXkoYm91bmRzKSkge1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBiID0gMDsgYiA8IGJvdW5kcy5sZW5ndGg7IGIrKykge1xuICAgICAgbGV0IGJvdW5kID0gYm91bmRzW2JdO1xuICAgICAgaWYgKHR5cGVvZiBib3VuZCAhPT0gJ251bWJlcicgfHwgIWlzRmluaXRlKGJvdW5kKSkge1xuICAgICAgICB1c2VyKCkuZXJyb3IoVEFHLCAnU2Nyb2xsIHRyaWdnZXIgYm91bmRhcmllcyBtdXN0IGJlIGZpbml0ZS4nKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cblxuICAgICAgYm91bmQgPSBNYXRoLm1pbihNYXRoLnJvdW5kKGJvdW5kIC8gU0NST0xMX1BSRUNJU0lPTl9QRVJDRU5UKSAqXG4gICAgICAgICAgU0NST0xMX1BSRUNJU0lPTl9QRVJDRU5ULCAxMDApO1xuICAgICAgcmVzdWx0W2JvdW5kXSA9IGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyB0byBjb25maXJtIHRoYXQgYSBnaXZlbiB0cmlnZ2VyIHR5cGUgaXMgYWxsb3dlZCBmb3IgdGhlIGVsZW1lbnQuXG4gICAqIFNwZWNpZmljYWxseSwgaXQgY29uZmlybXMgdGhhdCBpZiB0aGUgZWxlbWVudCBpcyBpbiB0aGUgZW1iZWQsIG9ubHkgYVxuICAgKiBzdWJzZXQgb2YgdGhlIHRyaWdnZXIgdHlwZXMgYXJlIGFsbG93ZWQuXG4gICAqIEBwYXJhbSAgeyFBbmFseXRpY3NFdmVudFR5cGV9IHRyaWdnZXJUeXBlXG4gICAqIEBwYXJhbSAgeyFFbGVtZW50fSBlbGVtZW50XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIHRyaWdnZXIgaXMgYWxsb3dlZC4gRmFsc2Ugb3RoZXJ3aXNlLlxuICAgKi9cbiAgaXNUcmlnZ2VyQWxsb3dlZF8odHJpZ2dlclR5cGUsIGVsZW1lbnQpIHtcbiAgICBpZiAoZWxlbWVudC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3ICE9IHRoaXMuYW1wZG9jLndpbikge1xuICAgICAgcmV0dXJuIEFMTE9XRURfSU5fRU1CRUQuaW5jbHVkZXModHJpZ2dlclR5cGUpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuXG5cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgZ3JvdXAgb2YgYW5hbHl0aWNzIHRyaWdnZXJzIGZvciBhIHNpbmdsZSBjb25maWcuIEFsbCB0cmlnZ2Vyc1xuICogYXJlIGRlY2xhcmVkIGFuZCByZWxlYXNlZCBhdCB0aGUgc2FtZSB0aW1lLlxuICpcbiAqIEBpbXBsZW1lbnRzIHsuLi8uLi8uLi9zcmMvc2VydmljZS5EaXNwb3NhYmxlfVxuICovXG5leHBvcnQgY2xhc3MgQW5hbHl0aWNzR3JvdXAge1xuICAvKipcbiAgICogQHBhcmFtIHshLi9hbmFseXRpY3Mtcm9vdC5BbmFseXRpY3NSb290fSByb290XG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IGFuYWx5dGljc0VsZW1lbnRcbiAgICogQHBhcmFtIHshSW5zdHJ1bWVudGF0aW9uU2VydmljZX0gc2VydmljZVxuICAgKi9cbiAgY29uc3RydWN0b3Iocm9vdCwgYW5hbHl0aWNzRWxlbWVudCwgc2VydmljZSkge1xuICAgIC8vIFRPRE8oZHZveXRlbmtvKTogcmVtb3ZlIGBzZXJ2aWNlYCBhcyBzb29uIGFzIG1pZ3JhdGlvbiBpcyBjb21wbGV0ZS5cblxuICAgIC8qKiBAY29uc3QgKi9cbiAgICB0aGlzLnJvb3RfID0gcm9vdDtcbiAgICAvKiogQGNvbnN0ICovXG4gICAgdGhpcy5hbmFseXRpY3NFbGVtZW50XyA9IGFuYWx5dGljc0VsZW1lbnQ7XG4gICAgLyoqIEBjb25zdCAqL1xuICAgIHRoaXMuc2VydmljZV8gPSBzZXJ2aWNlO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUFycmF5PCFVbmxpc3RlbkRlZj59ICovXG4gICAgdGhpcy5saXN0ZW5lcnNfID0gW107XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGRpc3Bvc2UoKSB7XG4gICAgdGhpcy5saXN0ZW5lcnNfLmZvckVhY2gobGlzdGVuZXIgPT4ge1xuICAgICAgbGlzdGVuZXIoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgdHJpZ2dlciB3aXRoIHRoZSBzcGVjaWZpZWQgY29uZmlnIGFuZCBsaXN0ZW5lci4gVGhlIGNvbmZpZyBtdXN0XG4gICAqIGNvbnRhaW4gYG9uYCBwcm9wZXJ0eSBzcGVjaWZ5aW5nIHRoZSB0eXBlIG9mIHRoZSBldmVudC5cbiAgICpcbiAgICogVHJpZ2dlcnMgcmVnaXN0ZXJlZCBvbiBhIGdyb3VwIGFyZSBhdXRvbWF0aWNhbGx5IHJlbGVhc2VkIHdoZW4gdGhlXG4gICAqIGdyb3VwIGlzIGRpc3Bvc2VkLlxuICAgKlxuICAgKiBAcGFyYW0geyFKc29uT2JqZWN0fSBjb25maWdcbiAgICogQHBhcmFtIHtmdW5jdGlvbighQW5hbHl0aWNzRXZlbnQpfSBoYW5kbGVyXG4gICAqL1xuICBhZGRUcmlnZ2VyKGNvbmZpZywgaGFuZGxlcikge1xuICAgIGNvbnN0IGV2ZW50VHlwZSA9IGRldigpLmFzc2VydFN0cmluZyhjb25maWdbJ29uJ10pO1xuICAgIGNvbnN0IHRyYWNrZXJLZXkgPSBnZXRUcmFja2VyS2V5TmFtZShldmVudFR5cGUpO1xuICAgIGNvbnN0IHRyYWNrZXJXaGl0ZWxpc3QgPSBnZXRUcmFja2VyVHlwZXNGb3JQYXJlbnRUeXBlKHRoaXMucm9vdF8uZ2V0VHlwZSgpKTtcblxuICAgIGlmICh0aGlzLmlzRGVwcmVjYXRlZExpc3RlbmVyRXZlbnQodHJhY2tlcktleSkpIHtcbiAgICAgIC8vIFRPRE8oZHZveXRlbmtvKTogcmVtb3ZlIHRoaXMgdXNlIGFuZCBgYWRkTGlzdGVuZXJEZXByX2Agb25jZSBhbGxcbiAgICAgIC8vIHRyaWdnZXJzIGhhdmUgYmVlbiBtaWdyYXRlZC4uXG4gICAgICB0aGlzLnNlcnZpY2VfLmFkZExpc3RlbmVyRGVwcl8oY29uZmlnLCBoYW5kbGVyLCB0aGlzLmFuYWx5dGljc0VsZW1lbnRfKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB0cmFja2VyID0gdGhpcy5yb290Xy5nZXRUcmFja2VyRm9yV2hpdGVsaXN0KFxuICAgICAgICB0cmFja2VyS2V5LCB0cmFja2VyV2hpdGVsaXN0KTtcbiAgICB1c2VyKCkuYXNzZXJ0KCEhdHJhY2tlcixcbiAgICAgICAgJ1RyaWdnZXIgdHlwZSBcIiVzXCIgaXMgbm90IGFsbG93ZWQgaW4gdGhlICVzJywgZXZlbnRUeXBlLFxuICAgICAgICB0aGlzLnJvb3RfLmdldFR5cGUoKSk7XG4gICAgY29uc3QgdW5saXN0ZW4gPSB0cmFja2VyLmFkZCh0aGlzLmFuYWx5dGljc0VsZW1lbnRfLCBldmVudFR5cGUsIGNvbmZpZyxcbiAgICAgICAgaGFuZGxlcik7XG4gICAgdGhpcy5saXN0ZW5lcnNfLnB1c2godW5saXN0ZW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0cmlnZ2VyVHlwZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaXNEZXByZWNhdGVkTGlzdGVuZXJFdmVudCh0cmlnZ2VyVHlwZSkge1xuICAgIHJldHVybiB0cmlnZ2VyVHlwZSA9PSAnc2Nyb2xsJztcbiAgfVxufVxuXG5cbi8qKlxuICogSXQncyBpbXBvcnRhbnQgdG8gcmVzb2x2ZSBpbnN0cnVtZW50YXRpb24gYXN5bmNocm9ub3VzbHkgaW4gZWxlbWVudHMgdGhhdFxuICogZGVwZW5kcyBvbiBpdCBpbiBtdWx0aS1kb2Mgc2NvcGUuIE90aGVyd2lzZSBhbiBlbGVtZW50IGxpZmUtY3ljbGUgY291bGRcbiAqIHJlc29sdmUgd2F5IGJlZm9yZSB3ZSBoYXZlIHRoZSBzZXJ2aWNlIGF2YWlsYWJsZS5cbiAqXG4gKiBAcGFyYW0geyFFbGVtZW50fCEuLi8uLi8uLi9zcmMvc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICogQHJldHVybiB7IVByb21pc2U8SW5zdHJ1bWVudGF0aW9uU2VydmljZT59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnN0cnVtZW50YXRpb25TZXJ2aWNlUHJvbWlzZUZvckRvYyhlbGVtZW50T3JBbXBEb2MpIHtcbiAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2U8SW5zdHJ1bWVudGF0aW9uU2VydmljZT59ICovIChcbiAgICBnZXRTZXJ2aWNlUHJvbWlzZUZvckRvYyhlbGVtZW50T3JBbXBEb2MsICdhbXAtYW5hbHl0aWNzLWluc3RydW1lbnRhdGlvbicpKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyFFbGVtZW50fCEuLi8uLi8uLi9zcmMvc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICogQHJldHVybiB7IUluc3RydW1lbnRhdGlvblNlcnZpY2V9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnN0cnVtZW50YXRpb25TZXJ2aWNlRm9yRG9jRm9yVGVzdGluZyhlbGVtZW50T3JBbXBEb2MpIHtcbiAgcmVnaXN0ZXJTZXJ2aWNlQnVpbGRlckZvckRvYyhcbiAgICAgIGVsZW1lbnRPckFtcERvYywgJ2FtcC1hbmFseXRpY3MtaW5zdHJ1bWVudGF0aW9uJywgSW5zdHJ1bWVudGF0aW9uU2VydmljZSk7XG4gIHJldHVybiBnZXRTZXJ2aWNlRm9yRG9jKGVsZW1lbnRPckFtcERvYywgJ2FtcC1hbmFseXRpY3MtaW5zdHJ1bWVudGF0aW9uJyk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtCYXRjaGluZ1BsdWdpbkZ1bmN0aW9ucywgYmF0Y2hTZWdtZW50RGVmfSBmcm9tICcuL2JhdGNoaW5nLXBsdWdpbnMnO1xuaW1wb3J0IHtcbiAgRXhwYW5zaW9uT3B0aW9ucyxcbiAgdmFyaWFibGVTZXJ2aWNlRm9yLFxufSBmcm9tICcuL3ZhcmlhYmxlcyc7XG5pbXBvcnQge1NBTkRCT1hfQVZBSUxBQkxFX1ZBUlN9IGZyb20gJy4vc2FuZGJveC12YXJzLXdoaXRlbGlzdCc7XG5pbXBvcnQge1NlcnZpY2VzfSBmcm9tICcuLi8uLi8uLi9zcmMvc2VydmljZXMnO1xuaW1wb3J0IHthcHBlbmRFbmNvZGVkUGFyYW1TdHJpbmdUb1VybH0gZnJvbSAnLi4vLi4vLi4vc3JjL3VybCc7XG5pbXBvcnQge2RldiwgdXNlcn0gZnJvbSAnLi4vLi4vLi4vc3JjL2xvZyc7XG5pbXBvcnQge2RpY3R9IGZyb20gJy4uLy4uLy4uL3NyYy91dGlscy9vYmplY3QnO1xuaW1wb3J0IHtmaWx0ZXJTcGxpY2V9IGZyb20gJy4uLy4uLy4uL3NyYy91dGlscy9hcnJheSc7XG5pbXBvcnQge2lzQXJyYXksIGlzRmluaXRlTnVtYmVyfSBmcm9tICcuLi8uLi8uLi9zcmMvdHlwZXMnO1xuaW1wb3J0IHttYXB9IGZyb20gJy4uLy4uLy4uL3NyYy91dGlscy9vYmplY3QnO1xuaW1wb3J0IHtwYXJzZVF1ZXJ5U3RyaW5nfSBmcm9tICcuLi8uLi8uLi9zcmMvdXJsJztcblxuY29uc3QgVEFHID0gJ0FNUC1BTkFMWVRJQ1MnO1xuXG5jb25zdCBCQVRDSF9JTlRFUlZBTF9NSU4gPSAyMDA7XG5cbmV4cG9ydCBjbGFzcyBSZXF1ZXN0SGFuZGxlciB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fSBhbXBBbmFseXRpY3NFbGVtZW50XG4gICAqIEBwYXJhbSB7IUpzb25PYmplY3R9IHJlcXVlc3RcbiAgICogQHBhcmFtIHshLi4vLi4vLi4vc3JjL3ByZWNvbm5lY3QuUHJlY29ubmVjdH0gcHJlY29ubmVjdFxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHN0cmluZywgIUpzb25PYmplY3QpfSBoYW5kbGVyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNTYW5kYm94XG4gICAqL1xuICBjb25zdHJ1Y3RvcihhbXBBbmFseXRpY3NFbGVtZW50LCByZXF1ZXN0LCBwcmVjb25uZWN0LCBoYW5kbGVyLCBpc1NhbmRib3gpIHtcblxuICAgIC8qKiBAY29uc3QgeyFXaW5kb3d9ICovXG4gICAgdGhpcy53aW4gPSBhbXBBbmFseXRpY3NFbGVtZW50LmdldEFtcERvYygpLndpbjtcblxuICAgIC8qKiBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLmJhc2VVcmwgPSBkZXYoKS5hc3NlcnQocmVxdWVzdFsnYmFzZVVybCddKTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7QXJyYXk8bnVtYmVyPnxudW1iZXJ8dW5kZWZpbmVkfSAqL1xuICAgIHRoaXMuYmF0Y2hJbnRlcnZhbF8gPSByZXF1ZXN0WydiYXRjaEludGVydmFsJ107IC8vdW5pdCBpcyBzZWNcblxuICAgIC8qKiBAcHJpdmF0ZSB7P251bWJlcn0gKi9cbiAgICB0aGlzLnJlcG9ydFdpbmRvd18gPSBOdW1iZXIocmVxdWVzdFsncmVwb3J0V2luZG93J10pIHx8IG51bGw7IC8vIHVuaXQgaXMgc2VjXG5cbiAgICAvKiogQHByaXZhdGUgez9udW1iZXJ9ICovXG4gICAgdGhpcy5iYXRjaEludGVydmFsUG9pbnRlcl8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMuYmF0Y2hQbHVnaW5JZF8gPSByZXF1ZXN0WydiYXRjaFBsdWdpbiddO1xuXG4gICAgdXNlcigpLmFzc2VydCgodGhpcy5iYXRjaFBsdWdpbklkXyA/IHRoaXMuYmF0Y2hJbnRlcnZhbF8gOiB0cnVlKSxcbiAgICAgICAgJ0ludmFsaWQgcmVxdWVzdDogYmF0Y2hQbHVnaW4gY2Fubm90IGJlIHNldCBvbiBub24tYmF0Y2hlZCByZXF1ZXN0Jyk7XG5cbiAgICAvKiogQGNvbnN0IHs/ZnVuY3Rpb24oc3RyaW5nLCAhQXJyYXk8IWJhdGNoU2VnbWVudERlZj4pfSAqL1xuICAgIHRoaXMuYmF0Y2hpbmdQbHVnaW5fID0gdGhpcy5iYXRjaFBsdWdpbklkX1xuICAgICAgPyB1c2VyKCkuYXNzZXJ0KEJhdGNoaW5nUGx1Z2luRnVuY3Rpb25zW3RoaXMuYmF0Y2hQbHVnaW5JZF9dLFxuICAgICAgICAgIGBJbnZhbGlkIHJlcXVlc3Q6IHVuc3VwcG9ydGVkIGJhdGNoIHBsdWdpbiAke3RoaXMuYmF0Y2hQbHVnaW5JZF99YClcbiAgICAgIDogbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7IS4vdmFyaWFibGVzLlZhcmlhYmxlU2VydmljZX0gKi9cbiAgICB0aGlzLnZhcmlhYmxlU2VydmljZV8gPSB2YXJpYWJsZVNlcnZpY2VGb3IodGhpcy53aW4pO1xuXG4gICAgLyoqIEBwcml2YXRlIHshLi4vLi4vLi4vc3JjL3NlcnZpY2UvdXJsLXJlcGxhY2VtZW50cy1pbXBsLlVybFJlcGxhY2VtZW50c30gKi9cbiAgICB0aGlzLnVybFJlcGxhY2VtZW50U2VydmljZV8gPVxuICAgICAgU2VydmljZXMudXJsUmVwbGFjZW1lbnRzRm9yRG9jKGFtcEFuYWx5dGljc0VsZW1lbnQpO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/UHJvbWlzZTxzdHJpbmc+fSAqL1xuICAgIHRoaXMuYmFzZVVybFByb21pc2VfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P1Byb21pc2U8c3RyaW5nPn0gKi9cbiAgICB0aGlzLmJhc2VVcmxUZW1wbGF0ZVByb21pc2VfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7IUFycmF5PCFQcm9taXNlPHN0cmluZz4+fSovXG4gICAgdGhpcy5leHRyYVVybFBhcmFtc1Byb21pc2VfID0gW107XG5cbiAgICAvKiogQHByaXZhdGUgeyFBcnJheTwhUHJvbWlzZTwhYmF0Y2hTZWdtZW50RGVmPj59ICovXG4gICAgdGhpcy5iYXRjaFNlZ21lbnRQcm9taXNlc18gPSBbXTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7IS4uLy4uLy4uL3NyYy9wcmVjb25uZWN0LlByZWNvbm5lY3R9ICovXG4gICAgdGhpcy5wcmVjb25uZWN0XyA9IHByZWNvbm5lY3Q7XG5cbiAgICAvKiogQHByaXZhdGUge2Z1bmN0aW9uKHN0cmluZywgIUpzb25PYmplY3QpfSAqL1xuICAgIHRoaXMuaGFuZGxlcl8gPSBoYW5kbGVyO1xuXG4gICAgLyoqIEBjb25zdCBAcHJpdmF0ZSB7IU9iamVjdHx1bmRlZmluZWR9ICovXG4gICAgdGhpcy53aGl0ZUxpc3RfID0gaXNTYW5kYm94ID8gU0FOREJPWF9BVkFJTEFCTEVfVkFSUyA6IHVuZGVmaW5lZDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P251bWJlcn0gKi9cbiAgICB0aGlzLmJhdGNoSW50ZXJ2YWxUaW1lb3V0SWRfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P251bWJlcn0gKi9cbiAgICB0aGlzLnJlcG9ydFdpbmRvd1RpbWVvdXRJZF8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHtib29sZWFufSAqL1xuICAgIHRoaXMucmVwb3J0UmVxdWVzdF8gPSB0cnVlO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/SnNvbk9iamVjdH0gKi9cbiAgICB0aGlzLmxhc3RUcmlnZ2VyXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUge251bWJlcn0gKi9cbiAgICB0aGlzLnF1ZXVlU2l6ZV8gPSAwO1xuXG4gICAgdGhpcy5pbml0UmVwb3J0V2luZG93XygpO1xuICAgIHRoaXMuaW5pdEJhdGNoSW50ZXJ2YWxfKCk7XG4gIH1cblxuICAvKipcbiAgICogRXhwb3NlZCBtZXRob2QgdG8gc2VuZCBhIHJlcXVlc3Qgb24gZXZlbnQuXG4gICAqIFJlYWwgcGluZyBtYXkgYmUgYmF0Y2hlZCBhbmQgc2VuZCBvdXQgbGF0ZXIuXG4gICAqIEBwYXJhbSB7P0pzb25PYmplY3R9IGNvbmZpZ1BhcmFtc1xuICAgKiBAcGFyYW0geyFKc29uT2JqZWN0fSB0cmlnZ2VyXG4gICAqIEBwYXJhbSB7IS4vdmFyaWFibGVzLkV4cGFuc2lvbk9wdGlvbnN9IGV4cGFuc2lvbk9wdGlvblxuICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCAqPn0gZHluYW1pY0JpbmRpbmdzIEEgbWFwcGluZyBvZiB2YXJpYWJsZXMgdG9cbiAgICogICAgIHN0cmluZ2FibGUgdmFsdWVzLiBGb3IgZXhhbXBsZSwgdmFsdWVzIGNvdWxkIGJlIHN0cmluZ3MsIGZ1bmN0aW9ucyB0aGF0XG4gICAqICAgICByZXR1cm4gc3RyaW5ncywgcHJvbWlzZXMsIGV0Yy5cbiAgICovXG4gIHNlbmQoY29uZmlnUGFyYW1zLCB0cmlnZ2VyLCBleHBhbnNpb25PcHRpb24sIGR5bmFtaWNCaW5kaW5ncykge1xuICAgIGNvbnN0IGlzSW1wb3J0YW50ID0gdHJpZ2dlclsnaW1wb3J0YW50J107XG5cbiAgICBjb25zdCBpc0ltbWVkaWF0ZSA9XG4gICAgICAgICh0cmlnZ2VyWydpbXBvcnRhbnQnXSA9PT0gdHJ1ZSkgfHwgKCF0aGlzLmJhdGNoSW50ZXJ2YWxfKTtcbiAgICBpZiAoIXRoaXMucmVwb3J0UmVxdWVzdF8gJiYgIWlzSW1wb3J0YW50KSB7XG4gICAgICAvLyBJZ25vcmUgbm9uIGltcG9ydGFudCB0cmlnZ2VyIG91dCByZXBvcnRXaW5kb3dcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnF1ZXVlU2l6ZV8rKztcbiAgICB0aGlzLmxhc3RUcmlnZ2VyXyA9IHRyaWdnZXI7XG4gICAgY29uc3QgdHJpZ2dlclBhcmFtcyA9IHRyaWdnZXJbJ2V4dHJhVXJsUGFyYW1zJ107XG5cbiAgICBjb25zdCBtYWNyb3MgPSB0aGlzLnZhcmlhYmxlU2VydmljZV8uZ2V0TWFjcm9zKCk7XG4gICAgY29uc3QgYmluZGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBkeW5hbWljQmluZGluZ3MsIG1hY3Jvcyk7XG5cbiAgICBpZiAoIXRoaXMuYmFzZVVybFByb21pc2VfKSB7XG4gICAgICBleHBhbnNpb25PcHRpb24uZnJlZXplVmFyKCdleHRyYVVybFBhcmFtcycpO1xuICAgICAgdGhpcy5iYXNlVXJsVGVtcGxhdGVQcm9taXNlXyA9XG4gICAgICAgICAgdGhpcy52YXJpYWJsZVNlcnZpY2VfLmV4cGFuZFRlbXBsYXRlKHRoaXMuYmFzZVVybCwgZXhwYW5zaW9uT3B0aW9uKTtcbiAgICAgIHRoaXMuYmFzZVVybFByb21pc2VfID0gdGhpcy5iYXNlVXJsVGVtcGxhdGVQcm9taXNlXy50aGVuKGJhc2VVcmwgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy51cmxSZXBsYWNlbWVudFNlcnZpY2VfLmV4cGFuZFVybEFzeW5jKFxuICAgICAgICAgICAgYmFzZVVybCwgYmluZGluZ3MsIHRoaXMud2hpdGVMaXN0Xyk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBleHRyYVVybFBhcmFtc1Byb21pc2UgPSB0aGlzLmV4cGFuZEV4dHJhVXJsUGFyYW1zXyhcbiAgICAgICAgY29uZmlnUGFyYW1zLCB0cmlnZ2VyUGFyYW1zLCBleHBhbnNpb25PcHRpb24pXG4gICAgICAgIC50aGVuKGV4cGFuZEV4dHJhVXJsUGFyYW1zID0+IHtcbiAgICAgICAgICAvLyBDb25zdHJ1Y3QgdGhlIGV4dHJhVXJsUGFyYW1zU3RyaW5nOiBSZW1vdmUgbnVsbCBwYXJhbSBhbmQgZW5jb2RlXG4gICAgICAgICAgLy8gY29tcG9uZW50XG4gICAgICAgICAgY29uc3QgZXhwYW5kZWRFeHRyYVVybFBhcmFtc1N0ciA9XG4gICAgICAgICAgICAgIHRoaXMuZ2V0RXh0cmFVcmxQYXJhbXNTdHJpbmdfKGV4cGFuZEV4dHJhVXJsUGFyYW1zKTtcbiAgICAgICAgICByZXR1cm4gdGhpcy51cmxSZXBsYWNlbWVudFNlcnZpY2VfLmV4cGFuZFVybEFzeW5jKFxuICAgICAgICAgICAgICBleHBhbmRlZEV4dHJhVXJsUGFyYW1zU3RyLCBiaW5kaW5ncywgdGhpcy53aGl0ZUxpc3RfKTtcbiAgICAgICAgfSk7XG5cbiAgICBpZiAodGhpcy5iYXRjaGluZ1BsdWdpbl8pIHtcbiAgICAgIGNvbnN0IGJhdGNoU2VnbWVudCA9IGRpY3Qoe1xuICAgICAgICAndHJpZ2dlcic6IHRyaWdnZXJbJ29uJ10sXG4gICAgICAgICd0aW1lc3RhbXAnOiB0aGlzLndpbi5EYXRlLm5vdygpLFxuICAgICAgICAnZXh0cmFVcmxQYXJhbXMnOiBudWxsLFxuICAgICAgfSk7XG4gICAgICB0aGlzLmJhdGNoU2VnbWVudFByb21pc2VzXy5wdXNoKGV4dHJhVXJsUGFyYW1zUHJvbWlzZS50aGVuKHN0ciA9PiB7XG4gICAgICAgIGJhdGNoU2VnbWVudFsnZXh0cmFVcmxQYXJhbXMnXSA9XG4gICAgICAgICAgICAgICAgcGFyc2VRdWVyeVN0cmluZyhzdHIpO1xuICAgICAgICByZXR1cm4gYmF0Y2hTZWdtZW50O1xuICAgICAgfSkpO1xuICAgIH1cblxuICAgIHRoaXMuZXh0cmFVcmxQYXJhbXNQcm9taXNlXy5wdXNoKGV4dHJhVXJsUGFyYW1zUHJvbWlzZSk7XG4gICAgdGhpcy50cmlnZ2VyXyhpc0ltbWVkaWF0ZSk7XG4gIH1cblxuICAvKipcbiAgICogRGlzcG9zZSBmdW5jdGlvbiB0aGF0IGNsZWFyIHJlcXVlc3QgaGFuZGxlciBzdGF0ZS5cbiAgICovXG4gIGRpc3Bvc2UoKSB7XG4gICAgdGhpcy5yZXNldF8oKTtcblxuICAgIC8vIENsZWFyIGJhdGNoSW50ZXJ2YWwgdGltZW91dFxuICAgIGlmICh0aGlzLmJhdGNoSW50ZXJ2YWxUaW1lb3V0SWRfKSB7XG4gICAgICB0aGlzLndpbi5jbGVhclRpbWVvdXQodGhpcy5iYXRjaEludGVydmFsVGltZW91dElkXyk7XG4gICAgICB0aGlzLmJhdGNoSW50ZXJ2YWxUaW1lb3V0SWRfID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5yZXBvcnRXaW5kb3dUaW1lb3V0SWRfKSB7XG4gICAgICB0aGlzLndpbi5jbGVhclRpbWVvdXQodGhpcy5yZXBvcnRXaW5kb3dUaW1lb3V0SWRfKTtcbiAgICAgIHRoaXMucmVwb3J0V2luZG93VGltZW91dElkXyA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZ1bmN0aW9uIHRoYXQgc2NoZWR1bGUgdGhlIGFjdHVhbCByZXF1ZXN0IHNlbmQuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNJbW1lZGlhdGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRyaWdnZXJfKGlzSW1tZWRpYXRlKSB7XG4gICAgaWYgKHRoaXMucXVldWVTaXplXyA9PSAwKSB7XG4gICAgICAvLyBEbyBub3RoaW5nIGlmIG5vIHJlcXVlc3QgaW4gcXVldWVcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoaXNJbW1lZGlhdGUpIHtcbiAgICAgIC8vIElmIG5vdCBiYXRjaGVkLCBvciBiYXRjaEludGVydmFsIHNjaGVkdWxlciBzY2hlZHVsZSB0cmlnZ2VyIGltbWVkaWF0ZWx5XG4gICAgICB0aGlzLmZpcmVfKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNlbmQgb3V0IHJlcXVlc3QuIFNob3VsZCBvbmx5IGJlIGNhbGxlZCBieSBgdHJpZ2dlcl9gIGZ1bmN0aW9uXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBmaXJlXygpIHtcbiAgICBjb25zdCB7XG4gICAgICBleHRyYVVybFBhcmFtc1Byb21pc2VfOiBleHRyYVVybFBhcmFtc1Byb21pc2UsXG4gICAgICBiYXNlVXJsVGVtcGxhdGVQcm9taXNlXzogYmFzZVVybFRlbXBsYXRlUHJvbWlzZSxcbiAgICAgIGJhc2VVcmxQcm9taXNlXzogYmFzZVVybFByb21pc2UsXG4gICAgICBiYXRjaFNlZ21lbnRQcm9taXNlc186IGJhdGNoU2VnbWVudHNQcm9taXNlLFxuICAgIH0gPSB0aGlzO1xuICAgIGNvbnN0IGxhc3RUcmlnZ2VyID0gLyoqIEB0eXBlIHshSnNvbk9iamVjdH0gKi8gKHRoaXMubGFzdFRyaWdnZXJfKTtcbiAgICB0aGlzLnJlc2V0XygpO1xuXG4gICAgYmFzZVVybFRlbXBsYXRlUHJvbWlzZS50aGVuKHByZVVybCA9PiB7XG4gICAgICB0aGlzLnByZWNvbm5lY3RfLnVybChwcmVVcmwsIHRydWUpO1xuICAgICAgYmFzZVVybFByb21pc2UudGhlbihiYXNlVXJsID0+IHtcbiAgICAgICAgbGV0IHJlcXVlc3RVcmxQcm9taXNlO1xuICAgICAgICBpZiAodGhpcy5iYXRjaGluZ1BsdWdpbl8pIHtcbiAgICAgICAgICByZXF1ZXN0VXJsUHJvbWlzZSA9XG4gICAgICAgICAgICAgIHRoaXMuY29uc3RydWN0QmF0Y2hTZWdtZW50c18oYmFzZVVybCwgYmF0Y2hTZWdtZW50c1Byb21pc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlcXVlc3RVcmxQcm9taXNlID1cbiAgICAgICAgICAgICAgdGhpcy5jb25zdHJ1Y3RFeHRyYVVybFBhcmFtU3Ryc18oYmFzZVVybCwgZXh0cmFVcmxQYXJhbXNQcm9taXNlKTtcbiAgICAgICAgfVxuICAgICAgICByZXF1ZXN0VXJsUHJvbWlzZS50aGVuKHJlcXVlc3RVcmwgPT4ge1xuICAgICAgICAgIHRoaXMuaGFuZGxlcl8ocmVxdWVzdFVybCwgbGFzdFRyaWdnZXIpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdCB0aGUgZmluYWwgcmVxdWVzdFVybCB3aXRoIGJhc2VVcmwgYW5kIGV4dHJhVXJsUGFyYW1zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlVXJsXG4gICAqIEBwYXJhbSB7IUFycmF5PCFQcm9taXNlPHN0cmluZz4+fSBleHRyYVVybFBhcmFtU3Ryc1Byb21pc2VcbiAgICovXG4gIGNvbnN0cnVjdEV4dHJhVXJsUGFyYW1TdHJzXyhiYXNlVXJsLCBleHRyYVVybFBhcmFtU3Ryc1Byb21pc2UpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoZXh0cmFVcmxQYXJhbVN0cnNQcm9taXNlKS50aGVuKHBhcmFtU3RycyA9PiB7XG4gICAgICBmaWx0ZXJTcGxpY2UocGFyYW1TdHJzLCBpdGVtID0+IHtyZXR1cm4gISFpdGVtO30pO1xuICAgICAgY29uc3QgZXh0cmFVcmxQYXJhbXNTdHIgPSBwYXJhbVN0cnMuam9pbignJicpO1xuICAgICAgbGV0IHJlcXVlc3RVcmw7XG4gICAgICBpZiAoYmFzZVVybC5pbmRleE9mKCcke2V4dHJhVXJsUGFyYW1zfScpID49IDApIHtcbiAgICAgICAgcmVxdWVzdFVybCA9IGJhc2VVcmwucmVwbGFjZSgnJHtleHRyYVVybFBhcmFtc30nLCBleHRyYVVybFBhcmFtc1N0cik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXF1ZXN0VXJsID0gYXBwZW5kRW5jb2RlZFBhcmFtU3RyaW5nVG9VcmwoYmFzZVVybCwgZXh0cmFVcmxQYXJhbXNTdHIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlcXVlc3RVcmw7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ29uc3RydWN0IHRoZSBmaW5hbCByZXF1ZXN0VXJsIGJ5IGNhbGxpbmcgdGhlIGJhdGNoIHBsdWdpbiBmdW5jdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gYmFzZVVybFxuICAgKiBAcGFyYW0geyFBcnJheTwhUHJvbWlzZTxiYXRjaFNlZ21lbnREZWY+Pn0gYmF0Y2hTZWdtZW50c1Byb21pc2VcbiAgICovXG4gIGNvbnN0cnVjdEJhdGNoU2VnbWVudHNfKGJhc2VVcmwsIGJhdGNoU2VnbWVudHNQcm9taXNlKSB7XG4gICAgZGV2KCkuYXNzZXJ0KHRoaXMuYmF0Y2hpbmdQbHVnaW5fICYmXG4gICAgICAgIHR5cGVvZiB0aGlzLmJhdGNoaW5nUGx1Z2luXyA9PSAnZnVuY3Rpb24nLCAnU2hvdWxkIG5ldmVyIGNhbGwgJyArXG4gICAgICAgICdjb25zdHJ1Y3RCYXRjaFNlZ21lbnRzXyB3aXRoIGludmFsaWQgYmF0Y2hpbmdQbHVnaW4gZnVuY3Rpb24nKTtcblxuICAgIHJldHVybiBQcm9taXNlLmFsbChiYXRjaFNlZ21lbnRzUHJvbWlzZSkudGhlbihiYXRjaFNlZ21lbnRzID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJhdGNoaW5nUGx1Z2luXyhiYXNlVXJsLCBiYXRjaFNlZ21lbnRzKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgZGV2KCkuZXJyb3IoVEFHLFxuICAgICAgICAgICAgYEVycm9yOiBiYXRjaFBsdWdpbiBmdW5jdGlvbiAke3RoaXMuYmF0Y2hQbHVnaW5JZF99YCwgZSk7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldCBiYXRjaGluZyBzdGF0dXNcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlc2V0XygpIHtcbiAgICB0aGlzLnF1ZXVlU2l6ZV8gPSAwO1xuICAgIHRoaXMuYmFzZVVybFByb21pc2VfID0gbnVsbDtcbiAgICB0aGlzLmJhc2VVcmxUZW1wbGF0ZVByb21pc2VfID0gbnVsbDtcbiAgICB0aGlzLmV4dHJhVXJsUGFyYW1zUHJvbWlzZV8gPSBbXTtcbiAgICB0aGlzLmJhdGNoU2VnbWVudFByb21pc2VzXyA9IFtdO1xuICAgIHRoaXMubGFzdFRyaWdnZXJfID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGdW5jdGlvbiB0aGF0IGhhbmRsZXIgZXh0cmFVcmxQYXJhbXMgZnJvbSBjb25maWcgYW5kIHRyaWdnZXIuXG4gICAqIEBwYXJhbSB7P0pzb25PYmplY3R9IGNvbmZpZ1BhcmFtc1xuICAgKiBAcGFyYW0gez9Kc29uT2JqZWN0fSB0cmlnZ2VyUGFyYW1zXG4gICAqIEBwYXJhbSB7IS4vdmFyaWFibGVzLkV4cGFuc2lvbk9wdGlvbnN9IGV4cGFuc2lvbk9wdGlvblxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhSnNvbk9iamVjdD59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBleHBhbmRFeHRyYVVybFBhcmFtc18oY29uZmlnUGFyYW1zLCB0cmlnZ2VyUGFyYW1zLCBleHBhbnNpb25PcHRpb24pIHtcbiAgICBjb25zdCByZXF1ZXN0UHJvbWlzZXMgPSBbXTtcbiAgICBjb25zdCBwYXJhbXMgPSBtYXAoKTtcbiAgICAvLyBEb24ndCBlbmNvZGUgcGFyYW0gdmFsdWVzIGhlcmUsXG4gICAgLy8gYXMgd2UnbGwgZG8gaXQgbGF0ZXIgaW4gdGhlIGdldEV4dHJhVXJsUGFyYW1zU3RyaW5nXyBjYWxsLlxuICAgIGNvbnN0IG9wdGlvbiA9IG5ldyBFeHBhbnNpb25PcHRpb25zKFxuICAgICAgICBleHBhbnNpb25PcHRpb24udmFycyxcbiAgICAgICAgZXhwYW5zaW9uT3B0aW9uLml0ZXJhdGlvbnMsXG4gICAgICAgIHRydWUgLyogbm9FbmNvZGUgKi8pO1xuICAgIC8vIEFkZCBhbnkgZ2l2ZW4gZXh0cmFVcmxQYXJhbXMgYXMgcXVlcnkgc3RyaW5nIHBhcmFtXG4gICAgaWYgKGNvbmZpZ1BhcmFtcyB8fCB0cmlnZ2VyUGFyYW1zKSB7XG4gICAgICBPYmplY3QuYXNzaWduKHBhcmFtcywgY29uZmlnUGFyYW1zLCB0cmlnZ2VyUGFyYW1zKTtcbiAgICAgIGZvciAoY29uc3QgayBpbiBwYXJhbXMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwYXJhbXNba10gPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICByZXF1ZXN0UHJvbWlzZXMucHVzaChcbiAgICAgICAgICAgICAgdGhpcy52YXJpYWJsZVNlcnZpY2VfLmV4cGFuZFRlbXBsYXRlKHBhcmFtc1trXSwgb3B0aW9uKVxuICAgICAgICAgICAgICAgICAgLnRoZW4odmFsdWUgPT4geyBwYXJhbXNba10gPSB2YWx1ZTsgfSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLmFsbChyZXF1ZXN0UHJvbWlzZXMpLnRoZW4oKCkgPT4ge1xuICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgdGhlIHBhcmFtcyBtYXAgYW5kIGZvcm0gdGhlIGZpbmFsIGV4dHJhVXJsUGFyYW1zIHN0cmluZ1xuICAgKiBAcGFyYW0geyFPYmplY3R9IHBhcmFtc1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBnZXRFeHRyYVVybFBhcmFtc1N0cmluZ18ocGFyYW1zKSB7XG4gICAgY29uc3QgcyA9IFtdO1xuICAgIGZvciAoY29uc3QgayBpbiBwYXJhbXMpIHtcbiAgICAgIGNvbnN0IHYgPSBwYXJhbXNba107XG4gICAgICBpZiAodiA9PSBudWxsKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc3YgPSB0aGlzLnZhcmlhYmxlU2VydmljZV8uZW5jb2RlVmFycyhrLCB2KTtcbiAgICAgICAgcy5wdXNoKGAke2VuY29kZVVSSUNvbXBvbmVudChrKX09JHtzdn1gKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHMuam9pbignJicpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBiYXRjaEludGVydmFsXG4gICAqL1xuICBpbml0QmF0Y2hJbnRlcnZhbF8oKSB7XG4gICAgaWYgKCF0aGlzLmJhdGNoSW50ZXJ2YWxfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5iYXRjaEludGVydmFsXyA9IGlzQXJyYXkodGhpcy5iYXRjaEludGVydmFsXykgP1xuICAgICAgdGhpcy5iYXRjaEludGVydmFsXyA6IFt0aGlzLmJhdGNoSW50ZXJ2YWxfXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5iYXRjaEludGVydmFsXy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGludGVydmFsID0gdGhpcy5iYXRjaEludGVydmFsX1tpXTtcbiAgICAgIHVzZXIoKS5hc3NlcnQoaXNGaW5pdGVOdW1iZXIoaW50ZXJ2YWwpLFxuICAgICAgICAgIGBJbnZhbGlkIGJhdGNoSW50ZXJ2YWwgdmFsdWU6ICR7dGhpcy5iYXRjaEludGVydmFsX31gICtcbiAgICAgICAgICAnaW50ZXJ2YWwgbXVzdCBiZSBhIG51bWJlcicpO1xuICAgICAgaW50ZXJ2YWwgPSBOdW1iZXIoaW50ZXJ2YWwpICogMTAwMDtcbiAgICAgIHVzZXIoKS5hc3NlcnQoaW50ZXJ2YWwgPj0gQkFUQ0hfSU5URVJWQUxfTUlOLFxuICAgICAgICAgIGBJbnZhbGlkIGJhdGNoSW50ZXJ2YWwgdmFsdWU6ICR7dGhpcy5iYXRjaEludGVydmFsX30sIGAgK1xuICAgICAgICAgIGBpbnRlcnZhbCB2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAke0JBVENIX0lOVEVSVkFMX01JTn1tcy5gKTtcbiAgICAgIHRoaXMuYmF0Y2hJbnRlcnZhbF9baV0gPSBpbnRlcnZhbDtcbiAgICB9XG5cbiAgICB0aGlzLmJhdGNoSW50ZXJ2YWxQb2ludGVyXyA9IDA7XG5cbiAgICB0aGlzLnJlZnJlc2hCYXRjaEludGVydmFsXygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIHJlcG9ydCB3aW5kb3cuXG4gICAqL1xuICBpbml0UmVwb3J0V2luZG93XygpIHtcbiAgICBpZiAodGhpcy5yZXBvcnRXaW5kb3dfKSB7XG4gICAgICB0aGlzLnJlcG9ydFdpbmRvd1RpbWVvdXRJZF8gPSB0aGlzLndpbi5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgLy8gRmx1c2ggYmF0Y2ggcXVldWU7XG4gICAgICAgIHRoaXMudHJpZ2dlcl8odHJ1ZSk7XG4gICAgICAgIHRoaXMucmVwb3J0UmVxdWVzdF8gPSBmYWxzZTtcbiAgICAgICAgLy8gQ2xlYXIgYmF0Y2hJbnRlcnZhbCB0aW1lb3V0XG4gICAgICAgIGlmICh0aGlzLmJhdGNoSW50ZXJ2YWxUaW1lb3V0SWRfKSB7XG4gICAgICAgICAgdGhpcy53aW4uY2xlYXJUaW1lb3V0KHRoaXMuYmF0Y2hJbnRlcnZhbFRpbWVvdXRJZF8pO1xuICAgICAgICAgIHRoaXMuYmF0Y2hJbnRlcnZhbFRpbWVvdXRJZF8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9LCB0aGlzLnJlcG9ydFdpbmRvd18gKiAxMDAwKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2NoZWR1bGUgc2VuZGluZyByZXF1ZXN0IHJlZ2FyZGluZyB0byBiYXRjaEludGVydmFsXG4gICAqL1xuICByZWZyZXNoQmF0Y2hJbnRlcnZhbF8oKSB7XG4gICAgZGV2KCkuYXNzZXJ0KHRoaXMuYmF0Y2hJbnRlcnZhbFBvaW50ZXJfICE9IG51bGwsXG4gICAgICAgICdTaG91bGQgbm90IHN0YXJ0IGJhdGNoSW50ZXJ2YWwgd2l0aG91dCBwb2ludGVyJyk7XG4gICAgY29uc3QgaW50ZXJ2YWwgPSB0aGlzLmJhdGNoSW50ZXJ2YWxQb2ludGVyXyA8IHRoaXMuYmF0Y2hJbnRlcnZhbF8ubGVuZ3RoID9cbiAgICAgIHRoaXMuYmF0Y2hJbnRlcnZhbF9bdGhpcy5iYXRjaEludGVydmFsUG9pbnRlcl8rK10gOlxuICAgICAgdGhpcy5iYXRjaEludGVydmFsX1t0aGlzLmJhdGNoSW50ZXJ2YWxfLmxlbmd0aCAtIDFdO1xuXG4gICAgdGhpcy5iYXRjaEludGVydmFsVGltZW91dElkXyA9IHRoaXMud2luLnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy50cmlnZ2VyXyh0cnVlKTtcbiAgICAgIHRoaXMucmVmcmVzaEJhdGNoSW50ZXJ2YWxfKCk7XG4gICAgfSwgaW50ZXJ2YWwpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtFeHBhbnNpb25PcHRpb25zLCB2YXJpYWJsZVNlcnZpY2VGb3J9IGZyb20gJy4vdmFyaWFibGVzJztcbmltcG9ydCB7ZmluZEluZGV4fSBmcm9tICcuLi8uLi8uLi9zcmMvdXRpbHMvYXJyYXknO1xuaW1wb3J0IHtpc09iamVjdH0gZnJvbSAnLi4vLi4vLi4vc3JjL3R5cGVzJztcbmltcG9ydCB7cGFyc2VVcmxEZXByZWNhdGVkfSBmcm9tICcuLi8uLi8uLi9zcmMvdXJsJztcbmltcG9ydCB7dXNlcn0gZnJvbSAnLi4vLi4vLi4vc3JjL2xvZyc7XG5cbi8qKlxuICogQSB1c2VyLXN1cHBsaWVkIEpTT04gb2JqZWN0IHRoYXQgZGVmaW5lcyBhIHJlc291cmNlIHRvIGJlIHJlcG9ydGVkLiBJdCBpc1xuICogZXhwZWN0ZWQgdG8gaGF2ZSBzb21lIGZpZWxkcy5cbiAqIEEgcmVzb3VyY2UgdGltaW5nIGVudHkgd2lsbCBtYXRjaCBhZ2FpbnN0IHRoaXMgcmVzb3VyY2UgaWYgYWxsIG9mIHRoZVxuICogZm9sbG93aW5nIHByb3BlcnRpZXMgbWF0Y2guXG4gKiBAcHJvcGVydHkge3N0cmluZz19IGhvc3QgQSBzdHJpbmcgd2hvc2UgdmFsdWUgc2hvdWxkIGJlIGEgUmVnRXhwLiBJdCBkZWZpbmVzXG4gKiAgICAgYSBob3N0IG9yIHNldCBvZiBob3N0cyB0byBtYXRjaCBhZ2FpbnN0LiBCeSBkZWZhdWx0LCB0aGUgUmVnRXhwIHdpbGxcbiAqICAgICBtYXRjaCBhbGwgaG9zdHMgaWYgb21pdHRlZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nPX0gcGF0aCBBIHN0cmluZyB3aG9zZSB2YWx1ZSBzaG91bGQgYmUgYSBSZWdFeHAuIEl0IGRlZmluZXNcbiAqICAgICBhIHBhdGggb3Igc2V0IG9mIHBhdGhzIHRvIG1hdGNoIGFnYWluc3QuIEJ5IGRlZmF1bHQsIHRoZSBSZWdFeHAgd2lsbFxuICogICAgIG1hdGNoIGFsbCBwYXRocyBpZiBvbWl0dGVkLlxuICogQHByb3BlcnR5IHtzdHJpbmc9fSBxdWVyeSBBIHN0cmluZyB3aG9zZSB2YWx1ZSBzaG91bGQgYmUgYSBSZWdFeHAuIEl0IGRlZmluZXNcbiAqICAgICBhIHF1ZXJ5IHN0cmluZyBvciBzZXQgb2YgcXVlcnkgc3RyaW5ncyB0byBtYXRjaCBhZ2FpbnN0LiBCeSBkZWZhdWx0LCB0aGVcbiAqICAgICBSZWdFeHAgd2lsbCBtYXRjaCBhbGwgcXVlcnkgc3RyaW5ncyBpZiBvbWl0dGVkLlxuICogQHR5cGVkZWYgeyFKc29uT2JqZWN0fVxuICovXG5sZXQgSW5kaXZpZHVhbFJlc291cmNlU3BlY0RlZjtcblxuLyoqXG4gKiBBIHBhcnNlZCByZXNvdXJjZSBzcGVjIGZvciBhIHNwZWNpZmljIGhvc3Qgb3Igc2V0cyBvZiBob3N0cyAoYXMgZGVmaW5lZCBieVxuICogdGhlIGhvc3RQYXR0ZXJuKS5cbiAqIEB0eXBlZGVme3tcbiAqICAgaG9zdFBhdHRlcm46ICFSZWdFeHAsXG4gKiAgIHJlc291Y2VzOiAhQXJyYXk8e1xuICogICAgIG5hbWU6IHN0cmluZyxcbiAqICAgICBwYXRoUGF0dGVybjogIVJlZ0V4cCxcbiAqICAgICBxdWVyeVBhdHRlcm46ICFSZWdFeHAsXG4gKiAgIH0+LFxuICogfX1cbiAqL1xubGV0IFJlc291cmNlU3BlY0Zvckhvc3REZWY7XG5cbi8qKlxuICogVGhlIGRlZmF1bHQgbWF4aW11bSBidWZmZXIgc2l6ZSBmb3IgcmVzb3VyY2UgdGltaW5nIGVudHJpZXMuIEFmdGVyIHRoZSBsaW1pdFxuICogaGFzIGJlZW4gcmVhY2hlZCwgdGhlIGJyb3dzZXIgd2lsbCBzdG9wIHJlY29yZGluZyByZXNvdXJjZSB0aW1pbmcgZW50cmllcy5cbiAqIFRoaXMgbnVtYmVyIGlzIGNob3NlbiBieSB0aGUgc3BlYzogaHR0cHM6Ly93M2MuZ2l0aHViLmlvL3Jlc291cmNlLXRpbWluZy5cbiAqIEBjb25zdCB7bnVtYmVyfVxuICovXG5jb25zdCBSRVNPVVJDRV9USU1JTkdfQlVGRkVSX1NJWkUgPSAxNTA7XG5cbi8qKlxuICogWWllbGRzIHRoZSB0aHJlYWQgYmVmb3JlIHJ1bm5pbmcgdGhlIGZ1bmN0aW9uIHRvIGF2b2lkIGNhdXNpbmcgamFuay4gKGkuZS4gYVxuICogdGFzayB0aGF0IHRha2VzIG92ZXIgMTZtcy4pXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCk6IE9VVH0gZm5cbiAqIEByZXR1cm4geyFQcm9taXNlPE9VVD59XG4gKiBAdGVtcGxhdGUgT1VUXG4gKi9cbmZ1bmN0aW9uIHlpZWxkVGhyZWFkKGZuKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHJlc29sdmUoZm4oKSkpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciB0aGUgZ2l2ZW4gb2JqZWN0IGlzIGEgdmFsaWQgcmVzb3VyY2UgdGltaW5nIHNwZWMuXG4gKiBAcGFyYW0geyFKc29uT2JqZWN0fSBzcGVjXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiB2YWxpZGF0ZVJlc291cmNlVGltaW5nU3BlYyhzcGVjKSB7XG4gIGlmICghaXNPYmplY3Qoc3BlY1sncmVzb3VyY2VzJ10pKSB7XG4gICAgdXNlcigpLndhcm4oJ0FOQUxZVElDUycsICdyZXNvdXJjZVRpbWluZ1NwZWMgbWlzc2luZyBcInJlc291cmNlc1wiIGZpZWxkJyk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICghc3BlY1snZW5jb2RpbmcnXSB8fCAhc3BlY1snZW5jb2RpbmcnXVsnZW50cnknXSB8fFxuICAgICAgIXNwZWNbJ2VuY29kaW5nJ11bJ2RlbGltJ10pIHtcbiAgICB1c2VyKCkud2FybihcbiAgICAgICAgJ0FOQUxZVElDUycsXG4gICAgICAgICdyZXNvdXJjZVRpbWluZ1NwZWMgaXMgbWlzc2luZyBvciBoYXMgaW5jb21wbGV0ZSBlbmNvZGluZyBvcHRpb25zJyk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChzcGVjWydlbmNvZGluZyddWydiYXNlJ10gPCAyIHx8IHNwZWNbJ2VuY29kaW5nJ11bJ2Jhc2UnXSA+IDM2KSB7XG4gICAgdXNlcigpLndhcm4oXG4gICAgICAgICdBTkFMWVRJQ1MnLFxuICAgICAgICAncmVzb3VyY2UgdGltaW5nIHZhcmlhYmxlcyBvbmx5IHN1cHBvcnRzIGJhc2VzIGJldHdlZW4gMiBhbmQgMzYnKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKHNwZWNbJ3Jlc3BvbnNlQWZ0ZXInXSAhPSBudWxsICYmXG4gICAgICB0eXBlb2Ygc3BlY1sncmVzcG9uc2VBZnRlciddICE9ICdudW1iZXInKSB7XG4gICAgdXNlcigpLndhcm4oXG4gICAgICAgICdBTkFMWVRJQ1MnLCAncmVzb3VyY2VUaW1pbmdTcGVjW1wicmVzcG9uc2VBZnRlclwiXSBtdXN0IGJlIGEgbnVtYmVyJyk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIEdldHMgYWxsIHJlc291cmNlIHRpbWluZyBlbnRyaWVzIGZyb20gdGhlIGdpdmVuIHdpbmRvdy5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHshQXJyYXk8IVBlcmZvcm1hbmNlUmVzb3VyY2VUaW1pbmc+fVxuICovXG5mdW5jdGlvbiBnZXRSZXNvdXJjZVRpbWluZ0VudHJpZXMod2luKSB7XG4gIHJldHVybiAvKiogQHR5cGUgeyFBcnJheTwhUGVyZm9ybWFuY2VSZXNvdXJjZVRpbWluZz59ICovIChcbiAgICB3aW4ucGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5VHlwZSgncmVzb3VyY2UnKSk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYSByZXNvdXJjZSB0aW1pbmcgZW50cnkgdG8gdGhlIHZhcmlhYmxlcyBmb3IgdGhpcyByZXNvdXJjZS5cbiAqIEBwYXJhbSB7IVBlcmZvcm1hbmNlUmVzb3VyY2VUaW1pbmd9IGVudHJ5XG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBOYW1lIG9mIHRoZSByZXNvdXJjZSBzZXQgYnkgdGhlIHJlc291cmNlVGltaW5nU3BlYy5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24obnVtYmVyLCBudW1iZXI9KTogc3RyaW5nfSBmb3JtYXQgQSBmdW5jdGlvbiB0byBmb3JtYXRcbiAqICAgIHRpbWVzdGFtcHMgYW5kIGludGVydmFscy4gKFR3byBudW1iZXJzIHdpbGwgYmUgcGFzc2VkIGluIGZvciBpbnRlcnZhbHMuKVxuICogQHJldHVybiB7IUV4cGFuc2lvbk9wdGlvbnN9XG4gKi9cbmZ1bmN0aW9uIGVudHJ5VG9FeHBhbnNpb25PcHRpb25zKGVudHJ5LCBuYW1lLCBmb3JtYXQpIHtcbiAgY29uc3QgdmFycyA9IHtcbiAgICAvLyAke2tleX0gaXMgdGhlIG5hbWUgb2YgdGhlIHJlc291cmNlIGZyb20gdGhlIHJlc291cmNlVGltaW5nU3BlYy4gaS5lLiBpdCdzXG4gICAgLy8gdGhlIGtleSBvZiB0aGUgb2JqZWN0IHRoYXQgc3BlY2lmaWVzIHRoZSBob3N0IGFuZCBwYXRoIHBhdHRlcm5zIHRoYXQgdGhpc1xuICAgIC8vIHJlc291cmNlIG1hdGNoZWQgYWdhaW5zdC5cbiAgICAna2V5JzogbmFtZSxcbiAgICAnc3RhcnRUaW1lJzogZm9ybWF0KGVudHJ5LnN0YXJ0VGltZSksXG4gICAgJ3JlZGlyZWN0VGltZSc6IGZvcm1hdChlbnRyeS5yZWRpcmVjdEVuZCwgZW50cnkucmVkaXJlY3RTdGFydCksXG4gICAgJ2RvbWFpbkxvb2t1cFRpbWUnOiBmb3JtYXQoZW50cnkuZG9tYWluTG9va3VwRW5kLCBlbnRyeS5kb21haW5Mb29rdXBTdGFydCksXG4gICAgJ3RjcENvbm5lY3RUaW1lJzogZm9ybWF0KGVudHJ5LmNvbm5lY3RFbmQsIGVudHJ5LmNvbm5lY3RTdGFydCksXG4gICAgJ3NlcnZlclJlc3BvbnNlVGltZSc6IGZvcm1hdChlbnRyeS5yZXNwb25zZVN0YXJ0LCBlbnRyeS5yZXF1ZXN0U3RhcnQpLFxuICAgICduZXR3b3JrVHJhbnNmZXJUaW1lJzogZm9ybWF0KGVudHJ5LnJlc3BvbnNlRW5kLCBlbnRyeS5yZXNwb25zZVN0YXJ0KSxcbiAgICAndHJhbnNmZXJTaXplJzogZm9ybWF0KGVudHJ5LnRyYW5zZmVyU2l6ZSB8fCAwKSxcbiAgICAnZW5jb2RlZEJvZHlTaXplJzogZm9ybWF0KGVudHJ5LmVuY29kZWRCb2R5U2l6ZSB8fCAwKSxcbiAgICAnZGVjb2RlZEJvZHlTaXplJzogZm9ybWF0KGVudHJ5LmRlY29kZWRCb2R5U2l6ZSB8fCAwKSxcbiAgICAnZHVyYXRpb24nOiBmb3JtYXQoZW50cnkuZHVyYXRpb24pLFxuICAgICdpbml0aWF0b3JUeXBlJzogZW50cnkuaW5pdGlhdG9yVHlwZSxcbiAgfTtcbiAgcmV0dXJuIG5ldyBFeHBhbnNpb25PcHRpb25zKHZhcnMsIDEgLyogb3B0X2l0ZXJhdGlvbnMgKi8pO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHZhcmlhYmxlcyBmb3IgdGhlIGdpdmVuIHJlc291cmNlIHRpbWluZyBlbnRyeSBpZiBpdCBtYXRjaGVzIG9uZVxuICogb2YgdGhlIGRlZmluZWQgcmVzb3VyY2VzLCBvciBudWxsIG90aGVyd2lzZS5cbiAqIEBwYXJhbSB7IVBlcmZvcm1hbmNlUmVzb3VyY2VUaW1pbmd9IGVudHJ5XG4gKiBAcGFyYW0geyFBcnJheTwhUmVzb3VyY2VTcGVjRm9ySG9zdERlZj59IHJlc291cmNlc0J5SG9zdCBBbiBhcnJheSBvZiByZXNvdXJjZVxuICogICAgIHNwZWNzIHRvIG1hdGNoIGFnYWluc3QuXG4gKiBAcmV0dXJuIHs/c3RyaW5nfSBUaGUgbmFtZSBvZiB0aGUgZW50cnksIG9yIG51bGwgaWYgbm8gbWF0Y2hpbmcgbmFtZSBleGlzdHMuXG4gKi9cbmZ1bmN0aW9uIG5hbWVGb3JFbnRyeShlbnRyeSwgcmVzb3VyY2VzQnlIb3N0KSB7XG4gIGNvbnN0IHVybCA9IHBhcnNlVXJsRGVwcmVjYXRlZChlbnRyeS5uYW1lKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXNvdXJjZXNCeUhvc3QubGVuZ3RoOyArK2kpIHtcbiAgICBjb25zdCB7aG9zdFBhdHRlcm4sIHJlc291cmNlc30gPSByZXNvdXJjZXNCeUhvc3RbaV07XG4gICAgaWYgKCFob3N0UGF0dGVybi50ZXN0KHVybC5ob3N0KSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGNvbnN0IGluZGV4ID0gZmluZEluZGV4KFxuICAgICAgICByZXNvdXJjZXMsXG4gICAgICAgIHJlcyA9PiByZXMucGF0aFBhdHRlcm4udGVzdCh1cmwucGF0aG5hbWUpICYmXG4gICAgICAgICAgICByZXMucXVlcnlQYXR0ZXJuLnRlc3QodXJsLnNlYXJjaCkpO1xuICAgIGlmIChpbmRleCAhPSAtMSkge1xuICAgICAgcmV0dXJuIHJlc291cmNlc1tpbmRleF0ubmFtZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7IC8vIE5vIG1hdGNoLlxufVxuXG4vKipcbiAqIEdyb3VwcyBhbGwgcmVzb3VyY2Ugc3BlY3MgKHdoaWNoIGFyZSBkZWZpbmVkIGluIHRlcm1zIG9mIHtob3N0LCBwYXRoLCBxdWVyeX1cbiAqIHBhdHRlcm5zKSBieSBob3N0IHBhdHRlcm4uIFRoaXMgaXMgdXNlZCBkb3duc3RyZWFtIHRvIGF2b2lkIHJ1bm5pbmcgUmVnRXhwc1xuICogZm9yIGhvc3QgcGF0dGVybnMgbXVsdGlwbGUgdGltZXMgYmVjYXVzZSB3ZSBleHBlY3QgbXVsdGlwbGUgcmVzb3VyY2VzIHRvXG4gKiB1c2UgdGhlIHNhbWUgaG9zdCBwYXR0ZXJuLlxuICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgIUluZGl2aWR1YWxSZXNvdXJjZVNwZWNEZWY+fSByZXNvdXJjZURlZnMgQSBtYXAgb2ZcbiAqICAgICBuYW1lcyB0byB0aGUgcmVzb3VyY2Ugc3BlYyBmb3IgdGhhdCBuYW1lLlxuICogQHJldHVybiB7IUFycmF5PCFSZXNvdXJjZVNwZWNGb3JIb3N0RGVmPn1cbiAqL1xuZnVuY3Rpb24gZ3JvdXBTcGVjc0J5SG9zdChyZXNvdXJjZURlZnMpIHtcbiAgY29uc3QgYnlIb3N0ID0ge307XG4gIGZvciAoY29uc3QgbmFtZSBpbiByZXNvdXJjZURlZnMpIHtcbiAgICBjb25zdCBob3N0ID0gcmVzb3VyY2VEZWZzW25hbWVdWydob3N0J10gfHwgJyc7XG4gICAgY29uc3QgcGF0aCA9IHJlc291cmNlRGVmc1tuYW1lXVsncGF0aCddIHx8ICcnO1xuICAgIGNvbnN0IHF1ZXJ5ID0gcmVzb3VyY2VEZWZzW25hbWVdWydxdWVyeSddIHx8ICcnO1xuICAgIGNvbnN0IHBhdHRlcm4gPSB7XG4gICAgICBuYW1lLFxuICAgICAgcGF0aFBhdHRlcm46IG5ldyBSZWdFeHAocGF0aCksXG4gICAgICBxdWVyeVBhdHRlcm46IG5ldyBSZWdFeHAocXVlcnkpLFxuICAgIH07XG4gICAgaWYgKGJ5SG9zdFtob3N0XSkge1xuICAgICAgYnlIb3N0W2hvc3RdLnJlc291cmNlcy5wdXNoKHBhdHRlcm4pO1xuICAgIH0gZWxzZSB7XG4gICAgICBieUhvc3RbaG9zdF0gPSB7XG4gICAgICAgIGhvc3RQYXR0ZXJuOiBuZXcgUmVnRXhwKGhvc3QpLFxuICAgICAgICByZXNvdXJjZXM6IFtwYXR0ZXJuXSxcbiAgICAgIH07XG4gICAgfVxuICB9XG4gIGNvbnN0IGJ5SG9zdEFycmF5ID0gW107XG4gIGZvciAoY29uc3QgaG9zdCBpbiBieUhvc3QpIHtcbiAgICBieUhvc3RBcnJheS5wdXNoKGJ5SG9zdFtob3N0XSk7XG4gIH1cbiAgcmV0dXJuIGJ5SG9zdEFycmF5O1xufVxuXG4vKipcbiAqIEZpbHRlcnMgb3V0IHJlc291cmNlIHRpbWluZyBlbnRyaWVzIHRoYXQgZG9uJ3QgaGF2ZSBhIG5hbWUgZGVmaW5lZCBpblxuICogcmVzb3VyY2VEZWZzLiBJdCByZXR1cm5zIGEgbmV3IGFycmF5IHdoZXJlIGVhY2ggZWxlbWVudCBjb250YWlucyBhXG4gKiByZXNvdXJjZSB0aW1pbmcgZW50cnkgYW5kIHRoZSBjb3JyZXNwb25kaW5nIG5hbWUuXG4gKiBAcGFyYW0geyFBcnJheTwhUGVyZm9ybWFuY2VSZXNvdXJjZVRpbWluZz59IGVudHJpZXNcbiAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsICFJbmRpdmlkdWFsUmVzb3VyY2VTcGVjRGVmPn0gcmVzb3VyY2VEZWZzXG4gKiBAcmV0dXJuIHshQXJyYXk8e2VudHJ5OiAhUGVyZm9ybWFuY2VSZXNvdXJjZVRpbWluZywgbmFtZTogc3RyaW5nfT59XG4gKi9cbmZ1bmN0aW9uIGZpbHRlckVudHJpZXMoZW50cmllcywgcmVzb3VyY2VEZWZzKSB7XG4gIC8vIEdyb3VwIHJlc291cmNlIHRpbWluZyBkZWZpbml0aW9ucyBieSBob3N0IHNpbmNlIHdlIGV4cGVjdCBtdWx0aXBsZVxuICAvLyBkZWZpbml0aW9ucyB0byBoYXZlIHRoZSBzYW1lIGhvc3QuXG4gIGNvbnN0IGJ5SG9zdCA9IGdyb3VwU3BlY3NCeUhvc3QocmVzb3VyY2VEZWZzKTtcbiAgY29uc3QgcmVzdWx0cyA9IFtdO1xuICBlbnRyaWVzLmZvckVhY2goZW50cnkgPT4ge1xuICAgIGNvbnN0IG5hbWUgPSBuYW1lRm9yRW50cnkoZW50cnksIGJ5SG9zdCk7XG4gICAgaWYgKG5hbWUpIHtcbiAgICAgIHJlc3VsdHMucHVzaCh7ZW50cnksIG5hbWV9KTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gcmVzdWx0cztcbn1cblxuLyoqXG4gKiBTZXJpYWxpemVzIHJlc291cmNlIHRpbWluZyBlbnRyaWVzIHRoYXQgbWF0Y2ggdGhlIHJlc291cmNlVGltaW5nU3BlYyBpbnRvIGFcbiAqIHNpbmdsZSBzdHJpbmcuXG4gKiBAcGFyYW0geyFBcnJheTwhUGVyZm9ybWFuY2VSZXNvdXJjZVRpbWluZz59IGVudHJpZXNcbiAqIEBwYXJhbSB7IUpzb25PYmplY3R9IHJlc291cmNlVGltaW5nU3BlY1xuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4geyFQcm9taXNlPHN0cmluZz59XG4gKi9cbmZ1bmN0aW9uIHNlcmlhbGl6ZShlbnRyaWVzLCByZXNvdXJjZVRpbWluZ1NwZWMsIHdpbikge1xuICBjb25zdCByZXNvdXJjZXMgPSByZXNvdXJjZVRpbWluZ1NwZWNbJ3Jlc291cmNlcyddO1xuICBjb25zdCBlbmNvZGluZyA9IHJlc291cmNlVGltaW5nU3BlY1snZW5jb2RpbmcnXTtcblxuICBjb25zdCB2YXJpYWJsZVNlcnZpY2UgPSB2YXJpYWJsZVNlcnZpY2VGb3Iod2luKTtcbiAgY29uc3QgZm9ybWF0ID0gKHZhbCwgcmVsYXRpdmVUbyA9IDApID0+XG4gICAgTWF0aC5yb3VuZCh2YWwgLSByZWxhdGl2ZVRvKS50b1N0cmluZyhlbmNvZGluZ1snYmFzZSddIHx8IDEwKTtcblxuICBjb25zdCBwcm9taXNlcyA9XG4gICAgICBmaWx0ZXJFbnRyaWVzKGVudHJpZXMsIHJlc291cmNlcylcbiAgICAgICAgICAubWFwKCh7ZW50cnksIG5hbWV9KSA9PiBlbnRyeVRvRXhwYW5zaW9uT3B0aW9ucyhlbnRyeSwgbmFtZSwgZm9ybWF0KSlcbiAgICAgICAgICAubWFwKFxuICAgICAgICAgICAgICBleHBhbnNpb24gPT5cbiAgICAgICAgICAgICAgICB2YXJpYWJsZVNlcnZpY2UuZXhwYW5kVGVtcGxhdGUoZW5jb2RpbmdbJ2VudHJ5J10sIGV4cGFuc2lvbikpO1xuICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4odmFycyA9PiB2YXJzLmpvaW4oZW5jb2RpbmdbJ2RlbGltJ10pKTtcbn1cblxuLyoqXG4gKiBTZXJpYWxpemVzIHJlc291cmNlIHRpbWluZyBlbnRyaWVzIGFjY29yZGluZyB0byB0aGUgcmVzb3VyY2UgdGltaW5nIHNwZWMuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHshSnNvbk9iamVjdH0gcmVzb3VyY2VUaW1pbmdTcGVjXG4gKiBAcmV0dXJuIHshUHJvbWlzZTxzdHJpbmc+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplUmVzb3VyY2VUaW1pbmcod2luLCByZXNvdXJjZVRpbWluZ1NwZWMpIHtcbiAgLy8gQ2hlY2sgdGhhdCB0aGUgcGVyZm9ybWFuY2UgdGltaW5nIEFQSSBleGlzdHMgYmVmb3JlIGFuZCB0aGF0IHRoZSBzcGVjIGlzXG4gIC8vIHZhbGlkIGJlZm9yZSBwcm9jZWVkaW5nLiBJZiBub3QsIHdlIHNpbXBseSByZXR1cm4gYW4gZW1wdHkgc3RyaW5nLlxuICBpZiAocmVzb3VyY2VUaW1pbmdTcGVjWydkb25lJ10gfHwgIXdpbi5wZXJmb3JtYW5jZSB8fCAhd2luLnBlcmZvcm1hbmNlLm5vdyB8fFxuICAgICAgIXdpbi5wZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlUeXBlIHx8XG4gICAgICAhdmFsaWRhdGVSZXNvdXJjZVRpbWluZ1NwZWMocmVzb3VyY2VUaW1pbmdTcGVjKSkge1xuICAgIHJlc291cmNlVGltaW5nU3BlY1snZG9uZSddID0gdHJ1ZTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCcnKTtcbiAgfVxuICBsZXQgZW50cmllcyA9IGdldFJlc291cmNlVGltaW5nRW50cmllcyh3aW4pO1xuICBpZiAoZW50cmllcy5sZW5ndGggPj0gUkVTT1VSQ0VfVElNSU5HX0JVRkZFUl9TSVpFKSB7XG4gICAgLy8gV2UndmUgZXhjZWVkZWQgdGhlIG1heGltdW0gYnVmZmVyIHNpemUgc28gbm8gYWRkaXRpb25hbCBtZXRyaWNzIHdpbGwgYmVcbiAgICAvLyByZXBvcnRlZCBmb3IgdGhpcyByZXNvdXJjZVRpbWluZ1NwZWMuXG4gICAgcmVzb3VyY2VUaW1pbmdTcGVjWydkb25lJ10gPSB0cnVlO1xuICB9XG5cbiAgY29uc3QgcmVzcG9uc2VBZnRlciA9IHJlc291cmNlVGltaW5nU3BlY1sncmVzcG9uc2VBZnRlciddIHx8IDA7XG4gIC8vIFVwZGF0ZSByZXNwb25zZUFmdGVyIGZvciBuZXh0IHRpbWUgdG8gYXZvaWQgcmVwb3J0aW5nIHRoZSBzYW1lIHJlc291cmNlXG4gIC8vIG11bHRpcGxlIHRpbWVzLlxuICByZXNvdXJjZVRpbWluZ1NwZWNbJ3Jlc3BvbnNlQWZ0ZXInXSA9XG4gICAgICBNYXRoLm1heChyZXNwb25zZUFmdGVyLCB3aW4ucGVyZm9ybWFuY2Uubm93KCkpO1xuXG4gIC8vIEZpbHRlciByZXNvdXJjZXMgdGhhdCBhcmUgdG9vIGVhcmx5LlxuICBlbnRyaWVzID0gZW50cmllcy5maWx0ZXIoZSA9PiBlLnN0YXJ0VGltZSArIGUuZHVyYXRpb24gPj0gcmVzcG9uc2VBZnRlcik7XG4gIGlmICghZW50cmllcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCcnKTtcbiAgfVxuICAvLyBZaWVsZCB0aGUgdGhyZWFkIGluIGNhc2UgaXRlcmF0aW5nIG92ZXIgYWxsIHJlc291cmNlcyB0YWtlcyBhIGxvbmcgdGltZS5cbiAgcmV0dXJuIHlpZWxkVGhyZWFkKCgpID0+IHNlcmlhbGl6ZShlbnRyaWVzLCByZXNvdXJjZVRpbWluZ1NwZWMsIHdpbikpO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogVXNlZCBmb3IgaW5zZXJ0ZWQgc2NvcGVkIGFuYWx5dGljcyBlbGVtZW50LlxuICogQGNvbnN0IHshT2JqZWN0PHN0cmluZywgYm9vbGVhbj59XG4gKi9cbmV4cG9ydCBjb25zdCBTQU5EQk9YX0FWQUlMQUJMRV9WQVJTID0ge1xuICAnUkFORE9NJzogdHJ1ZSxcbiAgJ0NBTk9OSUNBTF9VUkwnOiB0cnVlLFxuICAnQ0FOT05JQ0FMX0hPU1QnOiB0cnVlLFxuICAnQ0FOT05JQ0FMX0hPU1ROQU1FJzogdHJ1ZSxcbiAgJ0NBTk9OSUNBTF9QQVRIJzogdHJ1ZSxcbiAgJ0FNUERPQ19VUkwnOiB0cnVlLFxuICAnQU1QRE9DX0hPU1QnOiB0cnVlLFxuICAnQU1QRE9DX0hPU1ROQU1FJzogdHJ1ZSxcbiAgJ1NPVVJDRV9VUkwnOiB0cnVlLFxuICAnU09VUkNFX0hPU1QnOiB0cnVlLFxuICAnU09VUkNFX0hPU1ROQU1FJzogdHJ1ZSxcbiAgJ1NPVVJDRV9QQVRIJzogdHJ1ZSxcbiAgJ1RJTUVTVEFNUCc6IHRydWUsXG4gICdUSU1FWk9ORSc6IHRydWUsXG4gICdUSU1FWk9ORV9DT0RFJzogdHJ1ZSxcbiAgJ1ZJRVdQT1JUX0hFSUdIVCc6IHRydWUsXG4gICdWSUVXUE9SVF9XSURUSCc6IHRydWUsXG4gICdTQ1JFRU5fV0lEVEgnOiB0cnVlLFxuICAnU0NSRUVOX0hFSUdIVCc6IHRydWUsXG4gICdBVkFJTEFCTEVfU0NSRUVOX0hFSUdIVCc6IHRydWUsXG4gICdBVkFJTEFCTEVfU0NSRUVOX1dJRFRIJzogdHJ1ZSxcbiAgJ1NDUkVFTl9DT0xPUl9ERVBUSCc6IHRydWUsXG4gICdET0NVTUVOVF9DSEFSU0VUJzogdHJ1ZSxcbiAgJ0JST1dTRVJfTEFOR1VBR0UnOiB0cnVlLFxuICAnQU1QX1ZFUlNJT04nOiB0cnVlLFxuICAnQkFDS0dST1VORF9TVEFURSc6IHRydWUsXG4gICdVU0VSX0FHRU5UJzogdHJ1ZSxcbiAgJ0ZJUlNUX0NPTlRFTlRGVUxfUEFJTlQnOiB0cnVlLFxuICAnRklSU1RfVklFV1BPUlRfUkVBRFknOiB0cnVlLFxuICAnTUFLRV9CT0RZX1ZJU0lCTEUnOiB0cnVlLFxufTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1NlcnZpY2VzfSBmcm9tICcuLi8uLi8uLi9zcmMvc2VydmljZXMnO1xuaW1wb3J0IHtcbiAgYXNzZXJ0SHR0cHNVcmwsXG4gIGNoZWNrQ29yc1VybCxcbiAgcGFyc2VVcmxEZXByZWNhdGVkLFxufSBmcm9tICcuLi8uLi8uLi9zcmMvdXJsJztcbmltcG9ydCB7Y3JlYXRlUGl4ZWx9IGZyb20gJy4uLy4uLy4uL3NyYy9waXhlbCc7XG5pbXBvcnQge2RldiwgdXNlcn0gZnJvbSAnLi4vLi4vLi4vc3JjL2xvZyc7XG5pbXBvcnQge2xvYWRQcm9taXNlfSBmcm9tICcuLi8uLi8uLi9zcmMvZXZlbnQtaGVscGVyJztcbmltcG9ydCB7cmVtb3ZlRWxlbWVudH0gZnJvbSAnLi4vLi4vLi4vc3JjL2RvbSc7XG5pbXBvcnQge3NldFN0eWxlfSBmcm9tICcuLi8uLi8uLi9zcmMvc3R5bGUnO1xuXG4vKiogQGNvbnN0IHtzdHJpbmd9ICovXG5jb25zdCBUQUdfID0gJ2FtcC1hbmFseXRpY3MuVHJhbnNwb3J0JztcblxuLyoqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3RcbiAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIHN0cmluZ3xib29sZWFuPn0gdHJhbnNwb3J0T3B0aW9uc1xuICovXG5leHBvcnQgZnVuY3Rpb24gc2VuZFJlcXVlc3Qod2luLCByZXF1ZXN0LCB0cmFuc3BvcnRPcHRpb25zKSB7XG4gIGFzc2VydEh0dHBzVXJsKHJlcXVlc3QsICdhbXAtYW5hbHl0aWNzIHJlcXVlc3QnKTtcbiAgY2hlY2tDb3JzVXJsKHJlcXVlc3QpO1xuXG4gIGNvbnN0IHJlZmVycmVyUG9saWN5ID0gdHJhbnNwb3J0T3B0aW9uc1sncmVmZXJyZXJQb2xpY3knXTtcblxuICBpZiAocmVmZXJyZXJQb2xpY3kgPT09ICduby1yZWZlcnJlcicpIHtcbiAgICB0cmFuc3BvcnRPcHRpb25zWydiZWFjb24nXSA9IGZhbHNlO1xuICAgIHRyYW5zcG9ydE9wdGlvbnNbJ3hocnBvc3QnXSA9IGZhbHNlO1xuICB9XG5cbiAgaWYgKHRyYW5zcG9ydE9wdGlvbnNbJ2JlYWNvbiddICYmXG4gICAgICBUcmFuc3BvcnQuc2VuZFJlcXVlc3RVc2luZ0JlYWNvbih3aW4sIHJlcXVlc3QpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICh0cmFuc3BvcnRPcHRpb25zWyd4aHJwb3N0J10gJiZcbiAgICAgIFRyYW5zcG9ydC5zZW5kUmVxdWVzdFVzaW5nWGhyKHdpbiwgcmVxdWVzdCkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgaW1hZ2UgPSB0cmFuc3BvcnRPcHRpb25zWydpbWFnZSddO1xuICBpZiAoaW1hZ2UpIHtcbiAgICBjb25zdCBzdXBwcmVzc1dhcm5pbmdzID0gKHR5cGVvZiBpbWFnZSA9PSAnb2JqZWN0JyAmJlxuICAgICAgICBpbWFnZVsnc3VwcHJlc3NXYXJuaW5ncyddKTtcbiAgICBUcmFuc3BvcnQuc2VuZFJlcXVlc3RVc2luZ0ltYWdlKFxuICAgICAgICB3aW4sIHJlcXVlc3QsIHN1cHByZXNzV2FybmluZ3MsIC8qKiBAdHlwZSB7c3RyaW5nfHVuZGVmaW5lZH0gKi8gKHJlZmVycmVyUG9saWN5KSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHVzZXIoKS53YXJuKFRBR18sICdGYWlsZWQgdG8gc2VuZCByZXF1ZXN0JywgcmVxdWVzdCwgdHJhbnNwb3J0T3B0aW9ucyk7XG59XG5cbi8qKlxuICogQHZpc2libGVGb3JUZXN0aW5nXG4gKi9cbmV4cG9ydCBjbGFzcyBUcmFuc3BvcnQge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHN1cHByZXNzV2FybmluZ3NcbiAgICogQHBhcmFtIHtzdHJpbmd8dW5kZWZpbmVkfSByZWZlcnJlclBvbGljeVxuICAgKi9cbiAgc3RhdGljIHNlbmRSZXF1ZXN0VXNpbmdJbWFnZSh3aW4sIHJlcXVlc3QsIHN1cHByZXNzV2FybmluZ3MsIHJlZmVycmVyUG9saWN5KSB7XG4gICAgY29uc3QgaW1hZ2UgPSBjcmVhdGVQaXhlbCh3aW4sIHJlcXVlc3QsIHJlZmVycmVyUG9saWN5KTtcbiAgICBsb2FkUHJvbWlzZShpbWFnZSkudGhlbigoKSA9PiB7XG4gICAgICBkZXYoKS5maW5lKFRBR18sICdTZW50IGltYWdlIHJlcXVlc3QnLCByZXF1ZXN0KTtcbiAgICB9KS5jYXRjaCgoKSA9PiB7XG4gICAgICBpZiAoIXN1cHByZXNzV2FybmluZ3MpIHtcbiAgICAgICAgdXNlcigpLndhcm4oVEFHXywgJ1Jlc3BvbnNlIHVucGFyc2VhYmxlIG9yIGZhaWxlZCB0byBzZW5kIGltYWdlICcgK1xuICAgICAgICAgICAgJ3JlcXVlc3QnLCByZXF1ZXN0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdFxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoaXMgYnJvd3NlciBzdXBwb3J0cyBuYXZpZ2F0b3Iuc2VuZEJlYWNvbi5cbiAgICovXG4gIHN0YXRpYyBzZW5kUmVxdWVzdFVzaW5nQmVhY29uKHdpbiwgcmVxdWVzdCkge1xuICAgIGlmICghd2luLm5hdmlnYXRvci5zZW5kQmVhY29uKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IHdpbi5uYXZpZ2F0b3Iuc2VuZEJlYWNvbihyZXF1ZXN0LCAnJyk7XG4gICAgaWYgKHJlc3VsdCkge1xuICAgICAgZGV2KCkuZmluZShUQUdfLCAnU2VudCBiZWFjb24gcmVxdWVzdCcsIHJlcXVlc3QpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhpcyBicm93c2VyIHN1cHBvcnRzIGNyb3NzLWRvbWFpbiBYSFIuXG4gICAqL1xuICBzdGF0aWMgc2VuZFJlcXVlc3RVc2luZ1hocih3aW4sIHJlcXVlc3QpIHtcbiAgICBpZiAoIXdpbi5YTUxIdHRwUmVxdWVzdCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvKiogQGNvbnN0IHtYTUxIdHRwUmVxdWVzdH0gKi9cbiAgICBjb25zdCB4aHIgPSBuZXcgd2luLlhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgaWYgKCEoJ3dpdGhDcmVkZW50aWFscycgaW4geGhyKSkge1xuICAgICAgcmV0dXJuIGZhbHNlOyAvLyBMb29rcyBsaWtlIFhIUiBsZXZlbCAxIC0gQ09SUyBpcyBub3Qgc3VwcG9ydGVkLlxuICAgIH1cbiAgICB4aHIub3BlbignUE9TVCcsIHJlcXVlc3QsIHRydWUpO1xuICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xuXG4gICAgLy8gUHJldmVudCBwcmUtZmxpZ2h0IEhFQUQgcmVxdWVzdC5cbiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ3RleHQvcGxhaW4nKTtcblxuICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiB7XG4gICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gNCkge1xuICAgICAgICBkZXYoKS5maW5lKFRBR18sICdTZW50IFhIUiByZXF1ZXN0JywgcmVxdWVzdCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHhoci5zZW5kKCcnKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuXG4vKipcbiAqIFNlbmRzIGEgcGluZyByZXF1ZXN0IHVzaW5nIGFuIGlmcmFtZSwgdGhhdCBpcyByZW1vdmVkIDUgc2Vjb25kcyBhZnRlclxuICogaXQgaXMgbG9hZGVkLlxuICogVGhpcyBpcyBub3QgYXZhaWxhYmxlIGFzIGEgc3RhbmRhcmQgdHJhbnNwb3J0LCBidXQgcmF0aGVyIHVzZWQgZm9yXG4gKiBzcGVjaWZpYywgd2hpdGVsaXN0ZWQgcmVxdWVzdHMuXG4gKiBOb3RlIHRoYXQgdGhpcyBpcyB1bnJlbGF0ZWQgdG8gdGhlIGNyb3NzLWRvbWFpbiBpZnJhbWUgdXNlIGNhc2UgYWJvdmUgaW5cbiAqIHNlbmRSZXF1ZXN0VXNpbmdDcm9zc0RvbWFpbklmcmFtZSgpXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3QgVGhlIHJlcXVlc3QgVVJMLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2VuZFJlcXVlc3RVc2luZ0lmcmFtZSh3aW4sIHJlcXVlc3QpIHtcbiAgYXNzZXJ0SHR0cHNVcmwocmVxdWVzdCwgJ2FtcC1hbmFseXRpY3MgcmVxdWVzdCcpO1xuICAvKiogQGNvbnN0IHshRWxlbWVudH0gKi9cbiAgY29uc3QgaWZyYW1lID0gd2luLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICBzZXRTdHlsZShpZnJhbWUsICdkaXNwbGF5JywgJ25vbmUnKTtcbiAgaWZyYW1lLm9ubG9hZCA9IGlmcmFtZS5vbmVycm9yID0gKCkgPT4ge1xuICAgIFNlcnZpY2VzLnRpbWVyRm9yKHdpbikuZGVsYXkoKCkgPT4ge1xuICAgICAgcmVtb3ZlRWxlbWVudChpZnJhbWUpO1xuICAgIH0sIDUwMDApO1xuICB9O1xuICB1c2VyKCkuYXNzZXJ0KFxuICAgICAgcGFyc2VVcmxEZXByZWNhdGVkKHJlcXVlc3QpLm9yaWdpbiAhPVxuICAgICAgICBwYXJzZVVybERlcHJlY2F0ZWQod2luLmxvY2F0aW9uLmhyZWYpLm9yaWdpbixcbiAgICAgICdPcmlnaW4gb2YgaWZyYW1lIHJlcXVlc3QgbXVzdCBub3QgYmUgZXF1YWwgdG8gdGhlIGRvY3VtZW50IG9yaWdpbi4nICtcbiAgICAgICcgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hbXBwcm9qZWN0LycgK1xuICAgICAgJyBhbXBodG1sL2Jsb2IvbWFzdGVyL3NwZWMvYW1wLWlmcmFtZS1vcmlnaW4tcG9saWN5Lm1kIGZvciBkZXRhaWxzLicpO1xuICBpZnJhbWUuc2V0QXR0cmlidXRlKCdhbXAtYW5hbHl0aWNzJywgJycpO1xuICBpZnJhbWUuc2V0QXR0cmlidXRlKCdzYW5kYm94JywgJ2FsbG93LXNjcmlwdHMgYWxsb3ctc2FtZS1vcmlnaW4nKTtcbiAgaWZyYW1lLnNyYyA9IHJlcXVlc3Q7XG4gIHdpbi5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGlmcmFtZSk7XG4gIHJldHVybiBpZnJhbWU7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtTZXJ2aWNlc30gZnJvbSAnLi4vLi4vLi4vc3JjL3NlcnZpY2VzJztcbmltcG9ydCB7YmFzZTY0VXJsRW5jb2RlRnJvbVN0cmluZ30gZnJvbSAnLi4vLi4vLi4vc3JjL3V0aWxzL2Jhc2U2NCc7XG5pbXBvcnQge2RldiwgdXNlcn0gZnJvbSAnLi4vLi4vLi4vc3JjL2xvZyc7XG5pbXBvcnQge2dldFNlcnZpY2UsIHJlZ2lzdGVyU2VydmljZUJ1aWxkZXJ9IGZyb20gJy4uLy4uLy4uL3NyYy9zZXJ2aWNlJztcbmltcG9ydCB7aXNBcnJheSwgaXNGaW5pdGVOdW1iZXJ9IGZyb20gJy4uLy4uLy4uL3NyYy90eXBlcyc7XG4vLyBUT0RPKGNhbGViY29yZHJ5KSByZW1vdmUgdGhpcyBvbmNlIGV4cGVyaW1lbnQgaXMgbGF1bmNoZWRcbi8vIGFsc28gcmVtb3ZlIGZyb20gZGVwLWNoZWNrLWNvbmZpZyB3aGl0ZWxpc3Q7XG5pbXBvcnQge2lzRXhwZXJpbWVudE9ufSBmcm9tICcuLi8uLi8uLi9zcmMvZXhwZXJpbWVudHMnO1xuXG4vKiogQGNvbnN0IHtzdHJpbmd9ICovXG5jb25zdCBUQUcgPSAnQW5hbHl0aWNzLlZhcmlhYmxlcyc7XG5cbi8qKiBAY29uc3Qge1JlZ0V4cH0gKi9cbmNvbnN0IFZBUklBQkxFX0FSR1NfUkVHRVhQID0gL14oPzooW15cXHNdKikoXFwoW14pXSpcXCkpfFteXSspJC87XG5cbi8qKiBAdHlwZWRlZiB7e25hbWU6IHN0cmluZywgYXJnTGlzdDogc3RyaW5nfX0gKi9cbmxldCBGdW5jdGlvbk5hbWVBcmdzRGVmO1xuXG4vKipcbiAqIFRoZSBzdHJ1Y3R1cmUgdGhhdCBjb250YWlucyBhbGwgZGV0YWlscyBuZWVkZWQgdG8gZXhwYW5kIGEgdGVtcGxhdGVcbiAqIEBzdHJ1Y3RcbiAqIEBjb25zdFxuICogQHBhY2thZ2UgRm9yIHR5cGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBFeHBhbnNpb25PcHRpb25zIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsICo+fSB2YXJzXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2l0ZXJhdGlvbnNcbiAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0X25vRW5jb2RlXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih2YXJzLCBvcHRfaXRlcmF0aW9ucywgb3B0X25vRW5jb2RlKSB7XG4gICAgLyoqIEBjb25zdCB7IU9iamVjdDxzdHJpbmcsIHN0cmluZ3xBcnJheTxzdHJpbmc+Pn0gKi9cbiAgICB0aGlzLnZhcnMgPSB2YXJzO1xuICAgIC8qKiBAY29uc3Qge251bWJlcn0gKi9cbiAgICB0aGlzLml0ZXJhdGlvbnMgPSBvcHRfaXRlcmF0aW9ucyA9PT0gdW5kZWZpbmVkID8gMiA6IG9wdF9pdGVyYXRpb25zO1xuICAgIC8qKiBAY29uc3Qge2Jvb2xlYW59ICovXG4gICAgdGhpcy5ub0VuY29kZSA9ICEhb3B0X25vRW5jb2RlO1xuICAgIHRoaXMuZnJlZXplVmFycyA9IHt9O1xuICB9XG5cbiAgLyoqXG4gICAqIEZyZWV6ZSBzcGVjaWFsIHZhcmlhYmxlIG5hbWUgc28gdGhhdCB0aGV5IGRvbid0IGdldCBleHBhbmRlZC5cbiAgICogRm9yIGV4YW1wbGUgJHtleHRyYVVybFBhcmFtc31cbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0clxuICAgKi9cbiAgZnJlZXplVmFyKHN0cikge1xuICAgIHRoaXMuZnJlZXplVmFyc1tzdHJdID0gdHJ1ZTtcbiAgfVxufVxuXG5cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXG4gKiBAcGFyYW0ge3N0cmluZ30gc1xuICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfbFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBzdWJzdHJNYWNybyhzdHIsIHMsIG9wdF9sKSB7XG4gIGNvbnN0IHN0YXJ0ID0gTnVtYmVyKHMpO1xuICBsZXQge2xlbmd0aH0gPSBzdHI7XG4gIHVzZXIoKS5hc3NlcnQoaXNGaW5pdGVOdW1iZXIoc3RhcnQpLFxuICAgICAgJ1N0YXJ0IGluZGV4ICcgKyBzdGFydCArICdpbiBzdWJzdHIgbWFjcm8gc2hvdWxkIGJlIGEgbnVtYmVyJyk7XG4gIGlmIChvcHRfbCkge1xuICAgIGxlbmd0aCA9IE51bWJlcihvcHRfbCk7XG4gICAgdXNlcigpLmFzc2VydChpc0Zpbml0ZU51bWJlcihsZW5ndGgpLFxuICAgICAgICAnTGVuZ3RoICcgKyBsZW5ndGggKyAnIGluIHN1YnN0ciBtYWNybyBzaG91bGQgYmUgYSBudW1iZXInKTtcbiAgfVxuXG4gIHJldHVybiBzdHIuc3Vic3RyKHN0YXJ0LCBsZW5ndGgpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICogQHBhcmFtIHtzdHJpbmd9IGRlZmF1bHRWYWx1ZVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBkZWZhdWx0TWFjcm8odmFsdWUsIGRlZmF1bHRWYWx1ZSkge1xuICBpZiAoIXZhbHVlIHx8ICF2YWx1ZS5sZW5ndGgpIHtcbiAgICByZXR1cm4gdXNlcigpLmFzc2VydFN0cmluZyhkZWZhdWx0VmFsdWUpO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIGlucHV0IHRvIGJlIHJlcGxhY2VkXG4gKiBAcGFyYW0ge3N0cmluZ30gbWF0Y2hQYXR0ZXJuIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiByZWdleCBwYXR0ZXJuXG4gKiBAcGFyYW0ge3N0cmluZz19IG9wdF9uZXdTdWJTdHIgcGF0dGVybiB0byBiZSBzdWJzdGl0dXRlZCBpblxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiByZXBsYWNlTWFjcm8oc3RyaW5nLCBtYXRjaFBhdHRlcm4sIG9wdF9uZXdTdWJTdHIpIHtcbiAgaWYgKCFtYXRjaFBhdHRlcm4pIHtcbiAgICB1c2VyKCkud2FybihUQUcsICdSRVBMQUNFIG1hY3JvIG11c3QgaGF2ZSB0d28gb3IgbW9yZSBhcmd1bWVudHMnKTtcbiAgfVxuICBpZiAoIW9wdF9uZXdTdWJTdHIpIHtcbiAgICBvcHRfbmV3U3ViU3RyID0gJyc7XG4gIH1cbiAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKG1hdGNoUGF0dGVybiwgJ2cnKTtcbiAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKHJlZ2V4LCBvcHRfbmV3U3ViU3RyKTtcbn1cblxuXG4vKipcbiAqIFByb3ZpZGVzIHN1cHBvcnQgZm9yIHByb2Nlc3Npbmcgb2YgYWR2YW5jZWQgdmFyaWFibGUgc3ludGF4IGxpa2UgbmVzdGVkXG4gKiBleHBhbnNpb25zIG1hY3JvcyBldGMuXG4gKi9cbmV4cG9ydCBjbGFzcyBWYXJpYWJsZVNlcnZpY2Uge1xuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5kb3dcbiAgICovXG4gIGNvbnN0cnVjdG9yKHdpbmRvdykge1xuXG4gICAgLyoqIEBwcml2YXRlIHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IHdpbmRvdztcblxuICAgIC8qKiBAcHJpdmF0ZSB7IU9iamVjdDxzdHJpbmcsICo+fSAqL1xuICAgIHRoaXMubWFjcm9zXyA9IHt9O1xuXG4gICAgdGhpcy5yZWdpc3Rlcl8oJyRERUZBVUxUJywgZGVmYXVsdE1hY3JvKTtcbiAgICB0aGlzLnJlZ2lzdGVyXygnJFNVQlNUUicsIHN1YnN0ck1hY3JvKTtcbiAgICB0aGlzLnJlZ2lzdGVyXygnJFRSSU0nLCB2YWx1ZSA9PiB2YWx1ZS50cmltKCkpO1xuICAgIHRoaXMucmVnaXN0ZXJfKCckSlNPTicsIHZhbHVlID0+IEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XG4gICAgdGhpcy5yZWdpc3Rlcl8oJyRUT0xPV0VSQ0FTRScsIHZhbHVlID0+IHZhbHVlLnRvTG93ZXJDYXNlKCkpO1xuICAgIHRoaXMucmVnaXN0ZXJfKCckVE9VUFBFUkNBU0UnLCB2YWx1ZSA9PiB2YWx1ZS50b1VwcGVyQ2FzZSgpKTtcbiAgICB0aGlzLnJlZ2lzdGVyXygnJE5PVCcsIHZhbHVlID0+IFN0cmluZyghdmFsdWUpKTtcbiAgICB0aGlzLnJlZ2lzdGVyXygnJEJBU0U2NCcsIHZhbHVlID0+IGJhc2U2NFVybEVuY29kZUZyb21TdHJpbmcodmFsdWUpKTtcbiAgICB0aGlzLnJlZ2lzdGVyXygnJEhBU0gnLCB0aGlzLmhhc2hNYWNyb18uYmluZCh0aGlzKSk7XG4gICAgdGhpcy5yZWdpc3Rlcl8oJyRJRicsXG4gICAgICAgICh2YWx1ZSwgdGhlblZhbHVlLCBlbHNlVmFsdWUpID0+IHZhbHVlID8gdGhlblZhbHVlIDogZWxzZVZhbHVlKTtcbiAgICB0aGlzLnJlZ2lzdGVyXygnJFJFUExBQ0UnLCByZXBsYWNlTWFjcm8pO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFPYmplY3R9IGNvbnRhaW5zIGFsbCByZWdpc3RlcmVkIG1hY3Jvc1xuICAgKi9cbiAgZ2V0TWFjcm9zKCkge1xuICAgIGNvbnN0IGlzVjJFeHBhbnNpb25PbiA9IHRoaXMud2luXyAmJiBpc0V4cGVyaW1lbnRPbih0aGlzLndpbl8sXG4gICAgICAgICd1cmwtcmVwbGFjZW1lbnQtdjInKTtcbiAgICByZXR1cm4gaXNWMkV4cGFuc2lvbk9uID8gdGhpcy5tYWNyb3NfIDoge307XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICogQHBhcmFtIHsqfSBtYWNyb1xuICAgKi9cbiAgcmVnaXN0ZXJfKG5hbWUsIG1hY3JvKSB7XG4gICAgZGV2KCkuYXNzZXJ0KCF0aGlzLm1hY3Jvc19bbmFtZV0sICdNYWNybyBcIicgKyBuYW1lXG4gICAgICAgICsgJ1wiIGFscmVhZHkgcmVnaXN0ZXJlZC4nKTtcbiAgICB0aGlzLm1hY3Jvc19bbmFtZV0gPSBtYWNybztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGVtcGxhdGUgVGhlIHRlbXBsYXRlIHRvIGV4cGFuZFxuICAgKiBAcGFyYW0geyFFeHBhbnNpb25PcHRpb25zfSBvcHRpb25zIGNvbmZpZ3VyYXRpb24gdG8gdXNlIGZvciBleHBhbnNpb25cbiAgICogQHJldHVybiB7IVByb21pc2U8c3RyaW5nPn0gVGhlIGV4cGFuZGVkIHN0cmluZ1xuICAgKi9cbiAgZXhwYW5kVGVtcGxhdGUodGVtcGxhdGUsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucy5pdGVyYXRpb25zIDwgMCkge1xuICAgICAgdXNlcigpLmVycm9yKFRBRywgJ01heGltdW0gZGVwdGggcmVhY2hlZCB3aGlsZSBleHBhbmRpbmcgdmFyaWFibGVzLiAnICtcbiAgICAgICAgICAnUGxlYXNlIGVuc3VyZSB0aGF0IHRoZSB2YXJpYWJsZXMgYXJlIG5vdCByZWN1cnNpdmUuJyk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRlbXBsYXRlKTtcbiAgICB9XG5cbiAgICBjb25zdCByZXBsYWNlbWVudFByb21pc2VzID0gW107XG4gICAgbGV0IHJlcGxhY2VtZW50ID0gdGVtcGxhdGUucmVwbGFjZSgvXFwkeyhbXn1dKil9L2csIChtYXRjaCwga2V5KSA9PiB7XG4gICAgICBpZiAoIWtleSkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCcnKTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qge25hbWUsIGFyZ0xpc3R9ID0gdGhpcy5nZXROYW1lQXJnc18oa2V5KTtcbiAgICAgIGlmIChvcHRpb25zLmZyZWV6ZVZhcnNbbmFtZV0pIHtcbiAgICAgICAgLy8gRG8gbm90aGluZyB3aXRoIGZyb3plbiBwYXJhbXNcbiAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByYXcgPSBvcHRpb25zLnZhcnNbbmFtZV0gIT0gbnVsbCA/IG9wdGlvbnMudmFyc1tuYW1lXSA6ICcnO1xuXG4gICAgICBsZXQgcDtcbiAgICAgIGlmICh0eXBlb2YgcmF3ID09ICdzdHJpbmcnKSB7XG4gICAgICAgIC8vIEV4cGFuZCBzdHJpbmcgdmFsdWVzIGZ1cnRoZXIuXG4gICAgICAgIHAgPSB0aGlzLmV4cGFuZFRlbXBsYXRlKHJhdyxcbiAgICAgICAgICAgIG5ldyBFeHBhbnNpb25PcHRpb25zKG9wdGlvbnMudmFycywgb3B0aW9ucy5pdGVyYXRpb25zIC0gMSxcbiAgICAgICAgICAgICAgICB0cnVlIC8qIG5vRW5jb2RlICovKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBWYWx1ZXMgY2FuIGFsc28gYmUgYXJyYXlzIGFuZCBvYmplY3RzLiBEb24ndCBleHBhbmQgdGhlbS5cbiAgICAgICAgcCA9IFByb21pc2UucmVzb2x2ZShyYXcpO1xuICAgICAgfVxuXG4gICAgICBwID0gcC50aGVuKGZpbmFsUmF3VmFsdWUgPT4ge1xuICAgICAgICAvLyBUaGVuIGVuY29kZSB0aGUgdmFsdWVcbiAgICAgICAgY29uc3QgdmFsID0gb3B0aW9ucy5ub0VuY29kZVxuICAgICAgICAgID8gZmluYWxSYXdWYWx1ZVxuICAgICAgICAgIDogdGhpcy5lbmNvZGVWYXJzKG5hbWUsIGZpbmFsUmF3VmFsdWUpO1xuICAgICAgICByZXR1cm4gdmFsID8gdmFsICsgYXJnTGlzdCA6IHZhbDtcbiAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oZW5jb2RlZFZhbHVlID0+IHtcbiAgICAgICAgICAvLyBSZXBsYWNlIGl0IGluIHRoZSBzdHJpbmdcbiAgICAgICAgICAgIHJlcGxhY2VtZW50ID0gcmVwbGFjZW1lbnQucmVwbGFjZShtYXRjaCwgZW5jb2RlZFZhbHVlKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgLy8gUXVldWUgY3VycmVudCByZXBsYWNlbWVudCBwcm9taXNlIGFmdGVyIHRoZSBsYXN0IHJlcGxhY2VtZW50LlxuICAgICAgcmVwbGFjZW1lbnRQcm9taXNlcy5wdXNoKHApO1xuXG4gICAgICAvLyBTaW5jZSB0aGUgcmVwbGFjZW1lbnQgd2lsbCBoYXBwZW4gbGF0ZXIsIHJldHVybiB0aGUgb3JpZ2luYWwgdGVtcGxhdGUuXG4gICAgICByZXR1cm4gbWF0Y2g7XG4gICAgfSk7XG5cbiAgICAvLyBPbmNlIGFsbCB0aGUgcHJvbWlzZXMgYXJlIGNvbXBsZXRlLCByZXR1cm4gdGhlIGV4cGFuZGVkIHZhbHVlLlxuICAgIHJldHVybiBQcm9taXNlLmFsbChyZXBsYWNlbWVudFByb21pc2VzKS50aGVuKCgpID0+IHJlcGxhY2VtZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGFycmF5IGNvbnRhaW5pbmcgdHdvIHZhbHVlczogbmFtZSBhbmQgYXJncyBwYXJzZWQgZnJvbSB0aGUga2V5LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgdG8gYmUgcGFyc2VkLlxuICAgKiBAcmV0dXJuIHshRnVuY3Rpb25OYW1lQXJnc0RlZn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldE5hbWVBcmdzXyhrZXkpIHtcbiAgICBpZiAoIWtleSkge1xuICAgICAgcmV0dXJuIHtuYW1lOiAnJywgYXJnTGlzdDogJyd9O1xuICAgIH1cbiAgICBjb25zdCBtYXRjaCA9IGtleS5tYXRjaChWQVJJQUJMRV9BUkdTX1JFR0VYUCk7XG4gICAgdXNlcigpLmFzc2VydChtYXRjaCwgJ1ZhcmlhYmxlIHdpdGggaW52YWxpZCBmb3JtYXQgZm91bmQ6ICcgKyBrZXkpO1xuICAgIHJldHVybiB7bmFtZTogbWF0Y2hbMV0gfHwgbWF0Y2hbMF0sIGFyZ0xpc3Q6IG1hdGNoWzJdIHx8ICcnfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdW51c2VkTmFtZSBOYW1lIG9mIHRoZSB2YXJpYWJsZS4gT25seSB1c2VkIGluIHRlc3RzLlxuICAgKiBAcGFyYW0ge3N0cmluZ3whQXJyYXk8c3RyaW5nPn0gcmF3IFRoZSB2YWx1ZXMgdG8gVVJJIGVuY29kZS5cbiAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgZW5jb2RlZCB2YWx1ZS5cbiAgICovXG4gIGVuY29kZVZhcnModW51c2VkTmFtZSwgcmF3KSB7XG4gICAgaWYgKHJhdyA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgaWYgKGlzQXJyYXkocmF3KSkge1xuICAgICAgcmV0dXJuIHJhdy5tYXAodGhpcy5lbmNvZGVWYXJzLmJpbmQodGhpcywgdW51c2VkTmFtZSkpLmpvaW4oJywnKTtcbiAgICB9XG4gICAgLy8gU2VwYXJhdGUgb3V0IG5hbWVzIGFuZCBhcmd1bWVudHMgZnJvbSB0aGUgdmFsdWUgYW5kIGVuY29kZSB0aGUgdmFsdWUuXG4gICAgY29uc3Qge25hbWUsIGFyZ0xpc3R9ID0gdGhpcy5nZXROYW1lQXJnc18oU3RyaW5nKHJhdykpO1xuICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQobmFtZSkgKyBhcmdMaXN0O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTxzdHJpbmc+fVxuICAgKi9cbiAgaGFzaE1hY3JvXyh2YWx1ZSkge1xuICAgIHJldHVybiBTZXJ2aWNlcy5jcnlwdG9Gb3IodGhpcy53aW5fKS5zaGEzODRCYXNlNjQodmFsdWUpO1xuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbFZhcmlhYmxlU2VydmljZSh3aW4pIHtcbiAgcmVnaXN0ZXJTZXJ2aWNlQnVpbGRlcih3aW4sICdhbXAtYW5hbHl0aWNzLXZhcmlhYmxlcycsIFZhcmlhYmxlU2VydmljZSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4geyFWYXJpYWJsZVNlcnZpY2V9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YXJpYWJsZVNlcnZpY2VGb3Iod2luKSB7XG4gIHJldHVybiBnZXRTZXJ2aWNlKHdpbiwgJ2FtcC1hbmFseXRpY3MtdmFyaWFibGVzJyk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtJRlJBTUVfVFJBTlNQT1JUU30gZnJvbSAnLi9pZnJhbWUtdHJhbnNwb3J0LXZlbmRvcnMnO1xuaW1wb3J0IHtoYXNPd259IGZyb20gJy4uLy4uLy4uL3NyYy91dGlscy9vYmplY3QnO1xuXG4vKipcbiAqIEBjb25zdCB7IUpzb25PYmplY3R9XG4gKi9cbmV4cG9ydCBjb25zdCBBTkFMWVRJQ1NfQ09ORklHID0gLyoqIEB0eXBlIHshSnNvbk9iamVjdH0gKi8gKHtcblxuICAvLyBEZWZhdWx0IHBhcmVudCBjb25maWd1cmF0aW9uIGFwcGxpZWQgdG8gYWxsIGFtcC1hbmFseXRpY3MgdGFncy5cbiAgJ2RlZmF1bHQnOiB7XG4gICAgJ3RyYW5zcG9ydCc6IHsnYmVhY29uJzogdHJ1ZSwgJ3hocnBvc3QnOiB0cnVlLCAnaW1hZ2UnOiB0cnVlfSxcbiAgICAndmFycyc6IHtcbiAgICAgICdhY2Nlc3NSZWFkZXJJZCc6ICdBQ0NFU1NfUkVBREVSX0lEJyxcbiAgICAgICdhZE5hdlRpbWluZyc6ICdBRF9OQVZfVElNSU5HJywgLy8gb25seSBhdmFpbGFibGUgaW4gQTRBIGVtYmVkc1xuICAgICAgJ2FkTmF2VHlwZSc6ICdBRF9OQVZfVFlQRScsIC8vIG9ubHkgYXZhaWxhYmxlIGluIEE0QSBlbWJlZHNcbiAgICAgICdhZFJlZGlyZWN0Q291bnQnOiAnQURfTkFWX1JFRElSRUNUX0NPVU5UJywgLy8gb25seSBhdmFpbGFibGUgaW4gQTRBXG4gICAgICAnYW1wZG9jSG9zdCc6ICdBTVBET0NfSE9TVCcsXG4gICAgICAnYW1wZG9jSG9zdG5hbWUnOiAnQU1QRE9DX0hPU1ROQU1FJyxcbiAgICAgICdhbXBkb2NVcmwnOiAnQU1QRE9DX1VSTCcsXG4gICAgICAnYW1wR2VvJzogJ0FNUF9HRU8nLFxuICAgICAgJ2FtcFN0YXRlJzogJ0FNUF9TVEFURScsXG4gICAgICAnYW1wVmVyc2lvbic6ICdBTVBfVkVSU0lPTicsXG4gICAgICAnYW5jZXN0b3JPcmlnaW4nOiAnQU5DRVNUT1JfT1JJR0lOJyxcbiAgICAgICdhdXRoZGF0YSc6ICdBVVRIREFUQScsXG4gICAgICAnYXZhaWxhYmxlU2NyZWVuSGVpZ2h0JzogJ0FWQUlMQUJMRV9TQ1JFRU5fSEVJR0hUJyxcbiAgICAgICdhdmFpbGFibGVTY3JlZW5XaWR0aCc6ICdBVkFJTEFCTEVfU0NSRUVOX1dJRFRIJyxcbiAgICAgICdiYWNrZ3JvdW5kU3RhdGUnOiAnQkFDS0dST1VORF9TVEFURScsXG4gICAgICAnYnJvd3Nlckxhbmd1YWdlJzogJ0JST1dTRVJfTEFOR1VBR0UnLFxuICAgICAgJ2Nhbm9uaWNhbEhvc3QnOiAnQ0FOT05JQ0FMX0hPU1QnLFxuICAgICAgJ2Nhbm9uaWNhbEhvc3RuYW1lJzogJ0NBTk9OSUNBTF9IT1NUTkFNRScsXG4gICAgICAnY2Fub25pY2FsUGF0aCc6ICdDQU5PTklDQUxfUEFUSCcsXG4gICAgICAnY2Fub25pY2FsVXJsJzogJ0NBTk9OSUNBTF9VUkwnLFxuICAgICAgJ2NsaWVudElkJzogJ0NMSUVOVF9JRCcsXG4gICAgICAnY29udGVudExvYWRUaW1lJzogJ0NPTlRFTlRfTE9BRF9USU1FJyxcbiAgICAgICdjb3VudGVyJzogJ0NPVU5URVInLFxuICAgICAgJ2RvY3VtZW50Q2hhcnNldCc6ICdET0NVTUVOVF9DSEFSU0VUJyxcbiAgICAgICdkb2N1bWVudFJlZmVycmVyJzogJ0RPQ1VNRU5UX1JFRkVSUkVSJyxcbiAgICAgICdkb21haW5Mb29rdXBUaW1lJzogJ0RPTUFJTl9MT09LVVBfVElNRScsXG4gICAgICAnZG9tSW50ZXJhY3RpdmVUaW1lJzogJ0RPTV9JTlRFUkFDVElWRV9USU1FJyxcbiAgICAgICdleHRlcm5hbFJlZmVycmVyJzogJ0VYVEVSTkFMX1JFRkVSUkVSJyxcbiAgICAgICdmaXJzdENvbnRlbnRmdWxQYWludCc6ICdGSVJTVF9DT05URU5URlVMX1BBSU5UJyxcbiAgICAgICdmaXJzdFZpZXdwb3J0UmVhZHknOiAnRklSU1RfVklFV1BPUlRfUkVBRFknLFxuICAgICAgJ2ZyYWdtZW50UGFyYW0nOiAnRlJBR01FTlRfUEFSQU0nLFxuICAgICAgJ21ha2VCb2R5VmlzaWJsZSc6ICdNQUtFX0JPRFlfVklTSUJMRScsXG4gICAgICAnaHRtbEF0dHInOiAnSFRNTF9BVFRSJyxcbiAgICAgICdpbmNyZW1lbnRhbEVuZ2FnZWRUaW1lJzogJ0lOQ1JFTUVOVEFMX0VOR0FHRURfVElNRScsXG4gICAgICAnbmF2UmVkaXJlY3RDb3VudCc6ICdOQVZfUkVESVJFQ1RfQ09VTlQnLFxuICAgICAgJ25hdlRpbWluZyc6ICdOQVZfVElNSU5HJyxcbiAgICAgICduYXZUeXBlJzogJ05BVl9UWVBFJyxcbiAgICAgICdwYWdlRG93bmxvYWRUaW1lJzogJ1BBR0VfRE9XTkxPQURfVElNRScsXG4gICAgICAncGFnZUxvYWRUaW1lJzogJ1BBR0VfTE9BRF9USU1FJyxcbiAgICAgICdwYWdlVmlld0lkJzogJ1BBR0VfVklFV19JRCcsXG4gICAgICAncXVlcnlQYXJhbSc6ICdRVUVSWV9QQVJBTScsXG4gICAgICAncmFuZG9tJzogJ1JBTkRPTScsXG4gICAgICAncmVkaXJlY3RUaW1lJzogJ1JFRElSRUNUX1RJTUUnLFxuICAgICAgJ3NjcmVlbkNvbG9yRGVwdGgnOiAnU0NSRUVOX0NPTE9SX0RFUFRIJyxcbiAgICAgICdzY3JlZW5IZWlnaHQnOiAnU0NSRUVOX0hFSUdIVCcsXG4gICAgICAnc2NyZWVuV2lkdGgnOiAnU0NSRUVOX1dJRFRIJyxcbiAgICAgICdzY3JvbGxIZWlnaHQnOiAnU0NST0xMX0hFSUdIVCcsXG4gICAgICAnc2Nyb2xsTGVmdCc6ICdTQ1JPTExfTEVGVCcsXG4gICAgICAnc2Nyb2xsVG9wJzogJ1NDUk9MTF9UT1AnLFxuICAgICAgJ3Njcm9sbFdpZHRoJzogJ1NDUk9MTF9XSURUSCcsXG4gICAgICAnc2VydmVyUmVzcG9uc2VUaW1lJzogJ1NFUlZFUl9SRVNQT05TRV9USU1FJyxcbiAgICAgICdzb3VyY2VVcmwnOiAnU09VUkNFX1VSTCcsXG4gICAgICAnc291cmNlSG9zdCc6ICdTT1VSQ0VfSE9TVCcsXG4gICAgICAnc291cmNlSG9zdG5hbWUnOiAnU09VUkNFX0hPU1ROQU1FJyxcbiAgICAgICdzb3VyY2VQYXRoJzogJ1NPVVJDRV9QQVRIJyxcbiAgICAgICd0Y3BDb25uZWN0VGltZSc6ICdUQ1BfQ09OTkVDVF9USU1FJyxcbiAgICAgICd0aW1lc3RhbXAnOiAnVElNRVNUQU1QJyxcbiAgICAgICd0aW1lem9uZSc6ICdUSU1FWk9ORScsXG4gICAgICAndGltZXpvbmVDb2RlJzogJ1RJTUVaT05FX0NPREUnLFxuICAgICAgJ3RpdGxlJzogJ1RJVExFJyxcbiAgICAgICd0b3RhbEVuZ2FnZWRUaW1lJzogJ1RPVEFMX0VOR0FHRURfVElNRScsXG4gICAgICAndXNlckFnZW50JzogJ1VTRVJfQUdFTlQnLFxuICAgICAgJ3ZpZXdlcic6ICdWSUVXRVInLFxuICAgICAgJ3ZpZXdwb3J0SGVpZ2h0JzogJ1ZJRVdQT1JUX0hFSUdIVCcsXG4gICAgICAndmlld3BvcnRXaWR0aCc6ICdWSUVXUE9SVF9XSURUSCcsXG4gICAgfSxcbiAgfSxcbiAgJ2FjcXVpYWxpZnQnOiB7XG4gICAgJ3ZhcnMnOiB7XG4gICAgICAnZGVjaXNpb25BcGlVcmwnOiAndXMtZWFzdC0xLWRlY2lzaW9uYXBpLmxpZnQuYWNxdWlhLmNvbScsXG4gICAgICAnYWNjb3VudElkJzogJ3h4eHh4eHh4JyxcbiAgICAgICdzaXRlSWQnOiAneHh4eHh4eHgnLFxuICAgIH0sXG4gICAgJ3RyYW5zcG9ydCc6IHsnYmVhY29uJzogdHJ1ZSwgJ3hocnBvc3QnOiB0cnVlLCAnaW1hZ2UnOiBmYWxzZX0sXG4gICAgJ3JlcXVlc3RzJzoge1xuICAgICAgJ2Jhc2UnOiAnaHR0cHM6Ly8ke2RlY2lzaW9uQXBpVXJsfS9jYXB0dXJlP2FjY291bnRfaWQ9JHthY2NvdW50SWR9JnNpdGVfaWQ9JHtzaXRlSWR9JyxcbiAgICAgICdiYXNpY0NhcHR1cmUnOiAnJHtiYXNlfScgK1xuICAgICAgICAnJmlkZW50PSR7Y2xpZW50SWQodGNfcHRpZCl9JyArXG4gICAgICAgICcmaWRlbnRzcmM9YW1wJyArXG4gICAgICAgICcmZXM9QW1wJyArXG4gICAgICAgICcmdXJsPSR7Y2Fub25pY2FsVXJsfScgK1xuICAgICAgICAnJnJ1cmw9JHtkb2N1bWVudFJlZmVycmVyfScgK1xuICAgICAgICAnJmN0dGw9JHt0aXRsZX0nLFxuICAgICAgJ3BhZ2V2aWV3JzogJyR7YmFzaWNDYXB0dXJlfScgK1xuICAgICAgICAnJmVuPUNvbnRlbnQgVmlldycsXG4gICAgICAnY2xpY2snOiAnJHtiYXNpY0NhcHR1cmV9JyArXG4gICAgICAgICcmZW49Q2xpY2stVGhyb3VnaCcsXG4gICAgfSxcbiAgICAndHJpZ2dlcnMnOiB7XG4gICAgICAnZGVmYXVsdFBhZ2V2aWV3Jzoge1xuICAgICAgICAnb24nOiAndmlzaWJsZScsXG4gICAgICAgICdyZXF1ZXN0JzogJ3BhZ2V2aWV3JyxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSxcblxuICAnYWZzYW5hbHl0aWNzJzoge1xuICAgICd2YXJzJzoge1xuICAgICAgJ3NlcnZlcic6ICd3d3cnLFxuICAgICAgJ3dlYnNpdGVpZCc6ICd4eHh4eHh4eCcsXG4gICAgICAnZXZlbnQnOiAnY2xpY2snLFxuICAgICAgJ2NsaWNrbGFiZWwnOiAnY2xpY2tlZCBmcm9tIEFNUCBwYWdlJyxcbiAgICB9LFxuICAgICd0cmFuc3BvcnQnOiB7J2JlYWNvbic6IGZhbHNlLCAneGhycG9zdCc6IGZhbHNlLCAnaW1hZ2UnOiB0cnVlfSxcbiAgICAncmVxdWVzdHMnOiB7XG4gICAgICAnaG9zdCc6ICcvLyR7c2VydmVyfS5hZnNhbmFseXRpY3MuY29tJyxcbiAgICAgICdiYXNlJzogJyR7aG9zdH0vY2dpX2Jpbi8nLFxuICAgICAgJ3BhZ2V2aWV3JzogJyR7YmFzZX1jb25uZWN0LmNnaT91c3I9JHt3ZWJzaXRlaWR9UGF1dG8nICtcbiAgICAgICAgJyZqcz0xJyArXG4gICAgICAgICcmYW1wPTEnICtcbiAgICAgICAgJyZ0aXRsZT0ke3RpdGxlfScgK1xuICAgICAgICAnJnVybD0ke2Nhbm9uaWNhbFVybH0nICtcbiAgICAgICAgJyZyZWZlcj0ke2RvY3VtZW50UmVmZXJyZXJ9JyArXG4gICAgICAgICcmcmVzb2x1dGlvbj0ke3NjcmVlbldpZHRofXgke3NjcmVlbkhlaWdodH0nICtcbiAgICAgICAgJyZjb2xvcj0ke3NjcmVlbkNvbG9yRGVwdGh9JyArXG4gICAgICAgICcmVGlwcz0ke3JhbmRvbX0nLFxuICAgICAgJ2NsaWNrJzogJyR7YmFzZX1jbGljay5jZ2k/dXNyPSR7d2Vic2l0ZWlkfScgK1xuICAgICAgICAnJmV2ZW50PSR7ZXZlbnR9JyArXG4gICAgICAgICcmZXhpdD0ke2NsaWNrbGFiZWx9JyxcbiAgICB9LFxuICAgICd0cmlnZ2Vycyc6IHtcbiAgICAgICdkZWZhdWx0UGFnZXZpZXcnOiB7XG4gICAgICAgICdvbic6ICd2aXNpYmxlJyxcbiAgICAgICAgJ3JlcXVlc3QnOiAncGFnZXZpZXcnLFxuICAgICAgfSxcbiAgICB9LFxuICB9LFxuXG4gICdhbGV4YW1ldHJpY3MnOiB7XG4gICAgJ3JlcXVlc3RzJzoge1xuICAgICAgJ2Jhc2UnOiAnaHR0cHM6Ly8ke2FtcEF0cmtIb3N0fS9hdHJrLmdpZj9hY2NvdW50PSR7YXRya19hY2N0fSZkb21haW49JHtkb21haW59JyxcbiAgICAgICdwYWdldmlldyc6ICcke2Jhc2V9Jmpzdj1hbXAtJHthbXBWZXJzaW9ufScgK1xuICAgICAgICAnJmZyYW1lX2hlaWdodD0ke3ZpZXdwb3J0SGVpZ2h0fSZmcmFtZV93aWR0aD0ke3ZpZXdwb3J0V2lkdGh9JyArXG4gICAgICAgICcmdGl0bGU9JHt0aXRsZX0mdGltZT0ke3RpbWVzdGFtcH0mdGltZV96b25lX29mZnNldD0ke3RpbWV6b25lfScgK1xuICAgICAgICAnJnNjcmVlbl9wYXJhbXM9JHtzY3JlZW5XaWR0aH14JHtzY3JlZW5IZWlnaHR9eCR7c2NyZWVuQ29sb3JEZXB0aH0nICtcbiAgICAgICAgJyZyZWZfdXJsPSR7ZG9jdW1lbnRSZWZlcnJlcn0maG9zdF91cmw9JHtzb3VyY2VVcmx9JyArXG4gICAgICAgICcmcmFuZG9tX251bWJlcj0ke3JhbmRvbX0mdXNlcl9jb29raWU9JHtjbGllbnRJZChfX2F1Yyl9JyArXG4gICAgICAgICcmdXNlcl9jb29raWVfZmxhZz0wJnVzZXJfbGFuZz0ke2Jyb3dzZXJMYW5ndWFnZX0nICtcbiAgICAgICAgJyZhbXBfZG9jX3VybD0ke2FtcGRvY1VybH0nLFxuICAgIH0sXG4gICAgJ3ZhcnMnOiB7XG4gICAgICAnYXRya19hY2N0JzogJycsXG4gICAgICAnZG9tYWluJzogJycsXG4gICAgICAnYW1wQXRya0hvc3QnOiAnY2VydGlmeS1hbXAuYWxleGFtZXRyaWNzLmNvbScsXG4gICAgfSxcbiAgICAndHJpZ2dlcnMnOiB7XG4gICAgICAndHJhY2tQYWdldmlldyc6IHtcbiAgICAgICAgJ29uJzogJ3Zpc2libGUnLFxuICAgICAgICAncmVxdWVzdCc6ICdwYWdldmlldycsXG4gICAgICB9LFxuICAgIH0sXG4gICAgJ3RyYW5zcG9ydCc6IHtcbiAgICAgICd4aHJwb3N0JzogZmFsc2UsXG4gICAgICAnYmVhY29uJzogZmFsc2UsXG4gICAgICAnaW1hZ2UnOiB0cnVlLFxuICAgIH0sXG4gIH0sXG5cbiAgJ2F0aW50ZXJuZXQnOiB7XG4gICAgJ3RyYW5zcG9ydCc6IHsnYmVhY29uJzogZmFsc2UsICd4aHJwb3N0JzogZmFsc2UsICdpbWFnZSc6IHRydWV9LFxuICAgICdyZXF1ZXN0cyc6IHtcbiAgICAgICdiYXNlJzogJ2h0dHBzOi8vJHtsb2d9JHtkb21haW59L2hpdC54aXRpP3M9JHtzaXRlfSZ0cz0ke3RpbWVzdGFtcH0mcj0ke3NjcmVlbldpZHRofXgke3NjcmVlbkhlaWdodH14JHtzY3JlZW5Db2xvckRlcHRofSZyZT0ke2F2YWlsYWJsZVNjcmVlbldpZHRofXgke2F2YWlsYWJsZVNjcmVlbkhlaWdodH0nLFxuICAgICAgJ3N1ZmZpeCc6ICcmbWVkaXVtPWFtcCYke2V4dHJhVXJsUGFyYW1zfSZyZWY9JHtkb2N1bWVudFJlZmVycmVyfScsXG4gICAgICAncGFnZXZpZXcnOiAnJHtiYXNlfSYnICtcbiAgICAgICAgJ3A9JHt0aXRsZX0mJyArXG4gICAgICAgICdzMj0ke2xldmVsMn0ke3N1ZmZpeH0nLFxuICAgICAgJ2NsaWNrJzogJyR7YmFzZX0mJyArXG4gICAgICAgICdwY2xpY2s9JHt0aXRsZX0mJyArXG4gICAgICAgICdzMmNsaWNrPSR7bGV2ZWwyfSYnICtcbiAgICAgICAgJ3A9JHtsYWJlbH0mJyArXG4gICAgICAgICdzMj0ke2xldmVsMkNsaWNrfSYnICtcbiAgICAgICAgJ3R5cGU9Y2xpY2smY2xpY2s9JHt0eXBlfSR7c3VmZml4fScsXG4gICAgfSxcbiAgfSxcblxuICAndW1lbmdhbmFseXRpY3MnOiB7XG4gICAgJ3ZhcnMnOiB7XG4gICAgICAnc2l0ZWlkJzogJycsXG4gICAgICAnaW5pdGlhbF92aWV3X3RpbWUnOiAnJyxcbiAgICAgICdldmVudE5hbWUnOiAnJyxcbiAgICAgICdldmVudFByb3BzJzogJycsXG4gICAgfSxcbiAgICAncmVxdWVzdHMnOiB7XG4gICAgICAnYmFzZSc6ICdodHRwczovL2IuY256ei5jb20vdXRyYWNrPycgK1xuICAgICAgJyZfc2l0ZWlkPSR7c2l0ZWlkfScgK1xuICAgICAgJyZfZGlzdGluY3RfaWQ9JHtjbGllbnRJZCh1bWVuZ19hbXBfaWQpfScgK1xuICAgICAgJyZfdD0ke3RpbWVzdGFtcH0nICtcbiAgICAgICcmX3M9Z29vZ2xlJyArXG4gICAgICAnJl9iPXdlYicgK1xuICAgICAgJyZfcj0ke2V4dGVybmFsUmVmZXJyZXJ9JyArXG4gICAgICAnJl9oPSR7c2NyZWVuSGVpZ2h0fScgK1xuICAgICAgJyZfdz0ke3NjcmVlbldpZHRofScgK1xuICAgICAgJyZfaXZ0PSR7aW5pdGlhbF92aWV3X3RpbWV9JyxcbiAgICAgICdwYWdldmlldyc6ICcke2Jhc2V9Jl9lbmFtZT0kd19wYWdlX3ZpZXcmX2Vwcm9wcz0ke2V2ZW50UHJvcHN9JyxcbiAgICAgICdldmVudCc6ICcke2Jhc2V9Jl9lbmFtZT0ke2V2ZW50TmFtZX0mX2Vwcm9wcz0ke2V2ZW50UHJvcHN9JyxcbiAgICB9LFxuICAgICd0cmlnZ2Vycyc6IHtcbiAgICAgICdkZWZhdWx0UGFnZXZpZXcnOiB7XG4gICAgICAgICdvbic6ICd2aXNpYmxlJyxcbiAgICAgICAgJ3JlcXVlc3QnOiAncGFnZXZpZXcnLFxuICAgICAgfSxcbiAgICB9LFxuICAgICd0cmFuc3BvcnQnOiB7XG4gICAgICAnYmVhY29uJzogZmFsc2UsXG4gICAgICAneGhycG9zdCc6IGZhbHNlLFxuICAgICAgJ2ltYWdlJzogdHJ1ZSxcbiAgICB9LFxuICB9LFxuXG4gICdiYWlkdWFuYWx5dGljcyc6IHtcbiAgICAncmVxdWVzdHMnOiB7XG4gICAgICAnaG9zdCc6ICdodHRwczovL2htLmJhaWR1LmNvbScsXG4gICAgICAnYmFzZSc6ICcke2hvc3R9L2htLmdpZj8nICtcbiAgICAgICAgICAnc2k9JHt0b2tlbn0mbnY9MCZzdD00JnY9cGl4ZWwtMS4wJnJuZD0ke3RpbWVzdGFtcH0nLFxuICAgICAgJ3BhZ2V2aWV3JzogJyR7YmFzZX0mZXQ9MCcsXG4gICAgICAnZXZlbnQnOiAnJHtiYXNlfSZlcD0ke2NhdGVnb3J5fSoke2FjdGlvbn0qJyArXG4gICAgICAgICAgJyR7bGFiZWx9KiR7dmFsdWV9JmV0PTQmYXBpPThfMCcsXG4gICAgfSxcbiAgICAndHJhbnNwb3J0Jzoge1xuICAgICAgJ2JlYWNvbic6IGZhbHNlLFxuICAgICAgJ3hocnBvc3QnOiBmYWxzZSxcbiAgICAgICdpbWFnZSc6IHRydWUsXG4gICAgfSxcbiAgfSxcblxuICAnYnVydCc6IHtcbiAgICAndmFycyc6IHtcbiAgICAgICd0cmFja2luZ0tleSc6ICdpZ25vcmUnLFxuICAgICAgJ2NhdGVnb3J5JzogJycsXG4gICAgICAnc3ViQ2F0ZWdvcnknOiAnJyxcbiAgICB9LFxuICAgICdyZXF1ZXN0cyc6IHtcbiAgICAgICdob3N0JzogJy8vJHt0cmFja2luZ0tleX0uYy5yaWNobWV0cmljcy5jb20vJyxcbiAgICAgICdiYXNlJzogJyR7aG9zdH1pbWdsb2c/JyArXG4gICAgICAgICdlPSR7dHJhY2tpbmdLZXl9JicgK1xuICAgICAgICAncGk9JHt0cmFja2luZ0tleX0nICtcbiAgICAgICAgICAnfCR7cGFnZVZpZXdJZH0nICtcbiAgICAgICAgICAnfCR7Y2Fub25pY2FsUGF0aH0nICtcbiAgICAgICAgICAnfCR7Y2xpZW50SWQoYnVydC1hbXAtdXNlci1pZCl9JicgK1xuICAgICAgICAndWk9JHtjbGllbnRJZChidXJ0LWFtcC11c2VyLWlkKX0mJyArXG4gICAgICAgICd2PWFtcCYnICtcbiAgICAgICAgJ3RzPSR7dGltZXN0YW1wfSYnICtcbiAgICAgICAgJ3NuPSR7cmVxdWVzdENvdW50fSYnLFxuICAgICAgJ3BhZ2V2aWV3JzogJyR7YmFzZX0nICtcbiAgICAgICAgJ3R5cGU9cGFnZSYnICtcbiAgICAgICAgJ2NhPSR7Y2F0ZWdvcnl9JicgK1xuICAgICAgICAnc2M9JHtzdWJDYXRlZ29yeX0mJyArXG4gICAgICAgICdsbj0ke2Jyb3dzZXJMYW5ndWFnZX0mJyArXG4gICAgICAgICdscj0ke2RvY3VtZW50UmVmZXJyZXJ9JicgK1xuICAgICAgICAnZXU9JHtzb3VyY2VVcmx9JicgK1xuICAgICAgICAndHo9JHt0aW1lem9uZX0mJyArXG4gICAgICAgICdwZD0ke3Njcm9sbFdpZHRofXgke3Njcm9sbEhlaWdodH0mJyArXG4gICAgICAgICdzZD0ke3NjcmVlbldpZHRofXgke3NjcmVlbkhlaWdodH0mJyArXG4gICAgICAgICd3ZD0ke2F2YWlsYWJsZVNjcmVlbldpZHRofXgke2F2YWlsYWJsZVNjcmVlbkhlaWdodH0mJyArXG4gICAgICAgICd3cz0ke3Njcm9sbExlZnR9eCR7c2Nyb2xsVG9wfScsXG4gICAgICAncGFnZXBpbmcnOiAnJHtiYXNlfScgK1xuICAgICAgICAndHlwZT1wYWdlcGluZycsXG4gICAgfSxcbiAgICAndHJpZ2dlcnMnOiB7XG4gICAgICAncGFnZXZpZXcnOiB7XG4gICAgICAgICdvbic6ICd2aXNpYmxlJyxcbiAgICAgICAgJ3JlcXVlc3QnOiAncGFnZXZpZXcnLFxuICAgICAgfSxcbiAgICAgICdwYWdlcGluZyc6IHtcbiAgICAgICAgJ29uJzogJ3RpbWVyJyxcbiAgICAgICAgJ3RpbWVyU3BlYyc6IHtcbiAgICAgICAgICAnaW50ZXJ2YWwnOiAxNSxcbiAgICAgICAgICAnbWF4VGltZXJMZW5ndGgnOiAxMjAwLFxuICAgICAgICB9LFxuICAgICAgICAncmVxdWVzdCc6ICdwYWdlcGluZycsXG4gICAgICB9LFxuICAgIH0sXG4gICAgJ3RyYW5zcG9ydCc6IHtcbiAgICAgICdiZWFjb24nOiBmYWxzZSxcbiAgICAgICd4aHJwb3N0JzogZmFsc2UsXG4gICAgICAnaW1hZ2UnOiB0cnVlLFxuICAgIH0sXG4gIH0sXG5cbiAgJ2J5c2lkZSc6IHtcbiAgICAndmFycyc6IHtcblx0ICAnd2ViY2FyZVpvbmUnOiAnd2ViY2FyZScsXG4gICAgICAnd2ViY2FyZUlkJzogJycsXG4gICAgICAnY2hhbm5lbCc6ICcnLFxuICAgICAgJ2ZpZCc6ICcnLFxuXHQgICdsYW5nJzogJ3B0JyxcbiAgICB9LFxuICAgICdyZXF1ZXN0cyc6IHtcbiAgICAgICdob3N0JzogJy8vJHt3ZWJjYXJlWm9uZX0uYnlzaWRlLmNvbS8nLFxuICAgICAgJ2Jhc2UnOiAnJHtob3N0fUJXQSR7d2ViY2FyZUlkfS9hbXAvJyxcbiAgICAgICdwYWdldmlldyc6ICcke2Jhc2V9cGl4ZWwucGhwJyxcblx0ICAnZXZlbnQnOiAnJHtiYXNlfXNpZ25hbC5waHA/ZXZlbnRfaWQ9JHtldmVudElkfScgK1xuXHQgICAgJyZldmVudF9sYWJlbD0ke2V2ZW50TGFiZWx9JmZpZWxkcz0ke2ZpZWxkc30nLFxuICAgIH0sXG4gICAgJ2V4dHJhVXJsUGFyYW1zJzoge1xuICAgICAgJ3dlYmNhcmVfaWQnOiAnJHt3ZWJjYXJlSWR9JyxcbiAgICAgICdid2NoJzogJyR7Y2hhbm5lbH0nLFxuICAgICAgJ2xhbmcnOiAnJHtsYW5nfScsXG4gICAgICAnZmlkJzogJyR7ZmlkfScsXG4gICAgICAnYndpdCc6ICdBJyxcbiAgICAgICd0dWlkJzogJyR7Y2xpZW50SWQoYnlzaWRlX3dlYmNhcmVfdHVpZCl9JyxcbiAgICAgICdzdWlkJzogJycsXG4gICAgICAncHVpZCc6ICcke3BhZ2VWaWV3SWR9cCR7dGltZXN0YW1wfScsXG4gICAgICAncmVmZXJyZXInOiAnJHtkb2N1bWVudFJlZmVycmVyfScsXG4gICAgICAncGFnZSc6ICcke3NvdXJjZVVybH0nLFxuICAgICAgJ2FtcHBhZ2UnOiAnJHthbXBkb2NVcmx9JyxcbiAgICAgICdid3B0JzogJyR7dGl0bGV9JyxcbiAgICAgICdicmVzJzogJyR7dmlld3BvcnRXaWR0aH14JHt2aWV3cG9ydEhlaWdodH0nLFxuICAgICAgJ3Jlcyc6ICcke3NjcmVlbldpZHRofXgke3NjcmVlbkhlaWdodH0nLFxuICAgICAgJ3YnOiAndjIwMTcxMTE2YScsXG4gICAgICAnYW1wdic6ICcke2FtcFZlcnNpb259JyxcbiAgICAgICd2aWV3ZXInOiAnJHt2aWV3ZXJ9JyxcbiAgICAgICd1YSc6ICcke3VzZXJBZ2VudH0nLFxuICAgICAgJ3InOiAnJHtyYW5kb219JyxcbiAgICB9LFxuICAgICd0cmlnZ2Vycyc6IHtcbiAgICAgICdwYWdldmlldyc6IHtcbiAgICAgICAgJ29uJzogJ3Zpc2libGUnLFxuICAgICAgICAncmVxdWVzdCc6ICdwYWdldmlldycsXG4gICAgICB9LFxuICAgIH0sXG4gICAgJ3RyYW5zcG9ydCc6IHtcbiAgICAgICdiZWFjb24nOiBmYWxzZSxcbiAgICAgICd4aHJwb3N0JzogZmFsc2UsXG4gICAgICAnaW1hZ2UnOiB0cnVlLFxuICAgIH0sXG4gIH0sXG5cbiAgJ2NoYXJ0YmVhdCc6IHtcbiAgICAncmVxdWVzdHMnOiB7XG4gICAgICAnaG9zdCc6ICdodHRwczovL3BpbmcuY2hhcnRiZWF0Lm5ldCcsXG4gICAgICAnYmFzZVByZWZpeCc6ICcvcGluZz9oPSR7ZG9tYWlufSYnICtcbiAgICAgICAgJ3A9JHtjYW5vbmljYWxQYXRofSYnICtcbiAgICAgICAgJ3U9JHtjbGllbnRJZChfY2IpfSYnICtcbiAgICAgICAgJ2Q9JHtjYW5vbmljYWxIb3N0fSYnICtcbiAgICAgICAgJ2c9JHt1aWR9JicgK1xuICAgICAgICAnZzA9JHtzZWN0aW9uc30mJyArXG4gICAgICAgICdnMT0ke2F1dGhvcnN9JicgK1xuICAgICAgICAnZzI9JHt6b25lfSYnICtcbiAgICAgICAgJ2czPSR7c3BvbnNvck5hbWV9JicgK1xuICAgICAgICAnZzQ9JHtjb250ZW50VHlwZX0mJyArXG4gICAgICAgICdjPTEyMCYnICtcbiAgICAgICAgJ3g9JHtzY3JvbGxUb3B9JicgK1xuICAgICAgICAneT0ke3Njcm9sbEhlaWdodH0mJyArXG4gICAgICAgICdqPSR7ZGVjYXlUaW1lfSYnICtcbiAgICAgICAgJ1I9MSYnICtcbiAgICAgICAgJ1c9MCYnICtcbiAgICAgICAgJ0k9MCYnICtcbiAgICAgICAgJ0U9JHt0b3RhbEVuZ2FnZWRUaW1lfSYnICtcbiAgICAgICAgJ3I9JHtkb2N1bWVudFJlZmVycmVyfSYnICtcbiAgICAgICAgJ3Q9JHtwYWdlVmlld0lkfSR7Y2xpZW50SWQoX2NiKX0mJyArXG4gICAgICAgICdiPSR7cGFnZUxvYWRUaW1lfSYnICtcbiAgICAgICAgJ2k9JHt0aXRsZX0mJyArXG4gICAgICAgICdUPSR7dGltZXN0YW1wfSYnICtcbiAgICAgICAgJ3R6PSR7dGltZXpvbmV9JicgK1xuICAgICAgICAnQz0yJyxcbiAgICAgICdiYXNlU3VmZml4JzogJyZfJyxcbiAgICAgICdpbnRlcnZhbCc6ICcke2hvc3R9JHtiYXNlUHJlZml4fSR7YmFzZVN1ZmZpeH0nLFxuICAgICAgJ2FuY2hvckNsaWNrJzogJyR7aG9zdH0ke2Jhc2VQcmVmaXh9JHtiYXNlU3VmZml4fScsXG4gICAgfSxcbiAgICAndHJpZ2dlcnMnOiB7XG4gICAgICAndHJhY2tJbnRlcnZhbCc6IHtcbiAgICAgICAgJ29uJzogJ3RpbWVyJyxcbiAgICAgICAgJ3RpbWVyU3BlYyc6IHtcbiAgICAgICAgICAnaW50ZXJ2YWwnOiAxNSxcbiAgICAgICAgICAnbWF4VGltZXJMZW5ndGgnOiA3MjAwLFxuICAgICAgICB9LFxuICAgICAgICAncmVxdWVzdCc6ICdpbnRlcnZhbCcsXG4gICAgICAgICd2YXJzJzoge1xuICAgICAgICAgICdkZWNheVRpbWUnOiAzMCxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICAndHJhY2tBbmNob3JDbGljayc6IHtcbiAgICAgICAgJ29uJzogJ2NsaWNrJyxcbiAgICAgICAgJ3NlbGVjdG9yJzogJ2EnLFxuICAgICAgICAncmVxdWVzdCc6ICdhbmNob3JDbGljaycsXG4gICAgICAgICd2YXJzJzoge1xuICAgICAgICAgICdkZWNheVRpbWUnOiAzMCxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICAndHJhbnNwb3J0Jzoge1xuICAgICAgJ2JlYWNvbic6IGZhbHNlLFxuICAgICAgJ3hocnBvc3QnOiBmYWxzZSxcbiAgICAgICdpbWFnZSc6IHRydWUsXG4gICAgfSxcbiAgfSxcblxuICAnY2xpY2t5Jzoge1xuICAgICd2YXJzJzoge1xuICAgICAgJ3NpdGVfaWQnOiAnJyxcbiAgICB9LFxuICAgICdyZXF1ZXN0cyc6IHtcbiAgICAgICdiYXNlJzogJ2h0dHBzOi8vaW4uZ2V0Y2xpY2t5LmNvbS9pbi5waHA/JyArXG4gICAgICAgICdzaXRlX2lkPSR7c2l0ZV9pZH0nLFxuICAgICAgJ2Jhc2VTdWZmaXgnOiAnJm1pbWU9JHtjb250ZW50VHlwZX0mJyArXG4gICAgICAgICd4PSR7cmFuZG9tfScsXG4gICAgICAncGFnZXZpZXcnOiAnJHtiYXNlfSYnICtcbiAgICAgICAgJ3Jlcz0ke3NjcmVlbldpZHRofXgke3NjcmVlbkhlaWdodH0mJyArXG4gICAgICAgICdsYW5nPSR7YnJvd3Nlckxhbmd1YWdlfSYnICtcbiAgICAgICAgJ3NlY3VyZT0xJicgK1xuICAgICAgICAndHlwZT1wYWdldmlldyYnICtcbiAgICAgICAgJ2hyZWY9JHtjYW5vbmljYWxQYXRofSYnICtcbiAgICAgICAgJ3RpdGxlPSR7dGl0bGV9JyArXG4gICAgICAgICcke2Jhc2VTdWZmaXh9JyxcbiAgICAgICdpbnRlcnZhbCc6ICcke2Jhc2V9JicgK1xuICAgICAgICAndHlwZT1waW5nJyArXG4gICAgICAgICcke2Jhc2VTdWZmaXh9JyxcbiAgICB9LFxuICAgICd0cmlnZ2Vycyc6IHtcbiAgICAgICdkZWZhdWx0UGFnZXZpZXcnOiB7XG4gICAgICAgICdvbic6ICd2aXNpYmxlJyxcbiAgICAgICAgJ3JlcXVlc3QnOiAncGFnZXZpZXcnLFxuICAgICAgfSxcbiAgICAgICdpbnRlcnZhbCc6IHtcbiAgICAgICAgJ29uJzogJ3RpbWVyJyxcbiAgICAgICAgJ3RpbWVyU3BlYyc6IHtcbiAgICAgICAgICAnaW50ZXJ2YWwnOiA2MCxcbiAgICAgICAgICAnbWF4VGltZXJMZW5ndGgnOiA2MDAsXG4gICAgICAgIH0sXG4gICAgICAgICdyZXF1ZXN0JzogJ2ludGVydmFsJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgICAndHJhbnNwb3J0Jzoge1xuICAgICAgJ2JlYWNvbic6IGZhbHNlLFxuICAgICAgJ3hocnBvc3QnOiBmYWxzZSxcbiAgICAgICdpbWFnZSc6IHRydWUsXG4gICAgfSxcbiAgfSxcblxuICAnY29sYW5hbHl0aWNzJzoge1xuICAgICdyZXF1ZXN0cyc6IHtcbiAgICAgICdob3N0JzogJ2h0dHBzOi8vYXNlLmNsbWJ0ZWNoLmNvbScsXG4gICAgICAnYmFzZSc6ICcke2hvc3R9L21lc3NhZ2UnLFxuICAgICAgJ3BhZ2V2aWV3JzogJyR7YmFzZX0/Y2lkPSR7aWR9JyArXG4gICAgICAgICcmdmFsXzEwMT0ke2lkfScgK1xuICAgICAgICAnJnZhbF8xMDE9JHtjYW5vbmljYWxQYXRofScgK1xuICAgICAgICAnJmNoPSR7Y2Fub25pY2FsSG9zdH0nICtcbiAgICAgICAgJyZ1dWlkPSR7dWlkfScgK1xuICAgICAgICAnJmF1PSR7YXV0aG9yc30nICtcbiAgICAgICAgJyZ6bz0ke3pvbmV9JyArXG4gICAgICAgICcmc249JHtzcG9uc29yTmFtZX0nICtcbiAgICAgICAgJyZjdD0ke2NvbnRlbnRUeXBlfScgK1xuICAgICAgICAnJnN0PSR7c2Nyb2xsVG9wfScgK1xuICAgICAgICAnJnNoPSR7c2Nyb2xsSGVpZ2h0fScgK1xuICAgICAgICAnJmRjdD0ke2RlY2F5VGltZX0nICtcbiAgICAgICAgJyZ0ZXQ9JHt0b3RhbEVuZ2FnZWRUaW1lfScgK1xuICAgICAgICAnJmRyPSR7ZG9jdW1lbnRSZWZlcnJlcn0nICtcbiAgICAgICAgJyZwbHQ9JHtwYWdlTG9hZFRpbWV9JyArXG4gICAgICAgICcmdmFsXzEwOD0ke3RpdGxlfScgK1xuICAgICAgICAnJnZhbF8xMjA9MycsXG4gICAgfSxcbiAgICAndHJpZ2dlcnMnOiB7XG4gICAgICAnZGVmYXVsdFBhZ2V2aWV3Jzoge1xuICAgICAgICAnb24nOiAndmlzaWJsZScsXG4gICAgICAgICdyZXF1ZXN0JzogJ3BhZ2V2aWV3JyxcbiAgICAgIH0sXG4gICAgfSxcbiAgICAndHJhbnNwb3J0Jzoge1xuICAgICAgJ2JlYWNvbic6IGZhbHNlLFxuICAgICAgJ3hocnBvc3QnOiBmYWxzZSxcbiAgICAgICdpbWFnZSc6IHRydWUsXG4gICAgfSxcbiAgfSxcblxuICAnY29tc2NvcmUnOiB7XG4gICAgJ3ZhcnMnOiB7XG4gICAgICAnYzInOiAnMTAwMDAwMScsXG4gICAgfSxcbiAgICAncmVxdWVzdHMnOiB7XG4gICAgICAnaG9zdCc6ICdodHRwczovL3NiLnNjb3JlY2FyZHJlc2VhcmNoLmNvbScsXG4gICAgICAnYmFzZSc6ICcke2hvc3R9L2I/JyxcbiAgICAgICdwYWdldmlldyc6ICcke2Jhc2V9YzE9MicgK1xuICAgICAgICAnJmMyPSR7YzJ9JyArXG4gICAgICAgICcmY3NfcHY9JHtwYWdlVmlld0lkfScgK1xuICAgICAgICAnJmMxMj0ke2NsaWVudElkKGNvbVNjb3JlKX0nICtcbiAgICAgICAgJyZybj0ke3JhbmRvbX0nICtcbiAgICAgICAgJyZjOD0ke3RpdGxlfScgK1xuICAgICAgICAnJmM3PSR7Y2Fub25pY2FsVXJsfScgK1xuICAgICAgICAnJmM5PSR7ZG9jdW1lbnRSZWZlcnJlcn0nICtcbiAgICAgICAgJyZjc19jN2FtcD0ke2FtcGRvY1VybH0nLFxuICAgIH0sXG4gICAgJ3RyaWdnZXJzJzoge1xuICAgICAgJ2RlZmF1bHRQYWdldmlldyc6IHtcbiAgICAgICAgJ29uJzogJ3Zpc2libGUnLFxuICAgICAgICAncmVxdWVzdCc6ICdwYWdldmlldycsXG4gICAgICB9LFxuICAgIH0sXG4gICAgJ3RyYW5zcG9ydCc6IHtcbiAgICAgICdiZWFjb24nOiBmYWxzZSxcbiAgICAgICd4aHJwb3N0JzogZmFsc2UsXG4gICAgICAnaW1hZ2UnOiB0cnVlLFxuICAgIH0sXG4gIH0sXG5cbiAgJ2N4ZW5zZSc6IHtcbiAgICAncmVxdWVzdHMnOiB7XG4gICAgICAnaG9zdCc6ICdodHRwczovL3Njb21jbHVzdGVyLmN4ZW5zZS5jb20nLFxuICAgICAgJ2Jhc2UnOiAnJHtob3N0fS9SZXBvL3JlcC5naWYnLFxuICAgICAgJ3BhZ2V2aWV3JzogJyR7YmFzZX0/dmVyPTEmdHlwPXBndiZzaWQ9JHtzaXRlSWR9JmNrcD0ke2NsaWVudElkKGNYX1ApfSYnICtcbiAgICAgICAgICAnbG9jPSR7c291cmNlVXJsfSZybmQ9JHtyYW5kb219JnJlZj0ke2RvY3VtZW50UmVmZXJyZXJ9JicgK1xuICAgICAgICAgICdsdG09JHt0aW1lc3RhbXB9Jndzej0ke3NjcmVlbldpZHRofXgke3NjcmVlbkhlaWdodH0mJyArXG4gICAgICAgICAgJ2Jsbj0ke2Jyb3dzZXJMYW5ndWFnZX0mY2hzPSR7ZG9jdW1lbnRDaGFyc2V0fSYnICtcbiAgICAgICAgICAnY29sPSR7c2NyZWVuQ29sb3JEZXB0aH0mdHpvPSR7dGltZXpvbmV9JmNwX2N4X2NoYW5uZWw9YW1wJyxcbiAgICB9LFxuICAgICd0cmlnZ2Vycyc6IHtcbiAgICAgICdkZWZhdWx0UGFnZXZpZXcnOiB7XG4gICAgICAgICdvbic6ICd2aXNpYmxlJyxcbiAgICAgICAgJ3JlcXVlc3QnOiAncGFnZXZpZXcnLFxuICAgICAgfSxcbiAgICB9LFxuICAgICd0cmFuc3BvcnQnOiB7XG4gICAgICAnYmVhY29uJzogZmFsc2UsXG4gICAgICAneGhycG9zdCc6IGZhbHNlLFxuICAgICAgJ2ltYWdlJzogdHJ1ZSxcbiAgICB9LFxuICB9LFxuXG4gICdkeW5hdHJhY2UnOiB7XG4gICAgJ3JlcXVlc3RzJzoge1xuICAgICAgJ2VuZHBvaW50JzogJyR7cHJvdG9jb2x9Oi8vJHt0ZW5hbnR9JHtzZXBhcmF0b3J9JHtlbnZpcm9ubWVudH06JHtwb3J0fS9hbXBiZi8ke3RlbmFudHBhdGh9JyxcbiAgICAgICdwYWdldmlldyc6ICcke2VuZHBvaW50fT90eXBlPWpzJicgK1xuICAgICAgICAnZmxhdm9yPWFtcCYnICtcbiAgICAgICAgJ3Y9MSYnICtcbiAgICAgICAgJ2E9MSU3QzElN0NfbG9hZF8lN0NfbG9hZF8lN0MtJTdDJHtuYXZUaW1pbmcobmF2aWdhdGlvblN0YXJ0KX0lN0MnICtcblx0XHQnJHtuYXZUaW1pbmcoZG9tQ29udGVudExvYWRlZEV2ZW50RW5kKX0lN0MwJTJDMiU3QzIlN0Nfb25sb2FkXyU3QycgK1xuXHRcdCdfbG9hZF8lN0MtJTdDJHtuYXZUaW1pbmcoZG9tQ29udGVudExvYWRlZEV2ZW50U3RhcnQpfSU3QycgK1xuXHRcdCcke25hdlRpbWluZyhkb21Db250ZW50TG9hZGVkRXZlbnRFbmQpfSU3QzAmJyArXG4gICAgICAgICdmSWQ9JHtwYWdlVmlld0lkfSYnICtcbiAgICAgICAgJ3ZJRD0ke2NsaWVudElkKHJ4VmlzaXRvcil9JicgK1xuICAgICAgICAncmVmZXJlcj0ke3NvdXJjZVVybH0mJyArXG4gICAgICAgICd0aXRsZT0ke3RpdGxlfSYnICtcbiAgICAgICAgJ3N3PSR7c2NyZWVuV2lkdGh9JicgK1xuICAgICAgICAnc2g9JHtzY3JlZW5IZWlnaHR9JicgK1xuICAgICAgICAndz0ke3ZpZXdwb3J0V2lkdGh9JicgK1xuICAgICAgICAnaD0ke3ZpZXdwb3J0SGVpZ2h0fSYnICtcbiAgICAgICAgJ250PWEke25hdlR5cGV9JyArXG4gICAgICAgICdiJHtuYXZUaW1pbmcobmF2aWdhdGlvblN0YXJ0KX0nICtcbiAgICAgICAgJ2Mke25hdlRpbWluZyhuYXZpZ2F0aW9uU3RhcnQscmVkaXJlY3RTdGFydCl9JyArXG4gICAgICAgICdkJHtuYXZUaW1pbmcobmF2aWdhdGlvblN0YXJ0LHJlZGlyZWN0RW5kKX0nICtcbiAgICAgICAgJ2Uke25hdlRpbWluZyhuYXZpZ2F0aW9uU3RhcnQsZmV0Y2hTdGFydCl9JyArXG4gICAgICAgICdmJHtuYXZUaW1pbmcobmF2aWdhdGlvblN0YXJ0LGRvbWFpbkxvb2t1cFN0YXJ0KX0nICtcbiAgICAgICAgJ2cke25hdlRpbWluZyhuYXZpZ2F0aW9uU3RhcnQsZG9tYWluTG9va3VwRW5kKX0nICtcbiAgICAgICAgJ2gke25hdlRpbWluZyhuYXZpZ2F0aW9uU3RhcnQsY29ubmVjdFN0YXJ0KX0nICtcbiAgICAgICAgJ2kke25hdlRpbWluZyhuYXZpZ2F0aW9uU3RhcnQsY29ubmVjdEVuZCl9JyArXG4gICAgICAgICdqJHtuYXZUaW1pbmcobmF2aWdhdGlvblN0YXJ0LHNlY3VyZUNvbm5lY3Rpb25TdGFydCl9JyArXG4gICAgICAgICdrJHtuYXZUaW1pbmcobmF2aWdhdGlvblN0YXJ0LHJlcXVlc3RTdGFydCl9JyArXG4gICAgICAgICdsJHtuYXZUaW1pbmcobmF2aWdhdGlvblN0YXJ0LHJlc3BvbnNlU3RhcnQpfScgK1xuICAgICAgICAnbSR7bmF2VGltaW5nKG5hdmlnYXRpb25TdGFydCxyZXNwb25zZUVuZCl9JyArXG4gICAgICAgICduJHtuYXZUaW1pbmcobmF2aWdhdGlvblN0YXJ0LGRvbUxvYWRpbmcpfScgK1xuICAgICAgICAnbyR7bmF2VGltaW5nKG5hdmlnYXRpb25TdGFydCxkb21JbnRlcmFjdGl2ZSl9JyArXG4gICAgICAgICdwJHtuYXZUaW1pbmcobmF2aWdhdGlvblN0YXJ0LGRvbUNvbnRlbnRMb2FkZWRFdmVudFN0YXJ0KX0nICtcbiAgICAgICAgJ3Eke25hdlRpbWluZyhuYXZpZ2F0aW9uU3RhcnQsZG9tQ29udGVudExvYWRlZEV2ZW50RW5kKX0nICtcbiAgICAgICAgJ3Ike25hdlRpbWluZyhuYXZpZ2F0aW9uU3RhcnQsZG9tQ29tcGxldGUpfScgK1xuICAgICAgICAncyR7bmF2VGltaW5nKG5hdmlnYXRpb25TdGFydCxsb2FkRXZlbnRTdGFydCl9JyArXG4gICAgICAgICd0JHtuYXZUaW1pbmcobmF2aWdhdGlvblN0YXJ0LGxvYWRFdmVudEVuZCl9JicgK1xuICAgICAgICAnYXBwPSR7YXBwfSYnICtcbiAgICAgICAgJ3RpbWU9JHt0aW1lc3RhbXB9JyxcbiAgICB9LFxuICAgICd0cmlnZ2Vycyc6IHtcbiAgICAgICd0cmFja1BhZ2V2aWV3Jzoge1xuICAgICAgICAnb24nOiAndmlzaWJsZScsXG4gICAgICAgICdyZXF1ZXN0JzogJ3BhZ2V2aWV3JyxcbiAgICAgIH0sXG4gICAgfSxcbiAgICAndHJhbnNwb3J0Jzoge1xuICAgICAgJ2JlYWNvbic6IGZhbHNlLFxuICAgICAgJ3hocnBvc3QnOiBmYWxzZSxcbiAgICAgICdpbWFnZSc6IHRydWUsXG4gICAgfSxcbiAgICAndmFycyc6IHtcbiAgICAgICdhcHAnOiAnYW1wYXBwJyxcbiAgICAgICdwcm90b2NvbCc6ICdodHRwcycsXG4gICAgICAndGVuYW50JzogJycsXG4gICAgICAnZW52aXJvbm1lbnQnOiAnbGl2ZS5keW5hdHJhY2UuY29tJyxcbiAgICAgICdwb3J0JzogJzQ0MycsXG4gICAgICAnc2VwYXJhdG9yJzogJy4nLFxuICAgIH0sXG4gIH0sXG5cbiAgJ2V1bGVyaWFuYW5hbHl0aWNzJzoge1xuICAgICd2YXJzJzoge1xuICAgICAgJ2FuYWx5dGljc0hvc3QnOiAnJyxcbiAgICAgICdkb2N1bWVudExvY2F0aW9uJzogJ1NPVVJDRV9VUkwnLFxuICAgIH0sXG4gICAgJ3JlcXVlc3RzJzoge1xuICAgICAgJ2Jhc2UnOiAnaHR0cHM6Ly8ke2FuYWx5dGljc0hvc3R9JyxcbiAgICAgICdiYXNlUHJlZml4JzogJy0vJHtyYW5kb219PycgK1xuICAgICAgICAnZXVpZC1hbXA9JHtjbGllbnRJZChldHVpeCl9JicgK1xuICAgICAgICAndXJsPSR7ZG9jdW1lbnRMb2NhdGlvbn0mJyxcbiAgICAgICdwYWdldmlldyc6ICcke2Jhc2V9L2NvbDIvJHtiYXNlUHJlZml4fScgK1xuICAgICAgICAncmY9JHtleHRlcm5hbFJlZmVycmVyfSYnICtcbiAgICAgICAgJ3VybHA9JHtwYWdlUGF0aH0mJyArXG4gICAgICAgICdzcz0ke3NjcmVlbldpZHRofXgke3NjcmVlbkhlaWdodH0mJyArXG4gICAgICAgICdzZD0ke3NjcmVlbkNvbG9yRGVwdGh9JyxcbiAgICAgICdhY3Rpb24nOiAnJHtiYXNlfS9hY3Rpb24vJHtiYXNlUHJlZml4fScgK1xuICAgICAgICAnZWFjdD0ke2FjdGlvbkNvZGV9JicgK1xuICAgICAgICAnYWN0cj0ke2FjdGlvblJlZn0nLFxuICAgICAgJ3VzZXInOiAnJHtiYXNlfS91cGFyYW0vJHtiYXNlUHJlZml4fScgK1xuICAgICAgICAnZXVrJHt1c2VyUGFyYW1LZXl9PSR7dXNlclBhcmFtVmFsfScsXG4gICAgICAnY29udGV4dGZsYWcnOiAnJHtiYXNlfS9jZmxhZzIvJHtiYXNlUHJlZml4fScgK1xuICAgICAgICAnZWNmMGs9JHtjZmxhZ0tleX0mZWNmMHY9JHtjZmxhZ1ZhbH0nLFxuICAgIH0sXG4gICAgJ3RyYW5zcG9ydCc6IHtcbiAgICAgICdiZWFjb24nOiBmYWxzZSxcbiAgICAgICd4aHJwb3N0JzogZmFsc2UsXG4gICAgICAnaW1hZ2UnOiB0cnVlLFxuICAgIH0sXG4gIH0sXG5cbiAgJ2ZhY2Vib29rcGl4ZWwnOiB7XG4gICAgJ3ZhcnMnOiB7XG4gICAgICAncGl4ZWxJZCc6ICdQSVhFTC1JRCcsXG4gICAgfSxcbiAgICAncmVxdWVzdHMnOiB7XG4gICAgICAnaG9zdCc6ICdodHRwczovL3d3dy5mYWNlYm9vay5jb20nLFxuICAgICAgJ2Jhc2UnOiAnJHtob3N0fS90cj9ub3NjcmlwdD0xJyxcbiAgICAgICdwYWdldmlldyc6ICcke2Jhc2V9JmV2PVBhZ2VWaWV3JicgK1xuICAgICAgICAgICdpZD0ke3BpeGVsSWR9JyxcbiAgICAgICdldmVudCc6ICcke2Jhc2V9JmV2PSR7ZXZlbnROYW1lfSYnICtcbiAgICAgICAgICAnaWQ9JHtwaXhlbElkfScgK1xuICAgICAgICAgICcmY2RbY29udGVudF9uYW1lXT0ke2NvbnRlbnRfbmFtZX0nLFxuICAgICAgJ2V2ZW50Vmlld0NvbnRlbnQnOiAnJHtiYXNlfSZldj1WaWV3Q29udGVudCYnICtcbiAgICAgICAgICAnaWQ9JHtwaXhlbElkfScgK1xuICAgICAgICAgICcmY2RbdmFsdWVdPSR7dmFsdWV9JyArXG4gICAgICAgICAgJyZjZFtjdXJyZW5jeV09JHtjdXJyZW5jeX0nICtcbiAgICAgICAgICAnJmNkW2NvbnRlbnRfbmFtZV09JHtjb250ZW50X25hbWV9JyArXG4gICAgICAgICAgJyZjZFtjb250ZW50X3R5cGVdPSR7Y29udGVudF90eXBlfScgK1xuICAgICAgICAgICcmY2RbY29udGVudF9pZHNdPSR7Y29udGVudF9pZHN9JyxcbiAgICAgICdldmVudFNlYXJjaCc6ICcke2Jhc2V9JmV2PVNlYXJjaCYnICtcbiAgICAgICAgICAnaWQ9JHtwaXhlbElkfScgK1xuICAgICAgICAgICcmY2RbdmFsdWVdPSR7dmFsdWV9JyArXG4gICAgICAgICAgJyZjZFtjdXJyZW5jeV09JHtjdXJyZW5jeX0nICtcbiAgICAgICAgICAnJmNkW2NvbnRlbnRfY2F0ZWdvcnldPSR7Y29udGVudF9jYXRlZ29yeX0nICtcbiAgICAgICAgICAnJmNkW2NvbnRlbnRfaWRzXT0ke2NvbnRlbnRfaWRzfScgK1xuICAgICAgICAgICcmY2Rbc2VhcmNoX3N0cmluZ109JHtzZWFyY2hfc3RyaW5nfScsXG4gICAgICAnZXZlbnRBZGRUb0NhcnQnOiAnJHtiYXNlfSZldj1BZGRUb0NhcnQmJyArXG4gICAgICAgICAgJ2lkPSR7cGl4ZWxJZH0nICtcbiAgICAgICAgICAnJmNkW3ZhbHVlXT0ke3ZhbHVlfScgK1xuICAgICAgICAgICcmY2RbY3VycmVuY3ldPSR7Y3VycmVuY3l9JyArXG4gICAgICAgICAgJyZjZFtjb250ZW50X25hbWVdPSR7Y29udGVudF9uYW1lfScgK1xuICAgICAgICAgICcmY2RbY29udGVudF90eXBlXT0ke2NvbnRlbnRfdHlwZX0nICtcbiAgICAgICAgICAnJmNkW2NvbnRlbnRfaWRzXT0ke2NvbnRlbnRfaWRzfScsXG4gICAgICAnZXZlbnRBZGRUb1dpc2hsaXN0JzogJyR7YmFzZX0mZXY9QWRkVG9XaXNobGlzdCYnICtcbiAgICAgICAgICAnaWQ9JHtwaXhlbElkfScgK1xuICAgICAgICAgICcmY2RbdmFsdWVdPSR7dmFsdWV9JyArXG4gICAgICAgICAgJyZjZFtjdXJyZW5jeV09JHtjdXJyZW5jeX0nICtcbiAgICAgICAgICAnJmNkW2NvbnRlbnRfbmFtZV09JHtjb250ZW50X25hbWV9JyArXG4gICAgICAgICAgJyZjZFtjb250ZW50X2NhdGVnb3J5XT0ke2NvbnRlbnRfY2F0ZWdvcnl9JyArXG4gICAgICAgICAgJyZjZFtjb250ZW50X2lkc109JHtjb250ZW50X2lkc30nLFxuICAgICAgJ2V2ZW50SW5pdGlhdGVDaGVja291dCc6ICcke2Jhc2V9JmV2PUluaXRpYXRlQ2hlY2tvdXQmJyArXG4gICAgICAgICAgJ2lkPSR7cGl4ZWxJZH0nICtcbiAgICAgICAgICAnJmNkW3ZhbHVlXT0ke3ZhbHVlfScgK1xuICAgICAgICAgICcmY2RbY3VycmVuY3ldPSR7Y3VycmVuY3l9JyArXG4gICAgICAgICAgJyZjZFtjb250ZW50X25hbWVdPSR7Y29udGVudF9uYW1lfScgK1xuICAgICAgICAgICcmY2RbY29udGVudF9jYXRlZ29yeV09JHtjb250ZW50X2NhdGVnb3J5fScgK1xuICAgICAgICAgICcmY2RbbnVtX2l0ZW1zXT0ke251bV9pdGVtc30nICtcbiAgICAgICAgICAnJmNkW2NvbnRlbnRfaWRzXT0ke2NvbnRlbnRfaWRzfScsXG4gICAgICAnZXZlbnRBZGRQYXltZW50SW5mbyc6ICcke2Jhc2V9JmV2PUFkZFBheW1lbnRJbmZvJicgK1xuICAgICAgICAgICdpZD0ke3BpeGVsSWR9JyArXG4gICAgICAgICAgJyZjZFt2YWx1ZV09JHt2YWx1ZX0nICtcbiAgICAgICAgICAnJmNkW2N1cnJlbmN5XT0ke2N1cnJlbmN5fScgK1xuICAgICAgICAgICcmY2RbY29udGVudF9jYXRlZ29yeV09JHtjb250ZW50X2NhdGVnb3J5fScgK1xuICAgICAgICAgICcmY2RbY29udGVudF9pZHNdPSR7Y29udGVudF9pZHN9JyxcbiAgICAgICdldmVudFB1cmNoYXNlJzogJyR7YmFzZX0mZXY9UHVyY2hhc2UmJyArXG4gICAgICAgICAgJ2lkPSR7cGl4ZWxJZH0nICtcbiAgICAgICAgICAnJmNkW3ZhbHVlXT0ke3ZhbHVlfScgK1xuICAgICAgICAgICcmY2RbY3VycmVuY3ldPSR7Y3VycmVuY3l9JyArXG4gICAgICAgICAgJyZjZFtjb250ZW50X25hbWVdPSR7Y29udGVudF9uYW1lfScgK1xuICAgICAgICAgICcmY2RbY29udGVudF90eXBlXT0ke2NvbnRlbnRfdHlwZX0nICtcbiAgICAgICAgICAnJmNkW2NvbnRlbnRfaWRzXT0ke2NvbnRlbnRfaWRzfScgK1xuICAgICAgICAgICcmY2RbbnVtX2l0ZW1zXT0ke251bV9pdGVtc30nLFxuICAgICAgJ2V2ZW50TGVhZCc6ICcke2Jhc2V9JmV2PUxlYWQmJyArXG4gICAgICAgICAgJ2lkPSR7cGl4ZWxJZH0nICtcbiAgICAgICAgICAnJmNkW3ZhbHVlXT0ke3ZhbHVlfScgK1xuICAgICAgICAgICcmY2RbY3VycmVuY3ldPSR7Y3VycmVuY3l9JyArXG4gICAgICAgICAgJyZjZFtjb250ZW50X25hbWVdPSR7Y29udGVudF9uYW1lfScgK1xuICAgICAgICAgICcmY2RbY29udGVudF9jYXRlZ29yeV09JHtjb250ZW50X2NhdGVnb3J5fScsXG4gICAgICAnZXZlbnRDb21wbGV0ZVJlZ2lzdHJhdGlvbic6ICcke2Jhc2V9JmV2PUNvbXBsZXRlUmVnaXN0cmF0aW9uJicgK1xuICAgICAgICAgICdpZD0ke3BpeGVsSWR9JyArXG4gICAgICAgICAgJyZjZFt2YWx1ZV09JHt2YWx1ZX0nICtcbiAgICAgICAgICAnJmNkW2N1cnJlbmN5XT0ke2N1cnJlbmN5fScgK1xuICAgICAgICAgICcmY2RbY29udGVudF9uYW1lXT0ke2NvbnRlbnRfbmFtZX0nICtcbiAgICAgICAgICAnJmNkW3N0YXR1c109JHtzdGF0dXN9JyxcbiAgICB9LFxuICAgICd0cmlnZ2Vycyc6IHtcbiAgICAgICd0cmFja1BhZ2V2aWV3Jzoge1xuICAgICAgICAnb24nOiAndmlzaWJsZScsXG4gICAgICAgICdyZXF1ZXN0JzogJ3BhZ2V2aWV3JyxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSxcblxuICAnZ2VtaXVzJzoge1xuICAgICdyZXF1ZXN0cyc6IHtcbiAgICAgICdiYXNlJzogJ2h0dHBzOi8vJHtwcmVmaXh9LmhpdC5nZW1pdXMucGwvXyR7dGltZXN0YW1wfS9yZWRvdC5naWY/bD05MSZpZD0ke2lkZW50aWZpZXJ9JnNjcmVlbj0ke3NjcmVlbldpZHRofXgke3NjcmVlbkhlaWdodH0md2luZG93PSR7dmlld3BvcnRXaWR0aH14JHt2aWV3cG9ydEhlaWdodH0mZnI9MSZocmVmPSR7c291cmNlVXJsfSZyZWY9JHtkb2N1bWVudFJlZmVycmVyfSZleHRyYT1nZW1hbXAlM0QxJTdDYW1waWQlM0Qke2NsaWVudElkKGdlbWl1cyl9JTdDJHtleHRyYXBhcmFtc30nLFxuICAgICAgJ3BhZ2V2aWV3JzogJyR7YmFzZX0mZXQ9dmlldyZoc3JjPTEnLFxuICAgICAgJ2V2ZW50JzogJyR7YmFzZX0mZXQ9YWN0aW9uJmhzcmM9MycsXG4gICAgfSxcbiAgICAndHJpZ2dlcnMnOiB7XG4gICAgICAnZGVmYXVsdFBhZ2V2aWV3Jzoge1xuICAgICAgICAnb24nOiAndmlzaWJsZScsXG4gICAgICAgICdyZXF1ZXN0JzogJ3BhZ2V2aWV3JyxcbiAgICAgIH0sXG4gICAgfSxcbiAgICAndHJhbnNwb3J0Jzoge1xuICAgICAgJ2JlYWNvbic6IGZhbHNlLFxuICAgICAgJ3hocnBvc3QnOiBmYWxzZSxcbiAgICAgICdpbWFnZSc6IHRydWUsXG4gICAgfSxcbiAgfSxcblxuICAnZ29vZ2xlYWR3b3Jkcyc6IHsgLy8gaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vYWR3b3Jkcy9hbXAvbGFuZGluZy1wYWdlc1xuICAgICdyZXF1ZXN0cyc6IHtcbiAgICAgICdjb252ZXJzaW9uX3ByZWZpeCc6ICdodHRwczovL3d3dy5nb29nbGVhZHNlcnZpY2VzLmNvbS9wYWdlYWQvY29udmVyc2lvbi8nLFxuICAgICAgJ3JlbWFya2V0aW5nX3ByZWZpeCc6XG4gICAgICAgICAgJ2h0dHBzOi8vZ29vZ2xlYWRzLmcuZG91YmxlY2xpY2submV0L3BhZ2VhZC92aWV3dGhyb3VnaGNvbnZlcnNpb24vJyxcbiAgICAgICdjb21tb25fcGFyYW1zJzogJyR7Z29vZ2xlQ29udmVyc2lvbklkfS8/JyArXG4gICAgICAgICAgJ2N2PWFtcDImJyArIC8vIEluY3JlbWVudCB3aGVuIG1ha2luZyBjaGFuZ2VzLlxuICAgICAgICAgICdsYWJlbD0ke2dvb2dsZUNvbnZlcnNpb25MYWJlbH0mJyArXG4gICAgICAgICAgJ3JhbmRvbT0ke3JhbmRvbX0mJyArXG4gICAgICAgICAgJ3VybD0ke3NvdXJjZVVybH0mJyArXG4gICAgICAgICAgJ3JlZj0ke2RvY3VtZW50UmVmZXJyZXJ9JicgK1xuICAgICAgICAgICdmc3Q9JHtwYWdlVmlld0lkfSYnICtcbiAgICAgICAgICAnbnVtPSR7Y291bnRlcihnb29nbGVhZHdvcmRzKX0mJyArXG4gICAgICAgICAgJ2ZtdD0zJicgK1xuICAgICAgICAgICdhc3luYz0xJicgK1xuICAgICAgICAgICd1X2g9JHtzY3JlZW5IZWlnaHR9JnVfdz0ke3NjcmVlbldpZHRofSYnICtcbiAgICAgICAgICAndV9haD0ke2F2YWlsYWJsZVNjcmVlbkhlaWdodH0mdV9hdz0ke2F2YWlsYWJsZVNjcmVlbldpZHRofSYnICtcbiAgICAgICAgICAndV9jZD0ke3NjcmVlbkNvbG9yRGVwdGh9JicgK1xuICAgICAgICAgICd1X3R6PSR7dGltZXpvbmV9JicgK1xuICAgICAgICAgICd0aWJhPSR7dGl0bGV9JicgK1xuICAgICAgICAgICdndWlkPU9OJnNjcmlwdD0wJyxcbiAgICAgICdjb252ZXJzaW9uX3BhcmFtcyc6ICd2YWx1ZT0ke2dvb2dsZUNvbnZlcnNpb25WYWx1ZX0mJyArXG4gICAgICAgICAgJ2N1cnJlbmN5X2NvZGU9JHtnb29nbGVDb252ZXJzaW9uQ3VycmVuY3l9JicgK1xuICAgICAgICAgICdiZz0ke2dvb2dsZUNvbnZlcnNpb25Db2xvcn0mJyArXG4gICAgICAgICAgJ2hsPSR7Z29vZ2xlQ29udmVyc2lvbkxhbmd1YWdlfScsXG4gICAgICAnY29udmVyc2lvbic6ICcke2NvbnZlcnNpb25fcHJlZml4fSR7Y29tbW9uX3BhcmFtc30mJHtjb252ZXJzaW9uX3BhcmFtc30nLFxuICAgICAgJ3JlbWFya2V0aW5nJzogJyR7cmVtYXJrZXRpbmdfcHJlZml4fSR7Y29tbW9uX3BhcmFtc30nLFxuICAgIH0sXG4gICAgJ3RyYW5zcG9ydCc6IHtcbiAgICAgICdiZWFjb24nOiBmYWxzZSxcbiAgICAgICd4aHJwb3N0JzogZmFsc2UsXG4gICAgICAnaW1hZ2UnOiB0cnVlLFxuICAgIH0sXG4gIH0sXG5cbiAgJ2d0YWcnOiB7XG4gICAgJ2NvbmZpZ1Jld3JpdGVyJzoge1xuICAgICAgJ3VybCc6ICdodHRwczovL3d3dy5nb29nbGV0YWdtYW5hZ2VyLmNvbS9ndGFnL2FtcCcsXG4gICAgfSxcbiAgICAndmFycyc6IHtcbiAgICAgICdldmVudFZhbHVlJzogJzAnLFxuICAgICAgJ2RvY3VtZW50TG9jYXRpb24nOiAnU09VUkNFX1VSTCcsXG4gICAgICAnY2xpZW50SWQnOiAnQ0xJRU5UX0lEKEFNUF9FQ0lEX0dPT0dMRSwsX2dhKScsXG4gICAgICAnZGF0YVNvdXJjZSc6ICdBTVAnLFxuICAgICAgJ2Fub255bWl6ZUlQJzogJ2FpcCcsXG4gICAgICAnZXJyb3JQYXJhbSc6ICcke2Vycm9yTmFtZX0tJHtlcnJvck1lc3NhZ2V9JyxcbiAgICB9LFxuICAgICdyZXF1ZXN0cyc6IHtcbiAgICAgICd1YUhvc3QnOiAnaHR0cHM6Ly93d3cuZ29vZ2xlLWFuYWx5dGljcy5jb20nLFxuICAgICAgJ3VhQmFzZVByZWZpeCc6XG4gICAgICAgICAgJ3Y9MSYnICtcbiAgICAgICAgICAgJ192PWExJicgK1xuICAgICAgICAgICAnZHM9JHtkYXRhU291cmNlfSYnICtcbiAgICAgICAgICAgJyR7YW5vbnltaXplSVB9JicgK1xuICAgICAgICAgICAnX3M9JHtyZXF1ZXN0Q291bnR9JicgK1xuICAgICAgICAgICAnZHQ9JHt0aXRsZX0mJyArXG4gICAgICAgICAgICdzcj0ke3NjcmVlbldpZHRofXgke3NjcmVlbkhlaWdodH0mJyArXG4gICAgICAgICAgICdjaWQ9JHtjbGllbnRJZH0mJyArXG4gICAgICAgICAgICd0aWQ9JHt0cmFja2luZ0lkfSYnICtcbiAgICAgICAgICAgJ2RsPSR7ZG9jdW1lbnRMb2NhdGlvbn0mJyArXG4gICAgICAgICAgICdkcj0ke2V4dGVybmFsUmVmZXJyZXJ9JicgK1xuICAgICAgICAgICAnc2Q9JHtzY3JlZW5Db2xvckRlcHRofSYnICtcbiAgICAgICAgICAgJ3VsPSR7YnJvd3Nlckxhbmd1YWdlfSYnICtcbiAgICAgICAgICAgJ2RlPSR7ZG9jdW1lbnRDaGFyc2V0fScsXG4gICAgICAndWFCYXNlU3VmZml4JzpcbiAgICAgICAgICAnJmE9JHtwYWdlVmlld0lkfSYnICtcbiAgICAgICAgICAgJ3o9JHtyYW5kb219JyxcbiAgICAgICd1YVBhZ2V2aWV3Q29tbW9uJzpcbiAgICAgICAgICAgJyZ0PXBhZ2V2aWV3JicgK1xuICAgICAgICAgICAnamlkPSR7cmFuZG9tfSYnICtcbiAgICAgICAgICAgJ2dqaWQ9JHtyYW5kb219JicgK1xuICAgICAgICAgICAnX3I9MScsXG4gICAgICAndWFQYWdldmlldyc6XG4gICAgICAgICAgJyR7dWFIb3N0fS9yL2NvbGxlY3Q/JHt1YUJhc2VQcmVmaXh9JyArXG4gICAgICAgICAgICcke3VhUGFnZXZpZXdDb21tb259JyArXG4gICAgICAgICAgICcke3VhQmFzZVN1ZmZpeH0nLFxuICAgICAgJ3VhUGFnZXZpZXdOcGEnOlxuICAgICAgICAgICcke3VhSG9zdH0vY29sbGVjdD8ke3VhQmFzZVByZWZpeH0nICtcbiAgICAgICAgICAgJyR7dWFQYWdldmlld0NvbW1vbn0nICtcbiAgICAgICAgICAgJyR7dWFCYXNlU3VmZml4fScsXG4gICAgICAndWFFdmVudCc6XG4gICAgICAgICAgJyR7dWFIb3N0fS9jb2xsZWN0PyR7dWFCYXNlUHJlZml4fSYnICtcbiAgICAgICAgICAgJ3Q9ZXZlbnQmJyArXG4gICAgICAgICAgICdqaWQ9JyArXG4gICAgICAgICAgICcke3VhQmFzZVN1ZmZpeH0nLFxuICAgICAgJ3VhVGltaW5nJzpcbiAgICAgICAgICAnJHt1YUhvc3R9L2NvbGxlY3Q/JHt1YUJhc2VQcmVmaXh9JicgK1xuICAgICAgICAgICAnamlkPSYnICtcbiAgICAgICAgICAgJ3BsdD0ke3BhZ2VMb2FkVGltZX0mJyArXG4gICAgICAgICAgICdkbnM9JHtkb21haW5Mb29rdXBUaW1lfSYnICtcbiAgICAgICAgICAgJ3RjcD0ke3RjcENvbm5lY3RUaW1lfSYnICtcbiAgICAgICAgICAgJ3JydD0ke3JlZGlyZWN0VGltZX0mJyArXG4gICAgICAgICAgICdzcnQ9JHtzZXJ2ZXJSZXNwb25zZVRpbWV9JicgK1xuICAgICAgICAgICAncGR0PSR7cGFnZURvd25sb2FkVGltZX0mJyArXG4gICAgICAgICAgICdjbHQ9JHtjb250ZW50TG9hZFRpbWV9JicgK1xuICAgICAgICAgICAnZGl0PSR7ZG9tSW50ZXJhY3RpdmVUaW1lfScgK1xuICAgICAgICAgICAnJHt1YUJhc2VTdWZmaXh9JyxcbiAgICAgICd1YUVycm9yJzpcbiAgICAgICAgICAnJHt1YUhvc3R9L2NvbGxlY3Q/JHt1YUJhc2VQcmVmaXh9JicgK1xuICAgICAgICAgICAndD1leGNlcHRpb24mJyArXG4gICAgICAgICAgICdleGQ9JHtlcnJvclBhcmFtfScgK1xuICAgICAgICAgICAnJHt1YUJhc2VTdWZmaXh9JyxcbiAgICAgICdhd0NvbnZlcnNpb25QcmVmaXgnOlxuICAgICAgICAgICdodHRwczovL3d3dy5nb29nbGVhZHNlcnZpY2VzLmNvbS9wYWdlYWQvY29udmVyc2lvbi8nLFxuICAgICAgJ2F3UmVtYXJrZXRpbmdQcmVmaXgnOlxuICAgICAgICAgICdodHRwczovL2dvb2dsZWFkcy5nLmRvdWJsZWNsaWNrLm5ldC9wYWdlYWQvdmlld3Rocm91Z2hjb252ZXJzaW9uLycsXG4gICAgICAnYXdDb21tb25QYXJhbXMnOlxuICAgICAgICAgICcke2NvbnZlcnNpb25JZH0vPycgK1xuICAgICAgICAgICAnY3Y9YW1wMyYnICsgLy8gSW5jcmVtZW50IHdoZW4gbWFraW5nIGNoYW5nZXMuXG4gICAgICAgICAgICdsYWJlbD0ke2NvbnZlcnNpb25MYWJlbH0mJyArXG4gICAgICAgICAgICdyYW5kb209JHtyYW5kb219JicgK1xuICAgICAgICAgICAndXJsPSR7c291cmNlVXJsfSYnICtcbiAgICAgICAgICAgJ3JlZj0ke2RvY3VtZW50UmVmZXJyZXJ9JicgK1xuICAgICAgICAgICAnZnN0PSR7cGFnZVZpZXdJZH0mJyArXG4gICAgICAgICAgICdudW09JHtjb3VudGVyKGdvb2dsZWFkd29yZHMpfSYnICtcbiAgICAgICAgICAgJ2ZtdD0zJicgK1xuICAgICAgICAgICAnYXN5bmM9MSYnICtcbiAgICAgICAgICAgJ3VfaD0ke3NjcmVlbkhlaWdodH0mdV93PSR7c2NyZWVuV2lkdGh9JicgK1xuICAgICAgICAgICAndV9haD0ke2F2YWlsYWJsZVNjcmVlbkhlaWdodH0mdV9hdz0ke2F2YWlsYWJsZVNjcmVlbldpZHRofSYnICtcbiAgICAgICAgICAgJ3VfY2Q9JHtzY3JlZW5Db2xvckRlcHRofSYnICtcbiAgICAgICAgICAgJ3VfdHo9JHt0aW1lem9uZX0mJyArXG4gICAgICAgICAgICd0aWJhPSR7dGl0bGV9JicgK1xuICAgICAgICAgICAnZ3VpZD1PTiZzY3JpcHQ9MCcsXG4gICAgICAnYXdDb252ZXJzaW9uJzogJyR7YXdDb252ZXJzaW9uUHJlZml4fSR7YXdDb21tb25QYXJhbXN9JyxcbiAgICAgICdhd1JlbWFya2V0aW5nJzogJyR7YXdSZW1hcmtldGluZ1ByZWZpeH0ke2F3Q29tbW9uUGFyYW1zfScsXG4gICAgICAnZmxCYXNlJzogJ2h0dHBzOi8vYWQuZG91YmxlY2xpY2submV0L2FjdGl2aXR5O3NyYz0ke2ZsU3JjfTt0eXBlPSR7ZmxUeXBlfTtjYXQ9JHtmbENhdH0nLFxuICAgIH0sXG4gICAgJ3RyYW5zcG9ydCc6IHtcbiAgICAgICdiZWFjb24nOiBmYWxzZSxcbiAgICAgICd4aHJwb3N0JzogZmFsc2UsXG4gICAgICAnaW1hZ2UnOiB0cnVlLFxuICAgIH0sXG4gIH0sXG5cbiAgJ2dvb2dsZWFuYWx5dGljcyc6IHtcbiAgICAndmFycyc6IHtcbiAgICAgICdldmVudFZhbHVlJzogJzAnLFxuICAgICAgJ2RvY3VtZW50TG9jYXRpb24nOiAnU09VUkNFX1VSTCcsXG4gICAgICAnY2xpZW50SWQnOiAnQ0xJRU5UX0lEKEFNUF9FQ0lEX0dPT0dMRSwsX2dhKScsXG4gICAgICAnZGF0YVNvdXJjZSc6ICdBTVAnLFxuICAgICAgJ2Fub255bWl6ZUlQJzogJ2FpcCcsXG4gICAgICAnZXJyb3JQYXJhbSc6ICcke2Vycm9yTmFtZX0tJHtlcnJvck1lc3NhZ2V9JyxcbiAgICB9LFxuICAgICdyZXF1ZXN0cyc6IHtcbiAgICAgICdob3N0JzogJ2h0dHBzOi8vd3d3Lmdvb2dsZS1hbmFseXRpY3MuY29tJyxcbiAgICAgICdiYXNlUHJlZml4JzogJ3Y9MSYnICtcbiAgICAgICAgICAnX3Y9YTEmJyArXG4gICAgICAgICAgJ2RzPSR7ZGF0YVNvdXJjZX0mJyArXG4gICAgICAgICAgJyR7YW5vbnltaXplSVB9JicgK1xuICAgICAgICAgICdfcz0ke3JlcXVlc3RDb3VudH0mJyArXG4gICAgICAgICAgJ2R0PSR7dGl0bGV9JicgK1xuICAgICAgICAgICdzcj0ke3NjcmVlbldpZHRofXgke3NjcmVlbkhlaWdodH0mJyArXG4gICAgICAgICAgJ191dG1odD0ke3RpbWVzdGFtcH0mJyArXG4gICAgICAgICAgJ2NpZD0ke2NsaWVudElkfSYnICtcbiAgICAgICAgICAndGlkPSR7YWNjb3VudH0mJyArXG4gICAgICAgICAgJ2RsPSR7ZG9jdW1lbnRMb2NhdGlvbn0mJyArXG4gICAgICAgICAgJ2RyPSR7ZXh0ZXJuYWxSZWZlcnJlcn0mJyArXG4gICAgICAgICAgJ3NkPSR7c2NyZWVuQ29sb3JEZXB0aH0mJyArXG4gICAgICAgICAgJ3VsPSR7YnJvd3Nlckxhbmd1YWdlfSYnICtcbiAgICAgICAgICAnZGU9JHtkb2N1bWVudENoYXJzZXR9JyxcbiAgICAgICdiYXNlU3VmZml4JzogJyZhPSR7cGFnZVZpZXdJZH0mJyArXG4gICAgICAgICAgJ3o9JHtyYW5kb219JyxcbiAgICAgICdwYWdldmlldyc6ICcke2hvc3R9L3IvY29sbGVjdD8ke2Jhc2VQcmVmaXh9JicgK1xuICAgICAgICAgICd0PXBhZ2V2aWV3JicgK1xuICAgICAgICAgICdqaWQ9JHtyYW5kb219JicgK1xuICAgICAgICAgICdfcj0xJyArXG4gICAgICAgICAgJyR7YmFzZVN1ZmZpeH0nLFxuICAgICAgJ2V2ZW50JzogJyR7aG9zdH0vY29sbGVjdD8ke2Jhc2VQcmVmaXh9JicgK1xuICAgICAgICAgICd0PWV2ZW50JicgK1xuICAgICAgICAgICdqaWQ9JicgK1xuICAgICAgICAgICdlYz0ke2V2ZW50Q2F0ZWdvcnl9JicgK1xuICAgICAgICAgICdlYT0ke2V2ZW50QWN0aW9ufSYnICtcbiAgICAgICAgICAnZWw9JHtldmVudExhYmVsfSYnICtcbiAgICAgICAgICAnZXY9JHtldmVudFZhbHVlfScgK1xuICAgICAgICAgICcke2Jhc2VTdWZmaXh9JyxcbiAgICAgICdzb2NpYWwnOiAnJHtob3N0fS9jb2xsZWN0PyR7YmFzZVByZWZpeH0mJyArXG4gICAgICAgICAgJ3Q9c29jaWFsJicgK1xuICAgICAgICAgICdqaWQ9JicgK1xuICAgICAgICAgICdzYT0ke3NvY2lhbEFjdGlvbn0mJyArXG4gICAgICAgICAgJ3NuPSR7c29jaWFsTmV0d29ya30mJyArXG4gICAgICAgICAgJ3N0PSR7c29jaWFsVGFyZ2V0fScgK1xuICAgICAgICAgICcke2Jhc2VTdWZmaXh9JyxcbiAgICAgICd0aW1pbmcnOiAnJHtob3N0fS9jb2xsZWN0PyR7YmFzZVByZWZpeH0mJyArXG4gICAgICAgICAgJ3Q9JHt0aW1pbmdSZXF1ZXN0VHlwZX0mJyArXG4gICAgICAgICAgJ2ppZD0mJyArXG4gICAgICAgICAgJ3BsdD0ke3BhZ2VMb2FkVGltZX0mJyArXG4gICAgICAgICAgJ2Rucz0ke2RvbWFpbkxvb2t1cFRpbWV9JicgK1xuICAgICAgICAgICd0Y3A9JHt0Y3BDb25uZWN0VGltZX0mJyArXG4gICAgICAgICAgJ3JydD0ke3JlZGlyZWN0VGltZX0mJyArXG4gICAgICAgICAgJ3NydD0ke3NlcnZlclJlc3BvbnNlVGltZX0mJyArXG4gICAgICAgICAgJ3BkdD0ke3BhZ2VEb3dubG9hZFRpbWV9JicgK1xuICAgICAgICAgICdjbHQ9JHtjb250ZW50TG9hZFRpbWV9JicgK1xuICAgICAgICAgICdkaXQ9JHtkb21JbnRlcmFjdGl2ZVRpbWV9JyArXG4gICAgICAgICAgJyR7YmFzZVN1ZmZpeH0nLFxuICAgICAgJ2Vycm9yJzogJyR7aG9zdH0vY29sbGVjdD8ke2Jhc2VQcmVmaXh9JicgK1xuICAgICAgICAgICd0PWV4Y2VwdGlvbiYnICtcbiAgICAgICAgICAnZXhkPSR7ZXJyb3JQYXJhbX0nICtcbiAgICAgICAgICAnJHtiYXNlU3VmZml4fScsXG4gICAgfSxcbiAgICAndHJpZ2dlcnMnOiB7XG4gICAgICAncGVyZm9ybWFuY2VUaW1pbmcnOiB7XG4gICAgICAgICdvbic6ICd2aXNpYmxlJyxcbiAgICAgICAgJ3JlcXVlc3QnOiAndGltaW5nJyxcbiAgICAgICAgJ3NhbXBsZVNwZWMnOiB7XG4gICAgICAgICAgJ3NhbXBsZU9uJzogJyR7Y2xpZW50SWR9JyxcbiAgICAgICAgICAndGhyZXNob2xkJzogMSxcbiAgICAgICAgfSxcbiAgICAgICAgJ3ZhcnMnOiB7XG4gICAgICAgICAgJ3RpbWluZ1JlcXVlc3RUeXBlJzogJ3RpbWluZycsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgJ2Fkd29yZHNUaW1pbmcnOiB7XG4gICAgICAgICdvbic6ICd2aXNpYmxlJyxcbiAgICAgICAgJ3JlcXVlc3QnOiAndGltaW5nJyxcbiAgICAgICAgJ2VuYWJsZWQnOiAnJHtxdWVyeVBhcmFtKGdjbGlkKX0nLFxuICAgICAgICAndmFycyc6IHtcbiAgICAgICAgICAndGltaW5nUmVxdWVzdFR5cGUnOiAnYWR0aW1pbmcnLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICAgICdleHRyYVVybFBhcmFtc1JlcGxhY2VNYXAnOiB7XG4gICAgICAnZGltZW5zaW9uJzogJ2NkJyxcbiAgICAgICdtZXRyaWMnOiAnY20nLFxuICAgIH0sXG4gICAgJ29wdG91dCc6ICdfZ2FVc2VyUHJlZnMuaW9vJyxcbiAgfSxcblxuICAnbG90YW1lJzoge1xuICAgICdyZXF1ZXN0cyc6IHtcbiAgICAgICdwYWdldmlldyc6ICdodHRwczovL2JjcC5jcndkY250cmwubmV0L2FtcD9jPSR7YWNjb3VudH0mcHY9eScsXG4gICAgfSxcbiAgICAndHJpZ2dlcnMnOiB7XG4gICAgICAndHJhY2sgcGFnZXZpZXcnOiB7XG4gICAgICAgICdvbic6ICd2aXNpYmxlJyxcbiAgICAgICAgJ3JlcXVlc3QnOiAncGFnZXZpZXcnLFxuICAgICAgfSxcbiAgICB9LFxuICAgICd0cmFuc3BvcnQnOiB7XG4gICAgICAnYmVhY29uJzogZmFsc2UsXG4gICAgICAneGhycG9zdCc6IGZhbHNlLFxuICAgICAgJ2ltYWdlJzogdHJ1ZSxcbiAgICB9LFxuICB9LFxuXG4gICdtYXJpbnNvZnR3YXJlJzoge1xuICAgICdyZXF1ZXN0cyc6IHtcbiAgICAgICdiYXNlJzogJ2h0dHBzOi8vdHJhY2tlci5tYXJpbnNtLmNvbS90cCcsXG4gICAgICAnYmFzZVBhcmFtcyc6ICdjaWQ9JHt0cmFja2VySWR9JyArXG4gICAgICAgICcmYW1wVmVyc2lvbj0ke2FtcFZlcnNpb259JyArXG4gICAgICAgICcmZHM9QU1QJyArXG4gICAgICAgICcmcmVmPSR7ZXh0ZXJuYWxSZWZlcnJlcn0nICtcbiAgICAgICAgJyZwYWdlPSR7c291cmNlVXJsfScgK1xuICAgICAgICAnJnV1aWQ9JHtjbGllbnRJZChtYXJpbl9hbXBfaWQpfScgK1xuICAgICAgICAnJnJuZD0ke3JhbmRvbX0nLFxuICAgICAgJ3BhZ2VWaWV3JzogJyR7YmFzZX0/JyArXG4gICAgICAgICcke2Jhc2VQYXJhbXN9JyArXG4gICAgICAgICcmYWN0PTEnLFxuICAgICAgJ2NvbnZlcnNpb24nOiAnJHtiYXNlfT8nICtcbiAgICAgICAgJyR7YmFzZVBhcmFtc30nICtcbiAgICAgICAgJyZhY3Q9MicgK1xuICAgICAgICAnJnRyYW5zPVVUTTpJJyArXG4gICAgICAgICAgJ3wke29yZGVySWR9JyArXG4gICAgICAgICAgJ3wke21hcmluQ29udmVyc2lvblR5cGV9JyArXG4gICAgICAgICAgJ3wke3Byb2R1Y3ROYW1lfScgK1xuICAgICAgICAgICd8JHtjYXRlZ29yeX0nICtcbiAgICAgICAgICAnfCR7cHJpY2V9JyArXG4gICAgICAgICAgJ3wke3F1YW50aXR5fScsXG4gICAgfSxcbiAgICAndHJhbnNwb3J0Jzoge1xuICAgICAgJ2JlYWNvbic6IHRydWUsXG4gICAgICAneGhycG9zdCc6IGZhbHNlLFxuICAgICAgJ2ltYWdlJzogdHJ1ZSxcbiAgICB9LFxuICB9LFxuXG4gICdtZWRpYW1ldHJpZSc6IHtcbiAgICAncmVxdWVzdHMnOiB7XG4gICAgICAnaG9zdCc6ICdodHRwczovL3Byb2YuZXN0YXQuY29tL20vd2ViJyxcbiAgICAgICdwYWdldmlldyc6ICcke2hvc3R9LyR7c2VyaWFsfT8nICtcbiAgICAgICAgJ2M9JHtsZXZlbDF9JyArXG4gICAgICAgICcmZG9tPSR7YW1wZG9jVXJsfScgK1xuICAgICAgICAnJmVuYz0ke2RvY3VtZW50Q2hhcnNldH0nICtcbiAgICAgICAgJyZsMz0ke2xldmVsM30nICtcbiAgICAgICAgJyZsND0ke2xldmVsNH0nICtcbiAgICAgICAgJyZuPSR7cmFuZG9tfScgK1xuICAgICAgICAnJnA9JHtsZXZlbDJ9JyArXG4gICAgICAgICcmcj0ke2RvY3VtZW50UmVmZXJyZXJ9JyArXG4gICAgICAgICcmc2NoPSR7c2NyZWVuSGVpZ2h0fScgK1xuICAgICAgICAnJnNjdz0ke3NjcmVlbldpZHRofScgK1xuICAgICAgICAnJnRuPWFtcCcgK1xuICAgICAgICAnJnY9MScgK1xuICAgICAgICAnJnZoPSR7YXZhaWxhYmxlU2NyZWVuSGVpZ2h0fScgK1xuICAgICAgICAnJnZ3PSR7YXZhaWxhYmxlU2NyZWVuV2lkdGh9JyxcbiAgICB9LFxuICAgICd0cmlnZ2Vycyc6IHtcbiAgICAgICd0cmFja1BhZ2V2aWV3Jzoge1xuICAgICAgICAnb24nOiAndmlzaWJsZScsXG4gICAgICAgICdyZXF1ZXN0JzogJ3BhZ2V2aWV3JyxcbiAgICAgIH0sXG4gICAgfSxcbiAgICAndHJhbnNwb3J0Jzoge1xuICAgICAgJ2JlYWNvbic6IGZhbHNlLFxuICAgICAgJ3hocnBvc3QnOiBmYWxzZSxcbiAgICAgICdpbWFnZSc6IHRydWUsXG4gICAgfSxcbiAgfSxcblxuICAnbWVkaWFyaXRobWljcyc6IHtcbiAgICAndmFycyc6IHtcbiAgICAgICdkb21haW4nOiAnZXZlbnRzLm1lZGlhcml0aG1pY3MuY29tJyxcbiAgICAgICd1cmwnOiAnU09VUkNFX1VSTCcsXG4gICAgICAnZXZlbnRfbmFtZSc6ICckcGFnZV92aWV3JyxcbiAgICAgICdyZWZlcnJlcic6ICdET0NVTUVOVF9SRUZFUlJFUicsXG4gICAgfSxcbiAgICAncmVxdWVzdHMnOiB7XG4gICAgICAnaG9zdCc6ICdodHRwczovLyR7ZG9tYWlufScsXG4gICAgICAncGFnZXZpZXcnOiAnJHtob3N0fS92MS92aXNpdHMvcGl4ZWw/JyArXG4gICAgICAgICckc2l0ZV90b2tlbj0ke3NpdGVfdG9rZW59JyArXG4gICAgICAgICcmJHVybD0ke3VybH0nICtcbiAgICAgICAgJyYkZXY9JHtldmVudF9uYW1lfScgK1xuICAgICAgICAnJiRyZWZlcnJlcj0ke3JlZmVycmVyfScsXG4gICAgfSxcbiAgICAndHJpZ2dlcnMnOiB7XG4gICAgICAndHJhY2tQYWdldmlldyc6IHtcbiAgICAgICAgJ29uJzogJ3Zpc2libGUnLFxuICAgICAgICAncmVxdWVzdCc6ICdwYWdldmlldycsXG4gICAgICB9LFxuICAgIH0sXG4gICAgJ3RyYW5zcG9ydCc6IHtcbiAgICAgICdiZWFjb24nOiBmYWxzZSxcbiAgICAgICd4aHJwb3N0JzogZmFsc2UsXG4gICAgICAnaW1hZ2UnOiB0cnVlLFxuICAgIH0sXG4gIH0sXG5cbiAgJ21lZGlhdG9yJzoge1xuICAgICdyZXF1ZXN0cyc6IHtcbiAgICAgICdob3N0JzogJy8vY29sbGVjdG9yLm1lZGlhdG9yLm1lZGlhL3NjcmlwdC8ke21lZGlhdG9yX2lkfS9hbXAvJyxcbiAgICAgICdyZW5kZXJzdGFydCc6ICcke2hvc3R9aW5pdC8/dXJsPSR7Y2Fub25pY2FsVXJsfScsXG4gICAgICAncHJlZml4JzogJyR7aG9zdH1yZWdpc3Rlci8/dXJsPSR7Y2Fub25pY2FsVXJsfScgK1xuICAgICAgICAgICAgICAgICcmcmVmPSR7ZG9jdW1lbnRSZWZlcnJlcn0mJyxcbiAgICAgICdzdWZmaXgnOiAndmg9JHt2aWV3cG9ydEhlaWdodH0mc2g9JHtzY3JvbGxIZWlnaHR9JnN0PSR7c2Nyb2xsVG9wfScsXG4gICAgICAncGFnZXZpZXcnOiAnJHtwcmVmaXh9ZT12JyxcbiAgICAgICd0aW1lcic6ICcke3ByZWZpeH1lPXQmJHtzdWZmaXh9JyxcbiAgICAgICdzMCc6ICcke3ByZWZpeH1lPXMwJyxcbiAgICAgICdzMSc6ICcke3ByZWZpeH1lPXMxJyxcbiAgICAgICdzMic6ICcke3ByZWZpeH1lPXMyJyxcbiAgICAgICdzMyc6ICcke3ByZWZpeH1lPXMzJyxcbiAgICB9LFxuICAgICd2YXJzJzoge1xuICAgICAgJ21lZGlhdG9yX2lkJzogJycsXG4gICAgfSxcbiAgICAndHJpZ2dlcnMnOiB7XG4gICAgICAncmVuZGVyU3RhcnQnOiB7XG4gICAgICAgICdvbic6ICdyZW5kZXItc3RhcnQnLFxuICAgICAgICAncmVxdWVzdCc6ICdyZW5kZXJzdGFydCcsXG4gICAgICB9LFxuICAgICAgJ3RyYWNrUGFnZXZpZXcnOiB7XG4gICAgICAgICdvbic6ICd2aXNpYmxlJyxcbiAgICAgICAgJ3JlcXVlc3QnOiAncGFnZXZpZXcnLFxuICAgICAgfSxcbiAgICAgICdzY3JvbGxQaW5nMCc6IHtcbiAgICAgICAgJ29uJzogJ3Njcm9sbCcsXG4gICAgICAgICdzY3JvbGxTcGVjJzoge1xuICAgICAgICAgICd2ZXJ0aWNhbEJvdW5kYXJpZXMnOiBbXG4gICAgICAgICAgICA1LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgICdyZXF1ZXN0JzogJ3MwJyxcbiAgICAgIH0sXG4gICAgICAnc2Nyb2xsUGluZzEnOiB7XG4gICAgICAgICdvbic6ICdzY3JvbGwnLFxuICAgICAgICAnc2Nyb2xsU3BlYyc6IHtcbiAgICAgICAgICAndmVydGljYWxCb3VuZGFyaWVzJzogW1xuICAgICAgICAgICAgMzUsXG4gICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAgJ3JlcXVlc3QnOiAnczEnLFxuICAgICAgfSxcbiAgICAgICdzY3JvbGxQaW5nMic6IHtcbiAgICAgICAgJ29uJzogJ3Njcm9sbCcsXG4gICAgICAgICdzY3JvbGxTcGVjJzoge1xuICAgICAgICAgICd2ZXJ0aWNhbEJvdW5kYXJpZXMnOiBbXG4gICAgICAgICAgICA2NSxcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgICAncmVxdWVzdCc6ICdzMicsXG4gICAgICB9LFxuICAgICAgJ3Njcm9sbFBpbmczJzoge1xuICAgICAgICAnb24nOiAnc2Nyb2xsJyxcbiAgICAgICAgJ3Njcm9sbFNwZWMnOiB7XG4gICAgICAgICAgJ3ZlcnRpY2FsQm91bmRhcmllcyc6IFtcbiAgICAgICAgICAgIDk1LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgICdyZXF1ZXN0JzogJ3MzJyxcbiAgICAgIH0sXG4gICAgICAncGFnZVRpbWVyJzoge1xuICAgICAgICAnb24nOiAndGltZXInLFxuICAgICAgICAndGltZXJTcGVjJzoge1xuICAgICAgICAgICdpbnRlcnZhbCc6IDUsXG4gICAgICAgICAgJ21heFRpbWVyTGVuZ3RoJzogNjAwLFxuICAgICAgICAgICdpbW1lZGlhdGUnOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgICAgJ3JlcXVlc3QnOiAndGltZXInLFxuICAgICAgfSxcbiAgICB9LFxuICB9LFxuXG4gICdtZXRyaWthJzoge1xuICAgICd0cmFuc3BvcnQnOiB7J2JlYWNvbic6IHRydWUsICd4aHJwb3N0JzogdHJ1ZSwgJ2ltYWdlJzogZmFsc2V9LFxuICAgICdyZXF1ZXN0cyc6IHtcbiAgICAgICdwYWdldmlldyc6ICcke193YXRjaH0/YnJvd3Nlci1pbmZvPSR7X2JySW5mb30mJHtfc2l0ZUluZm99JiR7X3N1ZmZpeH0nLFxuICAgICAgJ25vdEJvdW5jZSc6ICcke193YXRjaH0/YnJvd3Nlci1pbmZvPWFyJTNBMSUzQW5iJTNBMSUzQSR7X2JySW5mb30nICtcbiAgICAgICAgJyYke19zdWZmaXh9JyxcbiAgICAgICdleHRlcm5hbExpbmsnOiAnJHtfd2F0Y2h9P2Jyb3dzZXItaW5mbz1sbiUzQTElM0Eke19ickluZm99JiR7X3N1ZmZpeH0nLFxuICAgICAgJ3JlYWNoR29hbCc6ICcke193YXRjaH0/YnJvd3Nlci1pbmZvPWFyJTNBMSUzQSR7X2JySW5mb30mJHtfc2l0ZUluZm99JyArXG4gICAgICAgICcmJHtfZ29hbFN1ZmZpeH0nLFxuICAgICAgJ19kb21haW4nOiAnaHR0cHM6Ly9tYy55YW5kZXgucnUnLFxuICAgICAgJ193YXRjaCc6ICcke19kb21haW59L3dhdGNoLyR7Y291bnRlcklkfScsXG4gICAgICAnX3N1ZmZpeCc6ICdwYWdlLXVybD0ke3NvdXJjZVVybH0mcGFnZS1yZWY9JHtkb2N1bWVudFJlZmVycmVyfScsXG4gICAgICAnX2dvYWxTdWZmaXgnOiAncGFnZS11cmw9Z29hbCUzQSUyRiUyRiR7c291cmNlSG9zdH0lMkYke2dvYWxJZH0nICtcbiAgICAgICcmcGFnZS1yZWY9JHtzb3VyY2VVcmx9JyxcbiAgICAgICdfdGVjaEluZm8nOiBbXG4gICAgICAgICdhbXAlM0ExJTNBeiUzQSR7dGltZXpvbmV9JTNBaSUzQSR7dGltZXN0YW1wfSUzQXJuJTNBJHtyYW5kb219JyxcbiAgICAgICAgJ2xhJTNBJHticm93c2VyTGFuZ3VhZ2V9JTNBZW4lM0Eke2RvY3VtZW50Q2hhcnNldH0nLFxuICAgICAgICAncnFuJTNBJHtyZXF1ZXN0Q291bnR9JyxcbiAgICAgICAgJ3MlM0Eke3NjcmVlbldpZHRofXgke3NjcmVlbkhlaWdodH14JHtzY3JlZW5Db2xvckRlcHRofScsXG4gICAgICAgICd3JTNBJHthdmFpbGFibGVTY3JlZW5XaWR0aH14JHthdmFpbGFibGVTY3JlZW5IZWlnaHR9JyxcbiAgICAgICAgJ2RzJTNBJHtfdGltaW5nc30lM0F1aWQlM0Eke2NsaWVudElkKF95bV91aWQpfSUzQXB2aWQlM0Eke3BhZ2VWaWV3SWR9JyxcbiAgICAgIF0uam9pbignJTNBJyksXG4gICAgICAnX3RpbWluZ3MnOiBbXG4gICAgICAgICcke2RvbWFpbkxvb2t1cFRpbWV9JTJDJHt0Y3BDb25uZWN0VGltZX0nLFxuICAgICAgICAnJHtzZXJ2ZXJSZXNwb25zZVRpbWV9JTJDJHtwYWdlRG93bmxvYWRUaW1lfScsXG4gICAgICAgICcke3JlZGlyZWN0VGltZX0lMkMke25hdlRpbWluZyhyZWRpcmVjdFN0YXJ0LHJlZGlyZWN0RW5kKX0nLFxuICAgICAgICAnJHtuYXZSZWRpcmVjdENvdW50fSUyQyR7bmF2VGltaW5nKGRvbUxvYWRpbmcsZG9tSW50ZXJhY3RpdmUpfScsXG4gICAgICAgICcke25hdlRpbWluZyhkb21Db250ZW50TG9hZGVkRXZlbnRTdGFydCxkb21Db250ZW50TG9hZGVkRXZlbnRFbmQpfScsXG4gICAgICAgICcke25hdlRpbWluZyhuYXZpZ2F0aW9uU3RhcnQsZG9tQ29tcGxldGUpfScsXG4gICAgICAgICcke3BhZ2VMb2FkVGltZX0lMkMke25hdlRpbWluZyhsb2FkRXZlbnRTdGFydCxsb2FkRXZlbnRFbmQpfScsXG4gICAgICAgICcke2NvbnRlbnRMb2FkVGltZX0nLFxuICAgICAgXS5qb2luKCclMkMnKSxcbiAgICAgICdfYnJJbmZvJzogJyR7X3RlY2hJbmZvfSUzQSR7X3RpdGxlfScsXG4gICAgICAnX3RpdGxlJzogJ3QlM0Eke3RpdGxlfScsXG4gICAgICAnX3NpdGVJbmZvJzogJ3NpdGUtaW5mbz0ke3lhUGFyYW1zfScsXG4gICAgfSxcbiAgICAndHJpZ2dlcnMnOiB7XG4gICAgICAncGFnZXZpZXcnOiB7XG4gICAgICAgICdvbic6ICd2aXNpYmxlJyxcbiAgICAgICAgJ3JlcXVlc3QnOiAncGFnZXZpZXcnLFxuICAgICAgfSxcbiAgICB9LFxuICB9LFxuXG4gICdtb2JpZnknOiB7XG4gICAgJ3ZhcnMnOiB7XG4gICAgICAncHJvamVjdFNsdWcnOiAnbW9iaWZ5LXByb2plY3QtaWQnLFxuICAgICAgJ3RlbXBsYXRlTmFtZSc6ICdwYWdlLXR5cGUnLFxuICAgIH0sXG4gICAgJ3JlcXVlc3RzJzoge1xuICAgICAgJ19ob3N0JzogJ2h0dHBzOi8vZW5nYWdlbWVudC1jb2xsZWN0b3IubW9iaWZ5Lm5ldCcsXG4gICAgICAnX2RpbWVuc2lvbnMnOiBbXG4gICAgICAgICclMjJwbGF0Zm9ybSUyMiUzYSUyMkFNUCUyMicsXG4gICAgICAgICclMjJjbGllbnRfaWQlMjIlM2ElMjIke2NsaWVudElkKHNhbmR5LWNsaWVudC1pZCl9JTIyJyxcbiAgICAgICAgJyUyMnRpdGxlJTIyJTNhJTIyJHt0aXRsZX0lMjInLFxuICAgICAgICAnJTIybG9jYXRpb24lMjIlM2ElMjIke3NvdXJjZVVybH0lMjInLFxuICAgICAgICAnJTIycGFnZSUyMiUzYSUyMiR7c291cmNlUGF0aH0lMjInLFxuICAgICAgICAnJTIyc3JjX2xvY2F0aW9uJTIyJTNhJTIyJHthbXBkb2NVcmx9JTIyJyxcbiAgICAgICAgJyUyMnJlZmVycmVyJTIyJTNhJTIyJHtkb2N1bWVudFJlZmVycmVyfSUyMicsXG4gICAgICAgICclMjJ0ZW1wbGF0ZU5hbWUlMjIlM2ElMjIke3RlbXBsYXRlTmFtZX0lMjInLFxuICAgICAgXS5qb2luKCclMmMnKSxcbiAgICAgICdfYmFzZVByZWZpeCc6ICcke19ob3N0fS9zLmdpZj8nICtcbiAgICAgICAgJ3NsdWc9JHtwcm9qZWN0U2x1Z30mJyArXG4gICAgICAgICd0aW1lc3RhbXBfbG9jYWw9JHt0aW1lc3RhbXB9JicgK1xuICAgICAgICAnY2hhbm5lbD13ZWImJyArXG4gICAgICAgICdkaW1lbnNpb25zPSU3YiR7X2RpbWVuc2lvbnN9JTdkJyxcbiAgICAgICdhbXBzdGFydCc6ICcke19iYXNlUHJlZml4fSZkYXRhPSU3YiUyMmNhdGVnb3J5JTIyJTNhJTIydGltaW5nJTIyJTJjJyArXG4gICAgICAgICclMjJhY3Rpb24lMjIlM2ElMjJhbXBTdGFydCUyMiUyYyUyMnZhbHVlJTIyJyArXG4gICAgICAgICclM2Eke25hdlRpbWluZyhuYXZpZ2F0aW9uU3RhcnQsZG9tTG9hZGluZyl9JTdkJyxcbiAgICAgICdwYWdldmlldyc6ICcke19iYXNlUHJlZml4fSZkYXRhPSU3YiUyMmFjdGlvbiUyMiUzYSUyMnBhZ2V2aWV3JTIyJTdkJyxcbiAgICAgICdwYWdlbG9hZCc6ICcke19iYXNlUHJlZml4fSZkYXRhPSU3YiUyMmNhdGVnb3J5JTIyJTNhJTIydGltaW5nJTIyJTJjJyArXG4gICAgICAgICclMjJhY3Rpb24lMjIlM2ElMjJsb2FkJTIyJTJjJTIydmFsdWUlMjIlM2Eke3BhZ2VMb2FkVGltZX0lN2QnLFxuICAgICAgJ3BhZ2VkY2wnOiAnJHtfYmFzZVByZWZpeH0mZGF0YT0lN2IlMjJjYXRlZ29yeSUyMiUzYSUyMnRpbWluZyUyMiUyYycgK1xuICAgICAgICAnJTIyYWN0aW9uJTIyJTNhJTIyRE9NQ29udGVudExvYWRlZCUyMiUyYyUyMnZhbHVlJTIyJyArXG4gICAgICAgICclM2Eke2NvbnRlbnRMb2FkVGltZX0lN2QnLFxuICAgIH0sXG4gICAgJ3RyaWdnZXJzJzoge1xuICAgICAgJ3RyaWdnZXJOYW1lJzoge1xuICAgICAgICAnb24nOiAndmlzaWJsZScsXG4gICAgICAgICdyZXF1ZXN0JzogWydhbXBzdGFydCcsICdwYWdlbG9hZCcsICdwYWdlZGNsJ10sXG4gICAgICB9LFxuICAgICAgJ3BhZ2V2aWV3Jzoge1xuICAgICAgICAnb24nOiAnaW5pLWxvYWQnLFxuICAgICAgICAncmVxdWVzdCc6ICdwYWdldmlldycsXG4gICAgICB9LFxuICAgIH0sXG4gICAgJ3RyYW5zcG9ydCc6IHtcbiAgICAgICdiZWFjb24nOiB0cnVlLFxuICAgICAgJ3hocnBvc3QnOiBmYWxzZSxcbiAgICAgICdpbWFnZSc6IHRydWUsXG4gICAgfSxcbiAgfSxcblxuICAnbXBhcnRpY2xlJzoge1xuICAgICd2YXJzJzoge1xuICAgICAgJ2V2ZW50VHlwZSc6ICdVbmtub3duJyxcbiAgICAgICdkZWJ1Zyc6IGZhbHNlLFxuICAgICAgJ2FtcF9jbGllbnRJZCc6ICdDTElFTlRfSUQobXBhcnRpY2xlX2FtcF9pZCknLFxuICAgIH0sXG4gICAgJ3JlcXVlc3RzJzoge1xuICAgICAgJ2hvc3QnOiAnaHR0cHM6Ly9waXhlbHMubXBhcnRpY2xlLmNvbScsXG4gICAgICAnZW5kcG9pbnRQYXRoJzogJy92MS8ke2FwaUtleX0vUGl4ZWwnLFxuICAgICAgJ2Jhc2VQYXJhbXMnOiAnZXQ9JHtldmVudFR5cGV9JicgK1xuICAgICAgICAgICdhbXBfaWQ9JHthbXBfY2xpZW50SWR9JicgK1xuICAgICAgICAgICdhdHRyc19rPSR7ZXZlbnRBdHRyaWJ1dGVzX0tleXN9JicgK1xuICAgICAgICAgICdhdHRyc192PSR7ZXZlbnRBdHRyaWJ1dGVzX1ZhbHVlc30mJyArXG4gICAgICAgICAgJ3VhX2s9JHt1c2VyQXR0cmlidXRlc19LZXlzfSYnICtcbiAgICAgICAgICAndWFfdj0ke3VzZXJBdHRyaWJ1dGVzX1ZhbHVlc30mJyArXG4gICAgICAgICAgJ3VpX3Q9JHt1c2VySWRlbnRpdGllc19UeXBlc30mJyArXG4gICAgICAgICAgJ3VpX3Y9JHt1c2VySWRlbnRpdGllc19WYWx1ZXN9JicgK1xuICAgICAgICAgICdmbGFnc19rPSR7Y3VzdG9tRmxhZ3NfS2V5c30mJyArXG4gICAgICAgICAgJ2ZsYWdzX3Y9JHtjdXN0b21GbGFnc19WYWx1ZXN9JicgK1xuICAgICAgICAgICdjdD0ke3RpbWVzdGFtcH0mJyArXG4gICAgICAgICAgJ2RiZz0ke2RlYnVnfSYnICtcbiAgICAgICAgICAnbGM9JHtsb2NhdGlvbn0mJyArXG4gICAgICAgICAgJ2F2PSR7YXBwVmVyc2lvbn0nLFxuICAgICAgJ3BhZ2V2aWV3JzogJyR7aG9zdH0ke2VuZHBvaW50UGF0aH0/JyArXG4gICAgICAgICAgJ2R0PVNjcmVlblZpZXcmJyArXG4gICAgICAgICAgJ249JHtjYW5vbmljYWxQYXRofSYnICtcbiAgICAgICAgICAnaG49JHthbXBkb2NVcmx9JicgK1xuICAgICAgICAgICd0dGw9JHt0aXRsZX0mJyArXG4gICAgICAgICAgJyR7YmFzZVBhcmFtc30nLFxuICAgICAgJ2V2ZW50JzogJyR7aG9zdH0ke2VuZHBvaW50UGF0aH0/JyArXG4gICAgICAgICAgJ2R0PUFwcEV2ZW50JicgK1xuICAgICAgICAgICduPSR7ZXZlbnROYW1lfSYnICtcbiAgICAgICAgICAnJHtiYXNlUGFyYW1zfScsXG4gICAgfSxcbiAgICAndHJhbnNwb3J0Jzoge1xuICAgICAgJ2JlYWNvbic6IGZhbHNlLFxuICAgICAgJ3hocnBvc3QnOiBmYWxzZSxcbiAgICAgICdpbWFnZSc6IHRydWUsXG4gICAgfSxcbiAgfSxcblxuICAnbmV3cmVsaWMnOiB7XG4gICAgJ3JlcXVlc3RzJzoge1xuICAgICAgJ3BhZ2V2aWV3JzogJ2h0dHBzOi8vJHtiZWFjb259L2FtcD9hcHBJZD0ke2FwcElkfScgK1xuICAgICAgICAnJmxpY2Vuc2VLZXk9JHtsaWNlbnNlS2V5fScgK1xuICAgICAgICAnJmFtcFVybD0ke2FtcGRvY1VybH0nICtcbiAgICAgICAgJyZjYW5vbmljYWxVcmw9JHtjYW5vbmljYWxVcmx9JyArXG4gICAgICAgICcmdGltZVRvRG9tQ29udGVudExvYWRlZEV2ZW50RW5kPScgK1xuICAgICAgICAgICcke25hdlRpbWluZyhkb21Db250ZW50TG9hZGVkRXZlbnRFbmQpfScgK1xuICAgICAgICAnJnRpbWVUb0RvbUludGVyYWN0aXZlPSR7bmF2VGltaW5nKGRvbUludGVyYWN0aXZlKX0nICtcbiAgICAgICAgJyZ0aW1lVG9Eb21Db21wbGV0ZT0ke25hdlRpbWluZyhkb21Db21wbGV0ZSl9JyArXG4gICAgICAgICcmdGltZVRvRG9tTG9hZGluZz0ke25hdlRpbWluZyhkb21Mb2FkaW5nKX0nICtcbiAgICAgICAgJyZ0aW1lVG9SZXNwb25zZVN0YXJ0PSR7bmF2VGltaW5nKHJlc3BvbnNlU3RhcnQpfScgK1xuICAgICAgICAnJnRpbWVUb1Jlc3BvbnNlRW5kPSR7bmF2VGltaW5nKHJlc3BvbnNlRW5kKX0nICtcbiAgICAgICAgJyZ0aW1lVG9Mb2FkRXZlbnRTdGFydD0ke25hdlRpbWluZyhsb2FkRXZlbnRTdGFydCl9JyArXG4gICAgICAgICcmdGltZVRvTG9hZEV2ZW50RW5kPSR7bmF2VGltaW5nKGxvYWRFdmVudEVuZCl9JyArXG4gICAgICAgICcmdGltZVRvQ29ubmVjdFN0YXJ0PSR7bmF2VGltaW5nKGNvbm5lY3RTdGFydCl9JyArXG4gICAgICAgICcmdGltZVRvQ29ubmVjdEVuZD0ke25hdlRpbWluZyhjb25uZWN0RW5kKX0nICtcbiAgICAgICAgJyZ0aW1lVG9GZXRjaFN0YXJ0PSR7bmF2VGltaW5nKGZldGNoU3RhcnQpfScgK1xuICAgICAgICAnJnRpbWVUb1JlcXVlc3RTdGFydD0ke25hdlRpbWluZyhyZXF1ZXN0U3RhcnQpfScgK1xuICAgICAgICAnJnRpbWVUb1VubG9hZEV2ZW50U3RhcnQ9JHtuYXZUaW1pbmcodW5sb2FkRXZlbnRTdGFydCl9JyArXG4gICAgICAgICcmdGltZVRvVW5sb2FkRXZlbnRFbmQ9JHtuYXZUaW1pbmcodW5sb2FkRXZlbnRFbmQpfScgK1xuICAgICAgICAnJnRpbWVUb0RvbWFpbkxvb2t1cFN0YXJ0PSR7bmF2VGltaW5nKGRvbWFpbkxvb2t1cFN0YXJ0KX0nICtcbiAgICAgICAgJyZ0aW1lVG9Eb21haW5Mb29rdXBFbmQ9JHtuYXZUaW1pbmcoZG9tYWluTG9va3VwRW5kKX0nICtcbiAgICAgICAgJyZ0aW1lVG9SZWRpcmVjdFN0YXJ0PSR7bmF2VGltaW5nKHJlZGlyZWN0U3RhcnQpfScgK1xuICAgICAgICAnJnRpbWVUb1JlZGlyZWN0RW5kPSR7bmF2VGltaW5nKHJlZGlyZWN0RW5kKX0nICtcbiAgICAgICAgJyZ0aW1lVG9TZWN1cmVDb25uZWN0aW9uPSR7bmF2VGltaW5nKHNlY3VyZUNvbm5lY3Rpb25TdGFydCl9JyArXG4gICAgICAgICcmdGltZXN0YW1wPSR7dGltZXN0YW1wfScgK1xuICAgICAgICAnJmFtcFZlcnNpb249JHthbXBWZXJzaW9ufScgK1xuICAgICAgICAnJnBhZ2VMb2FkVGltZT0ke3BhZ2VMb2FkVGltZX0nLFxuICAgIH0sXG4gICAgJ3ZhcnMnOiB7XG4gICAgICAnYmVhY29uJzogJ2JhbS5uci1kYXRhLm5ldCcsXG4gICAgICAnYXBwSWQnOiBbXSxcbiAgICAgICdsaWNlbnNlS2V5JzogJycsXG4gICAgfSxcbiAgICAndHJpZ2dlcnMnOiB7XG4gICAgICAndHJhY2tQYWdldmlldyc6IHtcbiAgICAgICAgJ29uJzogJ2luaS1sb2FkJyxcbiAgICAgICAgJ3JlcXVlc3QnOiAncGFnZXZpZXcnLFxuICAgICAgfSxcbiAgICB9LFxuICB9LFxuXG4gICduaWVsc2VuJzoge1xuICAgICd2YXJzJzoge1xuICAgICAgJ3Nlc3Npb25JZCc6ICdDTElFTlRfSUQoaW1yd29ybGR3aWRlKScsXG4gICAgICAncHJlZml4JzogJycsXG4gICAgfSxcbiAgICAncmVxdWVzdHMnOiB7XG4gICAgICAnc2Vzc2lvbic6ICdodHRwczovLyR7cHJlZml4fXVhaWQtbGlua2FnZS5pbXJ3b3JsZHdpZGUuY29tL2NnaS1iaW4vZ24/cHJkPXNlc3Npb24mYzEzPWFzaWQsUCR7YXBpZH0mc2Vzc2lvbklkPSR7c2Vzc2lvbklkfV8ke3BhZ2VWaWV3SWR9JnBpbmd0eXBlPTQmZW5jPWZhbHNlJmM2MT1jcmVhdGV0bSwke3RpbWVzdGFtcH0mcm5kPSR7cmFuZG9tfScsXG4gICAgICAnY2xvdWRhcGknOiAnaHR0cHM6Ly8ke3ByZWZpeH1jbG91ZGFwaS5pbXJ3b3JsZHdpZGUuY29tL25tYXBpL3YyLyR7YXBpZH0vJHtzZXNzaW9uSWR9XyR7cGFnZVZpZXdJZH0vYT9iPSU3QiUyMmRldkluZm8lMjIlM0ElN0IlMjJkZXZJZCUyMiUzQSUyMiR7c2Vzc2lvbklkfV8ke3BhZ2VWaWV3SWR9JTIyJTJDJTIyYXBuJTIyJTNBJTIyJHthcG59JTIyJTJDJTIyYXB2JTIyJTNBJTIyJHthcHZ9JTIyJTJDJTIyYXBpZCUyMiUzQSUyMiR7YXBpZH0lMjIlN0QlMkMlMjJtZXRhZGF0YSUyMiUzQSU3QiUyMnN0YXRpYyUyMiUzQSU3QiUyMnR5cGUlMjIlM0ElMjJzdGF0aWMlMjIlMkMlMjJzZWN0aW9uJTIyJTNBJTIyJHtzZWN0aW9ufSUyMiUyQyUyMmFzc2V0aWQlMjIlM0ElMjIke3BhZ2VWaWV3SWR9JTIyJTJDJTIyc2VnQSUyMiUzQSUyMiR7c2VnQX0lMjIlMkMlMjJzZWdCJTIyJTNBJTIyJHtzZWdCfSUyMiUyQyUyMnNlZ0MlMjIlM0ElMjIke3NlZ0N9JTIyJTJDJTIyYWRNb2RlbCUyMiUzQSUyMjAlMjIlMkMlMjJkYXRhU3JjJTIyJTNBJTIyY21zJTIyJTdEJTJDJTIyY29udGVudCUyMiUzQSU3QiU3RCUyQyUyMmFkJTIyJTNBJTdCJTdEJTdEJTJDJTIyZXZlbnQlMjIlM0ElMjJwbGF5aGVhZCUyMiUyQyUyMnBvc2l0aW9uJTIyJTNBJTIyJHt0aW1lc3RhbXB9JTIyJTJDJTIyZGF0YSUyMiUzQSU3QiUyMmhpZGRlbiUyMiUzQSUyMiR7YmFja2dyb3VuZFN0YXRlfSUyMiUyQyUyMmJsdXIlMjIlM0ElMjIke2JhY2tncm91bmRTdGF0ZX0lMjIlMkMlMjJwb3NpdGlvbiUyMiUzQSUyMiR7dGltZXN0YW1wfSUyMiU3RCUyQyUyMnR5cGUlMjIlM0ElMjJzdGF0aWMlMjIlMkMlMjJ1dGMlMjIlM0ElMjIke3RpbWVzdGFtcH0lMjIlMkMlMjJpbmRleCUyMiUzQSUyMiR7cmVxdWVzdENvdW50fSUyMiU3RCcsXG4gICAgfSxcbiAgICAndHJpZ2dlcnMnOiB7XG4gICAgICAndmlzaWJsZSc6IHtcbiAgICAgICAgJ29uJzogJ3Zpc2libGUnLFxuICAgICAgICAncmVxdWVzdCc6IFsnc2Vzc2lvbicsICdjbG91ZGFwaSddLFxuICAgICAgfSxcbiAgICAgICdoaWRkZW4nOiB7XG4gICAgICAgICdvbic6ICdoaWRkZW4nLFxuICAgICAgICAncmVxdWVzdCc6ICdjbG91ZGFwaScsXG4gICAgICB9LFxuICAgICAgJ2R1cmF0aW9uJzoge1xuICAgICAgICAnb24nOiAndGltZXInLFxuICAgICAgICAndGltZXJTcGVjJzoge1xuICAgICAgICAgICdpbnRlcnZhbCc6IDEwLFxuICAgICAgICAgICdtYXhUaW1lckxlbmd0aCc6IDg2NDAwLFxuICAgICAgICAgICdpbW1lZGlhdGUnOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgICAgJ3JlcXVlc3QnOiAnY2xvdWRhcGknLFxuICAgICAgfSxcbiAgICB9LFxuICAgICd0cmFuc3BvcnQnOiB7XG4gICAgICAnYmVhY29uJzogZmFsc2UsXG4gICAgICAneGhycG9zdCc6IGZhbHNlLFxuICAgICAgJ2ltYWdlJzogdHJ1ZSxcbiAgICAgICdyZWZlcnJlclBvbGljeSc6ICduby1yZWZlcnJlcicsXG4gICAgfSxcbiAgfSxcblxuICAnbmllbHNlbi1tYXJrZXRpbmctY2xvdWQnOiB7XG4gICAgJ3RyYW5zcG9ydCc6IHtcbiAgICAgICdiZWFjb24nOiBmYWxzZSxcbiAgICAgICd4aHJwb3N0JzogZmFsc2UsXG4gICAgICAnaW1hZ2UnOiB0cnVlLFxuICAgIH0sXG4gICAgJ3ZhcnMnOiB7XG4gICAgICAncHViSWQnOiAnJyxcbiAgICAgICdzaXRlSWQnOiAnJyxcbiAgICB9LFxuICAgICdyZXF1ZXN0cyc6IHtcbiAgICAgICdob3N0JzogJ2xvYWRldS5leGVsYXRvci5jb20nLFxuICAgICAgJ3BhdGhQcmVmaXgnOiAnbG9hZC8nLFxuICAgICAgJ3RyYWNrdXJsJzogJ2h0dHBzOi8vJHtob3N0fS8ke3BhdGhQcmVmaXh9P3A9JHtwdWJJZH0mZz0ke3NpdGVJZH0maj0wJyxcbiAgICB9LFxuICAgICd0cmlnZ2Vycyc6IHtcbiAgICAgICdkZWZhdWx0UGFnZXZpZXcnOiB7XG4gICAgICAgICdvbic6ICd2aXNpYmxlJyxcbiAgICAgICAgJ3JlcXVlc3QnOiAndHJhY2t1cmwnLFxuICAgICAgfSxcbiAgICB9LFxuICB9LFxuXG4gICdvZXdhZGlyZWN0Jzoge1xuICAgICd0cmFuc3BvcnQnOiB7J2JlYWNvbic6IGZhbHNlLCAneGhycG9zdCc6IGZhbHNlLCAnaW1hZ2UnOiB0cnVlfSxcbiAgICAncmVxdWVzdHMnOiB7XG4gICAgICAncGFnZXZpZXcnOiAnaHR0cHM6Ly8ke3N9Lm9ld2Fib3guYXQvajA9LCwscj0ke2Nhbm9uaWNhbFVybH07KyxhbXA9MStjcD0ke2NwfStzc2w9MStobj0ke2Nhbm9uaWNhbEhvc3R9Ozs7P2x0PSR7cGFnZVZpZXdJZH0meD0ke3NjcmVlbldpZHRofXgke3NjcmVlbkhlaWdodH14MjQmYz1DTElFTlRfSUQob2V3YSknLFxuICAgIH0sXG4gICAgJ3RyaWdnZXJzJzoge1xuICAgICAgJ3BhZ2V2aWV3Jzoge1xuICAgICAgICAnb24nOiAndmlzaWJsZScsXG4gICAgICAgICdyZXF1ZXN0JzogJ3BhZ2V2aWV3JyxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSxcblxuICAnb2V3YSc6IHtcbiAgICAndHJhbnNwb3J0JzogeydiZWFjb24nOiBmYWxzZSwgJ3hocnBvc3QnOiBmYWxzZSwgJ2ltYWdlJzogdHJ1ZX0sXG4gICAgJ3JlcXVlc3RzJzoge1xuICAgICAgJ3BhZ2V2aWV3JzogJyR7dXJsfT9zPSR7c30nICtcbiAgICAgICAgJyZhbXA9MScgK1xuICAgICAgICAnJmNwPSR7Y3B9JyArXG4gICAgICAgICcmaG9zdD0ke2Nhbm9uaWNhbEhvc3R9JyArXG4gICAgICAgICcmcGF0aD0ke2Nhbm9uaWNhbFBhdGh9JyxcbiAgICB9LFxuICAgICd0cmlnZ2Vycyc6IHtcbiAgICAgICdwYWdldmlldyc6IHtcbiAgICAgICAgJ29uJzogJ3Zpc2libGUnLFxuICAgICAgICAncmVxdWVzdCc6ICdwYWdldmlldycsXG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG4gICdwYXJzZWx5Jzoge1xuICAgICdyZXF1ZXN0cyc6IHtcbiAgICAgICdob3N0JzogJ2h0dHBzOi8vc3J2LnBpeGVsLnBhcnNlbHkuY29tJyxcbiAgICAgICdiYXNlUHJlZml4JzogJyR7aG9zdH0vcGxvZ2dlci8/JyArXG4gICAgICAgICdyYW5kPSR7dGltZXN0YW1wfSYnICtcbiAgICAgICAgJ2lkc2l0ZT0ke2FwaWtleX0mJyArXG4gICAgICAgICd1cmw9JHthbXBkb2NVcmx9JicgK1xuICAgICAgICAndXJscmVmPSR7ZG9jdW1lbnRSZWZlcnJlcn0mJyArXG4gICAgICAgICdzY3JlZW49JHtzY3JlZW5XaWR0aH14JHtzY3JlZW5IZWlnaHR9JTdDJyArXG4gICAgICAgICAgJyR7YXZhaWxhYmxlU2NyZWVuV2lkdGh9eCR7YXZhaWxhYmxlU2NyZWVuSGVpZ2h0fSU3QycgK1xuICAgICAgICAgICcke3NjcmVlbkNvbG9yRGVwdGh9JicgK1xuICAgICAgICAndGl0bGU9JHt0aXRsZX0mJyArXG4gICAgICAgICdkYXRlPSR7dGltZXN0YW1wfSYnICtcbiAgICAgICAgJ2FtcGlkPSR7Y2xpZW50SWQoX3BhcnNlbHlfdmlzaXRvcil9JyxcbiAgICAgICdwYWdldmlldyc6ICcke2Jhc2VQcmVmaXh9JmFjdGlvbj1wYWdldmlldycsXG4gICAgICAnaGVhcnRiZWF0JzogJyR7YmFzZVByZWZpeH0mYWN0aW9uPWhlYXJ0YmVhdCcgK1xuICAgICAgJyZ0dD0ke3RvdGFsRW5nYWdlZFRpbWV9JmluYz0ke2luY3JlbWVudGFsRW5nYWdlZFRpbWUocGFyc2VseS1qcyl9JyxcbiAgICB9LFxuICAgICd0cmlnZ2Vycyc6IHtcbiAgICAgICdkZWZhdWx0UGFnZXZpZXcnOiB7XG4gICAgICAgICdvbic6ICd2aXNpYmxlJyxcbiAgICAgICAgJ3JlcXVlc3QnOiAncGFnZXZpZXcnLFxuICAgICAgfSxcbiAgICAgICdkZWZhdWx0SGVhcnRiZWF0Jzoge1xuICAgICAgICAnb24nOiAndGltZXInLFxuICAgICAgICAnZW5hYmxlZCc6ICcke2luY3JlbWVudGFsRW5nYWdlZFRpbWUocGFyc2VseS1qcyxmYWxzZSl9JyxcbiAgICAgICAgJ3RpbWVyU3BlYyc6IHtcbiAgICAgICAgICAnaW50ZXJ2YWwnOiAxMCxcbiAgICAgICAgICAnbWF4VGltZXJMZW5ndGgnOiA3MjAwLFxuICAgICAgICB9LFxuICAgICAgICAncmVxdWVzdCc6ICdoZWFydGJlYXQnLFxuICAgICAgfSxcbiAgICB9LFxuICAgICd0cmFuc3BvcnQnOiB7XG4gICAgICAnYmVhY29uJzogZmFsc2UsXG4gICAgICAneGhycG9zdCc6IGZhbHNlLFxuICAgICAgJ2ltYWdlJzogdHJ1ZSxcbiAgICB9LFxuICB9LFxuXG4gICdwaWFubyc6IHtcbiAgICAncmVxdWVzdHMnOiB7XG4gICAgICAnaG9zdCc6ICdodHRwczovL2FwaS12My50aW55cGFzcy5jb20nLFxuICAgICAgJ2Jhc2VQcmVmaXgnOiAnL2FwaS92MycsXG4gICAgICAnYmFzZVN1ZmZpeCc6ICcmcGFnZXZpZXdfaWQ9JHtwYWdlVmlld0lkfSZyYW5kPSR7cmFuZG9tfSYnICtcbiAgICAgICAgJ2FtcF9jbGllbnRfaWQ9JHtjbGllbnRJZH0mYWlkPSR7YWlkfScsXG4gICAgICAncGFnZXZpZXcnOiAnJHtob3N0fSR7YmFzZVByZWZpeH0vcGFnZS90cmFjaz91cmw9JHtjYW5vbmljYWxVcmx9JicgK1xuICAgICAgICAncmVmZXJlcj0ke2RvY3VtZW50UmVmZXJyZXJ9JmNvbnRlbnRfY3JlYXRlZD0ke2NvbnRlbnRDcmVhdGVkfSYnICtcbiAgICAgICAgJ2NvbnRlbnRfYXV0aG9yPSR7Y29udGVudEF1dGhvcn0mY29udGVudF9zZWN0aW9uPSR7Y29udGVudFNlY3Rpb259JicgK1xuICAgICAgICAndGltZXpvbmVfb2Zmc2V0PSR7dGltZXpvbmV9JnRhZ3M9JHt0YWdzfSZhbXBfdXJsPSR7YW1wZG9jVXJsfSYnICtcbiAgICAgICAgJ3NjcmVlbj0ke3NjcmVlbldpZHRofXgke3NjcmVlbkhlaWdodH0ke2Jhc2VTdWZmaXh9JyxcbiAgICB9LFxuICB9LFxuXG4gICdwaVN0YXRzJzoge1xuICAgICdyZXF1ZXN0cyc6IHtcbiAgICAgICdob3N0JzogJ2h0dHBzOi8vZXZlbnRzLnBpLXN0YXRzLmNvbScsXG4gICAgICAnYmFzZVByZWZpeCc6ICcke2hvc3R9L2V2ZW50c2FtcC8/JyArXG4gICAgICAgICAgJ2U9UGFnZUxvYWQmJyArXG4gICAgICAgICAgJ3BpZD0ke3Byb3BlcnR5fSYnICtcbiAgICAgICAgICAndXJsPSR7YW1wZG9jVXJsfSYnICtcbiAgICAgICAgICAnY250PSR7Y250SWR9JicgK1xuICAgICAgICAgICdsYW5nPSR7bGFuZ3VhZ2V9JicgK1xuICAgICAgICAgICdyZWY9JHtkb2N1bWVudFJlZmVycmVyfSYnICtcbiAgICAgICAgICAnaWQ9JHtjbGllbnRJZChwaVN0YXRzREVWSUNFSUQpfSYnICtcbiAgICAgICAgICAndWE9JHt1c2VyQWdlbnR9JicgK1xuICAgICAgICAgICdjdHlwZT13ZWImJyArXG4gICAgICAgICAgJ2JsYW5nPSR7YnJvd3Nlckxhbmd1YWdlfSYnICtcbiAgICAgICAgICAndj0yLjAmJyArXG4gICAgICAgICAgJ2Rpc3Q9SmF2YXNjcmlwdCcsXG4gICAgICAncGFnZXZpZXcnOiAnJHtiYXNlUHJlZml4fSZldmVudHR5cGU9cGFnZXZpZXcnLFxuICAgIH0sXG4gICAgJ3RyaWdnZXJzJzoge1xuICAgICAgJ2RlZmF1bHRQYWdldmlldyc6IHtcbiAgICAgICAgJ29uJzogJ3Zpc2libGUnLFxuICAgICAgICAncmVxdWVzdCc6ICdwYWdldmlldycsXG4gICAgICB9LFxuICAgIH0sXG4gICAgJ3RyYW5zcG9ydCc6IHtcbiAgICAgICdiZWFjb24nOiBmYWxzZSxcbiAgICAgICd4aHJwb3N0JzogZmFsc2UsXG4gICAgICAnaW1hZ2UnOiB0cnVlLFxuICAgIH0sXG4gIH0sXG5cbiAgJ3F1YW50Y2FzdCc6IHtcbiAgICAndmFycyc6IHtcbiAgICAgICdsYWJlbHMnOiAnJyxcbiAgICB9LFxuICAgICdyZXF1ZXN0cyc6IHtcbiAgICAgICdob3N0JzogJ2h0dHBzOi8vcGl4ZWwucXVhbnRzZXJ2ZS5jb20vcGl4ZWwnLFxuICAgICAgJ3BhZ2V2aWV3JzogJyR7aG9zdH07cj0ke3JhbmRvbX07YT0ke3Bjb2RlfTtsYWJlbHM9JHtsYWJlbHN9OycgK1xuICAgICAgICAnZnBhbj07ZnBhPSR7Y2xpZW50SWQoX19xY2EpfTtucz0wO2NlPTE7Y209O2plPTA7JyArXG4gICAgICAgICdzcj0ke3NjcmVlbldpZHRofXgke3NjcmVlbkhlaWdodH14JHtzY3JlZW5Db2xvckRlcHRofTsnICtcbiAgICAgICAgJ2VuYz1uO2V0PSR7dGltZXN0YW1wfTtyZWY9JHtkb2N1bWVudFJlZmVycmVyfTt1cmw9JHtjYW5vbmljYWxVcmx9JyxcbiAgICB9LFxuICAgICd0cmlnZ2Vycyc6IHtcbiAgICAgICdkZWZhdWx0UGFnZXZpZXcnOiB7XG4gICAgICAgICdvbic6ICd2aXNpYmxlJyxcbiAgICAgICAgJ3JlcXVlc3QnOiAncGFnZXZpZXcnLFxuICAgICAgfSxcbiAgICB9LFxuICAgICd0cmFuc3BvcnQnOiB7XG4gICAgICAnYmVhY29uJzogZmFsc2UsXG4gICAgICAneGhycG9zdCc6IGZhbHNlLFxuICAgICAgJ2ltYWdlJzogdHJ1ZSxcbiAgICB9LFxuICB9LFxuXG4gICdhZG9iZWFuYWx5dGljcyc6IHtcbiAgICAndHJhbnNwb3J0Jzogeyd4aHJwb3N0JzogZmFsc2UsICdiZWFjb24nOiBmYWxzZSwgJ2ltYWdlJzogdHJ1ZX0sXG4gICAgJ3ZhcnMnOiB7XG4gICAgICAncGFnZU5hbWUnOiAnVElUTEUnLFxuICAgICAgJ2hvc3QnOiAnJyxcbiAgICAgICdyZXBvcnRTdWl0ZXMnOiAnJyxcbiAgICAgICdsaW5rVHlwZSc6ICdvJyxcbiAgICAgICdsaW5rVXJsJzogJycsXG4gICAgICAnbGlua05hbWUnOiAnJyxcbiAgICB9LFxuICAgICdyZXF1ZXN0cyc6IHtcbiAgICAgICdyZXF1ZXN0UGF0aCc6ICcvYi9zcy8ke3JlcG9ydFN1aXRlc30vMC9hbXAtMS4wL3Mke3JhbmRvbX0nLFxuICAgICAgLy8gdmlkIHN0YXJ0cyB3aXRoIHogdG8gd29yayBhcm91bmQgIzIxOThcbiAgICAgICdiYXNlUHJlZml4JzogJ3ZpZD16JHtjbGllbnRJZChhZG9iZV9hbXBfaWQpfScgK1xuICAgICAgICAgICcmbmRoPTAnICtcbiAgICAgICAgICAnJmNlPSR7ZG9jdW1lbnRDaGFyc2V0fScgK1xuICAgICAgICAgICcmcGFnZU5hbWU9JHtwYWdlTmFtZX0nICtcbiAgICAgICAgICAnJmc9JHthbXBkb2NVcmx9JyArXG4gICAgICAgICAgJyZyPSR7ZG9jdW1lbnRSZWZlcnJlcn0nICtcbiAgICAgICAgICAnJmJoPSR7YXZhaWxhYmxlU2NyZWVuSGVpZ2h0fScgK1xuICAgICAgICAgICcmYnc9JHthdmFpbGFibGVTY3JlZW5XaWR0aH0nICtcbiAgICAgICAgICAnJmM9JHtzY3JlZW5Db2xvckRlcHRofScgK1xuICAgICAgICAgICcmaj1hbXAnICtcbiAgICAgICAgICAnJnM9JHtzY3JlZW5XaWR0aH14JHtzY3JlZW5IZWlnaHR9JyxcbiAgICAgICdwYWdldmlldyc6ICdodHRwczovLyR7aG9zdH0ke3JlcXVlc3RQYXRofT8ke2Jhc2VQcmVmaXh9JyxcbiAgICAgICdjbGljayc6ICdodHRwczovLyR7aG9zdH0ke3JlcXVlc3RQYXRofT8ke2Jhc2VQcmVmaXh9JnBlPWxua18ke2xpbmtUeXBlfSZwZXYxPSR7bGlua1VybH0mcGV2Mj0ke2xpbmtOYW1lfScsXG4gICAgfSxcbiAgfSxcblxuICAnYWRvYmVhbmFseXRpY3NfbmF0aXZlQ29uZmlnJzoge1xuICAgICd0cmlnZ2Vycyc6IHtcbiAgICAgICdwYWdlTG9hZCc6IHtcbiAgICAgICAgJ29uJzogJ3Zpc2libGUnLFxuICAgICAgICAncmVxdWVzdCc6ICdpZnJhbWVNZXNzYWdlJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSxcblxuICAnaW5mb25saW5lJzoge1xuICAgICd2YXJzJzoge1xuICAgICAgJ3N2JzogJ2tlJyxcbiAgICAgICdhcCc6ICcxJyxcbiAgICB9LFxuICAgICd0cmFuc3BvcnQnOiB7J2JlYWNvbic6IGZhbHNlLCAneGhycG9zdCc6IGZhbHNlLCAnaW1hZ2UnOiB0cnVlfSxcbiAgICAncmVxdWVzdHMnOiB7XG4gICAgICAncGFnZXZpZXcnOiAnJHt1cmx9P3N0PSR7c3R9JyArXG4gICAgICAgICcmc3Y9JHtzdn0nICtcbiAgICAgICAgJyZhcD0ke2FwfScgK1xuICAgICAgICAnJmNvPSR7Y299JyArXG4gICAgICAgICcmY3A9JHtjcH0nICtcbiAgICAgICAgJyZob3N0PSR7Y2Fub25pY2FsSG9zdH0nICtcbiAgICAgICAgJyZwYXRoPSR7Y2Fub25pY2FsUGF0aH0nLFxuICAgIH0sXG4gICAgJ3RyaWdnZXJzJzoge1xuICAgICAgJ3BhZ2V2aWV3Jzoge1xuICAgICAgICAnb24nOiAndmlzaWJsZScsXG4gICAgICAgICdyZXF1ZXN0JzogJ3BhZ2V2aWV3JyxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSxcbiAgJ3NpbXBsZXJlYWNoJzoge1xuICAgICd2YXJzJzoge1xuICAgICAgJ3BpZCc6ICcnLFxuICAgICAgJ3B1Ymxpc2hlZF9hdCc6ICcnLFxuICAgICAgJ2F1dGhvcnMnOiBbXSxcbiAgICAgICdjaGFubmVscyc6IFtdLFxuICAgICAgJ3RhZ3MnOiBbXSxcbiAgICB9LFxuICAgICdyZXF1ZXN0cyc6IHtcbiAgICAgICdob3N0JzogJ2h0dHBzOi8vZWRnZS5zaW1wbGVyZWFjaC5jb20nLFxuICAgICAgJ2Jhc2VQYXJhbXMnOiAnYW1wPXRydWUnICtcbiAgICAgICAgJyZwaWQ9JHtwaWR9JyArXG4gICAgICAgICcmdGl0bGU9JHt0aXRsZX0nICtcbiAgICAgICAgJyZ1cmw9JHtjYW5vbmljYWxVcmx9JyArXG4gICAgICAgICcmZGF0ZT0ke3B1Ymxpc2hlZF9hdH0nICtcbiAgICAgICAgJyZhdXRob3JzPSR7YXV0aG9yc30nICtcbiAgICAgICAgJyZjaGFubmVscz0ke2NhdGVnb3JpZXN9JyArXG4gICAgICAgICcmdGFncz0ke3RhZ3N9JyArXG4gICAgICAgICcmcmVmZXJyZXI9JHtkb2N1bWVudFJlZmVycmVyfScgK1xuICAgICAgICAnJnBhZ2VfdXJsPSR7c291cmNlVXJsfScgK1xuICAgICAgICAnJnVzZXJfaWQ9JHtjbGllbnRJZChzcl9hbXBfaWQpfScgK1xuICAgICAgICAnJmRvbWFpbj0ke2Nhbm9uaWNhbEhvc3R9JyArXG4gICAgICAgICcmYXJ0aWNsZV9pZD0ke2FydGljbGVfaWR9JyArXG4gICAgICAgICcmaWdub3JlX21ldGFkYXRhPSR7aWdub3JlX21ldGFkYXRhfScsXG4gICAgICAndmlzaWJsZSc6ICcke2hvc3R9L24/JHtiYXNlUGFyYW1zfScsXG4gICAgICAndGltZXInOiAnJHtob3N0fS90PyR7YmFzZVBhcmFtc30nICtcbiAgICAgICAgJyZ0PTUwMDAnICtcbiAgICAgICAgJyZlPTUwMDAnLFxuICAgIH0sXG4gICAgJ3RyaWdnZXJzJzoge1xuICAgICAgJ3Zpc2libGUnOiB7XG4gICAgICAgICdvbic6ICd2aXNpYmxlJyxcbiAgICAgICAgJ3JlcXVlc3QnOiAndmlzaWJsZScsXG4gICAgICB9LFxuICAgICAgJ3RpbWVyJzoge1xuICAgICAgICAnb24nOiAndGltZXInLFxuICAgICAgICAndGltZXJTcGVjJzoge1xuICAgICAgICAgICdpbnRlcnZhbCc6IDUsXG4gICAgICAgICAgJ21heFRpbWVyTGVuZ3RoJzogMTIwMCxcbiAgICAgICAgfSxcbiAgICAgICAgJ3JlcXVlc3QnOiAndGltZXInLFxuICAgICAgfSxcbiAgICB9LFxuICB9LFxuXG4gICdzZWdtZW50Jzoge1xuICAgICd0cmFuc3BvcnQnOiB7XG4gICAgICAnYmVhY29uJzogZmFsc2UsXG4gICAgICAneGhycG9zdCc6IGZhbHNlLFxuICAgICAgJ2ltYWdlJzogdHJ1ZSxcbiAgICB9LFxuICAgICd2YXJzJzoge1xuICAgICAgJ2Fub255bW91c0lkJzogJ0NMSUVOVF9JRChzZWdtZW50X2FtcF9pZCknLFxuICAgIH0sXG4gICAgJ3JlcXVlc3RzJzoge1xuICAgICAgJ2hvc3QnOiAnaHR0cHM6Ly9hcGkuc2VnbWVudC5pby92MS9waXhlbCcsXG4gICAgICAnYmFzZSc6ICc/d3JpdGVLZXk9JHt3cml0ZUtleX0nICtcbiAgICAgICAgJyZjb250ZXh0LmxpYnJhcnkubmFtZT1hbXAnICtcbiAgICAgICAgJyZhbm9ueW1vdXNJZD0ke2Fub255bW91c0lkfScgK1xuICAgICAgICAnJmNvbnRleHQubG9jYWxlPSR7YnJvd3Nlckxhbmd1YWdlfScgK1xuICAgICAgICAnJmNvbnRleHQucGFnZS5wYXRoPSR7Y2Fub25pY2FsUGF0aH0nICtcbiAgICAgICAgJyZjb250ZXh0LnBhZ2UudXJsPSR7Y2Fub25pY2FsVXJsfScgK1xuICAgICAgICAnJmNvbnRleHQucGFnZS5yZWZlcnJlcj0ke2RvY3VtZW50UmVmZXJyZXJ9JyArXG4gICAgICAgICcmY29udGV4dC5wYWdlLnRpdGxlPSR7dGl0bGV9JyArXG4gICAgICAgICcmY29udGV4dC5zY3JlZW4ud2lkdGg9JHtzY3JlZW5XaWR0aH0nICtcbiAgICAgICAgJyZjb250ZXh0LnNjcmVlbi5oZWlnaHQ9JHtzY3JlZW5IZWlnaHR9JyxcbiAgICAgICdwYWdlJzogJyR7aG9zdH0vcGFnZSR7YmFzZX0mbmFtZT0ke25hbWV9JyxcbiAgICAgICd0cmFjayc6ICcke2hvc3R9L3RyYWNrJHtiYXNlfSZldmVudD0ke2V2ZW50fScsXG4gICAgfSxcbiAgICAndHJpZ2dlcnMnOiB7XG4gICAgICAncGFnZSc6IHtcbiAgICAgICAgJ29uJzogJ3Zpc2libGUnLFxuICAgICAgICAncmVxdWVzdCc6ICdwYWdlJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSxcblxuICAnc2hpbnlzdGF0Jzoge1xuICAgICd0cmFuc3BvcnQnOiB7XG4gICAgICAnYmVhY29uJzogZmFsc2UsXG4gICAgICAneGhycG9zdCc6IGZhbHNlLFxuICAgICAgJ2ltYWdlJzogdHJ1ZSxcbiAgICB9LFxuICAgICdyZXF1ZXN0cyc6IHtcbiAgICAgICdiYXNlJzogJ2h0dHBzOi8vYW1wLnNoaW55c3RhdC5jb20vY2dpLWJpbi9zaGlueWFtcC5jZ2knLFxuICAgICAgJ2NvbW1wYXInOiAnQU1QPTEmUk09JHtyYW5kb219JyArXG4gICAgICAgICAgICAgICAgICcmVVNFUj0ke2FjY291bnR9JyArXG4gICAgICAgICAgICAgICAgICcmUEFHPSR7cGFnZX0nICtcbiAgICAgICAgICAgICAgICAgJyZIUj0ke3NvdXJjZVVybH0nICtcbiAgICAgICAgICAgICAgICAgJyZSRUZFUj0ke2RvY3VtZW50UmVmZXJyZXJ9JyArXG4gICAgICAgICAgICAgICAgICcmUkVTPSR7c2NyZWVuV2lkdGh9WCR7c2NyZWVuSGVpZ2h0fScgK1xuICAgICAgICAgICAgICAgICAnJkNPTE9SPSR7c2NyZWVuQ29sb3JEZXB0aH0nICtcbiAgICAgICAgICAgICAgICAgJyZDSUQ9JHtjbGllbnRJZChBTVBfQ0lEKX0nICtcbiAgICAgICAgICAgICAgICAgJyZQQUdJRD0ke3BhZ2VWaWV3SWR9JyArXG4gICAgICAgICAgICAgICAgICcmVElUTD0ke3RpdGxlfScgK1xuICAgICAgICAgICAgICAgICAnJlJRQz0ke3JlcXVlc3RDb3VudH0nLFxuICAgICAgJ3BhZ2VwYXInOiAnJlZJRT0ke3ZpZXdlcn0nICtcbiAgICAgICAgICAgICAgICAgJyZQTFQ9JHtwYWdlTG9hZFRpbWV9JyxcbiAgICAgICdldmVudHBhcic6ICcmU1NYTD0xJyxcbiAgICAgICdsaW5rcGFyJzogJyZMSU5LPSR7b3V0Ym91bmRMaW5rfScsXG4gICAgICAncGFnZXZpZXcnOiAnJHtiYXNlfT8ke2NvbW1wYXJ9JHtwYWdlcGFyfScsXG4gICAgICAnZXZlbnQnOiAnJHtiYXNlfT8ke2NvbW1wYXJ9JHtldmVudHBhcn0nLFxuICAgICAgJ2xpbmsnOiAnJHtiYXNlfT8ke2NvbW1wYXJ9JHtsaW5rcGFyfScsXG4gICAgfSxcbiAgICAndHJpZ2dlcnMnOiB7XG4gICAgICAncGFnZXZpZXcnOiB7XG4gICAgICAgICdvbic6ICd2aXNpYmxlJyxcbiAgICAgICAgJ3JlcXVlc3QnOiAncGFnZXZpZXcnLFxuICAgICAgfSxcbiAgICB9LFxuICB9LFxuXG4gICdzbm93cGxvdyc6IHtcbiAgICAndmFycyc6IHtcbiAgICAgICdkdWlkJzogJ0NMSUVOVF9JRChfc3BfaWQpJyxcbiAgICB9LFxuICAgICdyZXF1ZXN0cyc6IHtcbiAgICAgICdhYVZlcnNpb24nOiAnYW1wLTAuMicsXG4gICAgICAnYmFzZVByZWZpeCc6ICdodHRwczovLyR7Y29sbGVjdG9ySG9zdH0vaT91cmw9JHtjYW5vbmljYWxVcmx9JnBhZ2U9JHt0aXRsZX0mJyArXG4gICAgICAgICAgJ3Jlcz0ke3NjcmVlbldpZHRofXgke3NjcmVlbkhlaWdodH0mc3RtPSR7dGltZXN0YW1wfSYnICtcbiAgICAgICAgICAndHo9JHt0aW1lem9uZX0mYWlkPSR7YXBwSWR9JnA9d2ViJnR2PSR7YWFWZXJzaW9ufSYnICtcbiAgICAgICAgICAnY2Q9JHtzY3JlZW5Db2xvckRlcHRofSZjcz0ke2RvY3VtZW50Q2hhcnNldH0mJyArXG4gICAgICAgICAgJ2R1aWQ9JHtkdWlkfSYnICtcbiAgICAgICAgICAnbGFuZz0ke2Jyb3dzZXJMYW5ndWFnZX0mcmVmcj0ke2RvY3VtZW50UmVmZXJyZXJ9JnN0bT0ke3RpbWV6b25lfSYnICtcbiAgICAgICAgICAndnA9JHt2aWV3cG9ydFdpZHRofXgke3ZpZXdwb3J0SGVpZ2h0fScsXG4gICAgICAncGFnZVZpZXcnOiAnJHtiYXNlUHJlZml4fSZlPXB2JyxcbiAgICAgICdzdHJ1Y3RFdmVudCc6ICcke2Jhc2VQcmVmaXh9JmU9c2UmJyArXG4gICAgICAgICAgJ3NlX2NhPSR7c3RydWN0RXZlbnRDYXRlZ29yeX0mc2VfYWM9JHtzdHJ1Y3RFdmVudEFjdGlvbn0mJyArXG4gICAgICAgICAgJ3NlX2xhPSR7c3RydWN0RXZlbnRMYWJlbH0mc2VfcHI9JHtzdHJ1Y3RFdmVudFByb3BlcnR5fSYnICtcbiAgICAgICAgICAnc2VfdmE9JHtzdHJ1Y3RFdmVudFZhbHVlfScsXG4gICAgfSxcbiAgICAndHJhbnNwb3J0Jzoge1xuICAgICAgJ2JlYWNvbic6IGZhbHNlLFxuICAgICAgJ3hocnBvc3QnOiBmYWxzZSxcbiAgICAgICdpbWFnZSc6IHRydWUsXG4gICAgfSxcbiAgfSxcblxuICAndG9wMTAwJzoge1xuICAgICd2YXJzJzoge1xuICAgICAgJ3BpZCc6ICcnLFxuICAgICAgJ3JpZCc6ICdQQUdFX1ZJRVdfSUQnLFxuICAgICAgJ3J1aWQnOiAnQ0xJRU5UX0lEKHJ1aWQpJyxcbiAgICAgICd2ZXJzaW9uJzogJzEuMC4wJyxcbiAgICB9LFxuICAgICdyZXF1ZXN0cyc6IHtcbiAgICAgICdob3N0JzogJ2h0dHBzOi8va3Jha2VuLnJhbWJsZXIucnUnLFxuICAgICAgJ2Jhc2UnOiAnJHtob3N0fS9jbnQvP3BpZD0ke3BpZH0nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJyZyaWQ9JHtyaWR9JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICcmdj0ke3ZlcnNpb259JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICcmcm49JHtyYW5kb219JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICcmcnVpZD0ke3J1aWR9JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICcmY3Q9YW1wJyxcbiAgICAgICdwYWdldmlldyc6ICcke2Jhc2V9JmV0PXB2JyArXG4gICAgICAgICAgICAgICAgICAnJHtfcGFnZURhdGF9JyArXG4gICAgICAgICAgICAgICAgICAnJHtfc2NyZWVuRGF0YX0nLFxuICAgICAgJ19zY3JlZW5EYXRhJzogJyZzcj0ke3NjcmVlbldpZHRofXgke3NjcmVlbkhlaWdodH0nICtcbiAgICAgICAgICAgICAgICAgICAgICcmY2Q9JHtzY3JlZW5Db2xvckRlcHRofS1iaXQnICtcbiAgICAgICAgICAgICAgICAgICAgICcmYnM9JHtzY3JvbGxXaWR0aH14JHtzY3JvbGxIZWlnaHR9JyxcbiAgICAgICdfcGFnZURhdGEnOiAnJnB0PSR7dGl0bGV9JyArXG4gICAgICAgICAgICAgICAgICAgJyZyZj0ke2RvY3VtZW50UmVmZXJyZXJ9JyArXG4gICAgICAgICAgICAgICAgICAgJyZlbj0ke2RvY3VtZW50Q2hhcnNldH0nICtcbiAgICAgICAgICAgICAgICAgICAnJmxhPSR7YnJvd3Nlckxhbmd1YWdlfScgK1xuICAgICAgICAgICAgICAgICAgICcmdHo9JHt0aW1lem9uZX0nLFxuICAgIH0sXG4gICAgJ3RyaWdnZXJzJzoge1xuICAgICAgJ3RyYWNrUGFnZXZpZXcnOiB7XG4gICAgICAgICdvbic6ICd2aXNpYmxlJyxcbiAgICAgICAgJ3JlcXVlc3QnOiAncGFnZXZpZXcnLFxuICAgICAgfSxcbiAgICB9LFxuICAgICd0cmFuc3BvcnQnOiB7XG4gICAgICAnYmVhY29uJzogZmFsc2UsXG4gICAgICAneGhycG9zdCc6IGZhbHNlLFxuICAgICAgJ2ltYWdlJzogdHJ1ZSxcbiAgICB9LFxuICB9LFxuXG4gICd0cmVhc3VyZWRhdGEnOiB7XG4gICAgJ3ZhcnMnOiB7XG4gICAgICAnaG9zdCc6ICdpbi50cmVhc3VyZWRhdGEuY29tJyxcbiAgICAgICd3cml0ZUtleSc6ICcnLFxuICAgICAgJ2RhdGFiYXNlJzogJycsXG4gICAgICAndGFibGUnOiAnZXZlbnRzJyxcbiAgICB9LFxuICAgICdyZXF1ZXN0cyc6IHtcbiAgICAgICdiYXNlJzogJ2h0dHBzOi8vJHtob3N0fS9wb3N0YmFjay92My9ldmVudC8ke2RhdGFiYXNlfScsXG4gICAgICAnYmFzZVBhcmFtcyc6ICd0ZF93cml0ZV9rZXk9JHt3cml0ZUtleX0nICtcbiAgICAgICAgJyZ0ZF9nbG9iYWxfaWQ9dGRfZ2xvYmFsX2lkJyArXG4gICAgICAgICcmdGRfY2xpZW50X2lkPUNMSUVOVF9JRChfdGQpJyArXG4gICAgICAgICcmdGRfY2hhcnNldD1ET0NVTUVOVF9DSEFSU0VUJyArXG4gICAgICAgICcmdGRfbGFuZ3VhZ2U9QlJPV1NFUl9MQU5HVUFHRScgK1xuICAgICAgICAnJnRkX2NvbG9yPVNDUkVFTl9DT0xPUl9ERVBUSCcgK1xuICAgICAgICAnJnRkX3NjcmVlbj0ke3NjcmVlbldpZHRofXgke3Njcm9sbEhlaWdodH0nICtcbiAgICAgICAgJyZ0ZF92aWV3cG9ydD0ke2F2YWlsYWJsZVNjcmVlbldpZHRofXgke2F2YWlsYWJsZVNjcmVlbkhlaWdodH0nICtcbiAgICAgICAgJyZ0ZF90aXRsZT1USVRMRScgK1xuICAgICAgICAnJnRkX3VybD1TT1VSQ0VfVVJMJyArXG4gICAgICAgICcmdGRfdXNlcl9hZ2VudD1VU0VSX0FHRU5UJyArXG4gICAgICAgICcmdGRfaG9zdD1TT1VSQ0VfSE9TVCcgK1xuICAgICAgICAnJnRkX3BhdGg9U09VUkNFX1BBVEgnICtcbiAgICAgICAgJyZ0ZF9yZWZlcnJlcj1ET0NVTUVOVF9SRUZFUlJFUicgK1xuICAgICAgICAnJnRkX2lwPXRkX2lwJyxcbiAgICAgICdwYWdldmlldyc6ICcke2Jhc2V9LyR7dGFibGV9PyR7YmFzZVBhcmFtc30nLFxuICAgICAgJ2V2ZW50JzogJyR7YmFzZX0vJHt0YWJsZX0/JHtiYXNlUGFyYW1zfScsXG4gICAgfSxcbiAgfSxcblxuICAnd2VidHJla2snOiB7XG4gICAgJ3JlcXVlc3RzJzoge1xuICAgICAgJ3RyYWNrVVJMJzogJ2h0dHBzOi8vJHt0cmFja0RvbWFpbn0vJHt0cmFja0lkfS93dCcsXG4gICAgICAncGFyYW1ldGVyUHJlZml4JzogJz9wPTQzMiwke2NvbnRlbnRJZH0sMSwnICtcbiAgICAgICAgJyR7c2NyZWVuV2lkdGh9eCR7c2NyZWVuSGVpZ2h0fSwke3NjcmVlbkNvbG9yRGVwdGh9LDEsJyArXG4gICAgICAgICcke3RpbWVzdGFtcH0sJHtkb2N1bWVudFJlZmVycmVyfSwke3ZpZXdwb3J0V2lkdGh9eCcgK1xuICAgICAgICAnJHt2aWV3cG9ydEhlaWdodH0sMCZ0ej0ke3RpbWV6b25lfScgK1xuICAgICAgICAnJmVpZD0ke2NsaWVudElkKGFtcC13dDMtZWlkKX0mbGE9JHticm93c2VyTGFuZ3VhZ2V9JyxcbiAgICAgICdwYXJhbWV0ZXJTdWZmaXgnOiAnJnB1PSR7c291cmNlVXJsfScsXG4gICAgICAncGFnZVBhcmFtZXRlcic6ICcmY3AxPSR7cGFnZVBhcmFtZXRlcjF9JyArXG4gICAgICAgICcmY3AyPSR7cGFnZVBhcmFtZXRlcjJ9JmNwMz0ke3BhZ2VQYXJhbWV0ZXIzfScgK1xuICAgICAgICAnJmNwND0ke3BhZ2VQYXJhbWV0ZXI0fSZjcDU9JHtwYWdlUGFyYW1ldGVyNX0nICtcbiAgICAgICAgJyZjcDY9JHtwYWdlUGFyYW1ldGVyNn0mY3A3PSR7cGFnZVBhcmFtZXRlcjd9JyArXG4gICAgICAgICcmY3A4PSR7cGFnZVBhcmFtZXRlcjh9JmNwOT0ke3BhZ2VQYXJhbWV0ZXI5fScgK1xuICAgICAgICAnJmNwMTA9JHtwYWdlUGFyYW1ldGVyMTB9JyxcbiAgICAgICdwYWdlQ2F0ZWdvcmllcyc6ICcmY2cxPSR7cGFnZUNhdGVnb3J5MX0nICtcbiAgICAgICAgJyZjZzI9JHtwYWdlQ2F0ZWdvcnkyfSZjZzM9JHtwYWdlQ2F0ZWdvcnkzfScgK1xuICAgICAgICAnJmNnND0ke3BhZ2VDYXRlZ29yeTR9JmNnNT0ke3BhZ2VDYXRlZ29yeTV9JyArXG4gICAgICAgICcmY2c2PSR7cGFnZUNhdGVnb3J5Nn0mY2c3PSR7cGFnZUNhdGVnb3J5N30nICtcbiAgICAgICAgJyZjZzg9JHtwYWdlQ2F0ZWdvcnk4fSZjZzk9JHtwYWdlQ2F0ZWdvcnk5fScgK1xuICAgICAgICAnJmNnMTA9JHtwYWdlQ2F0ZWdvcnkxMH0nLFxuICAgICAgJ3BhZ2V2aWV3JzogJyR7dHJhY2tVUkx9JHtwYXJhbWV0ZXJQcmVmaXh9JHtwYWdlUGFyYW1ldGVyfScgK1xuICAgICAgICAnJHtwYWdlQ2F0ZWdvcmllc30ke3BhcmFtZXRlclN1ZmZpeH0nLFxuICAgICAgJ2FjdGlvblBhcmFtZXRlcic6ICcmY2sxPSR7YWN0aW9uUGFyYW1ldGVyMX0nICtcbiAgICAgICAgJyZjazI9JHthY3Rpb25QYXJhbWV0ZXIyfSZjazM9JHthY3Rpb25QYXJhbWV0ZXIzfScgK1xuICAgICAgICAnJmNrND0ke2FjdGlvblBhcmFtZXRlcjR9JmNrNT0ke2FjdGlvblBhcmFtZXRlcjV9JyxcbiAgICAgICdldmVudCc6ICcke3RyYWNrVVJMfSR7cGFyYW1ldGVyUHJlZml4fSZjdD0ke2FjdGlvbk5hbWV9JyArXG4gICAgICAgICcke2FjdGlvblBhcmFtZXRlcn0ke3BhcmFtZXRlclN1ZmZpeH0nLFxuICAgIH0sXG4gICAgJ3RyYW5zcG9ydCc6IHtcbiAgICAgICdiZWFjb24nOiBmYWxzZSxcbiAgICAgICd4aHJwb3N0JzogZmFsc2UsXG4gICAgICAnaW1hZ2UnOiB0cnVlLFxuICAgIH0sXG4gIH0sXG5cbiAgJ3dlYnRyZWtrX3YyJzoge1xuICAgICd2YXJzJzoge1xuICAgICAgJ2FjdGlvbk5hbWUnOiAnd2VidHJla2tfaWdub3JlJyxcbiAgICAgICdjb250ZW50SWQnOiAnJHt0aXRsZX0nLFxuICAgICAgJ21lZGlhTmFtZSc6ICcke2lkfScsXG4gICAgICAnZXZlcklkJzogJyR7Y2xpZW50SWQoYW1wLXd0My1laWQpfScsXG4gICAgfSxcbiAgICAncmVxdWVzdHMnOiB7XG4gICAgICAndHJhY2tVUkwnOiAnaHR0cHM6Ly8ke3RyYWNrRG9tYWlufS8ke3RyYWNrSWR9L3d0JyxcbiAgICAgICdiYXNlUHJlZml4JzogJz9wPTQ0MCwke2NvbnRlbnRJZH0sMSwnICtcbiAgICAgICAgJyR7c2NyZWVuV2lkdGh9eCR7c2NyZWVuSGVpZ2h0fSwke3NjcmVlbkNvbG9yRGVwdGh9LDEsJyxcbiAgICAgICdiYXNlU3VmZml4JzogJywke2RvY3VtZW50UmVmZXJyZXJ9LCcgK1xuICAgICAgICAnJHt2aWV3cG9ydFdpZHRofXgke3ZpZXdwb3J0SGVpZ2h0fSwwJyArXG4gICAgICAgICcmdHo9JHt0aW1lem9uZX0mZWlkPSR7ZXZlcklkfSZsYT0ke2Jyb3dzZXJMYW5ndWFnZX0nLFxuICAgICAgJ3BhcmFtZXRlclByZWZpeCc6ICcke2Jhc2VQcmVmaXh9JHt0aW1lc3RhbXB9JHtiYXNlU3VmZml4fScsXG4gICAgICAncGFyYW1ldGVyU3VmZml4JzogJyZwdT0ke3NvdXJjZVVybH0mZW9yPTEnLFxuICAgICAgJ3BhZ2V2aWV3JzogJyR7dHJhY2tVUkx9JHtwYXJhbWV0ZXJQcmVmaXh9JiR7ZXh0cmFVcmxQYXJhbXN9JyArXG4gICAgICAgICcmY3A1NzA9JHtwYWdlTG9hZFRpbWV9JHtwYXJhbWV0ZXJTdWZmaXh9JyxcbiAgICAgICdldmVudCc6ICcke3RyYWNrVVJMfSR7cGFyYW1ldGVyUHJlZml4fSZjdD0ke2FjdGlvbk5hbWV9JyArXG4gICAgICAgICcmJHtleHRyYVVybFBhcmFtc30ke3BhcmFtZXRlclN1ZmZpeH0nLFxuICAgICAgJ3Njcm9sbCc6ICcke3RyYWNrVVJMfSR7cGFyYW1ldGVyUHJlZml4fSZjdD0ke2FjdGlvbk5hbWV9JyArXG4gICAgICAgICcmY2s1NDA9JHt2ZXJ0aWNhbFNjcm9sbEJvdW5kYXJ5fSR7cGFyYW1ldGVyU3VmZml4fScsXG4gICAgICAnbWVkaWFQcmVmaXgnOiAnJHt0cmFja1VSTH0ke2Jhc2VQcmVmaXh9JHtiYXNlU3VmZml4fScgK1xuICAgICAgICAnJm1pPSR7bWVkaWFOYW1lfScsXG4gICAgICAnbWVkaWFTdWZmaXgnOiAnJm10MT0ke2N1cnJlbnRUaW1lfSZtdDI9JHtkdXJhdGlvbn0nICtcbiAgICAgICAgJyYke2V4dHJhVXJsUGFyYW1zfSR7cGFyYW1ldGVyU3VmZml4fSZ4PSR7cGxheWVkVG90YWx9JyxcbiAgICAgICdtZWRpYVBsYXknOiAnJHttZWRpYVByZWZpeH0mbWs9cGxheSR7bWVkaWFTdWZmaXh9JyxcbiAgICAgICdtZWRpYVBhdXNlJzogJyR7bWVkaWFQcmVmaXh9Jm1rPXBhdXNlJHttZWRpYVN1ZmZpeH0nLFxuICAgICAgJ21lZGlhUG9zaXRpb24nOiAnJHttZWRpYVByZWZpeH0mbWs9cG9zJHttZWRpYVN1ZmZpeH0nLFxuICAgICAgJ21lZGlhRW5kZWQnOiAnJHttZWRpYVByZWZpeH0mbWs9ZW9mJHttZWRpYVN1ZmZpeH0nLFxuICAgIH0sXG4gICAgJ2V4dHJhVXJsUGFyYW1zUmVwbGFjZU1hcCc6IHtcbiAgICAgICdwYWdlUGFyYW1ldGVyJzogJ2NwJyxcbiAgICAgICdjb250ZW50R3JvdXAnOiAnY2cnLFxuICAgICAgJ2FjdGlvblBhcmFtZXRlcic6ICdjaycsXG4gICAgICAnc2Vzc2lvblBhcmFtZXRlcic6ICdjcycsXG4gICAgICAnZWNvbW1lcmNlUGFyYW1ldGVyJzogJ2NiJyxcbiAgICAgICd1cm1DYXRlZ29yeSc6ICd1YycsXG4gICAgICAnY2FtcGFpZ25QYXJhbWV0ZXInOiAnY2MnLFxuICAgICAgJ21lZGlhQ2F0ZWdvcnknOiAnbWcnLFxuICAgIH0sXG4gICAgJ3RyYW5zcG9ydCc6IHtcbiAgICAgICdiZWFjb24nOiBmYWxzZSxcbiAgICAgICd4aHJwb3N0JzogZmFsc2UsXG4gICAgICAnaW1hZ2UnOiB0cnVlLFxuICAgIH0sXG4gIH0sXG5cbiAgJ21wdWxzZSc6IHtcbiAgICAncmVxdWVzdHMnOiB7XG4gICAgICAnb252aXNpYmxlJzogJ2h0dHBzOi8vJHtiZWFjb25fdXJsfT8nICtcbiAgICAgICAgJ2guZD0ke2guZH0nICtcbiAgICAgICAgJyZoLmtleT0ke2gua2V5fScgK1xuICAgICAgICAnJmgudD0ke2gudH0nICtcbiAgICAgICAgJyZoLmNyPSR7aC5jcn0nICtcbiAgICAgICAgJyZydC5zdGFydD1uYXZpZ2F0aW9uJyArXG4gICAgICAgICcmcnQuc2k9JHtjbGllbnRJZChhbXBfbXB1bHNlKX0nICtcbiAgICAgICAgJyZydC5zcz0ke3RpbWVzdGFtcH0nICtcbiAgICAgICAgJyZydC5lbmQ9JHt0aW1lc3RhbXB9JyArXG4gICAgICAgICcmdF9yZXNwPSR7bmF2VGltaW5nKG5hdmlnYXRpb25TdGFydCxyZXNwb25zZVN0YXJ0KX0nICtcbiAgICAgICAgJyZ0X3BhZ2U9JHtuYXZUaW1pbmcocmVzcG9uc2VTdGFydCxsb2FkRXZlbnRTdGFydCl9JyArXG4gICAgICAgICcmdF9kb25lPSR7bmF2VGltaW5nKG5hdmlnYXRpb25TdGFydCxsb2FkRXZlbnRTdGFydCl9JyArXG4gICAgICAgICcmbnRfbmF2X3R5cGU9JHtuYXZUeXBlfScgK1xuICAgICAgICAnJm50X3JlZF9jbnQ9JHtuYXZSZWRpcmVjdENvdW50fScgK1xuICAgICAgICAnJm50X25hdl9zdD0ke25hdlRpbWluZyhuYXZpZ2F0aW9uU3RhcnQpfScgK1xuICAgICAgICAnJm50X3JlZF9zdD0ke25hdlRpbWluZyhyZWRpcmVjdFN0YXJ0KX0nICtcbiAgICAgICAgJyZudF9yZWRfZW5kPSR7bmF2VGltaW5nKHJlZGlyZWN0RW5kKX0nICtcbiAgICAgICAgJyZudF9mZXRfc3Q9JHtuYXZUaW1pbmcoZmV0Y2hTdGFydCl9JyArXG4gICAgICAgICcmbnRfZG5zX3N0PSR7bmF2VGltaW5nKGRvbWFpbkxvb2t1cFN0YXJ0KX0nICtcbiAgICAgICAgJyZudF9kbnNfZW5kPSR7bmF2VGltaW5nKGRvbWFpbkxvb2t1cEVuZCl9JyArXG4gICAgICAgICcmbnRfY29uX3N0PSR7bmF2VGltaW5nKGNvbm5lY3RTdGFydCl9JyArXG4gICAgICAgICcmbnRfc3NsX3N0PSR7bmF2VGltaW5nKHNlY3VyZUNvbm5lY3Rpb25TdGFydCl9JyArXG4gICAgICAgICcmbnRfY29uX2VuZD0ke25hdlRpbWluZyhjb25uZWN0RW5kKX0nICtcbiAgICAgICAgJyZudF9yZXFfc3Q9JHtuYXZUaW1pbmcocmVxdWVzdFN0YXJ0KX0nICtcbiAgICAgICAgJyZudF9yZXNfc3Q9JHtuYXZUaW1pbmcocmVzcG9uc2VTdGFydCl9JyArXG4gICAgICAgICcmbnRfdW5sb2FkX3N0PSR7bmF2VGltaW5nKHVubG9hZEV2ZW50U3RhcnQpfScgK1xuICAgICAgICAnJm50X3VubG9hZF9lbmQ9JHtuYXZUaW1pbmcodW5sb2FkRXZlbnRFbmQpfScgK1xuICAgICAgICAnJm50X2RvbWxvYWRpbmc9JHtuYXZUaW1pbmcoZG9tTG9hZGluZyl9JyArXG4gICAgICAgICcmbnRfcmVzX2VuZD0ke25hdlRpbWluZyhyZXNwb25zZUVuZCl9JyArXG4gICAgICAgICcmbnRfZG9taW50PSR7bmF2VGltaW5nKGRvbUludGVyYWN0aXZlKX0nICtcbiAgICAgICAgJyZudF9kb21jb250bG9hZGVkX3N0PSR7bmF2VGltaW5nKGRvbUNvbnRlbnRMb2FkZWRFdmVudFN0YXJ0KX0nICtcbiAgICAgICAgJyZudF9kb21jb250bG9hZGVkX2VuZD0ke25hdlRpbWluZyhkb21Db250ZW50TG9hZGVkRXZlbnRFbmQpfScgK1xuICAgICAgICAnJm50X2RvbWNvbXA9JHtuYXZUaW1pbmcoZG9tQ29tcGxldGUpfScgK1xuICAgICAgICAnJm50X2xvYWRfc3Q9JHtuYXZUaW1pbmcobG9hZEV2ZW50U3RhcnQpfScgK1xuICAgICAgICAnJm50X2xvYWRfZW5kPSR7bmF2VGltaW5nKGxvYWRFdmVudEVuZCl9JyArXG4gICAgICAgICcmdj0xJyArXG4gICAgICAgICcmaHR0cC5pbml0aWF0b3I9YW1wJyArXG4gICAgICAgICcmdT0ke3NvdXJjZVVybH0nICtcbiAgICAgICAgJyZhbXAudT0ke2FtcGRvY1VybH0nICtcbiAgICAgICAgJyZyMj0ke2RvY3VtZW50UmVmZXJyZXJ9JyArXG4gICAgICAgICcmc2NyLnh5PSR7c2NyZWVuV2lkdGh9eCR7c2NyZWVuSGVpZ2h0fScsXG4gICAgfSxcblxuICAgICd0cmlnZ2Vycyc6IHtcbiAgICAgICdvbnZpc2libGUnOiB7XG4gICAgICAgICdvbic6ICd2aXNpYmxlJyxcbiAgICAgICAgJ3JlcXVlc3QnOiAnb252aXNpYmxlJyxcbiAgICAgIH0sXG4gICAgfSxcblxuICAgICd0cmFuc3BvcnQnOiB7XG4gICAgICAnYmVhY29uJzogZmFsc2UsXG4gICAgICAneGhycG9zdCc6IGZhbHNlLFxuICAgICAgJ2ltYWdlJzogdHJ1ZSxcbiAgICB9LFxuXG4gICAgJ2V4dHJhVXJsUGFyYW1zUmVwbGFjZU1hcCc6IHtcbiAgICAgICdhYl90ZXN0JzogJ2guYWInLFxuICAgICAgJ3BhZ2VfZ3JvdXAnOiAnaC5wZycsXG4gICAgICAnY3VzdG9tX2RpbWVuc2lvbi4nOiAnY2RpbS4nLFxuICAgICAgJ2N1c3RvbV9tZXRyaWMuJzogJ2NtZXQuJyxcbiAgICB9LFxuICB9LFxuXG4gICdsaW5rcHVsc2UnOiB7XG4gICAgJ3ZhcnMnOiB7XG4gICAgICAnaWQnOiAnJyxcbiAgICAgICdwYWdlVXJsJzogJ0NBTk9OSUNBTF9VUkwnLFxuICAgICAgJ3RpdGxlJzogJ1RJVExFJyxcbiAgICAgICdzZWN0aW9uJzogJycsXG4gICAgICAnY2hhbm5lbCc6ICdhbXAnLFxuICAgICAgJ3R5cGUnOiAnJyxcbiAgICAgICdob3N0JzogJ3BwLmxwNC5pbycsXG4gICAgICAnZW1wdHknOiAnJyxcbiAgICB9LFxuICAgICdyZXF1ZXN0cyc6IHtcbiAgICAgICdiYXNlJzogJ2h0dHBzOi8vJHtob3N0fScsXG4gICAgICAncGFnZXZpZXcnOiAnJHtiYXNlfS9wP2k9JHtpZH0nICtcbiAgICAgICAgICAgICAgICAnJnI9JHtkb2N1bWVudFJlZmVycmVyfScgK1xuICAgICAgICAgICAgICAgICcmcD0ke3BhZ2VVcmx9JyArXG4gICAgICAgICAgICAgICAgJyZzPSR7c2VjdGlvbn0nICtcbiAgICAgICAgICAgICAgICAnJnQ9JHt0eXBlfScgK1xuICAgICAgICAgICAgICAgICcmYz0ke2NoYW5uZWx9JyArXG4gICAgICAgICAgICAgICAgJyZtdD0ke3RpdGxlfScgK1xuICAgICAgICAgICAgICAgICcmX3Q9YW1wJyArXG4gICAgICAgICAgICAgICAgJyZfcj0ke3JhbmRvbX0nLFxuICAgICAgJ3BhZ2Vsb2FkJzogJyR7YmFzZX0vcGw/aT0ke2lkfScgK1xuICAgICAgICAgICAgICAgICcmY3Q9JHtkb21JbnRlcmFjdGl2ZVRpbWV9JyArXG4gICAgICAgICAgICAgICAgJyZydD0ke3BhZ2VEb3dubG9hZFRpbWV9JyArXG4gICAgICAgICAgICAgICAgJyZwdD0ke3BhZ2VMb2FkVGltZX0nICtcbiAgICAgICAgICAgICAgICAnJnA9JHtwYWdlVXJsfScgK1xuICAgICAgICAgICAgICAgICcmYz0ke2NoYW5uZWx9JyArXG4gICAgICAgICAgICAgICAgJyZ0PSR7dHlwZX0nICtcbiAgICAgICAgICAgICAgICAnJnM9JHtzZWN0aW9ufScgK1xuICAgICAgICAgICAgICAgICcmX3Q9YW1wJyArXG4gICAgICAgICAgICAgICAgJyZfcj0ke3JhbmRvbX0nLFxuICAgICAgJ3BpbmcnOiAnJHtiYXNlfS91P2k9JHtpZH0nICtcbiAgICAgICAgICAgICAgICAnJnU9JHtjbGllbnRJZChfbHA0X3UpfScgK1xuICAgICAgICAgICAgICAgICcmcD0ke3BhZ2VVcmx9JyArXG4gICAgICAgICAgICAgICAgJyZ1QWN0aXZlPXRydWUnICtcbiAgICAgICAgICAgICAgICAnJmlzUGluZz15ZXMnICtcbiAgICAgICAgICAgICAgICAnJmM9JHtjaGFubmVsfScgK1xuICAgICAgICAgICAgICAgICcmdD0ke3R5cGV9JyArXG4gICAgICAgICAgICAgICAgJyZzPSR7c2VjdGlvbn0nICtcbiAgICAgICAgICAgICAgICAnJl90PWFtcCcgK1xuICAgICAgICAgICAgICAgICcmX3I9JHtyYW5kb219JyxcbiAgICB9LFxuICAgICd0cmlnZ2Vycyc6IHtcbiAgICAgICdwYWdldmlldyc6IHtcbiAgICAgICAgJ29uJzogJ3Zpc2libGUnLFxuICAgICAgICAncmVxdWVzdCc6ICdwYWdldmlldycsXG4gICAgICB9LFxuICAgICAgJ3BhZ2Vsb2FkJzoge1xuICAgICAgICAnb24nOiAndmlzaWJsZScsXG4gICAgICAgICdyZXF1ZXN0JzogJ3BhZ2Vsb2FkJyxcbiAgICAgIH0sXG4gICAgICAncGluZyc6IHtcbiAgICAgICAgJ29uJzogJ3RpbWVyJyxcbiAgICAgICAgJ3RpbWVyU3BlYyc6IHtcbiAgICAgICAgICAnaW50ZXJ2YWwnOiAzMCxcbiAgICAgICAgICAnbWF4VGltZXJMZW5ndGgnOiA3MjAwLFxuICAgICAgICB9LFxuICAgICAgICAncmVxdWVzdCc6ICdwaW5nJyxcblxuICAgICAgfSxcbiAgICB9LFxuICAgICd0cmFuc3BvcnQnOiB7XG4gICAgICAnYmVhY29uJzogZmFsc2UsXG4gICAgICAneGhycG9zdCc6IGZhbHNlLFxuICAgICAgJ2ltYWdlJzogdHJ1ZSxcbiAgICB9LFxuICB9LFxuICAncmFrYW0nOiB7XG4gICAgJ3ZhcnMnOiB7XG4gICAgICAnZGV2aWNlSWQnOiAnQ0xJRU5UX0lEKHJha2FtX2RldmljZV9pZCknLFxuICAgIH0sXG4gICAgJ3JlcXVlc3RzJzoge1xuICAgICAgJ2Jhc2UnOiAnP2FwaS5hcGlfa2V5PSR7d3JpdGVLZXl9JyArXG4gICAgICAgICcmcHJvcC5fcGxhdGZvcm09YW1wJyArXG4gICAgICAgICcmcHJvcC5fZGV2aWNlX2lkPSR7ZGV2aWNlSWR9JyArXG4gICAgICAgICcmcHJvcC5sb2NhbGU9JHticm93c2VyTGFuZ3VhZ2V9JyArXG4gICAgICAgICcmcHJvcC5wYXRoPSR7Y2Fub25pY2FsUGF0aH0nICtcbiAgICAgICAgJyZwcm9wLnVybD0ke2Nhbm9uaWNhbFVybH0nICtcbiAgICAgICAgJyZwcm9wLmNvbG9yX2RlcHRoPSR7c2NyZWVuQ29sb3JEZXB0aH0nICtcbiAgICAgICAgJyZwcm9wLl9yZWZlcnJlcj0ke2RvY3VtZW50UmVmZXJyZXJ9JyArXG4gICAgICAgICcmcHJvcC50aXRsZT0ke3RpdGxlfScgK1xuICAgICAgICAnJnByb3AudGltZXpvbmU9JHt0aW1lem9uZX0nICtcbiAgICAgICAgJyZwcm9wLl90aW1lPSR7dGltZXN0YW1wfScgK1xuICAgICAgICAnJnByb3AucmVzb2x1dGlvbj0ke3NjcmVlbldpZHRofSDDlyAke3NjcmVlbkhlaWdodH0nLFxuICAgICAgJ3BhZ2V2aWV3JzogJ2h0dHBzOi8vJHthcGlFbmRwb2ludH0vZXZlbnQvcGl4ZWwke2Jhc2V9JmNvbGxlY3Rpb249JHtwYWdlVmlld05hbWV9JyxcbiAgICAgICdjdXN0b20nOiAnaHR0cHM6Ly8ke2FwaUVuZHBvaW50fS9ldmVudC9waXhlbCR7YmFzZX0mY29sbGVjdGlvbj0ke2NvbGxlY3Rpb259JyxcbiAgICB9LFxuICB9LFxuICAnaWJlYXRhbmFseXRpY3MnOiB7XG4gICAgJ3JlcXVlc3RzJzoge1xuICAgICAgJ2hvc3QnOiAnaHR0cHM6Ly9pYmVhdC5pbmRpYXRpbWVzLmNvbScsXG4gICAgICAnYmFzZSc6ICdodHRwczovL2liZWF0LmluZGlhdGltZXMuY29tL2lCZWF0L3BhZ2VUcmVuZGxvZ0FtcC5odG1sJyxcbiAgICAgICdwYWdldmlldyc6ICcke2Jhc2V9PycgK1xuICAgICAgICAgICAgICAgICcmaD0ke2h9JyArXG4gICAgICAgICAgICAgICAgJyZkPSR7aH0nICtcbiAgICAgICAgICAgICAgICAnJnVybD0ke3VybH0nICtcbiAgICAgICAgICAgICAgICAnJms9JHtrZXl9JyArXG4gICAgICAgICAgICAgICAgJyZ0cz0ke3RpbWV9JyArXG4gICAgICAgICAgICAgICAgJyZjaD0ke2NoYW5uZWx9JyArXG4gICAgICAgICAgICAgICAgJyZzaWQ9JHt1aWR9JyArXG4gICAgICAgICAgICAgICAgJyZhdD0ke2FnZW50VHlwZX0nICtcbiAgICAgICAgICAgICAgICAnJnJlZj0ke2RvY3VtZW50UmVmZXJyZXJ9JyArXG4gICAgICAgICAgICAgICAgJyZhaWQ9JHthaWR9JyArXG4gICAgICAgICAgICAgICAgJyZsb2M9MScgK1xuICAgICAgICAgICAgICAgICcmY3Q9MScgK1xuICAgICAgICAgICAgICAgICcmY2F0PSR7Y2F0fScgK1xuICAgICAgICAgICAgICAgICcmc2NhdD0ke3NjYXR9JyArXG4gICAgICAgICAgICAgICAgJyZhYz0xJyArXG4gICAgICAgICAgICAgICAgJyZ0Zz0ke3RhZ3N9JyArXG4gICAgICAgICAgICAgICAgJyZjdGlkcz0ke2NhdElkc30nICtcbiAgICAgICAgICAgICAgICAnJnB0cz0ke3BhZ2VQdWJsaXNoVGltZX0nICtcbiAgICAgICAgICAgICAgICAnJmF1dGg9JHthdXRob3J9JyArXG4gICAgICAgICAgICAgICAgJyZwb3M9JHtwb3NpdGlvbn0nICtcbiAgICAgICAgICAgICAgICAnJmlCZWF0RmllbGQ9JHtpYmVhdEZpZWxkc30nICtcbiAgICAgICAgICAgICAgICAnJmNpZD0ke2NsaWVudElkKE1TQ1NBdXRoRGV0YWlscyl9JyxcbiAgICB9LFxuICAgICd0cmlnZ2Vycyc6IHtcbiAgICAgICdkZWZhdWx0UGFnZXZpZXcnOiB7XG4gICAgICAgICdvbic6ICd2aXNpYmxlJyxcbiAgICAgICAgJ3JlcXVlc3QnOiAncGFnZXZpZXcnLFxuICAgICAgfSxcbiAgICB9LFxuICB9LFxuXG4gICd0b3BtYWlscnUnOiB7XG4gICAgJ3RyYW5zcG9ydCc6IHtcbiAgICAgICdiZWFjb24nOiBmYWxzZSxcbiAgICAgICd4aHJwb3N0JzogZmFsc2UsXG4gICAgICAnaW1hZ2UnOiB0cnVlLFxuICAgIH0sXG4gICAgJ3ZhcnMnOiB7XG4gICAgICAndXJsJzogJyR7c291cmNlVXJsfScsXG4gICAgICAncmVmZXJyZXInOiAnJHtkb2N1bWVudFJlZmVycmVyfScsXG4gICAgfSxcbiAgICAncmVxdWVzdHMnOiB7XG4gICAgICAncGFnZVZpZXcnOiAnJHtfZG9tYWlufS9jb3VudGVyPyR7X2Jhc2ljTWVzc2FnZX07dGl0bGU9JHt0aXRsZX0nLFxuICAgICAgJ3JlYWNoR29hbCc6ICcke19kb21haW59L3RyYWNrZXI/JHtfYmFzaWNNZXNzYWdlfTt0aXRsZT0ke3RpdGxlfScgK1xuICAgICAgICAgICAgICAgICAgICc7ZT1SRyUzQSR7dmFsdWV9JTJGJHtnb2FsfScsXG4gICAgICAnc2VuZEV2ZW50JzogJyR7X2RvbWFpbn0vdHJhY2tlcj8ke19iYXNpY01lc3NhZ2V9JyArXG4gICAgICAgICAgICAgICAgICAgJztlPUNFJTNBJHt2YWx1ZX0lMkYke2NhdGVnb3J5fSUzQiR7YWN0aW9ufSUzQiR7bGFiZWx9JyxcbiAgICAgICdfZG9tYWluJzogJ2h0dHBzOi8vdG9wLWZ3ejEubWFpbC5ydScsXG4gICAgICAnX2Jhc2ljTWVzc2FnZSc6ICdqcz0xMztpZD0ke2lkfTt1PSR7dXJsfTtyPSR7cmVmZXJyZXJ9JyArXG4gICAgICAgICAgICAgICAgICAgICAgICc7cz0ke3NjcmVlbldpZHRofSoke3NjcmVlbkhlaWdodH0nICtcbiAgICAgICAgICAgICAgICAgICAgICAgJzt2cD0ke3ZpZXdwb3J0V2lkdGh9KiR7dmlld3BvcnRIZWlnaHR9JyArXG4gICAgICAgICAgICAgICAgICAgICAgICc7c3Q9JHtzdGFydH07Z2VuZGVyPSR7Z2VuZGVyfTthZ2U9JHthZ2V9JyArXG4gICAgICAgICAgICAgICAgICAgICAgICc7cGlkPSR7cGlkfTt1c2VyaWQ9JHt1c2VyaWR9O2RldmljZT0ke2RldmljZX0nICtcbiAgICAgICAgICAgICAgICAgICAgICAgJztwYXJhbXM9JHtwYXJhbXN9O189JHtyYW5kb219JyxcbiAgICB9LFxuICAgICd0cmlnZ2Vycyc6IHtcbiAgICAgICdwYWdlVmlldyc6IHtcbiAgICAgICAgJ29uJzogJ3Zpc2libGUnLFxuICAgICAgICAncmVxdWVzdCc6ICdwYWdlVmlldycsXG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG5cbiAgJ21vYXQnOiB7XG4gICAgJ3ZhcnMnOiB7XG4gICAgICAnZWxlbWVudCc6ICc6cm9vdCcsXG4gICAgfSxcbiAgICAncmVxdWVzdHMnOiB7XG4gICAgICAnbG9hZCc6IEpTT04uc3RyaW5naWZ5KC8qKiBAdHlwZSB7IUpzb25PYmplY3R9ICovICh7XG4gICAgICAgICd0eXBlJzogJ2xvYWQnLFxuICAgICAgICAncGNvZGUnOiAnJHtwY29kZX0nLFxuICAgICAgICAnbDB0JzogJyR7bDB0fScsXG4gICAgICAgICdhY2N0VHlwZSc6ICcke2FjY3RUeXBlfScsXG4gICAgICAgICdhZFR5cGUnOiAnJHthZFR5cGV9JyxcbiAgICAgICAgJ3FzJzogJyR7cXN9JyxcbiAgICAgICAgJ2VsZW1lbnQnOiB7XG4gICAgICAgICAgJ3NyYyc6ICcke2h0bWxBdHRyKGltZyxzcmMsd2lkdGgpfScsXG4gICAgICAgICAgJ3ZpZXdlcic6ICcke3ZpZXdlcn0nLFxuICAgICAgICB9LFxuICAgICAgICAnZG9jdW1lbnQnOiB7XG4gICAgICAgICAgJ0FNUERvY3VtZW50SG9zdG5hbWUnOiAnJHthbXBkb2NIb3N0bmFtZX0nLFxuICAgICAgICAgICdBTVBEb2N1bWVudFVSTCc6ICcke2FtcGRvY1VybH0nLFxuICAgICAgICAgICdjYW5vbmljYWxIb3N0JzogJyR7Y2Fub25pY2FsSG9zdH0nLFxuICAgICAgICAgICdjYW5vbmljYWxIb3N0bmFtZSc6ICcke2Nhbm9uaWNhbEhvc3RuYW1lfScsXG4gICAgICAgICAgJ2Nhbm9uaWNhbFBhdGgnOiAnJHtjYW5vbmljYWxQYXRofScsXG4gICAgICAgICAgJ2Nhbm9uaWNhbFVSTCc6ICcke2Nhbm9uaWNhbFVybH0nLFxuICAgICAgICAgICdkb2N1bWVudENoYXJzZXQnOiAnJHtkb2N1bWVudENoYXJzZXR9JyxcbiAgICAgICAgICAnZG9jdW1lbnRSZWZlcnJlcic6ICcke2RvY3VtZW50UmVmZXJyZXJ9JyxcbiAgICAgICAgICAnZXh0ZXJuYWxSZWZlcnJlcic6ICcke2V4dGVybmFsUmVmZXJyZXJ9JyxcbiAgICAgICAgICAnc291cmNlVVJMJzogJyR7c291cmNlVXJsfScsXG4gICAgICAgICAgJ3NvdXJjZUhvc3QnOiAnJHtzb3VyY2VIb3N0fScsXG4gICAgICAgICAgJ3NvdXJjZUhvc3RuYW1lJzogJyR7c291cmNlSG9zdG5hbWV9JyxcbiAgICAgICAgICAnc291cmNlUGF0aCc6ICcke3NvdXJjZVBhdGh9JyxcbiAgICAgICAgICAndGl0bGUnOiAnJHt0aXRsZX0nLFxuICAgICAgICAgICd2aWV3ZXInOiAnJHt2aWV3ZXJ9JyxcbiAgICAgICAgfSxcbiAgICAgICAgJ2RldmljZSc6IHtcbiAgICAgICAgICAnYXZhaWxhYmxlU2NyZWVuSGVpZ2h0JzogJyR7YXZhaWxhYmxlU2NyZWVuSGVpZ2h0fScsXG4gICAgICAgICAgJ2F2YWlsYWJsZVNjcmVlbldpZHRoJzogJyR7YXZhaWxhYmxlU2NyZWVuV2lkdGh9JyxcbiAgICAgICAgICAnYnJvd3Nlckxhbmd1YWdlJzogJyR7YnJvd3Nlckxhbmd1YWdlfScsXG4gICAgICAgICAgJ3NjcmVlbkNvbG9yRGVwdGgnOiAnJHtzY3JlZW5Db2xvckRlcHRofScsXG4gICAgICAgICAgJ3NjcmVlbkhlaWdodCc6ICcke3NjcmVlbkhlaWdodH0nLFxuICAgICAgICAgICdzY3JlZW5XaWR0aCc6ICcke3NjcmVlbldpZHRofScsXG4gICAgICAgICAgJ3Njcm9sbEhlaWdodCc6ICcke3Njcm9sbEhlaWdodH0nLFxuICAgICAgICAgICdzY3JvbGxXaWR0aCc6ICcke3Njcm9sbFdpZHRofScsXG4gICAgICAgICAgJ3Njcm9sbExlZnQnOiAnJHtzY3JvbGxMZWZ0fScsXG4gICAgICAgICAgJ3Njcm9sbFRvcCc6ICcke3Njcm9sbFRvcH0nLFxuICAgICAgICAgICd0aW1lem9uZSc6ICcke3RpbWV6b25lfScsXG4gICAgICAgICAgJ3VzZXJBZ2VudCc6ICcke3VzZXJBZ2VudH0nLFxuICAgICAgICAgICd2aWV3cG9ydEhlaWdodCc6ICcke3ZpZXdwb3J0SGVpZ2h0fScsXG4gICAgICAgICAgJ3ZpZXdwb3J0V2lkdGgnOiAnJHt2aWV3cG9ydFdpZHRofScsXG4gICAgICAgIH0sXG4gICAgICAgICdyZXF1ZXN0Q291bnQnOiAnJHtyZXF1ZXN0Q291bnR9JyxcbiAgICAgICAgJ3RpbWVTdGFtcCc6ICcke3RpbWVzdGFtcH0nLFxuICAgICAgfSkpLFxuICAgICAgJ3VubG9hZCc6IEpTT04uc3RyaW5naWZ5KC8qKiBAdHlwZSB7IUpzb25PYmplY3R9ICovICh7XG4gICAgICAgICd0eXBlJzogJ3VubG9hZCcsXG4gICAgICAgICdwY29kZSc6ICcke3Bjb2RlfScsXG4gICAgICAgICdsMHQnOiAnJHtsMHR9JyxcbiAgICAgICAgJ3JlcXVlc3RDb3VudCc6ICcke3JlcXVlc3RDb3VudH0nLFxuICAgICAgICAndGltZVN0YW1wJzogJyR7dGltZXN0YW1wfScsXG4gICAgICB9KSksXG4gICAgICAnY2xpY2snOiBKU09OLnN0cmluZ2lmeSgvKiogQHR5cGUgeyFKc29uT2JqZWN0fSAqLyAoe1xuICAgICAgICAndHlwZSc6ICdjbGljaycsXG4gICAgICAgICdwY29kZSc6ICcke3Bjb2RlfScsXG4gICAgICAgICdsMHQnOiAnJHtsMHR9JyxcbiAgICAgICAgJ3JlcXVlc3RDb3VudCc6ICcke3JlcXVlc3RDb3VudH0nLFxuICAgICAgICAndGltZVN0YW1wJzogJyR7dGltZXN0YW1wfScsXG4gICAgICB9KSksXG4gICAgICAndmlld2FiaWxpdHknOiBKU09OLnN0cmluZ2lmeSgvKiogQHR5cGUgeyFKc29uT2JqZWN0fSAqLyAoe1xuICAgICAgICAndHlwZSc6ICd2aWV3YWJpbGl0eScsXG4gICAgICAgICdwY29kZSc6ICcke3Bjb2RlfScsXG4gICAgICAgICdsMHQnOiAnJHtsMHR9JyxcbiAgICAgICAgJ2JhY2tncm91bmRTdGF0ZSc6ICcke2JhY2tncm91bmRTdGF0ZX0nLFxuICAgICAgICAnaW50ZXJzZWN0aW9uUmVjdCc6ICcke2ludGVyc2VjdGlvblJlY3R9JyxcbiAgICAgICAgJ2ludGVyc2VjdGlvblJhdGlvJzogJyR7aW50ZXJzZWN0aW9uUmF0aW99JyxcbiAgICAgICAgJ21heFZpc2libGVQZXJjZW50YWdlJzogJyR7bWF4VmlzaWJsZVBlcmNlbnRhZ2V9JyxcbiAgICAgICAgJ21pblZpc2libGVQZXJjZW50YWdlJzogJyR7bWluVmlzaWJsZVBlcmNlbnRhZ2V9JyxcbiAgICAgICAgJ3gnOiAnJHtlbGVtZW50WH0nLFxuICAgICAgICAneSc6ICcke2VsZW1lbnRZfScsXG4gICAgICAgICdoZWlnaHQnOiAnJHtlbGVtZW50SGVpZ2h0fScsXG4gICAgICAgICd3aWR0aCc6ICcke2VsZW1lbnRXaWR0aH0nLFxuICAgICAgICAndmlld3BvcnRIZWlnaHQnOiAnJHt2aWV3cG9ydEhlaWdodH0nLFxuICAgICAgICAndmlld3BvcnRXaWR0aCc6ICcke3ZpZXdwb3J0V2lkdGh9JyxcbiAgICAgICAgJ29wYWNpdHknOiAnJHtvcGFjaXR5fScsXG4gICAgICAgICd0aW1lU3RhbXAnOiAnJHt0aW1lc3RhbXB9JyxcbiAgICAgICAgJ3JlcXVlc3RDb3VudCc6ICcke3JlcXVlc3RDb3VudH0nLFxuICAgICAgfSkpLFxuICAgICAgJ2lmcmFtZSc6IEpTT04uc3RyaW5naWZ5KC8qKiBAdHlwZSB7IUpzb25PYmplY3R9ICovICh7XG4gICAgICAgICd0eXBlJzogJ2lmcmFtZScsXG4gICAgICAgICdwY29kZSc6ICcke3Bjb2RlfScsXG4gICAgICAgICdoZWlnaHQnOiAnJHtlbGVtZW50SGVpZ2h0fScsXG4gICAgICAgICd3aWR0aCc6ICcke2VsZW1lbnRXaWR0aH0nLFxuICAgICAgICAneCc6ICcke2VsZW1lbnRYfScsXG4gICAgICAgICd5JzogJyR7ZWxlbWVudFl9JyxcbiAgICAgICAgJ3JlcXVlc3RDb3VudCc6ICcke3JlcXVlc3RDb3VudH0nLFxuICAgICAgfSkpLFxuICAgIH0sXG4gICAgJ3RyaWdnZXJzJzoge1xuICAgICAgJ2xvYWQnOiB7XG4gICAgICAgICdvbic6ICdpbmktbG9hZCcsXG4gICAgICAgICdyZXF1ZXN0JzogJ2xvYWQnLFxuICAgICAgfSxcbiAgICAgICd1bmxvYWQnOiB7XG4gICAgICAgICdvbic6ICdhZC1yZWZyZXNoJyxcbiAgICAgICAgJ3NlbGVjdG9yJzogJyR7ZWxlbWVudH0nLFxuICAgICAgICAncmVxdWVzdCc6ICd1bmxvYWQnLFxuICAgICAgfSxcbiAgICAgICdjbGljayc6IHtcbiAgICAgICAgJ29uJzogJ2NsaWNrJyxcbiAgICAgICAgJ3NlbGVjdG9yJzogJyR7ZWxlbWVudH0nLFxuICAgICAgICAncmVxdWVzdCc6ICdjbGljaycsXG4gICAgICB9LFxuICAgICAgJ3ZpZXdhYmlsaXR5Jzoge1xuICAgICAgICAnb24nOiAndmlzaWJsZScsXG4gICAgICAgICdzZWxlY3Rvcic6ICcke2VsZW1lbnR9JyxcbiAgICAgICAgJ3JlcXVlc3QnOiAndmlld2FiaWxpdHknLFxuICAgICAgICAndmlzaWJpbGl0eVNwZWMnOiB7XG4gICAgICAgICAgJ3JlcGVhdCc6IHRydWUsXG4gICAgICAgICAgJ3Zpc2libGVQZXJjZW50YWdlVGhyZXNob2xkcyc6IFtcbiAgICAgICAgICAgIFswLDBdLFswLDVdLFs1LDEwXSxbMTAsMTVdLFsxNSwyMF0sWzIwLDI1XSxcbiAgICAgICAgICAgIFsyNSwzMF0sWzMwLDM1XSxbMzUsNDBdLFs0MCw0NV0sWzQ1LDUwXSxcbiAgICAgICAgICAgIFs1MCw1NV0sWzU1LDYwXSxbNjAsNjVdLFs2NSw3MF0sWzcwLDc1XSxcbiAgICAgICAgICAgIFs3NSw4MF0sWzgwLDg1XSxbODUsOTBdLFs5MCw5NV0sWzk1LDEwMF0sWzEwMCwxMDBdLFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgJ2lmcmFtZSc6IHtcbiAgICAgICAgJ29uJzogJ3Zpc2libGUnLFxuICAgICAgICAnc2VsZWN0b3InOiAnOnJvb3QnLFxuICAgICAgICAncmVxdWVzdCc6ICdpZnJhbWUnLFxuICAgICAgICAndmlzaWJpbGl0eVNwZWMnOiB7XG4gICAgICAgICAgJ3JlcGVhdCc6IHRydWUsXG4gICAgICAgICAgJ3Zpc2libGVQZXJjZW50YWdlVGhyZXNob2xkcyc6IFtbMCwwXV0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG5cbiAgJ2JnJzoge1xuICB9LFxufSk7XG5cbkFOQUxZVElDU19DT05GSUdbJ2luZm9ubGluZSddWyd0cmlnZ2VycyddWydwYWdldmlldyddWydpZnJhbWUnICtcbi8qIFRFTVBPUkFSWSBFWENFUFRJT04gKi8gJ1BpbmcnXSA9IHRydWU7XG5cbkFOQUxZVElDU19DT05GSUdbJ2Fkb2JlYW5hbHl0aWNzX25hdGl2ZUNvbmZpZyddXG4gICAgWyd0cmlnZ2VycyddWydwYWdlTG9hZCddWydpZnJhbWUnICtcbiAgICAvKiBURU1QT1JBUlkgRVhDRVBUSU9OICovICdQaW5nJ10gPSB0cnVlO1xuXG5BTkFMWVRJQ1NfQ09ORklHWydvZXdhJ11bJ3RyaWdnZXJzJ11bJ3BhZ2V2aWV3J11bJ2lmcmFtZScgK1xuLyogVEVNUE9SQVJZIEVYQ0VQVElPTiAqLyAnUGluZyddID0gdHJ1ZTtcblxubWVyZ2VJZnJhbWVUcmFuc3BvcnRDb25maWcoQU5BTFlUSUNTX0NPTkZJRywgSUZSQU1FX1RSQU5TUE9SVFMpO1xuXG4vKipcbiAqIE1lcmdlcyBpZnJhbWUgdHJhbnNwb3J0IGNvbmZpZy5cbiAqXG4gKiBAcGFyYW0geyFKc29uT2JqZWN0fSBjb25maWdcbiAqIEBwYXJhbSB7IUpzb25PYmplY3R9IGlmcmFtZVRyYW5zcG9ydENvbmZpZ1xuICovXG5mdW5jdGlvbiBtZXJnZUlmcmFtZVRyYW5zcG9ydENvbmZpZyhjb25maWcsIGlmcmFtZVRyYW5zcG9ydENvbmZpZykge1xuICBmb3IgKGNvbnN0IHZlbmRvciBpbiBpZnJhbWVUcmFuc3BvcnRDb25maWcpIHtcbiAgICBpZiAoaGFzT3duKGlmcmFtZVRyYW5zcG9ydENvbmZpZywgdmVuZG9yKSkge1xuICAgICAgY29uc3QgdXJsID0gaWZyYW1lVHJhbnNwb3J0Q29uZmlnW3ZlbmRvcl07XG4gICAgICBjb25maWdbdmVuZG9yXVsndHJhbnNwb3J0J10gPVxuICAgICAgICAgIE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZ1t2ZW5kb3JdWyd0cmFuc3BvcnQnXSwgeydpZnJhbWUnOiB1cmx9KTtcbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICBERUZBVUxUX1RIUkVTSE9MRCxcbiAgSW50ZXJzZWN0aW9uT2JzZXJ2ZXJQb2x5ZmlsbCxcbiAgbmF0aXZlSW50ZXJzZWN0aW9uT2JzZXJ2ZXJTdXBwb3J0ZWQsXG59IGZyb20gJy4uLy4uLy4uL3NyYy9pbnRlcnNlY3Rpb24tb2JzZXJ2ZXItcG9seWZpbGwnO1xuaW1wb3J0IHtTZXJ2aWNlc30gZnJvbSAnLi4vLi4vLi4vc3JjL3NlcnZpY2VzJztcbmltcG9ydCB7VmlzaWJpbGl0eU1vZGVsfSBmcm9tICcuL3Zpc2liaWxpdHktbW9kZWwnO1xuaW1wb3J0IHtkZXYsIHVzZXJ9IGZyb20gJy4uLy4uLy4uL3NyYy9sb2cnO1xuaW1wb3J0IHtnZXRNb2RlfSBmcm9tICcuLi8uLi8uLi9zcmMvbW9kZSc7XG5pbXBvcnQge2lzQXJyYXksIGlzRmluaXRlTnVtYmVyfSBmcm9tICcuLi8uLi8uLi9zcmMvdHlwZXMnO1xuaW1wb3J0IHtsYXlvdXRSZWN0THR3aH0gZnJvbSAnLi4vLi4vLi4vc3JjL2xheW91dC1yZWN0JztcbmltcG9ydCB7bWFwfSBmcm9tICcuLi8uLi8uLi9zcmMvdXRpbHMvb2JqZWN0JztcblxuY29uc3QgVEFHID0gJ1ZJU0lCSUxJVFktTUFOQUdFUic7XG5cbmNvbnN0IFZJU0lCSUxJVFlfSURfUFJPUCA9ICdfX0FNUF9WSVNfSUQnO1xuXG4vKiogQHR5cGUge251bWJlcn0gKi9cbmxldCB2aXNpYmlsaXR5SWRDb3VudGVyID0gMTtcblxuXG4vKipcbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuZnVuY3Rpb24gZ2V0RWxlbWVudElkKGVsZW1lbnQpIHtcbiAgbGV0IGlkID0gZWxlbWVudFtWSVNJQklMSVRZX0lEX1BST1BdO1xuICBpZiAoIWlkKSB7XG4gICAgaWQgPSArK3Zpc2liaWxpdHlJZENvdW50ZXI7XG4gICAgZWxlbWVudFtWSVNJQklMSVRZX0lEX1BST1BdID0gaWQ7XG4gIH1cbiAgcmV0dXJuIGlkO1xufVxuXG5cbi8qKlxuICogQSBiYXNlIGNsYXNzIGZvciBgVmlzaWJpbGl0eU1hbmFnZXJGb3JEb2NgIGFuZCBgVmlzaWJpbGl0eU1hbmFnZXJGb3JFbWJlZGAuXG4gKiBUaGUgaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcyBjb3JyZXNwb25kcyAxOjEgdG8gYEFuYWx5dGljc1Jvb3RgLiBJdCByZXByZXNlbnRzXG4gKiBhIGNvbGxlY3Rpb24gb2YgYWxsIHZpc2liaWxpdHkgdHJpZ2dlcnMgZGVjbGFyZWQgd2l0aGluIHRoZSBgQW5hbHl0aWNzUm9vdGAuXG4gKiBAaW1wbGVtZW50cyB7Li4vLi4vLi4vc3JjL3NlcnZpY2UuRGlzcG9zYWJsZX1cbiAqIEBhYnN0cmFjdFxuICovXG5leHBvcnQgY2xhc3MgVmlzaWJpbGl0eU1hbmFnZXIge1xuICAvKipcbiAgICogQHBhcmFtIHs/VmlzaWJpbGl0eU1hbmFnZXJ9IHBhcmVudFxuICAgKiBAcGFyYW0geyEuLi8uLi8uLi9zcmMvc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGFtcGRvY1xuICAgKi9cbiAgY29uc3RydWN0b3IocGFyZW50LCBhbXBkb2MpIHtcbiAgICAvKiogQGNvbnN0IEBwcm90ZWN0ZWQgKi9cbiAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcblxuICAgIC8qKiBAY29uc3QgQHByb3RlY3RlZCAqL1xuICAgIHRoaXMuYW1wZG9jID0gYW1wZG9jO1xuXG4gICAgLyoqIEBjb25zdCBAcHJpdmF0ZSAqL1xuICAgIHRoaXMucmVzb3VyY2VzXyA9IFNlcnZpY2VzLnJlc291cmNlc0ZvckRvYyhhbXBkb2MpO1xuXG4gICAgLyoqIEBwcml2YXRlIHtudW1iZXJ9ICovXG4gICAgdGhpcy5yb290VmlzaWJpbGl0eV8gPSAwO1xuXG4gICAgLyoqIEBjb25zdCBAcHJpdmF0ZSB7IUFycmF5PCFWaXNpYmlsaXR5TW9kZWw+fT4gKi9cbiAgICB0aGlzLm1vZGVsc18gPSBbXTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P0FycmF5PCFWaXNpYmlsaXR5TWFuYWdlcj59ICovXG4gICAgdGhpcy5jaGlsZHJlbl8gPSBudWxsO1xuXG4gICAgLyoqIEBjb25zdCBAcHJpdmF0ZSB7IUFycmF5PCFVbmxpc3RlbkRlZj59ICovXG4gICAgdGhpcy51bnN1YnNjcmliZV8gPSBbXTtcblxuICAgIGlmICh0aGlzLnBhcmVudCkge1xuICAgICAgdGhpcy5wYXJlbnQuYWRkQ2hpbGRfKHRoaXMpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFWaXNpYmlsaXR5TWFuYWdlcn0gY2hpbGRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFkZENoaWxkXyhjaGlsZCkge1xuICAgIGlmICghdGhpcy5jaGlsZHJlbl8pIHtcbiAgICAgIHRoaXMuY2hpbGRyZW5fID0gW107XG4gICAgfVxuICAgIHRoaXMuY2hpbGRyZW5fLnB1c2goY2hpbGQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVZpc2liaWxpdHlNYW5hZ2VyfSBjaGlsZFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcmVtb3ZlQ2hpbGRfKGNoaWxkKSB7XG4gICAgaWYgKHRoaXMuY2hpbGRyZW5fKSB7XG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMuY2hpbGRyZW5fLmluZGV4T2YoY2hpbGQpO1xuICAgICAgaWYgKGluZGV4ICE9IC0xKSB7XG4gICAgICAgIHRoaXMuY2hpbGRyZW5fLnNwbGljZShpbmRleCwgMSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBkaXNwb3NlKCkge1xuICAgIC8vIEdpdmUgdGhlIGNoYW5jZSBmb3IgYWxsIGV2ZW50cyB0byBjb21wbGV0ZS5cbiAgICB0aGlzLnNldFJvb3RWaXNpYmlsaXR5KDApO1xuXG4gICAgLy8gRGlzcG9zZSBhbGwgbW9kZWxzLlxuICAgIGZvciAobGV0IGkgPSB0aGlzLm1vZGVsc18ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHRoaXMubW9kZWxzX1tpXS5kaXNwb3NlKCk7XG4gICAgfVxuXG4gICAgLy8gVW5zdWJzY3JpYmUgZXZlcnl0aGluZyBlbHNlLlxuICAgIHRoaXMudW5zdWJzY3JpYmVfLmZvckVhY2godW5zdWJzY3JpYmUgPT4ge1xuICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICB9KTtcbiAgICB0aGlzLnVuc3Vic2NyaWJlXy5sZW5ndGggPSAwO1xuXG4gICAgaWYgKHRoaXMucGFyZW50KSB7XG4gICAgICB0aGlzLnBhcmVudC5yZW1vdmVDaGlsZF8odGhpcyk7XG4gICAgfVxuICAgIGlmICh0aGlzLmNoaWxkcmVuXykge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNoaWxkcmVuXy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLmNoaWxkcmVuX1tpXS5kaXNwb3NlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVVubGlzdGVuRGVmfSBoYW5kbGVyXG4gICAqL1xuICB1bnN1YnNjcmliZShoYW5kbGVyKSB7XG4gICAgdGhpcy51bnN1YnNjcmliZV8ucHVzaChoYW5kbGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgc3RhcnQgdGltZSBmcm9tIHdoaWNoIGFsbCB2aXNpYmlsaXR5IGV2ZW50cyBhbmQgdGltZXMgYXJlIG1lYXN1cmVkLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqIEBhYnN0cmFjdFxuICAgKi9cbiAgZ2V0U3RhcnRUaW1lKCkge31cblxuICAvKipcbiAgICogV2hldGhlciB0aGUgdmlzaWJpbGl0eSByb290IGlzIGN1cnJlbnRseSBpbiB0aGUgYmFja2dyb3VuZC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogQGFic3RyYWN0XG4gICAqL1xuICBpc0JhY2tncm91bmRlZCgpIHt9XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIHZpc2liaWxpdHkgcm9vdCBoYXMgYmVlbiBjcmVhdGVkIGluIHRoZSBiYWNrZ3JvdW5kIG1vZGUuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqIEBhYnN0cmFjdFxuICAgKi9cbiAgaXNCYWNrZ3JvdW5kZWRBdFN0YXJ0KCkge31cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgcm9vdCdzIGxheW91dCByZWN0LlxuICAgKiBAcmV0dXJuIHshLi4vLi4vLi4vc3JjL2xheW91dC1yZWN0LkxheW91dFJlY3REZWZ9fVxuICAgKiBAYWJzdHJhY3RcbiAgICovXG4gIGdldFJvb3RMYXlvdXRCb3goKSB7fVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICBnZXRSb290VmlzaWJpbGl0eSgpIHtcbiAgICBpZiAoIXRoaXMucGFyZW50KSB7XG4gICAgICByZXR1cm4gdGhpcy5yb290VmlzaWJpbGl0eV87XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnBhcmVudC5nZXRSb290VmlzaWJpbGl0eSgpID4gMCA/IHRoaXMucm9vdFZpc2liaWxpdHlfIDogMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gdmlzaWJpbGl0eVxuICAgKi9cbiAgc2V0Um9vdFZpc2liaWxpdHkodmlzaWJpbGl0eSkge1xuICAgIHRoaXMucm9vdFZpc2liaWxpdHlfID0gdmlzaWJpbGl0eTtcbiAgICB0aGlzLnVwZGF0ZU1vZGVsc18oKTtcbiAgICBpZiAodGhpcy5jaGlsZHJlbl8pIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbl8ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5jaGlsZHJlbl9baV0udXBkYXRlTW9kZWxzXygpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKiBAcHJpdmF0ZSAqL1xuICB1cGRhdGVNb2RlbHNfKCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tb2RlbHNfLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLm1vZGVsc19baV0udXBkYXRlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIExpc3RlbnMgdG8gdGhlIHZpc2liaWxpdHkgZXZlbnRzIG9uIHRoZSByb290IGFzIHRoZSB3aG9sZSBhbmQgdGhlIGdpdmVuXG4gICAqIHZpc2liaWxpdHkgc3BlYy4gVGhlIHZpc2liaWxpdHkgdHJhY2tpbmcgY2FuIGJlIGRlZmVycmVkIHVudGlsXG4gICAqIGByZWFkeVByb21pc2VgIGlzIHJlc29sdmVkLCBpZiBzcGVjaWZpZWQuXG4gICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsICo+fSBzcGVjXG4gICAqIEBwYXJhbSB7P1Byb21pc2V9IHJlYWR5UHJvbWlzZVxuICAgKiBAcGFyYW0gez9mdW5jdGlvbigpOiFQcm9taXNlfSBjcmVhdGVSZXBvcnRQcm9taXNlRnVuY1xuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFPYmplY3Q8c3RyaW5nLCAqPil9IGNhbGxiYWNrXG4gICAqIEByZXR1cm4geyFVbmxpc3RlbkRlZn1cbiAgICovXG4gIGxpc3RlblJvb3Qoc3BlYywgcmVhZHlQcm9taXNlLCBjcmVhdGVSZXBvcnRQcm9taXNlRnVuYywgY2FsbGJhY2spIHtcbiAgICBjb25zdCBjYWxjVmlzaWJpbGl0eSA9IHRoaXMuZ2V0Um9vdFZpc2liaWxpdHkuYmluZCh0aGlzKTtcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVNb2RlbEFuZExpc3Rlbl8oY2FsY1Zpc2liaWxpdHksIHNwZWMsIHJlYWR5UHJvbWlzZSxcbiAgICAgICAgY3JlYXRlUmVwb3J0UHJvbWlzZUZ1bmMsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaXN0ZW5zIHRvIHRoZSB2aXNpYmlsaXR5IGV2ZW50cyBmb3IgdGhlIHNwZWNpZmllZCBlbGVtZW50IGFuZCB0aGUgZ2l2ZW5cbiAgICogdmlzaWJpbGl0eSBzcGVjLiBUaGUgdmlzaWJpbGl0eSB0cmFja2luZyBjYW4gYmUgZGVmZXJyZWQgdW50aWxcbiAgICogYHJlYWR5UHJvbWlzZWAgaXMgcmVzb2x2ZWQsIGlmIHNwZWNpZmllZC5cbiAgICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCAqPn0gc3BlY1xuICAgKiBAcGFyYW0gez9Qcm9taXNlfSByZWFkeVByb21pc2VcbiAgICogQHBhcmFtIHs/ZnVuY3Rpb24oKTohUHJvbWlzZX0gY3JlYXRlUmVwb3J0UHJvbWlzZUZ1bmNcbiAgICogQHBhcmFtIHtmdW5jdGlvbighT2JqZWN0PHN0cmluZywgKj4pfSBjYWxsYmFja1xuICAgKiBAcmV0dXJuIHshVW5saXN0ZW5EZWZ9XG4gICAqL1xuICBsaXN0ZW5FbGVtZW50KFxuICAgIGVsZW1lbnQsIHNwZWMsIHJlYWR5UHJvbWlzZSwgY3JlYXRlUmVwb3J0UHJvbWlzZUZ1bmMsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgY2FsY1Zpc2liaWxpdHkgPSB0aGlzLmdldEVsZW1lbnRWaXNpYmlsaXR5LmJpbmQodGhpcywgZWxlbWVudCk7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlTW9kZWxBbmRMaXN0ZW5fKGNhbGNWaXNpYmlsaXR5LCBzcGVjLCByZWFkeVByb21pc2UsXG4gICAgICAgIGNyZWF0ZVJlcG9ydFByb21pc2VGdW5jLCBjYWxsYmFjaywgZWxlbWVudCk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIHZpc2liaWxpdHlNb2RlbCBhbmQgbGlzdGVuIHRvIHZpc2libGUgZXZlbnRzLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCk6bnVtYmVyfSBjYWxjVmlzaWJpbGl0eVxuICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCAqPn0gc3BlY1xuICAgKiBAcGFyYW0gez9Qcm9taXNlfSByZWFkeVByb21pc2VcbiAgICogQHBhcmFtIHs/ZnVuY3Rpb24oKTohUHJvbWlzZX0gY3JlYXRlUmVwb3J0UHJvbWlzZUZ1bmNcbiAgICogQHBhcmFtIHtmdW5jdGlvbighT2JqZWN0PHN0cmluZywgKj4pfSBjYWxsYmFja1xuICAgKiBAcGFyYW0geyFFbGVtZW50PX0gb3B0X2VsZW1lbnRcbiAgICogQHJldHVybiB7IVVubGlzdGVuRGVmfVxuICAgKi9cbiAgY3JlYXRlTW9kZWxBbmRMaXN0ZW5fKGNhbGNWaXNpYmlsaXR5LCBzcGVjLFxuICAgIHJlYWR5UHJvbWlzZSwgY3JlYXRlUmVwb3J0UHJvbWlzZUZ1bmMsIGNhbGxiYWNrLCBvcHRfZWxlbWVudCkge1xuICAgIGlmIChzcGVjWyd2aXNpYmxlUGVyY2VudGFnZVRocmVzaG9sZHMnXSAmJlxuICAgICAgICBzcGVjWyd2aXNpYmxlUGVyY2VudGFnZU1pbiddID09IHVuZGVmaW5lZCAmJlxuICAgICAgICBzcGVjWyd2aXNpYmxlUGVyY2VudGFnZU1heCddID09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgdW5saXN0ZW5lcnMgPSBbXTtcbiAgICAgIGNvbnN0IHJhbmdlcyA9IHNwZWNbJ3Zpc2libGVQZXJjZW50YWdlVGhyZXNob2xkcyddO1xuICAgICAgaWYgKCFyYW5nZXMgfHwgIWlzQXJyYXkocmFuZ2VzKSkge1xuICAgICAgICB1c2VyKCkuZXJyb3IoVEFHLCAnaW52YWxpZCB2aXNpYmxlUGVyY2VudGFnZVRocmVzaG9sZHMnKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHt9O1xuICAgICAgfVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgcGVyY2VudHMgPSByYW5nZXNbaV07XG4gICAgICAgIGlmICghaXNBcnJheShwZXJjZW50cykgfHwgcGVyY2VudHMubGVuZ3RoICE9IDIpIHtcbiAgICAgICAgICB1c2VyKCkuZXJyb3IoVEFHLFxuICAgICAgICAgICAgICAndmlzaWJsZVBlcmNlbnRhZ2VUaHJlc2hvbGRzIGVudHJ5IGxlbmd0aCBpcyBub3QgMicpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNGaW5pdGVOdW1iZXIocGVyY2VudHNbMF0pIHx8ICFpc0Zpbml0ZU51bWJlcihwZXJjZW50c1sxXSkpIHtcbiAgICAgICAgICAvLyBub3QgdmFsaWQgbnVtYmVyXG4gICAgICAgICAgdXNlcigpLmVycm9yKFRBRyxcbiAgICAgICAgICAgICAgJ3Zpc2libGVQZXJjZW50YWdlVGhyZXNob2xkcyBlbnRyeSBpcyBub3QgdmFsaWQgbnVtYmVyJyk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWluID0gTnVtYmVyKHBlcmNlbnRzWzBdKTtcbiAgICAgICAgY29uc3QgbWF4ID0gTnVtYmVyKHBlcmNlbnRzWzFdKTtcbiAgICAgICAgLy8gTWluIGFuZCBtYXggbXVzdCBiZSB2YWxpZCBwZXJjZW50YWdlcy4gTWluIG1heSBub3QgYmUgbW9yZSB0aGFuIG1heC5cbiAgICAgICAgLy8gTWF4IGlzIGluY2x1c2l2ZS4gTWluIGlzIHVzdWFsbHkgZXhjbHVzaXZlLCBidXQgdGhlcmUgYXJlIHR3b1xuICAgICAgICAvLyBzcGVjaWFsIGNhc2VzOiBpZiBtaW4gYW5kIG1heCBhcmUgYm90aCAwLCBvciBib3RoIDEwMCwgdGhlbiBib3RoXG4gICAgICAgIC8vIGFyZSBpbmNsdXNpdmUuIE90aGVyd2lzZSBpdCB3b3VsZCBub3QgYmUgcG9zc2libGUgdG8gdHJpZ2dlciBhblxuICAgICAgICAvLyBldmVudCBvbiBleGFjdGx5IDAlIG9yIDEwMCUuXG4gICAgICAgIGlmIChtaW4gPCAwIHx8IG1heCA+IDEwMCB8fCBtaW4gPiBtYXggfHxcbiAgICAgICAgICAgIChtaW4gPT0gbWF4ICYmIG1pbiAhPSAxMDAgJiYgbWF4ICE9IDApKSB7XG4gICAgICAgICAgdXNlcigpLmVycm9yKFRBRyxcbiAgICAgICAgICAgICAgJ3Zpc2libGVQZXJjZW50YWdlVGhyZXNob2xkcyBlbnRyeSBpbnZhbGlkIG1pbi9tYXggdmFsdWUnKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdTcGVjID0gc3BlYztcbiAgICAgICAgbmV3U3BlY1sndmlzaWJsZVBlcmNlbnRhZ2VNaW4nXSA9IG1pbjtcbiAgICAgICAgbmV3U3BlY1sndmlzaWJsZVBlcmNlbnRhZ2VNYXgnXSA9IG1heDtcbiAgICAgICAgY29uc3QgbW9kZWwgPSBuZXcgVmlzaWJpbGl0eU1vZGVsKG5ld1NwZWMsIGNhbGNWaXNpYmlsaXR5KTtcbiAgICAgICAgdW5saXN0ZW5lcnMucHVzaCh0aGlzLmxpc3Rlbl8obW9kZWwsIHNwZWMsIHJlYWR5UHJvbWlzZSxcbiAgICAgICAgICAgIGNyZWF0ZVJlcG9ydFByb21pc2VGdW5jLCBjYWxsYmFjaywgb3B0X2VsZW1lbnQpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIHVubGlzdGVuZXJzLmZvckVhY2godW5saXN0ZW5lciA9PiB1bmxpc3RlbmVyKCkpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBtb2RlbCA9IG5ldyBWaXNpYmlsaXR5TW9kZWwoc3BlYywgY2FsY1Zpc2liaWxpdHkpO1xuICAgIHJldHVybiB0aGlzLmxpc3Rlbl8obW9kZWwsIHNwZWMsIHJlYWR5UHJvbWlzZSxcbiAgICAgICAgY3JlYXRlUmVwb3J0UHJvbWlzZUZ1bmMsIGNhbGxiYWNrLCBvcHRfZWxlbWVudCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshVmlzaWJpbGl0eU1vZGVsfSBtb2RlbFxuICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCAqPn0gc3BlY1xuICAgKiBAcGFyYW0gez9Qcm9taXNlfSByZWFkeVByb21pc2VcbiAgICogQHBhcmFtIHs/ZnVuY3Rpb24oKTohUHJvbWlzZX0gY3JlYXRlUmVwb3J0UHJvbWlzZUZ1bmNcbiAgICogQHBhcmFtIHtmdW5jdGlvbighT2JqZWN0PHN0cmluZywgKj4pfSBjYWxsYmFja1xuICAgKiBAcGFyYW0geyFFbGVtZW50PX0gb3B0X2VsZW1lbnRcbiAgICogQHJldHVybiB7IVVubGlzdGVuRGVmfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgbGlzdGVuXyhtb2RlbCwgc3BlYyxcbiAgICByZWFkeVByb21pc2UsIGNyZWF0ZVJlcG9ydFByb21pc2VGdW5jLCBjYWxsYmFjaywgb3B0X2VsZW1lbnQpIHtcbiAgICAvLyBCbG9jayB2aXNpYmlsaXR5LlxuICAgIGlmIChyZWFkeVByb21pc2UpIHtcbiAgICAgIG1vZGVsLnNldFJlYWR5KGZhbHNlKTtcbiAgICAgIHJlYWR5UHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgICAgbW9kZWwuc2V0UmVhZHkodHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoY3JlYXRlUmVwb3J0UHJvbWlzZUZ1bmMpIHtcbiAgICAgIG1vZGVsLnNldFJlcG9ydFJlYWR5KGNyZWF0ZVJlcG9ydFByb21pc2VGdW5jKTtcbiAgICB9XG5cbiAgICAvLyBQcm9jZXNzIHRoZSBldmVudC5cbiAgICBtb2RlbC5vblRyaWdnZXJFdmVudCgoKSA9PiB7XG4gICAgICBjb25zdCBzdGFydFRpbWUgPSB0aGlzLmdldFN0YXJ0VGltZSgpO1xuICAgICAgY29uc3Qgc3RhdGUgPSBtb2RlbC5nZXRTdGF0ZShzdGFydFRpbWUpO1xuXG4gICAgICAvLyBBZGRpdGlvbmFsIGRvYy1sZXZlbCBzdGF0ZS5cbiAgICAgIHN0YXRlWydiYWNrZ3JvdW5kZWQnXSA9IHRoaXMuaXNCYWNrZ3JvdW5kZWQoKSA/IDEgOiAwO1xuICAgICAgc3RhdGVbJ2JhY2tncm91bmRlZEF0U3RhcnQnXSA9IHRoaXMuaXNCYWNrZ3JvdW5kZWRBdFN0YXJ0KCkgPyAxIDogMDtcbiAgICAgIHN0YXRlWyd0b3RhbFRpbWUnXSA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG5cbiAgICAgIC8vIE9wdGlvbmFsbHksIGVsZW1lbnQtbGV2ZWwgc3RhdGUuXG4gICAgICBsZXQgbGF5b3V0Qm94O1xuICAgICAgaWYgKG9wdF9lbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IHJlc291cmNlID1cbiAgICAgICAgICAgIHRoaXMucmVzb3VyY2VzXy5nZXRSZXNvdXJjZUZvckVsZW1lbnRPcHRpb25hbChvcHRfZWxlbWVudCk7XG4gICAgICAgIGxheW91dEJveCA9XG4gICAgICAgICAgICByZXNvdXJjZSA/XG4gICAgICAgICAgICAgIHJlc291cmNlLmdldExheW91dEJveCgpIDpcbiAgICAgICAgICAgICAgU2VydmljZXMudmlld3BvcnRGb3JEb2ModGhpcy5hbXBkb2MpLmdldExheW91dFJlY3Qob3B0X2VsZW1lbnQpO1xuICAgICAgICBjb25zdCBpbnRlcnNlY3Rpb25SYXRpbyA9IHRoaXMuZ2V0RWxlbWVudFZpc2liaWxpdHkob3B0X2VsZW1lbnQpO1xuICAgICAgICBjb25zdCBpbnRlcnNlY3Rpb25SZWN0ID0gdGhpcy5nZXRFbGVtZW50SW50ZXJzZWN0aW9uUmVjdChvcHRfZWxlbWVudCk7XG4gICAgICAgIE9iamVjdC5hc3NpZ24oc3RhdGUsIHtcbiAgICAgICAgICAnaW50ZXJzZWN0aW9uUmF0aW8nOiBpbnRlcnNlY3Rpb25SYXRpbyxcbiAgICAgICAgICAnaW50ZXJzZWN0aW9uUmVjdCc6IEpTT04uc3RyaW5naWZ5KGludGVyc2VjdGlvblJlY3QpLFxuICAgICAgICB9KTtcblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGF5b3V0Qm94ID0gdGhpcy5nZXRSb290TGF5b3V0Qm94KCk7XG4gICAgICB9XG4gICAgICBtb2RlbC5tYXliZURpc3Bvc2UoKTtcblxuICAgICAgaWYgKGxheW91dEJveCkge1xuICAgICAgICBPYmplY3QuYXNzaWduKHN0YXRlLCB7XG4gICAgICAgICAgJ2VsZW1lbnRYJzogbGF5b3V0Qm94LmxlZnQsXG4gICAgICAgICAgJ2VsZW1lbnRZJzogbGF5b3V0Qm94LnRvcCxcbiAgICAgICAgICAnZWxlbWVudFdpZHRoJzogbGF5b3V0Qm94LndpZHRoLFxuICAgICAgICAgICdlbGVtZW50SGVpZ2h0JzogbGF5b3V0Qm94LmhlaWdodCxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjYWxsYmFjayhzdGF0ZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLm1vZGVsc18ucHVzaChtb2RlbCk7XG4gICAgbW9kZWwudW5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgY29uc3QgaW5kZXggPSB0aGlzLm1vZGVsc18uaW5kZXhPZihtb2RlbCk7XG4gICAgICBpZiAoaW5kZXggIT0gLTEpIHtcbiAgICAgICAgdGhpcy5tb2RlbHNfLnNwbGljZShpbmRleCwgMSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBPYnNlcnZlIHRoZSBlbGVtZW50IHZpYSBJbk9iLlxuICAgIGlmIChvcHRfZWxlbWVudCkge1xuICAgICAgLy8gSXQncyBpbXBvcnRhbnQgdGhhdCB0aGlzIGhhcHBlbnMgYWZ0ZXIgYWxsIHRoZSBzZXR1cCBpcyBkb25lLCBiL2NcbiAgICAgIC8vIGludGVyc2VjdGlvbiBvYnNlcnZlciBjYW4gZmlyZSBpbW1lZGlkYXRlbHkuIFBlciBzcGVjLCB0aGlzIHNob3VsZFxuICAgICAgLy8gTk9UIGhhcHBlbi4gSG93ZXZlciwgYWxsIG9mIHRoZSBleGlzdGluZyBJbk9iIHBvbHlmaWxscywgYXMgd2VsbCBhc1xuICAgICAgLy8gc29tZSB2ZXJzaW9ucyBvZiBuYXRpdmUgaW1wbGVtZW50YXRpb25zLCBtYWtlIHRoaXMgbWlzdGFrZS5cbiAgICAgIG1vZGVsLnVuc3Vic2NyaWJlKHRoaXMub2JzZXJ2ZShvcHRfZWxlbWVudCwgKCkgPT4gbW9kZWwudXBkYXRlKCkpKTtcbiAgICB9XG5cbiAgICAvLyBTdGFydCB1cGRhdGUuXG4gICAgbW9kZWwudXBkYXRlKCk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgbW9kZWwuZGlzcG9zZSgpO1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogT2JzZXJ2ZXMgdGhlIGludGVyc2VjdGlvbnMgb2YgdGhlIHNwZWNpZmllZCBlbGVtZW50IGluIHRoZSB2aWV3cG9ydC5cbiAgICogQHBhcmFtIHshRWxlbWVudH0gdW51c2VkRWxlbWVudFxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKG51bWJlcil9IHVudXNlZExpc3RlbmVyXG4gICAqIEByZXR1cm4geyFVbmxpc3RlbkRlZn1cbiAgICogQHByb3RlY3RlZFxuICAgKiBAYWJzdHJhY3RcbiAgICovXG4gIG9ic2VydmUodW51c2VkRWxlbWVudCwgdW51c2VkTGlzdGVuZXIpIHt9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IHVudXNlZEVsZW1lbnRcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKiBAYWJzdHJhY3RcbiAgICovXG4gIGdldEVsZW1lbnRWaXNpYmlsaXR5KHVudXNlZEVsZW1lbnQpIHt9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IHVudXNlZEVsZW1lbnRcbiAgICogQHJldHVybiB7P0pzb25PYmplY3R9XG4gICAqIEBhYnN0cmFjdFxuICAgKi9cbiAgZ2V0RWxlbWVudEludGVyc2VjdGlvblJlY3QodW51c2VkRWxlbWVudCkge31cbn1cblxuXG4vKipcbiAqIFRoZSBpbXBsZW1lbnRhdGlvbiBvZiBgVmlzaWJpbGl0eU1hbmFnZXJgIGZvciBhbiBBTVAgZG9jdW1lbnQuIFR3b1xuICogZGlzdGluY3QgbW9kZXMgYXJlIHN1cHBvcnRlZDogdGhlIG1haW4gQU1QIGRvYyBhbmQgYSBpbi1hLWJveCBkb2MuXG4gKi9cbmV4cG9ydCBjbGFzcyBWaXNpYmlsaXR5TWFuYWdlckZvckRvYyBleHRlbmRzIFZpc2liaWxpdHlNYW5hZ2VyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4uLy4uLy4uL3NyYy9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gYW1wZG9jXG4gICAqL1xuICBjb25zdHJ1Y3RvcihhbXBkb2MpIHtcbiAgICBzdXBlcigvKiBwYXJlbnQgKi8gbnVsbCwgYW1wZG9jKTtcblxuICAgIC8qKiBAY29uc3QgQHByaXZhdGUgKi9cbiAgICB0aGlzLnZpZXdlcl8gPSBTZXJ2aWNlcy52aWV3ZXJGb3JEb2MoYW1wZG9jKTtcblxuICAgIC8qKiBAY29uc3QgQHByaXZhdGUgKi9cbiAgICB0aGlzLnZpZXdwb3J0XyA9IFNlcnZpY2VzLnZpZXdwb3J0Rm9yRG9jKGFtcGRvYyk7XG5cbiAgICAvKiogQHByaXZhdGUge2Jvb2xlYW59ICovXG4gICAgdGhpcy5iYWNrZ3JvdW5kZWRfID0gIXRoaXMudmlld2VyXy5pc1Zpc2libGUoKTtcblxuICAgIC8qKiBAY29uc3QgQHByaXZhdGUge2Jvb2xlYW59ICovXG4gICAgdGhpcy5iYWNrZ3JvdW5kZWRBdFN0YXJ0XyA9IHRoaXMuaXNCYWNrZ3JvdW5kZWQoKTtcblxuICAgIC8qKlxuICAgICAqIEBjb25zdFxuICAgICAqIEBwcml2YXRlIHshT2JqZWN0PG51bWJlciwge1xuICAgICAqICAgZWxlbWVudDogIUVsZW1lbnQsXG4gICAgICogICBpbnRlcnNlY3Rpb25SYXRpbzogbnVtYmVyLFxuICAgICAqICAgbGlzdGVuZXJzOiAhQXJyYXk8ZnVuY3Rpb24obnVtYmVyKT5cbiAgICAgKiB9Pn1cbiAgICAgKi9cbiAgICB0aGlzLnRyYWNrZWRFbGVtZW50c18gPSBtYXAoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P0ludGVyc2VjdGlvbk9ic2VydmVyfD9JbnRlcnNlY3Rpb25PYnNlcnZlclBvbHlmaWxsfSAqL1xuICAgIHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXJfID0gbnVsbDtcblxuICAgIGlmIChnZXRNb2RlKHRoaXMuYW1wZG9jLndpbikucnVudGltZSA9PSAnaW5hYm94Jykge1xuICAgICAgLy8gSW4tYS1ib3g6IHZpc2liaWxpdHkgZGVwZW5kcyBvbiB0aGUgSW5PYi5cbiAgICAgIGNvbnN0IHJvb3QgPSB0aGlzLmFtcGRvYy5nZXRSb290Tm9kZSgpO1xuICAgICAgY29uc3Qgcm9vdEVsZW1lbnQgPSBkZXYoKS5hc3NlcnRFbGVtZW50KFxuICAgICAgICAgIHJvb3QuZG9jdW1lbnRFbGVtZW50IHx8IHJvb3QuYm9keSB8fCByb290KTtcbiAgICAgIHRoaXMudW5zdWJzY3JpYmUodGhpcy5vYnNlcnZlKFxuICAgICAgICAgIHJvb3RFbGVtZW50LFxuICAgICAgICAgIHRoaXMuc2V0Um9vdFZpc2liaWxpdHkuYmluZCh0aGlzKSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBNYWluIGRvY3VtZW50OiB2aXNpYmlsaXR5IGlzIGJhc2VkIG9uIHRoZSB2aWV3ZXIuXG4gICAgICB0aGlzLnNldFJvb3RWaXNpYmlsaXR5KHRoaXMudmlld2VyXy5pc1Zpc2libGUoKSA/IDEgOiAwKTtcbiAgICAgIHRoaXMudW5zdWJzY3JpYmUodGhpcy52aWV3ZXJfLm9uVmlzaWJpbGl0eUNoYW5nZWQoKCkgPT4ge1xuICAgICAgICBjb25zdCBpc1Zpc2libGUgPSB0aGlzLnZpZXdlcl8uaXNWaXNpYmxlKCk7XG4gICAgICAgIGlmICghaXNWaXNpYmxlKSB7XG4gICAgICAgICAgdGhpcy5iYWNrZ3JvdW5kZWRfID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFJvb3RWaXNpYmlsaXR5KGlzVmlzaWJsZSA/IDEgOiAwKTtcbiAgICAgIH0pKTtcbiAgICB9XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGRpc3Bvc2UoKSB7XG4gICAgc3VwZXIuZGlzcG9zZSgpO1xuICAgIGlmICh0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyXykge1xuICAgICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlcl8uZGlzY29ubmVjdCgpO1xuICAgICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlcl8gPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0U3RhcnRUaW1lKCkge1xuICAgIHJldHVybiBkZXYoKS5hc3NlcnROdW1iZXIodGhpcy52aWV3ZXJfLmdldEZpcnN0VmlzaWJsZVRpbWUoKSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGlzQmFja2dyb3VuZGVkKCkge1xuICAgIHJldHVybiB0aGlzLmJhY2tncm91bmRlZF87XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGlzQmFja2dyb3VuZGVkQXRTdGFydCgpIHtcbiAgICByZXR1cm4gdGhpcy5iYWNrZ3JvdW5kZWRBdFN0YXJ0XztcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0Um9vdExheW91dEJveCgpIHtcbiAgICAvLyBUaGlzIGNvZGUgaXMgdGhlIHNhbWUgZm9yIFwiaW4tYS1ib3hcIiBhbmQgc3RhbmRhbG9uZSBkb2MuXG4gICAgY29uc3Qgcm9vdCA9IHRoaXMuYW1wZG9jLmdldFJvb3ROb2RlKCk7XG4gICAgY29uc3Qgcm9vdEVsZW1lbnQgPSBkZXYoKS5hc3NlcnRFbGVtZW50KFxuICAgICAgICByb290LmRvY3VtZW50RWxlbWVudCB8fCByb290LmJvZHkgfHwgcm9vdCk7XG4gICAgcmV0dXJuIHRoaXMudmlld3BvcnRfLmdldExheW91dFJlY3Qocm9vdEVsZW1lbnQpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBvYnNlcnZlKGVsZW1lbnQsIGxpc3RlbmVyKSB7XG4gICAgdGhpcy5wb2x5ZmlsbEFtcEVsZW1lbnRJZk5lZWRlZF8oZWxlbWVudCk7XG5cbiAgICBjb25zdCBpZCA9IGdldEVsZW1lbnRJZChlbGVtZW50KTtcbiAgICBsZXQgdHJhY2tlZEVsZW1lbnQgPSB0aGlzLnRyYWNrZWRFbGVtZW50c19baWRdO1xuICAgIGlmICghdHJhY2tlZEVsZW1lbnQpIHtcbiAgICAgIHRyYWNrZWRFbGVtZW50ID0ge1xuICAgICAgICBlbGVtZW50LFxuICAgICAgICBpbnRlcnNlY3Rpb25SYXRpbzogMCxcbiAgICAgICAgaW50ZXJzZWN0aW9uUmVjdDogbnVsbCxcbiAgICAgICAgbGlzdGVuZXJzOiBbXSxcbiAgICAgIH07XG4gICAgICB0aGlzLnRyYWNrZWRFbGVtZW50c19baWRdID0gdHJhY2tlZEVsZW1lbnQ7XG4gICAgfSBlbHNlIGlmICh0cmFja2VkRWxlbWVudC5pbnRlcnNlY3Rpb25SYXRpbyA+IDApIHtcbiAgICAgIC8vIFRoaXMgaGFzIGFscmVhZHkgYmVlbiB0cmFja2VkIGFuZCB0aGUgYGludGVyc2VjdGlvblJhdGlvYCBpcyBmcmVzaC5cbiAgICAgIGxpc3RlbmVyKHRyYWNrZWRFbGVtZW50LmludGVyc2VjdGlvblJhdGlvKTtcbiAgICB9XG4gICAgdHJhY2tlZEVsZW1lbnQubGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICAgIHRoaXMuZ2V0SW50ZXJzZWN0aW9uT2JzZXJ2ZXJfKCkub2JzZXJ2ZShlbGVtZW50KTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY29uc3QgdHJhY2tlZEVsZW1lbnQgPSB0aGlzLnRyYWNrZWRFbGVtZW50c19baWRdO1xuICAgICAgaWYgKHRyYWNrZWRFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdHJhY2tlZEVsZW1lbnQubGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpO1xuICAgICAgICBpZiAoaW5kZXggIT0gLTEpIHtcbiAgICAgICAgICB0cmFja2VkRWxlbWVudC5saXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhY2tlZEVsZW1lbnQubGlzdGVuZXJzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlcl8udW5vYnNlcnZlKGVsZW1lbnQpO1xuICAgICAgICAgIGRlbGV0ZSB0aGlzLnRyYWNrZWRFbGVtZW50c19baWRdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0RWxlbWVudFZpc2liaWxpdHkoZWxlbWVudCkge1xuICAgIGlmICh0aGlzLmdldFJvb3RWaXNpYmlsaXR5KCkgPT0gMCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGNvbnN0IGlkID0gZ2V0RWxlbWVudElkKGVsZW1lbnQpO1xuICAgIGNvbnN0IHRyYWNrZWRFbGVtZW50ID0gdGhpcy50cmFja2VkRWxlbWVudHNfW2lkXTtcbiAgICByZXR1cm4gKHRyYWNrZWRFbGVtZW50ICYmIHRyYWNrZWRFbGVtZW50LmludGVyc2VjdGlvblJhdGlvKSB8fCAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGludGVyc2VjdGlvbiBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gICAqIEByZXR1cm4gez9Kc29uT2JqZWN0fVxuICAgKi9cbiAgZ2V0RWxlbWVudEludGVyc2VjdGlvblJlY3QoZWxlbWVudCkge1xuICAgIGlmICh0aGlzLmdldEVsZW1lbnRWaXNpYmlsaXR5KGVsZW1lbnQpIDw9IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBpZCA9IGdldEVsZW1lbnRJZChlbGVtZW50KTtcbiAgICBjb25zdCB0cmFja2VkRWxlbWVudCA9IHRoaXMudHJhY2tlZEVsZW1lbnRzX1tpZF07XG4gICAgaWYgKHRyYWNrZWRFbGVtZW50KSB7XG4gICAgICByZXR1cm4gLyoqIEB0eXBlIHshSnNvbk9iamVjdH0gKi8gKHRyYWNrZWRFbGVtZW50LmludGVyc2VjdGlvblJlY3QpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshSW50ZXJzZWN0aW9uT2JzZXJ2ZXJ8IUludGVyc2VjdGlvbk9ic2VydmVyUG9seWZpbGx9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRJbnRlcnNlY3Rpb25PYnNlcnZlcl8oKSB7XG4gICAgaWYgKCF0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyXykge1xuICAgICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlcl8gPSB0aGlzLmNyZWF0ZUludGVyc2VjdGlvbk9ic2VydmVyXygpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlcl87XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IUludGVyc2VjdGlvbk9ic2VydmVyfCFJbnRlcnNlY3Rpb25PYnNlcnZlclBvbHlmaWxsfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY3JlYXRlSW50ZXJzZWN0aW9uT2JzZXJ2ZXJfKCkge1xuICAgIC8vIE5hdGl2ZS5cbiAgICBjb25zdCB7d2lufSA9IHRoaXMuYW1wZG9jO1xuICAgIGlmIChuYXRpdmVJbnRlcnNlY3Rpb25PYnNlcnZlclN1cHBvcnRlZCh3aW4pKSB7XG4gICAgICByZXR1cm4gbmV3IHdpbi5JbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAgICAgICB0aGlzLm9uSW50ZXJzZWN0aW9uQ2hhbmdlc18uYmluZCh0aGlzKSxcbiAgICAgICAgICB7dGhyZXNob2xkOiBERUZBVUxUX1RIUkVTSE9MRH0pO1xuICAgIH1cblxuICAgIC8vIFBvbHlmaWxsLlxuICAgIGNvbnN0IGludGVyc2VjdGlvbk9ic2VydmVyUG9seWZpbGwgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXJQb2x5ZmlsbChcbiAgICAgICAgdGhpcy5vbkludGVyc2VjdGlvbkNoYW5nZXNfLmJpbmQodGhpcyksXG4gICAgICAgIHt0aHJlc2hvbGQ6IERFRkFVTFRfVEhSRVNIT0xEfSk7XG4gICAgY29uc3QgdGlja2VyID0gKCkgPT4ge1xuICAgICAgaW50ZXJzZWN0aW9uT2JzZXJ2ZXJQb2x5ZmlsbC50aWNrKHRoaXMudmlld3BvcnRfLmdldFJlY3QoKSk7XG4gICAgfTtcbiAgICB0aGlzLnVuc3Vic2NyaWJlKHRoaXMudmlld3BvcnRfLm9uU2Nyb2xsKHRpY2tlcikpO1xuICAgIHRoaXMudW5zdWJzY3JpYmUodGhpcy52aWV3cG9ydF8ub25DaGFuZ2VkKHRpY2tlcikpO1xuICAgIC8vIFRpY2sgaW4gdGhlIG5leHQgZXZlbnQgbG9vcC4gVGhhdCdzIGhvdyBuYXRpdmUgSW5PYiB3b3Jrcy5cbiAgICBzZXRUaW1lb3V0KHRpY2tlcik7XG4gICAgcmV0dXJuIGludGVyc2VjdGlvbk9ic2VydmVyUG9seWZpbGw7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcG9seWZpbGxBbXBFbGVtZW50SWZOZWVkZWRfKGVsZW1lbnQpIHtcbiAgICBjb25zdCB7d2lufSA9IHRoaXMuYW1wZG9jO1xuICAgIGlmIChuYXRpdmVJbnRlcnNlY3Rpb25PYnNlcnZlclN1cHBvcnRlZCh3aW4pKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSW5PYiBwb2x5ZmlsbCByZXF1aXJlcyBwYXJ0aWFsIEFtcEVsZW1lbnQgaW1wbGVtZW50YXRpb24uXG4gICAgaWYgKHR5cGVvZiBlbGVtZW50LmdldExheW91dEJveCA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGVsZW1lbnQuZ2V0TGF5b3V0Qm94ID0gKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMudmlld3BvcnRfLmdldExheW91dFJlY3QoZWxlbWVudCk7XG4gICAgfTtcbiAgICBlbGVtZW50LmdldE93bmVyID0gKCkgPT4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFBcnJheTwhSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeT59IGVudHJpZXNcbiAgICogQHByaXZhdGVcbiAgICovXG4gIG9uSW50ZXJzZWN0aW9uQ2hhbmdlc18oZW50cmllcykge1xuICAgIGVudHJpZXMuZm9yRWFjaChjaGFuZ2UgPT4ge1xuICAgICAgbGV0IGludGVyc2VjdGlvbiA9IGNoYW5nZS5pbnRlcnNlY3Rpb25SZWN0O1xuICAgICAgLy8gSW50ZXJzZWN0aW9uUmVjdCB0eXBlIG5vdyBjaGFuZ2VkIGZyb20gQ2xpZW50UmVjdCB0byBET01SZWN0UmVhZE9ubHkuXG4gICAgICAvLyBUT0RPKEB6aG91eXgpOiBGaXggYWxsIEluT2IgcmVsYXRlZCB0eXBlLlxuICAgICAgaW50ZXJzZWN0aW9uID0gbGF5b3V0UmVjdEx0d2goTnVtYmVyKGludGVyc2VjdGlvbi5sZWZ0KSxcbiAgICAgICAgICBOdW1iZXIoaW50ZXJzZWN0aW9uLnRvcCksXG4gICAgICAgICAgTnVtYmVyKGludGVyc2VjdGlvbi53aWR0aCksXG4gICAgICAgICAgTnVtYmVyKGludGVyc2VjdGlvbi5oZWlnaHQpKTtcbiAgICAgIHRoaXMub25JbnRlcnNlY3Rpb25DaGFuZ2VfKFxuICAgICAgICAgIGNoYW5nZS50YXJnZXQsXG4gICAgICAgICAgY2hhbmdlLmludGVyc2VjdGlvblJhdGlvLFxuICAgICAgICAgIGludGVyc2VjdGlvbik7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudH0gdGFyZ2V0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbnRlcnNlY3Rpb25SYXRpb1xuICAgKiBAcGFyYW0geyEuLi8uLi8uLi9zcmMvbGF5b3V0LXJlY3QuTGF5b3V0UmVjdERlZn0gaW50ZXJzZWN0aW9uUmVjdFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgb25JbnRlcnNlY3Rpb25DaGFuZ2VfKHRhcmdldCwgaW50ZXJzZWN0aW9uUmF0aW8sIGludGVyc2VjdGlvblJlY3QpIHtcbiAgICBpbnRlcnNlY3Rpb25SYXRpbyA9IE1hdGgubWluKE1hdGgubWF4KGludGVyc2VjdGlvblJhdGlvLCAwKSwgMSk7XG4gICAgY29uc3QgaWQgPSBnZXRFbGVtZW50SWQodGFyZ2V0KTtcbiAgICBjb25zdCB0cmFja2VkRWxlbWVudCA9IHRoaXMudHJhY2tlZEVsZW1lbnRzX1tpZF07XG4gICAgaWYgKHRyYWNrZWRFbGVtZW50KSB7XG4gICAgICB0cmFja2VkRWxlbWVudC5pbnRlcnNlY3Rpb25SYXRpbyA9IGludGVyc2VjdGlvblJhdGlvO1xuICAgICAgdHJhY2tlZEVsZW1lbnQuaW50ZXJzZWN0aW9uUmVjdCA9IGludGVyc2VjdGlvblJlY3Q7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyYWNrZWRFbGVtZW50Lmxpc3RlbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0cmFja2VkRWxlbWVudC5saXN0ZW5lcnNbaV0oaW50ZXJzZWN0aW9uUmF0aW8pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5cbi8qKlxuICogVGhlIGltcGxlbWVudGF0aW9uIG9mIGBWaXNpYmlsaXR5TWFuYWdlcmAgZm9yIGEgRklFIGVtYmVkLiBUaGlzIHZpc2liaWxpdHlcbiAqIHJvb3QgZGVsZWdhdGVzIG1vc3Qgb2YgdHJhY2tpbmcgZnVuY3Rpb25zIHRvIGl0cyBwYXJlbnQsIHRoZSBhbXBkb2Mgcm9vdC5cbiAqL1xuZXhwb3J0IGNsYXNzIFZpc2liaWxpdHlNYW5hZ2VyRm9yRW1iZWQgZXh0ZW5kcyBWaXNpYmlsaXR5TWFuYWdlciB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFWaXNpYmlsaXR5TWFuYWdlcn0gcGFyZW50XG4gICAqIEBwYXJhbSB7IS4uLy4uLy4uL3NyYy9mcmllbmRseS1pZnJhbWUtZW1iZWQuRnJpZW5kbHlJZnJhbWVFbWJlZH0gZW1iZWRcbiAgICovXG4gIGNvbnN0cnVjdG9yKHBhcmVudCwgZW1iZWQpIHtcbiAgICBzdXBlcihwYXJlbnQsIHBhcmVudC5hbXBkb2MpO1xuXG4gICAgLyoqIEBjb25zdCAqL1xuICAgIHRoaXMuZW1iZWQgPSBlbWJlZDtcblxuICAgIC8qKiBAY29uc3QgQHByaXZhdGUge2Jvb2xlYW59ICovXG4gICAgdGhpcy5iYWNrZ3JvdW5kZWRBdFN0YXJ0XyA9IHRoaXMucGFyZW50LmlzQmFja2dyb3VuZGVkKCk7XG5cbiAgICB0aGlzLnVuc3Vic2NyaWJlKHRoaXMucGFyZW50Lm9ic2VydmUoXG4gICAgICAgIGRldigpLmFzc2VydEVsZW1lbnQoZW1iZWQuaG9zdCksXG4gICAgICAgIHRoaXMuc2V0Um9vdFZpc2liaWxpdHkuYmluZCh0aGlzKSkpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXRTdGFydFRpbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZW1iZWQuZ2V0U3RhcnRUaW1lKCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGlzQmFja2dyb3VuZGVkKCkge1xuICAgIHJldHVybiB0aGlzLnBhcmVudC5pc0JhY2tncm91bmRlZCgpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBpc0JhY2tncm91bmRlZEF0U3RhcnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuYmFja2dyb3VuZGVkQXRTdGFydF87XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgbGF5b3V0IGJveCBvZiB0aGUgZW1iZWRkZWQgZG9jdW1lbnQuIE5vdGUgdGhhdCB0aGlzIG1heSBiZVxuICAgKiBzbWFsbGVyIHRoYW4gdGhlIHNpemUgYWxsb2NhdGVkIGJ5IHRoZSBob3N0LiBJbiB0aGF0IGNhc2UsIHRoZSBkb2N1bWVudFxuICAgKiB3aWxsIGJlIGNlbnRlcmVkLCBhbmQgdGhlIHVuZmlsbGVkIHNwYWNlIHdpbGwgbm90IGJlIHJlZmxlY3RlZCBpbiB0aGlzXG4gICAqIHJldHVybiB2YWx1ZS5cbiAgICogZW1iZWQuaWZyYW1lIGlzIHVzZWQgdG8gY2FsY3VsYXRlIHRoZSByb290IGxheW91dGJveCwgc2luY2UgaXQgaXMgbW9yZVxuICAgKiBpbXBvcnRhbnQgZm9yIHRoZSBlbWJlZGRlZCBkb2N1bWVudCB0byBrbm93IGl0cyBvd24gc2l6ZSwgcmF0aGVyIHRoYW5cbiAgICogdGhlIHNpemUgb2YgdGhlIGhvc3QgcmVjdGFuZ2xlIHdoaWNoIGl0IG1heSBvciBtYXkgbm90IGVudGlyZWx5IGZpbGwuXG4gICAqIGVtYmVkLmhvc3QgaXMgdXNlZCB0byBjYWxjdWxhdGUgdGhlIHJvb3QgdmlzaWJpbGl0eSwgaG93ZXZlciwgc2luY2VcbiAgICogdGhlIHZpc2liaWxpdHkgb2YgdGhlIGhvc3QgZWxlbWVudCBkaXJlY3RseSBkZXRlcm1pbmVzIHRoZSBlbWJlZGRlZFxuICAgKiBkb2N1bWVudCdzIHZpc2liaWxpdHkuXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgZ2V0Um9vdExheW91dEJveCgpIHtcbiAgICBjb25zdCByb290RWxlbWVudCA9IGRldigpLmFzc2VydEVsZW1lbnQodGhpcy5lbWJlZC5pZnJhbWUpO1xuICAgIHJldHVybiBTZXJ2aWNlcy52aWV3cG9ydEZvckRvYyh0aGlzLmFtcGRvYykuZ2V0TGF5b3V0UmVjdChyb290RWxlbWVudCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIG9ic2VydmUoZWxlbWVudCwgbGlzdGVuZXIpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJlbnQub2JzZXJ2ZShlbGVtZW50LCBsaXN0ZW5lcik7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldEVsZW1lbnRWaXNpYmlsaXR5KGVsZW1lbnQpIHtcbiAgICBpZiAodGhpcy5nZXRSb290VmlzaWJpbGl0eSgpID09IDApIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5wYXJlbnQuZ2V0RWxlbWVudFZpc2liaWxpdHkoZWxlbWVudCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBpbnRlcnNlY3RpbmcgZWxlbWVudC5cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBnZXRFbGVtZW50SW50ZXJzZWN0aW9uUmVjdChlbGVtZW50KSB7XG4gICAgaWYgKHRoaXMuZ2V0Um9vdFZpc2liaWxpdHkoKSA9PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucGFyZW50LmdldEVsZW1lbnRJbnRlcnNlY3Rpb25SZWN0KGVsZW1lbnQpO1xuICB9XG5cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge0RlZmVycmVkfSBmcm9tICcuLi8uLi8uLi9zcmMvdXRpbHMvcHJvbWlzZSc7XG5pbXBvcnQge09ic2VydmFibGV9IGZyb20gJy4uLy4uLy4uL3NyYy9vYnNlcnZhYmxlJztcbmltcG9ydCB7ZGV2fSBmcm9tICcuLi8uLi8uLi9zcmMvbG9nJztcblxuLyoqXG4gKiBUaGlzIGNsYXNzIGltcGxlbWVudHMgdmlzaWJpbGl0eSBjYWxjdWxhdGlvbnMgYmFzZWQgb24gdGhlXG4gKiB2aXNpYmlsaXR5IHJhdGlvLiBJdCdzIHVzZWQgZm9yIGRvY3VtZW50cywgZW1iZWRzIGFuZCBpbmRpdmlkdWFsIGVsZW1lbnQuXG4gKiBAaW1wbGVtZW50cyB7Li4vLi4vLi4vc3JjL3NlcnZpY2UuRGlzcG9zYWJsZX1cbiAqL1xuZXhwb3J0IGNsYXNzIFZpc2liaWxpdHlNb2RlbCB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCAqPn0gc3BlY1xuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCk6bnVtYmVyfSBjYWxjVmlzaWJpbGl0eVxuICAgKi9cbiAgY29uc3RydWN0b3Ioc3BlYywgY2FsY1Zpc2liaWxpdHkpIHtcbiAgICAvKiogQGNvbnN0IEBwcml2YXRlICovXG4gICAgdGhpcy5jYWxjVmlzaWJpbGl0eV8gPSBjYWxjVmlzaWJpbGl0eTtcblxuICAgIC8qKlxuICAgICAqIFNwZWMgcGFyYW1ldGVycy5cbiAgICAgKiBAcHJpdmF0ZSB7e1xuICAgICAqICAgdmlzaWJsZVBlcmNlbnRhZ2VNaW46IG51bWJlcixcbiAgICAgKiAgIHZpc2libGVQZXJjZW50YWdlTWF4OiBudW1iZXIsXG4gICAgICogICB0b3RhbFRpbWVNaW46IG51bWJlcixcbiAgICAgKiAgIHRvdGFsVGltZU1heDogbnVtYmVyLFxuICAgICAqICAgY29udGludW91c1RpbWVNaW46IG51bWJlcixcbiAgICAgKiAgIGNvbnRpbnVvdXNUaW1lTWF4OiBudW1iZXIsXG4gICAgICogfX1cbiAgICAgKi9cbiAgICB0aGlzLnNwZWNfID0ge1xuICAgICAgdmlzaWJsZVBlcmNlbnRhZ2VNaW46IE51bWJlcihzcGVjWyd2aXNpYmxlUGVyY2VudGFnZU1pbiddKSAvIDEwMCB8fCAwLFxuICAgICAgdmlzaWJsZVBlcmNlbnRhZ2VNYXg6IE51bWJlcihzcGVjWyd2aXNpYmxlUGVyY2VudGFnZU1heCddKSAvIDEwMCB8fCAxLFxuICAgICAgdG90YWxUaW1lTWluOiBOdW1iZXIoc3BlY1sndG90YWxUaW1lTWluJ10pIHx8IDAsXG4gICAgICB0b3RhbFRpbWVNYXg6IE51bWJlcihzcGVjWyd0b3RhbFRpbWVNYXgnXSkgfHwgSW5maW5pdHksXG4gICAgICBjb250aW51b3VzVGltZU1pbjogTnVtYmVyKHNwZWNbJ2NvbnRpbnVvdXNUaW1lTWluJ10pIHx8IDAsXG4gICAgICBjb250aW51b3VzVGltZU1heDogTnVtYmVyKHNwZWNbJ2NvbnRpbnVvdXNUaW1lTWF4J10pIHx8IEluZmluaXR5LFxuICAgIH07XG4gICAgLy8gQWJvdmUsIGlmIHZpc2libGVQZXJjZW50YWdlTWF4IHdhcyBub3Qgc3BlY2lmaWVkLCBhc3N1bWUgMTAwJS5cbiAgICAvLyBIZXJlLCBkbyBhbGxvdyAwJSB0byBiZSB0aGUgdmFsdWUgaWYgdGhhdCBpcyB3aGF0IHdhcyBzcGVjaWZpZWQuXG4gICAgaWYgKFN0cmluZyhzcGVjWyd2aXNpYmxlUGVyY2VudGFnZU1heCddKS50cmltKCkgPT09ICcwJykge1xuICAgICAgdGhpcy5zcGVjXy52aXNpYmxlUGVyY2VudGFnZU1heCA9IDA7XG4gICAgfVxuXG4gICAgLyoqIEBwcml2YXRlIHtib29sZWFufSAqL1xuICAgIHRoaXMucmVwZWF0XyA9IHNwZWNbJ3JlcGVhdCddID09PSB0cnVlO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/T2JzZXJ2YWJsZX0gKi9cbiAgICB0aGlzLm9uVHJpZ2dlck9ic2VydmFibGVfID0gbmV3IE9ic2VydmFibGUoKTtcblxuICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XG5cbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICB0aGlzLmV2ZW50UHJvbWlzZV8gPSBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/ZnVuY3Rpb24oKX0gKi9cbiAgICB0aGlzLmV2ZW50UmVzb2x2ZXJfID0gZGVmZXJyZWQucmVzb2x2ZTtcblxuICAgIHRoaXMuZXZlbnRQcm9taXNlXy50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMub25UcmlnZ2VyT2JzZXJ2YWJsZV8uZmlyZSgpO1xuICAgIH0pO1xuXG4gICAgLyoqIEBwcml2YXRlIHshQXJyYXk8IVVubGlzdGVuRGVmPn0gKi9cbiAgICB0aGlzLnVuc3Vic2NyaWJlXyA9IFtdO1xuXG4gICAgLyoqIEBjb25zdCBAcHJpdmF0ZSB7dGltZX0gKi9cbiAgICB0aGlzLmNyZWF0ZWRUaW1lXyA9IERhdGUubm93KCk7XG5cbiAgICAvKiogQHByaXZhdGUge2Jvb2xlYW59ICovXG4gICAgdGhpcy5yZWFkeV8gPSB0cnVlO1xuXG4gICAgLyoqIEBwcml2YXRlIHtib29sZWFufSAqL1xuICAgIHRoaXMucmVwb3J0UmVhZHlfID0gdHJ1ZTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P2Z1bmN0aW9uKCk6IVByb21pc2V9ICovXG4gICAgdGhpcy5jcmVhdGVSZXBvcnRSZWFkeVByb21pc2VfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P251bWJlcn0gKi9cbiAgICB0aGlzLnNjaGVkdWxlZFVwZGF0ZVRpbWVvdXRJZF8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHtib29sZWFufSAqL1xuICAgIHRoaXMubWF0Y2hlc1Zpc2liaWxpdHlfID0gZmFsc2U7XG5cbiAgICAvKiogQHByaXZhdGUge2Jvb2xlYW59ICovXG4gICAgdGhpcy5ldmVyTWF0Y2hlZFZpc2liaWxpdHlfID0gZmFsc2U7XG5cbiAgICAvKiogQHByaXZhdGUge3RpbWV9IGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcyAqL1xuICAgIHRoaXMuY29udGludW91c1RpbWVfID0gMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7dGltZX0gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzICovXG4gICAgdGhpcy5tYXhDb250aW51b3VzVmlzaWJsZVRpbWVfID0gMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7dGltZX0gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzICovXG4gICAgdGhpcy50b3RhbFZpc2libGVUaW1lXyA9IDA7XG5cbiAgICAvKiogQHByaXZhdGUge3RpbWV9IG1pbGxpc2Vjb25kcyBzaW5jZSBlcG9jaCAqL1xuICAgIHRoaXMuZmlyc3RTZWVuVGltZV8gPSAwO1xuXG4gICAgLyoqIEBwcml2YXRlIHt0aW1lfSBtaWxsaXNlY29uZHMgc2luY2UgZXBvY2ggKi9cbiAgICB0aGlzLmxhc3RTZWVuVGltZV8gPSAwO1xuXG4gICAgLyoqIEBwcml2YXRlIHt0aW1lfSBtaWxsaXNlY29uZHMgc2luY2UgZXBvY2ggKi9cbiAgICB0aGlzLmZpcnN0VmlzaWJsZVRpbWVfID0gMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7dGltZX0gbWlsbGlzZWNvbmRzIHNpbmNlIGVwb2NoICovXG4gICAgdGhpcy5sYXN0VmlzaWJsZVRpbWVfID0gMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7dGltZX0gcGVyY2VudCB2YWx1ZSBpbiBhIFswLCAxXSByYW5nZSAqL1xuICAgIHRoaXMubG9hZFRpbWVWaXNpYmlsaXR5XyA9IDA7XG5cbiAgICAvKiogQHByaXZhdGUge251bWJlcn0gcGVyY2VudCB2YWx1ZSBpbiBhIFswLCAxXSByYW5nZSAqL1xuICAgIHRoaXMubWluVmlzaWJsZVBlcmNlbnRhZ2VfID0gMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7bnVtYmVyfSBwZXJjZW50IHZhbHVlIGluIGEgWzAsIDFdIHJhbmdlICovXG4gICAgdGhpcy5tYXhWaXNpYmxlUGVyY2VudGFnZV8gPSAwO1xuXG4gICAgLyoqIEBwcml2YXRlIHt0aW1lfSBtaWxsaXNlY29uZHMgc2luY2UgZXBvY2ggKi9cbiAgICB0aGlzLmxhc3RWaXNpYmxlVXBkYXRlVGltZV8gPSAwO1xuXG4gICAgLyoqIEBwcml2YXRlIHtib29sZWFufSAqL1xuICAgIHRoaXMud2FpdFRvUmVzZXRfID0gZmFsc2U7XG5cbiAgICAvKiogQHByaXZhdGUgez9udW1iZXJ9ICovXG4gICAgdGhpcy5zY2hlZHVsZVJlcGVhdElkXyA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmVmcmVzaCBjb3VudGVyIG9uIHZpc2libGUgcmVzZXQuXG4gICAqIFRPRE86IFJpZ2h0IG5vdyBhbGwgc3RhdGUgdmFsdWUgYXJlIHNjb3BlZCBzdGF0ZSB2YWx1ZXMgdGhhdCBnZXRzIHJlc2V0LlxuICAgKiBXZSBtYXkgbmVlZCB0byBhZGQgc3VwcG9ydCB0byBnbG9iYWwgc3RhdGUgdmFsdWVzLFxuICAgKiB0aGF0IG5ldmVyIHJlc2V0IGxpa2UgZ2xvYmFsVG90YWxWaXNpYmxlVGltZS5cbiAgICogTm90ZTogbG9hZFRpbWVWaXNpYmlsaXR5IGlzIGFuIGV4Y2VwdGlvbi5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlc2V0XygpIHtcbiAgICBkZXYoKS5hc3NlcnQoIXRoaXMuZXZlbnRSZXNvbHZlcl8sXG4gICAgICAgICdBdHRlbXB0IHRvIHJlZnJlc2ggdmlzaWJsZSBldmVudCBiZWZvcmUgcHJldmlvdXMgb25lIHJlc29sdmUnKTtcbiAgICBjb25zdCBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgIHRoaXMuZXZlbnRQcm9taXNlXyA9IGRlZmVycmVkLnByb21pc2U7XG4gICAgdGhpcy5ldmVudFJlc29sdmVyXyA9IGRlZmVycmVkLnJlc29sdmU7XG5cbiAgICB0aGlzLmV2ZW50UHJvbWlzZV8udGhlbigoKSA9PiB7XG4gICAgICB0aGlzLm9uVHJpZ2dlck9ic2VydmFibGVfLmZpcmUoKTtcbiAgICB9KTtcbiAgICB0aGlzLnNjaGVkdWxlUmVwZWF0SWRfID0gbnVsbDtcbiAgICB0aGlzLmV2ZXJNYXRjaGVkVmlzaWJpbGl0eV8gPSBmYWxzZTtcbiAgICB0aGlzLm1hdGNoZXNWaXNpYmlsaXR5XyA9IGZhbHNlO1xuICAgIHRoaXMuY29udGludW91c1RpbWVfID0gMDtcbiAgICB0aGlzLm1heENvbnRpbnVvdXNWaXNpYmxlVGltZV8gPSAwO1xuICAgIHRoaXMudG90YWxWaXNpYmxlVGltZV8gPSAwO1xuICAgIHRoaXMuZmlyc3RWaXNpYmxlVGltZV8gPSAwO1xuICAgIHRoaXMuZmlyc3RTZWVuVGltZV8gPSAwO1xuICAgIHRoaXMubGFzdFNlZW5UaW1lXyA9IDA7XG4gICAgdGhpcy5sYXN0VmlzaWJsZVRpbWVfID0gMDtcbiAgICB0aGlzLm1pblZpc2libGVQZXJjZW50YWdlXyA9IDA7XG4gICAgdGhpcy5tYXhWaXNpYmxlUGVyY2VudGFnZV8gPSAwO1xuICAgIHRoaXMubGFzdFZpc2libGVVcGRhdGVUaW1lXyA9IDA7XG4gICAgdGhpcy53YWl0VG9SZXNldF8gPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGdW5jdGlvbiB0aGF0IHZpc2liaWxpdHlNYW5hZ2VyIGNhbiB1c2VkIHRvIGRpc3Bvc2UgbW9kZWwgb3IgcmVzZXQgbW9kZWxcbiAgICovXG4gIG1heWJlRGlzcG9zZSgpIHtcbiAgICBpZiAoIXRoaXMucmVwZWF0Xykge1xuICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBkaXNwb3NlKCkge1xuICAgIGlmICh0aGlzLnNjaGVkdWxlZFVwZGF0ZVRpbWVvdXRJZF8pIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnNjaGVkdWxlZFVwZGF0ZVRpbWVvdXRJZF8pO1xuICAgICAgdGhpcy5zY2hlZHVsZWRVcGRhdGVUaW1lb3V0SWRfID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMuc2NoZWR1bGVSZXBlYXRJZF8pIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnNjaGVkdWxlUmVwZWF0SWRfKTtcbiAgICAgIHRoaXMuc2NoZWR1bGVSZXBlYXRJZF8gPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLnVuc3Vic2NyaWJlXy5mb3JFYWNoKHVuc3Vic2NyaWJlID0+IHtcbiAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgfSk7XG4gICAgdGhpcy51bnN1YnNjcmliZV8ubGVuZ3RoID0gMDtcbiAgICB0aGlzLmV2ZW50UmVzb2x2ZXJfID0gbnVsbDtcbiAgICBpZiAodGhpcy5vblRyaWdnZXJPYnNlcnZhYmxlXykge1xuICAgICAgdGhpcy5vblRyaWdnZXJPYnNlcnZhYmxlXy5yZW1vdmVBbGwoKTtcbiAgICAgIHRoaXMub25UcmlnZ2VyT2JzZXJ2YWJsZV8gPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHRoZSB1bnN1YnNjcmliZSBoYW5kbGVyIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2hlbiB0aGlzIHZpc2liaWxpdHlcbiAgICogbW9kZWwgaXMgZGVzdHJveWVkLlxuICAgKiBAcGFyYW0geyFVbmxpc3RlbkRlZn0gaGFuZGxlclxuICAgKi9cbiAgdW5zdWJzY3JpYmUoaGFuZGxlcikge1xuICAgIHRoaXMudW5zdWJzY3JpYmVfLnB1c2goaGFuZGxlcik7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyB0aGUgZXZlbnQgaGFuZGxlciB0aGF0IHdpbGwgYmUgY2FsbGVkIHdoZW4gYWxsIHZpc2liaWxpdHkgY29uZGl0aW9uc1xuICAgKiBoYXZlIGJlZW4gbWV0LlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IGhhbmRsZXJcbiAgICovXG4gIG9uVHJpZ2dlckV2ZW50KGhhbmRsZXIpIHtcbiAgICBpZiAodGhpcy5vblRyaWdnZXJPYnNlcnZhYmxlXykge1xuICAgICAgdGhpcy5vblRyaWdnZXJPYnNlcnZhYmxlXy5hZGQoaGFuZGxlcik7XG4gICAgfVxuICAgIGlmICh0aGlzLmV2ZW50UHJvbWlzZV8gJiYgIXRoaXMuZXZlbnRSZXNvbHZlcl8pIHtcbiAgICAgIC8vIElmIGV2ZW50UHJvbWlzZSBoYXMgYWxyZWFkeSByZXNvbHZlZCwgbmVlZCB0byBjYWxsIGhhbmRsZXIgbWFudWFsbHkuXG4gICAgICBoYW5kbGVyKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgd2hldGhlciB0aGlzIG9iamVjdCBpcyByZWFkeS4gUmVhZHkgbWVhbnMgdGhhdCB2aXNpYmlsaXR5IGlzXG4gICAqIHJlYWR5IHRvIGJlIGNhbGN1bGF0ZWQsIGUuZy4gYmVjYXVzZSBhbiBlbGVtZW50IGhhcyBiZWVuXG4gICAqIHN1ZmZpY2llbnRseSByZW5kZXJlZC5cbiAgICogQHBhcmFtIHtib29sZWFufSByZWFkeVxuICAgKi9cbiAgc2V0UmVhZHkocmVhZHkpIHtcbiAgICB0aGlzLnJlYWR5XyA9IHJlYWR5O1xuICAgIHRoaXMudXBkYXRlKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGF0IHRoZSBtb2RlbCBuZWVkcyB0byB3YWl0IG9uIGV4dHJhIHJlcG9ydCByZWFkeSBwcm9taXNlXG4gICAqIGFmdGVyIGFsbCB2aXNpYmlsaXR5IGNvbmRpdGlvbnMgaGF2ZSBiZWVuIG1ldCB0byBjYWxsIHJlcG9ydCBoYW5kbGVyXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKTohUHJvbWlzZX0gY2FsbGJhY2tcbiAgICovXG4gIHNldFJlcG9ydFJlYWR5KGNhbGxiYWNrKSB7XG4gICAgdGhpcy5yZXBvcnRSZWFkeV8gPSBmYWxzZTtcbiAgICB0aGlzLmNyZWF0ZVJlcG9ydFJlYWR5UHJvbWlzZV8gPSBjYWxsYmFjaztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRWaXNpYmlsaXR5XygpIHtcbiAgICByZXR1cm4gdGhpcy5yZWFkeV8gPyB0aGlzLmNhbGNWaXNpYmlsaXR5XygpIDogMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSdW5zIHRoZSBjYWxjdWxhdGlvbiBjeWNsZS5cbiAgICovXG4gIHVwZGF0ZSgpIHtcbiAgICB0aGlzLnVwZGF0ZV8odGhpcy5nZXRWaXNpYmlsaXR5XygpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBjYWxjdWxhdGVkIHN0YXRlIG9mIHZpc2liaWxpdHkuXG4gICAqIEBwYXJhbSB7dGltZX0gc3RhcnRUaW1lXG4gICAqIEByZXR1cm4geyFPYmplY3Q8c3RyaW5nLCBzdHJpbmd8bnVtYmVyPn1cbiAgICovXG4gIGdldFN0YXRlKHN0YXJ0VGltZSkge1xuICAgIHJldHVybiB7XG4gICAgICAvLyBPYnNlcnZlZCB0aW1lcywgcmVsYXRpdmUgdG8gdGhlIGBzdGFydFRpbWVgLlxuICAgICAgZmlyc3RTZWVuVGltZTogdGltZUJhc2UodGhpcy5maXJzdFNlZW5UaW1lXywgc3RhcnRUaW1lKSxcbiAgICAgIGxhc3RTZWVuVGltZTogdGltZUJhc2UodGhpcy5sYXN0U2VlblRpbWVfLCBzdGFydFRpbWUpLFxuICAgICAgbGFzdFZpc2libGVUaW1lOiB0aW1lQmFzZSh0aGlzLmxhc3RWaXNpYmxlVGltZV8sIHN0YXJ0VGltZSksXG4gICAgICBmaXJzdFZpc2libGVUaW1lOiB0aW1lQmFzZSh0aGlzLmZpcnN0VmlzaWJsZVRpbWVfLCBzdGFydFRpbWUpLFxuXG4gICAgICAvLyBEdXJhdGlvbnMuXG4gICAgICBtYXhDb250aW51b3VzVmlzaWJsZVRpbWU6IHRoaXMubWF4Q29udGludW91c1Zpc2libGVUaW1lXyxcbiAgICAgIHRvdGFsVmlzaWJsZVRpbWU6IHRoaXMudG90YWxWaXNpYmxlVGltZV8sXG5cbiAgICAgIC8vIFZpc2liaWxpdHkgcGVyY2VudHMuXG4gICAgICBsb2FkVGltZVZpc2liaWxpdHk6IHRoaXMubG9hZFRpbWVWaXNpYmlsaXR5XyAqIDEwMCB8fCAwLFxuICAgICAgbWluVmlzaWJsZVBlcmNlbnRhZ2U6IHRoaXMubWluVmlzaWJsZVBlcmNlbnRhZ2VfICogMTAwLFxuICAgICAgbWF4VmlzaWJsZVBlcmNlbnRhZ2U6IHRoaXMubWF4VmlzaWJsZVBlcmNlbnRhZ2VfICogMTAwLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHZpc2liaWxpdHlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHVwZGF0ZV8odmlzaWJpbGl0eSkge1xuICAgIC8vIFVwZGF0ZSBzdGF0ZSBhbmQgY2hlY2sgaWYgYWxsIGNvbmRpdGlvbnMgYXJlIHNhdGlzZmllZFxuICAgIGlmICh0aGlzLndhaXRUb1Jlc2V0Xykge1xuICAgICAgaWYgKCF0aGlzLmlzVmlzaWJpbGl0eU1hdGNoXyh2aXNpYmlsaXR5KSkge1xuICAgICAgICAvLyBXZSB3ZXJlIHdhaXRpbmcgZm9yIGEgY29uZGl0aW9uIHRvIGJlY29tZSB1bm1ldCwgYW5kIG5vdyBpdCBoYXNcbiAgICAgICAgdGhpcy5yZXNldF8oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCF0aGlzLmV2ZW50UmVzb2x2ZXJfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNvbmRpdGlvbnNNZXQgPSB0aGlzLnVwZGF0ZUNvdW50ZXJzXyh2aXNpYmlsaXR5KTtcbiAgICBpZiAoY29uZGl0aW9uc01ldCkge1xuICAgICAgaWYgKHRoaXMuc2NoZWR1bGVkVXBkYXRlVGltZW91dElkXykge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5zY2hlZHVsZWRVcGRhdGVUaW1lb3V0SWRfKTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZWRVcGRhdGVUaW1lb3V0SWRfID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnJlcG9ydFJlYWR5Xykge1xuICAgICAgICAvLyBUT0RPKGpvbmtlbGxlcik6IENhbiB3ZSBlbGltaW5hdGUgZXZlbnRSZXNvbHZlcl8/XG4gICAgICAgIHRoaXMuZXZlbnRSZXNvbHZlcl8oKTtcbiAgICAgICAgdGhpcy5ldmVudFJlc29sdmVyXyA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLnJlcGVhdF8pIHtcbiAgICAgICAgICB0aGlzLndhaXRUb1Jlc2V0XyA9IHRydWU7XG4gICAgICAgICAgdGhpcy5jb250aW51b3VzVGltZV8gPSAwO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuY3JlYXRlUmVwb3J0UmVhZHlQcm9taXNlXykge1xuICAgICAgICAvLyBSZXBvcnQgd2hlbiByZXBvcnQgcmVhZHkgcHJvbWlzZSByZXNvbHZlXG4gICAgICAgIGNvbnN0IHJlcG9ydFJlYWR5UHJvbWlzZSA9IHRoaXMuY3JlYXRlUmVwb3J0UmVhZHlQcm9taXNlXygpO1xuICAgICAgICB0aGlzLmNyZWF0ZVJlcG9ydFJlYWR5UHJvbWlzZV8gPSBudWxsO1xuICAgICAgICByZXBvcnRSZWFkeVByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICAgICAgdGhpcy5yZXBvcnRSZWFkeV8gPSB0cnVlO1xuICAgICAgICAgIC8vIE5lZWQgdG8gdXBkYXRlIG9uZSBtb3JlIHRpbWUgaW4gY2FzZSB0aW1lIGV4Y2VlZHNcbiAgICAgICAgICAvLyBtYXhDb250aW51b3VzVmlzaWJsZVRpbWUuXG4gICAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLm1hdGNoZXNWaXNpYmlsaXR5XyAmJiAhdGhpcy5zY2hlZHVsZWRVcGRhdGVUaW1lb3V0SWRfKSB7XG4gICAgICAvLyBUaGVyZSBpcyB1bm1ldCBkdXJhdGlvbiBjb25kaXRpb24sIHNjaGVkdWxlIGEgY2hlY2tcbiAgICAgIGNvbnN0IHRpbWVUb1dhaXQgPSB0aGlzLmNvbXB1dGVUaW1lVG9XYWl0XygpO1xuICAgICAgaWYgKHRpbWVUb1dhaXQgPiAwKSB7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVkVXBkYXRlVGltZW91dElkXyA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHRoaXMuc2NoZWR1bGVkVXBkYXRlVGltZW91dElkXyA9IG51bGw7XG4gICAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgfSwgdGltZVRvV2FpdCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghdGhpcy5tYXRjaGVzVmlzaWJpbGl0eV8gJiYgdGhpcy5zY2hlZHVsZWRVcGRhdGVUaW1lb3V0SWRfKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5zY2hlZHVsZWRVcGRhdGVUaW1lb3V0SWRfKTtcbiAgICAgIHRoaXMuc2NoZWR1bGVkVXBkYXRlVGltZW91dElkXyA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHZpc2liaWxpdHkgZmFsbCBpbnRvIHRoZSBwZXJjZW50YWdlIHJhbmdlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB2aXNpYmlsaXR5XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBpc1Zpc2liaWxpdHlNYXRjaF8odmlzaWJpbGl0eSkge1xuICAgIGRldigpLmFzc2VydCh2aXNpYmlsaXR5ID49IDAgJiYgdmlzaWJpbGl0eSA8PSAxLFxuICAgICAgICAnaW52YWxpZCB2aXNpYmlsaXR5IHZhbHVlOiAlcycsIHZpc2liaWxpdHkpO1xuICAgIC8vIFNwZWNpYWwgY2FzZTogSWYgdmlzaWJsZVBlcmNlbnRhZ2VNaW4gaXMgMTAwJSwgdGhlbiBpdCBkb2Vzbid0IG1ha2VcbiAgICAvLyBzZW5zZSB0byBkbyB0aGUgdXN1YWwgKG1pbiwgbWF4XSBzaW5jZSB0aGF0IHdvdWxkIG5ldmVyIGJlIHRydWUuXG4gICAgaWYgKHRoaXMuc3BlY18udmlzaWJsZVBlcmNlbnRhZ2VNaW4gPT0gMSkge1xuICAgICAgcmV0dXJuIHZpc2liaWxpdHkgPT0gMTtcbiAgICB9XG4gICAgLy8gU3BlY2lhbCBjYXNlOiBJZiB2aXNpYmxlUGVyY2VudGFnZU1heCBpcyAwJSwgdGhlbiB3ZVxuICAgIC8vIHdhbnQgdG8gcGluZyB3aGVuIHRoZSBjcmVhdGl2ZSBiZWNvbWVzIG5vdCB2aXNpYmxlLlxuICAgIGlmICh0aGlzLnNwZWNfLnZpc2libGVQZXJjZW50YWdlTWF4ID09IDApIHtcbiAgICAgIHJldHVybiB2aXNpYmlsaXR5ID09IDA7XG4gICAgfVxuICAgIHJldHVybiB2aXNpYmlsaXR5ID4gdGhpcy5zcGVjXy52aXNpYmxlUGVyY2VudGFnZU1pbiAmJlxuICAgICAgICB2aXNpYmlsaXR5IDw9IHRoaXMuc3BlY18udmlzaWJsZVBlcmNlbnRhZ2VNYXg7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHZpc2liaWxpdHlcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdXBkYXRlQ291bnRlcnNfKHZpc2liaWxpdHkpIHtcbiAgICBkZXYoKS5hc3NlcnQodmlzaWJpbGl0eSA+PSAwICYmIHZpc2liaWxpdHkgPD0gMSxcbiAgICAgICAgJ2ludmFsaWQgdmlzaWJpbGl0eSB2YWx1ZTogJXMnLCB2aXNpYmlsaXR5KTtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXG4gICAgaWYgKHZpc2liaWxpdHkgPiAwKSB7XG4gICAgICB0aGlzLmZpcnN0U2VlblRpbWVfID0gdGhpcy5maXJzdFNlZW5UaW1lXyB8fCBub3c7XG4gICAgICB0aGlzLmxhc3RTZWVuVGltZV8gPSBub3c7XG4gICAgICAvLyBDb25zaWRlciBpdCBhcyBsb2FkIHRpbWUgdmlzaWJpbGl0eSBpZiB0aGlzIGhhcHBlbnMgd2l0aGluIDMwMG1zIG9mXG4gICAgICAvLyBwYWdlIGxvYWQuXG4gICAgICBpZiAoIXRoaXMubG9hZFRpbWVWaXNpYmlsaXR5XyAmJiAobm93IC0gdGhpcy5jcmVhdGVkVGltZV8pIDwgMzAwKSB7XG4gICAgICAgIHRoaXMubG9hZFRpbWVWaXNpYmlsaXR5XyA9IHZpc2liaWxpdHk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcHJldk1hdGNoZXNWaXNpYmlsaXR5ID0gdGhpcy5tYXRjaGVzVmlzaWJpbGl0eV87XG4gICAgY29uc3QgdGltZVNpbmNlTGFzdFVwZGF0ZSA9XG4gICAgICAgIHRoaXMubGFzdFZpc2libGVVcGRhdGVUaW1lXyA/IG5vdyAtIHRoaXMubGFzdFZpc2libGVVcGRhdGVUaW1lXyA6IDA7XG4gICAgdGhpcy5tYXRjaGVzVmlzaWJpbGl0eV8gPSB0aGlzLmlzVmlzaWJpbGl0eU1hdGNoXyh2aXNpYmlsaXR5KTtcbiAgICBpZiAodGhpcy5tYXRjaGVzVmlzaWJpbGl0eV8pIHtcbiAgICAgIHRoaXMuZXZlck1hdGNoZWRWaXNpYmlsaXR5XyA9IHRydWU7XG4gICAgICBpZiAocHJldk1hdGNoZXNWaXNpYmlsaXR5KSB7XG4gICAgICAgIC8vIEtlZXAgY291bnRpbmcuXG4gICAgICAgIHRoaXMudG90YWxWaXNpYmxlVGltZV8gKz0gdGltZVNpbmNlTGFzdFVwZGF0ZTtcbiAgICAgICAgdGhpcy5jb250aW51b3VzVGltZV8gKz0gdGltZVNpbmNlTGFzdFVwZGF0ZTtcbiAgICAgICAgdGhpcy5tYXhDb250aW51b3VzVmlzaWJsZVRpbWVfID1cbiAgICAgICAgICAgIE1hdGgubWF4KHRoaXMubWF4Q29udGludW91c1Zpc2libGVUaW1lXywgdGhpcy5jb250aW51b3VzVGltZV8pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVGhlIHJlc291cmNlIGNhbWUgaW50byB2aWV3OiBzdGFydCBjb3VudGluZy5cbiAgICAgICAgZGV2KCkuYXNzZXJ0KCF0aGlzLmxhc3RWaXNpYmxlVXBkYXRlVGltZV8pO1xuICAgICAgICB0aGlzLmZpcnN0VmlzaWJsZVRpbWVfID0gdGhpcy5maXJzdFZpc2libGVUaW1lXyB8fCBub3c7XG4gICAgICB9XG4gICAgICB0aGlzLmxhc3RWaXNpYmxlVXBkYXRlVGltZV8gPSBub3c7XG4gICAgICB0aGlzLm1pblZpc2libGVQZXJjZW50YWdlXyA9XG4gICAgICAgICAgdGhpcy5taW5WaXNpYmxlUGVyY2VudGFnZV8gPiAwID9cbiAgICAgICAgICAgIE1hdGgubWluKHRoaXMubWluVmlzaWJsZVBlcmNlbnRhZ2VfLCB2aXNpYmlsaXR5KSA6XG4gICAgICAgICAgICB2aXNpYmlsaXR5O1xuICAgICAgdGhpcy5tYXhWaXNpYmxlUGVyY2VudGFnZV8gPVxuICAgICAgICAgIE1hdGgubWF4KHRoaXMubWF4VmlzaWJsZVBlcmNlbnRhZ2VfLCB2aXNpYmlsaXR5KTtcbiAgICAgIHRoaXMubGFzdFZpc2libGVUaW1lXyA9IG5vdztcbiAgICB9IGVsc2UgaWYgKHByZXZNYXRjaGVzVmlzaWJpbGl0eSkge1xuICAgICAgLy8gVGhlIHJlc291cmNlIHdlbnQgb3V0IG9mIHZpZXcuIERvIGZpbmFsIGNhbGN1bGF0aW9ucyBhbmQgcmVzZXQgc3RhdGUuXG4gICAgICBkZXYoKS5hc3NlcnQodGhpcy5sYXN0VmlzaWJsZVVwZGF0ZVRpbWVfID4gMCk7XG5cbiAgICAgIHRoaXMubWF4Q29udGludW91c1Zpc2libGVUaW1lXyA9IE1hdGgubWF4KFxuICAgICAgICAgIHRoaXMubWF4Q29udGludW91c1Zpc2libGVUaW1lXyxcbiAgICAgICAgICB0aGlzLmNvbnRpbnVvdXNUaW1lXyArIHRpbWVTaW5jZUxhc3RVcGRhdGUpO1xuXG4gICAgICAvLyBSZXNldCBmb3IgbmV4dCB2aXNpYmlsaXR5IGV2ZW50LlxuICAgICAgdGhpcy5sYXN0VmlzaWJsZVVwZGF0ZVRpbWVfID0gMDtcbiAgICAgIHRoaXMudG90YWxWaXNpYmxlVGltZV8gKz0gdGltZVNpbmNlTGFzdFVwZGF0ZTtcbiAgICAgIHRoaXMuY29udGludW91c1RpbWVfID0gMDsgLy8gQ2xlYXIgb25seSBhZnRlciBtYXggaXMgY2FsY3VsYXRlZCBhYm92ZS5cbiAgICAgIHRoaXMubGFzdFZpc2libGVUaW1lXyA9IG5vdztcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5ldmVyTWF0Y2hlZFZpc2liaWxpdHlfICYmXG4gICAgICAgICh0aGlzLnRvdGFsVmlzaWJsZVRpbWVfID49IHRoaXMuc3BlY18udG90YWxUaW1lTWluKSAmJlxuICAgICAgICAodGhpcy50b3RhbFZpc2libGVUaW1lXyA8PSB0aGlzLnNwZWNfLnRvdGFsVGltZU1heCkgJiZcbiAgICAgICAgKHRoaXMubWF4Q29udGludW91c1Zpc2libGVUaW1lXyA+PSB0aGlzLnNwZWNfLmNvbnRpbnVvdXNUaW1lTWluKSAmJlxuICAgICAgICAodGhpcy5tYXhDb250aW51b3VzVmlzaWJsZVRpbWVfIDw9IHRoaXMuc3BlY18uY29udGludW91c1RpbWVNYXgpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbXB1dGVzIHRpbWUsIGFzc3VtaW5nIHRoZSBvYmplY3QgaXMgY3VycmVudGx5IHZpc2libGUsIHRoYXQgaXQnZCB0YWtlXG4gICAqIGl0IHRvIG1hdGNoIGFsbCB0aW1pbmcgcmVxdWlyZW1lbnRzLlxuICAgKiBAcmV0dXJuIHt0aW1lfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY29tcHV0ZVRpbWVUb1dhaXRfKCkge1xuICAgIGNvbnN0IHdhaXRGb3JDb250aW51b3VzVGltZSA9IE1hdGgubWF4KFxuICAgICAgICB0aGlzLnNwZWNfLmNvbnRpbnVvdXNUaW1lTWluIC0gdGhpcy5jb250aW51b3VzVGltZV8sIDApO1xuICAgIGNvbnN0IHdhaXRGb3JUb3RhbFRpbWUgPSBNYXRoLm1heChcbiAgICAgICAgdGhpcy5zcGVjXy50b3RhbFRpbWVNaW4gLSB0aGlzLnRvdGFsVmlzaWJsZVRpbWVfLCAwKTtcbiAgICBjb25zdCBtYXhXYWl0VGltZSA9IE1hdGgubWF4KHdhaXRGb3JDb250aW51b3VzVGltZSwgd2FpdEZvclRvdGFsVGltZSk7XG4gICAgcmV0dXJuIE1hdGgubWluKFxuICAgICAgICBtYXhXYWl0VGltZSxcbiAgICAgICAgd2FpdEZvckNvbnRpbnVvdXNUaW1lIHx8IEluZmluaXR5LFxuICAgICAgICB3YWl0Rm9yVG90YWxUaW1lIHx8IEluZmluaXR5KTtcbiAgfVxufVxuXG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgc3BlY2lmaWVkIHRpbWUgYmFzZWQgb24gdGhlIGdpdmVuIGBiYXNlVGltZWAuXG4gKiBAcGFyYW0ge3RpbWV9IHRpbWVcbiAqIEBwYXJhbSB7dGltZX0gYmFzZVRpbWVcbiAqIEByZXR1cm4ge3RpbWV9XG4gKi9cbmZ1bmN0aW9uIHRpbWVCYXNlKHRpbWUsIGJhc2VUaW1lKSB7XG4gIHJldHVybiB0aW1lID49IGJhc2VUaW1lID8gdGltZSAtIGJhc2VUaW1lIDogMDtcbn1cbiIsIi8qIVxuXG5Db3B5cmlnaHQgKEMpIDIwMTQtMjAxNiBieSBBbmRyZWEgR2lhbW1hcmNoaSAtIEBXZWJSZWZsZWN0aW9uXG5cblBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbm9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbmluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbnRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbmNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbmFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG5JTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbkZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbk9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cblRIRSBTT0ZUV0FSRS5cblxuKi9cbi8vIGdsb2JhbCB3aW5kb3cgT2JqZWN0XG4vLyBvcHRpb25hbCBwb2x5ZmlsbCBpbmZvXG4vLyAgICAnYXV0bycgdXNlZCBieSBkZWZhdWx0LCBldmVyeXRoaW5nIGlzIGZlYXR1cmUgZGV0ZWN0ZWRcbi8vICAgICdmb3JjZScgdXNlIHRoZSBwb2x5ZmlsbCBldmVuIGlmIG5vdCBmdWxseSBuZWVkZWRcbmZ1bmN0aW9uIGluc3RhbGxDdXN0b21FbGVtZW50cyh3aW5kb3csIHBvbHlmaWxsKSB7J3VzZSBzdHJpY3QnO1xuXG4gIC8vIERPIE5PVCBVU0UgVEhJUyBGSUxFIERJUkVDVExZLCBJVCBXT04nVCBXT1JLXG4gIC8vIFRISVMgSVMgQSBQUk9KRUNUIEJBU0VEIE9OIEEgQlVJTEQgU1lTVEVNXG4gIC8vIFRISVMgRklMRSBJUyBKVVNUIFdSQVBQRUQgVVAgUkVTVUxUSU5HIElOXG4gIC8vIGJ1aWxkL2RvY3VtZW50LXJlZ2lzdGVyLWVsZW1lbnQubm9kZS5qc1xuXG4gIHZhclxuICAgIGRvY3VtZW50ID0gd2luZG93LmRvY3VtZW50LFxuICAgIE9iamVjdCA9IHdpbmRvdy5PYmplY3RcbiAgO1xuXG4gIHZhciBodG1sQ2xhc3MgPSAoZnVuY3Rpb24gKGluZm8pIHtcbiAgICAvLyAoQykgQW5kcmVhIEdpYW1tYXJjaGkgLSBAV2ViUmVmbGVjdGlvbiAtIE1JVCBTdHlsZVxuICAgIHZhclxuICAgICAgY2F0Y2hDbGFzcyA9IC9eW0EtWl0rW2Etel0vLFxuICAgICAgZmlsdGVyQnkgPSBmdW5jdGlvbiAocmUpIHtcbiAgICAgICAgdmFyIGFyciA9IFtdLCB0YWc7XG4gICAgICAgIGZvciAodGFnIGluIHJlZ2lzdGVyKSB7XG4gICAgICAgICAgaWYgKHJlLnRlc3QodGFnKSkgYXJyLnB1c2godGFnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJyO1xuICAgICAgfSxcbiAgICAgIGFkZCA9IGZ1bmN0aW9uIChDbGFzcywgdGFnKSB7XG4gICAgICAgIHRhZyA9IHRhZy50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBpZiAoISh0YWcgaW4gcmVnaXN0ZXIpKSB7XG4gICAgICAgICAgcmVnaXN0ZXJbQ2xhc3NdID0gKHJlZ2lzdGVyW0NsYXNzXSB8fCBbXSkuY29uY2F0KHRhZyk7XG4gICAgICAgICAgcmVnaXN0ZXJbdGFnXSA9IChyZWdpc3Rlclt0YWcudG9VcHBlckNhc2UoKV0gPSBDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICByZWdpc3RlciA9IChPYmplY3QuY3JlYXRlIHx8IE9iamVjdCkobnVsbCksXG4gICAgICBodG1sQ2xhc3MgPSB7fSxcbiAgICAgIGksIHNlY3Rpb24sIHRhZ3MsIENsYXNzXG4gICAgO1xuICAgIGZvciAoc2VjdGlvbiBpbiBpbmZvKSB7XG4gICAgICBmb3IgKENsYXNzIGluIGluZm9bc2VjdGlvbl0pIHtcbiAgICAgICAgdGFncyA9IGluZm9bc2VjdGlvbl1bQ2xhc3NdO1xuICAgICAgICByZWdpc3RlcltDbGFzc10gPSB0YWdzO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGFncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHJlZ2lzdGVyW3RhZ3NbaV0udG9Mb3dlckNhc2UoKV0gPVxuICAgICAgICAgIHJlZ2lzdGVyW3RhZ3NbaV0udG9VcHBlckNhc2UoKV0gPSBDbGFzcztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBodG1sQ2xhc3MuZ2V0ID0gZnVuY3Rpb24gZ2V0KHRhZ09yQ2xhc3MpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgdGFnT3JDbGFzcyA9PT0gJ3N0cmluZycgP1xuICAgICAgICAocmVnaXN0ZXJbdGFnT3JDbGFzc10gfHwgKGNhdGNoQ2xhc3MudGVzdCh0YWdPckNsYXNzKSA/IFtdIDogJycpKSA6XG4gICAgICAgIGZpbHRlckJ5KHRhZ09yQ2xhc3MpO1xuICAgIH07XG4gICAgaHRtbENsYXNzLnNldCA9IGZ1bmN0aW9uIHNldCh0YWcsIENsYXNzKSB7XG4gICAgICByZXR1cm4gKGNhdGNoQ2xhc3MudGVzdCh0YWcpID9cbiAgICAgICAgYWRkKHRhZywgQ2xhc3MpIDpcbiAgICAgICAgYWRkKENsYXNzLCB0YWcpXG4gICAgICApLCBodG1sQ2xhc3M7XG4gICAgfTtcbiAgICByZXR1cm4gaHRtbENsYXNzO1xuICB9KHtcbiAgICBcImNvbGxlY3Rpb25zXCI6IHtcbiAgICAgIFwiSFRNTEFsbENvbGxlY3Rpb25cIjogW1xuICAgICAgICBcImFsbFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MQ29sbGVjdGlvblwiOiBbXG4gICAgICAgIFwiZm9ybXNcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEZvcm1Db250cm9sc0NvbGxlY3Rpb25cIjogW1xuICAgICAgICBcImVsZW1lbnRzXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxPcHRpb25zQ29sbGVjdGlvblwiOiBbXG4gICAgICAgIFwib3B0aW9uc1wiXG4gICAgICBdXG4gICAgfSxcbiAgICBcImVsZW1lbnRzXCI6IHtcbiAgICAgIFwiRWxlbWVudFwiOiBbXG4gICAgICAgIFwiZWxlbWVudFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MQW5jaG9yRWxlbWVudFwiOiBbXG4gICAgICAgIFwiYVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MQXBwbGV0RWxlbWVudFwiOiBbXG4gICAgICAgIFwiYXBwbGV0XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxBcmVhRWxlbWVudFwiOiBbXG4gICAgICAgIFwiYXJlYVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MQXR0YWNobWVudEVsZW1lbnRcIjogW1xuICAgICAgICBcImF0dGFjaG1lbnRcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEF1ZGlvRWxlbWVudFwiOiBbXG4gICAgICAgIFwiYXVkaW9cIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEJSRWxlbWVudFwiOiBbXG4gICAgICAgIFwiYnJcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEJhc2VFbGVtZW50XCI6IFtcbiAgICAgICAgXCJiYXNlXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxCb2R5RWxlbWVudFwiOiBbXG4gICAgICAgIFwiYm9keVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MQnV0dG9uRWxlbWVudFwiOiBbXG4gICAgICAgIFwiYnV0dG9uXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxDYW52YXNFbGVtZW50XCI6IFtcbiAgICAgICAgXCJjYW52YXNcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTENvbnRlbnRFbGVtZW50XCI6IFtcbiAgICAgICAgXCJjb250ZW50XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxETGlzdEVsZW1lbnRcIjogW1xuICAgICAgICBcImRsXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxEYXRhRWxlbWVudFwiOiBbXG4gICAgICAgIFwiZGF0YVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRGF0YUxpc3RFbGVtZW50XCI6IFtcbiAgICAgICAgXCJkYXRhbGlzdFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRGV0YWlsc0VsZW1lbnRcIjogW1xuICAgICAgICBcImRldGFpbHNcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTERpYWxvZ0VsZW1lbnRcIjogW1xuICAgICAgICBcImRpYWxvZ1wiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRGlyZWN0b3J5RWxlbWVudFwiOiBbXG4gICAgICAgIFwiZGlyXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxEaXZFbGVtZW50XCI6IFtcbiAgICAgICAgXCJkaXZcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTERvY3VtZW50XCI6IFtcbiAgICAgICAgXCJkb2N1bWVudFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRWxlbWVudFwiOiBbXG4gICAgICAgIFwiZWxlbWVudFwiLFxuICAgICAgICBcImFiYnJcIixcbiAgICAgICAgXCJhZGRyZXNzXCIsXG4gICAgICAgIFwiYXJ0aWNsZVwiLFxuICAgICAgICBcImFzaWRlXCIsXG4gICAgICAgIFwiYlwiLFxuICAgICAgICBcImJkaVwiLFxuICAgICAgICBcImJkb1wiLFxuICAgICAgICBcImNpdGVcIixcbiAgICAgICAgXCJjb2RlXCIsXG4gICAgICAgIFwiY29tbWFuZFwiLFxuICAgICAgICBcImRkXCIsXG4gICAgICAgIFwiZGZuXCIsXG4gICAgICAgIFwiZHRcIixcbiAgICAgICAgXCJlbVwiLFxuICAgICAgICBcImZpZ2NhcHRpb25cIixcbiAgICAgICAgXCJmaWd1cmVcIixcbiAgICAgICAgXCJmb290ZXJcIixcbiAgICAgICAgXCJoZWFkZXJcIixcbiAgICAgICAgXCJpXCIsXG4gICAgICAgIFwia2JkXCIsXG4gICAgICAgIFwibWFya1wiLFxuICAgICAgICBcIm5hdlwiLFxuICAgICAgICBcIm5vc2NyaXB0XCIsXG4gICAgICAgIFwicnBcIixcbiAgICAgICAgXCJydFwiLFxuICAgICAgICBcInJ1YnlcIixcbiAgICAgICAgXCJzXCIsXG4gICAgICAgIFwic2FtcFwiLFxuICAgICAgICBcInNlY3Rpb25cIixcbiAgICAgICAgXCJzbWFsbFwiLFxuICAgICAgICBcInN0cm9uZ1wiLFxuICAgICAgICBcInN1YlwiLFxuICAgICAgICBcInN1bW1hcnlcIixcbiAgICAgICAgXCJzdXBcIixcbiAgICAgICAgXCJ1XCIsXG4gICAgICAgIFwidmFyXCIsXG4gICAgICAgIFwid2JyXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxFbWJlZEVsZW1lbnRcIjogW1xuICAgICAgICBcImVtYmVkXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxGaWVsZFNldEVsZW1lbnRcIjogW1xuICAgICAgICBcImZpZWxkc2V0XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxGb250RWxlbWVudFwiOiBbXG4gICAgICAgIFwiZm9udFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRm9ybUVsZW1lbnRcIjogW1xuICAgICAgICBcImZvcm1cIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEZyYW1lRWxlbWVudFwiOiBbXG4gICAgICAgIFwiZnJhbWVcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEZyYW1lU2V0RWxlbWVudFwiOiBbXG4gICAgICAgIFwiZnJhbWVzZXRcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEhSRWxlbWVudFwiOiBbXG4gICAgICAgIFwiaHJcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEhlYWRFbGVtZW50XCI6IFtcbiAgICAgICAgXCJoZWFkXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxIZWFkaW5nRWxlbWVudFwiOiBbXG4gICAgICAgIFwiaDFcIixcbiAgICAgICAgXCJoMlwiLFxuICAgICAgICBcImgzXCIsXG4gICAgICAgIFwiaDRcIixcbiAgICAgICAgXCJoNVwiLFxuICAgICAgICBcImg2XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxIdG1sRWxlbWVudFwiOiBbXG4gICAgICAgIFwiaHRtbFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MSUZyYW1lRWxlbWVudFwiOiBbXG4gICAgICAgIFwiaWZyYW1lXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxJbWFnZUVsZW1lbnRcIjogW1xuICAgICAgICBcImltZ1wiXG4gICAgICBdLFxuICAgICAgXCJIVE1MSW5wdXRFbGVtZW50XCI6IFtcbiAgICAgICAgXCJpbnB1dFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MS2V5Z2VuRWxlbWVudFwiOiBbXG4gICAgICAgIFwia2V5Z2VuXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxMSUVsZW1lbnRcIjogW1xuICAgICAgICBcImxpXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxMYWJlbEVsZW1lbnRcIjogW1xuICAgICAgICBcImxhYmVsXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxMZWdlbmRFbGVtZW50XCI6IFtcbiAgICAgICAgXCJsZWdlbmRcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTExpbmtFbGVtZW50XCI6IFtcbiAgICAgICAgXCJsaW5rXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxNYXBFbGVtZW50XCI6IFtcbiAgICAgICAgXCJtYXBcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTE1hcnF1ZWVFbGVtZW50XCI6IFtcbiAgICAgICAgXCJtYXJxdWVlXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxNZWRpYUVsZW1lbnRcIjogW1xuICAgICAgICBcIm1lZGlhXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxNZW51RWxlbWVudFwiOiBbXG4gICAgICAgIFwibWVudVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MTWVudUl0ZW1FbGVtZW50XCI6IFtcbiAgICAgICAgXCJtZW51aXRlbVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MTWV0YUVsZW1lbnRcIjogW1xuICAgICAgICBcIm1ldGFcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTE1ldGVyRWxlbWVudFwiOiBbXG4gICAgICAgIFwibWV0ZXJcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTE1vZEVsZW1lbnRcIjogW1xuICAgICAgICBcImRlbFwiLFxuICAgICAgICBcImluc1wiXG4gICAgICBdLFxuICAgICAgXCJIVE1MT0xpc3RFbGVtZW50XCI6IFtcbiAgICAgICAgXCJvbFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MT2JqZWN0RWxlbWVudFwiOiBbXG4gICAgICAgIFwib2JqZWN0XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxPcHRHcm91cEVsZW1lbnRcIjogW1xuICAgICAgICBcIm9wdGdyb3VwXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxPcHRpb25FbGVtZW50XCI6IFtcbiAgICAgICAgXCJvcHRpb25cIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTE91dHB1dEVsZW1lbnRcIjogW1xuICAgICAgICBcIm91dHB1dFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MUGFyYWdyYXBoRWxlbWVudFwiOiBbXG4gICAgICAgIFwicFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MUGFyYW1FbGVtZW50XCI6IFtcbiAgICAgICAgXCJwYXJhbVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MUGljdHVyZUVsZW1lbnRcIjogW1xuICAgICAgICBcInBpY3R1cmVcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTFByZUVsZW1lbnRcIjogW1xuICAgICAgICBcInByZVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MUHJvZ3Jlc3NFbGVtZW50XCI6IFtcbiAgICAgICAgXCJwcm9ncmVzc1wiXG4gICAgICBdLFxuICAgICAgXCJIVE1MUXVvdGVFbGVtZW50XCI6IFtcbiAgICAgICAgXCJibG9ja3F1b3RlXCIsXG4gICAgICAgIFwicVwiLFxuICAgICAgICBcInF1b3RlXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxTY3JpcHRFbGVtZW50XCI6IFtcbiAgICAgICAgXCJzY3JpcHRcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTFNlbGVjdEVsZW1lbnRcIjogW1xuICAgICAgICBcInNlbGVjdFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MU2hhZG93RWxlbWVudFwiOiBbXG4gICAgICAgIFwic2hhZG93XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxTbG90RWxlbWVudFwiOiBbXG4gICAgICAgIFwic2xvdFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MU291cmNlRWxlbWVudFwiOiBbXG4gICAgICAgIFwic291cmNlXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxTcGFuRWxlbWVudFwiOiBbXG4gICAgICAgIFwic3BhblwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MU3R5bGVFbGVtZW50XCI6IFtcbiAgICAgICAgXCJzdHlsZVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVGFibGVDYXB0aW9uRWxlbWVudFwiOiBbXG4gICAgICAgIFwiY2FwdGlvblwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVGFibGVDZWxsRWxlbWVudFwiOiBbXG4gICAgICAgIFwidGRcIixcbiAgICAgICAgXCJ0aFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVGFibGVDb2xFbGVtZW50XCI6IFtcbiAgICAgICAgXCJjb2xcIixcbiAgICAgICAgXCJjb2xncm91cFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVGFibGVFbGVtZW50XCI6IFtcbiAgICAgICAgXCJ0YWJsZVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVGFibGVSb3dFbGVtZW50XCI6IFtcbiAgICAgICAgXCJ0clwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVGFibGVTZWN0aW9uRWxlbWVudFwiOiBbXG4gICAgICAgIFwidGhlYWRcIixcbiAgICAgICAgXCJ0Ym9keVwiLFxuICAgICAgICBcInRmb290XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUZW1wbGF0ZUVsZW1lbnRcIjogW1xuICAgICAgICBcInRlbXBsYXRlXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUZXh0QXJlYUVsZW1lbnRcIjogW1xuICAgICAgICBcInRleHRhcmVhXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUaW1lRWxlbWVudFwiOiBbXG4gICAgICAgIFwidGltZVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVGl0bGVFbGVtZW50XCI6IFtcbiAgICAgICAgXCJ0aXRsZVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVHJhY2tFbGVtZW50XCI6IFtcbiAgICAgICAgXCJ0cmFja1wiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVUxpc3RFbGVtZW50XCI6IFtcbiAgICAgICAgXCJ1bFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVW5rbm93bkVsZW1lbnRcIjogW1xuICAgICAgICBcInVua25vd25cIixcbiAgICAgICAgXCJ2aGdyb3VwdlwiLFxuICAgICAgICBcInZrZXlnZW5cIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTFZpZGVvRWxlbWVudFwiOiBbXG4gICAgICAgIFwidmlkZW9cIlxuICAgICAgXVxuICAgIH0sXG4gICAgXCJub2Rlc1wiOiB7XG4gICAgICBcIkF0dHJcIjogW1xuICAgICAgICBcIm5vZGVcIlxuICAgICAgXSxcbiAgICAgIFwiQXVkaW9cIjogW1xuICAgICAgICBcImF1ZGlvXCJcbiAgICAgIF0sXG4gICAgICBcIkNEQVRBU2VjdGlvblwiOiBbXG4gICAgICAgIFwibm9kZVwiXG4gICAgICBdLFxuICAgICAgXCJDaGFyYWN0ZXJEYXRhXCI6IFtcbiAgICAgICAgXCJub2RlXCJcbiAgICAgIF0sXG4gICAgICBcIkNvbW1lbnRcIjogW1xuICAgICAgICBcIiNjb21tZW50XCJcbiAgICAgIF0sXG4gICAgICBcIkRvY3VtZW50XCI6IFtcbiAgICAgICAgXCIjZG9jdW1lbnRcIlxuICAgICAgXSxcbiAgICAgIFwiRG9jdW1lbnRGcmFnbWVudFwiOiBbXG4gICAgICAgIFwiI2RvY3VtZW50LWZyYWdtZW50XCJcbiAgICAgIF0sXG4gICAgICBcIkRvY3VtZW50VHlwZVwiOiBbXG4gICAgICAgIFwibm9kZVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRG9jdW1lbnRcIjogW1xuICAgICAgICBcIiNkb2N1bWVudFwiXG4gICAgICBdLFxuICAgICAgXCJJbWFnZVwiOiBbXG4gICAgICAgIFwiaW1nXCJcbiAgICAgIF0sXG4gICAgICBcIk9wdGlvblwiOiBbXG4gICAgICAgIFwib3B0aW9uXCJcbiAgICAgIF0sXG4gICAgICBcIlByb2Nlc3NpbmdJbnN0cnVjdGlvblwiOiBbXG4gICAgICAgIFwibm9kZVwiXG4gICAgICBdLFxuICAgICAgXCJTaGFkb3dSb290XCI6IFtcbiAgICAgICAgXCIjc2hhZG93LXJvb3RcIlxuICAgICAgXSxcbiAgICAgIFwiVGV4dFwiOiBbXG4gICAgICAgIFwiI3RleHRcIlxuICAgICAgXSxcbiAgICAgIFwiWE1MRG9jdW1lbnRcIjogW1xuICAgICAgICBcInhtbFwiXG4gICAgICBdXG4gICAgfVxuICB9KSk7XG4gIFxuICBcbiAgICBcbiAgLy8gcGFzc2VkIGF0IHJ1bnRpbWUsIGNvbmZpZ3VyYWJsZVxuICAvLyB2aWEgbm9kZWpzIG1vZHVsZVxuICBpZiAoIXBvbHlmaWxsKSBwb2x5ZmlsbCA9ICdhdXRvJztcbiAgXG4gIHZhclxuICAgIC8vIFYwIHBvbHlmaWxsIGVudHJ5XG4gICAgUkVHSVNURVJfRUxFTUVOVCA9ICdyZWdpc3RlckVsZW1lbnQnLFxuICBcbiAgICAvLyBJRSA8IDExIG9ubHkgKyBvbGQgV2ViS2l0IGZvciBhdHRyaWJ1dGVzICsgZmVhdHVyZSBkZXRlY3Rpb25cbiAgICBFWFBBTkRPX1VJRCA9ICdfXycgKyBSRUdJU1RFUl9FTEVNRU5UICsgKHdpbmRvdy5NYXRoLnJhbmRvbSgpICogMTBlNCA+PiAwKSxcbiAgXG4gICAgLy8gc2hvcnRjdXRzIGFuZCBjb3N0YW50c1xuICAgIEFERF9FVkVOVF9MSVNURU5FUiA9ICdhZGRFdmVudExpc3RlbmVyJyxcbiAgICBBVFRBQ0hFRCA9ICdhdHRhY2hlZCcsXG4gICAgQ0FMTEJBQ0sgPSAnQ2FsbGJhY2snLFxuICAgIERFVEFDSEVEID0gJ2RldGFjaGVkJyxcbiAgICBFWFRFTkRTID0gJ2V4dGVuZHMnLFxuICBcbiAgICBBVFRSSUJVVEVfQ0hBTkdFRF9DQUxMQkFDSyA9ICdhdHRyaWJ1dGVDaGFuZ2VkJyArIENBTExCQUNLLFxuICAgIEFUVEFDSEVEX0NBTExCQUNLID0gQVRUQUNIRUQgKyBDQUxMQkFDSyxcbiAgICBDT05ORUNURURfQ0FMTEJBQ0sgPSAnY29ubmVjdGVkJyArIENBTExCQUNLLFxuICAgIERJU0NPTk5FQ1RFRF9DQUxMQkFDSyA9ICdkaXNjb25uZWN0ZWQnICsgQ0FMTEJBQ0ssXG4gICAgQ1JFQVRFRF9DQUxMQkFDSyA9ICdjcmVhdGVkJyArIENBTExCQUNLLFxuICAgIERFVEFDSEVEX0NBTExCQUNLID0gREVUQUNIRUQgKyBDQUxMQkFDSyxcbiAgXG4gICAgQURESVRJT04gPSAnQURESVRJT04nLFxuICAgIE1PRElGSUNBVElPTiA9ICdNT0RJRklDQVRJT04nLFxuICAgIFJFTU9WQUwgPSAnUkVNT1ZBTCcsXG4gIFxuICAgIERPTV9BVFRSX01PRElGSUVEID0gJ0RPTUF0dHJNb2RpZmllZCcsXG4gICAgRE9NX0NPTlRFTlRfTE9BREVEID0gJ0RPTUNvbnRlbnRMb2FkZWQnLFxuICAgIERPTV9TVUJUUkVFX01PRElGSUVEID0gJ0RPTVN1YnRyZWVNb2RpZmllZCcsXG4gIFxuICAgIFBSRUZJWF9UQUcgPSAnPCcsXG4gICAgUFJFRklYX0lTID0gJz0nLFxuICBcbiAgICAvLyB2YWxpZCBhbmQgaW52YWxpZCBub2RlIG5hbWVzXG4gICAgdmFsaWROYW1lID0gL15bQS1aXVtBLVowLTldKig/Oi1bQS1aMC05XSspKyQvLFxuICAgIGludmFsaWROYW1lcyA9IFtcbiAgICAgICdBTk5PVEFUSU9OLVhNTCcsXG4gICAgICAnQ09MT1ItUFJPRklMRScsXG4gICAgICAnRk9OVC1GQUNFJyxcbiAgICAgICdGT05ULUZBQ0UtU1JDJyxcbiAgICAgICdGT05ULUZBQ0UtVVJJJyxcbiAgICAgICdGT05ULUZBQ0UtRk9STUFUJyxcbiAgICAgICdGT05ULUZBQ0UtTkFNRScsXG4gICAgICAnTUlTU0lORy1HTFlQSCdcbiAgICBdLFxuICBcbiAgICAvLyByZWdpc3RlcmVkIHR5cGVzIGFuZCB0aGVpciBwcm90b3R5cGVzXG4gICAgdHlwZXMgPSBbXSxcbiAgICBwcm90b3MgPSBbXSxcbiAgXG4gICAgLy8gdG8gcXVlcnkgc3Vibm9kZXNcbiAgICBxdWVyeSA9ICcnLFxuICBcbiAgICAvLyBodG1sIHNob3J0Y3V0IHVzZWQgdG8gZmVhdHVyZSBkZXRlY3RcbiAgICBkb2N1bWVudEVsZW1lbnQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsXG4gIFxuICAgIC8vIEVTNSBpbmxpbmUgaGVscGVycyB8fCBiYXNpYyBwYXRjaGVzXG4gICAgaW5kZXhPZiA9IHR5cGVzLmluZGV4T2YgfHwgZnVuY3Rpb24gKHYpIHtcbiAgICAgIGZvcih2YXIgaSA9IHRoaXMubGVuZ3RoOyBpLS0gJiYgdGhpc1tpXSAhPT0gdjspe31cbiAgICAgIHJldHVybiBpO1xuICAgIH0sXG4gIFxuICAgIC8vIG90aGVyIGhlbHBlcnMgLyBzaG9ydGN1dHNcbiAgICBPUCA9IE9iamVjdC5wcm90b3R5cGUsXG4gICAgaE9QID0gT1AuaGFzT3duUHJvcGVydHksXG4gICAgaVBPID0gT1AuaXNQcm90b3R5cGVPZixcbiAgXG4gICAgZGVmaW5lUHJvcGVydHkgPSBPYmplY3QuZGVmaW5lUHJvcGVydHksXG4gICAgZW1wdHkgPSBbXSxcbiAgICBnT1BEID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcixcbiAgICBnT1BOID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMsXG4gICAgZ1BPID0gT2JqZWN0LmdldFByb3RvdHlwZU9mLFxuICAgIHNQTyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZixcbiAgXG4gICAgLy8ganNoaW50IHByb3RvOiB0cnVlXG4gICAgaGFzUHJvdG8gPSAhIU9iamVjdC5fX3Byb3RvX18sXG4gIFxuICAgIC8vIFYxIGhlbHBlcnNcbiAgICBmaXhHZXRDbGFzcyA9IGZhbHNlLFxuICAgIERSRUNFVjEgPSAnX19kcmVDRXYxJyxcbiAgICBjdXN0b21FbGVtZW50cyA9IHdpbmRvdy5jdXN0b21FbGVtZW50cyxcbiAgICB1c2FibGVDdXN0b21FbGVtZW50cyA9IHBvbHlmaWxsICE9PSAnZm9yY2UnICYmICEhKFxuICAgICAgY3VzdG9tRWxlbWVudHMgJiZcbiAgICAgIGN1c3RvbUVsZW1lbnRzLmRlZmluZSAmJlxuICAgICAgY3VzdG9tRWxlbWVudHMuZ2V0ICYmXG4gICAgICBjdXN0b21FbGVtZW50cy53aGVuRGVmaW5lZFxuICAgICksXG4gICAgRGljdCA9IE9iamVjdC5jcmVhdGUgfHwgT2JqZWN0LFxuICAgIE1hcCA9IHdpbmRvdy5NYXAgfHwgZnVuY3Rpb24gTWFwKCkge1xuICAgICAgdmFyIEsgPSBbXSwgViA9IFtdLCBpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoaykge1xuICAgICAgICAgIHJldHVybiBWW2luZGV4T2YuY2FsbChLLCBrKV07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKGssIHYpIHtcbiAgICAgICAgICBpID0gaW5kZXhPZi5jYWxsKEssIGspO1xuICAgICAgICAgIGlmIChpIDwgMCkgVltLLnB1c2goaykgLSAxXSA9IHY7XG4gICAgICAgICAgZWxzZSBWW2ldID0gdjtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9LFxuICAgIFByb21pc2UgPSB3aW5kb3cuUHJvbWlzZSB8fCBmdW5jdGlvbiAoZm4pIHtcbiAgICAgIHZhclxuICAgICAgICBub3RpZnkgPSBbXSxcbiAgICAgICAgZG9uZSA9IGZhbHNlLFxuICAgICAgICBwID0ge1xuICAgICAgICAgICdjYXRjaCc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBwO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgJ3RoZW4nOiBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgIG5vdGlmeS5wdXNoKGNiKTtcbiAgICAgICAgICAgIGlmIChkb25lKSBzZXRUaW1lb3V0KHJlc29sdmUsIDEpO1xuICAgICAgICAgICAgcmV0dXJuIHA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICA7XG4gICAgICBmdW5jdGlvbiByZXNvbHZlKHZhbHVlKSB7XG4gICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgICB3aGlsZSAobm90aWZ5Lmxlbmd0aCkgbm90aWZ5LnNoaWZ0KCkodmFsdWUpO1xuICAgICAgfVxuICAgICAgZm4ocmVzb2x2ZSk7XG4gICAgICByZXR1cm4gcDtcbiAgICB9LFxuICAgIGp1c3RDcmVhdGVkID0gZmFsc2UsXG4gICAgY29uc3RydWN0b3JzID0gRGljdChudWxsKSxcbiAgICB3YWl0aW5nTGlzdCA9IERpY3QobnVsbCksXG4gICAgbm9kZU5hbWVzID0gbmV3IE1hcCgpLFxuICAgIHNlY29uZEFyZ3VtZW50ID0gZnVuY3Rpb24gKGlzKSB7XG4gICAgICByZXR1cm4gaXMudG9Mb3dlckNhc2UoKTtcbiAgICB9LFxuICBcbiAgICAvLyB1c2VkIHRvIGNyZWF0ZSB1bmlxdWUgaW5zdGFuY2VzXG4gICAgY3JlYXRlID0gT2JqZWN0LmNyZWF0ZSB8fCBmdW5jdGlvbiBCcmlkZ2UocHJvdG8pIHtcbiAgICAgIC8vIHNpbGx5IGJyb2tlbiBwb2x5ZmlsbCBwcm9iYWJseSBldmVyIHVzZWQgYnV0IHNob3J0IGVub3VnaCB0byB3b3JrXG4gICAgICByZXR1cm4gcHJvdG8gPyAoKEJyaWRnZS5wcm90b3R5cGUgPSBwcm90byksIG5ldyBCcmlkZ2UoKSkgOiB0aGlzO1xuICAgIH0sXG4gIFxuICAgIC8vIHdpbGwgc2V0IHRoZSBwcm90b3R5cGUgaWYgcG9zc2libGVcbiAgICAvLyBvciBjb3B5IG92ZXIgYWxsIHByb3BlcnRpZXNcbiAgICBzZXRQcm90b3R5cGUgPSBzUE8gfHwgKFxuICAgICAgaGFzUHJvdG8gP1xuICAgICAgICBmdW5jdGlvbiAobywgcCkge1xuICAgICAgICAgIG8uX19wcm90b19fID0gcDtcbiAgICAgICAgICByZXR1cm4gbztcbiAgICAgICAgfSA6IChcbiAgICAgIChnT1BOICYmIGdPUEQpID9cbiAgICAgICAgKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgZnVuY3Rpb24gc2V0UHJvcGVydGllcyhvLCBwKSB7XG4gICAgICAgICAgICBmb3IgKHZhclxuICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgIG5hbWVzID0gZ09QTihwKSxcbiAgICAgICAgICAgICAgaSA9IDAsIGxlbmd0aCA9IG5hbWVzLmxlbmd0aDtcbiAgICAgICAgICAgICAgaSA8IGxlbmd0aDsgaSsrXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAga2V5ID0gbmFtZXNbaV07XG4gICAgICAgICAgICAgIGlmICghaE9QLmNhbGwobywga2V5KSkge1xuICAgICAgICAgICAgICAgIGRlZmluZVByb3BlcnR5KG8sIGtleSwgZ09QRChwLCBrZXkpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG8sIHApIHtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgc2V0UHJvcGVydGllcyhvLCBwKTtcbiAgICAgICAgICAgIH0gd2hpbGUgKChwID0gZ1BPKHApKSAmJiAhaVBPLmNhbGwocCwgbykpO1xuICAgICAgICAgICAgcmV0dXJuIG87XG4gICAgICAgICAgfTtcbiAgICAgICAgfSgpKSA6XG4gICAgICAgIGZ1bmN0aW9uIChvLCBwKSB7XG4gICAgICAgICAgZm9yICh2YXIga2V5IGluIHApIHtcbiAgICAgICAgICAgIG9ba2V5XSA9IHBba2V5XTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG87XG4gICAgICAgIH1cbiAgICApKSxcbiAgXG4gICAgLy8gRE9NIHNob3J0Y3V0cyBhbmQgaGVscGVycywgaWYgYW55XG4gIFxuICAgIE11dGF0aW9uT2JzZXJ2ZXIgPSB3aW5kb3cuTXV0YXRpb25PYnNlcnZlciB8fFxuICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuV2ViS2l0TXV0YXRpb25PYnNlcnZlcixcbiAgXG4gICAgSFRNTEVsZW1lbnRQcm90b3R5cGUgPSAoXG4gICAgICB3aW5kb3cuSFRNTEVsZW1lbnQgfHxcbiAgICAgIHdpbmRvdy5FbGVtZW50IHx8XG4gICAgICB3aW5kb3cuTm9kZVxuICAgICkucHJvdG90eXBlLFxuICBcbiAgICBJRTggPSAhaVBPLmNhbGwoSFRNTEVsZW1lbnRQcm90b3R5cGUsIGRvY3VtZW50RWxlbWVudCksXG4gIFxuICAgIHNhZmVQcm9wZXJ0eSA9IElFOCA/IGZ1bmN0aW9uIChvLCBrLCBkKSB7XG4gICAgICBvW2tdID0gZC52YWx1ZTtcbiAgICAgIHJldHVybiBvO1xuICAgIH0gOiBkZWZpbmVQcm9wZXJ0eSxcbiAgXG4gICAgaXNWYWxpZE5vZGUgPSBJRTggP1xuICAgICAgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUubm9kZVR5cGUgPT09IDE7XG4gICAgICB9IDpcbiAgICAgIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIHJldHVybiBpUE8uY2FsbChIVE1MRWxlbWVudFByb3RvdHlwZSwgbm9kZSk7XG4gICAgICB9LFxuICBcbiAgICB0YXJnZXRzID0gSUU4ICYmIFtdLFxuICBcbiAgICBhdHRhY2hTaGFkb3cgPSBIVE1MRWxlbWVudFByb3RvdHlwZS5hdHRhY2hTaGFkb3csXG4gICAgY2xvbmVOb2RlID0gSFRNTEVsZW1lbnRQcm90b3R5cGUuY2xvbmVOb2RlLFxuICAgIGRpc3BhdGNoRXZlbnQgPSBIVE1MRWxlbWVudFByb3RvdHlwZS5kaXNwYXRjaEV2ZW50LFxuICAgIGdldEF0dHJpYnV0ZSA9IEhUTUxFbGVtZW50UHJvdG90eXBlLmdldEF0dHJpYnV0ZSxcbiAgICBoYXNBdHRyaWJ1dGUgPSBIVE1MRWxlbWVudFByb3RvdHlwZS5oYXNBdHRyaWJ1dGUsXG4gICAgcmVtb3ZlQXR0cmlidXRlID0gSFRNTEVsZW1lbnRQcm90b3R5cGUucmVtb3ZlQXR0cmlidXRlLFxuICAgIHNldEF0dHJpYnV0ZSA9IEhUTUxFbGVtZW50UHJvdG90eXBlLnNldEF0dHJpYnV0ZSxcbiAgXG4gICAgLy8gcmVwbGFjZWQgbGF0ZXIgb25cbiAgICBjcmVhdGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCxcbiAgICBwYXRjaGVkQ3JlYXRlRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQsXG4gIFxuICAgIC8vIHNoYXJlZCBvYnNlcnZlciBmb3IgYWxsIGF0dHJpYnV0ZXNcbiAgICBhdHRyaWJ1dGVzT2JzZXJ2ZXIgPSBNdXRhdGlvbk9ic2VydmVyICYmIHtcbiAgICAgIGF0dHJpYnV0ZXM6IHRydWUsXG4gICAgICBjaGFyYWN0ZXJEYXRhOiB0cnVlLFxuICAgICAgYXR0cmlidXRlT2xkVmFsdWU6IHRydWVcbiAgICB9LFxuICBcbiAgICAvLyB1c2VmdWwgdG8gZGV0ZWN0IG9ubHkgaWYgdGhlcmUncyBubyBNdXRhdGlvbk9ic2VydmVyXG4gICAgRE9NQXR0ck1vZGlmaWVkID0gTXV0YXRpb25PYnNlcnZlciB8fCBmdW5jdGlvbihlKSB7XG4gICAgICBkb2VzTm90U3VwcG9ydERPTUF0dHJNb2RpZmllZCA9IGZhbHNlO1xuICAgICAgZG9jdW1lbnRFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgICAgIERPTV9BVFRSX01PRElGSUVELFxuICAgICAgICBET01BdHRyTW9kaWZpZWRcbiAgICAgICk7XG4gICAgfSxcbiAgXG4gICAgLy8gd2lsbCBib3RoIGJlIHVzZWQgdG8gbWFrZSBET01Ob2RlSW5zZXJ0ZWQgYXN5bmNocm9ub3VzXG4gICAgYXNhcFF1ZXVlLFxuICAgIGFzYXBUaW1lciA9IDAsXG4gIFxuICAgIC8vIGludGVybmFsIGZsYWdzXG4gICAgVjAgPSBSRUdJU1RFUl9FTEVNRU5UIGluIGRvY3VtZW50LFxuICAgIHNldExpc3RlbmVyID0gdHJ1ZSxcbiAgICBqdXN0U2V0dXAgPSBmYWxzZSxcbiAgICBkb2VzTm90U3VwcG9ydERPTUF0dHJNb2RpZmllZCA9IHRydWUsXG4gICAgZHJvcERvbUNvbnRlbnRMb2FkZWQgPSB0cnVlLFxuICBcbiAgICAvLyBuZWVkZWQgZm9yIHRoZSBpbm5lckhUTUwgaGVscGVyXG4gICAgbm90RnJvbUlubmVySFRNTEhlbHBlciA9IHRydWUsXG4gIFxuICAgIC8vIG9wdGlvbmFsbHkgZGVmaW5lZCBsYXRlciBvblxuICAgIG9uU3VidHJlZU1vZGlmaWVkLFxuICAgIGNhbGxET01BdHRyTW9kaWZpZWQsXG4gICAgZ2V0QXR0cmlidXRlc01pcnJvcixcbiAgICBvYnNlcnZlcixcbiAgICBvYnNlcnZlLFxuICBcbiAgICAvLyBiYXNlZCBvbiBzZXR0aW5nIHByb3RvdHlwZSBjYXBhYmlsaXR5XG4gICAgLy8gd2lsbCBjaGVjayBwcm90byBvciB0aGUgZXhwYW5kbyBhdHRyaWJ1dGVcbiAgICAvLyBpbiBvcmRlciB0byBzZXR1cCB0aGUgbm9kZSBvbmNlXG4gICAgcGF0Y2hJZk5vdEFscmVhZHksXG4gICAgcGF0Y2hcbiAgO1xuICBcbiAgLy8gb25seSBpZiBuZWVkZWRcbiAgaWYgKCFWMCkge1xuICBcbiAgICBpZiAoc1BPIHx8IGhhc1Byb3RvKSB7XG4gICAgICAgIHBhdGNoSWZOb3RBbHJlYWR5ID0gZnVuY3Rpb24gKG5vZGUsIHByb3RvKSB7XG4gICAgICAgICAgaWYgKCFpUE8uY2FsbChwcm90bywgbm9kZSkpIHtcbiAgICAgICAgICAgIHNldHVwTm9kZShub2RlLCBwcm90byk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBwYXRjaCA9IHNldHVwTm9kZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBwYXRjaElmTm90QWxyZWFkeSA9IGZ1bmN0aW9uIChub2RlLCBwcm90bykge1xuICAgICAgICAgIGlmICghbm9kZVtFWFBBTkRPX1VJRF0pIHtcbiAgICAgICAgICAgIG5vZGVbRVhQQU5ET19VSURdID0gT2JqZWN0KHRydWUpO1xuICAgICAgICAgICAgc2V0dXBOb2RlKG5vZGUsIHByb3RvKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHBhdGNoID0gcGF0Y2hJZk5vdEFscmVhZHk7XG4gICAgfVxuICBcbiAgICBpZiAoSUU4KSB7XG4gICAgICBkb2VzTm90U3VwcG9ydERPTUF0dHJNb2RpZmllZCA9IGZhbHNlO1xuICAgICAgKGZ1bmN0aW9uICgpe1xuICAgICAgICB2YXJcbiAgICAgICAgICBkZXNjcmlwdG9yID0gZ09QRChIVE1MRWxlbWVudFByb3RvdHlwZSwgQUREX0VWRU5UX0xJU1RFTkVSKSxcbiAgICAgICAgICBhZGRFdmVudExpc3RlbmVyID0gZGVzY3JpcHRvci52YWx1ZSxcbiAgICAgICAgICBwYXRjaGVkUmVtb3ZlQXR0cmlidXRlID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIHZhciBlID0gbmV3IEN1c3RvbUV2ZW50KERPTV9BVFRSX01PRElGSUVELCB7YnViYmxlczogdHJ1ZX0pO1xuICAgICAgICAgICAgZS5hdHRyTmFtZSA9IG5hbWU7XG4gICAgICAgICAgICBlLnByZXZWYWx1ZSA9IGdldEF0dHJpYnV0ZS5jYWxsKHRoaXMsIG5hbWUpO1xuICAgICAgICAgICAgZS5uZXdWYWx1ZSA9IG51bGw7XG4gICAgICAgICAgICBlW1JFTU9WQUxdID0gZS5hdHRyQ2hhbmdlID0gMjtcbiAgICAgICAgICAgIHJlbW92ZUF0dHJpYnV0ZS5jYWxsKHRoaXMsIG5hbWUpO1xuICAgICAgICAgICAgZGlzcGF0Y2hFdmVudC5jYWxsKHRoaXMsIGUpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgcGF0Y2hlZFNldEF0dHJpYnV0ZSA9IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIGhhZCA9IGhhc0F0dHJpYnV0ZS5jYWxsKHRoaXMsIG5hbWUpLFxuICAgICAgICAgICAgICBvbGQgPSBoYWQgJiYgZ2V0QXR0cmlidXRlLmNhbGwodGhpcywgbmFtZSksXG4gICAgICAgICAgICAgIGUgPSBuZXcgQ3VzdG9tRXZlbnQoRE9NX0FUVFJfTU9ESUZJRUQsIHtidWJibGVzOiB0cnVlfSlcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIHNldEF0dHJpYnV0ZS5jYWxsKHRoaXMsIG5hbWUsIHZhbHVlKTtcbiAgICAgICAgICAgIGUuYXR0ck5hbWUgPSBuYW1lO1xuICAgICAgICAgICAgZS5wcmV2VmFsdWUgPSBoYWQgPyBvbGQgOiBudWxsO1xuICAgICAgICAgICAgZS5uZXdWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgaWYgKGhhZCkge1xuICAgICAgICAgICAgICBlW01PRElGSUNBVElPTl0gPSBlLmF0dHJDaGFuZ2UgPSAxO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZVtBRERJVElPTl0gPSBlLmF0dHJDaGFuZ2UgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGlzcGF0Y2hFdmVudC5jYWxsKHRoaXMsIGUpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgb25Qcm9wZXJ0eUNoYW5nZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAvLyBqc2hpbnQgZXFudWxsOnRydWVcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICBub2RlID0gZS5jdXJyZW50VGFyZ2V0LFxuICAgICAgICAgICAgICBzdXBlclNlY3JldCA9IG5vZGVbRVhQQU5ET19VSURdLFxuICAgICAgICAgICAgICBwcm9wZXJ0eU5hbWUgPSBlLnByb3BlcnR5TmFtZSxcbiAgICAgICAgICAgICAgZXZlbnRcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIGlmIChzdXBlclNlY3JldC5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eU5hbWUpKSB7XG4gICAgICAgICAgICAgIHN1cGVyU2VjcmV0ID0gc3VwZXJTZWNyZXRbcHJvcGVydHlOYW1lXTtcbiAgICAgICAgICAgICAgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoRE9NX0FUVFJfTU9ESUZJRUQsIHtidWJibGVzOiB0cnVlfSk7XG4gICAgICAgICAgICAgIGV2ZW50LmF0dHJOYW1lID0gc3VwZXJTZWNyZXQubmFtZTtcbiAgICAgICAgICAgICAgZXZlbnQucHJldlZhbHVlID0gc3VwZXJTZWNyZXQudmFsdWUgfHwgbnVsbDtcbiAgICAgICAgICAgICAgZXZlbnQubmV3VmFsdWUgPSAoc3VwZXJTZWNyZXQudmFsdWUgPSBub2RlW3Byb3BlcnR5TmFtZV0gfHwgbnVsbCk7XG4gICAgICAgICAgICAgIGlmIChldmVudC5wcmV2VmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGV2ZW50W0FERElUSU9OXSA9IGV2ZW50LmF0dHJDaGFuZ2UgPSAwO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGV2ZW50W01PRElGSUNBVElPTl0gPSBldmVudC5hdHRyQ2hhbmdlID0gMTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBkaXNwYXRjaEV2ZW50LmNhbGwobm9kZSwgZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgO1xuICAgICAgICBkZXNjcmlwdG9yLnZhbHVlID0gZnVuY3Rpb24gKHR5cGUsIGhhbmRsZXIsIGNhcHR1cmUpIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0eXBlID09PSBET01fQVRUUl9NT0RJRklFRCAmJlxuICAgICAgICAgICAgdGhpc1tBVFRSSUJVVEVfQ0hBTkdFRF9DQUxMQkFDS10gJiZcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlICE9PSBwYXRjaGVkU2V0QXR0cmlidXRlXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzW0VYUEFORE9fVUlEXSA9IHtcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ2NsYXNzJyxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5jbGFzc05hbWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlID0gcGF0Y2hlZFNldEF0dHJpYnV0ZTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlID0gcGF0Y2hlZFJlbW92ZUF0dHJpYnV0ZTtcbiAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIuY2FsbCh0aGlzLCAncHJvcGVydHljaGFuZ2UnLCBvblByb3BlcnR5Q2hhbmdlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lci5jYWxsKHRoaXMsIHR5cGUsIGhhbmRsZXIsIGNhcHR1cmUpO1xuICAgICAgICB9O1xuICAgICAgICBkZWZpbmVQcm9wZXJ0eShIVE1MRWxlbWVudFByb3RvdHlwZSwgQUREX0VWRU5UX0xJU1RFTkVSLCBkZXNjcmlwdG9yKTtcbiAgICAgIH0oKSk7XG4gICAgfSBlbHNlIGlmICghTXV0YXRpb25PYnNlcnZlcikge1xuICAgICAgZG9jdW1lbnRFbGVtZW50W0FERF9FVkVOVF9MSVNURU5FUl0oRE9NX0FUVFJfTU9ESUZJRUQsIERPTUF0dHJNb2RpZmllZCk7XG4gICAgICBkb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlKEVYUEFORE9fVUlELCAxKTtcbiAgICAgIGRvY3VtZW50RWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoRVhQQU5ET19VSUQpO1xuICAgICAgaWYgKGRvZXNOb3RTdXBwb3J0RE9NQXR0ck1vZGlmaWVkKSB7XG4gICAgICAgIG9uU3VidHJlZU1vZGlmaWVkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICB2YXJcbiAgICAgICAgICAgIG5vZGUgPSB0aGlzLFxuICAgICAgICAgICAgb2xkQXR0cmlidXRlcyxcbiAgICAgICAgICAgIG5ld0F0dHJpYnV0ZXMsXG4gICAgICAgICAgICBrZXlcbiAgICAgICAgICA7XG4gICAgICAgICAgaWYgKG5vZGUgPT09IGUudGFyZ2V0KSB7XG4gICAgICAgICAgICBvbGRBdHRyaWJ1dGVzID0gbm9kZVtFWFBBTkRPX1VJRF07XG4gICAgICAgICAgICBub2RlW0VYUEFORE9fVUlEXSA9IChuZXdBdHRyaWJ1dGVzID0gZ2V0QXR0cmlidXRlc01pcnJvcihub2RlKSk7XG4gICAgICAgICAgICBmb3IgKGtleSBpbiBuZXdBdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgIGlmICghKGtleSBpbiBvbGRBdHRyaWJ1dGVzKSkge1xuICAgICAgICAgICAgICAgIC8vIGF0dHJpYnV0ZSB3YXMgYWRkZWRcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbERPTUF0dHJNb2RpZmllZChcbiAgICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgICBub2RlLFxuICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgb2xkQXR0cmlidXRlc1trZXldLFxuICAgICAgICAgICAgICAgICAgbmV3QXR0cmlidXRlc1trZXldLFxuICAgICAgICAgICAgICAgICAgQURESVRJT05cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5ld0F0dHJpYnV0ZXNba2V5XSAhPT0gb2xkQXR0cmlidXRlc1trZXldKSB7XG4gICAgICAgICAgICAgICAgLy8gYXR0cmlidXRlIHdhcyBjaGFuZ2VkXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxET01BdHRyTW9kaWZpZWQoXG4gICAgICAgICAgICAgICAgICAxLFxuICAgICAgICAgICAgICAgICAgbm9kZSxcbiAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgIG9sZEF0dHJpYnV0ZXNba2V5XSxcbiAgICAgICAgICAgICAgICAgIG5ld0F0dHJpYnV0ZXNba2V5XSxcbiAgICAgICAgICAgICAgICAgIE1PRElGSUNBVElPTlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNoZWNraW5nIGlmIGl0IGhhcyBiZWVuIHJlbW92ZWRcbiAgICAgICAgICAgIGZvciAoa2V5IGluIG9sZEF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIG5ld0F0dHJpYnV0ZXMpKSB7XG4gICAgICAgICAgICAgICAgLy8gYXR0cmlidXRlIHJlbW92ZWRcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbERPTUF0dHJNb2RpZmllZChcbiAgICAgICAgICAgICAgICAgIDIsXG4gICAgICAgICAgICAgICAgICBub2RlLFxuICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgb2xkQXR0cmlidXRlc1trZXldLFxuICAgICAgICAgICAgICAgICAgbmV3QXR0cmlidXRlc1trZXldLFxuICAgICAgICAgICAgICAgICAgUkVNT1ZBTFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGNhbGxET01BdHRyTW9kaWZpZWQgPSBmdW5jdGlvbiAoXG4gICAgICAgICAgYXR0ckNoYW5nZSxcbiAgICAgICAgICBjdXJyZW50VGFyZ2V0LFxuICAgICAgICAgIGF0dHJOYW1lLFxuICAgICAgICAgIHByZXZWYWx1ZSxcbiAgICAgICAgICBuZXdWYWx1ZSxcbiAgICAgICAgICBhY3Rpb25cbiAgICAgICAgKSB7XG4gICAgICAgICAgdmFyIGUgPSB7XG4gICAgICAgICAgICBhdHRyQ2hhbmdlOiBhdHRyQ2hhbmdlLFxuICAgICAgICAgICAgY3VycmVudFRhcmdldDogY3VycmVudFRhcmdldCxcbiAgICAgICAgICAgIGF0dHJOYW1lOiBhdHRyTmFtZSxcbiAgICAgICAgICAgIHByZXZWYWx1ZTogcHJldlZhbHVlLFxuICAgICAgICAgICAgbmV3VmFsdWU6IG5ld1ZhbHVlXG4gICAgICAgICAgfTtcbiAgICAgICAgICBlW2FjdGlvbl0gPSBhdHRyQ2hhbmdlO1xuICAgICAgICAgIG9uRE9NQXR0ck1vZGlmaWVkKGUpO1xuICAgICAgICB9O1xuICAgICAgICBnZXRBdHRyaWJ1dGVzTWlycm9yID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICBmb3IgKHZhclxuICAgICAgICAgICAgYXR0ciwgbmFtZSxcbiAgICAgICAgICAgIHJlc3VsdCA9IHt9LFxuICAgICAgICAgICAgYXR0cmlidXRlcyA9IG5vZGUuYXR0cmlidXRlcyxcbiAgICAgICAgICAgIGkgPSAwLCBsZW5ndGggPSBhdHRyaWJ1dGVzLmxlbmd0aDtcbiAgICAgICAgICAgIGkgPCBsZW5ndGg7IGkrK1xuICAgICAgICAgICkge1xuICAgICAgICAgICAgYXR0ciA9IGF0dHJpYnV0ZXNbaV07XG4gICAgICAgICAgICBuYW1lID0gYXR0ci5uYW1lO1xuICAgICAgICAgICAgaWYgKG5hbWUgIT09ICdzZXRBdHRyaWJ1dGUnKSB7XG4gICAgICAgICAgICAgIHJlc3VsdFtuYW1lXSA9IGF0dHIudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICBcbiAgICAvLyBzZXQgYXMgZW51bWVyYWJsZSwgd3JpdGFibGUgYW5kIGNvbmZpZ3VyYWJsZVxuICAgIGRvY3VtZW50W1JFR0lTVEVSX0VMRU1FTlRdID0gZnVuY3Rpb24gcmVnaXN0ZXJFbGVtZW50KHR5cGUsIG9wdGlvbnMpIHtcbiAgICAgIHVwcGVyVHlwZSA9IHR5cGUudG9VcHBlckNhc2UoKTtcbiAgICAgIGlmIChzZXRMaXN0ZW5lcikge1xuICAgICAgICAvLyBvbmx5IGZpcnN0IHRpbWUgZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50IGlzIHVzZWRcbiAgICAgICAgLy8gd2UgbmVlZCB0byBzZXQgdGhpcyBsaXN0ZW5lclxuICAgICAgICAvLyBzZXR0aW5nIGl0IGJ5IGRlZmF1bHQgbWlnaHQgc2xvdyBkb3duIGZvciBubyByZWFzb25cbiAgICAgICAgc2V0TGlzdGVuZXIgPSBmYWxzZTtcbiAgICAgICAgaWYgKE11dGF0aW9uT2JzZXJ2ZXIpIHtcbiAgICAgICAgICBvYnNlcnZlciA9IChmdW5jdGlvbihhdHRhY2hlZCwgZGV0YWNoZWQpe1xuICAgICAgICAgICAgZnVuY3Rpb24gY2hlY2tFbUFsbChsaXN0LCBjYWxsYmFjaykge1xuICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gbGlzdC5sZW5ndGg7IGkgPCBsZW5ndGg7IGNhbGxiYWNrKGxpc3RbaSsrXSkpe31cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbiAocmVjb3Jkcykge1xuICAgICAgICAgICAgICBmb3IgKHZhclxuICAgICAgICAgICAgICAgIGN1cnJlbnQsIG5vZGUsIG5ld1ZhbHVlLFxuICAgICAgICAgICAgICAgIGkgPSAwLCBsZW5ndGggPSByZWNvcmRzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSByZWNvcmRzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50LnR5cGUgPT09ICdjaGlsZExpc3QnKSB7XG4gICAgICAgICAgICAgICAgICBjaGVja0VtQWxsKGN1cnJlbnQuYWRkZWROb2RlcywgYXR0YWNoZWQpO1xuICAgICAgICAgICAgICAgICAgY2hlY2tFbUFsbChjdXJyZW50LnJlbW92ZWROb2RlcywgZGV0YWNoZWQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBub2RlID0gY3VycmVudC50YXJnZXQ7XG4gICAgICAgICAgICAgICAgICBpZiAobm90RnJvbUlubmVySFRNTEhlbHBlciAmJlxuICAgICAgICAgICAgICAgICAgICAgIG5vZGVbQVRUUklCVVRFX0NIQU5HRURfQ0FMTEJBQ0tdICYmXG4gICAgICAgICAgICAgICAgICAgICAgY3VycmVudC5hdHRyaWJ1dGVOYW1lICE9PSAnc3R5bGUnKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlID0gZ2V0QXR0cmlidXRlLmNhbGwobm9kZSwgY3VycmVudC5hdHRyaWJ1dGVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlICE9PSBjdXJyZW50Lm9sZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgbm9kZVtBVFRSSUJVVEVfQ0hBTkdFRF9DQUxMQkFDS10oXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50LmF0dHJpYnV0ZU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Lm9sZFZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KGV4ZWN1dGVBY3Rpb24oQVRUQUNIRUQpLCBleGVjdXRlQWN0aW9uKERFVEFDSEVEKSkpO1xuICAgICAgICAgIG9ic2VydmUgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShcbiAgICAgICAgICAgICAgbm9kZSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzdWJ0cmVlOiB0cnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIG9ic2VydmUoZG9jdW1lbnQpO1xuICAgICAgICAgIGlmIChhdHRhY2hTaGFkb3cpIHtcbiAgICAgICAgICAgIEhUTUxFbGVtZW50UHJvdG90eXBlLmF0dGFjaFNoYWRvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG9ic2VydmUoYXR0YWNoU2hhZG93LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXNhcFF1ZXVlID0gW107XG4gICAgICAgICAgZG9jdW1lbnRbQUREX0VWRU5UX0xJU1RFTkVSXSgnRE9NTm9kZUluc2VydGVkJywgb25ET01Ob2RlKEFUVEFDSEVEKSk7XG4gICAgICAgICAgZG9jdW1lbnRbQUREX0VWRU5UX0xJU1RFTkVSXSgnRE9NTm9kZVJlbW92ZWQnLCBvbkRPTU5vZGUoREVUQUNIRUQpKTtcbiAgICAgICAgfVxuICBcbiAgICAgICAgZG9jdW1lbnRbQUREX0VWRU5UX0xJU1RFTkVSXShET01fQ09OVEVOVF9MT0FERUQsIG9uUmVhZHlTdGF0ZUNoYW5nZSk7XG4gICAgICAgIGRvY3VtZW50W0FERF9FVkVOVF9MSVNURU5FUl0oJ3JlYWR5c3RhdGVjaGFuZ2UnLCBvblJlYWR5U3RhdGVDaGFuZ2UpO1xuICBcbiAgICAgICAgSFRNTEVsZW1lbnRQcm90b3R5cGUuY2xvbmVOb2RlID0gZnVuY3Rpb24gKGRlZXApIHtcbiAgICAgICAgICB2YXJcbiAgICAgICAgICAgIG5vZGUgPSBjbG9uZU5vZGUuY2FsbCh0aGlzLCAhIWRlZXApLFxuICAgICAgICAgICAgaSA9IGdldFR5cGVJbmRleChub2RlKVxuICAgICAgICAgIDtcbiAgICAgICAgICBpZiAoLTEgPCBpKSBwYXRjaChub2RlLCBwcm90b3NbaV0pO1xuICAgICAgICAgIGlmIChkZWVwICYmIHF1ZXJ5Lmxlbmd0aCkgbG9vcEFuZFNldHVwKG5vZGUucXVlcnlTZWxlY3RvckFsbChxdWVyeSkpO1xuICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgfVxuICBcbiAgICAgIGlmIChqdXN0U2V0dXApIHJldHVybiAoanVzdFNldHVwID0gZmFsc2UpO1xuICBcbiAgICAgIGlmICgtMiA8IChcbiAgICAgICAgaW5kZXhPZi5jYWxsKHR5cGVzLCBQUkVGSVhfSVMgKyB1cHBlclR5cGUpICtcbiAgICAgICAgaW5kZXhPZi5jYWxsKHR5cGVzLCBQUkVGSVhfVEFHICsgdXBwZXJUeXBlKVxuICAgICAgKSkge1xuICAgICAgICB0aHJvd1R5cGVFcnJvcih0eXBlKTtcbiAgICAgIH1cbiAgXG4gICAgICBpZiAoIXZhbGlkTmFtZS50ZXN0KHVwcGVyVHlwZSkgfHwgLTEgPCBpbmRleE9mLmNhbGwoaW52YWxpZE5hbWVzLCB1cHBlclR5cGUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHR5cGUgJyArIHR5cGUgKyAnIGlzIGludmFsaWQnKTtcbiAgICAgIH1cbiAgXG4gICAgICB2YXJcbiAgICAgICAgY29uc3RydWN0b3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIGV4dGVuZGluZyA/XG4gICAgICAgICAgICBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5vZGVOYW1lLCB1cHBlclR5cGUpIDpcbiAgICAgICAgICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobm9kZU5hbWUpO1xuICAgICAgICB9LFxuICAgICAgICBvcHQgPSBvcHRpb25zIHx8IE9QLFxuICAgICAgICBleHRlbmRpbmcgPSBoT1AuY2FsbChvcHQsIEVYVEVORFMpLFxuICAgICAgICBub2RlTmFtZSA9IGV4dGVuZGluZyA/IG9wdGlvbnNbRVhURU5EU10udG9VcHBlckNhc2UoKSA6IHVwcGVyVHlwZSxcbiAgICAgICAgdXBwZXJUeXBlLFxuICAgICAgICBpXG4gICAgICA7XG4gIFxuICAgICAgaWYgKGV4dGVuZGluZyAmJiAtMSA8IChcbiAgICAgICAgaW5kZXhPZi5jYWxsKHR5cGVzLCBQUkVGSVhfVEFHICsgbm9kZU5hbWUpXG4gICAgICApKSB7XG4gICAgICAgIHRocm93VHlwZUVycm9yKG5vZGVOYW1lKTtcbiAgICAgIH1cbiAgXG4gICAgICBpID0gdHlwZXMucHVzaCgoZXh0ZW5kaW5nID8gUFJFRklYX0lTIDogUFJFRklYX1RBRykgKyB1cHBlclR5cGUpIC0gMTtcbiAgXG4gICAgICBxdWVyeSA9IHF1ZXJ5LmNvbmNhdChcbiAgICAgICAgcXVlcnkubGVuZ3RoID8gJywnIDogJycsXG4gICAgICAgIGV4dGVuZGluZyA/IG5vZGVOYW1lICsgJ1tpcz1cIicgKyB0eXBlLnRvTG93ZXJDYXNlKCkgKyAnXCJdJyA6IG5vZGVOYW1lXG4gICAgICApO1xuICBcbiAgICAgIGNvbnN0cnVjdG9yLnByb3RvdHlwZSA9IChcbiAgICAgICAgcHJvdG9zW2ldID0gaE9QLmNhbGwob3B0LCAncHJvdG90eXBlJykgP1xuICAgICAgICAgIG9wdC5wcm90b3R5cGUgOlxuICAgICAgICAgIGNyZWF0ZShIVE1MRWxlbWVudFByb3RvdHlwZSlcbiAgICAgICk7XG4gIFxuICAgICAgaWYgKHF1ZXJ5Lmxlbmd0aCkgbG9vcEFuZFZlcmlmeShcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChxdWVyeSksXG4gICAgICAgIEFUVEFDSEVEXG4gICAgICApO1xuICBcbiAgICAgIHJldHVybiBjb25zdHJ1Y3RvcjtcbiAgICB9O1xuICBcbiAgICBkb2N1bWVudC5jcmVhdGVFbGVtZW50ID0gKHBhdGNoZWRDcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24gKGxvY2FsTmFtZSwgdHlwZUV4dGVuc2lvbikge1xuICAgICAgdmFyXG4gICAgICAgIGlzID0gZ2V0SXModHlwZUV4dGVuc2lvbiksXG4gICAgICAgIG5vZGUgPSBpcyA/XG4gICAgICAgICAgY3JlYXRlRWxlbWVudC5jYWxsKGRvY3VtZW50LCBsb2NhbE5hbWUsIHNlY29uZEFyZ3VtZW50KGlzKSkgOlxuICAgICAgICAgIGNyZWF0ZUVsZW1lbnQuY2FsbChkb2N1bWVudCwgbG9jYWxOYW1lKSxcbiAgICAgICAgbmFtZSA9ICcnICsgbG9jYWxOYW1lLFxuICAgICAgICBpID0gaW5kZXhPZi5jYWxsKFxuICAgICAgICAgIHR5cGVzLFxuICAgICAgICAgIChpcyA/IFBSRUZJWF9JUyA6IFBSRUZJWF9UQUcpICtcbiAgICAgICAgICAoaXMgfHwgbmFtZSkudG9VcHBlckNhc2UoKVxuICAgICAgICApLFxuICAgICAgICBzZXR1cCA9IC0xIDwgaVxuICAgICAgO1xuICAgICAgaWYgKGlzKSB7XG4gICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdpcycsIGlzID0gaXMudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgIGlmIChzZXR1cCkge1xuICAgICAgICAgIHNldHVwID0gaXNJblFTQShuYW1lLnRvVXBwZXJDYXNlKCksIGlzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbm90RnJvbUlubmVySFRNTEhlbHBlciA9ICFkb2N1bWVudC5jcmVhdGVFbGVtZW50LmlubmVySFRNTEhlbHBlcjtcbiAgICAgIGlmIChzZXR1cCkgcGF0Y2gobm9kZSwgcHJvdG9zW2ldKTtcbiAgICAgIHJldHVybiBub2RlO1xuICAgIH0pO1xuICBcbiAgfVxuICBcbiAgZnVuY3Rpb24gQVNBUCgpIHtcbiAgICB2YXIgcXVldWUgPSBhc2FwUXVldWUuc3BsaWNlKDAsIGFzYXBRdWV1ZS5sZW5ndGgpO1xuICAgIGFzYXBUaW1lciA9IDA7XG4gICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgcXVldWUuc2hpZnQoKS5jYWxsKFxuICAgICAgICBudWxsLCBxdWV1ZS5zaGlmdCgpXG4gICAgICApO1xuICAgIH1cbiAgfVxuICBcbiAgZnVuY3Rpb24gbG9vcEFuZFZlcmlmeShsaXN0LCBhY3Rpb24pIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gbGlzdC5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmVyaWZ5QW5kU2V0dXBBbmRBY3Rpb24obGlzdFtpXSwgYWN0aW9uKTtcbiAgICB9XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIGxvb3BBbmRTZXR1cChsaXN0KSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGxpc3QubGVuZ3RoLCBub2RlOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIG5vZGUgPSBsaXN0W2ldO1xuICAgICAgcGF0Y2gobm9kZSwgcHJvdG9zW2dldFR5cGVJbmRleChub2RlKV0pO1xuICAgIH1cbiAgfVxuICBcbiAgZnVuY3Rpb24gZXhlY3V0ZUFjdGlvbihhY3Rpb24pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgIGlmIChpc1ZhbGlkTm9kZShub2RlKSkge1xuICAgICAgICB2ZXJpZnlBbmRTZXR1cEFuZEFjdGlvbihub2RlLCBhY3Rpb24pO1xuICAgICAgICBpZiAocXVlcnkubGVuZ3RoKSBsb29wQW5kVmVyaWZ5KFxuICAgICAgICAgIG5vZGUucXVlcnlTZWxlY3RvckFsbChxdWVyeSksXG4gICAgICAgICAgYWN0aW9uXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBcbiAgZnVuY3Rpb24gZ2V0VHlwZUluZGV4KHRhcmdldCkge1xuICAgIHZhclxuICAgICAgaXMgPSBnZXRBdHRyaWJ1dGUuY2FsbCh0YXJnZXQsICdpcycpLFxuICAgICAgbm9kZU5hbWUgPSB0YXJnZXQubm9kZU5hbWUudG9VcHBlckNhc2UoKSxcbiAgICAgIGkgPSBpbmRleE9mLmNhbGwoXG4gICAgICAgIHR5cGVzLFxuICAgICAgICBpcyA/XG4gICAgICAgICAgICBQUkVGSVhfSVMgKyBpcy50b1VwcGVyQ2FzZSgpIDpcbiAgICAgICAgICAgIFBSRUZJWF9UQUcgKyBub2RlTmFtZVxuICAgICAgKVxuICAgIDtcbiAgICByZXR1cm4gaXMgJiYgLTEgPCBpICYmICFpc0luUVNBKG5vZGVOYW1lLCBpcykgPyAtMSA6IGk7XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIGlzSW5RU0EobmFtZSwgdHlwZSkge1xuICAgIHJldHVybiAtMSA8IHF1ZXJ5LmluZGV4T2YobmFtZSArICdbaXM9XCInICsgdHlwZSArICdcIl0nKTtcbiAgfVxuICBcbiAgZnVuY3Rpb24gb25ET01BdHRyTW9kaWZpZWQoZSkge1xuICAgIHZhclxuICAgICAgbm9kZSA9IGUuY3VycmVudFRhcmdldCxcbiAgICAgIGF0dHJDaGFuZ2UgPSBlLmF0dHJDaGFuZ2UsXG4gICAgICBhdHRyTmFtZSA9IGUuYXR0ck5hbWUsXG4gICAgICB0YXJnZXQgPSBlLnRhcmdldCxcbiAgICAgIGFkZGl0aW9uID0gZVtBRERJVElPTl0gfHwgMixcbiAgICAgIHJlbW92YWwgPSBlW1JFTU9WQUxdIHx8IDNcbiAgICA7XG4gICAgaWYgKG5vdEZyb21Jbm5lckhUTUxIZWxwZXIgJiZcbiAgICAgICAgKCF0YXJnZXQgfHwgdGFyZ2V0ID09PSBub2RlKSAmJlxuICAgICAgICBub2RlW0FUVFJJQlVURV9DSEFOR0VEX0NBTExCQUNLXSAmJlxuICAgICAgICBhdHRyTmFtZSAhPT0gJ3N0eWxlJyAmJiAoXG4gICAgICAgICAgZS5wcmV2VmFsdWUgIT09IGUubmV3VmFsdWUgfHxcbiAgICAgICAgICAvLyBJRTksIElFMTAsIGFuZCBPcGVyYSAxMiBnb3RjaGFcbiAgICAgICAgICBlLm5ld1ZhbHVlID09PSAnJyAmJiAoXG4gICAgICAgICAgICBhdHRyQ2hhbmdlID09PSBhZGRpdGlvbiB8fFxuICAgICAgICAgICAgYXR0ckNoYW5nZSA9PT0gcmVtb3ZhbFxuICAgICAgICAgIClcbiAgICApKSB7XG4gICAgICBub2RlW0FUVFJJQlVURV9DSEFOR0VEX0NBTExCQUNLXShcbiAgICAgICAgYXR0ck5hbWUsXG4gICAgICAgIGF0dHJDaGFuZ2UgPT09IGFkZGl0aW9uID8gbnVsbCA6IGUucHJldlZhbHVlLFxuICAgICAgICBhdHRyQ2hhbmdlID09PSByZW1vdmFsID8gbnVsbCA6IGUubmV3VmFsdWVcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIFxuICBmdW5jdGlvbiBvbkRPTU5vZGUoYWN0aW9uKSB7XG4gICAgdmFyIGV4ZWN1dG9yID0gZXhlY3V0ZUFjdGlvbihhY3Rpb24pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZSkge1xuICAgICAgYXNhcFF1ZXVlLnB1c2goZXhlY3V0b3IsIGUudGFyZ2V0KTtcbiAgICAgIGlmIChhc2FwVGltZXIpIGNsZWFyVGltZW91dChhc2FwVGltZXIpO1xuICAgICAgYXNhcFRpbWVyID0gc2V0VGltZW91dChBU0FQLCAxKTtcbiAgICB9O1xuICB9XG4gIFxuICBmdW5jdGlvbiBvblJlYWR5U3RhdGVDaGFuZ2UoZSkge1xuICAgIGlmIChkcm9wRG9tQ29udGVudExvYWRlZCkge1xuICAgICAgZHJvcERvbUNvbnRlbnRMb2FkZWQgPSBmYWxzZTtcbiAgICAgIGUuY3VycmVudFRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKERPTV9DT05URU5UX0xPQURFRCwgb25SZWFkeVN0YXRlQ2hhbmdlKTtcbiAgICB9XG4gICAgaWYgKHF1ZXJ5Lmxlbmd0aCkgbG9vcEFuZFZlcmlmeShcbiAgICAgIChlLnRhcmdldCB8fCBkb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbChxdWVyeSksXG4gICAgICBlLmRldGFpbCA9PT0gREVUQUNIRUQgPyBERVRBQ0hFRCA6IEFUVEFDSEVEXG4gICAgKTtcbiAgICBpZiAoSUU4KSBwdXJnZSgpO1xuICB9XG4gIFxuICBmdW5jdGlvbiBwYXRjaGVkU2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKSB7XG4gICAgLy8ganNoaW50IHZhbGlkdGhpczp0cnVlXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNldEF0dHJpYnV0ZS5jYWxsKHNlbGYsIG5hbWUsIHZhbHVlKTtcbiAgICBvblN1YnRyZWVNb2RpZmllZC5jYWxsKHNlbGYsIHt0YXJnZXQ6IHNlbGZ9KTtcbiAgfVxuICBcbiAgZnVuY3Rpb24gc2V0dXBOb2RlKG5vZGUsIHByb3RvKSB7XG4gICAgc2V0UHJvdG90eXBlKG5vZGUsIHByb3RvKTtcbiAgICBpZiAob2JzZXJ2ZXIpIHtcbiAgICAgIG9ic2VydmVyLm9ic2VydmUobm9kZSwgYXR0cmlidXRlc09ic2VydmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGRvZXNOb3RTdXBwb3J0RE9NQXR0ck1vZGlmaWVkKSB7XG4gICAgICAgIG5vZGUuc2V0QXR0cmlidXRlID0gcGF0Y2hlZFNldEF0dHJpYnV0ZTtcbiAgICAgICAgbm9kZVtFWFBBTkRPX1VJRF0gPSBnZXRBdHRyaWJ1dGVzTWlycm9yKG5vZGUpO1xuICAgICAgICBub2RlW0FERF9FVkVOVF9MSVNURU5FUl0oRE9NX1NVQlRSRUVfTU9ESUZJRUQsIG9uU3VidHJlZU1vZGlmaWVkKTtcbiAgICAgIH1cbiAgICAgIG5vZGVbQUREX0VWRU5UX0xJU1RFTkVSXShET01fQVRUUl9NT0RJRklFRCwgb25ET01BdHRyTW9kaWZpZWQpO1xuICAgIH1cbiAgICBpZiAobm9kZVtDUkVBVEVEX0NBTExCQUNLXSAmJiBub3RGcm9tSW5uZXJIVE1MSGVscGVyKSB7XG4gICAgICBub2RlLmNyZWF0ZWQgPSB0cnVlO1xuICAgICAgbm9kZVtDUkVBVEVEX0NBTExCQUNLXSgpO1xuICAgICAgbm9kZS5jcmVhdGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG4gIFxuICBmdW5jdGlvbiBwdXJnZSgpIHtcbiAgICBmb3IgKHZhclxuICAgICAgbm9kZSxcbiAgICAgIGkgPSAwLFxuICAgICAgbGVuZ3RoID0gdGFyZ2V0cy5sZW5ndGg7XG4gICAgICBpIDwgbGVuZ3RoOyBpKytcbiAgICApIHtcbiAgICAgIG5vZGUgPSB0YXJnZXRzW2ldO1xuICAgICAgaWYgKCFkb2N1bWVudEVsZW1lbnQuY29udGFpbnMobm9kZSkpIHtcbiAgICAgICAgbGVuZ3RoLS07XG4gICAgICAgIHRhcmdldHMuc3BsaWNlKGktLSwgMSk7XG4gICAgICAgIHZlcmlmeUFuZFNldHVwQW5kQWN0aW9uKG5vZGUsIERFVEFDSEVEKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIHRocm93VHlwZUVycm9yKHR5cGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0EgJyArIHR5cGUgKyAnIHR5cGUgaXMgYWxyZWFkeSByZWdpc3RlcmVkJyk7XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIHZlcmlmeUFuZFNldHVwQW5kQWN0aW9uKG5vZGUsIGFjdGlvbikge1xuICAgIHZhclxuICAgICAgZm4sXG4gICAgICBpID0gZ2V0VHlwZUluZGV4KG5vZGUpXG4gICAgO1xuICAgIGlmICgtMSA8IGkpIHtcbiAgICAgIHBhdGNoSWZOb3RBbHJlYWR5KG5vZGUsIHByb3Rvc1tpXSk7XG4gICAgICBpID0gMDtcbiAgICAgIGlmIChhY3Rpb24gPT09IEFUVEFDSEVEICYmICFub2RlW0FUVEFDSEVEXSkge1xuICAgICAgICBub2RlW0RFVEFDSEVEXSA9IGZhbHNlO1xuICAgICAgICBub2RlW0FUVEFDSEVEXSA9IHRydWU7XG4gICAgICAgIGkgPSAxO1xuICAgICAgICBpZiAoSUU4ICYmIGluZGV4T2YuY2FsbCh0YXJnZXRzLCBub2RlKSA8IDApIHtcbiAgICAgICAgICB0YXJnZXRzLnB1c2gobm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSBERVRBQ0hFRCAmJiAhbm9kZVtERVRBQ0hFRF0pIHtcbiAgICAgICAgbm9kZVtBVFRBQ0hFRF0gPSBmYWxzZTtcbiAgICAgICAgbm9kZVtERVRBQ0hFRF0gPSB0cnVlO1xuICAgICAgICBpID0gMTtcbiAgICAgIH1cbiAgICAgIGlmIChpICYmIChmbiA9IG5vZGVbYWN0aW9uICsgQ0FMTEJBQ0tdKSkgZm4uY2FsbChub2RlKTtcbiAgICB9XG4gIH1cbiAgXG4gIFxuICBcbiAgLy8gVjEgaW4gZGEgSG91c2UhXG4gIGZ1bmN0aW9uIEN1c3RvbUVsZW1lbnRSZWdpc3RyeSgpIHt9XG4gIFxuICBDdXN0b21FbGVtZW50UmVnaXN0cnkucHJvdG90eXBlID0ge1xuICAgIGNvbnN0cnVjdG9yOiBDdXN0b21FbGVtZW50UmVnaXN0cnksXG4gICAgLy8gYSB3b3JrYXJvdW5kIGZvciB0aGUgc3R1YmJvcm4gV2ViS2l0XG4gICAgZGVmaW5lOiB1c2FibGVDdXN0b21FbGVtZW50cyA/XG4gICAgICBmdW5jdGlvbiAobmFtZSwgQ2xhc3MsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgICAgICBDRVJEZWZpbmUobmFtZSwgQ2xhc3MsIG9wdGlvbnMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBOQU1FID0gbmFtZS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgIGNvbnN0cnVjdG9yc1tOQU1FXSA9IHtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yOiBDbGFzcyxcbiAgICAgICAgICAgIGNyZWF0ZTogW05BTUVdXG4gICAgICAgICAgfTtcbiAgICAgICAgICBub2RlTmFtZXMuc2V0KENsYXNzLCBOQU1FKTtcbiAgICAgICAgICBjdXN0b21FbGVtZW50cy5kZWZpbmUobmFtZSwgQ2xhc3MpO1xuICAgICAgICB9XG4gICAgICB9IDpcbiAgICAgIENFUkRlZmluZSxcbiAgICBnZXQ6IHVzYWJsZUN1c3RvbUVsZW1lbnRzID9cbiAgICAgIGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHJldHVybiBjdXN0b21FbGVtZW50cy5nZXQobmFtZSkgfHwgZ2V0KG5hbWUpO1xuICAgICAgfSA6XG4gICAgICBnZXQsXG4gICAgd2hlbkRlZmluZWQ6IHVzYWJsZUN1c3RvbUVsZW1lbnRzID9cbiAgICAgIGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJhY2UoW1xuICAgICAgICAgIGN1c3RvbUVsZW1lbnRzLndoZW5EZWZpbmVkKG5hbWUpLFxuICAgICAgICAgIHdoZW5EZWZpbmVkKG5hbWUpXG4gICAgICAgIF0pO1xuICAgICAgfSA6XG4gICAgICB3aGVuRGVmaW5lZFxuICB9O1xuICBcbiAgZnVuY3Rpb24gQ0VSRGVmaW5lKG5hbWUsIENsYXNzLCBvcHRpb25zKSB7XG4gICAgdmFyXG4gICAgICBpcyA9IG9wdGlvbnMgJiYgb3B0aW9uc1tFWFRFTkRTXSB8fCAnJyxcbiAgICAgIENQcm90byA9IENsYXNzLnByb3RvdHlwZSxcbiAgICAgIHByb3RvID0gY3JlYXRlKENQcm90byksXG4gICAgICBhdHRyaWJ1dGVzID0gQ2xhc3Mub2JzZXJ2ZWRBdHRyaWJ1dGVzIHx8IGVtcHR5LFxuICAgICAgZGVmaW5pdGlvbiA9IHtwcm90b3R5cGU6IHByb3RvfVxuICAgIDtcbiAgICAvLyBUT0RPOiBpcyB0aGlzIG5lZWRlZCBhdCBhbGwgc2luY2UgaXQncyBpbmhlcml0ZWQ/XG4gICAgLy8gZGVmaW5lUHJvcGVydHkocHJvdG8sICdjb25zdHJ1Y3RvcicsIHt2YWx1ZTogQ2xhc3N9KTtcbiAgICBzYWZlUHJvcGVydHkocHJvdG8sIENSRUFURURfQ0FMTEJBQ0ssIHtcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoanVzdENyZWF0ZWQpIGp1c3RDcmVhdGVkID0gZmFsc2U7XG4gICAgICAgICAgZWxzZSBpZiAoIXRoaXNbRFJFQ0VWMV0pIHtcbiAgICAgICAgICAgIHRoaXNbRFJFQ0VWMV0gPSB0cnVlO1xuICAgICAgICAgICAgbmV3IENsYXNzKHRoaXMpO1xuICAgICAgICAgICAgaWYgKENQcm90b1tDUkVBVEVEX0NBTExCQUNLXSlcbiAgICAgICAgICAgICAgQ1Byb3RvW0NSRUFURURfQ0FMTEJBQ0tdLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB2YXIgaW5mbyA9IGNvbnN0cnVjdG9yc1tub2RlTmFtZXMuZ2V0KENsYXNzKV07XG4gICAgICAgICAgICBpZiAoIXVzYWJsZUN1c3RvbUVsZW1lbnRzIHx8IGluZm8uY3JlYXRlLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgbm90aWZ5QXR0cmlidXRlcyh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgc2FmZVByb3BlcnR5KHByb3RvLCBBVFRSSUJVVEVfQ0hBTkdFRF9DQUxMQkFDSywge1xuICAgICAgdmFsdWU6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIGlmICgtMSA8IGluZGV4T2YuY2FsbChhdHRyaWJ1dGVzLCBuYW1lKSlcbiAgICAgICAgICBDUHJvdG9bQVRUUklCVVRFX0NIQU5HRURfQ0FMTEJBQ0tdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKENQcm90b1tDT05ORUNURURfQ0FMTEJBQ0tdKSB7XG4gICAgICBzYWZlUHJvcGVydHkocHJvdG8sIEFUVEFDSEVEX0NBTExCQUNLLCB7XG4gICAgICAgIHZhbHVlOiBDUHJvdG9bQ09OTkVDVEVEX0NBTExCQUNLXVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChDUHJvdG9bRElTQ09OTkVDVEVEX0NBTExCQUNLXSkge1xuICAgICAgc2FmZVByb3BlcnR5KHByb3RvLCBERVRBQ0hFRF9DQUxMQkFDSywge1xuICAgICAgICB2YWx1ZTogQ1Byb3RvW0RJU0NPTk5FQ1RFRF9DQUxMQkFDS11cbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoaXMpIGRlZmluaXRpb25bRVhURU5EU10gPSBpcztcbiAgICBuYW1lID0gbmFtZS50b1VwcGVyQ2FzZSgpO1xuICAgIGNvbnN0cnVjdG9yc1tuYW1lXSA9IHtcbiAgICAgIGNvbnN0cnVjdG9yOiBDbGFzcyxcbiAgICAgIGNyZWF0ZTogaXMgPyBbaXMsIHNlY29uZEFyZ3VtZW50KG5hbWUpXSA6IFtuYW1lXVxuICAgIH07XG4gICAgbm9kZU5hbWVzLnNldChDbGFzcywgbmFtZSk7XG4gICAgZG9jdW1lbnRbUkVHSVNURVJfRUxFTUVOVF0obmFtZS50b0xvd2VyQ2FzZSgpLCBkZWZpbml0aW9uKTtcbiAgICB3aGVuRGVmaW5lZChuYW1lKTtcbiAgICB3YWl0aW5nTGlzdFtuYW1lXS5yKCk7XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIGdldChuYW1lKSB7XG4gICAgdmFyIGluZm8gPSBjb25zdHJ1Y3RvcnNbbmFtZS50b1VwcGVyQ2FzZSgpXTtcbiAgICByZXR1cm4gaW5mbyAmJiBpbmZvLmNvbnN0cnVjdG9yO1xuICB9XG4gIFxuICBmdW5jdGlvbiBnZXRJcyhvcHRpb25zKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJyA/XG4gICAgICAgIG9wdGlvbnMgOiAob3B0aW9ucyAmJiBvcHRpb25zLmlzIHx8ICcnKTtcbiAgfVxuICBcbiAgZnVuY3Rpb24gbm90aWZ5QXR0cmlidXRlcyhzZWxmKSB7XG4gICAgdmFyXG4gICAgICBjYWxsYmFjayA9IHNlbGZbQVRUUklCVVRFX0NIQU5HRURfQ0FMTEJBQ0tdLFxuICAgICAgYXR0cmlidXRlcyA9IGNhbGxiYWNrID8gc2VsZi5hdHRyaWJ1dGVzIDogZW1wdHksXG4gICAgICBpID0gYXR0cmlidXRlcy5sZW5ndGgsXG4gICAgICBhdHRyaWJ1dGVcbiAgICA7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgYXR0cmlidXRlID0gIGF0dHJpYnV0ZXNbaV07IC8vIHx8IGF0dHJpYnV0ZXMuaXRlbShpKTtcbiAgICAgIGNhbGxiYWNrLmNhbGwoXG4gICAgICAgIHNlbGYsXG4gICAgICAgIGF0dHJpYnV0ZS5uYW1lIHx8IGF0dHJpYnV0ZS5ub2RlTmFtZSxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgYXR0cmlidXRlLnZhbHVlIHx8IGF0dHJpYnV0ZS5ub2RlVmFsdWVcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIFxuICBmdW5jdGlvbiB3aGVuRGVmaW5lZChuYW1lKSB7XG4gICAgbmFtZSA9IG5hbWUudG9VcHBlckNhc2UoKTtcbiAgICBpZiAoIShuYW1lIGluIHdhaXRpbmdMaXN0KSkge1xuICAgICAgd2FpdGluZ0xpc3RbbmFtZV0gPSB7fTtcbiAgICAgIHdhaXRpbmdMaXN0W25hbWVdLnAgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICB3YWl0aW5nTGlzdFtuYW1lXS5yID0gcmVzb2x2ZTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gd2FpdGluZ0xpc3RbbmFtZV0ucDtcbiAgfVxuICBcbiAgZnVuY3Rpb24gcG9seWZpbGxWMSgpIHtcbiAgICBpZiAoY3VzdG9tRWxlbWVudHMpIGRlbGV0ZSB3aW5kb3cuY3VzdG9tRWxlbWVudHM7XG4gICAgZGVmaW5lUHJvcGVydHkod2luZG93LCAnY3VzdG9tRWxlbWVudHMnLCB7XG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogbmV3IEN1c3RvbUVsZW1lbnRSZWdpc3RyeSgpXG4gICAgfSk7XG4gICAgZGVmaW5lUHJvcGVydHkod2luZG93LCAnQ3VzdG9tRWxlbWVudFJlZ2lzdHJ5Jywge1xuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IEN1c3RvbUVsZW1lbnRSZWdpc3RyeVxuICAgIH0pO1xuICAgIGZvciAodmFyXG4gICAgICBwYXRjaENsYXNzID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgdmFyIENsYXNzID0gd2luZG93W25hbWVdO1xuICAgICAgICBpZiAoQ2xhc3MpIHtcbiAgICAgICAgICB3aW5kb3dbbmFtZV0gPSBmdW5jdGlvbiBDdXN0b21FbGVtZW50c1YxKHNlbGYpIHtcbiAgICAgICAgICAgIHZhciBpbmZvLCBpc05hdGl2ZTtcbiAgICAgICAgICAgIGlmICghc2VsZikgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoIXNlbGZbRFJFQ0VWMV0pIHtcbiAgICAgICAgICAgICAganVzdENyZWF0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICBpbmZvID0gY29uc3RydWN0b3JzW25vZGVOYW1lcy5nZXQoc2VsZi5jb25zdHJ1Y3RvcildO1xuICAgICAgICAgICAgICBpc05hdGl2ZSA9IHVzYWJsZUN1c3RvbUVsZW1lbnRzICYmIGluZm8uY3JlYXRlLmxlbmd0aCA9PT0gMTtcbiAgICAgICAgICAgICAgc2VsZiA9IGlzTmF0aXZlID9cbiAgICAgICAgICAgICAgICBSZWZsZWN0LmNvbnN0cnVjdChDbGFzcywgZW1wdHksIGluZm8uY29uc3RydWN0b3IpIDpcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5jcmVhdGVFbGVtZW50LmFwcGx5KGRvY3VtZW50LCBpbmZvLmNyZWF0ZSk7XG4gICAgICAgICAgICAgIHNlbGZbRFJFQ0VWMV0gPSB0cnVlO1xuICAgICAgICAgICAgICBqdXN0Q3JlYXRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICBpZiAoIWlzTmF0aXZlKSBub3RpZnlBdHRyaWJ1dGVzKHNlbGYpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICAgICAgfTtcbiAgICAgICAgICB3aW5kb3dbbmFtZV0ucHJvdG90eXBlID0gQ2xhc3MucHJvdG90eXBlO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSB3aW5kb3dbbmFtZV07XG4gICAgICAgICAgfSBjYXRjaChXZWJLaXQpIHtcbiAgICAgICAgICAgIGZpeEdldENsYXNzID0gdHJ1ZTtcbiAgICAgICAgICAgIGRlZmluZVByb3BlcnR5KENsYXNzLCBEUkVDRVYxLCB7dmFsdWU6IHdpbmRvd1tuYW1lXX0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIENsYXNzZXMgPSBodG1sQ2xhc3MuZ2V0KC9eSFRNTFtBLVpdKlthLXpdLyksXG4gICAgICBpID0gQ2xhc3Nlcy5sZW5ndGg7XG4gICAgICBpLS07XG4gICAgICBwYXRjaENsYXNzKENsYXNzZXNbaV0pXG4gICAgKSB7fVxuICAgIChkb2N1bWVudC5jcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24gKG5hbWUsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBpcyA9IGdldElzKG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIGlzID9cbiAgICAgICAgcGF0Y2hlZENyZWF0ZUVsZW1lbnQuY2FsbCh0aGlzLCBuYW1lLCBzZWNvbmRBcmd1bWVudChpcykpIDpcbiAgICAgICAgcGF0Y2hlZENyZWF0ZUVsZW1lbnQuY2FsbCh0aGlzLCBuYW1lKTtcbiAgICB9KTtcbiAgICBpZiAoIVYwKSB7XG4gICAgICBqdXN0U2V0dXAgPSB0cnVlO1xuICAgICAgZG9jdW1lbnRbUkVHSVNURVJfRUxFTUVOVF0oJycpO1xuICAgIH1cbiAgfVxuICBcbiAgLy8gaWYgY3VzdG9tRWxlbWVudHMgaXMgbm90IHRoZXJlIGF0IGFsbFxuICBpZiAoIWN1c3RvbUVsZW1lbnRzIHx8IHBvbHlmaWxsID09PSAnZm9yY2UnKSBwb2x5ZmlsbFYxKCk7XG4gIGVsc2Uge1xuICAgIC8vIGlmIGF2YWlsYWJsZSB0ZXN0IGV4dGVuZHMgd29yayBhcyBleHBlY3RlZFxuICAgIHRyeSB7XG4gICAgICAoZnVuY3Rpb24gKERSRSwgb3B0aW9ucywgbmFtZSkge1xuICAgICAgICBvcHRpb25zW0VYVEVORFNdID0gJ2EnO1xuICAgICAgICBEUkUucHJvdG90eXBlID0gY3JlYXRlKEhUTUxBbmNob3JFbGVtZW50LnByb3RvdHlwZSk7XG4gICAgICAgIERSRS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBEUkU7XG4gICAgICAgIHdpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUobmFtZSwgRFJFLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGdldEF0dHJpYnV0ZS5jYWxsKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnLCB7aXM6IG5hbWV9KSwgJ2lzJykgIT09IG5hbWUgfHxcbiAgICAgICAgICAodXNhYmxlQ3VzdG9tRWxlbWVudHMgJiYgZ2V0QXR0cmlidXRlLmNhbGwobmV3IERSRSgpLCAnaXMnKSAhPT0gbmFtZSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhyb3cgb3B0aW9ucztcbiAgICAgICAgfVxuICAgICAgfShcbiAgICAgICAgZnVuY3Rpb24gRFJFKCkge1xuICAgICAgICAgIHJldHVybiBSZWZsZWN0LmNvbnN0cnVjdChIVE1MQW5jaG9yRWxlbWVudCwgW10sIERSRSk7XG4gICAgICAgIH0sXG4gICAgICAgIHt9LFxuICAgICAgICAnZG9jdW1lbnQtcmVnaXN0ZXItZWxlbWVudC1hJ1xuICAgICAgKSk7XG4gICAgfSBjYXRjaChvX08pIHtcbiAgICAgIC8vIG9yIGZvcmNlIHRoZSBwb2x5ZmlsbCBpZiBub3RcbiAgICAgIC8vIGFuZCBrZWVwIGludGVybmFsIG9yaWdpbmFsIHJlZmVyZW5jZVxuICAgICAgcG9seWZpbGxWMSgpO1xuICAgIH1cbiAgfVxuICBcbiAgdHJ5IHtcbiAgICBjcmVhdGVFbGVtZW50LmNhbGwoZG9jdW1lbnQsICdhJywgJ2EnKTtcbiAgfSBjYXRjaChGaXJlRm94KSB7XG4gICAgc2Vjb25kQXJndW1lbnQgPSBmdW5jdGlvbiAoaXMpIHtcbiAgICAgIHJldHVybiB7aXM6IGlzLnRvTG93ZXJDYXNlKCl9O1xuICAgIH07XG4gIH1cbiAgXG59XG5cbmV4cG9ydHMuaW5zdGFsbEN1c3RvbUVsZW1lbnRzID0gaW5zdGFsbEN1c3RvbUVsZW1lbnRzO1xuXG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQ29uc3RydWN0cyBhIEVTNi9Qcm9taXNlcyBBKyBQcm9taXNlIGluc3RhbmNlLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtmdW5jdGlvbihmdW5jdGlvbigqPSksIGZ1bmN0aW9uICgqPSkpfSByZXNvbHZlclxuICovXG5mdW5jdGlvbiBQcm9taXNlKHJlc29sdmVyKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBQcm9taXNlKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0NvbnN0cnVjdG9yIFByb21pc2UgcmVxdWlyZXMgYG5ld2AnKTtcbiAgfVxuICBpZiAoIWlzRnVuY3Rpb24ocmVzb2x2ZXIpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignTXVzdCBwYXNzIHJlc29sdmVyIGZ1bmN0aW9uJyk7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge2Z1bmN0aW9uKHRoaXM6UHJvbWlzZSwqPSxmdW5jdGlvbigqPSksZnVuY3Rpb24oKj0pLERlZmVycmVkKTohUHJvbWlzZX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuX3N0YXRlID0gUGVuZGluZ1Byb21pc2U7XG5cbiAgLyoqXG4gICAqIEB0eXBlIHsqfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5fdmFsdWUgPSBbXTtcblxuICAvKipcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLl9pc0NoYWluRW5kID0gdHJ1ZTtcblxuICBkb1Jlc29sdmUoXG4gICAgdGhpcyxcbiAgICBhZG9wdGVyKHRoaXMsIEZ1bGZpbGxlZFByb21pc2UpLFxuICAgIGFkb3B0ZXIodGhpcywgUmVqZWN0ZWRQcm9taXNlKSxcbiAgICB7IHRoZW46IHJlc29sdmVyIH1cbiAgKTtcbn1cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgUHVibGljIEluc3RhbmNlIE1ldGhvZHNcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgcHJvbWlzZSBpbnN0YW5jZSB0aGF0IHdpbGwgcmVjZWl2ZSB0aGUgcmVzdWx0IG9mIHRoaXMgcHJvbWlzZVxuICogYXMgaW5wdXRzIHRvIHRoZSBvbkZ1bGZpbGxlZCBvciBvblJlamVjdGVkIGNhbGxiYWNrcy5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCopfSBvbkZ1bGZpbGxlZFxuICogQHBhcmFtIHtmdW5jdGlvbigqKX0gb25SZWplY3RlZFxuICovXG5Qcm9taXNlLnByb3RvdHlwZS50aGVuID0gZnVuY3Rpb24ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcbiAgb25GdWxmaWxsZWQgPSBpc0Z1bmN0aW9uKG9uRnVsZmlsbGVkKSA/IG9uRnVsZmlsbGVkIDogdm9pZCAwO1xuICBvblJlamVjdGVkID0gaXNGdW5jdGlvbihvblJlamVjdGVkKSA/IG9uUmVqZWN0ZWQgOiB2b2lkIDA7XG5cbiAgaWYgKG9uRnVsZmlsbGVkIHx8IG9uUmVqZWN0ZWQpIHtcbiAgICB0aGlzLl9pc0NoYWluRW5kID0gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gdGhpcy5fc3RhdGUoXG4gICAgdGhpcy5fdmFsdWUsXG4gICAgb25GdWxmaWxsZWQsXG4gICAgb25SZWplY3RlZFxuICApO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHByb21pc2UgdGhhdCB3aWxsIGhhbmRsZSB0aGUgcmVqZWN0ZWQgc3RhdGUgb2YgdGhpcyBwcm9taXNlLlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKil9IG9uUmVqZWN0ZWRcbiAqIEByZXR1cm5zIHshUHJvbWlzZX1cbiAqL1xuUHJvbWlzZS5wcm90b3R5cGUuY2F0Y2ggPSBmdW5jdGlvbihvblJlamVjdGVkKSB7XG4gIHJldHVybiB0aGlzLnRoZW4odm9pZCAwLCBvblJlamVjdGVkKTtcbn07XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gIFB1YmxpYyBTdGF0aWMgTWV0aG9kc1xuICoqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bGZpbGxlZCBQcm9taXNlIG9mIHZhbHVlLiBJZiB2YWx1ZSBpcyBpdHNlbGYgYSB0aGVuLWFibGUsXG4gKiByZXNvbHZlcyB3aXRoIHRoZSB0aGVuLWFibGUncyB2YWx1ZS5cbiAqXG4gKiBAdGhpcyB7IVByb21pc2V9XG4gKiBAcGFyYW0geyo9fSB2YWx1ZVxuICogQHJldHVybnMgeyFQcm9taXNlfVxuICovXG5Qcm9taXNlLnJlc29sdmUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuICB2YXIgcHJvbWlzZTtcblxuICBpZiAoaXNPYmplY3QodmFsdWUpICYmIHZhbHVlIGluc3RhbmNlb2YgdGhpcykge1xuICAgIHByb21pc2UgPSB2YWx1ZTtcbiAgfSBlbHNlIHtcbiAgICBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uKHJlc29sdmUpIHtcbiAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2V9ICovKHByb21pc2UpO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgcmVqZWN0ZWQgUHJvbWlzZSBvZiByZWFzb24uXG4gKlxuICogQHRoaXMgeyFQcm9taXNlfVxuICogQHBhcmFtIHsqPX0gcmVhc29uXG4gKiBAcmV0dXJucyB7IVByb21pc2V9XG4gKi9cblByb21pc2UucmVqZWN0ID0gZnVuY3Rpb24ocmVhc29uKSB7XG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG4gIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uKF8sIHJlamVjdCkge1xuICAgIHJlamVjdChyZWFzb24pO1xuICB9KTtcblxuICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZX0gKi8ocHJvbWlzZSk7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBQcm9taXNlIHRoYXQgd2lsbCByZXNvbHZlIHdpdGggYW4gYXJyYXkgb2YgdGhlIHZhbHVlcyBvZiB0aGVcbiAqIHBhc3NlZCBpbiBwcm9taXNlcy4gSWYgYW55IHByb21pc2UgcmVqZWN0cywgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbFxuICogcmVqZWN0LlxuICpcbiAqIEB0aGlzIHshUHJvbWlzZX1cbiAqIEBwYXJhbSB7IUFycmF5PFByb21pc2V8Kj59IHByb21pc2VzXG4gKiBAcmV0dXJucyB7IVByb21pc2V9XG4gKi9cblByb21pc2UuYWxsID0gZnVuY3Rpb24ocHJvbWlzZXMpIHtcbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcbiAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFyIGxlbmd0aCA9IHByb21pc2VzLmxlbmd0aDtcbiAgICB2YXIgdmFsdWVzID0gbmV3IEFycmF5KGxlbmd0aCk7XG5cbiAgICBpZiAobGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZSh2YWx1ZXMpO1xuICAgIH1cblxuICAgIGVhY2gocHJvbWlzZXMsIGZ1bmN0aW9uKHByb21pc2UsIGluZGV4KSB7XG4gICAgICBDb25zdHJ1Y3Rvci5yZXNvbHZlKHByb21pc2UpLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgdmFsdWVzW2luZGV4XSA9IHZhbHVlO1xuICAgICAgICBpZiAoLS1sZW5ndGggPT09IDApIHtcbiAgICAgICAgICByZXNvbHZlKHZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgIH0sIHJlamVjdCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlfSAqLyhwcm9taXNlKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIFByb21pc2UgdGhhdCB3aWxsIHJlc29sdmUgb3IgcmVqZWN0IGJhc2VkIG9uIHRoZSBmaXJzdFxuICogcmVzb2x2ZWQgb3IgcmVqZWN0ZWQgcHJvbWlzZS5cbiAqXG4gKiBAdGhpcyB7IVByb21pc2V9XG4gKiBAcGFyYW0geyFBcnJheTxQcm9taXNlfCo+fSBwcm9taXNlc1xuICogQHJldHVybnMgeyFQcm9taXNlfVxuICovXG5Qcm9taXNlLnJhY2UgPSBmdW5jdGlvbihwcm9taXNlcykge1xuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb21pc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBDb25zdHJ1Y3Rvci5yZXNvbHZlKHByb21pc2VzW2ldKS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZX0gKi8ocHJvbWlzZSk7XG59O1xuXG52YXIgb25Qb3NzaWJseVVuaGFuZGxlZFJlamVjdGlvbiA9IGZ1bmN0aW9uKHJlYXNvbiwgcHJvbWlzZSkge1xuICB0aHJvdyByZWFzb247XG59O1xuXG4vKipcbiAqIEFuIGludGVybmFsIHVzZSBzdGF0aWMgZnVuY3Rpb24uXG4gKi9cblByb21pc2UuX292ZXJyaWRlVW5oYW5kbGVkRXhjZXB0aW9uSGFuZGxlciA9IGZ1bmN0aW9uKGhhbmRsZXIpIHtcbiAgb25Qb3NzaWJseVVuaGFuZGxlZFJlamVjdGlvbiA9IGhhbmRsZXI7XG59O1xuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICBQcml2YXRlIGZ1bmN0aW9uc1xuICoqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbi8qKlxuICogVGhlIEZ1bGZpbGxlZCBQcm9taXNlIHN0YXRlLiBDYWxscyBvbkZ1bGZpbGxlZCB3aXRoIHRoZSByZXNvbHZlZCB2YWx1ZSBvZlxuICogdGhpcyBwcm9taXNlLCBjcmVhdGluZyBhIG5ldyBwcm9taXNlLlxuICpcbiAqIElmIHRoZXJlIGlzIG5vIG9uRnVsZmlsbGVkLCByZXR1cm5zIHRoZSBjdXJyZW50IHByb21pc2UgdG8gYXZvaWQgYW4gcHJvbWlzZVxuICogaW5zdGFuY2UuXG4gKlxuICogQHRoaXMgeyFQcm9taXNlfSBUaGUgY3VycmVudCBwcm9taXNlXG4gKiBAcGFyYW0geyo9fSB2YWx1ZSBUaGUgY3VycmVudCBwcm9taXNlJ3MgcmVzb2x2ZWQgdmFsdWUuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCo9KT19IG9uRnVsZmlsbGVkXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCo9KT19IHVudXNlZFxuICogQHBhcmFtIHtEZWZlcnJlZH0gZGVmZXJyZWQgQSBkZWZlcnJlZCBvYmplY3QgdGhhdCBob2xkcyBhIHByb21pc2UgYW5kIGl0c1xuICogICAgIHJlc29sdmUgYW5kIHJlamVjdCBmdW5jdGlvbnMuIEl0IElTIE5PVCBwYXNzZWQgd2hlbiBjYWxsZWQgZnJvbVxuICogICAgIFByb21pc2UjdGhlbiB0byBzYXZlIGFuIG9iamVjdCBpbnN0YW5jZSAoc2luY2Ugd2UgbWF5IHJldHVybiB0aGUgY3VycmVudFxuICogICAgIHByb21pc2UpLiBJdCBJUyBwYXNzZWQgaW4gd2hlbiBhZG9wdGluZyB0aGUgRnVsZmlsbGVkIHN0YXRlIGZyb20gdGhlXG4gKiAgICAgUGVuZGluZyBzdGF0ZS5cbiAqIEByZXR1cm5zIHshUHJvbWlzZX1cbiAqL1xuZnVuY3Rpb24gRnVsZmlsbGVkUHJvbWlzZSh2YWx1ZSwgb25GdWxmaWxsZWQsIHVudXNlZCwgZGVmZXJyZWQpIHtcbiAgaWYgKCFvbkZ1bGZpbGxlZCkge1xuICAgIGRlZmVycmVkQWRvcHQoZGVmZXJyZWQsIEZ1bGZpbGxlZFByb21pc2UsIHZhbHVlKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBpZiAoIWRlZmVycmVkKSB7XG4gICAgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQodGhpcy5jb25zdHJ1Y3Rvcik7XG4gIH1cbiAgZGVmZXIodHJ5Q2F0Y2hEZWZlcnJlZChkZWZlcnJlZCwgb25GdWxmaWxsZWQsIHZhbHVlKSk7XG4gIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufVxuXG4vKipcbiAqIFRoZSBSZWplY3RlZCBQcm9taXNlIHN0YXRlLiBDYWxscyBvblJlamVjdGVkIHdpdGggdGhlIHJlc29sdmVkIHZhbHVlIG9mXG4gKiB0aGlzIHByb21pc2UsIGNyZWF0aW5nIGEgbmV3IHByb21pc2UuXG4gKlxuICogSWYgdGhlcmUgaXMgbm8gb25SZWplY3RlZCwgcmV0dXJucyB0aGUgY3VycmVudCBwcm9taXNlIHRvIGF2b2lkIGFuIHByb21pc2VcbiAqIGluc3RhbmNlLlxuICpcbiAqIEB0aGlzIHshUHJvbWlzZX0gVGhlIGN1cnJlbnQgcHJvbWlzZVxuICogQHBhcmFtIHsqPX0gcmVhc29uIFRoZSBjdXJyZW50IHByb21pc2UncyByZWplY3Rpb24gcmVhc29uLlxuICogQHBhcmFtIHtmdW5jdGlvbigqPSk9fSB1bnVzZWRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKj0pPX0gb25SZWplY3RlZFxuICogQHBhcmFtIHtEZWZlcnJlZH0gZGVmZXJyZWQgQSBkZWZlcnJlZCBvYmplY3QgdGhhdCBob2xkcyBhIHByb21pc2UgYW5kIGl0c1xuICogICAgIHJlc29sdmUgYW5kIHJlamVjdCBmdW5jdGlvbnMuIEl0IElTIE5PVCBwYXNzZWQgd2hlbiBjYWxsZWQgZnJvbVxuICogICAgIFByb21pc2UjdGhlbiB0byBzYXZlIGFuIG9iamVjdCBpbnN0YW5jZSAoc2luY2Ugd2UgbWF5IHJldHVybiB0aGUgY3VycmVudFxuICogICAgIHByb21pc2UpLiBJdCBJUyBwYXNzZWQgaW4gd2hlbiBhZG9wdGluZyB0aGUgUmVqZWN0ZWQgc3RhdGUgZnJvbSB0aGVcbiAqICAgICBQZW5kaW5nIHN0YXRlLlxuICogQHJldHVybnMgeyFQcm9taXNlfVxuICovXG5mdW5jdGlvbiBSZWplY3RlZFByb21pc2UocmVhc29uLCB1bnVzZWQsIG9uUmVqZWN0ZWQsIGRlZmVycmVkKSB7XG4gIGlmICghb25SZWplY3RlZCkge1xuICAgIGRlZmVycmVkQWRvcHQoZGVmZXJyZWQsIFJlamVjdGVkUHJvbWlzZSwgcmVhc29uKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBpZiAoIWRlZmVycmVkKSB7XG4gICAgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQodGhpcy5jb25zdHJ1Y3Rvcik7XG4gIH1cbiAgZGVmZXIodHJ5Q2F0Y2hEZWZlcnJlZChkZWZlcnJlZCwgb25SZWplY3RlZCwgcmVhc29uKSk7XG4gIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufVxuXG4vKipcbiAqIFRoZSBQZW5kaW5nIFByb21pc2Ugc3RhdGUuIEV2ZW50dWFsbHkgY2FsbHMgb25GdWxmaWxsZWQgb25jZSB0aGUgcHJvbWlzZSBoYXNcbiAqIHJlc29sdmVkLCBvciBvblJlamVjdGVkIG9uY2UgdGhlIHByb21pc2UgcmVqZWN0cy5cbiAqXG4gKiBJZiB0aGVyZSBpcyBubyBvbkZ1bGZpbGxlZCBhbmQgbm8gb25SZWplY3RlZCwgcmV0dXJucyB0aGUgY3VycmVudCBwcm9taXNlIHRvXG4gKiBhdm9pZCBhbiBwcm9taXNlIGluc3RhbmNlLlxuICpcbiAqIEB0aGlzIHshUHJvbWlzZX0gVGhlIGN1cnJlbnQgcHJvbWlzZVxuICogQHBhcmFtIHsqPX0gcXVldWUgVGhlIGN1cnJlbnQgcHJvbWlzZSdzIHBlbmRpbmcgcHJvbWlzZXMgcXVldWUuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCo9KT19IG9uRnVsZmlsbGVkXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCo9KT19IG9uUmVqZWN0ZWRcbiAqIEBwYXJhbSB7RGVmZXJyZWR9IGRlZmVycmVkIEEgZGVmZXJyZWQgb2JqZWN0IHRoYXQgaG9sZHMgYSBwcm9taXNlIGFuZCBpdHNcbiAqICAgICByZXNvbHZlIGFuZCByZWplY3QgZnVuY3Rpb25zLiBJdCBJUyBOT1QgcGFzc2VkIHdoZW4gY2FsbGVkIGZyb21cbiAqICAgICBQcm9taXNlI3RoZW4gdG8gc2F2ZSBhbiBvYmplY3QgaW5zdGFuY2UgKHNpbmNlIHdlIG1heSByZXR1cm4gdGhlIGN1cnJlbnRcbiAqICAgICBwcm9taXNlKS4gSXQgSVMgcGFzc2VkIGluIHdoZW4gYWRvcHRpbmcgdGhlIFBlbmRpbmcgc3RhdGUgZnJvbSB0aGVcbiAqICAgICBQZW5kaW5nIHN0YXRlIG9mIGFub3RoZXIgcHJvbWlzZS5cbiAqIEByZXR1cm5zIHshUHJvbWlzZX1cbiAqL1xuZnVuY3Rpb24gUGVuZGluZ1Byb21pc2UocXVldWUsIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCBkZWZlcnJlZCkge1xuICBpZiAoIWRlZmVycmVkKSB7XG4gICAgaWYgKCFvbkZ1bGZpbGxlZCAmJiAhb25SZWplY3RlZCkgeyByZXR1cm4gdGhpczsgfVxuICAgIGRlZmVycmVkID0gbmV3IERlZmVycmVkKHRoaXMuY29uc3RydWN0b3IpO1xuICB9XG4gIHF1ZXVlLnB1c2goe1xuICAgIGRlZmVycmVkOiBkZWZlcnJlZCxcbiAgICBvbkZ1bGZpbGxlZDogb25GdWxmaWxsZWQgfHwgZGVmZXJyZWQucmVzb2x2ZSxcbiAgICBvblJlamVjdGVkOiBvblJlamVjdGVkIHx8IGRlZmVycmVkLnJlamVjdFxuICB9KTtcbiAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59XG5cbi8qKlxuICogQ29uc3RydWN0cyBhIGRlZmVycmVkIGluc3RhbmNlIHRoYXQgaG9sZHMgYSBwcm9taXNlIGFuZCBpdHMgcmVzb2x2ZSBhbmRcbiAqIHJlamVjdCBmdW5jdGlvbnMuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIERlZmVycmVkKFByb21pc2UpIHtcbiAgdmFyIGRlZmVycmVkID0gdGhpcztcbiAgLyoqIEB0eXBlIHshUHJvbWlzZX0gKi9cbiAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgLyoqIEB0eXBlIHtmdW5jdGlvbigqPSl9ICovXG4gICAgZGVmZXJyZWQucmVzb2x2ZSA9IHJlc29sdmU7XG5cbiAgICAvKiogQHR5cGUge2Z1bmN0aW9uKCo9KX0gKi9cbiAgICBkZWZlcnJlZC5yZWplY3QgPSByZWplY3Q7XG4gIH0pO1xuICByZXR1cm4gZGVmZXJyZWQ7XG59XG5cbi8qKlxuICogVHJhbnNpdGlvbnMgdGhlIHN0YXRlIG9mIHByb21pc2UgdG8gYW5vdGhlciBzdGF0ZS4gVGhpcyBpcyBvbmx5IGV2ZXIgY2FsbGVkXG4gKiBvbiB3aXRoIGEgcHJvbWlzZSB0aGF0IGlzIGN1cnJlbnRseSBpbiB0aGUgUGVuZGluZyBzdGF0ZS5cbiAqXG4gKiBAcGFyYW0geyFQcm9taXNlfSBwcm9taXNlXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHRoaXM6UHJvbWlzZSwqPSxmdW5jdGlvbigqPSksZnVuY3Rpb24oKj0pLERlZmVycmVkKTohUHJvbWlzZX0gc3RhdGVcbiAqIEBwYXJhbSB7Kj19IHZhbHVlXG4gKi9cbmZ1bmN0aW9uIGFkb3B0KHByb21pc2UsIHN0YXRlLCB2YWx1ZSwgYWRvcHRlZSkge1xuICB2YXIgcXVldWUgPSBwcm9taXNlLl92YWx1ZTtcbiAgcHJvbWlzZS5fc3RhdGUgPSBzdGF0ZTtcbiAgcHJvbWlzZS5fdmFsdWUgPSB2YWx1ZTtcblxuICBpZiAoYWRvcHRlZSAmJiBzdGF0ZSA9PT0gUGVuZGluZ1Byb21pc2UpIHtcbiAgICBhZG9wdGVlLl9zdGF0ZSh2YWx1ZSwgdm9pZCAwLCB2b2lkIDAsIHtcbiAgICAgIHByb21pc2U6IHByb21pc2UsXG4gICAgICByZXNvbHZlOiB2b2lkIDAsXG4gICAgICByZWplY3Q6IHZvaWQgMFxuICAgIH0pO1xuICB9XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgIHZhciBuZXh0ID0gcXVldWVbaV07XG4gICAgcHJvbWlzZS5fc3RhdGUoXG4gICAgICB2YWx1ZSxcbiAgICAgIG5leHQub25GdWxmaWxsZWQsXG4gICAgICBuZXh0Lm9uUmVqZWN0ZWQsXG4gICAgICBuZXh0LmRlZmVycmVkXG4gICAgKTtcbiAgfVxuICBxdWV1ZS5sZW5ndGggPSAwO1xuXG4gIC8vIERldGVybWluZSBpZiB0aGlzIHJlamVjdGVkIHByb21pc2Ugd2lsbCBiZSBcImhhbmRsZWRcIi5cbiAgaWYgKHN0YXRlID09PSBSZWplY3RlZFByb21pc2UgJiYgcHJvbWlzZS5faXNDaGFpbkVuZCkge1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBpZiAocHJvbWlzZS5faXNDaGFpbkVuZCkge1xuICAgICAgICBvblBvc3NpYmx5VW5oYW5kbGVkUmVqZWN0aW9uKHZhbHVlLCBwcm9taXNlKTtcbiAgICAgIH1cbiAgICB9LCAwKTtcbiAgfVxufVxuXG4vKipcbiAqIEEgcGFydGlhbCBhcHBsaWNhdGlvbiBvZiBhZG9wdC5cbiAqXG4gKiBAcGFyYW0geyFQcm9taXNlfSBwcm9taXNlXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHRoaXM6UHJvbWlzZSwqPSxmdW5jdGlvbigqPSksZnVuY3Rpb24oKj0pLERlZmVycmVkKTohUHJvbWlzZX0gc3RhdGVcbiAqIEByZXR1cm5zIHtmdW5jdGlvbigqPSl9XG4gKi9cbmZ1bmN0aW9uIGFkb3B0ZXIocHJvbWlzZSwgc3RhdGUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgYWRvcHQocHJvbWlzZSwgc3RhdGUsIHZhbHVlKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBVcGRhdGVzIGEgZGVmZXJyZWQgcHJvbWlzZXMgc3RhdGUuIE5lY2Vzc2FyeSBmb3IgdXBkYXRpbmcgYW4gYWRvcHRpbmdcbiAqIHByb21pc2UncyBzdGF0ZSB3aGVuIHRoZSBhZG9wdGVlIHJlc29sdmVzLlxuICpcbiAqIEBwYXJhbSB7P0RlZmVycmVkfSBkZWZlcnJlZFxuICogQHBhcmFtIHtmdW5jdGlvbih0aGlzOlByb21pc2UsKj0sZnVuY3Rpb24oKj0pLGZ1bmN0aW9uKCo9KSxEZWZlcnJlZCk6IVByb21pc2V9IHN0YXRlXG4gKiBAcGFyYW0geyo9fSB2YWx1ZVxuICovXG5mdW5jdGlvbiBkZWZlcnJlZEFkb3B0KGRlZmVycmVkLCBzdGF0ZSwgdmFsdWUpIHtcbiAgaWYgKGRlZmVycmVkKSB7XG4gICAgdmFyIHByb21pc2UgPSBkZWZlcnJlZC5wcm9taXNlO1xuICAgIHByb21pc2UuX3N0YXRlID0gc3RhdGU7XG4gICAgcHJvbWlzZS5fdmFsdWUgPSB2YWx1ZTtcbiAgfVxufVxuXG4vKipcbiAqIEEgbm8tb3AgZnVuY3Rpb24gdG8gcHJldmVudCBkb3VibGUgcmVzb2x2aW5nLlxuICovXG5mdW5jdGlvbiBub29wKCkge31cblxuLyoqXG4gKiBUZXN0cyBpZiBmbiBpcyBhIEZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHsqfSBmblxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oZm4pIHtcbiAgcmV0dXJuIHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuLyoqXG4gKiBUZXN0cyBpZiBmbiBpcyBhbiBPYmplY3RcbiAqXG4gKiBAcGFyYW0geyp9IG9ialxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KG9iaikge1xuICByZXR1cm4gb2JqID09PSBPYmplY3Qob2JqKTtcbn1cblxuLyoqXG4gKiBJdGVyYXRlcyBvdmVyIGVhY2ggZWxlbWVudCBvZiBhbiBhcnJheSwgY2FsbGluZyB0aGUgaXRlcmF0b3Igd2l0aCB0aGVcbiAqIGVsZW1lbnQgYW5kIGl0cyBpbmRleC5cbiAqXG4gKiBAcGFyYW0geyFBcnJheX0gY29sbGVjdGlvblxuICogQHBhcmFtIHtmdW5jdGlvbigqPSxudW1iZXIpfSBpdGVyYXRvclxuICovXG5mdW5jdGlvbiBlYWNoKGNvbGxlY3Rpb24sIGl0ZXJhdG9yKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY29sbGVjdGlvbi5sZW5ndGg7IGkrKykge1xuICAgIGl0ZXJhdG9yKGNvbGxlY3Rpb25baV0sIGkpO1xuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBhdHRlbXB0IHRvIHJlc29sdmUgdGhlIGRlZmVycmVkIHdpdGggdGhlIHJldHVyblxuICogb2YgZm4uIElmIGFueSBlcnJvciBpcyByYWlzZWQsIHJlamVjdHMgaW5zdGVhZC5cbiAqXG4gKiBAcGFyYW0geyFEZWZlcnJlZH0gZGVmZXJyZWRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKj0pfSBmblxuICogQHBhcmFtIHsqfSBhcmdcbiAqIEByZXR1cm5zIHtmdW5jdGlvbigpfVxuICovXG5mdW5jdGlvbiB0cnlDYXRjaERlZmVycmVkKGRlZmVycmVkLCBmbiwgYXJnKSB7XG4gIHZhciBwcm9taXNlID0gZGVmZXJyZWQucHJvbWlzZTtcbiAgdmFyIHJlc29sdmUgPSBkZWZlcnJlZC5yZXNvbHZlO1xuICB2YXIgcmVqZWN0ID0gZGVmZXJyZWQucmVqZWN0O1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciByZXN1bHQgPSBmbihhcmcpO1xuICAgICAgZG9SZXNvbHZlKHByb21pc2UsIHJlc29sdmUsIHJlamVjdCwgcmVzdWx0LCByZXN1bHQpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJlamVjdChlKTtcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogUXVldWVzIGFuZCBleGVjdXRlcyBtdWx0aXBsZSBkZWZlcnJlZCBmdW5jdGlvbnMgb24gYW5vdGhlciBydW4gbG9vcC5cbiAqL1xudmFyIGRlZmVyID0gKGZ1bmN0aW9uKCkge1xuICAvKipcbiAgICogRGVmZXJzIGZuIHRvIGFub3RoZXIgcnVuIGxvb3AuXG4gICAqL1xuICB2YXIgc2NoZWR1bGVGbHVzaDtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5wb3N0TWVzc2FnZSkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZmx1c2gpO1xuICAgIHNjaGVkdWxlRmx1c2ggPSBmdW5jdGlvbigpIHtcbiAgICAgIHdpbmRvdy5wb3N0TWVzc2FnZSgnbWFjcm8tdGFzaycsICcqJyk7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBzY2hlZHVsZUZsdXNoID0gZnVuY3Rpb24oKSB7XG4gICAgICBzZXRUaW1lb3V0KGZsdXNoLCAwKTtcbiAgICB9O1xuICB9XG5cbiAgdmFyIHF1ZXVlID0gbmV3IEFycmF5KDE2KTtcbiAgdmFyIGxlbmd0aCA9IDA7XG5cbiAgZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGZuID0gcXVldWVbaV07XG4gICAgICBxdWV1ZVtpXSA9IG51bGw7XG4gICAgICBmbigpO1xuICAgIH1cbiAgICBsZW5ndGggPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gZm5cbiAgICovXG4gIGZ1bmN0aW9uIGRlZmVyKGZuKSB7XG4gICAgaWYgKGxlbmd0aCA9PT0gMCkgeyBzY2hlZHVsZUZsdXNoKCk7IH1cbiAgICBxdWV1ZVtsZW5ndGgrK10gPSBmbjtcbiAgfVxuXG4gIHJldHVybiBkZWZlcjtcbn0pKCk7XG5cbi8qKlxuICogVGhlIFByb21pc2UgcmVzb2x1dGlvbiBwcm9jZWR1cmUuXG4gKiBodHRwczovL2dpdGh1Yi5jb20vcHJvbWlzZXMtYXBsdXMvcHJvbWlzZXMtc3BlYyN0aGUtcHJvbWlzZS1yZXNvbHV0aW9uLXByb2NlZHVyZVxuICpcbiAqIEBwYXJhbSB7IVByb21pc2V9IHByb21pc2VcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKj0pfSByZXNvbHZlXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCo9KX0gcmVqZWN0XG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcGFyYW0geyo9fSBjb250ZXh0XG4gKi9cbmZ1bmN0aW9uIGRvUmVzb2x2ZShwcm9taXNlLCByZXNvbHZlLCByZWplY3QsIHZhbHVlLCBjb250ZXh0KSB7XG4gIHZhciBfcmVqZWN0ID0gcmVqZWN0O1xuICB2YXIgdGhlbjtcbiAgdmFyIF9yZXNvbHZlO1xuICB0cnkge1xuICAgIGlmICh2YWx1ZSA9PT0gcHJvbWlzZSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGZ1bGZpbGwgcHJvbWlzZSB3aXRoIGl0c2VsZicpO1xuICAgIH1cbiAgICB2YXIgaXNPYmogPSBpc09iamVjdCh2YWx1ZSk7XG4gICAgaWYgKGlzT2JqICYmIHZhbHVlIGluc3RhbmNlb2YgcHJvbWlzZS5jb25zdHJ1Y3Rvcikge1xuICAgICAgYWRvcHQocHJvbWlzZSwgdmFsdWUuX3N0YXRlLCB2YWx1ZS5fdmFsdWUsIHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKGlzT2JqICYmICh0aGVuID0gdmFsdWUudGhlbikgJiYgaXNGdW5jdGlvbih0aGVuKSkge1xuICAgICAgX3Jlc29sdmUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBfcmVzb2x2ZSA9IF9yZWplY3QgPSBub29wO1xuICAgICAgICBkb1Jlc29sdmUocHJvbWlzZSwgcmVzb2x2ZSwgcmVqZWN0LCB2YWx1ZSwgdmFsdWUpO1xuICAgICAgfTtcbiAgICAgIF9yZWplY3QgPSBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAgICAgX3Jlc29sdmUgPSBfcmVqZWN0ID0gbm9vcDtcbiAgICAgICAgcmVqZWN0KHJlYXNvbik7XG4gICAgICB9O1xuICAgICAgdGhlbi5jYWxsKFxuICAgICAgICBjb250ZXh0LFxuICAgICAgICBmdW5jdGlvbih2YWx1ZSkgeyBfcmVzb2x2ZSh2YWx1ZSk7IH0sXG4gICAgICAgIGZ1bmN0aW9uKHJlYXNvbikgeyBfcmVqZWN0KHJlYXNvbik7IH1cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIF9yZWplY3QoZSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBQcm9taXNlO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7ZGV2fSBmcm9tICcuL2xvZyc7XG5pbXBvcnQge2RpY3R9IGZyb20gJy4vdXRpbHMvb2JqZWN0JztcbmltcG9ydCB7aW50ZXJuYWxMaXN0ZW5JbXBsZW1lbnRhdGlvbn0gZnJvbSAnLi9ldmVudC1oZWxwZXItbGlzdGVuJztcbmltcG9ydCB7cGFyc2VKc29ufSBmcm9tICcuL2pzb24nO1xuXG5cbi8qKiBAY29uc3QgKi9cbmNvbnN0IEFNUF9NRVNTQUdFX1BSRUZJWCA9ICdhbXAtJztcbmV4cG9ydCBjb25zdCBDT05TVEFOVFMgPSB7XG4gIHJlc3BvbnNlVHlwZVN1ZmZpeDogJy1yZXN1bHQnLFxuICBtZXNzYWdlSWRGaWVsZE5hbWU6ICdtZXNzYWdlSWQnLFxuICBwYXlsb2FkRmllbGROYW1lOiAncGF5bG9hZCcsXG4gIGNvbnRlbnRGaWVsZE5hbWU6ICdjb250ZW50Jyxcbn07XG5cbi8qKiBAZW51bSB7c3RyaW5nfSAqL1xuZXhwb3J0IGNvbnN0IE1lc3NhZ2VUeXBlID0ge1xuICAvLyBGb3IgYW1wLWFkXG4gIFNFTkRfRU1CRURfU1RBVEU6ICdzZW5kLWVtYmVkLXN0YXRlJyxcbiAgRU1CRURfU1RBVEU6ICdlbWJlZC1zdGF0ZScsXG4gIFNFTkRfRU1CRURfQ09OVEVYVDogJ3NlbmQtZW1iZWQtY29udGV4dCcsXG4gIEVNQkVEX0NPTlRFWFQ6ICdlbWJlZC1jb250ZXh0JyxcbiAgU0VORF9JTlRFUlNFQ1RJT05TOiAnc2VuZC1pbnRlcnNlY3Rpb25zJyxcbiAgSU5URVJTRUNUSU9OOiAnaW50ZXJzZWN0aW9uJyxcbiAgRU1CRURfU0laRTogJ2VtYmVkLXNpemUnLFxuICBFTUJFRF9TSVpFX0NIQU5HRUQ6ICdlbWJlZC1zaXplLWNoYW5nZWQnLFxuICBFTUJFRF9TSVpFX0RFTklFRDogJ2VtYmVkLXNpemUtZGVuaWVkJyxcbiAgTk9fQ09OVEVOVDogJ25vLWNvbnRlbnQnLFxuICBHRVRfSFRNTDogJ2dldC1odG1sJyxcbiAgR0VUX0NPTlNFTlRfU1RBVEU6ICdnZXQtY29uc2VudC1zdGF0ZScsXG5cbiAgLy8gRm9yIHRoZSBmcmFtZSB0byBiZSBwbGFjZWQgaW4gZnVsbCBvdmVybGF5IG1vZGUgZm9yIGxpZ2h0Ym94ZXNcbiAgRlVMTF9PVkVSTEFZX0ZSQU1FOiAnZnVsbC1vdmVybGF5LWZyYW1lJyxcbiAgRlVMTF9PVkVSTEFZX0ZSQU1FX1JFU1BPTlNFOiAnZnVsbC1vdmVybGF5LWZyYW1lLXJlc3BvbnNlJyxcbiAgQ0FOQ0VMX0ZVTExfT1ZFUkxBWV9GUkFNRTogJ2NhbmNlbC1mdWxsLW92ZXJsYXktZnJhbWUnLFxuICBDQU5DRUxfRlVMTF9PVkVSTEFZX0ZSQU1FX1JFU1BPTlNFOiAnY2FuY2VsLWZ1bGwtb3ZlcmxheS1mcmFtZS1yZXNwb25zZScsXG5cbiAgLy8gRm9yIGFtcC1pbmFib3hcbiAgU0VORF9QT1NJVElPTlM6ICdzZW5kLXBvc2l0aW9ucycsXG4gIFBPU0lUSU9OOiAncG9zaXRpb24nLFxuXG4gIC8vIEZvciBhbXAtYW5hbHl0aWNzJyBpZnJhbWUtdHJhbnNwb3J0XG4gIFNFTkRfSUZSQU1FX1RSQU5TUE9SVF9FVkVOVFM6ICdzZW5kLWlmcmFtZS10cmFuc3BvcnQtZXZlbnRzJyxcbiAgSUZSQU1FX1RSQU5TUE9SVF9FVkVOVFM6ICdpZnJhbWUtdHJhbnNwb3J0LWV2ZW50cycsXG4gIElGUkFNRV9UUkFOU1BPUlRfUkVTUE9OU0U6ICdpZnJhbWUtdHJhbnNwb3J0LXJlc3BvbnNlJyxcblxuICAvLyBGb3IgdXNlci1lcnJvci1pbi1pZnJhbWVcbiAgVVNFUl9FUlJPUl9JTl9JRlJBTUU6ICd1c2VyLWVycm9yLWluLWlmcmFtZScsXG59O1xuXG4vKipcbiAqIExpc3RlbnMgZm9yIHRoZSBzcGVjaWZpZWQgZXZlbnQgb24gdGhlIGVsZW1lbnQuXG4gKiBAcGFyYW0geyFFdmVudFRhcmdldH0gZWxlbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50VHlwZVxuICogQHBhcmFtIHtmdW5jdGlvbighRXZlbnQpfSBsaXN0ZW5lclxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRfZXZ0TGlzdGVuZXJPcHRzXG4gKiBAcmV0dXJuIHshVW5saXN0ZW5EZWZ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4oZWxlbWVudCwgZXZlbnRUeXBlLCBsaXN0ZW5lciwgb3B0X2V2dExpc3RlbmVyT3B0cykge1xuICByZXR1cm4gaW50ZXJuYWxMaXN0ZW5JbXBsZW1lbnRhdGlvbihcbiAgICAgIGVsZW1lbnQsIGV2ZW50VHlwZSwgbGlzdGVuZXIsIG9wdF9ldnRMaXN0ZW5lck9wdHMpO1xufVxuXG5cbi8qKlxuICogU2VyaWFsaXplIGFuIEFNUCBwb3N0IG1lc3NhZ2UuIE91dHB1dCBsb29rcyBsaWtlOlxuICogJ2FtcC0wMTE0ODEzMjMwOTk0OTB7XCJ0eXBlXCI6XCJwb3NpdGlvblwiLFwic2VudGluZWxcIjpcIjEyMzQ1XCIsXCJmb29cIjpcImJhclwifSdcbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlXG4gKiBAcGFyYW0ge3N0cmluZ30gc2VudGluZWxcbiAqIEBwYXJhbSB7SnNvbk9iamVjdD19IGRhdGFcbiAqIEBwYXJhbSB7P3N0cmluZz19IHJ0dlZlcnNpb25cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZU1lc3NhZ2UodHlwZSwgc2VudGluZWwsIGRhdGEgPSBkaWN0KCksXG4gIHJ0dlZlcnNpb24gPSBudWxsKSB7XG4gIC8vIFRPRE86IGNvbnNpZGVyIHdyYXAgdGhlIGRhdGEgaW4gYSBcImRhdGFcIiBmaWVsZC4geyB0eXBlLCBzZW50aW5hbCwgZGF0YSB9XG4gIGNvbnN0IG1lc3NhZ2UgPSBkYXRhO1xuICBtZXNzYWdlWyd0eXBlJ10gPSB0eXBlO1xuICBtZXNzYWdlWydzZW50aW5lbCddID0gc2VudGluZWw7XG4gIHJldHVybiBBTVBfTUVTU0FHRV9QUkVGSVggKyAocnR2VmVyc2lvbiB8fCAnJykgKyBKU09OLnN0cmluZ2lmeShtZXNzYWdlKTtcbn1cblxuXG4vKipcbiAqIERlc2VyaWFsaXplIGFuIEFNUCBwb3N0IG1lc3NhZ2UuXG4gKiBSZXR1cm5zIG51bGwgaWYgaXQncyBub3QgdmFsaWQgQU1QIG1lc3NhZ2UgZm9ybWF0LlxuICpcbiAqIEBwYXJhbSB7Kn0gbWVzc2FnZVxuICogQHJldHVybiB7P0pzb25PYmplY3R8dW5kZWZpbmVkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVzZXJpYWxpemVNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgaWYgKCFpc0FtcE1lc3NhZ2UobWVzc2FnZSkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBzdGFydFBvcyA9IG1lc3NhZ2UuaW5kZXhPZigneycpO1xuICBkZXYoKS5hc3NlcnQoc3RhcnRQb3MgIT0gLTEsICdKU09OIG1pc3NpbmcgaW4gJXMnLCBtZXNzYWdlKTtcbiAgdHJ5IHtcbiAgICByZXR1cm4gcGFyc2VKc29uKG1lc3NhZ2Uuc3Vic3RyKHN0YXJ0UG9zKSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBkZXYoKS5lcnJvcignTUVTU0FHSU5HJywgJ0ZhaWxlZCB0byBwYXJzZSBtZXNzYWdlOiAnICsgbWVzc2FnZSwgZSk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuXG4vKipcbiAqICBSZXR1cm5zIHRydWUgaWYgbWVzc2FnZSBsb29rcyBsaWtlIGl0IGlzIGFuIEFNUCBwb3N0TWVzc2FnZVxuICogIEBwYXJhbSB7Kn0gbWVzc2FnZVxuICogIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0FtcE1lc3NhZ2UobWVzc2FnZSkge1xuICByZXR1cm4gKHR5cGVvZiBtZXNzYWdlID09ICdzdHJpbmcnICYmXG4gICAgICBtZXNzYWdlLmluZGV4T2YoQU1QX01FU1NBR0VfUFJFRklYKSA9PSAwICYmXG4gICAgICBtZXNzYWdlLmluZGV4T2YoJ3snKSAhPSAtMSk7XG59XG5cbi8qKiBAdHlwZWRlZiB7e2NyZWF0aXZlSWQ6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nfX0gKi9cbmV4cG9ydCBsZXQgSWZyYW1lVHJhbnNwb3J0RXZlbnQ7XG4vLyBBbiBldmVudCwgYW5kIHRoZSB0cmFuc3BvcnQgSUQgb2YgdGhlIGFtcC1hbmFseXRpY3MgdGFncyB0aGF0XG4vLyBnZW5lcmF0ZWQgaXQuIEZvciBpbnN0YW5jZSBpZiB0aGUgY3JlYXRpdmUgd2l0aCB0cmFuc3BvcnRcbi8vIElEIDIgc2VuZHMgXCJoaVwiLCB0aGVuIGFuIElmcmFtZVRyYW5zcG9ydEV2ZW50IHdvdWxkIGxvb2sgbGlrZTpcbi8vIHsgY3JlYXRpdmVJZDogXCIyXCIsIG1lc3NhZ2U6IFwiaGlcIiB9XG4vLyBJZiB0aGUgY3JlYXRpdmUgd2l0aCB0cmFuc3BvcnQgSUQgMiBzZW50IHRoYXQsIGFuZCBhbHNvIHNlbnQgXCJoZWxsb1wiLFxuLy8gYW5kIHRoZSBjcmVhdGl2ZSB3aXRoIHRyYW5zcG9ydCBJRCAzIHNlbmRzIFwiZ29vZGJ5ZVwiIHRoZW4gYW4gKmFycmF5KiBvZiAzXG4vLyBBbXBBbmFseXRpY3NJZnJhbWVUcmFuc3BvcnRFdmVudCB3b3VsZCBiZSBzZW50IHRvIHRoZSAzcCBmcmFtZSBsaWtlIHNvOlxuLy8gW1xuLy8gICB7IGNyZWF0aXZlSWQ6IFwiMlwiLCBtZXNzYWdlOiBcImhpXCIgfSwgLy8gQW4gQW1wQW5hbHl0aWNzSWZyYW1lVHJhbnNwb3J0RXZlbnRcbi8vICAgeyBjcmVhdGl2ZUlkOiBcIjJcIiwgbWVzc2FnZTogXCJoZWxsb1wiIH0sIC8vIEFub3RoZXJcbi8vICAgeyBjcmVhdGl2ZUlkOiBcIjNcIiwgbWVzc2FnZTogXCJnb29kYnllXCIgfSAvLyBBbmQgYW5vdGhlclxuLy8gXVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Y29tcHV0ZWRTdHlsZX0gZnJvbSAnLi9zdHlsZSc7XG5pbXBvcnQge2Rldn0gZnJvbSAnLi9sb2cnO1xuaW1wb3J0IHtnZXRQYXJlbnRXaW5kb3dGcmFtZUVsZW1lbnR9IGZyb20gJy4vc2VydmljZSc7XG5cbmNvbnN0IEFEX0NPTlRBSU5FUl9QUk9QID0gJ19fQU1QX19BRF9DT05UQUlORVInO1xuXG4vKipcbiAqIFRhZ3MgdGhhdCBhcmUgYWxsb3dlZCB0byBoYXZlIGZpeGVkIHBvc2l0aW9uaW5nXG4gKiBAY29uc3QgeyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn1cbiAqL1xuY29uc3QgQ09OVEFJTkVSUyA9IHtcbiAgJ0FNUC1GWC1GTFlJTkctQ0FSUEVUJzogdHJ1ZSxcbiAgJ0FNUC1MSUdIVEJPWCc6IHRydWUsXG4gICdBTVAtU1RJQ0tZLUFEJzogdHJ1ZSxcbiAgJ0FNUC1MSUdIVEJPWC1HQUxMRVJZJzogdHJ1ZSxcbn07XG5cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiBhbiBlbGVtZW50IGlzIGZpeGVkLXBvc2l0aW9uZWQuXG4gKiBPSyB0byB1c2UsIGJlY2F1c2UgaXQncyBvbmx5IGNhbGxlZCBmcm9tIG9uTGF5b3V0TWVhc3VyZVxuICogQHBhcmFtIHshRWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc1Bvc2l0aW9uRml4ZWQoZWwsIHdpbikge1xuICBjb25zdCB7cG9zaXRpb259ID0gY29tcHV0ZWRTdHlsZSh3aW4sIGVsKTtcbiAgLy8gV2UgY29uc2lkZXIgc3RpY2t5IHBvc2l0aW9ucyBhcyBmaXhlZCwgc2luY2UgdGhleSBjYW4gYmUgZml4ZWQuXG4gIHJldHVybiBwb3NpdGlvbiA9PSAnZml4ZWQnIHx8IHBvc2l0aW9uID09ICdzdGlja3knO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHtib29sZWFufSB3aGV0aGVyIHRoZSBlbGVtZW50IHBvc2l0aW9uIGlzIGFsbG93ZWQuIElmIHRoZSBlbGVtZW50XG4gKiBiZWxvbmdzIHRvIENPTlRBSU5FUlMsIGl0IGlzIGFsbG93ZWQgdG8gYmUgcG9zaXRpb24gZml4ZWQuXG4gKiBJZiB0aGUgZWxlbWVudCBoYXMgYSBwb3NpdGlvbiBmaXhlZCBhbmNlc3RvciwgaXQgaXMgbm90IGFsbG93ZWQuXG4gKiBUaGlzIHNob3VsZCBvbmx5IGJlIGNhbGxlZCB3aGVuIGEgbGF5b3V0IG9uIHRoZSBwYWdlIHdhcyBqdXN0IGZvcmNlZFxuICogYW55d2F5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNBZFBvc2l0aW9uQWxsb3dlZChlbGVtZW50LCB3aW4pIHtcbiAgbGV0IGhhc0ZpeGVkQW5jZXN0b3IgPSBmYWxzZTtcbiAgbGV0IGNvbnRhaW5lcnMgPSAwO1xuICBsZXQgZWwgPSBlbGVtZW50O1xuICBkbyB7XG4gICAgaWYgKENPTlRBSU5FUlNbZWwudGFnTmFtZV0pIHtcbiAgICAgIC8vIFRoZSBjb250YWluZXJzIG11c3Qgbm90IHRoZW1zZWx2ZXMgYmUgY29udGFpbmVkIGluIGEgZml4ZWQtcG9zaXRpb25cbiAgICAgIC8vIGVsZW1lbnQuIENvbnRpbnVlIHRoZSBzZWFyY2guXG4gICAgICBjb250YWluZXJzKys7XG4gICAgICBoYXNGaXhlZEFuY2VzdG9yID0gZmFsc2U7XG4gICAgfSBlbHNlIGlmIChpc1Bvc2l0aW9uRml4ZWQoZGV2KCkuYXNzZXJ0RWxlbWVudChlbCksIHdpbikpIHtcbiAgICAgIC8vIEJlY2F1c2UgY2VydGFpbiBibGVzc2VkIGVsZW1lbnRzIG1heSBjb250YWluIGEgcG9zaXRpb24gZml4ZWRcbiAgICAgIC8vIGNvbnRhaW5lciAod2hpY2ggY29udGFpbiBhbiBhZCksIHdlIGNvbnRpbnVlIHRvIHNlYXJjaCB0aGVcbiAgICAgIC8vIGFuY2VzdHJ5IHRyZWUuXG4gICAgICBoYXNGaXhlZEFuY2VzdG9yID0gdHJ1ZTtcbiAgICB9XG4gICAgZWwgPSBlbC5wYXJlbnRFbGVtZW50O1xuICB9IHdoaWxlIChlbCAmJiBlbC50YWdOYW1lICE9ICdCT0RZJyk7XG4gIHJldHVybiAhaGFzRml4ZWRBbmNlc3RvciAmJiBjb250YWluZXJzIDw9IDE7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgYmxlc3NlZCBjb250YWluZXIgZWxlbWVudCB0YWdOYW1lIGlmIHRoZSBhZCBpcyBjb250YWluZWQgYnkgb25lLlxuICogVGhpcyBpcyBjYWxsZWQgZHVyaW5nIGxheW91dCBtZWFzdXJlLlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHJldHVybiB7P3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEFkQ29udGFpbmVyKGVsZW1lbnQpIHtcbiAgaWYgKGVsZW1lbnRbQURfQ09OVEFJTkVSX1BST1BdID09PSB1bmRlZmluZWQpIHtcbiAgICBsZXQgZWwgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgd2hpbGUgKGVsICYmIGVsLnRhZ05hbWUgIT0gJ0JPRFknKSB7XG4gICAgICBpZiAoQ09OVEFJTkVSU1tlbC50YWdOYW1lXSkge1xuICAgICAgICByZXR1cm4gZWxlbWVudFtBRF9DT05UQUlORVJfUFJPUF0gPSBlbC50YWdOYW1lO1xuICAgICAgfVxuICAgICAgZWwgPSBlbC5wYXJlbnRFbGVtZW50O1xuICAgIH1cbiAgICBlbGVtZW50W0FEX0NPTlRBSU5FUl9QUk9QXSA9IG51bGw7XG4gIH1cbiAgcmV0dXJuIGVsZW1lbnRbQURfQ09OVEFJTkVSX1BST1BdO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIHJlc291cmNlIElEIG9mIHRoZSBhbXAtYWQgZWxlbWVudCBjb250YWluaW5nIHRoZSBwYXNzZWQgbm9kZS5cbiAqIElmIHRoZXJlIGlzIG5vIGNvbnRhaW5pbmcgYW1wLWFkIHRhZywgdGhlbiBudWxsIHdpbGwgYmUgcmV0dXJuZWQuXG4gKiBUT0RPKGpvbmtlbGxlcik6IEludmVzdGlnYXRlIHdoZXRoZXIgbm9uLUE0QSB1c2UgY2FzZSBpcyBuZWVkZWQuIElzc3VlIDExNDM2XG4gKiBAcGFyYW0geyFFbGVtZW50fSBub2RlXG4gKiBAcGFyYW0geyFXaW5kb3d9IHRvcFdpblxuICogQHJldHVybiB7P3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEFtcEFkUmVzb3VyY2VJZChub2RlLCB0b3BXaW4pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBmcmFtZVBhcmVudCA9IGdldFBhcmVudFdpbmRvd0ZyYW1lRWxlbWVudChub2RlLCB0b3BXaW4pLnBhcmVudEVsZW1lbnQ7XG4gICAgaWYgKGZyYW1lUGFyZW50Lm5vZGVOYW1lID09ICdBTVAtQUQnKSB7XG4gICAgICByZXR1cm4gU3RyaW5nKGZyYW1lUGFyZW50LmdldFJlc291cmNlSWQoKSk7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gIH1cbiAgLy8gV2hldGhlciB3ZSBlbnRlcmVkIHRoZSBjYXRjaCBhYm92ZSAoZS5nLiBkdWUgdG8gYXR0ZW1wdCB0byBhY2Nlc3NcbiAgLy8gYWNyb3NzIHhkb21haW4gYm91bmRhcnkpLCBvciBmYWlsZWQgdG8gZW50ZXIgdGhlIGlmIGZ1cnRoZXIgYWJvdmUsIHRoZVxuICAvLyBub2RlIGlzIG5vdCB3aXRoaW4gYSBmcmllbmRseSBhbXAtYWQgdGFnLiBTbywgdGhlcmUgaXMgbm8gYW1wLWFkXG4gIC8vIHJlc291cmNlIElELiBIb3cgdG8gaGFuZGxlIHRoYXQgaXMgdXAgdG8gdGhlIGNhbGxlciwgYnV0IHNlZSBUT0RPIGFib3ZlLlxuICByZXR1cm4gbnVsbDtcbn1cblxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cblxuLyoqXG4gKiBDb21tb25seSB1c2VkIHNpZ25hbHMgYWNyb3NzIGRpZmZlcmVudCBlbGVtZW50cyBhbmQgZG9jdW1lbnRzLlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IENvbW1vblNpZ25hbHMgPSB7XG5cbiAgLyoqXG4gICAqIFRoZSBlbGVtZW50IGhhcyBiZWVuIGJ1aWx0LlxuICAgKi9cbiAgQlVJTFQ6ICdidWlsdCcsXG5cbiAgLyoqXG4gICAqIFRoZSBpbml0aWFsIGNvbnRlbnRzIG9mIGFuIGVsZW1lbnQvZG9jdW1lbnQvZW1iZWQgaGF2ZSBiZWVuIGxvYWRlZC5cbiAgICovXG4gIElOSV9MT0FEOiAnaW5pLWxvYWQnLFxuXG4gIC8qKlxuICAgKiBUaGUgZWxlbWVudCBoYXMgYmVlbiBsb2FkZWQuXG4gICAqL1xuICBMT0FEX0VORDogJ2xvYWQtZW5kJyxcblxuICAvKipcbiAgICogVGhlIGVsZW1lbnQgaGFzIHN0YXJ0ZWQgbG9hZGluZy5cbiAgICovXG4gIExPQURfU1RBUlQ6ICdsb2FkLXN0YXJ0JyxcblxuICAvKipcbiAgICogUmVuZGVyaW5nIGhhcyBiZWVuIGNvbmZpcm1lZCB0byBoYXZlIGJlZW4gc3RhcnRlZC5cbiAgICovXG4gIFJFTkRFUl9TVEFSVDogJ3JlbmRlci1zdGFydCcsXG5cbiAgLyoqXG4gICAqIFRoZSBlbGVtZW50IGhhcyBiZWVuIHVubGFpZCBvdXQuXG4gICAqL1xuICBVTkxPQUQ6ICd1bmxvYWQnLFxufTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEFsbG93cyBmb3IgcnVudGltZSBjb25maWd1cmF0aW9uLiBJbnRlcm5hbGx5LCB0aGUgcnVudGltZSBzaG91bGRcbiAqIHVzZSB0aGUgc3JjL2NvbmZpZy5qcyBtb2R1bGUgZm9yIHZhcmlvdXMgY29uc3RhbnRzLiBXZSBjYW4gdXNlIHRoZVxuICogQU1QX0NPTkZJRyBnbG9iYWwgdG8gdHJhbnNsYXRlIHVzZXItZGVmaW5lZCBjb25maWd1cmF0aW9ucyB0byB0aGlzXG4gKiBtb2R1bGUuXG4gKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz59XG4gKi9cbmNvbnN0IGVudiA9IHNlbGYuQU1QX0NPTkZJRyB8fCB7fTtcblxuY29uc3QgdGhpcmRQYXJ0eUZyYW1lUmVnZXggPSB0eXBlb2YgZW52Wyd0aGlyZFBhcnR5RnJhbWVSZWdleCddID09ICdzdHJpbmcnID9cbiAgbmV3IFJlZ0V4cChlbnZbJ3RoaXJkUGFydHlGcmFtZVJlZ2V4J10pIDogZW52Wyd0aGlyZFBhcnR5RnJhbWVSZWdleCddO1xuXG5jb25zdCBjZG5Qcm94eVJlZ2V4ID0gdHlwZW9mIGVudlsnY2RuUHJveHlSZWdleCddID09ICdzdHJpbmcnID9cbiAgbmV3IFJlZ0V4cChlbnZbJ2NkblByb3h5UmVnZXgnXSkgOiBlbnZbJ2NkblByb3h5UmVnZXgnXTtcblxuLyoqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgc3RyaW5nfGJvb2xlYW58UmVnRXhwPn0gKi9cbmV4cG9ydCBjb25zdCB1cmxzID0ge1xuICB0aGlyZFBhcnR5OiBlbnZbJ3RoaXJkUGFydHlVcmwnXSB8fCAnaHR0cHM6Ly8zcC5hbXBwcm9qZWN0Lm5ldCcsXG4gIHRoaXJkUGFydHlGcmFtZUhvc3Q6IGVudlsndGhpcmRQYXJ0eUZyYW1lSG9zdCddIHx8ICdhbXBwcm9qZWN0Lm5ldCcsXG4gIHRoaXJkUGFydHlGcmFtZVJlZ2V4OiB0aGlyZFBhcnR5RnJhbWVSZWdleCB8fCAvXmQtXFxkK1xcLmFtcHByb2plY3RcXC5uZXQkLyxcbiAgY2RuOiBlbnZbJ2NkblVybCddIHx8ICdodHRwczovL2Nkbi5hbXBwcm9qZWN0Lm9yZycsXG4gIC8qIE5vdGUgdGhhdCBjZG5Qcm94eVJlZ2V4IGlzIG9ubHkgZXZlciBjaGVja2VkIGFnYWluc3Qgb3JpZ2luc1xuICAgKiAocHJvdG86Ly9ob3N0Wzpwb3J0XSkgc28gZG9lcyBub3QgbmVlZCB0byBjb25zaWRlciBwYXRoXG4gICAqL1xuICBjZG5Qcm94eVJlZ2V4OiBjZG5Qcm94eVJlZ2V4IHx8XG4gICAgICAvXmh0dHBzOlxcL1xcLyhbYS16QS1aMC05Xy1dK1xcLik/Y2RuXFwuYW1wcHJvamVjdFxcLm9yZyQvLFxuICBsb2NhbGhvc3RSZWdleDogL15odHRwcz86XFwvXFwvbG9jYWxob3N0KDpcXGQrKT8kLyxcbiAgZXJyb3JSZXBvcnRpbmc6IGVudlsnZXJyb3JSZXBvcnRpbmdVcmwnXSB8fFxuICAgICAgJ2h0dHBzOi8vYW1wLWVycm9yLXJlcG9ydGluZy5hcHBzcG90LmNvbS9yJyxcbiAgbG9jYWxEZXY6IGVudlsnbG9jYWxEZXYnXSB8fCBmYWxzZSxcbn07XG5cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIHVybHMsXG59O1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7ZW5kc1dpdGh9IGZyb20gJy4vc3RyaW5nJztcbmltcG9ydCB7XG4gIGlzUHJveHlPcmlnaW4sXG4gIHBhcnNlVXJsRGVwcmVjYXRlZCxcbiAgdHJ5RGVjb2RlVXJpQ29tcG9uZW50LFxufSBmcm9tICcuL3VybCc7XG5pbXBvcnQge3VybHN9IGZyb20gJy4vY29uZmlnJztcblxuXG4vKipcbiAqIFJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBjb29raWUuIFRoZSBjb29raWUgYWNjZXNzIGlzIHJlc3RyaWN0ZWQgYW5kIG11c3RcbiAqIGdvIHRocm91Z2ggdGhlIHByaXZhY3kgcmV2aWV3LiBCZWZvcmUgdXNpbmcgdGhpcyBtZXRob2QgcGxlYXNlIGZpbGUgYVxuICogR2l0SHViIGlzc3VlIHdpdGggXCJQcml2YWN5IFJldmlld1wiIGxhYmVsLlxuICpcbiAqIFJldHVybnMgdGhlIGNvb2tpZSdzIHZhbHVlIG9yIGBudWxsYC5cbiAqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAqIEByZXR1cm4gez9zdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb29raWUod2luLCBuYW1lKSB7XG4gIGNvbnN0IGNvb2tpZVN0cmluZyA9IHRyeUdldERvY3VtZW50Q29va2llTm9JbmxpbmUod2luKTtcbiAgaWYgKCFjb29raWVTdHJpbmcpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBjb29raWVzID0gY29va2llU3RyaW5nLnNwbGl0KCc7Jyk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY29va2llcy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGNvb2tpZSA9IGNvb2tpZXNbaV0udHJpbSgpO1xuICAgIGNvbnN0IGVxID0gY29va2llLmluZGV4T2YoJz0nKTtcbiAgICBpZiAoZXEgPT0gLTEpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAodHJ5RGVjb2RlVXJpQ29tcG9uZW50KGNvb2tpZS5zdWJzdHJpbmcoMCwgZXEpLnRyaW0oKSkgPT0gbmFtZSkge1xuICAgICAgY29uc3QgdmFsdWUgPSBjb29raWUuc3Vic3RyaW5nKGVxICsgMSkudHJpbSgpO1xuICAgICAgcmV0dXJuIHRyeURlY29kZVVyaUNvbXBvbmVudCh2YWx1ZSwgdmFsdWUpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBUaGlzIG1ldGhvZCBzaG91bGQgbm90IGJlIGlubGluZWQgdG8gcHJldmVudCBUcnlDYXRjaCBkZW9wdGltaXphdGlvbi5cbiAqIE5vSW5saW5lIGtleXdvcmQgYXQgdGhlIGVuZCBvZiBmdW5jdGlvbiBuYW1lIGFsc28gcHJldmVudHMgQ2xvc3VyZSBjb21waWxlclxuICogZnJvbSBpbmxpbmluZyB0aGUgZnVuY3Rpb24uXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiB0cnlHZXREb2N1bWVudENvb2tpZU5vSW5saW5lKHdpbikge1xuICB0cnkge1xuICAgIHJldHVybiB3aW4uZG9jdW1lbnQuY29va2llO1xuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gQWN0IGFzIGlmIG5vIGNvb2tpZSBpcyBhdmFpbGFibGUuIEV4Y2VwdGlvbnMgY2FuIGJlIHRocm93biB3aGVuXG4gICAgLy8gQU1QIGRvY3MgYXJlIG9wZW5lZCBvbiBvcmlnaW5zIHRoYXQgZG8gbm90IGFsbG93IHNldHRpbmdcbiAgICAvLyBjb29raWVzIHN1Y2ggYXMgbnVsbCBvcmlnaW5zLlxuICAgIHJldHVybiAnJztcbiAgfVxufVxuXG4vKipcbiAqIFNldHMgdGhlIHZhbHVlIG9mIHRoZSBjb29raWUuIFRoZSBjb29raWUgYWNjZXNzIGlzIHJlc3RyaWN0ZWQgYW5kIG11c3RcbiAqIGdvIHRocm91Z2ggdGhlIHByaXZhY3kgcmV2aWV3LiBCZWZvcmUgdXNpbmcgdGhpcyBtZXRob2QgcGxlYXNlIGZpbGUgYVxuICogR2l0SHViIGlzc3VlIHdpdGggXCJQcml2YWN5IFJldmlld1wiIGxhYmVsLlxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gKiBAcGFyYW0ge3RpbWV9IGV4cGlyYXRpb25UaW1lXG4gKiBAcGFyYW0ge3tcbiAqICAgaGlnaGVzdEF2YWlsYWJsZURvbWFpbjooYm9vbGVhbnx1bmRlZmluZWQpLFxuICogICBkb21haW46KHN0cmluZ3x1bmRlZmluZWQpXG4gKiB9PX0gb3B0X29wdGlvbnNcbiAqICAgICAtIGhpZ2hlc3RBdmFpbGFibGVEb21haW46IElmIHRydWUsIHNldCB0aGUgY29va2llIGF0IHRoZSB3aWRlc3QgZG9tYWluXG4gKiAgICAgICBzY29wZSBhbGxvd2VkIGJ5IHRoZSBicm93c2VyLiBFLmcuIG9uIGV4YW1wbGUuY29tIGlmIHdlIGFyZSBjdXJyZW50bHlcbiAqICAgICAgIG9uIHd3dy5leGFtcGxlLmNvbS5cbiAqICAgICAtIGRvbWFpbjogRXhwbGljaXQgZG9tYWluIHRvIHNldC5cbiAqICAgICAtIGFsbG93T25Qcm94eU9yaWdpbjogQWxsb3cgc2V0dGluZyBhIGNvb2tpZSBvbiB0aGUgQU1QIENhY2hlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0Q29va2llKHdpbiwgbmFtZSwgdmFsdWUsIGV4cGlyYXRpb25UaW1lLCBvcHRfb3B0aW9ucykge1xuICBjaGVja09yaWdpbkZvclNldHRpbmdDb29raWUod2luLCBvcHRfb3B0aW9ucywgbmFtZSk7XG4gIGlmIChvcHRfb3B0aW9ucyAmJiBvcHRfb3B0aW9ucy5oaWdoZXN0QXZhaWxhYmxlRG9tYWluKSB7XG4gICAgY29uc3QgcGFydHMgPSB3aW4ubG9jYXRpb24uaG9zdG5hbWUuc3BsaXQoJy4nKTtcbiAgICBsZXQgZG9tYWluID0gcGFydHNbcGFydHMubGVuZ3RoIC0gMV07XG4gICAgZm9yIChsZXQgaSA9IHBhcnRzLmxlbmd0aCAtIDI7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBkb21haW4gPSBwYXJ0c1tpXSArICcuJyArIGRvbWFpbjtcbiAgICAgIHRyeVNldENvb2tpZSh3aW4sIG5hbWUsIHZhbHVlLCBleHBpcmF0aW9uVGltZSwgZG9tYWluKTtcbiAgICAgIGlmIChnZXRDb29raWUod2luLCBuYW1lKSA9PSB2YWx1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGxldCBkb21haW4gPSB1bmRlZmluZWQ7XG4gIGlmIChvcHRfb3B0aW9ucyAmJiBvcHRfb3B0aW9ucy5kb21haW4pIHtcbiAgICBkb21haW4gPSBvcHRfb3B0aW9ucy5kb21haW47XG4gIH1cbiAgdHJ5U2V0Q29va2llKHdpbiwgbmFtZSwgdmFsdWUsIGV4cGlyYXRpb25UaW1lLCBkb21haW4pO1xufVxuXG4vKipcbiAqIEF0dGVtcHQgdG8gc2V0IGEgY29va2llIHdpdGggdGhlIGdpdmVuIHBhcmFtcy5cbiAqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICogQHBhcmFtIHt0aW1lfSBleHBpcmF0aW9uVGltZVxuICogQHBhcmFtIHtzdHJpbmd8dW5kZWZpbmVkfSBkb21haW5cbiAqL1xuZnVuY3Rpb24gdHJ5U2V0Q29va2llKHdpbiwgbmFtZSwgdmFsdWUsIGV4cGlyYXRpb25UaW1lLCBkb21haW4pIHtcbiAgLy8gV2UgZG8gbm90IGFsbG93IHNldHRpbmcgY29va2llcyBvbiB0aGUgZG9tYWluIHRoYXQgY29udGFpbnMgYm90aFxuICAvLyB0aGUgY2RuLiBhbmQgd3d3LiBob3N0cy5cbiAgaWYgKGRvbWFpbiA9PSAnYW1wcHJvamVjdC5vcmcnKSB7XG4gICAgLy8gQWN0aXZlbHkgZGVsZXRlIHRoZW0uXG4gICAgdmFsdWUgPSAnZGVsZXRlJztcbiAgICBleHBpcmF0aW9uVGltZSA9IDA7XG4gIH1cbiAgY29uc3QgY29va2llID0gZW5jb2RlVVJJQ29tcG9uZW50KG5hbWUpICsgJz0nICtcbiAgICAgIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkgK1xuICAgICAgJzsgcGF0aD0vJyArXG4gICAgICAoZG9tYWluID8gJzsgZG9tYWluPScgKyBkb21haW4gOiAnJykgK1xuICAgICAgJzsgZXhwaXJlcz0nICsgbmV3IERhdGUoZXhwaXJhdGlvblRpbWUpLnRvVVRDU3RyaW5nKCk7XG4gIHRyeSB7XG4gICAgd2luLmRvY3VtZW50LmNvb2tpZSA9IGNvb2tpZTtcbiAgfSBjYXRjaCAoaWdub3JlKSB7XG4gICAgLy8gRG8gbm90IHRocm93IGlmIHNldHRpbmcgdGhlIGNvb2tpZSBmYWlsZWQgRXhjZXB0aW9ucyBjYW4gYmUgdGhyb3duXG4gICAgLy8gd2hlbiBBTVAgZG9jcyBhcmUgb3BlbmVkIG9uIG9yaWdpbnMgdGhhdCBkbyBub3QgYWxsb3cgc2V0dGluZ1xuICAgIC8vIGNvb2tpZXMgc3VjaCBhcyBudWxsIG9yaWdpbnMuXG4gIH1cbn1cblxuLyoqXG4gKiBUaHJvd3MgaWYgYSBnaXZlbiBjb29raWUgc2hvdWxkIG5vdCBiZSBzZXQgb24gdGhlIGdpdmVuIG9yaWdpbi5cbiAqIFRoaXMgaXMgYSBkZWZlbnNlLWluLWRlcHRoLiBDYWxsZXJzIHNob3VsZCBuZXZlciBydW4gaW50byB0aGlzLlxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0geyFPYmplY3R8dW5kZWZpbmVkfSBvcHRpb25zXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBGb3IgdGhlIGVycm9yIG1lc3NhZ2UuXG4gKi9cbmZ1bmN0aW9uIGNoZWNrT3JpZ2luRm9yU2V0dGluZ0Nvb2tpZSh3aW4sIG9wdGlvbnMsIG5hbWUpIHtcbiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5hbGxvd09uUHJveHlPcmlnaW4pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKGlzUHJveHlPcmlnaW4od2luLmxvY2F0aW9uLmhyZWYpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdTaG91bGQgbmV2ZXIgYXR0ZW1wdCB0byBzZXQgY29va2llIG9uIHByb3h5IG9yaWdpbjogJ1xuICAgICAgICArIG5hbWUpO1xuICB9XG5cbiAgY29uc3QgY3VycmVudCA9IHBhcnNlVXJsRGVwcmVjYXRlZCh3aW4ubG9jYXRpb24uaHJlZikuaG9zdG5hbWUudG9Mb3dlckNhc2UoKTtcbiAgY29uc3QgcHJveHkgPSBwYXJzZVVybERlcHJlY2F0ZWQodXJscy5jZG4pLmhvc3RuYW1lLnRvTG93ZXJDYXNlKCk7XG4gIGlmIChjdXJyZW50ID09IHByb3h5IHx8IGVuZHNXaXRoKGN1cnJlbnQsICcuJyArIHByb3h5KSkge1xuICAgIHRocm93IG5ldyBFcnJvcignU2hvdWxkIG5ldmVyIGF0dGVtcHQgdG8gc2V0IGNvb2tpZSBvbiBwcm94eSBvcmlnaW4uJ1xuICAgICAgICArICcgKGluIGRlcHRoIGNoZWNrKTogJyArIG5hbWUpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuXG4vKipcbiAqIFdoZXRoZXIgdGhlIGRvY3VtZW50IGlzIHJlYWR5LlxuICogQHBhcmFtIHshRG9jdW1lbnR9IGRvY1xuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRG9jdW1lbnRSZWFkeShkb2MpIHtcbiAgcmV0dXJuIGRvYy5yZWFkeVN0YXRlICE9ICdsb2FkaW5nJyAmJiBkb2MucmVhZHlTdGF0ZSAhPSAndW5pbml0aWFsaXplZCc7XG59XG5cbi8qKlxuICogV2hldGhlciB0aGUgZG9jdW1lbnQgaGFzIGxvYWRlZCBhbGwgdGhlIGNzcyBhbmQgc3ViLXJlc291cmNlcy5cbiAqIEBwYXJhbSB7IURvY3VtZW50fSBkb2NcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzRG9jdW1lbnRDb21wbGV0ZShkb2MpIHtcbiAgcmV0dXJuIGRvYy5yZWFkeVN0YXRlID09ICdjb21wbGV0ZSc7XG59XG5cbi8qKlxuICogQ2FsbHMgdGhlIGNhbGxiYWNrIHdoZW4gZG9jdW1lbnQgaXMgcmVhZHkuXG4gKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFEb2N1bWVudCl9IGNhbGxiYWNrXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvbkRvY3VtZW50UmVhZHkoZG9jLCBjYWxsYmFjaykge1xuICBvbkRvY3VtZW50U3RhdGUoZG9jLCBpc0RvY3VtZW50UmVhZHksIGNhbGxiYWNrKTtcbn1cblxuLyoqXG4gKiBDYWxscyB0aGUgY2FsbGJhY2sgd2hlbiBkb2N1bWVudCdzIHN0YXRlIHNhdGlzZmllcyB0aGUgc3RhdGVGbi5cbiAqIEBwYXJhbSB7IURvY3VtZW50fSBkb2NcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oIURvY3VtZW50KTpib29sZWFufSBzdGF0ZUZuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFEb2N1bWVudCl9IGNhbGxiYWNrXG4gKi9cbmZ1bmN0aW9uIG9uRG9jdW1lbnRTdGF0ZShkb2MsIHN0YXRlRm4sIGNhbGxiYWNrKSB7XG4gIGxldCByZWFkeSA9IHN0YXRlRm4oZG9jKTtcbiAgaWYgKHJlYWR5KSB7XG4gICAgY2FsbGJhY2soZG9jKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCByZWFkeUxpc3RlbmVyID0gKCkgPT4ge1xuICAgICAgaWYgKHN0YXRlRm4oZG9jKSkge1xuICAgICAgICBpZiAoIXJlYWR5KSB7XG4gICAgICAgICAgcmVhZHkgPSB0cnVlO1xuICAgICAgICAgIGNhbGxiYWNrKGRvYyk7XG4gICAgICAgIH1cbiAgICAgICAgZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3JlYWR5c3RhdGVjaGFuZ2UnLCByZWFkeUxpc3RlbmVyKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGRvYy5hZGRFdmVudExpc3RlbmVyKCdyZWFkeXN0YXRlY2hhbmdlJywgcmVhZHlMaXN0ZW5lcik7XG4gIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdoZW4gZG9jdW1lbnQgaXMgcmVhZHkuXG4gKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gKiBAcmV0dXJuIHshUHJvbWlzZTwhRG9jdW1lbnQ+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gd2hlbkRvY3VtZW50UmVhZHkoZG9jKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICBvbkRvY3VtZW50UmVhZHkoZG9jLCByZXNvbHZlKTtcbiAgfSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aGVuIGRvY3VtZW50IGlzIGNvbXBsZXRlLlxuICogQHBhcmFtIHshRG9jdW1lbnR9IGRvY1xuICogQHJldHVybiB7IVByb21pc2U8IURvY3VtZW50Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdoZW5Eb2N1bWVudENvbXBsZXRlKGRvYykge1xuICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgb25Eb2N1bWVudFN0YXRlKGRvYywgaXNEb2N1bWVudENvbXBsZXRlLCByZXNvbHZlKTtcbiAgfSk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtEZWZlcnJlZH0gZnJvbSAnLi91dGlscy9wcm9taXNlJztcbmltcG9ydCB7Y3NzRXNjYXBlfSBmcm9tICcuLi90aGlyZF9wYXJ0eS9jc3MtZXNjYXBlL2Nzcy1lc2NhcGUnO1xuaW1wb3J0IHtkZXZ9IGZyb20gJy4vbG9nJztcbmltcG9ydCB7ZGljdH0gZnJvbSAnLi91dGlscy9vYmplY3QnO1xuaW1wb3J0IHtzdGFydHNXaXRofSBmcm9tICcuL3N0cmluZyc7XG5pbXBvcnQge3RvV2lufSBmcm9tICcuL3R5cGVzJztcblxuY29uc3QgSFRNTF9FU0NBUEVfQ0hBUlMgPSB7XG4gICcmJzogJyZhbXA7JyxcbiAgJzwnOiAnJmx0OycsXG4gICc+JzogJyZndDsnLFxuICAnXCInOiAnJnF1b3Q7JyxcbiAgXCInXCI6ICcmI3gyNzsnLFxuICAnYCc6ICcmI3g2MDsnLFxufTtcbmNvbnN0IEhUTUxfRVNDQVBFX1JFR0VYID0gLygmfDx8PnxcInwnfGApL2c7XG5cbi8qKiBAY29uc3Qge3N0cmluZ30gKi9cbmV4cG9ydCBjb25zdCBVUEdSQURFX1RPX0NVU1RPTUVMRU1FTlRfUFJPTUlTRSA9XG4gICAgJ19fQU1QX1VQR19QUk0nO1xuXG4vKiogQGNvbnN0IHtzdHJpbmd9ICovXG5leHBvcnQgY29uc3QgVVBHUkFERV9UT19DVVNUT01FTEVNRU5UX1JFU09MVkVSID1cbiAgICAnX19BTVBfVVBHX1JFUyc7XG5cbi8qKlxuICogV2FpdHMgdW50aWwgdGhlIGNoaWxkIGVsZW1lbnQgaXMgY29uc3RydWN0ZWQuIE9uY2UgdGhlIGNoaWxkIGlzIGZvdW5kLCB0aGVcbiAqIGNhbGxiYWNrIGlzIGV4ZWN1dGVkLlxuICogQHBhcmFtIHshRWxlbWVudH0gcGFyZW50XG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFFbGVtZW50KTpib29sZWFufSBjaGVja0Z1bmNcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gY2FsbGJhY2tcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdhaXRGb3JDaGlsZChwYXJlbnQsIGNoZWNrRnVuYywgY2FsbGJhY2spIHtcbiAgaWYgKGNoZWNrRnVuYyhwYXJlbnQpKSB7XG4gICAgY2FsbGJhY2soKTtcbiAgICByZXR1cm47XG4gIH1cbiAgLyoqIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgY29uc3Qgd2luID0gdG9XaW4ocGFyZW50Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcpO1xuICBpZiAod2luLk11dGF0aW9uT2JzZXJ2ZXIpIHtcbiAgICAvKiogQGNvbnN0IHtNdXRhdGlvbk9ic2VydmVyfSAqL1xuICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IHdpbi5NdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcbiAgICAgIGlmIChjaGVja0Z1bmMocGFyZW50KSkge1xuICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZShwYXJlbnQsIHtjaGlsZExpc3Q6IHRydWV9KTtcbiAgfSBlbHNlIHtcbiAgICAvKiogQGNvbnN0IHtudW1iZXJ9ICovXG4gICAgY29uc3QgaW50ZXJ2YWwgPSB3aW4uc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgaWYgKGNoZWNrRnVuYyhwYXJlbnQpKSB7XG4gICAgICAgIHdpbi5jbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9LCAvKiBtaWxsaXNlY29uZHMgKi8gNSk7XG4gIH1cbn1cblxuLyoqXG4gKiBXYWl0cyB1bnRpbCB0aGUgY2hpbGQgZWxlbWVudCBpcyBjb25zdHJ1Y3RlZC4gT25jZSB0aGUgY2hpbGQgaXMgZm91bmQsIHRoZVxuICogcHJvbWlzZSBpcyByZXNvbHZlZC5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHBhcmVudFxuICogQHBhcmFtIHtmdW5jdGlvbighRWxlbWVudCk6Ym9vbGVhbn0gY2hlY2tGdW5jXG4gKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdhaXRGb3JDaGlsZFByb21pc2UocGFyZW50LCBjaGVja0Z1bmMpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgIHdhaXRGb3JDaGlsZChwYXJlbnQsIGNoZWNrRnVuYywgcmVzb2x2ZSk7XG4gIH0pO1xufVxuXG4vKipcbiAqIFdhaXRzIGZvciBkb2N1bWVudCdzIGJvZHkgdG8gYmUgYXZhaWxhYmxlLlxuICogV2lsbCBiZSBkZXByZWNhdGVkIHNvb247IHVzZSB7QGxpbmsgQW1wRG9jI3doZW5Cb2R5QXZhaWxhYmxlfSBvclxuICogQHtsaW5rIERvY3VtZW50U3RhdGUjb25Cb2R5QXZhaWxhYmxlfSBpbnN0ZWFkLlxuICogQHBhcmFtIHshRG9jdW1lbnR9IGRvY1xuICogQHBhcmFtIHtmdW5jdGlvbigpfSBjYWxsYmFja1xuICovXG5leHBvcnQgZnVuY3Rpb24gd2FpdEZvckJvZHkoZG9jLCBjYWxsYmFjaykge1xuICB3YWl0Rm9yQ2hpbGQoZG9jLmRvY3VtZW50RWxlbWVudCwgKCkgPT4gISFkb2MuYm9keSwgY2FsbGJhY2spO1xufVxuXG5cbi8qKlxuICogV2FpdHMgZm9yIGRvY3VtZW50J3MgYm9keSB0byBiZSBhdmFpbGFibGUuXG4gKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdhaXRGb3JCb2R5UHJvbWlzZShkb2MpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgIHdhaXRGb3JCb2R5KGRvYywgcmVzb2x2ZSk7XG4gIH0pO1xufVxuXG5cbi8qKlxuICogUmVtb3ZlcyB0aGUgZWxlbWVudC5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUVsZW1lbnQoZWxlbWVudCkge1xuICBpZiAoZWxlbWVudC5wYXJlbnRFbGVtZW50KSB7XG4gICAgZWxlbWVudC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQpO1xuICB9XG59XG5cblxuLyoqXG4gKiBSZW1vdmVzIGFsbCBjaGlsZCBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIGVsZW1lbnQuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBwYXJlbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUNoaWxkcmVuKHBhcmVudCkge1xuICB3aGlsZSAocGFyZW50LmZpcnN0Q2hpbGQpIHtcbiAgICBwYXJlbnQucmVtb3ZlQ2hpbGQocGFyZW50LmZpcnN0Q2hpbGQpO1xuICB9XG59XG5cblxuLyoqXG4gKiBDb3BpZXMgYWxsIGNoaWxkcmVuIG5vZGVzIG9mIGVsZW1lbnQgXCJmcm9tXCIgdG8gZWxlbWVudCBcInRvXCIuIENoaWxkIG5vZGVzXG4gKiBhcmUgZGVlcGx5IGNsb25lZC4gTm90aWNlLCB0aGF0IHRoaXMgbWV0aG9kIHNob3VsZCBiZSB1c2VkIHdpdGggY2FyZSBhbmRcbiAqIHByZWZlcmFibHkgb24gc21hbGxlciBzdWJ0cmVlcy5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGZyb21cbiAqIEBwYXJhbSB7IUVsZW1lbnR8IURvY3VtZW50RnJhZ21lbnR9IHRvXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb3B5Q2hpbGRyZW4oZnJvbSwgdG8pIHtcbiAgY29uc3QgZnJhZyA9IHRvLm93bmVyRG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICBmb3IgKGxldCBuID0gZnJvbS5maXJzdENoaWxkOyBuOyBuID0gbi5uZXh0U2libGluZykge1xuICAgIGZyYWcuYXBwZW5kQ2hpbGQobi5jbG9uZU5vZGUodHJ1ZSkpO1xuICB9XG4gIHRvLmFwcGVuZENoaWxkKGZyYWcpO1xufVxuXG4vKipcbiAqIEluc2VydCB0aGUgZWxlbWVudCBpbiB0aGUgcm9vdCBhZnRlciB0aGUgZWxlbWVudCBuYW1lZCBhZnRlciBvclxuICogaWYgdGhhdCBpcyBudWxsIGF0IHRoZSBiZWdpbm5pbmcuXG4gKiBAcGFyYW0geyFFbGVtZW50fCFTaGFkb3dSb290fSByb290XG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0gez9Ob2RlfSBhZnRlclxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zZXJ0QWZ0ZXJPckF0U3RhcnQocm9vdCwgZWxlbWVudCwgYWZ0ZXIpIHtcbiAgY29uc3QgYmVmb3JlID0gYWZ0ZXIgPyBhZnRlci5uZXh0U2libGluZyA6IHJvb3QuZmlyc3RDaGlsZDtcbiAgcm9vdC5pbnNlcnRCZWZvcmUoZWxlbWVudCwgYmVmb3JlKTtcbn1cblxuLyoqXG4gKiBBZGQgYXR0cmlidXRlcyB0byBhbiBlbGVtZW50LlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHshSnNvbk9iamVjdDxzdHJpbmcsIHN0cmluZz59IGF0dHJpYnV0ZXNcbiAqIEByZXR1cm4geyFFbGVtZW50fSBjcmVhdGVkIGVsZW1lbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZEF0dHJpYnV0ZXNUb0VsZW1lbnQoZWxlbWVudCwgYXR0cmlidXRlcykge1xuICBmb3IgKGNvbnN0IGF0dHIgaW4gYXR0cmlidXRlcykge1xuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKGF0dHIsIGF0dHJpYnV0ZXNbYXR0cl0pO1xuICB9XG4gIHJldHVybiBlbGVtZW50O1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIG5ldyBlbGVtZW50IG9uIGRvY3VtZW50IHdpdGggc3BlY2lmaWVkIHRhZ05hbWUgYW5kIGF0dHJpYnV0ZXMuXG4gKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gKiBAcGFyYW0ge3N0cmluZ30gdGFnTmFtZVxuICogQHBhcmFtIHshSnNvbk9iamVjdDxzdHJpbmcsIHN0cmluZz59IGF0dHJpYnV0ZXNcbiAqIEByZXR1cm4geyFFbGVtZW50fSBjcmVhdGVkIGVsZW1lbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRXaXRoQXR0cmlidXRlcyhkb2MsIHRhZ05hbWUsIGF0dHJpYnV0ZXMpIHtcbiAgY29uc3QgZWxlbWVudCA9IGRvYy5jcmVhdGVFbGVtZW50KHRhZ05hbWUpO1xuICByZXR1cm4gYWRkQXR0cmlidXRlc1RvRWxlbWVudChlbGVtZW50LCBhdHRyaWJ1dGVzKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgbm9kZSBpcyBjb25uZWN0ZWQgKGF0dGFjaGVkKS5cbiAqIEBwYXJhbSB7IU5vZGV9IG5vZGVcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiBAc2VlIGh0dHBzOi8vZG9tLnNwZWMud2hhdHdnLm9yZy8jY29ubmVjdGVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Nvbm5lY3RlZE5vZGUobm9kZSkge1xuICBjb25zdCBjb25uZWN0ZWQgPSBub2RlLmlzQ29ubmVjdGVkO1xuICBpZiAoY29ubmVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gY29ubmVjdGVkO1xuICB9XG5cbiAgLy8gXCJBbiBlbGVtZW50IGlzIGNvbm5lY3RlZCBpZiBpdHMgc2hhZG93LWluY2x1ZGluZyByb290IGlzIGEgZG9jdW1lbnQuXCJcbiAgbGV0IG4gPSBub2RlO1xuICBkbyB7XG4gICAgbiA9IHJvb3ROb2RlRm9yKG4pO1xuICAgIGlmIChuLmhvc3QpIHtcbiAgICAgIG4gPSBuLmhvc3Q7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfSB3aGlsZSAodHJ1ZSk7XG4gIHJldHVybiBuLm5vZGVUeXBlID09PSBOb2RlLkRPQ1VNRU5UX05PREU7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgcm9vdCBmb3IgYSBnaXZlbiBub2RlLiBEb2VzIG5vdCBjcm9zcyBzaGFkb3cgRE9NIGJvdW5kYXJ5LlxuICogQHBhcmFtIHshTm9kZX0gbm9kZVxuICogQHJldHVybiB7IU5vZGV9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByb290Tm9kZUZvcihub2RlKSB7XG4gIGlmIChOb2RlLnByb3RvdHlwZS5nZXRSb290Tm9kZSkge1xuICAgIC8vIFR5cGUgY2hlY2tlciBzYXlzIGBnZXRSb290Tm9kZWAgbWF5IHJldHVybiBudWxsLlxuICAgIHJldHVybiBub2RlLmdldFJvb3ROb2RlKCkgfHwgbm9kZTtcbiAgfVxuICBsZXQgbjtcbiAgZm9yIChuID0gbm9kZTsgISFuLnBhcmVudE5vZGU7IG4gPSBuLnBhcmVudE5vZGUpIHt9XG4gIHJldHVybiBuO1xufVxuXG4vKipcbiAqIEZpbmRzIHRoZSBjbG9zZXN0IGVsZW1lbnQgdGhhdCBzYXRpc2ZpZXMgdGhlIGNhbGxiYWNrIGZyb20gdGhpcyBlbGVtZW50XG4gKiB1cCB0aGUgRE9NIHN1YnRyZWUuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFFbGVtZW50KTpib29sZWFufSBjYWxsYmFja1xuICogQHBhcmFtIHtFbGVtZW50PX0gb3B0X3N0b3BBdCBvcHRpb25hbCBlbGVtbnQgdG8gc3RvcCB0aGUgc2VhcmNoIGF0LlxuICogQHJldHVybiB7P0VsZW1lbnR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9zZXN0KGVsZW1lbnQsIGNhbGxiYWNrLCBvcHRfc3RvcEF0KSB7XG4gIGZvciAobGV0IGVsID0gZWxlbWVudDsgZWwgJiYgZWwgIT09IG9wdF9zdG9wQXQ7IGVsID0gZWwucGFyZW50RWxlbWVudCkge1xuICAgIGlmIChjYWxsYmFjayhlbCkpIHtcbiAgICAgIHJldHVybiBlbDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cblxuLyoqXG4gKiBGaW5kcyB0aGUgY2xvc2VzdCBub2RlIHRoYXQgc2F0aXNmaWVzIHRoZSBjYWxsYmFjayBmcm9tIHRoaXMgbm9kZVxuICogdXAgdGhlIERPTSBzdWJ0cmVlLlxuICogQHBhcmFtIHshTm9kZX0gbm9kZVxuICogQHBhcmFtIHtmdW5jdGlvbighTm9kZSk6Ym9vbGVhbn0gY2FsbGJhY2tcbiAqIEByZXR1cm4gez9Ob2RlfVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VzdE5vZGUobm9kZSwgY2FsbGJhY2spIHtcbiAgZm9yIChsZXQgbiA9IG5vZGU7IG47IG4gPSBuLnBhcmVudE5vZGUpIHtcbiAgICBpZiAoY2FsbGJhY2sobikpIHtcbiAgICAgIHJldHVybiBuO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuXG4vKipcbiAqIEZpbmRzIHRoZSBjbG9zZXN0IGVsZW1lbnQgd2l0aCB0aGUgc3BlY2lmaWVkIG5hbWUgZnJvbSB0aGlzIGVsZW1lbnRcbiAqIHVwIHRoZSBET00gc3VidHJlZS5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSB0YWdOYW1lXG4gKiBAcmV0dXJuIHs/RWxlbWVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb3Nlc3RCeVRhZyhlbGVtZW50LCB0YWdOYW1lKSB7XG4gIGlmIChlbGVtZW50LmNsb3Nlc3QpIHtcbiAgICByZXR1cm4gZWxlbWVudC5jbG9zZXN0KHRhZ05hbWUpO1xuICB9XG4gIHRhZ05hbWUgPSB0YWdOYW1lLnRvVXBwZXJDYXNlKCk7XG4gIHJldHVybiBjbG9zZXN0KGVsZW1lbnQsIGVsID0+IHtcbiAgICByZXR1cm4gZWwudGFnTmFtZSA9PSB0YWdOYW1lO1xuICB9KTtcbn1cblxuLyoqXG4gKiBGaW5kcyB0aGUgY2xvc2VzdCBlbGVtZW50IHdpdGggdGhlIHNwZWNpZmllZCBzZWxlY3RvciBmcm9tIHRoaXMgZWxlbWVudFxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IHNlbGVjdG9yXG4gKiBAcmV0dXJuIHs/RWxlbWVudH0gY2xvc2VzdCBhbmNlc3RvciBpZiBmb3VuZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb3Nlc3RCeVNlbGVjdG9yKGVsZW1lbnQsIHNlbGVjdG9yKSB7XG4gIGlmIChlbGVtZW50LmNsb3Nlc3QpIHtcbiAgICByZXR1cm4gZWxlbWVudC5jbG9zZXN0KHNlbGVjdG9yKTtcbiAgfVxuXG4gIHJldHVybiBjbG9zZXN0KGVsZW1lbnQsIGVsID0+IHtcbiAgICByZXR1cm4gbWF0Y2hlcyhlbCwgc2VsZWN0b3IpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIGdpdmVuIGVsZW1lbnQgbWF0Y2hlcyB0aGUgc2VsZWN0b3JcbiAqIEBwYXJhbSAgeyFFbGVtZW50fSBlbCBUaGUgZWxlbWVudCB0byB2ZXJpZnlcbiAqIEBwYXJhbSAge3N0cmluZ30gc2VsZWN0b3IgVGhlIHNlbGVjdG9yIHRvIGNoZWNrIGFnYWluc3RcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGVsZW1lbnQgbWF0Y2hlZCB0aGUgc2VsZWN0b3IuIEZhbHNlIG90aGVyd2lzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoZXMoZWwsIHNlbGVjdG9yKSB7XG4gIGNvbnN0IG1hdGNoZXIgPSBlbC5tYXRjaGVzIHx8XG4gICAgICBlbC53ZWJraXRNYXRjaGVzU2VsZWN0b3IgfHxcbiAgICAgIGVsLm1vek1hdGNoZXNTZWxlY3RvciB8fFxuICAgICAgZWwubXNNYXRjaGVzU2VsZWN0b3IgfHxcbiAgICAgIGVsLm9NYXRjaGVzU2VsZWN0b3I7XG4gIGlmIChtYXRjaGVyKSB7XG4gICAgcmV0dXJuIG1hdGNoZXIuY2FsbChlbCwgc2VsZWN0b3IpO1xuICB9XG4gIHJldHVybiBmYWxzZTsgLy8gSUU4IGFsd2F5cyByZXR1cm5zIGZhbHNlLlxufVxuXG4vKipcbiAqIEZpbmRzIHRoZSBmaXJzdCBkZXNjZW5kYW50IGVsZW1lbnQgd2l0aCB0aGUgc3BlY2lmaWVkIG5hbWUuXG4gKiBAcGFyYW0geyFFbGVtZW50fCFEb2N1bWVudHwhU2hhZG93Um9vdH0gZWxlbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IHRhZ05hbWVcbiAqIEByZXR1cm4gez9FbGVtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZWxlbWVudEJ5VGFnKGVsZW1lbnQsIHRhZ05hbWUpIHtcbiAgbGV0IGVsZW1lbnRzO1xuICAvLyBnZXRFbGVtZW50c0J5VGFnTmFtZSgpIGlzIG5vdCBzdXBwb3J0ZWQgb24gU2hhZG93Um9vdC5cbiAgaWYgKHR5cGVvZiBlbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lID09PSAnZnVuY3Rpb24nKSB7XG4gICAgZWxlbWVudHMgPSBlbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKHRhZ05hbWUpO1xuICB9IGVsc2Uge1xuICAgIGVsZW1lbnRzID0gZWxlbWVudC4vKk9LKi9xdWVyeVNlbGVjdG9yQWxsKHRhZ05hbWUpO1xuICB9XG4gIHJldHVybiAoZWxlbWVudHMgJiYgZWxlbWVudHNbMF0pIHx8IG51bGw7XG59XG5cblxuLyoqXG4gKiBGaW5kcyB0aGUgZmlyc3QgY2hpbGQgZWxlbWVudCB0aGF0IHNhdGlzZmllcyB0aGUgY2FsbGJhY2suXG4gKiBAcGFyYW0geyFFbGVtZW50fSBwYXJlbnRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oIUVsZW1lbnQpOmJvb2xlYW59IGNhbGxiYWNrXG4gKiBAcmV0dXJuIHs/RWxlbWVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNoaWxkRWxlbWVudChwYXJlbnQsIGNhbGxiYWNrKSB7XG4gIGZvciAobGV0IGNoaWxkID0gcGFyZW50LmZpcnN0RWxlbWVudENoaWxkOyBjaGlsZDtcbiAgICBjaGlsZCA9IGNoaWxkLm5leHRFbGVtZW50U2libGluZykge1xuICAgIGlmIChjYWxsYmFjayhjaGlsZCkpIHtcbiAgICAgIHJldHVybiBjaGlsZDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cblxuLyoqXG4gKiBGaW5kcyBhbGwgY2hpbGQgZWxlbWVudHMgdGhhdCBzYXRpc2Z5IHRoZSBjYWxsYmFjay5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHBhcmVudFxuICogQHBhcmFtIHtmdW5jdGlvbighRWxlbWVudCk6Ym9vbGVhbn0gY2FsbGJhY2tcbiAqIEByZXR1cm4geyFBcnJheTwhRWxlbWVudD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjaGlsZEVsZW1lbnRzKHBhcmVudCwgY2FsbGJhY2spIHtcbiAgY29uc3QgY2hpbGRyZW4gPSBbXTtcbiAgZm9yIChsZXQgY2hpbGQgPSBwYXJlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7IGNoaWxkO1xuICAgIGNoaWxkID0gY2hpbGQubmV4dEVsZW1lbnRTaWJsaW5nKSB7XG4gICAgaWYgKGNhbGxiYWNrKGNoaWxkKSkge1xuICAgICAgY2hpbGRyZW4ucHVzaChjaGlsZCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBjaGlsZHJlbjtcbn1cblxuXG4vKipcbiAqIEZpbmRzIHRoZSBsYXN0IGNoaWxkIGVsZW1lbnQgdGhhdCBzYXRpc2ZpZXMgdGhlIGNhbGxiYWNrLlxuICogQHBhcmFtIHshRWxlbWVudH0gcGFyZW50XG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFFbGVtZW50KTpib29sZWFufSBjYWxsYmFja1xuICogQHJldHVybiB7P0VsZW1lbnR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsYXN0Q2hpbGRFbGVtZW50KHBhcmVudCwgY2FsbGJhY2spIHtcbiAgZm9yIChsZXQgY2hpbGQgPSBwYXJlbnQubGFzdEVsZW1lbnRDaGlsZDsgY2hpbGQ7XG4gICAgY2hpbGQgPSBjaGlsZC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nKSB7XG4gICAgaWYgKGNhbGxiYWNrKGNoaWxkKSkge1xuICAgICAgcmV0dXJuIGNoaWxkO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBGaW5kcyBhbGwgY2hpbGQgbm9kZXMgdGhhdCBzYXRpc2Z5IHRoZSBjYWxsYmFjay5cbiAqIFRoZXNlIG5vZGVzIGNhbiBpbmNsdWRlIFRleHQsIENvbW1lbnQgYW5kIG90aGVyIGNoaWxkIG5vZGVzLlxuICogQHBhcmFtIHshTm9kZX0gcGFyZW50XG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFOb2RlKTpib29sZWFufSBjYWxsYmFja1xuICogQHJldHVybiB7IUFycmF5PCFOb2RlPn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNoaWxkTm9kZXMocGFyZW50LCBjYWxsYmFjaykge1xuICBjb25zdCBub2RlcyA9IFtdO1xuICBmb3IgKGxldCBjaGlsZCA9IHBhcmVudC5maXJzdENoaWxkOyBjaGlsZDtcbiAgICBjaGlsZCA9IGNoaWxkLm5leHRTaWJsaW5nKSB7XG4gICAgaWYgKGNhbGxiYWNrKGNoaWxkKSkge1xuICAgICAgbm9kZXMucHVzaChjaGlsZCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBub2Rlcztcbn1cblxuLyoqXG4gKiBAdHlwZSB7Ym9vbGVhbnx1bmRlZmluZWR9XG4gKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAqL1xubGV0IHNjb3BlU2VsZWN0b3JTdXBwb3J0ZWQ7XG5cbi8qKlxuICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gdmFsXG4gKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldFNjb3BlU2VsZWN0b3JTdXBwb3J0ZWRGb3JUZXN0aW5nKHZhbCkge1xuICBzY29wZVNlbGVjdG9yU3VwcG9ydGVkID0gdmFsO1xufVxuXG4vKipcbiAqIFRlc3QgdGhhdCB0aGUgOnNjb3BlIHNlbGVjdG9yIGlzIHN1cHBvcnRlZCBhbmQgYmVoYXZlcyBjb3JyZWN0bHkuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBwYXJlbnRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzU2NvcGVTZWxlY3RvclN1cHBvcnRlZChwYXJlbnQpIHtcbiAgY29uc3QgZG9jID0gcGFyZW50Lm93bmVyRG9jdW1lbnQ7XG4gIHRyeSB7XG4gICAgY29uc3QgdGVzdEVsZW1lbnQgPSBkb2MuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29uc3QgdGVzdENoaWxkID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRlc3RFbGVtZW50LmFwcGVuZENoaWxkKHRlc3RDaGlsZCk7XG4gICAgLy8gTk9URShjdmlhbGl6LCAjMTIzODMpOiBGaXJlZm94J3MgaW1wbGVtZW50YXRpb24gaXMgaW5jb21wbGV0ZSxcbiAgICAvLyB0aGVyZWZvcmUgd2UgdGVzdCBhY3R1YWwgZnVuY3Rpb25hbGl0eSBvZmA6c2NvcGVgIGFzIHdlbGwuXG4gICAgcmV0dXJuIHRlc3RFbGVtZW50Li8qT0sqL3F1ZXJ5U2VsZWN0b3IoJzpzY29wZSBkaXYnKSA9PT0gdGVzdENoaWxkO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8qKlxuICogRmluZHMgdGhlIGZpcnN0IGNoaWxkIGVsZW1lbnQgdGhhdCBoYXMgdGhlIHNwZWNpZmllZCBhdHRyaWJ1dGUuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBwYXJlbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyXG4gKiBAcmV0dXJuIHs/RWxlbWVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNoaWxkRWxlbWVudEJ5QXR0cihwYXJlbnQsIGF0dHIpIHtcbiAgcmV0dXJuIHNjb3BlZFF1ZXJ5U2VsZWN0b3IvKk9LKi8ocGFyZW50LCBgPiBbJHthdHRyfV1gKTtcbn1cblxuXG4vKipcbiAqIEZpbmRzIHRoZSBsYXN0IGNoaWxkIGVsZW1lbnQgdGhhdCBoYXMgdGhlIHNwZWNpZmllZCBhdHRyaWJ1dGUuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBwYXJlbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyXG4gKiBAcmV0dXJuIHs/RWxlbWVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxhc3RDaGlsZEVsZW1lbnRCeUF0dHIocGFyZW50LCBhdHRyKSB7XG4gIHJldHVybiBsYXN0Q2hpbGRFbGVtZW50KHBhcmVudCwgZWwgPT4ge1xuICAgIHJldHVybiBlbC5oYXNBdHRyaWJ1dGUoYXR0cik7XG4gIH0pO1xufVxuXG5cbi8qKlxuICogRmluZHMgYWxsIGNoaWxkIGVsZW1lbnRzIHRoYXQgaGFzIHRoZSBzcGVjaWZpZWQgYXR0cmlidXRlLlxuICogQHBhcmFtIHshRWxlbWVudH0gcGFyZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gYXR0clxuICogQHJldHVybiB7IU5vZGVMaXN0PCFFbGVtZW50Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNoaWxkRWxlbWVudHNCeUF0dHIocGFyZW50LCBhdHRyKSB7XG4gIHJldHVybiBzY29wZWRRdWVyeVNlbGVjdG9yQWxsLypPSyovKHBhcmVudCwgYD4gWyR7YXR0cn1dYCk7XG59XG5cblxuLyoqXG4gKiBGaW5kcyB0aGUgZmlyc3QgY2hpbGQgZWxlbWVudCB0aGF0IGhhcyB0aGUgc3BlY2lmaWVkIHRhZyBuYW1lLlxuICogQHBhcmFtIHshRWxlbWVudH0gcGFyZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gdGFnTmFtZVxuICogQHJldHVybiB7P0VsZW1lbnR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjaGlsZEVsZW1lbnRCeVRhZyhwYXJlbnQsIHRhZ05hbWUpIHtcbiAgcmV0dXJuIHNjb3BlZFF1ZXJ5U2VsZWN0b3IvKk9LKi8ocGFyZW50LCBgPiAke3RhZ05hbWV9YCk7XG59XG5cblxuLyoqXG4gKiBGaW5kcyBhbGwgY2hpbGQgZWxlbWVudHMgd2l0aCB0aGUgc3BlY2lmaWVkIHRhZyBuYW1lLlxuICogQHBhcmFtIHshRWxlbWVudH0gcGFyZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gdGFnTmFtZVxuICogQHJldHVybiB7IU5vZGVMaXN0PCFFbGVtZW50Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNoaWxkRWxlbWVudHNCeVRhZyhwYXJlbnQsIHRhZ05hbWUpIHtcbiAgcmV0dXJuIHNjb3BlZFF1ZXJ5U2VsZWN0b3JBbGwvKk9LKi8ocGFyZW50LCBgPiAke3RhZ05hbWV9YCk7XG59XG5cblxuLyoqXG4gKiBGaW5kcyB0aGUgZmlyc3QgZWxlbWVudCB0aGF0IG1hdGNoZXMgYHNlbGVjdG9yYCwgc2NvcGVkIGluc2lkZSBgcm9vdGAuXG4gKiBOb3RlOiBpbiBJRSwgdGhpcyBjYXVzZXMgYSBxdWljayBtdXRhdGlvbiBvZiB0aGUgZWxlbWVudCdzIGNsYXNzIGxpc3QuXG4gKiBAcGFyYW0geyFFbGVtZW50fSByb290XG4gKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3JcbiAqIEByZXR1cm4gez9FbGVtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NvcGVkUXVlcnlTZWxlY3Rvcihyb290LCBzZWxlY3Rvcikge1xuICBpZiAoc2NvcGVTZWxlY3RvclN1cHBvcnRlZCA9PSBudWxsKSB7XG4gICAgc2NvcGVTZWxlY3RvclN1cHBvcnRlZCA9IGlzU2NvcGVTZWxlY3RvclN1cHBvcnRlZChyb290KTtcbiAgfVxuICBpZiAoc2NvcGVTZWxlY3RvclN1cHBvcnRlZCkge1xuICAgIHJldHVybiByb290Li8qT0sqL3F1ZXJ5U2VsZWN0b3IoYDpzY29wZSAke3NlbGVjdG9yfWApO1xuICB9XG5cbiAgLy8gT25seSBJRS5cbiAgY29uc3QgdW5pcXVlID0gJ2ktYW1waHRtbC1zY29wZWQnO1xuICByb290LmNsYXNzTGlzdC5hZGQodW5pcXVlKTtcbiAgY29uc3QgZWxlbWVudCA9IHJvb3QuLypPSyovcXVlcnlTZWxlY3RvcihgLiR7dW5pcXVlfSAke3NlbGVjdG9yfWApO1xuICByb290LmNsYXNzTGlzdC5yZW1vdmUodW5pcXVlKTtcbiAgcmV0dXJuIGVsZW1lbnQ7XG59XG5cblxuLyoqXG4gKiBGaW5kcyB0aGUgZXZlcnkgZWxlbWVudCB0aGF0IG1hdGNoZXMgYHNlbGVjdG9yYCwgc2NvcGVkIGluc2lkZSBgcm9vdGAuXG4gKiBOb3RlOiBpbiBJRSwgdGhpcyBjYXVzZXMgYSBxdWljayBtdXRhdGlvbiBvZiB0aGUgZWxlbWVudCdzIGNsYXNzIGxpc3QuXG4gKiBAcGFyYW0geyFFbGVtZW50fSByb290XG4gKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3JcbiAqIEByZXR1cm4geyFOb2RlTGlzdDwhRWxlbWVudD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzY29wZWRRdWVyeVNlbGVjdG9yQWxsKHJvb3QsIHNlbGVjdG9yKSB7XG4gIGlmIChzY29wZVNlbGVjdG9yU3VwcG9ydGVkID09IG51bGwpIHtcbiAgICBzY29wZVNlbGVjdG9yU3VwcG9ydGVkID0gaXNTY29wZVNlbGVjdG9yU3VwcG9ydGVkKHJvb3QpO1xuICB9XG4gIGlmIChzY29wZVNlbGVjdG9yU3VwcG9ydGVkKSB7XG4gICAgcmV0dXJuIHJvb3QuLypPSyovcXVlcnlTZWxlY3RvckFsbChgOnNjb3BlICR7c2VsZWN0b3J9YCk7XG4gIH1cblxuICAvLyBPbmx5IElFLlxuICBjb25zdCB1bmlxdWUgPSAnaS1hbXBodG1sLXNjb3BlZCc7XG4gIHJvb3QuY2xhc3NMaXN0LmFkZCh1bmlxdWUpO1xuICBjb25zdCBlbGVtZW50cyA9IHJvb3QuLypPSyovcXVlcnlTZWxlY3RvckFsbChgLiR7dW5pcXVlfSAke3NlbGVjdG9yfWApO1xuICByb290LmNsYXNzTGlzdC5yZW1vdmUodW5pcXVlKTtcbiAgcmV0dXJuIGVsZW1lbnRzO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyBlbGVtZW50IGRhdGEtcGFyYW0tIGF0dHJpYnV0ZXMgYXMgdXJsIHBhcmFtZXRlcnMga2V5LXZhbHVlIHBhaXJzLlxuICogZS5nLiBkYXRhLXBhcmFtLXNvbWUtYXR0cj12YWx1ZSAtPiB7c29tZUF0dHI6IHZhbHVlfS5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oc3RyaW5nKTpzdHJpbmc9fSBvcHRfY29tcHV0ZVBhcmFtTmFtZUZ1bmMgdG8gY29tcHV0ZSB0aGVcbiAqICAgIHBhcmFtZXRlciBuYW1lLCBnZXQgcGFzc2VkIHRoZSBjYW1lbC1jYXNlIHBhcmFtZXRlciBuYW1lLlxuICogQHBhcmFtIHshUmVnRXhwPX0gb3B0X3BhcmFtUGF0dGVybiBSZWdleCBwYXR0ZXJuIHRvIG1hdGNoIGRhdGEgYXR0cmlidXRlcy5cbiAqIEByZXR1cm4geyFKc29uT2JqZWN0fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGF0YVBhcmFtc0Zyb21BdHRyaWJ1dGVzKGVsZW1lbnQsIG9wdF9jb21wdXRlUGFyYW1OYW1lRnVuYyxcbiAgb3B0X3BhcmFtUGF0dGVybikge1xuICBjb25zdCBjb21wdXRlUGFyYW1OYW1lRnVuYyA9IG9wdF9jb21wdXRlUGFyYW1OYW1lRnVuYyB8fCAoa2V5ID0+IGtleSk7XG4gIGNvbnN0IHtkYXRhc2V0fSA9IGVsZW1lbnQ7XG4gIGNvbnN0IHBhcmFtcyA9IGRpY3QoKTtcbiAgY29uc3QgcGFyYW1QYXR0ZXJuID0gb3B0X3BhcmFtUGF0dGVybiA/IG9wdF9wYXJhbVBhdHRlcm4gOiAvXnBhcmFtKC4rKS87XG4gIGZvciAoY29uc3Qga2V5IGluIGRhdGFzZXQpIHtcbiAgICBjb25zdCBtYXRjaGVzID0ga2V5Lm1hdGNoKHBhcmFtUGF0dGVybik7XG4gICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgIGNvbnN0IHBhcmFtID0gbWF0Y2hlc1sxXVswXS50b0xvd2VyQ2FzZSgpICsgbWF0Y2hlc1sxXS5zdWJzdHIoMSk7XG4gICAgICBwYXJhbXNbY29tcHV0ZVBhcmFtTmFtZUZ1bmMocGFyYW0pXSA9IGRhdGFzZXRba2V5XTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHBhcmFtcztcbn1cblxuLyoqXG4gKiBXaGV0aGVyIHRoZSBlbGVtZW50IGhhdmUgYSBuZXh0IG5vZGUgaW4gdGhlIGRvY3VtZW50IG9yZGVyLlxuICogVGhpcyBtZWFucyBlaXRoZXI6XG4gKiAgYS4gVGhlIGVsZW1lbnQgaXRzZWxmIGhhcyBhIG5leHRTaWJsaW5nLlxuICogIGIuIEFueSBvZiB0aGUgZWxlbWVudCBhbmNlc3RvcnMgaGFzIGEgbmV4dFNpYmxpbmcuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0gez9Ob2RlfSBvcHRfc3RvcE5vZGVcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNOZXh0Tm9kZUluRG9jdW1lbnRPcmRlcihlbGVtZW50LCBvcHRfc3RvcE5vZGUpIHtcbiAgbGV0IGN1cnJlbnRFbGVtZW50ID0gZWxlbWVudDtcbiAgZG8ge1xuICAgIGlmIChjdXJyZW50RWxlbWVudC5uZXh0U2libGluZykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9IHdoaWxlICgoY3VycmVudEVsZW1lbnQgPSBjdXJyZW50RWxlbWVudC5wYXJlbnROb2RlKSAmJlxuICAgICAgICAgICAgY3VycmVudEVsZW1lbnQgIT0gb3B0X3N0b3BOb2RlKTtcbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5cbi8qKlxuICogRmluZHMgYWxsIGFuY2VzdG9yIGVsZW1lbnRzIHRoYXQgc2F0aXNmeSBwcmVkaWNhdGUuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBjaGlsZFxuICogQHBhcmFtIHtmdW5jdGlvbighRWxlbWVudCk6Ym9vbGVhbn0gcHJlZGljYXRlXG4gKiBAcmV0dXJuIHshQXJyYXk8IUVsZW1lbnQ+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gYW5jZXN0b3JFbGVtZW50cyhjaGlsZCwgcHJlZGljYXRlKSB7XG4gIGNvbnN0IGFuY2VzdG9ycyA9IFtdO1xuICBmb3IgKGxldCBhbmNlc3RvciA9IGNoaWxkLnBhcmVudEVsZW1lbnQ7IGFuY2VzdG9yO1xuICAgIGFuY2VzdG9yID0gYW5jZXN0b3IucGFyZW50RWxlbWVudCkge1xuICAgIGlmIChwcmVkaWNhdGUoYW5jZXN0b3IpKSB7XG4gICAgICBhbmNlc3RvcnMucHVzaChhbmNlc3Rvcik7XG4gICAgfVxuICB9XG4gIHJldHVybiBhbmNlc3RvcnM7XG59XG5cblxuLyoqXG4gKiBGaW5kcyBhbGwgYW5jZXN0b3IgZWxlbWVudHMgdGhhdCBoYXMgdGhlIHNwZWNpZmllZCB0YWcgbmFtZS5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGNoaWxkXG4gKiBAcGFyYW0ge3N0cmluZ30gdGFnTmFtZVxuICogQHJldHVybiB7IUFycmF5PCFFbGVtZW50Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFuY2VzdG9yRWxlbWVudHNCeVRhZyhjaGlsZCwgdGFnTmFtZSkge1xuICB0YWdOYW1lID0gdGFnTmFtZS50b1VwcGVyQ2FzZSgpO1xuICByZXR1cm4gYW5jZXN0b3JFbGVtZW50cyhjaGlsZCwgZWwgPT4ge1xuICAgIHJldHVybiBlbC50YWdOYW1lID09IHRhZ05hbWU7XG4gIH0pO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBjbG9uZSBvZiB0aGUgY29udGVudCBvZiBhIHRlbXBsYXRlIGVsZW1lbnQuXG4gKlxuICogUG9seWZpbGwgdG8gcmVwbGFjZSAuY29udGVudCBhY2Nlc3MgZm9yIGJyb3dzZXJzIHRoYXQgZG8gbm90IHN1cHBvcnRcbiAqIEhUTUxUZW1wbGF0ZUVsZW1lbnRzIG5hdGl2ZWx5LlxuICpcbiAqIEBwYXJhbSB7IUhUTUxUZW1wbGF0ZUVsZW1lbnR8IUVsZW1lbnR9IHRlbXBsYXRlXG4gKiBAcmV0dXJuIHshRG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRlbXBsYXRlQ29udGVudENsb25lKHRlbXBsYXRlKSB7XG4gIGlmICgnY29udGVudCcgaW4gdGVtcGxhdGUpIHtcbiAgICByZXR1cm4gdGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgY29udGVudCA9IHRlbXBsYXRlLm93bmVyRG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIGNvcHlDaGlsZHJlbih0ZW1wbGF0ZSwgY29udGVudCk7XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cbn1cblxuLyoqXG4gKiBJdGVyYXRlIG92ZXIgYW4gYXJyYXktbGlrZS4gU29tZSBjb2xsZWN0aW9ucyBsaWtlIE5vZGVMaXN0IGFyZVxuICogbGF6aWx5IGV2YWx1YXRlZCBpbiBzb21lIGJyb3dzZXJzLCBhbmQgYWNjZXNzaW5nIGBsZW5ndGhgIGZvcmNlcyBmdWxsXG4gKiBldmFsdWF0aW9uLiBXZSBjYW4gaW1wcm92ZSBwZXJmb3JtYW5jZSBieSBpdGVyYXRpbmcgdW50aWwgYW4gZWxlbWVudCBpc1xuICogYHVuZGVmaW5lZGAgdG8gYXZvaWQgY2hlY2tpbmcgdGhlIGBsZW5ndGhgIHByb3BlcnR5LlxuICogVGVzdCBjYXNlczogaHR0cHM6Ly9qc3BlcmYuY29tL2l0ZXJhdGluZy1vdmVyLWNvbGxlY3Rpb25zLW9mLWVsZW1lbnRzXG4gKiBAcGFyYW0geyFJQXJyYXlMaWtlPFQ+fSBpdGVyYWJsZVxuICogQHBhcmFtIHtmdW5jdGlvbihULCBudW1iZXIpfSBjYlxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGl0ZXJhdGVDdXJzb3IoaXRlcmFibGUsIGNiKSB7XG4gIGZvciAobGV0IGkgPSAwLCB2YWx1ZTsgKHZhbHVlID0gaXRlcmFibGVbaV0pICE9PSB1bmRlZmluZWQ7IGkrKykge1xuICAgIGNiKHZhbHVlLCBpKTtcbiAgfVxufVxuXG4vKipcbiAqIFRoaXMgbWV0aG9kIHdyYXBzIGFyb3VuZCB3aW5kb3cncyBvcGVuIG1ldGhvZC4gSXQgZmlyc3QgdHJpZXMgdG8gZXhlY3V0ZVxuICogYG9wZW5gIGNhbGwgd2l0aCB0aGUgcHJvdmlkZWQgdGFyZ2V0IGFuZCBpZiBpdCBmYWlscywgaXQgcmV0cmllcyB0aGUgY2FsbFxuICogd2l0aCB0aGUgYF90b3BgIHRhcmdldC4gVGhpcyBpcyBuZWNlc3NhcnkgZ2l2ZW4gdGhhdCBpbiBzb21lIGVtYmVkZGluZ1xuICogc2NlbmFyaW9zLCBzdWNoIGFzIGlPUycgV0tXZWJWaWV3LCBuYXZpZ2F0aW9uIHRvIGBfYmxhbmtgIGFuZCBvdGhlciB0YXJnZXRzXG4gKiBpcyBibG9ja2VkIGJ5IGRlZmF1bHQuXG4gKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7c3RyaW5nfSB0YXJnZXRcbiAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X2ZlYXR1cmVzXG4gKiBAcmV0dXJuIHs/V2luZG93fVxuICovXG5leHBvcnQgZnVuY3Rpb24gb3BlbldpbmRvd0RpYWxvZyh3aW4sIHVybCwgdGFyZ2V0LCBvcHRfZmVhdHVyZXMpIHtcbiAgLy8gVHJ5IGZpcnN0IHdpdGggdGhlIHNwZWNpZmllZCB0YXJnZXQuIElmIHdlJ3JlIGluc2lkZSB0aGUgV0tXZWJWaWV3IG9yXG4gIC8vIGEgc2ltaWxhciBlbnZpcm9ubWVudHMsIHRoaXMgbWV0aG9kIGlzIGV4cGVjdGVkIHRvIGZhaWwgYnkgZGVmYXVsdCBmb3JcbiAgLy8gYWxsIHRhcmdldHMgZXhjZXB0IGBfdG9wYC5cbiAgbGV0IHJlcztcbiAgdHJ5IHtcbiAgICByZXMgPSB3aW4ub3Blbih1cmwsIHRhcmdldCwgb3B0X2ZlYXR1cmVzKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGRldigpLmVycm9yKCdET00nLCAnRmFpbGVkIHRvIG9wZW4gdXJsIG9uIHRhcmdldDogJywgdGFyZ2V0LCBlKTtcbiAgfVxuXG4gIC8vIFRoZW4gdHJ5IHdpdGggYF90b3BgIHRhcmdldC5cbiAgaWYgKCFyZXMgJiYgdGFyZ2V0ICE9ICdfdG9wJykge1xuICAgIHJlcyA9IHdpbi5vcGVuKHVybCwgJ190b3AnKTtcbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIFdoZXRoZXIgdGhlIGVsZW1lbnQgaXMgYSBzY3JpcHQgdGFnIHdpdGggYXBwbGljYXRpb24vanNvbiB0eXBlLlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzSnNvblNjcmlwdFRhZyhlbGVtZW50KSB7XG4gIHJldHVybiBlbGVtZW50LnRhZ05hbWUgPT0gJ1NDUklQVCcgJiZcbiAgICAgICAgICAgIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0eXBlJykudG9VcHBlckNhc2UoKSA9PSAnQVBQTElDQVRJT04vSlNPTic7XG59XG5cbi8qKlxuICogV2hldGhlciB0aGUgZWxlbWVudCBpcyBhIHNjcmlwdCB0YWcgd2l0aCBhcHBsaWNhdGlvbi9qc29uIHR5cGUuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNKc29uTGRTY3JpcHRUYWcoZWxlbWVudCkge1xuICByZXR1cm4gZWxlbWVudC50YWdOYW1lID09ICdTQ1JJUFQnICYmXG4gICAgICBlbGVtZW50LmdldEF0dHJpYnV0ZSgndHlwZScpLnRvVXBwZXJDYXNlKCkgPT0gJ0FQUExJQ0FUSU9OL0xEK0pTT04nO1xufVxuXG4vKipcbiAqIFdoZXRoZXIgdGhlIHBhZ2UncyBkaXJlY3Rpb24gaXMgcmlnaHQgdG8gbGVmdCBvciBub3QuXG4gKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNSVEwoZG9jKSB7XG4gIGNvbnN0IGRpciA9IGRvYy5ib2R5LmdldEF0dHJpYnV0ZSgnZGlyJylcbiAgICAgICAgICAgICAgICAgfHwgZG9jLmRvY3VtZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RpcicpXG4gICAgICAgICAgICAgICAgIHx8ICdsdHInO1xuICByZXR1cm4gZGlyID09ICdydGwnO1xufVxuXG5cbi8qKlxuICogRXNjYXBlcyBhbiBpZGVudCAoSUQgb3IgYSBjbGFzcyBuYW1lKSB0byBiZSB1c2VkIGFzIGEgQ1NTIHNlbGVjdG9yLlxuICpcbiAqIFNlZSBodHRwczovL2RyYWZ0cy5jc3N3Zy5vcmcvY3Nzb20vI3NlcmlhbGl6ZS1hbi1pZGVudGlmaWVyLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlQ3NzU2VsZWN0b3JJZGVudChpZGVudCkge1xuICByZXR1cm4gY3NzRXNjYXBlKGlkZW50KTtcbn1cblxuLyoqXG4gKiBFc2NhcGVzIGFuIGlkZW50IGluIGEgd2F5IHRoYXQgY2FuIGJlIHVzZWQgYnkgOm50aC1jaGlsZCgpIHBzdWVkby1jbGFzcy5cbiAqXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3czYy9jc3N3Zy1kcmFmdHMvaXNzdWVzLzIzMDYuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBpZGVudFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlQ3NzU2VsZWN0b3JOdGgoaWRlbnQpIHtcbiAgY29uc3QgZXNjYXBlZCA9IFN0cmluZyhpZGVudCk7XG4gIC8vIEVuc3VyZSBpdCBkb2Vzbid0IGNsb3NlIHRoZSBudGgtY2hpbGQgcHN1ZWRvIGNsYXNzLlxuICBkZXYoKS5hc3NlcnQoZXNjYXBlZC5pbmRleE9mKCcpJykgPT09IC0xKTtcbiAgcmV0dXJuIGVzY2FwZWQ7XG59XG5cbi8qKlxuICogRXNjYXBlcyBgPGAsIGA+YCBhbmQgb3RoZXIgSFRNTCBjaGFyY2F0ZXJzIHdpdGggdGhlaXIgZXNjYXBlZCBmb3Jtcy5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlc2NhcGVIdG1sKHRleHQpIHtcbiAgaWYgKCF0ZXh0KSB7XG4gICAgcmV0dXJuIHRleHQ7XG4gIH1cbiAgcmV0dXJuIHRleHQucmVwbGFjZShIVE1MX0VTQ0FQRV9SRUdFWCwgZXNjYXBlSHRtbENoYXIpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBjXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGVzY2FwZUh0bWxDaGFyKGMpIHtcbiAgcmV0dXJuIEhUTUxfRVNDQVBFX0NIQVJTW2NdO1xufVxuXG4vKipcbiAqIFRyaWVzIHRvIGZvY3VzIG9uIHRoZSBnaXZlbiBlbGVtZW50OyBmYWlscyBzaWxlbnRseSBpZiBicm93c2VyIHRocm93cyBhblxuICogZXhjZXB0aW9uLlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJ5Rm9jdXMoZWxlbWVudCkge1xuICB0cnkge1xuICAgIGVsZW1lbnQuLypPSyovZm9jdXMoKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIElFIDw9IDcgbWF5IHRocm93IGV4Y2VwdGlvbnMgd2hlbiBmb2N1c2luZyBvbiBoaWRkZW4gaXRlbXMuXG4gIH1cbn1cblxuLyoqXG4gKiBXaGV0aGVyIHRoZSBnaXZlbiB3aW5kb3cgaXMgaW4gYW4gaWZyYW1lIG9yIG5vdC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNJZnJhbWVkKHdpbikge1xuICByZXR1cm4gd2luLnBhcmVudCAmJiB3aW4ucGFyZW50ICE9IHdpbjtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHRoaXMgZWxlbWVudCBpcyBhbiBBTVAgZWxlbWVudFxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQW1wRWxlbWVudChlbGVtZW50KSB7XG4gIGNvbnN0IHRhZyA9IGVsZW1lbnQudGFnTmFtZTtcbiAgLy8gVXNlIHByZWZpeCB0byByZWNvZ25pemUgQU1QIGVsZW1lbnQuIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugc3R1YlxuICAvLyBtYXkgbm90IGJlIGF0dGFjaGVkIHlldC5cbiAgcmV0dXJuIHN0YXJ0c1dpdGgodGFnLCAnQU1QLScpICYmXG4gICAgICAvLyBTb21lIFwiYW1wLSpcIiBlbGVtZW50cyBhcmUgbm90IHJlYWxseSBBTVAgZWxlbWVudHMuIDpzbWg6XG4gICAgICAhKHRhZyA9PSAnQU1QLVNUSUNLWS1BRC1UT1AtUEFERElORycgfHwgdGFnID09ICdBTVAtQk9EWScpO1xufVxuXG4vKipcbiAqIFJldHVybiBhIHByb21pc2UgdGhhdCByZXNvbHZlIHdoZW4gYW4gQU1QIGVsZW1lbnQgdXBncmFkZSBmcm9tIEhUTUxFbGVtZW50XG4gKiB0byBDdXN0b21FbGVtZW50XG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcmV0dXJuIHshUHJvbWlzZTwhRWxlbWVudD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aGVuVXBncmFkZWRUb0N1c3RvbUVsZW1lbnQoZWxlbWVudCkge1xuICBkZXYoKS5hc3NlcnQoaXNBbXBFbGVtZW50KGVsZW1lbnQpLCAnZWxlbWVudCBpcyBub3QgQW1wRWxlbWVudCcpO1xuICBpZiAoZWxlbWVudC5jcmVhdGVkQ2FsbGJhY2spIHtcbiAgICAvLyBFbGVtZW50IGFscmVhZHkgaXMgQ3VzdG9tRWxlbWVudDtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGVsZW1lbnQpO1xuICB9XG4gIC8vIElmIEVsZW1lbnQgaXMgc3RpbGwgSFRNTEVsZW1lbnQsIHdhaXQgZm9yIGl0IHRvIHVwZ3JhZGUgdG8gY3VzdG9tRWxlbWVudFxuICAvLyBOb3RlOiB1c2UgcHVyZSBzdHJpbmcgdG8gYXZvaWQgb2JmdXNjYXRpb24gYmV0d2VlbiB2ZXJzaW9ucy5cbiAgaWYgKCFlbGVtZW50W1VQR1JBREVfVE9fQ1VTVE9NRUxFTUVOVF9QUk9NSVNFXSkge1xuICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XG4gICAgZWxlbWVudFtVUEdSQURFX1RPX0NVU1RPTUVMRU1FTlRfUFJPTUlTRV0gPSBkZWZlcnJlZC5wcm9taXNlO1xuICAgIGVsZW1lbnRbVVBHUkFERV9UT19DVVNUT01FTEVNRU5UX1JFU09MVkVSXSA9IGRlZmVycmVkLnJlc29sdmU7XG5cbiAgfVxuXG4gIHJldHVybiBlbGVtZW50W1VQR1JBREVfVE9fQ1VTVE9NRUxFTUVOVF9QUk9NSVNFXTtcbn1cblxuLyoqXG4gKiBSZXBsYWNlbWVudCBmb3IgYEVsZW1lbnQucmVxdWVzdEZ1bGxzY3JlZW4oKWAgbWV0aG9kLlxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0VsZW1lbnQvcmVxdWVzdEZ1bGxzY3JlZW5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZ1bGxzY3JlZW5FbnRlcihlbGVtZW50KSB7XG4gIGNvbnN0IHJlcXVlc3RGcyA9IGVsZW1lbnQucmVxdWVzdEZ1bGxzY3JlZW5cbiAgIHx8IGVsZW1lbnQucmVxdWVzdEZ1bGxTY3JlZW5cbiAgIHx8IGVsZW1lbnQud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW5cbiAgIHx8IGVsZW1lbnQud2Via2l0UmVxdWVzdEZ1bGxTY3JlZW5cbiAgIHx8IGVsZW1lbnQud2Via2l0RW50ZXJGdWxsc2NyZWVuXG4gICB8fCBlbGVtZW50LndlYmtpdEVudGVyRnVsbFNjcmVlblxuICAgfHwgZWxlbWVudC5tc1JlcXVlc3RGdWxsc2NyZWVuXG4gICB8fCBlbGVtZW50Lm1zUmVxdWVzdEZ1bGxTY3JlZW5cbiAgIHx8IGVsZW1lbnQubW96UmVxdWVzdEZ1bGxzY3JlZW5cbiAgIHx8IGVsZW1lbnQubW96UmVxdWVzdEZ1bGxTY3JlZW47XG4gIGlmIChyZXF1ZXN0RnMpIHtcbiAgICByZXF1ZXN0RnMuY2FsbChlbGVtZW50KTtcbiAgfVxufVxuXG4vKipcbiAqIFJlcGxhY2VtZW50IGZvciBgRG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4oKWAgbWV0aG9kLlxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0RvY3VtZW50L2V4aXRGdWxsc2NyZWVuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmdWxsc2NyZWVuRXhpdChlbGVtZW50KSB7XG4gIGxldCBleGl0RnMgPSBlbGVtZW50LmNhbmNlbEZ1bGxTY3JlZW5cbiAgICAgICAgICAgICAgwqB8fCBlbGVtZW50LmV4aXRGdWxsc2NyZWVuXG4gICAgICAgICAgICAgIMKgfHwgZWxlbWVudC5leGl0RnVsbFNjcmVlblxuICAgICAgICAgICAgICDCoHx8IGVsZW1lbnQud2Via2l0RXhpdEZ1bGxzY3JlZW5cbiAgICAgICAgICAgICAgwqB8fCBlbGVtZW50LndlYmtpdEV4aXRGdWxsU2NyZWVuXG4gICAgICAgICAgICAgIMKgfHwgZWxlbWVudC53ZWJraXRDYW5jZWxGdWxsU2NyZWVuXG4gICAgICAgICAgICAgIMKgfHwgZWxlbWVudC5tb3pDYW5jZWxGdWxsU2NyZWVuXG4gICAgICAgICAgICAgIMKgfHwgZWxlbWVudC5tc0V4aXRGdWxsc2NyZWVuO1xuICBpZiAoZXhpdEZzKSB7XG4gICAgZXhpdEZzLmNhbGwoZWxlbWVudCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChlbGVtZW50Lm93bmVyRG9jdW1lbnQpIHtcbiAgICBleGl0RnMgPSBlbGVtZW50Lm93bmVyRG9jdW1lbnQuY2FuY2VsRnVsbFNjcmVlblxuICAgICAgICAgICAgIHx8IGVsZW1lbnQub3duZXJEb2N1bWVudC5leGl0RnVsbHNjcmVlblxuICAgICAgICAgICAgIHx8IGVsZW1lbnQub3duZXJEb2N1bWVudC5leGl0RnVsbFNjcmVlblxuICAgICAgICAgICAgIHx8IGVsZW1lbnQub3duZXJEb2N1bWVudC53ZWJraXRFeGl0RnVsbHNjcmVlblxuICAgICAgICAgICAgIHx8IGVsZW1lbnQub3duZXJEb2N1bWVudC53ZWJraXRFeGl0RnVsbFNjcmVlblxuICAgICAgICAgICAgIHx8IGVsZW1lbnQub3duZXJEb2N1bWVudC53ZWJraXRDYW5jZWxGdWxsU2NyZWVuXG4gICAgICAgICAgICAgfHwgZWxlbWVudC5vd25lckRvY3VtZW50Lm1vekNhbmNlbEZ1bGxTY3JlZW5cbiAgICAgICAgICAgICB8fCBlbGVtZW50Lm93bmVyRG9jdW1lbnQubXNFeGl0RnVsbHNjcmVlbjtcbiAgfVxuICBpZiAoZXhpdEZzKSB7XG4gICAgZXhpdEZzLmNhbGwoZWxlbWVudC5vd25lckRvY3VtZW50KTtcbiAgICByZXR1cm47XG4gIH1cbn1cblxuXG4vKipcbiAqIFJlcGxhY2VtZW50IGZvciBgRG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnRgLlxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0RvY3VtZW50L2Z1bGxzY3JlZW5FbGVtZW50XG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNGdWxsc2NyZWVuRWxlbWVudChlbGVtZW50KSB7XG4gIGNvbnN0IGlzRnVsbHNjcmVlbiA9IGVsZW1lbnQud2Via2l0RGlzcGxheWluZ0Z1bGxzY3JlZW47XG4gIGlmIChpc0Z1bGxzY3JlZW4pIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoZWxlbWVudC5vd25lckRvY3VtZW50KSB7XG4gICAgY29uc3QgZnVsbHNjcmVlbkVsZW1lbnQgPSBlbGVtZW50Lm93bmVyRG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnRcbiAgICAgICAgICAgICB8fCBlbGVtZW50Lm93bmVyRG9jdW1lbnQud2Via2l0RnVsbHNjcmVlbkVsZW1lbnRcbiAgICAgICAgICAgICB8fCBlbGVtZW50Lm93bmVyRG9jdW1lbnQubW96RnVsbFNjcmVlbkVsZW1lbnRcbiAgICAgICAgICAgICB8fCBlbGVtZW50LndlYmtpdEN1cnJlbnRGdWxsU2NyZWVuRWxlbWVudDtcbiAgICBpZiAoZnVsbHNjcmVlbkVsZW1lbnQgPT0gZWxlbWVudCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgbm9kZSBpcyBub3QgZGlzYWJsZWQuXG4gKlxuICogSUU4IGNhbiByZXR1cm4gZmFsc2UgcG9zaXRpdmVzLCBzZWUge0BsaW5rIG1hdGNoZXN9LlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqIEBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2Zvcm1zLmh0bWwjY29uY2VwdC1mZS1kaXNhYmxlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNFbmFibGVkKGVsZW1lbnQpIHtcbiAgcmV0dXJuICEoZWxlbWVudC5kaXNhYmxlZCB8fCBtYXRjaGVzKGVsZW1lbnQsICc6ZGlzYWJsZWQnKSk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0ICogYXMgZG9tIGZyb20gJy4vZG9tJztcbmltcG9ydCB7XG4gIGdldEFtcGRvYyxcbiAgZ2V0RXhpc3RpbmdTZXJ2aWNlRm9yRG9jSW5FbWJlZFNjb3BlLFxuICBnZXRTZXJ2aWNlLFxuICBnZXRTZXJ2aWNlUHJvbWlzZSxcbiAgZ2V0U2VydmljZVByb21pc2VGb3JEb2MsXG4gIGdldFNlcnZpY2VQcm9taXNlT3JOdWxsLFxuICBnZXRTZXJ2aWNlUHJvbWlzZU9yTnVsbEZvckRvYyxcbiAgZ2V0VG9wV2luZG93LFxufSBmcm9tICcuL3NlcnZpY2UnO1xuaW1wb3J0IHt0b1dpbn0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQge3VzZXJ9IGZyb20gJy4vbG9nJztcblxuLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSBmb3IgYSBzZXJ2aWNlIGZvciB0aGUgZ2l2ZW4gaWQgYW5kIHdpbmRvdy4gQWxzbyBleHBlY3RzIGFuXG4gKiBlbGVtZW50IHRoYXQgaGFzIHRoZSBhY3R1YWwgaW1wbGVtZW50YXRpb24uIFRoZSBwcm9taXNlIHJlc29sdmVzIHdoZW4gdGhlXG4gKiBpbXBsZW1lbnRhdGlvbiBsb2FkZWQuIFVzZXJzIHNob3VsZCB0eXBpY2FsbHkgd3JhcCB0aGlzIGFzIGEgc3BlY2lhbCBwdXJwb3NlXG4gKiBmdW5jdGlvbiAoZS5nLiBTZXJ2aWNlcy52aWV3cG9ydEZvckRvYyguLi4pKSBmb3IgdHlwZSBzYWZldHkgYW5kIGJlY2F1c2UgdGhlXG4gKiBmYWN0b3J5IHNob3VsZCBub3QgYmUgcGFzc2VkIGFyb3VuZC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gZXh0ZW5zaW9uIE5hbWUgb2YgdGhlIGN1c3RvbSBleHRlbnNpb24gdGhhdCBwcm92aWRlcyB0aGVcbiAqICAgICBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzIHNlcnZpY2UuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfZWxlbWVudCBXaGV0aGVyIHRoaXMgc2VydmljZSBpcyBwcm92aWRlZCBieSBhbiBlbGVtZW50LFxuICogICAgIG5vdCB0aGUgZXh0ZW5zaW9uLlxuICogQHJldHVybiB7IVByb21pc2U8Kj59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50U2VydmljZSh3aW4sIGlkLCBleHRlbnNpb24sIG9wdF9lbGVtZW50KSB7XG4gIHJldHVybiBnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlKHdpbiwgaWQsIGV4dGVuc2lvbiwgb3B0X2VsZW1lbnQpLnRoZW4oXG4gICAgICBzZXJ2aWNlID0+IGFzc2VydFNlcnZpY2Uoc2VydmljZSwgaWQsIGV4dGVuc2lvbikpO1xufVxuXG4vKipcbiAqIFNhbWUgYXMgZ2V0RWxlbWVudFNlcnZpY2UgYnV0IHByb2R1Y2VzIG51bGwgaWYgdGhlIGdpdmVuIGVsZW1lbnQgaXMgbm90XG4gKiBhY3R1YWxseSBhdmFpbGFibGUgb24gdGhlIGN1cnJlbnQgcGFnZS5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gZXh0ZW5zaW9uIE5hbWUgb2YgdGhlIGN1c3RvbSBleHRlbnNpb24gdGhhdCBwcm92aWRlcyB0aGVcbiAqICAgICBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzIHNlcnZpY2UuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfZWxlbWVudCBXaGV0aGVyIHRoaXMgc2VydmljZSBpcyBwcm92aWRlZCBieSBhblxuICogICAgIGVsZW1lbnQsIG5vdCB0aGUgZXh0ZW5zaW9uLlxuICogQHJldHVybiB7IVByb21pc2U8P09iamVjdD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlKHdpbiwgaWQsIGV4dGVuc2lvbiwgb3B0X2VsZW1lbnQpIHtcbiAgY29uc3QgcyA9IGdldFNlcnZpY2VQcm9taXNlT3JOdWxsKHdpbiwgaWQpO1xuICBpZiAocykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlPD9PYmplY3Q+fSAqLyAocyk7XG4gIH1cbiAgcmV0dXJuIGdldEVsZW1lbnRTZXJ2aWNlUHJvbWlzZU9yTnVsbCh3aW4sIGlkLCBleHRlbnNpb24sIG9wdF9lbGVtZW50KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IGVsZW1lbnROYW1lIE5hbWUgb2YgYW4gZXh0ZW5kZWQgY3VzdG9tIGVsZW1lbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoaXMgZWxlbWVudCBpcyBzY2hlZHVsZWQgdG8gYmUgbG9hZGVkLlxuICovXG5mdW5jdGlvbiBpc0VsZW1lbnRTY2hlZHVsZWQod2luLCBlbGVtZW50TmFtZSkge1xuICAvLyBTZXQgaW4gY3VzdG9tLWVsZW1lbnQuanNcbiAgaWYgKCF3aW4uYW1wRXh0ZW5kZWRFbGVtZW50cykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gISF3aW4uYW1wRXh0ZW5kZWRFbGVtZW50c1tlbGVtZW50TmFtZV07XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSBmb3IgYSBzZXJ2aWNlIGZvciB0aGUgZ2l2ZW4gaWQgYW5kIHdpbmRvdy4gQWxzbyBleHBlY3RzIGFuXG4gKiBlbGVtZW50IHRoYXQgaGFzIHRoZSBhY3R1YWwgaW1wbGVtZW50YXRpb24uIFRoZSBwcm9taXNlIHJlc29sdmVzIHdoZW4gdGhlXG4gKiBpbXBsZW1lbnRhdGlvbiBsb2FkZWQuIFVzZXJzIHNob3VsZCB0eXBpY2FsbHkgd3JhcCB0aGlzIGFzIGEgc3BlY2lhbCBwdXJwb3NlXG4gKiBmdW5jdGlvbiAoZS5nLiBTZXJ2aWNlcy52aWV3cG9ydEZvckRvYyguLi4pKSBmb3IgdHlwZSBzYWZldHkgYW5kIGJlY2F1c2UgdGhlXG4gKiBmYWN0b3J5IHNob3VsZCBub3QgYmUgcGFzc2VkIGFyb3VuZC5cbiAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICogQHBhcmFtIHtzdHJpbmd9IGlkIG9mIHRoZSBzZXJ2aWNlLlxuICogQHBhcmFtIHtzdHJpbmd9IGV4dGVuc2lvbiBOYW1lIG9mIHRoZSBjdXN0b20gZXh0ZW5zaW9uIHRoYXQgcHJvdmlkZXMgdGhlXG4gKiAgICAgaW1wbGVtZW50YXRpb24gb2YgdGhpcyBzZXJ2aWNlLlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2VsZW1lbnQgV2hldGhlciB0aGlzIHNlcnZpY2UgaXMgcHJvdmlkZWQgYnkgYW4gZWxlbWVudCxcbiAqICAgICBub3QgdGhlIGV4dGVuc2lvbi5cbiAqIEByZXR1cm4geyFQcm9taXNlPCo+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudFNlcnZpY2VGb3JEb2MoZWxlbWVudE9yQW1wRG9jLCBpZCwgZXh0ZW5zaW9uLFxuICBvcHRfZWxlbWVudCkge1xuICByZXR1cm4gZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZUZvckRvYyhcbiAgICAgIGVsZW1lbnRPckFtcERvYywgaWQsIGV4dGVuc2lvbiwgb3B0X2VsZW1lbnQpXG4gICAgICAudGhlbihzZXJ2aWNlID0+IGFzc2VydFNlcnZpY2Uoc2VydmljZSwgaWQsIGV4dGVuc2lvbikpO1xufVxuXG4vKipcbiAqIFNhbWUgYXMgZ2V0RWxlbWVudFNlcnZpY2UgYnV0IHByb2R1Y2VzIG51bGwgaWYgdGhlIGdpdmVuIGVsZW1lbnQgaXMgbm90XG4gKiBhY3R1YWxseSBhdmFpbGFibGUgb24gdGhlIGN1cnJlbnQgcGFnZS5cbiAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICogQHBhcmFtIHtzdHJpbmd9IGlkIG9mIHRoZSBzZXJ2aWNlLlxuICogQHBhcmFtIHtzdHJpbmd9IGV4dGVuc2lvbiBOYW1lIG9mIHRoZSBjdXN0b20gZXh0ZW5zaW9uIHRoYXQgcHJvdmlkZXMgdGhlXG4gKiAgICAgaW1wbGVtZW50YXRpb24gb2YgdGhpcyBzZXJ2aWNlLlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2VsZW1lbnQgV2hldGhlciB0aGlzIHNlcnZpY2UgaXMgcHJvdmlkZWQgYnkgYW5cbiAqICAgICBlbGVtZW50LCBub3QgdGhlIGV4dGVuc2lvbi5cbiAqIEByZXR1cm4geyFQcm9taXNlPD9PYmplY3Q+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZUZvckRvYyhcbiAgZWxlbWVudE9yQW1wRG9jLCBpZCwgZXh0ZW5zaW9uLCBvcHRfZWxlbWVudCkge1xuICBjb25zdCBhbXBkb2MgPSBnZXRBbXBkb2MoZWxlbWVudE9yQW1wRG9jKTtcbiAgY29uc3QgcyA9IGdldFNlcnZpY2VQcm9taXNlT3JOdWxsRm9yRG9jKGVsZW1lbnRPckFtcERvYywgaWQpO1xuICBpZiAocykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlPD9PYmplY3Q+fSAqLyAocyk7XG4gIH1cblxuICByZXR1cm4gYW1wZG9jLndoZW5Cb2R5QXZhaWxhYmxlKClcbiAgICAgIC50aGVuKCgpID0+IHdhaXRGb3JFeHRlbnNpb25JZlByZXNlbnQoXG4gICAgICAgICAgYW1wZG9jLndpbiwgZXh0ZW5zaW9uLFxuICAgICAgICAgIGFtcGRvYy5nZXRIZWFkTm9kZSgpKSlcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgLy8gSWYgdGhpcyBzZXJ2aWNlIGlzIHByb3ZpZGVkIGJ5IGFuIGVsZW1lbnQsIHRoZW4gd2UgY2FuJ3QgZGVwZW5kIG9uXG4gICAgICAgIC8vIHRoZSBzZXJ2aWNlICh0aGV5IG1heSBub3QgdXNlIHRoZSBlbGVtZW50KS5cbiAgICAgICAgaWYgKG9wdF9lbGVtZW50KSB7XG4gICAgICAgICAgcmV0dXJuIGdldFNlcnZpY2VQcm9taXNlT3JOdWxsRm9yRG9jKGVsZW1lbnRPckFtcERvYywgaWQpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzRWxlbWVudFNjaGVkdWxlZChhbXBkb2Mud2luLCBleHRlbnNpb24pKSB7XG4gICAgICAgICAgcmV0dXJuIGdldFNlcnZpY2VQcm9taXNlRm9yRG9jKGVsZW1lbnRPckFtcERvYywgaWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2UgZm9yIHNlcnZpY2UgZm9yIHRoZSBnaXZlbiBpZCBpbiB0aGUgZW1iZWQgc2NvcGUgb2ZcbiAqIGEgZ2l2ZW4gbm9kZSwgaWYgaXQgZXhpc3RzLiBPdGhlcndpc2UsIGZhbGxzIGJhY2sgdG8gYW1wZG9jIHNjb3BlIElGRlxuICogdGhlIGdpdmVuIG5vZGUgaXMgaW4gdGhlIHRvcC1sZXZlbCB3aW5kb3cuXG4gKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBvZiB0aGUgc2VydmljZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBleHRlbnNpb24gTmFtZSBvZiB0aGUgY3VzdG9tIGVsZW1lbnQgdGhhdCBwcm92aWRlc1xuICogICAgIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzIHNlcnZpY2UuXG4gKiBAcmV0dXJuIHshUHJvbWlzZTw/T2JqZWN0Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnRTZXJ2aWNlSWZBdmFpbGFibGVGb3JEb2NJbkVtYmVkU2NvcGUoXG4gIGVsZW1lbnRPckFtcERvYywgaWQsIGV4dGVuc2lvbikge1xuICBjb25zdCBzID0gZ2V0RXhpc3RpbmdTZXJ2aWNlRm9yRG9jSW5FbWJlZFNjb3BlKGVsZW1lbnRPckFtcERvYywgaWQpO1xuICBpZiAocykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlPD9PYmplY3Q+fSAqLyAoUHJvbWlzZS5yZXNvbHZlKHMpKTtcbiAgfVxuICAvLyBSZXR1cm4gZW1iZWQtc2NvcGUgZWxlbWVudCBzZXJ2aWNlIHByb21pc2UgaWYgc2NoZWR1bGVkLlxuICBpZiAoZWxlbWVudE9yQW1wRG9jLm5vZGVUeXBlKSB7XG4gICAgY29uc3Qgd2luID0gdG9XaW4oZWxlbWVudE9yQW1wRG9jLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcpO1xuICAgIGNvbnN0IHRvcFdpbiA9IGdldFRvcFdpbmRvdyh3aW4pO1xuICAgIC8vIEluIGVtYmVkcywgZG9jLXNjb3BlIHNlcnZpY2VzIGFyZSB3aW5kb3ctc2NvcGUuIEJ1dCBtYWtlIHN1cmUgdG9cbiAgICAvLyBvbmx5IGRvIHRoaXMgZm9yIGVtYmVkcyAobm90IHRoZSB0b3Agd2luZG93KSwgb3RoZXJ3aXNlIHdlJ2QgZ3JhYlxuICAgIC8vIGEgcHJvbWlzZSBmcm9tIHRoZSB3cm9uZyBzZXJ2aWNlIGhvbGRlciB3aGljaCB3b3VsZCBuZXZlciByZXNvbHZlLlxuICAgIGlmICh3aW4gIT09IHRvcFdpbikge1xuICAgICAgcmV0dXJuIGdldEVsZW1lbnRTZXJ2aWNlUHJvbWlzZU9yTnVsbCh3aW4sIGlkLCBleHRlbnNpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBGYWxsYmFjayB0byBhbXBkb2MgSUZGIHRoZSBnaXZlbiBub2RlIGlzIF9ub3RfIEZJRS5cbiAgICAgIHJldHVybiBnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlRm9yRG9jKGVsZW1lbnRPckFtcERvYywgaWQsIGV4dGVuc2lvbik7XG4gICAgfVxuICB9XG4gIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlPD9PYmplY3Q+fSAqLyAoUHJvbWlzZS5yZXNvbHZlKG51bGwpKTtcbn1cblxuLyoqXG4gKiBUaHJvd3MgdXNlciBlcnJvciBpZiBgc2VydmljZWAgaXMgbnVsbC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBzZXJ2aWNlXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBleHRlbnNpb25cbiAqIEByZXR1cm4geyFPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBhc3NlcnRTZXJ2aWNlKHNlcnZpY2UsIGlkLCBleHRlbnNpb24pIHtcbiAgcmV0dXJuIC8qKiBAdHlwZSB7IU9iamVjdH0gKi8gKHVzZXIoKS5hc3NlcnQoc2VydmljZSxcbiAgICAgICdTZXJ2aWNlICVzIHdhcyByZXF1ZXN0ZWQgdG8gYmUgcHJvdmlkZWQgdGhyb3VnaCAlcywgJyArXG4gICAgICAnYnV0ICVzIGlzIG5vdCBsb2FkZWQgaW4gdGhlIGN1cnJlbnQgcGFnZS4gVG8gZml4IHRoaXMgJyArXG4gICAgICAncHJvYmxlbSBsb2FkIHRoZSBKYXZhU2NyaXB0IGZpbGUgZm9yICVzIGluIHRoaXMgcGFnZS4nLFxuICAgICAgaWQsIGV4dGVuc2lvbiwgZXh0ZW5zaW9uLCBleHRlbnNpb24pKTtcbn1cblxuLyoqXG4gKiBHZXQgbGlzdCBvZiBhbGwgdGhlIGV4dGVuc2lvbiBKUyBmaWxlc1xuICogQHBhcmFtIHtIVE1MSGVhZEVsZW1lbnR8RWxlbWVudHxTaGFkb3dSb290fSBoZWFkXG4gKiBAcmV0dXJuIHshQXJyYXk8c3RyaW5nPn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuc2lvblNjcmlwdHNJbk5vZGUoaGVhZCkge1xuICAvLyBhbXBkb2MuZ2V0SGVhZE5vZGUoKSBjYW4gcmV0dXJuIG51bGxcbiAgaWYgKCFoZWFkKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGNvbnN0IHNjcmlwdHMgPSBbXTtcbiAgY29uc3QgbGlzdCA9IGhlYWQucXVlcnlTZWxlY3RvckFsbCgnc2NyaXB0W2N1c3RvbS1lbGVtZW50XScpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICBzY3JpcHRzLnB1c2gobGlzdFtpXS5nZXRBdHRyaWJ1dGUoJ2N1c3RvbS1lbGVtZW50JykpO1xuICB9XG4gIHJldHVybiBzY3JpcHRzO1xufVxuXG4vKipcbiAqIFdhaXRzIGZvciBib2R5IHRvIGJlIHByZXNlbnQgdGhlbiB2ZXJpZmllcyB0aGF0IGFuIGV4dGVuc2lvbiBzY3JpcHQgaXNcbiAqIHByZXNlbnQgaW4gaGVhZCBmb3IgaW5zdGFsbGF0aW9uLlxuICogQHBhcmFtIHshLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gYW1wZG9jXG4gKiBAcGFyYW0ge3N0cmluZ30gZXh0ZW5zaW9uSWRcbiAqIEByZXR1cm4geyFQcm9taXNlPGJvb2xlYW4+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNFeHRlbnNpb25TY3JpcHRJbk5vZGUoYW1wZG9jLCBleHRlbnNpb25JZCkge1xuICByZXR1cm4gYW1wZG9jLndoZW5Cb2R5QXZhaWxhYmxlKClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgcmV0dXJuIGV4dGVuc2lvblNjcmlwdEluTm9kZShcbiAgICAgICAgICAgIGFtcGRvYy5nZXRIZWFkTm9kZSgpLCBleHRlbnNpb25JZCk7XG4gICAgICB9KTtcbn1cblxuLyoqXG4gKiBWZXJpZmllcyB0aGF0IGFuIGV4dGVuc2lvbiBzY3JpcHQgaXMgcHJlc2VudCBpbiBoZWFkIGZvclxuICogaW5zdGFsbGF0aW9uLlxuICogQHBhcmFtIHtIVE1MSGVhZEVsZW1lbnR8RWxlbWVudHxTaGFkb3dSb290fSBoZWFkXG4gKiBAcGFyYW0ge3N0cmluZ30gZXh0ZW5zaW9uSWRcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGV4dGVuc2lvblNjcmlwdEluTm9kZShoZWFkLCBleHRlbnNpb25JZCkge1xuICByZXR1cm4gZXh0ZW5zaW9uU2NyaXB0c0luTm9kZShoZWFkKS5pbmNsdWRlcyhleHRlbnNpb25JZCk7XG59XG5cbi8qKlxuICogV2FpdHMgZm9yIGFuIGV4dGVuc2lvbiBpZiBpdHMgc2NyaXB0IGlzIHByZXNlbnRcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gZXh0ZW5zaW9uXG4gKiBAcGFyYW0ge0hUTUxIZWFkRWxlbWVudHxFbGVtZW50fFNoYWRvd1Jvb3R9IGhlYWRcbiAqIEByZXR1cm4geyFQcm9taXNlfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gd2FpdEZvckV4dGVuc2lvbklmUHJlc2VudCh3aW4sIGV4dGVuc2lvbiwgaGVhZCkge1xuICAvKipcbiAgICogSWYgdGhlcmUgaXMgYW4gZXh0ZW5zaW9uIHNjcmlwdCB3YWl0IGZvciBpdCB0byBsb2FkIGJlZm9yZSB0cnlpbmdcbiAgICogdG8gZ2V0IHRoZSBzZXJ2aWNlLiBQcmV2ZW50cyBhIHJhY2UgY29uZGl0aW9uIHdoZW4gZXZlcnl0aGluZyBidXRcbiAgICogdGhlIGV4dGVuc2lvbnMgaXMgaW4gY2FjaGUuIElmIHRoZXJlIGlzIG5vIHNjcmlwdCB0aGVuIGl0J3MgZWl0aGVyXG4gICAqIG5vdCBwcmVzZW50LCBvciB0aGUgc2VydmljZSB3YXMgZGVmaW5lZCBieSBhIHRlc3QuIEluIHRob3NlIGNhc2VzXG4gICAqIHdlIGRvbid0IHdhaXQgYXJvdW5kIGZvciBhbiBleHRlbnNpb24gdGhhdCBkb2VzIG5vdCBleGlzdC5cbiAgICovXG5cbiAgLy8gVE9ETyhqcGV0dGl0dCkgaW52ZXN0aWdhdGUgcmVnaXN0ZXJFeHRlbnNpb24gdG8gc2hvcnQgY2lyY3VpdFxuICAvLyB0aGUgZG9tIGNhbGwgaW4gZXh0ZW5zaW9uU2NyaXB0c0luTm9kZSgpXG4gIGlmICghZXh0ZW5zaW9uU2NyaXB0SW5Ob2RlKGhlYWQsIGV4dGVuc2lvbikpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cblxuICBjb25zdCBleHRlbnNpb25zID0gZ2V0U2VydmljZSh3aW4sICdleHRlbnNpb25zJyk7XG4gIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlPD9PYmplY3Q+fSAqLyAoXG4gICAgZXh0ZW5zaW9ucy53YWl0Rm9yRXh0ZW5zaW9uKHdpbiwgZXh0ZW5zaW9uKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgcHJvbWlzZSBmb3Igc2VydmljZSB3aXRoIGBpZGAgb24gdGhlIGdpdmVuIHdpbmRvdyBpZiBhdmFpbGFibGUuXG4gKiBPdGhlcndpc2UsIHJlc29sdmVzIHdpdGggbnVsbCAoc2VydmljZSB3YXMgbm90IHJlZ2lzdGVyZWQpLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICogQHBhcmFtIHtzdHJpbmd9IGV4dGVuc2lvblxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2VsZW1lbnRcbiAqIEByZXR1cm4geyFQcm9taXNlPE9iamVjdD59XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBnZXRFbGVtZW50U2VydmljZVByb21pc2VPck51bGwod2luLCBpZCwgZXh0ZW5zaW9uLCBvcHRfZWxlbWVudCkge1xuICByZXR1cm4gZG9tLndhaXRGb3JCb2R5UHJvbWlzZSh3aW4uZG9jdW1lbnQpXG4gICAgICAudGhlbigoKSA9PiB3YWl0Rm9yRXh0ZW5zaW9uSWZQcmVzZW50KHdpbiwgZXh0ZW5zaW9uLCB3aW4uZG9jdW1lbnQuaGVhZCkpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIC8vIElmIHRoaXMgc2VydmljZSBpcyBwcm92aWRlZCBieSBhbiBlbGVtZW50LCB0aGVuIHdlIGNhbid0IGRlcGVuZCBvblxuICAgICAgICAvLyB0aGUgc2VydmljZSAodGhleSBtYXkgbm90IHVzZSB0aGUgZWxlbWVudCkuXG4gICAgICAgIGlmIChvcHRfZWxlbWVudCkge1xuICAgICAgICAgIHJldHVybiBnZXRTZXJ2aWNlUHJvbWlzZU9yTnVsbCh3aW4sIGlkKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc0VsZW1lbnRTY2hlZHVsZWQod2luLCBleHRlbnNpb24pKSB7XG4gICAgICAgICAgcmV0dXJuIGdldFNlcnZpY2VQcm9taXNlKHdpbiwgaWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gICogV2hldGhlciBhZGRFdmVudExpc3RlbmVyIHN1cHBvcnRzIG9wdGlvbnMgb3Igb25seSB0YWtlcyBjYXB0dXJlIGFzIGEgYm9vbGVhblxuICAqIEB0eXBlIHtib29sZWFufHVuZGVmaW5lZH1cbiAgKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAgKi9cbmxldCBvcHRzU3VwcG9ydGVkO1xuXG4vKipcbiAqIExpc3RlbnMgZm9yIHRoZSBzcGVjaWZpZWQgZXZlbnQgb24gdGhlIGVsZW1lbnQuXG4gKlxuICogRG8gbm90IHVzZSB0aGlzIGRpcmVjdGx5LiBUaGlzIG1ldGhvZCBpcyBpbXBsZW1lbnRlZCBhcyBhIHNoYXJlZFxuICogZGVwZW5kZW5jeS4gVXNlIGBsaXN0ZW4oKWAgaW4gZWl0aGVyIGBldmVudC1oZWxwZXJgIG9yIGAzcC1mcmFtZS1tZXNzYWdpbmdgLFxuICogZGVwZW5kaW5nIG9uIHlvdXIgdXNlIGNhc2UuXG4gKlxuICogQHBhcmFtIHshRXZlbnRUYXJnZXR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFR5cGVcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oIUV2ZW50KX0gbGlzdGVuZXJcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0X2V2dExpc3RlbmVyT3B0c1xuICogQHJldHVybiB7IVVubGlzdGVuRGVmfVxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJuYWxMaXN0ZW5JbXBsZW1lbnRhdGlvbihlbGVtZW50LCBldmVudFR5cGUsIGxpc3RlbmVyLFxuICBvcHRfZXZ0TGlzdGVuZXJPcHRzKSB7XG4gIGxldCBsb2NhbEVsZW1lbnQgPSBlbGVtZW50O1xuICBsZXQgbG9jYWxMaXN0ZW5lciA9IGxpc3RlbmVyO1xuICAvKipcbiAgICogQHR5cGUgez9GdW5jdGlvbn1cbiAgICovXG4gIGxldCB3cmFwcGVkO1xuXG4gIHdyYXBwZWQgPSBldmVudCA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBsb2NhbExpc3RlbmVyKGV2ZW50KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyByZXBvcnRFcnJvciBpcyBpbnN0YWxsZWQgZ2xvYmFsbHkgcGVyIHdpbmRvdyBpbiB0aGUgZW50cnkgcG9pbnQuXG4gICAgICBzZWxmLnJlcG9ydEVycm9yKGUpO1xuICAgICAgdGhyb3cgZTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IG9wdHNTdXBwb3J0ZWQgPSBkZXRlY3RFdnRMaXN0ZW5lck9wdHNTdXBwb3J0KCk7XG4gIGxldCBjYXB0dXJlID0gZmFsc2U7XG4gIGlmIChvcHRfZXZ0TGlzdGVuZXJPcHRzKSB7XG4gICAgY2FwdHVyZSA9IG9wdF9ldnRMaXN0ZW5lck9wdHMuY2FwdHVyZTtcbiAgfVxuICBsb2NhbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIGV2ZW50VHlwZSxcbiAgICAgIHdyYXBwZWQsXG4gICAgICBvcHRzU3VwcG9ydGVkID8gb3B0X2V2dExpc3RlbmVyT3B0cyA6IGNhcHR1cmVcbiAgKTtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBpZiAobG9jYWxFbGVtZW50KSB7XG4gICAgICBsb2NhbEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICBldmVudFR5cGUsXG4gICAgICAgICAgd3JhcHBlZCxcbiAgICAgICAgICBvcHRzU3VwcG9ydGVkID8gb3B0X2V2dExpc3RlbmVyT3B0cyA6IGNhcHR1cmVcbiAgICAgICk7XG4gICAgfVxuICAgIC8vIEVuc3VyZSB0aGVzZSBhcmUgR0MnZFxuICAgIGxvY2FsTGlzdGVuZXIgPSBudWxsO1xuICAgIGxvY2FsRWxlbWVudCA9IG51bGw7XG4gICAgd3JhcHBlZCA9IG51bGw7XG4gIH07XG59XG5cbi8qKlxuICogVGVzdHMgd2hldGhlciB0aGUgYnJvd3NlciBzdXBwb3J0cyBvcHRpb25zIGFzIGFuIGFyZ3VtZW50IG9mIGFkZEV2ZW50TGlzdGVuZXJcbiAqIG9yIG5vdC5cbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGV0ZWN0RXZ0TGlzdGVuZXJPcHRzU3VwcG9ydCgpIHtcbiAgLy8gT25seSBydW4gdGhlIHRlc3Qgb25jZVxuICBpZiAob3B0c1N1cHBvcnRlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIG9wdHNTdXBwb3J0ZWQ7XG4gIH1cblxuICBvcHRzU3VwcG9ydGVkID0gZmFsc2U7XG4gIHRyeSB7XG4gICAgLy8gVGVzdCB3aGV0aGVyIGJyb3dzZXIgc3VwcG9ydHMgRXZlbnRMaXN0ZW5lck9wdGlvbnMgb3Igbm90XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgIGdldCBjYXB0dXJlKCkge1xuICAgICAgICBvcHRzU3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgIH0sXG4gICAgfTtcbiAgICBzZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ3Rlc3Qtb3B0aW9ucycsIG51bGwsIG9wdGlvbnMpO1xuICAgIHNlbGYucmVtb3ZlRXZlbnRMaXN0ZW5lcigndGVzdC1vcHRpb25zJywgbnVsbCwgb3B0aW9ucyk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIC8vIEV2ZW50TGlzdGVuZXJPcHRpb25zIGFyZSBub3Qgc3VwcG9ydGVkXG4gIH1cbiAgcmV0dXJuIG9wdHNTdXBwb3J0ZWQ7XG59XG5cbi8qKlxuICAqIFJlc2V0cyB0aGUgdGVzdCBmb3Igd2hldGhlciBhZGRFdmVudExpc3RlbmVyIHN1cHBvcnRzIG9wdGlvbnMgb3Igbm90LlxuICAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0RXZ0TGlzdGVuZXJPcHRzU3VwcG9ydEZvclRlc3RpbmcoKSB7XG4gIG9wdHNTdXBwb3J0ZWQgPSB1bmRlZmluZWQ7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtpbnRlcm5hbExpc3RlbkltcGxlbWVudGF0aW9ufSBmcm9tICcuL2V2ZW50LWhlbHBlci1saXN0ZW4nO1xuaW1wb3J0IHt1c2VyfSBmcm9tICcuL2xvZyc7XG5cbi8qKiBAY29uc3Qge3N0cmluZ30gICovXG5jb25zdCBMT0FEX0ZBSUxVUkVfUFJFRklYID0gJ0ZhaWxlZCB0byBsb2FkOic7XG5cbi8qKlxuICogUmV0dXJucyBhIEN1c3RvbUV2ZW50IHdpdGggYSBnaXZlbiB0eXBlIGFuZCBkZXRhaWw7IHN1cHBvcnRzIGZhbGxiYWNrIGZvciBJRS5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZVxuICogQHBhcmFtIHshSnNvbk9iamVjdHxzdHJpbmd8dW5kZWZpbmVkfG51bGx9IGRldGFpbFxuICogQHBhcmFtIHtFdmVudEluaXQ9fSBvcHRfZXZlbnRJbml0XG4gKiBAcmV0dXJuIHshRXZlbnR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDdXN0b21FdmVudCh3aW4sIHR5cGUsIGRldGFpbCwgb3B0X2V2ZW50SW5pdCkge1xuICBjb25zdCBldmVudEluaXQgPSAvKiogQHR5cGUgeyFDdXN0b21FdmVudEluaXR9ICovICh7ZGV0YWlsfSk7XG4gIE9iamVjdC5hc3NpZ24oZXZlbnRJbml0LCBvcHRfZXZlbnRJbml0KTtcbiAgLy8gd2luLkN1c3RvbUV2ZW50IGlzIGEgZnVuY3Rpb24gb24gRWRnZSwgQ2hyb21lLCBGRiwgU2FmYXJpIGJ1dFxuICAvLyBpcyBhbiBvYmplY3Qgb24gSUUgMTEuXG4gIGlmICh0eXBlb2Ygd2luLkN1c3RvbUV2ZW50ID09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gbmV3IHdpbi5DdXN0b21FdmVudCh0eXBlLCBldmVudEluaXQpO1xuICB9IGVsc2Uge1xuICAgIC8vIERlcHJlY2F0ZWQgZmFsbGJhY2sgZm9yIElFLlxuICAgIGNvbnN0IGUgPSB3aW4uZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG4gICAgZS5pbml0Q3VzdG9tRXZlbnQoXG4gICAgICAgIHR5cGUsICEhZXZlbnRJbml0LmJ1YmJsZXMsICEhZXZlbnRJbml0LmNhbmNlbGFibGUsIGRldGFpbCk7XG4gICAgcmV0dXJuIGU7XG4gIH1cbn1cblxuLyoqXG4gKiBMaXN0ZW5zIGZvciB0aGUgc3BlY2lmaWVkIGV2ZW50IG9uIHRoZSBlbGVtZW50LlxuICogQHBhcmFtIHshRXZlbnRUYXJnZXR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFR5cGVcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oIUV2ZW50KX0gbGlzdGVuZXJcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0X2V2dExpc3RlbmVyT3B0c1xuICogQHJldHVybiB7IVVubGlzdGVuRGVmfVxuICovXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuKGVsZW1lbnQsIGV2ZW50VHlwZSwgbGlzdGVuZXIsIG9wdF9ldnRMaXN0ZW5lck9wdHMpIHtcbiAgcmV0dXJuIGludGVybmFsTGlzdGVuSW1wbGVtZW50YXRpb24oXG4gICAgICBlbGVtZW50LCBldmVudFR5cGUsIGxpc3RlbmVyLCBvcHRfZXZ0TGlzdGVuZXJPcHRzKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBkYXRhIHByb3BlcnR5IG9mIGFuIGV2ZW50IHdpdGggdGhlIGNvcnJlY3QgdHlwZS5cbiAqIEBwYXJhbSB7IUV2ZW50fHtkYXRhOiAhSnNvbk9iamVjdH19IGV2ZW50XG4gKiBAcmV0dXJuIHs/SnNvbk9iamVjdHxzdHJpbmd8dW5kZWZpbmVkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGF0YShldmVudCkge1xuICByZXR1cm4gLyoqIEB0eXBlIHs/SnNvbk9iamVjdHxzdHJpbmd8dW5kZWZpbmVkfSAqLyAoZXZlbnQuZGF0YSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZGV0YWlsIHByb3BlcnR5IG9mIGFuIGV2ZW50IHdpdGggdGhlIGNvcnJlY3QgdHlwZS5cbiAqIEBwYXJhbSB7IUV2ZW50fHtkZXRhaWw6ICFKc29uT2JqZWN0fX0gZXZlbnRcbiAqIEByZXR1cm4gez9Kc29uT2JqZWN0fHN0cmluZ3x1bmRlZmluZWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREZXRhaWwoZXZlbnQpIHtcbiAgcmV0dXJuIC8qKiBAdHlwZSB7P0pzb25PYmplY3R8c3RyaW5nfHVuZGVmaW5lZH0gKi8gKGV2ZW50LmRldGFpbCk7XG59XG5cbi8qKlxuICogTGlzdGVucyBmb3IgdGhlIHNwZWNpZmllZCBldmVudCBvbiB0aGUgZWxlbWVudCBhbmQgcmVtb3ZlcyB0aGUgbGlzdGVuZXJcbiAqIGFzIHNvb24gYXMgZXZlbnQgaGFzIGJlZW4gcmVjZWl2ZWQuXG4gKiBAcGFyYW0geyFFdmVudFRhcmdldH0gZWxlbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50VHlwZVxuICogQHBhcmFtIHtmdW5jdGlvbighRXZlbnQpfSBsaXN0ZW5lclxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRfZXZ0TGlzdGVuZXJPcHRzXG4gKiBAcmV0dXJuIHshVW5saXN0ZW5EZWZ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW5PbmNlKGVsZW1lbnQsIGV2ZW50VHlwZSwgbGlzdGVuZXIsIG9wdF9ldnRMaXN0ZW5lck9wdHMpIHtcbiAgbGV0IGxvY2FsTGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgY29uc3QgdW5saXN0ZW4gPSBpbnRlcm5hbExpc3RlbkltcGxlbWVudGF0aW9uKGVsZW1lbnQsIGV2ZW50VHlwZSwgZXZlbnQgPT4ge1xuICAgIHRyeSB7XG4gICAgICBsb2NhbExpc3RlbmVyKGV2ZW50KTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgLy8gRW5zdXJlIGxpc3RlbmVyIGlzIEdDJ2RcbiAgICAgIGxvY2FsTGlzdGVuZXIgPSBudWxsO1xuICAgICAgdW5saXN0ZW4oKTtcbiAgICB9XG4gIH0sIG9wdF9ldnRMaXN0ZW5lck9wdHMpO1xuICByZXR1cm4gdW5saXN0ZW47XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zICBhIHByb21pc2UgdGhhdCB3aWxsIHJlc29sdmUgYXMgc29vbiBhcyB0aGUgc3BlY2lmaWVkIGV2ZW50IGhhc1xuICogZmlyZWQgb24gdGhlIGVsZW1lbnQuXG4gKiBAcGFyYW0geyFFdmVudFRhcmdldH0gZWxlbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50VHlwZVxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRfZXZ0TGlzdGVuZXJPcHRzXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFVbmxpc3RlbkRlZik9fSBvcHRfY2FuY2VsIEFuIG9wdGlvbmFsIGZ1bmN0aW9uIHRoYXQsIHdoZW5cbiAqICAgICBwcm92aWRlZCwgd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGUgdW5saXN0ZW5lci4gVGhpcyBnaXZlcyB0aGUgY2FsbGVyXG4gKiAgICAgYWNjZXNzIHRvIHRoZSB1bmxpc3RlbmVyLCBzbyBpdCBtYXkgYmUgY2FsbGVkIG1hbnVhbGx5IHdoZW4gbmVjZXNzYXJ5LlxuICogQHJldHVybiB7IVByb21pc2U8IUV2ZW50Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpc3Rlbk9uY2VQcm9taXNlKGVsZW1lbnQsIGV2ZW50VHlwZSwgb3B0X2V2dExpc3RlbmVyT3B0cyxcbiAgb3B0X2NhbmNlbCkge1xuICBsZXQgdW5saXN0ZW47XG4gIGNvbnN0IGV2ZW50UHJvbWlzZSA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgIHVubGlzdGVuID0gbGlzdGVuT25jZShlbGVtZW50LCBldmVudFR5cGUsIHJlc29sdmUsIG9wdF9ldnRMaXN0ZW5lck9wdHMpO1xuICB9KTtcbiAgZXZlbnRQcm9taXNlLnRoZW4odW5saXN0ZW4sIHVubGlzdGVuKTtcbiAgaWYgKG9wdF9jYW5jZWwpIHtcbiAgICBvcHRfY2FuY2VsKHVubGlzdGVuKTtcbiAgfVxuICByZXR1cm4gZXZlbnRQcm9taXNlO1xufVxuXG5cbi8qKlxuICogV2hldGhlciB0aGUgc3BlY2lmaWVkIGVsZW1lbnQvd2luZG93IGhhcyBiZWVuIGxvYWRlZCBhbHJlYWR5LlxuICogQHBhcmFtIHshRWxlbWVudHwhV2luZG93fSBlbGVPcldpbmRvd1xuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTG9hZGVkKGVsZU9yV2luZG93KSB7XG4gIHJldHVybiAhIShlbGVPcldpbmRvdy5jb21wbGV0ZSB8fCBlbGVPcldpbmRvdy5yZWFkeVN0YXRlID09ICdjb21wbGV0ZSdcbiAgICAgIC8vIElmIHRoZSBwYXNzZWQgaW4gdGhpbmcgaXMgYSBXaW5kb3csIGluZmVyIGxvYWRlZCBzdGF0ZSBmcm9tXG4gICAgICAvL1xuICAgICAgfHwgKGVsZU9yV2luZG93LmRvY3VtZW50XG4gICAgICAgICAgJiYgZWxlT3JXaW5kb3cuZG9jdW1lbnQucmVhZHlTdGF0ZSA9PSAnY29tcGxldGUnKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2UgdGhhdCB3aWxsIHJlc29sdmUgb3IgZmFpbCBiYXNlZCBvbiB0aGUgZWxlT3JXaW5kb3cncyAnbG9hZCdcbiAqIGFuZCAnZXJyb3InIGV2ZW50cy4gT3B0aW9uYWxseSB0aGlzIG1ldGhvZCB0YWtlcyBhIHRpbWVvdXQsIHdoaWNoIHdpbGwgcmVqZWN0XG4gKiB0aGUgcHJvbWlzZSBpZiB0aGUgcmVzb3VyY2UgaGFzIG5vdCBsb2FkZWQgYnkgdGhlbi5cbiAqIEBwYXJhbSB7VH0gZWxlT3JXaW5kb3cgU3VwcG9ydHMgYm90aCBFbGVtZW50cyBhbmQgYXMgYSBzcGVjaWFsIGNhc2UgV2luZG93cy5cbiAqIEByZXR1cm4geyFQcm9taXNlPFQ+fVxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxvYWRQcm9taXNlKGVsZU9yV2luZG93KSB7XG4gIGxldCB1bmxpc3RlbkxvYWQ7XG4gIGxldCB1bmxpc3RlbkVycm9yO1xuICBpZiAoaXNMb2FkZWQoZWxlT3JXaW5kb3cpKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShlbGVPcldpbmRvdyk7XG4gIH1cbiAgY29uc3QgbG9hZGluZ1Byb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgLy8gTGlzdGVuIG9uY2Ugc2luY2UgSUUgNS82LzcgZmlyZSB0aGUgb25sb2FkIGV2ZW50IGNvbnRpbnVvdXNseSBmb3JcbiAgICAvLyBhbmltYXRlZCBHSUZzLlxuICAgIGNvbnN0IHt0YWdOYW1lfSA9IGVsZU9yV2luZG93O1xuICAgIGlmICh0YWdOYW1lID09PSAnQVVESU8nIHx8IHRhZ05hbWUgPT09ICdWSURFTycpIHtcbiAgICAgIHVubGlzdGVuTG9hZCA9IGxpc3Rlbk9uY2UoZWxlT3JXaW5kb3csICdsb2Fkc3RhcnQnLCByZXNvbHZlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdW5saXN0ZW5Mb2FkID0gbGlzdGVuT25jZShlbGVPcldpbmRvdywgJ2xvYWQnLCByZXNvbHZlKTtcbiAgICB9XG4gICAgLy8gRm9yIGVsZW1lbnRzLCB1bmxpc3RlbiBvbiBlcnJvciAoZG9uJ3QgZm9yIFdpbmRvd3MpLlxuICAgIGlmICh0YWdOYW1lKSB7XG4gICAgICB1bmxpc3RlbkVycm9yID0gbGlzdGVuT25jZShlbGVPcldpbmRvdywgJ2Vycm9yJywgcmVqZWN0KTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBsb2FkaW5nUHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICBpZiAodW5saXN0ZW5FcnJvcikge1xuICAgICAgdW5saXN0ZW5FcnJvcigpO1xuICAgIH1cbiAgICByZXR1cm4gZWxlT3JXaW5kb3c7XG4gIH0sICgpID0+IHtcbiAgICBpZiAodW5saXN0ZW5Mb2FkKSB7XG4gICAgICB1bmxpc3RlbkxvYWQoKTtcbiAgICB9XG4gICAgZmFpbGVkVG9Mb2FkKGVsZU9yV2luZG93KTtcbiAgfSk7XG59XG5cbi8qKlxuICogRW1pdCBlcnJvciBvbiBsb2FkIGZhaWx1cmUuXG4gKiBAcGFyYW0geyFFbGVtZW50fCFXaW5kb3d9IGVsZU9yV2luZG93IFN1cHBvcnRzIGJvdGggRWxlbWVudHMgYW5kIGFzIGEgc3BlY2lhbFxuICogICAgIGNhc2UgV2luZG93cy5cbiAqL1xuZnVuY3Rpb24gZmFpbGVkVG9Mb2FkKGVsZU9yV2luZG93KSB7XG4gIC8vIFJlcG9ydCBmYWlsZWQgbG9hZHMgYXMgdXNlciBlcnJvcnMgc28gdGhhdCB0aGV5IGF1dG9tYXRpY2FsbHkgZ29cbiAgLy8gaW50byB0aGUgXCJkb2N1bWVudCBlcnJvclwiIGJ1Y2tldC5cbiAgbGV0IHRhcmdldCA9IGVsZU9yV2luZG93O1xuICBpZiAodGFyZ2V0ICYmIHRhcmdldC5zcmMpIHtcbiAgICB0YXJnZXQgPSB0YXJnZXQuc3JjO1xuICB9XG4gIHRocm93IHVzZXIoKS5jcmVhdGVFcnJvcihMT0FEX0ZBSUxVUkVfUFJFRklYLCB0YXJnZXQpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGVycm9yIG1lc3NhZ2UgaXMgd2FzIGNyZWF0ZWQgZm9yIGEgbG9hZCBlcnJvci5cbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIEFuIGVycm9yIG1lc3NhZ2VcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0xvYWRFcnJvck1lc3NhZ2UobWVzc2FnZSkge1xuICByZXR1cm4gbWVzc2FnZS5pbmRleE9mKExPQURfRkFJTFVSRV9QUkVGSVgpICE9IC0xO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBFeHBlcmltZW50cyBzeXN0ZW0gYWxsb3dzIGEgZGV2ZWxvcGVyIHRvIG9wdC1pbiB0byB0ZXN0XG4gKiBmZWF0dXJlcyB0aGF0IGFyZSBub3QgeWV0IGZ1bGx5IHRlc3RlZC5cbiAqXG4gKiBFeHBlcmltZW50cyBwYWdlOiBodHRwczovL2Nkbi5hbXBwcm9qZWN0Lm9yZy9leHBlcmltZW50cy5odG1sICpcbiAqL1xuXG5pbXBvcnQge2dldENvb2tpZSwgc2V0Q29va2llfSBmcm9tICcuL2Nvb2tpZXMnO1xuaW1wb3J0IHtoYXNPd259IGZyb20gJy4vdXRpbHMvb2JqZWN0JztcbmltcG9ydCB7cGFyc2VRdWVyeVN0cmluZ30gZnJvbSAnLi91cmwnO1xuXG4vKiogQGNvbnN0IHtzdHJpbmd9ICovXG5jb25zdCBDT09LSUVfTkFNRSA9ICdBTVBfRVhQJztcblxuLyoqIEBjb25zdCB7bnVtYmVyfSAqL1xuY29uc3QgQ09PS0lFX01BWF9BR0VfREFZUyA9IDE4MDsgLy8gNiBtb250aFxuXG4vKiogQGNvbnN0IHt0aW1lfSAqL1xuY29uc3QgQ09PS0lFX0VYUElSQVRJT05fSU5URVJWQUwgPSBDT09LSUVfTUFYX0FHRV9EQVlTICogMjQgKiA2MCAqIDYwICogMTAwMDtcblxuLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuY29uc3QgVE9HR0xFU19XSU5ET1dfUFJPUEVSVFkgPSAnX19BTVBfX0VYUEVSSU1FTlRfVE9HR0xFUyc7XG5cbi8qKlxuICogQHR5cGVkZWYge3tcbiAqICAgaXNUcmFmZmljRWxpZ2libGU6IGZ1bmN0aW9uKCFXaW5kb3cpOmJvb2xlYW4sXG4gKiAgIGJyYW5jaGVzOiAhQXJyYXk8c3RyaW5nPlxuICogfX1cbiAqL1xuZXhwb3J0IGxldCBFeHBlcmltZW50SW5mbztcblxuLyoqXG4gKiBXaGV0aGVyIHdlIGFyZSBpbiBjYW5hcnkuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQ2FuYXJ5KHdpbikge1xuICByZXR1cm4gISEod2luLkFNUF9DT05GSUcgJiYgd2luLkFNUF9DT05GSUcuY2FuYXJ5KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGJpbmFyeSB0eXBlLCBlLmcuLCBjYW5hcnksIGNvbnRyb2wsIG9yIHByb2R1Y3Rpb24uXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QmluYXJ5VHlwZSh3aW4pIHtcbiAgcmV0dXJuIHdpbi5BTVBfQ09ORklHICYmIHdpbi5BTVBfQ09ORklHLnR5cGUgP1xuICAgIHdpbi5BTVBfQ09ORklHLnR5cGUgOiAndW5rbm93bic7XG59XG5cbi8qKlxuICogV2hldGhlciB0aGUgc3BlY2lmaWVkIGV4cGVyaW1lbnQgaXMgb24gb3Igb2ZmLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBleHBlcmltZW50SWRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0V4cGVyaW1lbnRPbih3aW4sIGV4cGVyaW1lbnRJZCkge1xuICBjb25zdCB0b2dnbGVzID0gZXhwZXJpbWVudFRvZ2dsZXMod2luKTtcbiAgcmV0dXJuICEhdG9nZ2xlc1tleHBlcmltZW50SWRdO1xufVxuXG4vKipcbiAqIFRvZ2dsZXMgdGhlIGV4cGVyaW1lbnQgb24gb3Igb2ZmLiBSZXR1cm5zIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGV4cGVyaW1lbnRcbiAqIGFmdGVyIHRvZ2dsaW5nIGlzIGRvbmUuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IGV4cGVyaW1lbnRJZFxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X29uXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfdHJhbnNpZW50RXhwZXJpbWVudCAgV2hldGhlciB0byB0b2dnbGUgdGhlXG4gKiAgICAgZXhwZXJpbWVudCBzdGF0ZSBcInRyYW5zaWVudGx5XCIgKGkuZS4sIGZvciB0aGlzIHBhZ2UgbG9hZCBvbmx5KSBvclxuICogICAgIGR1cmFibHkgKGJ5IHNhdmluZyB0aGUgZXhwZXJpbWVudCBJRHMgdG8gdGhlIGNvb2tpZSBhZnRlciB0b2dnbGluZykuXG4gKiAgICAgRGVmYXVsdDogZmFsc2UgKHNhdmUgZHVyYWJseSkuXG4gKiBAcmV0dXJuIHtib29sZWFufSBOZXcgc3RhdGUgZm9yIGV4cGVyaW1lbnRJZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZUV4cGVyaW1lbnQod2luLCBleHBlcmltZW50SWQsIG9wdF9vbixcbiAgb3B0X3RyYW5zaWVudEV4cGVyaW1lbnQpIHtcbiAgY29uc3QgY3VycmVudGx5T24gPSBpc0V4cGVyaW1lbnRPbih3aW4sIC8qT0sqL2V4cGVyaW1lbnRJZCk7XG4gIGNvbnN0IG9uID0gISEob3B0X29uICE9PSB1bmRlZmluZWQgPyBvcHRfb24gOiAhY3VycmVudGx5T24pO1xuICBpZiAob24gIT0gY3VycmVudGx5T24pIHtcbiAgICBjb25zdCB0b2dnbGVzID0gZXhwZXJpbWVudFRvZ2dsZXMod2luKTtcbiAgICB0b2dnbGVzW2V4cGVyaW1lbnRJZF0gPSBvbjtcblxuICAgIGlmICghb3B0X3RyYW5zaWVudEV4cGVyaW1lbnQpIHtcbiAgICAgIGNvbnN0IGNvb2tpZVRvZ2dsZXMgPSBnZXRFeHBlcmltZW50VG9nZ2xlc0Zyb21Db29raWUod2luKTtcbiAgICAgIGNvb2tpZVRvZ2dsZXNbZXhwZXJpbWVudElkXSA9IG9uO1xuICAgICAgc2F2ZUV4cGVyaW1lbnRUb2dnbGVzVG9Db29raWUod2luLCBjb29raWVUb2dnbGVzKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG9uO1xufVxuXG4vKipcbiAqIENhbGN1bGF0ZSB3aGV0aGVyIHRoZSBleHBlcmltZW50IGlzIG9uIG9yIG9mZiBiYXNlZCBvZmYgb2YgdGhlXG4gKiBjb29raWVGbGFnIG9yIHRoZSBnbG9iYWwgY29uZmlnIGZyZXF1ZW5jeSBnaXZlbi5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHshT2JqZWN0PHN0cmluZywgYm9vbGVhbj59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHBlcmltZW50VG9nZ2xlcyh3aW4pIHtcbiAgaWYgKHdpbltUT0dHTEVTX1dJTkRPV19QUk9QRVJUWV0pIHtcbiAgICByZXR1cm4gd2luW1RPR0dMRVNfV0lORE9XX1BST1BFUlRZXTtcbiAgfVxuICB3aW5bVE9HR0xFU19XSU5ET1dfUFJPUEVSVFldID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgY29uc3QgdG9nZ2xlcyA9IHdpbltUT0dHTEVTX1dJTkRPV19QUk9QRVJUWV07XG5cbiAgLy8gUmVhZCB0aGUgZGVmYXVsdCBjb25maWcgb2YgdGhpcyBidWlsZC5cbiAgaWYgKHdpbi5BTVBfQ09ORklHKSB7XG4gICAgZm9yIChjb25zdCBleHBlcmltZW50SWQgaW4gd2luLkFNUF9DT05GSUcpIHtcbiAgICAgIGNvbnN0IGZyZXF1ZW5jeSA9IHdpbi5BTVBfQ09ORklHW2V4cGVyaW1lbnRJZF07XG4gICAgICBpZiAodHlwZW9mIGZyZXF1ZW5jeSA9PT0gJ251bWJlcicgJiYgZnJlcXVlbmN5ID49IDAgJiYgZnJlcXVlbmN5IDw9IDEpIHtcbiAgICAgICAgdG9nZ2xlc1tleHBlcmltZW50SWRdID0gTWF0aC5yYW5kb20oKSA8IGZyZXF1ZW5jeTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLy8gUmVhZCBkb2N1bWVudCBsZXZlbCBvdmVycmlkZSBmcm9tIG1ldGEgdGFnLlxuICBpZiAod2luLkFNUF9DT05GSUdcbiAgICAgICYmIEFycmF5LmlzQXJyYXkod2luLkFNUF9DT05GSUdbJ2FsbG93LWRvYy1vcHQtaW4nXSlcbiAgICAgICYmIHdpbi5BTVBfQ09ORklHWydhbGxvdy1kb2Mtb3B0LWluJ10ubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IGFsbG93ZWQgPSB3aW4uQU1QX0NPTkZJR1snYWxsb3ctZG9jLW9wdC1pbiddO1xuICAgIGNvbnN0IG1ldGEgPVxuICAgICAgICB3aW4uZG9jdW1lbnQuaGVhZC5xdWVyeVNlbGVjdG9yKCdtZXRhW25hbWU9XCJhbXAtZXhwZXJpbWVudHMtb3B0LWluXCJdJyk7XG4gICAgaWYgKG1ldGEpIHtcbiAgICAgIGNvbnN0IG9wdGVkSW5FeHBlcmltZW50cyA9IG1ldGEuZ2V0QXR0cmlidXRlKCdjb250ZW50Jykuc3BsaXQoJywnKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3B0ZWRJbkV4cGVyaW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChhbGxvd2VkLmluZGV4T2Yob3B0ZWRJbkV4cGVyaW1lbnRzW2ldKSAhPSAtMSkge1xuICAgICAgICAgIHRvZ2dsZXNbb3B0ZWRJbkV4cGVyaW1lbnRzW2ldXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBPYmplY3QuYXNzaWduKHRvZ2dsZXMsIGdldEV4cGVyaW1lbnRUb2dnbGVzRnJvbUNvb2tpZSh3aW4pKTtcblxuICBpZiAod2luLkFNUF9DT05GSUdcbiAgICAgICYmIEFycmF5LmlzQXJyYXkod2luLkFNUF9DT05GSUdbJ2FsbG93LXVybC1vcHQtaW4nXSlcbiAgICAgICYmIHdpbi5BTVBfQ09ORklHWydhbGxvdy11cmwtb3B0LWluJ10ubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IGFsbG93ZWQgPSB3aW4uQU1QX0NPTkZJR1snYWxsb3ctdXJsLW9wdC1pbiddO1xuICAgIGNvbnN0IGhhc2ggPSB3aW4ubG9jYXRpb24ub3JpZ2luYWxIYXNoIHx8IHdpbi5sb2NhdGlvbi5oYXNoO1xuICAgIGNvbnN0IHBhcmFtcyA9IHBhcnNlUXVlcnlTdHJpbmcoaGFzaCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGxvd2VkLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBwYXJhbSA9IHBhcmFtc1tgZS0ke2FsbG93ZWRbaV19YF07XG4gICAgICBpZiAocGFyYW0gPT0gJzEnKSB7XG4gICAgICAgIHRvZ2dsZXNbYWxsb3dlZFtpXV0gPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKHBhcmFtID09ICcwJykge1xuICAgICAgICB0b2dnbGVzW2FsbG93ZWRbaV1dID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB0b2dnbGVzO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGNhY2hlZCBleHBlcmltZW50cyB0b2dnbGVzLCBvciBudWxsIGlmIHRoZXkgaGF2ZSBub3QgYmVlblxuICogY29tcHV0ZWQgeWV0LlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4ge09iamVjdDxzdHJpbmcsIGJvb2xlYW4+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXhwZXJpbWVudFRvZ2dsZXNPck51bGwod2luKSB7XG4gIHJldHVybiB3aW5bVE9HR0xFU19XSU5ET1dfUFJPUEVSVFldIHx8IG51bGw7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHNldCBvZiBleHBlcmltZW50IElEcyBjdXJyZW50bHkgb24uXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fVxuICovXG5mdW5jdGlvbiBnZXRFeHBlcmltZW50VG9nZ2xlc0Zyb21Db29raWUod2luKSB7XG4gIGNvbnN0IGV4cGVyaW1lbnRDb29raWUgPSBnZXRDb29raWUod2luLCBDT09LSUVfTkFNRSk7XG4gIGNvbnN0IHRva2VucyA9IGV4cGVyaW1lbnRDb29raWUgPyBleHBlcmltZW50Q29va2llLnNwbGl0KC9cXHMqLFxccyovZykgOiBbXTtcblxuICBjb25zdCB0b2dnbGVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAodG9rZW5zW2ldLmxlbmd0aCA9PSAwKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKHRva2Vuc1tpXVswXSA9PSAnLScpIHtcbiAgICAgIHRvZ2dsZXNbdG9rZW5zW2ldLnN1YnN0cigxKV0gPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdG9nZ2xlc1t0b2tlbnNbaV1dID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdG9nZ2xlcztcbn1cblxuLyoqXG4gKiBTYXZlcyBhIHNldCBvZiBleHBlcmltZW50IElEcyBjdXJyZW50bHkgb24uXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgYm9vbGVhbj59IHRvZ2dsZXNcbiAqL1xuZnVuY3Rpb24gc2F2ZUV4cGVyaW1lbnRUb2dnbGVzVG9Db29raWUod2luLCB0b2dnbGVzKSB7XG4gIGNvbnN0IGV4cGVyaW1lbnRJZHMgPSBbXTtcbiAgZm9yIChjb25zdCBleHBlcmltZW50IGluIHRvZ2dsZXMpIHtcbiAgICBleHBlcmltZW50SWRzLnB1c2goKHRvZ2dsZXNbZXhwZXJpbWVudF0gPT09IGZhbHNlID8gJy0nIDogJycpICsgZXhwZXJpbWVudCk7XG4gIH1cblxuICBzZXRDb29raWUod2luLCBDT09LSUVfTkFNRSwgZXhwZXJpbWVudElkcy5qb2luKCcsJyksXG4gICAgICBEYXRlLm5vdygpICsgQ09PS0lFX0VYUElSQVRJT05fSU5URVJWQUwsIHtcbiAgICAgICAgLy8gU2V0IGV4cGxpY2l0IGRvbWFpbiwgc28gdGhlIGNvb2tpZSBnZXRzIHNlbmQgdG8gc3ViIGRvbWFpbnMuXG4gICAgICAgIGRvbWFpbjogd2luLmxvY2F0aW9uLmhvc3RuYW1lLFxuICAgICAgICBhbGxvd09uUHJveHlPcmlnaW46IHRydWUsXG4gICAgICB9KTtcbn1cblxuLyoqXG4gKiBTZWUgZ2V0RXhwZXJpbWVudFRvZ2dsZXNGcm9tQ29va2llKCkuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fVxuICogQHZpc2libGVGb3JUZXN0aW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFeHBlcmltZW50VG9nbGVzRnJvbUNvb2tpZUZvclRlc3Rpbmcod2luKSB7XG4gIHJldHVybiBnZXRFeHBlcmltZW50VG9nZ2xlc0Zyb21Db29raWUod2luKTtcbn1cblxuLyoqXG4gKiBSZXNldHMgdGhlIGV4cGVyaW1lbnRzVG9nZ2xlIGNhY2hlIGZvciB0ZXN0aW5nIHB1cnBvc2VzLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEB2aXNpYmxlRm9yVGVzdGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRFeHBlcmltZW50VG9nZ2xlc0ZvclRlc3Rpbmcod2luKSB7XG4gIHNldENvb2tpZSh3aW4sIENPT0tJRV9OQU1FLCAnJywgMCwge1xuICAgIGRvbWFpbjogd2luLmxvY2F0aW9uLmhvc3RuYW1lLFxuICB9KTtcbiAgd2luW1RPR0dMRVNfV0lORE9XX1BST1BFUlRZXSA9IG51bGw7XG59XG5cbi8qKlxuICogSW4gc29tZSBicm93c2VyIGltcGxlbWVudGF0aW9ucyBvZiBNYXRoLnJhbmRvbSgpLCBzZXF1ZW50aWFsIGNhbGxzIG9mXG4gKiBNYXRoLnJhbmRvbSgpIGFyZSBjb3JyZWxhdGVkIGFuZCBjYW4gY2F1c2UgYSBiaWFzLiAgSW4gcGFydGljdWxhcixcbiAqIGlmIHRoZSBwcmV2aW91cyByYW5kb20oKSBjYWxsIHdhcyA8IDAuMDAxIChhcyBpdCB3aWxsIGJlIGlmIHdlIHNlbGVjdFxuICogaW50byBhbiBleHBlcmltZW50KSwgdGhlIG5leHQgdmFsdWUgY291bGQgYmUgbGVzcyB0aGFuIDAuNSBtb3JlIHRoYW5cbiAqIDUwLjclIG9mIHRoZSB0aW1lLiAgVGhpcyBwcm92aWRlcyBhbiBpbXBsZW1lbnRhdGlvbiB0aGF0IHJvb3RzIGRvd24gaW50b1xuICogdGhlIGNyeXB0byBBUEksIHdoZW4gYXZhaWxhYmxlLCB0byBwcm9kdWNlIGxlc3MgYmlhc2VkIHNhbXBsZXMuXG4gKlxuICogQHJldHVybiB7bnVtYmVyfSBQc2V1ZG8tcmFuZG9tIGZsb2F0aW5nLXBvaW50IHZhbHVlIG9uIHRoZSByYW5nZSBbMCwgMSkuXG4gKi9cbmZ1bmN0aW9uIHNsb3dCdXRBY2N1cmF0ZVBybmcoKSB7XG4gIC8vIFRPRE8odGRybCk6IEltcGxlbWVudC5cbiAgcmV0dXJuIE1hdGgucmFuZG9tKCk7XG59XG5cbi8qKlxuICogQ29udGFpbmVyIGZvciBhbHRlcm5hdGUgcmFuZG9tIG51bWJlciBnZW5lcmF0b3IgaW1wbGVtZW50YXRpb25zLiAgVGhpc1xuICogYWxsb3dzIHVzIHRvIHNldCBhbiBcImFjY3VyYXRlXCIgUFJORyBmb3IgYnJhbmNoIHNlbGVjdGlvbiwgYnV0IHRvIG1vY2sgaXRcbiAqIG91dCBlYXNpbHkgaW4gdGVzdHMuXG4gKlxuICogQHZpc2libGVGb3JUZXN0aW5nXG4gKiBAY29uc3QgeyF7YWNjdXJhdGVQcm5nOiBmdW5jdGlvbigpOm51bWJlcn19XG4gKi9cbmV4cG9ydCBjb25zdCBSQU5ET01fTlVNQkVSX0dFTkVSQVRPUlMgPSB7XG4gIGFjY3VyYXRlUHJuZzogc2xvd0J1dEFjY3VyYXRlUHJuZyxcbn07XG5cbi8qKlxuICogU2VsZWN0cywgdW5pZm9ybWx5IGF0IHJhbmRvbSwgYSBzaW5nbGUgaXRlbSBmcm9tIHRoZSBhcnJheS5cbiAqIEBwYXJhbSB7IUFycmF5PHN0cmluZz59IGFyciBPYmplY3QgdG8gc2VsZWN0IGZyb20uXG4gKiBAcmV0dXJuIHs/c3RyaW5nfSBTaW5nbGUgaXRlbSBmcm9tIGFyciBvciBudWxsIGlmIGFyciB3YXMgZW1wdHkuXG4gKi9cbmZ1bmN0aW9uIHNlbGVjdFJhbmRvbUl0ZW0oYXJyKSB7XG4gIGNvbnN0IHJuID0gUkFORE9NX05VTUJFUl9HRU5FUkFUT1JTLmFjY3VyYXRlUHJuZygpO1xuICByZXR1cm4gYXJyW01hdGguZmxvb3Iocm4gKiBhcnIubGVuZ3RoKV0gfHwgbnVsbDtcbn1cblxuLyoqXG4gKiBTZWxlY3RzIHdoaWNoIHBhZ2UtbGV2ZWwgZXhwZXJpbWVudCBicmFuY2hlcyBhcmUgZW5hYmxlZC4gSWYgYSBnaXZlblxuICogZXhwZXJpbWVudCBuYW1lIGlzIGFscmVhZHkgc2V0IChpbmNsdWRpbmcgdG8gdGhlIG51bGwgLyBubyBicmFuY2hlcyBzZWxlY3RlZFxuICogc3RhdGUpLCB0aGlzIHdvbid0IGFsdGVyIGl0cyBzdGF0ZS5cbiAqXG4gKiBDaGVjayB3aGV0aGVyIGEgZ2l2ZW4gZXhwZXJpbWVudCBpcyBzZXQgdXNpbmcgaXNFeHBlcmltZW50T24od2luLFxuICogZXhwZXJpbWVudE5hbWUpIGFuZCwgaWYgaXQgaXMgb24sIGxvb2sgZm9yIHdoaWNoIGJyYW5jaCBpcyBzZWxlY3RlZCBpblxuICogd2luLmV4cGVyaW1lbnRCcmFuY2hlc1tleHBlcmltZW50TmFtZV0uXG4gKlxuICogQHBhcmFtIHshV2luZG93fSB3aW4gV2luZG93IGNvbnRleHQgb24gd2hpY2ggdG8gc2F2ZSBleHBlcmltZW50XG4gKiAgICAgc2VsZWN0aW9uIHN0YXRlLlxuICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgIUV4cGVyaW1lbnRJbmZvPn0gZXhwZXJpbWVudHMgIFNldCBvZiBleHBlcmltZW50cyB0b1xuICogICAgIGNvbmZpZ3VyZSBmb3IgdGhpcyBwYWdlIGxvYWQuXG4gKiBAcmV0dXJuIHshT2JqZWN0PHN0cmluZywgc3RyaW5nPn0gTWFwIG9mIGV4cGVyaW1lbnQgbmFtZXMgdG8gc2VsZWN0ZWRcbiAqICAgICBicmFuY2hlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJhbmRvbWx5U2VsZWN0VW5zZXRFeHBlcmltZW50cyh3aW4sIGV4cGVyaW1lbnRzKSB7XG4gIHdpbi5leHBlcmltZW50QnJhbmNoZXMgPSB3aW4uZXhwZXJpbWVudEJyYW5jaGVzIHx8IHt9O1xuICBjb25zdCBzZWxlY3RlZEV4cGVyaW1lbnRzID0ge307XG4gIGZvciAoY29uc3QgZXhwZXJpbWVudE5hbWUgaW4gZXhwZXJpbWVudHMpIHtcbiAgICAvLyBTa2lwIGV4cGVyaW1lbnROYW1lIGlmIGl0IGlzIG5vdCBhIGtleSBvZiBleHBlcmltZW50cyBvYmplY3Qgb3IgaWYgaXRcbiAgICAvLyBoYXMgYWxyZWFkeSBiZWVuIHBvcHVsYXRlZCBieSBzb21lIG90aGVyIHByb3BlcnR5LlxuICAgIGlmICghaGFzT3duKGV4cGVyaW1lbnRzLCBleHBlcmltZW50TmFtZSkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAoaGFzT3duKHdpbi5leHBlcmltZW50QnJhbmNoZXMsIGV4cGVyaW1lbnROYW1lKSkge1xuICAgICAgc2VsZWN0ZWRFeHBlcmltZW50c1tleHBlcmltZW50TmFtZV0gPVxuICAgICAgICAgIHdpbi5leHBlcmltZW50QnJhbmNoZXNbZXhwZXJpbWVudE5hbWVdO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKCFleHBlcmltZW50c1tleHBlcmltZW50TmFtZV0uaXNUcmFmZmljRWxpZ2libGUgfHxcbiAgICAgICAgIWV4cGVyaW1lbnRzW2V4cGVyaW1lbnROYW1lXS5pc1RyYWZmaWNFbGlnaWJsZSh3aW4pKSB7XG4gICAgICB3aW4uZXhwZXJpbWVudEJyYW5jaGVzW2V4cGVyaW1lbnROYW1lXSA9IG51bGw7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBJZiB3ZSdyZSBpbiB0aGUgZXhwZXJpbWVudCwgYnV0IHdlIGhhdmVuJ3QgYWxyZWFkeSBmb3JjZWQgYSBzcGVjaWZpY1xuICAgIC8vIGV4cGVyaW1lbnQgYnJhbmNoIChlLmcuLCB2aWEgYSB0ZXN0IHNldHVwKSwgdGhlbiByYW5kb21pemUgdGhlIGJyYW5jaFxuICAgIC8vIGNob2ljZS5cbiAgICBpZiAoIXdpbi5leHBlcmltZW50QnJhbmNoZXNbZXhwZXJpbWVudE5hbWVdICYmXG4gICAgICBpc0V4cGVyaW1lbnRPbih3aW4sIC8qT0sqL2V4cGVyaW1lbnROYW1lKSkge1xuICAgICAgY29uc3Qge2JyYW5jaGVzfSA9IGV4cGVyaW1lbnRzW2V4cGVyaW1lbnROYW1lXTtcbiAgICAgIHdpbi5leHBlcmltZW50QnJhbmNoZXNbZXhwZXJpbWVudE5hbWVdID0gc2VsZWN0UmFuZG9tSXRlbShicmFuY2hlcyk7XG4gICAgICBzZWxlY3RlZEV4cGVyaW1lbnRzW2V4cGVyaW1lbnROYW1lXSA9XG4gICAgICAgICAgd2luLmV4cGVyaW1lbnRCcmFuY2hlc1tleHBlcmltZW50TmFtZV07XG4gICAgfVxuICB9XG4gIHJldHVybiBzZWxlY3RlZEV4cGVyaW1lbnRzO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGV4cGVyaW1lbnQgYnJhbmNoIGVuYWJsZWQgZm9yIHRoZSBnaXZlbiBleHBlcmltZW50IElELlxuICogRm9yIGV4YW1wbGUsICdjb250cm9sJyBvciAnZXhwZXJpbWVudCcuXG4gKlxuICogQHBhcmFtIHshV2luZG93fSB3aW4gV2luZG93IGNvbnRleHQgdG8gY2hlY2sgZm9yIGV4cGVyaW1lbnQgc3RhdGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gZXhwZXJpbWVudE5hbWUgTmFtZSBvZiB0aGUgZXhwZXJpbWVudCB0byBjaGVjay5cbiAqIEByZXR1cm4gez9zdHJpbmd9IEFjdGl2ZSBleHBlcmltZW50IGJyYW5jaCBJRCBmb3IgZXhwZXJpbWVudE5hbWUgKHBvc3NpYmx5XG4gKiAgICAgbnVsbCBpZiBleHBlcmltZW50TmFtZSBoYXMgYmVlbiB0ZXN0ZWQgYnV0IG5vIGJyYW5jaCB3YXMgZW5hYmxlZCkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFeHBlcmltZW50QnJhbmNoKHdpbiwgZXhwZXJpbWVudE5hbWUpIHtcbiAgcmV0dXJuIHdpbi5leHBlcmltZW50QnJhbmNoZXMgPyB3aW4uZXhwZXJpbWVudEJyYW5jaGVzW2V4cGVyaW1lbnROYW1lXSA6IG51bGw7XG59XG5cbi8qKlxuICogRm9yY2UgZW5hYmxlIChvciBkaXNhYmxlKSBhIHNwZWNpZmljIGJyYW5jaCBvZiBhIGdpdmVuIGV4cGVyaW1lbnQgbmFtZS5cbiAqIERpc2FibGVzIHRoZSBleHBlcmltZW50IG5hbWUgYWx0b2dldGhlciBpZiBicmFuY2hJZCBpcyBmYWxzZWlzaC5cbiAqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpbiBXaW5kb3cgY29udGV4dCB0byBjaGVjayBmb3IgZXhwZXJpbWVudCBzdGF0ZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBleHBlcmltZW50TmFtZSBOYW1lIG9mIHRoZSBleHBlcmltZW50IHRvIGNoZWNrLlxuICogQHBhcmFtIHs/c3RyaW5nfSBicmFuY2hJZCBJRCBvZiBicmFuY2ggdG8gZm9yY2Ugb3IgbnVsbCB0byBkaXNhYmxlXG4gKiAgICAgYWx0b2dldGhlci5cbiAqIEB2aXNpYmxlRm9yVGVzdGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gZm9yY2VFeHBlcmltZW50QnJhbmNoKHdpbiwgZXhwZXJpbWVudE5hbWUsIGJyYW5jaElkKSB7XG4gIHdpbi5leHBlcmltZW50QnJhbmNoZXMgPSB3aW4uZXhwZXJpbWVudEJyYW5jaGVzIHx8IHt9O1xuICB0b2dnbGVFeHBlcmltZW50KHdpbiwgZXhwZXJpbWVudE5hbWUsICEhYnJhbmNoSWQsIHRydWUpO1xuICB3aW4uZXhwZXJpbWVudEJyYW5jaGVzW2V4cGVyaW1lbnROYW1lXSA9IGJyYW5jaElkO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Q29tbW9uU2lnbmFsc30gZnJvbSAnLi9jb21tb24tc2lnbmFscyc7XG5pbXBvcnQge09ic2VydmFibGV9IGZyb20gJy4vb2JzZXJ2YWJsZSc7XG5pbXBvcnQge1NlcnZpY2VzfSBmcm9tICcuL3NlcnZpY2VzJztcbmltcG9ydCB7U2lnbmFsc30gZnJvbSAnLi91dGlscy9zaWduYWxzJztcbmltcG9ydCB7Y2xvc2VzdEJ5U2VsZWN0b3IsIGVzY2FwZUh0bWx9IGZyb20gJy4vZG9tJztcbmltcG9ydCB7ZGV2LCByZXRocm93QXN5bmMsIHVzZXJ9IGZyb20gJy4vbG9nJztcbmltcG9ydCB7ZGlzcG9zZVNlcnZpY2VzRm9yRW1iZWQsIGdldFRvcFdpbmRvd30gZnJvbSAnLi9zZXJ2aWNlJztcbmltcG9ydCB7aXNEb2N1bWVudFJlYWR5fSBmcm9tICcuL2RvY3VtZW50LXJlYWR5JztcbmltcG9ydCB7bGF5b3V0UmVjdEx0d2gsIG1vdmVMYXlvdXRSZWN0fSBmcm9tICcuL2xheW91dC1yZWN0JztcbmltcG9ydCB7bG9hZFByb21pc2V9IGZyb20gJy4vZXZlbnQtaGVscGVyJztcbmltcG9ydCB7XG4gIHB4LFxuICByZXNldFN0eWxlcyxcbiAgc2V0SW1wb3J0YW50U3R5bGVzLFxuICBzZXRTdHlsZSxcbiAgc2V0U3R5bGVzLFxufSBmcm9tICcuL3N0eWxlJztcbmltcG9ydCB7dG9XaW59IGZyb20gJy4vdHlwZXMnO1xuXG5cbi8qKiBAY29uc3Qge3N0cmluZ30gKi9cbmNvbnN0IEVNQkVEX1BST1AgPSAnX19BTVBfRU1CRURfXyc7XG5cbi8qKiBAY29uc3QgeyFBcnJheTxzdHJpbmc+fSAqL1xuY29uc3QgRVhDTFVERV9JTklfTE9BRCA9XG4gICAgWydBTVAtQUQnLCAnQU1QLUFOQUxZVElDUycsICdBTVAtUElYRUwnLCAnQU1QLUFELUVYSVQnXTtcblxuXG4vKipcbiAqIFBhcmFtZXRlcnMgdXNlZCB0byBjcmVhdGUgdGhlIG5ldyBcImZyaWVuZGx5IGlmcmFtZVwiIGVtYmVkLlxuICogLSBodG1sOiBUaGUgY29tcGxldGUgY29udGVudCBvZiBhbiBBTVAgZW1iZWQsIHdoaWNoIGlzIGl0c2VsZiBhbiBBTVBcbiAqICAgZG9jdW1lbnQuIENhbiBpbmNsdWRlIHdoYXRldmVyIGlzIG5vcm1hbGx5IGFsbG93ZWQgaW4gYW4gQU1QIGRvY3VtZW50LFxuICogICBleGNlcHQgZm9yIEFNUCBgPHNjcmlwdD5gIGRlY2xhcmF0aW9ucy4gVGhvc2Ugc2hvdWxkIGJlIHBhc3NlZCBhcyBhblxuICogICBhcnJheSBvZiBgZXh0ZW5zaW9uSWRzYC5cbiAqIC0gZXh0ZW5zaW9uc0lkczogQW4gb3B0aW9uYWwgYXJyYXkgb2YgQU1QIGV4dGVuc2lvbiBJRHMgdXNlZCBpbiB0aGlzIGVtYmVkLlxuICogLSBmb250czogQW4gb3B0aW9uYWwgYXJyYXkgb2YgZm9udHMgdXNlZCBpbiB0aGlzIGVtYmVkLlxuICpcbiAqIEB0eXBlZGVmIHt7XG4gKiAgIGhvc3Q6ICg/QW1wRWxlbWVudHx1bmRlZmluZWQpLFxuICogICB1cmw6IHN0cmluZyxcbiAqICAgaHRtbDogc3RyaW5nLFxuICogICBleHRlbnNpb25JZHM6ICg/QXJyYXk8c3RyaW5nPnx1bmRlZmluZWQpLFxuICogICBmb250czogKD9BcnJheTxzdHJpbmc+fHVuZGVmaW5lZCksXG4gKiB9fVxuICovXG5leHBvcnQgbGV0IEZyaWVuZGx5SWZyYW1lU3BlYztcblxuXG4vKipcbiAqIEB0eXBlIHtib29sZWFufHVuZGVmaW5lZH1cbiAqIEB2aXNpYmxlRm9yVGVzdGluZ1xuICovXG5sZXQgc3JjZG9jU3VwcG9ydGVkO1xuXG4vKipcbiAqIEBwYXJhbSB7Ym9vbGVhbnx1bmRlZmluZWR9IHZhbFxuICogQHZpc2libGVGb3JUZXN0aW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRTcmNkb2NTdXBwb3J0ZWRGb3JUZXN0aW5nKHZhbCkge1xuICBzcmNkb2NTdXBwb3J0ZWQgPSB2YWw7XG59XG5cbi8qKlxuICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIEZyaWVuZGx5IElmcmFtZXMgYXJlIHN1cHBvcnRlZC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzU3JjZG9jU3VwcG9ydGVkKCkge1xuICBpZiAoc3JjZG9jU3VwcG9ydGVkID09PSB1bmRlZmluZWQpIHtcbiAgICBzcmNkb2NTdXBwb3J0ZWQgPSAnc3JjZG9jJyBpbiBIVE1MSUZyYW1lRWxlbWVudC5wcm90b3R5cGU7XG4gIH1cbiAgcmV0dXJuIHNyY2RvY1N1cHBvcnRlZDtcbn1cblxuXG4vKipcbiAqIFNldHMgd2hldGhlciB0aGUgZW1iZWQgaXMgY3VycmVudGx5IHZpc2libGUuIFRoZSBpbnRlcnByZXRhdGlvbiBvZiB2aXNpYmlsaXR5XG4gKiBpcyB1cCB0byB0aGUgZW1iZWQgcGFyZW50LiBIb3dldmVyLCBtb3N0IG9mIHR5cGljYWwgY2FzZXMgd291bGQgcmVseSBvblxuICogd2hldGhlciB0aGUgZW1iZWQgaXMgY3VycmVudGx5IGluIHRoZSB2aWV3cG9ydC5cbiAqIEBwYXJhbSB7IUZyaWVuZGx5SWZyYW1lRW1iZWR9IGVtYmVkXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHZpc2libGVcbiAqIFRPRE8oZHZveXRlbmtvKTogUmUtZXZhbHVhdGUgYW5kIHByb2JhYmx5IGRyb3Agb25jZSBsYXllcnMgYXJlIHJlYWR5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0RnJpZW5kbHlJZnJhbWVFbWJlZFZpc2libGUoZW1iZWQsIHZpc2libGUpIHtcbiAgZW1iZWQuc2V0VmlzaWJsZV8odmlzaWJsZSk7XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBlbWJlZCBjcmVhdGVkIHVzaW5nIGBpbnN0YWxsRnJpZW5kbHlJZnJhbWVFbWJlZGAgb3IgYG51bGxgLlxuICogQ2F1dGlvbjogVGhpcyB3aWxsIG9ubHkgcmV0dXJuIHRoZSBGSUUgYWZ0ZXIgdGhlIGlmcmFtZSBoYXMgJ2xvYWRlZCcuIElmIHlvdVxuICogYXJlIGNoZWNraW5nIGJlZm9yZSB0aGlzIHNpZ25hbCB5b3UgbWF5IGJlIGluIGEgcmFjZSBjb25kaXRpb24gdGhhdCByZXR1cm5zXG4gKiBudWxsLlxuICogQHBhcmFtIHshSFRNTElGcmFtZUVsZW1lbnR9IGlmcmFtZVxuICogQHJldHVybiB7P0ZyaWVuZGx5SWZyYW1lRW1iZWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGcmllbmRseUlmcmFtZUVtYmVkT3B0aW9uYWwoaWZyYW1lKSB7XG4gIHJldHVybiAvKiogQHR5cGUgez9GcmllbmRseUlmcmFtZUVtYmVkfSAqLyAoaWZyYW1lW0VNQkVEX1BST1BdKTtcbn1cblxuXG4vKipcbiAqIENyZWF0ZXMgdGhlIHJlcXVlc3RlZCBcImZyaWVuZGx5IGlmcmFtZVwiIGVtYmVkLiBSZXR1cm5zIHRoZSBwcm9taXNlIHRoYXRcbiAqIHdpbGwgYmUgcmVzb2x2ZWQgYXMgc29vbiBhcyB0aGUgZW1iZWQgaXMgYXZhaWxhYmxlLiBUaGUgYWN0dWFsXG4gKiBpbml0aWFsaXphdGlvbiBvZiB0aGUgZW1iZWQgd2lsbCBzdGFydCBhcyBzb29uIGFzIHRoZSBgaWZyYW1lYCBpcyBhZGRlZFxuICogdG8gdGhlIERPTS5cbiAqIEBwYXJhbSB7IUhUTUxJRnJhbWVFbGVtZW50fSBpZnJhbWVcbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGNvbnRhaW5lclxuICogQHBhcmFtIHshRnJpZW5kbHlJZnJhbWVTcGVjfSBzcGVjXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFXaW5kb3cpPX0gb3B0X3ByZWluc3RhbGxDYWxsYmFja1xuICogQHJldHVybiB7IVByb21pc2U8IUZyaWVuZGx5SWZyYW1lRW1iZWQ+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbEZyaWVuZGx5SWZyYW1lRW1iZWQoaWZyYW1lLCBjb250YWluZXIsIHNwZWMsXG4gIG9wdF9wcmVpbnN0YWxsQ2FsbGJhY2spIHtcbiAgLyoqIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgY29uc3Qgd2luID0gZ2V0VG9wV2luZG93KHRvV2luKGlmcmFtZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3KSk7XG4gIC8qKiBAY29uc3QgeyEuL3NlcnZpY2UvZXh0ZW5zaW9ucy1pbXBsLkV4dGVuc2lvbnN9ICovXG4gIGNvbnN0IGV4dGVuc2lvbnMgPSBTZXJ2aWNlcy5leHRlbnNpb25zRm9yKHdpbik7XG5cbiAgc2V0U3R5bGUoaWZyYW1lLCAndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcbiAgaWZyYW1lLnNldEF0dHJpYnV0ZSgncmVmZXJyZXJwb2xpY3knLCAndW5zYWZlLXVybCcpO1xuXG4gIC8vIFByZS1sb2FkIGV4dGVuc2lvbnMuXG4gIGlmIChzcGVjLmV4dGVuc2lvbklkcykge1xuICAgIHNwZWMuZXh0ZW5zaW9uSWRzLmZvckVhY2goXG4gICAgICAgIGV4dGVuc2lvbklkID0+IGV4dGVuc2lvbnMucHJlbG9hZEV4dGVuc2lvbihleHRlbnNpb25JZCkpO1xuICB9XG5cbiAgY29uc3QgaHRtbCA9IG1lcmdlSHRtbChzcGVjKTtcblxuICAvLyBSZWNlaXZlIHRoZSBzaWduYWwgd2hlbiBpZnJhbWUgaXMgcmVhZHk6IGl0J3MgZG9jdW1lbnQgaXMgZm9ybWVkLlxuICBpZnJhbWUub25sb2FkID0gKCkgPT4ge1xuICAgIC8vIENocm9tZSBkb2VzIG5vdCByZWZsZWN0IHRoZSBpZnJhbWUgcmVhZHlzdGF0ZS5cbiAgICBpZnJhbWUucmVhZHlTdGF0ZSA9ICdjb21wbGV0ZSc7XG4gIH07XG4gIGNvbnN0IHJlZ2lzdGVyVmlvbGF0aW9uTGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgaWZyYW1lLmNvbnRlbnRXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2VjdXJpdHlwb2xpY3l2aW9sYXRpb24nLFxuICAgICAgICB2aW9sYXRpb25FdmVudCA9PiB7XG4gICAgICAgICAgZGV2KCkud2FybignRklFJywgJ3NlY3VyaXR5IHBvbGljeSB2aW9sYXRpb24nLCB2aW9sYXRpb25FdmVudCk7XG4gICAgICAgIH0pO1xuICB9O1xuICBsZXQgbG9hZGVkUHJvbWlzZTtcbiAgaWYgKGlzU3JjZG9jU3VwcG9ydGVkKCkpIHtcbiAgICBpZnJhbWUuc3JjZG9jID0gaHRtbDtcbiAgICBsb2FkZWRQcm9taXNlID0gbG9hZFByb21pc2UoaWZyYW1lKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcbiAgICByZWdpc3RlclZpb2xhdGlvbkxpc3RlbmVyKCk7XG4gIH0gZWxzZSB7XG4gICAgaWZyYW1lLnNyYyA9ICdhYm91dDpibGFuayc7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGlmcmFtZSk7XG4gICAgY29uc3QgY2hpbGREb2MgPSBpZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudDtcbiAgICBjaGlsZERvYy5vcGVuKCk7XG4gICAgcmVnaXN0ZXJWaW9sYXRpb25MaXN0ZW5lcigpO1xuICAgIGNoaWxkRG9jLndyaXRlKGh0bWwpO1xuICAgIC8vIFdpdGggZG9jdW1lbnQud3JpdGUsIGBpZnJhbWUub25sb2FkYCBhcnJpdmVzIGFsbW9zdCBpbW1lZGlhdGVseSwgdGh1c1xuICAgIC8vIHdlIG5lZWQgdG8gd2FpdCBmb3IgY2hpbGQncyBgd2luZG93Lm9ubG9hZGAuXG4gICAgbG9hZGVkUHJvbWlzZSA9IGxvYWRQcm9taXNlKGlmcmFtZS5jb250ZW50V2luZG93KTtcbiAgICBjaGlsZERvYy5jbG9zZSgpO1xuICB9XG5cbiAgLy8gV2FpdCBmb3IgZG9jdW1lbnQgcmVhZHkgc2lnbmFsLlxuICAvLyBUaGlzIGlzIGNvbXBsaWNhdGVkIGR1ZSB0byBjcmJ1Zy5jb20vNjQ5MjAxIG9uIENocm9tZSBhbmQgYSBzaW1pbGFyIGlzc3VlXG4gIC8vIG9uIFNhZmFyaSB3aGVyZSBuZXdseSBjcmVhdGVkIGRvY3VtZW50J3MgYHJlYWR5U3RhdGVgIGltbWVkaWF0ZWx5IGVxdWFsc1xuICAvLyBgY29tcGxldGVgLCBldmVuIHRob3VnaCB0aGUgZG9jdW1lbnQgaXRzZWxmIGlzIG5vdCB5ZXQgYXZhaWxhYmxlLiBUaGVyZSdzXG4gIC8vIG5vIG90aGVyIHJlbGlhYmxlIHNpZ25hbCBmb3IgYHJlYWR5U3RhdGVgIGluIGEgY2hpbGQgd2luZG93IGFuZCB0aHVzXG4gIC8vIHdlIGhhdmUgdG8gZmFsbGJhY2sgdG8gcG9sbGluZy5cbiAgbGV0IHJlYWR5UHJvbWlzZTtcbiAgaWYgKGlzSWZyYW1lUmVhZHkoaWZyYW1lKSkge1xuICAgIHJlYWR5UHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xuICB9IGVsc2Uge1xuICAgIHJlYWR5UHJvbWlzZSA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgLyoqIEBjb25zdCB7bnVtYmVyfSAqL1xuICAgICAgY29uc3QgaW50ZXJ2YWwgPSB3aW4uc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICBpZiAoaXNJZnJhbWVSZWFkeShpZnJhbWUpKSB7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgIHdpbi5jbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgICAgfVxuICAgICAgfSwgLyogbWlsbGlzZWNvbmRzICovIDUpO1xuXG4gICAgICAvLyBGb3Igc2FmZXR5LCBtYWtlIHN1cmUgd2UgZGVmaW5pdGVseSBzdG9wIHBvbGxpbmcgd2hlbiBjaGlsZCBkb2MgaXNcbiAgICAgIC8vIGxvYWRlZC5cbiAgICAgIGxvYWRlZFByb21pc2UuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICByZXRocm93QXN5bmMoZXJyb3IpO1xuICAgICAgfSkudGhlbigoKSA9PiB7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgd2luLmNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gcmVhZHlQcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgIGNvbnN0IGVtYmVkID0gbmV3IEZyaWVuZGx5SWZyYW1lRW1iZWQoaWZyYW1lLCBzcGVjLCBsb2FkZWRQcm9taXNlKTtcbiAgICBpZnJhbWVbRU1CRURfUFJPUF0gPSBlbWJlZDtcblxuICAgIGNvbnN0IGNoaWxkV2luID0gLyoqIEB0eXBlIHshV2luZG93fSAqLyAoaWZyYW1lLmNvbnRlbnRXaW5kb3cpO1xuICAgIC8vIEFkZCBleHRlbnNpb25zLlxuICAgIGV4dGVuc2lvbnMuaW5zdGFsbEV4dGVuc2lvbnNJbkNoaWxkV2luZG93KFxuICAgICAgICBjaGlsZFdpbiwgc3BlYy5leHRlbnNpb25JZHMgfHwgW10sIG9wdF9wcmVpbnN0YWxsQ2FsbGJhY2spO1xuICAgIC8vIFJlYWR5IHRvIGJlIHNob3duLlxuICAgIGVtYmVkLnN0YXJ0UmVuZGVyXygpO1xuICAgIHJldHVybiBlbWJlZDtcbiAgfSk7XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIGB0cnVlYCB3aGVuIGlmcmFtZSBpcyByZWFkeS5cbiAqIEBwYXJhbSB7IUhUTUxJRnJhbWVFbGVtZW50fSBpZnJhbWVcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzSWZyYW1lUmVhZHkoaWZyYW1lKSB7XG4gIC8vIFRoaXMgaXMgY29tcGxpY2F0ZWQgZHVlIHRvIGNyYnVnLmNvbS82NDkyMDEgb24gQ2hyb21lIGFuZCBhIHNpbWlsYXIgaXNzdWVcbiAgLy8gb24gU2FmYXJpIHdoZXJlIG5ld2x5IGNyZWF0ZWQgZG9jdW1lbnQncyBgcmVhZHlTdGF0ZWAgaW1tZWRpYXRlbHkgZXF1YWxzXG4gIC8vIGBjb21wbGV0ZWAsIGV2ZW4gdGhvdWdoIHRoZSBkb2N1bWVudCBpdHNlbGYgaXMgbm90IHlldCBhdmFpbGFibGUuIFRoZXJlJ3NcbiAgLy8gbm8gb3RoZXIgcmVsaWFibGUgc2lnbmFsIGZvciBgcmVhZHlTdGF0ZWAgaW4gYSBjaGlsZCB3aW5kb3cgYW5kIHRodXNcbiAgLy8gdGhlIGJlc3Qgd2F5IHRvIGNoZWNrIGlzIHRvIHNlZSB0aGUgY29udGVudHMgb2YgdGhlIGJvZHkuXG4gIGNvbnN0IGNoaWxkRG9jID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cgJiYgaWZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7XG4gIHJldHVybiAhIShjaGlsZERvYyAmJlxuICAgICAgaXNEb2N1bWVudFJlYWR5KGNoaWxkRG9jKSAmJlxuICAgICAgY2hpbGREb2MuYm9keSAmJlxuICAgICAgY2hpbGREb2MuYm9keS5maXJzdENoaWxkKTtcbn1cblxuXG4vKipcbiAqIE1lcmdlcyBiYXNlIGFuZCBmb250cyBpbnRvIGh0bWwgZG9jdW1lbnQuXG4gKiBAcGFyYW0geyFGcmllbmRseUlmcmFtZVNwZWN9IHNwZWNcbiAqL1xuZnVuY3Rpb24gbWVyZ2VIdG1sKHNwZWMpIHtcbiAgY29uc3Qgb3JpZ2luYWxIdG1sID0gc3BlYy5odG1sO1xuICBjb25zdCBvcmlnaW5hbEh0bWxVcCA9IG9yaWdpbmFsSHRtbC50b1VwcGVyQ2FzZSgpO1xuXG4gIC8vIEZpbmQgdGhlIGluc2VydGlvbiBwb2ludC5cbiAgbGV0IGlwID0gb3JpZ2luYWxIdG1sVXAuaW5kZXhPZignPEhFQUQnKTtcbiAgaWYgKGlwICE9IC0xKSB7XG4gICAgaXAgPSBvcmlnaW5hbEh0bWxVcC5pbmRleE9mKCc+JywgaXAgKyAxKSArIDE7XG4gIH1cbiAgaWYgKGlwID09IC0xKSB7XG4gICAgaXAgPSBvcmlnaW5hbEh0bWxVcC5pbmRleE9mKCc8Qk9EWScpO1xuICB9XG4gIGlmIChpcCA9PSAtMSkge1xuICAgIGlwID0gb3JpZ2luYWxIdG1sVXAuaW5kZXhPZignPEhUTUwnKTtcbiAgICBpZiAoaXAgIT0gLTEpIHtcbiAgICAgIGlwID0gb3JpZ2luYWxIdG1sVXAuaW5kZXhPZignPicsIGlwICsgMSkgKyAxO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHJlc3VsdCA9IFtdO1xuXG4gIC8vIFByZWFtYnVsZS5cbiAgaWYgKGlwID4gMCkge1xuICAgIHJlc3VsdC5wdXNoKG9yaWdpbmFsSHRtbC5zdWJzdHJpbmcoMCwgaXApKTtcbiAgfVxuXG4gIC8vIEFkZCA8QkFTRT4gdGFnLlxuICByZXN1bHQucHVzaChgPGJhc2UgaHJlZj1cIiR7ZXNjYXBlSHRtbChzcGVjLnVybCl9XCI+YCk7XG5cbiAgLy8gTG9hZCBmb250cy5cbiAgaWYgKHNwZWMuZm9udHMpIHtcbiAgICBzcGVjLmZvbnRzLmZvckVhY2goZm9udCA9PiB7XG4gICAgICByZXN1bHQucHVzaChcbiAgICAgICAgICBgPGxpbmsgaHJlZj1cIiR7ZXNjYXBlSHRtbChmb250KX1cIiByZWw9XCJzdHlsZXNoZWV0XCIgdHlwZT1cInRleHQvY3NzXCI+YCk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBMb2FkIENTUFxuICByZXN1bHQucHVzaCgnPG1ldGEgaHR0cC1lcXVpdj1Db250ZW50LVNlY3VyaXR5LVBvbGljeSAnICtcbiAgICAgICdjb250ZW50PVwic2NyaXB0LXNyYyBcXCdub25lXFwnO29iamVjdC1zcmMgXFwnbm9uZVxcJztjaGlsZC1zcmMgXFwnbm9uZVxcJ1wiPicpO1xuXG4gIC8vIFBvc3RhbWJ1bGUuXG4gIGlmIChpcCA+IDApIHtcbiAgICByZXN1bHQucHVzaChvcmlnaW5hbEh0bWwuc3Vic3RyaW5nKGlwKSk7XG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0LnB1c2gob3JpZ2luYWxIdG1sKTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQuam9pbignJyk7XG59XG5cblxuLyoqXG4gKiBFeHBvc2VzIGBtZXJnZUh0bWxgIGZvciB0ZXN0aW5nIHB1cnBvc2VzLlxuICogQHBhcmFtIHshRnJpZW5kbHlJZnJhbWVTcGVjfSBzcGVjXG4gKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlSHRtbEZvclRlc3Rpbmcoc3BlYykge1xuICByZXR1cm4gbWVyZ2VIdG1sKHNwZWMpO1xufVxuXG5cbi8qKlxuICogQSBcImZyaWVuZGx5IGlmcmFtZVwiIGVtYmVkLiBUaGlzIGlzIHRoZSBpZnJhbWUgdGhhdCdzIGZ1bGx5IGFjY2Vzc2libGUgdG9cbiAqIHRoZSBBTVAgcnVudGltZS4gSXQncyBzaW1pbGFyIHRvIFNoYWRvdyBET00gaW4gbWFueSByZXNwZWN0cywgYnV0IGl0IGFsc29cbiAqIHByb3ZpZGVzIGlmcmFtZS92aWV3cG9ydCBtZWFzdXJlbWVudHMgYW5kIGVuYWJsZXMgdGhlIHVzZSBvZiBgdmhgLCBgdndgIGFuZFxuICogYEBtZWRpYWAgQ1NTLlxuICpcbiAqIFRoZSBmcmllbmRseSBpZnJhbWUgaXMgbWFuYWdlZCBieSB0aGUgdG9wLWxldmVsIEFNUCBSdW50aW1lLiBXaGVuIGl0J3NcbiAqIGRlc3Ryb3llZCwgdGhlIGBkZXN0cm95YCBtZXRob2QgbXVzdCBiZSBjYWxsZWQgdG8gZnJlZSB1cCB0aGUgc2hhcmVkXG4gKiByZXNvdXJjZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBGcmllbmRseUlmcmFtZUVtYmVkIHtcblxuICAvKipcbiAgICogQHBhcmFtIHshSFRNTElGcmFtZUVsZW1lbnR9IGlmcmFtZVxuICAgKiBAcGFyYW0geyFGcmllbmRseUlmcmFtZVNwZWN9IHNwZWNcbiAgICogQHBhcmFtIHshUHJvbWlzZX0gbG9hZGVkUHJvbWlzZVxuICAgKi9cbiAgY29uc3RydWN0b3IoaWZyYW1lLCBzcGVjLCBsb2FkZWRQcm9taXNlKSB7XG4gICAgLyoqIEBjb25zdCB7IUhUTUxJRnJhbWVFbGVtZW50fSAqL1xuICAgIHRoaXMuaWZyYW1lID0gaWZyYW1lO1xuXG4gICAgLyoqIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgICB0aGlzLndpbiA9IC8qKiBAdHlwZXshV2luZG93fSAqLyhpZnJhbWUuY29udGVudFdpbmRvdyk7XG5cbiAgICAvKiogQGNvbnN0IHshRnJpZW5kbHlJZnJhbWVTcGVjfSAqL1xuICAgIHRoaXMuc3BlYyA9IHNwZWM7XG5cbiAgICAvKiogQGNvbnN0IHs/QW1wRWxlbWVudH0gKi9cbiAgICB0aGlzLmhvc3QgPSBzcGVjLmhvc3QgfHwgbnVsbDtcblxuICAgIC8qKiBAY29uc3QgQHByaXZhdGUge3RpbWV9ICovXG4gICAgdGhpcy5zdGFydFRpbWVfID0gRGF0ZS5ub3coKTtcblxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyBvdXQgYXMgaW52aXNpYmxlLiBUaGUgaW50ZXJwcmV0YXRpb24gb2YgdGhpcyBmbGFnIGlzIHVwIHRvXG4gICAgICogdGhlIGVtZGVkIHBhcmVudC5cbiAgICAgKiBAcHJpdmF0ZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLnZpc2libGVfID0gZmFsc2U7XG5cbiAgICAvKiogQHByaXZhdGUgeyFPYnNlcnZhYmxlPGJvb2xlYW4+fSAqL1xuICAgIHRoaXMudmlzaWJpbGl0eU9ic2VydmFibGVfID0gbmV3IE9ic2VydmFibGUoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgKi9cbiAgICB0aGlzLnNpZ25hbHNfID0gdGhpcy5ob3N0ID8gdGhpcy5ob3N0LnNpZ25hbHMoKSA6IG5ldyBTaWduYWxzKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshUHJvbWlzZX0gKi9cbiAgICB0aGlzLndpbkxvYWRlZFByb21pc2VfID0gUHJvbWlzZS5hbGwoW2xvYWRlZFByb21pc2UsIHRoaXMud2hlblJlYWR5KCldKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbnN1cmVzIHRoYXQgYWxsIHJlc291cmNlcyBmcm9tIHRoaXMgaWZyYW1lIGhhdmUgYmVlbiByZWxlYXNlZC5cbiAgICovXG4gIGRlc3Ryb3koKSB7XG4gICAgU2VydmljZXMucmVzb3VyY2VzRm9yRG9jKHRoaXMuaWZyYW1lKS5yZW1vdmVGb3JDaGlsZFdpbmRvdyh0aGlzLndpbik7XG4gICAgZGlzcG9zZVNlcnZpY2VzRm9yRW1iZWQodGhpcy53aW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge3RpbWV9XG4gICAqL1xuICBnZXRTdGFydFRpbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhcnRUaW1lXztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBiYXNlIFVSTCBmb3IgdGhlIGVtYmVkZGVkIGRvY3VtZW50LlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBnZXRVcmwoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3BlYy51cmw7XG4gIH1cblxuICAvKiogQHJldHVybiB7IVNpZ25hbHN9ICovXG4gIHNpZ25hbHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2lnbmFsc187XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHByb21pc2UgdGhhdCB3aWxsIHJlc29sdmUgd2hlbiB0aGUgZW1iZWQgZG9jdW1lbnQgaXMgcmVhZHkuXG4gICAqIE5vdGljZSB0aGF0IHRoaXMgc2lnbmFsIGNvaW5jaWRlcyB3aXRoIHRoZSBlbWJlZCdzIGByZW5kZXItc3RhcnRgLlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIHdoZW5SZWFkeSgpIHtcbiAgICByZXR1cm4gdGhpcy5zaWduYWxzXy53aGVuU2lnbmFsKENvbW1vblNpZ25hbHMuUkVOREVSX1NUQVJUKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHdpbGwgcmVzb2x2ZSB3aGVuIHRoZSBjaGlsZCB3aW5kb3cncyBgb25sb2FkYCBldmVudFxuICAgKiBoYXMgYmVlbiBlbWl0dGVkLiBJbiBmcmllbmRseSBpZnJhbWVzIHRoaXMgdHlwaWNhbGx5IG9ubHkgaW5jbHVkZXMgZm9udFxuICAgKiBsb2FkaW5nLlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIHdoZW5XaW5kb3dMb2FkZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMud2luTG9hZGVkUHJvbWlzZV87XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHByb21pc2UgdGhhdCB3aWxsIHJlc29sdmUgd2hlbiB0aGUgaW5pdGlhbCBsb2FkICBvZiB0aGUgZW1iZWQnc1xuICAgKiBjb250ZW50IGhhcyBiZWVuIGNvbXBsZXRlZC5cbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICB3aGVuSW5pTG9hZGVkKCkge1xuICAgIHJldHVybiB0aGlzLnNpZ25hbHNfLndoZW5TaWduYWwoQ29tbW9uU2lnbmFscy5JTklfTE9BRCk7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHJlc3RyaWN0ZWRcbiAgICovXG4gIHN0YXJ0UmVuZGVyXygpIHtcbiAgICBpZiAodGhpcy5ob3N0KSB7XG4gICAgICB0aGlzLmhvc3QucmVuZGVyU3RhcnRlZCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNpZ25hbHNfLnNpZ25hbChDb21tb25TaWduYWxzLlJFTkRFUl9TVEFSVCk7XG4gICAgfVxuICAgIHNldFN0eWxlKHRoaXMuaWZyYW1lLCAndmlzaWJpbGl0eScsICcnKTtcbiAgICBpZiAodGhpcy53aW4uZG9jdW1lbnQgJiYgdGhpcy53aW4uZG9jdW1lbnQuYm9keSkge1xuICAgICAgdGhpcy53aW4uZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2ktYW1waHRtbC1maWUnKTtcbiAgICAgIHNldFN0eWxlcyhkZXYoKS5hc3NlcnRFbGVtZW50KHRoaXMud2luLmRvY3VtZW50LmJvZHkpLCB7XG4gICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgIHZpc2liaWxpdHk6ICd2aXNpYmxlJyxcbiAgICAgICAgYW5pbWF0aW9uOiAnbm9uZScsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBJbml0aWFsIGxvYWQgc2lnbmFsIHNpZ25hbC5cbiAgICBsZXQgcmVjdDtcbiAgICBpZiAodGhpcy5ob3N0KSB7XG4gICAgICByZWN0ID0gdGhpcy5ob3N0LmdldExheW91dEJveCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZWN0ID0gbGF5b3V0UmVjdEx0d2goXG4gICAgICAgICAgMCwgMCxcbiAgICAgICAgICB0aGlzLndpbi4vKk9LKi9pbm5lcldpZHRoLFxuICAgICAgICAgIHRoaXMud2luLi8qT0sqL2lubmVySGVpZ2h0KTtcbiAgICB9XG4gICAgUHJvbWlzZS5hbGwoW1xuICAgICAgdGhpcy53aGVuUmVhZHkoKSxcbiAgICAgIHdoZW5Db250ZW50SW5pTG9hZCh0aGlzLmlmcmFtZSwgdGhpcy53aW4sIHJlY3QpLFxuICAgIF0pLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5zaWduYWxzXy5zaWduYWwoQ29tbW9uU2lnbmFscy5JTklfTE9BRCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogV2hldGhlciB0aGUgZW1iZWQgaXMgY3VycmVudGx5IHZpc2libGUuIFRoZSBpbnRlcnByZXRhdGlvbiBvZiB2aXNpYmlsaXR5XG4gICAqIGlzIHVwIHRvIHRoZSBlbWJlZCBwYXJlbnQuIEhvd2V2ZXIsIG1vc3Qgb2YgdHlwaWNhbCBjYXNlcyB3b3VsZCByZWx5IG9uXG4gICAqIHdoZXRoZXIgdGhlIGVtYmVkIGlzIGN1cnJlbnRseSBpbiB0aGUgdmlld3BvcnQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqIFRPRE8oZHZveXRlbmtvKTogUmUtZXZhbHVhdGUgYW5kIHByb2JhYmx5IGRyb3Agb25jZSBsYXllcnMgYXJlIHJlYWR5LlxuICAgKi9cbiAgaXNWaXNpYmxlKCkge1xuICAgIHJldHVybiB0aGlzLnZpc2libGVfO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlZSBgaXNWaXNpYmxlYCBmb3IgbW9yZSBpbmZvLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGJvb2xlYW4pfSBoYW5kbGVyXG4gICAqIEByZXR1cm4geyFVbmxpc3RlbkRlZn1cbiAgICovXG4gIG9uVmlzaWJpbGl0eUNoYW5nZWQoaGFuZGxlcikge1xuICAgIHJldHVybiB0aGlzLnZpc2liaWxpdHlPYnNlcnZhYmxlXy5hZGQoaGFuZGxlcik7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSB2aXNpYmxlXG4gICAqIEBwcml2YXRlXG4gICAqIEByZXN0cmljdGVkXG4gICAqL1xuICBzZXRWaXNpYmxlXyh2aXNpYmxlKSB7XG4gICAgaWYgKHRoaXMudmlzaWJsZV8gIT0gdmlzaWJsZSkge1xuICAgICAgdGhpcy52aXNpYmxlXyA9IHZpc2libGU7XG4gICAgICB0aGlzLnZpc2liaWxpdHlPYnNlcnZhYmxlXy5maXJlKHRoaXMudmlzaWJsZV8pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshSFRNTEJvZHlFbGVtZW50fVxuICAgKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAgICovXG4gIGdldEJvZHlFbGVtZW50KCkge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyFIVE1MQm9keUVsZW1lbnR9ICovIChcbiAgICAgICh0aGlzLmlmcmFtZS5jb250ZW50RG9jdW1lbnQgfHwgdGhpcy5pZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudClcbiAgICAgICAgICAuYm9keSk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IS4vc2VydmljZS9yZXNvdXJjZXMtaW1wbC5SZXNvdXJjZXN9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRSZXNvdXJjZXNfKCkge1xuICAgIHJldHVybiBTZXJ2aWNlcy5yZXNvdXJjZXNGb3JEb2ModGhpcy5pZnJhbWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJ1bnMgYSBtZWFzdXJlL211dGF0ZSBjeWNsZSBlbnN1cmluZyB0aGF0IHRoZSBpZnJhbWUgY2hhbmdlIGlzIHByb3BhZ2F0ZWRcbiAgICogdG8gdGhlIHJlc291cmNlIG1hbmFnZXIuXG4gICAqIEBwYXJhbSB7e21lYXN1cmU6IChmdW5jdGlvbigpfHVuZGVmaW5lZCksIG11dGF0ZTogZnVuY3Rpb24oKX19IHRhc2tcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBtZWFzdXJlTXV0YXRlXyh0YXNrKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0UmVzb3VyY2VzXygpLm1lYXN1cmVNdXRhdGVFbGVtZW50KHRoaXMuaWZyYW1lLFxuICAgICAgICB0YXNrLm1lYXN1cmUgfHwgbnVsbCwgdGFzay5tdXRhdGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgZW50ZXJGdWxsT3ZlcmxheU1vZGUoKSB7XG4gICAgY29uc3QgYW1wQWRQYXJlbnQgPSBkZXYoKS5hc3NlcnRFbGVtZW50KHRoaXMuaWZyYW1lLnBhcmVudE5vZGUpO1xuXG4gICAgLy8gU2VjdXJpdHkgYXNzZXJ0aW9uLiBPdGhlcndpc2UgYW55IDNwIGZyYW1lIGNvdWxkIHJlcXVlc3QgbGlnaGJveCBtb2RlLlxuICAgIHVzZXIoKS5hc3NlcnQoYW1wQWRQYXJlbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09ICdhbXAtYWQnLFxuICAgICAgICAnT25seSA8YW1wLWFkPiBpcyBhbGxvd2VkIHRvIGVudGVyIGxpZ2h0Ym94IG1vZGUuJyk7XG5cbiAgICBjb25zdCBib2R5U3R5bGUgPSB7XG4gICAgICAnYmFja2dyb3VuZCc6ICd0cmFuc3BhcmVudCcsXG4gICAgICAncG9zaXRpb24nOiAnYWJzb2x1dGUnLFxuICAgICAgJ2JvdHRvbSc6ICdhdXRvJyxcbiAgICAgICdyaWdodCc6ICdhdXRvJyxcblxuICAgICAgLy8gU2V0IGZvciByZXBsYWNpbmcgd2l0aCB2c3luYyB2YWx1ZXMuXG4gICAgICAndG9wJzogJycsXG4gICAgICAnbGVmdCc6ICcnLFxuICAgICAgJ3dpZHRoJzogJycsXG4gICAgICAnaGVpZ2h0JzogJycsXG4gICAgfTtcblxuICAgIGNvbnN0IGlmcmFtZVN0eWxlID0ge1xuICAgICAgJ3Bvc2l0aW9uJzogJ2ZpeGVkJyxcbiAgICAgICdsZWZ0JzogMCxcbiAgICAgICdyaWdodCc6IDAsXG4gICAgICAnYm90dG9tJzogMCxcbiAgICAgICd3aWR0aCc6ICcxMDB2dycsXG4gICAgICAndG9wJzogMCxcbiAgICAgICdoZWlnaHQnOiAnMTAwdmgnLFxuICAgIH07XG5cbiAgICByZXR1cm4gdGhpcy5tZWFzdXJlTXV0YXRlXyh7XG4gICAgICBtZWFzdXJlOiAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLmhvc3QgP1xuICAgICAgICAgIHRoaXMuaG9zdC5nZXRMYXlvdXRCb3goKSA6XG4gICAgICAgICAgdGhpcy5pZnJhbWUuLypPSyovZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgICAgLy8gT2Zmc2V0IGJ5IHNjcm9sbCB0b3AgYXMgaWZyYW1lIHdpbGwgYmUgcG9zaXRpb246IGZpeGVkLlxuICAgICAgICBjb25zdCBkeSA9IC1TZXJ2aWNlcy52aWV3cG9ydEZvckRvYyh0aGlzLmlmcmFtZSkuZ2V0U2Nyb2xsVG9wKCk7XG4gICAgICAgIGNvbnN0IHt0b3AsIGxlZnQsIHdpZHRoLCBoZWlnaHR9ID0gbW92ZUxheW91dFJlY3QocmVjdCwgLyogZHggKi8gMCwgZHkpO1xuXG4gICAgICAgIC8vIE9mZnNldCBib2R5IGJ5IGhlYWRlciBoZWlnaHQgdG8gcHJldmVudCB2aXN1YWwganVtcC5cbiAgICAgICAgT2JqZWN0LmFzc2lnbihib2R5U3R5bGUsIHtcbiAgICAgICAgICAndG9wJzogcHgodG9wKSxcbiAgICAgICAgICAnbGVmdCc6IHB4KGxlZnQpLFxuICAgICAgICAgICd3aWR0aCc6IHB4KHdpZHRoKSxcbiAgICAgICAgICAnaGVpZ2h0JzogcHgoaGVpZ2h0KSxcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgbXV0YXRlOiAoKSA9PiB7XG4gICAgICAgIC8vICFpbXBvcnRhbnQgdG8gcHJldmVudCBhYnVzZSBlLmcuIGJveCBAIGx0d2ggPSAwLCAwLCAwLCAwXG4gICAgICAgIHNldEltcG9ydGFudFN0eWxlcyh0aGlzLmlmcmFtZSwgaWZyYW1lU3R5bGUpO1xuXG4gICAgICAgIC8vIFdlIG5lZWQgdG8gb3ZlcnJpZGUgcnVudGltZS1sZXZlbCAhaW1wb3J0YW50IHJ1bGVzXG4gICAgICAgIHNldEltcG9ydGFudFN0eWxlcyh0aGlzLmdldEJvZHlFbGVtZW50KCksIGJvZHlTdHlsZSk7XG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgbGVhdmVGdWxsT3ZlcmxheU1vZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMubWVhc3VyZU11dGF0ZV8oe1xuICAgICAgbXV0YXRlOiAoKSA9PiB7XG4gICAgICAgIHJlc2V0U3R5bGVzKHRoaXMuaWZyYW1lLCBbXG4gICAgICAgICAgJ3Bvc2l0aW9uJyxcbiAgICAgICAgICAnbGVmdCcsXG4gICAgICAgICAgJ3JpZ2h0JyxcbiAgICAgICAgICAndG9wJyxcbiAgICAgICAgICAnYm90dG9tJyxcbiAgICAgICAgICAnd2lkdGgnLFxuICAgICAgICAgICdoZWlnaHQnLFxuICAgICAgICBdKTtcblxuICAgICAgICAvLyB3ZSdyZSBub3QgcmVzZXR0aW5nIGJhY2tncm91bmQgaGVyZSBhcyB3ZSBuZWVkIHRvIHNldCBpdCB0b1xuICAgICAgICAvLyB0cmFuc3BhcmVudCBwZXJtYW5lbnRseS5cbiAgICAgICAgcmVzZXRTdHlsZXModGhpcy5nZXRCb2R5RWxlbWVudCgpLCBbXG4gICAgICAgICAgJ3Bvc2l0aW9uJyxcbiAgICAgICAgICAndG9wJyxcbiAgICAgICAgICAnbGVmdCcsXG4gICAgICAgICAgJ3dpZHRoJyxcbiAgICAgICAgICAnaGVpZ2h0JyxcbiAgICAgICAgICAnYm90dG9tJyxcbiAgICAgICAgICAncmlnaHQnLFxuICAgICAgICBdKTtcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBwcm9taXNlIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aGVuIGFsbCBjb250ZW50IGVsZW1lbnRzXG4gKiBoYXZlIGJlZW4gbG9hZGVkIGluIHRoZSBpbml0aWFsbHkgdmlzaWJsZSBzZXQuXG4gKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAqIEBwYXJhbSB7IVdpbmRvd30gaG9zdFdpblxuICogQHBhcmFtIHshLi9sYXlvdXQtcmVjdC5MYXlvdXRSZWN0RGVmfSByZWN0XG4gKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdoZW5Db250ZW50SW5pTG9hZChlbGVtZW50T3JBbXBEb2MsIGhvc3RXaW4sIHJlY3QpIHtcbiAgcmV0dXJuIFNlcnZpY2VzLnJlc291cmNlc0ZvckRvYyhlbGVtZW50T3JBbXBEb2MpXG4gICAgICAuZ2V0UmVzb3VyY2VzSW5SZWN0KGhvc3RXaW4sIHJlY3QpXG4gICAgICAudGhlbihyZXNvdXJjZXMgPT4ge1xuICAgICAgICBjb25zdCBwcm9taXNlcyA9IFtdO1xuICAgICAgICByZXNvdXJjZXMuZm9yRWFjaChyID0+IHtcbiAgICAgICAgICBpZiAoIUVYQ0xVREVfSU5JX0xPQUQuaW5jbHVkZXMoci5lbGVtZW50LnRhZ05hbWUpKSB7XG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKHIubG9hZGVkT25jZSgpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuICAgICAgfSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzSW5GaWUoZWxlbWVudCkge1xuICByZXR1cm4gISFjbG9zZXN0QnlTZWxlY3RvcihlbGVtZW50LCAnLmktYW1waHRtbC1maWUnKTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge2FkZEF0dHJpYnV0ZXNUb0VsZW1lbnQsIGNsb3Nlc3RCeVNlbGVjdG9yfSBmcm9tICcuL2RvbSc7XG5pbXBvcnQge2Rlc2VyaWFsaXplTWVzc2FnZSwgaXNBbXBNZXNzYWdlfSBmcm9tICcuLzNwLWZyYW1lLW1lc3NhZ2luZyc7XG5pbXBvcnQge2Rldn0gZnJvbSAnLi9sb2cnO1xuaW1wb3J0IHtkaWN0fSBmcm9tICcuL3V0aWxzL29iamVjdCc7XG5pbXBvcnQge2ZpbHRlclNwbGljZX0gZnJvbSAnLi91dGlscy9hcnJheSc7XG5pbXBvcnQge2dldERhdGF9IGZyb20gJy4vZXZlbnQtaGVscGVyJztcbmltcG9ydCB7cGFyc2VVcmxEZXByZWNhdGVkfSBmcm9tICcuL3VybCc7XG5pbXBvcnQge3NldFN0eWxlfSBmcm9tICcuL3N0eWxlJztcbmltcG9ydCB7dHJ5UGFyc2VKc29ufSBmcm9tICcuL2pzb24nO1xuXG4vKipcbiAqIFNlbnRpbmVsIHVzZWQgdG8gZm9yY2UgdW5saXN0ZW5pbmcgYWZ0ZXIgYSBpZnJhbWUgaXMgZGV0YWNoZWQuXG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5jb25zdCBVTkxJU1RFTl9TRU5USU5FTCA9ICd1bmxpc3Rlbic7XG5cbi8qKlxuICogQHR5cGVkZWYge3tcbiAqICAgZnJhbWU6ICFFbGVtZW50LFxuICogICBldmVudHM6ICFPYmplY3Q8c3RyaW5nLCAhQXJyYXk8ZnVuY3Rpb24oIUpzb25PYmplY3QpPj5cbiAqIH19XG4gKi9cbmxldCBXaW5kb3dFdmVudHNEZWY7XG5cbi8qKlxuICogUmV0dXJucyBhIG1hcHBpbmcgZnJvbSBhIFVSTCdzIG9yaWdpbiB0byBhbiBhcnJheSBvZiB3aW5kb3dzIGFuZCB0aGVpclxuICogbGlzdGVuRm9yIGxpc3RlbmVycy5cbiAqIEBwYXJhbSB7P1dpbmRvd30gcGFyZW50V2luIHRoZSB3aW5kb3cgdGhhdCBjcmVhdGVkIHRoZSBpZnJhbWVcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9jcmVhdGUgY3JlYXRlIHRoZSBtYXBwaW5nIGlmIGl0IGRvZXMgbm90IGV4aXN0XG4gKiBAcmV0dXJuIHs/T2JqZWN0PHN0cmluZywgIUFycmF5PCFXaW5kb3dFdmVudHNEZWY+Pn1cbiAqL1xuZnVuY3Rpb24gZ2V0TGlzdGVuRm9ycyhwYXJlbnRXaW4sIG9wdF9jcmVhdGUpIHtcbiAgbGV0IHtsaXN0ZW5pbmdGb3JzfSA9IHBhcmVudFdpbjtcblxuICBpZiAoIWxpc3RlbmluZ0ZvcnMgJiYgb3B0X2NyZWF0ZSkge1xuICAgIGxpc3RlbmluZ0ZvcnMgPSBwYXJlbnRXaW4ubGlzdGVuaW5nRm9ycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH1cbiAgcmV0dXJuIGxpc3RlbmluZ0ZvcnMgfHwgbnVsbDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFuIGFycmF5IG9mIFdpbmRvd0V2ZW50c0RlZiB0aGF0IGhhdmUgaGFkIGFueSBsaXN0ZW5Gb3IgbGlzdGVuZXJzXG4gKiByZWdpc3RlcmVkIGZvciB0aGlzIHNlbnRpbmVsLlxuICogQHBhcmFtIHs/V2luZG93fSBwYXJlbnRXaW4gdGhlIHdpbmRvdyB0aGF0IGNyZWF0ZWQgdGhlIGlmcmFtZVxuICogQHBhcmFtIHtzdHJpbmd9IHNlbnRpbmVsIHRoZSBzZW50aW5lbCBvZiB0aGUgbWVzc2FnZVxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2NyZWF0ZSBjcmVhdGUgdGhlIGFycmF5IGlmIGl0IGRvZXMgbm90IGV4aXN0XG4gKiBAcmV0dXJuIHs/QXJyYXk8IVdpbmRvd0V2ZW50c0RlZj59XG4gKi9cbmZ1bmN0aW9uIGdldExpc3RlbkZvclNlbnRpbmVsKHBhcmVudFdpbiwgc2VudGluZWwsIG9wdF9jcmVhdGUpIHtcbiAgY29uc3QgbGlzdGVuaW5nRm9ycyA9IGdldExpc3RlbkZvcnMocGFyZW50V2luLCBvcHRfY3JlYXRlKTtcbiAgaWYgKCFsaXN0ZW5pbmdGb3JzKSB7XG4gICAgcmV0dXJuIGxpc3RlbmluZ0ZvcnM7XG4gIH1cblxuICBsZXQgbGlzdGVuU2VudGluZWwgPSBsaXN0ZW5pbmdGb3JzW3NlbnRpbmVsXTtcbiAgaWYgKCFsaXN0ZW5TZW50aW5lbCAmJiBvcHRfY3JlYXRlKSB7XG4gICAgbGlzdGVuU2VudGluZWwgPSBsaXN0ZW5pbmdGb3JzW3NlbnRpbmVsXSA9IFtdO1xuICB9XG4gIHJldHVybiBsaXN0ZW5TZW50aW5lbCB8fCBudWxsO1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gbWFwcGluZyBvZiBldmVudCBuYW1lcyB0byBsaXN0ZW5Gb3IgbGlzdGVuZXJzLlxuICogQHBhcmFtIHs/V2luZG93fSBwYXJlbnRXaW4gdGhlIHdpbmRvdyB0aGF0IGNyZWF0ZWQgdGhlIGlmcmFtZVxuICogQHBhcmFtIHshRWxlbWVudH0gaWZyYW1lIHRoZSBpZnJhbWUgZWxlbWVudCB3aG8ncyBjb250ZXh0IHdpbGwgdHJpZ2dlciB0aGVcbiAqICAgICBldmVudFxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2lzM1Agc2V0IHRvIHRydWUgaWYgdGhlIGlmcmFtZSBpcyAzcC5cbiAqIEByZXR1cm4gez9PYmplY3Q8c3RyaW5nLCAhQXJyYXk8ZnVuY3Rpb24oIUpzb25PYmplY3QsICFXaW5kb3csIHN0cmluZyk+Pn1cbiAqL1xuZnVuY3Rpb24gZ2V0T3JDcmVhdGVMaXN0ZW5Gb3JFdmVudHMocGFyZW50V2luLCBpZnJhbWUsIG9wdF9pczNQKSB7XG4gIGNvbnN0IHtvcmlnaW59ID0gcGFyc2VVcmxEZXByZWNhdGVkKGlmcmFtZS5zcmMpO1xuICBjb25zdCBzZW50aW5lbCA9IGdldFNlbnRpbmVsXyhpZnJhbWUsIG9wdF9pczNQKTtcbiAgY29uc3QgbGlzdGVuU2VudGluZWwgPSBnZXRMaXN0ZW5Gb3JTZW50aW5lbChwYXJlbnRXaW4sIHNlbnRpbmVsLCB0cnVlKTtcblxuICBsZXQgd2luZG93RXZlbnRzO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3RlblNlbnRpbmVsLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3Qgd2UgPSBsaXN0ZW5TZW50aW5lbFtpXTtcbiAgICBpZiAod2UuZnJhbWUgPT09IGlmcmFtZSkge1xuICAgICAgd2luZG93RXZlbnRzID0gd2U7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBpZiAoIXdpbmRvd0V2ZW50cykge1xuICAgIHdpbmRvd0V2ZW50cyA9IHtcbiAgICAgIGZyYW1lOiBpZnJhbWUsXG4gICAgICBvcmlnaW4sXG4gICAgICBldmVudHM6IE9iamVjdC5jcmVhdGUobnVsbCksXG4gICAgfTtcbiAgICBsaXN0ZW5TZW50aW5lbC5wdXNoKHdpbmRvd0V2ZW50cyk7XG4gIH1cblxuICByZXR1cm4gd2luZG93RXZlbnRzLmV2ZW50cztcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFuIG1hcHBpbmcgb2YgZXZlbnQgbmFtZXMgdG8gbGlzdGVuRm9yIGxpc3RlbmVycy5cbiAqIEBwYXJhbSB7P1dpbmRvd30gcGFyZW50V2luIHRoZSB3aW5kb3cgdGhhdCBjcmVhdGVkIHRoZSBpZnJhbWVcbiAqIEBwYXJhbSB7c3RyaW5nfSBzZW50aW5lbCB0aGUgc2VudGluZWwgb2YgdGhlIG1lc3NhZ2VcbiAqIEBwYXJhbSB7c3RyaW5nfSBvcmlnaW4gdGhlIHNvdXJjZSB3aW5kb3cncyBvcmlnaW5cbiAqIEBwYXJhbSB7P1dpbmRvd30gdHJpZ2dlcldpbiB0aGUgd2luZG93IHRoYXQgdHJpZ2dlcmVkIHRoZSBldmVudFxuICogQHJldHVybiB7P09iamVjdDxzdHJpbmcsICFBcnJheTxmdW5jdGlvbighSnNvbk9iamVjdCwgIVdpbmRvdywgc3RyaW5nKT4+fVxuICovXG5mdW5jdGlvbiBnZXRMaXN0ZW5Gb3JFdmVudHMocGFyZW50V2luLCBzZW50aW5lbCwgb3JpZ2luLCB0cmlnZ2VyV2luKSB7XG4gIGNvbnN0IGxpc3RlblNlbnRpbmVsID0gZ2V0TGlzdGVuRm9yU2VudGluZWwocGFyZW50V2luLCBzZW50aW5lbCk7XG5cbiAgaWYgKCFsaXN0ZW5TZW50aW5lbCkge1xuICAgIHJldHVybiBsaXN0ZW5TZW50aW5lbDtcbiAgfVxuXG4gIC8vIEZpbmQgdGhlIGVudHJ5IGZvciB0aGUgZnJhbWUuXG4gIC8vIFRPRE8oQG5la29kbyk6IEFkZCBhIFdlYWtNYXA8V2luZG93LCBXaW5kb3dFdmVudHNEZWY+IGNhY2hlIHRvXG4gIC8vICAgICBzcGVlZCB1cCB0aGlzIHByb2Nlc3MuXG4gIGxldCB3aW5kb3dFdmVudHM7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdGVuU2VudGluZWwubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCB3ZSA9IGxpc3RlblNlbnRpbmVsW2ldO1xuICAgIGNvbnN0IHtjb250ZW50V2luZG93fSA9IHdlLmZyYW1lO1xuICAgIGlmICghY29udGVudFdpbmRvdykge1xuICAgICAgc2V0VGltZW91dChkcm9wTGlzdGVuU2VudGluZWwsIDAsIGxpc3RlblNlbnRpbmVsKTtcbiAgICB9IGVsc2UgaWYgKHNlbnRpbmVsID09PSAnYW1wJykge1xuICAgICAgLy8gQSBub24tM1AgY29kZSBwYXRoLCBvcmlnaW4gbXVzdCBtYXRjaC5cbiAgICAgIGlmICh3ZS5vcmlnaW4gPT09IG9yaWdpbiAmJiBjb250ZW50V2luZG93ID09IHRyaWdnZXJXaW4pIHtcbiAgICAgICAgd2luZG93RXZlbnRzID0gd2U7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHJpZ2dlcldpbiA9PSBjb250ZW50V2luZG93IHx8XG4gICAgICAgIGlzRGVzY2VuZGFudFdpbmRvdyhjb250ZW50V2luZG93LCB0cmlnZ2VyV2luKSkge1xuICAgICAgLy8gM3AgY29kZSBwYXRoLCB3ZSBtYXkgYWNjZXB0IG1lc3NhZ2VzIGZyb20gbmVzdGVkIGZyYW1lcy5cbiAgICAgIHdpbmRvd0V2ZW50cyA9IHdlO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHdpbmRvd0V2ZW50cyA/IHdpbmRvd0V2ZW50cy5ldmVudHMgOiBudWxsO1xufVxuXG4vKipcbiAqIENoZWNrcyB3aGV0aGVyIG9uZSB3aW5kb3cgaXMgYSBkZXNjZW5kYW50IG9mIGFub3RoZXIgYnkgY2xpbWJpbmdcbiAqIHRoZSBwYXJlbnQgY2hhaW4uXG4gKiBAcGFyYW0gez9XaW5kb3d9IGFuY2VzdG9yIHBvdGVudGlhbCBhbmNlc3RvciB3aW5kb3dcbiAqIEBwYXJhbSB7P1dpbmRvd30gZGVzY2VuZGFudCBwb3RlbnRpYWwgZGVzY2VuZGFudCB3aW5kb3dcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzRGVzY2VuZGFudFdpbmRvdyhhbmNlc3RvciwgZGVzY2VuZGFudCkge1xuICBmb3IgKGxldCB3aW4gPSBkZXNjZW5kYW50OyB3aW4gJiYgd2luICE9IHdpbi5wYXJlbnQ7IHdpbiA9IHdpbi5wYXJlbnQpIHtcbiAgICBpZiAod2luID09IGFuY2VzdG9yKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgYW55IGxpc3RlbkZvcnMgcmVnaXN0ZWQgb24gbGlzdGVuU2VudGluZWwgdGhhdCBkbyBub3QgaGF2ZVxuICogYSBjb250ZW50V2luZG93ICh0aGUgZnJhbWUgd2FzIHJlbW92ZWQgZnJvbSB0aGUgRE9NIHRyZWUpLlxuICogQHBhcmFtIHshQXJyYXk8IVdpbmRvd0V2ZW50c0RlZj59IGxpc3RlblNlbnRpbmVsXG4gKi9cbmZ1bmN0aW9uIGRyb3BMaXN0ZW5TZW50aW5lbChsaXN0ZW5TZW50aW5lbCkge1xuICBjb25zdCBub29wRGF0YSA9IGRpY3QoeydzZW50aW5lbCc6IFVOTElTVEVOX1NFTlRJTkVMfSk7XG5cbiAgZm9yIChsZXQgaSA9IGxpc3RlblNlbnRpbmVsLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgY29uc3Qgd2luZG93RXZlbnRzID0gbGlzdGVuU2VudGluZWxbaV07XG5cbiAgICBpZiAoIXdpbmRvd0V2ZW50cy5mcmFtZS5jb250ZW50V2luZG93KSB7XG4gICAgICBsaXN0ZW5TZW50aW5lbC5zcGxpY2UoaSwgMSk7XG5cbiAgICAgIGNvbnN0IHtldmVudHN9ID0gd2luZG93RXZlbnRzO1xuICAgICAgZm9yIChjb25zdCBuYW1lIGluIGV2ZW50cykge1xuICAgICAgICAvLyBTcGxpY2UgaGVyZSwgc28gdGhhdCBlYWNoIHVubGlzdGVuIGRvZXMgbm90IHNoaWZ0IHRoZSBhcnJheVxuICAgICAgICBldmVudHNbbmFtZV0uc3BsaWNlKDAsIEluZmluaXR5KS5mb3JFYWNoKGV2ZW50ID0+IHtcbiAgICAgICAgICBldmVudChub29wRGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFJlZ2lzdGVycyB0aGUgZ2xvYmFsIGxpc3RlbkZvciBldmVudCBsaXN0ZW5lciBpZiBpdCBoYXMgeWV0IHRvIGJlLlxuICogQHBhcmFtIHs/V2luZG93fSBwYXJlbnRXaW5cbiAqL1xuZnVuY3Rpb24gcmVnaXN0ZXJHbG9iYWxMaXN0ZW5lcklmTmVlZGVkKHBhcmVudFdpbikge1xuICBpZiAocGFyZW50V2luLmxpc3RlbmluZ0ZvcnMpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgbGlzdGVuRm9yTGlzdGVuZXIgPSBmdW5jdGlvbihldmVudCkge1xuICAgIGlmICghZ2V0RGF0YShldmVudCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IHBhcnNlSWZOZWVkZWQoZ2V0RGF0YShldmVudCkpO1xuICAgIGlmICghZGF0YSB8fCAhZGF0YVsnc2VudGluZWwnXSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGxpc3RlbkZvckV2ZW50cyA9IGdldExpc3RlbkZvckV2ZW50cyhcbiAgICAgICAgcGFyZW50V2luLFxuICAgICAgICBkYXRhWydzZW50aW5lbCddLFxuICAgICAgICBldmVudC5vcmlnaW4sXG4gICAgICAgIGV2ZW50LnNvdXJjZVxuICAgICk7XG4gICAgaWYgKCFsaXN0ZW5Gb3JFdmVudHMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgbGlzdGVuZXJzID0gbGlzdGVuRm9yRXZlbnRzW2RhdGFbJ3R5cGUnXV07XG4gICAgaWYgKCFsaXN0ZW5lcnMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBXZSBzbGljZSB0byBhdm9pZCBpc3N1ZXMgd2l0aCBhZGRpbmcgYW5vdGhlciBsaXN0ZW5lciBvciB1bmxpc3RlbmluZ1xuICAgIC8vIGR1cmluZyBpdGVyYXRpb24uIFdlIGNvdWxkIG1vdmUgdG8gYSBEb3VibHkgTGlua2VkIExpc3Qgd2l0aFxuICAgIC8vIGJhY2t0cmFja2luZywgYnV0IHRoYXQncyBvdmVybHkgY29tcGxpY2F0ZWQuXG4gICAgbGlzdGVuZXJzID0gbGlzdGVuZXJzLnNsaWNlKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGxpc3RlbmVyID0gbGlzdGVuZXJzW2ldO1xuICAgICAgbGlzdGVuZXIoZGF0YSwgZXZlbnQuc291cmNlLCBldmVudC5vcmlnaW4pO1xuICAgIH1cbiAgfTtcblxuICBwYXJlbnRXaW4uYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGxpc3RlbkZvckxpc3RlbmVyKTtcbn1cblxuLyoqXG4gKiBBbGxvd3MgbGlzdGVuaW5nIGZvciBtZXNzYWdlIGZyb20gdGhlIGlmcmFtZS4gUmV0dXJucyBhbiB1bmxpc3RlblxuICogZnVuY3Rpb24gdG8gcmVtb3ZlIHRoZSBsaXN0ZW5lci5cbiAqXG4gKiBAcGFyYW0gez9FbGVtZW50fSBpZnJhbWVcbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlT2ZNZXNzYWdlXG4gKiBAcGFyYW0gez9mdW5jdGlvbighSnNvbk9iamVjdCwgIVdpbmRvdywgc3RyaW5nKX0gY2FsbGJhY2sgQ2FsbGVkIHdoZW4gYVxuICogICAgIG1lc3NhZ2Ugb2YgdGhpcyB0eXBlIGFycml2ZXMgZm9yIHRoaXMgaWZyYW1lLlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2lzM1Agc2V0IHRvIHRydWUgaWYgdGhlIGlmcmFtZSBpcyAzcC5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbmNsdWRpbmdOZXN0ZWRXaW5kb3dzIHNldCB0byB0cnVlIGlmIGEgbWVzc2FnZXMgZnJvbVxuICogICAgIG5lc3RlZCBmcmFtZXMgc2hvdWxkIGFsc28gYmUgYWNjZXB0ZWQuXG4gKiBAcmV0dXJuIHshVW5saXN0ZW5EZWZ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW5Gb3IoXG4gIGlmcmFtZSwgdHlwZU9mTWVzc2FnZSwgY2FsbGJhY2ssIG9wdF9pczNQLCBvcHRfaW5jbHVkaW5nTmVzdGVkV2luZG93cykge1xuICBkZXYoKS5hc3NlcnQoaWZyYW1lLnNyYywgJ29ubHkgaWZyYW1lcyB3aXRoIHNyYyBzdXBwb3J0ZWQnKTtcbiAgZGV2KCkuYXNzZXJ0KCFpZnJhbWUucGFyZW50Tm9kZSwgJ2Nhbm5vdCByZWdpc3RlciBldmVudHMgb24gYW4gYXR0YWNoZWQgJyArXG4gICAgICAnaWZyYW1lLiBJdCB3aWxsIGNhdXNlIGhhaXItcHVsbGluZyBidWdzIGxpa2UgIzI5NDInKTtcbiAgZGV2KCkuYXNzZXJ0KGNhbGxiYWNrKTtcbiAgY29uc3QgcGFyZW50V2luID0gaWZyYW1lLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7XG5cbiAgcmVnaXN0ZXJHbG9iYWxMaXN0ZW5lcklmTmVlZGVkKHBhcmVudFdpbik7XG5cbiAgY29uc3QgbGlzdGVuRm9yRXZlbnRzID0gZ2V0T3JDcmVhdGVMaXN0ZW5Gb3JFdmVudHMoXG4gICAgICBwYXJlbnRXaW4sXG4gICAgICBpZnJhbWUsXG4gICAgICBvcHRfaXMzUFxuICApO1xuXG5cbiAgbGV0IGV2ZW50cyA9IGxpc3RlbkZvckV2ZW50c1t0eXBlT2ZNZXNzYWdlXSB8fFxuICAgIChsaXN0ZW5Gb3JFdmVudHNbdHlwZU9mTWVzc2FnZV0gPSBbXSk7XG5cbiAgbGV0IHVubGlzdGVuO1xuICBsZXQgbGlzdGVuZXIgPSBmdW5jdGlvbihkYXRhLCBzb3VyY2UsIG9yaWdpbikge1xuICAgIC8vIEV4Y2x1ZGUgbmVzdGVkIGZyYW1lcyBpZiBuZWNlc3NhcnkuXG4gICAgLy8gTm90ZSB0aGF0IHRoZSBzb3VyY2Ugd2FzIGFscmVhZHkgdmVyaWZpZWQgdG8gYmUgZWl0aGVyIHRoZSBjb250ZW50V2luZG93XG4gICAgLy8gb2YgdGhlIGlmcmFtZSBpdHNlbGYgb3IgYSBkZXNjZW5kYW50IHdpbmRvdyB3aXRoaW4gaXQuXG4gICAgaWYgKCFvcHRfaW5jbHVkaW5nTmVzdGVkV2luZG93cyAmJiBzb3VyY2UgIT0gaWZyYW1lLmNvbnRlbnRXaW5kb3cpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZGF0YS5zZW50aW5lbCA9PSBVTkxJU1RFTl9TRU5USU5FTCkge1xuICAgICAgdW5saXN0ZW4oKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY2FsbGJhY2soZGF0YSwgc291cmNlLCBvcmlnaW4pO1xuICB9O1xuXG4gIGV2ZW50cy5wdXNoKGxpc3RlbmVyKTtcblxuICByZXR1cm4gdW5saXN0ZW4gPSBmdW5jdGlvbigpIHtcbiAgICBpZiAobGlzdGVuZXIpIHtcbiAgICAgIGNvbnN0IGluZGV4ID0gZXZlbnRzLmluZGV4T2YobGlzdGVuZXIpO1xuICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgZXZlbnRzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICB9XG4gICAgICAvLyBNYWtlIHN1cmUgcmVmZXJlbmNlcyB0byB0aGUgdW5saXN0ZW4gZnVuY3Rpb24gZG8gbm90IGtlZXBcbiAgICAgIC8vIGFsaXZlIHRvbyBtdWNoLlxuICAgICAgbGlzdGVuZXIgPSBudWxsO1xuICAgICAgZXZlbnRzID0gbnVsbDtcbiAgICAgIGNhbGxiYWNrID0gbnVsbDtcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIG9uZSBvZiBnaXZlbiBtZXNzYWdlcyBoYXMgYmVlbiBvYnNlcnZlZFxuICogZm9yIHRoZSBmaXJzdCB0aW1lLiBBbmQgcmVtb3ZlIGxpc3RlbmVyIGZvciBhbGwgb3RoZXIgbWVzc2FnZXMuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBpZnJhbWVcbiAqIEBwYXJhbSB7c3RyaW5nfCFBcnJheTxzdHJpbmc+fSB0eXBlT2ZNZXNzYWdlc1xuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2lzM1BcbiAqIEByZXR1cm4geyFQcm9taXNlPCF7ZGF0YTogIUpzb25PYmplY3QsIHNvdXJjZTogIVdpbmRvdywgb3JpZ2luOiBzdHJpbmd9Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbkZvck9uY2VQcm9taXNlKGlmcmFtZSwgdHlwZU9mTWVzc2FnZXMsIG9wdF9pczNQKSB7XG4gIGNvbnN0IHVubGlzdGVuTGlzdCA9IFtdO1xuICBpZiAodHlwZW9mIHR5cGVPZk1lc3NhZ2VzID09ICdzdHJpbmcnKSB7XG4gICAgdHlwZU9mTWVzc2FnZXMgPSBbdHlwZU9mTWVzc2FnZXNdO1xuICB9XG4gIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHR5cGVPZk1lc3NhZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gdHlwZU9mTWVzc2FnZXNbaV07XG4gICAgICBjb25zdCB1bmxpc3RlbiA9IGxpc3RlbkZvcihpZnJhbWUsIG1lc3NhZ2UsIChkYXRhLCBzb3VyY2UsIG9yaWdpbikgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHVubGlzdGVuTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHVubGlzdGVuTGlzdFtpXSgpO1xuICAgICAgICB9XG4gICAgICAgIHJlc29sdmUoe2RhdGEsIHNvdXJjZSwgb3JpZ2lufSk7XG4gICAgICB9LCBvcHRfaXMzUCk7XG4gICAgICB1bmxpc3Rlbkxpc3QucHVzaCh1bmxpc3Rlbik7XG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBQb3N0cyBhIG1lc3NhZ2UgdG8gdGhlIGlmcmFtZS5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGlmcmFtZSBUaGUgaWZyYW1lLlxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVHlwZSBvZiB0aGUgbWVzc2FnZS5cbiAqIEBwYXJhbSB7IUpzb25PYmplY3R9IG9iamVjdCBNZXNzYWdlIHBheWxvYWQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGFyZ2V0T3JpZ2luIG9yaWdpbiBvZiB0aGUgdGFyZ2V0LlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2lzM1Agc2V0IHRvIHRydWUgaWYgdGhlIGlmcmFtZSBpcyAzcC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBvc3RNZXNzYWdlKGlmcmFtZSwgdHlwZSwgb2JqZWN0LCB0YXJnZXRPcmlnaW4sIG9wdF9pczNQKSB7XG4gIHBvc3RNZXNzYWdlVG9XaW5kb3dzKGlmcmFtZSxcbiAgICAgIFt7d2luOiBpZnJhbWUuY29udGVudFdpbmRvdywgb3JpZ2luOiB0YXJnZXRPcmlnaW59XSwgdHlwZSwgb2JqZWN0LFxuICAgICAgb3B0X2lzM1ApO1xufVxuXG4vKipcbiAqIFBvc3RzIGFuIGlkZW50aWNhbCBtZXNzYWdlIHRvIG11bHRpcGxlIHRhcmdldCB3aW5kb3dzIHdpdGggdGhlIHNhbWVcbiAqIHNlbnRpbmVsLlxuICogVGhlIG1lc3NhZ2UgaXMgc2VyaWFsaXplZCBvbmx5IG9uY2UuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBpZnJhbWUgVGhlIGlmcmFtZS5cbiAqIEBwYXJhbSB7IUFycmF5PHt3aW46ICFXaW5kb3csIG9yaWdpbjogc3RyaW5nfT59IHRhcmdldHMgdG8gc2VuZCB0aGUgbWVzc2FnZVxuICogICAgIHRvLCBwYWlycyBvZiB3aW5kb3cgYW5kIGl0cyBvcmlnaW4uXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUeXBlIG9mIHRoZSBtZXNzYWdlLlxuICogQHBhcmFtIHshSnNvbk9iamVjdH0gb2JqZWN0IE1lc3NhZ2UgcGF5bG9hZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pczNQIHNldCB0byB0cnVlIGlmIHRoZSBpZnJhbWUgaXMgM3AuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwb3N0TWVzc2FnZVRvV2luZG93cyhpZnJhbWUsIHRhcmdldHMsIHR5cGUsIG9iamVjdCwgb3B0X2lzM1ApIHtcbiAgaWYgKCFpZnJhbWUuY29udGVudFdpbmRvdykge1xuICAgIHJldHVybjtcbiAgfVxuICBvYmplY3RbJ3R5cGUnXSA9IHR5cGU7XG4gIG9iamVjdFsnc2VudGluZWwnXSA9IGdldFNlbnRpbmVsXyhpZnJhbWUsIG9wdF9pczNQKTtcbiAgbGV0IHBheWxvYWQgPSBvYmplY3Q7XG4gIGlmIChvcHRfaXMzUCkge1xuICAgIC8vIFNlcmlhbGl6ZSBvdXJzZWx2ZXMgYmVjYXVzZSB0aGF0IGlzIG11Y2ggZmFzdGVyIGluIENocm9tZS5cbiAgICBwYXlsb2FkID0gJ2FtcC0nICsgSlNPTi5zdHJpbmdpZnkob2JqZWN0KTtcbiAgfVxuICBmb3IgKGxldCBpID0gMDsgaSA8IHRhcmdldHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCB0YXJnZXQgPSB0YXJnZXRzW2ldO1xuICAgIHRhcmdldC53aW4uLypPSyovcG9zdE1lc3NhZ2UocGF5bG9hZCwgdGFyZ2V0Lm9yaWdpbik7XG4gIH1cbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBzZW50aW5lbCBzdHJpbmcuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBpZnJhbWUgVGhlIGlmcmFtZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pczNQIHNldCB0byB0cnVlIGlmIHRoZSBpZnJhbWUgaXMgM3AuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFNlbnRpbmVsIHN0cmluZy5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGdldFNlbnRpbmVsXyhpZnJhbWUsIG9wdF9pczNQKSB7XG4gIHJldHVybiBvcHRfaXMzUCA/IGlmcmFtZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtYW1wLTNwLXNlbnRpbmVsJykgOiAnYW1wJztcbn1cblxuLyoqXG4gKiBKU09OIHBhcnNlcyBldmVudC5kYXRhIGlmIGl0IG5lZWRzIHRvIGJlXG4gKiBAcGFyYW0geyp9IGRhdGFcbiAqIEByZXR1cm4gez9Kc29uT2JqZWN0fSBvYmplY3QgbWVzc2FnZVxuICogQHByaXZhdGVcbiAqIEB2aXNpYmxlRm9yVGVzdGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VJZk5lZWRlZChkYXRhKSB7XG4gIGlmICh0eXBlb2YgZGF0YSA9PSAnc3RyaW5nJykge1xuICAgIGlmIChkYXRhLmNoYXJBdCgwKSA9PSAneycpIHtcbiAgICAgIGRhdGEgPSB0cnlQYXJzZUpzb24oZGF0YSwgZSA9PiB7XG4gICAgICAgIGRldigpLndhcm4oJ0lGUkFNRS1IRUxQRVInLFxuICAgICAgICAgICAgJ1Bvc3RtZXNzYWdlIGNvdWxkIG5vdCBiZSBwYXJzZWQuICcgK1xuICAgICAgICAgICAgJ0lzIGl0IGluIGEgdmFsaWQgSlNPTiBmb3JtYXQ/JywgZSk7XG4gICAgICB9KSB8fCBudWxsO1xuICAgIH0gZWxzZSBpZiAoaXNBbXBNZXNzYWdlKGRhdGEpKSB7XG4gICAgICBkYXRhID0gZGVzZXJpYWxpemVNZXNzYWdlKGRhdGEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkYXRhID0gbnVsbDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC8qKiBAdHlwZSB7P0pzb25PYmplY3R9ICovIChkYXRhKTtcbn1cblxuXG5cbi8qKlxuICogTWFuYWdlcyBhIHBvc3RNZXNzYWdlIEFQSSBmb3IgYW4gaWZyYW1lIHdpdGggYSBzdWJzY3JpcHRpb24gbWVzc2FnZSBhbmRcbiAqIGEgd2F5IHRvIGJyb2FkY2FzdCBtZXNzYWdlcyB0byBhbGwgc3Vic2NyaWJlZCB3aW5kb3dzLCB3aGljaFxuICogaW4gdHVybiBtdXN0IGFsbCBiZSBkZXNjZW5kYW50cyBvZiB0aGUgY29udGVudFdpbmRvdyBvZiB0aGUgaWZyYW1lLlxuICovXG5leHBvcnQgY2xhc3MgU3Vic2NyaXB0aW9uQXBpIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IGlmcmFtZSBUaGUgaWZyYW1lLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUeXBlIG9mIHRoZSBzdWJzY3JpcHRpb24gbWVzc2FnZS5cbiAgICogQHBhcmFtIHtib29sZWFufSBpczNwIHNldCB0byB0cnVlIGlmIHRoZSBpZnJhbWUgaXMgM3AuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIUpzb25PYmplY3QsICFXaW5kb3csIHN0cmluZyl9IHJlcXVlc3RDYWxsYmFjayBDYWxsYmFja1xuICAgKiAgICAgaW52b2tlZCB3aGVuZXZlciBhIG5ldyB3aW5kb3cgc3Vic2NyaWJlcy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGlmcmFtZSwgdHlwZSwgaXMzcCwgcmVxdWVzdENhbGxiYWNrKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUVsZW1lbnR9ICovXG4gICAgdGhpcy5pZnJhbWVfID0gaWZyYW1lO1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge2Jvb2xlYW59ICovXG4gICAgdGhpcy5pczNwXyA9IGlzM3A7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUFycmF5PHt3aW46ICFXaW5kb3csIG9yaWdpbjogc3RyaW5nfT59ICovXG4gICAgdGhpcy5jbGllbnRXaW5kb3dzXyA9IFtdO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVVubGlzdGVuRGVmfSAqL1xuICAgIHRoaXMudW5saXN0ZW5fID0gbGlzdGVuRm9yKHRoaXMuaWZyYW1lXywgdHlwZSwgKGRhdGEsIHNvdXJjZSwgb3JpZ2luKSA9PiB7XG4gICAgICAvLyBUaGlzIG1lc3NhZ2UgbWlnaHQgYmUgZnJvbSBhbnkgd2luZG93IHdpdGhpbiB0aGUgaWZyYW1lLCB3ZSBuZWVkXG4gICAgICAvLyB0byBrZWVwIHRyYWNrIG9mIHdoaWNoIHdpbmRvd3Mgd2FudCB0byBiZSBzZW50IHVwZGF0ZXMuXG4gICAgICBpZiAoIXRoaXMuY2xpZW50V2luZG93c18uc29tZShlbnRyeSA9PiBlbnRyeS53aW4gPT0gc291cmNlKSkge1xuICAgICAgICB0aGlzLmNsaWVudFdpbmRvd3NfLnB1c2goe3dpbjogc291cmNlLCBvcmlnaW59KTtcbiAgICAgIH1cbiAgICAgIHJlcXVlc3RDYWxsYmFjayhkYXRhLCBzb3VyY2UsIG9yaWdpbik7XG4gICAgfSwgdGhpcy5pczNwXyxcbiAgICAgICAgLy8gRm9yIDNQIGZyYW1lcyB3ZSBhbHNvIGFsbG93IG5lc3RlZCBmcmFtZXMgd2l0aGluIHRoZW0gdG8gc3Vic2NyaWJlLi5cbiAgICB0aGlzLmlzM3BfIC8qIG9wdF9pbmNsdWRpbmdOZXN0ZWRXaW5kb3dzICovKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBhIG1lc3NhZ2UgdG8gYWxsIHN1YnNjcmliZWQgd2luZG93cy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVHlwZSBvZiB0aGUgbWVzc2FnZS5cbiAgICogQHBhcmFtIHshSnNvbk9iamVjdH0gZGF0YSBNZXNzYWdlIHBheWxvYWQuXG4gICAqL1xuICBzZW5kKHR5cGUsIGRhdGEpIHtcbiAgICAvLyBSZW1vdmUgY2xpZW50cyB0aGF0IGhhdmUgYmVlbiByZW1vdmVkIGZyb20gdGhlIERPTS5cbiAgICBmaWx0ZXJTcGxpY2UodGhpcy5jbGllbnRXaW5kb3dzXywgY2xpZW50ID0+ICEhY2xpZW50Lndpbi5wYXJlbnQpO1xuICAgIHBvc3RNZXNzYWdlVG9XaW5kb3dzKFxuICAgICAgICB0aGlzLmlmcmFtZV8sXG4gICAgICAgIHRoaXMuY2xpZW50V2luZG93c18sXG4gICAgICAgIHR5cGUsXG4gICAgICAgIGRhdGEsXG4gICAgICAgIHRoaXMuaXMzcF8pO1xuICB9XG5cbiAgLyoqXG4gICAqIERlc3Ryb3lzIGlmcmFtZS5cbiAgICovXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy51bmxpc3Rlbl8oKTtcbiAgICB0aGlzLmNsaWVudFdpbmRvd3NfLmxlbmd0aCA9IDA7XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gbG9va3NMaWtlVHJhY2tpbmdJZnJhbWUoZWxlbWVudCkge1xuICBjb25zdCBib3ggPSBlbGVtZW50LmdldExheW91dEJveCgpO1xuICAvLyBUaGlzIGhldXJpc3RpYyBpcyBzdWJqZWN0IHRvIGNoYW5nZS5cbiAgaWYgKGJveC53aWR0aCA+IDEwIHx8IGJveC5oZWlnaHQgPiAxMCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvLyBJZnJhbWUgaXMgbm90IHRyYWNraW5nIGlmcmFtZSBpZiBvcGVuIHdpdGggdXNlciBpbnRlcmFjdGlvblxuICByZXR1cm4gIWNsb3Nlc3RCeVNlbGVjdG9yKGVsZW1lbnQsICcuaS1hbXBodG1sLW92ZXJsYXknKTtcbn1cblxuLy8gTW9zdCBjb21tb24gYWQgc2l6ZXNcbi8vIEFycmF5IG9mIFt3aWR0aCwgaGVpZ2h0XSBwYWlycy5cbmNvbnN0IGFkU2l6ZXMgPSBbXG4gIFszMDAsIDI1MF0sXG4gIFszMjAsIDUwXSxcbiAgWzMwMCwgNTBdLFxuICBbMzIwLCAxMDBdLFxuXTtcblxuLyoqXG4gKiBHdWVzcyB3aGV0aGVyIHRoaXMgZWxlbWVudCBtaWdodCBiZSBhbiBhZC5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnQgQW4gYW1wLWlmcmFtZSBlbGVtZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqIEB2aXNpYmxlRm9yVGVzdGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gaXNBZExpa2UoZWxlbWVudCkge1xuICBjb25zdCBib3ggPSBlbGVtZW50LmdldExheW91dEJveCgpO1xuICBjb25zdCB7aGVpZ2h0LCB3aWR0aH0gPSBib3g7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYWRTaXplcy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHJlZldpZHRoID0gYWRTaXplc1tpXVswXTtcbiAgICBjb25zdCByZWZIZWlnaHQgPSBhZFNpemVzW2ldWzFdO1xuICAgIGlmIChyZWZIZWlnaHQgPiBoZWlnaHQpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAocmVmV2lkdGggPiB3aWR0aCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIC8vIEZ1enp5IG1hdGNoaW5nIHRvIGFjY291bnQgZm9yIHBhZGRpbmcuXG4gICAgaWYgKGhlaWdodCAtIHJlZkhlaWdodCA8PSAyMCAmJiB3aWR0aCAtIHJlZldpZHRoIDw9IDIwKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGlmcmFtZVxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpc2FibGVTY3JvbGxpbmdPbklmcmFtZShpZnJhbWUpIHtcbiAgYWRkQXR0cmlidXRlc1RvRWxlbWVudChpZnJhbWUsIGRpY3QoeydzY3JvbGxpbmcnOiAnbm8nfSkpO1xuXG4gIC8vIFRoaXMgc2hvdWxkbid0IHdvcmssIGJ1dCBpdCBkb2VzIG9uIEZpcmVmb3guXG4gIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNTQ5NDk2OVxuICBzZXRTdHlsZShpZnJhbWUsICdvdmVyZmxvdycsICdoaWRkZW4nKTtcblxuICByZXR1cm4gaWZyYW1lO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7U3Vic2NyaXB0aW9uQXBpfSBmcm9tICcuL2lmcmFtZS1oZWxwZXInO1xuaW1wb3J0IHtkZXZ9IGZyb20gJy4vbG9nJztcbmltcG9ydCB7ZGljdH0gZnJvbSAnLi91dGlscy9vYmplY3QnO1xuaW1wb3J0IHtpc0FycmF5LCBpc0Zpbml0ZU51bWJlcn0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQge2xheW91dFJlY3RMdHdoLCBtb3ZlTGF5b3V0UmVjdCwgcmVjdEludGVyc2VjdGlvbn0gZnJvbSAnLi9sYXlvdXQtcmVjdCc7XG5cbi8qKlxuICogVGhlIHN0cnVjdHVyZSB0aGF0IGRlZmluZXMgdGhlIHJlY3RhbmdsZSB1c2VkIGluIGludGVyc2VjdGlvbiBvYnNlcnZlcnMuXG4gKlxuICogQHR5cGVkZWYge3tcbiAqICAgdG9wOiBudW1iZXIsXG4gKiAgIGJvdHRvbTogbnVtYmVyLFxuICogICBsZWZ0OiBudW1iZXIsXG4gKiAgIHJpZ2h0OiBudW1iZXIsXG4gKiAgIHdpZHRoOiBudW1iZXIsXG4gKiAgIGhlaWdodDogbnVtYmVyLFxuICogICB4OiBudW1iZXIsXG4gKiAgIHk6IG51bWJlcixcbiAqIH19XG4gKi9cbmV4cG9ydCBsZXQgRE9NUmVjdDtcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfVEhSRVNIT0xEID1cbiAgICBbMCwgMC4wNSwgMC4xLCAwLjE1LCAwLjIsIDAuMjUsIDAuMywgMC4zNSwgMC40LFxuICAgICAgMC40NSwgMC41LCAwLjU1LCAwLjYsIDAuNjUsIDAuNywgMC43NSwgMC44LCAwLjg1LCAwLjksIDAuOTUsIDFdO1xuXG4vKiogQHR5cGVkZWYge3tcbiAqICAgIGVsZW1lbnQ6ICFFbGVtZW50LFxuICogICAgY3VycmVudFRocmVzaG9sZFNsb3Q6IG51bWJlcixcbiAqICB9fVxuICovXG5sZXQgRWxlbWVudEludGVyc2VjdGlvblN0YXRlRGVmO1xuXG4vKiogQGNvbnN0IEBwcml2YXRlICovXG5jb25zdCBUQUcgPSAnSU5URVJTRUNUSU9OLU9CU0VSVkVSJztcblxuLyoqIEBjb25zdCBAcHJpdmF0ZSAqL1xuY29uc3QgSU5JVF9USU1FID0gRGF0ZS5ub3coKTtcblxuLyoqXG4gKiBBIGZ1bmN0aW9uIHRvIGdldCB0aGUgZWxlbWVudCdzIGN1cnJlbnQgSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeVxuICogcmVnYXJkbGVzcyBvZiB0aGUgaW50ZXJzZXRpb24gcmF0aW8uIE9ubHkgYXZhaWxhYmxlIHdoZW4gZWxlbWVudCBpcyBub3RcbiAqIG5lc3RlZCBpbiBhIGNvbnRhaW5lciBpZnJhbWUuXG4gKiBUT0RPOiBzdXBwb3J0IG9wdF9pZnJhbWUgaWYgdGhlcmUncyB2YWxpZCB1c2UgY2FzZXMuXG4gKiBAcGFyYW0geyEuL2xheW91dC1yZWN0LkxheW91dFJlY3REZWZ9IGVsZW1lbnQgZWxlbWVudCdzIHJlY3RcbiAqIEBwYXJhbSB7Py4vbGF5b3V0LXJlY3QuTGF5b3V0UmVjdERlZn0gb3duZXIgZWxlbWVudCdzIG93bmVyIHJlY3RcbiAqIEBwYXJhbSB7IS4vbGF5b3V0LXJlY3QuTGF5b3V0UmVjdERlZn0gaG9zdFZpZXdwb3J0IGhvc3RWaWV3cG9ydCdzIHJlY3RcbiAqIEByZXR1cm4geyFJbnRlcnNlY3Rpb25PYnNlcnZlckVudHJ5fSBBIGNoYW5nZSBlbnRyeS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEludGVyc2VjdGlvbkNoYW5nZUVudHJ5KFxuICBlbGVtZW50LCBvd25lciwgaG9zdFZpZXdwb3J0KSB7XG4gIGNvbnN0IGludGVyc2VjdGlvbiA9IHJlY3RJbnRlcnNlY3Rpb24oZWxlbWVudCwgb3duZXIsIGhvc3RWaWV3cG9ydCkgfHxcbiAgICAgIGxheW91dFJlY3RMdHdoKDAsIDAsIDAsIDApO1xuICBjb25zdCByYXRpbyA9IGludGVyc2VjdGlvblJhdGlvKGludGVyc2VjdGlvbiwgZWxlbWVudCk7XG4gIHJldHVybiBjYWxjdWxhdGVDaGFuZ2VFbnRyeShcbiAgICAgIGVsZW1lbnQsIGhvc3RWaWV3cG9ydCwgaW50ZXJzZWN0aW9uLCByYXRpbyk7XG59XG5cbi8qKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBuYXRpdmVJbnRlcnNlY3Rpb25PYnNlcnZlclN1cHBvcnRlZCh3aW4pIHtcbiAgcmV0dXJuICdJbnRlcnNlY3Rpb25PYnNlcnZlcicgaW4gd2luICYmXG4gICAgICAnSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeScgaW4gd2luICYmXG4gICAgICAnaW50ZXJzZWN0aW9uUmF0aW8nIGluIHdpbi5JbnRlcnNlY3Rpb25PYnNlcnZlckVudHJ5LnByb3RvdHlwZTtcbn1cblxuLyoqXG4gKiBBIGNsYXNzIHRvIGhlbHAgYW1wLWlmcmFtZSBhbmQgYW1wLWFkIG5lc3RlZCBpZnJhbWUgbGlzdGVuIHRvIGludGVyc2VjdGlvblxuICogY2hhbmdlLlxuICovXG5leHBvcnQgY2xhc3MgSW50ZXJzZWN0aW9uT2JzZXJ2ZXJBcGkge1xuICAvKipcbiAgICogQHBhcmFtIHshQU1QLkJhc2VFbGVtZW50fSBiYXNlRWxlbWVudFxuICAgKiBAcGFyYW0geyFFbGVtZW50fSBpZnJhbWVcbiAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2lzM3BcbiAgICovXG4gIGNvbnN0cnVjdG9yKGJhc2VFbGVtZW50LCBpZnJhbWUsIG9wdF9pczNwKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUFNUC5CYXNlRWxlbWVudH0gKi9cbiAgICB0aGlzLmJhc2VFbGVtZW50XyA9IGJhc2VFbGVtZW50O1xuXG4gICAgLyoqIEBwcml2YXRlIHs/SW50ZXJzZWN0aW9uT2JzZXJ2ZXJQb2x5ZmlsbH0gKi9cbiAgICB0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUge2Jvb2xlYW59ICovXG4gICAgdGhpcy5zaG91bGRPYnNlcnZlXyA9IGZhbHNlO1xuXG4gICAgLyoqIEBwcml2YXRlIHtib29sZWFufSAqL1xuICAgIHRoaXMuaXNJblZpZXdwb3J0XyA9IGZhbHNlO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/ZnVuY3Rpb24oKX0gKi9cbiAgICB0aGlzLnVubGlzdGVuT25EZXN0cm95XyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi9zZXJ2aWNlL3ZpZXdwb3J0L3ZpZXdwb3J0LWltcGwuVmlld3BvcnR9ICovXG4gICAgdGhpcy52aWV3cG9ydF8gPSBiYXNlRWxlbWVudC5nZXRWaWV3cG9ydCgpO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/U3Vic2NyaXB0aW9uQXBpfSAqL1xuICAgIHRoaXMuc3Vic2NyaXB0aW9uQXBpXyA9IG5ldyBTdWJzY3JpcHRpb25BcGkoXG4gICAgICAgIGlmcmFtZSwgJ3NlbmQtaW50ZXJzZWN0aW9ucycsIG9wdF9pczNwIHx8IGZhbHNlLCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5zdGFydFNlbmRpbmdJbnRlcnNlY3Rpb25fKCk7XG4gICAgICAgIH0pO1xuXG4gICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlcl8gPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXJQb2x5ZmlsbChlbnRyaWVzID0+IHtcbiAgICAgIC8vIFJlbW92ZSB0YXJnZXQgaW5mbyBmcm9tIGNyb3NzIG9yaWdpbiBpZnJhbWUuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVudHJpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZGVsZXRlIGVudHJpZXNbaV1bJ3RhcmdldCddO1xuICAgICAgfVxuICAgICAgdGhpcy5zdWJzY3JpcHRpb25BcGlfLnNlbmQoJ2ludGVyc2VjdGlvbicsIGRpY3QoeydjaGFuZ2VzJzogZW50cmllc30pKTtcbiAgICB9LCB7dGhyZXNob2xkOiBERUZBVUxUX1RIUkVTSE9MRH0pO1xuICAgIHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXJfLnRpY2sodGhpcy52aWV3cG9ydF8uZ2V0UmVjdCgpKTtcblxuICAgIC8qKiBAY29uc3Qge2Z1bmN0aW9uKCl9ICovXG4gICAgdGhpcy5maXJlID0gKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLnNob3VsZE9ic2VydmVfIHx8ICF0aGlzLmlzSW5WaWV3cG9ydF8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlcl8udGljayh0aGlzLnZpZXdwb3J0Xy5nZXRSZWN0KCkpO1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogRnVuY3Rpb24gdG8gc3RhcnQgbGlzdGVuaW5nIHRvIHZpZXdwb3J0IGV2ZW50LiBhbmQgb2JzZXJ2ZXIgaW50ZXJzZWN0aW9uXG4gICAqIGNoYW5nZSBvbiB0aGUgZWxlbWVudC5cbiAgICovXG4gIHN0YXJ0U2VuZGluZ0ludGVyc2VjdGlvbl8oKSB7XG4gICAgdGhpcy5zaG91bGRPYnNlcnZlXyA9IHRydWU7XG4gICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlcl8ub2JzZXJ2ZSh0aGlzLmJhc2VFbGVtZW50Xy5lbGVtZW50KTtcbiAgICB0aGlzLmJhc2VFbGVtZW50Xy5nZXRWc3luYygpLm1lYXN1cmUoKCkgPT4ge1xuICAgICAgdGhpcy5pc0luVmlld3BvcnRfID0gdGhpcy5iYXNlRWxlbWVudF8uaXNJblZpZXdwb3J0KCk7XG4gICAgICB0aGlzLmZpcmUoKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHVubGlzdGVuVmlld3BvcnRTY3JvbGwgPSB0aGlzLnZpZXdwb3J0Xy5vblNjcm9sbCh0aGlzLmZpcmUpO1xuICAgIGNvbnN0IHVubGlzdGVuVmlld3BvcnRDaGFuZ2UgPSB0aGlzLnZpZXdwb3J0Xy5vbkNoYW5nZWQodGhpcy5maXJlKTtcbiAgICB0aGlzLnVubGlzdGVuT25EZXN0cm95XyA9ICgpID0+IHtcbiAgICAgIHVubGlzdGVuVmlld3BvcnRTY3JvbGwoKTtcbiAgICAgIHVubGlzdGVuVmlld3BvcnRDaGFuZ2UoKTtcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEVuYWJsZSB0byB0aGUgUG9zaXRpb25PYnNlcnZlciB0byBsaXN0ZW4gdG8gdmlld3BvcnQgZXZlbnRzXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaW5WaWV3cG9ydFxuICAgKi9cbiAgb25WaWV3cG9ydENhbGxiYWNrKGluVmlld3BvcnQpIHtcbiAgICB0aGlzLmlzSW5WaWV3cG9ydF8gPSBpblZpZXdwb3J0O1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFuIGFsbCBsaXN0ZW5yc1xuICAgKi9cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLnNob3VsZE9ic2VydmVfID0gZmFsc2U7XG4gICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlcl8gPSBudWxsO1xuICAgIGlmICh0aGlzLnVubGlzdGVuT25EZXN0cm95Xykge1xuICAgICAgdGhpcy51bmxpc3Rlbk9uRGVzdHJveV8oKTtcbiAgICAgIHRoaXMudW5saXN0ZW5PbkRlc3Ryb3lfID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5zdWJzY3JpcHRpb25BcGlfLmRlc3Ryb3koKTtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbkFwaV8gPSBudWxsO1xuICB9XG59XG5cblxuLyoqXG4gKiBUaGUgSW50ZXJzZWN0aW9uT2JzZXJ2ZXJQb2x5ZmlsbCBjbGFzcyBsZXRzIGFueSBlbGVtZW50IHJlY2VpdmUgaXRzXG4gKiBpbnRlcnNlY3Rpb24gZGF0YSB3aXRoIHRoZSB2aWV3cG9ydC4gSXQgYWN0cyBsaWtlIG5hdGl2ZSBicm93c2VyIHN1cHBvcnRlZFxuICogSW50ZXJzZWN0aW9uT2JzZXJ2ZXIuXG4gKiBUaGUgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgcmVjZWl2ZXMgYSBjYWxsYmFjayBmdW5jdGlvbiBhbmQgYW4gb3B0aW9uYWwgb3B0aW9uXG4gKiBhcyBwYXJhbXMuIFdoZW5ldmVyIHRoZSBlbGVtZW50IGludGVyc2VjdGlvbiByYXRpbyBjcm9zcyBhIHRocmVzaG9sZCB2YWx1ZSxcbiAqIEludGVyc2VjdGlvbk9ic2VydmVyUG9seWZpbGwgd2lsbCBjYWxsIHRoZSBwcm92aWRlZCBjYWxsYmFjayBmdW5jdGlvbiB3aXRoXG4gKiB0aGUgY2hhbmdlIGVudHJ5LlxuICogQHZpc2libGVGb3JUZXN0aW5nXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnRlcnNlY3Rpb25PYnNlcnZlclBvbHlmaWxsIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIUFycmF5PCFJbnRlcnNlY3Rpb25PYnNlcnZlckVudHJ5Pil9IGNhbGxiYWNrXG4gICAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0X29wdGlvblxuICAgKi9cbiAgY29uc3RydWN0b3IoY2FsbGJhY2ssIG9wdF9vcHRpb24pIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtmdW5jdGlvbighQXJyYXk8IUludGVyc2VjdGlvbk9ic2VydmVyRW50cnk+KX0gKi9cbiAgICB0aGlzLmNhbGxiYWNrXyA9IGNhbGxiYWNrO1xuXG4gICAgLy8gVGhlIGlucHV0IHRocmVzaG9sZCBjYW4gYmUgYSBudW1iZXIgb3IgYW4gYXJyYXkgb2YgbnVtYmVycy5cbiAgICBsZXQgdGhyZXNob2xkID0gb3B0X29wdGlvbiAmJiBvcHRfb3B0aW9uLnRocmVzaG9sZDtcbiAgICBpZiAodGhyZXNob2xkKSB7XG4gICAgICB0aHJlc2hvbGQgPSBpc0FycmF5KHRocmVzaG9sZCkgP1xuICAgICAgICB0aHJlc2hvbGQgOiBbdGhyZXNob2xkXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyZXNob2xkID0gWzBdO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhyZXNob2xkLmxlbmd0aDsgaSsrKSB7XG4gICAgICBkZXYoKS5hc3NlcnQoaXNGaW5pdGVOdW1iZXIodGhyZXNob2xkW2ldKSwgJ1RocmVzaG9sZCBzaG91bGQgYmUgYSAnICtcbiAgICAgICAgICAnZmluaXRlIG51bWJlciBvciBhbiBhcnJheSBvZiBmaW5pdGUgbnVtYmVycycpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgbGlzdCBvZiB0aHJlc2hvbGQsIHNvcnRlZCBpbiBpbmNyZWFzaW5nIG51bWVyaWMgb3JkZXJcbiAgICAgKiBAcHJpdmF0ZSBAY29uc3QgeyFBcnJheX1cbiAgICAgKi9cbiAgICB0aGlzLnRocmVzaG9sZF8gPSB0aHJlc2hvbGQuc29ydCgpO1xuICAgIGRldigpLmFzc2VydCh0aGlzLnRocmVzaG9sZF9bMF0gPj0gMCAmJlxuICAgICAgICB0aGlzLnRocmVzaG9sZF9bdGhpcy50aHJlc2hvbGRfLmxlbmd0aCAtIDFdIDw9IDEsXG4gICAgJ1RocmVzaG9sZCBzaG91bGQgYmUgaW4gdGhlIHJhbmdlIGZyb20gXCJbMCwgMV1cIicpO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/Li9sYXlvdXQtcmVjdC5MYXlvdXRSZWN0RGVmfSAqL1xuICAgIHRoaXMubGFzdFZpZXdwb3J0UmVjdF8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHsuL2xheW91dC1yZWN0LkxheW91dFJlY3REZWZ8dW5kZWZpbmVkfSAqL1xuICAgIHRoaXMubGFzdElmcmFtZVJlY3RfID0gdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogU3RvcmUgYSBsaXN0IG9mIG9ic2VydmVkIGVsZW1lbnRzIGFuZCB0aGVpciBjdXJyZW50IHRocmVzaG9sZCBzbG90IHdoaWNoXG4gICAgICogdGhlaXIgaW50ZXJzZWN0aW9uIHJhdGlvIGZpbGxzLCByYW5nZSBmcm9tIFswLCB0aGlzLnRocmVzaG9sZF8ubGVuZ3RoXVxuICAgICAqIEBwcml2YXRlIHtBcnJheTwhRWxlbWVudEludGVyc2VjdGlvblN0YXRlRGVmPn1cbiAgICAgKi9cbiAgICB0aGlzLm9ic2VydmVFbnRyaWVzXyA9IFtdO1xuICB9XG5cbiAgLyoqXG4gICAqL1xuICBkaXNjb25uZWN0KCkge1xuICAgIHRoaXMub2JzZXJ2ZUVudHJpZXNfLmxlbmd0aCA9IDA7XG4gIH1cblxuICAvKipcbiAgICogUHJvdmlkZSBhIHdheSB0byBvYnNlcnZlIHRoZSBpbnRlcnNlY3Rpb24gY2hhbmdlIGZvciBhIHNwZWNpZmljIGVsZW1lbnRcbiAgICogUGxlYXNlIG5vdGUgSW50ZXJzZWN0aW9uT2JzZXJ2ZXJQb2x5ZmlsbCBvbmx5IHN1cHBvcnQgQU1QIGVsZW1lbnQgbm93XG4gICAqIFRPRE86IFN1cHBvcnQgbm9uIEFNUCBlbGVtZW50XG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAgICovXG4gIG9ic2VydmUoZWxlbWVudCkge1xuICAgIC8vIENoZWNrIHRoZSBlbGVtZW50IGlzIGFuIEFNUCBlbGVtZW50LlxuICAgIGRldigpLmFzc2VydChlbGVtZW50LmdldExheW91dEJveCk7XG5cbiAgICAvLyBJZiB0aGUgZWxlbWVudCBhbHJlYWR5IGV4aXN0cyBpbiBjdXJyZW50IG9ic2VydmVFbnRyaWVzLCBkbyBub3RoaW5nXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm9ic2VydmVFbnRyaWVzXy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMub2JzZXJ2ZUVudHJpZXNfW2ldLmVsZW1lbnQgPT09IGVsZW1lbnQpIHtcbiAgICAgICAgZGV2KCkud2FybihUQUcsICdzaG91bGQgb2JzZXJ2ZSBzYW1lIGVsZW1lbnQgb25jZScpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgbmV3U3RhdGUgPSB7XG4gICAgICBlbGVtZW50LFxuICAgICAgY3VycmVudFRocmVzaG9sZFNsb3Q6IDAsXG4gICAgfTtcblxuICAgIC8vIEdldCB0aGUgbmV3IG9ic2VydmVkIGVsZW1lbnQncyBmaXJzdCBjaGFuZ2VFbnRyeSBiYXNlZCBvbiBsYXN0IHZpZXdwb3J0XG4gICAgaWYgKHRoaXMubGFzdFZpZXdwb3J0UmVjdF8pIHtcbiAgICAgIGNvbnN0IGNoYW5nZSA9IHRoaXMuZ2V0VmFsaWRJbnRlcnNlY3Rpb25DaGFuZ2VFbnRyeV8oXG4gICAgICAgICAgbmV3U3RhdGUsIHRoaXMubGFzdFZpZXdwb3J0UmVjdF8sIHRoaXMubGFzdElmcmFtZVJlY3RfKTtcbiAgICAgIGlmIChjaGFuZ2UpIHtcbiAgICAgICAgdGhpcy5jYWxsYmFja18oW2NoYW5nZV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHB1c2ggbmV3IG9ic2VydmVkIGVsZW1lbnRcbiAgICB0aGlzLm9ic2VydmVFbnRyaWVzXy5wdXNoKG5ld1N0YXRlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQcm92aWRlIGEgd2F5IHRvIHVub2JzZXJ2ZSBpbnRlcnNlY3Rpb24gY2hhbmdlIGZvciBhIHNwZWNpZmllZCBlbGVtZW50XG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAgICovXG4gIHVub2JzZXJ2ZShlbGVtZW50KSB7XG4gICAgLy8gZmluZCB0aGUgdW5vYnNlcnZlZCBlbGVtZW50IGluIG9ic2VydmVFbnRyaWVzXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm9ic2VydmVFbnRyaWVzXy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMub2JzZXJ2ZUVudHJpZXNfW2ldLmVsZW1lbnQgPT09IGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlRW50cmllc18uc3BsaWNlKGksIDEpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIGRldigpLndhcm4oVEFHLCAndW5vYnNlcnZlIG5vbi1vYnNlcnZlZCBlbGVtZW50Jyk7XG4gIH1cblxuICAvKipcbiAgICogVGljayBmdW5jdGlvbiB0aGF0IHVwZGF0ZSB0aGUgRE9NUmVjdCBvZiB0aGUgcm9vdCBvZiBvYnNlcnZlZCBlbGVtZW50cy5cbiAgICogQ2FsbGVyIG5lZWRzIHRvIG1ha2Ugc3VyZSB0byBwYXNzIGluIHRoZSBjb3JyZWN0IGNvbnRhaW5lci5cbiAgICogTm90ZTogdGhlIG9wdF9pZnJhbWUgcGFyYW0gaXMgdGhlIGlmcmFtZSBwb3NpdGlvbiByZWxhdGl2ZSB0byB0aGUgaG9zdCBkb2MsXG4gICAqIFRoZSBpZnJhbWUgbXVzdCBiZSBhIG5vbi1zY3JvbGxhYmxlIGlmcmFtZS5cbiAgICogQHBhcmFtIHshLi9sYXlvdXQtcmVjdC5MYXlvdXRSZWN0RGVmfSBob3N0Vmlld3BvcnRcbiAgICogQHBhcmFtIHsuL2xheW91dC1yZWN0LkxheW91dFJlY3REZWY9fSBvcHRfaWZyYW1lXG4gICAqL1xuICB0aWNrKGhvc3RWaWV3cG9ydCwgb3B0X2lmcmFtZSkge1xuXG4gICAgaWYgKG9wdF9pZnJhbWUpIHtcbiAgICAgIC8vIElmIGVsZW1lbnQgaW5zaWRlIGFuIGlmcmFtZS4gQWRqdXN0IG9yaWdpbiB0byB0aGUgaWZyYW1lLmxlZnQvdG9wLlxuICAgICAgaG9zdFZpZXdwb3J0ID1cbiAgICAgICAgICBtb3ZlTGF5b3V0UmVjdChob3N0Vmlld3BvcnQsIC1vcHRfaWZyYW1lLmxlZnQsIC1vcHRfaWZyYW1lLnRvcCk7XG4gICAgICBvcHRfaWZyYW1lID1cbiAgICAgICAgICBtb3ZlTGF5b3V0UmVjdChvcHRfaWZyYW1lLCAtb3B0X2lmcmFtZS5sZWZ0LCAtb3B0X2lmcmFtZS50b3ApO1xuICAgIH1cblxuICAgIHRoaXMubGFzdFZpZXdwb3J0UmVjdF8gPSBob3N0Vmlld3BvcnQ7XG4gICAgdGhpcy5sYXN0SWZyYW1lUmVjdF8gPSBvcHRfaWZyYW1lO1xuXG4gICAgY29uc3QgY2hhbmdlcyA9IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm9ic2VydmVFbnRyaWVzXy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgY2hhbmdlID0gdGhpcy5nZXRWYWxpZEludGVyc2VjdGlvbkNoYW5nZUVudHJ5XyhcbiAgICAgICAgICB0aGlzLm9ic2VydmVFbnRyaWVzX1tpXSwgaG9zdFZpZXdwb3J0LCBvcHRfaWZyYW1lKTtcbiAgICAgIGlmIChjaGFuZ2UpIHtcbiAgICAgICAgY2hhbmdlcy5wdXNoKGNoYW5nZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNoYW5nZXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLmNhbGxiYWNrXyhjaGFuZ2VzKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIGEgY2hhbmdlIGVudHJ5IGZvciBvbmUgZWxlbWVudCB0aGF0IHNob3VsZCBiZSBjb21wYXRpYmxlIHdpdGhcbiAgICogSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeSBpZiBpdCdzIHZhbGlkIHdpdGggY3VycmVudCBjb25maWcuXG4gICAqIFdoZW4gdGhlIG5ldyBpbnRlcnNlY3Rpb24gcmF0aW8gZG9lc24ndCBjcm9zcyBvbmUgb2YgYSB0aHJlc2hvbGQgdmFsdWUsXG4gICAqIHRoZSBmdW5jdGlvbiB3aWxsIHJldHVybiBudWxsLlxuICAgKlxuICAgKiBAcGFyYW0geyFFbGVtZW50SW50ZXJzZWN0aW9uU3RhdGVEZWZ9IHN0YXRlXG4gICAqIEBwYXJhbSB7IS4vbGF5b3V0LXJlY3QuTGF5b3V0UmVjdERlZn0gaG9zdFZpZXdwb3J0IGhvc3RWaWV3cG9ydCdzIHJlY3RcbiAgICogQHBhcmFtIHsuL2xheW91dC1yZWN0LkxheW91dFJlY3REZWY9fSBvcHRfaWZyYW1lIGlmcmFtZSBjb250YWluZXIgcmVjdFxuICAgKiBAcmV0dXJuIHs/SW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeX0gQSB2YWxpZCBjaGFuZ2UgZW50cnkgb3IgbnVsbCBpZiByYXRpb1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0VmFsaWRJbnRlcnNlY3Rpb25DaGFuZ2VFbnRyeV8oc3RhdGUsIGhvc3RWaWV3cG9ydCwgb3B0X2lmcmFtZSkge1xuICAgIGNvbnN0IHtlbGVtZW50fSA9IHN0YXRlO1xuXG4gICAgLy8gTm9ybWFsaXplIGNvbnRhaW5lciBMYXlvdXRSZWN0IHRvIGJlIHJlbGF0aXZlIHRvIHBhZ2VcbiAgICBsZXQgb3duZXJSZWN0ID0gbnVsbDtcblxuICAgIC8vIElmIG9wdF9pZnJhbWUgaXMgcHJvdmlkZWQsIGFsbCBMYXlvdXRSZWN0IGhhcyBwb3NpdGlvbiByZWxhdGl2ZSB0b1xuICAgIC8vIHRoZSBpZnJhbWUuXG4gICAgLy8gSWYgb3B0X2lmcmFtZSBpcyBub3QgcHJvdmlkZWQsIGFsbCBMYXlvdXRSZWN0IGhhcyBwb3NpdGlvbiByZWxhdGl2ZSB0b1xuICAgIC8vIHRoZSBob3N0IGRvY3VtZW50LlxuICAgIGNvbnN0IGVsZW1lbnRSZWN0ID0gZWxlbWVudC5nZXRMYXlvdXRCb3goKTtcbiAgICBjb25zdCBvd25lciA9IGVsZW1lbnQuZ2V0T3duZXIoKTtcbiAgICBvd25lclJlY3QgPSBvd25lciAmJiBvd25lci5nZXRMYXlvdXRCb3goKTtcblxuICAgIC8vIGNhbGN1bGF0ZSBpbnRlcnNlY3Rpb25SZWN0LiB0aGF0IHRoZSBlbGVtZW50IGludGVyc2VjdHMgd2l0aCBob3N0Vmlld3BvcnRcbiAgICAvLyBhbmQgaW50ZXJzZWN0cyB3aXRoIG93bmVyIGVsZW1lbnQgYW5kIGNvbnRhaW5lciBpZnJhbWUgaWYgZXhpc3RzLlxuICAgIGNvbnN0IGludGVyc2VjdGlvblJlY3QgPVxuICAgICAgICByZWN0SW50ZXJzZWN0aW9uKGVsZW1lbnRSZWN0LCBvd25lclJlY3QsIGhvc3RWaWV3cG9ydCwgb3B0X2lmcmFtZSkgfHxcbiAgICAgICAgbGF5b3V0UmVjdEx0d2goMCwgMCwgMCwgMCk7XG4gICAgLy8gY2FsY3VsYXRlIHJhdGlvLCBjYWxsIGNhbGxiYWNrIGJhc2VkIG9uIG5ldyByYXRpbyB2YWx1ZS5cbiAgICBjb25zdCByYXRpbyA9IGludGVyc2VjdGlvblJhdGlvKGludGVyc2VjdGlvblJlY3QsIGVsZW1lbnRSZWN0KTtcbiAgICBjb25zdCBuZXdUaHJlc2hvbGRTbG90ID0gZ2V0VGhyZXNob2xkU2xvdCh0aGlzLnRocmVzaG9sZF8sIHJhdGlvKTtcblxuICAgIGlmIChuZXdUaHJlc2hvbGRTbG90ID09IHN0YXRlLmN1cnJlbnRUaHJlc2hvbGRTbG90KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgc3RhdGUuY3VycmVudFRocmVzaG9sZFNsb3QgPSBuZXdUaHJlc2hvbGRTbG90O1xuXG4gICAgLy8gVG8gZ2V0IHNhbWUgYmVoYXZpb3IgYXMgbmF0aXZlIEludGVyc2VjdGlvbk9ic2VydmVyIHNldCBob3N0Vmlld3BvcnQgbnVsbFxuICAgIC8vIGlmIGluc2lkZSBhbiBpZnJhbWVcbiAgICBjb25zdCBjaGFuZ2VFbnRyeSA9IGNhbGN1bGF0ZUNoYW5nZUVudHJ5KGVsZW1lbnRSZWN0LFxuICAgICAgICAob3B0X2lmcmFtZSA/IG51bGwgOiBob3N0Vmlld3BvcnQpLCBpbnRlcnNlY3Rpb25SZWN0LCByYXRpbyk7XG4gICAgY2hhbmdlRW50cnkudGFyZ2V0ID0gZWxlbWVudDtcbiAgICByZXR1cm4gY2hhbmdlRW50cnk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSByYXRpbyBvZiB0aGUgc21hbGxlciBib3gncyBhcmVhIHRvIHRoZSBsYXJnZXIgYm94J3MgYXJlYS5cbiAqIEBwYXJhbSB7IS4vbGF5b3V0LXJlY3QuTGF5b3V0UmVjdERlZn0gc21hbGxlclxuICogQHBhcmFtIHshLi9sYXlvdXQtcmVjdC5MYXlvdXRSZWN0RGVmfSBsYXJnZXJcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuZnVuY3Rpb24gaW50ZXJzZWN0aW9uUmF0aW8oc21hbGxlciwgbGFyZ2VyKSB7XG4gIHJldHVybiAoc21hbGxlci53aWR0aCAqIHNtYWxsZXIuaGVpZ2h0KSAvIChsYXJnZXIud2lkdGggKiBsYXJnZXIuaGVpZ2h0KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBzbG90IG51bWJlciB0aGF0IHRoZSBjdXJyZW50IHJhdGlvIGZpbGxzIGluLlxuICogQHBhcmFtIHshQXJyYXl9IHNvcnRlZFRocmVzaG9sZCB2YWxpZCBzb3J0ZWQgSW9CIHRocmVzaG9sZFxuICogQHBhcmFtIHtudW1iZXJ9IHJhdGlvIFJhbmdlIGZyb20gWzAsIDFdXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFJhbmdlIGZyb20gWzAsIHRocmVzaG9sZC5sZW5ndGhdXG4gKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRocmVzaG9sZFNsb3Qoc29ydGVkVGhyZXNob2xkLCByYXRpbykge1xuICBsZXQgc3RhcnRJZHggPSAwO1xuICBsZXQgZW5kSWR4ID0gc29ydGVkVGhyZXNob2xkLmxlbmd0aDtcbiAgLy8gMCBpcyBhIHNwZWNpYWwgY2FzZSB0aGF0IGRvZXMgbm90IGZpdCBpbnRvIFtzbWFsbCwgbGFyZ2UpIHJhbmdlXG4gIGlmIChyYXRpbyA9PSAwKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cbiAgbGV0IG1pZCA9ICgoc3RhcnRJZHggKyBlbmRJZHgpIC8gMikgfCAwO1xuICB3aGlsZSAoc3RhcnRJZHggPCBtaWQpIHtcbiAgICBjb25zdCBtaWRWYWx1ZSA9IHNvcnRlZFRocmVzaG9sZFttaWRdO1xuICAgIC8vIEluIHRoZSByYW5nZSBvZiBbc21hbGwsIGxhcmdlKVxuICAgIGlmIChyYXRpbyA8IG1pZFZhbHVlKSB7XG4gICAgICBlbmRJZHggPSBtaWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXJ0SWR4ID0gbWlkO1xuICAgIH1cbiAgICBtaWQgPSAoKHN0YXJ0SWR4ICsgZW5kSWR4KSAvIDIpIHwgMDtcbiAgfVxuICByZXR1cm4gZW5kSWR4O1xufVxuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBjYWxjdWxhdGUgdGhlIEludGVyc2VjdGlvbk9ic2VydmVyIGNoYW5nZSBlbnRyeS5cbiAqIEBwYXJhbSB7IS4vbGF5b3V0LXJlY3QuTGF5b3V0UmVjdERlZn0gZWxlbWVudCBlbGVtZW50J3MgcmVjdFxuICogQHBhcmFtIHs/Li9sYXlvdXQtcmVjdC5MYXlvdXRSZWN0RGVmfSBob3N0Vmlld3BvcnQgaG9zdFZpZXdwb3J0J3MgcmVjdFxuICogQHBhcmFtIHshLi9sYXlvdXQtcmVjdC5MYXlvdXRSZWN0RGVmfSBpbnRlcnNlY3Rpb25cbiAqIEBwYXJhbSB7bnVtYmVyfSByYXRpb1xuICogQHJldHVybiB7IUludGVyc2VjdGlvbk9ic2VydmVyRW50cnl9fVxuICovXG5mdW5jdGlvbiBjYWxjdWxhdGVDaGFuZ2VFbnRyeShcbiAgZWxlbWVudCwgaG9zdFZpZXdwb3J0LCBpbnRlcnNlY3Rpb24sIHJhdGlvKSB7XG4gIC8vIElmIGVsZW1lbnQgbm90IGluIGFuIGlmcmFtZS5cbiAgLy8gYWRqdXN0IGFsbCBMYXlvdXRSZWN0IHRvIGhvc3RWaWV3cG9ydCBPcmlnaW4uXG4gIGxldCBib3VuZGluZ0NsaWVudFJlY3QgPSBlbGVtZW50O1xuICBsZXQgcm9vdEJvdW5kcyA9IGhvc3RWaWV3cG9ydDtcbiAgLy8gSWYgbm8gaG9zdFZpZXdwb3J0IGlzIHByb3ZpZGVkLCBlbGVtZW50IGlzIGluc2lkZSBhbiBub24tc2Nyb2xsYWJsZSBpZnJhbWUuXG4gIC8vIEV2ZXJ5IExheW91dHJlY3QgaGFzIGFscmVhZHkgYWRqdXN0IHRoZWlyIG9yaWdpbiBhY2NvcmRpbmcgdG8gaWZyYW1lXG4gIC8vIHJlY3Qgb3JpZ2luLiBMYXlvdXRSZWN0IHBvc2l0aW9uIGlzIHJlbGF0aXZlIHRvIGlmcmFtZSBvcmlnaW4sXG4gIC8vIHRodXMgcmVsYXRpdmUgdG8gaWZyYW1lJ3Mgdmlld3BvcnQgb3JpZ2luIGJlY2F1c2UgdGhlIHZpZXdwb3J0IGlzIGF0IHRoZVxuICAvLyBpZnJhbWUgb3JpZ2luLiBObyBuZWVkIHRvIGFkanVzdCBwb3NpdGlvbiBoZXJlLlxuXG4gIGlmIChob3N0Vmlld3BvcnQpIHtcbiAgICAvLyBJZiBlbGVtZW50IG5vdCBpbiBhbiBpZnJhbWUuXG4gICAgLy8gYWRqdXN0IGFsbCBMYXlvdXRSZWN0IHRvIGhvc3RWaWV3cG9ydCBPcmlnaW4uXG4gICAgcm9vdEJvdW5kcyA9IC8qKiBAdHlwZSB7IS4vbGF5b3V0LXJlY3QuTGF5b3V0UmVjdERlZn0gKi8gKHJvb3RCb3VuZHMpO1xuICAgIGludGVyc2VjdGlvbiA9IG1vdmVMYXlvdXRSZWN0KGludGVyc2VjdGlvbiwgLWhvc3RWaWV3cG9ydC5sZWZ0LFxuICAgICAgICAtaG9zdFZpZXdwb3J0LnRvcCk7XG4gICAgLy8gVGhlIGVsZW1lbnQgaXMgcmVsYXRpdmUgdG8gKDAsIDApLCB3aGlsZSB0aGUgdmlld3BvcnQgbW92ZXMuIFNvLCB3ZSBtdXN0XG4gICAgLy8gYWRqdXN0LlxuICAgIGJvdW5kaW5nQ2xpZW50UmVjdCA9IG1vdmVMYXlvdXRSZWN0KGJvdW5kaW5nQ2xpZW50UmVjdCxcbiAgICAgICAgLWhvc3RWaWV3cG9ydC5sZWZ0LCAtaG9zdFZpZXdwb3J0LnRvcCk7XG4gICAgLy8gTm93LCBtb3ZlIHRoZSB2aWV3cG9ydCB0byAoMCwgMClcbiAgICByb290Qm91bmRzID0gbW92ZUxheW91dFJlY3Qocm9vdEJvdW5kcyxcbiAgICAgICAgLWhvc3RWaWV3cG9ydC5sZWZ0LCAtaG9zdFZpZXdwb3J0LnRvcCk7XG4gIH1cblxuICByZXR1cm4gLyoqIEB0eXBlIHshSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeX0gKi8gKHtcbiAgICB0aW1lOiAodHlwZW9mIHBlcmZvcm1hbmNlICE9PSAndW5kZWZpbmVkJyAmJiBwZXJmb3JtYW5jZS5ub3cpID9cbiAgICAgIHBlcmZvcm1hbmNlLm5vdygpIDogRGF0ZS5ub3coKSAtIElOSVRfVElNRSxcbiAgICByb290Qm91bmRzLFxuICAgIGJvdW5kaW5nQ2xpZW50UmVjdCxcbiAgICBpbnRlcnNlY3Rpb25SZWN0OiBpbnRlcnNlY3Rpb24sXG4gICAgaW50ZXJzZWN0aW9uUmF0aW86IHJhdGlvLFxuICB9KTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgVGhpcyBtb2R1bGUgZGVjbGFyZXMgSlNPTiB0eXBlcyBhcyBkZWZpbmVkIGluIHRoZVxuICoge0BsaW5rIGh0dHA6Ly9qc29uLm9yZy99LlxuICovXG5cbmltcG9ydCB7aXNPYmplY3R9IGZyb20gJy4vdHlwZXMnO1xuXG5cbi8vIE5PVEUgVHlwZSBhcmUgY2hhbmdlZCB0byB7Kn0gYmVjYXVzZSBvZlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9jbG9zdXJlLWNvbXBpbGVyL2lzc3Vlcy8xOTk5XG5cbi8qKlxuICogSlNPTiBzY2FsYXIuIEl0J3MgZWl0aGVyIHN0cmluZywgbnVtYmVyIG9yIGJvb2xlYW4uXG4gKiBAdHlwZWRlZiB7Kn0gc2hvdWxkIGJlIHN0cmluZ3xudW1iZXJ8Ym9vbGVhblxuICovXG5sZXQgSlNPTlNjYWxhckRlZjtcblxuXG4vKipcbiAqIEpTT04gb2JqZWN0LiBJdCdzIGEgbWFwIHdpdGggc3RyaW5nIGtleXMgYW5kIEpTT04gdmFsdWVzLlxuICogQHR5cGVkZWYgeyp9IHNob3VsZCBiZSAhT2JqZWN0PHN0cmluZywgP0pTT05WYWx1ZURlZj5cbiAqL1xubGV0IEpTT05PYmplY3REZWY7XG5cblxuLyoqXG4gKiBKU09OIGFycmF5LiBJdCdzIGFuIGFycmF5IHdpdGggSlNPTiB2YWx1ZXMuXG4gKiBAdHlwZWRlZiB7Kn0gc2hvdWxkIGJlICFBcnJheTw/SlNPTlZhbHVlRGVmPlxuICovXG5sZXQgSlNPTkFycmF5RGVmO1xuXG5cbi8qKlxuICogSlNPTiB2YWx1ZS4gSXQncyBlaXRoZXIgYSBzY2FsYXIsIGFuIG9iamVjdCBvciBhbiBhcnJheS5cbiAqIEB0eXBlZGVmIHsqfSBzaG91bGQgYmUgIUpTT05TY2FsYXJEZWZ8IUpTT05PYmplY3REZWZ8IUpTT05BcnJheURlZlxuICovXG5sZXQgSlNPTlZhbHVlRGVmO1xuXG4vKipcbiAqIFJlY3JlYXRlcyBvYmplY3RzIHdpdGggcHJvdG90eXBlLWxlc3MgY29waWVzLlxuICogQHBhcmFtIHshSnNvbk9iamVjdH0gb2JqXG4gKiBAcmV0dXJuIHshSnNvbk9iamVjdH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlY3JlYXRlTm9uUHJvdG9PYmplY3Qob2JqKSB7XG4gIGNvbnN0IGNvcHkgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBmb3IgKGNvbnN0IGsgaW4gb2JqKSB7XG4gICAgaWYgKCFoYXNPd25Qcm9wZXJ0eShvYmosIGspKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgY29uc3QgdiA9IG9ialtrXTtcbiAgICBjb3B5W2tdID0gaXNPYmplY3QodikgPyByZWNyZWF0ZU5vblByb3RvT2JqZWN0KHYpIDogdjtcbiAgfVxuICByZXR1cm4gLyoqIEB0eXBlIHshSnNvbk9iamVjdH0gKi8gKGNvcHkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSB2YWx1ZSBmcm9tIGFuIG9iamVjdCBmb3IgYSBmaWVsZC1iYXNlZCBleHByZXNzaW9uLiBUaGUgZXhwcmVzc2lvblxuICogaXMgYSBzaW1wbGUgbmVzdGVkIGRvdC1ub3RhdGlvbiBvZiBmaWVsZHMsIHN1Y2ggYXMgYGZpZWxkMS5maWVsZDJgLiBJZiBhbnlcbiAqIGZpZWxkIGluIGEgY2hhaW4gZG9lcyBub3QgZXhpc3Qgb3IgaXMgbm90IGFuIG9iamVjdCBvciBhcnJheSwgdGhlIHJldHVybmVkXG4gKiB2YWx1ZSB3aWxsIGJlIGB1bmRlZmluZWRgLlxuICpcbiAqIEBwYXJhbSB7IUpzb25PYmplY3R9IG9ialxuICogQHBhcmFtIHtzdHJpbmd9IGV4cHJcbiAqIEByZXR1cm4geyp9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRWYWx1ZUZvckV4cHIob2JqLCBleHByKSB7XG4gIC8vIFRoZSBgLmAgaW5kaWNhdGVzIFwidGhlIG9iamVjdCBpdHNlbGZcIi5cbiAgaWYgKGV4cHIgPT0gJy4nKSB7XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuICAvLyBPdGhlcndpc2UsIG5hdmlnYXRlIHZpYSBwcm9wZXJ0aWVzLlxuICBjb25zdCBwYXJ0cyA9IGV4cHIuc3BsaXQoJy4nKTtcbiAgbGV0IHZhbHVlID0gb2JqO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgcGFydCA9IHBhcnRzW2ldO1xuICAgIGlmIChwYXJ0ICYmXG4gICAgICAgIHZhbHVlICYmXG4gICAgICAgIHZhbHVlW3BhcnRdICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgaGFzT3duUHJvcGVydHkodmFsdWUsIHBhcnQpXG4gICAgKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlW3BhcnRdO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIHZhbHVlID0gdW5kZWZpbmVkO1xuICAgIGJyZWFrO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuLyoqXG4gKiBTaW1wbGUgd3JhcHBlciBhcm91bmQgSlNPTi5wYXJzZSB0aGF0IGNhc3RzIHRoZSByZXR1cm4gdmFsdWVcbiAqIHRvIEpzb25PYmplY3QuXG4gKiBDcmVhdGUgYSBuZXcgd3JhcHBlciBpZiBhbiBhcnJheSByZXR1cm4gdmFsdWUgaXMgZGVzaXJlZC5cbiAqIEBwYXJhbSB7Kn0ganNvbiBKU09OIHN0cmluZyB0byBwYXJzZVxuICogQHJldHVybiB7P0pzb25PYmplY3R9IE1heSBiZSBleHRlbmQgdG8gcGFyc2UgYXJyYXlzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VKc29uKGpzb24pIHtcbiAgcmV0dXJuIC8qKiBAdHlwZSB7P0pzb25PYmplY3R9ICovKEpTT04ucGFyc2UoLyoqIEB0eXBlIHtzdHJpbmd9ICovIChqc29uKSkpO1xufVxuXG4vKipcbiAqIFBhcnNlcyB0aGUgZ2l2ZW4gYGpzb25gIHN0cmluZyB3aXRob3V0IHRocm93aW5nIGFuIGV4Y2VwdGlvbiBpZiBub3QgdmFsaWQuXG4gKiBSZXR1cm5zIGB1bmRlZmluZWRgIGlmIHBhcnNpbmcgZmFpbHMuXG4gKiBSZXR1cm5zIHRoZSBgT2JqZWN0YCBjb3JyZXNwb25kaW5nIHRvIHRoZSBKU09OIHN0cmluZyB3aGVuIHBhcnNpbmcgc3VjY2VlZHMuXG4gKiBAcGFyYW0geyp9IGpzb24gSlNPTiBzdHJpbmcgdG8gcGFyc2VcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oIUVycm9yKT19IG9wdF9vbkZhaWxlZCBPcHRpb25hbCBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkXG4gKiAgICAgd2l0aCB0aGUgZXJyb3IgaWYgcGFyc2luZyBmYWlscy5cbiAqIEByZXR1cm4gez9Kc29uT2JqZWN0fHVuZGVmaW5lZH0gTWF5IGJlIGV4dGVuZCB0byBwYXJzZSBhcnJheXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cnlQYXJzZUpzb24oanNvbiwgb3B0X29uRmFpbGVkKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHBhcnNlSnNvbihqc29uKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChvcHRfb25GYWlsZWQpIHtcbiAgICAgIG9wdF9vbkZhaWxlZChlKTtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuXG4vKipcbiAqIFJlY3Vyc2l2ZWx5IGNoZWNrcyBzdHJpY3QgZXF1YWxpdHkgb2YgaXRlbXMgaW4gbmVzdGVkIGFycmF5cyBhbmQgb2JqZWN0cy5cbiAqXG4gKiBAcGFyYW0ge0pTT05WYWx1ZURlZn0gYVxuICogQHBhcmFtIHtKU09OVmFsdWVEZWZ9IGJcbiAqIEBwYXJhbSB7bnVtYmVyfSBkZXB0aCBUaGUgbWF4aW11bSByZWN1cnNpb24gZGVwdGguIE11c3QgYmUgZmluaXRlLlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiBkZXB0aCBhcmd1bWVudCBpcyBub3QgZmluaXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVjdXJzaXZlRXF1YWxzKGEsIGIsIGRlcHRoID0gMykge1xuICBpZiAoIWlzRmluaXRlKGRlcHRoKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignZGVwdGggYXJnIG11c3QgYmUgZmluaXRlOiAnICsgZGVwdGgpO1xuICB9XG4gIGlmIChhID09PSBiKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgLy8gT25seSBjaGVjayBzaGFsbG93IGVxdWFsaXR5IGZvciBkZXB0aCA8IDEuXG4gIGlmIChkZXB0aCA8IDEpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKHR5cGVvZiBhICE9PSB0eXBlb2YgYikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheShhKSAmJiBBcnJheS5pc0FycmF5KGIpKSB7XG4gICAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICghcmVjdXJzaXZlRXF1YWxzKGFbaV0sIGJbaV0sIGRlcHRoIC0gMSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoYSAmJiBiICYmIHR5cGVvZiBhID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgYiA9PT0gJ29iamVjdCcpIHtcbiAgICBjb25zdCBrZXlzQSA9IE9iamVjdC5rZXlzKC8qKiBAdHlwZSB7IU9iamVjdH0gKi8gKGEpKTtcbiAgICBjb25zdCBrZXlzQiA9IE9iamVjdC5rZXlzKC8qKiBAdHlwZSB7IU9iamVjdH0gKi8gKGIpKTtcbiAgICBpZiAoa2V5c0EubGVuZ3RoICE9PSBrZXlzQi5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzQS5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qga2V5QSA9IGtleXNBW2ldO1xuICAgICAgY29uc3QgdmFsdWVBID0gYVtrZXlBXTtcbiAgICAgIGNvbnN0IHZhbHVlQiA9IGJba2V5QV07XG4gICAgICBpZiAoIXJlY3Vyc2l2ZUVxdWFscyh2YWx1ZUEsIHZhbHVlQiwgZGVwdGggLSAxKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7Kn0gb2JqXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBoYXNPd25Qcm9wZXJ0eShvYmosIGtleSkge1xuICBpZiAob2JqID09IG51bGwgfHwgdHlwZW9mIG9iaiAhPSAnb2JqZWN0Jykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKFxuICAgICAgLyoqIEB0eXBlIHshT2JqZWN0fSAqLyAob2JqKSwga2V5KTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbi8qKlxuICogVGhlIHN0cnVjdHVyZSB0aGF0IGNvbWJpbmVzIHBvc2l0aW9uIGFuZCBzaXplIGZvciBhbiBlbGVtZW50LiBUaGUgZXhhY3RcbiAqIGludGVycHJldGF0aW9uIG9mIHBvc2l0aW9uIGFuZCBzaXplIGRlcGVuZHMgb24gdGhlIHVzZSBjYXNlLlxuICpcbiAqIEB0eXBlZGVmIHt7XG4gKiAgIHRvcDogbnVtYmVyLFxuICogICBib3R0b206IG51bWJlcixcbiAqICAgbGVmdDogbnVtYmVyLFxuICogICByaWdodDogbnVtYmVyLFxuICogICB3aWR0aDogbnVtYmVyLFxuICogICBoZWlnaHQ6IG51bWJlcixcbiAqICAgeDogbnVtYmVyLFxuICogICB5OiBudW1iZXJcbiAqIH19XG4gKi9cbmV4cG9ydCBsZXQgTGF5b3V0UmVjdERlZjtcblxuXG4vKipcbiAqIFRoZSBzdHJ1Y3R1cmUgdGhhdCByZXByZXNlbnRzIHRoZSBtYXJnaW5zIG9mIGFuIEVsZW1lbnQuXG4gKlxuICogQHR5cGVkZWYge3tcbiAqICAgdG9wOiBudW1iZXIsXG4gKiAgIHJpZ2h0OiBudW1iZXIsXG4gKiAgIGJvdHRvbTogbnVtYmVyLFxuICogICBsZWZ0OiBudW1iZXJcbiAqIH19XG4gKi9cbmV4cG9ydCBsZXQgTGF5b3V0TWFyZ2luc0RlZjtcblxuXG4vKipcbiAqIFRoZSBzdHJ1Y3R1cmUgdGhhdCByZXByZXNlbnRzIGEgcmVxdWVzdGVkIGNoYW5nZSB0byB0aGUgbWFyZ2lucyBvZiBhblxuICogRWxlbWVudC4gQW55IG5ldyB2YWx1ZXMgc3BlY2lmaWVkIHdpbGwgcmVwbGFjZSBleGlzdGluZyBvbmVzIChyYXRoZXIgdGhhblxuICogYmVpbmcgYWRkaXRpdmUpLlxuICpcbiAqIEB0eXBlZGVmIHt7XG4gKiAgIHRvcDogKG51bWJlcnx1bmRlZmluZWQpLFxuICogICByaWdodDogKG51bWJlcnx1bmRlZmluZWQpLFxuICogICBib3R0b206IChudW1iZXJ8dW5kZWZpbmVkKSxcbiAqICAgbGVmdDogKG51bWJlcnx1bmRlZmluZWQpXG4gKiB9fVxuICovXG5leHBvcnQgbGV0IExheW91dE1hcmdpbnNDaGFuZ2VEZWY7XG5cbi8qKlxuKiBSZWxhdGl2ZVBvc2l0aW9uc1xuKlxuKiBEZXNjcmliZXMgdGhlIHJlbGF0aXZlIHBvc2l0aW9uIG9mIGFuIGVsZW1lbnQgdG8gYW5vdGhlciAod2hldGhlciB0aGVcbiogZmlyc3QgaXMgaW5zaWRlIHRoZSBzZWNvbmQsIG9uIHRvcCBvZiB0aGUgc2Vjb25kIG9yIG9uIHRoZSBib3R0b21cbiogQGVudW0ge3N0cmluZ31cbiovXG5leHBvcnQgY29uc3QgUmVsYXRpdmVQb3NpdGlvbnMgPSB7XG4gIElOU0lERTogJ2luc2lkZScsXG4gIFRPUDogJ3RvcCcsXG4gIEJPVFRPTTogJ2JvdHRvbScsXG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBsYXlvdXQgcmVjdCBiYXNlZCBvbiB0aGUgbGVmdCwgdG9wLCB3aWR0aCBhbmQgaGVpZ2h0IHBhcmFtZXRlcnNcbiAqIGluIHRoYXQgb3JkZXIuXG4gKiBAcGFyYW0ge251bWJlcn0gbGVmdFxuICogQHBhcmFtIHtudW1iZXJ9IHRvcFxuICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoXG4gKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0XG4gKiBAcmV0dXJuIHshTGF5b3V0UmVjdERlZn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxheW91dFJlY3RMdHdoKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCkge1xuICByZXR1cm4ge1xuICAgIGxlZnQsXG4gICAgdG9wLFxuICAgIHdpZHRoLFxuICAgIGhlaWdodCxcbiAgICBib3R0b206IHRvcCArIGhlaWdodCxcbiAgICByaWdodDogbGVmdCArIHdpZHRoLFxuICAgIHg6IGxlZnQsXG4gICAgeTogdG9wLFxuICB9O1xufVxuXG5cbi8qKlxuICogQ3JlYXRlcyBhIGxheW91dCByZWN0IGJhc2VkIG9uIHRoZSBET01SZWN0LCBlLmcuIG9idGFpbmVkIGZyb20gY2FsbGluZ1xuICogZ2V0Qm91bmRpbmdDbGllbnRSZWN0LlxuICogQHBhcmFtIHshQ2xpZW50UmVjdH0gcmVjdFxuICogQHJldHVybiB7IUxheW91dFJlY3REZWZ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsYXlvdXRSZWN0RnJvbURvbVJlY3QocmVjdCkge1xuICByZXR1cm4gbGF5b3V0UmVjdEx0d2goTnVtYmVyKHJlY3QubGVmdCksIE51bWJlcihyZWN0LnRvcCksXG4gICAgICBOdW1iZXIocmVjdC53aWR0aCksIE51bWJlcihyZWN0LmhlaWdodCkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc3BlY2lmaWVkIHR3byByZWN0cyBvdmVybGFwIGJ5IGEgc2luZ2xlIHBpeGVsLlxuICogQHBhcmFtIHshTGF5b3V0UmVjdERlZn0gcjFcbiAqIEBwYXJhbSB7IUxheW91dFJlY3REZWZ9IHIyXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gbGF5b3V0UmVjdHNPdmVybGFwKHIxLCByMikge1xuICByZXR1cm4gKHIxLnRvcCA8PSByMi5ib3R0b20gJiYgcjIudG9wIDw9IHIxLmJvdHRvbSAmJlxuICAgICAgcjEubGVmdCA8PSByMi5yaWdodCAmJiByMi5sZWZ0IDw9IHIxLnJpZ2h0KTtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgdGhlIGludGVyc2VjdGlvbiBiZXR3ZWVuIGEsIGIgb3IgbnVsbCBpZiB0aGVyZSBpcyBub25lLlxuICogQHBhcmFtIHsuLi4/TGF5b3V0UmVjdERlZnx1bmRlZmluZWR9IHZhcl9hcmdzXG4gKiBAcmV0dXJuIHs/TGF5b3V0UmVjdERlZn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlY3RJbnRlcnNlY3Rpb24odmFyX2FyZ3MpIHtcbiAgbGV0IHgwID0gLUluZmluaXR5O1xuICBsZXQgeDEgPSBJbmZpbml0eTtcbiAgbGV0IHkwID0gLUluZmluaXR5O1xuICBsZXQgeTEgPSBJbmZpbml0eTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBjdXJyZW50ID0gYXJndW1lbnRzW2ldO1xuICAgIGlmICghY3VycmVudCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIHgwID0gTWF0aC5tYXgoeDAsIGN1cnJlbnQubGVmdCk7XG4gICAgeDEgPSBNYXRoLm1pbih4MSwgY3VycmVudC5sZWZ0ICsgY3VycmVudC53aWR0aCk7XG4gICAgeTAgPSBNYXRoLm1heCh5MCwgY3VycmVudC50b3ApO1xuICAgIHkxID0gTWF0aC5taW4oeTEsIGN1cnJlbnQudG9wICsgY3VycmVudC5oZWlnaHQpO1xuICAgIGlmICh4MSA8IHgwIHx8IHkxIDwgeTApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuICBpZiAoeDEgPT0gSW5maW5pdHkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gbGF5b3V0UmVjdEx0d2goeDAsIHkwLCB4MSAtIHgwLCB5MSAtIHkwKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBwb3NpdGlvbiBvZiByMiByZWxhdGl2ZSB0byByMVxuICogQHBhcmFtIHshTGF5b3V0UmVjdERlZn0gcjFcbiAqIEBwYXJhbSB7IUxheW91dFJlY3REZWZ9IHIyXG4gKiBAcmV0dXJuIHtSZWxhdGl2ZVBvc2l0aW9uc31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxheW91dFJlY3RzUmVsYXRpdmVQb3MocjEsIHIyKSB7XG4gIGlmIChyMS50b3AgPCByMi50b3ApIHtcbiAgICByZXR1cm4gUmVsYXRpdmVQb3NpdGlvbnMuVE9QO1xuICB9IGVsc2UgaWYgKHIxLmJvdHRvbSA+IHIyLmJvdHRvbSkge1xuICAgIHJldHVybiBSZWxhdGl2ZVBvc2l0aW9ucy5CT1RUT007XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFJlbGF0aXZlUG9zaXRpb25zLklOU0lERTtcbiAgfVxufVxuXG4vKipcbiAqIEV4cGFuZCB0aGUgbGF5b3V0IHJlY3QgdXNpbmcgbXVsdGlwbGVzIG9mIHdpZHRoIGFuZCBoZWlnaHQuXG4gKiBAcGFyYW0geyFMYXlvdXRSZWN0RGVmfSByZWN0IE9yaWdpbmFsIHJlY3QuXG4gKiBAcGFyYW0ge251bWJlcn0gZHcgRXhwYW5zaW9uIGluIHdpZHRoLCBzcGVjaWZpZWQgYXMgYSBtdWx0aXBsZSBvZiB3aWR0aC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkaCBFeHBhbnNpb24gaW4gaGVpZ2h0LCBzcGVjaWZpZWQgYXMgYSBtdWx0aXBsZSBvZiBoZWlnaHQuXG4gKiBAcmV0dXJuIHshTGF5b3V0UmVjdERlZn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4cGFuZExheW91dFJlY3QocmVjdCwgZHcsIGRoKSB7XG4gIHJldHVybiBsYXlvdXRSZWN0THR3aChyZWN0LmxlZnQgLSByZWN0LndpZHRoICogZHcsXG4gICAgICByZWN0LnRvcCAtIHJlY3QuaGVpZ2h0ICogZGgsXG4gICAgICByZWN0LndpZHRoICogKDEgKyBkdyAqIDIpLFxuICAgICAgcmVjdC5oZWlnaHQgKiAoMSArIGRoICogMikpO1xufVxuXG4vKipcbiAqIE1vdmVzIHRoZSBsYXlvdXQgcmVjdCB1c2luZyBkeCBhbmQgZHkuXG4gKiBAcGFyYW0geyFMYXlvdXRSZWN0RGVmfSByZWN0IE9yaWdpbmFsIHJlY3QuXG4gKiBAcGFyYW0ge251bWJlcn0gZHggTW92ZSBob3Jpem9udGFsbHkgd2l0aCB0aGlzIHZhbHVlLlxuICogQHBhcmFtIHtudW1iZXJ9IGR5IE1vdmUgdmVydGljYWxseSB3aXRoIHRoaXMgdmFsdWUuXG4gKiBAcmV0dXJuIHshTGF5b3V0UmVjdERlZn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1vdmVMYXlvdXRSZWN0KHJlY3QsIGR4LCBkeSkge1xuICBpZiAoKGR4ID09IDAgJiYgZHkgPT0gMCkgfHxcbiAgICAgIChyZWN0LndpZHRoID09IDAgJiYgcmVjdC5oZWlnaHQgPT0gMCkpIHtcbiAgICByZXR1cm4gcmVjdDtcbiAgfVxuICByZXR1cm4gbGF5b3V0UmVjdEx0d2gocmVjdC5sZWZ0ICsgZHgsIHJlY3QudG9wICsgZHksXG4gICAgICByZWN0LndpZHRoLCByZWN0LmhlaWdodCk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0geyFMYXlvdXRNYXJnaW5zRGVmfSBtYXJnaW5zXG4gKiBAcGFyYW0geyFMYXlvdXRNYXJnaW5zQ2hhbmdlRGVmfSBjaGFuZ2VcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcmVNYXJnaW5zQ2hhbmdlZChtYXJnaW5zLCBjaGFuZ2UpIHtcbiAgcmV0dXJuIChjaGFuZ2UudG9wICE9PSB1bmRlZmluZWQgJiYgY2hhbmdlLnRvcCAhPSBtYXJnaW5zLnRvcCkgfHxcbiAgICAgIChjaGFuZ2UucmlnaHQgIT09IHVuZGVmaW5lZCAmJiBjaGFuZ2UucmlnaHQgIT0gbWFyZ2lucy5yaWdodCkgfHxcbiAgICAgIChjaGFuZ2UuYm90dG9tICE9PSB1bmRlZmluZWQgJiYgY2hhbmdlLmJvdHRvbSAhPSBtYXJnaW5zLmJvdHRvbSkgfHxcbiAgICAgIChjaGFuZ2UubGVmdCAhPT0gdW5kZWZpbmVkICYmIGNoYW5nZS5sZWZ0ICE9IG1hcmdpbnMubGVmdCk7XG59XG5cbi8qKlxuICogQHBhcmFtIHshTGF5b3V0UmVjdERlZn0gZnJvbVxuICogQHBhcmFtIHshTGF5b3V0UmVjdERlZn0gdG9cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsYXlvdXRSZWN0U2l6ZUVxdWFscyhmcm9tLCB0bykge1xuICByZXR1cm4gZnJvbS53aWR0aCA9PSB0by53aWR0aCAmJlxuICAgICAgZnJvbS5oZWlnaHQgPT09IHRvLmhlaWdodDtcbn1cblxuLyoqXG4gKiBAcGFyYW0gez9MYXlvdXRSZWN0RGVmfSByMVxuICogQHBhcmFtIHs/TGF5b3V0UmVjdERlZn0gcjJcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsYXlvdXRSZWN0RXF1YWxzKHIxLCByMikge1xuICBpZiAoIXIxIHx8ICFyMikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gcjEubGVmdCA9PSByMi5sZWZ0ICYmIHIxLnRvcCA9PSByMi50b3AgJiZcbiAgICAgIHIxLndpZHRoID09IHIyLndpZHRoICYmIHIxLmhlaWdodCA9PSByMi5oZWlnaHQ7XG59XG5cbi8qKlxuICogQHBhcmFtIHtMYXlvdXRNYXJnaW5zQ2hhbmdlRGVmfHVuZGVmaW5lZH0gbWFyZ2luc0NoYW5nZVxuICogQHJldHVybiB7TGF5b3V0TWFyZ2luc0NoYW5nZURlZnx1bmRlZmluZWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZUxheW91dE1hcmdpbnNDaGFuZ2VEZWYobWFyZ2luc0NoYW5nZSkge1xuICBpZiAoIW1hcmdpbnNDaGFuZ2UpIHtcbiAgICByZXR1cm4gbWFyZ2luc0NoYW5nZTtcbiAgfVxuICByZXR1cm4ge1xuICAgIHRvcDogbWFyZ2luc0NoYW5nZS50b3AsXG4gICAgYm90dG9tOiBtYXJnaW5zQ2hhbmdlLmJvdHRvbSxcbiAgICBsZWZ0OiBtYXJnaW5zQ2hhbmdlLmxlZnQsXG4gICAgcmlnaHQ6IG1hcmdpbnNDaGFuZ2UucmlnaHQsXG4gIH07XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IEltcGxlbWVudHMgZWxlbWVudCBsYXlvdXQuIFNlZSBodHRwczovL2dvby5nbC85YXZYdVQgZm9yXG4gKiBkZXRhaWxzLlxuICovXG5cbmltcG9ydCB7ZGV2LCB1c2VyfSBmcm9tICcuL2xvZyc7XG5pbXBvcnQge2h0bWxGb3J9IGZyb20gJy4vc3RhdGljLXRlbXBsYXRlJztcbmltcG9ydCB7aXNGaW5pdGVOdW1iZXJ9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHtzZXRTdHlsZSwgc2V0U3R5bGVzfSBmcm9tICcuL3N0eWxlJztcbmltcG9ydCB7c3RhcnRzV2l0aH0gZnJvbSAnLi9zdHJpbmcnO1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBMYXlvdXQgPSB7XG4gIE5PRElTUExBWTogJ25vZGlzcGxheScsXG4gIEZJWEVEOiAnZml4ZWQnLFxuICBGSVhFRF9IRUlHSFQ6ICdmaXhlZC1oZWlnaHQnLFxuICBSRVNQT05TSVZFOiAncmVzcG9uc2l2ZScsXG4gIENPTlRBSU5FUjogJ2NvbnRhaW5lcicsXG4gIEZJTEw6ICdmaWxsJyxcbiAgRkxFWF9JVEVNOiAnZmxleC1pdGVtJyxcbiAgRkxVSUQ6ICdmbHVpZCcsXG4gIElOVFJJTlNJQzogJ2ludHJpbnNpYycsXG59O1xuXG5cbi8qKlxuICogTGF5b3V0IHByaW9yaXRpZXMgdG8gdXNlIHdpdGggQmFzZUVsZW1lbnQjZ2V0TGF5b3V0UHJpb3JpdHkoKSBhbmRcbiAqIEJhc2VFbGVtZW50I3VwZGF0ZUxheW91dFByaW9yaXR5KCkuXG4gKiBAZW51bSB7bnVtYmVyfVxuICovXG5leHBvcnQgY29uc3QgTGF5b3V0UHJpb3JpdHkgPSB7XG4gIENPTlRFTlQ6IDAsXG4gIE1FVEFEQVRBOiAxLFxuICBBRFM6IDIsXG4gIEJBQ0tHUk9VTkQ6IDMsXG59O1xuXG5cbi8qKlxuICogQ1NTIExlbmd0aCB0eXBlLiBFLmcuIFwiMXB4XCIgb3IgXCIyMHZoXCIuXG4gKiBAdHlwZWRlZiB7c3RyaW5nfVxuICovXG5leHBvcnQgbGV0IExlbmd0aERlZjtcblxuXG4vKipcbiAqIEB0eXBlZGVmIHt7XG4gKiAgIHdpZHRoOiBzdHJpbmcsXG4gKiAgIGhlaWdodDogc3RyaW5nXG4gKiB9fVxuICovXG5sZXQgRGltZW5zaW9uc0RlZjtcblxuXG4vKipcbiAqIFRoZSBzZXQgb2YgZWxlbWVudHMgd2l0aCBuYXR1cmFsIGRpbWVuc2lvbnMsIHRoYXQgaXMsIGVsZW1lbnRzXG4gKiB3aGljaCBoYXZlIGEga25vd24gZGltZW5zaW9uIGVpdGhlciBiYXNlZCBvbiB0aGVpciB2YWx1ZSBzcGVjaWZpZWQgaGVyZSxcbiAqIG9yLCBpZiB0aGUgdmFsdWUgaXMgbnVsbCwgYSBkaW1lbnNpb24gc3BlY2lmaWMgdG8gdGhlIGJyb3dzZXIuXG4gKiBgaGFzTmF0dXJhbERpbWVuc2lvbnNgIGNoZWNrcyBmb3IgbWVtYmVyc2hpcCBpbiB0aGlzIHNldC5cbiAqIGBnZXROYXR1cmFsRGltZW5zaW9uc2AgZGV0ZXJtaW5lcyB0aGUgZGltZW5zaW9ucyBmb3IgYW4gZWxlbWVudCBpbiB0aGVcbiAqICAgIHNldCBhbmQgY2FjaGVzIGl0LlxuICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCA/RGltZW5zaW9uc0RlZj59XG4gKiBAcHJpdmF0ZSAgVmlzaWJsZSBmb3IgdGVzdGluZyBvbmx5IVxuICovXG5leHBvcnQgY29uc3QgbmF0dXJhbERpbWVuc2lvbnNfID0ge1xuICAnQU1QLVBJWEVMJzoge3dpZHRoOiAnMHB4JywgaGVpZ2h0OiAnMHB4J30sXG4gICdBTVAtQU5BTFlUSUNTJzoge3dpZHRoOiAnMXB4JywgaGVpZ2h0OiAnMXB4J30sXG4gIC8vIFRPRE8oZHZveXRlbmtvKTogYXVkaW8gc2hvdWxkIGhhdmUgd2lkdGg6YXV0by5cbiAgJ0FNUC1BVURJTyc6IG51bGwsXG4gICdBTVAtU09DSUFMLVNIQVJFJzoge3dpZHRoOiAnNjBweCcsIGhlaWdodDogJzQ0cHgnfSxcbn07XG5cblxuLyoqXG4gKiBFbGVtZW50cyB0aGF0IHRoZSBwcm9nZXNzIGNhbiBiZSBzaG93biBmb3IuIFRoaXMgc2V0IGhhcyB0byBiZSBleHRlcm5hbGl6ZWRcbiAqIHNpbmNlIHRoZSBlbGVtZW50J3MgaW1wbGVtZW50YXRpb24gbWF5IG5vdCBiZSBkb3dubG9hZGVkIHlldC5cbiAqIEBlbnVtIHtib29sZWFufVxuICogQHByaXZhdGUgIFZpc2libGUgZm9yIHRlc3Rpbmcgb25seSFcbiAqL1xuZXhwb3J0IGNvbnN0IExPQURJTkdfRUxFTUVOVFNfID0ge1xuICAnQU1QLUFOSU0nOiB0cnVlLFxuICAnQU1QLUJSSUdIVENPVkUnOiB0cnVlLFxuICAnQU1QLUdPT0dMRS1ET0NVTUVOVC1FTUJFRCc6IHRydWUsXG4gICdBTVAtRU1CRUQnOiB0cnVlLFxuICAnQU1QLUZBQ0VCT09LJzogdHJ1ZSxcbiAgJ0FNUC1GQUNFQk9PSy1DT01NRU5UUyc6IHRydWUsXG4gICdBTVAtRkFDRUJPT0stTElLRSc6IHRydWUsXG4gICdBTVAtRkFDRUJPT0stUEFHRSc6IHRydWUsXG4gICdBTVAtSUZSQU1FJzogdHJ1ZSxcbiAgJ0FNUC1JTUcnOiB0cnVlLFxuICAnQU1QLUlOU1RBR1JBTSc6IHRydWUsXG4gICdBTVAtTElTVCc6IHRydWUsXG4gICdBTVAtT09ZQUxBLVBMQVlFUic6IHRydWUsXG4gICdBTVAtUElOVEVSRVNUJzogdHJ1ZSxcbiAgJ0FNUC1QTEFZQlVaWic6IHRydWUsXG4gICdBTVAtVklERU8nOiB0cnVlLFxuICAnQU1QLVlPVVRVQkUnOiB0cnVlLFxufTtcblxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBzXG4gKiBAcmV0dXJuIHtMYXlvdXR8dW5kZWZpbmVkfSBSZXR1cm5zIHVuZGVmaW5lZCBpbiBjYXNlIG9mIGZhaWx1cmUgdG8gcGFyc2VcbiAqICAgdGhlIGxheW91dCBzdHJpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUxheW91dChzKSB7XG4gIGZvciAoY29uc3QgayBpbiBMYXlvdXQpIHtcbiAgICBpZiAoTGF5b3V0W2tdID09IHMpIHtcbiAgICAgIHJldHVybiBMYXlvdXRba107XG4gICAgfVxuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0geyFMYXlvdXR9IGxheW91dFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGF5b3V0Q2xhc3MobGF5b3V0KSB7XG4gIHJldHVybiAnaS1hbXBodG1sLWxheW91dC0nICsgbGF5b3V0O1xufVxuXG5cbi8qKlxuICogV2hldGhlciBhbiBlbGVtZW50IHdpdGggdGhpcyBsYXlvdXQgaW5oZXJlbnRseSBkZWZpbmVzIHRoZSBzaXplLlxuICogQHBhcmFtIHshTGF5b3V0fSBsYXlvdXRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0xheW91dFNpemVEZWZpbmVkKGxheW91dCkge1xuICByZXR1cm4gKGxheW91dCA9PSBMYXlvdXQuRklYRUQgfHxcbiAgICAgIGxheW91dCA9PSBMYXlvdXQuRklYRURfSEVJR0hUIHx8XG4gICAgICBsYXlvdXQgPT0gTGF5b3V0LlJFU1BPTlNJVkUgfHxcbiAgICAgIGxheW91dCA9PSBMYXlvdXQuRklMTCB8fFxuICAgICAgbGF5b3V0ID09IExheW91dC5GTEVYX0lURU0gfHxcbiAgICAgIGxheW91dCA9PSBMYXlvdXQuRkxVSUQgfHxcbiAgICAgIGxheW91dCA9PSBMYXlvdXQuSU5UUklOU0lDKTtcbn1cblxuXG4vKipcbiAqIFdoZXRoZXIgdGhlIHRhZyBpcyBhbiBpbnRlcm5hbCAoc2VydmljZSkgQU1QIHRhZy5cbiAqIEBwYXJhbSB7IU5vZGV8c3RyaW5nfSB0YWdcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0ludGVybmFsRWxlbWVudCh0YWcpIHtcbiAgY29uc3QgdGFnTmFtZSA9ICh0eXBlb2YgdGFnID09ICdzdHJpbmcnKSA/IHRhZyA6IHRhZy50YWdOYW1lO1xuICByZXR1cm4gdGFnTmFtZSAmJiBzdGFydHNXaXRoKHRhZ05hbWUudG9Mb3dlckNhc2UoKSwgJ2ktJyk7XG59XG5cblxuLyoqXG4gKiBQYXJzZXMgdGhlIENTUyBsZW5ndGggdmFsdWUuIElmIG5vIHVuaXRzIHNwZWNpZmllZCwgdGhlIGFzc3VtZWQgdmFsdWUgaXNcbiAqIFwicHhcIi4gUmV0dXJucyB1bmRlZmluZWQgaW4gY2FzZSBvZiBwYXJzaW5nIGVycm9yLlxuICogQHBhcmFtIHtzdHJpbmd8dW5kZWZpbmVkfG51bGx9IHNcbiAqIEByZXR1cm4geyFMZW5ndGhEZWZ8dW5kZWZpbmVkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VMZW5ndGgocykge1xuICBpZiAodHlwZW9mIHMgPT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gcyArICdweCc7XG4gIH1cbiAgaWYgKCFzKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBpZiAoIS9eXFxkKyhcXC5cXGQrKT8ocHh8ZW18cmVtfHZofHZ3fHZtaW58dm1heHxjbXxtbXxxfGlufHBjfHB0KT8kLy50ZXN0KHMpKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBpZiAoL15cXGQrKFxcLlxcZCspPyQvLnRlc3QocykpIHtcbiAgICByZXR1cm4gcyArICdweCc7XG4gIH1cbiAgcmV0dXJuIHM7XG59XG5cblxuXG4vKipcbiAqIEFzc2VydHMgdGhhdCB0aGUgc3VwcGxpZWQgdmFsdWUgaXMgYSBub24tcGVyY2VudCBDU1MgTGVuZ3RoIHZhbHVlLlxuICogQHBhcmFtIHshTGVuZ3RoRGVmfHN0cmluZ3xudWxsfHVuZGVmaW5lZH0gbGVuZ3RoXG4gKiBAcmV0dXJuIHshTGVuZ3RoRGVmfVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0TGVuZ3RoKGxlbmd0aCkge1xuICB1c2VyKCkuYXNzZXJ0KFxuICAgICAgL15cXGQrKFxcLlxcZCspPyhweHxlbXxyZW18dmh8dnd8dm1pbnx2bWF4fGNtfG1tfHF8aW58cGN8cHQpJC8udGVzdChsZW5ndGgpLFxuICAgICAgJ0ludmFsaWQgbGVuZ3RoIHZhbHVlOiAlcycsIGxlbmd0aCk7XG4gIHJldHVybiAvKiogQHR5cGUgeyFMZW5ndGhEZWZ9ICovIChsZW5ndGgpO1xufVxuXG5cblxuXG4vKipcbiAqIEFzc2VydHMgdGhhdCB0aGUgc3VwcGxpZWQgdmFsdWUgaXMgYSBDU1MgTGVuZ3RoIHZhbHVlXG4gKiAoaW5jbHVkaW5nIHBlcmNlbnQgdW5pdCkuXG4gKiBAcGFyYW0geyFMZW5ndGhEZWZ8c3RyaW5nfSBsZW5ndGhcbiAqIEByZXR1cm4geyFMZW5ndGhEZWZ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRMZW5ndGhPclBlcmNlbnQobGVuZ3RoKSB7XG4gIHVzZXIoKS5hc3NlcnQoL15cXGQrKFxcLlxcZCspPyhweHxlbXxyZW18dmh8dnd8dm1pbnx2bWF4fCUpJC8udGVzdChsZW5ndGgpLFxuICAgICAgJ0ludmFsaWQgbGVuZ3RoIG9yIHBlcmNlbnQgdmFsdWU6ICVzJywgbGVuZ3RoKTtcbiAgcmV0dXJuIGxlbmd0aDtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgdW5pdHMgZnJvbSB0aGUgQ1NTIGxlbmd0aCB2YWx1ZS5cbiAqIEBwYXJhbSB7IUxlbmd0aERlZnxzdHJpbmd8bnVsbHx1bmRlZmluZWR9IGxlbmd0aFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGVuZ3RoVW5pdHMobGVuZ3RoKSB7XG4gIGFzc2VydExlbmd0aChsZW5ndGgpO1xuICBkZXYoKS5hc3NlcnRTdHJpbmcobGVuZ3RoKTtcbiAgY29uc3QgbSA9IHVzZXIoKS5hc3NlcnQobGVuZ3RoLm1hdGNoKC9bYS16XSsvaSksXG4gICAgICAnRmFpbGVkIHRvIHJlYWQgdW5pdHMgZnJvbSAlcycsIGxlbmd0aCk7XG4gIHJldHVybiBtWzBdO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgbnVtZXJpYyB2YWx1ZSBvZiBhIENTUyBsZW5ndGggdmFsdWUuXG4gKiBAcGFyYW0geyFMZW5ndGhEZWZ8c3RyaW5nfG51bGx8dW5kZWZpbmVkfSBsZW5ndGhcbiAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMZW5ndGhOdW1lcmFsKGxlbmd0aCkge1xuICBjb25zdCByZXMgPSBwYXJzZUZsb2F0KGxlbmd0aCk7XG4gIHJldHVybiBpc0Zpbml0ZU51bWJlcihyZXMpID8gcmVzIDogdW5kZWZpbmVkO1xufVxuXG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSB0YWdOYW1lIGlzIGEga25vd24gZWxlbWVudCB0aGF0IGhhcyBuYXR1cmFsIGRpbWVuc2lvbnNcbiAqIGluIG91ciBydW50aW1lIG9yIHRoZSBicm93c2VyLlxuICogQHBhcmFtIHtzdHJpbmd9IHRhZ05hbWUgVGhlIGVsZW1lbnQgdGFnIG5hbWUuXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzTmF0dXJhbERpbWVuc2lvbnModGFnTmFtZSkge1xuICB0YWdOYW1lID0gdGFnTmFtZS50b1VwcGVyQ2FzZSgpO1xuICByZXR1cm4gbmF0dXJhbERpbWVuc2lvbnNfW3RhZ05hbWVdICE9PSB1bmRlZmluZWQ7XG59XG5cblxuLyoqXG4gKiBEZXRlcm1pbmVzIHRoZSBkZWZhdWx0IGRpbWVuc2lvbnMgZm9yIGFuIGVsZW1lbnQgd2hpY2ggY291bGQgdmFyeSBhY3Jvc3NcbiAqIGRpZmZlcmVudCBicm93c2VyIGltcGxlbWVudGF0aW9ucywgbGlrZSA8YXVkaW8+IGZvciBpbnN0YW5jZS5cbiAqIFRoaXMgb3BlcmF0aW9uIGNhbiBvbmx5IGJlIGNvbXBsZXRlZCBmb3IgYW4gZWxlbWVudCB3aGl0ZWxpc3RlZCBieVxuICogYGhhc05hdHVyYWxEaW1lbnNpb25zYC5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEByZXR1cm4ge0RpbWVuc2lvbnNEZWZ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXROYXR1cmFsRGltZW5zaW9ucyhlbGVtZW50KSB7XG4gIGNvbnN0IHRhZ05hbWUgPSBlbGVtZW50LnRhZ05hbWUudG9VcHBlckNhc2UoKTtcbiAgZGV2KCkuYXNzZXJ0KG5hdHVyYWxEaW1lbnNpb25zX1t0YWdOYW1lXSAhPT0gdW5kZWZpbmVkKTtcbiAgaWYgKCFuYXR1cmFsRGltZW5zaW9uc19bdGFnTmFtZV0pIHtcbiAgICBjb25zdCBkb2MgPSBlbGVtZW50Lm93bmVyRG9jdW1lbnQ7XG4gICAgY29uc3QgbmF0dXJhbFRhZ05hbWUgPSB0YWdOYW1lLnJlcGxhY2UoL15BTVBcXC0vLCAnJyk7XG4gICAgY29uc3QgdGVtcCA9IGRvYy5jcmVhdGVFbGVtZW50KG5hdHVyYWxUYWdOYW1lKTtcbiAgICAvLyBGb3IgYXVkaW8sIHNob3VsZCBuby1vcCBlbHNld2hlcmUuXG4gICAgdGVtcC5jb250cm9scyA9IHRydWU7XG4gICAgc2V0U3R5bGVzKHRlbXAsIHtcbiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgdmlzaWJpbGl0eTogJ2hpZGRlbicsXG4gICAgfSk7XG4gICAgZG9jLmJvZHkuYXBwZW5kQ2hpbGQodGVtcCk7XG4gICAgbmF0dXJhbERpbWVuc2lvbnNfW3RhZ05hbWVdID0ge1xuICAgICAgd2lkdGg6ICh0ZW1wLi8qT0sqL29mZnNldFdpZHRoIHx8IDEpICsgJ3B4JyxcbiAgICAgIGhlaWdodDogKHRlbXAuLypPSyovb2Zmc2V0SGVpZ2h0IHx8IDEpICsgJ3B4JyxcbiAgICB9O1xuICAgIGRvYy5ib2R5LnJlbW92ZUNoaWxkKHRlbXApO1xuICB9XG4gIHJldHVybiAvKiogQHR5cGUge0RpbWVuc2lvbnNEZWZ9ICovIChuYXR1cmFsRGltZW5zaW9uc19bdGFnTmFtZV0pO1xufVxuXG5cbi8qKlxuICogV2hldGhlciB0aGUgbG9hZGluZyBjYW4gYmUgc2hvd24gZm9yIHRoZSBzcGVjaWZpZWQgZWxlbWVlbnQuIFRoaXMgc2V0IGhhc1xuICogdG8gYmUgZXh0ZXJuYWxpemVkIHNpbmNlIHRoZSBlbGVtZW50J3MgaW1wbGVtZW50YXRpb24gbWF5IG5vdCBiZVxuICogZG93bmxvYWRlZCB5ZXQuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNMb2FkaW5nQWxsb3dlZChlbGVtZW50KSB7XG4gIGNvbnN0IHRhZ05hbWUgPSBlbGVtZW50LnRhZ05hbWUudG9VcHBlckNhc2UoKTtcbiAgaWYgKHRhZ05hbWUgPT0gJ0FNUC1BRCcgfHwgdGFnTmFtZSA9PSAnQU1QLUVNQkVEJykge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBMT0FESU5HX0VMRU1FTlRTX1t0YWdOYW1lXSB8fCBmYWxzZTtcbn1cblxuXG4vKipcbiAqIEFwcGxpZXMgbGF5b3V0IHRvIHRoZSBlbGVtZW50LiBWaXNpYmxlIGZvciB0ZXN0aW5nIG9ubHkuXG4gKlxuICogXFwgICBcXCAgLyAgXFwgIC8gICAvIC8gICBcXCAgICAgfCAgIF8gIFxcICAgICB8ICBcXCB8ICB8IHwgIHwgfCAgXFwgfCAgfCAgLyBfX19fX3xcbiAqICBcXCAgIFxcLyAgICBcXC8gICAvIC8gIF4gIFxcICAgIHwgIHxfKSAgfCAgICB8ICAgXFx8ICB8IHwgIHwgfCAgIFxcfCAgfCB8ICB8ICBfX1xuICogICBcXCAgICAgICAgICAgIC8gLyAgL19cXCAgXFwgICB8ICAgICAgLyAgICAgfCAgLiBgICB8IHwgIHwgfCAgLiBgICB8IHwgIHwgfF8gfFxuICogICAgXFwgICAgL1xcICAgIC8gLyAgX19fX18gIFxcICB8ICB8XFwgIFxcLS0tLS58ICB8XFwgICB8IHwgIHwgfCAgfFxcICAgfCB8ICB8X198IHxcbiAqICAgICBcXF9fLyAgXFxfXy8gL19fLyAgICAgXFxfX1xcIHwgX3wgYC5fX19fX3x8X198IFxcX198IHxfX3wgfF9ffCBcXF9ffCAgXFxfX19fX198XG4gKlxuICogVGhlIGVxdWl2YWxlbnQgb2YgdGhpcyBtZXRob2QgaXMgdXNlZCBmb3Igc2VydmVyLXNpZGUgcmVuZGVyaW5nIChTU1IpIGFuZFxuICogYW55IGNoYW5nZXMgbWFkZSB0byBpdCBtdXN0IGJlIG1hZGUgaW4gY29vcmRpbmF0aW9uIHdpdGggY2FjaGVzIHRoYXRcbiAqIGltcGxlbWVudCBTU1IuIEZvciBtb3JlIGluZm9ybWF0aW9uIG9uIFNTUiBzZWUgYml0Lmx5L2FtcC1zc3IuXG4gKlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHJldHVybiB7IUxheW91dH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5U3RhdGljTGF5b3V0KGVsZW1lbnQpIHtcbiAgLy8gQ2hlY2sgaWYgdGhlIGxheW91dCBoYXMgYWxyZWFkeSBiZWVuIGRvbmUgYnkgc2VydmVyLXNpZGUgcmVuZGVyaW5nLiBUaGVcbiAgLy8gZG9jdW1lbnQgbWF5IGJlIHZpc2libGUgdG8gdGhlIHVzZXIgaWYgdGhlIGJvaWxlcnBsYXRlIHdhcyByZW1vdmVkIHNvXG4gIC8vIHBsZWFzZSB0YWtlIGNhcmUgaW4gbWFraW5nIGNoYW5nZXMgaGVyZS5cbiAgY29uc3QgY29tcGxldGVkTGF5b3V0QXR0ciA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpLWFtcGh0bWwtbGF5b3V0Jyk7XG4gIGlmIChjb21wbGV0ZWRMYXlvdXRBdHRyKSB7XG4gICAgY29uc3QgbGF5b3V0ID0gLyoqIEB0eXBlIHshTGF5b3V0fSAqLyAoZGV2KCkuYXNzZXJ0KFxuICAgICAgICBwYXJzZUxheW91dChjb21wbGV0ZWRMYXlvdXRBdHRyKSkpO1xuICAgIGlmICgobGF5b3V0ID09IExheW91dC5SRVNQT05TSVZFIHx8IGxheW91dCA9PSBMYXlvdXQuSU5UUklOU0lDKVxuICAgICAgJiYgZWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZCkge1xuICAgICAgLy8gRmluZCBzaXplciwgYnV0IGFzc3VtZSB0aGF0IGl0IG1pZ2h0IG5vdCBoYXZlIGJlZW4gcGFyc2VkIHlldC5cbiAgICAgIGVsZW1lbnQuc2l6ZXJFbGVtZW50ID1cbiAgICAgICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2ktYW1waHRtbC1zaXplcicpIHx8IHVuZGVmaW5lZDtcbiAgICB9IGVsc2UgaWYgKGxheW91dCA9PSBMYXlvdXQuTk9ESVNQTEFZKSB7XG4gICAgICBhcHBseU5vRGlzcGxheUxheW91dChlbGVtZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIGxheW91dDtcbiAgfVxuXG4gIC8vIElmIHRoZSBsYXlvdXQgd2FzIGFscmVhZHkgZG9uZSBieSBzZXJ2ZXItc2lkZSByZW5kZXJpbmcgKFNTUiksIHRoZW4gdGhlXG4gIC8vIGNvZGUgYmVsb3cgd2lsbCBub3QgcnVuLiBBbnkgY2hhbmdlcyBiZWxvdyB3aWxsIG5lY2Vzc2l0YXRlIGEgY2hhbmdlIHRvIFNTUlxuICAvLyBhbmQgbXVzdCBiZSBjb29yZGluYXRlZCB3aXRoIGNhY2hlcyB0aGF0IGltcGxlbWVudCBTU1IuIFNlZSBiaXQubHkvYW1wLXNzci5cblxuICAvLyBQYXJzZSBsYXlvdXQgZnJvbSB0aGUgZWxlbWVudC5cbiAgY29uc3QgbGF5b3V0QXR0ciA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdsYXlvdXQnKTtcbiAgY29uc3Qgd2lkdGhBdHRyID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3dpZHRoJyk7XG4gIGNvbnN0IGhlaWdodEF0dHIgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnaGVpZ2h0Jyk7XG4gIGNvbnN0IHNpemVzQXR0ciA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdzaXplcycpO1xuICBjb25zdCBoZWlnaHRzQXR0ciA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdoZWlnaHRzJyk7XG5cbiAgLy8gSW5wdXQgbGF5b3V0IGF0dHJpYnV0ZXMuXG4gIGNvbnN0IGlucHV0TGF5b3V0ID0gbGF5b3V0QXR0ciA/IHBhcnNlTGF5b3V0KGxheW91dEF0dHIpIDogbnVsbDtcbiAgdXNlcigpLmFzc2VydChpbnB1dExheW91dCAhPT0gdW5kZWZpbmVkLCAnVW5rbm93biBsYXlvdXQ6ICVzJywgbGF5b3V0QXR0cik7XG4gIC8qKiBAY29uc3Qge3N0cmluZ3xudWxsfHVuZGVmaW5lZH0gKi9cbiAgY29uc3QgaW5wdXRXaWR0aCA9ICh3aWR0aEF0dHIgJiYgd2lkdGhBdHRyICE9ICdhdXRvJykgP1xuICAgIHBhcnNlTGVuZ3RoKHdpZHRoQXR0cikgOiB3aWR0aEF0dHI7XG4gIHVzZXIoKS5hc3NlcnQoaW5wdXRXaWR0aCAhPT0gdW5kZWZpbmVkLCAnSW52YWxpZCB3aWR0aCB2YWx1ZTogJXMnLCB3aWR0aEF0dHIpO1xuICAvKiogQGNvbnN0IHtzdHJpbmd8bnVsbHx1bmRlZmluZWR9ICovXG4gIGNvbnN0IGlucHV0SGVpZ2h0ID0gKGhlaWdodEF0dHIgJiYgaGVpZ2h0QXR0ciAhPSAnZmx1aWQnKSA/XG4gICAgcGFyc2VMZW5ndGgoaGVpZ2h0QXR0cikgOiBoZWlnaHRBdHRyO1xuICB1c2VyKCkuYXNzZXJ0KGlucHV0SGVpZ2h0ICE9PSB1bmRlZmluZWQsICdJbnZhbGlkIGhlaWdodCB2YWx1ZTogJXMnLFxuICAgICAgaGVpZ2h0QXR0cik7XG5cbiAgLy8gRWZmZWN0aXZlIGxheW91dCBhdHRyaWJ1dGVzLiBUaGVzZSBhcmUgZWZmZWN0aXZlbHkgY29uc3RhbnRzLlxuICBsZXQgd2lkdGg7XG4gIGxldCBoZWlnaHQ7XG4gIGxldCBsYXlvdXQ7XG5cbiAgLy8gQ2FsY3VsYXRlIGVmZmVjdGl2ZSB3aWR0aCBhbmQgaGVpZ2h0LlxuICBpZiAoKCFpbnB1dExheW91dCB8fCBpbnB1dExheW91dCA9PSBMYXlvdXQuRklYRUQgfHxcbiAgICAgIGlucHV0TGF5b3V0ID09IExheW91dC5GSVhFRF9IRUlHSFQpICYmXG4gICAgICAoIWlucHV0V2lkdGggfHwgIWlucHV0SGVpZ2h0KSAmJiBoYXNOYXR1cmFsRGltZW5zaW9ucyhlbGVtZW50LnRhZ05hbWUpKSB7XG4gICAgLy8gRGVmYXVsdCB3aWR0aCBhbmQgaGVpZ2h0OiBoYW5kbGUgZWxlbWVudHMgdGhhdCBkbyBub3Qgc3BlY2lmeSBhXG4gICAgLy8gd2lkdGgvaGVpZ2h0IGFuZCBhcmUgZGVmaW5lZCB0byBoYXZlIG5hdHVyYWwgYnJvd3NlciBkaW1lbnNpb25zLlxuICAgIGNvbnN0IGRpbWVuc2lvbnMgPSBnZXROYXR1cmFsRGltZW5zaW9ucyhlbGVtZW50KTtcbiAgICB3aWR0aCA9IChpbnB1dFdpZHRoIHx8IGlucHV0TGF5b3V0ID09IExheW91dC5GSVhFRF9IRUlHSFQpID8gaW5wdXRXaWR0aCA6XG4gICAgICBkaW1lbnNpb25zLndpZHRoO1xuICAgIGhlaWdodCA9IGlucHV0SGVpZ2h0IHx8IGRpbWVuc2lvbnMuaGVpZ2h0O1xuICB9IGVsc2Uge1xuICAgIHdpZHRoID0gaW5wdXRXaWR0aDtcbiAgICBoZWlnaHQgPSBpbnB1dEhlaWdodDtcbiAgfVxuXG4gIC8vIENhbGN1bGF0ZSBlZmZlY3RpdmUgbGF5b3V0LlxuICBpZiAoaW5wdXRMYXlvdXQpIHtcbiAgICBsYXlvdXQgPSBpbnB1dExheW91dDtcbiAgfSBlbHNlIGlmICghd2lkdGggJiYgIWhlaWdodCkge1xuICAgIGxheW91dCA9IExheW91dC5DT05UQUlORVI7XG4gIH0gZWxzZSBpZiAoaGVpZ2h0ID09ICdmbHVpZCcpIHtcbiAgICBsYXlvdXQgPSBMYXlvdXQuRkxVSUQ7XG4gIH0gZWxzZSBpZiAoaGVpZ2h0ICYmICghd2lkdGggfHwgd2lkdGggPT0gJ2F1dG8nKSkge1xuICAgIGxheW91dCA9IExheW91dC5GSVhFRF9IRUlHSFQ7XG4gIH0gZWxzZSBpZiAoaGVpZ2h0ICYmIHdpZHRoICYmIChzaXplc0F0dHIgfHwgaGVpZ2h0c0F0dHIpKSB7XG4gICAgbGF5b3V0ID0gTGF5b3V0LlJFU1BPTlNJVkU7XG4gIH0gZWxzZSB7XG4gICAgbGF5b3V0ID0gTGF5b3V0LkZJWEVEO1xuICB9XG5cbiAgLy8gVmVyaWZ5IGxheW91dCBhdHRyaWJ1dGVzLlxuICBpZiAobGF5b3V0ID09IExheW91dC5GSVhFRCB8fCBsYXlvdXQgPT0gTGF5b3V0LkZJWEVEX0hFSUdIVCB8fFxuICAgICAgbGF5b3V0ID09IExheW91dC5SRVNQT05TSVZFIHx8IGxheW91dCA9PSBMYXlvdXQuSU5UUklOU0lDKSB7XG4gICAgdXNlcigpLmFzc2VydChoZWlnaHQsICdFeHBlY3RlZCBoZWlnaHQgdG8gYmUgYXZhaWxhYmxlOiAlcycsIGhlaWdodEF0dHIpO1xuICB9XG4gIGlmIChsYXlvdXQgPT0gTGF5b3V0LkZJWEVEX0hFSUdIVCkge1xuICAgIHVzZXIoKS5hc3NlcnQoIXdpZHRoIHx8IHdpZHRoID09ICdhdXRvJyxcbiAgICAgICAgJ0V4cGVjdGVkIHdpZHRoIHRvIGJlIGVpdGhlciBhYnNlbnQgb3IgZXF1YWwgXCJhdXRvXCIgJyArXG4gICAgICAgICdmb3IgZml4ZWQtaGVpZ2h0IGxheW91dDogJXMnLCB3aWR0aEF0dHIpO1xuICB9XG4gIGlmIChsYXlvdXQgPT0gTGF5b3V0LkZJWEVEIHx8IGxheW91dCA9PSBMYXlvdXQuUkVTUE9OU0lWRSB8fFxuICAgICAgbGF5b3V0ID09IExheW91dC5JTlRSSU5TSUMpIHtcbiAgICB1c2VyKCkuYXNzZXJ0KHdpZHRoICYmIHdpZHRoICE9ICdhdXRvJyxcbiAgICAgICAgJ0V4cGVjdGVkIHdpZHRoIHRvIGJlIGF2YWlsYWJsZSBhbmQgbm90IGVxdWFsIHRvIFwiYXV0b1wiOiAlcycsXG4gICAgICAgIHdpZHRoQXR0cik7XG4gIH1cblxuICBpZiAobGF5b3V0ID09IExheW91dC5SRVNQT05TSVZFIHx8IGxheW91dCA9PSBMYXlvdXQuSU5UUklOU0lDKSB7XG4gICAgdXNlcigpLmFzc2VydChnZXRMZW5ndGhVbml0cyh3aWR0aCkgPT0gZ2V0TGVuZ3RoVW5pdHMoaGVpZ2h0KSxcbiAgICAgICAgJ0xlbmd0aCB1bml0cyBzaG91bGQgYmUgdGhlIHNhbWUgZm9yIHdpZHRoIGFuZCBoZWlnaHQ6ICVzLCAlcycsXG4gICAgICAgIHdpZHRoQXR0ciwgaGVpZ2h0QXR0cik7XG4gIH0gZWxzZSB7XG4gICAgdXNlcigpLmFzc2VydChoZWlnaHRzQXR0ciA9PT0gbnVsbCxcbiAgICAgICAgJ1VuZXhwZWN0ZWQgXCJoZWlnaHRzXCIgYXR0cmlidXRlIGZvciBub25lLXJlc3BvbnNpdmUgbGF5b3V0Jyk7XG4gIH1cblxuICAvLyBBcHBseSBVSS5cbiAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGdldExheW91dENsYXNzKGxheW91dCkpO1xuICBpZiAoaXNMYXlvdXRTaXplRGVmaW5lZChsYXlvdXQpKSB7XG4gICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdpLWFtcGh0bWwtbGF5b3V0LXNpemUtZGVmaW5lZCcpO1xuICB9XG4gIGlmIChsYXlvdXQgPT0gTGF5b3V0Lk5PRElTUExBWSkge1xuICAgIC8vIENTUyBkZWZpbmVzIGxheW91dD1ub2Rpc3BsYXkgYXV0b21hdGljYWxseSB3aXRoIGBkaXNwbGF5Om5vbmVgLiBUaHVzXG4gICAgLy8gbm8gYWRkaXRpb25hbCBzdHlsaW5nIGlzIG5lZWRlZC5cbiAgICBhcHBseU5vRGlzcGxheUxheW91dChlbGVtZW50KTtcbiAgfSBlbHNlIGlmIChsYXlvdXQgPT0gTGF5b3V0LkZJWEVEKSB7XG4gICAgc2V0U3R5bGVzKGVsZW1lbnQsIHtcbiAgICAgIHdpZHRoOiBkZXYoKS5hc3NlcnRTdHJpbmcod2lkdGgpLFxuICAgICAgaGVpZ2h0OiBkZXYoKS5hc3NlcnRTdHJpbmcoaGVpZ2h0KSxcbiAgICB9KTtcbiAgfSBlbHNlIGlmIChsYXlvdXQgPT0gTGF5b3V0LkZJWEVEX0hFSUdIVCkge1xuICAgIHNldFN0eWxlKGVsZW1lbnQsICdoZWlnaHQnLCBkZXYoKS5hc3NlcnRTdHJpbmcoaGVpZ2h0KSk7XG4gIH0gZWxzZSBpZiAobGF5b3V0ID09IExheW91dC5SRVNQT05TSVZFKSB7XG4gICAgY29uc3Qgc2l6ZXIgPSBlbGVtZW50Lm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaS1hbXBodG1sLXNpemVyJyk7XG4gICAgc2V0U3R5bGVzKHNpemVyLCB7XG4gICAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgICAgcGFkZGluZ1RvcDpcbiAgICAgICAgKChnZXRMZW5ndGhOdW1lcmFsKGhlaWdodCkgLyBnZXRMZW5ndGhOdW1lcmFsKHdpZHRoKSkgKiAxMDApICsgJyUnLFxuICAgIH0pO1xuICAgIGVsZW1lbnQuaW5zZXJ0QmVmb3JlKHNpemVyLCBlbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgIGVsZW1lbnQuc2l6ZXJFbGVtZW50ID0gc2l6ZXI7XG4gIH0gZWxzZSBpZiAobGF5b3V0ID09IExheW91dC5JTlRSSU5TSUMpIHtcbiAgICAvLyBJbnRyaW5zaWMgdXNlcyBhbiBzdmcgaW5zaWRlIHRoZSBzaXplciBlbGVtZW50IHJhdGhlciB0aGFuIHRoZSBwYWRkaW5nXG4gICAgLy8gdHJpY2sgTm90ZSBhIG5ha2VkIHN2ZyB3b24ndCB3b3JrIGJlY2FzdWUgb3RoZXIgdGhpbmcgZXhwZWN0IHRoZVxuICAgIC8vIGktYW1waHRtbC1zaXplciBlbGVtZW50XG4gICAgY29uc3Qgc2l6ZXIgPSBodG1sRm9yKGVsZW1lbnQpYFxuICAgICAgPGktYW1waHRtbC1zaXplciBjbGFzcz1cImktYW1waHRtbC1zaXplclwiPlxuICAgICAgICA8aW1nIGNsYXNzPVwiaS1hbXBodG1sLWludHJpbnNpYy1zaXplclwiIC8+XG4gICAgICA8L2ktYW1waHRtbC1zaXplcj5gO1xuICAgIGNvbnN0IGludHJpbnNpY1NpemVyID0gc2l6ZXIuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgaW50cmluc2ljU2l6ZXIuc2V0QXR0cmlidXRlKCdzcmMnLFxuICAgICAgICBgZGF0YTppbWFnZS9zdmcreG1sO2NoYXJzZXQ9dXRmLTgsPHN2ZyBoZWlnaHQ9XCIke2hlaWdodH1cIiB3aWR0aD1cIiR7d2lkdGh9XCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZlcnNpb249XCIxLjFcIi8+YCk7XG4gICAgZWxlbWVudC5pbnNlcnRCZWZvcmUoc2l6ZXIsIGVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgLy8gVE9ETyhqcGV0dGl0dCk6IHNpemVyIGlzIGxlYWtlZCBhbmQgY2FuJ3QgYmUgY2xlYW5lZCB1cC5cbiAgICBlbGVtZW50LnNpemVyRWxlbWVudCA9IGludHJpbnNpY1NpemVyO1xuICB9IGVsc2UgaWYgKGxheW91dCA9PSBMYXlvdXQuRklMTCkge1xuICAgIC8vIERvIG5vdGhpbmcuXG4gIH0gZWxzZSBpZiAobGF5b3V0ID09IExheW91dC5DT05UQUlORVIpIHtcbiAgICAvLyBEbyBub3RoaW5nLiBFbGVtZW50cyB0aGVtc2VsdmVzIHdpbGwgY2hlY2sgd2hldGhlciB0aGUgc3VwcGxpZWRcbiAgICAvLyBsYXlvdXQgdmFsdWUgaXMgYWNjZXB0YWJsZS4gSW4gcGFydGljdWxhciBjb250YWluZXIgaXMgb25seSBPS1xuICAgIC8vIHNvbWV0aW1lcy5cbiAgfSBlbHNlIGlmIChsYXlvdXQgPT0gTGF5b3V0LkZMRVhfSVRFTSkge1xuICAgIC8vIFNldCBoZWlnaHQgYW5kIHdpZHRoIHRvIGEgZmxleCBpdGVtIGlmIHRoZXkgZXhpc3QuXG4gICAgLy8gVGhlIHNpemUgc2V0IHRvIGEgZmxleCBpdGVtIGNvdWxkIGJlIG92ZXJyaWRkZW4gYnkgYGRpc3BsYXk6IGZsZXhgIGxhdGVyLlxuICAgIGlmICh3aWR0aCkge1xuICAgICAgc2V0U3R5bGUoZWxlbWVudCwgJ3dpZHRoJywgd2lkdGgpO1xuICAgIH1cbiAgICBpZiAoaGVpZ2h0KSB7XG4gICAgICBzZXRTdHlsZShlbGVtZW50LCAnaGVpZ2h0JywgaGVpZ2h0KTtcbiAgICB9XG4gIH0gZWxzZSBpZiAobGF5b3V0ID09IExheW91dC5GTFVJRCkge1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaS1hbXBodG1sLWxheW91dC1hd2FpdGluZy1zaXplJyk7XG4gICAgaWYgKHdpZHRoKSB7XG4gICAgICBzZXRTdHlsZShlbGVtZW50LCAnd2lkdGgnLCB3aWR0aCk7XG4gICAgfVxuICAgIHNldFN0eWxlKGVsZW1lbnQsICdoZWlnaHQnLCAwKTtcbiAgfVxuICByZXR1cm4gbGF5b3V0O1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICovXG5mdW5jdGlvbiBhcHBseU5vRGlzcGxheUxheW91dChlbGVtZW50KSB7XG4gIC8vIFRPRE8oZHZveXRlbmtvLCAjOTM1Myk6IG9uY2UgYHRvZ2dsZUxheW91dERpc3BsYXlgIEFQSSBoYXMgYmVlbiBkZXBsb3llZFxuICAvLyBldmVyeXdoZXJlLCBzd2l0Y2ggYWxsIHJlbGV2YW50IGVsZW1lbnRzIHRvIHRoaXMgQVBJLiBJbiB0aGUgbWVhbnRpbWUsXG4gIC8vIHNpbXBseSB1bmJsb2NrIGRpc3BsYXkgdG9nZ2xpbmcgdmlhIGBzdHlsZT1cImRpc3BsYXk6IC4uLlwiYC5cbiAgc2V0U3R5bGUoZWxlbWVudCwgJ2Rpc3BsYXknLCAnbm9uZScpO1xuICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2ktYW1waHRtbC1kaXNwbGF5Jyk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtnZXRNb2RlfSBmcm9tICcuL21vZGUnO1xuaW1wb3J0IHtnZXRNb2RlT2JqZWN0fSBmcm9tICcuL21vZGUtb2JqZWN0JztcbmltcG9ydCB7aXNFbnVtVmFsdWV9IGZyb20gJy4vdHlwZXMnO1xuXG4vKipcbiAqIFRyaXBsZSB6ZXJvIHdpZHRoIHNwYWNlLlxuICpcbiAqIFRoaXMgaXMgYWRkZWQgdG8gdXNlciBlcnJvciBtZXNzYWdlcywgc28gdGhhdCB3ZSBjYW4gbGF0ZXIgaWRlbnRpZnlcbiAqIHRoZW0sIHdoZW4gdGhlIG9ubHkgdGhpbmcgdGhhdCB3ZSBoYXZlIGlzIHRoZSBtZXNzYWdlLiBUaGlzIGlzIHRoZVxuICogY2FzZSBpbiBtYW55IGJyb3dzZXJzIHdoZW4gdGhlIGdsb2JhbCBleGNlcHRpb24gaGFuZGxlciBpcyBpbnZva2VkLlxuICpcbiAqIEBjb25zdCB7c3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgVVNFUl9FUlJPUl9TRU5USU5FTCA9ICdcXHUyMDBCXFx1MjAwQlxcdTIwMEInO1xuXG5cbi8qKlxuICogRm91ciB6ZXJvIHdpZHRoIHNwYWNlLlxuICpcbiAqIEBjb25zdCB7c3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgVVNFUl9FUlJPUl9FTUJFRF9TRU5USU5FTCA9ICdcXHUyMDBCXFx1MjAwQlxcdTIwMEJcXHUyMDBCJztcblxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoaXMgbWVzc2FnZSB3YXMgYSB1c2VyIGVycm9yLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNVc2VyRXJyb3JNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgcmV0dXJuIG1lc3NhZ2UuaW5kZXhPZihVU0VSX0VSUk9SX1NFTlRJTkVMKSA+PSAwO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoaXMgbWVzc2FnZSB3YXMgYSBhIHVzZXIgZXJyb3IgZnJvbSBhbiBpZnJhbWUgZW1iZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1VzZXJFcnJvckVtYmVkKG1lc3NhZ2UpIHtcbiAgcmV0dXJuIG1lc3NhZ2UuaW5kZXhPZihVU0VSX0VSUk9SX0VNQkVEX1NFTlRJTkVMKSA+PSAwO1xufVxuXG5cbi8qKlxuICogQGVudW0ge251bWJlcn1cbiAqIEBwcml2YXRlIFZpc2libGUgZm9yIHRlc3Rpbmcgb25seS5cbiAqL1xuZXhwb3J0IGNvbnN0IExvZ0xldmVsID0ge1xuICBPRkY6IDAsXG4gIEVSUk9SOiAxLFxuICBXQVJOOiAyLFxuICBJTkZPOiAzLFxuICBGSU5FOiA0LFxufTtcblxuLyoqXG4gKiBTZXRzIHJlcG9ydEVycm9yIGZ1bmN0aW9uLiBDYWxsZWQgZnJvbSBlcnJvci5qcyB0byBicmVhayBjeWNsaWNcbiAqIGRlcGVuZGVuY3kuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCosICFFbGVtZW50PSl8dW5kZWZpbmVkfSBmblxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0UmVwb3J0RXJyb3IoZm4pIHtcbiAgc2VsZi5yZXBvcnRFcnJvciA9IGZuO1xufVxuXG4vKipcbiAqIEB0eXBlIHshTG9nTGV2ZWx8dW5kZWZpbmVkfVxuICogQHByaXZhdGVcbiAqL1xubGV0IGxldmVsT3ZlcnJpZGVfID0gdW5kZWZpbmVkO1xuXG4vKipcbiAqIEBwYXJhbSB7IUxvZ0xldmVsfSBsZXZlbFxuICovXG5leHBvcnQgZnVuY3Rpb24gb3ZlcnJpZGVMb2dMZXZlbChsZXZlbCkge1xuICBsZXZlbE92ZXJyaWRlXyA9IGxldmVsO1xufVxuXG4vKipcbiAqIExvZ2dpbmcgY2xhc3MuIFVzZSBvZiBzZW50aW5lbCBzdHJpbmcgaW5zdGVhZCBvZiBhIGJvb2xlYW4gdG8gY2hlY2sgdXNlci9kZXZcbiAqIGVycm9ycyBiZWNhdXNlIGVycm9ycyBjb3VsZCBiZSByZXRocm93biBieSBzb21lIG5hdGl2ZSBjb2RlIGFzIGEgbmV3IGVycm9yLFxuICogYW5kIG9ubHkgYSBtZXNzYWdlIHdvdWxkIHN1cnZpdmUuIEFsc28sIHNvbWUgYnJvd3NlciBkb27igJl0IHN1cHBvcnQgYSA1dGhcbiAqIGVycm9yIG9iamVjdCBhcmd1bWVudCBpbiB3aW5kb3cub25lcnJvci4gTGlzdCBvZiBzdXBwb3J0aW5nIGJyb3dzZXIgY2FuIGJlXG4gKiBmb3VuZCBoZXJlOlxuICogaHR0cHM6Ly9ibG9nLnNlbnRyeS5pby8yMDE2LzAxLzA0L2NsaWVudC1qYXZhc2NyaXB0LXJlcG9ydGluZy13aW5kb3ctb25lcnJvci5odG1sXG4gKiBAZmluYWxcbiAqIEBwcml2YXRlIFZpc2libGUgZm9yIHRlc3Rpbmcgb25seS5cbiAqL1xuZXhwb3J0IGNsYXNzIExvZyB7XG4gIC8qKlxuICAgKiBvcHRfc3VmZml4IHdpbGwgYmUgYXBwZW5kZWQgdG8gZXJyb3IgbWVzc2FnZSB0byBpZGVudGlmeSB0aGUgdHlwZSBvZiB0aGVcbiAgICogZXJyb3IgbWVzc2FnZS4gV2UgY2FuJ3QgcmVseSBvbiB0aGUgZXJyb3Igb2JqZWN0IHRvIHBhc3MgYWxvbmcgdGhlIHR5cGVcbiAgICogYmVjYXVzZSBzb21lIGJyb3dzZXJzIGRvIG5vdCBoYXZlIHRoaXMgcGFyYW0gaW4gaXRzIHdpbmRvdy5vbmVycm9yIEFQSS5cbiAgICogU2VlOlxuICAgKiBodHRwczovL2Jsb2cuc2VudHJ5LmlvLzIwMTYvMDEvMDQvY2xpZW50LWphdmFzY3JpcHQtcmVwb3J0aW5nLXdpbmRvdy1vbmVycm9yLmh0bWxcbiAgICpcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICogQHBhcmFtIHtmdW5jdGlvbighLi9tb2RlLk1vZGVEZWYpOiFMb2dMZXZlbH0gbGV2ZWxGdW5jXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X3N1ZmZpeFxuICAgKi9cbiAgY29uc3RydWN0b3Iod2luLCBsZXZlbEZ1bmMsIG9wdF9zdWZmaXgpIHtcbiAgICAvKipcbiAgICAgKiBJbiB0ZXN0cyB3ZSB1c2UgdGhlIG1haW4gdGVzdCB3aW5kb3cgaW5zdGVhZCBvZiB0aGUgaWZyYW1lIHdoZXJlXG4gICAgICogdGhlIHRlc3RzIHJ1bnMgYmVjYXVzZSBvbmx5IHRoZSBmb3JtZXIgaXMgcmVsYXllZCB0byB0aGUgY29uc29sZS5cbiAgICAgKiBAY29uc3QgeyFXaW5kb3d9XG4gICAgICovXG4gICAgdGhpcy53aW4gPSAoZ2V0TW9kZSgpLnRlc3QgJiYgd2luLkFNUF9URVNUX0lGUkFNRSkgPyB3aW4ucGFyZW50IDogd2luO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7ZnVuY3Rpb24oIS4vbW9kZS5Nb2RlRGVmKTohTG9nTGV2ZWx9ICovXG4gICAgdGhpcy5sZXZlbEZ1bmNfID0gbGV2ZWxGdW5jO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUxvZ0xldmVsfSAqL1xuICAgIHRoaXMubGV2ZWxfID0gdGhpcy5kZWZhdWx0TGV2ZWxfKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5zdWZmaXhfID0gb3B0X3N1ZmZpeCB8fCAnJztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshTG9nTGV2ZWx9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRMZXZlbF8oKSB7XG4gICAgcmV0dXJuIChsZXZlbE92ZXJyaWRlXyAhPT0gdW5kZWZpbmVkKSA/IGxldmVsT3ZlcnJpZGVfIDogdGhpcy5sZXZlbF87XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IUxvZ0xldmVsfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZGVmYXVsdExldmVsXygpIHtcbiAgICAvLyBObyBjb25zb2xlIC0gY2FuJ3QgZW5hYmxlIGxvZ2dpbmcuXG4gICAgaWYgKCF0aGlzLndpbi5jb25zb2xlIHx8ICF0aGlzLndpbi5jb25zb2xlLmxvZykge1xuICAgICAgcmV0dXJuIExvZ0xldmVsLk9GRjtcbiAgICB9XG5cbiAgICAvLyBMb2dnaW5nIGhhcyBiZWVuIGV4cGxpY2l0bHkgZGlzYWJsZWQuXG4gICAgaWYgKGdldE1vZGUoKS5sb2cgPT0gJzAnKSB7XG4gICAgICByZXR1cm4gTG9nTGV2ZWwuT0ZGO1xuICAgIH1cblxuICAgIC8vIExvZ2dpbmcgaXMgZW5hYmxlZCBmb3IgdGVzdHMgZGlyZWN0bHkuXG4gICAgaWYgKGdldE1vZGUoKS50ZXN0ICYmIHRoaXMud2luLkVOQUJMRV9MT0cpIHtcbiAgICAgIHJldHVybiBMb2dMZXZlbC5GSU5FO1xuICAgIH1cblxuICAgIC8vIExvY2FsRGV2IGJ5IGRlZmF1bHQgYWxsb3dzIElORk8gbGV2ZWwsIHVubGVzcyBvdmVycmlkZW4gYnkgYCNsb2dgLlxuICAgIGlmIChnZXRNb2RlKCkubG9jYWxEZXYgJiYgIWdldE1vZGUoKS5sb2cpIHtcbiAgICAgIHJldHVybiBMb2dMZXZlbC5JTkZPO1xuICAgIH1cblxuICAgIC8vIERlbGVnYXRlIHRvIHRoZSBzcGVjaWZpYyByZXNvbHZlci5cbiAgICByZXR1cm4gdGhpcy5sZXZlbEZ1bmNfKGdldE1vZGVPYmplY3QoKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRhZ1xuICAgKiBAcGFyYW0ge3N0cmluZ30gbGV2ZWxcbiAgICogQHBhcmFtIHshQXJyYXl9IG1lc3NhZ2VzXG4gICAqL1xuICBtc2dfKHRhZywgbGV2ZWwsIG1lc3NhZ2VzKSB7XG4gICAgaWYgKHRoaXMuZ2V0TGV2ZWxfKCkgIT0gTG9nTGV2ZWwuT0ZGKSB7XG4gICAgICBsZXQgZm4gPSB0aGlzLndpbi5jb25zb2xlLmxvZztcbiAgICAgIGlmIChsZXZlbCA9PSAnRVJST1InKSB7XG4gICAgICAgIGZuID0gdGhpcy53aW4uY29uc29sZS5lcnJvciB8fCBmbjtcbiAgICAgIH0gZWxzZSBpZiAobGV2ZWwgPT0gJ0lORk8nKSB7XG4gICAgICAgIGZuID0gdGhpcy53aW4uY29uc29sZS5pbmZvIHx8IGZuO1xuICAgICAgfSBlbHNlIGlmIChsZXZlbCA9PSAnV0FSTicpIHtcbiAgICAgICAgZm4gPSB0aGlzLndpbi5jb25zb2xlLndhcm4gfHwgZm47XG4gICAgICB9XG4gICAgICBpZiAoZ2V0TW9kZSgpLmxvY2FsRGV2KSB7XG4gICAgICAgIG1lc3NhZ2VzLnVuc2hpZnQoJ1snICsgdGFnICsgJ10nKTtcbiAgICAgIH1cbiAgICAgIGZuLmFwcGx5KHRoaXMud2luLmNvbnNvbGUsIG1lc3NhZ2VzKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogV2hldGhlciB0aGUgbG9nZ2luZyBpcyBlbmFibGVkLlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaXNFbmFibGVkKCkge1xuICAgIHJldHVybiB0aGlzLmdldExldmVsXygpICE9IExvZ0xldmVsLk9GRjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXBvcnRzIGEgZmluZS1ncmFpbmVkIG1lc3NhZ2UuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0YWdcbiAgICogQHBhcmFtIHsuLi4qfSB2YXJfYXJnc1xuICAgKi9cbiAgZmluZSh0YWcsIHZhcl9hcmdzKSB7XG4gICAgaWYgKHRoaXMuZ2V0TGV2ZWxfKCkgPj0gTG9nTGV2ZWwuRklORSkge1xuICAgICAgdGhpcy5tc2dfKHRhZywgJ0ZJTkUnLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVwb3J0cyBhIGluZm9ybWF0aW9uYWwgbWVzc2FnZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRhZ1xuICAgKiBAcGFyYW0gey4uLip9IHZhcl9hcmdzXG4gICAqL1xuICBpbmZvKHRhZywgdmFyX2FyZ3MpIHtcbiAgICBpZiAodGhpcy5nZXRMZXZlbF8oKSA+PSBMb2dMZXZlbC5JTkZPKSB7XG4gICAgICB0aGlzLm1zZ18odGFnLCAnSU5GTycsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXBvcnRzIGEgd2FybmluZyBtZXNzYWdlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnXG4gICAqIEBwYXJhbSB7Li4uKn0gdmFyX2FyZ3NcbiAgICovXG4gIHdhcm4odGFnLCB2YXJfYXJncykge1xuICAgIGlmICh0aGlzLmdldExldmVsXygpID49IExvZ0xldmVsLldBUk4pIHtcbiAgICAgIHRoaXMubXNnXyh0YWcsICdXQVJOJywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlcG9ydHMgYW4gZXJyb3IgbWVzc2FnZS4gSWYgdGhlIGxvZ2dpbmcgaXMgZGlzYWJsZWQsIHRoZSBlcnJvciBpcyByZXRocm93blxuICAgKiBhc3luY2hyb25vdXNseS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRhZ1xuICAgKiBAcGFyYW0gey4uLip9IHZhcl9hcmdzXG4gICAqIEByZXR1cm4geyFFcnJvcnx1bmRlZmluZWR9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBlcnJvcl8odGFnLCB2YXJfYXJncykge1xuICAgIGlmICh0aGlzLmdldExldmVsXygpID49IExvZ0xldmVsLkVSUk9SKSB7XG4gICAgICB0aGlzLm1zZ18odGFnLCAnRVJST1InLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZXJyb3IgPSBjcmVhdGVFcnJvclZhcmdzLmFwcGx5KG51bGwsXG4gICAgICAgICAgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgICB0aGlzLnByZXBhcmVFcnJvcl8oZXJyb3IpO1xuICAgICAgcmV0dXJuIGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXBvcnRzIGFuIGVycm9yIG1lc3NhZ2UuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0YWdcbiAgICogQHBhcmFtIHsuLi4qfSB2YXJfYXJnc1xuICAgKi9cbiAgZXJyb3IodGFnLCB2YXJfYXJncykge1xuICAgIGNvbnN0IGVycm9yID0gdGhpcy5lcnJvcl8uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGVycm9yLm5hbWUgPSB0YWcgfHwgZXJyb3IubmFtZTtcbiAgICAgIC8vIHJlcG9ydEVycm9yIGlzIGluc3RhbGxlZCBnbG9iYWxseSBwZXIgd2luZG93IGluIHRoZSBlbnRyeSBwb2ludC5cbiAgICAgIHNlbGYucmVwb3J0RXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXBvcnRzIGFuIGVycm9yIG1lc3NhZ2UgYW5kIG1hcmtzIHdpdGggYW4gZXhwZWN0ZWQgcHJvcGVydHkuIElmIHRoZVxuICAgKiBsb2dnaW5nIGlzIGRpc2FibGVkLCB0aGUgZXJyb3IgaXMgcmV0aHJvd24gYXN5bmNocm9ub3VzbHkuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1bnVzZWRUYWdcbiAgICogQHBhcmFtIHsuLi4qfSB2YXJfYXJnc1xuICAgKi9cbiAgZXhwZWN0ZWRFcnJvcih1bnVzZWRUYWcsIHZhcl9hcmdzKSB7XG4gICAgY29uc3QgZXJyb3IgPSB0aGlzLmVycm9yXy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmIChlcnJvcikge1xuICAgICAgZXJyb3IuZXhwZWN0ZWQgPSB0cnVlO1xuICAgICAgLy8gcmVwb3J0RXJyb3IgaXMgaW5zdGFsbGVkIGdsb2JhbGx5IHBlciB3aW5kb3cgaW4gdGhlIGVudHJ5IHBvaW50LlxuICAgICAgc2VsZi5yZXBvcnRFcnJvcihlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gZXJyb3Igb2JqZWN0LlxuICAgKiBAcGFyYW0gey4uLip9IHZhcl9hcmdzXG4gICAqIEByZXR1cm4geyFFcnJvcn1cbiAgICovXG4gIGNyZWF0ZUVycm9yKHZhcl9hcmdzKSB7XG4gICAgY29uc3QgZXJyb3IgPSBjcmVhdGVFcnJvclZhcmdzLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgdGhpcy5wcmVwYXJlRXJyb3JfKGVycm9yKTtcbiAgICByZXR1cm4gZXJyb3I7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBlcnJvciBvYmplY3Qgd2l0aCBpdHMgZXhwZWN0ZWQgcHJvcGVydHkgc2V0IHRvIHRydWUuXG4gICAqIEBwYXJhbSB7Li4uKn0gdmFyX2FyZ3NcbiAgICogQHJldHVybiB7IUVycm9yfVxuICAgKi9cbiAgY3JlYXRlRXhwZWN0ZWRFcnJvcih2YXJfYXJncykge1xuICAgIGNvbnN0IGVycm9yID0gY3JlYXRlRXJyb3JWYXJncy5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgIHRoaXMucHJlcGFyZUVycm9yXyhlcnJvcik7XG4gICAgZXJyb3IuZXhwZWN0ZWQgPSB0cnVlO1xuICAgIHJldHVybiBlcnJvcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIGZpcnN0IGFyZ3VtZW50IGlzbid0IHRydWVpc2guXG4gICAqXG4gICAqIFN1cHBvcnRzIGFyZ3VtZW50IHN1YnN0aXR1dGlvbiBpbnRvIHRoZSBtZXNzYWdlIHZpYSAlcyBwbGFjZWhvbGRlcnMuXG4gICAqXG4gICAqIFRocm93cyBhbiBlcnJvciBvYmplY3QgdGhhdCBoYXMgdHdvIGV4dHJhIHByb3BlcnRpZXM6XG4gICAqIC0gYXNzb2NpYXRlZEVsZW1lbnQ6IFRoaXMgaXMgdGhlIGZpcnN0IGVsZW1lbnQgcHJvdmlkZWQgaW4gdGhlIHZhciBhcmdzLlxuICAgKiAgIEl0IGNhbiBiZSB1c2VkIGZvciBpbXByb3ZlZCBkaXNwbGF5IG9mIGVycm9yIG1lc3NhZ2VzLlxuICAgKiAtIG1lc3NhZ2VBcnJheTogVGhlIGVsZW1lbnRzIG9mIHRoZSBzdWJzdGl0dXRlZCBtZXNzYWdlIGFzIG5vbi1zdHJpbmdpZmllZFxuICAgKiAgIGVsZW1lbnRzIGluIGFuIGFycmF5LiBXaGVuIGUuZy4gcGFzc2VkIHRvIGNvbnNvbGUuZXJyb3IgdGhpcyB5aWVsZHNcbiAgICogICBuYXRpdmUgZGlzcGxheXMgb2YgdGhpbmdzIGxpa2UgSFRNTCBlbGVtZW50cy5cbiAgICpcbiAgICogQHBhcmFtIHtUfSBzaG91bGRCZVRydWVpc2ggVGhlIHZhbHVlIHRvIGFzc2VydC4gVGhlIGFzc2VydCBmYWlscyBpZiBpdCBkb2VzXG4gICAqICAgICBub3QgZXZhbHVhdGUgdG8gdHJ1ZS5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfbWVzc2FnZSBUaGUgYXNzZXJ0aW9uIG1lc3NhZ2VcbiAgICogQHBhcmFtIHsuLi4qfSB2YXJfYXJncyBBcmd1bWVudHMgc3Vic3RpdHV0ZWQgaW50byAlcyBpbiB0aGUgbWVzc2FnZS5cbiAgICogQHJldHVybiB7VH0gVGhlIHZhbHVlIG9mIHNob3VsZEJlVHJ1ZWlzaC5cbiAgICogQHRlbXBsYXRlIFRcbiAgICogZXNsaW50IFwiZ29vZ2xlLWNhbWVsY2FzZS9nb29nbGUtY2FtZWxjYXNlXCI6IDBcbiAgICovXG4gIGFzc2VydChzaG91bGRCZVRydWVpc2gsIG9wdF9tZXNzYWdlLCB2YXJfYXJncykge1xuICAgIGxldCBmaXJzdEVsZW1lbnQ7XG4gICAgaWYgKCFzaG91bGRCZVRydWVpc2gpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBvcHRfbWVzc2FnZSB8fCAnQXNzZXJ0aW9uIGZhaWxlZCc7XG4gICAgICBjb25zdCBzcGxpdE1lc3NhZ2UgPSBtZXNzYWdlLnNwbGl0KCclcycpO1xuICAgICAgY29uc3QgZmlyc3QgPSBzcGxpdE1lc3NhZ2Uuc2hpZnQoKTtcbiAgICAgIGxldCBmb3JtYXR0ZWQgPSBmaXJzdDtcbiAgICAgIGNvbnN0IG1lc3NhZ2VBcnJheSA9IFtdO1xuICAgICAgcHVzaElmTm9uRW1wdHkobWVzc2FnZUFycmF5LCBmaXJzdCk7XG4gICAgICBmb3IgKGxldCBpID0gMjsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCB2YWwgPSBhcmd1bWVudHNbaV07XG4gICAgICAgIGlmICh2YWwgJiYgdmFsLnRhZ05hbWUpIHtcbiAgICAgICAgICBmaXJzdEVsZW1lbnQgPSB2YWw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV4dENvbnN0YW50ID0gc3BsaXRNZXNzYWdlLnNoaWZ0KCk7XG4gICAgICAgIG1lc3NhZ2VBcnJheS5wdXNoKHZhbCk7XG4gICAgICAgIHB1c2hJZk5vbkVtcHR5KG1lc3NhZ2VBcnJheSwgbmV4dENvbnN0YW50LnRyaW0oKSk7XG4gICAgICAgIGZvcm1hdHRlZCArPSB0b1N0cmluZyh2YWwpICsgbmV4dENvbnN0YW50O1xuICAgICAgfVxuICAgICAgY29uc3QgZSA9IG5ldyBFcnJvcihmb3JtYXR0ZWQpO1xuICAgICAgZS5mcm9tQXNzZXJ0ID0gdHJ1ZTtcbiAgICAgIGUuYXNzb2NpYXRlZEVsZW1lbnQgPSBmaXJzdEVsZW1lbnQ7XG4gICAgICBlLm1lc3NhZ2VBcnJheSA9IG1lc3NhZ2VBcnJheTtcbiAgICAgIHRoaXMucHJlcGFyZUVycm9yXyhlKTtcbiAgICAgIC8vIHJlcG9ydEVycm9yIGlzIGluc3RhbGxlZCBnbG9iYWxseSBwZXIgd2luZG93IGluIHRoZSBlbnRyeSBwb2ludC5cbiAgICAgIHNlbGYucmVwb3J0RXJyb3IoZSk7XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgICByZXR1cm4gc2hvdWxkQmVUcnVlaXNoO1xuICB9XG5cbiAgLyoqXG4gICAqIFRocm93cyBhbiBlcnJvciBpZiB0aGUgZmlyc3QgYXJndW1lbnQgaXNuJ3QgYW4gRWxlbWVudFxuICAgKlxuICAgKiBPdGhlcndpc2Ugc2VlIGBhc3NlcnRgIGZvciB1c2FnZVxuICAgKlxuICAgKiBAcGFyYW0geyp9IHNob3VsZEJlRWxlbWVudFxuICAgKiBAcGFyYW0ge3N0cmluZz19IG9wdF9tZXNzYWdlIFRoZSBhc3NlcnRpb24gbWVzc2FnZVxuICAgKiBAcmV0dXJuIHshRWxlbWVudH0gVGhlIHZhbHVlIG9mIHNob3VsZEJlVHJ1ZWlzaC5cbiAgICogQHRlbXBsYXRlIFRcbiAgICogZXNsaW50IFwiZ29vZ2xlLWNhbWVsY2FzZS9nb29nbGUtY2FtZWxjYXNlXCI6IDJcbiAgICovXG4gIGFzc2VydEVsZW1lbnQoc2hvdWxkQmVFbGVtZW50LCBvcHRfbWVzc2FnZSkge1xuICAgIGNvbnN0IHNob3VsZEJlVHJ1ZWlzaCA9IHNob3VsZEJlRWxlbWVudCAmJiBzaG91bGRCZUVsZW1lbnQubm9kZVR5cGUgPT0gMTtcbiAgICB0aGlzLmFzc2VydChzaG91bGRCZVRydWVpc2gsIChvcHRfbWVzc2FnZSB8fCAnRWxlbWVudCBleHBlY3RlZCcpICsgJzogJXMnLFxuICAgICAgICBzaG91bGRCZUVsZW1lbnQpO1xuICAgIHJldHVybiAvKiogQHR5cGUgeyFFbGVtZW50fSAqLyAoc2hvdWxkQmVFbGVtZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIGZpcnN0IGFyZ3VtZW50IGlzbid0IGEgc3RyaW5nLiBUaGUgc3RyaW5nIGNhblxuICAgKiBiZSBlbXB0eS5cbiAgICpcbiAgICogRm9yIG1vcmUgZGV0YWlscyBzZWUgYGFzc2VydGAuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gc2hvdWxkQmVTdHJpbmdcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfbWVzc2FnZSBUaGUgYXNzZXJ0aW9uIG1lc3NhZ2VcbiAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgc3RyaW5nIHZhbHVlLiBDYW4gYmUgYW4gZW1wdHkgc3RyaW5nLlxuICAgKiBlc2xpbnQgXCJnb29nbGUtY2FtZWxjYXNlL2dvb2dsZS1jYW1lbGNhc2VcIjogMlxuICAgKi9cbiAgYXNzZXJ0U3RyaW5nKHNob3VsZEJlU3RyaW5nLCBvcHRfbWVzc2FnZSkge1xuICAgIHRoaXMuYXNzZXJ0KHR5cGVvZiBzaG91bGRCZVN0cmluZyA9PSAnc3RyaW5nJyxcbiAgICAgICAgKG9wdF9tZXNzYWdlIHx8ICdTdHJpbmcgZXhwZWN0ZWQnKSArICc6ICVzJywgc2hvdWxkQmVTdHJpbmcpO1xuICAgIHJldHVybiAvKiogQHR5cGUge3N0cmluZ30gKi8gKHNob3VsZEJlU3RyaW5nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIGZpcnN0IGFyZ3VtZW50IGlzbid0IGEgbnVtYmVyLiBUaGUgYWxsb3dlZCB2YWx1ZXNcbiAgICogaW5jbHVkZSBgMGAgYW5kIGBOYU5gLlxuICAgKlxuICAgKiBGb3IgbW9yZSBkZXRhaWxzIHNlZSBgYXNzZXJ0YC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBzaG91bGRCZU51bWJlclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG9wdF9tZXNzYWdlIFRoZSBhc3NlcnRpb24gbWVzc2FnZVxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBudW1iZXIgdmFsdWUuIFRoZSBhbGxvd2VkIHZhbHVlcyBpbmNsdWRlIGAwYFxuICAgKiAgIGFuZCBgTmFOYC5cbiAgICovXG4gIGFzc2VydE51bWJlcihzaG91bGRCZU51bWJlciwgb3B0X21lc3NhZ2UpIHtcbiAgICB0aGlzLmFzc2VydCh0eXBlb2Ygc2hvdWxkQmVOdW1iZXIgPT0gJ251bWJlcicsXG4gICAgICAgIChvcHRfbWVzc2FnZSB8fCAnTnVtYmVyIGV4cGVjdGVkJykgKyAnOiAlcycsIHNob3VsZEJlTnVtYmVyKTtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChzaG91bGRCZU51bWJlcik7XG4gIH1cblxuICAvKipcbiAgICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBmaXJzdCBhcmd1bWVudCBpc24ndCBhIGJvb2xlYW4uXG4gICAqXG4gICAqIEZvciBtb3JlIGRldGFpbHMgc2VlIGBhc3NlcnRgLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHNob3VsZEJlQm9vbGVhblxuICAgKiBAcGFyYW0ge3N0cmluZz19IG9wdF9tZXNzYWdlIFRoZSBhc3NlcnRpb24gbWVzc2FnZVxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgYm9vbGVhbiB2YWx1ZS5cbiAgICovXG4gIGFzc2VydEJvb2xlYW4oc2hvdWxkQmVCb29sZWFuLCBvcHRfbWVzc2FnZSkge1xuICAgIHRoaXMuYXNzZXJ0KCEhc2hvdWxkQmVCb29sZWFuID09PSBzaG91bGRCZUJvb2xlYW4sXG4gICAgICAgIChvcHRfbWVzc2FnZSB8fCAnQm9vbGVhbiBleHBlY3RlZCcpICsgJzogJXMnLCBzaG91bGRCZUJvb2xlYW4pO1xuICAgIHJldHVybiAvKiogQHR5cGUge2Jvb2xlYW59ICovIChzaG91bGRCZUJvb2xlYW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIEFzc2VydHMgYW5kIHJldHVybnMgdGhlIGVudW0gdmFsdWUuIElmIHRoZSBlbnVtIGRvZXNuJ3QgY29udGFpbiBzdWNoIGFcbiAgICogdmFsdWUsIHRoZSBlcnJvciBpcyB0aHJvd24uXG4gICAqXG4gICAqIEBwYXJhbSB7IU9iamVjdDxUPn0gZW51bU9ialxuICAgKiBAcGFyYW0ge3N0cmluZ30gc1xuICAgKiBAcGFyYW0ge3N0cmluZz19IG9wdF9lbnVtTmFtZVxuICAgKiBAcmV0dXJuIHtUfVxuICAgKiBAdGVtcGxhdGUgVFxuICAgKiBlc2xpbnQgXCJnb29nbGUtY2FtZWxjYXNlL2dvb2dsZS1jYW1lbGNhc2VcIjogMlxuICAgKi9cbiAgYXNzZXJ0RW51bVZhbHVlKGVudW1PYmosIHMsIG9wdF9lbnVtTmFtZSkge1xuICAgIGlmIChpc0VudW1WYWx1ZShlbnVtT2JqLCBzKSkge1xuICAgICAgcmV0dXJuIHM7XG4gICAgfVxuICAgIHRoaXMuYXNzZXJ0KGZhbHNlLFxuICAgICAgICAnVW5rbm93biAlcyB2YWx1ZTogXCIlc1wiJyxcbiAgICAgICAgb3B0X2VudW1OYW1lIHx8ICdlbnVtJywgcyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRXJyb3J9IGVycm9yXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcmVwYXJlRXJyb3JfKGVycm9yKSB7XG4gICAgZXJyb3IgPSBkdXBsaWNhdGVFcnJvcklmTmVjZXNzYXJ5KGVycm9yKTtcbiAgICBpZiAodGhpcy5zdWZmaXhfKSB7XG4gICAgICBpZiAoIWVycm9yLm1lc3NhZ2UpIHtcbiAgICAgICAgZXJyb3IubWVzc2FnZSA9IHRoaXMuc3VmZml4XztcbiAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZS5pbmRleE9mKHRoaXMuc3VmZml4XykgPT0gLTEpIHtcbiAgICAgICAgZXJyb3IubWVzc2FnZSArPSB0aGlzLnN1ZmZpeF87XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc1VzZXJFcnJvck1lc3NhZ2UoZXJyb3IubWVzc2FnZSkpIHtcbiAgICAgIGVycm9yLm1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlLnJlcGxhY2UoVVNFUl9FUlJPUl9TRU5USU5FTCwgJycpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfCFFbGVtZW50fSB2YWxcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gdG9TdHJpbmcodmFsKSB7XG4gIC8vIERvIGNoZWNrIGVxdWl2YWxlbnQgdG8gYHZhbCBpbnN0YW5jZW9mIEVsZW1lbnRgIHdpdGhvdXQgY3Jvc3Mtd2luZG93IGJ1Z1xuICBpZiAodmFsICYmIHZhbC5ub2RlVHlwZSA9PSAxKSB7XG4gICAgcmV0dXJuIHZhbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgKyAodmFsLmlkID8gJyMnICsgdmFsLmlkIDogJycpO1xuICB9XG4gIHJldHVybiAvKiogQHR5cGUge3N0cmluZ30gKi8gKHZhbCk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0geyFBcnJheX0gYXJyYXlcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKi9cbmZ1bmN0aW9uIHB1c2hJZk5vbkVtcHR5KGFycmF5LCB2YWwpIHtcbiAgaWYgKHZhbCAhPSAnJykge1xuICAgIGFycmF5LnB1c2godmFsKTtcbiAgfVxufVxuXG4vKipcbiAqIFNvbWUgZXhjZXB0aW9ucyAoRE9NRXhjZXB0aW9uLCBuYW1lbHkpIGhhdmUgcmVhZC1vbmx5IG1lc3NhZ2UuXG4gKiBAcGFyYW0geyFFcnJvcn0gZXJyb3JcbiAqIEByZXR1cm4geyFFcnJvcn07XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkdXBsaWNhdGVFcnJvcklmTmVjZXNzYXJ5KGVycm9yKSB7XG4gIGNvbnN0IHttZXNzYWdlfSA9IGVycm9yO1xuICBjb25zdCB0ZXN0ID0gU3RyaW5nKE1hdGgucmFuZG9tKCkpO1xuICBlcnJvci5tZXNzYWdlID0gdGVzdDtcblxuICBpZiAoZXJyb3IubWVzc2FnZSA9PT0gdGVzdCkge1xuICAgIGVycm9yLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgIHJldHVybiBlcnJvcjtcbiAgfVxuXG4gIGNvbnN0IGUgPSBuZXcgRXJyb3IoZXJyb3IubWVzc2FnZSk7XG4gIC8vIENvcHkgYWxsIHRoZSBleHRyYW5lb3VzIHRoaW5ncyB3ZSBhdHRhY2guXG4gIGZvciAoY29uc3QgcHJvcCBpbiBlcnJvcikge1xuICAgIGVbcHJvcF0gPSBlcnJvcltwcm9wXTtcbiAgfVxuICAvLyBFbnN1cmUgdGhlc2UgYXJlIGNvcGllZC5cbiAgZS5zdGFjayA9IGVycm9yLnN0YWNrO1xuICByZXR1cm4gZTtcbn1cblxuLyoqXG4gKiBAcGFyYW0gey4uLip9IHZhcl9hcmdzXG4gKiBAcmV0dXJuIHshRXJyb3J9XG4gKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVycm9yVmFyZ3ModmFyX2FyZ3MpIHtcbiAgbGV0IGVycm9yID0gbnVsbDtcbiAgbGV0IG1lc3NhZ2UgPSAnJztcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBhcmcgPSBhcmd1bWVudHNbaV07XG4gICAgaWYgKGFyZyBpbnN0YW5jZW9mIEVycm9yICYmICFlcnJvcikge1xuICAgICAgZXJyb3IgPSBkdXBsaWNhdGVFcnJvcklmTmVjZXNzYXJ5KGFyZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChtZXNzYWdlKSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gJyAnO1xuICAgICAgfVxuICAgICAgbWVzc2FnZSArPSBhcmc7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFlcnJvcikge1xuICAgIGVycm9yID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xuICB9IGVsc2UgaWYgKG1lc3NhZ2UpIHtcbiAgICBlcnJvci5tZXNzYWdlID0gbWVzc2FnZSArICc6ICcgKyBlcnJvci5tZXNzYWdlO1xuICB9XG4gIHJldHVybiBlcnJvcjtcbn1cblxuXG4vKipcbiAqIFJldGhyb3dzIHRoZSBlcnJvciB3aXRob3V0IHRlcm1pbmF0aW5nIHRoZSBjdXJyZW50IGNvbnRleHQuIFRoaXMgcHJlc2VydmVzXG4gKiB3aGV0aGVyIHRoZSBvcmlnaW5hbCBlcnJvciBkZXNpZ25hdGlvbiBpcyBhIHVzZXIgZXJyb3Igb3IgYSBkZXYgZXJyb3IuXG4gKiBAcGFyYW0gey4uLip9IHZhcl9hcmdzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXRocm93QXN5bmModmFyX2FyZ3MpIHtcbiAgY29uc3QgZXJyb3IgPSBjcmVhdGVFcnJvclZhcmdzLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIC8vIHJlcG9ydEVycm9yIGlzIGluc3RhbGxlZCBnbG9iYWxseSBwZXIgd2luZG93IGluIHRoZSBlbnRyeSBwb2ludC5cbiAgICBzZWxmLnJlcG9ydEVycm9yKGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfSk7XG59XG5cblxuLyoqXG4gKiBDYWNoZSBmb3IgbG9ncy4gV2UgZG8gbm90IHVzZSBhIFNlcnZpY2Ugc2luY2UgdGhlIHNlcnZpY2UgbW9kdWxlIGRlcGVuZHNcbiAqIG9uIExvZyBhbmQgY2xvc3VyZSBsaXRlcmFsbHkgY2FuJ3QgZXZlbi5cbiAqIEB0eXBlIHt7dXNlcjogP0xvZywgZGV2OiA/TG9nLCB1c2VyRm9yRW1iZWQ6ID9Mb2d9fVxuICovXG5zZWxmLmxvZyA9IChzZWxmLmxvZyB8fCB7XG4gIHVzZXI6IG51bGwsXG4gIGRldjogbnVsbCxcbiAgdXNlckZvckVtYmVkOiBudWxsLFxufSk7XG5cbmNvbnN0IGxvZ3MgPSBzZWxmLmxvZztcblxuLyoqXG4gKiBFdmVudHVhbGx5IGhvbGRzIGEgY29uc3RydWN0b3IgZm9yIExvZyBvYmplY3RzLiBMYXppbHkgaW5pdGlhbGl6ZWQsIHNvIHdlXG4gKiBjYW4gYXZvaWQgZXZlciByZWZlcmVuY2luZyB0aGUgcmVhbCBjb25zdHJ1Y3RvciBleGNlcHQgaW4gSlMgYmluYXJpZXNcbiAqIHRoYXQgYWN0dWFsbHkgd2FudCB0byBpbmNsdWRlIHRoZSBpbXBsZW1lbnRhdGlvbi5cbiAqIEB0eXBlIHs/RnVuY3Rpb259XG4gKi9cbmxldCBsb2dDb25zdHJ1Y3RvciA9IG51bGw7XG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgbG9nIGNvbnRydWN0b3IuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbml0TG9nQ29uc3RydWN0b3IoKSB7XG4gIGxvZ0NvbnN0cnVjdG9yID0gTG9nO1xuICAvLyBJbml0aWFsaXplIGluc3RhbmNlcyBmb3IgdXNlLiBJZiBhIGJpbmFyeSAoYW4gZXh0ZW5zaW9uIGZvciBleGFtcGxlKSB0aGF0XG4gIC8vIGRvZXMgbm90IGNhbGwgYGluaXRMb2dDb25zdHJ1Y3RvcmAgaW52b2tlcyBgZGV2KClgIG9yIGB1c2VyKClgIGVhcmxpZXIgdGhhblxuICAvLyB0aGUgYmluYXJ5IHRoYXQgZG9lcyBjYWxsIGBpbml0TG9nQ29uc3RydWN0b3JgIChhbXAuanMpLCB0aGUgZXh0ZW5zaW9uIHdpbGxcbiAgLy8gdGhyb3cgYW4gZXJyb3IgYXMgdGhhdCBleHRlbnNpb24gd2lsbCBuZXZlciBiZSBhYmxlIHRvIGluaXRpYWxpemUgdGhlIGxvZ1xuICAvLyBpbnN0YW5jZXMgYW5kIHdlIGFsc28gZG9uJ3Qgd2FudCBpdCB0byBjYWxsIGBpbml0TG9nQ29uc3RydWN0b3JgIGVpdGhlclxuICAvLyAoc2luY2UgdGhhdCB3aWxsIGNhdXNlIHRoZSBMb2cgaW1wbGVtZW50YXRpb24gdG8gYmUgYnVuZGxlZCBpbnRvIHRoYXRcbiAgLy8gYmluYXJ5KS4gU28gd2UgbXVzdCBpbml0aWFsaXplIHRoZSBpbnN0YW5jZXMgZWFnZXJseSBzbyB0aGF0IHRoZXkgYXJlIHJlYWR5XG4gIC8vIGZvciB1c2UgKHN0b3JlZCBnbG9iYWxseSkgYWZ0ZXIgdGhlIG1haW4gYmluYXJ5IGNhbGxzIGBpbml0TG9nQ29uc3RydWN0b3JgLlxuICBkZXYoKTtcbiAgdXNlcigpO1xufVxuXG4vKipcbiAqIFJlc2V0cyBsb2cgY29udHJ1Y3RvciBmb3IgdGVzdGluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0TG9nQ29uc3RydWN0b3JGb3JUZXN0aW5nKCkge1xuICBsb2dDb25zdHJ1Y3RvciA9IG51bGw7XG59XG5cbi8qKlxuICogUHVibGlzaGVyIGxldmVsIGxvZy5cbiAqXG4gKiBFbmFibGVkIGluIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbiAqICAxLiBOb3QgZGlzYWJsZWQgdXNpbmcgYCNsb2c9MGAuXG4gKiAgMi4gRGV2ZWxvcG1lbnQgbW9kZSBpcyBlbmFibGVkIHZpYSBgI2RldmVsb3BtZW50PTFgIG9yIGxvZ2dpbmcgaXMgZXhwbGljaXRseVxuICogICAgIGVuYWJsZWQgdmlhIGAjbG9nPURgIHdoZXJlIEQgPj0gMS5cbiAqICAzLiBBTVAuc2V0TG9nTGV2ZWwoRCkgaXMgY2FsbGVkLCB3aGVyZSBEID49IDEuXG4gKlxuICogQHBhcmFtIHshRWxlbWVudD19IG9wdF9lbGVtZW50XG4gKiBAcmV0dXJuIHshTG9nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlcihvcHRfZWxlbWVudCkge1xuICBpZiAoIWxvZ3MudXNlcikge1xuICAgIGxvZ3MudXNlciA9IGdldFVzZXJMb2dnZXIoVVNFUl9FUlJPUl9TRU5USU5FTCk7XG4gIH1cbiAgaWYgKCFpc0Zyb21FbWJlZChsb2dzLnVzZXIud2luLCBvcHRfZWxlbWVudCkpIHtcbiAgICByZXR1cm4gbG9ncy51c2VyO1xuICB9IGVsc2Uge1xuICAgIGlmIChsb2dzLnVzZXJGb3JFbWJlZCkge1xuICAgICAgcmV0dXJuIGxvZ3MudXNlckZvckVtYmVkO1xuICAgIH1cbiAgICByZXR1cm4gbG9ncy51c2VyRm9yRW1iZWQgPSBnZXRVc2VyTG9nZ2VyKFVTRVJfRVJST1JfRU1CRURfU0VOVElORUwpO1xuICB9XG59XG5cbi8qKlxuICogR2V0dGVyIGZvciB1c2VyIGxvZ2dlclxuICogQHBhcmFtIHtzdHJpbmc9fSBzdWZmaXhcbiAqIEByZXR1cm4geyFMb2d9XG4gKi9cbmZ1bmN0aW9uIGdldFVzZXJMb2dnZXIoc3VmZml4KSB7XG4gIGlmICghbG9nQ29uc3RydWN0b3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2ZhaWxlZCB0byBjYWxsIGluaXRMb2dDb25zdHJ1Y3RvcicpO1xuICB9XG4gIHJldHVybiBuZXcgbG9nQ29uc3RydWN0b3Ioc2VsZiwgbW9kZSA9PiB7XG4gICAgY29uc3QgbG9nTnVtID0gcGFyc2VJbnQobW9kZS5sb2csIDEwKTtcbiAgICBpZiAobW9kZS5kZXZlbG9wbWVudCB8fCBsb2dOdW0gPj0gMSkge1xuICAgICAgcmV0dXJuIExvZ0xldmVsLkZJTkU7XG4gICAgfVxuICAgIHJldHVybiBMb2dMZXZlbC5XQVJOO1xuICB9LCBzdWZmaXgpO1xufVxuXG4vKipcbiAqIEFNUCBkZXZlbG9wbWVudCBsb2cuIENhbGxzIHRvIGBkZXZMb2coKS5hc3NlcnRgIGFuZCBgZGV2LmZpbmVgIGFyZSBzdHJpcHBlZFxuICogaW4gdGhlIFBST0QgYmluYXJ5LiBIb3dldmVyLCBgZGV2TG9nKCkuYXNzZXJ0YCByZXN1bHQgaXMgcHJlc2VydmVkIGluIGVpdGhlclxuICogY2FzZS5cbiAqXG4gKiBFbmFibGVkIGluIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbiAqICAxLiBOb3QgZGlzYWJsZWQgdXNpbmcgYCNsb2c9MGAuXG4gKiAgMi4gTG9nZ2luZyBpcyBleHBsaWNpdGx5IGVuYWJsZWQgdmlhIGAjbG9nPURgLCB3aGVyZSBEID49IDIuXG4gKiAgMy4gQU1QLnNldExvZ0xldmVsKEQpIGlzIGNhbGxlZCwgd2hlcmUgRCA+PSAyLlxuICpcbiAqIEByZXR1cm4geyFMb2d9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZXYoKSB7XG4gIGlmIChsb2dzLmRldikge1xuICAgIHJldHVybiBsb2dzLmRldjtcbiAgfVxuICBpZiAoIWxvZ0NvbnN0cnVjdG9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdmYWlsZWQgdG8gY2FsbCBpbml0TG9nQ29uc3RydWN0b3InKTtcbiAgfVxuICByZXR1cm4gbG9ncy5kZXYgPSBuZXcgbG9nQ29uc3RydWN0b3Ioc2VsZiwgbW9kZSA9PiB7XG4gICAgY29uc3QgbG9nTnVtID0gcGFyc2VJbnQobW9kZS5sb2csIDEwKTtcbiAgICBpZiAobG9nTnVtID49IDMpIHtcbiAgICAgIHJldHVybiBMb2dMZXZlbC5GSU5FO1xuICAgIH1cbiAgICBpZiAobG9nTnVtID49IDIpIHtcbiAgICAgIHJldHVybiBMb2dMZXZlbC5JTkZPO1xuICAgIH1cbiAgICByZXR1cm4gTG9nTGV2ZWwuT0ZGO1xuICB9KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHshRWxlbWVudD19IG9wdF9lbGVtZW50XG4gKiBAcmV0dXJuIHtib29sZWFufSBpc0VtYmVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Zyb21FbWJlZCh3aW4sIG9wdF9lbGVtZW50KSB7XG4gIGlmICghb3B0X2VsZW1lbnQpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIG9wdF9lbGVtZW50Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcgIT0gd2luO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Z2V0TW9kZX0gZnJvbSAnLi9tb2RlJztcblxuLyoqXG4gKiBQcm92aWRlcyBpbmZvIGFib3V0IHRoZSBjdXJyZW50IGFwcC4gVGhpcyByZXR1cm4gdmFsdWUgbWF5IGJlIGNhY2hlZCBhbmRcbiAqIHBhc3NlZCBhcm91bmQgYXMgaXQgd2lsbCBhbHdheXMgYmUgRENFJ2QuXG4gKiBAcGFyYW0gez9XaW5kb3c9fSBvcHRfd2luXG4gKiBAcmV0dXJuIHshLi9tb2RlLk1vZGVEZWZ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRNb2RlT2JqZWN0KG9wdF93aW4pIHtcbiAgcmV0dXJuIHtcbiAgICBsb2NhbERldjogZ2V0TW9kZShvcHRfd2luKS5sb2NhbERldixcbiAgICBkZXZlbG9wbWVudDogZ2V0TW9kZShvcHRfd2luKS5kZXZlbG9wbWVudCxcbiAgICBmaWx0ZXI6IGdldE1vZGUob3B0X3dpbikuZmlsdGVyLFxuICAgIG1pbmlmaWVkOiBnZXRNb2RlKG9wdF93aW4pLm1pbmlmaWVkLFxuICAgIGxpdGU6IGdldE1vZGUob3B0X3dpbikubGl0ZSxcbiAgICB0ZXN0OiBnZXRNb2RlKG9wdF93aW4pLnRlc3QsXG4gICAgbG9nOiBnZXRNb2RlKG9wdF93aW4pLmxvZyxcbiAgICB2ZXJzaW9uOiBnZXRNb2RlKG9wdF93aW4pLnZlcnNpb24sXG4gICAgcnR2VmVyc2lvbjogZ2V0TW9kZShvcHRfd2luKS5ydHZWZXJzaW9uLFxuICB9O1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7cGFyc2VRdWVyeVN0cmluZ199IGZyb20gJy4vdXJsLXBhcnNlLXF1ZXJ5LXN0cmluZyc7XG5cbi8qKlxuICogQHR5cGVkZWYge3tcbiAqICAgbG9jYWxEZXY6IGJvb2xlYW4sXG4gKiAgIGRldmVsb3BtZW50OiBib29sZWFuLFxuICogICBmaWx0ZXI6IChzdHJpbmd8dW5kZWZpbmVkKSxcbiAqICAgbWluaWZpZWQ6IGJvb2xlYW4sXG4gKiAgIGxpdGU6IGJvb2xlYW4sXG4gKiAgIHRlc3Q6IGJvb2xlYW4sXG4gKiAgIGxvZzogKHN0cmluZ3x1bmRlZmluZWQpLFxuICogICB2ZXJzaW9uOiBzdHJpbmcsXG4gKiAgIHJ0dlZlcnNpb246IHN0cmluZyxcbiAqIH19XG4gKi9cbmV4cG9ydCBsZXQgTW9kZURlZjtcblxuLyoqIEB0eXBlIHtzdHJpbmd9ICovXG5jb25zdCB2ZXJzaW9uID0gJyRpbnRlcm5hbFJ1bnRpbWVWZXJzaW9uJCc7XG5cbi8qKlxuICogYHJ0dlZlcnNpb25gIGlzIHRoZSBwcmVmaXhlZCB2ZXJzaW9uIHdlIHNlcnZlIG9mZiBvZiB0aGUgY2RuLlxuICogVGhlIHByZWZpeCBkZW5vdGVzIGNhbmFyeSgwMCkgb3IgcHJvZCgwMSkgb3IgYW4gZXhwZXJpbWVudCB2ZXJzaW9uICggPiAwMSkuXG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5sZXQgcnR2VmVyc2lvbiA9ICcnO1xuXG4vKipcbiAqIFByb3ZpZGVzIGluZm8gYWJvdXQgdGhlIGN1cnJlbnQgYXBwLlxuICogQHBhcmFtIHs/V2luZG93PX0gb3B0X3dpblxuICogQHJldHVybiB7IU1vZGVEZWZ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRNb2RlKG9wdF93aW4pIHtcbiAgY29uc3Qgd2luID0gb3B0X3dpbiB8fCBzZWxmO1xuICBpZiAod2luLkFNUF9NT0RFKSB7XG4gICAgcmV0dXJuIHdpbi5BTVBfTU9ERTtcbiAgfVxuICByZXR1cm4gd2luLkFNUF9NT0RFID0gZ2V0TW9kZV8od2luKTtcbn1cblxuLyoqXG4gKiBQcm92aWRlcyBpbmZvIGFib3V0IHRoZSBjdXJyZW50IGFwcC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHshTW9kZURlZn1cbiAqL1xuZnVuY3Rpb24gZ2V0TW9kZV8od2luKSB7XG4gIC8vIE1hZ2ljIGNvbnN0YW50cyB0aGF0IGFyZSByZXBsYWNlZCBieSBjbG9zdXJlIGNvbXBpbGVyLlxuICAvLyBJU19NSU5JRklFRCBpcyBhbHdheXMgcmVwbGFjZWQgd2l0aCB0cnVlIHdoZW4gY2xvc3VyZSBjb21waWxlciBpcyB1c2VkXG4gIC8vIHdoaWxlIElTX0RFViBpcyBvbmx5IHJlcGxhY2VkIHdoZW4gYGd1bHAgZGlzdGAgaXMgY2FsbGVkIHdpdGhvdXQgdGhlXG4gIC8vIC0tZm9ydGVzdGluZyBmbGFnLlxuICBjb25zdCBJU19ERVYgPSB0cnVlO1xuICBjb25zdCBJU19NSU5JRklFRCA9IGZhbHNlO1xuXG4gIGNvbnN0IGxvY2FsRGV2RW5hYmxlZCA9ICEhKHNlbGYuQU1QX0NPTkZJRyAmJiBzZWxmLkFNUF9DT05GSUcubG9jYWxEZXYpO1xuICBjb25zdCBydW5uaW5nVGVzdHMgPSBJU19ERVYgJiYgISEod2luLkFNUF9URVNUIHx8IHdpbi5fX2thcm1hX18pO1xuICBjb25zdCBpc0xvY2FsRGV2ID0gSVNfREVWICYmIChsb2NhbERldkVuYWJsZWQgfHwgcnVubmluZ1Rlc3RzKTtcbiAgY29uc3QgaGFzaFF1ZXJ5ID0gcGFyc2VRdWVyeVN0cmluZ18oXG4gICAgICAvLyBsb2NhdGlvbi5vcmlnaW5hbEhhc2ggaXMgc2V0IGJ5IHRoZSB2aWV3ZXIgd2hlbiBpdCByZW1vdmVzIHRoZSBmcmFnbWVudFxuICAgICAgLy8gZnJvbSB0aGUgVVJMLlxuICAgICAgd2luLmxvY2F0aW9uLm9yaWdpbmFsSGFzaCB8fCB3aW4ubG9jYXRpb24uaGFzaCk7XG5cbiAgY29uc3Qgc2VhcmNoUXVlcnkgPSBwYXJzZVF1ZXJ5U3RyaW5nXyh3aW4ubG9jYXRpb24uc2VhcmNoKTtcblxuICBpZiAoIXJ0dlZlcnNpb24pIHtcbiAgICBydHZWZXJzaW9uID0gZ2V0UnR2VmVyc2lvbih3aW4sIGlzTG9jYWxEZXYpO1xuICB9XG5cbiAgLy8gVGhlIGBtaW5pZmllZGAsIGB0ZXN0YCBhbmQgYGxvY2FsRGV2YCBwcm9wZXJ0aWVzIGFyZSByZXBsYWNlZFxuICAvLyBhcyBib29sZWFuIGxpdGVyYWxzIHdoZW4gd2UgcnVuIGBndWxwIGRpc3RgIHdpdGhvdXQgdGhlIGAtLWZvcnRlc3RpbmdgXG4gIC8vIGZsYWdzLiBUaGlzIGltcHJvdmVkIERDRSBvbiB0aGUgcHJvZHVjdGlvbiBmaWxlIHdlIGRlcGxveSBhcyB0aGUgY29kZVxuICAvLyBwYXRocyBmb3IgbG9jYWxob3N0L3Rlc3RpbmcvZGV2ZWxvcG1lbnQgYXJlIGVsaW1pbmF0ZWQuXG4gIHJldHVybiB7XG4gICAgbG9jYWxEZXY6IGlzTG9jYWxEZXYsXG4gICAgLy8gVHJpZ2dlcnMgdmFsaWRhdGlvbiBvciBlbmFibGUgcHViIGxldmVsIGxvZ2dpbmcuIFZhbGlkYXRpb24gY2FuIGJlXG4gICAgLy8gYnlwYXNzZWQgdmlhICN2YWxpZGF0ZT0wLlxuICAgIC8vIE5vdGUgdGhhdCBBTVBfREVWX01PREUgZmxhZyBpcyB1c2VkIGZvciB0ZXN0aW5nIHB1cnBvc2VzLlxuICAgIGRldmVsb3BtZW50OiAhIShoYXNoUXVlcnlbJ2RldmVsb3BtZW50J10gPT0gJzEnIHx8IHdpbi5BTVBfREVWX01PREUpLFxuICAgIGV4YW1pbmVyOiBoYXNoUXVlcnlbJ2RldmVsb3BtZW50J10gPT0gJzInLFxuICAgIC8vIEFsbG93cyBmaWx0ZXJpbmcgdmFsaWRhdGlvbiBlcnJvcnMgYnkgZXJyb3IgY2F0ZWdvcnkuIEZvciB0aGVcbiAgICAvLyBhdmFpbGFibGUgY2F0ZWdvcmllcywgc2VlIEVycm9yQ2F0ZWdvcnkgaW4gdmFsaWRhdG9yL3ZhbGlkYXRvci5wcm90by5cbiAgICBmaWx0ZXI6IGhhc2hRdWVyeVsnZmlsdGVyJ10sXG4gICAgLy8gYW1wLWdlbyBvdmVycmlkZVxuICAgIGdlb092ZXJyaWRlOiBoYXNoUXVlcnlbJ2FtcC1nZW8nXSxcbiAgICBtaW5pZmllZDogSVNfTUlOSUZJRUQsXG4gICAgLy8gV2hldGhlciBkb2N1bWVudCBpcyBpbiBhbiBhbXAtbGl0ZSB2aWV3ZXIuIEl0IHNpZ25hbCB0aGF0IHRoZSB1c2VyXG4gICAgLy8gd291bGQgcHJlZmVyIHRvIHVzZSBsZXNzIGJhbmR3aWR0aC5cbiAgICBsaXRlOiBzZWFyY2hRdWVyeVsnYW1wX2xpdGUnXSAhPSB1bmRlZmluZWQsXG4gICAgdGVzdDogcnVubmluZ1Rlc3RzLFxuICAgIGxvZzogaGFzaFF1ZXJ5Wydsb2cnXSxcbiAgICB2ZXJzaW9uLFxuICAgIHJ0dlZlcnNpb24sXG4gIH07XG59XG5cbi8qKlxuICogUmV0cmlldmUgdGhlIGBydHZWZXJzaW9uYCB3aGljaCB3aWxsIGhhdmUgYSBudW1lcmljIHByZWZpeFxuICogZGVub3RpbmcgY2FuYXJ5L3Byb2QvZXhwZXJpbWVudCAodW5sZXNzIGBpc0xvY2FsRGV2YCBpcyB0cnVlKS5cbiAqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtib29sZWFufSBpc0xvY2FsRGV2XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGdldFJ0dlZlcnNpb24od2luLCBpc0xvY2FsRGV2KSB7XG4gIC8vIElmIGl0J3MgbG9jYWwgZGV2IHRoZW4gd2Ugd29uJ3QgYWN0dWFsbHkgaGF2ZSBhIGZ1bGwgdmVyc2lvbiBzb1xuICAvLyBqdXN0IHVzZSB0aGUgdmVyc2lvbi5cbiAgaWYgKGlzTG9jYWxEZXYpIHtcbiAgICByZXR1cm4gdmVyc2lvbjtcbiAgfVxuXG4gIGlmICh3aW4uQU1QX0NPTkZJRyAmJiB3aW4uQU1QX0NPTkZJRy52KSB7XG4gICAgcmV0dXJuIHdpbi5BTVBfQ09ORklHLnY7XG4gIH1cblxuICAvLyBDdXJyZW50bHkgYCRpbnRlcm5hbFJ1bnRpbWVWZXJzaW9uJGAgYW5kIHRodXMgYG1vZGUudmVyc2lvbmAgY29udGFpbiBvbmx5XG4gIC8vIG1ham9yIHZlcnNpb24uIFRoZSBmdWxsIHZlcnNpb24gaG93ZXZlciBtdXN0IGFsc28gY2FycnkgdGhlIG1pbm9yIHZlcnNpb24uXG4gIC8vIFdlIHdpbGwgZGVmYXVsdCB0byBwcm9kdWN0aW9uIGRlZmF1bHQgYDAxYCBtaW5vciB2ZXJzaW9uIGZvciBub3cuXG4gIC8vIFRPRE8oZXJ3aW5tb21iYXkpOiBkZWNpZGUgd2hldGhlciAkaW50ZXJuYWxSdW50aW1lVmVyc2lvbiQgc2hvdWxkIGNvbnRhaW5cbiAgLy8gbWlub3IgdmVyc2lvbi5cbiAgcmV0dXJuIGAwMSR7dmVyc2lvbn1gO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNMb2NhbERldlxuICogQHJldHVybiB7c3RyaW5nfVxuICogQHZpc2libGVGb3JUZXN0aW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSdHZWZXJzaW9uRm9yVGVzdGluZyh3aW4sIGlzTG9jYWxEZXYpIHtcbiAgcmV0dXJuIGdldFJ0dlZlcnNpb24od2luLCBpc0xvY2FsRGV2KTtcbn1cblxuXG4vKiogQHZpc2libGVGb3JUZXN0aW5nICovXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRSdHZWZXJzaW9uRm9yVGVzdGluZygpIHtcbiAgcnR2VmVyc2lvbiA9ICcnO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cblxuXG4vKipcbiAqIFRoaXMgY2xhc3MgaGVscHMgdG8gbWFuYWdlIG9ic2VydmVycy4gT2JzZXJ2ZXJzIGNhbiBiZSBhZGRlZCwgcmVtb3ZlZCBvclxuICogZmlyZWQgdGhyb3VnaCBhbmQgaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAqIEB0ZW1wbGF0ZSBUWVBFXG4gKi9cbmV4cG9ydCBjbGFzcyBPYnNlcnZhYmxlIHtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBPYnNlcnZhYmxlLlxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLyoqIEB0eXBlIHs/QXJyYXk8ZnVuY3Rpb24oVFlQRSk+fSAqL1xuICAgIHRoaXMuaGFuZGxlcnNfID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHRoZSBvYnNlcnZlciB0byB0aGlzIGluc3RhbmNlLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKFRZUEUpfSBoYW5kbGVyIE9ic2VydmVyJ3MgaGFuZGxlci5cbiAgICogQHJldHVybiB7IVVubGlzdGVuRGVmfVxuICAgKi9cbiAgYWRkKGhhbmRsZXIpIHtcbiAgICBpZiAoIXRoaXMuaGFuZGxlcnNfKSB7XG4gICAgICB0aGlzLmhhbmRsZXJzXyA9IFtdO1xuICAgIH1cbiAgICB0aGlzLmhhbmRsZXJzXy5wdXNoKGhhbmRsZXIpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB0aGlzLnJlbW92ZShoYW5kbGVyKTtcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgdGhlIG9ic2VydmVyIGZyb20gdGhpcyBpbnN0YW5jZS5cbiAgICogQHBhcmFtIHtmdW5jdGlvbihUWVBFKX0gaGFuZGxlciBPYnNlcnZlcidzIGluc3RhbmNlLlxuICAgKi9cbiAgcmVtb3ZlKGhhbmRsZXIpIHtcbiAgICBpZiAoIXRoaXMuaGFuZGxlcnNfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5oYW5kbGVyc18uaW5kZXhPZihoYW5kbGVyKTtcbiAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgdGhpcy5oYW5kbGVyc18uc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhbGwgb2JzZXJ2ZXJzLlxuICAgKi9cbiAgcmVtb3ZlQWxsKCkge1xuICAgIGlmICghdGhpcy5oYW5kbGVyc18pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5oYW5kbGVyc18ubGVuZ3RoID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaXJlcyBhbiBldmVudC4gQWxsIG9ic2VydmVycyBhcmUgY2FsbGVkLlxuICAgKiBAcGFyYW0ge1RZUEU9fSBvcHRfZXZlbnRcbiAgICovXG4gIGZpcmUob3B0X2V2ZW50KSB7XG4gICAgaWYgKCF0aGlzLmhhbmRsZXJzXykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnNfO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGFuZGxlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGhhbmRsZXIgPSBoYW5kbGVyc1tpXTtcbiAgICAgIGhhbmRsZXIob3B0X2V2ZW50KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBudW1iZXIgb2YgaGFuZGxlcnMuIE1vc3RseSBuZWVkZWQgZm9yIHRlc3RzLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICBnZXRIYW5kbGVyQ291bnQoKSB7XG4gICAgaWYgKCF0aGlzLmhhbmRsZXJzXykge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmhhbmRsZXJzXy5sZW5ndGg7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge2NyZWF0ZUVsZW1lbnRXaXRoQXR0cmlidXRlc30gZnJvbSAnLi4vc3JjL2RvbSc7XG5pbXBvcnQge2RpY3R9IGZyb20gJy4uL3NyYy91dGlscy9vYmplY3QnO1xuaW1wb3J0IHt1c2VyfSBmcm9tICcuLi9zcmMvbG9nJztcblxuLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuY29uc3QgVEFHID0gJ3BpeGVsJztcblxuLyoqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IHNyY1xuICogQHBhcmFtIHs/c3RyaW5nPX0gcmVmZXJyZXJQb2xpY3lcbiAqIEByZXR1cm4geyFFbGVtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUGl4ZWwod2luLCBzcmMsIHJlZmVycmVyUG9saWN5KSB7XG4gIGlmIChyZWZlcnJlclBvbGljeSAmJiByZWZlcnJlclBvbGljeSAhPT0gJ25vLXJlZmVycmVyJykge1xuICAgIHVzZXIoKS5lcnJvcihUQUcsICdVbnN1cHBvcnRlZCByZWZlcnJlclBvbGljeTogJyArIHJlZmVycmVyUG9saWN5KTtcbiAgfVxuXG4gIHJldHVybiByZWZlcnJlclBvbGljeSA9PT0gJ25vLXJlZmVycmVyJ1xuICAgID8gY3JlYXRlTm9SZWZlcnJlclBpeGVsKHdpbiwgc3JjKVxuICAgIDogY3JlYXRlSW1hZ2VQaXhlbCh3aW4sIHNyYyk7XG59XG5cbi8qKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzcmNcbiAqIEByZXR1cm4geyFFbGVtZW50fVxuICovXG5mdW5jdGlvbiBjcmVhdGVOb1JlZmVycmVyUGl4ZWwod2luLCBzcmMpIHtcbiAgaWYgKGlzUmVmZXJyZXJQb2xpY3lTdXBwb3J0ZWQoKSkge1xuICAgIHJldHVybiBjcmVhdGVJbWFnZVBpeGVsKHdpbiwgc3JjLCB0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBpZiBcInJlZmVycmVyUG9saWN5XCIgaXMgbm90IHN1cHBvcnRlZCwgdXNlIGlmcmFtZSB3cmFwcGVyXG4gICAgLy8gdG8gc2NydWIgdGhlIHJlZmVycmVyLlxuICAgIGNvbnN0IGlmcmFtZSA9IGNyZWF0ZUVsZW1lbnRXaXRoQXR0cmlidXRlcyhcbiAgICAgICAgLyoqIEB0eXBlIHshRG9jdW1lbnR9ICovICh3aW4uZG9jdW1lbnQpLCAnaWZyYW1lJywgZGljdCh7XG4gICAgICAgICAgJ3NyYyc6ICdhYm91dDpibGFuaycsXG4gICAgICAgICAgJ3N0eWxlJzogJ2Rpc3BsYXk6bm9uZScsXG4gICAgICAgIH0pKTtcbiAgICB3aW4uZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpZnJhbWUpO1xuICAgIGNyZWF0ZUltYWdlUGl4ZWwoaWZyYW1lLmNvbnRlbnRXaW5kb3csIHNyYyk7XG4gICAgcmV0dXJuIGlmcmFtZTtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gc3JjXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBub1JlZmVycmVyXG4gKiBAcmV0dXJuIHshSW1hZ2V9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUltYWdlUGl4ZWwod2luLCBzcmMsIG5vUmVmZXJyZXIgPSBmYWxzZSkge1xuICBjb25zdCBpbWFnZSA9IG5ldyB3aW4uSW1hZ2UoKTtcbiAgaWYgKG5vUmVmZXJyZXIpIHtcbiAgICBpbWFnZS5yZWZlcnJlclBvbGljeSA9ICduby1yZWZlcnJlcic7XG4gIH1cbiAgaW1hZ2Uuc3JjID0gc3JjO1xuICByZXR1cm4gaW1hZ2U7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgZWxlbWVudCBhdHRyaWJ1dGUgXCJyZWZlcnJlclBvbGljeVwiIGlzIHN1cHBvcnRlZCBieSB0aGUgYnJvd3Nlci5cbiAqIFNhZmFyaSAxMS4xIGRvZXMgbm90IHN1cHBvcnQgaXQgeWV0LlxuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzUmVmZXJyZXJQb2xpY3lTdXBwb3J0ZWQoKSB7XG4gIHJldHVybiAncmVmZXJyZXJQb2xpY3knIGluIEltYWdlLnByb3RvdHlwZTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge2dldE1vZGV9IGZyb20gJy4vbW9kZSc7XG5pbXBvcnQge2luc3RhbGwgYXMgaW5zdGFsbEFycmF5SW5jbHVkZXN9IGZyb20gJy4vcG9seWZpbGxzL2FycmF5LWluY2x1ZGVzJztcbmltcG9ydCB7aW5zdGFsbCBhcyBpbnN0YWxsQ3VzdG9tRWxlbWVudHN9IGZyb20gJy4vcG9seWZpbGxzL2N1c3RvbS1lbGVtZW50cyc7XG5pbXBvcnQge1xuICBpbnN0YWxsIGFzIGluc3RhbGxET01Ub2tlbkxpc3RUb2dnbGUsXG59IGZyb20gJy4vcG9seWZpbGxzL2RvbXRva2VubGlzdC10b2dnbGUnO1xuaW1wb3J0IHtpbnN0YWxsIGFzIGluc3RhbGxEb2NDb250YWluc30gZnJvbSAnLi9wb2x5ZmlsbHMvZG9jdW1lbnQtY29udGFpbnMnO1xuaW1wb3J0IHtpbnN0YWxsIGFzIGluc3RhbGxNYXRoU2lnbn0gZnJvbSAnLi9wb2x5ZmlsbHMvbWF0aC1zaWduJztcbmltcG9ydCB7aW5zdGFsbCBhcyBpbnN0YWxsT2JqZWN0QXNzaWdufSBmcm9tICcuL3BvbHlmaWxscy9vYmplY3QtYXNzaWduJztcbmltcG9ydCB7aW5zdGFsbCBhcyBpbnN0YWxsUHJvbWlzZX0gZnJvbSAnLi9wb2x5ZmlsbHMvcHJvbWlzZSc7XG5pbXBvcnQge2luc3RhbGxDdXN0b21FbGVtZW50cyBhcyBpbnN0YWxsUmVnaXN0ZXJFbGVtZW50fSBmcm9tXG4gICdkb2N1bWVudC1yZWdpc3Rlci1lbGVtZW50L2J1aWxkL2RvY3VtZW50LXJlZ2lzdGVyLWVsZW1lbnQucGF0Y2hlZCc7XG5pbXBvcnQge2lzRXhwZXJpbWVudE9ufSBmcm9tICcuL2V4cGVyaW1lbnRzJztcblxuaWYgKGlzRXhwZXJpbWVudE9uKHNlbGYsICdjdXN0b20tZWxlbWVudHMtdjEnKSB8fCBnZXRNb2RlKCkudGVzdCkge1xuICBpbnN0YWxsQ3VzdG9tRWxlbWVudHMoc2VsZiwgY2xhc3Mge30pO1xufSBlbHNlIHtcbiAgaW5zdGFsbFJlZ2lzdGVyRWxlbWVudChzZWxmLCAnYXV0bycpO1xufVxuaW5zdGFsbERPTVRva2VuTGlzdFRvZ2dsZShzZWxmKTtcbmluc3RhbGxNYXRoU2lnbihzZWxmKTtcbmluc3RhbGxPYmplY3RBc3NpZ24oc2VsZik7XG5pbnN0YWxsUHJvbWlzZShzZWxmKTtcbmluc3RhbGxEb2NDb250YWlucyhzZWxmKTtcbmluc3RhbGxBcnJheUluY2x1ZGVzKHNlbGYpO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGVsZW1lbnQgaXMgaW4gdGhlIGFycmF5IGFuZCBmYWxzZSBvdGhlcndpc2UuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZnJvbUluZGV4XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICogQHRoaXMge0FycmF5fVxuICovXG5mdW5jdGlvbiBpbmNsdWRlcyh2YWx1ZSwgb3B0X2Zyb21JbmRleCkge1xuICBjb25zdCBmcm9tSW5kZXggPSBvcHRfZnJvbUluZGV4IHx8IDA7XG4gIGNvbnN0IGxlbiA9IHRoaXMubGVuZ3RoO1xuICBsZXQgaSA9IGZyb21JbmRleCA+PSAwID8gZnJvbUluZGV4IDogTWF0aC5tYXgobGVuICsgZnJvbUluZGV4LCAwKTtcbiAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgIGNvbnN0IG90aGVyID0gdGhpc1tpXTtcbiAgICAvLyBJZiB2YWx1ZSBoYXMgYmVlbiBmb3VuZCBPUiAodmFsdWUgaXMgTmFOIEFORCBvdGhlciBpcyBOYU4pXG4gICAgLyplc2xpbnQgXCJuby1zZWxmLWNvbXBhcmVcIjogMCovXG4gICAgaWYgKG90aGVyID09PSB2YWx1ZSB8fCAodmFsdWUgIT09IHZhbHVlICYmIG90aGVyICE9PSBvdGhlcikpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuKiBTZXRzIHRoZSBBcnJheS5jb250YWlucyBwb2x5ZmlsbCBpZiBpdCBkb2VzIG5vdCBleGlzdC5cbiogQHBhcmFtIHshV2luZG93fSB3aW5cbiovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbCh3aW4pIHtcbiAgaWYgKCF3aW4uQXJyYXkucHJvdG90eXBlLmluY2x1ZGVzKSB7XG4gICAgd2luLk9iamVjdC5kZWZpbmVQcm9wZXJ0eShBcnJheS5wcm90b3R5cGUsICdpbmNsdWRlcycsIHtcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogaW5jbHVkZXMsXG4gICAgfSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHt7XG4gKiAgIHByb21pc2U6ICFQcm9taXNlPHVuZGVmaW5lZD4sXG4gKiAgIHJlc29sdmU6IGZ1bmN0aW9uKCksXG4gKiB9fVxuICovXG5sZXQgRGVmZXJyZWREZWY7XG5cbi8qKlxuICogQHR5cGVkZWYgeyFGdW5jdGlvbn1cbiAqL1xubGV0IEN1c3RvbUVsZW1lbnRDb25zdHJ1Y3RvckRlZjtcblxuLyoqXG4gKiBAdHlwZWRlZiB7e1xuICogIG5hbWU6IHN0cmluZyxcbiAqICBjdG9yOiAhQ3VzdG9tRWxlbWVudENvbnN0cnVjdG9yRGVmLFxuICogfX1cbiAqL1xubGV0IEN1c3RvbUVsZW1lbnREZWY7XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoZSBjdXN0b20gZWxlbWVudCdzIG5hbWUuXG4gKiBUaGlzIGludGVudGlvbmFsbHkgaWdub3JlcyBcInZhbGlkXCIgaGlnaGVyIFVuaWNvZGUgQ29kZSBQb2ludHMuXG4gKiBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9jdXN0b20tZWxlbWVudHMuaHRtbCN2YWxpZC1jdXN0b20tZWxlbWVudC1uYW1lXG4gKi9cbmNvbnN0IFZBTElEX05BTUUgPSAvXlthLXpdW2EtejAtOS5fXSotW2EtejAtOS5fLV0qJC87XG5jb25zdCBJTlZBTElEX05BTUVTID0gW1xuICAnYW5ub3RhdGlvbi14bWwnLFxuICAnY29sb3ItcHJvZmlsZScsXG4gICdmb250LWZhY2UnLFxuICAnZm9udC1mYWNlLXNyYycsXG4gICdmb250LWZhY2UtdXJpJyxcbiAgJ2ZvbnQtZmFjZS1mb3JtYXQnLFxuICAnZm9udC1mYWNlLW5hbWUnLFxuICAnbWlzc2luZy1nbHlwaCcsXG5dO1xuXG4vKipcbiAqIEFzc2VydHMgdGhhdCB0aGUgY3VzdG9tIGVsZW1lbnQgbmFtZSBjb25mb3JtcyB0byB0aGUgc3BlYy5cbiAqXG4gKiBAcGFyYW0geyFGdW5jdGlvbn0gU3ludGF4RXJyb3JcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gKi9cbmZ1bmN0aW9uIGFzc2VydFZhbGlkTmFtZShTeW50YXhFcnJvciwgbmFtZSkge1xuICBpZiAoIVZBTElEX05BTUUudGVzdChuYW1lKSB8fCBJTlZBTElEX05BTUVTLmluZGV4T2YobmFtZSkgPj0gMCkge1xuICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihgaW52YWxpZCBjdXN0b20gZWxlbWVudCBuYW1lIFwiJHtuYW1lfVwiYCk7XG4gIH1cbn1cblxuLyoqXG4gKiBEb2VzIHdpbiBoYXZlIGEgZnVsbCBDdXN0b20gRWxlbWVudHMgcmVnaXN0cnk/XG4gKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGhhc0N1c3RvbUVsZW1lbnRzKHdpbikge1xuICBjb25zdCB7Y3VzdG9tRWxlbWVudHN9ID0gd2luO1xuXG4gIHJldHVybiAhIShcbiAgICBjdXN0b21FbGVtZW50cyAmJlxuICAgIGN1c3RvbUVsZW1lbnRzLmRlZmluZSAmJlxuICAgIGN1c3RvbUVsZW1lbnRzLmdldCAmJlxuICAgIGN1c3RvbUVsZW1lbnRzLndoZW5EZWZpbmVkKTtcbn1cblxuLyoqXG4gKiBXYXMgSFRNTEVsZW1lbnQgYWxyZWFkeSBwYXRjaGVkIGZvciB0aGlzIHdpbmRvdz9cbiAqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNQYXRjaGVkKHdpbikge1xuICBjb25zdCB0YWcgPSB3aW4uSFRNTEVsZW1lbnQudG9TdHJpbmcoKTtcbiAgcmV0dXJuIHRhZy5pbmRleE9mKCdbbmF0aXZlIGNvZGVdJykgPT09IC0xO1xufVxuXG4vKipcbiAqIFRoZSBwdWJsaWMgQ3VzdG9tIEVsZW1lbnRzIEFQSS5cbiAqL1xuY2xhc3MgQ3VzdG9tRWxlbWVudFJlZ2lzdHJ5IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEBwYXJhbSB7IVJlZ2lzdHJ5fSByZWdpc3RyeVxuICAgKi9cbiAgY29uc3RydWN0b3Iod2luLCByZWdpc3RyeSkge1xuICAgIC8qKlxuICAgICAqIEBjb25zdCBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMud2luXyA9IHdpbjtcblxuICAgIC8qKlxuICAgICAqIEBjb25zdCBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMucmVnaXN0cnlfID0gcmVnaXN0cnk7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIERlZmVycmVkRGVmPn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBjb25zdFxuICAgICAqL1xuICAgIHRoaXMucGVuZGluZ0RlZmluZXNfID0gdGhpcy53aW5fLk9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXIgdGhlIGN1c3RvbSBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcGFyYW0geyFDdXN0b21FbGVtZW50Q29uc3RydWN0b3JEZWZ9IGN0b3JcbiAgICogQHBhcmFtIHshT2JqZWN0PX0gb3B0aW9uc1xuICAgKi9cbiAgZGVmaW5lKG5hbWUsIGN0b3IsIG9wdGlvbnMpIHtcbiAgICB0aGlzLnJlZ2lzdHJ5Xy5kZWZpbmUobmFtZSwgY3Rvciwgb3B0aW9ucyk7XG5cbiAgICAvLyBJZiBhbnlvbmUgaXMgd2FpdGluZyBmb3IgdGhpcyBjdXN0b20gZWxlbWVudCB0byBiZSBkZWZpbmVkLCByZXNvbHZlXG4gICAgLy8gdGhlaXIgcHJvbWlzZS5cbiAgICBjb25zdCBwZW5kaW5nID0gdGhpcy5wZW5kaW5nRGVmaW5lc187XG4gICAgY29uc3QgZGVmZXJyZWQgPSBwZW5kaW5nW25hbWVdO1xuICAgIGlmIChkZWZlcnJlZCkge1xuICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgZGVsZXRlIHBlbmRpbmdbbmFtZV07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY29uc3RydWN0b3Igb2YgdGhlIChhbHJlYWR5IGRlZmluZWQpIGN1c3RvbSBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcmV0dXJuIHshQ3VzdG9tRWxlbWVudENvbnN0cnVjdG9yRGVmfHVuZGVmaW5lZH1cbiAgICovXG4gIGdldChuYW1lKSB7XG4gICAgY29uc3QgZGVmID0gdGhpcy5yZWdpc3RyeV8uZ2V0QnlOYW1lKG5hbWUpO1xuICAgIGlmIChkZWYpIHtcbiAgICAgIHJldHVybiBkZWYuY3RvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHByb21pc2UgdGhhdCB3YWl0cyB1bnRpbCB0aGUgY3VzdG9tIGVsZW1lbnQgaXMgZGVmaW5lZC5cbiAgICogSWYgdGhlIGN1c3RvbSBlbGVtZW50IGlzIGFscmVhZHkgZGVmaW5lZCwgcmV0dXJucyBhIHJlc29sdmVkIHByb21pc2UuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEByZXR1cm4geyFQcm9taXNlPHVuZGVmaW5lZD59XG4gICAqL1xuICB3aGVuRGVmaW5lZChuYW1lKSB7XG4gICAgY29uc3Qge1Byb21pc2UsIFN5bnRheEVycm9yfSA9IHRoaXMud2luXztcbiAgICBhc3NlcnRWYWxpZE5hbWUoU3ludGF4RXJyb3IsIG5hbWUpO1xuXG4gICAgaWYgKHRoaXMucmVnaXN0cnlfLmdldEJ5TmFtZShuYW1lKSkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IHBlbmRpbmcgPSB0aGlzLnBlbmRpbmdEZWZpbmVzXztcbiAgICBjb25zdCBkZWZlcnJlZCA9IHBlbmRpbmdbbmFtZV07XG4gICAgaWYgKGRlZmVycmVkKSB7XG4gICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9XG5cbiAgICBsZXQgcmVzb2x2ZTtcbiAgICBjb25zdCBwcm9taXNlID0gbmV3IC8qT0sqL1Byb21pc2UocmVzID0+IHJlc29sdmUgPSByZXMpO1xuICAgIHBlbmRpbmdbbmFtZV0gPSB7XG4gICAgICBwcm9taXNlLFxuICAgICAgcmVzb2x2ZSxcbiAgICB9O1xuXG4gICAgcmV0dXJuIHByb21pc2U7XG4gIH1cblxuICAvKipcbiAgICogVXBncmFkZSBhbGwgY3VzdG9tIGVsZW1lbnRzIGluc2lkZSByb290LlxuICAgKlxuICAgKiBAcGFyYW0geyFOb2RlfSByb290XG4gICAqL1xuICB1cGdyYWRlKHJvb3QpIHtcbiAgICB0aGlzLnJlZ2lzdHJ5Xy51cGdyYWRlKHJvb3QpO1xuICB9XG59XG5cbi8qKlxuICogVGhpcyBpbnRlcm5hbCBBUElzIG5lY2Vzc2FyeSB0byBydW4gdGhlIEN1c3RvbUVsZW1lbnRSZWdpc3RyeS5cbiAqIFNpbmNlIFJlZ2lzdHJ5IGlzIG5ldmVyIGV4cG9zZWQgZXh0ZXJuYWxseSwgYWxsIG1ldGhvZHMgYXJlIGFjdHVhbGx5XG4gKiBhdmFpbGFibGUgb24gdGhlIGluc3RhbmNlLlxuICovXG5jbGFzcyBSZWdpc3RyeSB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKi9cbiAgY29uc3RydWN0b3Iod2luKSB7XG4gICAgLyoqXG4gICAgICogQHByaXZhdGUgQGNvbnN0XG4gICAgICovXG4gICAgdGhpcy53aW5fID0gd2luO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGUgQGNvbnN0XG4gICAgICovXG4gICAgdGhpcy5kb2NfID0gd2luLmRvY3VtZW50O1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCAhQ3VzdG9tRWxlbWVudERlZj59XG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAY29uc3RcbiAgICAgKi9cbiAgICB0aGlzLmRlZmluaXRpb25zXyA9IHdpbi5PYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gICAgLyoqXG4gICAgICogQSB1cC10by1kYXRlIERPTSBzZWxlY3RvciBmb3IgYWxsIGN1c3RvbSBlbGVtZW50cy5cbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIHRoaXMucXVlcnlfID0gJyc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudGx5IHVwZ3JhZGluZyBlbGVtZW50LlxuICAgICAqIEBwcml2YXRlIHtFbGVtZW50fVxuICAgICAqL1xuICAgIHRoaXMuY3VycmVudF8gPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50bHktYmVpbmctdXBncmFkZWQgY3VzdG9tIGVsZW1lbnQuXG4gICAqXG4gICAqIFdoZW4gYW4gYWxyZWFkeSBjcmVhdGVkICh0aHJvdWdoIHRoZSBET00gcGFyc2luZyBBUElzLCBvciBpbm5lckhUTUwpXG4gICAqIGN1c3RvbSBlbGVtZW50IG5vZGUgaXMgYmVpbmcgdXBncmFkZWQsIHdlIGNhbid0IGp1c3QgY3JlYXRlIGEgbmV3IG5vZGVcbiAgICogKGl0J3MgaWxsZWdhbCBpbiB0aGUgc3BlYykuIEJ1dCB3ZSBzdGlsbCBuZWVkIHRvIHJ1biB0aGUgY3VzdG9tIGVsZW1lbnQnc1xuICAgKiBjb25zdHJ1Y3RvciBjb2RlIG9uIHRoZSBub2RlLiBXZSBhdm9pZCB0aGlzIGNvbnVuZHJ1bSBieSBydW5uaW5nIHRoZVxuICAgKiBjb25zdHJ1Y3RvciB3aGlsZSByZXR1cm5pbmcgdGhpcyBjdXJyZW50IG5vZGUgaW4gdGhlIEhUTUxFbGVtZW50XG4gICAqIGNsYXNzIGNvbnN0cnVjdG9yICh0aGUgYmFzZSBjbGFzcyBvZiBhbGwgY3VzdG9tIGVsZW1lbnRzKS5cbiAgICpcbiAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICovXG4gIGN1cnJlbnQoKSB7XG4gICAgY29uc3QgY3VycmVudCA9IHRoaXMuY3VycmVudF87XG4gICAgdGhpcy5jdXJyZW50XyA9IG51bGw7XG4gICAgcmV0dXJuIGN1cnJlbnQ7XG4gIH1cblxuICAvKipcbiAgICogRmluZHMgdGhlIGN1c3RvbSBlbGVtZW50IGRlZmluaXRpb24gYnkgbmFtZS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICogQHJldHVybiB7Q3VzdG9tRWxlbWVudERlZnx1bmRlZmluZWR9XG4gICAqL1xuICBnZXRCeU5hbWUobmFtZSkge1xuICAgIGNvbnN0IGRlZmluaXRpb24gPSB0aGlzLmRlZmluaXRpb25zX1tuYW1lXTtcbiAgICBpZiAoZGVmaW5pdGlvbikge1xuICAgICAgcmV0dXJuIGRlZmluaXRpb247XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZpbmRzIHRoZSBjdXN0b20gZWxlbWVudCBkZWZpbml0aW9uIGJ5IGNvbnN0cnVjdG9yIGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0ge0N1c3RvbUVsZW1lbnRDb25zdHJ1Y3RvckRlZn0gY3RvclxuICAgKiBAcmV0dXJuIHtDdXN0b21FbGVtZW50RGVmfHVuZGVmaW5lZH1cbiAgICovXG4gIGdldEJ5Q29uc3RydWN0b3IoY3Rvcikge1xuICAgIGNvbnN0IGRlZmluaXRpb25zID0gdGhpcy5kZWZpbml0aW9uc187XG5cbiAgICBmb3IgKGNvbnN0IG5hbWUgaW4gZGVmaW5pdGlvbnMpIHtcbiAgICAgIGNvbnN0IGRlZiA9IGRlZmluaXRpb25zW25hbWVdO1xuICAgICAgaWYgKGRlZi5jdG9yID09PSBjdG9yKSB7XG4gICAgICAgIHJldHVybiBkZWY7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyB0aGUgY3VzdG9tIGVsZW1lbnQgZGVmaW5pdGlvbiwgYW5kIHVwZ3JhZGVzIGFsbCBlbGVtZW50cyBieSB0aGF0XG4gICAqIG5hbWUgaW4gdGhlIHJvb3QgZG9jdW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEBwYXJhbSB7IUN1c3RvbUVsZW1lbnRDb25zdHJ1Y3RvckRlZn0gY3RvclxuICAgKiBAcGFyYW0geyFPYmplY3R8dW5kZWZpbmVkfSBvcHRpb25zXG4gICAqL1xuICBkZWZpbmUobmFtZSwgY3Rvciwgb3B0aW9ucykge1xuICAgIGNvbnN0IHtFcnJvciwgU3ludGF4RXJyb3J9ID0gdGhpcy53aW5fO1xuXG4gICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRXh0ZW5kaW5nIG5hdGl2ZSBjdXN0b20gZWxlbWVudHMgaXMgbm90IHN1cHBvcnRlZCcpO1xuICAgIH1cblxuICAgIGFzc2VydFZhbGlkTmFtZShTeW50YXhFcnJvciwgbmFtZSk7XG5cbiAgICBpZiAodGhpcy5nZXRCeU5hbWUobmFtZSkgfHxcbiAgICAgICAgdGhpcy5nZXRCeUNvbnN0cnVjdG9yKGN0b3IpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYGR1cGxpY2F0ZSBkZWZpbml0aW9uIFwiJHtuYW1lfVwiYCk7XG4gICAgfVxuXG4gICAgLy8gVE9ETyhqcmlkZ2V3ZWxsKTogUmVjb3JkIGNvbm5lY3RlZENhbGxiYWNrLCBkaXNjb25uZWN0ZWRDYWxsYmFjayxcbiAgICAvLyBhZG9wdGVkQ2FsbGJhY2ssIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjaywgYW5kIG9ic2VydmVkQXR0cmlidXRlcy5cbiAgICAvLyBUT0RPKGpyaWRnZXdlbGwpOiBJZiBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2ssIGdhdGhlciBvYnNlcnZlZEF0dHJpYnV0ZXNcbiAgICB0aGlzLmRlZmluaXRpb25zX1tuYW1lXSA9IHtcbiAgICAgIG5hbWUsXG4gICAgICBjdG9yLFxuICAgIH07XG5cbiAgICB0aGlzLm9ic2VydmVfKG5hbWUpO1xuICAgIHRoaXMudXBncmFkZSh0aGlzLmRvY18sIG5hbWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZ3JhZGVzIGN1c3RvbSBlbGVtZW50cyBkZXNjZW5kYW50cyBvZiByb290IChidXQgbm90IGluY2x1ZGluZyByb290KS5cbiAgICpcbiAgICogV2hlbiBjYWxsZWQgd2l0aCBhbiBvcHRfcXVlcnksIGl0IGJvdGggdXBncmFkZXMgYW5kIGNvbm5lY3RzIHRoZSBjdXN0b21cbiAgICogZWxlbWVudHMgKHRoaXMgaXMgdXNlZCBkdXJpbmcgdGhlIGN1c3RvbSBlbGVtZW50IGRlZmluZSBhbGdvcml0aG0pLlxuICAgKlxuICAgKiBAcGFyYW0geyFOb2RlfSByb290XG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X3F1ZXJ5XG4gICAqL1xuICB1cGdyYWRlKHJvb3QsIG9wdF9xdWVyeSkge1xuICAgIC8vIE9ubHkgQ3VzdG9tRWxlbWVudFJlZ2lzdHJ5LnAuZGVmaW5lIHByb3ZpZGVzIGEgcXVlcnkgKHRoZSBuZXdseSBkZWZpbmVkXG4gICAgLy8gY3VzdG9tIGVsZW1lbnQpLiBJbiB0aGlzIGNhc2UsIHdlIGFyZSBib3RoIHVwZ3JhZGluZyBfYW5kXyBjb25uZWN0aW5nXG4gICAgLy8gdGhlIGN1c3RvbSBlbGVtZW50cy5cbiAgICBjb25zdCBuZXdseURlZmluZWQgPSAhIW9wdF9xdWVyeTtcbiAgICBjb25zdCBxdWVyeSA9IG9wdF9xdWVyeSB8fCB0aGlzLnF1ZXJ5XztcbiAgICBjb25zdCB1cGdyYWRlQ2FuZGlkYXRlcyA9IHRoaXMucXVlcnlBbGxfKHJvb3QsIHF1ZXJ5KTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdXBncmFkZUNhbmRpZGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGNhbmRpZGF0ZSA9IHVwZ3JhZGVDYW5kaWRhdGVzW2ldO1xuICAgICAgaWYgKG5ld2x5RGVmaW5lZCkge1xuICAgICAgICB0aGlzLmNvbm5lY3RlZENhbGxiYWNrXyhjYW5kaWRhdGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy51cGdyYWRlU2VsZihjYW5kaWRhdGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGdyYWRlcyB0aGUgY3VzdG9tIGVsZW1lbnQgbm9kZSwgaWYgYSBjdXN0b20gZWxlbWVudCBoYXMgYmVlbiByZWdpc3RlcmVkXG4gICAqIGJ5IHRoaXMgbmFtZS5cbiAgICpcbiAgICogQHBhcmFtIHshTm9kZX0gbm9kZVxuICAgKi9cbiAgdXBncmFkZVNlbGYobm9kZSkge1xuICAgIGNvbnN0IGRlZiA9IHRoaXMuZ2V0QnlOYW1lKG5vZGUubG9jYWxOYW1lKTtcbiAgICBpZiAoIWRlZikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMudXBncmFkZVNlbGZfKC8qKiBAdHlwZSB7IUVsZW1lbnR9ICovKG5vZGUpLCBkZWYpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IU5vZGV9IHJvb3RcbiAgICogQHBhcmFtIHtzdHJpbmd9IHF1ZXJ5XG4gICAqIEByZXR1cm4geyFBcnJheXwhTm9kZUxpc3R9XG4gICAqL1xuICBxdWVyeUFsbF8ocm9vdCwgcXVlcnkpIHtcbiAgICBpZiAoIXF1ZXJ5IHx8ICFyb290LnF1ZXJ5U2VsZWN0b3JBbGwpIHtcbiAgICAgIC8vIE5vdGhpbmcgdG8gZG8uLi5cbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICByZXR1cm4gcm9vdC5xdWVyeVNlbGVjdG9yQWxsKHF1ZXJ5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGdyYWRlcyB0aGUgKGFscmVhZHkgY3JlYXRlZCB2aWEgRE9NIHBhcnNpbmcpIGN1c3RvbSBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fSBub2RlXG4gICAqIEBwYXJhbSB7IUN1c3RvbUVsZW1lbnREZWZ9IGRlZlxuICAgKi9cbiAgdXBncmFkZVNlbGZfKG5vZGUsIGRlZikge1xuICAgIGNvbnN0IHtjdG9yfSA9IGRlZjtcbiAgICBpZiAobm9kZSBpbnN0YW5jZW9mIGN0b3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBEZXNwaXRlIGhvdyBpdCBsb29rcywgdGhpcyBpcyBub3QgYSB1c2VsZXNzIGNvbnN0cnVjdGlvbi5cbiAgICAvLyBIVE1MRWxlbWVudFBvbHlmaWxsICh0aGUgYmFzZSBjbGFzcyBvZiBhbGwgY3VzdG9tIGVsZW1lbnRzKSB3aWxsIHJldHVyblxuICAgIC8vIHRoZSBjdXJyZW50IG5vZGUsIGFsbG93aW5nIHRoZSBjdXN0b20gZWxlbWVudCdzIHN1YmNsYXNzIGNvbnN0cnVjdG9yIHRvXG4gICAgLy8gcnVuIG9uIHRoZSBub2RlLiBUaGUgbm9kZSBpdHNlbGYgaXMgYWxyZWFkeSBjb25zdHJ1Y3RlZCwgc28gdGhlIHJldHVyblxuICAgIC8vIHZhbHVlIGlzIGp1c3QgdGhlIG5vZGUuXG4gICAgdGhpcy5jdXJyZW50XyA9IG5vZGU7XG4gICAgY29uc3QgZWwgPSBuZXcgY3RvcigpO1xuXG4gICAgaWYgKGVsICE9PSBub2RlKSB7XG4gICAgICB0aHJvdyBuZXcgdGhpcy53aW5fLkVycm9yKFxuICAgICAgICAgICdDb25zdHJ1Y3RvciBpbGxlZ2FsbHkgcmV0dXJuZWQgYSBkaWZmZXJlbnQgaW5zdGFuY2UuJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZpcmVzIGNvbm5lY3RlZENhbGxiYWNrIG9uIHRoZSBjdXN0b20gZWxlbWVudCwgaWYgaXQgaGFzIG9uZS5cbiAgICogVGhpcyBhbHNvIHVwZ3JhZGVzIHRoZSBjdXN0b20gZWxlbWVudCwgc2luY2UgaXQgbWF5IG5vdCBoYXZlIGJlZW5cbiAgICogYWNjZXNzaWJsZSB2aWEgdGhlIHJvb3QgZG9jdW1lbnQgYmVmb3JlIChhIGRldGFjaGVkIERPTSB0cmVlKS5cbiAgICpcbiAgICogQHBhcmFtIHshTm9kZX0gbm9kZVxuICAgKi9cbiAgY29ubmVjdGVkQ2FsbGJhY2tfKG5vZGUpIHtcbiAgICBjb25zdCBkZWYgPSB0aGlzLmdldEJ5TmFtZShub2RlLmxvY2FsTmFtZSk7XG4gICAgaWYgKCFkZWYpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy51cGdyYWRlU2VsZl8oLyoqIEB0eXBlIHshRWxlbWVudH0gKi8obm9kZSksIGRlZik7XG4gICAgLy8gVE9ETyhqcmlkZ2V3ZWxsKTogSXQgbWF5IGJlIGFwcHJvcHJpYXRlIHRvIGFkb3B0Q2FsbGJhY2ssIGlmIHRoZSBub2RlXG4gICAgLy8gdXNlZCB0byBiZSBpbiBhbm90aGVyIGRvYy5cbiAgICAvLyBUT0RPKGpyaWRnZXdlbGwpOiBJIHNob3VsZCBiZSBjYWxsaW5nIHRoZSBkZWZpbml0aW9ucyBjb25uZWN0ZWRDYWxsYmFja1xuICAgIC8vIHdpdGggbm9kZSBhcyB0aGUgY29udGV4dC5cbiAgICBpZiAobm9kZS5jb25uZWN0ZWRDYWxsYmFjaykge1xuICAgICAgbm9kZS5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBGaXJlcyBkaXNjb25uZWN0ZWRDYWxsYmFjayBvbiB0aGUgY3VzdG9tIGVsZW1lbnQsIGlmIGl0IGhhcyBvbmUuXG4gICAqXG4gICAqIEBwYXJhbSB7IU5vZGV9IG5vZGVcbiAgICovXG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrXyhub2RlKSB7XG4gICAgLy8gVE9ETyhqcmlkZ2V3ZWxsKTogSSBzaG91bGQgYmUgY2FsbGluZyB0aGUgZGVmaW5pdGlvbnMgY29ubmVjdGVkQ2FsbGJhY2tcbiAgICAvLyB3aXRoIG5vZGUgYXMgdGhlIGNvbnRleHQuXG4gICAgaWYgKG5vZGUuZGlzY29ubmVjdGVkQ2FsbGJhY2spIHtcbiAgICAgIG5vZGUuZGlzY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVjb3JkcyBuYW1lIGFzIGEgcmVnaXN0ZXJlZCBjdXN0b20gZWxlbWVudCB0byBvYnNlcnZlLlxuICAgKlxuICAgKiBTdGFydHMgdGhlIE11dGF0aW9uIE9ic2VydmVyIGlmIHRoaXMgaXMgdGhlIGZpcnN0IHJlZ2lzdGVyZWQgY3VzdG9tXG4gICAqIGVsZW1lbnQuIFRoaXMgaXMgZGVmZXJyZWQgdW50aWwgdGhlIGZpcnN0IGN1c3RvbSBlbGVtZW50IGlzIGRlZmluZWQgdG9cbiAgICogc3BlZWQgdXAgaW5pdGlhbCByZW5kZXJpbmcgb2YgdGhlIHBhZ2UuXG4gICAqXG4gICAqIE11dGF0aW9uIE9ic2VydmVycyBhcmUgY29udmVuaWVudGx5IGF2YWlsYWJsZSBpbiBldmVyeSBicm93c2VyIHdlIGNhcmVcbiAgICogYWJvdXQuIFdoZW4gYSBub2RlIGlzIGNvbm5lY3RlZCB0byB0aGUgcm9vdCBkb2N1bWVudCwgYWxsIGN1c3RvbVxuICAgKiBlbGVtZW50cyAoaW5jbHVkaW5nIHRoYXQgbm9kZSBpdGVzZWxmKSB3aWxsIGJlIHVwZ3JhZGVkIGFuZCBjYWxsXG4gICAqIGNvbm5lY3RlZENhbGxiYWNrLiBXaGVuIGEgbm9kZSBpcyBkaXNjb25uZWN0ZWRDYWxsYmFjayBmcm9tIHRoZSByb290XG4gICAqIGRvY3VtZW50LCBhbGwgY3VzdG9tIGVsZW1lbnRzIHdpbGwgY2FsbCBkaXNjb25uZWN0ZWRDYWxsYmFjay5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICovXG4gIG9ic2VydmVfKG5hbWUpIHtcbiAgICBpZiAodGhpcy5xdWVyeV8pIHtcbiAgICAgIHRoaXMucXVlcnlfICs9IGAsJHtuYW1lfWA7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5xdWVyeV8gPSBuYW1lO1xuXG4gICAgLy8gVGhlIGZpcnN0IHJlZ2lzdGVyZWQgbmFtZSBzdGFydHMgdGhlIG11dGF0aW9uIG9ic2VydmVyLlxuICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IHRoaXMud2luXy5NdXRhdGlvbk9ic2VydmVyKHJlY29yZHMgPT4ge1xuICAgICAgaWYgKHJlY29yZHMpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVSZWNvcmRzXyhyZWNvcmRzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBvYnNlcnZlci5vYnNlcnZlKHRoaXMuZG9jXywge1xuICAgICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgICAgc3VidHJlZTogdHJ1ZSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgYWxsIHRoZSBNdXRhdGlvbiBPYnNlcnZlcidzIE11dGF0aW9uIFJlY29yZHMuXG4gICAqIEFsbCBhZGRlZCBjdXN0b20gZWxlbWVudHMgd2lsbCBiZSB1cGdyYWRlZCAoaWYgbm90IGFscmVhZHkpIGFuZCBjYWxsXG4gICAqIGNvbm5lY3RlZENhbGxiYWNrLiBBbGwgcmVtb3ZlZCBjdXN0b20gZWxlbWVudHMgd2lsbCBjYWxsXG4gICAqIGRpc2Nvbm5lY3RlZENhbGxiYWNrLlxuICAgKlxuICAgKiBAcGFyYW0geyFBcnJheTwhTXV0YXRpb25SZWNvcmQ+fSByZWNvcmRzXG4gICAqL1xuICBoYW5kbGVSZWNvcmRzXyhyZWNvcmRzKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZWNvcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCByZWNvcmQgPSByZWNvcmRzW2ldO1xuICAgICAgaWYgKCFyZWNvcmQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHthZGRlZE5vZGVzLCByZW1vdmVkTm9kZXN9ID0gcmVjb3JkO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhZGRlZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBhZGRlZE5vZGVzW2ldO1xuICAgICAgICBjb25zdCBjb25uZWN0ZWRDYW5kaWRhdGVzID0gdGhpcy5xdWVyeUFsbF8obm9kZSwgdGhpcy5xdWVyeV8pO1xuICAgICAgICB0aGlzLmNvbm5lY3RlZENhbGxiYWNrXyhub2RlKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb25uZWN0ZWRDYW5kaWRhdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdGhpcy5jb25uZWN0ZWRDYWxsYmFja18oY29ubmVjdGVkQ2FuZGlkYXRlc1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZW1vdmVkTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IHJlbW92ZWROb2Rlc1tpXTtcbiAgICAgICAgY29uc3QgZGlzY29ubmVjdGVkQ2FuZGlkYXRlcyA9IHRoaXMucXVlcnlBbGxfKG5vZGUsIHRoaXMucXVlcnlfKTtcbiAgICAgICAgdGhpcy5kaXNjb25uZWN0ZWRDYWxsYmFja18obm9kZSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGlzY29ubmVjdGVkQ2FuZGlkYXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHRoaXMuZGlzY29ubmVjdGVkQ2FsbGJhY2tfKGRpc2Nvbm5lY3RlZENhbmRpZGF0ZXNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogRG9lcyB0aGUgcG9seWZpbGxpbmcuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICovXG5mdW5jdGlvbiBwb2x5ZmlsbCh3aW4pIHtcbiAgY29uc3Qge0hUTUxFbGVtZW50LCBFbGVtZW50LCBOb2RlLCBEb2N1bWVudCwgT2JqZWN0LCBkb2N1bWVudH0gPSB3aW47XG4gIGNvbnN0IHtjcmVhdGVFbGVtZW50LCBjbG9uZU5vZGUsIGltcG9ydE5vZGV9ID0gZG9jdW1lbnQ7XG5cbiAgY29uc3QgcmVnaXN0cnkgPSBuZXcgUmVnaXN0cnkod2luKTtcbiAgY29uc3QgY3VzdG9tRWxlbWVudHMgPSBuZXcgQ3VzdG9tRWxlbWVudFJlZ2lzdHJ5KHdpbiwgcmVnaXN0cnkpO1xuXG4gIC8vIEV4cG9zZSB0aGUgY3VzdG9tIGVsZW1lbnQgcmVnaXN0cnkuXG4gIC8vIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iod2luZG93LCAnY3VzdG9tRWxlbWVudHMnKVxuICAvLyB7Z2V0OiDGkiwgc2V0OiB1bmRlZmluZWQsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZX1cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbiwgJ2N1c3RvbUVsZW1lbnRzJywge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIC8vIHdyaXRhYmxlOiBmYWxzZSxcbiAgICB2YWx1ZTogY3VzdG9tRWxlbWVudHMsXG4gIH0pO1xuXG4gIC8vIFBhdGNoIGNyZWF0ZUVsZW1lbnQgdG8gaW1tZWRpYXRlbHkgdXBncmFkZSB0aGUgY3VzdG9tIGVsZW1lbnQuXG4gIC8vIFRoaXMgaGFzIHRoZSBhZGRlZCBiZW5lZml0IHRoYXQgaXQgYXZvaWRzIHRoZSBcImFscmVhZHkgY3JlYXRlZCBidXQgbmVlZHNcbiAgLy8gY29uc3RydWN0b3IgY29kZSBydW5cIiBjaGlja2VuLWFuZC1lZ2cgcHJvYmxlbS5cbiAgRG9jdW1lbnQucHJvdG90eXBlLmNyZWF0ZUVsZW1lbnQgPSBmdW5jdGlvbiBjcmVhdGVFbGVtZW50UG9seWZpbGwobmFtZSkge1xuICAgIGNvbnN0IGRlZiA9IHJlZ2lzdHJ5LmdldEJ5TmFtZShuYW1lKTtcbiAgICBpZiAoZGVmKSB7XG4gICAgICByZXR1cm4gbmV3IGRlZi5jdG9yKCk7XG4gICAgfVxuICAgIHJldHVybiBjcmVhdGVFbGVtZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG5cbiAgLy8gUGF0Y2ggaW1wb3J0Tm9kZSB0byBpbW1lZGlhdGVseSB1cGdyYWRlIGN1c3RvbSBlbGVtZW50cy5cbiAgLy8gVE9ETyhqcmlkZ2V3ZWxsKTogQ2FuIGZpcmUgYWRvcHRlZENhbGxiYWNrIGZvciBjcm9zcyBkb2MgaW1wb3J0cy5cbiAgRG9jdW1lbnQucHJvdG90eXBlLmltcG9ydE5vZGUgPSBmdW5jdGlvbiBpbXBvcnROb2RlUG9seWZpbGwoKSB7XG4gICAgY29uc3QgaW1wb3J0ZWQgPSBpbXBvcnROb2RlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKGltcG9ydGVkKSB7XG4gICAgICByZWdpc3RyeS51cGdyYWRlU2VsZihpbXBvcnRlZCk7XG4gICAgICByZWdpc3RyeS51cGdyYWRlKGltcG9ydGVkKTtcbiAgICB9XG4gICAgcmV0dXJuIGltcG9ydGVkO1xuICB9O1xuXG4gIC8vIFBhdGNoIGNsb25lTm9kZSB0byBpbW1lZGlhdGVseSB1cGdyYWRlIGN1c3RvbSBlbGVtZW50cy5cbiAgTm9kZS5wcm90b3R5cGUuY2xvbmVOb2RlID0gZnVuY3Rpb24gY2xvbmVOb2RlUG9seWZpbGwoKSB7XG4gICAgY29uc3QgY2xvbmVkID0gY2xvbmVOb2RlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgcmVnaXN0cnkudXBncmFkZVNlbGYoY2xvbmVkKTtcbiAgICByZWdpc3RyeS51cGdyYWRlKGNsb25lZCk7XG4gICAgcmV0dXJuIGNsb25lZDtcbiAgfTtcblxuICAvLyBQYXRjaCB0aGUgaW5uZXJIVE1MIHNldHRlciB0byBpbW1lZGlhdGVseSB1cGdyYWRlIGN1c3RvbSBlbGVtZW50cy5cbiAgLy8gTm90ZSwgdGhpcyBjb3VsZCB0ZWNobmljYWxseSBmaXJlIGNvbm5lY3RlZENhbGxiYWNrcyBpZiB0aGlzIG5vZGUgd2FzXG4gIC8vIGNvbm5lY3RlZCwgYnV0IHdlIGxlYXZlIHRoYXQgdG8gdGhlIE11dGF0aW9uIE9ic2VydmVyLlxuICBjb25zdCBpbm5lckhUTUxEZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihFbGVtZW50LnByb3RvdHlwZSxcbiAgICAgICdpbm5lckhUTUwnKTtcbiAgY29uc3QgaW5uZXJIVE1MU2V0dGVyID0gaW5uZXJIVE1MRGVzYy5zZXQ7XG4gIGlubmVySFRNTERlc2Muc2V0ID0gZnVuY3Rpb24oaHRtbCkge1xuICAgIGlubmVySFRNTFNldHRlci5jYWxsKHRoaXMsIGh0bWwpO1xuICAgIHJlZ2lzdHJ5LnVwZ3JhZGUodGhpcyk7XG4gIH07XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShFbGVtZW50LnByb3RvdHlwZSwgJ2lubmVySFRNTCcsIGlubmVySFRNTERlc2MpO1xuXG4gIC8qKlxuICAgKiBZb3UgY2FuJ3QgdXNlIHRoZSByZWFsIEhUTUxFbGVtZW50IGNvbnN0cnVjdG9yLCBiZWNhdXNlIHlvdSBjYW4ndCBzdWJjbGFzc1xuICAgKiBpdCB3aXRob3V0IHVzaW5nIG5hdGl2ZSBjbGFzc2VzLiBTbywgbW9jayBpdHMgYXBwcm94aW1hdGlvbiB1c2luZ1xuICAgKiBjcmVhdGVFbGVtZW50LlxuICAgKi9cbiAgZnVuY3Rpb24gSFRNTEVsZW1lbnRQb2x5ZmlsbCgpIHtcbiAgICBjb25zdCB7Y29uc3RydWN0b3J9ID0gdGhpcztcblxuICAgIC8vIElmIHdlJ3JlIHVwZ3JhZGluZyBhbiBhbHJlYWR5IGNyZWF0ZWQgY3VzdG9tIGVsZW1lbnQsIHdlIGNhbid0IGNyZWF0ZVxuICAgIC8vIGFub3RoZXIgbmV3IG5vZGUgKGJ5IHRoZSBzcGVjLCBpdCBtdXN0IGJlIHRoZSBzYW1lIG5vZGUpLlxuICAgIGxldCBlbCA9IHJlZ2lzdHJ5LmN1cnJlbnQoKTtcblxuICAgIC8vIElmIHRoZXJlJ3Mgbm90IGEgYWxyZWFkeSBjcmVhdGVkIGN1c3RvbSBlbGVtZW50LCB3ZSdyZSBiZWluZyBpbnZva2VkIHZpYVxuICAgIC8vIGBuZXdgaW5nIHRoZSBjb25zdHJ1Y3Rvci5cbiAgICAvL1xuICAgIC8vIFRlY2huaWNhbGx5LCB3ZSBjb3VsZCBnZXQgaGVyZSB2aWEgY3JlYXRlRWxlbWVudCwgYnV0IHdlIHBhdGNoZWQgdGhhdC5cbiAgICAvLyBJZiBpdCB0aGUgY3VzdG9tIGVsZW1lbnQgd2FzIHJlZ2lzdGVyZWQsIHRoZSBwYXRjaCB0dXJuZWQgaXQgaW50byBhXG4gICAgLy8gYG5ld2AgY2FsbC5cbiAgICAvLyBJZiBpdCB3YXMgbm90IHJlZ2lzdGVyZWQsIHRoZSBuYXRpdmUgY3JlYXRlRWxlbWVudCBpcyB1c2VkLiBBbmQgaWZcbiAgICAvLyBuYXRpdmUgY3JlYXRlRWxlbWVudCBpcyBiZWluZyB1c2VkIGFuZCB3ZSBnb3QgdG8gdGhpcyBjb2RlLCB3ZSdyZSByZWFsbHlcbiAgICAvLyBpbiBhbiBpbmZpbml0ZSBsb29wIChhIG5hdGl2ZSBjcmVhdGVFbGVtZW50IGNhbGwganVzdCBiZWxvdykgc28gd2UndmVcbiAgICAvLyBnb3QgYmlnZ2VyIHByb2JsZW1zLlxuICAgIC8vXG4gICAgLy8gU28ganVzdCB0YWtlIG15IHdvcmQgd2UgZ290IGhlcmUgdmlhIGBuZXdgLlxuICAgIGlmICghZWwpIHtcbiAgICAgIC8vIFRoZSBjdXN0b20gZWxlbWVudCBkZWZpbml0aW9uIGlzIGFuIGludmFyaWFudC4gSWYgdGhlIGN1c3RvbSBlbGVtZW50XG4gICAgICAvLyBpcyByZWdpc3RlcmVkLCBldmVyeXRoaW5nIHdvcmtzLiBJZiBpdCdzIG5vdCwgaXQgdGhyb3dzIGluIHRoZSBtZW1iZXJcbiAgICAgIC8vIHByb3BlcnR5IGFjY2VzcyAob25seSBkZWZpbmVkIGN1c3RvbSBlbGVtZW50cyBjYW4gYmUgZGlyZWN0bHlcbiAgICAgIC8vIGNvbnN0cnVjdGVkIHZpYSBgbmV3YCkuXG4gICAgICBjb25zdCBkZWYgPSByZWdpc3RyeS5nZXRCeUNvbnN0cnVjdG9yKGNvbnN0cnVjdG9yKTtcbiAgICAgIGVsID0gY3JlYXRlRWxlbWVudC5jYWxsKGRvY3VtZW50LCBkZWYubmFtZSk7XG4gICAgfVxuXG4gICAgLy8gRmluYWxseSwgaWYgdGhlIG5vZGUgd2FzIGFscmVhZHkgY29uc3RydWN0ZWQsIHdlIG5lZWQgdG8gcmVzZXQgaXQnc1xuICAgIC8vIHByb3RvdHlwZSB0byB0aGUgY3VzdG9tIGVsZW1lbnQgcHJvdG90eXBlLiBBbmQgaWYgaXQgd2Fzbid0IGFscmVhZHlcbiAgICAvLyBjb25zdHJ1Y3RlZCwgd2UgY3JlYXRlZCBhIG5ldyBub2RlIHZpYSBuYXRpdmUgY3JlYXRlRWxlbWVudCwgYW5kIHdlIG5lZWRcbiAgICAvLyB0byByZXNldCBpdCdzIHByb3RvdHlwZS4gQmFzaWNhbGx5IGFsd2F5cyByZXNldCB0aGUgcHJvdG90eXBlLlxuICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihlbCwgY29uc3RydWN0b3IucHJvdG90eXBlKTtcbiAgICByZXR1cm4gZWw7XG4gIH1cbiAgc3ViQ2xhc3MoT2JqZWN0LCBIVE1MRWxlbWVudCwgSFRNTEVsZW1lbnRQb2x5ZmlsbCk7XG5cbiAgLy8gRXhwb3NlIHRoZSBwb2x5ZmlsbGVkIEhUTUxFbGVtZW50IGNvbnN0cnVjdG9yIGZvciBldmVyeW9uZSB0byBleHRlbmQgZnJvbS5cbiAgd2luLkhUTUxFbGVtZW50ID0gSFRNTEVsZW1lbnRQb2x5ZmlsbDtcbn1cblxuLyoqXG4gKiBXcmFwcyBIVE1MRWxlbWVudCBpbiBhIFJlZmxlY3QuY29uc3RydWN0IGNvbnN0cnVjdG9yLCBzbyB0aGF0IHRyYW5zcGlsZWRcbiAqIGNsYXNzZXMgY2FuIGBfdGhpcyA9IHN1cGVyQ2xhc3MuY2FsbCh0aGlzKWAgZHVyaW5nIHRoZWlyIGNvbnN0cnVjdGlvbi5cbiAqXG4gKiBUaGlzIGlzIG9ubHkgdXNlZCB3aGVuIEN1c3RvbSBFbGVtZW50cyB2MSBpcyBhbHJlYWR5IGF2YWlsYWJsZSBfYW5kXyB3ZSdyZVxuICogdXNpbmcgdHJhbnNwaWxlZCBjbGFzc2VzICh3aGljaCB1c2UgRVM1IGNvbnN0cnVjdGlvbiBpZGlvbXMpLlxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKi9cbmZ1bmN0aW9uIHdyYXBIVE1MRWxlbWVudCh3aW4pIHtcbiAgY29uc3Qge0hUTUxFbGVtZW50LCBSZWZsZWN0LCBPYmplY3R9ID0gd2luO1xuICAvKipcbiAgICovXG4gIGZ1bmN0aW9uIEhUTUxFbGVtZW50V3JhcHBlcigpIHtcbiAgICBjb25zdCBjdG9yID0gLyoqIEB0eXBlIHtmdW5jdGlvbiguLi4/KTo/fHVuZGVmaW5lZH0gKi8oXG4gICAgICAvKiogQHR5cGUgeyFIVE1MRWxlbWVudH0gKi8odGhpcykuY29uc3RydWN0b3IpO1xuXG4gICAgLy8gUmVmbGVjdC5jb25zdHJ1Y3QgYWxsb3dzIHVzIHRvIGNvbnN0cnVjdCBhIG5ldyBIVE1MRWxlbWVudCB3aXRob3V0IHVzaW5nXG4gICAgLy8gYG5ld2AgKHdoaWNoIHdpbGwgYWx3YXlzIGZhaWwgYmVjYXVzZSBuYXRpdmUgSFRNTEVsZW1lbnQgaXMgYSByZXN0cmljdGVkXG4gICAgLy8gY29uc3RydWN0b3IpLlxuICAgIHJldHVybiBSZWZsZWN0LmNvbnN0cnVjdChIVE1MRWxlbWVudCwgW10sIGN0b3IpO1xuICB9XG4gIHN1YkNsYXNzKE9iamVjdCwgSFRNTEVsZW1lbnQsIEhUTUxFbGVtZW50V3JhcHBlcik7XG5cbiAgLy8gRXhwb3NlIHRoZSB3cmFwcGVkIEhUTUxFbGVtZW50IGNvbnN0cnVjdG9yIGZvciBldmVyeW9uZSB0byBleHRlbmQgZnJvbS5cbiAgd2luLkhUTUxFbGVtZW50ID0gSFRNTEVsZW1lbnRXcmFwcGVyO1xufVxuXG4vKipcbiAqIFNldHVwcyB1cCBwcm90b3R5cGUgaW5oZXJpdGFuY2VcbiAqXG4gKiBAcGFyYW0geyFPYmplY3R9IE9iamVjdFxuICogQHBhcmFtIHshRnVuY3Rpb259IHN1cGVyQ2xhc3NcbiAqIEBwYXJhbSB7IUZ1bmN0aW9ufSBzdWJDbGFzc1xuICovXG5mdW5jdGlvbiBzdWJDbGFzcyhPYmplY3QsIHN1cGVyQ2xhc3MsIHN1YkNsYXNzKSB7XG4gIC8vIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc3VwZXJDbGFzcy5wcm90b3R5cGUsICdjb25zdHJ1Y3RvcicpXG4gIC8vIHt2YWx1ZTogxpIsIHdyaXRhYmxlOiB0cnVlLCBlbnVtZXJhYmxlOiBmYWxzZSwgY29uZmlndXJhYmxlOiB0cnVlfVxuICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7XG4gICAgY29uc3RydWN0b3I6IHtcbiAgICAgIC8vIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogc3ViQ2xhc3MsXG4gICAgfSxcbiAgfSk7XG59XG5cbi8qKlxuICogUG9seWZpbGxzIEN1c3RvbSBFbGVtZW50cyB2MSBBUEkuIFRoaXMgaGFzIDQgbW9kZXM6XG4gKlxuICogMS4gQ3VzdG9tIGVsZW1lbnRzIHYxIGFscmVhZHkgc3VwcG9ydGVkLCB1c2luZyBuYXRpdmUgY2xhc3Nlc1xuICogMi4gQ3VzdG9tIGVsZW1lbnRzIHYxIGFscmVhZHkgc3VwcG9ydGVkLCB1c2luZyB0cmFuc3BpbGVkIGNsYXNzZXNcbiAqIDMuIEN1c3RvbSBlbGVtZW50cyB2MSBub3Qgc3VwcG9ydGVkLCB1c2luZyBuYXRpdmUgY2xhc3Nlc1xuICogNC4gQ3VzdG9tIGVsZW1lbnRzIHYxIG5vdCBzdXBwb3J0ZWQsIHVzaW5nIHRyYW5zcGlsZWQgY2xhc3Nlc1xuICpcbiAqIEluIG1vZGUgMSwgbm90aGluZyBpcyBkb25lLiBJbiBtb2RlIDIsIGEgbWluaW1hbCBwb2x5ZmlsbCBpcyB1c2VkIHRvIHN1cHBvcnRcbiAqIGV4dGVuZGluZyB0aGUgSFRNTEVsZW1lbnQgYmFzZSBjbGFzcy4gSW4gbW9kZSAzIGFuZCA0LCBhIGZ1bGwgcG9seWZpbGwgaXNcbiAqIGRvbmUuXG4gKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7IUZ1bmN0aW9ufSBjdG9yXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsKHdpbiwgY3Rvcikge1xuICBpZiAoaXNQYXRjaGVkKHdpbikpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBsZXQgaW5zdGFsbCA9IHRydWU7XG4gIGxldCBpbnN0YWxsV3JhcHBlciA9IGZhbHNlO1xuXG4gIGlmIChoYXNDdXN0b21FbGVtZW50cyh3aW4pKSB7XG4gICAgLy8gSWYgY3RvciBpcyBjb25zdHJ1Y3RhYmxlIHdpdGhvdXQgbmV3LCBpdCdzIGEgZnVuY3Rpb24uIFRoYXQgbWVhbnMgaXQgd2FzXG4gICAgLy8gY29tcGlsZWQgZG93biwgYW5kIHdlIG5lZWQgdG8gZG8gdGhlIG1pbmltYWwgcG9seWZpbGwgYmVjYXVzZSBhbGwgeW91XG4gICAgLy8gY2Fubm90IGV4dGVuZCBIVE1MRWxlbWVudCB3aXRob3V0IG5hdGl2ZSBjbGFzc2VzLlxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7T2JqZWN0LCBSZWZsZWN0fSA9IHdpbjtcblxuICAgICAgLy8gXCJDb25zdHJ1Y3RcIiBjdG9yIHVzaW5nIEVTNSBpZGlvbXNcbiAgICAgIGNvbnN0IGluc3RhbmNlID0gT2JqZWN0LmNyZWF0ZShjdG9yLnByb3RvdHlwZSk7XG4gICAgICBjdG9yLmNhbGwoaW5zdGFuY2UpO1xuXG4gICAgICAvLyBJZiB0aGF0IHN1Y2NlZWRlZCwgd2UncmUgaW4gYSB0cmFuc3BpbGVkIGVudmlyb25tZW50XG4gICAgICAvLyBMZXQncyBmaW5kIG91dCBpZiB3ZSBjYW4gd3JhcCBIVE1MRWxlbWVudCBhbmQgYXZvaWQgYSBmdWxsIHBhdGNoLlxuICAgICAgaW5zdGFsbFdyYXBwZXIgPSAhIShSZWZsZWN0ICYmIFJlZmxlY3QuY29uc3RydWN0KTtcbiAgICB9IGNhdGNoIChlKSB7XG5cbiAgICAgIC8vIFRoZSBjdG9yIHRocmV3IHdoZW4gd2UgY29uc3RydWN0ZWQgaXMgdmlhIEVTNSwgc28gaXQncyBhIHJlYWwgY2xhc3MuXG4gICAgICAvLyBXZSdyZSBvayB0byBub3QgaW5zdGFsbCB0aGUgcG9seWZpbGwuXG4gICAgICBpbnN0YWxsID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgaWYgKGluc3RhbGxXcmFwcGVyKSB7XG4gICAgd3JhcEhUTUxFbGVtZW50KHdpbik7XG4gIH0gZWxzZSBpZiAoaW5zdGFsbCkge1xuICAgIHBvbHlmaWxsKHdpbik7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbi8qKlxuICogUG9seWZpbGwgZm9yIGBkb2N1bWVudC5jb250YWlucygpYCBtZXRob2QuIE5vdGljZSB0aGF0IGFjY29yZGluZyB0byBzcGVjXG4gKiBgZG9jdW1lbnQuY29udGFpbnNgIGlzIGluY2x1c2lvbmFyeS5cbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvTm9kZS9jb250YWluc1xuICogQHBhcmFtIHs/Tm9kZX0gbm9kZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqIEB0aGlzIHtOb2RlfVxuICovXG5mdW5jdGlvbiBkb2N1bWVudENvbnRhaW5zUG9seWZpbGwobm9kZSkge1xuICAvLyBQZXIgc3BlYywgXCJjb250YWluc1wiIG1ldGhvZCBpcyBpbmNsdXNpb25hcnlcbiAgLy8gaS5lLiBgbm9kZS5jb250YWlucyhub2RlKSA9PSB0cnVlYC4gSG93ZXZlciwgd2Ugc3RpbGwgbmVlZCB0byB0ZXN0XG4gIC8vIGVxdWFsaXR5IHRvIHRoZSBkb2N1bWVudCBpdHNlbGYuXG4gIHJldHVybiBub2RlID09IHRoaXMgfHwgdGhpcy5kb2N1bWVudEVsZW1lbnQuY29udGFpbnMobm9kZSk7XG59XG5cblxuLyoqXG4gKiBQb2x5ZmlsbHMgYEhUTUxEb2N1bWVudC5jb250YWluc2AgQVBJLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluc3RhbGwod2luKSB7XG4gIC8vIEhUTUxEb2N1bWVudCBpcyB1bmRlZmluZWQgaW4gSW50ZXJuZXQgRXhwbG9yZXIgMTAsIGJ1dCBpdCBoYXMgRG9jdW1lbnQsXG4gIC8vIHNvIHdlIHVzZSB0aGF0IGFzIGEgZmFsbGJhY2suXG4gIGNvbnN0IGRvY3VtZW50Q2xhc3MgPSB3aW4uSFRNTERvY3VtZW50IHx8IHdpbi5Eb2N1bWVudDtcbiAgaWYgKCFkb2N1bWVudENsYXNzLnByb3RvdHlwZS5jb250YWlucykge1xuICAgIHdpbi5PYmplY3QuZGVmaW5lUHJvcGVydHkoZG9jdW1lbnRDbGFzcy5wcm90b3R5cGUsICdjb250YWlucycsIHtcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogZG9jdW1lbnRDb250YWluc1BvbHlmaWxsLFxuICAgIH0pO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuXG4vKipcbiAqIFBvbHlmaWxsIGZvciBgRE9NVG9rZW5MaXN0LnByb3RvdHlwZS50b2dnbGUodG9rZW4sIG9wdF9mb3JjZSlgIG1ldGhvZC4gVGhpc1xuICogaXMgc3BlY2lhbGx5IGltcG9ydGFudCBiZWNhdXNlIElFIGRvZXMgbm90IHN1cHBvcnQgYG9wdF9mb3JjZWAgYXR0cmlidXRlLiBTZWVcbiAqIGh0dHBzOi8vZ29vLmdsL2hnS05ZWSBmb3IgZGV0YWlscy5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0b2tlblxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2ZvcmNlXG4gKiBAdGhpcyB7RE9NVG9rZW5MaXN0fVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gZG9tVG9rZW5MaXN0VG9nZ2xlUG9seWZpbGwodG9rZW4sIG9wdF9mb3JjZSkge1xuICBjb25zdCByZW1vdmUgPSBvcHRfZm9yY2UgPT09IHVuZGVmaW5lZCA/IHRoaXMuY29udGFpbnModG9rZW4pIDogIW9wdF9mb3JjZTtcbiAgaWYgKHJlbW92ZSkge1xuICAgIHRoaXMucmVtb3ZlKHRva2VuKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5hZGQodG9rZW4pO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59XG5cblxuLyoqXG4gKiBQb2x5ZmlsbHMgYERPTVRva2VuTGlzdC5wcm90b3R5cGUudG9nZ2xlYCBBUEkgaW4gSUUuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbCh3aW4pIHtcbiAgaWYgKGlzSWUod2luKSAmJiB3aW4uRE9NVG9rZW5MaXN0KSB7XG4gICAgd2luLk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW4uRE9NVG9rZW5MaXN0LnByb3RvdHlwZSwgJ3RvZ2dsZScsIHtcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogZG9tVG9rZW5MaXN0VG9nZ2xlUG9seWZpbGwsXG4gICAgfSk7XG4gIH1cbn1cblxuXG4vKipcbiAqIFdoZXRoZXIgdGhlIGN1cnJlbnQgYnJvd3NlciBpcyBhIElFIGJyb3dzZXIuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNJZSh3aW4pIHtcbiAgcmV0dXJuIC9UcmlkZW50fE1TSUV8SUVNb2JpbGUvaS50ZXN0KHdpbi5uYXZpZ2F0b3IudXNlckFnZW50KTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIFBhcnNlcyB0aGUgbnVtYmVyIHggYW5kIHJldHVybnMgaXRzIHNpZ24uIEZvciBwb3NpdGl2ZSB4IHJldHVybnMgMSwgZm9yXG4gKiBuZWdhdGl2ZSwgLTEuIEZvciAwIGFuZCAtMCwgcmV0dXJucyAwIGFuZCAtMCByZXNwZWN0aXZlbHkuIEZvciBhbnkgbnVtYmVyXG4gKiB0aGF0IHBhcnNlcyB0byBOYU4sIHJldHVybnMgTmFOLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSB4XG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaWduKHgpIHtcbiAgeCA9IE51bWJlcih4KTtcblxuICAvLyBJZiB4IGlzIDAsIC0wLCBvciBOYU4sIHJldHVybiBpdC5cbiAgaWYgKCF4KSB7XG4gICAgcmV0dXJuIHg7XG4gIH1cblxuICByZXR1cm4geCA+IDAgPyAxIDogLTE7XG59XG5cblxuLyoqXG4gKiBTZXRzIHRoZSBNYXRoLnNpZ24gcG9seWZpbGwgaWYgaXQgZG9lcyBub3QgZXhpc3QuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbCh3aW4pIHtcbiAgaWYgKCF3aW4uTWF0aC5zaWduKSB7XG4gICAgd2luLk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW4uTWF0aCwgJ3NpZ24nLCB7XG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IHNpZ24sXG4gICAgfSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5jb25zdCB7aGFzT3duUHJvcGVydHl9ID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBDb3BpZXMgdmFsdWVzIG9mIGFsbCBlbnVtZXJhYmxlIG93biBwcm9wZXJ0aWVzIGZyb20gb25lIG9yIG1vcmUgc291cmNlXG4gKiBvYmplY3RzIChwcm92aWRlZCBhcyBleHRlbmRlZCBhcmd1bWVudHMgdG8gdGhlIGZ1bmN0aW9uKSB0byBhIHRhcmdldCBvYmplY3QuXG4gKlxuICogQHBhcmFtIHshT2JqZWN0fSB0YXJnZXRcbiAqIEBwYXJhbSB7Li4uT2JqZWN0fSB2YXJfYXJnc1xuICogQHJldHVybiB7IU9iamVjdH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnbih0YXJnZXQsIHZhcl9hcmdzKSB7XG4gIGlmICh0YXJnZXQgPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdCcpO1xuICB9XG5cbiAgY29uc3Qgb3V0cHV0ID0gT2JqZWN0KHRhcmdldCk7XG4gIGZvciAobGV0IGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3Qgc291cmNlID0gYXJndW1lbnRzW2ldO1xuICAgIGlmIChzb3VyY2UgIT0gbnVsbCkge1xuICAgICAgZm9yIChjb25zdCBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuICAgICAgICAgIG91dHB1dFtrZXldID0gc291cmNlW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG91dHB1dDtcbn1cblxuXG4vKipcbiAqIFNldHMgdGhlIE9iamVjdC5hc3NpZ24gcG9seWZpbGwgaWYgaXQgZG9lcyBub3QgZXhpc3QuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbCh3aW4pIHtcbiAgaWYgKCF3aW4uT2JqZWN0LmFzc2lnbikge1xuICAgIHdpbi5PYmplY3QuZGVmaW5lUHJvcGVydHkod2luLk9iamVjdCwgJ2Fzc2lnbicsIHtcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogYXNzaWduLFxuICAgIH0pO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuXG5pbXBvcnQgKiBhcyBQcm9taXNlIGZyb20gJ3Byb21pc2UtcGpzL3Byb21pc2UnO1xuXG4vKipcbiAqIFNldHMgdGhlIFByb21pc2UgcG9seWZpbGwgaWYgaXQgZG9lcyBub3QgZXhpc3QuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbCh3aW4pIHtcbiAgaWYgKCF3aW4uUHJvbWlzZSkge1xuICAgIHdpbi5Qcm9taXNlID0gLyoqIEB0eXBlIHs/fSAqLyAoUHJvbWlzZSk7XG4gICAgLy8gSW4gYmFiZWwgdGhlICogZXhwb3J0IGlzIGFuIE9iamVjdCB3aXRoIGEgZGVmYXVsdCBwcm9wZXJ0eS5cbiAgICAvLyBJbiBjbG9zdXJlIGNvbXBpbGVyIGl0IGlzIHRoZSBQcm9taXNlIGZ1bmN0aW9uIGl0c2VsZi5cbiAgICBpZiAoUHJvbWlzZS5kZWZhdWx0KSB7XG4gICAgICB3aW4uUHJvbWlzZSA9IFByb21pc2UuZGVmYXVsdDtcbiAgICB9XG4gICAgLy8gV2UgY29weSB0aGUgaW5kaXZpZHVhbCBzdGF0aWMgbWV0aG9kcywgYmVjYXVzZSBjbG9zdXJlXG4gICAgLy8gY29tcGlsZXIgZmxhdHRlbnMgdGhlIHBvbHlmaWxsIG5hbWVzcGFjZS5cbiAgICB3aW4uUHJvbWlzZS5yZXNvbHZlID0gUHJvbWlzZS5yZXNvbHZlO1xuICAgIHdpbi5Qcm9taXNlLnJlamVjdCA9IFByb21pc2UucmVqZWN0O1xuICAgIHdpbi5Qcm9taXNlLmFsbCA9IFByb21pc2UuYWxsO1xuICAgIHdpbi5Qcm9taXNlLnJhY2UgPSBQcm9taXNlLnJhY2U7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgUmVnaXN0cmF0aW9uIGFuZCBnZXR0ZXIgZnVuY3Rpb25zIGZvciBBTVAgc2VydmljZXMuXG4gKlxuICogSW52YXJpYW50OiBTZXJ2aWNlIGdldHRlcnMgbmV2ZXIgcmV0dXJuIG51bGwgZm9yIHJlZ2lzdGVyZWQgc2VydmljZXMuXG4gKi9cblxuLy8gc3JjL3BvbHlmaWxscy5qcyBtdXN0IGJlIHRoZSBmaXJzdCBpbXBvcnQuXG5pbXBvcnQgJy4vcG9seWZpbGxzJzsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBzb3J0LWltcG9ydHMtZXM2LWF1dG9maXgvc29ydC1pbXBvcnRzLWVzNlxuXG5pbXBvcnQge0RlZmVycmVkfSBmcm9tICcuL3V0aWxzL3Byb21pc2UnO1xuaW1wb3J0IHtkZXZ9IGZyb20gJy4vbG9nJztcbmltcG9ydCB7dG9XaW59IGZyb20gJy4vdHlwZXMnO1xuXG5cbi8qKlxuICogSG9sZHMgaW5mbyBhYm91dCBhIHNlcnZpY2UuXG4gKiAtIG9iajogQWN0dWFsIHNlcnZpY2UgaW1wbGVtZW50YXRpb24gd2hlbiBhdmFpbGFibGUuXG4gKiAtIHByb21pc2U6IFByb21pc2UgZm9yIHRoZSBvYmouXG4gKiAtIHJlc29sdmU6IEZ1bmN0aW9uIHRvIHJlc29sdmUgdGhlIHByb21pc2Ugd2l0aCB0aGUgb2JqZWN0LlxuICogLSBjb250ZXh0OiBBcmd1bWVudCBmb3IgY3RvciwgZWl0aGVyIGEgd2luZG93IG9yIGFuIGFtcGRvYy5cbiAqIC0gY3RvcjogRnVuY3Rpb24gdGhhdCBjb25zdHJ1Y3RzIGFuZCByZXR1cm5zIHRoZSBzZXJ2aWNlLlxuICogQHR5cGVkZWYge3tcbiAqICAgb2JqOiAoP09iamVjdCksXG4gKiAgIHByb21pc2U6ICg/UHJvbWlzZSksXG4gKiAgIHJlc29sdmU6ICg/ZnVuY3Rpb24oIU9iamVjdCkpLFxuICogICBjb250ZXh0OiAoP1dpbmRvd3w/Li9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvYyksXG4gKiAgIGN0b3I6ICg/ZnVuY3Rpb24obmV3Ok9iamVjdCwgIVdpbmRvdyl8XG4gKiAgICAgICAgICA/ZnVuY3Rpb24obmV3Ok9iamVjdCwgIS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2MpKSxcbiAqIH19XG4gKi9cbmxldCBTZXJ2aWNlSG9sZGVyRGVmO1xuXG5cbi8qKlxuICogVGhpcyBpbnRlcmZhY2UgcHJvdmlkZXMgYSBgZGlzcG9zZWAgbWV0aG9kIHRoYXQgd2lsbCBiZSBjYWxsZWQgYnlcbiAqIHJ1bnRpbWUgd2hlbiBhIHNlcnZpY2UgbmVlZHMgdG8gYmUgZGlzcG9zZWQgb2YuXG4gKiBAaW50ZXJmYWNlXG4gKi9cbmV4cG9ydCBjbGFzcyBEaXNwb3NhYmxlIHtcblxuICAvKipcbiAgICogSW5zdHJ1Y3RzIHRoZSBzZXJ2aWNlIHRvIHJlbGVhc2UgYW55IHJlc291cmNlcyBpdCBtaWdodCBiZSBob2xkaW5nLiBDYW5cbiAgICogYmUgY2FsbGVkIG9ubHkgb25jZSBpbiB0aGUgbGlmZWN5Y2xlIG9mIGEgc2VydmljZS5cbiAgICovXG4gIGRpc3Bvc2UoKSB7fVxufVxuXG5cbi8qKlxuICogVGhpcyBpbnRlcmZhY2UgcHJvdmlkZXMgYSBgYWRvcHRFbWJlZFdpbmRvd2AgbWV0aG9kIHRoYXQgd2lsbCBiZSBjYWxsZWQgYnlcbiAqIHJ1bnRpbWUgZm9yIGEgbmV3IGVtYmVkIHdpbmRvdy5cbiAqIEBpbnRlcmZhY2VcbiAqL1xuZXhwb3J0IGNsYXNzIEVtYmVkZGFibGVTZXJ2aWNlIHtcblxuICAvKipcbiAgICogSW5zdHJ1Y3RzIHRoZSBzZXJ2aWNlIHRvIGFkb3B0IHRoZSBlbWJlZCB3aW5kb3cgYW5kIGFkZCBhbnkgbmVjZXNzYXJ5XG4gICAqIGxpc3RlbmVycyBhbmQgcmVzb3VyY2VzLlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHVudXNlZEVtYmVkV2luXG4gICAqL1xuICBhZG9wdEVtYmVkV2luZG93KHVudXNlZEVtYmVkV2luKSB7fVxufVxuXG5cbi8qKlxuICogUmV0dXJucyBhIHNlcnZpY2Ugd2l0aCB0aGUgZ2l2ZW4gaWQuIEFzc3VtZXMgdGhhdCBpdCBoYXMgYmVlbiByZWdpc3RlcmVkXG4gKiBhbHJlYWR5LlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2ZhbGxiYWNrVG9Ub3BXaW5cbiAqIEByZXR1cm4ge09iamVjdH0gVGhlIHNlcnZpY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFeGlzdGluZ1NlcnZpY2VJbkVtYmVkU2NvcGUod2luLCBpZCwgb3B0X2ZhbGxiYWNrVG9Ub3BXaW4pIHtcbiAgLy8gRmlyc3QsIHRyeSB0byByZXNvbHZlIHZpYSBsb2NhbCAoZW1iZWQpIHdpbmRvdy5cbiAgY29uc3QgbG9jYWwgPSBnZXRMb2NhbEV4aXN0aW5nU2VydmljZUZvckVtYmVkV2luT3JOdWxsKHdpbiwgaWQpO1xuICBpZiAobG9jYWwpIHtcbiAgICByZXR1cm4gbG9jYWw7XG4gIH1cbiAgaWYgKG9wdF9mYWxsYmFja1RvVG9wV2luKSB7XG4gICAgcmV0dXJuIGdldFNlcnZpY2Uod2luLCBpZCk7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHNlcnZpY2Ugd2l0aCB0aGUgZ2l2ZW4gaWQuIEFzc3VtZXMgdGhhdCBpdCBoYXMgYmVlbiBjb25zdHJ1Y3RlZFxuICogYWxyZWFkeS5cbiAqXG4gKiBVbmxpa2UgbW9zdCBzZXJ2aWNlIGdldHRlcnMsIHBhc3NpbmcgYE5vZGVgIGlzIG5lY2Vzc2FyeSBmb3Igc29tZSBGSUUtc2NvcGVcbiAqIHNlcnZpY2VzIHNpbmNlIHNvbWV0aW1lcyB3ZSBvbmx5IGhhdmUgdGhlIEZJRSBEb2N1bWVudCBmb3IgY29udGV4dC5cbiAqXG4gKiBAcGFyYW0geyFOb2RlfCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBub2RlT3JEb2NcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2ZhbGxiYWNrVG9Ub3BXaW5cbiAqIEByZXR1cm4ge09iamVjdH0gVGhlIHNlcnZpY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFeGlzdGluZ1NlcnZpY2VGb3JEb2NJbkVtYmVkU2NvcGUoXG4gIG5vZGVPckRvYywgaWQsIG9wdF9mYWxsYmFja1RvVG9wV2luKSB7XG4gIC8vIEZpcnN0LCB0cnkgdG8gcmVzb2x2ZSB2aWEgbG9jYWwgKGVtYmVkKSB3aW5kb3cuXG4gIGlmIChub2RlT3JEb2Mubm9kZVR5cGUpIHtcbiAgICAvLyBJZiBhIG5vZGUgaXMgcGFzc2VkLCB0cnkgdG8gcmVzb2x2ZSB2aWEgdGhpcyBub2RlLlxuICAgIGNvbnN0IHdpbiA9IHRvV2luKC8qKiBAdHlwZSB7IURvY3VtZW50fSAqLyAoXG4gICAgICBub2RlT3JEb2Mub3duZXJEb2N1bWVudCB8fCBub2RlT3JEb2MpLmRlZmF1bHRWaWV3KTtcbiAgICBjb25zdCBsb2NhbCA9IGdldExvY2FsRXhpc3RpbmdTZXJ2aWNlRm9yRW1iZWRXaW5Pck51bGwod2luLCBpZCk7XG4gICAgaWYgKGxvY2FsKSB7XG4gICAgICByZXR1cm4gbG9jYWw7XG4gICAgfVxuICB9XG4gIC8vIElmIGFuIGFtcGRvYyBpcyBwYXNzZWQgb3IgZmFsbGJhY2sgaXMgYWxsb3dlZCwgY29udGludWUgcmVzb2x2aW5nLlxuICBpZiAoIW5vZGVPckRvYy5ub2RlVHlwZSB8fCBvcHRfZmFsbGJhY2tUb1RvcFdpbikge1xuICAgIHJldHVybiBnZXRTZXJ2aWNlRm9yRG9jRGVwcmVjYXRlZChub2RlT3JEb2MsIGlkKTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBJbnN0YWxscyBhIHNlcnZpY2Ugb3ZlcnJpZGUgb24gYW1wLWRvYyBsZXZlbC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gZW1iZWRXaW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICogQHBhcmFtIHshT2JqZWN0fSBzZXJ2aWNlIFRoZSBzZXJ2aWNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbFNlcnZpY2VJbkVtYmVkU2NvcGUoZW1iZWRXaW4sIGlkLCBzZXJ2aWNlKSB7XG4gIGNvbnN0IHRvcFdpbiA9IGdldFRvcFdpbmRvdyhlbWJlZFdpbik7XG4gIGRldigpLmFzc2VydChlbWJlZFdpbiAhPSB0b3BXaW4sXG4gICAgICAnU2VydmljZSBvdmVycmlkZSBjYW4gb25seSBiZSBpbnN0YWxsZWQgaW4gZW1iZWQgd2luZG93OiAlcycsIGlkKTtcbiAgZGV2KCkuYXNzZXJ0KCFnZXRMb2NhbEV4aXN0aW5nU2VydmljZUZvckVtYmVkV2luT3JOdWxsKGVtYmVkV2luLCBpZCksXG4gICAgICAnU2VydmljZSBvdmVycmlkZSBoYXMgYWxyZWFkeSBiZWVuIGluc3RhbGxlZDogJXMnLCBpZCk7XG4gIHJlZ2lzdGVyU2VydmljZUludGVybmFsKGVtYmVkV2luLCBlbWJlZFdpbiwgaWQsICgpID0+IHNlcnZpY2UpO1xuICBnZXRTZXJ2aWNlSW50ZXJuYWwoZW1iZWRXaW4sIGlkKTsgLy8gRm9yY2Ugc2VydmljZSB0byBidWlsZC5cbn1cblxuLyoqXG4gKiBAcGFyYW0geyFXaW5kb3d9IGVtYmVkV2luXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAqIEByZXR1cm4gez9PYmplY3R9XG4gKi9cbmZ1bmN0aW9uIGdldExvY2FsRXhpc3RpbmdTZXJ2aWNlRm9yRW1iZWRXaW5Pck51bGwoZW1iZWRXaW4sIGlkKSB7XG4gIC8vIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBjdXJyZW50bHkgb25seSByZXNvbHZlcyBhZ2FpbnN0IHRoZSBnaXZlbiB3aW5kb3cuXG4gIC8vIEl0IGRvZXMgbm90IHRyeSB0byBnbyBhbGwgdGhlIHdheSB1cCB0aGUgcGFyZW50IHdpbmRvdyBjaGFpbi4gV2UgY2FuIGNoYW5nZVxuICAvLyB0aGlzIGluIHRoZSBmdXR1cmUsIGJ1dCBmb3Igbm93IHRoaXMgZ2l2ZXMgdXMgYSBiZXR0ZXIgcGVyZm9ybWFuY2UuXG4gIGNvbnN0IHRvcFdpbiA9IGdldFRvcFdpbmRvdyhlbWJlZFdpbik7XG4gIGlmIChlbWJlZFdpbiAhPSB0b3BXaW4gJiYgaXNTZXJ2aWNlUmVnaXN0ZXJlZChlbWJlZFdpbiwgaWQpKSB7XG4gICAgcmV0dXJuIGdldFNlcnZpY2VJbnRlcm5hbChlbWJlZFdpbiwgaWQpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGEgc2VydmljZSBnaXZlbiBhIGNsYXNzIHRvIGJlIHVzZWQgYXMgaW1wbGVtZW50YXRpb24uXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IGlkIG9mIHRoZSBzZXJ2aWNlLlxuICogQHBhcmFtIHtmdW5jdGlvbihuZXc6T2JqZWN0LCAhV2luZG93KX0gY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbnN0YW50aWF0ZSBXaGV0aGVyIHRvIGltbWVkaWF0ZWx5IGNyZWF0ZSB0aGUgc2VydmljZVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJTZXJ2aWNlQnVpbGRlcih3aW4sXG4gIGlkLFxuICBjb25zdHJ1Y3RvcixcbiAgb3B0X2luc3RhbnRpYXRlKSB7XG4gIHdpbiA9IGdldFRvcFdpbmRvdyh3aW4pO1xuICByZWdpc3RlclNlcnZpY2VJbnRlcm5hbCh3aW4sIHdpbiwgaWQsIGNvbnN0cnVjdG9yKTtcbiAgaWYgKG9wdF9pbnN0YW50aWF0ZSkge1xuICAgIGdldFNlcnZpY2VJbnRlcm5hbCh3aW4sIGlkKTtcbiAgfVxufVxuXG5cbi8qKlxuICogUmV0dXJucyBhIHNlcnZpY2UgYW5kIHJlZ2lzdGVycyBpdCBnaXZlbiBhIGNsYXNzIHRvIGJlIHVzZWQgYXNcbiAqIGltcGxlbWVudGF0aW9uLlxuICogQHBhcmFtIHshTm9kZXwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gbm9kZU9yRG9jXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKG5ldzpPYmplY3QsICEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jKX0gY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbnN0YW50aWF0ZSBXaGV0aGVyIHRvIGltbWVkaWF0ZWx5IGNyZWF0ZSB0aGUgc2VydmljZVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJTZXJ2aWNlQnVpbGRlckZvckRvYyhub2RlT3JEb2MsXG4gIGlkLFxuICBjb25zdHJ1Y3RvcixcbiAgb3B0X2luc3RhbnRpYXRlKSB7XG4gIGNvbnN0IGFtcGRvYyA9IGdldEFtcGRvYyhub2RlT3JEb2MpO1xuICBjb25zdCBob2xkZXIgPSBnZXRBbXBkb2NTZXJ2aWNlSG9sZGVyKGFtcGRvYyk7XG4gIHJlZ2lzdGVyU2VydmljZUludGVybmFsKGhvbGRlciwgYW1wZG9jLCBpZCwgY29uc3RydWN0b3IpO1xuICBpZiAob3B0X2luc3RhbnRpYXRlKSB7XG4gICAgZ2V0U2VydmljZUludGVybmFsKGhvbGRlciwgaWQpO1xuICB9XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIGEgc2VydmljZSBmb3IgdGhlIGdpdmVuIGlkIGFuZCB3aW5kb3cgKGEgcGVyLXdpbmRvdyBzaW5nbGV0b24pLiBVc2Vyc1xuICogc2hvdWxkIHR5cGljYWxseSB3cmFwIHRoaXMgYXMgYSBzcGVjaWFsIHB1cnBvc2UgZnVuY3Rpb24gKGUuZy5cbiAqIGBTZXJ2aWNlcy52c3luY0Zvcih3aW4pYCkgZm9yIHR5cGUgc2FmZXR5IGFuZCBiZWNhdXNlIHRoZSBmYWN0b3J5IHNob3VsZCBub3RcbiAqIGJlIHBhc3NlZCBhcm91bmQuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IGlkIG9mIHRoZSBzZXJ2aWNlLlxuICogQHRlbXBsYXRlIFRcbiAqIEByZXR1cm4ge1R9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTZXJ2aWNlKHdpbiwgaWQpIHtcbiAgd2luID0gZ2V0VG9wV2luZG93KHdpbik7XG4gIHJldHVybiBnZXRTZXJ2aWNlSW50ZXJuYWwod2luLCBpZCk7XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSBmb3IgYSBzZXJ2aWNlIGZvciB0aGUgZ2l2ZW4gaWQgYW5kIHdpbmRvdy4gQWxzbyBleHBlY3RzIGFuXG4gKiBlbGVtZW50IHRoYXQgaGFzIHRoZSBhY3R1YWwgaW1wbGVtZW50YXRpb24uIFRoZSBwcm9taXNlIHJlc29sdmVzIHdoZW4gdGhlXG4gKiBpbXBsZW1lbnRhdGlvbiBsb2FkZWQuIFVzZXJzIHNob3VsZCB0eXBpY2FsbHkgd3JhcCB0aGlzIGFzIGEgc3BlY2lhbCBwdXJwb3NlXG4gKiBmdW5jdGlvbiAoZS5nLiBgU2VydmljZXMudnN5bmNGb3Iod2luKWApIGZvciB0eXBlIHNhZmV0eSBhbmQgYmVjYXVzZSB0aGVcbiAqIGZhY3Rvcnkgc2hvdWxkIG5vdCBiZSBwYXNzZWQgYXJvdW5kLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBvZiB0aGUgc2VydmljZS5cbiAqIEByZXR1cm4geyFQcm9taXNlPCFPYmplY3Q+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VydmljZVByb21pc2Uod2luLCBpZCkge1xuICByZXR1cm4gZ2V0U2VydmljZVByb21pc2VJbnRlcm5hbCh3aW4sIGlkKTtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgYSBzZXJ2aWNlIG9yIG51bGwgd2l0aCB0aGUgZ2l2ZW4gaWQuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gKiBAcmV0dXJuIHs/T2JqZWN0fSBUaGUgc2VydmljZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEV4aXN0aW5nU2VydmljZU9yTnVsbCh3aW4sIGlkKSB7XG4gIHdpbiA9IGdldFRvcFdpbmRvdyh3aW4pO1xuICBpZiAoaXNTZXJ2aWNlUmVnaXN0ZXJlZCh3aW4sIGlkKSkge1xuICAgIHJldHVybiBnZXRTZXJ2aWNlSW50ZXJuYWwod2luLCBpZCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuXG4vKipcbiAqIExpa2UgZ2V0U2VydmljZVByb21pc2UgYnV0IHJldHVybnMgbnVsbCBpZiB0aGUgc2VydmljZSB3YXMgbmV2ZXIgcmVnaXN0ZXJlZC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAqIEByZXR1cm4gez9Qcm9taXNlPCFPYmplY3Q+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VydmljZVByb21pc2VPck51bGwod2luLCBpZCkge1xuICByZXR1cm4gZ2V0U2VydmljZVByb21pc2VPck51bGxJbnRlcm5hbCh3aW4sIGlkKTtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgYSBzZXJ2aWNlIGZvciB0aGUgZ2l2ZW4gaWQgYW5kIGFtcGRvYyAoYSBwZXItYW1wZG9jIHNpbmdsZXRvbikuXG4gKiBFeHBlY3RzIHNlcnZpY2UgYGlkYCB0byBiZSByZWdpc3RlcmVkLlxuICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAqIEByZXR1cm4ge1R9XG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VydmljZUZvckRvYyhlbGVtZW50T3JBbXBEb2MsIGlkKSB7XG4gIGNvbnN0IGFtcGRvYyA9IGdldEFtcGRvYyhlbGVtZW50T3JBbXBEb2MpO1xuICBjb25zdCBob2xkZXIgPSBnZXRBbXBkb2NTZXJ2aWNlSG9sZGVyKGFtcGRvYyk7XG4gIHJldHVybiBnZXRTZXJ2aWNlSW50ZXJuYWwoaG9sZGVyLCBpZCk7XG59XG5cblxuLyoqXG4gKiB0bDtkciAtLSBVc2UgZ2V0U2VydmljZUZvckRvYygpIGluc3RlYWQgb2YgdGhpcy5cbiAqXG4gKiBQcml2aWxlZ2VkIHZhcmlhbnQgb2YgZ2V0U2VydmljZUZvckRvYygpIHRoYXQgYWNjZXB0cyBub24tZWxlbWVudCBwYXJhbXMsXG4gKiBlLmcuIHdpbmRvdy5kb2N1bWVudC4gVGhpcyBpcyBjdXJyZW50bHkgbmVjZXNzYXJ5IGZvciBkb2MtbGV2ZWwgc2VydmljZXNcbiAqIHVzZWQgaW4gc3RhcnR1cCwgZS5nLiBDaHVua3MuIEV2ZW50dWFsbHkgd2Ugd2FudCB0byByZW1vdmUgdGhpcyBmdW5jdGlvblxuICogYW5kIGhhdmUgY2FsbGVycyBmaW5kIHRoZSBhcHByb3ByaWF0ZSBBbXBEb2MgYW5kIHVzZSBnZXRTZXJ2aWNlRm9yRG9jKCkuXG4gKlxuICogQHBhcmFtIHshTm9kZXwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gbm9kZU9yRG9jXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAqIEByZXR1cm4ge1R9XG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VydmljZUZvckRvY0RlcHJlY2F0ZWQobm9kZU9yRG9jLCBpZCkge1xuICBjb25zdCBhbXBkb2MgPSBnZXRBbXBkb2Mobm9kZU9yRG9jKTtcbiAgY29uc3QgaG9sZGVyID0gZ2V0QW1wZG9jU2VydmljZUhvbGRlcihhbXBkb2MpO1xuICByZXR1cm4gZ2V0U2VydmljZUludGVybmFsKGhvbGRlciwgaWQpO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2UgZm9yIGEgc2VydmljZSBmb3IgdGhlIGdpdmVuIGlkIGFuZCBhbXBkb2MuIEFsc28gZXhwZWN0c1xuICogYSBzZXJ2aWNlIHRoYXQgaGFzIHRoZSBhY3R1YWwgaW1wbGVtZW50YXRpb24uIFRoZSBwcm9taXNlIHJlc29sdmVzIHdoZW5cbiAqIHRoZSBpbXBsZW1lbnRhdGlvbiBsb2FkZWQuXG4gKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICogQHJldHVybiB7IVByb21pc2U8IU9iamVjdD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTZXJ2aWNlUHJvbWlzZUZvckRvYyhlbGVtZW50T3JBbXBEb2MsIGlkKSB7XG4gIHJldHVybiBnZXRTZXJ2aWNlUHJvbWlzZUludGVybmFsKFxuICAgICAgZ2V0QW1wZG9jU2VydmljZUhvbGRlcihlbGVtZW50T3JBbXBEb2MpLCBpZCk7XG59XG5cblxuLyoqXG4gKiBMaWtlIGdldFNlcnZpY2VQcm9taXNlRm9yRG9jIGJ1dCByZXR1cm5zIG51bGwgaWYgdGhlIHNlcnZpY2Ugd2FzIG5ldmVyXG4gKiByZWdpc3RlcmVkIGZvciB0aGlzIGFtcGRvYy5cbiAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gKiBAcmV0dXJuIHs/UHJvbWlzZTwhT2JqZWN0Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNlcnZpY2VQcm9taXNlT3JOdWxsRm9yRG9jKGVsZW1lbnRPckFtcERvYywgaWQpIHtcbiAgcmV0dXJuIGdldFNlcnZpY2VQcm9taXNlT3JOdWxsSW50ZXJuYWwoXG4gICAgICBnZXRBbXBkb2NTZXJ2aWNlSG9sZGVyKGVsZW1lbnRPckFtcERvYyksIGlkKTtcbn1cblxuLyoqXG4gKiBTZXQgdGhlIHBhcmVudCBhbmQgdG9wIHdpbmRvd3Mgb24gYSBjaGlsZCB3aW5kb3cgKGZyaWVuZGx5IGlmcmFtZSkuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHshV2luZG93fSBwYXJlbnRXaW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldFBhcmVudFdpbmRvdyh3aW4sIHBhcmVudFdpbikge1xuICB3aW4uX19BTVBfUEFSRU5UID0gcGFyZW50V2luO1xuICB3aW4uX19BTVBfVE9QID0gZ2V0VG9wV2luZG93KHBhcmVudFdpbik7XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBwYXJlbnQgd2luZG93IGZvciBhIGNoaWxkIHdpbmRvdyAoZnJpZW5kbHkgaWZyYW1lKS5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHshV2luZG93fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGFyZW50V2luZG93KHdpbikge1xuICByZXR1cm4gd2luLl9fQU1QX1BBUkVOVCB8fCB3aW47XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSB0b3Agd2luZG93IHdoZXJlIEFNUCBSdW50aW1lIGlzIGluc3RhbGxlZCBmb3IgYSBjaGlsZCB3aW5kb3dcbiAqIChmcmllbmRseSBpZnJhbWUpLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4geyFXaW5kb3d9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUb3BXaW5kb3cod2luKSB7XG4gIHJldHVybiB3aW4uX19BTVBfVE9QIHx8IHdpbjtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgdGhlIHBhcmVudCBcImZyaWVuZGx5XCIgaWZyYW1lIGlmIHRoZSBub2RlIGJlbG9uZ3MgdG8gYSBjaGlsZCB3aW5kb3cuXG4gKiBAcGFyYW0geyFOb2RlfSBub2RlXG4gKiBAcGFyYW0geyFXaW5kb3d9IHRvcFdpblxuICogQHJldHVybiB7P0hUTUxJRnJhbWVFbGVtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGFyZW50V2luZG93RnJhbWVFbGVtZW50KG5vZGUsIHRvcFdpbikge1xuICBjb25zdCBjaGlsZFdpbiA9IChub2RlLm93bmVyRG9jdW1lbnQgfHwgbm9kZSkuZGVmYXVsdFZpZXc7XG4gIGlmIChjaGlsZFdpbiAmJiBjaGlsZFdpbiAhPSB0b3BXaW4gJiYgZ2V0VG9wV2luZG93KGNoaWxkV2luKSA9PSB0b3BXaW4pIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7P0hUTUxJRnJhbWVFbGVtZW50fSAqLyAoY2hpbGRXaW4uZnJhbWVFbGVtZW50KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBJZ25vcmUgdGhlIGVycm9yLlxuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IU5vZGV8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IG5vZGVPckRvY1xuICogQHJldHVybiB7IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBbXBkb2Mobm9kZU9yRG9jKSB7XG4gIGlmIChub2RlT3JEb2Mubm9kZVR5cGUpIHtcbiAgICBjb25zdCB3aW4gPSB0b1dpbigvKiogQHR5cGUgeyFEb2N1bWVudH0gKi8gKFxuICAgICAgbm9kZU9yRG9jLm93bmVyRG9jdW1lbnQgfHwgbm9kZU9yRG9jKS5kZWZhdWx0Vmlldyk7XG4gICAgcmV0dXJuIGdldEFtcGRvY1NlcnZpY2Uod2luKS5nZXRBbXBEb2MoLyoqIEB0eXBlIHshTm9kZX0gKi8gKG5vZGVPckRvYykpO1xuICB9XG4gIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSAqLyAobm9kZU9yRG9jKTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IU5vZGV8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IG5vZGVPckRvY1xuICogQHJldHVybiB7IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N8IVdpbmRvd31cbiAqL1xuZnVuY3Rpb24gZ2V0QW1wZG9jU2VydmljZUhvbGRlcihub2RlT3JEb2MpIHtcbiAgY29uc3QgYW1wZG9jID0gZ2V0QW1wZG9jKG5vZGVPckRvYyk7XG4gIHJldHVybiBhbXBkb2MuaXNTaW5nbGVEb2MoKSA/IGFtcGRvYy53aW4gOiBhbXBkb2M7XG59XG5cblxuLyoqXG4gKiBUaGlzIGlzIGVzc2VudGlhbGx5IGEgZHVwbGljYXRlIG9mIGBhbXBkb2MuanNgLCBidXQgbmVjZXNzYXJ5IHRvIGF2b2lkXG4gKiBjaXJjdWxhciBkZXBlbmRlbmNpZXMuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2NTZXJ2aWNlfVxuICovXG5mdW5jdGlvbiBnZXRBbXBkb2NTZXJ2aWNlKHdpbikge1xuICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY1NlcnZpY2V9ICovIChcbiAgICBnZXRTZXJ2aWNlKHdpbiwgJ2FtcGRvYycpKTtcbn1cblxuXG4vKipcbiAqIEdldCBzZXJ2aWNlIGBpZGAgZnJvbSBgaG9sZGVyYC4gQXNzdW1lcyB0aGUgc2VydmljZVxuICogaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkLlxuICogQHBhcmFtIHshT2JqZWN0fSBob2xkZXIgT2JqZWN0IGhvbGRpbmcgdGhlIHNlcnZpY2UgaW5zdGFuY2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKiBAdGVtcGxhdGUgVFxuICovXG5mdW5jdGlvbiBnZXRTZXJ2aWNlSW50ZXJuYWwoaG9sZGVyLCBpZCkge1xuICBkZXYoKS5hc3NlcnQoaXNTZXJ2aWNlUmVnaXN0ZXJlZChob2xkZXIsIGlkKSxcbiAgICAgIGBFeHBlY3RlZCBzZXJ2aWNlICR7aWR9IHRvIGJlIHJlZ2lzdGVyZWRgKTtcbiAgY29uc3Qgc2VydmljZXMgPSBnZXRTZXJ2aWNlcyhob2xkZXIpO1xuICBjb25zdCBzID0gc2VydmljZXNbaWRdO1xuICBpZiAoIXMub2JqKSB7XG4gICAgZGV2KCkuYXNzZXJ0KHMuY3RvciwgYFNlcnZpY2UgJHtpZH0gcmVnaXN0ZXJlZCB3aXRob3V0IGN0b3Igbm9yIGltcGwuYCk7XG4gICAgZGV2KCkuYXNzZXJ0KHMuY29udGV4dCwgYFNlcnZpY2UgJHtpZH0gcmVnaXN0ZXJlZCB3aXRob3V0IGNvbnRleHQuYCk7XG4gICAgcy5vYmogPSBuZXcgcy5jdG9yKHMuY29udGV4dCk7XG4gICAgZGV2KCkuYXNzZXJ0KHMub2JqLCBgU2VydmljZSAke2lkfSBjb25zdHJ1Y3RlZCB0byBudWxsLmApO1xuICAgIHMuY3RvciA9IG51bGw7XG4gICAgcy5jb250ZXh0ID0gbnVsbDtcbiAgICAvLyBUaGUgc2VydmljZSBtYXkgaGF2ZSBiZWVuIHJlcXVlc3RlZCBhbHJlYWR5LCBpbiB3aGljaCBjYXNlIHdlIGhhdmUgYVxuICAgIC8vIHBlbmRpbmcgcHJvbWlzZSB3ZSBuZWVkIHRvIGZ1bGZpbGwuXG4gICAgaWYgKHMucmVzb2x2ZSkge1xuICAgICAgcy5yZXNvbHZlKHMub2JqKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHMub2JqO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IU9iamVjdH0gaG9sZGVyIE9iamVjdCBob2xkaW5nIHRoZSBzZXJ2aWNlIGluc3RhbmNlLlxuICogQHBhcmFtIHshV2luZG93fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBjb250ZXh0IFdpbiBvciBBbXBEb2MuXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKiBAcGFyYW0gez9mdW5jdGlvbihuZXc6T2JqZWN0LCAhV2luZG93KXw/ZnVuY3Rpb24obmV3Ok9iamVjdCwgIS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2MpfSBjdG9yIENvbnN0cnVjdG9yIGZ1bmN0aW9uIHRvIG5ldyB0aGUgc2VydmljZS4gQ2FsbGVkIHdpdGggY29udGV4dC5cbiAqL1xuZnVuY3Rpb24gcmVnaXN0ZXJTZXJ2aWNlSW50ZXJuYWwoaG9sZGVyLCBjb250ZXh0LCBpZCwgY3Rvcikge1xuICBjb25zdCBzZXJ2aWNlcyA9IGdldFNlcnZpY2VzKGhvbGRlcik7XG4gIGxldCBzID0gc2VydmljZXNbaWRdO1xuXG4gIGlmICghcykge1xuICAgIHMgPSBzZXJ2aWNlc1tpZF0gPSB7XG4gICAgICBvYmo6IG51bGwsXG4gICAgICBwcm9taXNlOiBudWxsLFxuICAgICAgcmVzb2x2ZTogbnVsbCxcbiAgICAgIGNvbnRleHQ6IG51bGwsXG4gICAgICBjdG9yOiBudWxsLFxuICAgIH07XG4gIH1cblxuICBpZiAocy5jdG9yIHx8IHMub2JqKSB7XG4gICAgLy8gU2VydmljZSBhbHJlYWR5IHJlZ2lzdGVyZWQuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcy5jdG9yID0gY3RvcjtcbiAgcy5jb250ZXh0ID0gY29udGV4dDtcblxuICAvLyBUaGUgc2VydmljZSBtYXkgaGF2ZSBiZWVuIHJlcXVlc3RlZCBhbHJlYWR5LCBpbiB3aGljaCBjYXNlIHRoZXJlIGlzIGFcbiAgLy8gcGVuZGluZyBwcm9taXNlIHRoYXQgbmVlZHMgdG8gZnVsZmlsbGVkLlxuICBpZiAocy5yZXNvbHZlKSB7XG4gICAgLy8gZ2V0U2VydmljZUludGVybmFsIHdpbGwgcmVzb2x2ZSB0aGUgcHJvbWlzZS5cbiAgICBnZXRTZXJ2aWNlSW50ZXJuYWwoaG9sZGVyLCBpZCk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0geyFPYmplY3R9IGhvbGRlclxuICogQHBhcmFtIHtzdHJpbmd9IGlkIG9mIHRoZSBzZXJ2aWNlLlxuICogQHJldHVybiB7IVByb21pc2U8IU9iamVjdD59XG4gKi9cbmZ1bmN0aW9uIGdldFNlcnZpY2VQcm9taXNlSW50ZXJuYWwoaG9sZGVyLCBpZCkge1xuICBjb25zdCBjYWNoZWQgPSBnZXRTZXJ2aWNlUHJvbWlzZU9yTnVsbEludGVybmFsKGhvbGRlciwgaWQpO1xuICBpZiAoY2FjaGVkKSB7XG4gICAgcmV0dXJuIGNhY2hlZDtcbiAgfVxuICAvLyBTZXJ2aWNlIGlzIG5vdCByZWdpc3RlcmVkLlxuXG4gIC8vIFRPRE8oQGNyYW1mb3JjZSk6IEFkZCBhIGNoZWNrIHRoYXQgaWYgdGhlIGVsZW1lbnQgaXMgZXZlbnR1YWxseSByZWdpc3RlcmVkXG4gIC8vIHRoYXQgdGhlIHNlcnZpY2UgaXMgYWN0dWFsbHkgcHJvdmlkZWQgYW5kIHRoaXMgcHJvbWlzZSByZXNvbHZlcy5cbiAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcbiAgY29uc3Qge3Byb21pc2UsIHJlc29sdmV9ID0gZGVmZXJyZWQ7XG5cbiAgY29uc3Qgc2VydmljZXMgPSBnZXRTZXJ2aWNlcyhob2xkZXIpO1xuICBzZXJ2aWNlc1tpZF0gPSB7XG4gICAgb2JqOiBudWxsLFxuICAgIHByb21pc2UsXG4gICAgcmVzb2x2ZSxcbiAgICBjb250ZXh0OiBudWxsLFxuICAgIGN0b3I6IG51bGwsXG4gIH07XG4gIHJldHVybiBwcm9taXNlO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2UgZm9yIHNlcnZpY2UgYGlkYCBpZiB0aGUgc2VydmljZSBoYXMgYmVlbiByZWdpc3RlcmVkXG4gKiBvbiBgaG9sZGVyYC5cbiAqIEBwYXJhbSB7IU9iamVjdH0gaG9sZGVyXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKiBAcmV0dXJuIHs/UHJvbWlzZTwhT2JqZWN0Pn1cbiAqL1xuZnVuY3Rpb24gZ2V0U2VydmljZVByb21pc2VPck51bGxJbnRlcm5hbChob2xkZXIsIGlkKSB7XG4gIGNvbnN0IHNlcnZpY2VzID0gZ2V0U2VydmljZXMoaG9sZGVyKTtcbiAgY29uc3QgcyA9IHNlcnZpY2VzW2lkXTtcbiAgaWYgKHMpIHtcbiAgICBpZiAocy5wcm9taXNlKSB7XG4gICAgICByZXR1cm4gcy5wcm9taXNlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJbnN0YW50aWF0ZSBzZXJ2aWNlIGlmIG5vdCBhbHJlYWR5IGluc3RhbnRpYXRlZC5cbiAgICAgIGdldFNlcnZpY2VJbnRlcm5hbChob2xkZXIsIGlkKTtcbiAgICAgIHJldHVybiBzLnByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoLyoqIEB0eXBlIHshT2JqZWN0fSAqLyAocy5vYmopKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBvYmplY3QgdGhhdCBob2xkcyB0aGUgc2VydmljZXMgcmVnaXN0ZXJlZCBpbiBhIGhvbGRlci5cbiAqIEBwYXJhbSB7IU9iamVjdH0gaG9sZGVyXG4gKiBAcmV0dXJuIHshT2JqZWN0PHN0cmluZywhU2VydmljZUhvbGRlckRlZj59XG4gKi9cbmZ1bmN0aW9uIGdldFNlcnZpY2VzKGhvbGRlcikge1xuICBsZXQge3NlcnZpY2VzfSA9IGhvbGRlcjtcbiAgaWYgKCFzZXJ2aWNlcykge1xuICAgIHNlcnZpY2VzID0gaG9sZGVyLnNlcnZpY2VzID0ge307XG4gIH1cbiAgcmV0dXJuIHNlcnZpY2VzO1xufVxuXG5cbi8qKlxuICogV2hldGhlciB0aGUgc3BlY2lmaWVkIHNlcnZpY2UgaW1wbGVtZW50cyBgRGlzcG9zYWJsZWAgaW50ZXJmYWNlLlxuICogQHBhcmFtIHshT2JqZWN0fSBzZXJ2aWNlXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNEaXNwb3NhYmxlKHNlcnZpY2UpIHtcbiAgcmV0dXJuIHR5cGVvZiBzZXJ2aWNlLmRpc3Bvc2UgPT0gJ2Z1bmN0aW9uJztcbn1cblxuXG4vKipcbiAqIEFzc2VydHMgdGhhdCB0aGUgc3BlY2lmaWVkIHNlcnZpY2UgaW1wbGVtZW50cyBgRGlzcG9zYWJsZWAgaW50ZXJmYWNlIGFuZFxuICogdHlwZWNhc3RzIHRoZSBpbnN0YW5jZSB0byBgRGlzcG9zYWJsZWAuXG4gKiBAcGFyYW0geyFPYmplY3R9IHNlcnZpY2VcbiAqIEByZXR1cm4geyFEaXNwb3NhYmxlfVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0RGlzcG9zYWJsZShzZXJ2aWNlKSB7XG4gIGRldigpLmFzc2VydChpc0Rpc3Bvc2FibGUoc2VydmljZSksICdyZXF1aXJlZCB0byBpbXBsZW1lbnQgRGlzcG9zYWJsZScpO1xuICByZXR1cm4gLyoqIEB0eXBlIHshRGlzcG9zYWJsZX0gKi8gKHNlcnZpY2UpO1xufVxuXG5cbi8qKlxuICogRGlzcG9zZXMgYWxsIGRpc3Bvc2FibGUgKGltcGxlbWVudHMgYERpc3Bvc2FibGVgIGludGVyZmFjZSkgc2VydmljZXMgaW5cbiAqIGFtcGRvYyBzY29wZS5cbiAqIEBwYXJhbSB7IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGFtcGRvY1xuICovXG5leHBvcnQgZnVuY3Rpb24gZGlzcG9zZVNlcnZpY2VzRm9yRG9jKGFtcGRvYykge1xuICBkaXNwb3NlU2VydmljZXNJbnRlcm5hbChhbXBkb2MpO1xufVxuXG5cbi8qKlxuICogRGlzcG9zZXMgYWxsIGRpc3Bvc2FibGUgKGltcGxlbWVudHMgYERpc3Bvc2FibGVgIGludGVyZmFjZSkgc2VydmljZXMgaW5cbiAqIGVtYmVkIHNjb3BlLlxuICogQHBhcmFtIHshV2luZG93fSBlbWJlZFdpblxuICovXG5leHBvcnQgZnVuY3Rpb24gZGlzcG9zZVNlcnZpY2VzRm9yRW1iZWQoZW1iZWRXaW4pIHtcbiAgZGlzcG9zZVNlcnZpY2VzSW50ZXJuYWwoZW1iZWRXaW4pO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHshT2JqZWN0fSBob2xkZXIgT2JqZWN0IGhvbGRpbmcgdGhlIHNlcnZpY2UgaW5zdGFuY2VzLlxuICovXG5mdW5jdGlvbiBkaXNwb3NlU2VydmljZXNJbnRlcm5hbChob2xkZXIpIHtcbiAgLy8gVE9ETyhkdm95dGVua28pOiBDb25zaWRlciBtYXJraW5nIGhvbGRlciBhcyBkZXN0cm95ZWQgZm9yIGxhdGVyLWFycml2aW5nXG4gIC8vIHNlcnZpY2UgdG8gYmUgY2FuY2VsZWQgYXV0b21hdGljYWxseS5cbiAgY29uc3Qgc2VydmljZXMgPSBnZXRTZXJ2aWNlcyhob2xkZXIpO1xuICBmb3IgKGNvbnN0IGlkIGluIHNlcnZpY2VzKSB7XG4gICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2VydmljZXMsIGlkKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGNvbnN0IHNlcnZpY2VIb2xkZXIgPSBzZXJ2aWNlc1tpZF07XG4gICAgaWYgKHNlcnZpY2VIb2xkZXIub2JqKSB7XG4gICAgICBkaXNwb3NlU2VydmljZUludGVybmFsKGlkLCBzZXJ2aWNlSG9sZGVyLm9iaik7XG4gICAgfSBlbHNlIGlmIChzZXJ2aWNlSG9sZGVyLnByb21pc2UpIHtcbiAgICAgIHNlcnZpY2VIb2xkZXIucHJvbWlzZS50aGVuKFxuICAgICAgICAgIGluc3RhbmNlID0+IGRpc3Bvc2VTZXJ2aWNlSW50ZXJuYWwoaWQsIGluc3RhbmNlKSk7XG4gICAgfVxuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAqIEBwYXJhbSB7IU9iamVjdH0gc2VydmljZVxuICovXG5mdW5jdGlvbiBkaXNwb3NlU2VydmljZUludGVybmFsKGlkLCBzZXJ2aWNlKSB7XG4gIGlmICghaXNEaXNwb3NhYmxlKHNlcnZpY2UpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHRyeSB7XG4gICAgYXNzZXJ0RGlzcG9zYWJsZShzZXJ2aWNlKS5kaXNwb3NlKCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBFbnN1cmUgdGhhdCBhIGZhaWx1cmUgdG8gZGlzcG9zZSBhIHNlcnZpY2UgZG9lcyBub3QgZGlzcnVwdCBvdGhlclxuICAgIC8vIHNlcnZpY2VzLlxuICAgIGRldigpLmVycm9yKCdTRVJWSUNFJywgJ2ZhaWxlZCB0byBkaXNwb3NlIHNlcnZpY2UnLCBpZCwgZSk7XG4gIH1cbn1cblxuXG4vKipcbiAqIFdoZXRoZXIgdGhlIHNwZWNpZmllZCBzZXJ2aWNlIGltcGxlbWVudHMgYEVtYmVkZGFibGVTZXJ2aWNlYCBpbnRlcmZhY2UuXG4gKiBAcGFyYW0geyFPYmplY3R9IHNlcnZpY2VcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0VtYmVkZGFibGUoc2VydmljZSkge1xuICByZXR1cm4gdHlwZW9mIHNlcnZpY2UuYWRvcHRFbWJlZFdpbmRvdyA9PSAnZnVuY3Rpb24nO1xufVxuXG5cbi8qKlxuICogQWRvcHRzIGFuIGVtYmVkZGFibGUgKGltcGxlbWVudHMgYEVtYmVkZGFibGVTZXJ2aWNlYCBpbnRlcmZhY2UpIHNlcnZpY2VcbiAqIGluIGVtYmVkIHNjb3BlLlxuICogQHBhcmFtIHshV2luZG93fSBlbWJlZFdpblxuICogQHBhcmFtIHtzdHJpbmd9IHNlcnZpY2VJZFxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRvcHRTZXJ2aWNlRm9yRW1iZWQoZW1iZWRXaW4sIHNlcnZpY2VJZCkge1xuICBjb25zdCBhZG9wdGVkID0gYWRvcHRTZXJ2aWNlRm9yRW1iZWRJZkVtYmVkZGFibGUoZW1iZWRXaW4sIHNlcnZpY2VJZCk7XG4gIGRldigpLmFzc2VydChhZG9wdGVkLCBgU2VydmljZSAke3NlcnZpY2VJZH0gbm90IGZvdW5kIG9uIHBhcmVudCBgICtcbiAgICAgICdvciBkb2VzblxcJ3QgaW1wbGVtZW50IEVtYmVkZGFibGVTZXJ2aWNlLicpO1xufVxuXG5cbi8qKlxuICogQWRvcHRzIGFuIGVtYmVkZGFibGUgKGltcGxlbWVudHMgYEVtYmVkZGFibGVTZXJ2aWNlYCBpbnRlcmZhY2UpIHNlcnZpY2VcbiAqIGluIGVtYmVkIHNjb3BlLlxuICogQHBhcmFtIHshV2luZG93fSBlbWJlZFdpblxuICogQHBhcmFtIHtzdHJpbmd9IHNlcnZpY2VJZFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkb3B0U2VydmljZUZvckVtYmVkSWZFbWJlZGRhYmxlKGVtYmVkV2luLCBzZXJ2aWNlSWQpIHtcbiAgY29uc3QgZnJhbWVFbGVtZW50ID0gLyoqIEB0eXBlIHshTm9kZX0gKi8gKGRldigpLmFzc2VydChcbiAgICAgIGVtYmVkV2luLmZyYW1lRWxlbWVudCxcbiAgICAgICdmcmFtZUVsZW1lbnQgbm90IGZvdW5kIGZvciBlbWJlZCcpKTtcbiAgY29uc3QgYW1wZG9jID0gZ2V0QW1wZG9jKGZyYW1lRWxlbWVudCk7XG4gIGNvbnN0IGhvbGRlciA9IGdldEFtcGRvY1NlcnZpY2VIb2xkZXIoYW1wZG9jKTtcbiAgaWYgKCFpc1NlcnZpY2VSZWdpc3RlcmVkKGhvbGRlciwgc2VydmljZUlkKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCBzZXJ2aWNlID0gZ2V0U2VydmljZUZvckRvY0RlcHJlY2F0ZWQoZnJhbWVFbGVtZW50LCBzZXJ2aWNlSWQpO1xuICBpZiAoIWlzRW1iZWRkYWJsZShzZXJ2aWNlKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBzZXJ2aWNlLmFkb3B0RW1iZWRXaW5kb3coZW1iZWRXaW4pO1xuICByZXR1cm4gdHJ1ZTtcbn1cblxuXG4vKipcbiAqIFJlc2V0cyBhIHNpbmdsZSBzZXJ2aWNlLCBzbyBpdCBnZXRzIHJlY3JlYXRlZCBvbiBuZXh0IGdldFNlcnZpY2UgaW52b2NhdGlvbi5cbiAqIEBwYXJhbSB7IU9iamVjdH0gaG9sZGVyXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNldFNlcnZpY2VGb3JUZXN0aW5nKGhvbGRlciwgaWQpIHtcbiAgaWYgKGhvbGRlci5zZXJ2aWNlcykge1xuICAgIGhvbGRlci5zZXJ2aWNlc1tpZF0gPSBudWxsO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHshT2JqZWN0fSBob2xkZXIgT2JqZWN0IGhvbGRpbmcgdGhlIHNlcnZpY2UgaW5zdGFuY2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc1NlcnZpY2VSZWdpc3RlcmVkKGhvbGRlciwgaWQpIHtcbiAgY29uc3Qgc2VydmljZSA9IGhvbGRlci5zZXJ2aWNlcyAmJiBob2xkZXIuc2VydmljZXNbaWRdO1xuICAvLyBBbGwgcmVnaXN0ZXJlZCBzZXJ2aWNlcyBtdXN0IGhhdmUgYW4gaW1wbGVtZW50YXRpb24gb3IgYSBjb25zdHJ1Y3Rvci5cbiAgcmV0dXJuICEhKHNlcnZpY2UgJiYgKHNlcnZpY2UuY3RvciB8fCBzZXJ2aWNlLm9iaikpO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7U2VydmljZXN9IGZyb20gJy4uL3NlcnZpY2VzJztcbmltcG9ydCB7ZGV2LCB1c2VyfSBmcm9tICcuLi9sb2cnO1xuaW1wb3J0IHtodG1sRm9yfSBmcm9tICcuLi9zdGF0aWMtdGVtcGxhdGUnO1xuaW1wb3J0IHtpc0V4cGVyaW1lbnRPbn0gZnJvbSAnLi4vZXhwZXJpbWVudHMnO1xuXG4vKiogQGNvbnN0IHtudW1iZXJ9ICovXG5jb25zdCBOVEhfRlJBTUUgPSAyMDA7XG5cbmV4cG9ydCBjbGFzcyBKYW5rTWV0ZXIge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKi9cbiAgY29uc3RydWN0b3Iod2luKSB7XG4gICAgLyoqIEBwcml2YXRlIHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IHdpbjtcbiAgICAvKiogQHByaXZhdGUge251bWJlcn0gKi9cbiAgICB0aGlzLmJhZEZyYW1lQ250XyA9IDA7XG4gICAgLyoqIEBwcml2YXRlIHtudW1iZXJ9ICovXG4gICAgdGhpcy50b3RhbEZyYW1lQ250XyA9IDA7XG4gICAgLyoqIEBwcml2YXRlIHtudW1iZXJ9ICovXG4gICAgdGhpcy5sb25nVGFza0NoaWxkXyA9IDA7XG4gICAgLyoqIEBwcml2YXRlIHtudW1iZXJ9ICovXG4gICAgdGhpcy5sb25nVGFza1NlbGZfID0gMDtcbiAgICAvKiogQHByaXZhdGUgez9udW1iZXJ9ICovXG4gICAgdGhpcy5zY2hlZHVsZWRUaW1lXyA9IG51bGw7XG4gICAgLyoqIEBwcml2YXRlIHs/Li9wZXJmb3JtYW5jZS1pbXBsLlBlcmZvcm1hbmNlfSAqL1xuICAgIHRoaXMucGVyZl8gPSBTZXJ2aWNlcy5wZXJmb3JtYW5jZUZvck9yTnVsbCh3aW4pO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/QmF0dGVyeU1hbmFnZXJ9ICovXG4gICAgdGhpcy5iYXR0ZXJ5TWFuYWdlcl8gPSBudWxsO1xuICAgIC8qKiBAcHJpdmF0ZSB7P251bWJlcn0gKi9cbiAgICB0aGlzLmJhdHRlcnlMZXZlbFN0YXJ0XyA9IG51bGw7XG4gICAgdGhpcy5pbml0aWFsaXplQmF0dGVyeU1hbmFnZXJfKCk7XG5cbiAgICAvKiogQHByaXZhdGUgez9QZXJmb3JtYW5jZU9ic2VydmVyfSAqL1xuICAgIHRoaXMubG9uZ1Rhc2tPYnNlcnZlcl8gPSBudWxsO1xuICAgIHRoaXMuaW5pdGlhbGl6ZUxvbmdUYXNrT2JzZXJ2ZXJfKCk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGJhY2sgZm9yIHNjaGVkdWxlZC5cbiAgICovXG4gIG9uU2NoZWR1bGVkKCkge1xuICAgIGlmICghdGhpcy5pc0VuYWJsZWRfKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gb25seSB0YWtlIHRoZSBmaXJzdCBzY2hlZHVsZSBmb3IgdGhlIGN1cnJlbnQgZnJhbWUuXG4gICAgaWYgKHRoaXMuc2NoZWR1bGVkVGltZV8gPT0gbnVsbCkge1xuICAgICAgdGhpcy5zY2hlZHVsZWRUaW1lXyA9IHRoaXMud2luXy5EYXRlLm5vdygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsYmFjayBmb3IgcnVuLlxuICAgKi9cbiAgb25SdW4oKSB7XG4gICAgaWYgKCF0aGlzLmlzRW5hYmxlZF8oKSB8fCB0aGlzLnNjaGVkdWxlZFRpbWVfID09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgcGFpbnRMYXRlbmN5ID0gdGhpcy53aW5fLkRhdGUubm93KCkgLSB0aGlzLnNjaGVkdWxlZFRpbWVfO1xuICAgIHRoaXMuc2NoZWR1bGVkVGltZV8gPSBudWxsO1xuICAgIHRoaXMudG90YWxGcmFtZUNudF8rKztcbiAgICBpZiAocGFpbnRMYXRlbmN5ID4gMTYpIHtcbiAgICAgIHRoaXMuYmFkRnJhbWVDbnRfKys7XG4gICAgICBkZXYoKS5pbmZvKCdKQU5LJywgJ1BhaW50IGxhdGVuY3k6ICcgKyBwYWludExhdGVuY3kgKyAnbXMnKTtcbiAgICB9XG5cbiAgICAvLyBSZXBvcnQgbWV0cmljcyBvbiBOdGggZnJhbWUsIHNvIHdlIGhhdmUgc29ydCBvZiBub3JtYWxpemVkIG51bWJlcnMuXG4gICAgaWYgKHRoaXMucGVyZl8gJiYgdGhpcy50b3RhbEZyYW1lQ250XyA9PSBOVEhfRlJBTUUpIHtcbiAgICAgIC8vIGdmcDogR29vZCBGcmFtZSBQcm9iYWJpbGl0eVxuICAgICAgY29uc3QgZ2ZwID0gdGhpcy5jYWxjdWxhdGVHZnBfKCk7XG4gICAgICB0aGlzLnBlcmZfLnRpY2tEZWx0YSgnZ2ZwJywgZ2ZwKTtcbiAgICAgIC8vIGJmOiBCYWQgRnJhbWVzXG4gICAgICB0aGlzLnBlcmZfLnRpY2tEZWx0YSgnYmYnLCB0aGlzLmJhZEZyYW1lQ250Xyk7XG4gICAgICBpZiAodGhpcy5sb25nVGFza09ic2VydmVyXykge1xuICAgICAgICAvLyBsdHM6IExvbmcgVGFza3Mgb2YgU2VsZiBmcmFtZVxuICAgICAgICB0aGlzLnBlcmZfLnRpY2tEZWx0YSgnbHRzJywgdGhpcy5sb25nVGFza1NlbGZfKTtcbiAgICAgICAgLy8gbHRjOiBMb25nIFRhc2tzIG9mIENoaWxkIGZyYW1lc1xuICAgICAgICB0aGlzLnBlcmZfLnRpY2tEZWx0YSgnbHRjJywgdGhpcy5sb25nVGFza0NoaWxkXyk7XG4gICAgICAgIHRoaXMubG9uZ1Rhc2tPYnNlcnZlcl8uZGlzY29ubmVjdCgpO1xuICAgICAgICB0aGlzLmxvbmdUYXNrT2JzZXJ2ZXJfID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIGxldCBiYXR0ZXJ5RHJvcCA9IDA7XG4gICAgICBpZiAodGhpcy5iYXR0ZXJ5TWFuYWdlcl8gJiYgKHRoaXMuYmF0dGVyeUxldmVsU3RhcnRfICE9IG51bGwpKSB7XG4gICAgICAgIGJhdHRlcnlEcm9wID0gdGhpcy53aW5fLk1hdGgubWF4KDAsIHRoaXMud2luXy5NYXRoLmZsb29yKFxuICAgICAgICAgICAgdGhpcy5iYXR0ZXJ5TWFuYWdlcl8ubGV2ZWwgKiAxMDAgLSB0aGlzLmJhdHRlcnlMZXZlbFN0YXJ0XykpO1xuICAgICAgICAvLyBiZDogQmF0dGVyeSBEcm9wXG4gICAgICAgIHRoaXMucGVyZl8udGlja0RlbHRhKCdiZCcsIGJhdHRlcnlEcm9wKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucGVyZl8uZmx1c2goKTtcbiAgICAgIGlmIChpc0phbmtNZXRlckVuYWJsZWQodGhpcy53aW5fKSkge1xuICAgICAgICB0aGlzLmRpc3BsYXlNZXRlckRpc3BsYXlfKGJhdHRlcnlEcm9wKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBpZiBpcyBlbmFibGVkXG4gICAqXG4gICAqIEByZXR1cm4gez9ib29sZWFufVxuICAgKi9cbiAgaXNFbmFibGVkXygpIHtcbiAgICByZXR1cm4gaXNKYW5rTWV0ZXJFbmFibGVkKHRoaXMud2luXylcbiAgICAgICAgfHwgKHRoaXMucGVyZl9cbiAgICAgICAgICAgICYmIHRoaXMucGVyZl8uaXNQZXJmb3JtYW5jZVRyYWNraW5nT24oKVxuICAgICAgICAgICAgJiYgdGhpcy50b3RhbEZyYW1lQ250XyA8IE5USF9GUkFNRSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IGJhdHRlcnlEcm9wXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBkaXNwbGF5TWV0ZXJEaXNwbGF5XyhiYXR0ZXJ5RHJvcCkge1xuICAgIGNvbnN0IGRvYyA9IHRoaXMud2luXy5kb2N1bWVudDtcbiAgICBjb25zdCBkaXNwbGF5ID0gaHRtbEZvcihkb2MpYFxuICAgICAgPGRpdiBjbGFzcz1cImktYW1waHRtbC1qYW5rLW1ldGVyXCI+PC9kaXY+YDtcbiAgICBkaXNwbGF5LnRleHRDb250ZW50ID1cbiAgICAgICAgYGJmOiR7dGhpcy5iYWRGcmFtZUNudF99LCBsdHM6ICR7dGhpcy5sb25nVGFza1NlbGZffSwgYCArXG4gICAgICAgIGBsdGM6JHt0aGlzLmxvbmdUYXNrQ2hpbGRffSwgYmQ6JHtiYXR0ZXJ5RHJvcH1gO1xuICAgIGRvYy5ib2R5LmFwcGVuZENoaWxkKGRpc3BsYXkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSBHb29kIEZyYW1lIFByb2JhYmlsaXR5LCB3aGljaCBpcyBhIHZhbHVlIHJhbmdlIGZyb20gMCB0byAxMDAuXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNhbGN1bGF0ZUdmcF8oKSB7XG4gICAgcmV0dXJuIHRoaXMud2luXy5NYXRoLmZsb29yKFxuICAgICAgICAodGhpcy50b3RhbEZyYW1lQ250XyAtIHRoaXMuYmFkRnJhbWVDbnRfKSAvIHRoaXMudG90YWxGcmFtZUNudF8gKiAxMDApO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIGxvbmcgdGFzayBvYnNlcnZlci5cbiAgICovXG4gIGluaXRpYWxpemVMb25nVGFza09ic2VydmVyXygpIHtcbiAgICBpZiAoIXRoaXMuaXNFbmFibGVkXygpIHx8ICFpc0xvbmdUYXNrQXBpU3VwcG9ydGVkKHRoaXMud2luXykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5sb25nVGFza09ic2VydmVyXyA9IG5ldyB0aGlzLndpbl8uUGVyZm9ybWFuY2VPYnNlcnZlcihlbnRyeUxpc3QgPT4ge1xuICAgICAgY29uc3QgZW50cmllcyA9IGVudHJ5TGlzdC5nZXRFbnRyaWVzKCk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVudHJpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGVudHJpZXNbaV0uZW50cnlUeXBlID09ICdsb25ndGFzaycpIHtcbiAgICAgICAgICAvLyBsb25ndGFzayBpcyBhbnkgdGFzayB3aXRoIGR1cmF0aW9uIG9mIGJpZ2dlciB0aGFuIDUwbXNcbiAgICAgICAgICAvLyB3ZSBzdW0gdXAgdGhlIG51bWJlciBvZiA1MG1zIGEgdGFzayBzcGFucy5cbiAgICAgICAgICBjb25zdCBzcGFuID0gdGhpcy53aW5fLk1hdGguZmxvb3IoZW50cmllc1tpXS5kdXJhdGlvbiAvIDUwKTtcbiAgICAgICAgICBpZiAoZW50cmllc1tpXS5uYW1lID09ICdjcm9zcy1vcmlnaW4tZGVzY2VuZGFudCcpIHtcbiAgICAgICAgICAgIHRoaXMubG9uZ1Rhc2tDaGlsZF8gKz0gc3BhbjtcbiAgICAgICAgICAgIHVzZXIoKS5pbmZvKFxuICAgICAgICAgICAgICAgICdMT05HVEFTSycsIGBmcm9tIGNoaWxkIGZyYW1lICR7ZW50cmllc1tpXS5kdXJhdGlvbn1tc2ApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvbmdUYXNrU2VsZl8gKz0gc3BhbjtcbiAgICAgICAgICAgIGRldigpLmluZm8oJ0xPTkdUQVNLJywgYGZyb20gc2VsZiBmcmFtZSAke2VudHJpZXNbaV0uZHVyYXRpb259bXNgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLmxvbmdUYXNrT2JzZXJ2ZXJfLm9ic2VydmUoe2VudHJ5VHlwZXM6IFsnbG9uZ3Rhc2snXX0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIGJhdHRlcnkgbWFuYWdlci5cbiAgICovXG4gIGluaXRpYWxpemVCYXR0ZXJ5TWFuYWdlcl8oKSB7XG4gICAgaWYgKGlzQmF0dGVyeUFwaVN1cHBvcnRlZCh0aGlzLndpbl8pKSB7XG4gICAgICB0aGlzLndpbl8ubmF2aWdhdG9yLmdldEJhdHRlcnkoKS50aGVuKGJhdHRlcnkgPT4ge1xuICAgICAgICB0aGlzLmJhdHRlcnlNYW5hZ2VyXyA9IGJhdHRlcnk7XG4gICAgICAgIHRoaXMuYmF0dGVyeUxldmVsU3RhcnRfID0gYmF0dGVyeS5sZXZlbCAqIDEwMDtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc0phbmtNZXRlckVuYWJsZWQod2luKSB7XG4gIHJldHVybiBpc0V4cGVyaW1lbnRPbih3aW4sICdqYW5rLW1ldGVyJyk7XG59XG5cbi8qKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0xvbmdUYXNrQXBpU3VwcG9ydGVkKHdpbikge1xuICByZXR1cm4gISF3aW4uUGVyZm9ybWFuY2VPYnNlcnZlclxuICAgICAgJiYgISF3aW4uVGFza0F0dHJpYnV0aW9uVGltaW5nXG4gICAgICAmJiAoJ2NvbnRhaW5lck5hbWUnIGluIHdpbi5UYXNrQXR0cmlidXRpb25UaW1pbmcucHJvdG90eXBlKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHVudXNlZFdpblxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNCYXR0ZXJ5QXBpU3VwcG9ydGVkKHVudXNlZFdpbikge1xuICAvLyBUT0RPOiAoQGxhbm5rYSwgIzk3NDkpXG4gIHJldHVybiBmYWxzZTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICBnZXRBbXBkb2MsXG4gIGdldEV4aXN0aW5nU2VydmljZUZvckRvY0luRW1iZWRTY29wZSxcbiAgZ2V0RXhpc3RpbmdTZXJ2aWNlT3JOdWxsLFxuICBnZXRTZXJ2aWNlLFxuICBnZXRTZXJ2aWNlRm9yRG9jLFxuICBnZXRTZXJ2aWNlRm9yRG9jRGVwcmVjYXRlZCxcbiAgZ2V0U2VydmljZVByb21pc2VGb3JEb2MsXG59IGZyb20gJy4vc2VydmljZSc7XG5pbXBvcnQge1xuICBnZXRFbGVtZW50U2VydmljZUZvckRvYyxcbiAgZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZSxcbiAgZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZUZvckRvYyxcbiAgZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZUZvckRvY0luRW1iZWRTY29wZSxcbn0gZnJvbSAnLi9lbGVtZW50LXNlcnZpY2UnO1xuXG4vKiogQHR5cGVkZWYgeyEuLi9leHRlbnNpb25zL2FtcC1zdWJzY3JpcHRpb25zLzAuMS9hbXAtc3Vic2NyaXB0aW9ucy5TdWJzY3JpcHRpb25TZXJ2aWNlfSAqL1xuZXhwb3J0IGxldCBTdWJzY3JpcHRpb25TZXJ2aWNlO1xuXG5leHBvcnQgY2xhc3MgU2VydmljZXMge1xuICAvKipcbiAgICogSGludDogQWRkIGV4dGVuc2lvbnMgZm9sZGVyIHBhdGggdG8gY29tcGlsZS5qcyB3aXRoXG4gICAqIHdhcm5pbmdzIGNhbm5vdCBmaW5kIG1vZHVsZXMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIEFjY2VzcyBzZXJ2aWNlLlxuICAgKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAgICogQHJldHVybiB7IVByb21pc2U8IS4uL2V4dGVuc2lvbnMvYW1wLWFjY2Vzcy8wLjEvYW1wLWFjY2Vzcy5BY2Nlc3NTZXJ2aWNlPn1cbiAgICovXG4gIHN0YXRpYyBhY2Nlc3NTZXJ2aWNlRm9yRG9jKGVsZW1lbnRPckFtcERvYykge1xuICAgIHJldHVybiAoLyoqIEB0eXBlIHshUHJvbWlzZTwhLi4vZXh0ZW5zaW9ucy9hbXAtYWNjZXNzLzAuMS9hbXAtYWNjZXNzLkFjY2Vzc1NlcnZpY2U+fSAqLyAoXG4gICAgICBnZXRFbGVtZW50U2VydmljZUZvckRvYyhlbGVtZW50T3JBbXBEb2MsICdhY2Nlc3MnLCAnYW1wLWFjY2VzcycpKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSBBY2Nlc3Mgc2VydmljZSBvciBhIHByb21pc2UgZm9yIG51bGwgaWYgdGhlXG4gICAqIHNlcnZpY2UgaXMgbm90IGF2YWlsYWJsZSBvbiB0aGUgY3VycmVudCBwYWdlLlxuICAgKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAgICogQHJldHVybiB7IVByb21pc2U8Py4uL2V4dGVuc2lvbnMvYW1wLWFjY2Vzcy8wLjEvYW1wLWFjY2Vzcy5BY2Nlc3NTZXJ2aWNlPn1cbiAgICovXG4gIHN0YXRpYyBhY2Nlc3NTZXJ2aWNlRm9yRG9jT3JOdWxsKGVsZW1lbnRPckFtcERvYykge1xuICAgIHJldHVybiAoLyoqIEB0eXBlIHshUHJvbWlzZTw/Li4vZXh0ZW5zaW9ucy9hbXAtYWNjZXNzLzAuMS9hbXAtYWNjZXNzLkFjY2Vzc1NlcnZpY2U+fSAqLyAoXG4gICAgICBnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlRm9yRG9jKGVsZW1lbnRPckFtcERvYywgJ2FjY2VzcycsXG4gICAgICAgICAgJ2FtcC1hY2Nlc3MnKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgU3Vic2NyaXB0aW9ucyBzZXJ2aWNlLlxuICAgKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAgICogQHJldHVybiB7IVByb21pc2U8IVN1YnNjcmlwdGlvblNlcnZpY2U+fVxuICAgKi9cbiAgc3RhdGljIHN1YnNjcmlwdGlvbnNTZXJ2aWNlRm9yRG9jKGVsZW1lbnRPckFtcERvYykge1xuICAgIHJldHVybiAoLyoqIEB0eXBlIHshUHJvbWlzZTwhU3Vic2NyaXB0aW9uU2VydmljZT59ICovIChcbiAgICAgIGdldEVsZW1lbnRTZXJ2aWNlRm9yRG9jKGVsZW1lbnRPckFtcERvYywgJ3N1YnNjcmlwdGlvbnMnLFxuICAgICAgICAgICdhbXAtc3Vic2NyaXB0aW9ucycpKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSBTdWJzY3JpcHRpb25zIHNlcnZpY2UuXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZTw/U3Vic2NyaXB0aW9uU2VydmljZT59XG4gICAqL1xuICBzdGF0aWMgc3Vic2NyaXB0aW9uc1NlcnZpY2VGb3JEb2NPck51bGwoZWxlbWVudE9yQW1wRG9jKSB7XG4gICAgcmV0dXJuICgvKiogQHR5cGUgeyFQcm9taXNlPD9TdWJzY3JpcHRpb25TZXJ2aWNlPn0gKi8gKFxuICAgICAgZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZUZvckRvYyhlbGVtZW50T3JBbXBEb2MsICdzdWJzY3JpcHRpb25zJyxcbiAgICAgICAgICAnYW1wLXN1YnNjcmlwdGlvbnMnKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVubGlrZSBtb3N0IHNlcnZpY2UgZ2V0dGVycywgcGFzc2luZyBgTm9kZWAgaXMgbmVjZXNzYXJ5IGZvciBzb21lIEZJRS1zY29wZVxuICAgKiBzZXJ2aWNlcyBzaW5jZSBzb21ldGltZXMgd2Ugb25seSBoYXZlIHRoZSBGSUUgRG9jdW1lbnQgZm9yIGNvbnRleHQuXG4gICAqIEBwYXJhbSB7IU5vZGV8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IG5vZGVPckRvY1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL2FjdGlvbi1pbXBsLkFjdGlvblNlcnZpY2V9XG4gICAqL1xuICBzdGF0aWMgYWN0aW9uU2VydmljZUZvckRvYyhub2RlT3JEb2MpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL2FjdGlvbi1pbXBsLkFjdGlvblNlcnZpY2V9ICovIChcbiAgICAgIGdldEV4aXN0aW5nU2VydmljZUZvckRvY0luRW1iZWRTY29wZShcbiAgICAgICAgICBub2RlT3JEb2MsICdhY3Rpb24nLCAvKiBvcHRfZmFsbGJhY2tUb1RvcFdpbiAqLyB0cnVlKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFBY3Rpdml0eT59XG4gICAqL1xuICBzdGF0aWMgYWN0aXZpdHlGb3JEb2MoZWxlbWVudE9yQW1wRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2U8IUFjdGl2aXR5Pn0gKi8gKFxuICAgICAgZ2V0RWxlbWVudFNlcnZpY2VGb3JEb2MoZWxlbWVudE9yQW1wRG9jLCAnYWN0aXZpdHknLCAnYW1wLWFuYWx5dGljcycpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBnbG9iYWwgaW5zdGFuY2Ugb2YgdGhlIGBBbXBEb2NTZXJ2aWNlYCBzZXJ2aWNlIHRoYXQgY2FuIGJlXG4gICAqIHVzZWQgdG8gcmVzb2x2ZSBhbiBhbXBkb2MgZm9yIGFueSBub2RlOiBlaXRoZXIgaW4gdGhlIHNpbmdsZS1kb2Mgb3JcbiAgICogc2hhZG93LWRvYyBlbnZpcm9ubWVudC5cbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5kb3dcbiAgICogQHJldHVybiB7IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2NTZXJ2aWNlfVxuICAgKi9cbiAgc3RhdGljIGFtcGRvY1NlcnZpY2VGb3Iod2luZG93KSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2NTZXJ2aWNlfSAqLyAoXG4gICAgICBnZXRTZXJ2aWNlKHdpbmRvdywgJ2FtcGRvYycpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBBbXBEb2MgZm9yIHRoZSBzcGVjaWZpZWQgY29udGV4dCBub2RlLlxuICAgKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAgICogQHJldHVybiB7IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9XG4gICAqL1xuICBzdGF0aWMgYW1wZG9jKGVsZW1lbnRPckFtcERvYykge1xuICAgIHJldHVybiBnZXRBbXBkb2MoZWxlbWVudE9yQW1wRG9jKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAgICogQHBhcmFtIHtib29sZWFuPX0gbG9hZEFuYWx5dGljc1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhLi4vZXh0ZW5zaW9ucy9hbXAtYW5hbHl0aWNzLzAuMS9pbnN0cnVtZW50YXRpb24uSW5zdHJ1bWVudGF0aW9uU2VydmljZT59XG4gICAqL1xuICBzdGF0aWMgYW5hbHl0aWNzRm9yRG9jKGVsZW1lbnRPckFtcERvYywgbG9hZEFuYWx5dGljcyA9IGZhbHNlKSB7XG4gICAgaWYgKGxvYWRBbmFseXRpY3MpIHtcbiAgICAgIC8vIEdldCBFeHRlbnNpb25zIHNlcnZpY2UgYW5kIGZvcmNlIGxvYWQgYW5hbHl0aWNzIGV4dGVuc2lvbi5cbiAgICAgIGNvbnN0IGFtcGRvYyA9IGdldEFtcGRvYyhlbGVtZW50T3JBbXBEb2MpO1xuICAgICAgU2VydmljZXMuZXh0ZW5zaW9uc0ZvcihhbXBkb2Mud2luKS4vKk9LKi9pbnN0YWxsRXh0ZW5zaW9uRm9yRG9jKFxuICAgICAgICAgIGFtcGRvYywgJ2FtcC1hbmFseXRpY3MnKTtcbiAgICB9XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2U8IS4uL2V4dGVuc2lvbnMvYW1wLWFuYWx5dGljcy8wLjEvaW5zdHJ1bWVudGF0aW9uLkluc3RydW1lbnRhdGlvblNlcnZpY2U+fSAqLyAoXG4gICAgICBnZXRFbGVtZW50U2VydmljZUZvckRvYyhlbGVtZW50T3JBbXBEb2MsICdhbXAtYW5hbHl0aWNzLWluc3RydW1lbnRhdGlvbicsXG4gICAgICAgICAgJ2FtcC1hbmFseXRpY3MnKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gICAqIEByZXR1cm4geyFQcm9taXNlPD8uLi9leHRlbnNpb25zL2FtcC1hbmFseXRpY3MvMC4xL2luc3RydW1lbnRhdGlvbi5JbnN0cnVtZW50YXRpb25TZXJ2aWNlPn1cbiAgICovXG4gIHN0YXRpYyBhbmFseXRpY3NGb3JEb2NPck51bGwoZWxlbWVudE9yQW1wRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2U8Py4uL2V4dGVuc2lvbnMvYW1wLWFuYWx5dGljcy8wLjEvaW5zdHJ1bWVudGF0aW9uLkluc3RydW1lbnRhdGlvblNlcnZpY2U+fSAqLyAoXG4gICAgICBnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlRm9yRG9jKGVsZW1lbnRPckFtcERvYyxcbiAgICAgICAgICAnYW1wLWFuYWx5dGljcy1pbnN0cnVtZW50YXRpb24nLCAnYW1wLWFuYWx5dGljcycpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpbmRvd1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL2JhdGNoZWQteGhyLWltcGwuQmF0Y2hlZFhocn1cbiAgICovXG4gIHN0YXRpYyBiYXRjaGVkWGhyRm9yKHdpbmRvdykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UvYmF0Y2hlZC14aHItaW1wbC5CYXRjaGVkWGhyfSAqLyAoXG4gICAgICBnZXRTZXJ2aWNlKHdpbmRvdywgJ2JhdGNoZWQteGhyJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZTw/Li4vZXh0ZW5zaW9ucy9hbXAtYmluZC8wLjEvYmluZC1pbXBsLkJpbmQ+fVxuICAgKi9cbiAgc3RhdGljIGJpbmRGb3JEb2NPck51bGwoZWxlbWVudE9yQW1wRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2U8Py4uL2V4dGVuc2lvbnMvYW1wLWJpbmQvMC4xL2JpbmQtaW1wbC5CaW5kPn0gKi8gKFxuICAgICAgZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZUZvckRvY0luRW1iZWRTY29wZShcbiAgICAgICAgICBlbGVtZW50T3JBbXBEb2MsICdiaW5kJywgJ2FtcC1iaW5kJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhLi9zZXJ2aWNlL2NpZC1pbXBsLkNpZD59XG4gICAqL1xuICBzdGF0aWMgY2lkRm9yRG9jKGVsZW1lbnRPckFtcERvYykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlPCEuL3NlcnZpY2UvY2lkLWltcGwuQ2lkPn0gKi8gKFxuICAgICAgZ2V0U2VydmljZVByb21pc2VGb3JEb2MoZWxlbWVudE9yQW1wRG9jLCAnY2lkJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL25hdmlnYXRpb24uTmF2aWdhdGlvbn1cbiAgICovXG4gIHN0YXRpYyBuYXZpZ2F0aW9uRm9yRG9jKGVsZW1lbnRPckFtcERvYykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UvbmF2aWdhdGlvbi5OYXZpZ2F0aW9ufSAqLyAoXG4gICAgICBnZXRTZXJ2aWNlRm9yRG9jKGVsZW1lbnRPckFtcERvYywgJ25hdmlnYXRpb24nKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5kb3dcbiAgICogQHJldHVybiB7IS4vc2VydmljZS9jcnlwdG8taW1wbC5DcnlwdG99XG4gICAqL1xuICBzdGF0aWMgY3J5cHRvRm9yKHdpbmRvdykge1xuICAgIHJldHVybiAoLyoqIEB0eXBlIHshLi9zZXJ2aWNlL2NyeXB0by1pbXBsLkNyeXB0b30gKi8gKFxuICAgICAgZ2V0U2VydmljZSh3aW5kb3csICdjcnlwdG8nKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL2RvY3VtZW50LWluZm8taW1wbC5Eb2N1bWVudEluZm9EZWZ9IEluZm8gYWJvdXQgdGhlIGRvY1xuICAgKi9cbiAgc3RhdGljIGRvY3VtZW50SW5mb0ZvckRvYyhlbGVtZW50T3JBbXBEb2MpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL2RvY3VtZW50LWluZm8taW1wbC5Eb2NJbmZvfSAqLyAoXG4gICAgICBnZXRTZXJ2aWNlRm9yRG9jKGVsZW1lbnRPckFtcERvYywgJ2RvY3VtZW50SW5mbycpKS5nZXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpbmRvd1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL2RvY3VtZW50LXN0YXRlLkRvY3VtZW50U3RhdGV9XG4gICAqL1xuICBzdGF0aWMgZG9jdW1lbnRTdGF0ZUZvcih3aW5kb3cpIHtcbiAgICByZXR1cm4gZ2V0U2VydmljZSh3aW5kb3csICdkb2N1bWVudFN0YXRlJyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5kb3dcbiAgICogQHJldHVybiB7IS4vc2VydmljZS9leHRlbnNpb25zLWltcGwuRXh0ZW5zaW9uc31cbiAgICovXG4gIHN0YXRpYyBleHRlbnNpb25zRm9yKHdpbmRvdykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UvZXh0ZW5zaW9ucy1pbXBsLkV4dGVuc2lvbnN9ICovIChcbiAgICAgIGdldFNlcnZpY2Uod2luZG93LCAnZXh0ZW5zaW9ucycpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHNlcnZpY2UgaW1wbGVtZW50ZWQgaW4gc2VydmljZS9oaXN0b3J5LWltcGwuXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL2hpc3RvcnktaW1wbC5IaXN0b3J5fVxuICAgKi9cbiAgc3RhdGljIGhpc3RvcnlGb3JEb2MoZWxlbWVudE9yQW1wRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS9oaXN0b3J5LWltcGwuSGlzdG9yeX0gKi8gKFxuICAgICAgZ2V0U2VydmljZUZvckRvYyhlbGVtZW50T3JBbXBEb2MsICdoaXN0b3J5JykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEByZXR1cm4geyEuL2lucHV0LklucHV0fVxuICAgKi9cbiAgc3RhdGljIGlucHV0Rm9yKHdpbikge1xuICAgIHJldHVybiBnZXRTZXJ2aWNlKHdpbiwgJ2lucHV0Jyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvbGF5ZXJzLWltcGwuTGF5b3V0TGF5ZXJzfVxuICAgKi9cbiAgc3RhdGljIGxheWVyc0ZvckRvYyhlbGVtZW50T3JBbXBEb2MpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL2xheWVycy1pbXBsLkxheW91dExheWVyc30gKi8gKFxuICAgICAgZ2V0U2VydmljZUZvckRvYyhlbGVtZW50T3JBbXBEb2MsICdsYXllcnMnKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5kb3dcbiAgICogQHJldHVybiB7IS4vc2VydmljZS9wZXJmb3JtYW5jZS1pbXBsLlBlcmZvcm1hbmNlfVxuICAgKi9cbiAgc3RhdGljIHBlcmZvcm1hbmNlRm9yKHdpbmRvdykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UvcGVyZm9ybWFuY2UtaW1wbC5QZXJmb3JtYW5jZX0qLyAoXG4gICAgICBnZXRTZXJ2aWNlKHdpbmRvdywgJ3BlcmZvcm1hbmNlJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luZG93XG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvcGVyZm9ybWFuY2UtaW1wbC5QZXJmb3JtYW5jZX1cbiAgICovXG4gIHN0YXRpYyBwZXJmb3JtYW5jZUZvck9yTnVsbCh3aW5kb3cpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL3BlcmZvcm1hbmNlLWltcGwuUGVyZm9ybWFuY2V9Ki8gKFxuICAgICAgZ2V0RXhpc3RpbmdTZXJ2aWNlT3JOdWxsKHdpbmRvdywgJ3BlcmZvcm1hbmNlJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luZG93XG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvcGxhdGZvcm0taW1wbC5QbGF0Zm9ybX1cbiAgICovXG4gIHN0YXRpYyBwbGF0Zm9ybUZvcih3aW5kb3cpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL3BsYXRmb3JtLWltcGwuUGxhdGZvcm19ICovIChcbiAgICAgIGdldFNlcnZpY2Uod2luZG93LCAncGxhdGZvcm0nKSk7XG4gIH1cblxuICAvKipcbiAgICogVXNlcyBnZXRTZXJ2aWNlRm9yRG9jRGVwcmVjYXRlZCgpIHNpbmNlIFJlc291cmNlcyBpcyBhIHN0YXJ0dXAgc2VydmljZS5cbiAgICogQHBhcmFtIHshTm9kZXwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gbm9kZU9yRG9jXG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvcmVzb3VyY2VzLWltcGwuUmVzb3VyY2VzfVxuICAgKi9cbiAgc3RhdGljIHJlc291cmNlc0ZvckRvYyhub2RlT3JEb2MpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL3Jlc291cmNlcy1pbXBsLlJlc291cmNlc30gKi8gKFxuICAgICAgZ2V0U2VydmljZUZvckRvY0RlcHJlY2F0ZWQobm9kZU9yRG9jLCAncmVzb3VyY2VzJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEByZXR1cm4gez9Qcm9taXNlPD97aW5jb21pbmdGcmFnbWVudDogc3RyaW5nLCBvdXRnb2luZ0ZyYWdtZW50OiBzdHJpbmd9Pn1cbiAgICovXG4gIHN0YXRpYyBzaGFyZVRyYWNraW5nRm9yT3JOdWxsKHdpbikge1xuICAgIHJldHVybiAoLyoqIEB0eXBlIHshUHJvbWlzZTw/e2luY29taW5nRnJhZ21lbnQ6IHN0cmluZywgb3V0Z29pbmdGcmFnbWVudDogc3RyaW5nfT59ICovIChcbiAgICAgIGdldEVsZW1lbnRTZXJ2aWNlSWZBdmFpbGFibGUod2luLCAnc2hhcmUtdHJhY2tpbmcnLFxuICAgICAgICAgICdhbXAtc2hhcmUtdHJhY2tpbmcnLCB0cnVlKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEByZXR1cm4gez9Qcm9taXNlPD8uLi9leHRlbnNpb25zL2FtcC1zdG9yeS8xLjAvdmFyaWFibGUtc2VydmljZS5TdG9yeVZhcmlhYmxlRGVmPn1cbiAgICovXG4gIHN0YXRpYyBzdG9yeVZhcmlhYmxlU2VydmljZUZvck9yTnVsbCh3aW4pIHtcbiAgICByZXR1cm4gKFxuICAgIC8qKiBAdHlwZSB7IVByb21pc2U8Py4uL2V4dGVuc2lvbnMvYW1wLXN0b3J5LzEuMC92YXJpYWJsZS1zZXJ2aWNlLlN0b3J5VmFyaWFibGVEZWY+fSAqL1xuICAgICAgKGdldEVsZW1lbnRTZXJ2aWNlSWZBdmFpbGFibGUod2luLCAnc3RvcnktdmFyaWFibGUnLCAnYW1wLXN0b3J5JyxcbiAgICAgICAgICB0cnVlKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcnNpb24gb2YgdGhlIHN0b3J5IHN0b3JlIHNlcnZpY2UgZGVwZW5kcyBvbiB3aGljaCB2ZXJzaW9uIG9mIGFtcC1zdG9yeVxuICAgKiB0aGUgcHVibGlzaGVyIGlzIGxvYWRpbmcuIFRoZXkgYWxsIGhhdmUgdGhlIHNhbWUgaW1wbGVtZW50YXRpb24uXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEByZXR1cm4gez9Qcm9taXNlPD8uLi9leHRlbnNpb25zL2FtcC1zdG9yeS8xLjAvYW1wLXN0b3J5LXN0b3JlLXNlcnZpY2UuQW1wU3RvcnlTdG9yZVNlcnZpY2V8Py4uL2V4dGVuc2lvbnMvYW1wLXN0b3J5LzAuMS9hbXAtc3Rvcnktc3RvcmUtc2VydmljZS5BbXBTdG9yeVN0b3JlU2VydmljZT59XG4gICAqL1xuICBzdGF0aWMgc3RvcnlTdG9yZVNlcnZpY2VGb3JPck51bGwod2luKSB7XG4gICAgcmV0dXJuIChcbiAgICAvKiogQHR5cGUgeyFQcm9taXNlPD8uLi9leHRlbnNpb25zL2FtcC1zdG9yeS8xLjAvYW1wLXN0b3J5LXN0b3JlLXNlcnZpY2UuQW1wU3RvcnlTdG9yZVNlcnZpY2V8Py4uL2V4dGVuc2lvbnMvYW1wLXN0b3J5LzAuMS9hbXAtc3Rvcnktc3RvcmUtc2VydmljZS5BbXBTdG9yeVN0b3JlU2VydmljZT59ICovXG4gICAgICAoZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZSh3aW4sICdzdG9yeS1zdG9yZScsICdhbXAtc3RvcnknKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEByZXR1cm4gez8uLi9leHRlbnNpb25zL2FtcC1zdG9yeS8xLjAvYW1wLXN0b3J5LXN0b3JlLXNlcnZpY2UuQW1wU3RvcnlTdG9yZVNlcnZpY2V9XG4gICAqL1xuICBzdGF0aWMgc3RvcnlTdG9yZVNlcnZpY2Uod2luKSB7XG4gICAgcmV0dXJuICgvKiogQHR5cGUgez8uLi9leHRlbnNpb25zL2FtcC1zdG9yeS8xLjAvYW1wLXN0b3J5LXN0b3JlLXNlcnZpY2UuQW1wU3RvcnlTdG9yZVNlcnZpY2V9ICovXG4gICAgICAoZ2V0RXhpc3RpbmdTZXJ2aWNlT3JOdWxsKHdpbiwgJ3N0b3J5LXN0b3JlJykpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcmV0dXJuIHs/Li4vZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMS4wL2FtcC1zdG9yeS1yZXF1ZXN0LXNlcnZpY2UuQW1wU3RvcnlSZXF1ZXN0U2VydmljZX1cbiAgICovXG4gIHN0YXRpYyBzdG9yeVJlcXVlc3RTZXJ2aWNlKHdpbikge1xuICAgIHJldHVybiAoLyoqIEB0eXBlIHs/Li4vZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMS4wL2FtcC1zdG9yeS1yZXF1ZXN0LXNlcnZpY2UuQW1wU3RvcnlSZXF1ZXN0U2VydmljZX0gKi9cbiAgICAgIChnZXRFeGlzdGluZ1NlcnZpY2VPck51bGwod2luLCAnc3RvcnktcmVxdWVzdCcpKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICogQHJldHVybiB7IVByb21pc2U8Py4uL2V4dGVuc2lvbnMvYW1wLXN0b3J5LzEuMC9sb2NhbGl6YXRpb24uTG9jYWxpemF0aW9uU2VydmljZT59XG4gICAqL1xuICBzdGF0aWMgbG9jYWxpemF0aW9uU2VydmljZUZvck9yTnVsbCh3aW4pIHtcbiAgICByZXR1cm4gKFxuICAgIC8qKiBAdHlwZSB7IVByb21pc2U8Py4uL2V4dGVuc2lvbnMvYW1wLXN0b3J5LzEuMC9sb2NhbGl6YXRpb24uTG9jYWxpemF0aW9uU2VydmljZT59ICovXG4gICAgICAoZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZSh3aW4sICdsb2NhbGl6YXRpb24nLCAnYW1wLXN0b3J5JywgdHJ1ZSkpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcmV0dXJuIHshLi4vZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMS4wL2xvY2FsaXphdGlvbi5Mb2NhbGl6YXRpb25TZXJ2aWNlfVxuICAgKi9cbiAgc3RhdGljIGxvY2FsaXphdGlvblNlcnZpY2Uod2luKSB7XG4gICAgcmV0dXJuIGdldFNlcnZpY2Uod2luLCAnbG9jYWxpemF0aW9uJyk7XG4gIH1cblxuICAvKipcbiAgICogVE9ETygjMTQzNTcpOiBSZW1vdmUgdGhpcyB3aGVuIGFtcC1zdG9yeTowLjEgaXMgZGVwcmVjYXRlZC5cbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICogQHJldHVybiB7IS4uL2V4dGVuc2lvbnMvYW1wLXN0b3J5LzAuMS9hbXAtc3Rvcnktc3RvcmUtc2VydmljZS5BbXBTdG9yeVN0b3JlU2VydmljZX1cbiAgICovXG4gIHN0YXRpYyBzdG9yeVN0b3JlU2VydmljZVYwMSh3aW4pIHtcbiAgICByZXR1cm4gZ2V0U2VydmljZSh3aW4sICdzdG9yeS1zdG9yZScpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRPRE8oIzE0MzU3KTogUmVtb3ZlIHRoaXMgd2hlbiBhbXAtc3Rvcnk6MC4xIGlzIGRlcHJlY2F0ZWQuXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEByZXR1cm4geyEuLi9leHRlbnNpb25zL2FtcC1zdG9yeS8wLjEvYW1wLXN0b3J5LXJlcXVlc3Qtc2VydmljZS5BbXBTdG9yeVJlcXVlc3RTZXJ2aWNlfVxuICAgKi9cbiAgc3RhdGljIHN0b3J5UmVxdWVzdFNlcnZpY2VWMDEod2luKSB7XG4gICAgcmV0dXJuIGdldFNlcnZpY2Uod2luLCAnc3RvcnktcmVxdWVzdC12MDEnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUT0RPKCMxNDM1Nyk6IFJlbW92ZSB0aGlzIHdoZW4gYW1wLXN0b3J5OjAuMSBpcyBkZXByZWNhdGVkLlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTw/Li4vZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMC4xL2xvY2FsaXphdGlvbi5Mb2NhbGl6YXRpb25TZXJ2aWNlPn1cbiAgICovXG4gIHN0YXRpYyBsb2NhbGl6YXRpb25TZXJ2aWNlRm9yT3JOdWxsVjAxKHdpbikge1xuICAgIHJldHVybiAoXG4gICAgLyoqIEB0eXBlIHshUHJvbWlzZTw/Li4vZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMC4xL2xvY2FsaXphdGlvbi5Mb2NhbGl6YXRpb25TZXJ2aWNlPn0gKi9cbiAgICAgIChnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlKHdpbiwgJ2xvY2FsaXphdGlvbi12MDEnLCAnYW1wLXN0b3J5JyxcbiAgICAgICAgICB0cnVlKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRPRE8oIzE0MzU3KTogUmVtb3ZlIHRoaXMgd2hlbiBhbXAtc3Rvcnk6MC4xIGlzIGRlcHJlY2F0ZWQuXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEByZXR1cm4geyEuLi9leHRlbnNpb25zL2FtcC1zdG9yeS8wLjEvbG9jYWxpemF0aW9uLkxvY2FsaXphdGlvblNlcnZpY2V9XG4gICAqL1xuICBzdGF0aWMgbG9jYWxpemF0aW9uU2VydmljZVYwMSh3aW4pIHtcbiAgICByZXR1cm4gZ2V0U2VydmljZSh3aW4sICdsb2NhbGl6YXRpb24tdjAxJyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICogQHJldHVybiB7P1Byb21pc2U8Py4uL2V4dGVuc2lvbnMvYW1wLXZpZXdlci1pbnRlZ3JhdGlvbi8wLjEvdmFyaWFibGUtc2VydmljZS5WaWV3ZXJJbnRlZ3JhdGlvblZhcmlhYmxlRGVmPn1cbiAgICovXG4gIHN0YXRpYyB2aWV3ZXJJbnRlZ3JhdGlvblZhcmlhYmxlU2VydmljZUZvck9yTnVsbCh3aW4pIHtcbiAgICByZXR1cm4gKFxuICAgIC8qKiBAdHlwZSB7IVByb21pc2U8Py4uL2V4dGVuc2lvbnMvYW1wLXZpZXdlci1pbnRlZ3JhdGlvbi8wLjEvdmFyaWFibGUtc2VydmljZS5WaWV3ZXJJbnRlZ3JhdGlvblZhcmlhYmxlRGVmPn0gKi9cbiAgICAgIChnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlKHdpbiwgJ3ZpZXdlci1pbnRlZ3JhdGlvbi12YXJpYWJsZScsXG4gICAgICAgICAgJ2FtcC12aWV3ZXItaW50ZWdyYXRpb24nLCB0cnVlKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhLi4vZXh0ZW5zaW9ucy9hbXAtYW5pbWF0aW9uLzAuMS93ZWItYW5pbWF0aW9uLXNlcnZpY2UuV2ViQW5pbWF0aW9uU2VydmljZT59XG4gICAqL1xuICBzdGF0aWMgd2ViQW5pbWF0aW9uU2VydmljZUZvcihlbGVtZW50T3JBbXBEb2MpIHtcbiAgICByZXR1cm4gKC8qKiBAdHlwZSB7IVByb21pc2U8IS4uL2V4dGVuc2lvbnMvYW1wLWFuaW1hdGlvbi8wLjEvd2ViLWFuaW1hdGlvbi1zZXJ2aWNlLldlYkFuaW1hdGlvblNlcnZpY2U+fSAqL1xuICAgICAgKGdldEVsZW1lbnRTZXJ2aWNlRm9yRG9jKFxuICAgICAgICAgIGVsZW1lbnRPckFtcERvYywgJ3dlYi1hbmltYXRpb24nLCAnYW1wLWFuaW1hdGlvbicpKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCEuL3NlcnZpY2Uvc3RvcmFnZS1pbXBsLlN0b3JhZ2U+fVxuICAgKi9cbiAgc3RhdGljIHN0b3JhZ2VGb3JEb2MoZWxlbWVudE9yQW1wRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2U8IS4vc2VydmljZS9zdG9yYWdlLWltcGwuU3RvcmFnZT59ICovIChcbiAgICAgIGdldFNlcnZpY2VQcm9taXNlRm9yRG9jKGVsZW1lbnRPckFtcERvYywgJ3N0b3JhZ2UnKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5kb3dcbiAgICogQHJldHVybiB7IS4vc2VydmljZS90ZW1wbGF0ZS1pbXBsLlRlbXBsYXRlc31cbiAgICovXG4gIHN0YXRpYyB0ZW1wbGF0ZXNGb3Iod2luZG93KSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS90ZW1wbGF0ZS1pbXBsLlRlbXBsYXRlc30gKi8gKFxuICAgICAgZ2V0U2VydmljZSh3aW5kb3csICd0ZW1wbGF0ZXMnKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5kb3dcbiAgICogQHJldHVybiB7IS4vc2VydmljZS90aW1lci1pbXBsLlRpbWVyfVxuICAgKi9cbiAgc3RhdGljIHRpbWVyRm9yKHdpbmRvdykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UvdGltZXItaW1wbC5UaW1lcn0gKi8gKFxuICAgICAgZ2V0U2VydmljZSh3aW5kb3csICd0aW1lcicpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVbmxpa2UgbW9zdCBzZXJ2aWNlIGdldHRlcnMsIHBhc3NpbmcgYE5vZGVgIGlzIG5lY2Vzc2FyeSBmb3Igc29tZSBGSUUtc2NvcGVcbiAgICogc2VydmljZXMgc2luY2Ugc29tZXRpbWVzIHdlIG9ubHkgaGF2ZSB0aGUgRklFIERvY3VtZW50IGZvciBjb250ZXh0LlxuICAgKiBAcGFyYW0geyFOb2RlfCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBub2RlT3JEb2NcbiAgICogQHJldHVybiB7IS4vc2VydmljZS91cmwtcmVwbGFjZW1lbnRzLWltcGwuVXJsUmVwbGFjZW1lbnRzfVxuICAgKi9cbiAgc3RhdGljIHVybFJlcGxhY2VtZW50c0ZvckRvYyhub2RlT3JEb2MpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL3VybC1yZXBsYWNlbWVudHMtaW1wbC5VcmxSZXBsYWNlbWVudHN9ICovIChcbiAgICAgIGdldEV4aXN0aW5nU2VydmljZUZvckRvY0luRW1iZWRTY29wZShcbiAgICAgICAgICBub2RlT3JEb2MsICd1cmwtcmVwbGFjZScsIC8qIG9wdF9mYWxsYmFja1RvVG9wV2luICovIHRydWUpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAgICogQHJldHVybiB7IVByb21pc2U8IS4uL2V4dGVuc2lvbnMvYW1wLXVzZXItbm90aWZpY2F0aW9uLzAuMS9hbXAtdXNlci1ub3RpZmljYXRpb24uVXNlck5vdGlmaWNhdGlvbk1hbmFnZXI+fVxuICAgKi9cbiAgc3RhdGljIHVzZXJOb3RpZmljYXRpb25NYW5hZ2VyRm9yRG9jKGVsZW1lbnRPckFtcERvYykge1xuICAgIHJldHVybiAoLyoqIEB0eXBlIHshUHJvbWlzZTwhLi4vZXh0ZW5zaW9ucy9hbXAtdXNlci1ub3RpZmljYXRpb24vMC4xL2FtcC11c2VyLW5vdGlmaWNhdGlvbi5Vc2VyTm90aWZpY2F0aW9uTWFuYWdlcj59ICovXG4gICAgICAoZ2V0RWxlbWVudFNlcnZpY2VGb3JEb2MoZWxlbWVudE9yQW1wRG9jLCAndXNlck5vdGlmaWNhdGlvbk1hbmFnZXInLFxuICAgICAgICAgICdhbXAtdXNlci1ub3RpZmljYXRpb24nKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgY29uc2VudFBvbGljeSBTZXJ2aWNlIG9yIGEgcHJvbWlzZSBmb3IgbnVsbCBpZlxuICAgKiB0aGUgc2VydmljZSBpcyBub3QgYXZhaWxhYmxlIG9uIHRoZSBjdXJyZW50IHBhZ2UuXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZTw/Li4vZXh0ZW5zaW9ucy9hbXAtY29uc2VudC8wLjEvY29uc2VudC1wb2xpY3ktbWFuYWdlci5Db25zZW50UG9saWN5TWFuYWdlcj59XG4gICAqL1xuICBzdGF0aWMgY29uc2VudFBvbGljeVNlcnZpY2VGb3JEb2NPck51bGwoZWxlbWVudE9yQW1wRG9jKSB7XG4gICAgcmV0dXJuICgvKiogQHR5cGUgeyFQcm9taXNlPD8uLi9leHRlbnNpb25zL2FtcC1jb25zZW50LzAuMS9jb25zZW50LXBvbGljeS1tYW5hZ2VyLkNvbnNlbnRQb2xpY3lNYW5hZ2VyPn0gKi9cbiAgICAgIChnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlRm9yRG9jKGVsZW1lbnRPckFtcERvYyxcbiAgICAgICAgICAnY29uc2VudFBvbGljeU1hbmFnZXInLCAnYW1wLWNvbnNlbnQnKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgZ2VvIHNlcnZpY2Ugb3IgYSBwcm9taXNlIGZvciBudWxsIGlmXG4gICAqIHRoZSBzZXJ2aWNlIGlzIG5vdCBhdmFpbGFibGUgb24gdGhlIGN1cnJlbnQgcGFnZS5cbiAgICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gICAqIEByZXR1cm4geyFQcm9taXNlPD8uLi9leHRlbnNpb25zL2FtcC1nZW8vMC4xL2FtcC1nZW8uR2VvRGVmPn1cbiAgICovXG4gIHN0YXRpYyBnZW9Gb3JEb2NPck51bGwoZWxlbWVudE9yQW1wRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2U8Py4uL2V4dGVuc2lvbnMvYW1wLWdlby8wLjEvYW1wLWdlby5HZW9EZWY+fSAqLyAoXG4gICAgICBnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlRm9yRG9jKFxuICAgICAgICAgIGVsZW1lbnRPckFtcERvYywgJ2dlbycsICdhbXAtZ2VvJywgdHJ1ZSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVubGlrZSBtb3N0IHNlcnZpY2UgZ2V0dGVycywgcGFzc2luZyBgTm9kZWAgaXMgbmVjZXNzYXJ5IGZvciBzb21lIEZJRS1zY29wZVxuICAgKiBzZXJ2aWNlcyBzaW5jZSBzb21ldGltZXMgd2Ugb25seSBoYXZlIHRoZSBGSUUgRG9jdW1lbnQgZm9yIGNvbnRleHQuXG4gICAqIEBwYXJhbSB7IU5vZGV8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IG5vZGVPckRvY1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL3VybC1pbXBsLlVybH1cbiAgICovXG4gIHN0YXRpYyB1cmxGb3JEb2Mobm9kZU9yRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS91cmwtaW1wbC5Vcmx9ICovIChcbiAgICAgIGdldEV4aXN0aW5nU2VydmljZUZvckRvY0luRW1iZWRTY29wZShcbiAgICAgICAgICBub2RlT3JEb2MsICd1cmwnLCAvKiBvcHRfZmFsbGJhY2tUb1RvcFdpbiAqLyB0cnVlKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSBleHBlcmltZW50IHZhcmlhbnRzIG9yIGEgcHJvbWlzZSBmb3IgbnVsbCBpZiBpdFxuICAgKiBpcyBub3QgYXZhaWxhYmxlIG9uIHRoZSBjdXJyZW50IHBhZ2UuXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEByZXR1cm4geyFQcm9taXNlPD9PYmplY3Q8c3RyaW5nPj59XG4gICAqL1xuICBzdGF0aWMgdmFyaWFudEZvck9yTnVsbCh3aW4pIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZTw/T2JqZWN0PHN0cmluZz4+fSAqLyAoXG4gICAgICBnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlKHdpbiwgJ3ZhcmlhbnQnLCAnYW1wLWV4cGVyaW1lbnQnLCB0cnVlKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvdmlkZW8tc2VydmljZS1pbnRlcmZhY2UuVmlkZW9TZXJ2aWNlSW50ZXJmYWNlfVxuICAgKi9cbiAgc3RhdGljIHZpZGVvTWFuYWdlckZvckRvYyhlbGVtZW50T3JBbXBEb2MpIHtcbiAgICByZXR1cm4gKFxuICAgICAgLyoqIEB0eXBlIHshLi9zZXJ2aWNlL3ZpZGVvLXNlcnZpY2UtaW50ZXJmYWNlLlZpZGVvU2VydmljZUludGVyZmFjZX0gKi8gKFxuICAgICAgICBnZXRTZXJ2aWNlRm9yRG9jKGVsZW1lbnRPckFtcERvYywgJ3ZpZGVvLW1hbmFnZXInKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZXMgZ2V0U2VydmljZUZvckRvY0RlcHJlY2F0ZWQoKSBzaW5jZSBWaWV3ZXIgaXMgYSBzdGFydHVwIHNlcnZpY2UuXG4gICAqIEBwYXJhbSB7IU5vZGV8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IG5vZGVPckRvY1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL3ZpZXdlci1pbXBsLlZpZXdlcn1cbiAgICovXG4gIHN0YXRpYyB2aWV3ZXJGb3JEb2Mobm9kZU9yRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS92aWV3ZXItaW1wbC5WaWV3ZXJ9ICovIChcbiAgICAgIGdldFNlcnZpY2VGb3JEb2NEZXByZWNhdGVkKG5vZGVPckRvYywgJ3ZpZXdlcicpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHByb21pc2UgZm9yIHRoZSB2aWV3ZXIuIFRoaXMgaXMgYW4gdW51c3VhbCBjYXNlIGFuZCBuZWNlc3Nhcnkgb25seVxuICAgKiBmb3Igc2VydmljZXMgdGhhdCBuZWVkIHJlZmVyZW5jZSB0byB0aGUgdmlld2VyIGJlZm9yZSBpdCBoYXMgYmVlblxuICAgKiBpbml0aWFsaXplZC4gTW9zdCBvZiB0aGUgY29kZSwgaG93ZXZlciwganVzdCBzaG91bGQgdXNlIGB2aWV3ZXJGb3JEb2NgLlxuICAgKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAgICogQHJldHVybiB7IVByb21pc2U8IS4vc2VydmljZS92aWV3ZXItaW1wbC5WaWV3ZXI+fVxuICAgKi9cbiAgc3RhdGljIHZpZXdlclByb21pc2VGb3JEb2MoZWxlbWVudE9yQW1wRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2U8IS4vc2VydmljZS92aWV3ZXItaW1wbC5WaWV3ZXI+fSAqLyAoXG4gICAgICBnZXRTZXJ2aWNlUHJvbWlzZUZvckRvYyhlbGVtZW50T3JBbXBEb2MsICd2aWV3ZXInKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5kb3dcbiAgICogQHJldHVybiB7IS4vc2VydmljZS92c3luYy1pbXBsLlZzeW5jfVxuICAgKi9cbiAgc3RhdGljIHZzeW5jRm9yKHdpbmRvdykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UvdnN5bmMtaW1wbC5Wc3luY30gKi8gKFxuICAgICAgZ2V0U2VydmljZSh3aW5kb3csICd2c3luYycpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VzIGdldFNlcnZpY2VGb3JEb2NEZXByZWNhdGVkKCkgc2luY2UgVmlld3BvcnQgaXMgYSBzdGFydHVwIHNlcnZpY2UuXG4gICAqIEBwYXJhbSB7IU5vZGV8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IG5vZGVPckRvY1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL3ZpZXdwb3J0L3ZpZXdwb3J0LWltcGwuVmlld3BvcnR9XG4gICAqL1xuICBzdGF0aWMgdmlld3BvcnRGb3JEb2Mobm9kZU9yRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS92aWV3cG9ydC92aWV3cG9ydC1pbXBsLlZpZXdwb3J0fSAqLyAoXG4gICAgICBnZXRTZXJ2aWNlRm9yRG9jRGVwcmVjYXRlZChub2RlT3JEb2MsICd2aWV3cG9ydCcpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpbmRvd1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL3hoci1pbXBsLlhocn1cbiAgICovXG4gIHN0YXRpYyB4aHJGb3Iod2luZG93KSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS94aHItaW1wbC5YaHJ9ICovIChnZXRTZXJ2aWNlKHdpbmRvdywgJ3hocicpKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7ZGV2fSBmcm9tICcuL2xvZyc7XG5pbXBvcnQge21hcH0gZnJvbSAnLi91dGlscy9vYmplY3QuanMnO1xuXG5sZXQgY29udGFpbmVyO1xuXG4vKipcbiAqIENyZWF0ZXMgdGhlIGh0bWwgaGVscGVyIGZvciB0aGUgZG9jLlxuICpcbiAqIEBwYXJhbSB7IUVsZW1lbnR8IURvY3VtZW50fSBub2RlT3JEb2NcbiAqIEByZXR1cm4ge2Z1bmN0aW9uKCFBcnJheTxzdHJpbmc+KTohRWxlbWVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGh0bWxGb3Iobm9kZU9yRG9jKSB7XG4gIGNvbnN0IGRvYyA9IG5vZGVPckRvYy5vd25lckRvY3VtZW50IHx8IG5vZGVPckRvYztcbiAgaWYgKCFjb250YWluZXIgfHwgY29udGFpbmVyLm93bmVyRG9jdW1lbnQgIT09IGRvYykge1xuICAgIGNvbnRhaW5lciA9IGRvYy5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgfVxuXG4gIHJldHVybiBodG1sO1xufVxuXG4vKipcbiAqIEEgdGFnZ2VkIHRlbXBsYXRlIGxpdGVyYWwgaGVscGVyIHRvIGdlbmVyYXRlIHN0YXRpYyBET00gdHJlZXMuXG4gKiBUaGlzIG11c3QgYmUgdXNlZCBhcyBhIHRhZ2dlZCB0ZW1wbGF0ZSwgaWVcbiAqXG4gKiBgYGBcbiAqIGNvbnN0IGRpdiA9IGh0bWxgPGRpdj48c3Bhbj48L3NwYW4+PC9kaXY+YDtcbiAqIGBgYFxuICpcbiAqIE9ubHkgdGhlIHJvb3QgZWxlbWVudCBhbmQgaXRzIHN1YnRyZWUgd2lsbCBiZSByZXR1cm5lZC4gRE8gTk9UIHVzZSB0aGlzIHRvXG4gKiByZW5kZXIgc3VidHJlZSdzIHdpdGggZHluYW1pYyBjb250ZW50LCBpdCBXSUxMIHJlc3VsdCBpbiBhbiBlcnJvciFcbiAqXG4gKiBAcGFyYW0geyFBcnJheTxzdHJpbmc+fSBzdHJpbmdzXG4gKiBAcmV0dXJuIHshRWxlbWVudH1cbiAqL1xuZnVuY3Rpb24gaHRtbChzdHJpbmdzKSB7XG4gIGRldigpLmFzc2VydChzdHJpbmdzLmxlbmd0aCA9PT0gMSwgJ0ltcHJvcGVyIGh0bWwgdGVtcGxhdGUgdGFnIHVzYWdlLicpO1xuICBjb250YWluZXIuLypPSyovaW5uZXJIVE1MID0gc3RyaW5nc1swXTtcblxuICBjb25zdCBlbCA9IGNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZDtcbiAgZGV2KCkuYXNzZXJ0KGVsLCAnTm8gZWxlbWVudHMgaW4gdGVtcGxhdGUnKTtcbiAgZGV2KCkuYXNzZXJ0KCFlbC5uZXh0RWxlbWVudFNpYmxpbmcsICdUb28gbWFueSByb290IGVsZW1lbnRzIGluIHRlbXBsYXRlJyk7XG5cbiAgLy8gQ2xlYXIgdG8gZnJlZSBtZW1vcnkuXG4gIGNvbnRhaW5lci4vKk9LKi9pbm5lckhUTUwgPSAnJztcblxuICByZXR1cm4gZWw7XG59XG5cbi8qKlxuICogUXVlcmllcyBhbiBlbGVtZW50IGZvciBhbGwgZWxlbWVudHMgd2l0aCBhIFwicmVmXCIgYXR0cmlidXRlLCByZW1vdmluZ1xuICogdGhlIGF0dHJpYnV0ZSBhZnRlcndhcmRzLlxuICogUmV0dXJucyBhIG5hbWVkIG1hcCBvZiBhbGwgcmVmIGVsZW1lbnRzLlxuICpcbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHJvb3RcbiAqIEByZXR1cm4geyFPYmplY3Q8c3RyaW5nLCAhRWxlbWVudD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBodG1sUmVmcyhyb290KSB7XG4gIGNvbnN0IGVsZW1lbnRzID0gcm9vdC5xdWVyeVNlbGVjdG9yQWxsKCdbcmVmXScpO1xuICBjb25zdCByZWZzID0gbWFwKCk7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBlbGVtZW50c1tpXTtcbiAgICBjb25zdCByZWYgPSBkZXYoKS5hc3NlcnQoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3JlZicpLCAnRW1wdHkgcmVmIGF0dHInKTtcbiAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgncmVmJyk7XG4gICAgZGV2KCkuYXNzZXJ0KHJlZnNbcmVmXSA9PT0gdW5kZWZpbmVkLCAnRHVwbGljYXRlIHJlZicpO1xuICAgIHJlZnNbcmVmXSA9IGVsZW1lbnQ7XG4gIH1cblxuICByZXR1cm4gcmVmcztcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBfbWF0Y2hcbiAqIEBwYXJhbSB7c3RyaW5nfSBjaGFyYWN0ZXJcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gdG9VcHBlckNhc2UoX21hdGNoLCBjaGFyYWN0ZXIpIHtcbiAgcmV0dXJuIGNoYXJhY3Rlci50b1VwcGVyQ2FzZSgpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBtYXRjaFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBwcmVwZW5kRGFzaEFuZFRvTG93ZXJDYXNlKG1hdGNoKSB7XG4gIHJldHVybiAnLScgKyBtYXRjaC50b0xvd2VyQ2FzZSgpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEF0dHJpYnV0ZSBuYW1lIGNvbnRhaW5pbmcgZGFzaGVzLlxuICogQHJldHVybiB7c3RyaW5nfSBEYXNoZXMgcmVtb3ZlZCBhbmQgc3VjY2Vzc2l2ZSBjaGFyYWN0ZXIgc2VudCB0byB1cHBlciBjYXNlLlxuICogdmlzaWJsZUZvclRlc3RpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRhc2hUb0NhbWVsQ2FzZShuYW1lKSB7XG4gIHJldHVybiBuYW1lLnJlcGxhY2UoLy0oW2Etel0pL2csIHRvVXBwZXJDYXNlKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhIHN0cmluZyB0aGF0IGlzIGluIGNhbWVsQ2FzZSB0byBvbmUgdGhhdCBpcyBpbiBkYXNoLWNhc2UuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBzdHJpbmcgaW4gZGFzaC1jYXNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FtZWxDYXNlVG9EYXNoKHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoLyg/IV4pW0EtWl0vZywgcHJlcGVuZERhc2hBbmRUb0xvd2VyQ2FzZSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgQXR0cmlidXRlIG5hbWUgd2l0aCBkYXNoZXNcbiAqIEByZXR1cm4ge3N0cmluZ30gRGFzaGVzIHJlcGxhY2VkIGJ5IHVuZGVybGluZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkYXNoVG9VbmRlcmxpbmUobmFtZSkge1xuICByZXR1cm4gbmFtZS5yZXBsYWNlKCctJywgJ18nKTtcbn1cblxuLyoqXG4gKiBQb2x5ZmlsbCBmb3IgU3RyaW5nLnByb3RvdHlwZS5lbmRzV2l0aC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmdcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdWZmaXhcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlbmRzV2l0aChzdHJpbmcsIHN1ZmZpeCkge1xuICBjb25zdCBpbmRleCA9IHN0cmluZy5sZW5ndGggLSBzdWZmaXgubGVuZ3RoO1xuICByZXR1cm4gaW5kZXggPj0gMCAmJiBzdHJpbmcuaW5kZXhPZihzdWZmaXgsIGluZGV4KSA9PSBpbmRleDtcbn1cblxuLyoqXG4gKiBQb2x5ZmlsbCBmb3IgU3RyaW5nLnByb3RvdHlwZS5zdGFydHNXaXRoLlxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZ1xuICogQHBhcmFtIHtzdHJpbmd9IHByZWZpeFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0c1dpdGgoc3RyaW5nLCBwcmVmaXgpIHtcbiAgaWYgKHByZWZpeC5sZW5ndGggPiBzdHJpbmcubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBzdHJpbmcubGFzdEluZGV4T2YocHJlZml4LCAwKSA9PSAwO1xufVxuXG4vKipcbiAqIEV4cGFuZHMgcGxhY2Vob2xkZXJzIGluIGEgZ2l2ZW4gdGVtcGxhdGUgc3RyaW5nIHdpdGggdmFsdWVzLlxuICpcbiAqIFBsYWNlaG9sZGVycyB1c2UgJHtrZXktbmFtZX0gc3ludGF4IGFuZCBhcmUgcmVwbGFjZWQgd2l0aCB0aGUgdmFsdWVcbiAqIHJldHVybmVkIGZyb20gdGhlIGdpdmVuIGdldHRlciBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGVtcGxhdGUgVGhlIHRlbXBsYXRlIHN0cmluZyB0byBleHBhbmQuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHN0cmluZyk6Kn0gZ2V0dGVyIEZ1bmN0aW9uIHVzZWQgdG8gcmV0cmlldmUgYSB2YWx1ZSBmb3IgYVxuICogICBwbGFjZWhvbGRlci4gUmV0dXJucyB2YWx1ZXMgd2lsbCBiZSBjb2VyY2VkIGludG8gc3RyaW5ncy5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X21heEl0ZXJhdGlvbnMgTnVtYmVyIG9mIHRpbWVzIHRvIGV4cGFuZCB0aGUgdGVtcGxhdGUuXG4gKiAgIERlZmF1bHRzIHRvIDEsIGJ1dCBzaG91bGQgYmUgc2V0IHRvIGEgbGFyZ2VyIHZhbHVlIHlvdXIgcGxhY2Vob2xkZXIgdG9rZW5zXG4gKiAgIGNhbiBiZSBleHBhbmRlZCB0byBvdGhlciBwbGFjZWhvbGRlciB0b2tlbnMuIFRha2UgY2F1dGlvbiB3aXRoIGxhcmdlIHZhbHVlc1xuICogICBhcyByZWN1cnNpdmVseSBleHBhbmRpbmcgYSBzdHJpbmcgY2FuIGJlIGV4cG9uZW50aWFsbHkgZXhwZW5zaXZlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXhwYW5kVGVtcGxhdGUodGVtcGxhdGUsIGdldHRlciwgb3B0X21heEl0ZXJhdGlvbnMpIHtcbiAgY29uc3QgbWF4SXRlcmF0aW9ucyA9IG9wdF9tYXhJdGVyYXRpb25zIHx8IDE7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbWF4SXRlcmF0aW9uczsgaSsrKSB7XG4gICAgbGV0IG1hdGNoZXMgPSAwO1xuICAgIHRlbXBsYXRlID0gdGVtcGxhdGUucmVwbGFjZSgvXFwkeyhbXn1dKil9L2csIChfYSwgYikgPT4ge1xuICAgICAgbWF0Y2hlcysrO1xuICAgICAgcmV0dXJuIGdldHRlcihiKTtcbiAgICB9KTtcbiAgICBpZiAoIW1hdGNoZXMpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdGVtcGxhdGU7XG59XG5cbi8qKlxuICogSGFzaCBmdW5jdGlvbiBkamIyYVxuICogVGhpcyBpcyBpbnRlbmRlZCB0byBiZSBhIHNpbXBsZSwgZmFzdCBoYXNoaW5nIGZ1bmN0aW9uIHVzaW5nIG1pbmltYWwgY29kZS5cbiAqIEl0IGRvZXMgKm5vdCogaGF2ZSBnb29kIGNyeXB0b2dyYXBoaWMgcHJvcGVydGllcy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge3N0cmluZ30gMzItYml0IHVuc2lnbmVkIGhhc2ggb2YgdGhlIHN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5nSGFzaDMyKHN0cikge1xuICBjb25zdCB7bGVuZ3RofSA9IHN0cjtcbiAgbGV0IGhhc2ggPSA1MzgxO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgaGFzaCA9IGhhc2ggKiAzMyBeIHN0ci5jaGFyQ29kZUF0KGkpO1xuICB9XG4gIC8vIENvbnZlcnQgZnJvbSAzMi1iaXQgc2lnbmVkIHRvIHVuc2lnbmVkLlxuICByZXR1cm4gU3RyaW5nKGhhc2ggPj4+IDApO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8vIE5vdGU6IGxvYWRlZCBieSAzcCBzeXN0ZW0uIENhbm5vdCByZWx5IG9uIGJhYmVsIHBvbHlmaWxscy5cbmltcG9ydCB7bWFwfSBmcm9tICcuL3V0aWxzL29iamVjdC5qcyc7XG5pbXBvcnQge3N0YXJ0c1dpdGh9IGZyb20gJy4vc3RyaW5nJztcblxuXG4vKiogQHR5cGUge09iamVjdDxzdHJpbmcsIHN0cmluZz59ICovXG5sZXQgcHJvcGVydHlOYW1lQ2FjaGU7XG5cbi8qKiBAY29uc3QgeyFBcnJheTxzdHJpbmc+fSAqL1xuY29uc3QgdmVuZG9yUHJlZml4ZXMgPSBbJ1dlYmtpdCcsICd3ZWJraXQnLCAnTW96JywgJ21veicsICdtcycsICdPJywgJ28nXTtcblxuXG4vKipcbiAqIEBleHBvcnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBjYW1lbENhc2UgY2FtZWwgY2FzZWQgc3RyaW5nXG4gKiBAcmV0dXJuIHtzdHJpbmd9IHRpdGxlIGNhc2VkIHN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gY2FtZWxDYXNlVG9UaXRsZUNhc2UoY2FtZWxDYXNlKSB7XG4gIHJldHVybiBjYW1lbENhc2UuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjYW1lbENhc2Uuc2xpY2UoMSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIHRoZSBzdHlsZSBpZiBhIHByZWZpeGVkIHZlcnNpb24gb2YgYSBwcm9wZXJ0eSBleGlzdHMgYW5kIHJldHVybnNcbiAqIGl0IG9yIHJldHVybnMgYW4gZW1wdHkgc3RyaW5nLlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7IU9iamVjdH0gc3R5bGVcbiAqIEBwYXJhbSB7c3RyaW5nfSB0aXRsZUNhc2UgdGhlIHRpdGxlIGNhc2UgdmVyc2lvbiBvZiBhIGNzcyBwcm9wZXJ0eSBuYW1lXG4gKiBAcmV0dXJuIHtzdHJpbmd9IHRoZSBwcmVmaXhlZCBwcm9wZXJ0eSBuYW1lIG9yIG51bGwuXG4gKi9cbmZ1bmN0aW9uIGdldFZlbmRvckpzUHJvcGVydHlOYW1lXyhzdHlsZSwgdGl0bGVDYXNlKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdmVuZG9yUHJlZml4ZXMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBwcm9wZXJ0eU5hbWUgPSB2ZW5kb3JQcmVmaXhlc1tpXSArIHRpdGxlQ2FzZTtcbiAgICBpZiAoc3R5bGVbcHJvcGVydHlOYW1lXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gcHJvcGVydHlOYW1lO1xuICAgIH1cbiAgfVxuICByZXR1cm4gJyc7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgcG9zc2libHkgcHJlZml4ZWQgSmF2YVNjcmlwdCBwcm9wZXJ0eSBuYW1lIG9mIGEgc3R5bGUgcHJvcGVydHlcbiAqIChleC4gV2Via2l0VHJhbnNpdGlvbkR1cmF0aW9uKSBnaXZlbiBhIGNhbWVsQ2FzZSdkIHZlcnNpb24gb2YgdGhlIHByb3BlcnR5XG4gKiAoZXguIHRyYW5zaXRpb25EdXJhdGlvbikuXG4gKiBAZXhwb3J0XG4gKiBAcGFyYW0geyFPYmplY3R9IHN0eWxlXG4gKiBAcGFyYW0ge3N0cmluZ30gY2FtZWxDYXNlIHRoZSBjYW1lbCBjYXNlZCB2ZXJzaW9uIG9mIGEgY3NzIHByb3BlcnR5IG5hbWVcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9ieXBhc3NDYWNoZSBieXBhc3MgdGhlIG1lbW9pemVkIGNhY2hlIG9mIHByb3BlcnR5XG4gKiAgIG1hcHBpbmdcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFZlbmRvckpzUHJvcGVydHlOYW1lKHN0eWxlLCBjYW1lbENhc2UsIG9wdF9ieXBhc3NDYWNoZSkge1xuICBpZiAoc3RhcnRzV2l0aChjYW1lbENhc2UsICctLScpKSB7XG4gICAgLy8gQ1NTIHZhcnMgYXJlIHJldHVybmVkIGFzIGlzLlxuICAgIHJldHVybiBjYW1lbENhc2U7XG4gIH1cbiAgaWYgKCFwcm9wZXJ0eU5hbWVDYWNoZSkge1xuICAgIHByb3BlcnR5TmFtZUNhY2hlID0gbWFwKCk7XG4gIH1cbiAgbGV0IHByb3BlcnR5TmFtZSA9IHByb3BlcnR5TmFtZUNhY2hlW2NhbWVsQ2FzZV07XG4gIGlmICghcHJvcGVydHlOYW1lIHx8IG9wdF9ieXBhc3NDYWNoZSkge1xuICAgIHByb3BlcnR5TmFtZSA9IGNhbWVsQ2FzZTtcbiAgICBpZiAoc3R5bGVbY2FtZWxDYXNlXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCB0aXRsZUNhc2UgPSBjYW1lbENhc2VUb1RpdGxlQ2FzZShjYW1lbENhc2UpO1xuICAgICAgY29uc3QgcHJlZml4ZWRQcm9wZXJ0eU5hbWUgPSBnZXRWZW5kb3JKc1Byb3BlcnR5TmFtZV8oc3R5bGUsIHRpdGxlQ2FzZSk7XG5cbiAgICAgIGlmIChzdHlsZVtwcmVmaXhlZFByb3BlcnR5TmFtZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwcm9wZXJ0eU5hbWUgPSBwcmVmaXhlZFByb3BlcnR5TmFtZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFvcHRfYnlwYXNzQ2FjaGUpIHtcbiAgICAgIHByb3BlcnR5TmFtZUNhY2hlW2NhbWVsQ2FzZV0gPSBwcm9wZXJ0eU5hbWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBwcm9wZXJ0eU5hbWU7XG59XG5cblxuLyoqXG4gKiBTZXRzIHRoZSBDU1Mgc3R5bGVzIG9mIHRoZSBzcGVjaWZpZWQgZWxlbWVudCB3aXRoICFpbXBvcnRhbnQuIFRoZSBzdHlsZXNcbiAqIGFyZSBzcGVjaWZpZWQgYXMgYSBtYXAgZnJvbSBDU1MgcHJvcGVydHkgbmFtZXMgdG8gdGhlaXIgdmFsdWVzLlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgKj59IHN0eWxlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0SW1wb3J0YW50U3R5bGVzKGVsZW1lbnQsIHN0eWxlcykge1xuICBmb3IgKGNvbnN0IGsgaW4gc3R5bGVzKSB7XG4gICAgZWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShcbiAgICAgICAgZ2V0VmVuZG9ySnNQcm9wZXJ0eU5hbWUoc3R5bGVzLCBrKSwgc3R5bGVzW2tdLnRvU3RyaW5nKCksICdpbXBvcnRhbnQnKTtcbiAgfVxufVxuXG5cbi8qKlxuICogU2V0cyB0aGUgQ1NTIHN0eWxlIG9mIHRoZSBzcGVjaWZpZWQgZWxlbWVudCB3aXRoIG9wdGlvbmFsIHVuaXRzLCBlLmcuIFwicHhcIi5cbiAqIEBwYXJhbSB7P0VsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eVxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfdW5pdHNcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9ieXBhc3NDYWNoZVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0U3R5bGUoZWxlbWVudCwgcHJvcGVydHksIHZhbHVlLCBvcHRfdW5pdHMsIG9wdF9ieXBhc3NDYWNoZSkge1xuICBjb25zdCBwcm9wZXJ0eU5hbWUgPSBnZXRWZW5kb3JKc1Byb3BlcnR5TmFtZShlbGVtZW50LnN0eWxlLCBwcm9wZXJ0eSxcbiAgICAgIG9wdF9ieXBhc3NDYWNoZSk7XG4gIGlmIChwcm9wZXJ0eU5hbWUpIHtcbiAgICBlbGVtZW50LnN0eWxlW3Byb3BlcnR5TmFtZV0gPVxuICAgICAgLyoqIEB0eXBlIHtzdHJpbmd9ICovIChvcHRfdW5pdHMgPyB2YWx1ZSArIG9wdF91bml0cyA6IHZhbHVlKTtcbiAgfVxufVxuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIENTUyBzdHlsZSBvZiB0aGUgc3BlY2lmaWVkIGVsZW1lbnQuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHlcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9ieXBhc3NDYWNoZVxuICogQHJldHVybiB7Kn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFN0eWxlKGVsZW1lbnQsIHByb3BlcnR5LCBvcHRfYnlwYXNzQ2FjaGUpIHtcbiAgY29uc3QgcHJvcGVydHlOYW1lID0gZ2V0VmVuZG9ySnNQcm9wZXJ0eU5hbWUoZWxlbWVudC5zdHlsZSwgcHJvcGVydHksXG4gICAgICBvcHRfYnlwYXNzQ2FjaGUpO1xuICBpZiAoIXByb3BlcnR5TmFtZSkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuIGVsZW1lbnQuc3R5bGVbcHJvcGVydHlOYW1lXTtcbn1cblxuXG4vKipcbiAqIFNldHMgdGhlIENTUyBzdHlsZXMgb2YgdGhlIHNwZWNpZmllZCBlbGVtZW50LiBUaGUgc3R5bGVzXG4gKiBhIHNwZWNpZmllZCBhcyBhIG1hcCBmcm9tIENTUyBwcm9wZXJ0eSBuYW1lcyB0byB0aGVpciB2YWx1ZXMuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCAqPn0gc3R5bGVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRTdHlsZXMoZWxlbWVudCwgc3R5bGVzKSB7XG4gIGZvciAoY29uc3QgayBpbiBzdHlsZXMpIHtcbiAgICBzZXRTdHlsZShlbGVtZW50LCBrLCBzdHlsZXNba10pO1xuICB9XG59XG5cblxuLyoqXG4gKiBTaG93cyBvciBoaWRlcyB0aGUgc3BlY2lmaWVkIGVsZW1lbnQuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfZGlzcGxheVxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9nZ2xlKGVsZW1lbnQsIG9wdF9kaXNwbGF5KSB7XG4gIGlmIChvcHRfZGlzcGxheSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgb3B0X2Rpc3BsYXkgPSBnZXRTdHlsZShlbGVtZW50LCAnZGlzcGxheScpID09ICdub25lJztcbiAgfVxuICBzZXRTdHlsZShlbGVtZW50LCAnZGlzcGxheScsIG9wdF9kaXNwbGF5ID8gJycgOiAnbm9uZScpO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyBhIHBpeGVsIHZhbHVlLlxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBweCh2YWx1ZSkge1xuICByZXR1cm4gYCR7dmFsdWV9cHhgO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBkZWdyZWUgdmFsdWUuXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZyh2YWx1ZSkge1xuICByZXR1cm4gYCR7dmFsdWV9ZGVnYDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgXCJ0cmFuc2xhdGVYXCIgZm9yIENTUyBcInRyYW5zZm9ybVwiIHByb3BlcnR5LlxuICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSB2YWx1ZVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNsYXRlWCh2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGB0cmFuc2xhdGVYKCR7dmFsdWV9KWA7XG4gIH1cbiAgcmV0dXJuIGB0cmFuc2xhdGVYKCR7cHgodmFsdWUpfSlgO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyBhIFwidHJhbnNsYXRlWFwiIGZvciBDU1MgXCJ0cmFuc2Zvcm1cIiBwcm9wZXJ0eS5cbiAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30geFxuICogQHBhcmFtIHsobnVtYmVyfHN0cmluZyk9fSBvcHRfeVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNsYXRlKHgsIG9wdF95KSB7XG4gIGlmICh0eXBlb2YgeCA9PSAnbnVtYmVyJykge1xuICAgIHggPSBweCh4KTtcbiAgfVxuICBpZiAob3B0X3kgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBgdHJhbnNsYXRlKCR7eH0pYDtcbiAgfVxuICBpZiAodHlwZW9mIG9wdF95ID09ICdudW1iZXInKSB7XG4gICAgb3B0X3kgPSBweChvcHRfeSk7XG4gIH1cbiAgcmV0dXJuIGB0cmFuc2xhdGUoJHt4fSwgJHtvcHRfeX0pYDtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgYSBcInNjYWxlXCIgZm9yIENTUyBcInRyYW5zZm9ybVwiIHByb3BlcnR5LlxuICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSB2YWx1ZVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUodmFsdWUpIHtcbiAgcmV0dXJuIGBzY2FsZSgke3ZhbHVlfSlgO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBcInJvdGF0ZVwiIGZvciBDU1MgXCJ0cmFuc2Zvcm1cIiBwcm9wZXJ0eS5cbiAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30gdmFsdWVcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZSh2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09ICdudW1iZXInKSB7XG4gICAgdmFsdWUgPSBkZWcodmFsdWUpO1xuICB9XG4gIHJldHVybiBgcm90YXRlKCR7dmFsdWV9KWA7XG59XG5cbi8qKlxuICogUmVtb3ZlIGFscGhhIHZhbHVlIGZyb20gYSByZ2JhIGNvbG9yIHZhbHVlLlxuICogUmV0dXJuIHRoZSBuZXcgY29sb3IgcHJvcGVydHkgd2l0aCBhbHBoYSBlcXVhbHMgaWYgaGFzIHRoZSBhbHBoYSB2YWx1ZS5cbiAqIENhbGxlciBuZWVkcyB0byBtYWtlIHN1cmUgdGhlIGlucHV0IGNvbG9yIHZhbHVlIGlzIGEgdmFsaWQgcmdiYS9yZ2IgdmFsdWVcbiAqIEBwYXJhbSB7c3RyaW5nfSByZ2JhQ29sb3JcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUFscGhhRnJvbUNvbG9yKHJnYmFDb2xvcikge1xuICByZXR1cm4gcmdiYUNvbG9yLnJlcGxhY2UoXG4gICAgICAvXFwoKFteLF0rKSwoW14sXSspLChbXiwpXSspLFteKV0rXFwpL2csICcoJDEsJDIsJDMsIDEpJyk7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgY29tcHV0ZWQgc3R5bGUgb2YgdGhlIGVsZW1lbnQuIFRoZSBoZWxwZXIgaXMgbmVjZXNzYXJ5IHRvIGVuZm9yY2VcbiAqIHRoZSBwb3NzaWJsZSBgbnVsbGAgdmFsdWUgcmV0dXJuZWQgYnkgYSBidWdneSBGaXJlZm94LlxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbFxuICogQHJldHVybiB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlZFN0eWxlKHdpbiwgZWwpIHtcbiAgY29uc3Qgc3R5bGUgPSAvKiogQHR5cGUgez9DU1NTdHlsZURlY2xhcmF0aW9ufSAqLyh3aW4uZ2V0Q29tcHV0ZWRTdHlsZShlbCkpO1xuICByZXR1cm4gLyoqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgc3RyaW5nPn0gKi8oc3R5bGUpIHx8IG1hcCgpO1xufVxuXG5cbi8qKlxuICogUmVzZXRzIHN0eWxlcyB0aGF0IHdlcmUgc2V0IGR5bmFtaWNhbGx5IChpLmUuIGlubGluZSlcbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7IUFycmF5PHN0cmluZz59IHByb3BlcnRpZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0U3R5bGVzKGVsZW1lbnQsIHByb3BlcnRpZXMpIHtcbiAgY29uc3Qgc3R5bGVPYmogPSB7fTtcbiAgcHJvcGVydGllcy5mb3JFYWNoKHByb3AgPT4ge1xuICAgIHN0eWxlT2JqW3Byb3BdID0gbnVsbDtcbiAgfSk7XG4gIHNldFN0eWxlcyhlbGVtZW50LCBzdHlsZU9iaik7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyogQGNvbnN0ICovXG5jb25zdCB0b1N0cmluZ18gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4vKipcbiAqIFJldHVybnMgdGhlIEVDTUEgW1tDbGFzc11dIG9mIGEgdmFsdWVcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gdG9TdHJpbmcodmFsdWUpIHtcbiAgcmV0dXJuIHRvU3RyaW5nXy5jYWxsKHZhbHVlKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHZhbHVlIGlzIGFjdHVhbGx5IGFuIEFycmF5LlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQXJyYXkodmFsdWUpIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsdWUpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIGFycmF5LWxpa2Ugb2JqZWN0IHRvIGFuIGFycmF5LlxuICogQHBhcmFtIHs/SUFycmF5TGlrZTxUPnxzdHJpbmd9IGFycmF5TGlrZVxuICogQHJldHVybiB7IUFycmF5PFQ+fVxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvQXJyYXkoYXJyYXlMaWtlKSB7XG4gIGlmICghYXJyYXlMaWtlKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGNvbnN0IGFycmF5ID0gbmV3IEFycmF5KGFycmF5TGlrZS5sZW5ndGgpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5TGlrZS5sZW5ndGg7IGkrKykge1xuICAgIGFycmF5W2ldID0gYXJyYXlMaWtlW2ldO1xuICB9XG4gIHJldHVybiBhcnJheTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHZhbHVlIGlzIGFjdHVhbGx5IGFuIE9iamVjdC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gdG9TdHJpbmcodmFsdWUpID09PSAnW29iamVjdCBPYmplY3RdJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHZhbHVlIGlzIG9mIG51bWJlciB0eXBlIGFuZCBmaW5pdGUuXG4gKiBOYU4gYW5kIEluZmluaXR5IGFyZSBub3QgY29uc2lkZXJlZCBhIGZpbml0ZSBudW1iZXIuXG4gKiBTdHJpbmcgbnVtYmVycyBhcmUgbm90IGNvbnNpZGVyZWQgbnVtYmVycy5cbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Zpbml0ZU51bWJlcih2YWx1ZSkge1xuICByZXR1cm4gKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgaXNGaW5pdGUodmFsdWUpKTtcbn1cblxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciBgc2AgaXMgYSB2YWxpZCB2YWx1ZSBvZiBgZW51bU9iamAuXG4gKlxuICogQHBhcmFtIHshT2JqZWN0PFQ+fSBlbnVtT2JqXG4gKiBAcGFyYW0ge1R9IHNcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNFbnVtVmFsdWUoZW51bU9iaiwgcykge1xuICBmb3IgKGNvbnN0IGsgaW4gZW51bU9iaikge1xuICAgIGlmIChlbnVtT2JqW2tdID09PSBzKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIEV4dGVybnMgZGVjbGFyZSB0aGF0IGFjY2VzcyBgZGVmYXVsdFZpZXdgIGZyb20gYGRvY3VtZW50YCBvclxuICogYG93bmVyRG9jdW1lbnRgIGlzIG9mIHR5cGUgYChXaW5kb3d8bnVsbClgIGJ1dCBtb3N0IG9mIG91ciBwYXJhbWV0ZXIgdHlwZXNcbiAqIGFzc3VtZSB0aGF0IGl0IGlzIG5ldmVyIG51bGwuIFRoaXMgaXMgT0sgaW4gcHJhY3RpY2UgYXMgd2UgZXZlciBvbmx5IGdldFxuICogbnVsbCBvbiBkaXNjb25uZWN0ZWQgZG9jdW1lbnRzIG9yIG9sZCBJRS5cbiAqIFRoaXMgaGVscGVyIGZ1bmN0aW9uIGNhc3RzIGl0IGludG8ganVzdCBhIHNpbXBsZSBXaW5kb3cgcmV0dXJuIHR5cGUuXG4gKlxuICogQHBhcmFtIHshV2luZG93fG51bGx9IHdpbk9yTnVsbFxuICogQHJldHVybiB7IVdpbmRvd31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvV2luKHdpbk9yTnVsbCkge1xuICByZXR1cm4gLyoqIEB0eXBlIHshV2luZG93fSAqLyAod2luT3JOdWxsKTtcbn1cblxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7dHJ5RGVjb2RlVXJpQ29tcG9uZW50X30gZnJvbSAnLi91cmwtdHJ5LWRlY29kZS11cmktY29tcG9uZW50JztcblxuY29uc3QgcmVnZXggPSAvKD86XlsjP10/fCYpKFtePSZdKykoPzo9KFteJl0qKSk/L2c7XG5cbi8qKlxuICogUGFyc2VzIHRoZSBxdWVyeSBzdHJpbmcgb2YgYW4gVVJMLiBUaGlzIG1ldGhvZCByZXR1cm5zIGEgc2ltcGxlIGtleS92YWx1ZVxuICogbWFwLiBJZiB0aGVyZSBhcmUgZHVwbGljYXRlIGtleXMgdGhlIGxhdGVzdCB2YWx1ZSBpcyByZXR1cm5lZC5cbiAqXG4gKiBETyBOT1QgaW1wb3J0IHRoZSBmdW5jdGlvbiBmcm9tIHRoaXMgZmlsZS4gSW5zdGVhZCwgaW1wb3J0IHBhcnNlUXVlcnlTdHJpbmdcbiAqIGZyb20gYHNyYy91cmwuanNgLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBxdWVyeVN0cmluZ1xuICogQHJldHVybiB7IUpzb25PYmplY3R9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVF1ZXJ5U3RyaW5nXyhxdWVyeVN0cmluZykge1xuICBjb25zdCBwYXJhbXMgPSAvKiogQHR5cGUgeyFKc29uT2JqZWN0fSAqLyAoT2JqZWN0LmNyZWF0ZShudWxsKSk7XG4gIGlmICghcXVlcnlTdHJpbmcpIHtcbiAgICByZXR1cm4gcGFyYW1zO1xuICB9XG5cbiAgbGV0IG1hdGNoO1xuICB3aGlsZSAoKG1hdGNoID0gcmVnZXguZXhlYyhxdWVyeVN0cmluZykpKSB7XG4gICAgY29uc3QgbmFtZSA9IHRyeURlY29kZVVyaUNvbXBvbmVudF8obWF0Y2hbMV0sIG1hdGNoWzFdKTtcbiAgICBjb25zdCB2YWx1ZSA9IG1hdGNoWzJdID8gdHJ5RGVjb2RlVXJpQ29tcG9uZW50XyhtYXRjaFsyXSwgbWF0Y2hbMl0pIDogJyc7XG4gICAgcGFyYW1zW25hbWVdID0gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIHBhcmFtcztcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIFRyaWVzIHRvIGRlY29kZSBhIFVSSSBjb21wb25lbnQsIGZhbGxpbmcgYmFjayB0byBvcHRfZmFsbGJhY2sgKG9yIGFuIGVtcHR5XG4gKiBzdHJpbmcpXG4gKlxuICogRE8gTk9UIGltcG9ydCB0aGUgZnVuY3Rpb24gZnJvbSB0aGlzIGZpbGUuIEluc3RlYWQsIGltcG9ydFxuICogdHJ5RGVjb2RlVXJpQ29tcG9uZW50IGZyb20gYHNyYy91cmwuanNgLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb21wb25lbnRcbiAqIEBwYXJhbSB7c3RyaW5nPX0gZmFsbGJhY2tcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyeURlY29kZVVyaUNvbXBvbmVudF8oY29tcG9uZW50LCBmYWxsYmFjayA9ICcnKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChjb21wb25lbnQpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbGxiYWNrO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtMcnVDYWNoZX0gZnJvbSAnLi91dGlscy9scnUtY2FjaGUnO1xuaW1wb3J0IHtkaWN0fSBmcm9tICcuL3V0aWxzL29iamVjdCc7XG5pbXBvcnQge2VuZHNXaXRoLCBzdGFydHNXaXRofSBmcm9tICcuL3N0cmluZyc7XG5pbXBvcnQge2dldE1vZGV9IGZyb20gJy4vbW9kZSc7XG5pbXBvcnQge2lzQXJyYXl9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHtwYXJzZVF1ZXJ5U3RyaW5nX30gZnJvbSAnLi91cmwtcGFyc2UtcXVlcnktc3RyaW5nJztcbmltcG9ydCB7dHJ5RGVjb2RlVXJpQ29tcG9uZW50X30gZnJvbSAnLi91cmwtdHJ5LWRlY29kZS11cmktY29tcG9uZW50JztcbmltcG9ydCB7dXJsc30gZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0IHt1c2VyfSBmcm9tICcuL2xvZyc7XG5cbi8qKlxuICogQHR5cGUgeyFKc29uT2JqZWN0fVxuICovXG5jb25zdCBTRVJWSU5HX1RZUEVfUFJFRklYID0gZGljdCh7XG4gIC8vIE5vIHZpZXdlclxuICAnYyc6IHRydWUsXG4gIC8vIEluIHZpZXdlclxuICAndic6IHRydWUsXG4gIC8vIEFkIGxhbmRpbmcgcGFnZVxuICAnYSc6IHRydWUsXG4gIC8vIEFkXG4gICdhZCc6IHRydWUsXG59KTtcblxuLyoqXG4gKiBDYWNoZWQgYS10YWcgdG8gYXZvaWQgbWVtb3J5IGFsbG9jYXRpb24gZHVyaW5nIFVSTCBwYXJzaW5nLlxuICogQHR5cGUge0hUTUxBbmNob3JFbGVtZW50fVxuICovXG5sZXQgYTtcblxuLyoqXG4gKiBXZSBjYWNoZWQgYWxsIHBhcnNlZCBVUkxzLiBBcyBvZiBub3cgdGhlcmUgYXJlIG5vIHVzZSBjYXNlc1xuICogb2YgQU1QIGRvY3MgdGhhdCB3b3VsZCBldmVyIHBhcnNlIGFuIGFjdHVhbCBsYXJnZSBudW1iZXIgb2YgVVJMcyxcbiAqIGJ1dCB3ZSBvZnRlbiBwYXJzZSB0aGUgc2FtZSBvbmUgb3ZlciBhbmQgb3ZlciBhZ2Fpbi5cbiAqIEB0eXBlIHtMcnVDYWNoZX1cbiAqL1xubGV0IGNhY2hlO1xuXG4vKiogQHByaXZhdGUgQGNvbnN0IE1hdGNoZXMgYW1wX2pzXyogcGFyYW1ldGVycyBpbiBxdWVyeSBzdHJpbmcuICovXG5jb25zdCBBTVBfSlNfUEFSQU1TX1JFR0VYID0gL1s/Jl1hbXBfanNbXiZdKi87XG5cbi8qKiBAcHJpdmF0ZSBAY29uc3QgTWF0Y2hlcyBhbXBfZ3NhIHBhcmFtZXRlcnMgaW4gcXVlcnkgc3RyaW5nLiAqL1xuY29uc3QgQU1QX0dTQV9QQVJBTVNfUkVHRVggPSAvWz8mXWFtcF9nc2FbXiZdKi87XG5cbi8qKiBAcHJpdmF0ZSBAY29uc3QgTWF0Y2hlcyBhbXBfciBwYXJhbWV0ZXJzIGluIHF1ZXJ5IHN0cmluZy4gKi9cbmNvbnN0IEFNUF9SX1BBUkFNU19SRUdFWCA9IC9bPyZdYW1wX3JbXiZdKi87XG5cbi8qKiBAcHJpdmF0ZSBAY29uc3QgTWF0Y2hlcyB1c3FwIHBhcmFtZXRlcnMgZnJvbSBnb29nIGV4cGVyaW1lbnQgaW4gcXVlcnkgc3RyaW5nLiAqL1xuY29uc3QgR09PR0xFX0VYUEVSSU1FTlRfUEFSQU1TX1JFR0VYID0gL1s/Jl11c3FwW14mXSovO1xuXG5jb25zdCBJTlZBTElEX1BST1RPQ09MUyA9IFtcbiAgLyplc2xpbnQgbm8tc2NyaXB0LXVybDogMCovICdqYXZhc2NyaXB0OicsXG4gIC8qZXNsaW50IG5vLXNjcmlwdC11cmw6IDAqLyAnZGF0YTonLFxuICAvKmVzbGludCBuby1zY3JpcHQtdXJsOiAwKi8gJ3Zic2NyaXB0OicsXG5dO1xuXG4vKiogQGNvbnN0IHtzdHJpbmd9ICovXG5leHBvcnQgY29uc3QgU09VUkNFX09SSUdJTl9QQVJBTSA9ICdfX2FtcF9zb3VyY2Vfb3JpZ2luJztcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBjb3JyZWN0IG9yaWdpbiBmb3IgYSBnaXZlbiB3aW5kb3cuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7c3RyaW5nfSBvcmlnaW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFdpbk9yaWdpbih3aW4pIHtcbiAgcmV0dXJuIHdpbi5vcmlnaW4gfHwgcGFyc2VVcmxEZXByZWNhdGVkKHdpbi5sb2NhdGlvbi5ocmVmKS5vcmlnaW47XG59XG5cbi8qKlxuICogUmV0dXJucyBhIExvY2F0aW9uLWxpa2Ugb2JqZWN0IGZvciB0aGUgZ2l2ZW4gVVJMLiBJZiBpdCBpcyByZWxhdGl2ZSxcbiAqIHRoZSBVUkwgZ2V0cyByZXNvbHZlZC5cbiAqIENvbnNpZGVyIHRoZSByZXR1cm5lZCBvYmplY3QgaW1tdXRhYmxlLiBUaGlzIGlzIGVuZm9yY2VkIGR1cmluZ1xuICogdGVzdGluZyBieSBmcmVlemluZyB0aGUgb2JqZWN0LlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X25vY2FjaGVcbiAqIEByZXR1cm4geyFMb2NhdGlvbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVXJsRGVwcmVjYXRlZCh1cmwsIG9wdF9ub2NhY2hlKSB7XG4gIGlmICghYSkge1xuICAgIGEgPSAvKiogQHR5cGUgeyFIVE1MQW5jaG9yRWxlbWVudH0gKi8gKHNlbGYuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpKTtcbiAgICBjYWNoZSA9IHNlbGYuVXJsQ2FjaGUgfHwgKHNlbGYuVXJsQ2FjaGUgPSBuZXcgTHJ1Q2FjaGUoMTAwKSk7XG4gIH1cblxuICByZXR1cm4gcGFyc2VVcmxXaXRoQShhLCB1cmwsIG9wdF9ub2NhY2hlID8gbnVsbCA6IGNhY2hlKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgTG9jYXRpb24tbGlrZSBvYmplY3QgZm9yIHRoZSBnaXZlbiBVUkwuIElmIGl0IGlzIHJlbGF0aXZlLFxuICogdGhlIFVSTCBnZXRzIHJlc29sdmVkLlxuICogQ29uc2lkZXIgdGhlIHJldHVybmVkIG9iamVjdCBpbW11dGFibGUuIFRoaXMgaXMgZW5mb3JjZWQgZHVyaW5nXG4gKiB0ZXN0aW5nIGJ5IGZyZWV6aW5nIHRoZSBvYmplY3QuXG4gKiBAcGFyYW0geyFIVE1MQW5jaG9yRWxlbWVudH0gYVxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHBhcmFtIHtMcnVDYWNoZT19IG9wdF9jYWNoZVxuICogQHJldHVybiB7IUxvY2F0aW9ufVxuICogQHJlc3RyaWN0ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVXJsV2l0aEEoYSwgdXJsLCBvcHRfY2FjaGUpIHtcbiAgaWYgKG9wdF9jYWNoZSAmJiBvcHRfY2FjaGUuaGFzKHVybCkpIHtcbiAgICByZXR1cm4gb3B0X2NhY2hlLmdldCh1cmwpO1xuICB9XG5cbiAgYS5ocmVmID0gdXJsO1xuXG4gIC8vIElFMTEgZG9lc24ndCBwcm92aWRlIGZ1bGwgVVJMIGNvbXBvbmVudHMgd2hlbiBwYXJzaW5nIHJlbGF0aXZlIFVSTHMuXG4gIC8vIEFzc2lnbmluZyB0byBpdHNlbGYgYWdhaW4gZG9lcyB0aGUgdHJpY2sgIzM0NDkuXG4gIGlmICghYS5wcm90b2NvbCkge1xuICAgIGEuaHJlZiA9IGEuaHJlZjtcbiAgfVxuXG4gIGNvbnN0IGluZm8gPSAvKiogQHR5cGUgeyFMb2NhdGlvbn0gKi8oe1xuICAgIGhyZWY6IGEuaHJlZixcbiAgICBwcm90b2NvbDogYS5wcm90b2NvbCxcbiAgICBob3N0OiBhLmhvc3QsXG4gICAgaG9zdG5hbWU6IGEuaG9zdG5hbWUsXG4gICAgcG9ydDogYS5wb3J0ID09ICcwJyA/ICcnIDogYS5wb3J0LFxuICAgIHBhdGhuYW1lOiBhLnBhdGhuYW1lLFxuICAgIHNlYXJjaDogYS5zZWFyY2gsXG4gICAgaGFzaDogYS5oYXNoLFxuICAgIG9yaWdpbjogbnVsbCwgLy8gU2V0IGJlbG93LlxuICB9KTtcblxuICAvLyBTb21lIElFMTEgc3BlY2lmaWMgcG9seWZpbGxzLlxuICAvLyAxKSBJRTExIHN0cmlwcyBvdXQgdGhlIGxlYWRpbmcgJy8nIGluIHRoZSBwYXRobmFtZS5cbiAgaWYgKGluZm8ucGF0aG5hbWVbMF0gIT09ICcvJykge1xuICAgIGluZm8ucGF0aG5hbWUgPSAnLycgKyBpbmZvLnBhdGhuYW1lO1xuICB9XG5cbiAgLy8gMikgRm9yIFVSTHMgd2l0aCBpbXBsaWNpdCBwb3J0cywgSUUxMSBwYXJzZXMgdG8gZGVmYXVsdCBwb3J0cyB3aGlsZVxuICAvLyBvdGhlciBicm93c2VycyBsZWF2ZSB0aGUgcG9ydCBmaWVsZCBlbXB0eS5cbiAgaWYgKChpbmZvLnByb3RvY29sID09ICdodHRwOicgJiYgaW5mby5wb3J0ID09IDgwKVxuICAgICAgfHwgKGluZm8ucHJvdG9jb2wgPT0gJ2h0dHBzOicgJiYgaW5mby5wb3J0ID09IDQ0MykpIHtcbiAgICBpbmZvLnBvcnQgPSAnJztcbiAgICBpbmZvLmhvc3QgPSBpbmZvLmhvc3RuYW1lO1xuICB9XG5cbiAgLy8gRm9yIGRhdGEgVVJJIGEub3JpZ2luIGlzIGVxdWFsIHRvIHRoZSBzdHJpbmcgJ251bGwnIHdoaWNoIGlzIG5vdCB1c2VmdWwuXG4gIC8vIFdlIGluc3RlYWQgcmV0dXJuIHRoZSBhY3R1YWwgb3JpZ2luIHdoaWNoIGlzIHRoZSBmdWxsIFVSTC5cbiAgaWYgKGEub3JpZ2luICYmIGEub3JpZ2luICE9ICdudWxsJykge1xuICAgIGluZm8ub3JpZ2luID0gYS5vcmlnaW47XG4gIH0gZWxzZSBpZiAoaW5mby5wcm90b2NvbCA9PSAnZGF0YTonIHx8ICFpbmZvLmhvc3QpIHtcbiAgICBpbmZvLm9yaWdpbiA9IGluZm8uaHJlZjtcbiAgfSBlbHNlIHtcbiAgICBpbmZvLm9yaWdpbiA9IGluZm8ucHJvdG9jb2wgKyAnLy8nICsgaW5mby5ob3N0O1xuICB9XG5cbiAgLy8gRnJlZXplIGR1cmluZyB0ZXN0aW5nIHRvIGF2b2lkIGFjY2lkZW50YWwgbXV0YXRpb24uXG4gIGNvbnN0IGZyb3plbiA9IChnZXRNb2RlKCkudGVzdCAmJiBPYmplY3QuZnJlZXplKSA/IE9iamVjdC5mcmVlemUoaW5mbykgOiBpbmZvO1xuXG4gIGlmIChvcHRfY2FjaGUpIHtcbiAgICBvcHRfY2FjaGUucHV0KHVybCwgZnJvemVuKTtcbiAgfVxuXG4gIHJldHVybiBmcm96ZW47XG59XG5cbi8qKlxuICogQXBwZW5kcyB0aGUgc3RyaW5nIGp1c3QgYmVmb3JlIHRoZSBmcmFnbWVudCBwYXJ0IChvciBvcHRpb25hbGx5XG4gKiB0byB0aGUgZnJvbnQgb2YgdGhlIHF1ZXJ5IHN0cmluZykgb2YgdGhlIFVSTC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXJhbVN0cmluZ1xuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2FkZFRvRnJvbnRcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGVuZEVuY29kZWRQYXJhbVN0cmluZ1RvVXJsKHVybCwgcGFyYW1TdHJpbmcsXG4gIG9wdF9hZGRUb0Zyb250KSB7XG4gIGlmICghcGFyYW1TdHJpbmcpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG4gIGNvbnN0IG1haW5BbmRGcmFnbWVudCA9IHVybC5zcGxpdCgnIycsIDIpO1xuICBjb25zdCBtYWluQW5kUXVlcnkgPSBtYWluQW5kRnJhZ21lbnRbMF0uc3BsaXQoJz8nLCAyKTtcblxuICBsZXQgbmV3VXJsID0gbWFpbkFuZFF1ZXJ5WzBdICsgKFxuICAgIG1haW5BbmRRdWVyeVsxXVxuICAgICAgPyAob3B0X2FkZFRvRnJvbnRcbiAgICAgICAgPyBgPyR7cGFyYW1TdHJpbmd9JiR7bWFpbkFuZFF1ZXJ5WzFdfWBcbiAgICAgICAgOiBgPyR7bWFpbkFuZFF1ZXJ5WzFdfSYke3BhcmFtU3RyaW5nfWApXG4gICAgICA6IGA/JHtwYXJhbVN0cmluZ31gKTtcbiAgbmV3VXJsICs9IG1haW5BbmRGcmFnbWVudFsxXSA/IGAjJHttYWluQW5kRnJhZ21lbnRbMV19YCA6ICcnO1xuICByZXR1cm4gbmV3VXJsO1xufVxuLyoqXG4gKiBBcHBlbmRzIGEgcXVlcnkgc3RyaW5nIGZpZWxkIGFuZCB2YWx1ZSB0byBhIHVybC4gYGtleWAgYW5kIGB2YWx1ZWBcbiAqIHdpbGwgYmUgcmFuIHRocm91Z2ggYGVuY29kZVVSSUNvbXBvbmVudGAgYmVmb3JlIGFwcGVuZGluZy5cbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2FkZFRvRnJvbnRcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFBhcmFtVG9VcmwodXJsLCBrZXksIHZhbHVlLCBvcHRfYWRkVG9Gcm9udCkge1xuICBjb25zdCBmaWVsZCA9IGAke2VuY29kZVVSSUNvbXBvbmVudChrZXkpfT0ke2VuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSl9YDtcbiAgcmV0dXJuIGFwcGVuZEVuY29kZWRQYXJhbVN0cmluZ1RvVXJsKHVybCwgZmllbGQsIG9wdF9hZGRUb0Zyb250KTtcbn1cblxuLyoqXG4gKiBBcHBlbmRzIHF1ZXJ5IHN0cmluZyBmaWVsZHMgYW5kIHZhbHVlcyB0byBhIHVybC4gVGhlIGBwYXJhbXNgIG9iamVjdHMnXG4gKiBga2V5YHMgYW5kIGB2YWx1ZWBzIHdpbGwgYmUgdHJhbnNmb3JtZWQgaW50byBxdWVyeSBzdHJpbmcga2V5cy92YWx1ZXMuXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gKiBAcGFyYW0geyFKc29uT2JqZWN0PHN0cmluZywgc3RyaW5nfCFBcnJheTxzdHJpbmc+Pn0gcGFyYW1zXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRQYXJhbXNUb1VybCh1cmwsIHBhcmFtcykge1xuICByZXR1cm4gYXBwZW5kRW5jb2RlZFBhcmFtU3RyaW5nVG9VcmwodXJsLCBzZXJpYWxpemVRdWVyeVN0cmluZyhwYXJhbXMpKTtcbn1cblxuLyoqXG4gKiBTZXJpYWxpemVzIHRoZSBwYXNzZWQgcGFyYW1ldGVyIG1hcCBpbnRvIGEgcXVlcnkgc3RyaW5nIHdpdGggYm90aCBrZXlzXG4gKiBhbmQgdmFsdWVzIGVuY29kZWQuXG4gKiBAcGFyYW0geyFKc29uT2JqZWN0PHN0cmluZywgc3RyaW5nfCFBcnJheTxzdHJpbmc+Pn0gcGFyYW1zXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemVRdWVyeVN0cmluZyhwYXJhbXMpIHtcbiAgY29uc3QgcyA9IFtdO1xuICBmb3IgKGNvbnN0IGsgaW4gcGFyYW1zKSB7XG4gICAgY29uc3QgdiA9IHBhcmFtc1trXTtcbiAgICBpZiAodiA9PSBudWxsKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9IGVsc2UgaWYgKGlzQXJyYXkodikpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBzdiA9IC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAodltpXSk7XG4gICAgICAgIHMucHVzaChgJHtlbmNvZGVVUklDb21wb25lbnQoayl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHN2KX1gKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc3YgPSAvKiogQHR5cGUge3N0cmluZ30gKi8gKHYpO1xuICAgICAgcy5wdXNoKGAke2VuY29kZVVSSUNvbXBvbmVudChrKX09JHtlbmNvZGVVUklDb21wb25lbnQoc3YpfWApO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcy5qb2luKCcmJyk7XG59XG5cbi8qKlxuICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIFVSTCBpcyBzZWN1cmU6IGVpdGhlciBIVFRQUyBvciBsb2NhbGhvc3QgKGZvciB0ZXN0aW5nKS5cbiAqIEBwYXJhbSB7c3RyaW5nfCFMb2NhdGlvbn0gdXJsXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTZWN1cmVVcmxEZXByZWNhdGVkKHVybCkge1xuICBpZiAodHlwZW9mIHVybCA9PSAnc3RyaW5nJykge1xuICAgIHVybCA9IHBhcnNlVXJsRGVwcmVjYXRlZCh1cmwpO1xuICB9XG4gIHJldHVybiAodXJsLnByb3RvY29sID09ICdodHRwczonIHx8XG4gICAgICB1cmwuaG9zdG5hbWUgPT0gJ2xvY2FsaG9zdCcgfHxcbiAgICAgIGVuZHNXaXRoKHVybC5ob3N0bmFtZSwgJy5sb2NhbGhvc3QnKSk7XG59XG5cbi8qKlxuICogQXNzZXJ0cyB0aGF0IGEgZ2l2ZW4gdXJsIGlzIEhUVFBTIG9yIHByb3RvY29sIHJlbGF0aXZlLiBJdCdzIGEgdXNlci1sZXZlbFxuICogYXNzZXJ0LlxuICpcbiAqIFByb3ZpZGVzIGFuIGV4Y2VwdGlvbiBmb3IgbG9jYWxob3N0LlxuICpcbiAqIEBwYXJhbSB7P3N0cmluZ3x1bmRlZmluZWR9IHVybFN0cmluZ1xuICogQHBhcmFtIHshRWxlbWVudHxzdHJpbmd9IGVsZW1lbnRDb250ZXh0IEVsZW1lbnQgd2hlcmUgdGhlIHVybCB3YXMgZm91bmQuXG4gKiBAcGFyYW0ge3N0cmluZz19IHNvdXJjZU5hbWUgVXNlZCBmb3IgZXJyb3IgbWVzc2FnZXMuXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRIdHRwc1VybChcbiAgdXJsU3RyaW5nLCBlbGVtZW50Q29udGV4dCwgc291cmNlTmFtZSA9ICdzb3VyY2UnKSB7XG4gIHVzZXIoKS5hc3NlcnQodXJsU3RyaW5nICE9IG51bGwsICclcyAlcyBtdXN0IGJlIGF2YWlsYWJsZScsXG4gICAgICBlbGVtZW50Q29udGV4dCwgc291cmNlTmFtZSk7XG4gIC8vIChlcndpbm0sICM0NTYwKTogdHlwZSBjYXN0IG5lY2Vzc2FyeSB1bnRpbCAjNDU2MCBpcyBmaXhlZC5cbiAgY29uc3QgdGhlVXJsU3RyaW5nID0gLyoqIEB0eXBlIHtzdHJpbmd9ICovICh1cmxTdHJpbmcpO1xuICB1c2VyKCkuYXNzZXJ0KGlzU2VjdXJlVXJsRGVwcmVjYXRlZCh0aGVVcmxTdHJpbmcpIHx8IC9eKFxcL1xcLykvLnRlc3QodGhlVXJsU3RyaW5nKSxcbiAgICAgICclcyAlcyBtdXN0IHN0YXJ0IHdpdGggJyArXG4gICAgICAnXCJodHRwczovL1wiIG9yIFwiLy9cIiBvciBiZSByZWxhdGl2ZSBhbmQgc2VydmVkIGZyb20gJyArXG4gICAgICAnZWl0aGVyIGh0dHBzIG9yIGZyb20gbG9jYWxob3N0LiBJbnZhbGlkIHZhbHVlOiAlcycsXG4gICAgICBlbGVtZW50Q29udGV4dCwgc291cmNlTmFtZSwgdGhlVXJsU3RyaW5nKTtcbiAgcmV0dXJuIHRoZVVybFN0cmluZztcbn1cblxuLyoqXG4gKiBBc3NlcnRzIHRoYXQgYSBnaXZlbiB1cmwgaXMgYW4gYWJzb2x1dGUgSFRUUCBvciBIVFRQUyBVUkwuXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsU3RyaW5nXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRBYnNvbHV0ZUh0dHBPckh0dHBzVXJsKHVybFN0cmluZykge1xuICB1c2VyKCkuYXNzZXJ0KC9eaHR0cHM/XFw6L2kudGVzdCh1cmxTdHJpbmcpLFxuICAgICAgJ1VSTCBtdXN0IHN0YXJ0IHdpdGggXCJodHRwOi8vXCIgb3IgXCJodHRwczovL1wiLiBJbnZhbGlkIHZhbHVlOiAlcycsXG4gICAgICB1cmxTdHJpbmcpO1xuICByZXR1cm4gcGFyc2VVcmxEZXByZWNhdGVkKHVybFN0cmluZykuaHJlZjtcbn1cblxuXG4vKipcbiAqIFBhcnNlcyB0aGUgcXVlcnkgc3RyaW5nIG9mIGFuIFVSTC4gVGhpcyBtZXRob2QgcmV0dXJucyBhIHNpbXBsZSBrZXkvdmFsdWVcbiAqIG1hcC4gSWYgdGhlcmUgYXJlIGR1cGxpY2F0ZSBrZXlzIHRoZSBsYXRlc3QgdmFsdWUgaXMgcmV0dXJuZWQuXG4gKlxuICogVGhpcyBmdW5jdGlvbiBpcyBpbXBsZW1lbnRlZCBpbiBhIHNlcGFyYXRlIGZpbGUgdG8gYXZvaWQgYSBjaXJjdWxhclxuICogZGVwZW5kZW5jeS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcXVlcnlTdHJpbmdcbiAqIEByZXR1cm4geyFKc29uT2JqZWN0fVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VRdWVyeVN0cmluZyhxdWVyeVN0cmluZykge1xuICByZXR1cm4gcGFyc2VRdWVyeVN0cmluZ18ocXVlcnlTdHJpbmcpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIFVSTCB3aXRob3V0IGZyYWdtZW50LiBJZiBVUkwgZG9lc24ndCBjb250YWluIGZyYWdtZW50LCB0aGUgc2FtZVxuICogc3RyaW5nIGlzIHJldHVybmVkLlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRnJhZ21lbnQodXJsKSB7XG4gIGNvbnN0IGluZGV4ID0gdXJsLmluZGV4T2YoJyMnKTtcbiAgaWYgKGluZGV4ID09IC0xKSB7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuICByZXR1cm4gdXJsLnN1YnN0cmluZygwLCBpbmRleCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZnJhZ21lbnQgZnJvbSB0aGUgVVJMLiBJZiB0aGUgVVJMIGRvZXNuJ3QgY29udGFpbiBmcmFnbWVudCxcbiAqIHRoZSBlbXB0eSBzdHJpbmcgaXMgcmV0dXJuZWQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGcmFnbWVudCh1cmwpIHtcbiAgY29uc3QgaW5kZXggPSB1cmwuaW5kZXhPZignIycpO1xuICBpZiAoaW5kZXggPT0gLTEpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgcmV0dXJuIHVybC5zdWJzdHJpbmcoaW5kZXgpO1xufVxuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciB0aGUgVVJMIGhhcyB0aGUgb3JpZ2luIG9mIGEgcHJveHkuXG4gKiBAcGFyYW0ge3N0cmluZ3whTG9jYXRpb259IHVybCBVUkwgb2YgYW4gQU1QIGRvY3VtZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzUHJveHlPcmlnaW4odXJsKSB7XG4gIGlmICh0eXBlb2YgdXJsID09ICdzdHJpbmcnKSB7XG4gICAgdXJsID0gcGFyc2VVcmxEZXByZWNhdGVkKHVybCk7XG4gIH1cbiAgcmV0dXJuIHVybHMuY2RuUHJveHlSZWdleC50ZXN0KHVybC5vcmlnaW4pO1xufVxuXG4vKipcbiAqIEZvciBwcm94eS1vcmlnaW4gVVJMcywgcmV0dXJucyB0aGUgc2VydmluZyB0eXBlLiBPdGhlcndpc2UsIHJldHVybnMgbnVsbC5cbiAqIEUuZy4sICdodHRwczovL2FtcC1jb20uY2RuLmFtcHByb2plY3Qub3JnL2Evcy9hbXAuY29tL2FtcF9kb2N1bWVudC5odG1sJ1xuICogcmV0dXJucyAnYScuXG4gKiBAcGFyYW0ge3N0cmluZ3whTG9jYXRpb259IHVybCBVUkwgb2YgYW4gQU1QIGRvY3VtZW50LlxuICogQHJldHVybiB7P3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFByb3h5U2VydmluZ1R5cGUodXJsKSB7XG4gIGlmICh0eXBlb2YgdXJsID09ICdzdHJpbmcnKSB7XG4gICAgdXJsID0gcGFyc2VVcmxEZXByZWNhdGVkKHVybCk7XG4gIH1cbiAgaWYgKCFpc1Byb3h5T3JpZ2luKHVybCkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBwYXRoID0gdXJsLnBhdGhuYW1lLnNwbGl0KCcvJywgMik7XG4gIHJldHVybiBwYXRoWzFdO1xufVxuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciB0aGUgVVJMIG9yaWdpbiBpcyBsb2NhbGhvc3QuXG4gKiBAcGFyYW0ge3N0cmluZ3whTG9jYXRpb259IHVybCBVUkwgb2YgYW4gQU1QIGRvY3VtZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTG9jYWxob3N0T3JpZ2luKHVybCkge1xuICBpZiAodHlwZW9mIHVybCA9PSAnc3RyaW5nJykge1xuICAgIHVybCA9IHBhcnNlVXJsRGVwcmVjYXRlZCh1cmwpO1xuICB9XG4gIHJldHVybiB1cmxzLmxvY2FsaG9zdFJlZ2V4LnRlc3QodXJsLm9yaWdpbik7XG59XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSBVUkwgaGFzIHZhbGlkIHByb3RvY29sLlxuICogRGVlcCBsaW5rIHByb3RvY29sIGlzIHZhbGlkLCBidXQgbm90IGphdmFzY3JpcHQgZXRjLlxuICogQHBhcmFtIHtzdHJpbmd8IUxvY2F0aW9ufSB1cmxcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1Byb3RvY29sVmFsaWQodXJsKSB7XG4gIGlmICghdXJsKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKHR5cGVvZiB1cmwgPT0gJ3N0cmluZycpIHtcbiAgICB1cmwgPSBwYXJzZVVybERlcHJlY2F0ZWQodXJsKTtcbiAgfVxuICByZXR1cm4gIUlOVkFMSURfUFJPVE9DT0xTLmluY2x1ZGVzKHVybC5wcm90b2NvbCk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIFVSTCB3aXRob3V0IEFNUCBKUyBwYXJhbWV0ZXJzLlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQW1wSnNQYXJhbXNGcm9tVXJsKHVybCkge1xuICBjb25zdCBwYXJzZWQgPSBwYXJzZVVybERlcHJlY2F0ZWQodXJsKTtcbiAgY29uc3Qgc2VhcmNoID0gcmVtb3ZlQW1wSnNQYXJhbXNGcm9tU2VhcmNoKHBhcnNlZC5zZWFyY2gpO1xuICByZXR1cm4gcGFyc2VkLm9yaWdpbiArIHBhcnNlZC5wYXRobmFtZSArIHNlYXJjaCArIHBhcnNlZC5oYXNoO1xuXG59XG5cbi8qKlxuICogUmV0dXJucyBhIFVSTCB3aXRob3V0IGEgcXVlcnkgc3RyaW5nLlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlU2VhcmNoKHVybCkge1xuICBjb25zdCBpbmRleCA9IHVybC5pbmRleE9mKCc/Jyk7XG4gIGlmIChpbmRleCA9PSAtMSkge1xuICAgIHJldHVybiB1cmw7XG4gIH1cbiAgY29uc3QgZnJhZ21lbnQgPSBnZXRGcmFnbWVudCh1cmwpO1xuICByZXR1cm4gdXJsLnN1YnN0cmluZygwLCBpbmRleCkgKyBmcmFnbWVudDtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIHBhcmFtZXRlcnMgdGhhdCBzdGFydCB3aXRoIGFtcCBqcyBwYXJhbWV0ZXIgcGF0dGVybiBhbmQgcmV0dXJucyB0aGVcbiAqIG5ldyBzZWFyY2ggc3RyaW5nLlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFNlYXJjaFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiByZW1vdmVBbXBKc1BhcmFtc0Zyb21TZWFyY2godXJsU2VhcmNoKSB7XG4gIGlmICghdXJsU2VhcmNoIHx8IHVybFNlYXJjaCA9PSAnPycpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgY29uc3Qgc2VhcmNoID0gdXJsU2VhcmNoXG4gICAgICAucmVwbGFjZShBTVBfSlNfUEFSQU1TX1JFR0VYLCAnJylcbiAgICAgIC5yZXBsYWNlKEFNUF9HU0FfUEFSQU1TX1JFR0VYLCAnJylcbiAgICAgIC5yZXBsYWNlKEFNUF9SX1BBUkFNU19SRUdFWCwgJycpXG4gICAgICAucmVwbGFjZShHT09HTEVfRVhQRVJJTUVOVF9QQVJBTVNfUkVHRVgsICcnKVxuICAgICAgLnJlcGxhY2UoL15bPyZdLywgJycpOyAvLyBSZW1vdmVzIGZpcnN0ID8gb3IgJi5cbiAgcmV0dXJuIHNlYXJjaCA/ICc/JyArIHNlYXJjaCA6ICcnO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHNvdXJjZSBVUkwgb2YgYW4gQU1QIGRvY3VtZW50IGZvciBkb2N1bWVudHMgc2VydmVkXG4gKiBvbiBhIHByb3h5IG9yaWdpbiBvciBkaXJlY3RseS5cbiAqIEBwYXJhbSB7c3RyaW5nfCFMb2NhdGlvbn0gdXJsIFVSTCBvZiBhbiBBTVAgZG9jdW1lbnQuXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTb3VyY2VVcmwodXJsKSB7XG4gIGlmICh0eXBlb2YgdXJsID09ICdzdHJpbmcnKSB7XG4gICAgdXJsID0gcGFyc2VVcmxEZXByZWNhdGVkKHVybCk7XG4gIH1cblxuICAvLyBOb3QgYSBwcm94eSBVUkwgLSByZXR1cm4gdGhlIFVSTCBpdHNlbGYuXG4gIGlmICghaXNQcm94eU9yaWdpbih1cmwpKSB7XG4gICAgcmV0dXJuIHVybC5ocmVmO1xuICB9XG5cbiAgLy8gQSBwcm94eSBVUkwuXG4gIC8vIEV4YW1wbGUgcGF0aCB0aGF0IGlzIGJlaW5nIG1hdGNoZWQgaGVyZS5cbiAgLy8gaHR0cHM6Ly9jZG4uYW1wcHJvamVjdC5vcmcvYy9zL3d3dy5vcmlnaW4uY29tL2Zvby9cbiAgLy8gVGhlIC9zLyBpcyBvcHRpb25hbCBhbmQgc2lnbmFscyBhIHNlY3VyZSBvcmlnaW4uXG4gIGNvbnN0IHBhdGggPSB1cmwucGF0aG5hbWUuc3BsaXQoJy8nKTtcbiAgY29uc3QgcHJlZml4ID0gcGF0aFsxXTtcbiAgdXNlcigpLmFzc2VydChTRVJWSU5HX1RZUEVfUFJFRklYW3ByZWZpeF0sXG4gICAgICAnVW5rbm93biBwYXRoIHByZWZpeCBpbiB1cmwgJXMnLCB1cmwuaHJlZik7XG4gIGNvbnN0IGRvbWFpbk9ySHR0cHNTaWduYWwgPSBwYXRoWzJdO1xuICBjb25zdCBvcmlnaW4gPSBkb21haW5Pckh0dHBzU2lnbmFsID09ICdzJ1xuICAgID8gJ2h0dHBzOi8vJyArIGRlY29kZVVSSUNvbXBvbmVudChwYXRoWzNdKVxuICAgIDogJ2h0dHA6Ly8nICsgZGVjb2RlVVJJQ29tcG9uZW50KGRvbWFpbk9ySHR0cHNTaWduYWwpO1xuICAvLyBTYW5pdHkgdGVzdCB0aGF0IHdoYXQgd2UgZm91bmQgbG9va3MgbGlrZSBhIGRvbWFpbi5cbiAgdXNlcigpLmFzc2VydChvcmlnaW4uaW5kZXhPZignLicpID4gMCwgJ0V4cGVjdGVkIGEgLiBpbiBvcmlnaW4gJXMnLCBvcmlnaW4pO1xuICBwYXRoLnNwbGljZSgxLCBkb21haW5Pckh0dHBzU2lnbmFsID09ICdzJyA/IDMgOiAyKTtcbiAgcmV0dXJuIG9yaWdpbiArIHBhdGguam9pbignLycpICtcbiAgICAgIHJlbW92ZUFtcEpzUGFyYW1zRnJvbVNlYXJjaCh1cmwuc2VhcmNoKSArICh1cmwuaGFzaCB8fCAnJyk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgc291cmNlIG9yaWdpbiBvZiBhbiBBTVAgZG9jdW1lbnQgZm9yIGRvY3VtZW50cyBzZXJ2ZWRcbiAqIG9uIGEgcHJveHkgb3JpZ2luIG9yIGRpcmVjdGx5LlxuICogQHBhcmFtIHtzdHJpbmd8IUxvY2F0aW9ufSB1cmwgVVJMIG9mIGFuIEFNUCBkb2N1bWVudC5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHNvdXJjZSBvcmlnaW4gb2YgdGhlIFVSTC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNvdXJjZU9yaWdpbih1cmwpIHtcbiAgcmV0dXJuIHBhcnNlVXJsRGVwcmVjYXRlZChnZXRTb3VyY2VVcmwodXJsKSkub3JpZ2luO1xufVxuXG4vKipcbiAqIFJldHVybnMgYWJzb2x1dGUgVVJMIHJlc29sdmVkIGJhc2VkIG9uIHRoZSByZWxhdGl2ZSBVUkwgYW5kIHRoZSBiYXNlLlxuICogQHBhcmFtIHtzdHJpbmd9IHJlbGF0aXZlVXJsU3RyaW5nXG4gKiBAcGFyYW0ge3N0cmluZ3whTG9jYXRpb259IGJhc2VVcmxcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVSZWxhdGl2ZVVybChyZWxhdGl2ZVVybFN0cmluZywgYmFzZVVybCkge1xuICBpZiAodHlwZW9mIGJhc2VVcmwgPT0gJ3N0cmluZycpIHtcbiAgICBiYXNlVXJsID0gcGFyc2VVcmxEZXByZWNhdGVkKGJhc2VVcmwpO1xuICB9XG4gIGlmICh0eXBlb2YgVVJMID09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gbmV3IFVSTChyZWxhdGl2ZVVybFN0cmluZywgYmFzZVVybC5ocmVmKS50b1N0cmluZygpO1xuICB9XG4gIHJldHVybiByZXNvbHZlUmVsYXRpdmVVcmxGYWxsYmFja18ocmVsYXRpdmVVcmxTdHJpbmcsIGJhc2VVcmwpO1xufVxuXG4vKipcbiAqIEZhbGxiYWNrIGZvciBVUkwgcmVzb2x2ZXIgd2hlbiBVUkwgY2xhc3MgaXMgbm90IGF2YWlsYWJsZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSByZWxhdGl2ZVVybFN0cmluZ1xuICogQHBhcmFtIHtzdHJpbmd8IUxvY2F0aW9ufSBiYXNlVXJsXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKiBAcHJpdmF0ZSBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZVJlbGF0aXZlVXJsRmFsbGJhY2tfKHJlbGF0aXZlVXJsU3RyaW5nLCBiYXNlVXJsKSB7XG4gIGlmICh0eXBlb2YgYmFzZVVybCA9PSAnc3RyaW5nJykge1xuICAgIGJhc2VVcmwgPSBwYXJzZVVybERlcHJlY2F0ZWQoYmFzZVVybCk7XG4gIH1cbiAgcmVsYXRpdmVVcmxTdHJpbmcgPSByZWxhdGl2ZVVybFN0cmluZy5yZXBsYWNlKC9cXFxcL2csICcvJyk7XG4gIGNvbnN0IHJlbGF0aXZlVXJsID0gcGFyc2VVcmxEZXByZWNhdGVkKHJlbGF0aXZlVXJsU3RyaW5nKTtcblxuICAvLyBBYnNvbHV0ZSBVUkwuXG4gIGlmIChzdGFydHNXaXRoKHJlbGF0aXZlVXJsU3RyaW5nLnRvTG93ZXJDYXNlKCksIHJlbGF0aXZlVXJsLnByb3RvY29sKSkge1xuICAgIHJldHVybiByZWxhdGl2ZVVybC5ocmVmO1xuICB9XG5cbiAgLy8gUHJvdG9jb2wtcmVsYXRpdmUgVVJMLlxuICBpZiAoc3RhcnRzV2l0aChyZWxhdGl2ZVVybFN0cmluZywgJy8vJykpIHtcbiAgICByZXR1cm4gYmFzZVVybC5wcm90b2NvbCArIHJlbGF0aXZlVXJsU3RyaW5nO1xuICB9XG5cbiAgLy8gQWJzb2x1dGUgcGF0aC5cbiAgaWYgKHN0YXJ0c1dpdGgocmVsYXRpdmVVcmxTdHJpbmcsICcvJykpIHtcbiAgICByZXR1cm4gYmFzZVVybC5vcmlnaW4gKyByZWxhdGl2ZVVybFN0cmluZztcbiAgfVxuXG4gIC8vIFJlbGF0aXZlIHBhdGguXG4gIHJldHVybiBiYXNlVXJsLm9yaWdpbiArIGJhc2VVcmwucGF0aG5hbWUucmVwbGFjZSgvXFwvW14vXSokLywgJy8nKVxuICAgICAgKyByZWxhdGl2ZVVybFN0cmluZztcbn1cblxuXG4vKipcbiAqIEFkZCBcIl9fYW1wX3NvdXJjZV9vcmlnaW5cIiBxdWVyeSBwYXJhbWV0ZXIgdG8gdGhlIFVSTC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb3JzVXJsKHdpbiwgdXJsKSB7XG4gIGNoZWNrQ29yc1VybCh1cmwpO1xuICBjb25zdCBzb3VyY2VPcmlnaW4gPSBnZXRTb3VyY2VPcmlnaW4od2luLmxvY2F0aW9uLmhyZWYpO1xuICByZXR1cm4gYWRkUGFyYW1Ub1VybCh1cmwsIFNPVVJDRV9PUklHSU5fUEFSQU0sIHNvdXJjZU9yaWdpbik7XG59XG5cblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIHVybCBoYXMgX19hbXBfc291cmNlX29yaWdpbiBhbmQgdGhyb3dzIGlmIGl0IGRvZXMuXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjaGVja0NvcnNVcmwodXJsKSB7XG4gIGNvbnN0IHBhcnNlZFVybCA9IHBhcnNlVXJsRGVwcmVjYXRlZCh1cmwpO1xuICBjb25zdCBxdWVyeSA9IHBhcnNlUXVlcnlTdHJpbmcocGFyc2VkVXJsLnNlYXJjaCk7XG4gIHVzZXIoKS5hc3NlcnQoIShTT1VSQ0VfT1JJR0lOX1BBUkFNIGluIHF1ZXJ5KSxcbiAgICAgICdTb3VyY2Ugb3JpZ2luIGlzIG5vdCBhbGxvd2VkIGluICVzJywgdXJsKTtcbn1cblxuLyoqXG4gKiBUcmllcyB0byBkZWNvZGUgYSBVUkkgY29tcG9uZW50LCBmYWxsaW5nIGJhY2sgdG8gb3B0X2ZhbGxiYWNrIChvciBhbiBlbXB0eVxuICogc3RyaW5nKVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb21wb25lbnRcbiAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X2ZhbGxiYWNrXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cnlEZWNvZGVVcmlDb21wb25lbnQoY29tcG9uZW50LCBvcHRfZmFsbGJhY2spIHtcbiAgcmV0dXJuIHRyeURlY29kZVVyaUNvbXBvbmVudF8oY29tcG9uZW50LCBvcHRfZmFsbGJhY2spO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cblxuLyoqXG4gKiBDb21wYXJlcyBpZiB0d28gYXJyYXlzIGNvbnRhaW5zIGV4YWN0bHkgc2FtZSBlbGVtZW50cyBvZiBzYW1lIG51bWJlclxuICogb2Ygc2FtZSBvcmRlci5cbiAqIE5vdGljZSB0aGF0IGl0IGRvZXMgTk9UIGhhbmRsZSBOYU4gY2FzZSBhcyBleHBlY3RlZFxuICpcbiAqIEBwYXJhbSB7IUFycmF5PFQ+fSBhcnIxXG4gKiBAcGFyYW0geyFBcnJheTxUPn0gYXJyMlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcmVFcXVhbE9yZGVyZWQoYXJyMSwgYXJyMikge1xuICBpZiAoYXJyMS5sZW5ndGggIT09IGFycjIubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIxLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGFycjFbaV0gIT09IGFycjJbaV0pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBBIGJpdCBsaWtlIEFycmF5I2ZpbHRlciwgYnV0IHJlbW92ZXMgZWxlbWVudHMgdGhhdCBmaWx0ZXIgZmFsc2UgZnJvbSB0aGVcbiAqIGFycmF5LiBSZXR1cm5zIHRoZSBmaWx0ZXJlZCBpdGVtcy5cbiAqXG4gKiBAcGFyYW0geyFBcnJheTxUPn0gYXJyYXlcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oVCwgbnVtYmVyLCAhQXJyYXk8VD4pOmJvb2xlYW59IGZpbHRlclxuICogQHJldHVybiB7IUFycmF5PFQ+fVxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlclNwbGljZShhcnJheSwgZmlsdGVyKSB7XG4gIGNvbnN0IHNwbGljZSA9IFtdO1xuICBsZXQgaW5kZXggPSAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgaXRlbSA9IGFycmF5W2ldO1xuICAgIGlmIChmaWx0ZXIoaXRlbSwgaSwgYXJyYXkpKSB7XG4gICAgICBpZiAoaW5kZXggPCBpKSB7XG4gICAgICAgIGFycmF5W2luZGV4XSA9IGl0ZW07XG4gICAgICB9XG4gICAgICBpbmRleCsrO1xuICAgIH0gZWxzZSB7XG4gICAgICBzcGxpY2UucHVzaChpdGVtKTtcbiAgICB9XG4gIH1cblxuICBpZiAoaW5kZXggPCBhcnJheS5sZW5ndGgpIHtcbiAgICBhcnJheS5sZW5ndGggPSBpbmRleDtcbiAgfVxuXG4gIHJldHVybiBzcGxpY2U7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgbWF0Y2hpbmcgdGhlIHByZWRpY2F0ZS5cbiAqIExpa2UgQXJyYXkjZmluZEluZGV4LlxuICpcbiAqIEBwYXJhbSB7IUFycmF5PFQ+fSBhcnJheVxuICogQHBhcmFtIHtmdW5jdGlvbihULCBudW1iZXIsICFBcnJheTxUPik6Ym9vbGVhbn0gcHJlZGljYXRlXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZEluZGV4KGFycmF5LCBwcmVkaWNhdGUpIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChwcmVkaWNhdGUoYXJyYXlbaV0sIGksIGFycmF5KSkge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICB9XG4gIHJldHVybiAtMTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgZ2l2ZW4gaXRlcmF0b3IgdG8gYW4gYXJyYXkuXG4gKlxuICogQHBhcmFtIHshSXRlcmF0b3I8VD59IGl0ZXJhdG9yXG4gKiBAcmV0dXJuIHtBcnJheTxUPn1cbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tSXRlcmF0b3IoaXRlcmF0b3IpIHtcbiAgY29uc3QgYXJyYXkgPSBbXTtcbiAgZm9yIChsZXQgZSA9IGl0ZXJhdG9yLm5leHQoKTsgIWUuZG9uZTsgZSA9IGl0ZXJhdG9yLm5leHQoKSkge1xuICAgIGFycmF5LnB1c2goZS52YWx1ZSk7XG4gIH1cbiAgcmV0dXJuIGFycmF5O1xufVxuXG4vKipcbiAqIEFkZHMgaXRlbSB0byBhcnJheSBpZiBpdCBpcyBub3QgYWxyZWFkeSBwcmVzZW50LlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8VD59IGFycmF5XG4gKiBAcGFyYW0ge1R9IGl0ZW1cbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwdXNoSWZOb3RFeGlzdChhcnJheSwgaXRlbSkge1xuICBpZiAoYXJyYXkuaW5kZXhPZihpdGVtKSA8IDApIHtcbiAgICBhcnJheS5wdXNoKGl0ZW0pO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtieXRlc1RvU3RyaW5nLCBzdHJpbmdUb0J5dGVzLCB1dGY4RW5jb2RlfSBmcm9tICcuL2J5dGVzJztcblxuLyoqXG4gKiBDaGFyYWN0ZXIgbWFwcGluZyBmcm9tIGJhc2U2NHVybCB0byBiYXNlNjQuXG4gKiBAY29uc3QgeyFPYmplY3Q8c3RyaW5nLCBzdHJpbmc+fVxuICovXG5jb25zdCBiYXNlNjRVcmxEZWNvZGVTdWJzID0geyctJzogJysnLCAnXyc6ICcvJywgJy4nOiAnPSd9O1xuXG4vKipcbiAqIENoYXJhY3RlciBtYXBwaW5nIGZyb20gYmFzZTY0IHRvIGJhc2U2NHVybC5cbiAqIEBjb25zdCB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz59XG4gKi9cbmNvbnN0IGJhc2U2NFVybEVuY29kZVN1YnMgPSB7JysnOiAnLScsICcvJzogJ18nLCAnPSc6ICcuJ307XG5cbi8qKlxuICogQ29udmVydHMgYSBzdHJpbmcgd2hpY2ggaXMgaW4gYmFzZTY0dXJsIGVuY29kaW5nIGludG8gYSBVaW50OEFycmF5XG4gKiBjb250YWluaW5nIHRoZSBkZWNvZGVkIHZhbHVlLlxuICogQHBhcmFtIHtzdHJpbmd9IHN0clxuICogQHJldHVybiB7IVVpbnQ4QXJyYXl9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBiYXNlNjRVcmxEZWNvZGVUb0J5dGVzKHN0cikge1xuICBjb25zdCBlbmNvZGVkID0gYXRvYihzdHIucmVwbGFjZSgvWy1fLl0vZywgY2ggPT4gYmFzZTY0VXJsRGVjb2RlU3Vic1tjaF0pKTtcbiAgcmV0dXJuIHN0cmluZ1RvQnl0ZXMoZW5jb2RlZCk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYSBzdHJpbmcgd2hpY2ggaXMgaW4gYmFzZTY0IGVuY29kaW5nIGludG8gYSBVaW50OEFycmF5XG4gKiBjb250YWluaW5nIHRoZSBkZWNvZGVkIHZhbHVlLlxuICogQHBhcmFtIHtzdHJpbmd9IHN0clxuICogQHJldHVybiB7IVVpbnQ4QXJyYXl9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBiYXNlNjREZWNvZGVUb0J5dGVzKHN0cikge1xuICByZXR1cm4gc3RyaW5nVG9CeXRlcyhhdG9iKHN0cikpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgYnl0ZXMgYXJyYXkgaW50byBiYXNlNjR1cmwgZW5jb2RlZCBzdHJpbmcuXG4gKiBiYXNlNjR1cmwgaXMgZGVmaW5lZCBpbiBSRkMgNDY0OC4gSXQgaXMgc29tZXRpbWVzIHJlZmVycmVkIHRvIGFzIFwid2ViIHNhZmVcIi5cbiAqIEBwYXJhbSB7IVVpbnQ4QXJyYXl9IGJ5dGVzXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBiYXNlNjRVcmxFbmNvZGVGcm9tQnl0ZXMoYnl0ZXMpIHtcbiAgY29uc3Qgc3RyID0gYnl0ZXNUb1N0cmluZyhieXRlcyk7XG4gIHJldHVybiBidG9hKHN0cikucmVwbGFjZSgvWysvPV0vZywgY2ggPT4gYmFzZTY0VXJsRW5jb2RlU3Vic1tjaF0pO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgc3RyaW5nIGludG8gYmFzZTY0dXJsIGVuY29kZWQgc3RyaW5nLlxuICogYmFzZTY0dXJsIGlzIGRlZmluZWQgaW4gUkZDIDQ2NDguIEl0IGlzIHNvbWV0aW1lcyByZWZlcnJlZCB0byBhcyBcIndlYiBzYWZlXCIuXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBiYXNlNjRVcmxFbmNvZGVGcm9tU3RyaW5nKHN0cikge1xuICBjb25zdCBieXRlcyA9IHV0ZjhFbmNvZGUoc3RyKTtcbiAgcmV0dXJuIGJhc2U2NFVybEVuY29kZUZyb21CeXRlcyhieXRlcyk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYSBieXRlcyBhcnJheSBpbnRvIGJhc2U2NCBlbmNvZGVkIHN0cmluZy5cbiAqIEBwYXJhbSB7IVVpbnQ4QXJyYXl9IGJ5dGVzXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBiYXNlNjRFbmNvZGVGcm9tQnl0ZXMoYnl0ZXMpIHtcbiAgcmV0dXJuIGJ0b2EoYnl0ZXNUb1N0cmluZyhieXRlcykpO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7ZGV2fSBmcm9tICcuLi9sb2cnO1xuXG4vKipcbiAqIEludGVycHJldCBhIGJ5dGUgYXJyYXkgYXMgYSBVVEYtOCBzdHJpbmcuXG4gKiBAcGFyYW0geyFCdWZmZXJTb3VyY2V9IGJ5dGVzXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1dGY4RGVjb2RlKGJ5dGVzKSB7XG4gIGlmICh0eXBlb2YgVGV4dERlY29kZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIG5ldyBUZXh0RGVjb2RlcigndXRmLTgnKS5kZWNvZGUoYnl0ZXMpO1xuICB9XG4gIGNvbnN0IGFzY2lpU3RyaW5nID0gYnl0ZXNUb1N0cmluZyhuZXcgVWludDhBcnJheShieXRlcy5idWZmZXIgfHwgYnl0ZXMpKTtcbiAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUoYXNjaWlTdHJpbmcpKTtcbn1cblxuLyoqXG4gKiBUdXJuIGEgc3RyaW5nIGludG8gVVRGLTggYnl0ZXMuXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nXG4gKiBAcmV0dXJuIHshVWludDhBcnJheX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHV0ZjhFbmNvZGUoc3RyaW5nKSB7XG4gIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigndXRmLTgnKS5lbmNvZGUoc3RyaW5nKTtcbiAgfVxuICByZXR1cm4gc3RyaW5nVG9CeXRlcyh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoc3RyaW5nKSkpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgc3RyaW5nIHdoaWNoIGhvbGRzIDgtYml0IGNvZGUgcG9pbnRzLCBzdWNoIGFzIHRoZSByZXN1bHQgb2YgYXRvYixcbiAqIGludG8gYSBVaW50OEFycmF5IHdpdGggdGhlIGNvcnJlc3BvbmRpbmcgYnl0ZXMuXG4gKiBJZiB5b3UgaGF2ZSBhIHN0cmluZyBvZiBjaGFyYWN0ZXJzLCB5b3UgcHJvYmFibHkgd2FudCB0byBiZSB1c2luZyB1dGY4RW5jb2RlLlxuICogQHBhcmFtIHtzdHJpbmd9IHN0clxuICogQHJldHVybiB7IVVpbnQ4QXJyYXl9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdUb0J5dGVzKHN0cikge1xuICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KHN0ci5sZW5ndGgpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGNoYXJDb2RlID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgZGV2KCkuYXNzZXJ0KGNoYXJDb2RlIDw9IDI1NSwgJ0NoYXJhY3RlcnMgbXVzdCBiZSBpbiByYW5nZSBbMCwyNTVdJyk7XG4gICAgYnl0ZXNbaV0gPSBjaGFyQ29kZTtcbiAgfVxuICByZXR1cm4gYnl0ZXM7XG59XG5cbi8qKlxuICogQ29udmVydHMgYSA4LWJpdCBieXRlcyBhcnJheSBpbnRvIGEgc3RyaW5nXG4gKiBAcGFyYW0geyFVaW50OEFycmF5fSBieXRlc1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gYnl0ZXNUb1N0cmluZyhieXRlcykge1xuICAvLyBJbnRlbnRpb25hbGx5IGF2b2lkcyBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5IHNvIHdlIGRvbid0IHN1ZmZlciBhXG4gIC8vIHN0YWNrIG92ZXJmbG93LiAjMTA0OTUsIGh0dHBzOi8vanNwZXJmLmNvbS9ieXRlc1RvU3RyaW5nLTJcbiAgY29uc3QgYXJyYXkgPSBuZXcgQXJyYXkoYnl0ZXMubGVuZ3RoKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkrKykge1xuICAgIGFycmF5W2ldID0gU3RyaW5nLmZyb21DaGFyQ29kZShieXRlc1tpXSk7XG4gIH1cbiAgcmV0dXJuIGFycmF5LmpvaW4oJycpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgNC1pdGVtIGJ5dGUgYXJyYXkgdG8gYW4gdW5zaWduZWQgaW50ZWdlci5cbiAqIEFzc3VtZXMgYnl0ZXMgYXJlIGJpZyBlbmRpYW4uXG4gKiBAcGFyYW0geyFVaW50OEFycmF5fSBieXRlc1xuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gYnl0ZXNUb1VJbnQzMihieXRlcykge1xuICBpZiAoYnl0ZXMubGVuZ3RoICE9IDQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlY2VpdmVkIGJ5dGUgYXJyYXkgd2l0aCBsZW5ndGggIT0gNCcpO1xuICB9XG4gIGNvbnN0IHZhbCA9IChieXRlc1swXSAmIDB4RkYpIDw8IDI0IHxcbiAgICAgKGJ5dGVzWzFdICYgMHhGRikgPDwgMTYgfFxuICAgICAoYnl0ZXNbMl0gJiAweEZGKSA8PCA4IHxcbiAgICAgKGJ5dGVzWzNdICYgMHhGRik7XG4gIC8vIENvbnZlcnQgdG8gdW5zaWduZWQuXG4gIHJldHVybiB2YWwgPj4+IDA7XG59XG5cbi8qKlxuICogR2VuZXJhdGUgYSByYW5kb20gYnl0ZXMgYXJyYXkgd2l0aCBzcGVjaWZpYyBsZW5ndGggdXNpbmdcbiAqIHdpbi5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLiBSZXR1cm4gbnVsbCBpZiBpdCBpcyBub3QgYXZhaWxhYmxlLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7bnVtYmVyfSBsZW5ndGhcbiAqIEByZXR1cm4gez9VaW50OEFycmF5fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3J5cHRvUmFuZG9tQnl0ZXNBcnJheSh3aW4sIGxlbmd0aCkge1xuICBpZiAoIXdpbi5jcnlwdG8gfHwgIXdpbi5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyBXaWRlbHkgYXZhaWxhYmxlIGluIGJyb3dzZXJzIHdlIHN1cHBvcnQ6XG4gIC8vIGh0dHA6Ly9jYW5pdXNlLmNvbS8jc2VhcmNoPWdldFJhbmRvbVZhbHVlc1xuICBjb25zdCB1aW50OGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKTtcbiAgd2luLmNyeXB0by5nZXRSYW5kb21WYWx1ZXModWludDhhcnJheSk7XG4gIHJldHVybiB1aW50OGFycmF5O1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7ZGV2fSBmcm9tICcuLi9sb2cnO1xuXG4vKiogQGNvbnN0IHtzdHJpbmd9ICovXG5jb25zdCBUQUcgPSAnbHJ1LWNhY2hlJztcblxuLyoqXG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgY2xhc3MgTHJ1Q2FjaGUge1xuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IGNhcGFjaXR5XG4gICAqL1xuICBjb25zdHJ1Y3RvcihjYXBhY2l0eSkge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge251bWJlcn0gKi9cbiAgICB0aGlzLmNhcGFjaXR5XyA9IGNhcGFjaXR5O1xuXG4gICAgLyoqIEBwcml2YXRlIHtudW1iZXJ9ICovXG4gICAgdGhpcy5zaXplXyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBBbiBpbmNyZW1lbnRpbmcgY291bnRlciB0byBkZWZpbmUgdGhlIGxhc3QgYWNjZXNzLlxuICAgICAqIEBwcml2YXRlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5hY2Nlc3NfID0gMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7IU9iamVjdDwobnVtYmVyfHN0cmluZyksIHtwYXlsb2FkOiBULCBhY2Nlc3M6IG51bWJlcn0+fSAqL1xuICAgIHRoaXMuY2FjaGVfID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIga2V5IGlzIGNhY2hlZC5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSBrZXlcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGhhcyhrZXkpIHtcbiAgICByZXR1cm4gISF0aGlzLmNhY2hlX1trZXldO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30ga2V5XG4gICAqIEByZXR1cm4ge1R9IFRoZSBjYWNoZWQgcGF5bG9hZC5cbiAgICovXG4gIGdldChrZXkpIHtcbiAgICBjb25zdCBjYWNoZWFibGUgPSB0aGlzLmNhY2hlX1trZXldO1xuICAgIGlmIChjYWNoZWFibGUpIHtcbiAgICAgIGNhY2hlYWJsZS5hY2Nlc3MgPSArK3RoaXMuYWNjZXNzXztcbiAgICAgIHJldHVybiBjYWNoZWFibGUucGF5bG9hZDtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9IGtleVxuICAgKiBAcGFyYW0ge1R9IHBheWxvYWQgVGhlIHBheWxvYWQgdG8gY2FjaGUuXG4gICAqL1xuICBwdXQoa2V5LCBwYXlsb2FkKSB7XG4gICAgaWYgKCF0aGlzLmhhcyhrZXkpKSB7XG4gICAgICB0aGlzLnNpemVfKys7XG4gICAgfVxuICAgIHRoaXMuY2FjaGVfW2tleV0gPSB7cGF5bG9hZCwgYWNjZXNzOiB0aGlzLmFjY2Vzc199O1xuICAgIHRoaXMuZXZpY3RfKCk7XG4gIH1cblxuICAvKipcbiAgICogRXZpY3RzIHRoZSBvbGRlc3QgY2FjaGUgZW50cnksIGlmIHdlJ3ZlIGV4Y2VlZGVkIGNhcGFjaXR5LlxuICAgKi9cbiAgZXZpY3RfKCkge1xuICAgIGlmICh0aGlzLnNpemVfIDw9IHRoaXMuY2FwYWNpdHlfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZGV2KCkud2FybihUQUcsICdUcmltbWluZyBMUlUgY2FjaGUnKTtcbiAgICBjb25zdCBjYWNoZSA9IHRoaXMuY2FjaGVfO1xuICAgIGxldCBvbGRlc3QgPSB0aGlzLmFjY2Vzc18gKyAxO1xuICAgIGxldCBvbGRlc3RLZXk7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gY2FjaGUpIHtcbiAgICAgIGNvbnN0IHthY2Nlc3N9ID0gY2FjaGVba2V5XTtcbiAgICAgIGlmIChhY2Nlc3MgPCBvbGRlc3QpIHtcbiAgICAgICAgb2xkZXN0ID0gYWNjZXNzO1xuICAgICAgICBvbGRlc3RLZXkgPSBrZXk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG9sZGVzdEtleSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBkZWxldGUgY2FjaGVbb2xkZXN0S2V5XTtcbiAgICAgIHRoaXMuc2l6ZV8tLTtcbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge2lzT2JqZWN0fSBmcm9tICcuLi90eXBlcyc7XG5cbi8qIEBjb25zdCAqL1xuY29uc3QgaGFzT3duXyA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogUmV0dXJucyBhIG1hcC1saWtlIG9iamVjdC5cbiAqIElmIG9wdF9pbml0aWFsIGlzIHByb3ZpZGVkLCBjb3BpZXMgaXRzIG93biBwcm9wZXJ0aWVzIGludG8gdGhlXG4gKiBuZXdseSBjcmVhdGVkIG9iamVjdC5cbiAqIEBwYXJhbSB7VD19IG9wdF9pbml0aWFsIFRoaXMgc2hvdWxkIHR5cGljYWxseSBiZSBhbiBvYmplY3QgbGl0ZXJhbC5cbiAqIEByZXR1cm4ge1R9XG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gbWFwKG9wdF9pbml0aWFsKSB7XG4gIGNvbnN0IG9iaiA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGlmIChvcHRfaW5pdGlhbCkge1xuICAgIE9iamVjdC5hc3NpZ24ob2JqLCBvcHRfaW5pdGlhbCk7XG4gIH1cbiAgcmV0dXJuIG9iajtcbn1cblxuLyoqXG4gKiBSZXR1cm4gYW4gZW1wdHkgSnNvbk9iamVjdCBvciBtYWtlcyB0aGUgcGFzc2VkIGluIG9iamVjdCBsaXRlcmFsXG4gKiBhbiBKc29uT2JqZWN0LlxuICogVGhlIEpzb25PYmplY3QgdHlwZSBpcyBqdXN0IGEgc2ltcGxlIG9iamVjdCB0aGF0IGlzIGF0LWRpY3QuXG4gKiBTZWVcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1jb21waWxlci93aWtpL0BzdHJ1Y3QtYW5kLUBkaWN0LUFubm90YXRpb25zXG4gKiBmb3Igd2hhdCBhIGRpY3QgaXMgdHlwZS13aXNlLlxuICogVGhlIGxpbnRlciBlbmZvcmNlcyB0aGF0IHRoZSBhcmd1bWVudCBpcywgaW4gZmFjdCwgYXQtZGljdCBsaWtlLlxuICogQHBhcmFtIHshT2JqZWN0PX0gb3B0X2luaXRpYWxcbiAqIEByZXR1cm4geyFKc29uT2JqZWN0fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGljdChvcHRfaW5pdGlhbCkge1xuICAvLyBXZSBkbyBub3QgY29weS4gVGhlIGxpbnRlciBlbmZvcmNlcyB0aGF0IHRoZSBwYXNzZWQgaW4gb2JqZWN0IGlzIGEgbGl0ZXJhbFxuICAvLyBhbmQgdGh1cyB0aGUgY2FsbGVyIGNhbm5vdCBoYXZlIGEgcmVmZXJlbmNlIHRvIGl0LlxuICByZXR1cm4gLyoqIEB0eXBlIHshSnNvbk9iamVjdH0gKi8gKG9wdF9pbml0aWFsIHx8IHt9KTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIGdpdmVuIGtleSBpcyBhIHByb3BlcnR5IGluIHRoZSBtYXAuXG4gKlxuICogQHBhcmFtIHtUfSAgb2JqIGEgbWFwIGxpa2UgcHJvcGVydHkuXG4gKiBAcGFyYW0ge3N0cmluZ30gIGtleVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNPd24ob2JqLCBrZXkpIHtcbiAgcmV0dXJuIGhhc093bl8uY2FsbChvYmosIGtleSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBvYmpba2V5XSBpZmYga2V5IGlzIG9iaidzIG93biBwcm9wZXJ0eSAoaXMgbm90IGluaGVyaXRlZCkuXG4gKiBPdGhlcndpc2UsIHJldHVybnMgdW5kZWZpbmVkLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcbiAqIEByZXR1cm4geyp9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvd25Qcm9wZXJ0eShvYmosIGtleSkge1xuICBpZiAoaGFzT3duKG9iaiwga2V5KSkge1xuICAgIHJldHVybiBvYmpba2V5XTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cbi8qKlxuICogRGVlcCBtZXJnZXMgc291cmNlIGludG8gdGFyZ2V0LlxuICpcbiAqIEBwYXJhbSB7IU9iamVjdH0gdGFyZ2V0XG4gKiBAcGFyYW0geyFPYmplY3R9IHNvdXJjZVxuICogQHBhcmFtIHtudW1iZXJ9IGRlcHRoIFRoZSBtYXhpbXVtIG1lcmdlIGRlcHRoLiBJZiBleGNlZWRlZCwgT2JqZWN0LmFzc2lnblxuICogICAgICAgICAgICAgICAgICAgICAgIHdpbGwgYmUgdXNlZCBpbnN0ZWFkLlxuICogQHJldHVybiB7IU9iamVjdH1cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiBzb3VyY2UgY29udGFpbnMgYSBjaXJjdWxhciByZWZlcmVuY2UuXG4gKiBOb3RlOiBPbmx5IG5lc3RlZCBvYmplY3RzIGFyZSBkZWVwLW1lcmdlZCwgcHJpbWl0aXZlcyBhbmQgYXJyYXlzIGFyZSBub3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWVwTWVyZ2UodGFyZ2V0LCBzb3VyY2UsIGRlcHRoID0gMTApIHtcbiAgLy8gS2VlcCB0cmFjayBvZiBzZWVuIG9iamVjdHMgdG8gZGV0ZWN0IHJlY3Vyc2l2ZSByZWZlcmVuY2VzLlxuICBjb25zdCBzZWVuID0gW107XG5cbiAgLyoqIEB0eXBlIHshQXJyYXk8e3Q6ICFPYmplY3QsIHM6ICFPYmplY3QsIGQ6IG51bWJlcn0+fSAqL1xuICBjb25zdCBxdWV1ZSA9IFtdO1xuICBxdWV1ZS5wdXNoKHt0OiB0YXJnZXQsIHM6IHNvdXJjZSwgZDogMH0pO1xuXG4gIC8vIEJGUyB0byBlbnN1cmUgb2JqZWN0cyBkb24ndCBoYXZlIHJlY3Vyc2l2ZSByZWZlcmVuY2VzIGF0IHNoYWxsb3dlciBkZXB0aHMuXG4gIHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgY29uc3Qge3QsIHMsIGR9ID0gcXVldWUuc2hpZnQoKTtcbiAgICBpZiAoc2Vlbi5pbmNsdWRlcyhzKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTb3VyY2Ugb2JqZWN0IGhhcyBhIGNpcmN1bGFyIHJlZmVyZW5jZS4nKTtcbiAgICB9XG4gICAgc2Vlbi5wdXNoKHMpO1xuICAgIGlmICh0ID09PSBzKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGQgPiBkZXB0aCkge1xuICAgICAgT2JqZWN0LmFzc2lnbih0LCBzKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBPYmplY3Qua2V5cyhzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICBjb25zdCBuZXdWYWx1ZSA9IHNba2V5XTtcbiAgICAgIC8vIFBlcmZvcm0gYSBkZWVwIG1lcmdlIElGRiBib3RoIHRhcmdldCBhbmQgc291cmNlIGhhdmUgdGhlIHNhbWUga2V5XG4gICAgICAvLyB3aG9zZSBjb3JyZXNwb25kaW5nIHZhbHVlcyBhcmUgb2JqZWN0cy5cbiAgICAgIGlmIChoYXNPd24odCwga2V5KSkge1xuICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IHRba2V5XTtcbiAgICAgICAgaWYgKGlzT2JqZWN0KG5ld1ZhbHVlKSAmJiBpc09iamVjdChvbGRWYWx1ZSkpIHtcbiAgICAgICAgICBxdWV1ZS5wdXNoKHt0OiBvbGRWYWx1ZSwgczogbmV3VmFsdWUsIGQ6IGQgKyAxfSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0W2tleV0gPSBuZXdWYWx1ZTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IU9iamVjdH0gbyBBbiBvYmplY3QgdG8gcmVtb3ZlIHByb3BlcnRpZXMgZnJvbVxuICogQHBhcmFtIHshQXJyYXk8c3RyaW5nPn0gcHJvcHMgQSBsaXN0IG9mIHByb3BlcnRpZXMgdG8gcmVtb3ZlIGZyb20gdGhlIE9iamVjdFxuICogQHJldHVybiB7IU9iamVjdH0gQW4gb2JqZWN0IHdpdGggdGhlIGdpdmVuIHByb3BlcnRpZXMgcmVtb3ZlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gb21pdChvLCBwcm9wcykge1xuICByZXR1cm4gT2JqZWN0LmtleXMobykucmVkdWNlKChhY2MsIGtleSkgPT4ge1xuICAgIGlmICghcHJvcHMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgYWNjW2tleV0gPSBvW2tleV07XG4gICAgfVxuICAgIHJldHVybiBhY2M7XG4gIH0sIHt9KTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIFJldHVybnMgYSBEZWZlcnJlZCBzdHJ1Y3QsIHdoaWNoIGhvbGRzIGEgcGVuZGluZyBwcm9taXNlIGFuZCBpdHMgYXNzb2NpYXRlZFxuICogcmVzb2x2ZSBhbmQgcmVqZWN0IGZ1bmN0aW9ucy5cbiAqXG4gKiBUaGlzIGlzIHByZWZlcnJlZCBpbnN0ZWFkIG9mIGNyZWF0aW5nIGEgUHJvbWlzZSBpbnN0YW5jZSB0byBleHRyYWN0IHRoZVxuICogcmVzb2x2ZS9yZWplY3QgZnVuY3Rpb25zIHlvdXJzZWxmOlxuICpcbiAqIGBgYFxuICogLy8gQXZvaWQgZG9pbmdcbiAqIGxldCByZXNvbHZlO1xuICogY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKHJlcyA9PiB7XG4gKiAgIHJlc29sdmUgPSByZXM7XG4gKiB9KTtcbiAqXG4gKiAvLyBHb29kXG4gKiBjb25zdCBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xuICogY29uc3QgeyBwcm9taXNlLCByZXNvbHZlIH0gPSBkZWZlcnJlZDtcbiAqIGBgYFxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmV4cG9ydCBjbGFzcyBEZWZlcnJlZCB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIERlZmVycmVkLlxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgbGV0IHJlc29sdmUsIHJlamVjdDtcblxuICAgIC8qKlxuICAgICAqIEBjb25zdCB7IVByb21pc2U8VD59XG4gICAgICovXG4gICAgdGhpcy5wcm9taXNlID0gbmV3IC8qT0sqL1Byb21pc2UoKHJlcywgcmVqKSA9PiB7XG4gICAgICByZXNvbHZlID0gcmVzO1xuICAgICAgcmVqZWN0ID0gcmVqO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQGNvbnN0IHtmdW5jdGlvbihUPSl9XG4gICAgICovXG4gICAgdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTtcblxuICAgIC8qKlxuICAgICAqIEBjb25zdCB7ZnVuY3Rpb24oKj0pfVxuICAgICAqL1xuICAgIHRoaXMucmVqZWN0ID0gcmVqZWN0O1xuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHByb21pc2UgcmVzb2x2ZWQgdG8gdGhlIHJldHVybiB2YWx1ZSBvZiBmbi5cbiAqIElmIGZuIHN5bmMgdGhyb3dzLCBpdCB3aWxsIGNhdXNlIHRoZSBwcm9taXNlIHRvIHJlamVjdC5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCk6VH0gZm5cbiAqIEByZXR1cm4geyFQcm9taXNlPFQ+fVxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyeVJlc29sdmUoZm4pIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgIHJlc29sdmUoZm4oKSk7XG4gIH0pO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIHdoaWNoIHJlc29sdmVzIGlmIGEgdGhyZXNob2xkIGFtb3VudCBvZiB0aGUgZ2l2ZW4gcHJvbWlzZXNcbiAqIHJlc29sdmUsIGFuZCByZWplY3RzIG90aGVyd2lzZS5cbiAqIEBwYXJhbSB7IUFycmF5PCFQcm9taXNlPn0gcHJvbWlzZXMgVGhlIGFycmF5IG9mIHByb21pc2VzIHRvIHRlc3QuXG4gKiBAcGFyYW0ge251bWJlcn0gY291bnQgVGhlIG51bWJlciBvZiBwcm9taXNlcyB0aGF0IG11c3QgcmVzb2x2ZSBmb3IgdGhlXG4gKiAgICAgcmV0dXJuZWQgcHJvbWlzZSB0byByZXNvbHZlLlxuICogQHJldHVybiB7IVByb21pc2V9IEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIGlmIGFueSBvZiB0aGUgZ2l2ZW4gcHJvbWlzZXNcbiAqICAgICByZXNvbHZlLCBhbmQgd2hpY2ggcmVqZWN0cyBvdGhlcndpc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzb21lKHByb21pc2VzLCBjb3VudCA9IDEpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBjb3VudCA9IE1hdGgubWF4KGNvdW50LCAwKTtcbiAgICBjb25zdCBleHRyYSA9IHByb21pc2VzLmxlbmd0aCAtIGNvdW50O1xuICAgIGlmIChleHRyYSA8IDApIHtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoJ25vdCBlbm91Z2ggcHJvbWlzZXMgdG8gcmVzb2x2ZScpKTtcbiAgICB9XG4gICAgaWYgKHByb21pc2VzLmxlbmd0aCA9PSAwKSB7XG4gICAgICByZXNvbHZlKFtdKTtcbiAgICB9XG4gICAgY29uc3QgdmFsdWVzID0gW107XG4gICAgY29uc3QgcmVhc29ucyA9IFtdO1xuXG4gICAgY29uc3Qgb25GdWxmaWxsZWQgPSB2YWx1ZSA9PiB7XG4gICAgICBpZiAodmFsdWVzLmxlbmd0aCA8IGNvdW50KSB7XG4gICAgICAgIHZhbHVlcy5wdXNoKHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZXMubGVuZ3RoID09IGNvdW50KSB7XG4gICAgICAgIHJlc29sdmUodmFsdWVzKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IG9uUmVqZWN0ZWQgPSByZWFzb24gPT4ge1xuICAgICAgaWYgKHJlYXNvbnMubGVuZ3RoIDw9IGV4dHJhKSB7XG4gICAgICAgIHJlYXNvbnMucHVzaChyZWFzb24pO1xuICAgICAgfVxuICAgICAgaWYgKHJlYXNvbnMubGVuZ3RoID4gZXh0cmEpIHtcbiAgICAgICAgcmVqZWN0KHJlYXNvbnMpO1xuICAgICAgfVxuICAgIH07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9taXNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgUHJvbWlzZS5yZXNvbHZlKHByb21pc2VzW2ldKS50aGVuKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIFJlc29sdmVzIHdpdGggdGhlIHJlc3VsdCBvZiB0aGUgbGFzdCBwcm9taXNlIGFkZGVkLlxuICogQGltcGxlbWVudHMge0lUaGVuYWJsZX1cbiAqL1xuZXhwb3J0IGNsYXNzIExhc3RBZGRlZFJlc29sdmVyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IUFycmF5PCFQcm9taXNlPj19IG9wdF9wcm9taXNlc1xuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0X3Byb21pc2VzKSB7XG4gICAgbGV0IHJlc29sdmVfLCByZWplY3RfO1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFQcm9taXNlfSAqL1xuICAgIHRoaXMucHJvbWlzZV8gPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICByZXNvbHZlXyA9IHJlc29sdmU7XG4gICAgICByZWplY3RfID0gcmVqZWN0O1xuICAgIH0pO1xuXG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgdGhpcy5yZXNvbHZlXyA9IHJlc29sdmVfO1xuXG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgdGhpcy5yZWplY3RfID0gcmVqZWN0XztcblxuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIHRoaXMuY291bnRfID0gMDtcblxuICAgIGlmIChvcHRfcHJvbWlzZXMpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3B0X3Byb21pc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMuYWRkKG9wdF9wcm9taXNlc1tpXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIHByb21pc2UgdG8gcG9zc2libHkgYmUgcmVzb2x2ZWQuXG4gICAqIEBwYXJhbSB7IVByb21pc2V9IHByb21pc2VcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBhZGQocHJvbWlzZSkge1xuICAgIGNvbnN0IGNvdW50QXRBZGQgPSArK3RoaXMuY291bnRfO1xuICAgIFByb21pc2UucmVzb2x2ZShwcm9taXNlKS50aGVuKHJlc3VsdCA9PiB7XG4gICAgICBpZiAodGhpcy5jb3VudF8gPT09IGNvdW50QXRBZGQpIHtcbiAgICAgICAgdGhpcy5yZXNvbHZlXyhyZXN1bHQpO1xuICAgICAgfVxuICAgIH0sIGVycm9yID0+IHtcbiAgICAgIC8vIERvbid0IGZvbGxvdyBiZWhhdmlvciBvZiBQcm9taXNlLmFsbCBhbmQgUHJvbWlzZS5yYWNlIGVycm9yIHNvIHRoYXRcbiAgICAgIC8vIHRoaXMgd2lsbCBvbmx5IHJlamVjdCB3aGVuIG1vc3QgcmVjZW50bHkgYWRkZWQgcHJvbWlzZSBmYWlscy5cbiAgICAgIGlmICh0aGlzLmNvdW50XyA9PT0gY291bnRBdEFkZCkge1xuICAgICAgICB0aGlzLnJlamVjdF8oZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLnByb21pc2VfO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICB0aGVuKG9wdF9yZXNvbHZlLCBvcHRfcmVqZWN0KSB7XG4gICAgcmV0dXJuIHRoaXMucHJvbWlzZV8udGhlbihvcHRfcmVzb2x2ZSwgb3B0X3JlamVjdCk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge0RlZmVycmVkfSBmcm9tICcuL3Byb21pc2UnO1xuaW1wb3J0IHttYXB9IGZyb20gJy4vb2JqZWN0JztcblxuXG4vKipcbiAqIFRoaXMgb2JqZWN0IHRyYWN0cyBzaWduYWxzIGFuZCBhbGxvd3MgYmxvY2tpbmcgdW50aWwgYSBzaWduYWwgaGFzIGJlZW5cbiAqIHJlY2VpdmVkLlxuICovXG5leHBvcnQgY2xhc3MgU2lnbmFscyB7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgU2lnbmFscy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8qKlxuICAgICAqIEEgbWFwcGluZyBmcm9tIGEgc2lnbmFsIG5hbWUgdG8gdGhlIHNpZ25hbCByZXNwb25zZTogZWl0aGVyIHRpbWUgb3JcbiAgICAgKiBhbiBlcnJvci5cbiAgICAgKiBAcHJpdmF0ZSBAY29uc3QgeyFPYmplY3Q8c3RyaW5nLCAodGltZXwhRXJyb3IpPn1cbiAgICAgKi9cbiAgICB0aGlzLm1hcF8gPSBtYXAoKTtcblxuICAgIC8qKlxuICAgICAqIEEgbWFwcGluZyBmcm9tIGEgc2lnbmFsIG5hbWUgdG8gdGhlIHNpZ25hbCBwcm9taXNlLCByZXNvbHZlIGFuZCByZWplY3QuXG4gICAgICogT25seSBhbGxvY2F0ZWQgd2hlbiBwcm9taXNlIGhhcyBiZWVuIHJlcXVlc3RlZC5cbiAgICAgKiBAcHJpdmF0ZSB7P09iamVjdDxzdHJpbmcsIHtcbiAgICAgKiAgIHByb21pc2U6ICFQcm9taXNlLFxuICAgICAqICAgcmVzb2x2ZTogKGZ1bmN0aW9uKHRpbWUpfHVuZGVmaW5lZCksXG4gICAgICogICByZWplY3Q6IChmdW5jdGlvbighRXJyb3IpfHVuZGVmaW5lZClcbiAgICAgKiB9Pn1cbiAgICAgKi9cbiAgICB0aGlzLnByb21pc2VNYXBfID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IGtub3duIHZhbHVlIG9mIHRoZSBzaWduYWwuIElmIHNpZ25hbCBpcyBub3QgeWV0XG4gICAqIGF2YWlsYWJsZSwgYG51bGxgIGlzIHJldHVybmVkLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcmV0dXJuIHtudW1iZXJ8IUVycm9yfG51bGx9XG4gICAqL1xuICBnZXQobmFtZSkge1xuICAgIHJldHVybiB0aGlzLm1hcF9bbmFtZV0gfHwgbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBwcm9taXNlIHRoYXQncyByZXNvbHZlZCB3aGVuIHRoZSBzaWduYWwgaXMgdHJpZ2dlcmVkLiBUaGVcbiAgICogcmVzb2x2ZWQgdmFsdWUgaXMgdGhlIHRpbWUgb2YgdGhlIHNpZ25hbC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICogQHJldHVybiB7IVByb21pc2U8dGltZT59XG4gICAqL1xuICB3aGVuU2lnbmFsKG5hbWUpIHtcbiAgICBsZXQgcHJvbWlzZVN0cnVjdCA9IHRoaXMucHJvbWlzZU1hcF8gJiYgdGhpcy5wcm9taXNlTWFwX1tuYW1lXTtcbiAgICBpZiAoIXByb21pc2VTdHJ1Y3QpIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMubWFwX1tuYW1lXTtcbiAgICAgIGlmIChyZXN1bHQgIT0gbnVsbCkge1xuICAgICAgICAvLyBJbW1lZGlhdGVseSByZXNvbHZlIHNpZ25hbC5cbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHR5cGVvZiByZXN1bHQgPT0gJ251bWJlcicgP1xuICAgICAgICAgIFByb21pc2UucmVzb2x2ZShyZXN1bHQpIDpcbiAgICAgICAgICBQcm9taXNlLnJlamVjdChyZXN1bHQpO1xuICAgICAgICBwcm9taXNlU3RydWN0ID0ge3Byb21pc2V9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQWxsb2NhdGUgdGhlIHByb21pc2UvcmVzb2x2ZXIgZm9yIHdoZW4gdGhlIHNpZ25hbCBhcnJpdmVzIGluIHRoZVxuICAgICAgICAvLyBmdXR1cmUuXG4gICAgICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XG4gICAgICAgIGNvbnN0IHtwcm9taXNlLCByZXNvbHZlLCByZWplY3R9ID0gZGVmZXJyZWQ7XG5cbiAgICAgICAgcHJvbWlzZVN0cnVjdCA9IHtwcm9taXNlLCByZXNvbHZlLCByZWplY3R9O1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLnByb21pc2VNYXBfKSB7XG4gICAgICAgIHRoaXMucHJvbWlzZU1hcF8gPSBtYXAoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucHJvbWlzZU1hcF9bbmFtZV0gPSBwcm9taXNlU3RydWN0O1xuICAgIH1cbiAgICByZXR1cm4gcHJvbWlzZVN0cnVjdC5wcm9taXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyaWdnZXJzIHRoZSBzaWduYWwgd2l0aCB0aGUgc3BlY2lmaWVkIG5hbWUgb24gdGhlIGVsZW1lbnQuIFRoZSB0aW1lIGlzXG4gICAqIG9wdGlvbmFsOyBpZiBub3QgcHJvdmlkZWQsIHRoZSBjdXJyZW50IHRpbWUgaXMgdXNlZC4gVGhlIGFzc29jaWF0ZWRcbiAgICogcHJvbWlzZSBpcyByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRpbmcgdGltZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICogQHBhcmFtIHt0aW1lPX0gb3B0X3RpbWVcbiAgICovXG4gIHNpZ25hbChuYW1lLCBvcHRfdGltZSkge1xuICAgIGlmICh0aGlzLm1hcF9bbmFtZV0gIT0gbnVsbCkge1xuICAgICAgLy8gRG8gbm90IGR1cGxpY2F0ZSBzaWduYWxzLlxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB0aW1lID0gb3B0X3RpbWUgfHwgRGF0ZS5ub3coKTtcbiAgICB0aGlzLm1hcF9bbmFtZV0gPSB0aW1lO1xuICAgIGNvbnN0IHByb21pc2VTdHJ1Y3QgPSB0aGlzLnByb21pc2VNYXBfICYmIHRoaXMucHJvbWlzZU1hcF9bbmFtZV07XG4gICAgaWYgKHByb21pc2VTdHJ1Y3QgJiYgcHJvbWlzZVN0cnVjdC5yZXNvbHZlKSB7XG4gICAgICBwcm9taXNlU3RydWN0LnJlc29sdmUodGltZSk7XG4gICAgICBwcm9taXNlU3RydWN0LnJlc29sdmUgPSB1bmRlZmluZWQ7XG4gICAgICBwcm9taXNlU3RydWN0LnJlamVjdCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVqZWN0cyB0aGUgc2lnbmFsLiBJbmRpY2F0ZXMgdGhhdCB0aGUgc2lnbmFsIHdpbGwgbmV2ZXIgc3VjY2VlZC4gVGhlXG4gICAqIGFzc29jaWF0ZWQgc2lnbmFsIGlzIHJlamVjdGVkLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcGFyYW0geyFFcnJvcn0gZXJyb3JcbiAgICovXG4gIHJlamVjdFNpZ25hbChuYW1lLCBlcnJvcikge1xuICAgIGlmICh0aGlzLm1hcF9bbmFtZV0gIT0gbnVsbCkge1xuICAgICAgLy8gRG8gbm90IGR1cGxpY2F0ZSBzaWduYWxzLlxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLm1hcF9bbmFtZV0gPSBlcnJvcjtcbiAgICBjb25zdCBwcm9taXNlU3RydWN0ID0gdGhpcy5wcm9taXNlTWFwXyAmJiB0aGlzLnByb21pc2VNYXBfW25hbWVdO1xuICAgIGlmIChwcm9taXNlU3RydWN0ICYmIHByb21pc2VTdHJ1Y3QucmVqZWN0KSB7XG4gICAgICBwcm9taXNlU3RydWN0LnJlamVjdChlcnJvcik7XG4gICAgICBwcm9taXNlU3RydWN0LnJlc29sdmUgPSB1bmRlZmluZWQ7XG4gICAgICBwcm9taXNlU3RydWN0LnJlamVjdCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVzZXRzIGFsbCBzaWduYWxzLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKi9cbiAgcmVzZXQobmFtZSkge1xuICAgIGlmICh0aGlzLm1hcF9bbmFtZV0pIHtcbiAgICAgIGRlbGV0ZSB0aGlzLm1hcF9bbmFtZV07XG4gICAgfVxuICAgIC8vIFJlc2V0IHByb21pc2UgaXQgaGFzIGFscmVhZHkgYmVlbiByZXNvbHZlZC5cbiAgICBjb25zdCBwcm9taXNlU3RydWN0ID0gdGhpcy5wcm9taXNlTWFwXyAmJiB0aGlzLnByb21pc2VNYXBfW25hbWVdO1xuICAgIGlmIChwcm9taXNlU3RydWN0ICYmICFwcm9taXNlU3RydWN0LnJlc29sdmUpIHtcbiAgICAgIGRlbGV0ZSB0aGlzLnByb21pc2VNYXBfW25hbWVdO1xuICAgIH1cbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmV4cG9ydCBjb25zdCBNSU5fVklTSUJJTElUWV9SQVRJT19GT1JfQVVUT1BMQVkgPSAwLjU7XG5cbi8qKlxuICogVmlkZW9JbnRlcmZhY2UgZGVmaW5lcyBhIGNvbW1vbiB2aWRlbyBBUEkgd2hpY2ggYW55IEFNUCBjb21wb25lbnQgdGhhdCBwbGF5c1xuICogdmlkZW9zIGlzIGV4cGVjdGVkIHRvIGltcGxlbWVudC5cbiAqXG4gKiBBTVAgcnVudGltZSB1c2VzIHRoaXMgY29tbW9uIEFQSSB0byBwcm92aWRlIGNvbnNpc3RlbnQgdmlkZW8gZXhwZXJpZW5jZSBhbmRcbiAqIGFuYWx5dGljcyBhY3Jvc3MgYWxsIHZpZGVvIHBsYXllcnMuXG4gKlxuICogQ29tcG9uZW50cyBpbXBsZW1lbnRpbmcgdGhpcyBpbnRlcmZhY2UgbXVzdCBhbHNvIGV4dGVuZFxuICoge0BsaW5rIC4vYmFzZS1lbGVtZW50LkJhc2VFbGVtZW50fSBhbmQgcmVnaXN0ZXIgd2l0aCB0aGVcbiAqIFZpZGVvIE1hbmFnZXIge0BsaW5rIC4vc2VydmljZS92aWRlby1tYW5hZ2VyLWltcGwuVmlkZW9NYW5hZ2VyfSBkdXJpbmdcbiAqIHRoZWlyIGBidWlsdENhbGxiYWNrYC5cbiAqXG4gKiBAaW50ZXJmYWNlXG4gKi9cbmV4cG9ydCBjbGFzcyBWaWRlb0ludGVyZmFjZSB7XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIGNvbXBvbmVudCBzdXBwb3J0cyB2aWRlbyBwbGF5YmFjayBpbiB0aGUgY3VycmVudCBwbGF0Zm9ybS5cbiAgICogSWYgZmFsc2UsIGNvbXBvbmVudCB3aWxsIGJlIG5vdCB0cmVhdGVkIGFzIGEgdmlkZW8gY29tcG9uZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgc3VwcG9ydHNQbGF0Zm9ybSgpIHt9XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdXNlcnMgY2FuIGludGVyYWN0IHdpdGggdGhlIHZpZGVvIHN1Y2ggYXMgcGF1c2luZyBpdC5cbiAgICogRXhhbXBsZSBvZiBub24taW50ZXJhY3RpdmUgdmlkZW9zIGluY2x1ZGUgZGVzaWduIGJhY2tncm91bmQgdmlkZW9zIHdoZXJlXG4gICAqIGFsbCBjb250cm9scyBhcmUgaGlkZGVuIGZyb20gdGhlIHVzZXIuXG4gICAqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBpc0ludGVyYWN0aXZlKCkge31cblxuICAvKipcbiAgICogQ3VycmVudCBwbGF5YmFjayB0aW1lIGluIHNlY29uZHMgYXQgdGltZSBvZiB0cmlnZ2VyXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIGdldEN1cnJlbnRUaW1lKCkge31cblxuICAvKipcbiAgICogVG90YWwgZHVyYXRpb24gb2YgdGhlIHZpZGVvIGluIHNlY29uZHNcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0RHVyYXRpb24oKSB7fVxuXG4gIC8qKlxuICAgKiBHZXQgYSAyZCBhcnJheSBvZiBzdGFydCBhbmQgc3RvcCB0aW1lcyB0aGF0IHRoZSB1c2VyIGhhcyB3YXRjaGVkLlxuICAgKiBAcmV0dXJuIHshQXJyYXk8QXJyYXk8bnVtYmVyPj59XG4gICAqL1xuICBnZXRQbGF5ZWRSYW5nZXMoKSB7fVxuXG4gIC8qKlxuICAgKiBQbGF5cyB0aGUgdmlkZW8uLlxuICAgKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHVudXNlZElzQXV0b3BsYXkgV2hldGhlciB0aGUgY2FsbCB0byB0aGUgYHBsYXlgIG1ldGhvZCBpc1xuICAgKiB0cmlnZ2VyZWQgYnkgdGhlIGF1dG9wbGF5IGZ1bmN0aW9uYWxpdHkuIFZpZGVvIHBsYXllcnMgY2FuIHVzZSB0aGlzIGhpbnRcbiAgICogdG8gbWFrZSBkZWNpc2lvbnMgc3VjaCBhcyBub3QgcGxheWluZyBwcmUtcm9sbCB2aWRlbyBhZHMuXG4gICAqL1xuICBwbGF5KHVudXNlZElzQXV0b3BsYXkpIHt9XG5cbiAgLyoqXG4gICAqIFBhdXNlcyB0aGUgdmlkZW8uXG4gICAqL1xuICBwYXVzZSgpIHt9XG5cbiAgLyoqXG4gICAqIE11dGVzIHRoZSB2aWRlby5cbiAgICovXG4gIG11dGUoKSB7fVxuXG4gIC8qKlxuICAgKiBVbm11dGVzIHRoZSB2aWRlby5cbiAgICovXG4gIHVubXV0ZSgpIHt9XG5cbiAgLyoqXG4gICAqIE1ha2VzIHRoZSB2aWRlbyBVSSBjb250cm9scyB2aXNpYmxlLlxuICAgKlxuICAgKiBBTVAgd2lsbCBub3QgY2FsbCB0aGlzIG1ldGhvZCBpZiBgY29udHJvbHNgIGF0dHJpYnV0ZSBpcyBub3Qgc2V0LlxuICAgKi9cbiAgc2hvd0NvbnRyb2xzKCkge31cblxuICAvKipcbiAgICogSGlkZXMgdGhlIHZpZGVvIFVJIGNvbnRyb2xzLlxuICAgKlxuICAgKiBBTVAgd2lsbCBub3QgY2FsbCB0aGlzIG1ldGhvZCBpZiBgY29udHJvbHNgIGF0dHJpYnV0ZSBpcyBub3Qgc2V0LlxuICAgKi9cbiAgaGlkZUNvbnRyb2xzKCkge31cblxuICAvKipcbiAgICogUmV0dXJucyB2aWRlbydzIG1ldGEgZGF0YSAoYXJ0d29yaywgdGl0bGUsIGFydGlzdCwgYWxidW0sIGV0Yy4pIGZvciB1c2VcbiAgICogd2l0aCB0aGUgTWVkaWEgU2Vzc2lvbiBBUElcbiAgICogYXJ0d29yayAoQXJyYXkpOiBVUkwgdG8gdGhlIHBvc3RlciBpbWFnZSAocHJlZmVyYWJseSBhIDUxMng1MTIgUE5HKVxuICAgKiB0aXRsZSAoc3RyaW5nKTogTmFtZSBvZiB0aGUgdmlkZW9cbiAgICogYXJ0aXN0IChzdHJpbmcpOiBOYW1lIG9mIHRoZSB2aWRlbydzIGF1dGhvci9hcnRpc3RcbiAgICogYWxidW0gKHN0cmluZyk6IE5hbWUgb2YgdGhlIHZpZGVvJ3MgYWxidW0gaWYgaXQgZXhpc3RzXG4gICAqIEByZXR1cm4geyEuL21lZGlhc2Vzc2lvbi1oZWxwZXIuTWV0YWRhdGFEZWZ8dW5kZWZpbmVkfSBtZXRhZGF0YVxuICAgKi9cbiAgZ2V0TWV0YWRhdGEoKSB7fVxuXG4gIC8qKlxuICAgKiBJZiB0aGlzIHJldHVybnMgdHJ1ZSB0aGVuIGl0IHdpbGwgYmUgYXNzdW1lZCB0aGF0IHRoZSBwbGF5ZXIgaW1wbGVtZW50c1xuICAgKiBhIGZlYXR1cmUgdG8gZW50ZXIgZnVsbHNjcmVlbiBvbiBkZXZpY2Ugcm90YXRpb24gaW50ZXJuYWxseSwgc28gdGhhdCB0aGVcbiAgICogdmlkZW8gbWFuYWdlciBkb2VzIG5vdCBvdmVycmlkZSBpdC4gSWYgbm90LCB0aGUgdmlkZW8gbWFuYWdlciB3aWxsXG4gICAqIGltcGxlbWVudCB0aGlzIGZlYXR1cmUgYXV0b21hdGljYWxseSBmb3IgdmlkZW9zIHdpdGggdGhlIGF0dHJpYnV0ZVxuICAgKiBgcm90YXRlLXRvLWZ1bGxzY3JlZW5gLlxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgcHJlaW1wbGVtZW50c0F1dG9GdWxsc2NyZWVuKCkge31cblxuICAvKipcbiAgICogSWYgdGhpcyByZXR1cm5zIHRydWUgdGhlbiBpdCB3aWxsIGJlIGFzc3VtZWQgdGhhdCB0aGUgcGxheWVyIGltcGxlbWVudHNcbiAgICogdGhlIE1lZGlhU2Vzc2lvbiBBUEkgaW50ZXJuYWxseSBzbyB0aGF0IHRoZSB2aWRlbyBtYW5hZ2VyIGRvZXMgbm90IG92ZXJyaWRlXG4gICAqIGl0LiBJZiBub3QsIHRoZSB2aWRlbyBtYW5hZ2VyIHdpbGwgdXNlIHRoZSBtZXRhZGF0YSB2YXJpYWJsZSBhcyB3ZWxsIGFzXG4gICAqIGluZmVycmVkIG1ldGEtZGF0YSB0byB1cGRhdGUgdGhlIHZpZGVvJ3MgTWVkaWEgU2Vzc2lvbiBub3RpZmljYXRpb24uXG4gICAqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBwcmVpbXBsZW1lbnRzTWVkaWFTZXNzaW9uQVBJKCkge31cblxuICAvKipcbiAgICogRW5hYmxlcyBmdWxsc2NyZWVuIG9uIHRoZSBpbnRlcm5hbCB2aWRlbyBlbGVtZW50XG4gICAqIE5PVEU6IFdoaWxlIGltcGxlbWVudGluZywga2VlcCBpbiBtaW5kIHRoYXQgU2FmYXJpL2lPUyBkbyBub3QgYWxsb3cgdGFraW5nXG4gICAqIGFueSBlbGVtZW50IG90aGVyIHRoYW4gPHZpZGVvPiB0byBmdWxsc2NyZWVuLCBpZiB0aGUgcGxheWVyIGhhcyBhbiBpbnRlcm5hbFxuICAgKiBpbXBsZW1lbnRhdGlvbiBvZiBmdWxsc2NyZWVuIChmbGFzaCBmb3IgZXhhbXBsZSkgdGhlbiBjaGVja1xuICAgKiBpZiBTZXJ2aWNlcy5wbGF0Zm9ybUZvcih0aGlzLndpbikuaXNTYWZhcmkgaXMgdHJ1ZSBhbmQgdXNlIHRoZSBpbnRlcm5hbFxuICAgKiBpbXBsZW1lbnRhdGlvbiBpbnN0ZWFkLiBJZiBub3QsIGl0IGlzIHJlY29tbWVuZGVkIHRvIHRha2UgdGhlIGlmcmFtZVxuICAgKiB0byBmdWxsc2NyZWVuIHVzaW5nIGZ1bGxzY3JlZW5FbnRlciBmcm9tIGRvbS5qc1xuICAgKi9cbiAgZnVsbHNjcmVlbkVudGVyKCkge31cblxuICAvKipcbiAgICogUXVpdHMgZnVsbHNjcmVlbiBtb2RlXG4gICAqL1xuICBmdWxsc2NyZWVuRXhpdCgpIHt9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGUgdmlkZW8gaXMgY3VycmVudGx5IGluIGZ1bGxzY3JlZW4gbW9kZSBvciBub3RcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzRnVsbHNjcmVlbigpIHt9XG59XG5cblxuLyoqXG4gKiBBdHRyaWJ1dGVzXG4gKlxuICogQ29tcG9uZW50cyBpbXBsZW1lbnRpbmcgdGhlIFZpZGVvSW50ZXJmYWNlIGFyZSBleHBlY3RlZCB0byBzdXBwb3J0XG4gKiB0aGUgZm9sbG93aW5nIGF0dHJpYnV0ZXMuXG4gKlxuICogQGNvbnN0YW50IHshT2JqZWN0PHN0cmluZywgc3RyaW5nPn1cbiAqL1xuZXhwb3J0IGNvbnN0IFZpZGVvQXR0cmlidXRlcyA9IHtcbiAgLyoqXG4gICAqIGF1dG9wbGF5XG4gICAqXG4gICAqIFdoZXRoZXIgdGhlIGRldmVsb3BlciBoYXMgY29uZmlndXJlZCBhdXRvcGxheSBvbiB0aGUgY29tcG9uZW50LlxuICAgKiBUaGlzIGlzIG5vcm1hbGx5IGRvbmUgYnkgc2V0dGluZyBgYXV0b3BsYXlgIGF0dHJpYnV0ZSBvbiB0aGUgY29tcG9uZW50LlxuICAgKlxuICAgKiBBTVAgcnVudGltZSBtYW5hZ2VzIGF1dG9wbGF5IGJlaGF2aW91ciBpdHNlbGYgdXNpbmcgbWV0aG9kcyBzdWNoIGFzIGBwbGF5YCxcbiAgICogYHBhdXNlYCwgYHNob3dDb250cm9sc2AsIGBoaWRlQ29udHJvbHNgLCBgbXV0ZWAsIGV0Yy4uIHRoZXJlZm9yZSBjb21wb25lbnRzXG4gICAqIHNob3VsZCBub3QgcHJvcGFnYXRlIHRoZSBhdXRvcGxheSBhdHRyaWJ1dGUgdG8gdGhlIHVuZGVybHlpbmcgcGxheWVyXG4gICAqIGltcGxlbWVudGF0aW9uLlxuICAgKlxuICAgKiBXaGVuIGEgdmlkZW8gaXMgcmVxdWVzdGVkIHRvIGF1dG9wbGF5LCBBTVAgd2lsbCBhdXRvbWF0aWNhbGx5XG4gICAqIG11dGUgYW5kIGhpZGUgdGhlIGNvbnRyb2xzIGZvciB0aGUgdmlkZW8sIHdoZW4gdmlkZW8gaXMgNzUlIHZpc2libGUgaW5cbiAgICogdGhlIHZpZXdwb3J0LCBBTVAgd2lsbCBwbGF5IHRoZSB2aWRlbyBhbmQgbGF0ZXIgcGF1c2VzIGl0IHdoZW4gMjUlXG4gICAqIG9yIG1vcmUgb2YgdGhlIHZpZGVvIGV4aXRzIHRoZSB2aWV3cG9ydC4gSWYgYW4gYXV0by1wbGF5aW5nIHZpZGVvIGFsc28gaGFzXG4gICAqIGNvbnRyb2xzLCBBTVAgd2lsbCBpbnN0YWxsIGEgdGFwXG4gICAqIGhhbmRsZXIgb24gdGhlIHZpZGVvLCBhbmQgd2hlbiBhbiBlbmQtdXNlciB0YXBzIHRoZSB2aWRlbywgQU1QIHdpbGwgc2hvd1xuICAgKiB0aGUgY29udHJvbHMuXG4gICAqXG4gICAqL1xuICBBVVRPUExBWTogJ2F1dG9wbGF5JyxcbiAgLyoqXG4gICAqIGRvY2tcbiAgICpcbiAgICogU2V0dGluZyB0aGUgYGRvY2tgIGF0dHJpYnV0ZSBvbiB0aGUgY29tcG9uZW50IG1ha2VzIHRoZSB2aWRlbyBtaW5pbWl6ZVxuICAgKiB0byB0aGUgY29ybmVyIHdoZW4gc2Nyb2xsZWQgb3V0IG9mIHZpZXcgYW5kIGhhcyBiZWVuIGludGVyYWN0ZWQgd2l0aC5cbiAgICovXG4gIERPQ0s6ICdkb2NrJyxcbiAgLyoqXG4gICAqIHJvdGF0ZS10by1mdWxsc2NyZWVuXG4gICAqXG4gICAqIElmIGVuYWJsZWQsIHRoaXMgYXV0b21hdGljYWxseSBleHBhbmRzIHRoZSBjdXJyZW50bHkgdmlzaWJsZSB2aWRlbyBhbmRcbiAgICogcGxheWluZyB0byBmdWxsc2NyZWVuIHdoZW4gdGhlIHVzZXIgY2hhbmdlcyB0aGUgZGV2aWNlJ3Mgb3JpZW50YXRpb24gdG9cbiAgICogbGFuZHNjYXBlIGlmIHRoZSB2aWRlbyB3YXMgc3RhcnRlZCBmb2xsb3dpbmcgYSB1c2VyIGludGVyYWN0aW9uXG4gICAqIChub3QgYXV0b3BsYXkpXG4gICAqXG4gICAqIERlcGVuZGVudCB1cG9uIGJyb3dzZXIgc3VwcG9ydCBvZlxuICAgKiBodHRwOi8vY2FuaXVzZS5jb20vI2ZlYXQ9c2NyZWVuLW9yaWVudGF0aW9uXG4gICAqIGFuZCBodHRwOi8vY2FuaXVzZS5jb20vI2ZlYXQ9ZnVsbHNjcmVlblxuICAgKi9cbiAgUk9UQVRFX1RPX0ZVTExTQ1JFRU46ICdyb3RhdGUtdG8tZnVsbHNjcmVlbicsXG4gIC8qKlxuICAgKiBub2F1ZGlvXG4gICAqXG4gICAqIElmIHNldCBhbmQgYXV0b3BsYXksIHRoZSBlcXVhbGl6ZXIgaWNvbiB3aWxsIG5vdCBiZSBkaXNwbGF5ZWQuXG4gICAqL1xuICBOT19BVURJTzogJ25vYXVkaW8nLFxufTtcblxuXG4vKipcbiAqIEV2ZW50c1xuICpcbiAqIENvbXBvbmVudHMgaW1wbGVtZW50aW5nIHRoZSBWaWRlb0ludGVyZmFjZSBhcmUgZXhwZWN0ZWQgdG8gZGlzcGF0Y2hcbiAqIHRoZSBmb2xsb3dpbmcgRE9NIGV2ZW50cy5cbiAqXG4gKiBAY29uc3RhbnQgeyFPYmplY3Q8c3RyaW5nLCBzdHJpbmc+fVxuICovXG5leHBvcnQgY29uc3QgVmlkZW9FdmVudHMgPSB7XG4gIC8qKlxuICAgKiByZWdpc3RlcmVkXG4gICAqXG4gICAqIEZpcmVkIHdoZW4gdGhlIHZpZGVvIHBsYXllciBlbGVtZW50IGlzIGJ1aWx0IGFuZCBoYXMgYmVlbiByZWdpc3RlcmVkIHdpdGhcbiAgICogdGhlIHZpZGVvIG1hbmFnZXIuXG4gICAqXG4gICAqIEBldmVudCByZWdpc3RlcmVkXG4gICAqL1xuICBSRUdJU1RFUkVEOiAncmVnaXN0ZXJlZCcsXG5cbiAgLyoqXG4gICAqIGxvYWRcbiAgICpcbiAgICogRmlyZWQgd2hlbiB0aGUgdmlkZW8gcGxheWVyIGlzIGxvYWRlZCBhbmQgY2FsbHMgdG8gbWV0aG9kcyBzdWNoIGFzIGBwbGF5KClgXG4gICAqIGFyZSBhbGxvd2VkLlxuICAgKlxuICAgKiBAZXZlbnQgbG9hZFxuICAgKi9cbiAgTE9BRDogJ2xvYWQnLFxuXG4gIC8qKlxuICAgKiBwbGF5aW5nXG4gICAqXG4gICAqIEZpcmVkIHdoZW4gdGhlIHZpZGVvIGJlZ2lucyBwbGF5aW5nLlxuICAgKlxuICAgKiBAZXZlbnQgcGxheWluZ1xuICAgKi9cbiAgUExBWUlORzogJ3BsYXlpbmcnLFxuXG4gIC8qKlxuICAgKiBwYXVzZVxuICAgKlxuICAgKiBGaXJlZCB3aGVuIHRoZSB2aWRlbyBwYXVzZXMuXG4gICAqXG4gICAqIEBldmVudCBwYXVzZVxuICAgKi9cbiAgUEFVU0U6ICdwYXVzZScsXG5cbiAgLyoqXG4gICAqIGVuZGVkXG4gICAqXG4gICAqIEZpcmVkIHdoZW4gdGhlIHZpZGVvIGVuZHMuXG4gICAqXG4gICAqIFRoaXMgZXZlbnQgc2hvdWxkIGJlIGZpcmVkIGluIGFkZGl0aW9uIHRvIGBwYXVzZWAgd2hlbiB2aWRlbyBlbmRzLlxuICAgKlxuICAgKiBAZXZlbnQgZW5kZWRcbiAgICovXG4gIEVOREVEOiAnZW5kZWQnLFxuXG4gIC8qKlxuICAgKiBtdXRlZFxuICAgKlxuICAgKiBGaXJlZCB3aGVuIHRoZSB2aWRlbyBpcyBtdXRlZC5cbiAgICpcbiAgICogQGV2ZW50IG11dGVkXG4gICAqL1xuICBNVVRFRDogJ211dGVkJyxcblxuICAvKipcbiAgICogdW5tdXRlZFxuICAgKlxuICAgKiBGaXJlZCB3aGVuIHRoZSB2aWRlbyBpcyB1bm11dGVkLlxuICAgKlxuICAgKiBAZXZlbnQgdW5tdXRlZFxuICAgKi9cbiAgVU5NVVRFRDogJ3VubXV0ZWQnLFxuXG4gIC8qKlxuICAgKiBhbXA6dmlkZW86dmlzaWJpbGl0eVxuICAgKlxuICAgKiBGaXJlZCB3aGVuIHRoZSB2aWRlbydzIHZpc2liaWxpdHkgY2hhbmdlcy4gTm9ybWFsbHkgZmlyZWRcbiAgICogZnJvbSBgdmlld3BvcnRDYWxsYmFja2AuXG4gICAqXG4gICAqIEBldmVudCBhbXA6dmlkZW86dmlzaWJpbGl0eVxuICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IHZpc2libGUgV2hldGhlciB0aGUgdmlkZW8gcGxheWVyIGlzIHZpc2libGUgb3Igbm90LlxuICAgKi9cbiAgVklTSUJJTElUWTogJ2FtcDp2aWRlbzp2aXNpYmlsaXR5JyxcblxuICAvKipcbiAgICogcmVsb2FkXG4gICAqXG4gICAqIEZpcmVkIHdoZW4gdGhlIHZpZGVvJ3Mgc3JjIGNoYW5nZXMuXG4gICAqXG4gICAqIEBldmVudCByZWxvYWRlZFxuICAgKi9cbiAgUkVMT0FEOiAncmVsb2FkZWQnLFxuXG4gIC8qKlxuICAgKiBwcmUvbWlkL3Bvc3QgQWQgc3RhcnRcbiAgICpcbiAgICogRmlyZWQgd2hlbiBhbiBBZCBzdGFydHMgcGxheWluZy5cbiAgICpcbiAgICogVGhpcyBpcyB1c2VkIHRvIHJlbW92ZSBhbnkgb3ZlcmxheSBzaGltcyBkdXJpbmcgQWQgcGxheSBkdXJpbmcgYXV0b3BsYXlcbiAgICogb3IgbWluaW1pemVkLXRvLWNvcm5lciB2ZXJzaW9uIG9mIHRoZSBwbGF5ZXIuXG4gICAqXG4gICAqIEBldmVudCBhZF9zdGFydFxuICAgKi9cbiAgQURfU1RBUlQ6ICdhZF9zdGFydCcsXG5cbiAgLyoqXG4gICAqIHByZS9taWQvcG9zdCBBZCBlbmRzXG4gICAqXG4gICAqIEZpcmVkIHdoZW4gYW4gQWQgZW5kcyBwbGF5aW5nLlxuICAgKlxuICAgKiBUaGlzIGlzIHVzZWQgdG8gcmVzdG9yZSBhbnkgb3ZlcmxheSBzaGltcyBkdXJpbmcgQWQgcGxheSBkdXJpbmcgYXV0b3BsYXlcbiAgICogb3IgbWluaW1pemVkLXRvLWNvcm5lciB2ZXJzaW9uIG9mIHRoZSBwbGF5ZXIuXG4gICAqXG4gICAqIEBldmVudCBhZF9lbmRcbiAgICovXG4gIEFEX0VORDogJ2FkX2VuZCcsXG59O1xuXG5cbi8qKlxuICogUGxheWluZyBTdGF0ZXNcbiAqXG4gKiBJbnRlcm5hbCBwbGF5aW5nIHN0YXRlcyB1c2VkIHRvIGRpc3Rpbmd1aXNoIGJldHdlZW4gdmlkZW8gcGxheWluZyBvbiB1c2VyJ3NcbiAqIGNvbW1hbmQgYW5kIHZpZGVvcyBwbGF5aW5nIGF1dG9tYXRpY2FsbHlcbiAqXG4gKiBAY29uc3RhbnQgeyFPYmplY3Q8c3RyaW5nLCBzdHJpbmc+fVxuICovXG5leHBvcnQgY29uc3QgUGxheWluZ1N0YXRlcyA9IHtcbiAgLyoqXG4gICAqIHBsYXlpbmdfbWFudWFsXG4gICAqXG4gICAqIFdoZW4gdGhlIHZpZGVvIHVzZXIgbWFudWFsbHkgaW50ZXJhY3RlZCB3aXRoIHRoZSB2aWRlbyBhbmQgdGhlIHZpZGVvXG4gICAqIGlzIG5vdyBwbGF5aW5nXG4gICAqXG4gICAqIEBldmVudCBwbGF5aW5nX21hbnVhbFxuICAgKi9cbiAgUExBWUlOR19NQU5VQUw6ICdwbGF5aW5nX21hbnVhbCcsXG5cbiAgLyoqXG4gICAqIHBsYXlpbmdfYXV0b1xuICAgKlxuICAgKiBXaGVuIHRoZSB2aWRlbyBoYXMgYXV0b3BsYXkgYW5kIHRoZSB1c2VyIGhhc24ndCBpbnRlcmFjdGVkIHdpdGggaXQgeWV0XG4gICAqXG4gICAqIEBldmVudCBwbGF5aW5nX2F1dG9cbiAgICovXG4gIFBMQVlJTkdfQVVUTzogJ3BsYXlpbmdfYXV0bycsXG5cbiAgLyoqXG4gICAqIHBhdXNlZFxuICAgKlxuICAgKiBXaGVuIHRoZSB2aWRlbyBpcyBwYXVzZWQuXG4gICAqXG4gICAqIEBldmVudCBwYXVzZWRcbiAgICovXG4gIFBBVVNFRDogJ3BhdXNlZCcsXG59O1xuXG5cbi8qKiBAZW51bSB7c3RyaW5nfSAqL1xuZXhwb3J0IGNvbnN0IFZpZGVvQW5hbHl0aWNzRXZlbnRzID0ge1xuICAvKipcbiAgICogdmlkZW8tZW5kZWRcbiAgICpcbiAgICogSW5kaWNhdGVzIHRoYXQgYSB2aWRlbyBlbmRlZC5cbiAgICogQHByb3BlcnR5IHshVmlkZW9BbmFseXRpY3NEZXRhaWxzRGVmfSBkZXRhaWxzXG4gICAqIEBldmVudCB2aWRlby1lbmRlZFxuICAgKi9cbiAgRU5ERUQ6ICd2aWRlby1lbmRlZCcsXG5cbiAgLyoqXG4gICAqIHZpZGVvLXBhdXNlXG4gICAqXG4gICAqIEluZGljYXRlcyB0aGF0IGEgdmlkZW8gcGF1c2VkLlxuICAgKiBAcHJvcGVydHkgeyFWaWRlb0FuYWx5dGljc0RldGFpbHNEZWZ9IGRldGFpbHNcbiAgICogQGV2ZW50IHZpZGVvLXBhdXNlXG4gICAqL1xuICBQQVVTRTogJ3ZpZGVvLXBhdXNlJyxcblxuICAvKipcbiAgICogdmlkZW8tcGxheVxuICAgKlxuICAgKiBJbmRpY2F0ZXMgdGhhdCBhIHZpZGVvIGJlZ2FuIHRvIHBsYXkuXG4gICAqIEBwcm9wZXJ0eSB7IVZpZGVvQW5hbHl0aWNzRGV0YWlsc0RlZn0gZGV0YWlsc1xuICAgKiBAZXZlbnQgdmlkZW8tcGxheVxuICAgKi9cbiAgUExBWTogJ3ZpZGVvLXBsYXknLFxuXG4gIC8qKlxuICAgKiB2aWRlby1zZXNzaW9uXG4gICAqXG4gICAqIEluZGljYXRlcyB0aGF0IHNvbWUgc2VnbWVudCBvZiB0aGUgdmlkZW8gcGxheWVkLlxuICAgKiBAcHJvcGVydHkgeyFWaWRlb0FuYWx5dGljc0RldGFpbHNEZWZ9IGRldGFpbHNcbiAgICogQGV2ZW50IHZpZGVvLXNlc3Npb25cbiAgICovXG4gIFNFU1NJT046ICd2aWRlby1zZXNzaW9uJyxcblxuICAvKipcbiAgICogdmlkZW8tc2Vzc2lvbi12aXNpYmxlXG4gICAqXG4gICAqIEluZGljYXRlcyB0aGF0IHNvbWUgc2VnbWVudCBvZiB0aGUgdmlkZW8gcGxheWVkIGluIHRoZSB2aWV3cG9ydC5cbiAgICogQHByb3BlcnR5IHshVmlkZW9BbmFseXRpY3NEZXRhaWxzRGVmfSBkZXRhaWxzXG4gICAqIEBldmVudCB2aWRlby1zZXNzaW9uLXZpc2libGVcbiAgICovXG4gIFNFU1NJT05fVklTSUJMRTogJ3ZpZGVvLXNlc3Npb24tdmlzaWJsZScsXG5cbiAgLyoqXG4gICAqIHZpZGVvLXNlY29uZHMtcGxheWVkXG4gICAqXG4gICAqIEluZGljYXRlcyB0aGF0IGEgdmlkZW8gd2FzIHBsYXlpbmcgd2hlbiB0aGVcbiAgICogdmlkZW8tc2Vjb25kcy1wbGF5ZWQgaW50ZXJ2YWwgZmlyZWQuXG4gICAqIEBwcm9wZXJ0eSB7IVZpZGVvQW5hbHl0aWNzRGV0YWlsc0RlZn0gZGV0YWlsc1xuICAgKiBAZXZlbnQgdmlkZW8tc2Vzc2lvbi12aXNpYmxlXG4gICAqL1xuICBTRUNPTkRTX1BMQVlFRDogJ3ZpZGVvLXNlY29uZHMtcGxheWVkJyxcbn07XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7e1xuICogICBhdXRvcGxheTogYm9vbGVhbixcbiAqICAgY3VycmVudFRpbWU6IG51bWJlcixcbiAqICAgZHVyYXRpb246IG51bWJlcixcbiAqICAgaGVpZ2h0OiBudW1iZXIsXG4gKiAgIGlkOiBzdHJpbmcsXG4gKiAgIHBsYXllZFJhbmdlc0pzb246IHN0cmluZyxcbiAqICAgcGxheWVkVG90YWw6IG51bWJlcixcbiAqICAgbXV0ZWQ6IGJvb2xlYW4sXG4gKiAgIHN0YXRlOiBzdHJpbmcsXG4gKiAgIHdpZHRoOiBudW1iZXJcbiAqIH19XG4gKi9cbmV4cG9ydCBsZXQgVmlkZW9BbmFseXRpY3NEZXRhaWxzRGVmO1xuXG5cbi8qKlxuICogSGVscGVyIHVuaW9uIHR5cGUgdG8gYmUgdXNlZCBpbnRlcm5hbGx5LCBzbyB0aGF0IHRoZSBjb21waWxlciB0cmVhdHNcbiAqIGBWaWRlb0ludGVyZmFjZWAgb2JqZWN0cyBhcyBgQmFzZUVsZW1lbnRgcywgd2hpY2ggdGhleSBzaG91bGQgYmUgYW55d2F5LlxuICpcbiAqIFdBUk5JTkc6IERvbid0IHVzZSB0aGlzIGF0IHRoZSBzZXJ2aWNlIGxldmVsLiBJdHMgYHJlZ2lzdGVyYCBtZXRob2Qgc2hvdWxkXG4gKiBvbmx5IGFsbG93IGBWaWRlb0ludGVyZmFjZWAgYXMgYSBndWFyZGluZyBtZWFzdXJlLlxuICpcbiAqIEB0eXBlZGVmIHshVmlkZW9JbnRlcmZhY2V8IS4vYmFzZS1lbGVtZW50LkJhc2VFbGVtZW50fVxuICovXG5leHBvcnQgbGV0IFZpZGVvT3JCYXNlRWxlbWVudERlZjtcbiIsIi8qISBodHRwczovL210aHMuYmUvY3NzZXNjYXBlIHYxLjUuMSBieSBAbWF0aGlhcyB8IE1JVCBsaWNlbnNlICovXG5cblxuLyoqXG4gKiBUaGlzIHJlZ2V4IGNvbnNpc3RzIG9mIDQgbWF0Y2hpbmcgY2FwdHVyZSBncm91cHMgYW5kIG9uZSAobm9uLW1hdGNoaW5nKSBmYWxsYmFjazpcbiAqXG4gKiAtIChcXDApLCBjYXRjaCB0aGUgbnVsbCB0ZXJtaW5hdG9yIGNoYXJhY3RlciBzbyBpdCBtYXkgYmUgcmVwbGFjZWQgYnkgVVRGXG4gKiAgIFJlcGxhY2VtZW50IENoYXJcbiAqIC0gXigtKSQsIGNhdGNoIGEgc29saXRhcnkgZGFzaCBjaGFyLCBzbyB0aGF0IGl0IG1heSBiZSBiYWNrc2xhc2ggZXNjYXBlZC5cbiAqICAgVGhpcyBpcyBhIHNlcGFyYXRlIGNhcHR1cmUgZ3JvdXAgc28gdGhhdCB0aGUgbGVnYWwtY2hhcnMgKGdyb3VwIDQpIGRvZXNuJ3RcbiAqICAgY2FwdHVyZSBpdCBmaXJzdCwgc2luY2UgdGhhdCBncm91cCBkb2Vzbid0IG5lZWQgdG8gZXNjYXBlIGl0cyBkYXNoLlxuICogLSAoW1xceDAxLVxceDFmXFx4N2ZdfF4tP1swLTldKSwgY2F0Y2ggYSBVVEYgY29udHJvbCBjaGFyLCBvciBhbnkgbGVhZGluZ1xuICogICBudW1iZXIgKHdpdGggYW4gb3B0aW9uYWwgbGVhZGluZyBkYXNoKS4gVGhlIGNvbnRyb2wgb3IgdGhlIG51bWJlciAoYnV0IG5vdFxuICogICB0aGUgbGVhZGluZyBkYXNoKSBtdXN0IGJlIGhleC1lc2NhcGVkLC5cbiAqIC0gKFtcXHg4MC1cXHVmZmZmMC05YS16QS1aXy1dKyksIGNhdGNoIGxlZ2FsLWNoYXJzLCB3aXRoIHRoZSBleGNlcHRpb24gb2YgYVxuICogICBzb2xpdGFyeSBkYXNoLCB3aGljaCB3aWxsIGFscmVhZHkgaGF2ZSBtYXRjaGVkIGluIGdyb3VwIDEuXG4gKiAtIFteXSwgZmluYWxseSwgYSBjYXRjaC1hbGwgdGhhdCBhbGxvd3MgdXMgdG8gYmFja3NsYXNoIGVzY2FwZSB0aGUgY2hhci5cbiAqXG4gKiBUb2dldGhlciwgdGhpcyBtYXRjaGVzIGV2ZXJ5dGhpbmcgbmVjZXNzYXJ5IGZvciBDU1MuZXNjYXBlLlxuICovXG52YXIgcmVnZXggPSAvKFxcMCl8XigtKSR8KFtcXHgwMS1cXHgxZlxceDdmXXxeLT9bMC05XSl8KFtcXHg4MC1cXHVmZmZmMC05YS16QS1aXy1dKyl8W15dL2c7XG5cbmZ1bmN0aW9uIGVzY2FwZXIobWF0Y2gsIG5pbCwgZGFzaCwgaGV4RXNjYXBlLCBjaGFycykge1xuICAvLyBDaGFycyBpcyB0aGUgbGVnYWwtY2hhcnMgKGdyb3VwIDQpIGNhcHR1cmVcbiAgaWYgKGNoYXJzKSB7XG4gICAgcmV0dXJuIGNoYXJzO1xuICB9XG4gIC8vIE5pbCBpcyB0aGUgbnVsbCB0ZXJtaW5hdG9yIChncm91cCAxKSBjYXB0dXJlXG4gIGlmIChuaWwpIHtcbiAgICByZXR1cm4gJ1xcdUZGRkQnO1xuICB9XG4gIC8vIEJvdGggVVRGIGNvbnRyb2wgY2hhcnMsIGFuZCBsZWFkaW5nIG51bWJlcnMgKHdpdGggb3B0aW9uYWwgbGVhZGluZyBkYXNoKVxuICAvLyAoZ3JvdXAgMykgbXVzdCBiZSBiYWNrc2xhc2ggZXNjYXBlZCB3aXRoIGEgdHJhaWxpbmcgc3BhY2UuICBGdW5uaWx5LCB0aGVcbiAgLy8gbGVhZGluZyBkYXNoIG11c3Qgbm90IGJlIGVzY2FwZWQsIGJ1dCB0aGUgbnVtYmVyLiA6c2hydWc6XG4gIGlmIChoZXhFc2NhcGUpIHtcbiAgICByZXR1cm4gbWF0Y2guc2xpY2UoMCwgLTEpICsgJ1xcXFwnICsgbWF0Y2guc2xpY2UoLTEpLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpICsgJyAnXG4gIH1cbiAgLy8gRmluYWxseSwgdGhlIHNvbGl0YXJ5IGRhc2ggYW5kIHRoZSBjYXRjaC1hbGwgY2hhcnMgcmVxdWlyZSBiYWNrc2xhc2hcbiAgLy8gZXNjYXBpbmcuXG4gIHJldHVybiAnXFxcXCcgKyBtYXRjaDtcbn1cblxuLyoqXG4gKiBodHRwczovL2RyYWZ0cy5jc3N3Zy5vcmcvY3Nzb20vI3NlcmlhbGl6ZS1hbi1pZGVudGlmaWVyXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNzc0VzY2FwZSh2YWx1ZSkge1xuICByZXR1cm4gU3RyaW5nKHZhbHVlKS5yZXBsYWNlKHJlZ2V4LCBlc2NhcGVyKTtcbn1cbiJdfQ=="}