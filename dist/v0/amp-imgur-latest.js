(self.AMP=self.AMP||[]).push({n:"amp-imgur",v:"0",f:(function(AMP,_){
function e(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var f=Object.getOwnPropertyDescriptor(b,d);f&&Object.defineProperty(a,d,f)}else a[d]=b[d]};var g=Object.prototype.toString;self.log=self.log||{user:null,dev:null,userForEmbed:null};var l=self.log;/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function m(a){return 1>a.length?!1:0==a.lastIndexOf("{",0)};var q;function r(a,b){var c=void 0,d=a,f=b,h;h=function(a){try{return f(a)}catch(n){throw self.reportError(n),n;}};var p=t(),k=!1;c&&(k=c.capture);d.addEventListener("message",h,p?c:k);return function(){d&&d.removeEventListener("message",h,p?c:k);h=d=f=null}}function t(){if(void 0!==q)return q;q=!1;try{var a={get capture(){q=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(b){}return q};function u(a){var b;try{return JSON.parse(a)}catch(c){b&&b(c)}};function v(a){a=AMP.BaseElement.call(this,a)||this;a.c=null;a.h=null;a.j="";return a}e(v,AMP.BaseElement);v.prototype.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a||"fluid"==a||"intrinsic"==a};v.prototype.buildCallback=function(){if(!l.user)throw Error("failed to call initLogConstructor");this.j=l.user.assert(this.element.getAttribute("data-imgur-id"),"The data-imgur-id attribute is required for <amp-imgur> %s",this.element)};
v.prototype.layoutCallback=function(){var a=this.element.ownerDocument.createElement("iframe");this.c=a;var b=this.l.bind(this);this.h=r(this.win,b);a.setAttribute("scrolling","no");a.setAttribute("frameborder","0");a.setAttribute("allowfullscreen","true");a.src="https://imgur.com/"+encodeURIComponent(this.j)+"/embed?pub=true";this.applyFillContent(a);this.element.appendChild(a);return this.loadPromise(a)};
v.prototype.l=function(a){if("https://imgur.com"==a.origin&&a.source==this.c.contentWindow){var b=a.data;b&&("[object Object]"===g.call(b)||m(b))&&(a="[object Object]"===g.call(b)?b:u(b),"resize_imgur"==a.message&&this.attemptChangeHeight(a.height).catch(function(){}))}};v.prototype.unlayoutCallback=function(){if(this.c){var a=this.c;a.parentElement&&a.parentElement.removeChild(a);this.c=null}this.h&&this.h();return!0};(function(a){a.registerElement("amp-imgur",v)})(self.AMP);
})});
//# sourceMappingURL=amp-imgur-0.1.js.map

