{"version":3,"sources":["node_modules/browser-pack/_prelude.js","build/amp-access-0.1.css.js","extensions/amp-access/0.1/access-expr-impl.js","extensions/amp-access/0.1/access-expr.js","extensions/amp-access/0.1/access-vars.js","extensions/amp-access/0.1/access-vendor.js","extensions/amp-access/0.1/amp-access-client.js","extensions/amp-access/0.1/amp-access-iframe.js","extensions/amp-access/0.1/amp-access-other.js","extensions/amp-access/0.1/amp-access-server-jwt.js","extensions/amp-access/0.1/amp-access-server.js","extensions/amp-access/0.1/amp-access-source.js","extensions/amp-access/0.1/amp-access-vendor.js","extensions/amp-access/0.1/amp-access.js","extensions/amp-access/0.1/iframe-api/messenger.js","extensions/amp-access/0.1/jwt.js","extensions/amp-access/0.1/login-dialog.js","node_modules/document-register-element/build/document-register-element.patched.js","node_modules/promise-pjs/promise.js","src/amp-events.js","src/analytics.js","src/config.js","src/cookies.js","src/document-fetcher.js","src/dom.js","src/element-service.js","src/error.js","src/event-helper-listen.js","src/event-helper.js","src/experiments.js","src/exponential-backoff.js","src/form-data-wrapper.js","src/form.js","src/json.js","src/log.js","src/mode-object.js","src/mode.js","src/observable.js","src/polyfills.js","src/polyfills/array-includes.js","src/polyfills/custom-elements.js","src/polyfills/document-contains.js","src/polyfills/domtokenlist-toggle.js","src/polyfills/math-sign.js","src/polyfills/object-assign.js","src/polyfills/promise.js","src/render-delaying-services.js","src/service.js","src/services.js","src/string.js","src/style-installer.js","src/style.js","src/types.js","src/url-parse-query-string.js","src/url-try-decode-uri-component.js","src/url.js","src/utils/array.js","src/utils/base64.js","src/utils/bytes.js","src/utils/lru-cache.js","src/utils/object.js","src/utils/pem.js","src/utils/promise.js","src/utils/xhr-utils.js","third_party/css-escape/css-escape.js"],"names":[],"mappings":"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;;;;;oCAIgB;AACd,UAAM,aAAa,KAAK,MAAL,CAAY,oBAAZ,EAAnB;AACA,UAAI,kBAAJ;AACA,UAAI,qBAAU,QAAd,EAAwB;AACtB,YAAM,MAAM,KAAK,GAAL,CAAS,QAArB;AACA,oBAAY,IAAI,QAAJ,GAAe,IAAf,GAAsB,IAAI,IAA1B,GACR,gDADJ;AAED,OAJD,MAIO;AACL,oBAAe,aAAK,GAApB;AACD;AACD,aAAO,YAAY,OAAZ,GAAsB,mBAAmB,UAAnB,CAA7B;AACD;;;;;;AAIH;;;;;;;;AAMA,SAAS,aAAT,CAAuB,GAAvB,EAA4B,SAA5B,EAAuC;AACrC;AACA;AACA;AACA,MAAI,iBAAiB,IAAjB,CAAsB,GAAtB,CAAJ,EAAgC;AAC9B,WAAO,IAAI,OAAJ,CAAY,gBAAZ,EAA8B,mBAAmB,SAAnB,CAA9B,CAAP;AACD;AACD,SAAO,OACF,IAAI,OAAJ,CAAY,GAAZ,KAAoB,CAAC,CAArB,GAAyB,GAAzB,GAA+B,GAD7B,IAEH,SAFG,GAES,mBAAmB,SAAnB,CAFhB;AAGD;;;ACpWD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACn6CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACngBA;;;;;;;;;;;;;;;;AAgBA;;;;AAIO,IAAM,gCAAY;AACvB,SAAO,WADgB;AAEvB,cAAY,gBAFW;AAGvB,qBAAmB,sBAHI,EAGoB;AAC3C;AACA;AACA,YAAU,cANa;AAOvB,WAAS,aAPc;AAQvB,cAAY,gBARW;AASvB,YAAU,cATa;AAUvB,SAAO;AAVgB,CAAlB;;;;;;QCKS,qB,GAAA,qB;;AAThB;;AAEA;;;;;;;AAOO,SAAS,qBAAT,CAA+B,MAA/B,EAAuC,SAAvC,EAAkD,QAAlD,EAA4D;AACjE,qBAAS,qBAAT,CAA+B,MAA/B,EAAuC,IAAvC,CAA4C,qBAAa;AACvD,QAAI,CAAC,SAAL,EAAgB;AACd;AACD;AACD,c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","file":"amp-access-0.1.max.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","export const CSS = \"\\n/*# sourceURL=/extensions/amp-access/0.1/amp-access.css*/\";\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/** @fileoverview @suppress {checkTypes, suspiciousCode, uselessCode} */\n\n/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar parser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[1,3],$V1=[1,4],$V2=[1,18],$V3=[1,13],$V4=[1,14],$V5=[1,15],$V6=[1,16],$V7=[1,17],$V8=[1,20],$V9=[1,21],$Va=[5,6,7,10],$Vb=[5,6,7,10,15,16,17,18,19,20,21],$Vc=[5,6,7,10,15,16,17,18,19,20,21,25];\nvar parser = {trace: function trace() { },\nyy: {},\nsymbols_: {\"error\":2,\"result\":3,\"search_condition\":4,\"EOF\":5,\"OR\":6,\"AND\":7,\"NOT\":8,\"(\":9,\")\":10,\"predicate\":11,\"comparison_predicate\":12,\"truthy_predicate\":13,\"scalar_exp\":14,\"EQ\":15,\"DEQ\":16,\"NEQ\":17,\"LT\":18,\"LTE\":19,\"GT\":20,\"GTE\":21,\"atom\":22,\"field_ref\":23,\"literal\":24,\"DOT\":25,\"field_name\":26,\"NAME\":27,\"STRING\":28,\"NUMERIC\":29,\"TRUE\":30,\"FALSE\":31,\"NULL\":32,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",5:\"EOF\",6:\"OR\",7:\"AND\",8:\"NOT\",9:\"(\",10:\")\",15:\"EQ\",16:\"DEQ\",17:\"NEQ\",18:\"LT\",19:\"LTE\",20:\"GT\",21:\"GTE\",25:\"DOT\",27:\"NAME\",28:\"STRING\",29:\"NUMERIC\",30:\"TRUE\",31:\"FALSE\",32:\"NULL\"},\nproductions_: [0,[3,2],[4,3],[4,3],[4,2],[4,3],[4,1],[11,1],[11,1],[12,3],[12,3],[12,3],[12,3],[12,3],[12,3],[12,3],[13,1],[14,1],[14,1],[22,1],[23,3],[23,1],[26,1],[24,1],[24,1],[24,1],[24,1],[24,1]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 1:\nreturn $$[$0-1];\nbreak;\ncase 2:\nthis.$ = $$[$0-2] || $$[$0];\nbreak;\ncase 3:\nthis.$ = $$[$0-2] && $$[$0];\nbreak;\ncase 4:\nthis.$ = !$$[$0];\nbreak;\ncase 5:\nthis.$ = $$[$0-1];\nbreak;\ncase 6: case 7: case 8: case 17: case 18: case 19:\nthis.$ = $$[$0];\nbreak;\ncase 9:\nthis.$ = $$[$0-2] === $$[$0];\nbreak;\ncase 10:\nthrow new Error('\"==\" is not allowed, use \"=\"');\nbreak;\ncase 11:\nthis.$ = $$[$0-2] !== $$[$0];\nbreak;\ncase 12:\nthis.$ = typeof $$[$0-2] == typeof $$[$0] && $$[$0-2] < $$[$0];\nbreak;\ncase 13:\nthis.$ = typeof $$[$0-2] == typeof $$[$0] && $$[$0-2] <= $$[$0];\nbreak;\ncase 14:\nthis.$ = typeof $$[$0-2] == typeof $$[$0] && $$[$0-2] > $$[$0];\nbreak;\ncase 15:\nthis.$ = typeof $$[$0-2] == typeof $$[$0] && $$[$0-2] >= $$[$0];\nbreak;\ncase 16:\nthis.$ = ($$[$0] !== undefined && $$[$0] !== null\n                && $$[$0] !== '' && $$[$0] !== 0 && $$[$0] !== false);\nbreak;\ncase 20:\nthis.$ = Object.prototype.toString.call($$[$0-2]) == '[object Object]' && $$[$0-2].hasOwnProperty($$[$0]) ? $$[$0-2][$$[$0]] : null;\nbreak;\ncase 21:\nthis.$ = yy[$$[$0]] !== undefined ? yy[$$[$0]] : null;\nbreak;\ncase 22:\nthis.$ = yytext;\nbreak;\ncase 23:\nthis.$ = yytext.substring(1, yytext.length - 1);\nbreak;\ncase 24:\nthis.$ = Number(yytext);\nbreak;\ncase 25:\nthis.$ = true\nbreak;\ncase 26:\nthis.$ = false\nbreak;\ncase 27:\nthis.$ = null\nbreak;\n}\n},\ntable: [{3:1,4:2,8:$V0,9:$V1,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,27:$V2,28:$V3,29:$V4,30:$V5,31:$V6,32:$V7},{1:[3]},{5:[1,19],6:$V8,7:$V9},{4:22,8:$V0,9:$V1,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,27:$V2,28:$V3,29:$V4,30:$V5,31:$V6,32:$V7},{4:23,8:$V0,9:$V1,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,27:$V2,28:$V3,29:$V4,30:$V5,31:$V6,32:$V7},o($Va,[2,6]),o($Va,[2,7]),o($Va,[2,8]),o($Va,[2,16],{15:[1,24],16:[1,25],17:[1,26],18:[1,27],19:[1,28],20:[1,29],21:[1,30]}),o($Vb,[2,17]),o($Vb,[2,18],{25:[1,31]}),o($Vb,[2,19]),o($Vc,[2,21]),o($Vb,[2,23]),o($Vb,[2,24]),o($Vb,[2,25]),o($Vb,[2,26]),o($Vb,[2,27]),o($Vc,[2,22]),{1:[2,1]},{4:32,8:$V0,9:$V1,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,27:$V2,28:$V3,29:$V4,30:$V5,31:$V6,32:$V7},{4:33,8:$V0,9:$V1,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,27:$V2,28:$V3,29:$V4,30:$V5,31:$V6,32:$V7},o($Va,[2,4]),{6:$V8,7:$V9,10:[1,34]},{14:35,22:9,23:10,24:11,26:12,27:$V2,28:$V3,29:$V4,30:$V5,31:$V6,32:$V7},{14:36,22:9,23:10,24:11,26:12,27:$V2,28:$V3,29:$V4,30:$V5,31:$V6,32:$V7},{14:37,22:9,23:10,24:11,26:12,27:$V2,28:$V3,29:$V4,30:$V5,31:$V6,32:$V7},{14:38,22:9,23:10,24:11,26:12,27:$V2,28:$V3,29:$V4,30:$V5,31:$V6,32:$V7},{14:39,22:9,23:10,24:11,26:12,27:$V2,28:$V3,29:$V4,30:$V5,31:$V6,32:$V7},{14:40,22:9,23:10,24:11,26:12,27:$V2,28:$V3,29:$V4,30:$V5,31:$V6,32:$V7},{14:41,22:9,23:10,24:11,26:12,27:$V2,28:$V3,29:$V4,30:$V5,31:$V6,32:$V7},{26:42,27:$V2},o([5,6,10],[2,2],{7:$V9}),o($Va,[2,3]),o($Va,[2,5]),o($Va,[2,9]),o($Va,[2,10]),o($Va,[2,11]),o($Va,[2,12]),o($Va,[2,13]),o($Va,[2,14]),o($Va,[2,15]),o($Vc,[2,20])],\ndefaultActions: {19:[2,1]},\nparseError: function parseError(str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n    _token_stack:\n        var lex = function () {\n            var token;\n            token = lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        };\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n                    if (typeof action === 'undefined' || !action.length || !action[0]) {\n                var errStr = '';\n                expected = [];\n                for (p in table[state]) {\n                    if (this.terminals_[p] && p > TERROR) {\n                        expected.push('\\'' + this.terminals_[p] + '\\'');\n                    }\n                }\n                if (lexer.showPosition) {\n                    errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n                } else {\n                    errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n                }\n                this.parseError(errStr, {\n                    text: lexer.match,\n                    token: this.terminals_[symbol] || symbol,\n                    line: lexer.yylineno,\n                    loc: yyloc,\n                    expected: expected\n                });\n            }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function (match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex() {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin(condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState() {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules() {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState(n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState(condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0:/* skip whitespace */\nbreak;\ncase 1:return 7\nbreak;\ncase 2:return 6\nbreak;\ncase 3:return 8\nbreak;\ncase 4:return 32\nbreak;\ncase 5:return 30\nbreak;\ncase 6:return 30\nbreak;\ncase 7:return 31\nbreak;\ncase 8:return 31\nbreak;\ncase 9:return 9\nbreak;\ncase 10:return 10\nbreak;\ncase 11:return '|'\nbreak;\ncase 12:return 19\nbreak;\ncase 13:return 18\nbreak;\ncase 14:return 21\nbreak;\ncase 15:return 20\nbreak;\ncase 16:return 17\nbreak;\ncase 17:return 16\nbreak;\ncase 18:return 15\nbreak;\ncase 19:return 29\nbreak;\ncase 20:return 27\nbreak;\ncase 21:return 28\nbreak;\ncase 22:return 28\nbreak;\ncase 23:return 25\nbreak;\ncase 24:return 'INVALID'\nbreak;\ncase 25:return 5\nbreak;\n}\n},\nrules: [/^(?:\\s+)/,/^(?:AND\\b)/,/^(?:OR\\b)/,/^(?:NOT\\b)/,/^(?:NULL\\b)/,/^(?:TRUE\\b)/,/^(?:true\\b)/,/^(?:FALSE\\b)/,/^(?:false\\b)/,/^(?:\\()/,/^(?:\\))/,/^(?:\\|)/,/^(?:<=)/,/^(?:<)/,/^(?:>=)/,/^(?:>)/,/^(?:!=)/,/^(?:==)/,/^(?:=)/,/^(?:-?[0-9]+(\\.[0-9]+)?\\b)/,/^(?:[a-zA-Z_][a-zA-Z0-9_]*)/,/^(?:'[^\\']*')/,/^(?:\"[^\\\"]*\")/,/^(?:\\.)/,/^(?:.)/,/^(?:$)/],\nconditions: {\"INITIAL\":{\"rules\":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();\n\nexport const accessParser = parser;\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {accessParser as parser} from './access-expr-impl';\n\n\n/**\n * Evaluates access expression.\n *\n * The grammar is defined in the `access-expr-impl.jison` and compiled using\n * (Jison)[https://zaach.github.io/jison/] parser. The compilation steps are\n * described in the [access-expr-impl.md].\n *\n * Grammar highlights:\n * - Shorthand truthy expressions are allowed, such as `field`. Truthy value\n *   is defined as `X !== null && X !== '' && X !== 0 && X !== false`.\n * - Basic equality expressions: `X = 1`, `X = true`, `X = \"A\"`. And also,\n *   non-equality: `X != 1` and so on.\n * - Basic comparison expressions only defined for numbers: `X < 1`,\n *   `X >= 10`.\n * - Boolean logic: `X = 1 OR Y = 1`, `X = 1 AND Y = 2`, `NOT X`, `NOT (X = 1)`.\n *\n * @param {string} expr\n * @param {!JsonObject} data\n * @return {boolean}\n */\nexport function evaluateAccessExpr(expr, data) {\n  try {\n    parser.yy = data;\n    return !!parser.parse(expr);\n  } finally {\n    parser.yy = null;\n  }\n}\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * Exports the substitution variables for access services.\n *\n * @interface\n */\nexport class AccessVars {\n\n  /**\n   * Returns the promise that will yield the access READER_ID.\n   *\n   * This is a restricted API.\n   *\n   * @return {?Promise<string>}\n   */\n  getAccessReaderId() {}\n\n  /**\n   * Returns the promise that will yield the value of the specified field from\n   * the authorization response. This method will wait for the most recent\n   * authorization request to complete. It will return null values for failed\n   * requests with no fallback, but could be modified to block indefinitely.\n   *\n   * This is a restricted API.\n   *\n   * @param {string} unusedField\n   * @return {?Promise<*|null>}\n   */\n  getAuthdataField(unusedField) {}\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * This interface is intended to be implemented by AMP Access vendors to\n * provide authorization and pingback.\n * @interface\n */\nexport class AccessVendor {\n\n  /**\n   * Requests authorization from the vendor. Returns a promise that yields\n   * a JSON authorization response.\n   * @return {!Promise<!JsonObject>}\n   */\n  authorize() {}\n\n  /**\n   * Registeres the \"viewed\" event as a pingback to the authorization vendor.\n   * This signal can be used to count-down quotas.\n   * @return {!Promise}\n   */\n  pingback() {}\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Services} from '../../../src/services';\nimport {assertHttpsUrl} from '../../../src/url';\nimport {dev, user} from '../../../src/log';\nimport {dict} from '../../../src/utils/object';\nimport {getMode} from '../../../src/mode';\n\n/** @const {string} */\nconst TAG = 'amp-access-client';\n\n/** @const {number} */\nconst DEFAULT_AUTHORIZATION_TIMEOUT = 3000;\n\n\n/** @implements {./amp-access-source.AccessTypeAdapterDef} */\nexport class AccessClientAdapter {\n\n  /**\n   * @param {!../../../src/service/ampdoc-impl.AmpDoc} ampdoc\n   * @param {!JsonObject} configJson\n   * @param {!./amp-access-source.AccessTypeAdapterContextDef} context\n   */\n  constructor(ampdoc, configJson, context) {\n    /** @const */\n    this.ampdoc = ampdoc;\n\n    /** @const @private {!./amp-access-source.AccessTypeAdapterContextDef} */\n    this.context_ = context;\n\n    /** @const @private {string} */\n    this.authorizationUrl_ = user().assert(configJson['authorization'],\n        '\"authorization\" URL must be specified');\n    assertHttpsUrl(this.authorizationUrl_, '\"authorization\"');\n\n    /** @const @private {boolean} */\n    this.isPingbackEnabled_ = !configJson['noPingback'];\n\n    /** @const @private {string} */\n    this.pingbackUrl_ = configJson['pingback'];\n    if (this.isPingbackEnabled_) {\n      user().assert(this.pingbackUrl_, '\"pingback\" URL must be specified');\n      assertHttpsUrl(this.pingbackUrl_, '\"pingback\"');\n    }\n\n    /** @const @private {number} */\n    this.authorizationTimeout_ = this.buildConfigAuthorizationTimeout_(\n        configJson);\n\n    /** @const @private {!../../../src/service/xhr-impl.Xhr} */\n    this.xhr_ = Services.xhrFor(ampdoc.win);\n\n    /** @const @private {!../../../src/service/timer-impl.Timer} */\n    this.timer_ = Services.timerFor(ampdoc.win);\n  }\n\n  /**\n   * @param {!JsonObject} configJson\n   * @return {number}\n   */\n  buildConfigAuthorizationTimeout_(configJson) {\n    if (!configJson['authorizationTimeout']) {\n      return DEFAULT_AUTHORIZATION_TIMEOUT;\n    }\n\n    let timeout = configJson['authorizationTimeout'];\n    user().assert(typeof timeout == 'number',\n        '\"authorizationTimeout\" must be a number');\n    if (!(getMode().localDev || getMode().development)) {\n      timeout = Math.min(timeout, DEFAULT_AUTHORIZATION_TIMEOUT);\n    }\n    return timeout;\n  }\n\n  /** @override */\n  getConfig() {\n    return {\n      'authorizationUrl': this.authorizationUrl_,\n      'pingbackEnabled': this.isPingbackEnabled_,\n      'pingbackUrl': this.pingbackUrl_,\n      'authorizationTimeout': this.authorizationTimeout_,\n    };\n  }\n\n  /**\n   * @return {string}\n   */\n  getAuthorizationUrl() {\n    return this.authorizationUrl_;\n  }\n\n  /** @override */\n  isAuthorizationEnabled() {\n    return true;\n  }\n\n  /**\n   * @return {number}\n   */\n  getAuthorizationTimeout() {\n    return this.authorizationTimeout_;\n  }\n\n  /** @override */\n  authorize() {\n    dev().fine(TAG, 'Start authorization via ', this.authorizationUrl_);\n    const urlPromise = this.context_.buildUrl(this.authorizationUrl_,\n        /* useAuthData */ false);\n    return urlPromise.then(url => {\n      dev().fine(TAG, 'Authorization URL: ', url);\n      return this.timer_.timeoutPromise(\n          this.authorizationTimeout_,\n          this.xhr_.fetchJson(url, {\n            credentials: 'include',\n          })).then(res => res.json());\n    });\n  }\n\n  /** @override */\n  isPingbackEnabled() {\n    return this.isPingbackEnabled_;\n  }\n\n  /** @override */\n  pingback() {\n    const promise = this.context_.buildUrl(dev().assert(this.pingbackUrl_),\n        /* useAuthData */ true);\n    return promise.then(url => {\n      dev().fine(TAG, 'Pingback URL: ', url);\n      return this.xhr_.sendSignal(url, {\n        method: 'POST',\n        credentials: 'include',\n        headers: dict({\n          'Content-Type': 'application/x-www-form-urlencoded',\n        }),\n        body: '',\n      });\n    });\n  }\n\n  /** @override */\n  postAction() {\n    // Nothing to do.\n  }\n}\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Deferred} from '../../../src/utils/promise';\nimport {Messenger} from './iframe-api/messenger';\nimport {Services} from '../../../src/services';\nimport {assertHttpsUrl} from '../../../src/url';\nimport {dev, user} from '../../../src/log';\nimport {dict} from '../../../src/utils/object';\nimport {getMode} from '../../../src/mode';\nimport {isArray} from '../../../src/types';\nimport {parseJson} from '../../../src/json';\nimport {parseUrlDeprecated} from '../../../src/url';\nimport {toggle} from '../../../src/style';\n\nconst AUTHORIZATION_TIMEOUT = 3000;\nconst EXPIRATION_TIMEOUT = 1000 * 60 * 60 * 24 * 7; // 7 days\nconst TAG = 'amp-access-iframe';\n\n\n/** @implements {./amp-access-source.AccessTypeAdapterDef} */\nexport class AccessIframeAdapter {\n\n  /**\n   * @param {!../../../src/service/ampdoc-impl.AmpDoc} ampdoc\n   * @param {!JsonObject} configJson\n   * @param {!./amp-access-source.AccessTypeAdapterContextDef} context\n   */\n  constructor(ampdoc, configJson, context) {\n    /** @const */\n    this.ampdoc = ampdoc;\n\n    /** @const @private {!./amp-access-source.AccessTypeAdapterContextDef} */\n    this.context_ = context;\n\n    /** @const @private {!JsonObject} */\n    this.configJson_ = configJson;\n\n    /** @const @private {!../../../src/service/timer-impl.Timer} */\n    this.timer_ = Services.timerFor(ampdoc.win);\n\n    /** @const @private {string} */\n    this.iframeSrc_ = user().assert(configJson['iframeSrc'],\n        '\"iframeSrc\" URL must be specified');\n    assertHttpsUrl(this.iframeSrc_, '\"iframeSrc\"');\n\n    /** @const @private {?Array} */\n    this.iframeVars_ = configJson['iframeVars'] || null;\n    if (this.iframeVars_) {\n      user().assert(isArray(this.iframeVars_),\n          '\"iframeVars\" must be an array');\n    }\n\n    /** @const @private {!JsonObject} */\n    this.defaultResponse_ = user().assert(configJson['defaultResponse'],\n        '\"defaultResponse\" must be specified');\n\n    /** @private @const {string} */\n    this.targetOrigin_ = parseUrlDeprecated(this.iframeSrc_).origin;\n\n    /** @private {?function()} */\n    this.connectedResolver_ = null;\n\n    /** @private {?Promise} */\n    this.connectedPromise_ = null;\n\n    /** @private @const {!Element} */\n    this.iframe_ = ampdoc.win.document.createElement('iframe');\n    toggle(this.iframe_, false);\n\n    /** @private @const {!Messenger} */\n    this.messenger_ = new Messenger(\n        this.ampdoc.win,\n        () => this.iframe_.contentWindow,\n        this.targetOrigin_);\n\n    /** @private {?Promise<!JsonObject>} */\n    this.configPromise_ = null;\n  }\n\n  /**\n   * Disconnect the client.\n   */\n  disconnect() {\n    this.messenger_.disconnect();\n    this.ampdoc.getBody().removeChild(this.iframe_);\n  }\n\n  /** @override */\n  getConfig() {\n    return {\n      'iframeSrc': this.iframeSrc_,\n      'iframeVars': this.iframeVars_,\n    };\n  }\n\n  /** @override */\n  isAuthorizationEnabled() {\n    return true;\n  }\n\n  /** @override */\n  authorize() {\n    return Promise.race([\n      this.authorizeLocal_(),\n      this.authorizeRemote_(),\n    ]);\n  }\n\n  /** @override */\n  isPingbackEnabled() {\n    return true;\n  }\n\n  /** @override */\n  pingback() {\n    return this.connect().then(() => {\n      return this.messenger_.sendCommandRsvp('pingback', {});\n    });\n  }\n\n  /** @override */\n  postAction() {\n    // Reset the storage.\n    this.store_(null);\n  }\n\n  /**\n   * @return {!Promise}\n   * @package Visible for testing only.\n   */\n  connect() {\n    if (!this.connectedPromise_) {\n      const deferred = new Deferred();\n      this.connectedPromise_ = deferred.promise;\n      this.connectedResolver_ = deferred.resolve;\n\n      this.configPromise_ = this.resolveConfig_();\n      // Connect.\n      this.messenger_.connect(this.handleCommand_.bind(this));\n      this.ampdoc.getBody().appendChild(this.iframe_);\n      this.iframe_.src = this.iframeSrc_;\n    }\n    return this.connectedPromise_;\n  }\n\n  /**\n   * @return {!Promise<!JsonObject>}\n   * @private\n   */\n  resolveConfig_() {\n    return new Promise(resolve => {\n      const configJson = parseJson(JSON.stringify(this.configJson_));\n      if (this.iframeVars_) {\n        const varsString = this.iframeVars_.join('&');\n        const varsPromise = this.context_.collectUrlVars(\n            varsString,\n            /* useAuthData */ false);\n        resolve(varsPromise.then(vars => {\n          configJson['iframeVars'] = vars;\n          return configJson;\n        }));\n      } else {\n        resolve(configJson);\n      }\n    });\n  }\n\n  /**\n   * @return {!Promise<!JsonObject>}\n   * @private\n   */\n  authorizeLocal_() {\n    const timeout = AUTHORIZATION_TIMEOUT * (getMode().development ? 2 : 1);\n    return this.timer_.promise(timeout).then(() => {\n      return this.restore_() || this.defaultResponse_;\n    });\n  }\n\n  /**\n   * @return {!Promise<!JsonObject>}\n   * @private\n   */\n  authorizeRemote_() {\n    return this.connect().then(() => {\n      return this.messenger_.sendCommandRsvp('authorize', {});\n    }).then(data => {\n      if (data) {\n        // Store the value in a non-blocking microtask.\n        Promise.resolve().then(() => this.store_(data));\n      }\n      return data;\n    });\n  }\n\n  /**\n   * @return {?JsonObject} data\n   * @private\n   */\n  restore_() {\n    const {win} = this.ampdoc;\n    const storage = win.sessionStorage || win.localStorage;\n    if (!storage) {\n      return null;\n    }\n    try {\n      const raw = storage.getItem(TAG);\n      if (!raw) {\n        return null;\n      }\n      const parsed = parseJson(raw);\n      const time = parsed['t'];\n      if ((time + EXPIRATION_TIMEOUT) < this.ampdoc.win.Date.now()) {\n        // Already expired.\n        return null;\n      }\n      return parsed['d'] || null;\n    } catch (e) {\n      dev().error(TAG, 'failed to restore access response: ', e);\n      try {\n        // Remove the poisoned value.\n        storage.removeItem(TAG);\n      } catch (e) {\n        // Ignore.\n      }\n      return null;\n    }\n  }\n\n  /**\n   * @param {?JsonObject} data\n   * @private\n   */\n  store_(data) {\n    const {win} = this.ampdoc;\n    const storage = win.sessionStorage || win.localStorage;\n    if (!storage) {\n      return;\n    }\n    try {\n      if (data) {\n        storage.setItem(TAG, JSON.stringify(dict({\n          't': this.ampdoc.win.Date.now(),\n          'd': data,\n        })));\n      } else {\n        storage.removeItem(TAG);\n      }\n    } catch (e) {\n      dev().error(TAG, 'failed to store access response: ', e);\n    }\n  }\n\n  /**\n   * @param {string} cmd\n   * @param {?Object} unusedPayload\n   * @return {*}\n   * @private\n   */\n  handleCommand_(cmd, unusedPayload) {\n    if (cmd == 'connect') {\n      // First ever message. Indicates that the receiver is listening.\n      this.configPromise_.then(configJson => {\n        this.messenger_.sendCommandRsvp('start', {\n          'protocol': 'amp-access',\n          'config': configJson,\n        }).then(() => {\n          // Confirmation that connection has been successful.\n          if (this.connectedResolver_) {\n            this.connectedResolver_();\n            this.connectedResolver_ = null;\n          }\n        });\n      });\n      return;\n    }\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {dev} from '../../../src/log';\nimport {isProxyOrigin} from '../../../src/url';\n\n/** @const {string} */\nconst TAG = 'amp-access-other';\n\n\n/** @implements {./amp-access-source.AccessTypeAdapterDef} */\nexport class AccessOtherAdapter {\n\n  /**\n   * @param {!../../../src/service/ampdoc-impl.AmpDoc} ampdoc\n   * @param {!JsonObject} configJson\n   * @param {!./amp-access-source.AccessTypeAdapterContextDef} context\n   */\n  constructor(ampdoc, configJson, context) {\n    /** @const */\n    this.ampdoc = ampdoc;\n\n    /** @const @private {!./amp-access-source.AccessTypeAdapterContextDef} */\n    this.context_ = context;\n\n    /** @private {?JsonObject} */\n    this.authorizationResponse_ =\n        configJson['authorizationFallbackResponse'] || null;\n\n    /** @const @private {boolean} */\n    this.isProxyOrigin_ = isProxyOrigin(ampdoc.win.location);\n  }\n\n  /** @override */\n  getConfig() {\n    return {\n      'authorizationResponse': this.authorizationResponse_,\n    };\n  }\n\n  /** @override */\n  isAuthorizationEnabled() {\n    // The `type=other` is allowed to use the authorization fallback, but\n    // only if it's not on `cdn.ampproject.org`.\n    return (!!this.authorizationResponse_ && !this.isProxyOrigin_);\n  }\n\n  /** @override */\n  authorize() {\n    dev().fine(TAG, 'Use the authorization fallback for type=other');\n    // Disallow authorization for proxy origin (`cdn.ampproject.org`).\n    dev().assert(!this.isProxyOrigin_, 'Cannot authorize for proxy origin');\n    const response = dev().assert(this.authorizationResponse_);\n    return Promise.resolve(response);\n  }\n\n  /** @override */\n  isPingbackEnabled() {\n    return false;\n  }\n\n  /** @override */\n  pingback() {\n    dev().fine(TAG, 'Ignore pingback');\n    return Promise.resolve();\n  }\n\n  /** @override */\n  postAction() {\n    // Nothing to do.\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {AccessClientAdapter} from './amp-access-client';\nimport {JwtHelper} from './jwt';\nimport {Services} from '../../../src/services';\nimport {assertHttpsUrl} from '../../../src/url';\nimport {dev, user} from '../../../src/log';\nimport {dict} from '../../../src/utils/object';\nimport {escapeCssSelectorIdent} from '../../../src/dom';\nimport {fetchDocument} from '../../../src/document-fetcher';\nimport {getMode} from '../../../src/mode';\nimport {isArray} from '../../../src/types';\nimport {isExperimentOn} from '../../../src/experiments';\nimport {\n  isProxyOrigin,\n  removeFragment,\n  serializeQueryString,\n} from '../../../src/url';\n\n/** @const {string} */\nconst TAG = 'amp-access-server-jwt';\n\n/** @const {number} */\nconst AUTHORIZATION_TIMEOUT = 3000;\n\n/** @const {string} */\nconst AMP_AUD = 'ampproject.org';\n\n\n/**\n * This class implements server-side authorization protocol with JWT. In this\n * approach only immediately visible sections are downloaded. For authorization,\n * the client calls the authorization endpoint, which returns a signed JWT\n * token with `amp_authdata` field. The client calls CDN with this JWT token,\n * and CDN returns back the authorized content fragments.\n *\n * The approximate diagram looks like this:\n *\n *        Initial GET\n *            ||\n *            ||   [Limited document: fragments requiring\n *            ||      authorization are exlcuded]\n *            ||\n *            \\/\n *    Authorize request to Publisher\n *            ||\n *            ||   [Authorization response as JWT]\n *            ||\n *            \\/\n *    Authorize request to CDN w/JWT\n *            ||\n *            ||   [Authorized fragments]\n *            ||\n *            \\/\n *    Merge authorized fragments\n *            ||\n *            ||\n *            \\/\n *    Apply authorization response\n *\n * @implements {./amp-access-source.AccessTypeAdapterDef}\n */\nexport class AccessServerJwtAdapter {\n\n  /**\n   * @param {!../../../src/service/ampdoc-impl.AmpDoc} ampdoc\n   * @param {!JsonObject} configJson\n   * @param {!./amp-access-source.AccessTypeAdapterContextDef} context\n   */\n  constructor(ampdoc, configJson, context) {\n    /** @const */\n    this.ampdoc = ampdoc;\n\n    /** @const @private {!./amp-access-source.AccessTypeAdapterContextDef} */\n    this.context_ = context;\n\n    /** @private @const */\n    this.clientAdapter_ = new AccessClientAdapter(ampdoc, configJson, context);\n\n    /** @private @const {!../../../src/service/viewer-impl.Viewer} */\n    this.viewer_ = Services.viewerForDoc(ampdoc);\n\n    /** @const @private {!../../../src/service/xhr-impl.Xhr} */\n    this.xhr_ = Services.xhrFor(ampdoc.win);\n\n    /** @const @private {!../../../src/service/timer-impl.Timer} */\n    this.timer_ = Services.timerFor(ampdoc.win);\n\n    /** @const @private {!../../../src/service/vsync-impl.Vsync} */\n    this.vsync_ = Services.vsyncFor(ampdoc.win);\n\n    const stateElement = ampdoc.getRootNode().querySelector(\n        'meta[name=\"i-amphtml-access-state\"]');\n\n    /** @private @const {?string} */\n    this.serverState_ = stateElement ?\n      stateElement.getAttribute('content') : null;\n\n    const isInExperiment = isExperimentOn(ampdoc.win, 'amp-access-server-jwt');\n\n    /** @private @const {boolean} */\n    this.isProxyOrigin_ = isProxyOrigin(ampdoc.win.location) || isInExperiment;\n\n    const serviceUrlOverride = isInExperiment ?\n      this.viewer_.getParam('serverAccessService') : null;\n\n    /** @private @const {string} */\n    this.serviceUrl_ = serviceUrlOverride ||\n        removeFragment(ampdoc.win.location.href);\n\n    /** @const @private {?string} */\n    this.key_ = configJson['publicKey'] || null;\n\n    /** @const @private {?string} */\n    this.keyUrl_ = configJson['publicKeyUrl'] || null;\n\n    user().assert(this.key_ || this.keyUrl_,\n        '\"publicKey\" or \"publicKeyUrl\" must be specified');\n    if (this.keyUrl_) {\n      assertHttpsUrl(this.keyUrl_, '\"publicKeyUrl\"');\n    }\n    if (this.key_ && this.keyUrl_) {\n      // TODO(dvoytenko): Remove \"publicKey\" option eventually.\n      user().warn(TAG,\n          'Both \"publicKey\" and \"publicKeyUrl\" specified. ' +\n          'The \"publicKeyUrl\" will be ignored.');\n    }\n\n    /** @private @const {!JwtHelper} */\n    this.jwtHelper_ = new JwtHelper(ampdoc.win);\n  }\n\n  /** @override */\n  getConfig() {\n    return {\n      'client': this.clientAdapter_.getConfig(),\n      'proxy': this.isProxyOrigin_,\n      'serverState': this.serverState_,\n      'publicKey': this.key_,\n      'publicKeyUrl': this.keyUrl_,\n    };\n  }\n\n  /** @override */\n  isAuthorizationEnabled() {\n    return true;\n  }\n\n  /** @override */\n  authorize() {\n    dev().fine(TAG, 'Start authorization with ',\n        this.isProxyOrigin_ ? 'proxy' : 'non-proxy',\n        this.serverState_,\n        this.clientAdapter_.getAuthorizationUrl());\n    if (!this.isProxyOrigin_ || !this.serverState_) {\n      return this.authorizeOnClient_();\n    }\n    return this.authorizeOnServer_();\n  }\n\n  /** @override */\n  isPingbackEnabled() {\n    return this.clientAdapter_.isPingbackEnabled();\n  }\n\n  /** @override */\n  pingback() {\n    return this.clientAdapter_.pingback();\n  }\n\n  /** @override */\n  postAction() {\n    // Nothing to do.\n  }\n\n  /**\n   * @return {!Promise<{encoded:string, jwt:!JsonObject}>}\n   * @private\n   */\n  fetchJwt_() {\n    const urlPromise = this.context_.buildUrl(\n        this.clientAdapter_.getAuthorizationUrl(),\n        /* useAuthData */ false);\n    let jwtPromise = urlPromise.then(url => {\n      dev().fine(TAG, 'Authorization URL: ', url);\n      return this.timer_.timeoutPromise(\n          AUTHORIZATION_TIMEOUT,\n          this.xhr_.fetchText(url, {\n            credentials: 'include',\n          }));\n    }).then(resp => {\n      return resp.text();\n    }).then(encoded => {\n      const jwt = this.jwtHelper_.decode(encoded);\n      user().assert(jwt['amp_authdata'],\n          '\"amp_authdata\" must be present in JWT');\n      return {encoded, jwt};\n    });\n    if (this.shouldBeValidated_()) {\n      // Validate JWT in the development mode.\n      if (this.jwtHelper_.isVerificationSupported()) {\n        jwtPromise = jwtPromise.then(resp => {\n          return this.jwtHelper_\n              .decodeAndVerify(resp.encoded, this.loadKeyPem_())\n              .then(() => resp);\n        });\n      } else {\n        user().warn(TAG, 'Cannot verify signature on this browser since' +\n            ' it doesn\\'t support WebCrypto APIs');\n      }\n      jwtPromise = jwtPromise.then(resp => {\n        this.validateJwt_(resp.jwt);\n        return resp;\n      });\n    }\n    return jwtPromise.catch(reason => {\n      throw user().createError('JWT fetch or validation failed: ', reason);\n    });\n  }\n\n  /**\n   * @return {!Promise<string>}\n   * @private\n   */\n  loadKeyPem_() {\n    if (this.key_) {\n      return Promise.resolve(this.key_);\n    }\n    return this.xhr_.fetchText(dev().assertString(this.keyUrl_))\n        .then(res => res.text());\n  }\n\n  /**\n   * @return {boolean}\n   * @private\n   */\n  shouldBeValidated_() {\n    return getMode().development;\n  }\n\n  /**\n   * @param {!JsonObject} jwt\n   * @private\n   */\n  validateJwt_(jwt) {\n    const now = Date.now();\n\n    // exp: expiration time.\n    const exp = jwt['exp'];\n    user().assert(exp, '\"exp\" field must be specified');\n    user().assert(parseFloat(exp) * 1000 > now,\n        'token has expired: %s', exp);\n\n    // aud: audience.\n    const aud = jwt['aud'];\n    user().assert(aud, '\"aud\" field must be specified');\n    let audForAmp = false;\n    if (isArray(aud)) {\n      for (let i = 0; i < aud.length; i++) {\n        if (aud[i] == AMP_AUD) {\n          audForAmp = true;\n          break;\n        }\n      }\n    } else {\n      audForAmp = (aud == AMP_AUD);\n    }\n    user().assert(audForAmp, '\"aud\" must be \"%s\": %s', AMP_AUD, aud);\n  }\n\n  /**\n   * @return {!Promise<!JsonObject>}\n   * @private\n   */\n  authorizeOnClient_() {\n    dev().fine(TAG, 'Proceed via client protocol via ',\n        this.clientAdapter_.getAuthorizationUrl());\n    return this.fetchJwt_().then(resp => {\n      return resp.jwt['amp_authdata'];\n    });\n  }\n\n  /**\n   * @return {!Promise<!JsonObject>}\n   * @private\n   */\n  authorizeOnServer_() {\n    dev().fine(TAG, 'Proceed via server protocol');\n    return this.fetchJwt_().then(resp => {\n      const {encoded, jwt} = resp;\n      const accessData = jwt['amp_authdata'];\n      const request = serializeQueryString(dict({\n        'url': removeFragment(this.ampdoc.win.location.href),\n        'state': this.serverState_,\n        'jwt': encoded,\n      }));\n      dev().fine(TAG, 'Authorization request: ', this.serviceUrl_, request);\n      dev().fine(TAG, '- access data: ', accessData);\n      // Note that `application/x-www-form-urlencoded` is used to avoid\n      // CORS preflight request.\n      return this.timer_.timeoutPromise(\n          AUTHORIZATION_TIMEOUT,\n          fetchDocument(this.ampdoc.win, this.serviceUrl_, {\n            method: 'POST',\n            body: request,\n            headers: dict({\n              'Content-Type': 'application/x-www-form-urlencoded',\n            }),\n            requireAmpResponseSourceOrigin: false,\n          })).then(response => {\n        dev().fine(TAG, 'Authorization response: ', response);\n        return this.replaceSections_(response);\n      }).then(() => accessData);\n    });\n  }\n\n  /**\n   * @param {!Document} doc\n   * @return {!Promise}\n   */\n  replaceSections_(doc) {\n    const sections = doc.querySelectorAll('[i-amphtml-access-id]');\n    dev().fine(TAG, '- access sections: ', sections);\n    return this.vsync_.mutatePromise(() => {\n      for (let i = 0; i < sections.length; i++) {\n        const section = sections[i];\n        const sectionId = section.getAttribute('i-amphtml-access-id');\n        const target = this.ampdoc.getRootNode().querySelector(\n            `[i-amphtml-access-id=\"${escapeCssSelectorIdent(sectionId)}\"]`);\n        if (!target) {\n          dev().warn(TAG, 'Section not found: ', sectionId);\n          continue;\n        }\n        target.parentElement.replaceChild(\n            this.ampdoc.win.document.importNode(section, /* deep */ true),\n            target);\n      }\n    });\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {AccessClientAdapter} from './amp-access-client';\nimport {Services} from '../../../src/services';\nimport {dev} from '../../../src/log';\nimport {dict} from '../../../src/utils/object';\nimport {escapeCssSelectorIdent} from '../../../src/dom';\nimport {fetchDocument} from '../../../src/document-fetcher';\nimport {isExperimentOn} from '../../../src/experiments';\nimport {isProxyOrigin, removeFragment} from '../../../src/url';\nimport {parseJson} from '../../../src/json';\n\n/** @const {string} */\nconst TAG = 'amp-access-server';\n\n\n/**\n * This class implements server-side authorization protocol. In this approach\n * only immediately visible sections are downloaded. For authorization, the\n * CDN calls the authorization endpoint directly and returns back to the\n * authorization response and the authorized content fragments, which are\n * merged into the document.\n *\n * The approximate diagram looks like this:\n *\n *        Initial GET\n *            ||\n *            ||   [Limited document: fragments requiring\n *            ||      authorization are exlcuded]\n *            ||\n *            \\/\n *    Authorize request to CDN\n *            ||\n *            ||   [Authorization response]\n *            ||   [Authorized fragments]\n *            ||\n *            \\/\n *    Merge authorized fragments\n *            ||\n *            ||\n *            \\/\n *    Apply authorization response\n *\n * @implements {./amp-access-source.AccessTypeAdapterDef}\n */\nexport class AccessServerAdapter {\n\n  /**\n   * @param {!../../../src/service/ampdoc-impl.AmpDoc} ampdoc\n   * @param {!JsonObject} configJson\n   * @param {!./amp-access-source.AccessTypeAdapterContextDef} context\n   */\n  constructor(ampdoc, configJson, context) {\n    /** @const */\n    this.ampdoc = ampdoc;\n\n    /** @const @private {!./amp-access-source.AccessTypeAdapterContextDef} */\n    this.context_ = context;\n\n    /** @private @const */\n    this.clientAdapter_ = new AccessClientAdapter(ampdoc, configJson, context);\n\n    /** @private @const {!../../../src/service/viewer-impl.Viewer} */\n    this.viewer_ = Services.viewerForDoc(ampdoc);\n\n    /** @const @private {!../../../src/service/xhr-impl.Xhr} */\n    this.xhr_ = Services.xhrFor(ampdoc.win);\n\n    /** @const @private {!../../../src/service/timer-impl.Timer} */\n    this.timer_ = Services.timerFor(ampdoc.win);\n\n    /** @const @private {!../../../src/service/vsync-impl.Vsync} */\n    this.vsync_ = Services.vsyncFor(ampdoc.win);\n\n    const stateElement = ampdoc.getRootNode().querySelector(\n        'meta[name=\"i-amphtml-access-state\"]');\n\n    /** @private @const {?string} */\n    this.serverState_ = stateElement ?\n      stateElement.getAttribute('content') : null;\n\n    const isInExperiment = isExperimentOn(ampdoc.win, 'amp-access-server');\n\n    /** @private @const {boolean} */\n    this.isProxyOrigin_ = isProxyOrigin(ampdoc.win.location) || isInExperiment;\n\n    const serviceUrlOverride = isInExperiment ?\n      this.viewer_.getParam('serverAccessService') : null;\n\n    /** @private @const {string} */\n    this.serviceUrl_ = serviceUrlOverride ||\n        removeFragment(ampdoc.win.location.href);\n  }\n\n  /** @override */\n  getConfig() {\n    return {\n      'client': this.clientAdapter_.getConfig(),\n      'proxy': this.isProxyOrigin_,\n      'serverState': this.serverState_,\n    };\n  }\n\n  /** @override */\n  isAuthorizationEnabled() {\n    return true;\n  }\n\n  /** @override */\n  authorize() {\n    dev().fine(TAG, 'Start authorization with ',\n        this.isProxyOrigin_ ? 'proxy' : 'non-proxy',\n        this.serverState_,\n        this.clientAdapter_.getAuthorizationUrl());\n    if (!this.isProxyOrigin_ || !this.serverState_) {\n      dev().fine(TAG, 'Proceed via client protocol');\n      return this.clientAdapter_.authorize();\n    }\n\n    dev().fine(TAG, 'Proceed via server protocol');\n\n    const varsPromise = this.context_.collectUrlVars(\n        this.clientAdapter_.getAuthorizationUrl(),\n        /* useAuthData */ false);\n    return varsPromise.then(vars => {\n      const requestVars = {};\n      for (const k in vars) {\n        if (vars[k] != null) {\n          requestVars[k] = String(vars[k]);\n        }\n      }\n      const request = dict({\n        'url': removeFragment(this.ampdoc.win.location.href),\n        'state': this.serverState_,\n        'vars': requestVars,\n      });\n      dev().fine(TAG, 'Authorization request: ', this.serviceUrl_, request);\n      // Note that `application/x-www-form-urlencoded` is used to avoid\n      // CORS preflight request.\n      return this.timer_.timeoutPromise(\n          this.clientAdapter_.getAuthorizationTimeout(),\n          fetchDocument(this.ampdoc.win, this.serviceUrl_, {\n            method: 'POST',\n            body: 'request=' + encodeURIComponent(JSON.stringify(request)),\n            headers: dict({\n              'Content-Type': 'application/x-www-form-urlencoded',\n            }),\n            requireAmpResponseSourceOrigin: false,\n          }));\n    }).then(responseDoc => {\n      dev().fine(TAG, 'Authorization response: ', responseDoc);\n      const accessDataString = dev().assert(\n          responseDoc.querySelector('script[id=\"amp-access-data\"]'),\n          'No authorization data available').textContent;\n      const accessData = parseJson(accessDataString);\n      dev().fine(TAG, '- access data: ', accessData);\n\n      return this.replaceSections_(responseDoc).then(() => {\n        return accessData;\n      });\n    });\n  }\n\n  /** @override */\n  isPingbackEnabled() {\n    return this.clientAdapter_.isPingbackEnabled();\n  }\n\n  /** @override */\n  pingback() {\n    return this.clientAdapter_.pingback();\n  }\n\n  /** @override */\n  postAction() {\n    // Nothing to do.\n  }\n\n  /**\n   * @param {!Document} doc\n   * @return {!Promise}\n   */\n  replaceSections_(doc) {\n    const sections = doc.querySelectorAll('[i-amphtml-access-id]');\n    dev().fine(TAG, '- access sections: ', sections);\n    return this.vsync_.mutatePromise(() => {\n      for (let i = 0; i < sections.length; i++) {\n        const section = sections[i];\n        const sectionId = section.getAttribute('i-amphtml-access-id');\n        const target = this.ampdoc.getRootNode().querySelector(\n            `[i-amphtml-access-id=\"${escapeCssSelectorIdent(sectionId)}\"]`);\n        if (!target) {\n          dev().warn(TAG, 'Section not found: ', sectionId);\n          continue;\n        }\n        target.parentElement.replaceChild(\n            this.ampdoc.win.document.importNode(section, /* deep */ true),\n            target);\n      }\n    });\n  }\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {AccessClientAdapter} from './amp-access-client';\nimport {AccessIframeAdapter} from './amp-access-iframe';\nimport {AccessOtherAdapter} from './amp-access-other';\nimport {AccessServerAdapter} from './amp-access-server';\nimport {AccessServerJwtAdapter} from './amp-access-server-jwt';\nimport {AccessVendorAdapter} from './amp-access-vendor';\nimport {Deferred} from '../../../src/utils/promise';\nimport {Services} from '../../../src/services';\nimport {assertHttpsUrl, getSourceOrigin} from '../../../src/url';\nimport {dev, user} from '../../../src/log';\nimport {dict} from '../../../src/utils/object';\nimport {getLoginUrl, openLoginDialog} from './login-dialog';\nimport {getValueForExpr} from '../../../src/json';\nimport {isExperimentOn} from '../../../src/experiments';\nimport {isObject} from '../../../src/types';\nimport {parseQueryString} from '../../../src/url';\nimport {triggerAnalyticsEvent} from '../../../src/analytics';\n\n\n/** @const */\nconst TAG = 'amp-access';\n\n/**\n * The type of access flow.\n * @enum {string}\n */\nexport const AccessType = {\n  CLIENT: 'client',\n  IFRAME: 'iframe',\n  SERVER: 'server',\n  VENDOR: 'vendor',\n  OTHER: 'other',\n};\n\n\n/**\n * AccessSource represents a single source of authentication information for a\n * page. These sources are constructed, unified and attached to the document by\n * AccessService.\n */\nexport class AccessSource {\n  /**\n   * @param {!../../../src/service/ampdoc-impl.AmpDoc} ampdoc\n   * @param {!JsonObject} configJson\n   * @param {function():!Promise<string>} readerIdFn\n   * @param {function(time)} scheduleViewFn\n   * @param {function(!Promise)} onReauthorizeFn\n   * @param {!Element} accessElement\n   */\n  constructor(ampdoc, configJson, readerIdFn, scheduleViewFn,\n    onReauthorizeFn, accessElement) {\n\n    /** @const */\n    this.ampdoc = ampdoc;\n\n    /** @const */\n    this.getReaderId_ = readerIdFn;\n\n    /** @const */\n    this.scheduleView_ = scheduleViewFn;\n\n    /** @const */\n    this.onReauthorize_ = onReauthorizeFn;\n\n    /** @const */\n    this.accessElement_ = accessElement;\n\n    /** @const @private {boolean} */\n    this.isServerEnabled_ = isExperimentOn(ampdoc.win, 'amp-access-server');\n\n    /** @const @private {boolean} */\n    this.isJwtEnabled_ = isExperimentOn(ampdoc.win, 'amp-access-jwt');\n\n    /** @const {!AccessType} */\n    this.type_ = this.buildConfigType_(configJson);\n\n    /** @const {!JsonObject} */\n    this.loginConfig_ = this.buildConfigLoginMap_(configJson);\n\n    /** @const {?JsonObject} */\n    this.authorizationFallbackResponse_ =\n        configJson['authorizationFallbackResponse'];\n\n    /** @const {?string} */\n    this.namespace_ = configJson['namespace'] || null;\n\n    /** @const {!AccessTypeAdapterDef} */\n    this.adapter_ = this.createAdapter_(configJson);\n\n    /** @const @private {!string} */\n    this.pubOrigin_ = getSourceOrigin(ampdoc.win.location);\n\n    /** @const @private {!../../../src/service/url-replacements-impl.UrlReplacements} */\n    this.urlReplacements_ = Services.urlReplacementsForDoc(ampdoc);\n\n    /** @private @const {!../../../src/service/viewer-impl.Viewer} */\n    this.viewer_ = Services.viewerForDoc(ampdoc);\n\n    /** @private @const {function(string):Promise<string>} */\n    this.openLoginDialog_ = openLoginDialog.bind(null, ampdoc);\n\n    /** @private {?JsonObject} */\n    this.authResponse_ = null;\n\n    const deferred = new Deferred();\n\n    /**\n     * This pattern allows AccessService to attach behavior to authorization\n     * before runAuthorization() is actually called.\n     * @const @private {!Promise}\n     */\n    this.firstAuthorizationPromise_ = deferred.promise;\n\n    /** @private {?Function} */\n    this.firstAuthorizationResolver_ = deferred.resolve;\n\n    /** @private {!Object<string, string>} */\n    this.loginUrlMap_ = {};\n\n    /** @private {?Promise} */\n    this.loginPromise_ = null;\n\n    /** @private {!time} */\n    this.loginStartTime_ = 0;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getNamespace() {\n    return this.namespace_;\n  }\n\n  /** @return {!AccessType} */\n  getType() {\n    return this.type_;\n  }\n\n  /** @return {!AccessTypeAdapterDef} */\n  getAdapter() {\n    return this.adapter_;\n  }\n\n  /** @return {?JsonObject} */\n  getAuthResponse() {\n    return this.authResponse_;\n  }\n\n  /**\n   * @param {!JsonObject} configJson\n   * @return {!AccessTypeAdapterDef}\n   * @private\n   */\n  createAdapter_(configJson) {\n    const context = /** @type {!AccessTypeAdapterContextDef} */ ({\n      buildUrl: this.buildUrl.bind(this),\n      collectUrlVars: this.collectUrlVars.bind(this),\n    });\n    const isJwt = (this.isJwtEnabled_ && configJson['jwt'] === true);\n    switch (this.type_) {\n      case AccessType.CLIENT:\n        if (isJwt) {\n          return new AccessServerJwtAdapter(this.ampdoc, configJson, context);\n        }\n        return new AccessClientAdapter(this.ampdoc, configJson, context);\n      case AccessType.IFRAME:\n        return new AccessIframeAdapter(this.ampdoc, configJson, context);\n      case AccessType.SERVER:\n        if (isJwt) {\n          return new AccessServerJwtAdapter(this.ampdoc, configJson, context);\n        }\n        return new AccessServerAdapter(this.ampdoc, configJson, context);\n      case AccessType.VENDOR:\n        return new AccessVendorAdapter(this.ampdoc, configJson);\n      case AccessType.OTHER:\n        return new AccessOtherAdapter(this.ampdoc, configJson, context);\n    }\n    throw dev().createError('Unsupported access type: ', this.type_);\n  }\n\n  /**\n   * @return {!JsonObject}\n   */\n  getAdapterConfig() {\n    return this.adapter_.getConfig();\n  }\n\n\n  /**\n   * @return {!Promise} Returns a promise for the initial authorization.\n   */\n  whenFirstAuthorized() {\n    return this.firstAuthorizationPromise_;\n  }\n\n  /**\n   * @param {!JsonObject} configJson\n   * @return {!AccessType}\n   */\n  buildConfigType_(configJson) {\n    let type = configJson['type'] ?\n      user().assertEnumValue(AccessType, configJson['type'], 'access type') :\n      null;\n    if (!type) {\n      if (configJson['vendor']) {\n        type = AccessType.VENDOR;\n      } else {\n        type = AccessType.CLIENT;\n      }\n    }\n    if (type == AccessType.SERVER && !this.isServerEnabled_) {\n      user().warn(TAG, 'Experiment \"amp-access-server\" is not enabled.');\n      type = AccessType.CLIENT;\n    }\n    if (type == AccessType.CLIENT && this.isServerEnabled_) {\n      user().info(TAG, 'Forcing access type: SERVER');\n      type = AccessType.SERVER;\n    }\n    if (type == AccessType.IFRAME &&\n        !isExperimentOn(this.ampdoc.win, 'amp-access-iframe')) {\n      user().error(TAG, 'Experiment \"amp-access-iframe\" is not enabled.');\n      type = AccessType.CLIENT;\n    }\n    return type;\n  }\n\n  /**\n   * @param {!JsonObject} configJson\n   * @return {!JsonObject}\n   * @private\n   */\n  buildConfigLoginMap_(configJson) {\n    const loginConfig = configJson['login'];\n    const loginMap = dict();\n    if (!loginConfig) {\n      // Ignore: in some cases login config is not necessary.\n    } else if (typeof loginConfig == 'string') {\n      loginMap[''] = loginConfig;\n    } else if (isObject(loginConfig)) {\n      for (const k in loginConfig) {\n        loginMap[k] = loginConfig[k];\n      }\n    } else {\n      user().assert(false,\n          '\"login\" must be either a single URL or a map of URLs');\n    }\n\n    // Check that all URLs are valid.\n    for (const k in loginMap) {\n      assertHttpsUrl(loginMap[k], this.accessElement_);\n    }\n    return loginMap;\n  }\n\n  /**\n   * @return {!Element}\n   * @private\n   */\n  getRootElement_() {\n    const root = this.ampdoc.getRootNode();\n    return dev().assertElement(root.documentElement || root.body || root);\n  }\n\n  /**\n   * @param {string} eventType\n   * @private\n   */\n  analyticsEvent_(eventType) {\n    triggerAnalyticsEvent(this.getRootElement_(), eventType);\n  }\n\n  /**\n   * Do some initial setup.\n   */\n  start() {\n    dev().fine(TAG, 'config:', this.type_, this.loginConfig_,\n        this.adapter_.getConfig());\n\n    // Calculate login URLs right away.\n    this.buildLoginUrls_();\n  }\n\n  /**\n   * @param {string} url\n   * @param {boolean} useAuthData Allows `AUTH(field)` URL var substitutions.\n   * @return {!Promise<string>}\n   */\n  buildUrl(url, useAuthData) {\n    return this.prepareUrlVars_(useAuthData).then(vars => {\n      return this.urlReplacements_.expandUrlAsync(url, vars);\n    });\n  }\n\n  /**\n   * @param {string} url\n   * @param {boolean} useAuthData Allows `AUTH(field)` URL var substitutions.\n   * @return {!Promise<!Object<string, *>>}\n   */\n  collectUrlVars(url, useAuthData) {\n    return this.prepareUrlVars_(useAuthData).then(vars => {\n      return this.urlReplacements_.collectVars(url, vars);\n    });\n  }\n\n  /**\n   * @param {boolean} useAuthData Allows `AUTH(field)` URL var substitutions.\n   * @return {!Promise<!Object<string, *>>}\n   * @private\n   */\n  prepareUrlVars_(useAuthData) {\n    return this.getReaderId_().then(readerId => {\n      const vars = {\n        'READER_ID': readerId,\n        'ACCESS_READER_ID': readerId, // A synonym.\n      };\n      if (useAuthData) {\n        vars['AUTHDATA'] = field => {\n          if (this.authResponse_) {\n            return getValueForExpr(this.authResponse_, field);\n          }\n          return undefined;\n        };\n      }\n      return vars;\n    });\n  }\n\n  /**\n   * Returns the promise that resolves when authorization call has completed.\n   * Note that this promise never fails.\n   * @param {boolean=} opt_disableFallback\n   * @return {!Promise}\n   */\n  runAuthorization(opt_disableFallback) {\n    if (!this.adapter_.isAuthorizationEnabled()) {\n      dev().fine(TAG, 'Ignore authorization for type=', this.type_);\n      this.firstAuthorizationResolver_();\n      return Promise.resolve();\n    }\n\n    const responsePromise =\n      this.adapter_.authorize().catch(error => {\n        this.analyticsEvent_('access-authorization-failed');\n        if (this.authorizationFallbackResponse_ && !opt_disableFallback) {\n          // Use fallback.\n          user().error(TAG, 'Authorization failed: ', error);\n          return this.authorizationFallbackResponse_;\n        } else {\n          // Rethrow the error, it will be processed in the bottom `catch`.\n          throw error;\n        }\n      });\n\n    const promise = responsePromise.then(response => {\n      dev().fine(TAG, 'Authorization response: ', response);\n      this.setAuthResponse_(response);\n      this.buildLoginUrls_();\n      return response;\n    }).catch(error => {\n      user().error(TAG, 'Authorization failed: ', error);\n      this.firstAuthorizationResolver_();\n      throw error;\n    });\n\n    return promise;\n  }\n\n  /**\n   * @param {!JsonObject} authResponse\n   * @private\n   */\n  setAuthResponse_(authResponse) {\n    this.authResponse_ = authResponse;\n    this.firstAuthorizationResolver_();\n  }\n\n  /**\n   * @return {!Promise}\n   */\n  reportViewToServer() {\n    return this.adapter_.pingback().then(() => {\n      dev().fine(TAG, 'Pingback complete');\n      this.analyticsEvent_('access-pingback-sent');\n    }).catch(error => {\n      this.analyticsEvent_('access-pingback-failed');\n      throw user().createError('Pingback failed: ', error);\n    });\n  }\n\n  /**\n   * Expose the getLoginUrl method with the current ampdoc context\n   * @param {string|!Promise<string>} urlOrPromise\n   * @return {!Promise<string>}\n   */\n  getLoginUrl(urlOrPromise) {\n    return getLoginUrl(this.ampdoc, urlOrPromise);\n  }\n\n  /**\n   * Runs the login flow using one of the predefined urls in the amp-access\n   * config\n   *\n   * @param {string} type Type of login defined in the config\n   * @return {!Promise}\n   */\n  loginWithType(type) {\n    user().assert(this.loginConfig_[type],\n        'Login URL is not configured: %s', type);\n    // Login URL should always be available at this time.\n    const loginUrl = user().assert(this.loginUrlMap_[type],\n        'Login URL is not ready: %s', type);\n    return this.login_(loginUrl, type);\n  }\n\n  /**\n   * Runs the login flow opening the given url in the login window.\n   *\n   * @param {string} url\n   * @param {string} eventLabel A label used for the analytics event for this action\n   * @return {!Promise}\n   */\n  loginWithUrl(url, eventLabel = '') {\n    return this.login_(url, eventLabel);\n  }\n\n  /**\n   * Runs the Login flow. Returns a promise that is resolved if login succeeds\n   * or is rejected if login fails. Login flow is performed as an external\n   * 1st party Web dialog. It's goal is to authenticate the reader.\n   *\n   * Type can be either an empty string for a default login or a name of the\n   * login URL.\n   *\n   * @private\n   * @param {string} loginUrl\n   * @param {string} eventLabel A label used for the analytics event for this action\n   * @return {!Promise}\n   */\n  login_(loginUrl, eventLabel) {\n    const now = Date.now();\n\n    // If login is pending, block a new one from starting for 1 second. After\n    // 1 second, however, the new login request will be allowed to proceed,\n    // given that we cannot always determine fully if the previous attempt is\n    // \"stuck\".\n    if (this.loginPromise_ && (now - this.loginStartTime_ < 1000)) {\n      return this.loginPromise_;\n    }\n\n    dev().fine(TAG, 'Start login: ', loginUrl, eventLabel);\n\n    this.loginAnalyticsEvent_(eventLabel, 'started');\n    const dialogPromise = this.openLoginDialog_(loginUrl);\n    const loginPromise = dialogPromise.then(result => {\n      dev().fine(TAG, 'Login dialog completed: ', eventLabel, result);\n      this.loginPromise_ = null;\n      const query = parseQueryString(result);\n      const s = query['success'];\n      const success = (s == 'true' || s == 'yes' || s == '1');\n      if (success) {\n        this.loginAnalyticsEvent_(eventLabel, 'success');\n      } else {\n        this.loginAnalyticsEvent_(eventLabel, 'rejected');\n      }\n      if (success || !s) {\n        // In case of a success, repeat the authorization and pingback flows.\n        // Also do this for an empty response to avoid false negatives.\n        // Pingback is repeated in this case since this could now be a new\n        // \"view\" with a different access profile.\n        this.adapter_.postAction();\n        const authorizationPromise = this.runAuthorization(\n            /* disableFallback */ true);\n        this.onReauthorize_(authorizationPromise);\n        return authorizationPromise.then(() => {\n          this.scheduleView_(/* timeToView */ 0);\n        });\n      }\n    }).catch(reason => {\n      dev().fine(TAG, 'Login dialog failed: ', eventLabel, reason);\n      this.loginAnalyticsEvent_(eventLabel, 'failed');\n      if (this.loginPromise_ == loginPromise) {\n        this.loginPromise_ = null;\n      }\n      throw reason;\n    });\n    this.loginPromise_ = loginPromise;\n    this.loginStartTime_ = now;\n    return this.loginPromise_;\n  }\n\n  /**\n   * @param {string} type\n   * @param {string} event\n   * @private\n   */\n  loginAnalyticsEvent_(type, event) {\n    this.analyticsEvent_(`access-login-${event}`);\n    if (type) {\n      this.analyticsEvent_(`access-login-${type}-${event}`);\n    }\n  }\n\n  /**\n   * @return {?Promise<!Array<!{type: string, url: string}>>}\n   * @private\n   */\n  buildLoginUrls_() {\n    if (Object.keys(this.loginConfig_).length == 0) {\n      return null;\n    }\n    const promises = [];\n    for (const k in this.loginConfig_) {\n      promises.push(\n          this.buildUrl(this.loginConfig_[k], /* useAuthData */ true)\n              .then(url => {\n                this.loginUrlMap_[k] = url;\n                return {type: k, url};\n              }));\n    }\n    return Promise.all(promises);\n  }\n}\n\n/**\n * @typedef {{\n *   buildUrl: function(string, boolean):!Promise<string>,\n *   collectUrlVars: function(string, boolean):\n *       !Promise<!Object<string, *>>\n * }}\n */\nexport let AccessTypeAdapterContextDef;\n\n\n/**\n * @interface\n */\nexport class AccessTypeAdapterDef {\n\n  /**\n   * @return {!JsonObject}\n   */\n  getConfig() {}\n\n  /**\n   * @return {boolean}\n   */\n  isAuthorizationEnabled() {}\n\n  /**\n   * @return {!Promise<!JsonObject>}\n   */\n  authorize() {}\n\n  /**\n   * @return {boolean}\n   */\n  isPingbackEnabled() {}\n\n  /**\n   * @return {!Promise}\n   */\n  pingback() {}\n\n  /**\n   * Called after an action (login/subscribe/etc) is complete.\n   */\n  postAction() {}\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport './access-vendor';\nimport {Deferred} from '../../../src/utils/promise';\nimport {dev, user} from '../../../src/log';\n\n/** @const {string} */\nconst TAG = 'amp-access-vendor';\n\n\n/**\n * The adapter for a vendor implementation that implements `AccessVendor`\n * interface and delivered via a separate extension. The vendor implementation\n * mainly requires two method: `authorize` and `pingback`. The actual\n * extension is registered via `registerVendor` method.\n * @implements {./amp-access-source.AccessTypeAdapterDef}\n */\nexport class AccessVendorAdapter {\n\n  /**\n   * @param {!../../../src/service/ampdoc-impl.AmpDoc} ampdoc\n   * @param {!JsonObject} configJson\n   */\n  constructor(ampdoc, configJson) {\n    /** @const */\n    this.ampdoc = ampdoc;\n\n    /** @const @private {string} */\n    this.vendorName_ = user().assert(configJson['vendor'],\n        '\"vendor\" name must be specified');\n\n    /** @const @private {!JsonObject} */\n    this.vendorConfig_ = configJson[this.vendorName_] || {};\n\n    /** @const @private {boolean} */\n    this.isPingbackEnabled_ = !configJson['noPingback'];\n\n    const deferred = new Deferred();\n\n    /** @const @private {!Promise<!./access-vendor.AccessVendor>} */\n    this.vendorPromise_ = deferred.promise;\n\n    /** @private {?function(!./access-vendor.AccessVendor)} */\n    this.vendorResolve_ = deferred.resolve;\n  }\n\n  /** @return {string} */\n  getVendorName() {\n    return this.vendorName_;\n  }\n\n  /** @override */\n  getConfig() {\n    return this.vendorConfig_;\n  }\n\n  /**\n   * @param {!./access-vendor.AccessVendor} vendor\n   */\n  registerVendor(vendor) {\n    user().assert(this.vendorResolve_, 'Vendor has already been registered');\n    this.vendorResolve_(vendor);\n    this.vendorResolve_ = null;\n  }\n\n  /** @override */\n  isAuthorizationEnabled() {\n    return true;\n  }\n\n  /** @override */\n  authorize() {\n    dev().fine(TAG, 'Start authorization via ', this.vendorName_);\n    return this.vendorPromise_.then(vendor => {\n      return vendor.authorize();\n    });\n  }\n\n  /** @override */\n  isPingbackEnabled() {\n    return this.isPingbackEnabled_;\n  }\n\n  /** @override */\n  pingback() {\n    dev().fine(TAG, 'Pingback via ', this.vendorName_);\n    return this.vendorPromise_.then(vendor => {\n      return vendor.pingback();\n    });\n  }\n\n  /** @override */\n  postAction() {\n    // TODO(dvoytenko): delegate to vendor adapter.\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {AccessSource, AccessType} from './amp-access-source';\nimport {AccessVars} from './access-vars';\nimport {AmpEvents} from '../../../src/amp-events';\nimport {CSS} from '../../../build/amp-access-0.1.css';\nimport {Observable} from '../../../src/observable';\nimport {Services} from '../../../src/services';\nimport {cancellation} from '../../../src/error';\nimport {dev, user} from '../../../src/log';\nimport {dict} from '../../../src/utils/object';\nimport {evaluateAccessExpr} from './access-expr';\nimport {getSourceOrigin} from '../../../src/url';\nimport {getValueForExpr, tryParseJson} from '../../../src/json';\nimport {installStylesForDoc} from '../../../src/style-installer';\nimport {isArray} from '../../../src/types';\nimport {listenOnce} from '../../../src/event-helper';\nimport {startsWith} from '../../../src/string';\nimport {triggerAnalyticsEvent} from '../../../src/analytics';\n\n\n/** @const */\nconst TAG = 'amp-access';\n\n/** @const {number} */\nconst VIEW_TIMEOUT = 2000;\n\n/** @const {string} */\nconst TEMPLATE_PROP = '__AMP_ACCESS__TEMPLATE';\n\n\n/**\n * AccessService implements the complete lifecycle of the AMP Access system.\n * @implements {AccessVars}\n */\nexport class AccessService {\n  /**\n   * @param {!../../../src/service/ampdoc-impl.AmpDoc} ampdoc\n   */\n  constructor(ampdoc) {\n    /** @const */\n    this.ampdoc = ampdoc;\n\n    // Install styles.\n    installStylesForDoc(ampdoc, CSS, () => {}, false, TAG);\n\n    const accessElement = ampdoc.getElementById('amp-access');\n\n    /** @private {boolean} */\n    this.enabled_ = !!accessElement;\n    if (!this.enabled_) {\n      return;\n    }\n\n    /** @const @private {!Element} */\n    this.accessElement_ = dev().assertElement(accessElement);\n\n    /** @const @private {string} */\n    this.pubOrigin_ = getSourceOrigin(ampdoc.win.location);\n\n    /** @const @private {!../../../src/service/timer-impl.Timer} */\n    this.timer_ = Services.timerFor(ampdoc.win);\n\n    /** @private @const {!../../../src/service/vsync-impl.Vsync} */\n    this.vsync_ = Services.vsyncFor(ampdoc.win);\n\n    // TODO(dvoytenko, #3742): This will refer to the ampdoc once AccessService\n    // is migrated to ampdoc as well.\n    /** @private @const {!Promise<!../../../src/service/cid-impl.Cid>} */\n    this.cid_ = Services.cidForDoc(ampdoc);\n\n    /** @private @const {!../../../src/service/viewer-impl.Viewer} */\n    this.viewer_ = Services.viewerForDoc(ampdoc);\n\n    /** @private @const {!../../../src/service/viewport/viewport-impl.Viewport} */\n    this.viewport_ = Services.viewportForDoc(ampdoc);\n\n    /** @private @const {!../../../src/service/template-impl.Templates} */\n    this.templates_ = Services.templatesFor(ampdoc.win);\n\n    /** @private @const {!../../../src/service/resources-impl.Resources} */\n    this.resources_ = Services.resourcesForDoc(ampdoc);\n\n    /** @private @const {?../../../src/service/performance-impl.Performance} */\n    this.performance_ = Services.performanceForOrNull(ampdoc.win);\n\n    /** @private {?Promise<string>} */\n    this.readerIdPromise_ = null;\n\n    /** @const */\n    this.sources_ = this.parseConfig_();\n\n    const promises = this.sources_.map(source => source.whenFirstAuthorized());\n\n    /** @private {boolean} */\n    this.firstAuthorizationsCompleted_ = false;\n\n    /**\n     * Track most recent requests and block reporting and refreshes if\n     * outstanding. Future optimizations may choose to take action as soon\n     * as a single request completes. These complete even on failure.\n     * @private {!Promise}\n     */\n    this.lastAuthorizationPromises_ = Promise.all(promises);\n\n    /** @private {?Promise} */\n    this.reportViewPromise_ = null;\n\n    /** @private @const {!Observable} */\n    this.applyAuthorizationsObservable_ = new Observable();\n\n    // This will fire after the first received authorization, even if\n    // there are multiple sources.\n    this.lastAuthorizationPromises_.then(() => {\n      this.firstAuthorizationsCompleted_ = true;\n      this.analyticsEvent_('access-authorization-received');\n      if (this.performance_) {\n        this.performance_.tick('aaa');\n        this.performance_.tickSinceVisible('aaav');\n        this.performance_.flush();\n      }\n    });\n\n    // Re-authorize newly added sections.\n    ampdoc.getRootNode().addEventListener(AmpEvents.DOM_UPDATE,\n        this.onDomUpdate_.bind(this));\n  }\n\n  /** @override from AccessVars */\n  getAccessReaderId() {\n    if (!this.enabled_) {\n      return null;\n    }\n    return this.getReaderId_();\n  }\n\n  /**\n   * @return {!Promise<string>}\n   * @private\n   */\n  getReaderId_() {\n    if (!this.readerIdPromise_) {\n      // No consent - an essential part of the access system.\n      const consent = Promise.resolve();\n      this.readerIdPromise_ = this.cid_.then(cid => {\n        return cid.get({scope: 'amp-access', createCookieIfNotPresent: true},\n            consent);\n      });\n    }\n    return this.readerIdPromise_;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  areFirstAuthorizationsCompleted() {\n    return this.firstAuthorizationsCompleted_;\n  }\n\n  /**\n   * Registers a callback to be triggered when the document gets (re)authorized.\n   * @param {!Function} callback\n   */\n  onApplyAuthorizations(callback) {\n    this.applyAuthorizationsObservable_.add(callback);\n  }\n\n  /**\n   * @return {!Array<!AccessSource>}\n   * @private\n   */\n  parseConfig_() {\n    const rawContent = tryParseJson(this.accessElement_.textContent, e => {\n      throw user().createError('Failed to parse \"amp-access\" JSON: ' + e);\n    });\n\n    const configMap = {};\n    if (isArray(rawContent)) {\n      const contentArray = rawContent;\n      for (let i = 0; i < contentArray['length']; i++) {\n        const namespace = contentArray[i]['namespace'];\n        user().assert(!!namespace, 'Namespace required');\n        user().assert(!configMap[namespace],\n            'Namespace already used: ' + namespace);\n        configMap[namespace] = contentArray[i];\n      }\n    } else {\n      configMap[rawContent['namespace'] || ''] = rawContent;\n    }\n\n    const readerIdFn = this.getReaderId_.bind(this);\n    const scheduleViewFn = this.scheduleView_.bind(this);\n    const onReauthorizeFn = this.onReauthorize_.bind(this);\n\n    return Object.keys(configMap).map(key =>\n      new AccessSource(this.ampdoc, configMap[key], readerIdFn, scheduleViewFn,\n          onReauthorizeFn, this.accessElement_)\n    );\n  }\n\n  /**\n   * @param {!Event} event\n   * @private\n   */\n  onDomUpdate_(event) {\n    // Only re-authorize sections if authorization already fired, otherwise\n    // just wait and existing callback will cover new sections.\n    if (this.firstAuthorizationsCompleted_) {\n      // Guard against anything else in flight.\n      return this.lastAuthorizationPromises_.then(() => {\n        const target = dev().assertElement(event.target);\n        const responses = this.combinedResponses();\n        this.applyAuthorizationToRoot_(target, responses);\n      });\n    }\n  }\n\n  /**\n   * @param {string} name\n   * @return {!AccessSource}\n   */\n  getVendorSource(name) {\n    for (let i = 0; i < this.sources_.length; i++) {\n      const source = this.sources_[i];\n      if (source.getType() == AccessType.VENDOR) {\n        const vendorAdapter =\n          /** @type {!./amp-access-vendor.AccessVendorAdapter} */ (\n            source.getAdapter()\n          );\n        if (vendorAdapter.getVendorName() == name) {\n          return source;\n        }\n      }\n    }\n    user().assert(false,\n        'Access vendor \"%s\" can only be used for \"type=vendor\", but none found',\n        name);\n    // Should not happen, just to appease type checking.\n    throw new Error();\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isEnabled() {\n    return this.enabled_;\n  }\n\n  /**\n   * @return {!Element}\n   * @private\n   */\n  getRootElement_() {\n    const root = this.ampdoc.getRootNode();\n    return dev().assertElement(root.documentElement || root.body || root);\n  }\n\n  /**\n   * @param {string} eventType\n   * @private\n   */\n  analyticsEvent_(eventType) {\n    triggerAnalyticsEvent(this.getRootElement_(), eventType);\n  }\n\n  /**\n   * @return {!AccessService}\n   * @private\n   * @restricted\n   */\n  start_() {\n    if (!this.enabled_) {\n      user().info(TAG, 'Access is disabled - no \"id=amp-access\" element');\n      return this;\n    }\n    this.startInternal_();\n    return this;\n  }\n\n  /** @private */\n  startInternal_() {\n    // TODO(dvoytenko, #3742): This will refer to the ampdoc once AccessService\n    // is migrated to ampdoc as well.\n    Services.actionServiceForDoc(this.ampdoc).installActionHandler(\n        this.accessElement_, this.handleAction_.bind(this));\n\n    for (let i = 0; i < this.sources_.length; i++) {\n      this.sources_[i].start();\n    }\n\n    // Run authorization as soon as visible.\n    this.runAuthorization_();\n\n    // Wait for the \"view\" signal.\n    this.scheduleView_(VIEW_TIMEOUT);\n\n    // Listen to amp-access broadcasts from other pages.\n    this.listenToBroadcasts_();\n  }\n\n  /** @private */\n  listenToBroadcasts_() {\n    this.viewer_.onBroadcast(message => {\n      if (message['type'] == 'amp-access-reauthorize' &&\n              message['origin'] == this.pubOrigin_) {\n        this.runAuthorization_();\n      }\n    });\n  }\n\n  /**\n   * @param {!Promise} authorization\n   * @private\n   */\n  onReauthorize_(authorization) {\n    this.broadcastReauthorize_();\n    authorization.then(() => {\n      // If nothing has happened, initial render will cover this change.\n      if (this.firstAuthorizationsCompleted_) {\n        // Guard against anything else in flight.\n        this.lastAuthorizationPromises_.then(() => {\n          this.ampdoc.whenReady().then(() => {\n            const root = this.ampdoc.getRootNode();\n            const responses = this.combinedResponses();\n            return this.applyAuthorizationToRoot_(root, responses);\n          });\n        });\n      }\n    });\n  }\n\n  /** @private */\n  broadcastReauthorize_() {\n    this.viewer_.broadcast(dict({\n      'type': 'amp-access-reauthorize',\n      'origin': this.pubOrigin_,\n    }));\n  }\n\n  /**\n   * Returns the promise that resolves when all authorization work has\n   * completed, including authorization endpoint call and UI update.\n   * Note that this promise never fails.\n   * @param {boolean=} opt_disableFallback\n   * @return {!Promise}\n   * @private\n   */\n  runAuthorization_(opt_disableFallback) {\n    this.toggleTopClass_('amp-access-loading', true);\n\n    const authorizations = this.viewer_.whenFirstVisible().then(() => {\n      return Promise.all(\n          this.sources_.map(source => this.runOneAuthorization_(source)));\n    });\n\n    const rendered = authorizations.then(() => {\n      this.toggleTopClass_('amp-access-loading', false);\n      return this.ampdoc.whenReady().then(() => {\n        const root = this.ampdoc.getRootNode();\n        const responses = this.combinedResponses();\n        return this.applyAuthorizationToRoot_(root, responses);\n      });\n    });\n\n    this.lastAuthorizationPromises_ = rendered;\n\n    return rendered;\n  }\n\n  /**\n   * Make a single authorization call.\n   * @param {AccessSource} source\n   * @return {Promise}\n   * @private\n   */\n  runOneAuthorization_(source) {\n    return source.runAuthorization()\n        .catch(() => {\n          this.toggleTopClass_('amp-access-error', true);\n        });\n  }\n\n  /** @override from AccessVars */\n  getAuthdataField(field) {\n    if (!this.enabled_) {\n      return null;\n    }\n    return this.lastAuthorizationPromises_.then(() => {\n      const responses = this.combinedResponses();\n      const v = getValueForExpr(responses, field);\n      return v !== undefined ? v : null;\n    });\n  }\n\n  /**\n   * @param {!Document|!ShadowRoot|!Element} root\n   * @param {!JsonObject} response\n   * @return {!Promise}\n   * @private\n   */\n  applyAuthorizationToRoot_(root, response) {\n    const elements = root.querySelectorAll('[amp-access]');\n    const promises = [];\n    for (let i = 0; i < elements.length; i++) {\n      promises.push(this.applyAuthorizationToElement_(elements[i], response));\n    }\n    return Promise.all(promises).then(() => {\n      this.applyAuthorizationsObservable_.fire();\n    });\n  }\n\n  /**\n   * @param {!Element} element\n   * @param {!JsonObject} response\n   * @return {!Promise}\n   * @private\n   */\n  applyAuthorizationToElement_(element, response) {\n    const expr = element.getAttribute('amp-access');\n    const on = evaluateAccessExpr(expr, response);\n    let renderPromise = null;\n    if (on) {\n      renderPromise = this.renderTemplates_(element, response);\n    }\n    if (renderPromise) {\n      return renderPromise.then(() =>\n        this.applyAuthorizationAttrs_(element, on));\n    }\n    return this.applyAuthorizationAttrs_(element, on);\n  }\n\n  /**\n   * @param {!Element} element\n   * @param {boolean} on\n   * @return {!Promise}\n   * @private\n   */\n  applyAuthorizationAttrs_(element, on) {\n    const wasOn = !element.hasAttribute('amp-access-hide');\n    if (on == wasOn) {\n      return Promise.resolve();\n    }\n    return this.resources_.mutateElement(element, () => {\n      if (on) {\n        element.removeAttribute('amp-access-hide');\n      } else {\n        element.setAttribute('amp-access-hide', '');\n      }\n    });\n  }\n\n  /**\n   * Discovers and renders templates.\n   * @param {!Element} element\n   * @param {!JsonObject} response\n   * @return {?Promise}\n   * @private\n   */\n  renderTemplates_(element, response) {\n    const promises = [];\n    const templateElements = element.querySelectorAll('[amp-access-template]');\n    if (templateElements.length > 0) {\n      for (let i = 0; i < templateElements.length; i++) {\n        const p = this.renderTemplate_(element, templateElements[i], response)\n            .catch(error => {\n              // Ignore the error.\n              dev().error(TAG, 'Template failed: ', error,\n                  templateElements[i], element);\n            });\n        promises.push(p);\n      }\n    }\n    return promises.length > 0 ? Promise.all(promises) : null;\n  }\n\n  /**\n   * @param {!Element} element\n   * @param {!Element} templateOrPrev\n   * @param {!JsonObject} response\n   * @return {!Promise}\n   * @private\n   */\n  renderTemplate_(element, templateOrPrev, response) {\n    let template = templateOrPrev;\n    let prev = null;\n    if (template.tagName != 'TEMPLATE') {\n      prev = template;\n      template = prev[TEMPLATE_PROP];\n    }\n    if (!template) {\n      return Promise.reject(new Error('template not found'));\n    }\n\n    const rendered = this.templates_.renderTemplate(template, response);\n    return rendered.then(element => {\n      return this.vsync_.mutatePromise(() => {\n        element.setAttribute('amp-access-template', '');\n        element[TEMPLATE_PROP] = template;\n        if (template.parentElement) {\n          template.parentElement.replaceChild(element, template);\n        } else if (prev && prev.parentElement) {\n          prev.parentElement.replaceChild(element, prev);\n        }\n      });\n    });\n  }\n\n  /**\n   * @param {time} timeToView\n   * @private\n   */\n  scheduleView_(timeToView) {\n    if (!this.sources_.some(s => s.getAdapter().isPingbackEnabled())) {\n      return;\n    }\n    this.reportViewPromise_ = null;\n    this.ampdoc.whenReady().then(() => {\n      if (this.viewer_.isVisible()) {\n        this.reportWhenViewed_(timeToView);\n      }\n      this.viewer_.onVisibilityChanged(() => {\n        if (this.viewer_.isVisible()) {\n          this.reportWhenViewed_(timeToView);\n        }\n      });\n    });\n  }\n\n  /**\n   * @param {time} timeToView\n   * @return {!Promise}\n   * @private\n   */\n  reportWhenViewed_(timeToView) {\n    if (this.reportViewPromise_) {\n      return this.reportViewPromise_;\n    }\n    dev().fine(TAG, 'start view monitoring');\n    this.reportViewPromise_ = this.whenViewed_(timeToView)\n        .then(() => {\n          // Wait for the most recent authorization flow to complete.\n          return this.lastAuthorizationPromises_;\n        })\n        .then(() => {\n          // Report the analytics event.\n          this.analyticsEvent_('access-viewed');\n          return this.reportViewToServer_();\n        })\n        .catch(reason => {\n          // Ignore - view has been canceled.\n          dev().fine(TAG, 'view cancelled:', reason);\n          this.reportViewPromise_ = null;\n          throw reason;\n        });\n\n    // Support pre-rendering with metering by possibly hiding content\n    // after view is recorded.\n    this.reportViewPromise_.then(this.broadcastReauthorize_.bind(this));\n\n    return this.reportViewPromise_;\n  }\n\n  /**\n   * The promise will be resolved when a view of this document has occurred. It\n   * will be rejected if the current impression should not be counted as a view.\n   * @param {time} timeToView Pass the value of 0 when this method is called\n   *   as the result of the user action.\n   * @return {!Promise}\n   * @private\n   */\n  whenViewed_(timeToView) {\n    if (timeToView == 0) {\n      // Immediate view has been registered. This will happen when this method\n      // is called as the result of the user action.\n      return Promise.resolve();\n    }\n\n    // Viewing kick off: document is visible.\n    const unlistenSet = [];\n    return new Promise((resolve, reject) => {\n      // 1. Document becomes invisible again: cancel.\n      unlistenSet.push(this.viewer_.onVisibilityChanged(() => {\n        if (!this.viewer_.isVisible()) {\n          reject(cancellation());\n        }\n      }));\n\n      // 2. After a few seconds: register a view.\n      const timeoutId = this.timer_.delay(resolve, timeToView);\n      unlistenSet.push(() => this.timer_.cancel(timeoutId));\n\n      // 3. If scrolled: register a view.\n      unlistenSet.push(this.viewport_.onScroll(resolve));\n\n      // 4. Tap: register a view.\n      unlistenSet.push(listenOnce(this.ampdoc.getRootNode(),\n          'click', resolve));\n    }).then(() => {\n      unlistenSet.forEach(unlisten => unlisten());\n    }, reason => {\n      unlistenSet.forEach(unlisten => unlisten());\n      throw reason;\n    });\n  }\n\n  /**\n   * @return {!Promise}\n   * @private\n   */\n  reportViewToServer_() {\n    const promises = [];\n    for (let i = 0; i < this.sources_.length; i++) {\n      if (this.sources_[i].getAdapter().isPingbackEnabled()) {\n        promises.push(this.sources_[i].reportViewToServer());\n      }\n    }\n    return Promise.all(promises);\n  }\n\n  /**\n   * @param {string} className\n   * @param {boolean} on\n   * @private\n   */\n  toggleTopClass_(className, on) {\n    this.vsync_.mutate(() => {\n      this.getRootElement_().classList.toggle(className, on);\n    });\n\n  }\n\n  /**\n   * @param {!../../../src/service/action-impl.ActionInvocation} invocation\n   * @return {?Promise}\n   * @private\n   */\n  handleAction_(invocation) {\n    if (invocation.method == 'login') {\n      if (invocation.event) {\n        invocation.event.preventDefault();\n      }\n      this.loginWithType_('');\n    } else if (startsWith(invocation.method, 'login-')) {\n      if (invocation.event) {\n        invocation.event.preventDefault();\n      }\n      this.loginWithType_(invocation.method.substring('login-'.length));\n    }\n    return null;\n  }\n\n  /**\n   * Expose the underlying AccessSource for use by laterpay.\n   * @param {number} index\n   * @return {!AccessSource}\n   */\n  getSource(index) {\n    user().assert(index >= 0 && index < this.sources_.length,\n        'Invalid index: %d', index);\n    return this.sources_[index];\n  }\n\n  /**\n   * Runs the login flow using one of the predefined urls in the amp-access\n   * config\n   *\n   * @private\n   * @param {string} type Type of login defined in the config\n   * @return {!Promise}\n   */\n  loginWithType_(type) {\n    const splitPoint = type.indexOf('-');\n    const singleSource = this.sources_.length == 1;\n\n    // Try to find a matching namespace\n    const namespace = (splitPoint > -1) ? type.substring(0, splitPoint) : type;\n    const match = this.sources_.filter(s => s.getNamespace() == namespace);\n    if (match.length) {\n      // Matching namespace found\n      const remaining = (splitPoint > -1) ? type.substring(splitPoint + 1) : '';\n      return match[0].loginWithType(remaining);\n    }\n\n    // If there is only one source, process as standalone\n    user().assert(singleSource, 'Login must match namespace: %s', namespace);\n    return this.sources_[0].loginWithType(type);\n  }\n\n  /**\n   * Either combine namespaced responses or just return the single one.\n   *\n   * @return {!JsonObject}\n   */\n  combinedResponses() {\n    if (this.sources_.length == 1 && !this.sources_[0].getNamespace()) {\n      return /** @type {!JsonObject} */ (this.sources_[0].getAuthResponse() ||\n        {});\n    }\n\n    const combined = /** @type {!JsonObject} */ ({});\n    this.sources_.forEach(source =>\n      combined[source.getNamespace()] = source.getAuthResponse());\n    return combined;\n  }\n}\n\n\n// Register the extension services.\nAMP.extension(TAG, '0.1', function(AMP) {\n  AMP.registerServiceForDoc('access', function(ampdoc) {\n    return new AccessService(ampdoc).start_();\n  });\n});\n\n\n/** @package Visible for testing only. */\nexport function getAccessVarsClassForTesting() {\n  return AccessVars;\n}\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview The messaging protocol is intentionally kept close to\n * Web Activities (https://github.com/google/web-activities). We may switch\n * the exact WA version at some in the future.\n *\n * Notice! As much as possible, keep this module dependency-free.\n */\n\nimport {Deferred} from '../../../../src/utils/promise';\n\nconst SENTINEL = '__AMP__';\n\n\nexport class Messenger {\n\n  /**\n   * @param {!Window} win\n   * @param {!Window|function():?Window} targetOrCallback\n   * @param {?string} targetOrigin\n   */\n  constructor(win, targetOrCallback, targetOrigin) {\n    /** @private @const {!Window} */\n    this.win_ = win;\n    /** @private @const {!Window|function():?Window} */\n    this.targetOrCallback_ = targetOrCallback;\n\n    /**\n     * May start as unknown (`null`) until received in the first message.\n     * @private {?string}\n     */\n    this.targetOrigin_ = targetOrigin;\n\n    /** @private {?Window} */\n    this.target_ = null;\n\n    /** @private {?function(string, ?Object):*} */\n    this.onCommand_ = null;\n\n    /** @private @const */\n    this.boundHandleEvent_ = this.handleEvent_.bind(this);\n\n    /** @private {number} */\n    this.requestId_ = 0;\n\n    /**\n     * @private\n     * {!Object<string, {resolve: function(*), promise: !Promise<*>}>}\n     */\n    this.waiting_ = {};\n  }\n\n  /**\n   * Connect the port to the host or vice versa.\n   * @param {function(string, ?Object):*} onCommand\n   */\n  connect(onCommand) {\n    if (this.onCommand_) {\n      throw new Error('already connected');\n    }\n    this.onCommand_ = onCommand;\n    this.win_.addEventListener('message', this.boundHandleEvent_);\n  }\n\n  /**\n   * Disconnect messenger.\n   */\n  disconnect() {\n    if (this.onCommand_) {\n      this.onCommand_ = null;\n      this.win_.removeEventListener('message', this.boundHandleEvent_);\n    }\n  }\n\n  /**\n   * Returns whether the messenger has been connected already.\n   * @return {boolean}\n   */\n  isConnected() {\n    return this.targetOrigin_ != null;\n  }\n\n  /**\n   * Returns the messaging target. Only available when connection has been\n   * establihsed.\n   * @return {!Window}\n   */\n  getTarget() {\n    const target = this.getOptionalTarget_();\n    if (!target) {\n      throw new Error('not connected');\n    }\n    return target;\n  }\n\n  /**\n   * @return {?Window}\n   * @private\n   */\n  getOptionalTarget_() {\n    if (this.onCommand_ && !this.target_) {\n      if (typeof this.targetOrCallback_ == 'function') {\n        this.target_ = this.targetOrCallback_();\n      } else {\n        this.target_ = /** @type {!Window} */ (this.targetOrCallback_);\n      }\n    }\n    return this.target_;\n  }\n\n  /**\n   * Returns the messaging origin. Only available when connection has been\n   * establihsed.\n   * @return {string}\n   */\n  getTargetOrigin() {\n    if (this.targetOrigin_ == null) {\n      throw new Error('not connected');\n    }\n    return this.targetOrigin_;\n  }\n\n  /**\n   * Sends the specified command from the port to the host or vice versa.\n   * @param {string} cmd\n   * @param {?Object=} opt_payload\n   */\n  sendCommand(cmd, opt_payload) {\n    this.sendCommand_(/* rsvpId */ undefined, cmd, opt_payload);\n  }\n\n  /**\n   * Sends the specified command from the port to the host or vice versa.\n   * @param {string} cmd\n   * @param {?Object=} opt_payload\n   * @return {!Promise}\n   */\n  sendCommandRsvp(cmd, opt_payload) {\n    const rsvpId = String(++this.requestId_);\n    const deferred = new Deferred();\n    const {promise, resolve: resolver} = deferred;\n\n\n    this.waiting_[rsvpId] = {\n      promise,\n      resolver,\n    };\n    this.sendCommand_(rsvpId, cmd, opt_payload);\n    return promise;\n  }\n\n  /**\n   * @param {string|undefined} rsvpId\n   * @param {string} cmd\n   * @param {?Object=} opt_payload\n   * @private\n   */\n  sendCommand_(rsvpId, cmd, opt_payload) {\n    const target = this.getTarget();\n    // Only \"connect\" command is allowed to use `targetOrigin == '*'`\n    const targetOrigin =\n        cmd == 'connect' ?\n          (this.targetOrigin_ != null ? this.targetOrigin_ : '*') :\n          this.getTargetOrigin();\n    target./*OK*/postMessage(/** @type {!JsonObject} */ ({\n      'sentinel': SENTINEL,\n      '_rsvp': rsvpId,\n      'cmd': cmd,\n      'payload': opt_payload || null,\n    }), targetOrigin);\n  }\n\n  /**\n   * @param {!Event} e\n   * @private\n   */\n  handleEvent_(e) {\n    const event = /** @type {!MessageEvent} */ (e);\n    const {data} = event;\n    if (!data || data['sentinel'] != SENTINEL) {\n      return;\n    }\n    const origin = /** @type {string} */ (event.origin);\n    const cmd = data['cmd'];\n    const payload = data['payload'] || null;\n    if (this.targetOrigin_ == null && cmd == 'start') {\n      this.targetOrigin_ = origin;\n    }\n    if (this.targetOrigin_ == null && event.source) {\n      if (this.getOptionalTarget_() == event.source) {\n        this.targetOrigin_ = origin;\n      }\n    }\n    // Notice that event.source may differ from the target because of\n    // friendly-iframe intermediaries.\n    if (origin != this.targetOrigin_) {\n      return;\n    }\n    const rsvpId = data['_rsvp'];\n    const rsvp = !!rsvpId && cmd != 'rsvp';\n    const result = this.handleCommand_(rsvpId, cmd, payload);\n    if (rsvp) {\n      Promise.resolve(result).then(result => {\n        this.sendCommand_(rsvpId, 'rsvp', {\n          'result': result,\n        });\n      }, reason => {\n        this.sendCommand_(rsvpId, 'rsvp', {\n          'error': String(reason),\n        });\n      });\n    }\n  }\n\n  /**\n   * @param {string|undefined} rsvpId\n   * @param {string} cmd\n   * @param {?Object} payload\n   * @return {*}\n   * @private\n   */\n  handleCommand_(rsvpId, cmd, payload) {\n    if (cmd == 'rsvp') {\n      const waiting = rsvpId && this.waiting_[rsvpId];\n      if (waiting) {\n        if ('error' in payload) {\n          waiting.resolver(Promise.reject(new Error(payload['error'])));\n        } else {\n          waiting.resolver(payload['result']);\n        }\n        delete this.waiting_[rsvpId];\n      }\n      return;\n    }\n    return this.onCommand_(cmd, payload);\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  base64UrlDecodeToBytes,\n} from '../../../src/utils/base64';\nimport {pemToBytes} from '../../../src/utils/pem';\nimport {stringToBytes, utf8Decode} from '../../../src/utils/bytes';\nimport {tryParseJson} from '../../../src/json';\n\n\n/**\n * @typedef {{\n *   header: (?JsonObject|undefined),\n *   payload: (?JsonObject|undefined),\n *   verifiable: string,\n *   sig: string,\n * }}\n */\nlet JwtTokenInternalDef;\n\n\n/**\n * Provides helper methods to decode and verify JWT tokens.\n */\nexport class JwtHelper {\n\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n\n    /** @const {!Window} */\n    this.win = win;\n\n    /**\n     * Might be `null` if the platform does not support Crypto Subtle.\n     * @const @private {?webCrypto.SubtleCrypto}\n     */\n    this.subtle_ = (win.crypto &&\n        (win.crypto.subtle || win.crypto.webkitSubtle)) || null;\n  }\n\n  /**\n   * Decodes JWT token and returns its payload.\n   * @param {string} encodedToken\n   * @return {?JsonObject|undefined}\n   */\n  decode(encodedToken) {\n    return this.decodeInternal_(encodedToken).payload;\n  }\n\n  /**\n   * Whether the signature-verification supported on this platform.\n   * @return {boolean}\n   */\n  isVerificationSupported() {\n    return !!this.subtle_;\n  }\n\n  /**\n   * Decodes HWT token and verifies its signature.\n   * @param {string} encodedToken\n   * @param {!Promise<string>} pemPromise\n   * @return {!Promise<!JsonObject>}\n   */\n  decodeAndVerify(encodedToken, pemPromise) {\n    if (!this.subtle_) {\n      throw new Error('Crypto is not supported on this platform');\n    }\n    const decodedPromise = new Promise(\n        resolve => resolve(this.decodeInternal_(encodedToken)));\n    return decodedPromise.then(decoded => {\n      const alg = decoded.header['alg'];\n      if (!alg || alg != 'RS256') {\n        // TODO(dvoytenko@): Support other RS* algos.\n        throw new Error('Only alg=RS256 is supported');\n      }\n      return this.importKey_(pemPromise).then(key => {\n        const sig = base64UrlDecodeToBytes(decoded.sig);\n        return this.subtle_.verify(\n            /* options */ {name: 'RSASSA-PKCS1-v1_5'},\n            key,\n            sig,\n            stringToBytes(decoded.verifiable)\n        );\n      }).then(isValid => {\n        if (isValid) {\n          return decoded.payload;\n        }\n        throw new Error('Signature verification failed');\n      });\n    });\n  }\n\n  /**\n   * @param {string} encodedToken\n   * @return {!JwtTokenInternalDef}\n   * @private\n   */\n  decodeInternal_(encodedToken) {\n    /**\n     * See https://jwt.io/introduction/\n     */\n    function invalidToken() {\n      throw new Error(`Invalid token: \"${encodedToken}\"`);\n    }\n\n    // Encoded token has three parts: header.payload.sig\n    // Note! The padding is not allowed by JWT spec:\n    // http://self-issued.info/docs/draft-goland-json-web-token-00.html#rfc.section.5\n    const parts = encodedToken.split('.');\n    if (parts.length != 3) {\n      invalidToken();\n    }\n    const headerUtf8Bytes = base64UrlDecodeToBytes(parts[0]);\n    const payloadUtf8Bytes = base64UrlDecodeToBytes(parts[1]);\n    return {\n      header: tryParseJson(utf8Decode(headerUtf8Bytes), invalidToken),\n      payload: tryParseJson(utf8Decode(payloadUtf8Bytes), invalidToken),\n      verifiable: `${parts[0]}.${parts[1]}`,\n      sig: parts[2],\n    };\n  }\n\n  /**\n   * @param {!Promise<string>} pemPromise\n   * @return {!Promise<!webCrypto.CryptoKey>}\n   */\n  importKey_(pemPromise) {\n    return pemPromise.then(pem => {\n      return this.subtle_.importKey(\n          /* format */ 'spki',\n          pemToBytes(pem),\n          /* algo options */ {\n            name: 'RSASSA-PKCS1-v1_5',\n            hash: {name: 'SHA-256'},\n          },\n          /* extractable */ false,\n          /* uses */ ['verify']);\n    });\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Services} from '../../../src/services';\nimport {dev, user} from '../../../src/log';\nimport {dict} from '../../../src/utils/object';\nimport {getData, listen} from '../../../src/event-helper';\nimport {getMode} from '../../../src/mode';\nimport {openWindowDialog} from '../../../src/dom';\nimport {parseUrlDeprecated} from '../../../src/url';\nimport {urls} from '../../../src/config';\n\n/** @const */\nconst TAG = 'amp-access-login';\n\n/** @const {!RegExp} */\nconst RETURN_URL_REGEX = new RegExp('RETURN_URL');\n\n/**\n * @param {!../../../src/service/ampdoc-impl.AmpDoc} ampdoc\n * @param {string|!Promise<string>} urlOrPromise\n * @return {!WebLoginDialog|!ViewerLoginDialog}\n */\nexport function createLoginDialog(ampdoc, urlOrPromise) {\n  const viewer = Services.viewerForDoc(ampdoc);\n  const overrideDialog = parseInt(viewer.getParam('dialog'), 10);\n  if (overrideDialog) {\n    return new ViewerLoginDialog(viewer, urlOrPromise);\n  }\n  return new WebLoginDialog(ampdoc.win, viewer, urlOrPromise);\n}\n\n\n/**\n * Opens the login dialog for the specified URL. If the login dialog succeeds,\n * the returned promised is resolved with the dialog's response. Otherwise, the\n * returned promise is rejected.\n * @param {!../../../src/service/ampdoc-impl.AmpDoc} ampdoc\n * @param {string|!Promise<string>} urlOrPromise\n * @return {!Promise<string>}\n */\nexport function openLoginDialog(ampdoc, urlOrPromise) {\n  return createLoginDialog(ampdoc, urlOrPromise).open();\n}\n\n/**\n * Gets the final login URL with all the performed replacements.\n * @param {!../../../src/service/ampdoc-impl.AmpDoc} ampdoc\n * @param {string|!Promise<string>} urlOrPromise\n * @return {!Promise<string>}\n */\nexport function getLoginUrl(ampdoc, urlOrPromise) {\n  return createLoginDialog(ampdoc, urlOrPromise).getLoginUrl();\n}\n\n\n/**\n * The implementation of the Login Dialog delegated via Viewer.\n */\nclass ViewerLoginDialog {\n  /**\n   * @param {!../../../src/service/viewer-impl.Viewer} viewer\n   * @param {string|!Promise<string>} urlOrPromise\n   */\n  constructor(viewer, urlOrPromise) {\n    /** @const {!../../../src/service/viewer-impl.Viewer} */\n    this.viewer = viewer;\n\n    /** @const {string|!Promise<string>} */\n    this.urlOrPromise = urlOrPromise;\n  }\n\n  /**\n  * @return {!Promise<string>}\n  */\n  getLoginUrl() {\n    let urlPromise;\n    if (typeof this.urlOrPromise == 'string') {\n      urlPromise = Promise.resolve(this.urlOrPromise);\n    } else {\n      urlPromise = this.urlOrPromise;\n    }\n    return urlPromise.then(url => {\n      return buildLoginUrl(url, 'RETURN_URL');\n    });\n  }\n\n\n  /**\n   * Opens the dialog. Returns the promise that will yield with the dialog's\n   * result or will be rejected if dialog fails. The dialog's result is\n   * typically a hash string from the return URL.\n   * @return {!Promise<string>}\n   */\n  open() {\n    return this.getLoginUrl().then(loginUrl => {\n      dev().fine(TAG, 'Open viewer dialog: ', loginUrl);\n      return this.viewer.sendMessageAwaitResponse('openDialog', dict({\n        'url': loginUrl,\n      }));\n    });\n  }\n\n}\n\n\n/**\n * Web-based implementation of the Login Dialog.\n * @visibleForTesting\n */\nexport class WebLoginDialog {\n  /**\n   * @param {!Window} win\n   * @param {!../../../src/service/viewer-impl.Viewer} viewer\n   * @param {string|!Promise<string>} urlOrPromise\n   */\n  constructor(win, viewer, urlOrPromise) {\n    /** @const {!Window} */\n    this.win = win;\n\n    /** @const {!../../../src/service/viewer-impl.Viewer} */\n    this.viewer = viewer;\n\n    /** @const {string|!Promise<string>} */\n    this.urlOrPromise = urlOrPromise;\n\n    /** @private {?function(?string)} */\n    this.resolve_ = null;\n\n    /** @private {?function(*)} */\n    this.reject_ = null;\n\n    /** @private {?Window} */\n    this.dialog_ = null;\n\n    /** @private {?Promise} */\n    this.dialogReadyPromise_ = null;\n\n    /** @private {?number} */\n    this.heartbeatInterval_ = null;\n\n    /** @private {?UnlistenDef} */\n    this.messageUnlisten_ = null;\n  }\n\n  /**\n   * Opens the dialog. Returns the promise that will yield with the dialog's\n   * result or will be rejected if dialog fails.\n   * @return {!Promise<string>}\n   */\n  open() {\n    user().assert(!this.resolve_, 'Dialog already opened');\n    return new Promise((resolve, reject) => {\n      this.resolve_ = resolve;\n      this.reject_ = reject;\n      // Must always be called synchronously.\n      this.openInternal_();\n    }).then(result => {\n      this.cleanup_();\n      return result;\n    }, error => {\n      this.cleanup_();\n      throw error;\n    });\n  }\n\n  /** @private */\n  cleanup_() {\n    this.resolve_ = null;\n    this.reject_ = null;\n\n    if (this.dialog_) {\n      try {\n        this.dialog_.close();\n      } catch (e) {\n        // Ignore.\n      }\n      this.dialog_ = null;\n    }\n\n    if (this.heartbeatInterval_) {\n      this.win.clearInterval(this.heartbeatInterval_);\n      this.heartbeatInterval_ = null;\n    }\n\n    if (this.messageUnlisten_) {\n      this.messageUnlisten_();\n      this.messageUnlisten_ = null;\n    }\n  }\n\n  /**\n  * @return {!Promise<string>}\n  */\n  getLoginUrl() {\n    let urlPromise;\n    if (typeof this.urlOrPromise == 'string') {\n      urlPromise = Promise.resolve(this.urlOrPromise);\n    } else {\n      urlPromise = this.urlOrPromise;\n    }\n    return urlPromise.then(url => {\n      return buildLoginUrl(url, this.getReturnUrl_());\n    });\n  }\n\n  /** @private */\n  openInternal_() {\n    const {screen} = this.win;\n    const w = Math.floor(Math.min(700, screen.width * 0.9));\n    const h = Math.floor(Math.min(450, screen.height * 0.9));\n    const x = Math.floor((screen.width - w) / 2);\n    const y = Math.floor((screen.height - h) / 2);\n    const sizing = `height=${h},width=${w},left=${x},top=${y}`;\n    const options = `${sizing},resizable=yes,scrollbars=yes`;\n    const returnUrl = this.getReturnUrl_();\n\n    this.dialogReadyPromise_ = null;\n    if (typeof this.urlOrPromise == 'string') {\n      const loginUrl = buildLoginUrl(this.urlOrPromise, returnUrl);\n      dev().fine(TAG, 'Open dialog: ', loginUrl, returnUrl, w, h, x, y);\n      this.dialog_ = openWindowDialog(this.win, loginUrl, '_blank', options);\n      if (this.dialog_) {\n        this.dialogReadyPromise_ = Promise.resolve();\n      }\n    } else {\n      dev().fine(TAG, 'Open dialog: ', 'about:blank', returnUrl, w, h, x, y);\n      this.dialog_ = openWindowDialog(this.win, '', '_blank', options);\n      if (this.dialog_) {\n        this.dialogReadyPromise_ = this.urlOrPromise.then(url => {\n          const loginUrl = buildLoginUrl(url, returnUrl);\n          dev().fine(TAG, 'Set dialog url: ', loginUrl);\n          this.dialog_.location.replace(loginUrl);\n        }, error => {\n          throw new Error('failed to resolve url: ' + error);\n        });\n      }\n    }\n\n    if (this.dialogReadyPromise_) {\n      this.dialogReadyPromise_.then(() => {\n        this.setupDialog_(returnUrl);\n      }, error => {\n        this.loginDone_(/* result */ null, error);\n      });\n    } else {\n      this.loginDone_(/* result */ null, new Error('failed to open dialog'));\n    }\n  }\n\n  /**\n   * @param {string} returnUrl\n   * @private\n   */\n  setupDialog_(returnUrl) {\n    const returnOrigin = parseUrlDeprecated(returnUrl).origin;\n\n    this.heartbeatInterval_ = this.win.setInterval(() => {\n      if (this.dialog_.closed) {\n        this.win.clearInterval(this.heartbeatInterval_);\n        this.heartbeatInterval_ = null;\n        // Give a chance for the result to arrive, but otherwise consider the\n        // responce to be empty.\n        this.win.setTimeout(() => {\n          this.loginDone_('');\n        }, 3000);\n      }\n    }, 500);\n\n    this.messageUnlisten_ = listen(this.win, 'message', e => {\n      dev().fine(TAG, 'MESSAGE:', e);\n      if (e.origin != returnOrigin) {\n        return;\n      }\n      if (!getData(e) || getData(e)['sentinel'] != 'amp') {\n        return;\n      }\n      dev().fine(TAG, 'Received message from dialog: ', getData(e));\n      if (getData(e)['type'] == 'result') {\n        if (this.dialog_) {\n          this.dialog_./*OK*/postMessage(dict({\n            'sentinel': 'amp',\n            'type': 'result-ack',\n          }), returnOrigin);\n        }\n        this.loginDone_(getData(e)['result']);\n      }\n    });\n  }\n\n  /**\n   * @param {?string} result\n   * @param {*=} opt_error\n   * @private\n   */\n  loginDone_(result, opt_error) {\n    if (!this.resolve_) {\n      return;\n    }\n    dev().fine(TAG, 'Login done: ', result, opt_error);\n    if (opt_error) {\n      this.reject_(opt_error);\n    } else {\n      this.resolve_(result);\n    }\n    this.cleanup_();\n  }\n\n  /**\n   * @return {string}\n   * @private\n   */\n  getReturnUrl_() {\n    const currentUrl = this.viewer.getResolvedViewerUrl();\n    let returnUrl;\n    if (getMode().localDev) {\n      const loc = this.win.location;\n      returnUrl = loc.protocol + '//' + loc.host +\n          '/extensions/amp-access/0.1/amp-login-done.html';\n    } else {\n      returnUrl = `${urls.cdn}/v0/amp-login-done-0.1.html`;\n    }\n    return returnUrl + '?url=' + encodeURIComponent(currentUrl);\n  }\n}\n\n\n/**\n * @param {string} url\n * @param {string} returnUrl\n * @return {string}\n * @private\n */\nfunction buildLoginUrl(url, returnUrl) {\n  // RETURN_URL has to arrive here unreplaced by UrlReplacements for two\n  // reasons: (1) sync replacement and (2) if we need to propagate this\n  // replacement to the viewer.\n  if (RETURN_URL_REGEX.test(url)) {\n    return url.replace(RETURN_URL_REGEX, encodeURIComponent(returnUrl));\n  }\n  return url +\n      (url.indexOf('?') == -1 ? '?' : '&') +\n      'return=' + encodeURIComponent(returnUrl);\n}\n","/*!\n\nCopyright (C) 2014-2016 by Andrea Giammarchi - @WebReflection\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n*/\n// global window Object\n// optional polyfill info\n//    'auto' used by default, everything is feature detected\n//    'force' use the polyfill even if not fully needed\nfunction installCustomElements(window, polyfill) {'use strict';\n\n  // DO NOT USE THIS FILE DIRECTLY, IT WON'T WORK\n  // THIS IS A PROJECT BASED ON A BUILD SYSTEM\n  // THIS FILE IS JUST WRAPPED UP RESULTING IN\n  // build/document-register-element.node.js\n\n  var\n    document = window.document,\n    Object = window.Object\n  ;\n\n  var htmlClass = (function (info) {\n    // (C) Andrea Giammarchi - @WebReflection - MIT Style\n    var\n      catchClass = /^[A-Z]+[a-z]/,\n      filterBy = function (re) {\n        var arr = [], tag;\n        for (tag in register) {\n          if (re.test(tag)) arr.push(tag);\n        }\n        return arr;\n      },\n      add = function (Class, tag) {\n        tag = tag.toLowerCase();\n        if (!(tag in register)) {\n          register[Class] = (register[Class] || []).concat(tag);\n          register[tag] = (register[tag.toUpperCase()] = Class);\n        }\n      },\n      register = (Object.create || Object)(null),\n      htmlClass = {},\n      i, section, tags, Class\n    ;\n    for (section in info) {\n      for (Class in info[section]) {\n        tags = info[section][Class];\n        register[Class] = tags;\n        for (i = 0; i < tags.length; i++) {\n          register[tags[i].toLowerCase()] =\n          register[tags[i].toUpperCase()] = Class;\n        }\n      }\n    }\n    htmlClass.get = function get(tagOrClass) {\n      return typeof tagOrClass === 'string' ?\n        (register[tagOrClass] || (catchClass.test(tagOrClass) ? [] : '')) :\n        filterBy(tagOrClass);\n    };\n    htmlClass.set = function set(tag, Class) {\n      return (catchClass.test(tag) ?\n        add(tag, Class) :\n        add(Class, tag)\n      ), htmlClass;\n    };\n    return htmlClass;\n  }({\n    \"collections\": {\n      \"HTMLAllCollection\": [\n        \"all\"\n      ],\n      \"HTMLCollection\": [\n        \"forms\"\n      ],\n      \"HTMLFormControlsCollection\": [\n        \"elements\"\n      ],\n      \"HTMLOptionsCollection\": [\n        \"options\"\n      ]\n    },\n    \"elements\": {\n      \"Element\": [\n        \"element\"\n      ],\n      \"HTMLAnchorElement\": [\n        \"a\"\n      ],\n      \"HTMLAppletElement\": [\n        \"applet\"\n      ],\n      \"HTMLAreaElement\": [\n        \"area\"\n      ],\n      \"HTMLAttachmentElement\": [\n        \"attachment\"\n      ],\n      \"HTMLAudioElement\": [\n        \"audio\"\n      ],\n      \"HTMLBRElement\": [\n        \"br\"\n      ],\n      \"HTMLBaseElement\": [\n        \"base\"\n      ],\n      \"HTMLBodyElement\": [\n        \"body\"\n      ],\n      \"HTMLButtonElement\": [\n        \"button\"\n      ],\n      \"HTMLCanvasElement\": [\n        \"canvas\"\n      ],\n      \"HTMLContentElement\": [\n        \"content\"\n      ],\n      \"HTMLDListElement\": [\n        \"dl\"\n      ],\n      \"HTMLDataElement\": [\n        \"data\"\n      ],\n      \"HTMLDataListElement\": [\n        \"datalist\"\n      ],\n      \"HTMLDetailsElement\": [\n        \"details\"\n      ],\n      \"HTMLDialogElement\": [\n        \"dialog\"\n      ],\n      \"HTMLDirectoryElement\": [\n        \"dir\"\n      ],\n      \"HTMLDivElement\": [\n        \"div\"\n      ],\n      \"HTMLDocument\": [\n        \"document\"\n      ],\n      \"HTMLElement\": [\n        \"element\",\n        \"abbr\",\n        \"address\",\n        \"article\",\n        \"aside\",\n        \"b\",\n        \"bdi\",\n        \"bdo\",\n        \"cite\",\n        \"code\",\n        \"command\",\n        \"dd\",\n        \"dfn\",\n        \"dt\",\n        \"em\",\n        \"figcaption\",\n        \"figure\",\n        \"footer\",\n        \"header\",\n        \"i\",\n        \"kbd\",\n        \"mark\",\n        \"nav\",\n        \"noscript\",\n        \"rp\",\n        \"rt\",\n        \"ruby\",\n        \"s\",\n        \"samp\",\n        \"section\",\n        \"small\",\n        \"strong\",\n        \"sub\",\n        \"summary\",\n        \"sup\",\n        \"u\",\n        \"var\",\n        \"wbr\"\n      ],\n      \"HTMLEmbedElement\": [\n        \"embed\"\n      ],\n      \"HTMLFieldSetElement\": [\n        \"fieldset\"\n      ],\n      \"HTMLFontElement\": [\n        \"font\"\n      ],\n      \"HTMLFormElement\": [\n        \"form\"\n      ],\n      \"HTMLFrameElement\": [\n        \"frame\"\n      ],\n      \"HTMLFrameSetElement\": [\n        \"frameset\"\n      ],\n      \"HTMLHRElement\": [\n        \"hr\"\n      ],\n      \"HTMLHeadElement\": [\n        \"head\"\n      ],\n      \"HTMLHeadingElement\": [\n        \"h1\",\n        \"h2\",\n        \"h3\",\n        \"h4\",\n        \"h5\",\n        \"h6\"\n      ],\n      \"HTMLHtmlElement\": [\n        \"html\"\n      ],\n      \"HTMLIFrameElement\": [\n        \"iframe\"\n      ],\n      \"HTMLImageElement\": [\n        \"img\"\n      ],\n      \"HTMLInputElement\": [\n        \"input\"\n      ],\n      \"HTMLKeygenElement\": [\n        \"keygen\"\n      ],\n      \"HTMLLIElement\": [\n        \"li\"\n      ],\n      \"HTMLLabelElement\": [\n        \"label\"\n      ],\n      \"HTMLLegendElement\": [\n        \"legend\"\n      ],\n      \"HTMLLinkElement\": [\n        \"link\"\n      ],\n      \"HTMLMapElement\": [\n        \"map\"\n      ],\n      \"HTMLMarqueeElement\": [\n        \"marquee\"\n      ],\n      \"HTMLMediaElement\": [\n        \"media\"\n      ],\n      \"HTMLMenuElement\": [\n        \"menu\"\n      ],\n      \"HTMLMenuItemElement\": [\n        \"menuitem\"\n      ],\n      \"HTMLMetaElement\": [\n        \"meta\"\n      ],\n      \"HTMLMeterElement\": [\n        \"meter\"\n      ],\n      \"HTMLModElement\": [\n        \"del\",\n        \"ins\"\n      ],\n      \"HTMLOListElement\": [\n        \"ol\"\n      ],\n      \"HTMLObjectElement\": [\n        \"object\"\n      ],\n      \"HTMLOptGroupElement\": [\n        \"optgroup\"\n      ],\n      \"HTMLOptionElement\": [\n        \"option\"\n      ],\n      \"HTMLOutputElement\": [\n        \"output\"\n      ],\n      \"HTMLParagraphElement\": [\n        \"p\"\n      ],\n      \"HTMLParamElement\": [\n        \"param\"\n      ],\n      \"HTMLPictureElement\": [\n        \"picture\"\n      ],\n      \"HTMLPreElement\": [\n        \"pre\"\n      ],\n      \"HTMLProgressElement\": [\n        \"progress\"\n      ],\n      \"HTMLQuoteElement\": [\n        \"blockquote\",\n        \"q\",\n        \"quote\"\n      ],\n      \"HTMLScriptElement\": [\n        \"script\"\n      ],\n      \"HTMLSelectElement\": [\n        \"select\"\n      ],\n      \"HTMLShadowElement\": [\n        \"shadow\"\n      ],\n      \"HTMLSlotElement\": [\n        \"slot\"\n      ],\n      \"HTMLSourceElement\": [\n        \"source\"\n      ],\n      \"HTMLSpanElement\": [\n        \"span\"\n      ],\n      \"HTMLStyleElement\": [\n        \"style\"\n      ],\n      \"HTMLTableCaptionElement\": [\n        \"caption\"\n      ],\n      \"HTMLTableCellElement\": [\n        \"td\",\n        \"th\"\n      ],\n      \"HTMLTableColElement\": [\n        \"col\",\n        \"colgroup\"\n      ],\n      \"HTMLTableElement\": [\n        \"table\"\n      ],\n      \"HTMLTableRowElement\": [\n        \"tr\"\n      ],\n      \"HTMLTableSectionElement\": [\n        \"thead\",\n        \"tbody\",\n        \"tfoot\"\n      ],\n      \"HTMLTemplateElement\": [\n        \"template\"\n      ],\n      \"HTMLTextAreaElement\": [\n        \"textarea\"\n      ],\n      \"HTMLTimeElement\": [\n        \"time\"\n      ],\n      \"HTMLTitleElement\": [\n        \"title\"\n      ],\n      \"HTMLTrackElement\": [\n        \"track\"\n      ],\n      \"HTMLUListElement\": [\n        \"ul\"\n      ],\n      \"HTMLUnknownElement\": [\n        \"unknown\",\n        \"vhgroupv\",\n        \"vkeygen\"\n      ],\n      \"HTMLVideoElement\": [\n        \"video\"\n      ]\n    },\n    \"nodes\": {\n      \"Attr\": [\n        \"node\"\n      ],\n      \"Audio\": [\n        \"audio\"\n      ],\n      \"CDATASection\": [\n        \"node\"\n      ],\n      \"CharacterData\": [\n        \"node\"\n      ],\n      \"Comment\": [\n        \"#comment\"\n      ],\n      \"Document\": [\n        \"#document\"\n      ],\n      \"DocumentFragment\": [\n        \"#document-fragment\"\n      ],\n      \"DocumentType\": [\n        \"node\"\n      ],\n      \"HTMLDocument\": [\n        \"#document\"\n      ],\n      \"Image\": [\n        \"img\"\n      ],\n      \"Option\": [\n        \"option\"\n      ],\n      \"ProcessingInstruction\": [\n        \"node\"\n      ],\n      \"ShadowRoot\": [\n        \"#shadow-root\"\n      ],\n      \"Text\": [\n        \"#text\"\n      ],\n      \"XMLDocument\": [\n        \"xml\"\n      ]\n    }\n  }));\n  \n  \n    \n  // passed at runtime, configurable\n  // via nodejs module\n  if (!polyfill) polyfill = 'auto';\n  \n  var\n    // V0 polyfill entry\n    REGISTER_ELEMENT = 'registerElement',\n  \n    // IE < 11 only + old WebKit for attributes + feature detection\n    EXPANDO_UID = '__' + REGISTER_ELEMENT + (window.Math.random() * 10e4 >> 0),\n  \n    // shortcuts and costants\n    ADD_EVENT_LISTENER = 'addEventListener',\n    ATTACHED = 'attached',\n    CALLBACK = 'Callback',\n    DETACHED = 'detached',\n    EXTENDS = 'extends',\n  \n    ATTRIBUTE_CHANGED_CALLBACK = 'attributeChanged' + CALLBACK,\n    ATTACHED_CALLBACK = ATTACHED + CALLBACK,\n    CONNECTED_CALLBACK = 'connected' + CALLBACK,\n    DISCONNECTED_CALLBACK = 'disconnected' + CALLBACK,\n    CREATED_CALLBACK = 'created' + CALLBACK,\n    DETACHED_CALLBACK = DETACHED + CALLBACK,\n  \n    ADDITION = 'ADDITION',\n    MODIFICATION = 'MODIFICATION',\n    REMOVAL = 'REMOVAL',\n  \n    DOM_ATTR_MODIFIED = 'DOMAttrModified',\n    DOM_CONTENT_LOADED = 'DOMContentLoaded',\n    DOM_SUBTREE_MODIFIED = 'DOMSubtreeModified',\n  \n    PREFIX_TAG = '<',\n    PREFIX_IS = '=',\n  \n    // valid and invalid node names\n    validName = /^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,\n    invalidNames = [\n      'ANNOTATION-XML',\n      'COLOR-PROFILE',\n      'FONT-FACE',\n      'FONT-FACE-SRC',\n      'FONT-FACE-URI',\n      'FONT-FACE-FORMAT',\n      'FONT-FACE-NAME',\n      'MISSING-GLYPH'\n    ],\n  \n    // registered types and their prototypes\n    types = [],\n    protos = [],\n  \n    // to query subnodes\n    query = '',\n  \n    // html shortcut used to feature detect\n    documentElement = document.documentElement,\n  \n    // ES5 inline helpers || basic patches\n    indexOf = types.indexOf || function (v) {\n      for(var i = this.length; i-- && this[i] !== v;){}\n      return i;\n    },\n  \n    // other helpers / shortcuts\n    OP = Object.prototype,\n    hOP = OP.hasOwnProperty,\n    iPO = OP.isPrototypeOf,\n  \n    defineProperty = Object.defineProperty,\n    empty = [],\n    gOPD = Object.getOwnPropertyDescriptor,\n    gOPN = Object.getOwnPropertyNames,\n    gPO = Object.getPrototypeOf,\n    sPO = Object.setPrototypeOf,\n  \n    // jshint proto: true\n    hasProto = !!Object.__proto__,\n  \n    // V1 helpers\n    fixGetClass = false,\n    DRECEV1 = '__dreCEv1',\n    customElements = window.customElements,\n    usableCustomElements = polyfill !== 'force' && !!(\n      customElements &&\n      customElements.define &&\n      customElements.get &&\n      customElements.whenDefined\n    ),\n    Dict = Object.create || Object,\n    Map = window.Map || function Map() {\n      var K = [], V = [], i;\n      return {\n        get: function (k) {\n          return V[indexOf.call(K, k)];\n        },\n        set: function (k, v) {\n          i = indexOf.call(K, k);\n          if (i < 0) V[K.push(k) - 1] = v;\n          else V[i] = v;\n        }\n      };\n    },\n    Promise = window.Promise || function (fn) {\n      var\n        notify = [],\n        done = false,\n        p = {\n          'catch': function () {\n            return p;\n          },\n          'then': function (cb) {\n            notify.push(cb);\n            if (done) setTimeout(resolve, 1);\n            return p;\n          }\n        }\n      ;\n      function resolve(value) {\n        done = true;\n        while (notify.length) notify.shift()(value);\n      }\n      fn(resolve);\n      return p;\n    },\n    justCreated = false,\n    constructors = Dict(null),\n    waitingList = Dict(null),\n    nodeNames = new Map(),\n    secondArgument = function (is) {\n      return is.toLowerCase();\n    },\n  \n    // used to create unique instances\n    create = Object.create || function Bridge(proto) {\n      // silly broken polyfill probably ever used but short enough to work\n      return proto ? ((Bridge.prototype = proto), new Bridge()) : this;\n    },\n  \n    // will set the prototype if possible\n    // or copy over all properties\n    setPrototype = sPO || (\n      hasProto ?\n        function (o, p) {\n          o.__proto__ = p;\n          return o;\n        } : (\n      (gOPN && gOPD) ?\n        (function(){\n          function setProperties(o, p) {\n            for (var\n              key,\n              names = gOPN(p),\n              i = 0, length = names.length;\n              i < length; i++\n            ) {\n              key = names[i];\n              if (!hOP.call(o, key)) {\n                defineProperty(o, key, gOPD(p, key));\n              }\n            }\n          }\n          return function (o, p) {\n            do {\n              setProperties(o, p);\n            } while ((p = gPO(p)) && !iPO.call(p, o));\n            return o;\n          };\n        }()) :\n        function (o, p) {\n          for (var key in p) {\n            o[key] = p[key];\n          }\n          return o;\n        }\n    )),\n  \n    // DOM shortcuts and helpers, if any\n  \n    MutationObserver = window.MutationObserver ||\n                       window.WebKitMutationObserver,\n  \n    HTMLElementPrototype = (\n      window.HTMLElement ||\n      window.Element ||\n      window.Node\n    ).prototype,\n  \n    IE8 = !iPO.call(HTMLElementPrototype, documentElement),\n  \n    safeProperty = IE8 ? function (o, k, d) {\n      o[k] = d.value;\n      return o;\n    } : defineProperty,\n  \n    isValidNode = IE8 ?\n      function (node) {\n        return node.nodeType === 1;\n      } :\n      function (node) {\n        return iPO.call(HTMLElementPrototype, node);\n      },\n  \n    targets = IE8 && [],\n  \n    attachShadow = HTMLElementPrototype.attachShadow,\n    cloneNode = HTMLElementPrototype.cloneNode,\n    dispatchEvent = HTMLElementPrototype.dispatchEvent,\n    getAttribute = HTMLElementPrototype.getAttribute,\n    hasAttribute = HTMLElementPrototype.hasAttribute,\n    removeAttribute = HTMLElementPrototype.removeAttribute,\n    setAttribute = HTMLElementPrototype.setAttribute,\n  \n    // replaced later on\n    createElement = document.createElement,\n    patchedCreateElement = createElement,\n  \n    // shared observer for all attributes\n    attributesObserver = MutationObserver && {\n      attributes: true,\n      characterData: true,\n      attributeOldValue: true\n    },\n  \n    // useful to detect only if there's no MutationObserver\n    DOMAttrModified = MutationObserver || function(e) {\n      doesNotSupportDOMAttrModified = false;\n      documentElement.removeEventListener(\n        DOM_ATTR_MODIFIED,\n        DOMAttrModified\n      );\n    },\n  \n    // will both be used to make DOMNodeInserted asynchronous\n    asapQueue,\n    asapTimer = 0,\n  \n    // internal flags\n    V0 = REGISTER_ELEMENT in document,\n    setListener = true,\n    justSetup = false,\n    doesNotSupportDOMAttrModified = true,\n    dropDomContentLoaded = true,\n  \n    // needed for the innerHTML helper\n    notFromInnerHTMLHelper = true,\n  \n    // optionally defined later on\n    onSubtreeModified,\n    callDOMAttrModified,\n    getAttributesMirror,\n    observer,\n    observe,\n  \n    // based on setting prototype capability\n    // will check proto or the expando attribute\n    // in order to setup the node once\n    patchIfNotAlready,\n    patch\n  ;\n  \n  // only if needed\n  if (!V0) {\n  \n    if (sPO || hasProto) {\n        patchIfNotAlready = function (node, proto) {\n          if (!iPO.call(proto, node)) {\n            setupNode(node, proto);\n          }\n        };\n        patch = setupNode;\n    } else {\n        patchIfNotAlready = function (node, proto) {\n          if (!node[EXPANDO_UID]) {\n            node[EXPANDO_UID] = Object(true);\n            setupNode(node, proto);\n          }\n        };\n        patch = patchIfNotAlready;\n    }\n  \n    if (IE8) {\n      doesNotSupportDOMAttrModified = false;\n      (function (){\n        var\n          descriptor = gOPD(HTMLElementPrototype, ADD_EVENT_LISTENER),\n          addEventListener = descriptor.value,\n          patchedRemoveAttribute = function (name) {\n            var e = new CustomEvent(DOM_ATTR_MODIFIED, {bubbles: true});\n            e.attrName = name;\n            e.prevValue = getAttribute.call(this, name);\n            e.newValue = null;\n            e[REMOVAL] = e.attrChange = 2;\n            removeAttribute.call(this, name);\n            dispatchEvent.call(this, e);\n          },\n          patchedSetAttribute = function (name, value) {\n            var\n              had = hasAttribute.call(this, name),\n              old = had && getAttribute.call(this, name),\n              e = new CustomEvent(DOM_ATTR_MODIFIED, {bubbles: true})\n            ;\n            setAttribute.call(this, name, value);\n            e.attrName = name;\n            e.prevValue = had ? old : null;\n            e.newValue = value;\n            if (had) {\n              e[MODIFICATION] = e.attrChange = 1;\n            } else {\n              e[ADDITION] = e.attrChange = 0;\n            }\n            dispatchEvent.call(this, e);\n          },\n          onPropertyChange = function (e) {\n            // jshint eqnull:true\n            var\n              node = e.currentTarget,\n              superSecret = node[EXPANDO_UID],\n              propertyName = e.propertyName,\n              event\n            ;\n            if (superSecret.hasOwnProperty(propertyName)) {\n              superSecret = superSecret[propertyName];\n              event = new CustomEvent(DOM_ATTR_MODIFIED, {bubbles: true});\n              event.attrName = superSecret.name;\n              event.prevValue = superSecret.value || null;\n              event.newValue = (superSecret.value = node[propertyName] || null);\n              if (event.prevValue == null) {\n                event[ADDITION] = event.attrChange = 0;\n              } else {\n                event[MODIFICATION] = event.attrChange = 1;\n              }\n              dispatchEvent.call(node, event);\n            }\n          }\n        ;\n        descriptor.value = function (type, handler, capture) {\n          if (\n            type === DOM_ATTR_MODIFIED &&\n            this[ATTRIBUTE_CHANGED_CALLBACK] &&\n            this.setAttribute !== patchedSetAttribute\n          ) {\n            this[EXPANDO_UID] = {\n              className: {\n                name: 'class',\n                value: this.className\n              }\n            };\n            this.setAttribute = patchedSetAttribute;\n            this.removeAttribute = patchedRemoveAttribute;\n            addEventListener.call(this, 'propertychange', onPropertyChange);\n          }\n          addEventListener.call(this, type, handler, capture);\n        };\n        defineProperty(HTMLElementPrototype, ADD_EVENT_LISTENER, descriptor);\n      }());\n    } else if (!MutationObserver) {\n      documentElement[ADD_EVENT_LISTENER](DOM_ATTR_MODIFIED, DOMAttrModified);\n      documentElement.setAttribute(EXPANDO_UID, 1);\n      documentElement.removeAttribute(EXPANDO_UID);\n      if (doesNotSupportDOMAttrModified) {\n        onSubtreeModified = function (e) {\n          var\n            node = this,\n            oldAttributes,\n            newAttributes,\n            key\n          ;\n          if (node === e.target) {\n            oldAttributes = node[EXPANDO_UID];\n            node[EXPANDO_UID] = (newAttributes = getAttributesMirror(node));\n            for (key in newAttributes) {\n              if (!(key in oldAttributes)) {\n                // attribute was added\n                return callDOMAttrModified(\n                  0,\n                  node,\n                  key,\n                  oldAttributes[key],\n                  newAttributes[key],\n                  ADDITION\n                );\n              } else if (newAttributes[key] !== oldAttributes[key]) {\n                // attribute was changed\n                return callDOMAttrModified(\n                  1,\n                  node,\n                  key,\n                  oldAttributes[key],\n                  newAttributes[key],\n                  MODIFICATION\n                );\n              }\n            }\n            // checking if it has been removed\n            for (key in oldAttributes) {\n              if (!(key in newAttributes)) {\n                // attribute removed\n                return callDOMAttrModified(\n                  2,\n                  node,\n                  key,\n                  oldAttributes[key],\n                  newAttributes[key],\n                  REMOVAL\n                );\n              }\n            }\n          }\n        };\n        callDOMAttrModified = function (\n          attrChange,\n          currentTarget,\n          attrName,\n          prevValue,\n          newValue,\n          action\n        ) {\n          var e = {\n            attrChange: attrChange,\n            currentTarget: currentTarget,\n            attrName: attrName,\n            prevValue: prevValue,\n            newValue: newValue\n          };\n          e[action] = attrChange;\n          onDOMAttrModified(e);\n        };\n        getAttributesMirror = function (node) {\n          for (var\n            attr, name,\n            result = {},\n            attributes = node.attributes,\n            i = 0, length = attributes.length;\n            i < length; i++\n          ) {\n            attr = attributes[i];\n            name = attr.name;\n            if (name !== 'setAttribute') {\n              result[name] = attr.value;\n            }\n          }\n          return result;\n        };\n      }\n    }\n  \n    // set as enumerable, writable and configurable\n    document[REGISTER_ELEMENT] = function registerElement(type, options) {\n      upperType = type.toUpperCase();\n      if (setListener) {\n        // only first time document.registerElement is used\n        // we need to set this listener\n        // setting it by default might slow down for no reason\n        setListener = false;\n        if (MutationObserver) {\n          observer = (function(attached, detached){\n            function checkEmAll(list, callback) {\n              for (var i = 0, length = list.length; i < length; callback(list[i++])){}\n            }\n            return new MutationObserver(function (records) {\n              for (var\n                current, node, newValue,\n                i = 0, length = records.length; i < length; i++\n              ) {\n                current = records[i];\n                if (current.type === 'childList') {\n                  checkEmAll(current.addedNodes, attached);\n                  checkEmAll(current.removedNodes, detached);\n                } else {\n                  node = current.target;\n                  if (notFromInnerHTMLHelper &&\n                      node[ATTRIBUTE_CHANGED_CALLBACK] &&\n                      current.attributeName !== 'style') {\n                    newValue = getAttribute.call(node, current.attributeName);\n                    if (newValue !== current.oldValue) {\n                      node[ATTRIBUTE_CHANGED_CALLBACK](\n                        current.attributeName,\n                        current.oldValue,\n                        newValue\n                      );\n                    }\n                  }\n                }\n              }\n            });\n          }(executeAction(ATTACHED), executeAction(DETACHED)));\n          observe = function (node) {\n            observer.observe(\n              node,\n              {\n                childList: true,\n                subtree: true\n              }\n            );\n            return node;\n          };\n          observe(document);\n          if (attachShadow) {\n            HTMLElementPrototype.attachShadow = function () {\n              return observe(attachShadow.apply(this, arguments));\n            };\n          }\n        } else {\n          asapQueue = [];\n          document[ADD_EVENT_LISTENER]('DOMNodeInserted', onDOMNode(ATTACHED));\n          document[ADD_EVENT_LISTENER]('DOMNodeRemoved', onDOMNode(DETACHED));\n        }\n  \n        document[ADD_EVENT_LISTENER](DOM_CONTENT_LOADED, onReadyStateChange);\n        document[ADD_EVENT_LISTENER]('readystatechange', onReadyStateChange);\n  \n        HTMLElementPrototype.cloneNode = function (deep) {\n          var\n            node = cloneNode.call(this, !!deep),\n            i = getTypeIndex(node)\n          ;\n          if (-1 < i) patch(node, protos[i]);\n          if (deep && query.length) loopAndSetup(node.querySelectorAll(query));\n          return node;\n        };\n      }\n  \n      if (justSetup) return (justSetup = false);\n  \n      if (-2 < (\n        indexOf.call(types, PREFIX_IS + upperType) +\n        indexOf.call(types, PREFIX_TAG + upperType)\n      )) {\n        throwTypeError(type);\n      }\n  \n      if (!validName.test(upperType) || -1 < indexOf.call(invalidNames, upperType)) {\n        throw new Error('The type ' + type + ' is invalid');\n      }\n  \n      var\n        constructor = function () {\n          return extending ?\n            document.createElement(nodeName, upperType) :\n            document.createElement(nodeName);\n        },\n        opt = options || OP,\n        extending = hOP.call(opt, EXTENDS),\n        nodeName = extending ? options[EXTENDS].toUpperCase() : upperType,\n        upperType,\n        i\n      ;\n  \n      if (extending && -1 < (\n        indexOf.call(types, PREFIX_TAG + nodeName)\n      )) {\n        throwTypeError(nodeName);\n      }\n  \n      i = types.push((extending ? PREFIX_IS : PREFIX_TAG) + upperType) - 1;\n  \n      query = query.concat(\n        query.length ? ',' : '',\n        extending ? nodeName + '[is=\"' + type.toLowerCase() + '\"]' : nodeName\n      );\n  \n      constructor.prototype = (\n        protos[i] = hOP.call(opt, 'prototype') ?\n          opt.prototype :\n          create(HTMLElementPrototype)\n      );\n  \n      if (query.length) loopAndVerify(\n        document.querySelectorAll(query),\n        ATTACHED\n      );\n  \n      return constructor;\n    };\n  \n    document.createElement = (patchedCreateElement = function (localName, typeExtension) {\n      var\n        is = getIs(typeExtension),\n        node = is ?\n          createElement.call(document, localName, secondArgument(is)) :\n          createElement.call(document, localName),\n        name = '' + localName,\n        i = indexOf.call(\n          types,\n          (is ? PREFIX_IS : PREFIX_TAG) +\n          (is || name).toUpperCase()\n        ),\n        setup = -1 < i\n      ;\n      if (is) {\n        node.setAttribute('is', is = is.toLowerCase());\n        if (setup) {\n          setup = isInQSA(name.toUpperCase(), is);\n        }\n      }\n      notFromInnerHTMLHelper = !document.createElement.innerHTMLHelper;\n      if (setup) patch(node, protos[i]);\n      return node;\n    });\n  \n  }\n  \n  function ASAP() {\n    var queue = asapQueue.splice(0, asapQueue.length);\n    asapTimer = 0;\n    while (queue.length) {\n      queue.shift().call(\n        null, queue.shift()\n      );\n    }\n  }\n  \n  function loopAndVerify(list, action) {\n    for (var i = 0, length = list.length; i < length; i++) {\n      verifyAndSetupAndAction(list[i], action);\n    }\n  }\n  \n  function loopAndSetup(list) {\n    for (var i = 0, length = list.length, node; i < length; i++) {\n      node = list[i];\n      patch(node, protos[getTypeIndex(node)]);\n    }\n  }\n  \n  function executeAction(action) {\n    return function (node) {\n      if (isValidNode(node)) {\n        verifyAndSetupAndAction(node, action);\n        if (query.length) loopAndVerify(\n          node.querySelectorAll(query),\n          action\n        );\n      }\n    };\n  }\n  \n  function getTypeIndex(target) {\n    var\n      is = getAttribute.call(target, 'is'),\n      nodeName = target.nodeName.toUpperCase(),\n      i = indexOf.call(\n        types,\n        is ?\n            PREFIX_IS + is.toUpperCase() :\n            PREFIX_TAG + nodeName\n      )\n    ;\n    return is && -1 < i && !isInQSA(nodeName, is) ? -1 : i;\n  }\n  \n  function isInQSA(name, type) {\n    return -1 < query.indexOf(name + '[is=\"' + type + '\"]');\n  }\n  \n  function onDOMAttrModified(e) {\n    var\n      node = e.currentTarget,\n      attrChange = e.attrChange,\n      attrName = e.attrName,\n      target = e.target,\n      addition = e[ADDITION] || 2,\n      removal = e[REMOVAL] || 3\n    ;\n    if (notFromInnerHTMLHelper &&\n        (!target || target === node) &&\n        node[ATTRIBUTE_CHANGED_CALLBACK] &&\n        attrName !== 'style' && (\n          e.prevValue !== e.newValue ||\n          // IE9, IE10, and Opera 12 gotcha\n          e.newValue === '' && (\n            attrChange === addition ||\n            attrChange === removal\n          )\n    )) {\n      node[ATTRIBUTE_CHANGED_CALLBACK](\n        attrName,\n        attrChange === addition ? null : e.prevValue,\n        attrChange === removal ? null : e.newValue\n      );\n    }\n  }\n  \n  function onDOMNode(action) {\n    var executor = executeAction(action);\n    return function (e) {\n      asapQueue.push(executor, e.target);\n      if (asapTimer) clearTimeout(asapTimer);\n      asapTimer = setTimeout(ASAP, 1);\n    };\n  }\n  \n  function onReadyStateChange(e) {\n    if (dropDomContentLoaded) {\n      dropDomContentLoaded = false;\n      e.currentTarget.removeEventListener(DOM_CONTENT_LOADED, onReadyStateChange);\n    }\n    if (query.length) loopAndVerify(\n      (e.target || document).querySelectorAll(query),\n      e.detail === DETACHED ? DETACHED : ATTACHED\n    );\n    if (IE8) purge();\n  }\n  \n  function patchedSetAttribute(name, value) {\n    // jshint validthis:true\n    var self = this;\n    setAttribute.call(self, name, value);\n    onSubtreeModified.call(self, {target: self});\n  }\n  \n  function setupNode(node, proto) {\n    setPrototype(node, proto);\n    if (observer) {\n      observer.observe(node, attributesObserver);\n    } else {\n      if (doesNotSupportDOMAttrModified) {\n        node.setAttribute = patchedSetAttribute;\n        node[EXPANDO_UID] = getAttributesMirror(node);\n        node[ADD_EVENT_LISTENER](DOM_SUBTREE_MODIFIED, onSubtreeModified);\n      }\n      node[ADD_EVENT_LISTENER](DOM_ATTR_MODIFIED, onDOMAttrModified);\n    }\n    if (node[CREATED_CALLBACK] && notFromInnerHTMLHelper) {\n      node.created = true;\n      node[CREATED_CALLBACK]();\n      node.created = false;\n    }\n  }\n  \n  function purge() {\n    for (var\n      node,\n      i = 0,\n      length = targets.length;\n      i < length; i++\n    ) {\n      node = targets[i];\n      if (!documentElement.contains(node)) {\n        length--;\n        targets.splice(i--, 1);\n        verifyAndSetupAndAction(node, DETACHED);\n      }\n    }\n  }\n  \n  function throwTypeError(type) {\n    throw new Error('A ' + type + ' type is already registered');\n  }\n  \n  function verifyAndSetupAndAction(node, action) {\n    var\n      fn,\n      i = getTypeIndex(node)\n    ;\n    if (-1 < i) {\n      patchIfNotAlready(node, protos[i]);\n      i = 0;\n      if (action === ATTACHED && !node[ATTACHED]) {\n        node[DETACHED] = false;\n        node[ATTACHED] = true;\n        i = 1;\n        if (IE8 && indexOf.call(targets, node) < 0) {\n          targets.push(node);\n        }\n      } else if (action === DETACHED && !node[DETACHED]) {\n        node[ATTACHED] = false;\n        node[DETACHED] = true;\n        i = 1;\n      }\n      if (i && (fn = node[action + CALLBACK])) fn.call(node);\n    }\n  }\n  \n  \n  \n  // V1 in da House!\n  function CustomElementRegistry() {}\n  \n  CustomElementRegistry.prototype = {\n    constructor: CustomElementRegistry,\n    // a workaround for the stubborn WebKit\n    define: usableCustomElements ?\n      function (name, Class, options) {\n        if (options) {\n          CERDefine(name, Class, options);\n        } else {\n          var NAME = name.toUpperCase();\n          constructors[NAME] = {\n            constructor: Class,\n            create: [NAME]\n          };\n          nodeNames.set(Class, NAME);\n          customElements.define(name, Class);\n        }\n      } :\n      CERDefine,\n    get: usableCustomElements ?\n      function (name) {\n        return customElements.get(name) || get(name);\n      } :\n      get,\n    whenDefined: usableCustomElements ?\n      function (name) {\n        return Promise.race([\n          customElements.whenDefined(name),\n          whenDefined(name)\n        ]);\n      } :\n      whenDefined\n  };\n  \n  function CERDefine(name, Class, options) {\n    var\n      is = options && options[EXTENDS] || '',\n      CProto = Class.prototype,\n      proto = create(CProto),\n      attributes = Class.observedAttributes || empty,\n      definition = {prototype: proto}\n    ;\n    // TODO: is this needed at all since it's inherited?\n    // defineProperty(proto, 'constructor', {value: Class});\n    safeProperty(proto, CREATED_CALLBACK, {\n        value: function () {\n          if (justCreated) justCreated = false;\n          else if (!this[DRECEV1]) {\n            this[DRECEV1] = true;\n            new Class(this);\n            if (CProto[CREATED_CALLBACK])\n              CProto[CREATED_CALLBACK].call(this);\n            var info = constructors[nodeNames.get(Class)];\n            if (!usableCustomElements || info.create.length > 1) {\n              notifyAttributes(this);\n            }\n          }\n      }\n    });\n    safeProperty(proto, ATTRIBUTE_CHANGED_CALLBACK, {\n      value: function (name) {\n        if (-1 < indexOf.call(attributes, name))\n          CProto[ATTRIBUTE_CHANGED_CALLBACK].apply(this, arguments);\n      }\n    });\n    if (CProto[CONNECTED_CALLBACK]) {\n      safeProperty(proto, ATTACHED_CALLBACK, {\n        value: CProto[CONNECTED_CALLBACK]\n      });\n    }\n    if (CProto[DISCONNECTED_CALLBACK]) {\n      safeProperty(proto, DETACHED_CALLBACK, {\n        value: CProto[DISCONNECTED_CALLBACK]\n      });\n    }\n    if (is) definition[EXTENDS] = is;\n    name = name.toUpperCase();\n    constructors[name] = {\n      constructor: Class,\n      create: is ? [is, secondArgument(name)] : [name]\n    };\n    nodeNames.set(Class, name);\n    document[REGISTER_ELEMENT](name.toLowerCase(), definition);\n    whenDefined(name);\n    waitingList[name].r();\n  }\n  \n  function get(name) {\n    var info = constructors[name.toUpperCase()];\n    return info && info.constructor;\n  }\n  \n  function getIs(options) {\n    return typeof options === 'string' ?\n        options : (options && options.is || '');\n  }\n  \n  function notifyAttributes(self) {\n    var\n      callback = self[ATTRIBUTE_CHANGED_CALLBACK],\n      attributes = callback ? self.attributes : empty,\n      i = attributes.length,\n      attribute\n    ;\n    while (i--) {\n      attribute =  attributes[i]; // || attributes.item(i);\n      callback.call(\n        self,\n        attribute.name || attribute.nodeName,\n        null,\n        attribute.value || attribute.nodeValue\n      );\n    }\n  }\n  \n  function whenDefined(name) {\n    name = name.toUpperCase();\n    if (!(name in waitingList)) {\n      waitingList[name] = {};\n      waitingList[name].p = new Promise(function (resolve) {\n        waitingList[name].r = resolve;\n      });\n    }\n    return waitingList[name].p;\n  }\n  \n  function polyfillV1() {\n    if (customElements) delete window.customElements;\n    defineProperty(window, 'customElements', {\n      configurable: true,\n      value: new CustomElementRegistry()\n    });\n    defineProperty(window, 'CustomElementRegistry', {\n      configurable: true,\n      value: CustomElementRegistry\n    });\n    for (var\n      patchClass = function (name) {\n        var Class = window[name];\n        if (Class) {\n          window[name] = function CustomElementsV1(self) {\n            var info, isNative;\n            if (!self) self = this;\n            if (!self[DRECEV1]) {\n              justCreated = true;\n              info = constructors[nodeNames.get(self.constructor)];\n              isNative = usableCustomElements && info.create.length === 1;\n              self = isNative ?\n                Reflect.construct(Class, empty, info.constructor) :\n                document.createElement.apply(document, info.create);\n              self[DRECEV1] = true;\n              justCreated = false;\n              if (!isNative) notifyAttributes(self);\n            }\n            return self;\n          };\n          window[name].prototype = Class.prototype;\n          try {\n            Class.prototype.constructor = window[name];\n          } catch(WebKit) {\n            fixGetClass = true;\n            defineProperty(Class, DRECEV1, {value: window[name]});\n          }\n        }\n      },\n      Classes = htmlClass.get(/^HTML[A-Z]*[a-z]/),\n      i = Classes.length;\n      i--;\n      patchClass(Classes[i])\n    ) {}\n    (document.createElement = function (name, options) {\n      var is = getIs(options);\n      return is ?\n        patchedCreateElement.call(this, name, secondArgument(is)) :\n        patchedCreateElement.call(this, name);\n    });\n    if (!V0) {\n      justSetup = true;\n      document[REGISTER_ELEMENT]('');\n    }\n  }\n  \n  // if customElements is not there at all\n  if (!customElements || polyfill === 'force') polyfillV1();\n  else {\n    // if available test extends work as expected\n    try {\n      (function (DRE, options, name) {\n        options[EXTENDS] = 'a';\n        DRE.prototype = create(HTMLAnchorElement.prototype);\n        DRE.prototype.constructor = DRE;\n        window.customElements.define(name, DRE, options);\n        if (\n          getAttribute.call(document.createElement('a', {is: name}), 'is') !== name ||\n          (usableCustomElements && getAttribute.call(new DRE(), 'is') !== name)\n        ) {\n          throw options;\n        }\n      }(\n        function DRE() {\n          return Reflect.construct(HTMLAnchorElement, [], DRE);\n        },\n        {},\n        'document-register-element-a'\n      ));\n    } catch(o_O) {\n      // or force the polyfill if not\n      // and keep internal original reference\n      polyfillV1();\n    }\n  }\n  \n  try {\n    createElement.call(document, 'a', 'a');\n  } catch(FireFox) {\n    secondArgument = function (is) {\n      return {is: is.toLowerCase()};\n    };\n  }\n  \n}\n\nexports.installCustomElements = installCustomElements;\n\n","'use strict';\n\n/**\n * Constructs a ES6/Promises A+ Promise instance.\n *\n * @constructor\n * @param {function(function(*=), function (*=))} resolver\n */\nfunction Promise(resolver) {\n  if (!(this instanceof Promise)) {\n    throw new TypeError('Constructor Promise requires `new`');\n  }\n  if (!isFunction(resolver)) {\n    throw new TypeError('Must pass resolver function');\n  }\n\n  /**\n   * @type {function(this:Promise,*=,function(*=),function(*=),Deferred):!Promise}\n   * @private\n   */\n  this._state = PendingPromise;\n\n  /**\n   * @type {*}\n   * @private\n   */\n  this._value = [];\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this._isChainEnd = true;\n\n  doResolve(\n    this,\n    adopter(this, FulfilledPromise),\n    adopter(this, RejectedPromise),\n    { then: resolver }\n  );\n}\n\n/****************************\n  Public Instance Methods\n ****************************/\n\n/**\n * Creates a new promise instance that will receive the result of this promise\n * as inputs to the onFulfilled or onRejected callbacks.\n *\n * @param {function(*)} onFulfilled\n * @param {function(*)} onRejected\n */\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  onFulfilled = isFunction(onFulfilled) ? onFulfilled : void 0;\n  onRejected = isFunction(onRejected) ? onRejected : void 0;\n\n  if (onFulfilled || onRejected) {\n    this._isChainEnd = false;\n  }\n\n  return this._state(\n    this._value,\n    onFulfilled,\n    onRejected\n  );\n};\n\n/**\n * Creates a new promise that will handle the rejected state of this promise.\n *\n * @param {function(*)} onRejected\n * @returns {!Promise}\n */\nPromise.prototype.catch = function(onRejected) {\n  return this.then(void 0, onRejected);\n};\n\n/****************************\n  Public Static Methods\n ****************************/\n\n/**\n * Creates a fulfilled Promise of value. If value is itself a then-able,\n * resolves with the then-able's value.\n *\n * @this {!Promise}\n * @param {*=} value\n * @returns {!Promise}\n */\nPromise.resolve = function(value) {\n  var Constructor = this;\n  var promise;\n\n  if (isObject(value) && value instanceof this) {\n    promise = value;\n  } else {\n    promise = new Constructor(function(resolve) {\n      resolve(value);\n    });\n  }\n\n  return /** @type {!Promise} */(promise);\n};\n\n/**\n * Creates a rejected Promise of reason.\n *\n * @this {!Promise}\n * @param {*=} reason\n * @returns {!Promise}\n */\nPromise.reject = function(reason) {\n  var Constructor = this;\n  var promise = new Constructor(function(_, reject) {\n    reject(reason);\n  });\n\n  return /** @type {!Promise} */(promise);\n};\n\n/**\n * Creates a Promise that will resolve with an array of the values of the\n * passed in promises. If any promise rejects, the returned promise will\n * reject.\n *\n * @this {!Promise}\n * @param {!Array<Promise|*>} promises\n * @returns {!Promise}\n */\nPromise.all = function(promises) {\n  var Constructor = this;\n  var promise = new Constructor(function(resolve, reject) {\n    var length = promises.length;\n    var values = new Array(length);\n\n    if (length === 0) {\n      return resolve(values);\n    }\n\n    each(promises, function(promise, index) {\n      Constructor.resolve(promise).then(function(value) {\n        values[index] = value;\n        if (--length === 0) {\n          resolve(values);\n        }\n      }, reject);\n    });\n  });\n\n  return /** @type {!Promise} */(promise);\n};\n\n/**\n * Creates a Promise that will resolve or reject based on the first\n * resolved or rejected promise.\n *\n * @this {!Promise}\n * @param {!Array<Promise|*>} promises\n * @returns {!Promise}\n */\nPromise.race = function(promises) {\n  var Constructor = this;\n  var promise = new Constructor(function(resolve, reject) {\n    for (var i = 0; i < promises.length; i++) {\n      Constructor.resolve(promises[i]).then(resolve, reject);\n    }\n  });\n\n  return /** @type {!Promise} */(promise);\n};\n\nvar onPossiblyUnhandledRejection = function(reason, promise) {\n  throw reason;\n};\n\n/**\n * An internal use static function.\n */\nPromise._overrideUnhandledExceptionHandler = function(handler) {\n  onPossiblyUnhandledRejection = handler;\n};\n\n/****************************\n  Private functions\n ****************************/\n\n/**\n * The Fulfilled Promise state. Calls onFulfilled with the resolved value of\n * this promise, creating a new promise.\n *\n * If there is no onFulfilled, returns the current promise to avoid an promise\n * instance.\n *\n * @this {!Promise} The current promise\n * @param {*=} value The current promise's resolved value.\n * @param {function(*=)=} onFulfilled\n * @param {function(*=)=} unused\n * @param {Deferred} deferred A deferred object that holds a promise and its\n *     resolve and reject functions. It IS NOT passed when called from\n *     Promise#then to save an object instance (since we may return the current\n *     promise). It IS passed in when adopting the Fulfilled state from the\n *     Pending state.\n * @returns {!Promise}\n */\nfunction FulfilledPromise(value, onFulfilled, unused, deferred) {\n  if (!onFulfilled) {\n    deferredAdopt(deferred, FulfilledPromise, value);\n    return this;\n  }\n  if (!deferred) {\n    deferred = new Deferred(this.constructor);\n  }\n  defer(tryCatchDeferred(deferred, onFulfilled, value));\n  return deferred.promise;\n}\n\n/**\n * The Rejected Promise state. Calls onRejected with the resolved value of\n * this promise, creating a new promise.\n *\n * If there is no onRejected, returns the current promise to avoid an promise\n * instance.\n *\n * @this {!Promise} The current promise\n * @param {*=} reason The current promise's rejection reason.\n * @param {function(*=)=} unused\n * @param {function(*=)=} onRejected\n * @param {Deferred} deferred A deferred object that holds a promise and its\n *     resolve and reject functions. It IS NOT passed when called from\n *     Promise#then to save an object instance (since we may return the current\n *     promise). It IS passed in when adopting the Rejected state from the\n *     Pending state.\n * @returns {!Promise}\n */\nfunction RejectedPromise(reason, unused, onRejected, deferred) {\n  if (!onRejected) {\n    deferredAdopt(deferred, RejectedPromise, reason);\n    return this;\n  }\n  if (!deferred) {\n    deferred = new Deferred(this.constructor);\n  }\n  defer(tryCatchDeferred(deferred, onRejected, reason));\n  return deferred.promise;\n}\n\n/**\n * The Pending Promise state. Eventually calls onFulfilled once the promise has\n * resolved, or onRejected once the promise rejects.\n *\n * If there is no onFulfilled and no onRejected, returns the current promise to\n * avoid an promise instance.\n *\n * @this {!Promise} The current promise\n * @param {*=} queue The current promise's pending promises queue.\n * @param {function(*=)=} onFulfilled\n * @param {function(*=)=} onRejected\n * @param {Deferred} deferred A deferred object that holds a promise and its\n *     resolve and reject functions. It IS NOT passed when called from\n *     Promise#then to save an object instance (since we may return the current\n *     promise). It IS passed in when adopting the Pending state from the\n *     Pending state of another promise.\n * @returns {!Promise}\n */\nfunction PendingPromise(queue, onFulfilled, onRejected, deferred) {\n  if (!deferred) {\n    if (!onFulfilled && !onRejected) { return this; }\n    deferred = new Deferred(this.constructor);\n  }\n  queue.push({\n    deferred: deferred,\n    onFulfilled: onFulfilled || deferred.resolve,\n    onRejected: onRejected || deferred.reject\n  });\n  return deferred.promise;\n}\n\n/**\n * Constructs a deferred instance that holds a promise and its resolve and\n * reject functions.\n *\n * @constructor\n */\nfunction Deferred(Promise) {\n  var deferred = this;\n  /** @type {!Promise} */\n  this.promise = new Promise(function(resolve, reject) {\n    /** @type {function(*=)} */\n    deferred.resolve = resolve;\n\n    /** @type {function(*=)} */\n    deferred.reject = reject;\n  });\n  return deferred;\n}\n\n/**\n * Transitions the state of promise to another state. This is only ever called\n * on with a promise that is currently in the Pending state.\n *\n * @param {!Promise} promise\n * @param {function(this:Promise,*=,function(*=),function(*=),Deferred):!Promise} state\n * @param {*=} value\n */\nfunction adopt(promise, state, value, adoptee) {\n  var queue = promise._value;\n  promise._state = state;\n  promise._value = value;\n\n  if (adoptee && state === PendingPromise) {\n    adoptee._state(value, void 0, void 0, {\n      promise: promise,\n      resolve: void 0,\n      reject: void 0\n    });\n  }\n\n  for (var i = 0; i < queue.length; i++) {\n    var next = queue[i];\n    promise._state(\n      value,\n      next.onFulfilled,\n      next.onRejected,\n      next.deferred\n    );\n  }\n  queue.length = 0;\n\n  // Determine if this rejected promise will be \"handled\".\n  if (state === RejectedPromise && promise._isChainEnd) {\n    setTimeout(function() {\n      if (promise._isChainEnd) {\n        onPossiblyUnhandledRejection(value, promise);\n      }\n    }, 0);\n  }\n}\n\n/**\n * A partial application of adopt.\n *\n * @param {!Promise} promise\n * @param {function(this:Promise,*=,function(*=),function(*=),Deferred):!Promise} state\n * @returns {function(*=)}\n */\nfunction adopter(promise, state) {\n  return function(value) {\n    adopt(promise, state, value);\n  };\n}\n\n/**\n * Updates a deferred promises state. Necessary for updating an adopting\n * promise's state when the adoptee resolves.\n *\n * @param {?Deferred} deferred\n * @param {function(this:Promise,*=,function(*=),function(*=),Deferred):!Promise} state\n * @param {*=} value\n */\nfunction deferredAdopt(deferred, state, value) {\n  if (deferred) {\n    var promise = deferred.promise;\n    promise._state = state;\n    promise._value = value;\n  }\n}\n\n/**\n * A no-op function to prevent double resolving.\n */\nfunction noop() {}\n\n/**\n * Tests if fn is a Function\n *\n * @param {*} fn\n * @returns {boolean}\n */\nfunction isFunction(fn) {\n  return typeof fn === 'function';\n}\n\n/**\n * Tests if fn is an Object\n *\n * @param {*} obj\n * @returns {boolean}\n */\nfunction isObject(obj) {\n  return obj === Object(obj);\n}\n\n/**\n * Iterates over each element of an array, calling the iterator with the\n * element and its index.\n *\n * @param {!Array} collection\n * @param {function(*=,number)} iterator\n */\nfunction each(collection, iterator) {\n  for (var i = 0; i < collection.length; i++) {\n    iterator(collection[i], i);\n  }\n}\n\n/**\n * Creates a function that will attempt to resolve the deferred with the return\n * of fn. If any error is raised, rejects instead.\n *\n * @param {!Deferred} deferred\n * @param {function(*=)} fn\n * @param {*} arg\n * @returns {function()}\n */\nfunction tryCatchDeferred(deferred, fn, arg) {\n  var promise = deferred.promise;\n  var resolve = deferred.resolve;\n  var reject = deferred.reject;\n  return function() {\n    try {\n      var result = fn(arg);\n      doResolve(promise, resolve, reject, result, result);\n    } catch (e) {\n      reject(e);\n    }\n  };\n}\n\n/**\n * Queues and executes multiple deferred functions on another run loop.\n */\nvar defer = (function() {\n  /**\n   * Defers fn to another run loop.\n   */\n  var scheduleFlush;\n  if (typeof window !== 'undefined' && window.postMessage) {\n    window.addEventListener('message', flush);\n    scheduleFlush = function() {\n      window.postMessage('macro-task', '*');\n    };\n  } else {\n    scheduleFlush = function() {\n      setTimeout(flush, 0);\n    };\n  }\n\n  var queue = new Array(16);\n  var length = 0;\n\n  function flush() {\n    for (var i = 0; i < length; i++) {\n      var fn = queue[i];\n      queue[i] = null;\n      fn();\n    }\n    length = 0;\n  }\n\n  /**\n   * @param {function()} fn\n   */\n  function defer(fn) {\n    if (length === 0) { scheduleFlush(); }\n    queue[length++] = fn;\n  }\n\n  return defer;\n})();\n\n/**\n * The Promise resolution procedure.\n * https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n *\n * @param {!Promise} promise\n * @param {function(*=)} resolve\n * @param {function(*=)} reject\n * @param {*} value\n * @param {*=} context\n */\nfunction doResolve(promise, resolve, reject, value, context) {\n  var _reject = reject;\n  var then;\n  var _resolve;\n  try {\n    if (value === promise) {\n      throw new TypeError('Cannot fulfill promise with itself');\n    }\n    var isObj = isObject(value);\n    if (isObj && value instanceof promise.constructor) {\n      adopt(promise, value._state, value._value, value);\n    } else if (isObj && (then = value.then) && isFunction(then)) {\n      _resolve = function(value) {\n        _resolve = _reject = noop;\n        doResolve(promise, resolve, reject, value, value);\n      };\n      _reject = function(reason) {\n        _resolve = _reject = noop;\n        reject(reason);\n      };\n      then.call(\n        context,\n        function(value) { _resolve(value); },\n        function(reason) { _reject(reason); }\n      );\n    } else {\n      resolve(value);\n    }\n  } catch (e) {\n    _reject(e);\n  }\n}\n\nmodule.exports = Promise;\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Common AMP events.\n * @enum {string}\n */\nexport const AmpEvents = {\n  BUILT: 'amp:built',\n  DOM_UPDATE: 'amp:dom-update',\n  VISIBILITY_CHANGE: 'amp:visibilitychange', // https://github.com/ampproject/amphtml/blob/master/ads/README.md#page-visibility\n  // The following codes are only used for testing.\n  // TODO(choumx): Move these to a separate enum so they can be DCE'd.\n  ATTACHED: 'amp:attached',\n  STUBBED: 'amp:stubbed',\n  LOAD_START: 'amp:load:start',\n  LOAD_END: 'amp:load:end',\n  ERROR: 'amp:error',\n};\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Services} from './services';\n\n/**\n * Helper method to trigger analytics event if amp-analytics is available.\n * TODO: Do not expose this function\n * @param {!Element} target\n * @param {string} eventType\n * @param {!Object<string, string>=} opt_vars A map of vars and their values.\n */\nexport function triggerAnalyticsEvent(target, eventType, opt_vars) {\n  Services.analyticsForDocOrNull(target).then(analytics => {\n    if (!analytics) {\n      return;\n    }\n    analytics.triggerEventForTarget(target, eventType, opt_vars);\n  });\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Allows for runtime configuration. Internally, the runtime should\n * use the src/config.js module for various constants. We can use the\n * AMP_CONFIG global to translate user-defined configurations to this\n * module.\n * @type {!Object<string, string>}\n */\nconst env = self.AMP_CONFIG || {};\n\nconst thirdPartyFrameRegex = typeof env['thirdPartyFrameRegex'] == 'string' ?\n  new RegExp(env['thirdPartyFrameRegex']) : env['thirdPartyFrameRegex'];\n\nconst cdnProxyRegex = typeof env['cdnProxyRegex'] == 'string' ?\n  new RegExp(env['cdnProxyRegex']) : env['cdnProxyRegex'];\n\n/** @type {!Object<string, string|boolean|RegExp>} */\nexport const urls = {\n  thirdParty: env['thirdPartyUrl'] || 'https://3p.ampproject.net',\n  thirdPartyFrameHost: env['thirdPartyFrameHost'] || 'ampproject.net',\n  thirdPartyFrameRegex: thirdPartyFrameRegex || /^d-\\d+\\.ampproject\\.net$/,\n  cdn: env['cdnUrl'] || 'https://cdn.ampproject.org',\n  /* Note that cdnProxyRegex is only ever checked against origins\n   * (proto://host[:port]) so does not need to consider path\n   */\n  cdnProxyRegex: cdnProxyRegex ||\n      /^https:\\/\\/([a-zA-Z0-9_-]+\\.)?cdn\\.ampproject\\.org$/,\n  localhostRegex: /^https?:\\/\\/localhost(:\\d+)?$/,\n  errorReporting: env['errorReportingUrl'] ||\n      'https://amp-error-reporting.appspot.com/r',\n  localDev: env['localDev'] || false,\n};\n\nexport const config = {\n  urls,\n};\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {endsWith} from './string';\nimport {\n  isProxyOrigin,\n  parseUrlDeprecated,\n  tryDecodeUriComponent,\n} from './url';\nimport {urls} from './config';\n\n\n/**\n * Returns the value of the cookie. The cookie access is restricted and must\n * go through the privacy review. Before using this method please file a\n * GitHub issue with \"Privacy Review\" label.\n *\n * Returns the cookie's value or `null`.\n *\n * @param {!Window} win\n * @param {string} name\n * @return {?string}\n */\nexport function getCookie(win, name) {\n  const cookieString = tryGetDocumentCookieNoInline(win);\n  if (!cookieString) {\n    return null;\n  }\n  const cookies = cookieString.split(';');\n  for (let i = 0; i < cookies.length; i++) {\n    const cookie = cookies[i].trim();\n    const eq = cookie.indexOf('=');\n    if (eq == -1) {\n      continue;\n    }\n    if (tryDecodeUriComponent(cookie.substring(0, eq).trim()) == name) {\n      const value = cookie.substring(eq + 1).trim();\n      return tryDecodeUriComponent(value, value);\n    }\n  }\n  return null;\n}\n\n/**\n * This method should not be inlined to prevent TryCatch deoptimization.\n * NoInline keyword at the end of function name also prevents Closure compiler\n * from inlining the function.\n * @param {!Window} win\n * @return {string}\n */\nfunction tryGetDocumentCookieNoInline(win) {\n  try {\n    return win.document.cookie;\n  } catch (e) {\n    // Act as if no cookie is available. Exceptions can be thrown when\n    // AMP docs are opened on origins that do not allow setting\n    // cookies such as null origins.\n    return '';\n  }\n}\n\n/**\n * Sets the value of the cookie. The cookie access is restricted and must\n * go through the privacy review. Before using this method please file a\n * GitHub issue with \"Privacy Review\" label.\n *\n * @param {!Window} win\n * @param {string} name\n * @param {string} value\n * @param {time} expirationTime\n * @param {{\n *   highestAvailableDomain:(boolean|undefined),\n *   domain:(string|undefined)\n * }=} opt_options\n *     - highestAvailableDomain: If true, set the cookie at the widest domain\n *       scope allowed by the browser. E.g. on example.com if we are currently\n *       on www.example.com.\n *     - domain: Explicit domain to set.\n *     - allowOnProxyOrigin: Allow setting a cookie on the AMP Cache.\n */\nexport function setCookie(win, name, value, expirationTime, opt_options) {\n  checkOriginForSettingCookie(win, opt_options, name);\n  if (opt_options && opt_options.highestAvailableDomain) {\n    const parts = win.location.hostname.split('.');\n    let domain = parts[parts.length - 1];\n    for (let i = parts.length - 2; i >= 0; i--) {\n      domain = parts[i] + '.' + domain;\n      trySetCookie(win, name, value, expirationTime, domain);\n      if (getCookie(win, name) == value) {\n        return;\n      }\n    }\n  }\n  let domain = undefined;\n  if (opt_options && opt_options.domain) {\n    domain = opt_options.domain;\n  }\n  trySetCookie(win, name, value, expirationTime, domain);\n}\n\n/**\n * Attempt to set a cookie with the given params.\n *\n * @param {!Window} win\n * @param {string} name\n * @param {string} value\n * @param {time} expirationTime\n * @param {string|undefined} domain\n */\nfunction trySetCookie(win, name, value, expirationTime, domain) {\n  // We do not allow setting cookies on the domain that contains both\n  // the cdn. and www. hosts.\n  if (domain == 'ampproject.org') {\n    // Actively delete them.\n    value = 'delete';\n    expirationTime = 0;\n  }\n  const cookie = encodeURIComponent(name) + '=' +\n      encodeURIComponent(value) +\n      '; path=/' +\n      (domain ? '; domain=' + domain : '') +\n      '; expires=' + new Date(expirationTime).toUTCString();\n  try {\n    win.document.cookie = cookie;\n  } catch (ignore) {\n    // Do not throw if setting the cookie failed Exceptions can be thrown\n    // when AMP docs are opened on origins that do not allow setting\n    // cookies such as null origins.\n  }\n}\n\n/**\n * Throws if a given cookie should not be set on the given origin.\n * This is a defense-in-depth. Callers should never run into this.\n *\n * @param {!Window} win\n * @param {!Object|undefined} options\n * @param {string} name For the error message.\n */\nfunction checkOriginForSettingCookie(win, options, name) {\n  if (options && options.allowOnProxyOrigin) {\n    return;\n  }\n  if (isProxyOrigin(win.location.href)) {\n    throw new Error('Should never attempt to set cookie on proxy origin: '\n        + name);\n  }\n\n  const current = parseUrlDeprecated(win.location.href).hostname.toLowerCase();\n  const proxy = parseUrlDeprecated(urls.cdn).hostname.toLowerCase();\n  if (current == proxy || endsWith(current, '.' + proxy)) {\n    throw new Error('Should never attempt to set cookie on proxy origin.'\n        + ' (in depth check): ' + name);\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {FetchResponse, assertSuccess, getViewerInterceptResponse, setupAMPCors, setupInit, setupInput, verifyAmpCORSHeaders} from './utils/xhr-utils';\nimport {Services} from './services';\nimport {user} from './log';\n\n/**\n *\n *\n * @param {!Window} win\n * @param {string} input\n * @param {?./utils/xhr-utils.FetchInitDef=} opt_init\n * @return {!Promise<!Document>}\n * @ignore\n */\nexport function fetchDocument(win, input, opt_init) {\n  let init = setupInit(opt_init, 'text/html');\n  init = setupAMPCors(win, input, init);\n  input = setupInput(win, input, init);\n  const ampdocService = Services.ampdocServiceFor(win);\n  const ampdocSingle =\n  ampdocService.isSingleDoc() ? ampdocService.getAmpDoc() : null;\n  init.responseType = 'document';\n  return getViewerInterceptResponse(win, ampdocSingle, input, init)\n      .then(interceptorResponse => {\n        if (interceptorResponse) {\n          return interceptorResponse.text().then(body =>\n            new DOMParser().parseFromString(body, 'text/html')\n          );\n        }\n        return xhrRequest(input, init).then(({xhr, response}) => {\n          verifyAmpCORSHeaders(win, response, init);\n          return xhr.responseXML;\n        });\n      });\n}\n\n/**\n *\n *\n * @param {string} input\n * @param {!./utils/xhr-utils.FetchInitDef} init\n * @private\n */\nfunction xhrRequest(input, init) {\n  return new Promise((resolve, reject) => {\n    const xhr = new XMLHttpRequest();\n    xhr.open(init.method || 'GET', input, true);\n    xhr.withCredentials = (init.credentials == 'include');\n    xhr.responseType = 'document';\n    // Incoming headers are in fetch format,\n    // so we need to convert them into xhr.\n    for (const header in init.headers) {\n      xhr.setRequestHeader(header, init.headers[header]);\n    }\n\n    xhr.onreadystatechange = () => {\n      if (xhr.readyState < /* STATUS_RECEIVED */ 2) {\n        return;\n      }\n      if (xhr.status < 100 || xhr.status > 599) {\n        xhr.onreadystatechange = null;\n        reject(user().createExpectedError(\n            `Unknown HTTP status ${xhr.status}`));\n        return;\n      }\n      // TODO(dvoytenko): This is currently simplified: we will wait for the\n      // whole document loading to complete. This is fine for the use cases\n      // we have now, but may need to be reimplemented later.\n      if (xhr.readyState == /* COMPLETE */ 4) {\n        const response = new FetchResponse(xhr);\n        const promise = assertSuccess(response)\n            .then(response => ({response, xhr}));\n        resolve(promise);\n      }\n    };\n    xhr.onerror = () => {\n      reject(user().createExpectedError('Request failure'));\n    };\n    xhr.onabort = () => {\n      reject(user().createExpectedError('Request aborted'));\n    };\n    if (init.method == 'POST') {\n      xhr.send(/** @type {!FormData} */ (init.body));\n    } else {\n      xhr.send();\n    }\n  });\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Deferred} from './utils/promise';\nimport {cssEscape} from '../third_party/css-escape/css-escape';\nimport {dev} from './log';\nimport {dict} from './utils/object';\nimport {startsWith} from './string';\nimport {toWin} from './types';\n\nconst HTML_ESCAPE_CHARS = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#x27;',\n  '`': '&#x60;',\n};\nconst HTML_ESCAPE_REGEX = /(&|<|>|\"|'|`)/g;\n\n/** @const {string} */\nexport const UPGRADE_TO_CUSTOMELEMENT_PROMISE =\n    '__AMP_UPG_PRM';\n\n/** @const {string} */\nexport const UPGRADE_TO_CUSTOMELEMENT_RESOLVER =\n    '__AMP_UPG_RES';\n\n/**\n * Waits until the child element is constructed. Once the child is found, the\n * callback is executed.\n * @param {!Element} parent\n * @param {function(!Element):boolean} checkFunc\n * @param {function()} callback\n */\nexport function waitForChild(parent, checkFunc, callback) {\n  if (checkFunc(parent)) {\n    callback();\n    return;\n  }\n  /** @const {!Window} */\n  const win = toWin(parent.ownerDocument.defaultView);\n  if (win.MutationObserver) {\n    /** @const {MutationObserver} */\n    const observer = new win.MutationObserver(() => {\n      if (checkFunc(parent)) {\n        observer.disconnect();\n        callback();\n      }\n    });\n    observer.observe(parent, {childList: true});\n  } else {\n    /** @const {number} */\n    const interval = win.setInterval(() => {\n      if (checkFunc(parent)) {\n        win.clearInterval(interval);\n        callback();\n      }\n    }, /* milliseconds */ 5);\n  }\n}\n\n/**\n * Waits until the child element is constructed. Once the child is found, the\n * promise is resolved.\n * @param {!Element} parent\n * @param {function(!Element):boolean} checkFunc\n * @return {!Promise}\n */\nexport function waitForChildPromise(parent, checkFunc) {\n  return new Promise(resolve => {\n    waitForChild(parent, checkFunc, resolve);\n  });\n}\n\n/**\n * Waits for document's body to be available.\n * Will be deprecated soon; use {@link AmpDoc#whenBodyAvailable} or\n * @{link DocumentState#onBodyAvailable} instead.\n * @param {!Document} doc\n * @param {function()} callback\n */\nexport function waitForBody(doc, callback) {\n  waitForChild(doc.documentElement, () => !!doc.body, callback);\n}\n\n\n/**\n * Waits for document's body to be available.\n * @param {!Document} doc\n * @return {!Promise}\n */\nexport function waitForBodyPromise(doc) {\n  return new Promise(resolve => {\n    waitForBody(doc, resolve);\n  });\n}\n\n\n/**\n * Removes the element.\n * @param {!Element} element\n */\nexport function removeElement(element) {\n  if (element.parentElement) {\n    element.parentElement.removeChild(element);\n  }\n}\n\n\n/**\n * Removes all child nodes of the specified element.\n * @param {!Element} parent\n */\nexport function removeChildren(parent) {\n  while (parent.firstChild) {\n    parent.removeChild(parent.firstChild);\n  }\n}\n\n\n/**\n * Copies all children nodes of element \"from\" to element \"to\". Child nodes\n * are deeply cloned. Notice, that this method should be used with care and\n * preferably on smaller subtrees.\n * @param {!Element} from\n * @param {!Element|!DocumentFragment} to\n */\nexport function copyChildren(from, to) {\n  const frag = to.ownerDocument.createDocumentFragment();\n  for (let n = from.firstChild; n; n = n.nextSibling) {\n    frag.appendChild(n.cloneNode(true));\n  }\n  to.appendChild(frag);\n}\n\n/**\n * Insert the element in the root after the element named after or\n * if that is null at the beginning.\n * @param {!Element|!ShadowRoot} root\n * @param {!Element} element\n * @param {?Node} after\n */\nexport function insertAfterOrAtStart(root, element, after) {\n  const before = after ? after.nextSibling : root.firstChild;\n  root.insertBefore(element, before);\n}\n\n/**\n * Add attributes to an element.\n * @param {!Element} element\n * @param {!JsonObject<string, string>} attributes\n * @return {!Element} created element\n */\nexport function addAttributesToElement(element, attributes) {\n  for (const attr in attributes) {\n    element.setAttribute(attr, attributes[attr]);\n  }\n  return element;\n}\n\n/**\n * Create a new element on document with specified tagName and attributes.\n * @param {!Document} doc\n * @param {string} tagName\n * @param {!JsonObject<string, string>} attributes\n * @return {!Element} created element\n */\nexport function createElementWithAttributes(doc, tagName, attributes) {\n  const element = doc.createElement(tagName);\n  return addAttributesToElement(element, attributes);\n}\n\n/**\n * Returns true if node is connected (attached).\n * @param {!Node} node\n * @return {boolean}\n * @see https://dom.spec.whatwg.org/#connected\n */\nexport function isConnectedNode(node) {\n  const connected = node.isConnected;\n  if (connected !== undefined) {\n    return connected;\n  }\n\n  // \"An element is connected if its shadow-including root is a document.\"\n  let n = node;\n  do {\n    n = rootNodeFor(n);\n    if (n.host) {\n      n = n.host;\n    } else {\n      break;\n    }\n  } while (true);\n  return n.nodeType === Node.DOCUMENT_NODE;\n}\n\n/**\n * Returns the root for a given node. Does not cross shadow DOM boundary.\n * @param {!Node} node\n * @return {!Node}\n */\nexport function rootNodeFor(node) {\n  if (Node.prototype.getRootNode) {\n    // Type checker says `getRootNode` may return null.\n    return node.getRootNode() || node;\n  }\n  let n;\n  for (n = node; !!n.parentNode; n = n.parentNode) {}\n  return n;\n}\n\n/**\n * Finds the closest element that satisfies the callback from this element\n * up the DOM subtree.\n * @param {!Element} element\n * @param {function(!Element):boolean} callback\n * @param {Element=} opt_stopAt optional elemnt to stop the search at.\n * @return {?Element}\n */\nexport function closest(element, callback, opt_stopAt) {\n  for (let el = element; el && el !== opt_stopAt; el = el.parentElement) {\n    if (callback(el)) {\n      return el;\n    }\n  }\n  return null;\n}\n\n\n/**\n * Finds the closest node that satisfies the callback from this node\n * up the DOM subtree.\n * @param {!Node} node\n * @param {function(!Node):boolean} callback\n * @return {?Node}\n */\nexport function closestNode(node, callback) {\n  for (let n = node; n; n = n.parentNode) {\n    if (callback(n)) {\n      return n;\n    }\n  }\n  return null;\n}\n\n\n/**\n * Finds the closest element with the specified name from this element\n * up the DOM subtree.\n * @param {!Element} element\n * @param {string} tagName\n * @return {?Element}\n */\nexport function closestByTag(element, tagName) {\n  if (element.closest) {\n    return element.closest(tagName);\n  }\n  tagName = tagName.toUpperCase();\n  return closest(element, el => {\n    return el.tagName == tagName;\n  });\n}\n\n/**\n * Finds the closest element with the specified selector from this element\n * @param {!Element} element\n * @param {string} selector\n * @return {?Element} closest ancestor if found.\n */\nexport function closestBySelector(element, selector) {\n  if (element.closest) {\n    return element.closest(selector);\n  }\n\n  return closest(element, el => {\n    return matches(el, selector);\n  });\n}\n\n/**\n * Checks if the given element matches the selector\n * @param  {!Element} el The element to verify\n * @param  {string} selector The selector to check against\n * @return {boolean} True if the element matched the selector. False otherwise.\n */\nexport function matches(el, selector) {\n  const matcher = el.matches ||\n      el.webkitMatchesSelector ||\n      el.mozMatchesSelector ||\n      el.msMatchesSelector ||\n      el.oMatchesSelector;\n  if (matcher) {\n    return matcher.call(el, selector);\n  }\n  return false; // IE8 always returns false.\n}\n\n/**\n * Finds the first descendant element with the specified name.\n * @param {!Element|!Document|!ShadowRoot} element\n * @param {string} tagName\n * @return {?Element}\n */\nexport function elementByTag(element, tagName) {\n  let elements;\n  // getElementsByTagName() is not supported on ShadowRoot.\n  if (typeof element.getElementsByTagName === 'function') {\n    elements = element.getElementsByTagName(tagName);\n  } else {\n    elements = element./*OK*/querySelectorAll(tagName);\n  }\n  return (elements && elements[0]) || null;\n}\n\n\n/**\n * Finds the first child element that satisfies the callback.\n * @param {!Element} parent\n * @param {function(!Element):boolean} callback\n * @return {?Element}\n */\nexport function childElement(parent, callback) {\n  for (let child = parent.firstElementChild; child;\n    child = child.nextElementSibling) {\n    if (callback(child)) {\n      return child;\n    }\n  }\n  return null;\n}\n\n\n/**\n * Finds all child elements that satisfy the callback.\n * @param {!Element} parent\n * @param {function(!Element):boolean} callback\n * @return {!Array<!Element>}\n */\nexport function childElements(parent, callback) {\n  const children = [];\n  for (let child = parent.firstElementChild; child;\n    child = child.nextElementSibling) {\n    if (callback(child)) {\n      children.push(child);\n    }\n  }\n  return children;\n}\n\n\n/**\n * Finds the last child element that satisfies the callback.\n * @param {!Element} parent\n * @param {function(!Element):boolean} callback\n * @return {?Element}\n */\nexport function lastChildElement(parent, callback) {\n  for (let child = parent.lastElementChild; child;\n    child = child.previousElementSibling) {\n    if (callback(child)) {\n      return child;\n    }\n  }\n  return null;\n}\n\n/**\n * Finds all child nodes that satisfy the callback.\n * These nodes can include Text, Comment and other child nodes.\n * @param {!Node} parent\n * @param {function(!Node):boolean} callback\n * @return {!Array<!Node>}\n */\nexport function childNodes(parent, callback) {\n  const nodes = [];\n  for (let child = parent.firstChild; child;\n    child = child.nextSibling) {\n    if (callback(child)) {\n      nodes.push(child);\n    }\n  }\n  return nodes;\n}\n\n/**\n * @type {boolean|undefined}\n * @visibleForTesting\n */\nlet scopeSelectorSupported;\n\n/**\n * @param {boolean|undefined} val\n * @visibleForTesting\n */\nexport function setScopeSelectorSupportedForTesting(val) {\n  scopeSelectorSupported = val;\n}\n\n/**\n * Test that the :scope selector is supported and behaves correctly.\n * @param {!Element} parent\n * @return {boolean}\n */\nfunction isScopeSelectorSupported(parent) {\n  const doc = parent.ownerDocument;\n  try {\n    const testElement = doc.createElement('div');\n    const testChild = doc.createElement('div');\n    testElement.appendChild(testChild);\n    // NOTE(cvializ, #12383): Firefox's implementation is incomplete,\n    // therefore we test actual functionality of`:scope` as well.\n    return testElement./*OK*/querySelector(':scope div') === testChild;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Finds the first child element that has the specified attribute.\n * @param {!Element} parent\n * @param {string} attr\n * @return {?Element}\n */\nexport function childElementByAttr(parent, attr) {\n  return scopedQuerySelector/*OK*/(parent, `> [${attr}]`);\n}\n\n\n/**\n * Finds the last child element that has the specified attribute.\n * @param {!Element} parent\n * @param {string} attr\n * @return {?Element}\n */\nexport function lastChildElementByAttr(parent, attr) {\n  return lastChildElement(parent, el => {\n    return el.hasAttribute(attr);\n  });\n}\n\n\n/**\n * Finds all child elements that has the specified attribute.\n * @param {!Element} parent\n * @param {string} attr\n * @return {!NodeList<!Element>}\n */\nexport function childElementsByAttr(parent, attr) {\n  return scopedQuerySelectorAll/*OK*/(parent, `> [${attr}]`);\n}\n\n\n/**\n * Finds the first child element that has the specified tag name.\n * @param {!Element} parent\n * @param {string} tagName\n * @return {?Element}\n */\nexport function childElementByTag(parent, tagName) {\n  return scopedQuerySelector/*OK*/(parent, `> ${tagName}`);\n}\n\n\n/**\n * Finds all child elements with the specified tag name.\n * @param {!Element} parent\n * @param {string} tagName\n * @return {!NodeList<!Element>}\n */\nexport function childElementsByTag(parent, tagName) {\n  return scopedQuerySelectorAll/*OK*/(parent, `> ${tagName}`);\n}\n\n\n/**\n * Finds the first element that matches `selector`, scoped inside `root`.\n * Note: in IE, this causes a quick mutation of the element's class list.\n * @param {!Element} root\n * @param {string} selector\n * @return {?Element}\n */\nexport function scopedQuerySelector(root, selector) {\n  if (scopeSelectorSupported == null) {\n    scopeSelectorSupported = isScopeSelectorSupported(root);\n  }\n  if (scopeSelectorSupported) {\n    return root./*OK*/querySelector(`:scope ${selector}`);\n  }\n\n  // Only IE.\n  const unique = 'i-amphtml-scoped';\n  root.classList.add(unique);\n  const element = root./*OK*/querySelector(`.${unique} ${selector}`);\n  root.classList.remove(unique);\n  return element;\n}\n\n\n/**\n * Finds the every element that matches `selector`, scoped inside `root`.\n * Note: in IE, this causes a quick mutation of the element's class list.\n * @param {!Element} root\n * @param {string} selector\n * @return {!NodeList<!Element>}\n */\nexport function scopedQuerySelectorAll(root, selector) {\n  if (scopeSelectorSupported == null) {\n    scopeSelectorSupported = isScopeSelectorSupported(root);\n  }\n  if (scopeSelectorSupported) {\n    return root./*OK*/querySelectorAll(`:scope ${selector}`);\n  }\n\n  // Only IE.\n  const unique = 'i-amphtml-scoped';\n  root.classList.add(unique);\n  const elements = root./*OK*/querySelectorAll(`.${unique} ${selector}`);\n  root.classList.remove(unique);\n  return elements;\n}\n\n\n/**\n * Returns element data-param- attributes as url parameters key-value pairs.\n * e.g. data-param-some-attr=value -> {someAttr: value}.\n * @param {!Element} element\n * @param {function(string):string=} opt_computeParamNameFunc to compute the\n *    parameter name, get passed the camel-case parameter name.\n * @param {!RegExp=} opt_paramPattern Regex pattern to match data attributes.\n * @return {!JsonObject}\n */\nexport function getDataParamsFromAttributes(element, opt_computeParamNameFunc,\n  opt_paramPattern) {\n  const computeParamNameFunc = opt_computeParamNameFunc || (key => key);\n  const {dataset} = element;\n  const params = dict();\n  const paramPattern = opt_paramPattern ? opt_paramPattern : /^param(.+)/;\n  for (const key in dataset) {\n    const matches = key.match(paramPattern);\n    if (matches) {\n      const param = matches[1][0].toLowerCase() + matches[1].substr(1);\n      params[computeParamNameFunc(param)] = dataset[key];\n    }\n  }\n  return params;\n}\n\n/**\n * Whether the element have a next node in the document order.\n * This means either:\n *  a. The element itself has a nextSibling.\n *  b. Any of the element ancestors has a nextSibling.\n * @param {!Element} element\n * @param {?Node} opt_stopNode\n * @return {boolean}\n */\nexport function hasNextNodeInDocumentOrder(element, opt_stopNode) {\n  let currentElement = element;\n  do {\n    if (currentElement.nextSibling) {\n      return true;\n    }\n  } while ((currentElement = currentElement.parentNode) &&\n            currentElement != opt_stopNode);\n  return false;\n}\n\n\n/**\n * Finds all ancestor elements that satisfy predicate.\n * @param {!Element} child\n * @param {function(!Element):boolean} predicate\n * @return {!Array<!Element>}\n */\nexport function ancestorElements(child, predicate) {\n  const ancestors = [];\n  for (let ancestor = child.parentElement; ancestor;\n    ancestor = ancestor.parentElement) {\n    if (predicate(ancestor)) {\n      ancestors.push(ancestor);\n    }\n  }\n  return ancestors;\n}\n\n\n/**\n * Finds all ancestor elements that has the specified tag name.\n * @param {!Element} child\n * @param {string} tagName\n * @return {!Array<!Element>}\n */\nexport function ancestorElementsByTag(child, tagName) {\n  tagName = tagName.toUpperCase();\n  return ancestorElements(child, el => {\n    return el.tagName == tagName;\n  });\n}\n\n/**\n * Returns a clone of the content of a template element.\n *\n * Polyfill to replace .content access for browsers that do not support\n * HTMLTemplateElements natively.\n *\n * @param {!HTMLTemplateElement|!Element} template\n * @return {!DocumentFragment}\n */\nexport function templateContentClone(template) {\n  if ('content' in template) {\n    return template.content.cloneNode(true);\n  } else {\n    const content = template.ownerDocument.createDocumentFragment();\n    copyChildren(template, content);\n    return content;\n  }\n}\n\n/**\n * Iterate over an array-like. Some collections like NodeList are\n * lazily evaluated in some browsers, and accessing `length` forces full\n * evaluation. We can improve performance by iterating until an element is\n * `undefined` to avoid checking the `length` property.\n * Test cases: https://jsperf.com/iterating-over-collections-of-elements\n * @param {!IArrayLike<T>} iterable\n * @param {function(T, number)} cb\n * @template T\n */\nexport function iterateCursor(iterable, cb) {\n  for (let i = 0, value; (value = iterable[i]) !== undefined; i++) {\n    cb(value, i);\n  }\n}\n\n/**\n * This method wraps around window's open method. It first tries to execute\n * `open` call with the provided target and if it fails, it retries the call\n * with the `_top` target. This is necessary given that in some embedding\n * scenarios, such as iOS' WKWebView, navigation to `_blank` and other targets\n * is blocked by default.\n *\n * @param {!Window} win\n * @param {string} url\n * @param {string} target\n * @param {string=} opt_features\n * @return {?Window}\n */\nexport function openWindowDialog(win, url, target, opt_features) {\n  // Try first with the specified target. If we're inside the WKWebView or\n  // a similar environments, this method is expected to fail by default for\n  // all targets except `_top`.\n  let res;\n  try {\n    res = win.open(url, target, opt_features);\n  } catch (e) {\n    dev().error('DOM', 'Failed to open url on target: ', target, e);\n  }\n\n  // Then try with `_top` target.\n  if (!res && target != '_top') {\n    res = win.open(url, '_top');\n  }\n  return res;\n}\n\n/**\n * Whether the element is a script tag with application/json type.\n * @param {!Element} element\n * @return {boolean}\n */\nexport function isJsonScriptTag(element) {\n  return element.tagName == 'SCRIPT' &&\n            element.getAttribute('type').toUpperCase() == 'APPLICATION/JSON';\n}\n\n/**\n * Whether the element is a script tag with application/json type.\n * @param {!Element} element\n * @return {boolean}\n */\nexport function isJsonLdScriptTag(element) {\n  return element.tagName == 'SCRIPT' &&\n      element.getAttribute('type').toUpperCase() == 'APPLICATION/LD+JSON';\n}\n\n/**\n * Whether the page's direction is right to left or not.\n * @param {!Document} doc\n * @return {boolean}\n */\nexport function isRTL(doc) {\n  const dir = doc.body.getAttribute('dir')\n                 || doc.documentElement.getAttribute('dir')\n                 || 'ltr';\n  return dir == 'rtl';\n}\n\n\n/**\n * Escapes an ident (ID or a class name) to be used as a CSS selector.\n *\n * See https://drafts.csswg.org/cssom/#serialize-an-identifier.\n *\n * @param {string} ident\n * @return {string}\n */\nexport function escapeCssSelectorIdent(ident) {\n  return cssEscape(ident);\n}\n\n/**\n * Escapes an ident in a way that can be used by :nth-child() psuedo-class.\n *\n * See https://github.com/w3c/csswg-drafts/issues/2306.\n *\n * @param {string|number} ident\n * @return {string}\n */\nexport function escapeCssSelectorNth(ident) {\n  const escaped = String(ident);\n  // Ensure it doesn't close the nth-child psuedo class.\n  dev().assert(escaped.indexOf(')') === -1);\n  return escaped;\n}\n\n/**\n * Escapes `<`, `>` and other HTML charcaters with their escaped forms.\n * @param {string} text\n * @return {string}\n */\nexport function escapeHtml(text) {\n  if (!text) {\n    return text;\n  }\n  return text.replace(HTML_ESCAPE_REGEX, escapeHtmlChar);\n}\n\n/**\n * @param {string} c\n * @return {string}\n */\nfunction escapeHtmlChar(c) {\n  return HTML_ESCAPE_CHARS[c];\n}\n\n/**\n * Tries to focus on the given element; fails silently if browser throws an\n * exception.\n * @param {!Element} element\n */\nexport function tryFocus(element) {\n  try {\n    element./*OK*/focus();\n  } catch (e) {\n    // IE <= 7 may throw exceptions when focusing on hidden items.\n  }\n}\n\n/**\n * Whether the given window is in an iframe or not.\n * @param {!Window} win\n * @return {boolean}\n */\nexport function isIframed(win) {\n  return win.parent && win.parent != win;\n}\n\n/**\n * Determines if this element is an AMP element\n * @param {!Element} element\n * @return {boolean}\n */\nexport function isAmpElement(element) {\n  const tag = element.tagName;\n  // Use prefix to recognize AMP element. This is necessary because stub\n  // may not be attached yet.\n  return startsWith(tag, 'AMP-') &&\n      // Some \"amp-*\" elements are not really AMP elements. :smh:\n      !(tag == 'AMP-STICKY-AD-TOP-PADDING' || tag == 'AMP-BODY');\n}\n\n/**\n * Return a promise that resolve when an AMP element upgrade from HTMLElement\n * to CustomElement\n * @param {!Element} element\n * @return {!Promise<!Element>}\n */\nexport function whenUpgradedToCustomElement(element) {\n  dev().assert(isAmpElement(element), 'element is not AmpElement');\n  if (element.createdCallback) {\n    // Element already is CustomElement;\n    return Promise.resolve(element);\n  }\n  // If Element is still HTMLElement, wait for it to upgrade to customElement\n  // Note: use pure string to avoid obfuscation between versions.\n  if (!element[UPGRADE_TO_CUSTOMELEMENT_PROMISE]) {\n    const deferred = new Deferred();\n    element[UPGRADE_TO_CUSTOMELEMENT_PROMISE] = deferred.promise;\n    element[UPGRADE_TO_CUSTOMELEMENT_RESOLVER] = deferred.resolve;\n\n  }\n\n  return element[UPGRADE_TO_CUSTOMELEMENT_PROMISE];\n}\n\n/**\n * Replacement for `Element.requestFullscreen()` method.\n * https://developer.mozilla.org/en-US/docs/Web/API/Element/requestFullscreen\n * @param {!Element} element\n */\nexport function fullscreenEnter(element) {\n  const requestFs = element.requestFullscreen\n   || element.requestFullScreen\n   || element.webkitRequestFullscreen\n   || element.webkitRequestFullScreen\n   || element.webkitEnterFullscreen\n   || element.webkitEnterFullScreen\n   || element.msRequestFullscreen\n   || element.msRequestFullScreen\n   || element.mozRequestFullscreen\n   || element.mozRequestFullScreen;\n  if (requestFs) {\n    requestFs.call(element);\n  }\n}\n\n/**\n * Replacement for `Document.exitFullscreen()` method.\n * https://developer.mozilla.org/en-US/docs/Web/API/Document/exitFullscreen\n * @param {!Element} element\n */\nexport function fullscreenExit(element) {\n  let exitFs = element.cancelFullScreen\n              || element.exitFullscreen\n              || element.exitFullScreen\n              || element.webkitExitFullscreen\n              || element.webkitExitFullScreen\n              || element.webkitCancelFullScreen\n              || element.mozCancelFullScreen\n              || element.msExitFullscreen;\n  if (exitFs) {\n    exitFs.call(element);\n    return;\n  }\n  if (element.ownerDocument) {\n    exitFs = element.ownerDocument.cancelFullScreen\n             || element.ownerDocument.exitFullscreen\n             || element.ownerDocument.exitFullScreen\n             || element.ownerDocument.webkitExitFullscreen\n             || element.ownerDocument.webkitExitFullScreen\n             || element.ownerDocument.webkitCancelFullScreen\n             || element.ownerDocument.mozCancelFullScreen\n             || element.ownerDocument.msExitFullscreen;\n  }\n  if (exitFs) {\n    exitFs.call(element.ownerDocument);\n    return;\n  }\n}\n\n\n/**\n * Replacement for `Document.fullscreenElement`.\n * https://developer.mozilla.org/en-US/docs/Web/API/Document/fullscreenElement\n * @param {!Element} element\n * @return {boolean}\n */\nexport function isFullscreenElement(element) {\n  const isFullscreen = element.webkitDisplayingFullscreen;\n  if (isFullscreen) {\n    return true;\n  }\n  if (element.ownerDocument) {\n    const fullscreenElement = element.ownerDocument.fullscreenElement\n             || element.ownerDocument.webkitFullscreenElement\n             || element.ownerDocument.mozFullScreenElement\n             || element.webkitCurrentFullScreenElement;\n    if (fullscreenElement == element) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Returns true if node is not disabled.\n *\n * IE8 can return false positives, see {@link matches}.\n * @param {!Element} element\n * @return {boolean}\n * @see https://www.w3.org/TR/html5/forms.html#concept-fe-disabled\n */\nexport function isEnabled(element) {\n  return !(element.disabled || matches(element, ':disabled'));\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as dom from './dom';\nimport {\n  getAmpdoc,\n  getExistingServiceForDocInEmbedScope,\n  getService,\n  getServicePromise,\n  getServicePromiseForDoc,\n  getServicePromiseOrNull,\n  getServicePromiseOrNullForDoc,\n  getTopWindow,\n} from './service';\nimport {toWin} from './types';\nimport {user} from './log';\n\n/**\n * Returns a promise for a service for the given id and window. Also expects an\n * element that has the actual implementation. The promise resolves when the\n * implementation loaded. Users should typically wrap this as a special purpose\n * function (e.g. Services.viewportForDoc(...)) for type safety and because the\n * factory should not be passed around.\n * @param {!Window} win\n * @param {string} id of the service.\n * @param {string} extension Name of the custom extension that provides the\n *     implementation of this service.\n * @param {boolean=} opt_element Whether this service is provided by an element,\n *     not the extension.\n * @return {!Promise<*>}\n */\nexport function getElementService(win, id, extension, opt_element) {\n  return getElementServiceIfAvailable(win, id, extension, opt_element).then(\n      service => assertService(service, id, extension));\n}\n\n/**\n * Same as getElementService but produces null if the given element is not\n * actually available on the current page.\n * @param {!Window} win\n * @param {string} id of the service.\n * @param {string} extension Name of the custom extension that provides the\n *     implementation of this service.\n * @param {boolean=} opt_element Whether this service is provided by an\n *     element, not the extension.\n * @return {!Promise<?Object>}\n */\nexport function getElementServiceIfAvailable(win, id, extension, opt_element) {\n  const s = getServicePromiseOrNull(win, id);\n  if (s) {\n    return /** @type {!Promise<?Object>} */ (s);\n  }\n  return getElementServicePromiseOrNull(win, id, extension, opt_element);\n}\n\n/**\n * @param {!Window} win\n * @param {string} elementName Name of an extended custom element.\n * @return {boolean} Whether this element is scheduled to be loaded.\n */\nfunction isElementScheduled(win, elementName) {\n  // Set in custom-element.js\n  if (!win.ampExtendedElements) {\n    return false;\n  }\n  return !!win.ampExtendedElements[elementName];\n}\n\n\n/**\n * Returns a promise for a service for the given id and window. Also expects an\n * element that has the actual implementation. The promise resolves when the\n * implementation loaded. Users should typically wrap this as a special purpose\n * function (e.g. Services.viewportForDoc(...)) for type safety and because the\n * factory should not be passed around.\n * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n * @param {string} id of the service.\n * @param {string} extension Name of the custom extension that provides the\n *     implementation of this service.\n * @param {boolean=} opt_element Whether this service is provided by an element,\n *     not the extension.\n * @return {!Promise<*>}\n */\nexport function getElementServiceForDoc(elementOrAmpDoc, id, extension,\n  opt_element) {\n  return getElementServiceIfAvailableForDoc(\n      elementOrAmpDoc, id, extension, opt_element)\n      .then(service => assertService(service, id, extension));\n}\n\n/**\n * Same as getElementService but produces null if the given element is not\n * actually available on the current page.\n * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n * @param {string} id of the service.\n * @param {string} extension Name of the custom extension that provides the\n *     implementation of this service.\n * @param {boolean=} opt_element Whether this service is provided by an\n *     element, not the extension.\n * @return {!Promise<?Object>}\n */\nexport function getElementServiceIfAvailableForDoc(\n  elementOrAmpDoc, id, extension, opt_element) {\n  const ampdoc = getAmpdoc(elementOrAmpDoc);\n  const s = getServicePromiseOrNullForDoc(elementOrAmpDoc, id);\n  if (s) {\n    return /** @type {!Promise<?Object>} */ (s);\n  }\n\n  return ampdoc.whenBodyAvailable()\n      .then(() => waitForExtensionIfPresent(\n          ampdoc.win, extension,\n          ampdoc.getHeadNode()))\n      .then(() => {\n        // If this service is provided by an element, then we can't depend on\n        // the service (they may not use the element).\n        if (opt_element) {\n          return getServicePromiseOrNullForDoc(elementOrAmpDoc, id);\n        } else if (isElementScheduled(ampdoc.win, extension)) {\n          return getServicePromiseForDoc(elementOrAmpDoc, id);\n        }\n        return null;\n      });\n}\n\n/**\n * Returns a promise for service for the given id in the embed scope of\n * a given node, if it exists. Otherwise, falls back to ampdoc scope IFF\n * the given node is in the top-level window.\n * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n * @param {string} id of the service.\n * @param {string} extension Name of the custom element that provides\n *     the implementation of this service.\n * @return {!Promise<?Object>}\n */\nexport function getElementServiceIfAvailableForDocInEmbedScope(\n  elementOrAmpDoc, id, extension) {\n  const s = getExistingServiceForDocInEmbedScope(elementOrAmpDoc, id);\n  if (s) {\n    return /** @type {!Promise<?Object>} */ (Promise.resolve(s));\n  }\n  // Return embed-scope element service promise if scheduled.\n  if (elementOrAmpDoc.nodeType) {\n    const win = toWin(elementOrAmpDoc.ownerDocument.defaultView);\n    const topWin = getTopWindow(win);\n    // In embeds, doc-scope services are window-scope. But make sure to\n    // only do this for embeds (not the top window), otherwise we'd grab\n    // a promise from the wrong service holder which would never resolve.\n    if (win !== topWin) {\n      return getElementServicePromiseOrNull(win, id, extension);\n    } else {\n      // Fallback to ampdoc IFF the given node is _not_ FIE.\n      return getElementServiceIfAvailableForDoc(elementOrAmpDoc, id, extension);\n    }\n  }\n  return /** @type {!Promise<?Object>} */ (Promise.resolve(null));\n}\n\n/**\n * Throws user error if `service` is null.\n * @param {Object} service\n * @param {string} id\n * @param {string} extension\n * @return {!Object}\n * @private\n */\nfunction assertService(service, id, extension) {\n  return /** @type {!Object} */ (user().assert(service,\n      'Service %s was requested to be provided through %s, ' +\n      'but %s is not loaded in the current page. To fix this ' +\n      'problem load the JavaScript file for %s in this page.',\n      id, extension, extension, extension));\n}\n\n/**\n * Get list of all the extension JS files\n * @param {HTMLHeadElement|Element|ShadowRoot} head\n * @return {!Array<string>}\n */\nexport function extensionScriptsInNode(head) {\n  // ampdoc.getHeadNode() can return null\n  if (!head) {\n    return [];\n  }\n  const scripts = [];\n  const list = head.querySelectorAll('script[custom-element]');\n  for (let i = 0; i < list.length; i++) {\n    scripts.push(list[i].getAttribute('custom-element'));\n  }\n  return scripts;\n}\n\n/**\n * Waits for body to be present then verifies that an extension script is\n * present in head for installation.\n * @param {!./service/ampdoc-impl.AmpDoc} ampdoc\n * @param {string} extensionId\n * @return {!Promise<boolean>}\n */\nexport function isExtensionScriptInNode(ampdoc, extensionId) {\n  return ampdoc.whenBodyAvailable()\n      .then(() => {\n        return extensionScriptInNode(\n            ampdoc.getHeadNode(), extensionId);\n      });\n}\n\n/**\n * Verifies that an extension script is present in head for\n * installation.\n * @param {HTMLHeadElement|Element|ShadowRoot} head\n * @param {string} extensionId\n * @private\n */\nfunction extensionScriptInNode(head, extensionId) {\n  return extensionScriptsInNode(head).includes(extensionId);\n}\n\n/**\n * Waits for an extension if its script is present\n * @param {!Window} win\n * @param {string} extension\n * @param {HTMLHeadElement|Element|ShadowRoot} head\n * @return {!Promise}\n * @private\n */\nfunction waitForExtensionIfPresent(win, extension, head) {\n  /**\n   * If there is an extension script wait for it to load before trying\n   * to get the service. Prevents a race condition when everything but\n   * the extensions is in cache. If there is no script then it's either\n   * not present, or the service was defined by a test. In those cases\n   * we don't wait around for an extension that does not exist.\n   */\n\n  // TODO(jpettitt) investigate registerExtension to short circuit\n  // the dom call in extensionScriptsInNode()\n  if (!extensionScriptInNode(head, extension)) {\n    return Promise.resolve();\n  }\n\n  const extensions = getService(win, 'extensions');\n  return /** @type {!Promise<?Object>} */ (\n    extensions.waitForExtension(win, extension));\n}\n\n/**\n * Returns the promise for service with `id` on the given window if available.\n * Otherwise, resolves with null (service was not registered).\n * @param {!Window} win\n * @param {string} id\n * @param {string} extension\n * @param {boolean=} opt_element\n * @return {!Promise<Object>}\n * @private\n */\nfunction getElementServicePromiseOrNull(win, id, extension, opt_element) {\n  return dom.waitForBodyPromise(win.document)\n      .then(() => waitForExtensionIfPresent(win, extension, win.document.head))\n      .then(() => {\n        // If this service is provided by an element, then we can't depend on\n        // the service (they may not use the element).\n        if (opt_element) {\n          return getServicePromiseOrNull(win, id);\n        } else if (isElementScheduled(win, extension)) {\n          return getServicePromise(win, id);\n        }\n        return null;\n      });\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nimport {AmpEvents} from './amp-events';\nimport {Services} from './services';\nimport {\n  USER_ERROR_SENTINEL,\n  dev,\n  duplicateErrorIfNecessary,\n  isUserErrorEmbed,\n  isUserErrorMessage,\n} from './log';\nimport {experimentTogglesOrNull, getBinaryType, isCanary} from './experiments';\nimport {exponentialBackoff} from './exponential-backoff';\nimport {getMode} from './mode';\nimport {isExperimentOn} from './experiments';\nimport {\n  isLoadErrorMessage,\n} from './event-helper';\nimport {isProxyOrigin} from './url';\nimport {makeBodyVisible} from './style-installer';\nimport {startsWith} from './string';\nimport {triggerAnalyticsEvent} from './analytics';\nimport {urls} from './config';\n\n/**\n * @const {string}\n */\nconst CANCELLED = 'CANCELLED';\n\n/**\n * @const {string}\n */\nconst BLOCK_BY_CONSENT = 'BLOCK_BY_CONSENT';\n\n\n/**\n * The threshold for errors throttled because nothing can be done about\n * them, but we'd still like to report the rough number.\n * @const {number}\n */\nconst NON_ACTIONABLE_ERROR_THROTTLE_THRESHOLD = 0.001;\n\n/**\n * The threshold for errors throttled because nothing can be done about\n * them, but we'd still like to report the rough number.\n * @const {number}\n */\nconst USER_ERROR_THROTTLE_THRESHOLD = 0.1;\n\n\n/**\n * Collects error messages, so they can be included in subsequent reports.\n * That allows identifying errors that might be caused by previous errors.\n */\nlet accumulatedErrorMessages = self.AMPErrors || [];\n// Use a true global, to avoid multi-module inclusion issues.\nself.AMPErrors = accumulatedErrorMessages;\n\n/**\n * Pushes element into array, keeping at most the most recent limit elements\n *\n * @param {!Array<T>} array\n * @param {T} element\n * @param {number} limit\n * @template T\n */\nfunction pushLimit(array, element, limit) {\n  if (array.length >= limit) {\n    array.splice(0, array.length - limit + 1);\n  }\n  array.push(element);\n}\n\n/**\n * A wrapper around our exponentialBackoff, to lazy initialize it to avoid an\n * un-DCE'able side-effect.\n * @param {function()} work the function to execute after backoff\n * @return {number} the setTimeout id\n */\nlet reportingBackoff = function(work) {\n  // Set reportingBackoff as the lazy-created function. JS Vooodoooo.\n  reportingBackoff = exponentialBackoff(1.5);\n  return reportingBackoff(work);\n};\n\n/**\n * Attempts to stringify a value, falling back to String.\n * @param {*} value\n * @return {string}\n */\nfunction tryJsonStringify(value) {\n  try {\n    // Cast is fine, because we really don't care here. Just trying.\n    return JSON.stringify(/** @type {!JsonObject} */ (value));\n  } catch (e) {\n    return String(value);\n  }\n}\n\n/**\n * The true JS engine, as detected by inspecting an Error stack. This should be\n * used with the userAgent to tell definitely. I.e., Chrome on iOS is really a\n * Safari JS engine.\n */\nlet detectedJsEngine;\n\n/**\n * @param {!Window} win\n * @param {*} error\n * @param {!Element=} opt_associatedElement\n */\nexport function reportErrorForWin(win, error, opt_associatedElement) {\n  reportError(error, opt_associatedElement);\n  if (error && !!win && isUserErrorMessage(error.message)\n      && !isUserErrorEmbed(error.message)) {\n    reportErrorToAnalytics(/** @type {!Error} */(error), win);\n  }\n}\n\n/**\n * Reports an error. If the error has an \"associatedElement\" property\n * the element is marked with the `i-amphtml-element-error` and displays\n * the message itself. The message is always send to the console.\n * If the error has a \"messageArray\" property, that array is logged.\n * This way one gets the native fidelity of the console for things like\n * elements instead of stringification.\n * @param {*} error\n * @param {!Element=} opt_associatedElement\n * @return {!Error}\n */\nexport function reportError(error, opt_associatedElement) {\n  try {\n    // Convert error to the expected type.\n    let isValidError;\n    if (error) {\n      if (error.message !== undefined) {\n        error = duplicateErrorIfNecessary(/** @type {!Error} */(error));\n        isValidError = true;\n      } else {\n        const origError = error;\n        error = new Error(tryJsonStringify(origError));\n        error.origError = origError;\n      }\n    } else {\n      error = new Error('Unknown error');\n    }\n    // Report if error is not an expected type.\n    if (!isValidError && getMode().localDev && !getMode().test) {\n      setTimeout(function() {\n        const rethrow = new Error(\n            '_reported_ Error reported incorrectly: ' + error);\n        throw rethrow;\n      });\n    }\n\n    if (error.reported) {\n      return /** @type {!Error} */ (error);\n    }\n    error.reported = true;\n\n    // Update element.\n    const element = opt_associatedElement || error.associatedElement;\n    if (element && element.classList) {\n      element.classList.add('i-amphtml-error');\n      if (getMode().development) {\n        element.classList.add('i-amphtml-element-error');\n        element.setAttribute('error-message', error.message);\n      }\n    }\n\n    // Report to console.\n    if (self.console) {\n      const output = (console.error || console.log);\n      if (error.messageArray) {\n        output.apply(console, error.messageArray);\n      } else {\n        if (element) {\n          output.call(console, error.message, element);\n        } else if (!getMode().minified) {\n          output.call(console, error.stack);\n        } else {\n          output.call(console, error.message);\n        }\n      }\n    }\n    if (element && element.dispatchCustomEventForTesting) {\n      element.dispatchCustomEventForTesting(AmpEvents.ERROR, error.message);\n    }\n\n    // 'call' to make linter happy. And .call to make compiler happy\n    // that expects some @this.\n    reportErrorToServer['call'](undefined, undefined, undefined, undefined,\n        undefined, error);\n  } catch (errorReportingError) {\n    setTimeout(function() {\n      throw errorReportingError;\n    });\n  }\n  return /** @type {!Error} */ (error);\n}\n\n/**\n * Returns an error for a cancellation of a promise.\n * @return {!Error}\n */\nexport function cancellation() {\n  return new Error(CANCELLED);\n}\n\n/**\n * @param {*} errorOrMessage\n * @return {boolean}\n */\nexport function isCancellation(errorOrMessage) {\n  if (!errorOrMessage) {\n    return false;\n  }\n  if (typeof errorOrMessage == 'string') {\n    return startsWith(errorOrMessage, CANCELLED);\n  }\n  if (typeof errorOrMessage.message == 'string') {\n    return startsWith(errorOrMessage.message, CANCELLED);\n  }\n  return false;\n}\n\n/**\n * Returns an error for component blocked by consent\n * @return {!Error}\n */\nexport function blockedByConsentError() {\n  return new Error(BLOCK_BY_CONSENT);\n}\n\n/**\n * @param {*} errorOrMessage\n * @return {boolean}\n */\nexport function isBlockedByConsent(errorOrMessage) {\n  if (!errorOrMessage) {\n    return false;\n  }\n  if (typeof errorOrMessage == 'string') {\n    return startsWith(errorOrMessage, BLOCK_BY_CONSENT);\n  }\n  if (typeof errorOrMessage.message == 'string') {\n    return startsWith(errorOrMessage.message, BLOCK_BY_CONSENT);\n  }\n  return false;\n}\n\n\n/**\n * Install handling of global unhandled exceptions.\n * @param {!Window} win\n */\nexport function installErrorReporting(win) {\n  win.onerror = /** @type {!Function} */ (reportErrorToServer);\n  win.addEventListener('unhandledrejection', event => {\n    if (event.reason &&\n      (event.reason.message === CANCELLED ||\n      event.reason.message === BLOCK_BY_CONSENT)) {\n      event.preventDefault();\n      return;\n    }\n    reportError(event.reason || new Error('rejected promise ' + event));\n  });\n}\n\n/**\n * Signature designed, so it can work with window.onerror\n * @param {string|undefined} message\n * @param {string|undefined} filename\n * @param {string|undefined} line\n * @param {string|undefined} col\n * @param {*|undefined} error\n * @this {!Window|undefined}\n */\nfunction reportErrorToServer(message, filename, line, col, error) {\n  // Make an attempt to unhide the body.\n  if (this && this.document) {\n    makeBodyVisible(this.document);\n  }\n  if (getMode().localDev || getMode().development || getMode().test) {\n    return;\n  }\n  let hasNonAmpJs = false;\n  try {\n    hasNonAmpJs = detectNonAmpJs(self);\n  } catch (ignore) {\n    // Ignore errors during error report generation.\n  }\n  if (hasNonAmpJs && Math.random() > 0.01) {\n    // Only report 1% of errors on pages with non-AMP JS.\n    // These errors can almost never be acted upon, but spikes such as\n    // due to buggy browser extensions may be helpful to notify authors.\n    return;\n  }\n  const data = getErrorReportData(message, filename, line, col, error,\n      hasNonAmpJs);\n  if (data) {\n    // Report the error to viewer if it has the capability. The data passed\n    // to the viewer is exactly the same as the data passed to the server\n    // below.\n    maybeReportErrorToViewer(this, data);\n    reportingBackoff(() => {\n      const xhr = new XMLHttpRequest();\n      xhr.open('POST', urls.errorReporting, true);\n      xhr.send(JSON.stringify(data));\n    });\n  }\n}\n\n/**\n * Passes the given error data to the viewer if the following criteria is met:\n * - The viewer is a trusted viewer\n * - The viewer has the `errorReporter` capability\n * - The AMP doc is in single doc mode\n * - The AMP doc is opted-in for error interception (`<html>` tag has the\n *   `report-errors-to-viewer` attribute)\n *\n * @param {!Window} win\n * @param {!JsonObject} data Data from `getErrorReportData`.\n * @return {!Promise<boolean>} `Promise<True>` if the error was sent to the\n *     viewer, `Promise<False>` otherwise.\n * @visibleForTesting\n */\nexport function maybeReportErrorToViewer(win, data) {\n  const ampdocService = Services.ampdocServiceFor(win);\n  if (!ampdocService.isSingleDoc()) {\n    return Promise.resolve(false);\n  }\n  const ampdocSingle = ampdocService.getAmpDoc();\n  const htmlElement = ampdocSingle.getRootNode().documentElement;\n  const docOptedIn = htmlElement.hasAttribute('report-errors-to-viewer');\n  if (!docOptedIn) {\n    return Promise.resolve(false);\n  }\n\n  const viewer = Services.viewerForDoc(ampdocSingle);\n  if (!viewer.hasCapability('errorReporter')) {\n    return Promise.resolve(false);\n  }\n\n  return viewer.isTrustedViewer().then(viewerTrusted => {\n    if (!viewerTrusted) {\n      return false;\n    }\n    viewer.sendMessage('error', data);\n    return true;\n  });\n}\n\n/**\n * Signature designed, so it can work with window.onerror\n * @param {string|undefined} message\n * @param {string|undefined} filename\n * @param {string|undefined} line\n * @param {string|undefined} col\n * @param {*|undefined} error\n * @param {boolean} hasNonAmpJs\n * @return {!JsonObject|undefined} The data to post\n * visibleForTesting\n */\nexport function getErrorReportData(message, filename, line, col, error,\n  hasNonAmpJs) {\n  let expected = false;\n  if (error) {\n    if (error.message) {\n      message = error.message;\n    } else {\n      // This should never be a string, but sometimes it is.\n      message = String(error);\n    }\n    // An \"expected\" error is still an error, i.e. some features are disabled\n    // or not functioning fully because of it. However, it's an expected\n    // error. E.g. as is the case with some browser API missing (storage).\n    // Thus, the error can be classified differently by log aggregators.\n    // The main goal is to monitor that an \"expected\" error doesn't deteriorate\n    // over time. It's impossible to completely eliminate it.\n    if (error.expected) {\n      expected = true;\n    }\n  }\n  if (!message) {\n    message = 'Unknown error';\n  }\n  if (/_reported_/.test(message)) {\n    return;\n  }\n  if (message == CANCELLED) {\n    return;\n  }\n\n  const detachedWindow = !(self && self.window);\n  const throttleBase = Math.random();\n\n  // We throttle load errors and generic \"Script error.\" errors\n  // that have no information and thus cannot be acted upon.\n  if (isLoadErrorMessage(message) ||\n    // See https://github.com/ampproject/amphtml/issues/7353\n    // for context.\n    message == 'Script error.' ||\n    // Window has become detached, really anything can happen\n    // at this point.\n    detachedWindow) {\n    expected = true;\n\n    if (throttleBase > NON_ACTIONABLE_ERROR_THROTTLE_THRESHOLD) {\n      return;\n    }\n  }\n\n  const isUserError = isUserErrorMessage(message);\n\n  // Only report a subset of user errors.\n  if (isUserError && throttleBase > USER_ERROR_THROTTLE_THRESHOLD) {\n    return;\n  }\n\n  // This is the App Engine app in\n  // https://github.com/ampproject/error-tracker\n  // It stores error reports via https://cloud.google.com/error-reporting/\n  // for analyzing production issues.\n  const data = /** @type {!JsonObject} */ (Object.create(null));\n  data['v'] = getMode().rtvVersion;\n  data['noAmp'] = hasNonAmpJs ? '1' : '0';\n  data['m'] = message.replace(USER_ERROR_SENTINEL, '');\n  data['a'] = isUserError ? '1' : '0';\n\n  // Errors are tagged with \"ex\" (\"expected\") label to allow loggers to\n  // classify these errors as benchmarks and not exceptions.\n  data['ex'] = expected ? '1' : '0';\n  data['dw'] = detachedWindow ? '1' : '0';\n\n  let runtime = '1p';\n  if (self.context && self.context.location) {\n    data['3p'] = '1';\n    runtime = '3p';\n  } else if (getMode().runtime) {\n    runtime = getMode().runtime;\n  }\n  data['rt'] = runtime;\n\n  // TODO(erwinm): Remove ca when all systems read `bt` instead of `ca` to\n  // identify js binary type.\n  data['ca'] = isCanary(self) ? '1' : '0';\n\n  // Pass binary type.\n  data['bt'] = getBinaryType(self);\n\n  if (self.location.ancestorOrigins && self.location.ancestorOrigins[0]) {\n    data['or'] = self.location.ancestorOrigins[0];\n  }\n  if (self.viewerState) {\n    data['vs'] = self.viewerState;\n  }\n  // Is embedded?\n  if (self.parent && self.parent != self) {\n    data['iem'] = '1';\n  }\n\n  if (self.AMP && self.AMP.viewer) {\n    const resolvedViewerUrl = self.AMP.viewer.getResolvedViewerUrl();\n    const messagingOrigin = self.AMP.viewer.maybeGetMessagingOrigin();\n    if (resolvedViewerUrl) {\n      data['rvu'] = resolvedViewerUrl;\n    }\n    if (messagingOrigin) {\n      data['mso'] = messagingOrigin;\n    }\n  }\n\n  if (!detectedJsEngine) {\n    detectedJsEngine = detectJsEngineFromStack();\n  }\n  data['jse'] = detectedJsEngine;\n\n  const exps = [];\n  const experiments = experimentTogglesOrNull(self);\n  for (const exp in experiments) {\n    const on = experiments[exp];\n    exps.push(`${exp}=${on ? '1' : '0'}`);\n  }\n  data['exps'] = exps.join(',');\n\n  if (error) {\n    const tagName = error.associatedElement\n      ? error.associatedElement.tagName\n      : 'u'; // Unknown\n    data['el'] = tagName;\n\n    if (error.args) {\n      data['args'] = JSON.stringify(error.args);\n    }\n\n    if (!isUserError && !error.ignoreStack && error.stack) {\n      data['s'] = error.stack;\n    }\n\n    error.message += ' _reported_';\n  } else {\n    data['f'] = filename || '';\n    data['l'] = line || '';\n    data['c'] = col || '';\n  }\n  data['r'] = self.document.referrer;\n  data['ae'] = accumulatedErrorMessages.join(',');\n  data['fr'] = self.location.originalHash || self.location.hash;\n\n  pushLimit(accumulatedErrorMessages, message, 25);\n\n  return data;\n}\n\n/**\n * Returns true if it appears like there is non-AMP JS on the\n * current page.\n * @param {!Window} win\n * @return {boolean}\n * @visibleForTesting\n */\nexport function detectNonAmpJs(win) {\n  const scripts = win.document.querySelectorAll('script[src]');\n  for (let i = 0; i < scripts.length; i++) {\n    if (!isProxyOrigin(scripts[i].src.toLowerCase())) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Resets accumulated error messages for testing\n */\nexport function resetAccumulatedErrorMessagesForTesting() {\n  accumulatedErrorMessages = [];\n}\n\n/**\n * Does a series of checks on the stack of an thrown error to determine the\n * JS engine that is currently running. This gives a bit more information than\n * just the UserAgent, since browsers often allow overriding it to \"emulate\"\n * mobile.\n * @return {string}\n * @visibleForTesting\n */\nexport function detectJsEngineFromStack() {\n  /** @constructor */\n  function Fn() {}\n  Fn.prototype.t = function() {\n    throw new Error('message');\n  };\n  const object = new Fn();\n  try {\n    object.t();\n  } catch (e) {\n    const {stack} = e;\n\n    // Safari only mentions the method name.\n    if (startsWith(stack, 't@')) {\n      return 'Safari';\n    }\n\n    // Firefox mentions \"prototype\".\n    if (stack.indexOf('.prototype.t@') > -1) {\n      return 'Firefox';\n    }\n\n    // IE looks like Chrome, but includes a context for the base stack line.\n    // Explicitly, we're looking for something like:\n    // \"    at Global code (https://example.com/app.js:1:200)\" or\n    // \"    at Anonymous function (https://example.com/app.js:1:200)\"\n    // vs Chrome which has:\n    // \"    at https://example.com/app.js:1:200\"\n    const last = stack.split('\\n').pop();\n    if (/\\bat .* \\(/i.test(last)) {\n      return 'IE';\n    }\n\n    // Finally, chrome includes the error message in the stack.\n    if (startsWith(stack, 'Error: message')) {\n      return 'Chrome';\n    }\n  }\n\n  return 'unknown';\n}\n\n/**\n * @param {!Error} error\n * @param {!Window} win\n */\nexport function reportErrorToAnalytics(error, win) {\n  if (isExperimentOn(win, 'user-error-reporting')) {\n    const vars = {\n      'errorName': error.name,\n      'errorMessage': error.message,\n    };\n    triggerAnalyticsEvent(getRootElement_(win), 'user-error', vars);\n  }\n}\n\n/**\n * @param {!Window} win\n * @return {!Element}\n * @private\n */\nfunction getRootElement_(win) {\n  const root = Services.ampdocServiceFor(win).getAmpDoc().getRootNode();\n  return dev().assertElement(root.documentElement || root.body || root);\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n  * Whether addEventListener supports options or only takes capture as a boolean\n  * @type {boolean|undefined}\n  * @visibleForTesting\n  */\nlet optsSupported;\n\n/**\n * Listens for the specified event on the element.\n *\n * Do not use this directly. This method is implemented as a shared\n * dependency. Use `listen()` in either `event-helper` or `3p-frame-messaging`,\n * depending on your use case.\n *\n * @param {!EventTarget} element\n * @param {string} eventType\n * @param {function(!Event)} listener\n * @param {Object=} opt_evtListenerOpts\n * @return {!UnlistenDef}\n */\nexport function internalListenImplementation(element, eventType, listener,\n  opt_evtListenerOpts) {\n  let localElement = element;\n  let localListener = listener;\n  /**\n   * @type {?Function}\n   */\n  let wrapped;\n\n  wrapped = event => {\n    try {\n      return localListener(event);\n    } catch (e) {\n      // reportError is installed globally per window in the entry point.\n      self.reportError(e);\n      throw e;\n    }\n  };\n  const optsSupported = detectEvtListenerOptsSupport();\n  let capture = false;\n  if (opt_evtListenerOpts) {\n    capture = opt_evtListenerOpts.capture;\n  }\n  localElement.addEventListener(\n      eventType,\n      wrapped,\n      optsSupported ? opt_evtListenerOpts : capture\n  );\n  return () => {\n    if (localElement) {\n      localElement.removeEventListener(\n          eventType,\n          wrapped,\n          optsSupported ? opt_evtListenerOpts : capture\n      );\n    }\n    // Ensure these are GC'd\n    localListener = null;\n    localElement = null;\n    wrapped = null;\n  };\n}\n\n/**\n * Tests whether the browser supports options as an argument of addEventListener\n * or not.\n *\n * @return {boolean}\n */\nexport function detectEvtListenerOptsSupport() {\n  // Only run the test once\n  if (optsSupported !== undefined) {\n    return optsSupported;\n  }\n\n  optsSupported = false;\n  try {\n    // Test whether browser supports EventListenerOptions or not\n    const options = {\n      get capture() {\n        optsSupported = true;\n      },\n    };\n    self.addEventListener('test-options', null, options);\n    self.removeEventListener('test-options', null, options);\n  } catch (err) {\n    // EventListenerOptions are not supported\n  }\n  return optsSupported;\n}\n\n/**\n  * Resets the test for whether addEventListener supports options or not.\n  */\nexport function resetEvtListenerOptsSupportForTesting() {\n  optsSupported = undefined;\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {internalListenImplementation} from './event-helper-listen';\nimport {user} from './log';\n\n/** @const {string}  */\nconst LOAD_FAILURE_PREFIX = 'Failed to load:';\n\n/**\n * Returns a CustomEvent with a given type and detail; supports fallback for IE.\n * @param {!Window} win\n * @param {string} type\n * @param {!JsonObject|string|undefined|null} detail\n * @param {EventInit=} opt_eventInit\n * @return {!Event}\n */\nexport function createCustomEvent(win, type, detail, opt_eventInit) {\n  const eventInit = /** @type {!CustomEventInit} */ ({detail});\n  Object.assign(eventInit, opt_eventInit);\n  // win.CustomEvent is a function on Edge, Chrome, FF, Safari but\n  // is an object on IE 11.\n  if (typeof win.CustomEvent == 'function') {\n    return new win.CustomEvent(type, eventInit);\n  } else {\n    // Deprecated fallback for IE.\n    const e = win.document.createEvent('CustomEvent');\n    e.initCustomEvent(\n        type, !!eventInit.bubbles, !!eventInit.cancelable, detail);\n    return e;\n  }\n}\n\n/**\n * Listens for the specified event on the element.\n * @param {!EventTarget} element\n * @param {string} eventType\n * @param {function(!Event)} listener\n * @param {Object=} opt_evtListenerOpts\n * @return {!UnlistenDef}\n */\nexport function listen(element, eventType, listener, opt_evtListenerOpts) {\n  return internalListenImplementation(\n      element, eventType, listener, opt_evtListenerOpts);\n}\n\n/**\n * Returns the data property of an event with the correct type.\n * @param {!Event|{data: !JsonObject}} event\n * @return {?JsonObject|string|undefined}\n */\nexport function getData(event) {\n  return /** @type {?JsonObject|string|undefined} */ (event.data);\n}\n\n/**\n * Returns the detail property of an event with the correct type.\n * @param {!Event|{detail: !JsonObject}} event\n * @return {?JsonObject|string|undefined}\n */\nexport function getDetail(event) {\n  return /** @type {?JsonObject|string|undefined} */ (event.detail);\n}\n\n/**\n * Listens for the specified event on the element and removes the listener\n * as soon as event has been received.\n * @param {!EventTarget} element\n * @param {string} eventType\n * @param {function(!Event)} listener\n * @param {Object=} opt_evtListenerOpts\n * @return {!UnlistenDef}\n */\nexport function listenOnce(element, eventType, listener, opt_evtListenerOpts) {\n  let localListener = listener;\n  const unlisten = internalListenImplementation(element, eventType, event => {\n    try {\n      localListener(event);\n    } finally {\n      // Ensure listener is GC'd\n      localListener = null;\n      unlisten();\n    }\n  }, opt_evtListenerOpts);\n  return unlisten;\n}\n\n\n/**\n * Returns  a promise that will resolve as soon as the specified event has\n * fired on the element.\n * @param {!EventTarget} element\n * @param {string} eventType\n * @param {Object=} opt_evtListenerOpts\n * @param {function(!UnlistenDef)=} opt_cancel An optional function that, when\n *     provided, will be called with the unlistener. This gives the caller\n *     access to the unlistener, so it may be called manually when necessary.\n * @return {!Promise<!Event>}\n */\nexport function listenOncePromise(element, eventType, opt_evtListenerOpts,\n  opt_cancel) {\n  let unlisten;\n  const eventPromise = new Promise(resolve => {\n    unlisten = listenOnce(element, eventType, resolve, opt_evtListenerOpts);\n  });\n  eventPromise.then(unlisten, unlisten);\n  if (opt_cancel) {\n    opt_cancel(unlisten);\n  }\n  return eventPromise;\n}\n\n\n/**\n * Whether the specified element/window has been loaded already.\n * @param {!Element|!Window} eleOrWindow\n * @return {boolean}\n */\nexport function isLoaded(eleOrWindow) {\n  return !!(eleOrWindow.complete || eleOrWindow.readyState == 'complete'\n      // If the passed in thing is a Window, infer loaded state from\n      //\n      || (eleOrWindow.document\n          && eleOrWindow.document.readyState == 'complete'));\n}\n\n/**\n * Returns a promise that will resolve or fail based on the eleOrWindow's 'load'\n * and 'error' events. Optionally this method takes a timeout, which will reject\n * the promise if the resource has not loaded by then.\n * @param {T} eleOrWindow Supports both Elements and as a special case Windows.\n * @return {!Promise<T>}\n * @template T\n */\nexport function loadPromise(eleOrWindow) {\n  let unlistenLoad;\n  let unlistenError;\n  if (isLoaded(eleOrWindow)) {\n    return Promise.resolve(eleOrWindow);\n  }\n  const loadingPromise = new Promise((resolve, reject) => {\n    // Listen once since IE 5/6/7 fire the onload event continuously for\n    // animated GIFs.\n    const {tagName} = eleOrWindow;\n    if (tagName === 'AUDIO' || tagName === 'VIDEO') {\n      unlistenLoad = listenOnce(eleOrWindow, 'loadstart', resolve);\n    } else {\n      unlistenLoad = listenOnce(eleOrWindow, 'load', resolve);\n    }\n    // For elements, unlisten on error (don't for Windows).\n    if (tagName) {\n      unlistenError = listenOnce(eleOrWindow, 'error', reject);\n    }\n  });\n\n  return loadingPromise.then(() => {\n    if (unlistenError) {\n      unlistenError();\n    }\n    return eleOrWindow;\n  }, () => {\n    if (unlistenLoad) {\n      unlistenLoad();\n    }\n    failedToLoad(eleOrWindow);\n  });\n}\n\n/**\n * Emit error on load failure.\n * @param {!Element|!Window} eleOrWindow Supports both Elements and as a special\n *     case Windows.\n */\nfunction failedToLoad(eleOrWindow) {\n  // Report failed loads as user errors so that they automatically go\n  // into the \"document error\" bucket.\n  let target = eleOrWindow;\n  if (target && target.src) {\n    target = target.src;\n  }\n  throw user().createError(LOAD_FAILURE_PREFIX, target);\n}\n\n/**\n * Returns true if this error message is was created for a load error.\n * @param {string} message An error message\n * @return {boolean}\n */\nexport function isLoadErrorMessage(message) {\n  return message.indexOf(LOAD_FAILURE_PREFIX) != -1;\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Experiments system allows a developer to opt-in to test\n * features that are not yet fully tested.\n *\n * Experiments page: https://cdn.ampproject.org/experiments.html *\n */\n\nimport {getCookie, setCookie} from './cookies';\nimport {hasOwn} from './utils/object';\nimport {parseQueryString} from './url';\n\n/** @const {string} */\nconst COOKIE_NAME = 'AMP_EXP';\n\n/** @const {number} */\nconst COOKIE_MAX_AGE_DAYS = 180; // 6 month\n\n/** @const {time} */\nconst COOKIE_EXPIRATION_INTERVAL = COOKIE_MAX_AGE_DAYS * 24 * 60 * 60 * 1000;\n\n/** @const {string} */\nconst TOGGLES_WINDOW_PROPERTY = '__AMP__EXPERIMENT_TOGGLES';\n\n/**\n * @typedef {{\n *   isTrafficEligible: function(!Window):boolean,\n *   branches: !Array<string>\n * }}\n */\nexport let ExperimentInfo;\n\n/**\n * Whether we are in canary.\n * @param {!Window} win\n * @return {boolean}\n */\nexport function isCanary(win) {\n  return !!(win.AMP_CONFIG && win.AMP_CONFIG.canary);\n}\n\n/**\n * Returns binary type, e.g., canary, control, or production.\n * @param {!Window} win\n * @return {string}\n */\nexport function getBinaryType(win) {\n  return win.AMP_CONFIG && win.AMP_CONFIG.type ?\n    win.AMP_CONFIG.type : 'unknown';\n}\n\n/**\n * Whether the specified experiment is on or off.\n * @param {!Window} win\n * @param {string} experimentId\n * @return {boolean}\n */\nexport function isExperimentOn(win, experimentId) {\n  const toggles = experimentToggles(win);\n  return !!toggles[experimentId];\n}\n\n/**\n * Toggles the experiment on or off. Returns the actual value of the experiment\n * after toggling is done.\n * @param {!Window} win\n * @param {string} experimentId\n * @param {boolean=} opt_on\n * @param {boolean=} opt_transientExperiment  Whether to toggle the\n *     experiment state \"transiently\" (i.e., for this page load only) or\n *     durably (by saving the experiment IDs to the cookie after toggling).\n *     Default: false (save durably).\n * @return {boolean} New state for experimentId.\n */\nexport function toggleExperiment(win, experimentId, opt_on,\n  opt_transientExperiment) {\n  const currentlyOn = isExperimentOn(win, /*OK*/experimentId);\n  const on = !!(opt_on !== undefined ? opt_on : !currentlyOn);\n  if (on != currentlyOn) {\n    const toggles = experimentToggles(win);\n    toggles[experimentId] = on;\n\n    if (!opt_transientExperiment) {\n      const cookieToggles = getExperimentTogglesFromCookie(win);\n      cookieToggles[experimentId] = on;\n      saveExperimentTogglesToCookie(win, cookieToggles);\n    }\n  }\n  return on;\n}\n\n/**\n * Calculate whether the experiment is on or off based off of the\n * cookieFlag or the global config frequency given.\n * @param {!Window} win\n * @return {!Object<string, boolean>}\n */\nexport function experimentToggles(win) {\n  if (win[TOGGLES_WINDOW_PROPERTY]) {\n    return win[TOGGLES_WINDOW_PROPERTY];\n  }\n  win[TOGGLES_WINDOW_PROPERTY] = Object.create(null);\n  const toggles = win[TOGGLES_WINDOW_PROPERTY];\n\n  // Read the default config of this build.\n  if (win.AMP_CONFIG) {\n    for (const experimentId in win.AMP_CONFIG) {\n      const frequency = win.AMP_CONFIG[experimentId];\n      if (typeof frequency === 'number' && frequency >= 0 && frequency <= 1) {\n        toggles[experimentId] = Math.random() < frequency;\n      }\n    }\n  }\n  // Read document level override from meta tag.\n  if (win.AMP_CONFIG\n      && Array.isArray(win.AMP_CONFIG['allow-doc-opt-in'])\n      && win.AMP_CONFIG['allow-doc-opt-in'].length > 0) {\n    const allowed = win.AMP_CONFIG['allow-doc-opt-in'];\n    const meta =\n        win.document.head.querySelector('meta[name=\"amp-experiments-opt-in\"]');\n    if (meta) {\n      const optedInExperiments = meta.getAttribute('content').split(',');\n      for (let i = 0; i < optedInExperiments.length; i++) {\n        if (allowed.indexOf(optedInExperiments[i]) != -1) {\n          toggles[optedInExperiments[i]] = true;\n        }\n      }\n    }\n  }\n\n  Object.assign(toggles, getExperimentTogglesFromCookie(win));\n\n  if (win.AMP_CONFIG\n      && Array.isArray(win.AMP_CONFIG['allow-url-opt-in'])\n      && win.AMP_CONFIG['allow-url-opt-in'].length > 0) {\n    const allowed = win.AMP_CONFIG['allow-url-opt-in'];\n    const hash = win.location.originalHash || win.location.hash;\n    const params = parseQueryString(hash);\n    for (let i = 0; i < allowed.length; i++) {\n      const param = params[`e-${allowed[i]}`];\n      if (param == '1') {\n        toggles[allowed[i]] = true;\n      }\n      if (param == '0') {\n        toggles[allowed[i]] = false;\n      }\n    }\n  }\n  return toggles;\n}\n\n/**\n * Returns the cached experiments toggles, or null if they have not been\n * computed yet.\n * @param {!Window} win\n * @return {Object<string, boolean>}\n */\nexport function experimentTogglesOrNull(win) {\n  return win[TOGGLES_WINDOW_PROPERTY] || null;\n}\n\n/**\n * Returns a set of experiment IDs currently on.\n * @param {!Window} win\n * @return {!Object<string, boolean>}\n */\nfunction getExperimentTogglesFromCookie(win) {\n  const experimentCookie = getCookie(win, COOKIE_NAME);\n  const tokens = experimentCookie ? experimentCookie.split(/\\s*,\\s*/g) : [];\n\n  const toggles = Object.create(null);\n  for (let i = 0; i < tokens.length; i++) {\n    if (tokens[i].length == 0) {\n      continue;\n    }\n    if (tokens[i][0] == '-') {\n      toggles[tokens[i].substr(1)] = false;\n    } else {\n      toggles[tokens[i]] = true;\n    }\n  }\n\n  return toggles;\n}\n\n/**\n * Saves a set of experiment IDs currently on.\n * @param {!Window} win\n * @param {!Object<string, boolean>} toggles\n */\nfunction saveExperimentTogglesToCookie(win, toggles) {\n  const experimentIds = [];\n  for (const experiment in toggles) {\n    experimentIds.push((toggles[experiment] === false ? '-' : '') + experiment);\n  }\n\n  setCookie(win, COOKIE_NAME, experimentIds.join(','),\n      Date.now() + COOKIE_EXPIRATION_INTERVAL, {\n        // Set explicit domain, so the cookie gets send to sub domains.\n        domain: win.location.hostname,\n        allowOnProxyOrigin: true,\n      });\n}\n\n/**\n * See getExperimentTogglesFromCookie().\n * @param {!Window} win\n * @return {!Object<string, boolean>}\n * @visibleForTesting\n */\nexport function getExperimentToglesFromCookieForTesting(win) {\n  return getExperimentTogglesFromCookie(win);\n}\n\n/**\n * Resets the experimentsToggle cache for testing purposes.\n * @param {!Window} win\n * @visibleForTesting\n */\nexport function resetExperimentTogglesForTesting(win) {\n  setCookie(win, COOKIE_NAME, '', 0, {\n    domain: win.location.hostname,\n  });\n  win[TOGGLES_WINDOW_PROPERTY] = null;\n}\n\n/**\n * In some browser implementations of Math.random(), sequential calls of\n * Math.random() are correlated and can cause a bias.  In particular,\n * if the previous random() call was < 0.001 (as it will be if we select\n * into an experiment), the next value could be less than 0.5 more than\n * 50.7% of the time.  This provides an implementation that roots down into\n * the crypto API, when available, to produce less biased samples.\n *\n * @return {number} Pseudo-random floating-point value on the range [0, 1).\n */\nfunction slowButAccuratePrng() {\n  // TODO(tdrl): Implement.\n  return Math.random();\n}\n\n/**\n * Container for alternate random number generator implementations.  This\n * allows us to set an \"accurate\" PRNG for branch selection, but to mock it\n * out easily in tests.\n *\n * @visibleForTesting\n * @const {!{accuratePrng: function():number}}\n */\nexport const RANDOM_NUMBER_GENERATORS = {\n  accuratePrng: slowButAccuratePrng,\n};\n\n/**\n * Selects, uniformly at random, a single item from the array.\n * @param {!Array<string>} arr Object to select from.\n * @return {?string} Single item from arr or null if arr was empty.\n */\nfunction selectRandomItem(arr) {\n  const rn = RANDOM_NUMBER_GENERATORS.accuratePrng();\n  return arr[Math.floor(rn * arr.length)] || null;\n}\n\n/**\n * Selects which page-level experiment branches are enabled. If a given\n * experiment name is already set (including to the null / no branches selected\n * state), this won't alter its state.\n *\n * Check whether a given experiment is set using isExperimentOn(win,\n * experimentName) and, if it is on, look for which branch is selected in\n * win.experimentBranches[experimentName].\n *\n * @param {!Window} win Window context on which to save experiment\n *     selection state.\n * @param {!Object<string, !ExperimentInfo>} experiments  Set of experiments to\n *     configure for this page load.\n * @return {!Object<string, string>} Map of experiment names to selected\n *     branches.\n */\nexport function randomlySelectUnsetExperiments(win, experiments) {\n  win.experimentBranches = win.experimentBranches || {};\n  const selectedExperiments = {};\n  for (const experimentName in experiments) {\n    // Skip experimentName if it is not a key of experiments object or if it\n    // has already been populated by some other property.\n    if (!hasOwn(experiments, experimentName)) {\n      continue;\n    }\n    if (hasOwn(win.experimentBranches, experimentName)) {\n      selectedExperiments[experimentName] =\n          win.experimentBranches[experimentName];\n      continue;\n    }\n\n    if (!experiments[experimentName].isTrafficEligible ||\n        !experiments[experimentName].isTrafficEligible(win)) {\n      win.experimentBranches[experimentName] = null;\n      continue;\n    }\n\n    // If we're in the experiment, but we haven't already forced a specific\n    // experiment branch (e.g., via a test setup), then randomize the branch\n    // choice.\n    if (!win.experimentBranches[experimentName] &&\n      isExperimentOn(win, /*OK*/experimentName)) {\n      const {branches} = experiments[experimentName];\n      win.experimentBranches[experimentName] = selectRandomItem(branches);\n      selectedExperiments[experimentName] =\n          win.experimentBranches[experimentName];\n    }\n  }\n  return selectedExperiments;\n}\n\n/**\n * Returns the experiment branch enabled for the given experiment ID.\n * For example, 'control' or 'experiment'.\n *\n * @param {!Window} win Window context to check for experiment state.\n * @param {string} experimentName Name of the experiment to check.\n * @return {?string} Active experiment branch ID for experimentName (possibly\n *     null if experimentName has been tested but no branch was enabled).\n */\nexport function getExperimentBranch(win, experimentName) {\n  return win.experimentBranches ? win.experimentBranches[experimentName] : null;\n}\n\n/**\n * Force enable (or disable) a specific branch of a given experiment name.\n * Disables the experiment name altogether if branchId is falseish.\n *\n * @param {!Window} win Window context to check for experiment state.\n * @param {string} experimentName Name of the experiment to check.\n * @param {?string} branchId ID of branch to force or null to disable\n *     altogether.\n * @visibleForTesting\n */\nexport function forceExperimentBranch(win, experimentName, branchId) {\n  win.experimentBranches = win.experimentBranches || {};\n  toggleExperiment(win, experimentName, !!branchId, true);\n  win.experimentBranches[experimentName] = branchId;\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * @param {number=} opt_base Exponential base. Defaults to 2.\n * @return {function(function()): number} Function that when invoked will\n *     call the passed in function. On every invocation the next\n *     invocation of the passed in function will be exponentially\n *     later. Returned function returns timeout id.\n */\nexport function exponentialBackoff(opt_base) {\n  const getTimeout = exponentialBackoffClock(opt_base);\n  return work => {\n    return setTimeout(work, getTimeout());\n  };\n}\n\n/**\n * @param {number=} opt_base Exponential base. Defaults to 2.\n * @return {function(): number} Function that when invoked will return\n *    a number that exponentially grows per invocation.\n */\nexport function exponentialBackoffClock(opt_base) {\n  const base = opt_base || 2;\n  let count = 0;\n  return () => {\n    let wait = Math.pow(base, count++);\n    wait += getJitter(wait);\n    return wait * 1000;\n  };\n}\n\n/**\n * Add jitter to avoid the thundering herd. This can e.g. happen when\n * we poll a backend and it fails for everyone at the same time.\n * We add up to 30% (default) longer or shorter than the given time.\n *\n * @param {number} wait the amount if base milliseconds\n * @param {number=} opt_perc the min/max percentage to add or sutract\n * @return {number}\n */\nexport function getJitter(wait, opt_perc) {\n  opt_perc = opt_perc || .3;\n  let jitter = wait * opt_perc * Math.random();\n  if (Math.random() > .5) {\n    jitter *= -1;\n  }\n  return jitter;\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {dev} from './log';\nimport {getFormAsObject} from './form';\nimport {map} from './utils/object';\n\n/**\n * A wrapper for a native `FormData` object that allows the retrieval of entries\n * in the form data after construction even on browsers that don't natively\n * support `FormData.prototype.entries`.\n *\n * @final\n * @note Subclassing `FormData` doesn't work in this case as the transpiler\n *     generates code that calls the super constructor directly using\n *     `Function.prototype.call`. WebKit (Safari) doesn't allow this and\n *     enforces that constructors be called with the `new` operator.\n */\nexport class FormDataWrapper {\n  /**\n   * Creates a new wrapper for a `FormData` object.\n   *\n   * If there's no native `FormData#entries`, chances are there are no native\n   * methods to read the content of the `FormData` after construction, so the\n   * only way to implement `entries` in this class is to capture the fields in\n   * the form passed to the constructor (and the arguments passed to the\n   * `append` method).\n   *\n   * For more details on this, see http://mdn.io/FormData.\n   *\n   * @param {!HTMLFormElement=} opt_form An HTML `<form>` element  when\n   *     specified, the `FormData` object will be populated with the form's\n   *     current keys/values using the name property of each element for the\n   *     keys and their submitted value for the values. It will also encode file\n   *     input content.\n   */\n  constructor(opt_form = undefined) {\n    /** @private @const {!FormData} */\n    this.formData_ = new FormData(opt_form);\n\n    /** @private @const {?Object<string, !Array<string>>} */\n    this.fieldValues_ =\n        this.formData_['entries'] ?\n          null :\n          (opt_form ? getFormAsObject(opt_form) : map());\n  }\n\n  /**\n   * Appends a new value onto an existing key inside a `FormData` object, or\n   * adds the key if it does not already exist.\n   *\n   * If there's no native `FormData#entries`, chances are there are no native\n   * methods to read the content of the `FormData` after construction, so the\n   * only way to implement `entries` in this class is to capture the arguments\n   * passed to the `append` method (and the form passed to the constructor).\n   *\n   * Since AMP doesn't support `<input type=\"file\">`, appending a `File` object\n   * is not supported and the `filename` parameter is ignored for this wrapper.\n   *\n   * For more details on this, see http://mdn.io/FormData/append.\n   *\n   * @param {string} name The name of the field whose data is contained in\n   *     `value`.\n   * @param {string} value The field's value.\n   */\n  append(name, value) {\n    if (!this.formData_['entries']) {\n      const nameString = String(name);\n      this.fieldValues_[nameString] = this.fieldValues_[nameString] || [];\n      this.fieldValues_[name].push(String(value));\n    }\n\n    return this.formData_.append(name, value);\n  }\n\n  /**\n   * Returns an iterator of all key/value pairs contained in this object.\n   *\n   * For more details on this, see http://mdn.io/FormData/entries.\n   *\n   * @return {!Iterator<!Array<string>>}\n   */\n  entries() {\n    if (this.formData_['entries']) {\n      return this.formData_['entries']();\n    }\n\n    const fieldEntries = [];\n    const fieldValues = /** @type {!Object<string, !Array<string>>} */ (\n      dev().assert(this.fieldValues_));\n    Object.keys(fieldValues).forEach(name => {\n      const values = fieldValues[name];\n      values.forEach(value => fieldEntries.push([name, value]));\n    });\n\n    // Generator functions are not supported by the current Babel configuration,\n    // so we must manually implement the iterator interface.\n    let nextIndex = 0;\n    return /** @type {!Iterator<!Array<string>>} */ ({\n      next() {\n        return nextIndex < fieldEntries.length ?\n          {value: fieldEntries[nextIndex++], done: false} :\n          {value: undefined, done: true};\n      },\n    });\n  }\n\n  /**\n   * Returns the wrapped native `FormData` object.\n   *\n   * @return {!FormData}\n   */\n  getFormData() {\n    return this.formData_;\n  }\n}\n\n/**\n * Check if the given object is a FormDataWrapper instance\n * @param {*} o\n * @return {boolean} True if the object is a FormDataWrapper instance.\n */\nexport function isFormDataWrapper(o) {\n  // instanceof doesn't work as expected, so we detect with duck-typing.\n  return !!o && typeof o.getFormData == 'function';\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ancestorElementsByTag} from './dom';\n\n/** @const {string} */\nconst FORM_PROP_ = '__AMP_FORM';\n\n/**\n * @param {!Element} element\n * @return {../extensions/amp-form/0.1/amp-form.AmpForm}\n */\nexport function formOrNullForElement(element) {\n  return element[FORM_PROP_] || null;\n}\n\n/**\n * @param {!Element} element\n * @param {!../extensions/amp-form/0.1/amp-form.AmpForm} form\n */\nexport function setFormForElement(element, form) {\n  element[FORM_PROP_] = form;\n}\n\n/**\n * Returns form data in the passed-in form as an object.\n * @param {!HTMLFormElement} form\n * @return {!JsonObject}\n */\nexport function getFormAsObject(form) {\n  const data = /** @type {!JsonObject} */ ({});\n  const inputs = form.elements;\n  const submittableTagsRegex = /^(?:input|select|textarea)$/i;\n  const unsubmittableTypesRegex = /^(?:button|image|file|reset)$/i;\n  const checkableType = /^(?:checkbox|radio)$/i;\n  for (let i = 0; i < inputs.length; i++) {\n    const input = inputs[i];\n    if (!input.name || isDisabled(input) ||\n        !submittableTagsRegex.test(input.tagName) ||\n        unsubmittableTypesRegex.test(input.type) ||\n        (checkableType.test(input.type) && !input.checked)) {\n      continue;\n    }\n\n    if (data[input.name] === undefined) {\n      data[input.name] = [];\n    }\n    data[input.name].push(input.value);\n  }\n\n  return data;\n}\n\n/**\n * Checks if a field is disabled.\n * @param {!Element} element\n * @private\n */\nfunction isDisabled(element) {\n  if (element.disabled) {\n    return true;\n  }\n\n  const ancestors = ancestorElementsByTag(element, 'fieldset');\n  for (let i = 0; i < ancestors.length; i++) {\n    if (ancestors[i].disabled) {\n      return true;\n    }\n  }\n  return false;\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview This module declares JSON types as defined in the\n * {@link http://json.org/}.\n */\n\nimport {isObject} from './types';\n\n\n// NOTE Type are changed to {*} because of\n// https://github.com/google/closure-compiler/issues/1999\n\n/**\n * JSON scalar. It's either string, number or boolean.\n * @typedef {*} should be string|number|boolean\n */\nlet JSONScalarDef;\n\n\n/**\n * JSON object. It's a map with string keys and JSON values.\n * @typedef {*} should be !Object<string, ?JSONValueDef>\n */\nlet JSONObjectDef;\n\n\n/**\n * JSON array. It's an array with JSON values.\n * @typedef {*} should be !Array<?JSONValueDef>\n */\nlet JSONArrayDef;\n\n\n/**\n * JSON value. It's either a scalar, an object or an array.\n * @typedef {*} should be !JSONScalarDef|!JSONObjectDef|!JSONArrayDef\n */\nlet JSONValueDef;\n\n/**\n * Recreates objects with prototype-less copies.\n * @param {!JsonObject} obj\n * @return {!JsonObject}\n */\nexport function recreateNonProtoObject(obj) {\n  const copy = Object.create(null);\n  for (const k in obj) {\n    if (!hasOwnProperty(obj, k)) {\n      continue;\n    }\n    const v = obj[k];\n    copy[k] = isObject(v) ? recreateNonProtoObject(v) : v;\n  }\n  return /** @type {!JsonObject} */ (copy);\n}\n\n/**\n * Returns a value from an object for a field-based expression. The expression\n * is a simple nested dot-notation of fields, such as `field1.field2`. If any\n * field in a chain does not exist or is not an object or array, the returned\n * value will be `undefined`.\n *\n * @param {!JsonObject} obj\n * @param {string} expr\n * @return {*}\n */\nexport function getValueForExpr(obj, expr) {\n  // The `.` indicates \"the object itself\".\n  if (expr == '.') {\n    return obj;\n  }\n  // Otherwise, navigate via properties.\n  const parts = expr.split('.');\n  let value = obj;\n  for (let i = 0; i < parts.length; i++) {\n    const part = parts[i];\n    if (part &&\n        value &&\n        value[part] !== undefined &&\n        hasOwnProperty(value, part)\n    ) {\n      value = value[part];\n      continue;\n    }\n    value = undefined;\n    break;\n  }\n  return value;\n}\n\n/**\n * Simple wrapper around JSON.parse that casts the return value\n * to JsonObject.\n * Create a new wrapper if an array return value is desired.\n * @param {*} json JSON string to parse\n * @return {?JsonObject} May be extend to parse arrays.\n */\nexport function parseJson(json) {\n  return /** @type {?JsonObject} */(JSON.parse(/** @type {string} */ (json)));\n}\n\n/**\n * Parses the given `json` string without throwing an exception if not valid.\n * Returns `undefined` if parsing fails.\n * Returns the `Object` corresponding to the JSON string when parsing succeeds.\n * @param {*} json JSON string to parse\n * @param {function(!Error)=} opt_onFailed Optional function that will be called\n *     with the error if parsing fails.\n * @return {?JsonObject|undefined} May be extend to parse arrays.\n */\nexport function tryParseJson(json, opt_onFailed) {\n  try {\n    return parseJson(json);\n  } catch (e) {\n    if (opt_onFailed) {\n      opt_onFailed(e);\n    }\n    return undefined;\n  }\n}\n\n/**\n * Recursively checks strict equality of items in nested arrays and objects.\n *\n * @param {JSONValueDef} a\n * @param {JSONValueDef} b\n * @param {number} depth The maximum recursion depth. Must be finite.\n * @return {boolean}\n * @throws {Error} If depth argument is not finite.\n */\nexport function recursiveEquals(a, b, depth = 3) {\n  if (!isFinite(depth)) {\n    throw new Error('depth arg must be finite: ' + depth);\n  }\n  if (a === b) {\n    return true;\n  }\n  // Only check shallow equality for depth < 1.\n  if (depth < 1) {\n    return false;\n  }\n  if (typeof a !== typeof b) {\n    return false;\n  }\n  if (Array.isArray(a) && Array.isArray(b)) {\n    if (a.length !== b.length) {\n      return false;\n    }\n    for (let i = 0; i < a.length; i++) {\n      if (!recursiveEquals(a[i], b[i], depth - 1)) {\n        return false;\n      }\n    }\n    return true;\n  }\n  if (a && b && typeof a === 'object' && typeof b === 'object') {\n    const keysA = Object.keys(/** @type {!Object} */ (a));\n    const keysB = Object.keys(/** @type {!Object} */ (b));\n    if (keysA.length !== keysB.length) {\n      return false;\n    }\n    for (let i = 0; i < keysA.length; i++) {\n      const keyA = keysA[i];\n      const valueA = a[keyA];\n      const valueB = b[keyA];\n      if (!recursiveEquals(valueA, valueB, depth - 1)) {\n        return false;\n      }\n    }\n    return true;\n  }\n  return false;\n}\n\n\n/**\n * @param {*} obj\n * @param {string} key\n * @return {boolean}\n */\nfunction hasOwnProperty(obj, key) {\n  if (obj == null || typeof obj != 'object') {\n    return false;\n  }\n  return Object.prototype.hasOwnProperty.call(\n      /** @type {!Object} */ (obj), key);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {getMode} from './mode';\nimport {getModeObject} from './mode-object';\nimport {isEnumValue} from './types';\n\n/**\n * Triple zero width space.\n *\n * This is added to user error messages, so that we can later identify\n * them, when the only thing that we have is the message. This is the\n * case in many browsers when the global exception handler is invoked.\n *\n * @const {string}\n */\nexport const USER_ERROR_SENTINEL = '\\u200B\\u200B\\u200B';\n\n\n/**\n * Four zero width space.\n *\n * @const {string}\n */\nexport const USER_ERROR_EMBED_SENTINEL = '\\u200B\\u200B\\u200B\\u200B';\n\n\n/**\n * @param {string} message\n * @return {boolean} Whether this message was a user error.\n */\nexport function isUserErrorMessage(message) {\n  return message.indexOf(USER_ERROR_SENTINEL) >= 0;\n}\n\n/**\n * @param {string} message\n * @return {boolean} Whether this message was a a user error from an iframe embed.\n */\nexport function isUserErrorEmbed(message) {\n  return message.indexOf(USER_ERROR_EMBED_SENTINEL) >= 0;\n}\n\n\n/**\n * @enum {number}\n * @private Visible for testing only.\n */\nexport const LogLevel = {\n  OFF: 0,\n  ERROR: 1,\n  WARN: 2,\n  INFO: 3,\n  FINE: 4,\n};\n\n/**\n * Sets reportError function. Called from error.js to break cyclic\n * dependency.\n * @param {function(*, !Element=)|undefined} fn\n */\nexport function setReportError(fn) {\n  self.reportError = fn;\n}\n\n/**\n * @type {!LogLevel|undefined}\n * @private\n */\nlet levelOverride_ = undefined;\n\n/**\n * @param {!LogLevel} level\n */\nexport function overrideLogLevel(level) {\n  levelOverride_ = level;\n}\n\n/**\n * Logging class. Use of sentinel string instead of a boolean to check user/dev\n * errors because errors could be rethrown by some native code as a new error,\n * and only a message would survive. Also, some browser dont support a 5th\n * error object argument in window.onerror. List of supporting browser can be\n * found here:\n * https://blog.sentry.io/2016/01/04/client-javascript-reporting-window-onerror.html\n * @final\n * @private Visible for testing only.\n */\nexport class Log {\n  /**\n   * opt_suffix will be appended to error message to identify the type of the\n   * error message. We can't rely on the error object to pass along the type\n   * because some browsers do not have this param in its window.onerror API.\n   * See:\n   * https://blog.sentry.io/2016/01/04/client-javascript-reporting-window-onerror.html\n   *\n   * @param {!Window} win\n   * @param {function(!./mode.ModeDef):!LogLevel} levelFunc\n   * @param {string=} opt_suffix\n   */\n  constructor(win, levelFunc, opt_suffix) {\n    /**\n     * In tests we use the main test window instead of the iframe where\n     * the tests runs because only the former is relayed to the console.\n     * @const {!Window}\n     */\n    this.win = (getMode().test && win.AMP_TEST_IFRAME) ? win.parent : win;\n\n    /** @private @const {function(!./mode.ModeDef):!LogLevel} */\n    this.levelFunc_ = levelFunc;\n\n    /** @private @const {!LogLevel} */\n    this.level_ = this.defaultLevel_();\n\n    /** @private @const {string} */\n    this.suffix_ = opt_suffix || '';\n  }\n\n  /**\n   * @return {!LogLevel}\n   * @private\n   */\n  getLevel_() {\n    return (levelOverride_ !== undefined) ? levelOverride_ : this.level_;\n  }\n\n  /**\n   * @return {!LogLevel}\n   * @private\n   */\n  defaultLevel_() {\n    // No console - can't enable logging.\n    if (!this.win.console || !this.win.console.log) {\n      return LogLevel.OFF;\n    }\n\n    // Logging has been explicitly disabled.\n    if (getMode().log == '0') {\n      return LogLevel.OFF;\n    }\n\n    // Logging is enabled for tests directly.\n    if (getMode().test && this.win.ENABLE_LOG) {\n      return LogLevel.FINE;\n    }\n\n    // LocalDev by default allows INFO level, unless overriden by `#log`.\n    if (getMode().localDev && !getMode().log) {\n      return LogLevel.INFO;\n    }\n\n    // Delegate to the specific resolver.\n    return this.levelFunc_(getModeObject());\n  }\n\n  /**\n   * @param {string} tag\n   * @param {string} level\n   * @param {!Array} messages\n   */\n  msg_(tag, level, messages) {\n    if (this.getLevel_() != LogLevel.OFF) {\n      let fn = this.win.console.log;\n      if (level == 'ERROR') {\n        fn = this.win.console.error || fn;\n      } else if (level == 'INFO') {\n        fn = this.win.console.info || fn;\n      } else if (level == 'WARN') {\n        fn = this.win.console.warn || fn;\n      }\n      if (getMode().localDev) {\n        messages.unshift('[' + tag + ']');\n      }\n      fn.apply(this.win.console, messages);\n    }\n  }\n\n  /**\n   * Whether the logging is enabled.\n   * @return {boolean}\n   */\n  isEnabled() {\n    return this.getLevel_() != LogLevel.OFF;\n  }\n\n  /**\n   * Reports a fine-grained message.\n   * @param {string} tag\n   * @param {...*} var_args\n   */\n  fine(tag, var_args) {\n    if (this.getLevel_() >= LogLevel.FINE) {\n      this.msg_(tag, 'FINE', Array.prototype.slice.call(arguments, 1));\n    }\n  }\n\n  /**\n   * Reports a informational message.\n   * @param {string} tag\n   * @param {...*} var_args\n   */\n  info(tag, var_args) {\n    if (this.getLevel_() >= LogLevel.INFO) {\n      this.msg_(tag, 'INFO', Array.prototype.slice.call(arguments, 1));\n    }\n  }\n\n  /**\n   * Reports a warning message.\n   * @param {string} tag\n   * @param {...*} var_args\n   */\n  warn(tag, var_args) {\n    if (this.getLevel_() >= LogLevel.WARN) {\n      this.msg_(tag, 'WARN', Array.prototype.slice.call(arguments, 1));\n    }\n  }\n\n  /**\n   * Reports an error message. If the logging is disabled, the error is rethrown\n   * asynchronously.\n   * @param {string} tag\n   * @param {...*} var_args\n   * @return {!Error|undefined}\n   * @private\n   */\n  error_(tag, var_args) {\n    if (this.getLevel_() >= LogLevel.ERROR) {\n      this.msg_(tag, 'ERROR', Array.prototype.slice.call(arguments, 1));\n    } else {\n      const error = createErrorVargs.apply(null,\n          Array.prototype.slice.call(arguments, 1));\n      this.prepareError_(error);\n      return error;\n    }\n  }\n\n  /**\n   * Reports an error message.\n   * @param {string} tag\n   * @param {...*} var_args\n   */\n  error(tag, var_args) {\n    const error = this.error_.apply(this, arguments);\n    if (error) {\n      error.name = tag || error.name;\n      // reportError is installed globally per window in the entry point.\n      self.reportError(error);\n    }\n  }\n\n  /**\n   * Reports an error message and marks with an expected property. If the\n   * logging is disabled, the error is rethrown asynchronously.\n   * @param {string} unusedTag\n   * @param {...*} var_args\n   */\n  expectedError(unusedTag, var_args) {\n    const error = this.error_.apply(this, arguments);\n    if (error) {\n      error.expected = true;\n      // reportError is installed globally per window in the entry point.\n      self.reportError(error);\n    }\n  }\n\n  /**\n   * Creates an error object.\n   * @param {...*} var_args\n   * @return {!Error}\n   */\n  createError(var_args) {\n    const error = createErrorVargs.apply(null, arguments);\n    this.prepareError_(error);\n    return error;\n  }\n\n  /**\n   * Creates an error object with its expected property set to true.\n   * @param {...*} var_args\n   * @return {!Error}\n   */\n  createExpectedError(var_args) {\n    const error = createErrorVargs.apply(null, arguments);\n    this.prepareError_(error);\n    error.expected = true;\n    return error;\n  }\n\n  /**\n   * Throws an error if the first argument isn't trueish.\n   *\n   * Supports argument substitution into the message via %s placeholders.\n   *\n   * Throws an error object that has two extra properties:\n   * - associatedElement: This is the first element provided in the var args.\n   *   It can be used for improved display of error messages.\n   * - messageArray: The elements of the substituted message as non-stringified\n   *   elements in an array. When e.g. passed to console.error this yields\n   *   native displays of things like HTML elements.\n   *\n   * @param {T} shouldBeTrueish The value to assert. The assert fails if it does\n   *     not evaluate to true.\n   * @param {string=} opt_message The assertion message\n   * @param {...*} var_args Arguments substituted into %s in the message.\n   * @return {T} The value of shouldBeTrueish.\n   * @template T\n   * eslint \"google-camelcase/google-camelcase\": 0\n   */\n  assert(shouldBeTrueish, opt_message, var_args) {\n    let firstElement;\n    if (!shouldBeTrueish) {\n      const message = opt_message || 'Assertion failed';\n      const splitMessage = message.split('%s');\n      const first = splitMessage.shift();\n      let formatted = first;\n      const messageArray = [];\n      pushIfNonEmpty(messageArray, first);\n      for (let i = 2; i < arguments.length; i++) {\n        const val = arguments[i];\n        if (val && val.tagName) {\n          firstElement = val;\n        }\n        const nextConstant = splitMessage.shift();\n        messageArray.push(val);\n        pushIfNonEmpty(messageArray, nextConstant.trim());\n        formatted += toString(val) + nextConstant;\n      }\n      const e = new Error(formatted);\n      e.fromAssert = true;\n      e.associatedElement = firstElement;\n      e.messageArray = messageArray;\n      this.prepareError_(e);\n      // reportError is installed globally per window in the entry point.\n      self.reportError(e);\n      throw e;\n    }\n    return shouldBeTrueish;\n  }\n\n  /**\n   * Throws an error if the first argument isn't an Element\n   *\n   * Otherwise see `assert` for usage\n   *\n   * @param {*} shouldBeElement\n   * @param {string=} opt_message The assertion message\n   * @return {!Element} The value of shouldBeTrueish.\n   * @template T\n   * eslint \"google-camelcase/google-camelcase\": 2\n   */\n  assertElement(shouldBeElement, opt_message) {\n    const shouldBeTrueish = shouldBeElement && shouldBeElement.nodeType == 1;\n    this.assert(shouldBeTrueish, (opt_message || 'Element expected') + ': %s',\n        shouldBeElement);\n    return /** @type {!Element} */ (shouldBeElement);\n  }\n\n  /**\n   * Throws an error if the first argument isn't a string. The string can\n   * be empty.\n   *\n   * For more details see `assert`.\n   *\n   * @param {*} shouldBeString\n   * @param {string=} opt_message The assertion message\n   * @return {string} The string value. Can be an empty string.\n   * eslint \"google-camelcase/google-camelcase\": 2\n   */\n  assertString(shouldBeString, opt_message) {\n    this.assert(typeof shouldBeString == 'string',\n        (opt_message || 'String expected') + ': %s', shouldBeString);\n    return /** @type {string} */ (shouldBeString);\n  }\n\n  /**\n   * Throws an error if the first argument isn't a number. The allowed values\n   * include `0` and `NaN`.\n   *\n   * For more details see `assert`.\n   *\n   * @param {*} shouldBeNumber\n   * @param {string=} opt_message The assertion message\n   * @return {number} The number value. The allowed values include `0`\n   *   and `NaN`.\n   */\n  assertNumber(shouldBeNumber, opt_message) {\n    this.assert(typeof shouldBeNumber == 'number',\n        (opt_message || 'Number expected') + ': %s', shouldBeNumber);\n    return /** @type {number} */ (shouldBeNumber);\n  }\n\n  /**\n   * Throws an error if the first argument isn't a boolean.\n   *\n   * For more details see `assert`.\n   *\n   * @param {*} shouldBeBoolean\n   * @param {string=} opt_message The assertion message\n   * @return {boolean} The boolean value.\n   */\n  assertBoolean(shouldBeBoolean, opt_message) {\n    this.assert(!!shouldBeBoolean === shouldBeBoolean,\n        (opt_message || 'Boolean expected') + ': %s', shouldBeBoolean);\n    return /** @type {boolean} */ (shouldBeBoolean);\n  }\n\n  /**\n   * Asserts and returns the enum value. If the enum doesn't contain such a\n   * value, the error is thrown.\n   *\n   * @param {!Object<T>} enumObj\n   * @param {string} s\n   * @param {string=} opt_enumName\n   * @return {T}\n   * @template T\n   * eslint \"google-camelcase/google-camelcase\": 2\n   */\n  assertEnumValue(enumObj, s, opt_enumName) {\n    if (isEnumValue(enumObj, s)) {\n      return s;\n    }\n    this.assert(false,\n        'Unknown %s value: \"%s\"',\n        opt_enumName || 'enum', s);\n  }\n\n  /**\n   * @param {!Error} error\n   * @private\n   */\n  prepareError_(error) {\n    error = duplicateErrorIfNecessary(error);\n    if (this.suffix_) {\n      if (!error.message) {\n        error.message = this.suffix_;\n      } else if (error.message.indexOf(this.suffix_) == -1) {\n        error.message += this.suffix_;\n      }\n    } else if (isUserErrorMessage(error.message)) {\n      error.message = error.message.replace(USER_ERROR_SENTINEL, '');\n    }\n  }\n}\n\n/**\n * @param {string|!Element} val\n * @return {string}\n */\nfunction toString(val) {\n  // Do check equivalent to `val instanceof Element` without cross-window bug\n  if (val && val.nodeType == 1) {\n    return val.tagName.toLowerCase() + (val.id ? '#' + val.id : '');\n  }\n  return /** @type {string} */ (val);\n}\n\n\n/**\n * @param {!Array} array\n * @param {*} val\n */\nfunction pushIfNonEmpty(array, val) {\n  if (val != '') {\n    array.push(val);\n  }\n}\n\n/**\n * Some exceptions (DOMException, namely) have read-only message.\n * @param {!Error} error\n * @return {!Error};\n */\nexport function duplicateErrorIfNecessary(error) {\n  const {message} = error;\n  const test = String(Math.random());\n  error.message = test;\n\n  if (error.message === test) {\n    error.message = message;\n    return error;\n  }\n\n  const e = new Error(error.message);\n  // Copy all the extraneous things we attach.\n  for (const prop in error) {\n    e[prop] = error[prop];\n  }\n  // Ensure these are copied.\n  e.stack = error.stack;\n  return e;\n}\n\n/**\n * @param {...*} var_args\n * @return {!Error}\n * @visibleForTesting\n */\nexport function createErrorVargs(var_args) {\n  let error = null;\n  let message = '';\n  for (let i = 0; i < arguments.length; i++) {\n    const arg = arguments[i];\n    if (arg instanceof Error && !error) {\n      error = duplicateErrorIfNecessary(arg);\n    } else {\n      if (message) {\n        message += ' ';\n      }\n      message += arg;\n    }\n  }\n\n  if (!error) {\n    error = new Error(message);\n  } else if (message) {\n    error.message = message + ': ' + error.message;\n  }\n  return error;\n}\n\n\n/**\n * Rethrows the error without terminating the current context. This preserves\n * whether the original error designation is a user error or a dev error.\n * @param {...*} var_args\n */\nexport function rethrowAsync(var_args) {\n  const error = createErrorVargs.apply(null, arguments);\n  setTimeout(() => {\n    // reportError is installed globally per window in the entry point.\n    self.reportError(error);\n    throw error;\n  });\n}\n\n\n/**\n * Cache for logs. We do not use a Service since the service module depends\n * on Log and closure literally can't even.\n * @type {{user: ?Log, dev: ?Log, userForEmbed: ?Log}}\n */\nself.log = (self.log || {\n  user: null,\n  dev: null,\n  userForEmbed: null,\n});\n\nconst logs = self.log;\n\n/**\n * Eventually holds a constructor for Log objects. Lazily initialized, so we\n * can avoid ever referencing the real constructor except in JS binaries\n * that actually want to include the implementation.\n * @type {?Function}\n */\nlet logConstructor = null;\n\n/**\n * Initializes log contructor.\n */\nexport function initLogConstructor() {\n  logConstructor = Log;\n  // Initialize instances for use. If a binary (an extension for example) that\n  // does not call `initLogConstructor` invokes `dev()` or `user()` earlier than\n  // the binary that does call `initLogConstructor` (amp.js), the extension will\n  // throw an error as that extension will never be able to initialize the log\n  // instances and we also don't want it to call `initLogConstructor` either\n  // (since that will cause the Log implementation to be bundled into that\n  // binary). So we must initialize the instances eagerly so that they are ready\n  // for use (stored globally) after the main binary calls `initLogConstructor`.\n  dev();\n  user();\n}\n\n/**\n * Resets log contructor for testing.\n */\nexport function resetLogConstructorForTesting() {\n  logConstructor = null;\n}\n\n/**\n * Publisher level log.\n *\n * Enabled in the following conditions:\n *  1. Not disabled using `#log=0`.\n *  2. Development mode is enabled via `#development=1` or logging is explicitly\n *     enabled via `#log=D` where D >= 1.\n *  3. AMP.setLogLevel(D) is called, where D >= 1.\n *\n * @param {!Element=} opt_element\n * @return {!Log}\n */\nexport function user(opt_element) {\n  if (!logs.user) {\n    logs.user = getUserLogger(USER_ERROR_SENTINEL);\n  }\n  if (!isFromEmbed(logs.user.win, opt_element)) {\n    return logs.user;\n  } else {\n    if (logs.userForEmbed) {\n      return logs.userForEmbed;\n    }\n    return logs.userForEmbed = getUserLogger(USER_ERROR_EMBED_SENTINEL);\n  }\n}\n\n/**\n * Getter for user logger\n * @param {string=} suffix\n * @return {!Log}\n */\nfunction getUserLogger(suffix) {\n  if (!logConstructor) {\n    throw new Error('failed to call initLogConstructor');\n  }\n  return new logConstructor(self, mode => {\n    const logNum = parseInt(mode.log, 10);\n    if (mode.development || logNum >= 1) {\n      return LogLevel.FINE;\n    }\n    return LogLevel.WARN;\n  }, suffix);\n}\n\n/**\n * AMP development log. Calls to `devLog().assert` and `dev.fine` are stripped\n * in the PROD binary. However, `devLog().assert` result is preserved in either\n * case.\n *\n * Enabled in the following conditions:\n *  1. Not disabled using `#log=0`.\n *  2. Logging is explicitly enabled via `#log=D`, where D >= 2.\n *  3. AMP.setLogLevel(D) is called, where D >= 2.\n *\n * @return {!Log}\n */\nexport function dev() {\n  if (logs.dev) {\n    return logs.dev;\n  }\n  if (!logConstructor) {\n    throw new Error('failed to call initLogConstructor');\n  }\n  return logs.dev = new logConstructor(self, mode => {\n    const logNum = parseInt(mode.log, 10);\n    if (logNum >= 3) {\n      return LogLevel.FINE;\n    }\n    if (logNum >= 2) {\n      return LogLevel.INFO;\n    }\n    return LogLevel.OFF;\n  });\n}\n\n/**\n * @param {!Window} win\n * @param {!Element=} opt_element\n * @return {boolean} isEmbed\n */\nexport function isFromEmbed(win, opt_element) {\n  if (!opt_element) {\n    return false;\n  }\n  return opt_element.ownerDocument.defaultView != win;\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {getMode} from './mode';\n\n/**\n * Provides info about the current app. This return value may be cached and\n * passed around as it will always be DCE'd.\n * @param {?Window=} opt_win\n * @return {!./mode.ModeDef}\n */\nexport function getModeObject(opt_win) {\n  return {\n    localDev: getMode(opt_win).localDev,\n    development: getMode(opt_win).development,\n    filter: getMode(opt_win).filter,\n    minified: getMode(opt_win).minified,\n    lite: getMode(opt_win).lite,\n    test: getMode(opt_win).test,\n    log: getMode(opt_win).log,\n    version: getMode(opt_win).version,\n    rtvVersion: getMode(opt_win).rtvVersion,\n  };\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {parseQueryString_} from './url-parse-query-string';\n\n/**\n * @typedef {{\n *   localDev: boolean,\n *   development: boolean,\n *   filter: (string|undefined),\n *   minified: boolean,\n *   lite: boolean,\n *   test: boolean,\n *   log: (string|undefined),\n *   version: string,\n *   rtvVersion: string,\n * }}\n */\nexport let ModeDef;\n\n/** @type {string} */\nconst version = '$internalRuntimeVersion$';\n\n/**\n * `rtvVersion` is the prefixed version we serve off of the cdn.\n * The prefix denotes canary(00) or prod(01) or an experiment version ( > 01).\n * @type {string}\n */\nlet rtvVersion = '';\n\n/**\n * Provides info about the current app.\n * @param {?Window=} opt_win\n * @return {!ModeDef}\n */\nexport function getMode(opt_win) {\n  const win = opt_win || self;\n  if (win.AMP_MODE) {\n    return win.AMP_MODE;\n  }\n  return win.AMP_MODE = getMode_(win);\n}\n\n/**\n * Provides info about the current app.\n * @param {!Window} win\n * @return {!ModeDef}\n */\nfunction getMode_(win) {\n  // Magic constants that are replaced by closure compiler.\n  // IS_MINIFIED is always replaced with true when closure compiler is used\n  // while IS_DEV is only replaced when `gulp dist` is called without the\n  // --fortesting flag.\n  const IS_DEV = true;\n  const IS_MINIFIED = false;\n\n  const localDevEnabled = !!(self.AMP_CONFIG && self.AMP_CONFIG.localDev);\n  const runningTests = IS_DEV && !!(win.AMP_TEST || win.__karma__);\n  const isLocalDev = IS_DEV && (localDevEnabled || runningTests);\n  const hashQuery = parseQueryString_(\n      // location.originalHash is set by the viewer when it removes the fragment\n      // from the URL.\n      win.location.originalHash || win.location.hash);\n\n  const searchQuery = parseQueryString_(win.location.search);\n\n  if (!rtvVersion) {\n    rtvVersion = getRtvVersion(win, isLocalDev);\n  }\n\n  // The `minified`, `test` and `localDev` properties are replaced\n  // as boolean literals when we run `gulp dist` without the `--fortesting`\n  // flags. This improved DCE on the production file we deploy as the code\n  // paths for localhost/testing/development are eliminated.\n  return {\n    localDev: isLocalDev,\n    // Triggers validation or enable pub level logging. Validation can be\n    // bypassed via #validate=0.\n    // Note that AMP_DEV_MODE flag is used for testing purposes.\n    development: !!(hashQuery['development'] == '1' || win.AMP_DEV_MODE),\n    examiner: hashQuery['development'] == '2',\n    // Allows filtering validation errors by error category. For the\n    // available categories, see ErrorCategory in validator/validator.proto.\n    filter: hashQuery['filter'],\n    // amp-geo override\n    geoOverride: hashQuery['amp-geo'],\n    minified: IS_MINIFIED,\n    // Whether document is in an amp-lite viewer. It signal that the user\n    // would prefer to use less bandwidth.\n    lite: searchQuery['amp_lite'] != undefined,\n    test: runningTests,\n    log: hashQuery['log'],\n    version,\n    rtvVersion,\n  };\n}\n\n/**\n * Retrieve the `rtvVersion` which will have a numeric prefix\n * denoting canary/prod/experiment (unless `isLocalDev` is true).\n *\n * @param {!Window} win\n * @param {boolean} isLocalDev\n * @return {string}\n */\nfunction getRtvVersion(win, isLocalDev) {\n  // If it's local dev then we won't actually have a full version so\n  // just use the version.\n  if (isLocalDev) {\n    return version;\n  }\n\n  if (win.AMP_CONFIG && win.AMP_CONFIG.v) {\n    return win.AMP_CONFIG.v;\n  }\n\n  // Currently `$internalRuntimeVersion$` and thus `mode.version` contain only\n  // major version. The full version however must also carry the minor version.\n  // We will default to production default `01` minor version for now.\n  // TODO(erwinmombay): decide whether $internalRuntimeVersion$ should contain\n  // minor version.\n  return `01${version}`;\n}\n\n\n/**\n * @param {!Window} win\n * @param {boolean} isLocalDev\n * @return {string}\n * @visibleForTesting\n */\nexport function getRtvVersionForTesting(win, isLocalDev) {\n  return getRtvVersion(win, isLocalDev);\n}\n\n\n/** @visibleForTesting */\nexport function resetRtvVersionForTesting() {\n  rtvVersion = '';\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n\n/**\n * This class helps to manage observers. Observers can be added, removed or\n * fired through and instance of this class.\n * @template TYPE\n */\nexport class Observable {\n\n  /**\n   * Creates an instance of Observable.\n   */\n  constructor() {\n    /** @type {?Array<function(TYPE)>} */\n    this.handlers_ = null;\n  }\n\n  /**\n   * Adds the observer to this instance.\n   * @param {function(TYPE)} handler Observer's handler.\n   * @return {!UnlistenDef}\n   */\n  add(handler) {\n    if (!this.handlers_) {\n      this.handlers_ = [];\n    }\n    this.handlers_.push(handler);\n    return () => {\n      this.remove(handler);\n    };\n  }\n\n  /**\n   * Removes the observer from this instance.\n   * @param {function(TYPE)} handler Observer's instance.\n   */\n  remove(handler) {\n    if (!this.handlers_) {\n      return;\n    }\n    const index = this.handlers_.indexOf(handler);\n    if (index > -1) {\n      this.handlers_.splice(index, 1);\n    }\n  }\n\n  /**\n   * Removes all observers.\n   */\n  removeAll() {\n    if (!this.handlers_) {\n      return;\n    }\n    this.handlers_.length = 0;\n  }\n\n  /**\n   * Fires an event. All observers are called.\n   * @param {TYPE=} opt_event\n   */\n  fire(opt_event) {\n    if (!this.handlers_) {\n      return;\n    }\n    const handlers = this.handlers_;\n    for (let i = 0; i < handlers.length; i++) {\n      const handler = handlers[i];\n      handler(opt_event);\n    }\n  }\n\n  /**\n   * Returns number of handlers. Mostly needed for tests.\n   * @return {number}\n   */\n  getHandlerCount() {\n    if (!this.handlers_) {\n      return 0;\n    }\n    return this.handlers_.length;\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {getMode} from './mode';\nimport {install as installArrayIncludes} from './polyfills/array-includes';\nimport {install as installCustomElements} from './polyfills/custom-elements';\nimport {\n  install as installDOMTokenListToggle,\n} from './polyfills/domtokenlist-toggle';\nimport {install as installDocContains} from './polyfills/document-contains';\nimport {install as installMathSign} from './polyfills/math-sign';\nimport {install as installObjectAssign} from './polyfills/object-assign';\nimport {install as installPromise} from './polyfills/promise';\nimport {installCustomElements as installRegisterElement} from\n  'document-register-element/build/document-register-element.patched';\nimport {isExperimentOn} from './experiments';\n\nif (isExperimentOn(self, 'custom-elements-v1') || getMode().test) {\n  installCustomElements(self, class {});\n} else {\n  installRegisterElement(self, 'auto');\n}\ninstallDOMTokenListToggle(self);\ninstallMathSign(self);\ninstallObjectAssign(self);\ninstallPromise(self);\ninstallDocContains(self);\ninstallArrayIncludes(self);\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * Returns true if the element is in the array and false otherwise.\n *\n * @param {*} value\n * @param {number=} opt_fromIndex\n * @return {boolean}\n * @this {Array}\n */\nfunction includes(value, opt_fromIndex) {\n  const fromIndex = opt_fromIndex || 0;\n  const len = this.length;\n  let i = fromIndex >= 0 ? fromIndex : Math.max(len + fromIndex, 0);\n  for (; i < len; i++) {\n    const other = this[i];\n    // If value has been found OR (value is NaN AND other is NaN)\n    /*eslint \"no-self-compare\": 0*/\n    if (other === value || (value !== value && other !== other)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n* Sets the Array.contains polyfill if it does not exist.\n* @param {!Window} win\n*/\nexport function install(win) {\n  if (!win.Array.prototype.includes) {\n    win.Object.defineProperty(Array.prototype, 'includes', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: includes,\n    });\n  }\n}\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @typedef {{\n *   promise: !Promise<undefined>,\n *   resolve: function(),\n * }}\n */\nlet DeferredDef;\n\n/**\n * @typedef {!Function}\n */\nlet CustomElementConstructorDef;\n\n/**\n * @typedef {{\n *  name: string,\n *  ctor: !CustomElementConstructorDef,\n * }}\n */\nlet CustomElementDef;\n\n/**\n * Validates the custom element's name.\n * This intentionally ignores \"valid\" higher Unicode Code Points.\n * https://html.spec.whatwg.org/multipage/custom-elements.html#valid-custom-element-name\n */\nconst VALID_NAME = /^[a-z][a-z0-9._]*-[a-z0-9._-]*$/;\nconst INVALID_NAMES = [\n  'annotation-xml',\n  'color-profile',\n  'font-face',\n  'font-face-src',\n  'font-face-uri',\n  'font-face-format',\n  'font-face-name',\n  'missing-glyph',\n];\n\n/**\n * Asserts that the custom element name conforms to the spec.\n *\n * @param {!Function} SyntaxError\n * @param {string} name\n */\nfunction assertValidName(SyntaxError, name) {\n  if (!VALID_NAME.test(name) || INVALID_NAMES.indexOf(name) >= 0) {\n    throw new SyntaxError(`invalid custom element name \"${name}\"`);\n  }\n}\n\n/**\n * Does win have a full Custom Elements registry?\n *\n * @param {!Window} win\n * @return {boolean}\n */\nfunction hasCustomElements(win) {\n  const {customElements} = win;\n\n  return !!(\n    customElements &&\n    customElements.define &&\n    customElements.get &&\n    customElements.whenDefined);\n}\n\n/**\n * Was HTMLElement already patched for this window?\n *\n * @param {!Window} win\n * @return {boolean}\n */\nfunction isPatched(win) {\n  const tag = win.HTMLElement.toString();\n  return tag.indexOf('[native code]') === -1;\n}\n\n/**\n * The public Custom Elements API.\n */\nclass CustomElementRegistry {\n  /**\n   * @param {!Window} win\n   * @param {!Registry} registry\n   */\n  constructor(win, registry) {\n    /**\n     * @const @private\n     */\n    this.win_ = win;\n\n    /**\n     * @const @private\n     */\n    this.registry_ = registry;\n\n    /**\n     * @type {!Object<string, DeferredDef>}\n     * @private\n     * @const\n     */\n    this.pendingDefines_ = this.win_.Object.create(null);\n  }\n\n  /**\n   * Register the custom element.\n   *\n   * @param {string} name\n   * @param {!CustomElementConstructorDef} ctor\n   * @param {!Object=} options\n   */\n  define(name, ctor, options) {\n    this.registry_.define(name, ctor, options);\n\n    // If anyone is waiting for this custom element to be defined, resolve\n    // their promise.\n    const pending = this.pendingDefines_;\n    const deferred = pending[name];\n    if (deferred) {\n      deferred.resolve();\n      delete pending[name];\n    }\n  }\n\n  /**\n   * Get the constructor of the (already defined) custom element.\n   *\n   * @param {string} name\n   * @return {!CustomElementConstructorDef|undefined}\n   */\n  get(name) {\n    const def = this.registry_.getByName(name);\n    if (def) {\n      return def.ctor;\n    }\n  }\n\n  /**\n   * Returns a promise that waits until the custom element is defined.\n   * If the custom element is already defined, returns a resolved promise.\n   *\n   * @param {string} name\n   * @return {!Promise<undefined>}\n   */\n  whenDefined(name) {\n    const {Promise, SyntaxError} = this.win_;\n    assertValidName(SyntaxError, name);\n\n    if (this.registry_.getByName(name)) {\n      return Promise.resolve();\n    }\n\n    const pending = this.pendingDefines_;\n    const deferred = pending[name];\n    if (deferred) {\n      return deferred.promise;\n    }\n\n    let resolve;\n    const promise = new /*OK*/Promise(res => resolve = res);\n    pending[name] = {\n      promise,\n      resolve,\n    };\n\n    return promise;\n  }\n\n  /**\n   * Upgrade all custom elements inside root.\n   *\n   * @param {!Node} root\n   */\n  upgrade(root) {\n    this.registry_.upgrade(root);\n  }\n}\n\n/**\n * This internal APIs necessary to run the CustomElementRegistry.\n * Since Registry is never exposed externally, all methods are actually\n * available on the instance.\n */\nclass Registry {\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n    /**\n     * @private @const\n     */\n    this.win_ = win;\n\n    /**\n     * @private @const\n     */\n    this.doc_ = win.document;\n\n    /**\n     * @type {!Object<string, !CustomElementDef>}\n     * @private\n     * @const\n     */\n    this.definitions_ = win.Object.create(null);\n\n    /**\n     * A up-to-date DOM selector for all custom elements.\n     * @type {string}\n     */\n    this.query_ = '';\n\n    /**\n     * The currently upgrading element.\n     * @private {Element}\n     */\n    this.current_ = null;\n  }\n\n  /**\n   * The currently-being-upgraded custom element.\n   *\n   * When an already created (through the DOM parsing APIs, or innerHTML)\n   * custom element node is being upgraded, we can't just create a new node\n   * (it's illegal in the spec). But we still need to run the custom element's\n   * constructor code on the node. We avoid this conundrum by running the\n   * constructor while returning this current node in the HTMLElement\n   * class constructor (the base class of all custom elements).\n   *\n   * @return {Element}\n   */\n  current() {\n    const current = this.current_;\n    this.current_ = null;\n    return current;\n  }\n\n  /**\n   * Finds the custom element definition by name.\n   *\n   * @param {string} name\n   * @return {CustomElementDef|undefined}\n   */\n  getByName(name) {\n    const definition = this.definitions_[name];\n    if (definition) {\n      return definition;\n    }\n  }\n\n  /**\n   * Finds the custom element definition by constructor instance.\n   *\n   * @param {CustomElementConstructorDef} ctor\n   * @return {CustomElementDef|undefined}\n   */\n  getByConstructor(ctor) {\n    const definitions = this.definitions_;\n\n    for (const name in definitions) {\n      const def = definitions[name];\n      if (def.ctor === ctor) {\n        return def;\n      }\n    }\n  }\n\n  /**\n   * Registers the custom element definition, and upgrades all elements by that\n   * name in the root document.\n   *\n   * @param {string} name\n   * @param {!CustomElementConstructorDef} ctor\n   * @param {!Object|undefined} options\n   */\n  define(name, ctor, options) {\n    const {Error, SyntaxError} = this.win_;\n\n    if (options) {\n      throw new Error('Extending native custom elements is not supported');\n    }\n\n    assertValidName(SyntaxError, name);\n\n    if (this.getByName(name) ||\n        this.getByConstructor(ctor)) {\n      throw new Error(`duplicate definition \"${name}\"`);\n    }\n\n    // TODO(jridgewell): Record connectedCallback, disconnectedCallback,\n    // adoptedCallback, attributeChangedCallback, and observedAttributes.\n    // TODO(jridgewell): If attributeChangedCallback, gather observedAttributes\n    this.definitions_[name] = {\n      name,\n      ctor,\n    };\n\n    this.observe_(name);\n    this.upgrade(this.doc_, name);\n  }\n\n  /**\n   * Upgrades custom elements descendants of root (but not including root).\n   *\n   * When called with an opt_query, it both upgrades and connects the custom\n   * elements (this is used during the custom element define algorithm).\n   *\n   * @param {!Node} root\n   * @param {string=} opt_query\n   */\n  upgrade(root, opt_query) {\n    // Only CustomElementRegistry.p.define provides a query (the newly defined\n    // custom element). In this case, we are both upgrading _and_ connecting\n    // the custom elements.\n    const newlyDefined = !!opt_query;\n    const query = opt_query || this.query_;\n    const upgradeCandidates = this.queryAll_(root, query);\n\n    for (let i = 0; i < upgradeCandidates.length; i++) {\n      const candidate = upgradeCandidates[i];\n      if (newlyDefined) {\n        this.connectedCallback_(candidate);\n      } else {\n        this.upgradeSelf(candidate);\n      }\n    }\n  }\n\n  /**\n   * Upgrades the custom element node, if a custom element has been registered\n   * by this name.\n   *\n   * @param {!Node} node\n   */\n  upgradeSelf(node) {\n    const def = this.getByName(node.localName);\n    if (!def) {\n      return;\n    }\n\n    this.upgradeSelf_(/** @type {!Element} */(node), def);\n  }\n\n  /**\n   * @param {!Node} root\n   * @param {string} query\n   * @return {!Array|!NodeList}\n   */\n  queryAll_(root, query) {\n    if (!query || !root.querySelectorAll) {\n      // Nothing to do...\n      return [];\n    }\n\n    return root.querySelectorAll(query);\n  }\n\n  /**\n   * Upgrades the (already created via DOM parsing) custom element.\n   *\n   * @param {!Element} node\n   * @param {!CustomElementDef} def\n   */\n  upgradeSelf_(node, def) {\n    const {ctor} = def;\n    if (node instanceof ctor) {\n      return;\n    }\n\n    // Despite how it looks, this is not a useless construction.\n    // HTMLElementPolyfill (the base class of all custom elements) will return\n    // the current node, allowing the custom element's subclass constructor to\n    // run on the node. The node itself is already constructed, so the return\n    // value is just the node.\n    this.current_ = node;\n    const el = new ctor();\n\n    if (el !== node) {\n      throw new this.win_.Error(\n          'Constructor illegally returned a different instance.');\n    }\n  }\n\n  /**\n   * Fires connectedCallback on the custom element, if it has one.\n   * This also upgrades the custom element, since it may not have been\n   * accessible via the root document before (a detached DOM tree).\n   *\n   * @param {!Node} node\n   */\n  connectedCallback_(node) {\n    const def = this.getByName(node.localName);\n    if (!def) {\n      return;\n    }\n    this.upgradeSelf_(/** @type {!Element} */(node), def);\n    // TODO(jridgewell): It may be appropriate to adoptCallback, if the node\n    // used to be in another doc.\n    // TODO(jridgewell): I should be calling the definitions connectedCallback\n    // with node as the context.\n    if (node.connectedCallback) {\n      node.connectedCallback();\n    }\n  }\n\n  /**\n   * Fires disconnectedCallback on the custom element, if it has one.\n   *\n   * @param {!Node} node\n   */\n  disconnectedCallback_(node) {\n    // TODO(jridgewell): I should be calling the definitions connectedCallback\n    // with node as the context.\n    if (node.disconnectedCallback) {\n      node.disconnectedCallback();\n    }\n  }\n\n  /**\n   * Records name as a registered custom element to observe.\n   *\n   * Starts the Mutation Observer if this is the first registered custom\n   * element. This is deferred until the first custom element is defined to\n   * speed up initial rendering of the page.\n   *\n   * Mutation Observers are conveniently available in every browser we care\n   * about. When a node is connected to the root document, all custom\n   * elements (including that node iteself) will be upgraded and call\n   * connectedCallback. When a node is disconnectedCallback from the root\n   * document, all custom elements will call disconnectedCallback.\n   *\n   * @param {string} name\n   */\n  observe_(name) {\n    if (this.query_) {\n      this.query_ += `,${name}`;\n      return;\n    }\n\n    this.query_ = name;\n\n    // The first registered name starts the mutation observer.\n    const observer = new this.win_.MutationObserver(records => {\n      if (records) {\n        this.handleRecords_(records);\n      }\n    });\n    observer.observe(this.doc_, {\n      childList: true,\n      subtree: true,\n    });\n  }\n\n  /**\n   * Handle all the Mutation Observer's Mutation Records.\n   * All added custom elements will be upgraded (if not already) and call\n   * connectedCallback. All removed custom elements will call\n   * disconnectedCallback.\n   *\n   * @param {!Array<!MutationRecord>} records\n   */\n  handleRecords_(records) {\n    for (let i = 0; i < records.length; i++) {\n      const record = records[i];\n      if (!record) {\n        continue;\n      }\n\n      const {addedNodes, removedNodes} = record;\n      for (let i = 0; i < addedNodes.length; i++) {\n        const node = addedNodes[i];\n        const connectedCandidates = this.queryAll_(node, this.query_);\n        this.connectedCallback_(node);\n        for (let i = 0; i < connectedCandidates.length; i++) {\n          this.connectedCallback_(connectedCandidates[i]);\n        }\n      }\n\n      for (let i = 0; i < removedNodes.length; i++) {\n        const node = removedNodes[i];\n        const disconnectedCandidates = this.queryAll_(node, this.query_);\n        this.disconnectedCallback_(node);\n        for (let i = 0; i < disconnectedCandidates.length; i++) {\n          this.disconnectedCallback_(disconnectedCandidates[i]);\n        }\n      }\n    }\n  }\n}\n\n/**\n * Does the polyfilling.\n * @param {!Window} win\n */\nfunction polyfill(win) {\n  const {HTMLElement, Element, Node, Document, Object, document} = win;\n  const {createElement, cloneNode, importNode} = document;\n\n  const registry = new Registry(win);\n  const customElements = new CustomElementRegistry(win, registry);\n\n  // Expose the custom element registry.\n  // Object.getOwnPropertyDescriptor(window, 'customElements')\n  // {get: , set: undefined, enumerable: true, configurable: true}\n  Object.defineProperty(win, 'customElements', {\n    enumerable: true,\n    configurable: true,\n    // writable: false,\n    value: customElements,\n  });\n\n  // Patch createElement to immediately upgrade the custom element.\n  // This has the added benefit that it avoids the \"already created but needs\n  // constructor code run\" chicken-and-egg problem.\n  Document.prototype.createElement = function createElementPolyfill(name) {\n    const def = registry.getByName(name);\n    if (def) {\n      return new def.ctor();\n    }\n    return createElement.apply(this, arguments);\n  };\n\n  // Patch importNode to immediately upgrade custom elements.\n  // TODO(jridgewell): Can fire adoptedCallback for cross doc imports.\n  Document.prototype.importNode = function importNodePolyfill() {\n    const imported = importNode.apply(this, arguments);\n    if (imported) {\n      registry.upgradeSelf(imported);\n      registry.upgrade(imported);\n    }\n    return imported;\n  };\n\n  // Patch cloneNode to immediately upgrade custom elements.\n  Node.prototype.cloneNode = function cloneNodePolyfill() {\n    const cloned = cloneNode.apply(this, arguments);\n    registry.upgradeSelf(cloned);\n    registry.upgrade(cloned);\n    return cloned;\n  };\n\n  // Patch the innerHTML setter to immediately upgrade custom elements.\n  // Note, this could technically fire connectedCallbacks if this node was\n  // connected, but we leave that to the Mutation Observer.\n  const innerHTMLDesc = Object.getOwnPropertyDescriptor(Element.prototype,\n      'innerHTML');\n  const innerHTMLSetter = innerHTMLDesc.set;\n  innerHTMLDesc.set = function(html) {\n    innerHTMLSetter.call(this, html);\n    registry.upgrade(this);\n  };\n  Object.defineProperty(Element.prototype, 'innerHTML', innerHTMLDesc);\n\n  /**\n   * You can't use the real HTMLElement constructor, because you can't subclass\n   * it without using native classes. So, mock its approximation using\n   * createElement.\n   */\n  function HTMLElementPolyfill() {\n    const {constructor} = this;\n\n    // If we're upgrading an already created custom element, we can't create\n    // another new node (by the spec, it must be the same node).\n    let el = registry.current();\n\n    // If there's not a already created custom element, we're being invoked via\n    // `new`ing the constructor.\n    //\n    // Technically, we could get here via createElement, but we patched that.\n    // If it the custom element was registered, the patch turned it into a\n    // `new` call.\n    // If it was not registered, the native createElement is used. And if\n    // native createElement is being used and we got to this code, we're really\n    // in an infinite loop (a native createElement call just below) so we've\n    // got bigger problems.\n    //\n    // So just take my word we got here via `new`.\n    if (!el) {\n      // The custom element definition is an invariant. If the custom element\n      // is registered, everything works. If it's not, it throws in the member\n      // property access (only defined custom elements can be directly\n      // constructed via `new`).\n      const def = registry.getByConstructor(constructor);\n      el = createElement.call(document, def.name);\n    }\n\n    // Finally, if the node was already constructed, we need to reset it's\n    // prototype to the custom element prototype. And if it wasn't already\n    // constructed, we created a new node via native createElement, and we need\n    // to reset it's prototype. Basically always reset the prototype.\n    Object.setPrototypeOf(el, constructor.prototype);\n    return el;\n  }\n  subClass(Object, HTMLElement, HTMLElementPolyfill);\n\n  // Expose the polyfilled HTMLElement constructor for everyone to extend from.\n  win.HTMLElement = HTMLElementPolyfill;\n}\n\n/**\n * Wraps HTMLElement in a Reflect.construct constructor, so that transpiled\n * classes can `_this = superClass.call(this)` during their construction.\n *\n * This is only used when Custom Elements v1 is already available _and_ we're\n * using transpiled classes (which use ES5 construction idioms).\n *\n * @param {!Window} win\n */\nfunction wrapHTMLElement(win) {\n  const {HTMLElement, Reflect, Object} = win;\n  /**\n   */\n  function HTMLElementWrapper() {\n    const ctor = /** @type {function(...?):?|undefined} */(\n      /** @type {!HTMLElement} */(this).constructor);\n\n    // Reflect.construct allows us to construct a new HTMLElement without using\n    // `new` (which will always fail because native HTMLElement is a restricted\n    // constructor).\n    return Reflect.construct(HTMLElement, [], ctor);\n  }\n  subClass(Object, HTMLElement, HTMLElementWrapper);\n\n  // Expose the wrapped HTMLElement constructor for everyone to extend from.\n  win.HTMLElement = HTMLElementWrapper;\n}\n\n/**\n * Setups up prototype inheritance\n *\n * @param {!Object} Object\n * @param {!Function} superClass\n * @param {!Function} subClass\n */\nfunction subClass(Object, superClass, subClass) {\n  // Object.getOwnPropertyDescriptor(superClass.prototype, 'constructor')\n  // {value: , writable: true, enumerable: false, configurable: true}\n  subClass.prototype = Object.create(superClass.prototype, {\n    constructor: {\n      // enumerable: false,\n      configurable: true,\n      writable: true,\n      value: subClass,\n    },\n  });\n}\n\n/**\n * Polyfills Custom Elements v1 API. This has 4 modes:\n *\n * 1. Custom elements v1 already supported, using native classes\n * 2. Custom elements v1 already supported, using transpiled classes\n * 3. Custom elements v1 not supported, using native classes\n * 4. Custom elements v1 not supported, using transpiled classes\n *\n * In mode 1, nothing is done. In mode 2, a minimal polyfill is used to support\n * extending the HTMLElement base class. In mode 3 and 4, a full polyfill is\n * done.\n *\n * @param {!Window} win\n * @param {!Function} ctor\n */\nexport function install(win, ctor) {\n  if (isPatched(win)) {\n    return;\n  }\n\n  let install = true;\n  let installWrapper = false;\n\n  if (hasCustomElements(win)) {\n    // If ctor is constructable without new, it's a function. That means it was\n    // compiled down, and we need to do the minimal polyfill because all you\n    // cannot extend HTMLElement without native classes.\n    try {\n      const {Object, Reflect} = win;\n\n      // \"Construct\" ctor using ES5 idioms\n      const instance = Object.create(ctor.prototype);\n      ctor.call(instance);\n\n      // If that succeeded, we're in a transpiled environment\n      // Let's find out if we can wrap HTMLElement and avoid a full patch.\n      installWrapper = !!(Reflect && Reflect.construct);\n    } catch (e) {\n\n      // The ctor threw when we constructed is via ES5, so it's a real class.\n      // We're ok to not install the polyfill.\n      install = false;\n    }\n  }\n\n  if (installWrapper) {\n    wrapHTMLElement(win);\n  } else if (install) {\n    polyfill(win);\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * Polyfill for `document.contains()` method. Notice that according to spec\n * `document.contains` is inclusionary.\n * See https://developer.mozilla.org/en-US/docs/Web/API/Node/contains\n * @param {?Node} node\n * @return {boolean}\n * @this {Node}\n */\nfunction documentContainsPolyfill(node) {\n  // Per spec, \"contains\" method is inclusionary\n  // i.e. `node.contains(node) == true`. However, we still need to test\n  // equality to the document itself.\n  return node == this || this.documentElement.contains(node);\n}\n\n\n/**\n * Polyfills `HTMLDocument.contains` API.\n * @param {!Window} win\n */\nexport function install(win) {\n  // HTMLDocument is undefined in Internet Explorer 10, but it has Document,\n  // so we use that as a fallback.\n  const documentClass = win.HTMLDocument || win.Document;\n  if (!documentClass.prototype.contains) {\n    win.Object.defineProperty(documentClass.prototype, 'contains', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: documentContainsPolyfill,\n    });\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * Polyfill for `DOMTokenList.prototype.toggle(token, opt_force)` method. This\n * is specially important because IE does not support `opt_force` attribute. See\n * https://goo.gl/hgKNYY for details.\n * @param {string} token\n * @param {boolean=} opt_force\n * @this {DOMTokenList}\n * @return {boolean}\n */\nfunction domTokenListTogglePolyfill(token, opt_force) {\n  const remove = opt_force === undefined ? this.contains(token) : !opt_force;\n  if (remove) {\n    this.remove(token);\n    return false;\n  } else {\n    this.add(token);\n    return true;\n  }\n}\n\n\n/**\n * Polyfills `DOMTokenList.prototype.toggle` API in IE.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (isIe(win) && win.DOMTokenList) {\n    win.Object.defineProperty(win.DOMTokenList.prototype, 'toggle', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: domTokenListTogglePolyfill,\n    });\n  }\n}\n\n\n/**\n * Whether the current browser is a IE browser.\n * @param {!Window} win\n * @return {boolean}\n */\nfunction isIe(win) {\n  return /Trident|MSIE|IEMobile/i.test(win.navigator.userAgent);\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Parses the number x and returns its sign. For positive x returns 1, for\n * negative, -1. For 0 and -0, returns 0 and -0 respectively. For any number\n * that parses to NaN, returns NaN.\n *\n * @param {number} x\n * @return {number}\n */\nexport function sign(x) {\n  x = Number(x);\n\n  // If x is 0, -0, or NaN, return it.\n  if (!x) {\n    return x;\n  }\n\n  return x > 0 ? 1 : -1;\n}\n\n\n/**\n * Sets the Math.sign polyfill if it does not exist.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (!win.Math.sign) {\n    win.Object.defineProperty(win.Math, 'sign', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: sign,\n    });\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst {hasOwnProperty} = Object.prototype;\n\n/**\n * Copies values of all enumerable own properties from one or more source\n * objects (provided as extended arguments to the function) to a target object.\n *\n * @param {!Object} target\n * @param {...Object} var_args\n * @return {!Object}\n */\nexport function assign(target, var_args) {\n  if (target == null) {\n    throw new TypeError('Cannot convert undefined or null to object');\n  }\n\n  const output = Object(target);\n  for (let i = 1; i < arguments.length; i++) {\n    const source = arguments[i];\n    if (source != null) {\n      for (const key in source) {\n        if (hasOwnProperty.call(source, key)) {\n          output[key] = source[key];\n        }\n      }\n    }\n  }\n  return output;\n}\n\n\n/**\n * Sets the Object.assign polyfill if it does not exist.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (!win.Object.assign) {\n    win.Object.defineProperty(win.Object, 'assign', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: assign,\n    });\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nimport * as Promise from 'promise-pjs/promise';\n\n/**\n * Sets the Promise polyfill if it does not exist.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (!win.Promise) {\n    win.Promise = /** @type {?} */ (Promise);\n    // In babel the * export is an Object with a default property.\n    // In closure compiler it is the Promise function itself.\n    if (Promise.default) {\n      win.Promise = Promise.default;\n    }\n    // We copy the individual static methods, because closure\n    // compiler flattens the polyfill namespace.\n    win.Promise.resolve = Promise.resolve;\n    win.Promise.reject = Promise.reject;\n    win.Promise.all = Promise.all;\n    win.Promise.race = Promise.race;\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Services} from './services';\nimport {dev} from './log';\nimport {getServicePromise} from './service';\n\n/**\n * A map of services that delay rendering. The key is the name of the service\n * and the value is a DOM query which is used to check if the service is needed\n * in the current document.\n * Do not add a service unless absolutely necessary.\n *\n * \\   \\  /  \\  /   / /   \\     |   _  \\     |  \\ |  | |  | |  \\ |  |  / _____|\n *  \\   \\/    \\/   / /  ^  \\    |  |_)  |    |   \\|  | |  | |   \\|  | |  |  __\n *   \\            / /  /_\\  \\   |      /     |  . `  | |  | |  . `  | |  | |_ |\n *    \\    /\\    / /  _____  \\  |  |\\  \\----.|  |\\   | |  | |  |\\   | |  |__| |\n *     \\__/  \\__/ /__/     \\__\\ | _| `._____||__| \\__| |__| |__| \\__|  \\______|\n *\n * The equivalent of this list is used for server-side rendering (SSR) and any\n * changes made to it must be made in coordination with caches that implement\n * SSR. For more information on SSR see bit.ly/amp-ssr.\n *\n * @const {!Object<string, string>}\n */\nconst SERVICES = {\n  'amp-dynamic-css-classes': '[custom-element=amp-dynamic-css-classes]',\n  'variant': 'amp-experiment',\n  'amp-story': 'amp-story[standalone]',\n};\n\n/**\n * Maximum milliseconds to wait for all extensions to load before erroring.\n * @const\n */\nconst LOAD_TIMEOUT = 3000;\n\n/**\n * Detects any render delaying services that are required on the page, and\n * returns a promise with a timeout.\n * @param {!Window} win\n * @return {!Promise<!Array<*>>} resolves to an Array that has the same length\n *     as the detected render delaying services\n */\nexport function waitForServices(win) {\n  const promises = includedServices(win).map(service => {\n    return Services.timerFor(win).timeoutPromise(\n        LOAD_TIMEOUT,\n        getServicePromise(win, service),\n        `Render timeout waiting for service ${service} to be ready.`\n    );\n  });\n  return Promise.all(promises);\n}\n\n/**\n * Returns true if the page has a render delaying service.\n * @param {!Window} win\n * @return {boolean}\n */\nexport function hasRenderDelayingServices(win) {\n  return includedServices(win).length > 0;\n}\n\n/**\n * Detects which, if any, render-delaying extensions are included on the page.\n * @param {!Window} win\n * @return {!Array<string>}\n */\nexport function includedServices(win) {\n  /** @const {!Document} */\n  const doc = win.document;\n  dev().assert(doc.body);\n\n  return Object.keys(SERVICES).filter(service => {\n    return doc.querySelector(SERVICES[service]);\n  });\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Registration and getter functions for AMP services.\n *\n * Invariant: Service getters never return null for registered services.\n */\n\n// src/polyfills.js must be the first import.\nimport './polyfills'; // eslint-disable-line sort-imports-es6-autofix/sort-imports-es6\n\nimport {Deferred} from './utils/promise';\nimport {dev} from './log';\nimport {toWin} from './types';\n\n\n/**\n * Holds info about a service.\n * - obj: Actual service implementation when available.\n * - promise: Promise for the obj.\n * - resolve: Function to resolve the promise with the object.\n * - context: Argument for ctor, either a window or an ampdoc.\n * - ctor: Function that constructs and returns the service.\n * @typedef {{\n *   obj: (?Object),\n *   promise: (?Promise),\n *   resolve: (?function(!Object)),\n *   context: (?Window|?./service/ampdoc-impl.AmpDoc),\n *   ctor: (?function(new:Object, !Window)|\n *          ?function(new:Object, !./service/ampdoc-impl.AmpDoc)),\n * }}\n */\nlet ServiceHolderDef;\n\n\n/**\n * This interface provides a `dispose` method that will be called by\n * runtime when a service needs to be disposed of.\n * @interface\n */\nexport class Disposable {\n\n  /**\n   * Instructs the service to release any resources it might be holding. Can\n   * be called only once in the lifecycle of a service.\n   */\n  dispose() {}\n}\n\n\n/**\n * This interface provides a `adoptEmbedWindow` method that will be called by\n * runtime for a new embed window.\n * @interface\n */\nexport class EmbeddableService {\n\n  /**\n   * Instructs the service to adopt the embed window and add any necessary\n   * listeners and resources.\n   * @param {!Window} unusedEmbedWin\n   */\n  adoptEmbedWindow(unusedEmbedWin) {}\n}\n\n\n/**\n * Returns a service with the given id. Assumes that it has been registered\n * already.\n * @param {!Window} win\n * @param {string} id\n * @param {boolean=} opt_fallbackToTopWin\n * @return {Object} The service.\n */\nexport function getExistingServiceInEmbedScope(win, id, opt_fallbackToTopWin) {\n  // First, try to resolve via local (embed) window.\n  const local = getLocalExistingServiceForEmbedWinOrNull(win, id);\n  if (local) {\n    return local;\n  }\n  if (opt_fallbackToTopWin) {\n    return getService(win, id);\n  }\n  return null;\n}\n\n/**\n * Returns a service with the given id. Assumes that it has been constructed\n * already.\n *\n * Unlike most service getters, passing `Node` is necessary for some FIE-scope\n * services since sometimes we only have the FIE Document for context.\n *\n * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n * @param {string} id\n * @param {boolean=} opt_fallbackToTopWin\n * @return {Object} The service.\n */\nexport function getExistingServiceForDocInEmbedScope(\n  nodeOrDoc, id, opt_fallbackToTopWin) {\n  // First, try to resolve via local (embed) window.\n  if (nodeOrDoc.nodeType) {\n    // If a node is passed, try to resolve via this node.\n    const win = toWin(/** @type {!Document} */ (\n      nodeOrDoc.ownerDocument || nodeOrDoc).defaultView);\n    const local = getLocalExistingServiceForEmbedWinOrNull(win, id);\n    if (local) {\n      return local;\n    }\n  }\n  // If an ampdoc is passed or fallback is allowed, continue resolving.\n  if (!nodeOrDoc.nodeType || opt_fallbackToTopWin) {\n    return getServiceForDocDeprecated(nodeOrDoc, id);\n  }\n  return null;\n}\n\n/**\n * Installs a service override on amp-doc level.\n * @param {!Window} embedWin\n * @param {string} id\n * @param {!Object} service The service.\n */\nexport function installServiceInEmbedScope(embedWin, id, service) {\n  const topWin = getTopWindow(embedWin);\n  dev().assert(embedWin != topWin,\n      'Service override can only be installed in embed window: %s', id);\n  dev().assert(!getLocalExistingServiceForEmbedWinOrNull(embedWin, id),\n      'Service override has already been installed: %s', id);\n  registerServiceInternal(embedWin, embedWin, id, () => service);\n  getServiceInternal(embedWin, id); // Force service to build.\n}\n\n/**\n * @param {!Window} embedWin\n * @param {string} id\n * @return {?Object}\n */\nfunction getLocalExistingServiceForEmbedWinOrNull(embedWin, id) {\n  // Note that this method currently only resolves against the given window.\n  // It does not try to go all the way up the parent window chain. We can change\n  // this in the future, but for now this gives us a better performance.\n  const topWin = getTopWindow(embedWin);\n  if (embedWin != topWin && isServiceRegistered(embedWin, id)) {\n    return getServiceInternal(embedWin, id);\n  } else {\n    return null;\n  }\n}\n\n/**\n * Registers a service given a class to be used as implementation.\n * @param {!Window} win\n * @param {string} id of the service.\n * @param {function(new:Object, !Window)} constructor\n * @param {boolean=} opt_instantiate Whether to immediately create the service\n */\nexport function registerServiceBuilder(win,\n  id,\n  constructor,\n  opt_instantiate) {\n  win = getTopWindow(win);\n  registerServiceInternal(win, win, id, constructor);\n  if (opt_instantiate) {\n    getServiceInternal(win, id);\n  }\n}\n\n\n/**\n * Returns a service and registers it given a class to be used as\n * implementation.\n * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n * @param {string} id of the service.\n * @param {function(new:Object, !./service/ampdoc-impl.AmpDoc)} constructor\n * @param {boolean=} opt_instantiate Whether to immediately create the service\n */\nexport function registerServiceBuilderForDoc(nodeOrDoc,\n  id,\n  constructor,\n  opt_instantiate) {\n  const ampdoc = getAmpdoc(nodeOrDoc);\n  const holder = getAmpdocServiceHolder(ampdoc);\n  registerServiceInternal(holder, ampdoc, id, constructor);\n  if (opt_instantiate) {\n    getServiceInternal(holder, id);\n  }\n}\n\n\n/**\n * Returns a service for the given id and window (a per-window singleton). Users\n * should typically wrap this as a special purpose function (e.g.\n * `Services.vsyncFor(win)`) for type safety and because the factory should not\n * be passed around.\n * @param {!Window} win\n * @param {string} id of the service.\n * @template T\n * @return {T}\n */\nexport function getService(win, id) {\n  win = getTopWindow(win);\n  return getServiceInternal(win, id);\n}\n\n\n/**\n * Returns a promise for a service for the given id and window. Also expects an\n * element that has the actual implementation. The promise resolves when the\n * implementation loaded. Users should typically wrap this as a special purpose\n * function (e.g. `Services.vsyncFor(win)`) for type safety and because the\n * factory should not be passed around.\n * @param {!Window} win\n * @param {string} id of the service.\n * @return {!Promise<!Object>}\n */\nexport function getServicePromise(win, id) {\n  return getServicePromiseInternal(win, id);\n}\n\n\n/**\n * Returns a service or null with the given id.\n * @param {!Window} win\n * @param {string} id\n * @return {?Object} The service.\n */\nexport function getExistingServiceOrNull(win, id) {\n  win = getTopWindow(win);\n  if (isServiceRegistered(win, id)) {\n    return getServiceInternal(win, id);\n  } else {\n    return null;\n  }\n}\n\n\n/**\n * Like getServicePromise but returns null if the service was never registered.\n * @param {!Window} win\n * @param {string} id\n * @return {?Promise<!Object>}\n */\nexport function getServicePromiseOrNull(win, id) {\n  return getServicePromiseOrNullInternal(win, id);\n}\n\n\n/**\n * Returns a service for the given id and ampdoc (a per-ampdoc singleton).\n * Expects service `id` to be registered.\n * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n * @param {string} id\n * @return {T}\n * @template T\n */\nexport function getServiceForDoc(elementOrAmpDoc, id) {\n  const ampdoc = getAmpdoc(elementOrAmpDoc);\n  const holder = getAmpdocServiceHolder(ampdoc);\n  return getServiceInternal(holder, id);\n}\n\n\n/**\n * tl;dr -- Use getServiceForDoc() instead of this.\n *\n * Privileged variant of getServiceForDoc() that accepts non-element params,\n * e.g. window.document. This is currently necessary for doc-level services\n * used in startup, e.g. Chunks. Eventually we want to remove this function\n * and have callers find the appropriate AmpDoc and use getServiceForDoc().\n *\n * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n * @param {string} id\n * @return {T}\n * @template T\n */\nexport function getServiceForDocDeprecated(nodeOrDoc, id) {\n  const ampdoc = getAmpdoc(nodeOrDoc);\n  const holder = getAmpdocServiceHolder(ampdoc);\n  return getServiceInternal(holder, id);\n}\n\n\n/**\n * Returns a promise for a service for the given id and ampdoc. Also expects\n * a service that has the actual implementation. The promise resolves when\n * the implementation loaded.\n * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n * @param {string} id\n * @return {!Promise<!Object>}\n */\nexport function getServicePromiseForDoc(elementOrAmpDoc, id) {\n  return getServicePromiseInternal(\n      getAmpdocServiceHolder(elementOrAmpDoc), id);\n}\n\n\n/**\n * Like getServicePromiseForDoc but returns null if the service was never\n * registered for this ampdoc.\n * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n * @param {string} id\n * @return {?Promise<!Object>}\n */\nexport function getServicePromiseOrNullForDoc(elementOrAmpDoc, id) {\n  return getServicePromiseOrNullInternal(\n      getAmpdocServiceHolder(elementOrAmpDoc), id);\n}\n\n/**\n * Set the parent and top windows on a child window (friendly iframe).\n * @param {!Window} win\n * @param {!Window} parentWin\n */\nexport function setParentWindow(win, parentWin) {\n  win.__AMP_PARENT = parentWin;\n  win.__AMP_TOP = getTopWindow(parentWin);\n}\n\n\n/**\n * Returns the parent window for a child window (friendly iframe).\n * @param {!Window} win\n * @return {!Window}\n */\nexport function getParentWindow(win) {\n  return win.__AMP_PARENT || win;\n}\n\n\n/**\n * Returns the top window where AMP Runtime is installed for a child window\n * (friendly iframe).\n * @param {!Window} win\n * @return {!Window}\n */\nexport function getTopWindow(win) {\n  return win.__AMP_TOP || win;\n}\n\n\n/**\n * Returns the parent \"friendly\" iframe if the node belongs to a child window.\n * @param {!Node} node\n * @param {!Window} topWin\n * @return {?HTMLIFrameElement}\n */\nexport function getParentWindowFrameElement(node, topWin) {\n  const childWin = (node.ownerDocument || node).defaultView;\n  if (childWin && childWin != topWin && getTopWindow(childWin) == topWin) {\n    try {\n      return /** @type {?HTMLIFrameElement} */ (childWin.frameElement);\n    } catch (e) {\n      // Ignore the error.\n    }\n  }\n  return null;\n}\n\n\n/**\n * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n * @return {!./service/ampdoc-impl.AmpDoc}\n */\nexport function getAmpdoc(nodeOrDoc) {\n  if (nodeOrDoc.nodeType) {\n    const win = toWin(/** @type {!Document} */ (\n      nodeOrDoc.ownerDocument || nodeOrDoc).defaultView);\n    return getAmpdocService(win).getAmpDoc(/** @type {!Node} */ (nodeOrDoc));\n  }\n  return /** @type {!./service/ampdoc-impl.AmpDoc} */ (nodeOrDoc);\n}\n\n\n/**\n * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n * @return {!./service/ampdoc-impl.AmpDoc|!Window}\n */\nfunction getAmpdocServiceHolder(nodeOrDoc) {\n  const ampdoc = getAmpdoc(nodeOrDoc);\n  return ampdoc.isSingleDoc() ? ampdoc.win : ampdoc;\n}\n\n\n/**\n * This is essentially a duplicate of `ampdoc.js`, but necessary to avoid\n * circular dependencies.\n * @param {!Window} win\n * @return {!./service/ampdoc-impl.AmpDocService}\n */\nfunction getAmpdocService(win) {\n  return /** @type {!./service/ampdoc-impl.AmpDocService} */ (\n    getService(win, 'ampdoc'));\n}\n\n\n/**\n * Get service `id` from `holder`. Assumes the service\n * has already been registered.\n * @param {!Object} holder Object holding the service instance.\n * @param {string} id of the service.\n * @return {Object}\n * @template T\n */\nfunction getServiceInternal(holder, id) {\n  dev().assert(isServiceRegistered(holder, id),\n      `Expected service ${id} to be registered`);\n  const services = getServices(holder);\n  const s = services[id];\n  if (!s.obj) {\n    dev().assert(s.ctor, `Service ${id} registered without ctor nor impl.`);\n    dev().assert(s.context, `Service ${id} registered without context.`);\n    s.obj = new s.ctor(s.context);\n    dev().assert(s.obj, `Service ${id} constructed to null.`);\n    s.ctor = null;\n    s.context = null;\n    // The service may have been requested already, in which case we have a\n    // pending promise we need to fulfill.\n    if (s.resolve) {\n      s.resolve(s.obj);\n    }\n  }\n  return s.obj;\n}\n\n/**\n * @param {!Object} holder Object holding the service instance.\n * @param {!Window|!./service/ampdoc-impl.AmpDoc} context Win or AmpDoc.\n * @param {string} id of the service.\n * @param {?function(new:Object, !Window)|?function(new:Object, !./service/ampdoc-impl.AmpDoc)} ctor Constructor function to new the service. Called with context.\n */\nfunction registerServiceInternal(holder, context, id, ctor) {\n  const services = getServices(holder);\n  let s = services[id];\n\n  if (!s) {\n    s = services[id] = {\n      obj: null,\n      promise: null,\n      resolve: null,\n      context: null,\n      ctor: null,\n    };\n  }\n\n  if (s.ctor || s.obj) {\n    // Service already registered.\n    return;\n  }\n\n  s.ctor = ctor;\n  s.context = context;\n\n  // The service may have been requested already, in which case there is a\n  // pending promise that needs to fulfilled.\n  if (s.resolve) {\n    // getServiceInternal will resolve the promise.\n    getServiceInternal(holder, id);\n  }\n}\n\n/**\n * @param {!Object} holder\n * @param {string} id of the service.\n * @return {!Promise<!Object>}\n */\nfunction getServicePromiseInternal(holder, id) {\n  const cached = getServicePromiseOrNullInternal(holder, id);\n  if (cached) {\n    return cached;\n  }\n  // Service is not registered.\n\n  // TODO(@cramforce): Add a check that if the element is eventually registered\n  // that the service is actually provided and this promise resolves.\n  const deferred = new Deferred();\n  const {promise, resolve} = deferred;\n\n  const services = getServices(holder);\n  services[id] = {\n    obj: null,\n    promise,\n    resolve,\n    context: null,\n    ctor: null,\n  };\n  return promise;\n}\n\n\n/**\n * Returns a promise for service `id` if the service has been registered\n * on `holder`.\n * @param {!Object} holder\n * @param {string} id of the service.\n * @return {?Promise<!Object>}\n */\nfunction getServicePromiseOrNullInternal(holder, id) {\n  const services = getServices(holder);\n  const s = services[id];\n  if (s) {\n    if (s.promise) {\n      return s.promise;\n    } else {\n      // Instantiate service if not already instantiated.\n      getServiceInternal(holder, id);\n      return s.promise = Promise.resolve(/** @type {!Object} */ (s.obj));\n    }\n  }\n  return null;\n}\n\n\n/**\n * Returns the object that holds the services registered in a holder.\n * @param {!Object} holder\n * @return {!Object<string,!ServiceHolderDef>}\n */\nfunction getServices(holder) {\n  let {services} = holder;\n  if (!services) {\n    services = holder.services = {};\n  }\n  return services;\n}\n\n\n/**\n * Whether the specified service implements `Disposable` interface.\n * @param {!Object} service\n * @return {boolean}\n */\nexport function isDisposable(service) {\n  return typeof service.dispose == 'function';\n}\n\n\n/**\n * Asserts that the specified service implements `Disposable` interface and\n * typecasts the instance to `Disposable`.\n * @param {!Object} service\n * @return {!Disposable}\n */\nexport function assertDisposable(service) {\n  dev().assert(isDisposable(service), 'required to implement Disposable');\n  return /** @type {!Disposable} */ (service);\n}\n\n\n/**\n * Disposes all disposable (implements `Disposable` interface) services in\n * ampdoc scope.\n * @param {!./service/ampdoc-impl.AmpDoc} ampdoc\n */\nexport function disposeServicesForDoc(ampdoc) {\n  disposeServicesInternal(ampdoc);\n}\n\n\n/**\n * Disposes all disposable (implements `Disposable` interface) services in\n * embed scope.\n * @param {!Window} embedWin\n */\nexport function disposeServicesForEmbed(embedWin) {\n  disposeServicesInternal(embedWin);\n}\n\n\n/**\n * @param {!Object} holder Object holding the service instances.\n */\nfunction disposeServicesInternal(holder) {\n  // TODO(dvoytenko): Consider marking holder as destroyed for later-arriving\n  // service to be canceled automatically.\n  const services = getServices(holder);\n  for (const id in services) {\n    if (!Object.prototype.hasOwnProperty.call(services, id)) {\n      continue;\n    }\n    const serviceHolder = services[id];\n    if (serviceHolder.obj) {\n      disposeServiceInternal(id, serviceHolder.obj);\n    } else if (serviceHolder.promise) {\n      serviceHolder.promise.then(\n          instance => disposeServiceInternal(id, instance));\n    }\n  }\n}\n\n\n/**\n * @param {string} id\n * @param {!Object} service\n */\nfunction disposeServiceInternal(id, service) {\n  if (!isDisposable(service)) {\n    return;\n  }\n  try {\n    assertDisposable(service).dispose();\n  } catch (e) {\n    // Ensure that a failure to dispose a service does not disrupt other\n    // services.\n    dev().error('SERVICE', 'failed to dispose service', id, e);\n  }\n}\n\n\n/**\n * Whether the specified service implements `EmbeddableService` interface.\n * @param {!Object} service\n * @return {boolean}\n */\nexport function isEmbeddable(service) {\n  return typeof service.adoptEmbedWindow == 'function';\n}\n\n\n/**\n * Adopts an embeddable (implements `EmbeddableService` interface) service\n * in embed scope.\n * @param {!Window} embedWin\n * @param {string} serviceId\n */\nexport function adoptServiceForEmbed(embedWin, serviceId) {\n  const adopted = adoptServiceForEmbedIfEmbeddable(embedWin, serviceId);\n  dev().assert(adopted, `Service ${serviceId} not found on parent ` +\n      'or doesn\\'t implement EmbeddableService.');\n}\n\n\n/**\n * Adopts an embeddable (implements `EmbeddableService` interface) service\n * in embed scope.\n * @param {!Window} embedWin\n * @param {string} serviceId\n * @return {boolean}\n */\nexport function adoptServiceForEmbedIfEmbeddable(embedWin, serviceId) {\n  const frameElement = /** @type {!Node} */ (dev().assert(\n      embedWin.frameElement,\n      'frameElement not found for embed'));\n  const ampdoc = getAmpdoc(frameElement);\n  const holder = getAmpdocServiceHolder(ampdoc);\n  if (!isServiceRegistered(holder, serviceId)) {\n    return false;\n  }\n  const service = getServiceForDocDeprecated(frameElement, serviceId);\n  if (!isEmbeddable(service)) {\n    return false;\n  }\n  service.adoptEmbedWindow(embedWin);\n  return true;\n}\n\n\n/**\n * Resets a single service, so it gets recreated on next getService invocation.\n * @param {!Object} holder\n * @param {string} id of the service.\n */\nexport function resetServiceForTesting(holder, id) {\n  if (holder.services) {\n    holder.services[id] = null;\n  }\n}\n\n/**\n * @param {!Object} holder Object holding the service instance.\n * @param {string} id of the service.\n * @return {boolean}\n */\nfunction isServiceRegistered(holder, id) {\n  const service = holder.services && holder.services[id];\n  // All registered services must have an implementation or a constructor.\n  return !!(service && (service.ctor || service.obj));\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  getAmpdoc,\n  getExistingServiceForDocInEmbedScope,\n  getExistingServiceOrNull,\n  getService,\n  getServiceForDoc,\n  getServiceForDocDeprecated,\n  getServicePromiseForDoc,\n} from './service';\nimport {\n  getElementServiceForDoc,\n  getElementServiceIfAvailable,\n  getElementServiceIfAvailableForDoc,\n  getElementServiceIfAvailableForDocInEmbedScope,\n} from './element-service';\n\n/** @typedef {!../extensions/amp-subscriptions/0.1/amp-subscriptions.SubscriptionService} */\nexport let SubscriptionService;\n\nexport class Services {\n  /**\n   * Hint: Add extensions folder path to compile.js with\n   * warnings cannot find modules.\n   */\n\n  /**\n   * Returns a promise for the Access service.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!../extensions/amp-access/0.1/amp-access.AccessService>}\n   */\n  static accessServiceForDoc(elementOrAmpDoc) {\n    return (/** @type {!Promise<!../extensions/amp-access/0.1/amp-access.AccessService>} */ (\n      getElementServiceForDoc(elementOrAmpDoc, 'access', 'amp-access')));\n  }\n\n  /**\n   * Returns a promise for the Access service or a promise for null if the\n   * service is not available on the current page.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<?../extensions/amp-access/0.1/amp-access.AccessService>}\n   */\n  static accessServiceForDocOrNull(elementOrAmpDoc) {\n    return (/** @type {!Promise<?../extensions/amp-access/0.1/amp-access.AccessService>} */ (\n      getElementServiceIfAvailableForDoc(elementOrAmpDoc, 'access',\n          'amp-access')));\n  }\n\n  /**\n   * Returns a promise for the Subscriptions service.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!SubscriptionService>}\n   */\n  static subscriptionsServiceForDoc(elementOrAmpDoc) {\n    return (/** @type {!Promise<!SubscriptionService>} */ (\n      getElementServiceForDoc(elementOrAmpDoc, 'subscriptions',\n          'amp-subscriptions')));\n  }\n\n  /**\n   * Returns a promise for the Subscriptions service.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<?SubscriptionService>}\n   */\n  static subscriptionsServiceForDocOrNull(elementOrAmpDoc) {\n    return (/** @type {!Promise<?SubscriptionService>} */ (\n      getElementServiceIfAvailableForDoc(elementOrAmpDoc, 'subscriptions',\n          'amp-subscriptions')));\n  }\n\n  /**\n   * Unlike most service getters, passing `Node` is necessary for some FIE-scope\n   * services since sometimes we only have the FIE Document for context.\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/action-impl.ActionService}\n   */\n  static actionServiceForDoc(nodeOrDoc) {\n    return /** @type {!./service/action-impl.ActionService} */ (\n      getExistingServiceForDocInEmbedScope(\n          nodeOrDoc, 'action', /* opt_fallbackToTopWin */ true));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!Activity>}\n   */\n  static activityForDoc(elementOrAmpDoc) {\n    return /** @type {!Promise<!Activity>} */ (\n      getElementServiceForDoc(elementOrAmpDoc, 'activity', 'amp-analytics'));\n  }\n\n  /**\n   * Returns the global instance of the `AmpDocService` service that can be\n   * used to resolve an ampdoc for any node: either in the single-doc or\n   * shadow-doc environment.\n   * @param {!Window} window\n   * @return {!./service/ampdoc-impl.AmpDocService}\n   */\n  static ampdocServiceFor(window) {\n    return /** @type {!./service/ampdoc-impl.AmpDocService} */ (\n      getService(window, 'ampdoc'));\n  }\n\n  /**\n   * Returns the AmpDoc for the specified context node.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!./service/ampdoc-impl.AmpDoc}\n   */\n  static ampdoc(elementOrAmpDoc) {\n    return getAmpdoc(elementOrAmpDoc);\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @param {boolean=} loadAnalytics\n   * @return {!Promise<!../extensions/amp-analytics/0.1/instrumentation.InstrumentationService>}\n   */\n  static analyticsForDoc(elementOrAmpDoc, loadAnalytics = false) {\n    if (loadAnalytics) {\n      // Get Extensions service and force load analytics extension.\n      const ampdoc = getAmpdoc(elementOrAmpDoc);\n      Services.extensionsFor(ampdoc.win)./*OK*/installExtensionForDoc(\n          ampdoc, 'amp-analytics');\n    }\n    return /** @type {!Promise<!../extensions/amp-analytics/0.1/instrumentation.InstrumentationService>} */ (\n      getElementServiceForDoc(elementOrAmpDoc, 'amp-analytics-instrumentation',\n          'amp-analytics'));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<?../extensions/amp-analytics/0.1/instrumentation.InstrumentationService>}\n   */\n  static analyticsForDocOrNull(elementOrAmpDoc) {\n    return /** @type {!Promise<?../extensions/amp-analytics/0.1/instrumentation.InstrumentationService>} */ (\n      getElementServiceIfAvailableForDoc(elementOrAmpDoc,\n          'amp-analytics-instrumentation', 'amp-analytics'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/batched-xhr-impl.BatchedXhr}\n   */\n  static batchedXhrFor(window) {\n    return /** @type {!./service/batched-xhr-impl.BatchedXhr} */ (\n      getService(window, 'batched-xhr'));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<?../extensions/amp-bind/0.1/bind-impl.Bind>}\n   */\n  static bindForDocOrNull(elementOrAmpDoc) {\n    return /** @type {!Promise<?../extensions/amp-bind/0.1/bind-impl.Bind>} */ (\n      getElementServiceIfAvailableForDocInEmbedScope(\n          elementOrAmpDoc, 'bind', 'amp-bind'));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!./service/cid-impl.Cid>}\n   */\n  static cidForDoc(elementOrAmpDoc) {\n    return /** @type {!Promise<!./service/cid-impl.Cid>} */ (\n      getServicePromiseForDoc(elementOrAmpDoc, 'cid'));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!./service/navigation.Navigation}\n   */\n  static navigationForDoc(elementOrAmpDoc) {\n    return /** @type {!./service/navigation.Navigation} */ (\n      getServiceForDoc(elementOrAmpDoc, 'navigation'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/crypto-impl.Crypto}\n   */\n  static cryptoFor(window) {\n    return (/** @type {!./service/crypto-impl.Crypto} */ (\n      getService(window, 'crypto')));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!./service/document-info-impl.DocumentInfoDef} Info about the doc\n   */\n  static documentInfoForDoc(elementOrAmpDoc) {\n    return /** @type {!./service/document-info-impl.DocInfo} */ (\n      getServiceForDoc(elementOrAmpDoc, 'documentInfo')).get();\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/document-state.DocumentState}\n   */\n  static documentStateFor(window) {\n    return getService(window, 'documentState');\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/extensions-impl.Extensions}\n   */\n  static extensionsFor(window) {\n    return /** @type {!./service/extensions-impl.Extensions} */ (\n      getService(window, 'extensions'));\n  }\n\n  /**\n   * Returns service implemented in service/history-impl.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!./service/history-impl.History}\n   */\n  static historyForDoc(elementOrAmpDoc) {\n    return /** @type {!./service/history-impl.History} */ (\n      getServiceForDoc(elementOrAmpDoc, 'history'));\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {!./input.Input}\n   */\n  static inputFor(win) {\n    return getService(win, 'input');\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!./service/layers-impl.LayoutLayers}\n   */\n  static layersForDoc(elementOrAmpDoc) {\n    return /** @type {!./service/layers-impl.LayoutLayers} */ (\n      getServiceForDoc(elementOrAmpDoc, 'layers'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/performance-impl.Performance}\n   */\n  static performanceFor(window) {\n    return /** @type {!./service/performance-impl.Performance}*/ (\n      getService(window, 'performance'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/performance-impl.Performance}\n   */\n  static performanceForOrNull(window) {\n    return /** @type {!./service/performance-impl.Performance}*/ (\n      getExistingServiceOrNull(window, 'performance'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/platform-impl.Platform}\n   */\n  static platformFor(window) {\n    return /** @type {!./service/platform-impl.Platform} */ (\n      getService(window, 'platform'));\n  }\n\n  /**\n   * Uses getServiceForDocDeprecated() since Resources is a startup service.\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/resources-impl.Resources}\n   */\n  static resourcesForDoc(nodeOrDoc) {\n    return /** @type {!./service/resources-impl.Resources} */ (\n      getServiceForDocDeprecated(nodeOrDoc, 'resources'));\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {?Promise<?{incomingFragment: string, outgoingFragment: string}>}\n   */\n  static shareTrackingForOrNull(win) {\n    return (/** @type {!Promise<?{incomingFragment: string, outgoingFragment: string}>} */ (\n      getElementServiceIfAvailable(win, 'share-tracking',\n          'amp-share-tracking', true)));\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {?Promise<?../extensions/amp-story/1.0/variable-service.StoryVariableDef>}\n   */\n  static storyVariableServiceForOrNull(win) {\n    return (\n    /** @type {!Promise<?../extensions/amp-story/1.0/variable-service.StoryVariableDef>} */\n      (getElementServiceIfAvailable(win, 'story-variable', 'amp-story',\n          true)));\n  }\n\n  /**\n   * Version of the story store service depends on which version of amp-story\n   * the publisher is loading. They all have the same implementation.\n   * @param {!Window} win\n   * @return {?Promise<?../extensions/amp-story/1.0/amp-story-store-service.AmpStoryStoreService|?../extensions/amp-story/0.1/amp-story-store-service.AmpStoryStoreService>}\n   */\n  static storyStoreServiceForOrNull(win) {\n    return (\n    /** @type {!Promise<?../extensions/amp-story/1.0/amp-story-store-service.AmpStoryStoreService|?../extensions/amp-story/0.1/amp-story-store-service.AmpStoryStoreService>} */\n      (getElementServiceIfAvailable(win, 'story-store', 'amp-story')));\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {?../extensions/amp-story/1.0/amp-story-store-service.AmpStoryStoreService}\n   */\n  static storyStoreService(win) {\n    return (/** @type {?../extensions/amp-story/1.0/amp-story-store-service.AmpStoryStoreService} */\n      (getExistingServiceOrNull(win, 'story-store')));\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {?../extensions/amp-story/1.0/amp-story-request-service.AmpStoryRequestService}\n   */\n  static storyRequestService(win) {\n    return (/** @type {?../extensions/amp-story/1.0/amp-story-request-service.AmpStoryRequestService} */\n      (getExistingServiceOrNull(win, 'story-request')));\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {!Promise<?../extensions/amp-story/1.0/localization.LocalizationService>}\n   */\n  static localizationServiceForOrNull(win) {\n    return (\n    /** @type {!Promise<?../extensions/amp-story/1.0/localization.LocalizationService>} */\n      (getElementServiceIfAvailable(win, 'localization', 'amp-story', true)));\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {!../extensions/amp-story/1.0/localization.LocalizationService}\n   */\n  static localizationService(win) {\n    return getService(win, 'localization');\n  }\n\n  /**\n   * TODO(#14357): Remove this when amp-story:0.1 is deprecated.\n   * @param {!Window} win\n   * @return {!../extensions/amp-story/0.1/amp-story-store-service.AmpStoryStoreService}\n   */\n  static storyStoreServiceV01(win) {\n    return getService(win, 'story-store');\n  }\n\n  /**\n   * TODO(#14357): Remove this when amp-story:0.1 is deprecated.\n   * @param {!Window} win\n   * @return {!../extensions/amp-story/0.1/amp-story-request-service.AmpStoryRequestService}\n   */\n  static storyRequestServiceV01(win) {\n    return getService(win, 'story-request-v01');\n  }\n\n  /**\n   * TODO(#14357): Remove this when amp-story:0.1 is deprecated.\n   * @param {!Window} win\n   * @return {!Promise<?../extensions/amp-story/0.1/localization.LocalizationService>}\n   */\n  static localizationServiceForOrNullV01(win) {\n    return (\n    /** @type {!Promise<?../extensions/amp-story/0.1/localization.LocalizationService>} */\n      (getElementServiceIfAvailable(win, 'localization-v01', 'amp-story',\n          true)));\n  }\n\n  /**\n   * TODO(#14357): Remove this when amp-story:0.1 is deprecated.\n   * @param {!Window} win\n   * @return {!../extensions/amp-story/0.1/localization.LocalizationService}\n   */\n  static localizationServiceV01(win) {\n    return getService(win, 'localization-v01');\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {?Promise<?../extensions/amp-viewer-integration/0.1/variable-service.ViewerIntegrationVariableDef>}\n   */\n  static viewerIntegrationVariableServiceForOrNull(win) {\n    return (\n    /** @type {!Promise<?../extensions/amp-viewer-integration/0.1/variable-service.ViewerIntegrationVariableDef>} */\n      (getElementServiceIfAvailable(win, 'viewer-integration-variable',\n          'amp-viewer-integration', true)));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!../extensions/amp-animation/0.1/web-animation-service.WebAnimationService>}\n   */\n  static webAnimationServiceFor(elementOrAmpDoc) {\n    return (/** @type {!Promise<!../extensions/amp-animation/0.1/web-animation-service.WebAnimationService>} */\n      (getElementServiceForDoc(\n          elementOrAmpDoc, 'web-animation', 'amp-animation')));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!./service/storage-impl.Storage>}\n   */\n  static storageForDoc(elementOrAmpDoc) {\n    return /** @type {!Promise<!./service/storage-impl.Storage>} */ (\n      getServicePromiseForDoc(elementOrAmpDoc, 'storage'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/template-impl.Templates}\n   */\n  static templatesFor(window) {\n    return /** @type {!./service/template-impl.Templates} */ (\n      getService(window, 'templates'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/timer-impl.Timer}\n   */\n  static timerFor(window) {\n    return /** @type {!./service/timer-impl.Timer} */ (\n      getService(window, 'timer'));\n  }\n\n  /**\n   * Unlike most service getters, passing `Node` is necessary for some FIE-scope\n   * services since sometimes we only have the FIE Document for context.\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/url-replacements-impl.UrlReplacements}\n   */\n  static urlReplacementsForDoc(nodeOrDoc) {\n    return /** @type {!./service/url-replacements-impl.UrlReplacements} */ (\n      getExistingServiceForDocInEmbedScope(\n          nodeOrDoc, 'url-replace', /* opt_fallbackToTopWin */ true));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!../extensions/amp-user-notification/0.1/amp-user-notification.UserNotificationManager>}\n   */\n  static userNotificationManagerForDoc(elementOrAmpDoc) {\n    return (/** @type {!Promise<!../extensions/amp-user-notification/0.1/amp-user-notification.UserNotificationManager>} */\n      (getElementServiceForDoc(elementOrAmpDoc, 'userNotificationManager',\n          'amp-user-notification')));\n  }\n\n  /**\n   * Returns a promise for the consentPolicy Service or a promise for null if\n   * the service is not available on the current page.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<?../extensions/amp-consent/0.1/consent-policy-manager.ConsentPolicyManager>}\n   */\n  static consentPolicyServiceForDocOrNull(elementOrAmpDoc) {\n    return (/** @type {!Promise<?../extensions/amp-consent/0.1/consent-policy-manager.ConsentPolicyManager>} */\n      (getElementServiceIfAvailableForDoc(elementOrAmpDoc,\n          'consentPolicyManager', 'amp-consent')));\n  }\n\n  /**\n   * Returns a promise for the geo service or a promise for null if\n   * the service is not available on the current page.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<?../extensions/amp-geo/0.1/amp-geo.GeoDef>}\n   */\n  static geoForDocOrNull(elementOrAmpDoc) {\n    return /** @type {!Promise<?../extensions/amp-geo/0.1/amp-geo.GeoDef>} */ (\n      getElementServiceIfAvailableForDoc(\n          elementOrAmpDoc, 'geo', 'amp-geo', true));\n  }\n\n  /**\n   * Unlike most service getters, passing `Node` is necessary for some FIE-scope\n   * services since sometimes we only have the FIE Document for context.\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/url-impl.Url}\n   */\n  static urlForDoc(nodeOrDoc) {\n    return /** @type {!./service/url-impl.Url} */ (\n      getExistingServiceForDocInEmbedScope(\n          nodeOrDoc, 'url', /* opt_fallbackToTopWin */ true));\n  }\n\n  /**\n   * Returns a promise for the experiment variants or a promise for null if it\n   * is not available on the current page.\n   * @param {!Window} win\n   * @return {!Promise<?Object<string>>}\n   */\n  static variantForOrNull(win) {\n    return /** @type {!Promise<?Object<string>>} */ (\n      getElementServiceIfAvailable(win, 'variant', 'amp-experiment', true));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!./service/video-service-interface.VideoServiceInterface}\n   */\n  static videoManagerForDoc(elementOrAmpDoc) {\n    return (\n      /** @type {!./service/video-service-interface.VideoServiceInterface} */ (\n        getServiceForDoc(elementOrAmpDoc, 'video-manager')));\n  }\n\n  /**\n   * Uses getServiceForDocDeprecated() since Viewer is a startup service.\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/viewer-impl.Viewer}\n   */\n  static viewerForDoc(nodeOrDoc) {\n    return /** @type {!./service/viewer-impl.Viewer} */ (\n      getServiceForDocDeprecated(nodeOrDoc, 'viewer'));\n  }\n\n  /**\n   * Returns promise for the viewer. This is an unusual case and necessary only\n   * for services that need reference to the viewer before it has been\n   * initialized. Most of the code, however, just should use `viewerForDoc`.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!./service/viewer-impl.Viewer>}\n   */\n  static viewerPromiseForDoc(elementOrAmpDoc) {\n    return /** @type {!Promise<!./service/viewer-impl.Viewer>} */ (\n      getServicePromiseForDoc(elementOrAmpDoc, 'viewer'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/vsync-impl.Vsync}\n   */\n  static vsyncFor(window) {\n    return /** @type {!./service/vsync-impl.Vsync} */ (\n      getService(window, 'vsync'));\n  }\n\n  /**\n   * Uses getServiceForDocDeprecated() since Viewport is a startup service.\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/viewport/viewport-impl.Viewport}\n   */\n  static viewportForDoc(nodeOrDoc) {\n    return /** @type {!./service/viewport/viewport-impl.Viewport} */ (\n      getServiceForDocDeprecated(nodeOrDoc, 'viewport'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/xhr-impl.Xhr}\n   */\n  static xhrFor(window) {\n    return /** @type {!./service/xhr-impl.Xhr} */ (getService(window, 'xhr'));\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @param {string} _match\n * @param {string} character\n * @return {string}\n */\nfunction toUpperCase(_match, character) {\n  return character.toUpperCase();\n}\n\n/**\n * @param {string} match\n * @return {string}\n */\nfunction prependDashAndToLowerCase(match) {\n  return '-' + match.toLowerCase();\n}\n\n/**\n * @param {string} name Attribute name containing dashes.\n * @return {string} Dashes removed and successive character sent to upper case.\n * visibleForTesting\n */\nexport function dashToCamelCase(name) {\n  return name.replace(/-([a-z])/g, toUpperCase);\n}\n\n/**\n * Converts a string that is in camelCase to one that is in dash-case.\n *\n * @param {string} string The string to convert.\n * @return {string} The string in dash-case.\n */\nexport function camelCaseToDash(string) {\n  return string.replace(/(?!^)[A-Z]/g, prependDashAndToLowerCase);\n}\n\n/**\n * @param {string} name Attribute name with dashes\n * @return {string} Dashes replaced by underlines.\n */\nexport function dashToUnderline(name) {\n  return name.replace('-', '_');\n}\n\n/**\n * Polyfill for String.prototype.endsWith.\n * @param {string} string\n * @param {string} suffix\n * @return {boolean}\n */\nexport function endsWith(string, suffix) {\n  const index = string.length - suffix.length;\n  return index >= 0 && string.indexOf(suffix, index) == index;\n}\n\n/**\n * Polyfill for String.prototype.startsWith.\n * @param {string} string\n * @param {string} prefix\n * @return {boolean}\n */\nexport function startsWith(string, prefix) {\n  if (prefix.length > string.length) {\n    return false;\n  }\n  return string.lastIndexOf(prefix, 0) == 0;\n}\n\n/**\n * Expands placeholders in a given template string with values.\n *\n * Placeholders use ${key-name} syntax and are replaced with the value\n * returned from the given getter function.\n *\n * @param {string} template The template string to expand.\n * @param {function(string):*} getter Function used to retrieve a value for a\n *   placeholder. Returns values will be coerced into strings.\n * @param {number=} opt_maxIterations Number of times to expand the template.\n *   Defaults to 1, but should be set to a larger value your placeholder tokens\n *   can be expanded to other placeholder tokens. Take caution with large values\n *   as recursively expanding a string can be exponentially expensive.\n */\nexport function expandTemplate(template, getter, opt_maxIterations) {\n  const maxIterations = opt_maxIterations || 1;\n  for (let i = 0; i < maxIterations; i++) {\n    let matches = 0;\n    template = template.replace(/\\${([^}]*)}/g, (_a, b) => {\n      matches++;\n      return getter(b);\n    });\n    if (!matches) {\n      break;\n    }\n  }\n  return template;\n}\n\n/**\n * Hash function djb2a\n * This is intended to be a simple, fast hashing function using minimal code.\n * It does *not* have good cryptographic properties.\n * @param {string} str\n * @return {string} 32-bit unsigned hash of the string\n */\nexport function stringHash32(str) {\n  const {length} = str;\n  let hash = 5381;\n  for (let i = 0; i < length; i++) {\n    hash = hash * 33 ^ str.charCodeAt(i);\n  }\n  // Convert from 32-bit signed to unsigned.\n  return String(hash >>> 0);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Services} from './services';\nimport {dev, rethrowAsync} from './log';\nimport {insertAfterOrAtStart, waitForBody} from './dom';\nimport {map} from './utils/object';\nimport {setStyles} from './style';\nimport {waitForServices} from './render-delaying-services';\n\nconst TRANSFORMER_PROP = '__AMP_CSS_TR';\nconst STYLE_MAP_PROP = '__AMP_CSS_SM';\nconst bodyVisibleSentinel = '__AMP_BODY_VISIBLE';\n\n\n/**\n * Adds the given css text to the given ampdoc.\n *\n * The style tags will be at the beginning of the head before all author\n * styles. One element can be the main runtime CSS. This is guaranteed\n * to always be the first stylesheet in the doc.\n *\n * @param {!./service/ampdoc-impl.AmpDoc} ampdoc The ampdoc that should get the new styles.\n * @param {string} cssText\n * @param {?function(!Element)|undefined} cb Called when the new styles are available.\n *     Not using a promise, because this is synchronous when possible.\n *     for better performance.\n * @param {boolean=} opt_isRuntimeCss If true, this style tag will be inserted\n *     as the first element in head and all style elements will be positioned\n *     after.\n * @param {string=} opt_ext\n * @return {!Element}\n */\nexport function installStylesForDoc(\n  ampdoc, cssText, cb, opt_isRuntimeCss, opt_ext) {\n  const cssRoot = ampdoc.getHeadNode();\n  const style = insertStyleElement(\n      cssRoot,\n      maybeTransform(cssRoot, cssText),\n      opt_isRuntimeCss || false,\n      opt_ext || null);\n\n  if (cb) {\n    const rootNode = ampdoc.getRootNode();\n    // Styles aren't always available synchronously. E.g. if there is a\n    // pending style download, it will have to finish before the new\n    // style is visible.\n    // For this reason we poll until the style becomes available.\n    // Sync case.\n    if (styleLoaded(rootNode, style)) {\n      cb(style);\n      return style;\n    }\n    // Poll until styles are available.\n    const interval = setInterval(() => {\n      if (styleLoaded(rootNode, style)) {\n        clearInterval(interval);\n        cb(style);\n      }\n    }, 4);\n  }\n  return style;\n}\n\n\n/**\n * Adds the given css text to the given document.\n * TODO(dvoytenko, #10705): Remove this method once FIE/ampdoc migration is\n * done.\n *\n * @param {!Document} doc The document that should get the new styles.\n * @param {string} cssText\n * @param {?function(!Element)|undefined} cb Called when the new styles are\n *     available. Not using a promise, because this is synchronous when\n *     possible. for better performance.\n * @param {boolean=} opt_isRuntimeCss If true, this style tag will be inserted\n *     as the first element in head and all style elements will be positioned\n *     after.\n * @param {string=} opt_ext\n * @return {!Element}\n */\nexport function installStylesLegacy(\n  doc, cssText, cb, opt_isRuntimeCss, opt_ext) {\n  const style = insertStyleElement(\n      dev().assertElement(doc.head),\n      cssText,\n      opt_isRuntimeCss || false,\n      opt_ext || null);\n\n  if (cb) {\n    // Styles aren't always available synchronously. E.g. if there is a\n    // pending style download, it will have to finish before the new\n    // style is visible.\n    // For this reason we poll until the style becomes available.\n    // Sync case.\n    if (styleLoaded(doc, style)) {\n      cb(style);\n      return style;\n    }\n    // Poll until styles are available.\n    const interval = setInterval(() => {\n      if (styleLoaded(doc, style)) {\n        clearInterval(interval);\n        cb(style);\n      }\n    }, 4);\n  }\n  return style;\n}\n\n\n/**\n * Creates the properly configured style element.\n * @param {!Element|!ShadowRoot} cssRoot\n * @param {string} cssText\n * @param {boolean} isRuntimeCss\n * @param {?string} ext\n * @return {!Element}\n */\nfunction insertStyleElement(cssRoot, cssText, isRuntimeCss, ext) {\n  let styleMap = cssRoot[STYLE_MAP_PROP];\n  if (!styleMap) {\n    styleMap = cssRoot[STYLE_MAP_PROP] = map();\n  }\n\n  const isExtCss = !isRuntimeCss &&\n      (ext && ext != 'amp-custom' && ext != 'amp-keyframes');\n  const key =\n      isRuntimeCss ? 'amp-runtime' :\n        isExtCss ? `amp-extension=${ext}` : null;\n\n  // Check if it has already been created or discovered.\n  if (key) {\n    const existing = getExistingStyleElement(cssRoot, styleMap, key);\n    if (existing) {\n      return existing;\n    }\n  }\n\n  // Create the new style element and append to cssRoot.\n  const doc = (cssRoot.ownerDocument || cssRoot);\n  const style = doc.createElement('style');\n  style./*OK*/textContent = cssText;\n  let afterElement = null;\n  // Make sure that we place style tags after the main runtime CSS. Otherwise\n  // the order is random.\n  if (isRuntimeCss) {\n    style.setAttribute('amp-runtime', '');\n  } else if (isExtCss) {\n    style.setAttribute('amp-extension', ext || '');\n    afterElement = dev().assertElement(getExistingStyleElement(\n        cssRoot, styleMap, 'amp-runtime'));\n  } else {\n    if (ext) {\n      style.setAttribute(ext, '');\n    }\n    afterElement = cssRoot.lastChild;\n  }\n  insertAfterOrAtStart(cssRoot, style, afterElement);\n  if (key) {\n    styleMap[key] = style;\n  }\n  return style;\n}\n\n\n/**\n * @param {!Element|!ShadowRoot} cssRoot\n * @param {!Object<string, !Element>} styleMap\n * @param {string} key\n * @return {?Element}\n */\nfunction getExistingStyleElement(cssRoot, styleMap, key) {\n  // Already cached.\n  if (styleMap[key]) {\n    return styleMap[key];\n  }\n  // Check if the style has already been added by the server layout.\n  const existing = cssRoot./*OK*/querySelector(`style[${key}]`);\n  if (existing) {\n    styleMap[key] = existing;\n    return existing;\n  }\n  // Nothing found.\n  return null;\n}\n\n\n/**\n * Applies a transformer to the CSS text if it has been registered.\n * @param {!Element|!ShadowRoot} cssRoot\n * @param {function(string):string} transformer\n */\nexport function installCssTransformer(cssRoot, transformer) {\n  cssRoot[TRANSFORMER_PROP] = transformer;\n}\n\n\n/**\n * Applies a transformer to the CSS text if it has been registered.\n * @param {!Element|!ShadowRoot} cssRoot\n * @param {string} cssText\n * @return {string}\n */\nfunction maybeTransform(cssRoot, cssText) {\n  const transformer = cssRoot[TRANSFORMER_PROP];\n  return transformer ? transformer(cssText) : cssText;\n}\n\n\n/**\n * Sets the document's body opacity to 1.\n * If the body is not yet available (because our script was loaded\n * synchronously), polls until it is.\n * @param {!Document} doc The document who's body we should make visible.\n * @param {boolean=} opt_waitForServices Whether the body visibility should\n *     be blocked on key services being loaded.\n */\nexport function makeBodyVisible(doc, opt_waitForServices) {\n  dev().assert(doc.defaultView, 'Passed in document must have a defaultView');\n  const win = /** @type {!Window} */ (doc.defaultView);\n  if (win[bodyVisibleSentinel]) {\n    return;\n  }\n  const set = () => {\n    win[bodyVisibleSentinel] = true;\n    setStyles(dev().assertElement(doc.body), {\n      opacity: 1,\n      visibility: 'visible',\n      'animation': 'none',\n    });\n    renderStartedNoInline(doc);\n  };\n  try {\n    waitForBody(doc, () => {\n      if (win[bodyVisibleSentinel]) {\n        return;\n      }\n      win[bodyVisibleSentinel] = true;\n      if (opt_waitForServices) {\n        waitForServices(win).catch(reason => {\n          rethrowAsync(reason);\n          return [];\n        }).then(services => {\n          set();\n          if (services.length > 0) {\n            Services.resourcesForDoc(doc)./*OK*/schedulePass(\n                1, /* relayoutAll */ true);\n          }\n          try {\n            const perf = Services.performanceFor(win);\n            perf.tick('mbv');\n            perf.flush();\n          } catch (e) {}\n        });\n      } else {\n        set();\n      }\n    });\n  } catch (e) {\n    // If there was an error during the logic above (such as service not\n    // yet installed, definitely try to make the body visible.\n    set();\n    // Avoid errors in the function to break execution flow as this is\n    // often called as a last resort.\n    rethrowAsync(e);\n  }\n}\n\n\n/**\n * @param {!Document} doc\n */\nfunction renderStartedNoInline(doc) {\n  try {\n    Services.resourcesForDoc(doc).renderStarted();\n  } catch (e) {\n    // `makeBodyVisible` is called in the error-processing cycle and thus\n    // could be triggered when runtime's initialization is incomplete which\n    // would cause unrelated errors to be thrown here.\n  }\n}\n\n\n/**\n * Indicates that the body is always visible. For instance, in case of PWA.\n * @param {!Window} win\n */\nexport function bodyAlwaysVisible(win) {\n  win[bodyVisibleSentinel] = true;\n}\n\n\n/**\n * Checks whether a style element was registered in the DOM.\n * @param {!Document|!ShadowRoot} doc\n * @param {!Element} style\n * @return {boolean}\n */\nfunction styleLoaded(doc, style) {\n  const sheets = doc.styleSheets;\n  for (let i = 0; i < sheets.length; i++) {\n    const sheet = sheets[i];\n    if (sheet.ownerNode == style) {\n      return true;\n    }\n  }\n  return false;\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// Note: loaded by 3p system. Cannot rely on babel polyfills.\nimport {map} from './utils/object.js';\nimport {startsWith} from './string';\n\n\n/** @type {Object<string, string>} */\nlet propertyNameCache;\n\n/** @const {!Array<string>} */\nconst vendorPrefixes = ['Webkit', 'webkit', 'Moz', 'moz', 'ms', 'O', 'o'];\n\n\n/**\n * @export\n * @param {string} camelCase camel cased string\n * @return {string} title cased string\n */\nexport function camelCaseToTitleCase(camelCase) {\n  return camelCase.charAt(0).toUpperCase() + camelCase.slice(1);\n}\n\n/**\n * Checks the style if a prefixed version of a property exists and returns\n * it or returns an empty string.\n * @private\n * @param {!Object} style\n * @param {string} titleCase the title case version of a css property name\n * @return {string} the prefixed property name or null.\n */\nfunction getVendorJsPropertyName_(style, titleCase) {\n  for (let i = 0; i < vendorPrefixes.length; i++) {\n    const propertyName = vendorPrefixes[i] + titleCase;\n    if (style[propertyName] !== undefined) {\n      return propertyName;\n    }\n  }\n  return '';\n}\n\n/**\n * Returns the possibly prefixed JavaScript property name of a style property\n * (ex. WebkitTransitionDuration) given a camelCase'd version of the property\n * (ex. transitionDuration).\n * @export\n * @param {!Object} style\n * @param {string} camelCase the camel cased version of a css property name\n * @param {boolean=} opt_bypassCache bypass the memoized cache of property\n *   mapping\n * @return {string}\n */\nexport function getVendorJsPropertyName(style, camelCase, opt_bypassCache) {\n  if (startsWith(camelCase, '--')) {\n    // CSS vars are returned as is.\n    return camelCase;\n  }\n  if (!propertyNameCache) {\n    propertyNameCache = map();\n  }\n  let propertyName = propertyNameCache[camelCase];\n  if (!propertyName || opt_bypassCache) {\n    propertyName = camelCase;\n    if (style[camelCase] === undefined) {\n      const titleCase = camelCaseToTitleCase(camelCase);\n      const prefixedPropertyName = getVendorJsPropertyName_(style, titleCase);\n\n      if (style[prefixedPropertyName] !== undefined) {\n        propertyName = prefixedPropertyName;\n      }\n    }\n    if (!opt_bypassCache) {\n      propertyNameCache[camelCase] = propertyName;\n    }\n  }\n  return propertyName;\n}\n\n\n/**\n * Sets the CSS styles of the specified element with !important. The styles\n * are specified as a map from CSS property names to their values.\n * @param {!Element} element\n * @param {!Object<string, *>} styles\n */\nexport function setImportantStyles(element, styles) {\n  for (const k in styles) {\n    element.style.setProperty(\n        getVendorJsPropertyName(styles, k), styles[k].toString(), 'important');\n  }\n}\n\n\n/**\n * Sets the CSS style of the specified element with optional units, e.g. \"px\".\n * @param {?Element} element\n * @param {string} property\n * @param {*} value\n * @param {string=} opt_units\n * @param {boolean=} opt_bypassCache\n */\nexport function setStyle(element, property, value, opt_units, opt_bypassCache) {\n  const propertyName = getVendorJsPropertyName(element.style, property,\n      opt_bypassCache);\n  if (propertyName) {\n    element.style[propertyName] =\n      /** @type {string} */ (opt_units ? value + opt_units : value);\n  }\n}\n\n\n/**\n * Returns the value of the CSS style of the specified element.\n * @param {!Element} element\n * @param {string} property\n * @param {boolean=} opt_bypassCache\n * @return {*}\n */\nexport function getStyle(element, property, opt_bypassCache) {\n  const propertyName = getVendorJsPropertyName(element.style, property,\n      opt_bypassCache);\n  if (!propertyName) {\n    return undefined;\n  }\n  return element.style[propertyName];\n}\n\n\n/**\n * Sets the CSS styles of the specified element. The styles\n * a specified as a map from CSS property names to their values.\n * @param {!Element} element\n * @param {!Object<string, *>} styles\n */\nexport function setStyles(element, styles) {\n  for (const k in styles) {\n    setStyle(element, k, styles[k]);\n  }\n}\n\n\n/**\n * Shows or hides the specified element.\n * @param {!Element} element\n * @param {boolean=} opt_display\n */\nexport function toggle(element, opt_display) {\n  if (opt_display === undefined) {\n    opt_display = getStyle(element, 'display') == 'none';\n  }\n  setStyle(element, 'display', opt_display ? '' : 'none');\n}\n\n\n/**\n * Returns a pixel value.\n * @param {number} value\n * @return {string}\n */\nexport function px(value) {\n  return `${value}px`;\n}\n\n/**\n * Returns a degree value.\n * @param {number} value\n * @return {string}\n */\nexport function deg(value) {\n  return `${value}deg`;\n}\n\n/**\n * Returns a \"translateX\" for CSS \"transform\" property.\n * @param {number|string} value\n * @return {string}\n */\nexport function translateX(value) {\n  if (typeof value == 'string') {\n    return `translateX(${value})`;\n  }\n  return `translateX(${px(value)})`;\n}\n\n\n/**\n * Returns a \"translateX\" for CSS \"transform\" property.\n * @param {number|string} x\n * @param {(number|string)=} opt_y\n * @return {string}\n */\nexport function translate(x, opt_y) {\n  if (typeof x == 'number') {\n    x = px(x);\n  }\n  if (opt_y === undefined) {\n    return `translate(${x})`;\n  }\n  if (typeof opt_y == 'number') {\n    opt_y = px(opt_y);\n  }\n  return `translate(${x}, ${opt_y})`;\n}\n\n\n/**\n * Returns a \"scale\" for CSS \"transform\" property.\n * @param {number|string} value\n * @return {string}\n */\nexport function scale(value) {\n  return `scale(${value})`;\n}\n\n/**\n * Returns a \"rotate\" for CSS \"transform\" property.\n * @param {number|string} value\n * @return {string}\n */\nexport function rotate(value) {\n  if (typeof value == 'number') {\n    value = deg(value);\n  }\n  return `rotate(${value})`;\n}\n\n/**\n * Remove alpha value from a rgba color value.\n * Return the new color property with alpha equals if has the alpha value.\n * Caller needs to make sure the input color value is a valid rgba/rgb value\n * @param {string} rgbaColor\n * @return {string}\n */\nexport function removeAlphaFromColor(rgbaColor) {\n  return rgbaColor.replace(\n      /\\(([^,]+),([^,]+),([^,)]+),[^)]+\\)/g, '($1,$2,$3, 1)');\n}\n\n/**\n * Gets the computed style of the element. The helper is necessary to enforce\n * the possible `null` value returned by a buggy Firefox.\n *\n * @param {!Window} win\n * @param {!Element} el\n * @return {!Object<string, string>}\n */\nexport function computedStyle(win, el) {\n  const style = /** @type {?CSSStyleDeclaration} */(win.getComputedStyle(el));\n  return /** @type {!Object<string, string>} */(style) || map();\n}\n\n\n/**\n * Resets styles that were set dynamically (i.e. inline)\n * @param {!Element} element\n * @param {!Array<string>} properties\n */\nexport function resetStyles(element, properties) {\n  const styleObj = {};\n  properties.forEach(prop => {\n    styleObj[prop] = null;\n  });\n  setStyles(element, styleObj);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* @const */\nconst toString_ = Object.prototype.toString;\n\n/**\n * Returns the ECMA [[Class]] of a value\n * @param {*} value\n * @return {string}\n */\nfunction toString(value) {\n  return toString_.call(value);\n}\n\n/**\n * Determines if value is actually an Array.\n * @param {*} value\n * @return {boolean}\n */\nexport function isArray(value) {\n  return Array.isArray(value);\n}\n\n/**\n * Converts an array-like object to an array.\n * @param {?IArrayLike<T>|string} arrayLike\n * @return {!Array<T>}\n * @template T\n */\nexport function toArray(arrayLike) {\n  if (!arrayLike) {\n    return [];\n  }\n  const array = new Array(arrayLike.length);\n  for (let i = 0; i < arrayLike.length; i++) {\n    array[i] = arrayLike[i];\n  }\n  return array;\n}\n\n/**\n * Determines if value is actually an Object.\n * @param {*} value\n * @return {boolean}\n */\nexport function isObject(value) {\n  return toString(value) === '[object Object]';\n}\n\n/**\n * Determines if value is of number type and finite.\n * NaN and Infinity are not considered a finite number.\n * String numbers are not considered numbers.\n * @param {*} value\n * @return {boolean}\n */\nexport function isFiniteNumber(value) {\n  return (typeof value === 'number' && isFinite(value));\n}\n\n/**\n * Checks whether `s` is a valid value of `enumObj`.\n *\n * @param {!Object<T>} enumObj\n * @param {T} s\n * @return {boolean}\n * @template T\n */\nexport function isEnumValue(enumObj, s) {\n  for (const k in enumObj) {\n    if (enumObj[k] === s) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Externs declare that access `defaultView` from `document` or\n * `ownerDocument` is of type `(Window|null)` but most of our parameter types\n * assume that it is never null. This is OK in practice as we ever only get\n * null on disconnected documents or old IE.\n * This helper function casts it into just a simple Window return type.\n *\n * @param {!Window|null} winOrNull\n * @return {!Window}\n */\nexport function toWin(winOrNull) {\n  return /** @type {!Window} */ (winOrNull);\n}\n\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {tryDecodeUriComponent_} from './url-try-decode-uri-component';\n\nconst regex = /(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;\n\n/**\n * Parses the query string of an URL. This method returns a simple key/value\n * map. If there are duplicate keys the latest value is returned.\n *\n * DO NOT import the function from this file. Instead, import parseQueryString\n * from `src/url.js`.\n *\n * @param {string} queryString\n * @return {!JsonObject}\n */\nexport function parseQueryString_(queryString) {\n  const params = /** @type {!JsonObject} */ (Object.create(null));\n  if (!queryString) {\n    return params;\n  }\n\n  let match;\n  while ((match = regex.exec(queryString))) {\n    const name = tryDecodeUriComponent_(match[1], match[1]);\n    const value = match[2] ? tryDecodeUriComponent_(match[2], match[2]) : '';\n    params[name] = value;\n  }\n  return params;\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Tries to decode a URI component, falling back to opt_fallback (or an empty\n * string)\n *\n * DO NOT import the function from this file. Instead, import\n * tryDecodeUriComponent from `src/url.js`.\n *\n * @param {string} component\n * @param {string=} fallback\n * @return {string}\n */\nexport function tryDecodeUriComponent_(component, fallback = '') {\n  try {\n    return decodeURIComponent(component);\n  } catch (e) {\n    return fallback;\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {LruCache} from './utils/lru-cache';\nimport {dict} from './utils/object';\nimport {endsWith, startsWith} from './string';\nimport {getMode} from './mode';\nimport {isArray} from './types';\nimport {parseQueryString_} from './url-parse-query-string';\nimport {tryDecodeUriComponent_} from './url-try-decode-uri-component';\nimport {urls} from './config';\nimport {user} from './log';\n\n/**\n * @type {!JsonObject}\n */\nconst SERVING_TYPE_PREFIX = dict({\n  // No viewer\n  'c': true,\n  // In viewer\n  'v': true,\n  // Ad landing page\n  'a': true,\n  // Ad\n  'ad': true,\n});\n\n/**\n * Cached a-tag to avoid memory allocation during URL parsing.\n * @type {HTMLAnchorElement}\n */\nlet a;\n\n/**\n * We cached all parsed URLs. As of now there are no use cases\n * of AMP docs that would ever parse an actual large number of URLs,\n * but we often parse the same one over and over again.\n * @type {LruCache}\n */\nlet cache;\n\n/** @private @const Matches amp_js_* parameters in query string. */\nconst AMP_JS_PARAMS_REGEX = /[?&]amp_js[^&]*/;\n\n/** @private @const Matches amp_gsa parameters in query string. */\nconst AMP_GSA_PARAMS_REGEX = /[?&]amp_gsa[^&]*/;\n\n/** @private @const Matches amp_r parameters in query string. */\nconst AMP_R_PARAMS_REGEX = /[?&]amp_r[^&]*/;\n\n/** @private @const Matches usqp parameters from goog experiment in query string. */\nconst GOOGLE_EXPERIMENT_PARAMS_REGEX = /[?&]usqp[^&]*/;\n\nconst INVALID_PROTOCOLS = [\n  /*eslint no-script-url: 0*/ 'javascript:',\n  /*eslint no-script-url: 0*/ 'data:',\n  /*eslint no-script-url: 0*/ 'vbscript:',\n];\n\n/** @const {string} */\nexport const SOURCE_ORIGIN_PARAM = '__amp_source_origin';\n\n/**\n * Returns the correct origin for a given window.\n * @param {!Window} win\n * @return {string} origin\n */\nexport function getWinOrigin(win) {\n  return win.origin || parseUrlDeprecated(win.location.href).origin;\n}\n\n/**\n * Returns a Location-like object for the given URL. If it is relative,\n * the URL gets resolved.\n * Consider the returned object immutable. This is enforced during\n * testing by freezing the object.\n * @param {string} url\n * @param {boolean=} opt_nocache\n * @return {!Location}\n */\nexport function parseUrlDeprecated(url, opt_nocache) {\n  if (!a) {\n    a = /** @type {!HTMLAnchorElement} */ (self.document.createElement('a'));\n    cache = self.UrlCache || (self.UrlCache = new LruCache(100));\n  }\n\n  return parseUrlWithA(a, url, opt_nocache ? null : cache);\n}\n\n/**\n * Returns a Location-like object for the given URL. If it is relative,\n * the URL gets resolved.\n * Consider the returned object immutable. This is enforced during\n * testing by freezing the object.\n * @param {!HTMLAnchorElement} a\n * @param {string} url\n * @param {LruCache=} opt_cache\n * @return {!Location}\n * @restricted\n */\nexport function parseUrlWithA(a, url, opt_cache) {\n  if (opt_cache && opt_cache.has(url)) {\n    return opt_cache.get(url);\n  }\n\n  a.href = url;\n\n  // IE11 doesn't provide full URL components when parsing relative URLs.\n  // Assigning to itself again does the trick #3449.\n  if (!a.protocol) {\n    a.href = a.href;\n  }\n\n  const info = /** @type {!Location} */({\n    href: a.href,\n    protocol: a.protocol,\n    host: a.host,\n    hostname: a.hostname,\n    port: a.port == '0' ? '' : a.port,\n    pathname: a.pathname,\n    search: a.search,\n    hash: a.hash,\n    origin: null, // Set below.\n  });\n\n  // Some IE11 specific polyfills.\n  // 1) IE11 strips out the leading '/' in the pathname.\n  if (info.pathname[0] !== '/') {\n    info.pathname = '/' + info.pathname;\n  }\n\n  // 2) For URLs with implicit ports, IE11 parses to default ports while\n  // other browsers leave the port field empty.\n  if ((info.protocol == 'http:' && info.port == 80)\n      || (info.protocol == 'https:' && info.port == 443)) {\n    info.port = '';\n    info.host = info.hostname;\n  }\n\n  // For data URI a.origin is equal to the string 'null' which is not useful.\n  // We instead return the actual origin which is the full URL.\n  if (a.origin && a.origin != 'null') {\n    info.origin = a.origin;\n  } else if (info.protocol == 'data:' || !info.host) {\n    info.origin = info.href;\n  } else {\n    info.origin = info.protocol + '//' + info.host;\n  }\n\n  // Freeze during testing to avoid accidental mutation.\n  const frozen = (getMode().test && Object.freeze) ? Object.freeze(info) : info;\n\n  if (opt_cache) {\n    opt_cache.put(url, frozen);\n  }\n\n  return frozen;\n}\n\n/**\n * Appends the string just before the fragment part (or optionally\n * to the front of the query string) of the URL.\n * @param {string} url\n * @param {string} paramString\n * @param {boolean=} opt_addToFront\n * @return {string}\n */\nexport function appendEncodedParamStringToUrl(url, paramString,\n  opt_addToFront) {\n  if (!paramString) {\n    return url;\n  }\n  const mainAndFragment = url.split('#', 2);\n  const mainAndQuery = mainAndFragment[0].split('?', 2);\n\n  let newUrl = mainAndQuery[0] + (\n    mainAndQuery[1]\n      ? (opt_addToFront\n        ? `?${paramString}&${mainAndQuery[1]}`\n        : `?${mainAndQuery[1]}&${paramString}`)\n      : `?${paramString}`);\n  newUrl += mainAndFragment[1] ? `#${mainAndFragment[1]}` : '';\n  return newUrl;\n}\n/**\n * Appends a query string field and value to a url. `key` and `value`\n * will be ran through `encodeURIComponent` before appending.\n * @param {string} url\n * @param {string} key\n * @param {string} value\n * @param {boolean=} opt_addToFront\n * @return {string}\n */\nexport function addParamToUrl(url, key, value, opt_addToFront) {\n  const field = `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\n  return appendEncodedParamStringToUrl(url, field, opt_addToFront);\n}\n\n/**\n * Appends query string fields and values to a url. The `params` objects'\n * `key`s and `value`s will be transformed into query string keys/values.\n * @param {string} url\n * @param {!JsonObject<string, string|!Array<string>>} params\n * @return {string}\n */\nexport function addParamsToUrl(url, params) {\n  return appendEncodedParamStringToUrl(url, serializeQueryString(params));\n}\n\n/**\n * Serializes the passed parameter map into a query string with both keys\n * and values encoded.\n * @param {!JsonObject<string, string|!Array<string>>} params\n * @return {string}\n */\nexport function serializeQueryString(params) {\n  const s = [];\n  for (const k in params) {\n    const v = params[k];\n    if (v == null) {\n      continue;\n    } else if (isArray(v)) {\n      for (let i = 0; i < v.length; i++) {\n        const sv = /** @type {string} */ (v[i]);\n        s.push(`${encodeURIComponent(k)}=${encodeURIComponent(sv)}`);\n      }\n    } else {\n      const sv = /** @type {string} */ (v);\n      s.push(`${encodeURIComponent(k)}=${encodeURIComponent(sv)}`);\n    }\n  }\n  return s.join('&');\n}\n\n/**\n * Returns `true` if the URL is secure: either HTTPS or localhost (for testing).\n * @param {string|!Location} url\n * @return {boolean}\n */\nexport function isSecureUrlDeprecated(url) {\n  if (typeof url == 'string') {\n    url = parseUrlDeprecated(url);\n  }\n  return (url.protocol == 'https:' ||\n      url.hostname == 'localhost' ||\n      endsWith(url.hostname, '.localhost'));\n}\n\n/**\n * Asserts that a given url is HTTPS or protocol relative. It's a user-level\n * assert.\n *\n * Provides an exception for localhost.\n *\n * @param {?string|undefined} urlString\n * @param {!Element|string} elementContext Element where the url was found.\n * @param {string=} sourceName Used for error messages.\n * @return {string}\n */\nexport function assertHttpsUrl(\n  urlString, elementContext, sourceName = 'source') {\n  user().assert(urlString != null, '%s %s must be available',\n      elementContext, sourceName);\n  // (erwinm, #4560): type cast necessary until #4560 is fixed.\n  const theUrlString = /** @type {string} */ (urlString);\n  user().assert(isSecureUrlDeprecated(theUrlString) || /^(\\/\\/)/.test(theUrlString),\n      '%s %s must start with ' +\n      '\"https://\" or \"//\" or be relative and served from ' +\n      'either https or from localhost. Invalid value: %s',\n      elementContext, sourceName, theUrlString);\n  return theUrlString;\n}\n\n/**\n * Asserts that a given url is an absolute HTTP or HTTPS URL.\n * @param {string} urlString\n * @return {string}\n */\nexport function assertAbsoluteHttpOrHttpsUrl(urlString) {\n  user().assert(/^https?\\:/i.test(urlString),\n      'URL must start with \"http://\" or \"https://\". Invalid value: %s',\n      urlString);\n  return parseUrlDeprecated(urlString).href;\n}\n\n\n/**\n * Parses the query string of an URL. This method returns a simple key/value\n * map. If there are duplicate keys the latest value is returned.\n *\n * This function is implemented in a separate file to avoid a circular\n * dependency.\n *\n * @param {string} queryString\n * @return {!JsonObject}\n */\nexport function parseQueryString(queryString) {\n  return parseQueryString_(queryString);\n}\n\n/**\n * Returns the URL without fragment. If URL doesn't contain fragment, the same\n * string is returned.\n * @param {string} url\n * @return {string}\n */\nexport function removeFragment(url) {\n  const index = url.indexOf('#');\n  if (index == -1) {\n    return url;\n  }\n  return url.substring(0, index);\n}\n\n/**\n * Returns the fragment from the URL. If the URL doesn't contain fragment,\n * the empty string is returned.\n * @param {string} url\n * @return {string}\n */\nexport function getFragment(url) {\n  const index = url.indexOf('#');\n  if (index == -1) {\n    return '';\n  }\n  return url.substring(index);\n}\n\n/**\n * Returns whether the URL has the origin of a proxy.\n * @param {string|!Location} url URL of an AMP document.\n * @return {boolean}\n */\nexport function isProxyOrigin(url) {\n  if (typeof url == 'string') {\n    url = parseUrlDeprecated(url);\n  }\n  return urls.cdnProxyRegex.test(url.origin);\n}\n\n/**\n * For proxy-origin URLs, returns the serving type. Otherwise, returns null.\n * E.g., 'https://amp-com.cdn.ampproject.org/a/s/amp.com/amp_document.html'\n * returns 'a'.\n * @param {string|!Location} url URL of an AMP document.\n * @return {?string}\n */\nexport function getProxyServingType(url) {\n  if (typeof url == 'string') {\n    url = parseUrlDeprecated(url);\n  }\n  if (!isProxyOrigin(url)) {\n    return null;\n  }\n  const path = url.pathname.split('/', 2);\n  return path[1];\n}\n\n/**\n * Returns whether the URL origin is localhost.\n * @param {string|!Location} url URL of an AMP document.\n * @return {boolean}\n */\nexport function isLocalhostOrigin(url) {\n  if (typeof url == 'string') {\n    url = parseUrlDeprecated(url);\n  }\n  return urls.localhostRegex.test(url.origin);\n}\n\n/**\n * Returns whether the URL has valid protocol.\n * Deep link protocol is valid, but not javascript etc.\n * @param {string|!Location} url\n * @return {boolean}\n */\nexport function isProtocolValid(url) {\n  if (!url) {\n    return true;\n  }\n  if (typeof url == 'string') {\n    url = parseUrlDeprecated(url);\n  }\n  return !INVALID_PROTOCOLS.includes(url.protocol);\n}\n\n/**\n * Returns a URL without AMP JS parameters.\n * @param {string} url\n * @return {string}\n */\nexport function removeAmpJsParamsFromUrl(url) {\n  const parsed = parseUrlDeprecated(url);\n  const search = removeAmpJsParamsFromSearch(parsed.search);\n  return parsed.origin + parsed.pathname + search + parsed.hash;\n\n}\n\n/**\n * Returns a URL without a query string.\n * @param {string} url\n * @return {string}\n */\nexport function removeSearch(url) {\n  const index = url.indexOf('?');\n  if (index == -1) {\n    return url;\n  }\n  const fragment = getFragment(url);\n  return url.substring(0, index) + fragment;\n}\n\n/**\n * Removes parameters that start with amp js parameter pattern and returns the\n * new search string.\n * @param {string} urlSearch\n * @return {string}\n */\nfunction removeAmpJsParamsFromSearch(urlSearch) {\n  if (!urlSearch || urlSearch == '?') {\n    return '';\n  }\n  const search = urlSearch\n      .replace(AMP_JS_PARAMS_REGEX, '')\n      .replace(AMP_GSA_PARAMS_REGEX, '')\n      .replace(AMP_R_PARAMS_REGEX, '')\n      .replace(GOOGLE_EXPERIMENT_PARAMS_REGEX, '')\n      .replace(/^[?&]/, ''); // Removes first ? or &.\n  return search ? '?' + search : '';\n}\n\n/**\n * Returns the source URL of an AMP document for documents served\n * on a proxy origin or directly.\n * @param {string|!Location} url URL of an AMP document.\n * @return {string}\n */\nexport function getSourceUrl(url) {\n  if (typeof url == 'string') {\n    url = parseUrlDeprecated(url);\n  }\n\n  // Not a proxy URL - return the URL itself.\n  if (!isProxyOrigin(url)) {\n    return url.href;\n  }\n\n  // A proxy URL.\n  // Example path that is being matched here.\n  // https://cdn.ampproject.org/c/s/www.origin.com/foo/\n  // The /s/ is optional and signals a secure origin.\n  const path = url.pathname.split('/');\n  const prefix = path[1];\n  user().assert(SERVING_TYPE_PREFIX[prefix],\n      'Unknown path prefix in url %s', url.href);\n  const domainOrHttpsSignal = path[2];\n  const origin = domainOrHttpsSignal == 's'\n    ? 'https://' + decodeURIComponent(path[3])\n    : 'http://' + decodeURIComponent(domainOrHttpsSignal);\n  // Sanity test that what we found looks like a domain.\n  user().assert(origin.indexOf('.') > 0, 'Expected a . in origin %s', origin);\n  path.splice(1, domainOrHttpsSignal == 's' ? 3 : 2);\n  return origin + path.join('/') +\n      removeAmpJsParamsFromSearch(url.search) + (url.hash || '');\n}\n\n/**\n * Returns the source origin of an AMP document for documents served\n * on a proxy origin or directly.\n * @param {string|!Location} url URL of an AMP document.\n * @return {string} The source origin of the URL.\n */\nexport function getSourceOrigin(url) {\n  return parseUrlDeprecated(getSourceUrl(url)).origin;\n}\n\n/**\n * Returns absolute URL resolved based on the relative URL and the base.\n * @param {string} relativeUrlString\n * @param {string|!Location} baseUrl\n * @return {string}\n */\nexport function resolveRelativeUrl(relativeUrlString, baseUrl) {\n  if (typeof baseUrl == 'string') {\n    baseUrl = parseUrlDeprecated(baseUrl);\n  }\n  if (typeof URL == 'function') {\n    return new URL(relativeUrlString, baseUrl.href).toString();\n  }\n  return resolveRelativeUrlFallback_(relativeUrlString, baseUrl);\n}\n\n/**\n * Fallback for URL resolver when URL class is not available.\n * @param {string} relativeUrlString\n * @param {string|!Location} baseUrl\n * @return {string}\n * @private Visible for testing.\n */\nexport function resolveRelativeUrlFallback_(relativeUrlString, baseUrl) {\n  if (typeof baseUrl == 'string') {\n    baseUrl = parseUrlDeprecated(baseUrl);\n  }\n  relativeUrlString = relativeUrlString.replace(/\\\\/g, '/');\n  const relativeUrl = parseUrlDeprecated(relativeUrlString);\n\n  // Absolute URL.\n  if (startsWith(relativeUrlString.toLowerCase(), relativeUrl.protocol)) {\n    return relativeUrl.href;\n  }\n\n  // Protocol-relative URL.\n  if (startsWith(relativeUrlString, '//')) {\n    return baseUrl.protocol + relativeUrlString;\n  }\n\n  // Absolute path.\n  if (startsWith(relativeUrlString, '/')) {\n    return baseUrl.origin + relativeUrlString;\n  }\n\n  // Relative path.\n  return baseUrl.origin + baseUrl.pathname.replace(/\\/[^/]*$/, '/')\n      + relativeUrlString;\n}\n\n\n/**\n * Add \"__amp_source_origin\" query parameter to the URL.\n * @param {!Window} win\n * @param {string} url\n * @return {string}\n */\nexport function getCorsUrl(win, url) {\n  checkCorsUrl(url);\n  const sourceOrigin = getSourceOrigin(win.location.href);\n  return addParamToUrl(url, SOURCE_ORIGIN_PARAM, sourceOrigin);\n}\n\n\n/**\n * Checks if the url has __amp_source_origin and throws if it does.\n * @param {string} url\n */\nexport function checkCorsUrl(url) {\n  const parsedUrl = parseUrlDeprecated(url);\n  const query = parseQueryString(parsedUrl.search);\n  user().assert(!(SOURCE_ORIGIN_PARAM in query),\n      'Source origin is not allowed in %s', url);\n}\n\n/**\n * Tries to decode a URI component, falling back to opt_fallback (or an empty\n * string)\n *\n * @param {string} component\n * @param {string=} opt_fallback\n * @return {string}\n */\nexport function tryDecodeUriComponent(component, opt_fallback) {\n  return tryDecodeUriComponent_(component, opt_fallback);\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * Compares if two arrays contains exactly same elements of same number\n * of same order.\n * Notice that it does NOT handle NaN case as expected\n *\n * @param {!Array<T>} arr1\n * @param {!Array<T>} arr2\n * @return {boolean}\n * @template T\n */\nexport function areEqualOrdered(arr1, arr2) {\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n\n  for (let i = 0; i < arr1.length; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * A bit like Array#filter, but removes elements that filter false from the\n * array. Returns the filtered items.\n *\n * @param {!Array<T>} array\n * @param {function(T, number, !Array<T>):boolean} filter\n * @return {!Array<T>}\n * @template T\n */\nexport function filterSplice(array, filter) {\n  const splice = [];\n  let index = 0;\n  for (let i = 0; i < array.length; i++) {\n    const item = array[i];\n    if (filter(item, i, array)) {\n      if (index < i) {\n        array[index] = item;\n      }\n      index++;\n    } else {\n      splice.push(item);\n    }\n  }\n\n  if (index < array.length) {\n    array.length = index;\n  }\n\n  return splice;\n}\n\n/**\n * Returns the index of the first element matching the predicate.\n * Like Array#findIndex.\n *\n * @param {!Array<T>} array\n * @param {function(T, number, !Array<T>):boolean} predicate\n * @return {number}\n * @template T\n */\nexport function findIndex(array, predicate) {\n  for (let i = 0; i < array.length; i++) {\n    if (predicate(array[i], i, array)) {\n      return i;\n    }\n  }\n  return -1;\n}\n\n/**\n * Converts the given iterator to an array.\n *\n * @param {!Iterator<T>} iterator\n * @return {Array<T>}\n * @template T\n */\nexport function fromIterator(iterator) {\n  const array = [];\n  for (let e = iterator.next(); !e.done; e = iterator.next()) {\n    array.push(e.value);\n  }\n  return array;\n}\n\n/**\n * Adds item to array if it is not already present.\n *\n * @param {Array<T>} array\n * @param {T} item\n * @template T\n */\nexport function pushIfNotExist(array, item) {\n  if (array.indexOf(item) < 0) {\n    array.push(item);\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {bytesToString, stringToBytes, utf8Encode} from './bytes';\n\n/**\n * Character mapping from base64url to base64.\n * @const {!Object<string, string>}\n */\nconst base64UrlDecodeSubs = {'-': '+', '_': '/', '.': '='};\n\n/**\n * Character mapping from base64 to base64url.\n * @const {!Object<string, string>}\n */\nconst base64UrlEncodeSubs = {'+': '-', '/': '_', '=': '.'};\n\n/**\n * Converts a string which is in base64url encoding into a Uint8Array\n * containing the decoded value.\n * @param {string} str\n * @return {!Uint8Array}\n */\nexport function base64UrlDecodeToBytes(str) {\n  const encoded = atob(str.replace(/[-_.]/g, ch => base64UrlDecodeSubs[ch]));\n  return stringToBytes(encoded);\n}\n\n/**\n * Converts a string which is in base64 encoding into a Uint8Array\n * containing the decoded value.\n * @param {string} str\n * @return {!Uint8Array}\n */\nexport function base64DecodeToBytes(str) {\n  return stringToBytes(atob(str));\n}\n\n/**\n * Converts a bytes array into base64url encoded string.\n * base64url is defined in RFC 4648. It is sometimes referred to as \"web safe\".\n * @param {!Uint8Array} bytes\n * @return {string}\n */\nexport function base64UrlEncodeFromBytes(bytes) {\n  const str = bytesToString(bytes);\n  return btoa(str).replace(/[+/=]/g, ch => base64UrlEncodeSubs[ch]);\n}\n\n/**\n * Converts a string into base64url encoded string.\n * base64url is defined in RFC 4648. It is sometimes referred to as \"web safe\".\n * @param {string} str\n * @return {string}\n */\nexport function base64UrlEncodeFromString(str) {\n  const bytes = utf8Encode(str);\n  return base64UrlEncodeFromBytes(bytes);\n}\n\n/**\n * Converts a bytes array into base64 encoded string.\n * @param {!Uint8Array} bytes\n * @return {string}\n */\nexport function base64EncodeFromBytes(bytes) {\n  return btoa(bytesToString(bytes));\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {dev} from '../log';\n\n/**\n * Interpret a byte array as a UTF-8 string.\n * @param {!BufferSource} bytes\n * @return {string}\n */\nexport function utf8Decode(bytes) {\n  if (typeof TextDecoder !== 'undefined') {\n    return new TextDecoder('utf-8').decode(bytes);\n  }\n  const asciiString = bytesToString(new Uint8Array(bytes.buffer || bytes));\n  return decodeURIComponent(escape(asciiString));\n}\n\n/**\n * Turn a string into UTF-8 bytes.\n * @param {string} string\n * @return {!Uint8Array}\n */\nexport function utf8Encode(string) {\n  if (typeof TextEncoder !== 'undefined') {\n    return new TextEncoder('utf-8').encode(string);\n  }\n  return stringToBytes(unescape(encodeURIComponent(string)));\n}\n\n/**\n * Converts a string which holds 8-bit code points, such as the result of atob,\n * into a Uint8Array with the corresponding bytes.\n * If you have a string of characters, you probably want to be using utf8Encode.\n * @param {string} str\n * @return {!Uint8Array}\n */\nexport function stringToBytes(str) {\n  const bytes = new Uint8Array(str.length);\n  for (let i = 0; i < str.length; i++) {\n    const charCode = str.charCodeAt(i);\n    dev().assert(charCode <= 255, 'Characters must be in range [0,255]');\n    bytes[i] = charCode;\n  }\n  return bytes;\n}\n\n/**\n * Converts a 8-bit bytes array into a string\n * @param {!Uint8Array} bytes\n * @return {string}\n */\nexport function bytesToString(bytes) {\n  // Intentionally avoids String.fromCharCode.apply so we don't suffer a\n  // stack overflow. #10495, https://jsperf.com/bytesToString-2\n  const array = new Array(bytes.length);\n  for (let i = 0; i < bytes.length; i++) {\n    array[i] = String.fromCharCode(bytes[i]);\n  }\n  return array.join('');\n}\n\n/**\n * Converts a 4-item byte array to an unsigned integer.\n * Assumes bytes are big endian.\n * @param {!Uint8Array} bytes\n * @return {number}\n */\nexport function bytesToUInt32(bytes) {\n  if (bytes.length != 4) {\n    throw new Error('Received byte array with length != 4');\n  }\n  const val = (bytes[0] & 0xFF) << 24 |\n     (bytes[1] & 0xFF) << 16 |\n     (bytes[2] & 0xFF) << 8 |\n     (bytes[3] & 0xFF);\n  // Convert to unsigned.\n  return val >>> 0;\n}\n\n/**\n * Generate a random bytes array with specific length using\n * win.crypto.getRandomValues. Return null if it is not available.\n * @param {!Window} win\n * @param {number} length\n * @return {?Uint8Array}\n */\nexport function getCryptoRandomBytesArray(win, length) {\n  if (!win.crypto || !win.crypto.getRandomValues) {\n    return null;\n  }\n\n  // Widely available in browsers we support:\n  // http://caniuse.com/#search=getRandomValues\n  const uint8array = new Uint8Array(length);\n  win.crypto.getRandomValues(uint8array);\n  return uint8array;\n}\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {dev} from '../log';\n\n/** @const {string} */\nconst TAG = 'lru-cache';\n\n/**\n * @template T\n */\nexport class LruCache {\n  /**\n   * @param {number} capacity\n   */\n  constructor(capacity) {\n    /** @private @const {number} */\n    this.capacity_ = capacity;\n\n    /** @private {number} */\n    this.size_ = 0;\n\n    /**\n     * An incrementing counter to define the last access.\n     * @private {number}\n     */\n    this.access_ = 0;\n\n    /** @private {!Object<(number|string), {payload: T, access: number}>} */\n    this.cache_ = Object.create(null);\n  }\n\n  /**\n   * Returns whether key is cached.\n   *\n   * @param {number|string} key\n   * @return {boolean}\n   */\n  has(key) {\n    return !!this.cache_[key];\n  }\n\n  /**\n   * @param {number|string} key\n   * @return {T} The cached payload.\n   */\n  get(key) {\n    const cacheable = this.cache_[key];\n    if (cacheable) {\n      cacheable.access = ++this.access_;\n      return cacheable.payload;\n    }\n    return undefined;\n  }\n\n  /**\n   * @param {number|string} key\n   * @param {T} payload The payload to cache.\n   */\n  put(key, payload) {\n    if (!this.has(key)) {\n      this.size_++;\n    }\n    this.cache_[key] = {payload, access: this.access_};\n    this.evict_();\n  }\n\n  /**\n   * Evicts the oldest cache entry, if we've exceeded capacity.\n   */\n  evict_() {\n    if (this.size_ <= this.capacity_) {\n      return;\n    }\n\n    dev().warn(TAG, 'Trimming LRU cache');\n    const cache = this.cache_;\n    let oldest = this.access_ + 1;\n    let oldestKey;\n    for (const key in cache) {\n      const {access} = cache[key];\n      if (access < oldest) {\n        oldest = access;\n        oldestKey = key;\n      }\n    }\n\n    if (oldestKey !== undefined) {\n      delete cache[oldestKey];\n      this.size_--;\n    }\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {isObject} from '../types';\n\n/* @const */\nconst hasOwn_ = Object.prototype.hasOwnProperty;\n\n/**\n * Returns a map-like object.\n * If opt_initial is provided, copies its own properties into the\n * newly created object.\n * @param {T=} opt_initial This should typically be an object literal.\n * @return {T}\n * @template T\n */\nexport function map(opt_initial) {\n  const obj = Object.create(null);\n  if (opt_initial) {\n    Object.assign(obj, opt_initial);\n  }\n  return obj;\n}\n\n/**\n * Return an empty JsonObject or makes the passed in object literal\n * an JsonObject.\n * The JsonObject type is just a simple object that is at-dict.\n * See\n * https://github.com/google/closure-compiler/wiki/@struct-and-@dict-Annotations\n * for what a dict is type-wise.\n * The linter enforces that the argument is, in fact, at-dict like.\n * @param {!Object=} opt_initial\n * @return {!JsonObject}\n */\nexport function dict(opt_initial) {\n  // We do not copy. The linter enforces that the passed in object is a literal\n  // and thus the caller cannot have a reference to it.\n  return /** @type {!JsonObject} */ (opt_initial || {});\n}\n\n/**\n * Checks if the given key is a property in the map.\n *\n * @param {T}  obj a map like property.\n * @param {string}  key\n * @return {boolean}\n * @template T\n */\nexport function hasOwn(obj, key) {\n  return hasOwn_.call(obj, key);\n}\n\n/**\n * Returns obj[key] iff key is obj's own property (is not inherited).\n * Otherwise, returns undefined.\n *\n * @param {Object} obj\n * @param {string} key\n * @return {*}\n */\nexport function ownProperty(obj, key) {\n  if (hasOwn(obj, key)) {\n    return obj[key];\n  } else {\n    return undefined;\n  }\n}\n\n/**\n * Deep merges source into target.\n *\n * @param {!Object} target\n * @param {!Object} source\n * @param {number} depth The maximum merge depth. If exceeded, Object.assign\n *                       will be used instead.\n * @return {!Object}\n * @throws {Error} If source contains a circular reference.\n * Note: Only nested objects are deep-merged, primitives and arrays are not.\n */\nexport function deepMerge(target, source, depth = 10) {\n  // Keep track of seen objects to detect recursive references.\n  const seen = [];\n\n  /** @type {!Array<{t: !Object, s: !Object, d: number}>} */\n  const queue = [];\n  queue.push({t: target, s: source, d: 0});\n\n  // BFS to ensure objects don't have recursive references at shallower depths.\n  while (queue.length > 0) {\n    const {t, s, d} = queue.shift();\n    if (seen.includes(s)) {\n      throw new Error('Source object has a circular reference.');\n    }\n    seen.push(s);\n    if (t === s) {\n      continue;\n    }\n    if (d > depth) {\n      Object.assign(t, s);\n      continue;\n    }\n    Object.keys(s).forEach(key => {\n      const newValue = s[key];\n      // Perform a deep merge IFF both target and source have the same key\n      // whose corresponding values are objects.\n      if (hasOwn(t, key)) {\n        const oldValue = t[key];\n        if (isObject(newValue) && isObject(oldValue)) {\n          queue.push({t: oldValue, s: newValue, d: d + 1});\n          return;\n        }\n      }\n      t[key] = newValue;\n    });\n  }\n  return target;\n}\n\n/**\n * @param {!Object} o An object to remove properties from\n * @param {!Array<string>} props A list of properties to remove from the Object\n * @return {!Object} An object with the given properties removed\n */\nexport function omit(o, props) {\n  return Object.keys(o).reduce((acc, key) => {\n    if (!props.includes(key)) {\n      acc[key] = o[key];\n    }\n    return acc;\n  }, {});\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {base64DecodeToBytes} from './base64';\n\n\n/**\n * Converts a text in PEM format into a binary array buffer.\n * @param {string} pem\n * @return {!Uint8Array}\n * @visibleForTesting\n */\nexport function pemToBytes(pem) {\n  pem = pem.trim();\n\n  // Remove pem prefix, e.g. \"----BEGIN PUBLIC KEY----\".\n  pem = pem.replace(/^\\-+BEGIN[^-]*\\-+/, '');\n\n  // Remove pem suffix, e.g. \"----END PUBLIC KEY----\".\n  pem = pem.replace(/\\-+END[^-]*\\-+$/, '');\n\n  // Remove line breaks.\n  pem = pem.replace(/[\\r\\n]/g, '').trim();\n\n  return base64DecodeToBytes(pem);\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Returns a Deferred struct, which holds a pending promise and its associated\n * resolve and reject functions.\n *\n * This is preferred instead of creating a Promise instance to extract the\n * resolve/reject functions yourself:\n *\n * ```\n * // Avoid doing\n * let resolve;\n * const promise = new Promise(res => {\n *   resolve = res;\n * });\n *\n * // Good\n * const deferred = new Deferred();\n * const { promise, resolve } = deferred;\n * ```\n *\n * @template T\n */\nexport class Deferred {\n  /**\n   * Creates an instance of Deferred.\n   */\n  constructor() {\n    let resolve, reject;\n\n    /**\n     * @const {!Promise<T>}\n     */\n    this.promise = new /*OK*/Promise((res, rej) => {\n      resolve = res;\n      reject = rej;\n    });\n\n    /**\n     * @const {function(T=)}\n     */\n    this.resolve = resolve;\n\n    /**\n     * @const {function(*=)}\n     */\n    this.reject = reject;\n  }\n}\n\n/**\n * Creates a promise resolved to the return value of fn.\n * If fn sync throws, it will cause the promise to reject.\n *\n * @param {function():T} fn\n * @return {!Promise<T>}\n * @template T\n */\nexport function tryResolve(fn) {\n  return new Promise(resolve => {\n    resolve(fn());\n  });\n}\n\n/**\n * Returns a promise which resolves if a threshold amount of the given promises\n * resolve, and rejects otherwise.\n * @param {!Array<!Promise>} promises The array of promises to test.\n * @param {number} count The number of promises that must resolve for the\n *     returned promise to resolve.\n * @return {!Promise} A promise that resolves if any of the given promises\n *     resolve, and which rejects otherwise.\n */\nexport function some(promises, count = 1) {\n  return new Promise((resolve, reject) => {\n    count = Math.max(count, 0);\n    const extra = promises.length - count;\n    if (extra < 0) {\n      reject(new Error('not enough promises to resolve'));\n    }\n    if (promises.length == 0) {\n      resolve([]);\n    }\n    const values = [];\n    const reasons = [];\n\n    const onFulfilled = value => {\n      if (values.length < count) {\n        values.push(value);\n      }\n      if (values.length == count) {\n        resolve(values);\n      }\n    };\n    const onRejected = reason => {\n      if (reasons.length <= extra) {\n        reasons.push(reason);\n      }\n      if (reasons.length > extra) {\n        reject(reasons);\n      }\n    };\n    for (let i = 0; i < promises.length; i++) {\n      Promise.resolve(promises[i]).then(onFulfilled, onRejected);\n    }\n  });\n}\n\n/**\n * Resolves with the result of the last promise added.\n * @implements {IThenable}\n */\nexport class LastAddedResolver {\n  /**\n   * @param {!Array<!Promise>=} opt_promises\n   */\n  constructor(opt_promises) {\n    let resolve_, reject_;\n    /** @private @const {!Promise} */\n    this.promise_ = new Promise((resolve, reject) => {\n      resolve_ = resolve;\n      reject_ = reject;\n    });\n\n    /** @private */\n    this.resolve_ = resolve_;\n\n    /** @private */\n    this.reject_ = reject_;\n\n    /** @private */\n    this.count_ = 0;\n\n    if (opt_promises) {\n      for (let i = 0; i < opt_promises.length; i++) {\n        this.add(opt_promises[i]);\n      }\n    }\n  }\n\n  /**\n   * Add a promise to possibly be resolved.\n   * @param {!Promise} promise\n   * @return {!Promise}\n   */\n  add(promise) {\n    const countAtAdd = ++this.count_;\n    Promise.resolve(promise).then(result => {\n      if (this.count_ === countAtAdd) {\n        this.resolve_(result);\n      }\n    }, error => {\n      // Don't follow behavior of Promise.all and Promise.race error so that\n      // this will only reject when most recently added promise fails.\n      if (this.count_ === countAtAdd) {\n        this.reject_(error);\n      }\n    });\n    return this.promise_;\n  }\n\n  /** @override */\n  then(opt_resolve, opt_reject) {\n    return this.promise_.then(opt_resolve, opt_reject);\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Services} from '../services';\nimport {dev, user} from '../log';\nimport {dict, map} from './object';\nimport {fromIterator} from './array';\nimport {getCorsUrl, getSourceOrigin, getWinOrigin, isProxyOrigin, parseUrlDeprecated} from '../url';\nimport {getMode} from '../mode';\nimport {isArray, isObject} from '../types';\nimport {isFormDataWrapper} from '../form-data-wrapper';\nimport {parseJson} from '../json';\nimport {utf8Encode} from './bytes';\n\n/** @private @const {!Array<string>} */\nconst allowedMethods_ = ['GET', 'POST'];\n\n/** @private @const {string} */\nconst ALLOW_SOURCE_ORIGIN_HEADER = 'AMP-Access-Control-Allow-Source-Origin';\n\n/**\n * The \"init\" argument of the Fetch API. Currently, only \"credentials: include\"\n * is implemented.  Note ampCors with explicit false indicates that\n * __amp_source_origin should not be appended to the URL to allow for\n * potential caching or response across pages.\n *\n * See https://developer.mozilla.org/en-US/docs/Web/API/GlobalFetch/fetch\n *\n * @typedef {{\n *   body: (!Object|!Array|undefined|string),\n *   credentials: (string|undefined),\n *   headers: (!JsonObject|undefined),\n *   method: (string|undefined),\n *   requireAmpResponseSourceOrigin: (boolean|undefined),\n *   ampCors: (boolean|undefined)\n * }}\n */\nexport let FetchInitDef;\n\n/**\n * Serializes a fetch request so that it can be passed to `postMessage()`,\n * i.e., can be cloned using the\n * [structured clone algorithm](http://mdn.io/Structured_clone_algorithm).\n *\n * The request is serialized in the following way:\n *\n * 1. If the `init.body` is a `FormData`, set content-type header to\n * `multipart/form-data` and transform `init.body` into an\n * `!Array<!Array<string>>` holding the list of form entries, where each\n * element in the array is a form entry (key-value pair) represented as a\n * 2-element array.\n *\n * 2. Return a new object having properties `input` and the transformed\n * `init`.\n *\n * The serialized request is assumed to be de-serialized in the following way:\n *\n * 1.If content-type header starts with `multipart/form-data`\n * (case-insensitive), transform the entry array in `init.body` into a\n * `FormData` object.\n *\n * 2. Pass `input` and transformed `init` to `fetch` (or the constructor of\n * `Request`).\n *\n * Currently only `FormData` used in `init.body` is handled as it's the only\n * type being used in AMP runtime that needs serialization. The `Headers` type\n * also needs serialization, but callers should not be passing `Headers`\n * object in `init`, as that fails `fetchPolyfill` on browsers that don't\n * support fetch. Some serialization-needing types for `init.body` such as\n * `ArrayBuffer` and `Blob` are already supported by the structured clone\n * algorithm. Other serialization-needing types such as `URLSearchParams`\n * (which is not supported in IE and Safari) and `FederatedCredentials` are\n * not used in AMP runtime.\n *\n * @param {string} input The URL of the XHR to convert to structured\n *     cloneable.\n * @param {!FetchInitDef} init The options of the XHR to convert to structured\n *     cloneable.\n * @return {{input: string, init: !FetchInitDef}} The serialized structurally-\n *     cloneable request.\n * @private\n */\nexport function toStructuredCloneable(input, init) {\n  const newInit = Object.assign({}, init);\n  if (isFormDataWrapper(init.body)) {\n    newInit.headers['Content-Type'] = 'multipart/form-data;charset=utf-8';\n    newInit.body = fromIterator(init.body.entries());\n  }\n  return {input, init: newInit};\n}\n\n/**\n * De-serializes a fetch response that was made possible to be passed to\n * `postMessage()`, i.e., can be cloned using the\n * [structured clone algorithm](http://mdn.io/Structured_clone_algorithm).\n *\n * The response is assumed to be serialized in the following way:\n *\n * 1. Transform the entries in the headers of the response into an\n * `!Array<!Array<string>>` holding the list of header entries, where each\n * element in the array is a header entry (key-value pair) represented as a\n * 2-element array. The header key is case-insensitive.\n *\n * 2. Include the header entry list and `status` and `statusText` properties\n * of the response in as `headers`, `status` and `statusText` properties of\n * `init`.\n *\n * 3. Include the body of the response serialized as string in `body`.\n *\n * 4. Return a new object having properties `body` and `init`.\n *\n * The response is de-serialized in the following way:\n *\n * 1. If the `Response` type is supported and `responseType` is not\n * document, pass `body` and `init` directly to the constructor of `Response`.\n *\n * 2. Otherwise, populate a fake XHR object to pass to `FetchResponse` as if\n * the response is returned by the fetch polyfill.\n *\n * 3. If `responseType` is `document`, also parse the body and populate\n * `responseXML` as a `Document` type.\n *\n * @param {JsonObject|string|undefined} response The structurally-cloneable\n *     response to convert back to a regular Response.\n * @param {string|undefined} responseType The original response type used to\n *     initiate the XHR.\n * @return {!FetchResponse|!Response} The deserialized regular response.\n * @private\n */\nexport function fromStructuredCloneable(response, responseType) {\n  user().assert(isObject(response), 'Object expected: %s', response);\n\n  const isDocumentType = responseType == 'document';\n  if (typeof Response === 'function' && !isDocumentType) {\n    // Use native `Response` type if available for performance. If response\n    // type is `document`, we must fall back to `FetchResponse` polyfill\n    // because callers would then rely on the `responseXML` property being\n    // present, which is not supported by the Response type.\n    return new Response(response['body'], response['init']);\n  }\n\n  const lowercasedHeaders = map();\n  const data = {\n    status: 200,\n    statusText: 'OK',\n    responseText: (response['body'] ? String(response['body']) : ''),\n    /**\n     * @param {string} name\n     * @return {string}\n     */\n    getResponseHeader(name) {\n      return lowercasedHeaders[String(name).toLowerCase()] || null;\n    },\n  };\n\n  if (response['init']) {\n    const init = response['init'];\n    if (isArray(init.headers)) {\n      init.headers.forEach(entry => {\n        const headerName = entry[0];\n        const headerValue = entry[1];\n        lowercasedHeaders[String(headerName).toLowerCase()] =\n            String(headerValue);\n      });\n    }\n    if (init.status) {\n      data.status = parseInt(init.status, 10);\n    }\n    if (init.statusText) {\n      data.statusText = String(init.statusText);\n    }\n  }\n\n  if (isDocumentType) {\n    // TODO(prateekbh): remove this when integrating document fetcher.\n    data.responseXML =\n        new DOMParser().parseFromString(data.responseText, 'text/html');\n  }\n\n  return new FetchResponse(data);\n}\n\n/**\n * Intercepts the XHR and proxies it through the viewer if necessary.\n *\n * XHRs are intercepted if all of the following are true:\n * - The AMP doc is in single doc mode\n * - The requested resource is not a 1p request.\n * - The viewer has the `xhrInterceptor` capability\n * - The Viewer is a trusted viewer or AMP is currently in developement mode\n * - The AMP doc is opted-in for XHR interception (`<html>` tag has\n *   `allow-xhr-interception` attribute)\n *\n * @param {!Window} win\n * @param {?../service/ampdoc-impl.AmpDoc} ampdocSingle\n * @param {string} input The URL of the XHR which may get intercepted.\n * @param {!FetchInitDef} init The options of the XHR which may get\n *     intercepted.\n * @return {!Promise<!FetchResponse|!Response|undefined>}\n *     A response returned by the interceptor if XHR is intercepted or\n *     `Promise<undefined>` otherwise.\n * @private\n */\nexport function getViewerInterceptResponse(win, ampdocSingle, input, init) {\n  if (!ampdocSingle) {\n    return Promise.resolve();\n  }\n  const viewer = Services.viewerForDoc(ampdocSingle);\n  const whenFirstVisible = viewer.whenFirstVisible();\n  if (isProxyOrigin(input) || !viewer.hasCapability('xhrInterceptor')) {\n    return whenFirstVisible;\n  }\n  const htmlElement = ampdocSingle.getRootNode().documentElement;\n  const docOptedIn = htmlElement.hasAttribute('allow-xhr-interception');\n  if (!docOptedIn) {\n    return whenFirstVisible;\n  }\n  return whenFirstVisible.then(() => {\n    return viewer.isTrustedViewer();\n  }).then(viewerTrusted => {\n    const isDevMode = getMode(win).development;\n    if (!viewerTrusted && !isDevMode) {\n      return;\n    }\n    const messagePayload = dict({\n      'originalRequest': toStructuredCloneable(input, init),\n    });\n    return viewer.sendMessageAwaitResponse('xhr', messagePayload)\n        .then(response =>\n          fromStructuredCloneable(response, init.responseType));\n  });\n}\n\n/**\n * Setsup URL based on ampCors\n * @param {!Window} win\n * @param {string} input\n * @param {!FetchInitDef} init The options of the XHR which may get\n * intercepted.\n */\nexport function setupInput(win, input, init) {\n  dev().assert(typeof input == 'string', 'Only URL supported: %s', input);\n  if (init.ampCors !== false) {\n    input = getCorsUrl(win, input);\n  }\n  return input;\n}\n\n/**\n * Sets up and normalizes the FetchInitDef\n *\n * @param {?FetchInitDef=} opt_init Fetch options object.\n * @param {string=} opt_accept The HTTP Accept header value.\n * @return {!FetchInitDef}\n */\nexport function setupInit(opt_init, opt_accept) {\n  const init = opt_init || {};\n\n  // In particular, Firefox does not tolerate `null` values for\n  // `credentials`.\n  const creds = init.credentials;\n  dev().assert(\n      creds === undefined || creds == 'include' || creds == 'omit',\n      'Only credentials=include|omit support: %s', creds);\n\n  init.method = normalizeMethod_(init.method);\n  init.headers = init.headers || dict({});\n  if (opt_accept) {\n    init.headers['Accept'] = opt_accept;\n  }\n\n  // In edge a `TypeMismatchError` is thrown when body is set to null.\n  dev().assert(init.body !== null, 'fetch `body` can not be `null`');\n\n  return init;\n}\n\n/**\n *\n * Sets up AMPSpecific CORS headers.\n * @param {!Window} win\n * @param {string} input\n * @param {?FetchInitDef=} init\n * @return {!FetchInitDef}\n */\nexport function setupAMPCors(win, input, init) {\n  // Do not append __amp_source_origin if explicitly disabled.\n  if (init.ampCors === false) {\n    init.requireAmpResponseSourceOrigin = false;\n  }\n  if (init.requireAmpResponseSourceOrigin === true) {\n    dev().error('XHR',\n        'requireAmpResponseSourceOrigin is deprecated, use ampCors instead');\n  }\n  if (init.requireAmpResponseSourceOrigin === undefined) {\n    init.requireAmpResponseSourceOrigin = true;\n  }\n  // For some same origin requests, add AMP-Same-Origin: true header to allow\n  // publishers to validate that this request came from their own origin.\n  const currentOrigin = getWinOrigin(win);\n  const targetOrigin = parseUrlDeprecated(input).origin;\n  if (currentOrigin == targetOrigin) {\n    init['headers'] = init['headers'] || {};\n    init['headers']['AMP-Same-Origin'] = 'true';\n  }\n\n  return init;\n}\n\n/**\n * Normalized method name by uppercasing.\n * @param {string|undefined} method\n * @return {string}\n * @private\n */\nfunction normalizeMethod_(method) {\n  if (method === undefined) {\n    return 'GET';\n  }\n  method = method.toUpperCase();\n  dev().assert(\n      allowedMethods_.includes(method),\n      'Only one of %s is currently allowed. Got %s',\n      allowedMethods_.join(', '),\n      method\n  );\n  return method;\n}\n\n/**\n * Verifies if response has the correct headers\n * @param {!Window} win\n * @param {!FetchResponse} response\n * @param {!FetchInitDef=} init\n * @return {!FetchResponse}\n */\nexport function verifyAmpCORSHeaders(win, response, init) {\n  const allowSourceOriginHeader = response.headers.get(\n      ALLOW_SOURCE_ORIGIN_HEADER);\n  if (allowSourceOriginHeader) {\n    const sourceOrigin = getSourceOrigin(win.location.href);\n    // If the `AMP-Access-Control-Allow-Source-Origin` header is returned,\n    // ensure that it's equal to the current source origin.\n    user().assert(allowSourceOriginHeader == sourceOrigin,\n        `Returned ${ALLOW_SOURCE_ORIGIN_HEADER} is not` +\n          ` equal to the current: ${allowSourceOriginHeader}` +\n          ` vs ${sourceOrigin}`);\n  } else if (init.requireAmpResponseSourceOrigin) {\n    // If the `AMP-Access-Control-Allow-Source-Origin` header is not\n    // returned but required, return error.\n    user().assert(false, 'Response must contain the' +\n        ` ${ALLOW_SOURCE_ORIGIN_HEADER} header`);\n  }\n  return response;\n}\n\n// TODO(prateekbh): move everything below this line into the polyfill\n/**\n * A record version of `XMLHttpRequest` that has all the necessary properties\n * and methods of `XMLHttpRequest` to construct a `FetchResponse` from a\n * serialized response returned by the viewer.\n * @typedef {{\n *   status: number,\n *   statusText: string,\n *   responseText: string,\n *   responseXML: ?Document,\n *   getResponseHeader: function(this:XMLHttpRequestDef, string): string,\n * }}\n */\nlet XMLHttpRequestDef;\n\n/** @private @enum {number} Allowed fetch responses. */\nconst allowedFetchTypes_ = {\n  document: 1,\n  text: 2,\n};\n\n/**\n * A minimal polyfill of Fetch API. It only polyfills what we currently use.\n *\n * See https://developer.mozilla.org/en-US/docs/Web/API/GlobalFetch/fetch\n *\n * Notice that the \"fetch\" method itself is not exported as that would require\n * us to immediately support a much wide API.\n *\n * @param {string} input\n * @param {!FetchInitDef} init\n * @return {!Promise<!FetchResponse>}\n * @private Visible for testing\n */\nexport function fetchPolyfill(input, init) {\n  return new Promise(function(resolve, reject) {\n    const xhr = createXhrRequest(init.method || 'GET', input);\n\n    if (init.credentials == 'include') {\n      xhr.withCredentials = true;\n    }\n\n    if (init.responseType in allowedFetchTypes_) {\n      xhr.responseType = init.responseType;\n    }\n\n    if (init.headers) {\n      Object.keys(init.headers).forEach(function(header) {\n        xhr.setRequestHeader(header, init.headers[header]);\n      });\n    }\n\n    xhr.onreadystatechange = () => {\n      if (xhr.readyState < /* STATUS_RECEIVED */ 2) {\n        return;\n      }\n      if (xhr.status < 100 || xhr.status > 599) {\n        xhr.onreadystatechange = null;\n        reject(user().createExpectedError(`Unknown HTTP status ${xhr.status}`));\n        return;\n      }\n\n      // TODO(dvoytenko): This is currently simplified: we will wait for the\n      // whole document loading to complete. This is fine for the use cases\n      // we have now, but may need to be reimplemented later.\n      if (xhr.readyState == /* COMPLETE */ 4) {\n        resolve(new FetchResponse(xhr));\n      }\n    };\n    xhr.onerror = () => {\n      reject(user().createExpectedError('Request failure'));\n    };\n    xhr.onabort = () => {\n      reject(user().createExpectedError('Request aborted'));\n    };\n\n    if (init.method == 'POST') {\n      xhr.send(init.body);\n    } else {\n      xhr.send();\n    }\n  });\n}\n\n/**\n * @param {string} method\n * @param {string} url\n * @return {!XMLHttpRequest|!XDomainRequest}\n * @private\n */\nfunction createXhrRequest(method, url) {\n  let xhr = new XMLHttpRequest();\n  if ('withCredentials' in xhr) {\n    xhr.open(method, url, true);\n  } else if (typeof XDomainRequest != 'undefined') {\n    // IE-specific object.\n    xhr = new XDomainRequest(); // eslint-disable-line no-undef\n    xhr.open(method, url);\n  } else {\n    throw dev().createExpectedError('CORS is not supported');\n  }\n  return xhr;\n}\n\n/**\n * If 415 or in the 5xx range.\n * @param {number} status\n */\nfunction isRetriable(status) {\n  return status == 415 || (status >= 500 && status < 600);\n}\n\n\n/**\n * Returns the response if successful or otherwise throws an error.\n * @param {!FetchResponse} response\n * @return {!Promise<!FetchResponse>}\n * @private Visible for testing\n */\nexport function assertSuccess(response) {\n  return new Promise(resolve => {\n    if (response.ok) {\n      return resolve(response);\n    }\n\n    const {status} = response;\n    const err = user().createError(`HTTP error ${status}`);\n    err.retriable = isRetriable(status);\n    // TODO(@jridgewell, #9448): Callers who need the response should\n    // skip processing.\n    err.response = response;\n    throw err;\n  });\n}\n\n\n/**\n * Response object in the Fetch API.\n *\n * See https://developer.mozilla.org/en-US/docs/Web/API/GlobalFetch/fetch\n */\nexport class FetchResponse {\n  /**\n   * @param {!XMLHttpRequest|!XDomainRequest|!XMLHttpRequestDef} xhr\n   */\n  constructor(xhr) {\n    /** @private @const {!XMLHttpRequest|!XDomainRequest|!XMLHttpRequestDef} */\n    this.xhr_ = xhr;\n\n    /** @const {number} */\n    this.status = this.xhr_.status;\n\n    /** @const {boolean} */\n    this.ok = this.status >= 200 && this.status < 300;\n\n    /** @const {!FetchResponseHeaders} */\n    this.headers = new FetchResponseHeaders(xhr);\n\n    /** @type {boolean} */\n    this.bodyUsed = false;\n\n    /** @type {?ReadableStream} */\n    this.body = null;\n  }\n\n  /**\n   * Create a copy of the response and return it.\n   * @return {!FetchResponse}\n   */\n  clone() {\n    dev().assert(!this.bodyUsed, 'Body already used');\n    return new FetchResponse(this.xhr_);\n  }\n\n  /**\n   * Drains the response and returns the text.\n   * @return {!Promise<string>}\n   * @private\n   */\n  drainText_() {\n    dev().assert(!this.bodyUsed, 'Body already used');\n    this.bodyUsed = true;\n    return Promise.resolve(this.xhr_.responseText);\n  }\n\n  /**\n   * Drains the response and returns a promise that resolves with the response\n   * text.\n   * @return {!Promise<string>}\n   */\n  text() {\n    return this.drainText_();\n  }\n\n  /**\n   * Drains the response and returns the JSON object.\n   * @return {!Promise<!JsonObject>}\n   */\n  json() {\n    return /** @type {!Promise<!JsonObject>} */ (\n      this.drainText_().then(parseJson));\n  }\n\n  /**\n   * Reads the xhr responseXML.\n   * @return {!Promise<!Document>}\n   */\n  document() {\n    dev().assert(!this.bodyUsed, 'Body already used');\n    this.bodyUsed = true;\n    user().assert(this.xhr_.responseXML,\n        'responseXML should exist. Make sure to return ' +\n        'Content-Type: text/html header.');\n    const doc = /** @type {!Document} */(dev().assert(this.xhr_.responseXML));\n    return Promise.resolve(doc);\n  }\n\n  /**\n   * Drains the response and returns a promise that resolves with the response\n   * ArrayBuffer.\n   * @return {!Promise<!ArrayBuffer>}\n   */\n  arrayBuffer() {\n    return /** @type {!Promise<!ArrayBuffer>} */ (\n      this.drainText_().then(utf8Encode));\n  }\n}\n\n\n/**\n * Provides access to the response headers as defined in the Fetch API.\n * @private Visible for testing.\n */\nexport class FetchResponseHeaders {\n  /**\n   * @param {!XMLHttpRequest|!XDomainRequest|!XMLHttpRequestDef} xhr\n   */\n  constructor(xhr) {\n    /** @private @const {!XMLHttpRequest|!XDomainRequest|!XMLHttpRequestDef} */\n    this.xhr_ = xhr;\n  }\n\n  /**\n   * @param {string} name\n   * @return {string}\n   */\n  get(name) {\n    return this.xhr_.getResponseHeader(name);\n  }\n\n  /**\n   * @param {string} name\n   * @return {boolean}\n   */\n  has(name) {\n    return this.xhr_.getResponseHeader(name) != null;\n  }\n}\n","/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */\n\n\n/**\n * This regex consists of 4 matching capture groups and one (non-matching) fallback:\n *\n * - (\\0), catch the null terminator character so it may be replaced by UTF\n *   Replacement Char\n * - ^(-)$, catch a solitary dash char, so that it may be backslash escaped.\n *   This is a separate capture group so that the legal-chars (group 4) doesn't\n *   capture it first, since that group doesn't need to escape its dash.\n * - ([\\x01-\\x1f\\x7f]|^-?[0-9]), catch a UTF control char, or any leading\n *   number (with an optional leading dash). The control or the number (but not\n *   the leading dash) must be hex-escaped,.\n * - ([\\x80-\\uffff0-9a-zA-Z_-]+), catch legal-chars, with the exception of a\n *   solitary dash, which will already have matched in group 1.\n * - [^], finally, a catch-all that allows us to backslash escape the char.\n *\n * Together, this matches everything necessary for CSS.escape.\n */\nvar regex = /(\\0)|^(-)$|([\\x01-\\x1f\\x7f]|^-?[0-9])|([\\x80-\\uffff0-9a-zA-Z_-]+)|[^]/g;\n\nfunction escaper(match, nil, dash, hexEscape, chars) {\n  // Chars is the legal-chars (group 4) capture\n  if (chars) {\n    return chars;\n  }\n  // Nil is the null terminator (group 1) capture\n  if (nil) {\n    return '\\uFFFD';\n  }\n  // Both UTF control chars, and leading numbers (with optional leading dash)\n  // (group 3) must be backslash escaped with a trailing space.  Funnily, the\n  // leading dash must not be escaped, but the number. :shrug:\n  if (hexEscape) {\n    return match.slice(0, -1) + '\\\\' + match.slice(-1).charCodeAt(0).toString(16) + ' '\n  }\n  // Finally, the solitary dash and the catch-all chars require backslash\n  // escaping.\n  return '\\\\' + match;\n}\n\n/**\n * https://drafts.csswg.org/cssom/#serialize-an-identifier\n * @param {string} value\n * @return {string}\n */\nexport function cssEscape(value) {\n  return String(value).replace(regex, escaper);\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJidWlsZC9hbXAtYWNjZXNzLTAuMS5jc3MuanMiLCJleHRlbnNpb25zL2FtcC1hY2Nlc3MvMC4xL2FjY2Vzcy1leHByLWltcGwuanMiLCJleHRlbnNpb25zL2FtcC1hY2Nlc3MvMC4xL2FjY2Vzcy1leHByLmpzIiwiZXh0ZW5zaW9ucy9hbXAtYWNjZXNzLzAuMS9hY2Nlc3MtdmFycy5qcyIsImV4dGVuc2lvbnMvYW1wLWFjY2Vzcy8wLjEvYWNjZXNzLXZlbmRvci5qcyIsImV4dGVuc2lvbnMvYW1wLWFjY2Vzcy8wLjEvYW1wLWFjY2Vzcy1jbGllbnQuanMiLCJleHRlbnNpb25zL2FtcC1hY2Nlc3MvMC4xL2FtcC1hY2Nlc3MtaWZyYW1lLmpzIiwiZXh0ZW5zaW9ucy9hbXAtYWNjZXNzLzAuMS9hbXAtYWNjZXNzLW90aGVyLmpzIiwiZXh0ZW5zaW9ucy9hbXAtYWNjZXNzLzAuMS9hbXAtYWNjZXNzLXNlcnZlci1qd3QuanMiLCJleHRlbnNpb25zL2FtcC1hY2Nlc3MvMC4xL2FtcC1hY2Nlc3Mtc2VydmVyLmpzIiwiZXh0ZW5zaW9ucy9hbXAtYWNjZXNzLzAuMS9hbXAtYWNjZXNzLXNvdXJjZS5qcyIsImV4dGVuc2lvbnMvYW1wLWFjY2Vzcy8wLjEvYW1wLWFjY2Vzcy12ZW5kb3IuanMiLCJleHRlbnNpb25zL2FtcC1hY2Nlc3MvMC4xL2FtcC1hY2Nlc3MuanMiLCJleHRlbnNpb25zL2FtcC1hY2Nlc3MvMC4xL2lmcmFtZS1hcGkvbWVzc2VuZ2VyLmpzIiwiZXh0ZW5zaW9ucy9hbXAtYWNjZXNzLzAuMS9qd3QuanMiLCJleHRlbnNpb25zL2FtcC1hY2Nlc3MvMC4xL2xvZ2luLWRpYWxvZy5qcyIsIm5vZGVfbW9kdWxlcy9kb2N1bWVudC1yZWdpc3Rlci1lbGVtZW50L2J1aWxkL2RvY3VtZW50LXJlZ2lzdGVyLWVsZW1lbnQucGF0Y2hlZC5qcyIsIm5vZGVfbW9kdWxlcy9wcm9taXNlLXBqcy9wcm9taXNlLmpzIiwic3JjL2FtcC1ldmVudHMuanMiLCJzcmMvYW5hbHl0aWNzLmpzIiwic3JjL2NvbmZpZy5qcyIsInNyYy9jb29raWVzLmpzIiwic3JjL2RvY3VtZW50LWZldGNoZXIuanMiLCJzcmMvZG9tLmpzIiwic3JjL2VsZW1lbnQtc2VydmljZS5qcyIsInNyYy9lcnJvci5qcyIsInNyYy9ldmVudC1oZWxwZXItbGlzdGVuLmpzIiwic3JjL2V2ZW50LWhlbHBlci5qcyIsInNyYy9leHBlcmltZW50cy5qcyIsInNyYy9leHBvbmVudGlhbC1iYWNrb2ZmLmpzIiwic3JjL2Zvcm0tZGF0YS13cmFwcGVyLmpzIiwic3JjL2Zvcm0uanMiLCJzcmMvanNvbi5qcyIsInNyYy9sb2cuanMiLCJzcmMvbW9kZS1vYmplY3QuanMiLCJzcmMvbW9kZS5qcyIsInNyYy9vYnNlcnZhYmxlLmpzIiwic3JjL3BvbHlmaWxscy5qcyIsInNyYy9wb2x5ZmlsbHMvYXJyYXktaW5jbHVkZXMuanMiLCJzcmMvcG9seWZpbGxzL2N1c3RvbS1lbGVtZW50cy5qcyIsInNyYy9wb2x5ZmlsbHMvZG9jdW1lbnQtY29udGFpbnMuanMiLCJzcmMvcG9seWZpbGxzL2RvbXRva2VubGlzdC10b2dnbGUuanMiLCJzcmMvcG9seWZpbGxzL21hdGgtc2lnbi5qcyIsInNyYy9wb2x5ZmlsbHMvb2JqZWN0LWFzc2lnbi5qcyIsInNyYy9wb2x5ZmlsbHMvcHJvbWlzZS5qcyIsInNyYy9yZW5kZXItZGVsYXlpbmctc2VydmljZXMuanMiLCJzcmMvc2VydmljZS5qcyIsInNyYy9zZXJ2aWNlcy5qcyIsInNyYy9zdHJpbmcuanMiLCJzcmMvc3R5bGUtaW5zdGFsbGVyLmpzIiwic3JjL3N0eWxlLmpzIiwic3JjL3R5cGVzLmpzIiwic3JjL3VybC1wYXJzZS1xdWVyeS1zdHJpbmcuanMiLCJzcmMvdXJsLXRyeS1kZWNvZGUtdXJpLWNvbXBvbmVudC5qcyIsInNyYy91cmwuanMiLCJzcmMvdXRpbHMvYXJyYXkuanMiLCJzcmMvdXRpbHMvYmFzZTY0LmpzIiwic3JjL3V0aWxzL2J5dGVzLmpzIiwic3JjL3V0aWxzL2xydS1jYWNoZS5qcyIsInNyYy91dGlscy9vYmplY3QuanMiLCJzcmMvdXRpbHMvcGVtLmpzIiwic3JjL3V0aWxzL3Byb21pc2UuanMiLCJzcmMvdXRpbHMveGhyLXV0aWxzLmpzIiwidGhpcmRfcGFydHkvY3NzLWVzY2FwZS9jc3MtZXNjYXBlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0FDQU8sSUFBTSxvQkFBTSw2REFBWjs7Ozs7Ozs7O0FDQVA7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpQkE7O0FBRUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBd0VBLElBQUksU0FBVSxZQUFVO0FBQ3hCLFFBQUksSUFBRSxXQUFTLENBQVQsRUFBVyxDQUFYLEVBQWEsRUFBYixFQUFlLENBQWYsRUFBaUI7QUFBQyxhQUFJLEtBQUUsTUFBRyxFQUFMLEVBQVEsSUFBRSxFQUFFLE1BQWhCLEVBQXVCLEdBQXZCLEVBQTJCLEdBQUUsRUFBRSxDQUFGLENBQUYsSUFBUSxDQUFuQyxJQUFzQyxPQUFPLEVBQVA7QUFBUyxLQUF2RTtBQUFBLFFBQXdFLE1BQUksQ0FBQyxDQUFELEVBQUcsQ0FBSCxDQUE1RTtBQUFBLFFBQWtGLE1BQUksQ0FBQyxDQUFELEVBQUcsQ0FBSCxDQUF0RjtBQUFBLFFBQTRGLE1BQUksQ0FBQyxDQUFELEVBQUcsRUFBSCxDQUFoRztBQUFBLFFBQXVHLE1BQUksQ0FBQyxDQUFELEVBQUcsRUFBSCxDQUEzRztBQUFBLFFBQWtILE1BQUksQ0FBQyxDQUFELEVBQUcsRUFBSCxDQUF0SDtBQUFBLFFBQTZILE1BQUksQ0FBQyxDQUFELEVBQUcsRUFBSCxDQUFqSTtBQUFBLFFBQXdJLE1BQUksQ0FBQyxDQUFELEVBQUcsRUFBSCxDQUE1STtBQUFBLFFBQW1KLE1BQUksQ0FBQyxDQUFELEVBQUcsRUFBSCxDQUF2SjtBQUFBLFFB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ242Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUFJLFFBQVEsd0VBQVo7O0FBRUEsU0FBUyxPQUFULENBQWlCLEtBQWpCLEVBQXdCLEdBQXhCLEVBQTZCLElBQTdCLEVBQW1DLFNBQW5DLEVBQThDLEtBQTlDLEVBQXFEO0FBQ25EO0FBQ0EsTUFBSSxLQUFKLEVBQVc7QUFDVCxXQUFPLEtBQVA7QUFDRDtBQUNEO0FBQ0EsTUFBSSxHQUFKLEVBQVM7QUFDUCxXQUFPLFFBQVA7QUFDRDtBQUNEO0FBQ0E7QUFDQTtBQUNBLE1BQUksU0FBSixFQUFlO0FBQ2IsV0FBTyxNQUFNLEtBQU4sQ0FBWSxDQUFaLEVBQWUsQ0FBQyxDQUFoQixJQUFxQixJQUFyQixHQUE0QixNQUFNLEtBQU4sQ0FBWSxDQUFDLENBQWIsRUFBZ0IsVUFBaEIsQ0FBMkIsQ0FBM0IsRUFBOEIsUUFBOUIsQ0FBdUMsRUFBdkMsQ0FBNUIsR0FBeUUsR0FBaEY7QUFDRDtBQUNEO0FBQ0E7QUFDQSxTQUFPLE9BQU8sS0FBZDtBQUNEOztBQUVEOzs7OztBQUtPLFNBQVMsU0FBVCxDQUFtQixLQUFuQixFQUEwQjtBQUMvQixTQUFPLE9BQU8sS0FBUCxFQUFjLE9BQWQsQ0FBc0IsS0FBdEIsRUFBNkIsT0FBN0IsQ0FBUDtBQUNEIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImV4cG9ydCBjb25zdCBDU1MgPSBcIlxcbi8qIyBzb3VyY2VVUkw9L2V4dGVuc2lvbnMvYW1wLWFjY2Vzcy8wLjEvYW1wLWFjY2Vzcy5jc3MqL1wiO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cblxuLyoqIEBmaWxlb3ZlcnZpZXcgQHN1cHByZXNzIHtjaGVja1R5cGVzLCBzdXNwaWNpb3VzQ29kZSwgdXNlbGVzc0NvZGV9ICovXG5cbi8qIHBhcnNlciBnZW5lcmF0ZWQgYnkgamlzb24gMC40LjE4ICovXG4vKlxuICBSZXR1cm5zIGEgUGFyc2VyIG9iamVjdCBvZiB0aGUgZm9sbG93aW5nIHN0cnVjdHVyZTpcblxuICBQYXJzZXI6IHtcbiAgICB5eToge31cbiAgfVxuXG4gIFBhcnNlci5wcm90b3R5cGU6IHtcbiAgICB5eToge30sXG4gICAgdHJhY2U6IGZ1bmN0aW9uKCksXG4gICAgc3ltYm9sc186IHthc3NvY2lhdGl2ZSBsaXN0OiBuYW1lID09PiBudW1iZXJ9LFxuICAgIHRlcm1pbmFsc186IHthc3NvY2lhdGl2ZSBsaXN0OiBudW1iZXIgPT0+IG5hbWV9LFxuICAgIHByb2R1Y3Rpb25zXzogWy4uLl0sXG4gICAgcGVyZm9ybUFjdGlvbjogZnVuY3Rpb24gYW5vbnltb3VzKHl5dGV4dCwgeXlsZW5nLCB5eWxpbmVubywgeXksIHl5c3RhdGUsICQkLCBfJCksXG4gICAgdGFibGU6IFsuLi5dLFxuICAgIGRlZmF1bHRBY3Rpb25zOiB7Li4ufSxcbiAgICBwYXJzZUVycm9yOiBmdW5jdGlvbihzdHIsIGhhc2gpLFxuICAgIHBhcnNlOiBmdW5jdGlvbihpbnB1dCksXG5cbiAgICBsZXhlcjoge1xuICAgICAgICBFT0Y6IDEsXG4gICAgICAgIHBhcnNlRXJyb3I6IGZ1bmN0aW9uKHN0ciwgaGFzaCksXG4gICAgICAgIHNldElucHV0OiBmdW5jdGlvbihpbnB1dCksXG4gICAgICAgIGlucHV0OiBmdW5jdGlvbigpLFxuICAgICAgICB1bnB1dDogZnVuY3Rpb24oc3RyKSxcbiAgICAgICAgbW9yZTogZnVuY3Rpb24oKSxcbiAgICAgICAgbGVzczogZnVuY3Rpb24obiksXG4gICAgICAgIHBhc3RJbnB1dDogZnVuY3Rpb24oKSxcbiAgICAgICAgdXBjb21pbmdJbnB1dDogZnVuY3Rpb24oKSxcbiAgICAgICAgc2hvd1Bvc2l0aW9uOiBmdW5jdGlvbigpLFxuICAgICAgICB0ZXN0X21hdGNoOiBmdW5jdGlvbihyZWdleF9tYXRjaF9hcnJheSwgcnVsZV9pbmRleCksXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uKCksXG4gICAgICAgIGxleDogZnVuY3Rpb24oKSxcbiAgICAgICAgYmVnaW46IGZ1bmN0aW9uKGNvbmRpdGlvbiksXG4gICAgICAgIHBvcFN0YXRlOiBmdW5jdGlvbigpLFxuICAgICAgICBfY3VycmVudFJ1bGVzOiBmdW5jdGlvbigpLFxuICAgICAgICB0b3BTdGF0ZTogZnVuY3Rpb24oKSxcbiAgICAgICAgcHVzaFN0YXRlOiBmdW5jdGlvbihjb25kaXRpb24pLFxuXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgIHJhbmdlczogYm9vbGVhbiAgICAgICAgICAgKG9wdGlvbmFsOiB0cnVlID09PiB0b2tlbiBsb2NhdGlvbiBpbmZvIHdpbGwgaW5jbHVkZSBhIC5yYW5nZVtdIG1lbWJlcilcbiAgICAgICAgICAgIGZsZXg6IGJvb2xlYW4gICAgICAgICAgICAgKG9wdGlvbmFsOiB0cnVlID09PiBmbGV4LWxpa2UgbGV4aW5nIGJlaGF2aW91ciB3aGVyZSB0aGUgcnVsZXMgYXJlIHRlc3RlZCBleGhhdXN0aXZlbHkgdG8gZmluZCB0aGUgbG9uZ2VzdCBtYXRjaClcbiAgICAgICAgICAgIGJhY2t0cmFja19sZXhlcjogYm9vbGVhbiAgKG9wdGlvbmFsOiB0cnVlID09PiBsZXhlciByZWdleGVzIGFyZSB0ZXN0ZWQgaW4gb3JkZXIgYW5kIGZvciBlYWNoIG1hdGNoaW5nIHJlZ2V4IHRoZSBhY3Rpb24gY29kZSBpcyBpbnZva2VkOyB0aGUgbGV4ZXIgdGVybWluYXRlcyB0aGUgc2NhbiB3aGVuIGEgdG9rZW4gaXMgcmV0dXJuZWQgYnkgdGhlIGFjdGlvbiBjb2RlKVxuICAgICAgICB9LFxuXG4gICAgICAgIHBlcmZvcm1BY3Rpb246IGZ1bmN0aW9uKHl5LCB5eV8sICRhdm9pZGluZ19uYW1lX2NvbGxpc2lvbnMsIFlZX1NUQVJUKSxcbiAgICAgICAgcnVsZXM6IFsuLi5dLFxuICAgICAgICBjb25kaXRpb25zOiB7YXNzb2NpYXRpdmUgbGlzdDogbmFtZSA9PT4gc2V0fSxcbiAgICB9XG4gIH1cblxuXG4gIHRva2VuIGxvY2F0aW9uIGluZm8gKEAkLCBfJCwgZXRjLik6IHtcbiAgICBmaXJzdF9saW5lOiBuLFxuICAgIGxhc3RfbGluZTogbixcbiAgICBmaXJzdF9jb2x1bW46IG4sXG4gICAgbGFzdF9jb2x1bW46IG4sXG4gICAgcmFuZ2U6IFtzdGFydF9udW1iZXIsIGVuZF9udW1iZXJdICAgICAgICh3aGVyZSB0aGUgbnVtYmVycyBhcmUgaW5kZXhlcyBpbnRvIHRoZSBpbnB1dCBzdHJpbmcsIHJlZ3VsYXIgemVyby1iYXNlZClcbiAgfVxuXG5cbiAgdGhlIHBhcnNlRXJyb3IgZnVuY3Rpb24gcmVjZWl2ZXMgYSAnaGFzaCcgb2JqZWN0IHdpdGggdGhlc2UgbWVtYmVycyBmb3IgbGV4ZXIgYW5kIHBhcnNlciBlcnJvcnM6IHtcbiAgICB0ZXh0OiAgICAgICAgKG1hdGNoZWQgdGV4dClcbiAgICB0b2tlbjogICAgICAgKHRoZSBwcm9kdWNlZCB0ZXJtaW5hbCB0b2tlbiwgaWYgYW55KVxuICAgIGxpbmU6ICAgICAgICAoeXlsaW5lbm8pXG4gIH1cbiAgd2hpbGUgcGFyc2VyIChncmFtbWFyKSBlcnJvcnMgd2lsbCBhbHNvIHByb3ZpZGUgdGhlc2UgbWVtYmVycywgaS5lLiBwYXJzZXIgZXJyb3JzIGRlbGl2ZXIgYSBzdXBlcnNldCBvZiBhdHRyaWJ1dGVzOiB7XG4gICAgbG9jOiAgICAgICAgICh5eWxsb2MpXG4gICAgZXhwZWN0ZWQ6ICAgIChzdHJpbmcgZGVzY3JpYmluZyB0aGUgc2V0IG9mIGV4cGVjdGVkIHRva2VucylcbiAgICByZWNvdmVyYWJsZTogKGJvb2xlYW46IFRSVUUgd2hlbiB0aGUgcGFyc2VyIGhhcyBhIGVycm9yIHJlY292ZXJ5IHJ1bGUgYXZhaWxhYmxlIGZvciB0aGlzIHBhcnRpY3VsYXIgZXJyb3IpXG4gIH1cbiovXG52YXIgcGFyc2VyID0gKGZ1bmN0aW9uKCl7XG52YXIgbz1mdW5jdGlvbihrLHYsbyxsKXtmb3Iobz1vfHx7fSxsPWsubGVuZ3RoO2wtLTtvW2tbbF1dPXYpO3JldHVybiBvfSwkVjA9WzEsM10sJFYxPVsxLDRdLCRWMj1bMSwxOF0sJFYzPVsxLDEzXSwkVjQ9WzEsMTRdLCRWNT1bMSwxNV0sJFY2PVsxLDE2XSwkVjc9WzEsMTddLCRWOD1bMSwyMF0sJFY5PVsxLDIxXSwkVmE9WzUsNiw3LDEwXSwkVmI9WzUsNiw3LDEwLDE1LDE2LDE3LDE4LDE5LDIwLDIxXSwkVmM9WzUsNiw3LDEwLDE1LDE2LDE3LDE4LDE5LDIwLDIxLDI1XTtcbnZhciBwYXJzZXIgPSB7dHJhY2U6IGZ1bmN0aW9uIHRyYWNlKCkgeyB9LFxueXk6IHt9LFxuc3ltYm9sc186IHtcImVycm9yXCI6MixcInJlc3VsdFwiOjMsXCJzZWFyY2hfY29uZGl0aW9uXCI6NCxcIkVPRlwiOjUsXCJPUlwiOjYsXCJBTkRcIjo3LFwiTk9UXCI6OCxcIihcIjo5LFwiKVwiOjEwLFwicHJlZGljYXRlXCI6MTEsXCJjb21wYXJpc29uX3ByZWRpY2F0ZVwiOjEyLFwidHJ1dGh5X3ByZWRpY2F0ZVwiOjEzLFwic2NhbGFyX2V4cFwiOjE0LFwiRVFcIjoxNSxcIkRFUVwiOjE2LFwiTkVRXCI6MTcsXCJMVFwiOjE4LFwiTFRFXCI6MTksXCJHVFwiOjIwLFwiR1RFXCI6MjEsXCJhdG9tXCI6MjIsXCJmaWVsZF9yZWZcIjoyMyxcImxpdGVyYWxcIjoyNCxcIkRPVFwiOjI1LFwiZmllbGRfbmFtZVwiOjI2LFwiTkFNRVwiOjI3LFwiU1RSSU5HXCI6MjgsXCJOVU1FUklDXCI6MjksXCJUUlVFXCI6MzAsXCJGQUxTRVwiOjMxLFwiTlVMTFwiOjMyLFwiJGFjY2VwdFwiOjAsXCIkZW5kXCI6MX0sXG50ZXJtaW5hbHNfOiB7MjpcImVycm9yXCIsNTpcIkVPRlwiLDY6XCJPUlwiLDc6XCJBTkRcIiw4OlwiTk9UXCIsOTpcIihcIiwxMDpcIilcIiwxNTpcIkVRXCIsMTY6XCJERVFcIiwxNzpcIk5FUVwiLDE4OlwiTFRcIiwxOTpcIkxURVwiLDIwOlwiR1RcIiwyMTpcIkdURVwiLDI1OlwiRE9UXCIsMjc6XCJOQU1FXCIsMjg6XCJTVFJJTkdcIiwyOTpcIk5VTUVSSUNcIiwzMDpcIlRSVUVcIiwzMTpcIkZBTFNFXCIsMzI6XCJOVUxMXCJ9LFxucHJvZHVjdGlvbnNfOiBbMCxbMywyXSxbNCwzXSxbNCwzXSxbNCwyXSxbNCwzXSxbNCwxXSxbMTEsMV0sWzExLDFdLFsxMiwzXSxbMTIsM10sWzEyLDNdLFsxMiwzXSxbMTIsM10sWzEyLDNdLFsxMiwzXSxbMTMsMV0sWzE0LDFdLFsxNCwxXSxbMjIsMV0sWzIzLDNdLFsyMywxXSxbMjYsMV0sWzI0LDFdLFsyNCwxXSxbMjQsMV0sWzI0LDFdLFsyNCwxXV0sXG5wZXJmb3JtQWN0aW9uOiBmdW5jdGlvbiBhbm9ueW1vdXMoeXl0ZXh0LCB5eWxlbmcsIHl5bGluZW5vLCB5eSwgeXlzdGF0ZSAvKiBhY3Rpb25bMV0gKi8sICQkIC8qIHZzdGFjayAqLywgXyQgLyogbHN0YWNrICovKSB7XG4vKiB0aGlzID09IHl5dmFsICovXG5cbnZhciAkMCA9ICQkLmxlbmd0aCAtIDE7XG5zd2l0Y2ggKHl5c3RhdGUpIHtcbmNhc2UgMTpcbnJldHVybiAkJFskMC0xXTtcbmJyZWFrO1xuY2FzZSAyOlxudGhpcy4kID0gJCRbJDAtMl0gfHwgJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDM6XG50aGlzLiQgPSAkJFskMC0yXSAmJiAkJFskMF07XG5icmVhaztcbmNhc2UgNDpcbnRoaXMuJCA9ICEkJFskMF07XG5icmVhaztcbmNhc2UgNTpcbnRoaXMuJCA9ICQkWyQwLTFdO1xuYnJlYWs7XG5jYXNlIDY6IGNhc2UgNzogY2FzZSA4OiBjYXNlIDE3OiBjYXNlIDE4OiBjYXNlIDE5OlxudGhpcy4kID0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDk6XG50aGlzLiQgPSAkJFskMC0yXSA9PT0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDEwOlxudGhyb3cgbmV3IEVycm9yKCdcIj09XCIgaXMgbm90IGFsbG93ZWQsIHVzZSBcIj1cIicpO1xuYnJlYWs7XG5jYXNlIDExOlxudGhpcy4kID0gJCRbJDAtMl0gIT09ICQkWyQwXTtcbmJyZWFrO1xuY2FzZSAxMjpcbnRoaXMuJCA9IHR5cGVvZiAkJFskMC0yXSA9PSB0eXBlb2YgJCRbJDBdICYmICQkWyQwLTJdIDwgJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDEzOlxudGhpcy4kID0gdHlwZW9mICQkWyQwLTJdID09IHR5cGVvZiAkJFskMF0gJiYgJCRbJDAtMl0gPD0gJCRbJDBdO1xuYnJlYWs7XG5jYXNlIDE0OlxudGhpcy4kID0gdHlwZW9mICQkWyQwLTJdID09IHR5cGVvZiAkJFskMF0gJiYgJCRbJDAtMl0gPiAkJFskMF07XG5icmVhaztcbmNhc2UgMTU6XG50aGlzLiQgPSB0eXBlb2YgJCRbJDAtMl0gPT0gdHlwZW9mICQkWyQwXSAmJiAkJFskMC0yXSA+PSAkJFskMF07XG5icmVhaztcbmNhc2UgMTY6XG50aGlzLiQgPSAoJCRbJDBdICE9PSB1bmRlZmluZWQgJiYgJCRbJDBdICE9PSBudWxsXG4gICAgICAgICAgICAgICAgJiYgJCRbJDBdICE9PSAnJyAmJiAkJFskMF0gIT09IDAgJiYgJCRbJDBdICE9PSBmYWxzZSk7XG5icmVhaztcbmNhc2UgMjA6XG50aGlzLiQgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoJCRbJDAtMl0pID09ICdbb2JqZWN0IE9iamVjdF0nICYmICQkWyQwLTJdLmhhc093blByb3BlcnR5KCQkWyQwXSkgPyAkJFskMC0yXVskJFskMF1dIDogbnVsbDtcbmJyZWFrO1xuY2FzZSAyMTpcbnRoaXMuJCA9IHl5WyQkWyQwXV0gIT09IHVuZGVmaW5lZCA/IHl5WyQkWyQwXV0gOiBudWxsO1xuYnJlYWs7XG5jYXNlIDIyOlxudGhpcy4kID0geXl0ZXh0O1xuYnJlYWs7XG5jYXNlIDIzOlxudGhpcy4kID0geXl0ZXh0LnN1YnN0cmluZygxLCB5eXRleHQubGVuZ3RoIC0gMSk7XG5icmVhaztcbmNhc2UgMjQ6XG50aGlzLiQgPSBOdW1iZXIoeXl0ZXh0KTtcbmJyZWFrO1xuY2FzZSAyNTpcbnRoaXMuJCA9IHRydWVcbmJyZWFrO1xuY2FzZSAyNjpcbnRoaXMuJCA9IGZhbHNlXG5icmVhaztcbmNhc2UgMjc6XG50aGlzLiQgPSBudWxsXG5icmVhaztcbn1cbn0sXG50YWJsZTogW3szOjEsNDoyLDg6JFYwLDk6JFYxLDExOjUsMTI6NiwxMzo3LDE0OjgsMjI6OSwyMzoxMCwyNDoxMSwyNjoxMiwyNzokVjIsMjg6JFYzLDI5OiRWNCwzMDokVjUsMzE6JFY2LDMyOiRWN30sezE6WzNdfSx7NTpbMSwxOV0sNjokVjgsNzokVjl9LHs0OjIyLDg6JFYwLDk6JFYxLDExOjUsMTI6NiwxMzo3LDE0OjgsMjI6OSwyMzoxMCwyNDoxMSwyNjoxMiwyNzokVjIsMjg6JFYzLDI5OiRWNCwzMDokVjUsMzE6JFY2LDMyOiRWN30sezQ6MjMsODokVjAsOTokVjEsMTE6NSwxMjo2LDEzOjcsMTQ6OCwyMjo5LDIzOjEwLDI0OjExLDI2OjEyLDI3OiRWMiwyODokVjMsMjk6JFY0LDMwOiRWNSwzMTokVjYsMzI6JFY3fSxvKCRWYSxbMiw2XSksbygkVmEsWzIsN10pLG8oJFZhLFsyLDhdKSxvKCRWYSxbMiwxNl0sezE1OlsxLDI0XSwxNjpbMSwyNV0sMTc6WzEsMjZdLDE4OlsxLDI3XSwxOTpbMSwyOF0sMjA6WzEsMjldLDIxOlsxLDMwXX0pLG8oJFZiLFsyLDE3XSksbygkVmIsWzIsMThdLHsyNTpbMSwzMV19KSxvKCRWYixbMiwxOV0pLG8oJFZjLFsyLDIxXSksbygkVmIsWzIsMjNdKSxvKCRWYixbMiwyNF0pLG8oJFZiLFsyLDI1XSksbygkVmIsWzIsMjZdKSxvKCRWYixbMiwyN10pLG8oJFZjLFsyLDIyXSksezE6WzIsMV19LHs0OjMyLDg6JFYwLDk6JFYxLDExOjUsMTI6NiwxMzo3LDE0OjgsMjI6OSwyMzoxMCwyNDoxMSwyNjoxMiwyNzokVjIsMjg6JFYzLDI5OiRWNCwzMDokVjUsMzE6JFY2LDMyOiRWN30sezQ6MzMsODokVjAsOTokVjEsMTE6NSwxMjo2LDEzOjcsMTQ6OCwyMjo5LDIzOjEwLDI0OjExLDI2OjEyLDI3OiRWMiwyODokVjMsMjk6JFY0LDMwOiRWNSwzMTokVjYsMzI6JFY3fSxvKCRWYSxbMiw0XSksezY6JFY4LDc6JFY5LDEwOlsxLDM0XX0sezE0OjM1LDIyOjksMjM6MTAsMjQ6MTEsMjY6MTIsMjc6JFYyLDI4OiRWMywyOTokVjQsMzA6JFY1LDMxOiRWNiwzMjokVjd9LHsxNDozNiwyMjo5LDIzOjEwLDI0OjExLDI2OjEyLDI3OiRWMiwyODokVjMsMjk6JFY0LDMwOiRWNSwzMTokVjYsMzI6JFY3fSx7MTQ6MzcsMjI6OSwyMzoxMCwyNDoxMSwyNjoxMiwyNzokVjIsMjg6JFYzLDI5OiRWNCwzMDokVjUsMzE6JFY2LDMyOiRWN30sezE0OjM4LDIyOjksMjM6MTAsMjQ6MTEsMjY6MTIsMjc6JFYyLDI4OiRWMywyOTokVjQsMzA6JFY1LDMxOiRWNiwzMjokVjd9LHsxNDozOSwyMjo5LDIzOjEwLDI0OjExLDI2OjEyLDI3OiRWMiwyODokVjMsMjk6JFY0LDMwOiRWNSwzMTokVjYsMzI6JFY3fSx7MTQ6NDAsMjI6OSwyMzoxMCwyNDoxMSwyNjoxMiwyNzokVjIsMjg6JFYzLDI5OiRWNCwzMDokVjUsMzE6JFY2LDMyOiRWN30sezE0OjQxLDIyOjksMjM6MTAsMjQ6MTEsMjY6MTIsMjc6JFYyLDI4OiRWMywyOTokVjQsMzA6JFY1LDMxOiRWNiwzMjokVjd9LHsyNjo0MiwyNzokVjJ9LG8oWzUsNiwxMF0sWzIsMl0sezc6JFY5fSksbygkVmEsWzIsM10pLG8oJFZhLFsyLDVdKSxvKCRWYSxbMiw5XSksbygkVmEsWzIsMTBdKSxvKCRWYSxbMiwxMV0pLG8oJFZhLFsyLDEyXSksbygkVmEsWzIsMTNdKSxvKCRWYSxbMiwxNF0pLG8oJFZhLFsyLDE1XSksbygkVmMsWzIsMjBdKV0sXG5kZWZhdWx0QWN0aW9uczogezE5OlsyLDFdfSxcbnBhcnNlRXJyb3I6IGZ1bmN0aW9uIHBhcnNlRXJyb3Ioc3RyLCBoYXNoKSB7XG4gICAgaWYgKGhhc2gucmVjb3ZlcmFibGUpIHtcbiAgICAgICAgdGhpcy50cmFjZShzdHIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBlcnJvciA9IG5ldyBFcnJvcihzdHIpO1xuICAgICAgICBlcnJvci5oYXNoID0gaGFzaDtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxufSxcbnBhcnNlOiBmdW5jdGlvbiBwYXJzZShpbnB1dCkge1xuICAgIHZhciBzZWxmID0gdGhpcywgc3RhY2sgPSBbMF0sIHRzdGFjayA9IFtdLCB2c3RhY2sgPSBbbnVsbF0sIGxzdGFjayA9IFtdLCB0YWJsZSA9IHRoaXMudGFibGUsIHl5dGV4dCA9ICcnLCB5eWxpbmVubyA9IDAsIHl5bGVuZyA9IDAsIHJlY292ZXJpbmcgPSAwLCBURVJST1IgPSAyLCBFT0YgPSAxO1xuICAgIHZhciBhcmdzID0gbHN0YWNrLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICB2YXIgbGV4ZXIgPSBPYmplY3QuY3JlYXRlKHRoaXMubGV4ZXIpO1xuICAgIHZhciBzaGFyZWRTdGF0ZSA9IHsgeXk6IHt9IH07XG4gICAgZm9yICh2YXIgayBpbiB0aGlzLnl5KSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy55eSwgaykpIHtcbiAgICAgICAgICAgIHNoYXJlZFN0YXRlLnl5W2tdID0gdGhpcy55eVtrXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXhlci5zZXRJbnB1dChpbnB1dCwgc2hhcmVkU3RhdGUueXkpO1xuICAgIHNoYXJlZFN0YXRlLnl5LmxleGVyID0gbGV4ZXI7XG4gICAgc2hhcmVkU3RhdGUueXkucGFyc2VyID0gdGhpcztcbiAgICBpZiAodHlwZW9mIGxleGVyLnl5bGxvYyA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBsZXhlci55eWxsb2MgPSB7fTtcbiAgICB9XG4gICAgdmFyIHl5bG9jID0gbGV4ZXIueXlsbG9jO1xuICAgIGxzdGFjay5wdXNoKHl5bG9jKTtcbiAgICB2YXIgcmFuZ2VzID0gbGV4ZXIub3B0aW9ucyAmJiBsZXhlci5vcHRpb25zLnJhbmdlcztcbiAgICBpZiAodHlwZW9mIHNoYXJlZFN0YXRlLnl5LnBhcnNlRXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy5wYXJzZUVycm9yID0gc2hhcmVkU3RhdGUueXkucGFyc2VFcnJvcjtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBhcnNlRXJyb3IgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykucGFyc2VFcnJvcjtcbiAgICB9XG4gICAgZnVuY3Rpb24gcG9wU3RhY2sobikge1xuICAgICAgICBzdGFjay5sZW5ndGggPSBzdGFjay5sZW5ndGggLSAyICogbjtcbiAgICAgICAgdnN0YWNrLmxlbmd0aCA9IHZzdGFjay5sZW5ndGggLSBuO1xuICAgICAgICBsc3RhY2subGVuZ3RoID0gbHN0YWNrLmxlbmd0aCAtIG47XG4gICAgfVxuICAgIF90b2tlbl9zdGFjazpcbiAgICAgICAgdmFyIGxleCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0b2tlbjtcbiAgICAgICAgICAgIHRva2VuID0gbGV4ZXIubGV4KCkgfHwgRU9GO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0b2tlbiAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICB0b2tlbiA9IHNlbGYuc3ltYm9sc19bdG9rZW5dIHx8IHRva2VuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRva2VuO1xuICAgICAgICB9O1xuICAgIHZhciBzeW1ib2wsIHByZUVycm9yU3ltYm9sLCBzdGF0ZSwgYWN0aW9uLCBhLCByLCB5eXZhbCA9IHt9LCBwLCBsZW4sIG5ld1N0YXRlLCBleHBlY3RlZDtcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBzdGF0ZSA9IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAodGhpcy5kZWZhdWx0QWN0aW9uc1tzdGF0ZV0pIHtcbiAgICAgICAgICAgIGFjdGlvbiA9IHRoaXMuZGVmYXVsdEFjdGlvbnNbc3RhdGVdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHN5bWJvbCA9PT0gbnVsbCB8fCB0eXBlb2Ygc3ltYm9sID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgc3ltYm9sID0gbGV4KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhY3Rpb24gPSB0YWJsZVtzdGF0ZV0gJiYgdGFibGVbc3RhdGVdW3N5bWJvbF07XG4gICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhY3Rpb24gPT09ICd1bmRlZmluZWQnIHx8ICFhY3Rpb24ubGVuZ3RoIHx8ICFhY3Rpb25bMF0pIHtcbiAgICAgICAgICAgICAgICB2YXIgZXJyU3RyID0gJyc7XG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHAgaW4gdGFibGVbc3RhdGVdKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRlcm1pbmFsc19bcF0gJiYgcCA+IFRFUlJPUikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWQucHVzaCgnXFwnJyArIHRoaXMudGVybWluYWxzX1twXSArICdcXCcnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobGV4ZXIuc2hvd1Bvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGVyclN0ciA9ICdQYXJzZSBlcnJvciBvbiBsaW5lICcgKyAoeXlsaW5lbm8gKyAxKSArICc6XFxuJyArIGxleGVyLnNob3dQb3NpdGlvbigpICsgJ1xcbkV4cGVjdGluZyAnICsgZXhwZWN0ZWQuam9pbignLCAnKSArICcsIGdvdCBcXCcnICsgKHRoaXMudGVybWluYWxzX1tzeW1ib2xdIHx8IHN5bWJvbCkgKyAnXFwnJztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlcnJTdHIgPSAnUGFyc2UgZXJyb3Igb24gbGluZSAnICsgKHl5bGluZW5vICsgMSkgKyAnOiBVbmV4cGVjdGVkICcgKyAoc3ltYm9sID09IEVPRiA/ICdlbmQgb2YgaW5wdXQnIDogJ1xcJycgKyAodGhpcy50ZXJtaW5hbHNfW3N5bWJvbF0gfHwgc3ltYm9sKSArICdcXCcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJzZUVycm9yKGVyclN0ciwge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBsZXhlci5tYXRjaCxcbiAgICAgICAgICAgICAgICAgICAgdG9rZW46IHRoaXMudGVybWluYWxzX1tzeW1ib2xdIHx8IHN5bWJvbCxcbiAgICAgICAgICAgICAgICAgICAgbGluZTogbGV4ZXIueXlsaW5lbm8sXG4gICAgICAgICAgICAgICAgICAgIGxvYzogeXlsb2MsXG4gICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBleHBlY3RlZFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICBpZiAoYWN0aW9uWzBdIGluc3RhbmNlb2YgQXJyYXkgJiYgYWN0aW9uLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUGFyc2UgRXJyb3I6IG11bHRpcGxlIGFjdGlvbnMgcG9zc2libGUgYXQgc3RhdGU6ICcgKyBzdGF0ZSArICcsIHRva2VuOiAnICsgc3ltYm9sKTtcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKGFjdGlvblswXSkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBzdGFjay5wdXNoKHN5bWJvbCk7XG4gICAgICAgICAgICB2c3RhY2sucHVzaChsZXhlci55eXRleHQpO1xuICAgICAgICAgICAgbHN0YWNrLnB1c2gobGV4ZXIueXlsbG9jKTtcbiAgICAgICAgICAgIHN0YWNrLnB1c2goYWN0aW9uWzFdKTtcbiAgICAgICAgICAgIHN5bWJvbCA9IG51bGw7XG4gICAgICAgICAgICBpZiAoIXByZUVycm9yU3ltYm9sKSB7XG4gICAgICAgICAgICAgICAgeXlsZW5nID0gbGV4ZXIueXlsZW5nO1xuICAgICAgICAgICAgICAgIHl5dGV4dCA9IGxleGVyLnl5dGV4dDtcbiAgICAgICAgICAgICAgICB5eWxpbmVubyA9IGxleGVyLnl5bGluZW5vO1xuICAgICAgICAgICAgICAgIHl5bG9jID0gbGV4ZXIueXlsbG9jO1xuICAgICAgICAgICAgICAgIGlmIChyZWNvdmVyaW5nID4gMCkge1xuICAgICAgICAgICAgICAgICAgICByZWNvdmVyaW5nLS07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzeW1ib2wgPSBwcmVFcnJvclN5bWJvbDtcbiAgICAgICAgICAgICAgICBwcmVFcnJvclN5bWJvbCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgbGVuID0gdGhpcy5wcm9kdWN0aW9uc19bYWN0aW9uWzFdXVsxXTtcbiAgICAgICAgICAgIHl5dmFsLiQgPSB2c3RhY2tbdnN0YWNrLmxlbmd0aCAtIGxlbl07XG4gICAgICAgICAgICB5eXZhbC5fJCA9IHtcbiAgICAgICAgICAgICAgICBmaXJzdF9saW5lOiBsc3RhY2tbbHN0YWNrLmxlbmd0aCAtIChsZW4gfHwgMSldLmZpcnN0X2xpbmUsXG4gICAgICAgICAgICAgICAgbGFzdF9saW5lOiBsc3RhY2tbbHN0YWNrLmxlbmd0aCAtIDFdLmxhc3RfbGluZSxcbiAgICAgICAgICAgICAgICBmaXJzdF9jb2x1bW46IGxzdGFja1tsc3RhY2subGVuZ3RoIC0gKGxlbiB8fCAxKV0uZmlyc3RfY29sdW1uLFxuICAgICAgICAgICAgICAgIGxhc3RfY29sdW1uOiBsc3RhY2tbbHN0YWNrLmxlbmd0aCAtIDFdLmxhc3RfY29sdW1uXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHJhbmdlcykge1xuICAgICAgICAgICAgICAgIHl5dmFsLl8kLnJhbmdlID0gW1xuICAgICAgICAgICAgICAgICAgICBsc3RhY2tbbHN0YWNrLmxlbmd0aCAtIChsZW4gfHwgMSldLnJhbmdlWzBdLFxuICAgICAgICAgICAgICAgICAgICBsc3RhY2tbbHN0YWNrLmxlbmd0aCAtIDFdLnJhbmdlWzFdXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHIgPSB0aGlzLnBlcmZvcm1BY3Rpb24uYXBwbHkoeXl2YWwsIFtcbiAgICAgICAgICAgICAgICB5eXRleHQsXG4gICAgICAgICAgICAgICAgeXlsZW5nLFxuICAgICAgICAgICAgICAgIHl5bGluZW5vLFxuICAgICAgICAgICAgICAgIHNoYXJlZFN0YXRlLnl5LFxuICAgICAgICAgICAgICAgIGFjdGlvblsxXSxcbiAgICAgICAgICAgICAgICB2c3RhY2ssXG4gICAgICAgICAgICAgICAgbHN0YWNrXG4gICAgICAgICAgICBdLmNvbmNhdChhcmdzKSk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobGVuKSB7XG4gICAgICAgICAgICAgICAgc3RhY2sgPSBzdGFjay5zbGljZSgwLCAtMSAqIGxlbiAqIDIpO1xuICAgICAgICAgICAgICAgIHZzdGFjayA9IHZzdGFjay5zbGljZSgwLCAtMSAqIGxlbik7XG4gICAgICAgICAgICAgICAgbHN0YWNrID0gbHN0YWNrLnNsaWNlKDAsIC0xICogbGVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0YWNrLnB1c2godGhpcy5wcm9kdWN0aW9uc19bYWN0aW9uWzFdXVswXSk7XG4gICAgICAgICAgICB2c3RhY2sucHVzaCh5eXZhbC4kKTtcbiAgICAgICAgICAgIGxzdGFjay5wdXNoKHl5dmFsLl8kKTtcbiAgICAgICAgICAgIG5ld1N0YXRlID0gdGFibGVbc3RhY2tbc3RhY2subGVuZ3RoIC0gMl1dW3N0YWNrW3N0YWNrLmxlbmd0aCAtIDFdXTtcbiAgICAgICAgICAgIHN0YWNrLnB1c2gobmV3U3RhdGUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufX07XG4vKiBnZW5lcmF0ZWQgYnkgamlzb24tbGV4IDAuMy40ICovXG52YXIgbGV4ZXIgPSAoZnVuY3Rpb24oKXtcbnZhciBsZXhlciA9ICh7XG5cbkVPRjoxLFxuXG5wYXJzZUVycm9yOmZ1bmN0aW9uIHBhcnNlRXJyb3Ioc3RyLCBoYXNoKSB7XG4gICAgICAgIGlmICh0aGlzLnl5LnBhcnNlcikge1xuICAgICAgICAgICAgdGhpcy55eS5wYXJzZXIucGFyc2VFcnJvcihzdHIsIGhhc2gpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHN0cik7XG4gICAgICAgIH1cbiAgICB9LFxuXG4vLyByZXNldHMgdGhlIGxleGVyLCBzZXRzIG5ldyBpbnB1dFxuc2V0SW5wdXQ6ZnVuY3Rpb24gKGlucHV0LCB5eSkge1xuICAgICAgICB0aGlzLnl5ID0geXkgfHwgdGhpcy55eSB8fCB7fTtcbiAgICAgICAgdGhpcy5faW5wdXQgPSBpbnB1dDtcbiAgICAgICAgdGhpcy5fbW9yZSA9IHRoaXMuX2JhY2t0cmFjayA9IHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnl5bGluZW5vID0gdGhpcy55eWxlbmcgPSAwO1xuICAgICAgICB0aGlzLnl5dGV4dCA9IHRoaXMubWF0Y2hlZCA9IHRoaXMubWF0Y2ggPSAnJztcbiAgICAgICAgdGhpcy5jb25kaXRpb25TdGFjayA9IFsnSU5JVElBTCddO1xuICAgICAgICB0aGlzLnl5bGxvYyA9IHtcbiAgICAgICAgICAgIGZpcnN0X2xpbmU6IDEsXG4gICAgICAgICAgICBmaXJzdF9jb2x1bW46IDAsXG4gICAgICAgICAgICBsYXN0X2xpbmU6IDEsXG4gICAgICAgICAgICBsYXN0X2NvbHVtbjogMFxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnJhbmdlcykge1xuICAgICAgICAgICAgdGhpcy55eWxsb2MucmFuZ2UgPSBbMCwwXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9mZnNldCA9IDA7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbi8vIGNvbnN1bWVzIGFuZCByZXR1cm5zIG9uZSBjaGFyIGZyb20gdGhlIGlucHV0XG5pbnB1dDpmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjaCA9IHRoaXMuX2lucHV0WzBdO1xuICAgICAgICB0aGlzLnl5dGV4dCArPSBjaDtcbiAgICAgICAgdGhpcy55eWxlbmcrKztcbiAgICAgICAgdGhpcy5vZmZzZXQrKztcbiAgICAgICAgdGhpcy5tYXRjaCArPSBjaDtcbiAgICAgICAgdGhpcy5tYXRjaGVkICs9IGNoO1xuICAgICAgICB2YXIgbGluZXMgPSBjaC5tYXRjaCgvKD86XFxyXFxuP3xcXG4pLiovZyk7XG4gICAgICAgIGlmIChsaW5lcykge1xuICAgICAgICAgICAgdGhpcy55eWxpbmVubysrO1xuICAgICAgICAgICAgdGhpcy55eWxsb2MubGFzdF9saW5lKys7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnl5bGxvYy5sYXN0X2NvbHVtbisrO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMucmFuZ2VzKSB7XG4gICAgICAgICAgICB0aGlzLnl5bGxvYy5yYW5nZVsxXSsrO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5faW5wdXQgPSB0aGlzLl9pbnB1dC5zbGljZSgxKTtcbiAgICAgICAgcmV0dXJuIGNoO1xuICAgIH0sXG5cbi8vIHVuc2hpZnRzIG9uZSBjaGFyIChvciBhIHN0cmluZykgaW50byB0aGUgaW5wdXRcbnVucHV0OmZ1bmN0aW9uIChjaCkge1xuICAgICAgICB2YXIgbGVuID0gY2gubGVuZ3RoO1xuICAgICAgICB2YXIgbGluZXMgPSBjaC5zcGxpdCgvKD86XFxyXFxuP3xcXG4pL2cpO1xuXG4gICAgICAgIHRoaXMuX2lucHV0ID0gY2ggKyB0aGlzLl9pbnB1dDtcbiAgICAgICAgdGhpcy55eXRleHQgPSB0aGlzLnl5dGV4dC5zdWJzdHIoMCwgdGhpcy55eXRleHQubGVuZ3RoIC0gbGVuKTtcbiAgICAgICAgLy90aGlzLnl5bGVuZyAtPSBsZW47XG4gICAgICAgIHRoaXMub2Zmc2V0IC09IGxlbjtcbiAgICAgICAgdmFyIG9sZExpbmVzID0gdGhpcy5tYXRjaC5zcGxpdCgvKD86XFxyXFxuP3xcXG4pL2cpO1xuICAgICAgICB0aGlzLm1hdGNoID0gdGhpcy5tYXRjaC5zdWJzdHIoMCwgdGhpcy5tYXRjaC5sZW5ndGggLSAxKTtcbiAgICAgICAgdGhpcy5tYXRjaGVkID0gdGhpcy5tYXRjaGVkLnN1YnN0cigwLCB0aGlzLm1hdGNoZWQubGVuZ3RoIC0gMSk7XG5cbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIHRoaXMueXlsaW5lbm8gLT0gbGluZXMubGVuZ3RoIC0gMTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgciA9IHRoaXMueXlsbG9jLnJhbmdlO1xuXG4gICAgICAgIHRoaXMueXlsbG9jID0ge1xuICAgICAgICAgICAgZmlyc3RfbGluZTogdGhpcy55eWxsb2MuZmlyc3RfbGluZSxcbiAgICAgICAgICAgIGxhc3RfbGluZTogdGhpcy55eWxpbmVubyArIDEsXG4gICAgICAgICAgICBmaXJzdF9jb2x1bW46IHRoaXMueXlsbG9jLmZpcnN0X2NvbHVtbixcbiAgICAgICAgICAgIGxhc3RfY29sdW1uOiBsaW5lcyA/XG4gICAgICAgICAgICAgICAgKGxpbmVzLmxlbmd0aCA9PT0gb2xkTGluZXMubGVuZ3RoID8gdGhpcy55eWxsb2MuZmlyc3RfY29sdW1uIDogMClcbiAgICAgICAgICAgICAgICAgKyBvbGRMaW5lc1tvbGRMaW5lcy5sZW5ndGggLSBsaW5lcy5sZW5ndGhdLmxlbmd0aCAtIGxpbmVzWzBdLmxlbmd0aCA6XG4gICAgICAgICAgICAgIHRoaXMueXlsbG9jLmZpcnN0X2NvbHVtbiAtIGxlblxuICAgICAgICB9O1xuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMucmFuZ2VzKSB7XG4gICAgICAgICAgICB0aGlzLnl5bGxvYy5yYW5nZSA9IFtyWzBdLCByWzBdICsgdGhpcy55eWxlbmcgLSBsZW5dO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMueXlsZW5nID0gdGhpcy55eXRleHQubGVuZ3RoO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4vLyBXaGVuIGNhbGxlZCBmcm9tIGFjdGlvbiwgY2FjaGVzIG1hdGNoZWQgdGV4dCBhbmQgYXBwZW5kcyBpdCBvbiBuZXh0IGFjdGlvblxubW9yZTpmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX21vcmUgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4vLyBXaGVuIGNhbGxlZCBmcm9tIGFjdGlvbiwgc2lnbmFscyB0aGUgbGV4ZXIgdGhhdCB0aGlzIHJ1bGUgZmFpbHMgdG8gbWF0Y2ggdGhlIGlucHV0LCBzbyB0aGUgbmV4dCBtYXRjaGluZyBydWxlIChyZWdleCkgc2hvdWxkIGJlIHRlc3RlZCBpbnN0ZWFkLlxucmVqZWN0OmZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5iYWNrdHJhY2tfbGV4ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX2JhY2t0cmFjayA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUVycm9yKCdMZXhpY2FsIGVycm9yIG9uIGxpbmUgJyArICh0aGlzLnl5bGluZW5vICsgMSkgKyAnLiBZb3UgY2FuIG9ubHkgaW52b2tlIHJlamVjdCgpIGluIHRoZSBsZXhlciB3aGVuIHRoZSBsZXhlciBpcyBvZiB0aGUgYmFja3RyYWNraW5nIHBlcnN1YXNpb24gKG9wdGlvbnMuYmFja3RyYWNrX2xleGVyID0gdHJ1ZSkuXFxuJyArIHRoaXMuc2hvd1Bvc2l0aW9uKCksIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIlwiLFxuICAgICAgICAgICAgICAgIHRva2VuOiBudWxsLFxuICAgICAgICAgICAgICAgIGxpbmU6IHRoaXMueXlsaW5lbm9cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuLy8gcmV0YWluIGZpcnN0IG4gY2hhcmFjdGVycyBvZiB0aGUgbWF0Y2hcbmxlc3M6ZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgdGhpcy51bnB1dCh0aGlzLm1hdGNoLnNsaWNlKG4pKTtcbiAgICB9LFxuXG4vLyBkaXNwbGF5cyBhbHJlYWR5IG1hdGNoZWQgaW5wdXQsIGkuZS4gZm9yIGVycm9yIG1lc3NhZ2VzXG5wYXN0SW5wdXQ6ZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcGFzdCA9IHRoaXMubWF0Y2hlZC5zdWJzdHIoMCwgdGhpcy5tYXRjaGVkLmxlbmd0aCAtIHRoaXMubWF0Y2gubGVuZ3RoKTtcbiAgICAgICAgcmV0dXJuIChwYXN0Lmxlbmd0aCA+IDIwID8gJy4uLic6JycpICsgcGFzdC5zdWJzdHIoLTIwKS5yZXBsYWNlKC9cXG4vZywgXCJcIik7XG4gICAgfSxcblxuLy8gZGlzcGxheXMgdXBjb21pbmcgaW5wdXQsIGkuZS4gZm9yIGVycm9yIG1lc3NhZ2VzXG51cGNvbWluZ0lucHV0OmZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG5leHQgPSB0aGlzLm1hdGNoO1xuICAgICAgICBpZiAobmV4dC5sZW5ndGggPCAyMCkge1xuICAgICAgICAgICAgbmV4dCArPSB0aGlzLl9pbnB1dC5zdWJzdHIoMCwgMjAtbmV4dC5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAobmV4dC5zdWJzdHIoMCwyMCkgKyAobmV4dC5sZW5ndGggPiAyMCA/ICcuLi4nIDogJycpKS5yZXBsYWNlKC9cXG4vZywgXCJcIik7XG4gICAgfSxcblxuLy8gZGlzcGxheXMgdGhlIGNoYXJhY3RlciBwb3NpdGlvbiB3aGVyZSB0aGUgbGV4aW5nIGVycm9yIG9jY3VycmVkLCBpLmUuIGZvciBlcnJvciBtZXNzYWdlc1xuc2hvd1Bvc2l0aW9uOmZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHByZSA9IHRoaXMucGFzdElucHV0KCk7XG4gICAgICAgIHZhciBjID0gbmV3IEFycmF5KHByZS5sZW5ndGggKyAxKS5qb2luKFwiLVwiKTtcbiAgICAgICAgcmV0dXJuIHByZSArIHRoaXMudXBjb21pbmdJbnB1dCgpICsgXCJcXG5cIiArIGMgKyBcIl5cIjtcbiAgICB9LFxuXG4vLyB0ZXN0IHRoZSBsZXhlZCB0b2tlbjogcmV0dXJuIEZBTFNFIHdoZW4gbm90IGEgbWF0Y2gsIG90aGVyd2lzZSByZXR1cm4gdG9rZW5cbnRlc3RfbWF0Y2g6ZnVuY3Rpb24gKG1hdGNoLCBpbmRleGVkX3J1bGUpIHtcbiAgICAgICAgdmFyIHRva2VuLFxuICAgICAgICAgICAgbGluZXMsXG4gICAgICAgICAgICBiYWNrdXA7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5iYWNrdHJhY2tfbGV4ZXIpIHtcbiAgICAgICAgICAgIC8vIHNhdmUgY29udGV4dFxuICAgICAgICAgICAgYmFja3VwID0ge1xuICAgICAgICAgICAgICAgIHl5bGluZW5vOiB0aGlzLnl5bGluZW5vLFxuICAgICAgICAgICAgICAgIHl5bGxvYzoge1xuICAgICAgICAgICAgICAgICAgICBmaXJzdF9saW5lOiB0aGlzLnl5bGxvYy5maXJzdF9saW5lLFxuICAgICAgICAgICAgICAgICAgICBsYXN0X2xpbmU6IHRoaXMubGFzdF9saW5lLFxuICAgICAgICAgICAgICAgICAgICBmaXJzdF9jb2x1bW46IHRoaXMueXlsbG9jLmZpcnN0X2NvbHVtbixcbiAgICAgICAgICAgICAgICAgICAgbGFzdF9jb2x1bW46IHRoaXMueXlsbG9jLmxhc3RfY29sdW1uXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB5eXRleHQ6IHRoaXMueXl0ZXh0LFxuICAgICAgICAgICAgICAgIG1hdGNoOiB0aGlzLm1hdGNoLFxuICAgICAgICAgICAgICAgIG1hdGNoZXM6IHRoaXMubWF0Y2hlcyxcbiAgICAgICAgICAgICAgICBtYXRjaGVkOiB0aGlzLm1hdGNoZWQsXG4gICAgICAgICAgICAgICAgeXlsZW5nOiB0aGlzLnl5bGVuZyxcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IHRoaXMub2Zmc2V0LFxuICAgICAgICAgICAgICAgIF9tb3JlOiB0aGlzLl9tb3JlLFxuICAgICAgICAgICAgICAgIF9pbnB1dDogdGhpcy5faW5wdXQsXG4gICAgICAgICAgICAgICAgeXk6IHRoaXMueXksXG4gICAgICAgICAgICAgICAgY29uZGl0aW9uU3RhY2s6IHRoaXMuY29uZGl0aW9uU3RhY2suc2xpY2UoMCksXG4gICAgICAgICAgICAgICAgZG9uZTogdGhpcy5kb25lXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5yYW5nZXMpIHtcbiAgICAgICAgICAgICAgICBiYWNrdXAueXlsbG9jLnJhbmdlID0gdGhpcy55eWxsb2MucmFuZ2Uuc2xpY2UoMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsaW5lcyA9IG1hdGNoWzBdLm1hdGNoKC8oPzpcXHJcXG4/fFxcbikuKi9nKTtcbiAgICAgICAgaWYgKGxpbmVzKSB7XG4gICAgICAgICAgICB0aGlzLnl5bGluZW5vICs9IGxpbmVzLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnl5bGxvYyA9IHtcbiAgICAgICAgICAgIGZpcnN0X2xpbmU6IHRoaXMueXlsbG9jLmxhc3RfbGluZSxcbiAgICAgICAgICAgIGxhc3RfbGluZTogdGhpcy55eWxpbmVubyArIDEsXG4gICAgICAgICAgICBmaXJzdF9jb2x1bW46IHRoaXMueXlsbG9jLmxhc3RfY29sdW1uLFxuICAgICAgICAgICAgbGFzdF9jb2x1bW46IGxpbmVzID9cbiAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lc1tsaW5lcy5sZW5ndGggLSAxXS5sZW5ndGggLSBsaW5lc1tsaW5lcy5sZW5ndGggLSAxXS5tYXRjaCgvXFxyP1xcbj8vKVswXS5sZW5ndGggOlxuICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueXlsbG9jLmxhc3RfY29sdW1uICsgbWF0Y2hbMF0ubGVuZ3RoXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMueXl0ZXh0ICs9IG1hdGNoWzBdO1xuICAgICAgICB0aGlzLm1hdGNoICs9IG1hdGNoWzBdO1xuICAgICAgICB0aGlzLm1hdGNoZXMgPSBtYXRjaDtcbiAgICAgICAgdGhpcy55eWxlbmcgPSB0aGlzLnl5dGV4dC5sZW5ndGg7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMucmFuZ2VzKSB7XG4gICAgICAgICAgICB0aGlzLnl5bGxvYy5yYW5nZSA9IFt0aGlzLm9mZnNldCwgdGhpcy5vZmZzZXQgKz0gdGhpcy55eWxlbmddO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX21vcmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fYmFja3RyYWNrID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2lucHV0ID0gdGhpcy5faW5wdXQuc2xpY2UobWF0Y2hbMF0ubGVuZ3RoKTtcbiAgICAgICAgdGhpcy5tYXRjaGVkICs9IG1hdGNoWzBdO1xuICAgICAgICB0b2tlbiA9IHRoaXMucGVyZm9ybUFjdGlvbi5jYWxsKHRoaXMsIHRoaXMueXksIHRoaXMsIGluZGV4ZWRfcnVsZSwgdGhpcy5jb25kaXRpb25TdGFja1t0aGlzLmNvbmRpdGlvblN0YWNrLmxlbmd0aCAtIDFdKTtcbiAgICAgICAgaWYgKHRoaXMuZG9uZSAmJiB0aGlzLl9pbnB1dCkge1xuICAgICAgICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgICAgICByZXR1cm4gdG9rZW47XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYmFja3RyYWNrKSB7XG4gICAgICAgICAgICAvLyByZWNvdmVyIGNvbnRleHRcbiAgICAgICAgICAgIGZvciAodmFyIGsgaW4gYmFja3VwKSB7XG4gICAgICAgICAgICAgICAgdGhpc1trXSA9IGJhY2t1cFtrXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTsgLy8gcnVsZSBhY3Rpb24gY2FsbGVkIHJlamVjdCgpIGltcGx5aW5nIHRoZSBuZXh0IHJ1bGUgc2hvdWxkIGJlIHRlc3RlZCBpbnN0ZWFkLlxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuXG4vLyByZXR1cm4gbmV4dCBtYXRjaCBpbiBpbnB1dFxubmV4dDpmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmRvbmUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLkVPRjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2lucHV0KSB7XG4gICAgICAgICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHRva2VuLFxuICAgICAgICAgICAgbWF0Y2gsXG4gICAgICAgICAgICB0ZW1wTWF0Y2gsXG4gICAgICAgICAgICBpbmRleDtcbiAgICAgICAgaWYgKCF0aGlzLl9tb3JlKSB7XG4gICAgICAgICAgICB0aGlzLnl5dGV4dCA9ICcnO1xuICAgICAgICAgICAgdGhpcy5tYXRjaCA9ICcnO1xuICAgICAgICB9XG4gICAgICAgIHZhciBydWxlcyA9IHRoaXMuX2N1cnJlbnRSdWxlcygpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJ1bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0ZW1wTWF0Y2ggPSB0aGlzLl9pbnB1dC5tYXRjaCh0aGlzLnJ1bGVzW3J1bGVzW2ldXSk7XG4gICAgICAgICAgICBpZiAodGVtcE1hdGNoICYmICghbWF0Y2ggfHwgdGVtcE1hdGNoWzBdLmxlbmd0aCA+IG1hdGNoWzBdLmxlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICBtYXRjaCA9IHRlbXBNYXRjaDtcbiAgICAgICAgICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5iYWNrdHJhY2tfbGV4ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdG9rZW4gPSB0aGlzLnRlc3RfbWF0Y2godGVtcE1hdGNoLCBydWxlc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0b2tlbiAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0b2tlbjtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9iYWNrdHJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsgLy8gcnVsZSBhY3Rpb24gY2FsbGVkIHJlamVjdCgpIGltcGx5aW5nIGEgcnVsZSBNSVNtYXRjaC5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVsc2U6IHRoaXMgaXMgYSBsZXhlciBydWxlIHdoaWNoIGNvbnN1bWVzIGlucHV0IHdpdGhvdXQgcHJvZHVjaW5nIGEgdG9rZW4gKGUuZy4gd2hpdGVzcGFjZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIXRoaXMub3B0aW9ucy5mbGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgIHRva2VuID0gdGhpcy50ZXN0X21hdGNoKG1hdGNoLCBydWxlc1tpbmRleF0pO1xuICAgICAgICAgICAgaWYgKHRva2VuICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0b2tlbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGVsc2U6IHRoaXMgaXMgYSBsZXhlciBydWxlIHdoaWNoIGNvbnN1bWVzIGlucHV0IHdpdGhvdXQgcHJvZHVjaW5nIGEgdG9rZW4gKGUuZy4gd2hpdGVzcGFjZSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5faW5wdXQgPT09IFwiXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLkVPRjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlRXJyb3IoJ0xleGljYWwgZXJyb3Igb24gbGluZSAnICsgKHRoaXMueXlsaW5lbm8gKyAxKSArICcuIFVucmVjb2duaXplZCB0ZXh0LlxcbicgKyB0aGlzLnNob3dQb3NpdGlvbigpLCB7XG4gICAgICAgICAgICAgICAgdGV4dDogXCJcIixcbiAgICAgICAgICAgICAgICB0b2tlbjogbnVsbCxcbiAgICAgICAgICAgICAgICBsaW5lOiB0aGlzLnl5bGluZW5vXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sXG5cbi8vIHJldHVybiBuZXh0IG1hdGNoIHRoYXQgaGFzIGEgdG9rZW5cbmxleDpmdW5jdGlvbiBsZXgoKSB7XG4gICAgICAgIHZhciByID0gdGhpcy5uZXh0KCk7XG4gICAgICAgIGlmIChyKSB7XG4gICAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxleCgpO1xuICAgICAgICB9XG4gICAgfSxcblxuLy8gYWN0aXZhdGVzIGEgbmV3IGxleGVyIGNvbmRpdGlvbiBzdGF0ZSAocHVzaGVzIHRoZSBuZXcgbGV4ZXIgY29uZGl0aW9uIHN0YXRlIG9udG8gdGhlIGNvbmRpdGlvbiBzdGFjaylcbmJlZ2luOmZ1bmN0aW9uIGJlZ2luKGNvbmRpdGlvbikge1xuICAgICAgICB0aGlzLmNvbmRpdGlvblN0YWNrLnB1c2goY29uZGl0aW9uKTtcbiAgICB9LFxuXG4vLyBwb3AgdGhlIHByZXZpb3VzbHkgYWN0aXZlIGxleGVyIGNvbmRpdGlvbiBzdGF0ZSBvZmYgdGhlIGNvbmRpdGlvbiBzdGFja1xucG9wU3RhdGU6ZnVuY3Rpb24gcG9wU3RhdGUoKSB7XG4gICAgICAgIHZhciBuID0gdGhpcy5jb25kaXRpb25TdGFjay5sZW5ndGggLSAxO1xuICAgICAgICBpZiAobiA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbmRpdGlvblN0YWNrLnBvcCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uZGl0aW9uU3RhY2tbMF07XG4gICAgICAgIH1cbiAgICB9LFxuXG4vLyBwcm9kdWNlIHRoZSBsZXhlciBydWxlIHNldCB3aGljaCBpcyBhY3RpdmUgZm9yIHRoZSBjdXJyZW50bHkgYWN0aXZlIGxleGVyIGNvbmRpdGlvbiBzdGF0ZVxuX2N1cnJlbnRSdWxlczpmdW5jdGlvbiBfY3VycmVudFJ1bGVzKCkge1xuICAgICAgICBpZiAodGhpcy5jb25kaXRpb25TdGFjay5sZW5ndGggJiYgdGhpcy5jb25kaXRpb25TdGFja1t0aGlzLmNvbmRpdGlvblN0YWNrLmxlbmd0aCAtIDFdKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25kaXRpb25zW3RoaXMuY29uZGl0aW9uU3RhY2tbdGhpcy5jb25kaXRpb25TdGFjay5sZW5ndGggLSAxXV0ucnVsZXM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25kaXRpb25zW1wiSU5JVElBTFwiXS5ydWxlcztcbiAgICAgICAgfVxuICAgIH0sXG5cbi8vIHJldHVybiB0aGUgY3VycmVudGx5IGFjdGl2ZSBsZXhlciBjb25kaXRpb24gc3RhdGU7IHdoZW4gYW4gaW5kZXggYXJndW1lbnQgaXMgcHJvdmlkZWQgaXQgcHJvZHVjZXMgdGhlIE4tdGggcHJldmlvdXMgY29uZGl0aW9uIHN0YXRlLCBpZiBhdmFpbGFibGVcbnRvcFN0YXRlOmZ1bmN0aW9uIHRvcFN0YXRlKG4pIHtcbiAgICAgICAgbiA9IHRoaXMuY29uZGl0aW9uU3RhY2subGVuZ3RoIC0gMSAtIE1hdGguYWJzKG4gfHwgMCk7XG4gICAgICAgIGlmIChuID49IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbmRpdGlvblN0YWNrW25dO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFwiSU5JVElBTFwiO1xuICAgICAgICB9XG4gICAgfSxcblxuLy8gYWxpYXMgZm9yIGJlZ2luKGNvbmRpdGlvbilcbnB1c2hTdGF0ZTpmdW5jdGlvbiBwdXNoU3RhdGUoY29uZGl0aW9uKSB7XG4gICAgICAgIHRoaXMuYmVnaW4oY29uZGl0aW9uKTtcbiAgICB9LFxuXG4vLyByZXR1cm4gdGhlIG51bWJlciBvZiBzdGF0ZXMgY3VycmVudGx5IG9uIHRoZSBzdGFja1xuc3RhdGVTdGFja1NpemU6ZnVuY3Rpb24gc3RhdGVTdGFja1NpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbmRpdGlvblN0YWNrLmxlbmd0aDtcbiAgICB9LFxub3B0aW9uczoge30sXG5wZXJmb3JtQWN0aW9uOiBmdW5jdGlvbiBhbm9ueW1vdXMoeXkseXlfLCRhdm9pZGluZ19uYW1lX2NvbGxpc2lvbnMsWVlfU1RBUlQpIHtcbnZhciBZWVNUQVRFPVlZX1NUQVJUO1xuc3dpdGNoKCRhdm9pZGluZ19uYW1lX2NvbGxpc2lvbnMpIHtcbmNhc2UgMDovKiBza2lwIHdoaXRlc3BhY2UgKi9cbmJyZWFrO1xuY2FzZSAxOnJldHVybiA3XG5icmVhaztcbmNhc2UgMjpyZXR1cm4gNlxuYnJlYWs7XG5jYXNlIDM6cmV0dXJuIDhcbmJyZWFrO1xuY2FzZSA0OnJldHVybiAzMlxuYnJlYWs7XG5jYXNlIDU6cmV0dXJuIDMwXG5icmVhaztcbmNhc2UgNjpyZXR1cm4gMzBcbmJyZWFrO1xuY2FzZSA3OnJldHVybiAzMVxuYnJlYWs7XG5jYXNlIDg6cmV0dXJuIDMxXG5icmVhaztcbmNhc2UgOTpyZXR1cm4gOVxuYnJlYWs7XG5jYXNlIDEwOnJldHVybiAxMFxuYnJlYWs7XG5jYXNlIDExOnJldHVybiAnfCdcbmJyZWFrO1xuY2FzZSAxMjpyZXR1cm4gMTlcbmJyZWFrO1xuY2FzZSAxMzpyZXR1cm4gMThcbmJyZWFrO1xuY2FzZSAxNDpyZXR1cm4gMjFcbmJyZWFrO1xuY2FzZSAxNTpyZXR1cm4gMjBcbmJyZWFrO1xuY2FzZSAxNjpyZXR1cm4gMTdcbmJyZWFrO1xuY2FzZSAxNzpyZXR1cm4gMTZcbmJyZWFrO1xuY2FzZSAxODpyZXR1cm4gMTVcbmJyZWFrO1xuY2FzZSAxOTpyZXR1cm4gMjlcbmJyZWFrO1xuY2FzZSAyMDpyZXR1cm4gMjdcbmJyZWFrO1xuY2FzZSAyMTpyZXR1cm4gMjhcbmJyZWFrO1xuY2FzZSAyMjpyZXR1cm4gMjhcbmJyZWFrO1xuY2FzZSAyMzpyZXR1cm4gMjVcbmJyZWFrO1xuY2FzZSAyNDpyZXR1cm4gJ0lOVkFMSUQnXG5icmVhaztcbmNhc2UgMjU6cmV0dXJuIDVcbmJyZWFrO1xufVxufSxcbnJ1bGVzOiBbL14oPzpcXHMrKS8sL14oPzpBTkRcXGIpLywvXig/Ok9SXFxiKS8sL14oPzpOT1RcXGIpLywvXig/Ok5VTExcXGIpLywvXig/OlRSVUVcXGIpLywvXig/OnRydWVcXGIpLywvXig/OkZBTFNFXFxiKS8sL14oPzpmYWxzZVxcYikvLC9eKD86XFwoKS8sL14oPzpcXCkpLywvXig/OlxcfCkvLC9eKD86PD0pLywvXig/OjwpLywvXig/Oj49KS8sL14oPzo+KS8sL14oPzohPSkvLC9eKD86PT0pLywvXig/Oj0pLywvXig/Oi0/WzAtOV0rKFxcLlswLTldKyk/XFxiKS8sL14oPzpbYS16QS1aX11bYS16QS1aMC05X10qKS8sL14oPzonW15cXCddKicpLywvXig/OlwiW15cXFwiXSpcIikvLC9eKD86XFwuKS8sL14oPzouKS8sL14oPzokKS9dLFxuY29uZGl0aW9uczoge1wiSU5JVElBTFwiOntcInJ1bGVzXCI6WzAsMSwyLDMsNCw1LDYsNyw4LDksMTAsMTEsMTIsMTMsMTQsMTUsMTYsMTcsMTgsMTksMjAsMjEsMjIsMjMsMjQsMjVdLFwiaW5jbHVzaXZlXCI6dHJ1ZX19XG59KTtcbnJldHVybiBsZXhlcjtcbn0pKCk7XG5wYXJzZXIubGV4ZXIgPSBsZXhlcjtcbmZ1bmN0aW9uIFBhcnNlciAoKSB7XG4gIHRoaXMueXkgPSB7fTtcbn1cblBhcnNlci5wcm90b3R5cGUgPSBwYXJzZXI7cGFyc2VyLlBhcnNlciA9IFBhcnNlcjtcbnJldHVybiBuZXcgUGFyc2VyO1xufSkoKTtcblxuZXhwb3J0IGNvbnN0IGFjY2Vzc1BhcnNlciA9IHBhcnNlcjtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge2FjY2Vzc1BhcnNlciBhcyBwYXJzZXJ9IGZyb20gJy4vYWNjZXNzLWV4cHItaW1wbCc7XG5cblxuLyoqXG4gKiBFdmFsdWF0ZXMgYWNjZXNzIGV4cHJlc3Npb24uXG4gKlxuICogVGhlIGdyYW1tYXIgaXMgZGVmaW5lZCBpbiB0aGUgYGFjY2Vzcy1leHByLWltcGwuamlzb25gIGFuZCBjb21waWxlZCB1c2luZ1xuICogKEppc29uKVtodHRwczovL3phYWNoLmdpdGh1Yi5pby9qaXNvbi9dIHBhcnNlci4gVGhlIGNvbXBpbGF0aW9uIHN0ZXBzIGFyZVxuICogZGVzY3JpYmVkIGluIHRoZSBbYWNjZXNzLWV4cHItaW1wbC5tZF0uXG4gKlxuICogR3JhbW1hciBoaWdobGlnaHRzOlxuICogLSBTaG9ydGhhbmQgdHJ1dGh5IGV4cHJlc3Npb25zIGFyZSBhbGxvd2VkLCBzdWNoIGFzIGBmaWVsZGAuIFRydXRoeSB2YWx1ZVxuICogICBpcyBkZWZpbmVkIGFzIGBYICE9PSBudWxsICYmIFggIT09ICcnICYmIFggIT09IDAgJiYgWCAhPT0gZmFsc2VgLlxuICogLSBCYXNpYyBlcXVhbGl0eSBleHByZXNzaW9uczogYFggPSAxYCwgYFggPSB0cnVlYCwgYFggPSBcIkFcImAuIEFuZCBhbHNvLFxuICogICBub24tZXF1YWxpdHk6IGBYICE9IDFgIGFuZCBzbyBvbi5cbiAqIC0gQmFzaWMgY29tcGFyaXNvbiBleHByZXNzaW9ucyBvbmx5IGRlZmluZWQgZm9yIG51bWJlcnM6IGBYIDwgMWAsXG4gKiAgIGBYID49IDEwYC5cbiAqIC0gQm9vbGVhbiBsb2dpYzogYFggPSAxIE9SIFkgPSAxYCwgYFggPSAxIEFORCBZID0gMmAsIGBOT1QgWGAsIGBOT1QgKFggPSAxKWAuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGV4cHJcbiAqIEBwYXJhbSB7IUpzb25PYmplY3R9IGRhdGFcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBldmFsdWF0ZUFjY2Vzc0V4cHIoZXhwciwgZGF0YSkge1xuICB0cnkge1xuICAgIHBhcnNlci55eSA9IGRhdGE7XG4gICAgcmV0dXJuICEhcGFyc2VyLnBhcnNlKGV4cHIpO1xuICB9IGZpbmFsbHkge1xuICAgIHBhcnNlci55eSA9IG51bGw7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbi8qKlxuICogRXhwb3J0cyB0aGUgc3Vic3RpdHV0aW9uIHZhcmlhYmxlcyBmb3IgYWNjZXNzIHNlcnZpY2VzLlxuICpcbiAqIEBpbnRlcmZhY2VcbiAqL1xuZXhwb3J0IGNsYXNzIEFjY2Vzc1ZhcnMge1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBwcm9taXNlIHRoYXQgd2lsbCB5aWVsZCB0aGUgYWNjZXNzIFJFQURFUl9JRC5cbiAgICpcbiAgICogVGhpcyBpcyBhIHJlc3RyaWN0ZWQgQVBJLlxuICAgKlxuICAgKiBAcmV0dXJuIHs/UHJvbWlzZTxzdHJpbmc+fVxuICAgKi9cbiAgZ2V0QWNjZXNzUmVhZGVySWQoKSB7fVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBwcm9taXNlIHRoYXQgd2lsbCB5aWVsZCB0aGUgdmFsdWUgb2YgdGhlIHNwZWNpZmllZCBmaWVsZCBmcm9tXG4gICAqIHRoZSBhdXRob3JpemF0aW9uIHJlc3BvbnNlLiBUaGlzIG1ldGhvZCB3aWxsIHdhaXQgZm9yIHRoZSBtb3N0IHJlY2VudFxuICAgKiBhdXRob3JpemF0aW9uIHJlcXVlc3QgdG8gY29tcGxldGUuIEl0IHdpbGwgcmV0dXJuIG51bGwgdmFsdWVzIGZvciBmYWlsZWRcbiAgICogcmVxdWVzdHMgd2l0aCBubyBmYWxsYmFjaywgYnV0IGNvdWxkIGJlIG1vZGlmaWVkIHRvIGJsb2NrIGluZGVmaW5pdGVseS5cbiAgICpcbiAgICogVGhpcyBpcyBhIHJlc3RyaWN0ZWQgQVBJLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdW51c2VkRmllbGRcbiAgICogQHJldHVybiB7P1Byb21pc2U8KnxudWxsPn1cbiAgICovXG4gIGdldEF1dGhkYXRhRmllbGQodW51c2VkRmllbGQpIHt9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuXG4vKipcbiAqIFRoaXMgaW50ZXJmYWNlIGlzIGludGVuZGVkIHRvIGJlIGltcGxlbWVudGVkIGJ5IEFNUCBBY2Nlc3MgdmVuZG9ycyB0b1xuICogcHJvdmlkZSBhdXRob3JpemF0aW9uIGFuZCBwaW5nYmFjay5cbiAqIEBpbnRlcmZhY2VcbiAqL1xuZXhwb3J0IGNsYXNzIEFjY2Vzc1ZlbmRvciB7XG5cbiAgLyoqXG4gICAqIFJlcXVlc3RzIGF1dGhvcml6YXRpb24gZnJvbSB0aGUgdmVuZG9yLiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHlpZWxkc1xuICAgKiBhIEpTT04gYXV0aG9yaXphdGlvbiByZXNwb25zZS5cbiAgICogQHJldHVybiB7IVByb21pc2U8IUpzb25PYmplY3Q+fVxuICAgKi9cbiAgYXV0aG9yaXplKCkge31cblxuICAvKipcbiAgICogUmVnaXN0ZXJlcyB0aGUgXCJ2aWV3ZWRcIiBldmVudCBhcyBhIHBpbmdiYWNrIHRvIHRoZSBhdXRob3JpemF0aW9uIHZlbmRvci5cbiAgICogVGhpcyBzaWduYWwgY2FuIGJlIHVzZWQgdG8gY291bnQtZG93biBxdW90YXMuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgcGluZ2JhY2soKSB7fVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7U2VydmljZXN9IGZyb20gJy4uLy4uLy4uL3NyYy9zZXJ2aWNlcyc7XG5pbXBvcnQge2Fzc2VydEh0dHBzVXJsfSBmcm9tICcuLi8uLi8uLi9zcmMvdXJsJztcbmltcG9ydCB7ZGV2LCB1c2VyfSBmcm9tICcuLi8uLi8uLi9zcmMvbG9nJztcbmltcG9ydCB7ZGljdH0gZnJvbSAnLi4vLi4vLi4vc3JjL3V0aWxzL29iamVjdCc7XG5pbXBvcnQge2dldE1vZGV9IGZyb20gJy4uLy4uLy4uL3NyYy9tb2RlJztcblxuLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuY29uc3QgVEFHID0gJ2FtcC1hY2Nlc3MtY2xpZW50JztcblxuLyoqIEBjb25zdCB7bnVtYmVyfSAqL1xuY29uc3QgREVGQVVMVF9BVVRIT1JJWkFUSU9OX1RJTUVPVVQgPSAzMDAwO1xuXG5cbi8qKiBAaW1wbGVtZW50cyB7Li9hbXAtYWNjZXNzLXNvdXJjZS5BY2Nlc3NUeXBlQWRhcHRlckRlZn0gKi9cbmV4cG9ydCBjbGFzcyBBY2Nlc3NDbGllbnRBZGFwdGVyIHtcblxuICAvKipcbiAgICogQHBhcmFtIHshLi4vLi4vLi4vc3JjL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBhbXBkb2NcbiAgICogQHBhcmFtIHshSnNvbk9iamVjdH0gY29uZmlnSnNvblxuICAgKiBAcGFyYW0geyEuL2FtcC1hY2Nlc3Mtc291cmNlLkFjY2Vzc1R5cGVBZGFwdGVyQ29udGV4dERlZn0gY29udGV4dFxuICAgKi9cbiAgY29uc3RydWN0b3IoYW1wZG9jLCBjb25maWdKc29uLCBjb250ZXh0KSB7XG4gICAgLyoqIEBjb25zdCAqL1xuICAgIHRoaXMuYW1wZG9jID0gYW1wZG9jO1xuXG4gICAgLyoqIEBjb25zdCBAcHJpdmF0ZSB7IS4vYW1wLWFjY2Vzcy1zb3VyY2UuQWNjZXNzVHlwZUFkYXB0ZXJDb250ZXh0RGVmfSAqL1xuICAgIHRoaXMuY29udGV4dF8gPSBjb250ZXh0O1xuXG4gICAgLyoqIEBjb25zdCBAcHJpdmF0ZSB7c3RyaW5nfSAqL1xuICAgIHRoaXMuYXV0aG9yaXphdGlvblVybF8gPSB1c2VyKCkuYXNzZXJ0KGNvbmZpZ0pzb25bJ2F1dGhvcml6YXRpb24nXSxcbiAgICAgICAgJ1wiYXV0aG9yaXphdGlvblwiIFVSTCBtdXN0IGJlIHNwZWNpZmllZCcpO1xuICAgIGFzc2VydEh0dHBzVXJsKHRoaXMuYXV0aG9yaXphdGlvblVybF8sICdcImF1dGhvcml6YXRpb25cIicpO1xuXG4gICAgLyoqIEBjb25zdCBAcHJpdmF0ZSB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLmlzUGluZ2JhY2tFbmFibGVkXyA9ICFjb25maWdKc29uWydub1BpbmdiYWNrJ107XG5cbiAgICAvKiogQGNvbnN0IEBwcml2YXRlIHtzdHJpbmd9ICovXG4gICAgdGhpcy5waW5nYmFja1VybF8gPSBjb25maWdKc29uWydwaW5nYmFjayddO1xuICAgIGlmICh0aGlzLmlzUGluZ2JhY2tFbmFibGVkXykge1xuICAgICAgdXNlcigpLmFzc2VydCh0aGlzLnBpbmdiYWNrVXJsXywgJ1wicGluZ2JhY2tcIiBVUkwgbXVzdCBiZSBzcGVjaWZpZWQnKTtcbiAgICAgIGFzc2VydEh0dHBzVXJsKHRoaXMucGluZ2JhY2tVcmxfLCAnXCJwaW5nYmFja1wiJyk7XG4gICAgfVxuXG4gICAgLyoqIEBjb25zdCBAcHJpdmF0ZSB7bnVtYmVyfSAqL1xuICAgIHRoaXMuYXV0aG9yaXphdGlvblRpbWVvdXRfID0gdGhpcy5idWlsZENvbmZpZ0F1dGhvcml6YXRpb25UaW1lb3V0XyhcbiAgICAgICAgY29uZmlnSnNvbik7XG5cbiAgICAvKiogQGNvbnN0IEBwcml2YXRlIHshLi4vLi4vLi4vc3JjL3NlcnZpY2UveGhyLWltcGwuWGhyfSAqL1xuICAgIHRoaXMueGhyXyA9IFNlcnZpY2VzLnhockZvcihhbXBkb2Mud2luKTtcblxuICAgIC8qKiBAY29uc3QgQHByaXZhdGUgeyEuLi8uLi8uLi9zcmMvc2VydmljZS90aW1lci1pbXBsLlRpbWVyfSAqL1xuICAgIHRoaXMudGltZXJfID0gU2VydmljZXMudGltZXJGb3IoYW1wZG9jLndpbik7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshSnNvbk9iamVjdH0gY29uZmlnSnNvblxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICBidWlsZENvbmZpZ0F1dGhvcml6YXRpb25UaW1lb3V0Xyhjb25maWdKc29uKSB7XG4gICAgaWYgKCFjb25maWdKc29uWydhdXRob3JpemF0aW9uVGltZW91dCddKSB7XG4gICAgICByZXR1cm4gREVGQVVMVF9BVVRIT1JJWkFUSU9OX1RJTUVPVVQ7XG4gICAgfVxuXG4gICAgbGV0IHRpbWVvdXQgPSBjb25maWdKc29uWydhdXRob3JpemF0aW9uVGltZW91dCddO1xuICAgIHVzZXIoKS5hc3NlcnQodHlwZW9mIHRpbWVvdXQgPT0gJ251bWJlcicsXG4gICAgICAgICdcImF1dGhvcml6YXRpb25UaW1lb3V0XCIgbXVzdCBiZSBhIG51bWJlcicpO1xuICAgIGlmICghKGdldE1vZGUoKS5sb2NhbERldiB8fCBnZXRNb2RlKCkuZGV2ZWxvcG1lbnQpKSB7XG4gICAgICB0aW1lb3V0ID0gTWF0aC5taW4odGltZW91dCwgREVGQVVMVF9BVVRIT1JJWkFUSU9OX1RJTUVPVVQpO1xuICAgIH1cbiAgICByZXR1cm4gdGltZW91dDtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0Q29uZmlnKCkge1xuICAgIHJldHVybiB7XG4gICAgICAnYXV0aG9yaXphdGlvblVybCc6IHRoaXMuYXV0aG9yaXphdGlvblVybF8sXG4gICAgICAncGluZ2JhY2tFbmFibGVkJzogdGhpcy5pc1BpbmdiYWNrRW5hYmxlZF8sXG4gICAgICAncGluZ2JhY2tVcmwnOiB0aGlzLnBpbmdiYWNrVXJsXyxcbiAgICAgICdhdXRob3JpemF0aW9uVGltZW91dCc6IHRoaXMuYXV0aG9yaXphdGlvblRpbWVvdXRfLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0QXV0aG9yaXphdGlvblVybCgpIHtcbiAgICByZXR1cm4gdGhpcy5hdXRob3JpemF0aW9uVXJsXztcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgaXNBdXRob3JpemF0aW9uRW5hYmxlZCgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICBnZXRBdXRob3JpemF0aW9uVGltZW91dCgpIHtcbiAgICByZXR1cm4gdGhpcy5hdXRob3JpemF0aW9uVGltZW91dF87XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGF1dGhvcml6ZSgpIHtcbiAgICBkZXYoKS5maW5lKFRBRywgJ1N0YXJ0IGF1dGhvcml6YXRpb24gdmlhICcsIHRoaXMuYXV0aG9yaXphdGlvblVybF8pO1xuICAgIGNvbnN0IHVybFByb21pc2UgPSB0aGlzLmNvbnRleHRfLmJ1aWxkVXJsKHRoaXMuYXV0aG9yaXphdGlvblVybF8sXG4gICAgICAgIC8qIHVzZUF1dGhEYXRhICovIGZhbHNlKTtcbiAgICByZXR1cm4gdXJsUHJvbWlzZS50aGVuKHVybCA9PiB7XG4gICAgICBkZXYoKS5maW5lKFRBRywgJ0F1dGhvcml6YXRpb24gVVJMOiAnLCB1cmwpO1xuICAgICAgcmV0dXJuIHRoaXMudGltZXJfLnRpbWVvdXRQcm9taXNlKFxuICAgICAgICAgIHRoaXMuYXV0aG9yaXphdGlvblRpbWVvdXRfLFxuICAgICAgICAgIHRoaXMueGhyXy5mZXRjaEpzb24odXJsLCB7XG4gICAgICAgICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnLFxuICAgICAgICAgIH0pKS50aGVuKHJlcyA9PiByZXMuanNvbigpKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgaXNQaW5nYmFja0VuYWJsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNQaW5nYmFja0VuYWJsZWRfO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBwaW5nYmFjaygpIHtcbiAgICBjb25zdCBwcm9taXNlID0gdGhpcy5jb250ZXh0Xy5idWlsZFVybChkZXYoKS5hc3NlcnQodGhpcy5waW5nYmFja1VybF8pLFxuICAgICAgICAvKiB1c2VBdXRoRGF0YSAqLyB0cnVlKTtcbiAgICByZXR1cm4gcHJvbWlzZS50aGVuKHVybCA9PiB7XG4gICAgICBkZXYoKS5maW5lKFRBRywgJ1BpbmdiYWNrIFVSTDogJywgdXJsKTtcbiAgICAgIHJldHVybiB0aGlzLnhocl8uc2VuZFNpZ25hbCh1cmwsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsXG4gICAgICAgIGhlYWRlcnM6IGRpY3Qoe1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcbiAgICAgICAgfSksXG4gICAgICAgIGJvZHk6ICcnLFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHBvc3RBY3Rpb24oKSB7XG4gICAgLy8gTm90aGluZyB0byBkby5cbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7RGVmZXJyZWR9IGZyb20gJy4uLy4uLy4uL3NyYy91dGlscy9wcm9taXNlJztcbmltcG9ydCB7TWVzc2VuZ2VyfSBmcm9tICcuL2lmcmFtZS1hcGkvbWVzc2VuZ2VyJztcbmltcG9ydCB7U2VydmljZXN9IGZyb20gJy4uLy4uLy4uL3NyYy9zZXJ2aWNlcyc7XG5pbXBvcnQge2Fzc2VydEh0dHBzVXJsfSBmcm9tICcuLi8uLi8uLi9zcmMvdXJsJztcbmltcG9ydCB7ZGV2LCB1c2VyfSBmcm9tICcuLi8uLi8uLi9zcmMvbG9nJztcbmltcG9ydCB7ZGljdH0gZnJvbSAnLi4vLi4vLi4vc3JjL3V0aWxzL29iamVjdCc7XG5pbXBvcnQge2dldE1vZGV9IGZyb20gJy4uLy4uLy4uL3NyYy9tb2RlJztcbmltcG9ydCB7aXNBcnJheX0gZnJvbSAnLi4vLi4vLi4vc3JjL3R5cGVzJztcbmltcG9ydCB7cGFyc2VKc29ufSBmcm9tICcuLi8uLi8uLi9zcmMvanNvbic7XG5pbXBvcnQge3BhcnNlVXJsRGVwcmVjYXRlZH0gZnJvbSAnLi4vLi4vLi4vc3JjL3VybCc7XG5pbXBvcnQge3RvZ2dsZX0gZnJvbSAnLi4vLi4vLi4vc3JjL3N0eWxlJztcblxuY29uc3QgQVVUSE9SSVpBVElPTl9USU1FT1VUID0gMzAwMDtcbmNvbnN0IEVYUElSQVRJT05fVElNRU9VVCA9IDEwMDAgKiA2MCAqIDYwICogMjQgKiA3OyAvLyA3IGRheXNcbmNvbnN0IFRBRyA9ICdhbXAtYWNjZXNzLWlmcmFtZSc7XG5cblxuLyoqIEBpbXBsZW1lbnRzIHsuL2FtcC1hY2Nlc3Mtc291cmNlLkFjY2Vzc1R5cGVBZGFwdGVyRGVmfSAqL1xuZXhwb3J0IGNsYXNzIEFjY2Vzc0lmcmFtZUFkYXB0ZXIge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuLi8uLi8uLi9zcmMvc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGFtcGRvY1xuICAgKiBAcGFyYW0geyFKc29uT2JqZWN0fSBjb25maWdKc29uXG4gICAqIEBwYXJhbSB7IS4vYW1wLWFjY2Vzcy1zb3VyY2UuQWNjZXNzVHlwZUFkYXB0ZXJDb250ZXh0RGVmfSBjb250ZXh0XG4gICAqL1xuICBjb25zdHJ1Y3RvcihhbXBkb2MsIGNvbmZpZ0pzb24sIGNvbnRleHQpIHtcbiAgICAvKiogQGNvbnN0ICovXG4gICAgdGhpcy5hbXBkb2MgPSBhbXBkb2M7XG5cbiAgICAvKiogQGNvbnN0IEBwcml2YXRlIHshLi9hbXAtYWNjZXNzLXNvdXJjZS5BY2Nlc3NUeXBlQWRhcHRlckNvbnRleHREZWZ9ICovXG4gICAgdGhpcy5jb250ZXh0XyA9IGNvbnRleHQ7XG5cbiAgICAvKiogQGNvbnN0IEBwcml2YXRlIHshSnNvbk9iamVjdH0gKi9cbiAgICB0aGlzLmNvbmZpZ0pzb25fID0gY29uZmlnSnNvbjtcblxuICAgIC8qKiBAY29uc3QgQHByaXZhdGUgeyEuLi8uLi8uLi9zcmMvc2VydmljZS90aW1lci1pbXBsLlRpbWVyfSAqL1xuICAgIHRoaXMudGltZXJfID0gU2VydmljZXMudGltZXJGb3IoYW1wZG9jLndpbik7XG5cbiAgICAvKiogQGNvbnN0IEBwcml2YXRlIHtzdHJpbmd9ICovXG4gICAgdGhpcy5pZnJhbWVTcmNfID0gdXNlcigpLmFzc2VydChjb25maWdKc29uWydpZnJhbWVTcmMnXSxcbiAgICAgICAgJ1wiaWZyYW1lU3JjXCIgVVJMIG11c3QgYmUgc3BlY2lmaWVkJyk7XG4gICAgYXNzZXJ0SHR0cHNVcmwodGhpcy5pZnJhbWVTcmNfLCAnXCJpZnJhbWVTcmNcIicpO1xuXG4gICAgLyoqIEBjb25zdCBAcHJpdmF0ZSB7P0FycmF5fSAqL1xuICAgIHRoaXMuaWZyYW1lVmFyc18gPSBjb25maWdKc29uWydpZnJhbWVWYXJzJ10gfHwgbnVsbDtcbiAgICBpZiAodGhpcy5pZnJhbWVWYXJzXykge1xuICAgICAgdXNlcigpLmFzc2VydChpc0FycmF5KHRoaXMuaWZyYW1lVmFyc18pLFxuICAgICAgICAgICdcImlmcmFtZVZhcnNcIiBtdXN0IGJlIGFuIGFycmF5Jyk7XG4gICAgfVxuXG4gICAgLyoqIEBjb25zdCBAcHJpdmF0ZSB7IUpzb25PYmplY3R9ICovXG4gICAgdGhpcy5kZWZhdWx0UmVzcG9uc2VfID0gdXNlcigpLmFzc2VydChjb25maWdKc29uWydkZWZhdWx0UmVzcG9uc2UnXSxcbiAgICAgICAgJ1wiZGVmYXVsdFJlc3BvbnNlXCIgbXVzdCBiZSBzcGVjaWZpZWQnKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnRhcmdldE9yaWdpbl8gPSBwYXJzZVVybERlcHJlY2F0ZWQodGhpcy5pZnJhbWVTcmNfKS5vcmlnaW47XG5cbiAgICAvKiogQHByaXZhdGUgez9mdW5jdGlvbigpfSAqL1xuICAgIHRoaXMuY29ubmVjdGVkUmVzb2x2ZXJfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P1Byb21pc2V9ICovXG4gICAgdGhpcy5jb25uZWN0ZWRQcm9taXNlXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshRWxlbWVudH0gKi9cbiAgICB0aGlzLmlmcmFtZV8gPSBhbXBkb2Mud2luLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICAgIHRvZ2dsZSh0aGlzLmlmcmFtZV8sIGZhbHNlKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFNZXNzZW5nZXJ9ICovXG4gICAgdGhpcy5tZXNzZW5nZXJfID0gbmV3IE1lc3NlbmdlcihcbiAgICAgICAgdGhpcy5hbXBkb2Mud2luLFxuICAgICAgICAoKSA9PiB0aGlzLmlmcmFtZV8uY29udGVudFdpbmRvdyxcbiAgICAgICAgdGhpcy50YXJnZXRPcmlnaW5fKTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P1Byb21pc2U8IUpzb25PYmplY3Q+fSAqL1xuICAgIHRoaXMuY29uZmlnUHJvbWlzZV8gPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIERpc2Nvbm5lY3QgdGhlIGNsaWVudC5cbiAgICovXG4gIGRpc2Nvbm5lY3QoKSB7XG4gICAgdGhpcy5tZXNzZW5nZXJfLmRpc2Nvbm5lY3QoKTtcbiAgICB0aGlzLmFtcGRvYy5nZXRCb2R5KCkucmVtb3ZlQ2hpbGQodGhpcy5pZnJhbWVfKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0Q29uZmlnKCkge1xuICAgIHJldHVybiB7XG4gICAgICAnaWZyYW1lU3JjJzogdGhpcy5pZnJhbWVTcmNfLFxuICAgICAgJ2lmcmFtZVZhcnMnOiB0aGlzLmlmcmFtZVZhcnNfLFxuICAgIH07XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGlzQXV0aG9yaXphdGlvbkVuYWJsZWQoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGF1dGhvcml6ZSgpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yYWNlKFtcbiAgICAgIHRoaXMuYXV0aG9yaXplTG9jYWxfKCksXG4gICAgICB0aGlzLmF1dGhvcml6ZVJlbW90ZV8oKSxcbiAgICBdKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgaXNQaW5nYmFja0VuYWJsZWQoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHBpbmdiYWNrKCkge1xuICAgIHJldHVybiB0aGlzLmNvbm5lY3QoKS50aGVuKCgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLm1lc3Nlbmdlcl8uc2VuZENvbW1hbmRSc3ZwKCdwaW5nYmFjaycsIHt9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgcG9zdEFjdGlvbigpIHtcbiAgICAvLyBSZXNldCB0aGUgc3RvcmFnZS5cbiAgICB0aGlzLnN0b3JlXyhudWxsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICogQHBhY2thZ2UgVmlzaWJsZSBmb3IgdGVzdGluZyBvbmx5LlxuICAgKi9cbiAgY29ubmVjdCgpIHtcbiAgICBpZiAoIXRoaXMuY29ubmVjdGVkUHJvbWlzZV8pIHtcbiAgICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XG4gICAgICB0aGlzLmNvbm5lY3RlZFByb21pc2VfID0gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgIHRoaXMuY29ubmVjdGVkUmVzb2x2ZXJfID0gZGVmZXJyZWQucmVzb2x2ZTtcblxuICAgICAgdGhpcy5jb25maWdQcm9taXNlXyA9IHRoaXMucmVzb2x2ZUNvbmZpZ18oKTtcbiAgICAgIC8vIENvbm5lY3QuXG4gICAgICB0aGlzLm1lc3Nlbmdlcl8uY29ubmVjdCh0aGlzLmhhbmRsZUNvbW1hbmRfLmJpbmQodGhpcykpO1xuICAgICAgdGhpcy5hbXBkb2MuZ2V0Qm9keSgpLmFwcGVuZENoaWxkKHRoaXMuaWZyYW1lXyk7XG4gICAgICB0aGlzLmlmcmFtZV8uc3JjID0gdGhpcy5pZnJhbWVTcmNfO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jb25uZWN0ZWRQcm9taXNlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhSnNvbk9iamVjdD59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICByZXNvbHZlQ29uZmlnXygpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBjb25zdCBjb25maWdKc29uID0gcGFyc2VKc29uKEpTT04uc3RyaW5naWZ5KHRoaXMuY29uZmlnSnNvbl8pKTtcbiAgICAgIGlmICh0aGlzLmlmcmFtZVZhcnNfKSB7XG4gICAgICAgIGNvbnN0IHZhcnNTdHJpbmcgPSB0aGlzLmlmcmFtZVZhcnNfLmpvaW4oJyYnKTtcbiAgICAgICAgY29uc3QgdmFyc1Byb21pc2UgPSB0aGlzLmNvbnRleHRfLmNvbGxlY3RVcmxWYXJzKFxuICAgICAgICAgICAgdmFyc1N0cmluZyxcbiAgICAgICAgICAgIC8qIHVzZUF1dGhEYXRhICovIGZhbHNlKTtcbiAgICAgICAgcmVzb2x2ZSh2YXJzUHJvbWlzZS50aGVuKHZhcnMgPT4ge1xuICAgICAgICAgIGNvbmZpZ0pzb25bJ2lmcmFtZVZhcnMnXSA9IHZhcnM7XG4gICAgICAgICAgcmV0dXJuIGNvbmZpZ0pzb247XG4gICAgICAgIH0pKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc29sdmUoY29uZmlnSnNvbik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IVByb21pc2U8IUpzb25PYmplY3Q+fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYXV0aG9yaXplTG9jYWxfKCkge1xuICAgIGNvbnN0IHRpbWVvdXQgPSBBVVRIT1JJWkFUSU9OX1RJTUVPVVQgKiAoZ2V0TW9kZSgpLmRldmVsb3BtZW50ID8gMiA6IDEpO1xuICAgIHJldHVybiB0aGlzLnRpbWVyXy5wcm9taXNlKHRpbWVvdXQpLnRoZW4oKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMucmVzdG9yZV8oKSB8fCB0aGlzLmRlZmF1bHRSZXNwb25zZV87XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IVByb21pc2U8IUpzb25PYmplY3Q+fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYXV0aG9yaXplUmVtb3RlXygpIHtcbiAgICByZXR1cm4gdGhpcy5jb25uZWN0KCkudGhlbigoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5tZXNzZW5nZXJfLnNlbmRDb21tYW5kUnN2cCgnYXV0aG9yaXplJywge30pO1xuICAgIH0pLnRoZW4oZGF0YSA9PiB7XG4gICAgICBpZiAoZGF0YSkge1xuICAgICAgICAvLyBTdG9yZSB0aGUgdmFsdWUgaW4gYSBub24tYmxvY2tpbmcgbWljcm90YXNrLlxuICAgICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHRoaXMuc3RvcmVfKGRhdGEpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9Kc29uT2JqZWN0fSBkYXRhXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICByZXN0b3JlXygpIHtcbiAgICBjb25zdCB7d2lufSA9IHRoaXMuYW1wZG9jO1xuICAgIGNvbnN0IHN0b3JhZ2UgPSB3aW4uc2Vzc2lvblN0b3JhZ2UgfHwgd2luLmxvY2FsU3RvcmFnZTtcbiAgICBpZiAoIXN0b3JhZ2UpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmF3ID0gc3RvcmFnZS5nZXRJdGVtKFRBRyk7XG4gICAgICBpZiAoIXJhdykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlSnNvbihyYXcpO1xuICAgICAgY29uc3QgdGltZSA9IHBhcnNlZFsndCddO1xuICAgICAgaWYgKCh0aW1lICsgRVhQSVJBVElPTl9USU1FT1VUKSA8IHRoaXMuYW1wZG9jLndpbi5EYXRlLm5vdygpKSB7XG4gICAgICAgIC8vIEFscmVhZHkgZXhwaXJlZC5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4gcGFyc2VkWydkJ10gfHwgbnVsbDtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBkZXYoKS5lcnJvcihUQUcsICdmYWlsZWQgdG8gcmVzdG9yZSBhY2Nlc3MgcmVzcG9uc2U6ICcsIGUpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBwb2lzb25lZCB2YWx1ZS5cbiAgICAgICAgc3RvcmFnZS5yZW1vdmVJdGVtKFRBRyk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIElnbm9yZS5cbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0gez9Kc29uT2JqZWN0fSBkYXRhXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdG9yZV8oZGF0YSkge1xuICAgIGNvbnN0IHt3aW59ID0gdGhpcy5hbXBkb2M7XG4gICAgY29uc3Qgc3RvcmFnZSA9IHdpbi5zZXNzaW9uU3RvcmFnZSB8fCB3aW4ubG9jYWxTdG9yYWdlO1xuICAgIGlmICghc3RvcmFnZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgc3RvcmFnZS5zZXRJdGVtKFRBRywgSlNPTi5zdHJpbmdpZnkoZGljdCh7XG4gICAgICAgICAgJ3QnOiB0aGlzLmFtcGRvYy53aW4uRGF0ZS5ub3coKSxcbiAgICAgICAgICAnZCc6IGRhdGEsXG4gICAgICAgIH0pKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdG9yYWdlLnJlbW92ZUl0ZW0oVEFHKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBkZXYoKS5lcnJvcihUQUcsICdmYWlsZWQgdG8gc3RvcmUgYWNjZXNzIHJlc3BvbnNlOiAnLCBlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNtZFxuICAgKiBAcGFyYW0gez9PYmplY3R9IHVudXNlZFBheWxvYWRcbiAgICogQHJldHVybiB7Kn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhbmRsZUNvbW1hbmRfKGNtZCwgdW51c2VkUGF5bG9hZCkge1xuICAgIGlmIChjbWQgPT0gJ2Nvbm5lY3QnKSB7XG4gICAgICAvLyBGaXJzdCBldmVyIG1lc3NhZ2UuIEluZGljYXRlcyB0aGF0IHRoZSByZWNlaXZlciBpcyBsaXN0ZW5pbmcuXG4gICAgICB0aGlzLmNvbmZpZ1Byb21pc2VfLnRoZW4oY29uZmlnSnNvbiA9PiB7XG4gICAgICAgIHRoaXMubWVzc2VuZ2VyXy5zZW5kQ29tbWFuZFJzdnAoJ3N0YXJ0Jywge1xuICAgICAgICAgICdwcm90b2NvbCc6ICdhbXAtYWNjZXNzJyxcbiAgICAgICAgICAnY29uZmlnJzogY29uZmlnSnNvbixcbiAgICAgICAgfSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgLy8gQ29uZmlybWF0aW9uIHRoYXQgY29ubmVjdGlvbiBoYXMgYmVlbiBzdWNjZXNzZnVsLlxuICAgICAgICAgIGlmICh0aGlzLmNvbm5lY3RlZFJlc29sdmVyXykge1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0ZWRSZXNvbHZlcl8oKTtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGVkUmVzb2x2ZXJfID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtkZXZ9IGZyb20gJy4uLy4uLy4uL3NyYy9sb2cnO1xuaW1wb3J0IHtpc1Byb3h5T3JpZ2lufSBmcm9tICcuLi8uLi8uLi9zcmMvdXJsJztcblxuLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuY29uc3QgVEFHID0gJ2FtcC1hY2Nlc3Mtb3RoZXInO1xuXG5cbi8qKiBAaW1wbGVtZW50cyB7Li9hbXAtYWNjZXNzLXNvdXJjZS5BY2Nlc3NUeXBlQWRhcHRlckRlZn0gKi9cbmV4cG9ydCBjbGFzcyBBY2Nlc3NPdGhlckFkYXB0ZXIge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuLi8uLi8uLi9zcmMvc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGFtcGRvY1xuICAgKiBAcGFyYW0geyFKc29uT2JqZWN0fSBjb25maWdKc29uXG4gICAqIEBwYXJhbSB7IS4vYW1wLWFjY2Vzcy1zb3VyY2UuQWNjZXNzVHlwZUFkYXB0ZXJDb250ZXh0RGVmfSBjb250ZXh0XG4gICAqL1xuICBjb25zdHJ1Y3RvcihhbXBkb2MsIGNvbmZpZ0pzb24sIGNvbnRleHQpIHtcbiAgICAvKiogQGNvbnN0ICovXG4gICAgdGhpcy5hbXBkb2MgPSBhbXBkb2M7XG5cbiAgICAvKiogQGNvbnN0IEBwcml2YXRlIHshLi9hbXAtYWNjZXNzLXNvdXJjZS5BY2Nlc3NUeXBlQWRhcHRlckNvbnRleHREZWZ9ICovXG4gICAgdGhpcy5jb250ZXh0XyA9IGNvbnRleHQ7XG5cbiAgICAvKiogQHByaXZhdGUgez9Kc29uT2JqZWN0fSAqL1xuICAgIHRoaXMuYXV0aG9yaXphdGlvblJlc3BvbnNlXyA9XG4gICAgICAgIGNvbmZpZ0pzb25bJ2F1dGhvcml6YXRpb25GYWxsYmFja1Jlc3BvbnNlJ10gfHwgbnVsbDtcblxuICAgIC8qKiBAY29uc3QgQHByaXZhdGUge2Jvb2xlYW59ICovXG4gICAgdGhpcy5pc1Byb3h5T3JpZ2luXyA9IGlzUHJveHlPcmlnaW4oYW1wZG9jLndpbi5sb2NhdGlvbik7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldENvbmZpZygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgJ2F1dGhvcml6YXRpb25SZXNwb25zZSc6IHRoaXMuYXV0aG9yaXphdGlvblJlc3BvbnNlXyxcbiAgICB9O1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBpc0F1dGhvcml6YXRpb25FbmFibGVkKCkge1xuICAgIC8vIFRoZSBgdHlwZT1vdGhlcmAgaXMgYWxsb3dlZCB0byB1c2UgdGhlIGF1dGhvcml6YXRpb24gZmFsbGJhY2ssIGJ1dFxuICAgIC8vIG9ubHkgaWYgaXQncyBub3Qgb24gYGNkbi5hbXBwcm9qZWN0Lm9yZ2AuXG4gICAgcmV0dXJuICghIXRoaXMuYXV0aG9yaXphdGlvblJlc3BvbnNlXyAmJiAhdGhpcy5pc1Byb3h5T3JpZ2luXyk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGF1dGhvcml6ZSgpIHtcbiAgICBkZXYoKS5maW5lKFRBRywgJ1VzZSB0aGUgYXV0aG9yaXphdGlvbiBmYWxsYmFjayBmb3IgdHlwZT1vdGhlcicpO1xuICAgIC8vIERpc2FsbG93IGF1dGhvcml6YXRpb24gZm9yIHByb3h5IG9yaWdpbiAoYGNkbi5hbXBwcm9qZWN0Lm9yZ2ApLlxuICAgIGRldigpLmFzc2VydCghdGhpcy5pc1Byb3h5T3JpZ2luXywgJ0Nhbm5vdCBhdXRob3JpemUgZm9yIHByb3h5IG9yaWdpbicpO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gZGV2KCkuYXNzZXJ0KHRoaXMuYXV0aG9yaXphdGlvblJlc3BvbnNlXyk7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXNwb25zZSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGlzUGluZ2JhY2tFbmFibGVkKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgcGluZ2JhY2soKSB7XG4gICAgZGV2KCkuZmluZShUQUcsICdJZ25vcmUgcGluZ2JhY2snKTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHBvc3RBY3Rpb24oKSB7XG4gICAgLy8gTm90aGluZyB0byBkby5cbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7QWNjZXNzQ2xpZW50QWRhcHRlcn0gZnJvbSAnLi9hbXAtYWNjZXNzLWNsaWVudCc7XG5pbXBvcnQge0p3dEhlbHBlcn0gZnJvbSAnLi9qd3QnO1xuaW1wb3J0IHtTZXJ2aWNlc30gZnJvbSAnLi4vLi4vLi4vc3JjL3NlcnZpY2VzJztcbmltcG9ydCB7YXNzZXJ0SHR0cHNVcmx9IGZyb20gJy4uLy4uLy4uL3NyYy91cmwnO1xuaW1wb3J0IHtkZXYsIHVzZXJ9IGZyb20gJy4uLy4uLy4uL3NyYy9sb2cnO1xuaW1wb3J0IHtkaWN0fSBmcm9tICcuLi8uLi8uLi9zcmMvdXRpbHMvb2JqZWN0JztcbmltcG9ydCB7ZXNjYXBlQ3NzU2VsZWN0b3JJZGVudH0gZnJvbSAnLi4vLi4vLi4vc3JjL2RvbSc7XG5pbXBvcnQge2ZldGNoRG9jdW1lbnR9IGZyb20gJy4uLy4uLy4uL3NyYy9kb2N1bWVudC1mZXRjaGVyJztcbmltcG9ydCB7Z2V0TW9kZX0gZnJvbSAnLi4vLi4vLi4vc3JjL21vZGUnO1xuaW1wb3J0IHtpc0FycmF5fSBmcm9tICcuLi8uLi8uLi9zcmMvdHlwZXMnO1xuaW1wb3J0IHtpc0V4cGVyaW1lbnRPbn0gZnJvbSAnLi4vLi4vLi4vc3JjL2V4cGVyaW1lbnRzJztcbmltcG9ydCB7XG4gIGlzUHJveHlPcmlnaW4sXG4gIHJlbW92ZUZyYWdtZW50LFxuICBzZXJpYWxpemVRdWVyeVN0cmluZyxcbn0gZnJvbSAnLi4vLi4vLi4vc3JjL3VybCc7XG5cbi8qKiBAY29uc3Qge3N0cmluZ30gKi9cbmNvbnN0IFRBRyA9ICdhbXAtYWNjZXNzLXNlcnZlci1qd3QnO1xuXG4vKiogQGNvbnN0IHtudW1iZXJ9ICovXG5jb25zdCBBVVRIT1JJWkFUSU9OX1RJTUVPVVQgPSAzMDAwO1xuXG4vKiogQGNvbnN0IHtzdHJpbmd9ICovXG5jb25zdCBBTVBfQVVEID0gJ2FtcHByb2plY3Qub3JnJztcblxuXG4vKipcbiAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBzZXJ2ZXItc2lkZSBhdXRob3JpemF0aW9uIHByb3RvY29sIHdpdGggSldULiBJbiB0aGlzXG4gKiBhcHByb2FjaCBvbmx5IGltbWVkaWF0ZWx5IHZpc2libGUgc2VjdGlvbnMgYXJlIGRvd25sb2FkZWQuIEZvciBhdXRob3JpemF0aW9uLFxuICogdGhlIGNsaWVudCBjYWxscyB0aGUgYXV0aG9yaXphdGlvbiBlbmRwb2ludCwgd2hpY2ggcmV0dXJucyBhIHNpZ25lZCBKV1RcbiAqIHRva2VuIHdpdGggYGFtcF9hdXRoZGF0YWAgZmllbGQuIFRoZSBjbGllbnQgY2FsbHMgQ0ROIHdpdGggdGhpcyBKV1QgdG9rZW4sXG4gKiBhbmQgQ0ROIHJldHVybnMgYmFjayB0aGUgYXV0aG9yaXplZCBjb250ZW50IGZyYWdtZW50cy5cbiAqXG4gKiBUaGUgYXBwcm94aW1hdGUgZGlhZ3JhbSBsb29rcyBsaWtlIHRoaXM6XG4gKlxuICogICAgICAgIEluaXRpYWwgR0VUXG4gKiAgICAgICAgICAgIHx8XG4gKiAgICAgICAgICAgIHx8ICAgW0xpbWl0ZWQgZG9jdW1lbnQ6IGZyYWdtZW50cyByZXF1aXJpbmdcbiAqICAgICAgICAgICAgfHwgICAgICBhdXRob3JpemF0aW9uIGFyZSBleGxjdWRlZF1cbiAqICAgICAgICAgICAgfHxcbiAqICAgICAgICAgICAgXFwvXG4gKiAgICBBdXRob3JpemUgcmVxdWVzdCB0byBQdWJsaXNoZXJcbiAqICAgICAgICAgICAgfHxcbiAqICAgICAgICAgICAgfHwgICBbQXV0aG9yaXphdGlvbiByZXNwb25zZSBhcyBKV1RdXG4gKiAgICAgICAgICAgIHx8XG4gKiAgICAgICAgICAgIFxcL1xuICogICAgQXV0aG9yaXplIHJlcXVlc3QgdG8gQ0ROIHcvSldUXG4gKiAgICAgICAgICAgIHx8XG4gKiAgICAgICAgICAgIHx8ICAgW0F1dGhvcml6ZWQgZnJhZ21lbnRzXVxuICogICAgICAgICAgICB8fFxuICogICAgICAgICAgICBcXC9cbiAqICAgIE1lcmdlIGF1dGhvcml6ZWQgZnJhZ21lbnRzXG4gKiAgICAgICAgICAgIHx8XG4gKiAgICAgICAgICAgIHx8XG4gKiAgICAgICAgICAgIFxcL1xuICogICAgQXBwbHkgYXV0aG9yaXphdGlvbiByZXNwb25zZVxuICpcbiAqIEBpbXBsZW1lbnRzIHsuL2FtcC1hY2Nlc3Mtc291cmNlLkFjY2Vzc1R5cGVBZGFwdGVyRGVmfVxuICovXG5leHBvcnQgY2xhc3MgQWNjZXNzU2VydmVySnd0QWRhcHRlciB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4uLy4uLy4uL3NyYy9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gYW1wZG9jXG4gICAqIEBwYXJhbSB7IUpzb25PYmplY3R9IGNvbmZpZ0pzb25cbiAgICogQHBhcmFtIHshLi9hbXAtYWNjZXNzLXNvdXJjZS5BY2Nlc3NUeXBlQWRhcHRlckNvbnRleHREZWZ9IGNvbnRleHRcbiAgICovXG4gIGNvbnN0cnVjdG9yKGFtcGRvYywgY29uZmlnSnNvbiwgY29udGV4dCkge1xuICAgIC8qKiBAY29uc3QgKi9cbiAgICB0aGlzLmFtcGRvYyA9IGFtcGRvYztcblxuICAgIC8qKiBAY29uc3QgQHByaXZhdGUgeyEuL2FtcC1hY2Nlc3Mtc291cmNlLkFjY2Vzc1R5cGVBZGFwdGVyQ29udGV4dERlZn0gKi9cbiAgICB0aGlzLmNvbnRleHRfID0gY29udGV4dDtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgKi9cbiAgICB0aGlzLmNsaWVudEFkYXB0ZXJfID0gbmV3IEFjY2Vzc0NsaWVudEFkYXB0ZXIoYW1wZG9jLCBjb25maWdKc29uLCBjb250ZXh0KTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi8uLi8uLi9zcmMvc2VydmljZS92aWV3ZXItaW1wbC5WaWV3ZXJ9ICovXG4gICAgdGhpcy52aWV3ZXJfID0gU2VydmljZXMudmlld2VyRm9yRG9jKGFtcGRvYyk7XG5cbiAgICAvKiogQGNvbnN0IEBwcml2YXRlIHshLi4vLi4vLi4vc3JjL3NlcnZpY2UveGhyLWltcGwuWGhyfSAqL1xuICAgIHRoaXMueGhyXyA9IFNlcnZpY2VzLnhockZvcihhbXBkb2Mud2luKTtcblxuICAgIC8qKiBAY29uc3QgQHByaXZhdGUgeyEuLi8uLi8uLi9zcmMvc2VydmljZS90aW1lci1pbXBsLlRpbWVyfSAqL1xuICAgIHRoaXMudGltZXJfID0gU2VydmljZXMudGltZXJGb3IoYW1wZG9jLndpbik7XG5cbiAgICAvKiogQGNvbnN0IEBwcml2YXRlIHshLi4vLi4vLi4vc3JjL3NlcnZpY2UvdnN5bmMtaW1wbC5Wc3luY30gKi9cbiAgICB0aGlzLnZzeW5jXyA9IFNlcnZpY2VzLnZzeW5jRm9yKGFtcGRvYy53aW4pO1xuXG4gICAgY29uc3Qgc3RhdGVFbGVtZW50ID0gYW1wZG9jLmdldFJvb3ROb2RlKCkucXVlcnlTZWxlY3RvcihcbiAgICAgICAgJ21ldGFbbmFtZT1cImktYW1waHRtbC1hY2Nlc3Mtc3RhdGVcIl0nKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qgez9zdHJpbmd9ICovXG4gICAgdGhpcy5zZXJ2ZXJTdGF0ZV8gPSBzdGF0ZUVsZW1lbnQgP1xuICAgICAgc3RhdGVFbGVtZW50LmdldEF0dHJpYnV0ZSgnY29udGVudCcpIDogbnVsbDtcblxuICAgIGNvbnN0IGlzSW5FeHBlcmltZW50ID0gaXNFeHBlcmltZW50T24oYW1wZG9jLndpbiwgJ2FtcC1hY2Nlc3Mtc2VydmVyLWp3dCcpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLmlzUHJveHlPcmlnaW5fID0gaXNQcm94eU9yaWdpbihhbXBkb2Mud2luLmxvY2F0aW9uKSB8fCBpc0luRXhwZXJpbWVudDtcblxuICAgIGNvbnN0IHNlcnZpY2VVcmxPdmVycmlkZSA9IGlzSW5FeHBlcmltZW50ID9cbiAgICAgIHRoaXMudmlld2VyXy5nZXRQYXJhbSgnc2VydmVyQWNjZXNzU2VydmljZScpIDogbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnNlcnZpY2VVcmxfID0gc2VydmljZVVybE92ZXJyaWRlIHx8XG4gICAgICAgIHJlbW92ZUZyYWdtZW50KGFtcGRvYy53aW4ubG9jYXRpb24uaHJlZik7XG5cbiAgICAvKiogQGNvbnN0IEBwcml2YXRlIHs/c3RyaW5nfSAqL1xuICAgIHRoaXMua2V5XyA9IGNvbmZpZ0pzb25bJ3B1YmxpY0tleSddIHx8IG51bGw7XG5cbiAgICAvKiogQGNvbnN0IEBwcml2YXRlIHs/c3RyaW5nfSAqL1xuICAgIHRoaXMua2V5VXJsXyA9IGNvbmZpZ0pzb25bJ3B1YmxpY0tleVVybCddIHx8IG51bGw7XG5cbiAgICB1c2VyKCkuYXNzZXJ0KHRoaXMua2V5XyB8fCB0aGlzLmtleVVybF8sXG4gICAgICAgICdcInB1YmxpY0tleVwiIG9yIFwicHVibGljS2V5VXJsXCIgbXVzdCBiZSBzcGVjaWZpZWQnKTtcbiAgICBpZiAodGhpcy5rZXlVcmxfKSB7XG4gICAgICBhc3NlcnRIdHRwc1VybCh0aGlzLmtleVVybF8sICdcInB1YmxpY0tleVVybFwiJyk7XG4gICAgfVxuICAgIGlmICh0aGlzLmtleV8gJiYgdGhpcy5rZXlVcmxfKSB7XG4gICAgICAvLyBUT0RPKGR2b3l0ZW5rbyk6IFJlbW92ZSBcInB1YmxpY0tleVwiIG9wdGlvbiBldmVudHVhbGx5LlxuICAgICAgdXNlcigpLndhcm4oVEFHLFxuICAgICAgICAgICdCb3RoIFwicHVibGljS2V5XCIgYW5kIFwicHVibGljS2V5VXJsXCIgc3BlY2lmaWVkLiAnICtcbiAgICAgICAgICAnVGhlIFwicHVibGljS2V5VXJsXCIgd2lsbCBiZSBpZ25vcmVkLicpO1xuICAgIH1cblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFKd3RIZWxwZXJ9ICovXG4gICAgdGhpcy5qd3RIZWxwZXJfID0gbmV3IEp3dEhlbHBlcihhbXBkb2Mud2luKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0Q29uZmlnKCkge1xuICAgIHJldHVybiB7XG4gICAgICAnY2xpZW50JzogdGhpcy5jbGllbnRBZGFwdGVyXy5nZXRDb25maWcoKSxcbiAgICAgICdwcm94eSc6IHRoaXMuaXNQcm94eU9yaWdpbl8sXG4gICAgICAnc2VydmVyU3RhdGUnOiB0aGlzLnNlcnZlclN0YXRlXyxcbiAgICAgICdwdWJsaWNLZXknOiB0aGlzLmtleV8sXG4gICAgICAncHVibGljS2V5VXJsJzogdGhpcy5rZXlVcmxfLFxuICAgIH07XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGlzQXV0aG9yaXphdGlvbkVuYWJsZWQoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGF1dGhvcml6ZSgpIHtcbiAgICBkZXYoKS5maW5lKFRBRywgJ1N0YXJ0IGF1dGhvcml6YXRpb24gd2l0aCAnLFxuICAgICAgICB0aGlzLmlzUHJveHlPcmlnaW5fID8gJ3Byb3h5JyA6ICdub24tcHJveHknLFxuICAgICAgICB0aGlzLnNlcnZlclN0YXRlXyxcbiAgICAgICAgdGhpcy5jbGllbnRBZGFwdGVyXy5nZXRBdXRob3JpemF0aW9uVXJsKCkpO1xuICAgIGlmICghdGhpcy5pc1Byb3h5T3JpZ2luXyB8fCAhdGhpcy5zZXJ2ZXJTdGF0ZV8pIHtcbiAgICAgIHJldHVybiB0aGlzLmF1dGhvcml6ZU9uQ2xpZW50XygpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5hdXRob3JpemVPblNlcnZlcl8oKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgaXNQaW5nYmFja0VuYWJsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2xpZW50QWRhcHRlcl8uaXNQaW5nYmFja0VuYWJsZWQoKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgcGluZ2JhY2soKSB7XG4gICAgcmV0dXJuIHRoaXMuY2xpZW50QWRhcHRlcl8ucGluZ2JhY2soKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgcG9zdEFjdGlvbigpIHtcbiAgICAvLyBOb3RoaW5nIHRvIGRvLlxuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFQcm9taXNlPHtlbmNvZGVkOnN0cmluZywgand0OiFKc29uT2JqZWN0fT59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBmZXRjaEp3dF8oKSB7XG4gICAgY29uc3QgdXJsUHJvbWlzZSA9IHRoaXMuY29udGV4dF8uYnVpbGRVcmwoXG4gICAgICAgIHRoaXMuY2xpZW50QWRhcHRlcl8uZ2V0QXV0aG9yaXphdGlvblVybCgpLFxuICAgICAgICAvKiB1c2VBdXRoRGF0YSAqLyBmYWxzZSk7XG4gICAgbGV0IGp3dFByb21pc2UgPSB1cmxQcm9taXNlLnRoZW4odXJsID0+IHtcbiAgICAgIGRldigpLmZpbmUoVEFHLCAnQXV0aG9yaXphdGlvbiBVUkw6ICcsIHVybCk7XG4gICAgICByZXR1cm4gdGhpcy50aW1lcl8udGltZW91dFByb21pc2UoXG4gICAgICAgICAgQVVUSE9SSVpBVElPTl9USU1FT1VULFxuICAgICAgICAgIHRoaXMueGhyXy5mZXRjaFRleHQodXJsLCB7XG4gICAgICAgICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnLFxuICAgICAgICAgIH0pKTtcbiAgICB9KS50aGVuKHJlc3AgPT4ge1xuICAgICAgcmV0dXJuIHJlc3AudGV4dCgpO1xuICAgIH0pLnRoZW4oZW5jb2RlZCA9PiB7XG4gICAgICBjb25zdCBqd3QgPSB0aGlzLmp3dEhlbHBlcl8uZGVjb2RlKGVuY29kZWQpO1xuICAgICAgdXNlcigpLmFzc2VydChqd3RbJ2FtcF9hdXRoZGF0YSddLFxuICAgICAgICAgICdcImFtcF9hdXRoZGF0YVwiIG11c3QgYmUgcHJlc2VudCBpbiBKV1QnKTtcbiAgICAgIHJldHVybiB7ZW5jb2RlZCwgand0fTtcbiAgICB9KTtcbiAgICBpZiAodGhpcy5zaG91bGRCZVZhbGlkYXRlZF8oKSkge1xuICAgICAgLy8gVmFsaWRhdGUgSldUIGluIHRoZSBkZXZlbG9wbWVudCBtb2RlLlxuICAgICAgaWYgKHRoaXMuand0SGVscGVyXy5pc1ZlcmlmaWNhdGlvblN1cHBvcnRlZCgpKSB7XG4gICAgICAgIGp3dFByb21pc2UgPSBqd3RQcm9taXNlLnRoZW4ocmVzcCA9PiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuand0SGVscGVyX1xuICAgICAgICAgICAgICAuZGVjb2RlQW5kVmVyaWZ5KHJlc3AuZW5jb2RlZCwgdGhpcy5sb2FkS2V5UGVtXygpKVxuICAgICAgICAgICAgICAudGhlbigoKSA9PiByZXNwKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1c2VyKCkud2FybihUQUcsICdDYW5ub3QgdmVyaWZ5IHNpZ25hdHVyZSBvbiB0aGlzIGJyb3dzZXIgc2luY2UnICtcbiAgICAgICAgICAgICcgaXQgZG9lc25cXCd0IHN1cHBvcnQgV2ViQ3J5cHRvIEFQSXMnKTtcbiAgICAgIH1cbiAgICAgIGp3dFByb21pc2UgPSBqd3RQcm9taXNlLnRoZW4ocmVzcCA9PiB7XG4gICAgICAgIHRoaXMudmFsaWRhdGVKd3RfKHJlc3Auand0KTtcbiAgICAgICAgcmV0dXJuIHJlc3A7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGp3dFByb21pc2UuY2F0Y2gocmVhc29uID0+IHtcbiAgICAgIHRocm93IHVzZXIoKS5jcmVhdGVFcnJvcignSldUIGZldGNoIG9yIHZhbGlkYXRpb24gZmFpbGVkOiAnLCByZWFzb24pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFQcm9taXNlPHN0cmluZz59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBsb2FkS2V5UGVtXygpIHtcbiAgICBpZiAodGhpcy5rZXlfKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMua2V5Xyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnhocl8uZmV0Y2hUZXh0KGRldigpLmFzc2VydFN0cmluZyh0aGlzLmtleVVybF8pKVxuICAgICAgICAudGhlbihyZXMgPT4gcmVzLnRleHQoKSk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHNob3VsZEJlVmFsaWRhdGVkXygpIHtcbiAgICByZXR1cm4gZ2V0TW9kZSgpLmRldmVsb3BtZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUpzb25PYmplY3R9IGp3dFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdmFsaWRhdGVKd3RfKGp3dCkge1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cbiAgICAvLyBleHA6IGV4cGlyYXRpb24gdGltZS5cbiAgICBjb25zdCBleHAgPSBqd3RbJ2V4cCddO1xuICAgIHVzZXIoKS5hc3NlcnQoZXhwLCAnXCJleHBcIiBmaWVsZCBtdXN0IGJlIHNwZWNpZmllZCcpO1xuICAgIHVzZXIoKS5hc3NlcnQocGFyc2VGbG9hdChleHApICogMTAwMCA+IG5vdyxcbiAgICAgICAgJ3Rva2VuIGhhcyBleHBpcmVkOiAlcycsIGV4cCk7XG5cbiAgICAvLyBhdWQ6IGF1ZGllbmNlLlxuICAgIGNvbnN0IGF1ZCA9IGp3dFsnYXVkJ107XG4gICAgdXNlcigpLmFzc2VydChhdWQsICdcImF1ZFwiIGZpZWxkIG11c3QgYmUgc3BlY2lmaWVkJyk7XG4gICAgbGV0IGF1ZEZvckFtcCA9IGZhbHNlO1xuICAgIGlmIChpc0FycmF5KGF1ZCkpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXVkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChhdWRbaV0gPT0gQU1QX0FVRCkge1xuICAgICAgICAgIGF1ZEZvckFtcCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYXVkRm9yQW1wID0gKGF1ZCA9PSBBTVBfQVVEKTtcbiAgICB9XG4gICAgdXNlcigpLmFzc2VydChhdWRGb3JBbXAsICdcImF1ZFwiIG11c3QgYmUgXCIlc1wiOiAlcycsIEFNUF9BVUQsIGF1ZCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IVByb21pc2U8IUpzb25PYmplY3Q+fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYXV0aG9yaXplT25DbGllbnRfKCkge1xuICAgIGRldigpLmZpbmUoVEFHLCAnUHJvY2VlZCB2aWEgY2xpZW50IHByb3RvY29sIHZpYSAnLFxuICAgICAgICB0aGlzLmNsaWVudEFkYXB0ZXJfLmdldEF1dGhvcml6YXRpb25VcmwoKSk7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hKd3RfKCkudGhlbihyZXNwID0+IHtcbiAgICAgIHJldHVybiByZXNwLmp3dFsnYW1wX2F1dGhkYXRhJ107XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IVByb21pc2U8IUpzb25PYmplY3Q+fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYXV0aG9yaXplT25TZXJ2ZXJfKCkge1xuICAgIGRldigpLmZpbmUoVEFHLCAnUHJvY2VlZCB2aWEgc2VydmVyIHByb3RvY29sJyk7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hKd3RfKCkudGhlbihyZXNwID0+IHtcbiAgICAgIGNvbnN0IHtlbmNvZGVkLCBqd3R9ID0gcmVzcDtcbiAgICAgIGNvbnN0IGFjY2Vzc0RhdGEgPSBqd3RbJ2FtcF9hdXRoZGF0YSddO1xuICAgICAgY29uc3QgcmVxdWVzdCA9IHNlcmlhbGl6ZVF1ZXJ5U3RyaW5nKGRpY3Qoe1xuICAgICAgICAndXJsJzogcmVtb3ZlRnJhZ21lbnQodGhpcy5hbXBkb2Mud2luLmxvY2F0aW9uLmhyZWYpLFxuICAgICAgICAnc3RhdGUnOiB0aGlzLnNlcnZlclN0YXRlXyxcbiAgICAgICAgJ2p3dCc6IGVuY29kZWQsXG4gICAgICB9KSk7XG4gICAgICBkZXYoKS5maW5lKFRBRywgJ0F1dGhvcml6YXRpb24gcmVxdWVzdDogJywgdGhpcy5zZXJ2aWNlVXJsXywgcmVxdWVzdCk7XG4gICAgICBkZXYoKS5maW5lKFRBRywgJy0gYWNjZXNzIGRhdGE6ICcsIGFjY2Vzc0RhdGEpO1xuICAgICAgLy8gTm90ZSB0aGF0IGBhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRgIGlzIHVzZWQgdG8gYXZvaWRcbiAgICAgIC8vIENPUlMgcHJlZmxpZ2h0IHJlcXVlc3QuXG4gICAgICByZXR1cm4gdGhpcy50aW1lcl8udGltZW91dFByb21pc2UoXG4gICAgICAgICAgQVVUSE9SSVpBVElPTl9USU1FT1VULFxuICAgICAgICAgIGZldGNoRG9jdW1lbnQodGhpcy5hbXBkb2Mud2luLCB0aGlzLnNlcnZpY2VVcmxfLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGJvZHk6IHJlcXVlc3QsXG4gICAgICAgICAgICBoZWFkZXJzOiBkaWN0KHtcbiAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICByZXF1aXJlQW1wUmVzcG9uc2VTb3VyY2VPcmlnaW46IGZhbHNlLFxuICAgICAgICAgIH0pKS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgZGV2KCkuZmluZShUQUcsICdBdXRob3JpemF0aW9uIHJlc3BvbnNlOiAnLCByZXNwb25zZSk7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcGxhY2VTZWN0aW9uc18ocmVzcG9uc2UpO1xuICAgICAgfSkudGhlbigoKSA9PiBhY2Nlc3NEYXRhKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgcmVwbGFjZVNlY3Rpb25zXyhkb2MpIHtcbiAgICBjb25zdCBzZWN0aW9ucyA9IGRvYy5xdWVyeVNlbGVjdG9yQWxsKCdbaS1hbXBodG1sLWFjY2Vzcy1pZF0nKTtcbiAgICBkZXYoKS5maW5lKFRBRywgJy0gYWNjZXNzIHNlY3Rpb25zOiAnLCBzZWN0aW9ucyk7XG4gICAgcmV0dXJuIHRoaXMudnN5bmNfLm11dGF0ZVByb21pc2UoKCkgPT4ge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBzZWN0aW9uID0gc2VjdGlvbnNbaV07XG4gICAgICAgIGNvbnN0IHNlY3Rpb25JZCA9IHNlY3Rpb24uZ2V0QXR0cmlidXRlKCdpLWFtcGh0bWwtYWNjZXNzLWlkJyk7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IHRoaXMuYW1wZG9jLmdldFJvb3ROb2RlKCkucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgIGBbaS1hbXBodG1sLWFjY2Vzcy1pZD1cIiR7ZXNjYXBlQ3NzU2VsZWN0b3JJZGVudChzZWN0aW9uSWQpfVwiXWApO1xuICAgICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAgIGRldigpLndhcm4oVEFHLCAnU2VjdGlvbiBub3QgZm91bmQ6ICcsIHNlY3Rpb25JZCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgdGFyZ2V0LnBhcmVudEVsZW1lbnQucmVwbGFjZUNoaWxkKFxuICAgICAgICAgICAgdGhpcy5hbXBkb2Mud2luLmRvY3VtZW50LmltcG9ydE5vZGUoc2VjdGlvbiwgLyogZGVlcCAqLyB0cnVlKSxcbiAgICAgICAgICAgIHRhcmdldCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge0FjY2Vzc0NsaWVudEFkYXB0ZXJ9IGZyb20gJy4vYW1wLWFjY2Vzcy1jbGllbnQnO1xuaW1wb3J0IHtTZXJ2aWNlc30gZnJvbSAnLi4vLi4vLi4vc3JjL3NlcnZpY2VzJztcbmltcG9ydCB7ZGV2fSBmcm9tICcuLi8uLi8uLi9zcmMvbG9nJztcbmltcG9ydCB7ZGljdH0gZnJvbSAnLi4vLi4vLi4vc3JjL3V0aWxzL29iamVjdCc7XG5pbXBvcnQge2VzY2FwZUNzc1NlbGVjdG9ySWRlbnR9IGZyb20gJy4uLy4uLy4uL3NyYy9kb20nO1xuaW1wb3J0IHtmZXRjaERvY3VtZW50fSBmcm9tICcuLi8uLi8uLi9zcmMvZG9jdW1lbnQtZmV0Y2hlcic7XG5pbXBvcnQge2lzRXhwZXJpbWVudE9ufSBmcm9tICcuLi8uLi8uLi9zcmMvZXhwZXJpbWVudHMnO1xuaW1wb3J0IHtpc1Byb3h5T3JpZ2luLCByZW1vdmVGcmFnbWVudH0gZnJvbSAnLi4vLi4vLi4vc3JjL3VybCc7XG5pbXBvcnQge3BhcnNlSnNvbn0gZnJvbSAnLi4vLi4vLi4vc3JjL2pzb24nO1xuXG4vKiogQGNvbnN0IHtzdHJpbmd9ICovXG5jb25zdCBUQUcgPSAnYW1wLWFjY2Vzcy1zZXJ2ZXInO1xuXG5cbi8qKlxuICogVGhpcyBjbGFzcyBpbXBsZW1lbnRzIHNlcnZlci1zaWRlIGF1dGhvcml6YXRpb24gcHJvdG9jb2wuIEluIHRoaXMgYXBwcm9hY2hcbiAqIG9ubHkgaW1tZWRpYXRlbHkgdmlzaWJsZSBzZWN0aW9ucyBhcmUgZG93bmxvYWRlZC4gRm9yIGF1dGhvcml6YXRpb24sIHRoZVxuICogQ0ROIGNhbGxzIHRoZSBhdXRob3JpemF0aW9uIGVuZHBvaW50IGRpcmVjdGx5IGFuZCByZXR1cm5zIGJhY2sgdG8gdGhlXG4gKiBhdXRob3JpemF0aW9uIHJlc3BvbnNlIGFuZCB0aGUgYXV0aG9yaXplZCBjb250ZW50IGZyYWdtZW50cywgd2hpY2ggYXJlXG4gKiBtZXJnZWQgaW50byB0aGUgZG9jdW1lbnQuXG4gKlxuICogVGhlIGFwcHJveGltYXRlIGRpYWdyYW0gbG9va3MgbGlrZSB0aGlzOlxuICpcbiAqICAgICAgICBJbml0aWFsIEdFVFxuICogICAgICAgICAgICB8fFxuICogICAgICAgICAgICB8fCAgIFtMaW1pdGVkIGRvY3VtZW50OiBmcmFnbWVudHMgcmVxdWlyaW5nXG4gKiAgICAgICAgICAgIHx8ICAgICAgYXV0aG9yaXphdGlvbiBhcmUgZXhsY3VkZWRdXG4gKiAgICAgICAgICAgIHx8XG4gKiAgICAgICAgICAgIFxcL1xuICogICAgQXV0aG9yaXplIHJlcXVlc3QgdG8gQ0ROXG4gKiAgICAgICAgICAgIHx8XG4gKiAgICAgICAgICAgIHx8ICAgW0F1dGhvcml6YXRpb24gcmVzcG9uc2VdXG4gKiAgICAgICAgICAgIHx8ICAgW0F1dGhvcml6ZWQgZnJhZ21lbnRzXVxuICogICAgICAgICAgICB8fFxuICogICAgICAgICAgICBcXC9cbiAqICAgIE1lcmdlIGF1dGhvcml6ZWQgZnJhZ21lbnRzXG4gKiAgICAgICAgICAgIHx8XG4gKiAgICAgICAgICAgIHx8XG4gKiAgICAgICAgICAgIFxcL1xuICogICAgQXBwbHkgYXV0aG9yaXphdGlvbiByZXNwb25zZVxuICpcbiAqIEBpbXBsZW1lbnRzIHsuL2FtcC1hY2Nlc3Mtc291cmNlLkFjY2Vzc1R5cGVBZGFwdGVyRGVmfVxuICovXG5leHBvcnQgY2xhc3MgQWNjZXNzU2VydmVyQWRhcHRlciB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4uLy4uLy4uL3NyYy9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gYW1wZG9jXG4gICAqIEBwYXJhbSB7IUpzb25PYmplY3R9IGNvbmZpZ0pzb25cbiAgICogQHBhcmFtIHshLi9hbXAtYWNjZXNzLXNvdXJjZS5BY2Nlc3NUeXBlQWRhcHRlckNvbnRleHREZWZ9IGNvbnRleHRcbiAgICovXG4gIGNvbnN0cnVjdG9yKGFtcGRvYywgY29uZmlnSnNvbiwgY29udGV4dCkge1xuICAgIC8qKiBAY29uc3QgKi9cbiAgICB0aGlzLmFtcGRvYyA9IGFtcGRvYztcblxuICAgIC8qKiBAY29uc3QgQHByaXZhdGUgeyEuL2FtcC1hY2Nlc3Mtc291cmNlLkFjY2Vzc1R5cGVBZGFwdGVyQ29udGV4dERlZn0gKi9cbiAgICB0aGlzLmNvbnRleHRfID0gY29udGV4dDtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgKi9cbiAgICB0aGlzLmNsaWVudEFkYXB0ZXJfID0gbmV3IEFjY2Vzc0NsaWVudEFkYXB0ZXIoYW1wZG9jLCBjb25maWdKc29uLCBjb250ZXh0KTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi8uLi8uLi9zcmMvc2VydmljZS92aWV3ZXItaW1wbC5WaWV3ZXJ9ICovXG4gICAgdGhpcy52aWV3ZXJfID0gU2VydmljZXMudmlld2VyRm9yRG9jKGFtcGRvYyk7XG5cbiAgICAvKiogQGNvbnN0IEBwcml2YXRlIHshLi4vLi4vLi4vc3JjL3NlcnZpY2UveGhyLWltcGwuWGhyfSAqL1xuICAgIHRoaXMueGhyXyA9IFNlcnZpY2VzLnhockZvcihhbXBkb2Mud2luKTtcblxuICAgIC8qKiBAY29uc3QgQHByaXZhdGUgeyEuLi8uLi8uLi9zcmMvc2VydmljZS90aW1lci1pbXBsLlRpbWVyfSAqL1xuICAgIHRoaXMudGltZXJfID0gU2VydmljZXMudGltZXJGb3IoYW1wZG9jLndpbik7XG5cbiAgICAvKiogQGNvbnN0IEBwcml2YXRlIHshLi4vLi4vLi4vc3JjL3NlcnZpY2UvdnN5bmMtaW1wbC5Wc3luY30gKi9cbiAgICB0aGlzLnZzeW5jXyA9IFNlcnZpY2VzLnZzeW5jRm9yKGFtcGRvYy53aW4pO1xuXG4gICAgY29uc3Qgc3RhdGVFbGVtZW50ID0gYW1wZG9jLmdldFJvb3ROb2RlKCkucXVlcnlTZWxlY3RvcihcbiAgICAgICAgJ21ldGFbbmFtZT1cImktYW1waHRtbC1hY2Nlc3Mtc3RhdGVcIl0nKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qgez9zdHJpbmd9ICovXG4gICAgdGhpcy5zZXJ2ZXJTdGF0ZV8gPSBzdGF0ZUVsZW1lbnQgP1xuICAgICAgc3RhdGVFbGVtZW50LmdldEF0dHJpYnV0ZSgnY29udGVudCcpIDogbnVsbDtcblxuICAgIGNvbnN0IGlzSW5FeHBlcmltZW50ID0gaXNFeHBlcmltZW50T24oYW1wZG9jLndpbiwgJ2FtcC1hY2Nlc3Mtc2VydmVyJyk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtib29sZWFufSAqL1xuICAgIHRoaXMuaXNQcm94eU9yaWdpbl8gPSBpc1Byb3h5T3JpZ2luKGFtcGRvYy53aW4ubG9jYXRpb24pIHx8IGlzSW5FeHBlcmltZW50O1xuXG4gICAgY29uc3Qgc2VydmljZVVybE92ZXJyaWRlID0gaXNJbkV4cGVyaW1lbnQgP1xuICAgICAgdGhpcy52aWV3ZXJfLmdldFBhcmFtKCdzZXJ2ZXJBY2Nlc3NTZXJ2aWNlJykgOiBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMuc2VydmljZVVybF8gPSBzZXJ2aWNlVXJsT3ZlcnJpZGUgfHxcbiAgICAgICAgcmVtb3ZlRnJhZ21lbnQoYW1wZG9jLndpbi5sb2NhdGlvbi5ocmVmKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0Q29uZmlnKCkge1xuICAgIHJldHVybiB7XG4gICAgICAnY2xpZW50JzogdGhpcy5jbGllbnRBZGFwdGVyXy5nZXRDb25maWcoKSxcbiAgICAgICdwcm94eSc6IHRoaXMuaXNQcm94eU9yaWdpbl8sXG4gICAgICAnc2VydmVyU3RhdGUnOiB0aGlzLnNlcnZlclN0YXRlXyxcbiAgICB9O1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBpc0F1dGhvcml6YXRpb25FbmFibGVkKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhdXRob3JpemUoKSB7XG4gICAgZGV2KCkuZmluZShUQUcsICdTdGFydCBhdXRob3JpemF0aW9uIHdpdGggJyxcbiAgICAgICAgdGhpcy5pc1Byb3h5T3JpZ2luXyA/ICdwcm94eScgOiAnbm9uLXByb3h5JyxcbiAgICAgICAgdGhpcy5zZXJ2ZXJTdGF0ZV8sXG4gICAgICAgIHRoaXMuY2xpZW50QWRhcHRlcl8uZ2V0QXV0aG9yaXphdGlvblVybCgpKTtcbiAgICBpZiAoIXRoaXMuaXNQcm94eU9yaWdpbl8gfHwgIXRoaXMuc2VydmVyU3RhdGVfKSB7XG4gICAgICBkZXYoKS5maW5lKFRBRywgJ1Byb2NlZWQgdmlhIGNsaWVudCBwcm90b2NvbCcpO1xuICAgICAgcmV0dXJuIHRoaXMuY2xpZW50QWRhcHRlcl8uYXV0aG9yaXplKCk7XG4gICAgfVxuXG4gICAgZGV2KCkuZmluZShUQUcsICdQcm9jZWVkIHZpYSBzZXJ2ZXIgcHJvdG9jb2wnKTtcblxuICAgIGNvbnN0IHZhcnNQcm9taXNlID0gdGhpcy5jb250ZXh0Xy5jb2xsZWN0VXJsVmFycyhcbiAgICAgICAgdGhpcy5jbGllbnRBZGFwdGVyXy5nZXRBdXRob3JpemF0aW9uVXJsKCksXG4gICAgICAgIC8qIHVzZUF1dGhEYXRhICovIGZhbHNlKTtcbiAgICByZXR1cm4gdmFyc1Byb21pc2UudGhlbih2YXJzID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3RWYXJzID0ge307XG4gICAgICBmb3IgKGNvbnN0IGsgaW4gdmFycykge1xuICAgICAgICBpZiAodmFyc1trXSAhPSBudWxsKSB7XG4gICAgICAgICAgcmVxdWVzdFZhcnNba10gPSBTdHJpbmcodmFyc1trXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBkaWN0KHtcbiAgICAgICAgJ3VybCc6IHJlbW92ZUZyYWdtZW50KHRoaXMuYW1wZG9jLndpbi5sb2NhdGlvbi5ocmVmKSxcbiAgICAgICAgJ3N0YXRlJzogdGhpcy5zZXJ2ZXJTdGF0ZV8sXG4gICAgICAgICd2YXJzJzogcmVxdWVzdFZhcnMsXG4gICAgICB9KTtcbiAgICAgIGRldigpLmZpbmUoVEFHLCAnQXV0aG9yaXphdGlvbiByZXF1ZXN0OiAnLCB0aGlzLnNlcnZpY2VVcmxfLCByZXF1ZXN0KTtcbiAgICAgIC8vIE5vdGUgdGhhdCBgYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkYCBpcyB1c2VkIHRvIGF2b2lkXG4gICAgICAvLyBDT1JTIHByZWZsaWdodCByZXF1ZXN0LlxuICAgICAgcmV0dXJuIHRoaXMudGltZXJfLnRpbWVvdXRQcm9taXNlKFxuICAgICAgICAgIHRoaXMuY2xpZW50QWRhcHRlcl8uZ2V0QXV0aG9yaXphdGlvblRpbWVvdXQoKSxcbiAgICAgICAgICBmZXRjaERvY3VtZW50KHRoaXMuYW1wZG9jLndpbiwgdGhpcy5zZXJ2aWNlVXJsXywge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBib2R5OiAncmVxdWVzdD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpKSxcbiAgICAgICAgICAgIGhlYWRlcnM6IGRpY3Qoe1xuICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHJlcXVpcmVBbXBSZXNwb25zZVNvdXJjZU9yaWdpbjogZmFsc2UsXG4gICAgICAgICAgfSkpO1xuICAgIH0pLnRoZW4ocmVzcG9uc2VEb2MgPT4ge1xuICAgICAgZGV2KCkuZmluZShUQUcsICdBdXRob3JpemF0aW9uIHJlc3BvbnNlOiAnLCByZXNwb25zZURvYyk7XG4gICAgICBjb25zdCBhY2Nlc3NEYXRhU3RyaW5nID0gZGV2KCkuYXNzZXJ0KFxuICAgICAgICAgIHJlc3BvbnNlRG9jLnF1ZXJ5U2VsZWN0b3IoJ3NjcmlwdFtpZD1cImFtcC1hY2Nlc3MtZGF0YVwiXScpLFxuICAgICAgICAgICdObyBhdXRob3JpemF0aW9uIGRhdGEgYXZhaWxhYmxlJykudGV4dENvbnRlbnQ7XG4gICAgICBjb25zdCBhY2Nlc3NEYXRhID0gcGFyc2VKc29uKGFjY2Vzc0RhdGFTdHJpbmcpO1xuICAgICAgZGV2KCkuZmluZShUQUcsICctIGFjY2VzcyBkYXRhOiAnLCBhY2Nlc3NEYXRhKTtcblxuICAgICAgcmV0dXJuIHRoaXMucmVwbGFjZVNlY3Rpb25zXyhyZXNwb25zZURvYykudGhlbigoKSA9PiB7XG4gICAgICAgIHJldHVybiBhY2Nlc3NEYXRhO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGlzUGluZ2JhY2tFbmFibGVkKCkge1xuICAgIHJldHVybiB0aGlzLmNsaWVudEFkYXB0ZXJfLmlzUGluZ2JhY2tFbmFibGVkKCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHBpbmdiYWNrKCkge1xuICAgIHJldHVybiB0aGlzLmNsaWVudEFkYXB0ZXJfLnBpbmdiYWNrKCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHBvc3RBY3Rpb24oKSB7XG4gICAgLy8gTm90aGluZyB0byBkby5cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgcmVwbGFjZVNlY3Rpb25zXyhkb2MpIHtcbiAgICBjb25zdCBzZWN0aW9ucyA9IGRvYy5xdWVyeVNlbGVjdG9yQWxsKCdbaS1hbXBodG1sLWFjY2Vzcy1pZF0nKTtcbiAgICBkZXYoKS5maW5lKFRBRywgJy0gYWNjZXNzIHNlY3Rpb25zOiAnLCBzZWN0aW9ucyk7XG4gICAgcmV0dXJuIHRoaXMudnN5bmNfLm11dGF0ZVByb21pc2UoKCkgPT4ge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBzZWN0aW9uID0gc2VjdGlvbnNbaV07XG4gICAgICAgIGNvbnN0IHNlY3Rpb25JZCA9IHNlY3Rpb24uZ2V0QXR0cmlidXRlKCdpLWFtcGh0bWwtYWNjZXNzLWlkJyk7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IHRoaXMuYW1wZG9jLmdldFJvb3ROb2RlKCkucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgIGBbaS1hbXBodG1sLWFjY2Vzcy1pZD1cIiR7ZXNjYXBlQ3NzU2VsZWN0b3JJZGVudChzZWN0aW9uSWQpfVwiXWApO1xuICAgICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAgIGRldigpLndhcm4oVEFHLCAnU2VjdGlvbiBub3QgZm91bmQ6ICcsIHNlY3Rpb25JZCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgdGFyZ2V0LnBhcmVudEVsZW1lbnQucmVwbGFjZUNoaWxkKFxuICAgICAgICAgICAgdGhpcy5hbXBkb2Mud2luLmRvY3VtZW50LmltcG9ydE5vZGUoc2VjdGlvbiwgLyogZGVlcCAqLyB0cnVlKSxcbiAgICAgICAgICAgIHRhcmdldCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge0FjY2Vzc0NsaWVudEFkYXB0ZXJ9IGZyb20gJy4vYW1wLWFjY2Vzcy1jbGllbnQnO1xuaW1wb3J0IHtBY2Nlc3NJZnJhbWVBZGFwdGVyfSBmcm9tICcuL2FtcC1hY2Nlc3MtaWZyYW1lJztcbmltcG9ydCB7QWNjZXNzT3RoZXJBZGFwdGVyfSBmcm9tICcuL2FtcC1hY2Nlc3Mtb3RoZXInO1xuaW1wb3J0IHtBY2Nlc3NTZXJ2ZXJBZGFwdGVyfSBmcm9tICcuL2FtcC1hY2Nlc3Mtc2VydmVyJztcbmltcG9ydCB7QWNjZXNzU2VydmVySnd0QWRhcHRlcn0gZnJvbSAnLi9hbXAtYWNjZXNzLXNlcnZlci1qd3QnO1xuaW1wb3J0IHtBY2Nlc3NWZW5kb3JBZGFwdGVyfSBmcm9tICcuL2FtcC1hY2Nlc3MtdmVuZG9yJztcbmltcG9ydCB7RGVmZXJyZWR9IGZyb20gJy4uLy4uLy4uL3NyYy91dGlscy9wcm9taXNlJztcbmltcG9ydCB7U2VydmljZXN9IGZyb20gJy4uLy4uLy4uL3NyYy9zZXJ2aWNlcyc7XG5pbXBvcnQge2Fzc2VydEh0dHBzVXJsLCBnZXRTb3VyY2VPcmlnaW59IGZyb20gJy4uLy4uLy4uL3NyYy91cmwnO1xuaW1wb3J0IHtkZXYsIHVzZXJ9IGZyb20gJy4uLy4uLy4uL3NyYy9sb2cnO1xuaW1wb3J0IHtkaWN0fSBmcm9tICcuLi8uLi8uLi9zcmMvdXRpbHMvb2JqZWN0JztcbmltcG9ydCB7Z2V0TG9naW5VcmwsIG9wZW5Mb2dpbkRpYWxvZ30gZnJvbSAnLi9sb2dpbi1kaWFsb2cnO1xuaW1wb3J0IHtnZXRWYWx1ZUZvckV4cHJ9IGZyb20gJy4uLy4uLy4uL3NyYy9qc29uJztcbmltcG9ydCB7aXNFeHBlcmltZW50T259IGZyb20gJy4uLy4uLy4uL3NyYy9leHBlcmltZW50cyc7XG5pbXBvcnQge2lzT2JqZWN0fSBmcm9tICcuLi8uLi8uLi9zcmMvdHlwZXMnO1xuaW1wb3J0IHtwYXJzZVF1ZXJ5U3RyaW5nfSBmcm9tICcuLi8uLi8uLi9zcmMvdXJsJztcbmltcG9ydCB7dHJpZ2dlckFuYWx5dGljc0V2ZW50fSBmcm9tICcuLi8uLi8uLi9zcmMvYW5hbHl0aWNzJztcblxuXG4vKiogQGNvbnN0ICovXG5jb25zdCBUQUcgPSAnYW1wLWFjY2Vzcyc7XG5cbi8qKlxuICogVGhlIHR5cGUgb2YgYWNjZXNzIGZsb3cuXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgQWNjZXNzVHlwZSA9IHtcbiAgQ0xJRU5UOiAnY2xpZW50JyxcbiAgSUZSQU1FOiAnaWZyYW1lJyxcbiAgU0VSVkVSOiAnc2VydmVyJyxcbiAgVkVORE9SOiAndmVuZG9yJyxcbiAgT1RIRVI6ICdvdGhlcicsXG59O1xuXG5cbi8qKlxuICogQWNjZXNzU291cmNlIHJlcHJlc2VudHMgYSBzaW5nbGUgc291cmNlIG9mIGF1dGhlbnRpY2F0aW9uIGluZm9ybWF0aW9uIGZvciBhXG4gKiBwYWdlLiBUaGVzZSBzb3VyY2VzIGFyZSBjb25zdHJ1Y3RlZCwgdW5pZmllZCBhbmQgYXR0YWNoZWQgdG8gdGhlIGRvY3VtZW50IGJ5XG4gKiBBY2Nlc3NTZXJ2aWNlLlxuICovXG5leHBvcnQgY2xhc3MgQWNjZXNzU291cmNlIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4uLy4uLy4uL3NyYy9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gYW1wZG9jXG4gICAqIEBwYXJhbSB7IUpzb25PYmplY3R9IGNvbmZpZ0pzb25cbiAgICogQHBhcmFtIHtmdW5jdGlvbigpOiFQcm9taXNlPHN0cmluZz59IHJlYWRlcklkRm5cbiAgICogQHBhcmFtIHtmdW5jdGlvbih0aW1lKX0gc2NoZWR1bGVWaWV3Rm5cbiAgICogQHBhcmFtIHtmdW5jdGlvbighUHJvbWlzZSl9IG9uUmVhdXRob3JpemVGblxuICAgKiBAcGFyYW0geyFFbGVtZW50fSBhY2Nlc3NFbGVtZW50XG4gICAqL1xuICBjb25zdHJ1Y3RvcihhbXBkb2MsIGNvbmZpZ0pzb24sIHJlYWRlcklkRm4sIHNjaGVkdWxlVmlld0ZuLFxuICAgIG9uUmVhdXRob3JpemVGbiwgYWNjZXNzRWxlbWVudCkge1xuXG4gICAgLyoqIEBjb25zdCAqL1xuICAgIHRoaXMuYW1wZG9jID0gYW1wZG9jO1xuXG4gICAgLyoqIEBjb25zdCAqL1xuICAgIHRoaXMuZ2V0UmVhZGVySWRfID0gcmVhZGVySWRGbjtcblxuICAgIC8qKiBAY29uc3QgKi9cbiAgICB0aGlzLnNjaGVkdWxlVmlld18gPSBzY2hlZHVsZVZpZXdGbjtcblxuICAgIC8qKiBAY29uc3QgKi9cbiAgICB0aGlzLm9uUmVhdXRob3JpemVfID0gb25SZWF1dGhvcml6ZUZuO1xuXG4gICAgLyoqIEBjb25zdCAqL1xuICAgIHRoaXMuYWNjZXNzRWxlbWVudF8gPSBhY2Nlc3NFbGVtZW50O1xuXG4gICAgLyoqIEBjb25zdCBAcHJpdmF0ZSB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLmlzU2VydmVyRW5hYmxlZF8gPSBpc0V4cGVyaW1lbnRPbihhbXBkb2Mud2luLCAnYW1wLWFjY2Vzcy1zZXJ2ZXInKTtcblxuICAgIC8qKiBAY29uc3QgQHByaXZhdGUge2Jvb2xlYW59ICovXG4gICAgdGhpcy5pc0p3dEVuYWJsZWRfID0gaXNFeHBlcmltZW50T24oYW1wZG9jLndpbiwgJ2FtcC1hY2Nlc3Mtand0Jyk7XG5cbiAgICAvKiogQGNvbnN0IHshQWNjZXNzVHlwZX0gKi9cbiAgICB0aGlzLnR5cGVfID0gdGhpcy5idWlsZENvbmZpZ1R5cGVfKGNvbmZpZ0pzb24pO1xuXG4gICAgLyoqIEBjb25zdCB7IUpzb25PYmplY3R9ICovXG4gICAgdGhpcy5sb2dpbkNvbmZpZ18gPSB0aGlzLmJ1aWxkQ29uZmlnTG9naW5NYXBfKGNvbmZpZ0pzb24pO1xuXG4gICAgLyoqIEBjb25zdCB7P0pzb25PYmplY3R9ICovXG4gICAgdGhpcy5hdXRob3JpemF0aW9uRmFsbGJhY2tSZXNwb25zZV8gPVxuICAgICAgICBjb25maWdKc29uWydhdXRob3JpemF0aW9uRmFsbGJhY2tSZXNwb25zZSddO1xuXG4gICAgLyoqIEBjb25zdCB7P3N0cmluZ30gKi9cbiAgICB0aGlzLm5hbWVzcGFjZV8gPSBjb25maWdKc29uWyduYW1lc3BhY2UnXSB8fCBudWxsO1xuXG4gICAgLyoqIEBjb25zdCB7IUFjY2Vzc1R5cGVBZGFwdGVyRGVmfSAqL1xuICAgIHRoaXMuYWRhcHRlcl8gPSB0aGlzLmNyZWF0ZUFkYXB0ZXJfKGNvbmZpZ0pzb24pO1xuXG4gICAgLyoqIEBjb25zdCBAcHJpdmF0ZSB7IXN0cmluZ30gKi9cbiAgICB0aGlzLnB1Yk9yaWdpbl8gPSBnZXRTb3VyY2VPcmlnaW4oYW1wZG9jLndpbi5sb2NhdGlvbik7XG5cbiAgICAvKiogQGNvbnN0IEBwcml2YXRlIHshLi4vLi4vLi4vc3JjL3NlcnZpY2UvdXJsLXJlcGxhY2VtZW50cy1pbXBsLlVybFJlcGxhY2VtZW50c30gKi9cbiAgICB0aGlzLnVybFJlcGxhY2VtZW50c18gPSBTZXJ2aWNlcy51cmxSZXBsYWNlbWVudHNGb3JEb2MoYW1wZG9jKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi8uLi8uLi9zcmMvc2VydmljZS92aWV3ZXItaW1wbC5WaWV3ZXJ9ICovXG4gICAgdGhpcy52aWV3ZXJfID0gU2VydmljZXMudmlld2VyRm9yRG9jKGFtcGRvYyk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtmdW5jdGlvbihzdHJpbmcpOlByb21pc2U8c3RyaW5nPn0gKi9cbiAgICB0aGlzLm9wZW5Mb2dpbkRpYWxvZ18gPSBvcGVuTG9naW5EaWFsb2cuYmluZChudWxsLCBhbXBkb2MpO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/SnNvbk9iamVjdH0gKi9cbiAgICB0aGlzLmF1dGhSZXNwb25zZV8gPSBudWxsO1xuXG4gICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgcGF0dGVybiBhbGxvd3MgQWNjZXNzU2VydmljZSB0byBhdHRhY2ggYmVoYXZpb3IgdG8gYXV0aG9yaXphdGlvblxuICAgICAqIGJlZm9yZSBydW5BdXRob3JpemF0aW9uKCkgaXMgYWN0dWFsbHkgY2FsbGVkLlxuICAgICAqIEBjb25zdCBAcHJpdmF0ZSB7IVByb21pc2V9XG4gICAgICovXG4gICAgdGhpcy5maXJzdEF1dGhvcml6YXRpb25Qcm9taXNlXyA9IGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAvKiogQHByaXZhdGUgez9GdW5jdGlvbn0gKi9cbiAgICB0aGlzLmZpcnN0QXV0aG9yaXphdGlvblJlc29sdmVyXyA9IGRlZmVycmVkLnJlc29sdmU7XG5cbiAgICAvKiogQHByaXZhdGUgeyFPYmplY3Q8c3RyaW5nLCBzdHJpbmc+fSAqL1xuICAgIHRoaXMubG9naW5VcmxNYXBfID0ge307XG5cbiAgICAvKiogQHByaXZhdGUgez9Qcm9taXNlfSAqL1xuICAgIHRoaXMubG9naW5Qcm9taXNlXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgeyF0aW1lfSAqL1xuICAgIHRoaXMubG9naW5TdGFydFRpbWVfID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/c3RyaW5nfVxuICAgKi9cbiAgZ2V0TmFtZXNwYWNlKCkge1xuICAgIHJldHVybiB0aGlzLm5hbWVzcGFjZV87XG4gIH1cblxuICAvKiogQHJldHVybiB7IUFjY2Vzc1R5cGV9ICovXG4gIGdldFR5cGUoKSB7XG4gICAgcmV0dXJuIHRoaXMudHlwZV87XG4gIH1cblxuICAvKiogQHJldHVybiB7IUFjY2Vzc1R5cGVBZGFwdGVyRGVmfSAqL1xuICBnZXRBZGFwdGVyKCkge1xuICAgIHJldHVybiB0aGlzLmFkYXB0ZXJfO1xuICB9XG5cbiAgLyoqIEByZXR1cm4gez9Kc29uT2JqZWN0fSAqL1xuICBnZXRBdXRoUmVzcG9uc2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuYXV0aFJlc3BvbnNlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFKc29uT2JqZWN0fSBjb25maWdKc29uXG4gICAqIEByZXR1cm4geyFBY2Nlc3NUeXBlQWRhcHRlckRlZn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNyZWF0ZUFkYXB0ZXJfKGNvbmZpZ0pzb24pIHtcbiAgICBjb25zdCBjb250ZXh0ID0gLyoqIEB0eXBlIHshQWNjZXNzVHlwZUFkYXB0ZXJDb250ZXh0RGVmfSAqLyAoe1xuICAgICAgYnVpbGRVcmw6IHRoaXMuYnVpbGRVcmwuYmluZCh0aGlzKSxcbiAgICAgIGNvbGxlY3RVcmxWYXJzOiB0aGlzLmNvbGxlY3RVcmxWYXJzLmJpbmQodGhpcyksXG4gICAgfSk7XG4gICAgY29uc3QgaXNKd3QgPSAodGhpcy5pc0p3dEVuYWJsZWRfICYmIGNvbmZpZ0pzb25bJ2p3dCddID09PSB0cnVlKTtcbiAgICBzd2l0Y2ggKHRoaXMudHlwZV8pIHtcbiAgICAgIGNhc2UgQWNjZXNzVHlwZS5DTElFTlQ6XG4gICAgICAgIGlmIChpc0p3dCkge1xuICAgICAgICAgIHJldHVybiBuZXcgQWNjZXNzU2VydmVySnd0QWRhcHRlcih0aGlzLmFtcGRvYywgY29uZmlnSnNvbiwgY29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBBY2Nlc3NDbGllbnRBZGFwdGVyKHRoaXMuYW1wZG9jLCBjb25maWdKc29uLCBjb250ZXh0KTtcbiAgICAgIGNhc2UgQWNjZXNzVHlwZS5JRlJBTUU6XG4gICAgICAgIHJldHVybiBuZXcgQWNjZXNzSWZyYW1lQWRhcHRlcih0aGlzLmFtcGRvYywgY29uZmlnSnNvbiwgY29udGV4dCk7XG4gICAgICBjYXNlIEFjY2Vzc1R5cGUuU0VSVkVSOlxuICAgICAgICBpZiAoaXNKd3QpIHtcbiAgICAgICAgICByZXR1cm4gbmV3IEFjY2Vzc1NlcnZlckp3dEFkYXB0ZXIodGhpcy5hbXBkb2MsIGNvbmZpZ0pzb24sIGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgQWNjZXNzU2VydmVyQWRhcHRlcih0aGlzLmFtcGRvYywgY29uZmlnSnNvbiwgY29udGV4dCk7XG4gICAgICBjYXNlIEFjY2Vzc1R5cGUuVkVORE9SOlxuICAgICAgICByZXR1cm4gbmV3IEFjY2Vzc1ZlbmRvckFkYXB0ZXIodGhpcy5hbXBkb2MsIGNvbmZpZ0pzb24pO1xuICAgICAgY2FzZSBBY2Nlc3NUeXBlLk9USEVSOlxuICAgICAgICByZXR1cm4gbmV3IEFjY2Vzc090aGVyQWRhcHRlcih0aGlzLmFtcGRvYywgY29uZmlnSnNvbiwgY29udGV4dCk7XG4gICAgfVxuICAgIHRocm93IGRldigpLmNyZWF0ZUVycm9yKCdVbnN1cHBvcnRlZCBhY2Nlc3MgdHlwZTogJywgdGhpcy50eXBlXyk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IUpzb25PYmplY3R9XG4gICAqL1xuICBnZXRBZGFwdGVyQ29uZmlnKCkge1xuICAgIHJldHVybiB0aGlzLmFkYXB0ZXJfLmdldENvbmZpZygpO1xuICB9XG5cblxuICAvKipcbiAgICogQHJldHVybiB7IVByb21pc2V9IFJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgaW5pdGlhbCBhdXRob3JpemF0aW9uLlxuICAgKi9cbiAgd2hlbkZpcnN0QXV0aG9yaXplZCgpIHtcbiAgICByZXR1cm4gdGhpcy5maXJzdEF1dGhvcml6YXRpb25Qcm9taXNlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFKc29uT2JqZWN0fSBjb25maWdKc29uXG4gICAqIEByZXR1cm4geyFBY2Nlc3NUeXBlfVxuICAgKi9cbiAgYnVpbGRDb25maWdUeXBlXyhjb25maWdKc29uKSB7XG4gICAgbGV0IHR5cGUgPSBjb25maWdKc29uWyd0eXBlJ10gP1xuICAgICAgdXNlcigpLmFzc2VydEVudW1WYWx1ZShBY2Nlc3NUeXBlLCBjb25maWdKc29uWyd0eXBlJ10sICdhY2Nlc3MgdHlwZScpIDpcbiAgICAgIG51bGw7XG4gICAgaWYgKCF0eXBlKSB7XG4gICAgICBpZiAoY29uZmlnSnNvblsndmVuZG9yJ10pIHtcbiAgICAgICAgdHlwZSA9IEFjY2Vzc1R5cGUuVkVORE9SO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHlwZSA9IEFjY2Vzc1R5cGUuQ0xJRU5UO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZSA9PSBBY2Nlc3NUeXBlLlNFUlZFUiAmJiAhdGhpcy5pc1NlcnZlckVuYWJsZWRfKSB7XG4gICAgICB1c2VyKCkud2FybihUQUcsICdFeHBlcmltZW50IFwiYW1wLWFjY2Vzcy1zZXJ2ZXJcIiBpcyBub3QgZW5hYmxlZC4nKTtcbiAgICAgIHR5cGUgPSBBY2Nlc3NUeXBlLkNMSUVOVDtcbiAgICB9XG4gICAgaWYgKHR5cGUgPT0gQWNjZXNzVHlwZS5DTElFTlQgJiYgdGhpcy5pc1NlcnZlckVuYWJsZWRfKSB7XG4gICAgICB1c2VyKCkuaW5mbyhUQUcsICdGb3JjaW5nIGFjY2VzcyB0eXBlOiBTRVJWRVInKTtcbiAgICAgIHR5cGUgPSBBY2Nlc3NUeXBlLlNFUlZFUjtcbiAgICB9XG4gICAgaWYgKHR5cGUgPT0gQWNjZXNzVHlwZS5JRlJBTUUgJiZcbiAgICAgICAgIWlzRXhwZXJpbWVudE9uKHRoaXMuYW1wZG9jLndpbiwgJ2FtcC1hY2Nlc3MtaWZyYW1lJykpIHtcbiAgICAgIHVzZXIoKS5lcnJvcihUQUcsICdFeHBlcmltZW50IFwiYW1wLWFjY2Vzcy1pZnJhbWVcIiBpcyBub3QgZW5hYmxlZC4nKTtcbiAgICAgIHR5cGUgPSBBY2Nlc3NUeXBlLkNMSUVOVDtcbiAgICB9XG4gICAgcmV0dXJuIHR5cGU7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshSnNvbk9iamVjdH0gY29uZmlnSnNvblxuICAgKiBAcmV0dXJuIHshSnNvbk9iamVjdH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGJ1aWxkQ29uZmlnTG9naW5NYXBfKGNvbmZpZ0pzb24pIHtcbiAgICBjb25zdCBsb2dpbkNvbmZpZyA9IGNvbmZpZ0pzb25bJ2xvZ2luJ107XG4gICAgY29uc3QgbG9naW5NYXAgPSBkaWN0KCk7XG4gICAgaWYgKCFsb2dpbkNvbmZpZykge1xuICAgICAgLy8gSWdub3JlOiBpbiBzb21lIGNhc2VzIGxvZ2luIGNvbmZpZyBpcyBub3QgbmVjZXNzYXJ5LlxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGxvZ2luQ29uZmlnID09ICdzdHJpbmcnKSB7XG4gICAgICBsb2dpbk1hcFsnJ10gPSBsb2dpbkNvbmZpZztcbiAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KGxvZ2luQ29uZmlnKSkge1xuICAgICAgZm9yIChjb25zdCBrIGluIGxvZ2luQ29uZmlnKSB7XG4gICAgICAgIGxvZ2luTWFwW2tdID0gbG9naW5Db25maWdba107XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHVzZXIoKS5hc3NlcnQoZmFsc2UsXG4gICAgICAgICAgJ1wibG9naW5cIiBtdXN0IGJlIGVpdGhlciBhIHNpbmdsZSBVUkwgb3IgYSBtYXAgb2YgVVJMcycpO1xuICAgIH1cblxuICAgIC8vIENoZWNrIHRoYXQgYWxsIFVSTHMgYXJlIHZhbGlkLlxuICAgIGZvciAoY29uc3QgayBpbiBsb2dpbk1hcCkge1xuICAgICAgYXNzZXJ0SHR0cHNVcmwobG9naW5NYXBba10sIHRoaXMuYWNjZXNzRWxlbWVudF8pO1xuICAgIH1cbiAgICByZXR1cm4gbG9naW5NYXA7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IUVsZW1lbnR9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRSb290RWxlbWVudF8oKSB7XG4gICAgY29uc3Qgcm9vdCA9IHRoaXMuYW1wZG9jLmdldFJvb3ROb2RlKCk7XG4gICAgcmV0dXJuIGRldigpLmFzc2VydEVsZW1lbnQocm9vdC5kb2N1bWVudEVsZW1lbnQgfHwgcm9vdC5ib2R5IHx8IHJvb3QpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFR5cGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFuYWx5dGljc0V2ZW50XyhldmVudFR5cGUpIHtcbiAgICB0cmlnZ2VyQW5hbHl0aWNzRXZlbnQodGhpcy5nZXRSb290RWxlbWVudF8oKSwgZXZlbnRUeXBlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEbyBzb21lIGluaXRpYWwgc2V0dXAuXG4gICAqL1xuICBzdGFydCgpIHtcbiAgICBkZXYoKS5maW5lKFRBRywgJ2NvbmZpZzonLCB0aGlzLnR5cGVfLCB0aGlzLmxvZ2luQ29uZmlnXyxcbiAgICAgICAgdGhpcy5hZGFwdGVyXy5nZXRDb25maWcoKSk7XG5cbiAgICAvLyBDYWxjdWxhdGUgbG9naW4gVVJMcyByaWdodCBhd2F5LlxuICAgIHRoaXMuYnVpbGRMb2dpblVybHNfKCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHVzZUF1dGhEYXRhIEFsbG93cyBgQVVUSChmaWVsZClgIFVSTCB2YXIgc3Vic3RpdHV0aW9ucy5cbiAgICogQHJldHVybiB7IVByb21pc2U8c3RyaW5nPn1cbiAgICovXG4gIGJ1aWxkVXJsKHVybCwgdXNlQXV0aERhdGEpIHtcbiAgICByZXR1cm4gdGhpcy5wcmVwYXJlVXJsVmFyc18odXNlQXV0aERhdGEpLnRoZW4odmFycyA9PiB7XG4gICAgICByZXR1cm4gdGhpcy51cmxSZXBsYWNlbWVudHNfLmV4cGFuZFVybEFzeW5jKHVybCwgdmFycyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHVzZUF1dGhEYXRhIEFsbG93cyBgQVVUSChmaWVsZClgIFVSTCB2YXIgc3Vic3RpdHV0aW9ucy5cbiAgICogQHJldHVybiB7IVByb21pc2U8IU9iamVjdDxzdHJpbmcsICo+Pn1cbiAgICovXG4gIGNvbGxlY3RVcmxWYXJzKHVybCwgdXNlQXV0aERhdGEpIHtcbiAgICByZXR1cm4gdGhpcy5wcmVwYXJlVXJsVmFyc18odXNlQXV0aERhdGEpLnRoZW4odmFycyA9PiB7XG4gICAgICByZXR1cm4gdGhpcy51cmxSZXBsYWNlbWVudHNfLmNvbGxlY3RWYXJzKHVybCwgdmFycyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSB1c2VBdXRoRGF0YSBBbGxvd3MgYEFVVEgoZmllbGQpYCBVUkwgdmFyIHN1YnN0aXR1dGlvbnMuXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFPYmplY3Q8c3RyaW5nLCAqPj59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcmVwYXJlVXJsVmFyc18odXNlQXV0aERhdGEpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRSZWFkZXJJZF8oKS50aGVuKHJlYWRlcklkID0+IHtcbiAgICAgIGNvbnN0IHZhcnMgPSB7XG4gICAgICAgICdSRUFERVJfSUQnOiByZWFkZXJJZCxcbiAgICAgICAgJ0FDQ0VTU19SRUFERVJfSUQnOiByZWFkZXJJZCwgLy8gQSBzeW5vbnltLlxuICAgICAgfTtcbiAgICAgIGlmICh1c2VBdXRoRGF0YSkge1xuICAgICAgICB2YXJzWydBVVRIREFUQSddID0gZmllbGQgPT4ge1xuICAgICAgICAgIGlmICh0aGlzLmF1dGhSZXNwb25zZV8pIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRWYWx1ZUZvckV4cHIodGhpcy5hdXRoUmVzcG9uc2VfLCBmaWVsZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFycztcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiBhdXRob3JpemF0aW9uIGNhbGwgaGFzIGNvbXBsZXRlZC5cbiAgICogTm90ZSB0aGF0IHRoaXMgcHJvbWlzZSBuZXZlciBmYWlscy5cbiAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2Rpc2FibGVGYWxsYmFja1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIHJ1bkF1dGhvcml6YXRpb24ob3B0X2Rpc2FibGVGYWxsYmFjaykge1xuICAgIGlmICghdGhpcy5hZGFwdGVyXy5pc0F1dGhvcml6YXRpb25FbmFibGVkKCkpIHtcbiAgICAgIGRldigpLmZpbmUoVEFHLCAnSWdub3JlIGF1dGhvcml6YXRpb24gZm9yIHR5cGU9JywgdGhpcy50eXBlXyk7XG4gICAgICB0aGlzLmZpcnN0QXV0aG9yaXphdGlvblJlc29sdmVyXygpO1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3BvbnNlUHJvbWlzZSA9XG4gICAgICB0aGlzLmFkYXB0ZXJfLmF1dGhvcml6ZSgpLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgdGhpcy5hbmFseXRpY3NFdmVudF8oJ2FjY2Vzcy1hdXRob3JpemF0aW9uLWZhaWxlZCcpO1xuICAgICAgICBpZiAodGhpcy5hdXRob3JpemF0aW9uRmFsbGJhY2tSZXNwb25zZV8gJiYgIW9wdF9kaXNhYmxlRmFsbGJhY2spIHtcbiAgICAgICAgICAvLyBVc2UgZmFsbGJhY2suXG4gICAgICAgICAgdXNlcigpLmVycm9yKFRBRywgJ0F1dGhvcml6YXRpb24gZmFpbGVkOiAnLCBlcnJvcik7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuYXV0aG9yaXphdGlvbkZhbGxiYWNrUmVzcG9uc2VfO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFJldGhyb3cgdGhlIGVycm9yLCBpdCB3aWxsIGJlIHByb2Nlc3NlZCBpbiB0aGUgYm90dG9tIGBjYXRjaGAuXG4gICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgY29uc3QgcHJvbWlzZSA9IHJlc3BvbnNlUHJvbWlzZS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgIGRldigpLmZpbmUoVEFHLCAnQXV0aG9yaXphdGlvbiByZXNwb25zZTogJywgcmVzcG9uc2UpO1xuICAgICAgdGhpcy5zZXRBdXRoUmVzcG9uc2VfKHJlc3BvbnNlKTtcbiAgICAgIHRoaXMuYnVpbGRMb2dpblVybHNfKCk7XG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgdXNlcigpLmVycm9yKFRBRywgJ0F1dGhvcml6YXRpb24gZmFpbGVkOiAnLCBlcnJvcik7XG4gICAgICB0aGlzLmZpcnN0QXV0aG9yaXphdGlvblJlc29sdmVyXygpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcHJvbWlzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFKc29uT2JqZWN0fSBhdXRoUmVzcG9uc2VcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHNldEF1dGhSZXNwb25zZV8oYXV0aFJlc3BvbnNlKSB7XG4gICAgdGhpcy5hdXRoUmVzcG9uc2VfID0gYXV0aFJlc3BvbnNlO1xuICAgIHRoaXMuZmlyc3RBdXRob3JpemF0aW9uUmVzb2x2ZXJfKCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICByZXBvcnRWaWV3VG9TZXJ2ZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRhcHRlcl8ucGluZ2JhY2soKS50aGVuKCgpID0+IHtcbiAgICAgIGRldigpLmZpbmUoVEFHLCAnUGluZ2JhY2sgY29tcGxldGUnKTtcbiAgICAgIHRoaXMuYW5hbHl0aWNzRXZlbnRfKCdhY2Nlc3MtcGluZ2JhY2stc2VudCcpO1xuICAgIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgICAgIHRoaXMuYW5hbHl0aWNzRXZlbnRfKCdhY2Nlc3MtcGluZ2JhY2stZmFpbGVkJyk7XG4gICAgICB0aHJvdyB1c2VyKCkuY3JlYXRlRXJyb3IoJ1BpbmdiYWNrIGZhaWxlZDogJywgZXJyb3IpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4cG9zZSB0aGUgZ2V0TG9naW5VcmwgbWV0aG9kIHdpdGggdGhlIGN1cnJlbnQgYW1wZG9jIGNvbnRleHRcbiAgICogQHBhcmFtIHtzdHJpbmd8IVByb21pc2U8c3RyaW5nPn0gdXJsT3JQcm9taXNlXG4gICAqIEByZXR1cm4geyFQcm9taXNlPHN0cmluZz59XG4gICAqL1xuICBnZXRMb2dpblVybCh1cmxPclByb21pc2UpIHtcbiAgICByZXR1cm4gZ2V0TG9naW5VcmwodGhpcy5hbXBkb2MsIHVybE9yUHJvbWlzZSk7XG4gIH1cblxuICAvKipcbiAgICogUnVucyB0aGUgbG9naW4gZmxvdyB1c2luZyBvbmUgb2YgdGhlIHByZWRlZmluZWQgdXJscyBpbiB0aGUgYW1wLWFjY2Vzc1xuICAgKiBjb25maWdcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVHlwZSBvZiBsb2dpbiBkZWZpbmVkIGluIHRoZSBjb25maWdcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBsb2dpbldpdGhUeXBlKHR5cGUpIHtcbiAgICB1c2VyKCkuYXNzZXJ0KHRoaXMubG9naW5Db25maWdfW3R5cGVdLFxuICAgICAgICAnTG9naW4gVVJMIGlzIG5vdCBjb25maWd1cmVkOiAlcycsIHR5cGUpO1xuICAgIC8vIExvZ2luIFVSTCBzaG91bGQgYWx3YXlzIGJlIGF2YWlsYWJsZSBhdCB0aGlzIHRpbWUuXG4gICAgY29uc3QgbG9naW5VcmwgPSB1c2VyKCkuYXNzZXJ0KHRoaXMubG9naW5VcmxNYXBfW3R5cGVdLFxuICAgICAgICAnTG9naW4gVVJMIGlzIG5vdCByZWFkeTogJXMnLCB0eXBlKTtcbiAgICByZXR1cm4gdGhpcy5sb2dpbl8obG9naW5VcmwsIHR5cGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJ1bnMgdGhlIGxvZ2luIGZsb3cgb3BlbmluZyB0aGUgZ2l2ZW4gdXJsIGluIHRoZSBsb2dpbiB3aW5kb3cuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TGFiZWwgQSBsYWJlbCB1c2VkIGZvciB0aGUgYW5hbHl0aWNzIGV2ZW50IGZvciB0aGlzIGFjdGlvblxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIGxvZ2luV2l0aFVybCh1cmwsIGV2ZW50TGFiZWwgPSAnJykge1xuICAgIHJldHVybiB0aGlzLmxvZ2luXyh1cmwsIGV2ZW50TGFiZWwpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJ1bnMgdGhlIExvZ2luIGZsb3cuIFJldHVybnMgYSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgaWYgbG9naW4gc3VjY2VlZHNcbiAgICogb3IgaXMgcmVqZWN0ZWQgaWYgbG9naW4gZmFpbHMuIExvZ2luIGZsb3cgaXMgcGVyZm9ybWVkIGFzIGFuIGV4dGVybmFsXG4gICAqIDFzdCBwYXJ0eSBXZWIgZGlhbG9nLiBJdCdzIGdvYWwgaXMgdG8gYXV0aGVudGljYXRlIHRoZSByZWFkZXIuXG4gICAqXG4gICAqIFR5cGUgY2FuIGJlIGVpdGhlciBhbiBlbXB0eSBzdHJpbmcgZm9yIGEgZGVmYXVsdCBsb2dpbiBvciBhIG5hbWUgb2YgdGhlXG4gICAqIGxvZ2luIFVSTC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IGxvZ2luVXJsXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudExhYmVsIEEgbGFiZWwgdXNlZCBmb3IgdGhlIGFuYWx5dGljcyBldmVudCBmb3IgdGhpcyBhY3Rpb25cbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBsb2dpbl8obG9naW5VcmwsIGV2ZW50TGFiZWwpIHtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXG4gICAgLy8gSWYgbG9naW4gaXMgcGVuZGluZywgYmxvY2sgYSBuZXcgb25lIGZyb20gc3RhcnRpbmcgZm9yIDEgc2Vjb25kLiBBZnRlclxuICAgIC8vIDEgc2Vjb25kLCBob3dldmVyLCB0aGUgbmV3IGxvZ2luIHJlcXVlc3Qgd2lsbCBiZSBhbGxvd2VkIHRvIHByb2NlZWQsXG4gICAgLy8gZ2l2ZW4gdGhhdCB3ZSBjYW5ub3QgYWx3YXlzIGRldGVybWluZSBmdWxseSBpZiB0aGUgcHJldmlvdXMgYXR0ZW1wdCBpc1xuICAgIC8vIFwic3R1Y2tcIi5cbiAgICBpZiAodGhpcy5sb2dpblByb21pc2VfICYmIChub3cgLSB0aGlzLmxvZ2luU3RhcnRUaW1lXyA8IDEwMDApKSB7XG4gICAgICByZXR1cm4gdGhpcy5sb2dpblByb21pc2VfO1xuICAgIH1cblxuICAgIGRldigpLmZpbmUoVEFHLCAnU3RhcnQgbG9naW46ICcsIGxvZ2luVXJsLCBldmVudExhYmVsKTtcblxuICAgIHRoaXMubG9naW5BbmFseXRpY3NFdmVudF8oZXZlbnRMYWJlbCwgJ3N0YXJ0ZWQnKTtcbiAgICBjb25zdCBkaWFsb2dQcm9taXNlID0gdGhpcy5vcGVuTG9naW5EaWFsb2dfKGxvZ2luVXJsKTtcbiAgICBjb25zdCBsb2dpblByb21pc2UgPSBkaWFsb2dQcm9taXNlLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgIGRldigpLmZpbmUoVEFHLCAnTG9naW4gZGlhbG9nIGNvbXBsZXRlZDogJywgZXZlbnRMYWJlbCwgcmVzdWx0KTtcbiAgICAgIHRoaXMubG9naW5Qcm9taXNlXyA9IG51bGw7XG4gICAgICBjb25zdCBxdWVyeSA9IHBhcnNlUXVlcnlTdHJpbmcocmVzdWx0KTtcbiAgICAgIGNvbnN0IHMgPSBxdWVyeVsnc3VjY2VzcyddO1xuICAgICAgY29uc3Qgc3VjY2VzcyA9IChzID09ICd0cnVlJyB8fCBzID09ICd5ZXMnIHx8IHMgPT0gJzEnKTtcbiAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgIHRoaXMubG9naW5BbmFseXRpY3NFdmVudF8oZXZlbnRMYWJlbCwgJ3N1Y2Nlc3MnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubG9naW5BbmFseXRpY3NFdmVudF8oZXZlbnRMYWJlbCwgJ3JlamVjdGVkJyk7XG4gICAgICB9XG4gICAgICBpZiAoc3VjY2VzcyB8fCAhcykge1xuICAgICAgICAvLyBJbiBjYXNlIG9mIGEgc3VjY2VzcywgcmVwZWF0IHRoZSBhdXRob3JpemF0aW9uIGFuZCBwaW5nYmFjayBmbG93cy5cbiAgICAgICAgLy8gQWxzbyBkbyB0aGlzIGZvciBhbiBlbXB0eSByZXNwb25zZSB0byBhdm9pZCBmYWxzZSBuZWdhdGl2ZXMuXG4gICAgICAgIC8vIFBpbmdiYWNrIGlzIHJlcGVhdGVkIGluIHRoaXMgY2FzZSBzaW5jZSB0aGlzIGNvdWxkIG5vdyBiZSBhIG5ld1xuICAgICAgICAvLyBcInZpZXdcIiB3aXRoIGEgZGlmZmVyZW50IGFjY2VzcyBwcm9maWxlLlxuICAgICAgICB0aGlzLmFkYXB0ZXJfLnBvc3RBY3Rpb24oKTtcbiAgICAgICAgY29uc3QgYXV0aG9yaXphdGlvblByb21pc2UgPSB0aGlzLnJ1bkF1dGhvcml6YXRpb24oXG4gICAgICAgICAgICAvKiBkaXNhYmxlRmFsbGJhY2sgKi8gdHJ1ZSk7XG4gICAgICAgIHRoaXMub25SZWF1dGhvcml6ZV8oYXV0aG9yaXphdGlvblByb21pc2UpO1xuICAgICAgICByZXR1cm4gYXV0aG9yaXphdGlvblByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICAgICAgdGhpcy5zY2hlZHVsZVZpZXdfKC8qIHRpbWVUb1ZpZXcgKi8gMCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pLmNhdGNoKHJlYXNvbiA9PiB7XG4gICAgICBkZXYoKS5maW5lKFRBRywgJ0xvZ2luIGRpYWxvZyBmYWlsZWQ6ICcsIGV2ZW50TGFiZWwsIHJlYXNvbik7XG4gICAgICB0aGlzLmxvZ2luQW5hbHl0aWNzRXZlbnRfKGV2ZW50TGFiZWwsICdmYWlsZWQnKTtcbiAgICAgIGlmICh0aGlzLmxvZ2luUHJvbWlzZV8gPT0gbG9naW5Qcm9taXNlKSB7XG4gICAgICAgIHRoaXMubG9naW5Qcm9taXNlXyA9IG51bGw7XG4gICAgICB9XG4gICAgICB0aHJvdyByZWFzb247XG4gICAgfSk7XG4gICAgdGhpcy5sb2dpblByb21pc2VfID0gbG9naW5Qcm9taXNlO1xuICAgIHRoaXMubG9naW5TdGFydFRpbWVfID0gbm93O1xuICAgIHJldHVybiB0aGlzLmxvZ2luUHJvbWlzZV87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBsb2dpbkFuYWx5dGljc0V2ZW50Xyh0eXBlLCBldmVudCkge1xuICAgIHRoaXMuYW5hbHl0aWNzRXZlbnRfKGBhY2Nlc3MtbG9naW4tJHtldmVudH1gKTtcbiAgICBpZiAodHlwZSkge1xuICAgICAgdGhpcy5hbmFseXRpY3NFdmVudF8oYGFjY2Vzcy1sb2dpbi0ke3R5cGV9LSR7ZXZlbnR9YCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9Qcm9taXNlPCFBcnJheTwhe3R5cGU6IHN0cmluZywgdXJsOiBzdHJpbmd9Pj59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBidWlsZExvZ2luVXJsc18oKSB7XG4gICAgaWYgKE9iamVjdC5rZXlzKHRoaXMubG9naW5Db25maWdfKS5sZW5ndGggPT0gMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHByb21pc2VzID0gW107XG4gICAgZm9yIChjb25zdCBrIGluIHRoaXMubG9naW5Db25maWdfKSB7XG4gICAgICBwcm9taXNlcy5wdXNoKFxuICAgICAgICAgIHRoaXMuYnVpbGRVcmwodGhpcy5sb2dpbkNvbmZpZ19ba10sIC8qIHVzZUF1dGhEYXRhICovIHRydWUpXG4gICAgICAgICAgICAgIC50aGVuKHVybCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dpblVybE1hcF9ba10gPSB1cmw7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHt0eXBlOiBrLCB1cmx9O1xuICAgICAgICAgICAgICB9KSk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyk7XG4gIH1cbn1cblxuLyoqXG4gKiBAdHlwZWRlZiB7e1xuICogICBidWlsZFVybDogZnVuY3Rpb24oc3RyaW5nLCBib29sZWFuKTohUHJvbWlzZTxzdHJpbmc+LFxuICogICBjb2xsZWN0VXJsVmFyczogZnVuY3Rpb24oc3RyaW5nLCBib29sZWFuKTpcbiAqICAgICAgICFQcm9taXNlPCFPYmplY3Q8c3RyaW5nLCAqPj5cbiAqIH19XG4gKi9cbmV4cG9ydCBsZXQgQWNjZXNzVHlwZUFkYXB0ZXJDb250ZXh0RGVmO1xuXG5cbi8qKlxuICogQGludGVyZmFjZVxuICovXG5leHBvcnQgY2xhc3MgQWNjZXNzVHlwZUFkYXB0ZXJEZWYge1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshSnNvbk9iamVjdH1cbiAgICovXG4gIGdldENvbmZpZygpIHt9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBpc0F1dGhvcml6YXRpb25FbmFibGVkKCkge31cblxuICAvKipcbiAgICogQHJldHVybiB7IVByb21pc2U8IUpzb25PYmplY3Q+fVxuICAgKi9cbiAgYXV0aG9yaXplKCkge31cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzUGluZ2JhY2tFbmFibGVkKCkge31cblxuICAvKipcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBwaW5nYmFjaygpIHt9XG5cbiAgLyoqXG4gICAqIENhbGxlZCBhZnRlciBhbiBhY3Rpb24gKGxvZ2luL3N1YnNjcmliZS9ldGMpIGlzIGNvbXBsZXRlLlxuICAgKi9cbiAgcG9zdEFjdGlvbigpIHt9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0ICcuL2FjY2Vzcy12ZW5kb3InO1xuaW1wb3J0IHtEZWZlcnJlZH0gZnJvbSAnLi4vLi4vLi4vc3JjL3V0aWxzL3Byb21pc2UnO1xuaW1wb3J0IHtkZXYsIHVzZXJ9IGZyb20gJy4uLy4uLy4uL3NyYy9sb2cnO1xuXG4vKiogQGNvbnN0IHtzdHJpbmd9ICovXG5jb25zdCBUQUcgPSAnYW1wLWFjY2Vzcy12ZW5kb3InO1xuXG5cbi8qKlxuICogVGhlIGFkYXB0ZXIgZm9yIGEgdmVuZG9yIGltcGxlbWVudGF0aW9uIHRoYXQgaW1wbGVtZW50cyBgQWNjZXNzVmVuZG9yYFxuICogaW50ZXJmYWNlIGFuZCBkZWxpdmVyZWQgdmlhIGEgc2VwYXJhdGUgZXh0ZW5zaW9uLiBUaGUgdmVuZG9yIGltcGxlbWVudGF0aW9uXG4gKiBtYWlubHkgcmVxdWlyZXMgdHdvIG1ldGhvZDogYGF1dGhvcml6ZWAgYW5kIGBwaW5nYmFja2AuIFRoZSBhY3R1YWxcbiAqIGV4dGVuc2lvbiBpcyByZWdpc3RlcmVkIHZpYSBgcmVnaXN0ZXJWZW5kb3JgIG1ldGhvZC5cbiAqIEBpbXBsZW1lbnRzIHsuL2FtcC1hY2Nlc3Mtc291cmNlLkFjY2Vzc1R5cGVBZGFwdGVyRGVmfVxuICovXG5leHBvcnQgY2xhc3MgQWNjZXNzVmVuZG9yQWRhcHRlciB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4uLy4uLy4uL3NyYy9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gYW1wZG9jXG4gICAqIEBwYXJhbSB7IUpzb25PYmplY3R9IGNvbmZpZ0pzb25cbiAgICovXG4gIGNvbnN0cnVjdG9yKGFtcGRvYywgY29uZmlnSnNvbikge1xuICAgIC8qKiBAY29uc3QgKi9cbiAgICB0aGlzLmFtcGRvYyA9IGFtcGRvYztcblxuICAgIC8qKiBAY29uc3QgQHByaXZhdGUge3N0cmluZ30gKi9cbiAgICB0aGlzLnZlbmRvck5hbWVfID0gdXNlcigpLmFzc2VydChjb25maWdKc29uWyd2ZW5kb3InXSxcbiAgICAgICAgJ1widmVuZG9yXCIgbmFtZSBtdXN0IGJlIHNwZWNpZmllZCcpO1xuXG4gICAgLyoqIEBjb25zdCBAcHJpdmF0ZSB7IUpzb25PYmplY3R9ICovXG4gICAgdGhpcy52ZW5kb3JDb25maWdfID0gY29uZmlnSnNvblt0aGlzLnZlbmRvck5hbWVfXSB8fCB7fTtcblxuICAgIC8qKiBAY29uc3QgQHByaXZhdGUge2Jvb2xlYW59ICovXG4gICAgdGhpcy5pc1BpbmdiYWNrRW5hYmxlZF8gPSAhY29uZmlnSnNvblsnbm9QaW5nYmFjayddO1xuXG4gICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcblxuICAgIC8qKiBAY29uc3QgQHByaXZhdGUgeyFQcm9taXNlPCEuL2FjY2Vzcy12ZW5kb3IuQWNjZXNzVmVuZG9yPn0gKi9cbiAgICB0aGlzLnZlbmRvclByb21pc2VfID0gZGVmZXJyZWQucHJvbWlzZTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P2Z1bmN0aW9uKCEuL2FjY2Vzcy12ZW5kb3IuQWNjZXNzVmVuZG9yKX0gKi9cbiAgICB0aGlzLnZlbmRvclJlc29sdmVfID0gZGVmZXJyZWQucmVzb2x2ZTtcbiAgfVxuXG4gIC8qKiBAcmV0dXJuIHtzdHJpbmd9ICovXG4gIGdldFZlbmRvck5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMudmVuZG9yTmFtZV87XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldENvbmZpZygpIHtcbiAgICByZXR1cm4gdGhpcy52ZW5kb3JDb25maWdfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4vYWNjZXNzLXZlbmRvci5BY2Nlc3NWZW5kb3J9IHZlbmRvclxuICAgKi9cbiAgcmVnaXN0ZXJWZW5kb3IodmVuZG9yKSB7XG4gICAgdXNlcigpLmFzc2VydCh0aGlzLnZlbmRvclJlc29sdmVfLCAnVmVuZG9yIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCcpO1xuICAgIHRoaXMudmVuZG9yUmVzb2x2ZV8odmVuZG9yKTtcbiAgICB0aGlzLnZlbmRvclJlc29sdmVfID0gbnVsbDtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgaXNBdXRob3JpemF0aW9uRW5hYmxlZCgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYXV0aG9yaXplKCkge1xuICAgIGRldigpLmZpbmUoVEFHLCAnU3RhcnQgYXV0aG9yaXphdGlvbiB2aWEgJywgdGhpcy52ZW5kb3JOYW1lXyk7XG4gICAgcmV0dXJuIHRoaXMudmVuZG9yUHJvbWlzZV8udGhlbih2ZW5kb3IgPT4ge1xuICAgICAgcmV0dXJuIHZlbmRvci5hdXRob3JpemUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgaXNQaW5nYmFja0VuYWJsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNQaW5nYmFja0VuYWJsZWRfO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBwaW5nYmFjaygpIHtcbiAgICBkZXYoKS5maW5lKFRBRywgJ1BpbmdiYWNrIHZpYSAnLCB0aGlzLnZlbmRvck5hbWVfKTtcbiAgICByZXR1cm4gdGhpcy52ZW5kb3JQcm9taXNlXy50aGVuKHZlbmRvciA9PiB7XG4gICAgICByZXR1cm4gdmVuZG9yLnBpbmdiYWNrKCk7XG4gICAgfSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHBvc3RBY3Rpb24oKSB7XG4gICAgLy8gVE9ETyhkdm95dGVua28pOiBkZWxlZ2F0ZSB0byB2ZW5kb3IgYWRhcHRlci5cbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7QWNjZXNzU291cmNlLCBBY2Nlc3NUeXBlfSBmcm9tICcuL2FtcC1hY2Nlc3Mtc291cmNlJztcbmltcG9ydCB7QWNjZXNzVmFyc30gZnJvbSAnLi9hY2Nlc3MtdmFycyc7XG5pbXBvcnQge0FtcEV2ZW50c30gZnJvbSAnLi4vLi4vLi4vc3JjL2FtcC1ldmVudHMnO1xuaW1wb3J0IHtDU1N9IGZyb20gJy4uLy4uLy4uL2J1aWxkL2FtcC1hY2Nlc3MtMC4xLmNzcyc7XG5pbXBvcnQge09ic2VydmFibGV9IGZyb20gJy4uLy4uLy4uL3NyYy9vYnNlcnZhYmxlJztcbmltcG9ydCB7U2VydmljZXN9IGZyb20gJy4uLy4uLy4uL3NyYy9zZXJ2aWNlcyc7XG5pbXBvcnQge2NhbmNlbGxhdGlvbn0gZnJvbSAnLi4vLi4vLi4vc3JjL2Vycm9yJztcbmltcG9ydCB7ZGV2LCB1c2VyfSBmcm9tICcuLi8uLi8uLi9zcmMvbG9nJztcbmltcG9ydCB7ZGljdH0gZnJvbSAnLi4vLi4vLi4vc3JjL3V0aWxzL29iamVjdCc7XG5pbXBvcnQge2V2YWx1YXRlQWNjZXNzRXhwcn0gZnJvbSAnLi9hY2Nlc3MtZXhwcic7XG5pbXBvcnQge2dldFNvdXJjZU9yaWdpbn0gZnJvbSAnLi4vLi4vLi4vc3JjL3VybCc7XG5pbXBvcnQge2dldFZhbHVlRm9yRXhwciwgdHJ5UGFyc2VKc29ufSBmcm9tICcuLi8uLi8uLi9zcmMvanNvbic7XG5pbXBvcnQge2luc3RhbGxTdHlsZXNGb3JEb2N9IGZyb20gJy4uLy4uLy4uL3NyYy9zdHlsZS1pbnN0YWxsZXInO1xuaW1wb3J0IHtpc0FycmF5fSBmcm9tICcuLi8uLi8uLi9zcmMvdHlwZXMnO1xuaW1wb3J0IHtsaXN0ZW5PbmNlfSBmcm9tICcuLi8uLi8uLi9zcmMvZXZlbnQtaGVscGVyJztcbmltcG9ydCB7c3RhcnRzV2l0aH0gZnJvbSAnLi4vLi4vLi4vc3JjL3N0cmluZyc7XG5pbXBvcnQge3RyaWdnZXJBbmFseXRpY3NFdmVudH0gZnJvbSAnLi4vLi4vLi4vc3JjL2FuYWx5dGljcyc7XG5cblxuLyoqIEBjb25zdCAqL1xuY29uc3QgVEFHID0gJ2FtcC1hY2Nlc3MnO1xuXG4vKiogQGNvbnN0IHtudW1iZXJ9ICovXG5jb25zdCBWSUVXX1RJTUVPVVQgPSAyMDAwO1xuXG4vKiogQGNvbnN0IHtzdHJpbmd9ICovXG5jb25zdCBURU1QTEFURV9QUk9QID0gJ19fQU1QX0FDQ0VTU19fVEVNUExBVEUnO1xuXG5cbi8qKlxuICogQWNjZXNzU2VydmljZSBpbXBsZW1lbnRzIHRoZSBjb21wbGV0ZSBsaWZlY3ljbGUgb2YgdGhlIEFNUCBBY2Nlc3Mgc3lzdGVtLlxuICogQGltcGxlbWVudHMge0FjY2Vzc1ZhcnN9XG4gKi9cbmV4cG9ydCBjbGFzcyBBY2Nlc3NTZXJ2aWNlIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4uLy4uLy4uL3NyYy9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gYW1wZG9jXG4gICAqL1xuICBjb25zdHJ1Y3RvcihhbXBkb2MpIHtcbiAgICAvKiogQGNvbnN0ICovXG4gICAgdGhpcy5hbXBkb2MgPSBhbXBkb2M7XG5cbiAgICAvLyBJbnN0YWxsIHN0eWxlcy5cbiAgICBpbnN0YWxsU3R5bGVzRm9yRG9jKGFtcGRvYywgQ1NTLCAoKSA9PiB7fSwgZmFsc2UsIFRBRyk7XG5cbiAgICBjb25zdCBhY2Nlc3NFbGVtZW50ID0gYW1wZG9jLmdldEVsZW1lbnRCeUlkKCdhbXAtYWNjZXNzJyk7XG5cbiAgICAvKiogQHByaXZhdGUge2Jvb2xlYW59ICovXG4gICAgdGhpcy5lbmFibGVkXyA9ICEhYWNjZXNzRWxlbWVudDtcbiAgICBpZiAoIXRoaXMuZW5hYmxlZF8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvKiogQGNvbnN0IEBwcml2YXRlIHshRWxlbWVudH0gKi9cbiAgICB0aGlzLmFjY2Vzc0VsZW1lbnRfID0gZGV2KCkuYXNzZXJ0RWxlbWVudChhY2Nlc3NFbGVtZW50KTtcblxuICAgIC8qKiBAY29uc3QgQHByaXZhdGUge3N0cmluZ30gKi9cbiAgICB0aGlzLnB1Yk9yaWdpbl8gPSBnZXRTb3VyY2VPcmlnaW4oYW1wZG9jLndpbi5sb2NhdGlvbik7XG5cbiAgICAvKiogQGNvbnN0IEBwcml2YXRlIHshLi4vLi4vLi4vc3JjL3NlcnZpY2UvdGltZXItaW1wbC5UaW1lcn0gKi9cbiAgICB0aGlzLnRpbWVyXyA9IFNlcnZpY2VzLnRpbWVyRm9yKGFtcGRvYy53aW4pO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uLy4uLy4uL3NyYy9zZXJ2aWNlL3ZzeW5jLWltcGwuVnN5bmN9ICovXG4gICAgdGhpcy52c3luY18gPSBTZXJ2aWNlcy52c3luY0ZvcihhbXBkb2Mud2luKTtcblxuICAgIC8vIFRPRE8oZHZveXRlbmtvLCAjMzc0Mik6IFRoaXMgd2lsbCByZWZlciB0byB0aGUgYW1wZG9jIG9uY2UgQWNjZXNzU2VydmljZVxuICAgIC8vIGlzIG1pZ3JhdGVkIHRvIGFtcGRvYyBhcyB3ZWxsLlxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFQcm9taXNlPCEuLi8uLi8uLi9zcmMvc2VydmljZS9jaWQtaW1wbC5DaWQ+fSAqL1xuICAgIHRoaXMuY2lkXyA9IFNlcnZpY2VzLmNpZEZvckRvYyhhbXBkb2MpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uLy4uLy4uL3NyYy9zZXJ2aWNlL3ZpZXdlci1pbXBsLlZpZXdlcn0gKi9cbiAgICB0aGlzLnZpZXdlcl8gPSBTZXJ2aWNlcy52aWV3ZXJGb3JEb2MoYW1wZG9jKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi8uLi8uLi9zcmMvc2VydmljZS92aWV3cG9ydC92aWV3cG9ydC1pbXBsLlZpZXdwb3J0fSAqL1xuICAgIHRoaXMudmlld3BvcnRfID0gU2VydmljZXMudmlld3BvcnRGb3JEb2MoYW1wZG9jKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi8uLi8uLi9zcmMvc2VydmljZS90ZW1wbGF0ZS1pbXBsLlRlbXBsYXRlc30gKi9cbiAgICB0aGlzLnRlbXBsYXRlc18gPSBTZXJ2aWNlcy50ZW1wbGF0ZXNGb3IoYW1wZG9jLndpbik7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vLi4vLi4vc3JjL3NlcnZpY2UvcmVzb3VyY2VzLWltcGwuUmVzb3VyY2VzfSAqL1xuICAgIHRoaXMucmVzb3VyY2VzXyA9IFNlcnZpY2VzLnJlc291cmNlc0ZvckRvYyhhbXBkb2MpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7Py4uLy4uLy4uL3NyYy9zZXJ2aWNlL3BlcmZvcm1hbmNlLWltcGwuUGVyZm9ybWFuY2V9ICovXG4gICAgdGhpcy5wZXJmb3JtYW5jZV8gPSBTZXJ2aWNlcy5wZXJmb3JtYW5jZUZvck9yTnVsbChhbXBkb2Mud2luKTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P1Byb21pc2U8c3RyaW5nPn0gKi9cbiAgICB0aGlzLnJlYWRlcklkUHJvbWlzZV8gPSBudWxsO1xuXG4gICAgLyoqIEBjb25zdCAqL1xuICAgIHRoaXMuc291cmNlc18gPSB0aGlzLnBhcnNlQ29uZmlnXygpO1xuXG4gICAgY29uc3QgcHJvbWlzZXMgPSB0aGlzLnNvdXJjZXNfLm1hcChzb3VyY2UgPT4gc291cmNlLndoZW5GaXJzdEF1dGhvcml6ZWQoKSk7XG5cbiAgICAvKiogQHByaXZhdGUge2Jvb2xlYW59ICovXG4gICAgdGhpcy5maXJzdEF1dGhvcml6YXRpb25zQ29tcGxldGVkXyA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogVHJhY2sgbW9zdCByZWNlbnQgcmVxdWVzdHMgYW5kIGJsb2NrIHJlcG9ydGluZyBhbmQgcmVmcmVzaGVzIGlmXG4gICAgICogb3V0c3RhbmRpbmcuIEZ1dHVyZSBvcHRpbWl6YXRpb25zIG1heSBjaG9vc2UgdG8gdGFrZSBhY3Rpb24gYXMgc29vblxuICAgICAqIGFzIGEgc2luZ2xlIHJlcXVlc3QgY29tcGxldGVzLiBUaGVzZSBjb21wbGV0ZSBldmVuIG9uIGZhaWx1cmUuXG4gICAgICogQHByaXZhdGUgeyFQcm9taXNlfVxuICAgICAqL1xuICAgIHRoaXMubGFzdEF1dGhvcml6YXRpb25Qcm9taXNlc18gPSBQcm9taXNlLmFsbChwcm9taXNlcyk7XG5cbiAgICAvKiogQHByaXZhdGUgez9Qcm9taXNlfSAqL1xuICAgIHRoaXMucmVwb3J0Vmlld1Byb21pc2VfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFPYnNlcnZhYmxlfSAqL1xuICAgIHRoaXMuYXBwbHlBdXRob3JpemF0aW9uc09ic2VydmFibGVfID0gbmV3IE9ic2VydmFibGUoKTtcblxuICAgIC8vIFRoaXMgd2lsbCBmaXJlIGFmdGVyIHRoZSBmaXJzdCByZWNlaXZlZCBhdXRob3JpemF0aW9uLCBldmVuIGlmXG4gICAgLy8gdGhlcmUgYXJlIG11bHRpcGxlIHNvdXJjZXMuXG4gICAgdGhpcy5sYXN0QXV0aG9yaXphdGlvblByb21pc2VzXy50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMuZmlyc3RBdXRob3JpemF0aW9uc0NvbXBsZXRlZF8gPSB0cnVlO1xuICAgICAgdGhpcy5hbmFseXRpY3NFdmVudF8oJ2FjY2Vzcy1hdXRob3JpemF0aW9uLXJlY2VpdmVkJyk7XG4gICAgICBpZiAodGhpcy5wZXJmb3JtYW5jZV8pIHtcbiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZV8udGljaygnYWFhJyk7XG4gICAgICAgIHRoaXMucGVyZm9ybWFuY2VfLnRpY2tTaW5jZVZpc2libGUoJ2FhYXYnKTtcbiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZV8uZmx1c2goKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFJlLWF1dGhvcml6ZSBuZXdseSBhZGRlZCBzZWN0aW9ucy5cbiAgICBhbXBkb2MuZ2V0Um9vdE5vZGUoKS5hZGRFdmVudExpc3RlbmVyKEFtcEV2ZW50cy5ET01fVVBEQVRFLFxuICAgICAgICB0aGlzLm9uRG9tVXBkYXRlXy5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgZnJvbSBBY2Nlc3NWYXJzICovXG4gIGdldEFjY2Vzc1JlYWRlcklkKCkge1xuICAgIGlmICghdGhpcy5lbmFibGVkXykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmdldFJlYWRlcklkXygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFQcm9taXNlPHN0cmluZz59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRSZWFkZXJJZF8oKSB7XG4gICAgaWYgKCF0aGlzLnJlYWRlcklkUHJvbWlzZV8pIHtcbiAgICAgIC8vIE5vIGNvbnNlbnQgLSBhbiBlc3NlbnRpYWwgcGFydCBvZiB0aGUgYWNjZXNzIHN5c3RlbS5cbiAgICAgIGNvbnN0IGNvbnNlbnQgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgIHRoaXMucmVhZGVySWRQcm9taXNlXyA9IHRoaXMuY2lkXy50aGVuKGNpZCA9PiB7XG4gICAgICAgIHJldHVybiBjaWQuZ2V0KHtzY29wZTogJ2FtcC1hY2Nlc3MnLCBjcmVhdGVDb29raWVJZk5vdFByZXNlbnQ6IHRydWV9LFxuICAgICAgICAgICAgY29uc2VudCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucmVhZGVySWRQcm9taXNlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgYXJlRmlyc3RBdXRob3JpemF0aW9uc0NvbXBsZXRlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5maXJzdEF1dGhvcml6YXRpb25zQ29tcGxldGVkXztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBjYWxsYmFjayB0byBiZSB0cmlnZ2VyZWQgd2hlbiB0aGUgZG9jdW1lbnQgZ2V0cyAocmUpYXV0aG9yaXplZC5cbiAgICogQHBhcmFtIHshRnVuY3Rpb259IGNhbGxiYWNrXG4gICAqL1xuICBvbkFwcGx5QXV0aG9yaXphdGlvbnMoY2FsbGJhY2spIHtcbiAgICB0aGlzLmFwcGx5QXV0aG9yaXphdGlvbnNPYnNlcnZhYmxlXy5hZGQoY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFBcnJheTwhQWNjZXNzU291cmNlPn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHBhcnNlQ29uZmlnXygpIHtcbiAgICBjb25zdCByYXdDb250ZW50ID0gdHJ5UGFyc2VKc29uKHRoaXMuYWNjZXNzRWxlbWVudF8udGV4dENvbnRlbnQsIGUgPT4ge1xuICAgICAgdGhyb3cgdXNlcigpLmNyZWF0ZUVycm9yKCdGYWlsZWQgdG8gcGFyc2UgXCJhbXAtYWNjZXNzXCIgSlNPTjogJyArIGUpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgY29uZmlnTWFwID0ge307XG4gICAgaWYgKGlzQXJyYXkocmF3Q29udGVudCkpIHtcbiAgICAgIGNvbnN0IGNvbnRlbnRBcnJheSA9IHJhd0NvbnRlbnQ7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnRlbnRBcnJheVsnbGVuZ3RoJ107IGkrKykge1xuICAgICAgICBjb25zdCBuYW1lc3BhY2UgPSBjb250ZW50QXJyYXlbaV1bJ25hbWVzcGFjZSddO1xuICAgICAgICB1c2VyKCkuYXNzZXJ0KCEhbmFtZXNwYWNlLCAnTmFtZXNwYWNlIHJlcXVpcmVkJyk7XG4gICAgICAgIHVzZXIoKS5hc3NlcnQoIWNvbmZpZ01hcFtuYW1lc3BhY2VdLFxuICAgICAgICAgICAgJ05hbWVzcGFjZSBhbHJlYWR5IHVzZWQ6ICcgKyBuYW1lc3BhY2UpO1xuICAgICAgICBjb25maWdNYXBbbmFtZXNwYWNlXSA9IGNvbnRlbnRBcnJheVtpXTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uZmlnTWFwW3Jhd0NvbnRlbnRbJ25hbWVzcGFjZSddIHx8ICcnXSA9IHJhd0NvbnRlbnQ7XG4gICAgfVxuXG4gICAgY29uc3QgcmVhZGVySWRGbiA9IHRoaXMuZ2V0UmVhZGVySWRfLmJpbmQodGhpcyk7XG4gICAgY29uc3Qgc2NoZWR1bGVWaWV3Rm4gPSB0aGlzLnNjaGVkdWxlVmlld18uYmluZCh0aGlzKTtcbiAgICBjb25zdCBvblJlYXV0aG9yaXplRm4gPSB0aGlzLm9uUmVhdXRob3JpemVfLmJpbmQodGhpcyk7XG5cbiAgICByZXR1cm4gT2JqZWN0LmtleXMoY29uZmlnTWFwKS5tYXAoa2V5ID0+XG4gICAgICBuZXcgQWNjZXNzU291cmNlKHRoaXMuYW1wZG9jLCBjb25maWdNYXBba2V5XSwgcmVhZGVySWRGbiwgc2NoZWR1bGVWaWV3Rm4sXG4gICAgICAgICAgb25SZWF1dGhvcml6ZUZuLCB0aGlzLmFjY2Vzc0VsZW1lbnRfKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRXZlbnR9IGV2ZW50XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBvbkRvbVVwZGF0ZV8oZXZlbnQpIHtcbiAgICAvLyBPbmx5IHJlLWF1dGhvcml6ZSBzZWN0aW9ucyBpZiBhdXRob3JpemF0aW9uIGFscmVhZHkgZmlyZWQsIG90aGVyd2lzZVxuICAgIC8vIGp1c3Qgd2FpdCBhbmQgZXhpc3RpbmcgY2FsbGJhY2sgd2lsbCBjb3ZlciBuZXcgc2VjdGlvbnMuXG4gICAgaWYgKHRoaXMuZmlyc3RBdXRob3JpemF0aW9uc0NvbXBsZXRlZF8pIHtcbiAgICAgIC8vIEd1YXJkIGFnYWluc3QgYW55dGhpbmcgZWxzZSBpbiBmbGlnaHQuXG4gICAgICByZXR1cm4gdGhpcy5sYXN0QXV0aG9yaXphdGlvblByb21pc2VzXy50aGVuKCgpID0+IHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZGV2KCkuYXNzZXJ0RWxlbWVudChldmVudC50YXJnZXQpO1xuICAgICAgICBjb25zdCByZXNwb25zZXMgPSB0aGlzLmNvbWJpbmVkUmVzcG9uc2VzKCk7XG4gICAgICAgIHRoaXMuYXBwbHlBdXRob3JpemF0aW9uVG9Sb290Xyh0YXJnZXQsIHJlc3BvbnNlcyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICogQHJldHVybiB7IUFjY2Vzc1NvdXJjZX1cbiAgICovXG4gIGdldFZlbmRvclNvdXJjZShuYW1lKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNvdXJjZXNfLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBzb3VyY2UgPSB0aGlzLnNvdXJjZXNfW2ldO1xuICAgICAgaWYgKHNvdXJjZS5nZXRUeXBlKCkgPT0gQWNjZXNzVHlwZS5WRU5ET1IpIHtcbiAgICAgICAgY29uc3QgdmVuZG9yQWRhcHRlciA9XG4gICAgICAgICAgLyoqIEB0eXBlIHshLi9hbXAtYWNjZXNzLXZlbmRvci5BY2Nlc3NWZW5kb3JBZGFwdGVyfSAqLyAoXG4gICAgICAgICAgICBzb3VyY2UuZ2V0QWRhcHRlcigpXG4gICAgICAgICAgKTtcbiAgICAgICAgaWYgKHZlbmRvckFkYXB0ZXIuZ2V0VmVuZG9yTmFtZSgpID09IG5hbWUpIHtcbiAgICAgICAgICByZXR1cm4gc291cmNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHVzZXIoKS5hc3NlcnQoZmFsc2UsXG4gICAgICAgICdBY2Nlc3MgdmVuZG9yIFwiJXNcIiBjYW4gb25seSBiZSB1c2VkIGZvciBcInR5cGU9dmVuZG9yXCIsIGJ1dCBub25lIGZvdW5kJyxcbiAgICAgICAgbmFtZSk7XG4gICAgLy8gU2hvdWxkIG5vdCBoYXBwZW4sIGp1c3QgdG8gYXBwZWFzZSB0eXBlIGNoZWNraW5nLlxuICAgIHRocm93IG5ldyBFcnJvcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBpc0VuYWJsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZW5hYmxlZF87XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IUVsZW1lbnR9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRSb290RWxlbWVudF8oKSB7XG4gICAgY29uc3Qgcm9vdCA9IHRoaXMuYW1wZG9jLmdldFJvb3ROb2RlKCk7XG4gICAgcmV0dXJuIGRldigpLmFzc2VydEVsZW1lbnQocm9vdC5kb2N1bWVudEVsZW1lbnQgfHwgcm9vdC5ib2R5IHx8IHJvb3QpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFR5cGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFuYWx5dGljc0V2ZW50XyhldmVudFR5cGUpIHtcbiAgICB0cmlnZ2VyQW5hbHl0aWNzRXZlbnQodGhpcy5nZXRSb290RWxlbWVudF8oKSwgZXZlbnRUeXBlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshQWNjZXNzU2VydmljZX1cbiAgICogQHByaXZhdGVcbiAgICogQHJlc3RyaWN0ZWRcbiAgICovXG4gIHN0YXJ0XygpIHtcbiAgICBpZiAoIXRoaXMuZW5hYmxlZF8pIHtcbiAgICAgIHVzZXIoKS5pbmZvKFRBRywgJ0FjY2VzcyBpcyBkaXNhYmxlZCAtIG5vIFwiaWQ9YW1wLWFjY2Vzc1wiIGVsZW1lbnQnKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICB0aGlzLnN0YXJ0SW50ZXJuYWxfKCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKiogQHByaXZhdGUgKi9cbiAgc3RhcnRJbnRlcm5hbF8oKSB7XG4gICAgLy8gVE9ETyhkdm95dGVua28sICMzNzQyKTogVGhpcyB3aWxsIHJlZmVyIHRvIHRoZSBhbXBkb2Mgb25jZSBBY2Nlc3NTZXJ2aWNlXG4gICAgLy8gaXMgbWlncmF0ZWQgdG8gYW1wZG9jIGFzIHdlbGwuXG4gICAgU2VydmljZXMuYWN0aW9uU2VydmljZUZvckRvYyh0aGlzLmFtcGRvYykuaW5zdGFsbEFjdGlvbkhhbmRsZXIoXG4gICAgICAgIHRoaXMuYWNjZXNzRWxlbWVudF8sIHRoaXMuaGFuZGxlQWN0aW9uXy5iaW5kKHRoaXMpKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zb3VyY2VzXy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5zb3VyY2VzX1tpXS5zdGFydCgpO1xuICAgIH1cblxuICAgIC8vIFJ1biBhdXRob3JpemF0aW9uIGFzIHNvb24gYXMgdmlzaWJsZS5cbiAgICB0aGlzLnJ1bkF1dGhvcml6YXRpb25fKCk7XG5cbiAgICAvLyBXYWl0IGZvciB0aGUgXCJ2aWV3XCIgc2lnbmFsLlxuICAgIHRoaXMuc2NoZWR1bGVWaWV3XyhWSUVXX1RJTUVPVVQpO1xuXG4gICAgLy8gTGlzdGVuIHRvIGFtcC1hY2Nlc3MgYnJvYWRjYXN0cyBmcm9tIG90aGVyIHBhZ2VzLlxuICAgIHRoaXMubGlzdGVuVG9Ccm9hZGNhc3RzXygpO1xuICB9XG5cbiAgLyoqIEBwcml2YXRlICovXG4gIGxpc3RlblRvQnJvYWRjYXN0c18oKSB7XG4gICAgdGhpcy52aWV3ZXJfLm9uQnJvYWRjYXN0KG1lc3NhZ2UgPT4ge1xuICAgICAgaWYgKG1lc3NhZ2VbJ3R5cGUnXSA9PSAnYW1wLWFjY2Vzcy1yZWF1dGhvcml6ZScgJiZcbiAgICAgICAgICAgICAgbWVzc2FnZVsnb3JpZ2luJ10gPT0gdGhpcy5wdWJPcmlnaW5fKSB7XG4gICAgICAgIHRoaXMucnVuQXV0aG9yaXphdGlvbl8oKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFQcm9taXNlfSBhdXRob3JpemF0aW9uXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBvblJlYXV0aG9yaXplXyhhdXRob3JpemF0aW9uKSB7XG4gICAgdGhpcy5icm9hZGNhc3RSZWF1dGhvcml6ZV8oKTtcbiAgICBhdXRob3JpemF0aW9uLnRoZW4oKCkgPT4ge1xuICAgICAgLy8gSWYgbm90aGluZyBoYXMgaGFwcGVuZWQsIGluaXRpYWwgcmVuZGVyIHdpbGwgY292ZXIgdGhpcyBjaGFuZ2UuXG4gICAgICBpZiAodGhpcy5maXJzdEF1dGhvcml6YXRpb25zQ29tcGxldGVkXykge1xuICAgICAgICAvLyBHdWFyZCBhZ2FpbnN0IGFueXRoaW5nIGVsc2UgaW4gZmxpZ2h0LlxuICAgICAgICB0aGlzLmxhc3RBdXRob3JpemF0aW9uUHJvbWlzZXNfLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHRoaXMuYW1wZG9jLndoZW5SZWFkeSgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgcm9vdCA9IHRoaXMuYW1wZG9jLmdldFJvb3ROb2RlKCk7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZXMgPSB0aGlzLmNvbWJpbmVkUmVzcG9uc2VzKCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hcHBseUF1dGhvcml6YXRpb25Ub1Jvb3RfKHJvb3QsIHJlc3BvbnNlcyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBwcml2YXRlICovXG4gIGJyb2FkY2FzdFJlYXV0aG9yaXplXygpIHtcbiAgICB0aGlzLnZpZXdlcl8uYnJvYWRjYXN0KGRpY3Qoe1xuICAgICAgJ3R5cGUnOiAnYW1wLWFjY2Vzcy1yZWF1dGhvcml6ZScsXG4gICAgICAnb3JpZ2luJzogdGhpcy5wdWJPcmlnaW5fLFxuICAgIH0pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiBhbGwgYXV0aG9yaXphdGlvbiB3b3JrIGhhc1xuICAgKiBjb21wbGV0ZWQsIGluY2x1ZGluZyBhdXRob3JpemF0aW9uIGVuZHBvaW50IGNhbGwgYW5kIFVJIHVwZGF0ZS5cbiAgICogTm90ZSB0aGF0IHRoaXMgcHJvbWlzZSBuZXZlciBmYWlscy5cbiAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2Rpc2FibGVGYWxsYmFja1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJ1bkF1dGhvcml6YXRpb25fKG9wdF9kaXNhYmxlRmFsbGJhY2spIHtcbiAgICB0aGlzLnRvZ2dsZVRvcENsYXNzXygnYW1wLWFjY2Vzcy1sb2FkaW5nJywgdHJ1ZSk7XG5cbiAgICBjb25zdCBhdXRob3JpemF0aW9ucyA9IHRoaXMudmlld2VyXy53aGVuRmlyc3RWaXNpYmxlKCkudGhlbigoKSA9PiB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5hbGwoXG4gICAgICAgICAgdGhpcy5zb3VyY2VzXy5tYXAoc291cmNlID0+IHRoaXMucnVuT25lQXV0aG9yaXphdGlvbl8oc291cmNlKSkpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgcmVuZGVyZWQgPSBhdXRob3JpemF0aW9ucy50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMudG9nZ2xlVG9wQ2xhc3NfKCdhbXAtYWNjZXNzLWxvYWRpbmcnLCBmYWxzZSk7XG4gICAgICByZXR1cm4gdGhpcy5hbXBkb2Mud2hlblJlYWR5KCkudGhlbigoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJvb3QgPSB0aGlzLmFtcGRvYy5nZXRSb290Tm9kZSgpO1xuICAgICAgICBjb25zdCByZXNwb25zZXMgPSB0aGlzLmNvbWJpbmVkUmVzcG9uc2VzKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5QXV0aG9yaXphdGlvblRvUm9vdF8ocm9vdCwgcmVzcG9uc2VzKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGhpcy5sYXN0QXV0aG9yaXphdGlvblByb21pc2VzXyA9IHJlbmRlcmVkO1xuXG4gICAgcmV0dXJuIHJlbmRlcmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIE1ha2UgYSBzaW5nbGUgYXV0aG9yaXphdGlvbiBjYWxsLlxuICAgKiBAcGFyYW0ge0FjY2Vzc1NvdXJjZX0gc291cmNlXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBydW5PbmVBdXRob3JpemF0aW9uXyhzb3VyY2UpIHtcbiAgICByZXR1cm4gc291cmNlLnJ1bkF1dGhvcml6YXRpb24oKVxuICAgICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgIHRoaXMudG9nZ2xlVG9wQ2xhc3NfKCdhbXAtYWNjZXNzLWVycm9yJywgdHJ1ZSk7XG4gICAgICAgIH0pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSBmcm9tIEFjY2Vzc1ZhcnMgKi9cbiAgZ2V0QXV0aGRhdGFGaWVsZChmaWVsZCkge1xuICAgIGlmICghdGhpcy5lbmFibGVkXykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmxhc3RBdXRob3JpemF0aW9uUHJvbWlzZXNfLnRoZW4oKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2VzID0gdGhpcy5jb21iaW5lZFJlc3BvbnNlcygpO1xuICAgICAgY29uc3QgdiA9IGdldFZhbHVlRm9yRXhwcihyZXNwb25zZXMsIGZpZWxkKTtcbiAgICAgIHJldHVybiB2ICE9PSB1bmRlZmluZWQgPyB2IDogbnVsbDtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFEb2N1bWVudHwhU2hhZG93Um9vdHwhRWxlbWVudH0gcm9vdFxuICAgKiBAcGFyYW0geyFKc29uT2JqZWN0fSByZXNwb25zZVxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFwcGx5QXV0aG9yaXphdGlvblRvUm9vdF8ocm9vdCwgcmVzcG9uc2UpIHtcbiAgICBjb25zdCBlbGVtZW50cyA9IHJvb3QucXVlcnlTZWxlY3RvckFsbCgnW2FtcC1hY2Nlc3NdJyk7XG4gICAgY29uc3QgcHJvbWlzZXMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBwcm9taXNlcy5wdXNoKHRoaXMuYXBwbHlBdXRob3JpemF0aW9uVG9FbGVtZW50XyhlbGVtZW50c1tpXSwgcmVzcG9uc2UpKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMuYXBwbHlBdXRob3JpemF0aW9uc09ic2VydmFibGVfLmZpcmUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gICAqIEBwYXJhbSB7IUpzb25PYmplY3R9IHJlc3BvbnNlXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYXBwbHlBdXRob3JpemF0aW9uVG9FbGVtZW50XyhlbGVtZW50LCByZXNwb25zZSkge1xuICAgIGNvbnN0IGV4cHIgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnYW1wLWFjY2VzcycpO1xuICAgIGNvbnN0IG9uID0gZXZhbHVhdGVBY2Nlc3NFeHByKGV4cHIsIHJlc3BvbnNlKTtcbiAgICBsZXQgcmVuZGVyUHJvbWlzZSA9IG51bGw7XG4gICAgaWYgKG9uKSB7XG4gICAgICByZW5kZXJQcm9taXNlID0gdGhpcy5yZW5kZXJUZW1wbGF0ZXNfKGVsZW1lbnQsIHJlc3BvbnNlKTtcbiAgICB9XG4gICAgaWYgKHJlbmRlclByb21pc2UpIHtcbiAgICAgIHJldHVybiByZW5kZXJQcm9taXNlLnRoZW4oKCkgPT5cbiAgICAgICAgdGhpcy5hcHBseUF1dGhvcml6YXRpb25BdHRyc18oZWxlbWVudCwgb24pKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuYXBwbHlBdXRob3JpemF0aW9uQXR0cnNfKGVsZW1lbnQsIG9uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gb25cbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhcHBseUF1dGhvcml6YXRpb25BdHRyc18oZWxlbWVudCwgb24pIHtcbiAgICBjb25zdCB3YXNPbiA9ICFlbGVtZW50Lmhhc0F0dHJpYnV0ZSgnYW1wLWFjY2Vzcy1oaWRlJyk7XG4gICAgaWYgKG9uID09IHdhc09uKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnJlc291cmNlc18ubXV0YXRlRWxlbWVudChlbGVtZW50LCAoKSA9PiB7XG4gICAgICBpZiAob24pIHtcbiAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2FtcC1hY2Nlc3MtaGlkZScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FtcC1hY2Nlc3MtaGlkZScsICcnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNjb3ZlcnMgYW5kIHJlbmRlcnMgdGVtcGxhdGVzLlxuICAgKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gICAqIEBwYXJhbSB7IUpzb25PYmplY3R9IHJlc3BvbnNlXG4gICAqIEByZXR1cm4gez9Qcm9taXNlfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcmVuZGVyVGVtcGxhdGVzXyhlbGVtZW50LCByZXNwb25zZSkge1xuICAgIGNvbnN0IHByb21pc2VzID0gW107XG4gICAgY29uc3QgdGVtcGxhdGVFbGVtZW50cyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2FtcC1hY2Nlc3MtdGVtcGxhdGVdJyk7XG4gICAgaWYgKHRlbXBsYXRlRWxlbWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZW1wbGF0ZUVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHAgPSB0aGlzLnJlbmRlclRlbXBsYXRlXyhlbGVtZW50LCB0ZW1wbGF0ZUVsZW1lbnRzW2ldLCByZXNwb25zZSlcbiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICAgIC8vIElnbm9yZSB0aGUgZXJyb3IuXG4gICAgICAgICAgICAgIGRldigpLmVycm9yKFRBRywgJ1RlbXBsYXRlIGZhaWxlZDogJywgZXJyb3IsXG4gICAgICAgICAgICAgICAgICB0ZW1wbGF0ZUVsZW1lbnRzW2ldLCBlbGVtZW50KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBwcm9taXNlcy5wdXNoKHApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcHJvbWlzZXMubGVuZ3RoID4gMCA/IFByb21pc2UuYWxsKHByb21pc2VzKSA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICAgKiBAcGFyYW0geyFFbGVtZW50fSB0ZW1wbGF0ZU9yUHJldlxuICAgKiBAcGFyYW0geyFKc29uT2JqZWN0fSByZXNwb25zZVxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlbmRlclRlbXBsYXRlXyhlbGVtZW50LCB0ZW1wbGF0ZU9yUHJldiwgcmVzcG9uc2UpIHtcbiAgICBsZXQgdGVtcGxhdGUgPSB0ZW1wbGF0ZU9yUHJldjtcbiAgICBsZXQgcHJldiA9IG51bGw7XG4gICAgaWYgKHRlbXBsYXRlLnRhZ05hbWUgIT0gJ1RFTVBMQVRFJykge1xuICAgICAgcHJldiA9IHRlbXBsYXRlO1xuICAgICAgdGVtcGxhdGUgPSBwcmV2W1RFTVBMQVRFX1BST1BdO1xuICAgIH1cbiAgICBpZiAoIXRlbXBsYXRlKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCd0ZW1wbGF0ZSBub3QgZm91bmQnKSk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVuZGVyZWQgPSB0aGlzLnRlbXBsYXRlc18ucmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHJlc3BvbnNlKTtcbiAgICByZXR1cm4gcmVuZGVyZWQudGhlbihlbGVtZW50ID0+IHtcbiAgICAgIHJldHVybiB0aGlzLnZzeW5jXy5tdXRhdGVQcm9taXNlKCgpID0+IHtcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FtcC1hY2Nlc3MtdGVtcGxhdGUnLCAnJyk7XG4gICAgICAgIGVsZW1lbnRbVEVNUExBVEVfUFJPUF0gPSB0ZW1wbGF0ZTtcbiAgICAgICAgaWYgKHRlbXBsYXRlLnBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgICB0ZW1wbGF0ZS5wYXJlbnRFbGVtZW50LnJlcGxhY2VDaGlsZChlbGVtZW50LCB0ZW1wbGF0ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAocHJldiAmJiBwcmV2LnBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgICBwcmV2LnBhcmVudEVsZW1lbnQucmVwbGFjZUNoaWxkKGVsZW1lbnQsIHByZXYpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3RpbWV9IHRpbWVUb1ZpZXdcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHNjaGVkdWxlVmlld18odGltZVRvVmlldykge1xuICAgIGlmICghdGhpcy5zb3VyY2VzXy5zb21lKHMgPT4gcy5nZXRBZGFwdGVyKCkuaXNQaW5nYmFja0VuYWJsZWQoKSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5yZXBvcnRWaWV3UHJvbWlzZV8gPSBudWxsO1xuICAgIHRoaXMuYW1wZG9jLndoZW5SZWFkeSgpLnRoZW4oKCkgPT4ge1xuICAgICAgaWYgKHRoaXMudmlld2VyXy5pc1Zpc2libGUoKSkge1xuICAgICAgICB0aGlzLnJlcG9ydFdoZW5WaWV3ZWRfKHRpbWVUb1ZpZXcpO1xuICAgICAgfVxuICAgICAgdGhpcy52aWV3ZXJfLm9uVmlzaWJpbGl0eUNoYW5nZWQoKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy52aWV3ZXJfLmlzVmlzaWJsZSgpKSB7XG4gICAgICAgICAgdGhpcy5yZXBvcnRXaGVuVmlld2VkXyh0aW1lVG9WaWV3KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHt0aW1lfSB0aW1lVG9WaWV3XG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcmVwb3J0V2hlblZpZXdlZF8odGltZVRvVmlldykge1xuICAgIGlmICh0aGlzLnJlcG9ydFZpZXdQcm9taXNlXykge1xuICAgICAgcmV0dXJuIHRoaXMucmVwb3J0Vmlld1Byb21pc2VfO1xuICAgIH1cbiAgICBkZXYoKS5maW5lKFRBRywgJ3N0YXJ0IHZpZXcgbW9uaXRvcmluZycpO1xuICAgIHRoaXMucmVwb3J0Vmlld1Byb21pc2VfID0gdGhpcy53aGVuVmlld2VkXyh0aW1lVG9WaWV3KVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgLy8gV2FpdCBmb3IgdGhlIG1vc3QgcmVjZW50IGF1dGhvcml6YXRpb24gZmxvdyB0byBjb21wbGV0ZS5cbiAgICAgICAgICByZXR1cm4gdGhpcy5sYXN0QXV0aG9yaXphdGlvblByb21pc2VzXztcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIC8vIFJlcG9ydCB0aGUgYW5hbHl0aWNzIGV2ZW50LlxuICAgICAgICAgIHRoaXMuYW5hbHl0aWNzRXZlbnRfKCdhY2Nlc3Mtdmlld2VkJyk7XG4gICAgICAgICAgcmV0dXJuIHRoaXMucmVwb3J0Vmlld1RvU2VydmVyXygpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2gocmVhc29uID0+IHtcbiAgICAgICAgICAvLyBJZ25vcmUgLSB2aWV3IGhhcyBiZWVuIGNhbmNlbGVkLlxuICAgICAgICAgIGRldigpLmZpbmUoVEFHLCAndmlldyBjYW5jZWxsZWQ6JywgcmVhc29uKTtcbiAgICAgICAgICB0aGlzLnJlcG9ydFZpZXdQcm9taXNlXyA9IG51bGw7XG4gICAgICAgICAgdGhyb3cgcmVhc29uO1xuICAgICAgICB9KTtcblxuICAgIC8vIFN1cHBvcnQgcHJlLXJlbmRlcmluZyB3aXRoIG1ldGVyaW5nIGJ5IHBvc3NpYmx5IGhpZGluZyBjb250ZW50XG4gICAgLy8gYWZ0ZXIgdmlldyBpcyByZWNvcmRlZC5cbiAgICB0aGlzLnJlcG9ydFZpZXdQcm9taXNlXy50aGVuKHRoaXMuYnJvYWRjYXN0UmVhdXRob3JpemVfLmJpbmQodGhpcykpO1xuXG4gICAgcmV0dXJuIHRoaXMucmVwb3J0Vmlld1Byb21pc2VfO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBwcm9taXNlIHdpbGwgYmUgcmVzb2x2ZWQgd2hlbiBhIHZpZXcgb2YgdGhpcyBkb2N1bWVudCBoYXMgb2NjdXJyZWQuIEl0XG4gICAqIHdpbGwgYmUgcmVqZWN0ZWQgaWYgdGhlIGN1cnJlbnQgaW1wcmVzc2lvbiBzaG91bGQgbm90IGJlIGNvdW50ZWQgYXMgYSB2aWV3LlxuICAgKiBAcGFyYW0ge3RpbWV9IHRpbWVUb1ZpZXcgUGFzcyB0aGUgdmFsdWUgb2YgMCB3aGVuIHRoaXMgbWV0aG9kIGlzIGNhbGxlZFxuICAgKiAgIGFzIHRoZSByZXN1bHQgb2YgdGhlIHVzZXIgYWN0aW9uLlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHdoZW5WaWV3ZWRfKHRpbWVUb1ZpZXcpIHtcbiAgICBpZiAodGltZVRvVmlldyA9PSAwKSB7XG4gICAgICAvLyBJbW1lZGlhdGUgdmlldyBoYXMgYmVlbiByZWdpc3RlcmVkLiBUaGlzIHdpbGwgaGFwcGVuIHdoZW4gdGhpcyBtZXRob2RcbiAgICAgIC8vIGlzIGNhbGxlZCBhcyB0aGUgcmVzdWx0IG9mIHRoZSB1c2VyIGFjdGlvbi5cbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICAvLyBWaWV3aW5nIGtpY2sgb2ZmOiBkb2N1bWVudCBpcyB2aXNpYmxlLlxuICAgIGNvbnN0IHVubGlzdGVuU2V0ID0gW107XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIC8vIDEuIERvY3VtZW50IGJlY29tZXMgaW52aXNpYmxlIGFnYWluOiBjYW5jZWwuXG4gICAgICB1bmxpc3RlblNldC5wdXNoKHRoaXMudmlld2VyXy5vblZpc2liaWxpdHlDaGFuZ2VkKCgpID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLnZpZXdlcl8uaXNWaXNpYmxlKCkpIHtcbiAgICAgICAgICByZWplY3QoY2FuY2VsbGF0aW9uKCkpO1xuICAgICAgICB9XG4gICAgICB9KSk7XG5cbiAgICAgIC8vIDIuIEFmdGVyIGEgZmV3IHNlY29uZHM6IHJlZ2lzdGVyIGEgdmlldy5cbiAgICAgIGNvbnN0IHRpbWVvdXRJZCA9IHRoaXMudGltZXJfLmRlbGF5KHJlc29sdmUsIHRpbWVUb1ZpZXcpO1xuICAgICAgdW5saXN0ZW5TZXQucHVzaCgoKSA9PiB0aGlzLnRpbWVyXy5jYW5jZWwodGltZW91dElkKSk7XG5cbiAgICAgIC8vIDMuIElmIHNjcm9sbGVkOiByZWdpc3RlciBhIHZpZXcuXG4gICAgICB1bmxpc3RlblNldC5wdXNoKHRoaXMudmlld3BvcnRfLm9uU2Nyb2xsKHJlc29sdmUpKTtcblxuICAgICAgLy8gNC4gVGFwOiByZWdpc3RlciBhIHZpZXcuXG4gICAgICB1bmxpc3RlblNldC5wdXNoKGxpc3Rlbk9uY2UodGhpcy5hbXBkb2MuZ2V0Um9vdE5vZGUoKSxcbiAgICAgICAgICAnY2xpY2snLCByZXNvbHZlKSk7XG4gICAgfSkudGhlbigoKSA9PiB7XG4gICAgICB1bmxpc3RlblNldC5mb3JFYWNoKHVubGlzdGVuID0+IHVubGlzdGVuKCkpO1xuICAgIH0sIHJlYXNvbiA9PiB7XG4gICAgICB1bmxpc3RlblNldC5mb3JFYWNoKHVubGlzdGVuID0+IHVubGlzdGVuKCkpO1xuICAgICAgdGhyb3cgcmVhc29uO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcmVwb3J0Vmlld1RvU2VydmVyXygpIHtcbiAgICBjb25zdCBwcm9taXNlcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zb3VyY2VzXy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMuc291cmNlc19baV0uZ2V0QWRhcHRlcigpLmlzUGluZ2JhY2tFbmFibGVkKCkpIHtcbiAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLnNvdXJjZXNfW2ldLnJlcG9ydFZpZXdUb1NlcnZlcigpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NOYW1lXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gb25cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRvZ2dsZVRvcENsYXNzXyhjbGFzc05hbWUsIG9uKSB7XG4gICAgdGhpcy52c3luY18ubXV0YXRlKCgpID0+IHtcbiAgICAgIHRoaXMuZ2V0Um9vdEVsZW1lbnRfKCkuY2xhc3NMaXN0LnRvZ2dsZShjbGFzc05hbWUsIG9uKTtcbiAgICB9KTtcblxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4uLy4uLy4uL3NyYy9zZXJ2aWNlL2FjdGlvbi1pbXBsLkFjdGlvbkludm9jYXRpb259IGludm9jYXRpb25cbiAgICogQHJldHVybiB7P1Byb21pc2V9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVBY3Rpb25fKGludm9jYXRpb24pIHtcbiAgICBpZiAoaW52b2NhdGlvbi5tZXRob2QgPT0gJ2xvZ2luJykge1xuICAgICAgaWYgKGludm9jYXRpb24uZXZlbnQpIHtcbiAgICAgICAgaW52b2NhdGlvbi5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuICAgICAgdGhpcy5sb2dpbldpdGhUeXBlXygnJyk7XG4gICAgfSBlbHNlIGlmIChzdGFydHNXaXRoKGludm9jYXRpb24ubWV0aG9kLCAnbG9naW4tJykpIHtcbiAgICAgIGlmIChpbnZvY2F0aW9uLmV2ZW50KSB7XG4gICAgICAgIGludm9jYXRpb24uZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMubG9naW5XaXRoVHlwZV8oaW52b2NhdGlvbi5tZXRob2Quc3Vic3RyaW5nKCdsb2dpbi0nLmxlbmd0aCkpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBvc2UgdGhlIHVuZGVybHlpbmcgQWNjZXNzU291cmNlIGZvciB1c2UgYnkgbGF0ZXJwYXkuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleFxuICAgKiBAcmV0dXJuIHshQWNjZXNzU291cmNlfVxuICAgKi9cbiAgZ2V0U291cmNlKGluZGV4KSB7XG4gICAgdXNlcigpLmFzc2VydChpbmRleCA+PSAwICYmIGluZGV4IDwgdGhpcy5zb3VyY2VzXy5sZW5ndGgsXG4gICAgICAgICdJbnZhbGlkIGluZGV4OiAlZCcsIGluZGV4KTtcbiAgICByZXR1cm4gdGhpcy5zb3VyY2VzX1tpbmRleF07XG4gIH1cblxuICAvKipcbiAgICogUnVucyB0aGUgbG9naW4gZmxvdyB1c2luZyBvbmUgb2YgdGhlIHByZWRlZmluZWQgdXJscyBpbiB0aGUgYW1wLWFjY2Vzc1xuICAgKiBjb25maWdcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVHlwZSBvZiBsb2dpbiBkZWZpbmVkIGluIHRoZSBjb25maWdcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBsb2dpbldpdGhUeXBlXyh0eXBlKSB7XG4gICAgY29uc3Qgc3BsaXRQb2ludCA9IHR5cGUuaW5kZXhPZignLScpO1xuICAgIGNvbnN0IHNpbmdsZVNvdXJjZSA9IHRoaXMuc291cmNlc18ubGVuZ3RoID09IDE7XG5cbiAgICAvLyBUcnkgdG8gZmluZCBhIG1hdGNoaW5nIG5hbWVzcGFjZVxuICAgIGNvbnN0IG5hbWVzcGFjZSA9IChzcGxpdFBvaW50ID4gLTEpID8gdHlwZS5zdWJzdHJpbmcoMCwgc3BsaXRQb2ludCkgOiB0eXBlO1xuICAgIGNvbnN0IG1hdGNoID0gdGhpcy5zb3VyY2VzXy5maWx0ZXIocyA9PiBzLmdldE5hbWVzcGFjZSgpID09IG5hbWVzcGFjZSk7XG4gICAgaWYgKG1hdGNoLmxlbmd0aCkge1xuICAgICAgLy8gTWF0Y2hpbmcgbmFtZXNwYWNlIGZvdW5kXG4gICAgICBjb25zdCByZW1haW5pbmcgPSAoc3BsaXRQb2ludCA+IC0xKSA/IHR5cGUuc3Vic3RyaW5nKHNwbGl0UG9pbnQgKyAxKSA6ICcnO1xuICAgICAgcmV0dXJuIG1hdGNoWzBdLmxvZ2luV2l0aFR5cGUocmVtYWluaW5nKTtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGVyZSBpcyBvbmx5IG9uZSBzb3VyY2UsIHByb2Nlc3MgYXMgc3RhbmRhbG9uZVxuICAgIHVzZXIoKS5hc3NlcnQoc2luZ2xlU291cmNlLCAnTG9naW4gbXVzdCBtYXRjaCBuYW1lc3BhY2U6ICVzJywgbmFtZXNwYWNlKTtcbiAgICByZXR1cm4gdGhpcy5zb3VyY2VzX1swXS5sb2dpbldpdGhUeXBlKHR5cGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEVpdGhlciBjb21iaW5lIG5hbWVzcGFjZWQgcmVzcG9uc2VzIG9yIGp1c3QgcmV0dXJuIHRoZSBzaW5nbGUgb25lLlxuICAgKlxuICAgKiBAcmV0dXJuIHshSnNvbk9iamVjdH1cbiAgICovXG4gIGNvbWJpbmVkUmVzcG9uc2VzKCkge1xuICAgIGlmICh0aGlzLnNvdXJjZXNfLmxlbmd0aCA9PSAxICYmICF0aGlzLnNvdXJjZXNfWzBdLmdldE5hbWVzcGFjZSgpKSB7XG4gICAgICByZXR1cm4gLyoqIEB0eXBlIHshSnNvbk9iamVjdH0gKi8gKHRoaXMuc291cmNlc19bMF0uZ2V0QXV0aFJlc3BvbnNlKCkgfHxcbiAgICAgICAge30pO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbWJpbmVkID0gLyoqIEB0eXBlIHshSnNvbk9iamVjdH0gKi8gKHt9KTtcbiAgICB0aGlzLnNvdXJjZXNfLmZvckVhY2goc291cmNlID0+XG4gICAgICBjb21iaW5lZFtzb3VyY2UuZ2V0TmFtZXNwYWNlKCldID0gc291cmNlLmdldEF1dGhSZXNwb25zZSgpKTtcbiAgICByZXR1cm4gY29tYmluZWQ7XG4gIH1cbn1cblxuXG4vLyBSZWdpc3RlciB0aGUgZXh0ZW5zaW9uIHNlcnZpY2VzLlxuQU1QLmV4dGVuc2lvbihUQUcsICcwLjEnLCBmdW5jdGlvbihBTVApIHtcbiAgQU1QLnJlZ2lzdGVyU2VydmljZUZvckRvYygnYWNjZXNzJywgZnVuY3Rpb24oYW1wZG9jKSB7XG4gICAgcmV0dXJuIG5ldyBBY2Nlc3NTZXJ2aWNlKGFtcGRvYykuc3RhcnRfKCk7XG4gIH0pO1xufSk7XG5cblxuLyoqIEBwYWNrYWdlIFZpc2libGUgZm9yIHRlc3Rpbmcgb25seS4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBY2Nlc3NWYXJzQ2xhc3NGb3JUZXN0aW5nKCkge1xuICByZXR1cm4gQWNjZXNzVmFycztcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgVGhlIG1lc3NhZ2luZyBwcm90b2NvbCBpcyBpbnRlbnRpb25hbGx5IGtlcHQgY2xvc2UgdG9cbiAqIFdlYiBBY3Rpdml0aWVzIChodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL3dlYi1hY3Rpdml0aWVzKS4gV2UgbWF5IHN3aXRjaFxuICogdGhlIGV4YWN0IFdBIHZlcnNpb24gYXQgc29tZSBpbiB0aGUgZnV0dXJlLlxuICpcbiAqIE5vdGljZSEgQXMgbXVjaCBhcyBwb3NzaWJsZSwga2VlcCB0aGlzIG1vZHVsZSBkZXBlbmRlbmN5LWZyZWUuXG4gKi9cblxuaW1wb3J0IHtEZWZlcnJlZH0gZnJvbSAnLi4vLi4vLi4vLi4vc3JjL3V0aWxzL3Byb21pc2UnO1xuXG5jb25zdCBTRU5USU5FTCA9ICdfX0FNUF9fJztcblxuXG5leHBvcnQgY2xhc3MgTWVzc2VuZ2VyIHtcblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICogQHBhcmFtIHshV2luZG93fGZ1bmN0aW9uKCk6P1dpbmRvd30gdGFyZ2V0T3JDYWxsYmFja1xuICAgKiBAcGFyYW0gez9zdHJpbmd9IHRhcmdldE9yaWdpblxuICAgKi9cbiAgY29uc3RydWN0b3Iod2luLCB0YXJnZXRPckNhbGxiYWNrLCB0YXJnZXRPcmlnaW4pIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IHdpbjtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fGZ1bmN0aW9uKCk6P1dpbmRvd30gKi9cbiAgICB0aGlzLnRhcmdldE9yQ2FsbGJhY2tfID0gdGFyZ2V0T3JDYWxsYmFjaztcblxuICAgIC8qKlxuICAgICAqIE1heSBzdGFydCBhcyB1bmtub3duIChgbnVsbGApIHVudGlsIHJlY2VpdmVkIGluIHRoZSBmaXJzdCBtZXNzYWdlLlxuICAgICAqIEBwcml2YXRlIHs/c3RyaW5nfVxuICAgICAqL1xuICAgIHRoaXMudGFyZ2V0T3JpZ2luXyA9IHRhcmdldE9yaWdpbjtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P1dpbmRvd30gKi9cbiAgICB0aGlzLnRhcmdldF8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/ZnVuY3Rpb24oc3RyaW5nLCA/T2JqZWN0KToqfSAqL1xuICAgIHRoaXMub25Db21tYW5kXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0ICovXG4gICAgdGhpcy5ib3VuZEhhbmRsZUV2ZW50XyA9IHRoaXMuaGFuZGxlRXZlbnRfLmJpbmQodGhpcyk7XG5cbiAgICAvKiogQHByaXZhdGUge251bWJlcn0gKi9cbiAgICB0aGlzLnJlcXVlc3RJZF8gPSAwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiB7IU9iamVjdDxzdHJpbmcsIHtyZXNvbHZlOiBmdW5jdGlvbigqKSwgcHJvbWlzZTogIVByb21pc2U8Kj59Pn1cbiAgICAgKi9cbiAgICB0aGlzLndhaXRpbmdfID0ge307XG4gIH1cblxuICAvKipcbiAgICogQ29ubmVjdCB0aGUgcG9ydCB0byB0aGUgaG9zdCBvciB2aWNlIHZlcnNhLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHN0cmluZywgP09iamVjdCk6Kn0gb25Db21tYW5kXG4gICAqL1xuICBjb25uZWN0KG9uQ29tbWFuZCkge1xuICAgIGlmICh0aGlzLm9uQ29tbWFuZF8pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignYWxyZWFkeSBjb25uZWN0ZWQnKTtcbiAgICB9XG4gICAgdGhpcy5vbkNvbW1hbmRfID0gb25Db21tYW5kO1xuICAgIHRoaXMud2luXy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgdGhpcy5ib3VuZEhhbmRsZUV2ZW50Xyk7XG4gIH1cblxuICAvKipcbiAgICogRGlzY29ubmVjdCBtZXNzZW5nZXIuXG4gICAqL1xuICBkaXNjb25uZWN0KCkge1xuICAgIGlmICh0aGlzLm9uQ29tbWFuZF8pIHtcbiAgICAgIHRoaXMub25Db21tYW5kXyA9IG51bGw7XG4gICAgICB0aGlzLndpbl8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMuYm91bmRIYW5kbGVFdmVudF8pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIG1lc3NlbmdlciBoYXMgYmVlbiBjb25uZWN0ZWQgYWxyZWFkeS5cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzQ29ubmVjdGVkKCkge1xuICAgIHJldHVybiB0aGlzLnRhcmdldE9yaWdpbl8gIT0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBtZXNzYWdpbmcgdGFyZ2V0LiBPbmx5IGF2YWlsYWJsZSB3aGVuIGNvbm5lY3Rpb24gaGFzIGJlZW5cbiAgICogZXN0YWJsaWhzZWQuXG4gICAqIEByZXR1cm4geyFXaW5kb3d9XG4gICAqL1xuICBnZXRUYXJnZXQoKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gdGhpcy5nZXRPcHRpb25hbFRhcmdldF8oKTtcbiAgICBpZiAoIXRhcmdldCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdub3QgY29ubmVjdGVkJyk7XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P1dpbmRvd31cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldE9wdGlvbmFsVGFyZ2V0XygpIHtcbiAgICBpZiAodGhpcy5vbkNvbW1hbmRfICYmICF0aGlzLnRhcmdldF8pIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy50YXJnZXRPckNhbGxiYWNrXyA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0XyA9IHRoaXMudGFyZ2V0T3JDYWxsYmFja18oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudGFyZ2V0XyA9IC8qKiBAdHlwZSB7IVdpbmRvd30gKi8gKHRoaXMudGFyZ2V0T3JDYWxsYmFja18pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy50YXJnZXRfO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG1lc3NhZ2luZyBvcmlnaW4uIE9ubHkgYXZhaWxhYmxlIHdoZW4gY29ubmVjdGlvbiBoYXMgYmVlblxuICAgKiBlc3RhYmxpaHNlZC5cbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0VGFyZ2V0T3JpZ2luKCkge1xuICAgIGlmICh0aGlzLnRhcmdldE9yaWdpbl8gPT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdub3QgY29ubmVjdGVkJyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnRhcmdldE9yaWdpbl87XG4gIH1cblxuICAvKipcbiAgICogU2VuZHMgdGhlIHNwZWNpZmllZCBjb21tYW5kIGZyb20gdGhlIHBvcnQgdG8gdGhlIGhvc3Qgb3IgdmljZSB2ZXJzYS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGNtZFxuICAgKiBAcGFyYW0gez9PYmplY3Q9fSBvcHRfcGF5bG9hZFxuICAgKi9cbiAgc2VuZENvbW1hbmQoY21kLCBvcHRfcGF5bG9hZCkge1xuICAgIHRoaXMuc2VuZENvbW1hbmRfKC8qIHJzdnBJZCAqLyB1bmRlZmluZWQsIGNtZCwgb3B0X3BheWxvYWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmRzIHRoZSBzcGVjaWZpZWQgY29tbWFuZCBmcm9tIHRoZSBwb3J0IHRvIHRoZSBob3N0IG9yIHZpY2UgdmVyc2EuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjbWRcbiAgICogQHBhcmFtIHs/T2JqZWN0PX0gb3B0X3BheWxvYWRcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBzZW5kQ29tbWFuZFJzdnAoY21kLCBvcHRfcGF5bG9hZCkge1xuICAgIGNvbnN0IHJzdnBJZCA9IFN0cmluZygrK3RoaXMucmVxdWVzdElkXyk7XG4gICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICBjb25zdCB7cHJvbWlzZSwgcmVzb2x2ZTogcmVzb2x2ZXJ9ID0gZGVmZXJyZWQ7XG5cblxuICAgIHRoaXMud2FpdGluZ19bcnN2cElkXSA9IHtcbiAgICAgIHByb21pc2UsXG4gICAgICByZXNvbHZlcixcbiAgICB9O1xuICAgIHRoaXMuc2VuZENvbW1hbmRfKHJzdnBJZCwgY21kLCBvcHRfcGF5bG9hZCk7XG4gICAgcmV0dXJuIHByb21pc2U7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd8dW5kZWZpbmVkfSByc3ZwSWRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNtZFxuICAgKiBAcGFyYW0gez9PYmplY3Q9fSBvcHRfcGF5bG9hZFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc2VuZENvbW1hbmRfKHJzdnBJZCwgY21kLCBvcHRfcGF5bG9hZCkge1xuICAgIGNvbnN0IHRhcmdldCA9IHRoaXMuZ2V0VGFyZ2V0KCk7XG4gICAgLy8gT25seSBcImNvbm5lY3RcIiBjb21tYW5kIGlzIGFsbG93ZWQgdG8gdXNlIGB0YXJnZXRPcmlnaW4gPT0gJyonYFxuICAgIGNvbnN0IHRhcmdldE9yaWdpbiA9XG4gICAgICAgIGNtZCA9PSAnY29ubmVjdCcgP1xuICAgICAgICAgICh0aGlzLnRhcmdldE9yaWdpbl8gIT0gbnVsbCA/IHRoaXMudGFyZ2V0T3JpZ2luXyA6ICcqJykgOlxuICAgICAgICAgIHRoaXMuZ2V0VGFyZ2V0T3JpZ2luKCk7XG4gICAgdGFyZ2V0Li8qT0sqL3Bvc3RNZXNzYWdlKC8qKiBAdHlwZSB7IUpzb25PYmplY3R9ICovICh7XG4gICAgICAnc2VudGluZWwnOiBTRU5USU5FTCxcbiAgICAgICdfcnN2cCc6IHJzdnBJZCxcbiAgICAgICdjbWQnOiBjbWQsXG4gICAgICAncGF5bG9hZCc6IG9wdF9wYXlsb2FkIHx8IG51bGwsXG4gICAgfSksIHRhcmdldE9yaWdpbik7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRXZlbnR9IGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhbmRsZUV2ZW50XyhlKSB7XG4gICAgY29uc3QgZXZlbnQgPSAvKiogQHR5cGUgeyFNZXNzYWdlRXZlbnR9ICovIChlKTtcbiAgICBjb25zdCB7ZGF0YX0gPSBldmVudDtcbiAgICBpZiAoIWRhdGEgfHwgZGF0YVsnc2VudGluZWwnXSAhPSBTRU5USU5FTCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBvcmlnaW4gPSAvKiogQHR5cGUge3N0cmluZ30gKi8gKGV2ZW50Lm9yaWdpbik7XG4gICAgY29uc3QgY21kID0gZGF0YVsnY21kJ107XG4gICAgY29uc3QgcGF5bG9hZCA9IGRhdGFbJ3BheWxvYWQnXSB8fCBudWxsO1xuICAgIGlmICh0aGlzLnRhcmdldE9yaWdpbl8gPT0gbnVsbCAmJiBjbWQgPT0gJ3N0YXJ0Jykge1xuICAgICAgdGhpcy50YXJnZXRPcmlnaW5fID0gb3JpZ2luO1xuICAgIH1cbiAgICBpZiAodGhpcy50YXJnZXRPcmlnaW5fID09IG51bGwgJiYgZXZlbnQuc291cmNlKSB7XG4gICAgICBpZiAodGhpcy5nZXRPcHRpb25hbFRhcmdldF8oKSA9PSBldmVudC5zb3VyY2UpIHtcbiAgICAgICAgdGhpcy50YXJnZXRPcmlnaW5fID0gb3JpZ2luO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBOb3RpY2UgdGhhdCBldmVudC5zb3VyY2UgbWF5IGRpZmZlciBmcm9tIHRoZSB0YXJnZXQgYmVjYXVzZSBvZlxuICAgIC8vIGZyaWVuZGx5LWlmcmFtZSBpbnRlcm1lZGlhcmllcy5cbiAgICBpZiAob3JpZ2luICE9IHRoaXMudGFyZ2V0T3JpZ2luXykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCByc3ZwSWQgPSBkYXRhWydfcnN2cCddO1xuICAgIGNvbnN0IHJzdnAgPSAhIXJzdnBJZCAmJiBjbWQgIT0gJ3JzdnAnO1xuICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuaGFuZGxlQ29tbWFuZF8ocnN2cElkLCBjbWQsIHBheWxvYWQpO1xuICAgIGlmIChyc3ZwKSB7XG4gICAgICBQcm9taXNlLnJlc29sdmUocmVzdWx0KS50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgIHRoaXMuc2VuZENvbW1hbmRfKHJzdnBJZCwgJ3JzdnAnLCB7XG4gICAgICAgICAgJ3Jlc3VsdCc6IHJlc3VsdCxcbiAgICAgICAgfSk7XG4gICAgICB9LCByZWFzb24gPT4ge1xuICAgICAgICB0aGlzLnNlbmRDb21tYW5kXyhyc3ZwSWQsICdyc3ZwJywge1xuICAgICAgICAgICdlcnJvcic6IFN0cmluZyhyZWFzb24pLFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ3x1bmRlZmluZWR9IHJzdnBJZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gY21kXG4gICAqIEBwYXJhbSB7P09iamVjdH0gcGF5bG9hZFxuICAgKiBAcmV0dXJuIHsqfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlQ29tbWFuZF8ocnN2cElkLCBjbWQsIHBheWxvYWQpIHtcbiAgICBpZiAoY21kID09ICdyc3ZwJykge1xuICAgICAgY29uc3Qgd2FpdGluZyA9IHJzdnBJZCAmJiB0aGlzLndhaXRpbmdfW3JzdnBJZF07XG4gICAgICBpZiAod2FpdGluZykge1xuICAgICAgICBpZiAoJ2Vycm9yJyBpbiBwYXlsb2FkKSB7XG4gICAgICAgICAgd2FpdGluZy5yZXNvbHZlcihQcm9taXNlLnJlamVjdChuZXcgRXJyb3IocGF5bG9hZFsnZXJyb3InXSkpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB3YWl0aW5nLnJlc29sdmVyKHBheWxvYWRbJ3Jlc3VsdCddKTtcbiAgICAgICAgfVxuICAgICAgICBkZWxldGUgdGhpcy53YWl0aW5nX1tyc3ZwSWRdO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5vbkNvbW1hbmRfKGNtZCwgcGF5bG9hZCk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICBiYXNlNjRVcmxEZWNvZGVUb0J5dGVzLFxufSBmcm9tICcuLi8uLi8uLi9zcmMvdXRpbHMvYmFzZTY0JztcbmltcG9ydCB7cGVtVG9CeXRlc30gZnJvbSAnLi4vLi4vLi4vc3JjL3V0aWxzL3BlbSc7XG5pbXBvcnQge3N0cmluZ1RvQnl0ZXMsIHV0ZjhEZWNvZGV9IGZyb20gJy4uLy4uLy4uL3NyYy91dGlscy9ieXRlcyc7XG5pbXBvcnQge3RyeVBhcnNlSnNvbn0gZnJvbSAnLi4vLi4vLi4vc3JjL2pzb24nO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge3tcbiAqICAgaGVhZGVyOiAoP0pzb25PYmplY3R8dW5kZWZpbmVkKSxcbiAqICAgcGF5bG9hZDogKD9Kc29uT2JqZWN0fHVuZGVmaW5lZCksXG4gKiAgIHZlcmlmaWFibGU6IHN0cmluZyxcbiAqICAgc2lnOiBzdHJpbmcsXG4gKiB9fVxuICovXG5sZXQgSnd0VG9rZW5JbnRlcm5hbERlZjtcblxuXG4vKipcbiAqIFByb3ZpZGVzIGhlbHBlciBtZXRob2RzIHRvIGRlY29kZSBhbmQgdmVyaWZ5IEpXVCB0b2tlbnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBKd3RIZWxwZXIge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKi9cbiAgY29uc3RydWN0b3Iod2luKSB7XG5cbiAgICAvKiogQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luID0gd2luO1xuXG4gICAgLyoqXG4gICAgICogTWlnaHQgYmUgYG51bGxgIGlmIHRoZSBwbGF0Zm9ybSBkb2VzIG5vdCBzdXBwb3J0IENyeXB0byBTdWJ0bGUuXG4gICAgICogQGNvbnN0IEBwcml2YXRlIHs/d2ViQ3J5cHRvLlN1YnRsZUNyeXB0b31cbiAgICAgKi9cbiAgICB0aGlzLnN1YnRsZV8gPSAod2luLmNyeXB0byAmJlxuICAgICAgICAod2luLmNyeXB0by5zdWJ0bGUgfHwgd2luLmNyeXB0by53ZWJraXRTdWJ0bGUpKSB8fCBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIERlY29kZXMgSldUIHRva2VuIGFuZCByZXR1cm5zIGl0cyBwYXlsb2FkLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZW5jb2RlZFRva2VuXG4gICAqIEByZXR1cm4gez9Kc29uT2JqZWN0fHVuZGVmaW5lZH1cbiAgICovXG4gIGRlY29kZShlbmNvZGVkVG9rZW4pIHtcbiAgICByZXR1cm4gdGhpcy5kZWNvZGVJbnRlcm5hbF8oZW5jb2RlZFRva2VuKS5wYXlsb2FkO1xuICB9XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIHNpZ25hdHVyZS12ZXJpZmljYXRpb24gc3VwcG9ydGVkIG9uIHRoaXMgcGxhdGZvcm0uXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBpc1ZlcmlmaWNhdGlvblN1cHBvcnRlZCgpIHtcbiAgICByZXR1cm4gISF0aGlzLnN1YnRsZV87XG4gIH1cblxuICAvKipcbiAgICogRGVjb2RlcyBIV1QgdG9rZW4gYW5kIHZlcmlmaWVzIGl0cyBzaWduYXR1cmUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbmNvZGVkVG9rZW5cbiAgICogQHBhcmFtIHshUHJvbWlzZTxzdHJpbmc+fSBwZW1Qcm9taXNlXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFKc29uT2JqZWN0Pn1cbiAgICovXG4gIGRlY29kZUFuZFZlcmlmeShlbmNvZGVkVG9rZW4sIHBlbVByb21pc2UpIHtcbiAgICBpZiAoIXRoaXMuc3VidGxlXykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDcnlwdG8gaXMgbm90IHN1cHBvcnRlZCBvbiB0aGlzIHBsYXRmb3JtJyk7XG4gICAgfVxuICAgIGNvbnN0IGRlY29kZWRQcm9taXNlID0gbmV3IFByb21pc2UoXG4gICAgICAgIHJlc29sdmUgPT4gcmVzb2x2ZSh0aGlzLmRlY29kZUludGVybmFsXyhlbmNvZGVkVG9rZW4pKSk7XG4gICAgcmV0dXJuIGRlY29kZWRQcm9taXNlLnRoZW4oZGVjb2RlZCA9PiB7XG4gICAgICBjb25zdCBhbGcgPSBkZWNvZGVkLmhlYWRlclsnYWxnJ107XG4gICAgICBpZiAoIWFsZyB8fCBhbGcgIT0gJ1JTMjU2Jykge1xuICAgICAgICAvLyBUT0RPKGR2b3l0ZW5rb0ApOiBTdXBwb3J0IG90aGVyIFJTKiBhbGdvcy5cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdPbmx5IGFsZz1SUzI1NiBpcyBzdXBwb3J0ZWQnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmltcG9ydEtleV8ocGVtUHJvbWlzZSkudGhlbihrZXkgPT4ge1xuICAgICAgICBjb25zdCBzaWcgPSBiYXNlNjRVcmxEZWNvZGVUb0J5dGVzKGRlY29kZWQuc2lnKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3VidGxlXy52ZXJpZnkoXG4gICAgICAgICAgICAvKiBvcHRpb25zICovIHtuYW1lOiAnUlNBU1NBLVBLQ1MxLXYxXzUnfSxcbiAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgIHNpZyxcbiAgICAgICAgICAgIHN0cmluZ1RvQnl0ZXMoZGVjb2RlZC52ZXJpZmlhYmxlKVxuICAgICAgICApO1xuICAgICAgfSkudGhlbihpc1ZhbGlkID0+IHtcbiAgICAgICAgaWYgKGlzVmFsaWQpIHtcbiAgICAgICAgICByZXR1cm4gZGVjb2RlZC5wYXlsb2FkO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignU2lnbmF0dXJlIHZlcmlmaWNhdGlvbiBmYWlsZWQnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbmNvZGVkVG9rZW5cbiAgICogQHJldHVybiB7IUp3dFRva2VuSW50ZXJuYWxEZWZ9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBkZWNvZGVJbnRlcm5hbF8oZW5jb2RlZFRva2VuKSB7XG4gICAgLyoqXG4gICAgICogU2VlIGh0dHBzOi8vand0LmlvL2ludHJvZHVjdGlvbi9cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpbnZhbGlkVG9rZW4oKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgdG9rZW46IFwiJHtlbmNvZGVkVG9rZW59XCJgKTtcbiAgICB9XG5cbiAgICAvLyBFbmNvZGVkIHRva2VuIGhhcyB0aHJlZSBwYXJ0czogaGVhZGVyLnBheWxvYWQuc2lnXG4gICAgLy8gTm90ZSEgVGhlIHBhZGRpbmcgaXMgbm90IGFsbG93ZWQgYnkgSldUIHNwZWM6XG4gICAgLy8gaHR0cDovL3NlbGYtaXNzdWVkLmluZm8vZG9jcy9kcmFmdC1nb2xhbmQtanNvbi13ZWItdG9rZW4tMDAuaHRtbCNyZmMuc2VjdGlvbi41XG4gICAgY29uc3QgcGFydHMgPSBlbmNvZGVkVG9rZW4uc3BsaXQoJy4nKTtcbiAgICBpZiAocGFydHMubGVuZ3RoICE9IDMpIHtcbiAgICAgIGludmFsaWRUb2tlbigpO1xuICAgIH1cbiAgICBjb25zdCBoZWFkZXJVdGY4Qnl0ZXMgPSBiYXNlNjRVcmxEZWNvZGVUb0J5dGVzKHBhcnRzWzBdKTtcbiAgICBjb25zdCBwYXlsb2FkVXRmOEJ5dGVzID0gYmFzZTY0VXJsRGVjb2RlVG9CeXRlcyhwYXJ0c1sxXSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGhlYWRlcjogdHJ5UGFyc2VKc29uKHV0ZjhEZWNvZGUoaGVhZGVyVXRmOEJ5dGVzKSwgaW52YWxpZFRva2VuKSxcbiAgICAgIHBheWxvYWQ6IHRyeVBhcnNlSnNvbih1dGY4RGVjb2RlKHBheWxvYWRVdGY4Qnl0ZXMpLCBpbnZhbGlkVG9rZW4pLFxuICAgICAgdmVyaWZpYWJsZTogYCR7cGFydHNbMF19LiR7cGFydHNbMV19YCxcbiAgICAgIHNpZzogcGFydHNbMl0sXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFQcm9taXNlPHN0cmluZz59IHBlbVByb21pc2VcbiAgICogQHJldHVybiB7IVByb21pc2U8IXdlYkNyeXB0by5DcnlwdG9LZXk+fVxuICAgKi9cbiAgaW1wb3J0S2V5XyhwZW1Qcm9taXNlKSB7XG4gICAgcmV0dXJuIHBlbVByb21pc2UudGhlbihwZW0gPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuc3VidGxlXy5pbXBvcnRLZXkoXG4gICAgICAgICAgLyogZm9ybWF0ICovICdzcGtpJyxcbiAgICAgICAgICBwZW1Ub0J5dGVzKHBlbSksXG4gICAgICAgICAgLyogYWxnbyBvcHRpb25zICovIHtcbiAgICAgICAgICAgIG5hbWU6ICdSU0FTU0EtUEtDUzEtdjFfNScsXG4gICAgICAgICAgICBoYXNoOiB7bmFtZTogJ1NIQS0yNTYnfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIC8qIGV4dHJhY3RhYmxlICovIGZhbHNlLFxuICAgICAgICAgIC8qIHVzZXMgKi8gWyd2ZXJpZnknXSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1NlcnZpY2VzfSBmcm9tICcuLi8uLi8uLi9zcmMvc2VydmljZXMnO1xuaW1wb3J0IHtkZXYsIHVzZXJ9IGZyb20gJy4uLy4uLy4uL3NyYy9sb2cnO1xuaW1wb3J0IHtkaWN0fSBmcm9tICcuLi8uLi8uLi9zcmMvdXRpbHMvb2JqZWN0JztcbmltcG9ydCB7Z2V0RGF0YSwgbGlzdGVufSBmcm9tICcuLi8uLi8uLi9zcmMvZXZlbnQtaGVscGVyJztcbmltcG9ydCB7Z2V0TW9kZX0gZnJvbSAnLi4vLi4vLi4vc3JjL21vZGUnO1xuaW1wb3J0IHtvcGVuV2luZG93RGlhbG9nfSBmcm9tICcuLi8uLi8uLi9zcmMvZG9tJztcbmltcG9ydCB7cGFyc2VVcmxEZXByZWNhdGVkfSBmcm9tICcuLi8uLi8uLi9zcmMvdXJsJztcbmltcG9ydCB7dXJsc30gZnJvbSAnLi4vLi4vLi4vc3JjL2NvbmZpZyc7XG5cbi8qKiBAY29uc3QgKi9cbmNvbnN0IFRBRyA9ICdhbXAtYWNjZXNzLWxvZ2luJztcblxuLyoqIEBjb25zdCB7IVJlZ0V4cH0gKi9cbmNvbnN0IFJFVFVSTl9VUkxfUkVHRVggPSBuZXcgUmVnRXhwKCdSRVRVUk5fVVJMJyk7XG5cbi8qKlxuICogQHBhcmFtIHshLi4vLi4vLi4vc3JjL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBhbXBkb2NcbiAqIEBwYXJhbSB7c3RyaW5nfCFQcm9taXNlPHN0cmluZz59IHVybE9yUHJvbWlzZVxuICogQHJldHVybiB7IVdlYkxvZ2luRGlhbG9nfCFWaWV3ZXJMb2dpbkRpYWxvZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUxvZ2luRGlhbG9nKGFtcGRvYywgdXJsT3JQcm9taXNlKSB7XG4gIGNvbnN0IHZpZXdlciA9IFNlcnZpY2VzLnZpZXdlckZvckRvYyhhbXBkb2MpO1xuICBjb25zdCBvdmVycmlkZURpYWxvZyA9IHBhcnNlSW50KHZpZXdlci5nZXRQYXJhbSgnZGlhbG9nJyksIDEwKTtcbiAgaWYgKG92ZXJyaWRlRGlhbG9nKSB7XG4gICAgcmV0dXJuIG5ldyBWaWV3ZXJMb2dpbkRpYWxvZyh2aWV3ZXIsIHVybE9yUHJvbWlzZSk7XG4gIH1cbiAgcmV0dXJuIG5ldyBXZWJMb2dpbkRpYWxvZyhhbXBkb2Mud2luLCB2aWV3ZXIsIHVybE9yUHJvbWlzZSk7XG59XG5cblxuLyoqXG4gKiBPcGVucyB0aGUgbG9naW4gZGlhbG9nIGZvciB0aGUgc3BlY2lmaWVkIFVSTC4gSWYgdGhlIGxvZ2luIGRpYWxvZyBzdWNjZWVkcyxcbiAqIHRoZSByZXR1cm5lZCBwcm9taXNlZCBpcyByZXNvbHZlZCB3aXRoIHRoZSBkaWFsb2cncyByZXNwb25zZS4gT3RoZXJ3aXNlLCB0aGVcbiAqIHJldHVybmVkIHByb21pc2UgaXMgcmVqZWN0ZWQuXG4gKiBAcGFyYW0geyEuLi8uLi8uLi9zcmMvc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGFtcGRvY1xuICogQHBhcmFtIHtzdHJpbmd8IVByb21pc2U8c3RyaW5nPn0gdXJsT3JQcm9taXNlXG4gKiBAcmV0dXJuIHshUHJvbWlzZTxzdHJpbmc+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gb3BlbkxvZ2luRGlhbG9nKGFtcGRvYywgdXJsT3JQcm9taXNlKSB7XG4gIHJldHVybiBjcmVhdGVMb2dpbkRpYWxvZyhhbXBkb2MsIHVybE9yUHJvbWlzZSkub3BlbigpO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIGZpbmFsIGxvZ2luIFVSTCB3aXRoIGFsbCB0aGUgcGVyZm9ybWVkIHJlcGxhY2VtZW50cy5cbiAqIEBwYXJhbSB7IS4uLy4uLy4uL3NyYy9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gYW1wZG9jXG4gKiBAcGFyYW0ge3N0cmluZ3whUHJvbWlzZTxzdHJpbmc+fSB1cmxPclByb21pc2VcbiAqIEByZXR1cm4geyFQcm9taXNlPHN0cmluZz59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMb2dpblVybChhbXBkb2MsIHVybE9yUHJvbWlzZSkge1xuICByZXR1cm4gY3JlYXRlTG9naW5EaWFsb2coYW1wZG9jLCB1cmxPclByb21pc2UpLmdldExvZ2luVXJsKCk7XG59XG5cblxuLyoqXG4gKiBUaGUgaW1wbGVtZW50YXRpb24gb2YgdGhlIExvZ2luIERpYWxvZyBkZWxlZ2F0ZWQgdmlhIFZpZXdlci5cbiAqL1xuY2xhc3MgVmlld2VyTG9naW5EaWFsb2cge1xuICAvKipcbiAgICogQHBhcmFtIHshLi4vLi4vLi4vc3JjL3NlcnZpY2Uvdmlld2VyLWltcGwuVmlld2VyfSB2aWV3ZXJcbiAgICogQHBhcmFtIHtzdHJpbmd8IVByb21pc2U8c3RyaW5nPn0gdXJsT3JQcm9taXNlXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih2aWV3ZXIsIHVybE9yUHJvbWlzZSkge1xuICAgIC8qKiBAY29uc3QgeyEuLi8uLi8uLi9zcmMvc2VydmljZS92aWV3ZXItaW1wbC5WaWV3ZXJ9ICovXG4gICAgdGhpcy52aWV3ZXIgPSB2aWV3ZXI7XG5cbiAgICAvKiogQGNvbnN0IHtzdHJpbmd8IVByb21pc2U8c3RyaW5nPn0gKi9cbiAgICB0aGlzLnVybE9yUHJvbWlzZSA9IHVybE9yUHJvbWlzZTtcbiAgfVxuXG4gIC8qKlxuICAqIEByZXR1cm4geyFQcm9taXNlPHN0cmluZz59XG4gICovXG4gIGdldExvZ2luVXJsKCkge1xuICAgIGxldCB1cmxQcm9taXNlO1xuICAgIGlmICh0eXBlb2YgdGhpcy51cmxPclByb21pc2UgPT0gJ3N0cmluZycpIHtcbiAgICAgIHVybFByb21pc2UgPSBQcm9taXNlLnJlc29sdmUodGhpcy51cmxPclByb21pc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB1cmxQcm9taXNlID0gdGhpcy51cmxPclByb21pc2U7XG4gICAgfVxuICAgIHJldHVybiB1cmxQcm9taXNlLnRoZW4odXJsID0+IHtcbiAgICAgIHJldHVybiBidWlsZExvZ2luVXJsKHVybCwgJ1JFVFVSTl9VUkwnKTtcbiAgICB9KTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIE9wZW5zIHRoZSBkaWFsb2cuIFJldHVybnMgdGhlIHByb21pc2UgdGhhdCB3aWxsIHlpZWxkIHdpdGggdGhlIGRpYWxvZydzXG4gICAqIHJlc3VsdCBvciB3aWxsIGJlIHJlamVjdGVkIGlmIGRpYWxvZyBmYWlscy4gVGhlIGRpYWxvZydzIHJlc3VsdCBpc1xuICAgKiB0eXBpY2FsbHkgYSBoYXNoIHN0cmluZyBmcm9tIHRoZSByZXR1cm4gVVJMLlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTxzdHJpbmc+fVxuICAgKi9cbiAgb3BlbigpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRMb2dpblVybCgpLnRoZW4obG9naW5VcmwgPT4ge1xuICAgICAgZGV2KCkuZmluZShUQUcsICdPcGVuIHZpZXdlciBkaWFsb2c6ICcsIGxvZ2luVXJsKTtcbiAgICAgIHJldHVybiB0aGlzLnZpZXdlci5zZW5kTWVzc2FnZUF3YWl0UmVzcG9uc2UoJ29wZW5EaWFsb2cnLCBkaWN0KHtcbiAgICAgICAgJ3VybCc6IGxvZ2luVXJsLFxuICAgICAgfSkpO1xuICAgIH0pO1xuICB9XG5cbn1cblxuXG4vKipcbiAqIFdlYi1iYXNlZCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgTG9naW4gRGlhbG9nLlxuICogQHZpc2libGVGb3JUZXN0aW5nXG4gKi9cbmV4cG9ydCBjbGFzcyBXZWJMb2dpbkRpYWxvZyB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcGFyYW0geyEuLi8uLi8uLi9zcmMvc2VydmljZS92aWV3ZXItaW1wbC5WaWV3ZXJ9IHZpZXdlclxuICAgKiBAcGFyYW0ge3N0cmluZ3whUHJvbWlzZTxzdHJpbmc+fSB1cmxPclByb21pc2VcbiAgICovXG4gIGNvbnN0cnVjdG9yKHdpbiwgdmlld2VyLCB1cmxPclByb21pc2UpIHtcbiAgICAvKiogQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luID0gd2luO1xuXG4gICAgLyoqIEBjb25zdCB7IS4uLy4uLy4uL3NyYy9zZXJ2aWNlL3ZpZXdlci1pbXBsLlZpZXdlcn0gKi9cbiAgICB0aGlzLnZpZXdlciA9IHZpZXdlcjtcblxuICAgIC8qKiBAY29uc3Qge3N0cmluZ3whUHJvbWlzZTxzdHJpbmc+fSAqL1xuICAgIHRoaXMudXJsT3JQcm9taXNlID0gdXJsT3JQcm9taXNlO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/ZnVuY3Rpb24oP3N0cmluZyl9ICovXG4gICAgdGhpcy5yZXNvbHZlXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9mdW5jdGlvbigqKX0gKi9cbiAgICB0aGlzLnJlamVjdF8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/V2luZG93fSAqL1xuICAgIHRoaXMuZGlhbG9nXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9Qcm9taXNlfSAqL1xuICAgIHRoaXMuZGlhbG9nUmVhZHlQcm9taXNlXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9udW1iZXJ9ICovXG4gICAgdGhpcy5oZWFydGJlYXRJbnRlcnZhbF8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/VW5saXN0ZW5EZWZ9ICovXG4gICAgdGhpcy5tZXNzYWdlVW5saXN0ZW5fID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBPcGVucyB0aGUgZGlhbG9nLiBSZXR1cm5zIHRoZSBwcm9taXNlIHRoYXQgd2lsbCB5aWVsZCB3aXRoIHRoZSBkaWFsb2cnc1xuICAgKiByZXN1bHQgb3Igd2lsbCBiZSByZWplY3RlZCBpZiBkaWFsb2cgZmFpbHMuXG4gICAqIEByZXR1cm4geyFQcm9taXNlPHN0cmluZz59XG4gICAqL1xuICBvcGVuKCkge1xuICAgIHVzZXIoKS5hc3NlcnQoIXRoaXMucmVzb2x2ZV8sICdEaWFsb2cgYWxyZWFkeSBvcGVuZWQnKTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5yZXNvbHZlXyA9IHJlc29sdmU7XG4gICAgICB0aGlzLnJlamVjdF8gPSByZWplY3Q7XG4gICAgICAvLyBNdXN0IGFsd2F5cyBiZSBjYWxsZWQgc3luY2hyb25vdXNseS5cbiAgICAgIHRoaXMub3BlbkludGVybmFsXygpO1xuICAgIH0pLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgIHRoaXMuY2xlYW51cF8oKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSwgZXJyb3IgPT4ge1xuICAgICAgdGhpcy5jbGVhbnVwXygpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfSk7XG4gIH1cblxuICAvKiogQHByaXZhdGUgKi9cbiAgY2xlYW51cF8oKSB7XG4gICAgdGhpcy5yZXNvbHZlXyA9IG51bGw7XG4gICAgdGhpcy5yZWplY3RfID0gbnVsbDtcblxuICAgIGlmICh0aGlzLmRpYWxvZ18pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMuZGlhbG9nXy5jbG9zZSgpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBJZ25vcmUuXG4gICAgICB9XG4gICAgICB0aGlzLmRpYWxvZ18gPSBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmhlYXJ0YmVhdEludGVydmFsXykge1xuICAgICAgdGhpcy53aW4uY2xlYXJJbnRlcnZhbCh0aGlzLmhlYXJ0YmVhdEludGVydmFsXyk7XG4gICAgICB0aGlzLmhlYXJ0YmVhdEludGVydmFsXyA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubWVzc2FnZVVubGlzdGVuXykge1xuICAgICAgdGhpcy5tZXNzYWdlVW5saXN0ZW5fKCk7XG4gICAgICB0aGlzLm1lc3NhZ2VVbmxpc3Rlbl8gPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAqIEByZXR1cm4geyFQcm9taXNlPHN0cmluZz59XG4gICovXG4gIGdldExvZ2luVXJsKCkge1xuICAgIGxldCB1cmxQcm9taXNlO1xuICAgIGlmICh0eXBlb2YgdGhpcy51cmxPclByb21pc2UgPT0gJ3N0cmluZycpIHtcbiAgICAgIHVybFByb21pc2UgPSBQcm9taXNlLnJlc29sdmUodGhpcy51cmxPclByb21pc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB1cmxQcm9taXNlID0gdGhpcy51cmxPclByb21pc2U7XG4gICAgfVxuICAgIHJldHVybiB1cmxQcm9taXNlLnRoZW4odXJsID0+IHtcbiAgICAgIHJldHVybiBidWlsZExvZ2luVXJsKHVybCwgdGhpcy5nZXRSZXR1cm5VcmxfKCkpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBwcml2YXRlICovXG4gIG9wZW5JbnRlcm5hbF8oKSB7XG4gICAgY29uc3Qge3NjcmVlbn0gPSB0aGlzLndpbjtcbiAgICBjb25zdCB3ID0gTWF0aC5mbG9vcihNYXRoLm1pbig3MDAsIHNjcmVlbi53aWR0aCAqIDAuOSkpO1xuICAgIGNvbnN0IGggPSBNYXRoLmZsb29yKE1hdGgubWluKDQ1MCwgc2NyZWVuLmhlaWdodCAqIDAuOSkpO1xuICAgIGNvbnN0IHggPSBNYXRoLmZsb29yKChzY3JlZW4ud2lkdGggLSB3KSAvIDIpO1xuICAgIGNvbnN0IHkgPSBNYXRoLmZsb29yKChzY3JlZW4uaGVpZ2h0IC0gaCkgLyAyKTtcbiAgICBjb25zdCBzaXppbmcgPSBgaGVpZ2h0PSR7aH0sd2lkdGg9JHt3fSxsZWZ0PSR7eH0sdG9wPSR7eX1gO1xuICAgIGNvbnN0IG9wdGlvbnMgPSBgJHtzaXppbmd9LHJlc2l6YWJsZT15ZXMsc2Nyb2xsYmFycz15ZXNgO1xuICAgIGNvbnN0IHJldHVyblVybCA9IHRoaXMuZ2V0UmV0dXJuVXJsXygpO1xuXG4gICAgdGhpcy5kaWFsb2dSZWFkeVByb21pc2VfID0gbnVsbDtcbiAgICBpZiAodHlwZW9mIHRoaXMudXJsT3JQcm9taXNlID09ICdzdHJpbmcnKSB7XG4gICAgICBjb25zdCBsb2dpblVybCA9IGJ1aWxkTG9naW5VcmwodGhpcy51cmxPclByb21pc2UsIHJldHVyblVybCk7XG4gICAgICBkZXYoKS5maW5lKFRBRywgJ09wZW4gZGlhbG9nOiAnLCBsb2dpblVybCwgcmV0dXJuVXJsLCB3LCBoLCB4LCB5KTtcbiAgICAgIHRoaXMuZGlhbG9nXyA9IG9wZW5XaW5kb3dEaWFsb2codGhpcy53aW4sIGxvZ2luVXJsLCAnX2JsYW5rJywgb3B0aW9ucyk7XG4gICAgICBpZiAodGhpcy5kaWFsb2dfKSB7XG4gICAgICAgIHRoaXMuZGlhbG9nUmVhZHlQcm9taXNlXyA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBkZXYoKS5maW5lKFRBRywgJ09wZW4gZGlhbG9nOiAnLCAnYWJvdXQ6YmxhbmsnLCByZXR1cm5VcmwsIHcsIGgsIHgsIHkpO1xuICAgICAgdGhpcy5kaWFsb2dfID0gb3BlbldpbmRvd0RpYWxvZyh0aGlzLndpbiwgJycsICdfYmxhbmsnLCBvcHRpb25zKTtcbiAgICAgIGlmICh0aGlzLmRpYWxvZ18pIHtcbiAgICAgICAgdGhpcy5kaWFsb2dSZWFkeVByb21pc2VfID0gdGhpcy51cmxPclByb21pc2UudGhlbih1cmwgPT4ge1xuICAgICAgICAgIGNvbnN0IGxvZ2luVXJsID0gYnVpbGRMb2dpblVybCh1cmwsIHJldHVyblVybCk7XG4gICAgICAgICAgZGV2KCkuZmluZShUQUcsICdTZXQgZGlhbG9nIHVybDogJywgbG9naW5VcmwpO1xuICAgICAgICAgIHRoaXMuZGlhbG9nXy5sb2NhdGlvbi5yZXBsYWNlKGxvZ2luVXJsKTtcbiAgICAgICAgfSwgZXJyb3IgPT4ge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignZmFpbGVkIHRvIHJlc29sdmUgdXJsOiAnICsgZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5kaWFsb2dSZWFkeVByb21pc2VfKSB7XG4gICAgICB0aGlzLmRpYWxvZ1JlYWR5UHJvbWlzZV8udGhlbigoKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0dXBEaWFsb2dfKHJldHVyblVybCk7XG4gICAgICB9LCBlcnJvciA9PiB7XG4gICAgICAgIHRoaXMubG9naW5Eb25lXygvKiByZXN1bHQgKi8gbnVsbCwgZXJyb3IpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubG9naW5Eb25lXygvKiByZXN1bHQgKi8gbnVsbCwgbmV3IEVycm9yKCdmYWlsZWQgdG8gb3BlbiBkaWFsb2cnKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZXR1cm5VcmxcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHNldHVwRGlhbG9nXyhyZXR1cm5VcmwpIHtcbiAgICBjb25zdCByZXR1cm5PcmlnaW4gPSBwYXJzZVVybERlcHJlY2F0ZWQocmV0dXJuVXJsKS5vcmlnaW47XG5cbiAgICB0aGlzLmhlYXJ0YmVhdEludGVydmFsXyA9IHRoaXMud2luLnNldEludGVydmFsKCgpID0+IHtcbiAgICAgIGlmICh0aGlzLmRpYWxvZ18uY2xvc2VkKSB7XG4gICAgICAgIHRoaXMud2luLmNsZWFySW50ZXJ2YWwodGhpcy5oZWFydGJlYXRJbnRlcnZhbF8pO1xuICAgICAgICB0aGlzLmhlYXJ0YmVhdEludGVydmFsXyA9IG51bGw7XG4gICAgICAgIC8vIEdpdmUgYSBjaGFuY2UgZm9yIHRoZSByZXN1bHQgdG8gYXJyaXZlLCBidXQgb3RoZXJ3aXNlIGNvbnNpZGVyIHRoZVxuICAgICAgICAvLyByZXNwb25jZSB0byBiZSBlbXB0eS5cbiAgICAgICAgdGhpcy53aW4uc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5sb2dpbkRvbmVfKCcnKTtcbiAgICAgICAgfSwgMzAwMCk7XG4gICAgICB9XG4gICAgfSwgNTAwKTtcblxuICAgIHRoaXMubWVzc2FnZVVubGlzdGVuXyA9IGxpc3Rlbih0aGlzLndpbiwgJ21lc3NhZ2UnLCBlID0+IHtcbiAgICAgIGRldigpLmZpbmUoVEFHLCAnTUVTU0FHRTonLCBlKTtcbiAgICAgIGlmIChlLm9yaWdpbiAhPSByZXR1cm5PcmlnaW4pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKCFnZXREYXRhKGUpIHx8IGdldERhdGEoZSlbJ3NlbnRpbmVsJ10gIT0gJ2FtcCcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZGV2KCkuZmluZShUQUcsICdSZWNlaXZlZCBtZXNzYWdlIGZyb20gZGlhbG9nOiAnLCBnZXREYXRhKGUpKTtcbiAgICAgIGlmIChnZXREYXRhKGUpWyd0eXBlJ10gPT0gJ3Jlc3VsdCcpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlhbG9nXykge1xuICAgICAgICAgIHRoaXMuZGlhbG9nXy4vKk9LKi9wb3N0TWVzc2FnZShkaWN0KHtcbiAgICAgICAgICAgICdzZW50aW5lbCc6ICdhbXAnLFxuICAgICAgICAgICAgJ3R5cGUnOiAncmVzdWx0LWFjaycsXG4gICAgICAgICAgfSksIHJldHVybk9yaWdpbik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sb2dpbkRvbmVfKGdldERhdGEoZSlbJ3Jlc3VsdCddKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0gez9zdHJpbmd9IHJlc3VsdFxuICAgKiBAcGFyYW0geyo9fSBvcHRfZXJyb3JcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGxvZ2luRG9uZV8ocmVzdWx0LCBvcHRfZXJyb3IpIHtcbiAgICBpZiAoIXRoaXMucmVzb2x2ZV8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZGV2KCkuZmluZShUQUcsICdMb2dpbiBkb25lOiAnLCByZXN1bHQsIG9wdF9lcnJvcik7XG4gICAgaWYgKG9wdF9lcnJvcikge1xuICAgICAgdGhpcy5yZWplY3RfKG9wdF9lcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVzb2x2ZV8ocmVzdWx0KTtcbiAgICB9XG4gICAgdGhpcy5jbGVhbnVwXygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldFJldHVyblVybF8oKSB7XG4gICAgY29uc3QgY3VycmVudFVybCA9IHRoaXMudmlld2VyLmdldFJlc29sdmVkVmlld2VyVXJsKCk7XG4gICAgbGV0IHJldHVyblVybDtcbiAgICBpZiAoZ2V0TW9kZSgpLmxvY2FsRGV2KSB7XG4gICAgICBjb25zdCBsb2MgPSB0aGlzLndpbi5sb2NhdGlvbjtcbiAgICAgIHJldHVyblVybCA9IGxvYy5wcm90b2NvbCArICcvLycgKyBsb2MuaG9zdCArXG4gICAgICAgICAgJy9leHRlbnNpb25zL2FtcC1hY2Nlc3MvMC4xL2FtcC1sb2dpbi1kb25lLmh0bWwnO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm5VcmwgPSBgJHt1cmxzLmNkbn0vdjAvYW1wLWxvZ2luLWRvbmUtMC4xLmh0bWxgO1xuICAgIH1cbiAgICByZXR1cm4gcmV0dXJuVXJsICsgJz91cmw9JyArIGVuY29kZVVSSUNvbXBvbmVudChjdXJyZW50VXJsKTtcbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHBhcmFtIHtzdHJpbmd9IHJldHVyblVybFxuICogQHJldHVybiB7c3RyaW5nfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gYnVpbGRMb2dpblVybCh1cmwsIHJldHVyblVybCkge1xuICAvLyBSRVRVUk5fVVJMIGhhcyB0byBhcnJpdmUgaGVyZSB1bnJlcGxhY2VkIGJ5IFVybFJlcGxhY2VtZW50cyBmb3IgdHdvXG4gIC8vIHJlYXNvbnM6ICgxKSBzeW5jIHJlcGxhY2VtZW50IGFuZCAoMikgaWYgd2UgbmVlZCB0byBwcm9wYWdhdGUgdGhpc1xuICAvLyByZXBsYWNlbWVudCB0byB0aGUgdmlld2VyLlxuICBpZiAoUkVUVVJOX1VSTF9SRUdFWC50ZXN0KHVybCkpIHtcbiAgICByZXR1cm4gdXJsLnJlcGxhY2UoUkVUVVJOX1VSTF9SRUdFWCwgZW5jb2RlVVJJQ29tcG9uZW50KHJldHVyblVybCkpO1xuICB9XG4gIHJldHVybiB1cmwgK1xuICAgICAgKHVybC5pbmRleE9mKCc/JykgPT0gLTEgPyAnPycgOiAnJicpICtcbiAgICAgICdyZXR1cm49JyArIGVuY29kZVVSSUNvbXBvbmVudChyZXR1cm5VcmwpO1xufVxuIiwiLyohXG5cbkNvcHlyaWdodCAoQykgMjAxNC0yMDE2IGJ5IEFuZHJlYSBHaWFtbWFyY2hpIC0gQFdlYlJlZmxlY3Rpb25cblxuUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxub2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xudG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG5mdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXG5UaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbklNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG5BVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG5MSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuVEhFIFNPRlRXQVJFLlxuXG4qL1xuLy8gZ2xvYmFsIHdpbmRvdyBPYmplY3Rcbi8vIG9wdGlvbmFsIHBvbHlmaWxsIGluZm9cbi8vICAgICdhdXRvJyB1c2VkIGJ5IGRlZmF1bHQsIGV2ZXJ5dGhpbmcgaXMgZmVhdHVyZSBkZXRlY3RlZFxuLy8gICAgJ2ZvcmNlJyB1c2UgdGhlIHBvbHlmaWxsIGV2ZW4gaWYgbm90IGZ1bGx5IG5lZWRlZFxuZnVuY3Rpb24gaW5zdGFsbEN1c3RvbUVsZW1lbnRzKHdpbmRvdywgcG9seWZpbGwpIHsndXNlIHN0cmljdCc7XG5cbiAgLy8gRE8gTk9UIFVTRSBUSElTIEZJTEUgRElSRUNUTFksIElUIFdPTidUIFdPUktcbiAgLy8gVEhJUyBJUyBBIFBST0pFQ1QgQkFTRUQgT04gQSBCVUlMRCBTWVNURU1cbiAgLy8gVEhJUyBGSUxFIElTIEpVU1QgV1JBUFBFRCBVUCBSRVNVTFRJTkcgSU5cbiAgLy8gYnVpbGQvZG9jdW1lbnQtcmVnaXN0ZXItZWxlbWVudC5ub2RlLmpzXG5cbiAgdmFyXG4gICAgZG9jdW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQsXG4gICAgT2JqZWN0ID0gd2luZG93Lk9iamVjdFxuICA7XG5cbiAgdmFyIGh0bWxDbGFzcyA9IChmdW5jdGlvbiAoaW5mbykge1xuICAgIC8vIChDKSBBbmRyZWEgR2lhbW1hcmNoaSAtIEBXZWJSZWZsZWN0aW9uIC0gTUlUIFN0eWxlXG4gICAgdmFyXG4gICAgICBjYXRjaENsYXNzID0gL15bQS1aXStbYS16XS8sXG4gICAgICBmaWx0ZXJCeSA9IGZ1bmN0aW9uIChyZSkge1xuICAgICAgICB2YXIgYXJyID0gW10sIHRhZztcbiAgICAgICAgZm9yICh0YWcgaW4gcmVnaXN0ZXIpIHtcbiAgICAgICAgICBpZiAocmUudGVzdCh0YWcpKSBhcnIucHVzaCh0YWcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnI7XG4gICAgICB9LFxuICAgICAgYWRkID0gZnVuY3Rpb24gKENsYXNzLCB0YWcpIHtcbiAgICAgICAgdGFnID0gdGFnLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGlmICghKHRhZyBpbiByZWdpc3RlcikpIHtcbiAgICAgICAgICByZWdpc3RlcltDbGFzc10gPSAocmVnaXN0ZXJbQ2xhc3NdIHx8IFtdKS5jb25jYXQodGFnKTtcbiAgICAgICAgICByZWdpc3Rlclt0YWddID0gKHJlZ2lzdGVyW3RhZy50b1VwcGVyQ2FzZSgpXSA9IENsYXNzKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHJlZ2lzdGVyID0gKE9iamVjdC5jcmVhdGUgfHwgT2JqZWN0KShudWxsKSxcbiAgICAgIGh0bWxDbGFzcyA9IHt9LFxuICAgICAgaSwgc2VjdGlvbiwgdGFncywgQ2xhc3NcbiAgICA7XG4gICAgZm9yIChzZWN0aW9uIGluIGluZm8pIHtcbiAgICAgIGZvciAoQ2xhc3MgaW4gaW5mb1tzZWN0aW9uXSkge1xuICAgICAgICB0YWdzID0gaW5mb1tzZWN0aW9uXVtDbGFzc107XG4gICAgICAgIHJlZ2lzdGVyW0NsYXNzXSA9IHRhZ3M7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCB0YWdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgcmVnaXN0ZXJbdGFnc1tpXS50b0xvd2VyQ2FzZSgpXSA9XG4gICAgICAgICAgcmVnaXN0ZXJbdGFnc1tpXS50b1VwcGVyQ2FzZSgpXSA9IENsYXNzO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGh0bWxDbGFzcy5nZXQgPSBmdW5jdGlvbiBnZXQodGFnT3JDbGFzcykge1xuICAgICAgcmV0dXJuIHR5cGVvZiB0YWdPckNsYXNzID09PSAnc3RyaW5nJyA/XG4gICAgICAgIChyZWdpc3Rlclt0YWdPckNsYXNzXSB8fCAoY2F0Y2hDbGFzcy50ZXN0KHRhZ09yQ2xhc3MpID8gW10gOiAnJykpIDpcbiAgICAgICAgZmlsdGVyQnkodGFnT3JDbGFzcyk7XG4gICAgfTtcbiAgICBodG1sQ2xhc3Muc2V0ID0gZnVuY3Rpb24gc2V0KHRhZywgQ2xhc3MpIHtcbiAgICAgIHJldHVybiAoY2F0Y2hDbGFzcy50ZXN0KHRhZykgP1xuICAgICAgICBhZGQodGFnLCBDbGFzcykgOlxuICAgICAgICBhZGQoQ2xhc3MsIHRhZylcbiAgICAgICksIGh0bWxDbGFzcztcbiAgICB9O1xuICAgIHJldHVybiBodG1sQ2xhc3M7XG4gIH0oe1xuICAgIFwiY29sbGVjdGlvbnNcIjoge1xuICAgICAgXCJIVE1MQWxsQ29sbGVjdGlvblwiOiBbXG4gICAgICAgIFwiYWxsXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxDb2xsZWN0aW9uXCI6IFtcbiAgICAgICAgXCJmb3Jtc1wiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRm9ybUNvbnRyb2xzQ29sbGVjdGlvblwiOiBbXG4gICAgICAgIFwiZWxlbWVudHNcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTE9wdGlvbnNDb2xsZWN0aW9uXCI6IFtcbiAgICAgICAgXCJvcHRpb25zXCJcbiAgICAgIF1cbiAgICB9LFxuICAgIFwiZWxlbWVudHNcIjoge1xuICAgICAgXCJFbGVtZW50XCI6IFtcbiAgICAgICAgXCJlbGVtZW50XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxBbmNob3JFbGVtZW50XCI6IFtcbiAgICAgICAgXCJhXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxBcHBsZXRFbGVtZW50XCI6IFtcbiAgICAgICAgXCJhcHBsZXRcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEFyZWFFbGVtZW50XCI6IFtcbiAgICAgICAgXCJhcmVhXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxBdHRhY2htZW50RWxlbWVudFwiOiBbXG4gICAgICAgIFwiYXR0YWNobWVudFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MQXVkaW9FbGVtZW50XCI6IFtcbiAgICAgICAgXCJhdWRpb1wiXG4gICAgICBdLFxuICAgICAgXCJIVE1MQlJFbGVtZW50XCI6IFtcbiAgICAgICAgXCJiclwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MQmFzZUVsZW1lbnRcIjogW1xuICAgICAgICBcImJhc2VcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEJvZHlFbGVtZW50XCI6IFtcbiAgICAgICAgXCJib2R5XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxCdXR0b25FbGVtZW50XCI6IFtcbiAgICAgICAgXCJidXR0b25cIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTENhbnZhc0VsZW1lbnRcIjogW1xuICAgICAgICBcImNhbnZhc1wiXG4gICAgICBdLFxuICAgICAgXCJIVE1MQ29udGVudEVsZW1lbnRcIjogW1xuICAgICAgICBcImNvbnRlbnRcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTERMaXN0RWxlbWVudFwiOiBbXG4gICAgICAgIFwiZGxcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTERhdGFFbGVtZW50XCI6IFtcbiAgICAgICAgXCJkYXRhXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxEYXRhTGlzdEVsZW1lbnRcIjogW1xuICAgICAgICBcImRhdGFsaXN0XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxEZXRhaWxzRWxlbWVudFwiOiBbXG4gICAgICAgIFwiZGV0YWlsc1wiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRGlhbG9nRWxlbWVudFwiOiBbXG4gICAgICAgIFwiZGlhbG9nXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxEaXJlY3RvcnlFbGVtZW50XCI6IFtcbiAgICAgICAgXCJkaXJcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTERpdkVsZW1lbnRcIjogW1xuICAgICAgICBcImRpdlwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRG9jdW1lbnRcIjogW1xuICAgICAgICBcImRvY3VtZW50XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxFbGVtZW50XCI6IFtcbiAgICAgICAgXCJlbGVtZW50XCIsXG4gICAgICAgIFwiYWJiclwiLFxuICAgICAgICBcImFkZHJlc3NcIixcbiAgICAgICAgXCJhcnRpY2xlXCIsXG4gICAgICAgIFwiYXNpZGVcIixcbiAgICAgICAgXCJiXCIsXG4gICAgICAgIFwiYmRpXCIsXG4gICAgICAgIFwiYmRvXCIsXG4gICAgICAgIFwiY2l0ZVwiLFxuICAgICAgICBcImNvZGVcIixcbiAgICAgICAgXCJjb21tYW5kXCIsXG4gICAgICAgIFwiZGRcIixcbiAgICAgICAgXCJkZm5cIixcbiAgICAgICAgXCJkdFwiLFxuICAgICAgICBcImVtXCIsXG4gICAgICAgIFwiZmlnY2FwdGlvblwiLFxuICAgICAgICBcImZpZ3VyZVwiLFxuICAgICAgICBcImZvb3RlclwiLFxuICAgICAgICBcImhlYWRlclwiLFxuICAgICAgICBcImlcIixcbiAgICAgICAgXCJrYmRcIixcbiAgICAgICAgXCJtYXJrXCIsXG4gICAgICAgIFwibmF2XCIsXG4gICAgICAgIFwibm9zY3JpcHRcIixcbiAgICAgICAgXCJycFwiLFxuICAgICAgICBcInJ0XCIsXG4gICAgICAgIFwicnVieVwiLFxuICAgICAgICBcInNcIixcbiAgICAgICAgXCJzYW1wXCIsXG4gICAgICAgIFwic2VjdGlvblwiLFxuICAgICAgICBcInNtYWxsXCIsXG4gICAgICAgIFwic3Ryb25nXCIsXG4gICAgICAgIFwic3ViXCIsXG4gICAgICAgIFwic3VtbWFyeVwiLFxuICAgICAgICBcInN1cFwiLFxuICAgICAgICBcInVcIixcbiAgICAgICAgXCJ2YXJcIixcbiAgICAgICAgXCJ3YnJcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEVtYmVkRWxlbWVudFwiOiBbXG4gICAgICAgIFwiZW1iZWRcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEZpZWxkU2V0RWxlbWVudFwiOiBbXG4gICAgICAgIFwiZmllbGRzZXRcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEZvbnRFbGVtZW50XCI6IFtcbiAgICAgICAgXCJmb250XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxGb3JtRWxlbWVudFwiOiBbXG4gICAgICAgIFwiZm9ybVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRnJhbWVFbGVtZW50XCI6IFtcbiAgICAgICAgXCJmcmFtZVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRnJhbWVTZXRFbGVtZW50XCI6IFtcbiAgICAgICAgXCJmcmFtZXNldFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MSFJFbGVtZW50XCI6IFtcbiAgICAgICAgXCJoclwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MSGVhZEVsZW1lbnRcIjogW1xuICAgICAgICBcImhlYWRcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEhlYWRpbmdFbGVtZW50XCI6IFtcbiAgICAgICAgXCJoMVwiLFxuICAgICAgICBcImgyXCIsXG4gICAgICAgIFwiaDNcIixcbiAgICAgICAgXCJoNFwiLFxuICAgICAgICBcImg1XCIsXG4gICAgICAgIFwiaDZcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEh0bWxFbGVtZW50XCI6IFtcbiAgICAgICAgXCJodG1sXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxJRnJhbWVFbGVtZW50XCI6IFtcbiAgICAgICAgXCJpZnJhbWVcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEltYWdlRWxlbWVudFwiOiBbXG4gICAgICAgIFwiaW1nXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxJbnB1dEVsZW1lbnRcIjogW1xuICAgICAgICBcImlucHV0XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxLZXlnZW5FbGVtZW50XCI6IFtcbiAgICAgICAgXCJrZXlnZW5cIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTExJRWxlbWVudFwiOiBbXG4gICAgICAgIFwibGlcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTExhYmVsRWxlbWVudFwiOiBbXG4gICAgICAgIFwibGFiZWxcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTExlZ2VuZEVsZW1lbnRcIjogW1xuICAgICAgICBcImxlZ2VuZFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MTGlua0VsZW1lbnRcIjogW1xuICAgICAgICBcImxpbmtcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTE1hcEVsZW1lbnRcIjogW1xuICAgICAgICBcIm1hcFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MTWFycXVlZUVsZW1lbnRcIjogW1xuICAgICAgICBcIm1hcnF1ZWVcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTE1lZGlhRWxlbWVudFwiOiBbXG4gICAgICAgIFwibWVkaWFcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTE1lbnVFbGVtZW50XCI6IFtcbiAgICAgICAgXCJtZW51XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxNZW51SXRlbUVsZW1lbnRcIjogW1xuICAgICAgICBcIm1lbnVpdGVtXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxNZXRhRWxlbWVudFwiOiBbXG4gICAgICAgIFwibWV0YVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MTWV0ZXJFbGVtZW50XCI6IFtcbiAgICAgICAgXCJtZXRlclwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MTW9kRWxlbWVudFwiOiBbXG4gICAgICAgIFwiZGVsXCIsXG4gICAgICAgIFwiaW5zXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxPTGlzdEVsZW1lbnRcIjogW1xuICAgICAgICBcIm9sXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxPYmplY3RFbGVtZW50XCI6IFtcbiAgICAgICAgXCJvYmplY3RcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTE9wdEdyb3VwRWxlbWVudFwiOiBbXG4gICAgICAgIFwib3B0Z3JvdXBcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTE9wdGlvbkVsZW1lbnRcIjogW1xuICAgICAgICBcIm9wdGlvblwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MT3V0cHV0RWxlbWVudFwiOiBbXG4gICAgICAgIFwib3V0cHV0XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxQYXJhZ3JhcGhFbGVtZW50XCI6IFtcbiAgICAgICAgXCJwXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxQYXJhbUVsZW1lbnRcIjogW1xuICAgICAgICBcInBhcmFtXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxQaWN0dXJlRWxlbWVudFwiOiBbXG4gICAgICAgIFwicGljdHVyZVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MUHJlRWxlbWVudFwiOiBbXG4gICAgICAgIFwicHJlXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxQcm9ncmVzc0VsZW1lbnRcIjogW1xuICAgICAgICBcInByb2dyZXNzXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxRdW90ZUVsZW1lbnRcIjogW1xuICAgICAgICBcImJsb2NrcXVvdGVcIixcbiAgICAgICAgXCJxXCIsXG4gICAgICAgIFwicXVvdGVcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTFNjcmlwdEVsZW1lbnRcIjogW1xuICAgICAgICBcInNjcmlwdFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MU2VsZWN0RWxlbWVudFwiOiBbXG4gICAgICAgIFwic2VsZWN0XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxTaGFkb3dFbGVtZW50XCI6IFtcbiAgICAgICAgXCJzaGFkb3dcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTFNsb3RFbGVtZW50XCI6IFtcbiAgICAgICAgXCJzbG90XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxTb3VyY2VFbGVtZW50XCI6IFtcbiAgICAgICAgXCJzb3VyY2VcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTFNwYW5FbGVtZW50XCI6IFtcbiAgICAgICAgXCJzcGFuXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxTdHlsZUVsZW1lbnRcIjogW1xuICAgICAgICBcInN0eWxlXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUYWJsZUNhcHRpb25FbGVtZW50XCI6IFtcbiAgICAgICAgXCJjYXB0aW9uXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUYWJsZUNlbGxFbGVtZW50XCI6IFtcbiAgICAgICAgXCJ0ZFwiLFxuICAgICAgICBcInRoXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUYWJsZUNvbEVsZW1lbnRcIjogW1xuICAgICAgICBcImNvbFwiLFxuICAgICAgICBcImNvbGdyb3VwXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUYWJsZUVsZW1lbnRcIjogW1xuICAgICAgICBcInRhYmxlXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUYWJsZVJvd0VsZW1lbnRcIjogW1xuICAgICAgICBcInRyXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50XCI6IFtcbiAgICAgICAgXCJ0aGVhZFwiLFxuICAgICAgICBcInRib2R5XCIsXG4gICAgICAgIFwidGZvb3RcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTFRlbXBsYXRlRWxlbWVudFwiOiBbXG4gICAgICAgIFwidGVtcGxhdGVcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTFRleHRBcmVhRWxlbWVudFwiOiBbXG4gICAgICAgIFwidGV4dGFyZWFcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTFRpbWVFbGVtZW50XCI6IFtcbiAgICAgICAgXCJ0aW1lXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUaXRsZUVsZW1lbnRcIjogW1xuICAgICAgICBcInRpdGxlXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUcmFja0VsZW1lbnRcIjogW1xuICAgICAgICBcInRyYWNrXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxVTGlzdEVsZW1lbnRcIjogW1xuICAgICAgICBcInVsXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxVbmtub3duRWxlbWVudFwiOiBbXG4gICAgICAgIFwidW5rbm93blwiLFxuICAgICAgICBcInZoZ3JvdXB2XCIsXG4gICAgICAgIFwidmtleWdlblwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVmlkZW9FbGVtZW50XCI6IFtcbiAgICAgICAgXCJ2aWRlb1wiXG4gICAgICBdXG4gICAgfSxcbiAgICBcIm5vZGVzXCI6IHtcbiAgICAgIFwiQXR0clwiOiBbXG4gICAgICAgIFwibm9kZVwiXG4gICAgICBdLFxuICAgICAgXCJBdWRpb1wiOiBbXG4gICAgICAgIFwiYXVkaW9cIlxuICAgICAgXSxcbiAgICAgIFwiQ0RBVEFTZWN0aW9uXCI6IFtcbiAgICAgICAgXCJub2RlXCJcbiAgICAgIF0sXG4gICAgICBcIkNoYXJhY3RlckRhdGFcIjogW1xuICAgICAgICBcIm5vZGVcIlxuICAgICAgXSxcbiAgICAgIFwiQ29tbWVudFwiOiBbXG4gICAgICAgIFwiI2NvbW1lbnRcIlxuICAgICAgXSxcbiAgICAgIFwiRG9jdW1lbnRcIjogW1xuICAgICAgICBcIiNkb2N1bWVudFwiXG4gICAgICBdLFxuICAgICAgXCJEb2N1bWVudEZyYWdtZW50XCI6IFtcbiAgICAgICAgXCIjZG9jdW1lbnQtZnJhZ21lbnRcIlxuICAgICAgXSxcbiAgICAgIFwiRG9jdW1lbnRUeXBlXCI6IFtcbiAgICAgICAgXCJub2RlXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxEb2N1bWVudFwiOiBbXG4gICAgICAgIFwiI2RvY3VtZW50XCJcbiAgICAgIF0sXG4gICAgICBcIkltYWdlXCI6IFtcbiAgICAgICAgXCJpbWdcIlxuICAgICAgXSxcbiAgICAgIFwiT3B0aW9uXCI6IFtcbiAgICAgICAgXCJvcHRpb25cIlxuICAgICAgXSxcbiAgICAgIFwiUHJvY2Vzc2luZ0luc3RydWN0aW9uXCI6IFtcbiAgICAgICAgXCJub2RlXCJcbiAgICAgIF0sXG4gICAgICBcIlNoYWRvd1Jvb3RcIjogW1xuICAgICAgICBcIiNzaGFkb3ctcm9vdFwiXG4gICAgICBdLFxuICAgICAgXCJUZXh0XCI6IFtcbiAgICAgICAgXCIjdGV4dFwiXG4gICAgICBdLFxuICAgICAgXCJYTUxEb2N1bWVudFwiOiBbXG4gICAgICAgIFwieG1sXCJcbiAgICAgIF1cbiAgICB9XG4gIH0pKTtcbiAgXG4gIFxuICAgIFxuICAvLyBwYXNzZWQgYXQgcnVudGltZSwgY29uZmlndXJhYmxlXG4gIC8vIHZpYSBub2RlanMgbW9kdWxlXG4gIGlmICghcG9seWZpbGwpIHBvbHlmaWxsID0gJ2F1dG8nO1xuICBcbiAgdmFyXG4gICAgLy8gVjAgcG9seWZpbGwgZW50cnlcbiAgICBSRUdJU1RFUl9FTEVNRU5UID0gJ3JlZ2lzdGVyRWxlbWVudCcsXG4gIFxuICAgIC8vIElFIDwgMTEgb25seSArIG9sZCBXZWJLaXQgZm9yIGF0dHJpYnV0ZXMgKyBmZWF0dXJlIGRldGVjdGlvblxuICAgIEVYUEFORE9fVUlEID0gJ19fJyArIFJFR0lTVEVSX0VMRU1FTlQgKyAod2luZG93Lk1hdGgucmFuZG9tKCkgKiAxMGU0ID4+IDApLFxuICBcbiAgICAvLyBzaG9ydGN1dHMgYW5kIGNvc3RhbnRzXG4gICAgQUREX0VWRU5UX0xJU1RFTkVSID0gJ2FkZEV2ZW50TGlzdGVuZXInLFxuICAgIEFUVEFDSEVEID0gJ2F0dGFjaGVkJyxcbiAgICBDQUxMQkFDSyA9ICdDYWxsYmFjaycsXG4gICAgREVUQUNIRUQgPSAnZGV0YWNoZWQnLFxuICAgIEVYVEVORFMgPSAnZXh0ZW5kcycsXG4gIFxuICAgIEFUVFJJQlVURV9DSEFOR0VEX0NBTExCQUNLID0gJ2F0dHJpYnV0ZUNoYW5nZWQnICsgQ0FMTEJBQ0ssXG4gICAgQVRUQUNIRURfQ0FMTEJBQ0sgPSBBVFRBQ0hFRCArIENBTExCQUNLLFxuICAgIENPTk5FQ1RFRF9DQUxMQkFDSyA9ICdjb25uZWN0ZWQnICsgQ0FMTEJBQ0ssXG4gICAgRElTQ09OTkVDVEVEX0NBTExCQUNLID0gJ2Rpc2Nvbm5lY3RlZCcgKyBDQUxMQkFDSyxcbiAgICBDUkVBVEVEX0NBTExCQUNLID0gJ2NyZWF0ZWQnICsgQ0FMTEJBQ0ssXG4gICAgREVUQUNIRURfQ0FMTEJBQ0sgPSBERVRBQ0hFRCArIENBTExCQUNLLFxuICBcbiAgICBBRERJVElPTiA9ICdBRERJVElPTicsXG4gICAgTU9ESUZJQ0FUSU9OID0gJ01PRElGSUNBVElPTicsXG4gICAgUkVNT1ZBTCA9ICdSRU1PVkFMJyxcbiAgXG4gICAgRE9NX0FUVFJfTU9ESUZJRUQgPSAnRE9NQXR0ck1vZGlmaWVkJyxcbiAgICBET01fQ09OVEVOVF9MT0FERUQgPSAnRE9NQ29udGVudExvYWRlZCcsXG4gICAgRE9NX1NVQlRSRUVfTU9ESUZJRUQgPSAnRE9NU3VidHJlZU1vZGlmaWVkJyxcbiAgXG4gICAgUFJFRklYX1RBRyA9ICc8JyxcbiAgICBQUkVGSVhfSVMgPSAnPScsXG4gIFxuICAgIC8vIHZhbGlkIGFuZCBpbnZhbGlkIG5vZGUgbmFtZXNcbiAgICB2YWxpZE5hbWUgPSAvXltBLVpdW0EtWjAtOV0qKD86LVtBLVowLTldKykrJC8sXG4gICAgaW52YWxpZE5hbWVzID0gW1xuICAgICAgJ0FOTk9UQVRJT04tWE1MJyxcbiAgICAgICdDT0xPUi1QUk9GSUxFJyxcbiAgICAgICdGT05ULUZBQ0UnLFxuICAgICAgJ0ZPTlQtRkFDRS1TUkMnLFxuICAgICAgJ0ZPTlQtRkFDRS1VUkknLFxuICAgICAgJ0ZPTlQtRkFDRS1GT1JNQVQnLFxuICAgICAgJ0ZPTlQtRkFDRS1OQU1FJyxcbiAgICAgICdNSVNTSU5HLUdMWVBIJ1xuICAgIF0sXG4gIFxuICAgIC8vIHJlZ2lzdGVyZWQgdHlwZXMgYW5kIHRoZWlyIHByb3RvdHlwZXNcbiAgICB0eXBlcyA9IFtdLFxuICAgIHByb3RvcyA9IFtdLFxuICBcbiAgICAvLyB0byBxdWVyeSBzdWJub2Rlc1xuICAgIHF1ZXJ5ID0gJycsXG4gIFxuICAgIC8vIGh0bWwgc2hvcnRjdXQgdXNlZCB0byBmZWF0dXJlIGRldGVjdFxuICAgIGRvY3VtZW50RWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxcbiAgXG4gICAgLy8gRVM1IGlubGluZSBoZWxwZXJzIHx8IGJhc2ljIHBhdGNoZXNcbiAgICBpbmRleE9mID0gdHlwZXMuaW5kZXhPZiB8fCBmdW5jdGlvbiAodikge1xuICAgICAgZm9yKHZhciBpID0gdGhpcy5sZW5ndGg7IGktLSAmJiB0aGlzW2ldICE9PSB2Oyl7fVxuICAgICAgcmV0dXJuIGk7XG4gICAgfSxcbiAgXG4gICAgLy8gb3RoZXIgaGVscGVycyAvIHNob3J0Y3V0c1xuICAgIE9QID0gT2JqZWN0LnByb3RvdHlwZSxcbiAgICBoT1AgPSBPUC5oYXNPd25Qcm9wZXJ0eSxcbiAgICBpUE8gPSBPUC5pc1Byb3RvdHlwZU9mLFxuICBcbiAgICBkZWZpbmVQcm9wZXJ0eSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSxcbiAgICBlbXB0eSA9IFtdLFxuICAgIGdPUEQgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLFxuICAgIGdPUE4gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyxcbiAgICBnUE8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YsXG4gICAgc1BPID0gT2JqZWN0LnNldFByb3RvdHlwZU9mLFxuICBcbiAgICAvLyBqc2hpbnQgcHJvdG86IHRydWVcbiAgICBoYXNQcm90byA9ICEhT2JqZWN0Ll9fcHJvdG9fXyxcbiAgXG4gICAgLy8gVjEgaGVscGVyc1xuICAgIGZpeEdldENsYXNzID0gZmFsc2UsXG4gICAgRFJFQ0VWMSA9ICdfX2RyZUNFdjEnLFxuICAgIGN1c3RvbUVsZW1lbnRzID0gd2luZG93LmN1c3RvbUVsZW1lbnRzLFxuICAgIHVzYWJsZUN1c3RvbUVsZW1lbnRzID0gcG9seWZpbGwgIT09ICdmb3JjZScgJiYgISEoXG4gICAgICBjdXN0b21FbGVtZW50cyAmJlxuICAgICAgY3VzdG9tRWxlbWVudHMuZGVmaW5lICYmXG4gICAgICBjdXN0b21FbGVtZW50cy5nZXQgJiZcbiAgICAgIGN1c3RvbUVsZW1lbnRzLndoZW5EZWZpbmVkXG4gICAgKSxcbiAgICBEaWN0ID0gT2JqZWN0LmNyZWF0ZSB8fCBPYmplY3QsXG4gICAgTWFwID0gd2luZG93Lk1hcCB8fCBmdW5jdGlvbiBNYXAoKSB7XG4gICAgICB2YXIgSyA9IFtdLCBWID0gW10sIGk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uIChrKSB7XG4gICAgICAgICAgcmV0dXJuIFZbaW5kZXhPZi5jYWxsKEssIGspXTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoaywgdikge1xuICAgICAgICAgIGkgPSBpbmRleE9mLmNhbGwoSywgayk7XG4gICAgICAgICAgaWYgKGkgPCAwKSBWW0sucHVzaChrKSAtIDFdID0gdjtcbiAgICAgICAgICBlbHNlIFZbaV0gPSB2O1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0sXG4gICAgUHJvbWlzZSA9IHdpbmRvdy5Qcm9taXNlIHx8IGZ1bmN0aW9uIChmbikge1xuICAgICAgdmFyXG4gICAgICAgIG5vdGlmeSA9IFtdLFxuICAgICAgICBkb25lID0gZmFsc2UsXG4gICAgICAgIHAgPSB7XG4gICAgICAgICAgJ2NhdGNoJzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHA7XG4gICAgICAgICAgfSxcbiAgICAgICAgICAndGhlbic6IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgbm90aWZ5LnB1c2goY2IpO1xuICAgICAgICAgICAgaWYgKGRvbmUpIHNldFRpbWVvdXQocmVzb2x2ZSwgMSk7XG4gICAgICAgICAgICByZXR1cm4gcDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIDtcbiAgICAgIGZ1bmN0aW9uIHJlc29sdmUodmFsdWUpIHtcbiAgICAgICAgZG9uZSA9IHRydWU7XG4gICAgICAgIHdoaWxlIChub3RpZnkubGVuZ3RoKSBub3RpZnkuc2hpZnQoKSh2YWx1ZSk7XG4gICAgICB9XG4gICAgICBmbihyZXNvbHZlKTtcbiAgICAgIHJldHVybiBwO1xuICAgIH0sXG4gICAganVzdENyZWF0ZWQgPSBmYWxzZSxcbiAgICBjb25zdHJ1Y3RvcnMgPSBEaWN0KG51bGwpLFxuICAgIHdhaXRpbmdMaXN0ID0gRGljdChudWxsKSxcbiAgICBub2RlTmFtZXMgPSBuZXcgTWFwKCksXG4gICAgc2Vjb25kQXJndW1lbnQgPSBmdW5jdGlvbiAoaXMpIHtcbiAgICAgIHJldHVybiBpcy50b0xvd2VyQ2FzZSgpO1xuICAgIH0sXG4gIFxuICAgIC8vIHVzZWQgdG8gY3JlYXRlIHVuaXF1ZSBpbnN0YW5jZXNcbiAgICBjcmVhdGUgPSBPYmplY3QuY3JlYXRlIHx8IGZ1bmN0aW9uIEJyaWRnZShwcm90bykge1xuICAgICAgLy8gc2lsbHkgYnJva2VuIHBvbHlmaWxsIHByb2JhYmx5IGV2ZXIgdXNlZCBidXQgc2hvcnQgZW5vdWdoIHRvIHdvcmtcbiAgICAgIHJldHVybiBwcm90byA/ICgoQnJpZGdlLnByb3RvdHlwZSA9IHByb3RvKSwgbmV3IEJyaWRnZSgpKSA6IHRoaXM7XG4gICAgfSxcbiAgXG4gICAgLy8gd2lsbCBzZXQgdGhlIHByb3RvdHlwZSBpZiBwb3NzaWJsZVxuICAgIC8vIG9yIGNvcHkgb3ZlciBhbGwgcHJvcGVydGllc1xuICAgIHNldFByb3RvdHlwZSA9IHNQTyB8fCAoXG4gICAgICBoYXNQcm90byA/XG4gICAgICAgIGZ1bmN0aW9uIChvLCBwKSB7XG4gICAgICAgICAgby5fX3Byb3RvX18gPSBwO1xuICAgICAgICAgIHJldHVybiBvO1xuICAgICAgICB9IDogKFxuICAgICAgKGdPUE4gJiYgZ09QRCkgP1xuICAgICAgICAoZnVuY3Rpb24oKXtcbiAgICAgICAgICBmdW5jdGlvbiBzZXRQcm9wZXJ0aWVzKG8sIHApIHtcbiAgICAgICAgICAgIGZvciAodmFyXG4gICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgbmFtZXMgPSBnT1BOKHApLFxuICAgICAgICAgICAgICBpID0gMCwgbGVuZ3RoID0gbmFtZXMubGVuZ3RoO1xuICAgICAgICAgICAgICBpIDwgbGVuZ3RoOyBpKytcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBrZXkgPSBuYW1lc1tpXTtcbiAgICAgICAgICAgICAgaWYgKCFoT1AuY2FsbChvLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgZGVmaW5lUHJvcGVydHkobywga2V5LCBnT1BEKHAsIGtleSkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAobywgcCkge1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICBzZXRQcm9wZXJ0aWVzKG8sIHApO1xuICAgICAgICAgICAgfSB3aGlsZSAoKHAgPSBnUE8ocCkpICYmICFpUE8uY2FsbChwLCBvKSk7XG4gICAgICAgICAgICByZXR1cm4gbztcbiAgICAgICAgICB9O1xuICAgICAgICB9KCkpIDpcbiAgICAgICAgZnVuY3Rpb24gKG8sIHApIHtcbiAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gcCkge1xuICAgICAgICAgICAgb1trZXldID0gcFtrZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbztcbiAgICAgICAgfVxuICAgICkpLFxuICBcbiAgICAvLyBET00gc2hvcnRjdXRzIGFuZCBoZWxwZXJzLCBpZiBhbnlcbiAgXG4gICAgTXV0YXRpb25PYnNlcnZlciA9IHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyIHx8XG4gICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLFxuICBcbiAgICBIVE1MRWxlbWVudFByb3RvdHlwZSA9IChcbiAgICAgIHdpbmRvdy5IVE1MRWxlbWVudCB8fFxuICAgICAgd2luZG93LkVsZW1lbnQgfHxcbiAgICAgIHdpbmRvdy5Ob2RlXG4gICAgKS5wcm90b3R5cGUsXG4gIFxuICAgIElFOCA9ICFpUE8uY2FsbChIVE1MRWxlbWVudFByb3RvdHlwZSwgZG9jdW1lbnRFbGVtZW50KSxcbiAgXG4gICAgc2FmZVByb3BlcnR5ID0gSUU4ID8gZnVuY3Rpb24gKG8sIGssIGQpIHtcbiAgICAgIG9ba10gPSBkLnZhbHVlO1xuICAgICAgcmV0dXJuIG87XG4gICAgfSA6IGRlZmluZVByb3BlcnR5LFxuICBcbiAgICBpc1ZhbGlkTm9kZSA9IElFOCA/XG4gICAgICBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICByZXR1cm4gbm9kZS5ub2RlVHlwZSA9PT0gMTtcbiAgICAgIH0gOlxuICAgICAgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIGlQTy5jYWxsKEhUTUxFbGVtZW50UHJvdG90eXBlLCBub2RlKTtcbiAgICAgIH0sXG4gIFxuICAgIHRhcmdldHMgPSBJRTggJiYgW10sXG4gIFxuICAgIGF0dGFjaFNoYWRvdyA9IEhUTUxFbGVtZW50UHJvdG90eXBlLmF0dGFjaFNoYWRvdyxcbiAgICBjbG9uZU5vZGUgPSBIVE1MRWxlbWVudFByb3RvdHlwZS5jbG9uZU5vZGUsXG4gICAgZGlzcGF0Y2hFdmVudCA9IEhUTUxFbGVtZW50UHJvdG90eXBlLmRpc3BhdGNoRXZlbnQsXG4gICAgZ2V0QXR0cmlidXRlID0gSFRNTEVsZW1lbnRQcm90b3R5cGUuZ2V0QXR0cmlidXRlLFxuICAgIGhhc0F0dHJpYnV0ZSA9IEhUTUxFbGVtZW50UHJvdG90eXBlLmhhc0F0dHJpYnV0ZSxcbiAgICByZW1vdmVBdHRyaWJ1dGUgPSBIVE1MRWxlbWVudFByb3RvdHlwZS5yZW1vdmVBdHRyaWJ1dGUsXG4gICAgc2V0QXR0cmlidXRlID0gSFRNTEVsZW1lbnRQcm90b3R5cGUuc2V0QXR0cmlidXRlLFxuICBcbiAgICAvLyByZXBsYWNlZCBsYXRlciBvblxuICAgIGNyZWF0ZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50LFxuICAgIHBhdGNoZWRDcmVhdGVFbGVtZW50ID0gY3JlYXRlRWxlbWVudCxcbiAgXG4gICAgLy8gc2hhcmVkIG9ic2VydmVyIGZvciBhbGwgYXR0cmlidXRlc1xuICAgIGF0dHJpYnV0ZXNPYnNlcnZlciA9IE11dGF0aW9uT2JzZXJ2ZXIgJiYge1xuICAgICAgYXR0cmlidXRlczogdHJ1ZSxcbiAgICAgIGNoYXJhY3RlckRhdGE6IHRydWUsXG4gICAgICBhdHRyaWJ1dGVPbGRWYWx1ZTogdHJ1ZVxuICAgIH0sXG4gIFxuICAgIC8vIHVzZWZ1bCB0byBkZXRlY3Qgb25seSBpZiB0aGVyZSdzIG5vIE11dGF0aW9uT2JzZXJ2ZXJcbiAgICBET01BdHRyTW9kaWZpZWQgPSBNdXRhdGlvbk9ic2VydmVyIHx8IGZ1bmN0aW9uKGUpIHtcbiAgICAgIGRvZXNOb3RTdXBwb3J0RE9NQXR0ck1vZGlmaWVkID0gZmFsc2U7XG4gICAgICBkb2N1bWVudEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgRE9NX0FUVFJfTU9ESUZJRUQsXG4gICAgICAgIERPTUF0dHJNb2RpZmllZFxuICAgICAgKTtcbiAgICB9LFxuICBcbiAgICAvLyB3aWxsIGJvdGggYmUgdXNlZCB0byBtYWtlIERPTU5vZGVJbnNlcnRlZCBhc3luY2hyb25vdXNcbiAgICBhc2FwUXVldWUsXG4gICAgYXNhcFRpbWVyID0gMCxcbiAgXG4gICAgLy8gaW50ZXJuYWwgZmxhZ3NcbiAgICBWMCA9IFJFR0lTVEVSX0VMRU1FTlQgaW4gZG9jdW1lbnQsXG4gICAgc2V0TGlzdGVuZXIgPSB0cnVlLFxuICAgIGp1c3RTZXR1cCA9IGZhbHNlLFxuICAgIGRvZXNOb3RTdXBwb3J0RE9NQXR0ck1vZGlmaWVkID0gdHJ1ZSxcbiAgICBkcm9wRG9tQ29udGVudExvYWRlZCA9IHRydWUsXG4gIFxuICAgIC8vIG5lZWRlZCBmb3IgdGhlIGlubmVySFRNTCBoZWxwZXJcbiAgICBub3RGcm9tSW5uZXJIVE1MSGVscGVyID0gdHJ1ZSxcbiAgXG4gICAgLy8gb3B0aW9uYWxseSBkZWZpbmVkIGxhdGVyIG9uXG4gICAgb25TdWJ0cmVlTW9kaWZpZWQsXG4gICAgY2FsbERPTUF0dHJNb2RpZmllZCxcbiAgICBnZXRBdHRyaWJ1dGVzTWlycm9yLFxuICAgIG9ic2VydmVyLFxuICAgIG9ic2VydmUsXG4gIFxuICAgIC8vIGJhc2VkIG9uIHNldHRpbmcgcHJvdG90eXBlIGNhcGFiaWxpdHlcbiAgICAvLyB3aWxsIGNoZWNrIHByb3RvIG9yIHRoZSBleHBhbmRvIGF0dHJpYnV0ZVxuICAgIC8vIGluIG9yZGVyIHRvIHNldHVwIHRoZSBub2RlIG9uY2VcbiAgICBwYXRjaElmTm90QWxyZWFkeSxcbiAgICBwYXRjaFxuICA7XG4gIFxuICAvLyBvbmx5IGlmIG5lZWRlZFxuICBpZiAoIVYwKSB7XG4gIFxuICAgIGlmIChzUE8gfHwgaGFzUHJvdG8pIHtcbiAgICAgICAgcGF0Y2hJZk5vdEFscmVhZHkgPSBmdW5jdGlvbiAobm9kZSwgcHJvdG8pIHtcbiAgICAgICAgICBpZiAoIWlQTy5jYWxsKHByb3RvLCBub2RlKSkge1xuICAgICAgICAgICAgc2V0dXBOb2RlKG5vZGUsIHByb3RvKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHBhdGNoID0gc2V0dXBOb2RlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHBhdGNoSWZOb3RBbHJlYWR5ID0gZnVuY3Rpb24gKG5vZGUsIHByb3RvKSB7XG4gICAgICAgICAgaWYgKCFub2RlW0VYUEFORE9fVUlEXSkge1xuICAgICAgICAgICAgbm9kZVtFWFBBTkRPX1VJRF0gPSBPYmplY3QodHJ1ZSk7XG4gICAgICAgICAgICBzZXR1cE5vZGUobm9kZSwgcHJvdG8pO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcGF0Y2ggPSBwYXRjaElmTm90QWxyZWFkeTtcbiAgICB9XG4gIFxuICAgIGlmIChJRTgpIHtcbiAgICAgIGRvZXNOb3RTdXBwb3J0RE9NQXR0ck1vZGlmaWVkID0gZmFsc2U7XG4gICAgICAoZnVuY3Rpb24gKCl7XG4gICAgICAgIHZhclxuICAgICAgICAgIGRlc2NyaXB0b3IgPSBnT1BEKEhUTUxFbGVtZW50UHJvdG90eXBlLCBBRERfRVZFTlRfTElTVEVORVIpLFxuICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIgPSBkZXNjcmlwdG9yLnZhbHVlLFxuICAgICAgICAgIHBhdGNoZWRSZW1vdmVBdHRyaWJ1dGUgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgdmFyIGUgPSBuZXcgQ3VzdG9tRXZlbnQoRE9NX0FUVFJfTU9ESUZJRUQsIHtidWJibGVzOiB0cnVlfSk7XG4gICAgICAgICAgICBlLmF0dHJOYW1lID0gbmFtZTtcbiAgICAgICAgICAgIGUucHJldlZhbHVlID0gZ2V0QXR0cmlidXRlLmNhbGwodGhpcywgbmFtZSk7XG4gICAgICAgICAgICBlLm5ld1ZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgIGVbUkVNT1ZBTF0gPSBlLmF0dHJDaGFuZ2UgPSAyO1xuICAgICAgICAgICAgcmVtb3ZlQXR0cmlidXRlLmNhbGwodGhpcywgbmFtZSk7XG4gICAgICAgICAgICBkaXNwYXRjaEV2ZW50LmNhbGwodGhpcywgZSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBwYXRjaGVkU2V0QXR0cmlidXRlID0gZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgaGFkID0gaGFzQXR0cmlidXRlLmNhbGwodGhpcywgbmFtZSksXG4gICAgICAgICAgICAgIG9sZCA9IGhhZCAmJiBnZXRBdHRyaWJ1dGUuY2FsbCh0aGlzLCBuYW1lKSxcbiAgICAgICAgICAgICAgZSA9IG5ldyBDdXN0b21FdmVudChET01fQVRUUl9NT0RJRklFRCwge2J1YmJsZXM6IHRydWV9KVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgc2V0QXR0cmlidXRlLmNhbGwodGhpcywgbmFtZSwgdmFsdWUpO1xuICAgICAgICAgICAgZS5hdHRyTmFtZSA9IG5hbWU7XG4gICAgICAgICAgICBlLnByZXZWYWx1ZSA9IGhhZCA/IG9sZCA6IG51bGw7XG4gICAgICAgICAgICBlLm5ld1ZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICBpZiAoaGFkKSB7XG4gICAgICAgICAgICAgIGVbTU9ESUZJQ0FUSU9OXSA9IGUuYXR0ckNoYW5nZSA9IDE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBlW0FERElUSU9OXSA9IGUuYXR0ckNoYW5nZSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkaXNwYXRjaEV2ZW50LmNhbGwodGhpcywgZSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBvblByb3BlcnR5Q2hhbmdlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIC8vIGpzaGludCBlcW51bGw6dHJ1ZVxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIG5vZGUgPSBlLmN1cnJlbnRUYXJnZXQsXG4gICAgICAgICAgICAgIHN1cGVyU2VjcmV0ID0gbm9kZVtFWFBBTkRPX1VJRF0sXG4gICAgICAgICAgICAgIHByb3BlcnR5TmFtZSA9IGUucHJvcGVydHlOYW1lLFxuICAgICAgICAgICAgICBldmVudFxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgaWYgKHN1cGVyU2VjcmV0Lmhhc093blByb3BlcnR5KHByb3BlcnR5TmFtZSkpIHtcbiAgICAgICAgICAgICAgc3VwZXJTZWNyZXQgPSBzdXBlclNlY3JldFtwcm9wZXJ0eU5hbWVdO1xuICAgICAgICAgICAgICBldmVudCA9IG5ldyBDdXN0b21FdmVudChET01fQVRUUl9NT0RJRklFRCwge2J1YmJsZXM6IHRydWV9KTtcbiAgICAgICAgICAgICAgZXZlbnQuYXR0ck5hbWUgPSBzdXBlclNlY3JldC5uYW1lO1xuICAgICAgICAgICAgICBldmVudC5wcmV2VmFsdWUgPSBzdXBlclNlY3JldC52YWx1ZSB8fCBudWxsO1xuICAgICAgICAgICAgICBldmVudC5uZXdWYWx1ZSA9IChzdXBlclNlY3JldC52YWx1ZSA9IG5vZGVbcHJvcGVydHlOYW1lXSB8fCBudWxsKTtcbiAgICAgICAgICAgICAgaWYgKGV2ZW50LnByZXZWYWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZXZlbnRbQURESVRJT05dID0gZXZlbnQuYXR0ckNoYW5nZSA9IDA7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZXZlbnRbTU9ESUZJQ0FUSU9OXSA9IGV2ZW50LmF0dHJDaGFuZ2UgPSAxO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGRpc3BhdGNoRXZlbnQuY2FsbChub2RlLCBldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICA7XG4gICAgICAgIGRlc2NyaXB0b3IudmFsdWUgPSBmdW5jdGlvbiAodHlwZSwgaGFuZGxlciwgY2FwdHVyZSkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHR5cGUgPT09IERPTV9BVFRSX01PRElGSUVEICYmXG4gICAgICAgICAgICB0aGlzW0FUVFJJQlVURV9DSEFOR0VEX0NBTExCQUNLXSAmJlxuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUgIT09IHBhdGNoZWRTZXRBdHRyaWJ1dGVcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXNbRVhQQU5ET19VSURdID0ge1xuICAgICAgICAgICAgICBjbGFzc05hbWU6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnY2xhc3MnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLmNsYXNzTmFtZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUgPSBwYXRjaGVkU2V0QXR0cmlidXRlO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUgPSBwYXRjaGVkUmVtb3ZlQXR0cmlidXRlO1xuICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lci5jYWxsKHRoaXMsICdwcm9wZXJ0eWNoYW5nZScsIG9uUHJvcGVydHlDaGFuZ2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhZGRFdmVudExpc3RlbmVyLmNhbGwodGhpcywgdHlwZSwgaGFuZGxlciwgY2FwdHVyZSk7XG4gICAgICAgIH07XG4gICAgICAgIGRlZmluZVByb3BlcnR5KEhUTUxFbGVtZW50UHJvdG90eXBlLCBBRERfRVZFTlRfTElTVEVORVIsIGRlc2NyaXB0b3IpO1xuICAgICAgfSgpKTtcbiAgICB9IGVsc2UgaWYgKCFNdXRhdGlvbk9ic2VydmVyKSB7XG4gICAgICBkb2N1bWVudEVsZW1lbnRbQUREX0VWRU5UX0xJU1RFTkVSXShET01fQVRUUl9NT0RJRklFRCwgRE9NQXR0ck1vZGlmaWVkKTtcbiAgICAgIGRvY3VtZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoRVhQQU5ET19VSUQsIDEpO1xuICAgICAgZG9jdW1lbnRFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShFWFBBTkRPX1VJRCk7XG4gICAgICBpZiAoZG9lc05vdFN1cHBvcnRET01BdHRyTW9kaWZpZWQpIHtcbiAgICAgICAgb25TdWJ0cmVlTW9kaWZpZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHZhclxuICAgICAgICAgICAgbm9kZSA9IHRoaXMsXG4gICAgICAgICAgICBvbGRBdHRyaWJ1dGVzLFxuICAgICAgICAgICAgbmV3QXR0cmlidXRlcyxcbiAgICAgICAgICAgIGtleVxuICAgICAgICAgIDtcbiAgICAgICAgICBpZiAobm9kZSA9PT0gZS50YXJnZXQpIHtcbiAgICAgICAgICAgIG9sZEF0dHJpYnV0ZXMgPSBub2RlW0VYUEFORE9fVUlEXTtcbiAgICAgICAgICAgIG5vZGVbRVhQQU5ET19VSURdID0gKG5ld0F0dHJpYnV0ZXMgPSBnZXRBdHRyaWJ1dGVzTWlycm9yKG5vZGUpKTtcbiAgICAgICAgICAgIGZvciAoa2V5IGluIG5ld0F0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIG9sZEF0dHJpYnV0ZXMpKSB7XG4gICAgICAgICAgICAgICAgLy8gYXR0cmlidXRlIHdhcyBhZGRlZFxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsRE9NQXR0ck1vZGlmaWVkKFxuICAgICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAgIG5vZGUsXG4gICAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgICBvbGRBdHRyaWJ1dGVzW2tleV0sXG4gICAgICAgICAgICAgICAgICBuZXdBdHRyaWJ1dGVzW2tleV0sXG4gICAgICAgICAgICAgICAgICBBRERJVElPTlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAobmV3QXR0cmlidXRlc1trZXldICE9PSBvbGRBdHRyaWJ1dGVzW2tleV0pIHtcbiAgICAgICAgICAgICAgICAvLyBhdHRyaWJ1dGUgd2FzIGNoYW5nZWRcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbERPTUF0dHJNb2RpZmllZChcbiAgICAgICAgICAgICAgICAgIDEsXG4gICAgICAgICAgICAgICAgICBub2RlLFxuICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgb2xkQXR0cmlidXRlc1trZXldLFxuICAgICAgICAgICAgICAgICAgbmV3QXR0cmlidXRlc1trZXldLFxuICAgICAgICAgICAgICAgICAgTU9ESUZJQ0FUSU9OXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gY2hlY2tpbmcgaWYgaXQgaGFzIGJlZW4gcmVtb3ZlZFxuICAgICAgICAgICAgZm9yIChrZXkgaW4gb2xkQXR0cmlidXRlcykge1xuICAgICAgICAgICAgICBpZiAoIShrZXkgaW4gbmV3QXR0cmlidXRlcykpIHtcbiAgICAgICAgICAgICAgICAvLyBhdHRyaWJ1dGUgcmVtb3ZlZFxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsRE9NQXR0ck1vZGlmaWVkKFxuICAgICAgICAgICAgICAgICAgMixcbiAgICAgICAgICAgICAgICAgIG5vZGUsXG4gICAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgICBvbGRBdHRyaWJ1dGVzW2tleV0sXG4gICAgICAgICAgICAgICAgICBuZXdBdHRyaWJ1dGVzW2tleV0sXG4gICAgICAgICAgICAgICAgICBSRU1PVkFMXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgY2FsbERPTUF0dHJNb2RpZmllZCA9IGZ1bmN0aW9uIChcbiAgICAgICAgICBhdHRyQ2hhbmdlLFxuICAgICAgICAgIGN1cnJlbnRUYXJnZXQsXG4gICAgICAgICAgYXR0ck5hbWUsXG4gICAgICAgICAgcHJldlZhbHVlLFxuICAgICAgICAgIG5ld1ZhbHVlLFxuICAgICAgICAgIGFjdGlvblxuICAgICAgICApIHtcbiAgICAgICAgICB2YXIgZSA9IHtcbiAgICAgICAgICAgIGF0dHJDaGFuZ2U6IGF0dHJDaGFuZ2UsXG4gICAgICAgICAgICBjdXJyZW50VGFyZ2V0OiBjdXJyZW50VGFyZ2V0LFxuICAgICAgICAgICAgYXR0ck5hbWU6IGF0dHJOYW1lLFxuICAgICAgICAgICAgcHJldlZhbHVlOiBwcmV2VmFsdWUsXG4gICAgICAgICAgICBuZXdWYWx1ZTogbmV3VmFsdWVcbiAgICAgICAgICB9O1xuICAgICAgICAgIGVbYWN0aW9uXSA9IGF0dHJDaGFuZ2U7XG4gICAgICAgICAgb25ET01BdHRyTW9kaWZpZWQoZSk7XG4gICAgICAgIH07XG4gICAgICAgIGdldEF0dHJpYnV0ZXNNaXJyb3IgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgIGZvciAodmFyXG4gICAgICAgICAgICBhdHRyLCBuYW1lLFxuICAgICAgICAgICAgcmVzdWx0ID0ge30sXG4gICAgICAgICAgICBhdHRyaWJ1dGVzID0gbm9kZS5hdHRyaWJ1dGVzLFxuICAgICAgICAgICAgaSA9IDAsIGxlbmd0aCA9IGF0dHJpYnV0ZXMubGVuZ3RoO1xuICAgICAgICAgICAgaSA8IGxlbmd0aDsgaSsrXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBhdHRyID0gYXR0cmlidXRlc1tpXTtcbiAgICAgICAgICAgIG5hbWUgPSBhdHRyLm5hbWU7XG4gICAgICAgICAgICBpZiAobmFtZSAhPT0gJ3NldEF0dHJpYnV0ZScpIHtcbiAgICAgICAgICAgICAgcmVzdWx0W25hbWVdID0gYXR0ci52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG4gIFxuICAgIC8vIHNldCBhcyBlbnVtZXJhYmxlLCB3cml0YWJsZSBhbmQgY29uZmlndXJhYmxlXG4gICAgZG9jdW1lbnRbUkVHSVNURVJfRUxFTUVOVF0gPSBmdW5jdGlvbiByZWdpc3RlckVsZW1lbnQodHlwZSwgb3B0aW9ucykge1xuICAgICAgdXBwZXJUeXBlID0gdHlwZS50b1VwcGVyQ2FzZSgpO1xuICAgICAgaWYgKHNldExpc3RlbmVyKSB7XG4gICAgICAgIC8vIG9ubHkgZmlyc3QgdGltZSBkb2N1bWVudC5yZWdpc3RlckVsZW1lbnQgaXMgdXNlZFxuICAgICAgICAvLyB3ZSBuZWVkIHRvIHNldCB0aGlzIGxpc3RlbmVyXG4gICAgICAgIC8vIHNldHRpbmcgaXQgYnkgZGVmYXVsdCBtaWdodCBzbG93IGRvd24gZm9yIG5vIHJlYXNvblxuICAgICAgICBzZXRMaXN0ZW5lciA9IGZhbHNlO1xuICAgICAgICBpZiAoTXV0YXRpb25PYnNlcnZlcikge1xuICAgICAgICAgIG9ic2VydmVyID0gKGZ1bmN0aW9uKGF0dGFjaGVkLCBkZXRhY2hlZCl7XG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja0VtQWxsKGxpc3QsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBsaXN0Lmxlbmd0aDsgaSA8IGxlbmd0aDsgY2FsbGJhY2sobGlzdFtpKytdKSl7fVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uIChyZWNvcmRzKSB7XG4gICAgICAgICAgICAgIGZvciAodmFyXG4gICAgICAgICAgICAgICAgY3VycmVudCwgbm9kZSwgbmV3VmFsdWUsXG4gICAgICAgICAgICAgICAgaSA9IDAsIGxlbmd0aCA9IHJlY29yZHMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKytcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IHJlY29yZHNbaV07XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQudHlwZSA9PT0gJ2NoaWxkTGlzdCcpIHtcbiAgICAgICAgICAgICAgICAgIGNoZWNrRW1BbGwoY3VycmVudC5hZGRlZE5vZGVzLCBhdHRhY2hlZCk7XG4gICAgICAgICAgICAgICAgICBjaGVja0VtQWxsKGN1cnJlbnQucmVtb3ZlZE5vZGVzLCBkZXRhY2hlZCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIG5vZGUgPSBjdXJyZW50LnRhcmdldDtcbiAgICAgICAgICAgICAgICAgIGlmIChub3RGcm9tSW5uZXJIVE1MSGVscGVyICYmXG4gICAgICAgICAgICAgICAgICAgICAgbm9kZVtBVFRSSUJVVEVfQ0hBTkdFRF9DQUxMQkFDS10gJiZcbiAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50LmF0dHJpYnV0ZU5hbWUgIT09ICdzdHlsZScpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUgPSBnZXRBdHRyaWJ1dGUuY2FsbChub2RlLCBjdXJyZW50LmF0dHJpYnV0ZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV3VmFsdWUgIT09IGN1cnJlbnQub2xkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICBub2RlW0FUVFJJQlVURV9DSEFOR0VEX0NBTExCQUNLXShcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQuYXR0cmlidXRlTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQub2xkVmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0oZXhlY3V0ZUFjdGlvbihBVFRBQ0hFRCksIGV4ZWN1dGVBY3Rpb24oREVUQUNIRUQpKSk7XG4gICAgICAgICAgb2JzZXJ2ZSA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKFxuICAgICAgICAgICAgICBub2RlLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgICAgICAgICAgICAgIHN1YnRyZWU6IHRydWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgIH07XG4gICAgICAgICAgb2JzZXJ2ZShkb2N1bWVudCk7XG4gICAgICAgICAgaWYgKGF0dGFjaFNoYWRvdykge1xuICAgICAgICAgICAgSFRNTEVsZW1lbnRQcm90b3R5cGUuYXR0YWNoU2hhZG93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICByZXR1cm4gb2JzZXJ2ZShhdHRhY2hTaGFkb3cuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhc2FwUXVldWUgPSBbXTtcbiAgICAgICAgICBkb2N1bWVudFtBRERfRVZFTlRfTElTVEVORVJdKCdET01Ob2RlSW5zZXJ0ZWQnLCBvbkRPTU5vZGUoQVRUQUNIRUQpKTtcbiAgICAgICAgICBkb2N1bWVudFtBRERfRVZFTlRfTElTVEVORVJdKCdET01Ob2RlUmVtb3ZlZCcsIG9uRE9NTm9kZShERVRBQ0hFRCkpO1xuICAgICAgICB9XG4gIFxuICAgICAgICBkb2N1bWVudFtBRERfRVZFTlRfTElTVEVORVJdKERPTV9DT05URU5UX0xPQURFRCwgb25SZWFkeVN0YXRlQ2hhbmdlKTtcbiAgICAgICAgZG9jdW1lbnRbQUREX0VWRU5UX0xJU1RFTkVSXSgncmVhZHlzdGF0ZWNoYW5nZScsIG9uUmVhZHlTdGF0ZUNoYW5nZSk7XG4gIFxuICAgICAgICBIVE1MRWxlbWVudFByb3RvdHlwZS5jbG9uZU5vZGUgPSBmdW5jdGlvbiAoZGVlcCkge1xuICAgICAgICAgIHZhclxuICAgICAgICAgICAgbm9kZSA9IGNsb25lTm9kZS5jYWxsKHRoaXMsICEhZGVlcCksXG4gICAgICAgICAgICBpID0gZ2V0VHlwZUluZGV4KG5vZGUpXG4gICAgICAgICAgO1xuICAgICAgICAgIGlmICgtMSA8IGkpIHBhdGNoKG5vZGUsIHByb3Rvc1tpXSk7XG4gICAgICAgICAgaWYgKGRlZXAgJiYgcXVlcnkubGVuZ3RoKSBsb29wQW5kU2V0dXAobm9kZS5xdWVyeVNlbGVjdG9yQWxsKHF1ZXJ5KSk7XG4gICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICB9XG4gIFxuICAgICAgaWYgKGp1c3RTZXR1cCkgcmV0dXJuIChqdXN0U2V0dXAgPSBmYWxzZSk7XG4gIFxuICAgICAgaWYgKC0yIDwgKFxuICAgICAgICBpbmRleE9mLmNhbGwodHlwZXMsIFBSRUZJWF9JUyArIHVwcGVyVHlwZSkgK1xuICAgICAgICBpbmRleE9mLmNhbGwodHlwZXMsIFBSRUZJWF9UQUcgKyB1cHBlclR5cGUpXG4gICAgICApKSB7XG4gICAgICAgIHRocm93VHlwZUVycm9yKHR5cGUpO1xuICAgICAgfVxuICBcbiAgICAgIGlmICghdmFsaWROYW1lLnRlc3QodXBwZXJUeXBlKSB8fCAtMSA8IGluZGV4T2YuY2FsbChpbnZhbGlkTmFtZXMsIHVwcGVyVHlwZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgdHlwZSAnICsgdHlwZSArICcgaXMgaW52YWxpZCcpO1xuICAgICAgfVxuICBcbiAgICAgIHZhclxuICAgICAgICBjb25zdHJ1Y3RvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gZXh0ZW5kaW5nID9cbiAgICAgICAgICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobm9kZU5hbWUsIHVwcGVyVHlwZSkgOlxuICAgICAgICAgICAgZG9jdW1lbnQuY3JlYXRlRWxlbWVudChub2RlTmFtZSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9wdCA9IG9wdGlvbnMgfHwgT1AsXG4gICAgICAgIGV4dGVuZGluZyA9IGhPUC5jYWxsKG9wdCwgRVhURU5EUyksXG4gICAgICAgIG5vZGVOYW1lID0gZXh0ZW5kaW5nID8gb3B0aW9uc1tFWFRFTkRTXS50b1VwcGVyQ2FzZSgpIDogdXBwZXJUeXBlLFxuICAgICAgICB1cHBlclR5cGUsXG4gICAgICAgIGlcbiAgICAgIDtcbiAgXG4gICAgICBpZiAoZXh0ZW5kaW5nICYmIC0xIDwgKFxuICAgICAgICBpbmRleE9mLmNhbGwodHlwZXMsIFBSRUZJWF9UQUcgKyBub2RlTmFtZSlcbiAgICAgICkpIHtcbiAgICAgICAgdGhyb3dUeXBlRXJyb3Iobm9kZU5hbWUpO1xuICAgICAgfVxuICBcbiAgICAgIGkgPSB0eXBlcy5wdXNoKChleHRlbmRpbmcgPyBQUkVGSVhfSVMgOiBQUkVGSVhfVEFHKSArIHVwcGVyVHlwZSkgLSAxO1xuICBcbiAgICAgIHF1ZXJ5ID0gcXVlcnkuY29uY2F0KFxuICAgICAgICBxdWVyeS5sZW5ndGggPyAnLCcgOiAnJyxcbiAgICAgICAgZXh0ZW5kaW5nID8gbm9kZU5hbWUgKyAnW2lzPVwiJyArIHR5cGUudG9Mb3dlckNhc2UoKSArICdcIl0nIDogbm9kZU5hbWVcbiAgICAgICk7XG4gIFxuICAgICAgY29uc3RydWN0b3IucHJvdG90eXBlID0gKFxuICAgICAgICBwcm90b3NbaV0gPSBoT1AuY2FsbChvcHQsICdwcm90b3R5cGUnKSA/XG4gICAgICAgICAgb3B0LnByb3RvdHlwZSA6XG4gICAgICAgICAgY3JlYXRlKEhUTUxFbGVtZW50UHJvdG90eXBlKVxuICAgICAgKTtcbiAgXG4gICAgICBpZiAocXVlcnkubGVuZ3RoKSBsb29wQW5kVmVyaWZ5KFxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHF1ZXJ5KSxcbiAgICAgICAgQVRUQUNIRURcbiAgICAgICk7XG4gIFxuICAgICAgcmV0dXJuIGNvbnN0cnVjdG9yO1xuICAgIH07XG4gIFxuICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgPSAocGF0Y2hlZENyZWF0ZUVsZW1lbnQgPSBmdW5jdGlvbiAobG9jYWxOYW1lLCB0eXBlRXh0ZW5zaW9uKSB7XG4gICAgICB2YXJcbiAgICAgICAgaXMgPSBnZXRJcyh0eXBlRXh0ZW5zaW9uKSxcbiAgICAgICAgbm9kZSA9IGlzID9cbiAgICAgICAgICBjcmVhdGVFbGVtZW50LmNhbGwoZG9jdW1lbnQsIGxvY2FsTmFtZSwgc2Vjb25kQXJndW1lbnQoaXMpKSA6XG4gICAgICAgICAgY3JlYXRlRWxlbWVudC5jYWxsKGRvY3VtZW50LCBsb2NhbE5hbWUpLFxuICAgICAgICBuYW1lID0gJycgKyBsb2NhbE5hbWUsXG4gICAgICAgIGkgPSBpbmRleE9mLmNhbGwoXG4gICAgICAgICAgdHlwZXMsXG4gICAgICAgICAgKGlzID8gUFJFRklYX0lTIDogUFJFRklYX1RBRykgK1xuICAgICAgICAgIChpcyB8fCBuYW1lKS50b1VwcGVyQ2FzZSgpXG4gICAgICAgICksXG4gICAgICAgIHNldHVwID0gLTEgPCBpXG4gICAgICA7XG4gICAgICBpZiAoaXMpIHtcbiAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2lzJywgaXMgPSBpcy50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgaWYgKHNldHVwKSB7XG4gICAgICAgICAgc2V0dXAgPSBpc0luUVNBKG5hbWUudG9VcHBlckNhc2UoKSwgaXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBub3RGcm9tSW5uZXJIVE1MSGVscGVyID0gIWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQuaW5uZXJIVE1MSGVscGVyO1xuICAgICAgaWYgKHNldHVwKSBwYXRjaChub2RlLCBwcm90b3NbaV0pO1xuICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfSk7XG4gIFxuICB9XG4gIFxuICBmdW5jdGlvbiBBU0FQKCkge1xuICAgIHZhciBxdWV1ZSA9IGFzYXBRdWV1ZS5zcGxpY2UoMCwgYXNhcFF1ZXVlLmxlbmd0aCk7XG4gICAgYXNhcFRpbWVyID0gMDtcbiAgICB3aGlsZSAocXVldWUubGVuZ3RoKSB7XG4gICAgICBxdWV1ZS5zaGlmdCgpLmNhbGwoXG4gICAgICAgIG51bGwsIHF1ZXVlLnNoaWZ0KClcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIFxuICBmdW5jdGlvbiBsb29wQW5kVmVyaWZ5KGxpc3QsIGFjdGlvbikge1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBsaXN0Lmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2ZXJpZnlBbmRTZXR1cEFuZEFjdGlvbihsaXN0W2ldLCBhY3Rpb24pO1xuICAgIH1cbiAgfVxuICBcbiAgZnVuY3Rpb24gbG9vcEFuZFNldHVwKGxpc3QpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gbGlzdC5sZW5ndGgsIG5vZGU7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgbm9kZSA9IGxpc3RbaV07XG4gICAgICBwYXRjaChub2RlLCBwcm90b3NbZ2V0VHlwZUluZGV4KG5vZGUpXSk7XG4gICAgfVxuICB9XG4gIFxuICBmdW5jdGlvbiBleGVjdXRlQWN0aW9uKGFjdGlvbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgaWYgKGlzVmFsaWROb2RlKG5vZGUpKSB7XG4gICAgICAgIHZlcmlmeUFuZFNldHVwQW5kQWN0aW9uKG5vZGUsIGFjdGlvbik7XG4gICAgICAgIGlmIChxdWVyeS5sZW5ndGgpIGxvb3BBbmRWZXJpZnkoXG4gICAgICAgICAgbm9kZS5xdWVyeVNlbGVjdG9yQWxsKHF1ZXJ5KSxcbiAgICAgICAgICBhY3Rpb25cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIFxuICBmdW5jdGlvbiBnZXRUeXBlSW5kZXgodGFyZ2V0KSB7XG4gICAgdmFyXG4gICAgICBpcyA9IGdldEF0dHJpYnV0ZS5jYWxsKHRhcmdldCwgJ2lzJyksXG4gICAgICBub2RlTmFtZSA9IHRhcmdldC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpLFxuICAgICAgaSA9IGluZGV4T2YuY2FsbChcbiAgICAgICAgdHlwZXMsXG4gICAgICAgIGlzID9cbiAgICAgICAgICAgIFBSRUZJWF9JUyArIGlzLnRvVXBwZXJDYXNlKCkgOlxuICAgICAgICAgICAgUFJFRklYX1RBRyArIG5vZGVOYW1lXG4gICAgICApXG4gICAgO1xuICAgIHJldHVybiBpcyAmJiAtMSA8IGkgJiYgIWlzSW5RU0Eobm9kZU5hbWUsIGlzKSA/IC0xIDogaTtcbiAgfVxuICBcbiAgZnVuY3Rpb24gaXNJblFTQShuYW1lLCB0eXBlKSB7XG4gICAgcmV0dXJuIC0xIDwgcXVlcnkuaW5kZXhPZihuYW1lICsgJ1tpcz1cIicgKyB0eXBlICsgJ1wiXScpO1xuICB9XG4gIFxuICBmdW5jdGlvbiBvbkRPTUF0dHJNb2RpZmllZChlKSB7XG4gICAgdmFyXG4gICAgICBub2RlID0gZS5jdXJyZW50VGFyZ2V0LFxuICAgICAgYXR0ckNoYW5nZSA9IGUuYXR0ckNoYW5nZSxcbiAgICAgIGF0dHJOYW1lID0gZS5hdHRyTmFtZSxcbiAgICAgIHRhcmdldCA9IGUudGFyZ2V0LFxuICAgICAgYWRkaXRpb24gPSBlW0FERElUSU9OXSB8fCAyLFxuICAgICAgcmVtb3ZhbCA9IGVbUkVNT1ZBTF0gfHwgM1xuICAgIDtcbiAgICBpZiAobm90RnJvbUlubmVySFRNTEhlbHBlciAmJlxuICAgICAgICAoIXRhcmdldCB8fCB0YXJnZXQgPT09IG5vZGUpICYmXG4gICAgICAgIG5vZGVbQVRUUklCVVRFX0NIQU5HRURfQ0FMTEJBQ0tdICYmXG4gICAgICAgIGF0dHJOYW1lICE9PSAnc3R5bGUnICYmIChcbiAgICAgICAgICBlLnByZXZWYWx1ZSAhPT0gZS5uZXdWYWx1ZSB8fFxuICAgICAgICAgIC8vIElFOSwgSUUxMCwgYW5kIE9wZXJhIDEyIGdvdGNoYVxuICAgICAgICAgIGUubmV3VmFsdWUgPT09ICcnICYmIChcbiAgICAgICAgICAgIGF0dHJDaGFuZ2UgPT09IGFkZGl0aW9uIHx8XG4gICAgICAgICAgICBhdHRyQ2hhbmdlID09PSByZW1vdmFsXG4gICAgICAgICAgKVxuICAgICkpIHtcbiAgICAgIG5vZGVbQVRUUklCVVRFX0NIQU5HRURfQ0FMTEJBQ0tdKFxuICAgICAgICBhdHRyTmFtZSxcbiAgICAgICAgYXR0ckNoYW5nZSA9PT0gYWRkaXRpb24gPyBudWxsIDogZS5wcmV2VmFsdWUsXG4gICAgICAgIGF0dHJDaGFuZ2UgPT09IHJlbW92YWwgPyBudWxsIDogZS5uZXdWYWx1ZVxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIG9uRE9NTm9kZShhY3Rpb24pIHtcbiAgICB2YXIgZXhlY3V0b3IgPSBleGVjdXRlQWN0aW9uKGFjdGlvbik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7XG4gICAgICBhc2FwUXVldWUucHVzaChleGVjdXRvciwgZS50YXJnZXQpO1xuICAgICAgaWYgKGFzYXBUaW1lcikgY2xlYXJUaW1lb3V0KGFzYXBUaW1lcik7XG4gICAgICBhc2FwVGltZXIgPSBzZXRUaW1lb3V0KEFTQVAsIDEpO1xuICAgIH07XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIG9uUmVhZHlTdGF0ZUNoYW5nZShlKSB7XG4gICAgaWYgKGRyb3BEb21Db250ZW50TG9hZGVkKSB7XG4gICAgICBkcm9wRG9tQ29udGVudExvYWRlZCA9IGZhbHNlO1xuICAgICAgZS5jdXJyZW50VGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoRE9NX0NPTlRFTlRfTE9BREVELCBvblJlYWR5U3RhdGVDaGFuZ2UpO1xuICAgIH1cbiAgICBpZiAocXVlcnkubGVuZ3RoKSBsb29wQW5kVmVyaWZ5KFxuICAgICAgKGUudGFyZ2V0IHx8IGRvY3VtZW50KS5xdWVyeVNlbGVjdG9yQWxsKHF1ZXJ5KSxcbiAgICAgIGUuZGV0YWlsID09PSBERVRBQ0hFRCA/IERFVEFDSEVEIDogQVRUQUNIRURcbiAgICApO1xuICAgIGlmIChJRTgpIHB1cmdlKCk7XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIHBhdGNoZWRTZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpIHtcbiAgICAvLyBqc2hpbnQgdmFsaWR0aGlzOnRydWVcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2V0QXR0cmlidXRlLmNhbGwoc2VsZiwgbmFtZSwgdmFsdWUpO1xuICAgIG9uU3VidHJlZU1vZGlmaWVkLmNhbGwoc2VsZiwge3RhcmdldDogc2VsZn0pO1xuICB9XG4gIFxuICBmdW5jdGlvbiBzZXR1cE5vZGUobm9kZSwgcHJvdG8pIHtcbiAgICBzZXRQcm90b3R5cGUobm9kZSwgcHJvdG8pO1xuICAgIGlmIChvYnNlcnZlcikge1xuICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShub2RlLCBhdHRyaWJ1dGVzT2JzZXJ2ZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZG9lc05vdFN1cHBvcnRET01BdHRyTW9kaWZpZWQpIHtcbiAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUgPSBwYXRjaGVkU2V0QXR0cmlidXRlO1xuICAgICAgICBub2RlW0VYUEFORE9fVUlEXSA9IGdldEF0dHJpYnV0ZXNNaXJyb3Iobm9kZSk7XG4gICAgICAgIG5vZGVbQUREX0VWRU5UX0xJU1RFTkVSXShET01fU1VCVFJFRV9NT0RJRklFRCwgb25TdWJ0cmVlTW9kaWZpZWQpO1xuICAgICAgfVxuICAgICAgbm9kZVtBRERfRVZFTlRfTElTVEVORVJdKERPTV9BVFRSX01PRElGSUVELCBvbkRPTUF0dHJNb2RpZmllZCk7XG4gICAgfVxuICAgIGlmIChub2RlW0NSRUFURURfQ0FMTEJBQ0tdICYmIG5vdEZyb21Jbm5lckhUTUxIZWxwZXIpIHtcbiAgICAgIG5vZGUuY3JlYXRlZCA9IHRydWU7XG4gICAgICBub2RlW0NSRUFURURfQ0FMTEJBQ0tdKCk7XG4gICAgICBub2RlLmNyZWF0ZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIHB1cmdlKCkge1xuICAgIGZvciAodmFyXG4gICAgICBub2RlLFxuICAgICAgaSA9IDAsXG4gICAgICBsZW5ndGggPSB0YXJnZXRzLmxlbmd0aDtcbiAgICAgIGkgPCBsZW5ndGg7IGkrK1xuICAgICkge1xuICAgICAgbm9kZSA9IHRhcmdldHNbaV07XG4gICAgICBpZiAoIWRvY3VtZW50RWxlbWVudC5jb250YWlucyhub2RlKSkge1xuICAgICAgICBsZW5ndGgtLTtcbiAgICAgICAgdGFyZ2V0cy5zcGxpY2UoaS0tLCAxKTtcbiAgICAgICAgdmVyaWZ5QW5kU2V0dXBBbmRBY3Rpb24obm9kZSwgREVUQUNIRUQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBcbiAgZnVuY3Rpb24gdGhyb3dUeXBlRXJyb3IodHlwZSkge1xuICAgIHRocm93IG5ldyBFcnJvcignQSAnICsgdHlwZSArICcgdHlwZSBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQnKTtcbiAgfVxuICBcbiAgZnVuY3Rpb24gdmVyaWZ5QW5kU2V0dXBBbmRBY3Rpb24obm9kZSwgYWN0aW9uKSB7XG4gICAgdmFyXG4gICAgICBmbixcbiAgICAgIGkgPSBnZXRUeXBlSW5kZXgobm9kZSlcbiAgICA7XG4gICAgaWYgKC0xIDwgaSkge1xuICAgICAgcGF0Y2hJZk5vdEFscmVhZHkobm9kZSwgcHJvdG9zW2ldKTtcbiAgICAgIGkgPSAwO1xuICAgICAgaWYgKGFjdGlvbiA9PT0gQVRUQUNIRUQgJiYgIW5vZGVbQVRUQUNIRURdKSB7XG4gICAgICAgIG5vZGVbREVUQUNIRURdID0gZmFsc2U7XG4gICAgICAgIG5vZGVbQVRUQUNIRURdID0gdHJ1ZTtcbiAgICAgICAgaSA9IDE7XG4gICAgICAgIGlmIChJRTggJiYgaW5kZXhPZi5jYWxsKHRhcmdldHMsIG5vZGUpIDwgMCkge1xuICAgICAgICAgIHRhcmdldHMucHVzaChub2RlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IERFVEFDSEVEICYmICFub2RlW0RFVEFDSEVEXSkge1xuICAgICAgICBub2RlW0FUVEFDSEVEXSA9IGZhbHNlO1xuICAgICAgICBub2RlW0RFVEFDSEVEXSA9IHRydWU7XG4gICAgICAgIGkgPSAxO1xuICAgICAgfVxuICAgICAgaWYgKGkgJiYgKGZuID0gbm9kZVthY3Rpb24gKyBDQUxMQkFDS10pKSBmbi5jYWxsKG5vZGUpO1xuICAgIH1cbiAgfVxuICBcbiAgXG4gIFxuICAvLyBWMSBpbiBkYSBIb3VzZSFcbiAgZnVuY3Rpb24gQ3VzdG9tRWxlbWVudFJlZ2lzdHJ5KCkge31cbiAgXG4gIEN1c3RvbUVsZW1lbnRSZWdpc3RyeS5wcm90b3R5cGUgPSB7XG4gICAgY29uc3RydWN0b3I6IEN1c3RvbUVsZW1lbnRSZWdpc3RyeSxcbiAgICAvLyBhIHdvcmthcm91bmQgZm9yIHRoZSBzdHViYm9ybiBXZWJLaXRcbiAgICBkZWZpbmU6IHVzYWJsZUN1c3RvbUVsZW1lbnRzID9cbiAgICAgIGZ1bmN0aW9uIChuYW1lLCBDbGFzcywgb3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucykge1xuICAgICAgICAgIENFUkRlZmluZShuYW1lLCBDbGFzcywgb3B0aW9ucyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIE5BTUUgPSBuYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgY29uc3RydWN0b3JzW05BTUVdID0ge1xuICAgICAgICAgICAgY29uc3RydWN0b3I6IENsYXNzLFxuICAgICAgICAgICAgY3JlYXRlOiBbTkFNRV1cbiAgICAgICAgICB9O1xuICAgICAgICAgIG5vZGVOYW1lcy5zZXQoQ2xhc3MsIE5BTUUpO1xuICAgICAgICAgIGN1c3RvbUVsZW1lbnRzLmRlZmluZShuYW1lLCBDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgIH0gOlxuICAgICAgQ0VSRGVmaW5lLFxuICAgIGdldDogdXNhYmxlQ3VzdG9tRWxlbWVudHMgP1xuICAgICAgZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGN1c3RvbUVsZW1lbnRzLmdldChuYW1lKSB8fCBnZXQobmFtZSk7XG4gICAgICB9IDpcbiAgICAgIGdldCxcbiAgICB3aGVuRGVmaW5lZDogdXNhYmxlQ3VzdG9tRWxlbWVudHMgP1xuICAgICAgZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmFjZShbXG4gICAgICAgICAgY3VzdG9tRWxlbWVudHMud2hlbkRlZmluZWQobmFtZSksXG4gICAgICAgICAgd2hlbkRlZmluZWQobmFtZSlcbiAgICAgICAgXSk7XG4gICAgICB9IDpcbiAgICAgIHdoZW5EZWZpbmVkXG4gIH07XG4gIFxuICBmdW5jdGlvbiBDRVJEZWZpbmUobmFtZSwgQ2xhc3MsIG9wdGlvbnMpIHtcbiAgICB2YXJcbiAgICAgIGlzID0gb3B0aW9ucyAmJiBvcHRpb25zW0VYVEVORFNdIHx8ICcnLFxuICAgICAgQ1Byb3RvID0gQ2xhc3MucHJvdG90eXBlLFxuICAgICAgcHJvdG8gPSBjcmVhdGUoQ1Byb3RvKSxcbiAgICAgIGF0dHJpYnV0ZXMgPSBDbGFzcy5vYnNlcnZlZEF0dHJpYnV0ZXMgfHwgZW1wdHksXG4gICAgICBkZWZpbml0aW9uID0ge3Byb3RvdHlwZTogcHJvdG99XG4gICAgO1xuICAgIC8vIFRPRE86IGlzIHRoaXMgbmVlZGVkIGF0IGFsbCBzaW5jZSBpdCdzIGluaGVyaXRlZD9cbiAgICAvLyBkZWZpbmVQcm9wZXJ0eShwcm90bywgJ2NvbnN0cnVjdG9yJywge3ZhbHVlOiBDbGFzc30pO1xuICAgIHNhZmVQcm9wZXJ0eShwcm90bywgQ1JFQVRFRF9DQUxMQkFDSywge1xuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChqdXN0Q3JlYXRlZCkganVzdENyZWF0ZWQgPSBmYWxzZTtcbiAgICAgICAgICBlbHNlIGlmICghdGhpc1tEUkVDRVYxXSkge1xuICAgICAgICAgICAgdGhpc1tEUkVDRVYxXSA9IHRydWU7XG4gICAgICAgICAgICBuZXcgQ2xhc3ModGhpcyk7XG4gICAgICAgICAgICBpZiAoQ1Byb3RvW0NSRUFURURfQ0FMTEJBQ0tdKVxuICAgICAgICAgICAgICBDUHJvdG9bQ1JFQVRFRF9DQUxMQkFDS10uY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIHZhciBpbmZvID0gY29uc3RydWN0b3JzW25vZGVOYW1lcy5nZXQoQ2xhc3MpXTtcbiAgICAgICAgICAgIGlmICghdXNhYmxlQ3VzdG9tRWxlbWVudHMgfHwgaW5mby5jcmVhdGUubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICBub3RpZnlBdHRyaWJ1dGVzKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBzYWZlUHJvcGVydHkocHJvdG8sIEFUVFJJQlVURV9DSEFOR0VEX0NBTExCQUNLLCB7XG4gICAgICB2YWx1ZTogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgaWYgKC0xIDwgaW5kZXhPZi5jYWxsKGF0dHJpYnV0ZXMsIG5hbWUpKVxuICAgICAgICAgIENQcm90b1tBVFRSSUJVVEVfQ0hBTkdFRF9DQUxMQkFDS10uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoQ1Byb3RvW0NPTk5FQ1RFRF9DQUxMQkFDS10pIHtcbiAgICAgIHNhZmVQcm9wZXJ0eShwcm90bywgQVRUQUNIRURfQ0FMTEJBQ0ssIHtcbiAgICAgICAgdmFsdWU6IENQcm90b1tDT05ORUNURURfQ0FMTEJBQ0tdXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKENQcm90b1tESVNDT05ORUNURURfQ0FMTEJBQ0tdKSB7XG4gICAgICBzYWZlUHJvcGVydHkocHJvdG8sIERFVEFDSEVEX0NBTExCQUNLLCB7XG4gICAgICAgIHZhbHVlOiBDUHJvdG9bRElTQ09OTkVDVEVEX0NBTExCQUNLXVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChpcykgZGVmaW5pdGlvbltFWFRFTkRTXSA9IGlzO1xuICAgIG5hbWUgPSBuYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgY29uc3RydWN0b3JzW25hbWVdID0ge1xuICAgICAgY29uc3RydWN0b3I6IENsYXNzLFxuICAgICAgY3JlYXRlOiBpcyA/IFtpcywgc2Vjb25kQXJndW1lbnQobmFtZSldIDogW25hbWVdXG4gICAgfTtcbiAgICBub2RlTmFtZXMuc2V0KENsYXNzLCBuYW1lKTtcbiAgICBkb2N1bWVudFtSRUdJU1RFUl9FTEVNRU5UXShuYW1lLnRvTG93ZXJDYXNlKCksIGRlZmluaXRpb24pO1xuICAgIHdoZW5EZWZpbmVkKG5hbWUpO1xuICAgIHdhaXRpbmdMaXN0W25hbWVdLnIoKTtcbiAgfVxuICBcbiAgZnVuY3Rpb24gZ2V0KG5hbWUpIHtcbiAgICB2YXIgaW5mbyA9IGNvbnN0cnVjdG9yc1tuYW1lLnRvVXBwZXJDYXNlKCldO1xuICAgIHJldHVybiBpbmZvICYmIGluZm8uY29uc3RydWN0b3I7XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIGdldElzKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnID9cbiAgICAgICAgb3B0aW9ucyA6IChvcHRpb25zICYmIG9wdGlvbnMuaXMgfHwgJycpO1xuICB9XG4gIFxuICBmdW5jdGlvbiBub3RpZnlBdHRyaWJ1dGVzKHNlbGYpIHtcbiAgICB2YXJcbiAgICAgIGNhbGxiYWNrID0gc2VsZltBVFRSSUJVVEVfQ0hBTkdFRF9DQUxMQkFDS10sXG4gICAgICBhdHRyaWJ1dGVzID0gY2FsbGJhY2sgPyBzZWxmLmF0dHJpYnV0ZXMgOiBlbXB0eSxcbiAgICAgIGkgPSBhdHRyaWJ1dGVzLmxlbmd0aCxcbiAgICAgIGF0dHJpYnV0ZVxuICAgIDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBhdHRyaWJ1dGUgPSAgYXR0cmlidXRlc1tpXTsgLy8gfHwgYXR0cmlidXRlcy5pdGVtKGkpO1xuICAgICAgY2FsbGJhY2suY2FsbChcbiAgICAgICAgc2VsZixcbiAgICAgICAgYXR0cmlidXRlLm5hbWUgfHwgYXR0cmlidXRlLm5vZGVOYW1lLFxuICAgICAgICBudWxsLFxuICAgICAgICBhdHRyaWJ1dGUudmFsdWUgfHwgYXR0cmlidXRlLm5vZGVWYWx1ZVxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIHdoZW5EZWZpbmVkKG5hbWUpIHtcbiAgICBuYW1lID0gbmFtZS50b1VwcGVyQ2FzZSgpO1xuICAgIGlmICghKG5hbWUgaW4gd2FpdGluZ0xpc3QpKSB7XG4gICAgICB3YWl0aW5nTGlzdFtuYW1lXSA9IHt9O1xuICAgICAgd2FpdGluZ0xpc3RbbmFtZV0ucCA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgIHdhaXRpbmdMaXN0W25hbWVdLnIgPSByZXNvbHZlO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB3YWl0aW5nTGlzdFtuYW1lXS5wO1xuICB9XG4gIFxuICBmdW5jdGlvbiBwb2x5ZmlsbFYxKCkge1xuICAgIGlmIChjdXN0b21FbGVtZW50cykgZGVsZXRlIHdpbmRvdy5jdXN0b21FbGVtZW50cztcbiAgICBkZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdjdXN0b21FbGVtZW50cycsIHtcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBuZXcgQ3VzdG9tRWxlbWVudFJlZ2lzdHJ5KClcbiAgICB9KTtcbiAgICBkZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdDdXN0b21FbGVtZW50UmVnaXN0cnknLCB7XG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogQ3VzdG9tRWxlbWVudFJlZ2lzdHJ5XG4gICAgfSk7XG4gICAgZm9yICh2YXJcbiAgICAgIHBhdGNoQ2xhc3MgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB2YXIgQ2xhc3MgPSB3aW5kb3dbbmFtZV07XG4gICAgICAgIGlmIChDbGFzcykge1xuICAgICAgICAgIHdpbmRvd1tuYW1lXSA9IGZ1bmN0aW9uIEN1c3RvbUVsZW1lbnRzVjEoc2VsZikge1xuICAgICAgICAgICAgdmFyIGluZm8sIGlzTmF0aXZlO1xuICAgICAgICAgICAgaWYgKCFzZWxmKSBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIGlmICghc2VsZltEUkVDRVYxXSkge1xuICAgICAgICAgICAgICBqdXN0Q3JlYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgIGluZm8gPSBjb25zdHJ1Y3RvcnNbbm9kZU5hbWVzLmdldChzZWxmLmNvbnN0cnVjdG9yKV07XG4gICAgICAgICAgICAgIGlzTmF0aXZlID0gdXNhYmxlQ3VzdG9tRWxlbWVudHMgJiYgaW5mby5jcmVhdGUubGVuZ3RoID09PSAxO1xuICAgICAgICAgICAgICBzZWxmID0gaXNOYXRpdmUgP1xuICAgICAgICAgICAgICAgIFJlZmxlY3QuY29uc3RydWN0KENsYXNzLCBlbXB0eSwgaW5mby5jb25zdHJ1Y3RvcikgOlxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQuYXBwbHkoZG9jdW1lbnQsIGluZm8uY3JlYXRlKTtcbiAgICAgICAgICAgICAgc2VsZltEUkVDRVYxXSA9IHRydWU7XG4gICAgICAgICAgICAgIGp1c3RDcmVhdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgIGlmICghaXNOYXRpdmUpIG5vdGlmeUF0dHJpYnV0ZXMoc2VsZik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgICAgICB9O1xuICAgICAgICAgIHdpbmRvd1tuYW1lXS5wcm90b3R5cGUgPSBDbGFzcy5wcm90b3R5cGU7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIENsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHdpbmRvd1tuYW1lXTtcbiAgICAgICAgICB9IGNhdGNoKFdlYktpdCkge1xuICAgICAgICAgICAgZml4R2V0Q2xhc3MgPSB0cnVlO1xuICAgICAgICAgICAgZGVmaW5lUHJvcGVydHkoQ2xhc3MsIERSRUNFVjEsIHt2YWx1ZTogd2luZG93W25hbWVdfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgQ2xhc3NlcyA9IGh0bWxDbGFzcy5nZXQoL15IVE1MW0EtWl0qW2Etel0vKSxcbiAgICAgIGkgPSBDbGFzc2VzLmxlbmd0aDtcbiAgICAgIGktLTtcbiAgICAgIHBhdGNoQ2xhc3MoQ2xhc3Nlc1tpXSlcbiAgICApIHt9XG4gICAgKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgPSBmdW5jdGlvbiAobmFtZSwgb3B0aW9ucykge1xuICAgICAgdmFyIGlzID0gZ2V0SXMob3B0aW9ucyk7XG4gICAgICByZXR1cm4gaXMgP1xuICAgICAgICBwYXRjaGVkQ3JlYXRlRWxlbWVudC5jYWxsKHRoaXMsIG5hbWUsIHNlY29uZEFyZ3VtZW50KGlzKSkgOlxuICAgICAgICBwYXRjaGVkQ3JlYXRlRWxlbWVudC5jYWxsKHRoaXMsIG5hbWUpO1xuICAgIH0pO1xuICAgIGlmICghVjApIHtcbiAgICAgIGp1c3RTZXR1cCA9IHRydWU7XG4gICAgICBkb2N1bWVudFtSRUdJU1RFUl9FTEVNRU5UXSgnJyk7XG4gICAgfVxuICB9XG4gIFxuICAvLyBpZiBjdXN0b21FbGVtZW50cyBpcyBub3QgdGhlcmUgYXQgYWxsXG4gIGlmICghY3VzdG9tRWxlbWVudHMgfHwgcG9seWZpbGwgPT09ICdmb3JjZScpIHBvbHlmaWxsVjEoKTtcbiAgZWxzZSB7XG4gICAgLy8gaWYgYXZhaWxhYmxlIHRlc3QgZXh0ZW5kcyB3b3JrIGFzIGV4cGVjdGVkXG4gICAgdHJ5IHtcbiAgICAgIChmdW5jdGlvbiAoRFJFLCBvcHRpb25zLCBuYW1lKSB7XG4gICAgICAgIG9wdGlvbnNbRVhURU5EU10gPSAnYSc7XG4gICAgICAgIERSRS5wcm90b3R5cGUgPSBjcmVhdGUoSFRNTEFuY2hvckVsZW1lbnQucHJvdG90eXBlKTtcbiAgICAgICAgRFJFLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IERSRTtcbiAgICAgICAgd2luZG93LmN1c3RvbUVsZW1lbnRzLmRlZmluZShuYW1lLCBEUkUsIG9wdGlvbnMpO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgZ2V0QXR0cmlidXRlLmNhbGwoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScsIHtpczogbmFtZX0pLCAnaXMnKSAhPT0gbmFtZSB8fFxuICAgICAgICAgICh1c2FibGVDdXN0b21FbGVtZW50cyAmJiBnZXRBdHRyaWJ1dGUuY2FsbChuZXcgRFJFKCksICdpcycpICE9PSBuYW1lKVxuICAgICAgICApIHtcbiAgICAgICAgICB0aHJvdyBvcHRpb25zO1xuICAgICAgICB9XG4gICAgICB9KFxuICAgICAgICBmdW5jdGlvbiBEUkUoKSB7XG4gICAgICAgICAgcmV0dXJuIFJlZmxlY3QuY29uc3RydWN0KEhUTUxBbmNob3JFbGVtZW50LCBbXSwgRFJFKTtcbiAgICAgICAgfSxcbiAgICAgICAge30sXG4gICAgICAgICdkb2N1bWVudC1yZWdpc3Rlci1lbGVtZW50LWEnXG4gICAgICApKTtcbiAgICB9IGNhdGNoKG9fTykge1xuICAgICAgLy8gb3IgZm9yY2UgdGhlIHBvbHlmaWxsIGlmIG5vdFxuICAgICAgLy8gYW5kIGtlZXAgaW50ZXJuYWwgb3JpZ2luYWwgcmVmZXJlbmNlXG4gICAgICBwb2x5ZmlsbFYxKCk7XG4gICAgfVxuICB9XG4gIFxuICB0cnkge1xuICAgIGNyZWF0ZUVsZW1lbnQuY2FsbChkb2N1bWVudCwgJ2EnLCAnYScpO1xuICB9IGNhdGNoKEZpcmVGb3gpIHtcbiAgICBzZWNvbmRBcmd1bWVudCA9IGZ1bmN0aW9uIChpcykge1xuICAgICAgcmV0dXJuIHtpczogaXMudG9Mb3dlckNhc2UoKX07XG4gICAgfTtcbiAgfVxuICBcbn1cblxuZXhwb3J0cy5pbnN0YWxsQ3VzdG9tRWxlbWVudHMgPSBpbnN0YWxsQ3VzdG9tRWxlbWVudHM7XG5cbiIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgRVM2L1Byb21pc2VzIEErIFByb21pc2UgaW5zdGFuY2UuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGZ1bmN0aW9uKCo9KSwgZnVuY3Rpb24gKCo9KSl9IHJlc29sdmVyXG4gKi9cbmZ1bmN0aW9uIFByb21pc2UocmVzb2x2ZXIpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFByb21pc2UpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ29uc3RydWN0b3IgUHJvbWlzZSByZXF1aXJlcyBgbmV3YCcpO1xuICB9XG4gIGlmICghaXNGdW5jdGlvbihyZXNvbHZlcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdNdXN0IHBhc3MgcmVzb2x2ZXIgZnVuY3Rpb24nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7ZnVuY3Rpb24odGhpczpQcm9taXNlLCo9LGZ1bmN0aW9uKCo9KSxmdW5jdGlvbigqPSksRGVmZXJyZWQpOiFQcm9taXNlfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5fc3RhdGUgPSBQZW5kaW5nUHJvbWlzZTtcblxuICAvKipcbiAgICogQHR5cGUgeyp9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLl92YWx1ZSA9IFtdO1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuX2lzQ2hhaW5FbmQgPSB0cnVlO1xuXG4gIGRvUmVzb2x2ZShcbiAgICB0aGlzLFxuICAgIGFkb3B0ZXIodGhpcywgRnVsZmlsbGVkUHJvbWlzZSksXG4gICAgYWRvcHRlcih0aGlzLCBSZWplY3RlZFByb21pc2UpLFxuICAgIHsgdGhlbjogcmVzb2x2ZXIgfVxuICApO1xufVxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICBQdWJsaWMgSW5zdGFuY2UgTWV0aG9kc1xuICoqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBwcm9taXNlIGluc3RhbmNlIHRoYXQgd2lsbCByZWNlaXZlIHRoZSByZXN1bHQgb2YgdGhpcyBwcm9taXNlXG4gKiBhcyBpbnB1dHMgdG8gdGhlIG9uRnVsZmlsbGVkIG9yIG9uUmVqZWN0ZWQgY2FsbGJhY2tzLlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKil9IG9uRnVsZmlsbGVkXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCopfSBvblJlamVjdGVkXG4gKi9cblByb21pc2UucHJvdG90eXBlLnRoZW4gPSBmdW5jdGlvbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkge1xuICBvbkZ1bGZpbGxlZCA9IGlzRnVuY3Rpb24ob25GdWxmaWxsZWQpID8gb25GdWxmaWxsZWQgOiB2b2lkIDA7XG4gIG9uUmVqZWN0ZWQgPSBpc0Z1bmN0aW9uKG9uUmVqZWN0ZWQpID8gb25SZWplY3RlZCA6IHZvaWQgMDtcblxuICBpZiAob25GdWxmaWxsZWQgfHwgb25SZWplY3RlZCkge1xuICAgIHRoaXMuX2lzQ2hhaW5FbmQgPSBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0aGlzLl9zdGF0ZShcbiAgICB0aGlzLl92YWx1ZSxcbiAgICBvbkZ1bGZpbGxlZCxcbiAgICBvblJlamVjdGVkXG4gICk7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgcHJvbWlzZSB0aGF0IHdpbGwgaGFuZGxlIHRoZSByZWplY3RlZCBzdGF0ZSBvZiB0aGlzIHByb21pc2UuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbigqKX0gb25SZWplY3RlZFxuICogQHJldHVybnMgeyFQcm9taXNlfVxuICovXG5Qcm9taXNlLnByb3RvdHlwZS5jYXRjaCA9IGZ1bmN0aW9uKG9uUmVqZWN0ZWQpIHtcbiAgcmV0dXJuIHRoaXMudGhlbih2b2lkIDAsIG9uUmVqZWN0ZWQpO1xufTtcblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgUHVibGljIFN0YXRpYyBNZXRob2RzXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVsZmlsbGVkIFByb21pc2Ugb2YgdmFsdWUuIElmIHZhbHVlIGlzIGl0c2VsZiBhIHRoZW4tYWJsZSxcbiAqIHJlc29sdmVzIHdpdGggdGhlIHRoZW4tYWJsZSdzIHZhbHVlLlxuICpcbiAqIEB0aGlzIHshUHJvbWlzZX1cbiAqIEBwYXJhbSB7Kj19IHZhbHVlXG4gKiBAcmV0dXJucyB7IVByb21pc2V9XG4gKi9cblByb21pc2UucmVzb2x2ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG4gIHZhciBwcm9taXNlO1xuXG4gIGlmIChpc09iamVjdCh2YWx1ZSkgJiYgdmFsdWUgaW5zdGFuY2VvZiB0aGlzKSB7XG4gICAgcHJvbWlzZSA9IHZhbHVlO1xuICB9IGVsc2Uge1xuICAgIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24ocmVzb2x2ZSkge1xuICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZX0gKi8ocHJvbWlzZSk7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSByZWplY3RlZCBQcm9taXNlIG9mIHJlYXNvbi5cbiAqXG4gKiBAdGhpcyB7IVByb21pc2V9XG4gKiBAcGFyYW0geyo9fSByZWFzb25cbiAqIEByZXR1cm5zIHshUHJvbWlzZX1cbiAqL1xuUHJvbWlzZS5yZWplY3QgPSBmdW5jdGlvbihyZWFzb24pIHtcbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcbiAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24oXywgcmVqZWN0KSB7XG4gICAgcmVqZWN0KHJlYXNvbik7XG4gIH0pO1xuXG4gIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlfSAqLyhwcm9taXNlKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIFByb21pc2UgdGhhdCB3aWxsIHJlc29sdmUgd2l0aCBhbiBhcnJheSBvZiB0aGUgdmFsdWVzIG9mIHRoZVxuICogcGFzc2VkIGluIHByb21pc2VzLiBJZiBhbnkgcHJvbWlzZSByZWplY3RzLCB0aGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsXG4gKiByZWplY3QuXG4gKlxuICogQHRoaXMgeyFQcm9taXNlfVxuICogQHBhcmFtIHshQXJyYXk8UHJvbWlzZXwqPn0gcHJvbWlzZXNcbiAqIEByZXR1cm5zIHshUHJvbWlzZX1cbiAqL1xuUHJvbWlzZS5hbGwgPSBmdW5jdGlvbihwcm9taXNlcykge1xuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgbGVuZ3RoID0gcHJvbWlzZXMubGVuZ3RoO1xuICAgIHZhciB2YWx1ZXMgPSBuZXcgQXJyYXkobGVuZ3RoKTtcblxuICAgIGlmIChsZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiByZXNvbHZlKHZhbHVlcyk7XG4gICAgfVxuXG4gICAgZWFjaChwcm9taXNlcywgZnVuY3Rpb24ocHJvbWlzZSwgaW5kZXgpIHtcbiAgICAgIENvbnN0cnVjdG9yLnJlc29sdmUocHJvbWlzZSkudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICB2YWx1ZXNbaW5kZXhdID0gdmFsdWU7XG4gICAgICAgIGlmICgtLWxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJlc29sdmUodmFsdWVzKTtcbiAgICAgICAgfVxuICAgICAgfSwgcmVqZWN0KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2V9ICovKHByb21pc2UpO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgUHJvbWlzZSB0aGF0IHdpbGwgcmVzb2x2ZSBvciByZWplY3QgYmFzZWQgb24gdGhlIGZpcnN0XG4gKiByZXNvbHZlZCBvciByZWplY3RlZCBwcm9taXNlLlxuICpcbiAqIEB0aGlzIHshUHJvbWlzZX1cbiAqIEBwYXJhbSB7IUFycmF5PFByb21pc2V8Kj59IHByb21pc2VzXG4gKiBAcmV0dXJucyB7IVByb21pc2V9XG4gKi9cblByb21pc2UucmFjZSA9IGZ1bmN0aW9uKHByb21pc2VzKSB7XG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG4gIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvbWlzZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIENvbnN0cnVjdG9yLnJlc29sdmUocHJvbWlzZXNbaV0pLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlfSAqLyhwcm9taXNlKTtcbn07XG5cbnZhciBvblBvc3NpYmx5VW5oYW5kbGVkUmVqZWN0aW9uID0gZnVuY3Rpb24ocmVhc29uLCBwcm9taXNlKSB7XG4gIHRocm93IHJlYXNvbjtcbn07XG5cbi8qKlxuICogQW4gaW50ZXJuYWwgdXNlIHN0YXRpYyBmdW5jdGlvbi5cbiAqL1xuUHJvbWlzZS5fb3ZlcnJpZGVVbmhhbmRsZWRFeGNlcHRpb25IYW5kbGVyID0gZnVuY3Rpb24oaGFuZGxlcikge1xuICBvblBvc3NpYmx5VW5oYW5kbGVkUmVqZWN0aW9uID0gaGFuZGxlcjtcbn07XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gIFByaXZhdGUgZnVuY3Rpb25zXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuLyoqXG4gKiBUaGUgRnVsZmlsbGVkIFByb21pc2Ugc3RhdGUuIENhbGxzIG9uRnVsZmlsbGVkIHdpdGggdGhlIHJlc29sdmVkIHZhbHVlIG9mXG4gKiB0aGlzIHByb21pc2UsIGNyZWF0aW5nIGEgbmV3IHByb21pc2UuXG4gKlxuICogSWYgdGhlcmUgaXMgbm8gb25GdWxmaWxsZWQsIHJldHVybnMgdGhlIGN1cnJlbnQgcHJvbWlzZSB0byBhdm9pZCBhbiBwcm9taXNlXG4gKiBpbnN0YW5jZS5cbiAqXG4gKiBAdGhpcyB7IVByb21pc2V9IFRoZSBjdXJyZW50IHByb21pc2VcbiAqIEBwYXJhbSB7Kj19IHZhbHVlIFRoZSBjdXJyZW50IHByb21pc2UncyByZXNvbHZlZCB2YWx1ZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKj0pPX0gb25GdWxmaWxsZWRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKj0pPX0gdW51c2VkXG4gKiBAcGFyYW0ge0RlZmVycmVkfSBkZWZlcnJlZCBBIGRlZmVycmVkIG9iamVjdCB0aGF0IGhvbGRzIGEgcHJvbWlzZSBhbmQgaXRzXG4gKiAgICAgcmVzb2x2ZSBhbmQgcmVqZWN0IGZ1bmN0aW9ucy4gSXQgSVMgTk9UIHBhc3NlZCB3aGVuIGNhbGxlZCBmcm9tXG4gKiAgICAgUHJvbWlzZSN0aGVuIHRvIHNhdmUgYW4gb2JqZWN0IGluc3RhbmNlIChzaW5jZSB3ZSBtYXkgcmV0dXJuIHRoZSBjdXJyZW50XG4gKiAgICAgcHJvbWlzZSkuIEl0IElTIHBhc3NlZCBpbiB3aGVuIGFkb3B0aW5nIHRoZSBGdWxmaWxsZWQgc3RhdGUgZnJvbSB0aGVcbiAqICAgICBQZW5kaW5nIHN0YXRlLlxuICogQHJldHVybnMgeyFQcm9taXNlfVxuICovXG5mdW5jdGlvbiBGdWxmaWxsZWRQcm9taXNlKHZhbHVlLCBvbkZ1bGZpbGxlZCwgdW51c2VkLCBkZWZlcnJlZCkge1xuICBpZiAoIW9uRnVsZmlsbGVkKSB7XG4gICAgZGVmZXJyZWRBZG9wdChkZWZlcnJlZCwgRnVsZmlsbGVkUHJvbWlzZSwgdmFsdWUpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGlmICghZGVmZXJyZWQpIHtcbiAgICBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCh0aGlzLmNvbnN0cnVjdG9yKTtcbiAgfVxuICBkZWZlcih0cnlDYXRjaERlZmVycmVkKGRlZmVycmVkLCBvbkZ1bGZpbGxlZCwgdmFsdWUpKTtcbiAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59XG5cbi8qKlxuICogVGhlIFJlamVjdGVkIFByb21pc2Ugc3RhdGUuIENhbGxzIG9uUmVqZWN0ZWQgd2l0aCB0aGUgcmVzb2x2ZWQgdmFsdWUgb2ZcbiAqIHRoaXMgcHJvbWlzZSwgY3JlYXRpbmcgYSBuZXcgcHJvbWlzZS5cbiAqXG4gKiBJZiB0aGVyZSBpcyBubyBvblJlamVjdGVkLCByZXR1cm5zIHRoZSBjdXJyZW50IHByb21pc2UgdG8gYXZvaWQgYW4gcHJvbWlzZVxuICogaW5zdGFuY2UuXG4gKlxuICogQHRoaXMgeyFQcm9taXNlfSBUaGUgY3VycmVudCBwcm9taXNlXG4gKiBAcGFyYW0geyo9fSByZWFzb24gVGhlIGN1cnJlbnQgcHJvbWlzZSdzIHJlamVjdGlvbiByZWFzb24uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCo9KT19IHVudXNlZFxuICogQHBhcmFtIHtmdW5jdGlvbigqPSk9fSBvblJlamVjdGVkXG4gKiBAcGFyYW0ge0RlZmVycmVkfSBkZWZlcnJlZCBBIGRlZmVycmVkIG9iamVjdCB0aGF0IGhvbGRzIGEgcHJvbWlzZSBhbmQgaXRzXG4gKiAgICAgcmVzb2x2ZSBhbmQgcmVqZWN0IGZ1bmN0aW9ucy4gSXQgSVMgTk9UIHBhc3NlZCB3aGVuIGNhbGxlZCBmcm9tXG4gKiAgICAgUHJvbWlzZSN0aGVuIHRvIHNhdmUgYW4gb2JqZWN0IGluc3RhbmNlIChzaW5jZSB3ZSBtYXkgcmV0dXJuIHRoZSBjdXJyZW50XG4gKiAgICAgcHJvbWlzZSkuIEl0IElTIHBhc3NlZCBpbiB3aGVuIGFkb3B0aW5nIHRoZSBSZWplY3RlZCBzdGF0ZSBmcm9tIHRoZVxuICogICAgIFBlbmRpbmcgc3RhdGUuXG4gKiBAcmV0dXJucyB7IVByb21pc2V9XG4gKi9cbmZ1bmN0aW9uIFJlamVjdGVkUHJvbWlzZShyZWFzb24sIHVudXNlZCwgb25SZWplY3RlZCwgZGVmZXJyZWQpIHtcbiAgaWYgKCFvblJlamVjdGVkKSB7XG4gICAgZGVmZXJyZWRBZG9wdChkZWZlcnJlZCwgUmVqZWN0ZWRQcm9taXNlLCByZWFzb24pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGlmICghZGVmZXJyZWQpIHtcbiAgICBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCh0aGlzLmNvbnN0cnVjdG9yKTtcbiAgfVxuICBkZWZlcih0cnlDYXRjaERlZmVycmVkKGRlZmVycmVkLCBvblJlamVjdGVkLCByZWFzb24pKTtcbiAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59XG5cbi8qKlxuICogVGhlIFBlbmRpbmcgUHJvbWlzZSBzdGF0ZS4gRXZlbnR1YWxseSBjYWxscyBvbkZ1bGZpbGxlZCBvbmNlIHRoZSBwcm9taXNlIGhhc1xuICogcmVzb2x2ZWQsIG9yIG9uUmVqZWN0ZWQgb25jZSB0aGUgcHJvbWlzZSByZWplY3RzLlxuICpcbiAqIElmIHRoZXJlIGlzIG5vIG9uRnVsZmlsbGVkIGFuZCBubyBvblJlamVjdGVkLCByZXR1cm5zIHRoZSBjdXJyZW50IHByb21pc2UgdG9cbiAqIGF2b2lkIGFuIHByb21pc2UgaW5zdGFuY2UuXG4gKlxuICogQHRoaXMgeyFQcm9taXNlfSBUaGUgY3VycmVudCBwcm9taXNlXG4gKiBAcGFyYW0geyo9fSBxdWV1ZSBUaGUgY3VycmVudCBwcm9taXNlJ3MgcGVuZGluZyBwcm9taXNlcyBxdWV1ZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKj0pPX0gb25GdWxmaWxsZWRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKj0pPX0gb25SZWplY3RlZFxuICogQHBhcmFtIHtEZWZlcnJlZH0gZGVmZXJyZWQgQSBkZWZlcnJlZCBvYmplY3QgdGhhdCBob2xkcyBhIHByb21pc2UgYW5kIGl0c1xuICogICAgIHJlc29sdmUgYW5kIHJlamVjdCBmdW5jdGlvbnMuIEl0IElTIE5PVCBwYXNzZWQgd2hlbiBjYWxsZWQgZnJvbVxuICogICAgIFByb21pc2UjdGhlbiB0byBzYXZlIGFuIG9iamVjdCBpbnN0YW5jZSAoc2luY2Ugd2UgbWF5IHJldHVybiB0aGUgY3VycmVudFxuICogICAgIHByb21pc2UpLiBJdCBJUyBwYXNzZWQgaW4gd2hlbiBhZG9wdGluZyB0aGUgUGVuZGluZyBzdGF0ZSBmcm9tIHRoZVxuICogICAgIFBlbmRpbmcgc3RhdGUgb2YgYW5vdGhlciBwcm9taXNlLlxuICogQHJldHVybnMgeyFQcm9taXNlfVxuICovXG5mdW5jdGlvbiBQZW5kaW5nUHJvbWlzZShxdWV1ZSwgb25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIGRlZmVycmVkKSB7XG4gIGlmICghZGVmZXJyZWQpIHtcbiAgICBpZiAoIW9uRnVsZmlsbGVkICYmICFvblJlamVjdGVkKSB7IHJldHVybiB0aGlzOyB9XG4gICAgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQodGhpcy5jb25zdHJ1Y3Rvcik7XG4gIH1cbiAgcXVldWUucHVzaCh7XG4gICAgZGVmZXJyZWQ6IGRlZmVycmVkLFxuICAgIG9uRnVsZmlsbGVkOiBvbkZ1bGZpbGxlZCB8fCBkZWZlcnJlZC5yZXNvbHZlLFxuICAgIG9uUmVqZWN0ZWQ6IG9uUmVqZWN0ZWQgfHwgZGVmZXJyZWQucmVqZWN0XG4gIH0pO1xuICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbn1cblxuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgZGVmZXJyZWQgaW5zdGFuY2UgdGhhdCBob2xkcyBhIHByb21pc2UgYW5kIGl0cyByZXNvbHZlIGFuZFxuICogcmVqZWN0IGZ1bmN0aW9ucy5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gRGVmZXJyZWQoUHJvbWlzZSkge1xuICB2YXIgZGVmZXJyZWQgPSB0aGlzO1xuICAvKiogQHR5cGUgeyFQcm9taXNlfSAqL1xuICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAvKiogQHR5cGUge2Z1bmN0aW9uKCo9KX0gKi9cbiAgICBkZWZlcnJlZC5yZXNvbHZlID0gcmVzb2x2ZTtcblxuICAgIC8qKiBAdHlwZSB7ZnVuY3Rpb24oKj0pfSAqL1xuICAgIGRlZmVycmVkLnJlamVjdCA9IHJlamVjdDtcbiAgfSk7XG4gIHJldHVybiBkZWZlcnJlZDtcbn1cblxuLyoqXG4gKiBUcmFuc2l0aW9ucyB0aGUgc3RhdGUgb2YgcHJvbWlzZSB0byBhbm90aGVyIHN0YXRlLiBUaGlzIGlzIG9ubHkgZXZlciBjYWxsZWRcbiAqIG9uIHdpdGggYSBwcm9taXNlIHRoYXQgaXMgY3VycmVudGx5IGluIHRoZSBQZW5kaW5nIHN0YXRlLlxuICpcbiAqIEBwYXJhbSB7IVByb21pc2V9IHByb21pc2VcbiAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczpQcm9taXNlLCo9LGZ1bmN0aW9uKCo9KSxmdW5jdGlvbigqPSksRGVmZXJyZWQpOiFQcm9taXNlfSBzdGF0ZVxuICogQHBhcmFtIHsqPX0gdmFsdWVcbiAqL1xuZnVuY3Rpb24gYWRvcHQocHJvbWlzZSwgc3RhdGUsIHZhbHVlLCBhZG9wdGVlKSB7XG4gIHZhciBxdWV1ZSA9IHByb21pc2UuX3ZhbHVlO1xuICBwcm9taXNlLl9zdGF0ZSA9IHN0YXRlO1xuICBwcm9taXNlLl92YWx1ZSA9IHZhbHVlO1xuXG4gIGlmIChhZG9wdGVlICYmIHN0YXRlID09PSBQZW5kaW5nUHJvbWlzZSkge1xuICAgIGFkb3B0ZWUuX3N0YXRlKHZhbHVlLCB2b2lkIDAsIHZvaWQgMCwge1xuICAgICAgcHJvbWlzZTogcHJvbWlzZSxcbiAgICAgIHJlc29sdmU6IHZvaWQgMCxcbiAgICAgIHJlamVjdDogdm9pZCAwXG4gICAgfSk7XG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIG5leHQgPSBxdWV1ZVtpXTtcbiAgICBwcm9taXNlLl9zdGF0ZShcbiAgICAgIHZhbHVlLFxuICAgICAgbmV4dC5vbkZ1bGZpbGxlZCxcbiAgICAgIG5leHQub25SZWplY3RlZCxcbiAgICAgIG5leHQuZGVmZXJyZWRcbiAgICApO1xuICB9XG4gIHF1ZXVlLmxlbmd0aCA9IDA7XG5cbiAgLy8gRGV0ZXJtaW5lIGlmIHRoaXMgcmVqZWN0ZWQgcHJvbWlzZSB3aWxsIGJlIFwiaGFuZGxlZFwiLlxuICBpZiAoc3RhdGUgPT09IFJlamVjdGVkUHJvbWlzZSAmJiBwcm9taXNlLl9pc0NoYWluRW5kKSB7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGlmIChwcm9taXNlLl9pc0NoYWluRW5kKSB7XG4gICAgICAgIG9uUG9zc2libHlVbmhhbmRsZWRSZWplY3Rpb24odmFsdWUsIHByb21pc2UpO1xuICAgICAgfVxuICAgIH0sIDApO1xuICB9XG59XG5cbi8qKlxuICogQSBwYXJ0aWFsIGFwcGxpY2F0aW9uIG9mIGFkb3B0LlxuICpcbiAqIEBwYXJhbSB7IVByb21pc2V9IHByb21pc2VcbiAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczpQcm9taXNlLCo9LGZ1bmN0aW9uKCo9KSxmdW5jdGlvbigqPSksRGVmZXJyZWQpOiFQcm9taXNlfSBzdGF0ZVxuICogQHJldHVybnMge2Z1bmN0aW9uKCo9KX1cbiAqL1xuZnVuY3Rpb24gYWRvcHRlcihwcm9taXNlLCBzdGF0ZSkge1xuICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBhZG9wdChwcm9taXNlLCBzdGF0ZSwgdmFsdWUpO1xuICB9O1xufVxuXG4vKipcbiAqIFVwZGF0ZXMgYSBkZWZlcnJlZCBwcm9taXNlcyBzdGF0ZS4gTmVjZXNzYXJ5IGZvciB1cGRhdGluZyBhbiBhZG9wdGluZ1xuICogcHJvbWlzZSdzIHN0YXRlIHdoZW4gdGhlIGFkb3B0ZWUgcmVzb2x2ZXMuXG4gKlxuICogQHBhcmFtIHs/RGVmZXJyZWR9IGRlZmVycmVkXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHRoaXM6UHJvbWlzZSwqPSxmdW5jdGlvbigqPSksZnVuY3Rpb24oKj0pLERlZmVycmVkKTohUHJvbWlzZX0gc3RhdGVcbiAqIEBwYXJhbSB7Kj19IHZhbHVlXG4gKi9cbmZ1bmN0aW9uIGRlZmVycmVkQWRvcHQoZGVmZXJyZWQsIHN0YXRlLCB2YWx1ZSkge1xuICBpZiAoZGVmZXJyZWQpIHtcbiAgICB2YXIgcHJvbWlzZSA9IGRlZmVycmVkLnByb21pc2U7XG4gICAgcHJvbWlzZS5fc3RhdGUgPSBzdGF0ZTtcbiAgICBwcm9taXNlLl92YWx1ZSA9IHZhbHVlO1xuICB9XG59XG5cbi8qKlxuICogQSBuby1vcCBmdW5jdGlvbiB0byBwcmV2ZW50IGRvdWJsZSByZXNvbHZpbmcuXG4gKi9cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG4vKipcbiAqIFRlc3RzIGlmIGZuIGlzIGEgRnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0geyp9IGZuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNGdW5jdGlvbihmbikge1xuICByZXR1cm4gdHlwZW9mIGZuID09PSAnZnVuY3Rpb24nO1xufVxuXG4vKipcbiAqIFRlc3RzIGlmIGZuIGlzIGFuIE9iamVjdFxuICpcbiAqIEBwYXJhbSB7Kn0gb2JqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNPYmplY3Qob2JqKSB7XG4gIHJldHVybiBvYmogPT09IE9iamVjdChvYmopO1xufVxuXG4vKipcbiAqIEl0ZXJhdGVzIG92ZXIgZWFjaCBlbGVtZW50IG9mIGFuIGFycmF5LCBjYWxsaW5nIHRoZSBpdGVyYXRvciB3aXRoIHRoZVxuICogZWxlbWVudCBhbmQgaXRzIGluZGV4LlxuICpcbiAqIEBwYXJhbSB7IUFycmF5fSBjb2xsZWN0aW9uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCo9LG51bWJlcil9IGl0ZXJhdG9yXG4gKi9cbmZ1bmN0aW9uIGVhY2goY29sbGVjdGlvbiwgaXRlcmF0b3IpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2xsZWN0aW9uLmxlbmd0aDsgaSsrKSB7XG4gICAgaXRlcmF0b3IoY29sbGVjdGlvbltpXSwgaSk7XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGF0dGVtcHQgdG8gcmVzb2x2ZSB0aGUgZGVmZXJyZWQgd2l0aCB0aGUgcmV0dXJuXG4gKiBvZiBmbi4gSWYgYW55IGVycm9yIGlzIHJhaXNlZCwgcmVqZWN0cyBpbnN0ZWFkLlxuICpcbiAqIEBwYXJhbSB7IURlZmVycmVkfSBkZWZlcnJlZFxuICogQHBhcmFtIHtmdW5jdGlvbigqPSl9IGZuXG4gKiBAcGFyYW0geyp9IGFyZ1xuICogQHJldHVybnMge2Z1bmN0aW9uKCl9XG4gKi9cbmZ1bmN0aW9uIHRyeUNhdGNoRGVmZXJyZWQoZGVmZXJyZWQsIGZuLCBhcmcpIHtcbiAgdmFyIHByb21pc2UgPSBkZWZlcnJlZC5wcm9taXNlO1xuICB2YXIgcmVzb2x2ZSA9IGRlZmVycmVkLnJlc29sdmU7XG4gIHZhciByZWplY3QgPSBkZWZlcnJlZC5yZWplY3Q7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0cnkge1xuICAgICAgdmFyIHJlc3VsdCA9IGZuKGFyZyk7XG4gICAgICBkb1Jlc29sdmUocHJvbWlzZSwgcmVzb2x2ZSwgcmVqZWN0LCByZXN1bHQsIHJlc3VsdCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmVqZWN0KGUpO1xuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBRdWV1ZXMgYW5kIGV4ZWN1dGVzIG11bHRpcGxlIGRlZmVycmVkIGZ1bmN0aW9ucyBvbiBhbm90aGVyIHJ1biBsb29wLlxuICovXG52YXIgZGVmZXIgPSAoZnVuY3Rpb24oKSB7XG4gIC8qKlxuICAgKiBEZWZlcnMgZm4gdG8gYW5vdGhlciBydW4gbG9vcC5cbiAgICovXG4gIHZhciBzY2hlZHVsZUZsdXNoO1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LnBvc3RNZXNzYWdlKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmbHVzaCk7XG4gICAgc2NoZWR1bGVGbHVzaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgd2luZG93LnBvc3RNZXNzYWdlKCdtYWNyby10YXNrJywgJyonKTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHNjaGVkdWxlRmx1c2ggPSBmdW5jdGlvbigpIHtcbiAgICAgIHNldFRpbWVvdXQoZmx1c2gsIDApO1xuICAgIH07XG4gIH1cblxuICB2YXIgcXVldWUgPSBuZXcgQXJyYXkoMTYpO1xuICB2YXIgbGVuZ3RoID0gMDtcblxuICBmdW5jdGlvbiBmbHVzaCgpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZm4gPSBxdWV1ZVtpXTtcbiAgICAgIHF1ZXVlW2ldID0gbnVsbDtcbiAgICAgIGZuKCk7XG4gICAgfVxuICAgIGxlbmd0aCA9IDA7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbigpfSBmblxuICAgKi9cbiAgZnVuY3Rpb24gZGVmZXIoZm4pIHtcbiAgICBpZiAobGVuZ3RoID09PSAwKSB7IHNjaGVkdWxlRmx1c2goKTsgfVxuICAgIHF1ZXVlW2xlbmd0aCsrXSA9IGZuO1xuICB9XG5cbiAgcmV0dXJuIGRlZmVyO1xufSkoKTtcblxuLyoqXG4gKiBUaGUgUHJvbWlzZSByZXNvbHV0aW9uIHByb2NlZHVyZS5cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9wcm9taXNlcy1hcGx1cy9wcm9taXNlcy1zcGVjI3RoZS1wcm9taXNlLXJlc29sdXRpb24tcHJvY2VkdXJlXG4gKlxuICogQHBhcmFtIHshUHJvbWlzZX0gcHJvbWlzZVxuICogQHBhcmFtIHtmdW5jdGlvbigqPSl9IHJlc29sdmVcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKj0pfSByZWplY3RcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEBwYXJhbSB7Kj19IGNvbnRleHRcbiAqL1xuZnVuY3Rpb24gZG9SZXNvbHZlKHByb21pc2UsIHJlc29sdmUsIHJlamVjdCwgdmFsdWUsIGNvbnRleHQpIHtcbiAgdmFyIF9yZWplY3QgPSByZWplY3Q7XG4gIHZhciB0aGVuO1xuICB2YXIgX3Jlc29sdmU7XG4gIHRyeSB7XG4gICAgaWYgKHZhbHVlID09PSBwcm9taXNlKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgZnVsZmlsbCBwcm9taXNlIHdpdGggaXRzZWxmJyk7XG4gICAgfVxuICAgIHZhciBpc09iaiA9IGlzT2JqZWN0KHZhbHVlKTtcbiAgICBpZiAoaXNPYmogJiYgdmFsdWUgaW5zdGFuY2VvZiBwcm9taXNlLmNvbnN0cnVjdG9yKSB7XG4gICAgICBhZG9wdChwcm9taXNlLCB2YWx1ZS5fc3RhdGUsIHZhbHVlLl92YWx1ZSwgdmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoaXNPYmogJiYgKHRoZW4gPSB2YWx1ZS50aGVuKSAmJiBpc0Z1bmN0aW9uKHRoZW4pKSB7XG4gICAgICBfcmVzb2x2ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIF9yZXNvbHZlID0gX3JlamVjdCA9IG5vb3A7XG4gICAgICAgIGRvUmVzb2x2ZShwcm9taXNlLCByZXNvbHZlLCByZWplY3QsIHZhbHVlLCB2YWx1ZSk7XG4gICAgICB9O1xuICAgICAgX3JlamVjdCA9IGZ1bmN0aW9uKHJlYXNvbikge1xuICAgICAgICBfcmVzb2x2ZSA9IF9yZWplY3QgPSBub29wO1xuICAgICAgICByZWplY3QocmVhc29uKTtcbiAgICAgIH07XG4gICAgICB0aGVuLmNhbGwoXG4gICAgICAgIGNvbnRleHQsXG4gICAgICAgIGZ1bmN0aW9uKHZhbHVlKSB7IF9yZXNvbHZlKHZhbHVlKTsgfSxcbiAgICAgICAgZnVuY3Rpb24ocmVhc29uKSB7IF9yZWplY3QocmVhc29uKTsgfVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgX3JlamVjdChlKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFByb21pc2U7XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBDb21tb24gQU1QIGV2ZW50cy5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBBbXBFdmVudHMgPSB7XG4gIEJVSUxUOiAnYW1wOmJ1aWx0JyxcbiAgRE9NX1VQREFURTogJ2FtcDpkb20tdXBkYXRlJyxcbiAgVklTSUJJTElUWV9DSEFOR0U6ICdhbXA6dmlzaWJpbGl0eWNoYW5nZScsIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbXBwcm9qZWN0L2FtcGh0bWwvYmxvYi9tYXN0ZXIvYWRzL1JFQURNRS5tZCNwYWdlLXZpc2liaWxpdHlcbiAgLy8gVGhlIGZvbGxvd2luZyBjb2RlcyBhcmUgb25seSB1c2VkIGZvciB0ZXN0aW5nLlxuICAvLyBUT0RPKGNob3VteCk6IE1vdmUgdGhlc2UgdG8gYSBzZXBhcmF0ZSBlbnVtIHNvIHRoZXkgY2FuIGJlIERDRSdkLlxuICBBVFRBQ0hFRDogJ2FtcDphdHRhY2hlZCcsXG4gIFNUVUJCRUQ6ICdhbXA6c3R1YmJlZCcsXG4gIExPQURfU1RBUlQ6ICdhbXA6bG9hZDpzdGFydCcsXG4gIExPQURfRU5EOiAnYW1wOmxvYWQ6ZW5kJyxcbiAgRVJST1I6ICdhbXA6ZXJyb3InLFxufTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1NlcnZpY2VzfSBmcm9tICcuL3NlcnZpY2VzJztcblxuLyoqXG4gKiBIZWxwZXIgbWV0aG9kIHRvIHRyaWdnZXIgYW5hbHl0aWNzIGV2ZW50IGlmIGFtcC1hbmFseXRpY3MgaXMgYXZhaWxhYmxlLlxuICogVE9ETzogRG8gbm90IGV4cG9zZSB0aGlzIGZ1bmN0aW9uXG4gKiBAcGFyYW0geyFFbGVtZW50fSB0YXJnZXRcbiAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFR5cGVcbiAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz49fSBvcHRfdmFycyBBIG1hcCBvZiB2YXJzIGFuZCB0aGVpciB2YWx1ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmlnZ2VyQW5hbHl0aWNzRXZlbnQodGFyZ2V0LCBldmVudFR5cGUsIG9wdF92YXJzKSB7XG4gIFNlcnZpY2VzLmFuYWx5dGljc0ZvckRvY09yTnVsbCh0YXJnZXQpLnRoZW4oYW5hbHl0aWNzID0+IHtcbiAgICBpZiAoIWFuYWx5dGljcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhbmFseXRpY3MudHJpZ2dlckV2ZW50Rm9yVGFyZ2V0KHRhcmdldCwgZXZlbnRUeXBlLCBvcHRfdmFycyk7XG4gIH0pO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQWxsb3dzIGZvciBydW50aW1lIGNvbmZpZ3VyYXRpb24uIEludGVybmFsbHksIHRoZSBydW50aW1lIHNob3VsZFxuICogdXNlIHRoZSBzcmMvY29uZmlnLmpzIG1vZHVsZSBmb3IgdmFyaW91cyBjb25zdGFudHMuIFdlIGNhbiB1c2UgdGhlXG4gKiBBTVBfQ09ORklHIGdsb2JhbCB0byB0cmFuc2xhdGUgdXNlci1kZWZpbmVkIGNvbmZpZ3VyYXRpb25zIHRvIHRoaXNcbiAqIG1vZHVsZS5cbiAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgc3RyaW5nPn1cbiAqL1xuY29uc3QgZW52ID0gc2VsZi5BTVBfQ09ORklHIHx8IHt9O1xuXG5jb25zdCB0aGlyZFBhcnR5RnJhbWVSZWdleCA9IHR5cGVvZiBlbnZbJ3RoaXJkUGFydHlGcmFtZVJlZ2V4J10gPT0gJ3N0cmluZycgP1xuICBuZXcgUmVnRXhwKGVudlsndGhpcmRQYXJ0eUZyYW1lUmVnZXgnXSkgOiBlbnZbJ3RoaXJkUGFydHlGcmFtZVJlZ2V4J107XG5cbmNvbnN0IGNkblByb3h5UmVnZXggPSB0eXBlb2YgZW52WydjZG5Qcm94eVJlZ2V4J10gPT0gJ3N0cmluZycgP1xuICBuZXcgUmVnRXhwKGVudlsnY2RuUHJveHlSZWdleCddKSA6IGVudlsnY2RuUHJveHlSZWdleCddO1xuXG4vKiogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBzdHJpbmd8Ym9vbGVhbnxSZWdFeHA+fSAqL1xuZXhwb3J0IGNvbnN0IHVybHMgPSB7XG4gIHRoaXJkUGFydHk6IGVudlsndGhpcmRQYXJ0eVVybCddIHx8ICdodHRwczovLzNwLmFtcHByb2plY3QubmV0JyxcbiAgdGhpcmRQYXJ0eUZyYW1lSG9zdDogZW52Wyd0aGlyZFBhcnR5RnJhbWVIb3N0J10gfHwgJ2FtcHByb2plY3QubmV0JyxcbiAgdGhpcmRQYXJ0eUZyYW1lUmVnZXg6IHRoaXJkUGFydHlGcmFtZVJlZ2V4IHx8IC9eZC1cXGQrXFwuYW1wcHJvamVjdFxcLm5ldCQvLFxuICBjZG46IGVudlsnY2RuVXJsJ10gfHwgJ2h0dHBzOi8vY2RuLmFtcHByb2plY3Qub3JnJyxcbiAgLyogTm90ZSB0aGF0IGNkblByb3h5UmVnZXggaXMgb25seSBldmVyIGNoZWNrZWQgYWdhaW5zdCBvcmlnaW5zXG4gICAqIChwcm90bzovL2hvc3RbOnBvcnRdKSBzbyBkb2VzIG5vdCBuZWVkIHRvIGNvbnNpZGVyIHBhdGhcbiAgICovXG4gIGNkblByb3h5UmVnZXg6IGNkblByb3h5UmVnZXggfHxcbiAgICAgIC9eaHR0cHM6XFwvXFwvKFthLXpBLVowLTlfLV0rXFwuKT9jZG5cXC5hbXBwcm9qZWN0XFwub3JnJC8sXG4gIGxvY2FsaG9zdFJlZ2V4OiAvXmh0dHBzPzpcXC9cXC9sb2NhbGhvc3QoOlxcZCspPyQvLFxuICBlcnJvclJlcG9ydGluZzogZW52WydlcnJvclJlcG9ydGluZ1VybCddIHx8XG4gICAgICAnaHR0cHM6Ly9hbXAtZXJyb3ItcmVwb3J0aW5nLmFwcHNwb3QuY29tL3InLFxuICBsb2NhbERldjogZW52Wydsb2NhbERldiddIHx8IGZhbHNlLFxufTtcblxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgdXJscyxcbn07XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtlbmRzV2l0aH0gZnJvbSAnLi9zdHJpbmcnO1xuaW1wb3J0IHtcbiAgaXNQcm94eU9yaWdpbixcbiAgcGFyc2VVcmxEZXByZWNhdGVkLFxuICB0cnlEZWNvZGVVcmlDb21wb25lbnQsXG59IGZyb20gJy4vdXJsJztcbmltcG9ydCB7dXJsc30gZnJvbSAnLi9jb25maWcnO1xuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIGNvb2tpZS4gVGhlIGNvb2tpZSBhY2Nlc3MgaXMgcmVzdHJpY3RlZCBhbmQgbXVzdFxuICogZ28gdGhyb3VnaCB0aGUgcHJpdmFjeSByZXZpZXcuIEJlZm9yZSB1c2luZyB0aGlzIG1ldGhvZCBwbGVhc2UgZmlsZSBhXG4gKiBHaXRIdWIgaXNzdWUgd2l0aCBcIlByaXZhY3kgUmV2aWV3XCIgbGFiZWwuXG4gKlxuICogUmV0dXJucyB0aGUgY29va2llJ3MgdmFsdWUgb3IgYG51bGxgLlxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICogQHJldHVybiB7P3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvb2tpZSh3aW4sIG5hbWUpIHtcbiAgY29uc3QgY29va2llU3RyaW5nID0gdHJ5R2V0RG9jdW1lbnRDb29raWVOb0lubGluZSh3aW4pO1xuICBpZiAoIWNvb2tpZVN0cmluZykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IGNvb2tpZXMgPSBjb29raWVTdHJpbmcuc3BsaXQoJzsnKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb29raWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgY29va2llID0gY29va2llc1tpXS50cmltKCk7XG4gICAgY29uc3QgZXEgPSBjb29raWUuaW5kZXhPZignPScpO1xuICAgIGlmIChlcSA9PSAtMSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmICh0cnlEZWNvZGVVcmlDb21wb25lbnQoY29va2llLnN1YnN0cmluZygwLCBlcSkudHJpbSgpKSA9PSBuYW1lKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGNvb2tpZS5zdWJzdHJpbmcoZXEgKyAxKS50cmltKCk7XG4gICAgICByZXR1cm4gdHJ5RGVjb2RlVXJpQ29tcG9uZW50KHZhbHVlLCB2YWx1ZSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIFRoaXMgbWV0aG9kIHNob3VsZCBub3QgYmUgaW5saW5lZCB0byBwcmV2ZW50IFRyeUNhdGNoIGRlb3B0aW1pemF0aW9uLlxuICogTm9JbmxpbmUga2V5d29yZCBhdCB0aGUgZW5kIG9mIGZ1bmN0aW9uIG5hbWUgYWxzbyBwcmV2ZW50cyBDbG9zdXJlIGNvbXBpbGVyXG4gKiBmcm9tIGlubGluaW5nIHRoZSBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHRyeUdldERvY3VtZW50Q29va2llTm9JbmxpbmUod2luKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHdpbi5kb2N1bWVudC5jb29raWU7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBBY3QgYXMgaWYgbm8gY29va2llIGlzIGF2YWlsYWJsZS4gRXhjZXB0aW9ucyBjYW4gYmUgdGhyb3duIHdoZW5cbiAgICAvLyBBTVAgZG9jcyBhcmUgb3BlbmVkIG9uIG9yaWdpbnMgdGhhdCBkbyBub3QgYWxsb3cgc2V0dGluZ1xuICAgIC8vIGNvb2tpZXMgc3VjaCBhcyBudWxsIG9yaWdpbnMuXG4gICAgcmV0dXJuICcnO1xuICB9XG59XG5cbi8qKlxuICogU2V0cyB0aGUgdmFsdWUgb2YgdGhlIGNvb2tpZS4gVGhlIGNvb2tpZSBhY2Nlc3MgaXMgcmVzdHJpY3RlZCBhbmQgbXVzdFxuICogZ28gdGhyb3VnaCB0aGUgcHJpdmFjeSByZXZpZXcuIEJlZm9yZSB1c2luZyB0aGlzIG1ldGhvZCBwbGVhc2UgZmlsZSBhXG4gKiBHaXRIdWIgaXNzdWUgd2l0aCBcIlByaXZhY3kgUmV2aWV3XCIgbGFiZWwuXG4gKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAqIEBwYXJhbSB7dGltZX0gZXhwaXJhdGlvblRpbWVcbiAqIEBwYXJhbSB7e1xuICogICBoaWdoZXN0QXZhaWxhYmxlRG9tYWluOihib29sZWFufHVuZGVmaW5lZCksXG4gKiAgIGRvbWFpbjooc3RyaW5nfHVuZGVmaW5lZClcbiAqIH09fSBvcHRfb3B0aW9uc1xuICogICAgIC0gaGlnaGVzdEF2YWlsYWJsZURvbWFpbjogSWYgdHJ1ZSwgc2V0IHRoZSBjb29raWUgYXQgdGhlIHdpZGVzdCBkb21haW5cbiAqICAgICAgIHNjb3BlIGFsbG93ZWQgYnkgdGhlIGJyb3dzZXIuIEUuZy4gb24gZXhhbXBsZS5jb20gaWYgd2UgYXJlIGN1cnJlbnRseVxuICogICAgICAgb24gd3d3LmV4YW1wbGUuY29tLlxuICogICAgIC0gZG9tYWluOiBFeHBsaWNpdCBkb21haW4gdG8gc2V0LlxuICogICAgIC0gYWxsb3dPblByb3h5T3JpZ2luOiBBbGxvdyBzZXR0aW5nIGEgY29va2llIG9uIHRoZSBBTVAgQ2FjaGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRDb29raWUod2luLCBuYW1lLCB2YWx1ZSwgZXhwaXJhdGlvblRpbWUsIG9wdF9vcHRpb25zKSB7XG4gIGNoZWNrT3JpZ2luRm9yU2V0dGluZ0Nvb2tpZSh3aW4sIG9wdF9vcHRpb25zLCBuYW1lKTtcbiAgaWYgKG9wdF9vcHRpb25zICYmIG9wdF9vcHRpb25zLmhpZ2hlc3RBdmFpbGFibGVEb21haW4pIHtcbiAgICBjb25zdCBwYXJ0cyA9IHdpbi5sb2NhdGlvbi5ob3N0bmFtZS5zcGxpdCgnLicpO1xuICAgIGxldCBkb21haW4gPSBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXTtcbiAgICBmb3IgKGxldCBpID0gcGFydHMubGVuZ3RoIC0gMjsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGRvbWFpbiA9IHBhcnRzW2ldICsgJy4nICsgZG9tYWluO1xuICAgICAgdHJ5U2V0Q29va2llKHdpbiwgbmFtZSwgdmFsdWUsIGV4cGlyYXRpb25UaW1lLCBkb21haW4pO1xuICAgICAgaWYgKGdldENvb2tpZSh3aW4sIG5hbWUpID09IHZhbHVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgbGV0IGRvbWFpbiA9IHVuZGVmaW5lZDtcbiAgaWYgKG9wdF9vcHRpb25zICYmIG9wdF9vcHRpb25zLmRvbWFpbikge1xuICAgIGRvbWFpbiA9IG9wdF9vcHRpb25zLmRvbWFpbjtcbiAgfVxuICB0cnlTZXRDb29raWUod2luLCBuYW1lLCB2YWx1ZSwgZXhwaXJhdGlvblRpbWUsIGRvbWFpbik7XG59XG5cbi8qKlxuICogQXR0ZW1wdCB0byBzZXQgYSBjb29raWUgd2l0aCB0aGUgZ2l2ZW4gcGFyYW1zLlxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gKiBAcGFyYW0ge3RpbWV9IGV4cGlyYXRpb25UaW1lXG4gKiBAcGFyYW0ge3N0cmluZ3x1bmRlZmluZWR9IGRvbWFpblxuICovXG5mdW5jdGlvbiB0cnlTZXRDb29raWUod2luLCBuYW1lLCB2YWx1ZSwgZXhwaXJhdGlvblRpbWUsIGRvbWFpbikge1xuICAvLyBXZSBkbyBub3QgYWxsb3cgc2V0dGluZyBjb29raWVzIG9uIHRoZSBkb21haW4gdGhhdCBjb250YWlucyBib3RoXG4gIC8vIHRoZSBjZG4uIGFuZCB3d3cuIGhvc3RzLlxuICBpZiAoZG9tYWluID09ICdhbXBwcm9qZWN0Lm9yZycpIHtcbiAgICAvLyBBY3RpdmVseSBkZWxldGUgdGhlbS5cbiAgICB2YWx1ZSA9ICdkZWxldGUnO1xuICAgIGV4cGlyYXRpb25UaW1lID0gMDtcbiAgfVxuICBjb25zdCBjb29raWUgPSBlbmNvZGVVUklDb21wb25lbnQobmFtZSkgKyAnPScgK1xuICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSArXG4gICAgICAnOyBwYXRoPS8nICtcbiAgICAgIChkb21haW4gPyAnOyBkb21haW49JyArIGRvbWFpbiA6ICcnKSArXG4gICAgICAnOyBleHBpcmVzPScgKyBuZXcgRGF0ZShleHBpcmF0aW9uVGltZSkudG9VVENTdHJpbmcoKTtcbiAgdHJ5IHtcbiAgICB3aW4uZG9jdW1lbnQuY29va2llID0gY29va2llO1xuICB9IGNhdGNoIChpZ25vcmUpIHtcbiAgICAvLyBEbyBub3QgdGhyb3cgaWYgc2V0dGluZyB0aGUgY29va2llIGZhaWxlZCBFeGNlcHRpb25zIGNhbiBiZSB0aHJvd25cbiAgICAvLyB3aGVuIEFNUCBkb2NzIGFyZSBvcGVuZWQgb24gb3JpZ2lucyB0aGF0IGRvIG5vdCBhbGxvdyBzZXR0aW5nXG4gICAgLy8gY29va2llcyBzdWNoIGFzIG51bGwgb3JpZ2lucy5cbiAgfVxufVxuXG4vKipcbiAqIFRocm93cyBpZiBhIGdpdmVuIGNvb2tpZSBzaG91bGQgbm90IGJlIHNldCBvbiB0aGUgZ2l2ZW4gb3JpZ2luLlxuICogVGhpcyBpcyBhIGRlZmVuc2UtaW4tZGVwdGguIENhbGxlcnMgc2hvdWxkIG5ldmVyIHJ1biBpbnRvIHRoaXMuXG4gKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7IU9iamVjdHx1bmRlZmluZWR9IG9wdGlvbnNcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEZvciB0aGUgZXJyb3IgbWVzc2FnZS5cbiAqL1xuZnVuY3Rpb24gY2hlY2tPcmlnaW5Gb3JTZXR0aW5nQ29va2llKHdpbiwgb3B0aW9ucywgbmFtZSkge1xuICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmFsbG93T25Qcm94eU9yaWdpbikge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoaXNQcm94eU9yaWdpbih3aW4ubG9jYXRpb24uaHJlZikpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Nob3VsZCBuZXZlciBhdHRlbXB0IHRvIHNldCBjb29raWUgb24gcHJveHkgb3JpZ2luOiAnXG4gICAgICAgICsgbmFtZSk7XG4gIH1cblxuICBjb25zdCBjdXJyZW50ID0gcGFyc2VVcmxEZXByZWNhdGVkKHdpbi5sb2NhdGlvbi5ocmVmKS5ob3N0bmFtZS50b0xvd2VyQ2FzZSgpO1xuICBjb25zdCBwcm94eSA9IHBhcnNlVXJsRGVwcmVjYXRlZCh1cmxzLmNkbikuaG9zdG5hbWUudG9Mb3dlckNhc2UoKTtcbiAgaWYgKGN1cnJlbnQgPT0gcHJveHkgfHwgZW5kc1dpdGgoY3VycmVudCwgJy4nICsgcHJveHkpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdTaG91bGQgbmV2ZXIgYXR0ZW1wdCB0byBzZXQgY29va2llIG9uIHByb3h5IG9yaWdpbi4nXG4gICAgICAgICsgJyAoaW4gZGVwdGggY2hlY2spOiAnICsgbmFtZSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHtGZXRjaFJlc3BvbnNlLCBhc3NlcnRTdWNjZXNzLCBnZXRWaWV3ZXJJbnRlcmNlcHRSZXNwb25zZSwgc2V0dXBBTVBDb3JzLCBzZXR1cEluaXQsIHNldHVwSW5wdXQsIHZlcmlmeUFtcENPUlNIZWFkZXJzfSBmcm9tICcuL3V0aWxzL3hoci11dGlscyc7XG5pbXBvcnQge1NlcnZpY2VzfSBmcm9tICcuL3NlcnZpY2VzJztcbmltcG9ydCB7dXNlcn0gZnJvbSAnLi9sb2cnO1xuXG4vKipcbiAqXG4gKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpbnB1dFxuICogQHBhcmFtIHs/Li91dGlscy94aHItdXRpbHMuRmV0Y2hJbml0RGVmPX0gb3B0X2luaXRcbiAqIEByZXR1cm4geyFQcm9taXNlPCFEb2N1bWVudD59XG4gKiBAaWdub3JlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmZXRjaERvY3VtZW50KHdpbiwgaW5wdXQsIG9wdF9pbml0KSB7XG4gIGxldCBpbml0ID0gc2V0dXBJbml0KG9wdF9pbml0LCAndGV4dC9odG1sJyk7XG4gIGluaXQgPSBzZXR1cEFNUENvcnMod2luLCBpbnB1dCwgaW5pdCk7XG4gIGlucHV0ID0gc2V0dXBJbnB1dCh3aW4sIGlucHV0LCBpbml0KTtcbiAgY29uc3QgYW1wZG9jU2VydmljZSA9IFNlcnZpY2VzLmFtcGRvY1NlcnZpY2VGb3Iod2luKTtcbiAgY29uc3QgYW1wZG9jU2luZ2xlID1cbiAgYW1wZG9jU2VydmljZS5pc1NpbmdsZURvYygpID8gYW1wZG9jU2VydmljZS5nZXRBbXBEb2MoKSA6IG51bGw7XG4gIGluaXQucmVzcG9uc2VUeXBlID0gJ2RvY3VtZW50JztcbiAgcmV0dXJuIGdldFZpZXdlckludGVyY2VwdFJlc3BvbnNlKHdpbiwgYW1wZG9jU2luZ2xlLCBpbnB1dCwgaW5pdClcbiAgICAgIC50aGVuKGludGVyY2VwdG9yUmVzcG9uc2UgPT4ge1xuICAgICAgICBpZiAoaW50ZXJjZXB0b3JSZXNwb25zZSkge1xuICAgICAgICAgIHJldHVybiBpbnRlcmNlcHRvclJlc3BvbnNlLnRleHQoKS50aGVuKGJvZHkgPT5cbiAgICAgICAgICAgIG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoYm9keSwgJ3RleHQvaHRtbCcpXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geGhyUmVxdWVzdChpbnB1dCwgaW5pdCkudGhlbigoe3hociwgcmVzcG9uc2V9KSA9PiB7XG4gICAgICAgICAgdmVyaWZ5QW1wQ09SU0hlYWRlcnMod2luLCByZXNwb25zZSwgaW5pdCk7XG4gICAgICAgICAgcmV0dXJuIHhoci5yZXNwb25zZVhNTDtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbn1cblxuLyoqXG4gKlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpbnB1dFxuICogQHBhcmFtIHshLi91dGlscy94aHItdXRpbHMuRmV0Y2hJbml0RGVmfSBpbml0XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiB4aHJSZXF1ZXN0KGlucHV0LCBpbml0KSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4oaW5pdC5tZXRob2QgfHwgJ0dFVCcsIGlucHV0LCB0cnVlKTtcbiAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gKGluaXQuY3JlZGVudGlhbHMgPT0gJ2luY2x1ZGUnKTtcbiAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2RvY3VtZW50JztcbiAgICAvLyBJbmNvbWluZyBoZWFkZXJzIGFyZSBpbiBmZXRjaCBmb3JtYXQsXG4gICAgLy8gc28gd2UgbmVlZCB0byBjb252ZXJ0IHRoZW0gaW50byB4aHIuXG4gICAgZm9yIChjb25zdCBoZWFkZXIgaW4gaW5pdC5oZWFkZXJzKSB7XG4gICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihoZWFkZXIsIGluaXQuaGVhZGVyc1toZWFkZXJdKTtcbiAgICB9XG5cbiAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4ge1xuICAgICAgaWYgKHhoci5yZWFkeVN0YXRlIDwgLyogU1RBVFVTX1JFQ0VJVkVEICovIDIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHhoci5zdGF0dXMgPCAxMDAgfHwgeGhyLnN0YXR1cyA+IDU5OSkge1xuICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgcmVqZWN0KHVzZXIoKS5jcmVhdGVFeHBlY3RlZEVycm9yKFxuICAgICAgICAgICAgYFVua25vd24gSFRUUCBzdGF0dXMgJHt4aHIuc3RhdHVzfWApKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gVE9ETyhkdm95dGVua28pOiBUaGlzIGlzIGN1cnJlbnRseSBzaW1wbGlmaWVkOiB3ZSB3aWxsIHdhaXQgZm9yIHRoZVxuICAgICAgLy8gd2hvbGUgZG9jdW1lbnQgbG9hZGluZyB0byBjb21wbGV0ZS4gVGhpcyBpcyBmaW5lIGZvciB0aGUgdXNlIGNhc2VzXG4gICAgICAvLyB3ZSBoYXZlIG5vdywgYnV0IG1heSBuZWVkIHRvIGJlIHJlaW1wbGVtZW50ZWQgbGF0ZXIuXG4gICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gLyogQ09NUExFVEUgKi8gNCkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IG5ldyBGZXRjaFJlc3BvbnNlKHhocik7XG4gICAgICAgIGNvbnN0IHByb21pc2UgPSBhc3NlcnRTdWNjZXNzKHJlc3BvbnNlKVxuICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gKHtyZXNwb25zZSwgeGhyfSkpO1xuICAgICAgICByZXNvbHZlKHByb21pc2UpO1xuICAgICAgfVxuICAgIH07XG4gICAgeGhyLm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICByZWplY3QodXNlcigpLmNyZWF0ZUV4cGVjdGVkRXJyb3IoJ1JlcXVlc3QgZmFpbHVyZScpKTtcbiAgICB9O1xuICAgIHhoci5vbmFib3J0ID0gKCkgPT4ge1xuICAgICAgcmVqZWN0KHVzZXIoKS5jcmVhdGVFeHBlY3RlZEVycm9yKCdSZXF1ZXN0IGFib3J0ZWQnKSk7XG4gICAgfTtcbiAgICBpZiAoaW5pdC5tZXRob2QgPT0gJ1BPU1QnKSB7XG4gICAgICB4aHIuc2VuZCgvKiogQHR5cGUgeyFGb3JtRGF0YX0gKi8gKGluaXQuYm9keSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB4aHIuc2VuZCgpO1xuICAgIH1cbiAgfSk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtEZWZlcnJlZH0gZnJvbSAnLi91dGlscy9wcm9taXNlJztcbmltcG9ydCB7Y3NzRXNjYXBlfSBmcm9tICcuLi90aGlyZF9wYXJ0eS9jc3MtZXNjYXBlL2Nzcy1lc2NhcGUnO1xuaW1wb3J0IHtkZXZ9IGZyb20gJy4vbG9nJztcbmltcG9ydCB7ZGljdH0gZnJvbSAnLi91dGlscy9vYmplY3QnO1xuaW1wb3J0IHtzdGFydHNXaXRofSBmcm9tICcuL3N0cmluZyc7XG5pbXBvcnQge3RvV2lufSBmcm9tICcuL3R5cGVzJztcblxuY29uc3QgSFRNTF9FU0NBUEVfQ0hBUlMgPSB7XG4gICcmJzogJyZhbXA7JyxcbiAgJzwnOiAnJmx0OycsXG4gICc+JzogJyZndDsnLFxuICAnXCInOiAnJnF1b3Q7JyxcbiAgXCInXCI6ICcmI3gyNzsnLFxuICAnYCc6ICcmI3g2MDsnLFxufTtcbmNvbnN0IEhUTUxfRVNDQVBFX1JFR0VYID0gLygmfDx8PnxcInwnfGApL2c7XG5cbi8qKiBAY29uc3Qge3N0cmluZ30gKi9cbmV4cG9ydCBjb25zdCBVUEdSQURFX1RPX0NVU1RPTUVMRU1FTlRfUFJPTUlTRSA9XG4gICAgJ19fQU1QX1VQR19QUk0nO1xuXG4vKiogQGNvbnN0IHtzdHJpbmd9ICovXG5leHBvcnQgY29uc3QgVVBHUkFERV9UT19DVVNUT01FTEVNRU5UX1JFU09MVkVSID1cbiAgICAnX19BTVBfVVBHX1JFUyc7XG5cbi8qKlxuICogV2FpdHMgdW50aWwgdGhlIGNoaWxkIGVsZW1lbnQgaXMgY29uc3RydWN0ZWQuIE9uY2UgdGhlIGNoaWxkIGlzIGZvdW5kLCB0aGVcbiAqIGNhbGxiYWNrIGlzIGV4ZWN1dGVkLlxuICogQHBhcmFtIHshRWxlbWVudH0gcGFyZW50XG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFFbGVtZW50KTpib29sZWFufSBjaGVja0Z1bmNcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gY2FsbGJhY2tcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdhaXRGb3JDaGlsZChwYXJlbnQsIGNoZWNrRnVuYywgY2FsbGJhY2spIHtcbiAgaWYgKGNoZWNrRnVuYyhwYXJlbnQpKSB7XG4gICAgY2FsbGJhY2soKTtcbiAgICByZXR1cm47XG4gIH1cbiAgLyoqIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgY29uc3Qgd2luID0gdG9XaW4ocGFyZW50Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcpO1xuICBpZiAod2luLk11dGF0aW9uT2JzZXJ2ZXIpIHtcbiAgICAvKiogQGNvbnN0IHtNdXRhdGlvbk9ic2VydmVyfSAqL1xuICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IHdpbi5NdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcbiAgICAgIGlmIChjaGVja0Z1bmMocGFyZW50KSkge1xuICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZShwYXJlbnQsIHtjaGlsZExpc3Q6IHRydWV9KTtcbiAgfSBlbHNlIHtcbiAgICAvKiogQGNvbnN0IHtudW1iZXJ9ICovXG4gICAgY29uc3QgaW50ZXJ2YWwgPSB3aW4uc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgaWYgKGNoZWNrRnVuYyhwYXJlbnQpKSB7XG4gICAgICAgIHdpbi5jbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9LCAvKiBtaWxsaXNlY29uZHMgKi8gNSk7XG4gIH1cbn1cblxuLyoqXG4gKiBXYWl0cyB1bnRpbCB0aGUgY2hpbGQgZWxlbWVudCBpcyBjb25zdHJ1Y3RlZC4gT25jZSB0aGUgY2hpbGQgaXMgZm91bmQsIHRoZVxuICogcHJvbWlzZSBpcyByZXNvbHZlZC5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHBhcmVudFxuICogQHBhcmFtIHtmdW5jdGlvbighRWxlbWVudCk6Ym9vbGVhbn0gY2hlY2tGdW5jXG4gKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdhaXRGb3JDaGlsZFByb21pc2UocGFyZW50LCBjaGVja0Z1bmMpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgIHdhaXRGb3JDaGlsZChwYXJlbnQsIGNoZWNrRnVuYywgcmVzb2x2ZSk7XG4gIH0pO1xufVxuXG4vKipcbiAqIFdhaXRzIGZvciBkb2N1bWVudCdzIGJvZHkgdG8gYmUgYXZhaWxhYmxlLlxuICogV2lsbCBiZSBkZXByZWNhdGVkIHNvb247IHVzZSB7QGxpbmsgQW1wRG9jI3doZW5Cb2R5QXZhaWxhYmxlfSBvclxuICogQHtsaW5rIERvY3VtZW50U3RhdGUjb25Cb2R5QXZhaWxhYmxlfSBpbnN0ZWFkLlxuICogQHBhcmFtIHshRG9jdW1lbnR9IGRvY1xuICogQHBhcmFtIHtmdW5jdGlvbigpfSBjYWxsYmFja1xuICovXG5leHBvcnQgZnVuY3Rpb24gd2FpdEZvckJvZHkoZG9jLCBjYWxsYmFjaykge1xuICB3YWl0Rm9yQ2hpbGQoZG9jLmRvY3VtZW50RWxlbWVudCwgKCkgPT4gISFkb2MuYm9keSwgY2FsbGJhY2spO1xufVxuXG5cbi8qKlxuICogV2FpdHMgZm9yIGRvY3VtZW50J3MgYm9keSB0byBiZSBhdmFpbGFibGUuXG4gKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdhaXRGb3JCb2R5UHJvbWlzZShkb2MpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgIHdhaXRGb3JCb2R5KGRvYywgcmVzb2x2ZSk7XG4gIH0pO1xufVxuXG5cbi8qKlxuICogUmVtb3ZlcyB0aGUgZWxlbWVudC5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUVsZW1lbnQoZWxlbWVudCkge1xuICBpZiAoZWxlbWVudC5wYXJlbnRFbGVtZW50KSB7XG4gICAgZWxlbWVudC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQpO1xuICB9XG59XG5cblxuLyoqXG4gKiBSZW1vdmVzIGFsbCBjaGlsZCBub2RlcyBvZiB0aGUgc3BlY2lmaWVkIGVsZW1lbnQuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBwYXJlbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUNoaWxkcmVuKHBhcmVudCkge1xuICB3aGlsZSAocGFyZW50LmZpcnN0Q2hpbGQpIHtcbiAgICBwYXJlbnQucmVtb3ZlQ2hpbGQocGFyZW50LmZpcnN0Q2hpbGQpO1xuICB9XG59XG5cblxuLyoqXG4gKiBDb3BpZXMgYWxsIGNoaWxkcmVuIG5vZGVzIG9mIGVsZW1lbnQgXCJmcm9tXCIgdG8gZWxlbWVudCBcInRvXCIuIENoaWxkIG5vZGVzXG4gKiBhcmUgZGVlcGx5IGNsb25lZC4gTm90aWNlLCB0aGF0IHRoaXMgbWV0aG9kIHNob3VsZCBiZSB1c2VkIHdpdGggY2FyZSBhbmRcbiAqIHByZWZlcmFibHkgb24gc21hbGxlciBzdWJ0cmVlcy5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGZyb21cbiAqIEBwYXJhbSB7IUVsZW1lbnR8IURvY3VtZW50RnJhZ21lbnR9IHRvXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb3B5Q2hpbGRyZW4oZnJvbSwgdG8pIHtcbiAgY29uc3QgZnJhZyA9IHRvLm93bmVyRG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICBmb3IgKGxldCBuID0gZnJvbS5maXJzdENoaWxkOyBuOyBuID0gbi5uZXh0U2libGluZykge1xuICAgIGZyYWcuYXBwZW5kQ2hpbGQobi5jbG9uZU5vZGUodHJ1ZSkpO1xuICB9XG4gIHRvLmFwcGVuZENoaWxkKGZyYWcpO1xufVxuXG4vKipcbiAqIEluc2VydCB0aGUgZWxlbWVudCBpbiB0aGUgcm9vdCBhZnRlciB0aGUgZWxlbWVudCBuYW1lZCBhZnRlciBvclxuICogaWYgdGhhdCBpcyBudWxsIGF0IHRoZSBiZWdpbm5pbmcuXG4gKiBAcGFyYW0geyFFbGVtZW50fCFTaGFkb3dSb290fSByb290XG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0gez9Ob2RlfSBhZnRlclxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zZXJ0QWZ0ZXJPckF0U3RhcnQocm9vdCwgZWxlbWVudCwgYWZ0ZXIpIHtcbiAgY29uc3QgYmVmb3JlID0gYWZ0ZXIgPyBhZnRlci5uZXh0U2libGluZyA6IHJvb3QuZmlyc3RDaGlsZDtcbiAgcm9vdC5pbnNlcnRCZWZvcmUoZWxlbWVudCwgYmVmb3JlKTtcbn1cblxuLyoqXG4gKiBBZGQgYXR0cmlidXRlcyB0byBhbiBlbGVtZW50LlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHshSnNvbk9iamVjdDxzdHJpbmcsIHN0cmluZz59IGF0dHJpYnV0ZXNcbiAqIEByZXR1cm4geyFFbGVtZW50fSBjcmVhdGVkIGVsZW1lbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZEF0dHJpYnV0ZXNUb0VsZW1lbnQoZWxlbWVudCwgYXR0cmlidXRlcykge1xuICBmb3IgKGNvbnN0IGF0dHIgaW4gYXR0cmlidXRlcykge1xuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKGF0dHIsIGF0dHJpYnV0ZXNbYXR0cl0pO1xuICB9XG4gIHJldHVybiBlbGVtZW50O1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIG5ldyBlbGVtZW50IG9uIGRvY3VtZW50IHdpdGggc3BlY2lmaWVkIHRhZ05hbWUgYW5kIGF0dHJpYnV0ZXMuXG4gKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gKiBAcGFyYW0ge3N0cmluZ30gdGFnTmFtZVxuICogQHBhcmFtIHshSnNvbk9iamVjdDxzdHJpbmcsIHN0cmluZz59IGF0dHJpYnV0ZXNcbiAqIEByZXR1cm4geyFFbGVtZW50fSBjcmVhdGVkIGVsZW1lbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRXaXRoQXR0cmlidXRlcyhkb2MsIHRhZ05hbWUsIGF0dHJpYnV0ZXMpIHtcbiAgY29uc3QgZWxlbWVudCA9IGRvYy5jcmVhdGVFbGVtZW50KHRhZ05hbWUpO1xuICByZXR1cm4gYWRkQXR0cmlidXRlc1RvRWxlbWVudChlbGVtZW50LCBhdHRyaWJ1dGVzKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgbm9kZSBpcyBjb25uZWN0ZWQgKGF0dGFjaGVkKS5cbiAqIEBwYXJhbSB7IU5vZGV9IG5vZGVcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiBAc2VlIGh0dHBzOi8vZG9tLnNwZWMud2hhdHdnLm9yZy8jY29ubmVjdGVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Nvbm5lY3RlZE5vZGUobm9kZSkge1xuICBjb25zdCBjb25uZWN0ZWQgPSBub2RlLmlzQ29ubmVjdGVkO1xuICBpZiAoY29ubmVjdGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gY29ubmVjdGVkO1xuICB9XG5cbiAgLy8gXCJBbiBlbGVtZW50IGlzIGNvbm5lY3RlZCBpZiBpdHMgc2hhZG93LWluY2x1ZGluZyByb290IGlzIGEgZG9jdW1lbnQuXCJcbiAgbGV0IG4gPSBub2RlO1xuICBkbyB7XG4gICAgbiA9IHJvb3ROb2RlRm9yKG4pO1xuICAgIGlmIChuLmhvc3QpIHtcbiAgICAgIG4gPSBuLmhvc3Q7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfSB3aGlsZSAodHJ1ZSk7XG4gIHJldHVybiBuLm5vZGVUeXBlID09PSBOb2RlLkRPQ1VNRU5UX05PREU7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgcm9vdCBmb3IgYSBnaXZlbiBub2RlLiBEb2VzIG5vdCBjcm9zcyBzaGFkb3cgRE9NIGJvdW5kYXJ5LlxuICogQHBhcmFtIHshTm9kZX0gbm9kZVxuICogQHJldHVybiB7IU5vZGV9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByb290Tm9kZUZvcihub2RlKSB7XG4gIGlmIChOb2RlLnByb3RvdHlwZS5nZXRSb290Tm9kZSkge1xuICAgIC8vIFR5cGUgY2hlY2tlciBzYXlzIGBnZXRSb290Tm9kZWAgbWF5IHJldHVybiBudWxsLlxuICAgIHJldHVybiBub2RlLmdldFJvb3ROb2RlKCkgfHwgbm9kZTtcbiAgfVxuICBsZXQgbjtcbiAgZm9yIChuID0gbm9kZTsgISFuLnBhcmVudE5vZGU7IG4gPSBuLnBhcmVudE5vZGUpIHt9XG4gIHJldHVybiBuO1xufVxuXG4vKipcbiAqIEZpbmRzIHRoZSBjbG9zZXN0IGVsZW1lbnQgdGhhdCBzYXRpc2ZpZXMgdGhlIGNhbGxiYWNrIGZyb20gdGhpcyBlbGVtZW50XG4gKiB1cCB0aGUgRE9NIHN1YnRyZWUuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFFbGVtZW50KTpib29sZWFufSBjYWxsYmFja1xuICogQHBhcmFtIHtFbGVtZW50PX0gb3B0X3N0b3BBdCBvcHRpb25hbCBlbGVtbnQgdG8gc3RvcCB0aGUgc2VhcmNoIGF0LlxuICogQHJldHVybiB7P0VsZW1lbnR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9zZXN0KGVsZW1lbnQsIGNhbGxiYWNrLCBvcHRfc3RvcEF0KSB7XG4gIGZvciAobGV0IGVsID0gZWxlbWVudDsgZWwgJiYgZWwgIT09IG9wdF9zdG9wQXQ7IGVsID0gZWwucGFyZW50RWxlbWVudCkge1xuICAgIGlmIChjYWxsYmFjayhlbCkpIHtcbiAgICAgIHJldHVybiBlbDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cblxuLyoqXG4gKiBGaW5kcyB0aGUgY2xvc2VzdCBub2RlIHRoYXQgc2F0aXNmaWVzIHRoZSBjYWxsYmFjayBmcm9tIHRoaXMgbm9kZVxuICogdXAgdGhlIERPTSBzdWJ0cmVlLlxuICogQHBhcmFtIHshTm9kZX0gbm9kZVxuICogQHBhcmFtIHtmdW5jdGlvbighTm9kZSk6Ym9vbGVhbn0gY2FsbGJhY2tcbiAqIEByZXR1cm4gez9Ob2RlfVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VzdE5vZGUobm9kZSwgY2FsbGJhY2spIHtcbiAgZm9yIChsZXQgbiA9IG5vZGU7IG47IG4gPSBuLnBhcmVudE5vZGUpIHtcbiAgICBpZiAoY2FsbGJhY2sobikpIHtcbiAgICAgIHJldHVybiBuO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuXG4vKipcbiAqIEZpbmRzIHRoZSBjbG9zZXN0IGVsZW1lbnQgd2l0aCB0aGUgc3BlY2lmaWVkIG5hbWUgZnJvbSB0aGlzIGVsZW1lbnRcbiAqIHVwIHRoZSBET00gc3VidHJlZS5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSB0YWdOYW1lXG4gKiBAcmV0dXJuIHs/RWxlbWVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb3Nlc3RCeVRhZyhlbGVtZW50LCB0YWdOYW1lKSB7XG4gIGlmIChlbGVtZW50LmNsb3Nlc3QpIHtcbiAgICByZXR1cm4gZWxlbWVudC5jbG9zZXN0KHRhZ05hbWUpO1xuICB9XG4gIHRhZ05hbWUgPSB0YWdOYW1lLnRvVXBwZXJDYXNlKCk7XG4gIHJldHVybiBjbG9zZXN0KGVsZW1lbnQsIGVsID0+IHtcbiAgICByZXR1cm4gZWwudGFnTmFtZSA9PSB0YWdOYW1lO1xuICB9KTtcbn1cblxuLyoqXG4gKiBGaW5kcyB0aGUgY2xvc2VzdCBlbGVtZW50IHdpdGggdGhlIHNwZWNpZmllZCBzZWxlY3RvciBmcm9tIHRoaXMgZWxlbWVudFxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IHNlbGVjdG9yXG4gKiBAcmV0dXJuIHs/RWxlbWVudH0gY2xvc2VzdCBhbmNlc3RvciBpZiBmb3VuZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb3Nlc3RCeVNlbGVjdG9yKGVsZW1lbnQsIHNlbGVjdG9yKSB7XG4gIGlmIChlbGVtZW50LmNsb3Nlc3QpIHtcbiAgICByZXR1cm4gZWxlbWVudC5jbG9zZXN0KHNlbGVjdG9yKTtcbiAgfVxuXG4gIHJldHVybiBjbG9zZXN0KGVsZW1lbnQsIGVsID0+IHtcbiAgICByZXR1cm4gbWF0Y2hlcyhlbCwgc2VsZWN0b3IpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIGdpdmVuIGVsZW1lbnQgbWF0Y2hlcyB0aGUgc2VsZWN0b3JcbiAqIEBwYXJhbSAgeyFFbGVtZW50fSBlbCBUaGUgZWxlbWVudCB0byB2ZXJpZnlcbiAqIEBwYXJhbSAge3N0cmluZ30gc2VsZWN0b3IgVGhlIHNlbGVjdG9yIHRvIGNoZWNrIGFnYWluc3RcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGVsZW1lbnQgbWF0Y2hlZCB0aGUgc2VsZWN0b3IuIEZhbHNlIG90aGVyd2lzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoZXMoZWwsIHNlbGVjdG9yKSB7XG4gIGNvbnN0IG1hdGNoZXIgPSBlbC5tYXRjaGVzIHx8XG4gICAgICBlbC53ZWJraXRNYXRjaGVzU2VsZWN0b3IgfHxcbiAgICAgIGVsLm1vek1hdGNoZXNTZWxlY3RvciB8fFxuICAgICAgZWwubXNNYXRjaGVzU2VsZWN0b3IgfHxcbiAgICAgIGVsLm9NYXRjaGVzU2VsZWN0b3I7XG4gIGlmIChtYXRjaGVyKSB7XG4gICAgcmV0dXJuIG1hdGNoZXIuY2FsbChlbCwgc2VsZWN0b3IpO1xuICB9XG4gIHJldHVybiBmYWxzZTsgLy8gSUU4IGFsd2F5cyByZXR1cm5zIGZhbHNlLlxufVxuXG4vKipcbiAqIEZpbmRzIHRoZSBmaXJzdCBkZXNjZW5kYW50IGVsZW1lbnQgd2l0aCB0aGUgc3BlY2lmaWVkIG5hbWUuXG4gKiBAcGFyYW0geyFFbGVtZW50fCFEb2N1bWVudHwhU2hhZG93Um9vdH0gZWxlbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IHRhZ05hbWVcbiAqIEByZXR1cm4gez9FbGVtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZWxlbWVudEJ5VGFnKGVsZW1lbnQsIHRhZ05hbWUpIHtcbiAgbGV0IGVsZW1lbnRzO1xuICAvLyBnZXRFbGVtZW50c0J5VGFnTmFtZSgpIGlzIG5vdCBzdXBwb3J0ZWQgb24gU2hhZG93Um9vdC5cbiAgaWYgKHR5cGVvZiBlbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lID09PSAnZnVuY3Rpb24nKSB7XG4gICAgZWxlbWVudHMgPSBlbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKHRhZ05hbWUpO1xuICB9IGVsc2Uge1xuICAgIGVsZW1lbnRzID0gZWxlbWVudC4vKk9LKi9xdWVyeVNlbGVjdG9yQWxsKHRhZ05hbWUpO1xuICB9XG4gIHJldHVybiAoZWxlbWVudHMgJiYgZWxlbWVudHNbMF0pIHx8IG51bGw7XG59XG5cblxuLyoqXG4gKiBGaW5kcyB0aGUgZmlyc3QgY2hpbGQgZWxlbWVudCB0aGF0IHNhdGlzZmllcyB0aGUgY2FsbGJhY2suXG4gKiBAcGFyYW0geyFFbGVtZW50fSBwYXJlbnRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oIUVsZW1lbnQpOmJvb2xlYW59IGNhbGxiYWNrXG4gKiBAcmV0dXJuIHs/RWxlbWVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNoaWxkRWxlbWVudChwYXJlbnQsIGNhbGxiYWNrKSB7XG4gIGZvciAobGV0IGNoaWxkID0gcGFyZW50LmZpcnN0RWxlbWVudENoaWxkOyBjaGlsZDtcbiAgICBjaGlsZCA9IGNoaWxkLm5leHRFbGVtZW50U2libGluZykge1xuICAgIGlmIChjYWxsYmFjayhjaGlsZCkpIHtcbiAgICAgIHJldHVybiBjaGlsZDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cblxuLyoqXG4gKiBGaW5kcyBhbGwgY2hpbGQgZWxlbWVudHMgdGhhdCBzYXRpc2Z5IHRoZSBjYWxsYmFjay5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHBhcmVudFxuICogQHBhcmFtIHtmdW5jdGlvbighRWxlbWVudCk6Ym9vbGVhbn0gY2FsbGJhY2tcbiAqIEByZXR1cm4geyFBcnJheTwhRWxlbWVudD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjaGlsZEVsZW1lbnRzKHBhcmVudCwgY2FsbGJhY2spIHtcbiAgY29uc3QgY2hpbGRyZW4gPSBbXTtcbiAgZm9yIChsZXQgY2hpbGQgPSBwYXJlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7IGNoaWxkO1xuICAgIGNoaWxkID0gY2hpbGQubmV4dEVsZW1lbnRTaWJsaW5nKSB7XG4gICAgaWYgKGNhbGxiYWNrKGNoaWxkKSkge1xuICAgICAgY2hpbGRyZW4ucHVzaChjaGlsZCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBjaGlsZHJlbjtcbn1cblxuXG4vKipcbiAqIEZpbmRzIHRoZSBsYXN0IGNoaWxkIGVsZW1lbnQgdGhhdCBzYXRpc2ZpZXMgdGhlIGNhbGxiYWNrLlxuICogQHBhcmFtIHshRWxlbWVudH0gcGFyZW50XG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFFbGVtZW50KTpib29sZWFufSBjYWxsYmFja1xuICogQHJldHVybiB7P0VsZW1lbnR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsYXN0Q2hpbGRFbGVtZW50KHBhcmVudCwgY2FsbGJhY2spIHtcbiAgZm9yIChsZXQgY2hpbGQgPSBwYXJlbnQubGFzdEVsZW1lbnRDaGlsZDsgY2hpbGQ7XG4gICAgY2hpbGQgPSBjaGlsZC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nKSB7XG4gICAgaWYgKGNhbGxiYWNrKGNoaWxkKSkge1xuICAgICAgcmV0dXJuIGNoaWxkO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBGaW5kcyBhbGwgY2hpbGQgbm9kZXMgdGhhdCBzYXRpc2Z5IHRoZSBjYWxsYmFjay5cbiAqIFRoZXNlIG5vZGVzIGNhbiBpbmNsdWRlIFRleHQsIENvbW1lbnQgYW5kIG90aGVyIGNoaWxkIG5vZGVzLlxuICogQHBhcmFtIHshTm9kZX0gcGFyZW50XG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFOb2RlKTpib29sZWFufSBjYWxsYmFja1xuICogQHJldHVybiB7IUFycmF5PCFOb2RlPn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNoaWxkTm9kZXMocGFyZW50LCBjYWxsYmFjaykge1xuICBjb25zdCBub2RlcyA9IFtdO1xuICBmb3IgKGxldCBjaGlsZCA9IHBhcmVudC5maXJzdENoaWxkOyBjaGlsZDtcbiAgICBjaGlsZCA9IGNoaWxkLm5leHRTaWJsaW5nKSB7XG4gICAgaWYgKGNhbGxiYWNrKGNoaWxkKSkge1xuICAgICAgbm9kZXMucHVzaChjaGlsZCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBub2Rlcztcbn1cblxuLyoqXG4gKiBAdHlwZSB7Ym9vbGVhbnx1bmRlZmluZWR9XG4gKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAqL1xubGV0IHNjb3BlU2VsZWN0b3JTdXBwb3J0ZWQ7XG5cbi8qKlxuICogQHBhcmFtIHtib29sZWFufHVuZGVmaW5lZH0gdmFsXG4gKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldFNjb3BlU2VsZWN0b3JTdXBwb3J0ZWRGb3JUZXN0aW5nKHZhbCkge1xuICBzY29wZVNlbGVjdG9yU3VwcG9ydGVkID0gdmFsO1xufVxuXG4vKipcbiAqIFRlc3QgdGhhdCB0aGUgOnNjb3BlIHNlbGVjdG9yIGlzIHN1cHBvcnRlZCBhbmQgYmVoYXZlcyBjb3JyZWN0bHkuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBwYXJlbnRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzU2NvcGVTZWxlY3RvclN1cHBvcnRlZChwYXJlbnQpIHtcbiAgY29uc3QgZG9jID0gcGFyZW50Lm93bmVyRG9jdW1lbnQ7XG4gIHRyeSB7XG4gICAgY29uc3QgdGVzdEVsZW1lbnQgPSBkb2MuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29uc3QgdGVzdENoaWxkID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRlc3RFbGVtZW50LmFwcGVuZENoaWxkKHRlc3RDaGlsZCk7XG4gICAgLy8gTk9URShjdmlhbGl6LCAjMTIzODMpOiBGaXJlZm94J3MgaW1wbGVtZW50YXRpb24gaXMgaW5jb21wbGV0ZSxcbiAgICAvLyB0aGVyZWZvcmUgd2UgdGVzdCBhY3R1YWwgZnVuY3Rpb25hbGl0eSBvZmA6c2NvcGVgIGFzIHdlbGwuXG4gICAgcmV0dXJuIHRlc3RFbGVtZW50Li8qT0sqL3F1ZXJ5U2VsZWN0b3IoJzpzY29wZSBkaXYnKSA9PT0gdGVzdENoaWxkO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8qKlxuICogRmluZHMgdGhlIGZpcnN0IGNoaWxkIGVsZW1lbnQgdGhhdCBoYXMgdGhlIHNwZWNpZmllZCBhdHRyaWJ1dGUuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBwYXJlbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyXG4gKiBAcmV0dXJuIHs/RWxlbWVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNoaWxkRWxlbWVudEJ5QXR0cihwYXJlbnQsIGF0dHIpIHtcbiAgcmV0dXJuIHNjb3BlZFF1ZXJ5U2VsZWN0b3IvKk9LKi8ocGFyZW50LCBgPiBbJHthdHRyfV1gKTtcbn1cblxuXG4vKipcbiAqIEZpbmRzIHRoZSBsYXN0IGNoaWxkIGVsZW1lbnQgdGhhdCBoYXMgdGhlIHNwZWNpZmllZCBhdHRyaWJ1dGUuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBwYXJlbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyXG4gKiBAcmV0dXJuIHs/RWxlbWVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxhc3RDaGlsZEVsZW1lbnRCeUF0dHIocGFyZW50LCBhdHRyKSB7XG4gIHJldHVybiBsYXN0Q2hpbGRFbGVtZW50KHBhcmVudCwgZWwgPT4ge1xuICAgIHJldHVybiBlbC5oYXNBdHRyaWJ1dGUoYXR0cik7XG4gIH0pO1xufVxuXG5cbi8qKlxuICogRmluZHMgYWxsIGNoaWxkIGVsZW1lbnRzIHRoYXQgaGFzIHRoZSBzcGVjaWZpZWQgYXR0cmlidXRlLlxuICogQHBhcmFtIHshRWxlbWVudH0gcGFyZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gYXR0clxuICogQHJldHVybiB7IU5vZGVMaXN0PCFFbGVtZW50Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNoaWxkRWxlbWVudHNCeUF0dHIocGFyZW50LCBhdHRyKSB7XG4gIHJldHVybiBzY29wZWRRdWVyeVNlbGVjdG9yQWxsLypPSyovKHBhcmVudCwgYD4gWyR7YXR0cn1dYCk7XG59XG5cblxuLyoqXG4gKiBGaW5kcyB0aGUgZmlyc3QgY2hpbGQgZWxlbWVudCB0aGF0IGhhcyB0aGUgc3BlY2lmaWVkIHRhZyBuYW1lLlxuICogQHBhcmFtIHshRWxlbWVudH0gcGFyZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gdGFnTmFtZVxuICogQHJldHVybiB7P0VsZW1lbnR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjaGlsZEVsZW1lbnRCeVRhZyhwYXJlbnQsIHRhZ05hbWUpIHtcbiAgcmV0dXJuIHNjb3BlZFF1ZXJ5U2VsZWN0b3IvKk9LKi8ocGFyZW50LCBgPiAke3RhZ05hbWV9YCk7XG59XG5cblxuLyoqXG4gKiBGaW5kcyBhbGwgY2hpbGQgZWxlbWVudHMgd2l0aCB0aGUgc3BlY2lmaWVkIHRhZyBuYW1lLlxuICogQHBhcmFtIHshRWxlbWVudH0gcGFyZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gdGFnTmFtZVxuICogQHJldHVybiB7IU5vZGVMaXN0PCFFbGVtZW50Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNoaWxkRWxlbWVudHNCeVRhZyhwYXJlbnQsIHRhZ05hbWUpIHtcbiAgcmV0dXJuIHNjb3BlZFF1ZXJ5U2VsZWN0b3JBbGwvKk9LKi8ocGFyZW50LCBgPiAke3RhZ05hbWV9YCk7XG59XG5cblxuLyoqXG4gKiBGaW5kcyB0aGUgZmlyc3QgZWxlbWVudCB0aGF0IG1hdGNoZXMgYHNlbGVjdG9yYCwgc2NvcGVkIGluc2lkZSBgcm9vdGAuXG4gKiBOb3RlOiBpbiBJRSwgdGhpcyBjYXVzZXMgYSBxdWljayBtdXRhdGlvbiBvZiB0aGUgZWxlbWVudCdzIGNsYXNzIGxpc3QuXG4gKiBAcGFyYW0geyFFbGVtZW50fSByb290XG4gKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3JcbiAqIEByZXR1cm4gez9FbGVtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NvcGVkUXVlcnlTZWxlY3Rvcihyb290LCBzZWxlY3Rvcikge1xuICBpZiAoc2NvcGVTZWxlY3RvclN1cHBvcnRlZCA9PSBudWxsKSB7XG4gICAgc2NvcGVTZWxlY3RvclN1cHBvcnRlZCA9IGlzU2NvcGVTZWxlY3RvclN1cHBvcnRlZChyb290KTtcbiAgfVxuICBpZiAoc2NvcGVTZWxlY3RvclN1cHBvcnRlZCkge1xuICAgIHJldHVybiByb290Li8qT0sqL3F1ZXJ5U2VsZWN0b3IoYDpzY29wZSAke3NlbGVjdG9yfWApO1xuICB9XG5cbiAgLy8gT25seSBJRS5cbiAgY29uc3QgdW5pcXVlID0gJ2ktYW1waHRtbC1zY29wZWQnO1xuICByb290LmNsYXNzTGlzdC5hZGQodW5pcXVlKTtcbiAgY29uc3QgZWxlbWVudCA9IHJvb3QuLypPSyovcXVlcnlTZWxlY3RvcihgLiR7dW5pcXVlfSAke3NlbGVjdG9yfWApO1xuICByb290LmNsYXNzTGlzdC5yZW1vdmUodW5pcXVlKTtcbiAgcmV0dXJuIGVsZW1lbnQ7XG59XG5cblxuLyoqXG4gKiBGaW5kcyB0aGUgZXZlcnkgZWxlbWVudCB0aGF0IG1hdGNoZXMgYHNlbGVjdG9yYCwgc2NvcGVkIGluc2lkZSBgcm9vdGAuXG4gKiBOb3RlOiBpbiBJRSwgdGhpcyBjYXVzZXMgYSBxdWljayBtdXRhdGlvbiBvZiB0aGUgZWxlbWVudCdzIGNsYXNzIGxpc3QuXG4gKiBAcGFyYW0geyFFbGVtZW50fSByb290XG4gKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3JcbiAqIEByZXR1cm4geyFOb2RlTGlzdDwhRWxlbWVudD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzY29wZWRRdWVyeVNlbGVjdG9yQWxsKHJvb3QsIHNlbGVjdG9yKSB7XG4gIGlmIChzY29wZVNlbGVjdG9yU3VwcG9ydGVkID09IG51bGwpIHtcbiAgICBzY29wZVNlbGVjdG9yU3VwcG9ydGVkID0gaXNTY29wZVNlbGVjdG9yU3VwcG9ydGVkKHJvb3QpO1xuICB9XG4gIGlmIChzY29wZVNlbGVjdG9yU3VwcG9ydGVkKSB7XG4gICAgcmV0dXJuIHJvb3QuLypPSyovcXVlcnlTZWxlY3RvckFsbChgOnNjb3BlICR7c2VsZWN0b3J9YCk7XG4gIH1cblxuICAvLyBPbmx5IElFLlxuICBjb25zdCB1bmlxdWUgPSAnaS1hbXBodG1sLXNjb3BlZCc7XG4gIHJvb3QuY2xhc3NMaXN0LmFkZCh1bmlxdWUpO1xuICBjb25zdCBlbGVtZW50cyA9IHJvb3QuLypPSyovcXVlcnlTZWxlY3RvckFsbChgLiR7dW5pcXVlfSAke3NlbGVjdG9yfWApO1xuICByb290LmNsYXNzTGlzdC5yZW1vdmUodW5pcXVlKTtcbiAgcmV0dXJuIGVsZW1lbnRzO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyBlbGVtZW50IGRhdGEtcGFyYW0tIGF0dHJpYnV0ZXMgYXMgdXJsIHBhcmFtZXRlcnMga2V5LXZhbHVlIHBhaXJzLlxuICogZS5nLiBkYXRhLXBhcmFtLXNvbWUtYXR0cj12YWx1ZSAtPiB7c29tZUF0dHI6IHZhbHVlfS5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oc3RyaW5nKTpzdHJpbmc9fSBvcHRfY29tcHV0ZVBhcmFtTmFtZUZ1bmMgdG8gY29tcHV0ZSB0aGVcbiAqICAgIHBhcmFtZXRlciBuYW1lLCBnZXQgcGFzc2VkIHRoZSBjYW1lbC1jYXNlIHBhcmFtZXRlciBuYW1lLlxuICogQHBhcmFtIHshUmVnRXhwPX0gb3B0X3BhcmFtUGF0dGVybiBSZWdleCBwYXR0ZXJuIHRvIG1hdGNoIGRhdGEgYXR0cmlidXRlcy5cbiAqIEByZXR1cm4geyFKc29uT2JqZWN0fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGF0YVBhcmFtc0Zyb21BdHRyaWJ1dGVzKGVsZW1lbnQsIG9wdF9jb21wdXRlUGFyYW1OYW1lRnVuYyxcbiAgb3B0X3BhcmFtUGF0dGVybikge1xuICBjb25zdCBjb21wdXRlUGFyYW1OYW1lRnVuYyA9IG9wdF9jb21wdXRlUGFyYW1OYW1lRnVuYyB8fCAoa2V5ID0+IGtleSk7XG4gIGNvbnN0IHtkYXRhc2V0fSA9IGVsZW1lbnQ7XG4gIGNvbnN0IHBhcmFtcyA9IGRpY3QoKTtcbiAgY29uc3QgcGFyYW1QYXR0ZXJuID0gb3B0X3BhcmFtUGF0dGVybiA/IG9wdF9wYXJhbVBhdHRlcm4gOiAvXnBhcmFtKC4rKS87XG4gIGZvciAoY29uc3Qga2V5IGluIGRhdGFzZXQpIHtcbiAgICBjb25zdCBtYXRjaGVzID0ga2V5Lm1hdGNoKHBhcmFtUGF0dGVybik7XG4gICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgIGNvbnN0IHBhcmFtID0gbWF0Y2hlc1sxXVswXS50b0xvd2VyQ2FzZSgpICsgbWF0Y2hlc1sxXS5zdWJzdHIoMSk7XG4gICAgICBwYXJhbXNbY29tcHV0ZVBhcmFtTmFtZUZ1bmMocGFyYW0pXSA9IGRhdGFzZXRba2V5XTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHBhcmFtcztcbn1cblxuLyoqXG4gKiBXaGV0aGVyIHRoZSBlbGVtZW50IGhhdmUgYSBuZXh0IG5vZGUgaW4gdGhlIGRvY3VtZW50IG9yZGVyLlxuICogVGhpcyBtZWFucyBlaXRoZXI6XG4gKiAgYS4gVGhlIGVsZW1lbnQgaXRzZWxmIGhhcyBhIG5leHRTaWJsaW5nLlxuICogIGIuIEFueSBvZiB0aGUgZWxlbWVudCBhbmNlc3RvcnMgaGFzIGEgbmV4dFNpYmxpbmcuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0gez9Ob2RlfSBvcHRfc3RvcE5vZGVcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNOZXh0Tm9kZUluRG9jdW1lbnRPcmRlcihlbGVtZW50LCBvcHRfc3RvcE5vZGUpIHtcbiAgbGV0IGN1cnJlbnRFbGVtZW50ID0gZWxlbWVudDtcbiAgZG8ge1xuICAgIGlmIChjdXJyZW50RWxlbWVudC5uZXh0U2libGluZykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9IHdoaWxlICgoY3VycmVudEVsZW1lbnQgPSBjdXJyZW50RWxlbWVudC5wYXJlbnROb2RlKSAmJlxuICAgICAgICAgICAgY3VycmVudEVsZW1lbnQgIT0gb3B0X3N0b3BOb2RlKTtcbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5cbi8qKlxuICogRmluZHMgYWxsIGFuY2VzdG9yIGVsZW1lbnRzIHRoYXQgc2F0aXNmeSBwcmVkaWNhdGUuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBjaGlsZFxuICogQHBhcmFtIHtmdW5jdGlvbighRWxlbWVudCk6Ym9vbGVhbn0gcHJlZGljYXRlXG4gKiBAcmV0dXJuIHshQXJyYXk8IUVsZW1lbnQ+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gYW5jZXN0b3JFbGVtZW50cyhjaGlsZCwgcHJlZGljYXRlKSB7XG4gIGNvbnN0IGFuY2VzdG9ycyA9IFtdO1xuICBmb3IgKGxldCBhbmNlc3RvciA9IGNoaWxkLnBhcmVudEVsZW1lbnQ7IGFuY2VzdG9yO1xuICAgIGFuY2VzdG9yID0gYW5jZXN0b3IucGFyZW50RWxlbWVudCkge1xuICAgIGlmIChwcmVkaWNhdGUoYW5jZXN0b3IpKSB7XG4gICAgICBhbmNlc3RvcnMucHVzaChhbmNlc3Rvcik7XG4gICAgfVxuICB9XG4gIHJldHVybiBhbmNlc3RvcnM7XG59XG5cblxuLyoqXG4gKiBGaW5kcyBhbGwgYW5jZXN0b3IgZWxlbWVudHMgdGhhdCBoYXMgdGhlIHNwZWNpZmllZCB0YWcgbmFtZS5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGNoaWxkXG4gKiBAcGFyYW0ge3N0cmluZ30gdGFnTmFtZVxuICogQHJldHVybiB7IUFycmF5PCFFbGVtZW50Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFuY2VzdG9yRWxlbWVudHNCeVRhZyhjaGlsZCwgdGFnTmFtZSkge1xuICB0YWdOYW1lID0gdGFnTmFtZS50b1VwcGVyQ2FzZSgpO1xuICByZXR1cm4gYW5jZXN0b3JFbGVtZW50cyhjaGlsZCwgZWwgPT4ge1xuICAgIHJldHVybiBlbC50YWdOYW1lID09IHRhZ05hbWU7XG4gIH0pO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBjbG9uZSBvZiB0aGUgY29udGVudCBvZiBhIHRlbXBsYXRlIGVsZW1lbnQuXG4gKlxuICogUG9seWZpbGwgdG8gcmVwbGFjZSAuY29udGVudCBhY2Nlc3MgZm9yIGJyb3dzZXJzIHRoYXQgZG8gbm90IHN1cHBvcnRcbiAqIEhUTUxUZW1wbGF0ZUVsZW1lbnRzIG5hdGl2ZWx5LlxuICpcbiAqIEBwYXJhbSB7IUhUTUxUZW1wbGF0ZUVsZW1lbnR8IUVsZW1lbnR9IHRlbXBsYXRlXG4gKiBAcmV0dXJuIHshRG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRlbXBsYXRlQ29udGVudENsb25lKHRlbXBsYXRlKSB7XG4gIGlmICgnY29udGVudCcgaW4gdGVtcGxhdGUpIHtcbiAgICByZXR1cm4gdGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgY29udGVudCA9IHRlbXBsYXRlLm93bmVyRG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIGNvcHlDaGlsZHJlbih0ZW1wbGF0ZSwgY29udGVudCk7XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cbn1cblxuLyoqXG4gKiBJdGVyYXRlIG92ZXIgYW4gYXJyYXktbGlrZS4gU29tZSBjb2xsZWN0aW9ucyBsaWtlIE5vZGVMaXN0IGFyZVxuICogbGF6aWx5IGV2YWx1YXRlZCBpbiBzb21lIGJyb3dzZXJzLCBhbmQgYWNjZXNzaW5nIGBsZW5ndGhgIGZvcmNlcyBmdWxsXG4gKiBldmFsdWF0aW9uLiBXZSBjYW4gaW1wcm92ZSBwZXJmb3JtYW5jZSBieSBpdGVyYXRpbmcgdW50aWwgYW4gZWxlbWVudCBpc1xuICogYHVuZGVmaW5lZGAgdG8gYXZvaWQgY2hlY2tpbmcgdGhlIGBsZW5ndGhgIHByb3BlcnR5LlxuICogVGVzdCBjYXNlczogaHR0cHM6Ly9qc3BlcmYuY29tL2l0ZXJhdGluZy1vdmVyLWNvbGxlY3Rpb25zLW9mLWVsZW1lbnRzXG4gKiBAcGFyYW0geyFJQXJyYXlMaWtlPFQ+fSBpdGVyYWJsZVxuICogQHBhcmFtIHtmdW5jdGlvbihULCBudW1iZXIpfSBjYlxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGl0ZXJhdGVDdXJzb3IoaXRlcmFibGUsIGNiKSB7XG4gIGZvciAobGV0IGkgPSAwLCB2YWx1ZTsgKHZhbHVlID0gaXRlcmFibGVbaV0pICE9PSB1bmRlZmluZWQ7IGkrKykge1xuICAgIGNiKHZhbHVlLCBpKTtcbiAgfVxufVxuXG4vKipcbiAqIFRoaXMgbWV0aG9kIHdyYXBzIGFyb3VuZCB3aW5kb3cncyBvcGVuIG1ldGhvZC4gSXQgZmlyc3QgdHJpZXMgdG8gZXhlY3V0ZVxuICogYG9wZW5gIGNhbGwgd2l0aCB0aGUgcHJvdmlkZWQgdGFyZ2V0IGFuZCBpZiBpdCBmYWlscywgaXQgcmV0cmllcyB0aGUgY2FsbFxuICogd2l0aCB0aGUgYF90b3BgIHRhcmdldC4gVGhpcyBpcyBuZWNlc3NhcnkgZ2l2ZW4gdGhhdCBpbiBzb21lIGVtYmVkZGluZ1xuICogc2NlbmFyaW9zLCBzdWNoIGFzIGlPUycgV0tXZWJWaWV3LCBuYXZpZ2F0aW9uIHRvIGBfYmxhbmtgIGFuZCBvdGhlciB0YXJnZXRzXG4gKiBpcyBibG9ja2VkIGJ5IGRlZmF1bHQuXG4gKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7c3RyaW5nfSB0YXJnZXRcbiAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X2ZlYXR1cmVzXG4gKiBAcmV0dXJuIHs/V2luZG93fVxuICovXG5leHBvcnQgZnVuY3Rpb24gb3BlbldpbmRvd0RpYWxvZyh3aW4sIHVybCwgdGFyZ2V0LCBvcHRfZmVhdHVyZXMpIHtcbiAgLy8gVHJ5IGZpcnN0IHdpdGggdGhlIHNwZWNpZmllZCB0YXJnZXQuIElmIHdlJ3JlIGluc2lkZSB0aGUgV0tXZWJWaWV3IG9yXG4gIC8vIGEgc2ltaWxhciBlbnZpcm9ubWVudHMsIHRoaXMgbWV0aG9kIGlzIGV4cGVjdGVkIHRvIGZhaWwgYnkgZGVmYXVsdCBmb3JcbiAgLy8gYWxsIHRhcmdldHMgZXhjZXB0IGBfdG9wYC5cbiAgbGV0IHJlcztcbiAgdHJ5IHtcbiAgICByZXMgPSB3aW4ub3Blbih1cmwsIHRhcmdldCwgb3B0X2ZlYXR1cmVzKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGRldigpLmVycm9yKCdET00nLCAnRmFpbGVkIHRvIG9wZW4gdXJsIG9uIHRhcmdldDogJywgdGFyZ2V0LCBlKTtcbiAgfVxuXG4gIC8vIFRoZW4gdHJ5IHdpdGggYF90b3BgIHRhcmdldC5cbiAgaWYgKCFyZXMgJiYgdGFyZ2V0ICE9ICdfdG9wJykge1xuICAgIHJlcyA9IHdpbi5vcGVuKHVybCwgJ190b3AnKTtcbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIFdoZXRoZXIgdGhlIGVsZW1lbnQgaXMgYSBzY3JpcHQgdGFnIHdpdGggYXBwbGljYXRpb24vanNvbiB0eXBlLlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzSnNvblNjcmlwdFRhZyhlbGVtZW50KSB7XG4gIHJldHVybiBlbGVtZW50LnRhZ05hbWUgPT0gJ1NDUklQVCcgJiZcbiAgICAgICAgICAgIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0eXBlJykudG9VcHBlckNhc2UoKSA9PSAnQVBQTElDQVRJT04vSlNPTic7XG59XG5cbi8qKlxuICogV2hldGhlciB0aGUgZWxlbWVudCBpcyBhIHNjcmlwdCB0YWcgd2l0aCBhcHBsaWNhdGlvbi9qc29uIHR5cGUuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNKc29uTGRTY3JpcHRUYWcoZWxlbWVudCkge1xuICByZXR1cm4gZWxlbWVudC50YWdOYW1lID09ICdTQ1JJUFQnICYmXG4gICAgICBlbGVtZW50LmdldEF0dHJpYnV0ZSgndHlwZScpLnRvVXBwZXJDYXNlKCkgPT0gJ0FQUExJQ0FUSU9OL0xEK0pTT04nO1xufVxuXG4vKipcbiAqIFdoZXRoZXIgdGhlIHBhZ2UncyBkaXJlY3Rpb24gaXMgcmlnaHQgdG8gbGVmdCBvciBub3QuXG4gKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNSVEwoZG9jKSB7XG4gIGNvbnN0IGRpciA9IGRvYy5ib2R5LmdldEF0dHJpYnV0ZSgnZGlyJylcbiAgICAgICAgICAgICAgICAgfHwgZG9jLmRvY3VtZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RpcicpXG4gICAgICAgICAgICAgICAgIHx8ICdsdHInO1xuICByZXR1cm4gZGlyID09ICdydGwnO1xufVxuXG5cbi8qKlxuICogRXNjYXBlcyBhbiBpZGVudCAoSUQgb3IgYSBjbGFzcyBuYW1lKSB0byBiZSB1c2VkIGFzIGEgQ1NTIHNlbGVjdG9yLlxuICpcbiAqIFNlZSBodHRwczovL2RyYWZ0cy5jc3N3Zy5vcmcvY3Nzb20vI3NlcmlhbGl6ZS1hbi1pZGVudGlmaWVyLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZGVudFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlQ3NzU2VsZWN0b3JJZGVudChpZGVudCkge1xuICByZXR1cm4gY3NzRXNjYXBlKGlkZW50KTtcbn1cblxuLyoqXG4gKiBFc2NhcGVzIGFuIGlkZW50IGluIGEgd2F5IHRoYXQgY2FuIGJlIHVzZWQgYnkgOm50aC1jaGlsZCgpIHBzdWVkby1jbGFzcy5cbiAqXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3czYy9jc3N3Zy1kcmFmdHMvaXNzdWVzLzIzMDYuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBpZGVudFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlQ3NzU2VsZWN0b3JOdGgoaWRlbnQpIHtcbiAgY29uc3QgZXNjYXBlZCA9IFN0cmluZyhpZGVudCk7XG4gIC8vIEVuc3VyZSBpdCBkb2Vzbid0IGNsb3NlIHRoZSBudGgtY2hpbGQgcHN1ZWRvIGNsYXNzLlxuICBkZXYoKS5hc3NlcnQoZXNjYXBlZC5pbmRleE9mKCcpJykgPT09IC0xKTtcbiAgcmV0dXJuIGVzY2FwZWQ7XG59XG5cbi8qKlxuICogRXNjYXBlcyBgPGAsIGA+YCBhbmQgb3RoZXIgSFRNTCBjaGFyY2F0ZXJzIHdpdGggdGhlaXIgZXNjYXBlZCBmb3Jtcy5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlc2NhcGVIdG1sKHRleHQpIHtcbiAgaWYgKCF0ZXh0KSB7XG4gICAgcmV0dXJuIHRleHQ7XG4gIH1cbiAgcmV0dXJuIHRleHQucmVwbGFjZShIVE1MX0VTQ0FQRV9SRUdFWCwgZXNjYXBlSHRtbENoYXIpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBjXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGVzY2FwZUh0bWxDaGFyKGMpIHtcbiAgcmV0dXJuIEhUTUxfRVNDQVBFX0NIQVJTW2NdO1xufVxuXG4vKipcbiAqIFRyaWVzIHRvIGZvY3VzIG9uIHRoZSBnaXZlbiBlbGVtZW50OyBmYWlscyBzaWxlbnRseSBpZiBicm93c2VyIHRocm93cyBhblxuICogZXhjZXB0aW9uLlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJ5Rm9jdXMoZWxlbWVudCkge1xuICB0cnkge1xuICAgIGVsZW1lbnQuLypPSyovZm9jdXMoKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIElFIDw9IDcgbWF5IHRocm93IGV4Y2VwdGlvbnMgd2hlbiBmb2N1c2luZyBvbiBoaWRkZW4gaXRlbXMuXG4gIH1cbn1cblxuLyoqXG4gKiBXaGV0aGVyIHRoZSBnaXZlbiB3aW5kb3cgaXMgaW4gYW4gaWZyYW1lIG9yIG5vdC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNJZnJhbWVkKHdpbikge1xuICByZXR1cm4gd2luLnBhcmVudCAmJiB3aW4ucGFyZW50ICE9IHdpbjtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHRoaXMgZWxlbWVudCBpcyBhbiBBTVAgZWxlbWVudFxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQW1wRWxlbWVudChlbGVtZW50KSB7XG4gIGNvbnN0IHRhZyA9IGVsZW1lbnQudGFnTmFtZTtcbiAgLy8gVXNlIHByZWZpeCB0byByZWNvZ25pemUgQU1QIGVsZW1lbnQuIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugc3R1YlxuICAvLyBtYXkgbm90IGJlIGF0dGFjaGVkIHlldC5cbiAgcmV0dXJuIHN0YXJ0c1dpdGgodGFnLCAnQU1QLScpICYmXG4gICAgICAvLyBTb21lIFwiYW1wLSpcIiBlbGVtZW50cyBhcmUgbm90IHJlYWxseSBBTVAgZWxlbWVudHMuIDpzbWg6XG4gICAgICAhKHRhZyA9PSAnQU1QLVNUSUNLWS1BRC1UT1AtUEFERElORycgfHwgdGFnID09ICdBTVAtQk9EWScpO1xufVxuXG4vKipcbiAqIFJldHVybiBhIHByb21pc2UgdGhhdCByZXNvbHZlIHdoZW4gYW4gQU1QIGVsZW1lbnQgdXBncmFkZSBmcm9tIEhUTUxFbGVtZW50XG4gKiB0byBDdXN0b21FbGVtZW50XG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcmV0dXJuIHshUHJvbWlzZTwhRWxlbWVudD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aGVuVXBncmFkZWRUb0N1c3RvbUVsZW1lbnQoZWxlbWVudCkge1xuICBkZXYoKS5hc3NlcnQoaXNBbXBFbGVtZW50KGVsZW1lbnQpLCAnZWxlbWVudCBpcyBub3QgQW1wRWxlbWVudCcpO1xuICBpZiAoZWxlbWVudC5jcmVhdGVkQ2FsbGJhY2spIHtcbiAgICAvLyBFbGVtZW50IGFscmVhZHkgaXMgQ3VzdG9tRWxlbWVudDtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGVsZW1lbnQpO1xuICB9XG4gIC8vIElmIEVsZW1lbnQgaXMgc3RpbGwgSFRNTEVsZW1lbnQsIHdhaXQgZm9yIGl0IHRvIHVwZ3JhZGUgdG8gY3VzdG9tRWxlbWVudFxuICAvLyBOb3RlOiB1c2UgcHVyZSBzdHJpbmcgdG8gYXZvaWQgb2JmdXNjYXRpb24gYmV0d2VlbiB2ZXJzaW9ucy5cbiAgaWYgKCFlbGVtZW50W1VQR1JBREVfVE9fQ1VTVE9NRUxFTUVOVF9QUk9NSVNFXSkge1xuICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XG4gICAgZWxlbWVudFtVUEdSQURFX1RPX0NVU1RPTUVMRU1FTlRfUFJPTUlTRV0gPSBkZWZlcnJlZC5wcm9taXNlO1xuICAgIGVsZW1lbnRbVVBHUkFERV9UT19DVVNUT01FTEVNRU5UX1JFU09MVkVSXSA9IGRlZmVycmVkLnJlc29sdmU7XG5cbiAgfVxuXG4gIHJldHVybiBlbGVtZW50W1VQR1JBREVfVE9fQ1VTVE9NRUxFTUVOVF9QUk9NSVNFXTtcbn1cblxuLyoqXG4gKiBSZXBsYWNlbWVudCBmb3IgYEVsZW1lbnQucmVxdWVzdEZ1bGxzY3JlZW4oKWAgbWV0aG9kLlxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0VsZW1lbnQvcmVxdWVzdEZ1bGxzY3JlZW5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZ1bGxzY3JlZW5FbnRlcihlbGVtZW50KSB7XG4gIGNvbnN0IHJlcXVlc3RGcyA9IGVsZW1lbnQucmVxdWVzdEZ1bGxzY3JlZW5cbiAgIHx8IGVsZW1lbnQucmVxdWVzdEZ1bGxTY3JlZW5cbiAgIHx8IGVsZW1lbnQud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW5cbiAgIHx8IGVsZW1lbnQud2Via2l0UmVxdWVzdEZ1bGxTY3JlZW5cbiAgIHx8IGVsZW1lbnQud2Via2l0RW50ZXJGdWxsc2NyZWVuXG4gICB8fCBlbGVtZW50LndlYmtpdEVudGVyRnVsbFNjcmVlblxuICAgfHwgZWxlbWVudC5tc1JlcXVlc3RGdWxsc2NyZWVuXG4gICB8fCBlbGVtZW50Lm1zUmVxdWVzdEZ1bGxTY3JlZW5cbiAgIHx8IGVsZW1lbnQubW96UmVxdWVzdEZ1bGxzY3JlZW5cbiAgIHx8IGVsZW1lbnQubW96UmVxdWVzdEZ1bGxTY3JlZW47XG4gIGlmIChyZXF1ZXN0RnMpIHtcbiAgICByZXF1ZXN0RnMuY2FsbChlbGVtZW50KTtcbiAgfVxufVxuXG4vKipcbiAqIFJlcGxhY2VtZW50IGZvciBgRG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4oKWAgbWV0aG9kLlxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0RvY3VtZW50L2V4aXRGdWxsc2NyZWVuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmdWxsc2NyZWVuRXhpdChlbGVtZW50KSB7XG4gIGxldCBleGl0RnMgPSBlbGVtZW50LmNhbmNlbEZ1bGxTY3JlZW5cbiAgICAgICAgICAgICAgwqB8fCBlbGVtZW50LmV4aXRGdWxsc2NyZWVuXG4gICAgICAgICAgICAgIMKgfHwgZWxlbWVudC5leGl0RnVsbFNjcmVlblxuICAgICAgICAgICAgICDCoHx8IGVsZW1lbnQud2Via2l0RXhpdEZ1bGxzY3JlZW5cbiAgICAgICAgICAgICAgwqB8fCBlbGVtZW50LndlYmtpdEV4aXRGdWxsU2NyZWVuXG4gICAgICAgICAgICAgIMKgfHwgZWxlbWVudC53ZWJraXRDYW5jZWxGdWxsU2NyZWVuXG4gICAgICAgICAgICAgIMKgfHwgZWxlbWVudC5tb3pDYW5jZWxGdWxsU2NyZWVuXG4gICAgICAgICAgICAgIMKgfHwgZWxlbWVudC5tc0V4aXRGdWxsc2NyZWVuO1xuICBpZiAoZXhpdEZzKSB7XG4gICAgZXhpdEZzLmNhbGwoZWxlbWVudCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChlbGVtZW50Lm93bmVyRG9jdW1lbnQpIHtcbiAgICBleGl0RnMgPSBlbGVtZW50Lm93bmVyRG9jdW1lbnQuY2FuY2VsRnVsbFNjcmVlblxuICAgICAgICAgICAgIHx8IGVsZW1lbnQub3duZXJEb2N1bWVudC5leGl0RnVsbHNjcmVlblxuICAgICAgICAgICAgIHx8IGVsZW1lbnQub3duZXJEb2N1bWVudC5leGl0RnVsbFNjcmVlblxuICAgICAgICAgICAgIHx8IGVsZW1lbnQub3duZXJEb2N1bWVudC53ZWJraXRFeGl0RnVsbHNjcmVlblxuICAgICAgICAgICAgIHx8IGVsZW1lbnQub3duZXJEb2N1bWVudC53ZWJraXRFeGl0RnVsbFNjcmVlblxuICAgICAgICAgICAgIHx8IGVsZW1lbnQub3duZXJEb2N1bWVudC53ZWJraXRDYW5jZWxGdWxsU2NyZWVuXG4gICAgICAgICAgICAgfHwgZWxlbWVudC5vd25lckRvY3VtZW50Lm1vekNhbmNlbEZ1bGxTY3JlZW5cbiAgICAgICAgICAgICB8fCBlbGVtZW50Lm93bmVyRG9jdW1lbnQubXNFeGl0RnVsbHNjcmVlbjtcbiAgfVxuICBpZiAoZXhpdEZzKSB7XG4gICAgZXhpdEZzLmNhbGwoZWxlbWVudC5vd25lckRvY3VtZW50KTtcbiAgICByZXR1cm47XG4gIH1cbn1cblxuXG4vKipcbiAqIFJlcGxhY2VtZW50IGZvciBgRG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnRgLlxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0RvY3VtZW50L2Z1bGxzY3JlZW5FbGVtZW50XG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNGdWxsc2NyZWVuRWxlbWVudChlbGVtZW50KSB7XG4gIGNvbnN0IGlzRnVsbHNjcmVlbiA9IGVsZW1lbnQud2Via2l0RGlzcGxheWluZ0Z1bGxzY3JlZW47XG4gIGlmIChpc0Z1bGxzY3JlZW4pIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoZWxlbWVudC5vd25lckRvY3VtZW50KSB7XG4gICAgY29uc3QgZnVsbHNjcmVlbkVsZW1lbnQgPSBlbGVtZW50Lm93bmVyRG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnRcbiAgICAgICAgICAgICB8fCBlbGVtZW50Lm93bmVyRG9jdW1lbnQud2Via2l0RnVsbHNjcmVlbkVsZW1lbnRcbiAgICAgICAgICAgICB8fCBlbGVtZW50Lm93bmVyRG9jdW1lbnQubW96RnVsbFNjcmVlbkVsZW1lbnRcbiAgICAgICAgICAgICB8fCBlbGVtZW50LndlYmtpdEN1cnJlbnRGdWxsU2NyZWVuRWxlbWVudDtcbiAgICBpZiAoZnVsbHNjcmVlbkVsZW1lbnQgPT0gZWxlbWVudCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgbm9kZSBpcyBub3QgZGlzYWJsZWQuXG4gKlxuICogSUU4IGNhbiByZXR1cm4gZmFsc2UgcG9zaXRpdmVzLCBzZWUge0BsaW5rIG1hdGNoZXN9LlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqIEBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2Zvcm1zLmh0bWwjY29uY2VwdC1mZS1kaXNhYmxlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNFbmFibGVkKGVsZW1lbnQpIHtcbiAgcmV0dXJuICEoZWxlbWVudC5kaXNhYmxlZCB8fCBtYXRjaGVzKGVsZW1lbnQsICc6ZGlzYWJsZWQnKSk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0ICogYXMgZG9tIGZyb20gJy4vZG9tJztcbmltcG9ydCB7XG4gIGdldEFtcGRvYyxcbiAgZ2V0RXhpc3RpbmdTZXJ2aWNlRm9yRG9jSW5FbWJlZFNjb3BlLFxuICBnZXRTZXJ2aWNlLFxuICBnZXRTZXJ2aWNlUHJvbWlzZSxcbiAgZ2V0U2VydmljZVByb21pc2VGb3JEb2MsXG4gIGdldFNlcnZpY2VQcm9taXNlT3JOdWxsLFxuICBnZXRTZXJ2aWNlUHJvbWlzZU9yTnVsbEZvckRvYyxcbiAgZ2V0VG9wV2luZG93LFxufSBmcm9tICcuL3NlcnZpY2UnO1xuaW1wb3J0IHt0b1dpbn0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQge3VzZXJ9IGZyb20gJy4vbG9nJztcblxuLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSBmb3IgYSBzZXJ2aWNlIGZvciB0aGUgZ2l2ZW4gaWQgYW5kIHdpbmRvdy4gQWxzbyBleHBlY3RzIGFuXG4gKiBlbGVtZW50IHRoYXQgaGFzIHRoZSBhY3R1YWwgaW1wbGVtZW50YXRpb24uIFRoZSBwcm9taXNlIHJlc29sdmVzIHdoZW4gdGhlXG4gKiBpbXBsZW1lbnRhdGlvbiBsb2FkZWQuIFVzZXJzIHNob3VsZCB0eXBpY2FsbHkgd3JhcCB0aGlzIGFzIGEgc3BlY2lhbCBwdXJwb3NlXG4gKiBmdW5jdGlvbiAoZS5nLiBTZXJ2aWNlcy52aWV3cG9ydEZvckRvYyguLi4pKSBmb3IgdHlwZSBzYWZldHkgYW5kIGJlY2F1c2UgdGhlXG4gKiBmYWN0b3J5IHNob3VsZCBub3QgYmUgcGFzc2VkIGFyb3VuZC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gZXh0ZW5zaW9uIE5hbWUgb2YgdGhlIGN1c3RvbSBleHRlbnNpb24gdGhhdCBwcm92aWRlcyB0aGVcbiAqICAgICBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzIHNlcnZpY2UuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfZWxlbWVudCBXaGV0aGVyIHRoaXMgc2VydmljZSBpcyBwcm92aWRlZCBieSBhbiBlbGVtZW50LFxuICogICAgIG5vdCB0aGUgZXh0ZW5zaW9uLlxuICogQHJldHVybiB7IVByb21pc2U8Kj59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50U2VydmljZSh3aW4sIGlkLCBleHRlbnNpb24sIG9wdF9lbGVtZW50KSB7XG4gIHJldHVybiBnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlKHdpbiwgaWQsIGV4dGVuc2lvbiwgb3B0X2VsZW1lbnQpLnRoZW4oXG4gICAgICBzZXJ2aWNlID0+IGFzc2VydFNlcnZpY2Uoc2VydmljZSwgaWQsIGV4dGVuc2lvbikpO1xufVxuXG4vKipcbiAqIFNhbWUgYXMgZ2V0RWxlbWVudFNlcnZpY2UgYnV0IHByb2R1Y2VzIG51bGwgaWYgdGhlIGdpdmVuIGVsZW1lbnQgaXMgbm90XG4gKiBhY3R1YWxseSBhdmFpbGFibGUgb24gdGhlIGN1cnJlbnQgcGFnZS5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gZXh0ZW5zaW9uIE5hbWUgb2YgdGhlIGN1c3RvbSBleHRlbnNpb24gdGhhdCBwcm92aWRlcyB0aGVcbiAqICAgICBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzIHNlcnZpY2UuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfZWxlbWVudCBXaGV0aGVyIHRoaXMgc2VydmljZSBpcyBwcm92aWRlZCBieSBhblxuICogICAgIGVsZW1lbnQsIG5vdCB0aGUgZXh0ZW5zaW9uLlxuICogQHJldHVybiB7IVByb21pc2U8P09iamVjdD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlKHdpbiwgaWQsIGV4dGVuc2lvbiwgb3B0X2VsZW1lbnQpIHtcbiAgY29uc3QgcyA9IGdldFNlcnZpY2VQcm9taXNlT3JOdWxsKHdpbiwgaWQpO1xuICBpZiAocykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlPD9PYmplY3Q+fSAqLyAocyk7XG4gIH1cbiAgcmV0dXJuIGdldEVsZW1lbnRTZXJ2aWNlUHJvbWlzZU9yTnVsbCh3aW4sIGlkLCBleHRlbnNpb24sIG9wdF9lbGVtZW50KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IGVsZW1lbnROYW1lIE5hbWUgb2YgYW4gZXh0ZW5kZWQgY3VzdG9tIGVsZW1lbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoaXMgZWxlbWVudCBpcyBzY2hlZHVsZWQgdG8gYmUgbG9hZGVkLlxuICovXG5mdW5jdGlvbiBpc0VsZW1lbnRTY2hlZHVsZWQod2luLCBlbGVtZW50TmFtZSkge1xuICAvLyBTZXQgaW4gY3VzdG9tLWVsZW1lbnQuanNcbiAgaWYgKCF3aW4uYW1wRXh0ZW5kZWRFbGVtZW50cykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gISF3aW4uYW1wRXh0ZW5kZWRFbGVtZW50c1tlbGVtZW50TmFtZV07XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSBmb3IgYSBzZXJ2aWNlIGZvciB0aGUgZ2l2ZW4gaWQgYW5kIHdpbmRvdy4gQWxzbyBleHBlY3RzIGFuXG4gKiBlbGVtZW50IHRoYXQgaGFzIHRoZSBhY3R1YWwgaW1wbGVtZW50YXRpb24uIFRoZSBwcm9taXNlIHJlc29sdmVzIHdoZW4gdGhlXG4gKiBpbXBsZW1lbnRhdGlvbiBsb2FkZWQuIFVzZXJzIHNob3VsZCB0eXBpY2FsbHkgd3JhcCB0aGlzIGFzIGEgc3BlY2lhbCBwdXJwb3NlXG4gKiBmdW5jdGlvbiAoZS5nLiBTZXJ2aWNlcy52aWV3cG9ydEZvckRvYyguLi4pKSBmb3IgdHlwZSBzYWZldHkgYW5kIGJlY2F1c2UgdGhlXG4gKiBmYWN0b3J5IHNob3VsZCBub3QgYmUgcGFzc2VkIGFyb3VuZC5cbiAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICogQHBhcmFtIHtzdHJpbmd9IGlkIG9mIHRoZSBzZXJ2aWNlLlxuICogQHBhcmFtIHtzdHJpbmd9IGV4dGVuc2lvbiBOYW1lIG9mIHRoZSBjdXN0b20gZXh0ZW5zaW9uIHRoYXQgcHJvdmlkZXMgdGhlXG4gKiAgICAgaW1wbGVtZW50YXRpb24gb2YgdGhpcyBzZXJ2aWNlLlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2VsZW1lbnQgV2hldGhlciB0aGlzIHNlcnZpY2UgaXMgcHJvdmlkZWQgYnkgYW4gZWxlbWVudCxcbiAqICAgICBub3QgdGhlIGV4dGVuc2lvbi5cbiAqIEByZXR1cm4geyFQcm9taXNlPCo+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudFNlcnZpY2VGb3JEb2MoZWxlbWVudE9yQW1wRG9jLCBpZCwgZXh0ZW5zaW9uLFxuICBvcHRfZWxlbWVudCkge1xuICByZXR1cm4gZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZUZvckRvYyhcbiAgICAgIGVsZW1lbnRPckFtcERvYywgaWQsIGV4dGVuc2lvbiwgb3B0X2VsZW1lbnQpXG4gICAgICAudGhlbihzZXJ2aWNlID0+IGFzc2VydFNlcnZpY2Uoc2VydmljZSwgaWQsIGV4dGVuc2lvbikpO1xufVxuXG4vKipcbiAqIFNhbWUgYXMgZ2V0RWxlbWVudFNlcnZpY2UgYnV0IHByb2R1Y2VzIG51bGwgaWYgdGhlIGdpdmVuIGVsZW1lbnQgaXMgbm90XG4gKiBhY3R1YWxseSBhdmFpbGFibGUgb24gdGhlIGN1cnJlbnQgcGFnZS5cbiAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICogQHBhcmFtIHtzdHJpbmd9IGlkIG9mIHRoZSBzZXJ2aWNlLlxuICogQHBhcmFtIHtzdHJpbmd9IGV4dGVuc2lvbiBOYW1lIG9mIHRoZSBjdXN0b20gZXh0ZW5zaW9uIHRoYXQgcHJvdmlkZXMgdGhlXG4gKiAgICAgaW1wbGVtZW50YXRpb24gb2YgdGhpcyBzZXJ2aWNlLlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2VsZW1lbnQgV2hldGhlciB0aGlzIHNlcnZpY2UgaXMgcHJvdmlkZWQgYnkgYW5cbiAqICAgICBlbGVtZW50LCBub3QgdGhlIGV4dGVuc2lvbi5cbiAqIEByZXR1cm4geyFQcm9taXNlPD9PYmplY3Q+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZUZvckRvYyhcbiAgZWxlbWVudE9yQW1wRG9jLCBpZCwgZXh0ZW5zaW9uLCBvcHRfZWxlbWVudCkge1xuICBjb25zdCBhbXBkb2MgPSBnZXRBbXBkb2MoZWxlbWVudE9yQW1wRG9jKTtcbiAgY29uc3QgcyA9IGdldFNlcnZpY2VQcm9taXNlT3JOdWxsRm9yRG9jKGVsZW1lbnRPckFtcERvYywgaWQpO1xuICBpZiAocykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlPD9PYmplY3Q+fSAqLyAocyk7XG4gIH1cblxuICByZXR1cm4gYW1wZG9jLndoZW5Cb2R5QXZhaWxhYmxlKClcbiAgICAgIC50aGVuKCgpID0+IHdhaXRGb3JFeHRlbnNpb25JZlByZXNlbnQoXG4gICAgICAgICAgYW1wZG9jLndpbiwgZXh0ZW5zaW9uLFxuICAgICAgICAgIGFtcGRvYy5nZXRIZWFkTm9kZSgpKSlcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgLy8gSWYgdGhpcyBzZXJ2aWNlIGlzIHByb3ZpZGVkIGJ5IGFuIGVsZW1lbnQsIHRoZW4gd2UgY2FuJ3QgZGVwZW5kIG9uXG4gICAgICAgIC8vIHRoZSBzZXJ2aWNlICh0aGV5IG1heSBub3QgdXNlIHRoZSBlbGVtZW50KS5cbiAgICAgICAgaWYgKG9wdF9lbGVtZW50KSB7XG4gICAgICAgICAgcmV0dXJuIGdldFNlcnZpY2VQcm9taXNlT3JOdWxsRm9yRG9jKGVsZW1lbnRPckFtcERvYywgaWQpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzRWxlbWVudFNjaGVkdWxlZChhbXBkb2Mud2luLCBleHRlbnNpb24pKSB7XG4gICAgICAgICAgcmV0dXJuIGdldFNlcnZpY2VQcm9taXNlRm9yRG9jKGVsZW1lbnRPckFtcERvYywgaWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2UgZm9yIHNlcnZpY2UgZm9yIHRoZSBnaXZlbiBpZCBpbiB0aGUgZW1iZWQgc2NvcGUgb2ZcbiAqIGEgZ2l2ZW4gbm9kZSwgaWYgaXQgZXhpc3RzLiBPdGhlcndpc2UsIGZhbGxzIGJhY2sgdG8gYW1wZG9jIHNjb3BlIElGRlxuICogdGhlIGdpdmVuIG5vZGUgaXMgaW4gdGhlIHRvcC1sZXZlbCB3aW5kb3cuXG4gKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBvZiB0aGUgc2VydmljZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBleHRlbnNpb24gTmFtZSBvZiB0aGUgY3VzdG9tIGVsZW1lbnQgdGhhdCBwcm92aWRlc1xuICogICAgIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzIHNlcnZpY2UuXG4gKiBAcmV0dXJuIHshUHJvbWlzZTw/T2JqZWN0Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnRTZXJ2aWNlSWZBdmFpbGFibGVGb3JEb2NJbkVtYmVkU2NvcGUoXG4gIGVsZW1lbnRPckFtcERvYywgaWQsIGV4dGVuc2lvbikge1xuICBjb25zdCBzID0gZ2V0RXhpc3RpbmdTZXJ2aWNlRm9yRG9jSW5FbWJlZFNjb3BlKGVsZW1lbnRPckFtcERvYywgaWQpO1xuICBpZiAocykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlPD9PYmplY3Q+fSAqLyAoUHJvbWlzZS5yZXNvbHZlKHMpKTtcbiAgfVxuICAvLyBSZXR1cm4gZW1iZWQtc2NvcGUgZWxlbWVudCBzZXJ2aWNlIHByb21pc2UgaWYgc2NoZWR1bGVkLlxuICBpZiAoZWxlbWVudE9yQW1wRG9jLm5vZGVUeXBlKSB7XG4gICAgY29uc3Qgd2luID0gdG9XaW4oZWxlbWVudE9yQW1wRG9jLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcpO1xuICAgIGNvbnN0IHRvcFdpbiA9IGdldFRvcFdpbmRvdyh3aW4pO1xuICAgIC8vIEluIGVtYmVkcywgZG9jLXNjb3BlIHNlcnZpY2VzIGFyZSB3aW5kb3ctc2NvcGUuIEJ1dCBtYWtlIHN1cmUgdG9cbiAgICAvLyBvbmx5IGRvIHRoaXMgZm9yIGVtYmVkcyAobm90IHRoZSB0b3Agd2luZG93KSwgb3RoZXJ3aXNlIHdlJ2QgZ3JhYlxuICAgIC8vIGEgcHJvbWlzZSBmcm9tIHRoZSB3cm9uZyBzZXJ2aWNlIGhvbGRlciB3aGljaCB3b3VsZCBuZXZlciByZXNvbHZlLlxuICAgIGlmICh3aW4gIT09IHRvcFdpbikge1xuICAgICAgcmV0dXJuIGdldEVsZW1lbnRTZXJ2aWNlUHJvbWlzZU9yTnVsbCh3aW4sIGlkLCBleHRlbnNpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBGYWxsYmFjayB0byBhbXBkb2MgSUZGIHRoZSBnaXZlbiBub2RlIGlzIF9ub3RfIEZJRS5cbiAgICAgIHJldHVybiBnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlRm9yRG9jKGVsZW1lbnRPckFtcERvYywgaWQsIGV4dGVuc2lvbik7XG4gICAgfVxuICB9XG4gIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlPD9PYmplY3Q+fSAqLyAoUHJvbWlzZS5yZXNvbHZlKG51bGwpKTtcbn1cblxuLyoqXG4gKiBUaHJvd3MgdXNlciBlcnJvciBpZiBgc2VydmljZWAgaXMgbnVsbC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBzZXJ2aWNlXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBleHRlbnNpb25cbiAqIEByZXR1cm4geyFPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBhc3NlcnRTZXJ2aWNlKHNlcnZpY2UsIGlkLCBleHRlbnNpb24pIHtcbiAgcmV0dXJuIC8qKiBAdHlwZSB7IU9iamVjdH0gKi8gKHVzZXIoKS5hc3NlcnQoc2VydmljZSxcbiAgICAgICdTZXJ2aWNlICVzIHdhcyByZXF1ZXN0ZWQgdG8gYmUgcHJvdmlkZWQgdGhyb3VnaCAlcywgJyArXG4gICAgICAnYnV0ICVzIGlzIG5vdCBsb2FkZWQgaW4gdGhlIGN1cnJlbnQgcGFnZS4gVG8gZml4IHRoaXMgJyArXG4gICAgICAncHJvYmxlbSBsb2FkIHRoZSBKYXZhU2NyaXB0IGZpbGUgZm9yICVzIGluIHRoaXMgcGFnZS4nLFxuICAgICAgaWQsIGV4dGVuc2lvbiwgZXh0ZW5zaW9uLCBleHRlbnNpb24pKTtcbn1cblxuLyoqXG4gKiBHZXQgbGlzdCBvZiBhbGwgdGhlIGV4dGVuc2lvbiBKUyBmaWxlc1xuICogQHBhcmFtIHtIVE1MSGVhZEVsZW1lbnR8RWxlbWVudHxTaGFkb3dSb290fSBoZWFkXG4gKiBAcmV0dXJuIHshQXJyYXk8c3RyaW5nPn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuc2lvblNjcmlwdHNJbk5vZGUoaGVhZCkge1xuICAvLyBhbXBkb2MuZ2V0SGVhZE5vZGUoKSBjYW4gcmV0dXJuIG51bGxcbiAgaWYgKCFoZWFkKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGNvbnN0IHNjcmlwdHMgPSBbXTtcbiAgY29uc3QgbGlzdCA9IGhlYWQucXVlcnlTZWxlY3RvckFsbCgnc2NyaXB0W2N1c3RvbS1lbGVtZW50XScpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICBzY3JpcHRzLnB1c2gobGlzdFtpXS5nZXRBdHRyaWJ1dGUoJ2N1c3RvbS1lbGVtZW50JykpO1xuICB9XG4gIHJldHVybiBzY3JpcHRzO1xufVxuXG4vKipcbiAqIFdhaXRzIGZvciBib2R5IHRvIGJlIHByZXNlbnQgdGhlbiB2ZXJpZmllcyB0aGF0IGFuIGV4dGVuc2lvbiBzY3JpcHQgaXNcbiAqIHByZXNlbnQgaW4gaGVhZCBmb3IgaW5zdGFsbGF0aW9uLlxuICogQHBhcmFtIHshLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gYW1wZG9jXG4gKiBAcGFyYW0ge3N0cmluZ30gZXh0ZW5zaW9uSWRcbiAqIEByZXR1cm4geyFQcm9taXNlPGJvb2xlYW4+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNFeHRlbnNpb25TY3JpcHRJbk5vZGUoYW1wZG9jLCBleHRlbnNpb25JZCkge1xuICByZXR1cm4gYW1wZG9jLndoZW5Cb2R5QXZhaWxhYmxlKClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgcmV0dXJuIGV4dGVuc2lvblNjcmlwdEluTm9kZShcbiAgICAgICAgICAgIGFtcGRvYy5nZXRIZWFkTm9kZSgpLCBleHRlbnNpb25JZCk7XG4gICAgICB9KTtcbn1cblxuLyoqXG4gKiBWZXJpZmllcyB0aGF0IGFuIGV4dGVuc2lvbiBzY3JpcHQgaXMgcHJlc2VudCBpbiBoZWFkIGZvclxuICogaW5zdGFsbGF0aW9uLlxuICogQHBhcmFtIHtIVE1MSGVhZEVsZW1lbnR8RWxlbWVudHxTaGFkb3dSb290fSBoZWFkXG4gKiBAcGFyYW0ge3N0cmluZ30gZXh0ZW5zaW9uSWRcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGV4dGVuc2lvblNjcmlwdEluTm9kZShoZWFkLCBleHRlbnNpb25JZCkge1xuICByZXR1cm4gZXh0ZW5zaW9uU2NyaXB0c0luTm9kZShoZWFkKS5pbmNsdWRlcyhleHRlbnNpb25JZCk7XG59XG5cbi8qKlxuICogV2FpdHMgZm9yIGFuIGV4dGVuc2lvbiBpZiBpdHMgc2NyaXB0IGlzIHByZXNlbnRcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gZXh0ZW5zaW9uXG4gKiBAcGFyYW0ge0hUTUxIZWFkRWxlbWVudHxFbGVtZW50fFNoYWRvd1Jvb3R9IGhlYWRcbiAqIEByZXR1cm4geyFQcm9taXNlfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gd2FpdEZvckV4dGVuc2lvbklmUHJlc2VudCh3aW4sIGV4dGVuc2lvbiwgaGVhZCkge1xuICAvKipcbiAgICogSWYgdGhlcmUgaXMgYW4gZXh0ZW5zaW9uIHNjcmlwdCB3YWl0IGZvciBpdCB0byBsb2FkIGJlZm9yZSB0cnlpbmdcbiAgICogdG8gZ2V0IHRoZSBzZXJ2aWNlLiBQcmV2ZW50cyBhIHJhY2UgY29uZGl0aW9uIHdoZW4gZXZlcnl0aGluZyBidXRcbiAgICogdGhlIGV4dGVuc2lvbnMgaXMgaW4gY2FjaGUuIElmIHRoZXJlIGlzIG5vIHNjcmlwdCB0aGVuIGl0J3MgZWl0aGVyXG4gICAqIG5vdCBwcmVzZW50LCBvciB0aGUgc2VydmljZSB3YXMgZGVmaW5lZCBieSBhIHRlc3QuIEluIHRob3NlIGNhc2VzXG4gICAqIHdlIGRvbid0IHdhaXQgYXJvdW5kIGZvciBhbiBleHRlbnNpb24gdGhhdCBkb2VzIG5vdCBleGlzdC5cbiAgICovXG5cbiAgLy8gVE9ETyhqcGV0dGl0dCkgaW52ZXN0aWdhdGUgcmVnaXN0ZXJFeHRlbnNpb24gdG8gc2hvcnQgY2lyY3VpdFxuICAvLyB0aGUgZG9tIGNhbGwgaW4gZXh0ZW5zaW9uU2NyaXB0c0luTm9kZSgpXG4gIGlmICghZXh0ZW5zaW9uU2NyaXB0SW5Ob2RlKGhlYWQsIGV4dGVuc2lvbikpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cblxuICBjb25zdCBleHRlbnNpb25zID0gZ2V0U2VydmljZSh3aW4sICdleHRlbnNpb25zJyk7XG4gIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlPD9PYmplY3Q+fSAqLyAoXG4gICAgZXh0ZW5zaW9ucy53YWl0Rm9yRXh0ZW5zaW9uKHdpbiwgZXh0ZW5zaW9uKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgcHJvbWlzZSBmb3Igc2VydmljZSB3aXRoIGBpZGAgb24gdGhlIGdpdmVuIHdpbmRvdyBpZiBhdmFpbGFibGUuXG4gKiBPdGhlcndpc2UsIHJlc29sdmVzIHdpdGggbnVsbCAoc2VydmljZSB3YXMgbm90IHJlZ2lzdGVyZWQpLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICogQHBhcmFtIHtzdHJpbmd9IGV4dGVuc2lvblxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2VsZW1lbnRcbiAqIEByZXR1cm4geyFQcm9taXNlPE9iamVjdD59XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBnZXRFbGVtZW50U2VydmljZVByb21pc2VPck51bGwod2luLCBpZCwgZXh0ZW5zaW9uLCBvcHRfZWxlbWVudCkge1xuICByZXR1cm4gZG9tLndhaXRGb3JCb2R5UHJvbWlzZSh3aW4uZG9jdW1lbnQpXG4gICAgICAudGhlbigoKSA9PiB3YWl0Rm9yRXh0ZW5zaW9uSWZQcmVzZW50KHdpbiwgZXh0ZW5zaW9uLCB3aW4uZG9jdW1lbnQuaGVhZCkpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIC8vIElmIHRoaXMgc2VydmljZSBpcyBwcm92aWRlZCBieSBhbiBlbGVtZW50LCB0aGVuIHdlIGNhbid0IGRlcGVuZCBvblxuICAgICAgICAvLyB0aGUgc2VydmljZSAodGhleSBtYXkgbm90IHVzZSB0aGUgZWxlbWVudCkuXG4gICAgICAgIGlmIChvcHRfZWxlbWVudCkge1xuICAgICAgICAgIHJldHVybiBnZXRTZXJ2aWNlUHJvbWlzZU9yTnVsbCh3aW4sIGlkKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc0VsZW1lbnRTY2hlZHVsZWQod2luLCBleHRlbnNpb24pKSB7XG4gICAgICAgICAgcmV0dXJuIGdldFNlcnZpY2VQcm9taXNlKHdpbiwgaWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuXG5pbXBvcnQge0FtcEV2ZW50c30gZnJvbSAnLi9hbXAtZXZlbnRzJztcbmltcG9ydCB7U2VydmljZXN9IGZyb20gJy4vc2VydmljZXMnO1xuaW1wb3J0IHtcbiAgVVNFUl9FUlJPUl9TRU5USU5FTCxcbiAgZGV2LFxuICBkdXBsaWNhdGVFcnJvcklmTmVjZXNzYXJ5LFxuICBpc1VzZXJFcnJvckVtYmVkLFxuICBpc1VzZXJFcnJvck1lc3NhZ2UsXG59IGZyb20gJy4vbG9nJztcbmltcG9ydCB7ZXhwZXJpbWVudFRvZ2dsZXNPck51bGwsIGdldEJpbmFyeVR5cGUsIGlzQ2FuYXJ5fSBmcm9tICcuL2V4cGVyaW1lbnRzJztcbmltcG9ydCB7ZXhwb25lbnRpYWxCYWNrb2ZmfSBmcm9tICcuL2V4cG9uZW50aWFsLWJhY2tvZmYnO1xuaW1wb3J0IHtnZXRNb2RlfSBmcm9tICcuL21vZGUnO1xuaW1wb3J0IHtpc0V4cGVyaW1lbnRPbn0gZnJvbSAnLi9leHBlcmltZW50cyc7XG5pbXBvcnQge1xuICBpc0xvYWRFcnJvck1lc3NhZ2UsXG59IGZyb20gJy4vZXZlbnQtaGVscGVyJztcbmltcG9ydCB7aXNQcm94eU9yaWdpbn0gZnJvbSAnLi91cmwnO1xuaW1wb3J0IHttYWtlQm9keVZpc2libGV9IGZyb20gJy4vc3R5bGUtaW5zdGFsbGVyJztcbmltcG9ydCB7c3RhcnRzV2l0aH0gZnJvbSAnLi9zdHJpbmcnO1xuaW1wb3J0IHt0cmlnZ2VyQW5hbHl0aWNzRXZlbnR9IGZyb20gJy4vYW5hbHl0aWNzJztcbmltcG9ydCB7dXJsc30gZnJvbSAnLi9jb25maWcnO1xuXG4vKipcbiAqIEBjb25zdCB7c3RyaW5nfVxuICovXG5jb25zdCBDQU5DRUxMRUQgPSAnQ0FOQ0VMTEVEJztcblxuLyoqXG4gKiBAY29uc3Qge3N0cmluZ31cbiAqL1xuY29uc3QgQkxPQ0tfQllfQ09OU0VOVCA9ICdCTE9DS19CWV9DT05TRU5UJztcblxuXG4vKipcbiAqIFRoZSB0aHJlc2hvbGQgZm9yIGVycm9ycyB0aHJvdHRsZWQgYmVjYXVzZSBub3RoaW5nIGNhbiBiZSBkb25lIGFib3V0XG4gKiB0aGVtLCBidXQgd2UnZCBzdGlsbCBsaWtlIHRvIHJlcG9ydCB0aGUgcm91Z2ggbnVtYmVyLlxuICogQGNvbnN0IHtudW1iZXJ9XG4gKi9cbmNvbnN0IE5PTl9BQ1RJT05BQkxFX0VSUk9SX1RIUk9UVExFX1RIUkVTSE9MRCA9IDAuMDAxO1xuXG4vKipcbiAqIFRoZSB0aHJlc2hvbGQgZm9yIGVycm9ycyB0aHJvdHRsZWQgYmVjYXVzZSBub3RoaW5nIGNhbiBiZSBkb25lIGFib3V0XG4gKiB0aGVtLCBidXQgd2UnZCBzdGlsbCBsaWtlIHRvIHJlcG9ydCB0aGUgcm91Z2ggbnVtYmVyLlxuICogQGNvbnN0IHtudW1iZXJ9XG4gKi9cbmNvbnN0IFVTRVJfRVJST1JfVEhST1RUTEVfVEhSRVNIT0xEID0gMC4xO1xuXG5cbi8qKlxuICogQ29sbGVjdHMgZXJyb3IgbWVzc2FnZXMsIHNvIHRoZXkgY2FuIGJlIGluY2x1ZGVkIGluIHN1YnNlcXVlbnQgcmVwb3J0cy5cbiAqIFRoYXQgYWxsb3dzIGlkZW50aWZ5aW5nIGVycm9ycyB0aGF0IG1pZ2h0IGJlIGNhdXNlZCBieSBwcmV2aW91cyBlcnJvcnMuXG4gKi9cbmxldCBhY2N1bXVsYXRlZEVycm9yTWVzc2FnZXMgPSBzZWxmLkFNUEVycm9ycyB8fCBbXTtcbi8vIFVzZSBhIHRydWUgZ2xvYmFsLCB0byBhdm9pZCBtdWx0aS1tb2R1bGUgaW5jbHVzaW9uIGlzc3Vlcy5cbnNlbGYuQU1QRXJyb3JzID0gYWNjdW11bGF0ZWRFcnJvck1lc3NhZ2VzO1xuXG4vKipcbiAqIFB1c2hlcyBlbGVtZW50IGludG8gYXJyYXksIGtlZXBpbmcgYXQgbW9zdCB0aGUgbW9zdCByZWNlbnQgbGltaXQgZWxlbWVudHNcbiAqXG4gKiBAcGFyYW0geyFBcnJheTxUPn0gYXJyYXlcbiAqIEBwYXJhbSB7VH0gZWxlbWVudFxuICogQHBhcmFtIHtudW1iZXJ9IGxpbWl0XG4gKiBAdGVtcGxhdGUgVFxuICovXG5mdW5jdGlvbiBwdXNoTGltaXQoYXJyYXksIGVsZW1lbnQsIGxpbWl0KSB7XG4gIGlmIChhcnJheS5sZW5ndGggPj0gbGltaXQpIHtcbiAgICBhcnJheS5zcGxpY2UoMCwgYXJyYXkubGVuZ3RoIC0gbGltaXQgKyAxKTtcbiAgfVxuICBhcnJheS5wdXNoKGVsZW1lbnQpO1xufVxuXG4vKipcbiAqIEEgd3JhcHBlciBhcm91bmQgb3VyIGV4cG9uZW50aWFsQmFja29mZiwgdG8gbGF6eSBpbml0aWFsaXplIGl0IHRvIGF2b2lkIGFuXG4gKiB1bi1EQ0UnYWJsZSBzaWRlLWVmZmVjdC5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gd29yayB0aGUgZnVuY3Rpb24gdG8gZXhlY3V0ZSBhZnRlciBiYWNrb2ZmXG4gKiBAcmV0dXJuIHtudW1iZXJ9IHRoZSBzZXRUaW1lb3V0IGlkXG4gKi9cbmxldCByZXBvcnRpbmdCYWNrb2ZmID0gZnVuY3Rpb24od29yaykge1xuICAvLyBTZXQgcmVwb3J0aW5nQmFja29mZiBhcyB0aGUgbGF6eS1jcmVhdGVkIGZ1bmN0aW9uLiBKUyBWb29vZG9vb28uXG4gIHJlcG9ydGluZ0JhY2tvZmYgPSBleHBvbmVudGlhbEJhY2tvZmYoMS41KTtcbiAgcmV0dXJuIHJlcG9ydGluZ0JhY2tvZmYod29yayk7XG59O1xuXG4vKipcbiAqIEF0dGVtcHRzIHRvIHN0cmluZ2lmeSBhIHZhbHVlLCBmYWxsaW5nIGJhY2sgdG8gU3RyaW5nLlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiB0cnlKc29uU3RyaW5naWZ5KHZhbHVlKSB7XG4gIHRyeSB7XG4gICAgLy8gQ2FzdCBpcyBmaW5lLCBiZWNhdXNlIHdlIHJlYWxseSBkb24ndCBjYXJlIGhlcmUuIEp1c3QgdHJ5aW5nLlxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSgvKiogQHR5cGUgeyFKc29uT2JqZWN0fSAqLyAodmFsdWUpKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBTdHJpbmcodmFsdWUpO1xuICB9XG59XG5cbi8qKlxuICogVGhlIHRydWUgSlMgZW5naW5lLCBhcyBkZXRlY3RlZCBieSBpbnNwZWN0aW5nIGFuIEVycm9yIHN0YWNrLiBUaGlzIHNob3VsZCBiZVxuICogdXNlZCB3aXRoIHRoZSB1c2VyQWdlbnQgdG8gdGVsbCBkZWZpbml0ZWx5LiBJLmUuLCBDaHJvbWUgb24gaU9TIGlzIHJlYWxseSBhXG4gKiBTYWZhcmkgSlMgZW5naW5lLlxuICovXG5sZXQgZGV0ZWN0ZWRKc0VuZ2luZTtcblxuLyoqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHsqfSBlcnJvclxuICogQHBhcmFtIHshRWxlbWVudD19IG9wdF9hc3NvY2lhdGVkRWxlbWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVwb3J0RXJyb3JGb3JXaW4od2luLCBlcnJvciwgb3B0X2Fzc29jaWF0ZWRFbGVtZW50KSB7XG4gIHJlcG9ydEVycm9yKGVycm9yLCBvcHRfYXNzb2NpYXRlZEVsZW1lbnQpO1xuICBpZiAoZXJyb3IgJiYgISF3aW4gJiYgaXNVc2VyRXJyb3JNZXNzYWdlKGVycm9yLm1lc3NhZ2UpXG4gICAgICAmJiAhaXNVc2VyRXJyb3JFbWJlZChlcnJvci5tZXNzYWdlKSkge1xuICAgIHJlcG9ydEVycm9yVG9BbmFseXRpY3MoLyoqIEB0eXBlIHshRXJyb3J9ICovKGVycm9yKSwgd2luKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlcG9ydHMgYW4gZXJyb3IuIElmIHRoZSBlcnJvciBoYXMgYW4gXCJhc3NvY2lhdGVkRWxlbWVudFwiIHByb3BlcnR5XG4gKiB0aGUgZWxlbWVudCBpcyBtYXJrZWQgd2l0aCB0aGUgYGktYW1waHRtbC1lbGVtZW50LWVycm9yYCBhbmQgZGlzcGxheXNcbiAqIHRoZSBtZXNzYWdlIGl0c2VsZi4gVGhlIG1lc3NhZ2UgaXMgYWx3YXlzIHNlbmQgdG8gdGhlIGNvbnNvbGUuXG4gKiBJZiB0aGUgZXJyb3IgaGFzIGEgXCJtZXNzYWdlQXJyYXlcIiBwcm9wZXJ0eSwgdGhhdCBhcnJheSBpcyBsb2dnZWQuXG4gKiBUaGlzIHdheSBvbmUgZ2V0cyB0aGUgbmF0aXZlIGZpZGVsaXR5IG9mIHRoZSBjb25zb2xlIGZvciB0aGluZ3MgbGlrZVxuICogZWxlbWVudHMgaW5zdGVhZCBvZiBzdHJpbmdpZmljYXRpb24uXG4gKiBAcGFyYW0geyp9IGVycm9yXG4gKiBAcGFyYW0geyFFbGVtZW50PX0gb3B0X2Fzc29jaWF0ZWRFbGVtZW50XG4gKiBAcmV0dXJuIHshRXJyb3J9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXBvcnRFcnJvcihlcnJvciwgb3B0X2Fzc29jaWF0ZWRFbGVtZW50KSB7XG4gIHRyeSB7XG4gICAgLy8gQ29udmVydCBlcnJvciB0byB0aGUgZXhwZWN0ZWQgdHlwZS5cbiAgICBsZXQgaXNWYWxpZEVycm9yO1xuICAgIGlmIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yLm1lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBlcnJvciA9IGR1cGxpY2F0ZUVycm9ySWZOZWNlc3NhcnkoLyoqIEB0eXBlIHshRXJyb3J9ICovKGVycm9yKSk7XG4gICAgICAgIGlzVmFsaWRFcnJvciA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBvcmlnRXJyb3IgPSBlcnJvcjtcbiAgICAgICAgZXJyb3IgPSBuZXcgRXJyb3IodHJ5SnNvblN0cmluZ2lmeShvcmlnRXJyb3IpKTtcbiAgICAgICAgZXJyb3Iub3JpZ0Vycm9yID0gb3JpZ0Vycm9yO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBlcnJvciA9IG5ldyBFcnJvcignVW5rbm93biBlcnJvcicpO1xuICAgIH1cbiAgICAvLyBSZXBvcnQgaWYgZXJyb3IgaXMgbm90IGFuIGV4cGVjdGVkIHR5cGUuXG4gICAgaWYgKCFpc1ZhbGlkRXJyb3IgJiYgZ2V0TW9kZSgpLmxvY2FsRGV2ICYmICFnZXRNb2RlKCkudGVzdCkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc3QgcmV0aHJvdyA9IG5ldyBFcnJvcihcbiAgICAgICAgICAgICdfcmVwb3J0ZWRfIEVycm9yIHJlcG9ydGVkIGluY29ycmVjdGx5OiAnICsgZXJyb3IpO1xuICAgICAgICB0aHJvdyByZXRocm93O1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGVycm9yLnJlcG9ydGVkKSB7XG4gICAgICByZXR1cm4gLyoqIEB0eXBlIHshRXJyb3J9ICovIChlcnJvcik7XG4gICAgfVxuICAgIGVycm9yLnJlcG9ydGVkID0gdHJ1ZTtcblxuICAgIC8vIFVwZGF0ZSBlbGVtZW50LlxuICAgIGNvbnN0IGVsZW1lbnQgPSBvcHRfYXNzb2NpYXRlZEVsZW1lbnQgfHwgZXJyb3IuYXNzb2NpYXRlZEVsZW1lbnQ7XG4gICAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudC5jbGFzc0xpc3QpIHtcbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaS1hbXBodG1sLWVycm9yJyk7XG4gICAgICBpZiAoZ2V0TW9kZSgpLmRldmVsb3BtZW50KSB7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaS1hbXBodG1sLWVsZW1lbnQtZXJyb3InKTtcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2Vycm9yLW1lc3NhZ2UnLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZXBvcnQgdG8gY29uc29sZS5cbiAgICBpZiAoc2VsZi5jb25zb2xlKSB7XG4gICAgICBjb25zdCBvdXRwdXQgPSAoY29uc29sZS5lcnJvciB8fCBjb25zb2xlLmxvZyk7XG4gICAgICBpZiAoZXJyb3IubWVzc2FnZUFycmF5KSB7XG4gICAgICAgIG91dHB1dC5hcHBseShjb25zb2xlLCBlcnJvci5tZXNzYWdlQXJyYXkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICBvdXRwdXQuY2FsbChjb25zb2xlLCBlcnJvci5tZXNzYWdlLCBlbGVtZW50KTtcbiAgICAgICAgfSBlbHNlIGlmICghZ2V0TW9kZSgpLm1pbmlmaWVkKSB7XG4gICAgICAgICAgb3V0cHV0LmNhbGwoY29uc29sZSwgZXJyb3Iuc3RhY2spO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG91dHB1dC5jYWxsKGNvbnNvbGUsIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChlbGVtZW50ICYmIGVsZW1lbnQuZGlzcGF0Y2hDdXN0b21FdmVudEZvclRlc3RpbmcpIHtcbiAgICAgIGVsZW1lbnQuZGlzcGF0Y2hDdXN0b21FdmVudEZvclRlc3RpbmcoQW1wRXZlbnRzLkVSUk9SLCBlcnJvci5tZXNzYWdlKTtcbiAgICB9XG5cbiAgICAvLyAnY2FsbCcgdG8gbWFrZSBsaW50ZXIgaGFwcHkuIEFuZCAuY2FsbCB0byBtYWtlIGNvbXBpbGVyIGhhcHB5XG4gICAgLy8gdGhhdCBleHBlY3RzIHNvbWUgQHRoaXMuXG4gICAgcmVwb3J0RXJyb3JUb1NlcnZlclsnY2FsbCddKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCxcbiAgICAgICAgdW5kZWZpbmVkLCBlcnJvcik7XG4gIH0gY2F0Y2ggKGVycm9yUmVwb3J0aW5nRXJyb3IpIHtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgdGhyb3cgZXJyb3JSZXBvcnRpbmdFcnJvcjtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gLyoqIEB0eXBlIHshRXJyb3J9ICovIChlcnJvcik7XG59XG5cbi8qKlxuICogUmV0dXJucyBhbiBlcnJvciBmb3IgYSBjYW5jZWxsYXRpb24gb2YgYSBwcm9taXNlLlxuICogQHJldHVybiB7IUVycm9yfVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FuY2VsbGF0aW9uKCkge1xuICByZXR1cm4gbmV3IEVycm9yKENBTkNFTExFRCk7XG59XG5cbi8qKlxuICogQHBhcmFtIHsqfSBlcnJvck9yTWVzc2FnZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQ2FuY2VsbGF0aW9uKGVycm9yT3JNZXNzYWdlKSB7XG4gIGlmICghZXJyb3JPck1lc3NhZ2UpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKHR5cGVvZiBlcnJvck9yTWVzc2FnZSA9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBzdGFydHNXaXRoKGVycm9yT3JNZXNzYWdlLCBDQU5DRUxMRUQpO1xuICB9XG4gIGlmICh0eXBlb2YgZXJyb3JPck1lc3NhZ2UubWVzc2FnZSA9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBzdGFydHNXaXRoKGVycm9yT3JNZXNzYWdlLm1lc3NhZ2UsIENBTkNFTExFRCk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gZXJyb3IgZm9yIGNvbXBvbmVudCBibG9ja2VkIGJ5IGNvbnNlbnRcbiAqIEByZXR1cm4geyFFcnJvcn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJsb2NrZWRCeUNvbnNlbnRFcnJvcigpIHtcbiAgcmV0dXJuIG5ldyBFcnJvcihCTE9DS19CWV9DT05TRU5UKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyp9IGVycm9yT3JNZXNzYWdlXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNCbG9ja2VkQnlDb25zZW50KGVycm9yT3JNZXNzYWdlKSB7XG4gIGlmICghZXJyb3JPck1lc3NhZ2UpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKHR5cGVvZiBlcnJvck9yTWVzc2FnZSA9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBzdGFydHNXaXRoKGVycm9yT3JNZXNzYWdlLCBCTE9DS19CWV9DT05TRU5UKTtcbiAgfVxuICBpZiAodHlwZW9mIGVycm9yT3JNZXNzYWdlLm1lc3NhZ2UgPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gc3RhcnRzV2l0aChlcnJvck9yTWVzc2FnZS5tZXNzYWdlLCBCTE9DS19CWV9DT05TRU5UKTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cblxuLyoqXG4gKiBJbnN0YWxsIGhhbmRsaW5nIG9mIGdsb2JhbCB1bmhhbmRsZWQgZXhjZXB0aW9ucy5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsRXJyb3JSZXBvcnRpbmcod2luKSB7XG4gIHdpbi5vbmVycm9yID0gLyoqIEB0eXBlIHshRnVuY3Rpb259ICovIChyZXBvcnRFcnJvclRvU2VydmVyKTtcbiAgd2luLmFkZEV2ZW50TGlzdGVuZXIoJ3VuaGFuZGxlZHJlamVjdGlvbicsIGV2ZW50ID0+IHtcbiAgICBpZiAoZXZlbnQucmVhc29uICYmXG4gICAgICAoZXZlbnQucmVhc29uLm1lc3NhZ2UgPT09IENBTkNFTExFRCB8fFxuICAgICAgZXZlbnQucmVhc29uLm1lc3NhZ2UgPT09IEJMT0NLX0JZX0NPTlNFTlQpKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXBvcnRFcnJvcihldmVudC5yZWFzb24gfHwgbmV3IEVycm9yKCdyZWplY3RlZCBwcm9taXNlICcgKyBldmVudCkpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBTaWduYXR1cmUgZGVzaWduZWQsIHNvIGl0IGNhbiB3b3JrIHdpdGggd2luZG93Lm9uZXJyb3JcbiAqIEBwYXJhbSB7c3RyaW5nfHVuZGVmaW5lZH0gbWVzc2FnZVxuICogQHBhcmFtIHtzdHJpbmd8dW5kZWZpbmVkfSBmaWxlbmFtZVxuICogQHBhcmFtIHtzdHJpbmd8dW5kZWZpbmVkfSBsaW5lXG4gKiBAcGFyYW0ge3N0cmluZ3x1bmRlZmluZWR9IGNvbFxuICogQHBhcmFtIHsqfHVuZGVmaW5lZH0gZXJyb3JcbiAqIEB0aGlzIHshV2luZG93fHVuZGVmaW5lZH1cbiAqL1xuZnVuY3Rpb24gcmVwb3J0RXJyb3JUb1NlcnZlcihtZXNzYWdlLCBmaWxlbmFtZSwgbGluZSwgY29sLCBlcnJvcikge1xuICAvLyBNYWtlIGFuIGF0dGVtcHQgdG8gdW5oaWRlIHRoZSBib2R5LlxuICBpZiAodGhpcyAmJiB0aGlzLmRvY3VtZW50KSB7XG4gICAgbWFrZUJvZHlWaXNpYmxlKHRoaXMuZG9jdW1lbnQpO1xuICB9XG4gIGlmIChnZXRNb2RlKCkubG9jYWxEZXYgfHwgZ2V0TW9kZSgpLmRldmVsb3BtZW50IHx8IGdldE1vZGUoKS50ZXN0KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGxldCBoYXNOb25BbXBKcyA9IGZhbHNlO1xuICB0cnkge1xuICAgIGhhc05vbkFtcEpzID0gZGV0ZWN0Tm9uQW1wSnMoc2VsZik7XG4gIH0gY2F0Y2ggKGlnbm9yZSkge1xuICAgIC8vIElnbm9yZSBlcnJvcnMgZHVyaW5nIGVycm9yIHJlcG9ydCBnZW5lcmF0aW9uLlxuICB9XG4gIGlmIChoYXNOb25BbXBKcyAmJiBNYXRoLnJhbmRvbSgpID4gMC4wMSkge1xuICAgIC8vIE9ubHkgcmVwb3J0IDElIG9mIGVycm9ycyBvbiBwYWdlcyB3aXRoIG5vbi1BTVAgSlMuXG4gICAgLy8gVGhlc2UgZXJyb3JzIGNhbiBhbG1vc3QgbmV2ZXIgYmUgYWN0ZWQgdXBvbiwgYnV0IHNwaWtlcyBzdWNoIGFzXG4gICAgLy8gZHVlIHRvIGJ1Z2d5IGJyb3dzZXIgZXh0ZW5zaW9ucyBtYXkgYmUgaGVscGZ1bCB0byBub3RpZnkgYXV0aG9ycy5cbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgZGF0YSA9IGdldEVycm9yUmVwb3J0RGF0YShtZXNzYWdlLCBmaWxlbmFtZSwgbGluZSwgY29sLCBlcnJvcixcbiAgICAgIGhhc05vbkFtcEpzKTtcbiAgaWYgKGRhdGEpIHtcbiAgICAvLyBSZXBvcnQgdGhlIGVycm9yIHRvIHZpZXdlciBpZiBpdCBoYXMgdGhlIGNhcGFiaWxpdHkuIFRoZSBkYXRhIHBhc3NlZFxuICAgIC8vIHRvIHRoZSB2aWV3ZXIgaXMgZXhhY3RseSB0aGUgc2FtZSBhcyB0aGUgZGF0YSBwYXNzZWQgdG8gdGhlIHNlcnZlclxuICAgIC8vIGJlbG93LlxuICAgIG1heWJlUmVwb3J0RXJyb3JUb1ZpZXdlcih0aGlzLCBkYXRhKTtcbiAgICByZXBvcnRpbmdCYWNrb2ZmKCgpID0+IHtcbiAgICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgeGhyLm9wZW4oJ1BPU1QnLCB1cmxzLmVycm9yUmVwb3J0aW5nLCB0cnVlKTtcbiAgICAgIHhoci5zZW5kKEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIFBhc3NlcyB0aGUgZ2l2ZW4gZXJyb3IgZGF0YSB0byB0aGUgdmlld2VyIGlmIHRoZSBmb2xsb3dpbmcgY3JpdGVyaWEgaXMgbWV0OlxuICogLSBUaGUgdmlld2VyIGlzIGEgdHJ1c3RlZCB2aWV3ZXJcbiAqIC0gVGhlIHZpZXdlciBoYXMgdGhlIGBlcnJvclJlcG9ydGVyYCBjYXBhYmlsaXR5XG4gKiAtIFRoZSBBTVAgZG9jIGlzIGluIHNpbmdsZSBkb2MgbW9kZVxuICogLSBUaGUgQU1QIGRvYyBpcyBvcHRlZC1pbiBmb3IgZXJyb3IgaW50ZXJjZXB0aW9uIChgPGh0bWw+YCB0YWcgaGFzIHRoZVxuICogICBgcmVwb3J0LWVycm9ycy10by12aWV3ZXJgIGF0dHJpYnV0ZSlcbiAqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHshSnNvbk9iamVjdH0gZGF0YSBEYXRhIGZyb20gYGdldEVycm9yUmVwb3J0RGF0YWAuXG4gKiBAcmV0dXJuIHshUHJvbWlzZTxib29sZWFuPn0gYFByb21pc2U8VHJ1ZT5gIGlmIHRoZSBlcnJvciB3YXMgc2VudCB0byB0aGVcbiAqICAgICB2aWV3ZXIsIGBQcm9taXNlPEZhbHNlPmAgb3RoZXJ3aXNlLlxuICogQHZpc2libGVGb3JUZXN0aW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXliZVJlcG9ydEVycm9yVG9WaWV3ZXIod2luLCBkYXRhKSB7XG4gIGNvbnN0IGFtcGRvY1NlcnZpY2UgPSBTZXJ2aWNlcy5hbXBkb2NTZXJ2aWNlRm9yKHdpbik7XG4gIGlmICghYW1wZG9jU2VydmljZS5pc1NpbmdsZURvYygpKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSk7XG4gIH1cbiAgY29uc3QgYW1wZG9jU2luZ2xlID0gYW1wZG9jU2VydmljZS5nZXRBbXBEb2MoKTtcbiAgY29uc3QgaHRtbEVsZW1lbnQgPSBhbXBkb2NTaW5nbGUuZ2V0Um9vdE5vZGUoKS5kb2N1bWVudEVsZW1lbnQ7XG4gIGNvbnN0IGRvY09wdGVkSW4gPSBodG1sRWxlbWVudC5oYXNBdHRyaWJ1dGUoJ3JlcG9ydC1lcnJvcnMtdG8tdmlld2VyJyk7XG4gIGlmICghZG9jT3B0ZWRJbikge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZmFsc2UpO1xuICB9XG5cbiAgY29uc3Qgdmlld2VyID0gU2VydmljZXMudmlld2VyRm9yRG9jKGFtcGRvY1NpbmdsZSk7XG4gIGlmICghdmlld2VyLmhhc0NhcGFiaWxpdHkoJ2Vycm9yUmVwb3J0ZXInKSkge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZmFsc2UpO1xuICB9XG5cbiAgcmV0dXJuIHZpZXdlci5pc1RydXN0ZWRWaWV3ZXIoKS50aGVuKHZpZXdlclRydXN0ZWQgPT4ge1xuICAgIGlmICghdmlld2VyVHJ1c3RlZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2aWV3ZXIuc2VuZE1lc3NhZ2UoJ2Vycm9yJywgZGF0YSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0pO1xufVxuXG4vKipcbiAqIFNpZ25hdHVyZSBkZXNpZ25lZCwgc28gaXQgY2FuIHdvcmsgd2l0aCB3aW5kb3cub25lcnJvclxuICogQHBhcmFtIHtzdHJpbmd8dW5kZWZpbmVkfSBtZXNzYWdlXG4gKiBAcGFyYW0ge3N0cmluZ3x1bmRlZmluZWR9IGZpbGVuYW1lXG4gKiBAcGFyYW0ge3N0cmluZ3x1bmRlZmluZWR9IGxpbmVcbiAqIEBwYXJhbSB7c3RyaW5nfHVuZGVmaW5lZH0gY29sXG4gKiBAcGFyYW0geyp8dW5kZWZpbmVkfSBlcnJvclxuICogQHBhcmFtIHtib29sZWFufSBoYXNOb25BbXBKc1xuICogQHJldHVybiB7IUpzb25PYmplY3R8dW5kZWZpbmVkfSBUaGUgZGF0YSB0byBwb3N0XG4gKiB2aXNpYmxlRm9yVGVzdGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXJyb3JSZXBvcnREYXRhKG1lc3NhZ2UsIGZpbGVuYW1lLCBsaW5lLCBjb2wsIGVycm9yLFxuICBoYXNOb25BbXBKcykge1xuICBsZXQgZXhwZWN0ZWQgPSBmYWxzZTtcbiAgaWYgKGVycm9yKSB7XG4gICAgaWYgKGVycm9yLm1lc3NhZ2UpIHtcbiAgICAgIG1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUaGlzIHNob3VsZCBuZXZlciBiZSBhIHN0cmluZywgYnV0IHNvbWV0aW1lcyBpdCBpcy5cbiAgICAgIG1lc3NhZ2UgPSBTdHJpbmcoZXJyb3IpO1xuICAgIH1cbiAgICAvLyBBbiBcImV4cGVjdGVkXCIgZXJyb3IgaXMgc3RpbGwgYW4gZXJyb3IsIGkuZS4gc29tZSBmZWF0dXJlcyBhcmUgZGlzYWJsZWRcbiAgICAvLyBvciBub3QgZnVuY3Rpb25pbmcgZnVsbHkgYmVjYXVzZSBvZiBpdC4gSG93ZXZlciwgaXQncyBhbiBleHBlY3RlZFxuICAgIC8vIGVycm9yLiBFLmcuIGFzIGlzIHRoZSBjYXNlIHdpdGggc29tZSBicm93c2VyIEFQSSBtaXNzaW5nIChzdG9yYWdlKS5cbiAgICAvLyBUaHVzLCB0aGUgZXJyb3IgY2FuIGJlIGNsYXNzaWZpZWQgZGlmZmVyZW50bHkgYnkgbG9nIGFnZ3JlZ2F0b3JzLlxuICAgIC8vIFRoZSBtYWluIGdvYWwgaXMgdG8gbW9uaXRvciB0aGF0IGFuIFwiZXhwZWN0ZWRcIiBlcnJvciBkb2Vzbid0IGRldGVyaW9yYXRlXG4gICAgLy8gb3ZlciB0aW1lLiBJdCdzIGltcG9zc2libGUgdG8gY29tcGxldGVseSBlbGltaW5hdGUgaXQuXG4gICAgaWYgKGVycm9yLmV4cGVjdGVkKSB7XG4gICAgICBleHBlY3RlZCA9IHRydWU7XG4gICAgfVxuICB9XG4gIGlmICghbWVzc2FnZSkge1xuICAgIG1lc3NhZ2UgPSAnVW5rbm93biBlcnJvcic7XG4gIH1cbiAgaWYgKC9fcmVwb3J0ZWRfLy50ZXN0KG1lc3NhZ2UpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChtZXNzYWdlID09IENBTkNFTExFRCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGRldGFjaGVkV2luZG93ID0gIShzZWxmICYmIHNlbGYud2luZG93KTtcbiAgY29uc3QgdGhyb3R0bGVCYXNlID0gTWF0aC5yYW5kb20oKTtcblxuICAvLyBXZSB0aHJvdHRsZSBsb2FkIGVycm9ycyBhbmQgZ2VuZXJpYyBcIlNjcmlwdCBlcnJvci5cIiBlcnJvcnNcbiAgLy8gdGhhdCBoYXZlIG5vIGluZm9ybWF0aW9uIGFuZCB0aHVzIGNhbm5vdCBiZSBhY3RlZCB1cG9uLlxuICBpZiAoaXNMb2FkRXJyb3JNZXNzYWdlKG1lc3NhZ2UpIHx8XG4gICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hbXBwcm9qZWN0L2FtcGh0bWwvaXNzdWVzLzczNTNcbiAgICAvLyBmb3IgY29udGV4dC5cbiAgICBtZXNzYWdlID09ICdTY3JpcHQgZXJyb3IuJyB8fFxuICAgIC8vIFdpbmRvdyBoYXMgYmVjb21lIGRldGFjaGVkLCByZWFsbHkgYW55dGhpbmcgY2FuIGhhcHBlblxuICAgIC8vIGF0IHRoaXMgcG9pbnQuXG4gICAgZGV0YWNoZWRXaW5kb3cpIHtcbiAgICBleHBlY3RlZCA9IHRydWU7XG5cbiAgICBpZiAodGhyb3R0bGVCYXNlID4gTk9OX0FDVElPTkFCTEVfRVJST1JfVEhST1RUTEVfVEhSRVNIT0xEKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgY29uc3QgaXNVc2VyRXJyb3IgPSBpc1VzZXJFcnJvck1lc3NhZ2UobWVzc2FnZSk7XG5cbiAgLy8gT25seSByZXBvcnQgYSBzdWJzZXQgb2YgdXNlciBlcnJvcnMuXG4gIGlmIChpc1VzZXJFcnJvciAmJiB0aHJvdHRsZUJhc2UgPiBVU0VSX0VSUk9SX1RIUk9UVExFX1RIUkVTSE9MRCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIFRoaXMgaXMgdGhlIEFwcCBFbmdpbmUgYXBwIGluXG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbXBwcm9qZWN0L2Vycm9yLXRyYWNrZXJcbiAgLy8gSXQgc3RvcmVzIGVycm9yIHJlcG9ydHMgdmlhIGh0dHBzOi8vY2xvdWQuZ29vZ2xlLmNvbS9lcnJvci1yZXBvcnRpbmcvXG4gIC8vIGZvciBhbmFseXppbmcgcHJvZHVjdGlvbiBpc3N1ZXMuXG4gIGNvbnN0IGRhdGEgPSAvKiogQHR5cGUgeyFKc29uT2JqZWN0fSAqLyAoT2JqZWN0LmNyZWF0ZShudWxsKSk7XG4gIGRhdGFbJ3YnXSA9IGdldE1vZGUoKS5ydHZWZXJzaW9uO1xuICBkYXRhWydub0FtcCddID0gaGFzTm9uQW1wSnMgPyAnMScgOiAnMCc7XG4gIGRhdGFbJ20nXSA9IG1lc3NhZ2UucmVwbGFjZShVU0VSX0VSUk9SX1NFTlRJTkVMLCAnJyk7XG4gIGRhdGFbJ2EnXSA9IGlzVXNlckVycm9yID8gJzEnIDogJzAnO1xuXG4gIC8vIEVycm9ycyBhcmUgdGFnZ2VkIHdpdGggXCJleFwiIChcImV4cGVjdGVkXCIpIGxhYmVsIHRvIGFsbG93IGxvZ2dlcnMgdG9cbiAgLy8gY2xhc3NpZnkgdGhlc2UgZXJyb3JzIGFzIGJlbmNobWFya3MgYW5kIG5vdCBleGNlcHRpb25zLlxuICBkYXRhWydleCddID0gZXhwZWN0ZWQgPyAnMScgOiAnMCc7XG4gIGRhdGFbJ2R3J10gPSBkZXRhY2hlZFdpbmRvdyA/ICcxJyA6ICcwJztcblxuICBsZXQgcnVudGltZSA9ICcxcCc7XG4gIGlmIChzZWxmLmNvbnRleHQgJiYgc2VsZi5jb250ZXh0LmxvY2F0aW9uKSB7XG4gICAgZGF0YVsnM3AnXSA9ICcxJztcbiAgICBydW50aW1lID0gJzNwJztcbiAgfSBlbHNlIGlmIChnZXRNb2RlKCkucnVudGltZSkge1xuICAgIHJ1bnRpbWUgPSBnZXRNb2RlKCkucnVudGltZTtcbiAgfVxuICBkYXRhWydydCddID0gcnVudGltZTtcblxuICAvLyBUT0RPKGVyd2lubSk6IFJlbW92ZSBjYSB3aGVuIGFsbCBzeXN0ZW1zIHJlYWQgYGJ0YCBpbnN0ZWFkIG9mIGBjYWAgdG9cbiAgLy8gaWRlbnRpZnkganMgYmluYXJ5IHR5cGUuXG4gIGRhdGFbJ2NhJ10gPSBpc0NhbmFyeShzZWxmKSA/ICcxJyA6ICcwJztcblxuICAvLyBQYXNzIGJpbmFyeSB0eXBlLlxuICBkYXRhWydidCddID0gZ2V0QmluYXJ5VHlwZShzZWxmKTtcblxuICBpZiAoc2VsZi5sb2NhdGlvbi5hbmNlc3Rvck9yaWdpbnMgJiYgc2VsZi5sb2NhdGlvbi5hbmNlc3Rvck9yaWdpbnNbMF0pIHtcbiAgICBkYXRhWydvciddID0gc2VsZi5sb2NhdGlvbi5hbmNlc3Rvck9yaWdpbnNbMF07XG4gIH1cbiAgaWYgKHNlbGYudmlld2VyU3RhdGUpIHtcbiAgICBkYXRhWyd2cyddID0gc2VsZi52aWV3ZXJTdGF0ZTtcbiAgfVxuICAvLyBJcyBlbWJlZGRlZD9cbiAgaWYgKHNlbGYucGFyZW50ICYmIHNlbGYucGFyZW50ICE9IHNlbGYpIHtcbiAgICBkYXRhWydpZW0nXSA9ICcxJztcbiAgfVxuXG4gIGlmIChzZWxmLkFNUCAmJiBzZWxmLkFNUC52aWV3ZXIpIHtcbiAgICBjb25zdCByZXNvbHZlZFZpZXdlclVybCA9IHNlbGYuQU1QLnZpZXdlci5nZXRSZXNvbHZlZFZpZXdlclVybCgpO1xuICAgIGNvbnN0IG1lc3NhZ2luZ09yaWdpbiA9IHNlbGYuQU1QLnZpZXdlci5tYXliZUdldE1lc3NhZ2luZ09yaWdpbigpO1xuICAgIGlmIChyZXNvbHZlZFZpZXdlclVybCkge1xuICAgICAgZGF0YVsncnZ1J10gPSByZXNvbHZlZFZpZXdlclVybDtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2luZ09yaWdpbikge1xuICAgICAgZGF0YVsnbXNvJ10gPSBtZXNzYWdpbmdPcmlnaW47XG4gICAgfVxuICB9XG5cbiAgaWYgKCFkZXRlY3RlZEpzRW5naW5lKSB7XG4gICAgZGV0ZWN0ZWRKc0VuZ2luZSA9IGRldGVjdEpzRW5naW5lRnJvbVN0YWNrKCk7XG4gIH1cbiAgZGF0YVsnanNlJ10gPSBkZXRlY3RlZEpzRW5naW5lO1xuXG4gIGNvbnN0IGV4cHMgPSBbXTtcbiAgY29uc3QgZXhwZXJpbWVudHMgPSBleHBlcmltZW50VG9nZ2xlc09yTnVsbChzZWxmKTtcbiAgZm9yIChjb25zdCBleHAgaW4gZXhwZXJpbWVudHMpIHtcbiAgICBjb25zdCBvbiA9IGV4cGVyaW1lbnRzW2V4cF07XG4gICAgZXhwcy5wdXNoKGAke2V4cH09JHtvbiA/ICcxJyA6ICcwJ31gKTtcbiAgfVxuICBkYXRhWydleHBzJ10gPSBleHBzLmpvaW4oJywnKTtcblxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zdCB0YWdOYW1lID0gZXJyb3IuYXNzb2NpYXRlZEVsZW1lbnRcbiAgICAgID8gZXJyb3IuYXNzb2NpYXRlZEVsZW1lbnQudGFnTmFtZVxuICAgICAgOiAndSc7IC8vIFVua25vd25cbiAgICBkYXRhWydlbCddID0gdGFnTmFtZTtcblxuICAgIGlmIChlcnJvci5hcmdzKSB7XG4gICAgICBkYXRhWydhcmdzJ10gPSBKU09OLnN0cmluZ2lmeShlcnJvci5hcmdzKTtcbiAgICB9XG5cbiAgICBpZiAoIWlzVXNlckVycm9yICYmICFlcnJvci5pZ25vcmVTdGFjayAmJiBlcnJvci5zdGFjaykge1xuICAgICAgZGF0YVsncyddID0gZXJyb3Iuc3RhY2s7XG4gICAgfVxuXG4gICAgZXJyb3IubWVzc2FnZSArPSAnIF9yZXBvcnRlZF8nO1xuICB9IGVsc2Uge1xuICAgIGRhdGFbJ2YnXSA9IGZpbGVuYW1lIHx8ICcnO1xuICAgIGRhdGFbJ2wnXSA9IGxpbmUgfHwgJyc7XG4gICAgZGF0YVsnYyddID0gY29sIHx8ICcnO1xuICB9XG4gIGRhdGFbJ3InXSA9IHNlbGYuZG9jdW1lbnQucmVmZXJyZXI7XG4gIGRhdGFbJ2FlJ10gPSBhY2N1bXVsYXRlZEVycm9yTWVzc2FnZXMuam9pbignLCcpO1xuICBkYXRhWydmciddID0gc2VsZi5sb2NhdGlvbi5vcmlnaW5hbEhhc2ggfHwgc2VsZi5sb2NhdGlvbi5oYXNoO1xuXG4gIHB1c2hMaW1pdChhY2N1bXVsYXRlZEVycm9yTWVzc2FnZXMsIG1lc3NhZ2UsIDI1KTtcblxuICByZXR1cm4gZGF0YTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgaXQgYXBwZWFycyBsaWtlIHRoZXJlIGlzIG5vbi1BTVAgSlMgb24gdGhlXG4gKiBjdXJyZW50IHBhZ2UuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqIEB2aXNpYmxlRm9yVGVzdGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gZGV0ZWN0Tm9uQW1wSnMod2luKSB7XG4gIGNvbnN0IHNjcmlwdHMgPSB3aW4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc2NyaXB0W3NyY10nKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzY3JpcHRzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKCFpc1Byb3h5T3JpZ2luKHNjcmlwdHNbaV0uc3JjLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIFJlc2V0cyBhY2N1bXVsYXRlZCBlcnJvciBtZXNzYWdlcyBmb3IgdGVzdGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRBY2N1bXVsYXRlZEVycm9yTWVzc2FnZXNGb3JUZXN0aW5nKCkge1xuICBhY2N1bXVsYXRlZEVycm9yTWVzc2FnZXMgPSBbXTtcbn1cblxuLyoqXG4gKiBEb2VzIGEgc2VyaWVzIG9mIGNoZWNrcyBvbiB0aGUgc3RhY2sgb2YgYW4gdGhyb3duIGVycm9yIHRvIGRldGVybWluZSB0aGVcbiAqIEpTIGVuZ2luZSB0aGF0IGlzIGN1cnJlbnRseSBydW5uaW5nLiBUaGlzIGdpdmVzIGEgYml0IG1vcmUgaW5mb3JtYXRpb24gdGhhblxuICoganVzdCB0aGUgVXNlckFnZW50LCBzaW5jZSBicm93c2VycyBvZnRlbiBhbGxvdyBvdmVycmlkaW5nIGl0IHRvIFwiZW11bGF0ZVwiXG4gKiBtb2JpbGUuXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRldGVjdEpzRW5naW5lRnJvbVN0YWNrKCkge1xuICAvKiogQGNvbnN0cnVjdG9yICovXG4gIGZ1bmN0aW9uIEZuKCkge31cbiAgRm4ucHJvdG90eXBlLnQgPSBmdW5jdGlvbigpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ21lc3NhZ2UnKTtcbiAgfTtcbiAgY29uc3Qgb2JqZWN0ID0gbmV3IEZuKCk7XG4gIHRyeSB7XG4gICAgb2JqZWN0LnQoKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnN0IHtzdGFja30gPSBlO1xuXG4gICAgLy8gU2FmYXJpIG9ubHkgbWVudGlvbnMgdGhlIG1ldGhvZCBuYW1lLlxuICAgIGlmIChzdGFydHNXaXRoKHN0YWNrLCAndEAnKSkge1xuICAgICAgcmV0dXJuICdTYWZhcmknO1xuICAgIH1cblxuICAgIC8vIEZpcmVmb3ggbWVudGlvbnMgXCJwcm90b3R5cGVcIi5cbiAgICBpZiAoc3RhY2suaW5kZXhPZignLnByb3RvdHlwZS50QCcpID4gLTEpIHtcbiAgICAgIHJldHVybiAnRmlyZWZveCc7XG4gICAgfVxuXG4gICAgLy8gSUUgbG9va3MgbGlrZSBDaHJvbWUsIGJ1dCBpbmNsdWRlcyBhIGNvbnRleHQgZm9yIHRoZSBiYXNlIHN0YWNrIGxpbmUuXG4gICAgLy8gRXhwbGljaXRseSwgd2UncmUgbG9va2luZyBmb3Igc29tZXRoaW5nIGxpa2U6XG4gICAgLy8gXCIgICAgYXQgR2xvYmFsIGNvZGUgKGh0dHBzOi8vZXhhbXBsZS5jb20vYXBwLmpzOjE6MjAwKVwiIG9yXG4gICAgLy8gXCIgICAgYXQgQW5vbnltb3VzIGZ1bmN0aW9uIChodHRwczovL2V4YW1wbGUuY29tL2FwcC5qczoxOjIwMClcIlxuICAgIC8vIHZzIENocm9tZSB3aGljaCBoYXM6XG4gICAgLy8gXCIgICAgYXQgaHR0cHM6Ly9leGFtcGxlLmNvbS9hcHAuanM6MToyMDBcIlxuICAgIGNvbnN0IGxhc3QgPSBzdGFjay5zcGxpdCgnXFxuJykucG9wKCk7XG4gICAgaWYgKC9cXGJhdCAuKiBcXCgvaS50ZXN0KGxhc3QpKSB7XG4gICAgICByZXR1cm4gJ0lFJztcbiAgICB9XG5cbiAgICAvLyBGaW5hbGx5LCBjaHJvbWUgaW5jbHVkZXMgdGhlIGVycm9yIG1lc3NhZ2UgaW4gdGhlIHN0YWNrLlxuICAgIGlmIChzdGFydHNXaXRoKHN0YWNrLCAnRXJyb3I6IG1lc3NhZ2UnKSkge1xuICAgICAgcmV0dXJuICdDaHJvbWUnO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAndW5rbm93bic7XG59XG5cbi8qKlxuICogQHBhcmFtIHshRXJyb3J9IGVycm9yXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVwb3J0RXJyb3JUb0FuYWx5dGljcyhlcnJvciwgd2luKSB7XG4gIGlmIChpc0V4cGVyaW1lbnRPbih3aW4sICd1c2VyLWVycm9yLXJlcG9ydGluZycpKSB7XG4gICAgY29uc3QgdmFycyA9IHtcbiAgICAgICdlcnJvck5hbWUnOiBlcnJvci5uYW1lLFxuICAgICAgJ2Vycm9yTWVzc2FnZSc6IGVycm9yLm1lc3NhZ2UsXG4gICAgfTtcbiAgICB0cmlnZ2VyQW5hbHl0aWNzRXZlbnQoZ2V0Um9vdEVsZW1lbnRfKHdpbiksICd1c2VyLWVycm9yJywgdmFycyk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7IUVsZW1lbnR9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBnZXRSb290RWxlbWVudF8od2luKSB7XG4gIGNvbnN0IHJvb3QgPSBTZXJ2aWNlcy5hbXBkb2NTZXJ2aWNlRm9yKHdpbikuZ2V0QW1wRG9jKCkuZ2V0Um9vdE5vZGUoKTtcbiAgcmV0dXJuIGRldigpLmFzc2VydEVsZW1lbnQocm9vdC5kb2N1bWVudEVsZW1lbnQgfHwgcm9vdC5ib2R5IHx8IHJvb3QpO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICAqIFdoZXRoZXIgYWRkRXZlbnRMaXN0ZW5lciBzdXBwb3J0cyBvcHRpb25zIG9yIG9ubHkgdGFrZXMgY2FwdHVyZSBhcyBhIGJvb2xlYW5cbiAgKiBAdHlwZSB7Ym9vbGVhbnx1bmRlZmluZWR9XG4gICogQHZpc2libGVGb3JUZXN0aW5nXG4gICovXG5sZXQgb3B0c1N1cHBvcnRlZDtcblxuLyoqXG4gKiBMaXN0ZW5zIGZvciB0aGUgc3BlY2lmaWVkIGV2ZW50IG9uIHRoZSBlbGVtZW50LlxuICpcbiAqIERvIG5vdCB1c2UgdGhpcyBkaXJlY3RseS4gVGhpcyBtZXRob2QgaXMgaW1wbGVtZW50ZWQgYXMgYSBzaGFyZWRcbiAqIGRlcGVuZGVuY3kuIFVzZSBgbGlzdGVuKClgIGluIGVpdGhlciBgZXZlbnQtaGVscGVyYCBvciBgM3AtZnJhbWUtbWVzc2FnaW5nYCxcbiAqIGRlcGVuZGluZyBvbiB5b3VyIHVzZSBjYXNlLlxuICpcbiAqIEBwYXJhbSB7IUV2ZW50VGFyZ2V0fSBlbGVtZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRUeXBlXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFFdmVudCl9IGxpc3RlbmVyXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdF9ldnRMaXN0ZW5lck9wdHNcbiAqIEByZXR1cm4geyFVbmxpc3RlbkRlZn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVybmFsTGlzdGVuSW1wbGVtZW50YXRpb24oZWxlbWVudCwgZXZlbnRUeXBlLCBsaXN0ZW5lcixcbiAgb3B0X2V2dExpc3RlbmVyT3B0cykge1xuICBsZXQgbG9jYWxFbGVtZW50ID0gZWxlbWVudDtcbiAgbGV0IGxvY2FsTGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgLyoqXG4gICAqIEB0eXBlIHs/RnVuY3Rpb259XG4gICAqL1xuICBsZXQgd3JhcHBlZDtcblxuICB3cmFwcGVkID0gZXZlbnQgPT4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gbG9jYWxMaXN0ZW5lcihldmVudCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gcmVwb3J0RXJyb3IgaXMgaW5zdGFsbGVkIGdsb2JhbGx5IHBlciB3aW5kb3cgaW4gdGhlIGVudHJ5IHBvaW50LlxuICAgICAgc2VsZi5yZXBvcnRFcnJvcihlKTtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuICB9O1xuICBjb25zdCBvcHRzU3VwcG9ydGVkID0gZGV0ZWN0RXZ0TGlzdGVuZXJPcHRzU3VwcG9ydCgpO1xuICBsZXQgY2FwdHVyZSA9IGZhbHNlO1xuICBpZiAob3B0X2V2dExpc3RlbmVyT3B0cykge1xuICAgIGNhcHR1cmUgPSBvcHRfZXZ0TGlzdGVuZXJPcHRzLmNhcHR1cmU7XG4gIH1cbiAgbG9jYWxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBldmVudFR5cGUsXG4gICAgICB3cmFwcGVkLFxuICAgICAgb3B0c1N1cHBvcnRlZCA/IG9wdF9ldnRMaXN0ZW5lck9wdHMgOiBjYXB0dXJlXG4gICk7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgaWYgKGxvY2FsRWxlbWVudCkge1xuICAgICAgbG9jYWxFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgZXZlbnRUeXBlLFxuICAgICAgICAgIHdyYXBwZWQsXG4gICAgICAgICAgb3B0c1N1cHBvcnRlZCA/IG9wdF9ldnRMaXN0ZW5lck9wdHMgOiBjYXB0dXJlXG4gICAgICApO1xuICAgIH1cbiAgICAvLyBFbnN1cmUgdGhlc2UgYXJlIEdDJ2RcbiAgICBsb2NhbExpc3RlbmVyID0gbnVsbDtcbiAgICBsb2NhbEVsZW1lbnQgPSBudWxsO1xuICAgIHdyYXBwZWQgPSBudWxsO1xuICB9O1xufVxuXG4vKipcbiAqIFRlc3RzIHdoZXRoZXIgdGhlIGJyb3dzZXIgc3VwcG9ydHMgb3B0aW9ucyBhcyBhbiBhcmd1bWVudCBvZiBhZGRFdmVudExpc3RlbmVyXG4gKiBvciBub3QuXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRldGVjdEV2dExpc3RlbmVyT3B0c1N1cHBvcnQoKSB7XG4gIC8vIE9ubHkgcnVuIHRoZSB0ZXN0IG9uY2VcbiAgaWYgKG9wdHNTdXBwb3J0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBvcHRzU3VwcG9ydGVkO1xuICB9XG5cbiAgb3B0c1N1cHBvcnRlZCA9IGZhbHNlO1xuICB0cnkge1xuICAgIC8vIFRlc3Qgd2hldGhlciBicm93c2VyIHN1cHBvcnRzIEV2ZW50TGlzdGVuZXJPcHRpb25zIG9yIG5vdFxuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICBnZXQgY2FwdHVyZSgpIHtcbiAgICAgICAgb3B0c1N1cHBvcnRlZCA9IHRydWU7XG4gICAgICB9LFxuICAgIH07XG4gICAgc2VsZi5hZGRFdmVudExpc3RlbmVyKCd0ZXN0LW9wdGlvbnMnLCBudWxsLCBvcHRpb25zKTtcbiAgICBzZWxmLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Rlc3Qtb3B0aW9ucycsIG51bGwsIG9wdGlvbnMpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICAvLyBFdmVudExpc3RlbmVyT3B0aW9ucyBhcmUgbm90IHN1cHBvcnRlZFxuICB9XG4gIHJldHVybiBvcHRzU3VwcG9ydGVkO1xufVxuXG4vKipcbiAgKiBSZXNldHMgdGhlIHRlc3QgZm9yIHdoZXRoZXIgYWRkRXZlbnRMaXN0ZW5lciBzdXBwb3J0cyBvcHRpb25zIG9yIG5vdC5cbiAgKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNldEV2dExpc3RlbmVyT3B0c1N1cHBvcnRGb3JUZXN0aW5nKCkge1xuICBvcHRzU3VwcG9ydGVkID0gdW5kZWZpbmVkO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7aW50ZXJuYWxMaXN0ZW5JbXBsZW1lbnRhdGlvbn0gZnJvbSAnLi9ldmVudC1oZWxwZXItbGlzdGVuJztcbmltcG9ydCB7dXNlcn0gZnJvbSAnLi9sb2cnO1xuXG4vKiogQGNvbnN0IHtzdHJpbmd9ICAqL1xuY29uc3QgTE9BRF9GQUlMVVJFX1BSRUZJWCA9ICdGYWlsZWQgdG8gbG9hZDonO1xuXG4vKipcbiAqIFJldHVybnMgYSBDdXN0b21FdmVudCB3aXRoIGEgZ2l2ZW4gdHlwZSBhbmQgZGV0YWlsOyBzdXBwb3J0cyBmYWxsYmFjayBmb3IgSUUuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7IUpzb25PYmplY3R8c3RyaW5nfHVuZGVmaW5lZHxudWxsfSBkZXRhaWxcbiAqIEBwYXJhbSB7RXZlbnRJbml0PX0gb3B0X2V2ZW50SW5pdFxuICogQHJldHVybiB7IUV2ZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ3VzdG9tRXZlbnQod2luLCB0eXBlLCBkZXRhaWwsIG9wdF9ldmVudEluaXQpIHtcbiAgY29uc3QgZXZlbnRJbml0ID0gLyoqIEB0eXBlIHshQ3VzdG9tRXZlbnRJbml0fSAqLyAoe2RldGFpbH0pO1xuICBPYmplY3QuYXNzaWduKGV2ZW50SW5pdCwgb3B0X2V2ZW50SW5pdCk7XG4gIC8vIHdpbi5DdXN0b21FdmVudCBpcyBhIGZ1bmN0aW9uIG9uIEVkZ2UsIENocm9tZSwgRkYsIFNhZmFyaSBidXRcbiAgLy8gaXMgYW4gb2JqZWN0IG9uIElFIDExLlxuICBpZiAodHlwZW9mIHdpbi5DdXN0b21FdmVudCA9PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIG5ldyB3aW4uQ3VzdG9tRXZlbnQodHlwZSwgZXZlbnRJbml0KTtcbiAgfSBlbHNlIHtcbiAgICAvLyBEZXByZWNhdGVkIGZhbGxiYWNrIGZvciBJRS5cbiAgICBjb25zdCBlID0gd2luLmRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpO1xuICAgIGUuaW5pdEN1c3RvbUV2ZW50KFxuICAgICAgICB0eXBlLCAhIWV2ZW50SW5pdC5idWJibGVzLCAhIWV2ZW50SW5pdC5jYW5jZWxhYmxlLCBkZXRhaWwpO1xuICAgIHJldHVybiBlO1xuICB9XG59XG5cbi8qKlxuICogTGlzdGVucyBmb3IgdGhlIHNwZWNpZmllZCBldmVudCBvbiB0aGUgZWxlbWVudC5cbiAqIEBwYXJhbSB7IUV2ZW50VGFyZ2V0fSBlbGVtZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRUeXBlXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFFdmVudCl9IGxpc3RlbmVyXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdF9ldnRMaXN0ZW5lck9wdHNcbiAqIEByZXR1cm4geyFVbmxpc3RlbkRlZn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbihlbGVtZW50LCBldmVudFR5cGUsIGxpc3RlbmVyLCBvcHRfZXZ0TGlzdGVuZXJPcHRzKSB7XG4gIHJldHVybiBpbnRlcm5hbExpc3RlbkltcGxlbWVudGF0aW9uKFxuICAgICAgZWxlbWVudCwgZXZlbnRUeXBlLCBsaXN0ZW5lciwgb3B0X2V2dExpc3RlbmVyT3B0cyk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZGF0YSBwcm9wZXJ0eSBvZiBhbiBldmVudCB3aXRoIHRoZSBjb3JyZWN0IHR5cGUuXG4gKiBAcGFyYW0geyFFdmVudHx7ZGF0YTogIUpzb25PYmplY3R9fSBldmVudFxuICogQHJldHVybiB7P0pzb25PYmplY3R8c3RyaW5nfHVuZGVmaW5lZH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERhdGEoZXZlbnQpIHtcbiAgcmV0dXJuIC8qKiBAdHlwZSB7P0pzb25PYmplY3R8c3RyaW5nfHVuZGVmaW5lZH0gKi8gKGV2ZW50LmRhdGEpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGRldGFpbCBwcm9wZXJ0eSBvZiBhbiBldmVudCB3aXRoIHRoZSBjb3JyZWN0IHR5cGUuXG4gKiBAcGFyYW0geyFFdmVudHx7ZGV0YWlsOiAhSnNvbk9iamVjdH19IGV2ZW50XG4gKiBAcmV0dXJuIHs/SnNvbk9iamVjdHxzdHJpbmd8dW5kZWZpbmVkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGV0YWlsKGV2ZW50KSB7XG4gIHJldHVybiAvKiogQHR5cGUgez9Kc29uT2JqZWN0fHN0cmluZ3x1bmRlZmluZWR9ICovIChldmVudC5kZXRhaWwpO1xufVxuXG4vKipcbiAqIExpc3RlbnMgZm9yIHRoZSBzcGVjaWZpZWQgZXZlbnQgb24gdGhlIGVsZW1lbnQgYW5kIHJlbW92ZXMgdGhlIGxpc3RlbmVyXG4gKiBhcyBzb29uIGFzIGV2ZW50IGhhcyBiZWVuIHJlY2VpdmVkLlxuICogQHBhcmFtIHshRXZlbnRUYXJnZXR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFR5cGVcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oIUV2ZW50KX0gbGlzdGVuZXJcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0X2V2dExpc3RlbmVyT3B0c1xuICogQHJldHVybiB7IVVubGlzdGVuRGVmfVxuICovXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuT25jZShlbGVtZW50LCBldmVudFR5cGUsIGxpc3RlbmVyLCBvcHRfZXZ0TGlzdGVuZXJPcHRzKSB7XG4gIGxldCBsb2NhbExpc3RlbmVyID0gbGlzdGVuZXI7XG4gIGNvbnN0IHVubGlzdGVuID0gaW50ZXJuYWxMaXN0ZW5JbXBsZW1lbnRhdGlvbihlbGVtZW50LCBldmVudFR5cGUsIGV2ZW50ID0+IHtcbiAgICB0cnkge1xuICAgICAgbG9jYWxMaXN0ZW5lcihldmVudCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIC8vIEVuc3VyZSBsaXN0ZW5lciBpcyBHQydkXG4gICAgICBsb2NhbExpc3RlbmVyID0gbnVsbDtcbiAgICAgIHVubGlzdGVuKCk7XG4gICAgfVxuICB9LCBvcHRfZXZ0TGlzdGVuZXJPcHRzKTtcbiAgcmV0dXJuIHVubGlzdGVuO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyAgYSBwcm9taXNlIHRoYXQgd2lsbCByZXNvbHZlIGFzIHNvb24gYXMgdGhlIHNwZWNpZmllZCBldmVudCBoYXNcbiAqIGZpcmVkIG9uIHRoZSBlbGVtZW50LlxuICogQHBhcmFtIHshRXZlbnRUYXJnZXR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFR5cGVcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0X2V2dExpc3RlbmVyT3B0c1xuICogQHBhcmFtIHtmdW5jdGlvbighVW5saXN0ZW5EZWYpPX0gb3B0X2NhbmNlbCBBbiBvcHRpb25hbCBmdW5jdGlvbiB0aGF0LCB3aGVuXG4gKiAgICAgcHJvdmlkZWQsIHdpbGwgYmUgY2FsbGVkIHdpdGggdGhlIHVubGlzdGVuZXIuIFRoaXMgZ2l2ZXMgdGhlIGNhbGxlclxuICogICAgIGFjY2VzcyB0byB0aGUgdW5saXN0ZW5lciwgc28gaXQgbWF5IGJlIGNhbGxlZCBtYW51YWxseSB3aGVuIG5lY2Vzc2FyeS5cbiAqIEByZXR1cm4geyFQcm9taXNlPCFFdmVudD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW5PbmNlUHJvbWlzZShlbGVtZW50LCBldmVudFR5cGUsIG9wdF9ldnRMaXN0ZW5lck9wdHMsXG4gIG9wdF9jYW5jZWwpIHtcbiAgbGV0IHVubGlzdGVuO1xuICBjb25zdCBldmVudFByb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICB1bmxpc3RlbiA9IGxpc3Rlbk9uY2UoZWxlbWVudCwgZXZlbnRUeXBlLCByZXNvbHZlLCBvcHRfZXZ0TGlzdGVuZXJPcHRzKTtcbiAgfSk7XG4gIGV2ZW50UHJvbWlzZS50aGVuKHVubGlzdGVuLCB1bmxpc3Rlbik7XG4gIGlmIChvcHRfY2FuY2VsKSB7XG4gICAgb3B0X2NhbmNlbCh1bmxpc3Rlbik7XG4gIH1cbiAgcmV0dXJuIGV2ZW50UHJvbWlzZTtcbn1cblxuXG4vKipcbiAqIFdoZXRoZXIgdGhlIHNwZWNpZmllZCBlbGVtZW50L3dpbmRvdyBoYXMgYmVlbiBsb2FkZWQgYWxyZWFkeS5cbiAqIEBwYXJhbSB7IUVsZW1lbnR8IVdpbmRvd30gZWxlT3JXaW5kb3dcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0xvYWRlZChlbGVPcldpbmRvdykge1xuICByZXR1cm4gISEoZWxlT3JXaW5kb3cuY29tcGxldGUgfHwgZWxlT3JXaW5kb3cucmVhZHlTdGF0ZSA9PSAnY29tcGxldGUnXG4gICAgICAvLyBJZiB0aGUgcGFzc2VkIGluIHRoaW5nIGlzIGEgV2luZG93LCBpbmZlciBsb2FkZWQgc3RhdGUgZnJvbVxuICAgICAgLy9cbiAgICAgIHx8IChlbGVPcldpbmRvdy5kb2N1bWVudFxuICAgICAgICAgICYmIGVsZU9yV2luZG93LmRvY3VtZW50LnJlYWR5U3RhdGUgPT0gJ2NvbXBsZXRlJykpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgd2lsbCByZXNvbHZlIG9yIGZhaWwgYmFzZWQgb24gdGhlIGVsZU9yV2luZG93J3MgJ2xvYWQnXG4gKiBhbmQgJ2Vycm9yJyBldmVudHMuIE9wdGlvbmFsbHkgdGhpcyBtZXRob2QgdGFrZXMgYSB0aW1lb3V0LCB3aGljaCB3aWxsIHJlamVjdFxuICogdGhlIHByb21pc2UgaWYgdGhlIHJlc291cmNlIGhhcyBub3QgbG9hZGVkIGJ5IHRoZW4uXG4gKiBAcGFyYW0ge1R9IGVsZU9yV2luZG93IFN1cHBvcnRzIGJvdGggRWxlbWVudHMgYW5kIGFzIGEgc3BlY2lhbCBjYXNlIFdpbmRvd3MuXG4gKiBAcmV0dXJuIHshUHJvbWlzZTxUPn1cbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsb2FkUHJvbWlzZShlbGVPcldpbmRvdykge1xuICBsZXQgdW5saXN0ZW5Mb2FkO1xuICBsZXQgdW5saXN0ZW5FcnJvcjtcbiAgaWYgKGlzTG9hZGVkKGVsZU9yV2luZG93KSkge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZWxlT3JXaW5kb3cpO1xuICB9XG4gIGNvbnN0IGxvYWRpbmdQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIC8vIExpc3RlbiBvbmNlIHNpbmNlIElFIDUvNi83IGZpcmUgdGhlIG9ubG9hZCBldmVudCBjb250aW51b3VzbHkgZm9yXG4gICAgLy8gYW5pbWF0ZWQgR0lGcy5cbiAgICBjb25zdCB7dGFnTmFtZX0gPSBlbGVPcldpbmRvdztcbiAgICBpZiAodGFnTmFtZSA9PT0gJ0FVRElPJyB8fCB0YWdOYW1lID09PSAnVklERU8nKSB7XG4gICAgICB1bmxpc3RlbkxvYWQgPSBsaXN0ZW5PbmNlKGVsZU9yV2luZG93LCAnbG9hZHN0YXJ0JywgcmVzb2x2ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHVubGlzdGVuTG9hZCA9IGxpc3Rlbk9uY2UoZWxlT3JXaW5kb3csICdsb2FkJywgcmVzb2x2ZSk7XG4gICAgfVxuICAgIC8vIEZvciBlbGVtZW50cywgdW5saXN0ZW4gb24gZXJyb3IgKGRvbid0IGZvciBXaW5kb3dzKS5cbiAgICBpZiAodGFnTmFtZSkge1xuICAgICAgdW5saXN0ZW5FcnJvciA9IGxpc3Rlbk9uY2UoZWxlT3JXaW5kb3csICdlcnJvcicsIHJlamVjdCk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gbG9hZGluZ1Byb21pc2UudGhlbigoKSA9PiB7XG4gICAgaWYgKHVubGlzdGVuRXJyb3IpIHtcbiAgICAgIHVubGlzdGVuRXJyb3IoKTtcbiAgICB9XG4gICAgcmV0dXJuIGVsZU9yV2luZG93O1xuICB9LCAoKSA9PiB7XG4gICAgaWYgKHVubGlzdGVuTG9hZCkge1xuICAgICAgdW5saXN0ZW5Mb2FkKCk7XG4gICAgfVxuICAgIGZhaWxlZFRvTG9hZChlbGVPcldpbmRvdyk7XG4gIH0pO1xufVxuXG4vKipcbiAqIEVtaXQgZXJyb3Igb24gbG9hZCBmYWlsdXJlLlxuICogQHBhcmFtIHshRWxlbWVudHwhV2luZG93fSBlbGVPcldpbmRvdyBTdXBwb3J0cyBib3RoIEVsZW1lbnRzIGFuZCBhcyBhIHNwZWNpYWxcbiAqICAgICBjYXNlIFdpbmRvd3MuXG4gKi9cbmZ1bmN0aW9uIGZhaWxlZFRvTG9hZChlbGVPcldpbmRvdykge1xuICAvLyBSZXBvcnQgZmFpbGVkIGxvYWRzIGFzIHVzZXIgZXJyb3JzIHNvIHRoYXQgdGhleSBhdXRvbWF0aWNhbGx5IGdvXG4gIC8vIGludG8gdGhlIFwiZG9jdW1lbnQgZXJyb3JcIiBidWNrZXQuXG4gIGxldCB0YXJnZXQgPSBlbGVPcldpbmRvdztcbiAgaWYgKHRhcmdldCAmJiB0YXJnZXQuc3JjKSB7XG4gICAgdGFyZ2V0ID0gdGFyZ2V0LnNyYztcbiAgfVxuICB0aHJvdyB1c2VyKCkuY3JlYXRlRXJyb3IoTE9BRF9GQUlMVVJFX1BSRUZJWCwgdGFyZ2V0KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBlcnJvciBtZXNzYWdlIGlzIHdhcyBjcmVhdGVkIGZvciBhIGxvYWQgZXJyb3IuXG4gKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBBbiBlcnJvciBtZXNzYWdlXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNMb2FkRXJyb3JNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgcmV0dXJuIG1lc3NhZ2UuaW5kZXhPZihMT0FEX0ZBSUxVUkVfUFJFRklYKSAhPSAtMTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgRXhwZXJpbWVudHMgc3lzdGVtIGFsbG93cyBhIGRldmVsb3BlciB0byBvcHQtaW4gdG8gdGVzdFxuICogZmVhdHVyZXMgdGhhdCBhcmUgbm90IHlldCBmdWxseSB0ZXN0ZWQuXG4gKlxuICogRXhwZXJpbWVudHMgcGFnZTogaHR0cHM6Ly9jZG4uYW1wcHJvamVjdC5vcmcvZXhwZXJpbWVudHMuaHRtbCAqXG4gKi9cblxuaW1wb3J0IHtnZXRDb29raWUsIHNldENvb2tpZX0gZnJvbSAnLi9jb29raWVzJztcbmltcG9ydCB7aGFzT3dufSBmcm9tICcuL3V0aWxzL29iamVjdCc7XG5pbXBvcnQge3BhcnNlUXVlcnlTdHJpbmd9IGZyb20gJy4vdXJsJztcblxuLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuY29uc3QgQ09PS0lFX05BTUUgPSAnQU1QX0VYUCc7XG5cbi8qKiBAY29uc3Qge251bWJlcn0gKi9cbmNvbnN0IENPT0tJRV9NQVhfQUdFX0RBWVMgPSAxODA7IC8vIDYgbW9udGhcblxuLyoqIEBjb25zdCB7dGltZX0gKi9cbmNvbnN0IENPT0tJRV9FWFBJUkFUSU9OX0lOVEVSVkFMID0gQ09PS0lFX01BWF9BR0VfREFZUyAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XG5cbi8qKiBAY29uc3Qge3N0cmluZ30gKi9cbmNvbnN0IFRPR0dMRVNfV0lORE9XX1BST1BFUlRZID0gJ19fQU1QX19FWFBFUklNRU5UX1RPR0dMRVMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHt7XG4gKiAgIGlzVHJhZmZpY0VsaWdpYmxlOiBmdW5jdGlvbighV2luZG93KTpib29sZWFuLFxuICogICBicmFuY2hlczogIUFycmF5PHN0cmluZz5cbiAqIH19XG4gKi9cbmV4cG9ydCBsZXQgRXhwZXJpbWVudEluZm87XG5cbi8qKlxuICogV2hldGhlciB3ZSBhcmUgaW4gY2FuYXJ5LlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0NhbmFyeSh3aW4pIHtcbiAgcmV0dXJuICEhKHdpbi5BTVBfQ09ORklHICYmIHdpbi5BTVBfQ09ORklHLmNhbmFyeSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBiaW5hcnkgdHlwZSwgZS5nLiwgY2FuYXJ5LCBjb250cm9sLCBvciBwcm9kdWN0aW9uLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEJpbmFyeVR5cGUod2luKSB7XG4gIHJldHVybiB3aW4uQU1QX0NPTkZJRyAmJiB3aW4uQU1QX0NPTkZJRy50eXBlID9cbiAgICB3aW4uQU1QX0NPTkZJRy50eXBlIDogJ3Vua25vd24nO1xufVxuXG4vKipcbiAqIFdoZXRoZXIgdGhlIHNwZWNpZmllZCBleHBlcmltZW50IGlzIG9uIG9yIG9mZi5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gZXhwZXJpbWVudElkXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNFeHBlcmltZW50T24od2luLCBleHBlcmltZW50SWQpIHtcbiAgY29uc3QgdG9nZ2xlcyA9IGV4cGVyaW1lbnRUb2dnbGVzKHdpbik7XG4gIHJldHVybiAhIXRvZ2dsZXNbZXhwZXJpbWVudElkXTtcbn1cblxuLyoqXG4gKiBUb2dnbGVzIHRoZSBleHBlcmltZW50IG9uIG9yIG9mZi4gUmV0dXJucyB0aGUgYWN0dWFsIHZhbHVlIG9mIHRoZSBleHBlcmltZW50XG4gKiBhZnRlciB0b2dnbGluZyBpcyBkb25lLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBleHBlcmltZW50SWRcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9vblxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X3RyYW5zaWVudEV4cGVyaW1lbnQgIFdoZXRoZXIgdG8gdG9nZ2xlIHRoZVxuICogICAgIGV4cGVyaW1lbnQgc3RhdGUgXCJ0cmFuc2llbnRseVwiIChpLmUuLCBmb3IgdGhpcyBwYWdlIGxvYWQgb25seSkgb3JcbiAqICAgICBkdXJhYmx5IChieSBzYXZpbmcgdGhlIGV4cGVyaW1lbnQgSURzIHRvIHRoZSBjb29raWUgYWZ0ZXIgdG9nZ2xpbmcpLlxuICogICAgIERlZmF1bHQ6IGZhbHNlIChzYXZlIGR1cmFibHkpLlxuICogQHJldHVybiB7Ym9vbGVhbn0gTmV3IHN0YXRlIGZvciBleHBlcmltZW50SWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b2dnbGVFeHBlcmltZW50KHdpbiwgZXhwZXJpbWVudElkLCBvcHRfb24sXG4gIG9wdF90cmFuc2llbnRFeHBlcmltZW50KSB7XG4gIGNvbnN0IGN1cnJlbnRseU9uID0gaXNFeHBlcmltZW50T24od2luLCAvKk9LKi9leHBlcmltZW50SWQpO1xuICBjb25zdCBvbiA9ICEhKG9wdF9vbiAhPT0gdW5kZWZpbmVkID8gb3B0X29uIDogIWN1cnJlbnRseU9uKTtcbiAgaWYgKG9uICE9IGN1cnJlbnRseU9uKSB7XG4gICAgY29uc3QgdG9nZ2xlcyA9IGV4cGVyaW1lbnRUb2dnbGVzKHdpbik7XG4gICAgdG9nZ2xlc1tleHBlcmltZW50SWRdID0gb247XG5cbiAgICBpZiAoIW9wdF90cmFuc2llbnRFeHBlcmltZW50KSB7XG4gICAgICBjb25zdCBjb29raWVUb2dnbGVzID0gZ2V0RXhwZXJpbWVudFRvZ2dsZXNGcm9tQ29va2llKHdpbik7XG4gICAgICBjb29raWVUb2dnbGVzW2V4cGVyaW1lbnRJZF0gPSBvbjtcbiAgICAgIHNhdmVFeHBlcmltZW50VG9nZ2xlc1RvQ29va2llKHdpbiwgY29va2llVG9nZ2xlcyk7XG4gICAgfVxuICB9XG4gIHJldHVybiBvbjtcbn1cblxuLyoqXG4gKiBDYWxjdWxhdGUgd2hldGhlciB0aGUgZXhwZXJpbWVudCBpcyBvbiBvciBvZmYgYmFzZWQgb2ZmIG9mIHRoZVxuICogY29va2llRmxhZyBvciB0aGUgZ2xvYmFsIGNvbmZpZyBmcmVxdWVuY3kgZ2l2ZW4uXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXhwZXJpbWVudFRvZ2dsZXMod2luKSB7XG4gIGlmICh3aW5bVE9HR0xFU19XSU5ET1dfUFJPUEVSVFldKSB7XG4gICAgcmV0dXJuIHdpbltUT0dHTEVTX1dJTkRPV19QUk9QRVJUWV07XG4gIH1cbiAgd2luW1RPR0dMRVNfV0lORE9XX1BST1BFUlRZXSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGNvbnN0IHRvZ2dsZXMgPSB3aW5bVE9HR0xFU19XSU5ET1dfUFJPUEVSVFldO1xuXG4gIC8vIFJlYWQgdGhlIGRlZmF1bHQgY29uZmlnIG9mIHRoaXMgYnVpbGQuXG4gIGlmICh3aW4uQU1QX0NPTkZJRykge1xuICAgIGZvciAoY29uc3QgZXhwZXJpbWVudElkIGluIHdpbi5BTVBfQ09ORklHKSB7XG4gICAgICBjb25zdCBmcmVxdWVuY3kgPSB3aW4uQU1QX0NPTkZJR1tleHBlcmltZW50SWRdO1xuICAgICAgaWYgKHR5cGVvZiBmcmVxdWVuY3kgPT09ICdudW1iZXInICYmIGZyZXF1ZW5jeSA+PSAwICYmIGZyZXF1ZW5jeSA8PSAxKSB7XG4gICAgICAgIHRvZ2dsZXNbZXhwZXJpbWVudElkXSA9IE1hdGgucmFuZG9tKCkgPCBmcmVxdWVuY3k7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8vIFJlYWQgZG9jdW1lbnQgbGV2ZWwgb3ZlcnJpZGUgZnJvbSBtZXRhIHRhZy5cbiAgaWYgKHdpbi5BTVBfQ09ORklHXG4gICAgICAmJiBBcnJheS5pc0FycmF5KHdpbi5BTVBfQ09ORklHWydhbGxvdy1kb2Mtb3B0LWluJ10pXG4gICAgICAmJiB3aW4uQU1QX0NPTkZJR1snYWxsb3ctZG9jLW9wdC1pbiddLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBhbGxvd2VkID0gd2luLkFNUF9DT05GSUdbJ2FsbG93LWRvYy1vcHQtaW4nXTtcbiAgICBjb25zdCBtZXRhID1cbiAgICAgICAgd2luLmRvY3VtZW50LmhlYWQucXVlcnlTZWxlY3RvcignbWV0YVtuYW1lPVwiYW1wLWV4cGVyaW1lbnRzLW9wdC1pblwiXScpO1xuICAgIGlmIChtZXRhKSB7XG4gICAgICBjb25zdCBvcHRlZEluRXhwZXJpbWVudHMgPSBtZXRhLmdldEF0dHJpYnV0ZSgnY29udGVudCcpLnNwbGl0KCcsJyk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9wdGVkSW5FeHBlcmltZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoYWxsb3dlZC5pbmRleE9mKG9wdGVkSW5FeHBlcmltZW50c1tpXSkgIT0gLTEpIHtcbiAgICAgICAgICB0b2dnbGVzW29wdGVkSW5FeHBlcmltZW50c1tpXV0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgT2JqZWN0LmFzc2lnbih0b2dnbGVzLCBnZXRFeHBlcmltZW50VG9nZ2xlc0Zyb21Db29raWUod2luKSk7XG5cbiAgaWYgKHdpbi5BTVBfQ09ORklHXG4gICAgICAmJiBBcnJheS5pc0FycmF5KHdpbi5BTVBfQ09ORklHWydhbGxvdy11cmwtb3B0LWluJ10pXG4gICAgICAmJiB3aW4uQU1QX0NPTkZJR1snYWxsb3ctdXJsLW9wdC1pbiddLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBhbGxvd2VkID0gd2luLkFNUF9DT05GSUdbJ2FsbG93LXVybC1vcHQtaW4nXTtcbiAgICBjb25zdCBoYXNoID0gd2luLmxvY2F0aW9uLm9yaWdpbmFsSGFzaCB8fCB3aW4ubG9jYXRpb24uaGFzaDtcbiAgICBjb25zdCBwYXJhbXMgPSBwYXJzZVF1ZXJ5U3RyaW5nKGhhc2gpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWxsb3dlZC5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgcGFyYW0gPSBwYXJhbXNbYGUtJHthbGxvd2VkW2ldfWBdO1xuICAgICAgaWYgKHBhcmFtID09ICcxJykge1xuICAgICAgICB0b2dnbGVzW2FsbG93ZWRbaV1dID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChwYXJhbSA9PSAnMCcpIHtcbiAgICAgICAgdG9nZ2xlc1thbGxvd2VkW2ldXSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gdG9nZ2xlcztcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBjYWNoZWQgZXhwZXJpbWVudHMgdG9nZ2xlcywgb3IgbnVsbCBpZiB0aGV5IGhhdmUgbm90IGJlZW5cbiAqIGNvbXB1dGVkIHlldC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHtPYmplY3Q8c3RyaW5nLCBib29sZWFuPn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4cGVyaW1lbnRUb2dnbGVzT3JOdWxsKHdpbikge1xuICByZXR1cm4gd2luW1RPR0dMRVNfV0lORE9XX1BST1BFUlRZXSB8fCBudWxsO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzZXQgb2YgZXhwZXJpbWVudCBJRHMgY3VycmVudGx5IG9uLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4geyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn1cbiAqL1xuZnVuY3Rpb24gZ2V0RXhwZXJpbWVudFRvZ2dsZXNGcm9tQ29va2llKHdpbikge1xuICBjb25zdCBleHBlcmltZW50Q29va2llID0gZ2V0Q29va2llKHdpbiwgQ09PS0lFX05BTUUpO1xuICBjb25zdCB0b2tlbnMgPSBleHBlcmltZW50Q29va2llID8gZXhwZXJpbWVudENvb2tpZS5zcGxpdCgvXFxzKixcXHMqL2cpIDogW107XG5cbiAgY29uc3QgdG9nZ2xlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHRva2Vuc1tpXS5sZW5ndGggPT0gMCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmICh0b2tlbnNbaV1bMF0gPT0gJy0nKSB7XG4gICAgICB0b2dnbGVzW3Rva2Vuc1tpXS5zdWJzdHIoMSldID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRvZ2dsZXNbdG9rZW5zW2ldXSA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRvZ2dsZXM7XG59XG5cbi8qKlxuICogU2F2ZXMgYSBzZXQgb2YgZXhwZXJpbWVudCBJRHMgY3VycmVudGx5IG9uLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fSB0b2dnbGVzXG4gKi9cbmZ1bmN0aW9uIHNhdmVFeHBlcmltZW50VG9nZ2xlc1RvQ29va2llKHdpbiwgdG9nZ2xlcykge1xuICBjb25zdCBleHBlcmltZW50SWRzID0gW107XG4gIGZvciAoY29uc3QgZXhwZXJpbWVudCBpbiB0b2dnbGVzKSB7XG4gICAgZXhwZXJpbWVudElkcy5wdXNoKCh0b2dnbGVzW2V4cGVyaW1lbnRdID09PSBmYWxzZSA/ICctJyA6ICcnKSArIGV4cGVyaW1lbnQpO1xuICB9XG5cbiAgc2V0Q29va2llKHdpbiwgQ09PS0lFX05BTUUsIGV4cGVyaW1lbnRJZHMuam9pbignLCcpLFxuICAgICAgRGF0ZS5ub3coKSArIENPT0tJRV9FWFBJUkFUSU9OX0lOVEVSVkFMLCB7XG4gICAgICAgIC8vIFNldCBleHBsaWNpdCBkb21haW4sIHNvIHRoZSBjb29raWUgZ2V0cyBzZW5kIHRvIHN1YiBkb21haW5zLlxuICAgICAgICBkb21haW46IHdpbi5sb2NhdGlvbi5ob3N0bmFtZSxcbiAgICAgICAgYWxsb3dPblByb3h5T3JpZ2luOiB0cnVlLFxuICAgICAgfSk7XG59XG5cbi8qKlxuICogU2VlIGdldEV4cGVyaW1lbnRUb2dnbGVzRnJvbUNvb2tpZSgpLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4geyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn1cbiAqIEB2aXNpYmxlRm9yVGVzdGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXhwZXJpbWVudFRvZ2xlc0Zyb21Db29raWVGb3JUZXN0aW5nKHdpbikge1xuICByZXR1cm4gZ2V0RXhwZXJpbWVudFRvZ2dsZXNGcm9tQ29va2llKHdpbik7XG59XG5cbi8qKlxuICogUmVzZXRzIHRoZSBleHBlcmltZW50c1RvZ2dsZSBjYWNoZSBmb3IgdGVzdGluZyBwdXJwb3Nlcy5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0RXhwZXJpbWVudFRvZ2dsZXNGb3JUZXN0aW5nKHdpbikge1xuICBzZXRDb29raWUod2luLCBDT09LSUVfTkFNRSwgJycsIDAsIHtcbiAgICBkb21haW46IHdpbi5sb2NhdGlvbi5ob3N0bmFtZSxcbiAgfSk7XG4gIHdpbltUT0dHTEVTX1dJTkRPV19QUk9QRVJUWV0gPSBudWxsO1xufVxuXG4vKipcbiAqIEluIHNvbWUgYnJvd3NlciBpbXBsZW1lbnRhdGlvbnMgb2YgTWF0aC5yYW5kb20oKSwgc2VxdWVudGlhbCBjYWxscyBvZlxuICogTWF0aC5yYW5kb20oKSBhcmUgY29ycmVsYXRlZCBhbmQgY2FuIGNhdXNlIGEgYmlhcy4gIEluIHBhcnRpY3VsYXIsXG4gKiBpZiB0aGUgcHJldmlvdXMgcmFuZG9tKCkgY2FsbCB3YXMgPCAwLjAwMSAoYXMgaXQgd2lsbCBiZSBpZiB3ZSBzZWxlY3RcbiAqIGludG8gYW4gZXhwZXJpbWVudCksIHRoZSBuZXh0IHZhbHVlIGNvdWxkIGJlIGxlc3MgdGhhbiAwLjUgbW9yZSB0aGFuXG4gKiA1MC43JSBvZiB0aGUgdGltZS4gIFRoaXMgcHJvdmlkZXMgYW4gaW1wbGVtZW50YXRpb24gdGhhdCByb290cyBkb3duIGludG9cbiAqIHRoZSBjcnlwdG8gQVBJLCB3aGVuIGF2YWlsYWJsZSwgdG8gcHJvZHVjZSBsZXNzIGJpYXNlZCBzYW1wbGVzLlxuICpcbiAqIEByZXR1cm4ge251bWJlcn0gUHNldWRvLXJhbmRvbSBmbG9hdGluZy1wb2ludCB2YWx1ZSBvbiB0aGUgcmFuZ2UgWzAsIDEpLlxuICovXG5mdW5jdGlvbiBzbG93QnV0QWNjdXJhdGVQcm5nKCkge1xuICAvLyBUT0RPKHRkcmwpOiBJbXBsZW1lbnQuXG4gIHJldHVybiBNYXRoLnJhbmRvbSgpO1xufVxuXG4vKipcbiAqIENvbnRhaW5lciBmb3IgYWx0ZXJuYXRlIHJhbmRvbSBudW1iZXIgZ2VuZXJhdG9yIGltcGxlbWVudGF0aW9ucy4gIFRoaXNcbiAqIGFsbG93cyB1cyB0byBzZXQgYW4gXCJhY2N1cmF0ZVwiIFBSTkcgZm9yIGJyYW5jaCBzZWxlY3Rpb24sIGJ1dCB0byBtb2NrIGl0XG4gKiBvdXQgZWFzaWx5IGluIHRlc3RzLlxuICpcbiAqIEB2aXNpYmxlRm9yVGVzdGluZ1xuICogQGNvbnN0IHshe2FjY3VyYXRlUHJuZzogZnVuY3Rpb24oKTpudW1iZXJ9fVxuICovXG5leHBvcnQgY29uc3QgUkFORE9NX05VTUJFUl9HRU5FUkFUT1JTID0ge1xuICBhY2N1cmF0ZVBybmc6IHNsb3dCdXRBY2N1cmF0ZVBybmcsXG59O1xuXG4vKipcbiAqIFNlbGVjdHMsIHVuaWZvcm1seSBhdCByYW5kb20sIGEgc2luZ2xlIGl0ZW0gZnJvbSB0aGUgYXJyYXkuXG4gKiBAcGFyYW0geyFBcnJheTxzdHJpbmc+fSBhcnIgT2JqZWN0IHRvIHNlbGVjdCBmcm9tLlxuICogQHJldHVybiB7P3N0cmluZ30gU2luZ2xlIGl0ZW0gZnJvbSBhcnIgb3IgbnVsbCBpZiBhcnIgd2FzIGVtcHR5LlxuICovXG5mdW5jdGlvbiBzZWxlY3RSYW5kb21JdGVtKGFycikge1xuICBjb25zdCBybiA9IFJBTkRPTV9OVU1CRVJfR0VORVJBVE9SUy5hY2N1cmF0ZVBybmcoKTtcbiAgcmV0dXJuIGFycltNYXRoLmZsb29yKHJuICogYXJyLmxlbmd0aCldIHx8IG51bGw7XG59XG5cbi8qKlxuICogU2VsZWN0cyB3aGljaCBwYWdlLWxldmVsIGV4cGVyaW1lbnQgYnJhbmNoZXMgYXJlIGVuYWJsZWQuIElmIGEgZ2l2ZW5cbiAqIGV4cGVyaW1lbnQgbmFtZSBpcyBhbHJlYWR5IHNldCAoaW5jbHVkaW5nIHRvIHRoZSBudWxsIC8gbm8gYnJhbmNoZXMgc2VsZWN0ZWRcbiAqIHN0YXRlKSwgdGhpcyB3b24ndCBhbHRlciBpdHMgc3RhdGUuXG4gKlxuICogQ2hlY2sgd2hldGhlciBhIGdpdmVuIGV4cGVyaW1lbnQgaXMgc2V0IHVzaW5nIGlzRXhwZXJpbWVudE9uKHdpbixcbiAqIGV4cGVyaW1lbnROYW1lKSBhbmQsIGlmIGl0IGlzIG9uLCBsb29rIGZvciB3aGljaCBicmFuY2ggaXMgc2VsZWN0ZWQgaW5cbiAqIHdpbi5leHBlcmltZW50QnJhbmNoZXNbZXhwZXJpbWVudE5hbWVdLlxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luIFdpbmRvdyBjb250ZXh0IG9uIHdoaWNoIHRvIHNhdmUgZXhwZXJpbWVudFxuICogICAgIHNlbGVjdGlvbiBzdGF0ZS5cbiAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsICFFeHBlcmltZW50SW5mbz59IGV4cGVyaW1lbnRzICBTZXQgb2YgZXhwZXJpbWVudHMgdG9cbiAqICAgICBjb25maWd1cmUgZm9yIHRoaXMgcGFnZSBsb2FkLlxuICogQHJldHVybiB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz59IE1hcCBvZiBleHBlcmltZW50IG5hbWVzIHRvIHNlbGVjdGVkXG4gKiAgICAgYnJhbmNoZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByYW5kb21seVNlbGVjdFVuc2V0RXhwZXJpbWVudHMod2luLCBleHBlcmltZW50cykge1xuICB3aW4uZXhwZXJpbWVudEJyYW5jaGVzID0gd2luLmV4cGVyaW1lbnRCcmFuY2hlcyB8fCB7fTtcbiAgY29uc3Qgc2VsZWN0ZWRFeHBlcmltZW50cyA9IHt9O1xuICBmb3IgKGNvbnN0IGV4cGVyaW1lbnROYW1lIGluIGV4cGVyaW1lbnRzKSB7XG4gICAgLy8gU2tpcCBleHBlcmltZW50TmFtZSBpZiBpdCBpcyBub3QgYSBrZXkgb2YgZXhwZXJpbWVudHMgb2JqZWN0IG9yIGlmIGl0XG4gICAgLy8gaGFzIGFscmVhZHkgYmVlbiBwb3B1bGF0ZWQgYnkgc29tZSBvdGhlciBwcm9wZXJ0eS5cbiAgICBpZiAoIWhhc093bihleHBlcmltZW50cywgZXhwZXJpbWVudE5hbWUpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGhhc093bih3aW4uZXhwZXJpbWVudEJyYW5jaGVzLCBleHBlcmltZW50TmFtZSkpIHtcbiAgICAgIHNlbGVjdGVkRXhwZXJpbWVudHNbZXhwZXJpbWVudE5hbWVdID1cbiAgICAgICAgICB3aW4uZXhwZXJpbWVudEJyYW5jaGVzW2V4cGVyaW1lbnROYW1lXTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmICghZXhwZXJpbWVudHNbZXhwZXJpbWVudE5hbWVdLmlzVHJhZmZpY0VsaWdpYmxlIHx8XG4gICAgICAgICFleHBlcmltZW50c1tleHBlcmltZW50TmFtZV0uaXNUcmFmZmljRWxpZ2libGUod2luKSkge1xuICAgICAgd2luLmV4cGVyaW1lbnRCcmFuY2hlc1tleHBlcmltZW50TmFtZV0gPSBudWxsO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gSWYgd2UncmUgaW4gdGhlIGV4cGVyaW1lbnQsIGJ1dCB3ZSBoYXZlbid0IGFscmVhZHkgZm9yY2VkIGEgc3BlY2lmaWNcbiAgICAvLyBleHBlcmltZW50IGJyYW5jaCAoZS5nLiwgdmlhIGEgdGVzdCBzZXR1cCksIHRoZW4gcmFuZG9taXplIHRoZSBicmFuY2hcbiAgICAvLyBjaG9pY2UuXG4gICAgaWYgKCF3aW4uZXhwZXJpbWVudEJyYW5jaGVzW2V4cGVyaW1lbnROYW1lXSAmJlxuICAgICAgaXNFeHBlcmltZW50T24od2luLCAvKk9LKi9leHBlcmltZW50TmFtZSkpIHtcbiAgICAgIGNvbnN0IHticmFuY2hlc30gPSBleHBlcmltZW50c1tleHBlcmltZW50TmFtZV07XG4gICAgICB3aW4uZXhwZXJpbWVudEJyYW5jaGVzW2V4cGVyaW1lbnROYW1lXSA9IHNlbGVjdFJhbmRvbUl0ZW0oYnJhbmNoZXMpO1xuICAgICAgc2VsZWN0ZWRFeHBlcmltZW50c1tleHBlcmltZW50TmFtZV0gPVxuICAgICAgICAgIHdpbi5leHBlcmltZW50QnJhbmNoZXNbZXhwZXJpbWVudE5hbWVdO1xuICAgIH1cbiAgfVxuICByZXR1cm4gc2VsZWN0ZWRFeHBlcmltZW50cztcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBleHBlcmltZW50IGJyYW5jaCBlbmFibGVkIGZvciB0aGUgZ2l2ZW4gZXhwZXJpbWVudCBJRC5cbiAqIEZvciBleGFtcGxlLCAnY29udHJvbCcgb3IgJ2V4cGVyaW1lbnQnLlxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luIFdpbmRvdyBjb250ZXh0IHRvIGNoZWNrIGZvciBleHBlcmltZW50IHN0YXRlLlxuICogQHBhcmFtIHtzdHJpbmd9IGV4cGVyaW1lbnROYW1lIE5hbWUgb2YgdGhlIGV4cGVyaW1lbnQgdG8gY2hlY2suXG4gKiBAcmV0dXJuIHs/c3RyaW5nfSBBY3RpdmUgZXhwZXJpbWVudCBicmFuY2ggSUQgZm9yIGV4cGVyaW1lbnROYW1lIChwb3NzaWJseVxuICogICAgIG51bGwgaWYgZXhwZXJpbWVudE5hbWUgaGFzIGJlZW4gdGVzdGVkIGJ1dCBubyBicmFuY2ggd2FzIGVuYWJsZWQpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXhwZXJpbWVudEJyYW5jaCh3aW4sIGV4cGVyaW1lbnROYW1lKSB7XG4gIHJldHVybiB3aW4uZXhwZXJpbWVudEJyYW5jaGVzID8gd2luLmV4cGVyaW1lbnRCcmFuY2hlc1tleHBlcmltZW50TmFtZV0gOiBudWxsO1xufVxuXG4vKipcbiAqIEZvcmNlIGVuYWJsZSAob3IgZGlzYWJsZSkgYSBzcGVjaWZpYyBicmFuY2ggb2YgYSBnaXZlbiBleHBlcmltZW50IG5hbWUuXG4gKiBEaXNhYmxlcyB0aGUgZXhwZXJpbWVudCBuYW1lIGFsdG9nZXRoZXIgaWYgYnJhbmNoSWQgaXMgZmFsc2Vpc2guXG4gKlxuICogQHBhcmFtIHshV2luZG93fSB3aW4gV2luZG93IGNvbnRleHQgdG8gY2hlY2sgZm9yIGV4cGVyaW1lbnQgc3RhdGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gZXhwZXJpbWVudE5hbWUgTmFtZSBvZiB0aGUgZXhwZXJpbWVudCB0byBjaGVjay5cbiAqIEBwYXJhbSB7P3N0cmluZ30gYnJhbmNoSWQgSUQgb2YgYnJhbmNoIHRvIGZvcmNlIG9yIG51bGwgdG8gZGlzYWJsZVxuICogICAgIGFsdG9nZXRoZXIuXG4gKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcmNlRXhwZXJpbWVudEJyYW5jaCh3aW4sIGV4cGVyaW1lbnROYW1lLCBicmFuY2hJZCkge1xuICB3aW4uZXhwZXJpbWVudEJyYW5jaGVzID0gd2luLmV4cGVyaW1lbnRCcmFuY2hlcyB8fCB7fTtcbiAgdG9nZ2xlRXhwZXJpbWVudCh3aW4sIGV4cGVyaW1lbnROYW1lLCAhIWJyYW5jaElkLCB0cnVlKTtcbiAgd2luLmV4cGVyaW1lbnRCcmFuY2hlc1tleHBlcmltZW50TmFtZV0gPSBicmFuY2hJZDtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfYmFzZSBFeHBvbmVudGlhbCBiYXNlLiBEZWZhdWx0cyB0byAyLlxuICogQHJldHVybiB7ZnVuY3Rpb24oZnVuY3Rpb24oKSk6IG51bWJlcn0gRnVuY3Rpb24gdGhhdCB3aGVuIGludm9rZWQgd2lsbFxuICogICAgIGNhbGwgdGhlIHBhc3NlZCBpbiBmdW5jdGlvbi4gT24gZXZlcnkgaW52b2NhdGlvbiB0aGUgbmV4dFxuICogICAgIGludm9jYXRpb24gb2YgdGhlIHBhc3NlZCBpbiBmdW5jdGlvbiB3aWxsIGJlIGV4cG9uZW50aWFsbHlcbiAqICAgICBsYXRlci4gUmV0dXJuZWQgZnVuY3Rpb24gcmV0dXJucyB0aW1lb3V0IGlkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXhwb25lbnRpYWxCYWNrb2ZmKG9wdF9iYXNlKSB7XG4gIGNvbnN0IGdldFRpbWVvdXQgPSBleHBvbmVudGlhbEJhY2tvZmZDbG9jayhvcHRfYmFzZSk7XG4gIHJldHVybiB3b3JrID0+IHtcbiAgICByZXR1cm4gc2V0VGltZW91dCh3b3JrLCBnZXRUaW1lb3V0KCkpO1xuICB9O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2Jhc2UgRXhwb25lbnRpYWwgYmFzZS4gRGVmYXVsdHMgdG8gMi5cbiAqIEByZXR1cm4ge2Z1bmN0aW9uKCk6IG51bWJlcn0gRnVuY3Rpb24gdGhhdCB3aGVuIGludm9rZWQgd2lsbCByZXR1cm5cbiAqICAgIGEgbnVtYmVyIHRoYXQgZXhwb25lbnRpYWxseSBncm93cyBwZXIgaW52b2NhdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4cG9uZW50aWFsQmFja29mZkNsb2NrKG9wdF9iYXNlKSB7XG4gIGNvbnN0IGJhc2UgPSBvcHRfYmFzZSB8fCAyO1xuICBsZXQgY291bnQgPSAwO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIGxldCB3YWl0ID0gTWF0aC5wb3coYmFzZSwgY291bnQrKyk7XG4gICAgd2FpdCArPSBnZXRKaXR0ZXIod2FpdCk7XG4gICAgcmV0dXJuIHdhaXQgKiAxMDAwO1xuICB9O1xufVxuXG4vKipcbiAqIEFkZCBqaXR0ZXIgdG8gYXZvaWQgdGhlIHRodW5kZXJpbmcgaGVyZC4gVGhpcyBjYW4gZS5nLiBoYXBwZW4gd2hlblxuICogd2UgcG9sbCBhIGJhY2tlbmQgYW5kIGl0IGZhaWxzIGZvciBldmVyeW9uZSBhdCB0aGUgc2FtZSB0aW1lLlxuICogV2UgYWRkIHVwIHRvIDMwJSAoZGVmYXVsdCkgbG9uZ2VyIG9yIHNob3J0ZXIgdGhhbiB0aGUgZ2l2ZW4gdGltZS5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gd2FpdCB0aGUgYW1vdW50IGlmIGJhc2UgbWlsbGlzZWNvbmRzXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9wZXJjIHRoZSBtaW4vbWF4IHBlcmNlbnRhZ2UgdG8gYWRkIG9yIHN1dHJhY3RcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEppdHRlcih3YWl0LCBvcHRfcGVyYykge1xuICBvcHRfcGVyYyA9IG9wdF9wZXJjIHx8IC4zO1xuICBsZXQgaml0dGVyID0gd2FpdCAqIG9wdF9wZXJjICogTWF0aC5yYW5kb20oKTtcbiAgaWYgKE1hdGgucmFuZG9tKCkgPiAuNSkge1xuICAgIGppdHRlciAqPSAtMTtcbiAgfVxuICByZXR1cm4gaml0dGVyO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7ZGV2fSBmcm9tICcuL2xvZyc7XG5pbXBvcnQge2dldEZvcm1Bc09iamVjdH0gZnJvbSAnLi9mb3JtJztcbmltcG9ydCB7bWFwfSBmcm9tICcuL3V0aWxzL29iamVjdCc7XG5cbi8qKlxuICogQSB3cmFwcGVyIGZvciBhIG5hdGl2ZSBgRm9ybURhdGFgIG9iamVjdCB0aGF0IGFsbG93cyB0aGUgcmV0cmlldmFsIG9mIGVudHJpZXNcbiAqIGluIHRoZSBmb3JtIGRhdGEgYWZ0ZXIgY29uc3RydWN0aW9uIGV2ZW4gb24gYnJvd3NlcnMgdGhhdCBkb24ndCBuYXRpdmVseVxuICogc3VwcG9ydCBgRm9ybURhdGEucHJvdG90eXBlLmVudHJpZXNgLlxuICpcbiAqIEBmaW5hbFxuICogQG5vdGUgU3ViY2xhc3NpbmcgYEZvcm1EYXRhYCBkb2Vzbid0IHdvcmsgaW4gdGhpcyBjYXNlIGFzIHRoZSB0cmFuc3BpbGVyXG4gKiAgICAgZ2VuZXJhdGVzIGNvZGUgdGhhdCBjYWxscyB0aGUgc3VwZXIgY29uc3RydWN0b3IgZGlyZWN0bHkgdXNpbmdcbiAqICAgICBgRnVuY3Rpb24ucHJvdG90eXBlLmNhbGxgLiBXZWJLaXQgKFNhZmFyaSkgZG9lc24ndCBhbGxvdyB0aGlzIGFuZFxuICogICAgIGVuZm9yY2VzIHRoYXQgY29uc3RydWN0b3JzIGJlIGNhbGxlZCB3aXRoIHRoZSBgbmV3YCBvcGVyYXRvci5cbiAqL1xuZXhwb3J0IGNsYXNzIEZvcm1EYXRhV3JhcHBlciB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IHdyYXBwZXIgZm9yIGEgYEZvcm1EYXRhYCBvYmplY3QuXG4gICAqXG4gICAqIElmIHRoZXJlJ3Mgbm8gbmF0aXZlIGBGb3JtRGF0YSNlbnRyaWVzYCwgY2hhbmNlcyBhcmUgdGhlcmUgYXJlIG5vIG5hdGl2ZVxuICAgKiBtZXRob2RzIHRvIHJlYWQgdGhlIGNvbnRlbnQgb2YgdGhlIGBGb3JtRGF0YWAgYWZ0ZXIgY29uc3RydWN0aW9uLCBzbyB0aGVcbiAgICogb25seSB3YXkgdG8gaW1wbGVtZW50IGBlbnRyaWVzYCBpbiB0aGlzIGNsYXNzIGlzIHRvIGNhcHR1cmUgdGhlIGZpZWxkcyBpblxuICAgKiB0aGUgZm9ybSBwYXNzZWQgdG8gdGhlIGNvbnN0cnVjdG9yIChhbmQgdGhlIGFyZ3VtZW50cyBwYXNzZWQgdG8gdGhlXG4gICAqIGBhcHBlbmRgIG1ldGhvZCkuXG4gICAqXG4gICAqIEZvciBtb3JlIGRldGFpbHMgb24gdGhpcywgc2VlIGh0dHA6Ly9tZG4uaW8vRm9ybURhdGEuXG4gICAqXG4gICAqIEBwYXJhbSB7IUhUTUxGb3JtRWxlbWVudD19IG9wdF9mb3JtIEFuIEhUTUwgYDxmb3JtPmAgZWxlbWVudCDigJQgd2hlblxuICAgKiAgICAgc3BlY2lmaWVkLCB0aGUgYEZvcm1EYXRhYCBvYmplY3Qgd2lsbCBiZSBwb3B1bGF0ZWQgd2l0aCB0aGUgZm9ybSdzXG4gICAqICAgICBjdXJyZW50IGtleXMvdmFsdWVzIHVzaW5nIHRoZSBuYW1lIHByb3BlcnR5IG9mIGVhY2ggZWxlbWVudCBmb3IgdGhlXG4gICAqICAgICBrZXlzIGFuZCB0aGVpciBzdWJtaXR0ZWQgdmFsdWUgZm9yIHRoZSB2YWx1ZXMuIEl0IHdpbGwgYWxzbyBlbmNvZGUgZmlsZVxuICAgKiAgICAgaW5wdXQgY29udGVudC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdF9mb3JtID0gdW5kZWZpbmVkKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUZvcm1EYXRhfSAqL1xuICAgIHRoaXMuZm9ybURhdGFfID0gbmV3IEZvcm1EYXRhKG9wdF9mb3JtKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qgez9PYmplY3Q8c3RyaW5nLCAhQXJyYXk8c3RyaW5nPj59ICovXG4gICAgdGhpcy5maWVsZFZhbHVlc18gPVxuICAgICAgICB0aGlzLmZvcm1EYXRhX1snZW50cmllcyddID9cbiAgICAgICAgICBudWxsIDpcbiAgICAgICAgICAob3B0X2Zvcm0gPyBnZXRGb3JtQXNPYmplY3Qob3B0X2Zvcm0pIDogbWFwKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcGVuZHMgYSBuZXcgdmFsdWUgb250byBhbiBleGlzdGluZyBrZXkgaW5zaWRlIGEgYEZvcm1EYXRhYCBvYmplY3QsIG9yXG4gICAqIGFkZHMgdGhlIGtleSBpZiBpdCBkb2VzIG5vdCBhbHJlYWR5IGV4aXN0LlxuICAgKlxuICAgKiBJZiB0aGVyZSdzIG5vIG5hdGl2ZSBgRm9ybURhdGEjZW50cmllc2AsIGNoYW5jZXMgYXJlIHRoZXJlIGFyZSBubyBuYXRpdmVcbiAgICogbWV0aG9kcyB0byByZWFkIHRoZSBjb250ZW50IG9mIHRoZSBgRm9ybURhdGFgIGFmdGVyIGNvbnN0cnVjdGlvbiwgc28gdGhlXG4gICAqIG9ubHkgd2F5IHRvIGltcGxlbWVudCBgZW50cmllc2AgaW4gdGhpcyBjbGFzcyBpcyB0byBjYXB0dXJlIHRoZSBhcmd1bWVudHNcbiAgICogcGFzc2VkIHRvIHRoZSBgYXBwZW5kYCBtZXRob2QgKGFuZCB0aGUgZm9ybSBwYXNzZWQgdG8gdGhlIGNvbnN0cnVjdG9yKS5cbiAgICpcbiAgICogU2luY2UgQU1QIGRvZXNuJ3Qgc3VwcG9ydCBgPGlucHV0IHR5cGU9XCJmaWxlXCI+YCwgYXBwZW5kaW5nIGEgYEZpbGVgIG9iamVjdFxuICAgKiBpcyBub3Qgc3VwcG9ydGVkIGFuZCB0aGUgYGZpbGVuYW1lYCBwYXJhbWV0ZXIgaXMgaWdub3JlZCBmb3IgdGhpcyB3cmFwcGVyLlxuICAgKlxuICAgKiBGb3IgbW9yZSBkZXRhaWxzIG9uIHRoaXMsIHNlZSBodHRwOi8vbWRuLmlvL0Zvcm1EYXRhL2FwcGVuZC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIGZpZWxkIHdob3NlIGRhdGEgaXMgY29udGFpbmVkIGluXG4gICAqICAgICBgdmFsdWVgLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgVGhlIGZpZWxkJ3MgdmFsdWUuXG4gICAqL1xuICBhcHBlbmQobmFtZSwgdmFsdWUpIHtcbiAgICBpZiAoIXRoaXMuZm9ybURhdGFfWydlbnRyaWVzJ10pIHtcbiAgICAgIGNvbnN0IG5hbWVTdHJpbmcgPSBTdHJpbmcobmFtZSk7XG4gICAgICB0aGlzLmZpZWxkVmFsdWVzX1tuYW1lU3RyaW5nXSA9IHRoaXMuZmllbGRWYWx1ZXNfW25hbWVTdHJpbmddIHx8IFtdO1xuICAgICAgdGhpcy5maWVsZFZhbHVlc19bbmFtZV0ucHVzaChTdHJpbmcodmFsdWUpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5mb3JtRGF0YV8uYXBwZW5kKG5hbWUsIHZhbHVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGl0ZXJhdG9yIG9mIGFsbCBrZXkvdmFsdWUgcGFpcnMgY29udGFpbmVkIGluIHRoaXMgb2JqZWN0LlxuICAgKlxuICAgKiBGb3IgbW9yZSBkZXRhaWxzIG9uIHRoaXMsIHNlZSBodHRwOi8vbWRuLmlvL0Zvcm1EYXRhL2VudHJpZXMuXG4gICAqXG4gICAqIEByZXR1cm4geyFJdGVyYXRvcjwhQXJyYXk8c3RyaW5nPj59XG4gICAqL1xuICBlbnRyaWVzKCkge1xuICAgIGlmICh0aGlzLmZvcm1EYXRhX1snZW50cmllcyddKSB7XG4gICAgICByZXR1cm4gdGhpcy5mb3JtRGF0YV9bJ2VudHJpZXMnXSgpO1xuICAgIH1cblxuICAgIGNvbnN0IGZpZWxkRW50cmllcyA9IFtdO1xuICAgIGNvbnN0IGZpZWxkVmFsdWVzID0gLyoqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgIUFycmF5PHN0cmluZz4+fSAqLyAoXG4gICAgICBkZXYoKS5hc3NlcnQodGhpcy5maWVsZFZhbHVlc18pKTtcbiAgICBPYmplY3Qua2V5cyhmaWVsZFZhbHVlcykuZm9yRWFjaChuYW1lID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlcyA9IGZpZWxkVmFsdWVzW25hbWVdO1xuICAgICAgdmFsdWVzLmZvckVhY2godmFsdWUgPT4gZmllbGRFbnRyaWVzLnB1c2goW25hbWUsIHZhbHVlXSkpO1xuICAgIH0pO1xuXG4gICAgLy8gR2VuZXJhdG9yIGZ1bmN0aW9ucyBhcmUgbm90IHN1cHBvcnRlZCBieSB0aGUgY3VycmVudCBCYWJlbCBjb25maWd1cmF0aW9uLFxuICAgIC8vIHNvIHdlIG11c3QgbWFudWFsbHkgaW1wbGVtZW50IHRoZSBpdGVyYXRvciBpbnRlcmZhY2UuXG4gICAgbGV0IG5leHRJbmRleCA9IDA7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IUl0ZXJhdG9yPCFBcnJheTxzdHJpbmc+Pn0gKi8gKHtcbiAgICAgIG5leHQoKSB7XG4gICAgICAgIHJldHVybiBuZXh0SW5kZXggPCBmaWVsZEVudHJpZXMubGVuZ3RoID9cbiAgICAgICAgICB7dmFsdWU6IGZpZWxkRW50cmllc1tuZXh0SW5kZXgrK10sIGRvbmU6IGZhbHNlfSA6XG4gICAgICAgICAge3ZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWV9O1xuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB3cmFwcGVkIG5hdGl2ZSBgRm9ybURhdGFgIG9iamVjdC5cbiAgICpcbiAgICogQHJldHVybiB7IUZvcm1EYXRhfVxuICAgKi9cbiAgZ2V0Rm9ybURhdGEoKSB7XG4gICAgcmV0dXJuIHRoaXMuZm9ybURhdGFfO1xuICB9XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIGdpdmVuIG9iamVjdCBpcyBhIEZvcm1EYXRhV3JhcHBlciBpbnN0YW5jZVxuICogQHBhcmFtIHsqfSBvXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBvYmplY3QgaXMgYSBGb3JtRGF0YVdyYXBwZXIgaW5zdGFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Zvcm1EYXRhV3JhcHBlcihvKSB7XG4gIC8vIGluc3RhbmNlb2YgZG9lc24ndCB3b3JrIGFzIGV4cGVjdGVkLCBzbyB3ZSBkZXRlY3Qgd2l0aCBkdWNrLXR5cGluZy5cbiAgcmV0dXJuICEhbyAmJiB0eXBlb2Ygby5nZXRGb3JtRGF0YSA9PSAnZnVuY3Rpb24nO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7YW5jZXN0b3JFbGVtZW50c0J5VGFnfSBmcm9tICcuL2RvbSc7XG5cbi8qKiBAY29uc3Qge3N0cmluZ30gKi9cbmNvbnN0IEZPUk1fUFJPUF8gPSAnX19BTVBfRk9STSc7XG5cbi8qKlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHJldHVybiB7Li4vZXh0ZW5zaW9ucy9hbXAtZm9ybS8wLjEvYW1wLWZvcm0uQW1wRm9ybX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1Pck51bGxGb3JFbGVtZW50KGVsZW1lbnQpIHtcbiAgcmV0dXJuIGVsZW1lbnRbRk9STV9QUk9QX10gfHwgbnVsbDtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0geyEuLi9leHRlbnNpb25zL2FtcC1mb3JtLzAuMS9hbXAtZm9ybS5BbXBGb3JtfSBmb3JtXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRGb3JtRm9yRWxlbWVudChlbGVtZW50LCBmb3JtKSB7XG4gIGVsZW1lbnRbRk9STV9QUk9QX10gPSBmb3JtO1xufVxuXG4vKipcbiAqIFJldHVybnMgZm9ybSBkYXRhIGluIHRoZSBwYXNzZWQtaW4gZm9ybSBhcyBhbiBvYmplY3QuXG4gKiBAcGFyYW0geyFIVE1MRm9ybUVsZW1lbnR9IGZvcm1cbiAqIEByZXR1cm4geyFKc29uT2JqZWN0fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rm9ybUFzT2JqZWN0KGZvcm0pIHtcbiAgY29uc3QgZGF0YSA9IC8qKiBAdHlwZSB7IUpzb25PYmplY3R9ICovICh7fSk7XG4gIGNvbnN0IGlucHV0cyA9IGZvcm0uZWxlbWVudHM7XG4gIGNvbnN0IHN1Ym1pdHRhYmxlVGFnc1JlZ2V4ID0gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWEpJC9pO1xuICBjb25zdCB1bnN1Ym1pdHRhYmxlVHlwZXNSZWdleCA9IC9eKD86YnV0dG9ufGltYWdlfGZpbGV8cmVzZXQpJC9pO1xuICBjb25zdCBjaGVja2FibGVUeXBlID0gL14oPzpjaGVja2JveHxyYWRpbykkL2k7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgaW5wdXQgPSBpbnB1dHNbaV07XG4gICAgaWYgKCFpbnB1dC5uYW1lIHx8IGlzRGlzYWJsZWQoaW5wdXQpIHx8XG4gICAgICAgICFzdWJtaXR0YWJsZVRhZ3NSZWdleC50ZXN0KGlucHV0LnRhZ05hbWUpIHx8XG4gICAgICAgIHVuc3VibWl0dGFibGVUeXBlc1JlZ2V4LnRlc3QoaW5wdXQudHlwZSkgfHxcbiAgICAgICAgKGNoZWNrYWJsZVR5cGUudGVzdChpbnB1dC50eXBlKSAmJiAhaW5wdXQuY2hlY2tlZCkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmIChkYXRhW2lucHV0Lm5hbWVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGRhdGFbaW5wdXQubmFtZV0gPSBbXTtcbiAgICB9XG4gICAgZGF0YVtpbnB1dC5uYW1lXS5wdXNoKGlucHV0LnZhbHVlKTtcbiAgfVxuXG4gIHJldHVybiBkYXRhO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhIGZpZWxkIGlzIGRpc2FibGVkLlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gaXNEaXNhYmxlZChlbGVtZW50KSB7XG4gIGlmIChlbGVtZW50LmRpc2FibGVkKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBjb25zdCBhbmNlc3RvcnMgPSBhbmNlc3RvckVsZW1lbnRzQnlUYWcoZWxlbWVudCwgJ2ZpZWxkc2V0Jyk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYW5jZXN0b3JzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGFuY2VzdG9yc1tpXS5kaXNhYmxlZCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgVGhpcyBtb2R1bGUgZGVjbGFyZXMgSlNPTiB0eXBlcyBhcyBkZWZpbmVkIGluIHRoZVxuICoge0BsaW5rIGh0dHA6Ly9qc29uLm9yZy99LlxuICovXG5cbmltcG9ydCB7aXNPYmplY3R9IGZyb20gJy4vdHlwZXMnO1xuXG5cbi8vIE5PVEUgVHlwZSBhcmUgY2hhbmdlZCB0byB7Kn0gYmVjYXVzZSBvZlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9jbG9zdXJlLWNvbXBpbGVyL2lzc3Vlcy8xOTk5XG5cbi8qKlxuICogSlNPTiBzY2FsYXIuIEl0J3MgZWl0aGVyIHN0cmluZywgbnVtYmVyIG9yIGJvb2xlYW4uXG4gKiBAdHlwZWRlZiB7Kn0gc2hvdWxkIGJlIHN0cmluZ3xudW1iZXJ8Ym9vbGVhblxuICovXG5sZXQgSlNPTlNjYWxhckRlZjtcblxuXG4vKipcbiAqIEpTT04gb2JqZWN0LiBJdCdzIGEgbWFwIHdpdGggc3RyaW5nIGtleXMgYW5kIEpTT04gdmFsdWVzLlxuICogQHR5cGVkZWYgeyp9IHNob3VsZCBiZSAhT2JqZWN0PHN0cmluZywgP0pTT05WYWx1ZURlZj5cbiAqL1xubGV0IEpTT05PYmplY3REZWY7XG5cblxuLyoqXG4gKiBKU09OIGFycmF5LiBJdCdzIGFuIGFycmF5IHdpdGggSlNPTiB2YWx1ZXMuXG4gKiBAdHlwZWRlZiB7Kn0gc2hvdWxkIGJlICFBcnJheTw/SlNPTlZhbHVlRGVmPlxuICovXG5sZXQgSlNPTkFycmF5RGVmO1xuXG5cbi8qKlxuICogSlNPTiB2YWx1ZS4gSXQncyBlaXRoZXIgYSBzY2FsYXIsIGFuIG9iamVjdCBvciBhbiBhcnJheS5cbiAqIEB0eXBlZGVmIHsqfSBzaG91bGQgYmUgIUpTT05TY2FsYXJEZWZ8IUpTT05PYmplY3REZWZ8IUpTT05BcnJheURlZlxuICovXG5sZXQgSlNPTlZhbHVlRGVmO1xuXG4vKipcbiAqIFJlY3JlYXRlcyBvYmplY3RzIHdpdGggcHJvdG90eXBlLWxlc3MgY29waWVzLlxuICogQHBhcmFtIHshSnNvbk9iamVjdH0gb2JqXG4gKiBAcmV0dXJuIHshSnNvbk9iamVjdH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlY3JlYXRlTm9uUHJvdG9PYmplY3Qob2JqKSB7XG4gIGNvbnN0IGNvcHkgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBmb3IgKGNvbnN0IGsgaW4gb2JqKSB7XG4gICAgaWYgKCFoYXNPd25Qcm9wZXJ0eShvYmosIGspKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgY29uc3QgdiA9IG9ialtrXTtcbiAgICBjb3B5W2tdID0gaXNPYmplY3QodikgPyByZWNyZWF0ZU5vblByb3RvT2JqZWN0KHYpIDogdjtcbiAgfVxuICByZXR1cm4gLyoqIEB0eXBlIHshSnNvbk9iamVjdH0gKi8gKGNvcHkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSB2YWx1ZSBmcm9tIGFuIG9iamVjdCBmb3IgYSBmaWVsZC1iYXNlZCBleHByZXNzaW9uLiBUaGUgZXhwcmVzc2lvblxuICogaXMgYSBzaW1wbGUgbmVzdGVkIGRvdC1ub3RhdGlvbiBvZiBmaWVsZHMsIHN1Y2ggYXMgYGZpZWxkMS5maWVsZDJgLiBJZiBhbnlcbiAqIGZpZWxkIGluIGEgY2hhaW4gZG9lcyBub3QgZXhpc3Qgb3IgaXMgbm90IGFuIG9iamVjdCBvciBhcnJheSwgdGhlIHJldHVybmVkXG4gKiB2YWx1ZSB3aWxsIGJlIGB1bmRlZmluZWRgLlxuICpcbiAqIEBwYXJhbSB7IUpzb25PYmplY3R9IG9ialxuICogQHBhcmFtIHtzdHJpbmd9IGV4cHJcbiAqIEByZXR1cm4geyp9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRWYWx1ZUZvckV4cHIob2JqLCBleHByKSB7XG4gIC8vIFRoZSBgLmAgaW5kaWNhdGVzIFwidGhlIG9iamVjdCBpdHNlbGZcIi5cbiAgaWYgKGV4cHIgPT0gJy4nKSB7XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuICAvLyBPdGhlcndpc2UsIG5hdmlnYXRlIHZpYSBwcm9wZXJ0aWVzLlxuICBjb25zdCBwYXJ0cyA9IGV4cHIuc3BsaXQoJy4nKTtcbiAgbGV0IHZhbHVlID0gb2JqO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgcGFydCA9IHBhcnRzW2ldO1xuICAgIGlmIChwYXJ0ICYmXG4gICAgICAgIHZhbHVlICYmXG4gICAgICAgIHZhbHVlW3BhcnRdICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgaGFzT3duUHJvcGVydHkodmFsdWUsIHBhcnQpXG4gICAgKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlW3BhcnRdO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIHZhbHVlID0gdW5kZWZpbmVkO1xuICAgIGJyZWFrO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuLyoqXG4gKiBTaW1wbGUgd3JhcHBlciBhcm91bmQgSlNPTi5wYXJzZSB0aGF0IGNhc3RzIHRoZSByZXR1cm4gdmFsdWVcbiAqIHRvIEpzb25PYmplY3QuXG4gKiBDcmVhdGUgYSBuZXcgd3JhcHBlciBpZiBhbiBhcnJheSByZXR1cm4gdmFsdWUgaXMgZGVzaXJlZC5cbiAqIEBwYXJhbSB7Kn0ganNvbiBKU09OIHN0cmluZyB0byBwYXJzZVxuICogQHJldHVybiB7P0pzb25PYmplY3R9IE1heSBiZSBleHRlbmQgdG8gcGFyc2UgYXJyYXlzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VKc29uKGpzb24pIHtcbiAgcmV0dXJuIC8qKiBAdHlwZSB7P0pzb25PYmplY3R9ICovKEpTT04ucGFyc2UoLyoqIEB0eXBlIHtzdHJpbmd9ICovIChqc29uKSkpO1xufVxuXG4vKipcbiAqIFBhcnNlcyB0aGUgZ2l2ZW4gYGpzb25gIHN0cmluZyB3aXRob3V0IHRocm93aW5nIGFuIGV4Y2VwdGlvbiBpZiBub3QgdmFsaWQuXG4gKiBSZXR1cm5zIGB1bmRlZmluZWRgIGlmIHBhcnNpbmcgZmFpbHMuXG4gKiBSZXR1cm5zIHRoZSBgT2JqZWN0YCBjb3JyZXNwb25kaW5nIHRvIHRoZSBKU09OIHN0cmluZyB3aGVuIHBhcnNpbmcgc3VjY2VlZHMuXG4gKiBAcGFyYW0geyp9IGpzb24gSlNPTiBzdHJpbmcgdG8gcGFyc2VcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oIUVycm9yKT19IG9wdF9vbkZhaWxlZCBPcHRpb25hbCBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkXG4gKiAgICAgd2l0aCB0aGUgZXJyb3IgaWYgcGFyc2luZyBmYWlscy5cbiAqIEByZXR1cm4gez9Kc29uT2JqZWN0fHVuZGVmaW5lZH0gTWF5IGJlIGV4dGVuZCB0byBwYXJzZSBhcnJheXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cnlQYXJzZUpzb24oanNvbiwgb3B0X29uRmFpbGVkKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHBhcnNlSnNvbihqc29uKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChvcHRfb25GYWlsZWQpIHtcbiAgICAgIG9wdF9vbkZhaWxlZChlKTtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuXG4vKipcbiAqIFJlY3Vyc2l2ZWx5IGNoZWNrcyBzdHJpY3QgZXF1YWxpdHkgb2YgaXRlbXMgaW4gbmVzdGVkIGFycmF5cyBhbmQgb2JqZWN0cy5cbiAqXG4gKiBAcGFyYW0ge0pTT05WYWx1ZURlZn0gYVxuICogQHBhcmFtIHtKU09OVmFsdWVEZWZ9IGJcbiAqIEBwYXJhbSB7bnVtYmVyfSBkZXB0aCBUaGUgbWF4aW11bSByZWN1cnNpb24gZGVwdGguIE11c3QgYmUgZmluaXRlLlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiBkZXB0aCBhcmd1bWVudCBpcyBub3QgZmluaXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVjdXJzaXZlRXF1YWxzKGEsIGIsIGRlcHRoID0gMykge1xuICBpZiAoIWlzRmluaXRlKGRlcHRoKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignZGVwdGggYXJnIG11c3QgYmUgZmluaXRlOiAnICsgZGVwdGgpO1xuICB9XG4gIGlmIChhID09PSBiKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgLy8gT25seSBjaGVjayBzaGFsbG93IGVxdWFsaXR5IGZvciBkZXB0aCA8IDEuXG4gIGlmIChkZXB0aCA8IDEpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKHR5cGVvZiBhICE9PSB0eXBlb2YgYikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheShhKSAmJiBBcnJheS5pc0FycmF5KGIpKSB7XG4gICAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICghcmVjdXJzaXZlRXF1YWxzKGFbaV0sIGJbaV0sIGRlcHRoIC0gMSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoYSAmJiBiICYmIHR5cGVvZiBhID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgYiA9PT0gJ29iamVjdCcpIHtcbiAgICBjb25zdCBrZXlzQSA9IE9iamVjdC5rZXlzKC8qKiBAdHlwZSB7IU9iamVjdH0gKi8gKGEpKTtcbiAgICBjb25zdCBrZXlzQiA9IE9iamVjdC5rZXlzKC8qKiBAdHlwZSB7IU9iamVjdH0gKi8gKGIpKTtcbiAgICBpZiAoa2V5c0EubGVuZ3RoICE9PSBrZXlzQi5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzQS5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qga2V5QSA9IGtleXNBW2ldO1xuICAgICAgY29uc3QgdmFsdWVBID0gYVtrZXlBXTtcbiAgICAgIGNvbnN0IHZhbHVlQiA9IGJba2V5QV07XG4gICAgICBpZiAoIXJlY3Vyc2l2ZUVxdWFscyh2YWx1ZUEsIHZhbHVlQiwgZGVwdGggLSAxKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7Kn0gb2JqXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBoYXNPd25Qcm9wZXJ0eShvYmosIGtleSkge1xuICBpZiAob2JqID09IG51bGwgfHwgdHlwZW9mIG9iaiAhPSAnb2JqZWN0Jykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKFxuICAgICAgLyoqIEB0eXBlIHshT2JqZWN0fSAqLyAob2JqKSwga2V5KTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge2dldE1vZGV9IGZyb20gJy4vbW9kZSc7XG5pbXBvcnQge2dldE1vZGVPYmplY3R9IGZyb20gJy4vbW9kZS1vYmplY3QnO1xuaW1wb3J0IHtpc0VudW1WYWx1ZX0gZnJvbSAnLi90eXBlcyc7XG5cbi8qKlxuICogVHJpcGxlIHplcm8gd2lkdGggc3BhY2UuXG4gKlxuICogVGhpcyBpcyBhZGRlZCB0byB1c2VyIGVycm9yIG1lc3NhZ2VzLCBzbyB0aGF0IHdlIGNhbiBsYXRlciBpZGVudGlmeVxuICogdGhlbSwgd2hlbiB0aGUgb25seSB0aGluZyB0aGF0IHdlIGhhdmUgaXMgdGhlIG1lc3NhZ2UuIFRoaXMgaXMgdGhlXG4gKiBjYXNlIGluIG1hbnkgYnJvd3NlcnMgd2hlbiB0aGUgZ2xvYmFsIGV4Y2VwdGlvbiBoYW5kbGVyIGlzIGludm9rZWQuXG4gKlxuICogQGNvbnN0IHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBVU0VSX0VSUk9SX1NFTlRJTkVMID0gJ1xcdTIwMEJcXHUyMDBCXFx1MjAwQic7XG5cblxuLyoqXG4gKiBGb3VyIHplcm8gd2lkdGggc3BhY2UuXG4gKlxuICogQGNvbnN0IHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBVU0VSX0VSUk9SX0VNQkVEX1NFTlRJTkVMID0gJ1xcdTIwMEJcXHUyMDBCXFx1MjAwQlxcdTIwMEInO1xuXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2VcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBtZXNzYWdlIHdhcyBhIHVzZXIgZXJyb3IuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1VzZXJFcnJvck1lc3NhZ2UobWVzc2FnZSkge1xuICByZXR1cm4gbWVzc2FnZS5pbmRleE9mKFVTRVJfRVJST1JfU0VOVElORUwpID49IDA7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2VcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBtZXNzYWdlIHdhcyBhIGEgdXNlciBlcnJvciBmcm9tIGFuIGlmcmFtZSBlbWJlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVXNlckVycm9yRW1iZWQobWVzc2FnZSkge1xuICByZXR1cm4gbWVzc2FnZS5pbmRleE9mKFVTRVJfRVJST1JfRU1CRURfU0VOVElORUwpID49IDA7XG59XG5cblxuLyoqXG4gKiBAZW51bSB7bnVtYmVyfVxuICogQHByaXZhdGUgVmlzaWJsZSBmb3IgdGVzdGluZyBvbmx5LlxuICovXG5leHBvcnQgY29uc3QgTG9nTGV2ZWwgPSB7XG4gIE9GRjogMCxcbiAgRVJST1I6IDEsXG4gIFdBUk46IDIsXG4gIElORk86IDMsXG4gIEZJTkU6IDQsXG59O1xuXG4vKipcbiAqIFNldHMgcmVwb3J0RXJyb3IgZnVuY3Rpb24uIENhbGxlZCBmcm9tIGVycm9yLmpzIHRvIGJyZWFrIGN5Y2xpY1xuICogZGVwZW5kZW5jeS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKiwgIUVsZW1lbnQ9KXx1bmRlZmluZWR9IGZuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRSZXBvcnRFcnJvcihmbikge1xuICBzZWxmLnJlcG9ydEVycm9yID0gZm47XG59XG5cbi8qKlxuICogQHR5cGUgeyFMb2dMZXZlbHx1bmRlZmluZWR9XG4gKiBAcHJpdmF0ZVxuICovXG5sZXQgbGV2ZWxPdmVycmlkZV8gPSB1bmRlZmluZWQ7XG5cbi8qKlxuICogQHBhcmFtIHshTG9nTGV2ZWx9IGxldmVsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvdmVycmlkZUxvZ0xldmVsKGxldmVsKSB7XG4gIGxldmVsT3ZlcnJpZGVfID0gbGV2ZWw7XG59XG5cbi8qKlxuICogTG9nZ2luZyBjbGFzcy4gVXNlIG9mIHNlbnRpbmVsIHN0cmluZyBpbnN0ZWFkIG9mIGEgYm9vbGVhbiB0byBjaGVjayB1c2VyL2RldlxuICogZXJyb3JzIGJlY2F1c2UgZXJyb3JzIGNvdWxkIGJlIHJldGhyb3duIGJ5IHNvbWUgbmF0aXZlIGNvZGUgYXMgYSBuZXcgZXJyb3IsXG4gKiBhbmQgb25seSBhIG1lc3NhZ2Ugd291bGQgc3Vydml2ZS4gQWxzbywgc29tZSBicm93c2VyIGRvbuKAmXQgc3VwcG9ydCBhIDV0aFxuICogZXJyb3Igb2JqZWN0IGFyZ3VtZW50IGluIHdpbmRvdy5vbmVycm9yLiBMaXN0IG9mIHN1cHBvcnRpbmcgYnJvd3NlciBjYW4gYmVcbiAqIGZvdW5kIGhlcmU6XG4gKiBodHRwczovL2Jsb2cuc2VudHJ5LmlvLzIwMTYvMDEvMDQvY2xpZW50LWphdmFzY3JpcHQtcmVwb3J0aW5nLXdpbmRvdy1vbmVycm9yLmh0bWxcbiAqIEBmaW5hbFxuICogQHByaXZhdGUgVmlzaWJsZSBmb3IgdGVzdGluZyBvbmx5LlxuICovXG5leHBvcnQgY2xhc3MgTG9nIHtcbiAgLyoqXG4gICAqIG9wdF9zdWZmaXggd2lsbCBiZSBhcHBlbmRlZCB0byBlcnJvciBtZXNzYWdlIHRvIGlkZW50aWZ5IHRoZSB0eXBlIG9mIHRoZVxuICAgKiBlcnJvciBtZXNzYWdlLiBXZSBjYW4ndCByZWx5IG9uIHRoZSBlcnJvciBvYmplY3QgdG8gcGFzcyBhbG9uZyB0aGUgdHlwZVxuICAgKiBiZWNhdXNlIHNvbWUgYnJvd3NlcnMgZG8gbm90IGhhdmUgdGhpcyBwYXJhbSBpbiBpdHMgd2luZG93Lm9uZXJyb3IgQVBJLlxuICAgKiBTZWU6XG4gICAqIGh0dHBzOi8vYmxvZy5zZW50cnkuaW8vMjAxNi8wMS8wNC9jbGllbnQtamF2YXNjcmlwdC1yZXBvcnRpbmctd2luZG93LW9uZXJyb3IuaHRtbFxuICAgKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCEuL21vZGUuTW9kZURlZik6IUxvZ0xldmVsfSBsZXZlbEZ1bmNcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfc3VmZml4XG4gICAqL1xuICBjb25zdHJ1Y3Rvcih3aW4sIGxldmVsRnVuYywgb3B0X3N1ZmZpeCkge1xuICAgIC8qKlxuICAgICAqIEluIHRlc3RzIHdlIHVzZSB0aGUgbWFpbiB0ZXN0IHdpbmRvdyBpbnN0ZWFkIG9mIHRoZSBpZnJhbWUgd2hlcmVcbiAgICAgKiB0aGUgdGVzdHMgcnVucyBiZWNhdXNlIG9ubHkgdGhlIGZvcm1lciBpcyByZWxheWVkIHRvIHRoZSBjb25zb2xlLlxuICAgICAqIEBjb25zdCB7IVdpbmRvd31cbiAgICAgKi9cbiAgICB0aGlzLndpbiA9IChnZXRNb2RlKCkudGVzdCAmJiB3aW4uQU1QX1RFU1RfSUZSQU1FKSA/IHdpbi5wYXJlbnQgOiB3aW47XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtmdW5jdGlvbighLi9tb2RlLk1vZGVEZWYpOiFMb2dMZXZlbH0gKi9cbiAgICB0aGlzLmxldmVsRnVuY18gPSBsZXZlbEZ1bmM7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshTG9nTGV2ZWx9ICovXG4gICAgdGhpcy5sZXZlbF8gPSB0aGlzLmRlZmF1bHRMZXZlbF8oKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnN1ZmZpeF8gPSBvcHRfc3VmZml4IHx8ICcnO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFMb2dMZXZlbH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldExldmVsXygpIHtcbiAgICByZXR1cm4gKGxldmVsT3ZlcnJpZGVfICE9PSB1bmRlZmluZWQpID8gbGV2ZWxPdmVycmlkZV8gOiB0aGlzLmxldmVsXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshTG9nTGV2ZWx9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBkZWZhdWx0TGV2ZWxfKCkge1xuICAgIC8vIE5vIGNvbnNvbGUgLSBjYW4ndCBlbmFibGUgbG9nZ2luZy5cbiAgICBpZiAoIXRoaXMud2luLmNvbnNvbGUgfHwgIXRoaXMud2luLmNvbnNvbGUubG9nKSB7XG4gICAgICByZXR1cm4gTG9nTGV2ZWwuT0ZGO1xuICAgIH1cblxuICAgIC8vIExvZ2dpbmcgaGFzIGJlZW4gZXhwbGljaXRseSBkaXNhYmxlZC5cbiAgICBpZiAoZ2V0TW9kZSgpLmxvZyA9PSAnMCcpIHtcbiAgICAgIHJldHVybiBMb2dMZXZlbC5PRkY7XG4gICAgfVxuXG4gICAgLy8gTG9nZ2luZyBpcyBlbmFibGVkIGZvciB0ZXN0cyBkaXJlY3RseS5cbiAgICBpZiAoZ2V0TW9kZSgpLnRlc3QgJiYgdGhpcy53aW4uRU5BQkxFX0xPRykge1xuICAgICAgcmV0dXJuIExvZ0xldmVsLkZJTkU7XG4gICAgfVxuXG4gICAgLy8gTG9jYWxEZXYgYnkgZGVmYXVsdCBhbGxvd3MgSU5GTyBsZXZlbCwgdW5sZXNzIG92ZXJyaWRlbiBieSBgI2xvZ2AuXG4gICAgaWYgKGdldE1vZGUoKS5sb2NhbERldiAmJiAhZ2V0TW9kZSgpLmxvZykge1xuICAgICAgcmV0dXJuIExvZ0xldmVsLklORk87XG4gICAgfVxuXG4gICAgLy8gRGVsZWdhdGUgdG8gdGhlIHNwZWNpZmljIHJlc29sdmVyLlxuICAgIHJldHVybiB0aGlzLmxldmVsRnVuY18oZ2V0TW9kZU9iamVjdCgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBsZXZlbFxuICAgKiBAcGFyYW0geyFBcnJheX0gbWVzc2FnZXNcbiAgICovXG4gIG1zZ18odGFnLCBsZXZlbCwgbWVzc2FnZXMpIHtcbiAgICBpZiAodGhpcy5nZXRMZXZlbF8oKSAhPSBMb2dMZXZlbC5PRkYpIHtcbiAgICAgIGxldCBmbiA9IHRoaXMud2luLmNvbnNvbGUubG9nO1xuICAgICAgaWYgKGxldmVsID09ICdFUlJPUicpIHtcbiAgICAgICAgZm4gPSB0aGlzLndpbi5jb25zb2xlLmVycm9yIHx8IGZuO1xuICAgICAgfSBlbHNlIGlmIChsZXZlbCA9PSAnSU5GTycpIHtcbiAgICAgICAgZm4gPSB0aGlzLndpbi5jb25zb2xlLmluZm8gfHwgZm47XG4gICAgICB9IGVsc2UgaWYgKGxldmVsID09ICdXQVJOJykge1xuICAgICAgICBmbiA9IHRoaXMud2luLmNvbnNvbGUud2FybiB8fCBmbjtcbiAgICAgIH1cbiAgICAgIGlmIChnZXRNb2RlKCkubG9jYWxEZXYpIHtcbiAgICAgICAgbWVzc2FnZXMudW5zaGlmdCgnWycgKyB0YWcgKyAnXScpO1xuICAgICAgfVxuICAgICAgZm4uYXBwbHkodGhpcy53aW4uY29uc29sZSwgbWVzc2FnZXMpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBsb2dnaW5nIGlzIGVuYWJsZWQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBpc0VuYWJsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0TGV2ZWxfKCkgIT0gTG9nTGV2ZWwuT0ZGO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlcG9ydHMgYSBmaW5lLWdyYWluZWQgbWVzc2FnZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRhZ1xuICAgKiBAcGFyYW0gey4uLip9IHZhcl9hcmdzXG4gICAqL1xuICBmaW5lKHRhZywgdmFyX2FyZ3MpIHtcbiAgICBpZiAodGhpcy5nZXRMZXZlbF8oKSA+PSBMb2dMZXZlbC5GSU5FKSB7XG4gICAgICB0aGlzLm1zZ18odGFnLCAnRklORScsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXBvcnRzIGEgaW5mb3JtYXRpb25hbCBtZXNzYWdlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnXG4gICAqIEBwYXJhbSB7Li4uKn0gdmFyX2FyZ3NcbiAgICovXG4gIGluZm8odGFnLCB2YXJfYXJncykge1xuICAgIGlmICh0aGlzLmdldExldmVsXygpID49IExvZ0xldmVsLklORk8pIHtcbiAgICAgIHRoaXMubXNnXyh0YWcsICdJTkZPJywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlcG9ydHMgYSB3YXJuaW5nIG1lc3NhZ2UuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0YWdcbiAgICogQHBhcmFtIHsuLi4qfSB2YXJfYXJnc1xuICAgKi9cbiAgd2Fybih0YWcsIHZhcl9hcmdzKSB7XG4gICAgaWYgKHRoaXMuZ2V0TGV2ZWxfKCkgPj0gTG9nTGV2ZWwuV0FSTikge1xuICAgICAgdGhpcy5tc2dfKHRhZywgJ1dBUk4nLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVwb3J0cyBhbiBlcnJvciBtZXNzYWdlLiBJZiB0aGUgbG9nZ2luZyBpcyBkaXNhYmxlZCwgdGhlIGVycm9yIGlzIHJldGhyb3duXG4gICAqIGFzeW5jaHJvbm91c2x5LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnXG4gICAqIEBwYXJhbSB7Li4uKn0gdmFyX2FyZ3NcbiAgICogQHJldHVybiB7IUVycm9yfHVuZGVmaW5lZH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGVycm9yXyh0YWcsIHZhcl9hcmdzKSB7XG4gICAgaWYgKHRoaXMuZ2V0TGV2ZWxfKCkgPj0gTG9nTGV2ZWwuRVJST1IpIHtcbiAgICAgIHRoaXMubXNnXyh0YWcsICdFUlJPUicsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBlcnJvciA9IGNyZWF0ZUVycm9yVmFyZ3MuYXBwbHkobnVsbCxcbiAgICAgICAgICBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgICAgIHRoaXMucHJlcGFyZUVycm9yXyhlcnJvcik7XG4gICAgICByZXR1cm4gZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlcG9ydHMgYW4gZXJyb3IgbWVzc2FnZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRhZ1xuICAgKiBAcGFyYW0gey4uLip9IHZhcl9hcmdzXG4gICAqL1xuICBlcnJvcih0YWcsIHZhcl9hcmdzKSB7XG4gICAgY29uc3QgZXJyb3IgPSB0aGlzLmVycm9yXy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmIChlcnJvcikge1xuICAgICAgZXJyb3IubmFtZSA9IHRhZyB8fCBlcnJvci5uYW1lO1xuICAgICAgLy8gcmVwb3J0RXJyb3IgaXMgaW5zdGFsbGVkIGdsb2JhbGx5IHBlciB3aW5kb3cgaW4gdGhlIGVudHJ5IHBvaW50LlxuICAgICAgc2VsZi5yZXBvcnRFcnJvcihlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlcG9ydHMgYW4gZXJyb3IgbWVzc2FnZSBhbmQgbWFya3Mgd2l0aCBhbiBleHBlY3RlZCBwcm9wZXJ0eS4gSWYgdGhlXG4gICAqIGxvZ2dpbmcgaXMgZGlzYWJsZWQsIHRoZSBlcnJvciBpcyByZXRocm93biBhc3luY2hyb25vdXNseS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHVudXNlZFRhZ1xuICAgKiBAcGFyYW0gey4uLip9IHZhcl9hcmdzXG4gICAqL1xuICBleHBlY3RlZEVycm9yKHVudXNlZFRhZywgdmFyX2FyZ3MpIHtcbiAgICBjb25zdCBlcnJvciA9IHRoaXMuZXJyb3JfLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBlcnJvci5leHBlY3RlZCA9IHRydWU7XG4gICAgICAvLyByZXBvcnRFcnJvciBpcyBpbnN0YWxsZWQgZ2xvYmFsbHkgcGVyIHdpbmRvdyBpbiB0aGUgZW50cnkgcG9pbnQuXG4gICAgICBzZWxmLnJlcG9ydEVycm9yKGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBlcnJvciBvYmplY3QuXG4gICAqIEBwYXJhbSB7Li4uKn0gdmFyX2FyZ3NcbiAgICogQHJldHVybiB7IUVycm9yfVxuICAgKi9cbiAgY3JlYXRlRXJyb3IodmFyX2FyZ3MpIHtcbiAgICBjb25zdCBlcnJvciA9IGNyZWF0ZUVycm9yVmFyZ3MuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICB0aGlzLnByZXBhcmVFcnJvcl8oZXJyb3IpO1xuICAgIHJldHVybiBlcnJvcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGVycm9yIG9iamVjdCB3aXRoIGl0cyBleHBlY3RlZCBwcm9wZXJ0eSBzZXQgdG8gdHJ1ZS5cbiAgICogQHBhcmFtIHsuLi4qfSB2YXJfYXJnc1xuICAgKiBAcmV0dXJuIHshRXJyb3J9XG4gICAqL1xuICBjcmVhdGVFeHBlY3RlZEVycm9yKHZhcl9hcmdzKSB7XG4gICAgY29uc3QgZXJyb3IgPSBjcmVhdGVFcnJvclZhcmdzLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgdGhpcy5wcmVwYXJlRXJyb3JfKGVycm9yKTtcbiAgICBlcnJvci5leHBlY3RlZCA9IHRydWU7XG4gICAgcmV0dXJuIGVycm9yO1xuICB9XG5cbiAgLyoqXG4gICAqIFRocm93cyBhbiBlcnJvciBpZiB0aGUgZmlyc3QgYXJndW1lbnQgaXNuJ3QgdHJ1ZWlzaC5cbiAgICpcbiAgICogU3VwcG9ydHMgYXJndW1lbnQgc3Vic3RpdHV0aW9uIGludG8gdGhlIG1lc3NhZ2UgdmlhICVzIHBsYWNlaG9sZGVycy5cbiAgICpcbiAgICogVGhyb3dzIGFuIGVycm9yIG9iamVjdCB0aGF0IGhhcyB0d28gZXh0cmEgcHJvcGVydGllczpcbiAgICogLSBhc3NvY2lhdGVkRWxlbWVudDogVGhpcyBpcyB0aGUgZmlyc3QgZWxlbWVudCBwcm92aWRlZCBpbiB0aGUgdmFyIGFyZ3MuXG4gICAqICAgSXQgY2FuIGJlIHVzZWQgZm9yIGltcHJvdmVkIGRpc3BsYXkgb2YgZXJyb3IgbWVzc2FnZXMuXG4gICAqIC0gbWVzc2FnZUFycmF5OiBUaGUgZWxlbWVudHMgb2YgdGhlIHN1YnN0aXR1dGVkIG1lc3NhZ2UgYXMgbm9uLXN0cmluZ2lmaWVkXG4gICAqICAgZWxlbWVudHMgaW4gYW4gYXJyYXkuIFdoZW4gZS5nLiBwYXNzZWQgdG8gY29uc29sZS5lcnJvciB0aGlzIHlpZWxkc1xuICAgKiAgIG5hdGl2ZSBkaXNwbGF5cyBvZiB0aGluZ3MgbGlrZSBIVE1MIGVsZW1lbnRzLlxuICAgKlxuICAgKiBAcGFyYW0ge1R9IHNob3VsZEJlVHJ1ZWlzaCBUaGUgdmFsdWUgdG8gYXNzZXJ0LiBUaGUgYXNzZXJ0IGZhaWxzIGlmIGl0IGRvZXNcbiAgICogICAgIG5vdCBldmFsdWF0ZSB0byB0cnVlLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG9wdF9tZXNzYWdlIFRoZSBhc3NlcnRpb24gbWVzc2FnZVxuICAgKiBAcGFyYW0gey4uLip9IHZhcl9hcmdzIEFyZ3VtZW50cyBzdWJzdGl0dXRlZCBpbnRvICVzIGluIHRoZSBtZXNzYWdlLlxuICAgKiBAcmV0dXJuIHtUfSBUaGUgdmFsdWUgb2Ygc2hvdWxkQmVUcnVlaXNoLlxuICAgKiBAdGVtcGxhdGUgVFxuICAgKiBlc2xpbnQgXCJnb29nbGUtY2FtZWxjYXNlL2dvb2dsZS1jYW1lbGNhc2VcIjogMFxuICAgKi9cbiAgYXNzZXJ0KHNob3VsZEJlVHJ1ZWlzaCwgb3B0X21lc3NhZ2UsIHZhcl9hcmdzKSB7XG4gICAgbGV0IGZpcnN0RWxlbWVudDtcbiAgICBpZiAoIXNob3VsZEJlVHJ1ZWlzaCkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IG9wdF9tZXNzYWdlIHx8ICdBc3NlcnRpb24gZmFpbGVkJztcbiAgICAgIGNvbnN0IHNwbGl0TWVzc2FnZSA9IG1lc3NhZ2Uuc3BsaXQoJyVzJyk7XG4gICAgICBjb25zdCBmaXJzdCA9IHNwbGl0TWVzc2FnZS5zaGlmdCgpO1xuICAgICAgbGV0IGZvcm1hdHRlZCA9IGZpcnN0O1xuICAgICAgY29uc3QgbWVzc2FnZUFycmF5ID0gW107XG4gICAgICBwdXNoSWZOb25FbXB0eShtZXNzYWdlQXJyYXksIGZpcnN0KTtcbiAgICAgIGZvciAobGV0IGkgPSAyOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHZhbCA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgaWYgKHZhbCAmJiB2YWwudGFnTmFtZSkge1xuICAgICAgICAgIGZpcnN0RWxlbWVudCA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXh0Q29uc3RhbnQgPSBzcGxpdE1lc3NhZ2Uuc2hpZnQoKTtcbiAgICAgICAgbWVzc2FnZUFycmF5LnB1c2godmFsKTtcbiAgICAgICAgcHVzaElmTm9uRW1wdHkobWVzc2FnZUFycmF5LCBuZXh0Q29uc3RhbnQudHJpbSgpKTtcbiAgICAgICAgZm9ybWF0dGVkICs9IHRvU3RyaW5nKHZhbCkgKyBuZXh0Q29uc3RhbnQ7XG4gICAgICB9XG4gICAgICBjb25zdCBlID0gbmV3IEVycm9yKGZvcm1hdHRlZCk7XG4gICAgICBlLmZyb21Bc3NlcnQgPSB0cnVlO1xuICAgICAgZS5hc3NvY2lhdGVkRWxlbWVudCA9IGZpcnN0RWxlbWVudDtcbiAgICAgIGUubWVzc2FnZUFycmF5ID0gbWVzc2FnZUFycmF5O1xuICAgICAgdGhpcy5wcmVwYXJlRXJyb3JfKGUpO1xuICAgICAgLy8gcmVwb3J0RXJyb3IgaXMgaW5zdGFsbGVkIGdsb2JhbGx5IHBlciB3aW5kb3cgaW4gdGhlIGVudHJ5IHBvaW50LlxuICAgICAgc2VsZi5yZXBvcnRFcnJvcihlKTtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuICAgIHJldHVybiBzaG91bGRCZVRydWVpc2g7XG4gIH1cblxuICAvKipcbiAgICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBmaXJzdCBhcmd1bWVudCBpc24ndCBhbiBFbGVtZW50XG4gICAqXG4gICAqIE90aGVyd2lzZSBzZWUgYGFzc2VydGAgZm9yIHVzYWdlXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gc2hvdWxkQmVFbGVtZW50XG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X21lc3NhZ2UgVGhlIGFzc2VydGlvbiBtZXNzYWdlXG4gICAqIEByZXR1cm4geyFFbGVtZW50fSBUaGUgdmFsdWUgb2Ygc2hvdWxkQmVUcnVlaXNoLlxuICAgKiBAdGVtcGxhdGUgVFxuICAgKiBlc2xpbnQgXCJnb29nbGUtY2FtZWxjYXNlL2dvb2dsZS1jYW1lbGNhc2VcIjogMlxuICAgKi9cbiAgYXNzZXJ0RWxlbWVudChzaG91bGRCZUVsZW1lbnQsIG9wdF9tZXNzYWdlKSB7XG4gICAgY29uc3Qgc2hvdWxkQmVUcnVlaXNoID0gc2hvdWxkQmVFbGVtZW50ICYmIHNob3VsZEJlRWxlbWVudC5ub2RlVHlwZSA9PSAxO1xuICAgIHRoaXMuYXNzZXJ0KHNob3VsZEJlVHJ1ZWlzaCwgKG9wdF9tZXNzYWdlIHx8ICdFbGVtZW50IGV4cGVjdGVkJykgKyAnOiAlcycsXG4gICAgICAgIHNob3VsZEJlRWxlbWVudCk7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IUVsZW1lbnR9ICovIChzaG91bGRCZUVsZW1lbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRocm93cyBhbiBlcnJvciBpZiB0aGUgZmlyc3QgYXJndW1lbnQgaXNuJ3QgYSBzdHJpbmcuIFRoZSBzdHJpbmcgY2FuXG4gICAqIGJlIGVtcHR5LlxuICAgKlxuICAgKiBGb3IgbW9yZSBkZXRhaWxzIHNlZSBgYXNzZXJ0YC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBzaG91bGRCZVN0cmluZ1xuICAgKiBAcGFyYW0ge3N0cmluZz19IG9wdF9tZXNzYWdlIFRoZSBhc3NlcnRpb24gbWVzc2FnZVxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBzdHJpbmcgdmFsdWUuIENhbiBiZSBhbiBlbXB0eSBzdHJpbmcuXG4gICAqIGVzbGludCBcImdvb2dsZS1jYW1lbGNhc2UvZ29vZ2xlLWNhbWVsY2FzZVwiOiAyXG4gICAqL1xuICBhc3NlcnRTdHJpbmcoc2hvdWxkQmVTdHJpbmcsIG9wdF9tZXNzYWdlKSB7XG4gICAgdGhpcy5hc3NlcnQodHlwZW9mIHNob3VsZEJlU3RyaW5nID09ICdzdHJpbmcnLFxuICAgICAgICAob3B0X21lc3NhZ2UgfHwgJ1N0cmluZyBleHBlY3RlZCcpICsgJzogJXMnLCBzaG91bGRCZVN0cmluZyk7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAoc2hvdWxkQmVTdHJpbmcpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRocm93cyBhbiBlcnJvciBpZiB0aGUgZmlyc3QgYXJndW1lbnQgaXNuJ3QgYSBudW1iZXIuIFRoZSBhbGxvd2VkIHZhbHVlc1xuICAgKiBpbmNsdWRlIGAwYCBhbmQgYE5hTmAuXG4gICAqXG4gICAqIEZvciBtb3JlIGRldGFpbHMgc2VlIGBhc3NlcnRgLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHNob3VsZEJlTnVtYmVyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X21lc3NhZ2UgVGhlIGFzc2VydGlvbiBtZXNzYWdlXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG51bWJlciB2YWx1ZS4gVGhlIGFsbG93ZWQgdmFsdWVzIGluY2x1ZGUgYDBgXG4gICAqICAgYW5kIGBOYU5gLlxuICAgKi9cbiAgYXNzZXJ0TnVtYmVyKHNob3VsZEJlTnVtYmVyLCBvcHRfbWVzc2FnZSkge1xuICAgIHRoaXMuYXNzZXJ0KHR5cGVvZiBzaG91bGRCZU51bWJlciA9PSAnbnVtYmVyJyxcbiAgICAgICAgKG9wdF9tZXNzYWdlIHx8ICdOdW1iZXIgZXhwZWN0ZWQnKSArICc6ICVzJywgc2hvdWxkQmVOdW1iZXIpO1xuICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHNob3VsZEJlTnVtYmVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIGZpcnN0IGFyZ3VtZW50IGlzbid0IGEgYm9vbGVhbi5cbiAgICpcbiAgICogRm9yIG1vcmUgZGV0YWlscyBzZWUgYGFzc2VydGAuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gc2hvdWxkQmVCb29sZWFuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X21lc3NhZ2UgVGhlIGFzc2VydGlvbiBtZXNzYWdlXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBib29sZWFuIHZhbHVlLlxuICAgKi9cbiAgYXNzZXJ0Qm9vbGVhbihzaG91bGRCZUJvb2xlYW4sIG9wdF9tZXNzYWdlKSB7XG4gICAgdGhpcy5hc3NlcnQoISFzaG91bGRCZUJvb2xlYW4gPT09IHNob3VsZEJlQm9vbGVhbixcbiAgICAgICAgKG9wdF9tZXNzYWdlIHx8ICdCb29sZWFuIGV4cGVjdGVkJykgKyAnOiAlcycsIHNob3VsZEJlQm9vbGVhbik7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi8gKHNob3VsZEJlQm9vbGVhbik7XG4gIH1cblxuICAvKipcbiAgICogQXNzZXJ0cyBhbmQgcmV0dXJucyB0aGUgZW51bSB2YWx1ZS4gSWYgdGhlIGVudW0gZG9lc24ndCBjb250YWluIHN1Y2ggYVxuICAgKiB2YWx1ZSwgdGhlIGVycm9yIGlzIHRocm93bi5cbiAgICpcbiAgICogQHBhcmFtIHshT2JqZWN0PFQ+fSBlbnVtT2JqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X2VudW1OYW1lXG4gICAqIEByZXR1cm4ge1R9XG4gICAqIEB0ZW1wbGF0ZSBUXG4gICAqIGVzbGludCBcImdvb2dsZS1jYW1lbGNhc2UvZ29vZ2xlLWNhbWVsY2FzZVwiOiAyXG4gICAqL1xuICBhc3NlcnRFbnVtVmFsdWUoZW51bU9iaiwgcywgb3B0X2VudW1OYW1lKSB7XG4gICAgaWYgKGlzRW51bVZhbHVlKGVudW1PYmosIHMpKSB7XG4gICAgICByZXR1cm4gcztcbiAgICB9XG4gICAgdGhpcy5hc3NlcnQoZmFsc2UsXG4gICAgICAgICdVbmtub3duICVzIHZhbHVlOiBcIiVzXCInLFxuICAgICAgICBvcHRfZW51bU5hbWUgfHwgJ2VudW0nLCBzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFcnJvcn0gZXJyb3JcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByZXBhcmVFcnJvcl8oZXJyb3IpIHtcbiAgICBlcnJvciA9IGR1cGxpY2F0ZUVycm9ySWZOZWNlc3NhcnkoZXJyb3IpO1xuICAgIGlmICh0aGlzLnN1ZmZpeF8pIHtcbiAgICAgIGlmICghZXJyb3IubWVzc2FnZSkge1xuICAgICAgICBlcnJvci5tZXNzYWdlID0gdGhpcy5zdWZmaXhfO1xuICAgICAgfSBlbHNlIGlmIChlcnJvci5tZXNzYWdlLmluZGV4T2YodGhpcy5zdWZmaXhfKSA9PSAtMSkge1xuICAgICAgICBlcnJvci5tZXNzYWdlICs9IHRoaXMuc3VmZml4XztcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzVXNlckVycm9yTWVzc2FnZShlcnJvci5tZXNzYWdlKSkge1xuICAgICAgZXJyb3IubWVzc2FnZSA9IGVycm9yLm1lc3NhZ2UucmVwbGFjZShVU0VSX0VSUk9SX1NFTlRJTkVMLCAnJyk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd8IUVsZW1lbnR9IHZhbFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiB0b1N0cmluZyh2YWwpIHtcbiAgLy8gRG8gY2hlY2sgZXF1aXZhbGVudCB0byBgdmFsIGluc3RhbmNlb2YgRWxlbWVudGAgd2l0aG91dCBjcm9zcy13aW5kb3cgYnVnXG4gIGlmICh2YWwgJiYgdmFsLm5vZGVUeXBlID09IDEpIHtcbiAgICByZXR1cm4gdmFsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSArICh2YWwuaWQgPyAnIycgKyB2YWwuaWQgOiAnJyk7XG4gIH1cbiAgcmV0dXJuIC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAodmFsKTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IUFycmF5fSBhcnJheVxuICogQHBhcmFtIHsqfSB2YWxcbiAqL1xuZnVuY3Rpb24gcHVzaElmTm9uRW1wdHkoYXJyYXksIHZhbCkge1xuICBpZiAodmFsICE9ICcnKSB7XG4gICAgYXJyYXkucHVzaCh2YWwpO1xuICB9XG59XG5cbi8qKlxuICogU29tZSBleGNlcHRpb25zIChET01FeGNlcHRpb24sIG5hbWVseSkgaGF2ZSByZWFkLW9ubHkgbWVzc2FnZS5cbiAqIEBwYXJhbSB7IUVycm9yfSBlcnJvclxuICogQHJldHVybiB7IUVycm9yfTtcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGR1cGxpY2F0ZUVycm9ySWZOZWNlc3NhcnkoZXJyb3IpIHtcbiAgY29uc3Qge21lc3NhZ2V9ID0gZXJyb3I7XG4gIGNvbnN0IHRlc3QgPSBTdHJpbmcoTWF0aC5yYW5kb20oKSk7XG4gIGVycm9yLm1lc3NhZ2UgPSB0ZXN0O1xuXG4gIGlmIChlcnJvci5tZXNzYWdlID09PSB0ZXN0KSB7XG4gICAgZXJyb3IubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgcmV0dXJuIGVycm9yO1xuICB9XG5cbiAgY29uc3QgZSA9IG5ldyBFcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgLy8gQ29weSBhbGwgdGhlIGV4dHJhbmVvdXMgdGhpbmdzIHdlIGF0dGFjaC5cbiAgZm9yIChjb25zdCBwcm9wIGluIGVycm9yKSB7XG4gICAgZVtwcm9wXSA9IGVycm9yW3Byb3BdO1xuICB9XG4gIC8vIEVuc3VyZSB0aGVzZSBhcmUgY29waWVkLlxuICBlLnN0YWNrID0gZXJyb3Iuc3RhY2s7XG4gIHJldHVybiBlO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7Li4uKn0gdmFyX2FyZ3NcbiAqIEByZXR1cm4geyFFcnJvcn1cbiAqIEB2aXNpYmxlRm9yVGVzdGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRXJyb3JWYXJncyh2YXJfYXJncykge1xuICBsZXQgZXJyb3IgPSBudWxsO1xuICBsZXQgbWVzc2FnZSA9ICcnO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGFyZyA9IGFyZ3VtZW50c1tpXTtcbiAgICBpZiAoYXJnIGluc3RhbmNlb2YgRXJyb3IgJiYgIWVycm9yKSB7XG4gICAgICBlcnJvciA9IGR1cGxpY2F0ZUVycm9ySWZOZWNlc3NhcnkoYXJnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKG1lc3NhZ2UpIHtcbiAgICAgICAgbWVzc2FnZSArPSAnICc7XG4gICAgICB9XG4gICAgICBtZXNzYWdlICs9IGFyZztcbiAgICB9XG4gIH1cblxuICBpZiAoIWVycm9yKSB7XG4gICAgZXJyb3IgPSBuZXcgRXJyb3IobWVzc2FnZSk7XG4gIH0gZWxzZSBpZiAobWVzc2FnZSkge1xuICAgIGVycm9yLm1lc3NhZ2UgPSBtZXNzYWdlICsgJzogJyArIGVycm9yLm1lc3NhZ2U7XG4gIH1cbiAgcmV0dXJuIGVycm9yO1xufVxuXG5cbi8qKlxuICogUmV0aHJvd3MgdGhlIGVycm9yIHdpdGhvdXQgdGVybWluYXRpbmcgdGhlIGN1cnJlbnQgY29udGV4dC4gVGhpcyBwcmVzZXJ2ZXNcbiAqIHdoZXRoZXIgdGhlIG9yaWdpbmFsIGVycm9yIGRlc2lnbmF0aW9uIGlzIGEgdXNlciBlcnJvciBvciBhIGRldiBlcnJvci5cbiAqIEBwYXJhbSB7Li4uKn0gdmFyX2FyZ3NcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJldGhyb3dBc3luYyh2YXJfYXJncykge1xuICBjb25zdCBlcnJvciA9IGNyZWF0ZUVycm9yVmFyZ3MuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgLy8gcmVwb3J0RXJyb3IgaXMgaW5zdGFsbGVkIGdsb2JhbGx5IHBlciB3aW5kb3cgaW4gdGhlIGVudHJ5IHBvaW50LlxuICAgIHNlbGYucmVwb3J0RXJyb3IoZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9KTtcbn1cblxuXG4vKipcbiAqIENhY2hlIGZvciBsb2dzLiBXZSBkbyBub3QgdXNlIGEgU2VydmljZSBzaW5jZSB0aGUgc2VydmljZSBtb2R1bGUgZGVwZW5kc1xuICogb24gTG9nIGFuZCBjbG9zdXJlIGxpdGVyYWxseSBjYW4ndCBldmVuLlxuICogQHR5cGUge3t1c2VyOiA/TG9nLCBkZXY6ID9Mb2csIHVzZXJGb3JFbWJlZDogP0xvZ319XG4gKi9cbnNlbGYubG9nID0gKHNlbGYubG9nIHx8IHtcbiAgdXNlcjogbnVsbCxcbiAgZGV2OiBudWxsLFxuICB1c2VyRm9yRW1iZWQ6IG51bGwsXG59KTtcblxuY29uc3QgbG9ncyA9IHNlbGYubG9nO1xuXG4vKipcbiAqIEV2ZW50dWFsbHkgaG9sZHMgYSBjb25zdHJ1Y3RvciBmb3IgTG9nIG9iamVjdHMuIExhemlseSBpbml0aWFsaXplZCwgc28gd2VcbiAqIGNhbiBhdm9pZCBldmVyIHJlZmVyZW5jaW5nIHRoZSByZWFsIGNvbnN0cnVjdG9yIGV4Y2VwdCBpbiBKUyBiaW5hcmllc1xuICogdGhhdCBhY3R1YWxseSB3YW50IHRvIGluY2x1ZGUgdGhlIGltcGxlbWVudGF0aW9uLlxuICogQHR5cGUgez9GdW5jdGlvbn1cbiAqL1xubGV0IGxvZ0NvbnN0cnVjdG9yID0gbnVsbDtcblxuLyoqXG4gKiBJbml0aWFsaXplcyBsb2cgY29udHJ1Y3Rvci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluaXRMb2dDb25zdHJ1Y3RvcigpIHtcbiAgbG9nQ29uc3RydWN0b3IgPSBMb2c7XG4gIC8vIEluaXRpYWxpemUgaW5zdGFuY2VzIGZvciB1c2UuIElmIGEgYmluYXJ5IChhbiBleHRlbnNpb24gZm9yIGV4YW1wbGUpIHRoYXRcbiAgLy8gZG9lcyBub3QgY2FsbCBgaW5pdExvZ0NvbnN0cnVjdG9yYCBpbnZva2VzIGBkZXYoKWAgb3IgYHVzZXIoKWAgZWFybGllciB0aGFuXG4gIC8vIHRoZSBiaW5hcnkgdGhhdCBkb2VzIGNhbGwgYGluaXRMb2dDb25zdHJ1Y3RvcmAgKGFtcC5qcyksIHRoZSBleHRlbnNpb24gd2lsbFxuICAvLyB0aHJvdyBhbiBlcnJvciBhcyB0aGF0IGV4dGVuc2lvbiB3aWxsIG5ldmVyIGJlIGFibGUgdG8gaW5pdGlhbGl6ZSB0aGUgbG9nXG4gIC8vIGluc3RhbmNlcyBhbmQgd2UgYWxzbyBkb24ndCB3YW50IGl0IHRvIGNhbGwgYGluaXRMb2dDb25zdHJ1Y3RvcmAgZWl0aGVyXG4gIC8vIChzaW5jZSB0aGF0IHdpbGwgY2F1c2UgdGhlIExvZyBpbXBsZW1lbnRhdGlvbiB0byBiZSBidW5kbGVkIGludG8gdGhhdFxuICAvLyBiaW5hcnkpLiBTbyB3ZSBtdXN0IGluaXRpYWxpemUgdGhlIGluc3RhbmNlcyBlYWdlcmx5IHNvIHRoYXQgdGhleSBhcmUgcmVhZHlcbiAgLy8gZm9yIHVzZSAoc3RvcmVkIGdsb2JhbGx5KSBhZnRlciB0aGUgbWFpbiBiaW5hcnkgY2FsbHMgYGluaXRMb2dDb25zdHJ1Y3RvcmAuXG4gIGRldigpO1xuICB1c2VyKCk7XG59XG5cbi8qKlxuICogUmVzZXRzIGxvZyBjb250cnVjdG9yIGZvciB0ZXN0aW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRMb2dDb25zdHJ1Y3RvckZvclRlc3RpbmcoKSB7XG4gIGxvZ0NvbnN0cnVjdG9yID0gbnVsbDtcbn1cblxuLyoqXG4gKiBQdWJsaXNoZXIgbGV2ZWwgbG9nLlxuICpcbiAqIEVuYWJsZWQgaW4gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuICogIDEuIE5vdCBkaXNhYmxlZCB1c2luZyBgI2xvZz0wYC5cbiAqICAyLiBEZXZlbG9wbWVudCBtb2RlIGlzIGVuYWJsZWQgdmlhIGAjZGV2ZWxvcG1lbnQ9MWAgb3IgbG9nZ2luZyBpcyBleHBsaWNpdGx5XG4gKiAgICAgZW5hYmxlZCB2aWEgYCNsb2c9RGAgd2hlcmUgRCA+PSAxLlxuICogIDMuIEFNUC5zZXRMb2dMZXZlbChEKSBpcyBjYWxsZWQsIHdoZXJlIEQgPj0gMS5cbiAqXG4gKiBAcGFyYW0geyFFbGVtZW50PX0gb3B0X2VsZW1lbnRcbiAqIEByZXR1cm4geyFMb2d9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VyKG9wdF9lbGVtZW50KSB7XG4gIGlmICghbG9ncy51c2VyKSB7XG4gICAgbG9ncy51c2VyID0gZ2V0VXNlckxvZ2dlcihVU0VSX0VSUk9SX1NFTlRJTkVMKTtcbiAgfVxuICBpZiAoIWlzRnJvbUVtYmVkKGxvZ3MudXNlci53aW4sIG9wdF9lbGVtZW50KSkge1xuICAgIHJldHVybiBsb2dzLnVzZXI7XG4gIH0gZWxzZSB7XG4gICAgaWYgKGxvZ3MudXNlckZvckVtYmVkKSB7XG4gICAgICByZXR1cm4gbG9ncy51c2VyRm9yRW1iZWQ7XG4gICAgfVxuICAgIHJldHVybiBsb2dzLnVzZXJGb3JFbWJlZCA9IGdldFVzZXJMb2dnZXIoVVNFUl9FUlJPUl9FTUJFRF9TRU5USU5FTCk7XG4gIH1cbn1cblxuLyoqXG4gKiBHZXR0ZXIgZm9yIHVzZXIgbG9nZ2VyXG4gKiBAcGFyYW0ge3N0cmluZz19IHN1ZmZpeFxuICogQHJldHVybiB7IUxvZ31cbiAqL1xuZnVuY3Rpb24gZ2V0VXNlckxvZ2dlcihzdWZmaXgpIHtcbiAgaWYgKCFsb2dDb25zdHJ1Y3Rvcikge1xuICAgIHRocm93IG5ldyBFcnJvcignZmFpbGVkIHRvIGNhbGwgaW5pdExvZ0NvbnN0cnVjdG9yJyk7XG4gIH1cbiAgcmV0dXJuIG5ldyBsb2dDb25zdHJ1Y3RvcihzZWxmLCBtb2RlID0+IHtcbiAgICBjb25zdCBsb2dOdW0gPSBwYXJzZUludChtb2RlLmxvZywgMTApO1xuICAgIGlmIChtb2RlLmRldmVsb3BtZW50IHx8IGxvZ051bSA+PSAxKSB7XG4gICAgICByZXR1cm4gTG9nTGV2ZWwuRklORTtcbiAgICB9XG4gICAgcmV0dXJuIExvZ0xldmVsLldBUk47XG4gIH0sIHN1ZmZpeCk7XG59XG5cbi8qKlxuICogQU1QIGRldmVsb3BtZW50IGxvZy4gQ2FsbHMgdG8gYGRldkxvZygpLmFzc2VydGAgYW5kIGBkZXYuZmluZWAgYXJlIHN0cmlwcGVkXG4gKiBpbiB0aGUgUFJPRCBiaW5hcnkuIEhvd2V2ZXIsIGBkZXZMb2coKS5hc3NlcnRgIHJlc3VsdCBpcyBwcmVzZXJ2ZWQgaW4gZWl0aGVyXG4gKiBjYXNlLlxuICpcbiAqIEVuYWJsZWQgaW4gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuICogIDEuIE5vdCBkaXNhYmxlZCB1c2luZyBgI2xvZz0wYC5cbiAqICAyLiBMb2dnaW5nIGlzIGV4cGxpY2l0bHkgZW5hYmxlZCB2aWEgYCNsb2c9RGAsIHdoZXJlIEQgPj0gMi5cbiAqICAzLiBBTVAuc2V0TG9nTGV2ZWwoRCkgaXMgY2FsbGVkLCB3aGVyZSBEID49IDIuXG4gKlxuICogQHJldHVybiB7IUxvZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRldigpIHtcbiAgaWYgKGxvZ3MuZGV2KSB7XG4gICAgcmV0dXJuIGxvZ3MuZGV2O1xuICB9XG4gIGlmICghbG9nQ29uc3RydWN0b3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2ZhaWxlZCB0byBjYWxsIGluaXRMb2dDb25zdHJ1Y3RvcicpO1xuICB9XG4gIHJldHVybiBsb2dzLmRldiA9IG5ldyBsb2dDb25zdHJ1Y3RvcihzZWxmLCBtb2RlID0+IHtcbiAgICBjb25zdCBsb2dOdW0gPSBwYXJzZUludChtb2RlLmxvZywgMTApO1xuICAgIGlmIChsb2dOdW0gPj0gMykge1xuICAgICAgcmV0dXJuIExvZ0xldmVsLkZJTkU7XG4gICAgfVxuICAgIGlmIChsb2dOdW0gPj0gMikge1xuICAgICAgcmV0dXJuIExvZ0xldmVsLklORk87XG4gICAgfVxuICAgIHJldHVybiBMb2dMZXZlbC5PRkY7XG4gIH0pO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0geyFFbGVtZW50PX0gb3B0X2VsZW1lbnRcbiAqIEByZXR1cm4ge2Jvb2xlYW59IGlzRW1iZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRnJvbUVtYmVkKHdpbiwgb3B0X2VsZW1lbnQpIHtcbiAgaWYgKCFvcHRfZWxlbWVudCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gb3B0X2VsZW1lbnQub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldyAhPSB3aW47XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtnZXRNb2RlfSBmcm9tICcuL21vZGUnO1xuXG4vKipcbiAqIFByb3ZpZGVzIGluZm8gYWJvdXQgdGhlIGN1cnJlbnQgYXBwLiBUaGlzIHJldHVybiB2YWx1ZSBtYXkgYmUgY2FjaGVkIGFuZFxuICogcGFzc2VkIGFyb3VuZCBhcyBpdCB3aWxsIGFsd2F5cyBiZSBEQ0UnZC5cbiAqIEBwYXJhbSB7P1dpbmRvdz19IG9wdF93aW5cbiAqIEByZXR1cm4geyEuL21vZGUuTW9kZURlZn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE1vZGVPYmplY3Qob3B0X3dpbikge1xuICByZXR1cm4ge1xuICAgIGxvY2FsRGV2OiBnZXRNb2RlKG9wdF93aW4pLmxvY2FsRGV2LFxuICAgIGRldmVsb3BtZW50OiBnZXRNb2RlKG9wdF93aW4pLmRldmVsb3BtZW50LFxuICAgIGZpbHRlcjogZ2V0TW9kZShvcHRfd2luKS5maWx0ZXIsXG4gICAgbWluaWZpZWQ6IGdldE1vZGUob3B0X3dpbikubWluaWZpZWQsXG4gICAgbGl0ZTogZ2V0TW9kZShvcHRfd2luKS5saXRlLFxuICAgIHRlc3Q6IGdldE1vZGUob3B0X3dpbikudGVzdCxcbiAgICBsb2c6IGdldE1vZGUob3B0X3dpbikubG9nLFxuICAgIHZlcnNpb246IGdldE1vZGUob3B0X3dpbikudmVyc2lvbixcbiAgICBydHZWZXJzaW9uOiBnZXRNb2RlKG9wdF93aW4pLnJ0dlZlcnNpb24sXG4gIH07XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtwYXJzZVF1ZXJ5U3RyaW5nX30gZnJvbSAnLi91cmwtcGFyc2UtcXVlcnktc3RyaW5nJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7e1xuICogICBsb2NhbERldjogYm9vbGVhbixcbiAqICAgZGV2ZWxvcG1lbnQ6IGJvb2xlYW4sXG4gKiAgIGZpbHRlcjogKHN0cmluZ3x1bmRlZmluZWQpLFxuICogICBtaW5pZmllZDogYm9vbGVhbixcbiAqICAgbGl0ZTogYm9vbGVhbixcbiAqICAgdGVzdDogYm9vbGVhbixcbiAqICAgbG9nOiAoc3RyaW5nfHVuZGVmaW5lZCksXG4gKiAgIHZlcnNpb246IHN0cmluZyxcbiAqICAgcnR2VmVyc2lvbjogc3RyaW5nLFxuICogfX1cbiAqL1xuZXhwb3J0IGxldCBNb2RlRGVmO1xuXG4vKiogQHR5cGUge3N0cmluZ30gKi9cbmNvbnN0IHZlcnNpb24gPSAnJGludGVybmFsUnVudGltZVZlcnNpb24kJztcblxuLyoqXG4gKiBgcnR2VmVyc2lvbmAgaXMgdGhlIHByZWZpeGVkIHZlcnNpb24gd2Ugc2VydmUgb2ZmIG9mIHRoZSBjZG4uXG4gKiBUaGUgcHJlZml4IGRlbm90ZXMgY2FuYXJ5KDAwKSBvciBwcm9kKDAxKSBvciBhbiBleHBlcmltZW50IHZlcnNpb24gKCA+IDAxKS5cbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmxldCBydHZWZXJzaW9uID0gJyc7XG5cbi8qKlxuICogUHJvdmlkZXMgaW5mbyBhYm91dCB0aGUgY3VycmVudCBhcHAuXG4gKiBAcGFyYW0gez9XaW5kb3c9fSBvcHRfd2luXG4gKiBAcmV0dXJuIHshTW9kZURlZn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE1vZGUob3B0X3dpbikge1xuICBjb25zdCB3aW4gPSBvcHRfd2luIHx8IHNlbGY7XG4gIGlmICh3aW4uQU1QX01PREUpIHtcbiAgICByZXR1cm4gd2luLkFNUF9NT0RFO1xuICB9XG4gIHJldHVybiB3aW4uQU1QX01PREUgPSBnZXRNb2RlXyh3aW4pO1xufVxuXG4vKipcbiAqIFByb3ZpZGVzIGluZm8gYWJvdXQgdGhlIGN1cnJlbnQgYXBwLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4geyFNb2RlRGVmfVxuICovXG5mdW5jdGlvbiBnZXRNb2RlXyh3aW4pIHtcbiAgLy8gTWFnaWMgY29uc3RhbnRzIHRoYXQgYXJlIHJlcGxhY2VkIGJ5IGNsb3N1cmUgY29tcGlsZXIuXG4gIC8vIElTX01JTklGSUVEIGlzIGFsd2F5cyByZXBsYWNlZCB3aXRoIHRydWUgd2hlbiBjbG9zdXJlIGNvbXBpbGVyIGlzIHVzZWRcbiAgLy8gd2hpbGUgSVNfREVWIGlzIG9ubHkgcmVwbGFjZWQgd2hlbiBgZ3VscCBkaXN0YCBpcyBjYWxsZWQgd2l0aG91dCB0aGVcbiAgLy8gLS1mb3J0ZXN0aW5nIGZsYWcuXG4gIGNvbnN0IElTX0RFViA9IHRydWU7XG4gIGNvbnN0IElTX01JTklGSUVEID0gZmFsc2U7XG5cbiAgY29uc3QgbG9jYWxEZXZFbmFibGVkID0gISEoc2VsZi5BTVBfQ09ORklHICYmIHNlbGYuQU1QX0NPTkZJRy5sb2NhbERldik7XG4gIGNvbnN0IHJ1bm5pbmdUZXN0cyA9IElTX0RFViAmJiAhISh3aW4uQU1QX1RFU1QgfHwgd2luLl9fa2FybWFfXyk7XG4gIGNvbnN0IGlzTG9jYWxEZXYgPSBJU19ERVYgJiYgKGxvY2FsRGV2RW5hYmxlZCB8fCBydW5uaW5nVGVzdHMpO1xuICBjb25zdCBoYXNoUXVlcnkgPSBwYXJzZVF1ZXJ5U3RyaW5nXyhcbiAgICAgIC8vIGxvY2F0aW9uLm9yaWdpbmFsSGFzaCBpcyBzZXQgYnkgdGhlIHZpZXdlciB3aGVuIGl0IHJlbW92ZXMgdGhlIGZyYWdtZW50XG4gICAgICAvLyBmcm9tIHRoZSBVUkwuXG4gICAgICB3aW4ubG9jYXRpb24ub3JpZ2luYWxIYXNoIHx8IHdpbi5sb2NhdGlvbi5oYXNoKTtcblxuICBjb25zdCBzZWFyY2hRdWVyeSA9IHBhcnNlUXVlcnlTdHJpbmdfKHdpbi5sb2NhdGlvbi5zZWFyY2gpO1xuXG4gIGlmICghcnR2VmVyc2lvbikge1xuICAgIHJ0dlZlcnNpb24gPSBnZXRSdHZWZXJzaW9uKHdpbiwgaXNMb2NhbERldik7XG4gIH1cblxuICAvLyBUaGUgYG1pbmlmaWVkYCwgYHRlc3RgIGFuZCBgbG9jYWxEZXZgIHByb3BlcnRpZXMgYXJlIHJlcGxhY2VkXG4gIC8vIGFzIGJvb2xlYW4gbGl0ZXJhbHMgd2hlbiB3ZSBydW4gYGd1bHAgZGlzdGAgd2l0aG91dCB0aGUgYC0tZm9ydGVzdGluZ2BcbiAgLy8gZmxhZ3MuIFRoaXMgaW1wcm92ZWQgRENFIG9uIHRoZSBwcm9kdWN0aW9uIGZpbGUgd2UgZGVwbG95IGFzIHRoZSBjb2RlXG4gIC8vIHBhdGhzIGZvciBsb2NhbGhvc3QvdGVzdGluZy9kZXZlbG9wbWVudCBhcmUgZWxpbWluYXRlZC5cbiAgcmV0dXJuIHtcbiAgICBsb2NhbERldjogaXNMb2NhbERldixcbiAgICAvLyBUcmlnZ2VycyB2YWxpZGF0aW9uIG9yIGVuYWJsZSBwdWIgbGV2ZWwgbG9nZ2luZy4gVmFsaWRhdGlvbiBjYW4gYmVcbiAgICAvLyBieXBhc3NlZCB2aWEgI3ZhbGlkYXRlPTAuXG4gICAgLy8gTm90ZSB0aGF0IEFNUF9ERVZfTU9ERSBmbGFnIGlzIHVzZWQgZm9yIHRlc3RpbmcgcHVycG9zZXMuXG4gICAgZGV2ZWxvcG1lbnQ6ICEhKGhhc2hRdWVyeVsnZGV2ZWxvcG1lbnQnXSA9PSAnMScgfHwgd2luLkFNUF9ERVZfTU9ERSksXG4gICAgZXhhbWluZXI6IGhhc2hRdWVyeVsnZGV2ZWxvcG1lbnQnXSA9PSAnMicsXG4gICAgLy8gQWxsb3dzIGZpbHRlcmluZyB2YWxpZGF0aW9uIGVycm9ycyBieSBlcnJvciBjYXRlZ29yeS4gRm9yIHRoZVxuICAgIC8vIGF2YWlsYWJsZSBjYXRlZ29yaWVzLCBzZWUgRXJyb3JDYXRlZ29yeSBpbiB2YWxpZGF0b3IvdmFsaWRhdG9yLnByb3RvLlxuICAgIGZpbHRlcjogaGFzaFF1ZXJ5WydmaWx0ZXInXSxcbiAgICAvLyBhbXAtZ2VvIG92ZXJyaWRlXG4gICAgZ2VvT3ZlcnJpZGU6IGhhc2hRdWVyeVsnYW1wLWdlbyddLFxuICAgIG1pbmlmaWVkOiBJU19NSU5JRklFRCxcbiAgICAvLyBXaGV0aGVyIGRvY3VtZW50IGlzIGluIGFuIGFtcC1saXRlIHZpZXdlci4gSXQgc2lnbmFsIHRoYXQgdGhlIHVzZXJcbiAgICAvLyB3b3VsZCBwcmVmZXIgdG8gdXNlIGxlc3MgYmFuZHdpZHRoLlxuICAgIGxpdGU6IHNlYXJjaFF1ZXJ5WydhbXBfbGl0ZSddICE9IHVuZGVmaW5lZCxcbiAgICB0ZXN0OiBydW5uaW5nVGVzdHMsXG4gICAgbG9nOiBoYXNoUXVlcnlbJ2xvZyddLFxuICAgIHZlcnNpb24sXG4gICAgcnR2VmVyc2lvbixcbiAgfTtcbn1cblxuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgYHJ0dlZlcnNpb25gIHdoaWNoIHdpbGwgaGF2ZSBhIG51bWVyaWMgcHJlZml4XG4gKiBkZW5vdGluZyBjYW5hcnkvcHJvZC9leHBlcmltZW50ICh1bmxlc3MgYGlzTG9jYWxEZXZgIGlzIHRydWUpLlxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzTG9jYWxEZXZcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZ2V0UnR2VmVyc2lvbih3aW4sIGlzTG9jYWxEZXYpIHtcbiAgLy8gSWYgaXQncyBsb2NhbCBkZXYgdGhlbiB3ZSB3b24ndCBhY3R1YWxseSBoYXZlIGEgZnVsbCB2ZXJzaW9uIHNvXG4gIC8vIGp1c3QgdXNlIHRoZSB2ZXJzaW9uLlxuICBpZiAoaXNMb2NhbERldikge1xuICAgIHJldHVybiB2ZXJzaW9uO1xuICB9XG5cbiAgaWYgKHdpbi5BTVBfQ09ORklHICYmIHdpbi5BTVBfQ09ORklHLnYpIHtcbiAgICByZXR1cm4gd2luLkFNUF9DT05GSUcudjtcbiAgfVxuXG4gIC8vIEN1cnJlbnRseSBgJGludGVybmFsUnVudGltZVZlcnNpb24kYCBhbmQgdGh1cyBgbW9kZS52ZXJzaW9uYCBjb250YWluIG9ubHlcbiAgLy8gbWFqb3IgdmVyc2lvbi4gVGhlIGZ1bGwgdmVyc2lvbiBob3dldmVyIG11c3QgYWxzbyBjYXJyeSB0aGUgbWlub3IgdmVyc2lvbi5cbiAgLy8gV2Ugd2lsbCBkZWZhdWx0IHRvIHByb2R1Y3Rpb24gZGVmYXVsdCBgMDFgIG1pbm9yIHZlcnNpb24gZm9yIG5vdy5cbiAgLy8gVE9ETyhlcndpbm1vbWJheSk6IGRlY2lkZSB3aGV0aGVyICRpbnRlcm5hbFJ1bnRpbWVWZXJzaW9uJCBzaG91bGQgY29udGFpblxuICAvLyBtaW5vciB2ZXJzaW9uLlxuICByZXR1cm4gYDAxJHt2ZXJzaW9ufWA7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtib29sZWFufSBpc0xvY2FsRGV2XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJ0dlZlcnNpb25Gb3JUZXN0aW5nKHdpbiwgaXNMb2NhbERldikge1xuICByZXR1cm4gZ2V0UnR2VmVyc2lvbih3aW4sIGlzTG9jYWxEZXYpO1xufVxuXG5cbi8qKiBAdmlzaWJsZUZvclRlc3RpbmcgKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNldFJ0dlZlcnNpb25Gb3JUZXN0aW5nKCkge1xuICBydHZWZXJzaW9uID0gJyc7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuXG5cbi8qKlxuICogVGhpcyBjbGFzcyBoZWxwcyB0byBtYW5hZ2Ugb2JzZXJ2ZXJzLiBPYnNlcnZlcnMgY2FuIGJlIGFkZGVkLCByZW1vdmVkIG9yXG4gKiBmaXJlZCB0aHJvdWdoIGFuZCBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICogQHRlbXBsYXRlIFRZUEVcbiAqL1xuZXhwb3J0IGNsYXNzIE9ic2VydmFibGUge1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIE9ic2VydmFibGUuXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvKiogQHR5cGUgez9BcnJheTxmdW5jdGlvbihUWVBFKT59ICovXG4gICAgdGhpcy5oYW5kbGVyc18gPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgdGhlIG9ic2VydmVyIHRvIHRoaXMgaW5zdGFuY2UuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oVFlQRSl9IGhhbmRsZXIgT2JzZXJ2ZXIncyBoYW5kbGVyLlxuICAgKiBAcmV0dXJuIHshVW5saXN0ZW5EZWZ9XG4gICAqL1xuICBhZGQoaGFuZGxlcikge1xuICAgIGlmICghdGhpcy5oYW5kbGVyc18pIHtcbiAgICAgIHRoaXMuaGFuZGxlcnNfID0gW107XG4gICAgfVxuICAgIHRoaXMuaGFuZGxlcnNfLnB1c2goaGFuZGxlcik7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHRoaXMucmVtb3ZlKGhhbmRsZXIpO1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyB0aGUgb2JzZXJ2ZXIgZnJvbSB0aGlzIGluc3RhbmNlLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKFRZUEUpfSBoYW5kbGVyIE9ic2VydmVyJ3MgaW5zdGFuY2UuXG4gICAqL1xuICByZW1vdmUoaGFuZGxlcikge1xuICAgIGlmICghdGhpcy5oYW5kbGVyc18pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmhhbmRsZXJzXy5pbmRleE9mKGhhbmRsZXIpO1xuICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICB0aGlzLmhhbmRsZXJzXy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGFsbCBvYnNlcnZlcnMuXG4gICAqL1xuICByZW1vdmVBbGwoKSB7XG4gICAgaWYgKCF0aGlzLmhhbmRsZXJzXykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmhhbmRsZXJzXy5sZW5ndGggPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpcmVzIGFuIGV2ZW50LiBBbGwgb2JzZXJ2ZXJzIGFyZSBjYWxsZWQuXG4gICAqIEBwYXJhbSB7VFlQRT19IG9wdF9ldmVudFxuICAgKi9cbiAgZmlyZShvcHRfZXZlbnQpIHtcbiAgICBpZiAoIXRoaXMuaGFuZGxlcnNfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGhhbmRsZXJzID0gdGhpcy5oYW5kbGVyc187XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoYW5kbGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgaGFuZGxlciA9IGhhbmRsZXJzW2ldO1xuICAgICAgaGFuZGxlcihvcHRfZXZlbnQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIG51bWJlciBvZiBoYW5kbGVycy4gTW9zdGx5IG5lZWRlZCBmb3IgdGVzdHMuXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIGdldEhhbmRsZXJDb3VudCgpIHtcbiAgICBpZiAoIXRoaXMuaGFuZGxlcnNfKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuaGFuZGxlcnNfLmxlbmd0aDtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Z2V0TW9kZX0gZnJvbSAnLi9tb2RlJztcbmltcG9ydCB7aW5zdGFsbCBhcyBpbnN0YWxsQXJyYXlJbmNsdWRlc30gZnJvbSAnLi9wb2x5ZmlsbHMvYXJyYXktaW5jbHVkZXMnO1xuaW1wb3J0IHtpbnN0YWxsIGFzIGluc3RhbGxDdXN0b21FbGVtZW50c30gZnJvbSAnLi9wb2x5ZmlsbHMvY3VzdG9tLWVsZW1lbnRzJztcbmltcG9ydCB7XG4gIGluc3RhbGwgYXMgaW5zdGFsbERPTVRva2VuTGlzdFRvZ2dsZSxcbn0gZnJvbSAnLi9wb2x5ZmlsbHMvZG9tdG9rZW5saXN0LXRvZ2dsZSc7XG5pbXBvcnQge2luc3RhbGwgYXMgaW5zdGFsbERvY0NvbnRhaW5zfSBmcm9tICcuL3BvbHlmaWxscy9kb2N1bWVudC1jb250YWlucyc7XG5pbXBvcnQge2luc3RhbGwgYXMgaW5zdGFsbE1hdGhTaWdufSBmcm9tICcuL3BvbHlmaWxscy9tYXRoLXNpZ24nO1xuaW1wb3J0IHtpbnN0YWxsIGFzIGluc3RhbGxPYmplY3RBc3NpZ259IGZyb20gJy4vcG9seWZpbGxzL29iamVjdC1hc3NpZ24nO1xuaW1wb3J0IHtpbnN0YWxsIGFzIGluc3RhbGxQcm9taXNlfSBmcm9tICcuL3BvbHlmaWxscy9wcm9taXNlJztcbmltcG9ydCB7aW5zdGFsbEN1c3RvbUVsZW1lbnRzIGFzIGluc3RhbGxSZWdpc3RlckVsZW1lbnR9IGZyb21cbiAgJ2RvY3VtZW50LXJlZ2lzdGVyLWVsZW1lbnQvYnVpbGQvZG9jdW1lbnQtcmVnaXN0ZXItZWxlbWVudC5wYXRjaGVkJztcbmltcG9ydCB7aXNFeHBlcmltZW50T259IGZyb20gJy4vZXhwZXJpbWVudHMnO1xuXG5pZiAoaXNFeHBlcmltZW50T24oc2VsZiwgJ2N1c3RvbS1lbGVtZW50cy12MScpIHx8IGdldE1vZGUoKS50ZXN0KSB7XG4gIGluc3RhbGxDdXN0b21FbGVtZW50cyhzZWxmLCBjbGFzcyB7fSk7XG59IGVsc2Uge1xuICBpbnN0YWxsUmVnaXN0ZXJFbGVtZW50KHNlbGYsICdhdXRvJyk7XG59XG5pbnN0YWxsRE9NVG9rZW5MaXN0VG9nZ2xlKHNlbGYpO1xuaW5zdGFsbE1hdGhTaWduKHNlbGYpO1xuaW5zdGFsbE9iamVjdEFzc2lnbihzZWxmKTtcbmluc3RhbGxQcm9taXNlKHNlbGYpO1xuaW5zdGFsbERvY0NvbnRhaW5zKHNlbGYpO1xuaW5zdGFsbEFycmF5SW5jbHVkZXMoc2VsZik7XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZWxlbWVudCBpcyBpbiB0aGUgYXJyYXkgYW5kIGZhbHNlIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9mcm9tSW5kZXhcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiBAdGhpcyB7QXJyYXl9XG4gKi9cbmZ1bmN0aW9uIGluY2x1ZGVzKHZhbHVlLCBvcHRfZnJvbUluZGV4KSB7XG4gIGNvbnN0IGZyb21JbmRleCA9IG9wdF9mcm9tSW5kZXggfHwgMDtcbiAgY29uc3QgbGVuID0gdGhpcy5sZW5ndGg7XG4gIGxldCBpID0gZnJvbUluZGV4ID49IDAgPyBmcm9tSW5kZXggOiBNYXRoLm1heChsZW4gKyBmcm9tSW5kZXgsIDApO1xuICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgY29uc3Qgb3RoZXIgPSB0aGlzW2ldO1xuICAgIC8vIElmIHZhbHVlIGhhcyBiZWVuIGZvdW5kIE9SICh2YWx1ZSBpcyBOYU4gQU5EIG90aGVyIGlzIE5hTilcbiAgICAvKmVzbGludCBcIm5vLXNlbGYtY29tcGFyZVwiOiAwKi9cbiAgICBpZiAob3RoZXIgPT09IHZhbHVlIHx8ICh2YWx1ZSAhPT0gdmFsdWUgJiYgb3RoZXIgIT09IG90aGVyKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4qIFNldHMgdGhlIEFycmF5LmNvbnRhaW5zIHBvbHlmaWxsIGlmIGl0IGRvZXMgbm90IGV4aXN0LlxuKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsKHdpbikge1xuICBpZiAoIXdpbi5BcnJheS5wcm90b3R5cGUuaW5jbHVkZXMpIHtcbiAgICB3aW4uT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5LnByb3RvdHlwZSwgJ2luY2x1ZGVzJywge1xuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBpbmNsdWRlcyxcbiAgICB9KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge3tcbiAqICAgcHJvbWlzZTogIVByb21pc2U8dW5kZWZpbmVkPixcbiAqICAgcmVzb2x2ZTogZnVuY3Rpb24oKSxcbiAqIH19XG4gKi9cbmxldCBEZWZlcnJlZERlZjtcblxuLyoqXG4gKiBAdHlwZWRlZiB7IUZ1bmN0aW9ufVxuICovXG5sZXQgQ3VzdG9tRWxlbWVudENvbnN0cnVjdG9yRGVmO1xuXG4vKipcbiAqIEB0eXBlZGVmIHt7XG4gKiAgbmFtZTogc3RyaW5nLFxuICogIGN0b3I6ICFDdXN0b21FbGVtZW50Q29uc3RydWN0b3JEZWYsXG4gKiB9fVxuICovXG5sZXQgQ3VzdG9tRWxlbWVudERlZjtcblxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhlIGN1c3RvbSBlbGVtZW50J3MgbmFtZS5cbiAqIFRoaXMgaW50ZW50aW9uYWxseSBpZ25vcmVzIFwidmFsaWRcIiBoaWdoZXIgVW5pY29kZSBDb2RlIFBvaW50cy5cbiAqIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2N1c3RvbS1lbGVtZW50cy5odG1sI3ZhbGlkLWN1c3RvbS1lbGVtZW50LW5hbWVcbiAqL1xuY29uc3QgVkFMSURfTkFNRSA9IC9eW2Etel1bYS16MC05Ll9dKi1bYS16MC05Ll8tXSokLztcbmNvbnN0IElOVkFMSURfTkFNRVMgPSBbXG4gICdhbm5vdGF0aW9uLXhtbCcsXG4gICdjb2xvci1wcm9maWxlJyxcbiAgJ2ZvbnQtZmFjZScsXG4gICdmb250LWZhY2Utc3JjJyxcbiAgJ2ZvbnQtZmFjZS11cmknLFxuICAnZm9udC1mYWNlLWZvcm1hdCcsXG4gICdmb250LWZhY2UtbmFtZScsXG4gICdtaXNzaW5nLWdseXBoJyxcbl07XG5cbi8qKlxuICogQXNzZXJ0cyB0aGF0IHRoZSBjdXN0b20gZWxlbWVudCBuYW1lIGNvbmZvcm1zIHRvIHRoZSBzcGVjLlxuICpcbiAqIEBwYXJhbSB7IUZ1bmN0aW9ufSBTeW50YXhFcnJvclxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAqL1xuZnVuY3Rpb24gYXNzZXJ0VmFsaWROYW1lKFN5bnRheEVycm9yLCBuYW1lKSB7XG4gIGlmICghVkFMSURfTkFNRS50ZXN0KG5hbWUpIHx8IElOVkFMSURfTkFNRVMuaW5kZXhPZihuYW1lKSA+PSAwKSB7XG4gICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKGBpbnZhbGlkIGN1c3RvbSBlbGVtZW50IG5hbWUgXCIke25hbWV9XCJgKTtcbiAgfVxufVxuXG4vKipcbiAqIERvZXMgd2luIGhhdmUgYSBmdWxsIEN1c3RvbSBFbGVtZW50cyByZWdpc3RyeT9cbiAqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaGFzQ3VzdG9tRWxlbWVudHMod2luKSB7XG4gIGNvbnN0IHtjdXN0b21FbGVtZW50c30gPSB3aW47XG5cbiAgcmV0dXJuICEhKFxuICAgIGN1c3RvbUVsZW1lbnRzICYmXG4gICAgY3VzdG9tRWxlbWVudHMuZGVmaW5lICYmXG4gICAgY3VzdG9tRWxlbWVudHMuZ2V0ICYmXG4gICAgY3VzdG9tRWxlbWVudHMud2hlbkRlZmluZWQpO1xufVxuXG4vKipcbiAqIFdhcyBIVE1MRWxlbWVudCBhbHJlYWR5IHBhdGNoZWQgZm9yIHRoaXMgd2luZG93P1xuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc1BhdGNoZWQod2luKSB7XG4gIGNvbnN0IHRhZyA9IHdpbi5IVE1MRWxlbWVudC50b1N0cmluZygpO1xuICByZXR1cm4gdGFnLmluZGV4T2YoJ1tuYXRpdmUgY29kZV0nKSA9PT0gLTE7XG59XG5cbi8qKlxuICogVGhlIHB1YmxpYyBDdXN0b20gRWxlbWVudHMgQVBJLlxuICovXG5jbGFzcyBDdXN0b21FbGVtZW50UmVnaXN0cnkge1xuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICogQHBhcmFtIHshUmVnaXN0cnl9IHJlZ2lzdHJ5XG4gICAqL1xuICBjb25zdHJ1Y3Rvcih3aW4sIHJlZ2lzdHJ5KSB7XG4gICAgLyoqXG4gICAgICogQGNvbnN0IEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy53aW5fID0gd2luO1xuXG4gICAgLyoqXG4gICAgICogQGNvbnN0IEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5yZWdpc3RyeV8gPSByZWdpc3RyeTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgRGVmZXJyZWREZWY+fVxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGNvbnN0XG4gICAgICovXG4gICAgdGhpcy5wZW5kaW5nRGVmaW5lc18gPSB0aGlzLndpbl8uT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciB0aGUgY3VzdG9tIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEBwYXJhbSB7IUN1c3RvbUVsZW1lbnRDb25zdHJ1Y3RvckRlZn0gY3RvclxuICAgKiBAcGFyYW0geyFPYmplY3Q9fSBvcHRpb25zXG4gICAqL1xuICBkZWZpbmUobmFtZSwgY3Rvciwgb3B0aW9ucykge1xuICAgIHRoaXMucmVnaXN0cnlfLmRlZmluZShuYW1lLCBjdG9yLCBvcHRpb25zKTtcblxuICAgIC8vIElmIGFueW9uZSBpcyB3YWl0aW5nIGZvciB0aGlzIGN1c3RvbSBlbGVtZW50IHRvIGJlIGRlZmluZWQsIHJlc29sdmVcbiAgICAvLyB0aGVpciBwcm9taXNlLlxuICAgIGNvbnN0IHBlbmRpbmcgPSB0aGlzLnBlbmRpbmdEZWZpbmVzXztcbiAgICBjb25zdCBkZWZlcnJlZCA9IHBlbmRpbmdbbmFtZV07XG4gICAgaWYgKGRlZmVycmVkKSB7XG4gICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICBkZWxldGUgcGVuZGluZ1tuYW1lXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjb25zdHJ1Y3RvciBvZiB0aGUgKGFscmVhZHkgZGVmaW5lZCkgY3VzdG9tIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEByZXR1cm4geyFDdXN0b21FbGVtZW50Q29uc3RydWN0b3JEZWZ8dW5kZWZpbmVkfVxuICAgKi9cbiAgZ2V0KG5hbWUpIHtcbiAgICBjb25zdCBkZWYgPSB0aGlzLnJlZ2lzdHJ5Xy5nZXRCeU5hbWUobmFtZSk7XG4gICAgaWYgKGRlZikge1xuICAgICAgcmV0dXJuIGRlZi5jdG9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHdhaXRzIHVudGlsIHRoZSBjdXN0b20gZWxlbWVudCBpcyBkZWZpbmVkLlxuICAgKiBJZiB0aGUgY3VzdG9tIGVsZW1lbnQgaXMgYWxyZWFkeSBkZWZpbmVkLCByZXR1cm5zIGEgcmVzb2x2ZWQgcHJvbWlzZS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICogQHJldHVybiB7IVByb21pc2U8dW5kZWZpbmVkPn1cbiAgICovXG4gIHdoZW5EZWZpbmVkKG5hbWUpIHtcbiAgICBjb25zdCB7UHJvbWlzZSwgU3ludGF4RXJyb3J9ID0gdGhpcy53aW5fO1xuICAgIGFzc2VydFZhbGlkTmFtZShTeW50YXhFcnJvciwgbmFtZSk7XG5cbiAgICBpZiAodGhpcy5yZWdpc3RyeV8uZ2V0QnlOYW1lKG5hbWUpKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgY29uc3QgcGVuZGluZyA9IHRoaXMucGVuZGluZ0RlZmluZXNfO1xuICAgIGNvbnN0IGRlZmVycmVkID0gcGVuZGluZ1tuYW1lXTtcbiAgICBpZiAoZGVmZXJyZWQpIHtcbiAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH1cblxuICAgIGxldCByZXNvbHZlO1xuICAgIGNvbnN0IHByb21pc2UgPSBuZXcgLypPSyovUHJvbWlzZShyZXMgPT4gcmVzb2x2ZSA9IHJlcyk7XG4gICAgcGVuZGluZ1tuYW1lXSA9IHtcbiAgICAgIHByb21pc2UsXG4gICAgICByZXNvbHZlLFxuICAgIH07XG5cbiAgICByZXR1cm4gcHJvbWlzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGdyYWRlIGFsbCBjdXN0b20gZWxlbWVudHMgaW5zaWRlIHJvb3QuXG4gICAqXG4gICAqIEBwYXJhbSB7IU5vZGV9IHJvb3RcbiAgICovXG4gIHVwZ3JhZGUocm9vdCkge1xuICAgIHRoaXMucmVnaXN0cnlfLnVwZ3JhZGUocm9vdCk7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGlzIGludGVybmFsIEFQSXMgbmVjZXNzYXJ5IHRvIHJ1biB0aGUgQ3VzdG9tRWxlbWVudFJlZ2lzdHJ5LlxuICogU2luY2UgUmVnaXN0cnkgaXMgbmV2ZXIgZXhwb3NlZCBleHRlcm5hbGx5LCBhbGwgbWV0aG9kcyBhcmUgYWN0dWFsbHlcbiAqIGF2YWlsYWJsZSBvbiB0aGUgaW5zdGFuY2UuXG4gKi9cbmNsYXNzIFJlZ2lzdHJ5IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih3aW4pIHtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZSBAY29uc3RcbiAgICAgKi9cbiAgICB0aGlzLndpbl8gPSB3aW47XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZSBAY29uc3RcbiAgICAgKi9cbiAgICB0aGlzLmRvY18gPSB3aW4uZG9jdW1lbnQ7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsICFDdXN0b21FbGVtZW50RGVmPn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBjb25zdFxuICAgICAqL1xuICAgIHRoaXMuZGVmaW5pdGlvbnNfID0gd2luLk9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgICAvKipcbiAgICAgKiBBIHVwLXRvLWRhdGUgRE9NIHNlbGVjdG9yIGZvciBhbGwgY3VzdG9tIGVsZW1lbnRzLlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5xdWVyeV8gPSAnJztcblxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50bHkgdXBncmFkaW5nIGVsZW1lbnQuXG4gICAgICogQHByaXZhdGUge0VsZW1lbnR9XG4gICAgICovXG4gICAgdGhpcy5jdXJyZW50XyA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGN1cnJlbnRseS1iZWluZy11cGdyYWRlZCBjdXN0b20gZWxlbWVudC5cbiAgICpcbiAgICogV2hlbiBhbiBhbHJlYWR5IGNyZWF0ZWQgKHRocm91Z2ggdGhlIERPTSBwYXJzaW5nIEFQSXMsIG9yIGlubmVySFRNTClcbiAgICogY3VzdG9tIGVsZW1lbnQgbm9kZSBpcyBiZWluZyB1cGdyYWRlZCwgd2UgY2FuJ3QganVzdCBjcmVhdGUgYSBuZXcgbm9kZVxuICAgKiAoaXQncyBpbGxlZ2FsIGluIHRoZSBzcGVjKS4gQnV0IHdlIHN0aWxsIG5lZWQgdG8gcnVuIHRoZSBjdXN0b20gZWxlbWVudCdzXG4gICAqIGNvbnN0cnVjdG9yIGNvZGUgb24gdGhlIG5vZGUuIFdlIGF2b2lkIHRoaXMgY29udW5kcnVtIGJ5IHJ1bm5pbmcgdGhlXG4gICAqIGNvbnN0cnVjdG9yIHdoaWxlIHJldHVybmluZyB0aGlzIGN1cnJlbnQgbm9kZSBpbiB0aGUgSFRNTEVsZW1lbnRcbiAgICogY2xhc3MgY29uc3RydWN0b3IgKHRoZSBiYXNlIGNsYXNzIG9mIGFsbCBjdXN0b20gZWxlbWVudHMpLlxuICAgKlxuICAgKiBAcmV0dXJuIHtFbGVtZW50fVxuICAgKi9cbiAgY3VycmVudCgpIHtcbiAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5jdXJyZW50XztcbiAgICB0aGlzLmN1cnJlbnRfID0gbnVsbDtcbiAgICByZXR1cm4gY3VycmVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kcyB0aGUgY3VzdG9tIGVsZW1lbnQgZGVmaW5pdGlvbiBieSBuYW1lLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcmV0dXJuIHtDdXN0b21FbGVtZW50RGVmfHVuZGVmaW5lZH1cbiAgICovXG4gIGdldEJ5TmFtZShuYW1lKSB7XG4gICAgY29uc3QgZGVmaW5pdGlvbiA9IHRoaXMuZGVmaW5pdGlvbnNfW25hbWVdO1xuICAgIGlmIChkZWZpbml0aW9uKSB7XG4gICAgICByZXR1cm4gZGVmaW5pdGlvbjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRmluZHMgdGhlIGN1c3RvbSBlbGVtZW50IGRlZmluaXRpb24gYnkgY29uc3RydWN0b3IgaW5zdGFuY2UuXG4gICAqXG4gICAqIEBwYXJhbSB7Q3VzdG9tRWxlbWVudENvbnN0cnVjdG9yRGVmfSBjdG9yXG4gICAqIEByZXR1cm4ge0N1c3RvbUVsZW1lbnREZWZ8dW5kZWZpbmVkfVxuICAgKi9cbiAgZ2V0QnlDb25zdHJ1Y3RvcihjdG9yKSB7XG4gICAgY29uc3QgZGVmaW5pdGlvbnMgPSB0aGlzLmRlZmluaXRpb25zXztcblxuICAgIGZvciAoY29uc3QgbmFtZSBpbiBkZWZpbml0aW9ucykge1xuICAgICAgY29uc3QgZGVmID0gZGVmaW5pdGlvbnNbbmFtZV07XG4gICAgICBpZiAoZGVmLmN0b3IgPT09IGN0b3IpIHtcbiAgICAgICAgcmV0dXJuIGRlZjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIHRoZSBjdXN0b20gZWxlbWVudCBkZWZpbml0aW9uLCBhbmQgdXBncmFkZXMgYWxsIGVsZW1lbnRzIGJ5IHRoYXRcbiAgICogbmFtZSBpbiB0aGUgcm9vdCBkb2N1bWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICogQHBhcmFtIHshQ3VzdG9tRWxlbWVudENvbnN0cnVjdG9yRGVmfSBjdG9yXG4gICAqIEBwYXJhbSB7IU9iamVjdHx1bmRlZmluZWR9IG9wdGlvbnNcbiAgICovXG4gIGRlZmluZShuYW1lLCBjdG9yLCBvcHRpb25zKSB7XG4gICAgY29uc3Qge0Vycm9yLCBTeW50YXhFcnJvcn0gPSB0aGlzLndpbl87XG5cbiAgICBpZiAob3B0aW9ucykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFeHRlbmRpbmcgbmF0aXZlIGN1c3RvbSBlbGVtZW50cyBpcyBub3Qgc3VwcG9ydGVkJyk7XG4gICAgfVxuXG4gICAgYXNzZXJ0VmFsaWROYW1lKFN5bnRheEVycm9yLCBuYW1lKTtcblxuICAgIGlmICh0aGlzLmdldEJ5TmFtZShuYW1lKSB8fFxuICAgICAgICB0aGlzLmdldEJ5Q29uc3RydWN0b3IoY3RvcikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgZHVwbGljYXRlIGRlZmluaXRpb24gXCIke25hbWV9XCJgKTtcbiAgICB9XG5cbiAgICAvLyBUT0RPKGpyaWRnZXdlbGwpOiBSZWNvcmQgY29ubmVjdGVkQ2FsbGJhY2ssIGRpc2Nvbm5lY3RlZENhbGxiYWNrLFxuICAgIC8vIGFkb3B0ZWRDYWxsYmFjaywgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrLCBhbmQgb2JzZXJ2ZWRBdHRyaWJ1dGVzLlxuICAgIC8vIFRPRE8oanJpZGdld2VsbCk6IElmIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjaywgZ2F0aGVyIG9ic2VydmVkQXR0cmlidXRlc1xuICAgIHRoaXMuZGVmaW5pdGlvbnNfW25hbWVdID0ge1xuICAgICAgbmFtZSxcbiAgICAgIGN0b3IsXG4gICAgfTtcblxuICAgIHRoaXMub2JzZXJ2ZV8obmFtZSk7XG4gICAgdGhpcy51cGdyYWRlKHRoaXMuZG9jXywgbmFtZSk7XG4gIH1cblxuICAvKipcbiAgICogVXBncmFkZXMgY3VzdG9tIGVsZW1lbnRzIGRlc2NlbmRhbnRzIG9mIHJvb3QgKGJ1dCBub3QgaW5jbHVkaW5nIHJvb3QpLlxuICAgKlxuICAgKiBXaGVuIGNhbGxlZCB3aXRoIGFuIG9wdF9xdWVyeSwgaXQgYm90aCB1cGdyYWRlcyBhbmQgY29ubmVjdHMgdGhlIGN1c3RvbVxuICAgKiBlbGVtZW50cyAodGhpcyBpcyB1c2VkIGR1cmluZyB0aGUgY3VzdG9tIGVsZW1lbnQgZGVmaW5lIGFsZ29yaXRobSkuXG4gICAqXG4gICAqIEBwYXJhbSB7IU5vZGV9IHJvb3RcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfcXVlcnlcbiAgICovXG4gIHVwZ3JhZGUocm9vdCwgb3B0X3F1ZXJ5KSB7XG4gICAgLy8gT25seSBDdXN0b21FbGVtZW50UmVnaXN0cnkucC5kZWZpbmUgcHJvdmlkZXMgYSBxdWVyeSAodGhlIG5ld2x5IGRlZmluZWRcbiAgICAvLyBjdXN0b20gZWxlbWVudCkuIEluIHRoaXMgY2FzZSwgd2UgYXJlIGJvdGggdXBncmFkaW5nIF9hbmRfIGNvbm5lY3RpbmdcbiAgICAvLyB0aGUgY3VzdG9tIGVsZW1lbnRzLlxuICAgIGNvbnN0IG5ld2x5RGVmaW5lZCA9ICEhb3B0X3F1ZXJ5O1xuICAgIGNvbnN0IHF1ZXJ5ID0gb3B0X3F1ZXJ5IHx8IHRoaXMucXVlcnlfO1xuICAgIGNvbnN0IHVwZ3JhZGVDYW5kaWRhdGVzID0gdGhpcy5xdWVyeUFsbF8ocm9vdCwgcXVlcnkpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB1cGdyYWRlQ2FuZGlkYXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgY2FuZGlkYXRlID0gdXBncmFkZUNhbmRpZGF0ZXNbaV07XG4gICAgICBpZiAobmV3bHlEZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuY29ubmVjdGVkQ2FsbGJhY2tfKGNhbmRpZGF0ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnVwZ3JhZGVTZWxmKGNhbmRpZGF0ZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZ3JhZGVzIHRoZSBjdXN0b20gZWxlbWVudCBub2RlLCBpZiBhIGN1c3RvbSBlbGVtZW50IGhhcyBiZWVuIHJlZ2lzdGVyZWRcbiAgICogYnkgdGhpcyBuYW1lLlxuICAgKlxuICAgKiBAcGFyYW0geyFOb2RlfSBub2RlXG4gICAqL1xuICB1cGdyYWRlU2VsZihub2RlKSB7XG4gICAgY29uc3QgZGVmID0gdGhpcy5nZXRCeU5hbWUobm9kZS5sb2NhbE5hbWUpO1xuICAgIGlmICghZGVmKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy51cGdyYWRlU2VsZl8oLyoqIEB0eXBlIHshRWxlbWVudH0gKi8obm9kZSksIGRlZik7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshTm9kZX0gcm9vdFxuICAgKiBAcGFyYW0ge3N0cmluZ30gcXVlcnlcbiAgICogQHJldHVybiB7IUFycmF5fCFOb2RlTGlzdH1cbiAgICovXG4gIHF1ZXJ5QWxsXyhyb290LCBxdWVyeSkge1xuICAgIGlmICghcXVlcnkgfHwgIXJvb3QucXVlcnlTZWxlY3RvckFsbCkge1xuICAgICAgLy8gTm90aGluZyB0byBkby4uLlxuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHJldHVybiByb290LnF1ZXJ5U2VsZWN0b3JBbGwocXVlcnkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZ3JhZGVzIHRoZSAoYWxyZWFkeSBjcmVhdGVkIHZpYSBET00gcGFyc2luZykgY3VzdG9tIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IG5vZGVcbiAgICogQHBhcmFtIHshQ3VzdG9tRWxlbWVudERlZn0gZGVmXG4gICAqL1xuICB1cGdyYWRlU2VsZl8obm9kZSwgZGVmKSB7XG4gICAgY29uc3Qge2N0b3J9ID0gZGVmO1xuICAgIGlmIChub2RlIGluc3RhbmNlb2YgY3Rvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIERlc3BpdGUgaG93IGl0IGxvb2tzLCB0aGlzIGlzIG5vdCBhIHVzZWxlc3MgY29uc3RydWN0aW9uLlxuICAgIC8vIEhUTUxFbGVtZW50UG9seWZpbGwgKHRoZSBiYXNlIGNsYXNzIG9mIGFsbCBjdXN0b20gZWxlbWVudHMpIHdpbGwgcmV0dXJuXG4gICAgLy8gdGhlIGN1cnJlbnQgbm9kZSwgYWxsb3dpbmcgdGhlIGN1c3RvbSBlbGVtZW50J3Mgc3ViY2xhc3MgY29uc3RydWN0b3IgdG9cbiAgICAvLyBydW4gb24gdGhlIG5vZGUuIFRoZSBub2RlIGl0c2VsZiBpcyBhbHJlYWR5IGNvbnN0cnVjdGVkLCBzbyB0aGUgcmV0dXJuXG4gICAgLy8gdmFsdWUgaXMganVzdCB0aGUgbm9kZS5cbiAgICB0aGlzLmN1cnJlbnRfID0gbm9kZTtcbiAgICBjb25zdCBlbCA9IG5ldyBjdG9yKCk7XG5cbiAgICBpZiAoZWwgIT09IG5vZGUpIHtcbiAgICAgIHRocm93IG5ldyB0aGlzLndpbl8uRXJyb3IoXG4gICAgICAgICAgJ0NvbnN0cnVjdG9yIGlsbGVnYWxseSByZXR1cm5lZCBhIGRpZmZlcmVudCBpbnN0YW5jZS4nKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRmlyZXMgY29ubmVjdGVkQ2FsbGJhY2sgb24gdGhlIGN1c3RvbSBlbGVtZW50LCBpZiBpdCBoYXMgb25lLlxuICAgKiBUaGlzIGFsc28gdXBncmFkZXMgdGhlIGN1c3RvbSBlbGVtZW50LCBzaW5jZSBpdCBtYXkgbm90IGhhdmUgYmVlblxuICAgKiBhY2Nlc3NpYmxlIHZpYSB0aGUgcm9vdCBkb2N1bWVudCBiZWZvcmUgKGEgZGV0YWNoZWQgRE9NIHRyZWUpLlxuICAgKlxuICAgKiBAcGFyYW0geyFOb2RlfSBub2RlXG4gICAqL1xuICBjb25uZWN0ZWRDYWxsYmFja18obm9kZSkge1xuICAgIGNvbnN0IGRlZiA9IHRoaXMuZ2V0QnlOYW1lKG5vZGUubG9jYWxOYW1lKTtcbiAgICBpZiAoIWRlZikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnVwZ3JhZGVTZWxmXygvKiogQHR5cGUgeyFFbGVtZW50fSAqLyhub2RlKSwgZGVmKTtcbiAgICAvLyBUT0RPKGpyaWRnZXdlbGwpOiBJdCBtYXkgYmUgYXBwcm9wcmlhdGUgdG8gYWRvcHRDYWxsYmFjaywgaWYgdGhlIG5vZGVcbiAgICAvLyB1c2VkIHRvIGJlIGluIGFub3RoZXIgZG9jLlxuICAgIC8vIFRPRE8oanJpZGdld2VsbCk6IEkgc2hvdWxkIGJlIGNhbGxpbmcgdGhlIGRlZmluaXRpb25zIGNvbm5lY3RlZENhbGxiYWNrXG4gICAgLy8gd2l0aCBub2RlIGFzIHRoZSBjb250ZXh0LlxuICAgIGlmIChub2RlLmNvbm5lY3RlZENhbGxiYWNrKSB7XG4gICAgICBub2RlLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZpcmVzIGRpc2Nvbm5lY3RlZENhbGxiYWNrIG9uIHRoZSBjdXN0b20gZWxlbWVudCwgaWYgaXQgaGFzIG9uZS5cbiAgICpcbiAgICogQHBhcmFtIHshTm9kZX0gbm9kZVxuICAgKi9cbiAgZGlzY29ubmVjdGVkQ2FsbGJhY2tfKG5vZGUpIHtcbiAgICAvLyBUT0RPKGpyaWRnZXdlbGwpOiBJIHNob3VsZCBiZSBjYWxsaW5nIHRoZSBkZWZpbml0aW9ucyBjb25uZWN0ZWRDYWxsYmFja1xuICAgIC8vIHdpdGggbm9kZSBhcyB0aGUgY29udGV4dC5cbiAgICBpZiAobm9kZS5kaXNjb25uZWN0ZWRDYWxsYmFjaykge1xuICAgICAgbm9kZS5kaXNjb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWNvcmRzIG5hbWUgYXMgYSByZWdpc3RlcmVkIGN1c3RvbSBlbGVtZW50IHRvIG9ic2VydmUuXG4gICAqXG4gICAqIFN0YXJ0cyB0aGUgTXV0YXRpb24gT2JzZXJ2ZXIgaWYgdGhpcyBpcyB0aGUgZmlyc3QgcmVnaXN0ZXJlZCBjdXN0b21cbiAgICogZWxlbWVudC4gVGhpcyBpcyBkZWZlcnJlZCB1bnRpbCB0aGUgZmlyc3QgY3VzdG9tIGVsZW1lbnQgaXMgZGVmaW5lZCB0b1xuICAgKiBzcGVlZCB1cCBpbml0aWFsIHJlbmRlcmluZyBvZiB0aGUgcGFnZS5cbiAgICpcbiAgICogTXV0YXRpb24gT2JzZXJ2ZXJzIGFyZSBjb252ZW5pZW50bHkgYXZhaWxhYmxlIGluIGV2ZXJ5IGJyb3dzZXIgd2UgY2FyZVxuICAgKiBhYm91dC4gV2hlbiBhIG5vZGUgaXMgY29ubmVjdGVkIHRvIHRoZSByb290IGRvY3VtZW50LCBhbGwgY3VzdG9tXG4gICAqIGVsZW1lbnRzIChpbmNsdWRpbmcgdGhhdCBub2RlIGl0ZXNlbGYpIHdpbGwgYmUgdXBncmFkZWQgYW5kIGNhbGxcbiAgICogY29ubmVjdGVkQ2FsbGJhY2suIFdoZW4gYSBub2RlIGlzIGRpc2Nvbm5lY3RlZENhbGxiYWNrIGZyb20gdGhlIHJvb3RcbiAgICogZG9jdW1lbnQsIGFsbCBjdXN0b20gZWxlbWVudHMgd2lsbCBjYWxsIGRpc2Nvbm5lY3RlZENhbGxiYWNrLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKi9cbiAgb2JzZXJ2ZV8obmFtZSkge1xuICAgIGlmICh0aGlzLnF1ZXJ5Xykge1xuICAgICAgdGhpcy5xdWVyeV8gKz0gYCwke25hbWV9YDtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnF1ZXJ5XyA9IG5hbWU7XG5cbiAgICAvLyBUaGUgZmlyc3QgcmVnaXN0ZXJlZCBuYW1lIHN0YXJ0cyB0aGUgbXV0YXRpb24gb2JzZXJ2ZXIuXG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgdGhpcy53aW5fLk11dGF0aW9uT2JzZXJ2ZXIocmVjb3JkcyA9PiB7XG4gICAgICBpZiAocmVjb3Jkcykge1xuICAgICAgICB0aGlzLmhhbmRsZVJlY29yZHNfKHJlY29yZHMpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIG9ic2VydmVyLm9ic2VydmUodGhpcy5kb2NfLCB7XG4gICAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgICBzdWJ0cmVlOiB0cnVlLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBhbGwgdGhlIE11dGF0aW9uIE9ic2VydmVyJ3MgTXV0YXRpb24gUmVjb3Jkcy5cbiAgICogQWxsIGFkZGVkIGN1c3RvbSBlbGVtZW50cyB3aWxsIGJlIHVwZ3JhZGVkIChpZiBub3QgYWxyZWFkeSkgYW5kIGNhbGxcbiAgICogY29ubmVjdGVkQ2FsbGJhY2suIEFsbCByZW1vdmVkIGN1c3RvbSBlbGVtZW50cyB3aWxsIGNhbGxcbiAgICogZGlzY29ubmVjdGVkQ2FsbGJhY2suXG4gICAqXG4gICAqIEBwYXJhbSB7IUFycmF5PCFNdXRhdGlvblJlY29yZD59IHJlY29yZHNcbiAgICovXG4gIGhhbmRsZVJlY29yZHNfKHJlY29yZHMpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlY29yZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHJlY29yZCA9IHJlY29yZHNbaV07XG4gICAgICBpZiAoIXJlY29yZCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qge2FkZGVkTm9kZXMsIHJlbW92ZWROb2Rlc30gPSByZWNvcmQ7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFkZGVkTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IGFkZGVkTm9kZXNbaV07XG4gICAgICAgIGNvbnN0IGNvbm5lY3RlZENhbmRpZGF0ZXMgPSB0aGlzLnF1ZXJ5QWxsXyhub2RlLCB0aGlzLnF1ZXJ5Xyk7XG4gICAgICAgIHRoaXMuY29ubmVjdGVkQ2FsbGJhY2tfKG5vZGUpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbm5lY3RlZENhbmRpZGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB0aGlzLmNvbm5lY3RlZENhbGxiYWNrXyhjb25uZWN0ZWRDYW5kaWRhdGVzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlbW92ZWROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBub2RlID0gcmVtb3ZlZE5vZGVzW2ldO1xuICAgICAgICBjb25zdCBkaXNjb25uZWN0ZWRDYW5kaWRhdGVzID0gdGhpcy5xdWVyeUFsbF8obm9kZSwgdGhpcy5xdWVyeV8pO1xuICAgICAgICB0aGlzLmRpc2Nvbm5lY3RlZENhbGxiYWNrXyhub2RlKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkaXNjb25uZWN0ZWRDYW5kaWRhdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdGhpcy5kaXNjb25uZWN0ZWRDYWxsYmFja18oZGlzY29ubmVjdGVkQ2FuZGlkYXRlc1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBEb2VzIHRoZSBwb2x5ZmlsbGluZy5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKi9cbmZ1bmN0aW9uIHBvbHlmaWxsKHdpbikge1xuICBjb25zdCB7SFRNTEVsZW1lbnQsIEVsZW1lbnQsIE5vZGUsIERvY3VtZW50LCBPYmplY3QsIGRvY3VtZW50fSA9IHdpbjtcbiAgY29uc3Qge2NyZWF0ZUVsZW1lbnQsIGNsb25lTm9kZSwgaW1wb3J0Tm9kZX0gPSBkb2N1bWVudDtcblxuICBjb25zdCByZWdpc3RyeSA9IG5ldyBSZWdpc3RyeSh3aW4pO1xuICBjb25zdCBjdXN0b21FbGVtZW50cyA9IG5ldyBDdXN0b21FbGVtZW50UmVnaXN0cnkod2luLCByZWdpc3RyeSk7XG5cbiAgLy8gRXhwb3NlIHRoZSBjdXN0b20gZWxlbWVudCByZWdpc3RyeS5cbiAgLy8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih3aW5kb3csICdjdXN0b21FbGVtZW50cycpXG4gIC8vIHtnZXQ6IMaSLCBzZXQ6IHVuZGVmaW5lZCwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlfVxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luLCAnY3VzdG9tRWxlbWVudHMnLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgLy8gd3JpdGFibGU6IGZhbHNlLFxuICAgIHZhbHVlOiBjdXN0b21FbGVtZW50cyxcbiAgfSk7XG5cbiAgLy8gUGF0Y2ggY3JlYXRlRWxlbWVudCB0byBpbW1lZGlhdGVseSB1cGdyYWRlIHRoZSBjdXN0b20gZWxlbWVudC5cbiAgLy8gVGhpcyBoYXMgdGhlIGFkZGVkIGJlbmVmaXQgdGhhdCBpdCBhdm9pZHMgdGhlIFwiYWxyZWFkeSBjcmVhdGVkIGJ1dCBuZWVkc1xuICAvLyBjb25zdHJ1Y3RvciBjb2RlIHJ1blwiIGNoaWNrZW4tYW5kLWVnZyBwcm9ibGVtLlxuICBEb2N1bWVudC5wcm90b3R5cGUuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRQb2x5ZmlsbChuYW1lKSB7XG4gICAgY29uc3QgZGVmID0gcmVnaXN0cnkuZ2V0QnlOYW1lKG5hbWUpO1xuICAgIGlmIChkZWYpIHtcbiAgICAgIHJldHVybiBuZXcgZGVmLmN0b3IoKTtcbiAgICB9XG4gICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcblxuICAvLyBQYXRjaCBpbXBvcnROb2RlIHRvIGltbWVkaWF0ZWx5IHVwZ3JhZGUgY3VzdG9tIGVsZW1lbnRzLlxuICAvLyBUT0RPKGpyaWRnZXdlbGwpOiBDYW4gZmlyZSBhZG9wdGVkQ2FsbGJhY2sgZm9yIGNyb3NzIGRvYyBpbXBvcnRzLlxuICBEb2N1bWVudC5wcm90b3R5cGUuaW1wb3J0Tm9kZSA9IGZ1bmN0aW9uIGltcG9ydE5vZGVQb2x5ZmlsbCgpIHtcbiAgICBjb25zdCBpbXBvcnRlZCA9IGltcG9ydE5vZGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAoaW1wb3J0ZWQpIHtcbiAgICAgIHJlZ2lzdHJ5LnVwZ3JhZGVTZWxmKGltcG9ydGVkKTtcbiAgICAgIHJlZ2lzdHJ5LnVwZ3JhZGUoaW1wb3J0ZWQpO1xuICAgIH1cbiAgICByZXR1cm4gaW1wb3J0ZWQ7XG4gIH07XG5cbiAgLy8gUGF0Y2ggY2xvbmVOb2RlIHRvIGltbWVkaWF0ZWx5IHVwZ3JhZGUgY3VzdG9tIGVsZW1lbnRzLlxuICBOb2RlLnByb3RvdHlwZS5jbG9uZU5vZGUgPSBmdW5jdGlvbiBjbG9uZU5vZGVQb2x5ZmlsbCgpIHtcbiAgICBjb25zdCBjbG9uZWQgPSBjbG9uZU5vZGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICByZWdpc3RyeS51cGdyYWRlU2VsZihjbG9uZWQpO1xuICAgIHJlZ2lzdHJ5LnVwZ3JhZGUoY2xvbmVkKTtcbiAgICByZXR1cm4gY2xvbmVkO1xuICB9O1xuXG4gIC8vIFBhdGNoIHRoZSBpbm5lckhUTUwgc2V0dGVyIHRvIGltbWVkaWF0ZWx5IHVwZ3JhZGUgY3VzdG9tIGVsZW1lbnRzLlxuICAvLyBOb3RlLCB0aGlzIGNvdWxkIHRlY2huaWNhbGx5IGZpcmUgY29ubmVjdGVkQ2FsbGJhY2tzIGlmIHRoaXMgbm9kZSB3YXNcbiAgLy8gY29ubmVjdGVkLCBidXQgd2UgbGVhdmUgdGhhdCB0byB0aGUgTXV0YXRpb24gT2JzZXJ2ZXIuXG4gIGNvbnN0IGlubmVySFRNTERlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKEVsZW1lbnQucHJvdG90eXBlLFxuICAgICAgJ2lubmVySFRNTCcpO1xuICBjb25zdCBpbm5lckhUTUxTZXR0ZXIgPSBpbm5lckhUTUxEZXNjLnNldDtcbiAgaW5uZXJIVE1MRGVzYy5zZXQgPSBmdW5jdGlvbihodG1sKSB7XG4gICAgaW5uZXJIVE1MU2V0dGVyLmNhbGwodGhpcywgaHRtbCk7XG4gICAgcmVnaXN0cnkudXBncmFkZSh0aGlzKTtcbiAgfTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEVsZW1lbnQucHJvdG90eXBlLCAnaW5uZXJIVE1MJywgaW5uZXJIVE1MRGVzYyk7XG5cbiAgLyoqXG4gICAqIFlvdSBjYW4ndCB1c2UgdGhlIHJlYWwgSFRNTEVsZW1lbnQgY29uc3RydWN0b3IsIGJlY2F1c2UgeW91IGNhbid0IHN1YmNsYXNzXG4gICAqIGl0IHdpdGhvdXQgdXNpbmcgbmF0aXZlIGNsYXNzZXMuIFNvLCBtb2NrIGl0cyBhcHByb3hpbWF0aW9uIHVzaW5nXG4gICAqIGNyZWF0ZUVsZW1lbnQuXG4gICAqL1xuICBmdW5jdGlvbiBIVE1MRWxlbWVudFBvbHlmaWxsKCkge1xuICAgIGNvbnN0IHtjb25zdHJ1Y3Rvcn0gPSB0aGlzO1xuXG4gICAgLy8gSWYgd2UncmUgdXBncmFkaW5nIGFuIGFscmVhZHkgY3JlYXRlZCBjdXN0b20gZWxlbWVudCwgd2UgY2FuJ3QgY3JlYXRlXG4gICAgLy8gYW5vdGhlciBuZXcgbm9kZSAoYnkgdGhlIHNwZWMsIGl0IG11c3QgYmUgdGhlIHNhbWUgbm9kZSkuXG4gICAgbGV0IGVsID0gcmVnaXN0cnkuY3VycmVudCgpO1xuXG4gICAgLy8gSWYgdGhlcmUncyBub3QgYSBhbHJlYWR5IGNyZWF0ZWQgY3VzdG9tIGVsZW1lbnQsIHdlJ3JlIGJlaW5nIGludm9rZWQgdmlhXG4gICAgLy8gYG5ld2BpbmcgdGhlIGNvbnN0cnVjdG9yLlxuICAgIC8vXG4gICAgLy8gVGVjaG5pY2FsbHksIHdlIGNvdWxkIGdldCBoZXJlIHZpYSBjcmVhdGVFbGVtZW50LCBidXQgd2UgcGF0Y2hlZCB0aGF0LlxuICAgIC8vIElmIGl0IHRoZSBjdXN0b20gZWxlbWVudCB3YXMgcmVnaXN0ZXJlZCwgdGhlIHBhdGNoIHR1cm5lZCBpdCBpbnRvIGFcbiAgICAvLyBgbmV3YCBjYWxsLlxuICAgIC8vIElmIGl0IHdhcyBub3QgcmVnaXN0ZXJlZCwgdGhlIG5hdGl2ZSBjcmVhdGVFbGVtZW50IGlzIHVzZWQuIEFuZCBpZlxuICAgIC8vIG5hdGl2ZSBjcmVhdGVFbGVtZW50IGlzIGJlaW5nIHVzZWQgYW5kIHdlIGdvdCB0byB0aGlzIGNvZGUsIHdlJ3JlIHJlYWxseVxuICAgIC8vIGluIGFuIGluZmluaXRlIGxvb3AgKGEgbmF0aXZlIGNyZWF0ZUVsZW1lbnQgY2FsbCBqdXN0IGJlbG93KSBzbyB3ZSd2ZVxuICAgIC8vIGdvdCBiaWdnZXIgcHJvYmxlbXMuXG4gICAgLy9cbiAgICAvLyBTbyBqdXN0IHRha2UgbXkgd29yZCB3ZSBnb3QgaGVyZSB2aWEgYG5ld2AuXG4gICAgaWYgKCFlbCkge1xuICAgICAgLy8gVGhlIGN1c3RvbSBlbGVtZW50IGRlZmluaXRpb24gaXMgYW4gaW52YXJpYW50LiBJZiB0aGUgY3VzdG9tIGVsZW1lbnRcbiAgICAgIC8vIGlzIHJlZ2lzdGVyZWQsIGV2ZXJ5dGhpbmcgd29ya3MuIElmIGl0J3Mgbm90LCBpdCB0aHJvd3MgaW4gdGhlIG1lbWJlclxuICAgICAgLy8gcHJvcGVydHkgYWNjZXNzIChvbmx5IGRlZmluZWQgY3VzdG9tIGVsZW1lbnRzIGNhbiBiZSBkaXJlY3RseVxuICAgICAgLy8gY29uc3RydWN0ZWQgdmlhIGBuZXdgKS5cbiAgICAgIGNvbnN0IGRlZiA9IHJlZ2lzdHJ5LmdldEJ5Q29uc3RydWN0b3IoY29uc3RydWN0b3IpO1xuICAgICAgZWwgPSBjcmVhdGVFbGVtZW50LmNhbGwoZG9jdW1lbnQsIGRlZi5uYW1lKTtcbiAgICB9XG5cbiAgICAvLyBGaW5hbGx5LCBpZiB0aGUgbm9kZSB3YXMgYWxyZWFkeSBjb25zdHJ1Y3RlZCwgd2UgbmVlZCB0byByZXNldCBpdCdzXG4gICAgLy8gcHJvdG90eXBlIHRvIHRoZSBjdXN0b20gZWxlbWVudCBwcm90b3R5cGUuIEFuZCBpZiBpdCB3YXNuJ3QgYWxyZWFkeVxuICAgIC8vIGNvbnN0cnVjdGVkLCB3ZSBjcmVhdGVkIGEgbmV3IG5vZGUgdmlhIG5hdGl2ZSBjcmVhdGVFbGVtZW50LCBhbmQgd2UgbmVlZFxuICAgIC8vIHRvIHJlc2V0IGl0J3MgcHJvdG90eXBlLiBCYXNpY2FsbHkgYWx3YXlzIHJlc2V0IHRoZSBwcm90b3R5cGUuXG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGVsLCBjb25zdHJ1Y3Rvci5wcm90b3R5cGUpO1xuICAgIHJldHVybiBlbDtcbiAgfVxuICBzdWJDbGFzcyhPYmplY3QsIEhUTUxFbGVtZW50LCBIVE1MRWxlbWVudFBvbHlmaWxsKTtcblxuICAvLyBFeHBvc2UgdGhlIHBvbHlmaWxsZWQgSFRNTEVsZW1lbnQgY29uc3RydWN0b3IgZm9yIGV2ZXJ5b25lIHRvIGV4dGVuZCBmcm9tLlxuICB3aW4uSFRNTEVsZW1lbnQgPSBIVE1MRWxlbWVudFBvbHlmaWxsO1xufVxuXG4vKipcbiAqIFdyYXBzIEhUTUxFbGVtZW50IGluIGEgUmVmbGVjdC5jb25zdHJ1Y3QgY29uc3RydWN0b3IsIHNvIHRoYXQgdHJhbnNwaWxlZFxuICogY2xhc3NlcyBjYW4gYF90aGlzID0gc3VwZXJDbGFzcy5jYWxsKHRoaXMpYCBkdXJpbmcgdGhlaXIgY29uc3RydWN0aW9uLlxuICpcbiAqIFRoaXMgaXMgb25seSB1c2VkIHdoZW4gQ3VzdG9tIEVsZW1lbnRzIHYxIGlzIGFscmVhZHkgYXZhaWxhYmxlIF9hbmRfIHdlJ3JlXG4gKiB1c2luZyB0cmFuc3BpbGVkIGNsYXNzZXMgKHdoaWNoIHVzZSBFUzUgY29uc3RydWN0aW9uIGlkaW9tcykuXG4gKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqL1xuZnVuY3Rpb24gd3JhcEhUTUxFbGVtZW50KHdpbikge1xuICBjb25zdCB7SFRNTEVsZW1lbnQsIFJlZmxlY3QsIE9iamVjdH0gPSB3aW47XG4gIC8qKlxuICAgKi9cbiAgZnVuY3Rpb24gSFRNTEVsZW1lbnRXcmFwcGVyKCkge1xuICAgIGNvbnN0IGN0b3IgPSAvKiogQHR5cGUge2Z1bmN0aW9uKC4uLj8pOj98dW5kZWZpbmVkfSAqLyhcbiAgICAgIC8qKiBAdHlwZSB7IUhUTUxFbGVtZW50fSAqLyh0aGlzKS5jb25zdHJ1Y3Rvcik7XG5cbiAgICAvLyBSZWZsZWN0LmNvbnN0cnVjdCBhbGxvd3MgdXMgdG8gY29uc3RydWN0IGEgbmV3IEhUTUxFbGVtZW50IHdpdGhvdXQgdXNpbmdcbiAgICAvLyBgbmV3YCAod2hpY2ggd2lsbCBhbHdheXMgZmFpbCBiZWNhdXNlIG5hdGl2ZSBIVE1MRWxlbWVudCBpcyBhIHJlc3RyaWN0ZWRcbiAgICAvLyBjb25zdHJ1Y3RvcikuXG4gICAgcmV0dXJuIFJlZmxlY3QuY29uc3RydWN0KEhUTUxFbGVtZW50LCBbXSwgY3Rvcik7XG4gIH1cbiAgc3ViQ2xhc3MoT2JqZWN0LCBIVE1MRWxlbWVudCwgSFRNTEVsZW1lbnRXcmFwcGVyKTtcblxuICAvLyBFeHBvc2UgdGhlIHdyYXBwZWQgSFRNTEVsZW1lbnQgY29uc3RydWN0b3IgZm9yIGV2ZXJ5b25lIHRvIGV4dGVuZCBmcm9tLlxuICB3aW4uSFRNTEVsZW1lbnQgPSBIVE1MRWxlbWVudFdyYXBwZXI7XG59XG5cbi8qKlxuICogU2V0dXBzIHVwIHByb3RvdHlwZSBpbmhlcml0YW5jZVxuICpcbiAqIEBwYXJhbSB7IU9iamVjdH0gT2JqZWN0XG4gKiBAcGFyYW0geyFGdW5jdGlvbn0gc3VwZXJDbGFzc1xuICogQHBhcmFtIHshRnVuY3Rpb259IHN1YkNsYXNzXG4gKi9cbmZ1bmN0aW9uIHN1YkNsYXNzKE9iamVjdCwgc3VwZXJDbGFzcywgc3ViQ2xhc3MpIHtcbiAgLy8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzdXBlckNsYXNzLnByb3RvdHlwZSwgJ2NvbnN0cnVjdG9yJylcbiAgLy8ge3ZhbHVlOiDGkiwgd3JpdGFibGU6IHRydWUsIGVudW1lcmFibGU6IGZhbHNlLCBjb25maWd1cmFibGU6IHRydWV9XG4gIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUsIHtcbiAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgLy8gZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBzdWJDbGFzcyxcbiAgICB9LFxuICB9KTtcbn1cblxuLyoqXG4gKiBQb2x5ZmlsbHMgQ3VzdG9tIEVsZW1lbnRzIHYxIEFQSS4gVGhpcyBoYXMgNCBtb2RlczpcbiAqXG4gKiAxLiBDdXN0b20gZWxlbWVudHMgdjEgYWxyZWFkeSBzdXBwb3J0ZWQsIHVzaW5nIG5hdGl2ZSBjbGFzc2VzXG4gKiAyLiBDdXN0b20gZWxlbWVudHMgdjEgYWxyZWFkeSBzdXBwb3J0ZWQsIHVzaW5nIHRyYW5zcGlsZWQgY2xhc3Nlc1xuICogMy4gQ3VzdG9tIGVsZW1lbnRzIHYxIG5vdCBzdXBwb3J0ZWQsIHVzaW5nIG5hdGl2ZSBjbGFzc2VzXG4gKiA0LiBDdXN0b20gZWxlbWVudHMgdjEgbm90IHN1cHBvcnRlZCwgdXNpbmcgdHJhbnNwaWxlZCBjbGFzc2VzXG4gKlxuICogSW4gbW9kZSAxLCBub3RoaW5nIGlzIGRvbmUuIEluIG1vZGUgMiwgYSBtaW5pbWFsIHBvbHlmaWxsIGlzIHVzZWQgdG8gc3VwcG9ydFxuICogZXh0ZW5kaW5nIHRoZSBIVE1MRWxlbWVudCBiYXNlIGNsYXNzLiBJbiBtb2RlIDMgYW5kIDQsIGEgZnVsbCBwb2x5ZmlsbCBpc1xuICogZG9uZS5cbiAqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHshRnVuY3Rpb259IGN0b3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluc3RhbGwod2luLCBjdG9yKSB7XG4gIGlmIChpc1BhdGNoZWQod2luKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGxldCBpbnN0YWxsID0gdHJ1ZTtcbiAgbGV0IGluc3RhbGxXcmFwcGVyID0gZmFsc2U7XG5cbiAgaWYgKGhhc0N1c3RvbUVsZW1lbnRzKHdpbikpIHtcbiAgICAvLyBJZiBjdG9yIGlzIGNvbnN0cnVjdGFibGUgd2l0aG91dCBuZXcsIGl0J3MgYSBmdW5jdGlvbi4gVGhhdCBtZWFucyBpdCB3YXNcbiAgICAvLyBjb21waWxlZCBkb3duLCBhbmQgd2UgbmVlZCB0byBkbyB0aGUgbWluaW1hbCBwb2x5ZmlsbCBiZWNhdXNlIGFsbCB5b3VcbiAgICAvLyBjYW5ub3QgZXh0ZW5kIEhUTUxFbGVtZW50IHdpdGhvdXQgbmF0aXZlIGNsYXNzZXMuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHtPYmplY3QsIFJlZmxlY3R9ID0gd2luO1xuXG4gICAgICAvLyBcIkNvbnN0cnVjdFwiIGN0b3IgdXNpbmcgRVM1IGlkaW9tc1xuICAgICAgY29uc3QgaW5zdGFuY2UgPSBPYmplY3QuY3JlYXRlKGN0b3IucHJvdG90eXBlKTtcbiAgICAgIGN0b3IuY2FsbChpbnN0YW5jZSk7XG5cbiAgICAgIC8vIElmIHRoYXQgc3VjY2VlZGVkLCB3ZSdyZSBpbiBhIHRyYW5zcGlsZWQgZW52aXJvbm1lbnRcbiAgICAgIC8vIExldCdzIGZpbmQgb3V0IGlmIHdlIGNhbiB3cmFwIEhUTUxFbGVtZW50IGFuZCBhdm9pZCBhIGZ1bGwgcGF0Y2guXG4gICAgICBpbnN0YWxsV3JhcHBlciA9ICEhKFJlZmxlY3QgJiYgUmVmbGVjdC5jb25zdHJ1Y3QpO1xuICAgIH0gY2F0Y2ggKGUpIHtcblxuICAgICAgLy8gVGhlIGN0b3IgdGhyZXcgd2hlbiB3ZSBjb25zdHJ1Y3RlZCBpcyB2aWEgRVM1LCBzbyBpdCdzIGEgcmVhbCBjbGFzcy5cbiAgICAgIC8vIFdlJ3JlIG9rIHRvIG5vdCBpbnN0YWxsIHRoZSBwb2x5ZmlsbC5cbiAgICAgIGluc3RhbGwgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBpZiAoaW5zdGFsbFdyYXBwZXIpIHtcbiAgICB3cmFwSFRNTEVsZW1lbnQod2luKTtcbiAgfSBlbHNlIGlmIChpbnN0YWxsKSB7XG4gICAgcG9seWZpbGwod2luKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cblxuLyoqXG4gKiBQb2x5ZmlsbCBmb3IgYGRvY3VtZW50LmNvbnRhaW5zKClgIG1ldGhvZC4gTm90aWNlIHRoYXQgYWNjb3JkaW5nIHRvIHNwZWNcbiAqIGBkb2N1bWVudC5jb250YWluc2AgaXMgaW5jbHVzaW9uYXJ5LlxuICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Ob2RlL2NvbnRhaW5zXG4gKiBAcGFyYW0gez9Ob2RlfSBub2RlXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICogQHRoaXMge05vZGV9XG4gKi9cbmZ1bmN0aW9uIGRvY3VtZW50Q29udGFpbnNQb2x5ZmlsbChub2RlKSB7XG4gIC8vIFBlciBzcGVjLCBcImNvbnRhaW5zXCIgbWV0aG9kIGlzIGluY2x1c2lvbmFyeVxuICAvLyBpLmUuIGBub2RlLmNvbnRhaW5zKG5vZGUpID09IHRydWVgLiBIb3dldmVyLCB3ZSBzdGlsbCBuZWVkIHRvIHRlc3RcbiAgLy8gZXF1YWxpdHkgdG8gdGhlIGRvY3VtZW50IGl0c2VsZi5cbiAgcmV0dXJuIG5vZGUgPT0gdGhpcyB8fCB0aGlzLmRvY3VtZW50RWxlbWVudC5jb250YWlucyhub2RlKTtcbn1cblxuXG4vKipcbiAqIFBvbHlmaWxscyBgSFRNTERvY3VtZW50LmNvbnRhaW5zYCBBUEkuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbCh3aW4pIHtcbiAgLy8gSFRNTERvY3VtZW50IGlzIHVuZGVmaW5lZCBpbiBJbnRlcm5ldCBFeHBsb3JlciAxMCwgYnV0IGl0IGhhcyBEb2N1bWVudCxcbiAgLy8gc28gd2UgdXNlIHRoYXQgYXMgYSBmYWxsYmFjay5cbiAgY29uc3QgZG9jdW1lbnRDbGFzcyA9IHdpbi5IVE1MRG9jdW1lbnQgfHwgd2luLkRvY3VtZW50O1xuICBpZiAoIWRvY3VtZW50Q2xhc3MucHJvdG90eXBlLmNvbnRhaW5zKSB7XG4gICAgd2luLk9iamVjdC5kZWZpbmVQcm9wZXJ0eShkb2N1bWVudENsYXNzLnByb3RvdHlwZSwgJ2NvbnRhaW5zJywge1xuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBkb2N1bWVudENvbnRhaW5zUG9seWZpbGwsXG4gICAgfSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbi8qKlxuICogUG9seWZpbGwgZm9yIGBET01Ub2tlbkxpc3QucHJvdG90eXBlLnRvZ2dsZSh0b2tlbiwgb3B0X2ZvcmNlKWAgbWV0aG9kLiBUaGlzXG4gKiBpcyBzcGVjaWFsbHkgaW1wb3J0YW50IGJlY2F1c2UgSUUgZG9lcyBub3Qgc3VwcG9ydCBgb3B0X2ZvcmNlYCBhdHRyaWJ1dGUuIFNlZVxuICogaHR0cHM6Ly9nb28uZ2wvaGdLTllZIGZvciBkZXRhaWxzLlxuICogQHBhcmFtIHtzdHJpbmd9IHRva2VuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfZm9yY2VcbiAqIEB0aGlzIHtET01Ub2tlbkxpc3R9XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBkb21Ub2tlbkxpc3RUb2dnbGVQb2x5ZmlsbCh0b2tlbiwgb3B0X2ZvcmNlKSB7XG4gIGNvbnN0IHJlbW92ZSA9IG9wdF9mb3JjZSA9PT0gdW5kZWZpbmVkID8gdGhpcy5jb250YWlucyh0b2tlbikgOiAhb3B0X2ZvcmNlO1xuICBpZiAocmVtb3ZlKSB7XG4gICAgdGhpcy5yZW1vdmUodG9rZW4pO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmFkZCh0b2tlbik7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cblxuXG4vKipcbiAqIFBvbHlmaWxscyBgRE9NVG9rZW5MaXN0LnByb3RvdHlwZS50b2dnbGVgIEFQSSBpbiBJRS5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsKHdpbikge1xuICBpZiAoaXNJZSh3aW4pICYmIHdpbi5ET01Ub2tlbkxpc3QpIHtcbiAgICB3aW4uT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbi5ET01Ub2tlbkxpc3QucHJvdG90eXBlLCAndG9nZ2xlJywge1xuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBkb21Ub2tlbkxpc3RUb2dnbGVQb2x5ZmlsbCxcbiAgICB9KTtcbiAgfVxufVxuXG5cbi8qKlxuICogV2hldGhlciB0aGUgY3VycmVudCBicm93c2VyIGlzIGEgSUUgYnJvd3Nlci5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc0llKHdpbikge1xuICByZXR1cm4gL1RyaWRlbnR8TVNJRXxJRU1vYmlsZS9pLnRlc3Qod2luLm5hdmlnYXRvci51c2VyQWdlbnQpO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogUGFyc2VzIHRoZSBudW1iZXIgeCBhbmQgcmV0dXJucyBpdHMgc2lnbi4gRm9yIHBvc2l0aXZlIHggcmV0dXJucyAxLCBmb3JcbiAqIG5lZ2F0aXZlLCAtMS4gRm9yIDAgYW5kIC0wLCByZXR1cm5zIDAgYW5kIC0wIHJlc3BlY3RpdmVseS4gRm9yIGFueSBudW1iZXJcbiAqIHRoYXQgcGFyc2VzIHRvIE5hTiwgcmV0dXJucyBOYU4uXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHhcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNpZ24oeCkge1xuICB4ID0gTnVtYmVyKHgpO1xuXG4gIC8vIElmIHggaXMgMCwgLTAsIG9yIE5hTiwgcmV0dXJuIGl0LlxuICBpZiAoIXgpIHtcbiAgICByZXR1cm4geDtcbiAgfVxuXG4gIHJldHVybiB4ID4gMCA/IDEgOiAtMTtcbn1cblxuXG4vKipcbiAqIFNldHMgdGhlIE1hdGguc2lnbiBwb2x5ZmlsbCBpZiBpdCBkb2VzIG5vdCBleGlzdC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsKHdpbikge1xuICBpZiAoIXdpbi5NYXRoLnNpZ24pIHtcbiAgICB3aW4uT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbi5NYXRoLCAnc2lnbicsIHtcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogc2lnbixcbiAgICB9KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmNvbnN0IHtoYXNPd25Qcm9wZXJ0eX0gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIENvcGllcyB2YWx1ZXMgb2YgYWxsIGVudW1lcmFibGUgb3duIHByb3BlcnRpZXMgZnJvbSBvbmUgb3IgbW9yZSBzb3VyY2VcbiAqIG9iamVjdHMgKHByb3ZpZGVkIGFzIGV4dGVuZGVkIGFyZ3VtZW50cyB0byB0aGUgZnVuY3Rpb24pIHRvIGEgdGFyZ2V0IG9iamVjdC5cbiAqXG4gKiBAcGFyYW0geyFPYmplY3R9IHRhcmdldFxuICogQHBhcmFtIHsuLi5PYmplY3R9IHZhcl9hcmdzXG4gKiBAcmV0dXJuIHshT2JqZWN0fVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzaWduKHRhcmdldCwgdmFyX2FyZ3MpIHtcbiAgaWYgKHRhcmdldCA9PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0Jyk7XG4gIH1cblxuICBjb25zdCBvdXRwdXQgPSBPYmplY3QodGFyZ2V0KTtcbiAgZm9yIChsZXQgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBzb3VyY2UgPSBhcmd1bWVudHNbaV07XG4gICAgaWYgKHNvdXJjZSAhPSBudWxsKSB7XG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgICAgb3V0cHV0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gb3V0cHV0O1xufVxuXG5cbi8qKlxuICogU2V0cyB0aGUgT2JqZWN0LmFzc2lnbiBwb2x5ZmlsbCBpZiBpdCBkb2VzIG5vdCBleGlzdC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsKHdpbikge1xuICBpZiAoIXdpbi5PYmplY3QuYXNzaWduKSB7XG4gICAgd2luLk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW4uT2JqZWN0LCAnYXNzaWduJywge1xuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBhc3NpZ24sXG4gICAgfSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbmltcG9ydCAqIGFzIFByb21pc2UgZnJvbSAncHJvbWlzZS1wanMvcHJvbWlzZSc7XG5cbi8qKlxuICogU2V0cyB0aGUgUHJvbWlzZSBwb2x5ZmlsbCBpZiBpdCBkb2VzIG5vdCBleGlzdC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsKHdpbikge1xuICBpZiAoIXdpbi5Qcm9taXNlKSB7XG4gICAgd2luLlByb21pc2UgPSAvKiogQHR5cGUgez99ICovIChQcm9taXNlKTtcbiAgICAvLyBJbiBiYWJlbCB0aGUgKiBleHBvcnQgaXMgYW4gT2JqZWN0IHdpdGggYSBkZWZhdWx0IHByb3BlcnR5LlxuICAgIC8vIEluIGNsb3N1cmUgY29tcGlsZXIgaXQgaXMgdGhlIFByb21pc2UgZnVuY3Rpb24gaXRzZWxmLlxuICAgIGlmIChQcm9taXNlLmRlZmF1bHQpIHtcbiAgICAgIHdpbi5Qcm9taXNlID0gUHJvbWlzZS5kZWZhdWx0O1xuICAgIH1cbiAgICAvLyBXZSBjb3B5IHRoZSBpbmRpdmlkdWFsIHN0YXRpYyBtZXRob2RzLCBiZWNhdXNlIGNsb3N1cmVcbiAgICAvLyBjb21waWxlciBmbGF0dGVucyB0aGUgcG9seWZpbGwgbmFtZXNwYWNlLlxuICAgIHdpbi5Qcm9taXNlLnJlc29sdmUgPSBQcm9taXNlLnJlc29sdmU7XG4gICAgd2luLlByb21pc2UucmVqZWN0ID0gUHJvbWlzZS5yZWplY3Q7XG4gICAgd2luLlByb21pc2UuYWxsID0gUHJvbWlzZS5hbGw7XG4gICAgd2luLlByb21pc2UucmFjZSA9IFByb21pc2UucmFjZTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7U2VydmljZXN9IGZyb20gJy4vc2VydmljZXMnO1xuaW1wb3J0IHtkZXZ9IGZyb20gJy4vbG9nJztcbmltcG9ydCB7Z2V0U2VydmljZVByb21pc2V9IGZyb20gJy4vc2VydmljZSc7XG5cbi8qKlxuICogQSBtYXAgb2Ygc2VydmljZXMgdGhhdCBkZWxheSByZW5kZXJpbmcuIFRoZSBrZXkgaXMgdGhlIG5hbWUgb2YgdGhlIHNlcnZpY2VcbiAqIGFuZCB0aGUgdmFsdWUgaXMgYSBET00gcXVlcnkgd2hpY2ggaXMgdXNlZCB0byBjaGVjayBpZiB0aGUgc2VydmljZSBpcyBuZWVkZWRcbiAqIGluIHRoZSBjdXJyZW50IGRvY3VtZW50LlxuICogRG8gbm90IGFkZCBhIHNlcnZpY2UgdW5sZXNzIGFic29sdXRlbHkgbmVjZXNzYXJ5LlxuICpcbiAqIFxcICAgXFwgIC8gIFxcICAvICAgLyAvICAgXFwgICAgIHwgICBfICBcXCAgICAgfCAgXFwgfCAgfCB8ICB8IHwgIFxcIHwgIHwgIC8gX19fX198XG4gKiAgXFwgICBcXC8gICAgXFwvICAgLyAvICBeICBcXCAgICB8ICB8XykgIHwgICAgfCAgIFxcfCAgfCB8ICB8IHwgICBcXHwgIHwgfCAgfCAgX19cbiAqICAgXFwgICAgICAgICAgICAvIC8gIC9fXFwgIFxcICAgfCAgICAgIC8gICAgIHwgIC4gYCAgfCB8ICB8IHwgIC4gYCAgfCB8ICB8IHxfIHxcbiAqICAgIFxcICAgIC9cXCAgICAvIC8gIF9fX19fICBcXCAgfCAgfFxcICBcXC0tLS0ufCAgfFxcICAgfCB8ICB8IHwgIHxcXCAgIHwgfCAgfF9ffCB8XG4gKiAgICAgXFxfXy8gIFxcX18vIC9fXy8gICAgIFxcX19cXCB8IF98IGAuX19fX198fF9ffCBcXF9ffCB8X198IHxfX3wgXFxfX3wgIFxcX19fX19ffFxuICpcbiAqIFRoZSBlcXVpdmFsZW50IG9mIHRoaXMgbGlzdCBpcyB1c2VkIGZvciBzZXJ2ZXItc2lkZSByZW5kZXJpbmcgKFNTUikgYW5kIGFueVxuICogY2hhbmdlcyBtYWRlIHRvIGl0IG11c3QgYmUgbWFkZSBpbiBjb29yZGluYXRpb24gd2l0aCBjYWNoZXMgdGhhdCBpbXBsZW1lbnRcbiAqIFNTUi4gRm9yIG1vcmUgaW5mb3JtYXRpb24gb24gU1NSIHNlZSBiaXQubHkvYW1wLXNzci5cbiAqXG4gKiBAY29uc3QgeyFPYmplY3Q8c3RyaW5nLCBzdHJpbmc+fVxuICovXG5jb25zdCBTRVJWSUNFUyA9IHtcbiAgJ2FtcC1keW5hbWljLWNzcy1jbGFzc2VzJzogJ1tjdXN0b20tZWxlbWVudD1hbXAtZHluYW1pYy1jc3MtY2xhc3Nlc10nLFxuICAndmFyaWFudCc6ICdhbXAtZXhwZXJpbWVudCcsXG4gICdhbXAtc3RvcnknOiAnYW1wLXN0b3J5W3N0YW5kYWxvbmVdJyxcbn07XG5cbi8qKlxuICogTWF4aW11bSBtaWxsaXNlY29uZHMgdG8gd2FpdCBmb3IgYWxsIGV4dGVuc2lvbnMgdG8gbG9hZCBiZWZvcmUgZXJyb3JpbmcuXG4gKiBAY29uc3RcbiAqL1xuY29uc3QgTE9BRF9USU1FT1VUID0gMzAwMDtcblxuLyoqXG4gKiBEZXRlY3RzIGFueSByZW5kZXIgZGVsYXlpbmcgc2VydmljZXMgdGhhdCBhcmUgcmVxdWlyZWQgb24gdGhlIHBhZ2UsIGFuZFxuICogcmV0dXJucyBhIHByb21pc2Ugd2l0aCBhIHRpbWVvdXQuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7IVByb21pc2U8IUFycmF5PCo+Pn0gcmVzb2x2ZXMgdG8gYW4gQXJyYXkgdGhhdCBoYXMgdGhlIHNhbWUgbGVuZ3RoXG4gKiAgICAgYXMgdGhlIGRldGVjdGVkIHJlbmRlciBkZWxheWluZyBzZXJ2aWNlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gd2FpdEZvclNlcnZpY2VzKHdpbikge1xuICBjb25zdCBwcm9taXNlcyA9IGluY2x1ZGVkU2VydmljZXMod2luKS5tYXAoc2VydmljZSA9PiB7XG4gICAgcmV0dXJuIFNlcnZpY2VzLnRpbWVyRm9yKHdpbikudGltZW91dFByb21pc2UoXG4gICAgICAgIExPQURfVElNRU9VVCxcbiAgICAgICAgZ2V0U2VydmljZVByb21pc2Uod2luLCBzZXJ2aWNlKSxcbiAgICAgICAgYFJlbmRlciB0aW1lb3V0IHdhaXRpbmcgZm9yIHNlcnZpY2UgJHtzZXJ2aWNlfSB0byBiZSByZWFkeS5gXG4gICAgKTtcbiAgfSk7XG4gIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBwYWdlIGhhcyBhIHJlbmRlciBkZWxheWluZyBzZXJ2aWNlLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNSZW5kZXJEZWxheWluZ1NlcnZpY2VzKHdpbikge1xuICByZXR1cm4gaW5jbHVkZWRTZXJ2aWNlcyh3aW4pLmxlbmd0aCA+IDA7XG59XG5cbi8qKlxuICogRGV0ZWN0cyB3aGljaCwgaWYgYW55LCByZW5kZXItZGVsYXlpbmcgZXh0ZW5zaW9ucyBhcmUgaW5jbHVkZWQgb24gdGhlIHBhZ2UuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7IUFycmF5PHN0cmluZz59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmNsdWRlZFNlcnZpY2VzKHdpbikge1xuICAvKiogQGNvbnN0IHshRG9jdW1lbnR9ICovXG4gIGNvbnN0IGRvYyA9IHdpbi5kb2N1bWVudDtcbiAgZGV2KCkuYXNzZXJ0KGRvYy5ib2R5KTtcblxuICByZXR1cm4gT2JqZWN0LmtleXMoU0VSVklDRVMpLmZpbHRlcihzZXJ2aWNlID0+IHtcbiAgICByZXR1cm4gZG9jLnF1ZXJ5U2VsZWN0b3IoU0VSVklDRVNbc2VydmljZV0pO1xuICB9KTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgUmVnaXN0cmF0aW9uIGFuZCBnZXR0ZXIgZnVuY3Rpb25zIGZvciBBTVAgc2VydmljZXMuXG4gKlxuICogSW52YXJpYW50OiBTZXJ2aWNlIGdldHRlcnMgbmV2ZXIgcmV0dXJuIG51bGwgZm9yIHJlZ2lzdGVyZWQgc2VydmljZXMuXG4gKi9cblxuLy8gc3JjL3BvbHlmaWxscy5qcyBtdXN0IGJlIHRoZSBmaXJzdCBpbXBvcnQuXG5pbXBvcnQgJy4vcG9seWZpbGxzJzsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBzb3J0LWltcG9ydHMtZXM2LWF1dG9maXgvc29ydC1pbXBvcnRzLWVzNlxuXG5pbXBvcnQge0RlZmVycmVkfSBmcm9tICcuL3V0aWxzL3Byb21pc2UnO1xuaW1wb3J0IHtkZXZ9IGZyb20gJy4vbG9nJztcbmltcG9ydCB7dG9XaW59IGZyb20gJy4vdHlwZXMnO1xuXG5cbi8qKlxuICogSG9sZHMgaW5mbyBhYm91dCBhIHNlcnZpY2UuXG4gKiAtIG9iajogQWN0dWFsIHNlcnZpY2UgaW1wbGVtZW50YXRpb24gd2hlbiBhdmFpbGFibGUuXG4gKiAtIHByb21pc2U6IFByb21pc2UgZm9yIHRoZSBvYmouXG4gKiAtIHJlc29sdmU6IEZ1bmN0aW9uIHRvIHJlc29sdmUgdGhlIHByb21pc2Ugd2l0aCB0aGUgb2JqZWN0LlxuICogLSBjb250ZXh0OiBBcmd1bWVudCBmb3IgY3RvciwgZWl0aGVyIGEgd2luZG93IG9yIGFuIGFtcGRvYy5cbiAqIC0gY3RvcjogRnVuY3Rpb24gdGhhdCBjb25zdHJ1Y3RzIGFuZCByZXR1cm5zIHRoZSBzZXJ2aWNlLlxuICogQHR5cGVkZWYge3tcbiAqICAgb2JqOiAoP09iamVjdCksXG4gKiAgIHByb21pc2U6ICg/UHJvbWlzZSksXG4gKiAgIHJlc29sdmU6ICg/ZnVuY3Rpb24oIU9iamVjdCkpLFxuICogICBjb250ZXh0OiAoP1dpbmRvd3w/Li9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvYyksXG4gKiAgIGN0b3I6ICg/ZnVuY3Rpb24obmV3Ok9iamVjdCwgIVdpbmRvdyl8XG4gKiAgICAgICAgICA/ZnVuY3Rpb24obmV3Ok9iamVjdCwgIS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2MpKSxcbiAqIH19XG4gKi9cbmxldCBTZXJ2aWNlSG9sZGVyRGVmO1xuXG5cbi8qKlxuICogVGhpcyBpbnRlcmZhY2UgcHJvdmlkZXMgYSBgZGlzcG9zZWAgbWV0aG9kIHRoYXQgd2lsbCBiZSBjYWxsZWQgYnlcbiAqIHJ1bnRpbWUgd2hlbiBhIHNlcnZpY2UgbmVlZHMgdG8gYmUgZGlzcG9zZWQgb2YuXG4gKiBAaW50ZXJmYWNlXG4gKi9cbmV4cG9ydCBjbGFzcyBEaXNwb3NhYmxlIHtcblxuICAvKipcbiAgICogSW5zdHJ1Y3RzIHRoZSBzZXJ2aWNlIHRvIHJlbGVhc2UgYW55IHJlc291cmNlcyBpdCBtaWdodCBiZSBob2xkaW5nLiBDYW5cbiAgICogYmUgY2FsbGVkIG9ubHkgb25jZSBpbiB0aGUgbGlmZWN5Y2xlIG9mIGEgc2VydmljZS5cbiAgICovXG4gIGRpc3Bvc2UoKSB7fVxufVxuXG5cbi8qKlxuICogVGhpcyBpbnRlcmZhY2UgcHJvdmlkZXMgYSBgYWRvcHRFbWJlZFdpbmRvd2AgbWV0aG9kIHRoYXQgd2lsbCBiZSBjYWxsZWQgYnlcbiAqIHJ1bnRpbWUgZm9yIGEgbmV3IGVtYmVkIHdpbmRvdy5cbiAqIEBpbnRlcmZhY2VcbiAqL1xuZXhwb3J0IGNsYXNzIEVtYmVkZGFibGVTZXJ2aWNlIHtcblxuICAvKipcbiAgICogSW5zdHJ1Y3RzIHRoZSBzZXJ2aWNlIHRvIGFkb3B0IHRoZSBlbWJlZCB3aW5kb3cgYW5kIGFkZCBhbnkgbmVjZXNzYXJ5XG4gICAqIGxpc3RlbmVycyBhbmQgcmVzb3VyY2VzLlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHVudXNlZEVtYmVkV2luXG4gICAqL1xuICBhZG9wdEVtYmVkV2luZG93KHVudXNlZEVtYmVkV2luKSB7fVxufVxuXG5cbi8qKlxuICogUmV0dXJucyBhIHNlcnZpY2Ugd2l0aCB0aGUgZ2l2ZW4gaWQuIEFzc3VtZXMgdGhhdCBpdCBoYXMgYmVlbiByZWdpc3RlcmVkXG4gKiBhbHJlYWR5LlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2ZhbGxiYWNrVG9Ub3BXaW5cbiAqIEByZXR1cm4ge09iamVjdH0gVGhlIHNlcnZpY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFeGlzdGluZ1NlcnZpY2VJbkVtYmVkU2NvcGUod2luLCBpZCwgb3B0X2ZhbGxiYWNrVG9Ub3BXaW4pIHtcbiAgLy8gRmlyc3QsIHRyeSB0byByZXNvbHZlIHZpYSBsb2NhbCAoZW1iZWQpIHdpbmRvdy5cbiAgY29uc3QgbG9jYWwgPSBnZXRMb2NhbEV4aXN0aW5nU2VydmljZUZvckVtYmVkV2luT3JOdWxsKHdpbiwgaWQpO1xuICBpZiAobG9jYWwpIHtcbiAgICByZXR1cm4gbG9jYWw7XG4gIH1cbiAgaWYgKG9wdF9mYWxsYmFja1RvVG9wV2luKSB7XG4gICAgcmV0dXJuIGdldFNlcnZpY2Uod2luLCBpZCk7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHNlcnZpY2Ugd2l0aCB0aGUgZ2l2ZW4gaWQuIEFzc3VtZXMgdGhhdCBpdCBoYXMgYmVlbiBjb25zdHJ1Y3RlZFxuICogYWxyZWFkeS5cbiAqXG4gKiBVbmxpa2UgbW9zdCBzZXJ2aWNlIGdldHRlcnMsIHBhc3NpbmcgYE5vZGVgIGlzIG5lY2Vzc2FyeSBmb3Igc29tZSBGSUUtc2NvcGVcbiAqIHNlcnZpY2VzIHNpbmNlIHNvbWV0aW1lcyB3ZSBvbmx5IGhhdmUgdGhlIEZJRSBEb2N1bWVudCBmb3IgY29udGV4dC5cbiAqXG4gKiBAcGFyYW0geyFOb2RlfCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBub2RlT3JEb2NcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2ZhbGxiYWNrVG9Ub3BXaW5cbiAqIEByZXR1cm4ge09iamVjdH0gVGhlIHNlcnZpY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFeGlzdGluZ1NlcnZpY2VGb3JEb2NJbkVtYmVkU2NvcGUoXG4gIG5vZGVPckRvYywgaWQsIG9wdF9mYWxsYmFja1RvVG9wV2luKSB7XG4gIC8vIEZpcnN0LCB0cnkgdG8gcmVzb2x2ZSB2aWEgbG9jYWwgKGVtYmVkKSB3aW5kb3cuXG4gIGlmIChub2RlT3JEb2Mubm9kZVR5cGUpIHtcbiAgICAvLyBJZiBhIG5vZGUgaXMgcGFzc2VkLCB0cnkgdG8gcmVzb2x2ZSB2aWEgdGhpcyBub2RlLlxuICAgIGNvbnN0IHdpbiA9IHRvV2luKC8qKiBAdHlwZSB7IURvY3VtZW50fSAqLyAoXG4gICAgICBub2RlT3JEb2Mub3duZXJEb2N1bWVudCB8fCBub2RlT3JEb2MpLmRlZmF1bHRWaWV3KTtcbiAgICBjb25zdCBsb2NhbCA9IGdldExvY2FsRXhpc3RpbmdTZXJ2aWNlRm9yRW1iZWRXaW5Pck51bGwod2luLCBpZCk7XG4gICAgaWYgKGxvY2FsKSB7XG4gICAgICByZXR1cm4gbG9jYWw7XG4gICAgfVxuICB9XG4gIC8vIElmIGFuIGFtcGRvYyBpcyBwYXNzZWQgb3IgZmFsbGJhY2sgaXMgYWxsb3dlZCwgY29udGludWUgcmVzb2x2aW5nLlxuICBpZiAoIW5vZGVPckRvYy5ub2RlVHlwZSB8fCBvcHRfZmFsbGJhY2tUb1RvcFdpbikge1xuICAgIHJldHVybiBnZXRTZXJ2aWNlRm9yRG9jRGVwcmVjYXRlZChub2RlT3JEb2MsIGlkKTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBJbnN0YWxscyBhIHNlcnZpY2Ugb3ZlcnJpZGUgb24gYW1wLWRvYyBsZXZlbC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gZW1iZWRXaW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICogQHBhcmFtIHshT2JqZWN0fSBzZXJ2aWNlIFRoZSBzZXJ2aWNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbFNlcnZpY2VJbkVtYmVkU2NvcGUoZW1iZWRXaW4sIGlkLCBzZXJ2aWNlKSB7XG4gIGNvbnN0IHRvcFdpbiA9IGdldFRvcFdpbmRvdyhlbWJlZFdpbik7XG4gIGRldigpLmFzc2VydChlbWJlZFdpbiAhPSB0b3BXaW4sXG4gICAgICAnU2VydmljZSBvdmVycmlkZSBjYW4gb25seSBiZSBpbnN0YWxsZWQgaW4gZW1iZWQgd2luZG93OiAlcycsIGlkKTtcbiAgZGV2KCkuYXNzZXJ0KCFnZXRMb2NhbEV4aXN0aW5nU2VydmljZUZvckVtYmVkV2luT3JOdWxsKGVtYmVkV2luLCBpZCksXG4gICAgICAnU2VydmljZSBvdmVycmlkZSBoYXMgYWxyZWFkeSBiZWVuIGluc3RhbGxlZDogJXMnLCBpZCk7XG4gIHJlZ2lzdGVyU2VydmljZUludGVybmFsKGVtYmVkV2luLCBlbWJlZFdpbiwgaWQsICgpID0+IHNlcnZpY2UpO1xuICBnZXRTZXJ2aWNlSW50ZXJuYWwoZW1iZWRXaW4sIGlkKTsgLy8gRm9yY2Ugc2VydmljZSB0byBidWlsZC5cbn1cblxuLyoqXG4gKiBAcGFyYW0geyFXaW5kb3d9IGVtYmVkV2luXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAqIEByZXR1cm4gez9PYmplY3R9XG4gKi9cbmZ1bmN0aW9uIGdldExvY2FsRXhpc3RpbmdTZXJ2aWNlRm9yRW1iZWRXaW5Pck51bGwoZW1iZWRXaW4sIGlkKSB7XG4gIC8vIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBjdXJyZW50bHkgb25seSByZXNvbHZlcyBhZ2FpbnN0IHRoZSBnaXZlbiB3aW5kb3cuXG4gIC8vIEl0IGRvZXMgbm90IHRyeSB0byBnbyBhbGwgdGhlIHdheSB1cCB0aGUgcGFyZW50IHdpbmRvdyBjaGFpbi4gV2UgY2FuIGNoYW5nZVxuICAvLyB0aGlzIGluIHRoZSBmdXR1cmUsIGJ1dCBmb3Igbm93IHRoaXMgZ2l2ZXMgdXMgYSBiZXR0ZXIgcGVyZm9ybWFuY2UuXG4gIGNvbnN0IHRvcFdpbiA9IGdldFRvcFdpbmRvdyhlbWJlZFdpbik7XG4gIGlmIChlbWJlZFdpbiAhPSB0b3BXaW4gJiYgaXNTZXJ2aWNlUmVnaXN0ZXJlZChlbWJlZFdpbiwgaWQpKSB7XG4gICAgcmV0dXJuIGdldFNlcnZpY2VJbnRlcm5hbChlbWJlZFdpbiwgaWQpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGEgc2VydmljZSBnaXZlbiBhIGNsYXNzIHRvIGJlIHVzZWQgYXMgaW1wbGVtZW50YXRpb24uXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IGlkIG9mIHRoZSBzZXJ2aWNlLlxuICogQHBhcmFtIHtmdW5jdGlvbihuZXc6T2JqZWN0LCAhV2luZG93KX0gY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbnN0YW50aWF0ZSBXaGV0aGVyIHRvIGltbWVkaWF0ZWx5IGNyZWF0ZSB0aGUgc2VydmljZVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJTZXJ2aWNlQnVpbGRlcih3aW4sXG4gIGlkLFxuICBjb25zdHJ1Y3RvcixcbiAgb3B0X2luc3RhbnRpYXRlKSB7XG4gIHdpbiA9IGdldFRvcFdpbmRvdyh3aW4pO1xuICByZWdpc3RlclNlcnZpY2VJbnRlcm5hbCh3aW4sIHdpbiwgaWQsIGNvbnN0cnVjdG9yKTtcbiAgaWYgKG9wdF9pbnN0YW50aWF0ZSkge1xuICAgIGdldFNlcnZpY2VJbnRlcm5hbCh3aW4sIGlkKTtcbiAgfVxufVxuXG5cbi8qKlxuICogUmV0dXJucyBhIHNlcnZpY2UgYW5kIHJlZ2lzdGVycyBpdCBnaXZlbiBhIGNsYXNzIHRvIGJlIHVzZWQgYXNcbiAqIGltcGxlbWVudGF0aW9uLlxuICogQHBhcmFtIHshTm9kZXwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gbm9kZU9yRG9jXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKG5ldzpPYmplY3QsICEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jKX0gY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pbnN0YW50aWF0ZSBXaGV0aGVyIHRvIGltbWVkaWF0ZWx5IGNyZWF0ZSB0aGUgc2VydmljZVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJTZXJ2aWNlQnVpbGRlckZvckRvYyhub2RlT3JEb2MsXG4gIGlkLFxuICBjb25zdHJ1Y3RvcixcbiAgb3B0X2luc3RhbnRpYXRlKSB7XG4gIGNvbnN0IGFtcGRvYyA9IGdldEFtcGRvYyhub2RlT3JEb2MpO1xuICBjb25zdCBob2xkZXIgPSBnZXRBbXBkb2NTZXJ2aWNlSG9sZGVyKGFtcGRvYyk7XG4gIHJlZ2lzdGVyU2VydmljZUludGVybmFsKGhvbGRlciwgYW1wZG9jLCBpZCwgY29uc3RydWN0b3IpO1xuICBpZiAob3B0X2luc3RhbnRpYXRlKSB7XG4gICAgZ2V0U2VydmljZUludGVybmFsKGhvbGRlciwgaWQpO1xuICB9XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIGEgc2VydmljZSBmb3IgdGhlIGdpdmVuIGlkIGFuZCB3aW5kb3cgKGEgcGVyLXdpbmRvdyBzaW5nbGV0b24pLiBVc2Vyc1xuICogc2hvdWxkIHR5cGljYWxseSB3cmFwIHRoaXMgYXMgYSBzcGVjaWFsIHB1cnBvc2UgZnVuY3Rpb24gKGUuZy5cbiAqIGBTZXJ2aWNlcy52c3luY0Zvcih3aW4pYCkgZm9yIHR5cGUgc2FmZXR5IGFuZCBiZWNhdXNlIHRoZSBmYWN0b3J5IHNob3VsZCBub3RcbiAqIGJlIHBhc3NlZCBhcm91bmQuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IGlkIG9mIHRoZSBzZXJ2aWNlLlxuICogQHRlbXBsYXRlIFRcbiAqIEByZXR1cm4ge1R9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTZXJ2aWNlKHdpbiwgaWQpIHtcbiAgd2luID0gZ2V0VG9wV2luZG93KHdpbik7XG4gIHJldHVybiBnZXRTZXJ2aWNlSW50ZXJuYWwod2luLCBpZCk7XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSBmb3IgYSBzZXJ2aWNlIGZvciB0aGUgZ2l2ZW4gaWQgYW5kIHdpbmRvdy4gQWxzbyBleHBlY3RzIGFuXG4gKiBlbGVtZW50IHRoYXQgaGFzIHRoZSBhY3R1YWwgaW1wbGVtZW50YXRpb24uIFRoZSBwcm9taXNlIHJlc29sdmVzIHdoZW4gdGhlXG4gKiBpbXBsZW1lbnRhdGlvbiBsb2FkZWQuIFVzZXJzIHNob3VsZCB0eXBpY2FsbHkgd3JhcCB0aGlzIGFzIGEgc3BlY2lhbCBwdXJwb3NlXG4gKiBmdW5jdGlvbiAoZS5nLiBgU2VydmljZXMudnN5bmNGb3Iod2luKWApIGZvciB0eXBlIHNhZmV0eSBhbmQgYmVjYXVzZSB0aGVcbiAqIGZhY3Rvcnkgc2hvdWxkIG5vdCBiZSBwYXNzZWQgYXJvdW5kLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBvZiB0aGUgc2VydmljZS5cbiAqIEByZXR1cm4geyFQcm9taXNlPCFPYmplY3Q+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VydmljZVByb21pc2Uod2luLCBpZCkge1xuICByZXR1cm4gZ2V0U2VydmljZVByb21pc2VJbnRlcm5hbCh3aW4sIGlkKTtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgYSBzZXJ2aWNlIG9yIG51bGwgd2l0aCB0aGUgZ2l2ZW4gaWQuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gKiBAcmV0dXJuIHs/T2JqZWN0fSBUaGUgc2VydmljZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEV4aXN0aW5nU2VydmljZU9yTnVsbCh3aW4sIGlkKSB7XG4gIHdpbiA9IGdldFRvcFdpbmRvdyh3aW4pO1xuICBpZiAoaXNTZXJ2aWNlUmVnaXN0ZXJlZCh3aW4sIGlkKSkge1xuICAgIHJldHVybiBnZXRTZXJ2aWNlSW50ZXJuYWwod2luLCBpZCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuXG4vKipcbiAqIExpa2UgZ2V0U2VydmljZVByb21pc2UgYnV0IHJldHVybnMgbnVsbCBpZiB0aGUgc2VydmljZSB3YXMgbmV2ZXIgcmVnaXN0ZXJlZC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAqIEByZXR1cm4gez9Qcm9taXNlPCFPYmplY3Q+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VydmljZVByb21pc2VPck51bGwod2luLCBpZCkge1xuICByZXR1cm4gZ2V0U2VydmljZVByb21pc2VPck51bGxJbnRlcm5hbCh3aW4sIGlkKTtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgYSBzZXJ2aWNlIGZvciB0aGUgZ2l2ZW4gaWQgYW5kIGFtcGRvYyAoYSBwZXItYW1wZG9jIHNpbmdsZXRvbikuXG4gKiBFeHBlY3RzIHNlcnZpY2UgYGlkYCB0byBiZSByZWdpc3RlcmVkLlxuICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAqIEByZXR1cm4ge1R9XG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VydmljZUZvckRvYyhlbGVtZW50T3JBbXBEb2MsIGlkKSB7XG4gIGNvbnN0IGFtcGRvYyA9IGdldEFtcGRvYyhlbGVtZW50T3JBbXBEb2MpO1xuICBjb25zdCBob2xkZXIgPSBnZXRBbXBkb2NTZXJ2aWNlSG9sZGVyKGFtcGRvYyk7XG4gIHJldHVybiBnZXRTZXJ2aWNlSW50ZXJuYWwoaG9sZGVyLCBpZCk7XG59XG5cblxuLyoqXG4gKiB0bDtkciAtLSBVc2UgZ2V0U2VydmljZUZvckRvYygpIGluc3RlYWQgb2YgdGhpcy5cbiAqXG4gKiBQcml2aWxlZ2VkIHZhcmlhbnQgb2YgZ2V0U2VydmljZUZvckRvYygpIHRoYXQgYWNjZXB0cyBub24tZWxlbWVudCBwYXJhbXMsXG4gKiBlLmcuIHdpbmRvdy5kb2N1bWVudC4gVGhpcyBpcyBjdXJyZW50bHkgbmVjZXNzYXJ5IGZvciBkb2MtbGV2ZWwgc2VydmljZXNcbiAqIHVzZWQgaW4gc3RhcnR1cCwgZS5nLiBDaHVua3MuIEV2ZW50dWFsbHkgd2Ugd2FudCB0byByZW1vdmUgdGhpcyBmdW5jdGlvblxuICogYW5kIGhhdmUgY2FsbGVycyBmaW5kIHRoZSBhcHByb3ByaWF0ZSBBbXBEb2MgYW5kIHVzZSBnZXRTZXJ2aWNlRm9yRG9jKCkuXG4gKlxuICogQHBhcmFtIHshTm9kZXwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gbm9kZU9yRG9jXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAqIEByZXR1cm4ge1R9XG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VydmljZUZvckRvY0RlcHJlY2F0ZWQobm9kZU9yRG9jLCBpZCkge1xuICBjb25zdCBhbXBkb2MgPSBnZXRBbXBkb2Mobm9kZU9yRG9jKTtcbiAgY29uc3QgaG9sZGVyID0gZ2V0QW1wZG9jU2VydmljZUhvbGRlcihhbXBkb2MpO1xuICByZXR1cm4gZ2V0U2VydmljZUludGVybmFsKGhvbGRlciwgaWQpO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2UgZm9yIGEgc2VydmljZSBmb3IgdGhlIGdpdmVuIGlkIGFuZCBhbXBkb2MuIEFsc28gZXhwZWN0c1xuICogYSBzZXJ2aWNlIHRoYXQgaGFzIHRoZSBhY3R1YWwgaW1wbGVtZW50YXRpb24uIFRoZSBwcm9taXNlIHJlc29sdmVzIHdoZW5cbiAqIHRoZSBpbXBsZW1lbnRhdGlvbiBsb2FkZWQuXG4gKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICogQHJldHVybiB7IVByb21pc2U8IU9iamVjdD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTZXJ2aWNlUHJvbWlzZUZvckRvYyhlbGVtZW50T3JBbXBEb2MsIGlkKSB7XG4gIHJldHVybiBnZXRTZXJ2aWNlUHJvbWlzZUludGVybmFsKFxuICAgICAgZ2V0QW1wZG9jU2VydmljZUhvbGRlcihlbGVtZW50T3JBbXBEb2MpLCBpZCk7XG59XG5cblxuLyoqXG4gKiBMaWtlIGdldFNlcnZpY2VQcm9taXNlRm9yRG9jIGJ1dCByZXR1cm5zIG51bGwgaWYgdGhlIHNlcnZpY2Ugd2FzIG5ldmVyXG4gKiByZWdpc3RlcmVkIGZvciB0aGlzIGFtcGRvYy5cbiAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gKiBAcmV0dXJuIHs/UHJvbWlzZTwhT2JqZWN0Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNlcnZpY2VQcm9taXNlT3JOdWxsRm9yRG9jKGVsZW1lbnRPckFtcERvYywgaWQpIHtcbiAgcmV0dXJuIGdldFNlcnZpY2VQcm9taXNlT3JOdWxsSW50ZXJuYWwoXG4gICAgICBnZXRBbXBkb2NTZXJ2aWNlSG9sZGVyKGVsZW1lbnRPckFtcERvYyksIGlkKTtcbn1cblxuLyoqXG4gKiBTZXQgdGhlIHBhcmVudCBhbmQgdG9wIHdpbmRvd3Mgb24gYSBjaGlsZCB3aW5kb3cgKGZyaWVuZGx5IGlmcmFtZSkuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHshV2luZG93fSBwYXJlbnRXaW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldFBhcmVudFdpbmRvdyh3aW4sIHBhcmVudFdpbikge1xuICB3aW4uX19BTVBfUEFSRU5UID0gcGFyZW50V2luO1xuICB3aW4uX19BTVBfVE9QID0gZ2V0VG9wV2luZG93KHBhcmVudFdpbik7XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBwYXJlbnQgd2luZG93IGZvciBhIGNoaWxkIHdpbmRvdyAoZnJpZW5kbHkgaWZyYW1lKS5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHshV2luZG93fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGFyZW50V2luZG93KHdpbikge1xuICByZXR1cm4gd2luLl9fQU1QX1BBUkVOVCB8fCB3aW47XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSB0b3Agd2luZG93IHdoZXJlIEFNUCBSdW50aW1lIGlzIGluc3RhbGxlZCBmb3IgYSBjaGlsZCB3aW5kb3dcbiAqIChmcmllbmRseSBpZnJhbWUpLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4geyFXaW5kb3d9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUb3BXaW5kb3cod2luKSB7XG4gIHJldHVybiB3aW4uX19BTVBfVE9QIHx8IHdpbjtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgdGhlIHBhcmVudCBcImZyaWVuZGx5XCIgaWZyYW1lIGlmIHRoZSBub2RlIGJlbG9uZ3MgdG8gYSBjaGlsZCB3aW5kb3cuXG4gKiBAcGFyYW0geyFOb2RlfSBub2RlXG4gKiBAcGFyYW0geyFXaW5kb3d9IHRvcFdpblxuICogQHJldHVybiB7P0hUTUxJRnJhbWVFbGVtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGFyZW50V2luZG93RnJhbWVFbGVtZW50KG5vZGUsIHRvcFdpbikge1xuICBjb25zdCBjaGlsZFdpbiA9IChub2RlLm93bmVyRG9jdW1lbnQgfHwgbm9kZSkuZGVmYXVsdFZpZXc7XG4gIGlmIChjaGlsZFdpbiAmJiBjaGlsZFdpbiAhPSB0b3BXaW4gJiYgZ2V0VG9wV2luZG93KGNoaWxkV2luKSA9PSB0b3BXaW4pIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7P0hUTUxJRnJhbWVFbGVtZW50fSAqLyAoY2hpbGRXaW4uZnJhbWVFbGVtZW50KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBJZ25vcmUgdGhlIGVycm9yLlxuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IU5vZGV8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IG5vZGVPckRvY1xuICogQHJldHVybiB7IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBbXBkb2Mobm9kZU9yRG9jKSB7XG4gIGlmIChub2RlT3JEb2Mubm9kZVR5cGUpIHtcbiAgICBjb25zdCB3aW4gPSB0b1dpbigvKiogQHR5cGUgeyFEb2N1bWVudH0gKi8gKFxuICAgICAgbm9kZU9yRG9jLm93bmVyRG9jdW1lbnQgfHwgbm9kZU9yRG9jKS5kZWZhdWx0Vmlldyk7XG4gICAgcmV0dXJuIGdldEFtcGRvY1NlcnZpY2Uod2luKS5nZXRBbXBEb2MoLyoqIEB0eXBlIHshTm9kZX0gKi8gKG5vZGVPckRvYykpO1xuICB9XG4gIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSAqLyAobm9kZU9yRG9jKTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IU5vZGV8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IG5vZGVPckRvY1xuICogQHJldHVybiB7IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N8IVdpbmRvd31cbiAqL1xuZnVuY3Rpb24gZ2V0QW1wZG9jU2VydmljZUhvbGRlcihub2RlT3JEb2MpIHtcbiAgY29uc3QgYW1wZG9jID0gZ2V0QW1wZG9jKG5vZGVPckRvYyk7XG4gIHJldHVybiBhbXBkb2MuaXNTaW5nbGVEb2MoKSA/IGFtcGRvYy53aW4gOiBhbXBkb2M7XG59XG5cblxuLyoqXG4gKiBUaGlzIGlzIGVzc2VudGlhbGx5IGEgZHVwbGljYXRlIG9mIGBhbXBkb2MuanNgLCBidXQgbmVjZXNzYXJ5IHRvIGF2b2lkXG4gKiBjaXJjdWxhciBkZXBlbmRlbmNpZXMuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2NTZXJ2aWNlfVxuICovXG5mdW5jdGlvbiBnZXRBbXBkb2NTZXJ2aWNlKHdpbikge1xuICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY1NlcnZpY2V9ICovIChcbiAgICBnZXRTZXJ2aWNlKHdpbiwgJ2FtcGRvYycpKTtcbn1cblxuXG4vKipcbiAqIEdldCBzZXJ2aWNlIGBpZGAgZnJvbSBgaG9sZGVyYC4gQXNzdW1lcyB0aGUgc2VydmljZVxuICogaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkLlxuICogQHBhcmFtIHshT2JqZWN0fSBob2xkZXIgT2JqZWN0IGhvbGRpbmcgdGhlIHNlcnZpY2UgaW5zdGFuY2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKiBAdGVtcGxhdGUgVFxuICovXG5mdW5jdGlvbiBnZXRTZXJ2aWNlSW50ZXJuYWwoaG9sZGVyLCBpZCkge1xuICBkZXYoKS5hc3NlcnQoaXNTZXJ2aWNlUmVnaXN0ZXJlZChob2xkZXIsIGlkKSxcbiAgICAgIGBFeHBlY3RlZCBzZXJ2aWNlICR7aWR9IHRvIGJlIHJlZ2lzdGVyZWRgKTtcbiAgY29uc3Qgc2VydmljZXMgPSBnZXRTZXJ2aWNlcyhob2xkZXIpO1xuICBjb25zdCBzID0gc2VydmljZXNbaWRdO1xuICBpZiAoIXMub2JqKSB7XG4gICAgZGV2KCkuYXNzZXJ0KHMuY3RvciwgYFNlcnZpY2UgJHtpZH0gcmVnaXN0ZXJlZCB3aXRob3V0IGN0b3Igbm9yIGltcGwuYCk7XG4gICAgZGV2KCkuYXNzZXJ0KHMuY29udGV4dCwgYFNlcnZpY2UgJHtpZH0gcmVnaXN0ZXJlZCB3aXRob3V0IGNvbnRleHQuYCk7XG4gICAgcy5vYmogPSBuZXcgcy5jdG9yKHMuY29udGV4dCk7XG4gICAgZGV2KCkuYXNzZXJ0KHMub2JqLCBgU2VydmljZSAke2lkfSBjb25zdHJ1Y3RlZCB0byBudWxsLmApO1xuICAgIHMuY3RvciA9IG51bGw7XG4gICAgcy5jb250ZXh0ID0gbnVsbDtcbiAgICAvLyBUaGUgc2VydmljZSBtYXkgaGF2ZSBiZWVuIHJlcXVlc3RlZCBhbHJlYWR5LCBpbiB3aGljaCBjYXNlIHdlIGhhdmUgYVxuICAgIC8vIHBlbmRpbmcgcHJvbWlzZSB3ZSBuZWVkIHRvIGZ1bGZpbGwuXG4gICAgaWYgKHMucmVzb2x2ZSkge1xuICAgICAgcy5yZXNvbHZlKHMub2JqKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHMub2JqO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IU9iamVjdH0gaG9sZGVyIE9iamVjdCBob2xkaW5nIHRoZSBzZXJ2aWNlIGluc3RhbmNlLlxuICogQHBhcmFtIHshV2luZG93fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBjb250ZXh0IFdpbiBvciBBbXBEb2MuXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKiBAcGFyYW0gez9mdW5jdGlvbihuZXc6T2JqZWN0LCAhV2luZG93KXw/ZnVuY3Rpb24obmV3Ok9iamVjdCwgIS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2MpfSBjdG9yIENvbnN0cnVjdG9yIGZ1bmN0aW9uIHRvIG5ldyB0aGUgc2VydmljZS4gQ2FsbGVkIHdpdGggY29udGV4dC5cbiAqL1xuZnVuY3Rpb24gcmVnaXN0ZXJTZXJ2aWNlSW50ZXJuYWwoaG9sZGVyLCBjb250ZXh0LCBpZCwgY3Rvcikge1xuICBjb25zdCBzZXJ2aWNlcyA9IGdldFNlcnZpY2VzKGhvbGRlcik7XG4gIGxldCBzID0gc2VydmljZXNbaWRdO1xuXG4gIGlmICghcykge1xuICAgIHMgPSBzZXJ2aWNlc1tpZF0gPSB7XG4gICAgICBvYmo6IG51bGwsXG4gICAgICBwcm9taXNlOiBudWxsLFxuICAgICAgcmVzb2x2ZTogbnVsbCxcbiAgICAgIGNvbnRleHQ6IG51bGwsXG4gICAgICBjdG9yOiBudWxsLFxuICAgIH07XG4gIH1cblxuICBpZiAocy5jdG9yIHx8IHMub2JqKSB7XG4gICAgLy8gU2VydmljZSBhbHJlYWR5IHJlZ2lzdGVyZWQuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcy5jdG9yID0gY3RvcjtcbiAgcy5jb250ZXh0ID0gY29udGV4dDtcblxuICAvLyBUaGUgc2VydmljZSBtYXkgaGF2ZSBiZWVuIHJlcXVlc3RlZCBhbHJlYWR5LCBpbiB3aGljaCBjYXNlIHRoZXJlIGlzIGFcbiAgLy8gcGVuZGluZyBwcm9taXNlIHRoYXQgbmVlZHMgdG8gZnVsZmlsbGVkLlxuICBpZiAocy5yZXNvbHZlKSB7XG4gICAgLy8gZ2V0U2VydmljZUludGVybmFsIHdpbGwgcmVzb2x2ZSB0aGUgcHJvbWlzZS5cbiAgICBnZXRTZXJ2aWNlSW50ZXJuYWwoaG9sZGVyLCBpZCk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0geyFPYmplY3R9IGhvbGRlclxuICogQHBhcmFtIHtzdHJpbmd9IGlkIG9mIHRoZSBzZXJ2aWNlLlxuICogQHJldHVybiB7IVByb21pc2U8IU9iamVjdD59XG4gKi9cbmZ1bmN0aW9uIGdldFNlcnZpY2VQcm9taXNlSW50ZXJuYWwoaG9sZGVyLCBpZCkge1xuICBjb25zdCBjYWNoZWQgPSBnZXRTZXJ2aWNlUHJvbWlzZU9yTnVsbEludGVybmFsKGhvbGRlciwgaWQpO1xuICBpZiAoY2FjaGVkKSB7XG4gICAgcmV0dXJuIGNhY2hlZDtcbiAgfVxuICAvLyBTZXJ2aWNlIGlzIG5vdCByZWdpc3RlcmVkLlxuXG4gIC8vIFRPRE8oQGNyYW1mb3JjZSk6IEFkZCBhIGNoZWNrIHRoYXQgaWYgdGhlIGVsZW1lbnQgaXMgZXZlbnR1YWxseSByZWdpc3RlcmVkXG4gIC8vIHRoYXQgdGhlIHNlcnZpY2UgaXMgYWN0dWFsbHkgcHJvdmlkZWQgYW5kIHRoaXMgcHJvbWlzZSByZXNvbHZlcy5cbiAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcbiAgY29uc3Qge3Byb21pc2UsIHJlc29sdmV9ID0gZGVmZXJyZWQ7XG5cbiAgY29uc3Qgc2VydmljZXMgPSBnZXRTZXJ2aWNlcyhob2xkZXIpO1xuICBzZXJ2aWNlc1tpZF0gPSB7XG4gICAgb2JqOiBudWxsLFxuICAgIHByb21pc2UsXG4gICAgcmVzb2x2ZSxcbiAgICBjb250ZXh0OiBudWxsLFxuICAgIGN0b3I6IG51bGwsXG4gIH07XG4gIHJldHVybiBwcm9taXNlO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2UgZm9yIHNlcnZpY2UgYGlkYCBpZiB0aGUgc2VydmljZSBoYXMgYmVlbiByZWdpc3RlcmVkXG4gKiBvbiBgaG9sZGVyYC5cbiAqIEBwYXJhbSB7IU9iamVjdH0gaG9sZGVyXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKiBAcmV0dXJuIHs/UHJvbWlzZTwhT2JqZWN0Pn1cbiAqL1xuZnVuY3Rpb24gZ2V0U2VydmljZVByb21pc2VPck51bGxJbnRlcm5hbChob2xkZXIsIGlkKSB7XG4gIGNvbnN0IHNlcnZpY2VzID0gZ2V0U2VydmljZXMoaG9sZGVyKTtcbiAgY29uc3QgcyA9IHNlcnZpY2VzW2lkXTtcbiAgaWYgKHMpIHtcbiAgICBpZiAocy5wcm9taXNlKSB7XG4gICAgICByZXR1cm4gcy5wcm9taXNlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJbnN0YW50aWF0ZSBzZXJ2aWNlIGlmIG5vdCBhbHJlYWR5IGluc3RhbnRpYXRlZC5cbiAgICAgIGdldFNlcnZpY2VJbnRlcm5hbChob2xkZXIsIGlkKTtcbiAgICAgIHJldHVybiBzLnByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoLyoqIEB0eXBlIHshT2JqZWN0fSAqLyAocy5vYmopKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBvYmplY3QgdGhhdCBob2xkcyB0aGUgc2VydmljZXMgcmVnaXN0ZXJlZCBpbiBhIGhvbGRlci5cbiAqIEBwYXJhbSB7IU9iamVjdH0gaG9sZGVyXG4gKiBAcmV0dXJuIHshT2JqZWN0PHN0cmluZywhU2VydmljZUhvbGRlckRlZj59XG4gKi9cbmZ1bmN0aW9uIGdldFNlcnZpY2VzKGhvbGRlcikge1xuICBsZXQge3NlcnZpY2VzfSA9IGhvbGRlcjtcbiAgaWYgKCFzZXJ2aWNlcykge1xuICAgIHNlcnZpY2VzID0gaG9sZGVyLnNlcnZpY2VzID0ge307XG4gIH1cbiAgcmV0dXJuIHNlcnZpY2VzO1xufVxuXG5cbi8qKlxuICogV2hldGhlciB0aGUgc3BlY2lmaWVkIHNlcnZpY2UgaW1wbGVtZW50cyBgRGlzcG9zYWJsZWAgaW50ZXJmYWNlLlxuICogQHBhcmFtIHshT2JqZWN0fSBzZXJ2aWNlXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNEaXNwb3NhYmxlKHNlcnZpY2UpIHtcbiAgcmV0dXJuIHR5cGVvZiBzZXJ2aWNlLmRpc3Bvc2UgPT0gJ2Z1bmN0aW9uJztcbn1cblxuXG4vKipcbiAqIEFzc2VydHMgdGhhdCB0aGUgc3BlY2lmaWVkIHNlcnZpY2UgaW1wbGVtZW50cyBgRGlzcG9zYWJsZWAgaW50ZXJmYWNlIGFuZFxuICogdHlwZWNhc3RzIHRoZSBpbnN0YW5jZSB0byBgRGlzcG9zYWJsZWAuXG4gKiBAcGFyYW0geyFPYmplY3R9IHNlcnZpY2VcbiAqIEByZXR1cm4geyFEaXNwb3NhYmxlfVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0RGlzcG9zYWJsZShzZXJ2aWNlKSB7XG4gIGRldigpLmFzc2VydChpc0Rpc3Bvc2FibGUoc2VydmljZSksICdyZXF1aXJlZCB0byBpbXBsZW1lbnQgRGlzcG9zYWJsZScpO1xuICByZXR1cm4gLyoqIEB0eXBlIHshRGlzcG9zYWJsZX0gKi8gKHNlcnZpY2UpO1xufVxuXG5cbi8qKlxuICogRGlzcG9zZXMgYWxsIGRpc3Bvc2FibGUgKGltcGxlbWVudHMgYERpc3Bvc2FibGVgIGludGVyZmFjZSkgc2VydmljZXMgaW5cbiAqIGFtcGRvYyBzY29wZS5cbiAqIEBwYXJhbSB7IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGFtcGRvY1xuICovXG5leHBvcnQgZnVuY3Rpb24gZGlzcG9zZVNlcnZpY2VzRm9yRG9jKGFtcGRvYykge1xuICBkaXNwb3NlU2VydmljZXNJbnRlcm5hbChhbXBkb2MpO1xufVxuXG5cbi8qKlxuICogRGlzcG9zZXMgYWxsIGRpc3Bvc2FibGUgKGltcGxlbWVudHMgYERpc3Bvc2FibGVgIGludGVyZmFjZSkgc2VydmljZXMgaW5cbiAqIGVtYmVkIHNjb3BlLlxuICogQHBhcmFtIHshV2luZG93fSBlbWJlZFdpblxuICovXG5leHBvcnQgZnVuY3Rpb24gZGlzcG9zZVNlcnZpY2VzRm9yRW1iZWQoZW1iZWRXaW4pIHtcbiAgZGlzcG9zZVNlcnZpY2VzSW50ZXJuYWwoZW1iZWRXaW4pO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHshT2JqZWN0fSBob2xkZXIgT2JqZWN0IGhvbGRpbmcgdGhlIHNlcnZpY2UgaW5zdGFuY2VzLlxuICovXG5mdW5jdGlvbiBkaXNwb3NlU2VydmljZXNJbnRlcm5hbChob2xkZXIpIHtcbiAgLy8gVE9ETyhkdm95dGVua28pOiBDb25zaWRlciBtYXJraW5nIGhvbGRlciBhcyBkZXN0cm95ZWQgZm9yIGxhdGVyLWFycml2aW5nXG4gIC8vIHNlcnZpY2UgdG8gYmUgY2FuY2VsZWQgYXV0b21hdGljYWxseS5cbiAgY29uc3Qgc2VydmljZXMgPSBnZXRTZXJ2aWNlcyhob2xkZXIpO1xuICBmb3IgKGNvbnN0IGlkIGluIHNlcnZpY2VzKSB7XG4gICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2VydmljZXMsIGlkKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGNvbnN0IHNlcnZpY2VIb2xkZXIgPSBzZXJ2aWNlc1tpZF07XG4gICAgaWYgKHNlcnZpY2VIb2xkZXIub2JqKSB7XG4gICAgICBkaXNwb3NlU2VydmljZUludGVybmFsKGlkLCBzZXJ2aWNlSG9sZGVyLm9iaik7XG4gICAgfSBlbHNlIGlmIChzZXJ2aWNlSG9sZGVyLnByb21pc2UpIHtcbiAgICAgIHNlcnZpY2VIb2xkZXIucHJvbWlzZS50aGVuKFxuICAgICAgICAgIGluc3RhbmNlID0+IGRpc3Bvc2VTZXJ2aWNlSW50ZXJuYWwoaWQsIGluc3RhbmNlKSk7XG4gICAgfVxuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAqIEBwYXJhbSB7IU9iamVjdH0gc2VydmljZVxuICovXG5mdW5jdGlvbiBkaXNwb3NlU2VydmljZUludGVybmFsKGlkLCBzZXJ2aWNlKSB7XG4gIGlmICghaXNEaXNwb3NhYmxlKHNlcnZpY2UpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHRyeSB7XG4gICAgYXNzZXJ0RGlzcG9zYWJsZShzZXJ2aWNlKS5kaXNwb3NlKCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBFbnN1cmUgdGhhdCBhIGZhaWx1cmUgdG8gZGlzcG9zZSBhIHNlcnZpY2UgZG9lcyBub3QgZGlzcnVwdCBvdGhlclxuICAgIC8vIHNlcnZpY2VzLlxuICAgIGRldigpLmVycm9yKCdTRVJWSUNFJywgJ2ZhaWxlZCB0byBkaXNwb3NlIHNlcnZpY2UnLCBpZCwgZSk7XG4gIH1cbn1cblxuXG4vKipcbiAqIFdoZXRoZXIgdGhlIHNwZWNpZmllZCBzZXJ2aWNlIGltcGxlbWVudHMgYEVtYmVkZGFibGVTZXJ2aWNlYCBpbnRlcmZhY2UuXG4gKiBAcGFyYW0geyFPYmplY3R9IHNlcnZpY2VcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0VtYmVkZGFibGUoc2VydmljZSkge1xuICByZXR1cm4gdHlwZW9mIHNlcnZpY2UuYWRvcHRFbWJlZFdpbmRvdyA9PSAnZnVuY3Rpb24nO1xufVxuXG5cbi8qKlxuICogQWRvcHRzIGFuIGVtYmVkZGFibGUgKGltcGxlbWVudHMgYEVtYmVkZGFibGVTZXJ2aWNlYCBpbnRlcmZhY2UpIHNlcnZpY2VcbiAqIGluIGVtYmVkIHNjb3BlLlxuICogQHBhcmFtIHshV2luZG93fSBlbWJlZFdpblxuICogQHBhcmFtIHtzdHJpbmd9IHNlcnZpY2VJZFxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRvcHRTZXJ2aWNlRm9yRW1iZWQoZW1iZWRXaW4sIHNlcnZpY2VJZCkge1xuICBjb25zdCBhZG9wdGVkID0gYWRvcHRTZXJ2aWNlRm9yRW1iZWRJZkVtYmVkZGFibGUoZW1iZWRXaW4sIHNlcnZpY2VJZCk7XG4gIGRldigpLmFzc2VydChhZG9wdGVkLCBgU2VydmljZSAke3NlcnZpY2VJZH0gbm90IGZvdW5kIG9uIHBhcmVudCBgICtcbiAgICAgICdvciBkb2VzblxcJ3QgaW1wbGVtZW50IEVtYmVkZGFibGVTZXJ2aWNlLicpO1xufVxuXG5cbi8qKlxuICogQWRvcHRzIGFuIGVtYmVkZGFibGUgKGltcGxlbWVudHMgYEVtYmVkZGFibGVTZXJ2aWNlYCBpbnRlcmZhY2UpIHNlcnZpY2VcbiAqIGluIGVtYmVkIHNjb3BlLlxuICogQHBhcmFtIHshV2luZG93fSBlbWJlZFdpblxuICogQHBhcmFtIHtzdHJpbmd9IHNlcnZpY2VJZFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkb3B0U2VydmljZUZvckVtYmVkSWZFbWJlZGRhYmxlKGVtYmVkV2luLCBzZXJ2aWNlSWQpIHtcbiAgY29uc3QgZnJhbWVFbGVtZW50ID0gLyoqIEB0eXBlIHshTm9kZX0gKi8gKGRldigpLmFzc2VydChcbiAgICAgIGVtYmVkV2luLmZyYW1lRWxlbWVudCxcbiAgICAgICdmcmFtZUVsZW1lbnQgbm90IGZvdW5kIGZvciBlbWJlZCcpKTtcbiAgY29uc3QgYW1wZG9jID0gZ2V0QW1wZG9jKGZyYW1lRWxlbWVudCk7XG4gIGNvbnN0IGhvbGRlciA9IGdldEFtcGRvY1NlcnZpY2VIb2xkZXIoYW1wZG9jKTtcbiAgaWYgKCFpc1NlcnZpY2VSZWdpc3RlcmVkKGhvbGRlciwgc2VydmljZUlkKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCBzZXJ2aWNlID0gZ2V0U2VydmljZUZvckRvY0RlcHJlY2F0ZWQoZnJhbWVFbGVtZW50LCBzZXJ2aWNlSWQpO1xuICBpZiAoIWlzRW1iZWRkYWJsZShzZXJ2aWNlKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBzZXJ2aWNlLmFkb3B0RW1iZWRXaW5kb3coZW1iZWRXaW4pO1xuICByZXR1cm4gdHJ1ZTtcbn1cblxuXG4vKipcbiAqIFJlc2V0cyBhIHNpbmdsZSBzZXJ2aWNlLCBzbyBpdCBnZXRzIHJlY3JlYXRlZCBvbiBuZXh0IGdldFNlcnZpY2UgaW52b2NhdGlvbi5cbiAqIEBwYXJhbSB7IU9iamVjdH0gaG9sZGVyXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNldFNlcnZpY2VGb3JUZXN0aW5nKGhvbGRlciwgaWQpIHtcbiAgaWYgKGhvbGRlci5zZXJ2aWNlcykge1xuICAgIGhvbGRlci5zZXJ2aWNlc1tpZF0gPSBudWxsO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHshT2JqZWN0fSBob2xkZXIgT2JqZWN0IGhvbGRpbmcgdGhlIHNlcnZpY2UgaW5zdGFuY2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc1NlcnZpY2VSZWdpc3RlcmVkKGhvbGRlciwgaWQpIHtcbiAgY29uc3Qgc2VydmljZSA9IGhvbGRlci5zZXJ2aWNlcyAmJiBob2xkZXIuc2VydmljZXNbaWRdO1xuICAvLyBBbGwgcmVnaXN0ZXJlZCBzZXJ2aWNlcyBtdXN0IGhhdmUgYW4gaW1wbGVtZW50YXRpb24gb3IgYSBjb25zdHJ1Y3Rvci5cbiAgcmV0dXJuICEhKHNlcnZpY2UgJiYgKHNlcnZpY2UuY3RvciB8fCBzZXJ2aWNlLm9iaikpO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gIGdldEFtcGRvYyxcbiAgZ2V0RXhpc3RpbmdTZXJ2aWNlRm9yRG9jSW5FbWJlZFNjb3BlLFxuICBnZXRFeGlzdGluZ1NlcnZpY2VPck51bGwsXG4gIGdldFNlcnZpY2UsXG4gIGdldFNlcnZpY2VGb3JEb2MsXG4gIGdldFNlcnZpY2VGb3JEb2NEZXByZWNhdGVkLFxuICBnZXRTZXJ2aWNlUHJvbWlzZUZvckRvYyxcbn0gZnJvbSAnLi9zZXJ2aWNlJztcbmltcG9ydCB7XG4gIGdldEVsZW1lbnRTZXJ2aWNlRm9yRG9jLFxuICBnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlLFxuICBnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlRm9yRG9jLFxuICBnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlRm9yRG9jSW5FbWJlZFNjb3BlLFxufSBmcm9tICcuL2VsZW1lbnQtc2VydmljZSc7XG5cbi8qKiBAdHlwZWRlZiB7IS4uL2V4dGVuc2lvbnMvYW1wLXN1YnNjcmlwdGlvbnMvMC4xL2FtcC1zdWJzY3JpcHRpb25zLlN1YnNjcmlwdGlvblNlcnZpY2V9ICovXG5leHBvcnQgbGV0IFN1YnNjcmlwdGlvblNlcnZpY2U7XG5cbmV4cG9ydCBjbGFzcyBTZXJ2aWNlcyB7XG4gIC8qKlxuICAgKiBIaW50OiBBZGQgZXh0ZW5zaW9ucyBmb2xkZXIgcGF0aCB0byBjb21waWxlLmpzIHdpdGhcbiAgICogd2FybmluZ3MgY2Fubm90IGZpbmQgbW9kdWxlcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgQWNjZXNzIHNlcnZpY2UuXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhLi4vZXh0ZW5zaW9ucy9hbXAtYWNjZXNzLzAuMS9hbXAtYWNjZXNzLkFjY2Vzc1NlcnZpY2U+fVxuICAgKi9cbiAgc3RhdGljIGFjY2Vzc1NlcnZpY2VGb3JEb2MoZWxlbWVudE9yQW1wRG9jKSB7XG4gICAgcmV0dXJuICgvKiogQHR5cGUgeyFQcm9taXNlPCEuLi9leHRlbnNpb25zL2FtcC1hY2Nlc3MvMC4xL2FtcC1hY2Nlc3MuQWNjZXNzU2VydmljZT59ICovIChcbiAgICAgIGdldEVsZW1lbnRTZXJ2aWNlRm9yRG9jKGVsZW1lbnRPckFtcERvYywgJ2FjY2VzcycsICdhbXAtYWNjZXNzJykpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIEFjY2VzcyBzZXJ2aWNlIG9yIGEgcHJvbWlzZSBmb3IgbnVsbCBpZiB0aGVcbiAgICogc2VydmljZSBpcyBub3QgYXZhaWxhYmxlIG9uIHRoZSBjdXJyZW50IHBhZ2UuXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZTw/Li4vZXh0ZW5zaW9ucy9hbXAtYWNjZXNzLzAuMS9hbXAtYWNjZXNzLkFjY2Vzc1NlcnZpY2U+fVxuICAgKi9cbiAgc3RhdGljIGFjY2Vzc1NlcnZpY2VGb3JEb2NPck51bGwoZWxlbWVudE9yQW1wRG9jKSB7XG4gICAgcmV0dXJuICgvKiogQHR5cGUgeyFQcm9taXNlPD8uLi9leHRlbnNpb25zL2FtcC1hY2Nlc3MvMC4xL2FtcC1hY2Nlc3MuQWNjZXNzU2VydmljZT59ICovIChcbiAgICAgIGdldEVsZW1lbnRTZXJ2aWNlSWZBdmFpbGFibGVGb3JEb2MoZWxlbWVudE9yQW1wRG9jLCAnYWNjZXNzJyxcbiAgICAgICAgICAnYW1wLWFjY2VzcycpKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSBTdWJzY3JpcHRpb25zIHNlcnZpY2UuXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhU3Vic2NyaXB0aW9uU2VydmljZT59XG4gICAqL1xuICBzdGF0aWMgc3Vic2NyaXB0aW9uc1NlcnZpY2VGb3JEb2MoZWxlbWVudE9yQW1wRG9jKSB7XG4gICAgcmV0dXJuICgvKiogQHR5cGUgeyFQcm9taXNlPCFTdWJzY3JpcHRpb25TZXJ2aWNlPn0gKi8gKFxuICAgICAgZ2V0RWxlbWVudFNlcnZpY2VGb3JEb2MoZWxlbWVudE9yQW1wRG9jLCAnc3Vic2NyaXB0aW9ucycsXG4gICAgICAgICAgJ2FtcC1zdWJzY3JpcHRpb25zJykpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIFN1YnNjcmlwdGlvbnMgc2VydmljZS5cbiAgICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gICAqIEByZXR1cm4geyFQcm9taXNlPD9TdWJzY3JpcHRpb25TZXJ2aWNlPn1cbiAgICovXG4gIHN0YXRpYyBzdWJzY3JpcHRpb25zU2VydmljZUZvckRvY09yTnVsbChlbGVtZW50T3JBbXBEb2MpIHtcbiAgICByZXR1cm4gKC8qKiBAdHlwZSB7IVByb21pc2U8P1N1YnNjcmlwdGlvblNlcnZpY2U+fSAqLyAoXG4gICAgICBnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlRm9yRG9jKGVsZW1lbnRPckFtcERvYywgJ3N1YnNjcmlwdGlvbnMnLFxuICAgICAgICAgICdhbXAtc3Vic2NyaXB0aW9ucycpKSk7XG4gIH1cblxuICAvKipcbiAgICogVW5saWtlIG1vc3Qgc2VydmljZSBnZXR0ZXJzLCBwYXNzaW5nIGBOb2RlYCBpcyBuZWNlc3NhcnkgZm9yIHNvbWUgRklFLXNjb3BlXG4gICAqIHNlcnZpY2VzIHNpbmNlIHNvbWV0aW1lcyB3ZSBvbmx5IGhhdmUgdGhlIEZJRSBEb2N1bWVudCBmb3IgY29udGV4dC5cbiAgICogQHBhcmFtIHshTm9kZXwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gbm9kZU9yRG9jXG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvYWN0aW9uLWltcGwuQWN0aW9uU2VydmljZX1cbiAgICovXG4gIHN0YXRpYyBhY3Rpb25TZXJ2aWNlRm9yRG9jKG5vZGVPckRvYykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UvYWN0aW9uLWltcGwuQWN0aW9uU2VydmljZX0gKi8gKFxuICAgICAgZ2V0RXhpc3RpbmdTZXJ2aWNlRm9yRG9jSW5FbWJlZFNjb3BlKFxuICAgICAgICAgIG5vZGVPckRvYywgJ2FjdGlvbicsIC8qIG9wdF9mYWxsYmFja1RvVG9wV2luICovIHRydWUpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAgICogQHJldHVybiB7IVByb21pc2U8IUFjdGl2aXR5Pn1cbiAgICovXG4gIHN0YXRpYyBhY3Rpdml0eUZvckRvYyhlbGVtZW50T3JBbXBEb2MpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZTwhQWN0aXZpdHk+fSAqLyAoXG4gICAgICBnZXRFbGVtZW50U2VydmljZUZvckRvYyhlbGVtZW50T3JBbXBEb2MsICdhY3Rpdml0eScsICdhbXAtYW5hbHl0aWNzJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGdsb2JhbCBpbnN0YW5jZSBvZiB0aGUgYEFtcERvY1NlcnZpY2VgIHNlcnZpY2UgdGhhdCBjYW4gYmVcbiAgICogdXNlZCB0byByZXNvbHZlIGFuIGFtcGRvYyBmb3IgYW55IG5vZGU6IGVpdGhlciBpbiB0aGUgc2luZ2xlLWRvYyBvclxuICAgKiBzaGFkb3ctZG9jIGVudmlyb25tZW50LlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpbmRvd1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY1NlcnZpY2V9XG4gICAqL1xuICBzdGF0aWMgYW1wZG9jU2VydmljZUZvcih3aW5kb3cpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY1NlcnZpY2V9ICovIChcbiAgICAgIGdldFNlcnZpY2Uod2luZG93LCAnYW1wZG9jJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIEFtcERvYyBmb3IgdGhlIHNwZWNpZmllZCBjb250ZXh0IG5vZGUuXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY31cbiAgICovXG4gIHN0YXRpYyBhbXBkb2MoZWxlbWVudE9yQW1wRG9jKSB7XG4gICAgcmV0dXJuIGdldEFtcGRvYyhlbGVtZW50T3JBbXBEb2MpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBsb2FkQW5hbHl0aWNzXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCEuLi9leHRlbnNpb25zL2FtcC1hbmFseXRpY3MvMC4xL2luc3RydW1lbnRhdGlvbi5JbnN0cnVtZW50YXRpb25TZXJ2aWNlPn1cbiAgICovXG4gIHN0YXRpYyBhbmFseXRpY3NGb3JEb2MoZWxlbWVudE9yQW1wRG9jLCBsb2FkQW5hbHl0aWNzID0gZmFsc2UpIHtcbiAgICBpZiAobG9hZEFuYWx5dGljcykge1xuICAgICAgLy8gR2V0IEV4dGVuc2lvbnMgc2VydmljZSBhbmQgZm9yY2UgbG9hZCBhbmFseXRpY3MgZXh0ZW5zaW9uLlxuICAgICAgY29uc3QgYW1wZG9jID0gZ2V0QW1wZG9jKGVsZW1lbnRPckFtcERvYyk7XG4gICAgICBTZXJ2aWNlcy5leHRlbnNpb25zRm9yKGFtcGRvYy53aW4pLi8qT0sqL2luc3RhbGxFeHRlbnNpb25Gb3JEb2MoXG4gICAgICAgICAgYW1wZG9jLCAnYW1wLWFuYWx5dGljcycpO1xuICAgIH1cbiAgICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZTwhLi4vZXh0ZW5zaW9ucy9hbXAtYW5hbHl0aWNzLzAuMS9pbnN0cnVtZW50YXRpb24uSW5zdHJ1bWVudGF0aW9uU2VydmljZT59ICovIChcbiAgICAgIGdldEVsZW1lbnRTZXJ2aWNlRm9yRG9jKGVsZW1lbnRPckFtcERvYywgJ2FtcC1hbmFseXRpY3MtaW5zdHJ1bWVudGF0aW9uJyxcbiAgICAgICAgICAnYW1wLWFuYWx5dGljcycpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAgICogQHJldHVybiB7IVByb21pc2U8Py4uL2V4dGVuc2lvbnMvYW1wLWFuYWx5dGljcy8wLjEvaW5zdHJ1bWVudGF0aW9uLkluc3RydW1lbnRhdGlvblNlcnZpY2U+fVxuICAgKi9cbiAgc3RhdGljIGFuYWx5dGljc0ZvckRvY09yTnVsbChlbGVtZW50T3JBbXBEb2MpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZTw/Li4vZXh0ZW5zaW9ucy9hbXAtYW5hbHl0aWNzLzAuMS9pbnN0cnVtZW50YXRpb24uSW5zdHJ1bWVudGF0aW9uU2VydmljZT59ICovIChcbiAgICAgIGdldEVsZW1lbnRTZXJ2aWNlSWZBdmFpbGFibGVGb3JEb2MoZWxlbWVudE9yQW1wRG9jLFxuICAgICAgICAgICdhbXAtYW5hbHl0aWNzLWluc3RydW1lbnRhdGlvbicsICdhbXAtYW5hbHl0aWNzJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luZG93XG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvYmF0Y2hlZC14aHItaW1wbC5CYXRjaGVkWGhyfVxuICAgKi9cbiAgc3RhdGljIGJhdGNoZWRYaHJGb3Iod2luZG93KSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS9iYXRjaGVkLXhoci1pbXBsLkJhdGNoZWRYaHJ9ICovIChcbiAgICAgIGdldFNlcnZpY2Uod2luZG93LCAnYmF0Y2hlZC14aHInKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gICAqIEByZXR1cm4geyFQcm9taXNlPD8uLi9leHRlbnNpb25zL2FtcC1iaW5kLzAuMS9iaW5kLWltcGwuQmluZD59XG4gICAqL1xuICBzdGF0aWMgYmluZEZvckRvY09yTnVsbChlbGVtZW50T3JBbXBEb2MpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZTw/Li4vZXh0ZW5zaW9ucy9hbXAtYmluZC8wLjEvYmluZC1pbXBsLkJpbmQ+fSAqLyAoXG4gICAgICBnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlRm9yRG9jSW5FbWJlZFNjb3BlKFxuICAgICAgICAgIGVsZW1lbnRPckFtcERvYywgJ2JpbmQnLCAnYW1wLWJpbmQnKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCEuL3NlcnZpY2UvY2lkLWltcGwuQ2lkPn1cbiAgICovXG4gIHN0YXRpYyBjaWRGb3JEb2MoZWxlbWVudE9yQW1wRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2U8IS4vc2VydmljZS9jaWQtaW1wbC5DaWQ+fSAqLyAoXG4gICAgICBnZXRTZXJ2aWNlUHJvbWlzZUZvckRvYyhlbGVtZW50T3JBbXBEb2MsICdjaWQnKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvbmF2aWdhdGlvbi5OYXZpZ2F0aW9ufVxuICAgKi9cbiAgc3RhdGljIG5hdmlnYXRpb25Gb3JEb2MoZWxlbWVudE9yQW1wRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS9uYXZpZ2F0aW9uLk5hdmlnYXRpb259ICovIChcbiAgICAgIGdldFNlcnZpY2VGb3JEb2MoZWxlbWVudE9yQW1wRG9jLCAnbmF2aWdhdGlvbicpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpbmRvd1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL2NyeXB0by1pbXBsLkNyeXB0b31cbiAgICovXG4gIHN0YXRpYyBjcnlwdG9Gb3Iod2luZG93KSB7XG4gICAgcmV0dXJuICgvKiogQHR5cGUgeyEuL3NlcnZpY2UvY3J5cHRvLWltcGwuQ3J5cHRvfSAqLyAoXG4gICAgICBnZXRTZXJ2aWNlKHdpbmRvdywgJ2NyeXB0bycpKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvZG9jdW1lbnQtaW5mby1pbXBsLkRvY3VtZW50SW5mb0RlZn0gSW5mbyBhYm91dCB0aGUgZG9jXG4gICAqL1xuICBzdGF0aWMgZG9jdW1lbnRJbmZvRm9yRG9jKGVsZW1lbnRPckFtcERvYykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UvZG9jdW1lbnQtaW5mby1pbXBsLkRvY0luZm99ICovIChcbiAgICAgIGdldFNlcnZpY2VGb3JEb2MoZWxlbWVudE9yQW1wRG9jLCAnZG9jdW1lbnRJbmZvJykpLmdldCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luZG93XG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvZG9jdW1lbnQtc3RhdGUuRG9jdW1lbnRTdGF0ZX1cbiAgICovXG4gIHN0YXRpYyBkb2N1bWVudFN0YXRlRm9yKHdpbmRvdykge1xuICAgIHJldHVybiBnZXRTZXJ2aWNlKHdpbmRvdywgJ2RvY3VtZW50U3RhdGUnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpbmRvd1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL2V4dGVuc2lvbnMtaW1wbC5FeHRlbnNpb25zfVxuICAgKi9cbiAgc3RhdGljIGV4dGVuc2lvbnNGb3Iod2luZG93KSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS9leHRlbnNpb25zLWltcGwuRXh0ZW5zaW9uc30gKi8gKFxuICAgICAgZ2V0U2VydmljZSh3aW5kb3csICdleHRlbnNpb25zJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgc2VydmljZSBpbXBsZW1lbnRlZCBpbiBzZXJ2aWNlL2hpc3RvcnktaW1wbC5cbiAgICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvaGlzdG9yeS1pbXBsLkhpc3Rvcnl9XG4gICAqL1xuICBzdGF0aWMgaGlzdG9yeUZvckRvYyhlbGVtZW50T3JBbXBEb2MpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL2hpc3RvcnktaW1wbC5IaXN0b3J5fSAqLyAoXG4gICAgICBnZXRTZXJ2aWNlRm9yRG9jKGVsZW1lbnRPckFtcERvYywgJ2hpc3RvcnknKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICogQHJldHVybiB7IS4vaW5wdXQuSW5wdXR9XG4gICAqL1xuICBzdGF0aWMgaW5wdXRGb3Iod2luKSB7XG4gICAgcmV0dXJuIGdldFNlcnZpY2Uod2luLCAnaW5wdXQnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAgICogQHJldHVybiB7IS4vc2VydmljZS9sYXllcnMtaW1wbC5MYXlvdXRMYXllcnN9XG4gICAqL1xuICBzdGF0aWMgbGF5ZXJzRm9yRG9jKGVsZW1lbnRPckFtcERvYykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UvbGF5ZXJzLWltcGwuTGF5b3V0TGF5ZXJzfSAqLyAoXG4gICAgICBnZXRTZXJ2aWNlRm9yRG9jKGVsZW1lbnRPckFtcERvYywgJ2xheWVycycpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpbmRvd1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL3BlcmZvcm1hbmNlLWltcGwuUGVyZm9ybWFuY2V9XG4gICAqL1xuICBzdGF0aWMgcGVyZm9ybWFuY2VGb3Iod2luZG93KSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS9wZXJmb3JtYW5jZS1pbXBsLlBlcmZvcm1hbmNlfSovIChcbiAgICAgIGdldFNlcnZpY2Uod2luZG93LCAncGVyZm9ybWFuY2UnKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5kb3dcbiAgICogQHJldHVybiB7IS4vc2VydmljZS9wZXJmb3JtYW5jZS1pbXBsLlBlcmZvcm1hbmNlfVxuICAgKi9cbiAgc3RhdGljIHBlcmZvcm1hbmNlRm9yT3JOdWxsKHdpbmRvdykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UvcGVyZm9ybWFuY2UtaW1wbC5QZXJmb3JtYW5jZX0qLyAoXG4gICAgICBnZXRFeGlzdGluZ1NlcnZpY2VPck51bGwod2luZG93LCAncGVyZm9ybWFuY2UnKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5kb3dcbiAgICogQHJldHVybiB7IS4vc2VydmljZS9wbGF0Zm9ybS1pbXBsLlBsYXRmb3JtfVxuICAgKi9cbiAgc3RhdGljIHBsYXRmb3JtRm9yKHdpbmRvdykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UvcGxhdGZvcm0taW1wbC5QbGF0Zm9ybX0gKi8gKFxuICAgICAgZ2V0U2VydmljZSh3aW5kb3csICdwbGF0Zm9ybScpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VzIGdldFNlcnZpY2VGb3JEb2NEZXByZWNhdGVkKCkgc2luY2UgUmVzb3VyY2VzIGlzIGEgc3RhcnR1cCBzZXJ2aWNlLlxuICAgKiBAcGFyYW0geyFOb2RlfCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBub2RlT3JEb2NcbiAgICogQHJldHVybiB7IS4vc2VydmljZS9yZXNvdXJjZXMtaW1wbC5SZXNvdXJjZXN9XG4gICAqL1xuICBzdGF0aWMgcmVzb3VyY2VzRm9yRG9jKG5vZGVPckRvYykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UvcmVzb3VyY2VzLWltcGwuUmVzb3VyY2VzfSAqLyAoXG4gICAgICBnZXRTZXJ2aWNlRm9yRG9jRGVwcmVjYXRlZChub2RlT3JEb2MsICdyZXNvdXJjZXMnKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICogQHJldHVybiB7P1Byb21pc2U8P3tpbmNvbWluZ0ZyYWdtZW50OiBzdHJpbmcsIG91dGdvaW5nRnJhZ21lbnQ6IHN0cmluZ30+fVxuICAgKi9cbiAgc3RhdGljIHNoYXJlVHJhY2tpbmdGb3JPck51bGwod2luKSB7XG4gICAgcmV0dXJuICgvKiogQHR5cGUgeyFQcm9taXNlPD97aW5jb21pbmdGcmFnbWVudDogc3RyaW5nLCBvdXRnb2luZ0ZyYWdtZW50OiBzdHJpbmd9Pn0gKi8gKFxuICAgICAgZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZSh3aW4sICdzaGFyZS10cmFja2luZycsXG4gICAgICAgICAgJ2FtcC1zaGFyZS10cmFja2luZycsIHRydWUpKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICogQHJldHVybiB7P1Byb21pc2U8Py4uL2V4dGVuc2lvbnMvYW1wLXN0b3J5LzEuMC92YXJpYWJsZS1zZXJ2aWNlLlN0b3J5VmFyaWFibGVEZWY+fVxuICAgKi9cbiAgc3RhdGljIHN0b3J5VmFyaWFibGVTZXJ2aWNlRm9yT3JOdWxsKHdpbikge1xuICAgIHJldHVybiAoXG4gICAgLyoqIEB0eXBlIHshUHJvbWlzZTw/Li4vZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMS4wL3ZhcmlhYmxlLXNlcnZpY2UuU3RvcnlWYXJpYWJsZURlZj59ICovXG4gICAgICAoZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZSh3aW4sICdzdG9yeS12YXJpYWJsZScsICdhbXAtc3RvcnknLFxuICAgICAgICAgIHRydWUpKSk7XG4gIH1cblxuICAvKipcbiAgICogVmVyc2lvbiBvZiB0aGUgc3Rvcnkgc3RvcmUgc2VydmljZSBkZXBlbmRzIG9uIHdoaWNoIHZlcnNpb24gb2YgYW1wLXN0b3J5XG4gICAqIHRoZSBwdWJsaXNoZXIgaXMgbG9hZGluZy4gVGhleSBhbGwgaGF2ZSB0aGUgc2FtZSBpbXBsZW1lbnRhdGlvbi5cbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICogQHJldHVybiB7P1Byb21pc2U8Py4uL2V4dGVuc2lvbnMvYW1wLXN0b3J5LzEuMC9hbXAtc3Rvcnktc3RvcmUtc2VydmljZS5BbXBTdG9yeVN0b3JlU2VydmljZXw/Li4vZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMC4xL2FtcC1zdG9yeS1zdG9yZS1zZXJ2aWNlLkFtcFN0b3J5U3RvcmVTZXJ2aWNlPn1cbiAgICovXG4gIHN0YXRpYyBzdG9yeVN0b3JlU2VydmljZUZvck9yTnVsbCh3aW4pIHtcbiAgICByZXR1cm4gKFxuICAgIC8qKiBAdHlwZSB7IVByb21pc2U8Py4uL2V4dGVuc2lvbnMvYW1wLXN0b3J5LzEuMC9hbXAtc3Rvcnktc3RvcmUtc2VydmljZS5BbXBTdG9yeVN0b3JlU2VydmljZXw/Li4vZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMC4xL2FtcC1zdG9yeS1zdG9yZS1zZXJ2aWNlLkFtcFN0b3J5U3RvcmVTZXJ2aWNlPn0gKi9cbiAgICAgIChnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlKHdpbiwgJ3N0b3J5LXN0b3JlJywgJ2FtcC1zdG9yeScpKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICogQHJldHVybiB7Py4uL2V4dGVuc2lvbnMvYW1wLXN0b3J5LzEuMC9hbXAtc3Rvcnktc3RvcmUtc2VydmljZS5BbXBTdG9yeVN0b3JlU2VydmljZX1cbiAgICovXG4gIHN0YXRpYyBzdG9yeVN0b3JlU2VydmljZSh3aW4pIHtcbiAgICByZXR1cm4gKC8qKiBAdHlwZSB7Py4uL2V4dGVuc2lvbnMvYW1wLXN0b3J5LzEuMC9hbXAtc3Rvcnktc3RvcmUtc2VydmljZS5BbXBTdG9yeVN0b3JlU2VydmljZX0gKi9cbiAgICAgIChnZXRFeGlzdGluZ1NlcnZpY2VPck51bGwod2luLCAnc3Rvcnktc3RvcmUnKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEByZXR1cm4gez8uLi9leHRlbnNpb25zL2FtcC1zdG9yeS8xLjAvYW1wLXN0b3J5LXJlcXVlc3Qtc2VydmljZS5BbXBTdG9yeVJlcXVlc3RTZXJ2aWNlfVxuICAgKi9cbiAgc3RhdGljIHN0b3J5UmVxdWVzdFNlcnZpY2Uod2luKSB7XG4gICAgcmV0dXJuICgvKiogQHR5cGUgez8uLi9leHRlbnNpb25zL2FtcC1zdG9yeS8xLjAvYW1wLXN0b3J5LXJlcXVlc3Qtc2VydmljZS5BbXBTdG9yeVJlcXVlc3RTZXJ2aWNlfSAqL1xuICAgICAgKGdldEV4aXN0aW5nU2VydmljZU9yTnVsbCh3aW4sICdzdG9yeS1yZXF1ZXN0JykpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTw/Li4vZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMS4wL2xvY2FsaXphdGlvbi5Mb2NhbGl6YXRpb25TZXJ2aWNlPn1cbiAgICovXG4gIHN0YXRpYyBsb2NhbGl6YXRpb25TZXJ2aWNlRm9yT3JOdWxsKHdpbikge1xuICAgIHJldHVybiAoXG4gICAgLyoqIEB0eXBlIHshUHJvbWlzZTw/Li4vZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMS4wL2xvY2FsaXphdGlvbi5Mb2NhbGl6YXRpb25TZXJ2aWNlPn0gKi9cbiAgICAgIChnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlKHdpbiwgJ2xvY2FsaXphdGlvbicsICdhbXAtc3RvcnknLCB0cnVlKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEByZXR1cm4geyEuLi9leHRlbnNpb25zL2FtcC1zdG9yeS8xLjAvbG9jYWxpemF0aW9uLkxvY2FsaXphdGlvblNlcnZpY2V9XG4gICAqL1xuICBzdGF0aWMgbG9jYWxpemF0aW9uU2VydmljZSh3aW4pIHtcbiAgICByZXR1cm4gZ2V0U2VydmljZSh3aW4sICdsb2NhbGl6YXRpb24nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUT0RPKCMxNDM1Nyk6IFJlbW92ZSB0aGlzIHdoZW4gYW1wLXN0b3J5OjAuMSBpcyBkZXByZWNhdGVkLlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcmV0dXJuIHshLi4vZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMC4xL2FtcC1zdG9yeS1zdG9yZS1zZXJ2aWNlLkFtcFN0b3J5U3RvcmVTZXJ2aWNlfVxuICAgKi9cbiAgc3RhdGljIHN0b3J5U3RvcmVTZXJ2aWNlVjAxKHdpbikge1xuICAgIHJldHVybiBnZXRTZXJ2aWNlKHdpbiwgJ3N0b3J5LXN0b3JlJyk7XG4gIH1cblxuICAvKipcbiAgICogVE9ETygjMTQzNTcpOiBSZW1vdmUgdGhpcyB3aGVuIGFtcC1zdG9yeTowLjEgaXMgZGVwcmVjYXRlZC5cbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICogQHJldHVybiB7IS4uL2V4dGVuc2lvbnMvYW1wLXN0b3J5LzAuMS9hbXAtc3RvcnktcmVxdWVzdC1zZXJ2aWNlLkFtcFN0b3J5UmVxdWVzdFNlcnZpY2V9XG4gICAqL1xuICBzdGF0aWMgc3RvcnlSZXF1ZXN0U2VydmljZVYwMSh3aW4pIHtcbiAgICByZXR1cm4gZ2V0U2VydmljZSh3aW4sICdzdG9yeS1yZXF1ZXN0LXYwMScpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRPRE8oIzE0MzU3KTogUmVtb3ZlIHRoaXMgd2hlbiBhbXAtc3Rvcnk6MC4xIGlzIGRlcHJlY2F0ZWQuXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEByZXR1cm4geyFQcm9taXNlPD8uLi9leHRlbnNpb25zL2FtcC1zdG9yeS8wLjEvbG9jYWxpemF0aW9uLkxvY2FsaXphdGlvblNlcnZpY2U+fVxuICAgKi9cbiAgc3RhdGljIGxvY2FsaXphdGlvblNlcnZpY2VGb3JPck51bGxWMDEod2luKSB7XG4gICAgcmV0dXJuIChcbiAgICAvKiogQHR5cGUgeyFQcm9taXNlPD8uLi9leHRlbnNpb25zL2FtcC1zdG9yeS8wLjEvbG9jYWxpemF0aW9uLkxvY2FsaXphdGlvblNlcnZpY2U+fSAqL1xuICAgICAgKGdldEVsZW1lbnRTZXJ2aWNlSWZBdmFpbGFibGUod2luLCAnbG9jYWxpemF0aW9uLXYwMScsICdhbXAtc3RvcnknLFxuICAgICAgICAgIHRydWUpKSk7XG4gIH1cblxuICAvKipcbiAgICogVE9ETygjMTQzNTcpOiBSZW1vdmUgdGhpcyB3aGVuIGFtcC1zdG9yeTowLjEgaXMgZGVwcmVjYXRlZC5cbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICogQHJldHVybiB7IS4uL2V4dGVuc2lvbnMvYW1wLXN0b3J5LzAuMS9sb2NhbGl6YXRpb24uTG9jYWxpemF0aW9uU2VydmljZX1cbiAgICovXG4gIHN0YXRpYyBsb2NhbGl6YXRpb25TZXJ2aWNlVjAxKHdpbikge1xuICAgIHJldHVybiBnZXRTZXJ2aWNlKHdpbiwgJ2xvY2FsaXphdGlvbi12MDEnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcmV0dXJuIHs/UHJvbWlzZTw/Li4vZXh0ZW5zaW9ucy9hbXAtdmlld2VyLWludGVncmF0aW9uLzAuMS92YXJpYWJsZS1zZXJ2aWNlLlZpZXdlckludGVncmF0aW9uVmFyaWFibGVEZWY+fVxuICAgKi9cbiAgc3RhdGljIHZpZXdlckludGVncmF0aW9uVmFyaWFibGVTZXJ2aWNlRm9yT3JOdWxsKHdpbikge1xuICAgIHJldHVybiAoXG4gICAgLyoqIEB0eXBlIHshUHJvbWlzZTw/Li4vZXh0ZW5zaW9ucy9hbXAtdmlld2VyLWludGVncmF0aW9uLzAuMS92YXJpYWJsZS1zZXJ2aWNlLlZpZXdlckludGVncmF0aW9uVmFyaWFibGVEZWY+fSAqL1xuICAgICAgKGdldEVsZW1lbnRTZXJ2aWNlSWZBdmFpbGFibGUod2luLCAndmlld2VyLWludGVncmF0aW9uLXZhcmlhYmxlJyxcbiAgICAgICAgICAnYW1wLXZpZXdlci1pbnRlZ3JhdGlvbicsIHRydWUpKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCEuLi9leHRlbnNpb25zL2FtcC1hbmltYXRpb24vMC4xL3dlYi1hbmltYXRpb24tc2VydmljZS5XZWJBbmltYXRpb25TZXJ2aWNlPn1cbiAgICovXG4gIHN0YXRpYyB3ZWJBbmltYXRpb25TZXJ2aWNlRm9yKGVsZW1lbnRPckFtcERvYykge1xuICAgIHJldHVybiAoLyoqIEB0eXBlIHshUHJvbWlzZTwhLi4vZXh0ZW5zaW9ucy9hbXAtYW5pbWF0aW9uLzAuMS93ZWItYW5pbWF0aW9uLXNlcnZpY2UuV2ViQW5pbWF0aW9uU2VydmljZT59ICovXG4gICAgICAoZ2V0RWxlbWVudFNlcnZpY2VGb3JEb2MoXG4gICAgICAgICAgZWxlbWVudE9yQW1wRG9jLCAnd2ViLWFuaW1hdGlvbicsICdhbXAtYW5pbWF0aW9uJykpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAgICogQHJldHVybiB7IVByb21pc2U8IS4vc2VydmljZS9zdG9yYWdlLWltcGwuU3RvcmFnZT59XG4gICAqL1xuICBzdGF0aWMgc3RvcmFnZUZvckRvYyhlbGVtZW50T3JBbXBEb2MpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZTwhLi9zZXJ2aWNlL3N0b3JhZ2UtaW1wbC5TdG9yYWdlPn0gKi8gKFxuICAgICAgZ2V0U2VydmljZVByb21pc2VGb3JEb2MoZWxlbWVudE9yQW1wRG9jLCAnc3RvcmFnZScpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpbmRvd1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL3RlbXBsYXRlLWltcGwuVGVtcGxhdGVzfVxuICAgKi9cbiAgc3RhdGljIHRlbXBsYXRlc0Zvcih3aW5kb3cpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL3RlbXBsYXRlLWltcGwuVGVtcGxhdGVzfSAqLyAoXG4gICAgICBnZXRTZXJ2aWNlKHdpbmRvdywgJ3RlbXBsYXRlcycpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpbmRvd1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL3RpbWVyLWltcGwuVGltZXJ9XG4gICAqL1xuICBzdGF0aWMgdGltZXJGb3Iod2luZG93KSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS90aW1lci1pbXBsLlRpbWVyfSAqLyAoXG4gICAgICBnZXRTZXJ2aWNlKHdpbmRvdywgJ3RpbWVyJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVubGlrZSBtb3N0IHNlcnZpY2UgZ2V0dGVycywgcGFzc2luZyBgTm9kZWAgaXMgbmVjZXNzYXJ5IGZvciBzb21lIEZJRS1zY29wZVxuICAgKiBzZXJ2aWNlcyBzaW5jZSBzb21ldGltZXMgd2Ugb25seSBoYXZlIHRoZSBGSUUgRG9jdW1lbnQgZm9yIGNvbnRleHQuXG4gICAqIEBwYXJhbSB7IU5vZGV8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IG5vZGVPckRvY1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL3VybC1yZXBsYWNlbWVudHMtaW1wbC5VcmxSZXBsYWNlbWVudHN9XG4gICAqL1xuICBzdGF0aWMgdXJsUmVwbGFjZW1lbnRzRm9yRG9jKG5vZGVPckRvYykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UvdXJsLXJlcGxhY2VtZW50cy1pbXBsLlVybFJlcGxhY2VtZW50c30gKi8gKFxuICAgICAgZ2V0RXhpc3RpbmdTZXJ2aWNlRm9yRG9jSW5FbWJlZFNjb3BlKFxuICAgICAgICAgIG5vZGVPckRvYywgJ3VybC1yZXBsYWNlJywgLyogb3B0X2ZhbGxiYWNrVG9Ub3BXaW4gKi8gdHJ1ZSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhLi4vZXh0ZW5zaW9ucy9hbXAtdXNlci1ub3RpZmljYXRpb24vMC4xL2FtcC11c2VyLW5vdGlmaWNhdGlvbi5Vc2VyTm90aWZpY2F0aW9uTWFuYWdlcj59XG4gICAqL1xuICBzdGF0aWMgdXNlck5vdGlmaWNhdGlvbk1hbmFnZXJGb3JEb2MoZWxlbWVudE9yQW1wRG9jKSB7XG4gICAgcmV0dXJuICgvKiogQHR5cGUgeyFQcm9taXNlPCEuLi9leHRlbnNpb25zL2FtcC11c2VyLW5vdGlmaWNhdGlvbi8wLjEvYW1wLXVzZXItbm90aWZpY2F0aW9uLlVzZXJOb3RpZmljYXRpb25NYW5hZ2VyPn0gKi9cbiAgICAgIChnZXRFbGVtZW50U2VydmljZUZvckRvYyhlbGVtZW50T3JBbXBEb2MsICd1c2VyTm90aWZpY2F0aW9uTWFuYWdlcicsXG4gICAgICAgICAgJ2FtcC11c2VyLW5vdGlmaWNhdGlvbicpKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSBjb25zZW50UG9saWN5IFNlcnZpY2Ugb3IgYSBwcm9taXNlIGZvciBudWxsIGlmXG4gICAqIHRoZSBzZXJ2aWNlIGlzIG5vdCBhdmFpbGFibGUgb24gdGhlIGN1cnJlbnQgcGFnZS5cbiAgICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gICAqIEByZXR1cm4geyFQcm9taXNlPD8uLi9leHRlbnNpb25zL2FtcC1jb25zZW50LzAuMS9jb25zZW50LXBvbGljeS1tYW5hZ2VyLkNvbnNlbnRQb2xpY3lNYW5hZ2VyPn1cbiAgICovXG4gIHN0YXRpYyBjb25zZW50UG9saWN5U2VydmljZUZvckRvY09yTnVsbChlbGVtZW50T3JBbXBEb2MpIHtcbiAgICByZXR1cm4gKC8qKiBAdHlwZSB7IVByb21pc2U8Py4uL2V4dGVuc2lvbnMvYW1wLWNvbnNlbnQvMC4xL2NvbnNlbnQtcG9saWN5LW1hbmFnZXIuQ29uc2VudFBvbGljeU1hbmFnZXI+fSAqL1xuICAgICAgKGdldEVsZW1lbnRTZXJ2aWNlSWZBdmFpbGFibGVGb3JEb2MoZWxlbWVudE9yQW1wRG9jLFxuICAgICAgICAgICdjb25zZW50UG9saWN5TWFuYWdlcicsICdhbXAtY29uc2VudCcpKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSBnZW8gc2VydmljZSBvciBhIHByb21pc2UgZm9yIG51bGwgaWZcbiAgICogdGhlIHNlcnZpY2UgaXMgbm90IGF2YWlsYWJsZSBvbiB0aGUgY3VycmVudCBwYWdlLlxuICAgKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAgICogQHJldHVybiB7IVByb21pc2U8Py4uL2V4dGVuc2lvbnMvYW1wLWdlby8wLjEvYW1wLWdlby5HZW9EZWY+fVxuICAgKi9cbiAgc3RhdGljIGdlb0ZvckRvY09yTnVsbChlbGVtZW50T3JBbXBEb2MpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZTw/Li4vZXh0ZW5zaW9ucy9hbXAtZ2VvLzAuMS9hbXAtZ2VvLkdlb0RlZj59ICovIChcbiAgICAgIGdldEVsZW1lbnRTZXJ2aWNlSWZBdmFpbGFibGVGb3JEb2MoXG4gICAgICAgICAgZWxlbWVudE9yQW1wRG9jLCAnZ2VvJywgJ2FtcC1nZW8nLCB0cnVlKSk7XG4gIH1cblxuICAvKipcbiAgICogVW5saWtlIG1vc3Qgc2VydmljZSBnZXR0ZXJzLCBwYXNzaW5nIGBOb2RlYCBpcyBuZWNlc3NhcnkgZm9yIHNvbWUgRklFLXNjb3BlXG4gICAqIHNlcnZpY2VzIHNpbmNlIHNvbWV0aW1lcyB3ZSBvbmx5IGhhdmUgdGhlIEZJRSBEb2N1bWVudCBmb3IgY29udGV4dC5cbiAgICogQHBhcmFtIHshTm9kZXwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gbm9kZU9yRG9jXG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvdXJsLWltcGwuVXJsfVxuICAgKi9cbiAgc3RhdGljIHVybEZvckRvYyhub2RlT3JEb2MpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL3VybC1pbXBsLlVybH0gKi8gKFxuICAgICAgZ2V0RXhpc3RpbmdTZXJ2aWNlRm9yRG9jSW5FbWJlZFNjb3BlKFxuICAgICAgICAgIG5vZGVPckRvYywgJ3VybCcsIC8qIG9wdF9mYWxsYmFja1RvVG9wV2luICovIHRydWUpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIGV4cGVyaW1lbnQgdmFyaWFudHMgb3IgYSBwcm9taXNlIGZvciBudWxsIGlmIGl0XG4gICAqIGlzIG5vdCBhdmFpbGFibGUgb24gdGhlIGN1cnJlbnQgcGFnZS5cbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICogQHJldHVybiB7IVByb21pc2U8P09iamVjdDxzdHJpbmc+Pn1cbiAgICovXG4gIHN0YXRpYyB2YXJpYW50Rm9yT3JOdWxsKHdpbikge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlPD9PYmplY3Q8c3RyaW5nPj59ICovIChcbiAgICAgIGdldEVsZW1lbnRTZXJ2aWNlSWZBdmFpbGFibGUod2luLCAndmFyaWFudCcsICdhbXAtZXhwZXJpbWVudCcsIHRydWUpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAgICogQHJldHVybiB7IS4vc2VydmljZS92aWRlby1zZXJ2aWNlLWludGVyZmFjZS5WaWRlb1NlcnZpY2VJbnRlcmZhY2V9XG4gICAqL1xuICBzdGF0aWMgdmlkZW9NYW5hZ2VyRm9yRG9jKGVsZW1lbnRPckFtcERvYykge1xuICAgIHJldHVybiAoXG4gICAgICAvKiogQHR5cGUgeyEuL3NlcnZpY2UvdmlkZW8tc2VydmljZS1pbnRlcmZhY2UuVmlkZW9TZXJ2aWNlSW50ZXJmYWNlfSAqLyAoXG4gICAgICAgIGdldFNlcnZpY2VGb3JEb2MoZWxlbWVudE9yQW1wRG9jLCAndmlkZW8tbWFuYWdlcicpKSk7XG4gIH1cblxuICAvKipcbiAgICogVXNlcyBnZXRTZXJ2aWNlRm9yRG9jRGVwcmVjYXRlZCgpIHNpbmNlIFZpZXdlciBpcyBhIHN0YXJ0dXAgc2VydmljZS5cbiAgICogQHBhcmFtIHshTm9kZXwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gbm9kZU9yRG9jXG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2Uvdmlld2VyLWltcGwuVmlld2VyfVxuICAgKi9cbiAgc3RhdGljIHZpZXdlckZvckRvYyhub2RlT3JEb2MpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL3ZpZXdlci1pbXBsLlZpZXdlcn0gKi8gKFxuICAgICAgZ2V0U2VydmljZUZvckRvY0RlcHJlY2F0ZWQobm9kZU9yRG9jLCAndmlld2VyJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgcHJvbWlzZSBmb3IgdGhlIHZpZXdlci4gVGhpcyBpcyBhbiB1bnVzdWFsIGNhc2UgYW5kIG5lY2Vzc2FyeSBvbmx5XG4gICAqIGZvciBzZXJ2aWNlcyB0aGF0IG5lZWQgcmVmZXJlbmNlIHRvIHRoZSB2aWV3ZXIgYmVmb3JlIGl0IGhhcyBiZWVuXG4gICAqIGluaXRpYWxpemVkLiBNb3N0IG9mIHRoZSBjb2RlLCBob3dldmVyLCBqdXN0IHNob3VsZCB1c2UgYHZpZXdlckZvckRvY2AuXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhLi9zZXJ2aWNlL3ZpZXdlci1pbXBsLlZpZXdlcj59XG4gICAqL1xuICBzdGF0aWMgdmlld2VyUHJvbWlzZUZvckRvYyhlbGVtZW50T3JBbXBEb2MpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZTwhLi9zZXJ2aWNlL3ZpZXdlci1pbXBsLlZpZXdlcj59ICovIChcbiAgICAgIGdldFNlcnZpY2VQcm9taXNlRm9yRG9jKGVsZW1lbnRPckFtcERvYywgJ3ZpZXdlcicpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpbmRvd1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL3ZzeW5jLWltcGwuVnN5bmN9XG4gICAqL1xuICBzdGF0aWMgdnN5bmNGb3Iod2luZG93KSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS92c3luYy1pbXBsLlZzeW5jfSAqLyAoXG4gICAgICBnZXRTZXJ2aWNlKHdpbmRvdywgJ3ZzeW5jJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZXMgZ2V0U2VydmljZUZvckRvY0RlcHJlY2F0ZWQoKSBzaW5jZSBWaWV3cG9ydCBpcyBhIHN0YXJ0dXAgc2VydmljZS5cbiAgICogQHBhcmFtIHshTm9kZXwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gbm9kZU9yRG9jXG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2Uvdmlld3BvcnQvdmlld3BvcnQtaW1wbC5WaWV3cG9ydH1cbiAgICovXG4gIHN0YXRpYyB2aWV3cG9ydEZvckRvYyhub2RlT3JEb2MpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL3ZpZXdwb3J0L3ZpZXdwb3J0LWltcGwuVmlld3BvcnR9ICovIChcbiAgICAgIGdldFNlcnZpY2VGb3JEb2NEZXByZWNhdGVkKG5vZGVPckRvYywgJ3ZpZXdwb3J0JykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luZG93XG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UveGhyLWltcGwuWGhyfVxuICAgKi9cbiAgc3RhdGljIHhockZvcih3aW5kb3cpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL3hoci1pbXBsLlhocn0gKi8gKGdldFNlcnZpY2Uod2luZG93LCAneGhyJykpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gX21hdGNoXG4gKiBAcGFyYW0ge3N0cmluZ30gY2hhcmFjdGVyXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHRvVXBwZXJDYXNlKF9tYXRjaCwgY2hhcmFjdGVyKSB7XG4gIHJldHVybiBjaGFyYWN0ZXIudG9VcHBlckNhc2UoKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWF0Y2hcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gcHJlcGVuZERhc2hBbmRUb0xvd2VyQ2FzZShtYXRjaCkge1xuICByZXR1cm4gJy0nICsgbWF0Y2gudG9Mb3dlckNhc2UoKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBBdHRyaWJ1dGUgbmFtZSBjb250YWluaW5nIGRhc2hlcy5cbiAqIEByZXR1cm4ge3N0cmluZ30gRGFzaGVzIHJlbW92ZWQgYW5kIHN1Y2Nlc3NpdmUgY2hhcmFjdGVyIHNlbnQgdG8gdXBwZXIgY2FzZS5cbiAqIHZpc2libGVGb3JUZXN0aW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkYXNoVG9DYW1lbENhc2UobmFtZSkge1xuICByZXR1cm4gbmFtZS5yZXBsYWNlKC8tKFthLXpdKS9nLCB0b1VwcGVyQ2FzZSk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYSBzdHJpbmcgdGhhdCBpcyBpbiBjYW1lbENhc2UgdG8gb25lIHRoYXQgaXMgaW4gZGFzaC1jYXNlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgVGhlIHN0cmluZyB0byBjb252ZXJ0LlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgc3RyaW5nIGluIGRhc2gtY2FzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbWVsQ2FzZVRvRGFzaChzdHJpbmcpIHtcbiAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC8oPyFeKVtBLVpdL2csIHByZXBlbmREYXNoQW5kVG9Mb3dlckNhc2UpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEF0dHJpYnV0ZSBuYW1lIHdpdGggZGFzaGVzXG4gKiBAcmV0dXJuIHtzdHJpbmd9IERhc2hlcyByZXBsYWNlZCBieSB1bmRlcmxpbmVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGFzaFRvVW5kZXJsaW5lKG5hbWUpIHtcbiAgcmV0dXJuIG5hbWUucmVwbGFjZSgnLScsICdfJyk7XG59XG5cbi8qKlxuICogUG9seWZpbGwgZm9yIFN0cmluZy5wcm90b3R5cGUuZW5kc1dpdGguXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nXG4gKiBAcGFyYW0ge3N0cmluZ30gc3VmZml4XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gZW5kc1dpdGgoc3RyaW5nLCBzdWZmaXgpIHtcbiAgY29uc3QgaW5kZXggPSBzdHJpbmcubGVuZ3RoIC0gc3VmZml4Lmxlbmd0aDtcbiAgcmV0dXJuIGluZGV4ID49IDAgJiYgc3RyaW5nLmluZGV4T2Yoc3VmZml4LCBpbmRleCkgPT0gaW5kZXg7XG59XG5cbi8qKlxuICogUG9seWZpbGwgZm9yIFN0cmluZy5wcm90b3R5cGUuc3RhcnRzV2l0aC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmdcbiAqIEBwYXJhbSB7c3RyaW5nfSBwcmVmaXhcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGFydHNXaXRoKHN0cmluZywgcHJlZml4KSB7XG4gIGlmIChwcmVmaXgubGVuZ3RoID4gc3RyaW5nLmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gc3RyaW5nLmxhc3RJbmRleE9mKHByZWZpeCwgMCkgPT0gMDtcbn1cblxuLyoqXG4gKiBFeHBhbmRzIHBsYWNlaG9sZGVycyBpbiBhIGdpdmVuIHRlbXBsYXRlIHN0cmluZyB3aXRoIHZhbHVlcy5cbiAqXG4gKiBQbGFjZWhvbGRlcnMgdXNlICR7a2V5LW5hbWV9IHN5bnRheCBhbmQgYXJlIHJlcGxhY2VkIHdpdGggdGhlIHZhbHVlXG4gKiByZXR1cm5lZCBmcm9tIHRoZSBnaXZlbiBnZXR0ZXIgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHRlbXBsYXRlIFRoZSB0ZW1wbGF0ZSBzdHJpbmcgdG8gZXhwYW5kLlxuICogQHBhcmFtIHtmdW5jdGlvbihzdHJpbmcpOip9IGdldHRlciBGdW5jdGlvbiB1c2VkIHRvIHJldHJpZXZlIGEgdmFsdWUgZm9yIGFcbiAqICAgcGxhY2Vob2xkZXIuIFJldHVybnMgdmFsdWVzIHdpbGwgYmUgY29lcmNlZCBpbnRvIHN0cmluZ3MuXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9tYXhJdGVyYXRpb25zIE51bWJlciBvZiB0aW1lcyB0byBleHBhbmQgdGhlIHRlbXBsYXRlLlxuICogICBEZWZhdWx0cyB0byAxLCBidXQgc2hvdWxkIGJlIHNldCB0byBhIGxhcmdlciB2YWx1ZSB5b3VyIHBsYWNlaG9sZGVyIHRva2Vuc1xuICogICBjYW4gYmUgZXhwYW5kZWQgdG8gb3RoZXIgcGxhY2Vob2xkZXIgdG9rZW5zLiBUYWtlIGNhdXRpb24gd2l0aCBsYXJnZSB2YWx1ZXNcbiAqICAgYXMgcmVjdXJzaXZlbHkgZXhwYW5kaW5nIGEgc3RyaW5nIGNhbiBiZSBleHBvbmVudGlhbGx5IGV4cGVuc2l2ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4cGFuZFRlbXBsYXRlKHRlbXBsYXRlLCBnZXR0ZXIsIG9wdF9tYXhJdGVyYXRpb25zKSB7XG4gIGNvbnN0IG1heEl0ZXJhdGlvbnMgPSBvcHRfbWF4SXRlcmF0aW9ucyB8fCAxO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IG1heEl0ZXJhdGlvbnM7IGkrKykge1xuICAgIGxldCBtYXRjaGVzID0gMDtcbiAgICB0ZW1wbGF0ZSA9IHRlbXBsYXRlLnJlcGxhY2UoL1xcJHsoW159XSopfS9nLCAoX2EsIGIpID0+IHtcbiAgICAgIG1hdGNoZXMrKztcbiAgICAgIHJldHVybiBnZXR0ZXIoYik7XG4gICAgfSk7XG4gICAgaWYgKCFtYXRjaGVzKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRlbXBsYXRlO1xufVxuXG4vKipcbiAqIEhhc2ggZnVuY3Rpb24gZGpiMmFcbiAqIFRoaXMgaXMgaW50ZW5kZWQgdG8gYmUgYSBzaW1wbGUsIGZhc3QgaGFzaGluZyBmdW5jdGlvbiB1c2luZyBtaW5pbWFsIGNvZGUuXG4gKiBJdCBkb2VzICpub3QqIGhhdmUgZ29vZCBjcnlwdG9ncmFwaGljIHByb3BlcnRpZXMuXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtzdHJpbmd9IDMyLWJpdCB1bnNpZ25lZCBoYXNoIG9mIHRoZSBzdHJpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ0hhc2gzMihzdHIpIHtcbiAgY29uc3Qge2xlbmd0aH0gPSBzdHI7XG4gIGxldCBoYXNoID0gNTM4MTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGhhc2ggPSBoYXNoICogMzMgXiBzdHIuY2hhckNvZGVBdChpKTtcbiAgfVxuICAvLyBDb252ZXJ0IGZyb20gMzItYml0IHNpZ25lZCB0byB1bnNpZ25lZC5cbiAgcmV0dXJuIFN0cmluZyhoYXNoID4+PiAwKTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1NlcnZpY2VzfSBmcm9tICcuL3NlcnZpY2VzJztcbmltcG9ydCB7ZGV2LCByZXRocm93QXN5bmN9IGZyb20gJy4vbG9nJztcbmltcG9ydCB7aW5zZXJ0QWZ0ZXJPckF0U3RhcnQsIHdhaXRGb3JCb2R5fSBmcm9tICcuL2RvbSc7XG5pbXBvcnQge21hcH0gZnJvbSAnLi91dGlscy9vYmplY3QnO1xuaW1wb3J0IHtzZXRTdHlsZXN9IGZyb20gJy4vc3R5bGUnO1xuaW1wb3J0IHt3YWl0Rm9yU2VydmljZXN9IGZyb20gJy4vcmVuZGVyLWRlbGF5aW5nLXNlcnZpY2VzJztcblxuY29uc3QgVFJBTlNGT1JNRVJfUFJPUCA9ICdfX0FNUF9DU1NfVFInO1xuY29uc3QgU1RZTEVfTUFQX1BST1AgPSAnX19BTVBfQ1NTX1NNJztcbmNvbnN0IGJvZHlWaXNpYmxlU2VudGluZWwgPSAnX19BTVBfQk9EWV9WSVNJQkxFJztcblxuXG4vKipcbiAqIEFkZHMgdGhlIGdpdmVuIGNzcyB0ZXh0IHRvIHRoZSBnaXZlbiBhbXBkb2MuXG4gKlxuICogVGhlIHN0eWxlIHRhZ3Mgd2lsbCBiZSBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBoZWFkIGJlZm9yZSBhbGwgYXV0aG9yXG4gKiBzdHlsZXMuIE9uZSBlbGVtZW50IGNhbiBiZSB0aGUgbWFpbiBydW50aW1lIENTUy4gVGhpcyBpcyBndWFyYW50ZWVkXG4gKiB0byBhbHdheXMgYmUgdGhlIGZpcnN0IHN0eWxlc2hlZXQgaW4gdGhlIGRvYy5cbiAqXG4gKiBAcGFyYW0geyEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBhbXBkb2MgVGhlIGFtcGRvYyB0aGF0IHNob3VsZCBnZXQgdGhlIG5ldyBzdHlsZXMuXG4gKiBAcGFyYW0ge3N0cmluZ30gY3NzVGV4dFxuICogQHBhcmFtIHs/ZnVuY3Rpb24oIUVsZW1lbnQpfHVuZGVmaW5lZH0gY2IgQ2FsbGVkIHdoZW4gdGhlIG5ldyBzdHlsZXMgYXJlIGF2YWlsYWJsZS5cbiAqICAgICBOb3QgdXNpbmcgYSBwcm9taXNlLCBiZWNhdXNlIHRoaXMgaXMgc3luY2hyb25vdXMgd2hlbiBwb3NzaWJsZS5cbiAqICAgICBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlLlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2lzUnVudGltZUNzcyBJZiB0cnVlLCB0aGlzIHN0eWxlIHRhZyB3aWxsIGJlIGluc2VydGVkXG4gKiAgICAgYXMgdGhlIGZpcnN0IGVsZW1lbnQgaW4gaGVhZCBhbmQgYWxsIHN0eWxlIGVsZW1lbnRzIHdpbGwgYmUgcG9zaXRpb25lZFxuICogICAgIGFmdGVyLlxuICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfZXh0XG4gKiBAcmV0dXJuIHshRWxlbWVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluc3RhbGxTdHlsZXNGb3JEb2MoXG4gIGFtcGRvYywgY3NzVGV4dCwgY2IsIG9wdF9pc1J1bnRpbWVDc3MsIG9wdF9leHQpIHtcbiAgY29uc3QgY3NzUm9vdCA9IGFtcGRvYy5nZXRIZWFkTm9kZSgpO1xuICBjb25zdCBzdHlsZSA9IGluc2VydFN0eWxlRWxlbWVudChcbiAgICAgIGNzc1Jvb3QsXG4gICAgICBtYXliZVRyYW5zZm9ybShjc3NSb290LCBjc3NUZXh0KSxcbiAgICAgIG9wdF9pc1J1bnRpbWVDc3MgfHwgZmFsc2UsXG4gICAgICBvcHRfZXh0IHx8IG51bGwpO1xuXG4gIGlmIChjYikge1xuICAgIGNvbnN0IHJvb3ROb2RlID0gYW1wZG9jLmdldFJvb3ROb2RlKCk7XG4gICAgLy8gU3R5bGVzIGFyZW4ndCBhbHdheXMgYXZhaWxhYmxlIHN5bmNocm9ub3VzbHkuIEUuZy4gaWYgdGhlcmUgaXMgYVxuICAgIC8vIHBlbmRpbmcgc3R5bGUgZG93bmxvYWQsIGl0IHdpbGwgaGF2ZSB0byBmaW5pc2ggYmVmb3JlIHRoZSBuZXdcbiAgICAvLyBzdHlsZSBpcyB2aXNpYmxlLlxuICAgIC8vIEZvciB0aGlzIHJlYXNvbiB3ZSBwb2xsIHVudGlsIHRoZSBzdHlsZSBiZWNvbWVzIGF2YWlsYWJsZS5cbiAgICAvLyBTeW5jIGNhc2UuXG4gICAgaWYgKHN0eWxlTG9hZGVkKHJvb3ROb2RlLCBzdHlsZSkpIHtcbiAgICAgIGNiKHN0eWxlKTtcbiAgICAgIHJldHVybiBzdHlsZTtcbiAgICB9XG4gICAgLy8gUG9sbCB1bnRpbCBzdHlsZXMgYXJlIGF2YWlsYWJsZS5cbiAgICBjb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIGlmIChzdHlsZUxvYWRlZChyb290Tm9kZSwgc3R5bGUpKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgICBjYihzdHlsZSk7XG4gICAgICB9XG4gICAgfSwgNCk7XG4gIH1cbiAgcmV0dXJuIHN0eWxlO1xufVxuXG5cbi8qKlxuICogQWRkcyB0aGUgZ2l2ZW4gY3NzIHRleHQgdG8gdGhlIGdpdmVuIGRvY3VtZW50LlxuICogVE9ETyhkdm95dGVua28sICMxMDcwNSk6IFJlbW92ZSB0aGlzIG1ldGhvZCBvbmNlIEZJRS9hbXBkb2MgbWlncmF0aW9uIGlzXG4gKiBkb25lLlxuICpcbiAqIEBwYXJhbSB7IURvY3VtZW50fSBkb2MgVGhlIGRvY3VtZW50IHRoYXQgc2hvdWxkIGdldCB0aGUgbmV3IHN0eWxlcy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBjc3NUZXh0XG4gKiBAcGFyYW0gez9mdW5jdGlvbighRWxlbWVudCl8dW5kZWZpbmVkfSBjYiBDYWxsZWQgd2hlbiB0aGUgbmV3IHN0eWxlcyBhcmVcbiAqICAgICBhdmFpbGFibGUuIE5vdCB1c2luZyBhIHByb21pc2UsIGJlY2F1c2UgdGhpcyBpcyBzeW5jaHJvbm91cyB3aGVuXG4gKiAgICAgcG9zc2libGUuIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2UuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaXNSdW50aW1lQ3NzIElmIHRydWUsIHRoaXMgc3R5bGUgdGFnIHdpbGwgYmUgaW5zZXJ0ZWRcbiAqICAgICBhcyB0aGUgZmlyc3QgZWxlbWVudCBpbiBoZWFkIGFuZCBhbGwgc3R5bGUgZWxlbWVudHMgd2lsbCBiZSBwb3NpdGlvbmVkXG4gKiAgICAgYWZ0ZXIuXG4gKiBAcGFyYW0ge3N0cmluZz19IG9wdF9leHRcbiAqIEByZXR1cm4geyFFbGVtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbFN0eWxlc0xlZ2FjeShcbiAgZG9jLCBjc3NUZXh0LCBjYiwgb3B0X2lzUnVudGltZUNzcywgb3B0X2V4dCkge1xuICBjb25zdCBzdHlsZSA9IGluc2VydFN0eWxlRWxlbWVudChcbiAgICAgIGRldigpLmFzc2VydEVsZW1lbnQoZG9jLmhlYWQpLFxuICAgICAgY3NzVGV4dCxcbiAgICAgIG9wdF9pc1J1bnRpbWVDc3MgfHwgZmFsc2UsXG4gICAgICBvcHRfZXh0IHx8IG51bGwpO1xuXG4gIGlmIChjYikge1xuICAgIC8vIFN0eWxlcyBhcmVuJ3QgYWx3YXlzIGF2YWlsYWJsZSBzeW5jaHJvbm91c2x5LiBFLmcuIGlmIHRoZXJlIGlzIGFcbiAgICAvLyBwZW5kaW5nIHN0eWxlIGRvd25sb2FkLCBpdCB3aWxsIGhhdmUgdG8gZmluaXNoIGJlZm9yZSB0aGUgbmV3XG4gICAgLy8gc3R5bGUgaXMgdmlzaWJsZS5cbiAgICAvLyBGb3IgdGhpcyByZWFzb24gd2UgcG9sbCB1bnRpbCB0aGUgc3R5bGUgYmVjb21lcyBhdmFpbGFibGUuXG4gICAgLy8gU3luYyBjYXNlLlxuICAgIGlmIChzdHlsZUxvYWRlZChkb2MsIHN0eWxlKSkge1xuICAgICAgY2Ioc3R5bGUpO1xuICAgICAgcmV0dXJuIHN0eWxlO1xuICAgIH1cbiAgICAvLyBQb2xsIHVudGlsIHN0eWxlcyBhcmUgYXZhaWxhYmxlLlxuICAgIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgaWYgKHN0eWxlTG9hZGVkKGRvYywgc3R5bGUpKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgICBjYihzdHlsZSk7XG4gICAgICB9XG4gICAgfSwgNCk7XG4gIH1cbiAgcmV0dXJuIHN0eWxlO1xufVxuXG5cbi8qKlxuICogQ3JlYXRlcyB0aGUgcHJvcGVybHkgY29uZmlndXJlZCBzdHlsZSBlbGVtZW50LlxuICogQHBhcmFtIHshRWxlbWVudHwhU2hhZG93Um9vdH0gY3NzUm9vdFxuICogQHBhcmFtIHtzdHJpbmd9IGNzc1RleHRcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNSdW50aW1lQ3NzXG4gKiBAcGFyYW0gez9zdHJpbmd9IGV4dFxuICogQHJldHVybiB7IUVsZW1lbnR9XG4gKi9cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudChjc3NSb290LCBjc3NUZXh0LCBpc1J1bnRpbWVDc3MsIGV4dCkge1xuICBsZXQgc3R5bGVNYXAgPSBjc3NSb290W1NUWUxFX01BUF9QUk9QXTtcbiAgaWYgKCFzdHlsZU1hcCkge1xuICAgIHN0eWxlTWFwID0gY3NzUm9vdFtTVFlMRV9NQVBfUFJPUF0gPSBtYXAoKTtcbiAgfVxuXG4gIGNvbnN0IGlzRXh0Q3NzID0gIWlzUnVudGltZUNzcyAmJlxuICAgICAgKGV4dCAmJiBleHQgIT0gJ2FtcC1jdXN0b20nICYmIGV4dCAhPSAnYW1wLWtleWZyYW1lcycpO1xuICBjb25zdCBrZXkgPVxuICAgICAgaXNSdW50aW1lQ3NzID8gJ2FtcC1ydW50aW1lJyA6XG4gICAgICAgIGlzRXh0Q3NzID8gYGFtcC1leHRlbnNpb249JHtleHR9YCA6IG51bGw7XG5cbiAgLy8gQ2hlY2sgaWYgaXQgaGFzIGFscmVhZHkgYmVlbiBjcmVhdGVkIG9yIGRpc2NvdmVyZWQuXG4gIGlmIChrZXkpIHtcbiAgICBjb25zdCBleGlzdGluZyA9IGdldEV4aXN0aW5nU3R5bGVFbGVtZW50KGNzc1Jvb3QsIHN0eWxlTWFwLCBrZXkpO1xuICAgIGlmIChleGlzdGluZykge1xuICAgICAgcmV0dXJuIGV4aXN0aW5nO1xuICAgIH1cbiAgfVxuXG4gIC8vIENyZWF0ZSB0aGUgbmV3IHN0eWxlIGVsZW1lbnQgYW5kIGFwcGVuZCB0byBjc3NSb290LlxuICBjb25zdCBkb2MgPSAoY3NzUm9vdC5vd25lckRvY3VtZW50IHx8IGNzc1Jvb3QpO1xuICBjb25zdCBzdHlsZSA9IGRvYy5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICBzdHlsZS4vKk9LKi90ZXh0Q29udGVudCA9IGNzc1RleHQ7XG4gIGxldCBhZnRlckVsZW1lbnQgPSBudWxsO1xuICAvLyBNYWtlIHN1cmUgdGhhdCB3ZSBwbGFjZSBzdHlsZSB0YWdzIGFmdGVyIHRoZSBtYWluIHJ1bnRpbWUgQ1NTLiBPdGhlcndpc2VcbiAgLy8gdGhlIG9yZGVyIGlzIHJhbmRvbS5cbiAgaWYgKGlzUnVudGltZUNzcykge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZSgnYW1wLXJ1bnRpbWUnLCAnJyk7XG4gIH0gZWxzZSBpZiAoaXNFeHRDc3MpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoJ2FtcC1leHRlbnNpb24nLCBleHQgfHwgJycpO1xuICAgIGFmdGVyRWxlbWVudCA9IGRldigpLmFzc2VydEVsZW1lbnQoZ2V0RXhpc3RpbmdTdHlsZUVsZW1lbnQoXG4gICAgICAgIGNzc1Jvb3QsIHN0eWxlTWFwLCAnYW1wLXJ1bnRpbWUnKSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKGV4dCkge1xuICAgICAgc3R5bGUuc2V0QXR0cmlidXRlKGV4dCwgJycpO1xuICAgIH1cbiAgICBhZnRlckVsZW1lbnQgPSBjc3NSb290Lmxhc3RDaGlsZDtcbiAgfVxuICBpbnNlcnRBZnRlck9yQXRTdGFydChjc3NSb290LCBzdHlsZSwgYWZ0ZXJFbGVtZW50KTtcbiAgaWYgKGtleSkge1xuICAgIHN0eWxlTWFwW2tleV0gPSBzdHlsZTtcbiAgfVxuICByZXR1cm4gc3R5bGU7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0geyFFbGVtZW50fCFTaGFkb3dSb290fSBjc3NSb290XG4gKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCAhRWxlbWVudD59IHN0eWxlTWFwXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5XG4gKiBAcmV0dXJuIHs/RWxlbWVudH1cbiAqL1xuZnVuY3Rpb24gZ2V0RXhpc3RpbmdTdHlsZUVsZW1lbnQoY3NzUm9vdCwgc3R5bGVNYXAsIGtleSkge1xuICAvLyBBbHJlYWR5IGNhY2hlZC5cbiAgaWYgKHN0eWxlTWFwW2tleV0pIHtcbiAgICByZXR1cm4gc3R5bGVNYXBba2V5XTtcbiAgfVxuICAvLyBDaGVjayBpZiB0aGUgc3R5bGUgaGFzIGFscmVhZHkgYmVlbiBhZGRlZCBieSB0aGUgc2VydmVyIGxheW91dC5cbiAgY29uc3QgZXhpc3RpbmcgPSBjc3NSb290Li8qT0sqL3F1ZXJ5U2VsZWN0b3IoYHN0eWxlWyR7a2V5fV1gKTtcbiAgaWYgKGV4aXN0aW5nKSB7XG4gICAgc3R5bGVNYXBba2V5XSA9IGV4aXN0aW5nO1xuICAgIHJldHVybiBleGlzdGluZztcbiAgfVxuICAvLyBOb3RoaW5nIGZvdW5kLlxuICByZXR1cm4gbnVsbDtcbn1cblxuXG4vKipcbiAqIEFwcGxpZXMgYSB0cmFuc2Zvcm1lciB0byB0aGUgQ1NTIHRleHQgaWYgaXQgaGFzIGJlZW4gcmVnaXN0ZXJlZC5cbiAqIEBwYXJhbSB7IUVsZW1lbnR8IVNoYWRvd1Jvb3R9IGNzc1Jvb3RcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oc3RyaW5nKTpzdHJpbmd9IHRyYW5zZm9ybWVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsQ3NzVHJhbnNmb3JtZXIoY3NzUm9vdCwgdHJhbnNmb3JtZXIpIHtcbiAgY3NzUm9vdFtUUkFOU0ZPUk1FUl9QUk9QXSA9IHRyYW5zZm9ybWVyO1xufVxuXG5cbi8qKlxuICogQXBwbGllcyBhIHRyYW5zZm9ybWVyIHRvIHRoZSBDU1MgdGV4dCBpZiBpdCBoYXMgYmVlbiByZWdpc3RlcmVkLlxuICogQHBhcmFtIHshRWxlbWVudHwhU2hhZG93Um9vdH0gY3NzUm9vdFxuICogQHBhcmFtIHtzdHJpbmd9IGNzc1RleHRcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gbWF5YmVUcmFuc2Zvcm0oY3NzUm9vdCwgY3NzVGV4dCkge1xuICBjb25zdCB0cmFuc2Zvcm1lciA9IGNzc1Jvb3RbVFJBTlNGT1JNRVJfUFJPUF07XG4gIHJldHVybiB0cmFuc2Zvcm1lciA/IHRyYW5zZm9ybWVyKGNzc1RleHQpIDogY3NzVGV4dDtcbn1cblxuXG4vKipcbiAqIFNldHMgdGhlIGRvY3VtZW50J3MgYm9keSBvcGFjaXR5IHRvIDEuXG4gKiBJZiB0aGUgYm9keSBpcyBub3QgeWV0IGF2YWlsYWJsZSAoYmVjYXVzZSBvdXIgc2NyaXB0IHdhcyBsb2FkZWRcbiAqIHN5bmNocm9ub3VzbHkpLCBwb2xscyB1bnRpbCBpdCBpcy5cbiAqIEBwYXJhbSB7IURvY3VtZW50fSBkb2MgVGhlIGRvY3VtZW50IHdobydzIGJvZHkgd2Ugc2hvdWxkIG1ha2UgdmlzaWJsZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF93YWl0Rm9yU2VydmljZXMgV2hldGhlciB0aGUgYm9keSB2aXNpYmlsaXR5IHNob3VsZFxuICogICAgIGJlIGJsb2NrZWQgb24ga2V5IHNlcnZpY2VzIGJlaW5nIGxvYWRlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1ha2VCb2R5VmlzaWJsZShkb2MsIG9wdF93YWl0Rm9yU2VydmljZXMpIHtcbiAgZGV2KCkuYXNzZXJ0KGRvYy5kZWZhdWx0VmlldywgJ1Bhc3NlZCBpbiBkb2N1bWVudCBtdXN0IGhhdmUgYSBkZWZhdWx0VmlldycpO1xuICBjb25zdCB3aW4gPSAvKiogQHR5cGUgeyFXaW5kb3d9ICovIChkb2MuZGVmYXVsdFZpZXcpO1xuICBpZiAod2luW2JvZHlWaXNpYmxlU2VudGluZWxdKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHNldCA9ICgpID0+IHtcbiAgICB3aW5bYm9keVZpc2libGVTZW50aW5lbF0gPSB0cnVlO1xuICAgIHNldFN0eWxlcyhkZXYoKS5hc3NlcnRFbGVtZW50KGRvYy5ib2R5KSwge1xuICAgICAgb3BhY2l0eTogMSxcbiAgICAgIHZpc2liaWxpdHk6ICd2aXNpYmxlJyxcbiAgICAgICdhbmltYXRpb24nOiAnbm9uZScsXG4gICAgfSk7XG4gICAgcmVuZGVyU3RhcnRlZE5vSW5saW5lKGRvYyk7XG4gIH07XG4gIHRyeSB7XG4gICAgd2FpdEZvckJvZHkoZG9jLCAoKSA9PiB7XG4gICAgICBpZiAod2luW2JvZHlWaXNpYmxlU2VudGluZWxdKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHdpbltib2R5VmlzaWJsZVNlbnRpbmVsXSA9IHRydWU7XG4gICAgICBpZiAob3B0X3dhaXRGb3JTZXJ2aWNlcykge1xuICAgICAgICB3YWl0Rm9yU2VydmljZXMod2luKS5jYXRjaChyZWFzb24gPT4ge1xuICAgICAgICAgIHJldGhyb3dBc3luYyhyZWFzb24pO1xuICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfSkudGhlbihzZXJ2aWNlcyA9PiB7XG4gICAgICAgICAgc2V0KCk7XG4gICAgICAgICAgaWYgKHNlcnZpY2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIFNlcnZpY2VzLnJlc291cmNlc0ZvckRvYyhkb2MpLi8qT0sqL3NjaGVkdWxlUGFzcyhcbiAgICAgICAgICAgICAgICAxLCAvKiByZWxheW91dEFsbCAqLyB0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHBlcmYgPSBTZXJ2aWNlcy5wZXJmb3JtYW5jZUZvcih3aW4pO1xuICAgICAgICAgICAgcGVyZi50aWNrKCdtYnYnKTtcbiAgICAgICAgICAgIHBlcmYuZmx1c2goKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldCgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gSWYgdGhlcmUgd2FzIGFuIGVycm9yIGR1cmluZyB0aGUgbG9naWMgYWJvdmUgKHN1Y2ggYXMgc2VydmljZSBub3RcbiAgICAvLyB5ZXQgaW5zdGFsbGVkLCBkZWZpbml0ZWx5IHRyeSB0byBtYWtlIHRoZSBib2R5IHZpc2libGUuXG4gICAgc2V0KCk7XG4gICAgLy8gQXZvaWQgZXJyb3JzIGluIHRoZSBmdW5jdGlvbiB0byBicmVhayBleGVjdXRpb24gZmxvdyBhcyB0aGlzIGlzXG4gICAgLy8gb2Z0ZW4gY2FsbGVkIGFzIGEgbGFzdCByZXNvcnQuXG4gICAgcmV0aHJvd0FzeW5jKGUpO1xuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gKi9cbmZ1bmN0aW9uIHJlbmRlclN0YXJ0ZWROb0lubGluZShkb2MpIHtcbiAgdHJ5IHtcbiAgICBTZXJ2aWNlcy5yZXNvdXJjZXNGb3JEb2MoZG9jKS5yZW5kZXJTdGFydGVkKCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBgbWFrZUJvZHlWaXNpYmxlYCBpcyBjYWxsZWQgaW4gdGhlIGVycm9yLXByb2Nlc3NpbmcgY3ljbGUgYW5kIHRodXNcbiAgICAvLyBjb3VsZCBiZSB0cmlnZ2VyZWQgd2hlbiBydW50aW1lJ3MgaW5pdGlhbGl6YXRpb24gaXMgaW5jb21wbGV0ZSB3aGljaFxuICAgIC8vIHdvdWxkIGNhdXNlIHVucmVsYXRlZCBlcnJvcnMgdG8gYmUgdGhyb3duIGhlcmUuXG4gIH1cbn1cblxuXG4vKipcbiAqIEluZGljYXRlcyB0aGF0IHRoZSBib2R5IGlzIGFsd2F5cyB2aXNpYmxlLiBGb3IgaW5zdGFuY2UsIGluIGNhc2Ugb2YgUFdBLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJvZHlBbHdheXNWaXNpYmxlKHdpbikge1xuICB3aW5bYm9keVZpc2libGVTZW50aW5lbF0gPSB0cnVlO1xufVxuXG5cbi8qKlxuICogQ2hlY2tzIHdoZXRoZXIgYSBzdHlsZSBlbGVtZW50IHdhcyByZWdpc3RlcmVkIGluIHRoZSBET00uXG4gKiBAcGFyYW0geyFEb2N1bWVudHwhU2hhZG93Um9vdH0gZG9jXG4gKiBAcGFyYW0geyFFbGVtZW50fSBzdHlsZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gc3R5bGVMb2FkZWQoZG9jLCBzdHlsZSkge1xuICBjb25zdCBzaGVldHMgPSBkb2Muc3R5bGVTaGVldHM7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2hlZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3Qgc2hlZXQgPSBzaGVldHNbaV07XG4gICAgaWYgKHNoZWV0Lm93bmVyTm9kZSA9PSBzdHlsZSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vLyBOb3RlOiBsb2FkZWQgYnkgM3Agc3lzdGVtLiBDYW5ub3QgcmVseSBvbiBiYWJlbCBwb2x5ZmlsbHMuXG5pbXBvcnQge21hcH0gZnJvbSAnLi91dGlscy9vYmplY3QuanMnO1xuaW1wb3J0IHtzdGFydHNXaXRofSBmcm9tICcuL3N0cmluZyc7XG5cblxuLyoqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBzdHJpbmc+fSAqL1xubGV0IHByb3BlcnR5TmFtZUNhY2hlO1xuXG4vKiogQGNvbnN0IHshQXJyYXk8c3RyaW5nPn0gKi9cbmNvbnN0IHZlbmRvclByZWZpeGVzID0gWydXZWJraXQnLCAnd2Via2l0JywgJ01veicsICdtb3onLCAnbXMnLCAnTycsICdvJ107XG5cblxuLyoqXG4gKiBAZXhwb3J0XG4gKiBAcGFyYW0ge3N0cmluZ30gY2FtZWxDYXNlIGNhbWVsIGNhc2VkIHN0cmluZ1xuICogQHJldHVybiB7c3RyaW5nfSB0aXRsZSBjYXNlZCBzdHJpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbWVsQ2FzZVRvVGl0bGVDYXNlKGNhbWVsQ2FzZSkge1xuICByZXR1cm4gY2FtZWxDYXNlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtZWxDYXNlLnNsaWNlKDEpO1xufVxuXG4vKipcbiAqIENoZWNrcyB0aGUgc3R5bGUgaWYgYSBwcmVmaXhlZCB2ZXJzaW9uIG9mIGEgcHJvcGVydHkgZXhpc3RzIGFuZCByZXR1cm5zXG4gKiBpdCBvciByZXR1cm5zIGFuIGVtcHR5IHN0cmluZy5cbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyFPYmplY3R9IHN0eWxlXG4gKiBAcGFyYW0ge3N0cmluZ30gdGl0bGVDYXNlIHRoZSB0aXRsZSBjYXNlIHZlcnNpb24gb2YgYSBjc3MgcHJvcGVydHkgbmFtZVxuICogQHJldHVybiB7c3RyaW5nfSB0aGUgcHJlZml4ZWQgcHJvcGVydHkgbmFtZSBvciBudWxsLlxuICovXG5mdW5jdGlvbiBnZXRWZW5kb3JKc1Byb3BlcnR5TmFtZV8oc3R5bGUsIHRpdGxlQ2FzZSkge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHZlbmRvclByZWZpeGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgcHJvcGVydHlOYW1lID0gdmVuZG9yUHJlZml4ZXNbaV0gKyB0aXRsZUNhc2U7XG4gICAgaWYgKHN0eWxlW3Byb3BlcnR5TmFtZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHByb3BlcnR5TmFtZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuICcnO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHBvc3NpYmx5IHByZWZpeGVkIEphdmFTY3JpcHQgcHJvcGVydHkgbmFtZSBvZiBhIHN0eWxlIHByb3BlcnR5XG4gKiAoZXguIFdlYmtpdFRyYW5zaXRpb25EdXJhdGlvbikgZ2l2ZW4gYSBjYW1lbENhc2UnZCB2ZXJzaW9uIG9mIHRoZSBwcm9wZXJ0eVxuICogKGV4LiB0cmFuc2l0aW9uRHVyYXRpb24pLlxuICogQGV4cG9ydFxuICogQHBhcmFtIHshT2JqZWN0fSBzdHlsZVxuICogQHBhcmFtIHtzdHJpbmd9IGNhbWVsQ2FzZSB0aGUgY2FtZWwgY2FzZWQgdmVyc2lvbiBvZiBhIGNzcyBwcm9wZXJ0eSBuYW1lXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfYnlwYXNzQ2FjaGUgYnlwYXNzIHRoZSBtZW1vaXplZCBjYWNoZSBvZiBwcm9wZXJ0eVxuICogICBtYXBwaW5nXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRWZW5kb3JKc1Byb3BlcnR5TmFtZShzdHlsZSwgY2FtZWxDYXNlLCBvcHRfYnlwYXNzQ2FjaGUpIHtcbiAgaWYgKHN0YXJ0c1dpdGgoY2FtZWxDYXNlLCAnLS0nKSkge1xuICAgIC8vIENTUyB2YXJzIGFyZSByZXR1cm5lZCBhcyBpcy5cbiAgICByZXR1cm4gY2FtZWxDYXNlO1xuICB9XG4gIGlmICghcHJvcGVydHlOYW1lQ2FjaGUpIHtcbiAgICBwcm9wZXJ0eU5hbWVDYWNoZSA9IG1hcCgpO1xuICB9XG4gIGxldCBwcm9wZXJ0eU5hbWUgPSBwcm9wZXJ0eU5hbWVDYWNoZVtjYW1lbENhc2VdO1xuICBpZiAoIXByb3BlcnR5TmFtZSB8fCBvcHRfYnlwYXNzQ2FjaGUpIHtcbiAgICBwcm9wZXJ0eU5hbWUgPSBjYW1lbENhc2U7XG4gICAgaWYgKHN0eWxlW2NhbWVsQ2FzZV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgdGl0bGVDYXNlID0gY2FtZWxDYXNlVG9UaXRsZUNhc2UoY2FtZWxDYXNlKTtcbiAgICAgIGNvbnN0IHByZWZpeGVkUHJvcGVydHlOYW1lID0gZ2V0VmVuZG9ySnNQcm9wZXJ0eU5hbWVfKHN0eWxlLCB0aXRsZUNhc2UpO1xuXG4gICAgICBpZiAoc3R5bGVbcHJlZml4ZWRQcm9wZXJ0eU5hbWVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcHJvcGVydHlOYW1lID0gcHJlZml4ZWRQcm9wZXJ0eU5hbWU7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghb3B0X2J5cGFzc0NhY2hlKSB7XG4gICAgICBwcm9wZXJ0eU5hbWVDYWNoZVtjYW1lbENhc2VdID0gcHJvcGVydHlOYW1lO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcHJvcGVydHlOYW1lO1xufVxuXG5cbi8qKlxuICogU2V0cyB0aGUgQ1NTIHN0eWxlcyBvZiB0aGUgc3BlY2lmaWVkIGVsZW1lbnQgd2l0aCAhaW1wb3J0YW50LiBUaGUgc3R5bGVzXG4gKiBhcmUgc3BlY2lmaWVkIGFzIGEgbWFwIGZyb20gQ1NTIHByb3BlcnR5IG5hbWVzIHRvIHRoZWlyIHZhbHVlcy5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsICo+fSBzdHlsZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldEltcG9ydGFudFN0eWxlcyhlbGVtZW50LCBzdHlsZXMpIHtcbiAgZm9yIChjb25zdCBrIGluIHN0eWxlcykge1xuICAgIGVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoXG4gICAgICAgIGdldFZlbmRvckpzUHJvcGVydHlOYW1lKHN0eWxlcywgayksIHN0eWxlc1trXS50b1N0cmluZygpLCAnaW1wb3J0YW50Jyk7XG4gIH1cbn1cblxuXG4vKipcbiAqIFNldHMgdGhlIENTUyBzdHlsZSBvZiB0aGUgc3BlY2lmaWVkIGVsZW1lbnQgd2l0aCBvcHRpb25hbCB1bml0cywgZS5nLiBcInB4XCIuXG4gKiBAcGFyYW0gez9FbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHlcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X3VuaXRzXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfYnlwYXNzQ2FjaGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldFN0eWxlKGVsZW1lbnQsIHByb3BlcnR5LCB2YWx1ZSwgb3B0X3VuaXRzLCBvcHRfYnlwYXNzQ2FjaGUpIHtcbiAgY29uc3QgcHJvcGVydHlOYW1lID0gZ2V0VmVuZG9ySnNQcm9wZXJ0eU5hbWUoZWxlbWVudC5zdHlsZSwgcHJvcGVydHksXG4gICAgICBvcHRfYnlwYXNzQ2FjaGUpO1xuICBpZiAocHJvcGVydHlOYW1lKSB7XG4gICAgZWxlbWVudC5zdHlsZVtwcm9wZXJ0eU5hbWVdID1cbiAgICAgIC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAob3B0X3VuaXRzID8gdmFsdWUgKyBvcHRfdW5pdHMgOiB2YWx1ZSk7XG4gIH1cbn1cblxuXG4vKipcbiAqIFJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBDU1Mgc3R5bGUgb2YgdGhlIHNwZWNpZmllZCBlbGVtZW50LlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5XG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfYnlwYXNzQ2FjaGVcbiAqIEByZXR1cm4geyp9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdHlsZShlbGVtZW50LCBwcm9wZXJ0eSwgb3B0X2J5cGFzc0NhY2hlKSB7XG4gIGNvbnN0IHByb3BlcnR5TmFtZSA9IGdldFZlbmRvckpzUHJvcGVydHlOYW1lKGVsZW1lbnQuc3R5bGUsIHByb3BlcnR5LFxuICAgICAgb3B0X2J5cGFzc0NhY2hlKTtcbiAgaWYgKCFwcm9wZXJ0eU5hbWUpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIHJldHVybiBlbGVtZW50LnN0eWxlW3Byb3BlcnR5TmFtZV07XG59XG5cblxuLyoqXG4gKiBTZXRzIHRoZSBDU1Mgc3R5bGVzIG9mIHRoZSBzcGVjaWZpZWQgZWxlbWVudC4gVGhlIHN0eWxlc1xuICogYSBzcGVjaWZpZWQgYXMgYSBtYXAgZnJvbSBDU1MgcHJvcGVydHkgbmFtZXMgdG8gdGhlaXIgdmFsdWVzLlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgKj59IHN0eWxlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0U3R5bGVzKGVsZW1lbnQsIHN0eWxlcykge1xuICBmb3IgKGNvbnN0IGsgaW4gc3R5bGVzKSB7XG4gICAgc2V0U3R5bGUoZWxlbWVudCwgaywgc3R5bGVzW2tdKTtcbiAgfVxufVxuXG5cbi8qKlxuICogU2hvd3Mgb3IgaGlkZXMgdGhlIHNwZWNpZmllZCBlbGVtZW50LlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2Rpc3BsYXlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZShlbGVtZW50LCBvcHRfZGlzcGxheSkge1xuICBpZiAob3B0X2Rpc3BsYXkgPT09IHVuZGVmaW5lZCkge1xuICAgIG9wdF9kaXNwbGF5ID0gZ2V0U3R5bGUoZWxlbWVudCwgJ2Rpc3BsYXknKSA9PSAnbm9uZSc7XG4gIH1cbiAgc2V0U3R5bGUoZWxlbWVudCwgJ2Rpc3BsYXknLCBvcHRfZGlzcGxheSA/ICcnIDogJ25vbmUnKTtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgYSBwaXhlbCB2YWx1ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcHgodmFsdWUpIHtcbiAgcmV0dXJuIGAke3ZhbHVlfXB4YDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgZGVncmVlIHZhbHVlLlxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWcodmFsdWUpIHtcbiAgcmV0dXJuIGAke3ZhbHVlfWRlZ2A7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIFwidHJhbnNsYXRlWFwiIGZvciBDU1MgXCJ0cmFuc2Zvcm1cIiBwcm9wZXJ0eS5cbiAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30gdmFsdWVcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zbGF0ZVgodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBgdHJhbnNsYXRlWCgke3ZhbHVlfSlgO1xuICB9XG4gIHJldHVybiBgdHJhbnNsYXRlWCgke3B4KHZhbHVlKX0pYDtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgYSBcInRyYW5zbGF0ZVhcIiBmb3IgQ1NTIFwidHJhbnNmb3JtXCIgcHJvcGVydHkuXG4gKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9IHhcbiAqIEBwYXJhbSB7KG51bWJlcnxzdHJpbmcpPX0gb3B0X3lcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zbGF0ZSh4LCBvcHRfeSkge1xuICBpZiAodHlwZW9mIHggPT0gJ251bWJlcicpIHtcbiAgICB4ID0gcHgoeCk7XG4gIH1cbiAgaWYgKG9wdF95ID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gYHRyYW5zbGF0ZSgke3h9KWA7XG4gIH1cbiAgaWYgKHR5cGVvZiBvcHRfeSA9PSAnbnVtYmVyJykge1xuICAgIG9wdF95ID0gcHgob3B0X3kpO1xuICB9XG4gIHJldHVybiBgdHJhbnNsYXRlKCR7eH0sICR7b3B0X3l9KWA7XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIGEgXCJzY2FsZVwiIGZvciBDU1MgXCJ0cmFuc2Zvcm1cIiBwcm9wZXJ0eS5cbiAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30gdmFsdWVcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlKHZhbHVlKSB7XG4gIHJldHVybiBgc2NhbGUoJHt2YWx1ZX0pYDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgXCJyb3RhdGVcIiBmb3IgQ1NTIFwidHJhbnNmb3JtXCIgcHJvcGVydHkuXG4gKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9IHZhbHVlXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGUodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJykge1xuICAgIHZhbHVlID0gZGVnKHZhbHVlKTtcbiAgfVxuICByZXR1cm4gYHJvdGF0ZSgke3ZhbHVlfSlgO1xufVxuXG4vKipcbiAqIFJlbW92ZSBhbHBoYSB2YWx1ZSBmcm9tIGEgcmdiYSBjb2xvciB2YWx1ZS5cbiAqIFJldHVybiB0aGUgbmV3IGNvbG9yIHByb3BlcnR5IHdpdGggYWxwaGEgZXF1YWxzIGlmIGhhcyB0aGUgYWxwaGEgdmFsdWUuXG4gKiBDYWxsZXIgbmVlZHMgdG8gbWFrZSBzdXJlIHRoZSBpbnB1dCBjb2xvciB2YWx1ZSBpcyBhIHZhbGlkIHJnYmEvcmdiIHZhbHVlXG4gKiBAcGFyYW0ge3N0cmluZ30gcmdiYUNvbG9yXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVBbHBoYUZyb21Db2xvcihyZ2JhQ29sb3IpIHtcbiAgcmV0dXJuIHJnYmFDb2xvci5yZXBsYWNlKFxuICAgICAgL1xcKChbXixdKyksKFteLF0rKSwoW14sKV0rKSxbXildK1xcKS9nLCAnKCQxLCQyLCQzLCAxKScpO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIGNvbXB1dGVkIHN0eWxlIG9mIHRoZSBlbGVtZW50LiBUaGUgaGVscGVyIGlzIG5lY2Vzc2FyeSB0byBlbmZvcmNlXG4gKiB0aGUgcG9zc2libGUgYG51bGxgIHZhbHVlIHJldHVybmVkIGJ5IGEgYnVnZ3kgRmlyZWZveC5cbiAqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHshRWxlbWVudH0gZWxcbiAqIEByZXR1cm4geyFPYmplY3Q8c3RyaW5nLCBzdHJpbmc+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcHV0ZWRTdHlsZSh3aW4sIGVsKSB7XG4gIGNvbnN0IHN0eWxlID0gLyoqIEB0eXBlIHs/Q1NTU3R5bGVEZWNsYXJhdGlvbn0gKi8od2luLmdldENvbXB1dGVkU3R5bGUoZWwpKTtcbiAgcmV0dXJuIC8qKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz59ICovKHN0eWxlKSB8fCBtYXAoKTtcbn1cblxuXG4vKipcbiAqIFJlc2V0cyBzdHlsZXMgdGhhdCB3ZXJlIHNldCBkeW5hbWljYWxseSAoaS5lLiBpbmxpbmUpXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0geyFBcnJheTxzdHJpbmc+fSBwcm9wZXJ0aWVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNldFN0eWxlcyhlbGVtZW50LCBwcm9wZXJ0aWVzKSB7XG4gIGNvbnN0IHN0eWxlT2JqID0ge307XG4gIHByb3BlcnRpZXMuZm9yRWFjaChwcm9wID0+IHtcbiAgICBzdHlsZU9ialtwcm9wXSA9IG51bGw7XG4gIH0pO1xuICBzZXRTdHlsZXMoZWxlbWVudCwgc3R5bGVPYmopO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qIEBjb25zdCAqL1xuY29uc3QgdG9TdHJpbmdfID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBFQ01BIFtbQ2xhc3NdXSBvZiBhIHZhbHVlXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHRvU3RyaW5nKHZhbHVlKSB7XG4gIHJldHVybiB0b1N0cmluZ18uY2FsbCh2YWx1ZSk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiB2YWx1ZSBpcyBhY3R1YWxseSBhbiBBcnJheS5cbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0FycmF5KHZhbHVlKSB7XG4gIHJldHVybiBBcnJheS5pc0FycmF5KHZhbHVlKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhbiBhcnJheS1saWtlIG9iamVjdCB0byBhbiBhcnJheS5cbiAqIEBwYXJhbSB7P0lBcnJheUxpa2U8VD58c3RyaW5nfSBhcnJheUxpa2VcbiAqIEByZXR1cm4geyFBcnJheTxUPn1cbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0FycmF5KGFycmF5TGlrZSkge1xuICBpZiAoIWFycmF5TGlrZSkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBjb25zdCBhcnJheSA9IG5ldyBBcnJheShhcnJheUxpa2UubGVuZ3RoKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheUxpa2UubGVuZ3RoOyBpKyspIHtcbiAgICBhcnJheVtpXSA9IGFycmF5TGlrZVtpXTtcbiAgfVxuICByZXR1cm4gYXJyYXk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiB2YWx1ZSBpcyBhY3R1YWxseSBhbiBPYmplY3QuXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgcmV0dXJuIHRvU3RyaW5nKHZhbHVlKSA9PT0gJ1tvYmplY3QgT2JqZWN0XSc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiB2YWx1ZSBpcyBvZiBudW1iZXIgdHlwZSBhbmQgZmluaXRlLlxuICogTmFOIGFuZCBJbmZpbml0eSBhcmUgbm90IGNvbnNpZGVyZWQgYSBmaW5pdGUgbnVtYmVyLlxuICogU3RyaW5nIG51bWJlcnMgYXJlIG5vdCBjb25zaWRlcmVkIG51bWJlcnMuXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNGaW5pdGVOdW1iZXIodmFsdWUpIHtcbiAgcmV0dXJuICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmIGlzRmluaXRlKHZhbHVlKSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIHdoZXRoZXIgYHNgIGlzIGEgdmFsaWQgdmFsdWUgb2YgYGVudW1PYmpgLlxuICpcbiAqIEBwYXJhbSB7IU9iamVjdDxUPn0gZW51bU9ialxuICogQHBhcmFtIHtUfSBzXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRW51bVZhbHVlKGVudW1PYmosIHMpIHtcbiAgZm9yIChjb25zdCBrIGluIGVudW1PYmopIHtcbiAgICBpZiAoZW51bU9ialtrXSA9PT0gcykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBFeHRlcm5zIGRlY2xhcmUgdGhhdCBhY2Nlc3MgYGRlZmF1bHRWaWV3YCBmcm9tIGBkb2N1bWVudGAgb3JcbiAqIGBvd25lckRvY3VtZW50YCBpcyBvZiB0eXBlIGAoV2luZG93fG51bGwpYCBidXQgbW9zdCBvZiBvdXIgcGFyYW1ldGVyIHR5cGVzXG4gKiBhc3N1bWUgdGhhdCBpdCBpcyBuZXZlciBudWxsLiBUaGlzIGlzIE9LIGluIHByYWN0aWNlIGFzIHdlIGV2ZXIgb25seSBnZXRcbiAqIG51bGwgb24gZGlzY29ubmVjdGVkIGRvY3VtZW50cyBvciBvbGQgSUUuXG4gKiBUaGlzIGhlbHBlciBmdW5jdGlvbiBjYXN0cyBpdCBpbnRvIGp1c3QgYSBzaW1wbGUgV2luZG93IHJldHVybiB0eXBlLlxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd3xudWxsfSB3aW5Pck51bGxcbiAqIEByZXR1cm4geyFXaW5kb3d9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1dpbih3aW5Pck51bGwpIHtcbiAgcmV0dXJuIC8qKiBAdHlwZSB7IVdpbmRvd30gKi8gKHdpbk9yTnVsbCk7XG59XG5cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge3RyeURlY29kZVVyaUNvbXBvbmVudF99IGZyb20gJy4vdXJsLXRyeS1kZWNvZGUtdXJpLWNvbXBvbmVudCc7XG5cbmNvbnN0IHJlZ2V4ID0gLyg/Ol5bIz9dP3wmKShbXj0mXSspKD86PShbXiZdKikpPy9nO1xuXG4vKipcbiAqIFBhcnNlcyB0aGUgcXVlcnkgc3RyaW5nIG9mIGFuIFVSTC4gVGhpcyBtZXRob2QgcmV0dXJucyBhIHNpbXBsZSBrZXkvdmFsdWVcbiAqIG1hcC4gSWYgdGhlcmUgYXJlIGR1cGxpY2F0ZSBrZXlzIHRoZSBsYXRlc3QgdmFsdWUgaXMgcmV0dXJuZWQuXG4gKlxuICogRE8gTk9UIGltcG9ydCB0aGUgZnVuY3Rpb24gZnJvbSB0aGlzIGZpbGUuIEluc3RlYWQsIGltcG9ydCBwYXJzZVF1ZXJ5U3RyaW5nXG4gKiBmcm9tIGBzcmMvdXJsLmpzYC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcXVlcnlTdHJpbmdcbiAqIEByZXR1cm4geyFKc29uT2JqZWN0fVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VRdWVyeVN0cmluZ18ocXVlcnlTdHJpbmcpIHtcbiAgY29uc3QgcGFyYW1zID0gLyoqIEB0eXBlIHshSnNvbk9iamVjdH0gKi8gKE9iamVjdC5jcmVhdGUobnVsbCkpO1xuICBpZiAoIXF1ZXJ5U3RyaW5nKSB7XG4gICAgcmV0dXJuIHBhcmFtcztcbiAgfVxuXG4gIGxldCBtYXRjaDtcbiAgd2hpbGUgKChtYXRjaCA9IHJlZ2V4LmV4ZWMocXVlcnlTdHJpbmcpKSkge1xuICAgIGNvbnN0IG5hbWUgPSB0cnlEZWNvZGVVcmlDb21wb25lbnRfKG1hdGNoWzFdLCBtYXRjaFsxXSk7XG4gICAgY29uc3QgdmFsdWUgPSBtYXRjaFsyXSA/IHRyeURlY29kZVVyaUNvbXBvbmVudF8obWF0Y2hbMl0sIG1hdGNoWzJdKSA6ICcnO1xuICAgIHBhcmFtc1tuYW1lXSA9IHZhbHVlO1xuICB9XG4gIHJldHVybiBwYXJhbXM7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBUcmllcyB0byBkZWNvZGUgYSBVUkkgY29tcG9uZW50LCBmYWxsaW5nIGJhY2sgdG8gb3B0X2ZhbGxiYWNrIChvciBhbiBlbXB0eVxuICogc3RyaW5nKVxuICpcbiAqIERPIE5PVCBpbXBvcnQgdGhlIGZ1bmN0aW9uIGZyb20gdGhpcyBmaWxlLiBJbnN0ZWFkLCBpbXBvcnRcbiAqIHRyeURlY29kZVVyaUNvbXBvbmVudCBmcm9tIGBzcmMvdXJsLmpzYC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gY29tcG9uZW50XG4gKiBAcGFyYW0ge3N0cmluZz19IGZhbGxiYWNrXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cnlEZWNvZGVVcmlDb21wb25lbnRfKGNvbXBvbmVudCwgZmFsbGJhY2sgPSAnJykge1xuICB0cnkge1xuICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoY29tcG9uZW50KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxsYmFjaztcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7THJ1Q2FjaGV9IGZyb20gJy4vdXRpbHMvbHJ1LWNhY2hlJztcbmltcG9ydCB7ZGljdH0gZnJvbSAnLi91dGlscy9vYmplY3QnO1xuaW1wb3J0IHtlbmRzV2l0aCwgc3RhcnRzV2l0aH0gZnJvbSAnLi9zdHJpbmcnO1xuaW1wb3J0IHtnZXRNb2RlfSBmcm9tICcuL21vZGUnO1xuaW1wb3J0IHtpc0FycmF5fSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7cGFyc2VRdWVyeVN0cmluZ199IGZyb20gJy4vdXJsLXBhcnNlLXF1ZXJ5LXN0cmluZyc7XG5pbXBvcnQge3RyeURlY29kZVVyaUNvbXBvbmVudF99IGZyb20gJy4vdXJsLXRyeS1kZWNvZGUtdXJpLWNvbXBvbmVudCc7XG5pbXBvcnQge3VybHN9IGZyb20gJy4vY29uZmlnJztcbmltcG9ydCB7dXNlcn0gZnJvbSAnLi9sb2cnO1xuXG4vKipcbiAqIEB0eXBlIHshSnNvbk9iamVjdH1cbiAqL1xuY29uc3QgU0VSVklOR19UWVBFX1BSRUZJWCA9IGRpY3Qoe1xuICAvLyBObyB2aWV3ZXJcbiAgJ2MnOiB0cnVlLFxuICAvLyBJbiB2aWV3ZXJcbiAgJ3YnOiB0cnVlLFxuICAvLyBBZCBsYW5kaW5nIHBhZ2VcbiAgJ2EnOiB0cnVlLFxuICAvLyBBZFxuICAnYWQnOiB0cnVlLFxufSk7XG5cbi8qKlxuICogQ2FjaGVkIGEtdGFnIHRvIGF2b2lkIG1lbW9yeSBhbGxvY2F0aW9uIGR1cmluZyBVUkwgcGFyc2luZy5cbiAqIEB0eXBlIHtIVE1MQW5jaG9yRWxlbWVudH1cbiAqL1xubGV0IGE7XG5cbi8qKlxuICogV2UgY2FjaGVkIGFsbCBwYXJzZWQgVVJMcy4gQXMgb2Ygbm93IHRoZXJlIGFyZSBubyB1c2UgY2FzZXNcbiAqIG9mIEFNUCBkb2NzIHRoYXQgd291bGQgZXZlciBwYXJzZSBhbiBhY3R1YWwgbGFyZ2UgbnVtYmVyIG9mIFVSTHMsXG4gKiBidXQgd2Ugb2Z0ZW4gcGFyc2UgdGhlIHNhbWUgb25lIG92ZXIgYW5kIG92ZXIgYWdhaW4uXG4gKiBAdHlwZSB7THJ1Q2FjaGV9XG4gKi9cbmxldCBjYWNoZTtcblxuLyoqIEBwcml2YXRlIEBjb25zdCBNYXRjaGVzIGFtcF9qc18qIHBhcmFtZXRlcnMgaW4gcXVlcnkgc3RyaW5nLiAqL1xuY29uc3QgQU1QX0pTX1BBUkFNU19SRUdFWCA9IC9bPyZdYW1wX2pzW14mXSovO1xuXG4vKiogQHByaXZhdGUgQGNvbnN0IE1hdGNoZXMgYW1wX2dzYSBwYXJhbWV0ZXJzIGluIHF1ZXJ5IHN0cmluZy4gKi9cbmNvbnN0IEFNUF9HU0FfUEFSQU1TX1JFR0VYID0gL1s/Jl1hbXBfZ3NhW14mXSovO1xuXG4vKiogQHByaXZhdGUgQGNvbnN0IE1hdGNoZXMgYW1wX3IgcGFyYW1ldGVycyBpbiBxdWVyeSBzdHJpbmcuICovXG5jb25zdCBBTVBfUl9QQVJBTVNfUkVHRVggPSAvWz8mXWFtcF9yW14mXSovO1xuXG4vKiogQHByaXZhdGUgQGNvbnN0IE1hdGNoZXMgdXNxcCBwYXJhbWV0ZXJzIGZyb20gZ29vZyBleHBlcmltZW50IGluIHF1ZXJ5IHN0cmluZy4gKi9cbmNvbnN0IEdPT0dMRV9FWFBFUklNRU5UX1BBUkFNU19SRUdFWCA9IC9bPyZddXNxcFteJl0qLztcblxuY29uc3QgSU5WQUxJRF9QUk9UT0NPTFMgPSBbXG4gIC8qZXNsaW50IG5vLXNjcmlwdC11cmw6IDAqLyAnamF2YXNjcmlwdDonLFxuICAvKmVzbGludCBuby1zY3JpcHQtdXJsOiAwKi8gJ2RhdGE6JyxcbiAgLyplc2xpbnQgbm8tc2NyaXB0LXVybDogMCovICd2YnNjcmlwdDonLFxuXTtcblxuLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuZXhwb3J0IGNvbnN0IFNPVVJDRV9PUklHSU5fUEFSQU0gPSAnX19hbXBfc291cmNlX29yaWdpbic7XG5cbi8qKlxuICogUmV0dXJucyB0aGUgY29ycmVjdCBvcmlnaW4gZm9yIGEgZ2l2ZW4gd2luZG93LlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4ge3N0cmluZ30gb3JpZ2luXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRXaW5PcmlnaW4od2luKSB7XG4gIHJldHVybiB3aW4ub3JpZ2luIHx8IHBhcnNlVXJsRGVwcmVjYXRlZCh3aW4ubG9jYXRpb24uaHJlZikub3JpZ2luO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBMb2NhdGlvbi1saWtlIG9iamVjdCBmb3IgdGhlIGdpdmVuIFVSTC4gSWYgaXQgaXMgcmVsYXRpdmUsXG4gKiB0aGUgVVJMIGdldHMgcmVzb2x2ZWQuXG4gKiBDb25zaWRlciB0aGUgcmV0dXJuZWQgb2JqZWN0IGltbXV0YWJsZS4gVGhpcyBpcyBlbmZvcmNlZCBkdXJpbmdcbiAqIHRlc3RpbmcgYnkgZnJlZXppbmcgdGhlIG9iamVjdC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9ub2NhY2hlXG4gKiBAcmV0dXJuIHshTG9jYXRpb259XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVVybERlcHJlY2F0ZWQodXJsLCBvcHRfbm9jYWNoZSkge1xuICBpZiAoIWEpIHtcbiAgICBhID0gLyoqIEB0eXBlIHshSFRNTEFuY2hvckVsZW1lbnR9ICovIChzZWxmLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKSk7XG4gICAgY2FjaGUgPSBzZWxmLlVybENhY2hlIHx8IChzZWxmLlVybENhY2hlID0gbmV3IExydUNhY2hlKDEwMCkpO1xuICB9XG5cbiAgcmV0dXJuIHBhcnNlVXJsV2l0aEEoYSwgdXJsLCBvcHRfbm9jYWNoZSA/IG51bGwgOiBjYWNoZSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIExvY2F0aW9uLWxpa2Ugb2JqZWN0IGZvciB0aGUgZ2l2ZW4gVVJMLiBJZiBpdCBpcyByZWxhdGl2ZSxcbiAqIHRoZSBVUkwgZ2V0cyByZXNvbHZlZC5cbiAqIENvbnNpZGVyIHRoZSByZXR1cm5lZCBvYmplY3QgaW1tdXRhYmxlLiBUaGlzIGlzIGVuZm9yY2VkIGR1cmluZ1xuICogdGVzdGluZyBieSBmcmVlemluZyB0aGUgb2JqZWN0LlxuICogQHBhcmFtIHshSFRNTEFuY2hvckVsZW1lbnR9IGFcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7THJ1Q2FjaGU9fSBvcHRfY2FjaGVcbiAqIEByZXR1cm4geyFMb2NhdGlvbn1cbiAqIEByZXN0cmljdGVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVVybFdpdGhBKGEsIHVybCwgb3B0X2NhY2hlKSB7XG4gIGlmIChvcHRfY2FjaGUgJiYgb3B0X2NhY2hlLmhhcyh1cmwpKSB7XG4gICAgcmV0dXJuIG9wdF9jYWNoZS5nZXQodXJsKTtcbiAgfVxuXG4gIGEuaHJlZiA9IHVybDtcblxuICAvLyBJRTExIGRvZXNuJ3QgcHJvdmlkZSBmdWxsIFVSTCBjb21wb25lbnRzIHdoZW4gcGFyc2luZyByZWxhdGl2ZSBVUkxzLlxuICAvLyBBc3NpZ25pbmcgdG8gaXRzZWxmIGFnYWluIGRvZXMgdGhlIHRyaWNrICMzNDQ5LlxuICBpZiAoIWEucHJvdG9jb2wpIHtcbiAgICBhLmhyZWYgPSBhLmhyZWY7XG4gIH1cblxuICBjb25zdCBpbmZvID0gLyoqIEB0eXBlIHshTG9jYXRpb259ICovKHtcbiAgICBocmVmOiBhLmhyZWYsXG4gICAgcHJvdG9jb2w6IGEucHJvdG9jb2wsXG4gICAgaG9zdDogYS5ob3N0LFxuICAgIGhvc3RuYW1lOiBhLmhvc3RuYW1lLFxuICAgIHBvcnQ6IGEucG9ydCA9PSAnMCcgPyAnJyA6IGEucG9ydCxcbiAgICBwYXRobmFtZTogYS5wYXRobmFtZSxcbiAgICBzZWFyY2g6IGEuc2VhcmNoLFxuICAgIGhhc2g6IGEuaGFzaCxcbiAgICBvcmlnaW46IG51bGwsIC8vIFNldCBiZWxvdy5cbiAgfSk7XG5cbiAgLy8gU29tZSBJRTExIHNwZWNpZmljIHBvbHlmaWxscy5cbiAgLy8gMSkgSUUxMSBzdHJpcHMgb3V0IHRoZSBsZWFkaW5nICcvJyBpbiB0aGUgcGF0aG5hbWUuXG4gIGlmIChpbmZvLnBhdGhuYW1lWzBdICE9PSAnLycpIHtcbiAgICBpbmZvLnBhdGhuYW1lID0gJy8nICsgaW5mby5wYXRobmFtZTtcbiAgfVxuXG4gIC8vIDIpIEZvciBVUkxzIHdpdGggaW1wbGljaXQgcG9ydHMsIElFMTEgcGFyc2VzIHRvIGRlZmF1bHQgcG9ydHMgd2hpbGVcbiAgLy8gb3RoZXIgYnJvd3NlcnMgbGVhdmUgdGhlIHBvcnQgZmllbGQgZW1wdHkuXG4gIGlmICgoaW5mby5wcm90b2NvbCA9PSAnaHR0cDonICYmIGluZm8ucG9ydCA9PSA4MClcbiAgICAgIHx8IChpbmZvLnByb3RvY29sID09ICdodHRwczonICYmIGluZm8ucG9ydCA9PSA0NDMpKSB7XG4gICAgaW5mby5wb3J0ID0gJyc7XG4gICAgaW5mby5ob3N0ID0gaW5mby5ob3N0bmFtZTtcbiAgfVxuXG4gIC8vIEZvciBkYXRhIFVSSSBhLm9yaWdpbiBpcyBlcXVhbCB0byB0aGUgc3RyaW5nICdudWxsJyB3aGljaCBpcyBub3QgdXNlZnVsLlxuICAvLyBXZSBpbnN0ZWFkIHJldHVybiB0aGUgYWN0dWFsIG9yaWdpbiB3aGljaCBpcyB0aGUgZnVsbCBVUkwuXG4gIGlmIChhLm9yaWdpbiAmJiBhLm9yaWdpbiAhPSAnbnVsbCcpIHtcbiAgICBpbmZvLm9yaWdpbiA9IGEub3JpZ2luO1xuICB9IGVsc2UgaWYgKGluZm8ucHJvdG9jb2wgPT0gJ2RhdGE6JyB8fCAhaW5mby5ob3N0KSB7XG4gICAgaW5mby5vcmlnaW4gPSBpbmZvLmhyZWY7XG4gIH0gZWxzZSB7XG4gICAgaW5mby5vcmlnaW4gPSBpbmZvLnByb3RvY29sICsgJy8vJyArIGluZm8uaG9zdDtcbiAgfVxuXG4gIC8vIEZyZWV6ZSBkdXJpbmcgdGVzdGluZyB0byBhdm9pZCBhY2NpZGVudGFsIG11dGF0aW9uLlxuICBjb25zdCBmcm96ZW4gPSAoZ2V0TW9kZSgpLnRlc3QgJiYgT2JqZWN0LmZyZWV6ZSkgPyBPYmplY3QuZnJlZXplKGluZm8pIDogaW5mbztcblxuICBpZiAob3B0X2NhY2hlKSB7XG4gICAgb3B0X2NhY2hlLnB1dCh1cmwsIGZyb3plbik7XG4gIH1cblxuICByZXR1cm4gZnJvemVuO1xufVxuXG4vKipcbiAqIEFwcGVuZHMgdGhlIHN0cmluZyBqdXN0IGJlZm9yZSB0aGUgZnJhZ21lbnQgcGFydCAob3Igb3B0aW9uYWxseVxuICogdG8gdGhlIGZyb250IG9mIHRoZSBxdWVyeSBzdHJpbmcpIG9mIHRoZSBVUkwuXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge3N0cmluZ30gcGFyYW1TdHJpbmdcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9hZGRUb0Zyb250XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBlbmRFbmNvZGVkUGFyYW1TdHJpbmdUb1VybCh1cmwsIHBhcmFtU3RyaW5nLFxuICBvcHRfYWRkVG9Gcm9udCkge1xuICBpZiAoIXBhcmFtU3RyaW5nKSB7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuICBjb25zdCBtYWluQW5kRnJhZ21lbnQgPSB1cmwuc3BsaXQoJyMnLCAyKTtcbiAgY29uc3QgbWFpbkFuZFF1ZXJ5ID0gbWFpbkFuZEZyYWdtZW50WzBdLnNwbGl0KCc/JywgMik7XG5cbiAgbGV0IG5ld1VybCA9IG1haW5BbmRRdWVyeVswXSArIChcbiAgICBtYWluQW5kUXVlcnlbMV1cbiAgICAgID8gKG9wdF9hZGRUb0Zyb250XG4gICAgICAgID8gYD8ke3BhcmFtU3RyaW5nfSYke21haW5BbmRRdWVyeVsxXX1gXG4gICAgICAgIDogYD8ke21haW5BbmRRdWVyeVsxXX0mJHtwYXJhbVN0cmluZ31gKVxuICAgICAgOiBgPyR7cGFyYW1TdHJpbmd9YCk7XG4gIG5ld1VybCArPSBtYWluQW5kRnJhZ21lbnRbMV0gPyBgIyR7bWFpbkFuZEZyYWdtZW50WzFdfWAgOiAnJztcbiAgcmV0dXJuIG5ld1VybDtcbn1cbi8qKlxuICogQXBwZW5kcyBhIHF1ZXJ5IHN0cmluZyBmaWVsZCBhbmQgdmFsdWUgdG8gYSB1cmwuIGBrZXlgIGFuZCBgdmFsdWVgXG4gKiB3aWxsIGJlIHJhbiB0aHJvdWdoIGBlbmNvZGVVUklDb21wb25lbnRgIGJlZm9yZSBhcHBlbmRpbmcuXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5XG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9hZGRUb0Zyb250XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRQYXJhbVRvVXJsKHVybCwga2V5LCB2YWx1ZSwgb3B0X2FkZFRvRnJvbnQpIHtcbiAgY29uc3QgZmllbGQgPSBgJHtlbmNvZGVVUklDb21wb25lbnQoa2V5KX09JHtlbmNvZGVVUklDb21wb25lbnQodmFsdWUpfWA7XG4gIHJldHVybiBhcHBlbmRFbmNvZGVkUGFyYW1TdHJpbmdUb1VybCh1cmwsIGZpZWxkLCBvcHRfYWRkVG9Gcm9udCk7XG59XG5cbi8qKlxuICogQXBwZW5kcyBxdWVyeSBzdHJpbmcgZmllbGRzIGFuZCB2YWx1ZXMgdG8gYSB1cmwuIFRoZSBgcGFyYW1zYCBvYmplY3RzJ1xuICogYGtleWBzIGFuZCBgdmFsdWVgcyB3aWxsIGJlIHRyYW5zZm9ybWVkIGludG8gcXVlcnkgc3RyaW5nIGtleXMvdmFsdWVzLlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHBhcmFtIHshSnNvbk9iamVjdDxzdHJpbmcsIHN0cmluZ3whQXJyYXk8c3RyaW5nPj59IHBhcmFtc1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkUGFyYW1zVG9VcmwodXJsLCBwYXJhbXMpIHtcbiAgcmV0dXJuIGFwcGVuZEVuY29kZWRQYXJhbVN0cmluZ1RvVXJsKHVybCwgc2VyaWFsaXplUXVlcnlTdHJpbmcocGFyYW1zKSk7XG59XG5cbi8qKlxuICogU2VyaWFsaXplcyB0aGUgcGFzc2VkIHBhcmFtZXRlciBtYXAgaW50byBhIHF1ZXJ5IHN0cmluZyB3aXRoIGJvdGgga2V5c1xuICogYW5kIHZhbHVlcyBlbmNvZGVkLlxuICogQHBhcmFtIHshSnNvbk9iamVjdDxzdHJpbmcsIHN0cmluZ3whQXJyYXk8c3RyaW5nPj59IHBhcmFtc1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplUXVlcnlTdHJpbmcocGFyYW1zKSB7XG4gIGNvbnN0IHMgPSBbXTtcbiAgZm9yIChjb25zdCBrIGluIHBhcmFtcykge1xuICAgIGNvbnN0IHYgPSBwYXJhbXNba107XG4gICAgaWYgKHYgPT0gbnVsbCkge1xuICAgICAgY29udGludWU7XG4gICAgfSBlbHNlIGlmIChpc0FycmF5KHYpKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHYubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qgc3YgPSAvKiogQHR5cGUge3N0cmluZ30gKi8gKHZbaV0pO1xuICAgICAgICBzLnB1c2goYCR7ZW5jb2RlVVJJQ29tcG9uZW50KGspfT0ke2VuY29kZVVSSUNvbXBvbmVudChzdil9YCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHN2ID0gLyoqIEB0eXBlIHtzdHJpbmd9ICovICh2KTtcbiAgICAgIHMucHVzaChgJHtlbmNvZGVVUklDb21wb25lbnQoayl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHN2KX1gKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHMuam9pbignJicpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBVUkwgaXMgc2VjdXJlOiBlaXRoZXIgSFRUUFMgb3IgbG9jYWxob3N0IChmb3IgdGVzdGluZykuXG4gKiBAcGFyYW0ge3N0cmluZ3whTG9jYXRpb259IHVybFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU2VjdXJlVXJsRGVwcmVjYXRlZCh1cmwpIHtcbiAgaWYgKHR5cGVvZiB1cmwgPT0gJ3N0cmluZycpIHtcbiAgICB1cmwgPSBwYXJzZVVybERlcHJlY2F0ZWQodXJsKTtcbiAgfVxuICByZXR1cm4gKHVybC5wcm90b2NvbCA9PSAnaHR0cHM6JyB8fFxuICAgICAgdXJsLmhvc3RuYW1lID09ICdsb2NhbGhvc3QnIHx8XG4gICAgICBlbmRzV2l0aCh1cmwuaG9zdG5hbWUsICcubG9jYWxob3N0JykpO1xufVxuXG4vKipcbiAqIEFzc2VydHMgdGhhdCBhIGdpdmVuIHVybCBpcyBIVFRQUyBvciBwcm90b2NvbCByZWxhdGl2ZS4gSXQncyBhIHVzZXItbGV2ZWxcbiAqIGFzc2VydC5cbiAqXG4gKiBQcm92aWRlcyBhbiBleGNlcHRpb24gZm9yIGxvY2FsaG9zdC5cbiAqXG4gKiBAcGFyYW0gez9zdHJpbmd8dW5kZWZpbmVkfSB1cmxTdHJpbmdcbiAqIEBwYXJhbSB7IUVsZW1lbnR8c3RyaW5nfSBlbGVtZW50Q29udGV4dCBFbGVtZW50IHdoZXJlIHRoZSB1cmwgd2FzIGZvdW5kLlxuICogQHBhcmFtIHtzdHJpbmc9fSBzb3VyY2VOYW1lIFVzZWQgZm9yIGVycm9yIG1lc3NhZ2VzLlxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0SHR0cHNVcmwoXG4gIHVybFN0cmluZywgZWxlbWVudENvbnRleHQsIHNvdXJjZU5hbWUgPSAnc291cmNlJykge1xuICB1c2VyKCkuYXNzZXJ0KHVybFN0cmluZyAhPSBudWxsLCAnJXMgJXMgbXVzdCBiZSBhdmFpbGFibGUnLFxuICAgICAgZWxlbWVudENvbnRleHQsIHNvdXJjZU5hbWUpO1xuICAvLyAoZXJ3aW5tLCAjNDU2MCk6IHR5cGUgY2FzdCBuZWNlc3NhcnkgdW50aWwgIzQ1NjAgaXMgZml4ZWQuXG4gIGNvbnN0IHRoZVVybFN0cmluZyA9IC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAodXJsU3RyaW5nKTtcbiAgdXNlcigpLmFzc2VydChpc1NlY3VyZVVybERlcHJlY2F0ZWQodGhlVXJsU3RyaW5nKSB8fCAvXihcXC9cXC8pLy50ZXN0KHRoZVVybFN0cmluZyksXG4gICAgICAnJXMgJXMgbXVzdCBzdGFydCB3aXRoICcgK1xuICAgICAgJ1wiaHR0cHM6Ly9cIiBvciBcIi8vXCIgb3IgYmUgcmVsYXRpdmUgYW5kIHNlcnZlZCBmcm9tICcgK1xuICAgICAgJ2VpdGhlciBodHRwcyBvciBmcm9tIGxvY2FsaG9zdC4gSW52YWxpZCB2YWx1ZTogJXMnLFxuICAgICAgZWxlbWVudENvbnRleHQsIHNvdXJjZU5hbWUsIHRoZVVybFN0cmluZyk7XG4gIHJldHVybiB0aGVVcmxTdHJpbmc7XG59XG5cbi8qKlxuICogQXNzZXJ0cyB0aGF0IGEgZ2l2ZW4gdXJsIGlzIGFuIGFic29sdXRlIEhUVFAgb3IgSFRUUFMgVVJMLlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFN0cmluZ1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0QWJzb2x1dGVIdHRwT3JIdHRwc1VybCh1cmxTdHJpbmcpIHtcbiAgdXNlcigpLmFzc2VydCgvXmh0dHBzP1xcOi9pLnRlc3QodXJsU3RyaW5nKSxcbiAgICAgICdVUkwgbXVzdCBzdGFydCB3aXRoIFwiaHR0cDovL1wiIG9yIFwiaHR0cHM6Ly9cIi4gSW52YWxpZCB2YWx1ZTogJXMnLFxuICAgICAgdXJsU3RyaW5nKTtcbiAgcmV0dXJuIHBhcnNlVXJsRGVwcmVjYXRlZCh1cmxTdHJpbmcpLmhyZWY7XG59XG5cblxuLyoqXG4gKiBQYXJzZXMgdGhlIHF1ZXJ5IHN0cmluZyBvZiBhbiBVUkwuIFRoaXMgbWV0aG9kIHJldHVybnMgYSBzaW1wbGUga2V5L3ZhbHVlXG4gKiBtYXAuIElmIHRoZXJlIGFyZSBkdXBsaWNhdGUga2V5cyB0aGUgbGF0ZXN0IHZhbHVlIGlzIHJldHVybmVkLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gaXMgaW1wbGVtZW50ZWQgaW4gYSBzZXBhcmF0ZSBmaWxlIHRvIGF2b2lkIGEgY2lyY3VsYXJcbiAqIGRlcGVuZGVuY3kuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHF1ZXJ5U3RyaW5nXG4gKiBAcmV0dXJuIHshSnNvbk9iamVjdH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUXVlcnlTdHJpbmcocXVlcnlTdHJpbmcpIHtcbiAgcmV0dXJuIHBhcnNlUXVlcnlTdHJpbmdfKHF1ZXJ5U3RyaW5nKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBVUkwgd2l0aG91dCBmcmFnbWVudC4gSWYgVVJMIGRvZXNuJ3QgY29udGFpbiBmcmFnbWVudCwgdGhlIHNhbWVcbiAqIHN0cmluZyBpcyByZXR1cm5lZC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUZyYWdtZW50KHVybCkge1xuICBjb25zdCBpbmRleCA9IHVybC5pbmRleE9mKCcjJyk7XG4gIGlmIChpbmRleCA9PSAtMSkge1xuICAgIHJldHVybiB1cmw7XG4gIH1cbiAgcmV0dXJuIHVybC5zdWJzdHJpbmcoMCwgaW5kZXgpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGZyYWdtZW50IGZyb20gdGhlIFVSTC4gSWYgdGhlIFVSTCBkb2Vzbid0IGNvbnRhaW4gZnJhZ21lbnQsXG4gKiB0aGUgZW1wdHkgc3RyaW5nIGlzIHJldHVybmVkLlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnJhZ21lbnQodXJsKSB7XG4gIGNvbnN0IGluZGV4ID0gdXJsLmluZGV4T2YoJyMnKTtcbiAgaWYgKGluZGV4ID09IC0xKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIHJldHVybiB1cmwuc3Vic3RyaW5nKGluZGV4KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhlIFVSTCBoYXMgdGhlIG9yaWdpbiBvZiBhIHByb3h5LlxuICogQHBhcmFtIHtzdHJpbmd8IUxvY2F0aW9ufSB1cmwgVVJMIG9mIGFuIEFNUCBkb2N1bWVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1Byb3h5T3JpZ2luKHVybCkge1xuICBpZiAodHlwZW9mIHVybCA9PSAnc3RyaW5nJykge1xuICAgIHVybCA9IHBhcnNlVXJsRGVwcmVjYXRlZCh1cmwpO1xuICB9XG4gIHJldHVybiB1cmxzLmNkblByb3h5UmVnZXgudGVzdCh1cmwub3JpZ2luKTtcbn1cblxuLyoqXG4gKiBGb3IgcHJveHktb3JpZ2luIFVSTHMsIHJldHVybnMgdGhlIHNlcnZpbmcgdHlwZS4gT3RoZXJ3aXNlLCByZXR1cm5zIG51bGwuXG4gKiBFLmcuLCAnaHR0cHM6Ly9hbXAtY29tLmNkbi5hbXBwcm9qZWN0Lm9yZy9hL3MvYW1wLmNvbS9hbXBfZG9jdW1lbnQuaHRtbCdcbiAqIHJldHVybnMgJ2EnLlxuICogQHBhcmFtIHtzdHJpbmd8IUxvY2F0aW9ufSB1cmwgVVJMIG9mIGFuIEFNUCBkb2N1bWVudC5cbiAqIEByZXR1cm4gez9zdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcm94eVNlcnZpbmdUeXBlKHVybCkge1xuICBpZiAodHlwZW9mIHVybCA9PSAnc3RyaW5nJykge1xuICAgIHVybCA9IHBhcnNlVXJsRGVwcmVjYXRlZCh1cmwpO1xuICB9XG4gIGlmICghaXNQcm94eU9yaWdpbih1cmwpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgcGF0aCA9IHVybC5wYXRobmFtZS5zcGxpdCgnLycsIDIpO1xuICByZXR1cm4gcGF0aFsxXTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhlIFVSTCBvcmlnaW4gaXMgbG9jYWxob3N0LlxuICogQHBhcmFtIHtzdHJpbmd8IUxvY2F0aW9ufSB1cmwgVVJMIG9mIGFuIEFNUCBkb2N1bWVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0xvY2FsaG9zdE9yaWdpbih1cmwpIHtcbiAgaWYgKHR5cGVvZiB1cmwgPT0gJ3N0cmluZycpIHtcbiAgICB1cmwgPSBwYXJzZVVybERlcHJlY2F0ZWQodXJsKTtcbiAgfVxuICByZXR1cm4gdXJscy5sb2NhbGhvc3RSZWdleC50ZXN0KHVybC5vcmlnaW4pO1xufVxuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciB0aGUgVVJMIGhhcyB2YWxpZCBwcm90b2NvbC5cbiAqIERlZXAgbGluayBwcm90b2NvbCBpcyB2YWxpZCwgYnV0IG5vdCBqYXZhc2NyaXB0IGV0Yy5cbiAqIEBwYXJhbSB7c3RyaW5nfCFMb2NhdGlvbn0gdXJsXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNQcm90b2NvbFZhbGlkKHVybCkge1xuICBpZiAoIXVybCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmICh0eXBlb2YgdXJsID09ICdzdHJpbmcnKSB7XG4gICAgdXJsID0gcGFyc2VVcmxEZXByZWNhdGVkKHVybCk7XG4gIH1cbiAgcmV0dXJuICFJTlZBTElEX1BST1RPQ09MUy5pbmNsdWRlcyh1cmwucHJvdG9jb2wpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBVUkwgd2l0aG91dCBBTVAgSlMgcGFyYW1ldGVycy5cbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUFtcEpzUGFyYW1zRnJvbVVybCh1cmwpIHtcbiAgY29uc3QgcGFyc2VkID0gcGFyc2VVcmxEZXByZWNhdGVkKHVybCk7XG4gIGNvbnN0IHNlYXJjaCA9IHJlbW92ZUFtcEpzUGFyYW1zRnJvbVNlYXJjaChwYXJzZWQuc2VhcmNoKTtcbiAgcmV0dXJuIHBhcnNlZC5vcmlnaW4gKyBwYXJzZWQucGF0aG5hbWUgKyBzZWFyY2ggKyBwYXJzZWQuaGFzaDtcblxufVxuXG4vKipcbiAqIFJldHVybnMgYSBVUkwgd2l0aG91dCBhIHF1ZXJ5IHN0cmluZy5cbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVNlYXJjaCh1cmwpIHtcbiAgY29uc3QgaW5kZXggPSB1cmwuaW5kZXhPZignPycpO1xuICBpZiAoaW5kZXggPT0gLTEpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG4gIGNvbnN0IGZyYWdtZW50ID0gZ2V0RnJhZ21lbnQodXJsKTtcbiAgcmV0dXJuIHVybC5zdWJzdHJpbmcoMCwgaW5kZXgpICsgZnJhZ21lbnQ7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBwYXJhbWV0ZXJzIHRoYXQgc3RhcnQgd2l0aCBhbXAganMgcGFyYW1ldGVyIHBhdHRlcm4gYW5kIHJldHVybnMgdGhlXG4gKiBuZXcgc2VhcmNoIHN0cmluZy5cbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxTZWFyY2hcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gcmVtb3ZlQW1wSnNQYXJhbXNGcm9tU2VhcmNoKHVybFNlYXJjaCkge1xuICBpZiAoIXVybFNlYXJjaCB8fCB1cmxTZWFyY2ggPT0gJz8nKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIGNvbnN0IHNlYXJjaCA9IHVybFNlYXJjaFxuICAgICAgLnJlcGxhY2UoQU1QX0pTX1BBUkFNU19SRUdFWCwgJycpXG4gICAgICAucmVwbGFjZShBTVBfR1NBX1BBUkFNU19SRUdFWCwgJycpXG4gICAgICAucmVwbGFjZShBTVBfUl9QQVJBTVNfUkVHRVgsICcnKVxuICAgICAgLnJlcGxhY2UoR09PR0xFX0VYUEVSSU1FTlRfUEFSQU1TX1JFR0VYLCAnJylcbiAgICAgIC5yZXBsYWNlKC9eWz8mXS8sICcnKTsgLy8gUmVtb3ZlcyBmaXJzdCA/IG9yICYuXG4gIHJldHVybiBzZWFyY2ggPyAnPycgKyBzZWFyY2ggOiAnJztcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBzb3VyY2UgVVJMIG9mIGFuIEFNUCBkb2N1bWVudCBmb3IgZG9jdW1lbnRzIHNlcnZlZFxuICogb24gYSBwcm94eSBvcmlnaW4gb3IgZGlyZWN0bHkuXG4gKiBAcGFyYW0ge3N0cmluZ3whTG9jYXRpb259IHVybCBVUkwgb2YgYW4gQU1QIGRvY3VtZW50LlxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U291cmNlVXJsKHVybCkge1xuICBpZiAodHlwZW9mIHVybCA9PSAnc3RyaW5nJykge1xuICAgIHVybCA9IHBhcnNlVXJsRGVwcmVjYXRlZCh1cmwpO1xuICB9XG5cbiAgLy8gTm90IGEgcHJveHkgVVJMIC0gcmV0dXJuIHRoZSBVUkwgaXRzZWxmLlxuICBpZiAoIWlzUHJveHlPcmlnaW4odXJsKSkge1xuICAgIHJldHVybiB1cmwuaHJlZjtcbiAgfVxuXG4gIC8vIEEgcHJveHkgVVJMLlxuICAvLyBFeGFtcGxlIHBhdGggdGhhdCBpcyBiZWluZyBtYXRjaGVkIGhlcmUuXG4gIC8vIGh0dHBzOi8vY2RuLmFtcHByb2plY3Qub3JnL2Mvcy93d3cub3JpZ2luLmNvbS9mb28vXG4gIC8vIFRoZSAvcy8gaXMgb3B0aW9uYWwgYW5kIHNpZ25hbHMgYSBzZWN1cmUgb3JpZ2luLlxuICBjb25zdCBwYXRoID0gdXJsLnBhdGhuYW1lLnNwbGl0KCcvJyk7XG4gIGNvbnN0IHByZWZpeCA9IHBhdGhbMV07XG4gIHVzZXIoKS5hc3NlcnQoU0VSVklOR19UWVBFX1BSRUZJWFtwcmVmaXhdLFxuICAgICAgJ1Vua25vd24gcGF0aCBwcmVmaXggaW4gdXJsICVzJywgdXJsLmhyZWYpO1xuICBjb25zdCBkb21haW5Pckh0dHBzU2lnbmFsID0gcGF0aFsyXTtcbiAgY29uc3Qgb3JpZ2luID0gZG9tYWluT3JIdHRwc1NpZ25hbCA9PSAncydcbiAgICA/ICdodHRwczovLycgKyBkZWNvZGVVUklDb21wb25lbnQocGF0aFszXSlcbiAgICA6ICdodHRwOi8vJyArIGRlY29kZVVSSUNvbXBvbmVudChkb21haW5Pckh0dHBzU2lnbmFsKTtcbiAgLy8gU2FuaXR5IHRlc3QgdGhhdCB3aGF0IHdlIGZvdW5kIGxvb2tzIGxpa2UgYSBkb21haW4uXG4gIHVzZXIoKS5hc3NlcnQob3JpZ2luLmluZGV4T2YoJy4nKSA+IDAsICdFeHBlY3RlZCBhIC4gaW4gb3JpZ2luICVzJywgb3JpZ2luKTtcbiAgcGF0aC5zcGxpY2UoMSwgZG9tYWluT3JIdHRwc1NpZ25hbCA9PSAncycgPyAzIDogMik7XG4gIHJldHVybiBvcmlnaW4gKyBwYXRoLmpvaW4oJy8nKSArXG4gICAgICByZW1vdmVBbXBKc1BhcmFtc0Zyb21TZWFyY2godXJsLnNlYXJjaCkgKyAodXJsLmhhc2ggfHwgJycpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHNvdXJjZSBvcmlnaW4gb2YgYW4gQU1QIGRvY3VtZW50IGZvciBkb2N1bWVudHMgc2VydmVkXG4gKiBvbiBhIHByb3h5IG9yaWdpbiBvciBkaXJlY3RseS5cbiAqIEBwYXJhbSB7c3RyaW5nfCFMb2NhdGlvbn0gdXJsIFVSTCBvZiBhbiBBTVAgZG9jdW1lbnQuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBzb3VyY2Ugb3JpZ2luIG9mIHRoZSBVUkwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTb3VyY2VPcmlnaW4odXJsKSB7XG4gIHJldHVybiBwYXJzZVVybERlcHJlY2F0ZWQoZ2V0U291cmNlVXJsKHVybCkpLm9yaWdpbjtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFic29sdXRlIFVSTCByZXNvbHZlZCBiYXNlZCBvbiB0aGUgcmVsYXRpdmUgVVJMIGFuZCB0aGUgYmFzZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSByZWxhdGl2ZVVybFN0cmluZ1xuICogQHBhcmFtIHtzdHJpbmd8IUxvY2F0aW9ufSBiYXNlVXJsXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlUmVsYXRpdmVVcmwocmVsYXRpdmVVcmxTdHJpbmcsIGJhc2VVcmwpIHtcbiAgaWYgKHR5cGVvZiBiYXNlVXJsID09ICdzdHJpbmcnKSB7XG4gICAgYmFzZVVybCA9IHBhcnNlVXJsRGVwcmVjYXRlZChiYXNlVXJsKTtcbiAgfVxuICBpZiAodHlwZW9mIFVSTCA9PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIG5ldyBVUkwocmVsYXRpdmVVcmxTdHJpbmcsIGJhc2VVcmwuaHJlZikudG9TdHJpbmcoKTtcbiAgfVxuICByZXR1cm4gcmVzb2x2ZVJlbGF0aXZlVXJsRmFsbGJhY2tfKHJlbGF0aXZlVXJsU3RyaW5nLCBiYXNlVXJsKTtcbn1cblxuLyoqXG4gKiBGYWxsYmFjayBmb3IgVVJMIHJlc29sdmVyIHdoZW4gVVJMIGNsYXNzIGlzIG5vdCBhdmFpbGFibGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVsYXRpdmVVcmxTdHJpbmdcbiAqIEBwYXJhbSB7c3RyaW5nfCFMb2NhdGlvbn0gYmFzZVVybFxuICogQHJldHVybiB7c3RyaW5nfVxuICogQHByaXZhdGUgVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVSZWxhdGl2ZVVybEZhbGxiYWNrXyhyZWxhdGl2ZVVybFN0cmluZywgYmFzZVVybCkge1xuICBpZiAodHlwZW9mIGJhc2VVcmwgPT0gJ3N0cmluZycpIHtcbiAgICBiYXNlVXJsID0gcGFyc2VVcmxEZXByZWNhdGVkKGJhc2VVcmwpO1xuICB9XG4gIHJlbGF0aXZlVXJsU3RyaW5nID0gcmVsYXRpdmVVcmxTdHJpbmcucmVwbGFjZSgvXFxcXC9nLCAnLycpO1xuICBjb25zdCByZWxhdGl2ZVVybCA9IHBhcnNlVXJsRGVwcmVjYXRlZChyZWxhdGl2ZVVybFN0cmluZyk7XG5cbiAgLy8gQWJzb2x1dGUgVVJMLlxuICBpZiAoc3RhcnRzV2l0aChyZWxhdGl2ZVVybFN0cmluZy50b0xvd2VyQ2FzZSgpLCByZWxhdGl2ZVVybC5wcm90b2NvbCkpIHtcbiAgICByZXR1cm4gcmVsYXRpdmVVcmwuaHJlZjtcbiAgfVxuXG4gIC8vIFByb3RvY29sLXJlbGF0aXZlIFVSTC5cbiAgaWYgKHN0YXJ0c1dpdGgocmVsYXRpdmVVcmxTdHJpbmcsICcvLycpKSB7XG4gICAgcmV0dXJuIGJhc2VVcmwucHJvdG9jb2wgKyByZWxhdGl2ZVVybFN0cmluZztcbiAgfVxuXG4gIC8vIEFic29sdXRlIHBhdGguXG4gIGlmIChzdGFydHNXaXRoKHJlbGF0aXZlVXJsU3RyaW5nLCAnLycpKSB7XG4gICAgcmV0dXJuIGJhc2VVcmwub3JpZ2luICsgcmVsYXRpdmVVcmxTdHJpbmc7XG4gIH1cblxuICAvLyBSZWxhdGl2ZSBwYXRoLlxuICByZXR1cm4gYmFzZVVybC5vcmlnaW4gKyBiYXNlVXJsLnBhdGhuYW1lLnJlcGxhY2UoL1xcL1teL10qJC8sICcvJylcbiAgICAgICsgcmVsYXRpdmVVcmxTdHJpbmc7XG59XG5cblxuLyoqXG4gKiBBZGQgXCJfX2FtcF9zb3VyY2Vfb3JpZ2luXCIgcXVlcnkgcGFyYW1ldGVyIHRvIHRoZSBVUkwuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29yc1VybCh3aW4sIHVybCkge1xuICBjaGVja0NvcnNVcmwodXJsKTtcbiAgY29uc3Qgc291cmNlT3JpZ2luID0gZ2V0U291cmNlT3JpZ2luKHdpbi5sb2NhdGlvbi5ocmVmKTtcbiAgcmV0dXJuIGFkZFBhcmFtVG9VcmwodXJsLCBTT1VSQ0VfT1JJR0lOX1BBUkFNLCBzb3VyY2VPcmlnaW4pO1xufVxuXG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSB1cmwgaGFzIF9fYW1wX3NvdXJjZV9vcmlnaW4gYW5kIHRocm93cyBpZiBpdCBkb2VzLlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICovXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tDb3JzVXJsKHVybCkge1xuICBjb25zdCBwYXJzZWRVcmwgPSBwYXJzZVVybERlcHJlY2F0ZWQodXJsKTtcbiAgY29uc3QgcXVlcnkgPSBwYXJzZVF1ZXJ5U3RyaW5nKHBhcnNlZFVybC5zZWFyY2gpO1xuICB1c2VyKCkuYXNzZXJ0KCEoU09VUkNFX09SSUdJTl9QQVJBTSBpbiBxdWVyeSksXG4gICAgICAnU291cmNlIG9yaWdpbiBpcyBub3QgYWxsb3dlZCBpbiAlcycsIHVybCk7XG59XG5cbi8qKlxuICogVHJpZXMgdG8gZGVjb2RlIGEgVVJJIGNvbXBvbmVudCwgZmFsbGluZyBiYWNrIHRvIG9wdF9mYWxsYmFjayAob3IgYW4gZW1wdHlcbiAqIHN0cmluZylcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gY29tcG9uZW50XG4gKiBAcGFyYW0ge3N0cmluZz19IG9wdF9mYWxsYmFja1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJ5RGVjb2RlVXJpQ29tcG9uZW50KGNvbXBvbmVudCwgb3B0X2ZhbGxiYWNrKSB7XG4gIHJldHVybiB0cnlEZWNvZGVVcmlDb21wb25lbnRfKGNvbXBvbmVudCwgb3B0X2ZhbGxiYWNrKTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbi8qKlxuICogQ29tcGFyZXMgaWYgdHdvIGFycmF5cyBjb250YWlucyBleGFjdGx5IHNhbWUgZWxlbWVudHMgb2Ygc2FtZSBudW1iZXJcbiAqIG9mIHNhbWUgb3JkZXIuXG4gKiBOb3RpY2UgdGhhdCBpdCBkb2VzIE5PVCBoYW5kbGUgTmFOIGNhc2UgYXMgZXhwZWN0ZWRcbiAqXG4gKiBAcGFyYW0geyFBcnJheTxUPn0gYXJyMVxuICogQHBhcmFtIHshQXJyYXk8VD59IGFycjJcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gYXJlRXF1YWxPcmRlcmVkKGFycjEsIGFycjIpIHtcbiAgaWYgKGFycjEubGVuZ3RoICE9PSBhcnIyLmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyMS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChhcnIxW2ldICE9PSBhcnIyW2ldKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogQSBiaXQgbGlrZSBBcnJheSNmaWx0ZXIsIGJ1dCByZW1vdmVzIGVsZW1lbnRzIHRoYXQgZmlsdGVyIGZhbHNlIGZyb20gdGhlXG4gKiBhcnJheS4gUmV0dXJucyB0aGUgZmlsdGVyZWQgaXRlbXMuXG4gKlxuICogQHBhcmFtIHshQXJyYXk8VD59IGFycmF5XG4gKiBAcGFyYW0ge2Z1bmN0aW9uKFQsIG51bWJlciwgIUFycmF5PFQ+KTpib29sZWFufSBmaWx0ZXJcbiAqIEByZXR1cm4geyFBcnJheTxUPn1cbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJTcGxpY2UoYXJyYXksIGZpbHRlcikge1xuICBjb25zdCBzcGxpY2UgPSBbXTtcbiAgbGV0IGluZGV4ID0gMDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGl0ZW0gPSBhcnJheVtpXTtcbiAgICBpZiAoZmlsdGVyKGl0ZW0sIGksIGFycmF5KSkge1xuICAgICAgaWYgKGluZGV4IDwgaSkge1xuICAgICAgICBhcnJheVtpbmRleF0gPSBpdGVtO1xuICAgICAgfVxuICAgICAgaW5kZXgrKztcbiAgICB9IGVsc2Uge1xuICAgICAgc3BsaWNlLnB1c2goaXRlbSk7XG4gICAgfVxuICB9XG5cbiAgaWYgKGluZGV4IDwgYXJyYXkubGVuZ3RoKSB7XG4gICAgYXJyYXkubGVuZ3RoID0gaW5kZXg7XG4gIH1cblxuICByZXR1cm4gc3BsaWNlO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBlbGVtZW50IG1hdGNoaW5nIHRoZSBwcmVkaWNhdGUuXG4gKiBMaWtlIEFycmF5I2ZpbmRJbmRleC5cbiAqXG4gKiBAcGFyYW0geyFBcnJheTxUPn0gYXJyYXlcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oVCwgbnVtYmVyLCAhQXJyYXk8VD4pOmJvb2xlYW59IHByZWRpY2F0ZVxuICogQHJldHVybiB7bnVtYmVyfVxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRJbmRleChhcnJheSwgcHJlZGljYXRlKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAocHJlZGljYXRlKGFycmF5W2ldLCBpLCBhcnJheSkpIHtcbiAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gLTE7XG59XG5cbi8qKlxuICogQ29udmVydHMgdGhlIGdpdmVuIGl0ZXJhdG9yIHRvIGFuIGFycmF5LlxuICpcbiAqIEBwYXJhbSB7IUl0ZXJhdG9yPFQ+fSBpdGVyYXRvclxuICogQHJldHVybiB7QXJyYXk8VD59XG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbUl0ZXJhdG9yKGl0ZXJhdG9yKSB7XG4gIGNvbnN0IGFycmF5ID0gW107XG4gIGZvciAobGV0IGUgPSBpdGVyYXRvci5uZXh0KCk7ICFlLmRvbmU7IGUgPSBpdGVyYXRvci5uZXh0KCkpIHtcbiAgICBhcnJheS5wdXNoKGUudmFsdWUpO1xuICB9XG4gIHJldHVybiBhcnJheTtcbn1cblxuLyoqXG4gKiBBZGRzIGl0ZW0gdG8gYXJyYXkgaWYgaXQgaXMgbm90IGFscmVhZHkgcHJlc2VudC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PFQ+fSBhcnJheVxuICogQHBhcmFtIHtUfSBpdGVtXG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gcHVzaElmTm90RXhpc3QoYXJyYXksIGl0ZW0pIHtcbiAgaWYgKGFycmF5LmluZGV4T2YoaXRlbSkgPCAwKSB7XG4gICAgYXJyYXkucHVzaChpdGVtKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Ynl0ZXNUb1N0cmluZywgc3RyaW5nVG9CeXRlcywgdXRmOEVuY29kZX0gZnJvbSAnLi9ieXRlcyc7XG5cbi8qKlxuICogQ2hhcmFjdGVyIG1hcHBpbmcgZnJvbSBiYXNlNjR1cmwgdG8gYmFzZTY0LlxuICogQGNvbnN0IHshT2JqZWN0PHN0cmluZywgc3RyaW5nPn1cbiAqL1xuY29uc3QgYmFzZTY0VXJsRGVjb2RlU3VicyA9IHsnLSc6ICcrJywgJ18nOiAnLycsICcuJzogJz0nfTtcblxuLyoqXG4gKiBDaGFyYWN0ZXIgbWFwcGluZyBmcm9tIGJhc2U2NCB0byBiYXNlNjR1cmwuXG4gKiBAY29uc3QgeyFPYmplY3Q8c3RyaW5nLCBzdHJpbmc+fVxuICovXG5jb25zdCBiYXNlNjRVcmxFbmNvZGVTdWJzID0geycrJzogJy0nLCAnLyc6ICdfJywgJz0nOiAnLid9O1xuXG4vKipcbiAqIENvbnZlcnRzIGEgc3RyaW5nIHdoaWNoIGlzIGluIGJhc2U2NHVybCBlbmNvZGluZyBpbnRvIGEgVWludDhBcnJheVxuICogY29udGFpbmluZyB0aGUgZGVjb2RlZCB2YWx1ZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcbiAqIEByZXR1cm4geyFVaW50OEFycmF5fVxuICovXG5leHBvcnQgZnVuY3Rpb24gYmFzZTY0VXJsRGVjb2RlVG9CeXRlcyhzdHIpIHtcbiAgY29uc3QgZW5jb2RlZCA9IGF0b2Ioc3RyLnJlcGxhY2UoL1stXy5dL2csIGNoID0+IGJhc2U2NFVybERlY29kZVN1YnNbY2hdKSk7XG4gIHJldHVybiBzdHJpbmdUb0J5dGVzKGVuY29kZWQpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgc3RyaW5nIHdoaWNoIGlzIGluIGJhc2U2NCBlbmNvZGluZyBpbnRvIGEgVWludDhBcnJheVxuICogY29udGFpbmluZyB0aGUgZGVjb2RlZCB2YWx1ZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcbiAqIEByZXR1cm4geyFVaW50OEFycmF5fVxuICovXG5leHBvcnQgZnVuY3Rpb24gYmFzZTY0RGVjb2RlVG9CeXRlcyhzdHIpIHtcbiAgcmV0dXJuIHN0cmluZ1RvQnl0ZXMoYXRvYihzdHIpKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhIGJ5dGVzIGFycmF5IGludG8gYmFzZTY0dXJsIGVuY29kZWQgc3RyaW5nLlxuICogYmFzZTY0dXJsIGlzIGRlZmluZWQgaW4gUkZDIDQ2NDguIEl0IGlzIHNvbWV0aW1lcyByZWZlcnJlZCB0byBhcyBcIndlYiBzYWZlXCIuXG4gKiBAcGFyYW0geyFVaW50OEFycmF5fSBieXRlc1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gYmFzZTY0VXJsRW5jb2RlRnJvbUJ5dGVzKGJ5dGVzKSB7XG4gIGNvbnN0IHN0ciA9IGJ5dGVzVG9TdHJpbmcoYnl0ZXMpO1xuICByZXR1cm4gYnRvYShzdHIpLnJlcGxhY2UoL1srLz1dL2csIGNoID0+IGJhc2U2NFVybEVuY29kZVN1YnNbY2hdKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhIHN0cmluZyBpbnRvIGJhc2U2NHVybCBlbmNvZGVkIHN0cmluZy5cbiAqIGJhc2U2NHVybCBpcyBkZWZpbmVkIGluIFJGQyA0NjQ4LiBJdCBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgXCJ3ZWIgc2FmZVwiLlxuICogQHBhcmFtIHtzdHJpbmd9IHN0clxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gYmFzZTY0VXJsRW5jb2RlRnJvbVN0cmluZyhzdHIpIHtcbiAgY29uc3QgYnl0ZXMgPSB1dGY4RW5jb2RlKHN0cik7XG4gIHJldHVybiBiYXNlNjRVcmxFbmNvZGVGcm9tQnl0ZXMoYnl0ZXMpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgYnl0ZXMgYXJyYXkgaW50byBiYXNlNjQgZW5jb2RlZCBzdHJpbmcuXG4gKiBAcGFyYW0geyFVaW50OEFycmF5fSBieXRlc1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gYmFzZTY0RW5jb2RlRnJvbUJ5dGVzKGJ5dGVzKSB7XG4gIHJldHVybiBidG9hKGJ5dGVzVG9TdHJpbmcoYnl0ZXMpKTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge2Rldn0gZnJvbSAnLi4vbG9nJztcblxuLyoqXG4gKiBJbnRlcnByZXQgYSBieXRlIGFycmF5IGFzIGEgVVRGLTggc3RyaW5nLlxuICogQHBhcmFtIHshQnVmZmVyU291cmNlfSBieXRlc1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gdXRmOERlY29kZShieXRlcykge1xuICBpZiAodHlwZW9mIFRleHREZWNvZGVyICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoJ3V0Zi04JykuZGVjb2RlKGJ5dGVzKTtcbiAgfVxuICBjb25zdCBhc2NpaVN0cmluZyA9IGJ5dGVzVG9TdHJpbmcobmV3IFVpbnQ4QXJyYXkoYnl0ZXMuYnVmZmVyIHx8IGJ5dGVzKSk7XG4gIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoZXNjYXBlKGFzY2lpU3RyaW5nKSk7XG59XG5cbi8qKlxuICogVHVybiBhIHN0cmluZyBpbnRvIFVURi04IGJ5dGVzLlxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZ1xuICogQHJldHVybiB7IVVpbnQ4QXJyYXl9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1dGY4RW5jb2RlKHN0cmluZykge1xuICBpZiAodHlwZW9mIFRleHRFbmNvZGVyICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBuZXcgVGV4dEVuY29kZXIoJ3V0Zi04JykuZW5jb2RlKHN0cmluZyk7XG4gIH1cbiAgcmV0dXJuIHN0cmluZ1RvQnl0ZXModW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZykpKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhIHN0cmluZyB3aGljaCBob2xkcyA4LWJpdCBjb2RlIHBvaW50cywgc3VjaCBhcyB0aGUgcmVzdWx0IG9mIGF0b2IsXG4gKiBpbnRvIGEgVWludDhBcnJheSB3aXRoIHRoZSBjb3JyZXNwb25kaW5nIGJ5dGVzLlxuICogSWYgeW91IGhhdmUgYSBzdHJpbmcgb2YgY2hhcmFjdGVycywgeW91IHByb2JhYmx5IHdhbnQgdG8gYmUgdXNpbmcgdXRmOEVuY29kZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcbiAqIEByZXR1cm4geyFVaW50OEFycmF5fVxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5nVG9CeXRlcyhzdHIpIHtcbiAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShzdHIubGVuZ3RoKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBjaGFyQ29kZSA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgIGRldigpLmFzc2VydChjaGFyQ29kZSA8PSAyNTUsICdDaGFyYWN0ZXJzIG11c3QgYmUgaW4gcmFuZ2UgWzAsMjU1XScpO1xuICAgIGJ5dGVzW2ldID0gY2hhckNvZGU7XG4gIH1cbiAgcmV0dXJuIGJ5dGVzO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgOC1iaXQgYnl0ZXMgYXJyYXkgaW50byBhIHN0cmluZ1xuICogQHBhcmFtIHshVWludDhBcnJheX0gYnl0ZXNcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ5dGVzVG9TdHJpbmcoYnl0ZXMpIHtcbiAgLy8gSW50ZW50aW9uYWxseSBhdm9pZHMgU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseSBzbyB3ZSBkb24ndCBzdWZmZXIgYVxuICAvLyBzdGFjayBvdmVyZmxvdy4gIzEwNDk1LCBodHRwczovL2pzcGVyZi5jb20vYnl0ZXNUb1N0cmluZy0yXG4gIGNvbnN0IGFycmF5ID0gbmV3IEFycmF5KGJ5dGVzLmxlbmd0aCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYnl0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICBhcnJheVtpXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaV0pO1xuICB9XG4gIHJldHVybiBhcnJheS5qb2luKCcnKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhIDQtaXRlbSBieXRlIGFycmF5IHRvIGFuIHVuc2lnbmVkIGludGVnZXIuXG4gKiBBc3N1bWVzIGJ5dGVzIGFyZSBiaWcgZW5kaWFuLlxuICogQHBhcmFtIHshVWludDhBcnJheX0gYnl0ZXNcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ5dGVzVG9VSW50MzIoYnl0ZXMpIHtcbiAgaWYgKGJ5dGVzLmxlbmd0aCAhPSA0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdSZWNlaXZlZCBieXRlIGFycmF5IHdpdGggbGVuZ3RoICE9IDQnKTtcbiAgfVxuICBjb25zdCB2YWwgPSAoYnl0ZXNbMF0gJiAweEZGKSA8PCAyNCB8XG4gICAgIChieXRlc1sxXSAmIDB4RkYpIDw8IDE2IHxcbiAgICAgKGJ5dGVzWzJdICYgMHhGRikgPDwgOCB8XG4gICAgIChieXRlc1szXSAmIDB4RkYpO1xuICAvLyBDb252ZXJ0IHRvIHVuc2lnbmVkLlxuICByZXR1cm4gdmFsID4+PiAwO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlIGEgcmFuZG9tIGJ5dGVzIGFycmF5IHdpdGggc3BlY2lmaWMgbGVuZ3RoIHVzaW5nXG4gKiB3aW4uY3J5cHRvLmdldFJhbmRvbVZhbHVlcy4gUmV0dXJuIG51bGwgaWYgaXQgaXMgbm90IGF2YWlsYWJsZS5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge251bWJlcn0gbGVuZ3RoXG4gKiBAcmV0dXJuIHs/VWludDhBcnJheX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENyeXB0b1JhbmRvbUJ5dGVzQXJyYXkod2luLCBsZW5ndGgpIHtcbiAgaWYgKCF3aW4uY3J5cHRvIHx8ICF3aW4uY3J5cHRvLmdldFJhbmRvbVZhbHVlcykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLy8gV2lkZWx5IGF2YWlsYWJsZSBpbiBicm93c2VycyB3ZSBzdXBwb3J0OlxuICAvLyBodHRwOi8vY2FuaXVzZS5jb20vI3NlYXJjaD1nZXRSYW5kb21WYWx1ZXNcbiAgY29uc3QgdWludDhhcnJheSA9IG5ldyBVaW50OEFycmF5KGxlbmd0aCk7XG4gIHdpbi5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKHVpbnQ4YXJyYXkpO1xuICByZXR1cm4gdWludDhhcnJheTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge2Rldn0gZnJvbSAnLi4vbG9nJztcblxuLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuY29uc3QgVEFHID0gJ2xydS1jYWNoZSc7XG5cbi8qKlxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGNsYXNzIExydUNhY2hlIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBjYXBhY2l0eVxuICAgKi9cbiAgY29uc3RydWN0b3IoY2FwYWNpdHkpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtudW1iZXJ9ICovXG4gICAgdGhpcy5jYXBhY2l0eV8gPSBjYXBhY2l0eTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7bnVtYmVyfSAqL1xuICAgIHRoaXMuc2l6ZV8gPSAwO1xuXG4gICAgLyoqXG4gICAgICogQW4gaW5jcmVtZW50aW5nIGNvdW50ZXIgdG8gZGVmaW5lIHRoZSBsYXN0IGFjY2Vzcy5cbiAgICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuYWNjZXNzXyA9IDA7XG5cbiAgICAvKiogQHByaXZhdGUgeyFPYmplY3Q8KG51bWJlcnxzdHJpbmcpLCB7cGF5bG9hZDogVCwgYWNjZXNzOiBudW1iZXJ9Pn0gKi9cbiAgICB0aGlzLmNhY2hlXyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIGtleSBpcyBjYWNoZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30ga2V5XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBoYXMoa2V5KSB7XG4gICAgcmV0dXJuICEhdGhpcy5jYWNoZV9ba2V5XTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9IGtleVxuICAgKiBAcmV0dXJuIHtUfSBUaGUgY2FjaGVkIHBheWxvYWQuXG4gICAqL1xuICBnZXQoa2V5KSB7XG4gICAgY29uc3QgY2FjaGVhYmxlID0gdGhpcy5jYWNoZV9ba2V5XTtcbiAgICBpZiAoY2FjaGVhYmxlKSB7XG4gICAgICBjYWNoZWFibGUuYWNjZXNzID0gKyt0aGlzLmFjY2Vzc187XG4gICAgICByZXR1cm4gY2FjaGVhYmxlLnBheWxvYWQ7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSBrZXlcbiAgICogQHBhcmFtIHtUfSBwYXlsb2FkIFRoZSBwYXlsb2FkIHRvIGNhY2hlLlxuICAgKi9cbiAgcHV0KGtleSwgcGF5bG9hZCkge1xuICAgIGlmICghdGhpcy5oYXMoa2V5KSkge1xuICAgICAgdGhpcy5zaXplXysrO1xuICAgIH1cbiAgICB0aGlzLmNhY2hlX1trZXldID0ge3BheWxvYWQsIGFjY2VzczogdGhpcy5hY2Nlc3NffTtcbiAgICB0aGlzLmV2aWN0XygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEV2aWN0cyB0aGUgb2xkZXN0IGNhY2hlIGVudHJ5LCBpZiB3ZSd2ZSBleGNlZWRlZCBjYXBhY2l0eS5cbiAgICovXG4gIGV2aWN0XygpIHtcbiAgICBpZiAodGhpcy5zaXplXyA8PSB0aGlzLmNhcGFjaXR5Xykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGRldigpLndhcm4oVEFHLCAnVHJpbW1pbmcgTFJVIGNhY2hlJyk7XG4gICAgY29uc3QgY2FjaGUgPSB0aGlzLmNhY2hlXztcbiAgICBsZXQgb2xkZXN0ID0gdGhpcy5hY2Nlc3NfICsgMTtcbiAgICBsZXQgb2xkZXN0S2V5O1xuICAgIGZvciAoY29uc3Qga2V5IGluIGNhY2hlKSB7XG4gICAgICBjb25zdCB7YWNjZXNzfSA9IGNhY2hlW2tleV07XG4gICAgICBpZiAoYWNjZXNzIDwgb2xkZXN0KSB7XG4gICAgICAgIG9sZGVzdCA9IGFjY2VzcztcbiAgICAgICAgb2xkZXN0S2V5ID0ga2V5O1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChvbGRlc3RLZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZGVsZXRlIGNhY2hlW29sZGVzdEtleV07XG4gICAgICB0aGlzLnNpemVfLS07XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtpc09iamVjdH0gZnJvbSAnLi4vdHlwZXMnO1xuXG4vKiBAY29uc3QgKi9cbmNvbnN0IGhhc093bl8gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIFJldHVybnMgYSBtYXAtbGlrZSBvYmplY3QuXG4gKiBJZiBvcHRfaW5pdGlhbCBpcyBwcm92aWRlZCwgY29waWVzIGl0cyBvd24gcHJvcGVydGllcyBpbnRvIHRoZVxuICogbmV3bHkgY3JlYXRlZCBvYmplY3QuXG4gKiBAcGFyYW0ge1Q9fSBvcHRfaW5pdGlhbCBUaGlzIHNob3VsZCB0eXBpY2FsbHkgYmUgYW4gb2JqZWN0IGxpdGVyYWwuXG4gKiBAcmV0dXJuIHtUfVxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hcChvcHRfaW5pdGlhbCkge1xuICBjb25zdCBvYmogPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBpZiAob3B0X2luaXRpYWwpIHtcbiAgICBPYmplY3QuYXNzaWduKG9iaiwgb3B0X2luaXRpYWwpO1xuICB9XG4gIHJldHVybiBvYmo7XG59XG5cbi8qKlxuICogUmV0dXJuIGFuIGVtcHR5IEpzb25PYmplY3Qgb3IgbWFrZXMgdGhlIHBhc3NlZCBpbiBvYmplY3QgbGl0ZXJhbFxuICogYW4gSnNvbk9iamVjdC5cbiAqIFRoZSBKc29uT2JqZWN0IHR5cGUgaXMganVzdCBhIHNpbXBsZSBvYmplY3QgdGhhdCBpcyBhdC1kaWN0LlxuICogU2VlXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtY29tcGlsZXIvd2lraS9Ac3RydWN0LWFuZC1AZGljdC1Bbm5vdGF0aW9uc1xuICogZm9yIHdoYXQgYSBkaWN0IGlzIHR5cGUtd2lzZS5cbiAqIFRoZSBsaW50ZXIgZW5mb3JjZXMgdGhhdCB0aGUgYXJndW1lbnQgaXMsIGluIGZhY3QsIGF0LWRpY3QgbGlrZS5cbiAqIEBwYXJhbSB7IU9iamVjdD19IG9wdF9pbml0aWFsXG4gKiBAcmV0dXJuIHshSnNvbk9iamVjdH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpY3Qob3B0X2luaXRpYWwpIHtcbiAgLy8gV2UgZG8gbm90IGNvcHkuIFRoZSBsaW50ZXIgZW5mb3JjZXMgdGhhdCB0aGUgcGFzc2VkIGluIG9iamVjdCBpcyBhIGxpdGVyYWxcbiAgLy8gYW5kIHRodXMgdGhlIGNhbGxlciBjYW5ub3QgaGF2ZSBhIHJlZmVyZW5jZSB0byBpdC5cbiAgcmV0dXJuIC8qKiBAdHlwZSB7IUpzb25PYmplY3R9ICovIChvcHRfaW5pdGlhbCB8fCB7fSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSBnaXZlbiBrZXkgaXMgYSBwcm9wZXJ0eSBpbiB0aGUgbWFwLlxuICpcbiAqIEBwYXJhbSB7VH0gIG9iaiBhIG1hcCBsaWtlIHByb3BlcnR5LlxuICogQHBhcmFtIHtzdHJpbmd9ICBrZXlcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzT3duKG9iaiwga2V5KSB7XG4gIHJldHVybiBoYXNPd25fLmNhbGwob2JqLCBrZXkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgb2JqW2tleV0gaWZmIGtleSBpcyBvYmoncyBvd24gcHJvcGVydHkgKGlzIG5vdCBpbmhlcml0ZWQpLlxuICogT3RoZXJ3aXNlLCByZXR1cm5zIHVuZGVmaW5lZC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5XG4gKiBAcmV0dXJuIHsqfVxuICovXG5leHBvcnQgZnVuY3Rpb24gb3duUHJvcGVydHkob2JqLCBrZXkpIHtcbiAgaWYgKGhhc093bihvYmosIGtleSkpIHtcbiAgICByZXR1cm4gb2JqW2tleV07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuXG4vKipcbiAqIERlZXAgbWVyZ2VzIHNvdXJjZSBpbnRvIHRhcmdldC5cbiAqXG4gKiBAcGFyYW0geyFPYmplY3R9IHRhcmdldFxuICogQHBhcmFtIHshT2JqZWN0fSBzb3VyY2VcbiAqIEBwYXJhbSB7bnVtYmVyfSBkZXB0aCBUaGUgbWF4aW11bSBtZXJnZSBkZXB0aC4gSWYgZXhjZWVkZWQsIE9iamVjdC5hc3NpZ25cbiAqICAgICAgICAgICAgICAgICAgICAgICB3aWxsIGJlIHVzZWQgaW5zdGVhZC5cbiAqIEByZXR1cm4geyFPYmplY3R9XG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgc291cmNlIGNvbnRhaW5zIGEgY2lyY3VsYXIgcmVmZXJlbmNlLlxuICogTm90ZTogT25seSBuZXN0ZWQgb2JqZWN0cyBhcmUgZGVlcC1tZXJnZWQsIHByaW1pdGl2ZXMgYW5kIGFycmF5cyBhcmUgbm90LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVlcE1lcmdlKHRhcmdldCwgc291cmNlLCBkZXB0aCA9IDEwKSB7XG4gIC8vIEtlZXAgdHJhY2sgb2Ygc2VlbiBvYmplY3RzIHRvIGRldGVjdCByZWN1cnNpdmUgcmVmZXJlbmNlcy5cbiAgY29uc3Qgc2VlbiA9IFtdO1xuXG4gIC8qKiBAdHlwZSB7IUFycmF5PHt0OiAhT2JqZWN0LCBzOiAhT2JqZWN0LCBkOiBudW1iZXJ9Pn0gKi9cbiAgY29uc3QgcXVldWUgPSBbXTtcbiAgcXVldWUucHVzaCh7dDogdGFyZ2V0LCBzOiBzb3VyY2UsIGQ6IDB9KTtcblxuICAvLyBCRlMgdG8gZW5zdXJlIG9iamVjdHMgZG9uJ3QgaGF2ZSByZWN1cnNpdmUgcmVmZXJlbmNlcyBhdCBzaGFsbG93ZXIgZGVwdGhzLlxuICB3aGlsZSAocXVldWUubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IHt0LCBzLCBkfSA9IHF1ZXVlLnNoaWZ0KCk7XG4gICAgaWYgKHNlZW4uaW5jbHVkZXMocykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignU291cmNlIG9iamVjdCBoYXMgYSBjaXJjdWxhciByZWZlcmVuY2UuJyk7XG4gICAgfVxuICAgIHNlZW4ucHVzaChzKTtcbiAgICBpZiAodCA9PT0gcykge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChkID4gZGVwdGgpIHtcbiAgICAgIE9iamVjdC5hc3NpZ24odCwgcyk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgT2JqZWN0LmtleXMocykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgY29uc3QgbmV3VmFsdWUgPSBzW2tleV07XG4gICAgICAvLyBQZXJmb3JtIGEgZGVlcCBtZXJnZSBJRkYgYm90aCB0YXJnZXQgYW5kIHNvdXJjZSBoYXZlIHRoZSBzYW1lIGtleVxuICAgICAgLy8gd2hvc2UgY29ycmVzcG9uZGluZyB2YWx1ZXMgYXJlIG9iamVjdHMuXG4gICAgICBpZiAoaGFzT3duKHQsIGtleSkpIHtcbiAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSB0W2tleV07XG4gICAgICAgIGlmIChpc09iamVjdChuZXdWYWx1ZSkgJiYgaXNPYmplY3Qob2xkVmFsdWUpKSB7XG4gICAgICAgICAgcXVldWUucHVzaCh7dDogb2xkVmFsdWUsIHM6IG5ld1ZhbHVlLCBkOiBkICsgMX0pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdFtrZXldID0gbmV3VmFsdWU7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHRhcmdldDtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyFPYmplY3R9IG8gQW4gb2JqZWN0IHRvIHJlbW92ZSBwcm9wZXJ0aWVzIGZyb21cbiAqIEBwYXJhbSB7IUFycmF5PHN0cmluZz59IHByb3BzIEEgbGlzdCBvZiBwcm9wZXJ0aWVzIHRvIHJlbW92ZSBmcm9tIHRoZSBPYmplY3RcbiAqIEByZXR1cm4geyFPYmplY3R9IEFuIG9iamVjdCB3aXRoIHRoZSBnaXZlbiBwcm9wZXJ0aWVzIHJlbW92ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9taXQobywgcHJvcHMpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKG8pLnJlZHVjZSgoYWNjLCBrZXkpID0+IHtcbiAgICBpZiAoIXByb3BzLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgIGFjY1trZXldID0gb1trZXldO1xuICAgIH1cbiAgICByZXR1cm4gYWNjO1xuICB9LCB7fSk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtiYXNlNjREZWNvZGVUb0J5dGVzfSBmcm9tICcuL2Jhc2U2NCc7XG5cblxuLyoqXG4gKiBDb252ZXJ0cyBhIHRleHQgaW4gUEVNIGZvcm1hdCBpbnRvIGEgYmluYXJ5IGFycmF5IGJ1ZmZlci5cbiAqIEBwYXJhbSB7c3RyaW5nfSBwZW1cbiAqIEByZXR1cm4geyFVaW50OEFycmF5fVxuICogQHZpc2libGVGb3JUZXN0aW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwZW1Ub0J5dGVzKHBlbSkge1xuICBwZW0gPSBwZW0udHJpbSgpO1xuXG4gIC8vIFJlbW92ZSBwZW0gcHJlZml4LCBlLmcuIFwiLS0tLUJFR0lOIFBVQkxJQyBLRVktLS0tXCIuXG4gIHBlbSA9IHBlbS5yZXBsYWNlKC9eXFwtK0JFR0lOW14tXSpcXC0rLywgJycpO1xuXG4gIC8vIFJlbW92ZSBwZW0gc3VmZml4LCBlLmcuIFwiLS0tLUVORCBQVUJMSUMgS0VZLS0tLVwiLlxuICBwZW0gPSBwZW0ucmVwbGFjZSgvXFwtK0VORFteLV0qXFwtKyQvLCAnJyk7XG5cbiAgLy8gUmVtb3ZlIGxpbmUgYnJlYWtzLlxuICBwZW0gPSBwZW0ucmVwbGFjZSgvW1xcclxcbl0vZywgJycpLnRyaW0oKTtcblxuICByZXR1cm4gYmFzZTY0RGVjb2RlVG9CeXRlcyhwZW0pO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogUmV0dXJucyBhIERlZmVycmVkIHN0cnVjdCwgd2hpY2ggaG9sZHMgYSBwZW5kaW5nIHByb21pc2UgYW5kIGl0cyBhc3NvY2lhdGVkXG4gKiByZXNvbHZlIGFuZCByZWplY3QgZnVuY3Rpb25zLlxuICpcbiAqIFRoaXMgaXMgcHJlZmVycmVkIGluc3RlYWQgb2YgY3JlYXRpbmcgYSBQcm9taXNlIGluc3RhbmNlIHRvIGV4dHJhY3QgdGhlXG4gKiByZXNvbHZlL3JlamVjdCBmdW5jdGlvbnMgeW91cnNlbGY6XG4gKlxuICogYGBgXG4gKiAvLyBBdm9pZCBkb2luZ1xuICogbGV0IHJlc29sdmU7XG4gKiBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UocmVzID0+IHtcbiAqICAgcmVzb2x2ZSA9IHJlcztcbiAqIH0pO1xuICpcbiAqIC8vIEdvb2RcbiAqIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XG4gKiBjb25zdCB7IHByb21pc2UsIHJlc29sdmUgfSA9IGRlZmVycmVkO1xuICogYGBgXG4gKlxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGNsYXNzIERlZmVycmVkIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgRGVmZXJyZWQuXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBsZXQgcmVzb2x2ZSwgcmVqZWN0O1xuXG4gICAgLyoqXG4gICAgICogQGNvbnN0IHshUHJvbWlzZTxUPn1cbiAgICAgKi9cbiAgICB0aGlzLnByb21pc2UgPSBuZXcgLypPSyovUHJvbWlzZSgocmVzLCByZWopID0+IHtcbiAgICAgIHJlc29sdmUgPSByZXM7XG4gICAgICByZWplY3QgPSByZWo7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAY29uc3Qge2Z1bmN0aW9uKFQ9KX1cbiAgICAgKi9cbiAgICB0aGlzLnJlc29sdmUgPSByZXNvbHZlO1xuXG4gICAgLyoqXG4gICAgICogQGNvbnN0IHtmdW5jdGlvbigqPSl9XG4gICAgICovXG4gICAgdGhpcy5yZWplY3QgPSByZWplY3Q7XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgcHJvbWlzZSByZXNvbHZlZCB0byB0aGUgcmV0dXJuIHZhbHVlIG9mIGZuLlxuICogSWYgZm4gc3luYyB0aHJvd3MsIGl0IHdpbGwgY2F1c2UgdGhlIHByb21pc2UgdG8gcmVqZWN0LlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKTpUfSBmblxuICogQHJldHVybiB7IVByb21pc2U8VD59XG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJ5UmVzb2x2ZShmbikge1xuICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgcmVzb2x2ZShmbigpKTtcbiAgfSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2Ugd2hpY2ggcmVzb2x2ZXMgaWYgYSB0aHJlc2hvbGQgYW1vdW50IG9mIHRoZSBnaXZlbiBwcm9taXNlc1xuICogcmVzb2x2ZSwgYW5kIHJlamVjdHMgb3RoZXJ3aXNlLlxuICogQHBhcmFtIHshQXJyYXk8IVByb21pc2U+fSBwcm9taXNlcyBUaGUgYXJyYXkgb2YgcHJvbWlzZXMgdG8gdGVzdC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBjb3VudCBUaGUgbnVtYmVyIG9mIHByb21pc2VzIHRoYXQgbXVzdCByZXNvbHZlIGZvciB0aGVcbiAqICAgICByZXR1cm5lZCBwcm9taXNlIHRvIHJlc29sdmUuXG4gKiBAcmV0dXJuIHshUHJvbWlzZX0gQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgaWYgYW55IG9mIHRoZSBnaXZlbiBwcm9taXNlc1xuICogICAgIHJlc29sdmUsIGFuZCB3aGljaCByZWplY3RzIG90aGVyd2lzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNvbWUocHJvbWlzZXMsIGNvdW50ID0gMSkge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvdW50ID0gTWF0aC5tYXgoY291bnQsIDApO1xuICAgIGNvbnN0IGV4dHJhID0gcHJvbWlzZXMubGVuZ3RoIC0gY291bnQ7XG4gICAgaWYgKGV4dHJhIDwgMCkge1xuICAgICAgcmVqZWN0KG5ldyBFcnJvcignbm90IGVub3VnaCBwcm9taXNlcyB0byByZXNvbHZlJykpO1xuICAgIH1cbiAgICBpZiAocHJvbWlzZXMubGVuZ3RoID09IDApIHtcbiAgICAgIHJlc29sdmUoW10pO1xuICAgIH1cbiAgICBjb25zdCB2YWx1ZXMgPSBbXTtcbiAgICBjb25zdCByZWFzb25zID0gW107XG5cbiAgICBjb25zdCBvbkZ1bGZpbGxlZCA9IHZhbHVlID0+IHtcbiAgICAgIGlmICh2YWx1ZXMubGVuZ3RoIDwgY291bnQpIHtcbiAgICAgICAgdmFsdWVzLnB1c2godmFsdWUpO1xuICAgICAgfVxuICAgICAgaWYgKHZhbHVlcy5sZW5ndGggPT0gY291bnQpIHtcbiAgICAgICAgcmVzb2x2ZSh2YWx1ZXMpO1xuICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgb25SZWplY3RlZCA9IHJlYXNvbiA9PiB7XG4gICAgICBpZiAocmVhc29ucy5sZW5ndGggPD0gZXh0cmEpIHtcbiAgICAgICAgcmVhc29ucy5wdXNoKHJlYXNvbik7XG4gICAgICB9XG4gICAgICBpZiAocmVhc29ucy5sZW5ndGggPiBleHRyYSkge1xuICAgICAgICByZWplY3QocmVhc29ucyk7XG4gICAgICB9XG4gICAgfTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb21pc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBQcm9taXNlLnJlc29sdmUocHJvbWlzZXNbaV0pLnRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpO1xuICAgIH1cbiAgfSk7XG59XG5cbi8qKlxuICogUmVzb2x2ZXMgd2l0aCB0aGUgcmVzdWx0IG9mIHRoZSBsYXN0IHByb21pc2UgYWRkZWQuXG4gKiBAaW1wbGVtZW50cyB7SVRoZW5hYmxlfVxuICovXG5leHBvcnQgY2xhc3MgTGFzdEFkZGVkUmVzb2x2ZXIge1xuICAvKipcbiAgICogQHBhcmFtIHshQXJyYXk8IVByb21pc2U+PX0gb3B0X3Byb21pc2VzXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRfcHJvbWlzZXMpIHtcbiAgICBsZXQgcmVzb2x2ZV8sIHJlamVjdF87XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVByb21pc2V9ICovXG4gICAgdGhpcy5wcm9taXNlXyA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHJlc29sdmVfID0gcmVzb2x2ZTtcbiAgICAgIHJlamVjdF8gPSByZWplY3Q7XG4gICAgfSk7XG5cbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICB0aGlzLnJlc29sdmVfID0gcmVzb2x2ZV87XG5cbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICB0aGlzLnJlamVjdF8gPSByZWplY3RfO1xuXG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgdGhpcy5jb3VudF8gPSAwO1xuXG4gICAgaWYgKG9wdF9wcm9taXNlcykge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcHRfcHJvbWlzZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5hZGQob3B0X3Byb21pc2VzW2ldKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgcHJvbWlzZSB0byBwb3NzaWJseSBiZSByZXNvbHZlZC5cbiAgICogQHBhcmFtIHshUHJvbWlzZX0gcHJvbWlzZVxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIGFkZChwcm9taXNlKSB7XG4gICAgY29uc3QgY291bnRBdEFkZCA9ICsrdGhpcy5jb3VudF87XG4gICAgUHJvbWlzZS5yZXNvbHZlKHByb21pc2UpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgIGlmICh0aGlzLmNvdW50XyA9PT0gY291bnRBdEFkZCkge1xuICAgICAgICB0aGlzLnJlc29sdmVfKHJlc3VsdCk7XG4gICAgICB9XG4gICAgfSwgZXJyb3IgPT4ge1xuICAgICAgLy8gRG9uJ3QgZm9sbG93IGJlaGF2aW9yIG9mIFByb21pc2UuYWxsIGFuZCBQcm9taXNlLnJhY2UgZXJyb3Igc28gdGhhdFxuICAgICAgLy8gdGhpcyB3aWxsIG9ubHkgcmVqZWN0IHdoZW4gbW9zdCByZWNlbnRseSBhZGRlZCBwcm9taXNlIGZhaWxzLlxuICAgICAgaWYgKHRoaXMuY291bnRfID09PSBjb3VudEF0QWRkKSB7XG4gICAgICAgIHRoaXMucmVqZWN0XyhlcnJvcik7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMucHJvbWlzZV87XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHRoZW4ob3B0X3Jlc29sdmUsIG9wdF9yZWplY3QpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9taXNlXy50aGVuKG9wdF9yZXNvbHZlLCBvcHRfcmVqZWN0KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7U2VydmljZXN9IGZyb20gJy4uL3NlcnZpY2VzJztcbmltcG9ydCB7ZGV2LCB1c2VyfSBmcm9tICcuLi9sb2cnO1xuaW1wb3J0IHtkaWN0LCBtYXB9IGZyb20gJy4vb2JqZWN0JztcbmltcG9ydCB7ZnJvbUl0ZXJhdG9yfSBmcm9tICcuL2FycmF5JztcbmltcG9ydCB7Z2V0Q29yc1VybCwgZ2V0U291cmNlT3JpZ2luLCBnZXRXaW5PcmlnaW4sIGlzUHJveHlPcmlnaW4sIHBhcnNlVXJsRGVwcmVjYXRlZH0gZnJvbSAnLi4vdXJsJztcbmltcG9ydCB7Z2V0TW9kZX0gZnJvbSAnLi4vbW9kZSc7XG5pbXBvcnQge2lzQXJyYXksIGlzT2JqZWN0fSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQge2lzRm9ybURhdGFXcmFwcGVyfSBmcm9tICcuLi9mb3JtLWRhdGEtd3JhcHBlcic7XG5pbXBvcnQge3BhcnNlSnNvbn0gZnJvbSAnLi4vanNvbic7XG5pbXBvcnQge3V0ZjhFbmNvZGV9IGZyb20gJy4vYnl0ZXMnO1xuXG4vKiogQHByaXZhdGUgQGNvbnN0IHshQXJyYXk8c3RyaW5nPn0gKi9cbmNvbnN0IGFsbG93ZWRNZXRob2RzXyA9IFsnR0VUJywgJ1BPU1QnXTtcblxuLyoqIEBwcml2YXRlIEBjb25zdCB7c3RyaW5nfSAqL1xuY29uc3QgQUxMT1dfU09VUkNFX09SSUdJTl9IRUFERVIgPSAnQU1QLUFjY2Vzcy1Db250cm9sLUFsbG93LVNvdXJjZS1PcmlnaW4nO1xuXG4vKipcbiAqIFRoZSBcImluaXRcIiBhcmd1bWVudCBvZiB0aGUgRmV0Y2ggQVBJLiBDdXJyZW50bHksIG9ubHkgXCJjcmVkZW50aWFsczogaW5jbHVkZVwiXG4gKiBpcyBpbXBsZW1lbnRlZC4gIE5vdGUgYW1wQ29ycyB3aXRoIGV4cGxpY2l0IGZhbHNlIGluZGljYXRlcyB0aGF0XG4gKiBfX2FtcF9zb3VyY2Vfb3JpZ2luIHNob3VsZCBub3QgYmUgYXBwZW5kZWQgdG8gdGhlIFVSTCB0byBhbGxvdyBmb3JcbiAqIHBvdGVudGlhbCBjYWNoaW5nIG9yIHJlc3BvbnNlIGFjcm9zcyBwYWdlcy5cbiAqXG4gKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0dsb2JhbEZldGNoL2ZldGNoXG4gKlxuICogQHR5cGVkZWYge3tcbiAqICAgYm9keTogKCFPYmplY3R8IUFycmF5fHVuZGVmaW5lZHxzdHJpbmcpLFxuICogICBjcmVkZW50aWFsczogKHN0cmluZ3x1bmRlZmluZWQpLFxuICogICBoZWFkZXJzOiAoIUpzb25PYmplY3R8dW5kZWZpbmVkKSxcbiAqICAgbWV0aG9kOiAoc3RyaW5nfHVuZGVmaW5lZCksXG4gKiAgIHJlcXVpcmVBbXBSZXNwb25zZVNvdXJjZU9yaWdpbjogKGJvb2xlYW58dW5kZWZpbmVkKSxcbiAqICAgYW1wQ29yczogKGJvb2xlYW58dW5kZWZpbmVkKVxuICogfX1cbiAqL1xuZXhwb3J0IGxldCBGZXRjaEluaXREZWY7XG5cbi8qKlxuICogU2VyaWFsaXplcyBhIGZldGNoIHJlcXVlc3Qgc28gdGhhdCBpdCBjYW4gYmUgcGFzc2VkIHRvIGBwb3N0TWVzc2FnZSgpYCxcbiAqIGkuZS4sIGNhbiBiZSBjbG9uZWQgdXNpbmcgdGhlXG4gKiBbc3RydWN0dXJlZCBjbG9uZSBhbGdvcml0aG1dKGh0dHA6Ly9tZG4uaW8vU3RydWN0dXJlZF9jbG9uZV9hbGdvcml0aG0pLlxuICpcbiAqIFRoZSByZXF1ZXN0IGlzIHNlcmlhbGl6ZWQgaW4gdGhlIGZvbGxvd2luZyB3YXk6XG4gKlxuICogMS4gSWYgdGhlIGBpbml0LmJvZHlgIGlzIGEgYEZvcm1EYXRhYCwgc2V0IGNvbnRlbnQtdHlwZSBoZWFkZXIgdG9cbiAqIGBtdWx0aXBhcnQvZm9ybS1kYXRhYCBhbmQgdHJhbnNmb3JtIGBpbml0LmJvZHlgIGludG8gYW5cbiAqIGAhQXJyYXk8IUFycmF5PHN0cmluZz4+YCBob2xkaW5nIHRoZSBsaXN0IG9mIGZvcm0gZW50cmllcywgd2hlcmUgZWFjaFxuICogZWxlbWVudCBpbiB0aGUgYXJyYXkgaXMgYSBmb3JtIGVudHJ5IChrZXktdmFsdWUgcGFpcikgcmVwcmVzZW50ZWQgYXMgYVxuICogMi1lbGVtZW50IGFycmF5LlxuICpcbiAqIDIuIFJldHVybiBhIG5ldyBvYmplY3QgaGF2aW5nIHByb3BlcnRpZXMgYGlucHV0YCBhbmQgdGhlIHRyYW5zZm9ybWVkXG4gKiBgaW5pdGAuXG4gKlxuICogVGhlIHNlcmlhbGl6ZWQgcmVxdWVzdCBpcyBhc3N1bWVkIHRvIGJlIGRlLXNlcmlhbGl6ZWQgaW4gdGhlIGZvbGxvd2luZyB3YXk6XG4gKlxuICogMS5JZiBjb250ZW50LXR5cGUgaGVhZGVyIHN0YXJ0cyB3aXRoIGBtdWx0aXBhcnQvZm9ybS1kYXRhYFxuICogKGNhc2UtaW5zZW5zaXRpdmUpLCB0cmFuc2Zvcm0gdGhlIGVudHJ5IGFycmF5IGluIGBpbml0LmJvZHlgIGludG8gYVxuICogYEZvcm1EYXRhYCBvYmplY3QuXG4gKlxuICogMi4gUGFzcyBgaW5wdXRgIGFuZCB0cmFuc2Zvcm1lZCBgaW5pdGAgdG8gYGZldGNoYCAob3IgdGhlIGNvbnN0cnVjdG9yIG9mXG4gKiBgUmVxdWVzdGApLlxuICpcbiAqIEN1cnJlbnRseSBvbmx5IGBGb3JtRGF0YWAgdXNlZCBpbiBgaW5pdC5ib2R5YCBpcyBoYW5kbGVkIGFzIGl0J3MgdGhlIG9ubHlcbiAqIHR5cGUgYmVpbmcgdXNlZCBpbiBBTVAgcnVudGltZSB0aGF0IG5lZWRzIHNlcmlhbGl6YXRpb24uIFRoZSBgSGVhZGVyc2AgdHlwZVxuICogYWxzbyBuZWVkcyBzZXJpYWxpemF0aW9uLCBidXQgY2FsbGVycyBzaG91bGQgbm90IGJlIHBhc3NpbmcgYEhlYWRlcnNgXG4gKiBvYmplY3QgaW4gYGluaXRgLCBhcyB0aGF0IGZhaWxzIGBmZXRjaFBvbHlmaWxsYCBvbiBicm93c2VycyB0aGF0IGRvbid0XG4gKiBzdXBwb3J0IGZldGNoLiBTb21lIHNlcmlhbGl6YXRpb24tbmVlZGluZyB0eXBlcyBmb3IgYGluaXQuYm9keWAgc3VjaCBhc1xuICogYEFycmF5QnVmZmVyYCBhbmQgYEJsb2JgIGFyZSBhbHJlYWR5IHN1cHBvcnRlZCBieSB0aGUgc3RydWN0dXJlZCBjbG9uZVxuICogYWxnb3JpdGhtLiBPdGhlciBzZXJpYWxpemF0aW9uLW5lZWRpbmcgdHlwZXMgc3VjaCBhcyBgVVJMU2VhcmNoUGFyYW1zYFxuICogKHdoaWNoIGlzIG5vdCBzdXBwb3J0ZWQgaW4gSUUgYW5kIFNhZmFyaSkgYW5kIGBGZWRlcmF0ZWRDcmVkZW50aWFsc2AgYXJlXG4gKiBub3QgdXNlZCBpbiBBTVAgcnVudGltZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaW5wdXQgVGhlIFVSTCBvZiB0aGUgWEhSIHRvIGNvbnZlcnQgdG8gc3RydWN0dXJlZFxuICogICAgIGNsb25lYWJsZS5cbiAqIEBwYXJhbSB7IUZldGNoSW5pdERlZn0gaW5pdCBUaGUgb3B0aW9ucyBvZiB0aGUgWEhSIHRvIGNvbnZlcnQgdG8gc3RydWN0dXJlZFxuICogICAgIGNsb25lYWJsZS5cbiAqIEByZXR1cm4ge3tpbnB1dDogc3RyaW5nLCBpbml0OiAhRmV0Y2hJbml0RGVmfX0gVGhlIHNlcmlhbGl6ZWQgc3RydWN0dXJhbGx5LVxuICogICAgIGNsb25lYWJsZSByZXF1ZXN0LlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvU3RydWN0dXJlZENsb25lYWJsZShpbnB1dCwgaW5pdCkge1xuICBjb25zdCBuZXdJbml0ID0gT2JqZWN0LmFzc2lnbih7fSwgaW5pdCk7XG4gIGlmIChpc0Zvcm1EYXRhV3JhcHBlcihpbml0LmJvZHkpKSB7XG4gICAgbmV3SW5pdC5oZWFkZXJzWydDb250ZW50LVR5cGUnXSA9ICdtdWx0aXBhcnQvZm9ybS1kYXRhO2NoYXJzZXQ9dXRmLTgnO1xuICAgIG5ld0luaXQuYm9keSA9IGZyb21JdGVyYXRvcihpbml0LmJvZHkuZW50cmllcygpKTtcbiAgfVxuICByZXR1cm4ge2lucHV0LCBpbml0OiBuZXdJbml0fTtcbn1cblxuLyoqXG4gKiBEZS1zZXJpYWxpemVzIGEgZmV0Y2ggcmVzcG9uc2UgdGhhdCB3YXMgbWFkZSBwb3NzaWJsZSB0byBiZSBwYXNzZWQgdG9cbiAqIGBwb3N0TWVzc2FnZSgpYCwgaS5lLiwgY2FuIGJlIGNsb25lZCB1c2luZyB0aGVcbiAqIFtzdHJ1Y3R1cmVkIGNsb25lIGFsZ29yaXRobV0oaHR0cDovL21kbi5pby9TdHJ1Y3R1cmVkX2Nsb25lX2FsZ29yaXRobSkuXG4gKlxuICogVGhlIHJlc3BvbnNlIGlzIGFzc3VtZWQgdG8gYmUgc2VyaWFsaXplZCBpbiB0aGUgZm9sbG93aW5nIHdheTpcbiAqXG4gKiAxLiBUcmFuc2Zvcm0gdGhlIGVudHJpZXMgaW4gdGhlIGhlYWRlcnMgb2YgdGhlIHJlc3BvbnNlIGludG8gYW5cbiAqIGAhQXJyYXk8IUFycmF5PHN0cmluZz4+YCBob2xkaW5nIHRoZSBsaXN0IG9mIGhlYWRlciBlbnRyaWVzLCB3aGVyZSBlYWNoXG4gKiBlbGVtZW50IGluIHRoZSBhcnJheSBpcyBhIGhlYWRlciBlbnRyeSAoa2V5LXZhbHVlIHBhaXIpIHJlcHJlc2VudGVkIGFzIGFcbiAqIDItZWxlbWVudCBhcnJheS4gVGhlIGhlYWRlciBrZXkgaXMgY2FzZS1pbnNlbnNpdGl2ZS5cbiAqXG4gKiAyLiBJbmNsdWRlIHRoZSBoZWFkZXIgZW50cnkgbGlzdCBhbmQgYHN0YXR1c2AgYW5kIGBzdGF0dXNUZXh0YCBwcm9wZXJ0aWVzXG4gKiBvZiB0aGUgcmVzcG9uc2UgaW4gYXMgYGhlYWRlcnNgLCBgc3RhdHVzYCBhbmQgYHN0YXR1c1RleHRgIHByb3BlcnRpZXMgb2ZcbiAqIGBpbml0YC5cbiAqXG4gKiAzLiBJbmNsdWRlIHRoZSBib2R5IG9mIHRoZSByZXNwb25zZSBzZXJpYWxpemVkIGFzIHN0cmluZyBpbiBgYm9keWAuXG4gKlxuICogNC4gUmV0dXJuIGEgbmV3IG9iamVjdCBoYXZpbmcgcHJvcGVydGllcyBgYm9keWAgYW5kIGBpbml0YC5cbiAqXG4gKiBUaGUgcmVzcG9uc2UgaXMgZGUtc2VyaWFsaXplZCBpbiB0aGUgZm9sbG93aW5nIHdheTpcbiAqXG4gKiAxLiBJZiB0aGUgYFJlc3BvbnNlYCB0eXBlIGlzIHN1cHBvcnRlZCBhbmQgYHJlc3BvbnNlVHlwZWAgaXMgbm90XG4gKiBkb2N1bWVudCwgcGFzcyBgYm9keWAgYW5kIGBpbml0YCBkaXJlY3RseSB0byB0aGUgY29uc3RydWN0b3Igb2YgYFJlc3BvbnNlYC5cbiAqXG4gKiAyLiBPdGhlcndpc2UsIHBvcHVsYXRlIGEgZmFrZSBYSFIgb2JqZWN0IHRvIHBhc3MgdG8gYEZldGNoUmVzcG9uc2VgIGFzIGlmXG4gKiB0aGUgcmVzcG9uc2UgaXMgcmV0dXJuZWQgYnkgdGhlIGZldGNoIHBvbHlmaWxsLlxuICpcbiAqIDMuIElmIGByZXNwb25zZVR5cGVgIGlzIGBkb2N1bWVudGAsIGFsc28gcGFyc2UgdGhlIGJvZHkgYW5kIHBvcHVsYXRlXG4gKiBgcmVzcG9uc2VYTUxgIGFzIGEgYERvY3VtZW50YCB0eXBlLlxuICpcbiAqIEBwYXJhbSB7SnNvbk9iamVjdHxzdHJpbmd8dW5kZWZpbmVkfSByZXNwb25zZSBUaGUgc3RydWN0dXJhbGx5LWNsb25lYWJsZVxuICogICAgIHJlc3BvbnNlIHRvIGNvbnZlcnQgYmFjayB0byBhIHJlZ3VsYXIgUmVzcG9uc2UuXG4gKiBAcGFyYW0ge3N0cmluZ3x1bmRlZmluZWR9IHJlc3BvbnNlVHlwZSBUaGUgb3JpZ2luYWwgcmVzcG9uc2UgdHlwZSB1c2VkIHRvXG4gKiAgICAgaW5pdGlhdGUgdGhlIFhIUi5cbiAqIEByZXR1cm4geyFGZXRjaFJlc3BvbnNlfCFSZXNwb25zZX0gVGhlIGRlc2VyaWFsaXplZCByZWd1bGFyIHJlc3BvbnNlLlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21TdHJ1Y3R1cmVkQ2xvbmVhYmxlKHJlc3BvbnNlLCByZXNwb25zZVR5cGUpIHtcbiAgdXNlcigpLmFzc2VydChpc09iamVjdChyZXNwb25zZSksICdPYmplY3QgZXhwZWN0ZWQ6ICVzJywgcmVzcG9uc2UpO1xuXG4gIGNvbnN0IGlzRG9jdW1lbnRUeXBlID0gcmVzcG9uc2VUeXBlID09ICdkb2N1bWVudCc7XG4gIGlmICh0eXBlb2YgUmVzcG9uc2UgPT09ICdmdW5jdGlvbicgJiYgIWlzRG9jdW1lbnRUeXBlKSB7XG4gICAgLy8gVXNlIG5hdGl2ZSBgUmVzcG9uc2VgIHR5cGUgaWYgYXZhaWxhYmxlIGZvciBwZXJmb3JtYW5jZS4gSWYgcmVzcG9uc2VcbiAgICAvLyB0eXBlIGlzIGBkb2N1bWVudGAsIHdlIG11c3QgZmFsbCBiYWNrIHRvIGBGZXRjaFJlc3BvbnNlYCBwb2x5ZmlsbFxuICAgIC8vIGJlY2F1c2UgY2FsbGVycyB3b3VsZCB0aGVuIHJlbHkgb24gdGhlIGByZXNwb25zZVhNTGAgcHJvcGVydHkgYmVpbmdcbiAgICAvLyBwcmVzZW50LCB3aGljaCBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBSZXNwb25zZSB0eXBlLlxuICAgIHJldHVybiBuZXcgUmVzcG9uc2UocmVzcG9uc2VbJ2JvZHknXSwgcmVzcG9uc2VbJ2luaXQnXSk7XG4gIH1cblxuICBjb25zdCBsb3dlcmNhc2VkSGVhZGVycyA9IG1hcCgpO1xuICBjb25zdCBkYXRhID0ge1xuICAgIHN0YXR1czogMjAwLFxuICAgIHN0YXR1c1RleHQ6ICdPSycsXG4gICAgcmVzcG9uc2VUZXh0OiAocmVzcG9uc2VbJ2JvZHknXSA/IFN0cmluZyhyZXNwb25zZVsnYm9keSddKSA6ICcnKSxcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cbiAgICBnZXRSZXNwb25zZUhlYWRlcihuYW1lKSB7XG4gICAgICByZXR1cm4gbG93ZXJjYXNlZEhlYWRlcnNbU3RyaW5nKG5hbWUpLnRvTG93ZXJDYXNlKCldIHx8IG51bGw7XG4gICAgfSxcbiAgfTtcblxuICBpZiAocmVzcG9uc2VbJ2luaXQnXSkge1xuICAgIGNvbnN0IGluaXQgPSByZXNwb25zZVsnaW5pdCddO1xuICAgIGlmIChpc0FycmF5KGluaXQuaGVhZGVycykpIHtcbiAgICAgIGluaXQuaGVhZGVycy5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICAgICAgY29uc3QgaGVhZGVyTmFtZSA9IGVudHJ5WzBdO1xuICAgICAgICBjb25zdCBoZWFkZXJWYWx1ZSA9IGVudHJ5WzFdO1xuICAgICAgICBsb3dlcmNhc2VkSGVhZGVyc1tTdHJpbmcoaGVhZGVyTmFtZSkudG9Mb3dlckNhc2UoKV0gPVxuICAgICAgICAgICAgU3RyaW5nKGhlYWRlclZhbHVlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoaW5pdC5zdGF0dXMpIHtcbiAgICAgIGRhdGEuc3RhdHVzID0gcGFyc2VJbnQoaW5pdC5zdGF0dXMsIDEwKTtcbiAgICB9XG4gICAgaWYgKGluaXQuc3RhdHVzVGV4dCkge1xuICAgICAgZGF0YS5zdGF0dXNUZXh0ID0gU3RyaW5nKGluaXQuc3RhdHVzVGV4dCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKGlzRG9jdW1lbnRUeXBlKSB7XG4gICAgLy8gVE9ETyhwcmF0ZWVrYmgpOiByZW1vdmUgdGhpcyB3aGVuIGludGVncmF0aW5nIGRvY3VtZW50IGZldGNoZXIuXG4gICAgZGF0YS5yZXNwb25zZVhNTCA9XG4gICAgICAgIG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoZGF0YS5yZXNwb25zZVRleHQsICd0ZXh0L2h0bWwnKTtcbiAgfVxuXG4gIHJldHVybiBuZXcgRmV0Y2hSZXNwb25zZShkYXRhKTtcbn1cblxuLyoqXG4gKiBJbnRlcmNlcHRzIHRoZSBYSFIgYW5kIHByb3hpZXMgaXQgdGhyb3VnaCB0aGUgdmlld2VyIGlmIG5lY2Vzc2FyeS5cbiAqXG4gKiBYSFJzIGFyZSBpbnRlcmNlcHRlZCBpZiBhbGwgb2YgdGhlIGZvbGxvd2luZyBhcmUgdHJ1ZTpcbiAqIC0gVGhlIEFNUCBkb2MgaXMgaW4gc2luZ2xlIGRvYyBtb2RlXG4gKiAtIFRoZSByZXF1ZXN0ZWQgcmVzb3VyY2UgaXMgbm90IGEgMXAgcmVxdWVzdC5cbiAqIC0gVGhlIHZpZXdlciBoYXMgdGhlIGB4aHJJbnRlcmNlcHRvcmAgY2FwYWJpbGl0eVxuICogLSBUaGUgVmlld2VyIGlzIGEgdHJ1c3RlZCB2aWV3ZXIgb3IgQU1QIGlzIGN1cnJlbnRseSBpbiBkZXZlbG9wZW1lbnQgbW9kZVxuICogLSBUaGUgQU1QIGRvYyBpcyBvcHRlZC1pbiBmb3IgWEhSIGludGVyY2VwdGlvbiAoYDxodG1sPmAgdGFnIGhhc1xuICogICBgYWxsb3cteGhyLWludGVyY2VwdGlvbmAgYXR0cmlidXRlKVxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0gez8uLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gYW1wZG9jU2luZ2xlXG4gKiBAcGFyYW0ge3N0cmluZ30gaW5wdXQgVGhlIFVSTCBvZiB0aGUgWEhSIHdoaWNoIG1heSBnZXQgaW50ZXJjZXB0ZWQuXG4gKiBAcGFyYW0geyFGZXRjaEluaXREZWZ9IGluaXQgVGhlIG9wdGlvbnMgb2YgdGhlIFhIUiB3aGljaCBtYXkgZ2V0XG4gKiAgICAgaW50ZXJjZXB0ZWQuXG4gKiBAcmV0dXJuIHshUHJvbWlzZTwhRmV0Y2hSZXNwb25zZXwhUmVzcG9uc2V8dW5kZWZpbmVkPn1cbiAqICAgICBBIHJlc3BvbnNlIHJldHVybmVkIGJ5IHRoZSBpbnRlcmNlcHRvciBpZiBYSFIgaXMgaW50ZXJjZXB0ZWQgb3JcbiAqICAgICBgUHJvbWlzZTx1bmRlZmluZWQ+YCBvdGhlcndpc2UuXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Vmlld2VySW50ZXJjZXB0UmVzcG9uc2Uod2luLCBhbXBkb2NTaW5nbGUsIGlucHV0LCBpbml0KSB7XG4gIGlmICghYW1wZG9jU2luZ2xlKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9XG4gIGNvbnN0IHZpZXdlciA9IFNlcnZpY2VzLnZpZXdlckZvckRvYyhhbXBkb2NTaW5nbGUpO1xuICBjb25zdCB3aGVuRmlyc3RWaXNpYmxlID0gdmlld2VyLndoZW5GaXJzdFZpc2libGUoKTtcbiAgaWYgKGlzUHJveHlPcmlnaW4oaW5wdXQpIHx8ICF2aWV3ZXIuaGFzQ2FwYWJpbGl0eSgneGhySW50ZXJjZXB0b3InKSkge1xuICAgIHJldHVybiB3aGVuRmlyc3RWaXNpYmxlO1xuICB9XG4gIGNvbnN0IGh0bWxFbGVtZW50ID0gYW1wZG9jU2luZ2xlLmdldFJvb3ROb2RlKCkuZG9jdW1lbnRFbGVtZW50O1xuICBjb25zdCBkb2NPcHRlZEluID0gaHRtbEVsZW1lbnQuaGFzQXR0cmlidXRlKCdhbGxvdy14aHItaW50ZXJjZXB0aW9uJyk7XG4gIGlmICghZG9jT3B0ZWRJbikge1xuICAgIHJldHVybiB3aGVuRmlyc3RWaXNpYmxlO1xuICB9XG4gIHJldHVybiB3aGVuRmlyc3RWaXNpYmxlLnRoZW4oKCkgPT4ge1xuICAgIHJldHVybiB2aWV3ZXIuaXNUcnVzdGVkVmlld2VyKCk7XG4gIH0pLnRoZW4odmlld2VyVHJ1c3RlZCA9PiB7XG4gICAgY29uc3QgaXNEZXZNb2RlID0gZ2V0TW9kZSh3aW4pLmRldmVsb3BtZW50O1xuICAgIGlmICghdmlld2VyVHJ1c3RlZCAmJiAhaXNEZXZNb2RlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG1lc3NhZ2VQYXlsb2FkID0gZGljdCh7XG4gICAgICAnb3JpZ2luYWxSZXF1ZXN0JzogdG9TdHJ1Y3R1cmVkQ2xvbmVhYmxlKGlucHV0LCBpbml0KSxcbiAgICB9KTtcbiAgICByZXR1cm4gdmlld2VyLnNlbmRNZXNzYWdlQXdhaXRSZXNwb25zZSgneGhyJywgbWVzc2FnZVBheWxvYWQpXG4gICAgICAgIC50aGVuKHJlc3BvbnNlID0+XG4gICAgICAgICAgZnJvbVN0cnVjdHVyZWRDbG9uZWFibGUocmVzcG9uc2UsIGluaXQucmVzcG9uc2VUeXBlKSk7XG4gIH0pO1xufVxuXG4vKipcbiAqIFNldHN1cCBVUkwgYmFzZWQgb24gYW1wQ29yc1xuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpbnB1dFxuICogQHBhcmFtIHshRmV0Y2hJbml0RGVmfSBpbml0IFRoZSBvcHRpb25zIG9mIHRoZSBYSFIgd2hpY2ggbWF5IGdldFxuICogaW50ZXJjZXB0ZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXR1cElucHV0KHdpbiwgaW5wdXQsIGluaXQpIHtcbiAgZGV2KCkuYXNzZXJ0KHR5cGVvZiBpbnB1dCA9PSAnc3RyaW5nJywgJ09ubHkgVVJMIHN1cHBvcnRlZDogJXMnLCBpbnB1dCk7XG4gIGlmIChpbml0LmFtcENvcnMgIT09IGZhbHNlKSB7XG4gICAgaW5wdXQgPSBnZXRDb3JzVXJsKHdpbiwgaW5wdXQpO1xuICB9XG4gIHJldHVybiBpbnB1dDtcbn1cblxuLyoqXG4gKiBTZXRzIHVwIGFuZCBub3JtYWxpemVzIHRoZSBGZXRjaEluaXREZWZcbiAqXG4gKiBAcGFyYW0gez9GZXRjaEluaXREZWY9fSBvcHRfaW5pdCBGZXRjaCBvcHRpb25zIG9iamVjdC5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X2FjY2VwdCBUaGUgSFRUUCBBY2NlcHQgaGVhZGVyIHZhbHVlLlxuICogQHJldHVybiB7IUZldGNoSW5pdERlZn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldHVwSW5pdChvcHRfaW5pdCwgb3B0X2FjY2VwdCkge1xuICBjb25zdCBpbml0ID0gb3B0X2luaXQgfHwge307XG5cbiAgLy8gSW4gcGFydGljdWxhciwgRmlyZWZveCBkb2VzIG5vdCB0b2xlcmF0ZSBgbnVsbGAgdmFsdWVzIGZvclxuICAvLyBgY3JlZGVudGlhbHNgLlxuICBjb25zdCBjcmVkcyA9IGluaXQuY3JlZGVudGlhbHM7XG4gIGRldigpLmFzc2VydChcbiAgICAgIGNyZWRzID09PSB1bmRlZmluZWQgfHwgY3JlZHMgPT0gJ2luY2x1ZGUnIHx8IGNyZWRzID09ICdvbWl0JyxcbiAgICAgICdPbmx5IGNyZWRlbnRpYWxzPWluY2x1ZGV8b21pdCBzdXBwb3J0OiAlcycsIGNyZWRzKTtcblxuICBpbml0Lm1ldGhvZCA9IG5vcm1hbGl6ZU1ldGhvZF8oaW5pdC5tZXRob2QpO1xuICBpbml0LmhlYWRlcnMgPSBpbml0LmhlYWRlcnMgfHwgZGljdCh7fSk7XG4gIGlmIChvcHRfYWNjZXB0KSB7XG4gICAgaW5pdC5oZWFkZXJzWydBY2NlcHQnXSA9IG9wdF9hY2NlcHQ7XG4gIH1cblxuICAvLyBJbiBlZGdlIGEgYFR5cGVNaXNtYXRjaEVycm9yYCBpcyB0aHJvd24gd2hlbiBib2R5IGlzIHNldCB0byBudWxsLlxuICBkZXYoKS5hc3NlcnQoaW5pdC5ib2R5ICE9PSBudWxsLCAnZmV0Y2ggYGJvZHlgIGNhbiBub3QgYmUgYG51bGxgJyk7XG5cbiAgcmV0dXJuIGluaXQ7XG59XG5cbi8qKlxuICpcbiAqIFNldHMgdXAgQU1QU3BlY2lmaWMgQ09SUyBoZWFkZXJzLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpbnB1dFxuICogQHBhcmFtIHs/RmV0Y2hJbml0RGVmPX0gaW5pdFxuICogQHJldHVybiB7IUZldGNoSW5pdERlZn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldHVwQU1QQ29ycyh3aW4sIGlucHV0LCBpbml0KSB7XG4gIC8vIERvIG5vdCBhcHBlbmQgX19hbXBfc291cmNlX29yaWdpbiBpZiBleHBsaWNpdGx5IGRpc2FibGVkLlxuICBpZiAoaW5pdC5hbXBDb3JzID09PSBmYWxzZSkge1xuICAgIGluaXQucmVxdWlyZUFtcFJlc3BvbnNlU291cmNlT3JpZ2luID0gZmFsc2U7XG4gIH1cbiAgaWYgKGluaXQucmVxdWlyZUFtcFJlc3BvbnNlU291cmNlT3JpZ2luID09PSB0cnVlKSB7XG4gICAgZGV2KCkuZXJyb3IoJ1hIUicsXG4gICAgICAgICdyZXF1aXJlQW1wUmVzcG9uc2VTb3VyY2VPcmlnaW4gaXMgZGVwcmVjYXRlZCwgdXNlIGFtcENvcnMgaW5zdGVhZCcpO1xuICB9XG4gIGlmIChpbml0LnJlcXVpcmVBbXBSZXNwb25zZVNvdXJjZU9yaWdpbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgaW5pdC5yZXF1aXJlQW1wUmVzcG9uc2VTb3VyY2VPcmlnaW4gPSB0cnVlO1xuICB9XG4gIC8vIEZvciBzb21lIHNhbWUgb3JpZ2luIHJlcXVlc3RzLCBhZGQgQU1QLVNhbWUtT3JpZ2luOiB0cnVlIGhlYWRlciB0byBhbGxvd1xuICAvLyBwdWJsaXNoZXJzIHRvIHZhbGlkYXRlIHRoYXQgdGhpcyByZXF1ZXN0IGNhbWUgZnJvbSB0aGVpciBvd24gb3JpZ2luLlxuICBjb25zdCBjdXJyZW50T3JpZ2luID0gZ2V0V2luT3JpZ2luKHdpbik7XG4gIGNvbnN0IHRhcmdldE9yaWdpbiA9IHBhcnNlVXJsRGVwcmVjYXRlZChpbnB1dCkub3JpZ2luO1xuICBpZiAoY3VycmVudE9yaWdpbiA9PSB0YXJnZXRPcmlnaW4pIHtcbiAgICBpbml0WydoZWFkZXJzJ10gPSBpbml0WydoZWFkZXJzJ10gfHwge307XG4gICAgaW5pdFsnaGVhZGVycyddWydBTVAtU2FtZS1PcmlnaW4nXSA9ICd0cnVlJztcbiAgfVxuXG4gIHJldHVybiBpbml0O1xufVxuXG4vKipcbiAqIE5vcm1hbGl6ZWQgbWV0aG9kIG5hbWUgYnkgdXBwZXJjYXNpbmcuXG4gKiBAcGFyYW0ge3N0cmluZ3x1bmRlZmluZWR9IG1ldGhvZFxuICogQHJldHVybiB7c3RyaW5nfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gbm9ybWFsaXplTWV0aG9kXyhtZXRob2QpIHtcbiAgaWYgKG1ldGhvZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuICdHRVQnO1xuICB9XG4gIG1ldGhvZCA9IG1ldGhvZC50b1VwcGVyQ2FzZSgpO1xuICBkZXYoKS5hc3NlcnQoXG4gICAgICBhbGxvd2VkTWV0aG9kc18uaW5jbHVkZXMobWV0aG9kKSxcbiAgICAgICdPbmx5IG9uZSBvZiAlcyBpcyBjdXJyZW50bHkgYWxsb3dlZC4gR290ICVzJyxcbiAgICAgIGFsbG93ZWRNZXRob2RzXy5qb2luKCcsICcpLFxuICAgICAgbWV0aG9kXG4gICk7XG4gIHJldHVybiBtZXRob2Q7XG59XG5cbi8qKlxuICogVmVyaWZpZXMgaWYgcmVzcG9uc2UgaGFzIHRoZSBjb3JyZWN0IGhlYWRlcnNcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0geyFGZXRjaFJlc3BvbnNlfSByZXNwb25zZVxuICogQHBhcmFtIHshRmV0Y2hJbml0RGVmPX0gaW5pdFxuICogQHJldHVybiB7IUZldGNoUmVzcG9uc2V9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2ZXJpZnlBbXBDT1JTSGVhZGVycyh3aW4sIHJlc3BvbnNlLCBpbml0KSB7XG4gIGNvbnN0IGFsbG93U291cmNlT3JpZ2luSGVhZGVyID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoXG4gICAgICBBTExPV19TT1VSQ0VfT1JJR0lOX0hFQURFUik7XG4gIGlmIChhbGxvd1NvdXJjZU9yaWdpbkhlYWRlcikge1xuICAgIGNvbnN0IHNvdXJjZU9yaWdpbiA9IGdldFNvdXJjZU9yaWdpbih3aW4ubG9jYXRpb24uaHJlZik7XG4gICAgLy8gSWYgdGhlIGBBTVAtQWNjZXNzLUNvbnRyb2wtQWxsb3ctU291cmNlLU9yaWdpbmAgaGVhZGVyIGlzIHJldHVybmVkLFxuICAgIC8vIGVuc3VyZSB0aGF0IGl0J3MgZXF1YWwgdG8gdGhlIGN1cnJlbnQgc291cmNlIG9yaWdpbi5cbiAgICB1c2VyKCkuYXNzZXJ0KGFsbG93U291cmNlT3JpZ2luSGVhZGVyID09IHNvdXJjZU9yaWdpbixcbiAgICAgICAgYFJldHVybmVkICR7QUxMT1dfU09VUkNFX09SSUdJTl9IRUFERVJ9IGlzIG5vdGAgK1xuICAgICAgICAgIGAgZXF1YWwgdG8gdGhlIGN1cnJlbnQ6ICR7YWxsb3dTb3VyY2VPcmlnaW5IZWFkZXJ9YCArXG4gICAgICAgICAgYCB2cyAke3NvdXJjZU9yaWdpbn1gKTtcbiAgfSBlbHNlIGlmIChpbml0LnJlcXVpcmVBbXBSZXNwb25zZVNvdXJjZU9yaWdpbikge1xuICAgIC8vIElmIHRoZSBgQU1QLUFjY2Vzcy1Db250cm9sLUFsbG93LVNvdXJjZS1PcmlnaW5gIGhlYWRlciBpcyBub3RcbiAgICAvLyByZXR1cm5lZCBidXQgcmVxdWlyZWQsIHJldHVybiBlcnJvci5cbiAgICB1c2VyKCkuYXNzZXJ0KGZhbHNlLCAnUmVzcG9uc2UgbXVzdCBjb250YWluIHRoZScgK1xuICAgICAgICBgICR7QUxMT1dfU09VUkNFX09SSUdJTl9IRUFERVJ9IGhlYWRlcmApO1xuICB9XG4gIHJldHVybiByZXNwb25zZTtcbn1cblxuLy8gVE9ETyhwcmF0ZWVrYmgpOiBtb3ZlIGV2ZXJ5dGhpbmcgYmVsb3cgdGhpcyBsaW5lIGludG8gdGhlIHBvbHlmaWxsXG4vKipcbiAqIEEgcmVjb3JkIHZlcnNpb24gb2YgYFhNTEh0dHBSZXF1ZXN0YCB0aGF0IGhhcyBhbGwgdGhlIG5lY2Vzc2FyeSBwcm9wZXJ0aWVzXG4gKiBhbmQgbWV0aG9kcyBvZiBgWE1MSHR0cFJlcXVlc3RgIHRvIGNvbnN0cnVjdCBhIGBGZXRjaFJlc3BvbnNlYCBmcm9tIGFcbiAqIHNlcmlhbGl6ZWQgcmVzcG9uc2UgcmV0dXJuZWQgYnkgdGhlIHZpZXdlci5cbiAqIEB0eXBlZGVmIHt7XG4gKiAgIHN0YXR1czogbnVtYmVyLFxuICogICBzdGF0dXNUZXh0OiBzdHJpbmcsXG4gKiAgIHJlc3BvbnNlVGV4dDogc3RyaW5nLFxuICogICByZXNwb25zZVhNTDogP0RvY3VtZW50LFxuICogICBnZXRSZXNwb25zZUhlYWRlcjogZnVuY3Rpb24odGhpczpYTUxIdHRwUmVxdWVzdERlZiwgc3RyaW5nKTogc3RyaW5nLFxuICogfX1cbiAqL1xubGV0IFhNTEh0dHBSZXF1ZXN0RGVmO1xuXG4vKiogQHByaXZhdGUgQGVudW0ge251bWJlcn0gQWxsb3dlZCBmZXRjaCByZXNwb25zZXMuICovXG5jb25zdCBhbGxvd2VkRmV0Y2hUeXBlc18gPSB7XG4gIGRvY3VtZW50OiAxLFxuICB0ZXh0OiAyLFxufTtcblxuLyoqXG4gKiBBIG1pbmltYWwgcG9seWZpbGwgb2YgRmV0Y2ggQVBJLiBJdCBvbmx5IHBvbHlmaWxscyB3aGF0IHdlIGN1cnJlbnRseSB1c2UuXG4gKlxuICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9HbG9iYWxGZXRjaC9mZXRjaFxuICpcbiAqIE5vdGljZSB0aGF0IHRoZSBcImZldGNoXCIgbWV0aG9kIGl0c2VsZiBpcyBub3QgZXhwb3J0ZWQgYXMgdGhhdCB3b3VsZCByZXF1aXJlXG4gKiB1cyB0byBpbW1lZGlhdGVseSBzdXBwb3J0IGEgbXVjaCB3aWRlIEFQSS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaW5wdXRcbiAqIEBwYXJhbSB7IUZldGNoSW5pdERlZn0gaW5pdFxuICogQHJldHVybiB7IVByb21pc2U8IUZldGNoUmVzcG9uc2U+fVxuICogQHByaXZhdGUgVmlzaWJsZSBmb3IgdGVzdGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hQb2x5ZmlsbChpbnB1dCwgaW5pdCkge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgY29uc3QgeGhyID0gY3JlYXRlWGhyUmVxdWVzdChpbml0Lm1ldGhvZCB8fCAnR0VUJywgaW5wdXQpO1xuXG4gICAgaWYgKGluaXQuY3JlZGVudGlhbHMgPT0gJ2luY2x1ZGUnKSB7XG4gICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoaW5pdC5yZXNwb25zZVR5cGUgaW4gYWxsb3dlZEZldGNoVHlwZXNfKSB7XG4gICAgICB4aHIucmVzcG9uc2VUeXBlID0gaW5pdC5yZXNwb25zZVR5cGU7XG4gICAgfVxuXG4gICAgaWYgKGluaXQuaGVhZGVycykge1xuICAgICAgT2JqZWN0LmtleXMoaW5pdC5oZWFkZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKGhlYWRlcikge1xuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihoZWFkZXIsIGluaXQuaGVhZGVyc1toZWFkZXJdKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiB7XG4gICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPCAvKiBTVEFUVVNfUkVDRUlWRUQgKi8gMikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoeGhyLnN0YXR1cyA8IDEwMCB8fCB4aHIuc3RhdHVzID4gNTk5KSB7XG4gICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICByZWplY3QodXNlcigpLmNyZWF0ZUV4cGVjdGVkRXJyb3IoYFVua25vd24gSFRUUCBzdGF0dXMgJHt4aHIuc3RhdHVzfWApKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBUT0RPKGR2b3l0ZW5rbyk6IFRoaXMgaXMgY3VycmVudGx5IHNpbXBsaWZpZWQ6IHdlIHdpbGwgd2FpdCBmb3IgdGhlXG4gICAgICAvLyB3aG9sZSBkb2N1bWVudCBsb2FkaW5nIHRvIGNvbXBsZXRlLiBUaGlzIGlzIGZpbmUgZm9yIHRoZSB1c2UgY2FzZXNcbiAgICAgIC8vIHdlIGhhdmUgbm93LCBidXQgbWF5IG5lZWQgdG8gYmUgcmVpbXBsZW1lbnRlZCBsYXRlci5cbiAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PSAvKiBDT01QTEVURSAqLyA0KSB7XG4gICAgICAgIHJlc29sdmUobmV3IEZldGNoUmVzcG9uc2UoeGhyKSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB4aHIub25lcnJvciA9ICgpID0+IHtcbiAgICAgIHJlamVjdCh1c2VyKCkuY3JlYXRlRXhwZWN0ZWRFcnJvcignUmVxdWVzdCBmYWlsdXJlJykpO1xuICAgIH07XG4gICAgeGhyLm9uYWJvcnQgPSAoKSA9PiB7XG4gICAgICByZWplY3QodXNlcigpLmNyZWF0ZUV4cGVjdGVkRXJyb3IoJ1JlcXVlc3QgYWJvcnRlZCcpKTtcbiAgICB9O1xuXG4gICAgaWYgKGluaXQubWV0aG9kID09ICdQT1NUJykge1xuICAgICAgeGhyLnNlbmQoaW5pdC5ib2R5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgeGhyLnNlbmQoKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2RcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEByZXR1cm4geyFYTUxIdHRwUmVxdWVzdHwhWERvbWFpblJlcXVlc3R9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjcmVhdGVYaHJSZXF1ZXN0KG1ldGhvZCwgdXJsKSB7XG4gIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgaWYgKCd3aXRoQ3JlZGVudGlhbHMnIGluIHhocikge1xuICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsLCB0cnVlKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgWERvbWFpblJlcXVlc3QgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAvLyBJRS1zcGVjaWZpYyBvYmplY3QuXG4gICAgeGhyID0gbmV3IFhEb21haW5SZXF1ZXN0KCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWZcbiAgICB4aHIub3BlbihtZXRob2QsIHVybCk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgZGV2KCkuY3JlYXRlRXhwZWN0ZWRFcnJvcignQ09SUyBpcyBub3Qgc3VwcG9ydGVkJyk7XG4gIH1cbiAgcmV0dXJuIHhocjtcbn1cblxuLyoqXG4gKiBJZiA0MTUgb3IgaW4gdGhlIDV4eCByYW5nZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdGF0dXNcbiAqL1xuZnVuY3Rpb24gaXNSZXRyaWFibGUoc3RhdHVzKSB7XG4gIHJldHVybiBzdGF0dXMgPT0gNDE1IHx8IChzdGF0dXMgPj0gNTAwICYmIHN0YXR1cyA8IDYwMCk7XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSByZXNwb25zZSBpZiBzdWNjZXNzZnVsIG9yIG90aGVyd2lzZSB0aHJvd3MgYW4gZXJyb3IuXG4gKiBAcGFyYW0geyFGZXRjaFJlc3BvbnNlfSByZXNwb25zZVxuICogQHJldHVybiB7IVByb21pc2U8IUZldGNoUmVzcG9uc2U+fVxuICogQHByaXZhdGUgVmlzaWJsZSBmb3IgdGVzdGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0U3VjY2VzcyhyZXNwb25zZSkge1xuICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgfVxuXG4gICAgY29uc3Qge3N0YXR1c30gPSByZXNwb25zZTtcbiAgICBjb25zdCBlcnIgPSB1c2VyKCkuY3JlYXRlRXJyb3IoYEhUVFAgZXJyb3IgJHtzdGF0dXN9YCk7XG4gICAgZXJyLnJldHJpYWJsZSA9IGlzUmV0cmlhYmxlKHN0YXR1cyk7XG4gICAgLy8gVE9ETyhAanJpZGdld2VsbCwgIzk0NDgpOiBDYWxsZXJzIHdobyBuZWVkIHRoZSByZXNwb25zZSBzaG91bGRcbiAgICAvLyBza2lwIHByb2Nlc3NpbmcuXG4gICAgZXJyLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgdGhyb3cgZXJyO1xuICB9KTtcbn1cblxuXG4vKipcbiAqIFJlc3BvbnNlIG9iamVjdCBpbiB0aGUgRmV0Y2ggQVBJLlxuICpcbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvR2xvYmFsRmV0Y2gvZmV0Y2hcbiAqL1xuZXhwb3J0IGNsYXNzIEZldGNoUmVzcG9uc2Uge1xuICAvKipcbiAgICogQHBhcmFtIHshWE1MSHR0cFJlcXVlc3R8IVhEb21haW5SZXF1ZXN0fCFYTUxIdHRwUmVxdWVzdERlZn0geGhyXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih4aHIpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshWE1MSHR0cFJlcXVlc3R8IVhEb21haW5SZXF1ZXN0fCFYTUxIdHRwUmVxdWVzdERlZn0gKi9cbiAgICB0aGlzLnhocl8gPSB4aHI7XG5cbiAgICAvKiogQGNvbnN0IHtudW1iZXJ9ICovXG4gICAgdGhpcy5zdGF0dXMgPSB0aGlzLnhocl8uc3RhdHVzO1xuXG4gICAgLyoqIEBjb25zdCB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLm9rID0gdGhpcy5zdGF0dXMgPj0gMjAwICYmIHRoaXMuc3RhdHVzIDwgMzAwO1xuXG4gICAgLyoqIEBjb25zdCB7IUZldGNoUmVzcG9uc2VIZWFkZXJzfSAqL1xuICAgIHRoaXMuaGVhZGVycyA9IG5ldyBGZXRjaFJlc3BvbnNlSGVhZGVycyh4aHIpO1xuXG4gICAgLyoqIEB0eXBlIHtib29sZWFufSAqL1xuICAgIHRoaXMuYm9keVVzZWQgPSBmYWxzZTtcblxuICAgIC8qKiBAdHlwZSB7P1JlYWRhYmxlU3RyZWFtfSAqL1xuICAgIHRoaXMuYm9keSA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgY29weSBvZiB0aGUgcmVzcG9uc2UgYW5kIHJldHVybiBpdC5cbiAgICogQHJldHVybiB7IUZldGNoUmVzcG9uc2V9XG4gICAqL1xuICBjbG9uZSgpIHtcbiAgICBkZXYoKS5hc3NlcnQoIXRoaXMuYm9keVVzZWQsICdCb2R5IGFscmVhZHkgdXNlZCcpO1xuICAgIHJldHVybiBuZXcgRmV0Y2hSZXNwb25zZSh0aGlzLnhocl8pO1xuICB9XG5cbiAgLyoqXG4gICAqIERyYWlucyB0aGUgcmVzcG9uc2UgYW5kIHJldHVybnMgdGhlIHRleHQuXG4gICAqIEByZXR1cm4geyFQcm9taXNlPHN0cmluZz59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBkcmFpblRleHRfKCkge1xuICAgIGRldigpLmFzc2VydCghdGhpcy5ib2R5VXNlZCwgJ0JvZHkgYWxyZWFkeSB1c2VkJyk7XG4gICAgdGhpcy5ib2R5VXNlZCA9IHRydWU7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLnhocl8ucmVzcG9uc2VUZXh0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmFpbnMgdGhlIHJlc3BvbnNlIGFuZCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHJlc3BvbnNlXG4gICAqIHRleHQuXG4gICAqIEByZXR1cm4geyFQcm9taXNlPHN0cmluZz59XG4gICAqL1xuICB0ZXh0KCkge1xuICAgIHJldHVybiB0aGlzLmRyYWluVGV4dF8oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmFpbnMgdGhlIHJlc3BvbnNlIGFuZCByZXR1cm5zIHRoZSBKU09OIG9iamVjdC5cbiAgICogQHJldHVybiB7IVByb21pc2U8IUpzb25PYmplY3Q+fVxuICAgKi9cbiAganNvbigpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZTwhSnNvbk9iamVjdD59ICovIChcbiAgICAgIHRoaXMuZHJhaW5UZXh0XygpLnRoZW4ocGFyc2VKc29uKSk7XG4gIH1cblxuICAvKipcbiAgICogUmVhZHMgdGhlIHhociByZXNwb25zZVhNTC5cbiAgICogQHJldHVybiB7IVByb21pc2U8IURvY3VtZW50Pn1cbiAgICovXG4gIGRvY3VtZW50KCkge1xuICAgIGRldigpLmFzc2VydCghdGhpcy5ib2R5VXNlZCwgJ0JvZHkgYWxyZWFkeSB1c2VkJyk7XG4gICAgdGhpcy5ib2R5VXNlZCA9IHRydWU7XG4gICAgdXNlcigpLmFzc2VydCh0aGlzLnhocl8ucmVzcG9uc2VYTUwsXG4gICAgICAgICdyZXNwb25zZVhNTCBzaG91bGQgZXhpc3QuIE1ha2Ugc3VyZSB0byByZXR1cm4gJyArXG4gICAgICAgICdDb250ZW50LVR5cGU6IHRleHQvaHRtbCBoZWFkZXIuJyk7XG4gICAgY29uc3QgZG9jID0gLyoqIEB0eXBlIHshRG9jdW1lbnR9ICovKGRldigpLmFzc2VydCh0aGlzLnhocl8ucmVzcG9uc2VYTUwpKTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGRvYyk7XG4gIH1cblxuICAvKipcbiAgICogRHJhaW5zIHRoZSByZXNwb25zZSBhbmQgcmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSByZXNwb25zZVxuICAgKiBBcnJheUJ1ZmZlci5cbiAgICogQHJldHVybiB7IVByb21pc2U8IUFycmF5QnVmZmVyPn1cbiAgICovXG4gIGFycmF5QnVmZmVyKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlPCFBcnJheUJ1ZmZlcj59ICovIChcbiAgICAgIHRoaXMuZHJhaW5UZXh0XygpLnRoZW4odXRmOEVuY29kZSkpO1xuICB9XG59XG5cblxuLyoqXG4gKiBQcm92aWRlcyBhY2Nlc3MgdG8gdGhlIHJlc3BvbnNlIGhlYWRlcnMgYXMgZGVmaW5lZCBpbiB0aGUgRmV0Y2ggQVBJLlxuICogQHByaXZhdGUgVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAqL1xuZXhwb3J0IGNsYXNzIEZldGNoUmVzcG9uc2VIZWFkZXJzIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IVhNTEh0dHBSZXF1ZXN0fCFYRG9tYWluUmVxdWVzdHwhWE1MSHR0cFJlcXVlc3REZWZ9IHhoclxuICAgKi9cbiAgY29uc3RydWN0b3IoeGhyKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVhNTEh0dHBSZXF1ZXN0fCFYRG9tYWluUmVxdWVzdHwhWE1MSHR0cFJlcXVlc3REZWZ9ICovXG4gICAgdGhpcy54aHJfID0geGhyO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIGdldChuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMueGhyXy5nZXRSZXNwb25zZUhlYWRlcihuYW1lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaGFzKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy54aHJfLmdldFJlc3BvbnNlSGVhZGVyKG5hbWUpICE9IG51bGw7XG4gIH1cbn1cbiIsIi8qISBodHRwczovL210aHMuYmUvY3NzZXNjYXBlIHYxLjUuMSBieSBAbWF0aGlhcyB8IE1JVCBsaWNlbnNlICovXG5cblxuLyoqXG4gKiBUaGlzIHJlZ2V4IGNvbnNpc3RzIG9mIDQgbWF0Y2hpbmcgY2FwdHVyZSBncm91cHMgYW5kIG9uZSAobm9uLW1hdGNoaW5nKSBmYWxsYmFjazpcbiAqXG4gKiAtIChcXDApLCBjYXRjaCB0aGUgbnVsbCB0ZXJtaW5hdG9yIGNoYXJhY3RlciBzbyBpdCBtYXkgYmUgcmVwbGFjZWQgYnkgVVRGXG4gKiAgIFJlcGxhY2VtZW50IENoYXJcbiAqIC0gXigtKSQsIGNhdGNoIGEgc29saXRhcnkgZGFzaCBjaGFyLCBzbyB0aGF0IGl0IG1heSBiZSBiYWNrc2xhc2ggZXNjYXBlZC5cbiAqICAgVGhpcyBpcyBhIHNlcGFyYXRlIGNhcHR1cmUgZ3JvdXAgc28gdGhhdCB0aGUgbGVnYWwtY2hhcnMgKGdyb3VwIDQpIGRvZXNuJ3RcbiAqICAgY2FwdHVyZSBpdCBmaXJzdCwgc2luY2UgdGhhdCBncm91cCBkb2Vzbid0IG5lZWQgdG8gZXNjYXBlIGl0cyBkYXNoLlxuICogLSAoW1xceDAxLVxceDFmXFx4N2ZdfF4tP1swLTldKSwgY2F0Y2ggYSBVVEYgY29udHJvbCBjaGFyLCBvciBhbnkgbGVhZGluZ1xuICogICBudW1iZXIgKHdpdGggYW4gb3B0aW9uYWwgbGVhZGluZyBkYXNoKS4gVGhlIGNvbnRyb2wgb3IgdGhlIG51bWJlciAoYnV0IG5vdFxuICogICB0aGUgbGVhZGluZyBkYXNoKSBtdXN0IGJlIGhleC1lc2NhcGVkLC5cbiAqIC0gKFtcXHg4MC1cXHVmZmZmMC05YS16QS1aXy1dKyksIGNhdGNoIGxlZ2FsLWNoYXJzLCB3aXRoIHRoZSBleGNlcHRpb24gb2YgYVxuICogICBzb2xpdGFyeSBkYXNoLCB3aGljaCB3aWxsIGFscmVhZHkgaGF2ZSBtYXRjaGVkIGluIGdyb3VwIDEuXG4gKiAtIFteXSwgZmluYWxseSwgYSBjYXRjaC1hbGwgdGhhdCBhbGxvd3MgdXMgdG8gYmFja3NsYXNoIGVzY2FwZSB0aGUgY2hhci5cbiAqXG4gKiBUb2dldGhlciwgdGhpcyBtYXRjaGVzIGV2ZXJ5dGhpbmcgbmVjZXNzYXJ5IGZvciBDU1MuZXNjYXBlLlxuICovXG52YXIgcmVnZXggPSAvKFxcMCl8XigtKSR8KFtcXHgwMS1cXHgxZlxceDdmXXxeLT9bMC05XSl8KFtcXHg4MC1cXHVmZmZmMC05YS16QS1aXy1dKyl8W15dL2c7XG5cbmZ1bmN0aW9uIGVzY2FwZXIobWF0Y2gsIG5pbCwgZGFzaCwgaGV4RXNjYXBlLCBjaGFycykge1xuICAvLyBDaGFycyBpcyB0aGUgbGVnYWwtY2hhcnMgKGdyb3VwIDQpIGNhcHR1cmVcbiAgaWYgKGNoYXJzKSB7XG4gICAgcmV0dXJuIGNoYXJzO1xuICB9XG4gIC8vIE5pbCBpcyB0aGUgbnVsbCB0ZXJtaW5hdG9yIChncm91cCAxKSBjYXB0dXJlXG4gIGlmIChuaWwpIHtcbiAgICByZXR1cm4gJ1xcdUZGRkQnO1xuICB9XG4gIC8vIEJvdGggVVRGIGNvbnRyb2wgY2hhcnMsIGFuZCBsZWFkaW5nIG51bWJlcnMgKHdpdGggb3B0aW9uYWwgbGVhZGluZyBkYXNoKVxuICAvLyAoZ3JvdXAgMykgbXVzdCBiZSBiYWNrc2xhc2ggZXNjYXBlZCB3aXRoIGEgdHJhaWxpbmcgc3BhY2UuICBGdW5uaWx5LCB0aGVcbiAgLy8gbGVhZGluZyBkYXNoIG11c3Qgbm90IGJlIGVzY2FwZWQsIGJ1dCB0aGUgbnVtYmVyLiA6c2hydWc6XG4gIGlmIChoZXhFc2NhcGUpIHtcbiAgICByZXR1cm4gbWF0Y2guc2xpY2UoMCwgLTEpICsgJ1xcXFwnICsgbWF0Y2guc2xpY2UoLTEpLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpICsgJyAnXG4gIH1cbiAgLy8gRmluYWxseSwgdGhlIHNvbGl0YXJ5IGRhc2ggYW5kIHRoZSBjYXRjaC1hbGwgY2hhcnMgcmVxdWlyZSBiYWNrc2xhc2hcbiAgLy8gZXNjYXBpbmcuXG4gIHJldHVybiAnXFxcXCcgKyBtYXRjaDtcbn1cblxuLyoqXG4gKiBodHRwczovL2RyYWZ0cy5jc3N3Zy5vcmcvY3Nzb20vI3NlcmlhbGl6ZS1hbi1pZGVudGlmaWVyXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNzc0VzY2FwZSh2YWx1ZSkge1xuICByZXR1cm4gU3RyaW5nKHZhbHVlKS5yZXBsYWNlKHJlZ2V4LCBlc2NhcGVyKTtcbn1cbiJdfQ=="}