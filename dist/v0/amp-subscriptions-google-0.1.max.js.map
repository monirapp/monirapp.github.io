{"version":3,"sources":["node_modules/browser-pack/_prelude.js","build/amp-subscriptions-google-0.1.css.js","extensions/amp-subscriptions-google/0.1/amp-subscriptions-google.js","extensions/amp-subscriptions/0.1/doc-impl.js","extensions/amp-subscriptions/0.1/entitlement.js","node_modules/document-register-element/build/document-register-element.patched.js","node_modules/promise-pjs/promise.js","src/config.js","src/cookies.js","src/dom.js","src/element-service.js","src/experiments.js","src/log.js","src/mode-object.js","src/mode.js","src/polyfills.js","src/polyfills/array-includes.js","src/polyfills/custom-elements.js","src/polyfills/document-contains.js","src/polyfills/domtokenlist-toggle.js","src/polyfills/math-sign.js","src/polyfills/object-assign.js","src/polyfills/promise.js","src/render-delaying-services.js","src/service.js","src/services.js","src/string.js","src/style-installer.js","src/style.js","src/types.js","src/url-parse-query-string.js","src/url-try-decode-uri-component.js","src/url.js","src/utils/lru-cache.js","src/utils/object.js","src/utils/promise.js","third_party/css-escape/css-escape.js","third_party/subscriptions-project/config.js","third_party/subscriptions-project/swg.js"],"names":[],"mappings":"AAAA;;;;ACAO,IAAM,oBAAM,+/oBAAZ;;;;;;;;qjBCAP;;;;;;;;;;;;;;;;QA4SgB,yB,GAAA,yB;QAQA,4B,GAAA,4B;QAQA,mC,GAAA,mC;;AA5ShB;;AACA;;AAKA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEA,IAAM,MAAM,0BAAZ;AACA,IAAM,cAAc,sBAApB;AACA,IAAM,mBAAmB,mDAAzB;;AAGA;;;IAEa,kC,WAAA,kC;AACX;;;AAGA,8CAAY,MAAZ,EAAoB;AAAA;;AAClB;AACA,SAAK,OAAL,GAAe,MAAf;AACD;;AAED;;;;;;;;;mCAKe,c,EAAgB,c,EAAgB;AAC7C,aAAO,IAAI,2BAAJ,CAAgC,KAAK,OAArC,EACH,cADG,EACa,cADb,CAAP;AAED;;;;;;AAIH;;;;;IAGa,2B,WAAA,2B;;AAEX;;;;;AAKA,uCAAY,MAAZ,EAAoB,cAApB,EAAoC,cAApC,EAAoD;AAAA;;AAAA;;AAClD;;;;AAIA,SAAK,eAAL,GAAuB,cAAvB;AACA;AACA,SAAK,QAAL,GAAgB,2BACZ,qBAAY,MAAZ,CADY,EAEZ,eAAe,aAAf,EAFY,EAGZ;AACE,eAAS,IAAI,UAAJ,CAAe,OAAO,GAAtB;AADX,KAHY,CAAhB;AAOA,SAAK,QAAL,CAAc,iBAAd,CAAgC,mBAAW;AACzC,YAAK,eAAL,CAAqB,WAAW,QAAQ,aAAxC;AACD,KAFD;AAGA,SAAK,QAAL,CAAc,iBAAd,CAAgC,YAAM;AACpC,YAAK,eAAL;AACD,KAFD;AAGA,SAAK,QAAL,CAAc,2BAAd,CAA0C,YAAM;AAC9C,YAAK,yBAAL;AACD,KAFD;AAGA,SAAK,QAAL,CAAc,sBAAd,CAAqC,mBAAW;AAC9C,cAAQ,IAAR,CAAa,oBAAY;AACvB,cAAK,oBAAL,CAA0B,QAA1B;AACD,OAFD;AAGD,KAJD;;AAMA;AACA,SAAK,cAAL,GAAsB,cAAtB;;AAEA;AACA,SAAK,eAAL,GAAuB,KAAvB;AACA,SAAK,oBAAL,CAA0B,mBAAS,YAAT,CAAsB,MAAtB,CAA1B;;AAEA;AACA,6CAAoB,MAApB,+BAAiC,YAAM,CAAE,CAAzC,EAA2C,KAA3C,EAAkD,GAAlD;AACD;;AAED;;;;;;;;oCAIgB,a,EAAe;AAC7B,UAAI,iBAAiB,KAAK,eAA1B,EAA2C;AACzC,aAAK,QAAL,CAAc,WAAd;AACD,OAFD,MAEO;AACL,aAAK,cAAL,CAAoB,KAAK,eAAL,CAAqB,qBAArB,CAChB,OADgB,CAApB;AAED;AACF;;AAED;;;;sCACkB;AAChB,WAAK,QAAL,CAAc,KAAd;AACA,WAAK,eAAL,CAAqB,mBAArB,CAAyC,IAAzC;AACD;;AAED;;;;gDAC4B;AAC1B,WAAK,cAAL,CAAoB,KAAK,eAAL,CAAqB,qBAArB,CAChB,WADgB,CAApB;AAED;;AAED;;;;;;;mCAIe,O,EAAS;AAAA;;AACtB,cAAQ,IAAR,CAAa,kBAAU;AACrB,YAAI,MAAJ,EAAY;AACV,iBAAK,QAAL,CAAc,KAAd;AACD;AACF,OAJD;AAKD;;AAED;;;;;;;yCAIqB,Q,EAAU;AAAA;;AAC7B,eAAS,QAAT,GAAoB,IAApB,CAAyB,YAAM;AAC7B,eAAK,QAAL,CAAc,KAAd;AACA,eAAK,eAAL,CAAqB,mBAArB,CAAyC,MAAzC;AACD,OAHD;AAID;;AAED;;;;sCACkB;AAChB,aAAO,KAAK,QAAL,CAAc,eAAd,GAAgC,IAAhC,CAAqC,2BAAmB;AAC7D,YAAM,iBAAiB,gBAAgB,qBAAhB,EAAvB;AACA,YAAI,CAAC,cAAL,EAAqB;AACnB,iBAAO,IAAP;AACD;AACD,wBAAgB,GAAhB;AACA,eAAO,6BAAgB;AACrB,kBAAQ,eAAe,MADF;AAErB,eAAK,gBAAgB,GAFA;AAGrB,mBAAS,WAHY;AAIrB,mBAAS,IAJY,EAIN;AACf,uBAAa,yBAAY,UALJ,EAKgB;AACrC,sBAAY,eAAe,IAAf;AANS,SAAhB,CAAP;AAQD,OAdM,CAAP;AAeD;;AAED;;;;mCACe;AACb,aAAO,WAAP;AACD;;AAED;;;;6BACS,W,EAAa;AACpB;AACA;AACA,UAAI,CAAC,YAAY,OAAjB,EAA0B;AACxB,aAAK,QAAL,CAAc,UAAd,CAAyB,EAAC,MAAM,KAAP,EAAzB;AACD,OAFD,MAEO,IAAI,CAAC,YAAY,YAAZ,EAAL,EAAiC;AACtC,aAAK,QAAL,CAAc,cAAd,CAA6B,EAAC,MAAM,KAAP,EAA7B;AACD;AACF;;AAED;;;;;;;wCAIoB;AAClB,aAAO,KAAP;AACD;;AAED;;;;;;+BAGW,CAAE;;AAEb;;;;4CACwB;AACtB,aAAO,KAAK,eAAZ;AACD;;AAED;;;;;;;yCAIqB,M,EAAQ;AAAA;;AAC3B;AACA;AACA,UAAM,YAAY,OAAO,QAAP,CAAgB,WAAhB,CAAlB;AACA,UAAI,SAAJ,EAAe;AACb,aAAK,eAAL,GAAuB,iBAAiB,IAAjB,CACnB,6BAAmB,SAAnB,EAA8B,QADX,CAAvB;AAED,OAHD,MAGO;AACL;AACA;AACA;AACA,eAAO,eAAP,GAAyB,IAAzB,CAA8B,kBAAU;AACtC,cAAI,MAAJ,EAAY;AACV,mBAAK,eAAL,GAAuB,iBAAiB,IAAjB,CACnB,6BAAmB,MAAnB,EAA2B,QADR,CAAvB;AAED;AACF,SALD;AAMD;AACF;;AAED;;;;mCACe;AACb,aAAO,KAAK,cAAL,CAAoB,WAApB,KAAoC,CAA3C;AACD;;AAED;;;;kCACc,M,EAAQ;AACpB,UAAI,WAAW,WAAf,EAA4B;AAC1B,aAAK,QAAL,CAAc,UAAd,CAAyB,EAAC,MAAM,KAAP,EAAc,YAAY,IAA1B,EAAzB;AACA,eAAO,QAAQ,OAAR,CAAgB,IAAhB,CAAP;AACD;AACD,aAAO,QAAQ,OAAR,CAAgB,KAAhB,CAAP;AACD;;AAED;;;;+BACW,O,EAAS,M,EAAQ,O,EAAS;AACnC,UAAI,WAAW,WAAf,EAA4B;AAC1B,gBAAQ,WAAR,GAAsB,EAAtB;AACA,aAAK,QAAL,CAAc,YAAd,CAA2B,OAA3B,EAAoC,OAApC,EAA6C,YAAM,CAAE,CAArD;AACD;AACF;;;;;;AAIH;;;;;;IAIM,U;;AAEJ;;;AAGA,sBAAY,GAAZ,EAAiB;AAAA;;AACf;AACA,SAAK,IAAL,GAAY,mBAAS,MAAT,CAAgB,GAAhB,CAAZ;AACD;;AAED;;;;;0CACsB,G,EAAK;AACzB,aAAO,KAAK,IAAL,CAAU,SAAV,CAAoB,GAApB,EAAyB;AAC9B,qBAAa;AADiB,OAAzB,EAEJ,IAFI,CAEC;AAAA,eAAY,SAAS,IAAT,EAAZ;AAAA,OAFD,CAAP;AAGD;;;;;;AAIH;;;AACA,IAAI,SAAJ,CAAc,GAAd,EAAmB,KAAnB,EAA0B,UAAS,GAAT,EAAc;AACtC,MAAI,qBAAJ,CAA0B,sBAA1B,EAAkD,kBAAU;AAC1D,QAAM,kBAAkB,IAAI,kCAAJ,CAAuC,MAAvC,CAAxB;AACA,uBAAS,0BAAT,CAAoC,MAApC,EAA4C,IAA5C,CAAiD,mBAAW;AAC1D,cAAQ,gBAAR,CAAyB,WAAzB,EACI,UAAC,cAAD,EAAiB,cAAjB,EAAoC;AAClC,eAAO,gBAAgB,cAAhB,CAA+B,cAA/B,EACH,cADG,CAAP;AAED,OAJL;AAMD,KAPD;AAQA,WAAO,eAAP;AACD,GAXD;AAYD,CAbD;;AAgBA;;;;AAIO,SAAS,yBAAT,GAAqC;AAC1C;AACD;;AAED;;;;AAIO,SAAS,4BAAT,GAAwC;AAC7C;AACD;;AAED;;;;AAIO,SAAS,mCAAT,GAA+C;AACpD;AACD;;;;;;;;qjBC9TD;;;;;;;;;;;;;;;;QAyEgB,qB,GAAA,qB;;AAzDhB;;AACA;;;;AAGA;;;;IAIa,O,WAAA,O;;AAEX;;;AAGA,mBAAY,MAAZ,EAAoB;AAAA;;AAClB;AACA,SAAK,OAAL,GAAe,MAAf;AACD;;AAED;;;;;6BACS;AACP,aAAO,KAAK,OAAL,CAAa,GAApB;AACD;;AAED;;;;kCACc;AACZ,aAAO,KAAK,OAAL,CAAa,WAAb,EAAP;AACD;;AAED;;;;qCACiB;AACf,UAAM,OAAO,KAAK,OAAL,CAAa,WAAb,EAAb;AACA,aAAO,gBAAM,aAAN,CAAoB,KAAK,eAAL,IAAwB,KAAK,IAA7B,IAAqC,IAAzD,CAAP;AACD;;AAED;;;;8BACU;AACR,aAAO,gBAAM,aAAN,CAAoB,KAAK,OAAL,CAAa,WAAb,EAApB,CAAP;AACD;;AAED;;;;8BACU;AACR,aAAO,KAAK,OAAL,CAAa,eAAb,KAAiC,KAAK,OAAL,CAAa,OAAb,EAAjC,GAA0D,IAAjE;AACD;;AAED;;;;8BACU;AACR,aAAO,KAAK,OAAL,CAAa,OAAb,EAAP;AACD;;AAED;;;;gCACY;AACV,aAAO,KAAK,OAAL,CAAa,SAAb,EAAP;AACD;;;;;;AAIH;;;AACO,SAAS,qBAAT,GAAiC;AACtC;AACD;;;;;;;;qjBC3ED;;;;;;;;;;;;;;;;;AAeA;;;;AAEA;AACO,IAAM,oCAAc;AACzB,gBAAc,YADW;AAEzB,cAAY;AAFa,CAApB;;AAKP;;;;IAGa,W,WAAA,W;;;;;AAEX;;;;0BAIa,O,EAAS;AACpB,aAAO,IAAI,WAAJ,CAAgB;AACrB,gBAAQ,EADa;AAErB,aAAK,EAFgB;AAGrB,wBAHqB;AAIrB,iBAAS;AAJY,OAAhB,CAAP;AAMD;;AAED;;;;;;;;;;;;AASA,6BACiC;AAAA,QADpB,MACoB,QADpB,MACoB;AAAA,wBADZ,GACY;AAAA,QADZ,GACY,4BADN,EACM;AAAA,QADF,OACE,QADF,OACE;AAAA,4BADO,OACP;AAAA,QADO,OACP,gCADiB,KACjB;AAAA,gCAA/B,WAA+B;AAAA,QAA/B,WAA+B,oCAAjB,EAAiB;AAAA,QAAb,UAAa,QAAb,UAAa;;AAAA;;AAC/B;AACA,SAAK,GAAL,GAAW,GAAX;AACA;AACA,SAAK,MAAL,GAAc,MAAd;AACA;AACA,SAAK,OAAL,GAAe,OAAf;AACA;AACA,SAAK,OAAL,GAAe,OAAf;AACA;AACA,SAAK,WAAL,GAAmB,WAAnB;AACA;AACA,SAAK,IAAL,GAAY,UAAZ;AACD;;AAED;;;;;;;;2BAIO;AACL,UAAM,kBAAkB,kBAAK;AAC3B,kBAAU,KAAK,MADY;AAE3B,mBAAW,KAAK,OAFW;AAG3B,mBAAW,KAAK,OAHW;AAI3B,uBAAe,KAAK,WAJO;AAK3B,gBAAQ,KAAK;AALc,OAAL,CAAxB;AAOA,aAAQ,eAAR;AACD;;AAED;;;;;;;;sCAKkB;AAChB,aAAO,2BAA4B,OAAO,MAAP,CAAc,EAAd,EAC/B,EAAC,OAAO,KAAK,GAAb,EAD+B,EAE/B,KAAK,IAAL,EAF+B;AAAnC;AAGD;;AAED;;;;;;;;;;AAkBA;;;;mCAIe;AACb,aAAO,KAAK,OAAL,IAAgB,KAAK,WAAL,KAAqB,YAAY,UAAxD;AACD;;;kCAnBoB,I,EAAsB;AAAA,UAAhB,OAAgB,uEAAN,IAAM;;AACzC,UAAI,CAAC,IAAL,EAAW;AACT,eAAO,mBAAP;AACD;AACD,UAAM,MAAM,WAAW,KAAK,SAAL,CAAe,IAAf,CAAvB;AACA,UAAM,SAAS,KAAK,QAAL,KAAkB,EAAjC;AACA,UAAM,UAAU,KAAK,SAAL,KAAmB,KAAnC;AACA,UAAM,cAAc,KAAK,aAAL,CAApB;AACA,UAAM,aAAa,KAAK,MAAL,KAAgB,IAAnC;AACA,aAAO,IAAI,WAAJ,CAAgB,EAAC,cAAD,EAAS,QAAT,EAAc,SAAS,EAAvB;AACrB,wBADqB,EACZ,wBADY,EACC,sBADD,EAAhB,CAAP;AAED;;;;;;;AC5GH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACn6CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACngBA;;;;;;;;;;;;;;;;AAgBA;;;;;;;AAOA,IAAM,MAAM,KAAK,UAAL,IAAmB,EAA/B;;AAEA,IAAM,uBAAuB,OAAO,IAAI,sBAAJ,CAAP,IAAsC,QAAtC,GAC3B,IAAI,MAAJ,CAAW,IAAI,sBAAJ,CAAX,CAD2B,GACe,IAAI,sBAAJ,CAD5C;;AAGA,IAAM,gBAAgB,OAAO,IAAI,eAAJ,CAAP,IAA+B,QAA/B,GACpB,IAAI,MAAJ,CAAW,IAAI,eAAJ,CAAX,CADoB,GACe,IAAI,eAAJ,CADrC;;AAGA;AACO,IAAM,sBAAO;AAClB,cAAY,IAAI,eAAJ,KAAwB,2BADlB;AAElB,uBAAqB,IAAI,qBAAJ,KAA8B,gBAFjC;AAGlB,wBAAsB,wBAAwB,0BAH5B;AAIlB,OAAK,IAAI,QAAJ,KAAiB,4BAJJ;AAKlB;;;AAGA,iBAAe,iBACX,qDATc;AAUlB,kBAAgB,+BAVE;AAWlB,kBAAgB,IAAI,mBAAJ,KACZ,2CAZc;AAalB,YAAU,IAAI,UAAJ,KAAmB;AAbX,CAAb;;AAgBA,IAAM,0BAAS;AACpB;AADoB,CAAf;;;;;;QCZS,S,GAAA,S;QAyDA,S,G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","file":"amp-subscriptions-google-0.1.max.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","export const CSS = \".swg-button,.swg-button-dark,.swg-button-light{border:0;border-radius:4px;box-sizing:border-box;outline:0;padding:11px 8px;width:240px;min-width:150px;height:40px;min-height:40px}.swg-button-dark:after,.swg-button-light:after,.swg-button:after{display:block;max-width:200px;max-height:40px;width:100%;height:100%;margin:auto;content:\\\"\\\";border:0;background-origin:content-box;background-position:50%;background-repeat:no-repeat;background-size:contain}.swg-button,.swg-button-light{background-color:#fff;box-shadow:0 1px 1px 0 rgba(60,64,67,0.3),0 1px 3px 1px rgba(60,64,67,0.15)}.swg-button-light:after,.swg-button:after{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='235' height='24' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cpath d='M169.367 19c-5.09 0-9.367-4.265-9.367-9.5s4.277-9.5 9.367-9.5c2.818 0 4.823 1.133 6.33 2.622l-1.775 1.827c-1.082-1.04-2.55-1.857-4.555-1.857-3.72 0-6.628 3.081-6.628 6.908 0 3.827 2.907 6.908 6.628 6.908 2.411 0 3.78-1 4.664-1.898.724-.745 1.19-1.806 1.37-3.265h-6.034V8.643h8.494c.09.459.139 1.02.139 1.622 0 1.95-.516 4.357-2.183 6.072-1.627 1.734-3.691 2.663-6.45 2.663z' fill='%234285F4' fill-rule='nonzero'/%3E%3Cpath d='M192 13c0 3.456-2.69 6-6 6s-6-2.544-6-6c0-3.476 2.69-6 6-6s6 2.524 6 6zm-2.63 0c0-2.164-1.563-3.636-3.37-3.636-1.807 0-3.37 1.482-3.37 3.636 0 2.134 1.563 3.636 3.37 3.636 1.807 0 3.37-1.492 3.37-3.636z' fill='%23E94235' fill-rule='nonzero'/%3E%3Cpath d='M205 13c0 3.456-2.69 6-6 6-3.3 0-6-2.544-6-6 0-3.476 2.69-6 6-6s6 2.524 6 6zm-2.62 0c0-2.164-1.563-3.636-3.37-3.636-1.807 0-3.37 1.482-3.37 3.636 0 2.134 1.563 3.636 3.37 3.636 1.807.01 3.37-1.492 3.37-3.636z' fill='%23FABB05' fill-rule='nonzero'/%3E%3Cpath d='M217 7.362v10.53c0 4.337-2.499 6.108-5.457 6.108-2.786 0-4.452-1.908-5.083-3.465l2.192-.93c.392.96 1.35 2.085 2.891 2.085 1.896 0 3.064-1.204 3.064-3.445v-.841h-.087c-.564.714-1.656 1.33-3.025 1.33-2.872 0-5.495-2.554-5.495-5.842C206 9.584 208.633 7 211.495 7c1.37 0 2.46.626 3.025 1.311h.087v-.949H217zm-2.221 5.54c0-2.066-1.35-3.582-3.064-3.582-1.742 0-3.197 1.507-3.197 3.582 0 2.045 1.455 3.533 3.197 3.533 1.714 0 3.064-1.488 3.064-3.533z' fill='%234285F4' fill-rule='nonzero'/%3E%3Cpath fill='%2334A853' fill-rule='nonzero' d='M223 1v18h-3V1z'/%3E%3Cpath d='M232.844 14.973l2.046 1.363c-.662.981-2.256 2.664-5.014 2.664-3.42 0-5.876-2.634-5.876-6 0-3.566 2.487-6 5.585-6 3.119 0 4.643 2.474 5.144 3.816l.271.681-8.032 3.326c.612 1.202 1.574 1.823 2.918 1.823s2.276-.671 2.958-1.673zm-6.307-2.163l5.375-2.224c-.301-.751-1.184-1.272-2.237-1.272-1.343 0-3.208 1.182-3.138 3.496z' fill='%23E94235' fill-rule='nonzero'/%3E%3Cpath d='M6.576 19.384c-1.248 0-2.468-.408-3.66-1.224-1.192-.816-1.972-1.96-2.34-3.432l2.016-.816c.24.944.732 1.74 1.476 2.388.744.648 1.58.972 2.508.972.96 0 1.78-.252 2.46-.756.68-.504 1.02-1.188 1.02-2.052 0-.96-.34-1.7-1.02-2.22-.68-.52-1.756-1.004-3.228-1.452-1.52-.48-2.672-1.1-3.456-1.86-.784-.76-1.176-1.732-1.176-2.916 0-1.232.488-2.304 1.464-3.216.976-.912 2.248-1.368 3.816-1.368 1.456 0 2.64.364 3.552 1.092.912.728 1.504 1.524 1.776 2.388l-2.016.84c-.144-.544-.5-1.048-1.068-1.512-.568-.464-1.3-.696-2.196-.696-.848 0-1.572.236-2.172.708-.6.472-.9 1.06-.9 1.764 0 .64.276 1.18.828 1.62.552.44 1.364.836 2.436 1.188.848.272 1.556.536 2.124.792a9.842 9.842 0 0 1 1.728 1.02 4.065 4.065 0 0 1 1.32 1.584c.296.632.444 1.364.444 2.196 0 .832-.172 1.576-.516 2.232a4.19 4.19 0 0 1-1.368 1.56 6.875 6.875 0 0 1-3.852 1.176zM24.936 19h-2.112v-1.632h-.096c-.336.56-.848 1.036-1.536 1.428a4.345 4.345 0 0 1-2.184.588c-1.472 0-2.588-.448-3.348-1.344-.76-.896-1.14-2.096-1.14-3.6v-7.2h2.208v6.84c0 2.192.968 3.288 2.904 3.288.912 0 1.656-.368 2.232-1.104.576-.736.864-1.584.864-2.544V7.24h2.208V19zm8.904.384c-.896 0-1.7-.192-2.412-.576-.712-.384-1.244-.864-1.596-1.44h-.096V19h-2.112V1.816h2.208V7.24l-.096 1.632h.096c.352-.576.884-1.056 1.596-1.44.712-.384 1.516-.576 2.412-.576 1.52 0 2.832.6 3.936 1.8 1.104 1.2 1.656 2.688 1.656 4.464 0 1.776-.552 3.264-1.656 4.464-1.104 1.2-2.416 1.8-3.936 1.8zm-.36-2.016c1.024 0 1.904-.388 2.64-1.164.736-.776 1.104-1.804 1.104-3.084s-.368-2.308-1.104-3.084c-.736-.776-1.616-1.164-2.64-1.164-1.04 0-1.924.384-2.652 1.152-.728.768-1.092 1.8-1.092 3.096s.364 2.328 1.092 3.096c.728.768 1.612 1.152 2.652 1.152zm12.336 2.016c-1.312 0-2.396-.32-3.252-.96a5.682 5.682 0 0 1-1.884-2.4l1.968-.816c.624 1.472 1.688 2.208 3.192 2.208.688 0 1.252-.152 1.692-.456.44-.304.66-.704.66-1.2 0-.768-.536-1.288-1.608-1.56l-2.376-.576c-.752-.192-1.464-.556-2.136-1.092-.672-.536-1.008-1.26-1.008-2.172 0-1.04.46-1.884 1.38-2.532.92-.648 2.012-.972 3.276-.972 1.04 0 1.968.236 2.784.708a3.99 3.99 0 0 1 1.752 2.028l-1.92.792c-.432-1.04-1.328-1.56-2.688-1.56-.656 0-1.208.136-1.656.408-.448.272-.672.64-.672 1.104 0 .672.52 1.128 1.56 1.368l2.328.552c1.104.256 1.92.696 2.448 1.32.528.624.792 1.328.792 2.112 0 1.056-.432 1.936-1.296 2.64-.864.704-1.976 1.056-3.336 1.056zm11.928 0c-1.76 0-3.208-.596-4.344-1.788-1.136-1.192-1.704-2.684-1.704-4.476 0-1.792.568-3.284 1.704-4.476 1.136-1.192 2.584-1.788 4.344-1.788 1.312 0 2.4.32 3.264.96a5.621 5.621 0 0 1 1.896 2.424l-2.016.84c-.608-1.472-1.704-2.208-3.288-2.208-.976 0-1.836.4-2.58 1.2-.744.8-1.116 1.816-1.116 3.048s.372 2.248 1.116 3.048c.744.8 1.604 1.2 2.58 1.2 1.648 0 2.784-.736 3.408-2.208l1.968.84c-.4.96-1.044 1.764-1.932 2.412-.888.648-1.988.972-3.3.972zm9.36-.384h-2.208V7.24h2.112v1.92h.096c.224-.64.684-1.168 1.38-1.584.696-.416 1.372-.624 2.028-.624.656 0 1.208.096 1.656.288l-.84 2.064c-.288-.112-.68-.168-1.176-.168-.8 0-1.508.316-2.124.948-.616.632-.924 1.46-.924 2.484V19zm8.904-14.712a1.504 1.504 0 0 1-1.104.456c-.432 0-.8-.152-1.104-.456a1.504 1.504 0 0 1-.456-1.104c0-.432.152-.8.456-1.104a1.504 1.504 0 0 1 1.104-.456c.432 0 .8.152 1.104.456.304.304.456.672.456 1.104 0 .432-.152.8-.456 1.104zm0 14.712H73.8V7.24h2.208V19zm9.096.384c-.896 0-1.7-.192-2.412-.576-.712-.384-1.244-.864-1.596-1.44H81V19h-2.112V1.816h2.208V7.24L81 8.872h.096c.352-.576.884-1.056 1.596-1.44.712-.384 1.516-.576 2.412-.576 1.52 0 2.832.6 3.936 1.8 1.104 1.2 1.656 2.688 1.656 4.464 0 1.776-.552 3.264-1.656 4.464-1.104 1.2-2.416 1.8-3.936 1.8zm-.36-2.016c1.024 0 1.904-.388 2.64-1.164.736-.776 1.104-1.804 1.104-3.084s-.368-2.308-1.104-3.084c-.736-.776-1.616-1.164-2.64-1.164-1.04 0-1.924.384-2.652 1.152-.728.768-1.092 1.8-1.092 3.096s.364 2.328 1.092 3.096c.728.768 1.612 1.152 2.652 1.152zm13.296 2.016c-1.776 0-3.22-.592-4.332-1.776-1.112-1.184-1.668-2.68-1.668-4.488 0-1.712.54-3.184 1.62-4.416 1.08-1.232 2.46-1.848 4.14-1.848 1.744 0 3.14.568 4.188 1.704 1.048 1.136 1.572 2.656 1.572 4.56l-.024.408h-9.288c.064 1.184.46 2.12 1.188 2.808.728.688 1.58 1.032 2.556 1.032 1.584 0 2.656-.672 3.216-2.016l1.968.816c-.384.912-1.016 1.676-1.896 2.292-.88.616-1.96.924-3.24.924zm3.168-7.68c-.048-.672-.356-1.312-.924-1.92-.568-.608-1.412-.912-2.532-.912-.816 0-1.524.256-2.124.768-.6.512-1.012 1.2-1.236 2.064h6.816zM123.72 19h-2.256l-2.928-9.024L115.632 19H113.4l-3.792-11.76h2.304l2.616 8.88h.024l2.904-8.88h2.28l2.904 8.88h.024l2.592-8.88h2.256L123.72 19zm7.632-14.712a1.504 1.504 0 0 1-1.104.456c-.432 0-.8-.152-1.104-.456a1.504 1.504 0 0 1-.456-1.104c0-.432.152-.8.456-1.104a1.504 1.504 0 0 1 1.104-.456c.432 0 .8.152 1.104.456.304.304.456.672.456 1.104 0 .432-.152.8-.456 1.104zm0 14.712h-2.208V7.24h2.208V19zm7.968.192c-1.232 0-2.172-.328-2.82-.984-.648-.656-.972-1.584-.972-2.784V9.256h-2.064V7.24h2.064v-3.6h2.208v3.6h2.88v2.016h-2.88v6c0 1.28.528 1.92 1.584 1.92.4 0 .736-.064 1.008-.192l.768 1.896c-.48.208-1.072.312-1.776.312zm5.616-17.376V7.24l-.096 1.632h.096c.32-.56.824-1.036 1.512-1.428a4.389 4.389 0 0 1 2.208-.588c1.456 0 2.568.448 3.336 1.344.768.896 1.152 2.096 1.152 3.6V19h-2.208v-6.864c0-2.176-.968-3.264-2.904-3.264-.912 0-1.656.364-2.232 1.092-.576.728-.864 1.572-.864 2.532V19h-2.208V1.816h2.208z' fill='%235F6368'/%3E%3C/g%3E%3C/svg%3E\\\")}.swg-button-dark{background-color:#000}.swg-button-dark:after{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='235' height='24' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cpath d='M169.367 19c-5.09 0-9.367-4.265-9.367-9.5s4.277-9.5 9.367-9.5c2.818 0 4.823 1.133 6.33 2.622l-1.775 1.827c-1.082-1.04-2.55-1.857-4.555-1.857-3.72 0-6.628 3.081-6.628 6.908 0 3.827 2.907 6.908 6.628 6.908 2.411 0 3.78-1 4.664-1.898.724-.745 1.19-1.806 1.37-3.265h-6.034V8.643h8.494c.09.459.139 1.02.139 1.622 0 1.95-.516 4.357-2.183 6.072-1.627 1.734-3.691 2.663-6.45 2.663z' fill='%234285F4' fill-rule='nonzero'/%3E%3Cpath d='M192 13c0 3.456-2.69 6-6 6s-6-2.544-6-6c0-3.476 2.69-6 6-6s6 2.524 6 6zm-2.63 0c0-2.164-1.563-3.636-3.37-3.636-1.807 0-3.37 1.482-3.37 3.636 0 2.134 1.563 3.636 3.37 3.636 1.807 0 3.37-1.492 3.37-3.636z' fill='%23E94235' fill-rule='nonzero'/%3E%3Cpath d='M205 13c0 3.456-2.69 6-6 6-3.3 0-6-2.544-6-6 0-3.476 2.69-6 6-6s6 2.524 6 6zm-2.62 0c0-2.164-1.563-3.636-3.37-3.636-1.807 0-3.37 1.482-3.37 3.636 0 2.134 1.563 3.636 3.37 3.636 1.807.01 3.37-1.492 3.37-3.636z' fill='%23FABB05' fill-rule='nonzero'/%3E%3Cpath d='M217 7.362v10.53c0 4.337-2.499 6.108-5.457 6.108-2.786 0-4.452-1.908-5.083-3.465l2.192-.93c.392.96 1.35 2.085 2.891 2.085 1.896 0 3.064-1.204 3.064-3.445v-.841h-.087c-.564.714-1.656 1.33-3.025 1.33-2.872 0-5.495-2.554-5.495-5.842C206 9.584 208.633 7 211.495 7c1.37 0 2.46.626 3.025 1.311h.087v-.949H217zm-2.221 5.54c0-2.066-1.35-3.582-3.064-3.582-1.742 0-3.197 1.507-3.197 3.582 0 2.045 1.455 3.533 3.197 3.533 1.714 0 3.064-1.488 3.064-3.533z' fill='%234285F4' fill-rule='nonzero'/%3E%3Cpath fill='%2334A853' fill-rule='nonzero' d='M223 1v18h-3V1z'/%3E%3Cpath d='M232.844 14.973l2.046 1.363c-.662.981-2.256 2.664-5.014 2.664-3.42 0-5.876-2.634-5.876-6 0-3.566 2.487-6 5.585-6 3.119 0 4.643 2.474 5.144 3.816l.271.681-8.032 3.326c.612 1.202 1.574 1.823 2.918 1.823s2.276-.671 2.958-1.673zm-6.307-2.163l5.375-2.224c-.301-.751-1.184-1.272-2.237-1.272-1.343 0-3.208 1.182-3.138 3.496z' fill='%23E94235' fill-rule='nonzero'/%3E%3Cpath d='M6.576 19.384c-1.248 0-2.468-.408-3.66-1.224-1.192-.816-1.972-1.96-2.34-3.432l2.016-.816c.24.944.732 1.74 1.476 2.388.744.648 1.58.972 2.508.972.96 0 1.78-.252 2.46-.756.68-.504 1.02-1.188 1.02-2.052 0-.96-.34-1.7-1.02-2.22-.68-.52-1.756-1.004-3.228-1.452-1.52-.48-2.672-1.1-3.456-1.86-.784-.76-1.176-1.732-1.176-2.916 0-1.232.488-2.304 1.464-3.216.976-.912 2.248-1.368 3.816-1.368 1.456 0 2.64.364 3.552 1.092.912.728 1.504 1.524 1.776 2.388l-2.016.84c-.144-.544-.5-1.048-1.068-1.512-.568-.464-1.3-.696-2.196-.696-.848 0-1.572.236-2.172.708-.6.472-.9 1.06-.9 1.764 0 .64.276 1.18.828 1.62.552.44 1.364.836 2.436 1.188.848.272 1.556.536 2.124.792a9.842 9.842 0 0 1 1.728 1.02 4.065 4.065 0 0 1 1.32 1.584c.296.632.444 1.364.444 2.196 0 .832-.172 1.576-.516 2.232a4.19 4.19 0 0 1-1.368 1.56 6.875 6.875 0 0 1-3.852 1.176zM24.936 19h-2.112v-1.632h-.096c-.336.56-.848 1.036-1.536 1.428a4.345 4.345 0 0 1-2.184.588c-1.472 0-2.588-.448-3.348-1.344-.76-.896-1.14-2.096-1.14-3.6v-7.2h2.208v6.84c0 2.192.968 3.288 2.904 3.288.912 0 1.656-.368 2.232-1.104.576-.736.864-1.584.864-2.544V7.24h2.208V19zm8.904.384c-.896 0-1.7-.192-2.412-.576-.712-.384-1.244-.864-1.596-1.44h-.096V19h-2.112V1.816h2.208V7.24l-.096 1.632h.096c.352-.576.884-1.056 1.596-1.44.712-.384 1.516-.576 2.412-.576 1.52 0 2.832.6 3.936 1.8 1.104 1.2 1.656 2.688 1.656 4.464 0 1.776-.552 3.264-1.656 4.464-1.104 1.2-2.416 1.8-3.936 1.8zm-.36-2.016c1.024 0 1.904-.388 2.64-1.164.736-.776 1.104-1.804 1.104-3.084s-.368-2.308-1.104-3.084c-.736-.776-1.616-1.164-2.64-1.164-1.04 0-1.924.384-2.652 1.152-.728.768-1.092 1.8-1.092 3.096s.364 2.328 1.092 3.096c.728.768 1.612 1.152 2.652 1.152zm12.336 2.016c-1.312 0-2.396-.32-3.252-.96a5.682 5.682 0 0 1-1.884-2.4l1.968-.816c.624 1.472 1.688 2.208 3.192 2.208.688 0 1.252-.152 1.692-.456.44-.304.66-.704.66-1.2 0-.768-.536-1.288-1.608-1.56l-2.376-.576c-.752-.192-1.464-.556-2.136-1.092-.672-.536-1.008-1.26-1.008-2.172 0-1.04.46-1.884 1.38-2.532.92-.648 2.012-.972 3.276-.972 1.04 0 1.968.236 2.784.708a3.99 3.99 0 0 1 1.752 2.028l-1.92.792c-.432-1.04-1.328-1.56-2.688-1.56-.656 0-1.208.136-1.656.408-.448.272-.672.64-.672 1.104 0 .672.52 1.128 1.56 1.368l2.328.552c1.104.256 1.92.696 2.448 1.32.528.624.792 1.328.792 2.112 0 1.056-.432 1.936-1.296 2.64-.864.704-1.976 1.056-3.336 1.056zm11.928 0c-1.76 0-3.208-.596-4.344-1.788-1.136-1.192-1.704-2.684-1.704-4.476 0-1.792.568-3.284 1.704-4.476 1.136-1.192 2.584-1.788 4.344-1.788 1.312 0 2.4.32 3.264.96a5.621 5.621 0 0 1 1.896 2.424l-2.016.84c-.608-1.472-1.704-2.208-3.288-2.208-.976 0-1.836.4-2.58 1.2-.744.8-1.116 1.816-1.116 3.048s.372 2.248 1.116 3.048c.744.8 1.604 1.2 2.58 1.2 1.648 0 2.784-.736 3.408-2.208l1.968.84c-.4.96-1.044 1.764-1.932 2.412-.888.648-1.988.972-3.3.972zm9.36-.384h-2.208V7.24h2.112v1.92h.096c.224-.64.684-1.168 1.38-1.584.696-.416 1.372-.624 2.028-.624.656 0 1.208.096 1.656.288l-.84 2.064c-.288-.112-.68-.168-1.176-.168-.8 0-1.508.316-2.124.948-.616.632-.924 1.46-.924 2.484V19zm8.904-14.712a1.504 1.504 0 0 1-1.104.456c-.432 0-.8-.152-1.104-.456a1.504 1.504 0 0 1-.456-1.104c0-.432.152-.8.456-1.104a1.504 1.504 0 0 1 1.104-.456c.432 0 .8.152 1.104.456.304.304.456.672.456 1.104 0 .432-.152.8-.456 1.104zm0 14.712H73.8V7.24h2.208V19zm9.096.384c-.896 0-1.7-.192-2.412-.576-.712-.384-1.244-.864-1.596-1.44H81V19h-2.112V1.816h2.208V7.24L81 8.872h.096c.352-.576.884-1.056 1.596-1.44.712-.384 1.516-.576 2.412-.576 1.52 0 2.832.6 3.936 1.8 1.104 1.2 1.656 2.688 1.656 4.464 0 1.776-.552 3.264-1.656 4.464-1.104 1.2-2.416 1.8-3.936 1.8zm-.36-2.016c1.024 0 1.904-.388 2.64-1.164.736-.776 1.104-1.804 1.104-3.084s-.368-2.308-1.104-3.084c-.736-.776-1.616-1.164-2.64-1.164-1.04 0-1.924.384-2.652 1.152-.728.768-1.092 1.8-1.092 3.096s.364 2.328 1.092 3.096c.728.768 1.612 1.152 2.652 1.152zm13.296 2.016c-1.776 0-3.22-.592-4.332-1.776-1.112-1.184-1.668-2.68-1.668-4.488 0-1.712.54-3.184 1.62-4.416 1.08-1.232 2.46-1.848 4.14-1.848 1.744 0 3.14.568 4.188 1.704 1.048 1.136 1.572 2.656 1.572 4.56l-.024.408h-9.288c.064 1.184.46 2.12 1.188 2.808.728.688 1.58 1.032 2.556 1.032 1.584 0 2.656-.672 3.216-2.016l1.968.816c-.384.912-1.016 1.676-1.896 2.292-.88.616-1.96.924-3.24.924zm3.168-7.68c-.048-.672-.356-1.312-.924-1.92-.568-.608-1.412-.912-2.532-.912-.816 0-1.524.256-2.124.768-.6.512-1.012 1.2-1.236 2.064h6.816zM123.72 19h-2.256l-2.928-9.024L115.632 19H113.4l-3.792-11.76h2.304l2.616 8.88h.024l2.904-8.88h2.28l2.904 8.88h.024l2.592-8.88h2.256L123.72 19zm7.632-14.712a1.504 1.504 0 0 1-1.104.456c-.432 0-.8-.152-1.104-.456a1.504 1.504 0 0 1-.456-1.104c0-.432.152-.8.456-1.104a1.504 1.504 0 0 1 1.104-.456c.432 0 .8.152 1.104.456.304.304.456.672.456 1.104 0 .432-.152.8-.456 1.104zm0 14.712h-2.208V7.24h2.208V19zm7.968.192c-1.232 0-2.172-.328-2.82-.984-.648-.656-.972-1.584-.972-2.784V9.256h-2.064V7.24h2.064v-3.6h2.208v3.6h2.88v2.016h-2.88v6c0 1.28.528 1.92 1.584 1.92.4 0 .736-.064 1.008-.192l.768 1.896c-.48.208-1.072.312-1.776.312zm5.616-17.376V7.24l-.096 1.632h.096c.32-.56.824-1.036 1.512-1.428a4.389 4.389 0 0 1 2.208-.588c1.456 0 2.568.448 3.336 1.344.768.896 1.152 2.096 1.152 3.6V19h-2.208v-6.864c0-2.176-.968-3.264-2.904-3.264-.912 0-1.656.364-2.232 1.092-.576.728-.864 1.572-.864 2.532V19h-2.208V1.816h2.208z' fill='%23FFF'/%3E%3C/g%3E%3C/svg%3E\\\")}.swg-button-light:hover,.swg-button:hover{background-color:#f8f8f8}.swg-button-light:focus,.swg-button:focus{box-shadow:#e8e8e8}.swg-button-light:active,.swg-button:active{background-color:#fff}.swg-button-dark:hover{background-color:#3c4043}.swg-button-dark:focus{box-shadow:#202124}.swg-button-dark:active{background-color:#5f6368}.swg-button-light:lang(ar):after,.swg-button:lang(ar):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-ar-lt.svg)}.swg-button-dark:lang(ar):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-ar-dk.svg)}.swg-button-light:lang(de):after,.swg-button:lang(de):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-de-lt.svg)}.swg-button-dark:lang(de):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-de-dk.svg)}.swg-button-light:lang(es):after,.swg-button:lang(es):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-es-lt.svg)}.swg-button-dark:lang(es):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-es-dk.svg)}.swg-button-light:lang(es-latam):after,.swg-button:lang(es-latam):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-es-latam-lt.svg)}.swg-button-dark:lang(es-latam):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-es-latam-dk.svg)}.swg-button-light:lang(es-latn):after,.swg-button:lang(es-latn):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-es-latam-lt.svg)}.swg-button-dark:lang(es-latn):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-es-latam-dk.svg)}.swg-button-light:lang(fr):after,.swg-button:lang(fr):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-fr-lt.svg)}.swg-button-dark:lang(fr):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-fr-dk.svg)}.swg-button-light:lang(hi):after,.swg-button:lang(hi):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-hi-lt.svg)}.swg-button-dark:lang(hi):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-hi-dk.svg)}.swg-button-light:lang(id):after,.swg-button:lang(id):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-id-lt.svg)}.swg-button-dark:lang(id):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-id-dk.svg)}.swg-button-light:lang(it):after,.swg-button:lang(it):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-it-lt.svg)}.swg-button-dark:lang(it):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-it-dk.svg)}.swg-button-light:lang(jp):after,.swg-button:lang(jp):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-jp-lt.svg)}.swg-button-dark:lang(jp):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-jp-dk.svg)}.swg-button-light:lang(ko):after,.swg-button:lang(ko):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-ko-lt.svg)}.swg-button-dark:lang(ko):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-ko-dk.svg)}.swg-button-light:lang(ms):after,.swg-button:lang(ms):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-ms-lt.svg)}.swg-button-dark:lang(ms):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-ms-dk.svg)}.swg-button-light:lang(nl):after,.swg-button:lang(nl):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-nl-lt.svg)}.swg-button-dark:lang(nl):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-nl-dk.svg)}.swg-button-light:lang(pl):after,.swg-button:lang(pl):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-pl-lt.svg)}.swg-button-dark:lang(pl):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-pl-dk.svg)}.swg-button-light:lang(pt):after,.swg-button:lang(pt):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-pt-lt.svg)}.swg-button-dark:lang(pt):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-pt-dk.svg)}.swg-button-light:lang(pt-br):after,.swg-button:lang(pt-br):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-pt-br-lt.svg)}.swg-button-dark:lang(pt-br):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-pt-br-dk.svg)}.swg-button-light:lang(ru):after,.swg-button:lang(ru):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-ru-lt.svg)}.swg-button-dark:lang(ru):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-ru-dk.svg)}.swg-button-light:lang(se):after,.swg-button:lang(se):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-se-lt.svg)}.swg-button-dark:lang(se):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-se-dk.svg)}.swg-button-light:lang(th):after,.swg-button:lang(th):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-th-lt.svg)}.swg-button-dark:lang(th):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-th-dk.svg)}.swg-button-light:lang(tr):after,.swg-button:lang(tr):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-tr-lt.svg)}.swg-button-dark:lang(tr):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-tr-dk.svg)}.swg-button-light:lang(uk):after,.swg-button:lang(uk):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-uk-lt.svg)}.swg-button-dark:lang(uk):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-uk-dk.svg)}.swg-button-light:lang(zh-tw):after,.swg-button:lang(zh-tw):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-zh-tw-lt.svg)}.swg-button-dark:lang(zh-tw):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-zh-tw-dk.svg)}\\n/*# sourceURL=/extensions/amp-subscriptions-google/0.1/amp-subscriptions-google.css*/\";\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {CSS} from '../../../build/amp-subscriptions-google-0.1.css';\nimport {\n  ConfiguredRuntime,\n  Fetcher,\n  SubscribeResponse,\n} from '../../../third_party/subscriptions-project/swg';\nimport {DocImpl} from '../../amp-subscriptions/0.1/doc-impl';\nimport {Entitlement, GrantReason} from '../../amp-subscriptions/0.1/entitlement';\nimport {PageConfig} from '../../../third_party/subscriptions-project/config';\nimport {Services} from '../../../src/services';\nimport {installStylesForDoc} from '../../../src/style-installer';\nimport {parseUrlDeprecated} from '../../../src/url';\n\nconst TAG = 'amp-subscriptions-google';\nconst PLATFORM_ID = 'subscribe.google.com';\nconst GOOGLE_DOMAIN_RE = /(^|\\.)google\\.(com?|[a-z]{2}|com?\\.[a-z]{2}|cat)$/;\n\n\n/**\n */\nexport class GoogleSubscriptionsPlatformService {\n  /**\n   * @param {!../../../src/service/ampdoc-impl.AmpDoc} ampdoc\n   */\n  constructor(ampdoc) {\n    /** @private {!../../../src/service/ampdoc-impl.AmpDoc} */\n    this.ampdoc_ = ampdoc;\n  }\n\n  /**\n   * @param {!JsonObject} platformConfig\n   * @param {!../../amp-subscriptions/0.1/service-adapter.ServiceAdapter} serviceAdapter\n   * @return {!GoogleSubscriptionsPlatform}\n   */\n  createPlatform(platformConfig, serviceAdapter) {\n    return new GoogleSubscriptionsPlatform(this.ampdoc_,\n        platformConfig, serviceAdapter);\n  }\n}\n\n\n/**\n * @implements {../../amp-subscriptions/0.1/subscription-platform.SubscriptionPlatform}\n */\nexport class GoogleSubscriptionsPlatform {\n\n  /**\n   * @param {!../../../src/service/ampdoc-impl.AmpDoc} ampdoc\n   * @param {!JsonObject} platformConfig\n   * @param {!../../amp-subscriptions/0.1/service-adapter.ServiceAdapter} serviceAdapter\n   */\n  constructor(ampdoc, platformConfig, serviceAdapter) {\n    /**\n     * @private @const\n     * {!../../amp-subscriptions/0.1/service-adapter.ServiceAdapter}\n     */\n    this.serviceAdapter_ = serviceAdapter;\n    /** @private @const {!ConfiguredRuntime} */\n    this.runtime_ = new ConfiguredRuntime(\n        new DocImpl(ampdoc),\n        serviceAdapter.getPageConfig(),\n        {\n          fetcher: new AmpFetcher(ampdoc.win),\n        }\n    );\n    this.runtime_.setOnLoginRequest(request => {\n      this.onLoginRequest_(request && request.linkRequested);\n    });\n    this.runtime_.setOnLinkComplete(() => {\n      this.onLinkComplete_();\n    });\n    this.runtime_.setOnNativeSubscribeRequest(() => {\n      this.onNativeSubscribeRequest_();\n    });\n    this.runtime_.setOnSubscribeResponse(promise => {\n      promise.then(response => {\n        this.onSubscribeResponse_(response);\n      });\n    });\n\n    /** @const @private {!JsonObject} */\n    this.serviceConfig_ = platformConfig;\n\n    /** @private {boolean} */\n    this.isGoogleViewer_ = false;\n    this.resolveGoogleViewer_(Services.viewerForDoc(ampdoc));\n\n    // Install styles.\n    installStylesForDoc(ampdoc, CSS, () => {}, false, TAG);\n  }\n\n  /**\n   * @param {boolean} linkRequested\n   * @private\n   */\n  onLoginRequest_(linkRequested) {\n    if (linkRequested && this.isGoogleViewer_) {\n      this.runtime_.linkAccount();\n    } else {\n      this.maybeComplete_(this.serviceAdapter_.delegateActionToLocal(\n          'login'));\n    }\n  }\n\n  /** @private */\n  onLinkComplete_() {\n    this.runtime_.reset();\n    this.serviceAdapter_.reAuthorizePlatform(this);\n  }\n\n  /** @private */\n  onNativeSubscribeRequest_() {\n    this.maybeComplete_(this.serviceAdapter_.delegateActionToLocal(\n        'subscribe'));\n  }\n\n  /**\n   * @param {!Promise<boolean>} promise\n   * @private\n   */\n  maybeComplete_(promise) {\n    promise.then(result => {\n      if (result) {\n        this.runtime_.reset();\n      }\n    });\n  }\n\n  /**\n   * @param {!SubscribeResponse} response\n   * @private\n   */\n  onSubscribeResponse_(response) {\n    response.complete().then(() => {\n      this.runtime_.reset();\n      this.serviceAdapter_.reAuthorizePlatform(this);\n    });\n  }\n\n  /** @override */\n  getEntitlements() {\n    return this.runtime_.getEntitlements().then(swgEntitlements => {\n      const swgEntitlement = swgEntitlements.getEntitlementForThis();\n      if (!swgEntitlement) {\n        return null;\n      }\n      swgEntitlements.ack();\n      return new Entitlement({\n        source: swgEntitlement.source,\n        raw: swgEntitlements.raw,\n        service: PLATFORM_ID,\n        granted: true, //swgEntitlements.getEntitlementForThis makes sure this is true.\n        grantReason: GrantReason.SUBSCRIBER, // there is no other case of subscription for SWG as of now.\n        dataObject: swgEntitlement.json(),\n      });\n    });\n  }\n\n  /** @override */\n  getServiceId() {\n    return PLATFORM_ID;\n  }\n\n  /** @override */\n  activate(entitlement) {\n    // Offers or abbreviated offers may need to be shown depending on\n    // whether the access has been granted and whether user is a subscriber.\n    if (!entitlement.granted) {\n      this.runtime_.showOffers({list: 'amp'});\n    } else if (!entitlement.isSubscriber()) {\n      this.runtime_.showAbbrvOffer({list: 'amp'});\n    }\n  }\n\n  /**\n   * Returns if pingback is enabled for this platform\n   * @return {boolean}\n   */\n  isPingbackEnabled() {\n    return false;\n  }\n\n  /**\n   * Performs the pingback to the subscription platform\n   */\n  pingback() {}\n\n  /** @override */\n  supportsCurrentViewer() {\n    return this.isGoogleViewer_;\n  }\n\n  /**\n   * @param {!../../../src/service/viewer-impl.Viewer} viewer\n   * @private\n   */\n  resolveGoogleViewer_(viewer) {\n    // This is a very light veiwer resolution since there's no real security\n    // implication - this only affects on-platform preferences.\n    const viewerUrl = viewer.getParam('viewerUrl');\n    if (viewerUrl) {\n      this.isGoogleViewer_ = GOOGLE_DOMAIN_RE.test(\n          parseUrlDeprecated(viewerUrl).hostname);\n    } else {\n      // This can only be resolved asynchronously in this case. However, the\n      // action execution must be done synchronously. Thus we have to allow\n      // a minimal race condition here.\n      viewer.getViewerOrigin().then(origin => {\n        if (origin) {\n          this.isGoogleViewer_ = GOOGLE_DOMAIN_RE.test(\n              parseUrlDeprecated(origin).hostname);\n        }\n      });\n    }\n  }\n\n  /** @override */\n  getBaseScore() {\n    return this.serviceConfig_['baseScore'] || 0;\n  }\n\n  /** @override */\n  executeAction(action) {\n    if (action === 'subscribe') {\n      this.runtime_.showOffers({list: 'amp', isClosable: true});\n      return Promise.resolve(true);\n    }\n    return Promise.resolve(false);\n  }\n\n  /** @override */\n  decorateUI(element, action, options) {\n    if (action === 'subscribe') {\n      element.textContent = '';\n      this.runtime_.attachButton(element, options, () => {});\n    }\n  }\n}\n\n\n/**\n * Adopts fetcher protocol required for SwG to AMP fetching rules.\n * @implements {Fetcher}\n */\nclass AmpFetcher {\n\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n    /** @const @private {!../../../src/service/xhr-impl.Xhr} */\n    this.xhr_ = Services.xhrFor(win);\n  }\n\n  /** @override */\n  fetchCredentialedJson(url) {\n    return this.xhr_.fetchJson(url, {\n      credentials: 'include',\n    }).then(response => response.json());\n  }\n}\n\n\n// Register the extension services.\nAMP.extension(TAG, '0.1', function(AMP) {\n  AMP.registerServiceForDoc('subscriptions-google', ampdoc => {\n    const platformService = new GoogleSubscriptionsPlatformService(ampdoc);\n    Services.subscriptionsServiceForDoc(ampdoc).then(service => {\n      service.registerPlatform(PLATFORM_ID,\n          (platformConfig, serviceAdapter) => {\n            return platformService.createPlatform(platformConfig,\n                serviceAdapter);\n          }\n      );\n    });\n    return platformService;\n  });\n});\n\n\n/**\n * TODO(dvoytenko): remove once compiler type checking is fixed for third_party.\n * @package @visibleForTesting\n */\nexport function getFetcherClassForTesting() {\n  return Fetcher;\n}\n\n/**\n * TODO(dvoytenko): remove once compiler type checking is fixed for third_party.\n * @package @visibleForTesting\n */\nexport function getPageConfigClassForTesting() {\n  return PageConfig;\n}\n\n/**\n * TODO(dvoytenko): remove once compiler type checking is fixed for third_party.\n * @package @visibleForTesting\n */\nexport function getSubscribeResponseClassForTesting() {\n  return SubscribeResponse;\n}\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Doc} from '../../../third_party/subscriptions-project/config';\nimport {dev} from '../../../src/log';\n\n\n/**\n * Adopts config document to ampdoc.\n * @implements {Doc}\n */\nexport class DocImpl {\n\n  /**\n   * @param {!../../../src/service/ampdoc-impl.AmpDoc} ampdoc\n   */\n  constructor(ampdoc) {\n    /** @private @const {!../../../src/service/ampdoc-impl.AmpDoc} */\n    this.ampdoc_ = ampdoc;\n  }\n\n  /** @override */\n  getWin() {\n    return this.ampdoc_.win;\n  }\n\n  /** @override */\n  getRootNode() {\n    return this.ampdoc_.getRootNode();\n  }\n\n  /** @override */\n  getRootElement() {\n    const root = this.ampdoc_.getRootNode();\n    return dev().assertElement(root.documentElement || root.body || root);\n  }\n\n  /** @override */\n  getHead() {\n    return dev().assertElement(this.ampdoc_.getHeadNode());\n  }\n\n  /** @override */\n  getBody() {\n    return this.ampdoc_.isBodyAvailable() ? this.ampdoc_.getBody() : null;\n  }\n\n  /** @override */\n  isReady() {\n    return this.ampdoc_.isReady();\n  }\n\n  /** @override */\n  whenReady() {\n    return this.ampdoc_.whenReady();\n  }\n}\n\n\n/** @package Visible for testing only. */\nexport function getDocClassForTesting() {\n  return Doc;\n}\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {dict} from '../../../src/utils/object';\n\n/** @enum {string} */\nexport const GrantReason = {\n  'SUBSCRIBER': 'SUBSCRIBER',\n  'METERING': 'METERING',\n};\n\n/**\n * The single entitlement object.\n */\nexport class Entitlement {\n\n  /**\n   * @param {string} service\n   * @return {!Entitlement}\n   */\n  static empty(service) {\n    return new Entitlement({\n      source: '',\n      raw: '',\n      service,\n      granted: false,\n    });\n  }\n\n  /**\n   * @param {Object} input\n   * @param {string} [input.source]\n   * @param {string} [input.raw]\n   * @param {string} [input.service]\n   * @param {boolean} [input.granted]\n   * @param {?GrantReason} [input.grantReason]\n   * @param {?JsonObject} [input.dataObject]\n   */\n  constructor({source, raw = '', service, granted = false,\n    grantReason = '', dataObject}) {\n    /** @const {string} */\n    this.raw = raw;\n    /** @const {string} */\n    this.source = source;\n    /** {string} */\n    this.service = service;\n    /** @const {boolean} */\n    this.granted = granted;\n    /** @const {?string} */\n    this.grantReason = grantReason;\n    /** @const {?JsonObject} */\n    this.data = dataObject;\n  }\n\n  /**\n   * Returns json format of entitlements\n   * @return {!JsonObject}\n   */\n  json() {\n    const entitlementJson = dict({\n      'source': this.source,\n      'service': this.service,\n      'granted': this.granted,\n      'grantReason': this.grantReason,\n      'data': this.data,\n    });\n    return (entitlementJson);\n  }\n\n  /**\n   * Returns json to be used for pingback.\n   *\n   * @return {!JsonObject}\n   */\n  jsonForPingback() {\n    return /** @type {!JsonObject} */ (Object.assign({},\n        {'raw': this.raw},\n        this.json()));\n  }\n\n  /**\n   * @param {?JsonObject} json\n   * @param {?string} rawData\n   * @return {!Entitlement}\n   */\n  static parseFromJson(json, rawData = null) {\n    if (!json) {\n      json = dict();\n    }\n    const raw = rawData || JSON.stringify(json);\n    const source = json['source'] || '';\n    const granted = json['granted'] || false;\n    const grantReason = json['grantReason'];\n    const dataObject = json['data'] || null;\n    return new Entitlement({source, raw, service: '',\n      granted, grantReason, dataObject});\n  }\n\n  /**\n   * Returns if the user is a subscriber.\n   * @return {boolean}\n   */\n  isSubscriber() {\n    return this.granted && this.grantReason === GrantReason.SUBSCRIBER;\n  }\n}\n","/*!\n\nCopyright (C) 2014-2016 by Andrea Giammarchi - @WebReflection\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n*/\n// global window Object\n// optional polyfill info\n//    'auto' used by default, everything is feature detected\n//    'force' use the polyfill even if not fully needed\nfunction installCustomElements(window, polyfill) {'use strict';\n\n  // DO NOT USE THIS FILE DIRECTLY, IT WON'T WORK\n  // THIS IS A PROJECT BASED ON A BUILD SYSTEM\n  // THIS FILE IS JUST WRAPPED UP RESULTING IN\n  // build/document-register-element.node.js\n\n  var\n    document = window.document,\n    Object = window.Object\n  ;\n\n  var htmlClass = (function (info) {\n    // (C) Andrea Giammarchi - @WebReflection - MIT Style\n    var\n      catchClass = /^[A-Z]+[a-z]/,\n      filterBy = function (re) {\n        var arr = [], tag;\n        for (tag in register) {\n          if (re.test(tag)) arr.push(tag);\n        }\n        return arr;\n      },\n      add = function (Class, tag) {\n        tag = tag.toLowerCase();\n        if (!(tag in register)) {\n          register[Class] = (register[Class] || []).concat(tag);\n          register[tag] = (register[tag.toUpperCase()] = Class);\n        }\n      },\n      register = (Object.create || Object)(null),\n      htmlClass = {},\n      i, section, tags, Class\n    ;\n    for (section in info) {\n      for (Class in info[section]) {\n        tags = info[section][Class];\n        register[Class] = tags;\n        for (i = 0; i < tags.length; i++) {\n          register[tags[i].toLowerCase()] =\n          register[tags[i].toUpperCase()] = Class;\n        }\n      }\n    }\n    htmlClass.get = function get(tagOrClass) {\n      return typeof tagOrClass === 'string' ?\n        (register[tagOrClass] || (catchClass.test(tagOrClass) ? [] : '')) :\n        filterBy(tagOrClass);\n    };\n    htmlClass.set = function set(tag, Class) {\n      return (catchClass.test(tag) ?\n        add(tag, Class) :\n        add(Class, tag)\n      ), htmlClass;\n    };\n    return htmlClass;\n  }({\n    \"collections\": {\n      \"HTMLAllCollection\": [\n        \"all\"\n      ],\n      \"HTMLCollection\": [\n        \"forms\"\n      ],\n      \"HTMLFormControlsCollection\": [\n        \"elements\"\n      ],\n      \"HTMLOptionsCollection\": [\n        \"options\"\n      ]\n    },\n    \"elements\": {\n      \"Element\": [\n        \"element\"\n      ],\n      \"HTMLAnchorElement\": [\n        \"a\"\n      ],\n      \"HTMLAppletElement\": [\n        \"applet\"\n      ],\n      \"HTMLAreaElement\": [\n        \"area\"\n      ],\n      \"HTMLAttachmentElement\": [\n        \"attachment\"\n      ],\n      \"HTMLAudioElement\": [\n        \"audio\"\n      ],\n      \"HTMLBRElement\": [\n        \"br\"\n      ],\n      \"HTMLBaseElement\": [\n        \"base\"\n      ],\n      \"HTMLBodyElement\": [\n        \"body\"\n      ],\n      \"HTMLButtonElement\": [\n        \"button\"\n      ],\n      \"HTMLCanvasElement\": [\n        \"canvas\"\n      ],\n      \"HTMLContentElement\": [\n        \"content\"\n      ],\n      \"HTMLDListElement\": [\n        \"dl\"\n      ],\n      \"HTMLDataElement\": [\n        \"data\"\n      ],\n      \"HTMLDataListElement\": [\n        \"datalist\"\n      ],\n      \"HTMLDetailsElement\": [\n        \"details\"\n      ],\n      \"HTMLDialogElement\": [\n        \"dialog\"\n      ],\n      \"HTMLDirectoryElement\": [\n        \"dir\"\n      ],\n      \"HTMLDivElement\": [\n        \"div\"\n      ],\n      \"HTMLDocument\": [\n        \"document\"\n      ],\n      \"HTMLElement\": [\n        \"element\",\n        \"abbr\",\n        \"address\",\n        \"article\",\n        \"aside\",\n        \"b\",\n        \"bdi\",\n        \"bdo\",\n        \"cite\",\n        \"code\",\n        \"command\",\n        \"dd\",\n        \"dfn\",\n        \"dt\",\n        \"em\",\n        \"figcaption\",\n        \"figure\",\n        \"footer\",\n        \"header\",\n        \"i\",\n        \"kbd\",\n        \"mark\",\n        \"nav\",\n        \"noscript\",\n        \"rp\",\n        \"rt\",\n        \"ruby\",\n        \"s\",\n        \"samp\",\n        \"section\",\n        \"small\",\n        \"strong\",\n        \"sub\",\n        \"summary\",\n        \"sup\",\n        \"u\",\n        \"var\",\n        \"wbr\"\n      ],\n      \"HTMLEmbedElement\": [\n        \"embed\"\n      ],\n      \"HTMLFieldSetElement\": [\n        \"fieldset\"\n      ],\n      \"HTMLFontElement\": [\n        \"font\"\n      ],\n      \"HTMLFormElement\": [\n        \"form\"\n      ],\n      \"HTMLFrameElement\": [\n        \"frame\"\n      ],\n      \"HTMLFrameSetElement\": [\n        \"frameset\"\n      ],\n      \"HTMLHRElement\": [\n        \"hr\"\n      ],\n      \"HTMLHeadElement\": [\n        \"head\"\n      ],\n      \"HTMLHeadingElement\": [\n        \"h1\",\n        \"h2\",\n        \"h3\",\n        \"h4\",\n        \"h5\",\n        \"h6\"\n      ],\n      \"HTMLHtmlElement\": [\n        \"html\"\n      ],\n      \"HTMLIFrameElement\": [\n        \"iframe\"\n      ],\n      \"HTMLImageElement\": [\n        \"img\"\n      ],\n      \"HTMLInputElement\": [\n        \"input\"\n      ],\n      \"HTMLKeygenElement\": [\n        \"keygen\"\n      ],\n      \"HTMLLIElement\": [\n        \"li\"\n      ],\n      \"HTMLLabelElement\": [\n        \"label\"\n      ],\n      \"HTMLLegendElement\": [\n        \"legend\"\n      ],\n      \"HTMLLinkElement\": [\n        \"link\"\n      ],\n      \"HTMLMapElement\": [\n        \"map\"\n      ],\n      \"HTMLMarqueeElement\": [\n        \"marquee\"\n      ],\n      \"HTMLMediaElement\": [\n        \"media\"\n      ],\n      \"HTMLMenuElement\": [\n        \"menu\"\n      ],\n      \"HTMLMenuItemElement\": [\n        \"menuitem\"\n      ],\n      \"HTMLMetaElement\": [\n        \"meta\"\n      ],\n      \"HTMLMeterElement\": [\n        \"meter\"\n      ],\n      \"HTMLModElement\": [\n        \"del\",\n        \"ins\"\n      ],\n      \"HTMLOListElement\": [\n        \"ol\"\n      ],\n      \"HTMLObjectElement\": [\n        \"object\"\n      ],\n      \"HTMLOptGroupElement\": [\n        \"optgroup\"\n      ],\n      \"HTMLOptionElement\": [\n        \"option\"\n      ],\n      \"HTMLOutputElement\": [\n        \"output\"\n      ],\n      \"HTMLParagraphElement\": [\n        \"p\"\n      ],\n      \"HTMLParamElement\": [\n        \"param\"\n      ],\n      \"HTMLPictureElement\": [\n        \"picture\"\n      ],\n      \"HTMLPreElement\": [\n        \"pre\"\n      ],\n      \"HTMLProgressElement\": [\n        \"progress\"\n      ],\n      \"HTMLQuoteElement\": [\n        \"blockquote\",\n        \"q\",\n        \"quote\"\n      ],\n      \"HTMLScriptElement\": [\n        \"script\"\n      ],\n      \"HTMLSelectElement\": [\n        \"select\"\n      ],\n      \"HTMLShadowElement\": [\n        \"shadow\"\n      ],\n      \"HTMLSlotElement\": [\n        \"slot\"\n      ],\n      \"HTMLSourceElement\": [\n        \"source\"\n      ],\n      \"HTMLSpanElement\": [\n        \"span\"\n      ],\n      \"HTMLStyleElement\": [\n        \"style\"\n      ],\n      \"HTMLTableCaptionElement\": [\n        \"caption\"\n      ],\n      \"HTMLTableCellElement\": [\n        \"td\",\n        \"th\"\n      ],\n      \"HTMLTableColElement\": [\n        \"col\",\n        \"colgroup\"\n      ],\n      \"HTMLTableElement\": [\n        \"table\"\n      ],\n      \"HTMLTableRowElement\": [\n        \"tr\"\n      ],\n      \"HTMLTableSectionElement\": [\n        \"thead\",\n        \"tbody\",\n        \"tfoot\"\n      ],\n      \"HTMLTemplateElement\": [\n        \"template\"\n      ],\n      \"HTMLTextAreaElement\": [\n        \"textarea\"\n      ],\n      \"HTMLTimeElement\": [\n        \"time\"\n      ],\n      \"HTMLTitleElement\": [\n        \"title\"\n      ],\n      \"HTMLTrackElement\": [\n        \"track\"\n      ],\n      \"HTMLUListElement\": [\n        \"ul\"\n      ],\n      \"HTMLUnknownElement\": [\n        \"unknown\",\n        \"vhgroupv\",\n        \"vkeygen\"\n      ],\n      \"HTMLVideoElement\": [\n        \"video\"\n      ]\n    },\n    \"nodes\": {\n      \"Attr\": [\n        \"node\"\n      ],\n      \"Audio\": [\n        \"audio\"\n      ],\n      \"CDATASection\": [\n        \"node\"\n      ],\n      \"CharacterData\": [\n        \"node\"\n      ],\n      \"Comment\": [\n        \"#comment\"\n      ],\n      \"Document\": [\n        \"#document\"\n      ],\n      \"DocumentFragment\": [\n        \"#document-fragment\"\n      ],\n      \"DocumentType\": [\n        \"node\"\n      ],\n      \"HTMLDocument\": [\n        \"#document\"\n      ],\n      \"Image\": [\n        \"img\"\n      ],\n      \"Option\": [\n        \"option\"\n      ],\n      \"ProcessingInstruction\": [\n        \"node\"\n      ],\n      \"ShadowRoot\": [\n        \"#shadow-root\"\n      ],\n      \"Text\": [\n        \"#text\"\n      ],\n      \"XMLDocument\": [\n        \"xml\"\n      ]\n    }\n  }));\n  \n  \n    \n  // passed at runtime, configurable\n  // via nodejs module\n  if (!polyfill) polyfill = 'auto';\n  \n  var\n    // V0 polyfill entry\n    REGISTER_ELEMENT = 'registerElement',\n  \n    // IE < 11 only + old WebKit for attributes + feature detection\n    EXPANDO_UID = '__' + REGISTER_ELEMENT + (window.Math.random() * 10e4 >> 0),\n  \n    // shortcuts and costants\n    ADD_EVENT_LISTENER = 'addEventListener',\n    ATTACHED = 'attached',\n    CALLBACK = 'Callback',\n    DETACHED = 'detached',\n    EXTENDS = 'extends',\n  \n    ATTRIBUTE_CHANGED_CALLBACK = 'attributeChanged' + CALLBACK,\n    ATTACHED_CALLBACK = ATTACHED + CALLBACK,\n    CONNECTED_CALLBACK = 'connected' + CALLBACK,\n    DISCONNECTED_CALLBACK = 'disconnected' + CALLBACK,\n    CREATED_CALLBACK = 'created' + CALLBACK,\n    DETACHED_CALLBACK = DETACHED + CALLBACK,\n  \n    ADDITION = 'ADDITION',\n    MODIFICATION = 'MODIFICATION',\n    REMOVAL = 'REMOVAL',\n  \n    DOM_ATTR_MODIFIED = 'DOMAttrModified',\n    DOM_CONTENT_LOADED = 'DOMContentLoaded',\n    DOM_SUBTREE_MODIFIED = 'DOMSubtreeModified',\n  \n    PREFIX_TAG = '<',\n    PREFIX_IS = '=',\n  \n    // valid and invalid node names\n    validName = /^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,\n    invalidNames = [\n      'ANNOTATION-XML',\n      'COLOR-PROFILE',\n      'FONT-FACE',\n      'FONT-FACE-SRC',\n      'FONT-FACE-URI',\n      'FONT-FACE-FORMAT',\n      'FONT-FACE-NAME',\n      'MISSING-GLYPH'\n    ],\n  \n    // registered types and their prototypes\n    types = [],\n    protos = [],\n  \n    // to query subnodes\n    query = '',\n  \n    // html shortcut used to feature detect\n    documentElement = document.documentElement,\n  \n    // ES5 inline helpers || basic patches\n    indexOf = types.indexOf || function (v) {\n      for(var i = this.length; i-- && this[i] !== v;){}\n      return i;\n    },\n  \n    // other helpers / shortcuts\n    OP = Object.prototype,\n    hOP = OP.hasOwnProperty,\n    iPO = OP.isPrototypeOf,\n  \n    defineProperty = Object.defineProperty,\n    empty = [],\n    gOPD = Object.getOwnPropertyDescriptor,\n    gOPN = Object.getOwnPropertyNames,\n    gPO = Object.getPrototypeOf,\n    sPO = Object.setPrototypeOf,\n  \n    // jshint proto: true\n    hasProto = !!Object.__proto__,\n  \n    // V1 helpers\n    fixGetClass = false,\n    DRECEV1 = '__dreCEv1',\n    customElements = window.customElements,\n    usableCustomElements = polyfill !== 'force' && !!(\n      customElements &&\n      customElements.define &&\n      customElements.get &&\n      customElements.whenDefined\n    ),\n    Dict = Object.create || Object,\n    Map = window.Map || function Map() {\n      var K = [], V = [], i;\n      return {\n        get: function (k) {\n          return V[indexOf.call(K, k)];\n        },\n        set: function (k, v) {\n          i = indexOf.call(K, k);\n          if (i < 0) V[K.push(k) - 1] = v;\n          else V[i] = v;\n        }\n      };\n    },\n    Promise = window.Promise || function (fn) {\n      var\n        notify = [],\n        done = false,\n        p = {\n          'catch': function () {\n            return p;\n          },\n          'then': function (cb) {\n            notify.push(cb);\n            if (done) setTimeout(resolve, 1);\n            return p;\n          }\n        }\n      ;\n      function resolve(value) {\n        done = true;\n        while (notify.length) notify.shift()(value);\n      }\n      fn(resolve);\n      return p;\n    },\n    justCreated = false,\n    constructors = Dict(null),\n    waitingList = Dict(null),\n    nodeNames = new Map(),\n    secondArgument = function (is) {\n      return is.toLowerCase();\n    },\n  \n    // used to create unique instances\n    create = Object.create || function Bridge(proto) {\n      // silly broken polyfill probably ever used but short enough to work\n      return proto ? ((Bridge.prototype = proto), new Bridge()) : this;\n    },\n  \n    // will set the prototype if possible\n    // or copy over all properties\n    setPrototype = sPO || (\n      hasProto ?\n        function (o, p) {\n          o.__proto__ = p;\n          return o;\n        } : (\n      (gOPN && gOPD) ?\n        (function(){\n          function setProperties(o, p) {\n            for (var\n              key,\n              names = gOPN(p),\n              i = 0, length = names.length;\n              i < length; i++\n            ) {\n              key = names[i];\n              if (!hOP.call(o, key)) {\n                defineProperty(o, key, gOPD(p, key));\n              }\n            }\n          }\n          return function (o, p) {\n            do {\n              setProperties(o, p);\n            } while ((p = gPO(p)) && !iPO.call(p, o));\n            return o;\n          };\n        }()) :\n        function (o, p) {\n          for (var key in p) {\n            o[key] = p[key];\n          }\n          return o;\n        }\n    )),\n  \n    // DOM shortcuts and helpers, if any\n  \n    MutationObserver = window.MutationObserver ||\n                       window.WebKitMutationObserver,\n  \n    HTMLElementPrototype = (\n      window.HTMLElement ||\n      window.Element ||\n      window.Node\n    ).prototype,\n  \n    IE8 = !iPO.call(HTMLElementPrototype, documentElement),\n  \n    safeProperty = IE8 ? function (o, k, d) {\n      o[k] = d.value;\n      return o;\n    } : defineProperty,\n  \n    isValidNode = IE8 ?\n      function (node) {\n        return node.nodeType === 1;\n      } :\n      function (node) {\n        return iPO.call(HTMLElementPrototype, node);\n      },\n  \n    targets = IE8 && [],\n  \n    attachShadow = HTMLElementPrototype.attachShadow,\n    cloneNode = HTMLElementPrototype.cloneNode,\n    dispatchEvent = HTMLElementPrototype.dispatchEvent,\n    getAttribute = HTMLElementPrototype.getAttribute,\n    hasAttribute = HTMLElementPrototype.hasAttribute,\n    removeAttribute = HTMLElementPrototype.removeAttribute,\n    setAttribute = HTMLElementPrototype.setAttribute,\n  \n    // replaced later on\n    createElement = document.createElement,\n    patchedCreateElement = createElement,\n  \n    // shared observer for all attributes\n    attributesObserver = MutationObserver && {\n      attributes: true,\n      characterData: true,\n      attributeOldValue: true\n    },\n  \n    // useful to detect only if there's no MutationObserver\n    DOMAttrModified = MutationObserver || function(e) {\n      doesNotSupportDOMAttrModified = false;\n      documentElement.removeEventListener(\n        DOM_ATTR_MODIFIED,\n        DOMAttrModified\n      );\n    },\n  \n    // will both be used to make DOMNodeInserted asynchronous\n    asapQueue,\n    asapTimer = 0,\n  \n    // internal flags\n    V0 = REGISTER_ELEMENT in document,\n    setListener = true,\n    justSetup = false,\n    doesNotSupportDOMAttrModified = true,\n    dropDomContentLoaded = true,\n  \n    // needed for the innerHTML helper\n    notFromInnerHTMLHelper = true,\n  \n    // optionally defined later on\n    onSubtreeModified,\n    callDOMAttrModified,\n    getAttributesMirror,\n    observer,\n    observe,\n  \n    // based on setting prototype capability\n    // will check proto or the expando attribute\n    // in order to setup the node once\n    patchIfNotAlready,\n    patch\n  ;\n  \n  // only if needed\n  if (!V0) {\n  \n    if (sPO || hasProto) {\n        patchIfNotAlready = function (node, proto) {\n          if (!iPO.call(proto, node)) {\n            setupNode(node, proto);\n          }\n        };\n        patch = setupNode;\n    } else {\n        patchIfNotAlready = function (node, proto) {\n          if (!node[EXPANDO_UID]) {\n            node[EXPANDO_UID] = Object(true);\n            setupNode(node, proto);\n          }\n        };\n        patch = patchIfNotAlready;\n    }\n  \n    if (IE8) {\n      doesNotSupportDOMAttrModified = false;\n      (function (){\n        var\n          descriptor = gOPD(HTMLElementPrototype, ADD_EVENT_LISTENER),\n          addEventListener = descriptor.value,\n          patchedRemoveAttribute = function (name) {\n            var e = new CustomEvent(DOM_ATTR_MODIFIED, {bubbles: true});\n            e.attrName = name;\n            e.prevValue = getAttribute.call(this, name);\n            e.newValue = null;\n            e[REMOVAL] = e.attrChange = 2;\n            removeAttribute.call(this, name);\n            dispatchEvent.call(this, e);\n          },\n          patchedSetAttribute = function (name, value) {\n            var\n              had = hasAttribute.call(this, name),\n              old = had && getAttribute.call(this, name),\n              e = new CustomEvent(DOM_ATTR_MODIFIED, {bubbles: true})\n            ;\n            setAttribute.call(this, name, value);\n            e.attrName = name;\n            e.prevValue = had ? old : null;\n            e.newValue = value;\n            if (had) {\n              e[MODIFICATION] = e.attrChange = 1;\n            } else {\n              e[ADDITION] = e.attrChange = 0;\n            }\n            dispatchEvent.call(this, e);\n          },\n          onPropertyChange = function (e) {\n            // jshint eqnull:true\n            var\n              node = e.currentTarget,\n              superSecret = node[EXPANDO_UID],\n              propertyName = e.propertyName,\n              event\n            ;\n            if (superSecret.hasOwnProperty(propertyName)) {\n              superSecret = superSecret[propertyName];\n              event = new CustomEvent(DOM_ATTR_MODIFIED, {bubbles: true});\n              event.attrName = superSecret.name;\n              event.prevValue = superSecret.value || null;\n              event.newValue = (superSecret.value = node[propertyName] || null);\n              if (event.prevValue == null) {\n                event[ADDITION] = event.attrChange = 0;\n              } else {\n                event[MODIFICATION] = event.attrChange = 1;\n              }\n              dispatchEvent.call(node, event);\n            }\n          }\n        ;\n        descriptor.value = function (type, handler, capture) {\n          if (\n            type === DOM_ATTR_MODIFIED &&\n            this[ATTRIBUTE_CHANGED_CALLBACK] &&\n            this.setAttribute !== patchedSetAttribute\n          ) {\n            this[EXPANDO_UID] = {\n              className: {\n                name: 'class',\n                value: this.className\n              }\n            };\n            this.setAttribute = patchedSetAttribute;\n            this.removeAttribute = patchedRemoveAttribute;\n            addEventListener.call(this, 'propertychange', onPropertyChange);\n          }\n          addEventListener.call(this, type, handler, capture);\n        };\n        defineProperty(HTMLElementPrototype, ADD_EVENT_LISTENER, descriptor);\n      }());\n    } else if (!MutationObserver) {\n      documentElement[ADD_EVENT_LISTENER](DOM_ATTR_MODIFIED, DOMAttrModified);\n      documentElement.setAttribute(EXPANDO_UID, 1);\n      documentElement.removeAttribute(EXPANDO_UID);\n      if (doesNotSupportDOMAttrModified) {\n        onSubtreeModified = function (e) {\n          var\n            node = this,\n            oldAttributes,\n            newAttributes,\n            key\n          ;\n          if (node === e.target) {\n            oldAttributes = node[EXPANDO_UID];\n            node[EXPANDO_UID] = (newAttributes = getAttributesMirror(node));\n            for (key in newAttributes) {\n              if (!(key in oldAttributes)) {\n                // attribute was added\n                return callDOMAttrModified(\n                  0,\n                  node,\n                  key,\n                  oldAttributes[key],\n                  newAttributes[key],\n                  ADDITION\n                );\n              } else if (newAttributes[key] !== oldAttributes[key]) {\n                // attribute was changed\n                return callDOMAttrModified(\n                  1,\n                  node,\n                  key,\n                  oldAttributes[key],\n                  newAttributes[key],\n                  MODIFICATION\n                );\n              }\n            }\n            // checking if it has been removed\n            for (key in oldAttributes) {\n              if (!(key in newAttributes)) {\n                // attribute removed\n                return callDOMAttrModified(\n                  2,\n                  node,\n                  key,\n                  oldAttributes[key],\n                  newAttributes[key],\n                  REMOVAL\n                );\n              }\n            }\n          }\n        };\n        callDOMAttrModified = function (\n          attrChange,\n          currentTarget,\n          attrName,\n          prevValue,\n          newValue,\n          action\n        ) {\n          var e = {\n            attrChange: attrChange,\n            currentTarget: currentTarget,\n            attrName: attrName,\n            prevValue: prevValue,\n            newValue: newValue\n          };\n          e[action] = attrChange;\n          onDOMAttrModified(e);\n        };\n        getAttributesMirror = function (node) {\n          for (var\n            attr, name,\n            result = {},\n            attributes = node.attributes,\n            i = 0, length = attributes.length;\n            i < length; i++\n          ) {\n            attr = attributes[i];\n            name = attr.name;\n            if (name !== 'setAttribute') {\n              result[name] = attr.value;\n            }\n          }\n          return result;\n        };\n      }\n    }\n  \n    // set as enumerable, writable and configurable\n    document[REGISTER_ELEMENT] = function registerElement(type, options) {\n      upperType = type.toUpperCase();\n      if (setListener) {\n        // only first time document.registerElement is used\n        // we need to set this listener\n        // setting it by default might slow down for no reason\n        setListener = false;\n        if (MutationObserver) {\n          observer = (function(attached, detached){\n            function checkEmAll(list, callback) {\n              for (var i = 0, length = list.length; i < length; callback(list[i++])){}\n            }\n            return new MutationObserver(function (records) {\n              for (var\n                current, node, newValue,\n                i = 0, length = records.length; i < length; i++\n              ) {\n                current = records[i];\n                if (current.type === 'childList') {\n                  checkEmAll(current.addedNodes, attached);\n                  checkEmAll(current.removedNodes, detached);\n                } else {\n                  node = current.target;\n                  if (notFromInnerHTMLHelper &&\n                      node[ATTRIBUTE_CHANGED_CALLBACK] &&\n                      current.attributeName !== 'style') {\n                    newValue = getAttribute.call(node, current.attributeName);\n                    if (newValue !== current.oldValue) {\n                      node[ATTRIBUTE_CHANGED_CALLBACK](\n                        current.attributeName,\n                        current.oldValue,\n                        newValue\n                      );\n                    }\n                  }\n                }\n              }\n            });\n          }(executeAction(ATTACHED), executeAction(DETACHED)));\n          observe = function (node) {\n            observer.observe(\n              node,\n              {\n                childList: true,\n                subtree: true\n              }\n            );\n            return node;\n          };\n          observe(document);\n          if (attachShadow) {\n            HTMLElementPrototype.attachShadow = function () {\n              return observe(attachShadow.apply(this, arguments));\n            };\n          }\n        } else {\n          asapQueue = [];\n          document[ADD_EVENT_LISTENER]('DOMNodeInserted', onDOMNode(ATTACHED));\n          document[ADD_EVENT_LISTENER]('DOMNodeRemoved', onDOMNode(DETACHED));\n        }\n  \n        document[ADD_EVENT_LISTENER](DOM_CONTENT_LOADED, onReadyStateChange);\n        document[ADD_EVENT_LISTENER]('readystatechange', onReadyStateChange);\n  \n        HTMLElementPrototype.cloneNode = function (deep) {\n          var\n            node = cloneNode.call(this, !!deep),\n            i = getTypeIndex(node)\n          ;\n          if (-1 < i) patch(node, protos[i]);\n          if (deep && query.length) loopAndSetup(node.querySelectorAll(query));\n          return node;\n        };\n      }\n  \n      if (justSetup) return (justSetup = false);\n  \n      if (-2 < (\n        indexOf.call(types, PREFIX_IS + upperType) +\n        indexOf.call(types, PREFIX_TAG + upperType)\n      )) {\n        throwTypeError(type);\n      }\n  \n      if (!validName.test(upperType) || -1 < indexOf.call(invalidNames, upperType)) {\n        throw new Error('The type ' + type + ' is invalid');\n      }\n  \n      var\n        constructor = function () {\n          return extending ?\n            document.createElement(nodeName, upperType) :\n            document.createElement(nodeName);\n        },\n        opt = options || OP,\n        extending = hOP.call(opt, EXTENDS),\n        nodeName = extending ? options[EXTENDS].toUpperCase() : upperType,\n        upperType,\n        i\n      ;\n  \n      if (extending && -1 < (\n        indexOf.call(types, PREFIX_TAG + nodeName)\n      )) {\n        throwTypeError(nodeName);\n      }\n  \n      i = types.push((extending ? PREFIX_IS : PREFIX_TAG) + upperType) - 1;\n  \n      query = query.concat(\n        query.length ? ',' : '',\n        extending ? nodeName + '[is=\"' + type.toLowerCase() + '\"]' : nodeName\n      );\n  \n      constructor.prototype = (\n        protos[i] = hOP.call(opt, 'prototype') ?\n          opt.prototype :\n          create(HTMLElementPrototype)\n      );\n  \n      if (query.length) loopAndVerify(\n        document.querySelectorAll(query),\n        ATTACHED\n      );\n  \n      return constructor;\n    };\n  \n    document.createElement = (patchedCreateElement = function (localName, typeExtension) {\n      var\n        is = getIs(typeExtension),\n        node = is ?\n          createElement.call(document, localName, secondArgument(is)) :\n          createElement.call(document, localName),\n        name = '' + localName,\n        i = indexOf.call(\n          types,\n          (is ? PREFIX_IS : PREFIX_TAG) +\n          (is || name).toUpperCase()\n        ),\n        setup = -1 < i\n      ;\n      if (is) {\n        node.setAttribute('is', is = is.toLowerCase());\n        if (setup) {\n          setup = isInQSA(name.toUpperCase(), is);\n        }\n      }\n      notFromInnerHTMLHelper = !document.createElement.innerHTMLHelper;\n      if (setup) patch(node, protos[i]);\n      return node;\n    });\n  \n  }\n  \n  function ASAP() {\n    var queue = asapQueue.splice(0, asapQueue.length);\n    asapTimer = 0;\n    while (queue.length) {\n      queue.shift().call(\n        null, queue.shift()\n      );\n    }\n  }\n  \n  function loopAndVerify(list, action) {\n    for (var i = 0, length = list.length; i < length; i++) {\n      verifyAndSetupAndAction(list[i], action);\n    }\n  }\n  \n  function loopAndSetup(list) {\n    for (var i = 0, length = list.length, node; i < length; i++) {\n      node = list[i];\n      patch(node, protos[getTypeIndex(node)]);\n    }\n  }\n  \n  function executeAction(action) {\n    return function (node) {\n      if (isValidNode(node)) {\n        verifyAndSetupAndAction(node, action);\n        if (query.length) loopAndVerify(\n          node.querySelectorAll(query),\n          action\n        );\n      }\n    };\n  }\n  \n  function getTypeIndex(target) {\n    var\n      is = getAttribute.call(target, 'is'),\n      nodeName = target.nodeName.toUpperCase(),\n      i = indexOf.call(\n        types,\n        is ?\n            PREFIX_IS + is.toUpperCase() :\n            PREFIX_TAG + nodeName\n      )\n    ;\n    return is && -1 < i && !isInQSA(nodeName, is) ? -1 : i;\n  }\n  \n  function isInQSA(name, type) {\n    return -1 < query.indexOf(name + '[is=\"' + type + '\"]');\n  }\n  \n  function onDOMAttrModified(e) {\n    var\n      node = e.currentTarget,\n      attrChange = e.attrChange,\n      attrName = e.attrName,\n      target = e.target,\n      addition = e[ADDITION] || 2,\n      removal = e[REMOVAL] || 3\n    ;\n    if (notFromInnerHTMLHelper &&\n        (!target || target === node) &&\n        node[ATTRIBUTE_CHANGED_CALLBACK] &&\n        attrName !== 'style' && (\n          e.prevValue !== e.newValue ||\n          // IE9, IE10, and Opera 12 gotcha\n          e.newValue === '' && (\n            attrChange === addition ||\n            attrChange === removal\n          )\n    )) {\n      node[ATTRIBUTE_CHANGED_CALLBACK](\n        attrName,\n        attrChange === addition ? null : e.prevValue,\n        attrChange === removal ? null : e.newValue\n      );\n    }\n  }\n  \n  function onDOMNode(action) {\n    var executor = executeAction(action);\n    return function (e) {\n      asapQueue.push(executor, e.target);\n      if (asapTimer) clearTimeout(asapTimer);\n      asapTimer = setTimeout(ASAP, 1);\n    };\n  }\n  \n  function onReadyStateChange(e) {\n    if (dropDomContentLoaded) {\n      dropDomContentLoaded = false;\n      e.currentTarget.removeEventListener(DOM_CONTENT_LOADED, onReadyStateChange);\n    }\n    if (query.length) loopAndVerify(\n      (e.target || document).querySelectorAll(query),\n      e.detail === DETACHED ? DETACHED : ATTACHED\n    );\n    if (IE8) purge();\n  }\n  \n  function patchedSetAttribute(name, value) {\n    // jshint validthis:true\n    var self = this;\n    setAttribute.call(self, name, value);\n    onSubtreeModified.call(self, {target: self});\n  }\n  \n  function setupNode(node, proto) {\n    setPrototype(node, proto);\n    if (observer) {\n      observer.observe(node, attributesObserver);\n    } else {\n      if (doesNotSupportDOMAttrModified) {\n        node.setAttribute = patchedSetAttribute;\n        node[EXPANDO_UID] = getAttributesMirror(node);\n        node[ADD_EVENT_LISTENER](DOM_SUBTREE_MODIFIED, onSubtreeModified);\n      }\n      node[ADD_EVENT_LISTENER](DOM_ATTR_MODIFIED, onDOMAttrModified);\n    }\n    if (node[CREATED_CALLBACK] && notFromInnerHTMLHelper) {\n      node.created = true;\n      node[CREATED_CALLBACK]();\n      node.created = false;\n    }\n  }\n  \n  function purge() {\n    for (var\n      node,\n      i = 0,\n      length = targets.length;\n      i < length; i++\n    ) {\n      node = targets[i];\n      if (!documentElement.contains(node)) {\n        length--;\n        targets.splice(i--, 1);\n        verifyAndSetupAndAction(node, DETACHED);\n      }\n    }\n  }\n  \n  function throwTypeError(type) {\n    throw new Error('A ' + type + ' type is already registered');\n  }\n  \n  function verifyAndSetupAndAction(node, action) {\n    var\n      fn,\n      i = getTypeIndex(node)\n    ;\n    if (-1 < i) {\n      patchIfNotAlready(node, protos[i]);\n      i = 0;\n      if (action === ATTACHED && !node[ATTACHED]) {\n        node[DETACHED] = false;\n        node[ATTACHED] = true;\n        i = 1;\n        if (IE8 && indexOf.call(targets, node) < 0) {\n          targets.push(node);\n        }\n      } else if (action === DETACHED && !node[DETACHED]) {\n        node[ATTACHED] = false;\n        node[DETACHED] = true;\n        i = 1;\n      }\n      if (i && (fn = node[action + CALLBACK])) fn.call(node);\n    }\n  }\n  \n  \n  \n  // V1 in da House!\n  function CustomElementRegistry() {}\n  \n  CustomElementRegistry.prototype = {\n    constructor: CustomElementRegistry,\n    // a workaround for the stubborn WebKit\n    define: usableCustomElements ?\n      function (name, Class, options) {\n        if (options) {\n          CERDefine(name, Class, options);\n        } else {\n          var NAME = name.toUpperCase();\n          constructors[NAME] = {\n            constructor: Class,\n            create: [NAME]\n          };\n          nodeNames.set(Class, NAME);\n          customElements.define(name, Class);\n        }\n      } :\n      CERDefine,\n    get: usableCustomElements ?\n      function (name) {\n        return customElements.get(name) || get(name);\n      } :\n      get,\n    whenDefined: usableCustomElements ?\n      function (name) {\n        return Promise.race([\n          customElements.whenDefined(name),\n          whenDefined(name)\n        ]);\n      } :\n      whenDefined\n  };\n  \n  function CERDefine(name, Class, options) {\n    var\n      is = options && options[EXTENDS] || '',\n      CProto = Class.prototype,\n      proto = create(CProto),\n      attributes = Class.observedAttributes || empty,\n      definition = {prototype: proto}\n    ;\n    // TODO: is this needed at all since it's inherited?\n    // defineProperty(proto, 'constructor', {value: Class});\n    safeProperty(proto, CREATED_CALLBACK, {\n        value: function () {\n          if (justCreated) justCreated = false;\n          else if (!this[DRECEV1]) {\n            this[DRECEV1] = true;\n            new Class(this);\n            if (CProto[CREATED_CALLBACK])\n              CProto[CREATED_CALLBACK].call(this);\n            var info = constructors[nodeNames.get(Class)];\n            if (!usableCustomElements || info.create.length > 1) {\n              notifyAttributes(this);\n            }\n          }\n      }\n    });\n    safeProperty(proto, ATTRIBUTE_CHANGED_CALLBACK, {\n      value: function (name) {\n        if (-1 < indexOf.call(attributes, name))\n          CProto[ATTRIBUTE_CHANGED_CALLBACK].apply(this, arguments);\n      }\n    });\n    if (CProto[CONNECTED_CALLBACK]) {\n      safeProperty(proto, ATTACHED_CALLBACK, {\n        value: CProto[CONNECTED_CALLBACK]\n      });\n    }\n    if (CProto[DISCONNECTED_CALLBACK]) {\n      safeProperty(proto, DETACHED_CALLBACK, {\n        value: CProto[DISCONNECTED_CALLBACK]\n      });\n    }\n    if (is) definition[EXTENDS] = is;\n    name = name.toUpperCase();\n    constructors[name] = {\n      constructor: Class,\n      create: is ? [is, secondArgument(name)] : [name]\n    };\n    nodeNames.set(Class, name);\n    document[REGISTER_ELEMENT](name.toLowerCase(), definition);\n    whenDefined(name);\n    waitingList[name].r();\n  }\n  \n  function get(name) {\n    var info = constructors[name.toUpperCase()];\n    return info && info.constructor;\n  }\n  \n  function getIs(options) {\n    return typeof options === 'string' ?\n        options : (options && options.is || '');\n  }\n  \n  function notifyAttributes(self) {\n    var\n      callback = self[ATTRIBUTE_CHANGED_CALLBACK],\n      attributes = callback ? self.attributes : empty,\n      i = attributes.length,\n      attribute\n    ;\n    while (i--) {\n      attribute =  attributes[i]; // || attributes.item(i);\n      callback.call(\n        self,\n        attribute.name || attribute.nodeName,\n        null,\n        attribute.value || attribute.nodeValue\n      );\n    }\n  }\n  \n  function whenDefined(name) {\n    name = name.toUpperCase();\n    if (!(name in waitingList)) {\n      waitingList[name] = {};\n      waitingList[name].p = new Promise(function (resolve) {\n        waitingList[name].r = resolve;\n      });\n    }\n    return waitingList[name].p;\n  }\n  \n  function polyfillV1() {\n    if (customElements) delete window.customElements;\n    defineProperty(window, 'customElements', {\n      configurable: true,\n      value: new CustomElementRegistry()\n    });\n    defineProperty(window, 'CustomElementRegistry', {\n      configurable: true,\n      value: CustomElementRegistry\n    });\n    for (var\n      patchClass = function (name) {\n        var Class = window[name];\n        if (Class) {\n          window[name] = function CustomElementsV1(self) {\n            var info, isNative;\n            if (!self) self = this;\n            if (!self[DRECEV1]) {\n              justCreated = true;\n              info = constructors[nodeNames.get(self.constructor)];\n              isNative = usableCustomElements && info.create.length === 1;\n              self = isNative ?\n                Reflect.construct(Class, empty, info.constructor) :\n                document.createElement.apply(document, info.create);\n              self[DRECEV1] = true;\n              justCreated = false;\n              if (!isNative) notifyAttributes(self);\n            }\n            return self;\n          };\n          window[name].prototype = Class.prototype;\n          try {\n            Class.prototype.constructor = window[name];\n          } catch(WebKit) {\n            fixGetClass = true;\n            defineProperty(Class, DRECEV1, {value: window[name]});\n          }\n        }\n      },\n      Classes = htmlClass.get(/^HTML[A-Z]*[a-z]/),\n      i = Classes.length;\n      i--;\n      patchClass(Classes[i])\n    ) {}\n    (document.createElement = function (name, options) {\n      var is = getIs(options);\n      return is ?\n        patchedCreateElement.call(this, name, secondArgument(is)) :\n        patchedCreateElement.call(this, name);\n    });\n    if (!V0) {\n      justSetup = true;\n      document[REGISTER_ELEMENT]('');\n    }\n  }\n  \n  // if customElements is not there at all\n  if (!customElements || polyfill === 'force') polyfillV1();\n  else {\n    // if available test extends work as expected\n    try {\n      (function (DRE, options, name) {\n        options[EXTENDS] = 'a';\n        DRE.prototype = create(HTMLAnchorElement.prototype);\n        DRE.prototype.constructor = DRE;\n        window.customElements.define(name, DRE, options);\n        if (\n          getAttribute.call(document.createElement('a', {is: name}), 'is') !== name ||\n          (usableCustomElements && getAttribute.call(new DRE(), 'is') !== name)\n        ) {\n          throw options;\n        }\n      }(\n        function DRE() {\n          return Reflect.construct(HTMLAnchorElement, [], DRE);\n        },\n        {},\n        'document-register-element-a'\n      ));\n    } catch(o_O) {\n      // or force the polyfill if not\n      // and keep internal original reference\n      polyfillV1();\n    }\n  }\n  \n  try {\n    createElement.call(document, 'a', 'a');\n  } catch(FireFox) {\n    secondArgument = function (is) {\n      return {is: is.toLowerCase()};\n    };\n  }\n  \n}\n\nexports.installCustomElements = installCustomElements;\n\n","'use strict';\n\n/**\n * Constructs a ES6/Promises A+ Promise instance.\n *\n * @constructor\n * @param {function(function(*=), function (*=))} resolver\n */\nfunction Promise(resolver) {\n  if (!(this instanceof Promise)) {\n    throw new TypeError('Constructor Promise requires `new`');\n  }\n  if (!isFunction(resolver)) {\n    throw new TypeError('Must pass resolver function');\n  }\n\n  /**\n   * @type {function(this:Promise,*=,function(*=),function(*=),Deferred):!Promise}\n   * @private\n   */\n  this._state = PendingPromise;\n\n  /**\n   * @type {*}\n   * @private\n   */\n  this._value = [];\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this._isChainEnd = true;\n\n  doResolve(\n    this,\n    adopter(this, FulfilledPromise),\n    adopter(this, RejectedPromise),\n    { then: resolver }\n  );\n}\n\n/****************************\n  Public Instance Methods\n ****************************/\n\n/**\n * Creates a new promise instance that will receive the result of this promise\n * as inputs to the onFulfilled or onRejected callbacks.\n *\n * @param {function(*)} onFulfilled\n * @param {function(*)} onRejected\n */\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  onFulfilled = isFunction(onFulfilled) ? onFulfilled : void 0;\n  onRejected = isFunction(onRejected) ? onRejected : void 0;\n\n  if (onFulfilled || onRejected) {\n    this._isChainEnd = false;\n  }\n\n  return this._state(\n    this._value,\n    onFulfilled,\n    onRejected\n  );\n};\n\n/**\n * Creates a new promise that will handle the rejected state of this promise.\n *\n * @param {function(*)} onRejected\n * @returns {!Promise}\n */\nPromise.prototype.catch = function(onRejected) {\n  return this.then(void 0, onRejected);\n};\n\n/****************************\n  Public Static Methods\n ****************************/\n\n/**\n * Creates a fulfilled Promise of value. If value is itself a then-able,\n * resolves with the then-able's value.\n *\n * @this {!Promise}\n * @param {*=} value\n * @returns {!Promise}\n */\nPromise.resolve = function(value) {\n  var Constructor = this;\n  var promise;\n\n  if (isObject(value) && value instanceof this) {\n    promise = value;\n  } else {\n    promise = new Constructor(function(resolve) {\n      resolve(value);\n    });\n  }\n\n  return /** @type {!Promise} */(promise);\n};\n\n/**\n * Creates a rejected Promise of reason.\n *\n * @this {!Promise}\n * @param {*=} reason\n * @returns {!Promise}\n */\nPromise.reject = function(reason) {\n  var Constructor = this;\n  var promise = new Constructor(function(_, reject) {\n    reject(reason);\n  });\n\n  return /** @type {!Promise} */(promise);\n};\n\n/**\n * Creates a Promise that will resolve with an array of the values of the\n * passed in promises. If any promise rejects, the returned promise will\n * reject.\n *\n * @this {!Promise}\n * @param {!Array<Promise|*>} promises\n * @returns {!Promise}\n */\nPromise.all = function(promises) {\n  var Constructor = this;\n  var promise = new Constructor(function(resolve, reject) {\n    var length = promises.length;\n    var values = new Array(length);\n\n    if (length === 0) {\n      return resolve(values);\n    }\n\n    each(promises, function(promise, index) {\n      Constructor.resolve(promise).then(function(value) {\n        values[index] = value;\n        if (--length === 0) {\n          resolve(values);\n        }\n      }, reject);\n    });\n  });\n\n  return /** @type {!Promise} */(promise);\n};\n\n/**\n * Creates a Promise that will resolve or reject based on the first\n * resolved or rejected promise.\n *\n * @this {!Promise}\n * @param {!Array<Promise|*>} promises\n * @returns {!Promise}\n */\nPromise.race = function(promises) {\n  var Constructor = this;\n  var promise = new Constructor(function(resolve, reject) {\n    for (var i = 0; i < promises.length; i++) {\n      Constructor.resolve(promises[i]).then(resolve, reject);\n    }\n  });\n\n  return /** @type {!Promise} */(promise);\n};\n\nvar onPossiblyUnhandledRejection = function(reason, promise) {\n  throw reason;\n};\n\n/**\n * An internal use static function.\n */\nPromise._overrideUnhandledExceptionHandler = function(handler) {\n  onPossiblyUnhandledRejection = handler;\n};\n\n/****************************\n  Private functions\n ****************************/\n\n/**\n * The Fulfilled Promise state. Calls onFulfilled with the resolved value of\n * this promise, creating a new promise.\n *\n * If there is no onFulfilled, returns the current promise to avoid an promise\n * instance.\n *\n * @this {!Promise} The current promise\n * @param {*=} value The current promise's resolved value.\n * @param {function(*=)=} onFulfilled\n * @param {function(*=)=} unused\n * @param {Deferred} deferred A deferred object that holds a promise and its\n *     resolve and reject functions. It IS NOT passed when called from\n *     Promise#then to save an object instance (since we may return the current\n *     promise). It IS passed in when adopting the Fulfilled state from the\n *     Pending state.\n * @returns {!Promise}\n */\nfunction FulfilledPromise(value, onFulfilled, unused, deferred) {\n  if (!onFulfilled) {\n    deferredAdopt(deferred, FulfilledPromise, value);\n    return this;\n  }\n  if (!deferred) {\n    deferred = new Deferred(this.constructor);\n  }\n  defer(tryCatchDeferred(deferred, onFulfilled, value));\n  return deferred.promise;\n}\n\n/**\n * The Rejected Promise state. Calls onRejected with the resolved value of\n * this promise, creating a new promise.\n *\n * If there is no onRejected, returns the current promise to avoid an promise\n * instance.\n *\n * @this {!Promise} The current promise\n * @param {*=} reason The current promise's rejection reason.\n * @param {function(*=)=} unused\n * @param {function(*=)=} onRejected\n * @param {Deferred} deferred A deferred object that holds a promise and its\n *     resolve and reject functions. It IS NOT passed when called from\n *     Promise#then to save an object instance (since we may return the current\n *     promise). It IS passed in when adopting the Rejected state from the\n *     Pending state.\n * @returns {!Promise}\n */\nfunction RejectedPromise(reason, unused, onRejected, deferred) {\n  if (!onRejected) {\n    deferredAdopt(deferred, RejectedPromise, reason);\n    return this;\n  }\n  if (!deferred) {\n    deferred = new Deferred(this.constructor);\n  }\n  defer(tryCatchDeferred(deferred, onRejected, reason));\n  return deferred.promise;\n}\n\n/**\n * The Pending Promise state. Eventually calls onFulfilled once the promise has\n * resolved, or onRejected once the promise rejects.\n *\n * If there is no onFulfilled and no onRejected, returns the current promise to\n * avoid an promise instance.\n *\n * @this {!Promise} The current promise\n * @param {*=} queue The current promise's pending promises queue.\n * @param {function(*=)=} onFulfilled\n * @param {function(*=)=} onRejected\n * @param {Deferred} deferred A deferred object that holds a promise and its\n *     resolve and reject functions. It IS NOT passed when called from\n *     Promise#then to save an object instance (since we may return the current\n *     promise). It IS passed in when adopting the Pending state from the\n *     Pending state of another promise.\n * @returns {!Promise}\n */\nfunction PendingPromise(queue, onFulfilled, onRejected, deferred) {\n  if (!deferred) {\n    if (!onFulfilled && !onRejected) { return this; }\n    deferred = new Deferred(this.constructor);\n  }\n  queue.push({\n    deferred: deferred,\n    onFulfilled: onFulfilled || deferred.resolve,\n    onRejected: onRejected || deferred.reject\n  });\n  return deferred.promise;\n}\n\n/**\n * Constructs a deferred instance that holds a promise and its resolve and\n * reject functions.\n *\n * @constructor\n */\nfunction Deferred(Promise) {\n  var deferred = this;\n  /** @type {!Promise} */\n  this.promise = new Promise(function(resolve, reject) {\n    /** @type {function(*=)} */\n    deferred.resolve = resolve;\n\n    /** @type {function(*=)} */\n    deferred.reject = reject;\n  });\n  return deferred;\n}\n\n/**\n * Transitions the state of promise to another state. This is only ever called\n * on with a promise that is currently in the Pending state.\n *\n * @param {!Promise} promise\n * @param {function(this:Promise,*=,function(*=),function(*=),Deferred):!Promise} state\n * @param {*=} value\n */\nfunction adopt(promise, state, value, adoptee) {\n  var queue = promise._value;\n  promise._state = state;\n  promise._value = value;\n\n  if (adoptee && state === PendingPromise) {\n    adoptee._state(value, void 0, void 0, {\n      promise: promise,\n      resolve: void 0,\n      reject: void 0\n    });\n  }\n\n  for (var i = 0; i < queue.length; i++) {\n    var next = queue[i];\n    promise._state(\n      value,\n      next.onFulfilled,\n      next.onRejected,\n      next.deferred\n    );\n  }\n  queue.length = 0;\n\n  // Determine if this rejected promise will be \"handled\".\n  if (state === RejectedPromise && promise._isChainEnd) {\n    setTimeout(function() {\n      if (promise._isChainEnd) {\n        onPossiblyUnhandledRejection(value, promise);\n      }\n    }, 0);\n  }\n}\n\n/**\n * A partial application of adopt.\n *\n * @param {!Promise} promise\n * @param {function(this:Promise,*=,function(*=),function(*=),Deferred):!Promise} state\n * @returns {function(*=)}\n */\nfunction adopter(promise, state) {\n  return function(value) {\n    adopt(promise, state, value);\n  };\n}\n\n/**\n * Updates a deferred promises state. Necessary for updating an adopting\n * promise's state when the adoptee resolves.\n *\n * @param {?Deferred} deferred\n * @param {function(this:Promise,*=,function(*=),function(*=),Deferred):!Promise} state\n * @param {*=} value\n */\nfunction deferredAdopt(deferred, state, value) {\n  if (deferred) {\n    var promise = deferred.promise;\n    promise._state = state;\n    promise._value = value;\n  }\n}\n\n/**\n * A no-op function to prevent double resolving.\n */\nfunction noop() {}\n\n/**\n * Tests if fn is a Function\n *\n * @param {*} fn\n * @returns {boolean}\n */\nfunction isFunction(fn) {\n  return typeof fn === 'function';\n}\n\n/**\n * Tests if fn is an Object\n *\n * @param {*} obj\n * @returns {boolean}\n */\nfunction isObject(obj) {\n  return obj === Object(obj);\n}\n\n/**\n * Iterates over each element of an array, calling the iterator with the\n * element and its index.\n *\n * @param {!Array} collection\n * @param {function(*=,number)} iterator\n */\nfunction each(collection, iterator) {\n  for (var i = 0; i < collection.length; i++) {\n    iterator(collection[i], i);\n  }\n}\n\n/**\n * Creates a function that will attempt to resolve the deferred with the return\n * of fn. If any error is raised, rejects instead.\n *\n * @param {!Deferred} deferred\n * @param {function(*=)} fn\n * @param {*} arg\n * @returns {function()}\n */\nfunction tryCatchDeferred(deferred, fn, arg) {\n  var promise = deferred.promise;\n  var resolve = deferred.resolve;\n  var reject = deferred.reject;\n  return function() {\n    try {\n      var result = fn(arg);\n      doResolve(promise, resolve, reject, result, result);\n    } catch (e) {\n      reject(e);\n    }\n  };\n}\n\n/**\n * Queues and executes multiple deferred functions on another run loop.\n */\nvar defer = (function() {\n  /**\n   * Defers fn to another run loop.\n   */\n  var scheduleFlush;\n  if (typeof window !== 'undefined' && window.postMessage) {\n    window.addEventListener('message', flush);\n    scheduleFlush = function() {\n      window.postMessage('macro-task', '*');\n    };\n  } else {\n    scheduleFlush = function() {\n      setTimeout(flush, 0);\n    };\n  }\n\n  var queue = new Array(16);\n  var length = 0;\n\n  function flush() {\n    for (var i = 0; i < length; i++) {\n      var fn = queue[i];\n      queue[i] = null;\n      fn();\n    }\n    length = 0;\n  }\n\n  /**\n   * @param {function()} fn\n   */\n  function defer(fn) {\n    if (length === 0) { scheduleFlush(); }\n    queue[length++] = fn;\n  }\n\n  return defer;\n})();\n\n/**\n * The Promise resolution procedure.\n * https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n *\n * @param {!Promise} promise\n * @param {function(*=)} resolve\n * @param {function(*=)} reject\n * @param {*} value\n * @param {*=} context\n */\nfunction doResolve(promise, resolve, reject, value, context) {\n  var _reject = reject;\n  var then;\n  var _resolve;\n  try {\n    if (value === promise) {\n      throw new TypeError('Cannot fulfill promise with itself');\n    }\n    var isObj = isObject(value);\n    if (isObj && value instanceof promise.constructor) {\n      adopt(promise, value._state, value._value, value);\n    } else if (isObj && (then = value.then) && isFunction(then)) {\n      _resolve = function(value) {\n        _resolve = _reject = noop;\n        doResolve(promise, resolve, reject, value, value);\n      };\n      _reject = function(reason) {\n        _resolve = _reject = noop;\n        reject(reason);\n      };\n      then.call(\n        context,\n        function(value) { _resolve(value); },\n        function(reason) { _reject(reason); }\n      );\n    } else {\n      resolve(value);\n    }\n  } catch (e) {\n    _reject(e);\n  }\n}\n\nmodule.exports = Promise;\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Allows for runtime configuration. Internally, the runtime should\n * use the src/config.js module for various constants. We can use the\n * AMP_CONFIG global to translate user-defined configurations to this\n * module.\n * @type {!Object<string, string>}\n */\nconst env = self.AMP_CONFIG || {};\n\nconst thirdPartyFrameRegex = typeof env['thirdPartyFrameRegex'] == 'string' ?\n  new RegExp(env['thirdPartyFrameRegex']) : env['thirdPartyFrameRegex'];\n\nconst cdnProxyRegex = typeof env['cdnProxyRegex'] == 'string' ?\n  new RegExp(env['cdnProxyRegex']) : env['cdnProxyRegex'];\n\n/** @type {!Object<string, string|boolean|RegExp>} */\nexport const urls = {\n  thirdParty: env['thirdPartyUrl'] || 'https://3p.ampproject.net',\n  thirdPartyFrameHost: env['thirdPartyFrameHost'] || 'ampproject.net',\n  thirdPartyFrameRegex: thirdPartyFrameRegex || /^d-\\d+\\.ampproject\\.net$/,\n  cdn: env['cdnUrl'] || 'https://cdn.ampproject.org',\n  /* Note that cdnProxyRegex is only ever checked against origins\n   * (proto://host[:port]) so does not need to consider path\n   */\n  cdnProxyRegex: cdnProxyRegex ||\n      /^https:\\/\\/([a-zA-Z0-9_-]+\\.)?cdn\\.ampproject\\.org$/,\n  localhostRegex: /^https?:\\/\\/localhost(:\\d+)?$/,\n  errorReporting: env['errorReportingUrl'] ||\n      'https://amp-error-reporting.appspot.com/r',\n  localDev: env['localDev'] || false,\n};\n\nexport const config = {\n  urls,\n};\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {endsWith} from './string';\nimport {\n  isProxyOrigin,\n  parseUrlDeprecated,\n  tryDecodeUriComponent,\n} from './url';\nimport {urls} from './config';\n\n\n/**\n * Returns the value of the cookie. The cookie access is restricted and must\n * go through the privacy review. Before using this method please file a\n * GitHub issue with \"Privacy Review\" label.\n *\n * Returns the cookie's value or `null`.\n *\n * @param {!Window} win\n * @param {string} name\n * @return {?string}\n */\nexport function getCookie(win, name) {\n  const cookieString = tryGetDocumentCookieNoInline(win);\n  if (!cookieString) {\n    return null;\n  }\n  const cookies = cookieString.split(';');\n  for (let i = 0; i < cookies.length; i++) {\n    const cookie = cookies[i].trim();\n    const eq = cookie.indexOf('=');\n    if (eq == -1) {\n      continue;\n    }\n    if (tryDecodeUriComponent(cookie.substring(0, eq).trim()) == name) {\n      const value = cookie.substring(eq + 1).trim();\n      return tryDecodeUriComponent(value, value);\n    }\n  }\n  return null;\n}\n\n/**\n * This method should not be inlined to prevent TryCatch deoptimization.\n * NoInline keyword at the end of function name also prevents Closure compiler\n * from inlining the function.\n * @param {!Window} win\n * @return {string}\n */\nfunction tryGetDocumentCookieNoInline(win) {\n  try {\n    return win.document.cookie;\n  } catch (e) {\n    // Act as if no cookie is available. Exceptions can be thrown when\n    // AMP docs are opened on origins that do not allow setting\n    // cookies such as null origins.\n    return '';\n  }\n}\n\n/**\n * Sets the value of the cookie. The cookie access is restricted and must\n * go through the privacy review. Before using this method please file a\n * GitHub issue with \"Privacy Review\" label.\n *\n * @param {!Window} win\n * @param {string} name\n * @param {string} value\n * @param {time} expirationTime\n * @param {{\n *   highestAvailableDomain:(boolean|undefined),\n *   domain:(string|undefined)\n * }=} opt_options\n *     - highestAvailableDomain: If true, set the cookie at the widest domain\n *       scope allowed by the browser. E.g. on example.com if we are currently\n *       on www.example.com.\n *     - domain: Explicit domain to set.\n *     - allowOnProxyOrigin: Allow setting a cookie on the AMP Cache.\n */\nexport function setCookie(win, name, value, expirationTime, opt_options) {\n  checkOriginForSettingCookie(win, opt_options, name);\n  if (opt_options && opt_options.highestAvailableDomain) {\n    const parts = win.location.hostname.split('.');\n    let domain = parts[parts.length - 1];\n    for (let i = parts.length - 2; i >= 0; i--) {\n      domain = parts[i] + '.' + domain;\n      trySetCookie(win, name, value, expirationTime, domain);\n      if (getCookie(win, name) == value) {\n        return;\n      }\n    }\n  }\n  let domain = undefined;\n  if (opt_options && opt_options.domain) {\n    domain = opt_options.domain;\n  }\n  trySetCookie(win, name, value, expirationTime, domain);\n}\n\n/**\n * Attempt to set a cookie with the given params.\n *\n * @param {!Window} win\n * @param {string} name\n * @param {string} value\n * @param {time} expirationTime\n * @param {string|undefined} domain\n */\nfunction trySetCookie(win, name, value, expirationTime, domain) {\n  // We do not allow setting cookies on the domain that contains both\n  // the cdn. and www. hosts.\n  if (domain == 'ampproject.org') {\n    // Actively delete them.\n    value = 'delete';\n    expirationTime = 0;\n  }\n  const cookie = encodeURIComponent(name) + '=' +\n      encodeURIComponent(value) +\n      '; path=/' +\n      (domain ? '; domain=' + domain : '') +\n      '; expires=' + new Date(expirationTime).toUTCString();\n  try {\n    win.document.cookie = cookie;\n  } catch (ignore) {\n    // Do not throw if setting the cookie failed Exceptions can be thrown\n    // when AMP docs are opened on origins that do not allow setting\n    // cookies such as null origins.\n  }\n}\n\n/**\n * Throws if a given cookie should not be set on the given origin.\n * This is a defense-in-depth. Callers should never run into this.\n *\n * @param {!Window} win\n * @param {!Object|undefined} options\n * @param {string} name For the error message.\n */\nfunction checkOriginForSettingCookie(win, options, name) {\n  if (options && options.allowOnProxyOrigin) {\n    return;\n  }\n  if (isProxyOrigin(win.location.href)) {\n    throw new Error('Should never attempt to set cookie on proxy origin: '\n        + name);\n  }\n\n  const current = parseUrlDeprecated(win.location.href).hostname.toLowerCase();\n  const proxy = parseUrlDeprecated(urls.cdn).hostname.toLowerCase();\n  if (current == proxy || endsWith(current, '.' + proxy)) {\n    throw new Error('Should never attempt to set cookie on proxy origin.'\n        + ' (in depth check): ' + name);\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Deferred} from './utils/promise';\nimport {cssEscape} from '../third_party/css-escape/css-escape';\nimport {dev} from './log';\nimport {dict} from './utils/object';\nimport {startsWith} from './string';\nimport {toWin} from './types';\n\nconst HTML_ESCAPE_CHARS = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#x27;',\n  '`': '&#x60;',\n};\nconst HTML_ESCAPE_REGEX = /(&|<|>|\"|'|`)/g;\n\n/** @const {string} */\nexport const UPGRADE_TO_CUSTOMELEMENT_PROMISE =\n    '__AMP_UPG_PRM';\n\n/** @const {string} */\nexport const UPGRADE_TO_CUSTOMELEMENT_RESOLVER =\n    '__AMP_UPG_RES';\n\n/**\n * Waits until the child element is constructed. Once the child is found, the\n * callback is executed.\n * @param {!Element} parent\n * @param {function(!Element):boolean} checkFunc\n * @param {function()} callback\n */\nexport function waitForChild(parent, checkFunc, callback) {\n  if (checkFunc(parent)) {\n    callback();\n    return;\n  }\n  /** @const {!Window} */\n  const win = toWin(parent.ownerDocument.defaultView);\n  if (win.MutationObserver) {\n    /** @const {MutationObserver} */\n    const observer = new win.MutationObserver(() => {\n      if (checkFunc(parent)) {\n        observer.disconnect();\n        callback();\n      }\n    });\n    observer.observe(parent, {childList: true});\n  } else {\n    /** @const {number} */\n    const interval = win.setInterval(() => {\n      if (checkFunc(parent)) {\n        win.clearInterval(interval);\n        callback();\n      }\n    }, /* milliseconds */ 5);\n  }\n}\n\n/**\n * Waits until the child element is constructed. Once the child is found, the\n * promise is resolved.\n * @param {!Element} parent\n * @param {function(!Element):boolean} checkFunc\n * @return {!Promise}\n */\nexport function waitForChildPromise(parent, checkFunc) {\n  return new Promise(resolve => {\n    waitForChild(parent, checkFunc, resolve);\n  });\n}\n\n/**\n * Waits for document's body to be available.\n * Will be deprecated soon; use {@link AmpDoc#whenBodyAvailable} or\n * @{link DocumentState#onBodyAvailable} instead.\n * @param {!Document} doc\n * @param {function()} callback\n */\nexport function waitForBody(doc, callback) {\n  waitForChild(doc.documentElement, () => !!doc.body, callback);\n}\n\n\n/**\n * Waits for document's body to be available.\n * @param {!Document} doc\n * @return {!Promise}\n */\nexport function waitForBodyPromise(doc) {\n  return new Promise(resolve => {\n    waitForBody(doc, resolve);\n  });\n}\n\n\n/**\n * Removes the element.\n * @param {!Element} element\n */\nexport function removeElement(element) {\n  if (element.parentElement) {\n    element.parentElement.removeChild(element);\n  }\n}\n\n\n/**\n * Removes all child nodes of the specified element.\n * @param {!Element} parent\n */\nexport function removeChildren(parent) {\n  while (parent.firstChild) {\n    parent.removeChild(parent.firstChild);\n  }\n}\n\n\n/**\n * Copies all children nodes of element \"from\" to element \"to\". Child nodes\n * are deeply cloned. Notice, that this method should be used with care and\n * preferably on smaller subtrees.\n * @param {!Element} from\n * @param {!Element|!DocumentFragment} to\n */\nexport function copyChildren(from, to) {\n  const frag = to.ownerDocument.createDocumentFragment();\n  for (let n = from.firstChild; n; n = n.nextSibling) {\n    frag.appendChild(n.cloneNode(true));\n  }\n  to.appendChild(frag);\n}\n\n/**\n * Insert the element in the root after the element named after or\n * if that is null at the beginning.\n * @param {!Element|!ShadowRoot} root\n * @param {!Element} element\n * @param {?Node} after\n */\nexport function insertAfterOrAtStart(root, element, after) {\n  const before = after ? after.nextSibling : root.firstChild;\n  root.insertBefore(element, before);\n}\n\n/**\n * Add attributes to an element.\n * @param {!Element} element\n * @param {!JsonObject<string, string>} attributes\n * @return {!Element} created element\n */\nexport function addAttributesToElement(element, attributes) {\n  for (const attr in attributes) {\n    element.setAttribute(attr, attributes[attr]);\n  }\n  return element;\n}\n\n/**\n * Create a new element on document with specified tagName and attributes.\n * @param {!Document} doc\n * @param {string} tagName\n * @param {!JsonObject<string, string>} attributes\n * @return {!Element} created element\n */\nexport function createElementWithAttributes(doc, tagName, attributes) {\n  const element = doc.createElement(tagName);\n  return addAttributesToElement(element, attributes);\n}\n\n/**\n * Returns true if node is connected (attached).\n * @param {!Node} node\n * @return {boolean}\n * @see https://dom.spec.whatwg.org/#connected\n */\nexport function isConnectedNode(node) {\n  const connected = node.isConnected;\n  if (connected !== undefined) {\n    return connected;\n  }\n\n  // \"An element is connected if its shadow-including root is a document.\"\n  let n = node;\n  do {\n    n = rootNodeFor(n);\n    if (n.host) {\n      n = n.host;\n    } else {\n      break;\n    }\n  } while (true);\n  return n.nodeType === Node.DOCUMENT_NODE;\n}\n\n/**\n * Returns the root for a given node. Does not cross shadow DOM boundary.\n * @param {!Node} node\n * @return {!Node}\n */\nexport function rootNodeFor(node) {\n  if (Node.prototype.getRootNode) {\n    // Type checker says `getRootNode` may return null.\n    return node.getRootNode() || node;\n  }\n  let n;\n  for (n = node; !!n.parentNode; n = n.parentNode) {}\n  return n;\n}\n\n/**\n * Finds the closest element that satisfies the callback from this element\n * up the DOM subtree.\n * @param {!Element} element\n * @param {function(!Element):boolean} callback\n * @param {Element=} opt_stopAt optional elemnt to stop the search at.\n * @return {?Element}\n */\nexport function closest(element, callback, opt_stopAt) {\n  for (let el = element; el && el !== opt_stopAt; el = el.parentElement) {\n    if (callback(el)) {\n      return el;\n    }\n  }\n  return null;\n}\n\n\n/**\n * Finds the closest node that satisfies the callback from this node\n * up the DOM subtree.\n * @param {!Node} node\n * @param {function(!Node):boolean} callback\n * @return {?Node}\n */\nexport function closestNode(node, callback) {\n  for (let n = node; n; n = n.parentNode) {\n    if (callback(n)) {\n      return n;\n    }\n  }\n  return null;\n}\n\n\n/**\n * Finds the closest element with the specified name from this element\n * up the DOM subtree.\n * @param {!Element} element\n * @param {string} tagName\n * @return {?Element}\n */\nexport function closestByTag(element, tagName) {\n  if (element.closest) {\n    return element.closest(tagName);\n  }\n  tagName = tagName.toUpperCase();\n  return closest(element, el => {\n    return el.tagName == tagName;\n  });\n}\n\n/**\n * Finds the closest element with the specified selector from this element\n * @param {!Element} element\n * @param {string} selector\n * @return {?Element} closest ancestor if found.\n */\nexport function closestBySelector(element, selector) {\n  if (element.closest) {\n    return element.closest(selector);\n  }\n\n  return closest(element, el => {\n    return matches(el, selector);\n  });\n}\n\n/**\n * Checks if the given element matches the selector\n * @param  {!Element} el The element to verify\n * @param  {string} selector The selector to check against\n * @return {boolean} True if the element matched the selector. False otherwise.\n */\nexport function matches(el, selector) {\n  const matcher = el.matches ||\n      el.webkitMatchesSelector ||\n      el.mozMatchesSelector ||\n      el.msMatchesSelector ||\n      el.oMatchesSelector;\n  if (matcher) {\n    return matcher.call(el, selector);\n  }\n  return false; // IE8 always returns false.\n}\n\n/**\n * Finds the first descendant element with the specified name.\n * @param {!Element|!Document|!ShadowRoot} element\n * @param {string} tagName\n * @return {?Element}\n */\nexport function elementByTag(element, tagName) {\n  let elements;\n  // getElementsByTagName() is not supported on ShadowRoot.\n  if (typeof element.getElementsByTagName === 'function') {\n    elements = element.getElementsByTagName(tagName);\n  } else {\n    elements = element./*OK*/querySelectorAll(tagName);\n  }\n  return (elements && elements[0]) || null;\n}\n\n\n/**\n * Finds the first child element that satisfies the callback.\n * @param {!Element} parent\n * @param {function(!Element):boolean} callback\n * @return {?Element}\n */\nexport function childElement(parent, callback) {\n  for (let child = parent.firstElementChild; child;\n    child = child.nextElementSibling) {\n    if (callback(child)) {\n      return child;\n    }\n  }\n  return null;\n}\n\n\n/**\n * Finds all child elements that satisfy the callback.\n * @param {!Element} parent\n * @param {function(!Element):boolean} callback\n * @return {!Array<!Element>}\n */\nexport function childElements(parent, callback) {\n  const children = [];\n  for (let child = parent.firstElementChild; child;\n    child = child.nextElementSibling) {\n    if (callback(child)) {\n      children.push(child);\n    }\n  }\n  return children;\n}\n\n\n/**\n * Finds the last child element that satisfies the callback.\n * @param {!Element} parent\n * @param {function(!Element):boolean} callback\n * @return {?Element}\n */\nexport function lastChildElement(parent, callback) {\n  for (let child = parent.lastElementChild; child;\n    child = child.previousElementSibling) {\n    if (callback(child)) {\n      return child;\n    }\n  }\n  return null;\n}\n\n/**\n * Finds all child nodes that satisfy the callback.\n * These nodes can include Text, Comment and other child nodes.\n * @param {!Node} parent\n * @param {function(!Node):boolean} callback\n * @return {!Array<!Node>}\n */\nexport function childNodes(parent, callback) {\n  const nodes = [];\n  for (let child = parent.firstChild; child;\n    child = child.nextSibling) {\n    if (callback(child)) {\n      nodes.push(child);\n    }\n  }\n  return nodes;\n}\n\n/**\n * @type {boolean|undefined}\n * @visibleForTesting\n */\nlet scopeSelectorSupported;\n\n/**\n * @param {boolean|undefined} val\n * @visibleForTesting\n */\nexport function setScopeSelectorSupportedForTesting(val) {\n  scopeSelectorSupported = val;\n}\n\n/**\n * Test that the :scope selector is supported and behaves correctly.\n * @param {!Element} parent\n * @return {boolean}\n */\nfunction isScopeSelectorSupported(parent) {\n  const doc = parent.ownerDocument;\n  try {\n    const testElement = doc.createElement('div');\n    const testChild = doc.createElement('div');\n    testElement.appendChild(testChild);\n    // NOTE(cvializ, #12383): Firefox's implementation is incomplete,\n    // therefore we test actual functionality of`:scope` as well.\n    return testElement./*OK*/querySelector(':scope div') === testChild;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Finds the first child element that has the specified attribute.\n * @param {!Element} parent\n * @param {string} attr\n * @return {?Element}\n */\nexport function childElementByAttr(parent, attr) {\n  return scopedQuerySelector/*OK*/(parent, `> [${attr}]`);\n}\n\n\n/**\n * Finds the last child element that has the specified attribute.\n * @param {!Element} parent\n * @param {string} attr\n * @return {?Element}\n */\nexport function lastChildElementByAttr(parent, attr) {\n  return lastChildElement(parent, el => {\n    return el.hasAttribute(attr);\n  });\n}\n\n\n/**\n * Finds all child elements that has the specified attribute.\n * @param {!Element} parent\n * @param {string} attr\n * @return {!NodeList<!Element>}\n */\nexport function childElementsByAttr(parent, attr) {\n  return scopedQuerySelectorAll/*OK*/(parent, `> [${attr}]`);\n}\n\n\n/**\n * Finds the first child element that has the specified tag name.\n * @param {!Element} parent\n * @param {string} tagName\n * @return {?Element}\n */\nexport function childElementByTag(parent, tagName) {\n  return scopedQuerySelector/*OK*/(parent, `> ${tagName}`);\n}\n\n\n/**\n * Finds all child elements with the specified tag name.\n * @param {!Element} parent\n * @param {string} tagName\n * @return {!NodeList<!Element>}\n */\nexport function childElementsByTag(parent, tagName) {\n  return scopedQuerySelectorAll/*OK*/(parent, `> ${tagName}`);\n}\n\n\n/**\n * Finds the first element that matches `selector`, scoped inside `root`.\n * Note: in IE, this causes a quick mutation of the element's class list.\n * @param {!Element} root\n * @param {string} selector\n * @return {?Element}\n */\nexport function scopedQuerySelector(root, selector) {\n  if (scopeSelectorSupported == null) {\n    scopeSelectorSupported = isScopeSelectorSupported(root);\n  }\n  if (scopeSelectorSupported) {\n    return root./*OK*/querySelector(`:scope ${selector}`);\n  }\n\n  // Only IE.\n  const unique = 'i-amphtml-scoped';\n  root.classList.add(unique);\n  const element = root./*OK*/querySelector(`.${unique} ${selector}`);\n  root.classList.remove(unique);\n  return element;\n}\n\n\n/**\n * Finds the every element that matches `selector`, scoped inside `root`.\n * Note: in IE, this causes a quick mutation of the element's class list.\n * @param {!Element} root\n * @param {string} selector\n * @return {!NodeList<!Element>}\n */\nexport function scopedQuerySelectorAll(root, selector) {\n  if (scopeSelectorSupported == null) {\n    scopeSelectorSupported = isScopeSelectorSupported(root);\n  }\n  if (scopeSelectorSupported) {\n    return root./*OK*/querySelectorAll(`:scope ${selector}`);\n  }\n\n  // Only IE.\n  const unique = 'i-amphtml-scoped';\n  root.classList.add(unique);\n  const elements = root./*OK*/querySelectorAll(`.${unique} ${selector}`);\n  root.classList.remove(unique);\n  return elements;\n}\n\n\n/**\n * Returns element data-param- attributes as url parameters key-value pairs.\n * e.g. data-param-some-attr=value -> {someAttr: value}.\n * @param {!Element} element\n * @param {function(string):string=} opt_computeParamNameFunc to compute the\n *    parameter name, get passed the camel-case parameter name.\n * @param {!RegExp=} opt_paramPattern Regex pattern to match data attributes.\n * @return {!JsonObject}\n */\nexport function getDataParamsFromAttributes(element, opt_computeParamNameFunc,\n  opt_paramPattern) {\n  const computeParamNameFunc = opt_computeParamNameFunc || (key => key);\n  const {dataset} = element;\n  const params = dict();\n  const paramPattern = opt_paramPattern ? opt_paramPattern : /^param(.+)/;\n  for (const key in dataset) {\n    const matches = key.match(paramPattern);\n    if (matches) {\n      const param = matches[1][0].toLowerCase() + matches[1].substr(1);\n      params[computeParamNameFunc(param)] = dataset[key];\n    }\n  }\n  return params;\n}\n\n/**\n * Whether the element have a next node in the document order.\n * This means either:\n *  a. The element itself has a nextSibling.\n *  b. Any of the element ancestors has a nextSibling.\n * @param {!Element} element\n * @param {?Node} opt_stopNode\n * @return {boolean}\n */\nexport function hasNextNodeInDocumentOrder(element, opt_stopNode) {\n  let currentElement = element;\n  do {\n    if (currentElement.nextSibling) {\n      return true;\n    }\n  } while ((currentElement = currentElement.parentNode) &&\n            currentElement != opt_stopNode);\n  return false;\n}\n\n\n/**\n * Finds all ancestor elements that satisfy predicate.\n * @param {!Element} child\n * @param {function(!Element):boolean} predicate\n * @return {!Array<!Element>}\n */\nexport function ancestorElements(child, predicate) {\n  const ancestors = [];\n  for (let ancestor = child.parentElement; ancestor;\n    ancestor = ancestor.parentElement) {\n    if (predicate(ancestor)) {\n      ancestors.push(ancestor);\n    }\n  }\n  return ancestors;\n}\n\n\n/**\n * Finds all ancestor elements that has the specified tag name.\n * @param {!Element} child\n * @param {string} tagName\n * @return {!Array<!Element>}\n */\nexport function ancestorElementsByTag(child, tagName) {\n  tagName = tagName.toUpperCase();\n  return ancestorElements(child, el => {\n    return el.tagName == tagName;\n  });\n}\n\n/**\n * Returns a clone of the content of a template element.\n *\n * Polyfill to replace .content access for browsers that do not support\n * HTMLTemplateElements natively.\n *\n * @param {!HTMLTemplateElement|!Element} template\n * @return {!DocumentFragment}\n */\nexport function templateContentClone(template) {\n  if ('content' in template) {\n    return template.content.cloneNode(true);\n  } else {\n    const content = template.ownerDocument.createDocumentFragment();\n    copyChildren(template, content);\n    return content;\n  }\n}\n\n/**\n * Iterate over an array-like. Some collections like NodeList are\n * lazily evaluated in some browsers, and accessing `length` forces full\n * evaluation. We can improve performance by iterating until an element is\n * `undefined` to avoid checking the `length` property.\n * Test cases: https://jsperf.com/iterating-over-collections-of-elements\n * @param {!IArrayLike<T>} iterable\n * @param {function(T, number)} cb\n * @template T\n */\nexport function iterateCursor(iterable, cb) {\n  for (let i = 0, value; (value = iterable[i]) !== undefined; i++) {\n    cb(value, i);\n  }\n}\n\n/**\n * This method wraps around window's open method. It first tries to execute\n * `open` call with the provided target and if it fails, it retries the call\n * with the `_top` target. This is necessary given that in some embedding\n * scenarios, such as iOS' WKWebView, navigation to `_blank` and other targets\n * is blocked by default.\n *\n * @param {!Window} win\n * @param {string} url\n * @param {string} target\n * @param {string=} opt_features\n * @return {?Window}\n */\nexport function openWindowDialog(win, url, target, opt_features) {\n  // Try first with the specified target. If we're inside the WKWebView or\n  // a similar environments, this method is expected to fail by default for\n  // all targets except `_top`.\n  let res;\n  try {\n    res = win.open(url, target, opt_features);\n  } catch (e) {\n    dev().error('DOM', 'Failed to open url on target: ', target, e);\n  }\n\n  // Then try with `_top` target.\n  if (!res && target != '_top') {\n    res = win.open(url, '_top');\n  }\n  return res;\n}\n\n/**\n * Whether the element is a script tag with application/json type.\n * @param {!Element} element\n * @return {boolean}\n */\nexport function isJsonScriptTag(element) {\n  return element.tagName == 'SCRIPT' &&\n            element.getAttribute('type').toUpperCase() == 'APPLICATION/JSON';\n}\n\n/**\n * Whether the element is a script tag with application/json type.\n * @param {!Element} element\n * @return {boolean}\n */\nexport function isJsonLdScriptTag(element) {\n  return element.tagName == 'SCRIPT' &&\n      element.getAttribute('type').toUpperCase() == 'APPLICATION/LD+JSON';\n}\n\n/**\n * Whether the page's direction is right to left or not.\n * @param {!Document} doc\n * @return {boolean}\n */\nexport function isRTL(doc) {\n  const dir = doc.body.getAttribute('dir')\n                 || doc.documentElement.getAttribute('dir')\n                 || 'ltr';\n  return dir == 'rtl';\n}\n\n\n/**\n * Escapes an ident (ID or a class name) to be used as a CSS selector.\n *\n * See https://drafts.csswg.org/cssom/#serialize-an-identifier.\n *\n * @param {string} ident\n * @return {string}\n */\nexport function escapeCssSelectorIdent(ident) {\n  return cssEscape(ident);\n}\n\n/**\n * Escapes an ident in a way that can be used by :nth-child() psuedo-class.\n *\n * See https://github.com/w3c/csswg-drafts/issues/2306.\n *\n * @param {string|number} ident\n * @return {string}\n */\nexport function escapeCssSelectorNth(ident) {\n  const escaped = String(ident);\n  // Ensure it doesn't close the nth-child psuedo class.\n  dev().assert(escaped.indexOf(')') === -1);\n  return escaped;\n}\n\n/**\n * Escapes `<`, `>` and other HTML charcaters with their escaped forms.\n * @param {string} text\n * @return {string}\n */\nexport function escapeHtml(text) {\n  if (!text) {\n    return text;\n  }\n  return text.replace(HTML_ESCAPE_REGEX, escapeHtmlChar);\n}\n\n/**\n * @param {string} c\n * @return {string}\n */\nfunction escapeHtmlChar(c) {\n  return HTML_ESCAPE_CHARS[c];\n}\n\n/**\n * Tries to focus on the given element; fails silently if browser throws an\n * exception.\n * @param {!Element} element\n */\nexport function tryFocus(element) {\n  try {\n    element./*OK*/focus();\n  } catch (e) {\n    // IE <= 7 may throw exceptions when focusing on hidden items.\n  }\n}\n\n/**\n * Whether the given window is in an iframe or not.\n * @param {!Window} win\n * @return {boolean}\n */\nexport function isIframed(win) {\n  return win.parent && win.parent != win;\n}\n\n/**\n * Determines if this element is an AMP element\n * @param {!Element} element\n * @return {boolean}\n */\nexport function isAmpElement(element) {\n  const tag = element.tagName;\n  // Use prefix to recognize AMP element. This is necessary because stub\n  // may not be attached yet.\n  return startsWith(tag, 'AMP-') &&\n      // Some \"amp-*\" elements are not really AMP elements. :smh:\n      !(tag == 'AMP-STICKY-AD-TOP-PADDING' || tag == 'AMP-BODY');\n}\n\n/**\n * Return a promise that resolve when an AMP element upgrade from HTMLElement\n * to CustomElement\n * @param {!Element} element\n * @return {!Promise<!Element>}\n */\nexport function whenUpgradedToCustomElement(element) {\n  dev().assert(isAmpElement(element), 'element is not AmpElement');\n  if (element.createdCallback) {\n    // Element already is CustomElement;\n    return Promise.resolve(element);\n  }\n  // If Element is still HTMLElement, wait for it to upgrade to customElement\n  // Note: use pure string to avoid obfuscation between versions.\n  if (!element[UPGRADE_TO_CUSTOMELEMENT_PROMISE]) {\n    const deferred = new Deferred();\n    element[UPGRADE_TO_CUSTOMELEMENT_PROMISE] = deferred.promise;\n    element[UPGRADE_TO_CUSTOMELEMENT_RESOLVER] = deferred.resolve;\n\n  }\n\n  return element[UPGRADE_TO_CUSTOMELEMENT_PROMISE];\n}\n\n/**\n * Replacement for `Element.requestFullscreen()` method.\n * https://developer.mozilla.org/en-US/docs/Web/API/Element/requestFullscreen\n * @param {!Element} element\n */\nexport function fullscreenEnter(element) {\n  const requestFs = element.requestFullscreen\n   || element.requestFullScreen\n   || element.webkitRequestFullscreen\n   || element.webkitRequestFullScreen\n   || element.webkitEnterFullscreen\n   || element.webkitEnterFullScreen\n   || element.msRequestFullscreen\n   || element.msRequestFullScreen\n   || element.mozRequestFullscreen\n   || element.mozRequestFullScreen;\n  if (requestFs) {\n    requestFs.call(element);\n  }\n}\n\n/**\n * Replacement for `Document.exitFullscreen()` method.\n * https://developer.mozilla.org/en-US/docs/Web/API/Document/exitFullscreen\n * @param {!Element} element\n */\nexport function fullscreenExit(element) {\n  let exitFs = element.cancelFullScreen\n               || element.exitFullscreen\n               || element.exitFullScreen\n               || element.webkitExitFullscreen\n               || element.webkitExitFullScreen\n               || element.webkitCancelFullScreen\n               || element.mozCancelFullScreen\n               || element.msExitFullscreen;\n  if (exitFs) {\n    exitFs.call(element);\n    return;\n  }\n  if (element.ownerDocument) {\n    exitFs = element.ownerDocument.cancelFullScreen\n             || element.ownerDocument.exitFullscreen\n             || element.ownerDocument.exitFullScreen\n             || element.ownerDocument.webkitExitFullscreen\n             || element.ownerDocument.webkitExitFullScreen\n             || element.ownerDocument.webkitCancelFullScreen\n             || element.ownerDocument.mozCancelFullScreen\n             || element.ownerDocument.msExitFullscreen;\n  }\n  if (exitFs) {\n    exitFs.call(element.ownerDocument);\n    return;\n  }\n}\n\n\n/**\n * Replacement for `Document.fullscreenElement`.\n * https://developer.mozilla.org/en-US/docs/Web/API/Document/fullscreenElement\n * @param {!Element} element\n * @return {boolean}\n */\nexport function isFullscreenElement(element) {\n  const isFullscreen = element.webkitDisplayingFullscreen;\n  if (isFullscreen) {\n    return true;\n  }\n  if (element.ownerDocument) {\n    const fullscreenElement = element.ownerDocument.fullscreenElement\n             || element.ownerDocument.webkitFullscreenElement\n             || element.ownerDocument.mozFullScreenElement\n             || element.webkitCurrentFullScreenElement;\n    if (fullscreenElement == element) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Returns true if node is not disabled.\n *\n * IE8 can return false positives, see {@link matches}.\n * @param {!Element} element\n * @return {boolean}\n * @see https://www.w3.org/TR/html5/forms.html#concept-fe-disabled\n */\nexport function isEnabled(element) {\n  return !(element.disabled || matches(element, ':disabled'));\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as dom from './dom';\nimport {\n  getAmpdoc,\n  getExistingServiceForDocInEmbedScope,\n  getService,\n  getServicePromise,\n  getServicePromiseForDoc,\n  getServicePromiseOrNull,\n  getServicePromiseOrNullForDoc,\n  getTopWindow,\n} from './service';\nimport {toWin} from './types';\nimport {user} from './log';\n\n/**\n * Returns a promise for a service for the given id and window. Also expects an\n * element that has the actual implementation. The promise resolves when the\n * implementation loaded. Users should typically wrap this as a special purpose\n * function (e.g. Services.viewportForDoc(...)) for type safety and because the\n * factory should not be passed around.\n * @param {!Window} win\n * @param {string} id of the service.\n * @param {string} extension Name of the custom extension that provides the\n *     implementation of this service.\n * @param {boolean=} opt_element Whether this service is provided by an element,\n *     not the extension.\n * @return {!Promise<*>}\n */\nexport function getElementService(win, id, extension, opt_element) {\n  return getElementServiceIfAvailable(win, id, extension, opt_element).then(\n      service => assertService(service, id, extension));\n}\n\n/**\n * Same as getElementService but produces null if the given element is not\n * actually available on the current page.\n * @param {!Window} win\n * @param {string} id of the service.\n * @param {string} extension Name of the custom extension that provides the\n *     implementation of this service.\n * @param {boolean=} opt_element Whether this service is provided by an\n *     element, not the extension.\n * @return {!Promise<?Object>}\n */\nexport function getElementServiceIfAvailable(win, id, extension, opt_element) {\n  const s = getServicePromiseOrNull(win, id);\n  if (s) {\n    return /** @type {!Promise<?Object>} */ (s);\n  }\n  return getElementServicePromiseOrNull(win, id, extension, opt_element);\n}\n\n/**\n * @param {!Window} win\n * @param {string} elementName Name of an extended custom element.\n * @return {boolean} Whether this element is scheduled to be loaded.\n */\nfunction isElementScheduled(win, elementName) {\n  // Set in custom-element.js\n  if (!win.ampExtendedElements) {\n    return false;\n  }\n  return !!win.ampExtendedElements[elementName];\n}\n\n\n/**\n * Returns a promise for a service for the given id and window. Also expects an\n * element that has the actual implementation. The promise resolves when the\n * implementation loaded. Users should typically wrap this as a special purpose\n * function (e.g. Services.viewportForDoc(...)) for type safety and because the\n * factory should not be passed around.\n * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n * @param {string} id of the service.\n * @param {string} extension Name of the custom extension that provides the\n *     implementation of this service.\n * @param {boolean=} opt_element Whether this service is provided by an element,\n *     not the extension.\n * @return {!Promise<*>}\n */\nexport function getElementServiceForDoc(elementOrAmpDoc, id, extension,\n  opt_element) {\n  return getElementServiceIfAvailableForDoc(\n      elementOrAmpDoc, id, extension, opt_element)\n      .then(service => assertService(service, id, extension));\n}\n\n/**\n * Same as getElementService but produces null if the given element is not\n * actually available on the current page.\n * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n * @param {string} id of the service.\n * @param {string} extension Name of the custom extension that provides the\n *     implementation of this service.\n * @param {boolean=} opt_element Whether this service is provided by an\n *     element, not the extension.\n * @return {!Promise<?Object>}\n */\nexport function getElementServiceIfAvailableForDoc(\n  elementOrAmpDoc, id, extension, opt_element) {\n  const ampdoc = getAmpdoc(elementOrAmpDoc);\n  const s = getServicePromiseOrNullForDoc(elementOrAmpDoc, id);\n  if (s) {\n    return /** @type {!Promise<?Object>} */ (s);\n  }\n\n  return ampdoc.whenBodyAvailable()\n      .then(() => waitForExtensionIfPresent(\n          ampdoc.win, extension,\n          ampdoc.getHeadNode()))\n      .then(() => {\n        // If this service is provided by an element, then we can't depend on\n        // the service (they may not use the element).\n        if (opt_element) {\n          return getServicePromiseOrNullForDoc(elementOrAmpDoc, id);\n        } else if (isElementScheduled(ampdoc.win, extension)) {\n          return getServicePromiseForDoc(elementOrAmpDoc, id);\n        }\n        return null;\n      });\n}\n\n/**\n * Returns a promise for service for the given id in the embed scope of\n * a given node, if it exists. Otherwise, falls back to ampdoc scope IFF\n * the given node is in the top-level window.\n * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n * @param {string} id of the service.\n * @param {string} extension Name of the custom element that provides\n *     the implementation of this service.\n * @return {!Promise<?Object>}\n */\nexport function getElementServiceIfAvailableForDocInEmbedScope(\n  elementOrAmpDoc, id, extension) {\n  const s = getExistingServiceForDocInEmbedScope(elementOrAmpDoc, id);\n  if (s) {\n    return /** @type {!Promise<?Object>} */ (Promise.resolve(s));\n  }\n  // Return embed-scope element service promise if scheduled.\n  if (elementOrAmpDoc.nodeType) {\n    const win = toWin(elementOrAmpDoc.ownerDocument.defaultView);\n    const topWin = getTopWindow(win);\n    // In embeds, doc-scope services are window-scope. But make sure to\n    // only do this for embeds (not the top window), otherwise we'd grab\n    // a promise from the wrong service holder which would never resolve.\n    if (win !== topWin) {\n      return getElementServicePromiseOrNull(win, id, extension);\n    } else {\n      // Fallback to ampdoc IFF the given node is _not_ FIE.\n      return getElementServiceIfAvailableForDoc(elementOrAmpDoc, id, extension);\n    }\n  }\n  return /** @type {!Promise<?Object>} */ (Promise.resolve(null));\n}\n\n/**\n * Throws user error if `service` is null.\n * @param {Object} service\n * @param {string} id\n * @param {string} extension\n * @return {!Object}\n * @private\n */\nfunction assertService(service, id, extension) {\n  return /** @type {!Object} */ (user().assert(service,\n      'Service %s was requested to be provided through %s, ' +\n      'but %s is not loaded in the current page. To fix this ' +\n      'problem load the JavaScript file for %s in this page.',\n      id, extension, extension, extension));\n}\n\n/**\n * Get list of all the extension JS files\n * @param {HTMLHeadElement|Element|ShadowRoot} head\n * @return {!Array<string>}\n */\nexport function extensionScriptsInNode(head) {\n  // ampdoc.getHeadNode() can return null\n  if (!head) {\n    return [];\n  }\n  const scripts = [];\n  const list = head.querySelectorAll('script[custom-element]');\n  for (let i = 0; i < list.length; i++) {\n    scripts.push(list[i].getAttribute('custom-element'));\n  }\n  return scripts;\n}\n\n/**\n * Waits for body to be present then verifies that an extension script is\n * present in head for installation.\n * @param {!./service/ampdoc-impl.AmpDoc} ampdoc\n * @param {string} extensionId\n * @return {!Promise<boolean>}\n */\nexport function isExtensionScriptInNode(ampdoc, extensionId) {\n  return ampdoc.whenBodyAvailable()\n      .then(() => {\n        return extensionScriptInNode(\n            ampdoc.getHeadNode(), extensionId);\n      });\n}\n\n/**\n * Verifies that an extension script is present in head for\n * installation.\n * @param {HTMLHeadElement|Element|ShadowRoot} head\n * @param {string} extensionId\n * @private\n */\nfunction extensionScriptInNode(head, extensionId) {\n  return extensionScriptsInNode(head).includes(extensionId);\n}\n\n/**\n * Waits for an extension if its script is present\n * @param {!Window} win\n * @param {string} extension\n * @param {HTMLHeadElement|Element|ShadowRoot} head\n * @return {!Promise}\n * @private\n */\nfunction waitForExtensionIfPresent(win, extension, head) {\n  /**\n   * If there is an extension script wait for it to load before trying\n   * to get the service. Prevents a race condition when everything but\n   * the extensions is in cache. If there is no script then it's either\n   * not present, or the service was defined by a test. In those cases\n   * we don't wait around for an extension that does not exist.\n   */\n\n  // TODO(jpettitt) investigate registerExtension to short circuit\n  // the dom call in extensionScriptsInNode()\n  if (!extensionScriptInNode(head, extension)) {\n    return Promise.resolve();\n  }\n\n  const extensions = getService(win, 'extensions');\n  return /** @type {!Promise<?Object>} */ (\n    extensions.waitForExtension(win, extension));\n}\n\n/**\n * Returns the promise for service with `id` on the given window if available.\n * Otherwise, resolves with null (service was not registered).\n * @param {!Window} win\n * @param {string} id\n * @param {string} extension\n * @param {boolean=} opt_element\n * @return {!Promise<Object>}\n * @private\n */\nfunction getElementServicePromiseOrNull(win, id, extension, opt_element) {\n  return dom.waitForBodyPromise(win.document)\n      .then(() => waitForExtensionIfPresent(win, extension, win.document.head))\n      .then(() => {\n        // If this service is provided by an element, then we can't depend on\n        // the service (they may not use the element).\n        if (opt_element) {\n          return getServicePromiseOrNull(win, id);\n        } else if (isElementScheduled(win, extension)) {\n          return getServicePromise(win, id);\n        }\n        return null;\n      });\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Experiments system allows a developer to opt-in to test\n * features that are not yet fully tested.\n *\n * Experiments page: https://cdn.ampproject.org/experiments.html *\n */\n\nimport {getCookie, setCookie} from './cookies';\nimport {hasOwn} from './utils/object';\nimport {parseQueryString} from './url';\n\n/** @const {string} */\nconst COOKIE_NAME = 'AMP_EXP';\n\n/** @const {number} */\nconst COOKIE_MAX_AGE_DAYS = 180; // 6 month\n\n/** @const {time} */\nconst COOKIE_EXPIRATION_INTERVAL = COOKIE_MAX_AGE_DAYS * 24 * 60 * 60 * 1000;\n\n/** @const {string} */\nconst TOGGLES_WINDOW_PROPERTY = '__AMP__EXPERIMENT_TOGGLES';\n\n/**\n * @typedef {{\n *   isTrafficEligible: function(!Window):boolean,\n *   branches: !Array<string>\n * }}\n */\nexport let ExperimentInfo;\n\n/**\n * Whether we are in canary.\n * @param {!Window} win\n * @return {boolean}\n */\nexport function isCanary(win) {\n  return !!(win.AMP_CONFIG && win.AMP_CONFIG.canary);\n}\n\n/**\n * Returns binary type, e.g., canary, control, or production.\n * @param {!Window} win\n * @return {string}\n */\nexport function getBinaryType(win) {\n  return win.AMP_CONFIG && win.AMP_CONFIG.type ?\n    win.AMP_CONFIG.type : 'unknown';\n}\n\n/**\n * Whether the specified experiment is on or off.\n * @param {!Window} win\n * @param {string} experimentId\n * @return {boolean}\n */\nexport function isExperimentOn(win, experimentId) {\n  const toggles = experimentToggles(win);\n  return !!toggles[experimentId];\n}\n\n/**\n * Toggles the experiment on or off. Returns the actual value of the experiment\n * after toggling is done.\n * @param {!Window} win\n * @param {string} experimentId\n * @param {boolean=} opt_on\n * @param {boolean=} opt_transientExperiment  Whether to toggle the\n *     experiment state \"transiently\" (i.e., for this page load only) or\n *     durably (by saving the experiment IDs to the cookie after toggling).\n *     Default: false (save durably).\n * @return {boolean} New state for experimentId.\n */\nexport function toggleExperiment(win, experimentId, opt_on,\n  opt_transientExperiment) {\n  const currentlyOn = isExperimentOn(win, /*OK*/experimentId);\n  const on = !!(opt_on !== undefined ? opt_on : !currentlyOn);\n  if (on != currentlyOn) {\n    const toggles = experimentToggles(win);\n    toggles[experimentId] = on;\n\n    if (!opt_transientExperiment) {\n      const cookieToggles = getExperimentTogglesFromCookie(win);\n      cookieToggles[experimentId] = on;\n      saveExperimentTogglesToCookie(win, cookieToggles);\n    }\n  }\n  return on;\n}\n\n/**\n * Calculate whether the experiment is on or off based off of the\n * cookieFlag or the global config frequency given.\n * @param {!Window} win\n * @return {!Object<string, boolean>}\n */\nexport function experimentToggles(win) {\n  if (win[TOGGLES_WINDOW_PROPERTY]) {\n    return win[TOGGLES_WINDOW_PROPERTY];\n  }\n  win[TOGGLES_WINDOW_PROPERTY] = Object.create(null);\n  const toggles = win[TOGGLES_WINDOW_PROPERTY];\n\n  // Read the default config of this build.\n  if (win.AMP_CONFIG) {\n    for (const experimentId in win.AMP_CONFIG) {\n      const frequency = win.AMP_CONFIG[experimentId];\n      if (typeof frequency === 'number' && frequency >= 0 && frequency <= 1) {\n        toggles[experimentId] = Math.random() < frequency;\n      }\n    }\n  }\n  // Read document level override from meta tag.\n  if (win.AMP_CONFIG\n      && Array.isArray(win.AMP_CONFIG['allow-doc-opt-in'])\n      && win.AMP_CONFIG['allow-doc-opt-in'].length > 0) {\n    const allowed = win.AMP_CONFIG['allow-doc-opt-in'];\n    const meta =\n        win.document.head.querySelector('meta[name=\"amp-experiments-opt-in\"]');\n    if (meta) {\n      const optedInExperiments = meta.getAttribute('content').split(',');\n      for (let i = 0; i < optedInExperiments.length; i++) {\n        if (allowed.indexOf(optedInExperiments[i]) != -1) {\n          toggles[optedInExperiments[i]] = true;\n        }\n      }\n    }\n  }\n\n  Object.assign(toggles, getExperimentTogglesFromCookie(win));\n\n  if (win.AMP_CONFIG\n      && Array.isArray(win.AMP_CONFIG['allow-url-opt-in'])\n      && win.AMP_CONFIG['allow-url-opt-in'].length > 0) {\n    const allowed = win.AMP_CONFIG['allow-url-opt-in'];\n    const hash = win.location.originalHash || win.location.hash;\n    const params = parseQueryString(hash);\n    for (let i = 0; i < allowed.length; i++) {\n      const param = params[`e-${allowed[i]}`];\n      if (param == '1') {\n        toggles[allowed[i]] = true;\n      }\n      if (param == '0') {\n        toggles[allowed[i]] = false;\n      }\n    }\n  }\n  return toggles;\n}\n\n/**\n * Returns the cached experiments toggles, or null if they have not been\n * computed yet.\n * @param {!Window} win\n * @return {Object<string, boolean>}\n */\nexport function experimentTogglesOrNull(win) {\n  return win[TOGGLES_WINDOW_PROPERTY] || null;\n}\n\n/**\n * Returns a set of experiment IDs currently on.\n * @param {!Window} win\n * @return {!Object<string, boolean>}\n */\nfunction getExperimentTogglesFromCookie(win) {\n  const experimentCookie = getCookie(win, COOKIE_NAME);\n  const tokens = experimentCookie ? experimentCookie.split(/\\s*,\\s*/g) : [];\n\n  const toggles = Object.create(null);\n  for (let i = 0; i < tokens.length; i++) {\n    if (tokens[i].length == 0) {\n      continue;\n    }\n    if (tokens[i][0] == '-') {\n      toggles[tokens[i].substr(1)] = false;\n    } else {\n      toggles[tokens[i]] = true;\n    }\n  }\n\n  return toggles;\n}\n\n/**\n * Saves a set of experiment IDs currently on.\n * @param {!Window} win\n * @param {!Object<string, boolean>} toggles\n */\nfunction saveExperimentTogglesToCookie(win, toggles) {\n  const experimentIds = [];\n  for (const experiment in toggles) {\n    experimentIds.push((toggles[experiment] === false ? '-' : '') + experiment);\n  }\n\n  setCookie(win, COOKIE_NAME, experimentIds.join(','),\n      Date.now() + COOKIE_EXPIRATION_INTERVAL, {\n        // Set explicit domain, so the cookie gets send to sub domains.\n        domain: win.location.hostname,\n        allowOnProxyOrigin: true,\n      });\n}\n\n/**\n * See getExperimentTogglesFromCookie().\n * @param {!Window} win\n * @return {!Object<string, boolean>}\n * @visibleForTesting\n */\nexport function getExperimentToglesFromCookieForTesting(win) {\n  return getExperimentTogglesFromCookie(win);\n}\n\n/**\n * Resets the experimentsToggle cache for testing purposes.\n * @param {!Window} win\n * @visibleForTesting\n */\nexport function resetExperimentTogglesForTesting(win) {\n  setCookie(win, COOKIE_NAME, '', 0, {\n    domain: win.location.hostname,\n  });\n  win[TOGGLES_WINDOW_PROPERTY] = null;\n}\n\n/**\n * In some browser implementations of Math.random(), sequential calls of\n * Math.random() are correlated and can cause a bias.  In particular,\n * if the previous random() call was < 0.001 (as it will be if we select\n * into an experiment), the next value could be less than 0.5 more than\n * 50.7% of the time.  This provides an implementation that roots down into\n * the crypto API, when available, to produce less biased samples.\n *\n * @return {number} Pseudo-random floating-point value on the range [0, 1).\n */\nfunction slowButAccuratePrng() {\n  // TODO(tdrl): Implement.\n  return Math.random();\n}\n\n/**\n * Container for alternate random number generator implementations.  This\n * allows us to set an \"accurate\" PRNG for branch selection, but to mock it\n * out easily in tests.\n *\n * @visibleForTesting\n * @const {!{accuratePrng: function():number}}\n */\nexport const RANDOM_NUMBER_GENERATORS = {\n  accuratePrng: slowButAccuratePrng,\n};\n\n/**\n * Selects, uniformly at random, a single item from the array.\n * @param {!Array<string>} arr Object to select from.\n * @return {?string} Single item from arr or null if arr was empty.\n */\nfunction selectRandomItem(arr) {\n  const rn = RANDOM_NUMBER_GENERATORS.accuratePrng();\n  return arr[Math.floor(rn * arr.length)] || null;\n}\n\n/**\n * Selects which page-level experiment branches are enabled. If a given\n * experiment name is already set (including to the null / no branches selected\n * state), this won't alter its state.\n *\n * Check whether a given experiment is set using isExperimentOn(win,\n * experimentName) and, if it is on, look for which branch is selected in\n * win.experimentBranches[experimentName].\n *\n * @param {!Window} win Window context on which to save experiment\n *     selection state.\n * @param {!Object<string, !ExperimentInfo>} experiments  Set of experiments to\n *     configure for this page load.\n * @return {!Object<string, string>} Map of experiment names to selected\n *     branches.\n */\nexport function randomlySelectUnsetExperiments(win, experiments) {\n  win.experimentBranches = win.experimentBranches || {};\n  const selectedExperiments = {};\n  for (const experimentName in experiments) {\n    // Skip experimentName if it is not a key of experiments object or if it\n    // has already been populated by some other property.\n    if (!hasOwn(experiments, experimentName)) {\n      continue;\n    }\n    if (hasOwn(win.experimentBranches, experimentName)) {\n      selectedExperiments[experimentName] =\n          win.experimentBranches[experimentName];\n      continue;\n    }\n\n    if (!experiments[experimentName].isTrafficEligible ||\n        !experiments[experimentName].isTrafficEligible(win)) {\n      win.experimentBranches[experimentName] = null;\n      continue;\n    }\n\n    // If we're in the experiment, but we haven't already forced a specific\n    // experiment branch (e.g., via a test setup), then randomize the branch\n    // choice.\n    if (!win.experimentBranches[experimentName] &&\n      isExperimentOn(win, /*OK*/experimentName)) {\n      const {branches} = experiments[experimentName];\n      win.experimentBranches[experimentName] = selectRandomItem(branches);\n      selectedExperiments[experimentName] =\n          win.experimentBranches[experimentName];\n    }\n  }\n  return selectedExperiments;\n}\n\n/**\n * Returns the experiment branch enabled for the given experiment ID.\n * For example, 'control' or 'experiment'.\n *\n * @param {!Window} win Window context to check for experiment state.\n * @param {string} experimentName Name of the experiment to check.\n * @return {?string} Active experiment branch ID for experimentName (possibly\n *     null if experimentName has been tested but no branch was enabled).\n */\nexport function getExperimentBranch(win, experimentName) {\n  return win.experimentBranches ? win.experimentBranches[experimentName] : null;\n}\n\n/**\n * Force enable (or disable) a specific branch of a given experiment name.\n * Disables the experiment name altogether if branchId is falseish.\n *\n * @param {!Window} win Window context to check for experiment state.\n * @param {string} experimentName Name of the experiment to check.\n * @param {?string} branchId ID of branch to force or null to disable\n *     altogether.\n * @visibleForTesting\n */\nexport function forceExperimentBranch(win, experimentName, branchId) {\n  win.experimentBranches = win.experimentBranches || {};\n  toggleExperiment(win, experimentName, !!branchId, true);\n  win.experimentBranches[experimentName] = branchId;\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {getMode} from './mode';\nimport {getModeObject} from './mode-object';\nimport {isEnumValue} from './types';\n\n/**\n * Triple zero width space.\n *\n * This is added to user error messages, so that we can later identify\n * them, when the only thing that we have is the message. This is the\n * case in many browsers when the global exception handler is invoked.\n *\n * @const {string}\n */\nexport const USER_ERROR_SENTINEL = '\\u200B\\u200B\\u200B';\n\n\n/**\n * Four zero width space.\n *\n * @const {string}\n */\nexport const USER_ERROR_EMBED_SENTINEL = '\\u200B\\u200B\\u200B\\u200B';\n\n\n/**\n * @param {string} message\n * @return {boolean} Whether this message was a user error.\n */\nexport function isUserErrorMessage(message) {\n  return message.indexOf(USER_ERROR_SENTINEL) >= 0;\n}\n\n/**\n * @param {string} message\n * @return {boolean} Whether this message was a a user error from an iframe embed.\n */\nexport function isUserErrorEmbed(message) {\n  return message.indexOf(USER_ERROR_EMBED_SENTINEL) >= 0;\n}\n\n\n/**\n * @enum {number}\n * @private Visible for testing only.\n */\nexport const LogLevel = {\n  OFF: 0,\n  ERROR: 1,\n  WARN: 2,\n  INFO: 3,\n  FINE: 4,\n};\n\n/**\n * Sets reportError function. Called from error.js to break cyclic\n * dependency.\n * @param {function(*, !Element=)|undefined} fn\n */\nexport function setReportError(fn) {\n  self.reportError = fn;\n}\n\n/**\n * @type {!LogLevel|undefined}\n * @private\n */\nlet levelOverride_ = undefined;\n\n/**\n * @param {!LogLevel} level\n */\nexport function overrideLogLevel(level) {\n  levelOverride_ = level;\n}\n\n/**\n * Logging class. Use of sentinel string instead of a boolean to check user/dev\n * errors because errors could be rethrown by some native code as a new error,\n * and only a message would survive. Also, some browser don’t support a 5th\n * error object argument in window.onerror. List of supporting browser can be\n * found here:\n * https://blog.sentry.io/2016/01/04/client-javascript-reporting-window-onerror.html\n * @final\n * @private Visible for testing only.\n */\nexport class Log {\n  /**\n   * opt_suffix will be appended to error message to identify the type of the\n   * error message. We can't rely on the error object to pass along the type\n   * because some browsers do not have this param in its window.onerror API.\n   * See:\n   * https://blog.sentry.io/2016/01/04/client-javascript-reporting-window-onerror.html\n   *\n   * @param {!Window} win\n   * @param {function(!./mode.ModeDef):!LogLevel} levelFunc\n   * @param {string=} opt_suffix\n   */\n  constructor(win, levelFunc, opt_suffix) {\n    /**\n     * In tests we use the main test window instead of the iframe where\n     * the tests runs because only the former is relayed to the console.\n     * @const {!Window}\n     */\n    this.win = (getMode().test && win.AMP_TEST_IFRAME) ? win.parent : win;\n\n    /** @private @const {function(!./mode.ModeDef):!LogLevel} */\n    this.levelFunc_ = levelFunc;\n\n    /** @private @const {!LogLevel} */\n    this.level_ = this.defaultLevel_();\n\n    /** @private @const {string} */\n    this.suffix_ = opt_suffix || '';\n  }\n\n  /**\n   * @return {!LogLevel}\n   * @private\n   */\n  getLevel_() {\n    return (levelOverride_ !== undefined) ? levelOverride_ : this.level_;\n  }\n\n  /**\n   * @return {!LogLevel}\n   * @private\n   */\n  defaultLevel_() {\n    // No console - can't enable logging.\n    if (!this.win.console || !this.win.console.log) {\n      return LogLevel.OFF;\n    }\n\n    // Logging has been explicitly disabled.\n    if (getMode().log == '0') {\n      return LogLevel.OFF;\n    }\n\n    // Logging is enabled for tests directly.\n    if (getMode().test && this.win.ENABLE_LOG) {\n      return LogLevel.FINE;\n    }\n\n    // LocalDev by default allows INFO level, unless overriden by `#log`.\n    if (getMode().localDev && !getMode().log) {\n      return LogLevel.INFO;\n    }\n\n    // Delegate to the specific resolver.\n    return this.levelFunc_(getModeObject());\n  }\n\n  /**\n   * @param {string} tag\n   * @param {string} level\n   * @param {!Array} messages\n   */\n  msg_(tag, level, messages) {\n    if (this.getLevel_() != LogLevel.OFF) {\n      let fn = this.win.console.log;\n      if (level == 'ERROR') {\n        fn = this.win.console.error || fn;\n      } else if (level == 'INFO') {\n        fn = this.win.console.info || fn;\n      } else if (level == 'WARN') {\n        fn = this.win.console.warn || fn;\n      }\n      if (getMode().localDev) {\n        messages.unshift('[' + tag + ']');\n      }\n      fn.apply(this.win.console, messages);\n    }\n  }\n\n  /**\n   * Whether the logging is enabled.\n   * @return {boolean}\n   */\n  isEnabled() {\n    return this.getLevel_() != LogLevel.OFF;\n  }\n\n  /**\n   * Reports a fine-grained message.\n   * @param {string} tag\n   * @param {...*} var_args\n   */\n  fine(tag, var_args) {\n    if (this.getLevel_() >= LogLevel.FINE) {\n      this.msg_(tag, 'FINE', Array.prototype.slice.call(arguments, 1));\n    }\n  }\n\n  /**\n   * Reports a informational message.\n   * @param {string} tag\n   * @param {...*} var_args\n   */\n  info(tag, var_args) {\n    if (this.getLevel_() >= LogLevel.INFO) {\n      this.msg_(tag, 'INFO', Array.prototype.slice.call(arguments, 1));\n    }\n  }\n\n  /**\n   * Reports a warning message.\n   * @param {string} tag\n   * @param {...*} var_args\n   */\n  warn(tag, var_args) {\n    if (this.getLevel_() >= LogLevel.WARN) {\n      this.msg_(tag, 'WARN', Array.prototype.slice.call(arguments, 1));\n    }\n  }\n\n  /**\n   * Reports an error message. If the logging is disabled, the error is rethrown\n   * asynchronously.\n   * @param {string} tag\n   * @param {...*} var_args\n   * @return {!Error|undefined}\n   * @private\n   */\n  error_(tag, var_args) {\n    if (this.getLevel_() >= LogLevel.ERROR) {\n      this.msg_(tag, 'ERROR', Array.prototype.slice.call(arguments, 1));\n    } else {\n      const error = createErrorVargs.apply(null,\n          Array.prototype.slice.call(arguments, 1));\n      this.prepareError_(error);\n      return error;\n    }\n  }\n\n  /**\n   * Reports an error message.\n   * @param {string} tag\n   * @param {...*} var_args\n   */\n  error(tag, var_args) {\n    const error = this.error_.apply(this, arguments);\n    if (error) {\n      error.name = tag || error.name;\n      // reportError is installed globally per window in the entry point.\n      self.reportError(error);\n    }\n  }\n\n  /**\n   * Reports an error message and marks with an expected property. If the\n   * logging is disabled, the error is rethrown asynchronously.\n   * @param {string} unusedTag\n   * @param {...*} var_args\n   */\n  expectedError(unusedTag, var_args) {\n    const error = this.error_.apply(this, arguments);\n    if (error) {\n      error.expected = true;\n      // reportError is installed globally per window in the entry point.\n      self.reportError(error);\n    }\n  }\n\n  /**\n   * Creates an error object.\n   * @param {...*} var_args\n   * @return {!Error}\n   */\n  createError(var_args) {\n    const error = createErrorVargs.apply(null, arguments);\n    this.prepareError_(error);\n    return error;\n  }\n\n  /**\n   * Creates an error object with its expected property set to true.\n   * @param {...*} var_args\n   * @return {!Error}\n   */\n  createExpectedError(var_args) {\n    const error = createErrorVargs.apply(null, arguments);\n    this.prepareError_(error);\n    error.expected = true;\n    return error;\n  }\n\n  /**\n   * Throws an error if the first argument isn't trueish.\n   *\n   * Supports argument substitution into the message via %s placeholders.\n   *\n   * Throws an error object that has two extra properties:\n   * - associatedElement: This is the first element provided in the var args.\n   *   It can be used for improved display of error messages.\n   * - messageArray: The elements of the substituted message as non-stringified\n   *   elements in an array. When e.g. passed to console.error this yields\n   *   native displays of things like HTML elements.\n   *\n   * @param {T} shouldBeTrueish The value to assert. The assert fails if it does\n   *     not evaluate to true.\n   * @param {string=} opt_message The assertion message\n   * @param {...*} var_args Arguments substituted into %s in the message.\n   * @return {T} The value of shouldBeTrueish.\n   * @template T\n   * eslint \"google-camelcase/google-camelcase\": 0\n   */\n  assert(shouldBeTrueish, opt_message, var_args) {\n    let firstElement;\n    if (!shouldBeTrueish) {\n      const message = opt_message || 'Assertion failed';\n      const splitMessage = message.split('%s');\n      const first = splitMessage.shift();\n      let formatted = first;\n      const messageArray = [];\n      pushIfNonEmpty(messageArray, first);\n      for (let i = 2; i < arguments.length; i++) {\n        const val = arguments[i];\n        if (val && val.tagName) {\n          firstElement = val;\n        }\n        const nextConstant = splitMessage.shift();\n        messageArray.push(val);\n        pushIfNonEmpty(messageArray, nextConstant.trim());\n        formatted += toString(val) + nextConstant;\n      }\n      const e = new Error(formatted);\n      e.fromAssert = true;\n      e.associatedElement = firstElement;\n      e.messageArray = messageArray;\n      this.prepareError_(e);\n      // reportError is installed globally per window in the entry point.\n      self.reportError(e);\n      throw e;\n    }\n    return shouldBeTrueish;\n  }\n\n  /**\n   * Throws an error if the first argument isn't an Element\n   *\n   * Otherwise see `assert` for usage\n   *\n   * @param {*} shouldBeElement\n   * @param {string=} opt_message The assertion message\n   * @return {!Element} The value of shouldBeTrueish.\n   * @template T\n   * eslint \"google-camelcase/google-camelcase\": 2\n   */\n  assertElement(shouldBeElement, opt_message) {\n    const shouldBeTrueish = shouldBeElement && shouldBeElement.nodeType == 1;\n    this.assert(shouldBeTrueish, (opt_message || 'Element expected') + ': %s',\n        shouldBeElement);\n    return /** @type {!Element} */ (shouldBeElement);\n  }\n\n  /**\n   * Throws an error if the first argument isn't a string. The string can\n   * be empty.\n   *\n   * For more details see `assert`.\n   *\n   * @param {*} shouldBeString\n   * @param {string=} opt_message The assertion message\n   * @return {string} The string value. Can be an empty string.\n   * eslint \"google-camelcase/google-camelcase\": 2\n   */\n  assertString(shouldBeString, opt_message) {\n    this.assert(typeof shouldBeString == 'string',\n        (opt_message || 'String expected') + ': %s', shouldBeString);\n    return /** @type {string} */ (shouldBeString);\n  }\n\n  /**\n   * Throws an error if the first argument isn't a number. The allowed values\n   * include `0` and `NaN`.\n   *\n   * For more details see `assert`.\n   *\n   * @param {*} shouldBeNumber\n   * @param {string=} opt_message The assertion message\n   * @return {number} The number value. The allowed values include `0`\n   *   and `NaN`.\n   */\n  assertNumber(shouldBeNumber, opt_message) {\n    this.assert(typeof shouldBeNumber == 'number',\n        (opt_message || 'Number expected') + ': %s', shouldBeNumber);\n    return /** @type {number} */ (shouldBeNumber);\n  }\n\n  /**\n   * Throws an error if the first argument isn't a boolean.\n   *\n   * For more details see `assert`.\n   *\n   * @param {*} shouldBeBoolean\n   * @param {string=} opt_message The assertion message\n   * @return {boolean} The boolean value.\n   */\n  assertBoolean(shouldBeBoolean, opt_message) {\n    this.assert(!!shouldBeBoolean === shouldBeBoolean,\n        (opt_message || 'Boolean expected') + ': %s', shouldBeBoolean);\n    return /** @type {boolean} */ (shouldBeBoolean);\n  }\n\n  /**\n   * Asserts and returns the enum value. If the enum doesn't contain such a\n   * value, the error is thrown.\n   *\n   * @param {!Object<T>} enumObj\n   * @param {string} s\n   * @param {string=} opt_enumName\n   * @return {T}\n   * @template T\n   * eslint \"google-camelcase/google-camelcase\": 2\n   */\n  assertEnumValue(enumObj, s, opt_enumName) {\n    if (isEnumValue(enumObj, s)) {\n      return s;\n    }\n    this.assert(false,\n        'Unknown %s value: \"%s\"',\n        opt_enumName || 'enum', s);\n  }\n\n  /**\n   * @param {!Error} error\n   * @private\n   */\n  prepareError_(error) {\n    error = duplicateErrorIfNecessary(error);\n    if (this.suffix_) {\n      if (!error.message) {\n        error.message = this.suffix_;\n      } else if (error.message.indexOf(this.suffix_) == -1) {\n        error.message += this.suffix_;\n      }\n    } else if (isUserErrorMessage(error.message)) {\n      error.message = error.message.replace(USER_ERROR_SENTINEL, '');\n    }\n  }\n}\n\n/**\n * @param {string|!Element} val\n * @return {string}\n */\nfunction toString(val) {\n  // Do check equivalent to `val instanceof Element` without cross-window bug\n  if (val && val.nodeType == 1) {\n    return val.tagName.toLowerCase() + (val.id ? '#' + val.id : '');\n  }\n  return /** @type {string} */ (val);\n}\n\n\n/**\n * @param {!Array} array\n * @param {*} val\n */\nfunction pushIfNonEmpty(array, val) {\n  if (val != '') {\n    array.push(val);\n  }\n}\n\n/**\n * Some exceptions (DOMException, namely) have read-only message.\n * @param {!Error} error\n * @return {!Error};\n */\nexport function duplicateErrorIfNecessary(error) {\n  const {message} = error;\n  const test = String(Math.random());\n  error.message = test;\n\n  if (error.message === test) {\n    error.message = message;\n    return error;\n  }\n\n  const e = new Error(error.message);\n  // Copy all the extraneous things we attach.\n  for (const prop in error) {\n    e[prop] = error[prop];\n  }\n  // Ensure these are copied.\n  e.stack = error.stack;\n  return e;\n}\n\n/**\n * @param {...*} var_args\n * @return {!Error}\n * @visibleForTesting\n */\nexport function createErrorVargs(var_args) {\n  let error = null;\n  let message = '';\n  for (let i = 0; i < arguments.length; i++) {\n    const arg = arguments[i];\n    if (arg instanceof Error && !error) {\n      error = duplicateErrorIfNecessary(arg);\n    } else {\n      if (message) {\n        message += ' ';\n      }\n      message += arg;\n    }\n  }\n\n  if (!error) {\n    error = new Error(message);\n  } else if (message) {\n    error.message = message + ': ' + error.message;\n  }\n  return error;\n}\n\n\n/**\n * Rethrows the error without terminating the current context. This preserves\n * whether the original error designation is a user error or a dev error.\n * @param {...*} var_args\n */\nexport function rethrowAsync(var_args) {\n  const error = createErrorVargs.apply(null, arguments);\n  setTimeout(() => {\n    // reportError is installed globally per window in the entry point.\n    self.reportError(error);\n    throw error;\n  });\n}\n\n\n/**\n * Cache for logs. We do not use a Service since the service module depends\n * on Log and closure literally can't even.\n * @type {{user: ?Log, dev: ?Log, userForEmbed: ?Log}}\n */\nself.log = (self.log || {\n  user: null,\n  dev: null,\n  userForEmbed: null,\n});\n\nconst logs = self.log;\n\n/**\n * Eventually holds a constructor for Log objects. Lazily initialized, so we\n * can avoid ever referencing the real constructor except in JS binaries\n * that actually want to include the implementation.\n * @type {?Function}\n */\nlet logConstructor = null;\n\n/**\n * Initializes log contructor.\n */\nexport function initLogConstructor() {\n  logConstructor = Log;\n  // Initialize instances for use. If a binary (an extension for example) that\n  // does not call `initLogConstructor` invokes `dev()` or `user()` earlier than\n  // the binary that does call `initLogConstructor` (amp.js), the extension will\n  // throw an error as that extension will never be able to initialize the log\n  // instances and we also don't want it to call `initLogConstructor` either\n  // (since that will cause the Log implementation to be bundled into that\n  // binary). So we must initialize the instances eagerly so that they are ready\n  // for use (stored globally) after the main binary calls `initLogConstructor`.\n  dev();\n  user();\n}\n\n/**\n * Resets log contructor for testing.\n */\nexport function resetLogConstructorForTesting() {\n  logConstructor = null;\n}\n\n/**\n * Publisher level log.\n *\n * Enabled in the following conditions:\n *  1. Not disabled using `#log=0`.\n *  2. Development mode is enabled via `#development=1` or logging is explicitly\n *     enabled via `#log=D` where D >= 1.\n *  3. AMP.setLogLevel(D) is called, where D >= 1.\n *\n * @param {!Element=} opt_element\n * @return {!Log}\n */\nexport function user(opt_element) {\n  if (!logs.user) {\n    logs.user = getUserLogger(USER_ERROR_SENTINEL);\n  }\n  if (!isFromEmbed(logs.user.win, opt_element)) {\n    return logs.user;\n  } else {\n    if (logs.userForEmbed) {\n      return logs.userForEmbed;\n    }\n    return logs.userForEmbed = getUserLogger(USER_ERROR_EMBED_SENTINEL);\n  }\n}\n\n/**\n * Getter for user logger\n * @param {string=} suffix\n * @return {!Log}\n */\nfunction getUserLogger(suffix) {\n  if (!logConstructor) {\n    throw new Error('failed to call initLogConstructor');\n  }\n  return new logConstructor(self, mode => {\n    const logNum = parseInt(mode.log, 10);\n    if (mode.development || logNum >= 1) {\n      return LogLevel.FINE;\n    }\n    return LogLevel.WARN;\n  }, suffix);\n}\n\n/**\n * AMP development log. Calls to `devLog().assert` and `dev.fine` are stripped\n * in the PROD binary. However, `devLog().assert` result is preserved in either\n * case.\n *\n * Enabled in the following conditions:\n *  1. Not disabled using `#log=0`.\n *  2. Logging is explicitly enabled via `#log=D`, where D >= 2.\n *  3. AMP.setLogLevel(D) is called, where D >= 2.\n *\n * @return {!Log}\n */\nexport function dev() {\n  if (logs.dev) {\n    return logs.dev;\n  }\n  if (!logConstructor) {\n    throw new Error('failed to call initLogConstructor');\n  }\n  return logs.dev = new logConstructor(self, mode => {\n    const logNum = parseInt(mode.log, 10);\n    if (logNum >= 3) {\n      return LogLevel.FINE;\n    }\n    if (logNum >= 2) {\n      return LogLevel.INFO;\n    }\n    return LogLevel.OFF;\n  });\n}\n\n/**\n * @param {!Window} win\n * @param {!Element=} opt_element\n * @return {boolean} isEmbed\n */\nexport function isFromEmbed(win, opt_element) {\n  if (!opt_element) {\n    return false;\n  }\n  return opt_element.ownerDocument.defaultView != win;\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {getMode} from './mode';\n\n/**\n * Provides info about the current app. This return value may be cached and\n * passed around as it will always be DCE'd.\n * @param {?Window=} opt_win\n * @return {!./mode.ModeDef}\n */\nexport function getModeObject(opt_win) {\n  return {\n    localDev: getMode(opt_win).localDev,\n    development: getMode(opt_win).development,\n    filter: getMode(opt_win).filter,\n    minified: getMode(opt_win).minified,\n    lite: getMode(opt_win).lite,\n    test: getMode(opt_win).test,\n    log: getMode(opt_win).log,\n    version: getMode(opt_win).version,\n    rtvVersion: getMode(opt_win).rtvVersion,\n  };\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {parseQueryString_} from './url-parse-query-string';\n\n/**\n * @typedef {{\n *   localDev: boolean,\n *   development: boolean,\n *   filter: (string|undefined),\n *   minified: boolean,\n *   lite: boolean,\n *   test: boolean,\n *   log: (string|undefined),\n *   version: string,\n *   rtvVersion: string,\n * }}\n */\nexport let ModeDef;\n\n/** @type {string} */\nconst version = '$internalRuntimeVersion$';\n\n/**\n * `rtvVersion` is the prefixed version we serve off of the cdn.\n * The prefix denotes canary(00) or prod(01) or an experiment version ( > 01).\n * @type {string}\n */\nlet rtvVersion = '';\n\n/**\n * Provides info about the current app.\n * @param {?Window=} opt_win\n * @return {!ModeDef}\n */\nexport function getMode(opt_win) {\n  const win = opt_win || self;\n  if (win.AMP_MODE) {\n    return win.AMP_MODE;\n  }\n  return win.AMP_MODE = getMode_(win);\n}\n\n/**\n * Provides info about the current app.\n * @param {!Window} win\n * @return {!ModeDef}\n */\nfunction getMode_(win) {\n  // Magic constants that are replaced by closure compiler.\n  // IS_MINIFIED is always replaced with true when closure compiler is used\n  // while IS_DEV is only replaced when `gulp dist` is called without the\n  // --fortesting flag.\n  const IS_DEV = true;\n  const IS_MINIFIED = false;\n\n  const localDevEnabled = !!(self.AMP_CONFIG && self.AMP_CONFIG.localDev);\n  const runningTests = IS_DEV && !!(win.AMP_TEST || win.__karma__);\n  const isLocalDev = IS_DEV && (localDevEnabled || runningTests);\n  const hashQuery = parseQueryString_(\n      // location.originalHash is set by the viewer when it removes the fragment\n      // from the URL.\n      win.location.originalHash || win.location.hash);\n\n  const searchQuery = parseQueryString_(win.location.search);\n\n  if (!rtvVersion) {\n    rtvVersion = getRtvVersion(win, isLocalDev);\n  }\n\n  // The `minified`, `test` and `localDev` properties are replaced\n  // as boolean literals when we run `gulp dist` without the `--fortesting`\n  // flags. This improved DCE on the production file we deploy as the code\n  // paths for localhost/testing/development are eliminated.\n  return {\n    localDev: isLocalDev,\n    // Triggers validation or enable pub level logging. Validation can be\n    // bypassed via #validate=0.\n    // Note that AMP_DEV_MODE flag is used for testing purposes.\n    development: !!(hashQuery['development'] == '1' || win.AMP_DEV_MODE),\n    examiner: hashQuery['development'] == '2',\n    // Allows filtering validation errors by error category. For the\n    // available categories, see ErrorCategory in validator/validator.proto.\n    filter: hashQuery['filter'],\n    // amp-geo override\n    geoOverride: hashQuery['amp-geo'],\n    minified: IS_MINIFIED,\n    // Whether document is in an amp-lite viewer. It signal that the user\n    // would prefer to use less bandwidth.\n    lite: searchQuery['amp_lite'] != undefined,\n    test: runningTests,\n    log: hashQuery['log'],\n    version,\n    rtvVersion,\n  };\n}\n\n/**\n * Retrieve the `rtvVersion` which will have a numeric prefix\n * denoting canary/prod/experiment (unless `isLocalDev` is true).\n *\n * @param {!Window} win\n * @param {boolean} isLocalDev\n * @return {string}\n */\nfunction getRtvVersion(win, isLocalDev) {\n  // If it's local dev then we won't actually have a full version so\n  // just use the version.\n  if (isLocalDev) {\n    return version;\n  }\n\n  if (win.AMP_CONFIG && win.AMP_CONFIG.v) {\n    return win.AMP_CONFIG.v;\n  }\n\n  // Currently `$internalRuntimeVersion$` and thus `mode.version` contain only\n  // major version. The full version however must also carry the minor version.\n  // We will default to production default `01` minor version for now.\n  // TODO(erwinmombay): decide whether $internalRuntimeVersion$ should contain\n  // minor version.\n  return `01${version}`;\n}\n\n\n/**\n * @param {!Window} win\n * @param {boolean} isLocalDev\n * @return {string}\n * @visibleForTesting\n */\nexport function getRtvVersionForTesting(win, isLocalDev) {\n  return getRtvVersion(win, isLocalDev);\n}\n\n\n/** @visibleForTesting */\nexport function resetRtvVersionForTesting() {\n  rtvVersion = '';\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {getMode} from './mode';\nimport {install as installArrayIncludes} from './polyfills/array-includes';\nimport {install as installCustomElements} from './polyfills/custom-elements';\nimport {\n  install as installDOMTokenListToggle,\n} from './polyfills/domtokenlist-toggle';\nimport {install as installDocContains} from './polyfills/document-contains';\nimport {install as installMathSign} from './polyfills/math-sign';\nimport {install as installObjectAssign} from './polyfills/object-assign';\nimport {install as installPromise} from './polyfills/promise';\nimport {installCustomElements as installRegisterElement} from\n  'document-register-element/build/document-register-element.patched';\nimport {isExperimentOn} from './experiments';\n\nif (isExperimentOn(self, 'custom-elements-v1') || getMode().test) {\n  installCustomElements(self, class {});\n} else {\n  installRegisterElement(self, 'auto');\n}\ninstallDOMTokenListToggle(self);\ninstallMathSign(self);\ninstallObjectAssign(self);\ninstallPromise(self);\ninstallDocContains(self);\ninstallArrayIncludes(self);\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * Returns true if the element is in the array and false otherwise.\n *\n * @param {*} value\n * @param {number=} opt_fromIndex\n * @return {boolean}\n * @this {Array}\n */\nfunction includes(value, opt_fromIndex) {\n  const fromIndex = opt_fromIndex || 0;\n  const len = this.length;\n  let i = fromIndex >= 0 ? fromIndex : Math.max(len + fromIndex, 0);\n  for (; i < len; i++) {\n    const other = this[i];\n    // If value has been found OR (value is NaN AND other is NaN)\n    /*eslint \"no-self-compare\": 0*/\n    if (other === value || (value !== value && other !== other)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n* Sets the Array.contains polyfill if it does not exist.\n* @param {!Window} win\n*/\nexport function install(win) {\n  if (!win.Array.prototype.includes) {\n    win.Object.defineProperty(Array.prototype, 'includes', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: includes,\n    });\n  }\n}\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @typedef {{\n *   promise: !Promise<undefined>,\n *   resolve: function(),\n * }}\n */\nlet DeferredDef;\n\n/**\n * @typedef {!Function}\n */\nlet CustomElementConstructorDef;\n\n/**\n * @typedef {{\n *  name: string,\n *  ctor: !CustomElementConstructorDef,\n * }}\n */\nlet CustomElementDef;\n\n/**\n * Validates the custom element's name.\n * This intentionally ignores \"valid\" higher Unicode Code Points.\n * https://html.spec.whatwg.org/multipage/custom-elements.html#valid-custom-element-name\n */\nconst VALID_NAME = /^[a-z][a-z0-9._]*-[a-z0-9._-]*$/;\nconst INVALID_NAMES = [\n  'annotation-xml',\n  'color-profile',\n  'font-face',\n  'font-face-src',\n  'font-face-uri',\n  'font-face-format',\n  'font-face-name',\n  'missing-glyph',\n];\n\n/**\n * Asserts that the custom element name conforms to the spec.\n *\n * @param {!Function} SyntaxError\n * @param {string} name\n */\nfunction assertValidName(SyntaxError, name) {\n  if (!VALID_NAME.test(name) || INVALID_NAMES.indexOf(name) >= 0) {\n    throw new SyntaxError(`invalid custom element name \"${name}\"`);\n  }\n}\n\n/**\n * Does win have a full Custom Elements registry?\n *\n * @param {!Window} win\n * @return {boolean}\n */\nfunction hasCustomElements(win) {\n  const {customElements} = win;\n\n  return !!(\n    customElements &&\n    customElements.define &&\n    customElements.get &&\n    customElements.whenDefined);\n}\n\n/**\n * Was HTMLElement already patched for this window?\n *\n * @param {!Window} win\n * @return {boolean}\n */\nfunction isPatched(win) {\n  const tag = win.HTMLElement.toString();\n  return tag.indexOf('[native code]') === -1;\n}\n\n/**\n * The public Custom Elements API.\n */\nclass CustomElementRegistry {\n  /**\n   * @param {!Window} win\n   * @param {!Registry} registry\n   */\n  constructor(win, registry) {\n    /**\n     * @const @private\n     */\n    this.win_ = win;\n\n    /**\n     * @const @private\n     */\n    this.registry_ = registry;\n\n    /**\n     * @type {!Object<string, DeferredDef>}\n     * @private\n     * @const\n     */\n    this.pendingDefines_ = this.win_.Object.create(null);\n  }\n\n  /**\n   * Register the custom element.\n   *\n   * @param {string} name\n   * @param {!CustomElementConstructorDef} ctor\n   * @param {!Object=} options\n   */\n  define(name, ctor, options) {\n    this.registry_.define(name, ctor, options);\n\n    // If anyone is waiting for this custom element to be defined, resolve\n    // their promise.\n    const pending = this.pendingDefines_;\n    const deferred = pending[name];\n    if (deferred) {\n      deferred.resolve();\n      delete pending[name];\n    }\n  }\n\n  /**\n   * Get the constructor of the (already defined) custom element.\n   *\n   * @param {string} name\n   * @return {!CustomElementConstructorDef|undefined}\n   */\n  get(name) {\n    const def = this.registry_.getByName(name);\n    if (def) {\n      return def.ctor;\n    }\n  }\n\n  /**\n   * Returns a promise that waits until the custom element is defined.\n   * If the custom element is already defined, returns a resolved promise.\n   *\n   * @param {string} name\n   * @return {!Promise<undefined>}\n   */\n  whenDefined(name) {\n    const {Promise, SyntaxError} = this.win_;\n    assertValidName(SyntaxError, name);\n\n    if (this.registry_.getByName(name)) {\n      return Promise.resolve();\n    }\n\n    const pending = this.pendingDefines_;\n    const deferred = pending[name];\n    if (deferred) {\n      return deferred.promise;\n    }\n\n    let resolve;\n    const promise = new /*OK*/Promise(res => resolve = res);\n    pending[name] = {\n      promise,\n      resolve,\n    };\n\n    return promise;\n  }\n\n  /**\n   * Upgrade all custom elements inside root.\n   *\n   * @param {!Node} root\n   */\n  upgrade(root) {\n    this.registry_.upgrade(root);\n  }\n}\n\n/**\n * This internal APIs necessary to run the CustomElementRegistry.\n * Since Registry is never exposed externally, all methods are actually\n * available on the instance.\n */\nclass Registry {\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n    /**\n     * @private @const\n     */\n    this.win_ = win;\n\n    /**\n     * @private @const\n     */\n    this.doc_ = win.document;\n\n    /**\n     * @type {!Object<string, !CustomElementDef>}\n     * @private\n     * @const\n     */\n    this.definitions_ = win.Object.create(null);\n\n    /**\n     * A up-to-date DOM selector for all custom elements.\n     * @type {string}\n     */\n    this.query_ = '';\n\n    /**\n     * The currently upgrading element.\n     * @private {Element}\n     */\n    this.current_ = null;\n  }\n\n  /**\n   * The currently-being-upgraded custom element.\n   *\n   * When an already created (through the DOM parsing APIs, or innerHTML)\n   * custom element node is being upgraded, we can't just create a new node\n   * (it's illegal in the spec). But we still need to run the custom element's\n   * constructor code on the node. We avoid this conundrum by running the\n   * constructor while returning this current node in the HTMLElement\n   * class constructor (the base class of all custom elements).\n   *\n   * @return {Element}\n   */\n  current() {\n    const current = this.current_;\n    this.current_ = null;\n    return current;\n  }\n\n  /**\n   * Finds the custom element definition by name.\n   *\n   * @param {string} name\n   * @return {CustomElementDef|undefined}\n   */\n  getByName(name) {\n    const definition = this.definitions_[name];\n    if (definition) {\n      return definition;\n    }\n  }\n\n  /**\n   * Finds the custom element definition by constructor instance.\n   *\n   * @param {CustomElementConstructorDef} ctor\n   * @return {CustomElementDef|undefined}\n   */\n  getByConstructor(ctor) {\n    const definitions = this.definitions_;\n\n    for (const name in definitions) {\n      const def = definitions[name];\n      if (def.ctor === ctor) {\n        return def;\n      }\n    }\n  }\n\n  /**\n   * Registers the custom element definition, and upgrades all elements by that\n   * name in the root document.\n   *\n   * @param {string} name\n   * @param {!CustomElementConstructorDef} ctor\n   * @param {!Object|undefined} options\n   */\n  define(name, ctor, options) {\n    const {Error, SyntaxError} = this.win_;\n\n    if (options) {\n      throw new Error('Extending native custom elements is not supported');\n    }\n\n    assertValidName(SyntaxError, name);\n\n    if (this.getByName(name) ||\n        this.getByConstructor(ctor)) {\n      throw new Error(`duplicate definition \"${name}\"`);\n    }\n\n    // TODO(jridgewell): Record connectedCallback, disconnectedCallback,\n    // adoptedCallback, attributeChangedCallback, and observedAttributes.\n    // TODO(jridgewell): If attributeChangedCallback, gather observedAttributes\n    this.definitions_[name] = {\n      name,\n      ctor,\n    };\n\n    this.observe_(name);\n    this.upgrade(this.doc_, name);\n  }\n\n  /**\n   * Upgrades custom elements descendants of root (but not including root).\n   *\n   * When called with an opt_query, it both upgrades and connects the custom\n   * elements (this is used during the custom element define algorithm).\n   *\n   * @param {!Node} root\n   * @param {string=} opt_query\n   */\n  upgrade(root, opt_query) {\n    // Only CustomElementRegistry.p.define provides a query (the newly defined\n    // custom element). In this case, we are both upgrading _and_ connecting\n    // the custom elements.\n    const newlyDefined = !!opt_query;\n    const query = opt_query || this.query_;\n    const upgradeCandidates = this.queryAll_(root, query);\n\n    for (let i = 0; i < upgradeCandidates.length; i++) {\n      const candidate = upgradeCandidates[i];\n      if (newlyDefined) {\n        this.connectedCallback_(candidate);\n      } else {\n        this.upgradeSelf(candidate);\n      }\n    }\n  }\n\n  /**\n   * Upgrades the custom element node, if a custom element has been registered\n   * by this name.\n   *\n   * @param {!Node} node\n   */\n  upgradeSelf(node) {\n    const def = this.getByName(node.localName);\n    if (!def) {\n      return;\n    }\n\n    this.upgradeSelf_(/** @type {!Element} */(node), def);\n  }\n\n  /**\n   * @param {!Node} root\n   * @param {string} query\n   * @return {!Array|!NodeList}\n   */\n  queryAll_(root, query) {\n    if (!query || !root.querySelectorAll) {\n      // Nothing to do...\n      return [];\n    }\n\n    return root.querySelectorAll(query);\n  }\n\n  /**\n   * Upgrades the (already created via DOM parsing) custom element.\n   *\n   * @param {!Element} node\n   * @param {!CustomElementDef} def\n   */\n  upgradeSelf_(node, def) {\n    const {ctor} = def;\n    if (node instanceof ctor) {\n      return;\n    }\n\n    // Despite how it looks, this is not a useless construction.\n    // HTMLElementPolyfill (the base class of all custom elements) will return\n    // the current node, allowing the custom element's subclass constructor to\n    // run on the node. The node itself is already constructed, so the return\n    // value is just the node.\n    this.current_ = node;\n    const el = new ctor();\n\n    if (el !== node) {\n      throw new this.win_.Error(\n          'Constructor illegally returned a different instance.');\n    }\n  }\n\n  /**\n   * Fires connectedCallback on the custom element, if it has one.\n   * This also upgrades the custom element, since it may not have been\n   * accessible via the root document before (a detached DOM tree).\n   *\n   * @param {!Node} node\n   */\n  connectedCallback_(node) {\n    const def = this.getByName(node.localName);\n    if (!def) {\n      return;\n    }\n    this.upgradeSelf_(/** @type {!Element} */(node), def);\n    // TODO(jridgewell): It may be appropriate to adoptCallback, if the node\n    // used to be in another doc.\n    // TODO(jridgewell): I should be calling the definitions connectedCallback\n    // with node as the context.\n    if (node.connectedCallback) {\n      node.connectedCallback();\n    }\n  }\n\n  /**\n   * Fires disconnectedCallback on the custom element, if it has one.\n   *\n   * @param {!Node} node\n   */\n  disconnectedCallback_(node) {\n    // TODO(jridgewell): I should be calling the definitions connectedCallback\n    // with node as the context.\n    if (node.disconnectedCallback) {\n      node.disconnectedCallback();\n    }\n  }\n\n  /**\n   * Records name as a registered custom element to observe.\n   *\n   * Starts the Mutation Observer if this is the first registered custom\n   * element. This is deferred until the first custom element is defined to\n   * speed up initial rendering of the page.\n   *\n   * Mutation Observers are conveniently available in every browser we care\n   * about. When a node is connected to the root document, all custom\n   * elements (including that node iteself) will be upgraded and call\n   * connectedCallback. When a node is disconnectedCallback from the root\n   * document, all custom elements will call disconnectedCallback.\n   *\n   * @param {string} name\n   */\n  observe_(name) {\n    if (this.query_) {\n      this.query_ += `,${name}`;\n      return;\n    }\n\n    this.query_ = name;\n\n    // The first registered name starts the mutation observer.\n    const observer = new this.win_.MutationObserver(records => {\n      if (records) {\n        this.handleRecords_(records);\n      }\n    });\n    observer.observe(this.doc_, {\n      childList: true,\n      subtree: true,\n    });\n  }\n\n  /**\n   * Handle all the Mutation Observer's Mutation Records.\n   * All added custom elements will be upgraded (if not already) and call\n   * connectedCallback. All removed custom elements will call\n   * disconnectedCallback.\n   *\n   * @param {!Array<!MutationRecord>} records\n   */\n  handleRecords_(records) {\n    for (let i = 0; i < records.length; i++) {\n      const record = records[i];\n      if (!record) {\n        continue;\n      }\n\n      const {addedNodes, removedNodes} = record;\n      for (let i = 0; i < addedNodes.length; i++) {\n        const node = addedNodes[i];\n        const connectedCandidates = this.queryAll_(node, this.query_);\n        this.connectedCallback_(node);\n        for (let i = 0; i < connectedCandidates.length; i++) {\n          this.connectedCallback_(connectedCandidates[i]);\n        }\n      }\n\n      for (let i = 0; i < removedNodes.length; i++) {\n        const node = removedNodes[i];\n        const disconnectedCandidates = this.queryAll_(node, this.query_);\n        this.disconnectedCallback_(node);\n        for (let i = 0; i < disconnectedCandidates.length; i++) {\n          this.disconnectedCallback_(disconnectedCandidates[i]);\n        }\n      }\n    }\n  }\n}\n\n/**\n * Does the polyfilling.\n * @param {!Window} win\n */\nfunction polyfill(win) {\n  const {HTMLElement, Element, Node, Document, Object, document} = win;\n  const {createElement, cloneNode, importNode} = document;\n\n  const registry = new Registry(win);\n  const customElements = new CustomElementRegistry(win, registry);\n\n  // Expose the custom element registry.\n  // Object.getOwnPropertyDescriptor(window, 'customElements')\n  // {get: ƒ, set: undefined, enumerable: true, configurable: true}\n  Object.defineProperty(win, 'customElements', {\n    enumerable: true,\n    configurable: true,\n    // writable: false,\n    value: customElements,\n  });\n\n  // Patch createElement to immediately upgrade the custom element.\n  // This has the added benefit that it avoids the \"already created but needs\n  // constructor code run\" chicken-and-egg problem.\n  Document.prototype.createElement = function createElementPolyfill(name) {\n    const def = registry.getByName(name);\n    if (def) {\n      return new def.ctor();\n    }\n    return createElement.apply(this, arguments);\n  };\n\n  // Patch importNode to immediately upgrade custom elements.\n  // TODO(jridgewell): Can fire adoptedCallback for cross doc imports.\n  Document.prototype.importNode = function importNodePolyfill() {\n    const imported = importNode.apply(this, arguments);\n    if (imported) {\n      registry.upgradeSelf(imported);\n      registry.upgrade(imported);\n    }\n    return imported;\n  };\n\n  // Patch cloneNode to immediately upgrade custom elements.\n  Node.prototype.cloneNode = function cloneNodePolyfill() {\n    const cloned = cloneNode.apply(this, arguments);\n    registry.upgradeSelf(cloned);\n    registry.upgrade(cloned);\n    return cloned;\n  };\n\n  // Patch the innerHTML setter to immediately upgrade custom elements.\n  // Note, this could technically fire connectedCallbacks if this node was\n  // connected, but we leave that to the Mutation Observer.\n  const innerHTMLDesc = Object.getOwnPropertyDescriptor(Element.prototype,\n      'innerHTML');\n  const innerHTMLSetter = innerHTMLDesc.set;\n  innerHTMLDesc.set = function(html) {\n    innerHTMLSetter.call(this, html);\n    registry.upgrade(this);\n  };\n  Object.defineProperty(Element.prototype, 'innerHTML', innerHTMLDesc);\n\n  /**\n   * You can't use the real HTMLElement constructor, because you can't subclass\n   * it without using native classes. So, mock its approximation using\n   * createElement.\n   */\n  function HTMLElementPolyfill() {\n    const {constructor} = this;\n\n    // If we're upgrading an already created custom element, we can't create\n    // another new node (by the spec, it must be the same node).\n    let el = registry.current();\n\n    // If there's not a already created custom element, we're being invoked via\n    // `new`ing the constructor.\n    //\n    // Technically, we could get here via createElement, but we patched that.\n    // If it the custom element was registered, the patch turned it into a\n    // `new` call.\n    // If it was not registered, the native createElement is used. And if\n    // native createElement is being used and we got to this code, we're really\n    // in an infinite loop (a native createElement call just below) so we've\n    // got bigger problems.\n    //\n    // So just take my word we got here via `new`.\n    if (!el) {\n      // The custom element definition is an invariant. If the custom element\n      // is registered, everything works. If it's not, it throws in the member\n      // property access (only defined custom elements can be directly\n      // constructed via `new`).\n      const def = registry.getByConstructor(constructor);\n      el = createElement.call(document, def.name);\n    }\n\n    // Finally, if the node was already constructed, we need to reset it's\n    // prototype to the custom element prototype. And if it wasn't already\n    // constructed, we created a new node via native createElement, and we need\n    // to reset it's prototype. Basically always reset the prototype.\n    Object.setPrototypeOf(el, constructor.prototype);\n    return el;\n  }\n  subClass(Object, HTMLElement, HTMLElementPolyfill);\n\n  // Expose the polyfilled HTMLElement constructor for everyone to extend from.\n  win.HTMLElement = HTMLElementPolyfill;\n}\n\n/**\n * Wraps HTMLElement in a Reflect.construct constructor, so that transpiled\n * classes can `_this = superClass.call(this)` during their construction.\n *\n * This is only used when Custom Elements v1 is already available _and_ we're\n * using transpiled classes (which use ES5 construction idioms).\n *\n * @param {!Window} win\n */\nfunction wrapHTMLElement(win) {\n  const {HTMLElement, Reflect, Object} = win;\n  /**\n   */\n  function HTMLElementWrapper() {\n    const ctor = /** @type {function(...?):?|undefined} */(\n      /** @type {!HTMLElement} */(this).constructor);\n\n    // Reflect.construct allows us to construct a new HTMLElement without using\n    // `new` (which will always fail because native HTMLElement is a restricted\n    // constructor).\n    return Reflect.construct(HTMLElement, [], ctor);\n  }\n  subClass(Object, HTMLElement, HTMLElementWrapper);\n\n  // Expose the wrapped HTMLElement constructor for everyone to extend from.\n  win.HTMLElement = HTMLElementWrapper;\n}\n\n/**\n * Setups up prototype inheritance\n *\n * @param {!Object} Object\n * @param {!Function} superClass\n * @param {!Function} subClass\n */\nfunction subClass(Object, superClass, subClass) {\n  // Object.getOwnPropertyDescriptor(superClass.prototype, 'constructor')\n  // {value: ƒ, writable: true, enumerable: false, configurable: true}\n  subClass.prototype = Object.create(superClass.prototype, {\n    constructor: {\n      // enumerable: false,\n      configurable: true,\n      writable: true,\n      value: subClass,\n    },\n  });\n}\n\n/**\n * Polyfills Custom Elements v1 API. This has 4 modes:\n *\n * 1. Custom elements v1 already supported, using native classes\n * 2. Custom elements v1 already supported, using transpiled classes\n * 3. Custom elements v1 not supported, using native classes\n * 4. Custom elements v1 not supported, using transpiled classes\n *\n * In mode 1, nothing is done. In mode 2, a minimal polyfill is used to support\n * extending the HTMLElement base class. In mode 3 and 4, a full polyfill is\n * done.\n *\n * @param {!Window} win\n * @param {!Function} ctor\n */\nexport function install(win, ctor) {\n  if (isPatched(win)) {\n    return;\n  }\n\n  let install = true;\n  let installWrapper = false;\n\n  if (hasCustomElements(win)) {\n    // If ctor is constructable without new, it's a function. That means it was\n    // compiled down, and we need to do the minimal polyfill because all you\n    // cannot extend HTMLElement without native classes.\n    try {\n      const {Object, Reflect} = win;\n\n      // \"Construct\" ctor using ES5 idioms\n      const instance = Object.create(ctor.prototype);\n      ctor.call(instance);\n\n      // If that succeeded, we're in a transpiled environment\n      // Let's find out if we can wrap HTMLElement and avoid a full patch.\n      installWrapper = !!(Reflect && Reflect.construct);\n    } catch (e) {\n\n      // The ctor threw when we constructed is via ES5, so it's a real class.\n      // We're ok to not install the polyfill.\n      install = false;\n    }\n  }\n\n  if (installWrapper) {\n    wrapHTMLElement(win);\n  } else if (install) {\n    polyfill(win);\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * Polyfill for `document.contains()` method. Notice that according to spec\n * `document.contains` is inclusionary.\n * See https://developer.mozilla.org/en-US/docs/Web/API/Node/contains\n * @param {?Node} node\n * @return {boolean}\n * @this {Node}\n */\nfunction documentContainsPolyfill(node) {\n  // Per spec, \"contains\" method is inclusionary\n  // i.e. `node.contains(node) == true`. However, we still need to test\n  // equality to the document itself.\n  return node == this || this.documentElement.contains(node);\n}\n\n\n/**\n * Polyfills `HTMLDocument.contains` API.\n * @param {!Window} win\n */\nexport function install(win) {\n  // HTMLDocument is undefined in Internet Explorer 10, but it has Document,\n  // so we use that as a fallback.\n  const documentClass = win.HTMLDocument || win.Document;\n  if (!documentClass.prototype.contains) {\n    win.Object.defineProperty(documentClass.prototype, 'contains', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: documentContainsPolyfill,\n    });\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * Polyfill for `DOMTokenList.prototype.toggle(token, opt_force)` method. This\n * is specially important because IE does not support `opt_force` attribute. See\n * https://goo.gl/hgKNYY for details.\n * @param {string} token\n * @param {boolean=} opt_force\n * @this {DOMTokenList}\n * @return {boolean}\n */\nfunction domTokenListTogglePolyfill(token, opt_force) {\n  const remove = opt_force === undefined ? this.contains(token) : !opt_force;\n  if (remove) {\n    this.remove(token);\n    return false;\n  } else {\n    this.add(token);\n    return true;\n  }\n}\n\n\n/**\n * Polyfills `DOMTokenList.prototype.toggle` API in IE.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (isIe(win) && win.DOMTokenList) {\n    win.Object.defineProperty(win.DOMTokenList.prototype, 'toggle', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: domTokenListTogglePolyfill,\n    });\n  }\n}\n\n\n/**\n * Whether the current browser is a IE browser.\n * @param {!Window} win\n * @return {boolean}\n */\nfunction isIe(win) {\n  return /Trident|MSIE|IEMobile/i.test(win.navigator.userAgent);\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Parses the number x and returns its sign. For positive x returns 1, for\n * negative, -1. For 0 and -0, returns 0 and -0 respectively. For any number\n * that parses to NaN, returns NaN.\n *\n * @param {number} x\n * @return {number}\n */\nexport function sign(x) {\n  x = Number(x);\n\n  // If x is 0, -0, or NaN, return it.\n  if (!x) {\n    return x;\n  }\n\n  return x > 0 ? 1 : -1;\n}\n\n\n/**\n * Sets the Math.sign polyfill if it does not exist.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (!win.Math.sign) {\n    win.Object.defineProperty(win.Math, 'sign', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: sign,\n    });\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst {hasOwnProperty} = Object.prototype;\n\n/**\n * Copies values of all enumerable own properties from one or more source\n * objects (provided as extended arguments to the function) to a target object.\n *\n * @param {!Object} target\n * @param {...Object} var_args\n * @return {!Object}\n */\nexport function assign(target, var_args) {\n  if (target == null) {\n    throw new TypeError('Cannot convert undefined or null to object');\n  }\n\n  const output = Object(target);\n  for (let i = 1; i < arguments.length; i++) {\n    const source = arguments[i];\n    if (source != null) {\n      for (const key in source) {\n        if (hasOwnProperty.call(source, key)) {\n          output[key] = source[key];\n        }\n      }\n    }\n  }\n  return output;\n}\n\n\n/**\n * Sets the Object.assign polyfill if it does not exist.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (!win.Object.assign) {\n    win.Object.defineProperty(win.Object, 'assign', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: assign,\n    });\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nimport * as Promise from 'promise-pjs/promise';\n\n/**\n * Sets the Promise polyfill if it does not exist.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (!win.Promise) {\n    win.Promise = /** @type {?} */ (Promise);\n    // In babel the * export is an Object with a default property.\n    // In closure compiler it is the Promise function itself.\n    if (Promise.default) {\n      win.Promise = Promise.default;\n    }\n    // We copy the individual static methods, because closure\n    // compiler flattens the polyfill namespace.\n    win.Promise.resolve = Promise.resolve;\n    win.Promise.reject = Promise.reject;\n    win.Promise.all = Promise.all;\n    win.Promise.race = Promise.race;\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Services} from './services';\nimport {dev} from './log';\nimport {getServicePromise} from './service';\n\n/**\n * A map of services that delay rendering. The key is the name of the service\n * and the value is a DOM query which is used to check if the service is needed\n * in the current document.\n * Do not add a service unless absolutely necessary.\n *\n * \\   \\  /  \\  /   / /   \\     |   _  \\     |  \\ |  | |  | |  \\ |  |  / _____|\n *  \\   \\/    \\/   / /  ^  \\    |  |_)  |    |   \\|  | |  | |   \\|  | |  |  __\n *   \\            / /  /_\\  \\   |      /     |  . `  | |  | |  . `  | |  | |_ |\n *    \\    /\\    / /  _____  \\  |  |\\  \\----.|  |\\   | |  | |  |\\   | |  |__| |\n *     \\__/  \\__/ /__/     \\__\\ | _| `._____||__| \\__| |__| |__| \\__|  \\______|\n *\n * The equivalent of this list is used for server-side rendering (SSR) and any\n * changes made to it must be made in coordination with caches that implement\n * SSR. For more information on SSR see bit.ly/amp-ssr.\n *\n * @const {!Object<string, string>}\n */\nconst SERVICES = {\n  'amp-dynamic-css-classes': '[custom-element=amp-dynamic-css-classes]',\n  'variant': 'amp-experiment',\n  'amp-story': 'amp-story[standalone]',\n};\n\n/**\n * Maximum milliseconds to wait for all extensions to load before erroring.\n * @const\n */\nconst LOAD_TIMEOUT = 3000;\n\n/**\n * Detects any render delaying services that are required on the page, and\n * returns a promise with a timeout.\n * @param {!Window} win\n * @return {!Promise<!Array<*>>} resolves to an Array that has the same length\n *     as the detected render delaying services\n */\nexport function waitForServices(win) {\n  const promises = includedServices(win).map(service => {\n    return Services.timerFor(win).timeoutPromise(\n        LOAD_TIMEOUT,\n        getServicePromise(win, service),\n        `Render timeout waiting for service ${service} to be ready.`\n    );\n  });\n  return Promise.all(promises);\n}\n\n/**\n * Returns true if the page has a render delaying service.\n * @param {!Window} win\n * @return {boolean}\n */\nexport function hasRenderDelayingServices(win) {\n  return includedServices(win).length > 0;\n}\n\n/**\n * Detects which, if any, render-delaying extensions are included on the page.\n * @param {!Window} win\n * @return {!Array<string>}\n */\nexport function includedServices(win) {\n  /** @const {!Document} */\n  const doc = win.document;\n  dev().assert(doc.body);\n\n  return Object.keys(SERVICES).filter(service => {\n    return doc.querySelector(SERVICES[service]);\n  });\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Registration and getter functions for AMP services.\n *\n * Invariant: Service getters never return null for registered services.\n */\n\n// src/polyfills.js must be the first import.\nimport './polyfills'; // eslint-disable-line sort-imports-es6-autofix/sort-imports-es6\n\nimport {Deferred} from './utils/promise';\nimport {dev} from './log';\nimport {toWin} from './types';\n\n\n/**\n * Holds info about a service.\n * - obj: Actual service implementation when available.\n * - promise: Promise for the obj.\n * - resolve: Function to resolve the promise with the object.\n * - context: Argument for ctor, either a window or an ampdoc.\n * - ctor: Function that constructs and returns the service.\n * @typedef {{\n *   obj: (?Object),\n *   promise: (?Promise),\n *   resolve: (?function(!Object)),\n *   context: (?Window|?./service/ampdoc-impl.AmpDoc),\n *   ctor: (?function(new:Object, !Window)|\n *          ?function(new:Object, !./service/ampdoc-impl.AmpDoc)),\n * }}\n */\nlet ServiceHolderDef;\n\n\n/**\n * This interface provides a `dispose` method that will be called by\n * runtime when a service needs to be disposed of.\n * @interface\n */\nexport class Disposable {\n\n  /**\n   * Instructs the service to release any resources it might be holding. Can\n   * be called only once in the lifecycle of a service.\n   */\n  dispose() {}\n}\n\n\n/**\n * This interface provides a `adoptEmbedWindow` method that will be called by\n * runtime for a new embed window.\n * @interface\n */\nexport class EmbeddableService {\n\n  /**\n   * Instructs the service to adopt the embed window and add any necessary\n   * listeners and resources.\n   * @param {!Window} unusedEmbedWin\n   */\n  adoptEmbedWindow(unusedEmbedWin) {}\n}\n\n\n/**\n * Returns a service with the given id. Assumes that it has been registered\n * already.\n * @param {!Window} win\n * @param {string} id\n * @param {boolean=} opt_fallbackToTopWin\n * @return {Object} The service.\n */\nexport function getExistingServiceInEmbedScope(win, id, opt_fallbackToTopWin) {\n  // First, try to resolve via local (embed) window.\n  const local = getLocalExistingServiceForEmbedWinOrNull(win, id);\n  if (local) {\n    return local;\n  }\n  if (opt_fallbackToTopWin) {\n    return getService(win, id);\n  }\n  return null;\n}\n\n/**\n * Returns a service with the given id. Assumes that it has been constructed\n * already.\n *\n * Unlike most service getters, passing `Node` is necessary for some FIE-scope\n * services since sometimes we only have the FIE Document for context.\n *\n * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n * @param {string} id\n * @param {boolean=} opt_fallbackToTopWin\n * @return {Object} The service.\n */\nexport function getExistingServiceForDocInEmbedScope(\n  nodeOrDoc, id, opt_fallbackToTopWin) {\n  // First, try to resolve via local (embed) window.\n  if (nodeOrDoc.nodeType) {\n    // If a node is passed, try to resolve via this node.\n    const win = toWin(/** @type {!Document} */ (\n      nodeOrDoc.ownerDocument || nodeOrDoc).defaultView);\n    const local = getLocalExistingServiceForEmbedWinOrNull(win, id);\n    if (local) {\n      return local;\n    }\n  }\n  // If an ampdoc is passed or fallback is allowed, continue resolving.\n  if (!nodeOrDoc.nodeType || opt_fallbackToTopWin) {\n    return getServiceForDocDeprecated(nodeOrDoc, id);\n  }\n  return null;\n}\n\n/**\n * Installs a service override on amp-doc level.\n * @param {!Window} embedWin\n * @param {string} id\n * @param {!Object} service The service.\n */\nexport function installServiceInEmbedScope(embedWin, id, service) {\n  const topWin = getTopWindow(embedWin);\n  dev().assert(embedWin != topWin,\n      'Service override can only be installed in embed window: %s', id);\n  dev().assert(!getLocalExistingServiceForEmbedWinOrNull(embedWin, id),\n      'Service override has already been installed: %s', id);\n  registerServiceInternal(embedWin, embedWin, id, () => service);\n  getServiceInternal(embedWin, id); // Force service to build.\n}\n\n/**\n * @param {!Window} embedWin\n * @param {string} id\n * @return {?Object}\n */\nfunction getLocalExistingServiceForEmbedWinOrNull(embedWin, id) {\n  // Note that this method currently only resolves against the given window.\n  // It does not try to go all the way up the parent window chain. We can change\n  // this in the future, but for now this gives us a better performance.\n  const topWin = getTopWindow(embedWin);\n  if (embedWin != topWin && isServiceRegistered(embedWin, id)) {\n    return getServiceInternal(embedWin, id);\n  } else {\n    return null;\n  }\n}\n\n/**\n * Registers a service given a class to be used as implementation.\n * @param {!Window} win\n * @param {string} id of the service.\n * @param {function(new:Object, !Window)} constructor\n * @param {boolean=} opt_instantiate Whether to immediately create the service\n */\nexport function registerServiceBuilder(win,\n  id,\n  constructor,\n  opt_instantiate) {\n  win = getTopWindow(win);\n  registerServiceInternal(win, win, id, constructor);\n  if (opt_instantiate) {\n    getServiceInternal(win, id);\n  }\n}\n\n\n/**\n * Returns a service and registers it given a class to be used as\n * implementation.\n * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n * @param {string} id of the service.\n * @param {function(new:Object, !./service/ampdoc-impl.AmpDoc)} constructor\n * @param {boolean=} opt_instantiate Whether to immediately create the service\n */\nexport function registerServiceBuilderForDoc(nodeOrDoc,\n  id,\n  constructor,\n  opt_instantiate) {\n  const ampdoc = getAmpdoc(nodeOrDoc);\n  const holder = getAmpdocServiceHolder(ampdoc);\n  registerServiceInternal(holder, ampdoc, id, constructor);\n  if (opt_instantiate) {\n    getServiceInternal(holder, id);\n  }\n}\n\n\n/**\n * Returns a service for the given id and window (a per-window singleton). Users\n * should typically wrap this as a special purpose function (e.g.\n * `Services.vsyncFor(win)`) for type safety and because the factory should not\n * be passed around.\n * @param {!Window} win\n * @param {string} id of the service.\n * @template T\n * @return {T}\n */\nexport function getService(win, id) {\n  win = getTopWindow(win);\n  return getServiceInternal(win, id);\n}\n\n\n/**\n * Returns a promise for a service for the given id and window. Also expects an\n * element that has the actual implementation. The promise resolves when the\n * implementation loaded. Users should typically wrap this as a special purpose\n * function (e.g. `Services.vsyncFor(win)`) for type safety and because the\n * factory should not be passed around.\n * @param {!Window} win\n * @param {string} id of the service.\n * @return {!Promise<!Object>}\n */\nexport function getServicePromise(win, id) {\n  return getServicePromiseInternal(win, id);\n}\n\n\n/**\n * Returns a service or null with the given id.\n * @param {!Window} win\n * @param {string} id\n * @return {?Object} The service.\n */\nexport function getExistingServiceOrNull(win, id) {\n  win = getTopWindow(win);\n  if (isServiceRegistered(win, id)) {\n    return getServiceInternal(win, id);\n  } else {\n    return null;\n  }\n}\n\n\n/**\n * Like getServicePromise but returns null if the service was never registered.\n * @param {!Window} win\n * @param {string} id\n * @return {?Promise<!Object>}\n */\nexport function getServicePromiseOrNull(win, id) {\n  return getServicePromiseOrNullInternal(win, id);\n}\n\n\n/**\n * Returns a service for the given id and ampdoc (a per-ampdoc singleton).\n * Expects service `id` to be registered.\n * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n * @param {string} id\n * @return {T}\n * @template T\n */\nexport function getServiceForDoc(elementOrAmpDoc, id) {\n  const ampdoc = getAmpdoc(elementOrAmpDoc);\n  const holder = getAmpdocServiceHolder(ampdoc);\n  return getServiceInternal(holder, id);\n}\n\n\n/**\n * tl;dr -- Use getServiceForDoc() instead of this.\n *\n * Privileged variant of getServiceForDoc() that accepts non-element params,\n * e.g. window.document. This is currently necessary for doc-level services\n * used in startup, e.g. Chunks. Eventually we want to remove this function\n * and have callers find the appropriate AmpDoc and use getServiceForDoc().\n *\n * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n * @param {string} id\n * @return {T}\n * @template T\n */\nexport function getServiceForDocDeprecated(nodeOrDoc, id) {\n  const ampdoc = getAmpdoc(nodeOrDoc);\n  const holder = getAmpdocServiceHolder(ampdoc);\n  return getServiceInternal(holder, id);\n}\n\n\n/**\n * Returns a promise for a service for the given id and ampdoc. Also expects\n * a service that has the actual implementation. The promise resolves when\n * the implementation loaded.\n * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n * @param {string} id\n * @return {!Promise<!Object>}\n */\nexport function getServicePromiseForDoc(elementOrAmpDoc, id) {\n  return getServicePromiseInternal(\n      getAmpdocServiceHolder(elementOrAmpDoc), id);\n}\n\n\n/**\n * Like getServicePromiseForDoc but returns null if the service was never\n * registered for this ampdoc.\n * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n * @param {string} id\n * @return {?Promise<!Object>}\n */\nexport function getServicePromiseOrNullForDoc(elementOrAmpDoc, id) {\n  return getServicePromiseOrNullInternal(\n      getAmpdocServiceHolder(elementOrAmpDoc), id);\n}\n\n/**\n * Set the parent and top windows on a child window (friendly iframe).\n * @param {!Window} win\n * @param {!Window} parentWin\n */\nexport function setParentWindow(win, parentWin) {\n  win.__AMP_PARENT = parentWin;\n  win.__AMP_TOP = getTopWindow(parentWin);\n}\n\n\n/**\n * Returns the parent window for a child window (friendly iframe).\n * @param {!Window} win\n * @return {!Window}\n */\nexport function getParentWindow(win) {\n  return win.__AMP_PARENT || win;\n}\n\n\n/**\n * Returns the top window where AMP Runtime is installed for a child window\n * (friendly iframe).\n * @param {!Window} win\n * @return {!Window}\n */\nexport function getTopWindow(win) {\n  return win.__AMP_TOP || win;\n}\n\n\n/**\n * Returns the parent \"friendly\" iframe if the node belongs to a child window.\n * @param {!Node} node\n * @param {!Window} topWin\n * @return {?HTMLIFrameElement}\n */\nexport function getParentWindowFrameElement(node, topWin) {\n  const childWin = (node.ownerDocument || node).defaultView;\n  if (childWin && childWin != topWin && getTopWindow(childWin) == topWin) {\n    try {\n      return /** @type {?HTMLIFrameElement} */ (childWin.frameElement);\n    } catch (e) {\n      // Ignore the error.\n    }\n  }\n  return null;\n}\n\n\n/**\n * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n * @return {!./service/ampdoc-impl.AmpDoc}\n */\nexport function getAmpdoc(nodeOrDoc) {\n  if (nodeOrDoc.nodeType) {\n    const win = toWin(/** @type {!Document} */ (\n      nodeOrDoc.ownerDocument || nodeOrDoc).defaultView);\n    return getAmpdocService(win).getAmpDoc(/** @type {!Node} */ (nodeOrDoc));\n  }\n  return /** @type {!./service/ampdoc-impl.AmpDoc} */ (nodeOrDoc);\n}\n\n\n/**\n * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n * @return {!./service/ampdoc-impl.AmpDoc|!Window}\n */\nfunction getAmpdocServiceHolder(nodeOrDoc) {\n  const ampdoc = getAmpdoc(nodeOrDoc);\n  return ampdoc.isSingleDoc() ? ampdoc.win : ampdoc;\n}\n\n\n/**\n * This is essentially a duplicate of `ampdoc.js`, but necessary to avoid\n * circular dependencies.\n * @param {!Window} win\n * @return {!./service/ampdoc-impl.AmpDocService}\n */\nfunction getAmpdocService(win) {\n  return /** @type {!./service/ampdoc-impl.AmpDocService} */ (\n    getService(win, 'ampdoc'));\n}\n\n\n/**\n * Get service `id` from `holder`. Assumes the service\n * has already been registered.\n * @param {!Object} holder Object holding the service instance.\n * @param {string} id of the service.\n * @return {Object}\n * @template T\n */\nfunction getServiceInternal(holder, id) {\n  dev().assert(isServiceRegistered(holder, id),\n      `Expected service ${id} to be registered`);\n  const services = getServices(holder);\n  const s = services[id];\n  if (!s.obj) {\n    dev().assert(s.ctor, `Service ${id} registered without ctor nor impl.`);\n    dev().assert(s.context, `Service ${id} registered without context.`);\n    s.obj = new s.ctor(s.context);\n    dev().assert(s.obj, `Service ${id} constructed to null.`);\n    s.ctor = null;\n    s.context = null;\n    // The service may have been requested already, in which case we have a\n    // pending promise we need to fulfill.\n    if (s.resolve) {\n      s.resolve(s.obj);\n    }\n  }\n  return s.obj;\n}\n\n/**\n * @param {!Object} holder Object holding the service instance.\n * @param {!Window|!./service/ampdoc-impl.AmpDoc} context Win or AmpDoc.\n * @param {string} id of the service.\n * @param {?function(new:Object, !Window)|?function(new:Object, !./service/ampdoc-impl.AmpDoc)} ctor Constructor function to new the service. Called with context.\n */\nfunction registerServiceInternal(holder, context, id, ctor) {\n  const services = getServices(holder);\n  let s = services[id];\n\n  if (!s) {\n    s = services[id] = {\n      obj: null,\n      promise: null,\n      resolve: null,\n      context: null,\n      ctor: null,\n    };\n  }\n\n  if (s.ctor || s.obj) {\n    // Service already registered.\n    return;\n  }\n\n  s.ctor = ctor;\n  s.context = context;\n\n  // The service may have been requested already, in which case there is a\n  // pending promise that needs to fulfilled.\n  if (s.resolve) {\n    // getServiceInternal will resolve the promise.\n    getServiceInternal(holder, id);\n  }\n}\n\n/**\n * @param {!Object} holder\n * @param {string} id of the service.\n * @return {!Promise<!Object>}\n */\nfunction getServicePromiseInternal(holder, id) {\n  const cached = getServicePromiseOrNullInternal(holder, id);\n  if (cached) {\n    return cached;\n  }\n  // Service is not registered.\n\n  // TODO(@cramforce): Add a check that if the element is eventually registered\n  // that the service is actually provided and this promise resolves.\n  const deferred = new Deferred();\n  const {promise, resolve} = deferred;\n\n  const services = getServices(holder);\n  services[id] = {\n    obj: null,\n    promise,\n    resolve,\n    context: null,\n    ctor: null,\n  };\n  return promise;\n}\n\n\n/**\n * Returns a promise for service `id` if the service has been registered\n * on `holder`.\n * @param {!Object} holder\n * @param {string} id of the service.\n * @return {?Promise<!Object>}\n */\nfunction getServicePromiseOrNullInternal(holder, id) {\n  const services = getServices(holder);\n  const s = services[id];\n  if (s) {\n    if (s.promise) {\n      return s.promise;\n    } else {\n      // Instantiate service if not already instantiated.\n      getServiceInternal(holder, id);\n      return s.promise = Promise.resolve(/** @type {!Object} */ (s.obj));\n    }\n  }\n  return null;\n}\n\n\n/**\n * Returns the object that holds the services registered in a holder.\n * @param {!Object} holder\n * @return {!Object<string,!ServiceHolderDef>}\n */\nfunction getServices(holder) {\n  let {services} = holder;\n  if (!services) {\n    services = holder.services = {};\n  }\n  return services;\n}\n\n\n/**\n * Whether the specified service implements `Disposable` interface.\n * @param {!Object} service\n * @return {boolean}\n */\nexport function isDisposable(service) {\n  return typeof service.dispose == 'function';\n}\n\n\n/**\n * Asserts that the specified service implements `Disposable` interface and\n * typecasts the instance to `Disposable`.\n * @param {!Object} service\n * @return {!Disposable}\n */\nexport function assertDisposable(service) {\n  dev().assert(isDisposable(service), 'required to implement Disposable');\n  return /** @type {!Disposable} */ (service);\n}\n\n\n/**\n * Disposes all disposable (implements `Disposable` interface) services in\n * ampdoc scope.\n * @param {!./service/ampdoc-impl.AmpDoc} ampdoc\n */\nexport function disposeServicesForDoc(ampdoc) {\n  disposeServicesInternal(ampdoc);\n}\n\n\n/**\n * Disposes all disposable (implements `Disposable` interface) services in\n * embed scope.\n * @param {!Window} embedWin\n */\nexport function disposeServicesForEmbed(embedWin) {\n  disposeServicesInternal(embedWin);\n}\n\n\n/**\n * @param {!Object} holder Object holding the service instances.\n */\nfunction disposeServicesInternal(holder) {\n  // TODO(dvoytenko): Consider marking holder as destroyed for later-arriving\n  // service to be canceled automatically.\n  const services = getServices(holder);\n  for (const id in services) {\n    if (!Object.prototype.hasOwnProperty.call(services, id)) {\n      continue;\n    }\n    const serviceHolder = services[id];\n    if (serviceHolder.obj) {\n      disposeServiceInternal(id, serviceHolder.obj);\n    } else if (serviceHolder.promise) {\n      serviceHolder.promise.then(\n          instance => disposeServiceInternal(id, instance));\n    }\n  }\n}\n\n\n/**\n * @param {string} id\n * @param {!Object} service\n */\nfunction disposeServiceInternal(id, service) {\n  if (!isDisposable(service)) {\n    return;\n  }\n  try {\n    assertDisposable(service).dispose();\n  } catch (e) {\n    // Ensure that a failure to dispose a service does not disrupt other\n    // services.\n    dev().error('SERVICE', 'failed to dispose service', id, e);\n  }\n}\n\n\n/**\n * Whether the specified service implements `EmbeddableService` interface.\n * @param {!Object} service\n * @return {boolean}\n */\nexport function isEmbeddable(service) {\n  return typeof service.adoptEmbedWindow == 'function';\n}\n\n\n/**\n * Adopts an embeddable (implements `EmbeddableService` interface) service\n * in embed scope.\n * @param {!Window} embedWin\n * @param {string} serviceId\n */\nexport function adoptServiceForEmbed(embedWin, serviceId) {\n  const adopted = adoptServiceForEmbedIfEmbeddable(embedWin, serviceId);\n  dev().assert(adopted, `Service ${serviceId} not found on parent ` +\n      'or doesn\\'t implement EmbeddableService.');\n}\n\n\n/**\n * Adopts an embeddable (implements `EmbeddableService` interface) service\n * in embed scope.\n * @param {!Window} embedWin\n * @param {string} serviceId\n * @return {boolean}\n */\nexport function adoptServiceForEmbedIfEmbeddable(embedWin, serviceId) {\n  const frameElement = /** @type {!Node} */ (dev().assert(\n      embedWin.frameElement,\n      'frameElement not found for embed'));\n  const ampdoc = getAmpdoc(frameElement);\n  const holder = getAmpdocServiceHolder(ampdoc);\n  if (!isServiceRegistered(holder, serviceId)) {\n    return false;\n  }\n  const service = getServiceForDocDeprecated(frameElement, serviceId);\n  if (!isEmbeddable(service)) {\n    return false;\n  }\n  service.adoptEmbedWindow(embedWin);\n  return true;\n}\n\n\n/**\n * Resets a single service, so it gets recreated on next getService invocation.\n * @param {!Object} holder\n * @param {string} id of the service.\n */\nexport function resetServiceForTesting(holder, id) {\n  if (holder.services) {\n    holder.services[id] = null;\n  }\n}\n\n/**\n * @param {!Object} holder Object holding the service instance.\n * @param {string} id of the service.\n * @return {boolean}\n */\nfunction isServiceRegistered(holder, id) {\n  const service = holder.services && holder.services[id];\n  // All registered services must have an implementation or a constructor.\n  return !!(service && (service.ctor || service.obj));\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  getAmpdoc,\n  getExistingServiceForDocInEmbedScope,\n  getExistingServiceOrNull,\n  getService,\n  getServiceForDoc,\n  getServiceForDocDeprecated,\n  getServicePromiseForDoc,\n} from './service';\nimport {\n  getElementServiceForDoc,\n  getElementServiceIfAvailable,\n  getElementServiceIfAvailableForDoc,\n  getElementServiceIfAvailableForDocInEmbedScope,\n} from './element-service';\n\n/** @typedef {!../extensions/amp-subscriptions/0.1/amp-subscriptions.SubscriptionService} */\nexport let SubscriptionService;\n\nexport class Services {\n  /**\n   * Hint: Add extensions folder path to compile.js with\n   * warnings cannot find modules.\n   */\n\n  /**\n   * Returns a promise for the Access service.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!../extensions/amp-access/0.1/amp-access.AccessService>}\n   */\n  static accessServiceForDoc(elementOrAmpDoc) {\n    return (/** @type {!Promise<!../extensions/amp-access/0.1/amp-access.AccessService>} */ (\n      getElementServiceForDoc(elementOrAmpDoc, 'access', 'amp-access')));\n  }\n\n  /**\n   * Returns a promise for the Access service or a promise for null if the\n   * service is not available on the current page.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<?../extensions/amp-access/0.1/amp-access.AccessService>}\n   */\n  static accessServiceForDocOrNull(elementOrAmpDoc) {\n    return (/** @type {!Promise<?../extensions/amp-access/0.1/amp-access.AccessService>} */ (\n      getElementServiceIfAvailableForDoc(elementOrAmpDoc, 'access',\n          'amp-access')));\n  }\n\n  /**\n   * Returns a promise for the Subscriptions service.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!SubscriptionService>}\n   */\n  static subscriptionsServiceForDoc(elementOrAmpDoc) {\n    return (/** @type {!Promise<!SubscriptionService>} */ (\n      getElementServiceForDoc(elementOrAmpDoc, 'subscriptions',\n          'amp-subscriptions')));\n  }\n\n  /**\n   * Returns a promise for the Subscriptions service.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<?SubscriptionService>}\n   */\n  static subscriptionsServiceForDocOrNull(elementOrAmpDoc) {\n    return (/** @type {!Promise<?SubscriptionService>} */ (\n      getElementServiceIfAvailableForDoc(elementOrAmpDoc, 'subscriptions',\n          'amp-subscriptions')));\n  }\n\n  /**\n   * Unlike most service getters, passing `Node` is necessary for some FIE-scope\n   * services since sometimes we only have the FIE Document for context.\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/action-impl.ActionService}\n   */\n  static actionServiceForDoc(nodeOrDoc) {\n    return /** @type {!./service/action-impl.ActionService} */ (\n      getExistingServiceForDocInEmbedScope(\n          nodeOrDoc, 'action', /* opt_fallbackToTopWin */ true));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!Activity>}\n   */\n  static activityForDoc(elementOrAmpDoc) {\n    return /** @type {!Promise<!Activity>} */ (\n      getElementServiceForDoc(elementOrAmpDoc, 'activity', 'amp-analytics'));\n  }\n\n  /**\n   * Returns the global instance of the `AmpDocService` service that can be\n   * used to resolve an ampdoc for any node: either in the single-doc or\n   * shadow-doc environment.\n   * @param {!Window} window\n   * @return {!./service/ampdoc-impl.AmpDocService}\n   */\n  static ampdocServiceFor(window) {\n    return /** @type {!./service/ampdoc-impl.AmpDocService} */ (\n      getService(window, 'ampdoc'));\n  }\n\n  /**\n   * Returns the AmpDoc for the specified context node.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!./service/ampdoc-impl.AmpDoc}\n   */\n  static ampdoc(elementOrAmpDoc) {\n    return getAmpdoc(elementOrAmpDoc);\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @param {boolean=} loadAnalytics\n   * @return {!Promise<!../extensions/amp-analytics/0.1/instrumentation.InstrumentationService>}\n   */\n  static analyticsForDoc(elementOrAmpDoc, loadAnalytics = false) {\n    if (loadAnalytics) {\n      // Get Extensions service and force load analytics extension.\n      const ampdoc = getAmpdoc(elementOrAmpDoc);\n      Services.extensionsFor(ampdoc.win)./*OK*/installExtensionForDoc(\n          ampdoc, 'amp-analytics');\n    }\n    return /** @type {!Promise<!../extensions/amp-analytics/0.1/instrumentation.InstrumentationService>} */ (\n      getElementServiceForDoc(elementOrAmpDoc, 'amp-analytics-instrumentation',\n          'amp-analytics'));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<?../extensions/amp-analytics/0.1/instrumentation.InstrumentationService>}\n   */\n  static analyticsForDocOrNull(elementOrAmpDoc) {\n    return /** @type {!Promise<?../extensions/amp-analytics/0.1/instrumentation.InstrumentationService>} */ (\n      getElementServiceIfAvailableForDoc(elementOrAmpDoc,\n          'amp-analytics-instrumentation', 'amp-analytics'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/batched-xhr-impl.BatchedXhr}\n   */\n  static batchedXhrFor(window) {\n    return /** @type {!./service/batched-xhr-impl.BatchedXhr} */ (\n      getService(window, 'batched-xhr'));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<?../extensions/amp-bind/0.1/bind-impl.Bind>}\n   */\n  static bindForDocOrNull(elementOrAmpDoc) {\n    return /** @type {!Promise<?../extensions/amp-bind/0.1/bind-impl.Bind>} */ (\n      getElementServiceIfAvailableForDocInEmbedScope(\n          elementOrAmpDoc, 'bind', 'amp-bind'));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!./service/cid-impl.Cid>}\n   */\n  static cidForDoc(elementOrAmpDoc) {\n    return /** @type {!Promise<!./service/cid-impl.Cid>} */ (\n      getServicePromiseForDoc(elementOrAmpDoc, 'cid'));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!./service/navigation.Navigation}\n   */\n  static navigationForDoc(elementOrAmpDoc) {\n    return /** @type {!./service/navigation.Navigation} */ (\n      getServiceForDoc(elementOrAmpDoc, 'navigation'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/crypto-impl.Crypto}\n   */\n  static cryptoFor(window) {\n    return (/** @type {!./service/crypto-impl.Crypto} */ (\n      getService(window, 'crypto')));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!./service/document-info-impl.DocumentInfoDef} Info about the doc\n   */\n  static documentInfoForDoc(elementOrAmpDoc) {\n    return /** @type {!./service/document-info-impl.DocInfo} */ (\n      getServiceForDoc(elementOrAmpDoc, 'documentInfo')).get();\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/document-state.DocumentState}\n   */\n  static documentStateFor(window) {\n    return getService(window, 'documentState');\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/extensions-impl.Extensions}\n   */\n  static extensionsFor(window) {\n    return /** @type {!./service/extensions-impl.Extensions} */ (\n      getService(window, 'extensions'));\n  }\n\n  /**\n   * Returns service implemented in service/history-impl.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!./service/history-impl.History}\n   */\n  static historyForDoc(elementOrAmpDoc) {\n    return /** @type {!./service/history-impl.History} */ (\n      getServiceForDoc(elementOrAmpDoc, 'history'));\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {!./input.Input}\n   */\n  static inputFor(win) {\n    return getService(win, 'input');\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!./service/layers-impl.LayoutLayers}\n   */\n  static layersForDoc(elementOrAmpDoc) {\n    return /** @type {!./service/layers-impl.LayoutLayers} */ (\n      getServiceForDoc(elementOrAmpDoc, 'layers'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/performance-impl.Performance}\n   */\n  static performanceFor(window) {\n    return /** @type {!./service/performance-impl.Performance}*/ (\n      getService(window, 'performance'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/performance-impl.Performance}\n   */\n  static performanceForOrNull(window) {\n    return /** @type {!./service/performance-impl.Performance}*/ (\n      getExistingServiceOrNull(window, 'performance'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/platform-impl.Platform}\n   */\n  static platformFor(window) {\n    return /** @type {!./service/platform-impl.Platform} */ (\n      getService(window, 'platform'));\n  }\n\n  /**\n   * Uses getServiceForDocDeprecated() since Resources is a startup service.\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/resources-impl.Resources}\n   */\n  static resourcesForDoc(nodeOrDoc) {\n    return /** @type {!./service/resources-impl.Resources} */ (\n      getServiceForDocDeprecated(nodeOrDoc, 'resources'));\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {?Promise<?{incomingFragment: string, outgoingFragment: string}>}\n   */\n  static shareTrackingForOrNull(win) {\n    return (/** @type {!Promise<?{incomingFragment: string, outgoingFragment: string}>} */ (\n      getElementServiceIfAvailable(win, 'share-tracking',\n          'amp-share-tracking', true)));\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {?Promise<?../extensions/amp-story/1.0/variable-service.StoryVariableDef>}\n   */\n  static storyVariableServiceForOrNull(win) {\n    return (\n    /** @type {!Promise<?../extensions/amp-story/1.0/variable-service.StoryVariableDef>} */\n      (getElementServiceIfAvailable(win, 'story-variable', 'amp-story',\n          true)));\n  }\n\n  /**\n   * Version of the story store service depends on which version of amp-story\n   * the publisher is loading. They all have the same implementation.\n   * @param {!Window} win\n   * @return {?Promise<?../extensions/amp-story/1.0/amp-story-store-service.AmpStoryStoreService|?../extensions/amp-story/0.1/amp-story-store-service.AmpStoryStoreService>}\n   */\n  static storyStoreServiceForOrNull(win) {\n    return (\n    /** @type {!Promise<?../extensions/amp-story/1.0/amp-story-store-service.AmpStoryStoreService|?../extensions/amp-story/0.1/amp-story-store-service.AmpStoryStoreService>} */\n      (getElementServiceIfAvailable(win, 'story-store', 'amp-story')));\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {?../extensions/amp-story/1.0/amp-story-store-service.AmpStoryStoreService}\n   */\n  static storyStoreService(win) {\n    return (/** @type {?../extensions/amp-story/1.0/amp-story-store-service.AmpStoryStoreService} */\n      (getExistingServiceOrNull(win, 'story-store')));\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {?../extensions/amp-story/1.0/amp-story-request-service.AmpStoryRequestService}\n   */\n  static storyRequestService(win) {\n    return (/** @type {?../extensions/amp-story/1.0/amp-story-request-service.AmpStoryRequestService} */\n      (getExistingServiceOrNull(win, 'story-request')));\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {!Promise<?../extensions/amp-story/1.0/localization.LocalizationService>}\n   */\n  static localizationServiceForOrNull(win) {\n    return (\n    /** @type {!Promise<?../extensions/amp-story/1.0/localization.LocalizationService>} */\n      (getElementServiceIfAvailable(win, 'localization', 'amp-story', true)));\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {!../extensions/amp-story/1.0/localization.LocalizationService}\n   */\n  static localizationService(win) {\n    return getService(win, 'localization');\n  }\n\n  /**\n   * TODO(#14357): Remove this when amp-story:0.1 is deprecated.\n   * @param {!Window} win\n   * @return {!../extensions/amp-story/0.1/amp-story-store-service.AmpStoryStoreService}\n   */\n  static storyStoreServiceV01(win) {\n    return getService(win, 'story-store');\n  }\n\n  /**\n   * TODO(#14357): Remove this when amp-story:0.1 is deprecated.\n   * @param {!Window} win\n   * @return {!../extensions/amp-story/0.1/amp-story-request-service.AmpStoryRequestService}\n   */\n  static storyRequestServiceV01(win) {\n    return getService(win, 'story-request-v01');\n  }\n\n  /**\n   * TODO(#14357): Remove this when amp-story:0.1 is deprecated.\n   * @param {!Window} win\n   * @return {!Promise<?../extensions/amp-story/0.1/localization.LocalizationService>}\n   */\n  static localizationServiceForOrNullV01(win) {\n    return (\n    /** @type {!Promise<?../extensions/amp-story/0.1/localization.LocalizationService>} */\n      (getElementServiceIfAvailable(win, 'localization-v01', 'amp-story',\n          true)));\n  }\n\n  /**\n   * TODO(#14357): Remove this when amp-story:0.1 is deprecated.\n   * @param {!Window} win\n   * @return {!../extensions/amp-story/0.1/localization.LocalizationService}\n   */\n  static localizationServiceV01(win) {\n    return getService(win, 'localization-v01');\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {?Promise<?../extensions/amp-viewer-integration/0.1/variable-service.ViewerIntegrationVariableDef>}\n   */\n  static viewerIntegrationVariableServiceForOrNull(win) {\n    return (\n    /** @type {!Promise<?../extensions/amp-viewer-integration/0.1/variable-service.ViewerIntegrationVariableDef>} */\n      (getElementServiceIfAvailable(win, 'viewer-integration-variable',\n          'amp-viewer-integration', true)));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!../extensions/amp-animation/0.1/web-animation-service.WebAnimationService>}\n   */\n  static webAnimationServiceFor(elementOrAmpDoc) {\n    return (/** @type {!Promise<!../extensions/amp-animation/0.1/web-animation-service.WebAnimationService>} */\n      (getElementServiceForDoc(\n          elementOrAmpDoc, 'web-animation', 'amp-animation')));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!./service/storage-impl.Storage>}\n   */\n  static storageForDoc(elementOrAmpDoc) {\n    return /** @type {!Promise<!./service/storage-impl.Storage>} */ (\n      getServicePromiseForDoc(elementOrAmpDoc, 'storage'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/template-impl.Templates}\n   */\n  static templatesFor(window) {\n    return /** @type {!./service/template-impl.Templates} */ (\n      getService(window, 'templates'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/timer-impl.Timer}\n   */\n  static timerFor(window) {\n    return /** @type {!./service/timer-impl.Timer} */ (\n      getService(window, 'timer'));\n  }\n\n  /**\n   * Unlike most service getters, passing `Node` is necessary for some FIE-scope\n   * services since sometimes we only have the FIE Document for context.\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/url-replacements-impl.UrlReplacements}\n   */\n  static urlReplacementsForDoc(nodeOrDoc) {\n    return /** @type {!./service/url-replacements-impl.UrlReplacements} */ (\n      getExistingServiceForDocInEmbedScope(\n          nodeOrDoc, 'url-replace', /* opt_fallbackToTopWin */ true));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!../extensions/amp-user-notification/0.1/amp-user-notification.UserNotificationManager>}\n   */\n  static userNotificationManagerForDoc(elementOrAmpDoc) {\n    return (/** @type {!Promise<!../extensions/amp-user-notification/0.1/amp-user-notification.UserNotificationManager>} */\n      (getElementServiceForDoc(elementOrAmpDoc, 'userNotificationManager',\n          'amp-user-notification')));\n  }\n\n  /**\n   * Returns a promise for the consentPolicy Service or a promise for null if\n   * the service is not available on the current page.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<?../extensions/amp-consent/0.1/consent-policy-manager.ConsentPolicyManager>}\n   */\n  static consentPolicyServiceForDocOrNull(elementOrAmpDoc) {\n    return (/** @type {!Promise<?../extensions/amp-consent/0.1/consent-policy-manager.ConsentPolicyManager>} */\n      (getElementServiceIfAvailableForDoc(elementOrAmpDoc,\n          'consentPolicyManager', 'amp-consent')));\n  }\n\n  /**\n   * Returns a promise for the geo service or a promise for null if\n   * the service is not available on the current page.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<?../extensions/amp-geo/0.1/amp-geo.GeoDef>}\n   */\n  static geoForDocOrNull(elementOrAmpDoc) {\n    return /** @type {!Promise<?../extensions/amp-geo/0.1/amp-geo.GeoDef>} */ (\n      getElementServiceIfAvailableForDoc(\n          elementOrAmpDoc, 'geo', 'amp-geo', true));\n  }\n\n  /**\n   * Unlike most service getters, passing `Node` is necessary for some FIE-scope\n   * services since sometimes we only have the FIE Document for context.\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/url-impl.Url}\n   */\n  static urlForDoc(nodeOrDoc) {\n    return /** @type {!./service/url-impl.Url} */ (\n      getExistingServiceForDocInEmbedScope(\n          nodeOrDoc, 'url', /* opt_fallbackToTopWin */ true));\n  }\n\n  /**\n   * Returns a promise for the experiment variants or a promise for null if it\n   * is not available on the current page.\n   * @param {!Window} win\n   * @return {!Promise<?Object<string>>}\n   */\n  static variantForOrNull(win) {\n    return /** @type {!Promise<?Object<string>>} */ (\n      getElementServiceIfAvailable(win, 'variant', 'amp-experiment', true));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!./service/video-service-interface.VideoServiceInterface}\n   */\n  static videoManagerForDoc(elementOrAmpDoc) {\n    return (\n      /** @type {!./service/video-service-interface.VideoServiceInterface} */ (\n        getServiceForDoc(elementOrAmpDoc, 'video-manager')));\n  }\n\n  /**\n   * Uses getServiceForDocDeprecated() since Viewer is a startup service.\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/viewer-impl.Viewer}\n   */\n  static viewerForDoc(nodeOrDoc) {\n    return /** @type {!./service/viewer-impl.Viewer} */ (\n      getServiceForDocDeprecated(nodeOrDoc, 'viewer'));\n  }\n\n  /**\n   * Returns promise for the viewer. This is an unusual case and necessary only\n   * for services that need reference to the viewer before it has been\n   * initialized. Most of the code, however, just should use `viewerForDoc`.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!./service/viewer-impl.Viewer>}\n   */\n  static viewerPromiseForDoc(elementOrAmpDoc) {\n    return /** @type {!Promise<!./service/viewer-impl.Viewer>} */ (\n      getServicePromiseForDoc(elementOrAmpDoc, 'viewer'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/vsync-impl.Vsync}\n   */\n  static vsyncFor(window) {\n    return /** @type {!./service/vsync-impl.Vsync} */ (\n      getService(window, 'vsync'));\n  }\n\n  /**\n   * Uses getServiceForDocDeprecated() since Viewport is a startup service.\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/viewport/viewport-impl.Viewport}\n   */\n  static viewportForDoc(nodeOrDoc) {\n    return /** @type {!./service/viewport/viewport-impl.Viewport} */ (\n      getServiceForDocDeprecated(nodeOrDoc, 'viewport'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/xhr-impl.Xhr}\n   */\n  static xhrFor(window) {\n    return /** @type {!./service/xhr-impl.Xhr} */ (getService(window, 'xhr'));\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @param {string} _match\n * @param {string} character\n * @return {string}\n */\nfunction toUpperCase(_match, character) {\n  return character.toUpperCase();\n}\n\n/**\n * @param {string} match\n * @return {string}\n */\nfunction prependDashAndToLowerCase(match) {\n  return '-' + match.toLowerCase();\n}\n\n/**\n * @param {string} name Attribute name containing dashes.\n * @return {string} Dashes removed and successive character sent to upper case.\n * visibleForTesting\n */\nexport function dashToCamelCase(name) {\n  return name.replace(/-([a-z])/g, toUpperCase);\n}\n\n/**\n * Converts a string that is in camelCase to one that is in dash-case.\n *\n * @param {string} string The string to convert.\n * @return {string} The string in dash-case.\n */\nexport function camelCaseToDash(string) {\n  return string.replace(/(?!^)[A-Z]/g, prependDashAndToLowerCase);\n}\n\n/**\n * @param {string} name Attribute name with dashes\n * @return {string} Dashes replaced by underlines.\n */\nexport function dashToUnderline(name) {\n  return name.replace('-', '_');\n}\n\n/**\n * Polyfill for String.prototype.endsWith.\n * @param {string} string\n * @param {string} suffix\n * @return {boolean}\n */\nexport function endsWith(string, suffix) {\n  const index = string.length - suffix.length;\n  return index >= 0 && string.indexOf(suffix, index) == index;\n}\n\n/**\n * Polyfill for String.prototype.startsWith.\n * @param {string} string\n * @param {string} prefix\n * @return {boolean}\n */\nexport function startsWith(string, prefix) {\n  if (prefix.length > string.length) {\n    return false;\n  }\n  return string.lastIndexOf(prefix, 0) == 0;\n}\n\n/**\n * Expands placeholders in a given template string with values.\n *\n * Placeholders use ${key-name} syntax and are replaced with the value\n * returned from the given getter function.\n *\n * @param {string} template The template string to expand.\n * @param {function(string):*} getter Function used to retrieve a value for a\n *   placeholder. Returns values will be coerced into strings.\n * @param {number=} opt_maxIterations Number of times to expand the template.\n *   Defaults to 1, but should be set to a larger value your placeholder tokens\n *   can be expanded to other placeholder tokens. Take caution with large values\n *   as recursively expanding a string can be exponentially expensive.\n */\nexport function expandTemplate(template, getter, opt_maxIterations) {\n  const maxIterations = opt_maxIterations || 1;\n  for (let i = 0; i < maxIterations; i++) {\n    let matches = 0;\n    template = template.replace(/\\${([^}]*)}/g, (_a, b) => {\n      matches++;\n      return getter(b);\n    });\n    if (!matches) {\n      break;\n    }\n  }\n  return template;\n}\n\n/**\n * Hash function djb2a\n * This is intended to be a simple, fast hashing function using minimal code.\n * It does *not* have good cryptographic properties.\n * @param {string} str\n * @return {string} 32-bit unsigned hash of the string\n */\nexport function stringHash32(str) {\n  const {length} = str;\n  let hash = 5381;\n  for (let i = 0; i < length; i++) {\n    hash = hash * 33 ^ str.charCodeAt(i);\n  }\n  // Convert from 32-bit signed to unsigned.\n  return String(hash >>> 0);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Services} from './services';\nimport {dev, rethrowAsync} from './log';\nimport {insertAfterOrAtStart, waitForBody} from './dom';\nimport {map} from './utils/object';\nimport {setStyles} from './style';\nimport {waitForServices} from './render-delaying-services';\n\nconst TRANSFORMER_PROP = '__AMP_CSS_TR';\nconst STYLE_MAP_PROP = '__AMP_CSS_SM';\nconst bodyVisibleSentinel = '__AMP_BODY_VISIBLE';\n\n\n/**\n * Adds the given css text to the given ampdoc.\n *\n * The style tags will be at the beginning of the head before all author\n * styles. One element can be the main runtime CSS. This is guaranteed\n * to always be the first stylesheet in the doc.\n *\n * @param {!./service/ampdoc-impl.AmpDoc} ampdoc The ampdoc that should get the new styles.\n * @param {string} cssText\n * @param {?function(!Element)|undefined} cb Called when the new styles are available.\n *     Not using a promise, because this is synchronous when possible.\n *     for better performance.\n * @param {boolean=} opt_isRuntimeCss If true, this style tag will be inserted\n *     as the first element in head and all style elements will be positioned\n *     after.\n * @param {string=} opt_ext\n * @return {!Element}\n */\nexport function installStylesForDoc(\n  ampdoc, cssText, cb, opt_isRuntimeCss, opt_ext) {\n  const cssRoot = ampdoc.getHeadNode();\n  const style = insertStyleElement(\n      cssRoot,\n      maybeTransform(cssRoot, cssText),\n      opt_isRuntimeCss || false,\n      opt_ext || null);\n\n  if (cb) {\n    const rootNode = ampdoc.getRootNode();\n    // Styles aren't always available synchronously. E.g. if there is a\n    // pending style download, it will have to finish before the new\n    // style is visible.\n    // For this reason we poll until the style becomes available.\n    // Sync case.\n    if (styleLoaded(rootNode, style)) {\n      cb(style);\n      return style;\n    }\n    // Poll until styles are available.\n    const interval = setInterval(() => {\n      if (styleLoaded(rootNode, style)) {\n        clearInterval(interval);\n        cb(style);\n      }\n    }, 4);\n  }\n  return style;\n}\n\n\n/**\n * Adds the given css text to the given document.\n * TODO(dvoytenko, #10705): Remove this method once FIE/ampdoc migration is\n * done.\n *\n * @param {!Document} doc The document that should get the new styles.\n * @param {string} cssText\n * @param {?function(!Element)|undefined} cb Called when the new styles are\n *     available. Not using a promise, because this is synchronous when\n *     possible. for better performance.\n * @param {boolean=} opt_isRuntimeCss If true, this style tag will be inserted\n *     as the first element in head and all style elements will be positioned\n *     after.\n * @param {string=} opt_ext\n * @return {!Element}\n */\nexport function installStylesLegacy(\n  doc, cssText, cb, opt_isRuntimeCss, opt_ext) {\n  const style = insertStyleElement(\n      dev().assertElement(doc.head),\n      cssText,\n      opt_isRuntimeCss || false,\n      opt_ext || null);\n\n  if (cb) {\n    // Styles aren't always available synchronously. E.g. if there is a\n    // pending style download, it will have to finish before the new\n    // style is visible.\n    // For this reason we poll until the style becomes available.\n    // Sync case.\n    if (styleLoaded(doc, style)) {\n      cb(style);\n      return style;\n    }\n    // Poll until styles are available.\n    const interval = setInterval(() => {\n      if (styleLoaded(doc, style)) {\n        clearInterval(interval);\n        cb(style);\n      }\n    }, 4);\n  }\n  return style;\n}\n\n\n/**\n * Creates the properly configured style element.\n * @param {!Element|!ShadowRoot} cssRoot\n * @param {string} cssText\n * @param {boolean} isRuntimeCss\n * @param {?string} ext\n * @return {!Element}\n */\nfunction insertStyleElement(cssRoot, cssText, isRuntimeCss, ext) {\n  let styleMap = cssRoot[STYLE_MAP_PROP];\n  if (!styleMap) {\n    styleMap = cssRoot[STYLE_MAP_PROP] = map();\n  }\n\n  const isExtCss = !isRuntimeCss &&\n      (ext && ext != 'amp-custom' && ext != 'amp-keyframes');\n  const key =\n      isRuntimeCss ? 'amp-runtime' :\n        isExtCss ? `amp-extension=${ext}` : null;\n\n  // Check if it has already been created or discovered.\n  if (key) {\n    const existing = getExistingStyleElement(cssRoot, styleMap, key);\n    if (existing) {\n      return existing;\n    }\n  }\n\n  // Create the new style element and append to cssRoot.\n  const doc = (cssRoot.ownerDocument || cssRoot);\n  const style = doc.createElement('style');\n  style./*OK*/textContent = cssText;\n  let afterElement = null;\n  // Make sure that we place style tags after the main runtime CSS. Otherwise\n  // the order is random.\n  if (isRuntimeCss) {\n    style.setAttribute('amp-runtime', '');\n  } else if (isExtCss) {\n    style.setAttribute('amp-extension', ext || '');\n    afterElement = dev().assertElement(getExistingStyleElement(\n        cssRoot, styleMap, 'amp-runtime'));\n  } else {\n    if (ext) {\n      style.setAttribute(ext, '');\n    }\n    afterElement = cssRoot.lastChild;\n  }\n  insertAfterOrAtStart(cssRoot, style, afterElement);\n  if (key) {\n    styleMap[key] = style;\n  }\n  return style;\n}\n\n\n/**\n * @param {!Element|!ShadowRoot} cssRoot\n * @param {!Object<string, !Element>} styleMap\n * @param {string} key\n * @return {?Element}\n */\nfunction getExistingStyleElement(cssRoot, styleMap, key) {\n  // Already cached.\n  if (styleMap[key]) {\n    return styleMap[key];\n  }\n  // Check if the style has already been added by the server layout.\n  const existing = cssRoot./*OK*/querySelector(`style[${key}]`);\n  if (existing) {\n    styleMap[key] = existing;\n    return existing;\n  }\n  // Nothing found.\n  return null;\n}\n\n\n/**\n * Applies a transformer to the CSS text if it has been registered.\n * @param {!Element|!ShadowRoot} cssRoot\n * @param {function(string):string} transformer\n */\nexport function installCssTransformer(cssRoot, transformer) {\n  cssRoot[TRANSFORMER_PROP] = transformer;\n}\n\n\n/**\n * Applies a transformer to the CSS text if it has been registered.\n * @param {!Element|!ShadowRoot} cssRoot\n * @param {string} cssText\n * @return {string}\n */\nfunction maybeTransform(cssRoot, cssText) {\n  const transformer = cssRoot[TRANSFORMER_PROP];\n  return transformer ? transformer(cssText) : cssText;\n}\n\n\n/**\n * Sets the document's body opacity to 1.\n * If the body is not yet available (because our script was loaded\n * synchronously), polls until it is.\n * @param {!Document} doc The document who's body we should make visible.\n * @param {boolean=} opt_waitForServices Whether the body visibility should\n *     be blocked on key services being loaded.\n */\nexport function makeBodyVisible(doc, opt_waitForServices) {\n  dev().assert(doc.defaultView, 'Passed in document must have a defaultView');\n  const win = /** @type {!Window} */ (doc.defaultView);\n  if (win[bodyVisibleSentinel]) {\n    return;\n  }\n  const set = () => {\n    win[bodyVisibleSentinel] = true;\n    setStyles(dev().assertElement(doc.body), {\n      opacity: 1,\n      visibility: 'visible',\n      'animation': 'none',\n    });\n    renderStartedNoInline(doc);\n  };\n  try {\n    waitForBody(doc, () => {\n      if (win[bodyVisibleSentinel]) {\n        return;\n      }\n      win[bodyVisibleSentinel] = true;\n      if (opt_waitForServices) {\n        waitForServices(win).catch(reason => {\n          rethrowAsync(reason);\n          return [];\n        }).then(services => {\n          set();\n          if (services.length > 0) {\n            Services.resourcesForDoc(doc)./*OK*/schedulePass(\n                1, /* relayoutAll */ true);\n          }\n          try {\n            const perf = Services.performanceFor(win);\n            perf.tick('mbv');\n            perf.flush();\n          } catch (e) {}\n        });\n      } else {\n        set();\n      }\n    });\n  } catch (e) {\n    // If there was an error during the logic above (such as service not\n    // yet installed, definitely try to make the body visible.\n    set();\n    // Avoid errors in the function to break execution flow as this is\n    // often called as a last resort.\n    rethrowAsync(e);\n  }\n}\n\n\n/**\n * @param {!Document} doc\n */\nfunction renderStartedNoInline(doc) {\n  try {\n    Services.resourcesForDoc(doc).renderStarted();\n  } catch (e) {\n    // `makeBodyVisible` is called in the error-processing cycle and thus\n    // could be triggered when runtime's initialization is incomplete which\n    // would cause unrelated errors to be thrown here.\n  }\n}\n\n\n/**\n * Indicates that the body is always visible. For instance, in case of PWA.\n * @param {!Window} win\n */\nexport function bodyAlwaysVisible(win) {\n  win[bodyVisibleSentinel] = true;\n}\n\n\n/**\n * Checks whether a style element was registered in the DOM.\n * @param {!Document|!ShadowRoot} doc\n * @param {!Element} style\n * @return {boolean}\n */\nfunction styleLoaded(doc, style) {\n  const sheets = doc.styleSheets;\n  for (let i = 0; i < sheets.length; i++) {\n    const sheet = sheets[i];\n    if (sheet.ownerNode == style) {\n      return true;\n    }\n  }\n  return false;\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// Note: loaded by 3p system. Cannot rely on babel polyfills.\nimport {map} from './utils/object.js';\nimport {startsWith} from './string';\n\n\n/** @type {Object<string, string>} */\nlet propertyNameCache;\n\n/** @const {!Array<string>} */\nconst vendorPrefixes = ['Webkit', 'webkit', 'Moz', 'moz', 'ms', 'O', 'o'];\n\n\n/**\n * @export\n * @param {string} camelCase camel cased string\n * @return {string} title cased string\n */\nexport function camelCaseToTitleCase(camelCase) {\n  return camelCase.charAt(0).toUpperCase() + camelCase.slice(1);\n}\n\n/**\n * Checks the style if a prefixed version of a property exists and returns\n * it or returns an empty string.\n * @private\n * @param {!Object} style\n * @param {string} titleCase the title case version of a css property name\n * @return {string} the prefixed property name or null.\n */\nfunction getVendorJsPropertyName_(style, titleCase) {\n  for (let i = 0; i < vendorPrefixes.length; i++) {\n    const propertyName = vendorPrefixes[i] + titleCase;\n    if (style[propertyName] !== undefined) {\n      return propertyName;\n    }\n  }\n  return '';\n}\n\n/**\n * Returns the possibly prefixed JavaScript property name of a style property\n * (ex. WebkitTransitionDuration) given a camelCase'd version of the property\n * (ex. transitionDuration).\n * @export\n * @param {!Object} style\n * @param {string} camelCase the camel cased version of a css property name\n * @param {boolean=} opt_bypassCache bypass the memoized cache of property\n *   mapping\n * @return {string}\n */\nexport function getVendorJsPropertyName(style, camelCase, opt_bypassCache) {\n  if (startsWith(camelCase, '--')) {\n    // CSS vars are returned as is.\n    return camelCase;\n  }\n  if (!propertyNameCache) {\n    propertyNameCache = map();\n  }\n  let propertyName = propertyNameCache[camelCase];\n  if (!propertyName || opt_bypassCache) {\n    propertyName = camelCase;\n    if (style[camelCase] === undefined) {\n      const titleCase = camelCaseToTitleCase(camelCase);\n      const prefixedPropertyName = getVendorJsPropertyName_(style, titleCase);\n\n      if (style[prefixedPropertyName] !== undefined) {\n        propertyName = prefixedPropertyName;\n      }\n    }\n    if (!opt_bypassCache) {\n      propertyNameCache[camelCase] = propertyName;\n    }\n  }\n  return propertyName;\n}\n\n\n/**\n * Sets the CSS styles of the specified element with !important. The styles\n * are specified as a map from CSS property names to their values.\n * @param {!Element} element\n * @param {!Object<string, *>} styles\n */\nexport function setImportantStyles(element, styles) {\n  for (const k in styles) {\n    element.style.setProperty(\n        getVendorJsPropertyName(styles, k), styles[k].toString(), 'important');\n  }\n}\n\n\n/**\n * Sets the CSS style of the specified element with optional units, e.g. \"px\".\n * @param {?Element} element\n * @param {string} property\n * @param {*} value\n * @param {string=} opt_units\n * @param {boolean=} opt_bypassCache\n */\nexport function setStyle(element, property, value, opt_units, opt_bypassCache) {\n  const propertyName = getVendorJsPropertyName(element.style, property,\n      opt_bypassCache);\n  if (propertyName) {\n    element.style[propertyName] =\n      /** @type {string} */ (opt_units ? value + opt_units : value);\n  }\n}\n\n\n/**\n * Returns the value of the CSS style of the specified element.\n * @param {!Element} element\n * @param {string} property\n * @param {boolean=} opt_bypassCache\n * @return {*}\n */\nexport function getStyle(element, property, opt_bypassCache) {\n  const propertyName = getVendorJsPropertyName(element.style, property,\n      opt_bypassCache);\n  if (!propertyName) {\n    return undefined;\n  }\n  return element.style[propertyName];\n}\n\n\n/**\n * Sets the CSS styles of the specified element. The styles\n * a specified as a map from CSS property names to their values.\n * @param {!Element} element\n * @param {!Object<string, *>} styles\n */\nexport function setStyles(element, styles) {\n  for (const k in styles) {\n    setStyle(element, k, styles[k]);\n  }\n}\n\n\n/**\n * Shows or hides the specified element.\n * @param {!Element} element\n * @param {boolean=} opt_display\n */\nexport function toggle(element, opt_display) {\n  if (opt_display === undefined) {\n    opt_display = getStyle(element, 'display') == 'none';\n  }\n  setStyle(element, 'display', opt_display ? '' : 'none');\n}\n\n\n/**\n * Returns a pixel value.\n * @param {number} value\n * @return {string}\n */\nexport function px(value) {\n  return `${value}px`;\n}\n\n/**\n * Returns a degree value.\n * @param {number} value\n * @return {string}\n */\nexport function deg(value) {\n  return `${value}deg`;\n}\n\n/**\n * Returns a \"translateX\" for CSS \"transform\" property.\n * @param {number|string} value\n * @return {string}\n */\nexport function translateX(value) {\n  if (typeof value == 'string') {\n    return `translateX(${value})`;\n  }\n  return `translateX(${px(value)})`;\n}\n\n\n/**\n * Returns a \"translateX\" for CSS \"transform\" property.\n * @param {number|string} x\n * @param {(number|string)=} opt_y\n * @return {string}\n */\nexport function translate(x, opt_y) {\n  if (typeof x == 'number') {\n    x = px(x);\n  }\n  if (opt_y === undefined) {\n    return `translate(${x})`;\n  }\n  if (typeof opt_y == 'number') {\n    opt_y = px(opt_y);\n  }\n  return `translate(${x}, ${opt_y})`;\n}\n\n\n/**\n * Returns a \"scale\" for CSS \"transform\" property.\n * @param {number|string} value\n * @return {string}\n */\nexport function scale(value) {\n  return `scale(${value})`;\n}\n\n/**\n * Returns a \"rotate\" for CSS \"transform\" property.\n * @param {number|string} value\n * @return {string}\n */\nexport function rotate(value) {\n  if (typeof value == 'number') {\n    value = deg(value);\n  }\n  return `rotate(${value})`;\n}\n\n/**\n * Remove alpha value from a rgba color value.\n * Return the new color property with alpha equals if has the alpha value.\n * Caller needs to make sure the input color value is a valid rgba/rgb value\n * @param {string} rgbaColor\n * @return {string}\n */\nexport function removeAlphaFromColor(rgbaColor) {\n  return rgbaColor.replace(\n      /\\(([^,]+),([^,]+),([^,)]+),[^)]+\\)/g, '($1,$2,$3, 1)');\n}\n\n/**\n * Gets the computed style of the element. The helper is necessary to enforce\n * the possible `null` value returned by a buggy Firefox.\n *\n * @param {!Window} win\n * @param {!Element} el\n * @return {!Object<string, string>}\n */\nexport function computedStyle(win, el) {\n  const style = /** @type {?CSSStyleDeclaration} */(win.getComputedStyle(el));\n  return /** @type {!Object<string, string>} */(style) || map();\n}\n\n\n/**\n * Resets styles that were set dynamically (i.e. inline)\n * @param {!Element} element\n * @param {!Array<string>} properties\n */\nexport function resetStyles(element, properties) {\n  const styleObj = {};\n  properties.forEach(prop => {\n    styleObj[prop] = null;\n  });\n  setStyles(element, styleObj);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* @const */\nconst toString_ = Object.prototype.toString;\n\n/**\n * Returns the ECMA [[Class]] of a value\n * @param {*} value\n * @return {string}\n */\nfunction toString(value) {\n  return toString_.call(value);\n}\n\n/**\n * Determines if value is actually an Array.\n * @param {*} value\n * @return {boolean}\n */\nexport function isArray(value) {\n  return Array.isArray(value);\n}\n\n/**\n * Converts an array-like object to an array.\n * @param {?IArrayLike<T>|string} arrayLike\n * @return {!Array<T>}\n * @template T\n */\nexport function toArray(arrayLike) {\n  if (!arrayLike) {\n    return [];\n  }\n  const array = new Array(arrayLike.length);\n  for (let i = 0; i < arrayLike.length; i++) {\n    array[i] = arrayLike[i];\n  }\n  return array;\n}\n\n/**\n * Determines if value is actually an Object.\n * @param {*} value\n * @return {boolean}\n */\nexport function isObject(value) {\n  return toString(value) === '[object Object]';\n}\n\n/**\n * Determines if value is of number type and finite.\n * NaN and Infinity are not considered a finite number.\n * String numbers are not considered numbers.\n * @param {*} value\n * @return {boolean}\n */\nexport function isFiniteNumber(value) {\n  return (typeof value === 'number' && isFinite(value));\n}\n\n/**\n * Checks whether `s` is a valid value of `enumObj`.\n *\n * @param {!Object<T>} enumObj\n * @param {T} s\n * @return {boolean}\n * @template T\n */\nexport function isEnumValue(enumObj, s) {\n  for (const k in enumObj) {\n    if (enumObj[k] === s) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Externs declare that access `defaultView` from `document` or\n * `ownerDocument` is of type `(Window|null)` but most of our parameter types\n * assume that it is never null. This is OK in practice as we ever only get\n * null on disconnected documents or old IE.\n * This helper function casts it into just a simple Window return type.\n *\n * @param {!Window|null} winOrNull\n * @return {!Window}\n */\nexport function toWin(winOrNull) {\n  return /** @type {!Window} */ (winOrNull);\n}\n\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {tryDecodeUriComponent_} from './url-try-decode-uri-component';\n\nconst regex = /(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;\n\n/**\n * Parses the query string of an URL. This method returns a simple key/value\n * map. If there are duplicate keys the latest value is returned.\n *\n * DO NOT import the function from this file. Instead, import parseQueryString\n * from `src/url.js`.\n *\n * @param {string} queryString\n * @return {!JsonObject}\n */\nexport function parseQueryString_(queryString) {\n  const params = /** @type {!JsonObject} */ (Object.create(null));\n  if (!queryString) {\n    return params;\n  }\n\n  let match;\n  while ((match = regex.exec(queryString))) {\n    const name = tryDecodeUriComponent_(match[1], match[1]);\n    const value = match[2] ? tryDecodeUriComponent_(match[2], match[2]) : '';\n    params[name] = value;\n  }\n  return params;\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Tries to decode a URI component, falling back to opt_fallback (or an empty\n * string)\n *\n * DO NOT import the function from this file. Instead, import\n * tryDecodeUriComponent from `src/url.js`.\n *\n * @param {string} component\n * @param {string=} fallback\n * @return {string}\n */\nexport function tryDecodeUriComponent_(component, fallback = '') {\n  try {\n    return decodeURIComponent(component);\n  } catch (e) {\n    return fallback;\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {LruCache} from './utils/lru-cache';\nimport {dict} from './utils/object';\nimport {endsWith, startsWith} from './string';\nimport {getMode} from './mode';\nimport {isArray} from './types';\nimport {parseQueryString_} from './url-parse-query-string';\nimport {tryDecodeUriComponent_} from './url-try-decode-uri-component';\nimport {urls} from './config';\nimport {user} from './log';\n\n/**\n * @type {!JsonObject}\n */\nconst SERVING_TYPE_PREFIX = dict({\n  // No viewer\n  'c': true,\n  // In viewer\n  'v': true,\n  // Ad landing page\n  'a': true,\n  // Ad\n  'ad': true,\n});\n\n/**\n * Cached a-tag to avoid memory allocation during URL parsing.\n * @type {HTMLAnchorElement}\n */\nlet a;\n\n/**\n * We cached all parsed URLs. As of now there are no use cases\n * of AMP docs that would ever parse an actual large number of URLs,\n * but we often parse the same one over and over again.\n * @type {LruCache}\n */\nlet cache;\n\n/** @private @const Matches amp_js_* parameters in query string. */\nconst AMP_JS_PARAMS_REGEX = /[?&]amp_js[^&]*/;\n\n/** @private @const Matches amp_gsa parameters in query string. */\nconst AMP_GSA_PARAMS_REGEX = /[?&]amp_gsa[^&]*/;\n\n/** @private @const Matches amp_r parameters in query string. */\nconst AMP_R_PARAMS_REGEX = /[?&]amp_r[^&]*/;\n\n/** @private @const Matches usqp parameters from goog experiment in query string. */\nconst GOOGLE_EXPERIMENT_PARAMS_REGEX = /[?&]usqp[^&]*/;\n\nconst INVALID_PROTOCOLS = [\n  /*eslint no-script-url: 0*/ 'javascript:',\n  /*eslint no-script-url: 0*/ 'data:',\n  /*eslint no-script-url: 0*/ 'vbscript:',\n];\n\n/** @const {string} */\nexport const SOURCE_ORIGIN_PARAM = '__amp_source_origin';\n\n/**\n * Returns the correct origin for a given window.\n * @param {!Window} win\n * @return {string} origin\n */\nexport function getWinOrigin(win) {\n  return win.origin || parseUrlDeprecated(win.location.href).origin;\n}\n\n/**\n * Returns a Location-like object for the given URL. If it is relative,\n * the URL gets resolved.\n * Consider the returned object immutable. This is enforced during\n * testing by freezing the object.\n * @param {string} url\n * @param {boolean=} opt_nocache\n * @return {!Location}\n */\nexport function parseUrlDeprecated(url, opt_nocache) {\n  if (!a) {\n    a = /** @type {!HTMLAnchorElement} */ (self.document.createElement('a'));\n    cache = self.UrlCache || (self.UrlCache = new LruCache(100));\n  }\n\n  return parseUrlWithA(a, url, opt_nocache ? null : cache);\n}\n\n/**\n * Returns a Location-like object for the given URL. If it is relative,\n * the URL gets resolved.\n * Consider the returned object immutable. This is enforced during\n * testing by freezing the object.\n * @param {!HTMLAnchorElement} a\n * @param {string} url\n * @param {LruCache=} opt_cache\n * @return {!Location}\n * @restricted\n */\nexport function parseUrlWithA(a, url, opt_cache) {\n  if (opt_cache && opt_cache.has(url)) {\n    return opt_cache.get(url);\n  }\n\n  a.href = url;\n\n  // IE11 doesn't provide full URL components when parsing relative URLs.\n  // Assigning to itself again does the trick #3449.\n  if (!a.protocol) {\n    a.href = a.href;\n  }\n\n  const info = /** @type {!Location} */({\n    href: a.href,\n    protocol: a.protocol,\n    host: a.host,\n    hostname: a.hostname,\n    port: a.port == '0' ? '' : a.port,\n    pathname: a.pathname,\n    search: a.search,\n    hash: a.hash,\n    origin: null, // Set below.\n  });\n\n  // Some IE11 specific polyfills.\n  // 1) IE11 strips out the leading '/' in the pathname.\n  if (info.pathname[0] !== '/') {\n    info.pathname = '/' + info.pathname;\n  }\n\n  // 2) For URLs with implicit ports, IE11 parses to default ports while\n  // other browsers leave the port field empty.\n  if ((info.protocol == 'http:' && info.port == 80)\n      || (info.protocol == 'https:' && info.port == 443)) {\n    info.port = '';\n    info.host = info.hostname;\n  }\n\n  // For data URI a.origin is equal to the string 'null' which is not useful.\n  // We instead return the actual origin which is the full URL.\n  if (a.origin && a.origin != 'null') {\n    info.origin = a.origin;\n  } else if (info.protocol == 'data:' || !info.host) {\n    info.origin = info.href;\n  } else {\n    info.origin = info.protocol + '//' + info.host;\n  }\n\n  // Freeze during testing to avoid accidental mutation.\n  const frozen = (getMode().test && Object.freeze) ? Object.freeze(info) : info;\n\n  if (opt_cache) {\n    opt_cache.put(url, frozen);\n  }\n\n  return frozen;\n}\n\n/**\n * Appends the string just before the fragment part (or optionally\n * to the front of the query string) of the URL.\n * @param {string} url\n * @param {string} paramString\n * @param {boolean=} opt_addToFront\n * @return {string}\n */\nexport function appendEncodedParamStringToUrl(url, paramString,\n  opt_addToFront) {\n  if (!paramString) {\n    return url;\n  }\n  const mainAndFragment = url.split('#', 2);\n  const mainAndQuery = mainAndFragment[0].split('?', 2);\n\n  let newUrl = mainAndQuery[0] + (\n    mainAndQuery[1]\n      ? (opt_addToFront\n        ? `?${paramString}&${mainAndQuery[1]}`\n        : `?${mainAndQuery[1]}&${paramString}`)\n      : `?${paramString}`);\n  newUrl += mainAndFragment[1] ? `#${mainAndFragment[1]}` : '';\n  return newUrl;\n}\n/**\n * Appends a query string field and value to a url. `key` and `value`\n * will be ran through `encodeURIComponent` before appending.\n * @param {string} url\n * @param {string} key\n * @param {string} value\n * @param {boolean=} opt_addToFront\n * @return {string}\n */\nexport function addParamToUrl(url, key, value, opt_addToFront) {\n  const field = `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\n  return appendEncodedParamStringToUrl(url, field, opt_addToFront);\n}\n\n/**\n * Appends query string fields and values to a url. The `params` objects'\n * `key`s and `value`s will be transformed into query string keys/values.\n * @param {string} url\n * @param {!JsonObject<string, string|!Array<string>>} params\n * @return {string}\n */\nexport function addParamsToUrl(url, params) {\n  return appendEncodedParamStringToUrl(url, serializeQueryString(params));\n}\n\n/**\n * Serializes the passed parameter map into a query string with both keys\n * and values encoded.\n * @param {!JsonObject<string, string|!Array<string>>} params\n * @return {string}\n */\nexport function serializeQueryString(params) {\n  const s = [];\n  for (const k in params) {\n    const v = params[k];\n    if (v == null) {\n      continue;\n    } else if (isArray(v)) {\n      for (let i = 0; i < v.length; i++) {\n        const sv = /** @type {string} */ (v[i]);\n        s.push(`${encodeURIComponent(k)}=${encodeURIComponent(sv)}`);\n      }\n    } else {\n      const sv = /** @type {string} */ (v);\n      s.push(`${encodeURIComponent(k)}=${encodeURIComponent(sv)}`);\n    }\n  }\n  return s.join('&');\n}\n\n/**\n * Returns `true` if the URL is secure: either HTTPS or localhost (for testing).\n * @param {string|!Location} url\n * @return {boolean}\n */\nexport function isSecureUrlDeprecated(url) {\n  if (typeof url == 'string') {\n    url = parseUrlDeprecated(url);\n  }\n  return (url.protocol == 'https:' ||\n      url.hostname == 'localhost' ||\n      endsWith(url.hostname, '.localhost'));\n}\n\n/**\n * Asserts that a given url is HTTPS or protocol relative. It's a user-level\n * assert.\n *\n * Provides an exception for localhost.\n *\n * @param {?string|undefined} urlString\n * @param {!Element|string} elementContext Element where the url was found.\n * @param {string=} sourceName Used for error messages.\n * @return {string}\n */\nexport function assertHttpsUrl(\n  urlString, elementContext, sourceName = 'source') {\n  user().assert(urlString != null, '%s %s must be available',\n      elementContext, sourceName);\n  // (erwinm, #4560): type cast necessary until #4560 is fixed.\n  const theUrlString = /** @type {string} */ (urlString);\n  user().assert(isSecureUrlDeprecated(theUrlString) || /^(\\/\\/)/.test(theUrlString),\n      '%s %s must start with ' +\n      '\"https://\" or \"//\" or be relative and served from ' +\n      'either https or from localhost. Invalid value: %s',\n      elementContext, sourceName, theUrlString);\n  return theUrlString;\n}\n\n/**\n * Asserts that a given url is an absolute HTTP or HTTPS URL.\n * @param {string} urlString\n * @return {string}\n */\nexport function assertAbsoluteHttpOrHttpsUrl(urlString) {\n  user().assert(/^https?\\:/i.test(urlString),\n      'URL must start with \"http://\" or \"https://\". Invalid value: %s',\n      urlString);\n  return parseUrlDeprecated(urlString).href;\n}\n\n\n/**\n * Parses the query string of an URL. This method returns a simple key/value\n * map. If there are duplicate keys the latest value is returned.\n *\n * This function is implemented in a separate file to avoid a circular\n * dependency.\n *\n * @param {string} queryString\n * @return {!JsonObject}\n */\nexport function parseQueryString(queryString) {\n  return parseQueryString_(queryString);\n}\n\n/**\n * Returns the URL without fragment. If URL doesn't contain fragment, the same\n * string is returned.\n * @param {string} url\n * @return {string}\n */\nexport function removeFragment(url) {\n  const index = url.indexOf('#');\n  if (index == -1) {\n    return url;\n  }\n  return url.substring(0, index);\n}\n\n/**\n * Returns the fragment from the URL. If the URL doesn't contain fragment,\n * the empty string is returned.\n * @param {string} url\n * @return {string}\n */\nexport function getFragment(url) {\n  const index = url.indexOf('#');\n  if (index == -1) {\n    return '';\n  }\n  return url.substring(index);\n}\n\n/**\n * Returns whether the URL has the origin of a proxy.\n * @param {string|!Location} url URL of an AMP document.\n * @return {boolean}\n */\nexport function isProxyOrigin(url) {\n  if (typeof url == 'string') {\n    url = parseUrlDeprecated(url);\n  }\n  return urls.cdnProxyRegex.test(url.origin);\n}\n\n/**\n * For proxy-origin URLs, returns the serving type. Otherwise, returns null.\n * E.g., 'https://amp-com.cdn.ampproject.org/a/s/amp.com/amp_document.html'\n * returns 'a'.\n * @param {string|!Location} url URL of an AMP document.\n * @return {?string}\n */\nexport function getProxyServingType(url) {\n  if (typeof url == 'string') {\n    url = parseUrlDeprecated(url);\n  }\n  if (!isProxyOrigin(url)) {\n    return null;\n  }\n  const path = url.pathname.split('/', 2);\n  return path[1];\n}\n\n/**\n * Returns whether the URL origin is localhost.\n * @param {string|!Location} url URL of an AMP document.\n * @return {boolean}\n */\nexport function isLocalhostOrigin(url) {\n  if (typeof url == 'string') {\n    url = parseUrlDeprecated(url);\n  }\n  return urls.localhostRegex.test(url.origin);\n}\n\n/**\n * Returns whether the URL has valid protocol.\n * Deep link protocol is valid, but not javascript etc.\n * @param {string|!Location} url\n * @return {boolean}\n */\nexport function isProtocolValid(url) {\n  if (!url) {\n    return true;\n  }\n  if (typeof url == 'string') {\n    url = parseUrlDeprecated(url);\n  }\n  return !INVALID_PROTOCOLS.includes(url.protocol);\n}\n\n/**\n * Returns a URL without AMP JS parameters.\n * @param {string} url\n * @return {string}\n */\nexport function removeAmpJsParamsFromUrl(url) {\n  const parsed = parseUrlDeprecated(url);\n  const search = removeAmpJsParamsFromSearch(parsed.search);\n  return parsed.origin + parsed.pathname + search + parsed.hash;\n\n}\n\n/**\n * Returns a URL without a query string.\n * @param {string} url\n * @return {string}\n */\nexport function removeSearch(url) {\n  const index = url.indexOf('?');\n  if (index == -1) {\n    return url;\n  }\n  const fragment = getFragment(url);\n  return url.substring(0, index) + fragment;\n}\n\n/**\n * Removes parameters that start with amp js parameter pattern and returns the\n * new search string.\n * @param {string} urlSearch\n * @return {string}\n */\nfunction removeAmpJsParamsFromSearch(urlSearch) {\n  if (!urlSearch || urlSearch == '?') {\n    return '';\n  }\n  const search = urlSearch\n      .replace(AMP_JS_PARAMS_REGEX, '')\n      .replace(AMP_GSA_PARAMS_REGEX, '')\n      .replace(AMP_R_PARAMS_REGEX, '')\n      .replace(GOOGLE_EXPERIMENT_PARAMS_REGEX, '')\n      .replace(/^[?&]/, ''); // Removes first ? or &.\n  return search ? '?' + search : '';\n}\n\n/**\n * Returns the source URL of an AMP document for documents served\n * on a proxy origin or directly.\n * @param {string|!Location} url URL of an AMP document.\n * @return {string}\n */\nexport function getSourceUrl(url) {\n  if (typeof url == 'string') {\n    url = parseUrlDeprecated(url);\n  }\n\n  // Not a proxy URL - return the URL itself.\n  if (!isProxyOrigin(url)) {\n    return url.href;\n  }\n\n  // A proxy URL.\n  // Example path that is being matched here.\n  // https://cdn.ampproject.org/c/s/www.origin.com/foo/\n  // The /s/ is optional and signals a secure origin.\n  const path = url.pathname.split('/');\n  const prefix = path[1];\n  user().assert(SERVING_TYPE_PREFIX[prefix],\n      'Unknown path prefix in url %s', url.href);\n  const domainOrHttpsSignal = path[2];\n  const origin = domainOrHttpsSignal == 's'\n    ? 'https://' + decodeURIComponent(path[3])\n    : 'http://' + decodeURIComponent(domainOrHttpsSignal);\n  // Sanity test that what we found looks like a domain.\n  user().assert(origin.indexOf('.') > 0, 'Expected a . in origin %s', origin);\n  path.splice(1, domainOrHttpsSignal == 's' ? 3 : 2);\n  return origin + path.join('/') +\n      removeAmpJsParamsFromSearch(url.search) + (url.hash || '');\n}\n\n/**\n * Returns the source origin of an AMP document for documents served\n * on a proxy origin or directly.\n * @param {string|!Location} url URL of an AMP document.\n * @return {string} The source origin of the URL.\n */\nexport function getSourceOrigin(url) {\n  return parseUrlDeprecated(getSourceUrl(url)).origin;\n}\n\n/**\n * Returns absolute URL resolved based on the relative URL and the base.\n * @param {string} relativeUrlString\n * @param {string|!Location} baseUrl\n * @return {string}\n */\nexport function resolveRelativeUrl(relativeUrlString, baseUrl) {\n  if (typeof baseUrl == 'string') {\n    baseUrl = parseUrlDeprecated(baseUrl);\n  }\n  if (typeof URL == 'function') {\n    return new URL(relativeUrlString, baseUrl.href).toString();\n  }\n  return resolveRelativeUrlFallback_(relativeUrlString, baseUrl);\n}\n\n/**\n * Fallback for URL resolver when URL class is not available.\n * @param {string} relativeUrlString\n * @param {string|!Location} baseUrl\n * @return {string}\n * @private Visible for testing.\n */\nexport function resolveRelativeUrlFallback_(relativeUrlString, baseUrl) {\n  if (typeof baseUrl == 'string') {\n    baseUrl = parseUrlDeprecated(baseUrl);\n  }\n  relativeUrlString = relativeUrlString.replace(/\\\\/g, '/');\n  const relativeUrl = parseUrlDeprecated(relativeUrlString);\n\n  // Absolute URL.\n  if (startsWith(relativeUrlString.toLowerCase(), relativeUrl.protocol)) {\n    return relativeUrl.href;\n  }\n\n  // Protocol-relative URL.\n  if (startsWith(relativeUrlString, '//')) {\n    return baseUrl.protocol + relativeUrlString;\n  }\n\n  // Absolute path.\n  if (startsWith(relativeUrlString, '/')) {\n    return baseUrl.origin + relativeUrlString;\n  }\n\n  // Relative path.\n  return baseUrl.origin + baseUrl.pathname.replace(/\\/[^/]*$/, '/')\n      + relativeUrlString;\n}\n\n\n/**\n * Add \"__amp_source_origin\" query parameter to the URL.\n * @param {!Window} win\n * @param {string} url\n * @return {string}\n */\nexport function getCorsUrl(win, url) {\n  checkCorsUrl(url);\n  const sourceOrigin = getSourceOrigin(win.location.href);\n  return addParamToUrl(url, SOURCE_ORIGIN_PARAM, sourceOrigin);\n}\n\n\n/**\n * Checks if the url has __amp_source_origin and throws if it does.\n * @param {string} url\n */\nexport function checkCorsUrl(url) {\n  const parsedUrl = parseUrlDeprecated(url);\n  const query = parseQueryString(parsedUrl.search);\n  user().assert(!(SOURCE_ORIGIN_PARAM in query),\n      'Source origin is not allowed in %s', url);\n}\n\n/**\n * Tries to decode a URI component, falling back to opt_fallback (or an empty\n * string)\n *\n * @param {string} component\n * @param {string=} opt_fallback\n * @return {string}\n */\nexport function tryDecodeUriComponent(component, opt_fallback) {\n  return tryDecodeUriComponent_(component, opt_fallback);\n}\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {dev} from '../log';\n\n/** @const {string} */\nconst TAG = 'lru-cache';\n\n/**\n * @template T\n */\nexport class LruCache {\n  /**\n   * @param {number} capacity\n   */\n  constructor(capacity) {\n    /** @private @const {number} */\n    this.capacity_ = capacity;\n\n    /** @private {number} */\n    this.size_ = 0;\n\n    /**\n     * An incrementing counter to define the last access.\n     * @private {number}\n     */\n    this.access_ = 0;\n\n    /** @private {!Object<(number|string), {payload: T, access: number}>} */\n    this.cache_ = Object.create(null);\n  }\n\n  /**\n   * Returns whether key is cached.\n   *\n   * @param {number|string} key\n   * @return {boolean}\n   */\n  has(key) {\n    return !!this.cache_[key];\n  }\n\n  /**\n   * @param {number|string} key\n   * @return {T} The cached payload.\n   */\n  get(key) {\n    const cacheable = this.cache_[key];\n    if (cacheable) {\n      cacheable.access = ++this.access_;\n      return cacheable.payload;\n    }\n    return undefined;\n  }\n\n  /**\n   * @param {number|string} key\n   * @param {T} payload The payload to cache.\n   */\n  put(key, payload) {\n    if (!this.has(key)) {\n      this.size_++;\n    }\n    this.cache_[key] = {payload, access: this.access_};\n    this.evict_();\n  }\n\n  /**\n   * Evicts the oldest cache entry, if we've exceeded capacity.\n   */\n  evict_() {\n    if (this.size_ <= this.capacity_) {\n      return;\n    }\n\n    dev().warn(TAG, 'Trimming LRU cache');\n    const cache = this.cache_;\n    let oldest = this.access_ + 1;\n    let oldestKey;\n    for (const key in cache) {\n      const {access} = cache[key];\n      if (access < oldest) {\n        oldest = access;\n        oldestKey = key;\n      }\n    }\n\n    if (oldestKey !== undefined) {\n      delete cache[oldestKey];\n      this.size_--;\n    }\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {isObject} from '../types';\n\n/* @const */\nconst hasOwn_ = Object.prototype.hasOwnProperty;\n\n/**\n * Returns a map-like object.\n * If opt_initial is provided, copies its own properties into the\n * newly created object.\n * @param {T=} opt_initial This should typically be an object literal.\n * @return {T}\n * @template T\n */\nexport function map(opt_initial) {\n  const obj = Object.create(null);\n  if (opt_initial) {\n    Object.assign(obj, opt_initial);\n  }\n  return obj;\n}\n\n/**\n * Return an empty JsonObject or makes the passed in object literal\n * an JsonObject.\n * The JsonObject type is just a simple object that is at-dict.\n * See\n * https://github.com/google/closure-compiler/wiki/@struct-and-@dict-Annotations\n * for what a dict is type-wise.\n * The linter enforces that the argument is, in fact, at-dict like.\n * @param {!Object=} opt_initial\n * @return {!JsonObject}\n */\nexport function dict(opt_initial) {\n  // We do not copy. The linter enforces that the passed in object is a literal\n  // and thus the caller cannot have a reference to it.\n  return /** @type {!JsonObject} */ (opt_initial || {});\n}\n\n/**\n * Checks if the given key is a property in the map.\n *\n * @param {T}  obj a map like property.\n * @param {string}  key\n * @return {boolean}\n * @template T\n */\nexport function hasOwn(obj, key) {\n  return hasOwn_.call(obj, key);\n}\n\n/**\n * Returns obj[key] iff key is obj's own property (is not inherited).\n * Otherwise, returns undefined.\n *\n * @param {Object} obj\n * @param {string} key\n * @return {*}\n */\nexport function ownProperty(obj, key) {\n  if (hasOwn(obj, key)) {\n    return obj[key];\n  } else {\n    return undefined;\n  }\n}\n\n/**\n * Deep merges source into target.\n *\n * @param {!Object} target\n * @param {!Object} source\n * @param {number} depth The maximum merge depth. If exceeded, Object.assign\n *                       will be used instead.\n * @return {!Object}\n * @throws {Error} If source contains a circular reference.\n * Note: Only nested objects are deep-merged, primitives and arrays are not.\n */\nexport function deepMerge(target, source, depth = 10) {\n  // Keep track of seen objects to detect recursive references.\n  const seen = [];\n\n  /** @type {!Array<{t: !Object, s: !Object, d: number}>} */\n  const queue = [];\n  queue.push({t: target, s: source, d: 0});\n\n  // BFS to ensure objects don't have recursive references at shallower depths.\n  while (queue.length > 0) {\n    const {t, s, d} = queue.shift();\n    if (seen.includes(s)) {\n      throw new Error('Source object has a circular reference.');\n    }\n    seen.push(s);\n    if (t === s) {\n      continue;\n    }\n    if (d > depth) {\n      Object.assign(t, s);\n      continue;\n    }\n    Object.keys(s).forEach(key => {\n      const newValue = s[key];\n      // Perform a deep merge IFF both target and source have the same key\n      // whose corresponding values are objects.\n      if (hasOwn(t, key)) {\n        const oldValue = t[key];\n        if (isObject(newValue) && isObject(oldValue)) {\n          queue.push({t: oldValue, s: newValue, d: d + 1});\n          return;\n        }\n      }\n      t[key] = newValue;\n    });\n  }\n  return target;\n}\n\n/**\n * @param {!Object} o An object to remove properties from\n * @param {!Array<string>} props A list of properties to remove from the Object\n * @return {!Object} An object with the given properties removed\n */\nexport function omit(o, props) {\n  return Object.keys(o).reduce((acc, key) => {\n    if (!props.includes(key)) {\n      acc[key] = o[key];\n    }\n    return acc;\n  }, {});\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Returns a Deferred struct, which holds a pending promise and its associated\n * resolve and reject functions.\n *\n * This is preferred instead of creating a Promise instance to extract the\n * resolve/reject functions yourself:\n *\n * ```\n * // Avoid doing\n * let resolve;\n * const promise = new Promise(res => {\n *   resolve = res;\n * });\n *\n * // Good\n * const deferred = new Deferred();\n * const { promise, resolve } = deferred;\n * ```\n *\n * @template T\n */\nexport class Deferred {\n  /**\n   * Creates an instance of Deferred.\n   */\n  constructor() {\n    let resolve, reject;\n\n    /**\n     * @const {!Promise<T>}\n     */\n    this.promise = new /*OK*/Promise((res, rej) => {\n      resolve = res;\n      reject = rej;\n    });\n\n    /**\n     * @const {function(T=)}\n     */\n    this.resolve = resolve;\n\n    /**\n     * @const {function(*=)}\n     */\n    this.reject = reject;\n  }\n}\n\n/**\n * Creates a promise resolved to the return value of fn.\n * If fn sync throws, it will cause the promise to reject.\n *\n * @param {function():T} fn\n * @return {!Promise<T>}\n * @template T\n */\nexport function tryResolve(fn) {\n  return new Promise(resolve => {\n    resolve(fn());\n  });\n}\n\n/**\n * Returns a promise which resolves if a threshold amount of the given promises\n * resolve, and rejects otherwise.\n * @param {!Array<!Promise>} promises The array of promises to test.\n * @param {number} count The number of promises that must resolve for the\n *     returned promise to resolve.\n * @return {!Promise} A promise that resolves if any of the given promises\n *     resolve, and which rejects otherwise.\n */\nexport function some(promises, count = 1) {\n  return new Promise((resolve, reject) => {\n    count = Math.max(count, 0);\n    const extra = promises.length - count;\n    if (extra < 0) {\n      reject(new Error('not enough promises to resolve'));\n    }\n    if (promises.length == 0) {\n      resolve([]);\n    }\n    const values = [];\n    const reasons = [];\n\n    const onFulfilled = value => {\n      if (values.length < count) {\n        values.push(value);\n      }\n      if (values.length == count) {\n        resolve(values);\n      }\n    };\n    const onRejected = reason => {\n      if (reasons.length <= extra) {\n        reasons.push(reason);\n      }\n      if (reasons.length > extra) {\n        reject(reasons);\n      }\n    };\n    for (let i = 0; i < promises.length; i++) {\n      Promise.resolve(promises[i]).then(onFulfilled, onRejected);\n    }\n  });\n}\n\n/**\n * Resolves with the result of the last promise added.\n * @implements {IThenable}\n */\nexport class LastAddedResolver {\n  /**\n   * @param {!Array<!Promise>=} opt_promises\n   */\n  constructor(opt_promises) {\n    let resolve_, reject_;\n    /** @private @const {!Promise} */\n    this.promise_ = new Promise((resolve, reject) => {\n      resolve_ = resolve;\n      reject_ = reject;\n    });\n\n    /** @private */\n    this.resolve_ = resolve_;\n\n    /** @private */\n    this.reject_ = reject_;\n\n    /** @private */\n    this.count_ = 0;\n\n    if (opt_promises) {\n      for (let i = 0; i < opt_promises.length; i++) {\n        this.add(opt_promises[i]);\n      }\n    }\n  }\n\n  /**\n   * Add a promise to possibly be resolved.\n   * @param {!Promise} promise\n   * @return {!Promise}\n   */\n  add(promise) {\n    const countAtAdd = ++this.count_;\n    Promise.resolve(promise).then(result => {\n      if (this.count_ === countAtAdd) {\n        this.resolve_(result);\n      }\n    }, error => {\n      // Don't follow behavior of Promise.all and Promise.race error so that\n      // this will only reject when most recently added promise fails.\n      if (this.count_ === countAtAdd) {\n        this.reject_(error);\n      }\n    });\n    return this.promise_;\n  }\n\n  /** @override */\n  then(opt_resolve, opt_reject) {\n    return this.promise_.then(opt_resolve, opt_reject);\n  }\n}\n","/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */\n\n\n/**\n * This regex consists of 4 matching capture groups and one (non-matching) fallback:\n *\n * - (\\0), catch the null terminator character so it may be replaced by UTF\n *   Replacement Char\n * - ^(-)$, catch a solitary dash char, so that it may be backslash escaped.\n *   This is a separate capture group so that the legal-chars (group 4) doesn't\n *   capture it first, since that group doesn't need to escape its dash.\n * - ([\\x01-\\x1f\\x7f]|^-?[0-9]), catch a UTF control char, or any leading\n *   number (with an optional leading dash). The control or the number (but not\n *   the leading dash) must be hex-escaped,.\n * - ([\\x80-\\uffff0-9a-zA-Z_-]+), catch legal-chars, with the exception of a\n *   solitary dash, which will already have matched in group 1.\n * - [^], finally, a catch-all that allows us to backslash escape the char.\n *\n * Together, this matches everything necessary for CSS.escape.\n */\nvar regex = /(\\0)|^(-)$|([\\x01-\\x1f\\x7f]|^-?[0-9])|([\\x80-\\uffff0-9a-zA-Z_-]+)|[^]/g;\n\nfunction escaper(match, nil, dash, hexEscape, chars) {\n  // Chars is the legal-chars (group 4) capture\n  if (chars) {\n    return chars;\n  }\n  // Nil is the null terminator (group 1) capture\n  if (nil) {\n    return '\\uFFFD';\n  }\n  // Both UTF control chars, and leading numbers (with optional leading dash)\n  // (group 3) must be backslash escaped with a trailing space.  Funnily, the\n  // leading dash must not be escaped, but the number. :shrug:\n  if (hexEscape) {\n    return match.slice(0, -1) + '\\\\' + match.slice(-1).charCodeAt(0).toString(16) + ' '\n  }\n  // Finally, the solitary dash and the catch-all chars require backslash\n  // escaping.\n  return '\\\\' + match;\n}\n\n/**\n * https://drafts.csswg.org/cssom/#serialize-an-identifier\n * @param {string} value\n * @return {string}\n */\nexport function cssEscape(value) {\n  return String(value).replace(regex, escaper);\n}\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/** Version: 0.1.22.23 */\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * @param {!Document} doc\n * @return {string}\n */\nfunction getReadyState(doc) {\n  return /** @type {string} */ (doc['readyState']);\n}\n\n\n/**\n * Whether the document is ready.\n * @param {!Document} doc\n * @return {boolean}\n */\nfunction isDocumentReady(doc) {\n  const readyState = getReadyState(doc);\n  return readyState != 'loading' && readyState != 'uninitialized';\n}\n\n/**\n * Calls the callback when document is ready.\n * @param {!Document} doc\n * @param {function(!Document)} callback\n */\nfunction onDocumentReady(doc, callback) {\n  onDocumentState(doc, isDocumentReady, callback);\n}\n\n/**\n * Calls the callback when document's state satisfies the stateFn.\n * @param {!Document} doc\n * @param {function(!Document):boolean} stateFn\n * @param {function(!Document)} callback\n */\nfunction onDocumentState(doc, stateFn, callback) {\n  let ready = stateFn(doc);\n  if (ready) {\n    callback(doc);\n  } else {\n    const readyListener = () => {\n      if (stateFn(doc)) {\n        if (!ready) {\n          ready = true;\n          callback(doc);\n        }\n        doc.removeEventListener('readystatechange', readyListener);\n      }\n    };\n    doc.addEventListener('readystatechange', readyListener);\n  }\n}\n\n/**\n * Returns a promise that is resolved when document is ready.\n * @param {!Document} doc\n * @return {!Promise<!Document>}\n */\nfunction whenDocumentReady(doc) {\n  return new Promise(resolve => {\n    onDocumentReady(doc, resolve);\n  });\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * @interface\n */\nclass Doc {\n\n  /**\n   * @return {!Window}\n   */\n  getWin() {}\n\n  /**\n   * The `Document` node or analog.\n   * @return {!Node}\n   */\n  getRootNode() {}\n\n  /**\n   * The `Document.documentElement` element or analog.\n   * @return {!Element}\n   */\n  getRootElement() {}\n\n  /**\n   * The `Document.head` element or analog. Returns `null` if not available\n   * yet.\n   * @return {!Element}\n   */\n  getHead() {}\n\n  /**\n   * The `Document.body` element or analog. Returns `null` if not available\n   * yet.\n   * @return {?Element}\n   */\n  getBody() {}\n\n  /**\n   * Whether the document has been fully constructed.\n   * @return {boolean}\n   */\n  isReady() {}\n\n  /**\n   * Resolved when document has been fully constructed.\n   * @return {!Promise}\n   */\n  whenReady() {}\n}\n\n\n/** @implements {Doc} */\nclass GlobalDoc {\n\n  /**\n   * @param {!Window|!Document} winOrDoc\n   */\n  constructor(winOrDoc) {\n    const isWin = !!winOrDoc.document;\n    /** @private @const {!Window} */\n    this.win_ = isWin ?\n        /** @type {!Window} */ (winOrDoc) :\n        /** @type {!Window} */ (\n            (/** @type {!Document} */ (winOrDoc)).defaultView);\n    /** @private @const {!Document} */\n    this.doc_ = isWin ?\n        /** @type {!Window} */ (winOrDoc).document :\n        /** @type {!Document} */ (winOrDoc);\n  }\n\n  /** @override */\n  getWin() {\n    return this.win_;\n  }\n\n  /** @override */\n  getRootNode() {\n    return this.doc_;\n  }\n\n  /** @override */\n  getRootElement() {\n    return this.doc_.documentElement;\n  }\n\n  /** @override */\n  getHead() {\n    // `document.head` always has a chance to be parsed, at least partially.\n    return /** @type {!Element} */ (this.doc_.head);\n  }\n\n  /** @override */\n  getBody() {\n    return this.doc_.body;\n  }\n\n  /** @override */\n  isReady() {\n    return isDocumentReady(this.doc_);\n  }\n\n  /** @override */\n  whenReady() {\n    return whenDocumentReady(this.doc_);\n  }\n}\n\n\n/**\n * @param {!Document|!Window|!Doc} input\n * @return {!Doc}\n */\nfunction resolveDoc(input) {\n  // Is it a `Document`\n  if ((/** @type {!Document} */ (input)).nodeType === /* DOCUMENT */ 9) {\n    return new GlobalDoc(/** @type {!Document} */ (input));\n  }\n  // Is it a `Window`?\n  if ((/** @type {!Window} */ (input)).document) {\n    return new GlobalDoc(/** @type {!Window} */ (input));\n  }\n  return /** @type {!Doc} */ (input);\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n */\nclass PageConfig {\n\n  /**\n   * @param {string} productOrPublicationId\n   * @param {boolean} locked\n   */\n  constructor(productOrPublicationId, locked) {\n    let publicationId, productId, label;\n    const div = productOrPublicationId.indexOf(':');\n    if (div != -1) {\n      // The argument is a product id.\n      productId = productOrPublicationId;\n      publicationId = productId.substring(0, div);\n      label = productId.substring(div + 1);\n    } else {\n      // The argument is a publication id.\n      publicationId = productOrPublicationId;\n      productId = null;\n      label = null;\n    }\n\n    /** @private @const {string} */\n    this.publicationId_ = publicationId;\n    /** @private @const {?string} */\n    this.productId_ = productId;\n    /** @private @const {?string} */\n    this.label_ = label;\n    /** @private @const {boolean} */\n    this.locked_ = locked;\n  }\n\n  /**\n   * @return {string}\n   */\n  getPublicationId() {\n    return this.publicationId_;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getProductId() {\n    return this.productId_;\n  }\n\n  /**\n   * @return {?string}\n   */\n  getLabel() {\n    return this.label_;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isLocked() {\n    return this.locked_;\n  }\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * Whether the element have a next node in the document order.\n * This means either:\n *  a. The element itself has a nextSibling.\n *  b. Any of the element ancestors has a nextSibling.\n * @param {!Element} element\n * @param {?Node=} opt_stopNode\n * @return {boolean}\n */\nfunction hasNextNodeInDocumentOrder(element, opt_stopNode) {\n  let currentElement = element;\n  do {\n    if (currentElement.nextSibling) {\n      return true;\n    }\n  } while ((currentElement = currentElement.parentNode) &&\n            currentElement != opt_stopNode);\n  return false;\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Determines if value is actually an Array.\n * @param {*} value\n * @return {boolean}\n */\nfunction isArray(value) {\n  return Array.isArray(value);\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Simple wrapper around JSON.parse that casts the return value\n * to JsonObject.\n * Create a new wrapper if an array return value is desired.\n * @param {*} json JSON string to parse\n * @return {?JsonObject|undefined} May be extend to parse arrays.\n */\nfunction parseJson(json) {\n  return /** @type {?JsonObject} */(JSON.parse(/** @type {string} */ (json)));\n}\n\n/**\n * Parses the given `json` string without throwing an exception if not valid.\n * Returns `undefined` if parsing fails.\n * Returns the `Object` corresponding to the JSON string when parsing succeeds.\n * @param {*} json JSON string to parse\n * @param {function(!Error)=} opt_onFailed Optional function that will be called\n *     with the error if parsing fails.\n * @return {?JsonObject|undefined} May be extend to parse arrays.\n */\nfunction tryParseJson(json, opt_onFailed) {\n  try {\n    return parseJson(json);\n  } catch (e) {\n    if (opt_onFailed) {\n      opt_onFailed(e);\n    }\n    return undefined;\n  }\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst ALREADY_SEEN = '__SWG-SEEN__';\n\n\n/**\n */\nclass PageConfigResolver {\n\n  /**\n   * @param {!Window|!Document|!Doc} winOrDoc\n   */\n  constructor(winOrDoc) {\n    /** @private @const {!Doc} */\n    this.doc_ = resolveDoc(winOrDoc);\n\n    /** @private {?function((!PageConfig|!Promise))} */\n    this.configResolver_ = null;\n\n    /** @private @const {!Promise<!PageConfig>} */\n    this.configPromise_ = new Promise(resolve => {\n      this.configResolver_ = resolve;\n    });\n\n    /** @private @const {!MetaParser} */\n    this.metaParser_ = new MetaParser(this.doc_);\n    /** @private @const {!JsonLdParser} */\n    this.ldParser_ = new JsonLdParser(this.doc_);\n    /** @private @const {!MicrodataParser} */\n    this.microdataParser_ = new MicrodataParser(this.doc_);\n  }\n\n  /**\n   * @return {!Promise<!PageConfig>}\n   */\n  resolveConfig() {\n    // Try resolve the config at different times.\n    Promise.resolve().then(this.check.bind(this));\n    this.doc_.whenReady().then(this.check.bind(this));\n    return this.configPromise_;\n  }\n\n  /**\n   * @return {?PageConfig}\n   */\n  check() {\n    // Already resolved.\n    if (!this.configResolver_) {\n      return null;\n    }\n    let config = this.metaParser_.check();\n    if (!config) {\n      config = this.ldParser_.check();\n    }\n    if (!config) {\n      config = this.microdataParser_.check();\n    }\n    if (config) {\n      // Product ID has been found: initialize the rest of the config.\n      this.configResolver_(config);\n      this.configResolver_ = null;\n    } else if (this.doc_.isReady()) {\n      this.configResolver_(Promise.reject(\n          new Error('No config could be discovered in the page')));\n      this.configResolver_ = null;\n    }\n    return config;\n  }\n}\n\n\nclass MetaParser {\n  /**\n   * @param {!Doc} doc\n   */\n  constructor(doc) {\n    /** @private @const {!Doc} */\n    this.doc_ = doc;\n  }\n\n  /**\n   * @return {?PageConfig}\n   */\n  check() {\n    if (!this.doc_.getBody()) {\n      // Wait until the whole `<head>` is parsed.\n      return null;\n    }\n\n    // Try to find product id.\n    const productId = getMetaTag(this.doc_.getRootNode(),\n        'subscriptions-product-id');\n    if (!productId) {\n      return null;\n    }\n\n    // Is locked?\n    const accessibleForFree = getMetaTag(this.doc_.getRootNode(),\n        'subscriptions-accessible-for-free');\n    const locked = (accessibleForFree &&\n        accessibleForFree.toLowerCase() == 'false') || false;\n\n    return new PageConfig(productId, locked);\n  }\n}\n\n\nclass JsonLdParser {\n  /**\n   * @param {!Doc} doc\n   */\n  constructor(doc) {\n    /** @private @const {!Doc} */\n    this.doc_ = doc;\n  }\n\n  /**\n   * @return {?PageConfig}\n   */\n  check() {\n    if (!this.doc_.getBody()) {\n      // Wait until the whole `<head>` is parsed.\n      return null;\n    }\n\n    const domReady = this.doc_.isReady();\n\n    // type: 'application/ld+json'\n    const elements = this.doc_.getRootNode().querySelectorAll(\n        'script[type=\"application/ld+json\"]');\n    for (let i = 0; i < elements.length; i++) {\n      const element = elements[i];\n      if (element[ALREADY_SEEN] ||\n          !element.textContent ||\n          !domReady && !hasNextNodeInDocumentOrder(element)) {\n        continue;\n      }\n      element[ALREADY_SEEN] = true;\n      if (element.textContent.indexOf('NewsArticle') == -1) {\n        continue;\n      }\n      const possibleConfig = this.tryExtractConfig_(element);\n      if (possibleConfig) {\n        return possibleConfig;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * @param {!Element} element\n   * @return {?PageConfig}\n   */\n  tryExtractConfig_(element) {\n    const json = tryParseJson(element.textContent);\n    if (!json) {\n      return null;\n    }\n\n    // Must be a NewsArticle.\n    if (!this.checkType_(json, 'NewsArticle')) {\n      return null;\n    }\n\n    // Must have a isPartOf[@type=Product].\n    let productId = null;\n    const partOfArray = this.valueArray_(json, 'isPartOf');\n    if (partOfArray) {\n      for (let i = 0; i < partOfArray.length; i++) {\n        productId = this.discoverProductId_(partOfArray[i]);\n        if (productId) {\n          break;\n        }\n      }\n    }\n    if (!productId) {\n      return null;\n    }\n\n    // Found product id, just check for the access flag.\n    const isAccessibleForFree = this.bool_(\n        this.singleValue_(json, 'isAccessibleForFree'),\n        /* default */ true);\n\n    return new PageConfig(productId, !isAccessibleForFree);\n  }\n\n  /**\n   * @param {*} value\n   * @param {boolean} def\n   * @return {boolean}\n   */\n  bool_(value, def) {\n    if (value == null || value === '') {\n      return def;\n    }\n    if (typeof value == 'boolean') {\n      return value;\n    }\n    if (typeof value == 'string') {\n      const lowercase = value.toLowerCase();\n      if (lowercase == 'false') {\n        return false;\n      }\n      if (lowercase == 'true') {\n        return true;\n      }\n    }\n    return def;\n  }\n\n  /**\n   * @param {!Object} json\n   * @return {?string}\n   */\n  discoverProductId_(json) {\n    // Must have type `Product`.\n    if (!this.checkType_(json, 'Product')) {\n      return null;\n    }\n    return /** @type {?string} */ (this.singleValue_(json, 'productID'));\n  }\n\n  /**\n   * @param {!Object} json\n   * @param {string} name\n   * @return {?Array}\n   */\n  valueArray_(json, name) {\n    const value = json[name];\n    if (value == null || value === '') {\n      return null;\n    }\n    return isArray(value) ? value : [value];\n  }\n\n  /**\n   * @param {!Object} json\n   * @param {string} name\n   * @return {*}\n   */\n  singleValue_(json, name) {\n    const valueArray = this.valueArray_(json, name);\n    const value = valueArray && valueArray[0];\n    return (value == null || value === '') ? null : value;\n  }\n\n  /**\n   * @param {!Object} json\n   * @param {string} expectedType\n   * @return {boolean}\n   */\n  checkType_(json, expectedType) {\n    const typeArray = this.valueArray_(json, '@type');\n    if (!typeArray) {\n      return false;\n    }\n    return (typeArray.includes(expectedType) ||\n        typeArray.includes('http://schema.org/' + expectedType));\n  }\n}\n\nclass MicrodataParser {\n  /**\n   * @param {!Doc} doc\n   */\n  constructor(doc) {\n    /** @private @const {!Doc} */\n    this.doc_ = doc;\n    /** @private {?boolean} */\n    this.access_ = null;\n    /** @private {?string} */\n    this.productId_ = null;\n  }\n\n  /**\n   * Returns false if access is restricted, otherwise true\n   * @param {!Element} root An element that is an item of type 'NewsArticle'\n   * @return {?boolean} locked access\n   * @private\n   */\n  discoverAccess_(root) {\n    const ALREADY_SEEN = 'alreadySeenForAccessInfo';\n    const nodeList = root\n        .querySelectorAll(\"[itemprop='isAccessibleForFree']\");\n    for (let i = 0; nodeList[i]; i++) {\n      const element = nodeList[i];\n      const content = element.getAttribute('content') || element.textContent;\n      if (!content) {\n        continue;\n      }\n      if (this.isValidElement_(element, root, ALREADY_SEEN)) {\n        let accessForFree = null;\n        if (content.toLowerCase() == 'true') {\n          accessForFree = true;\n        } else if (content.toLowerCase() == 'false') {\n          accessForFree = false;\n        }\n        return accessForFree;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Verifies if an element is valid based on the following\n   * - child of an item of type 'NewsArticle'\n   * - not a child of an item of any other type\n   * - not seen before, marked using the alreadySeen tag\n   * @param {?Element} current the element to be verified\n   * @param {!Element} root the parent to track up to\n   * @param {!string} alreadySeen used to tag already visited nodes\n   * @return {!boolean} valid node\n   * @private\n   */\n  isValidElement_(current, root, alreadySeen) {\n    for (let node = current;\n        node && !node[alreadySeen]; node = node.parentNode) {\n      node[alreadySeen] = true;\n      if (node.hasAttribute('itemscope')) {\n        /**{?string} */\n        const type = node.getAttribute('itemtype');\n        if (type.indexOf('http://schema.org/NewsArticle') >= 0) {\n          return true;\n        } else {\n          return false;\n        }\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Obtains the product ID that meets the requirements\n   * - child of an item of type 'NewsArticle'\n   * - Not a child of an item of type 'Section'\n   * - child of an item of type 'productID'\n   * @param {!Element} root An element that is an item of type 'NewsArticle'\n   * @return {?string} product ID, if found\n   * @private\n   */\n  discoverProductId_(root) {\n    const ALREADY_SEEN = 'alreadySeenForProductInfo';\n    const nodeList = root\n        .querySelectorAll('[itemprop=\"productID\"]');\n    for (let i = 0; nodeList[i]; i++) {\n      const element = nodeList[i];\n      const content = element.getAttribute('content') || element.textContent;\n      const item = element.closest('[itemtype][itemscope]');\n      const type = item.getAttribute('itemtype');\n      if (type.indexOf('http://schema.org/Product') <= -1) {\n        continue;\n      }\n      if (this.isValidElement_(item.parentElement, root, ALREADY_SEEN)) {\n        return content;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Returns PageConfig if available\n   * @return {?PageConfig} PageConfig found so far\n   */\n  getPageConfig_() {\n    let locked = null;\n    if (this.access_ != null) {\n      locked = !this.access_;\n    } else if (this.doc_.isReady()) {\n      // Default to unlocked\n      locked = false;\n    }\n    if (this.productId_ != null && locked != null) {\n      return new PageConfig(this.productId_, locked);\n    }\n    return null;\n  }\n\n  /**\n   * Extracts page config from Microdata in the DOM\n   * @return {?PageConfig} PageConfig found\n   */\n  tryExtractConfig_() {\n    let config = this.getPageConfig_();\n    if (config) {\n      return config;\n    }\n    const nodeList = this.doc_.getRootNode().querySelectorAll(\n        '[itemscope][itemtype*=\"http://schema.org/NewsArticle\"]');\n    for (let i = 0; nodeList[i] && config == null; i++) {\n      const element = nodeList[i];\n      if (this.access_ == null) {\n        this.access_ = this.discoverAccess_(element);\n      }\n      if (!this.productId_) {\n        this.productId_ = this.discoverProductId_(element);\n      }\n      config = this.getPageConfig_();\n    }\n    return config;\n  }\n\n  /**\n   * @return {?PageConfig}\n   */\n  check() {\n    if (!this.doc_.getBody()) {\n      // Wait until the whole `<head>` is parsed.\n      return null;\n    }\n    return this.tryExtractConfig_();\n  }\n}\n\n/**\n * Returns the value from content attribute of a meta tag with given name.\n *\n * If multiple tags are found, the first value is returned.\n *\n * @param {!Node} rootNode\n * @param {string} name The tag name to look for.\n * @return {?string} attribute value or empty string.\n * @private\n */\nfunction getMetaTag(rootNode, name) {\n  const el = rootNode.querySelector(`meta[name=\"${name}\"]`);\n  if (el) {\n    return el.getAttribute('content');\n  }\n  return null;\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nexport {\n  Doc,\n  PageConfig,\n  PageConfigResolver,\n};\n","/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/** Version: 0.1.22.23 */\n/**\n * @license\n * Copyright 2017 The Web Activities Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*eslint no-unused-vars: 0*/\n\n\n/**\n * @enum {string}\n */\nconst ActivityMode = {\n  IFRAME: 'iframe',\n  POPUP: 'popup',\n  REDIRECT: 'redirect',\n};\n\n\n/**\n * The result code used for `ActivityResult`.\n * @enum {string}\n */\nconst ActivityResultCode = {\n  OK: 'ok',\n  CANCELED: 'canceled',\n  FAILED: 'failed',\n};\n\n\n/**\n * The result of an activity. The activity implementation returns this object\n * for a successful result, a cancelation or a failure.\n * @struct\n */\nclass ActivityResult {\n  /**\n   * @param {!ActivityResultCode} code\n   * @param {*} data\n   * @param {!ActivityMode} mode\n   * @param {string} origin\n   * @param {boolean} originVerified\n   * @param {boolean} secureChannel\n   */\n  constructor(code, data, mode, origin, originVerified, secureChannel) {\n    /** @const {!ActivityResultCode} */\n    this.code = code;\n    /** @const {*} */\n    this.data = code == ActivityResultCode.OK ? data : null;\n    /** @const {!ActivityMode} */\n    this.mode = mode;\n    /** @const {string} */\n    this.origin = origin;\n    /** @const {boolean} */\n    this.originVerified = originVerified;\n    /** @const {boolean} */\n    this.secureChannel = secureChannel;\n    /** @const {boolean} */\n    this.ok = code == ActivityResultCode.OK;\n    /** @const {?Error} */\n    this.error = code == ActivityResultCode.FAILED ?\n        new Error(String(data) || '') :\n        null;\n  }\n}\n\n\n/**\n * The activity request that different types of hosts can be started with.\n * @typedef {{\n *   requestId: string,\n *   returnUrl: string,\n *   args: ?Object,\n *   origin: (string|undefined),\n *   originVerified: (boolean|undefined),\n * }}\n */\nlet ActivityRequest;\n\n\n/**\n * The activity \"open\" options used for popups and redirects.\n *\n * - returnUrl: override the return URL. By default, the current URL will be\n *   used.\n * - skipRequestInUrl: removes the activity request from the URL, in case\n *   redirect is used. By default, the activity request is appended to the\n *   activity URL. This option can be used if the activity request is passed\n *   to the activity by some alternative means.\n *\n * @typedef {{\n *   returnUrl: (string|undefined),\n *   skipRequestInUrl: (boolean|undefined),\n *   width: (number|undefined),\n *   height: (number|undefined),\n * }}\n */\nlet ActivityOpenOptions;\n\n\n/**\n * Activity client-side binding. The port provides limited ways to communicate\n * with the activity and receive signals and results from it. Not every type\n * of activity exposes a port.\n *\n * @interface\n */\nclass ActivityPort {\n\n  /**\n   * Returns the mode of the activity: iframe, popup or redirect.\n   * @return {!ActivityMode}\n   */\n  getMode() {}\n\n  /**\n   * Accepts the result when ready. The client should verify the activity's\n   * mode, origin, verification and secure channel flags before deciding\n   * whether or not to trust the result.\n   *\n   * Returns the promise that yields when the activity has been completed and\n   * either a result, a cancelation or a failure has been returned.\n   *\n   * @return {!Promise<!ActivityResult>}\n   */\n  acceptResult() {}\n}\n\n\n\n/** DOMException.ABORT_ERR name */\nconst ABORT_ERR_NAME = 'AbortError';\n\n/** DOMException.ABORT_ERR = 20 */\nconst ABORT_ERR_CODE = 20;\n\n/** @type {?HTMLAnchorElement} */\nlet aResolver;\n\n\n/**\n * @param {string} urlString\n * @return {!HTMLAnchorElement}\n */\nfunction parseUrl(urlString) {\n  if (!aResolver) {\n    aResolver = /** @type {!HTMLAnchorElement} */ (document.createElement('a'));\n  }\n  aResolver.href = urlString;\n  return /** @type {!HTMLAnchorElement} */ (aResolver);\n}\n\n\n/**\n * @param {!Location|!URL|!HTMLAnchorElement} loc\n * @return {string}\n */\nfunction getOrigin(loc) {\n  if (loc.origin) {\n    return loc.origin;\n  }\n  // Make sure that the origin is normalized. Specifically on IE, host sometimes\n  // includes the default port, which is not per standard.\n  const protocol = loc.protocol;\n  let host = loc.host;\n  if (protocol == 'https:' && host.indexOf(':443') == host.length - 4) {\n    host = host.replace(':443', '');\n  } else if (protocol == 'http:' && host.indexOf(':80') == host.length - 3) {\n    host = host.replace(':80', '');\n  }\n  return protocol + '//' + host;\n}\n\n\n/**\n * @param {string} urlString\n * @return {string}\n */\nfunction getOriginFromUrl(urlString) {\n  return getOrigin(parseUrl(urlString));\n}\n\n\n/**\n * @param {string} urlString\n * @return {string}\n */\nfunction removeFragment(urlString) {\n  const index = urlString.indexOf('#');\n  if (index == -1) {\n    return urlString;\n  }\n  return urlString.substring(0, index);\n}\n\n\n/**\n * Parses and builds Object of URL query string.\n * @param {string} query The URL query string.\n * @return {!Object<string, string>}\n */\nfunction parseQueryString(query) {\n  if (!query) {\n    return {};\n  }\n  return (/^[?#]/.test(query) ? query.slice(1) : query)\n      .split('&')\n      .reduce((params, param) => {\n        const item = param.split('=');\n        const key = decodeURIComponent(item[0] || '');\n        const value = decodeURIComponent(item[1] || '');\n        if (key) {\n          params[key] = value;\n        }\n        return params;\n      }, {});\n}\n\n\n/**\n * @param {string} queryString  A query string in the form of \"a=b&c=d\". Could\n *   be optionally prefixed with \"?\" or \"#\".\n * @param {string} param The param to get from the query string.\n * @return {?string}\n */\nfunction getQueryParam(queryString, param) {\n  return parseQueryString(queryString)[param];\n}\n\n\n/**\n * Add a query-like parameter to the fragment string.\n * @param {string} url\n * @param {string} param\n * @param {string} value\n * @return {string}\n */\nfunction addFragmentParam(url, param, value) {\n  return url +\n      (url.indexOf('#') == -1 ? '#' : '&') +\n      encodeURIComponent(param) + '=' + encodeURIComponent(value);\n}\n\n\n/**\n * @param {string} queryString  A query string in the form of \"a=b&c=d\". Could\n *   be optionally prefixed with \"?\" or \"#\".\n * @param {string} param The param to remove from the query string.\n * @return {?string}\n */\nfunction removeQueryParam(queryString, param) {\n  if (!queryString) {\n    return queryString;\n  }\n  const search = encodeURIComponent(param) + '=';\n  let index = -1;\n  do {\n    index = queryString.indexOf(search, index);\n    if (index != -1) {\n      const prev = index > 0 ? queryString.substring(index - 1, index) : '';\n      if (prev == '' || prev == '?' || prev == '#' || prev == '&') {\n        let end = queryString.indexOf('&', index + 1);\n        if (end == -1) {\n          end = queryString.length;\n        }\n        queryString =\n            queryString.substring(0, index) +\n            queryString.substring(end + 1);\n      } else {\n        index++;\n      }\n    }\n  } while (index != -1 && index < queryString.length);\n  return queryString;\n}\n\n\n/**\n * @param {!ActivityRequest} request\n * @return {string}\n */\nfunction serializeRequest(request) {\n  const map = {\n    'requestId': request.requestId,\n    'returnUrl': request.returnUrl,\n    'args': request.args,\n  };\n  if (request.origin !== undefined) {\n    map['origin'] = request.origin;\n  }\n  if (request.originVerified !== undefined) {\n    map['originVerified'] = request.originVerified;\n  }\n  return JSON.stringify(map);\n}\n\n\n/**\n * Creates or emulates a DOMException of AbortError type.\n * See https://heycam.github.io/webidl/#aborterror.\n * @param {!Window} win\n * @param {string=} opt_message\n * @return {!DOMException}\n */\nfunction createAbortError(win, opt_message) {\n  const message = 'AbortError' + (opt_message ? ': ' + opt_message : '');\n  let error = null;\n  if (typeof win['DOMException'] == 'function') {\n    // TODO(dvoytenko): remove typecast once externs are fixed.\n    const constr = /** @type {function(new:DOMException, string, string)} */ (\n        win['DOMException']);\n    try {\n      error = new constr(message, ABORT_ERR_NAME);\n    } catch (e) {\n      // Ignore. In particular, `new DOMException()` fails in Edge.\n    }\n  }\n  if (!error) {\n    // TODO(dvoytenko): remove typecast once externs are fixed.\n    const constr = /** @type {function(new:DOMException, string)} */ (\n        Error);\n    error = new constr(message);\n    error.name = ABORT_ERR_NAME;\n    error.code = ABORT_ERR_CODE;\n  }\n  return error;\n}\n\n\n/**\n * Resolves the activity result as a promise:\n *  - `OK` result is yielded as the promise's payload;\n *  - `CANCEL` result is rejected with the `AbortError`;\n *  - `FAILED` result is rejected with the embedded error.\n *\n * @param {!Window} win\n * @param {!ActivityResult} result\n * @param {function((!ActivityResult|!Promise))} resolver\n */\nfunction resolveResult(win, result, resolver) {\n  if (result.ok) {\n    resolver(result);\n  } else {\n    const error = result.error || createAbortError(win);\n    error.activityResult = result;\n    resolver(Promise.reject(error));\n  }\n}\n\n\n/**\n * @param {!Window} win\n * @return {boolean}\n */\nfunction isIeBrowser(win) {\n  // MSIE and Trident are typical user agents for IE browsers.\n  const nav = win.navigator;\n  return /Trident|MSIE|IEMobile/i.test(nav && nav.userAgent);\n}\n\n\n/**\n * @param {!Window} win\n * @return {boolean}\n */\nfunction isEdgeBrowser(win) {\n  const nav = win.navigator;\n  return /Edge/i.test(nav && nav.userAgent);\n}\n\n\n\nconst SENTINEL = '__ACTIVITIES__';\n\n\n/**\n * The messenger helper for activity's port and host.\n */\nclass Messenger {\n\n  /**\n   * @param {!Window} win\n   * @param {!Window|function():?Window} targetOrCallback\n   * @param {?string} targetOrigin\n   */\n  constructor(win, targetOrCallback, targetOrigin) {\n    /** @private @const {!Window} */\n    this.win_ = win;\n    /** @private @const {!Window|function():?Window} */\n    this.targetOrCallback_ = targetOrCallback;\n\n    /**\n     * May start as unknown (`null`) until received in the first message.\n     * @private {?string}\n     */\n    this.targetOrigin_ = targetOrigin;\n\n    /** @private {?Window} */\n    this.target_ = null;\n\n    /** @private {boolean} */\n    this.acceptsChannel_ = false;\n\n    /** @private {?MessagePort} */\n    this.port_ = null;\n\n    /** @private {?function(string, ?Object)} */\n    this.onCommand_ = null;\n\n    /** @private {?function(!Object)} */\n    this.onCustomMessage_ = null;\n\n    /**\n     * @private {?Object<string, !ChannelHolder>}\n     */\n    this.channels_ = null;\n\n    /** @private @const */\n    this.boundHandleEvent_ = this.handleEvent_.bind(this);\n  }\n\n  /**\n   * Connect the port to the host or vice versa.\n   * @param {function(string, ?Object)} onCommand\n   */\n  connect(onCommand) {\n    if (this.onCommand_) {\n      throw new Error('already connected');\n    }\n    this.onCommand_ = onCommand;\n    this.win_.addEventListener('message', this.boundHandleEvent_);\n  }\n\n  /**\n   * Disconnect messenger.\n   */\n  disconnect() {\n    if (this.onCommand_) {\n      this.onCommand_ = null;\n      if (this.port_) {\n        closePort(this.port_);\n        this.port_ = null;\n      }\n      this.win_.removeEventListener('message', this.boundHandleEvent_);\n      if (this.channels_) {\n        for (const k in this.channels_) {\n          const channelObj = this.channels_[k];\n          if (channelObj.port1) {\n            closePort(channelObj.port1);\n          }\n          if (channelObj.port2) {\n            closePort(channelObj.port2);\n          }\n        }\n        this.channels_ = null;\n      }\n    }\n  }\n\n  /**\n   * Returns whether the messenger has been connected already.\n   * @return {boolean}\n   */\n  isConnected() {\n    return this.targetOrigin_ != null;\n  }\n\n  /**\n   * Returns the messaging target. Only available when connection has been\n   * establihsed.\n   * @return {!Window}\n   */\n  getTarget() {\n    const target = this.getOptionalTarget_();\n    if (!target) {\n      throw new Error('not connected');\n    }\n    return target;\n  }\n\n  /**\n   * @return {?Window}\n   * @private\n   */\n  getOptionalTarget_() {\n    if (this.onCommand_ && !this.target_) {\n      if (typeof this.targetOrCallback_ == 'function') {\n        this.target_ = this.targetOrCallback_();\n      } else {\n        this.target_ = /** @type {!Window} */ (this.targetOrCallback_);\n      }\n    }\n    return this.target_;\n  }\n\n  /**\n   * Returns the messaging origin. Only available when connection has been\n   * establihsed.\n   * @return {string}\n   */\n  getTargetOrigin() {\n    if (this.targetOrigin_ == null) {\n      throw new Error('not connected');\n    }\n    return this.targetOrigin_;\n  }\n\n  /**\n   * The host sends this message to the client to indicate that it's ready to\n   * start communicating. The client is expected to respond back with the\n   * \"start\" command. See `sendStartCommand` method.\n   */\n  sendConnectCommand() {\n    // TODO(dvoytenko): MessageChannel is critically necessary for IE/Edge,\n    // since window messaging doesn't always work. It's also preferred as an API\n    // for other browsers: it's newer, cleaner and arguably more secure.\n    // Unfortunately, browsers currently do not propagate user gestures via\n    // MessageChannel, only via window messaging. This should be re-enabled\n    // once browsers fix user gesture propagation.\n    // See:\n    // Safari: https://bugs.webkit.org/show_bug.cgi?id=186593\n    // Chrome: https://bugs.chromium.org/p/chromium/issues/detail?id=851493\n    // Firefox: https://bugzilla.mozilla.org/show_bug.cgi?id=1469422\n    const acceptsChannel = isIeBrowser(this.win_) || isEdgeBrowser(this.win_);\n    this.sendCommand('connect', {'acceptsChannel': acceptsChannel});\n  }\n\n  /**\n   * The client sends this message to the host upon receiving the \"connect\"\n   * message to start the main communication channel. As a payload, the message\n   * will contain the provided start arguments.\n   * @param {?Object} args\n   */\n  sendStartCommand(args) {\n    let channel = null;\n    if (this.acceptsChannel_ && typeof this.win_.MessageChannel == 'function') {\n      channel = new this.win_.MessageChannel();\n    }\n    if (channel) {\n      this.sendCommand('start', args, [channel.port2]);\n      // It's critical to switch to port messaging only after \"start\" has been\n      // sent. Otherwise, it won't be delivered.\n      this.switchToChannel_(channel.port1);\n    } else {\n      this.sendCommand('start', args);\n    }\n  }\n\n  /**\n   * Sends the specified command from the port to the host or vice versa.\n   * @param {string} cmd\n   * @param {?Object=} opt_payload\n   * @param {?Array=} opt_transfer\n   */\n  sendCommand(cmd, opt_payload, opt_transfer) {\n    const data = {\n      'sentinel': SENTINEL,\n      'cmd': cmd,\n      'payload': opt_payload || null,\n    };\n    if (this.port_) {\n      this.port_.postMessage(data, opt_transfer || undefined);\n    } else {\n      const target = this.getTarget();\n      // Only \"connect\" command is allowed to use `targetOrigin == '*'`\n      const targetOrigin =\n          cmd == 'connect' ?\n          (this.targetOrigin_ != null ? this.targetOrigin_ : '*') :\n          this.getTargetOrigin();\n      target.postMessage(data, targetOrigin, opt_transfer || undefined);\n    }\n  }\n\n  /**\n   * Sends a message to the client.\n   * @param {!Object} payload\n   */\n  customMessage(payload) {\n    this.sendCommand('msg', payload);\n  }\n\n  /**\n   * Registers a callback to receive messages from the client.\n   * @param {function(!Object)} callback\n   */\n  onCustomMessage(callback) {\n    this.onCustomMessage_ = callback;\n  }\n\n  /**\n   * @param {string=} opt_name\n   * @return {!Promise<!MessagePort>}\n   */\n  startChannel(opt_name) {\n    const name = opt_name || '';\n    const channelObj = this.getChannelObj_(name);\n    if (!channelObj.port1) {\n      const channel = new this.win_.MessageChannel();\n      channelObj.port1 = channel.port1;\n      channelObj.port2 = channel.port2;\n      channelObj.resolver(channelObj.port1);\n    }\n    if (channelObj.port2) {\n      // Not yet sent.\n      this.sendCommand('cnset', {'name': name}, [channelObj.port2]);\n      channelObj.port2 = null;\n    }\n    return channelObj.promise;\n  }\n\n  /**\n   * @param {string=} opt_name\n   * @return {!Promise<!MessagePort>}\n   */\n  askChannel(opt_name) {\n    const name = opt_name || '';\n    const channelObj = this.getChannelObj_(name);\n    if (!channelObj.port1) {\n      this.sendCommand('cnget', {'name': name});\n    }\n    return channelObj.promise;\n  }\n\n  /**\n   * @param {string} name\n   * @param {!MessagePort} port\n   * @private\n   */\n  receiveChannel_(name, port) {\n    const channelObj = this.getChannelObj_(name);\n    channelObj.port1 = port;\n    channelObj.resolver(port);\n  }\n\n  /**\n   * @param {string} name\n   * @return {!ChannelHolder}\n   */\n  getChannelObj_(name) {\n    if (!this.channels_) {\n      this.channels_ = {};\n    }\n    let channelObj = this.channels_[name];\n    if (!channelObj) {\n      let resolver;\n      const promise = new Promise(resolve => {\n        resolver = resolve;\n      });\n      channelObj = {\n        port1: null,\n        port2: null,\n        resolver,\n        promise,\n      };\n      this.channels_[name] = channelObj;\n    }\n    return channelObj;\n  }\n\n  /**\n   * @param {!MessagePort} port\n   * @private\n   */\n  switchToChannel_(port) {\n    if (this.port_) {\n      closePort(this.port_);\n    }\n    this.port_ = port;\n    this.port_.onmessage = event => {\n      const data = event.data;\n      const cmd = data && data['cmd'];\n      const payload = data && data['payload'] || null;\n      if (cmd) {\n        this.handleCommand_(cmd, payload, event);\n      }\n    };\n    // Even though all messaging will switch to ports, the window-based message\n    // listener will be preserved just in case the host is refreshed and needs\n    // another connection.\n  }\n\n  /**\n   * @param {!MessageEvent} event\n   * @private\n   */\n  handleEvent_(event) {\n    const data = event.data;\n    if (!data || data['sentinel'] != SENTINEL) {\n      return;\n    }\n    const cmd = data['cmd'];\n    if (this.port_ && cmd != 'connect' && cmd != 'start') {\n      // Messaging channel has already taken over. However, the \"connect\" and\n      // \"start\" commands are allowed to proceed in case re-connection is\n      // requested.\n      return;\n    }\n    const origin = /** @type {string} */ (event.origin);\n    const payload = data['payload'] || null;\n    if (this.targetOrigin_ == null && cmd == 'start') {\n      this.targetOrigin_ = origin;\n    }\n    if (this.targetOrigin_ == null && event.source) {\n      if (this.getOptionalTarget_() == event.source) {\n        this.targetOrigin_ = origin;\n      }\n    }\n    // Notice that event.source may differ from the target because of\n    // friendly-iframe intermediaries.\n    if (origin != this.targetOrigin_) {\n      return;\n    }\n    this.handleCommand_(cmd, payload, event);\n  }\n\n  /**\n   * @param {string} cmd\n   * @param {?Object} payload\n   * @param {!MessageEvent} event\n   * @private\n   */\n  handleCommand_(cmd, payload, event) {\n    if (cmd == 'connect') {\n      if (this.port_) {\n        // In case the port has already been open - close it to reopen it\n        // again later.\n        closePort(this.port_);\n        this.port_ = null;\n      }\n      this.acceptsChannel_ = payload && payload['acceptsChannel'] || false;\n      this.onCommand_(cmd, payload);\n    } else if (cmd == 'start') {\n      const port = event.ports && event.ports[0];\n      if (port) {\n        this.switchToChannel_(port);\n      }\n      this.onCommand_(cmd, payload);\n    } else if (cmd == 'msg') {\n      if (this.onCustomMessage_ != null && payload != null) {\n        this.onCustomMessage_(payload);\n      }\n    } else if (cmd == 'cnget') {\n      const name = payload['name'];\n      this.startChannel(name);\n    } else if (cmd == 'cnset') {\n      const name = payload['name'];\n      const port = event.ports[0];\n      this.receiveChannel_(name, /** @type {!MessagePort} */ (port));\n    } else {\n      this.onCommand_(cmd, payload);\n    }\n  }\n}\n\n\n/**\n * @param {!MessagePort} port\n */\nfunction closePort(port) {\n  try {\n    port.close();\n  } catch (e) {\n    // Ignore.\n  }\n}\n\n\n\n\n/**\n * The `ActivityPort` implementation for the iframe case. Unlike other types\n * of activities, iframe-based activities are always connected and can react\n * to size requests.\n *\n * @implements {ActivityPort}\n */\nclass ActivityIframePort {\n\n  /**\n   * @param {!HTMLIFrameElement} iframe\n   * @param {string} url\n   * @param {?Object=} opt_args\n   */\n  constructor(iframe, url, opt_args) {\n    /** @private @const {!HTMLIFrameElement} */\n    this.iframe_ = iframe;\n    /** @private @const {string} */\n    this.url_ = url;\n    /** @private @const {?Object} */\n    this.args_ = opt_args || null;\n\n    /** @private @const {!Window} */\n    this.win_ = /** @type {!Window} */ (this.iframe_.ownerDocument.defaultView);\n\n    /** @private @const {string} */\n    this.targetOrigin_ = getOriginFromUrl(url);\n\n    /** @private {boolean} */\n    this.connected_ = false;\n\n    /** @private {?function()} */\n    this.connectedResolver_ = null;\n\n    /** @private @const {!Promise} */\n    this.connectedPromise_ = new Promise(resolve => {\n      this.connectedResolver_ = resolve;\n    });\n\n    /** @private {?function()} */\n    this.readyResolver_ = null;\n\n    /** @private @const {!Promise} */\n    this.readyPromise_ = new Promise(resolve => {\n      this.readyResolver_ = resolve;\n    });\n\n    /** @private {?function((!ActivityResult|!Promise))} */\n    this.resultResolver_ = null;\n\n    /** @private @const {!Promise<!ActivityResult>} */\n    this.resultPromise_ = new Promise(resolve => {\n      this.resultResolver_ = resolve;\n    });\n\n    /** @private {?function(number)} */\n    this.onResizeRequest_ = null;\n\n    /** @private {?number} */\n    this.requestedHeight_ = null;\n\n    /** @private @const {!Messenger} */\n    this.messenger_ = new Messenger(\n        this.win_,\n        () => this.iframe_.contentWindow,\n        this.targetOrigin_);\n  }\n\n  /** @override */\n  getMode() {\n    return ActivityMode.IFRAME;\n  }\n\n  /**\n   * Waits until the activity port is connected to the host.\n   * @return {!Promise}\n   */\n  connect() {\n    if (!this.win_.document.documentElement.contains(this.iframe_)) {\n      throw new Error('iframe must be in DOM');\n    }\n    this.messenger_.connect(this.handleCommand_.bind(this));\n    this.iframe_.src = this.url_;\n    return this.connectedPromise_;\n  }\n\n  /**\n   * Disconnect the activity binding and cleanup listeners.\n   */\n  disconnect() {\n    this.connected_ = false;\n    this.messenger_.disconnect();\n  }\n\n  /** @override */\n  acceptResult() {\n    return this.resultPromise_;\n  }\n\n  /**\n   * Sends a message to the host.\n   * @param {!Object} payload\n   */\n  message(payload) {\n    this.messenger_.customMessage(payload);\n  }\n\n  /**\n   * Registers a callback to receive messages from the host.\n   * @param {function(!Object)} callback\n   */\n  onMessage(callback) {\n    this.messenger_.onCustomMessage(callback);\n  }\n\n  /**\n   * Creates a new communication channel or returns an existing one.\n   * @param {string=} opt_name\n   * @return {!Promise<!MessagePort>}\n   */\n  messageChannel(opt_name) {\n    return this.messenger_.askChannel(opt_name);\n  }\n\n  /**\n   * Returns a promise that yields when the iframe is ready to be interacted\n   * with.\n   * @return {!Promise}\n   */\n  whenReady() {\n    return this.readyPromise_;\n  }\n\n  /**\n   * Register a callback to handle resize requests. Once successfully resized,\n   * ensure to call `resized()` method.\n   * @param {function(number)} callback\n   */\n  onResizeRequest(callback) {\n    this.onResizeRequest_ = callback;\n    Promise.resolve().then(() => {\n      if (this.requestedHeight_ != null) {\n        callback(this.requestedHeight_);\n      }\n    });\n  }\n\n  /**\n   * Signals back to the activity implementation that the client has updated\n   * the activity's size.\n   */\n  resized() {\n    if (!this.connected_) {\n      return;\n    }\n    const height = this.iframe_.offsetHeight;\n    this.messenger_.sendCommand('resized', {'height': height});\n  }\n\n  /**\n   * @param {string} cmd\n   * @param {?Object} payload\n   * @private\n   */\n  handleCommand_(cmd, payload) {\n    if (cmd == 'connect') {\n      // First ever message. Indicates that the receiver is listening.\n      this.connected_ = true;\n      this.messenger_.sendStartCommand(this.args_);\n      this.connectedResolver_();\n    } else if (cmd == 'result') {\n      // The last message. Indicates that the result has been received.\n      if (this.resultResolver_) {\n        const code = /** @type {!ActivityResultCode} */ (payload['code']);\n        const data =\n            code == ActivityResultCode.FAILED ?\n            new Error(payload['data'] || '') :\n            payload['data'];\n        const result = new ActivityResult(\n            code,\n            data,\n            ActivityMode.IFRAME,\n            this.messenger_.getTargetOrigin(),\n            /* originVerified */ true,\n            /* secureChannel */ true);\n        resolveResult(this.win_, result, this.resultResolver_);\n        this.resultResolver_ = null;\n        this.messenger_.sendCommand('close');\n        this.disconnect();\n      }\n    } else if (cmd == 'ready') {\n      if (this.readyResolver_) {\n        this.readyResolver_();\n        this.readyResolver_ = null;\n      }\n    } else if (cmd == 'resize') {\n      this.requestedHeight_ = /** @type {number} */ (payload['height']);\n      if (this.onResizeRequest_) {\n        this.onResizeRequest_(this.requestedHeight_);\n      }\n    }\n  }\n}\n\n\n\n\n/**\n * The `ActivityPort` implementation for the standalone window activity\n * client executed as a popup.\n *\n * @implements {ActivityPort}\n */\nclass ActivityWindowPort {\n\n  /**\n   * @param {!Window} win\n   * @param {string} requestId\n   * @param {string} url\n   * @param {string} target\n   * @param {?Object=} opt_args\n   * @param {?ActivityOpenOptions=} opt_options\n   */\n  constructor(win, requestId, url, target, opt_args, opt_options) {\n    const isValidTarget =\n        target &&\n        (target == '_blank' || target == '_top' || target[0] != '_');\n    if (!isValidTarget) {\n      throw new Error('The only allowed targets are \"_blank\", \"_top\"' +\n          ' and name targets');\n    }\n\n    /** @private @const {!Window} */\n    this.win_ = win;\n    /** @private @const {string} */\n    this.requestId_ = requestId;\n    /** @private @const {string} */\n    this.url_ = url;\n    /** @private @const {string} */\n    this.openTarget_ = target;\n    /** @private @const {?Object} */\n    this.args_ = opt_args || null;\n    /** @private @const {?ActivityOpenOptions} */\n    this.options_ = opt_options || null;\n\n    /** @private {?function((!ActivityResult|!Promise))} */\n    this.resultResolver_ = null;\n\n    /** @private @const {!Promise<!ActivityResult>} */\n    this.resultPromise_ = new Promise(resolve => {\n      this.resultResolver_ = resolve;\n    });\n\n    /** @private {?Window} */\n    this.targetWin_ = null;\n\n    /** @private {?number} */\n    this.heartbeatInterval_ = null;\n\n    /** @private {?Messenger} */\n    this.messenger_ = null;\n  }\n\n  /** @override */\n  getMode() {\n    return this.openTarget_ == '_top' ?\n        ActivityMode.REDIRECT :\n        ActivityMode.POPUP;\n  }\n\n  /**\n   * Opens the activity in a window, either as a popup or via redirect.\n   *\n   * Returns the promise that will yield when the window returns or closed.\n   * Notice, that this promise may never complete if \"redirect\" mode was used.\n   *\n   * @return {!Promise}\n   */\n  open() {\n    return this.openInternal_();\n  }\n\n  /**\n   * @return {?Window}\n   */\n  getTargetWin() {\n    return this.targetWin_;\n  }\n\n  /**\n   * Disconnect the activity binding and cleanup listeners.\n   */\n  disconnect() {\n    if (this.heartbeatInterval_) {\n      this.win_.clearInterval(this.heartbeatInterval_);\n      this.heartbeatInterval_ = null;\n    }\n    if (this.messenger_) {\n      this.messenger_.disconnect();\n      this.messenger_ = null;\n    }\n    if (this.targetWin_) {\n      // Try to close the popup window. The host will also try to do the same.\n      try {\n        this.targetWin_.close();\n      } catch (e) {\n        // Ignore.\n      }\n      this.targetWin_ = null;\n    }\n    this.resultResolver_ = null;\n  }\n\n  /** @override */\n  acceptResult() {\n    return this.resultPromise_;\n  }\n\n  /**\n   * This method wraps around window's open method. It first tries to execute\n   * `open` call with the provided target and if it fails, it retries the call\n   * with the `_top` target. This is necessary given that in some embedding\n   * scenarios, such as iOS' WKWebView, navigation to `_blank` and other targets\n   * is blocked by default.\n   * @return {!Promise}\n   * @private\n   */\n  openInternal_() {\n    const featuresStr = this.buildFeatures_();\n\n    // Protectively, the URL will contain the request payload, unless explicitly\n    // directed not to via `skipRequestInUrl` option.\n    let url = this.url_;\n    if (!(this.options_ && this.options_.skipRequestInUrl)) {\n      const returnUrl =\n          this.options_ && this.options_.returnUrl ||\n          removeFragment(this.win_.location.href);\n      const requestString = serializeRequest({\n        requestId: this.requestId_,\n        returnUrl,\n        args: this.args_,\n      });\n      url = addFragmentParam(url, '__WA__', requestString);\n    }\n\n    // Open the window.\n    let targetWin;\n    let openTarget = this.openTarget_;\n    // IE does not support CORS popups - the popup has to fallback to redirect\n    // mode.\n    if (openTarget != '_top') {\n      if (isIeBrowser(this.win_)) {\n        openTarget = '_top';\n      }\n    }\n    // Try first with the specified target. If we're inside the WKWebView or\n    // a similar environments, this method is expected to fail by default for\n    // all targets except `_top`.\n    try {\n      targetWin = this.win_.open(url, openTarget, featuresStr);\n    } catch (e) {\n      // Ignore.\n    }\n    // Then try with `_top` target.\n    if (!targetWin && openTarget != '_top') {\n      openTarget = '_top';\n      try {\n        targetWin = this.win_.open(url, openTarget);\n      } catch (e) {\n        // Ignore.\n      }\n    }\n\n    // Setup the target window.\n    if (targetWin) {\n      this.targetWin_ = targetWin;\n      if (openTarget != '_top') {\n        this.setupPopup_();\n      }\n    } else {\n      this.disconnectWithError_(new Error('failed to open window'));\n    }\n\n    // Return result promise, even though it may never complete.\n    return this.resultPromise_.catch(() => {\n      // Ignore. Call to the `acceptResult()` should fail if needed.\n    });\n  }\n\n  /**\n   * @return {string}\n   * @private\n   */\n  buildFeatures_() {\n    // The max width and heights are calculated as following:\n    // MaxSize = AvailSize - ControlsSize\n    // ControlsSize = OuterSize - InnerSize\n    const screen = this.win_.screen;\n    const availWidth = screen.availWidth || screen.width;\n    const availHeight = screen.availHeight || screen.height;\n    const isTop = this.isTopWindow_();\n    const isEdge = isEdgeBrowser(this.win_);\n    // Limit controls to 100px width and height. Notice that it's only\n    // possible to calculate controls size in the top window, not in iframes.\n    // Notice that the Edge behavior is somewhat unique. If we can't find the\n    // right width/height, it will launch in the full-screen. Other browsers\n    // deal with such cases more gracefully.\n    const controlsWidth =\n        isTop && this.win_.outerWidth > this.win_.innerWidth ?\n        Math.min(100, this.win_.outerWidth - this.win_.innerWidth) :\n        (isEdge ? 100 : 0);\n    const controlsHeight =\n        isTop && this.win_.outerHeight > this.win_.innerHeight ?\n        Math.min(100, this.win_.outerHeight - this.win_.innerHeight) :\n        (isEdge ? 100 : 0);\n    // With all the adjustments, at least 50% of the available width/height\n    // should be made available to a popup.\n    const maxWidth = Math.max(availWidth - controlsWidth, availWidth * 0.5);\n    const maxHeight = Math.max(availHeight - controlsHeight, availHeight * 0.5);\n    let w = Math.floor(Math.min(600, maxWidth * 0.9));\n    let h = Math.floor(Math.min(600, maxHeight * 0.9));\n    if (this.options_) {\n      if (this.options_.width) {\n        w = Math.min(this.options_.width, maxWidth);\n      }\n      if (this.options_.height) {\n        h = Math.min(this.options_.height, maxHeight);\n      }\n    }\n    const x = Math.floor((screen.width - w) / 2);\n    const y = Math.floor((screen.height - h) / 2);\n    const features = {\n      'height': h,\n      'width': w,\n      'resizable': 'yes',\n      'scrollbars': 'yes',\n    };\n    // Do not set left/top in Edge: it fails.\n    if (!isEdge) {\n      features['left'] = x;\n      features['top'] = y;\n    }\n    let featuresStr = '';\n    for (const f in features) {\n      if (featuresStr) {\n        featuresStr += ',';\n      }\n      featuresStr += `${f}=${features[f]}`;\n    }\n    return featuresStr;\n  }\n\n  /**\n   * This method only exists to make iframe/top emulation possible in tests.\n   * Otherwise `window.top` cannot be overridden.\n   * @return {boolean}\n   * @private\n   */\n  isTopWindow_() {\n    return this.win_ == this.win_.top;\n  }\n\n  /** @private */\n  setupPopup_() {\n    // Keep alive to catch the window closing, which would indicate\n    // \"cancel\" signal.\n    this.heartbeatInterval_ = this.win_.setInterval(() => {\n      this.check_(/* delayCancel */ true);\n    }, 500);\n\n    // Start up messaging. The messaging is explicitly allowed to proceed\n    // without origin check b/c all arguments have already been passed in\n    // the URL and special handling is enforced when result is delivered.\n    this.messenger_ = new Messenger(\n        this.win_,\n        /** @type {!Window} */ (this.targetWin_),\n        /* targetOrigin */ null);\n    this.messenger_.connect(this.handleCommand_.bind(this));\n  }\n\n  /**\n   * @param {boolean=} opt_delayCancel\n   * @private\n   */\n  check_(opt_delayCancel) {\n    if (!this.targetWin_ || this.targetWin_.closed) {\n      if (this.heartbeatInterval_) {\n        this.win_.clearInterval(this.heartbeatInterval_);\n        this.heartbeatInterval_ = null;\n      }\n      // Give a chance for the result to arrive, but otherwise consider the\n      // responce to be empty.\n      this.win_.setTimeout(() => {\n        try {\n          this.result_(ActivityResultCode.CANCELED, /* data */ null);\n        } catch (e) {\n          this.disconnectWithError_(e);\n        }\n      }, opt_delayCancel ? 3000 : 0);\n    }\n  }\n\n  /**\n   * @param {!Error} reason\n   * @private\n   */\n  disconnectWithError_(reason) {\n    if (this.resultResolver_) {\n      this.resultResolver_(Promise.reject(reason));\n    }\n    this.disconnect();\n  }\n\n  /**\n   * @param {!ActivityResultCode} code\n   * @param {*} data\n   * @private\n   */\n  result_(code, data) {\n    if (this.resultResolver_) {\n      const isConnected = this.messenger_.isConnected();\n      const result = new ActivityResult(\n          code,\n          data,\n          ActivityMode.POPUP,\n          isConnected ?\n              this.messenger_.getTargetOrigin() :\n              getOriginFromUrl(this.url_),\n          /* originVerified */ isConnected,\n          /* secureChannel */ isConnected);\n      resolveResult(this.win_, result, this.resultResolver_);\n      this.resultResolver_ = null;\n    }\n    if (this.messenger_) {\n      this.messenger_.sendCommand('close');\n    }\n    this.disconnect();\n  }\n\n  /**\n   * @param {string} cmd\n   * @param {?Object} payload\n   * @private\n   */\n  handleCommand_(cmd, payload) {\n    if (cmd == 'connect') {\n      // First ever message. Indicates that the receiver is listening.\n      this.messenger_.sendStartCommand(this.args_);\n    } else if (cmd == 'result') {\n      // The last message. Indicates that the result has been received.\n      const code = /** @type {!ActivityResultCode} */ (payload['code']);\n      const data =\n          code == ActivityResultCode.FAILED ?\n          new Error(payload['data'] || '') :\n          payload['data'];\n      this.result_(code, data);\n    } else if (cmd == 'check') {\n      this.win_.setTimeout(() => this.check_(), 200);\n    }\n  }\n}\n\n\n/**\n * @param {!Window} win\n * @param {string} fragment\n * @param {string} requestId\n * @return {?ActivityPort}\n */\nfunction discoverRedirectPort(win, fragment, requestId) {\n  // Try to find the result in the fragment.\n  const paramName = '__WA_RES__';\n  const fragmentParam = getQueryParam(fragment, paramName);\n  if (!fragmentParam) {\n    return null;\n  }\n  const response = /** @type {?Object} */ (JSON.parse(\n      decodeURIComponent(fragmentParam)));\n  if (!response || response['requestId'] != requestId) {\n    return null;\n  }\n\n  // Remove the found param from the fragment.\n  const cleanFragment = removeQueryParam(win.location.hash, paramName) || '';\n  if (cleanFragment != win.location.hash) {\n    if (win.history && win.history.replaceState) {\n      try {\n        win.history.replaceState(win.history.state, '', cleanFragment);\n      } catch (e) {\n        // Ignore.\n      }\n    }\n  }\n\n  const code = response['code'];\n  const data = response['data'];\n  const origin = response['origin'];\n  const referrerOrigin = win.document.referrer &&\n      getOriginFromUrl(win.document.referrer);\n  const originVerified = origin == referrerOrigin;\n  return new ActivityWindowRedirectPort(\n      win,\n      code,\n      data,\n      origin,\n      originVerified);\n}\n\n\n/**\n * The `ActivityPort` implementation for the standalone window activity\n * client executed as a popup.\n *\n * @implements {ActivityPort}\n */\nclass ActivityWindowRedirectPort {\n\n  /**\n   * @param {!Window} win\n   * @param {!ActivityResultCode} code\n   * @param {*} data\n   * @param {string} targetOrigin\n   * @param {boolean} targetOriginVerified\n   */\n  constructor(win, code, data, targetOrigin, targetOriginVerified) {\n    /** @private @const {!Window} */\n    this.win_ = win;\n    /** @private @const {!ActivityResultCode} */\n    this.code_ = code;\n    /** @private @const {*} */\n    this.data_ = data;\n    /** @private {string} */\n    this.targetOrigin_ = targetOrigin;\n    /** @private {boolean} */\n    this.targetOriginVerified_ = targetOriginVerified;\n  }\n\n  /** @override */\n  getMode() {\n    return ActivityMode.REDIRECT;\n  }\n\n  /** @override */\n  acceptResult() {\n    const result = new ActivityResult(\n        this.code_,\n        this.data_,\n        ActivityMode.REDIRECT,\n        this.targetOrigin_,\n        this.targetOriginVerified_,\n        /* secureChannel */ false);\n    return new Promise(resolve => {\n      resolveResult(this.win_, result, resolve);\n    });\n  }\n}\n\n\n\n\n/**\n * The page-level activities manager ports. This class is intended to be used\n * as a singleton. It can start activities of all modes: iframe, popup, and\n * redirect.\n */\nclass ActivityPorts {\n\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n    /** @const {string} */\n    this.version = '1.13';\n\n    /** @private @const {!Window} */\n    this.win_ = win;\n\n    /** @private @const {string} */\n    this.fragment_ = win.location.hash;\n\n    /**\n     * @private @const {!Object<string, !Array<function(!ActivityPort)>>}\n     */\n    this.requestHandlers_ = {};\n\n    /**\n     * The result buffer is indexed by `requestId`.\n     * @private @const {!Object<string, !ActivityPort>}\n     */\n    this.resultBuffer_ = {};\n  }\n\n  /**\n   * Start an activity within the specified iframe.\n   * @param {!HTMLIFrameElement} iframe\n   * @param {string} url\n   * @param {?Object=} opt_args\n   * @return {!Promise<!ActivityIframePort>}\n   */\n  openIframe(iframe, url, opt_args) {\n    const port = new ActivityIframePort(iframe, url, opt_args);\n    return port.connect().then(() => port);\n  }\n\n  /**\n   * Start an activity in a separate window. The result will be delivered\n   * to the `onResult` callback.\n   *\n   * The activity can be opened in two modes: \"popup\" and \"redirect\". This\n   * depends on the `target` value, but also on the browser/environment.\n   *\n   * The allowed `target` values are `_blank`, `_top` and name targets. The\n   * `_self`, `_parent` and similar targets are not allowed.\n   *\n   * The `_top` target indicates that the activity should be opened as a\n   * \"redirect\", while other targets indicate that the activity should be\n   * opened as a popup. The activity client will try to honor the requested\n   * target. However, it's not always possible. Some environments do not\n   * allow popups and they either force redirect or fail the window open\n   * request. In this case, the activity will try to fallback to the \"redirect\"\n   * mode.\n   *\n   * @param {string} requestId\n   * @param {string} url\n   * @param {string} target\n   * @param {?Object=} opt_args\n   * @param {?ActivityOpenOptions=} opt_options\n   * @return {{targetWin: ?Window}}\n   */\n  open(requestId, url, target, opt_args, opt_options) {\n    const port = new ActivityWindowPort(\n        this.win_, requestId, url, target, opt_args, opt_options);\n    port.open().then(() => {\n      // Await result if possible. Notice that when falling back to \"redirect\",\n      // the result will never arrive through this port.\n      this.consumeResultAll_(requestId, port);\n    });\n    return {targetWin: port.getTargetWin()};\n  }\n\n  /**\n   * Registers the callback for the result of the activity opened with the\n   * specified `requestId` (see the `open()` method). The callback is a\n   * function that takes a single `ActivityPort` argument. The client\n   * can use this object to verify the port using it's origin, verified and\n   * secure channel flags. Then the client can call\n   * `ActivityPort.acceptResult()` method to accept the result.\n   *\n   * The activity result is handled via a separate callback because of a\n   * possible redirect. So use of direct callbacks and/or promises is not\n   * possible in that case.\n   *\n   * A typical implementation would look like:\n   * ```\n   * ports.onResult('request1', function(port) {\n   *   port.acceptResult().then(function(result) {\n   *     // Only verified origins are allowed.\n   *     if (result.origin == expectedOrigin &&\n   *         result.originVerified &&\n   *         result.secureChannel) {\n   *       handleResultForRequest1(result);\n   *     }\n   *   });\n   * })\n   *\n   * ports.open('request1', request1Url, '_blank');\n   * ```\n   *\n   * @param {string} requestId\n   * @param {function(!ActivityPort)} callback\n   */\n  onResult(requestId, callback) {\n    let handlers = this.requestHandlers_[requestId];\n    if (!handlers) {\n      handlers = [];\n      this.requestHandlers_[requestId] = handlers;\n    }\n    handlers.push(callback);\n\n    // Consume available result.\n    const availableResult = this.discoverResult_(requestId);\n    if (availableResult) {\n      this.consumeResult_(availableResult, callback);\n    }\n  }\n\n  /**\n   * @param {string} requestId\n   * @return {?ActivityPort}\n   * @private\n   */\n  discoverResult_(requestId) {\n    let port = this.resultBuffer_[requestId];\n    if (!port && this.fragment_) {\n      port = discoverRedirectPort(\n          this.win_, this.fragment_, requestId);\n      if (port) {\n        this.resultBuffer_[requestId] = port;\n      }\n    }\n    return port;\n  }\n\n  /**\n   * @param {!ActivityPort} port\n   * @param {function(!ActivityPort)} callback\n   * @private\n   */\n  consumeResult_(port, callback) {\n    Promise.resolve().then(() => {\n      callback(port);\n    });\n  }\n\n  /**\n   * @param {string} requestId\n   * @param {!ActivityPort} port\n   * @private\n   */\n  consumeResultAll_(requestId, port) {\n    // Find and execute handlers.\n    const handlers = this.requestHandlers_[requestId];\n    if (handlers) {\n      handlers.forEach(handler => {\n        this.consumeResult_(port, handler);\n      });\n    }\n    // Buffer the result for callbacks that may arrive in the future.\n    this.resultBuffer_[requestId] = port;\n  }\n}\n\n\n\nvar activityPorts = {\n  ActivityPorts,\n  ActivityIframePort,\n  ActivityMode,\n  ActivityOpenOptions,\n  ActivityPort,\n  ActivityRequest,\n  ActivityResult,\n  ActivityResultCode,\n  ActivityWindowPort,\n};\nvar activityPorts_1 = activityPorts.ActivityPorts;\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Throws an error if the first argument isn't trueish.\n *\n * Supports argument substitution into the message via %s placeholders.\n *\n * Throws an error object that has two extra properties:\n * - associatedElement: This is the first element provided in the var args.\n *   It can be used for improved display of error messages.\n * - messageArray: The elements of the substituted message as non-stringified\n *   elements in an array. When e.g. passed to console.error this yields\n *   native displays of things like HTML elements.\n *\n * @param {T} shouldBeTrueish The value to assert. The assert fails if it does\n *     not evaluate to true.\n * @param {string=} opt_message The assertion message\n * @param {...*} var_args Arguments substituted into %s in the message.\n * @return {T} The value of shouldBeTrueish.\n * @template T\n */\nfunction assert(shouldBeTrueish, opt_message, var_args) {\n  let firstElement;\n  if (!shouldBeTrueish) {\n    const message = opt_message || 'Assertion failed';\n    const splitMessage = message.split('%s');\n    const first = splitMessage.shift();\n    let formatted = first;\n    const messageArray = [];\n    pushIfNonEmpty(messageArray, first);\n    for (let i = 2; i < arguments.length; i++) {\n      const val = arguments[i];\n      if (val && val.tagName) {\n        firstElement = val;\n      }\n      const nextConstant = splitMessage.shift();\n      messageArray.push(val);\n      pushIfNonEmpty(messageArray, nextConstant.trim());\n      formatted += toString(val) + nextConstant;\n    }\n    const e = new Error(formatted);\n    e.fromAssert = true;\n    e.associatedElement = firstElement;\n    e.messageArray = messageArray;\n    throw e;\n  }\n  return shouldBeTrueish;\n}\n\n/**\n * @param {!Array} array\n * @param {*} val\n */\nfunction pushIfNonEmpty(array, val) {\n  if (val != '') {\n    array.push(val);\n  }\n}\n\nfunction toString(val) {\n// Do check equivalent to `val instanceof Element` without cross-window bug\n  if (val && val.nodeType == 1) {\n    return val.tagName.toLowerCase() + (val.id ? '#' + val.id : '');\n  }\n  return /** @type {string} */ (val);\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * Returns a map-like object.\n * If opt_initial is provided, copies its own properties into the\n * newly created object.\n * @param {Object=} opt_initial This should typically be an object literal.\n * @return {!Object}\n * @template T\n */\nfunction map(opt_initial) {\n  const obj = Object.create(null);\n  if (opt_initial) {\n    Object.assign(obj, opt_initial);\n  }\n  return obj;\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Polyfill for String.prototype.startsWith.\n * @param {string} string\n * @param {string} prefix\n * @return {boolean}\n */\nfunction startsWith(string, prefix) {\n  if (prefix.length > string.length) {\n    return false;\n  }\n  return string.lastIndexOf(prefix, 0) == 0;\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @type {Object<string, string>} */\nlet propertyNameCache;\n\n/** @const {!Array<string>} */\nconst vendorPrefixes = ['Webkit', 'webkit', 'Moz', 'moz', 'ms', 'O', 'o'];\n\n/**\n * Default styles to be set for top level friendly iframe.\n * Some attributes are not included such as height, left, margin-left; since\n * these attributes are updated by @media queries and having these values\n * defined here as !important does not work on IE/edge browsers.\n * @const {!Object<string, string|number>}\n */\nconst defaultStyles = {\n  'align-content': 'normal',\n  'animation': 'none',\n  'align-items': 'normal',\n  'align-self': 'auto',\n  'alignment-baseline': 'auto',\n  'backface-visibility': 'hidden',\n  'background-clip': 'border-box',\n  'background-image': 'none',\n  'baseline-shift': '0',\n  'block-size': 'auto',\n  'border': 'none',\n  'border-collapse': 'separate',\n  'bottom': '0',\n  'box-sizing': 'border-box',\n  'break-after': 'auto',\n  'break-before': 'auto',\n  'break-inside': 'auto',\n  'buffered-rendering': 'auto',\n  'caption-side': 'top',\n  'caret-color': 'rgb(51, 51, 51)',\n  'clear': 'none',\n  'color': 'rgb(51, 51, 51)',\n  'color-rendering': 'auto',\n  'column-count': 'auto',\n  'column-fill': 'balance',\n  'column-gap': 'normal',\n  'column-rule-color': 'rgb(51, 51, 51)',\n  'column-rule-style': 'none',\n  'column-rule-width': '0',\n  'column-span': 'none',\n  'column-width': 'auto',\n  'contain': 'none',\n  'counter-increment': 'none',\n  'counter-reset': 'none',\n  'cursor': 'auto',\n  'direction': 'inherit',\n  'display': 'block',\n  'empty-cells': 'show',\n  'filter': 'none',\n  'flex': 'none',  // flex-grow, flex-shrink, and flex-basis.\n  'flex-flow': 'row nowrap',  // flex-direction, flex-wrap.\n  'float': 'none',\n  'flood-color': 'rgb(0, 0, 0)',\n  'flood-opacity': '1',\n  'font': 'none',\n  'font-size': 'medium',\n  'font-family': '',\n  'height': 'auto',\n  'hyphens': 'manual',\n  'image-rendering': 'auto',\n  'inline-size': '',  // Setting to 'auto' will not allow override.\n  'isolation': 'auto',\n  'justify-content': 'normal',\n  'justify-items': 'normal',\n  'justify-self': 'auto',\n  'letter-spacing': 'normal',\n  'lighting-color': 'rgb(255, 255, 255)',\n  'line-break': 'auto',\n  'line-height': 'normal',\n  'mask': 'none',\n  'max-block-size': 'none',\n  'max-height': 'none',\n  'max-inline-size': 'none',\n  'max-width': 'none',\n  'min-block-size': 'none',\n  'min-height': '0',\n  'min-inline-size': '0',\n  'min-width': '0',\n  'mix-blend-mode': 'normal',\n  'object-fit': 'fill',  // Important for Safari browser.\n  'offset-distance': 'none',  // Chrome only (Experimental).\n  'offset-path': 'none',  // Chrome only (Experimental).\n  'offset-rotate': 'auto 0deg',  // Chrome only (Experimental).\n  'opacity': '1',\n  'order': '0',\n  'orphans': '2',\n  'outline': 'none',\n  'overflow-anchor': 'auto',\n  'overflow-wrap': 'normal',\n  'overflow': 'visible',\n  'padding': '0',\n  'page': '',\n  'perspective': 'none',\n  'pointer-events': 'auto',\n  'position': 'static',\n  'quotes': '',\n  'resize': 'none',\n  'right': '0',\n  'scroll-behavior': 'auto',\n  'tab-size': '8',  // Only Chrome, Safari (Experimental).\n  'table-layout': 'auto',\n  'text-align': 'start',\n  'text-align-last': 'auto',\n  'text-anchor': 'start',\n  'text-combine-upright': 'none',\n  'text-decoration': 'none',\n  'text-indent': '0',\n  'text-orientation': 'mixed',\n  'text-overflow': 'clip',\n  'text-rendering': 'auto',\n  'text-shadow': 'none',\n  'text-size-adjust': 'auto',\n  'text-transform': 'none',\n  'text-underline-position': 'auto',\n  'top': 'auto',\n  'touch-action': 'auto',\n  'transform': 'none',\n  'transition': 'none 0s ease 0s',\n  'unicode-bidi': 'normal',\n  'user-select': 'auto',\n  'vector-effect': 'none',\n  'vertical-align': 'baseline',\n  'visibility': 'visible',\n  'white-space': 'normal',\n  'widows': '2',\n  'word-break': 'normal',\n  'word-spacing': '0',\n  'word-wrap': 'normal',\n  'writing-mode': 'horizontal-tb',\n  'zoom': '1',\n  'z-index': 'auto',\n};\n\n/**\n * @export\n * @param {string} camelCase camel cased string\n * @return {string} title cased string\n */\nfunction camelCaseToTitleCase(camelCase) {\n  return camelCase.charAt(0).toUpperCase() + camelCase.slice(1);\n}\n\n/**\n * Checks the style if a prefixed version of a property exists and returns\n * it or returns an empty string.\n * @private\n * @param {!Object} style\n * @param {string} titleCase the title case version of a css property name\n * @return {string} the prefixed property name or null.\n */\nfunction getVendorJsPropertyName_(style, titleCase) {\n  for (let i = 0; i < vendorPrefixes.length; i++) {\n    const propertyName = vendorPrefixes[i] + titleCase;\n    if (style[propertyName] !== undefined) {\n      return propertyName;\n    }\n  }\n  return '';\n}\n\n\n/**\n * Returns the possibly prefixed JavaScript property name of a style property\n * (ex. WebkitTransitionDuration) given a camelCase'd version of the property\n * (ex. transitionDuration).\n * @export\n * @param {!Object} style\n * @param {string} camelCase the camel cased version of a css property name\n * @param {boolean=} opt_bypassCache bypass the memoized cache of property\n *   mapping\n * @return {string}\n */\nfunction getVendorJsPropertyName(style, camelCase, opt_bypassCache) {\n  if (startsWith(camelCase, '--')) {\n    // CSS vars are returned as is.\n    return camelCase;\n  }\n  if (!propertyNameCache) {\n    propertyNameCache = map();\n  }\n  let propertyName = propertyNameCache[camelCase];\n  if (!propertyName || opt_bypassCache) {\n    propertyName = camelCase;\n    if (style[camelCase] === undefined) {\n      const titleCase = camelCaseToTitleCase(camelCase);\n      const prefixedPropertyName = getVendorJsPropertyName_(style, titleCase);\n\n      if (style[prefixedPropertyName] !== undefined) {\n        propertyName = prefixedPropertyName;\n      }\n    }\n    if (!opt_bypassCache) {\n      propertyNameCache[camelCase] = propertyName;\n    }\n  }\n  return propertyName;\n}\n\n\n/**\n * Sets the CSS styles of the specified element with !important. The styles\n * are specified as a map from CSS property names to their values.\n * @param {!Element} element\n * @param {!Object<string, string|number>} styles\n */\nfunction setImportantStyles(element, styles) {\n  for (const k in styles) {\n    element.style.setProperty(\n        getVendorJsPropertyName(styles, k), styles[k].toString(), 'important');\n  }\n}\n\n\n/**\n * Sets the CSS style of the specified element with optional units, e.g. \"px\".\n * @param {Element} element\n * @param {string} property\n * @param {?string|number|boolean} value\n * @param {string=} opt_units\n * @param {boolean=} opt_bypassCache\n */\nfunction setStyle(element, property, value, opt_units, opt_bypassCache) {\n  const propertyName = getVendorJsPropertyName(element.style, property,\n      opt_bypassCache);\n  if (propertyName) {\n    element.style[propertyName] =\n        /** @type {string} */ (opt_units ? value + opt_units : value);\n  }\n}\n\n\n/**\n * Sets the CSS styles of the specified element. The styles\n * a specified as a map from CSS property names to their values.\n * @param {!Element} element\n * @param {!Object<string, ?string|number|boolean>} styles\n */\nfunction setStyles(element, styles) {\n  for (const k in styles) {\n    setStyle(element, k, styles[k]);\n  }\n}\n\n\n/**\n * Resets styles that were set dynamically (i.e. inline)\n * @param {!Element} element\n * @param {!Array<string>} properties\n */\nfunction resetStyles(element, properties) {\n  const styleObj = {};\n  properties.forEach(prop => {\n    styleObj[prop] = null;\n  });\n  setStyles(element, styleObj);\n}\n\n\n/**\n * Resets all the styles of an element to a given value. Defaults to null.\n * The valid values are 'inherit', 'initial', 'unset' or null.\n * @param {!Element} element\n */\nfunction resetAllStyles(element) {\n  setImportantStyles(element, defaultStyles);\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @const {string} */\nconst styleType = 'text/css';\n\n\n/**\n * Add attributes to an element.\n * @param {!Element} element\n * @param {!Object<string, string|number|boolean|!Object<string, string|number|boolean>>} attributes\n * @return {!Element} updated element.\n */\nfunction addAttributesToElement(element, attributes) {\n  for (const attr in attributes) {\n    if (attr == 'style') {\n      setStyles(element,\n           /** @type !Object<string, string|boolean|number> */\n           (attributes[attr]));\n    } else {\n      element.setAttribute(attr,\n          /** @type {string|boolean|number} */ (attributes[attr]));\n    }\n\n  }\n  return element;\n}\n\n\n/**\n * Create a new element on document with specified tagName and attributes.\n * @param {!Document} doc\n * @param {string} tagName\n * @param {!Object<string, string>} attributes\n * @param {?(string|!Node|!ArrayLike<!Node>|!Array<!Node>)=} opt_content\n * @return {!Element} created element.\n */\nfunction createElement(doc, tagName, attributes, opt_content) {\n  const element = doc.createElement(tagName);\n  addAttributesToElement(element, attributes);\n  if (opt_content != null) {\n    if (typeof opt_content == 'string') {\n      element.textContent = opt_content;\n    } else if (opt_content.nodeType) {\n      element.appendChild(opt_content);\n    } else if ('length' in opt_content) {\n      for (let i = 0; i < opt_content.length; i++) {\n        element.appendChild(opt_content[i]);\n      }\n    } else {\n      assert(false, 'Unsupported content: %s', opt_content);\n    }\n  }\n  return element;\n}\n\n\n/**\n * Removes all children from the parent element.\n * @param {!Element} parent\n */\nfunction removeChildren(parent) {\n  parent.textContent = '';\n}\n\n\n/**\n * Injects the provided styles in the HEAD section of the document.\n * @param {!Document} doc The document object.\n * @param {string} styleText The style string.\n * @return {!Element}\n */\nfunction injectStyleSheet(doc, styleText) {\n  const styleElement = createElement(doc, 'style', {\n    'type': styleType,\n  });\n  styleElement.textContent = styleText;\n  doc.head.appendChild(styleElement);\n  return styleElement;\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * @param {!Object<string, string>} map\n * @param {?string|?Element} langOrElement\n * @return {?string}\n */\nfunction msg(map, langOrElement) {\n  const lang =\n      !langOrElement ? '' :\n      typeof langOrElement == 'string' ? langOrElement :\n      langOrElement.lang ||\n      langOrElement.ownerDocument &&\n          langOrElement.ownerDocument.documentElement.lang;\n  let search = (lang && lang.toLowerCase() || 'en').replace(/_/g, '-');\n  while (search) {\n    if (search in map) {\n      return map[search];\n    }\n    const dash = search.lastIndexOf('-');\n    search = dash != -1 ? search.substring(0, dash) : '';\n  }\n  // \"en\" is always default.\n  return map['en'];\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @type {!Object<string, string>} */\nconst TITLE_LANG_MAP = {\n  'en': 'Subscribe with Google',\n  'ar': 'الاشتراك عبر Google',\n  'de': 'Abonnieren mit Google',\n  'es': 'Suscríbete con Google',\n  'es-latam': 'Suscribirse con Google',\n  'es-latn': 'Suscribirse con Google',\n  'fr': 'S\\'abonner avec Google',\n  'hi': 'Google की सदस्यता लें',\n  'id': 'Berlangganan dengan Google',\n  'it': 'Abbonati con Google',\n  'jp': 'Google で購読',\n  'ko': 'Google 을(를) 통해 구독',\n  'ms': 'Langgan dengan Google',\n  'nl': 'Abonneren met Google',\n  'no': 'Abonner med Google',\n  'pl': 'Subskrybuj z Google',\n  'pt': 'Subscrever com o Google',\n  'pt-br': 'Faça sua assinatura com Google',\n  'ru': 'Подпишитесь через Google',\n  'se': 'Prenumerera med Google',\n  'th': 'สมัครรับข้อมูลด้วย Google',\n  'tr': 'Google ile abone olun',\n  'uk': 'Підписатися через Google',\n  'zh-tw': '透過 Google 訂閱',\n};\n\n\n/**\n * The button stylesheet can be found in the `/assets/swg-button.css`.\n * It's produced by the `assets:swg-button` gulp task and deployed to\n * `https://news.google.com/swg/js/v1/swg-button.css`.\n */\nclass ButtonApi {\n\n  /**\n   * @param {!../model/doc.Doc} doc\n   */\n  constructor(doc) {\n    /** @private @const {!../model/doc.Doc} */\n    this.doc_ = doc;\n  }\n\n  /**\n   */\n  init() {\n    const head = this.doc_.getHead();\n    if (!head) {\n      return;\n    }\n\n    const url = 'https://news.google.com/swg/js/v1/swg-button.css';\n    const existing = head.querySelector(`link[href=\"${url}\"]`);\n    if (existing) {\n      return;\n    }\n\n    // <link rel=\"stylesheet\" href=\"...\" type=\"text/css\">\n    head.appendChild(createElement(this.doc_.getWin().document, 'link', {\n      'rel': 'stylesheet',\n      'type': 'text/css',\n      'href': url,\n    }));\n  }\n\n  /**\n   * @param {!Object|function()} optionsOrCallback\n   * @param {function()=} opt_callback\n   * @return {!Element}\n   */\n  create(optionsOrCallback, opt_callback) {\n    const button = createElement(this.doc_.getWin().document, 'button', {});\n    return this.attach(button, optionsOrCallback, opt_callback);\n  }\n\n  /**\n   * @param {!Element} button\n   * @param {!Object|function()} optionsOrCallback\n   * @param {function()=} opt_callback\n   * @return {!Element}\n   */\n  attach(button, optionsOrCallback, opt_callback) {\n    const options =\n        typeof optionsOrCallback != 'function' ?\n        optionsOrCallback : null;\n    const callback = /** @type {function()} */ (\n        (typeof optionsOrCallback == 'function' ? optionsOrCallback : null) ||\n            opt_callback);\n    let theme = options && options['theme'];\n    if (theme !== 'light' && theme !== 'dark') {\n      theme = 'light';\n    }\n    button.classList.add(`swg-button-${theme}`);\n    button.setAttribute('role', 'button');\n    if (options && options['lang']) {\n      button.setAttribute('lang', options['lang']);\n    }\n    button.setAttribute('title', msg(TITLE_LANG_MAP, button) || '');\n    button.addEventListener('click', callback);\n    return button;\n  }\n}\n\nconst CSS = \".swg-dialog,.swg-toast{box-sizing:border-box;background-color:#fff!important}.swg-toast{position:fixed!important;bottom:0!important;max-height:46px!important;z-index:2147483647!important;border:none!important}@media (max-height:640px), (max-width:640px){.swg-dialog,.swg-toast{width:480px!important;left:-240px!important;margin-left:50vw!important;border-top-left-radius:8px!important;border-top-right-radius:8px!important;box-shadow:0 1px 1px rgba(60,64,67,.3),0 1px 4px 1px rgba(60,64,67,.15)!important}}@media (min-width:640px) and (min-height:640px){.swg-dialog{width:630px!important;left:-315px!important;margin-left:50vw!important;background-color:transparent!important;border:none!important}.swg-toast{left:0!important}}@media (max-width:480px){.swg-dialog,.swg-toast{width:100%!important;left:0!important;right:0!important;margin-left:0!important;border-top-left-radius:8px!important;border-top-right-radius:8px!important;box-shadow:0 1px 1px rgba(60,64,67,.3),0 1px 4px 1px rgba(60,64,67,.15)!important}}\\n/*# sourceURL=/./src/components/dialog.css*/\";\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/** @enum {number} */\nconst CallbackId = {\n  ENTITLEMENTS: 1,\n  SUBSCRIBE_REQUEST: 2,\n  SUBSCRIBE_RESPONSE: 3,\n  LOGIN_REQUEST: 4,\n  LINK_PROGRESS: 5,\n  LINK_COMPLETE: 6,\n  FLOW_STARTED: 7,\n  FLOW_CANCELED: 8,\n};\n\n\n/**\n */\nclass Callbacks {\n\n  /**\n   */\n  constructor() {\n    /** @private @const {!Object<CallbackId, function(*)>} */\n    this.callbacks_ = {};\n    /** @private @const {!Object<CallbackId, *>} */\n    this.resultBuffer_ = {};\n  }\n\n  /**\n   * @param {function(!Promise<!../api/entitlements.Entitlements>)} callback\n   */\n  setOnEntitlementsResponse(callback) {\n    this.setCallback_(CallbackId.ENTITLEMENTS, callback);\n  }\n\n  /**\n   * @param {!Promise<!../api/entitlements.Entitlements>} promise\n   */\n  triggerEntitlementsResponse(promise) {\n    return this.trigger_(\n        CallbackId.ENTITLEMENTS,\n        promise.then(res => res.clone()));\n  }\n\n  /**\n   * @return {boolean}\n   */\n  hasEntitlementsResponsePending() {\n    return !!this.resultBuffer_[CallbackId.ENTITLEMENTS];\n  }\n\n  /**\n   * @param {function(!../api/subscriptions.LoginRequest)} callback\n   */\n  setOnLoginRequest(callback) {\n    this.setCallback_(CallbackId.LOGIN_REQUEST, callback);\n  }\n\n  /**\n   * @param {!../api/subscriptions.LoginRequest} request\n   * @return {boolean} Whether the callback has been found.\n   */\n  triggerLoginRequest(request) {\n    return this.trigger_(CallbackId.LOGIN_REQUEST, request);\n  }\n\n  /**\n   * @param {function()} callback\n   */\n  setOnLinkProgress(callback) {\n    this.setCallback_(CallbackId.LINK_PROGRESS, callback);\n  }\n\n  /**\n   * @return {boolean} Whether the callback has been found.\n   */\n  triggerLinkProgress() {\n    return this.trigger_(CallbackId.LINK_PROGRESS, true);\n  }\n\n  /**\n   */\n  resetLinkProgress() {\n    this.resetCallback_(CallbackId.LINK_PROGRESS);\n  }\n\n  /**\n   * @param {function()} callback\n   */\n  setOnLinkComplete(callback) {\n    this.setCallback_(CallbackId.LINK_COMPLETE, callback);\n  }\n\n  /**\n   * @return {boolean} Whether the callback has been found.\n   */\n  triggerLinkComplete() {\n    return this.trigger_(CallbackId.LINK_COMPLETE, true);\n  }\n\n  /**\n   * @return {boolean}\n   */\n  hasLinkCompletePending() {\n    return !!this.resultBuffer_[CallbackId.LINK_COMPLETE];\n  }\n\n  /**\n   * @param {function()} callback\n   */\n  setOnSubscribeRequest(callback) {\n    this.setCallback_(CallbackId.SUBSCRIBE_REQUEST, callback);\n  }\n\n  /**\n   * @return {boolean} Whether the callback has been found.\n   */\n  triggerSubscribeRequest() {\n    return this.trigger_(CallbackId.SUBSCRIBE_REQUEST, true);\n  }\n\n  /**\n   * @return {boolean}\n   */\n  hasSubscribeRequestCallback() {\n    return !!this.callbacks_[CallbackId.SUBSCRIBE_REQUEST];\n  }\n\n  /**\n   * @param {function(!Promise<!../api/subscribe-response.SubscribeResponse>)} callback\n   */\n  setOnSubscribeResponse(callback) {\n    this.setCallback_(CallbackId.SUBSCRIBE_RESPONSE, callback);\n  }\n\n  /**\n   * @param {!Promise<!../api/subscribe-response.SubscribeResponse>} responsePromise\n   * @return {boolean} Whether the callback has been found.\n   */\n  triggerSubscribeResponse(responsePromise) {\n    return this.trigger_(\n        CallbackId.SUBSCRIBE_RESPONSE,\n        responsePromise.then(res => res.clone()));\n  }\n\n  /**\n   * @return {boolean}\n   */\n  hasSubscribeResponsePending() {\n    return !!this.resultBuffer_[CallbackId.SUBSCRIBE_RESPONSE];\n  }\n\n  /**\n   * @param {function({flow: string, data: !Object})} callback\n   */\n  setOnFlowStarted(callback) {\n    this.setCallback_(CallbackId.FLOW_STARTED, callback);\n  }\n\n  /**\n   * @param {string} flow\n   * @param {!Object=} opt_data\n   * @return {boolean} Whether the callback has been found.\n   */\n  triggerFlowStarted(flow, opt_data) {\n    return this.trigger_(CallbackId.FLOW_STARTED, {\n      flow,\n      data: opt_data || {},\n    });\n  }\n\n  /**\n   * @param {function({flow: string, data: !Object})} callback\n   */\n  setOnFlowCanceled(callback) {\n    this.setCallback_(CallbackId.FLOW_CANCELED, callback);\n  }\n\n  /**\n   * @param {string} flow\n   * @param {!Object=} opt_data\n   * @return {boolean} Whether the callback has been found.\n   */\n  triggerFlowCanceled(flow, opt_data) {\n    return this.trigger_(CallbackId.FLOW_CANCELED, {\n      flow,\n      data: opt_data || {},\n    });\n  }\n\n  /**\n   * @param {!CallbackId} id\n   * @param {function(?)} callback\n   * @private\n   */\n  setCallback_(id, callback) {\n    this.callbacks_[id] = callback;\n    // If result already exist, execute the callback right away.\n    if (id in this.resultBuffer_) {\n      this.executeCallback_(id, callback, this.resultBuffer_[id]);\n    }\n  }\n\n  /**\n   * @param {!CallbackId} id\n   * @param {*} data\n   * @return {boolean}\n   * @private\n   */\n  trigger_(id, data) {\n    this.resultBuffer_[id] = data;\n    const callback = this.callbacks_[id];\n    if (callback) {\n      this.executeCallback_(id, callback, data);\n    }\n    return !!callback;\n  }\n\n  /**\n   * @param {!CallbackId} id\n   * @private\n   */\n  resetCallback_(id) {\n    if (id in this.resultBuffer_) {\n      delete this.resultBuffer_[id];\n    }\n  }\n\n  /**\n   * @param {!CallbackId} id\n   * @param {function(*)} callback\n   * @param {*} data\n   * @private\n   */\n  executeCallback_(id, callback, data) {\n    // Always execute callbacks in a microtask.\n    Promise.resolve().then(() => {\n      callback(data);\n      this.resetCallback_(id);\n    });\n  }\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * abstract View Class. Used to render the content within the Dialog. The\n * extended class has actual content.\n * @abstract\n */\nclass View {\n\n  /**\n   * Empty constructor.\n   */\n  constructor() {}\n\n  /**\n   * Gets the iframe element.\n   * @return {!Element}\n   * @abstract\n   */\n  getElement() {}\n\n  /**\n   * @param {!./dialog.Dialog} unusedDialog\n   * @return {!Promise}\n   * @abstract\n   */\n  init(unusedDialog) {}\n\n  /**\n   * Resizes the content.\n   */\n  resized() {\n    // Do nothing by default. Override if needed.\n  }\n\n  /**\n   * Accept the result.\n   * @return {!Promise}\n   * @abstract\n   */\n  whenComplete() {}\n\n  /**\n   * @return {boolean}\n   * @abstract\n   */\n  shouldFadeBody() {}\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * @param {*} error\n * @return {boolean}\n */\nfunction isCancelError(error) {\n  if (!error || typeof error != 'object') {\n    return false;\n  }\n  return (error['name'] === 'AbortError');\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @const {!Object<string, string>} */\nconst iframeAttributes = {\n  'frameborder': '0',\n  'scrolling': 'no',\n};\n\n\n/**\n * Class to build and render Activity iframe view.\n */\nclass ActivityIframeView extends View {\n\n  /**\n   * @param {!Window} win\n   * @param {!web-activities/activity-ports.ActivityPorts} activityPorts\n   * @param {string} src\n   * @param {!Object<string, ?>=} args\n   * @param {boolean=} shouldFadeBody\n   */\n  constructor(\n      win,\n      activityPorts,\n      src,\n      args,\n      shouldFadeBody = false) {\n    super();\n\n    /** @private @const {!Window} */\n    this.win_ = win;\n\n    /** @private @const {!Document} */\n    this.doc_ = this.win_.document;\n\n    /** @private @const {!HTMLIFrameElement} */\n    this.iframe_ =\n        /** @type {!HTMLIFrameElement} */ (\n            createElement(this.doc_, 'iframe', iframeAttributes));\n\n    /** @private @const {!web-activities/activity-ports.ActivityPorts} */\n    this.activityPorts_ = activityPorts;\n\n    /** @private @const {string} */\n    this.src_ = src;\n\n    /** @private @const {!Object<string, ?>} */\n    this.args_ = args || {};\n\n    /** @private @const {boolean} */\n    this.shouldFadeBody_ = shouldFadeBody;\n\n    /** @private {?web-activities/activity-ports.ActivityIframePort} */\n    this.port_ = null;\n\n    /**\n     * @private\n     * {?function<!web-activities/activity-ports.ActivityIframePort|!Promise>}\n     */\n    this.portResolver_ = null;\n\n    /**\n     * @private @const\n     * {!Promise<!web-activities/activity-ports.ActivityIframePort>}\n     */\n    this.portPromise_ = new Promise(resolve => {\n      this.portResolver_ = resolve;\n    });\n  }\n\n  /** @override */\n  getElement() {\n    return this.iframe_;\n  }\n\n  /** @override */\n  init(dialog) {\n    return this.activityPorts_.openIframe(this.iframe_, this.src_, this.args_)\n        .then(port => this.onOpenIframeResponse_(port, dialog));\n  }\n\n  /**\n   * Returns if document should fade for this view.\n   * @return {boolean}\n   */\n  shouldFadeBody() {\n    return this.shouldFadeBody_;\n  }\n\n  /**\n   * @param {!web-activities/activity-ports.ActivityIframePort} port\n   * @param {!../components/dialog.Dialog} dialog\n   * @return {!Promise}\n   */\n  onOpenIframeResponse_(port, dialog) {\n    this.port_ = port;\n    this.portResolver_(port);\n\n    this.port_.onResizeRequest(height => {\n      dialog.resizeView(this, height);\n    });\n\n    return this.port_.whenReady();\n  }\n\n  /**\n   * @return {!Promise<!web-activities/activity-ports.ActivityIframePort>}\n   */\n  port() {\n    return this.portPromise_;\n  }\n\n  /**\n   * @param {!Object} data\n   */\n  message(data) {\n    this.port().then(port => {\n      port.message(data);\n    });\n  }\n\n  /**\n   * Handles the message received by the port.\n   * @param {function(!Object<string, string|boolean>)} callback\n   */\n  onMessage(callback) {\n    this.port().then(port => {\n      port.onMessage(callback);\n    });\n  }\n\n  /**\n   * Accepts results from the caller.\n   * @return {!Promise<!web-activities/activity-ports.ActivityResult>}\n   */\n  acceptResult() {\n    return this.port().then(port => port.acceptResult());\n  }\n\n  /**\n   * Completes the flow.\n   * @return {!Promise}\n   */\n  whenComplete() {\n    return this.acceptResult();\n  }\n\n  /**\n   * @param {function()} callback\n   */\n  onCancel(callback) {\n    this.acceptResult().catch(reason => {\n      if (isCancelError(reason)) {\n        callback();\n      }\n      throw reason;\n    });\n  }\n\n  /** @override */\n  resized() {\n    if (this.port_) {\n      this.port_.resized();\n    }\n  }\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * The holder of the entitlements for a service.\n */\nclass Entitlements {\n\n  /**\n   * @param {string} service\n   * @param {string} raw\n   * @param {!Array<!Entitlement>} entitlements\n   * @param {?string} currentProduct\n   * @param {function(!Entitlements)} ackHandler\n   */\n  constructor(service, raw, entitlements, currentProduct, ackHandler) {\n    /** @const {string} */\n    this.service = service;\n    /** @const {string} */\n    this.raw = raw;\n    /** @const {!Array<!Entitlement>} */\n    this.entitlements = entitlements;\n\n    /** @private @const {?string} */\n    this.product_ = currentProduct;\n    /** @private @const {function(!Entitlements)} */\n    this.ackHandler_ = ackHandler;\n  }\n\n  /**\n   * @return {!Entitlements}\n   */\n  clone() {\n    return new Entitlements(\n        this.service,\n        this.raw,\n        this.entitlements.map(ent => ent.clone()),\n        this.product_,\n        this.ackHandler_);\n  }\n\n  /**\n   * @return {!Object}\n   */\n  json() {\n    return {\n      'service': this.service,\n      'entitlements': this.entitlements.map(item => item.json()),\n    };\n  }\n\n  /**\n   * @param {string=} opt_source\n   * @return {boolean}\n   */\n  enablesThis(opt_source) {\n    return this.enables(this.product_, opt_source);\n  }\n\n  /**\n   * @param {string=} opt_source\n   * @return {boolean}\n   */\n  enablesAny(opt_source) {\n    for (let i = 0; i < this.entitlements.length; i++) {\n      if (this.entitlements[i].products.length > 0 &&\n          (!opt_source || opt_source == this.entitlements[i].source)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Whether these entitlements enable the specified product, optionally also\n   * restricting the source.\n   * @param {?string} product\n   * @param {string=} opt_source\n   * @return {boolean}\n   */\n  enables(product, opt_source) {\n    if (!product) {\n      return false;\n    }\n    return !!this.getEntitlementFor(product, opt_source);\n  }\n\n  /**\n   * Returns the first matching entitlement for the current product,\n   * optionally also matching the specified source.\n   * @param {string=} opt_source\n   * @return {?Entitlement}\n   */\n  getEntitlementForThis(opt_source) {\n    return this.getEntitlementFor(this.product_, opt_source);\n  }\n\n  /**\n   * Returns the first matching entitlement for the specified product,\n   * optionally also matching the specified source.\n   * @param {?string} product\n   * @param {string=} opt_source\n   * @return {?Entitlement}\n   */\n  getEntitlementFor(product, opt_source) {\n    if (product && this.entitlements.length > 0) {\n      for (let i = 0; i < this.entitlements.length; i++) {\n        if (this.entitlements[i].enables(product) &&\n            (!opt_source || opt_source == this.entitlements[i].source)) {\n          return this.entitlements[i];\n        }\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Returns the first matching entitlement for the specified source w/o\n   * matching any specific products.\n   * @param {string} source\n   * @return {?Entitlement}\n   */\n  getEntitlementForSource(source) {\n    if (this.entitlements.length > 0) {\n      for (let i = 0; i < this.entitlements.length; i++) {\n        if (this.entitlements[i].subscriptionToken &&\n            (source == this.entitlements[i].source)) {\n          return this.entitlements[i];\n        }\n      }\n    }\n    return null;\n  }\n\n  /**\n   * A 3p site should call this method to acknowledge that it \"saw\" and\n   * \"understood\" entitlements.\n   */\n  ack() {\n    this.ackHandler_(this);\n  }\n}\n\n\n/**\n * The single entitlement object.\n */\nclass Entitlement {\n\n  /**\n   * @param {string} source\n   * @param {!Array<string>} products\n   * @param {string} subscriptionToken\n   */\n  constructor(source, products, subscriptionToken) {\n    /** @const {string} */\n    this.source = source;\n    /** @const {!Array<string>} */\n    this.products = products;\n    /** @const {string} */\n    this.subscriptionToken = subscriptionToken;\n  }\n\n  /**\n   * @return {!Entitlement}\n   */\n  clone() {\n    return new Entitlement(\n        this.source,\n        this.products.slice(0),\n        this.subscriptionToken);\n  }\n\n  /**\n   * @return {!Object}\n   */\n  json() {\n    return {\n      'source': this.source,\n      'products': this.products,\n      'subscriptionToken': this.subscriptionToken,\n    };\n  }\n\n  /**\n   * @param {?string} product\n   * @return {boolean}\n   */\n  enables(product) {\n    if (!product) {\n      return false;\n    }\n    return this.products.includes(product);\n  }\n\n  /**\n   * @param {?Object} json\n   * @return {!Entitlement}\n   */\n  static parseFromJson(json) {\n    if (!json) {\n      json = {};\n    }\n    const source = json['source'] || '';\n    const products = json['products'] || [];\n    const subscriptionToken = json['subscriptionToken'];\n    return new Entitlement(source, products, subscriptionToken);\n  }\n\n  /**\n   * The JSON is expected in one of the forms:\n   * - Single entitlement: `{products: [], ...}`.\n   * - A list of entitlements: `[{products: [], ...}, {...}]`.\n   * @param {!Object|!Array<!Object>} json\n   * @return {!Array<!Entitlement>}\n   */\n  static parseListFromJson(json) {\n    const jsonList = Array.isArray(json) ?\n        /** @type {!Array<Object>} */ (json) : [json];\n    return jsonList.map(json => Entitlement.parseFromJson(json));\n  }\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n */\nclass UserData {\n\n  /**\n   * @param {string} idToken\n   * @param {!Object} data\n   */\n  constructor(idToken, data) {\n    /** @const {string} */\n    this.idToken = idToken;\n    /** @const {!Object} */\n    this.data = data;\n\n    /** @const {string} */\n    this.id = data['sub'];\n    /** @const {string} */\n    this.email = data['email'];\n    /** @const {boolean} */\n    this.emailVerified = data['email_verified'];\n    /** @const {string} */\n    this.name = data['name'];\n    /** @const {string} */\n    this.givenName = data['given_name'];\n    /** @const {string} */\n    this.familyName = data['family_name'];\n    /** @const {string} */\n    this.pictureUrl = data['picture'];\n  }\n\n  /**\n   * @return {!UserData}\n   */\n  clone() {\n    return new UserData(this.idToken, this.data);\n  }\n\n  /**\n   * @return {!Object}\n   */\n  json() {\n    return {\n      'id': this.id,\n      'email': this.email,\n      'emailVerified': this.emailVerified,\n      'name': this.name,\n      'givenName': this.givenName,\n      'familyName': this.familyName,\n      'pictureUrl': this.pictureUrl,\n    };\n  }\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n */\nclass SubscribeResponse {\n\n  /**\n   * @param {string} raw\n   * @param {!PurchaseData} purchaseData\n   * @param {?UserData} userData\n   * @param {function():!Promise} completeHandler\n   */\n  constructor(raw, purchaseData, userData, completeHandler) {\n    /** @const {string} */\n    this.raw = raw;\n    /** @const {!PurchaseData} */\n    this.purchaseData = purchaseData;\n    /** @const {?UserData} */\n    this.userData = userData;\n    /** @private @const {function():!Promise} */\n    this.completeHandler_ = completeHandler;\n  }\n\n  /**\n   * @return {!SubscribeResponse}\n   */\n  clone() {\n    return new SubscribeResponse(\n        this.raw,\n        this.purchaseData,\n        this.userData,\n        this.completeHandler_);\n  }\n\n  /**\n   * @return {!Object}\n   */\n  json() {\n    return {\n      'purchaseData': this.purchaseData.json(),\n      'userData': this.userData ? this.userData.json() : null,\n    };\n  }\n\n  /**\n   * Allows the receiving site to complete/acknowledge that it registered\n   * the subscription purchase. The typical action would be to create an\n   * account (or match an existing one) and associated the purchase with\n   * that account.\n   *\n   * SwG will display progress indicator until this method is called and\n   * upon receiving this call will show the confirmation to the user.\n   * The promise returned by this method will yield once the user closes\n   * the confirmation.\n   *\n   * @return {!Promise}\n   */\n  complete() {\n    return this.completeHandler_();\n  }\n}\n\n\n/**\n */\nclass PurchaseData {\n\n  /**\n   * @param {string} raw\n   * @param {string} signature\n   */\n  constructor(raw, signature) {\n    /** @const {string} */\n    this.raw = raw;\n    /** @const {string} */\n    this.signature = signature;\n  }\n\n  /**\n   * @return {!PurchaseData}\n   */\n  clone() {\n    return new PurchaseData(this.raw, this.signature);\n  }\n\n  /**\n   * @return {!Object}\n   */\n  json() {\n    return {\n      'data': this.raw,\n      'signature': this.signature,\n    };\n  }\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n */\nclass DeferredAccountCreationResponse {\n\n  /**\n   * @param {!Entitlements} entitlements\n   * @param {!UserData} userData\n   * @param {!PurchaseData} purchaseData\n   * @param {function():!Promise} completeHandler\n   */\n  constructor(entitlements, userData, purchaseData, completeHandler) {\n    /** @const {!Entitlements} */\n    this.entitlements = entitlements;\n    /** @const {!UserData} */\n    this.userData = userData;\n    /** @const {!PurchaseData} */\n    this.purchaseData = purchaseData;\n    /** @private @const {function():!Promise} */\n    this.completeHandler_ = completeHandler;\n  }\n\n  /**\n   * @return {!DeferredAccountCreationResponse}\n   */\n  clone() {\n    return new DeferredAccountCreationResponse(\n        this.entitlements,\n        this.userData,\n        this.purchaseData,\n        this.completeHandler_);\n  }\n\n  /**\n   * @return {!Object}\n   */\n  json() {\n    return {\n      'entitlements': this.entitlements.json(),\n      'userData': this.userData.json(),\n      'purchaseData': this.purchaseData.json(),\n    };\n  }\n\n  /**\n   * Allows the receiving site to complete/acknowledge that it registered\n   * the subscription info. The typical action would be to create an\n   * account (or match an existing one) and associated the subscription with\n   * that account.\n   *\n   * SwG will display progress indicator until this method is called and\n   * upon receiving this call will show the confirmation to the user.\n   * The promise returned by this method will yield once the user closes\n   * the confirmation.\n   *\n   * @return {!Promise}\n   */\n  complete() {\n    return this.completeHandler_();\n  }\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Character mapping from base64url to base64.\n * @const {!Object<string, string>}\n */\nconst base64UrlDecodeSubs = {'-': '+', '_': '/', '.': '='};\n\n\n/**\n * Converts a string which holds 8-bit code points, such as the result of atob,\n * into a Uint8Array with the corresponding bytes.\n * If you have a string of characters, you probably want to be using utf8Encode.\n * @param {string} str\n * @return {!Uint8Array}\n */\nfunction stringToBytes(str) {\n  const bytes = new Uint8Array(str.length);\n  for (let i = 0; i < str.length; i++) {\n    const charCode = str.charCodeAt(i);\n    assert(charCode <= 255, 'Characters must be in range [0,255]');\n    bytes[i] = charCode;\n  }\n  return bytes;\n}\n\n\n/**\n * Converts a 8-bit bytes array into a string\n * @param {!Uint8Array} bytes\n * @return {string}\n */\nfunction bytesToString(bytes) {\n  // Intentionally avoids String.fromCharCode.apply so we don't suffer a\n  // stack overflow. #10495, https://jsperf.com/bytesToString-2\n  const array = new Array(bytes.length);\n  for (let i = 0; i < bytes.length; i++) {\n    array[i] = String.fromCharCode(bytes[i]);\n  }\n  return array.join('');\n}\n\n\n/**\n * Interpret a byte array as a UTF-8 string.\n * @param {!BufferSource} bytes\n * @return {string}\n */\nfunction utf8DecodeSync(bytes) {\n  if (typeof TextDecoder !== 'undefined') {\n    return new TextDecoder('utf-8').decode(bytes);\n  }\n  const asciiString = bytesToString(new Uint8Array(bytes.buffer || bytes));\n  return decodeURIComponent(escape(asciiString));\n}\n\n\n/**\n * Turn a string into UTF-8 bytes.\n * @param {string} string\n * @return {!Uint8Array}\n */\nfunction utf8EncodeSync(string) {\n  if (typeof TextEncoder !== 'undefined') {\n    return new TextEncoder('utf-8').encode(string);\n  }\n  return stringToBytes(unescape(encodeURIComponent(string)));\n}\n\n\n/**\n * Converts a string which is in base64url encoding into a Uint8Array\n * containing the decoded value.\n * @param {string} str\n * @return {!Uint8Array}\n */\nfunction base64UrlDecodeToBytes(str) {\n  const encoded = atob(str.replace(/[-_.]/g, ch => base64UrlDecodeSubs[ch]));\n  return stringToBytes(encoded);\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Simple wrapper around JSON.parse that casts the return value\n * to JsonObject.\n * Create a new wrapper if an array return value is desired.\n * @param {*} json JSON string to parse\n * @return {?JsonObject|undefined} May be extend to parse arrays.\n */\nfunction parseJson(json) {\n  return /** @type {?JsonObject} */(JSON.parse(/** @type {string} */ (json)));\n}\n\n/**\n * Parses the given `json` string without throwing an exception if not valid.\n * Returns `undefined` if parsing fails.\n * Returns the `Object` corresponding to the JSON string when parsing succeeds.\n * @param {*} json JSON string to parse\n * @param {function(!Error)=} opt_onFailed Optional function that will be called\n *     with the error if parsing fails.\n * @return {?JsonObject|undefined} May be extend to parse arrays.\n */\nfunction tryParseJson(json, opt_onFailed) {\n  try {\n    return parseJson(json);\n  } catch (e) {\n    if (opt_onFailed) {\n      opt_onFailed(e);\n    }\n    return undefined;\n  }\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * Provides helper methods to decode and verify JWT tokens.\n */\nclass JwtHelper {\n  constructor() {\n  }\n\n  /**\n   * Decodes JWT token and returns its payload.\n   * @param {string} encodedToken\n   * @return {?JsonObject|undefined}\n   */\n  decode(encodedToken) {\n    return this.decodeInternal_(encodedToken).payload;\n  }\n\n  /**\n   * @param {string} encodedToken\n   * @return {!JwtTokenInternalDef}\n   * @private\n   */\n  decodeInternal_(encodedToken) {\n    // See https://jwt.io/introduction/\n    /**\n     * Throws error about invalid token.\n     */\n    function invalidToken() {\n      throw new Error(`Invalid token: \"${encodedToken}\"`);\n    }\n\n    // Encoded token has three parts: header.payload.sig\n    // Note! The padding is not allowed by JWT spec:\n    // http://self-issued.info/docs/draft-goland-json-web-token-00.html#rfc.section.5\n    const parts = encodedToken.split('.');\n    if (parts.length != 3) {\n      invalidToken();\n    }\n    const headerUtf8Bytes = base64UrlDecodeToBytes(parts[0]);\n    const payloadUtf8Bytes = base64UrlDecodeToBytes(parts[1]);\n    return {\n      header: tryParseJson(utf8DecodeSync(headerUtf8Bytes), invalidToken),\n      payload: tryParseJson(utf8DecodeSync(payloadUtf8Bytes), invalidToken),\n      verifiable: `${parts[0]}.${parts[1]}`,\n      sig: parts[2],\n    };\n  }\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/** @enum {string} */\nconst SubscriptionFlows = {\n  SHOW_OFFERS: 'showOffers',\n  SHOW_SUBSCRIBE_OPTION: 'showSubscribeOption',\n  SHOW_ABBRV_OFFER: 'showAbbrvOffer',\n  SUBSCRIBE: 'subscribe',\n  COMPLETE_DEFERRED_ACCOUNT_CREATION: 'completeDeferredAccountCreation',\n  LINK_ACCOUNT: 'linkAccount',\n  SHOW_LOGIN_PROMPT: 'showLoginPrompt',\n  SHOW_LOGIN_NOTIFICATION: 'showLoginNotification',\n};\n\n\n/**\n * @enum {string}\n */\nconst WindowOpenMode = {\n  AUTO: 'auto',\n  REDIRECT: 'redirect',\n};\n\n\n/**\n * @return {!Config}\n */\nfunction defaultConfig() {\n  return {\n    windowOpenMode: WindowOpenMode.AUTO,\n  };\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * Cached a-tag to avoid memory allocation during URL parsing.\n * @type {HTMLAnchorElement}\n */\nlet a;\n\n\n/**\n * We cached all parsed URLs. As of now there are no use cases\n * of AMP docs that would ever parse an actual large number of URLs,\n * but we often parse the same one over and over again.\n * @type {Object<string, !LocationDef>}\n */\nlet cache;\n\n/**\n * Returns a Location-like object for the given URL. If it is relative,\n * the URL gets resolved.\n * Consider the returned object immutable. This is enforced during\n * testing by freezing the object.\n * @param {string} url\n * @param {boolean=} opt_nocache\n * @return {!LocationDef}\n */\nfunction parseUrl$1(url, opt_nocache) {\n  if (!a) {\n    a = /** @type {!HTMLAnchorElement} */ (self.document.createElement('a'));\n    cache = self.UrlCache || (self.UrlCache = Object.create(null));\n  }\n\n  const fromCache = cache[url];\n  if (fromCache) {\n    return fromCache;\n  }\n\n  const info = parseUrlWithA(a, url);\n\n  return cache[url] = info;\n}\n\n/**\n * Returns a Location-like object for the given URL. If it is relative,\n * the URL gets resolved.\n * @param {!HTMLAnchorElement} a\n * @param {string} url\n * @return {!LocationDef}\n */\nfunction parseUrlWithA(a, url) {\n  a.href = url;\n\n  // IE11 doesn't provide full URL components when parsing relative URLs.\n  // Assigning to itself again does the trick.\n  if (!a.protocol) {\n    a.href = a.href;\n  }\n\n  /** @type {!LocationDef} */\n  const info = {\n    href: a.href,\n    protocol: a.protocol,\n    host: a.host,\n    hostname: a.hostname,\n    port: a.port == '0' ? '' : a.port,\n    pathname: a.pathname,\n    search: a.search,\n    hash: a.hash,\n    origin: '', // Set below.\n  };\n\n  // Some IE11 specific polyfills.\n  // 1) IE11 strips out the leading '/' in the pathname.\n  if (info.pathname[0] !== '/') {\n    info.pathname = '/' + info.pathname;\n  }\n\n  // 2) For URLs with implicit ports, IE11 parses to default ports while\n  // other browsers leave the port field empty.\n  if ((info.protocol == 'http:' && info.port == 80) ||\n      (info.protocol == 'https:' && info.port == 443)) {\n    info.port = '';\n    info.host = info.hostname;\n  }\n\n  // For data URI a.origin is equal to the string 'null' which is not useful.\n  // We instead return the actual origin which is the full URL.\n  if (a.origin && a.origin != 'null') {\n    info.origin = a.origin;\n  } else if (info.protocol == 'data:' || !info.host) {\n    info.origin = info.href;\n  } else {\n    info.origin = info.protocol + '//' + info.host;\n  }\n  return info;\n}\n\n\n/**\n * Adds a parameter to a query string.\n * @param {string} url\n * @param {string} param\n * @param {string} value\n * @return {string}\n */\nfunction addQueryParam(url, param, value) {\n  const queryIndex = url.indexOf('?');\n  const fragmentIndex = url.indexOf('#');\n  let fragment = '';\n  if (fragmentIndex != -1) {\n    fragment = url.substring(fragmentIndex);\n    url = url.substring(0, fragmentIndex);\n  }\n  if (queryIndex == -1) {\n    url += '?';\n  } else if (queryIndex < url.length - 1) {\n    url += '&';\n  }\n  url += encodeURIComponent(param) + '=' + encodeURIComponent(value);\n  return url + fragment;\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/** @private @const {!Array<string>} */\nconst allowedMethods_ = ['GET', 'POST'];\n\n/** @private @enum {number} Allowed fetch responses. */\nconst allowedFetchTypes_ = {\n  document: 1,\n  text: 2,\n};\n\n\n/**\n * A class that polyfills Fetch API.\n */\nclass Xhr {\n\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n    /** @const {!Window} */\n    this.win = win;\n  }\n\n  /**\n   * We want to call `fetch_` unbound from any context since it could\n   * be either the native fetch or our polyfill.\n   *\n   * @param {string} input\n   * @param {!FetchInitDef} init\n   * @return {!Promise<!FetchResponse>|!Promise<!Response>}\n   * @private\n   */\n  fetch_(input, init) {\n    // TODO(avimehta): Should the requests go through when page is not visible?\n    assert(typeof input == 'string', 'Only URL supported: %s', input);\n    // In particular, Firefox does not tolerate `null` values for\n    // `credentials`.\n    const creds = init.credentials;\n    assert(\n        creds === undefined || creds == 'include' || creds == 'omit',\n        'Only credentials=include|omit support: %s', creds);\n    // Fallback to xhr polyfill since `fetch` api does not support\n    // responseType = 'document'. We do this so we don't have to do any parsing\n    // and document construction on the UI thread which would be expensive.\n    if (init.responseType == 'document') {\n      return fetchPolyfill(input, init);\n    }\n    return (this.win.fetch || fetchPolyfill).apply(null, arguments);\n  }\n\n  /**\n   * @param {string} input URL\n   * @param {?FetchInitDef} opt_init Fetch options object.\n   * @return {!Promise<!FetchResponse>}\n   */\n  fetch(input, opt_init) {\n    // TODO (avimehta): Figure out if CORS needs be handled the way AMP does it.\n    const init = setupInit(opt_init);\n    return this.fetch_(input, init).then(response => response, reason => {\n      const targetOrigin = parseUrl$1(input).origin;\n      throw new Error('XHR Failed fetching' +\n          ` (${targetOrigin}/...):`, reason && reason.message);\n    }).then(response => assertSuccess(response));\n  }\n}\n\n/**\n * Normalized method name by uppercasing.\n * @param {string|undefined} method\n * @return {string}\n * @private\n */\nfunction normalizeMethod_(method) {\n  if (method === undefined) {\n    return 'GET';\n  }\n  method = method.toUpperCase();\n\n  assert(\n      allowedMethods_.includes(method),\n      'Only one of %s is currently allowed. Got %s',\n      allowedMethods_.join(', '),\n      method\n  );\n\n  return method;\n}\n\n/**\n * Sets up and normalizes the FetchInitDef\n *\n * @param {?FetchInitDef=} opt_init Fetch options object.\n * @param {string=} opt_accept The HTTP Accept header value.\n * @return {!FetchInitDef}\n */\nfunction setupInit(opt_init, opt_accept) {\n  const init = opt_init || /** @type {FetchInitDef} */ ({});\n  init.method = normalizeMethod_(init.method);\n  init.headers = init.headers || {};\n  if (opt_accept) {\n    init.headers['Accept'] = opt_accept;\n  }\n  return init;\n}\n\n\n/**\n * A minimal polyfill of Fetch API. It only polyfills what we currently use.\n *\n * See https://developer.mozilla.org/en-US/docs/Web/API/GlobalFetch/fetch\n *\n * Notice that the \"fetch\" method itself is not exported as that would require\n * us to immediately support a much wide API.\n *\n * @param {string} input\n * @param {!FetchInitDef} init\n * @return {!Promise<!FetchResponse>}\n * @private Visible for testing\n */\nfunction fetchPolyfill(input, init) {\n  return new Promise(function(resolve, reject) {\n    const xhr = createXhrRequest(init.method || 'GET', input);\n\n    if (init.credentials == 'include') {\n      xhr.withCredentials = true;\n    }\n\n    if (init.responseType in allowedFetchTypes_) {\n      xhr.responseType = init.responseType;\n    }\n\n    if (init.headers) {\n      Object.keys(init.headers).forEach(function(header) {\n        xhr.setRequestHeader(header, init.headers[header]);\n      });\n    }\n\n    xhr.onreadystatechange = () => {\n      if (xhr.readyState < /* STATUS_RECEIVED */ 2) {\n        return;\n      }\n      if (xhr.status < 100 || xhr.status > 599) {\n        xhr.onreadystatechange = null;\n        reject(new Error(`Unknown HTTP status ${xhr.status}`));\n        return;\n      }\n\n      // TODO(dvoytenko): This is currently simplified: we will wait for the\n      // whole document loading to complete. This is fine for the use cases\n      // we have now, but may need to be reimplemented later.\n      if (xhr.readyState == /* COMPLETE */ 4) {\n        resolve(new FetchResponse(xhr));\n      }\n    };\n    xhr.onerror = () => {\n      reject(new Error('Network failure'));\n    };\n    xhr.onabort = () => {\n      reject(new Error('Request aborted'));\n    };\n\n    if (init.method == 'POST') {\n      xhr.send(init.body);\n    } else {\n      xhr.send();\n    }\n  });\n}\n\n/**\n * @param {string} method\n * @param {string} url\n * @return {!XMLHttpRequest}\n * @private\n */\nfunction createXhrRequest(method, url) {\n  const xhr = new XMLHttpRequest();\n  // TODO(avimehta): IE 8/9 don't support XHR (with CORS). Use XDR instead\n  // if we plan to support those browsers.\n  if ('withCredentials' in xhr) {\n    xhr.open(method, url, true);\n  } else {\n    throw new Error('CORS is not supported');\n  }\n  return xhr;\n}\n\n/**\n * If 415 or in the 5xx range.\n * @param {number} status\n */\nfunction isRetriable(status) {\n  return status == 415 || (status >= 500 && status < 600);\n}\n\n\n/**\n * Returns the response if successful or otherwise throws an error.\n * @param {!FetchResponse} response\n * @return {!Promise<!FetchResponse>}\n * @private Visible for testing\n */\nfunction assertSuccess(response) {\n  return new Promise(resolve => {\n    if (response.ok) {\n      return resolve(response);\n    }\n\n    const {status} = response;\n    const err = new Error(`HTTP error ${status}`);\n    err.retriable = isRetriable(status);\n    // TODO(@jridgewell, #9448): Callers who need the response should\n    // skip processing.\n    err.response = response;\n    throw err;\n  });\n}\n\n\n/**\n * Response object in the Fetch API.\n *\n * See https://developer.mozilla.org/en-US/docs/Web/API/GlobalFetch/fetch\n */\nclass FetchResponse {\n  /**\n   * @param {!XMLHttpRequest} xhr\n   */\n  constructor(xhr) {\n    /** @private @const {!XMLHttpRequest} */\n    this.xhr_ = xhr;\n\n    /** @const {number} */\n    this.status = this.xhr_.status;\n\n    /** @const {boolean} */\n    this.ok = this.status >= 200 && this.status < 300;\n\n    /** @const {!FetchResponseHeaders} */\n    this.headers = new FetchResponseHeaders(xhr);\n\n    /** @type {boolean} */\n    this.bodyUsed = false;\n\n    /** @type {?ReadableStream} */\n    this.body = null;\n  }\n\n  /**\n   * Create a copy of the response and return it.\n   * @return {!FetchResponse}\n   */\n  clone() {\n    assert(!this.bodyUsed, 'Body already used');\n    return new FetchResponse(this.xhr_);\n  }\n\n  /**\n   * Drains the response and returns the text.\n   * @return {!Promise<string>}\n   * @private\n   */\n  drainText_() {\n    assert(!this.bodyUsed, 'Body already used');\n    this.bodyUsed = true;\n    return Promise.resolve(this.xhr_.responseText);\n  }\n\n  /**\n   * Drains the response and returns a promise that resolves with the response\n   * text.\n   * @return {!Promise<string>}\n   */\n  text() {\n    return this.drainText_();\n  }\n\n  /**\n   * Drains the response and returns the JSON object.\n   * @return {!Promise<!JsonObject>}\n   */\n  json() {\n    return /** @type {!Promise<!JsonObject>} */ (\n        this.drainText_().then(parseJson));\n  }\n\n  /**\n   * Reads the xhr responseXML.\n   * @return {!Promise<!Document>}\n   * @private\n   */\n  document_() {\n    assert(!this.bodyUsed, 'Body already used');\n    this.bodyUsed = true;\n    assert(this.xhr_.responseXML,\n        'responseXML should exist. Make sure to return ' +\n        'Content-Type: text/html header.');\n    return /** @type {!Promise<!Document>} */ (\n        Promise.resolve(assert(this.xhr_.responseXML)));\n  }\n\n  /**\n   * Drains the response and returns a promise that resolves with the response\n   * ArrayBuffer.\n   * @return {!Promise<!ArrayBuffer>}\n   */\n  arrayBuffer() {\n    return /** @type {!Promise<!ArrayBuffer>} */ (\n        this.drainText_().then(utf8EncodeSync));\n  }\n}\n\n\n/**\n * Provides access to the response headers as defined in the Fetch API.\n * @private Visible for testing.\n */\nclass FetchResponseHeaders {\n  /**\n   * @param {!XMLHttpRequest} xhr\n   */\n  constructor(xhr) {\n    /** @private @const {!XMLHttpRequest} */\n    this.xhr_ = xhr;\n  }\n\n  /**\n   * @param {string} name\n   * @return {string}\n   */\n  get(name) {\n    return this.xhr_.getResponseHeader(name);\n  }\n\n  /**\n   * @param {string} name\n   * @return {boolean}\n   */\n  has(name) {\n    return this.xhr_.getResponseHeader(name) != null;\n  }\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Have to put these in the map to avoid compiler optimization. Due to\n * optimization issues, this map only allows property-style keys. E.g. \"hr1\",\n * as opposed to \"1hr\".\n * @type {!Object<string, number>}\n * @package Visible for testing only.\n */\nconst CACHE_KEYS = {\n  'nocache': 1,\n  'hr1': 3600000,  // 1hr = 1000 * 60 * 60\n  'hr12': 43200000,  // 12hr = 1000 * 60 * 60 * 12\n};\n\n\n/**\n * @return {string}\n */\nfunction feOrigin() {\n  return parseUrl$1('https://news.google.com').origin;\n}\n\n\n/**\n * @param {string} url Relative URL, e.g. \"/service1\".\n * @return {string} The complete URL.\n */\nfunction serviceUrl(url) {\n  return 'https://news.google.com/swg/_/api/v1' + url;\n}\n\n\n/**\n * @param {string} url Relative URL, e.g. \"/offersiframe\".\n * @param {string=} prefix\n * @return {string} The complete URL.\n */\nfunction feUrl(url, prefix = '') {\n  return feCached('https://news.google.com' + prefix + '/swg/_/ui/v1' + url);\n}\n\n\n/**\n * @param {string} url FE URL.\n * @return {string} The complete URL including cache params.\n */\nfunction feCached(url) {\n  return addQueryParam(url, '_', cacheParam('hr1'));\n}\n\n\n/**\n * @param {!Object<string, ?>} args\n * @return {!Object<string, ?>}\n */\nfunction feArgs(args) {\n  return Object.assign(args, {\n    '_client': 'SwG 0.1.22.23',\n  });\n}\n\n\n/**\n * @param {string} cacheKey\n * @return {string}\n * @package Visible for testing only.\n */\nfunction cacheParam(cacheKey) {\n  let period = CACHE_KEYS[cacheKey];\n  if (period == null) {\n    period = 1;\n  }\n  if (period === 0) {\n    return '_';\n  }\n  const now = Date.now();\n  return String(period <= 1 ? now : Math.floor(now / period));\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst PAY_REQUEST_ID = 'swg-pay';\n\n/**\n * @const {!Object<string, string>}\n * @package Visible for testing only.\n */\nconst PAY_ORIGIN = {\n  'PRODUCTION': 'https://pay.google.com',\n  'SANDBOX': 'https://pay.sandbox.google.com',\n};\n\n\n/** @return {string} */\nfunction payOrigin() {\n  return PAY_ORIGIN['PRODUCTION'];\n}\n\n/** @return {string} */\nfunction payUrl() {\n  return feCached(PAY_ORIGIN['PRODUCTION'] + '/gp/p/ui/pay');\n}\n\n/** @return {string} */\nfunction payDecryptUrl() {\n  return PAY_ORIGIN['PRODUCTION'] + '/gp/p/apis/buyflow/process';\n}\n\n\n/**\n * The flow to initiate payment process.\n */\nclass PayStartFlow {\n\n  /**\n   * @param {!../utils/preconnect.Preconnect} pre\n   */\n  static preconnect(pre) {\n    pre.prefetch(payUrl());\n    pre.prefetch(\n        'https://payments.google.com/payments/v4/js/integrator.js?ss=md');\n    pre.prefetch('https://clients2.google.com/gr/gr_full_2.0.6.js');\n    pre.preconnect('https://www.gstatic.com/');\n    pre.preconnect('https://fonts.googleapis.com/');\n    pre.preconnect('https://www.google.com/');\n  }\n\n  /**\n   * @param {!./deps.DepsDef} deps\n   * @param {string} sku\n   */\n  constructor(deps, sku) {\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!web-activities/activity-ports.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../model/page-config.PageConfig} */\n    this.pageConfig_ = deps.pageConfig();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private @const {string} */\n    this.sku_ = sku;\n  }\n\n  /**\n   * Starts the payments flow.\n   * @return {!Promise}\n   */\n  start() {\n    // Start/cancel events.\n    this.deps_.callbacks().triggerFlowStarted(SubscriptionFlows.SUBSCRIBE, {\n      'sku': this.sku_,\n    });\n\n    // TODO(dvoytenko): switch to gpay async client.\n    const forceRedirect =\n        this.deps_.config().windowOpenMode == WindowOpenMode.REDIRECT;\n    const opener = this.activityPorts_.open(\n        PAY_REQUEST_ID,\n        payUrl(),\n        forceRedirect ? '_top' : '_blank',\n        feArgs({\n          'apiVersion': 1,\n          'allowedPaymentMethods': ['CARD'],\n          'environment': 'PRODUCTION',\n          'playEnvironment': 'PROD',\n          'swg': {\n            'publicationId': this.pageConfig_.getPublicationId(),\n            'skuId': this.sku_,\n          },\n        }), {});\n    this.dialogManager_.popupOpened(opener && opener.targetWin);\n    return Promise.resolve();\n  }\n}\n\n\n/**\n * The flow for successful payments completion.\n */\nclass PayCompleteFlow {\n\n  /**\n   * @param {!./deps.DepsDef} deps\n   */\n  static configurePending(deps) {\n    deps.activities().onResult(PAY_REQUEST_ID, port => {\n      deps.dialogManager().popupClosed();\n      deps.entitlementsManager().blockNextNotification();\n      const flow = new PayCompleteFlow(deps);\n      const promise = validatePayResponse(\n          deps.win(), port, flow.complete.bind(flow));\n      deps.callbacks().triggerSubscribeResponse(promise);\n      return promise.then(response => {\n        flow.start(response);\n      }, reason => {\n        if (isCancelError(reason)) {\n          deps.callbacks().triggerFlowCanceled(SubscriptionFlows.SUBSCRIBE);\n        }\n        throw reason;\n      });\n    });\n  }\n\n  /**\n   * @param {!./deps.DepsDef} deps\n   */\n  constructor(deps) {\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!web-activities/activity-ports.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private {?ActivityIframeView} */\n    this.activityIframeView_ = null;\n\n    /** @private {?SubscribeResponse} */\n    this.response_ = null;\n\n    /** @private {?Promise} */\n    this.readyPromise_ = null;\n  }\n\n  /**\n   * Starts the payments completion flow.\n   * @param {!SubscribeResponse} response\n   * @return {!Promise}\n   */\n  start(response) {\n    this.deps_.entitlementsManager().reset(true);\n    this.response_ = response;\n    this.activityIframeView_ = new ActivityIframeView(\n        this.win_,\n        this.activityPorts_,\n        feUrl('/payconfirmiframe'),\n        feArgs({\n          'publicationId': this.deps_.pageConfig().getPublicationId(),\n          'loginHint': response.userData && response.userData.email,\n        }),\n        /* shouldFadeBody */ true);\n    this.activityIframeView_.onMessage(data => {\n      if (data['entitlements']) {\n        this.deps_.entitlementsManager().pushNextEntitlements(\n            /** @type {string} */ (data['entitlements']));\n        return;\n      }\n    });\n    this.activityIframeView_.acceptResult().then(() => {\n      // The flow is complete.\n      this.dialogManager_.completeView(this.activityIframeView_);\n    });\n    this.readyPromise_ = this.dialogManager_.openView(this.activityIframeView_);\n    return this.readyPromise_;\n  }\n\n  /**\n   * @return {!Promise}\n   */\n  complete() {\n    this.deps_.entitlementsManager().unblockNextNotification();\n    this.readyPromise_.then(() => {\n      this.activityIframeView_.message({'complete': true});\n    });\n    return this.activityIframeView_.acceptResult().catch(() => {\n      // Ignore errors.\n    }).then(() => {\n      this.deps_.entitlementsManager().setToastShown(true);\n    });\n  }\n}\n\n\n/**\n * @param {!Window} win\n * @param {!web-activities/activity-ports.ActivityPort} port\n * @param {function():!Promise} completeHandler\n * @return {!Promise<!SubscribeResponse>}\n * @package Visible for testing only.\n */\nfunction validatePayResponse(win, port, completeHandler) {\n  // Do not require security immediately: it will be checked below.\n  return port.acceptResult().then(result => {\n    if (result.origin != payOrigin()) {\n      throw new Error('channel mismatch');\n    }\n    const data = /** @type {!Object} */ (result.data);\n    if (data['redirectEncryptedCallbackData']) {\n      // Data is supplied as an encrypted blob.\n      const xhr = new Xhr(win);\n      const url = payDecryptUrl();\n      const init = /** @type {!../utils/xhr.FetchInitDef} */ ({\n        method: 'post',\n        headers: {'Accept': 'text/plain, application/json'},\n        credentials: 'include',\n        body: data['redirectEncryptedCallbackData'],\n        mode: 'cors',\n      });\n      return xhr.fetch(url, init).then(response => response.json());\n    }\n    // Data is supplied directly: must be a verified and secure channel.\n    if (result.originVerified && result.secureChannel) {\n      return data;\n    }\n    throw new Error('channel mismatch');\n  }).then(data => parseSubscriptionResponse(data, completeHandler));\n}\n\n\n/**\n * @param {*} data\n * @param {function():!Promise} completeHandler\n * @return {!SubscribeResponse}\n */\nfunction parseSubscriptionResponse(data, completeHandler) {\n  let swgData = null;\n  let raw = null;\n  if (data) {\n    if (typeof data == 'string') {\n      raw = /** @type {string} */ (data);\n    } else {\n      // Assume it's a json object in the format:\n      // `{integratorClientCallbackData: \"...\"}` or `{swgCallbackData: \"...\"}`.\n      const json = /** @type {!Object} */ (data);\n      if ('swgCallbackData' in json) {\n        swgData = /** @type {!Object} */ (json['swgCallbackData']);\n      } else if ('integratorClientCallbackData' in json) {\n        raw = json['integratorClientCallbackData'];\n      }\n    }\n  }\n  if (raw && !swgData) {\n    raw = atob(raw);\n    if (raw) {\n      const parsed = parseJson(raw);\n      swgData = parsed['swgCallbackData'];\n    }\n  }\n  if (!swgData) {\n    throw new Error('unexpected payment response');\n  }\n  raw = JSON.stringify(/** @type {!JsonObject} */ (swgData));\n  return new SubscribeResponse(\n      raw,\n      parsePurchaseData(swgData),\n      parseUserData(swgData),\n      completeHandler);\n}\n\n\n/**\n * @param {!Object} swgData\n * @return {!PurchaseData}\n */\nfunction parsePurchaseData(swgData) {\n  const raw = swgData['purchaseData'];\n  const signature = swgData['purchaseDataSignature'];\n  return new PurchaseData(raw, signature);\n}\n\n\n/**\n * @param {!Object} swgData\n * @return {?UserData}\n * @package Visible for testing.\n */\nfunction parseUserData(swgData) {\n  const idToken = swgData['idToken'];\n  if (!idToken) {\n    return null;\n  }\n  const jwt = /** @type {!Object} */ (new JwtHelper().decode(idToken));\n  return new UserData(idToken, jwt);\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * The flow to initiate deferred account process.\n * See `Subscriptions.completeDeferredAccountCreation` API.\n */\nclass DeferredAccountFlow {\n\n  /**\n   * @param {!./deps.DepsDef} deps\n   * @param {?../api/deferred-account-creation.DeferredAccountCreationRequest} options\n   */\n  constructor(deps, options) {\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!web-activities/activity-ports.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private {?ActivityIframeView} */\n    this.activityIframeView_ = null;\n\n    /** @private {?Promise} */\n    this.openPromise_ = null;\n\n    /** @type {!../api/deferred-account-creation.DeferredAccountCreationRequest} */\n    const defaultOptions = {\n      entitlements: null,\n      consent: true,\n    };\n    /** @private @const {!../api/deferred-account-creation.DeferredAccountCreationRequest} */\n    this.options_ = Object.assign(defaultOptions, options || {});\n  }\n\n  /**\n   * Starts the deferred account flow.\n   * @return {!Promise<!DeferredAccountCreationResponse>}\n   */\n  start() {\n    const entitlements = this.options_.entitlements;\n\n    // For now, entitlements are required to be present and have the Google\n    // token. This is strictly not required for the implementation. But it's\n    // preferrable API-wise at this time.\n    if (!entitlements || !entitlements.getEntitlementForSource('google')) {\n      throw new Error('No entitlements with \"google\" source');\n    }\n\n    // Start/cancel events.\n    this.deps_.callbacks().triggerFlowStarted(\n        SubscriptionFlows.COMPLETE_DEFERRED_ACCOUNT_CREATION);\n\n    this.activityIframeView_ = new ActivityIframeView(\n        this.win_,\n        this.activityPorts_,\n        feUrl('/recoveriframe'),\n        feArgs({\n          'publicationId': this.deps_.pageConfig().getPublicationId(),\n          'productId': this.deps_.pageConfig().getProductId(),\n          'entitlements': entitlements && entitlements.raw || null,\n          'consent': this.options_.consent,\n        }),\n        /* shouldFadeBody */ true);\n\n    this.openPromise_ = this.dialogManager_.openView(this.activityIframeView_);\n    return this.activityIframeView_.acceptResult().then(result => {\n      // The consent part is complete.\n      return this.handleConsentResponse_(/** @type {!Object} */ (result.data));\n    }, reason => {\n      if (isCancelError(reason)) {\n        this.deps_.callbacks().triggerFlowCanceled(\n            SubscriptionFlows.COMPLETE_DEFERRED_ACCOUNT_CREATION);\n      } else {\n        this.dialogManager_.completeView(this.activityIframeView_);\n      }\n      throw reason;\n    });\n  }\n\n  /**\n   * @param {!Object} data\n   * @return {!DeferredAccountCreationResponse}\n   * @private\n   */\n  handleConsentResponse_(data) {\n    this.deps_.entitlementsManager().blockNextNotification();\n\n    // Parse the response.\n    const entitlementsJwt = data['entitlements'];\n    const idToken = data['idToken'];\n    const entitlements = this.deps_.entitlementsManager()\n        .parseEntitlements({'signedEntitlements': entitlementsJwt});\n    const userData = new UserData(\n        idToken,\n        /** @type {!Object} */ (new JwtHelper().decode(idToken)));\n    const purchaseData = new PurchaseData(\n        data['purchaseData'],\n        data['purchaseDataSignature']);\n\n    // For now, we'll use the `PayCompleteFlow` as a \"creating account\" flow.\n    // But this can be eventually implemented by the same iframe.\n    const creatingFlow = new PayCompleteFlow(this.deps_);\n    const completeHandler = creatingFlow.complete.bind(creatingFlow);\n\n    const response = new DeferredAccountCreationResponse(\n        entitlements,\n        userData,\n        purchaseData,\n        completeHandler);\n\n    // Start the \"sync\" flow.\n    creatingFlow.start(new SubscribeResponse(\n        '',  // raw field doesn't matter in this case\n        purchaseData,\n        userData,\n        () => Promise.resolve()  // completeHandler doesn't matter in this case\n    ));\n    return response;\n  }\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst CSS$1 = \"body{padding:0;margin:0}swg-container,swg-loading,swg-loading-animate,swg-loading-image{display:block}swg-loading-container{width:100%!important;display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-align:center!important;-ms-flex-align:center!important;align-items:center!important;-webkit-box-pack:center!important;-ms-flex-pack:center!important;justify-content:center!important;min-height:148px!important;height:100%!important;bottom:0!important;margin-top:5px!important;z-index:2147483647!important}@media (min-height:630px), (min-width:630px){swg-loading-container{width:560px!important;margin-left:35px!important;border-top-left-radius:8px!important;border-top-right-radius:8px!important;background-color:#fff!important;box-shadow:0 1px 1px rgba(60,64,67,.3),0 1px 4px 1px rgba(60,64,67,.15)!important}}swg-loading{z-index:2147483647!important;width:36px;height:36px;overflow:hidden;-webkit-animation:mspin-rotate 1568.63ms infinite linear;animation:mspin-rotate 1568.63ms infinite linear}swg-loading-animate{-webkit-animation:mspin-revrot 5332ms infinite steps(4);animation:mspin-revrot 5332ms infinite steps(4)}swg-loading-image{background-image:url('data:image/svg+xml;charset=utf-8;base64,DQo8c3ZnIHZlcnNpb249IjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIxMTY2NCIgaGVpZ2h0PSIzNiIgdmlld0JveD0iMCAwIDExNjY0IDM2Ij48ZGVmcz48cGF0aCBpZD0iYSIgZmlsbD0ibm9uZSIgc3Ryb2tlLWRhc2hhcnJheT0iNTguOSIgZD0iTTE4IDUuNUExMi41IDEyLjUgMCAxIDEgNS41IDE4IiBzdHJva2Utd2lkdGg9IjMiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiLz48ZyBpZD0iYiI+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjE3Ni42NiIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSIxNzYuNTgiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM2KSIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSIxNzYuMzIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDcyKSIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSIxNzUuODUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwOCkiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iMTc1LjE0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNDQpIi8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjE3NC4xMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTgwKSIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSIxNzIuNzgiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIxNikiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iMTcxLjAxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNTIpIi8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjE2OC43OCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjg4KSIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSIxNjYuMDIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMyNCkiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iMTYyLjczIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNjApIi8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjE1OS4wMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzk2KSIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSIxNTUuMDQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQzMikiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iMTUxLjA1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0NjgpIi8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjE0Ny4yMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTA0KSIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSIxNDMuNzEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDU0MCkiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iMTQwLjU0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1NzYpIi8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjEzNy43MiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjEyKSIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSIxMzUuMjEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDY0OCkiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iMTMyLjk4IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2ODQpIi8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjEzMS4wMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzIwKSIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSIxMjkuMjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDc1NikiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iMTI3LjcxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3OTIpIi8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjEyNi4zMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoODI4KSIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSIxMjUuMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoODY0KSIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSIxMjQuMDEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDkwMCkiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iMTIzLjA0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5MzYpIi8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjEyMi4xOSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTcyKSIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSIxMjEuNDMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMDgpIi8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjEyMC43NyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTA0NCkiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iMTIwLjE5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDgwKSIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSIxMTkuNjkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDExMTYpIi8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjExOS4yNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTE1MikiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iMTE4Ljg5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMTg4KSIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSIxMTguNTgiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEyMjQpIi8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjExOC4zMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTI2MCkiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iMTE4LjEzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjk2KSIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSIxMTcuOTgiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzMzIpIi8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjExNy44OCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM2OCkiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iMTE3LjgyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNDA0KSIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSIxMTcuOCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTQ0MCkiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iMTE3LjcyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNDc2KSIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSIxMTcuNDYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1MTIpIi8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjExNyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU0OCkiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iMTE2LjI5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNTg0KSIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSIxMTUuMjkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2MjApIi8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjExMy45NCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTY1NikiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iMTEyLjE5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjkyKSIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSIxMDkuOTciIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE3MjgpIi8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjEwNy4yMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTc2NCkiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iMTAzLjk2IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxODAwKSIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSIxMDAuMjciIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE4MzYpIi8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9Ijk2LjMyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxODcyKSIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSI5Mi4zNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTkwOCkiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iODguNTYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE5NDQpIi8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9Ijg1LjA3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxOTgwKSIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSI4MS45MiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjAxNikiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iNzkuMTEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIwNTIpIi8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9Ijc2LjYxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDg4KSIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSI3NC40IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMTI0KSIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSI3Mi40NSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjE2MCkiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iNzAuNzEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIxOTYpIi8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjY5LjE2IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMjMyKSIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSI2Ny43OSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjI2OCkiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iNjYuNTciIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIzMDQpIi8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjY1LjQ5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMzQwKSIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSI2NC41MyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjM3NikiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iNjMuNjgiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI0MTIpIi8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjYyLjkzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNDQ4KSIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSI2Mi4yNyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjQ4NCkiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iNjEuNyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjUyMCkiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iNjEuMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjU1NikiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iNjAuNzciIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI1OTIpIi8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjYwLjQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2MjgpIi8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjYwLjEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2NjQpIi8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjU5Ljg1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNzAwKSIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSI1OS42NSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjczNikiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iNTkuNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjc3MikiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iNTkuNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjgwOCkiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iNTkuMzQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI4NDQpIi8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjU5LjMyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyODgwKSIvPjwvZz48ZyBpZD0iYyI+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjcwLjcxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMTk2KSIgb3BhY2l0eT0iLjA1Ii8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjY5LjE2IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMjMyKSIgb3BhY2l0eT0iLjEiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iNjcuNzkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyNjgpIiBvcGFjaXR5PSIuMTUiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iNjYuNTciIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIzMDQpIiBvcGFjaXR5PSIuMiIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSI2NS40OSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjM0MCkiIG9wYWNpdHk9Ii4yNSIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSI2NC41MyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjM3NikiIG9wYWNpdHk9Ii4zIi8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjYzLjY4IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNDEyKSIgb3BhY2l0eT0iLjM1Ii8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjYyLjkzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNDQ4KSIgb3BhY2l0eT0iLjQiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iNjIuMjciIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI0ODQpIiBvcGFjaXR5PSIuNDUiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iNjEuNyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjUyMCkiIG9wYWNpdHk9Ii41Ii8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjYxLjIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI1NTYpIiBvcGFjaXR5PSIuNTUiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iNjAuNzciIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI1OTIpIiBvcGFjaXR5PSIuNiIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSI2MC40IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNjI4KSIgb3BhY2l0eT0iLjY1Ii8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjYwLjEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2NjQpIiBvcGFjaXR5PSIuNyIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSI1OS44NSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjcwMCkiIG9wYWNpdHk9Ii43NSIvPjx1c2UgeGxpbms6aHJlZj0iI2EiIHN0cm9rZS1kYXNob2Zmc2V0PSI1OS42NSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjczNikiIG9wYWNpdHk9Ii44Ii8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjU5LjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI3NzIpIiBvcGFjaXR5PSIuODUiLz48dXNlIHhsaW5rOmhyZWY9IiNhIiBzdHJva2UtZGFzaG9mZnNldD0iNTkuNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjgwOCkiIG9wYWNpdHk9Ii45Ii8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjU5LjM0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyODQ0KSIgb3BhY2l0eT0iLjk1Ii8+PHVzZSB4bGluazpocmVmPSIjYSIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjU5LjMyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyODgwKSIvPjwvZz48L2RlZnM+PHVzZSB4bGluazpocmVmPSIjYiIgc3Ryb2tlPSIjNDI4NWY0Ii8+PHVzZSB4bGluazpocmVmPSIjYyIgc3Ryb2tlPSIjZGI0NDM3Ii8+PHVzZSB4bGluazpocmVmPSIjYiIgc3Ryb2tlPSIjZGI0NDM3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyOTE2KSIvPjx1c2UgeGxpbms6aHJlZj0iI2MiIHN0cm9rZT0iI2Y0YjQwMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjkxNikiLz48dXNlIHhsaW5rOmhyZWY9IiNiIiBzdHJva2U9IiNmNGI0MDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDU4MzIpIi8+PHVzZSB4bGluazpocmVmPSIjYyIgc3Ryb2tlPSIjMGY5ZDU4IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1ODMyKSIvPjx1c2UgeGxpbms6aHJlZj0iI2IiIHN0cm9rZT0iIzBmOWQ1OCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoODc0OCkiLz48dXNlIHhsaW5rOmhyZWY9IiNjIiBzdHJva2U9IiM0Mjg1ZjQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDg3NDgpIi8+PC9zdmc+');background-size:100%;width:11664px;height:36px;-webkit-animation:swg-loading-film 5332ms infinite steps(324);animation:swg-loading-film 5332ms infinite steps(324)}@-webkit-keyframes swg-loading-film{0%{-webkit-transform:translateX(0);transform:translateX(0)}to{-webkit-transform:translateX(-11664px);transform:translateX(-11664px)}}@keyframes swg-loading-film{0%{-webkit-transform:translateX(0);transform:translateX(0)}to{-webkit-transform:translateX(-11664px);transform:translateX(-11664px)}}@-webkit-keyframes mspin-rotate{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes mspin-rotate{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes mspin-revrot{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(-360deg);transform:rotate(-360deg)}}@keyframes mspin-revrot{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(-360deg);transform:rotate(-360deg)}}\\n/*# sourceURL=/./src/ui/ui.css*/\";\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Returns a promise which is resolved after the given duration of animation\n * @param {!Element} el - Element to be observed.\n * @param {!Object<string, string|number>} props - properties to be animated.\n * @param {number} durationMillis - duration of animation.\n * @param {string} curve - transition function for the animation.\n * @return {!Promise} Promise which resolves once the animation is done playing.\n */\nfunction transition(el, props, durationMillis, curve) {\n  const win = el.ownerDocument.defaultView;\n  const previousTransitionValue = el.style.transition || '';\n  return new Promise(resolve => {\n    win.setTimeout(() => {\n      win.setTimeout(resolve, durationMillis);\n      const tr = `${durationMillis}ms ${curve}`;\n      setImportantStyles(el, Object.assign({\n        'transition': `transform ${tr}, opacity ${tr}`,\n      }, props));\n    });\n  }).then(() => {\n    setImportantStyles(el, {\n      'transition': previousTransitionValue,\n    });\n  });\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nclass Graypane {\n\n  /**\n   * @param {!../model/doc.Doc} doc\n   * @param {number} zIndex\n   */\n  constructor(doc, zIndex) {\n    /** @private @const {!../model/doc.Doc} */\n    this.doc_ = doc;\n\n    /** @private @const {!Element} */\n    this.fadeBackground_ = this.doc_.getWin().document.createElement(\n        'swg-popup-background');\n    setImportantStyles(this.fadeBackground_, {\n      'z-index': zIndex,\n      'display': 'none',\n      'position': 'fixed',\n      'top': 0,\n      'right': 0,\n      'bottom': 0,\n      'left': 0,\n      'background-color': 'rgba(32, 33, 36, .6)',\n    });\n  }\n\n  /**\n   * @return {!Element}\n   */\n  getElement() {\n    return this.fadeBackground_;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isAttached() {\n    return !!this.fadeBackground_.parentNode;\n  }\n\n  /**\n   * Attaches the graypane to the document.\n   */\n  attach() {\n    this.doc_.getBody().appendChild(this.fadeBackground_);\n  }\n\n  /**\n   * Detaches the graypane to the document.\n   */\n  destroy() {\n    this.doc_.getBody().removeChild(this.fadeBackground_);\n  }\n\n  /**\n   * Shows the graypane.\n   * @param {boolean=} animated\n   * @return {!Promise|undefined}\n   */\n  show(animated = true) {\n    setImportantStyles(this.fadeBackground_, {\n      'display': 'block',\n      'opacity': animated ? 0 : 1,\n    });\n    if (animated) {\n      return transition(this.fadeBackground_, {\n        'opacity': 1,\n      }, 300, 'ease-out');\n    }\n  }\n\n  /**\n   * Hides the graypane.\n   * @param {boolean=} animated\n   * @return {!Promise|undefined}\n   */\n  hide(animated = true) {\n    if (animated) {\n      return transition(this.fadeBackground_, {\n        'opacity': 0,\n      }, 300, 'ease-out').then(() => {\n        setImportantStyles(this.fadeBackground_, {'display': 'none'});\n      });\n    }\n    setImportantStyles(this.fadeBackground_, {'display': 'none'});\n  }\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * Loading indicator class. Builds the loading indicator view to be injected in\n * parent element <iframe class=\"swg-dialog\"> element. Provides methods to\n * show/hide loading indicator.\n */\nclass LoadingView {\n\n  /**\n   * @param {!Document} doc\n   */\n  constructor(doc) {\n\n    /** @private @const {!Document} */\n    this.doc_ = doc;\n\n    /** @private @const {!Element} */\n    this.loadingContainer_ =\n        createElement(this.doc_, 'swg-loading-container', {});\n\n    /** @private @const {!Element} */\n    this.loading_ = createElement(this.doc_, 'swg-loading', {});\n    this.loadingContainer_.appendChild(this.loading_);\n\n    this.loadingContainer_.style.setProperty('display', 'none', 'important');\n\n    // Build the animated loading indicator.\n    this.buildLoadingIndicator_();\n  }\n\n  /**\n   * Gets the populated loading container.\n   * @return {!Element}\n   */\n  getElement() {\n    return this.loadingContainer_;\n  }\n\n  /**\n   * Shows the loading indicator within the container element.\n   */\n  show() {\n    this.loadingContainer_.style.removeProperty('display');\n  }\n\n  /**\n   * Hides the loading indicator within the container element.\n   */\n  hide() {\n    this.loadingContainer_.style.setProperty('display', 'none', 'important');\n  }\n\n  /**\n   * Populates the loading indivicator. The populated element\n   * can be added in any view, when required.\n   * @private\n   */\n  buildLoadingIndicator_() {\n    const loadingContainer = this.loading_;\n\n    const loadingIndicatorTopContainer =\n        createElement(this.doc_, 'swg-loading-animate', {});\n    loadingContainer.appendChild(loadingIndicatorTopContainer);\n\n    const loadingIndicatorChildContainer =\n        createElement(this.doc_, 'swg-loading-image', {});\n    loadingIndicatorTopContainer.appendChild(loadingIndicatorChildContainer);\n  }\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @const {!Object<string|number>} */\nconst friendlyIframeAttributes = {\n  'frameborder': 0,\n  'scrolling': 'no',\n  'src': 'about:blank',\n};\n\n/**\n * The class for building friendly iframe.\n */\nclass FriendlyIframe {\n\n  /**\n   * @param {!Document} doc\n   * @param {!Object<string, string|number>=} attrs\n   */\n  constructor(doc, attrs = {}) {\n\n    const mergedAttrs = Object.assign({}, friendlyIframeAttributes, attrs);\n\n    /** @private @const {!HTMLIFrameElement} */\n    this.iframe_ =\n        /** @type {!HTMLIFrameElement} */ (\n            createElement(doc, 'iframe', mergedAttrs));\n\n    // Ensure that the new iframe does not inherit any CSS styles.\n    resetAllStyles(this.iframe_);\n\n    /** @private @const {!Promise} */\n    this.ready_ = new Promise(resolve => {\n      this.iframe_.onload = resolve;\n    });\n  }\n\n  /**\n   * When promise is resolved.\n   * @return {!Promise}\n   */\n  whenReady() {\n    return this.ready_;\n  }\n\n  /**\n   * Gets the iframe element.\n   * @return {!HTMLIFrameElement}\n   */\n  getElement() {\n    return this.iframe_;\n  }\n\n  /**\n   * Gets the document object of the iframe element.\n   * @return {!Document}\n   */\n  getDocument() {\n    const doc = this.getElement().contentDocument ||\n        (this.getElement().contentWindow &&\n        this.getElement().contentWindow.document);\n\n    if (!doc) {\n      throw new Error('not loaded');\n    }\n    return doc;\n  }\n\n  /**\n   * Gets the body of the iframe.\n   * @return {!Element}\n   */\n  getBody() {\n    return /** @type {!Element} */ (this.getDocument().body);\n  }\n\n  /**\n   * Whether the iframe is connected.\n   * @return {boolean}\n   */\n  isConnected() {\n    if (!this.getElement().ownerDocument) {\n      return false;\n    }\n    return this.getElement().ownerDocument.contains(this.iframe_);\n  }\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst Z_INDEX = 2147483647;\n\n/**\n * Default iframe important styles.\n * Note: The iframe responsiveness media query style is injected in the\n * publisher's page since style attribute can not include media query.\n * @const {!Object<string, string|number>}\n */\nconst rootElementImportantStyles = {\n  'min-height': '50px',\n  'border': 'none',\n  'display': 'block',\n  'position': 'fixed',\n  'z-index': Z_INDEX,\n  'box-sizing': 'border-box',\n};\n\n/**\n * Reset view styles.\n * @const {!Object<string, string|number>}\n */\nconst resetViewStyles = {\n  'position': 'absolute',\n  'top': '0',\n  'left': '0',\n  'right': '0',\n  'bottom': '0',\n  'opacity': 0,\n  /* These lines are a work around to this issue in iOS:     */\n  /* https://bugs.webkit.org/show_bug.cgi?id=155198          */\n  'height': 0,\n  'max-height': '100%',\n  'max-width': '100%',\n  'min-height': '100%',\n  'min-width': '100%',\n  'width': 0,\n};\n\n/**\n * Position of the dialog.\n * @const @enum {string}\n */\nconst PositionAt = {\n  BOTTOM: 'BOTTOM',\n  TOP: 'TOP',\n  FLOAT: 'FLOAT',\n  FULL: 'FULL',\n};\n\n\n/**\n * The class for the top level dialog.\n * @final\n */\nclass Dialog {\n\n  /**\n   * Create a dialog for the provided doc.\n   * @param {!../model/doc.Doc} doc\n   * @param {!Object<string, string|number>=} importantStyles\n   * @param {!Object<string, string|number>=} styles\n   */\n  constructor(doc, importantStyles = {}, styles = {}) {\n    /** @private @const {!../model/doc.Doc} */\n    this.doc_ = doc;\n\n    /** @private @const {!FriendlyIframe} */\n    this.iframe_ = new FriendlyIframe(\n        doc.getWin().document, {'class': 'swg-dialog'});\n\n    /** @private @const {!Graypane} */\n    this.graypane_ = new Graypane(doc, Z_INDEX - 1);\n\n    const modifiedImportantStyles =\n        Object.assign({}, rootElementImportantStyles, importantStyles);\n    setImportantStyles(\n        this.iframe_.getElement(), modifiedImportantStyles);\n\n    setStyles(this.iframe_.getElement(), styles);\n\n    /** @private {LoadingView} */\n    this.loadingView_ = null;\n\n    /** @private {?Element} */\n    this.container_ = null;  // Depends on constructed document inside iframe.\n\n    /** @private {?./view.View} */\n    this.view_ = null;\n\n    /** @private {?Promise} */\n    this.animating_ = null;\n\n    /** @private {boolean} */\n    this.hidden_ = false;\n  }\n\n  /**\n   * Opens the dialog and builds the iframe container.\n   * @param {boolean=} hidden\n   * @return {!Promise<!Dialog>}\n   */\n  open(hidden = false) {\n    const iframe = this.iframe_;\n    if (iframe.isConnected()) {\n      throw new Error('already opened');\n    }\n\n    // Attach.\n    this.doc_.getBody().appendChild(iframe.getElement());  // Fires onload.\n    this.graypane_.attach();\n\n    if (hidden) {\n      setImportantStyles(iframe.getElement(), {\n        'visibility': 'hidden',\n        'opacity': 0,\n      });\n      this.hidden_ = hidden;\n    } else {\n      this.show_();\n    }\n\n    return iframe.whenReady().then(() => {\n      this.buildIframe_();\n      return this;\n    });\n  }\n\n  /**\n   * Build the iframe with the styling after iframe is loaded.\n   * @private\n   */\n  buildIframe_() {\n    const iframe = this.iframe_;\n    const iframeBody = iframe.getBody();\n    const iframeDoc = /** @type {!HTMLDocument} */ (this.iframe_.getDocument());\n\n    // Inject Google fonts in <HEAD> section of the iframe.\n    injectStyleSheet(iframeDoc, CSS$1);\n\n    // Add Loading indicator.\n    this.loadingView_ = new LoadingView(iframeDoc);\n    iframeBody.appendChild(this.loadingView_.getElement());\n\n    // Container for all dynamic content, including 3P iframe.\n    this.container_ = createElement(iframeDoc, 'swg-container', {});\n    iframeBody.appendChild(this.container_);\n    this.setPosition_();\n  }\n\n  /**\n   * Closes the dialog.\n   * @param {boolean=} animated\n   * @return {!Promise}\n   */\n  close(animated = true) {\n    let animating;\n    if (animated) {\n      animating = this.animate_(() => {\n        this.graypane_.hide(/* animate */ true);\n        return transition(this.getElement(), {\n          'transform': 'translateY(100%)',\n        }, 300, 'ease-out');\n      });\n    } else {\n      animating = Promise.resolve();\n    }\n    return animating.then(() => {\n      this.doc_.getBody().removeChild(this.iframe_.getElement());\n      this.removePaddingToHtml_();\n      this.graypane_.destroy();\n    });\n  }\n\n  /**\n   * Gets the container within the dialog.\n   * @return {!Element}\n   */\n  getContainer() {\n    if (!this.container_) {\n      throw new Error('not opened yet');\n    }\n    return this.container_;\n  }\n\n  /**\n   * Gets the attached iframe instance.\n   * @return {!FriendlyIframe}\n   */\n  getIframe() {\n    return this.iframe_;\n  }\n\n  /**\n   * Gets the Iframe element.\n   * @return {!HTMLIFrameElement}\n   */\n  getElement() {\n    return this.iframe_.getElement();\n  }\n\n  /**\n   * Whether to display loading indicator.\n   * @param {boolean} isLoading\n   */\n  setLoading(isLoading) {\n    if (isLoading) {\n      this.loadingView_.show();\n    } else {\n      this.loadingView_.hide();\n    }\n  }\n\n  /** @return {?./view.View} */\n  getCurrentView() {\n    return this.view_;\n  }\n\n  /**\n   * Opens the given view and removes existing view from the DOM if any.\n   * @param {!./view.View} view\n   * @return {!Promise}\n   */\n  openView(view) {\n    if (this.view_) {\n      // TODO(dparikh): Maybe I need to keep it until the new one is ready.\n      removeChildren(this.getContainer());\n    }\n    this.view_ = view;\n\n    setImportantStyles(view.getElement(), resetViewStyles);\n    this.setLoading(true);\n    this.getContainer().appendChild(view.getElement());\n\n    // If the current view should fade the parent document.\n    if (view.shouldFadeBody() && !this.hidden_) {\n      this.graypane_.show(/* animate */ true);\n    }\n\n    return view.init(this).then(() => {\n      setImportantStyles(view.getElement(), {\n        'opacity': 1,\n      });\n      if (this.hidden_) {\n        if (view.shouldFadeBody()) {\n          this.graypane_.show(/* animated */ true);\n        }\n        this.show_();\n      }\n      this.setLoading(false);\n    });\n  }\n\n  /**\n   * Show the iframe\n   * @private\n   */\n  show_() {\n    this.animate_(() => {\n      setImportantStyles(this.getElement(), {\n        'transform': 'translateY(100%)',\n        'opactiy': 1,\n        'visibility': 'visible',\n      });\n      return transition(this.getElement(), {\n        'transform': 'translateY(0)',\n        'opacity': 1,\n        'visibility': 'visible',\n      }, 300, 'ease-out');\n    });\n    this.hidden_ = false;\n  }\n\n  /**\n   * Resizes the dialog container.\n   * @param {!./view.View} view\n   * @param {number} height\n   * @param {boolean=} animated\n   * @return {?Promise}\n   */\n  resizeView(view, height, animated = true) {\n    if (this.view_ != view) {\n      return null;\n    }\n    const newHeight = this.getMaxAllowedHeight_(height);\n\n    let animating;\n    if (animated) {\n      const oldHeight = this.getElement().offsetHeight;\n      if (newHeight >= oldHeight) {\n        // Expand.\n        animating = this.animate_(() => {\n          setImportantStyles(this.getElement(), {\n            'height': `${newHeight}px`,\n            'transform': `translateY(${newHeight - oldHeight}px)`,\n          });\n          return transition(this.getElement(), {\n            'transform': 'translateY(0)',\n          }, 300, 'ease-out');\n        });\n      } else {\n        // Collapse.\n        animating = this.animate_(() => {\n          return transition(this.getElement(), {\n            'transform': `translateY(${oldHeight - newHeight}px)`,\n          }, 300, 'ease-out').then(() => {\n            setImportantStyles(this.getElement(), {\n              'height': `${newHeight}px`,\n              'transform': 'translateY(0)',\n            });\n          });\n        });\n      }\n    } else {\n      setImportantStyles(this.getElement(), {\n        'height': `${newHeight}px`,\n      });\n      animating = Promise.resolve();\n    }\n    return animating.then(() => {\n      this.updatePaddingToHtml_(height);\n      view.resized();\n    });\n  }\n\n  /**\n   * @param {function():!Promise} callback\n   * @return {!Promise}\n   * @private\n   */\n  animate_(callback) {\n    const wait = this.animating_ || Promise.resolve();\n    return this.animating_ = wait.then(() => {\n      return callback();\n    }, () => {\n      // Ignore errors to make sure animations don't get stuck.\n    }).then(() => {\n      this.animating_ = null;\n    });\n  }\n\n  /**\n   * Returns maximum allowed height for current viewport.\n   * @param {number} height\n   * @return {number}\n   * @private\n   */\n  getMaxAllowedHeight_(height) {\n    return Math.min(height, this.doc_.getWin()./*OK*/innerHeight * 0.9);\n  }\n\n  /**\n   * Gets the element's height.\n   * @return {number}\n   * @private\n   */\n  getHeight_() {\n    return this.getElement().offsetHeight;\n  }\n\n  /**\n   * Sets the position of the dialog. Currently 'BOTTOM' is set by default.\n   */\n  setPosition_() {\n    setImportantStyles(this.getElement(), this.getPositionStyle_());\n  }\n\n  /**\n   * Add the padding to the containing page so as to not hide the content\n   * behind the popup, if rendered at the bottom.\n   * @param {number} newHeight\n   * @private\n   */\n  updatePaddingToHtml_(newHeight) {\n    if (this.inferPosition_() == PositionAt.BOTTOM) {\n      const bottomPadding = newHeight + 20;  // Add some extra padding.\n      const htmlElement = this.doc_.getRootElement();\n      setImportantStyles(htmlElement, {\n        'padding-bottom': `${bottomPadding}px`,\n      });\n    }\n  }\n\n  /**\n   * Removes previouly added bottom padding from the document.\n   * @private\n   */\n  removePaddingToHtml_() {\n    this.doc_.getRootElement().style.removeProperty('padding-bottom');\n  }\n\n\n  /**\n   * Calculates the position of the dialog. Currently dialog is positioned at\n   * the bottom only. This could change in future to adjust the dialog position\n   * based on the screen size.\n   * @return {string}\n   * @private\n   */\n  inferPosition_() {\n    return PositionAt.BOTTOM;\n  }\n\n  /**\n   * Returns the styles required to postion the dialog.\n   * @return {!Object<string, string|number>}\n   * @private\n   */\n  getPositionStyle_() {\n    const dialogPosition = this.inferPosition_();\n    switch (dialogPosition) {\n      case PositionAt.BOTTOM:\n        return {'bottom': 0};\n      case PositionAt.TOP:\n        return {'top': 0};\n      case PositionAt.FLOAT:\n        return {\n          'position': 'fixed',\n          'top': '50%',\n          'left': '50%',\n          'transform': 'translate(-50%, -50%)',\n        };\n      case PositionAt.FULL:\n        return {\n          'position': 'fixed',\n          'height': '100%',\n          'top': 0,\n          'bottom': 0,\n        };\n      default:\n        return {'bottom': 0};\n    }\n  }\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst POPUP_Z_INDEX = 2147483647;\n\n\n/**\n * The class for the top level dialog.\n * @final\n */\nclass DialogManager {\n\n  /**\n   * @param {!../model/doc.Doc} doc\n   */\n  constructor(doc) {\n    /** @private @const {!../model/doc.Doc} */\n    this.doc_ = doc;\n\n    /** @private {?Dialog} */\n    this.dialog_ = null;\n\n    /** @private {?Promise<!Dialog>} */\n    this.openPromise_ = null;\n\n    /** @private @const {!Graypane} */\n    this.popupGraypane_ = new Graypane(doc, POPUP_Z_INDEX);\n\n    /** @private {?Window} */\n    this.popupWin_ = null;\n\n    this.popupGraypane_.getElement().addEventListener('click', () => {\n      if (this.popupWin_) {\n        try {\n          this.popupWin_.focus();\n        } catch (e) {\n          // Ignore error.\n        }\n      }\n    });\n  }\n\n  /**\n   * @param {boolean=} hidden\n   * @return {!Promise<!Dialog>}\n   */\n  openDialog(hidden = false) {\n    if (!this.openPromise_) {\n      this.dialog_ = new Dialog(this.doc_);\n      this.openPromise_ = this.dialog_.open(hidden);\n    }\n    return this.openPromise_;\n  }\n\n  /**\n   * @param {!./view.View} view\n   * @param {boolean=} hidden\n   * @return {!Promise}\n   */\n  openView(view, hidden = false) {\n    view.whenComplete().catch(reason => {\n      if (isCancelError(reason)) {\n        this.completeView(view);\n      }\n      throw (reason);\n    });\n    return this.openDialog(hidden).then(dialog => {\n      return dialog.openView(view);\n    });\n  }\n\n  /**\n   * @param {?./view.View} view\n   */\n  completeView(view) {\n    // Give a small amount of time for another view to take over the dialog.\n    setTimeout(() => {\n      if (this.dialog_ && this.dialog_.getCurrentView() == view) {\n        this.close_();\n      }\n    }, 100);\n  }\n\n  /**\n   */\n  completeAll() {\n    if (this.dialog_) {\n      this.close_();\n    }\n    if (this.popupGraypane_.isAttached()) {\n      this.popupGraypane_.destroy();\n    }\n  }\n\n  /** @private */\n  close_() {\n    this.dialog_.close();\n    this.dialog_ = null;\n    this.openPromise_ = null;\n  }\n\n  /**\n   * @param {?Window|undefined} targetWin\n   */\n  popupOpened(targetWin) {\n    this.popupWin_ = targetWin || null;\n    if (!this.popupGraypane_.isAttached()) {\n      this.popupGraypane_.attach();\n    }\n    this.popupGraypane_.show();\n  }\n\n  /**\n   */\n  popupClosed() {\n    this.popupWin_ = null;\n    try {\n      this.popupGraypane_.hide();\n    } catch (e) {\n      // Ignore.\n    }\n  }\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * @param {!Document} doc\n * @return {string}\n */\nfunction getReadyState(doc) {\n  return /** @type {string} */ (doc['readyState']);\n}\n\n\n/**\n * Whether the document is ready.\n * @param {!Document} doc\n * @return {boolean}\n */\nfunction isDocumentReady(doc) {\n  const readyState = getReadyState(doc);\n  return readyState != 'loading' && readyState != 'uninitialized';\n}\n\n/**\n * Calls the callback when document is ready.\n * @param {!Document} doc\n * @param {function(!Document)} callback\n */\nfunction onDocumentReady(doc, callback) {\n  onDocumentState(doc, isDocumentReady, callback);\n}\n\n/**\n * Calls the callback when document's state satisfies the stateFn.\n * @param {!Document} doc\n * @param {function(!Document):boolean} stateFn\n * @param {function(!Document)} callback\n */\nfunction onDocumentState(doc, stateFn, callback) {\n  let ready = stateFn(doc);\n  if (ready) {\n    callback(doc);\n  } else {\n    const readyListener = () => {\n      if (stateFn(doc)) {\n        if (!ready) {\n          ready = true;\n          callback(doc);\n        }\n        doc.removeEventListener('readystatechange', readyListener);\n      }\n    };\n    doc.addEventListener('readystatechange', readyListener);\n  }\n}\n\n/**\n * Returns a promise that is resolved when document is ready.\n * @param {!Document} doc\n * @return {!Promise<!Document>}\n */\nfunction whenDocumentReady(doc) {\n  return new Promise(resolve => {\n    onDocumentReady(doc, resolve);\n  });\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/** @implements {Doc} */\nclass GlobalDoc {\n\n  /**\n   * @param {!Window|!Document} winOrDoc\n   */\n  constructor(winOrDoc) {\n    const isWin = !!winOrDoc.document;\n    /** @private @const {!Window} */\n    this.win_ = isWin ?\n        /** @type {!Window} */ (winOrDoc) :\n        /** @type {!Window} */ (\n            (/** @type {!Document} */ (winOrDoc)).defaultView);\n    /** @private @const {!Document} */\n    this.doc_ = isWin ?\n        /** @type {!Window} */ (winOrDoc).document :\n        /** @type {!Document} */ (winOrDoc);\n  }\n\n  /** @override */\n  getWin() {\n    return this.win_;\n  }\n\n  /** @override */\n  getRootNode() {\n    return this.doc_;\n  }\n\n  /** @override */\n  getRootElement() {\n    return this.doc_.documentElement;\n  }\n\n  /** @override */\n  getHead() {\n    // `document.head` always has a chance to be parsed, at least partially.\n    return /** @type {!Element} */ (this.doc_.head);\n  }\n\n  /** @override */\n  getBody() {\n    return this.doc_.body;\n  }\n\n  /** @override */\n  isReady() {\n    return isDocumentReady(this.doc_);\n  }\n\n  /** @override */\n  whenReady() {\n    return whenDocumentReady(this.doc_);\n  }\n}\n\n\n/**\n * @param {!Document|!Window|!Doc} input\n * @return {!Doc}\n */\nfunction resolveDoc(input) {\n  // Is it a `Document`\n  if ((/** @type {!Document} */ (input)).nodeType === /* DOCUMENT */ 9) {\n    return new GlobalDoc(/** @type {!Document} */ (input));\n  }\n  // Is it a `Window`?\n  if ((/** @type {!Window} */ (input)).document) {\n    return new GlobalDoc(/** @type {!Window} */ (input));\n  }\n  return /** @type {!Doc} */ (input);\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @const {!Object<string, string|number>} */\nconst toastImportantStyles = {\n  'height': 0,\n};\n\n/** @const {!Object<string, string>} */\nconst iframeAttributes$1 = {\n  'frameborder': '0',\n  'scrolling': 'no',\n  'class': 'swg-toast',\n};\n\n/**\n * The class Notification toast.\n */\nclass Toast {\n\n  /**\n   * @param {!../runtime/deps.DepsDef} deps\n   * @param {string} src\n   * @param {!Object<string, ?>} args\n   */\n  constructor(deps, src, args) {\n\n    /** @private @const {!../model/doc.Doc} */\n    this.doc_ = deps.doc();\n\n    /** @private @const {!web-activities/activity-ports.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {string} */\n    this.src_ = src;\n\n    /** @private @const {!Object<string, ?>} */\n    this.args_ = args;\n\n    /** @private {?Promise} */\n    this.animating_ = null;\n\n    /** @private @const {!HTMLIFrameElement} */\n    this.iframe_ =\n        /** @type {!HTMLIFrameElement} */ (\n            createElement(\n                this.doc_.getWin().document,\n                'iframe',\n                iframeAttributes$1));\n\n    setImportantStyles(this.iframe_, toastImportantStyles);\n\n    /** @private @const {!Promise} */\n    this.ready_ = new Promise(resolve => {\n      this.iframe_.onload = resolve;\n    });\n  }\n\n  /**\n   * Returns the iframe element.\n   * @return {!HTMLIFrameElement}\n   */\n  getElement() {\n    return this.iframe_;\n  }\n\n  /**\n   * Opens the notification toast.\n   * @return {!Promise}\n   */\n  open() {\n    this.doc_.getBody().appendChild(this.iframe_);  // Fires onload.\n    return this.buildToast_();\n  }\n\n  /**\n   * Builds the content of the iframe. On load, animates the toast.\n   */\n  buildToast_() {\n    const toastDurationSeconds = 7;\n    return this.activityPorts_.openIframe(\n        this.iframe_, this.src_, this.args_).then(port => {\n          return port.whenReady();\n        }).then(() => {\n          resetStyles(this.iframe_, ['height']);\n\n          this.animate_(() => {\n            setImportantStyles(this.iframe_, {\n              'transform': 'translateY(100%)',\n              'opactiy': 1,\n              'visibility': 'visible',\n            });\n            return transition(this.iframe_, {\n              'transform': 'translateY(0)',\n              'opacity': 1,\n              'visibility': 'visible',\n            }, 400, 'ease-out');\n          });\n\n          // Close the Toast after the specified duration.\n          this.doc_.getWin().setTimeout(() => {\n            this.close();\n          }, (toastDurationSeconds + 1) * 1000);\n        });\n  }\n\n  /**\n   * @param {function():!Promise} callback\n   * @return {!Promise}\n   * @private\n   */\n  animate_(callback) {\n    const wait = this.animating_ || Promise.resolve();\n    return this.animating_ = wait.then(() => {\n      return callback();\n    }, () => {\n      // Ignore errors to make sure animations don't get stuck.\n    }).then(() => {\n      this.animating_ = null;\n    });\n  }\n\n  /**\n   * Closes the toast.\n   * @return {!Promise}\n   */\n  close() {\n    return this.animate_(() => {\n      // Remove the toast from the DOM after animation is complete.\n      this.doc_.getWin().setTimeout(() => {\n        this.doc_.getBody().removeChild(this.iframe_);\n        return Promise.resolve();\n      }, 500);\n\n      return transition(this.iframe_, {\n        'transform': 'translateY(100%)',\n        'opacity': 1,\n        'visibility': 'visible',\n      }, 400, 'ease-out');\n    });\n  }\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst SERVICE_ID = 'subscribe.google.com';\nconst TOAST_STORAGE_KEY = 'toast';\nconst ENTS_STORAGE_KEY = 'ents';\n\n\n/**\n */\nclass EntitlementsManager {\n\n  /**\n   * @param {!Window} win\n   * @param {!../model/page-config.PageConfig} config\n   * @param {!./fetcher.Fetcher} fetcher\n   * @param {!./deps.DepsDef} deps\n   */\n  constructor(win, config, fetcher, deps) {\n    /** @private @const {!Window} */\n    this.win_ = win;\n\n    /** @private @const {!../model/page-config.PageConfig} */\n    this.config_ = config;\n\n    /** @private @const {string} */\n    this.publicationId_ = this.config_.getPublicationId();\n\n    /** @private @const {!./fetcher.Fetcher} */\n    this.fetcher_ = fetcher;\n\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!JwtHelper} */\n    this.jwtHelper_ = new JwtHelper();\n\n    /** @private {?Promise<!Entitlements>} */\n    this.responsePromise_ = null;\n\n    /** @private {number} */\n    this.positiveRetries_ = 0;\n\n    /** @private {boolean} */\n    this.blockNextNotification_ = false;\n\n    /** @private @const {!./storage.Storage} */\n    this.storage_ = deps.storage();\n  }\n\n  /**\n   * @param {boolean=} opt_expectPositive\n   */\n  reset(opt_expectPositive) {\n    this.responsePromise_ = null;\n    this.positiveRetries_ = Math.max(\n        this.positiveRetries_, opt_expectPositive ? 3 : 0);\n    if (opt_expectPositive) {\n      this.storage_.remove(ENTS_STORAGE_KEY);\n    }\n  }\n\n  /**\n   * @return {!Promise<!Entitlements>}\n   */\n  getEntitlements() {\n    if (!this.responsePromise_) {\n      this.responsePromise_ = this.getEntitlementsFlow_();\n    }\n    return this.responsePromise_;\n  }\n\n  /**\n   * @param {string} raw\n   * @return {boolean}\n   */\n  pushNextEntitlements(raw) {\n    const entitlements = this.getValidJwtEntitlements_(\n        raw, /* requireNonExpired */ true);\n    if (entitlements && entitlements.enablesThis()) {\n      this.storage_.set(ENTS_STORAGE_KEY, raw);\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * @return {!Promise<!Entitlements>}\n   * @private\n   */\n  getEntitlementsFlow_() {\n    return this.fetchEntitlementsWithCaching_().then(entitlements => {\n      this.onEntitlementsFetched_(entitlements);\n      return entitlements;\n    });\n  }\n\n  /**\n   * @return {!Promise<!Entitlements>}\n   * @private\n   */\n  fetchEntitlementsWithCaching_() {\n    return this.storage_.get(ENTS_STORAGE_KEY).then(raw => {\n      // Try cache first.\n      if (raw) {\n        const cached = this.getValidJwtEntitlements_(\n            raw, /* requireNonExpired */ true);\n        if (cached && cached.enablesThis()) {\n          // Already have a positive response.\n          this.positiveRetries_ = 0;\n          return cached;\n        }\n      }\n      // If cache didn't match, perform fetch.\n      return this.fetchEntitlements_().then(ents => {\n        // If entitlements match the product, store them in cache.\n        if (ents && ents.enablesThis() && ents.raw) {\n          this.storage_.set(ENTS_STORAGE_KEY, ents.raw);\n        }\n        return ents;\n      });\n    });\n  }\n\n  /**\n   * @return {!Promise<!Entitlements>}\n   * @private\n   */\n  fetchEntitlements_() {\n    // TODO(dvoytenko): Replace retries with consistent fetch.\n    let positiveRetries = this.positiveRetries_;\n    this.positiveRetries_ = 0;\n    const attempt = () => {\n      positiveRetries--;\n      return this.fetch_().then(entitlements => {\n        if (entitlements.enablesThis() || positiveRetries <= 0) {\n          return entitlements;\n        }\n        return new Promise(resolve => {\n          this.win_.setTimeout(() => {\n            resolve(attempt());\n          }, 550);\n        });\n      });\n    };\n    return attempt();\n  }\n\n  /**\n   * @param {boolean} value\n   */\n  setToastShown(value) {\n    this.storage_.set(TOAST_STORAGE_KEY, value ? '1' : '0');\n  }\n\n  /**\n   */\n  blockNextNotification() {\n    this.blockNextNotification_ = true;\n  }\n\n  /**\n   */\n  unblockNextNotification() {\n    this.blockNextNotification_ = false;\n  }\n\n  /**\n   * The JSON must either contain a \"signedEntitlements\" with JWT, or\n   * \"entitlements\" field with plain JSON object.\n   * @param {!Object} json\n   * @return {!Entitlements}\n   */\n  parseEntitlements(json) {\n    const signedData = json['signedEntitlements'];\n    if (signedData) {\n      const entitlements = this.getValidJwtEntitlements_(\n          signedData, /* requireNonExpired */ false);\n      if (entitlements) {\n        return entitlements;\n      }\n    } else {\n      const plainEntitlements = json['entitlements'];\n      if (plainEntitlements) {\n        return this.createEntitlements_('', plainEntitlements);\n      }\n    }\n    // Empty response.\n    return this.createEntitlements_('', []);\n  }\n\n  /**\n   * @param {string} raw\n   * @param {boolean} requireNonExpired\n   * @return {?Entitlements}\n   * @private\n   */\n  getValidJwtEntitlements_(raw, requireNonExpired) {\n    try {\n      const jwt = this.jwtHelper_.decode(raw);\n      if (requireNonExpired) {\n        const now = Date.now();\n        const exp = jwt['exp'];\n        if (parseFloat(exp) * 1000 < now) {\n          return null;\n        }\n      }\n      const entitlementsClaim = jwt['entitlements'];\n      return entitlementsClaim &&\n          this.createEntitlements_(raw, entitlementsClaim) || null;\n    } catch (e) {\n      // Ignore the error.\n      this.win_.setTimeout(() => {throw e;});\n    }\n    return null;\n  }\n\n  /**\n   * @param {string} raw\n   * @param {!Object|!Array<!Object>} json\n   * @return {!Entitlements}\n   * @private\n   */\n  createEntitlements_(raw, json) {\n    return new Entitlements(\n        SERVICE_ID,\n        raw,\n        Entitlement.parseListFromJson(json),\n        this.config_.getProductId(),\n        this.ack_.bind(this));\n  }\n\n  /**\n   * @param {!Entitlements} entitlements\n   * @private\n   */\n  onEntitlementsFetched_(entitlements) {\n    // Skip any notifications and toast if other flows are ongoing.\n    // TODO(dvoytenko): what's the right action when pay flow was canceled?\n    const blockNotification = this.blockNextNotification_;\n    this.blockNextNotification_ = false;\n    if (blockNotification) {\n      return;\n    }\n\n    // Notify on the received entitlements.\n    this.deps_.callbacks().triggerEntitlementsResponse(\n        Promise.resolve(entitlements));\n\n    // Show a toast if needed.\n    this.maybeShowToast_(entitlements);\n  }\n\n  /**\n   * @param {!Entitlements} entitlements\n   * @return {!Promise}\n   * @private\n   */\n  maybeShowToast_(entitlements) {\n    const entitlement = entitlements.getEntitlementForThis();\n    if (!entitlement) {\n      return Promise.resolve();\n    }\n    // Check if storage bit is set. It's only set by the `Entitlements.ack`\n    // method.\n    return this.storage_.get(TOAST_STORAGE_KEY).then(value => {\n      if (value == '1') {\n        // Already shown;\n        return;\n      }\n      if (entitlement) {\n        this.showToast_(entitlement);\n      }\n    });\n  }\n\n  /**\n   * @param {!Entitlement} entitlement\n   * @private\n   */\n  showToast_(entitlement) {\n    const source = entitlement.source || 'google';\n    return new Toast(this.deps_, feUrl('/toastiframe'), feArgs({\n      'publicationId': this.publicationId_,\n      'source': source,\n    })).open();\n  }\n\n  /**\n   * @param {!Entitlements} entitlements\n   * @private\n   */\n  ack_(entitlements) {\n    if (entitlements.getEntitlementForThis()) {\n      this.setToastShown(true);\n    }\n  }\n\n  /**\n   * @return {!Promise<!Entitlements>}\n   * @private\n   */\n  fetch_() {\n    const url = serviceUrl(\n        '/publication/' +\n        encodeURIComponent(this.publicationId_) +\n        '/entitlements');\n    return this.fetcher_.fetchCredentialedJson(url)\n        .then(json => this.parseEntitlements(json));\n  }\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * @interface\n */\nclass Fetcher {\n\n  /**\n   * @param {string} unusedUrl\n   * @return {!Promise<!Object>}\n   */\n  fetchCredentialedJson(unusedUrl) {}\n}\n\n\n/**\n * @implements {Fetcher}\n */\nclass XhrFetcher {\n\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n    /** @const {!Xhr} */\n    this.xhr_ = new Xhr(win);\n  }\n\n  /** @override */\n  fetchCredentialedJson(url) {\n    const init = /** @type {!../utils/xhr.FetchInitDef} */ ({\n      method: 'GET',\n      headers: {'Accept': 'text/plain, application/json'},\n      credentials: 'include',\n    });\n    return this.xhr_.fetch(url, init).then(response => response.json());\n  }\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * @param {!web-activities/activity-ports.ActivityPort} port\n * @param {string} requireOrigin\n * @param {boolean} requireOriginVerified\n * @param {boolean} requireSecureChannel\n * @return {!Promise<!Object>}\n */\nfunction acceptPortResultData(\n    port,\n    requireOrigin,\n    requireOriginVerified,\n    requireSecureChannel) {\n  return port.acceptResult().then(result => {\n    if (result.origin != requireOrigin ||\n        requireOriginVerified && !result.originVerified ||\n        requireSecureChannel && !result.secureChannel) {\n      throw new Error('channel mismatch');\n    }\n    return result.data;\n  });\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst LINK_REQUEST_ID = 'swg-link';\n\n\n/**\n * The flow to initiate linkback flow.\n */\nclass LinkbackFlow {\n\n  /**\n   * @param {!./deps.DepsDef} deps\n   */\n  constructor(deps) {\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!web-activities/activity-ports.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../model/page-config.PageConfig} */\n    this.pageConfig_ = deps.pageConfig();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n  }\n\n  /**\n   * Starts the Link account flow.\n   * @return {!Promise}\n   */\n  start() {\n    this.deps_.callbacks().triggerFlowStarted(SubscriptionFlows.LINK_ACCOUNT);\n    const forceRedirect =\n        this.deps_.config().windowOpenMode == WindowOpenMode.REDIRECT;\n    const opener = this.activityPorts_.open(\n        LINK_REQUEST_ID,\n        feUrl('/linkbackstart'),\n        forceRedirect ? '_top' : '_blank',\n        feArgs({\n          'publicationId': this.pageConfig_.getPublicationId(),\n        }), {});\n    this.dialogManager_.popupOpened(opener && opener.targetWin);\n    return Promise.resolve();\n  }\n}\n\n\n/**\n * The class for Link accounts flow.\n */\nclass LinkCompleteFlow {\n\n  /**\n   * @param {!./deps.DepsDef} deps\n   */\n  static configurePending(deps) {\n    /**\n     * Handler function.\n     * @param {!web-activities/activity-ports.ActivityPort} port\n     */\n    function handler(port) {\n      deps.entitlementsManager().blockNextNotification();\n      deps.callbacks().triggerLinkProgress();\n      deps.dialogManager().popupClosed();\n      const promise = acceptPortResultData(\n          port,\n          feOrigin(),\n          /* requireOriginVerified */ false,\n          /* requireSecureChannel */ false);\n      return promise.then(response => {\n        const flow = new LinkCompleteFlow(deps, response);\n        flow.start();\n      }, reason => {\n        if (isCancelError(reason)) {\n          deps.callbacks().triggerFlowCanceled(SubscriptionFlows.LINK_ACCOUNT);\n        }\n      });\n    }    deps.activities().onResult(LINK_REQUEST_ID, handler);\n  }\n\n  /**\n   * @param {!./deps.DepsDef} deps\n   * @param {?Object} response\n   */\n  constructor(deps, response) {\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!web-activities/activity-ports.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private @const {!./entitlements-manager.EntitlementsManager} */\n    this.entitlementsManager_ = deps.entitlementsManager();\n\n    /** @private @const {!./callbacks.Callbacks} */\n    this.callbacks_ = deps.callbacks();\n\n    const index = response && response['index'] || '0';\n    /** @private @const {!ActivityIframeView} */\n    this.activityIframeView_ =\n        new ActivityIframeView(\n            this.win_,\n            this.activityPorts_,\n            feUrl('/linkconfirmiframe', '/u/' + index),\n            feArgs({\n              'productId': deps.pageConfig().getProductId(),\n              'publicationId': deps.pageConfig().getPublicationId(),\n            }),\n            /* shouldFadeBody */ true);\n\n    /** @private {?function()} */\n    this.completeResolver_ = null;\n\n    /** @private @const {!Promise} */\n    this.completePromise_ = new Promise(resolve => {\n      this.completeResolver_ = resolve;\n    });\n  }\n\n  /**\n   * Starts the Link account flow.\n   * @return {!Promise}\n   */\n  start() {\n    const promise = this.activityIframeView_.port().then(port => {\n      return acceptPortResultData(\n          port,\n          feOrigin(),\n          /* requireOriginVerified */ true,\n          /* requireSecureChannel */ true);\n    });\n    promise.then(response => {\n      this.complete_(response);\n    }).catch(reason => {\n      // Rethrow async.\n      setTimeout(() => {\n        throw reason;\n      });\n    }).then(() => {\n      // The flow is complete.\n      this.dialogManager_.completeView(this.activityIframeView_);\n    });\n    return this.dialogManager_.openView(this.activityIframeView_);\n  }\n\n  /**\n   * @param {?Object} response\n   * @private\n   */\n  complete_(response) {\n    this.callbacks_.triggerLinkComplete();\n    this.callbacks_.resetLinkProgress();\n    this.entitlementsManager_.setToastShown(true);\n    this.entitlementsManager_.unblockNextNotification();\n    this.entitlementsManager_.reset(response && response['success'] || false);\n    if (response && response['entitlements']) {\n      this.entitlementsManager_.pushNextEntitlements(response['entitlements']);\n    }\n    this.completeResolver_();\n  }\n\n  /** @return {!Promise} */\n  whenComplete() {\n    return this.completePromise_;\n  }\n}\n\n/**\n * The flow to save subscription information.\n */\nclass LinkSaveFlow {\n\n  /**\n   * @param {!./deps.DepsDef} deps\n   * @param {!../api/subscriptions.SaveSubscriptionRequestCallback} callback\n   */\n  constructor(deps, callback) {\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!web-activities/activity-ports.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private {!../api/subscriptions.SaveSubscriptionRequestCallback} */\n    this.callback_ = callback;\n\n    /** @private {?Promise<!../api/subscriptions.SaveSubscriptionRequest>} */\n    this.requestPromise_ = null;\n\n    /** @private {?ActivityIframeView} */\n    this.activityIframeView_ = null;\n  }\n\n  /**\n   * @return {?Promise<!../api/subscriptions.SaveSubscriptionRequest>}\n   * @package Visible for testing.\n   */\n  getRequestPromise() {\n    return this.requestPromise_;\n  }\n  /**\n   * Starts the save subscription\n   * @return {!Promise}\n   */\n  start() {\n    const iframeArgs = {\n      'publicationId': this.deps_.pageConfig().getPublicationId(),\n      'isClosable': true,\n    };\n\n    this.activityIframeView_ = new ActivityIframeView(\n        this.win_,\n        this.activityPorts_,\n        feUrl('/linksaveiframe'),\n        feArgs(iframeArgs),\n        /* shouldFadeBody */ false\n    );\n    this.activityIframeView_.onMessage(data => {\n      if (data['getLinkingInfo']) {\n        this.requestPromise_ = new Promise(resolve => {\n          resolve(this.callback_());\n        }).then(request => {\n          let saveRequest;\n          if (request && request.token) {\n            if (request.authCode) {\n              throw new Error('Both authCode and token are available');\n            } else {\n              saveRequest = {'token': request.token};\n            }\n          } else if (request && request.authCode) {\n            saveRequest = {'authCode': request.authCode};\n          } else {\n            throw new Error('Neither token or authCode is available');\n          }\n          this.activityIframeView_.message(saveRequest);\n        }).catch(reason => {\n          // The flow is complete.\n          this.dialogManager_.completeView(this.activityIframeView_);\n          throw reason;\n        });\n      }\n    });\n    /** {!Promise<boolean>} */\n    return this.dialogManager_.openView(this.activityIframeView_,\n        /* hidden */ true).then(() => {\n          return this.activityIframeView_.port().then(port => {\n            return acceptPortResultData(\n                port,\n                feOrigin(),\n                /* requireOriginVerified */ true,\n                /* requireSecureChannel */ true);\n          }).then(result => {\n            return result['linked'];\n          }).catch(() => {\n            return false;\n          }).then(result => {\n            // The flow is complete.\n            this.dialogManager_.completeView(this.activityIframeView_);\n            return result;\n          });\n        });\n  }\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nclass LoginPromptApi {\n  /**\n   * @param {!./deps.DepsDef} deps\n   */\n  constructor(deps) {\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!web-activities/activity-ports.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private {?Promise} */\n    this.openViewPromise_ = null;\n\n    /** @private @const {!ActivityIframeView} */\n    this.activityIframeView_ = new ActivityIframeView(\n        this.win_,\n        this.activityPorts_,\n        feUrl('/loginiframe'),\n        feArgs({\n          publicationId: deps.pageConfig().getPublicationId(),\n          productId: deps.pageConfig().getProductId(),\n          // First ask the user if they want us to log them in.\n          userConsent: true,\n          // TODO(chenshay): Pass entitlements value here.\n        }),\n        /* shouldFadeBody */ true\n    );\n  }\n\n  /**\n   * Prompts the user to login.\n   * @return {!Promise}\n   */\n  start() {\n    this.deps_.callbacks().triggerFlowStarted(\n        SubscriptionFlows.SHOW_LOGIN_PROMPT);\n\n    this.openViewPromise_ = this.dialogManager_.openView(\n        this.activityIframeView_);\n\n    return this.activityIframeView_.acceptResult().then(() => {\n      // The consent part is complete.\n      this.dialogManager_.completeView(this.activityIframeView_);\n    }, reason => {\n      if (isCancelError(reason)) {\n        this.deps_.callbacks().triggerFlowCanceled(\n            SubscriptionFlows.SHOW_LOGIN_PROMPT);\n      } else {\n        this.dialogManager_.completeView(this.activityIframeView_);\n      }\n      throw reason;\n    });\n  }\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nclass LoginNotificationApi {\n  /**\n   * @param {!./deps.DepsDef} deps\n   */\n  constructor(deps) {\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!web-activities/activity-ports.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private {?Promise} */\n    this.openViewPromise_ = null;\n\n    /** @private @const {!ActivityIframeView} */\n    this.activityIframeView_ = new ActivityIframeView(\n        this.win_,\n        this.activityPorts_,\n        feUrl('/loginiframe'),\n        feArgs({\n          publicationId: deps.pageConfig().getPublicationId(),\n          productId: deps.pageConfig().getProductId(),\n          // No need to ask the user. Just tell them you're logging them in.\n          userConsent: false,\n          // TODO(chenshay): Pass entitlements value here.\n        }),\n        /* shouldFadeBody */ true\n    );\n  }\n\n  /**\n   * Continues the Login flow (after waiting).\n   * @return {!Promise}\n   */\n  start() {\n    this.deps_.callbacks().triggerFlowStarted(\n        SubscriptionFlows.SHOW_LOGIN_NOTIFICATION);\n\n    this.openViewPromise_ = this.dialogManager_.openView(\n        this.activityIframeView_);\n\n    return this.activityIframeView_.acceptResult().then(() => {\n      // The consent part is complete.\n      this.dialogManager_.completeView(this.activityIframeView_);\n    }, reason => {\n      this.dialogManager_.completeView(this.activityIframeView_);\n      throw reason;\n    });\n  }\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nclass WaitForSubscriptionLookupApi {\n  /**\n   * @param {!./deps.DepsDef} deps\n   * @param {?Promise} accountPromise\n   */\n  constructor(deps, accountPromise) {\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!web-activities/activity-ports.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private {?Promise} */\n    this.openViewPromise_ = null;\n\n    /** @private {?Promise} */\n    this.accountPromise_ = accountPromise || null;\n\n    /** @private @const {!ActivityIframeView} */\n    this.activityIframeView_ = new ActivityIframeView(\n        this.win_,\n        this.activityPorts_,\n        feUrl('/waitforsubscriptionlookupiframe'),\n        feArgs({\n          publicationId: deps.pageConfig().getPublicationId(),\n          productId: deps.pageConfig().getProductId(),\n        }),\n        /* shouldFadeBody */ true\n    );\n  }\n\n  /**\n   * Starts the Login Flow.\n   * @return {!Promise}\n   */\n  start() {\n    this.openViewPromise_ = this.dialogManager_.openView(\n        this.activityIframeView_);\n\n    return this.accountPromise_.then(account => {\n      // Account was found.\n      this.dialogManager_.completeView(this.activityIframeView_);\n      return account;\n    }, reason => {\n      this.dialogManager_.completeView(this.activityIframeView_);\n      throw reason;\n    });\n  }\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nclass OffersApi {\n\n  /**\n   * @param {!../model/page-config.PageConfig} config\n   * @param {!./fetcher.Fetcher} fetcher\n   */\n  constructor(config, fetcher) {\n    /** @private @const {!../model/page-config.PageConfig} */\n    this.config_ = config;\n\n    /** @private @const {!./fetcher.Fetcher} */\n    this.fetcher_ = fetcher;\n  }\n\n  /**\n   * @param {string=} opt_productId\n   * @return {!Promise<!Array<!../api/offer.Offer>>}\n   */\n  getOffers(opt_productId) {\n    const productId = opt_productId || this.config_.getProductId();\n    if (!productId) {\n      throw new Error('getOffers requires productId in config or arguments');\n    }\n    return this.fetch_(productId);\n  }\n\n  /**\n   * @param {string} productId\n   * @return {!Promise<!Array<!../api/offer.Offer>>}\n   * @private\n   */\n  fetch_(productId) {\n    const url = serviceUrl(\n        '/publication/' +\n        encodeURIComponent(this.config_.getPublicationId()) +\n        '/offers' +\n        '?label=' + encodeURIComponent(productId));\n    // TODO(dvoytenko): switch to a non-credentialed request after launch.\n    return this.fetcher_.fetchCredentialedJson(url).then(json => {\n      return json['offers'] || [];\n    });\n  }\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Offers view is closable when request was originated from 'AbbrvOfferFlow'\n * or from 'SubscribeOptionFlow'.\n */\nconst OFFERS_VIEW_CLOSABLE = true;\n\n/**\n * The class for Offers flow.\n */\nclass OffersFlow {\n\n  /**\n   * @param {!./deps.DepsDef} deps\n   * @param {!../api/subscriptions.OffersRequest|undefined} options\n   */\n  constructor(deps, options) {\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!web-activities/activity-ports.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    let isClosable = options && options.isClosable;\n    if (isClosable == undefined) {\n      isClosable = false;  // Default is to hide Close button.\n    }\n\n    /** @private @const {!ActivityIframeView} */\n    this.activityIframeView_ = new ActivityIframeView(\n        this.win_,\n        this.activityPorts_,\n        feUrl('/offersiframe'),\n        feArgs({\n          'productId': deps.pageConfig().getProductId(),\n          'publicationId': deps.pageConfig().getPublicationId(),\n          'showNative': deps.callbacks().hasSubscribeRequestCallback(),\n          'list': options && options.list || 'default',\n          'skus': options && options.skus || null,\n          'isClosable': isClosable,\n        }),\n        /* shouldFadeBody */ true);\n  }\n\n  /**\n   * Starts the offers flow or alreadySubscribed flow.\n   * @return {!Promise}\n   */\n  start() {\n    // Start/cancel events.\n    this.deps_.callbacks().triggerFlowStarted(\n        SubscriptionFlows.SHOW_OFFERS);\n    this.activityIframeView_.onCancel(() => {\n      this.deps_.callbacks().triggerFlowCanceled(\n          SubscriptionFlows.SHOW_OFFERS);\n    });\n\n    // If result is due to OfferSelection, redirect to payments.\n    this.activityIframeView_.onMessage(result => {\n      if (result['alreadySubscribed']) {\n        this.deps_.callbacks().triggerLoginRequest({\n          linkRequested: !!result['linkRequested'],\n        });\n        return;\n      }\n      if (result['sku']) {\n        new PayStartFlow(\n            this.deps_,\n            /** @type {string} */ (result['sku']))\n            .start();\n        return;\n      }\n      if (result['native']) {\n        this.deps_.callbacks().triggerSubscribeRequest();\n        return;\n      }\n    });\n\n    return this.dialogManager_.openView(this.activityIframeView_);\n  }\n}\n\n\n/**\n * The class for subscribe option flow.\n */\nclass SubscribeOptionFlow {\n\n  /**\n   * @param {!./deps.DepsDef} deps\n   * @param {!../api/subscriptions.OffersRequest|undefined} options\n   */\n  constructor(deps, options) {\n\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!../api/subscriptions.OffersRequest|undefined} */\n    this.options_ = options;\n\n    /** @private @const {!web-activities/activity-ports.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private @const {!ActivityIframeView} */\n    this.activityIframeView_ = new ActivityIframeView(\n        deps.win(),\n        this.activityPorts_,\n        feUrl('/optionsiframe'),\n        feArgs({\n          'publicationId': deps.pageConfig().getPublicationId(),\n          'productId': deps.pageConfig().getProductId(),\n          'list': options && options.list || 'default',\n          'skus': options && options.skus || null,\n          'isClosable': true,\n        }),\n        /* shouldFadeBody */ false);\n  }\n\n  /**\n   * Starts the offers flow or alreadySubscribed flow.\n   * @return {!Promise}\n   */\n  start() {\n    // Start/cancel events.\n    this.deps_.callbacks().triggerFlowStarted(\n        SubscriptionFlows.SHOW_SUBSCRIBE_OPTION);\n    this.activityIframeView_.onCancel(() => {\n      this.deps_.callbacks().triggerFlowCanceled(\n          SubscriptionFlows.SHOW_SUBSCRIBE_OPTION);\n    });\n\n    this.activityIframeView_.onMessage(data => {\n      this.maybeOpenOffersFlow_(data);\n    });\n    this.activityIframeView_.acceptResult().then(result => {\n      this.maybeOpenOffersFlow_(result.data);\n    }, reason => {\n      this.dialogManager_.completeView(this.activityIframeView_);\n      throw reason;\n    });\n    return this.dialogManager_.openView(this.activityIframeView_);\n  }\n\n  /**\n   * @param {*} data\n   * @private\n   */\n  maybeOpenOffersFlow_(data) {\n    if (data && data['subscribe']) {\n      const options = this.options_ || {};\n      if (options.isClosable == undefined) {\n        options.isClosable = OFFERS_VIEW_CLOSABLE;\n      }\n      new OffersFlow(this.deps_, options).start();\n    }\n  }\n}\n\n\n/**\n * The class for Abbreviated Offer flow.\n *\n */\nclass AbbrvOfferFlow {\n\n  /**\n   * @param {!./deps.DepsDef} deps\n   * @param {!../api/subscriptions.OffersRequest=} options\n   */\n  constructor(deps, options = {}) {\n\n    /** @private @const {!./deps.DepsDef} */\n    this.deps_ = deps;\n\n    /** @private @const {!../api/subscriptions.OffersRequest|undefined} */\n    this.options_ = options;\n\n    /** @private @const {!Window} */\n    this.win_ = deps.win();\n\n    /** @private @const {!web-activities/activity-ports.ActivityPorts} */\n    this.activityPorts_ = deps.activities();\n\n    /** @private @const {!../components/dialog-manager.DialogManager} */\n    this.dialogManager_ = deps.dialogManager();\n\n    /** @private @const {!ActivityIframeView} */\n    this.activityIframeView_ = new ActivityIframeView(\n        this.win_,\n        this.activityPorts_,\n        feUrl('/abbrvofferiframe'),\n        feArgs({\n          'publicationId': deps.pageConfig().getPublicationId(),\n          'productId': deps.pageConfig().getProductId(),\n          'showNative': deps.callbacks().hasSubscribeRequestCallback(),\n          'list': options && options.list || 'default',\n          'skus': options && options.skus || null,\n          'isClosable': true,\n        }),\n        /* shouldFadeBody */ false);\n  }\n\n  /**\n   * Starts the offers flow\n   * @return {!Promise}\n   */\n  start() {\n    // Start/cancel events.\n    this.deps_.callbacks().triggerFlowStarted(\n        SubscriptionFlows.SHOW_ABBRV_OFFER);\n    this.activityIframeView_.onCancel(() => {\n      this.deps_.callbacks().triggerFlowCanceled(\n          SubscriptionFlows.SHOW_ABBRV_OFFER);\n    });\n\n    // If the user is already subscribed, trigger login flow\n    this.activityIframeView_.onMessage(data => {\n      if (data['alreadySubscribed']) {\n        this.deps_.callbacks().triggerLoginRequest({\n          linkRequested: !!data['linkRequested'],\n        });\n        return;\n      }\n    });\n    // If result is due to requesting offers, redirect to offers flow\n    this.activityIframeView_.acceptResult().then(result => {\n      if (result.data['viewOffers']) {\n        const options = this.options_ || {};\n        if (options.isClosable == undefined) {\n          options.isClosable = OFFERS_VIEW_CLOSABLE;\n        }\n        new OffersFlow(this.deps_, options).start();\n        return;\n      }\n      if (result.data['native']) {\n        this.deps_.callbacks().triggerSubscribeRequest();\n        // The flow is complete.\n        this.dialogManager_.completeView(this.activityIframeView_);\n        return;\n      }\n    });\n\n    return this.dialogManager_.openView(this.activityIframeView_);\n  }\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nclass Preconnect {\n\n  /**\n   * @param {!Document} doc\n   */\n  constructor(doc) {\n    /** @private @const {!Document} */\n    this.doc_ = doc;\n  }\n\n  /**\n   * @param {string} url\n   */\n  preconnect(url) {\n    this.pre_(url, 'preconnect');\n  }\n\n  /**\n   * @param {string} url\n   */\n  dnsPrefetch(url) {\n    this.pre_(url, 'dns-prefetch');\n  }\n\n  /**\n   * @param {string} url\n   */\n  prefetch(url) {\n    this.pre_(url, 'preconnect prefetch');\n  }\n\n  /**\n   * @param {string} url\n   * @param {string} as\n   */\n  preload(url, as) {\n    this.pre_(url, 'preconnect preload', as);\n  }\n\n  /**\n   * @param {string} url\n   * @param {string} rel\n   * @param {?string=} opt_as\n   * @private\n   */\n  pre_(url, rel, opt_as) {\n    // <link rel=\"prefetch\" href=\"...\" as=\"\">\n    const linkEl = createElement(this.doc_, 'link', {\n      'rel': rel,\n      'href': url,\n    });\n    if (opt_as) {\n      linkEl.setAttribute('as', opt_as);\n    }\n    this.doc_.head.appendChild(linkEl);\n  }\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst PREFIX = 'subscribe.google.com';\n\n\nclass Storage {\n\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n    /** @private @const {!Window} */\n    this.win_ = win;\n\n    /** @private @const {!Object<string, !Promise<?string>>} */\n    this.values_ = {};\n  }\n\n  /**\n   * @param {string} key\n   * @return {!Promise<?string>}\n   */\n  get(key) {\n    if (!this.values_[key]) {\n      this.values_[key] = new Promise(resolve => {\n        if (this.win_.sessionStorage) {\n          try {\n            resolve(this.win_.sessionStorage.getItem(storageKey(key)));\n          } catch (e) {\n            // Ignore error.\n            resolve(null);\n          }\n        } else {\n          resolve(null);\n        }\n      });\n    }\n    return this.values_[key];\n  }\n\n  /**\n   * @param {string} key\n   * @param {string} value\n   * @return {!Promise}\n   */\n  set(key, value) {\n    this.values_[key] = Promise.resolve(value);\n    return new Promise(resolve => {\n      if (this.win_.sessionStorage) {\n        try {\n          this.win_.sessionStorage.setItem(storageKey(key), value);\n        } catch (e) {\n          // Ignore error.\n        }\n      }\n      resolve();\n    });\n  }\n\n  /**\n   * @param {string} key\n   * @return {!Promise}\n   */\n  remove(key) {\n    delete this.values_[key];\n    return new Promise(resolve => {\n      if (this.win_.sessionStorage) {\n        try {\n          this.win_.sessionStorage.removeItem(storageKey(key));\n        } catch (e) {\n          // Ignore error.\n        }\n      }\n      resolve();\n    });\n  }\n}\n\n\n/**\n * @param {string} key\n * @return {string}\n */\nfunction storageKey(key) {\n  return PREFIX + ':' + key;\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * @implements {DepsDef}\n * @implements {Subscriptions}\n */\nclass ConfiguredRuntime {\n\n  /**\n   * @param {!Window|!Document|!Doc} winOrDoc\n   * @param {!../model/page-config.PageConfig} pageConfig\n   * @param {{\n   *     fetcher: (!Fetcher|undefined),\n   *   }=} opt_integr\n   */\n  constructor(winOrDoc, pageConfig, opt_integr) {\n    /** @private @const {!Doc} */\n    this.doc_ = resolveDoc(winOrDoc);\n\n    /** @private @const {!Window} */\n    this.win_ = this.doc_.getWin();\n\n    /** @private @const {!../api/subscriptions.Config} */\n    this.config_ = defaultConfig();\n\n    /** @private @const {!../model/page-config.PageConfig} */\n    this.pageConfig_ = pageConfig;\n\n    /** @private @const {!Promise} */\n    this.documentParsed_ = this.doc_.whenReady();\n\n    /** @private @const {!Fetcher} */\n    this.fetcher_ = opt_integr && opt_integr.fetcher ||\n        new XhrFetcher(this.win_);\n\n    /** @private @const {!Storage} */\n    this.storage_ = new Storage(this.win_);\n\n    /** @private @const {!DialogManager} */\n    this.dialogManager_ = new DialogManager(this.doc_);\n\n    /** @private @const {!web-activities/activity-ports.ActivityPorts} */\n    this.activityPorts_ = new activityPorts_1(this.win_);\n\n    /** @private @const {!Callbacks} */\n    this.callbacks_ = new Callbacks();\n\n    /** @private @const {!EntitlementsManager} */\n    this.entitlementsManager_ = new EntitlementsManager(\n        this.win_, this.pageConfig_, this.fetcher_, this);\n\n    /** @private @const {!OffersApi} */\n    this.offersApi_ = new OffersApi(this.pageConfig_, this.fetcher_);\n\n    /** @private @const {!ButtonApi} */\n    this.buttonApi_ = new ButtonApi(this.doc_);\n\n    const preconnect = new Preconnect(this.win_.document);\n\n    LinkCompleteFlow.configurePending(this);\n    PayCompleteFlow.configurePending(this);\n    PayStartFlow.preconnect(preconnect);\n\n    injectStyleSheet(this.win_.document, CSS);\n  }\n\n  /** @override */\n  doc() {\n    return this.doc_;\n  }\n\n  /** @override */\n  win() {\n    return this.win_;\n  }\n\n  /** @override */\n  pageConfig() {\n    return this.pageConfig_;\n  }\n\n  /** @override */\n  activities() {\n    return this.activityPorts_;\n  }\n\n  /** @override */\n  dialogManager() {\n    return this.dialogManager_;\n  }\n\n  /** @override */\n  entitlementsManager() {\n    return this.entitlementsManager_;\n  }\n\n  /** @override */\n  callbacks() {\n    return this.callbacks_;\n  }\n\n  /** @override */\n  storage() {\n    return this.storage_;\n  }\n\n  /** @override */\n  init() {\n    // Implemented by the `Runtime` class.\n  }\n\n  /** @override */\n  configure(config) {\n    // Validate first.\n    let error = null;\n    for (const k in config) {\n      const v = config[k];\n      if (k == 'windowOpenMode') {\n        if (v != WindowOpenMode.AUTO &&\n            v != WindowOpenMode.REDIRECT) {\n          error = 'Unknown windowOpenMode: ' + v;\n        }\n      } else {\n        error = 'Unknown config property: ' + k;\n      }\n    }\n    if (error) {\n      throw new Error(error);\n    }\n    // Assign.\n    Object.assign(this.config_, config);\n  }\n\n  /** @override */\n  config() {\n    return this.config_;\n  }\n\n  /** @override */\n  reset() {\n    this.entitlementsManager_.reset();\n    this.dialogManager_.completeAll();\n  }\n\n  /** @override */\n  start() {\n    // No need to run entitlements without a product or for an unlocked page.\n    if (!this.pageConfig_.getProductId() || !this.pageConfig_.isLocked()) {\n      return Promise.resolve();\n    }\n    this.getEntitlements();\n  }\n\n  /** @override */\n  getEntitlements() {\n    return this.entitlementsManager_.getEntitlements()\n        .then(entitlements => entitlements.clone());\n  }\n\n  /** @override */\n  setOnEntitlementsResponse(callback) {\n    this.callbacks_.setOnEntitlementsResponse(callback);\n  }\n\n  /** @override */\n  getOffers(opt_options) {\n    return this.offersApi_.getOffers(opt_options && opt_options.productId);\n  }\n\n  /** @override */\n  showOffers(opt_options) {\n    return this.documentParsed_.then(() => {\n      const flow = new OffersFlow(this, opt_options);\n      return flow.start();\n    });\n  }\n\n  /** @override */\n  showSubscribeOption(opt_options) {\n    return this.documentParsed_.then(() => {\n      const flow = new SubscribeOptionFlow(this, opt_options);\n      return flow.start();\n    });\n  }\n\n  /** @override */\n  showAbbrvOffer(opt_options) {\n    return this.documentParsed_.then(() => {\n      const flow = new AbbrvOfferFlow(this, opt_options);\n      return flow.start();\n    });\n  }\n\n  /** @override */\n  showSubscriptionLookupProgress(accountPromise) {\n    return this.documentParsed_.then(() => {\n      const wait = new WaitForSubscriptionLookupApi(this, accountPromise);\n      return wait.start();\n    });\n  }\n\n  /** @override */\n  setOnLoginRequest(callback) {\n    this.callbacks_.setOnLoginRequest(callback);\n  }\n\n  /** @override */\n  setOnLinkComplete(callback) {\n    this.callbacks_.setOnLinkComplete(callback);\n  }\n\n  /** @override */\n  linkAccount() {\n    return this.documentParsed_.then(() => {\n      return new LinkbackFlow(this).start();\n    });\n  }\n\n  /** @override */\n  saveSubscription(saveSubscriptionRequestCallback) {\n    return this.documentParsed_.then(() => {\n      return new LinkSaveFlow(this, saveSubscriptionRequestCallback).start();\n    });\n  }\n\n  /** @override */\n  showLoginPrompt() {\n    return this.documentParsed_.then(() => {\n      return new LoginPromptApi(this).start();\n    });\n  }\n\n  /** @override */\n  showLoginNotification() {\n    return this.documentParsed_.then(() => {\n      return new LoginNotificationApi(this).start();\n    });\n  }\n\n  /** @override */\n  setOnNativeSubscribeRequest(callback) {\n    this.callbacks_.setOnSubscribeRequest(callback);\n  }\n\n  /** @override */\n  setOnSubscribeResponse(callback) {\n    this.callbacks_.setOnSubscribeResponse(callback);\n  }\n\n  /** @override */\n  subscribe(sku) {\n    return this.documentParsed_.then(() => {\n      return new PayStartFlow(this, sku).start();\n    });\n  }\n\n  /** @override */\n  completeDeferredAccountCreation(opt_options) {\n    return this.documentParsed_.then(() => {\n      return new DeferredAccountFlow(this, opt_options || null).start();\n    });\n  }\n\n  /** @override */\n  setOnFlowStarted(callback) {\n    this.callbacks_.setOnFlowStarted(callback);\n  }\n\n  /** @override */\n  setOnFlowCanceled(callback) {\n    this.callbacks_.setOnFlowCanceled(callback);\n  }\n\n  /** @override */\n  createButton(optionsOrCallback, opt_callback) {\n    // This is a minor duplication to allow this code to be sync.\n    return this.buttonApi_.create(optionsOrCallback, opt_callback);\n  }\n\n  /** @override */\n  attachButton(button, optionsOrCallback, opt_callback) {\n    // This is a minor duplication to allow this code to be sync.\n    this.buttonApi_.attach(button, optionsOrCallback, opt_callback);\n  }\n}\n\n/**\n * Copyright 2018 The Subscribe with Google Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nexport {\n  ConfiguredRuntime,\n  Entitlements,\n  Entitlement,\n  Fetcher,\n  SubscribeResponse,\n};\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJidWlsZC9hbXAtc3Vic2NyaXB0aW9ucy1nb29nbGUtMC4xLmNzcy5qcyIsImV4dGVuc2lvbnMvYW1wLXN1YnNjcmlwdGlvbnMtZ29vZ2xlLzAuMS9hbXAtc3Vic2NyaXB0aW9ucy1nb29nbGUuanMiLCJleHRlbnNpb25zL2FtcC1zdWJzY3JpcHRpb25zLzAuMS9kb2MtaW1wbC5qcyIsImV4dGVuc2lvbnMvYW1wLXN1YnNjcmlwdGlvbnMvMC4xL2VudGl0bGVtZW50LmpzIiwibm9kZV9tb2R1bGVzL2RvY3VtZW50LXJlZ2lzdGVyLWVsZW1lbnQvYnVpbGQvZG9jdW1lbnQtcmVnaXN0ZXItZWxlbWVudC5wYXRjaGVkLmpzIiwibm9kZV9tb2R1bGVzL3Byb21pc2UtcGpzL3Byb21pc2UuanMiLCJzcmMvY29uZmlnLmpzIiwic3JjL2Nvb2tpZXMuanMiLCJzcmMvZG9tLmpzIiwic3JjL2VsZW1lbnQtc2VydmljZS5qcyIsInNyYy9leHBlcmltZW50cy5qcyIsInNyYy9sb2cuanMiLCJzcmMvbW9kZS1vYmplY3QuanMiLCJzcmMvbW9kZS5qcyIsInNyYy9wb2x5ZmlsbHMuanMiLCJzcmMvcG9seWZpbGxzL2FycmF5LWluY2x1ZGVzLmpzIiwic3JjL3BvbHlmaWxscy9jdXN0b20tZWxlbWVudHMuanMiLCJzcmMvcG9seWZpbGxzL2RvY3VtZW50LWNvbnRhaW5zLmpzIiwic3JjL3BvbHlmaWxscy9kb210b2tlbmxpc3QtdG9nZ2xlLmpzIiwic3JjL3BvbHlmaWxscy9tYXRoLXNpZ24uanMiLCJzcmMvcG9seWZpbGxzL29iamVjdC1hc3NpZ24uanMiLCJzcmMvcG9seWZpbGxzL3Byb21pc2UuanMiLCJzcmMvcmVuZGVyLWRlbGF5aW5nLXNlcnZpY2VzLmpzIiwic3JjL3NlcnZpY2UuanMiLCJzcmMvc2VydmljZXMuanMiLCJzcmMvc3RyaW5nLmpzIiwic3JjL3N0eWxlLWluc3RhbGxlci5qcyIsInNyYy9zdHlsZS5qcyIsInNyYy90eXBlcy5qcyIsInNyYy91cmwtcGFyc2UtcXVlcnktc3RyaW5nLmpzIiwic3JjL3VybC10cnktZGVjb2RlLXVyaS1jb21wb25lbnQuanMiLCJzcmMvdXJsLmpzIiwic3JjL3V0aWxzL2xydS1jYWNoZS5qcyIsInNyYy91dGlscy9vYmplY3QuanMiLCJzcmMvdXRpbHMvcHJvbWlzZS5qcyIsInRoaXJkX3BhcnR5L2Nzcy1lc2NhcGUvY3NzLWVzY2FwZS5qcyIsInRoaXJkX3BhcnR5L3N1YnNjcmlwdGlvbnMtcHJvamVjdC9jb25maWcuanMiLCJ0aGlyZF9wYXJ0eS9zdWJzY3JpcHRpb25zLXByb2plY3Qvc3dnLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0FDQU8sSUFBTSxvQkFBTSwrL29CQUFaOzs7Ozs7OztxakJDQVA7Ozs7Ozs7Ozs7Ozs7Ozs7UUE0U2dCLHlCLEdBQUEseUI7UUFRQSw0QixHQUFBLDRCO1FBUUEsbUMsR0FBQSxtQzs7QUE1U2hCOztBQUNBOztBQUtBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUEsSUFBTSxNQUFNLDBCQUFaO0FBQ0EsSUFBTSxjQUFjLHNCQUFwQjtBQUNBLElBQU0sbUJBQW1CLG1EQUF6Qjs7QUFHQTs7O0lBRWEsa0MsV0FBQSxrQztBQUNYOzs7QUFHQSw4Q0FBWSxNQUFaLEVBQW9CO0FBQUE7O0FBQ2xCO0FBQ0EsU0FBSyxPQUFMLEdBQWUsTUFBZjtBQUNEOztBQUVEOzs7Ozs7Ozs7bUNBS2UsYyxFQUFnQixjLEVBQWdCO0FBQzdDLGFBQU8sSUFBSSwyQkFBSixDQUFnQyxLQUFLLE9BQXJDLEVBQ0gsY0FERyxFQUNhLGNBRGIsQ0FBUDtBQUVEOzs7Ozs7QUFJSDs7Ozs7SUFHYSwyQixXQUFBLDJCOztBQUVYOzs7OztBQUtBLHVDQUFZLE1BQVosRUFBb0IsY0FBcEIsRUFBb0MsY0FBcEMsRUFBb0Q7QUFBQTs7QUFBQTs7QUFDbEQ7Ozs7QUFJQSxTQUFLLGVBQUwsR0FBdUIsY0FBdkI7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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuNkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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Q2tCLFEsRUFBVTtBQUMxQixXQUFLLFVBQUwsQ0FBZ0IsaUJBQWhCLENBQWtDLFFBQWxDO0FBQ0Q7O0FBRUQ7Ozs7aUNBQ2EsaUIsRUFBbUIsWSxFQUFjO0FBQzVDO0FBQ0EsYUFBTyxLQUFLLFVBQUwsQ0FBZ0IsTUFBaEIsQ0FBdUIsaUJBQXZCLEVBQTBDLFlBQTFDLENBQVA7QUFDRDs7QUFFRDs7OztpQ0FDYSxNLEVBQVEsaUIsRUFBbUIsWSxFQUFjO0FBQ3BEO0FBQ0EsV0FBSyxVQUFMLENBQWdCLE1BQWhCLENBQXVCLE1BQXZCLEVBQStCLGlCQUEvQixFQUFrRCxZQUFsRDtBQUNEOzs7Ozs7QUFHSDs7Ozs7Ozs7Ozs7Ozs7OztRQWtCRSxpQixHQUFBLGlCO1FBQ0EsWSxHQUFBLFk7UUFDQSxXLEdBQUEsVztRQUNBLE8sR0FBQSxPO1FBQ0EsaUIsR0FBQSxpQiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJleHBvcnQgY29uc3QgQ1NTID0gXCIuc3dnLWJ1dHRvbiwuc3dnLWJ1dHRvbi1kYXJrLC5zd2ctYnV0dG9uLWxpZ2h0e2JvcmRlcjowO2JvcmRlci1yYWRpdXM6NHB4O2JveC1zaXppbmc6Ym9yZGVyLWJveDtvdXRsaW5lOjA7cGFkZGluZzoxMXB4IDhweDt3aWR0aDoyNDBweDttaW4td2lkdGg6MTUwcHg7aGVpZ2h0OjQwcHg7bWluLWhlaWdodDo0MHB4fS5zd2ctYnV0dG9uLWRhcms6YWZ0ZXIsLnN3Zy1idXR0b24tbGlnaHQ6YWZ0ZXIsLnN3Zy1idXR0b246YWZ0ZXJ7ZGlzcGxheTpibG9jazttYXgtd2lkdGg6MjAwcHg7bWF4LWhlaWdodDo0MHB4O3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7bWFyZ2luOmF1dG87Y29udGVudDpcXFwiXFxcIjtib3JkZXI6MDtiYWNrZ3JvdW5kLW9yaWdpbjpjb250ZW50LWJveDtiYWNrZ3JvdW5kLXBvc2l0aW9uOjUwJTtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1zaXplOmNvbnRhaW59LnN3Zy1idXR0b24sLnN3Zy1idXR0b24tbGlnaHR7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JveC1zaGFkb3c6MCAxcHggMXB4IDAgcmdiYSg2MCw2NCw2NywwLjMpLDAgMXB4IDNweCAxcHggcmdiYSg2MCw2NCw2NywwLjE1KX0uc3dnLWJ1dHRvbi1saWdodDphZnRlciwuc3dnLWJ1dHRvbjphZnRlcntiYWNrZ3JvdW5kLWltYWdlOnVybChcXFwiZGF0YTppbWFnZS9zdmcreG1sO2NoYXJzZXQ9dXRmLTgsJTNDc3ZnIHdpZHRoPScyMzUnIGhlaWdodD0nMjQnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyclM0UlM0NnIGZpbGw9J25vbmUnIGZpbGwtcnVsZT0nZXZlbm9kZCclM0UlM0NwYXRoIGQ9J00xNjkuMzY3IDE5Yy01LjA5IDAtOS4zNjctNC4yNjUtOS4zNjctOS41czQuMjc3LTkuNSA5LjM2Ny05LjVjMi44MTggMCA0LjgyMyAxLjEzMyA2LjMzIDIuNjIybC0xLjc3NSAxLjgyN2MtMS4wODItMS4wNC0yLjU1LTEuODU3LTQuNTU1LTEuODU3LTMuNzIgMC02LjYyOCAzLjA4MS02LjYyOCA2LjkwOCAwIDMuODI3IDIuOTA3IDYuOTA4IDYuNjI4IDYuOTA4IDIuNDExIDAgMy43OC0xIDQuNjY0LTEuODk4LjcyNC0uNzQ1IDEuMTktMS44MDYgMS4zNy0zLjI2NWgtNi4wMzRWOC42NDNoOC40OTRjLjA5LjQ1OS4xMzkgMS4wMi4xMzkgMS42MjIgMCAxLjk1LS41MTYgNC4zNTctMi4xODMgNi4wNzItMS42MjcgMS43MzQtMy42OTEgMi42NjMtNi40NSAyLjY2M3onIGZpbGw9JyUyMzQyODVGNCcgZmlsbC1ydWxlPSdub256ZXJvJy8lM0UlM0NwYXRoIGQ9J00xOTIgMTNjMCAzLjQ1Ni0yLjY5IDYtNiA2cy02LTIuNTQ0LTYtNmMwLTMuNDc2IDIuNjktNiA2LTZzNiAyLjUyNCA2IDZ6bS0yLjYzIDBjMC0yLjE2NC0xLjU2My0zLjYzNi0zLjM3LTMuNjM2LTEuODA3IDAtMy4zNyAxLjQ4Mi0zLjM3IDMuNjM2IDAgMi4xMzQgMS41NjMgMy42MzYgMy4zNyAzLjYzNiAxLjgwNyAwIDMuMzctMS40OTIgMy4zNy0zLjYzNnonIGZpbGw9JyUyM0U5NDIzNScgZmlsbC1ydWxlPSdub256ZXJvJy8lM0UlM0NwYXRoIGQ9J00yMDUgMTNjMCAzLjQ1Ni0yLjY5IDYtNiA2LTMuMyAwLTYtMi41NDQtNi02IDAtMy40NzYgMi42OS02IDYtNnM2IDIuNTI0IDYgNnptLTIuNjIgMGMwLTIuMTY0LTEuNTYzLTMuNjM2LTMuMzctMy42MzYtMS44MDcgMC0zLjM3IDEuNDgyLTMuMzcgMy42MzYgMCAyLjEzNCAxLjU2MyAzLjYzNiAzLjM3IDMuNjM2IDEuODA3LjAxIDMuMzctMS40OTIgMy4zNy0zLjYzNnonIGZpbGw9JyUyM0ZBQkIwNScgZmlsbC1ydWxlPSdub256ZXJvJy8lM0UlM0NwYXRoIGQ9J00yMTcgNy4zNjJ2MTAuNTNjMCA0LjMzNy0yLjQ5OSA2LjEwOC01LjQ1NyA2LjEwOC0yLjc4NiAwLTQuNDUyLTEuOTA4LTUuMDgzLTMuNDY1bDIuMTkyLS45M2MuMzkyLjk2IDEuMzUgMi4wODUgMi44OTEgMi4wODUgMS44OTYgMCAzLjA2NC0xLjIwNCAzLjA2NC0zLjQ0NXYtLjg0MWgtLjA4N2MtLjU2NC43MTQtMS42NTYgMS4zMy0zLjAyNSAxLjMzLTIuODcyIDAtNS40OTUtMi41NTQtNS40OTUtNS44NDJDMjA2IDkuNTg0IDIwOC42MzMgNyAyMTEuNDk1IDdjMS4zNyAwIDIuNDYuNjI2IDMuMDI1IDEuMzExaC4wODd2LS45NDlIMjE3em0tMi4yMjEgNS41NGMwLTIuMDY2LTEuMzUtMy41ODItMy4wNjQtMy41ODItMS43NDIgMC0zLjE5NyAxLjUwNy0zLjE5NyAzLjU4MiAwIDIuMDQ1IDEuNDU1IDMuNTMzIDMuMTk3IDMuNTMzIDEuNzE0IDAgMy4wNjQtMS40ODggMy4wNjQtMy41MzN6JyBmaWxsPSclMjM0Mjg1RjQnIGZpbGwtcnVsZT0nbm9uemVybycvJTNFJTNDcGF0aCBmaWxsPSclMjMzNEE4NTMnIGZpbGwtcnVsZT0nbm9uemVybycgZD0nTTIyMyAxdjE4aC0zVjF6Jy8lM0UlM0NwYXRoIGQ9J00yMzIuODQ0IDE0Ljk3M2wyLjA0NiAxLjM2M2MtLjY2Mi45ODEtMi4yNTYgMi42NjQtNS4wMTQgMi42NjQtMy40MiAwLTUuODc2LTIuNjM0LTUuODc2LTYgMC0zLjU2NiAyLjQ4Ny02IDUuNTg1LTYgMy4xMTkgMCA0LjY0MyAyLjQ3NCA1LjE0NCAzLjgxNmwuMjcxLjY4MS04LjAzMiAzLjMyNmMuNjEyIDEuMjAyIDEuNTc0IDEuODIzIDIuOTE4IDEuODIzczIuMjc2LS42NzEgMi45NTgtMS42NzN6bS02LjMwNy0yLjE2M2w1LjM3NS0yLjIyNGMtLjMwMS0uNzUxLTEuMTg0LTEuMjcyLTIuMjM3LTEuMjcyLTEuMzQzIDAtMy4yMDggMS4xODItMy4xMzggMy40OTZ6JyBmaWxsPSclMjNFOTQyMzUnIGZpbGwtcnVsZT0nbm9uemVybycvJTNFJTNDcGF0aCBkPSdNNi41NzYgMTkuMzg0Yy0xLjI0OCAwLTIuNDY4LS40MDgtMy42Ni0xLjIyNC0xLjE5Mi0uODE2LTEuOTcyLTEuOTYtMi4zNC0zLjQzMmwyLjAxNi0uODE2Yy4yNC45NDQuNzMyIDEuNzQgMS40NzYgMi4zODguNzQ0LjY0OCAxLjU4Ljk3MiAyLjUwOC45NzIuOTYgMCAxLjc4LS4yNTIgMi40Ni0uNzU2LjY4LS41MDQgMS4wMi0xLjE4OCAxLjAyLTIuMDUyIDAtLjk2LS4zNC0xLjctMS4wMi0yLjIyLS42OC0uNTItMS43NTYtMS4wMDQtMy4yMjgtMS40NTItMS41Mi0uNDgtMi42NzItMS4xLTMuNDU2LTEuODYtLjc4NC0uNzYtMS4xNzYtMS43MzItMS4xNzYtMi45MTYgMC0xLjIzMi40ODgtMi4zMDQgMS40NjQtMy4yMTYuOTc2LS45MTIgMi4yNDgtMS4zNjggMy44MTYtMS4zNjggMS40NTYgMCAyLjY0LjM2NCAzLjU1MiAxLjA5Mi45MTIuNzI4IDEuNTA0IDEuNTI0IDEuNzc2IDIuMzg4bC0yLjAxNi44NGMtLjE0NC0uNTQ0LS41LTEuMDQ4LTEuMDY4LTEuNTEyLS41NjgtLjQ2NC0xLjMtLjY5Ni0yLjE5Ni0uNjk2LS44NDggMC0xLjU3Mi4yMzYtMi4xNzIuNzA4LS42LjQ3Mi0uOSAxLjA2LS45IDEuNzY0IDAgLjY0LjI3NiAxLjE4LjgyOCAxLjYyLjU1Mi40NCAxLjM2NC44MzYgMi40MzYgMS4xODguODQ4LjI3MiAxLjU1Ni41MzYgMi4xMjQuNzkyYTkuODQyIDkuODQyIDAgMCAxIDEuNzI4IDEuMDIgNC4wNjUgNC4wNjUgMCAwIDEgMS4zMiAxLjU4NGMuMjk2LjYzMi40NDQgMS4zNjQuNDQ0IDIuMTk2IDAgLjgzMi0uMTcyIDEuNTc2LS41MTYgMi4yMzJhNC4xOSA0LjE5IDAgMCAxLTEuMzY4IDEuNTYgNi44NzUgNi44NzUgMCAwIDEtMy44NTIgMS4xNzZ6TTI0LjkzNiAxOWgtMi4xMTJ2LTEuNjMyaC0uMDk2Yy0uMzM2LjU2LS44NDggMS4wMzYtMS41MzYgMS40MjhhNC4zNDUgNC4zNDUgMCAwIDEtMi4xODQuNTg4Yy0xLjQ3MiAwLTIuNTg4LS40NDgtMy4zNDgtMS4zNDQtLjc2LS44OTYtMS4xNC0yLjA5Ni0xLjE0LTMuNnYtNy4yaDIuMjA4djYuODRjMCAyLjE5Mi45NjggMy4yODggMi45MDQgMy4yODguOTEyIDAgMS42NTYtLjM2OCAyLjIzMi0xLjEwNC41NzYtLjczNi44NjQtMS41ODQuODY0LTIuNTQ0VjcuMjRoMi4yMDhWMTl6bTguOTA0LjM4NGMtLjg5NiAwLTEuNy0uMTkyLTIuNDEyLS41NzYtLjcxMi0uMzg0LTEuMjQ0LS44NjQtMS41OTYtMS40NGgtLjA5NlYxOWgtMi4xMTJWMS44MTZoMi4yMDhWNy4yNGwtLjA5NiAxLjYzMmguMDk2Yy4zNTItLjU3Ni44ODQtMS4wNTYgMS41OTYtMS40NC43MTItLjM4NCAxLjUxNi0uNTc2IDIuNDEyLS41NzYgMS41MiAwIDIuODMyLjYgMy45MzYgMS44IDEuMTA0IDEuMiAxLjY1NiAyLjY4OCAxLjY1NiA0LjQ2NCAwIDEuNzc2LS41NTIgMy4yNjQtMS42NTYgNC40NjQtMS4xMDQgMS4yLTIuNDE2IDEuOC0zLjkzNiAxLjh6bS0uMzYtMi4wMTZjMS4wMjQgMCAxLjkwNC0uMzg4IDIuNjQtMS4xNjQuNzM2LS43NzYgMS4xMDQtMS44MDQgMS4xMDQtMy4wODRzLS4zNjgtMi4zMDgtMS4xMDQtMy4wODRjLS43MzYtLjc3Ni0xLjYxNi0xLjE2NC0yLjY0LTEuMTY0LTEuMDQgMC0xLjkyNC4zODQtMi42NTIgMS4xNTItLjcyOC43NjgtMS4wOTIgMS44LTEuMDkyIDMuMDk2cy4zNjQgMi4zMjggMS4wOTIgMy4wOTZjLjcyOC43NjggMS42MTIgMS4xNTIgMi42NTIgMS4xNTJ6bTEyLjMzNiAyLjAxNmMtMS4zMTIgMC0yLjM5Ni0uMzItMy4yNTItLjk2YTUuNjgyIDUuNjgyIDAgMCAxLTEuODg0LTIuNGwxLjk2OC0uODE2Yy42MjQgMS40NzIgMS42ODggMi4yMDggMy4xOTIgMi4yMDguNjg4IDAgMS4yNTItLjE1MiAxLjY5Mi0uNDU2LjQ0LS4zMDQuNjYtLjcwNC42Ni0xLjIgMC0uNzY4LS41MzYtMS4yODgtMS42MDgtMS41NmwtMi4zNzYtLjU3NmMtLjc1Mi0uMTkyLTEuNDY0LS41NTYtMi4xMzYtMS4wOTItLjY3Mi0uNTM2LTEuMDA4LTEuMjYtMS4wMDgtMi4xNzIgMC0xLjA0LjQ2LTEuODg0IDEuMzgtMi41MzIuOTItLjY0OCAyLjAxMi0uOTcyIDMuMjc2LS45NzIgMS4wNCAwIDEuOTY4LjIzNiAyLjc4NC43MDhhMy45OSAzLjk5IDAgMCAxIDEuNzUyIDIuMDI4bC0xLjkyLjc5MmMtLjQzMi0xLjA0LTEuMzI4LTEuNTYtMi42ODgtMS41Ni0uNjU2IDAtMS4yMDguMTM2LTEuNjU2LjQwOC0uNDQ4LjI3Mi0uNjcyLjY0LS42NzIgMS4xMDQgMCAuNjcyLjUyIDEuMTI4IDEuNTYgMS4zNjhsMi4zMjguNTUyYzEuMTA0LjI1NiAxLjkyLjY5NiAyLjQ0OCAxLjMyLjUyOC42MjQuNzkyIDEuMzI4Ljc5MiAyLjExMiAwIDEuMDU2LS40MzIgMS45MzYtMS4yOTYgMi42NC0uODY0LjcwNC0xLjk3NiAxLjA1Ni0zLjMzNiAxLjA1NnptMTEuOTI4IDBjLTEuNzYgMC0zLjIwOC0uNTk2LTQuMzQ0LTEuNzg4LTEuMTM2LTEuMTkyLTEuNzA0LTIuNjg0LTEuNzA0LTQuNDc2IDAtMS43OTIuNTY4LTMuMjg0IDEuNzA0LTQuNDc2IDEuMTM2LTEuMTkyIDIuNTg0LTEuNzg4IDQuMzQ0LTEuNzg4IDEuMzEyIDAgMi40LjMyIDMuMjY0Ljk2YTUuNjIxIDUuNjIxIDAgMCAxIDEuODk2IDIuNDI0bC0yLjAxNi44NGMtLjYwOC0xLjQ3Mi0xLjcwNC0yLjIwOC0zLjI4OC0yLjIwOC0uOTc2IDAtMS44MzYuNC0yLjU4IDEuMi0uNzQ0LjgtMS4xMTYgMS44MTYtMS4xMTYgMy4wNDhzLjM3MiAyLjI0OCAxLjExNiAzLjA0OGMuNzQ0LjggMS42MDQgMS4yIDIuNTggMS4yIDEuNjQ4IDAgMi43ODQtLjczNiAzLjQwOC0yLjIwOGwxLjk2OC44NGMtLjQuOTYtMS4wNDQgMS43NjQtMS45MzIgMi40MTItLjg4OC42NDgtMS45ODguOTcyLTMuMy45NzJ6bTkuMzYtLjM4NGgtMi4yMDhWNy4yNGgyLjExMnYxLjkyaC4wOTZjLjIyNC0uNjQuNjg0LTEuMTY4IDEuMzgtMS41ODQuNjk2LS40MTYgMS4zNzItLjYyNCAyLjAyOC0uNjI0LjY1NiAwIDEuMjA4LjA5NiAxLjY1Ni4yODhsLS44NCAyLjA2NGMtLjI4OC0uMTEyLS42OC0uMTY4LTEuMTc2LS4xNjgtLjggMC0xLjUwOC4zMTYtMi4xMjQuOTQ4LS42MTYuNjMyLS45MjQgMS40Ni0uOTI0IDIuNDg0VjE5em04LjkwNC0xNC43MTJhMS41MDQgMS41MDQgMCAwIDEtMS4xMDQuNDU2Yy0uNDMyIDAtLjgtLjE1Mi0xLjEwNC0uNDU2YTEuNTA0IDEuNTA0IDAgMCAxLS40NTYtMS4xMDRjMC0uNDMyLjE1Mi0uOC40NTYtMS4xMDRhMS41MDQgMS41MDQgMCAwIDEgMS4xMDQtLjQ1NmMuNDMyIDAgLjguMTUyIDEuMTA0LjQ1Ni4zMDQuMzA0LjQ1Ni42NzIuNDU2IDEuMTA0IDAgLjQzMi0uMTUyLjgtLjQ1NiAxLjEwNHptMCAxNC43MTJINzMuOFY3LjI0aDIuMjA4VjE5em05LjA5Ni4zODRjLS44OTYgMC0xLjctLjE5Mi0yLjQxMi0uNTc2LS43MTItLjM4NC0xLjI0NC0uODY0LTEuNTk2LTEuNDRIODFWMTloLTIuMTEyVjEuODE2aDIuMjA4VjcuMjRMODEgOC44NzJoLjA5NmMuMzUyLS41NzYuODg0LTEuMDU2IDEuNTk2LTEuNDQuNzEyLS4zODQgMS41MTYtLjU3NiAyLjQxMi0uNTc2IDEuNTIgMCAyLjgzMi42IDMuOTM2IDEuOCAxLjEwNCAxLjIgMS42NTYgMi42ODggMS42NTYgNC40NjQgMCAxLjc3Ni0uNTUyIDMuMjY0LTEuNjU2IDQuNDY0LTEuMTA0IDEuMi0yLjQxNiAxLjgtMy45MzYgMS44em0tLjM2LTIuMDE2YzEuMDI0IDAgMS45MDQtLjM4OCAyLjY0LTEuMTY0LjczNi0uNzc2IDEuMTA0LTEuODA0IDEuMTA0LTMuMDg0cy0uMzY4LTIuMzA4LTEuMTA0LTMuMDg0Yy0uNzM2LS43NzYtMS42MTYtMS4xNjQtMi42NC0xLjE2NC0xLjA0IDAtMS45MjQuMzg0LTIuNjUyIDEuMTUyLS43MjguNzY4LTEuMDkyIDEuOC0xLjA5MiAzLjA5NnMuMzY0IDIuMzI4IDEuMDkyIDMuMDk2Yy43MjguNzY4IDEuNjEyIDEuMTUyIDIuNjUyIDEuMTUyem0xMy4yOTYgMi4wMTZjLTEuNzc2IDAtMy4yMi0uNTkyLTQuMzMyLTEuNzc2LTEuMTEyLTEuMTg0LTEuNjY4LTIuNjgtMS42NjgtNC40ODggMC0xLjcxMi41NC0zLjE4NCAxLjYyLTQuNDE2IDEuMDgtMS4yMzIgMi40Ni0xLjg0OCA0LjE0LTEuODQ4IDEuNzQ0IDAgMy4xNC41NjggNC4xODggMS43MDQgMS4wNDggMS4xMzYgMS41NzIgMi42NTYgMS41NzIgNC41NmwtLjAyNC40MDhoLTkuMjg4Yy4wNjQgMS4xODQuNDYgMi4xMiAxLjE4OCAyLjgwOC43MjguNjg4IDEuNTggMS4wMzIgMi41NTYgMS4wMzIgMS41ODQgMCAyLjY1Ni0uNjcyIDMuMjE2LTIuMDE2bDEuOTY4LjgxNmMtLjM4NC45MTItMS4wMTYgMS42NzYtMS44OTYgMi4yOTItLjg4LjYxNi0xLjk2LjkyNC0zLjI0LjkyNHptMy4xNjgtNy42OGMtLjA0OC0uNjcyLS4zNTYtMS4zMTItLjkyNC0xLjkyLS41NjgtLjYwOC0xLjQxMi0uOTEyLTIuNTMyLS45MTItLjgxNiAwLTEuNTI0LjI1Ni0yLjEyNC43NjgtLjYuNTEyLTEuMDEyIDEuMi0xLjIzNiAyLjA2NGg2LjgxNnpNMTIzLjcyIDE5aC0yLjI1NmwtMi45MjgtOS4wMjRMMTE1LjYzMiAxOUgxMTMuNGwtMy43OTItMTEuNzZoMi4zMDRsMi42MTYgOC44OGguMDI0bDIuOTA0LTguODhoMi4yOGwyLjkwNCA4Ljg4aC4wMjRsMi41OTItOC44OGgyLjI1NkwxMjMuNzIgMTl6bTcuNjMyLTE0LjcxMmExLjUwNCAxLjUwNCAwIDAgMS0xLjEwNC40NTZjLS40MzIgMC0uOC0uMTUyLTEuMTA0LS40NTZhMS41MDQgMS41MDQgMCAwIDEtLjQ1Ni0xLjEwNGMwLS40MzIuMTUyLS44LjQ1Ni0xLjEwNGExLjUwNCAxLjUwNCAwIDAgMSAxLjEwNC0uNDU2Yy40MzIgMCAuOC4xNTIgMS4xMDQuNDU2LjMwNC4zMDQuNDU2LjY3Mi40NTYgMS4xMDQgMCAuNDMyLS4xNTIuOC0uNDU2IDEuMTA0em0wIDE0LjcxMmgtMi4yMDhWNy4yNGgyLjIwOFYxOXptNy45NjguMTkyYy0xLjIzMiAwLTIuMTcyLS4zMjgtMi44Mi0uOTg0LS42NDgtLjY1Ni0uOTcyLTEuNTg0LS45NzItMi43ODRWOS4yNTZoLTIuMDY0VjcuMjRoMi4wNjR2LTMuNmgyLjIwOHYzLjZoMi44OHYyLjAxNmgtMi44OHY2YzAgMS4yOC41MjggMS45MiAxLjU4NCAxLjkyLjQgMCAuNzM2LS4wNjQgMS4wMDgtLjE5MmwuNzY4IDEuODk2Yy0uNDguMjA4LTEuMDcyLjMxMi0xLjc3Ni4zMTJ6bTUuNjE2LTE3LjM3NlY3LjI0bC0uMDk2IDEuNjMyaC4wOTZjLjMyLS41Ni44MjQtMS4wMzYgMS41MTItMS40MjhhNC4zODkgNC4zODkgMCAwIDEgMi4yMDgtLjU4OGMxLjQ1NiAwIDIuNTY4LjQ0OCAzLjMzNiAxLjM0NC43NjguODk2IDEuMTUyIDIuMDk2IDEuMTUyIDMuNlYxOWgtMi4yMDh2LTYuODY0YzAtMi4xNzYtLjk2OC0zLjI2NC0yLjkwNC0zLjI2NC0uOTEyIDAtMS42NTYuMzY0LTIuMjMyIDEuMDkyLS41NzYuNzI4LS44NjQgMS41NzItLjg2NCAyLjUzMlYxOWgtMi4yMDhWMS44MTZoMi4yMDh6JyBmaWxsPSclMjM1RjYzNjgnLyUzRSUzQy9nJTNFJTNDL3N2ZyUzRVxcXCIpfS5zd2ctYnV0dG9uLWRhcmt7YmFja2dyb3VuZC1jb2xvcjojMDAwfS5zd2ctYnV0dG9uLWRhcms6YWZ0ZXJ7YmFja2dyb3VuZC1pbWFnZTp1cmwoXFxcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCUzQ3N2ZyB3aWR0aD0nMjM1JyBoZWlnaHQ9JzI0JyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnJTNFJTNDZyBmaWxsPSdub25lJyBmaWxsLXJ1bGU9J2V2ZW5vZGQnJTNFJTNDcGF0aCBkPSdNMTY5LjM2NyAxOWMtNS4wOSAwLTkuMzY3LTQuMjY1LTkuMzY3LTkuNXM0LjI3Ny05LjUgOS4zNjctOS41YzIuODE4IDAgNC44MjMgMS4xMzMgNi4zMyAyLjYyMmwtMS43NzUgMS44MjdjLTEuMDgyLTEuMDQtMi41NS0xLjg1Ny00LjU1NS0xLjg1Ny0zLjcyIDAtNi42MjggMy4wODEtNi42MjggNi45MDggMCAzLjgyNyAyLjkwNyA2LjkwOCA2LjYyOCA2LjkwOCAyLjQxMSAwIDMuNzgtMSA0LjY2NC0xLjg5OC43MjQtLjc0NSAxLjE5LTEuODA2IDEuMzctMy4yNjVoLTYuMDM0VjguNjQzaDguNDk0Yy4wOS40NTkuMTM5IDEuMDIuMTM5IDEuNjIyIDAgMS45NS0uNTE2IDQuMzU3LTIuMTgzIDYuMDcyLTEuNjI3IDEuNzM0LTMuNjkxIDIuNjYzLTYuNDUgMi42NjN6JyBmaWxsPSclMjM0Mjg1RjQnIGZpbGwtcnVsZT0nbm9uemVybycvJTNFJTNDcGF0aCBkPSdNMTkyIDEzYzAgMy40NTYtMi42OSA2LTYgNnMtNi0yLjU0NC02LTZjMC0zLjQ3NiAyLjY5LTYgNi02czYgMi41MjQgNiA2em0tMi42MyAwYzAtMi4xNjQtMS41NjMtMy42MzYtMy4zNy0zLjYzNi0xLjgwNyAwLTMuMzcgMS40ODItMy4zNyAzLjYzNiAwIDIuMTM0IDEuNTYzIDMuNjM2IDMuMzcgMy42MzYgMS44MDcgMCAzLjM3LTEuNDkyIDMuMzctMy42MzZ6JyBmaWxsPSclMjNFOTQyMzUnIGZpbGwtcnVsZT0nbm9uemVybycvJTNFJTNDcGF0aCBkPSdNMjA1IDEzYzAgMy40NTYtMi42OSA2LTYgNi0zLjMgMC02LTIuNTQ0LTYtNiAwLTMuNDc2IDIuNjktNiA2LTZzNiAyLjUyNCA2IDZ6bS0yLjYyIDBjMC0yLjE2NC0xLjU2My0zLjYzNi0zLjM3LTMuNjM2LTEuODA3IDAtMy4zNyAxLjQ4Mi0zLjM3IDMuNjM2IDAgMi4xMzQgMS41NjMgMy42MzYgMy4zNyAzLjYzNiAxLjgwNy4wMSAzLjM3LTEuNDkyIDMuMzctMy42MzZ6JyBmaWxsPSclMjNGQUJCMDUnIGZpbGwtcnVsZT0nbm9uemVybycvJTNFJTNDcGF0aCBkPSdNMjE3IDcuMzYydjEwLjUzYzAgNC4zMzctMi40OTkgNi4xMDgtNS40NTcgNi4xMDgtMi43ODYgMC00LjQ1Mi0xLjkwOC01LjA4My0zLjQ2NWwyLjE5Mi0uOTNjLjM5Mi45NiAxLjM1IDIuMDg1IDIuODkxIDIuMDg1IDEuODk2IDAgMy4wNjQtMS4yMDQgMy4wNjQtMy40NDV2LS44NDFoLS4wODdjLS41NjQuNzE0LTEuNjU2IDEuMzMtMy4wMjUgMS4zMy0yLjg3MiAwLTUuNDk1LTIuNTU0LTUuNDk1LTUuODQyQzIwNiA5LjU4NCAyMDguNjMzIDcgMjExLjQ5NSA3YzEuMzcgMCAyLjQ2LjYyNiAzLjAyNSAxLjMxMWguMDg3di0uOTQ5SDIxN3ptLTIuMjIxIDUuNTRjMC0yLjA2Ni0xLjM1LTMuNTgyLTMuMDY0LTMuNTgyLTEuNzQyIDAtMy4xOTcgMS41MDctMy4xOTcgMy41ODIgMCAyLjA0NSAxLjQ1NSAzLjUzMyAzLjE5NyAzLjUzMyAxLjcxNCAwIDMuMDY0LTEuNDg4IDMuMDY0LTMuNTMzeicgZmlsbD0nJTIzNDI4NUY0JyBmaWxsLXJ1bGU9J25vbnplcm8nLyUzRSUzQ3BhdGggZmlsbD0nJTIzMzRBODUzJyBmaWxsLXJ1bGU9J25vbnplcm8nIGQ9J00yMjMgMXYxOGgtM1YxeicvJTNFJTNDcGF0aCBkPSdNMjMyLjg0NCAxNC45NzNsMi4wNDYgMS4zNjNjLS42NjIuOTgxLTIuMjU2IDIuNjY0LTUuMDE0IDIuNjY0LTMuNDIgMC01Ljg3Ni0yLjYzNC01Ljg3Ni02IDAtMy41NjYgMi40ODctNiA1LjU4NS02IDMuMTE5IDAgNC42NDMgMi40NzQgNS4xNDQgMy44MTZsLjI3MS42ODEtOC4wMzIgMy4zMjZjLjYxMiAxLjIwMiAxLjU3NCAxLjgyMyAyLjkxOCAxLjgyM3MyLjI3Ni0uNjcxIDIuOTU4LTEuNjczem0tNi4zMDctMi4xNjNsNS4zNzUtMi4yMjRjLS4zMDEtLjc1MS0xLjE4NC0xLjI3Mi0yLjIzNy0xLjI3Mi0xLjM0MyAwLTMuMjA4IDEuMTgyLTMuMTM4IDMuNDk2eicgZmlsbD0nJTIzRTk0MjM1JyBmaWxsLXJ1bGU9J25vbnplcm8nLyUzRSUzQ3BhdGggZD0nTTYuNTc2IDE5LjM4NGMtMS4yNDggMC0yLjQ2OC0uNDA4LTMuNjYtMS4yMjQtMS4xOTItLjgxNi0xLjk3Mi0xLjk2LTIuMzQtMy40MzJsMi4wMTYtLjgxNmMuMjQuOTQ0LjczMiAxLjc0IDEuNDc2IDIuMzg4Ljc0NC42NDggMS41OC45NzIgMi41MDguOTcyLjk2IDAgMS43OC0uMjUyIDIuNDYtLjc1Ni42OC0uNTA0IDEuMDItMS4xODggMS4wMi0yLjA1MiAwLS45Ni0uMzQtMS43LTEuMDItMi4yMi0uNjgtLjUyLTEuNzU2LTEuMDA0LTMuMjI4LTEuNDUyLTEuNTItLjQ4LTIuNjcyLTEuMS0zLjQ1Ni0xLjg2LS43ODQtLjc2LTEuMTc2LTEuNzMyLTEuMTc2LTIuOTE2IDAtMS4yMzIuNDg4LTIuMzA0IDEuNDY0LTMuMjE2Ljk3Ni0uOTEyIDIuMjQ4LTEuMzY4IDMuODE2LTEuMzY4IDEuNDU2IDAgMi42NC4zNjQgMy41NTIgMS4wOTIuOTEyLjcyOCAxLjUwNCAxLjUyNCAxLjc3NiAyLjM4OGwtMi4wMTYuODRjLS4xNDQtLjU0NC0uNS0xLjA0OC0xLjA2OC0xLjUxMi0uNTY4LS40NjQtMS4zLS42OTYtMi4xOTYtLjY5Ni0uODQ4IDAtMS41NzIuMjM2LTIuMTcyLjcwOC0uNi40NzItLjkgMS4wNi0uOSAxLjc2NCAwIC42NC4yNzYgMS4xOC44MjggMS42Mi41NTIuNDQgMS4zNjQuODM2IDIuNDM2IDEuMTg4Ljg0OC4yNzIgMS41NTYuNTM2IDIuMTI0Ljc5MmE5Ljg0MiA5Ljg0MiAwIDAgMSAxLjcyOCAxLjAyIDQuMDY1IDQuMDY1IDAgMCAxIDEuMzIgMS41ODRjLjI5Ni42MzIuNDQ0IDEuMzY0LjQ0NCAyLjE5NiAwIC44MzItLjE3MiAxLjU3Ni0uNTE2IDIuMjMyYTQuMTkgNC4xOSAwIDAgMS0xLjM2OCAxLjU2IDYuODc1IDYuODc1IDAgMCAxLTMuODUyIDEuMTc2ek0yNC45MzYgMTloLTIuMTEydi0xLjYzMmgtLjA5NmMtLjMzNi41Ni0uODQ4IDEuMDM2LTEuNTM2IDEuNDI4YTQuMzQ1IDQuMzQ1IDAgMCAxLTIuMTg0LjU4OGMtMS40NzIgMC0yLjU4OC0uNDQ4LTMuMzQ4LTEuMzQ0LS43Ni0uODk2LTEuMTQtMi4wOTYtMS4xNC0zLjZ2LTcuMmgyLjIwOHY2Ljg0YzAgMi4xOTIuOTY4IDMuMjg4IDIuOTA0IDMuMjg4LjkxMiAwIDEuNjU2LS4zNjggMi4yMzItMS4xMDQuNTc2LS43MzYuODY0LTEuNTg0Ljg2NC0yLjU0NFY3LjI0aDIuMjA4VjE5em04LjkwNC4zODRjLS44OTYgMC0xLjctLjE5Mi0yLjQxMi0uNTc2LS43MTItLjM4NC0xLjI0NC0uODY0LTEuNTk2LTEuNDRoLS4wOTZWMTloLTIuMTEyVjEuODE2aDIuMjA4VjcuMjRsLS4wOTYgMS42MzJoLjA5NmMuMzUyLS41NzYuODg0LTEuMDU2IDEuNTk2LTEuNDQuNzEyLS4zODQgMS41MTYtLjU3NiAyLjQxMi0uNTc2IDEuNTIgMCAyLjgzMi42IDMuOTM2IDEuOCAxLjEwNCAxLjIgMS42NTYgMi42ODggMS42NTYgNC40NjQgMCAxLjc3Ni0uNTUyIDMuMjY0LTEuNjU2IDQuNDY0LTEuMTA0IDEuMi0yLjQxNiAxLjgtMy45MzYgMS44em0tLjM2LTIuMDE2YzEuMDI0IDAgMS45MDQtLjM4OCAyLjY0LTEuMTY0LjczNi0uNzc2IDEuMTA0LTEuODA0IDEuMTA0LTMuMDg0cy0uMzY4LTIuMzA4LTEuMTA0LTMuMDg0Yy0uNzM2LS43NzYtMS42MTYtMS4xNjQtMi42NC0xLjE2NC0xLjA0IDAtMS45MjQuMzg0LTIuNjUyIDEuMTUyLS43MjguNzY4LTEuMDkyIDEuOC0xLjA5MiAzLjA5NnMuMzY0IDIuMzI4IDEuMDkyIDMuMDk2Yy43MjguNzY4IDEuNjEyIDEuMTUyIDIuNjUyIDEuMTUyem0xMi4zMzYgMi4wMTZjLTEuMzEyIDAtMi4zOTYtLjMyLTMuMjUyLS45NmE1LjY4MiA1LjY4MiAwIDAgMS0xLjg4NC0yLjRsMS45NjgtLjgxNmMuNjI0IDEuNDcyIDEuNjg4IDIuMjA4IDMuMTkyIDIuMjA4LjY4OCAwIDEuMjUyLS4xNTIgMS42OTItLjQ1Ni40NC0uMzA0LjY2LS43MDQuNjYtMS4yIDAtLjc2OC0uNTM2LTEuMjg4LTEuNjA4LTEuNTZsLTIuMzc2LS41NzZjLS43NTItLjE5Mi0xLjQ2NC0uNTU2LTIuMTM2LTEuMDkyLS42NzItLjUzNi0xLjAwOC0xLjI2LTEuMDA4LTIuMTcyIDAtMS4wNC40Ni0xLjg4NCAxLjM4LTIuNTMyLjkyLS42NDggMi4wMTItLjk3MiAzLjI3Ni0uOTcyIDEuMDQgMCAxLjk2OC4yMzYgMi43ODQuNzA4YTMuOTkgMy45OSAwIDAgMSAxLjc1MiAyLjAyOGwtMS45Mi43OTJjLS40MzItMS4wNC0xLjMyOC0xLjU2LTIuNjg4LTEuNTYtLjY1NiAwLTEuMjA4LjEzNi0xLjY1Ni40MDgtLjQ0OC4yNzItLjY3Mi42NC0uNjcyIDEuMTA0IDAgLjY3Mi41MiAxLjEyOCAxLjU2IDEuMzY4bDIuMzI4LjU1MmMxLjEwNC4yNTYgMS45Mi42OTYgMi40NDggMS4zMi41MjguNjI0Ljc5MiAxLjMyOC43OTIgMi4xMTIgMCAxLjA1Ni0uNDMyIDEuOTM2LTEuMjk2IDIuNjQtLjg2NC43MDQtMS45NzYgMS4wNTYtMy4zMzYgMS4wNTZ6bTExLjkyOCAwYy0xLjc2IDAtMy4yMDgtLjU5Ni00LjM0NC0xLjc4OC0xLjEzNi0xLjE5Mi0xLjcwNC0yLjY4NC0xLjcwNC00LjQ3NiAwLTEuNzkyLjU2OC0zLjI4NCAxLjcwNC00LjQ3NiAxLjEzNi0xLjE5MiAyLjU4NC0xLjc4OCA0LjM0NC0xLjc4OCAxLjMxMiAwIDIuNC4zMiAzLjI2NC45NmE1LjYyMSA1LjYyMSAwIDAgMSAxLjg5NiAyLjQyNGwtMi4wMTYuODRjLS42MDgtMS40NzItMS43MDQtMi4yMDgtMy4yODgtMi4yMDgtLjk3NiAwLTEuODM2LjQtMi41OCAxLjItLjc0NC44LTEuMTE2IDEuODE2LTEuMTE2IDMuMDQ4cy4zNzIgMi4yNDggMS4xMTYgMy4wNDhjLjc0NC44IDEuNjA0IDEuMiAyLjU4IDEuMiAxLjY0OCAwIDIuNzg0LS43MzYgMy40MDgtMi4yMDhsMS45NjguODRjLS40Ljk2LTEuMDQ0IDEuNzY0LTEuOTMyIDIuNDEyLS44ODguNjQ4LTEuOTg4Ljk3Mi0zLjMuOTcyem05LjM2LS4zODRoLTIuMjA4VjcuMjRoMi4xMTJ2MS45MmguMDk2Yy4yMjQtLjY0LjY4NC0xLjE2OCAxLjM4LTEuNTg0LjY5Ni0uNDE2IDEuMzcyLS42MjQgMi4wMjgtLjYyNC42NTYgMCAxLjIwOC4wOTYgMS42NTYuMjg4bC0uODQgMi4wNjRjLS4yODgtLjExMi0uNjgtLjE2OC0xLjE3Ni0uMTY4LS44IDAtMS41MDguMzE2LTIuMTI0Ljk0OC0uNjE2LjYzMi0uOTI0IDEuNDYtLjkyNCAyLjQ4NFYxOXptOC45MDQtMTQuNzEyYTEuNTA0IDEuNTA0IDAgMCAxLTEuMTA0LjQ1NmMtLjQzMiAwLS44LS4xNTItMS4xMDQtLjQ1NmExLjUwNCAxLjUwNCAwIDAgMS0uNDU2LTEuMTA0YzAtLjQzMi4xNTItLjguNDU2LTEuMTA0YTEuNTA0IDEuNTA0IDAgMCAxIDEuMTA0LS40NTZjLjQzMiAwIC44LjE1MiAxLjEwNC40NTYuMzA0LjMwNC40NTYuNjcyLjQ1NiAxLjEwNCAwIC40MzItLjE1Mi44LS40NTYgMS4xMDR6bTAgMTQuNzEySDczLjhWNy4yNGgyLjIwOFYxOXptOS4wOTYuMzg0Yy0uODk2IDAtMS43LS4xOTItMi40MTItLjU3Ni0uNzEyLS4zODQtMS4yNDQtLjg2NC0xLjU5Ni0xLjQ0SDgxVjE5aC0yLjExMlYxLjgxNmgyLjIwOFY3LjI0TDgxIDguODcyaC4wOTZjLjM1Mi0uNTc2Ljg4NC0xLjA1NiAxLjU5Ni0xLjQ0LjcxMi0uMzg0IDEuNTE2LS41NzYgMi40MTItLjU3NiAxLjUyIDAgMi44MzIuNiAzLjkzNiAxLjggMS4xMDQgMS4yIDEuNjU2IDIuNjg4IDEuNjU2IDQuNDY0IDAgMS43NzYtLjU1MiAzLjI2NC0xLjY1NiA0LjQ2NC0xLjEwNCAxLjItMi40MTYgMS44LTMuOTM2IDEuOHptLS4zNi0yLjAxNmMxLjAyNCAwIDEuOTA0LS4zODggMi42NC0xLjE2NC43MzYtLjc3NiAxLjEwNC0xLjgwNCAxLjEwNC0zLjA4NHMtLjM2OC0yLjMwOC0xLjEwNC0zLjA4NGMtLjczNi0uNzc2LTEuNjE2LTEuMTY0LTIuNjQtMS4xNjQtMS4wNCAwLTEuOTI0LjM4NC0yLjY1MiAxLjE1Mi0uNzI4Ljc2OC0xLjA5MiAxLjgtMS4wOTIgMy4wOTZzLjM2NCAyLjMyOCAxLjA5MiAzLjA5NmMuNzI4Ljc2OCAxLjYxMiAxLjE1MiAyLjY1MiAxLjE1MnptMTMuMjk2IDIuMDE2Yy0xLjc3NiAwLTMuMjItLjU5Mi00LjMzMi0xLjc3Ni0xLjExMi0xLjE4NC0xLjY2OC0yLjY4LTEuNjY4LTQuNDg4IDAtMS43MTIuNTQtMy4xODQgMS42Mi00LjQxNiAxLjA4LTEuMjMyIDIuNDYtMS44NDggNC4xNC0xLjg0OCAxLjc0NCAwIDMuMTQuNTY4IDQuMTg4IDEuNzA0IDEuMDQ4IDEuMTM2IDEuNTcyIDIuNjU2IDEuNTcyIDQuNTZsLS4wMjQuNDA4aC05LjI4OGMuMDY0IDEuMTg0LjQ2IDIuMTIgMS4xODggMi44MDguNzI4LjY4OCAxLjU4IDEuMDMyIDIuNTU2IDEuMDMyIDEuNTg0IDAgMi42NTYtLjY3MiAzLjIxNi0yLjAxNmwxLjk2OC44MTZjLS4zODQuOTEyLTEuMDE2IDEuNjc2LTEuODk2IDIuMjkyLS44OC42MTYtMS45Ni45MjQtMy4yNC45MjR6bTMuMTY4LTcuNjhjLS4wNDgtLjY3Mi0uMzU2LTEuMzEyLS45MjQtMS45Mi0uNTY4LS42MDgtMS40MTItLjkxMi0yLjUzMi0uOTEyLS44MTYgMC0xLjUyNC4yNTYtMi4xMjQuNzY4LS42LjUxMi0xLjAxMiAxLjItMS4yMzYgMi4wNjRoNi44MTZ6TTEyMy43MiAxOWgtMi4yNTZsLTIuOTI4LTkuMDI0TDExNS42MzIgMTlIMTEzLjRsLTMuNzkyLTExLjc2aDIuMzA0bDIuNjE2IDguODhoLjAyNGwyLjkwNC04Ljg4aDIuMjhsMi45MDQgOC44OGguMDI0bDIuNTkyLTguODhoMi4yNTZMMTIzLjcyIDE5em03LjYzMi0xNC43MTJhMS41MDQgMS41MDQgMCAwIDEtMS4xMDQuNDU2Yy0uNDMyIDAtLjgtLjE1Mi0xLjEwNC0uNDU2YTEuNTA0IDEuNTA0IDAgMCAxLS40NTYtMS4xMDRjMC0uNDMyLjE1Mi0uOC40NTYtMS4xMDRhMS41MDQgMS41MDQgMCAwIDEgMS4xMDQtLjQ1NmMuNDMyIDAgLjguMTUyIDEuMTA0LjQ1Ni4zMDQuMzA0LjQ1Ni42NzIuNDU2IDEuMTA0IDAgLjQzMi0uMTUyLjgtLjQ1NiAxLjEwNHptMCAxNC43MTJoLTIuMjA4VjcuMjRoMi4yMDhWMTl6bTcuOTY4LjE5MmMtMS4yMzIgMC0yLjE3Mi0uMzI4LTIuODItLjk4NC0uNjQ4LS42NTYtLjk3Mi0xLjU4NC0uOTcyLTIuNzg0VjkuMjU2aC0yLjA2NFY3LjI0aDIuMDY0di0zLjZoMi4yMDh2My42aDIuODh2Mi4wMTZoLTIuODh2NmMwIDEuMjguNTI4IDEuOTIgMS41ODQgMS45Mi40IDAgLjczNi0uMDY0IDEuMDA4LS4xOTJsLjc2OCAxLjg5NmMtLjQ4LjIwOC0xLjA3Mi4zMTItMS43NzYuMzEyem01LjYxNi0xNy4zNzZWNy4yNGwtLjA5NiAxLjYzMmguMDk2Yy4zMi0uNTYuODI0LTEuMDM2IDEuNTEyLTEuNDI4YTQuMzg5IDQuMzg5IDAgMCAxIDIuMjA4LS41ODhjMS40NTYgMCAyLjU2OC40NDggMy4zMzYgMS4zNDQuNzY4Ljg5NiAxLjE1MiAyLjA5NiAxLjE1MiAzLjZWMTloLTIuMjA4di02Ljg2NGMwLTIuMTc2LS45NjgtMy4yNjQtMi45MDQtMy4yNjQtLjkxMiAwLTEuNjU2LjM2NC0yLjIzMiAxLjA5Mi0uNTc2LjcyOC0uODY0IDEuNTcyLS44NjQgMi41MzJWMTloLTIuMjA4VjEuODE2aDIuMjA4eicgZmlsbD0nJTIzRkZGJy8lM0UlM0MvZyUzRSUzQy9zdmclM0VcXFwiKX0uc3dnLWJ1dHRvbi1saWdodDpob3Zlciwuc3dnLWJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNmOGY4Zjh9LnN3Zy1idXR0b24tbGlnaHQ6Zm9jdXMsLnN3Zy1idXR0b246Zm9jdXN7Ym94LXNoYWRvdzojZThlOGU4fS5zd2ctYnV0dG9uLWxpZ2h0OmFjdGl2ZSwuc3dnLWJ1dHRvbjphY3RpdmV7YmFja2dyb3VuZC1jb2xvcjojZmZmfS5zd2ctYnV0dG9uLWRhcms6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojM2M0MDQzfS5zd2ctYnV0dG9uLWRhcms6Zm9jdXN7Ym94LXNoYWRvdzojMjAyMTI0fS5zd2ctYnV0dG9uLWRhcms6YWN0aXZle2JhY2tncm91bmQtY29sb3I6IzVmNjM2OH0uc3dnLWJ1dHRvbi1saWdodDpsYW5nKGFyKTphZnRlciwuc3dnLWJ1dHRvbjpsYW5nKGFyKTphZnRlcntiYWNrZ3JvdW5kLWltYWdlOnVybChodHRwczovL25ld3MuZ29vZ2xlLmNvbS9zd2cvanMvdjEvaTE4bi9iLWFyLWx0LnN2Zyl9LnN3Zy1idXR0b24tZGFyazpsYW5nKGFyKTphZnRlcntiYWNrZ3JvdW5kLWltYWdlOnVybChodHRwczovL25ld3MuZ29vZ2xlLmNvbS9zd2cvanMvdjEvaTE4bi9iLWFyLWRrLnN2Zyl9LnN3Zy1idXR0b24tbGlnaHQ6bGFuZyhkZSk6YWZ0ZXIsLnN3Zy1idXR0b246bGFuZyhkZSk6YWZ0ZXJ7YmFja2dyb3VuZC1pbWFnZTp1cmwoaHR0cHM6Ly9uZXdzLmdvb2dsZS5jb20vc3dnL2pzL3YxL2kxOG4vYi1kZS1sdC5zdmcpfS5zd2ctYnV0dG9uLWRhcms6bGFuZyhkZSk6YWZ0ZXJ7YmFja2dyb3VuZC1pbWFnZTp1cmwoaHR0cHM6Ly9uZXdzLmdvb2dsZS5jb20vc3dnL2pzL3YxL2kxOG4vYi1kZS1kay5zdmcpfS5zd2ctYnV0dG9uLWxpZ2h0OmxhbmcoZXMpOmFmdGVyLC5zd2ctYnV0dG9uOmxhbmcoZXMpOmFmdGVye2JhY2tncm91bmQtaW1hZ2U6dXJsKGh0dHBzOi8vbmV3cy5nb29nbGUuY29tL3N3Zy9qcy92MS9pMThuL2ItZXMtbHQuc3ZnKX0uc3dnLWJ1dHRvbi1kYXJrOmxhbmcoZXMpOmFmdGVye2JhY2tncm91bmQtaW1hZ2U6dXJsKGh0dHBzOi8vbmV3cy5nb29nbGUuY29tL3N3Zy9qcy92MS9pMThuL2ItZXMtZGsuc3ZnKX0uc3dnLWJ1dHRvbi1saWdodDpsYW5nKGVzLWxhdGFtKTphZnRlciwuc3dnLWJ1dHRvbjpsYW5nKGVzLWxhdGFtKTphZnRlcntiYWNrZ3JvdW5kLWltYWdlOnVybChodHRwczovL25ld3MuZ29vZ2xlLmNvbS9zd2cvanMvdjEvaTE4bi9iLWVzLWxhdGFtLWx0LnN2Zyl9LnN3Zy1idXR0b24tZGFyazpsYW5nKGVzLWxhdGFtKTphZnRlcntiYWNrZ3JvdW5kLWltYWdlOnVybChodHRwczovL25ld3MuZ29vZ2xlLmNvbS9zd2cvanMvdjEvaTE4bi9iLWVzLWxhdGFtLWRrLnN2Zyl9LnN3Zy1idXR0b24tbGlnaHQ6bGFuZyhlcy1sYXRuKTphZnRlciwuc3dnLWJ1dHRvbjpsYW5nKGVzLWxhdG4pOmFmdGVye2JhY2tncm91bmQtaW1hZ2U6dXJsKGh0dHBzOi8vbmV3cy5nb29nbGUuY29tL3N3Zy9qcy92MS9pMThuL2ItZXMtbGF0YW0tbHQuc3ZnKX0uc3dnLWJ1dHRvbi1kYXJrOmxhbmcoZXMtbGF0bik6YWZ0ZXJ7YmFja2dyb3VuZC1pbWFnZTp1cmwoaHR0cHM6Ly9uZXdzLmdvb2dsZS5jb20vc3dnL2pzL3YxL2kxOG4vYi1lcy1sYXRhbS1kay5zdmcpfS5zd2ctYnV0dG9uLWxpZ2h0OmxhbmcoZnIpOmFmdGVyLC5zd2ctYnV0dG9uOmxhbmcoZnIpOmFmdGVye2JhY2tncm91bmQtaW1hZ2U6dXJsKGh0dHBzOi8vbmV3cy5nb29nbGUuY29tL3N3Zy9qcy92MS9pMThuL2ItZnItbHQuc3ZnKX0uc3dnLWJ1dHRvbi1kYXJrOmxhbmcoZnIpOmFmdGVye2JhY2tncm91bmQtaW1hZ2U6dXJsKGh0dHBzOi8vbmV3cy5nb29nbGUuY29tL3N3Zy9qcy92MS9pMThuL2ItZnItZGsuc3ZnKX0uc3dnLWJ1dHRvbi1saWdodDpsYW5nKGhpKTphZnRlciwuc3dnLWJ1dHRvbjpsYW5nKGhpKTphZnRlcntiYWNrZ3JvdW5kLWltYWdlOnVybChodHRwczovL25ld3MuZ29vZ2xlLmNvbS9zd2cvanMvdjEvaTE4bi9iLWhpLWx0LnN2Zyl9LnN3Zy1idXR0b24tZGFyazpsYW5nKGhpKTphZnRlcntiYWNrZ3JvdW5kLWltYWdlOnVybChodHRwczovL25ld3MuZ29vZ2xlLmNvbS9zd2cvanMvdjEvaTE4bi9iLWhpLWRrLnN2Zyl9LnN3Zy1idXR0b24tbGlnaHQ6bGFuZyhpZCk6YWZ0ZXIsLnN3Zy1idXR0b246bGFuZyhpZCk6YWZ0ZXJ7YmFja2dyb3VuZC1pbWFnZTp1cmwoaHR0cHM6Ly9uZXdzLmdvb2dsZS5jb20vc3dnL2pzL3YxL2kxOG4vYi1pZC1sdC5zdmcpfS5zd2ctYnV0dG9uLWRhcms6bGFuZyhpZCk6YWZ0ZXJ7YmFja2dyb3VuZC1pbWFnZTp1cmwoaHR0cHM6Ly9uZXdzLmdvb2dsZS5jb20vc3dnL2pzL3YxL2kxOG4vYi1pZC1kay5zdmcpfS5zd2ctYnV0dG9uLWxpZ2h0OmxhbmcoaXQpOmFmdGVyLC5zd2ctYnV0dG9uOmxhbmcoaXQpOmFmdGVye2JhY2tncm91bmQtaW1hZ2U6dXJsKGh0dHBzOi8vbmV3cy5nb29nbGUuY29tL3N3Zy9qcy92MS9pMThuL2ItaXQtbHQuc3ZnKX0uc3dnLWJ1dHRvbi1kYXJrOmxhbmcoaXQpOmFmdGVye2JhY2tncm91bmQtaW1hZ2U6dXJsKGh0dHBzOi8vbmV3cy5nb29nbGUuY29tL3N3Zy9qcy92MS9pMThuL2ItaXQtZGsuc3ZnKX0uc3dnLWJ1dHRvbi1saWdodDpsYW5nKGpwKTphZnRlciwuc3dnLWJ1dHRvbjpsYW5nKGpwKTphZnRlcntiYWNrZ3JvdW5kLWltYWdlOnVybChodHRwczovL25ld3MuZ29vZ2xlLmNvbS9zd2cvanMvdjEvaTE4bi9iLWpwLWx0LnN2Zyl9LnN3Zy1idXR0b24tZGFyazpsYW5nKGpwKTphZnRlcntiYWNrZ3JvdW5kLWltYWdlOnVybChodHRwczovL25ld3MuZ29vZ2xlLmNvbS9zd2cvanMvdjEvaTE4bi9iLWpwLWRrLnN2Zyl9LnN3Zy1idXR0b24tbGlnaHQ6bGFuZyhrbyk6YWZ0ZXIsLnN3Zy1idXR0b246bGFuZyhrbyk6YWZ0ZXJ7YmFja2dyb3VuZC1pbWFnZTp1cmwoaHR0cHM6Ly9uZXdzLmdvb2dsZS5jb20vc3dnL2pzL3YxL2kxOG4vYi1rby1sdC5zdmcpfS5zd2ctYnV0dG9uLWRhcms6bGFuZyhrbyk6YWZ0ZXJ7YmFja2dyb3VuZC1pbWFnZTp1cmwoaHR0cHM6Ly9uZXdzLmdvb2dsZS5jb20vc3dnL2pzL3YxL2kxOG4vYi1rby1kay5zdmcpfS5zd2ctYnV0dG9uLWxpZ2h0OmxhbmcobXMpOmFmdGVyLC5zd2ctYnV0dG9uOmxhbmcobXMpOmFmdGVye2JhY2tncm91bmQtaW1hZ2U6dXJsKGh0dHBzOi8vbmV3cy5nb29nbGUuY29tL3N3Zy9qcy92MS9pMThuL2ItbXMtbHQuc3ZnKX0uc3dnLWJ1dHRvbi1kYXJrOmxhbmcobXMpOmFmdGVye2JhY2tncm91bmQtaW1hZ2U6dXJsKGh0dHBzOi8vbmV3cy5nb29nbGUuY29tL3N3Zy9qcy92MS9pMThuL2ItbXMtZGsuc3ZnKX0uc3dnLWJ1dHRvbi1saWdodDpsYW5nKG5sKTphZnRlciwuc3dnLWJ1dHRvbjpsYW5nKG5sKTphZnRlcntiYWNrZ3JvdW5kLWltYWdlOnVybChodHRwczovL25ld3MuZ29vZ2xlLmNvbS9zd2cvanMvdjEvaTE4bi9iLW5sLWx0LnN2Zyl9LnN3Zy1idXR0b24tZGFyazpsYW5nKG5sKTphZnRlcntiYWNrZ3JvdW5kLWltYWdlOnVybChodHRwczovL25ld3MuZ29vZ2xlLmNvbS9zd2cvanMvdjEvaTE4bi9iLW5sLWRrLnN2Zyl9LnN3Zy1idXR0b24tbGlnaHQ6bGFuZyhwbCk6YWZ0ZXIsLnN3Zy1idXR0b246bGFuZyhwbCk6YWZ0ZXJ7YmFja2dyb3VuZC1pbWFnZTp1cmwoaHR0cHM6Ly9uZXdzLmdvb2dsZS5jb20vc3dnL2pzL3YxL2kxOG4vYi1wbC1sdC5zdmcpfS5zd2ctYnV0dG9uLWRhcms6bGFuZyhwbCk6YWZ0ZXJ7YmFja2dyb3VuZC1pbWFnZTp1cmwoaHR0cHM6Ly9uZXdzLmdvb2dsZS5jb20vc3dnL2pzL3YxL2kxOG4vYi1wbC1kay5zdmcpfS5zd2ctYnV0dG9uLWxpZ2h0OmxhbmcocHQpOmFmdGVyLC5zd2ctYnV0dG9uOmxhbmcocHQpOmFmdGVye2JhY2tncm91bmQtaW1hZ2U6dXJsKGh0dHBzOi8vbmV3cy5nb29nbGUuY29tL3N3Zy9qcy92MS9pMThuL2ItcHQtbHQuc3ZnKX0uc3dnLWJ1dHRvbi1kYXJrOmxhbmcocHQpOmFmdGVye2JhY2tncm91bmQtaW1hZ2U6dXJsKGh0dHBzOi8vbmV3cy5nb29nbGUuY29tL3N3Zy9qcy92MS9pMThuL2ItcHQtZGsuc3ZnKX0uc3dnLWJ1dHRvbi1saWdodDpsYW5nKHB0LWJyKTphZnRlciwuc3dnLWJ1dHRvbjpsYW5nKHB0LWJyKTphZnRlcntiYWNrZ3JvdW5kLWltYWdlOnVybChodHRwczovL25ld3MuZ29vZ2xlLmNvbS9zd2cvanMvdjEvaTE4bi9iLXB0LWJyLWx0LnN2Zyl9LnN3Zy1idXR0b24tZGFyazpsYW5nKHB0LWJyKTphZnRlcntiYWNrZ3JvdW5kLWltYWdlOnVybChodHRwczovL25ld3MuZ29vZ2xlLmNvbS9zd2cvanMvdjEvaTE4bi9iLXB0LWJyLWRrLnN2Zyl9LnN3Zy1idXR0b24tbGlnaHQ6bGFuZyhydSk6YWZ0ZXIsLnN3Zy1idXR0b246bGFuZyhydSk6YWZ0ZXJ7YmFja2dyb3VuZC1pbWFnZTp1cmwoaHR0cHM6Ly9uZXdzLmdvb2dsZS5jb20vc3dnL2pzL3YxL2kxOG4vYi1ydS1sdC5zdmcpfS5zd2ctYnV0dG9uLWRhcms6bGFuZyhydSk6YWZ0ZXJ7YmFja2dyb3VuZC1pbWFnZTp1cmwoaHR0cHM6Ly9uZXdzLmdvb2dsZS5jb20vc3dnL2pzL3YxL2kxOG4vYi1ydS1kay5zdmcpfS5zd2ctYnV0dG9uLWxpZ2h0Omxhbmcoc2UpOmFmdGVyLC5zd2ctYnV0dG9uOmxhbmcoc2UpOmFmdGVye2JhY2tncm91bmQtaW1hZ2U6dXJsKGh0dHBzOi8vbmV3cy5nb29nbGUuY29tL3N3Zy9qcy92MS9pMThuL2Itc2UtbHQuc3ZnKX0uc3dnLWJ1dHRvbi1kYXJrOmxhbmcoc2UpOmFmdGVye2JhY2tncm91bmQtaW1hZ2U6dXJsKGh0dHBzOi8vbmV3cy5nb29nbGUuY29tL3N3Zy9qcy92MS9pMThuL2Itc2UtZGsuc3ZnKX0uc3dnLWJ1dHRvbi1saWdodDpsYW5nKHRoKTphZnRlciwuc3dnLWJ1dHRvbjpsYW5nKHRoKTphZnRlcntiYWNrZ3JvdW5kLWltYWdlOnVybChodHRwczovL25ld3MuZ29vZ2xlLmNvbS9zd2cvanMvdjEvaTE4bi9iLXRoLWx0LnN2Zyl9LnN3Zy1idXR0b24tZGFyazpsYW5nKHRoKTphZnRlcntiYWNrZ3JvdW5kLWltYWdlOnVybChodHRwczovL25ld3MuZ29vZ2xlLmNvbS9zd2cvanMvdjEvaTE4bi9iLXRoLWRrLnN2Zyl9LnN3Zy1idXR0b24tbGlnaHQ6bGFuZyh0cik6YWZ0ZXIsLnN3Zy1idXR0b246bGFuZyh0cik6YWZ0ZXJ7YmFja2dyb3VuZC1pbWFnZTp1cmwoaHR0cHM6Ly9uZXdzLmdvb2dsZS5jb20vc3dnL2pzL3YxL2kxOG4vYi10ci1sdC5zdmcpfS5zd2ctYnV0dG9uLWRhcms6bGFuZyh0cik6YWZ0ZXJ7YmFja2dyb3VuZC1pbWFnZTp1cmwoaHR0cHM6Ly9uZXdzLmdvb2dsZS5jb20vc3dnL2pzL3YxL2kxOG4vYi10ci1kay5zdmcpfS5zd2ctYnV0dG9uLWxpZ2h0OmxhbmcodWspOmFmdGVyLC5zd2ctYnV0dG9uOmxhbmcodWspOmFmdGVye2JhY2tncm91bmQtaW1hZ2U6dXJsKGh0dHBzOi8vbmV3cy5nb29nbGUuY29tL3N3Zy9qcy92MS9pMThuL2ItdWstbHQuc3ZnKX0uc3dnLWJ1dHRvbi1kYXJrOmxhbmcodWspOmFmdGVye2JhY2tncm91bmQtaW1hZ2U6dXJsKGh0dHBzOi8vbmV3cy5nb29nbGUuY29tL3N3Zy9qcy92MS9pMThuL2ItdWstZGsuc3ZnKX0uc3dnLWJ1dHRvbi1saWdodDpsYW5nKHpoLXR3KTphZnRlciwuc3dnLWJ1dHRvbjpsYW5nKHpoLXR3KTphZnRlcntiYWNrZ3JvdW5kLWltYWdlOnVybChodHRwczovL25ld3MuZ29vZ2xlLmNvbS9zd2cvanMvdjEvaTE4bi9iLXpoLXR3LWx0LnN2Zyl9LnN3Zy1idXR0b24tZGFyazpsYW5nKHpoLXR3KTphZnRlcntiYWNrZ3JvdW5kLWltYWdlOnVybChodHRwczovL25ld3MuZ29vZ2xlLmNvbS9zd2cvanMvdjEvaTE4bi9iLXpoLXR3LWRrLnN2Zyl9XFxuLyojIHNvdXJjZVVSTD0vZXh0ZW5zaW9ucy9hbXAtc3Vic2NyaXB0aW9ucy1nb29nbGUvMC4xL2FtcC1zdWJzY3JpcHRpb25zLWdvb2dsZS5jc3MqL1wiO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Q1NTfSBmcm9tICcuLi8uLi8uLi9idWlsZC9hbXAtc3Vic2NyaXB0aW9ucy1nb29nbGUtMC4xLmNzcyc7XG5pbXBvcnQge1xuICBDb25maWd1cmVkUnVudGltZSxcbiAgRmV0Y2hlcixcbiAgU3Vic2NyaWJlUmVzcG9uc2UsXG59IGZyb20gJy4uLy4uLy4uL3RoaXJkX3BhcnR5L3N1YnNjcmlwdGlvbnMtcHJvamVjdC9zd2cnO1xuaW1wb3J0IHtEb2NJbXBsfSBmcm9tICcuLi8uLi9hbXAtc3Vic2NyaXB0aW9ucy8wLjEvZG9jLWltcGwnO1xuaW1wb3J0IHtFbnRpdGxlbWVudCwgR3JhbnRSZWFzb259IGZyb20gJy4uLy4uL2FtcC1zdWJzY3JpcHRpb25zLzAuMS9lbnRpdGxlbWVudCc7XG5pbXBvcnQge1BhZ2VDb25maWd9IGZyb20gJy4uLy4uLy4uL3RoaXJkX3BhcnR5L3N1YnNjcmlwdGlvbnMtcHJvamVjdC9jb25maWcnO1xuaW1wb3J0IHtTZXJ2aWNlc30gZnJvbSAnLi4vLi4vLi4vc3JjL3NlcnZpY2VzJztcbmltcG9ydCB7aW5zdGFsbFN0eWxlc0ZvckRvY30gZnJvbSAnLi4vLi4vLi4vc3JjL3N0eWxlLWluc3RhbGxlcic7XG5pbXBvcnQge3BhcnNlVXJsRGVwcmVjYXRlZH0gZnJvbSAnLi4vLi4vLi4vc3JjL3VybCc7XG5cbmNvbnN0IFRBRyA9ICdhbXAtc3Vic2NyaXB0aW9ucy1nb29nbGUnO1xuY29uc3QgUExBVEZPUk1fSUQgPSAnc3Vic2NyaWJlLmdvb2dsZS5jb20nO1xuY29uc3QgR09PR0xFX0RPTUFJTl9SRSA9IC8oXnxcXC4pZ29vZ2xlXFwuKGNvbT98W2Etel17Mn18Y29tP1xcLlthLXpdezJ9fGNhdCkkLztcblxuXG4vKipcbiAqL1xuZXhwb3J0IGNsYXNzIEdvb2dsZVN1YnNjcmlwdGlvbnNQbGF0Zm9ybVNlcnZpY2Uge1xuICAvKipcbiAgICogQHBhcmFtIHshLi4vLi4vLi4vc3JjL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBhbXBkb2NcbiAgICovXG4gIGNvbnN0cnVjdG9yKGFtcGRvYykge1xuICAgIC8qKiBAcHJpdmF0ZSB7IS4uLy4uLy4uL3NyYy9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gKi9cbiAgICB0aGlzLmFtcGRvY18gPSBhbXBkb2M7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshSnNvbk9iamVjdH0gcGxhdGZvcm1Db25maWdcbiAgICogQHBhcmFtIHshLi4vLi4vYW1wLXN1YnNjcmlwdGlvbnMvMC4xL3NlcnZpY2UtYWRhcHRlci5TZXJ2aWNlQWRhcHRlcn0gc2VydmljZUFkYXB0ZXJcbiAgICogQHJldHVybiB7IUdvb2dsZVN1YnNjcmlwdGlvbnNQbGF0Zm9ybX1cbiAgICovXG4gIGNyZWF0ZVBsYXRmb3JtKHBsYXRmb3JtQ29uZmlnLCBzZXJ2aWNlQWRhcHRlcikge1xuICAgIHJldHVybiBuZXcgR29vZ2xlU3Vic2NyaXB0aW9uc1BsYXRmb3JtKHRoaXMuYW1wZG9jXyxcbiAgICAgICAgcGxhdGZvcm1Db25maWcsIHNlcnZpY2VBZGFwdGVyKTtcbiAgfVxufVxuXG5cbi8qKlxuICogQGltcGxlbWVudHMgey4uLy4uL2FtcC1zdWJzY3JpcHRpb25zLzAuMS9zdWJzY3JpcHRpb24tcGxhdGZvcm0uU3Vic2NyaXB0aW9uUGxhdGZvcm19XG4gKi9cbmV4cG9ydCBjbGFzcyBHb29nbGVTdWJzY3JpcHRpb25zUGxhdGZvcm0ge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuLi8uLi8uLi9zcmMvc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGFtcGRvY1xuICAgKiBAcGFyYW0geyFKc29uT2JqZWN0fSBwbGF0Zm9ybUNvbmZpZ1xuICAgKiBAcGFyYW0geyEuLi8uLi9hbXAtc3Vic2NyaXB0aW9ucy8wLjEvc2VydmljZS1hZGFwdGVyLlNlcnZpY2VBZGFwdGVyfSBzZXJ2aWNlQWRhcHRlclxuICAgKi9cbiAgY29uc3RydWN0b3IoYW1wZG9jLCBwbGF0Zm9ybUNvbmZpZywgc2VydmljZUFkYXB0ZXIpIHtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZSBAY29uc3RcbiAgICAgKiB7IS4uLy4uL2FtcC1zdWJzY3JpcHRpb25zLzAuMS9zZXJ2aWNlLWFkYXB0ZXIuU2VydmljZUFkYXB0ZXJ9XG4gICAgICovXG4gICAgdGhpcy5zZXJ2aWNlQWRhcHRlcl8gPSBzZXJ2aWNlQWRhcHRlcjtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshQ29uZmlndXJlZFJ1bnRpbWV9ICovXG4gICAgdGhpcy5ydW50aW1lXyA9IG5ldyBDb25maWd1cmVkUnVudGltZShcbiAgICAgICAgbmV3IERvY0ltcGwoYW1wZG9jKSxcbiAgICAgICAgc2VydmljZUFkYXB0ZXIuZ2V0UGFnZUNvbmZpZygpLFxuICAgICAgICB7XG4gICAgICAgICAgZmV0Y2hlcjogbmV3IEFtcEZldGNoZXIoYW1wZG9jLndpbiksXG4gICAgICAgIH1cbiAgICApO1xuICAgIHRoaXMucnVudGltZV8uc2V0T25Mb2dpblJlcXVlc3QocmVxdWVzdCA9PiB7XG4gICAgICB0aGlzLm9uTG9naW5SZXF1ZXN0XyhyZXF1ZXN0ICYmIHJlcXVlc3QubGlua1JlcXVlc3RlZCk7XG4gICAgfSk7XG4gICAgdGhpcy5ydW50aW1lXy5zZXRPbkxpbmtDb21wbGV0ZSgoKSA9PiB7XG4gICAgICB0aGlzLm9uTGlua0NvbXBsZXRlXygpO1xuICAgIH0pO1xuICAgIHRoaXMucnVudGltZV8uc2V0T25OYXRpdmVTdWJzY3JpYmVSZXF1ZXN0KCgpID0+IHtcbiAgICAgIHRoaXMub25OYXRpdmVTdWJzY3JpYmVSZXF1ZXN0XygpO1xuICAgIH0pO1xuICAgIHRoaXMucnVudGltZV8uc2V0T25TdWJzY3JpYmVSZXNwb25zZShwcm9taXNlID0+IHtcbiAgICAgIHByb21pc2UudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgIHRoaXMub25TdWJzY3JpYmVSZXNwb25zZV8ocmVzcG9uc2UpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvKiogQGNvbnN0IEBwcml2YXRlIHshSnNvbk9iamVjdH0gKi9cbiAgICB0aGlzLnNlcnZpY2VDb25maWdfID0gcGxhdGZvcm1Db25maWc7XG5cbiAgICAvKiogQHByaXZhdGUge2Jvb2xlYW59ICovXG4gICAgdGhpcy5pc0dvb2dsZVZpZXdlcl8gPSBmYWxzZTtcbiAgICB0aGlzLnJlc29sdmVHb29nbGVWaWV3ZXJfKFNlcnZpY2VzLnZpZXdlckZvckRvYyhhbXBkb2MpKTtcblxuICAgIC8vIEluc3RhbGwgc3R5bGVzLlxuICAgIGluc3RhbGxTdHlsZXNGb3JEb2MoYW1wZG9jLCBDU1MsICgpID0+IHt9LCBmYWxzZSwgVEFHKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGxpbmtSZXF1ZXN0ZWRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIG9uTG9naW5SZXF1ZXN0XyhsaW5rUmVxdWVzdGVkKSB7XG4gICAgaWYgKGxpbmtSZXF1ZXN0ZWQgJiYgdGhpcy5pc0dvb2dsZVZpZXdlcl8pIHtcbiAgICAgIHRoaXMucnVudGltZV8ubGlua0FjY291bnQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tYXliZUNvbXBsZXRlXyh0aGlzLnNlcnZpY2VBZGFwdGVyXy5kZWxlZ2F0ZUFjdGlvblRvTG9jYWwoXG4gICAgICAgICAgJ2xvZ2luJykpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAcHJpdmF0ZSAqL1xuICBvbkxpbmtDb21wbGV0ZV8oKSB7XG4gICAgdGhpcy5ydW50aW1lXy5yZXNldCgpO1xuICAgIHRoaXMuc2VydmljZUFkYXB0ZXJfLnJlQXV0aG9yaXplUGxhdGZvcm0odGhpcyk7XG4gIH1cblxuICAvKiogQHByaXZhdGUgKi9cbiAgb25OYXRpdmVTdWJzY3JpYmVSZXF1ZXN0XygpIHtcbiAgICB0aGlzLm1heWJlQ29tcGxldGVfKHRoaXMuc2VydmljZUFkYXB0ZXJfLmRlbGVnYXRlQWN0aW9uVG9Mb2NhbChcbiAgICAgICAgJ3N1YnNjcmliZScpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFQcm9taXNlPGJvb2xlYW4+fSBwcm9taXNlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBtYXliZUNvbXBsZXRlXyhwcm9taXNlKSB7XG4gICAgcHJvbWlzZS50aGVuKHJlc3VsdCA9PiB7XG4gICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgIHRoaXMucnVudGltZV8ucmVzZXQoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFTdWJzY3JpYmVSZXNwb25zZX0gcmVzcG9uc2VcbiAgICogQHByaXZhdGVcbiAgICovXG4gIG9uU3Vic2NyaWJlUmVzcG9uc2VfKHJlc3BvbnNlKSB7XG4gICAgcmVzcG9uc2UuY29tcGxldGUoKS50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMucnVudGltZV8ucmVzZXQoKTtcbiAgICAgIHRoaXMuc2VydmljZUFkYXB0ZXJfLnJlQXV0aG9yaXplUGxhdGZvcm0odGhpcyk7XG4gICAgfSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldEVudGl0bGVtZW50cygpIHtcbiAgICByZXR1cm4gdGhpcy5ydW50aW1lXy5nZXRFbnRpdGxlbWVudHMoKS50aGVuKHN3Z0VudGl0bGVtZW50cyA9PiB7XG4gICAgICBjb25zdCBzd2dFbnRpdGxlbWVudCA9IHN3Z0VudGl0bGVtZW50cy5nZXRFbnRpdGxlbWVudEZvclRoaXMoKTtcbiAgICAgIGlmICghc3dnRW50aXRsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBzd2dFbnRpdGxlbWVudHMuYWNrKCk7XG4gICAgICByZXR1cm4gbmV3IEVudGl0bGVtZW50KHtcbiAgICAgICAgc291cmNlOiBzd2dFbnRpdGxlbWVudC5zb3VyY2UsXG4gICAgICAgIHJhdzogc3dnRW50aXRsZW1lbnRzLnJhdyxcbiAgICAgICAgc2VydmljZTogUExBVEZPUk1fSUQsXG4gICAgICAgIGdyYW50ZWQ6IHRydWUsIC8vc3dnRW50aXRsZW1lbnRzLmdldEVudGl0bGVtZW50Rm9yVGhpcyBtYWtlcyBzdXJlIHRoaXMgaXMgdHJ1ZS5cbiAgICAgICAgZ3JhbnRSZWFzb246IEdyYW50UmVhc29uLlNVQlNDUklCRVIsIC8vIHRoZXJlIGlzIG5vIG90aGVyIGNhc2Ugb2Ygc3Vic2NyaXB0aW9uIGZvciBTV0cgYXMgb2Ygbm93LlxuICAgICAgICBkYXRhT2JqZWN0OiBzd2dFbnRpdGxlbWVudC5qc29uKCksXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0U2VydmljZUlkKCkge1xuICAgIHJldHVybiBQTEFURk9STV9JRDtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYWN0aXZhdGUoZW50aXRsZW1lbnQpIHtcbiAgICAvLyBPZmZlcnMgb3IgYWJicmV2aWF0ZWQgb2ZmZXJzIG1heSBuZWVkIHRvIGJlIHNob3duIGRlcGVuZGluZyBvblxuICAgIC8vIHdoZXRoZXIgdGhlIGFjY2VzcyBoYXMgYmVlbiBncmFudGVkIGFuZCB3aGV0aGVyIHVzZXIgaXMgYSBzdWJzY3JpYmVyLlxuICAgIGlmICghZW50aXRsZW1lbnQuZ3JhbnRlZCkge1xuICAgICAgdGhpcy5ydW50aW1lXy5zaG93T2ZmZXJzKHtsaXN0OiAnYW1wJ30pO1xuICAgIH0gZWxzZSBpZiAoIWVudGl0bGVtZW50LmlzU3Vic2NyaWJlcigpKSB7XG4gICAgICB0aGlzLnJ1bnRpbWVfLnNob3dBYmJydk9mZmVyKHtsaXN0OiAnYW1wJ30pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGlmIHBpbmdiYWNrIGlzIGVuYWJsZWQgZm9yIHRoaXMgcGxhdGZvcm1cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzUGluZ2JhY2tFbmFibGVkKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtcyB0aGUgcGluZ2JhY2sgdG8gdGhlIHN1YnNjcmlwdGlvbiBwbGF0Zm9ybVxuICAgKi9cbiAgcGluZ2JhY2soKSB7fVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc3VwcG9ydHNDdXJyZW50Vmlld2VyKCkge1xuICAgIHJldHVybiB0aGlzLmlzR29vZ2xlVmlld2VyXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuLi8uLi8uLi9zcmMvc2VydmljZS92aWV3ZXItaW1wbC5WaWV3ZXJ9IHZpZXdlclxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcmVzb2x2ZUdvb2dsZVZpZXdlcl8odmlld2VyKSB7XG4gICAgLy8gVGhpcyBpcyBhIHZlcnkgbGlnaHQgdmVpd2VyIHJlc29sdXRpb24gc2luY2UgdGhlcmUncyBubyByZWFsIHNlY3VyaXR5XG4gICAgLy8gaW1wbGljYXRpb24gLSB0aGlzIG9ubHkgYWZmZWN0cyBvbi1wbGF0Zm9ybSBwcmVmZXJlbmNlcy5cbiAgICBjb25zdCB2aWV3ZXJVcmwgPSB2aWV3ZXIuZ2V0UGFyYW0oJ3ZpZXdlclVybCcpO1xuICAgIGlmICh2aWV3ZXJVcmwpIHtcbiAgICAgIHRoaXMuaXNHb29nbGVWaWV3ZXJfID0gR09PR0xFX0RPTUFJTl9SRS50ZXN0KFxuICAgICAgICAgIHBhcnNlVXJsRGVwcmVjYXRlZCh2aWV3ZXJVcmwpLmhvc3RuYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVGhpcyBjYW4gb25seSBiZSByZXNvbHZlZCBhc3luY2hyb25vdXNseSBpbiB0aGlzIGNhc2UuIEhvd2V2ZXIsIHRoZVxuICAgICAgLy8gYWN0aW9uIGV4ZWN1dGlvbiBtdXN0IGJlIGRvbmUgc3luY2hyb25vdXNseS4gVGh1cyB3ZSBoYXZlIHRvIGFsbG93XG4gICAgICAvLyBhIG1pbmltYWwgcmFjZSBjb25kaXRpb24gaGVyZS5cbiAgICAgIHZpZXdlci5nZXRWaWV3ZXJPcmlnaW4oKS50aGVuKG9yaWdpbiA9PiB7XG4gICAgICAgIGlmIChvcmlnaW4pIHtcbiAgICAgICAgICB0aGlzLmlzR29vZ2xlVmlld2VyXyA9IEdPT0dMRV9ET01BSU5fUkUudGVzdChcbiAgICAgICAgICAgICAgcGFyc2VVcmxEZXByZWNhdGVkKG9yaWdpbikuaG9zdG5hbWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldEJhc2VTY29yZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zZXJ2aWNlQ29uZmlnX1snYmFzZVNjb3JlJ10gfHwgMDtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZXhlY3V0ZUFjdGlvbihhY3Rpb24pIHtcbiAgICBpZiAoYWN0aW9uID09PSAnc3Vic2NyaWJlJykge1xuICAgICAgdGhpcy5ydW50aW1lXy5zaG93T2ZmZXJzKHtsaXN0OiAnYW1wJywgaXNDbG9zYWJsZTogdHJ1ZX0pO1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0cnVlKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGRlY29yYXRlVUkoZWxlbWVudCwgYWN0aW9uLCBvcHRpb25zKSB7XG4gICAgaWYgKGFjdGlvbiA9PT0gJ3N1YnNjcmliZScpIHtcbiAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcbiAgICAgIHRoaXMucnVudGltZV8uYXR0YWNoQnV0dG9uKGVsZW1lbnQsIG9wdGlvbnMsICgpID0+IHt9KTtcbiAgICB9XG4gIH1cbn1cblxuXG4vKipcbiAqIEFkb3B0cyBmZXRjaGVyIHByb3RvY29sIHJlcXVpcmVkIGZvciBTd0cgdG8gQU1QIGZldGNoaW5nIHJ1bGVzLlxuICogQGltcGxlbWVudHMge0ZldGNoZXJ9XG4gKi9cbmNsYXNzIEFtcEZldGNoZXIge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKi9cbiAgY29uc3RydWN0b3Iod2luKSB7XG4gICAgLyoqIEBjb25zdCBAcHJpdmF0ZSB7IS4uLy4uLy4uL3NyYy9zZXJ2aWNlL3hoci1pbXBsLlhocn0gKi9cbiAgICB0aGlzLnhocl8gPSBTZXJ2aWNlcy54aHJGb3Iod2luKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZmV0Y2hDcmVkZW50aWFsZWRKc29uKHVybCkge1xuICAgIHJldHVybiB0aGlzLnhocl8uZmV0Y2hKc29uKHVybCwge1xuICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyxcbiAgICB9KS50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSk7XG4gIH1cbn1cblxuXG4vLyBSZWdpc3RlciB0aGUgZXh0ZW5zaW9uIHNlcnZpY2VzLlxuQU1QLmV4dGVuc2lvbihUQUcsICcwLjEnLCBmdW5jdGlvbihBTVApIHtcbiAgQU1QLnJlZ2lzdGVyU2VydmljZUZvckRvYygnc3Vic2NyaXB0aW9ucy1nb29nbGUnLCBhbXBkb2MgPT4ge1xuICAgIGNvbnN0IHBsYXRmb3JtU2VydmljZSA9IG5ldyBHb29nbGVTdWJzY3JpcHRpb25zUGxhdGZvcm1TZXJ2aWNlKGFtcGRvYyk7XG4gICAgU2VydmljZXMuc3Vic2NyaXB0aW9uc1NlcnZpY2VGb3JEb2MoYW1wZG9jKS50aGVuKHNlcnZpY2UgPT4ge1xuICAgICAgc2VydmljZS5yZWdpc3RlclBsYXRmb3JtKFBMQVRGT1JNX0lELFxuICAgICAgICAgIChwbGF0Zm9ybUNvbmZpZywgc2VydmljZUFkYXB0ZXIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBwbGF0Zm9ybVNlcnZpY2UuY3JlYXRlUGxhdGZvcm0ocGxhdGZvcm1Db25maWcsXG4gICAgICAgICAgICAgICAgc2VydmljZUFkYXB0ZXIpO1xuICAgICAgICAgIH1cbiAgICAgICk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHBsYXRmb3JtU2VydmljZTtcbiAgfSk7XG59KTtcblxuXG4vKipcbiAqIFRPRE8oZHZveXRlbmtvKTogcmVtb3ZlIG9uY2UgY29tcGlsZXIgdHlwZSBjaGVja2luZyBpcyBmaXhlZCBmb3IgdGhpcmRfcGFydHkuXG4gKiBAcGFja2FnZSBAdmlzaWJsZUZvclRlc3RpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZldGNoZXJDbGFzc0ZvclRlc3RpbmcoKSB7XG4gIHJldHVybiBGZXRjaGVyO1xufVxuXG4vKipcbiAqIFRPRE8oZHZveXRlbmtvKTogcmVtb3ZlIG9uY2UgY29tcGlsZXIgdHlwZSBjaGVja2luZyBpcyBmaXhlZCBmb3IgdGhpcmRfcGFydHkuXG4gKiBAcGFja2FnZSBAdmlzaWJsZUZvclRlc3RpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFBhZ2VDb25maWdDbGFzc0ZvclRlc3RpbmcoKSB7XG4gIHJldHVybiBQYWdlQ29uZmlnO1xufVxuXG4vKipcbiAqIFRPRE8oZHZveXRlbmtvKTogcmVtb3ZlIG9uY2UgY29tcGlsZXIgdHlwZSBjaGVja2luZyBpcyBmaXhlZCBmb3IgdGhpcmRfcGFydHkuXG4gKiBAcGFja2FnZSBAdmlzaWJsZUZvclRlc3RpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFN1YnNjcmliZVJlc3BvbnNlQ2xhc3NGb3JUZXN0aW5nKCkge1xuICByZXR1cm4gU3Vic2NyaWJlUmVzcG9uc2U7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtEb2N9IGZyb20gJy4uLy4uLy4uL3RoaXJkX3BhcnR5L3N1YnNjcmlwdGlvbnMtcHJvamVjdC9jb25maWcnO1xuaW1wb3J0IHtkZXZ9IGZyb20gJy4uLy4uLy4uL3NyYy9sb2cnO1xuXG5cbi8qKlxuICogQWRvcHRzIGNvbmZpZyBkb2N1bWVudCB0byBhbXBkb2MuXG4gKiBAaW1wbGVtZW50cyB7RG9jfVxuICovXG5leHBvcnQgY2xhc3MgRG9jSW1wbCB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4uLy4uLy4uL3NyYy9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gYW1wZG9jXG4gICAqL1xuICBjb25zdHJ1Y3RvcihhbXBkb2MpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vLi4vLi4vc3JjL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSAqL1xuICAgIHRoaXMuYW1wZG9jXyA9IGFtcGRvYztcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0V2luKCkge1xuICAgIHJldHVybiB0aGlzLmFtcGRvY18ud2luO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXRSb290Tm9kZSgpIHtcbiAgICByZXR1cm4gdGhpcy5hbXBkb2NfLmdldFJvb3ROb2RlKCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldFJvb3RFbGVtZW50KCkge1xuICAgIGNvbnN0IHJvb3QgPSB0aGlzLmFtcGRvY18uZ2V0Um9vdE5vZGUoKTtcbiAgICByZXR1cm4gZGV2KCkuYXNzZXJ0RWxlbWVudChyb290LmRvY3VtZW50RWxlbWVudCB8fCByb290LmJvZHkgfHwgcm9vdCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldEhlYWQoKSB7XG4gICAgcmV0dXJuIGRldigpLmFzc2VydEVsZW1lbnQodGhpcy5hbXBkb2NfLmdldEhlYWROb2RlKCkpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXRCb2R5KCkge1xuICAgIHJldHVybiB0aGlzLmFtcGRvY18uaXNCb2R5QXZhaWxhYmxlKCkgPyB0aGlzLmFtcGRvY18uZ2V0Qm9keSgpIDogbnVsbDtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgaXNSZWFkeSgpIHtcbiAgICByZXR1cm4gdGhpcy5hbXBkb2NfLmlzUmVhZHkoKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgd2hlblJlYWR5KCkge1xuICAgIHJldHVybiB0aGlzLmFtcGRvY18ud2hlblJlYWR5KCk7XG4gIH1cbn1cblxuXG4vKiogQHBhY2thZ2UgVmlzaWJsZSBmb3IgdGVzdGluZyBvbmx5LiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERvY0NsYXNzRm9yVGVzdGluZygpIHtcbiAgcmV0dXJuIERvYztcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHtkaWN0fSBmcm9tICcuLi8uLi8uLi9zcmMvdXRpbHMvb2JqZWN0JztcblxuLyoqIEBlbnVtIHtzdHJpbmd9ICovXG5leHBvcnQgY29uc3QgR3JhbnRSZWFzb24gPSB7XG4gICdTVUJTQ1JJQkVSJzogJ1NVQlNDUklCRVInLFxuICAnTUVURVJJTkcnOiAnTUVURVJJTkcnLFxufTtcblxuLyoqXG4gKiBUaGUgc2luZ2xlIGVudGl0bGVtZW50IG9iamVjdC5cbiAqL1xuZXhwb3J0IGNsYXNzIEVudGl0bGVtZW50IHtcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNlcnZpY2VcbiAgICogQHJldHVybiB7IUVudGl0bGVtZW50fVxuICAgKi9cbiAgc3RhdGljIGVtcHR5KHNlcnZpY2UpIHtcbiAgICByZXR1cm4gbmV3IEVudGl0bGVtZW50KHtcbiAgICAgIHNvdXJjZTogJycsXG4gICAgICByYXc6ICcnLFxuICAgICAgc2VydmljZSxcbiAgICAgIGdyYW50ZWQ6IGZhbHNlLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dFxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2lucHV0LnNvdXJjZV1cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtpbnB1dC5yYXddXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbaW5wdXQuc2VydmljZV1cbiAgICogQHBhcmFtIHtib29sZWFufSBbaW5wdXQuZ3JhbnRlZF1cbiAgICogQHBhcmFtIHs/R3JhbnRSZWFzb259IFtpbnB1dC5ncmFudFJlYXNvbl1cbiAgICogQHBhcmFtIHs/SnNvbk9iamVjdH0gW2lucHV0LmRhdGFPYmplY3RdXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih7c291cmNlLCByYXcgPSAnJywgc2VydmljZSwgZ3JhbnRlZCA9IGZhbHNlLFxuICAgIGdyYW50UmVhc29uID0gJycsIGRhdGFPYmplY3R9KSB7XG4gICAgLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMucmF3ID0gcmF3O1xuICAgIC8qKiBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAvKioge3N0cmluZ30gKi9cbiAgICB0aGlzLnNlcnZpY2UgPSBzZXJ2aWNlO1xuICAgIC8qKiBAY29uc3Qge2Jvb2xlYW59ICovXG4gICAgdGhpcy5ncmFudGVkID0gZ3JhbnRlZDtcbiAgICAvKiogQGNvbnN0IHs/c3RyaW5nfSAqL1xuICAgIHRoaXMuZ3JhbnRSZWFzb24gPSBncmFudFJlYXNvbjtcbiAgICAvKiogQGNvbnN0IHs/SnNvbk9iamVjdH0gKi9cbiAgICB0aGlzLmRhdGEgPSBkYXRhT2JqZWN0O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMganNvbiBmb3JtYXQgb2YgZW50aXRsZW1lbnRzXG4gICAqIEByZXR1cm4geyFKc29uT2JqZWN0fVxuICAgKi9cbiAganNvbigpIHtcbiAgICBjb25zdCBlbnRpdGxlbWVudEpzb24gPSBkaWN0KHtcbiAgICAgICdzb3VyY2UnOiB0aGlzLnNvdXJjZSxcbiAgICAgICdzZXJ2aWNlJzogdGhpcy5zZXJ2aWNlLFxuICAgICAgJ2dyYW50ZWQnOiB0aGlzLmdyYW50ZWQsXG4gICAgICAnZ3JhbnRSZWFzb24nOiB0aGlzLmdyYW50UmVhc29uLFxuICAgICAgJ2RhdGEnOiB0aGlzLmRhdGEsXG4gICAgfSk7XG4gICAgcmV0dXJuIChlbnRpdGxlbWVudEpzb24pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMganNvbiB0byBiZSB1c2VkIGZvciBwaW5nYmFjay5cbiAgICpcbiAgICogQHJldHVybiB7IUpzb25PYmplY3R9XG4gICAqL1xuICBqc29uRm9yUGluZ2JhY2soKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IUpzb25PYmplY3R9ICovIChPYmplY3QuYXNzaWduKHt9LFxuICAgICAgICB7J3Jhdyc6IHRoaXMucmF3fSxcbiAgICAgICAgdGhpcy5qc29uKCkpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0gez9Kc29uT2JqZWN0fSBqc29uXG4gICAqIEBwYXJhbSB7P3N0cmluZ30gcmF3RGF0YVxuICAgKiBAcmV0dXJuIHshRW50aXRsZW1lbnR9XG4gICAqL1xuICBzdGF0aWMgcGFyc2VGcm9tSnNvbihqc29uLCByYXdEYXRhID0gbnVsbCkge1xuICAgIGlmICghanNvbikge1xuICAgICAganNvbiA9IGRpY3QoKTtcbiAgICB9XG4gICAgY29uc3QgcmF3ID0gcmF3RGF0YSB8fCBKU09OLnN0cmluZ2lmeShqc29uKTtcbiAgICBjb25zdCBzb3VyY2UgPSBqc29uWydzb3VyY2UnXSB8fCAnJztcbiAgICBjb25zdCBncmFudGVkID0ganNvblsnZ3JhbnRlZCddIHx8IGZhbHNlO1xuICAgIGNvbnN0IGdyYW50UmVhc29uID0ganNvblsnZ3JhbnRSZWFzb24nXTtcbiAgICBjb25zdCBkYXRhT2JqZWN0ID0ganNvblsnZGF0YSddIHx8IG51bGw7XG4gICAgcmV0dXJuIG5ldyBFbnRpdGxlbWVudCh7c291cmNlLCByYXcsIHNlcnZpY2U6ICcnLFxuICAgICAgZ3JhbnRlZCwgZ3JhbnRSZWFzb24sIGRhdGFPYmplY3R9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGlmIHRoZSB1c2VyIGlzIGEgc3Vic2NyaWJlci5cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzU3Vic2NyaWJlcigpIHtcbiAgICByZXR1cm4gdGhpcy5ncmFudGVkICYmIHRoaXMuZ3JhbnRSZWFzb24gPT09IEdyYW50UmVhc29uLlNVQlNDUklCRVI7XG4gIH1cbn1cbiIsIi8qIVxuXG5Db3B5cmlnaHQgKEMpIDIwMTQtMjAxNiBieSBBbmRyZWEgR2lhbW1hcmNoaSAtIEBXZWJSZWZsZWN0aW9uXG5cblBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbm9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbmluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbnRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbmNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbmFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG5JTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbkZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbk9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cblRIRSBTT0ZUV0FSRS5cblxuKi9cbi8vIGdsb2JhbCB3aW5kb3cgT2JqZWN0XG4vLyBvcHRpb25hbCBwb2x5ZmlsbCBpbmZvXG4vLyAgICAnYXV0bycgdXNlZCBieSBkZWZhdWx0LCBldmVyeXRoaW5nIGlzIGZlYXR1cmUgZGV0ZWN0ZWRcbi8vICAgICdmb3JjZScgdXNlIHRoZSBwb2x5ZmlsbCBldmVuIGlmIG5vdCBmdWxseSBuZWVkZWRcbmZ1bmN0aW9uIGluc3RhbGxDdXN0b21FbGVtZW50cyh3aW5kb3csIHBvbHlmaWxsKSB7J3VzZSBzdHJpY3QnO1xuXG4gIC8vIERPIE5PVCBVU0UgVEhJUyBGSUxFIERJUkVDVExZLCBJVCBXT04nVCBXT1JLXG4gIC8vIFRISVMgSVMgQSBQUk9KRUNUIEJBU0VEIE9OIEEgQlVJTEQgU1lTVEVNXG4gIC8vIFRISVMgRklMRSBJUyBKVVNUIFdSQVBQRUQgVVAgUkVTVUxUSU5HIElOXG4gIC8vIGJ1aWxkL2RvY3VtZW50LXJlZ2lzdGVyLWVsZW1lbnQubm9kZS5qc1xuXG4gIHZhclxuICAgIGRvY3VtZW50ID0gd2luZG93LmRvY3VtZW50LFxuICAgIE9iamVjdCA9IHdpbmRvdy5PYmplY3RcbiAgO1xuXG4gIHZhciBodG1sQ2xhc3MgPSAoZnVuY3Rpb24gKGluZm8pIHtcbiAgICAvLyAoQykgQW5kcmVhIEdpYW1tYXJjaGkgLSBAV2ViUmVmbGVjdGlvbiAtIE1JVCBTdHlsZVxuICAgIHZhclxuICAgICAgY2F0Y2hDbGFzcyA9IC9eW0EtWl0rW2Etel0vLFxuICAgICAgZmlsdGVyQnkgPSBmdW5jdGlvbiAocmUpIHtcbiAgICAgICAgdmFyIGFyciA9IFtdLCB0YWc7XG4gICAgICAgIGZvciAodGFnIGluIHJlZ2lzdGVyKSB7XG4gICAgICAgICAgaWYgKHJlLnRlc3QodGFnKSkgYXJyLnB1c2godGFnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJyO1xuICAgICAgfSxcbiAgICAgIGFkZCA9IGZ1bmN0aW9uIChDbGFzcywgdGFnKSB7XG4gICAgICAgIHRhZyA9IHRhZy50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBpZiAoISh0YWcgaW4gcmVnaXN0ZXIpKSB7XG4gICAgICAgICAgcmVnaXN0ZXJbQ2xhc3NdID0gKHJlZ2lzdGVyW0NsYXNzXSB8fCBbXSkuY29uY2F0KHRhZyk7XG4gICAgICAgICAgcmVnaXN0ZXJbdGFnXSA9IChyZWdpc3Rlclt0YWcudG9VcHBlckNhc2UoKV0gPSBDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICByZWdpc3RlciA9IChPYmplY3QuY3JlYXRlIHx8IE9iamVjdCkobnVsbCksXG4gICAgICBodG1sQ2xhc3MgPSB7fSxcbiAgICAgIGksIHNlY3Rpb24sIHRhZ3MsIENsYXNzXG4gICAgO1xuICAgIGZvciAoc2VjdGlvbiBpbiBpbmZvKSB7XG4gICAgICBmb3IgKENsYXNzIGluIGluZm9bc2VjdGlvbl0pIHtcbiAgICAgICAgdGFncyA9IGluZm9bc2VjdGlvbl1bQ2xhc3NdO1xuICAgICAgICByZWdpc3RlcltDbGFzc10gPSB0YWdzO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGFncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHJlZ2lzdGVyW3RhZ3NbaV0udG9Mb3dlckNhc2UoKV0gPVxuICAgICAgICAgIHJlZ2lzdGVyW3RhZ3NbaV0udG9VcHBlckNhc2UoKV0gPSBDbGFzcztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBodG1sQ2xhc3MuZ2V0ID0gZnVuY3Rpb24gZ2V0KHRhZ09yQ2xhc3MpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgdGFnT3JDbGFzcyA9PT0gJ3N0cmluZycgP1xuICAgICAgICAocmVnaXN0ZXJbdGFnT3JDbGFzc10gfHwgKGNhdGNoQ2xhc3MudGVzdCh0YWdPckNsYXNzKSA/IFtdIDogJycpKSA6XG4gICAgICAgIGZpbHRlckJ5KHRhZ09yQ2xhc3MpO1xuICAgIH07XG4gICAgaHRtbENsYXNzLnNldCA9IGZ1bmN0aW9uIHNldCh0YWcsIENsYXNzKSB7XG4gICAgICByZXR1cm4gKGNhdGNoQ2xhc3MudGVzdCh0YWcpID9cbiAgICAgICAgYWRkKHRhZywgQ2xhc3MpIDpcbiAgICAgICAgYWRkKENsYXNzLCB0YWcpXG4gICAgICApLCBodG1sQ2xhc3M7XG4gICAgfTtcbiAgICByZXR1cm4gaHRtbENsYXNzO1xuICB9KHtcbiAgICBcImNvbGxlY3Rpb25zXCI6IHtcbiAgICAgIFwiSFRNTEFsbENvbGxlY3Rpb25cIjogW1xuICAgICAgICBcImFsbFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MQ29sbGVjdGlvblwiOiBbXG4gICAgICAgIFwiZm9ybXNcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEZvcm1Db250cm9sc0NvbGxlY3Rpb25cIjogW1xuICAgICAgICBcImVsZW1lbnRzXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxPcHRpb25zQ29sbGVjdGlvblwiOiBbXG4gICAgICAgIFwib3B0aW9uc1wiXG4gICAgICBdXG4gICAgfSxcbiAgICBcImVsZW1lbnRzXCI6IHtcbiAgICAgIFwiRWxlbWVudFwiOiBbXG4gICAgICAgIFwiZWxlbWVudFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MQW5jaG9yRWxlbWVudFwiOiBbXG4gICAgICAgIFwiYVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MQXBwbGV0RWxlbWVudFwiOiBbXG4gICAgICAgIFwiYXBwbGV0XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxBcmVhRWxlbWVudFwiOiBbXG4gICAgICAgIFwiYXJlYVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MQXR0YWNobWVudEVsZW1lbnRcIjogW1xuICAgICAgICBcImF0dGFjaG1lbnRcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEF1ZGlvRWxlbWVudFwiOiBbXG4gICAgICAgIFwiYXVkaW9cIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEJSRWxlbWVudFwiOiBbXG4gICAgICAgIFwiYnJcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEJhc2VFbGVtZW50XCI6IFtcbiAgICAgICAgXCJiYXNlXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxCb2R5RWxlbWVudFwiOiBbXG4gICAgICAgIFwiYm9keVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MQnV0dG9uRWxlbWVudFwiOiBbXG4gICAgICAgIFwiYnV0dG9uXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxDYW52YXNFbGVtZW50XCI6IFtcbiAgICAgICAgXCJjYW52YXNcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTENvbnRlbnRFbGVtZW50XCI6IFtcbiAgICAgICAgXCJjb250ZW50XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxETGlzdEVsZW1lbnRcIjogW1xuICAgICAgICBcImRsXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxEYXRhRWxlbWVudFwiOiBbXG4gICAgICAgIFwiZGF0YVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRGF0YUxpc3RFbGVtZW50XCI6IFtcbiAgICAgICAgXCJkYXRhbGlzdFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRGV0YWlsc0VsZW1lbnRcIjogW1xuICAgICAgICBcImRldGFpbHNcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTERpYWxvZ0VsZW1lbnRcIjogW1xuICAgICAgICBcImRpYWxvZ1wiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRGlyZWN0b3J5RWxlbWVudFwiOiBbXG4gICAgICAgIFwiZGlyXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxEaXZFbGVtZW50XCI6IFtcbiAgICAgICAgXCJkaXZcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTERvY3VtZW50XCI6IFtcbiAgICAgICAgXCJkb2N1bWVudFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRWxlbWVudFwiOiBbXG4gICAgICAgIFwiZWxlbWVudFwiLFxuICAgICAgICBcImFiYnJcIixcbiAgICAgICAgXCJhZGRyZXNzXCIsXG4gICAgICAgIFwiYXJ0aWNsZVwiLFxuICAgICAgICBcImFzaWRlXCIsXG4gICAgICAgIFwiYlwiLFxuICAgICAgICBcImJkaVwiLFxuICAgICAgICBcImJkb1wiLFxuICAgICAgICBcImNpdGVcIixcbiAgICAgICAgXCJjb2RlXCIsXG4gICAgICAgIFwiY29tbWFuZFwiLFxuICAgICAgICBcImRkXCIsXG4gICAgICAgIFwiZGZuXCIsXG4gICAgICAgIFwiZHRcIixcbiAgICAgICAgXCJlbVwiLFxuICAgICAgICBcImZpZ2NhcHRpb25cIixcbiAgICAgICAgXCJmaWd1cmVcIixcbiAgICAgICAgXCJmb290ZXJcIixcbiAgICAgICAgXCJoZWFkZXJcIixcbiAgICAgICAgXCJpXCIsXG4gICAgICAgIFwia2JkXCIsXG4gICAgICAgIFwibWFya1wiLFxuICAgICAgICBcIm5hdlwiLFxuICAgICAgICBcIm5vc2NyaXB0XCIsXG4gICAgICAgIFwicnBcIixcbiAgICAgICAgXCJydFwiLFxuICAgICAgICBcInJ1YnlcIixcbiAgICAgICAgXCJzXCIsXG4gICAgICAgIFwic2FtcFwiLFxuICAgICAgICBcInNlY3Rpb25cIixcbiAgICAgICAgXCJzbWFsbFwiLFxuICAgICAgICBcInN0cm9uZ1wiLFxuICAgICAgICBcInN1YlwiLFxuICAgICAgICBcInN1bW1hcnlcIixcbiAgICAgICAgXCJzdXBcIixcbiAgICAgICAgXCJ1XCIsXG4gICAgICAgIFwidmFyXCIsXG4gICAgICAgIFwid2JyXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxFbWJlZEVsZW1lbnRcIjogW1xuICAgICAgICBcImVtYmVkXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxGaWVsZFNldEVsZW1lbnRcIjogW1xuICAgICAgICBcImZpZWxkc2V0XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxGb250RWxlbWVudFwiOiBbXG4gICAgICAgIFwiZm9udFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRm9ybUVsZW1lbnRcIjogW1xuICAgICAgICBcImZvcm1cIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEZyYW1lRWxlbWVudFwiOiBbXG4gICAgICAgIFwiZnJhbWVcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEZyYW1lU2V0RWxlbWVudFwiOiBbXG4gICAgICAgIFwiZnJhbWVzZXRcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEhSRWxlbWVudFwiOiBbXG4gICAgICAgIFwiaHJcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEhlYWRFbGVtZW50XCI6IFtcbiAgICAgICAgXCJoZWFkXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxIZWFkaW5nRWxlbWVudFwiOiBbXG4gICAgICAgIFwiaDFcIixcbiAgICAgICAgXCJoMlwiLFxuICAgICAgICBcImgzXCIsXG4gICAgICAgIFwiaDRcIixcbiAgICAgICAgXCJoNVwiLFxuICAgICAgICBcImg2XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxIdG1sRWxlbWVudFwiOiBbXG4gICAgICAgIFwiaHRtbFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MSUZyYW1lRWxlbWVudFwiOiBbXG4gICAgICAgIFwiaWZyYW1lXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxJbWFnZUVsZW1lbnRcIjogW1xuICAgICAgICBcImltZ1wiXG4gICAgICBdLFxuICAgICAgXCJIVE1MSW5wdXRFbGVtZW50XCI6IFtcbiAgICAgICAgXCJpbnB1dFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MS2V5Z2VuRWxlbWVudFwiOiBbXG4gICAgICAgIFwia2V5Z2VuXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxMSUVsZW1lbnRcIjogW1xuICAgICAgICBcImxpXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxMYWJlbEVsZW1lbnRcIjogW1xuICAgICAgICBcImxhYmVsXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxMZWdlbmRFbGVtZW50XCI6IFtcbiAgICAgICAgXCJsZWdlbmRcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTExpbmtFbGVtZW50XCI6IFtcbiAgICAgICAgXCJsaW5rXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxNYXBFbGVtZW50XCI6IFtcbiAgICAgICAgXCJtYXBcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTE1hcnF1ZWVFbGVtZW50XCI6IFtcbiAgICAgICAgXCJtYXJxdWVlXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxNZWRpYUVsZW1lbnRcIjogW1xuICAgICAgICBcIm1lZGlhXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxNZW51RWxlbWVudFwiOiBbXG4gICAgICAgIFwibWVudVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MTWVudUl0ZW1FbGVtZW50XCI6IFtcbiAgICAgICAgXCJtZW51aXRlbVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MTWV0YUVsZW1lbnRcIjogW1xuICAgICAgICBcIm1ldGFcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTE1ldGVyRWxlbWVudFwiOiBbXG4gICAgICAgIFwibWV0ZXJcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTE1vZEVsZW1lbnRcIjogW1xuICAgICAgICBcImRlbFwiLFxuICAgICAgICBcImluc1wiXG4gICAgICBdLFxuICAgICAgXCJIVE1MT0xpc3RFbGVtZW50XCI6IFtcbiAgICAgICAgXCJvbFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MT2JqZWN0RWxlbWVudFwiOiBbXG4gICAgICAgIFwib2JqZWN0XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxPcHRHcm91cEVsZW1lbnRcIjogW1xuICAgICAgICBcIm9wdGdyb3VwXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxPcHRpb25FbGVtZW50XCI6IFtcbiAgICAgICAgXCJvcHRpb25cIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTE91dHB1dEVsZW1lbnRcIjogW1xuICAgICAgICBcIm91dHB1dFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MUGFyYWdyYXBoRWxlbWVudFwiOiBbXG4gICAgICAgIFwicFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MUGFyYW1FbGVtZW50XCI6IFtcbiAgICAgICAgXCJwYXJhbVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MUGljdHVyZUVsZW1lbnRcIjogW1xuICAgICAgICBcInBpY3R1cmVcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTFByZUVsZW1lbnRcIjogW1xuICAgICAgICBcInByZVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MUHJvZ3Jlc3NFbGVtZW50XCI6IFtcbiAgICAgICAgXCJwcm9ncmVzc1wiXG4gICAgICBdLFxuICAgICAgXCJIVE1MUXVvdGVFbGVtZW50XCI6IFtcbiAgICAgICAgXCJibG9ja3F1b3RlXCIsXG4gICAgICAgIFwicVwiLFxuICAgICAgICBcInF1b3RlXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxTY3JpcHRFbGVtZW50XCI6IFtcbiAgICAgICAgXCJzY3JpcHRcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTFNlbGVjdEVsZW1lbnRcIjogW1xuICAgICAgICBcInNlbGVjdFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MU2hhZG93RWxlbWVudFwiOiBbXG4gICAgICAgIFwic2hhZG93XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxTbG90RWxlbWVudFwiOiBbXG4gICAgICAgIFwic2xvdFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MU291cmNlRWxlbWVudFwiOiBbXG4gICAgICAgIFwic291cmNlXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxTcGFuRWxlbWVudFwiOiBbXG4gICAgICAgIFwic3BhblwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MU3R5bGVFbGVtZW50XCI6IFtcbiAgICAgICAgXCJzdHlsZVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVGFibGVDYXB0aW9uRWxlbWVudFwiOiBbXG4gICAgICAgIFwiY2FwdGlvblwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVGFibGVDZWxsRWxlbWVudFwiOiBbXG4gICAgICAgIFwidGRcIixcbiAgICAgICAgXCJ0aFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVGFibGVDb2xFbGVtZW50XCI6IFtcbiAgICAgICAgXCJjb2xcIixcbiAgICAgICAgXCJjb2xncm91cFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVGFibGVFbGVtZW50XCI6IFtcbiAgICAgICAgXCJ0YWJsZVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVGFibGVSb3dFbGVtZW50XCI6IFtcbiAgICAgICAgXCJ0clwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVGFibGVTZWN0aW9uRWxlbWVudFwiOiBbXG4gICAgICAgIFwidGhlYWRcIixcbiAgICAgICAgXCJ0Ym9keVwiLFxuICAgICAgICBcInRmb290XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUZW1wbGF0ZUVsZW1lbnRcIjogW1xuICAgICAgICBcInRlbXBsYXRlXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUZXh0QXJlYUVsZW1lbnRcIjogW1xuICAgICAgICBcInRleHRhcmVhXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUaW1lRWxlbWVudFwiOiBbXG4gICAgICAgIFwidGltZVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVGl0bGVFbGVtZW50XCI6IFtcbiAgICAgICAgXCJ0aXRsZVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVHJhY2tFbGVtZW50XCI6IFtcbiAgICAgICAgXCJ0cmFja1wiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVUxpc3RFbGVtZW50XCI6IFtcbiAgICAgICAgXCJ1bFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVW5rbm93bkVsZW1lbnRcIjogW1xuICAgICAgICBcInVua25vd25cIixcbiAgICAgICAgXCJ2aGdyb3VwdlwiLFxuICAgICAgICBcInZrZXlnZW5cIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTFZpZGVvRWxlbWVudFwiOiBbXG4gICAgICAgIFwidmlkZW9cIlxuICAgICAgXVxuICAgIH0sXG4gICAgXCJub2Rlc1wiOiB7XG4gICAgICBcIkF0dHJcIjogW1xuICAgICAgICBcIm5vZGVcIlxuICAgICAgXSxcbiAgICAgIFwiQXVkaW9cIjogW1xuICAgICAgICBcImF1ZGlvXCJcbiAgICAgIF0sXG4gICAgICBcIkNEQVRBU2VjdGlvblwiOiBbXG4gICAgICAgIFwibm9kZVwiXG4gICAgICBdLFxuICAgICAgXCJDaGFyYWN0ZXJEYXRhXCI6IFtcbiAgICAgICAgXCJub2RlXCJcbiAgICAgIF0sXG4gICAgICBcIkNvbW1lbnRcIjogW1xuICAgICAgICBcIiNjb21tZW50XCJcbiAgICAgIF0sXG4gICAgICBcIkRvY3VtZW50XCI6IFtcbiAgICAgICAgXCIjZG9jdW1lbnRcIlxuICAgICAgXSxcbiAgICAgIFwiRG9jdW1lbnRGcmFnbWVudFwiOiBbXG4gICAgICAgIFwiI2RvY3VtZW50LWZyYWdtZW50XCJcbiAgICAgIF0sXG4gICAgICBcIkRvY3VtZW50VHlwZVwiOiBbXG4gICAgICAgIFwibm9kZVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRG9jdW1lbnRcIjogW1xuICAgICAgICBcIiNkb2N1bWVudFwiXG4gICAgICBdLFxuICAgICAgXCJJbWFnZVwiOiBbXG4gICAgICAgIFwiaW1nXCJcbiAgICAgIF0sXG4gICAgICBcIk9wdGlvblwiOiBbXG4gICAgICAgIFwib3B0aW9uXCJcbiAgICAgIF0sXG4gICAgICBcIlByb2Nlc3NpbmdJbnN0cnVjdGlvblwiOiBbXG4gICAgICAgIFwibm9kZVwiXG4gICAgICBdLFxuICAgICAgXCJTaGFkb3dSb290XCI6IFtcbiAgICAgICAgXCIjc2hhZG93LXJvb3RcIlxuICAgICAgXSxcbiAgICAgIFwiVGV4dFwiOiBbXG4gICAgICAgIFwiI3RleHRcIlxuICAgICAgXSxcbiAgICAgIFwiWE1MRG9jdW1lbnRcIjogW1xuICAgICAgICBcInhtbFwiXG4gICAgICBdXG4gICAgfVxuICB9KSk7XG4gIFxuICBcbiAgICBcbiAgLy8gcGFzc2VkIGF0IHJ1bnRpbWUsIGNvbmZpZ3VyYWJsZVxuICAvLyB2aWEgbm9kZWpzIG1vZHVsZVxuICBpZiAoIXBvbHlmaWxsKSBwb2x5ZmlsbCA9ICdhdXRvJztcbiAgXG4gIHZhclxuICAgIC8vIFYwIHBvbHlmaWxsIGVudHJ5XG4gICAgUkVHSVNURVJfRUxFTUVOVCA9ICdyZWdpc3RlckVsZW1lbnQnLFxuICBcbiAgICAvLyBJRSA8IDExIG9ubHkgKyBvbGQgV2ViS2l0IGZvciBhdHRyaWJ1dGVzICsgZmVhdHVyZSBkZXRlY3Rpb25cbiAgICBFWFBBTkRPX1VJRCA9ICdfXycgKyBSRUdJU1RFUl9FTEVNRU5UICsgKHdpbmRvdy5NYXRoLnJhbmRvbSgpICogMTBlNCA+PiAwKSxcbiAgXG4gICAgLy8gc2hvcnRjdXRzIGFuZCBjb3N0YW50c1xuICAgIEFERF9FVkVOVF9MSVNURU5FUiA9ICdhZGRFdmVudExpc3RlbmVyJyxcbiAgICBBVFRBQ0hFRCA9ICdhdHRhY2hlZCcsXG4gICAgQ0FMTEJBQ0sgPSAnQ2FsbGJhY2snLFxuICAgIERFVEFDSEVEID0gJ2RldGFjaGVkJyxcbiAgICBFWFRFTkRTID0gJ2V4dGVuZHMnLFxuICBcbiAgICBBVFRSSUJVVEVfQ0hBTkdFRF9DQUxMQkFDSyA9ICdhdHRyaWJ1dGVDaGFuZ2VkJyArIENBTExCQUNLLFxuICAgIEFUVEFDSEVEX0NBTExCQUNLID0gQVRUQUNIRUQgKyBDQUxMQkFDSyxcbiAgICBDT05ORUNURURfQ0FMTEJBQ0sgPSAnY29ubmVjdGVkJyArIENBTExCQUNLLFxuICAgIERJU0NPTk5FQ1RFRF9DQUxMQkFDSyA9ICdkaXNjb25uZWN0ZWQnICsgQ0FMTEJBQ0ssXG4gICAgQ1JFQVRFRF9DQUxMQkFDSyA9ICdjcmVhdGVkJyArIENBTExCQUNLLFxuICAgIERFVEFDSEVEX0NBTExCQUNLID0gREVUQUNIRUQgKyBDQUxMQkFDSyxcbiAgXG4gICAgQURESVRJT04gPSAnQURESVRJT04nLFxuICAgIE1PRElGSUNBVElPTiA9ICdNT0RJRklDQVRJT04nLFxuICAgIFJFTU9WQUwgPSAnUkVNT1ZBTCcsXG4gIFxuICAgIERPTV9BVFRSX01PRElGSUVEID0gJ0RPTUF0dHJNb2RpZmllZCcsXG4gICAgRE9NX0NPTlRFTlRfTE9BREVEID0gJ0RPTUNvbnRlbnRMb2FkZWQnLFxuICAgIERPTV9TVUJUUkVFX01PRElGSUVEID0gJ0RPTVN1YnRyZWVNb2RpZmllZCcsXG4gIFxuICAgIFBSRUZJWF9UQUcgPSAnPCcsXG4gICAgUFJFRklYX0lTID0gJz0nLFxuICBcbiAgICAvLyB2YWxpZCBhbmQgaW52YWxpZCBub2RlIG5hbWVzXG4gICAgdmFsaWROYW1lID0gL15bQS1aXVtBLVowLTldKig/Oi1bQS1aMC05XSspKyQvLFxuICAgIGludmFsaWROYW1lcyA9IFtcbiAgICAgICdBTk5PVEFUSU9OLVhNTCcsXG4gICAgICAnQ09MT1ItUFJPRklMRScsXG4gICAgICAnRk9OVC1GQUNFJyxcbiAgICAgICdGT05ULUZBQ0UtU1JDJyxcbiAgICAgICdGT05ULUZBQ0UtVVJJJyxcbiAgICAgICdGT05ULUZBQ0UtRk9STUFUJyxcbiAgICAgICdGT05ULUZBQ0UtTkFNRScsXG4gICAgICAnTUlTU0lORy1HTFlQSCdcbiAgICBdLFxuICBcbiAgICAvLyByZWdpc3RlcmVkIHR5cGVzIGFuZCB0aGVpciBwcm90b3R5cGVzXG4gICAgdHlwZXMgPSBbXSxcbiAgICBwcm90b3MgPSBbXSxcbiAgXG4gICAgLy8gdG8gcXVlcnkgc3Vibm9kZXNcbiAgICBxdWVyeSA9ICcnLFxuICBcbiAgICAvLyBodG1sIHNob3J0Y3V0IHVzZWQgdG8gZmVhdHVyZSBkZXRlY3RcbiAgICBkb2N1bWVudEVsZW1lbnQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsXG4gIFxuICAgIC8vIEVTNSBpbmxpbmUgaGVscGVycyB8fCBiYXNpYyBwYXRjaGVzXG4gICAgaW5kZXhPZiA9IHR5cGVzLmluZGV4T2YgfHwgZnVuY3Rpb24gKHYpIHtcbiAgICAgIGZvcih2YXIgaSA9IHRoaXMubGVuZ3RoOyBpLS0gJiYgdGhpc1tpXSAhPT0gdjspe31cbiAgICAgIHJldHVybiBpO1xuICAgIH0sXG4gIFxuICAgIC8vIG90aGVyIGhlbHBlcnMgLyBzaG9ydGN1dHNcbiAgICBPUCA9IE9iamVjdC5wcm90b3R5cGUsXG4gICAgaE9QID0gT1AuaGFzT3duUHJvcGVydHksXG4gICAgaVBPID0gT1AuaXNQcm90b3R5cGVPZixcbiAgXG4gICAgZGVmaW5lUHJvcGVydHkgPSBPYmplY3QuZGVmaW5lUHJvcGVydHksXG4gICAgZW1wdHkgPSBbXSxcbiAgICBnT1BEID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcixcbiAgICBnT1BOID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMsXG4gICAgZ1BPID0gT2JqZWN0LmdldFByb3RvdHlwZU9mLFxuICAgIHNQTyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZixcbiAgXG4gICAgLy8ganNoaW50IHByb3RvOiB0cnVlXG4gICAgaGFzUHJvdG8gPSAhIU9iamVjdC5fX3Byb3RvX18sXG4gIFxuICAgIC8vIFYxIGhlbHBlcnNcbiAgICBmaXhHZXRDbGFzcyA9IGZhbHNlLFxuICAgIERSRUNFVjEgPSAnX19kcmVDRXYxJyxcbiAgICBjdXN0b21FbGVtZW50cyA9IHdpbmRvdy5jdXN0b21FbGVtZW50cyxcbiAgICB1c2FibGVDdXN0b21FbGVtZW50cyA9IHBvbHlmaWxsICE9PSAnZm9yY2UnICYmICEhKFxuICAgICAgY3VzdG9tRWxlbWVudHMgJiZcbiAgICAgIGN1c3RvbUVsZW1lbnRzLmRlZmluZSAmJlxuICAgICAgY3VzdG9tRWxlbWVudHMuZ2V0ICYmXG4gICAgICBjdXN0b21FbGVtZW50cy53aGVuRGVmaW5lZFxuICAgICksXG4gICAgRGljdCA9IE9iamVjdC5jcmVhdGUgfHwgT2JqZWN0LFxuICAgIE1hcCA9IHdpbmRvdy5NYXAgfHwgZnVuY3Rpb24gTWFwKCkge1xuICAgICAgdmFyIEsgPSBbXSwgViA9IFtdLCBpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoaykge1xuICAgICAgICAgIHJldHVybiBWW2luZGV4T2YuY2FsbChLLCBrKV07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKGssIHYpIHtcbiAgICAgICAgICBpID0gaW5kZXhPZi5jYWxsKEssIGspO1xuICAgICAgICAgIGlmIChpIDwgMCkgVltLLnB1c2goaykgLSAxXSA9IHY7XG4gICAgICAgICAgZWxzZSBWW2ldID0gdjtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9LFxuICAgIFByb21pc2UgPSB3aW5kb3cuUHJvbWlzZSB8fCBmdW5jdGlvbiAoZm4pIHtcbiAgICAgIHZhclxuICAgICAgICBub3RpZnkgPSBbXSxcbiAgICAgICAgZG9uZSA9IGZhbHNlLFxuICAgICAgICBwID0ge1xuICAgICAgICAgICdjYXRjaCc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBwO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgJ3RoZW4nOiBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgIG5vdGlmeS5wdXNoKGNiKTtcbiAgICAgICAgICAgIGlmIChkb25lKSBzZXRUaW1lb3V0KHJlc29sdmUsIDEpO1xuICAgICAgICAgICAgcmV0dXJuIHA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICA7XG4gICAgICBmdW5jdGlvbiByZXNvbHZlKHZhbHVlKSB7XG4gICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgICB3aGlsZSAobm90aWZ5Lmxlbmd0aCkgbm90aWZ5LnNoaWZ0KCkodmFsdWUpO1xuICAgICAgfVxuICAgICAgZm4ocmVzb2x2ZSk7XG4gICAgICByZXR1cm4gcDtcbiAgICB9LFxuICAgIGp1c3RDcmVhdGVkID0gZmFsc2UsXG4gICAgY29uc3RydWN0b3JzID0gRGljdChudWxsKSxcbiAgICB3YWl0aW5nTGlzdCA9IERpY3QobnVsbCksXG4gICAgbm9kZU5hbWVzID0gbmV3IE1hcCgpLFxuICAgIHNlY29uZEFyZ3VtZW50ID0gZnVuY3Rpb24gKGlzKSB7XG4gICAgICByZXR1cm4gaXMudG9Mb3dlckNhc2UoKTtcbiAgICB9LFxuICBcbiAgICAvLyB1c2VkIHRvIGNyZWF0ZSB1bmlxdWUgaW5zdGFuY2VzXG4gICAgY3JlYXRlID0gT2JqZWN0LmNyZWF0ZSB8fCBmdW5jdGlvbiBCcmlkZ2UocHJvdG8pIHtcbiAgICAgIC8vIHNpbGx5IGJyb2tlbiBwb2x5ZmlsbCBwcm9iYWJseSBldmVyIHVzZWQgYnV0IHNob3J0IGVub3VnaCB0byB3b3JrXG4gICAgICByZXR1cm4gcHJvdG8gPyAoKEJyaWRnZS5wcm90b3R5cGUgPSBwcm90byksIG5ldyBCcmlkZ2UoKSkgOiB0aGlzO1xuICAgIH0sXG4gIFxuICAgIC8vIHdpbGwgc2V0IHRoZSBwcm90b3R5cGUgaWYgcG9zc2libGVcbiAgICAvLyBvciBjb3B5IG92ZXIgYWxsIHByb3BlcnRpZXNcbiAgICBzZXRQcm90b3R5cGUgPSBzUE8gfHwgKFxuICAgICAgaGFzUHJvdG8gP1xuICAgICAgICBmdW5jdGlvbiAobywgcCkge1xuICAgICAgICAgIG8uX19wcm90b19fID0gcDtcbiAgICAgICAgICByZXR1cm4gbztcbiAgICAgICAgfSA6IChcbiAgICAgIChnT1BOICYmIGdPUEQpID9cbiAgICAgICAgKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgZnVuY3Rpb24gc2V0UHJvcGVydGllcyhvLCBwKSB7XG4gICAgICAgICAgICBmb3IgKHZhclxuICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgIG5hbWVzID0gZ09QTihwKSxcbiAgICAgICAgICAgICAgaSA9IDAsIGxlbmd0aCA9IG5hbWVzLmxlbmd0aDtcbiAgICAgICAgICAgICAgaSA8IGxlbmd0aDsgaSsrXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAga2V5ID0gbmFtZXNbaV07XG4gICAgICAgICAgICAgIGlmICghaE9QLmNhbGwobywga2V5KSkge1xuICAgICAgICAgICAgICAgIGRlZmluZVByb3BlcnR5KG8sIGtleSwgZ09QRChwLCBrZXkpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG8sIHApIHtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgc2V0UHJvcGVydGllcyhvLCBwKTtcbiAgICAgICAgICAgIH0gd2hpbGUgKChwID0gZ1BPKHApKSAmJiAhaVBPLmNhbGwocCwgbykpO1xuICAgICAgICAgICAgcmV0dXJuIG87XG4gICAgICAgICAgfTtcbiAgICAgICAgfSgpKSA6XG4gICAgICAgIGZ1bmN0aW9uIChvLCBwKSB7XG4gICAgICAgICAgZm9yICh2YXIga2V5IGluIHApIHtcbiAgICAgICAgICAgIG9ba2V5XSA9IHBba2V5XTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG87XG4gICAgICAgIH1cbiAgICApKSxcbiAgXG4gICAgLy8gRE9NIHNob3J0Y3V0cyBhbmQgaGVscGVycywgaWYgYW55XG4gIFxuICAgIE11dGF0aW9uT2JzZXJ2ZXIgPSB3aW5kb3cuTXV0YXRpb25PYnNlcnZlciB8fFxuICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuV2ViS2l0TXV0YXRpb25PYnNlcnZlcixcbiAgXG4gICAgSFRNTEVsZW1lbnRQcm90b3R5cGUgPSAoXG4gICAgICB3aW5kb3cuSFRNTEVsZW1lbnQgfHxcbiAgICAgIHdpbmRvdy5FbGVtZW50IHx8XG4gICAgICB3aW5kb3cuTm9kZVxuICAgICkucHJvdG90eXBlLFxuICBcbiAgICBJRTggPSAhaVBPLmNhbGwoSFRNTEVsZW1lbnRQcm90b3R5cGUsIGRvY3VtZW50RWxlbWVudCksXG4gIFxuICAgIHNhZmVQcm9wZXJ0eSA9IElFOCA/IGZ1bmN0aW9uIChvLCBrLCBkKSB7XG4gICAgICBvW2tdID0gZC52YWx1ZTtcbiAgICAgIHJldHVybiBvO1xuICAgIH0gOiBkZWZpbmVQcm9wZXJ0eSxcbiAgXG4gICAgaXNWYWxpZE5vZGUgPSBJRTggP1xuICAgICAgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUubm9kZVR5cGUgPT09IDE7XG4gICAgICB9IDpcbiAgICAgIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIHJldHVybiBpUE8uY2FsbChIVE1MRWxlbWVudFByb3RvdHlwZSwgbm9kZSk7XG4gICAgICB9LFxuICBcbiAgICB0YXJnZXRzID0gSUU4ICYmIFtdLFxuICBcbiAgICBhdHRhY2hTaGFkb3cgPSBIVE1MRWxlbWVudFByb3RvdHlwZS5hdHRhY2hTaGFkb3csXG4gICAgY2xvbmVOb2RlID0gSFRNTEVsZW1lbnRQcm90b3R5cGUuY2xvbmVOb2RlLFxuICAgIGRpc3BhdGNoRXZlbnQgPSBIVE1MRWxlbWVudFByb3RvdHlwZS5kaXNwYXRjaEV2ZW50LFxuICAgIGdldEF0dHJpYnV0ZSA9IEhUTUxFbGVtZW50UHJvdG90eXBlLmdldEF0dHJpYnV0ZSxcbiAgICBoYXNBdHRyaWJ1dGUgPSBIVE1MRWxlbWVudFByb3RvdHlwZS5oYXNBdHRyaWJ1dGUsXG4gICAgcmVtb3ZlQXR0cmlidXRlID0gSFRNTEVsZW1lbnRQcm90b3R5cGUucmVtb3ZlQXR0cmlidXRlLFxuICAgIHNldEF0dHJpYnV0ZSA9IEhUTUxFbGVtZW50UHJvdG90eXBlLnNldEF0dHJpYnV0ZSxcbiAgXG4gICAgLy8gcmVwbGFjZWQgbGF0ZXIgb25cbiAgICBjcmVhdGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCxcbiAgICBwYXRjaGVkQ3JlYXRlRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQsXG4gIFxuICAgIC8vIHNoYXJlZCBvYnNlcnZlciBmb3IgYWxsIGF0dHJpYnV0ZXNcbiAgICBhdHRyaWJ1dGVzT2JzZXJ2ZXIgPSBNdXRhdGlvbk9ic2VydmVyICYmIHtcbiAgICAgIGF0dHJpYnV0ZXM6IHRydWUsXG4gICAgICBjaGFyYWN0ZXJEYXRhOiB0cnVlLFxuICAgICAgYXR0cmlidXRlT2xkVmFsdWU6IHRydWVcbiAgICB9LFxuICBcbiAgICAvLyB1c2VmdWwgdG8gZGV0ZWN0IG9ubHkgaWYgdGhlcmUncyBubyBNdXRhdGlvbk9ic2VydmVyXG4gICAgRE9NQXR0ck1vZGlmaWVkID0gTXV0YXRpb25PYnNlcnZlciB8fCBmdW5jdGlvbihlKSB7XG4gICAgICBkb2VzTm90U3VwcG9ydERPTUF0dHJNb2RpZmllZCA9IGZhbHNlO1xuICAgICAgZG9jdW1lbnRFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgICAgIERPTV9BVFRSX01PRElGSUVELFxuICAgICAgICBET01BdHRyTW9kaWZpZWRcbiAgICAgICk7XG4gICAgfSxcbiAgXG4gICAgLy8gd2lsbCBib3RoIGJlIHVzZWQgdG8gbWFrZSBET01Ob2RlSW5zZXJ0ZWQgYXN5bmNocm9ub3VzXG4gICAgYXNhcFF1ZXVlLFxuICAgIGFzYXBUaW1lciA9IDAsXG4gIFxuICAgIC8vIGludGVybmFsIGZsYWdzXG4gICAgVjAgPSBSRUdJU1RFUl9FTEVNRU5UIGluIGRvY3VtZW50LFxuICAgIHNldExpc3RlbmVyID0gdHJ1ZSxcbiAgICBqdXN0U2V0dXAgPSBmYWxzZSxcbiAgICBkb2VzTm90U3VwcG9ydERPTUF0dHJNb2RpZmllZCA9IHRydWUsXG4gICAgZHJvcERvbUNvbnRlbnRMb2FkZWQgPSB0cnVlLFxuICBcbiAgICAvLyBuZWVkZWQgZm9yIHRoZSBpbm5lckhUTUwgaGVscGVyXG4gICAgbm90RnJvbUlubmVySFRNTEhlbHBlciA9IHRydWUsXG4gIFxuICAgIC8vIG9wdGlvbmFsbHkgZGVmaW5lZCBsYXRlciBvblxuICAgIG9uU3VidHJlZU1vZGlmaWVkLFxuICAgIGNhbGxET01BdHRyTW9kaWZpZWQsXG4gICAgZ2V0QXR0cmlidXRlc01pcnJvcixcbiAgICBvYnNlcnZlcixcbiAgICBvYnNlcnZlLFxuICBcbiAgICAvLyBiYXNlZCBvbiBzZXR0aW5nIHByb3RvdHlwZSBjYXBhYmlsaXR5XG4gICAgLy8gd2lsbCBjaGVjayBwcm90byBvciB0aGUgZXhwYW5kbyBhdHRyaWJ1dGVcbiAgICAvLyBpbiBvcmRlciB0byBzZXR1cCB0aGUgbm9kZSBvbmNlXG4gICAgcGF0Y2hJZk5vdEFscmVhZHksXG4gICAgcGF0Y2hcbiAgO1xuICBcbiAgLy8gb25seSBpZiBuZWVkZWRcbiAgaWYgKCFWMCkge1xuICBcbiAgICBpZiAoc1BPIHx8IGhhc1Byb3RvKSB7XG4gICAgICAgIHBhdGNoSWZOb3RBbHJlYWR5ID0gZnVuY3Rpb24gKG5vZGUsIHByb3RvKSB7XG4gICAgICAgICAgaWYgKCFpUE8uY2FsbChwcm90bywgbm9kZSkpIHtcbiAgICAgICAgICAgIHNldHVwTm9kZShub2RlLCBwcm90byk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBwYXRjaCA9IHNldHVwTm9kZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBwYXRjaElmTm90QWxyZWFkeSA9IGZ1bmN0aW9uIChub2RlLCBwcm90bykge1xuICAgICAgICAgIGlmICghbm9kZVtFWFBBTkRPX1VJRF0pIHtcbiAgICAgICAgICAgIG5vZGVbRVhQQU5ET19VSURdID0gT2JqZWN0KHRydWUpO1xuICAgICAgICAgICAgc2V0dXBOb2RlKG5vZGUsIHByb3RvKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHBhdGNoID0gcGF0Y2hJZk5vdEFscmVhZHk7XG4gICAgfVxuICBcbiAgICBpZiAoSUU4KSB7XG4gICAgICBkb2VzTm90U3VwcG9ydERPTUF0dHJNb2RpZmllZCA9IGZhbHNlO1xuICAgICAgKGZ1bmN0aW9uICgpe1xuICAgICAgICB2YXJcbiAgICAgICAgICBkZXNjcmlwdG9yID0gZ09QRChIVE1MRWxlbWVudFByb3RvdHlwZSwgQUREX0VWRU5UX0xJU1RFTkVSKSxcbiAgICAgICAgICBhZGRFdmVudExpc3RlbmVyID0gZGVzY3JpcHRvci52YWx1ZSxcbiAgICAgICAgICBwYXRjaGVkUmVtb3ZlQXR0cmlidXRlID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIHZhciBlID0gbmV3IEN1c3RvbUV2ZW50KERPTV9BVFRSX01PRElGSUVELCB7YnViYmxlczogdHJ1ZX0pO1xuICAgICAgICAgICAgZS5hdHRyTmFtZSA9IG5hbWU7XG4gICAgICAgICAgICBlLnByZXZWYWx1ZSA9IGdldEF0dHJpYnV0ZS5jYWxsKHRoaXMsIG5hbWUpO1xuICAgICAgICAgICAgZS5uZXdWYWx1ZSA9IG51bGw7XG4gICAgICAgICAgICBlW1JFTU9WQUxdID0gZS5hdHRyQ2hhbmdlID0gMjtcbiAgICAgICAgICAgIHJlbW92ZUF0dHJpYnV0ZS5jYWxsKHRoaXMsIG5hbWUpO1xuICAgICAgICAgICAgZGlzcGF0Y2hFdmVudC5jYWxsKHRoaXMsIGUpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgcGF0Y2hlZFNldEF0dHJpYnV0ZSA9IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIGhhZCA9IGhhc0F0dHJpYnV0ZS5jYWxsKHRoaXMsIG5hbWUpLFxuICAgICAgICAgICAgICBvbGQgPSBoYWQgJiYgZ2V0QXR0cmlidXRlLmNhbGwodGhpcywgbmFtZSksXG4gICAgICAgICAgICAgIGUgPSBuZXcgQ3VzdG9tRXZlbnQoRE9NX0FUVFJfTU9ESUZJRUQsIHtidWJibGVzOiB0cnVlfSlcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIHNldEF0dHJpYnV0ZS5jYWxsKHRoaXMsIG5hbWUsIHZhbHVlKTtcbiAgICAgICAgICAgIGUuYXR0ck5hbWUgPSBuYW1lO1xuICAgICAgICAgICAgZS5wcmV2VmFsdWUgPSBoYWQgPyBvbGQgOiBudWxsO1xuICAgICAgICAgICAgZS5uZXdWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgaWYgKGhhZCkge1xuICAgICAgICAgICAgICBlW01PRElGSUNBVElPTl0gPSBlLmF0dHJDaGFuZ2UgPSAxO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZVtBRERJVElPTl0gPSBlLmF0dHJDaGFuZ2UgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGlzcGF0Y2hFdmVudC5jYWxsKHRoaXMsIGUpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgb25Qcm9wZXJ0eUNoYW5nZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAvLyBqc2hpbnQgZXFudWxsOnRydWVcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICBub2RlID0gZS5jdXJyZW50VGFyZ2V0LFxuICAgICAgICAgICAgICBzdXBlclNlY3JldCA9IG5vZGVbRVhQQU5ET19VSURdLFxuICAgICAgICAgICAgICBwcm9wZXJ0eU5hbWUgPSBlLnByb3BlcnR5TmFtZSxcbiAgICAgICAgICAgICAgZXZlbnRcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIGlmIChzdXBlclNlY3JldC5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eU5hbWUpKSB7XG4gICAgICAgICAgICAgIHN1cGVyU2VjcmV0ID0gc3VwZXJTZWNyZXRbcHJvcGVydHlOYW1lXTtcbiAgICAgICAgICAgICAgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoRE9NX0FUVFJfTU9ESUZJRUQsIHtidWJibGVzOiB0cnVlfSk7XG4gICAgICAgICAgICAgIGV2ZW50LmF0dHJOYW1lID0gc3VwZXJTZWNyZXQubmFtZTtcbiAgICAgICAgICAgICAgZXZlbnQucHJldlZhbHVlID0gc3VwZXJTZWNyZXQudmFsdWUgfHwgbnVsbDtcbiAgICAgICAgICAgICAgZXZlbnQubmV3VmFsdWUgPSAoc3VwZXJTZWNyZXQudmFsdWUgPSBub2RlW3Byb3BlcnR5TmFtZV0gfHwgbnVsbCk7XG4gICAgICAgICAgICAgIGlmIChldmVudC5wcmV2VmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGV2ZW50W0FERElUSU9OXSA9IGV2ZW50LmF0dHJDaGFuZ2UgPSAwO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGV2ZW50W01PRElGSUNBVElPTl0gPSBldmVudC5hdHRyQ2hhbmdlID0gMTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBkaXNwYXRjaEV2ZW50LmNhbGwobm9kZSwgZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgO1xuICAgICAgICBkZXNjcmlwdG9yLnZhbHVlID0gZnVuY3Rpb24gKHR5cGUsIGhhbmRsZXIsIGNhcHR1cmUpIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0eXBlID09PSBET01fQVRUUl9NT0RJRklFRCAmJlxuICAgICAgICAgICAgdGhpc1tBVFRSSUJVVEVfQ0hBTkdFRF9DQUxMQkFDS10gJiZcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlICE9PSBwYXRjaGVkU2V0QXR0cmlidXRlXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzW0VYUEFORE9fVUlEXSA9IHtcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ2NsYXNzJyxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5jbGFzc05hbWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlID0gcGF0Y2hlZFNldEF0dHJpYnV0ZTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlID0gcGF0Y2hlZFJlbW92ZUF0dHJpYnV0ZTtcbiAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIuY2FsbCh0aGlzLCAncHJvcGVydHljaGFuZ2UnLCBvblByb3BlcnR5Q2hhbmdlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lci5jYWxsKHRoaXMsIHR5cGUsIGhhbmRsZXIsIGNhcHR1cmUpO1xuICAgICAgICB9O1xuICAgICAgICBkZWZpbmVQcm9wZXJ0eShIVE1MRWxlbWVudFByb3RvdHlwZSwgQUREX0VWRU5UX0xJU1RFTkVSLCBkZXNjcmlwdG9yKTtcbiAgICAgIH0oKSk7XG4gICAgfSBlbHNlIGlmICghTXV0YXRpb25PYnNlcnZlcikge1xuICAgICAgZG9jdW1lbnRFbGVtZW50W0FERF9FVkVOVF9MSVNURU5FUl0oRE9NX0FUVFJfTU9ESUZJRUQsIERPTUF0dHJNb2RpZmllZCk7XG4gICAgICBkb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlKEVYUEFORE9fVUlELCAxKTtcbiAgICAgIGRvY3VtZW50RWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoRVhQQU5ET19VSUQpO1xuICAgICAgaWYgKGRvZXNOb3RTdXBwb3J0RE9NQXR0ck1vZGlmaWVkKSB7XG4gICAgICAgIG9uU3VidHJlZU1vZGlmaWVkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICB2YXJcbiAgICAgICAgICAgIG5vZGUgPSB0aGlzLFxuICAgICAgICAgICAgb2xkQXR0cmlidXRlcyxcbiAgICAgICAgICAgIG5ld0F0dHJpYnV0ZXMsXG4gICAgICAgICAgICBrZXlcbiAgICAgICAgICA7XG4gICAgICAgICAgaWYgKG5vZGUgPT09IGUudGFyZ2V0KSB7XG4gICAgICAgICAgICBvbGRBdHRyaWJ1dGVzID0gbm9kZVtFWFBBTkRPX1VJRF07XG4gICAgICAgICAgICBub2RlW0VYUEFORE9fVUlEXSA9IChuZXdBdHRyaWJ1dGVzID0gZ2V0QXR0cmlidXRlc01pcnJvcihub2RlKSk7XG4gICAgICAgICAgICBmb3IgKGtleSBpbiBuZXdBdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgIGlmICghKGtleSBpbiBvbGRBdHRyaWJ1dGVzKSkge1xuICAgICAgICAgICAgICAgIC8vIGF0dHJpYnV0ZSB3YXMgYWRkZWRcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbERPTUF0dHJNb2RpZmllZChcbiAgICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgICBub2RlLFxuICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgb2xkQXR0cmlidXRlc1trZXldLFxuICAgICAgICAgICAgICAgICAgbmV3QXR0cmlidXRlc1trZXldLFxuICAgICAgICAgICAgICAgICAgQURESVRJT05cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5ld0F0dHJpYnV0ZXNba2V5XSAhPT0gb2xkQXR0cmlidXRlc1trZXldKSB7XG4gICAgICAgICAgICAgICAgLy8gYXR0cmlidXRlIHdhcyBjaGFuZ2VkXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxET01BdHRyTW9kaWZpZWQoXG4gICAgICAgICAgICAgICAgICAxLFxuICAgICAgICAgICAgICAgICAgbm9kZSxcbiAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgIG9sZEF0dHJpYnV0ZXNba2V5XSxcbiAgICAgICAgICAgICAgICAgIG5ld0F0dHJpYnV0ZXNba2V5XSxcbiAgICAgICAgICAgICAgICAgIE1PRElGSUNBVElPTlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNoZWNraW5nIGlmIGl0IGhhcyBiZWVuIHJlbW92ZWRcbiAgICAgICAgICAgIGZvciAoa2V5IGluIG9sZEF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIG5ld0F0dHJpYnV0ZXMpKSB7XG4gICAgICAgICAgICAgICAgLy8gYXR0cmlidXRlIHJlbW92ZWRcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbERPTUF0dHJNb2RpZmllZChcbiAgICAgICAgICAgICAgICAgIDIsXG4gICAgICAgICAgICAgICAgICBub2RlLFxuICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgb2xkQXR0cmlidXRlc1trZXldLFxuICAgICAgICAgICAgICAgICAgbmV3QXR0cmlidXRlc1trZXldLFxuICAgICAgICAgICAgICAgICAgUkVNT1ZBTFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGNhbGxET01BdHRyTW9kaWZpZWQgPSBmdW5jdGlvbiAoXG4gICAgICAgICAgYXR0ckNoYW5nZSxcbiAgICAgICAgICBjdXJyZW50VGFyZ2V0LFxuICAgICAgICAgIGF0dHJOYW1lLFxuICAgICAgICAgIHByZXZWYWx1ZSxcbiAgICAgICAgICBuZXdWYWx1ZSxcbiAgICAgICAgICBhY3Rpb25cbiAgICAgICAgKSB7XG4gICAgICAgICAgdmFyIGUgPSB7XG4gICAgICAgICAgICBhdHRyQ2hhbmdlOiBhdHRyQ2hhbmdlLFxuICAgICAgICAgICAgY3VycmVudFRhcmdldDogY3VycmVudFRhcmdldCxcbiAgICAgICAgICAgIGF0dHJOYW1lOiBhdHRyTmFtZSxcbiAgICAgICAgICAgIHByZXZWYWx1ZTogcHJldlZhbHVlLFxuICAgICAgICAgICAgbmV3VmFsdWU6IG5ld1ZhbHVlXG4gICAgICAgICAgfTtcbiAgICAgICAgICBlW2FjdGlvbl0gPSBhdHRyQ2hhbmdlO1xuICAgICAgICAgIG9uRE9NQXR0ck1vZGlmaWVkKGUpO1xuICAgICAgICB9O1xuICAgICAgICBnZXRBdHRyaWJ1dGVzTWlycm9yID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICBmb3IgKHZhclxuICAgICAgICAgICAgYXR0ciwgbmFtZSxcbiAgICAgICAgICAgIHJlc3VsdCA9IHt9LFxuICAgICAgICAgICAgYXR0cmlidXRlcyA9IG5vZGUuYXR0cmlidXRlcyxcbiAgICAgICAgICAgIGkgPSAwLCBsZW5ndGggPSBhdHRyaWJ1dGVzLmxlbmd0aDtcbiAgICAgICAgICAgIGkgPCBsZW5ndGg7IGkrK1xuICAgICAgICAgICkge1xuICAgICAgICAgICAgYXR0ciA9IGF0dHJpYnV0ZXNbaV07XG4gICAgICAgICAgICBuYW1lID0gYXR0ci5uYW1lO1xuICAgICAgICAgICAgaWYgKG5hbWUgIT09ICdzZXRBdHRyaWJ1dGUnKSB7XG4gICAgICAgICAgICAgIHJlc3VsdFtuYW1lXSA9IGF0dHIudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICBcbiAgICAvLyBzZXQgYXMgZW51bWVyYWJsZSwgd3JpdGFibGUgYW5kIGNvbmZpZ3VyYWJsZVxuICAgIGRvY3VtZW50W1JFR0lTVEVSX0VMRU1FTlRdID0gZnVuY3Rpb24gcmVnaXN0ZXJFbGVtZW50KHR5cGUsIG9wdGlvbnMpIHtcbiAgICAgIHVwcGVyVHlwZSA9IHR5cGUudG9VcHBlckNhc2UoKTtcbiAgICAgIGlmIChzZXRMaXN0ZW5lcikge1xuICAgICAgICAvLyBvbmx5IGZpcnN0IHRpbWUgZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50IGlzIHVzZWRcbiAgICAgICAgLy8gd2UgbmVlZCB0byBzZXQgdGhpcyBsaXN0ZW5lclxuICAgICAgICAvLyBzZXR0aW5nIGl0IGJ5IGRlZmF1bHQgbWlnaHQgc2xvdyBkb3duIGZvciBubyByZWFzb25cbiAgICAgICAgc2V0TGlzdGVuZXIgPSBmYWxzZTtcbiAgICAgICAgaWYgKE11dGF0aW9uT2JzZXJ2ZXIpIHtcbiAgICAgICAgICBvYnNlcnZlciA9IChmdW5jdGlvbihhdHRhY2hlZCwgZGV0YWNoZWQpe1xuICAgICAgICAgICAgZnVuY3Rpb24gY2hlY2tFbUFsbChsaXN0LCBjYWxsYmFjaykge1xuICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gbGlzdC5sZW5ndGg7IGkgPCBsZW5ndGg7IGNhbGxiYWNrKGxpc3RbaSsrXSkpe31cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbiAocmVjb3Jkcykge1xuICAgICAgICAgICAgICBmb3IgKHZhclxuICAgICAgICAgICAgICAgIGN1cnJlbnQsIG5vZGUsIG5ld1ZhbHVlLFxuICAgICAgICAgICAgICAgIGkgPSAwLCBsZW5ndGggPSByZWNvcmRzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSByZWNvcmRzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50LnR5cGUgPT09ICdjaGlsZExpc3QnKSB7XG4gICAgICAgICAgICAgICAgICBjaGVja0VtQWxsKGN1cnJlbnQuYWRkZWROb2RlcywgYXR0YWNoZWQpO1xuICAgICAgICAgICAgICAgICAgY2hlY2tFbUFsbChjdXJyZW50LnJlbW92ZWROb2RlcywgZGV0YWNoZWQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBub2RlID0gY3VycmVudC50YXJnZXQ7XG4gICAgICAgICAgICAgICAgICBpZiAobm90RnJvbUlubmVySFRNTEhlbHBlciAmJlxuICAgICAgICAgICAgICAgICAgICAgIG5vZGVbQVRUUklCVVRFX0NIQU5HRURfQ0FMTEJBQ0tdICYmXG4gICAgICAgICAgICAgICAgICAgICAgY3VycmVudC5hdHRyaWJ1dGVOYW1lICE9PSAnc3R5bGUnKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlID0gZ2V0QXR0cmlidXRlLmNhbGwobm9kZSwgY3VycmVudC5hdHRyaWJ1dGVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlICE9PSBjdXJyZW50Lm9sZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgbm9kZVtBVFRSSUJVVEVfQ0hBTkdFRF9DQUxMQkFDS10oXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50LmF0dHJpYnV0ZU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Lm9sZFZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KGV4ZWN1dGVBY3Rpb24oQVRUQUNIRUQpLCBleGVjdXRlQWN0aW9uKERFVEFDSEVEKSkpO1xuICAgICAgICAgIG9ic2VydmUgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShcbiAgICAgICAgICAgICAgbm9kZSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzdWJ0cmVlOiB0cnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIG9ic2VydmUoZG9jdW1lbnQpO1xuICAgICAgICAgIGlmIChhdHRhY2hTaGFkb3cpIHtcbiAgICAgICAgICAgIEhUTUxFbGVtZW50UHJvdG90eXBlLmF0dGFjaFNoYWRvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG9ic2VydmUoYXR0YWNoU2hhZG93LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXNhcFF1ZXVlID0gW107XG4gICAgICAgICAgZG9jdW1lbnRbQUREX0VWRU5UX0xJU1RFTkVSXSgnRE9NTm9kZUluc2VydGVkJywgb25ET01Ob2RlKEFUVEFDSEVEKSk7XG4gICAgICAgICAgZG9jdW1lbnRbQUREX0VWRU5UX0xJU1RFTkVSXSgnRE9NTm9kZVJlbW92ZWQnLCBvbkRPTU5vZGUoREVUQUNIRUQpKTtcbiAgICAgICAgfVxuICBcbiAgICAgICAgZG9jdW1lbnRbQUREX0VWRU5UX0xJU1RFTkVSXShET01fQ09OVEVOVF9MT0FERUQsIG9uUmVhZHlTdGF0ZUNoYW5nZSk7XG4gICAgICAgIGRvY3VtZW50W0FERF9FVkVOVF9MSVNURU5FUl0oJ3JlYWR5c3RhdGVjaGFuZ2UnLCBvblJlYWR5U3RhdGVDaGFuZ2UpO1xuICBcbiAgICAgICAgSFRNTEVsZW1lbnRQcm90b3R5cGUuY2xvbmVOb2RlID0gZnVuY3Rpb24gKGRlZXApIHtcbiAgICAgICAgICB2YXJcbiAgICAgICAgICAgIG5vZGUgPSBjbG9uZU5vZGUuY2FsbCh0aGlzLCAhIWRlZXApLFxuICAgICAgICAgICAgaSA9IGdldFR5cGVJbmRleChub2RlKVxuICAgICAgICAgIDtcbiAgICAgICAgICBpZiAoLTEgPCBpKSBwYXRjaChub2RlLCBwcm90b3NbaV0pO1xuICAgICAgICAgIGlmIChkZWVwICYmIHF1ZXJ5Lmxlbmd0aCkgbG9vcEFuZFNldHVwKG5vZGUucXVlcnlTZWxlY3RvckFsbChxdWVyeSkpO1xuICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgfVxuICBcbiAgICAgIGlmIChqdXN0U2V0dXApIHJldHVybiAoanVzdFNldHVwID0gZmFsc2UpO1xuICBcbiAgICAgIGlmICgtMiA8IChcbiAgICAgICAgaW5kZXhPZi5jYWxsKHR5cGVzLCBQUkVGSVhfSVMgKyB1cHBlclR5cGUpICtcbiAgICAgICAgaW5kZXhPZi5jYWxsKHR5cGVzLCBQUkVGSVhfVEFHICsgdXBwZXJUeXBlKVxuICAgICAgKSkge1xuICAgICAgICB0aHJvd1R5cGVFcnJvcih0eXBlKTtcbiAgICAgIH1cbiAgXG4gICAgICBpZiAoIXZhbGlkTmFtZS50ZXN0KHVwcGVyVHlwZSkgfHwgLTEgPCBpbmRleE9mLmNhbGwoaW52YWxpZE5hbWVzLCB1cHBlclR5cGUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHR5cGUgJyArIHR5cGUgKyAnIGlzIGludmFsaWQnKTtcbiAgICAgIH1cbiAgXG4gICAgICB2YXJcbiAgICAgICAgY29uc3RydWN0b3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIGV4dGVuZGluZyA/XG4gICAgICAgICAgICBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5vZGVOYW1lLCB1cHBlclR5cGUpIDpcbiAgICAgICAgICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobm9kZU5hbWUpO1xuICAgICAgICB9LFxuICAgICAgICBvcHQgPSBvcHRpb25zIHx8IE9QLFxuICAgICAgICBleHRlbmRpbmcgPSBoT1AuY2FsbChvcHQsIEVYVEVORFMpLFxuICAgICAgICBub2RlTmFtZSA9IGV4dGVuZGluZyA/IG9wdGlvbnNbRVhURU5EU10udG9VcHBlckNhc2UoKSA6IHVwcGVyVHlwZSxcbiAgICAgICAgdXBwZXJUeXBlLFxuICAgICAgICBpXG4gICAgICA7XG4gIFxuICAgICAgaWYgKGV4dGVuZGluZyAmJiAtMSA8IChcbiAgICAgICAgaW5kZXhPZi5jYWxsKHR5cGVzLCBQUkVGSVhfVEFHICsgbm9kZU5hbWUpXG4gICAgICApKSB7XG4gICAgICAgIHRocm93VHlwZUVycm9yKG5vZGVOYW1lKTtcbiAgICAgIH1cbiAgXG4gICAgICBpID0gdHlwZXMucHVzaCgoZXh0ZW5kaW5nID8gUFJFRklYX0lTIDogUFJFRklYX1RBRykgKyB1cHBlclR5cGUpIC0gMTtcbiAgXG4gICAgICBxdWVyeSA9IHF1ZXJ5LmNvbmNhdChcbiAgICAgICAgcXVlcnkubGVuZ3RoID8gJywnIDogJycsXG4gICAgICAgIGV4dGVuZGluZyA/IG5vZGVOYW1lICsgJ1tpcz1cIicgKyB0eXBlLnRvTG93ZXJDYXNlKCkgKyAnXCJdJyA6IG5vZGVOYW1lXG4gICAgICApO1xuICBcbiAgICAgIGNvbnN0cnVjdG9yLnByb3RvdHlwZSA9IChcbiAgICAgICAgcHJvdG9zW2ldID0gaE9QLmNhbGwob3B0LCAncHJvdG90eXBlJykgP1xuICAgICAgICAgIG9wdC5wcm90b3R5cGUgOlxuICAgICAgICAgIGNyZWF0ZShIVE1MRWxlbWVudFByb3RvdHlwZSlcbiAgICAgICk7XG4gIFxuICAgICAgaWYgKHF1ZXJ5Lmxlbmd0aCkgbG9vcEFuZFZlcmlmeShcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChxdWVyeSksXG4gICAgICAgIEFUVEFDSEVEXG4gICAgICApO1xuICBcbiAgICAgIHJldHVybiBjb25zdHJ1Y3RvcjtcbiAgICB9O1xuICBcbiAgICBkb2N1bWVudC5jcmVhdGVFbGVtZW50ID0gKHBhdGNoZWRDcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24gKGxvY2FsTmFtZSwgdHlwZUV4dGVuc2lvbikge1xuICAgICAgdmFyXG4gICAgICAgIGlzID0gZ2V0SXModHlwZUV4dGVuc2lvbiksXG4gICAgICAgIG5vZGUgPSBpcyA/XG4gICAgICAgICAgY3JlYXRlRWxlbWVudC5jYWxsKGRvY3VtZW50LCBsb2NhbE5hbWUsIHNlY29uZEFyZ3VtZW50KGlzKSkgOlxuICAgICAgICAgIGNyZWF0ZUVsZW1lbnQuY2FsbChkb2N1bWVudCwgbG9jYWxOYW1lKSxcbiAgICAgICAgbmFtZSA9ICcnICsgbG9jYWxOYW1lLFxuICAgICAgICBpID0gaW5kZXhPZi5jYWxsKFxuICAgICAgICAgIHR5cGVzLFxuICAgICAgICAgIChpcyA/IFBSRUZJWF9JUyA6IFBSRUZJWF9UQUcpICtcbiAgICAgICAgICAoaXMgfHwgbmFtZSkudG9VcHBlckNhc2UoKVxuICAgICAgICApLFxuICAgICAgICBzZXR1cCA9IC0xIDwgaVxuICAgICAgO1xuICAgICAgaWYgKGlzKSB7XG4gICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdpcycsIGlzID0gaXMudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgIGlmIChzZXR1cCkge1xuICAgICAgICAgIHNldHVwID0gaXNJblFTQShuYW1lLnRvVXBwZXJDYXNlKCksIGlzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbm90RnJvbUlubmVySFRNTEhlbHBlciA9ICFkb2N1bWVudC5jcmVhdGVFbGVtZW50LmlubmVySFRNTEhlbHBlcjtcbiAgICAgIGlmIChzZXR1cCkgcGF0Y2gobm9kZSwgcHJvdG9zW2ldKTtcbiAgICAgIHJldHVybiBub2RlO1xuICAgIH0pO1xuICBcbiAgfVxuICBcbiAgZnVuY3Rpb24gQVNBUCgpIHtcbiAgICB2YXIgcXVldWUgPSBhc2FwUXVldWUuc3BsaWNlKDAsIGFzYXBRdWV1ZS5sZW5ndGgpO1xuICAgIGFzYXBUaW1lciA9IDA7XG4gICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgcXVldWUuc2hpZnQoKS5jYWxsKFxuICAgICAgICBudWxsLCBxdWV1ZS5zaGlmdCgpXG4gICAgICApO1xuICAgIH1cbiAgfVxuICBcbiAgZnVuY3Rpb24gbG9vcEFuZFZlcmlmeShsaXN0LCBhY3Rpb24pIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gbGlzdC5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmVyaWZ5QW5kU2V0dXBBbmRBY3Rpb24obGlzdFtpXSwgYWN0aW9uKTtcbiAgICB9XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIGxvb3BBbmRTZXR1cChsaXN0KSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGxpc3QubGVuZ3RoLCBub2RlOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIG5vZGUgPSBsaXN0W2ldO1xuICAgICAgcGF0Y2gobm9kZSwgcHJvdG9zW2dldFR5cGVJbmRleChub2RlKV0pO1xuICAgIH1cbiAgfVxuICBcbiAgZnVuY3Rpb24gZXhlY3V0ZUFjdGlvbihhY3Rpb24pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgIGlmIChpc1ZhbGlkTm9kZShub2RlKSkge1xuICAgICAgICB2ZXJpZnlBbmRTZXR1cEFuZEFjdGlvbihub2RlLCBhY3Rpb24pO1xuICAgICAgICBpZiAocXVlcnkubGVuZ3RoKSBsb29wQW5kVmVyaWZ5KFxuICAgICAgICAgIG5vZGUucXVlcnlTZWxlY3RvckFsbChxdWVyeSksXG4gICAgICAgICAgYWN0aW9uXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBcbiAgZnVuY3Rpb24gZ2V0VHlwZUluZGV4KHRhcmdldCkge1xuICAgIHZhclxuICAgICAgaXMgPSBnZXRBdHRyaWJ1dGUuY2FsbCh0YXJnZXQsICdpcycpLFxuICAgICAgbm9kZU5hbWUgPSB0YXJnZXQubm9kZU5hbWUudG9VcHBlckNhc2UoKSxcbiAgICAgIGkgPSBpbmRleE9mLmNhbGwoXG4gICAgICAgIHR5cGVzLFxuICAgICAgICBpcyA/XG4gICAgICAgICAgICBQUkVGSVhfSVMgKyBpcy50b1VwcGVyQ2FzZSgpIDpcbiAgICAgICAgICAgIFBSRUZJWF9UQUcgKyBub2RlTmFtZVxuICAgICAgKVxuICAgIDtcbiAgICByZXR1cm4gaXMgJiYgLTEgPCBpICYmICFpc0luUVNBKG5vZGVOYW1lLCBpcykgPyAtMSA6IGk7XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIGlzSW5RU0EobmFtZSwgdHlwZSkge1xuICAgIHJldHVybiAtMSA8IHF1ZXJ5LmluZGV4T2YobmFtZSArICdbaXM9XCInICsgdHlwZSArICdcIl0nKTtcbiAgfVxuICBcbiAgZnVuY3Rpb24gb25ET01BdHRyTW9kaWZpZWQoZSkge1xuICAgIHZhclxuICAgICAgbm9kZSA9IGUuY3VycmVudFRhcmdldCxcbiAgICAgIGF0dHJDaGFuZ2UgPSBlLmF0dHJDaGFuZ2UsXG4gICAgICBhdHRyTmFtZSA9IGUuYXR0ck5hbWUsXG4gICAgICB0YXJnZXQgPSBlLnRhcmdldCxcbiAgICAgIGFkZGl0aW9uID0gZVtBRERJVElPTl0gfHwgMixcbiAgICAgIHJlbW92YWwgPSBlW1JFTU9WQUxdIHx8IDNcbiAgICA7XG4gICAgaWYgKG5vdEZyb21Jbm5lckhUTUxIZWxwZXIgJiZcbiAgICAgICAgKCF0YXJnZXQgfHwgdGFyZ2V0ID09PSBub2RlKSAmJlxuICAgICAgICBub2RlW0FUVFJJQlVURV9DSEFOR0VEX0NBTExCQUNLXSAmJlxuICAgICAgICBhdHRyTmFtZSAhPT0gJ3N0eWxlJyAmJiAoXG4gICAgICAgICAgZS5wcmV2VmFsdWUgIT09IGUubmV3VmFsdWUgfHxcbiAgICAgICAgICAvLyBJRTksIElFMTAsIGFuZCBPcGVyYSAxMiBnb3RjaGFcbiAgICAgICAgICBlLm5ld1ZhbHVlID09PSAnJyAmJiAoXG4gICAgICAgICAgICBhdHRyQ2hhbmdlID09PSBhZGRpdGlvbiB8fFxuICAgICAgICAgICAgYXR0ckNoYW5nZSA9PT0gcmVtb3ZhbFxuICAgICAgICAgIClcbiAgICApKSB7XG4gICAgICBub2RlW0FUVFJJQlVURV9DSEFOR0VEX0NBTExCQUNLXShcbiAgICAgICAgYXR0ck5hbWUsXG4gICAgICAgIGF0dHJDaGFuZ2UgPT09IGFkZGl0aW9uID8gbnVsbCA6IGUucHJldlZhbHVlLFxuICAgICAgICBhdHRyQ2hhbmdlID09PSByZW1vdmFsID8gbnVsbCA6IGUubmV3VmFsdWVcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIFxuICBmdW5jdGlvbiBvbkRPTU5vZGUoYWN0aW9uKSB7XG4gICAgdmFyIGV4ZWN1dG9yID0gZXhlY3V0ZUFjdGlvbihhY3Rpb24pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZSkge1xuICAgICAgYXNhcFF1ZXVlLnB1c2goZXhlY3V0b3IsIGUudGFyZ2V0KTtcbiAgICAgIGlmIChhc2FwVGltZXIpIGNsZWFyVGltZW91dChhc2FwVGltZXIpO1xuICAgICAgYXNhcFRpbWVyID0gc2V0VGltZW91dChBU0FQLCAxKTtcbiAgICB9O1xuICB9XG4gIFxuICBmdW5jdGlvbiBvblJlYWR5U3RhdGVDaGFuZ2UoZSkge1xuICAgIGlmIChkcm9wRG9tQ29udGVudExvYWRlZCkge1xuICAgICAgZHJvcERvbUNvbnRlbnRMb2FkZWQgPSBmYWxzZTtcbiAgICAgIGUuY3VycmVudFRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKERPTV9DT05URU5UX0xPQURFRCwgb25SZWFkeVN0YXRlQ2hhbmdlKTtcbiAgICB9XG4gICAgaWYgKHF1ZXJ5Lmxlbmd0aCkgbG9vcEFuZFZlcmlmeShcbiAgICAgIChlLnRhcmdldCB8fCBkb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbChxdWVyeSksXG4gICAgICBlLmRldGFpbCA9PT0gREVUQUNIRUQgPyBERVRBQ0hFRCA6IEFUVEFDSEVEXG4gICAgKTtcbiAgICBpZiAoSUU4KSBwdXJnZSgpO1xuICB9XG4gIFxuICBmdW5jdGlvbiBwYXRjaGVkU2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKSB7XG4gICAgLy8ganNoaW50IHZhbGlkdGhpczp0cnVlXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNldEF0dHJpYnV0ZS5jYWxsKHNlbGYsIG5hbWUsIHZhbHVlKTtcbiAgICBvblN1YnRyZWVNb2RpZmllZC5jYWxsKHNlbGYsIHt0YXJnZXQ6IHNlbGZ9KTtcbiAgfVxuICBcbiAgZnVuY3Rpb24gc2V0dXBOb2RlKG5vZGUsIHByb3RvKSB7XG4gICAgc2V0UHJvdG90eXBlKG5vZGUsIHByb3RvKTtcbiAgICBpZiAob2JzZXJ2ZXIpIHtcbiAgICAgIG9ic2VydmVyLm9ic2VydmUobm9kZSwgYXR0cmlidXRlc09ic2VydmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGRvZXNOb3RTdXBwb3J0RE9NQXR0ck1vZGlmaWVkKSB7XG4gICAgICAgIG5vZGUuc2V0QXR0cmlidXRlID0gcGF0Y2hlZFNldEF0dHJpYnV0ZTtcbiAgICAgICAgbm9kZVtFWFBBTkRPX1VJRF0gPSBnZXRBdHRyaWJ1dGVzTWlycm9yKG5vZGUpO1xuICAgICAgICBub2RlW0FERF9FVkVOVF9MSVNURU5FUl0oRE9NX1NVQlRSRUVfTU9ESUZJRUQsIG9uU3VidHJlZU1vZGlmaWVkKTtcbiAgICAgIH1cbiAgICAgIG5vZGVbQUREX0VWRU5UX0xJU1RFTkVSXShET01fQVRUUl9NT0RJRklFRCwgb25ET01BdHRyTW9kaWZpZWQpO1xuICAgIH1cbiAgICBpZiAobm9kZVtDUkVBVEVEX0NBTExCQUNLXSAmJiBub3RGcm9tSW5uZXJIVE1MSGVscGVyKSB7XG4gICAgICBub2RlLmNyZWF0ZWQgPSB0cnVlO1xuICAgICAgbm9kZVtDUkVBVEVEX0NBTExCQUNLXSgpO1xuICAgICAgbm9kZS5jcmVhdGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG4gIFxuICBmdW5jdGlvbiBwdXJnZSgpIHtcbiAgICBmb3IgKHZhclxuICAgICAgbm9kZSxcbiAgICAgIGkgPSAwLFxuICAgICAgbGVuZ3RoID0gdGFyZ2V0cy5sZW5ndGg7XG4gICAgICBpIDwgbGVuZ3RoOyBpKytcbiAgICApIHtcbiAgICAgIG5vZGUgPSB0YXJnZXRzW2ldO1xuICAgICAgaWYgKCFkb2N1bWVudEVsZW1lbnQuY29udGFpbnMobm9kZSkpIHtcbiAgICAgICAgbGVuZ3RoLS07XG4gICAgICAgIHRhcmdldHMuc3BsaWNlKGktLSwgMSk7XG4gICAgICAgIHZlcmlmeUFuZFNldHVwQW5kQWN0aW9uKG5vZGUsIERFVEFDSEVEKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIHRocm93VHlwZUVycm9yKHR5cGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0EgJyArIHR5cGUgKyAnIHR5cGUgaXMgYWxyZWFkeSByZWdpc3RlcmVkJyk7XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIHZlcmlmeUFuZFNldHVwQW5kQWN0aW9uKG5vZGUsIGFjdGlvbikge1xuICAgIHZhclxuICAgICAgZm4sXG4gICAgICBpID0gZ2V0VHlwZUluZGV4KG5vZGUpXG4gICAgO1xuICAgIGlmICgtMSA8IGkpIHtcbiAgICAgIHBhdGNoSWZOb3RBbHJlYWR5KG5vZGUsIHByb3Rvc1tpXSk7XG4gICAgICBpID0gMDtcbiAgICAgIGlmIChhY3Rpb24gPT09IEFUVEFDSEVEICYmICFub2RlW0FUVEFDSEVEXSkge1xuICAgICAgICBub2RlW0RFVEFDSEVEXSA9IGZhbHNlO1xuICAgICAgICBub2RlW0FUVEFDSEVEXSA9IHRydWU7XG4gICAgICAgIGkgPSAxO1xuICAgICAgICBpZiAoSUU4ICYmIGluZGV4T2YuY2FsbCh0YXJnZXRzLCBub2RlKSA8IDApIHtcbiAgICAgICAgICB0YXJnZXRzLnB1c2gobm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSBERVRBQ0hFRCAmJiAhbm9kZVtERVRBQ0hFRF0pIHtcbiAgICAgICAgbm9kZVtBVFRBQ0hFRF0gPSBmYWxzZTtcbiAgICAgICAgbm9kZVtERVRBQ0hFRF0gPSB0cnVlO1xuICAgICAgICBpID0gMTtcbiAgICAgIH1cbiAgICAgIGlmIChpICYmIChmbiA9IG5vZGVbYWN0aW9uICsgQ0FMTEJBQ0tdKSkgZm4uY2FsbChub2RlKTtcbiAgICB9XG4gIH1cbiAgXG4gIFxuICBcbiAgLy8gVjEgaW4gZGEgSG91c2UhXG4gIGZ1bmN0aW9uIEN1c3RvbUVsZW1lbnRSZWdpc3RyeSgpIHt9XG4gIFxuICBDdXN0b21FbGVtZW50UmVnaXN0cnkucHJvdG90eXBlID0ge1xuICAgIGNvbnN0cnVjdG9yOiBDdXN0b21FbGVtZW50UmVnaXN0cnksXG4gICAgLy8gYSB3b3JrYXJvdW5kIGZvciB0aGUgc3R1YmJvcm4gV2ViS2l0XG4gICAgZGVmaW5lOiB1c2FibGVDdXN0b21FbGVtZW50cyA/XG4gICAgICBmdW5jdGlvbiAobmFtZSwgQ2xhc3MsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgICAgICBDRVJEZWZpbmUobmFtZSwgQ2xhc3MsIG9wdGlvbnMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBOQU1FID0gbmFtZS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgIGNvbnN0cnVjdG9yc1tOQU1FXSA9IHtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yOiBDbGFzcyxcbiAgICAgICAgICAgIGNyZWF0ZTogW05BTUVdXG4gICAgICAgICAgfTtcbiAgICAgICAgICBub2RlTmFtZXMuc2V0KENsYXNzLCBOQU1FKTtcbiAgICAgICAgICBjdXN0b21FbGVtZW50cy5kZWZpbmUobmFtZSwgQ2xhc3MpO1xuICAgICAgICB9XG4gICAgICB9IDpcbiAgICAgIENFUkRlZmluZSxcbiAgICBnZXQ6IHVzYWJsZUN1c3RvbUVsZW1lbnRzID9cbiAgICAgIGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHJldHVybiBjdXN0b21FbGVtZW50cy5nZXQobmFtZSkgfHwgZ2V0KG5hbWUpO1xuICAgICAgfSA6XG4gICAgICBnZXQsXG4gICAgd2hlbkRlZmluZWQ6IHVzYWJsZUN1c3RvbUVsZW1lbnRzID9cbiAgICAgIGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJhY2UoW1xuICAgICAgICAgIGN1c3RvbUVsZW1lbnRzLndoZW5EZWZpbmVkKG5hbWUpLFxuICAgICAgICAgIHdoZW5EZWZpbmVkKG5hbWUpXG4gICAgICAgIF0pO1xuICAgICAgfSA6XG4gICAgICB3aGVuRGVmaW5lZFxuICB9O1xuICBcbiAgZnVuY3Rpb24gQ0VSRGVmaW5lKG5hbWUsIENsYXNzLCBvcHRpb25zKSB7XG4gICAgdmFyXG4gICAgICBpcyA9IG9wdGlvbnMgJiYgb3B0aW9uc1tFWFRFTkRTXSB8fCAnJyxcbiAgICAgIENQcm90byA9IENsYXNzLnByb3RvdHlwZSxcbiAgICAgIHByb3RvID0gY3JlYXRlKENQcm90byksXG4gICAgICBhdHRyaWJ1dGVzID0gQ2xhc3Mub2JzZXJ2ZWRBdHRyaWJ1dGVzIHx8IGVtcHR5LFxuICAgICAgZGVmaW5pdGlvbiA9IHtwcm90b3R5cGU6IHByb3RvfVxuICAgIDtcbiAgICAvLyBUT0RPOiBpcyB0aGlzIG5lZWRlZCBhdCBhbGwgc2luY2UgaXQncyBpbmhlcml0ZWQ/XG4gICAgLy8gZGVmaW5lUHJvcGVydHkocHJvdG8sICdjb25zdHJ1Y3RvcicsIHt2YWx1ZTogQ2xhc3N9KTtcbiAgICBzYWZlUHJvcGVydHkocHJvdG8sIENSRUFURURfQ0FMTEJBQ0ssIHtcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoanVzdENyZWF0ZWQpIGp1c3RDcmVhdGVkID0gZmFsc2U7XG4gICAgICAgICAgZWxzZSBpZiAoIXRoaXNbRFJFQ0VWMV0pIHtcbiAgICAgICAgICAgIHRoaXNbRFJFQ0VWMV0gPSB0cnVlO1xuICAgICAgICAgICAgbmV3IENsYXNzKHRoaXMpO1xuICAgICAgICAgICAgaWYgKENQcm90b1tDUkVBVEVEX0NBTExCQUNLXSlcbiAgICAgICAgICAgICAgQ1Byb3RvW0NSRUFURURfQ0FMTEJBQ0tdLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB2YXIgaW5mbyA9IGNvbnN0cnVjdG9yc1tub2RlTmFtZXMuZ2V0KENsYXNzKV07XG4gICAgICAgICAgICBpZiAoIXVzYWJsZUN1c3RvbUVsZW1lbnRzIHx8IGluZm8uY3JlYXRlLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgbm90aWZ5QXR0cmlidXRlcyh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgc2FmZVByb3BlcnR5KHByb3RvLCBBVFRSSUJVVEVfQ0hBTkdFRF9DQUxMQkFDSywge1xuICAgICAgdmFsdWU6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIGlmICgtMSA8IGluZGV4T2YuY2FsbChhdHRyaWJ1dGVzLCBuYW1lKSlcbiAgICAgICAgICBDUHJvdG9bQVRUUklCVVRFX0NIQU5HRURfQ0FMTEJBQ0tdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKENQcm90b1tDT05ORUNURURfQ0FMTEJBQ0tdKSB7XG4gICAgICBzYWZlUHJvcGVydHkocHJvdG8sIEFUVEFDSEVEX0NBTExCQUNLLCB7XG4gICAgICAgIHZhbHVlOiBDUHJvdG9bQ09OTkVDVEVEX0NBTExCQUNLXVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChDUHJvdG9bRElTQ09OTkVDVEVEX0NBTExCQUNLXSkge1xuICAgICAgc2FmZVByb3BlcnR5KHByb3RvLCBERVRBQ0hFRF9DQUxMQkFDSywge1xuICAgICAgICB2YWx1ZTogQ1Byb3RvW0RJU0NPTk5FQ1RFRF9DQUxMQkFDS11cbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoaXMpIGRlZmluaXRpb25bRVhURU5EU10gPSBpcztcbiAgICBuYW1lID0gbmFtZS50b1VwcGVyQ2FzZSgpO1xuICAgIGNvbnN0cnVjdG9yc1tuYW1lXSA9IHtcbiAgICAgIGNvbnN0cnVjdG9yOiBDbGFzcyxcbiAgICAgIGNyZWF0ZTogaXMgPyBbaXMsIHNlY29uZEFyZ3VtZW50KG5hbWUpXSA6IFtuYW1lXVxuICAgIH07XG4gICAgbm9kZU5hbWVzLnNldChDbGFzcywgbmFtZSk7XG4gICAgZG9jdW1lbnRbUkVHSVNURVJfRUxFTUVOVF0obmFtZS50b0xvd2VyQ2FzZSgpLCBkZWZpbml0aW9uKTtcbiAgICB3aGVuRGVmaW5lZChuYW1lKTtcbiAgICB3YWl0aW5nTGlzdFtuYW1lXS5yKCk7XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIGdldChuYW1lKSB7XG4gICAgdmFyIGluZm8gPSBjb25zdHJ1Y3RvcnNbbmFtZS50b1VwcGVyQ2FzZSgpXTtcbiAgICByZXR1cm4gaW5mbyAmJiBpbmZvLmNvbnN0cnVjdG9yO1xuICB9XG4gIFxuICBmdW5jdGlvbiBnZXRJcyhvcHRpb25zKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJyA/XG4gICAgICAgIG9wdGlvbnMgOiAob3B0aW9ucyAmJiBvcHRpb25zLmlzIHx8ICcnKTtcbiAgfVxuICBcbiAgZnVuY3Rpb24gbm90aWZ5QXR0cmlidXRlcyhzZWxmKSB7XG4gICAgdmFyXG4gICAgICBjYWxsYmFjayA9IHNlbGZbQVRUUklCVVRFX0NIQU5HRURfQ0FMTEJBQ0tdLFxuICAgICAgYXR0cmlidXRlcyA9IGNhbGxiYWNrID8gc2VsZi5hdHRyaWJ1dGVzIDogZW1wdHksXG4gICAgICBpID0gYXR0cmlidXRlcy5sZW5ndGgsXG4gICAgICBhdHRyaWJ1dGVcbiAgICA7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgYXR0cmlidXRlID0gIGF0dHJpYnV0ZXNbaV07IC8vIHx8IGF0dHJpYnV0ZXMuaXRlbShpKTtcbiAgICAgIGNhbGxiYWNrLmNhbGwoXG4gICAgICAgIHNlbGYsXG4gICAgICAgIGF0dHJpYnV0ZS5uYW1lIHx8IGF0dHJpYnV0ZS5ub2RlTmFtZSxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgYXR0cmlidXRlLnZhbHVlIHx8IGF0dHJpYnV0ZS5ub2RlVmFsdWVcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIFxuICBmdW5jdGlvbiB3aGVuRGVmaW5lZChuYW1lKSB7XG4gICAgbmFtZSA9IG5hbWUudG9VcHBlckNhc2UoKTtcbiAgICBpZiAoIShuYW1lIGluIHdhaXRpbmdMaXN0KSkge1xuICAgICAgd2FpdGluZ0xpc3RbbmFtZV0gPSB7fTtcbiAgICAgIHdhaXRpbmdMaXN0W25hbWVdLnAgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICB3YWl0aW5nTGlzdFtuYW1lXS5yID0gcmVzb2x2ZTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gd2FpdGluZ0xpc3RbbmFtZV0ucDtcbiAgfVxuICBcbiAgZnVuY3Rpb24gcG9seWZpbGxWMSgpIHtcbiAgICBpZiAoY3VzdG9tRWxlbWVudHMpIGRlbGV0ZSB3aW5kb3cuY3VzdG9tRWxlbWVudHM7XG4gICAgZGVmaW5lUHJvcGVydHkod2luZG93LCAnY3VzdG9tRWxlbWVudHMnLCB7XG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogbmV3IEN1c3RvbUVsZW1lbnRSZWdpc3RyeSgpXG4gICAgfSk7XG4gICAgZGVmaW5lUHJvcGVydHkod2luZG93LCAnQ3VzdG9tRWxlbWVudFJlZ2lzdHJ5Jywge1xuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IEN1c3RvbUVsZW1lbnRSZWdpc3RyeVxuICAgIH0pO1xuICAgIGZvciAodmFyXG4gICAgICBwYXRjaENsYXNzID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgdmFyIENsYXNzID0gd2luZG93W25hbWVdO1xuICAgICAgICBpZiAoQ2xhc3MpIHtcbiAgICAgICAgICB3aW5kb3dbbmFtZV0gPSBmdW5jdGlvbiBDdXN0b21FbGVtZW50c1YxKHNlbGYpIHtcbiAgICAgICAgICAgIHZhciBpbmZvLCBpc05hdGl2ZTtcbiAgICAgICAgICAgIGlmICghc2VsZikgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoIXNlbGZbRFJFQ0VWMV0pIHtcbiAgICAgICAgICAgICAganVzdENyZWF0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICBpbmZvID0gY29uc3RydWN0b3JzW25vZGVOYW1lcy5nZXQoc2VsZi5jb25zdHJ1Y3RvcildO1xuICAgICAgICAgICAgICBpc05hdGl2ZSA9IHVzYWJsZUN1c3RvbUVsZW1lbnRzICYmIGluZm8uY3JlYXRlLmxlbmd0aCA9PT0gMTtcbiAgICAgICAgICAgICAgc2VsZiA9IGlzTmF0aXZlID9cbiAgICAgICAgICAgICAgICBSZWZsZWN0LmNvbnN0cnVjdChDbGFzcywgZW1wdHksIGluZm8uY29uc3RydWN0b3IpIDpcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5jcmVhdGVFbGVtZW50LmFwcGx5KGRvY3VtZW50LCBpbmZvLmNyZWF0ZSk7XG4gICAgICAgICAgICAgIHNlbGZbRFJFQ0VWMV0gPSB0cnVlO1xuICAgICAgICAgICAgICBqdXN0Q3JlYXRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICBpZiAoIWlzTmF0aXZlKSBub3RpZnlBdHRyaWJ1dGVzKHNlbGYpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICAgICAgfTtcbiAgICAgICAgICB3aW5kb3dbbmFtZV0ucHJvdG90eXBlID0gQ2xhc3MucHJvdG90eXBlO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSB3aW5kb3dbbmFtZV07XG4gICAgICAgICAgfSBjYXRjaChXZWJLaXQpIHtcbiAgICAgICAgICAgIGZpeEdldENsYXNzID0gdHJ1ZTtcbiAgICAgICAgICAgIGRlZmluZVByb3BlcnR5KENsYXNzLCBEUkVDRVYxLCB7dmFsdWU6IHdpbmRvd1tuYW1lXX0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIENsYXNzZXMgPSBodG1sQ2xhc3MuZ2V0KC9eSFRNTFtBLVpdKlthLXpdLyksXG4gICAgICBpID0gQ2xhc3Nlcy5sZW5ndGg7XG4gICAgICBpLS07XG4gICAgICBwYXRjaENsYXNzKENsYXNzZXNbaV0pXG4gICAgKSB7fVxuICAgIChkb2N1bWVudC5jcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24gKG5hbWUsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBpcyA9IGdldElzKG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIGlzID9cbiAgICAgICAgcGF0Y2hlZENyZWF0ZUVsZW1lbnQuY2FsbCh0aGlzLCBuYW1lLCBzZWNvbmRBcmd1bWVudChpcykpIDpcbiAgICAgICAgcGF0Y2hlZENyZWF0ZUVsZW1lbnQuY2FsbCh0aGlzLCBuYW1lKTtcbiAgICB9KTtcbiAgICBpZiAoIVYwKSB7XG4gICAgICBqdXN0U2V0dXAgPSB0cnVlO1xuICAgICAgZG9jdW1lbnRbUkVHSVNURVJfRUxFTUVOVF0oJycpO1xuICAgIH1cbiAgfVxuICBcbiAgLy8gaWYgY3VzdG9tRWxlbWVudHMgaXMgbm90IHRoZXJlIGF0IGFsbFxuICBpZiAoIWN1c3RvbUVsZW1lbnRzIHx8IHBvbHlmaWxsID09PSAnZm9yY2UnKSBwb2x5ZmlsbFYxKCk7XG4gIGVsc2Uge1xuICAgIC8vIGlmIGF2YWlsYWJsZSB0ZXN0IGV4dGVuZHMgd29yayBhcyBleHBlY3RlZFxuICAgIHRyeSB7XG4gICAgICAoZnVuY3Rpb24gKERSRSwgb3B0aW9ucywgbmFtZSkge1xuICAgICAgICBvcHRpb25zW0VYVEVORFNdID0gJ2EnO1xuICAgICAgICBEUkUucHJvdG90eXBlID0gY3JlYXRlKEhUTUxBbmNob3JFbGVtZW50LnByb3RvdHlwZSk7XG4gICAgICAgIERSRS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBEUkU7XG4gICAgICAgIHdpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUobmFtZSwgRFJFLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGdldEF0dHJpYnV0ZS5jYWxsKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnLCB7aXM6IG5hbWV9KSwgJ2lzJykgIT09IG5hbWUgfHxcbiAgICAgICAgICAodXNhYmxlQ3VzdG9tRWxlbWVudHMgJiYgZ2V0QXR0cmlidXRlLmNhbGwobmV3IERSRSgpLCAnaXMnKSAhPT0gbmFtZSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhyb3cgb3B0aW9ucztcbiAgICAgICAgfVxuICAgICAgfShcbiAgICAgICAgZnVuY3Rpb24gRFJFKCkge1xuICAgICAgICAgIHJldHVybiBSZWZsZWN0LmNvbnN0cnVjdChIVE1MQW5jaG9yRWxlbWVudCwgW10sIERSRSk7XG4gICAgICAgIH0sXG4gICAgICAgIHt9LFxuICAgICAgICAnZG9jdW1lbnQtcmVnaXN0ZXItZWxlbWVudC1hJ1xuICAgICAgKSk7XG4gICAgfSBjYXRjaChvX08pIHtcbiAgICAgIC8vIG9yIGZvcmNlIHRoZSBwb2x5ZmlsbCBpZiBub3RcbiAgICAgIC8vIGFuZCBrZWVwIGludGVybmFsIG9yaWdpbmFsIHJlZmVyZW5jZVxuICAgICAgcG9seWZpbGxWMSgpO1xuICAgIH1cbiAgfVxuICBcbiAgdHJ5IHtcbiAgICBjcmVhdGVFbGVtZW50LmNhbGwoZG9jdW1lbnQsICdhJywgJ2EnKTtcbiAgfSBjYXRjaChGaXJlRm94KSB7XG4gICAgc2Vjb25kQXJndW1lbnQgPSBmdW5jdGlvbiAoaXMpIHtcbiAgICAgIHJldHVybiB7aXM6IGlzLnRvTG93ZXJDYXNlKCl9O1xuICAgIH07XG4gIH1cbiAgXG59XG5cbmV4cG9ydHMuaW5zdGFsbEN1c3RvbUVsZW1lbnRzID0gaW5zdGFsbEN1c3RvbUVsZW1lbnRzO1xuXG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQ29uc3RydWN0cyBhIEVTNi9Qcm9taXNlcyBBKyBQcm9taXNlIGluc3RhbmNlLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtmdW5jdGlvbihmdW5jdGlvbigqPSksIGZ1bmN0aW9uICgqPSkpfSByZXNvbHZlclxuICovXG5mdW5jdGlvbiBQcm9taXNlKHJlc29sdmVyKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBQcm9taXNlKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0NvbnN0cnVjdG9yIFByb21pc2UgcmVxdWlyZXMgYG5ld2AnKTtcbiAgfVxuICBpZiAoIWlzRnVuY3Rpb24ocmVzb2x2ZXIpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignTXVzdCBwYXNzIHJlc29sdmVyIGZ1bmN0aW9uJyk7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge2Z1bmN0aW9uKHRoaXM6UHJvbWlzZSwqPSxmdW5jdGlvbigqPSksZnVuY3Rpb24oKj0pLERlZmVycmVkKTohUHJvbWlzZX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuX3N0YXRlID0gUGVuZGluZ1Byb21pc2U7XG5cbiAgLyoqXG4gICAqIEB0eXBlIHsqfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5fdmFsdWUgPSBbXTtcblxuICAvKipcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLl9pc0NoYWluRW5kID0gdHJ1ZTtcblxuICBkb1Jlc29sdmUoXG4gICAgdGhpcyxcbiAgICBhZG9wdGVyKHRoaXMsIEZ1bGZpbGxlZFByb21pc2UpLFxuICAgIGFkb3B0ZXIodGhpcywgUmVqZWN0ZWRQcm9taXNlKSxcbiAgICB7IHRoZW46IHJlc29sdmVyIH1cbiAgKTtcbn1cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgUHVibGljIEluc3RhbmNlIE1ldGhvZHNcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgcHJvbWlzZSBpbnN0YW5jZSB0aGF0IHdpbGwgcmVjZWl2ZSB0aGUgcmVzdWx0IG9mIHRoaXMgcHJvbWlzZVxuICogYXMgaW5wdXRzIHRvIHRoZSBvbkZ1bGZpbGxlZCBvciBvblJlamVjdGVkIGNhbGxiYWNrcy5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCopfSBvbkZ1bGZpbGxlZFxuICogQHBhcmFtIHtmdW5jdGlvbigqKX0gb25SZWplY3RlZFxuICovXG5Qcm9taXNlLnByb3RvdHlwZS50aGVuID0gZnVuY3Rpb24ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcbiAgb25GdWxmaWxsZWQgPSBpc0Z1bmN0aW9uKG9uRnVsZmlsbGVkKSA/IG9uRnVsZmlsbGVkIDogdm9pZCAwO1xuICBvblJlamVjdGVkID0gaXNGdW5jdGlvbihvblJlamVjdGVkKSA/IG9uUmVqZWN0ZWQgOiB2b2lkIDA7XG5cbiAgaWYgKG9uRnVsZmlsbGVkIHx8IG9uUmVqZWN0ZWQpIHtcbiAgICB0aGlzLl9pc0NoYWluRW5kID0gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gdGhpcy5fc3RhdGUoXG4gICAgdGhpcy5fdmFsdWUsXG4gICAgb25GdWxmaWxsZWQsXG4gICAgb25SZWplY3RlZFxuICApO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHByb21pc2UgdGhhdCB3aWxsIGhhbmRsZSB0aGUgcmVqZWN0ZWQgc3RhdGUgb2YgdGhpcyBwcm9taXNlLlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKil9IG9uUmVqZWN0ZWRcbiAqIEByZXR1cm5zIHshUHJvbWlzZX1cbiAqL1xuUHJvbWlzZS5wcm90b3R5cGUuY2F0Y2ggPSBmdW5jdGlvbihvblJlamVjdGVkKSB7XG4gIHJldHVybiB0aGlzLnRoZW4odm9pZCAwLCBvblJlamVjdGVkKTtcbn07XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gIFB1YmxpYyBTdGF0aWMgTWV0aG9kc1xuICoqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bGZpbGxlZCBQcm9taXNlIG9mIHZhbHVlLiBJZiB2YWx1ZSBpcyBpdHNlbGYgYSB0aGVuLWFibGUsXG4gKiByZXNvbHZlcyB3aXRoIHRoZSB0aGVuLWFibGUncyB2YWx1ZS5cbiAqXG4gKiBAdGhpcyB7IVByb21pc2V9XG4gKiBAcGFyYW0geyo9fSB2YWx1ZVxuICogQHJldHVybnMgeyFQcm9taXNlfVxuICovXG5Qcm9taXNlLnJlc29sdmUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuICB2YXIgcHJvbWlzZTtcblxuICBpZiAoaXNPYmplY3QodmFsdWUpICYmIHZhbHVlIGluc3RhbmNlb2YgdGhpcykge1xuICAgIHByb21pc2UgPSB2YWx1ZTtcbiAgfSBlbHNlIHtcbiAgICBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uKHJlc29sdmUpIHtcbiAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2V9ICovKHByb21pc2UpO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgcmVqZWN0ZWQgUHJvbWlzZSBvZiByZWFzb24uXG4gKlxuICogQHRoaXMgeyFQcm9taXNlfVxuICogQHBhcmFtIHsqPX0gcmVhc29uXG4gKiBAcmV0dXJucyB7IVByb21pc2V9XG4gKi9cblByb21pc2UucmVqZWN0ID0gZnVuY3Rpb24ocmVhc29uKSB7XG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG4gIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uKF8sIHJlamVjdCkge1xuICAgIHJlamVjdChyZWFzb24pO1xuICB9KTtcblxuICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZX0gKi8ocHJvbWlzZSk7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBQcm9taXNlIHRoYXQgd2lsbCByZXNvbHZlIHdpdGggYW4gYXJyYXkgb2YgdGhlIHZhbHVlcyBvZiB0aGVcbiAqIHBhc3NlZCBpbiBwcm9taXNlcy4gSWYgYW55IHByb21pc2UgcmVqZWN0cywgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbFxuICogcmVqZWN0LlxuICpcbiAqIEB0aGlzIHshUHJvbWlzZX1cbiAqIEBwYXJhbSB7IUFycmF5PFByb21pc2V8Kj59IHByb21pc2VzXG4gKiBAcmV0dXJucyB7IVByb21pc2V9XG4gKi9cblByb21pc2UuYWxsID0gZnVuY3Rpb24ocHJvbWlzZXMpIHtcbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcbiAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFyIGxlbmd0aCA9IHByb21pc2VzLmxlbmd0aDtcbiAgICB2YXIgdmFsdWVzID0gbmV3IEFycmF5KGxlbmd0aCk7XG5cbiAgICBpZiAobGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZSh2YWx1ZXMpO1xuICAgIH1cblxuICAgIGVhY2gocHJvbWlzZXMsIGZ1bmN0aW9uKHByb21pc2UsIGluZGV4KSB7XG4gICAgICBDb25zdHJ1Y3Rvci5yZXNvbHZlKHByb21pc2UpLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgdmFsdWVzW2luZGV4XSA9IHZhbHVlO1xuICAgICAgICBpZiAoLS1sZW5ndGggPT09IDApIHtcbiAgICAgICAgICByZXNvbHZlKHZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgIH0sIHJlamVjdCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlfSAqLyhwcm9taXNlKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIFByb21pc2UgdGhhdCB3aWxsIHJlc29sdmUgb3IgcmVqZWN0IGJhc2VkIG9uIHRoZSBmaXJzdFxuICogcmVzb2x2ZWQgb3IgcmVqZWN0ZWQgcHJvbWlzZS5cbiAqXG4gKiBAdGhpcyB7IVByb21pc2V9XG4gKiBAcGFyYW0geyFBcnJheTxQcm9taXNlfCo+fSBwcm9taXNlc1xuICogQHJldHVybnMgeyFQcm9taXNlfVxuICovXG5Qcm9taXNlLnJhY2UgPSBmdW5jdGlvbihwcm9taXNlcykge1xuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb21pc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBDb25zdHJ1Y3Rvci5yZXNvbHZlKHByb21pc2VzW2ldKS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZX0gKi8ocHJvbWlzZSk7XG59O1xuXG52YXIgb25Qb3NzaWJseVVuaGFuZGxlZFJlamVjdGlvbiA9IGZ1bmN0aW9uKHJlYXNvbiwgcHJvbWlzZSkge1xuICB0aHJvdyByZWFzb247XG59O1xuXG4vKipcbiAqIEFuIGludGVybmFsIHVzZSBzdGF0aWMgZnVuY3Rpb24uXG4gKi9cblByb21pc2UuX292ZXJyaWRlVW5oYW5kbGVkRXhjZXB0aW9uSGFuZGxlciA9IGZ1bmN0aW9uKGhhbmRsZXIpIHtcbiAgb25Qb3NzaWJseVVuaGFuZGxlZFJlamVjdGlvbiA9IGhhbmRsZXI7XG59O1xuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICBQcml2YXRlIGZ1bmN0aW9uc1xuICoqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbi8qKlxuICogVGhlIEZ1bGZpbGxlZCBQcm9taXNlIHN0YXRlLiBDYWxscyBvbkZ1bGZpbGxlZCB3aXRoIHRoZSByZXNvbHZlZCB2YWx1ZSBvZlxuICogdGhpcyBwcm9taXNlLCBjcmVhdGluZyBhIG5ldyBwcm9taXNlLlxuICpcbiAqIElmIHRoZXJlIGlzIG5vIG9uRnVsZmlsbGVkLCByZXR1cm5zIHRoZSBjdXJyZW50IHByb21pc2UgdG8gYXZvaWQgYW4gcHJvbWlzZVxuICogaW5zdGFuY2UuXG4gKlxuICogQHRoaXMgeyFQcm9taXNlfSBUaGUgY3VycmVudCBwcm9taXNlXG4gKiBAcGFyYW0geyo9fSB2YWx1ZSBUaGUgY3VycmVudCBwcm9taXNlJ3MgcmVzb2x2ZWQgdmFsdWUuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCo9KT19IG9uRnVsZmlsbGVkXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCo9KT19IHVudXNlZFxuICogQHBhcmFtIHtEZWZlcnJlZH0gZGVmZXJyZWQgQSBkZWZlcnJlZCBvYmplY3QgdGhhdCBob2xkcyBhIHByb21pc2UgYW5kIGl0c1xuICogICAgIHJlc29sdmUgYW5kIHJlamVjdCBmdW5jdGlvbnMuIEl0IElTIE5PVCBwYXNzZWQgd2hlbiBjYWxsZWQgZnJvbVxuICogICAgIFByb21pc2UjdGhlbiB0byBzYXZlIGFuIG9iamVjdCBpbnN0YW5jZSAoc2luY2Ugd2UgbWF5IHJldHVybiB0aGUgY3VycmVudFxuICogICAgIHByb21pc2UpLiBJdCBJUyBwYXNzZWQgaW4gd2hlbiBhZG9wdGluZyB0aGUgRnVsZmlsbGVkIHN0YXRlIGZyb20gdGhlXG4gKiAgICAgUGVuZGluZyBzdGF0ZS5cbiAqIEByZXR1cm5zIHshUHJvbWlzZX1cbiAqL1xuZnVuY3Rpb24gRnVsZmlsbGVkUHJvbWlzZSh2YWx1ZSwgb25GdWxmaWxsZWQsIHVudXNlZCwgZGVmZXJyZWQpIHtcbiAgaWYgKCFvbkZ1bGZpbGxlZCkge1xuICAgIGRlZmVycmVkQWRvcHQoZGVmZXJyZWQsIEZ1bGZpbGxlZFByb21pc2UsIHZhbHVlKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBpZiAoIWRlZmVycmVkKSB7XG4gICAgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQodGhpcy5jb25zdHJ1Y3Rvcik7XG4gIH1cbiAgZGVmZXIodHJ5Q2F0Y2hEZWZlcnJlZChkZWZlcnJlZCwgb25GdWxmaWxsZWQsIHZhbHVlKSk7XG4gIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufVxuXG4vKipcbiAqIFRoZSBSZWplY3RlZCBQcm9taXNlIHN0YXRlLiBDYWxscyBvblJlamVjdGVkIHdpdGggdGhlIHJlc29sdmVkIHZhbHVlIG9mXG4gKiB0aGlzIHByb21pc2UsIGNyZWF0aW5nIGEgbmV3IHByb21pc2UuXG4gKlxuICogSWYgdGhlcmUgaXMgbm8gb25SZWplY3RlZCwgcmV0dXJucyB0aGUgY3VycmVudCBwcm9taXNlIHRvIGF2b2lkIGFuIHByb21pc2VcbiAqIGluc3RhbmNlLlxuICpcbiAqIEB0aGlzIHshUHJvbWlzZX0gVGhlIGN1cnJlbnQgcHJvbWlzZVxuICogQHBhcmFtIHsqPX0gcmVhc29uIFRoZSBjdXJyZW50IHByb21pc2UncyByZWplY3Rpb24gcmVhc29uLlxuICogQHBhcmFtIHtmdW5jdGlvbigqPSk9fSB1bnVzZWRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKj0pPX0gb25SZWplY3RlZFxuICogQHBhcmFtIHtEZWZlcnJlZH0gZGVmZXJyZWQgQSBkZWZlcnJlZCBvYmplY3QgdGhhdCBob2xkcyBhIHByb21pc2UgYW5kIGl0c1xuICogICAgIHJlc29sdmUgYW5kIHJlamVjdCBmdW5jdGlvbnMuIEl0IElTIE5PVCBwYXNzZWQgd2hlbiBjYWxsZWQgZnJvbVxuICogICAgIFByb21pc2UjdGhlbiB0byBzYXZlIGFuIG9iamVjdCBpbnN0YW5jZSAoc2luY2Ugd2UgbWF5IHJldHVybiB0aGUgY3VycmVudFxuICogICAgIHByb21pc2UpLiBJdCBJUyBwYXNzZWQgaW4gd2hlbiBhZG9wdGluZyB0aGUgUmVqZWN0ZWQgc3RhdGUgZnJvbSB0aGVcbiAqICAgICBQZW5kaW5nIHN0YXRlLlxuICogQHJldHVybnMgeyFQcm9taXNlfVxuICovXG5mdW5jdGlvbiBSZWplY3RlZFByb21pc2UocmVhc29uLCB1bnVzZWQsIG9uUmVqZWN0ZWQsIGRlZmVycmVkKSB7XG4gIGlmICghb25SZWplY3RlZCkge1xuICAgIGRlZmVycmVkQWRvcHQoZGVmZXJyZWQsIFJlamVjdGVkUHJvbWlzZSwgcmVhc29uKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBpZiAoIWRlZmVycmVkKSB7XG4gICAgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQodGhpcy5jb25zdHJ1Y3Rvcik7XG4gIH1cbiAgZGVmZXIodHJ5Q2F0Y2hEZWZlcnJlZChkZWZlcnJlZCwgb25SZWplY3RlZCwgcmVhc29uKSk7XG4gIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufVxuXG4vKipcbiAqIFRoZSBQZW5kaW5nIFByb21pc2Ugc3RhdGUuIEV2ZW50dWFsbHkgY2FsbHMgb25GdWxmaWxsZWQgb25jZSB0aGUgcHJvbWlzZSBoYXNcbiAqIHJlc29sdmVkLCBvciBvblJlamVjdGVkIG9uY2UgdGhlIHByb21pc2UgcmVqZWN0cy5cbiAqXG4gKiBJZiB0aGVyZSBpcyBubyBvbkZ1bGZpbGxlZCBhbmQgbm8gb25SZWplY3RlZCwgcmV0dXJucyB0aGUgY3VycmVudCBwcm9taXNlIHRvXG4gKiBhdm9pZCBhbiBwcm9taXNlIGluc3RhbmNlLlxuICpcbiAqIEB0aGlzIHshUHJvbWlzZX0gVGhlIGN1cnJlbnQgcHJvbWlzZVxuICogQHBhcmFtIHsqPX0gcXVldWUgVGhlIGN1cnJlbnQgcHJvbWlzZSdzIHBlbmRpbmcgcHJvbWlzZXMgcXVldWUuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCo9KT19IG9uRnVsZmlsbGVkXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCo9KT19IG9uUmVqZWN0ZWRcbiAqIEBwYXJhbSB7RGVmZXJyZWR9IGRlZmVycmVkIEEgZGVmZXJyZWQgb2JqZWN0IHRoYXQgaG9sZHMgYSBwcm9taXNlIGFuZCBpdHNcbiAqICAgICByZXNvbHZlIGFuZCByZWplY3QgZnVuY3Rpb25zLiBJdCBJUyBOT1QgcGFzc2VkIHdoZW4gY2FsbGVkIGZyb21cbiAqICAgICBQcm9taXNlI3RoZW4gdG8gc2F2ZSBhbiBvYmplY3QgaW5zdGFuY2UgKHNpbmNlIHdlIG1heSByZXR1cm4gdGhlIGN1cnJlbnRcbiAqICAgICBwcm9taXNlKS4gSXQgSVMgcGFzc2VkIGluIHdoZW4gYWRvcHRpbmcgdGhlIFBlbmRpbmcgc3RhdGUgZnJvbSB0aGVcbiAqICAgICBQZW5kaW5nIHN0YXRlIG9mIGFub3RoZXIgcHJvbWlzZS5cbiAqIEByZXR1cm5zIHshUHJvbWlzZX1cbiAqL1xuZnVuY3Rpb24gUGVuZGluZ1Byb21pc2UocXVldWUsIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCBkZWZlcnJlZCkge1xuICBpZiAoIWRlZmVycmVkKSB7XG4gICAgaWYgKCFvbkZ1bGZpbGxlZCAmJiAhb25SZWplY3RlZCkgeyByZXR1cm4gdGhpczsgfVxuICAgIGRlZmVycmVkID0gbmV3IERlZmVycmVkKHRoaXMuY29uc3RydWN0b3IpO1xuICB9XG4gIHF1ZXVlLnB1c2goe1xuICAgIGRlZmVycmVkOiBkZWZlcnJlZCxcbiAgICBvbkZ1bGZpbGxlZDogb25GdWxmaWxsZWQgfHwgZGVmZXJyZWQucmVzb2x2ZSxcbiAgICBvblJlamVjdGVkOiBvblJlamVjdGVkIHx8IGRlZmVycmVkLnJlamVjdFxuICB9KTtcbiAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59XG5cbi8qKlxuICogQ29uc3RydWN0cyBhIGRlZmVycmVkIGluc3RhbmNlIHRoYXQgaG9sZHMgYSBwcm9taXNlIGFuZCBpdHMgcmVzb2x2ZSBhbmRcbiAqIHJlamVjdCBmdW5jdGlvbnMuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIERlZmVycmVkKFByb21pc2UpIHtcbiAgdmFyIGRlZmVycmVkID0gdGhpcztcbiAgLyoqIEB0eXBlIHshUHJvbWlzZX0gKi9cbiAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgLyoqIEB0eXBlIHtmdW5jdGlvbigqPSl9ICovXG4gICAgZGVmZXJyZWQucmVzb2x2ZSA9IHJlc29sdmU7XG5cbiAgICAvKiogQHR5cGUge2Z1bmN0aW9uKCo9KX0gKi9cbiAgICBkZWZlcnJlZC5yZWplY3QgPSByZWplY3Q7XG4gIH0pO1xuICByZXR1cm4gZGVmZXJyZWQ7XG59XG5cbi8qKlxuICogVHJhbnNpdGlvbnMgdGhlIHN0YXRlIG9mIHByb21pc2UgdG8gYW5vdGhlciBzdGF0ZS4gVGhpcyBpcyBvbmx5IGV2ZXIgY2FsbGVkXG4gKiBvbiB3aXRoIGEgcHJvbWlzZSB0aGF0IGlzIGN1cnJlbnRseSBpbiB0aGUgUGVuZGluZyBzdGF0ZS5cbiAqXG4gKiBAcGFyYW0geyFQcm9taXNlfSBwcm9taXNlXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHRoaXM6UHJvbWlzZSwqPSxmdW5jdGlvbigqPSksZnVuY3Rpb24oKj0pLERlZmVycmVkKTohUHJvbWlzZX0gc3RhdGVcbiAqIEBwYXJhbSB7Kj19IHZhbHVlXG4gKi9cbmZ1bmN0aW9uIGFkb3B0KHByb21pc2UsIHN0YXRlLCB2YWx1ZSwgYWRvcHRlZSkge1xuICB2YXIgcXVldWUgPSBwcm9taXNlLl92YWx1ZTtcbiAgcHJvbWlzZS5fc3RhdGUgPSBzdGF0ZTtcbiAgcHJvbWlzZS5fdmFsdWUgPSB2YWx1ZTtcblxuICBpZiAoYWRvcHRlZSAmJiBzdGF0ZSA9PT0gUGVuZGluZ1Byb21pc2UpIHtcbiAgICBhZG9wdGVlLl9zdGF0ZSh2YWx1ZSwgdm9pZCAwLCB2b2lkIDAsIHtcbiAgICAgIHByb21pc2U6IHByb21pc2UsXG4gICAgICByZXNvbHZlOiB2b2lkIDAsXG4gICAgICByZWplY3Q6IHZvaWQgMFxuICAgIH0pO1xuICB9XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgIHZhciBuZXh0ID0gcXVldWVbaV07XG4gICAgcHJvbWlzZS5fc3RhdGUoXG4gICAgICB2YWx1ZSxcbiAgICAgIG5leHQub25GdWxmaWxsZWQsXG4gICAgICBuZXh0Lm9uUmVqZWN0ZWQsXG4gICAgICBuZXh0LmRlZmVycmVkXG4gICAgKTtcbiAgfVxuICBxdWV1ZS5sZW5ndGggPSAwO1xuXG4gIC8vIERldGVybWluZSBpZiB0aGlzIHJlamVjdGVkIHByb21pc2Ugd2lsbCBiZSBcImhhbmRsZWRcIi5cbiAgaWYgKHN0YXRlID09PSBSZWplY3RlZFByb21pc2UgJiYgcHJvbWlzZS5faXNDaGFpbkVuZCkge1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBpZiAocHJvbWlzZS5faXNDaGFpbkVuZCkge1xuICAgICAgICBvblBvc3NpYmx5VW5oYW5kbGVkUmVqZWN0aW9uKHZhbHVlLCBwcm9taXNlKTtcbiAgICAgIH1cbiAgICB9LCAwKTtcbiAgfVxufVxuXG4vKipcbiAqIEEgcGFydGlhbCBhcHBsaWNhdGlvbiBvZiBhZG9wdC5cbiAqXG4gKiBAcGFyYW0geyFQcm9taXNlfSBwcm9taXNlXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHRoaXM6UHJvbWlzZSwqPSxmdW5jdGlvbigqPSksZnVuY3Rpb24oKj0pLERlZmVycmVkKTohUHJvbWlzZX0gc3RhdGVcbiAqIEByZXR1cm5zIHtmdW5jdGlvbigqPSl9XG4gKi9cbmZ1bmN0aW9uIGFkb3B0ZXIocHJvbWlzZSwgc3RhdGUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgYWRvcHQocHJvbWlzZSwgc3RhdGUsIHZhbHVlKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBVcGRhdGVzIGEgZGVmZXJyZWQgcHJvbWlzZXMgc3RhdGUuIE5lY2Vzc2FyeSBmb3IgdXBkYXRpbmcgYW4gYWRvcHRpbmdcbiAqIHByb21pc2UncyBzdGF0ZSB3aGVuIHRoZSBhZG9wdGVlIHJlc29sdmVzLlxuICpcbiAqIEBwYXJhbSB7P0RlZmVycmVkfSBkZWZlcnJlZFxuICogQHBhcmFtIHtmdW5jdGlvbih0aGlzOlByb21pc2UsKj0sZnVuY3Rpb24oKj0pLGZ1bmN0aW9uKCo9KSxEZWZlcnJlZCk6IVByb21pc2V9IHN0YXRlXG4gKiBAcGFyYW0geyo9fSB2YWx1ZVxuICovXG5mdW5jdGlvbiBkZWZlcnJlZEFkb3B0KGRlZmVycmVkLCBzdGF0ZSwgdmFsdWUpIHtcbiAgaWYgKGRlZmVycmVkKSB7XG4gICAgdmFyIHByb21pc2UgPSBkZWZlcnJlZC5wcm9taXNlO1xuICAgIHByb21pc2UuX3N0YXRlID0gc3RhdGU7XG4gICAgcHJvbWlzZS5fdmFsdWUgPSB2YWx1ZTtcbiAgfVxufVxuXG4vKipcbiAqIEEgbm8tb3AgZnVuY3Rpb24gdG8gcHJldmVudCBkb3VibGUgcmVzb2x2aW5nLlxuICovXG5mdW5jdGlvbiBub29wKCkge31cblxuLyoqXG4gKiBUZXN0cyBpZiBmbiBpcyBhIEZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHsqfSBmblxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oZm4pIHtcbiAgcmV0dXJuIHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuLyoqXG4gKiBUZXN0cyBpZiBmbiBpcyBhbiBPYmplY3RcbiAqXG4gKiBAcGFyYW0geyp9IG9ialxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KG9iaikge1xuICByZXR1cm4gb2JqID09PSBPYmplY3Qob2JqKTtcbn1cblxuLyoqXG4gKiBJdGVyYXRlcyBvdmVyIGVhY2ggZWxlbWVudCBvZiBhbiBhcnJheSwgY2FsbGluZyB0aGUgaXRlcmF0b3Igd2l0aCB0aGVcbiAqIGVsZW1lbnQgYW5kIGl0cyBpbmRleC5cbiAqXG4gKiBAcGFyYW0geyFBcnJheX0gY29sbGVjdGlvblxuICogQHBhcmFtIHtmdW5jdGlvbigqPSxudW1iZXIpfSBpdGVyYXRvclxuICovXG5mdW5jdGlvbiBlYWNoKGNvbGxlY3Rpb24sIGl0ZXJhdG9yKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY29sbGVjdGlvbi5sZW5ndGg7IGkrKykge1xuICAgIGl0ZXJhdG9yKGNvbGxlY3Rpb25baV0sIGkpO1xuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBhdHRlbXB0IHRvIHJlc29sdmUgdGhlIGRlZmVycmVkIHdpdGggdGhlIHJldHVyblxuICogb2YgZm4uIElmIGFueSBlcnJvciBpcyByYWlzZWQsIHJlamVjdHMgaW5zdGVhZC5cbiAqXG4gKiBAcGFyYW0geyFEZWZlcnJlZH0gZGVmZXJyZWRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKj0pfSBmblxuICogQHBhcmFtIHsqfSBhcmdcbiAqIEByZXR1cm5zIHtmdW5jdGlvbigpfVxuICovXG5mdW5jdGlvbiB0cnlDYXRjaERlZmVycmVkKGRlZmVycmVkLCBmbiwgYXJnKSB7XG4gIHZhciBwcm9taXNlID0gZGVmZXJyZWQucHJvbWlzZTtcbiAgdmFyIHJlc29sdmUgPSBkZWZlcnJlZC5yZXNvbHZlO1xuICB2YXIgcmVqZWN0ID0gZGVmZXJyZWQucmVqZWN0O1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciByZXN1bHQgPSBmbihhcmcpO1xuICAgICAgZG9SZXNvbHZlKHByb21pc2UsIHJlc29sdmUsIHJlamVjdCwgcmVzdWx0LCByZXN1bHQpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJlamVjdChlKTtcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogUXVldWVzIGFuZCBleGVjdXRlcyBtdWx0aXBsZSBkZWZlcnJlZCBmdW5jdGlvbnMgb24gYW5vdGhlciBydW4gbG9vcC5cbiAqL1xudmFyIGRlZmVyID0gKGZ1bmN0aW9uKCkge1xuICAvKipcbiAgICogRGVmZXJzIGZuIHRvIGFub3RoZXIgcnVuIGxvb3AuXG4gICAqL1xuICB2YXIgc2NoZWR1bGVGbHVzaDtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5wb3N0TWVzc2FnZSkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZmx1c2gpO1xuICAgIHNjaGVkdWxlRmx1c2ggPSBmdW5jdGlvbigpIHtcbiAgICAgIHdpbmRvdy5wb3N0TWVzc2FnZSgnbWFjcm8tdGFzaycsICcqJyk7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBzY2hlZHVsZUZsdXNoID0gZnVuY3Rpb24oKSB7XG4gICAgICBzZXRUaW1lb3V0KGZsdXNoLCAwKTtcbiAgICB9O1xuICB9XG5cbiAgdmFyIHF1ZXVlID0gbmV3IEFycmF5KDE2KTtcbiAgdmFyIGxlbmd0aCA9IDA7XG5cbiAgZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGZuID0gcXVldWVbaV07XG4gICAgICBxdWV1ZVtpXSA9IG51bGw7XG4gICAgICBmbigpO1xuICAgIH1cbiAgICBsZW5ndGggPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gZm5cbiAgICovXG4gIGZ1bmN0aW9uIGRlZmVyKGZuKSB7XG4gICAgaWYgKGxlbmd0aCA9PT0gMCkgeyBzY2hlZHVsZUZsdXNoKCk7IH1cbiAgICBxdWV1ZVtsZW5ndGgrK10gPSBmbjtcbiAgfVxuXG4gIHJldHVybiBkZWZlcjtcbn0pKCk7XG5cbi8qKlxuICogVGhlIFByb21pc2UgcmVzb2x1dGlvbiBwcm9jZWR1cmUuXG4gKiBodHRwczovL2dpdGh1Yi5jb20vcHJvbWlzZXMtYXBsdXMvcHJvbWlzZXMtc3BlYyN0aGUtcHJvbWlzZS1yZXNvbHV0aW9uLXByb2NlZHVyZVxuICpcbiAqIEBwYXJhbSB7IVByb21pc2V9IHByb21pc2VcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKj0pfSByZXNvbHZlXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCo9KX0gcmVqZWN0XG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcGFyYW0geyo9fSBjb250ZXh0XG4gKi9cbmZ1bmN0aW9uIGRvUmVzb2x2ZShwcm9taXNlLCByZXNvbHZlLCByZWplY3QsIHZhbHVlLCBjb250ZXh0KSB7XG4gIHZhciBfcmVqZWN0ID0gcmVqZWN0O1xuICB2YXIgdGhlbjtcbiAgdmFyIF9yZXNvbHZlO1xuICB0cnkge1xuICAgIGlmICh2YWx1ZSA9PT0gcHJvbWlzZSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGZ1bGZpbGwgcHJvbWlzZSB3aXRoIGl0c2VsZicpO1xuICAgIH1cbiAgICB2YXIgaXNPYmogPSBpc09iamVjdCh2YWx1ZSk7XG4gICAgaWYgKGlzT2JqICYmIHZhbHVlIGluc3RhbmNlb2YgcHJvbWlzZS5jb25zdHJ1Y3Rvcikge1xuICAgICAgYWRvcHQocHJvbWlzZSwgdmFsdWUuX3N0YXRlLCB2YWx1ZS5fdmFsdWUsIHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKGlzT2JqICYmICh0aGVuID0gdmFsdWUudGhlbikgJiYgaXNGdW5jdGlvbih0aGVuKSkge1xuICAgICAgX3Jlc29sdmUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBfcmVzb2x2ZSA9IF9yZWplY3QgPSBub29wO1xuICAgICAgICBkb1Jlc29sdmUocHJvbWlzZSwgcmVzb2x2ZSwgcmVqZWN0LCB2YWx1ZSwgdmFsdWUpO1xuICAgICAgfTtcbiAgICAgIF9yZWplY3QgPSBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAgICAgX3Jlc29sdmUgPSBfcmVqZWN0ID0gbm9vcDtcbiAgICAgICAgcmVqZWN0KHJlYXNvbik7XG4gICAgICB9O1xuICAgICAgdGhlbi5jYWxsKFxuICAgICAgICBjb250ZXh0LFxuICAgICAgICBmdW5jdGlvbih2YWx1ZSkgeyBfcmVzb2x2ZSh2YWx1ZSk7IH0sXG4gICAgICAgIGZ1bmN0aW9uKHJlYXNvbikgeyBfcmVqZWN0KHJlYXNvbik7IH1cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIF9yZWplY3QoZSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBQcm9taXNlO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQWxsb3dzIGZvciBydW50aW1lIGNvbmZpZ3VyYXRpb24uIEludGVybmFsbHksIHRoZSBydW50aW1lIHNob3VsZFxuICogdXNlIHRoZSBzcmMvY29uZmlnLmpzIG1vZHVsZSBmb3IgdmFyaW91cyBjb25zdGFudHMuIFdlIGNhbiB1c2UgdGhlXG4gKiBBTVBfQ09ORklHIGdsb2JhbCB0byB0cmFuc2xhdGUgdXNlci1kZWZpbmVkIGNvbmZpZ3VyYXRpb25zIHRvIHRoaXNcbiAqIG1vZHVsZS5cbiAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgc3RyaW5nPn1cbiAqL1xuY29uc3QgZW52ID0gc2VsZi5BTVBfQ09ORklHIHx8IHt9O1xuXG5jb25zdCB0aGlyZFBhcnR5RnJhbWVSZWdleCA9IHR5cGVvZiBlbnZbJ3RoaXJkUGFydHlGcmFtZVJlZ2V4J10gPT0gJ3N0cmluZycgP1xuICBuZXcgUmVnRXhwKGVudlsndGhpcmRQYXJ0eUZyYW1lUmVnZXgnXSkgOiBlbnZbJ3RoaXJkUGFydHlGcmFtZVJlZ2V4J107XG5cbmNvbnN0IGNkblByb3h5UmVnZXggPSB0eXBlb2YgZW52WydjZG5Qcm94eVJlZ2V4J10gPT0gJ3N0cmluZycgP1xuICBuZXcgUmVnRXhwKGVudlsnY2RuUHJveHlSZWdleCddKSA6IGVudlsnY2RuUHJveHlSZWdleCddO1xuXG4vKiogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBzdHJpbmd8Ym9vbGVhbnxSZWdFeHA+fSAqL1xuZXhwb3J0IGNvbnN0IHVybHMgPSB7XG4gIHRoaXJkUGFydHk6IGVudlsndGhpcmRQYXJ0eVVybCddIHx8ICdodHRwczovLzNwLmFtcHByb2plY3QubmV0JyxcbiAgdGhpcmRQYXJ0eUZyYW1lSG9zdDogZW52Wyd0aGlyZFBhcnR5RnJhbWVIb3N0J10gfHwgJ2FtcHByb2plY3QubmV0JyxcbiAgdGhpcmRQYXJ0eUZyYW1lUmVnZXg6IHRoaXJkUGFydHlGcmFtZVJlZ2V4IHx8IC9eZC1cXGQrXFwuYW1wcHJvamVjdFxcLm5ldCQvLFxuICBjZG46IGVudlsnY2RuVXJsJ10gfHwgJ2h0dHBzOi8vY2RuLmFtcHByb2plY3Qub3JnJyxcbiAgLyogTm90ZSB0aGF0IGNkblByb3h5UmVnZXggaXMgb25seSBldmVyIGNoZWNrZWQgYWdhaW5zdCBvcmlnaW5zXG4gICAqIChwcm90bzovL2hvc3RbOnBvcnRdKSBzbyBkb2VzIG5vdCBuZWVkIHRvIGNvbnNpZGVyIHBhdGhcbiAgICovXG4gIGNkblByb3h5UmVnZXg6IGNkblByb3h5UmVnZXggfHxcbiAgICAgIC9eaHR0cHM6XFwvXFwvKFthLXpBLVowLTlfLV0rXFwuKT9jZG5cXC5hbXBwcm9qZWN0XFwub3JnJC8sXG4gIGxvY2FsaG9zdFJlZ2V4OiAvXmh0dHBzPzpcXC9cXC9sb2NhbGhvc3QoOlxcZCspPyQvLFxuICBlcnJvclJlcG9ydGluZzogZW52WydlcnJvclJlcG9ydGluZ1VybCddIHx8XG4gICAgICAnaHR0cHM6Ly9hbXAtZXJyb3ItcmVwb3J0aW5nLmFwcHNwb3QuY29tL3InLFxuICBsb2NhbERldjogZW52Wydsb2NhbERldiddIHx8IGZhbHNlLFxufTtcblxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgdXJscyxcbn07XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtlbmRzV2l0aH0gZnJvbSAnLi9zdHJpbmcnO1xuaW1wb3J0IHtcbiAgaXNQcm94eU9yaWdpbixcbiAgcGFyc2VVcmxEZXByZWNhdGVkLFxuICB0cnlEZWNvZGVVcmlDb21wb25lbnQsXG59IGZyb20gJy4vdXJsJztcbmltcG9ydCB7dXJsc30gZnJvbSAnLi9jb25maWcnO1xuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIGNvb2tpZS4gVGhlIGNvb2tpZSBhY2Nlc3MgaXMgcmVzdHJpY3RlZCBhbmQgbXVzdFxuICogZ28gdGhyb3VnaCB0aGUgcHJpdmFjeSByZXZpZXcuIEJlZm9yZSB1c2luZyB0aGlzIG1ldGhvZCBwbGVhc2UgZmlsZSBhXG4gKiBHaXRIdWIgaXNzdWUgd2l0aCBcIlByaXZhY3kgUmV2aWV3XCIgbGFiZWwuXG4gKlxuICogUmV0dXJucyB0aGUgY29va2llJ3MgdmFsdWUgb3IgYG51bGxgLlxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICogQHJldHVybiB7P3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvb2tpZSh3aW4sIG5hbWUpIHtcbiAgY29uc3QgY29va2llU3RyaW5nID0gdHJ5R2V0RG9jdW1lbnRDb29raWVOb0lubGluZSh3aW4pO1xuICBpZiAoIWNvb2tpZVN0cmluZykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IGNvb2tpZXMgPSBjb29raWVTdHJpbmcuc3BsaXQoJzsnKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb29raWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgY29va2llID0gY29va2llc1tpXS50cmltKCk7XG4gICAgY29uc3QgZXEgPSBjb29raWUuaW5kZXhPZignPScpO1xuICAgIGlmIChlcSA9PSAtMSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmICh0cnlEZWNvZGVVcmlDb21wb25lbnQoY29va2llLnN1YnN0cmluZygwLCBlcSkudHJpbSgpKSA9PSBuYW1lKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGNvb2tpZS5zdWJzdHJpbmcoZXEgKyAxKS50cmltKCk7XG4gICAgICByZXR1cm4gdHJ5RGVjb2RlVXJpQ29tcG9uZW50KHZhbHVlLCB2YWx1ZSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIFRoaXMgbWV0aG9kIHNob3VsZCBub3QgYmUgaW5saW5lZCB0byBwcmV2ZW50IFRyeUNhdGNoIGRlb3B0aW1pemF0aW9uLlxuICogTm9JbmxpbmUga2V5d29yZCBhdCB0aGUgZW5kIG9mIGZ1bmN0aW9uIG5hbWUgYWxzbyBwcmV2ZW50cyBDbG9zdXJlIGNvbXBpbGVyXG4gKiBmcm9tIGlubGluaW5nIHRoZSBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHRyeUdldERvY3VtZW50Q29va2llTm9JbmxpbmUod2luKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHdpbi5kb2N1bWVudC5jb29raWU7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBBY3QgYXMgaWYgbm8gY29va2llIGlzIGF2YWlsYWJsZS4gRXhjZXB0aW9ucyBjYW4gYmUgdGhyb3duIHdoZW5cbiAgICAvLyBBTVAgZG9jcyBhcmUgb3BlbmVkIG9uIG9yaWdpbnMgdGhhdCBkbyBub3QgYWxsb3cgc2V0dGluZ1xuICAgIC8vIGNvb2tpZXMgc3VjaCBhcyBudWxsIG9yaWdpbnMuXG4gICAgcmV0dXJuICcnO1xuICB9XG59XG5cbi8qKlxuICogU2V0cyB0aGUgdmFsdWUgb2YgdGhlIGNvb2tpZS4gVGhlIGNvb2tpZSBhY2Nlc3MgaXMgcmVzdHJpY3RlZCBhbmQgbXVzdFxuICogZ28gdGhyb3VnaCB0aGUgcHJpdmFjeSByZXZpZXcuIEJlZm9yZSB1c2luZyB0aGlzIG1ldGhvZCBwbGVhc2UgZmlsZSBhXG4gKiBHaXRIdWIgaXNzdWUgd2l0aCBcIlByaXZhY3kgUmV2aWV3XCIgbGFiZWwuXG4gKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAqIEBwYXJhbSB7dGltZX0gZXhwaXJhdGlvblRpbWVcbiAqIEBwYXJhbSB7e1xuICogICBoaWdoZXN0QXZhaWxhYmxlRG9tYWluOihib29sZWFufHVuZGVmaW5lZCksXG4gKiAgIGRvbWFpbjooc3RyaW5nfHVuZGVmaW5lZClcbiAqIH09fSBvcHRfb3B0aW9uc1xuICogICAgIC0gaGlnaGVzdEF2YWlsYWJsZURvbWFpbjogSWYgdHJ1ZSwgc2V0IHRoZSBjb29raWUgYXQgdGhlIHdpZGVzdCBkb21haW5cbiAqICAgICAgIHNjb3BlIGFsbG93ZWQgYnkgdGhlIGJyb3dzZXIuIEUuZy4gb24gZXhhbXBsZS5jb20gaWYgd2UgYXJlIGN1cnJlbnRseVxuICogICAgICAgb24gd3d3LmV4YW1wbGUuY29tLlxuICogICAgIC0gZG9tYWluOiBFeHBsaWNpdCBkb21haW4gdG8gc2V0LlxuICogICAgIC0gYWxsb3dPblByb3h5T3JpZ2luOiBBbGxvdyBzZXR0aW5nIGEgY29va2llIG9uIHRoZSBBTVAgQ2FjaGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRDb29raWUod2luLCBuYW1lLCB2YWx1ZSwgZXhwaXJhdGlvblRpbWUsIG9wdF9vcHRpb25zKSB7XG4gIGNoZWNrT3JpZ2luRm9yU2V0dGluZ0Nvb2tpZSh3aW4sIG9wdF9vcHRpb25zLCBuYW1lKTtcbiAgaWYgKG9wdF9vcHRpb25zICYmIG9wdF9vcHRpb25zLmhpZ2hlc3RBdmFpbGFibGVEb21haW4pIHtcbiAgICBjb25zdCBwYXJ0cyA9IHdpbi5sb2NhdGlvbi5ob3N0bmFtZS5zcGxpdCgnLicpO1xuICAgIGxldCBkb21haW4gPSBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXTtcbiAgICBmb3IgKGxldCBpID0gcGFydHMubGVuZ3RoIC0gMjsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGRvbWFpbiA9IHBhcnRzW2ldICsgJy4nICsgZG9tYWluO1xuICAgICAgdHJ5U2V0Q29va2llKHdpbiwgbmFtZSwgdmFsdWUsIGV4cGlyYXRpb25UaW1lLCBkb21haW4pO1xuICAgICAgaWYgKGdldENvb2tpZSh3aW4sIG5hbWUpID09IHZhbHVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgbGV0IGRvbWFpbiA9IHVuZGVmaW5lZDtcbiAgaWYgKG9wdF9vcHRpb25zICYmIG9wdF9vcHRpb25zLmRvbWFpbikge1xuICAgIGRvbWFpbiA9IG9wdF9vcHRpb25zLmRvbWFpbjtcbiAgfVxuICB0cnlTZXRDb29raWUod2luLCBuYW1lLCB2YWx1ZSwgZXhwaXJhdGlvblRpbWUsIGRvbWFpbik7XG59XG5cbi8qKlxuICogQXR0ZW1wdCB0byBzZXQgYSBjb29raWUgd2l0aCB0aGUgZ2l2ZW4gcGFyYW1zLlxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gKiBAcGFyYW0ge3RpbWV9IGV4cGlyYXRpb25UaW1lXG4gKiBAcGFyYW0ge3N0cmluZ3x1bmRlZmluZWR9IGRvbWFpblxuICovXG5mdW5jdGlvbiB0cnlTZXRDb29raWUod2luLCBuYW1lLCB2YWx1ZSwgZXhwaXJhdGlvblRpbWUsIGRvbWFpbikge1xuICAvLyBXZSBkbyBub3QgYWxsb3cgc2V0dGluZyBjb29raWVzIG9uIHRoZSBkb21haW4gdGhhdCBjb250YWlucyBib3RoXG4gIC8vIHRoZSBjZG4uIGFuZCB3d3cuIGhvc3RzLlxuICBpZiAoZG9tYWluID09ICdhbXBwcm9qZWN0Lm9yZycpIHtcbiAgICAvLyBBY3RpdmVseSBkZWxldGUgdGhlbS5cbiAgICB2YWx1ZSA9ICdkZWxldGUnO1xuICAgIGV4cGlyYXRpb25UaW1lID0gMDtcbiAgfVxuICBjb25zdCBjb29raWUgPSBlbmNvZGVVUklDb21wb25lbnQobmFtZSkgKyAnPScgK1xuICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSArXG4gICAgICAnOyBwYXRoPS8nICtcbiAgICAgIChkb21haW4gPyAnOyBkb21haW49JyArIGRvbWFpbiA6ICcnKSArXG4gICAgICAnOyBleHBpcmVzPScgKyBuZXcgRGF0ZShleHBpcmF0aW9uVGltZSkudG9VVENTdHJpbmcoKTtcbiAgdHJ5IHtcbiAgICB3aW4uZG9jdW1lbnQuY29va2llID0gY29va2llO1xuICB9IGNhdGNoIChpZ25vcmUpIHtcbiAgICAvLyBEbyBub3QgdGhyb3cgaWYgc2V0dGluZyB0aGUgY29va2llIGZhaWxlZCBFeGNlcHRpb25zIGNhbiBiZSB0aHJvd25cbiAgICAvLyB3aGVuIEFNUCBkb2NzIGFyZSBvcGVuZWQgb24gb3JpZ2lucyB0aGF0IGRvIG5vdCBhbGxvdyBzZXR0aW5nXG4gICAgLy8gY29va2llcyBzdWNoIGFzIG51bGwgb3JpZ2lucy5cbiAgfVxufVxuXG4vKipcbiAqIFRocm93cyBpZiBhIGdpdmVuIGNvb2tpZSBzaG91bGQgbm90IGJlIHNldCBvbiB0aGUgZ2l2ZW4gb3JpZ2luLlxuICogVGhpcyBpcyBhIGRlZmVuc2UtaW4tZGVwdGguIENhbGxlcnMgc2hvdWxkIG5ldmVyIHJ1biBpbnRvIHRoaXMuXG4gKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7IU9iamVjdHx1bmRlZmluZWR9IG9wdGlvbnNcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEZvciB0aGUgZXJyb3IgbWVzc2FnZS5cbiAqL1xuZnVuY3Rpb24gY2hlY2tPcmlnaW5Gb3JTZXR0aW5nQ29va2llKHdpbiwgb3B0aW9ucywgbmFtZSkge1xuICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmFsbG93T25Qcm94eU9yaWdpbikge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoaXNQcm94eU9yaWdpbih3aW4ubG9jYXRpb24uaHJlZikpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Nob3VsZCBuZXZlciBhdHRlbXB0IHRvIHNldCBjb29raWUgb24gcHJveHkgb3JpZ2luOiAnXG4gICAgICAgICsgbmFtZSk7XG4gIH1cblxuICBjb25zdCBjdXJyZW50ID0gcGFyc2VVcmxEZXByZWNhdGVkKHdpbi5sb2NhdGlvbi5ocmVmKS5ob3N0bmFtZS50b0xvd2VyQ2FzZSgpO1xuICBjb25zdCBwcm94eSA9IHBhcnNlVXJsRGVwcmVjYXRlZCh1cmxzLmNkbikuaG9zdG5hbWUudG9Mb3dlckNhc2UoKTtcbiAgaWYgKGN1cnJlbnQgPT0gcHJveHkgfHwgZW5kc1dpdGgoY3VycmVudCwgJy4nICsgcHJveHkpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdTaG91bGQgbmV2ZXIgYXR0ZW1wdCB0byBzZXQgY29va2llIG9uIHByb3h5IG9yaWdpbi4nXG4gICAgICAgICsgJyAoaW4gZGVwdGggY2hlY2spOiAnICsgbmFtZSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge0RlZmVycmVkfSBmcm9tICcuL3V0aWxzL3Byb21pc2UnO1xuaW1wb3J0IHtjc3NFc2NhcGV9IGZyb20gJy4uL3RoaXJkX3BhcnR5L2Nzcy1lc2NhcGUvY3NzLWVzY2FwZSc7XG5pbXBvcnQge2Rldn0gZnJvbSAnLi9sb2cnO1xuaW1wb3J0IHtkaWN0fSBmcm9tICcuL3V0aWxzL29iamVjdCc7XG5pbXBvcnQge3N0YXJ0c1dpdGh9IGZyb20gJy4vc3RyaW5nJztcbmltcG9ydCB7dG9XaW59IGZyb20gJy4vdHlwZXMnO1xuXG5jb25zdCBIVE1MX0VTQ0FQRV9DSEFSUyA9IHtcbiAgJyYnOiAnJmFtcDsnLFxuICAnPCc6ICcmbHQ7JyxcbiAgJz4nOiAnJmd0OycsXG4gICdcIic6ICcmcXVvdDsnLFxuICBcIidcIjogJyYjeDI3OycsXG4gICdgJzogJyYjeDYwOycsXG59O1xuY29uc3QgSFRNTF9FU0NBUEVfUkVHRVggPSAvKCZ8PHw+fFwifCd8YCkvZztcblxuLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuZXhwb3J0IGNvbnN0IFVQR1JBREVfVE9fQ1VTVE9NRUxFTUVOVF9QUk9NSVNFID1cbiAgICAnX19BTVBfVVBHX1BSTSc7XG5cbi8qKiBAY29uc3Qge3N0cmluZ30gKi9cbmV4cG9ydCBjb25zdCBVUEdSQURFX1RPX0NVU1RPTUVMRU1FTlRfUkVTT0xWRVIgPVxuICAgICdfX0FNUF9VUEdfUkVTJztcblxuLyoqXG4gKiBXYWl0cyB1bnRpbCB0aGUgY2hpbGQgZWxlbWVudCBpcyBjb25zdHJ1Y3RlZC4gT25jZSB0aGUgY2hpbGQgaXMgZm91bmQsIHRoZVxuICogY2FsbGJhY2sgaXMgZXhlY3V0ZWQuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBwYXJlbnRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oIUVsZW1lbnQpOmJvb2xlYW59IGNoZWNrRnVuY1xuICogQHBhcmFtIHtmdW5jdGlvbigpfSBjYWxsYmFja1xuICovXG5leHBvcnQgZnVuY3Rpb24gd2FpdEZvckNoaWxkKHBhcmVudCwgY2hlY2tGdW5jLCBjYWxsYmFjaykge1xuICBpZiAoY2hlY2tGdW5jKHBhcmVudCkpIHtcbiAgICBjYWxsYmFjaygpO1xuICAgIHJldHVybjtcbiAgfVxuICAvKiogQGNvbnN0IHshV2luZG93fSAqL1xuICBjb25zdCB3aW4gPSB0b1dpbihwYXJlbnQub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldyk7XG4gIGlmICh3aW4uTXV0YXRpb25PYnNlcnZlcikge1xuICAgIC8qKiBAY29uc3Qge011dGF0aW9uT2JzZXJ2ZXJ9ICovXG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgd2luLk11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4ge1xuICAgICAgaWYgKGNoZWNrRnVuYyhwYXJlbnQpKSB7XG4gICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBvYnNlcnZlci5vYnNlcnZlKHBhcmVudCwge2NoaWxkTGlzdDogdHJ1ZX0pO1xuICB9IGVsc2Uge1xuICAgIC8qKiBAY29uc3Qge251bWJlcn0gKi9cbiAgICBjb25zdCBpbnRlcnZhbCA9IHdpbi5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBpZiAoY2hlY2tGdW5jKHBhcmVudCkpIHtcbiAgICAgICAgd2luLmNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfVxuICAgIH0sIC8qIG1pbGxpc2Vjb25kcyAqLyA1KTtcbiAgfVxufVxuXG4vKipcbiAqIFdhaXRzIHVudGlsIHRoZSBjaGlsZCBlbGVtZW50IGlzIGNvbnN0cnVjdGVkLiBPbmNlIHRoZSBjaGlsZCBpcyBmb3VuZCwgdGhlXG4gKiBwcm9taXNlIGlzIHJlc29sdmVkLlxuICogQHBhcmFtIHshRWxlbWVudH0gcGFyZW50XG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFFbGVtZW50KTpib29sZWFufSBjaGVja0Z1bmNcbiAqIEByZXR1cm4geyFQcm9taXNlfVxuICovXG5leHBvcnQgZnVuY3Rpb24gd2FpdEZvckNoaWxkUHJvbWlzZShwYXJlbnQsIGNoZWNrRnVuYykge1xuICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgd2FpdEZvckNoaWxkKHBhcmVudCwgY2hlY2tGdW5jLCByZXNvbHZlKTtcbiAgfSk7XG59XG5cbi8qKlxuICogV2FpdHMgZm9yIGRvY3VtZW50J3MgYm9keSB0byBiZSBhdmFpbGFibGUuXG4gKiBXaWxsIGJlIGRlcHJlY2F0ZWQgc29vbjsgdXNlIHtAbGluayBBbXBEb2Mjd2hlbkJvZHlBdmFpbGFibGV9IG9yXG4gKiBAe2xpbmsgRG9jdW1lbnRTdGF0ZSNvbkJvZHlBdmFpbGFibGV9IGluc3RlYWQuXG4gKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IGNhbGxiYWNrXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3YWl0Rm9yQm9keShkb2MsIGNhbGxiYWNrKSB7XG4gIHdhaXRGb3JDaGlsZChkb2MuZG9jdW1lbnRFbGVtZW50LCAoKSA9PiAhIWRvYy5ib2R5LCBjYWxsYmFjayk7XG59XG5cblxuLyoqXG4gKiBXYWl0cyBmb3IgZG9jdW1lbnQncyBib2R5IHRvIGJlIGF2YWlsYWJsZS5cbiAqIEBwYXJhbSB7IURvY3VtZW50fSBkb2NcbiAqIEByZXR1cm4geyFQcm9taXNlfVxuICovXG5leHBvcnQgZnVuY3Rpb24gd2FpdEZvckJvZHlQcm9taXNlKGRvYykge1xuICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgd2FpdEZvckJvZHkoZG9jLCByZXNvbHZlKTtcbiAgfSk7XG59XG5cblxuLyoqXG4gKiBSZW1vdmVzIHRoZSBlbGVtZW50LlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRWxlbWVudChlbGVtZW50KSB7XG4gIGlmIChlbGVtZW50LnBhcmVudEVsZW1lbnQpIHtcbiAgICBlbGVtZW50LnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudCk7XG4gIH1cbn1cblxuXG4vKipcbiAqIFJlbW92ZXMgYWxsIGNoaWxkIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgZWxlbWVudC5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHBhcmVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ2hpbGRyZW4ocGFyZW50KSB7XG4gIHdoaWxlIChwYXJlbnQuZmlyc3RDaGlsZCkge1xuICAgIHBhcmVudC5yZW1vdmVDaGlsZChwYXJlbnQuZmlyc3RDaGlsZCk7XG4gIH1cbn1cblxuXG4vKipcbiAqIENvcGllcyBhbGwgY2hpbGRyZW4gbm9kZXMgb2YgZWxlbWVudCBcImZyb21cIiB0byBlbGVtZW50IFwidG9cIi4gQ2hpbGQgbm9kZXNcbiAqIGFyZSBkZWVwbHkgY2xvbmVkLiBOb3RpY2UsIHRoYXQgdGhpcyBtZXRob2Qgc2hvdWxkIGJlIHVzZWQgd2l0aCBjYXJlIGFuZFxuICogcHJlZmVyYWJseSBvbiBzbWFsbGVyIHN1YnRyZWVzLlxuICogQHBhcmFtIHshRWxlbWVudH0gZnJvbVxuICogQHBhcmFtIHshRWxlbWVudHwhRG9jdW1lbnRGcmFnbWVudH0gdG9cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvcHlDaGlsZHJlbihmcm9tLCB0bykge1xuICBjb25zdCBmcmFnID0gdG8ub3duZXJEb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gIGZvciAobGV0IG4gPSBmcm9tLmZpcnN0Q2hpbGQ7IG47IG4gPSBuLm5leHRTaWJsaW5nKSB7XG4gICAgZnJhZy5hcHBlbmRDaGlsZChuLmNsb25lTm9kZSh0cnVlKSk7XG4gIH1cbiAgdG8uYXBwZW5kQ2hpbGQoZnJhZyk7XG59XG5cbi8qKlxuICogSW5zZXJ0IHRoZSBlbGVtZW50IGluIHRoZSByb290IGFmdGVyIHRoZSBlbGVtZW50IG5hbWVkIGFmdGVyIG9yXG4gKiBpZiB0aGF0IGlzIG51bGwgYXQgdGhlIGJlZ2lubmluZy5cbiAqIEBwYXJhbSB7IUVsZW1lbnR8IVNoYWRvd1Jvb3R9IHJvb3RcbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7P05vZGV9IGFmdGVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnNlcnRBZnRlck9yQXRTdGFydChyb290LCBlbGVtZW50LCBhZnRlcikge1xuICBjb25zdCBiZWZvcmUgPSBhZnRlciA/IGFmdGVyLm5leHRTaWJsaW5nIDogcm9vdC5maXJzdENoaWxkO1xuICByb290Lmluc2VydEJlZm9yZShlbGVtZW50LCBiZWZvcmUpO1xufVxuXG4vKipcbiAqIEFkZCBhdHRyaWJ1dGVzIHRvIGFuIGVsZW1lbnQuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0geyFKc29uT2JqZWN0PHN0cmluZywgc3RyaW5nPn0gYXR0cmlidXRlc1xuICogQHJldHVybiB7IUVsZW1lbnR9IGNyZWF0ZWQgZWxlbWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQXR0cmlidXRlc1RvRWxlbWVudChlbGVtZW50LCBhdHRyaWJ1dGVzKSB7XG4gIGZvciAoY29uc3QgYXR0ciBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoYXR0ciwgYXR0cmlidXRlc1thdHRyXSk7XG4gIH1cbiAgcmV0dXJuIGVsZW1lbnQ7XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGVsZW1lbnQgb24gZG9jdW1lbnQgd2l0aCBzcGVjaWZpZWQgdGFnTmFtZSBhbmQgYXR0cmlidXRlcy5cbiAqIEBwYXJhbSB7IURvY3VtZW50fSBkb2NcbiAqIEBwYXJhbSB7c3RyaW5nfSB0YWdOYW1lXG4gKiBAcGFyYW0geyFKc29uT2JqZWN0PHN0cmluZywgc3RyaW5nPn0gYXR0cmlidXRlc1xuICogQHJldHVybiB7IUVsZW1lbnR9IGNyZWF0ZWQgZWxlbWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudFdpdGhBdHRyaWJ1dGVzKGRvYywgdGFnTmFtZSwgYXR0cmlidXRlcykge1xuICBjb25zdCBlbGVtZW50ID0gZG9jLmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7XG4gIHJldHVybiBhZGRBdHRyaWJ1dGVzVG9FbGVtZW50KGVsZW1lbnQsIGF0dHJpYnV0ZXMpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBub2RlIGlzIGNvbm5lY3RlZCAoYXR0YWNoZWQpLlxuICogQHBhcmFtIHshTm9kZX0gbm9kZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqIEBzZWUgaHR0cHM6Ly9kb20uc3BlYy53aGF0d2cub3JnLyNjb25uZWN0ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQ29ubmVjdGVkTm9kZShub2RlKSB7XG4gIGNvbnN0IGNvbm5lY3RlZCA9IG5vZGUuaXNDb25uZWN0ZWQ7XG4gIGlmIChjb25uZWN0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBjb25uZWN0ZWQ7XG4gIH1cblxuICAvLyBcIkFuIGVsZW1lbnQgaXMgY29ubmVjdGVkIGlmIGl0cyBzaGFkb3ctaW5jbHVkaW5nIHJvb3QgaXMgYSBkb2N1bWVudC5cIlxuICBsZXQgbiA9IG5vZGU7XG4gIGRvIHtcbiAgICBuID0gcm9vdE5vZGVGb3Iobik7XG4gICAgaWYgKG4uaG9zdCkge1xuICAgICAgbiA9IG4uaG9zdDtcbiAgICB9IGVsc2Uge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9IHdoaWxlICh0cnVlKTtcbiAgcmV0dXJuIG4ubm9kZVR5cGUgPT09IE5vZGUuRE9DVU1FTlRfTk9ERTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSByb290IGZvciBhIGdpdmVuIG5vZGUuIERvZXMgbm90IGNyb3NzIHNoYWRvdyBET00gYm91bmRhcnkuXG4gKiBAcGFyYW0geyFOb2RlfSBub2RlXG4gKiBAcmV0dXJuIHshTm9kZX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvb3ROb2RlRm9yKG5vZGUpIHtcbiAgaWYgKE5vZGUucHJvdG90eXBlLmdldFJvb3ROb2RlKSB7XG4gICAgLy8gVHlwZSBjaGVja2VyIHNheXMgYGdldFJvb3ROb2RlYCBtYXkgcmV0dXJuIG51bGwuXG4gICAgcmV0dXJuIG5vZGUuZ2V0Um9vdE5vZGUoKSB8fCBub2RlO1xuICB9XG4gIGxldCBuO1xuICBmb3IgKG4gPSBub2RlOyAhIW4ucGFyZW50Tm9kZTsgbiA9IG4ucGFyZW50Tm9kZSkge31cbiAgcmV0dXJuIG47XG59XG5cbi8qKlxuICogRmluZHMgdGhlIGNsb3Nlc3QgZWxlbWVudCB0aGF0IHNhdGlzZmllcyB0aGUgY2FsbGJhY2sgZnJvbSB0aGlzIGVsZW1lbnRcbiAqIHVwIHRoZSBET00gc3VidHJlZS5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oIUVsZW1lbnQpOmJvb2xlYW59IGNhbGxiYWNrXG4gKiBAcGFyYW0ge0VsZW1lbnQ9fSBvcHRfc3RvcEF0IG9wdGlvbmFsIGVsZW1udCB0byBzdG9wIHRoZSBzZWFyY2ggYXQuXG4gKiBAcmV0dXJuIHs/RWxlbWVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb3Nlc3QoZWxlbWVudCwgY2FsbGJhY2ssIG9wdF9zdG9wQXQpIHtcbiAgZm9yIChsZXQgZWwgPSBlbGVtZW50OyBlbCAmJiBlbCAhPT0gb3B0X3N0b3BBdDsgZWwgPSBlbC5wYXJlbnRFbGVtZW50KSB7XG4gICAgaWYgKGNhbGxiYWNrKGVsKSkge1xuICAgICAgcmV0dXJuIGVsO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuXG4vKipcbiAqIEZpbmRzIHRoZSBjbG9zZXN0IG5vZGUgdGhhdCBzYXRpc2ZpZXMgdGhlIGNhbGxiYWNrIGZyb20gdGhpcyBub2RlXG4gKiB1cCB0aGUgRE9NIHN1YnRyZWUuXG4gKiBAcGFyYW0geyFOb2RlfSBub2RlXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFOb2RlKTpib29sZWFufSBjYWxsYmFja1xuICogQHJldHVybiB7P05vZGV9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9zZXN0Tm9kZShub2RlLCBjYWxsYmFjaykge1xuICBmb3IgKGxldCBuID0gbm9kZTsgbjsgbiA9IG4ucGFyZW50Tm9kZSkge1xuICAgIGlmIChjYWxsYmFjayhuKSkge1xuICAgICAgcmV0dXJuIG47XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5cbi8qKlxuICogRmluZHMgdGhlIGNsb3Nlc3QgZWxlbWVudCB3aXRoIHRoZSBzcGVjaWZpZWQgbmFtZSBmcm9tIHRoaXMgZWxlbWVudFxuICogdXAgdGhlIERPTSBzdWJ0cmVlLlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IHRhZ05hbWVcbiAqIEByZXR1cm4gez9FbGVtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VzdEJ5VGFnKGVsZW1lbnQsIHRhZ05hbWUpIHtcbiAgaWYgKGVsZW1lbnQuY2xvc2VzdCkge1xuICAgIHJldHVybiBlbGVtZW50LmNsb3Nlc3QodGFnTmFtZSk7XG4gIH1cbiAgdGFnTmFtZSA9IHRhZ05hbWUudG9VcHBlckNhc2UoKTtcbiAgcmV0dXJuIGNsb3Nlc3QoZWxlbWVudCwgZWwgPT4ge1xuICAgIHJldHVybiBlbC50YWdOYW1lID09IHRhZ05hbWU7XG4gIH0pO1xufVxuXG4vKipcbiAqIEZpbmRzIHRoZSBjbG9zZXN0IGVsZW1lbnQgd2l0aCB0aGUgc3BlY2lmaWVkIHNlbGVjdG9yIGZyb20gdGhpcyBlbGVtZW50XG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3JcbiAqIEByZXR1cm4gez9FbGVtZW50fSBjbG9zZXN0IGFuY2VzdG9yIGlmIGZvdW5kLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VzdEJ5U2VsZWN0b3IoZWxlbWVudCwgc2VsZWN0b3IpIHtcbiAgaWYgKGVsZW1lbnQuY2xvc2VzdCkge1xuICAgIHJldHVybiBlbGVtZW50LmNsb3Nlc3Qoc2VsZWN0b3IpO1xuICB9XG5cbiAgcmV0dXJuIGNsb3Nlc3QoZWxlbWVudCwgZWwgPT4ge1xuICAgIHJldHVybiBtYXRjaGVzKGVsLCBzZWxlY3Rvcik7XG4gIH0pO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiB0aGUgZ2l2ZW4gZWxlbWVudCBtYXRjaGVzIHRoZSBzZWxlY3RvclxuICogQHBhcmFtICB7IUVsZW1lbnR9IGVsIFRoZSBlbGVtZW50IHRvIHZlcmlmeVxuICogQHBhcmFtICB7c3RyaW5nfSBzZWxlY3RvciBUaGUgc2VsZWN0b3IgdG8gY2hlY2sgYWdhaW5zdFxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZWxlbWVudCBtYXRjaGVkIHRoZSBzZWxlY3Rvci4gRmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWF0Y2hlcyhlbCwgc2VsZWN0b3IpIHtcbiAgY29uc3QgbWF0Y2hlciA9IGVsLm1hdGNoZXMgfHxcbiAgICAgIGVsLndlYmtpdE1hdGNoZXNTZWxlY3RvciB8fFxuICAgICAgZWwubW96TWF0Y2hlc1NlbGVjdG9yIHx8XG4gICAgICBlbC5tc01hdGNoZXNTZWxlY3RvciB8fFxuICAgICAgZWwub01hdGNoZXNTZWxlY3RvcjtcbiAgaWYgKG1hdGNoZXIpIHtcbiAgICByZXR1cm4gbWF0Y2hlci5jYWxsKGVsLCBzZWxlY3Rvcik7XG4gIH1cbiAgcmV0dXJuIGZhbHNlOyAvLyBJRTggYWx3YXlzIHJldHVybnMgZmFsc2UuXG59XG5cbi8qKlxuICogRmluZHMgdGhlIGZpcnN0IGRlc2NlbmRhbnQgZWxlbWVudCB3aXRoIHRoZSBzcGVjaWZpZWQgbmFtZS5cbiAqIEBwYXJhbSB7IUVsZW1lbnR8IURvY3VtZW50fCFTaGFkb3dSb290fSBlbGVtZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gdGFnTmFtZVxuICogQHJldHVybiB7P0VsZW1lbnR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlbGVtZW50QnlUYWcoZWxlbWVudCwgdGFnTmFtZSkge1xuICBsZXQgZWxlbWVudHM7XG4gIC8vIGdldEVsZW1lbnRzQnlUYWdOYW1lKCkgaXMgbm90IHN1cHBvcnRlZCBvbiBTaGFkb3dSb290LlxuICBpZiAodHlwZW9mIGVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICBlbGVtZW50cyA9IGVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUodGFnTmFtZSk7XG4gIH0gZWxzZSB7XG4gICAgZWxlbWVudHMgPSBlbGVtZW50Li8qT0sqL3F1ZXJ5U2VsZWN0b3JBbGwodGFnTmFtZSk7XG4gIH1cbiAgcmV0dXJuIChlbGVtZW50cyAmJiBlbGVtZW50c1swXSkgfHwgbnVsbDtcbn1cblxuXG4vKipcbiAqIEZpbmRzIHRoZSBmaXJzdCBjaGlsZCBlbGVtZW50IHRoYXQgc2F0aXNmaWVzIHRoZSBjYWxsYmFjay5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHBhcmVudFxuICogQHBhcmFtIHtmdW5jdGlvbighRWxlbWVudCk6Ym9vbGVhbn0gY2FsbGJhY2tcbiAqIEByZXR1cm4gez9FbGVtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2hpbGRFbGVtZW50KHBhcmVudCwgY2FsbGJhY2spIHtcbiAgZm9yIChsZXQgY2hpbGQgPSBwYXJlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7IGNoaWxkO1xuICAgIGNoaWxkID0gY2hpbGQubmV4dEVsZW1lbnRTaWJsaW5nKSB7XG4gICAgaWYgKGNhbGxiYWNrKGNoaWxkKSkge1xuICAgICAgcmV0dXJuIGNoaWxkO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuXG4vKipcbiAqIEZpbmRzIGFsbCBjaGlsZCBlbGVtZW50cyB0aGF0IHNhdGlzZnkgdGhlIGNhbGxiYWNrLlxuICogQHBhcmFtIHshRWxlbWVudH0gcGFyZW50XG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFFbGVtZW50KTpib29sZWFufSBjYWxsYmFja1xuICogQHJldHVybiB7IUFycmF5PCFFbGVtZW50Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNoaWxkRWxlbWVudHMocGFyZW50LCBjYWxsYmFjaykge1xuICBjb25zdCBjaGlsZHJlbiA9IFtdO1xuICBmb3IgKGxldCBjaGlsZCA9IHBhcmVudC5maXJzdEVsZW1lbnRDaGlsZDsgY2hpbGQ7XG4gICAgY2hpbGQgPSBjaGlsZC5uZXh0RWxlbWVudFNpYmxpbmcpIHtcbiAgICBpZiAoY2FsbGJhY2soY2hpbGQpKSB7XG4gICAgICBjaGlsZHJlbi5wdXNoKGNoaWxkKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGNoaWxkcmVuO1xufVxuXG5cbi8qKlxuICogRmluZHMgdGhlIGxhc3QgY2hpbGQgZWxlbWVudCB0aGF0IHNhdGlzZmllcyB0aGUgY2FsbGJhY2suXG4gKiBAcGFyYW0geyFFbGVtZW50fSBwYXJlbnRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oIUVsZW1lbnQpOmJvb2xlYW59IGNhbGxiYWNrXG4gKiBAcmV0dXJuIHs/RWxlbWVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxhc3RDaGlsZEVsZW1lbnQocGFyZW50LCBjYWxsYmFjaykge1xuICBmb3IgKGxldCBjaGlsZCA9IHBhcmVudC5sYXN0RWxlbWVudENoaWxkOyBjaGlsZDtcbiAgICBjaGlsZCA9IGNoaWxkLnByZXZpb3VzRWxlbWVudFNpYmxpbmcpIHtcbiAgICBpZiAoY2FsbGJhY2soY2hpbGQpKSB7XG4gICAgICByZXR1cm4gY2hpbGQ7XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIEZpbmRzIGFsbCBjaGlsZCBub2RlcyB0aGF0IHNhdGlzZnkgdGhlIGNhbGxiYWNrLlxuICogVGhlc2Ugbm9kZXMgY2FuIGluY2x1ZGUgVGV4dCwgQ29tbWVudCBhbmQgb3RoZXIgY2hpbGQgbm9kZXMuXG4gKiBAcGFyYW0geyFOb2RlfSBwYXJlbnRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oIU5vZGUpOmJvb2xlYW59IGNhbGxiYWNrXG4gKiBAcmV0dXJuIHshQXJyYXk8IU5vZGU+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2hpbGROb2RlcyhwYXJlbnQsIGNhbGxiYWNrKSB7XG4gIGNvbnN0IG5vZGVzID0gW107XG4gIGZvciAobGV0IGNoaWxkID0gcGFyZW50LmZpcnN0Q2hpbGQ7IGNoaWxkO1xuICAgIGNoaWxkID0gY2hpbGQubmV4dFNpYmxpbmcpIHtcbiAgICBpZiAoY2FsbGJhY2soY2hpbGQpKSB7XG4gICAgICBub2Rlcy5wdXNoKGNoaWxkKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5vZGVzO1xufVxuXG4vKipcbiAqIEB0eXBlIHtib29sZWFufHVuZGVmaW5lZH1cbiAqIEB2aXNpYmxlRm9yVGVzdGluZ1xuICovXG5sZXQgc2NvcGVTZWxlY3RvclN1cHBvcnRlZDtcblxuLyoqXG4gKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSB2YWxcbiAqIEB2aXNpYmxlRm9yVGVzdGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0U2NvcGVTZWxlY3RvclN1cHBvcnRlZEZvclRlc3RpbmcodmFsKSB7XG4gIHNjb3BlU2VsZWN0b3JTdXBwb3J0ZWQgPSB2YWw7XG59XG5cbi8qKlxuICogVGVzdCB0aGF0IHRoZSA6c2NvcGUgc2VsZWN0b3IgaXMgc3VwcG9ydGVkIGFuZCBiZWhhdmVzIGNvcnJlY3RseS5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHBhcmVudFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNTY29wZVNlbGVjdG9yU3VwcG9ydGVkKHBhcmVudCkge1xuICBjb25zdCBkb2MgPSBwYXJlbnQub3duZXJEb2N1bWVudDtcbiAgdHJ5IHtcbiAgICBjb25zdCB0ZXN0RWxlbWVudCA9IGRvYy5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb25zdCB0ZXN0Q2hpbGQgPSBkb2MuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGVzdEVsZW1lbnQuYXBwZW5kQ2hpbGQodGVzdENoaWxkKTtcbiAgICAvLyBOT1RFKGN2aWFsaXosICMxMjM4Myk6IEZpcmVmb3gncyBpbXBsZW1lbnRhdGlvbiBpcyBpbmNvbXBsZXRlLFxuICAgIC8vIHRoZXJlZm9yZSB3ZSB0ZXN0IGFjdHVhbCBmdW5jdGlvbmFsaXR5IG9mYDpzY29wZWAgYXMgd2VsbC5cbiAgICByZXR1cm4gdGVzdEVsZW1lbnQuLypPSyovcXVlcnlTZWxlY3RvcignOnNjb3BlIGRpdicpID09PSB0ZXN0Q2hpbGQ7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLyoqXG4gKiBGaW5kcyB0aGUgZmlyc3QgY2hpbGQgZWxlbWVudCB0aGF0IGhhcyB0aGUgc3BlY2lmaWVkIGF0dHJpYnV0ZS5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHBhcmVudFxuICogQHBhcmFtIHtzdHJpbmd9IGF0dHJcbiAqIEByZXR1cm4gez9FbGVtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2hpbGRFbGVtZW50QnlBdHRyKHBhcmVudCwgYXR0cikge1xuICByZXR1cm4gc2NvcGVkUXVlcnlTZWxlY3Rvci8qT0sqLyhwYXJlbnQsIGA+IFske2F0dHJ9XWApO1xufVxuXG5cbi8qKlxuICogRmluZHMgdGhlIGxhc3QgY2hpbGQgZWxlbWVudCB0aGF0IGhhcyB0aGUgc3BlY2lmaWVkIGF0dHJpYnV0ZS5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHBhcmVudFxuICogQHBhcmFtIHtzdHJpbmd9IGF0dHJcbiAqIEByZXR1cm4gez9FbGVtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gbGFzdENoaWxkRWxlbWVudEJ5QXR0cihwYXJlbnQsIGF0dHIpIHtcbiAgcmV0dXJuIGxhc3RDaGlsZEVsZW1lbnQocGFyZW50LCBlbCA9PiB7XG4gICAgcmV0dXJuIGVsLmhhc0F0dHJpYnV0ZShhdHRyKTtcbiAgfSk7XG59XG5cblxuLyoqXG4gKiBGaW5kcyBhbGwgY2hpbGQgZWxlbWVudHMgdGhhdCBoYXMgdGhlIHNwZWNpZmllZCBhdHRyaWJ1dGUuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBwYXJlbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyXG4gKiBAcmV0dXJuIHshTm9kZUxpc3Q8IUVsZW1lbnQ+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2hpbGRFbGVtZW50c0J5QXR0cihwYXJlbnQsIGF0dHIpIHtcbiAgcmV0dXJuIHNjb3BlZFF1ZXJ5U2VsZWN0b3JBbGwvKk9LKi8ocGFyZW50LCBgPiBbJHthdHRyfV1gKTtcbn1cblxuXG4vKipcbiAqIEZpbmRzIHRoZSBmaXJzdCBjaGlsZCBlbGVtZW50IHRoYXQgaGFzIHRoZSBzcGVjaWZpZWQgdGFnIG5hbWUuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBwYXJlbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSB0YWdOYW1lXG4gKiBAcmV0dXJuIHs/RWxlbWVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNoaWxkRWxlbWVudEJ5VGFnKHBhcmVudCwgdGFnTmFtZSkge1xuICByZXR1cm4gc2NvcGVkUXVlcnlTZWxlY3Rvci8qT0sqLyhwYXJlbnQsIGA+ICR7dGFnTmFtZX1gKTtcbn1cblxuXG4vKipcbiAqIEZpbmRzIGFsbCBjaGlsZCBlbGVtZW50cyB3aXRoIHRoZSBzcGVjaWZpZWQgdGFnIG5hbWUuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBwYXJlbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSB0YWdOYW1lXG4gKiBAcmV0dXJuIHshTm9kZUxpc3Q8IUVsZW1lbnQ+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2hpbGRFbGVtZW50c0J5VGFnKHBhcmVudCwgdGFnTmFtZSkge1xuICByZXR1cm4gc2NvcGVkUXVlcnlTZWxlY3RvckFsbC8qT0sqLyhwYXJlbnQsIGA+ICR7dGFnTmFtZX1gKTtcbn1cblxuXG4vKipcbiAqIEZpbmRzIHRoZSBmaXJzdCBlbGVtZW50IHRoYXQgbWF0Y2hlcyBgc2VsZWN0b3JgLCBzY29wZWQgaW5zaWRlIGByb290YC5cbiAqIE5vdGU6IGluIElFLCB0aGlzIGNhdXNlcyBhIHF1aWNrIG11dGF0aW9uIG9mIHRoZSBlbGVtZW50J3MgY2xhc3MgbGlzdC5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHJvb3RcbiAqIEBwYXJhbSB7c3RyaW5nfSBzZWxlY3RvclxuICogQHJldHVybiB7P0VsZW1lbnR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzY29wZWRRdWVyeVNlbGVjdG9yKHJvb3QsIHNlbGVjdG9yKSB7XG4gIGlmIChzY29wZVNlbGVjdG9yU3VwcG9ydGVkID09IG51bGwpIHtcbiAgICBzY29wZVNlbGVjdG9yU3VwcG9ydGVkID0gaXNTY29wZVNlbGVjdG9yU3VwcG9ydGVkKHJvb3QpO1xuICB9XG4gIGlmIChzY29wZVNlbGVjdG9yU3VwcG9ydGVkKSB7XG4gICAgcmV0dXJuIHJvb3QuLypPSyovcXVlcnlTZWxlY3RvcihgOnNjb3BlICR7c2VsZWN0b3J9YCk7XG4gIH1cblxuICAvLyBPbmx5IElFLlxuICBjb25zdCB1bmlxdWUgPSAnaS1hbXBodG1sLXNjb3BlZCc7XG4gIHJvb3QuY2xhc3NMaXN0LmFkZCh1bmlxdWUpO1xuICBjb25zdCBlbGVtZW50ID0gcm9vdC4vKk9LKi9xdWVyeVNlbGVjdG9yKGAuJHt1bmlxdWV9ICR7c2VsZWN0b3J9YCk7XG4gIHJvb3QuY2xhc3NMaXN0LnJlbW92ZSh1bmlxdWUpO1xuICByZXR1cm4gZWxlbWVudDtcbn1cblxuXG4vKipcbiAqIEZpbmRzIHRoZSBldmVyeSBlbGVtZW50IHRoYXQgbWF0Y2hlcyBgc2VsZWN0b3JgLCBzY29wZWQgaW5zaWRlIGByb290YC5cbiAqIE5vdGU6IGluIElFLCB0aGlzIGNhdXNlcyBhIHF1aWNrIG11dGF0aW9uIG9mIHRoZSBlbGVtZW50J3MgY2xhc3MgbGlzdC5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHJvb3RcbiAqIEBwYXJhbSB7c3RyaW5nfSBzZWxlY3RvclxuICogQHJldHVybiB7IU5vZGVMaXN0PCFFbGVtZW50Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNjb3BlZFF1ZXJ5U2VsZWN0b3JBbGwocm9vdCwgc2VsZWN0b3IpIHtcbiAgaWYgKHNjb3BlU2VsZWN0b3JTdXBwb3J0ZWQgPT0gbnVsbCkge1xuICAgIHNjb3BlU2VsZWN0b3JTdXBwb3J0ZWQgPSBpc1Njb3BlU2VsZWN0b3JTdXBwb3J0ZWQocm9vdCk7XG4gIH1cbiAgaWYgKHNjb3BlU2VsZWN0b3JTdXBwb3J0ZWQpIHtcbiAgICByZXR1cm4gcm9vdC4vKk9LKi9xdWVyeVNlbGVjdG9yQWxsKGA6c2NvcGUgJHtzZWxlY3Rvcn1gKTtcbiAgfVxuXG4gIC8vIE9ubHkgSUUuXG4gIGNvbnN0IHVuaXF1ZSA9ICdpLWFtcGh0bWwtc2NvcGVkJztcbiAgcm9vdC5jbGFzc0xpc3QuYWRkKHVuaXF1ZSk7XG4gIGNvbnN0IGVsZW1lbnRzID0gcm9vdC4vKk9LKi9xdWVyeVNlbGVjdG9yQWxsKGAuJHt1bmlxdWV9ICR7c2VsZWN0b3J9YCk7XG4gIHJvb3QuY2xhc3NMaXN0LnJlbW92ZSh1bmlxdWUpO1xuICByZXR1cm4gZWxlbWVudHM7XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIGVsZW1lbnQgZGF0YS1wYXJhbS0gYXR0cmlidXRlcyBhcyB1cmwgcGFyYW1ldGVycyBrZXktdmFsdWUgcGFpcnMuXG4gKiBlLmcuIGRhdGEtcGFyYW0tc29tZS1hdHRyPXZhbHVlIC0+IHtzb21lQXR0cjogdmFsdWV9LlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHtmdW5jdGlvbihzdHJpbmcpOnN0cmluZz19IG9wdF9jb21wdXRlUGFyYW1OYW1lRnVuYyB0byBjb21wdXRlIHRoZVxuICogICAgcGFyYW1ldGVyIG5hbWUsIGdldCBwYXNzZWQgdGhlIGNhbWVsLWNhc2UgcGFyYW1ldGVyIG5hbWUuXG4gKiBAcGFyYW0geyFSZWdFeHA9fSBvcHRfcGFyYW1QYXR0ZXJuIFJlZ2V4IHBhdHRlcm4gdG8gbWF0Y2ggZGF0YSBhdHRyaWJ1dGVzLlxuICogQHJldHVybiB7IUpzb25PYmplY3R9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREYXRhUGFyYW1zRnJvbUF0dHJpYnV0ZXMoZWxlbWVudCwgb3B0X2NvbXB1dGVQYXJhbU5hbWVGdW5jLFxuICBvcHRfcGFyYW1QYXR0ZXJuKSB7XG4gIGNvbnN0IGNvbXB1dGVQYXJhbU5hbWVGdW5jID0gb3B0X2NvbXB1dGVQYXJhbU5hbWVGdW5jIHx8IChrZXkgPT4ga2V5KTtcbiAgY29uc3Qge2RhdGFzZXR9ID0gZWxlbWVudDtcbiAgY29uc3QgcGFyYW1zID0gZGljdCgpO1xuICBjb25zdCBwYXJhbVBhdHRlcm4gPSBvcHRfcGFyYW1QYXR0ZXJuID8gb3B0X3BhcmFtUGF0dGVybiA6IC9ecGFyYW0oLispLztcbiAgZm9yIChjb25zdCBrZXkgaW4gZGF0YXNldCkge1xuICAgIGNvbnN0IG1hdGNoZXMgPSBrZXkubWF0Y2gocGFyYW1QYXR0ZXJuKTtcbiAgICBpZiAobWF0Y2hlcykge1xuICAgICAgY29uc3QgcGFyYW0gPSBtYXRjaGVzWzFdWzBdLnRvTG93ZXJDYXNlKCkgKyBtYXRjaGVzWzFdLnN1YnN0cigxKTtcbiAgICAgIHBhcmFtc1tjb21wdXRlUGFyYW1OYW1lRnVuYyhwYXJhbSldID0gZGF0YXNldFtrZXldO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcGFyYW1zO1xufVxuXG4vKipcbiAqIFdoZXRoZXIgdGhlIGVsZW1lbnQgaGF2ZSBhIG5leHQgbm9kZSBpbiB0aGUgZG9jdW1lbnQgb3JkZXIuXG4gKiBUaGlzIG1lYW5zIGVpdGhlcjpcbiAqICBhLiBUaGUgZWxlbWVudCBpdHNlbGYgaGFzIGEgbmV4dFNpYmxpbmcuXG4gKiAgYi4gQW55IG9mIHRoZSBlbGVtZW50IGFuY2VzdG9ycyBoYXMgYSBuZXh0U2libGluZy5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7P05vZGV9IG9wdF9zdG9wTm9kZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc05leHROb2RlSW5Eb2N1bWVudE9yZGVyKGVsZW1lbnQsIG9wdF9zdG9wTm9kZSkge1xuICBsZXQgY3VycmVudEVsZW1lbnQgPSBlbGVtZW50O1xuICBkbyB7XG4gICAgaWYgKGN1cnJlbnRFbGVtZW50Lm5leHRTaWJsaW5nKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0gd2hpbGUgKChjdXJyZW50RWxlbWVudCA9IGN1cnJlbnRFbGVtZW50LnBhcmVudE5vZGUpICYmXG4gICAgICAgICAgICBjdXJyZW50RWxlbWVudCAhPSBvcHRfc3RvcE5vZGUpO1xuICByZXR1cm4gZmFsc2U7XG59XG5cblxuLyoqXG4gKiBGaW5kcyBhbGwgYW5jZXN0b3IgZWxlbWVudHMgdGhhdCBzYXRpc2Z5IHByZWRpY2F0ZS5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGNoaWxkXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFFbGVtZW50KTpib29sZWFufSBwcmVkaWNhdGVcbiAqIEByZXR1cm4geyFBcnJheTwhRWxlbWVudD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhbmNlc3RvckVsZW1lbnRzKGNoaWxkLCBwcmVkaWNhdGUpIHtcbiAgY29uc3QgYW5jZXN0b3JzID0gW107XG4gIGZvciAobGV0IGFuY2VzdG9yID0gY2hpbGQucGFyZW50RWxlbWVudDsgYW5jZXN0b3I7XG4gICAgYW5jZXN0b3IgPSBhbmNlc3Rvci5wYXJlbnRFbGVtZW50KSB7XG4gICAgaWYgKHByZWRpY2F0ZShhbmNlc3RvcikpIHtcbiAgICAgIGFuY2VzdG9ycy5wdXNoKGFuY2VzdG9yKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGFuY2VzdG9ycztcbn1cblxuXG4vKipcbiAqIEZpbmRzIGFsbCBhbmNlc3RvciBlbGVtZW50cyB0aGF0IGhhcyB0aGUgc3BlY2lmaWVkIHRhZyBuYW1lLlxuICogQHBhcmFtIHshRWxlbWVudH0gY2hpbGRcbiAqIEBwYXJhbSB7c3RyaW5nfSB0YWdOYW1lXG4gKiBAcmV0dXJuIHshQXJyYXk8IUVsZW1lbnQ+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gYW5jZXN0b3JFbGVtZW50c0J5VGFnKGNoaWxkLCB0YWdOYW1lKSB7XG4gIHRhZ05hbWUgPSB0YWdOYW1lLnRvVXBwZXJDYXNlKCk7XG4gIHJldHVybiBhbmNlc3RvckVsZW1lbnRzKGNoaWxkLCBlbCA9PiB7XG4gICAgcmV0dXJuIGVsLnRhZ05hbWUgPT0gdGFnTmFtZTtcbiAgfSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGNsb25lIG9mIHRoZSBjb250ZW50IG9mIGEgdGVtcGxhdGUgZWxlbWVudC5cbiAqXG4gKiBQb2x5ZmlsbCB0byByZXBsYWNlIC5jb250ZW50IGFjY2VzcyBmb3IgYnJvd3NlcnMgdGhhdCBkbyBub3Qgc3VwcG9ydFxuICogSFRNTFRlbXBsYXRlRWxlbWVudHMgbmF0aXZlbHkuXG4gKlxuICogQHBhcmFtIHshSFRNTFRlbXBsYXRlRWxlbWVudHwhRWxlbWVudH0gdGVtcGxhdGVcbiAqIEByZXR1cm4geyFEb2N1bWVudEZyYWdtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gdGVtcGxhdGVDb250ZW50Q2xvbmUodGVtcGxhdGUpIHtcbiAgaWYgKCdjb250ZW50JyBpbiB0ZW1wbGF0ZSkge1xuICAgIHJldHVybiB0ZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBjb250ZW50ID0gdGVtcGxhdGUub3duZXJEb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgY29weUNoaWxkcmVuKHRlbXBsYXRlLCBjb250ZW50KTtcbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxufVxuXG4vKipcbiAqIEl0ZXJhdGUgb3ZlciBhbiBhcnJheS1saWtlLiBTb21lIGNvbGxlY3Rpb25zIGxpa2UgTm9kZUxpc3QgYXJlXG4gKiBsYXppbHkgZXZhbHVhdGVkIGluIHNvbWUgYnJvd3NlcnMsIGFuZCBhY2Nlc3NpbmcgYGxlbmd0aGAgZm9yY2VzIGZ1bGxcbiAqIGV2YWx1YXRpb24uIFdlIGNhbiBpbXByb3ZlIHBlcmZvcm1hbmNlIGJ5IGl0ZXJhdGluZyB1bnRpbCBhbiBlbGVtZW50IGlzXG4gKiBgdW5kZWZpbmVkYCB0byBhdm9pZCBjaGVja2luZyB0aGUgYGxlbmd0aGAgcHJvcGVydHkuXG4gKiBUZXN0IGNhc2VzOiBodHRwczovL2pzcGVyZi5jb20vaXRlcmF0aW5nLW92ZXItY29sbGVjdGlvbnMtb2YtZWxlbWVudHNcbiAqIEBwYXJhbSB7IUlBcnJheUxpa2U8VD59IGl0ZXJhYmxlXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKFQsIG51bWJlcil9IGNiXG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXRlcmF0ZUN1cnNvcihpdGVyYWJsZSwgY2IpIHtcbiAgZm9yIChsZXQgaSA9IDAsIHZhbHVlOyAodmFsdWUgPSBpdGVyYWJsZVtpXSkgIT09IHVuZGVmaW5lZDsgaSsrKSB7XG4gICAgY2IodmFsdWUsIGkpO1xuICB9XG59XG5cbi8qKlxuICogVGhpcyBtZXRob2Qgd3JhcHMgYXJvdW5kIHdpbmRvdydzIG9wZW4gbWV0aG9kLiBJdCBmaXJzdCB0cmllcyB0byBleGVjdXRlXG4gKiBgb3BlbmAgY2FsbCB3aXRoIHRoZSBwcm92aWRlZCB0YXJnZXQgYW5kIGlmIGl0IGZhaWxzLCBpdCByZXRyaWVzIHRoZSBjYWxsXG4gKiB3aXRoIHRoZSBgX3RvcGAgdGFyZ2V0LiBUaGlzIGlzIG5lY2Vzc2FyeSBnaXZlbiB0aGF0IGluIHNvbWUgZW1iZWRkaW5nXG4gKiBzY2VuYXJpb3MsIHN1Y2ggYXMgaU9TJyBXS1dlYlZpZXcsIG5hdmlnYXRpb24gdG8gYF9ibGFua2AgYW5kIG90aGVyIHRhcmdldHNcbiAqIGlzIGJsb2NrZWQgYnkgZGVmYXVsdC5cbiAqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHBhcmFtIHtzdHJpbmd9IHRhcmdldFxuICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfZmVhdHVyZXNcbiAqIEByZXR1cm4gez9XaW5kb3d9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvcGVuV2luZG93RGlhbG9nKHdpbiwgdXJsLCB0YXJnZXQsIG9wdF9mZWF0dXJlcykge1xuICAvLyBUcnkgZmlyc3Qgd2l0aCB0aGUgc3BlY2lmaWVkIHRhcmdldC4gSWYgd2UncmUgaW5zaWRlIHRoZSBXS1dlYlZpZXcgb3JcbiAgLy8gYSBzaW1pbGFyIGVudmlyb25tZW50cywgdGhpcyBtZXRob2QgaXMgZXhwZWN0ZWQgdG8gZmFpbCBieSBkZWZhdWx0IGZvclxuICAvLyBhbGwgdGFyZ2V0cyBleGNlcHQgYF90b3BgLlxuICBsZXQgcmVzO1xuICB0cnkge1xuICAgIHJlcyA9IHdpbi5vcGVuKHVybCwgdGFyZ2V0LCBvcHRfZmVhdHVyZXMpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgZGV2KCkuZXJyb3IoJ0RPTScsICdGYWlsZWQgdG8gb3BlbiB1cmwgb24gdGFyZ2V0OiAnLCB0YXJnZXQsIGUpO1xuICB9XG5cbiAgLy8gVGhlbiB0cnkgd2l0aCBgX3RvcGAgdGFyZ2V0LlxuICBpZiAoIXJlcyAmJiB0YXJnZXQgIT0gJ190b3AnKSB7XG4gICAgcmVzID0gd2luLm9wZW4odXJsLCAnX3RvcCcpO1xuICB9XG4gIHJldHVybiByZXM7XG59XG5cbi8qKlxuICogV2hldGhlciB0aGUgZWxlbWVudCBpcyBhIHNjcmlwdCB0YWcgd2l0aCBhcHBsaWNhdGlvbi9qc29uIHR5cGUuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNKc29uU2NyaXB0VGFnKGVsZW1lbnQpIHtcbiAgcmV0dXJuIGVsZW1lbnQudGFnTmFtZSA9PSAnU0NSSVBUJyAmJlxuICAgICAgICAgICAgZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKS50b1VwcGVyQ2FzZSgpID09ICdBUFBMSUNBVElPTi9KU09OJztcbn1cblxuLyoqXG4gKiBXaGV0aGVyIHRoZSBlbGVtZW50IGlzIGEgc2NyaXB0IHRhZyB3aXRoIGFwcGxpY2F0aW9uL2pzb24gdHlwZS5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0pzb25MZFNjcmlwdFRhZyhlbGVtZW50KSB7XG4gIHJldHVybiBlbGVtZW50LnRhZ05hbWUgPT0gJ1NDUklQVCcgJiZcbiAgICAgIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0eXBlJykudG9VcHBlckNhc2UoKSA9PSAnQVBQTElDQVRJT04vTEQrSlNPTic7XG59XG5cbi8qKlxuICogV2hldGhlciB0aGUgcGFnZSdzIGRpcmVjdGlvbiBpcyByaWdodCB0byBsZWZ0IG9yIG5vdC5cbiAqIEBwYXJhbSB7IURvY3VtZW50fSBkb2NcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1JUTChkb2MpIHtcbiAgY29uc3QgZGlyID0gZG9jLmJvZHkuZ2V0QXR0cmlidXRlKCdkaXInKVxuICAgICAgICAgICAgICAgICB8fCBkb2MuZG9jdW1lbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGlyJylcbiAgICAgICAgICAgICAgICAgfHwgJ2x0cic7XG4gIHJldHVybiBkaXIgPT0gJ3J0bCc7XG59XG5cblxuLyoqXG4gKiBFc2NhcGVzIGFuIGlkZW50IChJRCBvciBhIGNsYXNzIG5hbWUpIHRvIGJlIHVzZWQgYXMgYSBDU1Mgc2VsZWN0b3IuXG4gKlxuICogU2VlIGh0dHBzOi8vZHJhZnRzLmNzc3dnLm9yZy9jc3NvbS8jc2VyaWFsaXplLWFuLWlkZW50aWZpZXIuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGlkZW50XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlc2NhcGVDc3NTZWxlY3RvcklkZW50KGlkZW50KSB7XG4gIHJldHVybiBjc3NFc2NhcGUoaWRlbnQpO1xufVxuXG4vKipcbiAqIEVzY2FwZXMgYW4gaWRlbnQgaW4gYSB3YXkgdGhhdCBjYW4gYmUgdXNlZCBieSA6bnRoLWNoaWxkKCkgcHN1ZWRvLWNsYXNzLlxuICpcbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdzNjL2Nzc3dnLWRyYWZ0cy9pc3N1ZXMvMjMwNi5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IGlkZW50XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlc2NhcGVDc3NTZWxlY3Rvck50aChpZGVudCkge1xuICBjb25zdCBlc2NhcGVkID0gU3RyaW5nKGlkZW50KTtcbiAgLy8gRW5zdXJlIGl0IGRvZXNuJ3QgY2xvc2UgdGhlIG50aC1jaGlsZCBwc3VlZG8gY2xhc3MuXG4gIGRldigpLmFzc2VydChlc2NhcGVkLmluZGV4T2YoJyknKSA9PT0gLTEpO1xuICByZXR1cm4gZXNjYXBlZDtcbn1cblxuLyoqXG4gKiBFc2NhcGVzIGA8YCwgYD5gIGFuZCBvdGhlciBIVE1MIGNoYXJjYXRlcnMgd2l0aCB0aGVpciBlc2NhcGVkIGZvcm1zLlxuICogQHBhcmFtIHtzdHJpbmd9IHRleHRcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVzY2FwZUh0bWwodGV4dCkge1xuICBpZiAoIXRleHQpIHtcbiAgICByZXR1cm4gdGV4dDtcbiAgfVxuICByZXR1cm4gdGV4dC5yZXBsYWNlKEhUTUxfRVNDQVBFX1JFR0VYLCBlc2NhcGVIdG1sQ2hhcik7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGNcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZXNjYXBlSHRtbENoYXIoYykge1xuICByZXR1cm4gSFRNTF9FU0NBUEVfQ0hBUlNbY107XG59XG5cbi8qKlxuICogVHJpZXMgdG8gZm9jdXMgb24gdGhlIGdpdmVuIGVsZW1lbnQ7IGZhaWxzIHNpbGVudGx5IGlmIGJyb3dzZXIgdGhyb3dzIGFuXG4gKiBleGNlcHRpb24uXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cnlGb2N1cyhlbGVtZW50KSB7XG4gIHRyeSB7XG4gICAgZWxlbWVudC4vKk9LKi9mb2N1cygpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gSUUgPD0gNyBtYXkgdGhyb3cgZXhjZXB0aW9ucyB3aGVuIGZvY3VzaW5nIG9uIGhpZGRlbiBpdGVtcy5cbiAgfVxufVxuXG4vKipcbiAqIFdoZXRoZXIgdGhlIGdpdmVuIHdpbmRvdyBpcyBpbiBhbiBpZnJhbWUgb3Igbm90LlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0lmcmFtZWQod2luKSB7XG4gIHJldHVybiB3aW4ucGFyZW50ICYmIHdpbi5wYXJlbnQgIT0gd2luO1xufVxuXG4vKipcbiAqIERldGVybWluZXMgaWYgdGhpcyBlbGVtZW50IGlzIGFuIEFNUCBlbGVtZW50XG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNBbXBFbGVtZW50KGVsZW1lbnQpIHtcbiAgY29uc3QgdGFnID0gZWxlbWVudC50YWdOYW1lO1xuICAvLyBVc2UgcHJlZml4IHRvIHJlY29nbml6ZSBBTVAgZWxlbWVudC4gVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSBzdHViXG4gIC8vIG1heSBub3QgYmUgYXR0YWNoZWQgeWV0LlxuICByZXR1cm4gc3RhcnRzV2l0aCh0YWcsICdBTVAtJykgJiZcbiAgICAgIC8vIFNvbWUgXCJhbXAtKlwiIGVsZW1lbnRzIGFyZSBub3QgcmVhbGx5IEFNUCBlbGVtZW50cy4gOnNtaDpcbiAgICAgICEodGFnID09ICdBTVAtU1RJQ0tZLUFELVRPUC1QQURESU5HJyB8fCB0YWcgPT0gJ0FNUC1CT0RZJyk7XG59XG5cbi8qKlxuICogUmV0dXJuIGEgcHJvbWlzZSB0aGF0IHJlc29sdmUgd2hlbiBhbiBBTVAgZWxlbWVudCB1cGdyYWRlIGZyb20gSFRNTEVsZW1lbnRcbiAqIHRvIEN1c3RvbUVsZW1lbnRcbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEByZXR1cm4geyFQcm9taXNlPCFFbGVtZW50Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdoZW5VcGdyYWRlZFRvQ3VzdG9tRWxlbWVudChlbGVtZW50KSB7XG4gIGRldigpLmFzc2VydChpc0FtcEVsZW1lbnQoZWxlbWVudCksICdlbGVtZW50IGlzIG5vdCBBbXBFbGVtZW50Jyk7XG4gIGlmIChlbGVtZW50LmNyZWF0ZWRDYWxsYmFjaykge1xuICAgIC8vIEVsZW1lbnQgYWxyZWFkeSBpcyBDdXN0b21FbGVtZW50O1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZWxlbWVudCk7XG4gIH1cbiAgLy8gSWYgRWxlbWVudCBpcyBzdGlsbCBIVE1MRWxlbWVudCwgd2FpdCBmb3IgaXQgdG8gdXBncmFkZSB0byBjdXN0b21FbGVtZW50XG4gIC8vIE5vdGU6IHVzZSBwdXJlIHN0cmluZyB0byBhdm9pZCBvYmZ1c2NhdGlvbiBiZXR3ZWVuIHZlcnNpb25zLlxuICBpZiAoIWVsZW1lbnRbVVBHUkFERV9UT19DVVNUT01FTEVNRU5UX1BST01JU0VdKSB7XG4gICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICBlbGVtZW50W1VQR1JBREVfVE9fQ1VTVE9NRUxFTUVOVF9QUk9NSVNFXSA9IGRlZmVycmVkLnByb21pc2U7XG4gICAgZWxlbWVudFtVUEdSQURFX1RPX0NVU1RPTUVMRU1FTlRfUkVTT0xWRVJdID0gZGVmZXJyZWQucmVzb2x2ZTtcblxuICB9XG5cbiAgcmV0dXJuIGVsZW1lbnRbVVBHUkFERV9UT19DVVNUT01FTEVNRU5UX1BST01JU0VdO1xufVxuXG4vKipcbiAqIFJlcGxhY2VtZW50IGZvciBgRWxlbWVudC5yZXF1ZXN0RnVsbHNjcmVlbigpYCBtZXRob2QuXG4gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRWxlbWVudC9yZXF1ZXN0RnVsbHNjcmVlblxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gZnVsbHNjcmVlbkVudGVyKGVsZW1lbnQpIHtcbiAgY29uc3QgcmVxdWVzdEZzID0gZWxlbWVudC5yZXF1ZXN0RnVsbHNjcmVlblxuICAgfHwgZWxlbWVudC5yZXF1ZXN0RnVsbFNjcmVlblxuICAgfHwgZWxlbWVudC53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlblxuICAgfHwgZWxlbWVudC53ZWJraXRSZXF1ZXN0RnVsbFNjcmVlblxuICAgfHwgZWxlbWVudC53ZWJraXRFbnRlckZ1bGxzY3JlZW5cbiAgIHx8IGVsZW1lbnQud2Via2l0RW50ZXJGdWxsU2NyZWVuXG4gICB8fCBlbGVtZW50Lm1zUmVxdWVzdEZ1bGxzY3JlZW5cbiAgIHx8IGVsZW1lbnQubXNSZXF1ZXN0RnVsbFNjcmVlblxuICAgfHwgZWxlbWVudC5tb3pSZXF1ZXN0RnVsbHNjcmVlblxuICAgfHwgZWxlbWVudC5tb3pSZXF1ZXN0RnVsbFNjcmVlbjtcbiAgaWYgKHJlcXVlc3RGcykge1xuICAgIHJlcXVlc3RGcy5jYWxsKGVsZW1lbnQpO1xuICB9XG59XG5cbi8qKlxuICogUmVwbGFjZW1lbnQgZm9yIGBEb2N1bWVudC5leGl0RnVsbHNjcmVlbigpYCBtZXRob2QuXG4gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRG9jdW1lbnQvZXhpdEZ1bGxzY3JlZW5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZ1bGxzY3JlZW5FeGl0KGVsZW1lbnQpIHtcbiAgbGV0IGV4aXRGcyA9IGVsZW1lbnQuY2FuY2VsRnVsbFNjcmVlblxuICAgICAgICAgICAgICDCoHx8IGVsZW1lbnQuZXhpdEZ1bGxzY3JlZW5cbiAgICAgICAgICAgICAgwqB8fCBlbGVtZW50LmV4aXRGdWxsU2NyZWVuXG4gICAgICAgICAgICAgIMKgfHwgZWxlbWVudC53ZWJraXRFeGl0RnVsbHNjcmVlblxuICAgICAgICAgICAgICDCoHx8IGVsZW1lbnQud2Via2l0RXhpdEZ1bGxTY3JlZW5cbiAgICAgICAgICAgICAgwqB8fCBlbGVtZW50LndlYmtpdENhbmNlbEZ1bGxTY3JlZW5cbiAgICAgICAgICAgICAgwqB8fCBlbGVtZW50Lm1vekNhbmNlbEZ1bGxTY3JlZW5cbiAgICAgICAgICAgICAgwqB8fCBlbGVtZW50Lm1zRXhpdEZ1bGxzY3JlZW47XG4gIGlmIChleGl0RnMpIHtcbiAgICBleGl0RnMuY2FsbChlbGVtZW50KTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKGVsZW1lbnQub3duZXJEb2N1bWVudCkge1xuICAgIGV4aXRGcyA9IGVsZW1lbnQub3duZXJEb2N1bWVudC5jYW5jZWxGdWxsU2NyZWVuXG4gICAgICAgICAgICAgfHwgZWxlbWVudC5vd25lckRvY3VtZW50LmV4aXRGdWxsc2NyZWVuXG4gICAgICAgICAgICAgfHwgZWxlbWVudC5vd25lckRvY3VtZW50LmV4aXRGdWxsU2NyZWVuXG4gICAgICAgICAgICAgfHwgZWxlbWVudC5vd25lckRvY3VtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuXG4gICAgICAgICAgICAgfHwgZWxlbWVudC5vd25lckRvY3VtZW50LndlYmtpdEV4aXRGdWxsU2NyZWVuXG4gICAgICAgICAgICAgfHwgZWxlbWVudC5vd25lckRvY3VtZW50LndlYmtpdENhbmNlbEZ1bGxTY3JlZW5cbiAgICAgICAgICAgICB8fCBlbGVtZW50Lm93bmVyRG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlblxuICAgICAgICAgICAgIHx8IGVsZW1lbnQub3duZXJEb2N1bWVudC5tc0V4aXRGdWxsc2NyZWVuO1xuICB9XG4gIGlmIChleGl0RnMpIHtcbiAgICBleGl0RnMuY2FsbChlbGVtZW50Lm93bmVyRG9jdW1lbnQpO1xuICAgIHJldHVybjtcbiAgfVxufVxuXG5cbi8qKlxuICogUmVwbGFjZW1lbnQgZm9yIGBEb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudGAuXG4gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRG9jdW1lbnQvZnVsbHNjcmVlbkVsZW1lbnRcbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Z1bGxzY3JlZW5FbGVtZW50KGVsZW1lbnQpIHtcbiAgY29uc3QgaXNGdWxsc2NyZWVuID0gZWxlbWVudC53ZWJraXREaXNwbGF5aW5nRnVsbHNjcmVlbjtcbiAgaWYgKGlzRnVsbHNjcmVlbikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChlbGVtZW50Lm93bmVyRG9jdW1lbnQpIHtcbiAgICBjb25zdCBmdWxsc2NyZWVuRWxlbWVudCA9IGVsZW1lbnQub3duZXJEb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudFxuICAgICAgICAgICAgIHx8IGVsZW1lbnQub3duZXJEb2N1bWVudC53ZWJraXRGdWxsc2NyZWVuRWxlbWVudFxuICAgICAgICAgICAgIHx8IGVsZW1lbnQub3duZXJEb2N1bWVudC5tb3pGdWxsU2NyZWVuRWxlbWVudFxuICAgICAgICAgICAgIHx8IGVsZW1lbnQud2Via2l0Q3VycmVudEZ1bGxTY3JlZW5FbGVtZW50O1xuICAgIGlmIChmdWxsc2NyZWVuRWxlbWVudCA9PSBlbGVtZW50KSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBub2RlIGlzIG5vdCBkaXNhYmxlZC5cbiAqXG4gKiBJRTggY2FuIHJldHVybiBmYWxzZSBwb3NpdGl2ZXMsIHNlZSB7QGxpbmsgbWF0Y2hlc30uXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvZm9ybXMuaHRtbCNjb25jZXB0LWZlLWRpc2FibGVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0VuYWJsZWQoZWxlbWVudCkge1xuICByZXR1cm4gIShlbGVtZW50LmRpc2FibGVkIHx8IG1hdGNoZXMoZWxlbWVudCwgJzpkaXNhYmxlZCcpKTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgKiBhcyBkb20gZnJvbSAnLi9kb20nO1xuaW1wb3J0IHtcbiAgZ2V0QW1wZG9jLFxuICBnZXRFeGlzdGluZ1NlcnZpY2VGb3JEb2NJbkVtYmVkU2NvcGUsXG4gIGdldFNlcnZpY2UsXG4gIGdldFNlcnZpY2VQcm9taXNlLFxuICBnZXRTZXJ2aWNlUHJvbWlzZUZvckRvYyxcbiAgZ2V0U2VydmljZVByb21pc2VPck51bGwsXG4gIGdldFNlcnZpY2VQcm9taXNlT3JOdWxsRm9yRG9jLFxuICBnZXRUb3BXaW5kb3csXG59IGZyb20gJy4vc2VydmljZSc7XG5pbXBvcnQge3RvV2lufSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7dXNlcn0gZnJvbSAnLi9sb2cnO1xuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIGZvciBhIHNlcnZpY2UgZm9yIHRoZSBnaXZlbiBpZCBhbmQgd2luZG93LiBBbHNvIGV4cGVjdHMgYW5cbiAqIGVsZW1lbnQgdGhhdCBoYXMgdGhlIGFjdHVhbCBpbXBsZW1lbnRhdGlvbi4gVGhlIHByb21pc2UgcmVzb2x2ZXMgd2hlbiB0aGVcbiAqIGltcGxlbWVudGF0aW9uIGxvYWRlZC4gVXNlcnMgc2hvdWxkIHR5cGljYWxseSB3cmFwIHRoaXMgYXMgYSBzcGVjaWFsIHB1cnBvc2VcbiAqIGZ1bmN0aW9uIChlLmcuIFNlcnZpY2VzLnZpZXdwb3J0Rm9yRG9jKC4uLikpIGZvciB0eXBlIHNhZmV0eSBhbmQgYmVjYXVzZSB0aGVcbiAqIGZhY3Rvcnkgc2hvdWxkIG5vdCBiZSBwYXNzZWQgYXJvdW5kLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBvZiB0aGUgc2VydmljZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBleHRlbnNpb24gTmFtZSBvZiB0aGUgY3VzdG9tIGV4dGVuc2lvbiB0aGF0IHByb3ZpZGVzIHRoZVxuICogICAgIGltcGxlbWVudGF0aW9uIG9mIHRoaXMgc2VydmljZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9lbGVtZW50IFdoZXRoZXIgdGhpcyBzZXJ2aWNlIGlzIHByb3ZpZGVkIGJ5IGFuIGVsZW1lbnQsXG4gKiAgICAgbm90IHRoZSBleHRlbnNpb24uXG4gKiBAcmV0dXJuIHshUHJvbWlzZTwqPn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnRTZXJ2aWNlKHdpbiwgaWQsIGV4dGVuc2lvbiwgb3B0X2VsZW1lbnQpIHtcbiAgcmV0dXJuIGdldEVsZW1lbnRTZXJ2aWNlSWZBdmFpbGFibGUod2luLCBpZCwgZXh0ZW5zaW9uLCBvcHRfZWxlbWVudCkudGhlbihcbiAgICAgIHNlcnZpY2UgPT4gYXNzZXJ0U2VydmljZShzZXJ2aWNlLCBpZCwgZXh0ZW5zaW9uKSk7XG59XG5cbi8qKlxuICogU2FtZSBhcyBnZXRFbGVtZW50U2VydmljZSBidXQgcHJvZHVjZXMgbnVsbCBpZiB0aGUgZ2l2ZW4gZWxlbWVudCBpcyBub3RcbiAqIGFjdHVhbGx5IGF2YWlsYWJsZSBvbiB0aGUgY3VycmVudCBwYWdlLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBvZiB0aGUgc2VydmljZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBleHRlbnNpb24gTmFtZSBvZiB0aGUgY3VzdG9tIGV4dGVuc2lvbiB0aGF0IHByb3ZpZGVzIHRoZVxuICogICAgIGltcGxlbWVudGF0aW9uIG9mIHRoaXMgc2VydmljZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9lbGVtZW50IFdoZXRoZXIgdGhpcyBzZXJ2aWNlIGlzIHByb3ZpZGVkIGJ5IGFuXG4gKiAgICAgZWxlbWVudCwgbm90IHRoZSBleHRlbnNpb24uXG4gKiBAcmV0dXJuIHshUHJvbWlzZTw/T2JqZWN0Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnRTZXJ2aWNlSWZBdmFpbGFibGUod2luLCBpZCwgZXh0ZW5zaW9uLCBvcHRfZWxlbWVudCkge1xuICBjb25zdCBzID0gZ2V0U2VydmljZVByb21pc2VPck51bGwod2luLCBpZCk7XG4gIGlmIChzKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2U8P09iamVjdD59ICovIChzKTtcbiAgfVxuICByZXR1cm4gZ2V0RWxlbWVudFNlcnZpY2VQcm9taXNlT3JOdWxsKHdpbiwgaWQsIGV4dGVuc2lvbiwgb3B0X2VsZW1lbnQpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gZWxlbWVudE5hbWUgTmFtZSBvZiBhbiBleHRlbmRlZCBjdXN0b20gZWxlbWVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBlbGVtZW50IGlzIHNjaGVkdWxlZCB0byBiZSBsb2FkZWQuXG4gKi9cbmZ1bmN0aW9uIGlzRWxlbWVudFNjaGVkdWxlZCh3aW4sIGVsZW1lbnROYW1lKSB7XG4gIC8vIFNldCBpbiBjdXN0b20tZWxlbWVudC5qc1xuICBpZiAoIXdpbi5hbXBFeHRlbmRlZEVsZW1lbnRzKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiAhIXdpbi5hbXBFeHRlbmRlZEVsZW1lbnRzW2VsZW1lbnROYW1lXTtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIGZvciBhIHNlcnZpY2UgZm9yIHRoZSBnaXZlbiBpZCBhbmQgd2luZG93LiBBbHNvIGV4cGVjdHMgYW5cbiAqIGVsZW1lbnQgdGhhdCBoYXMgdGhlIGFjdHVhbCBpbXBsZW1lbnRhdGlvbi4gVGhlIHByb21pc2UgcmVzb2x2ZXMgd2hlbiB0aGVcbiAqIGltcGxlbWVudGF0aW9uIGxvYWRlZC4gVXNlcnMgc2hvdWxkIHR5cGljYWxseSB3cmFwIHRoaXMgYXMgYSBzcGVjaWFsIHB1cnBvc2VcbiAqIGZ1bmN0aW9uIChlLmcuIFNlcnZpY2VzLnZpZXdwb3J0Rm9yRG9jKC4uLikpIGZvciB0eXBlIHNhZmV0eSBhbmQgYmVjYXVzZSB0aGVcbiAqIGZhY3Rvcnkgc2hvdWxkIG5vdCBiZSBwYXNzZWQgYXJvdW5kLlxuICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gZXh0ZW5zaW9uIE5hbWUgb2YgdGhlIGN1c3RvbSBleHRlbnNpb24gdGhhdCBwcm92aWRlcyB0aGVcbiAqICAgICBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzIHNlcnZpY2UuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfZWxlbWVudCBXaGV0aGVyIHRoaXMgc2VydmljZSBpcyBwcm92aWRlZCBieSBhbiBlbGVtZW50LFxuICogICAgIG5vdCB0aGUgZXh0ZW5zaW9uLlxuICogQHJldHVybiB7IVByb21pc2U8Kj59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50U2VydmljZUZvckRvYyhlbGVtZW50T3JBbXBEb2MsIGlkLCBleHRlbnNpb24sXG4gIG9wdF9lbGVtZW50KSB7XG4gIHJldHVybiBnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlRm9yRG9jKFxuICAgICAgZWxlbWVudE9yQW1wRG9jLCBpZCwgZXh0ZW5zaW9uLCBvcHRfZWxlbWVudClcbiAgICAgIC50aGVuKHNlcnZpY2UgPT4gYXNzZXJ0U2VydmljZShzZXJ2aWNlLCBpZCwgZXh0ZW5zaW9uKSk7XG59XG5cbi8qKlxuICogU2FtZSBhcyBnZXRFbGVtZW50U2VydmljZSBidXQgcHJvZHVjZXMgbnVsbCBpZiB0aGUgZ2l2ZW4gZWxlbWVudCBpcyBub3RcbiAqIGFjdHVhbGx5IGF2YWlsYWJsZSBvbiB0aGUgY3VycmVudCBwYWdlLlxuICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gZXh0ZW5zaW9uIE5hbWUgb2YgdGhlIGN1c3RvbSBleHRlbnNpb24gdGhhdCBwcm92aWRlcyB0aGVcbiAqICAgICBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzIHNlcnZpY2UuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfZWxlbWVudCBXaGV0aGVyIHRoaXMgc2VydmljZSBpcyBwcm92aWRlZCBieSBhblxuICogICAgIGVsZW1lbnQsIG5vdCB0aGUgZXh0ZW5zaW9uLlxuICogQHJldHVybiB7IVByb21pc2U8P09iamVjdD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlRm9yRG9jKFxuICBlbGVtZW50T3JBbXBEb2MsIGlkLCBleHRlbnNpb24sIG9wdF9lbGVtZW50KSB7XG4gIGNvbnN0IGFtcGRvYyA9IGdldEFtcGRvYyhlbGVtZW50T3JBbXBEb2MpO1xuICBjb25zdCBzID0gZ2V0U2VydmljZVByb21pc2VPck51bGxGb3JEb2MoZWxlbWVudE9yQW1wRG9jLCBpZCk7XG4gIGlmIChzKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2U8P09iamVjdD59ICovIChzKTtcbiAgfVxuXG4gIHJldHVybiBhbXBkb2Mud2hlbkJvZHlBdmFpbGFibGUoKVxuICAgICAgLnRoZW4oKCkgPT4gd2FpdEZvckV4dGVuc2lvbklmUHJlc2VudChcbiAgICAgICAgICBhbXBkb2Mud2luLCBleHRlbnNpb24sXG4gICAgICAgICAgYW1wZG9jLmdldEhlYWROb2RlKCkpKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAvLyBJZiB0aGlzIHNlcnZpY2UgaXMgcHJvdmlkZWQgYnkgYW4gZWxlbWVudCwgdGhlbiB3ZSBjYW4ndCBkZXBlbmQgb25cbiAgICAgICAgLy8gdGhlIHNlcnZpY2UgKHRoZXkgbWF5IG5vdCB1c2UgdGhlIGVsZW1lbnQpLlxuICAgICAgICBpZiAob3B0X2VsZW1lbnQpIHtcbiAgICAgICAgICByZXR1cm4gZ2V0U2VydmljZVByb21pc2VPck51bGxGb3JEb2MoZWxlbWVudE9yQW1wRG9jLCBpZCk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNFbGVtZW50U2NoZWR1bGVkKGFtcGRvYy53aW4sIGV4dGVuc2lvbikpIHtcbiAgICAgICAgICByZXR1cm4gZ2V0U2VydmljZVByb21pc2VGb3JEb2MoZWxlbWVudE9yQW1wRG9jLCBpZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSBmb3Igc2VydmljZSBmb3IgdGhlIGdpdmVuIGlkIGluIHRoZSBlbWJlZCBzY29wZSBvZlxuICogYSBnaXZlbiBub2RlLCBpZiBpdCBleGlzdHMuIE90aGVyd2lzZSwgZmFsbHMgYmFjayB0byBhbXBkb2Mgc2NvcGUgSUZGXG4gKiB0aGUgZ2l2ZW4gbm9kZSBpcyBpbiB0aGUgdG9wLWxldmVsIHdpbmRvdy5cbiAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICogQHBhcmFtIHtzdHJpbmd9IGlkIG9mIHRoZSBzZXJ2aWNlLlxuICogQHBhcmFtIHtzdHJpbmd9IGV4dGVuc2lvbiBOYW1lIG9mIHRoZSBjdXN0b20gZWxlbWVudCB0aGF0IHByb3ZpZGVzXG4gKiAgICAgdGhlIGltcGxlbWVudGF0aW9uIG9mIHRoaXMgc2VydmljZS5cbiAqIEByZXR1cm4geyFQcm9taXNlPD9PYmplY3Q+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZUZvckRvY0luRW1iZWRTY29wZShcbiAgZWxlbWVudE9yQW1wRG9jLCBpZCwgZXh0ZW5zaW9uKSB7XG4gIGNvbnN0IHMgPSBnZXRFeGlzdGluZ1NlcnZpY2VGb3JEb2NJbkVtYmVkU2NvcGUoZWxlbWVudE9yQW1wRG9jLCBpZCk7XG4gIGlmIChzKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2U8P09iamVjdD59ICovIChQcm9taXNlLnJlc29sdmUocykpO1xuICB9XG4gIC8vIFJldHVybiBlbWJlZC1zY29wZSBlbGVtZW50IHNlcnZpY2UgcHJvbWlzZSBpZiBzY2hlZHVsZWQuXG4gIGlmIChlbGVtZW50T3JBbXBEb2Mubm9kZVR5cGUpIHtcbiAgICBjb25zdCB3aW4gPSB0b1dpbihlbGVtZW50T3JBbXBEb2Mub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldyk7XG4gICAgY29uc3QgdG9wV2luID0gZ2V0VG9wV2luZG93KHdpbik7XG4gICAgLy8gSW4gZW1iZWRzLCBkb2Mtc2NvcGUgc2VydmljZXMgYXJlIHdpbmRvdy1zY29wZS4gQnV0IG1ha2Ugc3VyZSB0b1xuICAgIC8vIG9ubHkgZG8gdGhpcyBmb3IgZW1iZWRzIChub3QgdGhlIHRvcCB3aW5kb3cpLCBvdGhlcndpc2Ugd2UnZCBncmFiXG4gICAgLy8gYSBwcm9taXNlIGZyb20gdGhlIHdyb25nIHNlcnZpY2UgaG9sZGVyIHdoaWNoIHdvdWxkIG5ldmVyIHJlc29sdmUuXG4gICAgaWYgKHdpbiAhPT0gdG9wV2luKSB7XG4gICAgICByZXR1cm4gZ2V0RWxlbWVudFNlcnZpY2VQcm9taXNlT3JOdWxsKHdpbiwgaWQsIGV4dGVuc2lvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZhbGxiYWNrIHRvIGFtcGRvYyBJRkYgdGhlIGdpdmVuIG5vZGUgaXMgX25vdF8gRklFLlxuICAgICAgcmV0dXJuIGdldEVsZW1lbnRTZXJ2aWNlSWZBdmFpbGFibGVGb3JEb2MoZWxlbWVudE9yQW1wRG9jLCBpZCwgZXh0ZW5zaW9uKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2U8P09iamVjdD59ICovIChQcm9taXNlLnJlc29sdmUobnVsbCkpO1xufVxuXG4vKipcbiAqIFRocm93cyB1c2VyIGVycm9yIGlmIGBzZXJ2aWNlYCBpcyBudWxsLlxuICogQHBhcmFtIHtPYmplY3R9IHNlcnZpY2VcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICogQHBhcmFtIHtzdHJpbmd9IGV4dGVuc2lvblxuICogQHJldHVybiB7IU9iamVjdH1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGFzc2VydFNlcnZpY2Uoc2VydmljZSwgaWQsIGV4dGVuc2lvbikge1xuICByZXR1cm4gLyoqIEB0eXBlIHshT2JqZWN0fSAqLyAodXNlcigpLmFzc2VydChzZXJ2aWNlLFxuICAgICAgJ1NlcnZpY2UgJXMgd2FzIHJlcXVlc3RlZCB0byBiZSBwcm92aWRlZCB0aHJvdWdoICVzLCAnICtcbiAgICAgICdidXQgJXMgaXMgbm90IGxvYWRlZCBpbiB0aGUgY3VycmVudCBwYWdlLiBUbyBmaXggdGhpcyAnICtcbiAgICAgICdwcm9ibGVtIGxvYWQgdGhlIEphdmFTY3JpcHQgZmlsZSBmb3IgJXMgaW4gdGhpcyBwYWdlLicsXG4gICAgICBpZCwgZXh0ZW5zaW9uLCBleHRlbnNpb24sIGV4dGVuc2lvbikpO1xufVxuXG4vKipcbiAqIEdldCBsaXN0IG9mIGFsbCB0aGUgZXh0ZW5zaW9uIEpTIGZpbGVzXG4gKiBAcGFyYW0ge0hUTUxIZWFkRWxlbWVudHxFbGVtZW50fFNoYWRvd1Jvb3R9IGhlYWRcbiAqIEByZXR1cm4geyFBcnJheTxzdHJpbmc+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5zaW9uU2NyaXB0c0luTm9kZShoZWFkKSB7XG4gIC8vIGFtcGRvYy5nZXRIZWFkTm9kZSgpIGNhbiByZXR1cm4gbnVsbFxuICBpZiAoIWhlYWQpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgY29uc3Qgc2NyaXB0cyA9IFtdO1xuICBjb25zdCBsaXN0ID0gaGVhZC5xdWVyeVNlbGVjdG9yQWxsKCdzY3JpcHRbY3VzdG9tLWVsZW1lbnRdJyk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHNjcmlwdHMucHVzaChsaXN0W2ldLmdldEF0dHJpYnV0ZSgnY3VzdG9tLWVsZW1lbnQnKSk7XG4gIH1cbiAgcmV0dXJuIHNjcmlwdHM7XG59XG5cbi8qKlxuICogV2FpdHMgZm9yIGJvZHkgdG8gYmUgcHJlc2VudCB0aGVuIHZlcmlmaWVzIHRoYXQgYW4gZXh0ZW5zaW9uIHNjcmlwdCBpc1xuICogcHJlc2VudCBpbiBoZWFkIGZvciBpbnN0YWxsYXRpb24uXG4gKiBAcGFyYW0geyEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBhbXBkb2NcbiAqIEBwYXJhbSB7c3RyaW5nfSBleHRlbnNpb25JZFxuICogQHJldHVybiB7IVByb21pc2U8Ym9vbGVhbj59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0V4dGVuc2lvblNjcmlwdEluTm9kZShhbXBkb2MsIGV4dGVuc2lvbklkKSB7XG4gIHJldHVybiBhbXBkb2Mud2hlbkJvZHlBdmFpbGFibGUoKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICByZXR1cm4gZXh0ZW5zaW9uU2NyaXB0SW5Ob2RlKFxuICAgICAgICAgICAgYW1wZG9jLmdldEhlYWROb2RlKCksIGV4dGVuc2lvbklkKTtcbiAgICAgIH0pO1xufVxuXG4vKipcbiAqIFZlcmlmaWVzIHRoYXQgYW4gZXh0ZW5zaW9uIHNjcmlwdCBpcyBwcmVzZW50IGluIGhlYWQgZm9yXG4gKiBpbnN0YWxsYXRpb24uXG4gKiBAcGFyYW0ge0hUTUxIZWFkRWxlbWVudHxFbGVtZW50fFNoYWRvd1Jvb3R9IGhlYWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBleHRlbnNpb25JZFxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZXh0ZW5zaW9uU2NyaXB0SW5Ob2RlKGhlYWQsIGV4dGVuc2lvbklkKSB7XG4gIHJldHVybiBleHRlbnNpb25TY3JpcHRzSW5Ob2RlKGhlYWQpLmluY2x1ZGVzKGV4dGVuc2lvbklkKTtcbn1cblxuLyoqXG4gKiBXYWl0cyBmb3IgYW4gZXh0ZW5zaW9uIGlmIGl0cyBzY3JpcHQgaXMgcHJlc2VudFxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBleHRlbnNpb25cbiAqIEBwYXJhbSB7SFRNTEhlYWRFbGVtZW50fEVsZW1lbnR8U2hhZG93Um9vdH0gaGVhZFxuICogQHJldHVybiB7IVByb21pc2V9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiB3YWl0Rm9yRXh0ZW5zaW9uSWZQcmVzZW50KHdpbiwgZXh0ZW5zaW9uLCBoZWFkKSB7XG4gIC8qKlxuICAgKiBJZiB0aGVyZSBpcyBhbiBleHRlbnNpb24gc2NyaXB0IHdhaXQgZm9yIGl0IHRvIGxvYWQgYmVmb3JlIHRyeWluZ1xuICAgKiB0byBnZXQgdGhlIHNlcnZpY2UuIFByZXZlbnRzIGEgcmFjZSBjb25kaXRpb24gd2hlbiBldmVyeXRoaW5nIGJ1dFxuICAgKiB0aGUgZXh0ZW5zaW9ucyBpcyBpbiBjYWNoZS4gSWYgdGhlcmUgaXMgbm8gc2NyaXB0IHRoZW4gaXQncyBlaXRoZXJcbiAgICogbm90IHByZXNlbnQsIG9yIHRoZSBzZXJ2aWNlIHdhcyBkZWZpbmVkIGJ5IGEgdGVzdC4gSW4gdGhvc2UgY2FzZXNcbiAgICogd2UgZG9uJ3Qgd2FpdCBhcm91bmQgZm9yIGFuIGV4dGVuc2lvbiB0aGF0IGRvZXMgbm90IGV4aXN0LlxuICAgKi9cblxuICAvLyBUT0RPKGpwZXR0aXR0KSBpbnZlc3RpZ2F0ZSByZWdpc3RlckV4dGVuc2lvbiB0byBzaG9ydCBjaXJjdWl0XG4gIC8vIHRoZSBkb20gY2FsbCBpbiBleHRlbnNpb25TY3JpcHRzSW5Ob2RlKClcbiAgaWYgKCFleHRlbnNpb25TY3JpcHRJbk5vZGUoaGVhZCwgZXh0ZW5zaW9uKSkge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxuXG4gIGNvbnN0IGV4dGVuc2lvbnMgPSBnZXRTZXJ2aWNlKHdpbiwgJ2V4dGVuc2lvbnMnKTtcbiAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2U8P09iamVjdD59ICovIChcbiAgICBleHRlbnNpb25zLndhaXRGb3JFeHRlbnNpb24od2luLCBleHRlbnNpb24pKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBwcm9taXNlIGZvciBzZXJ2aWNlIHdpdGggYGlkYCBvbiB0aGUgZ2l2ZW4gd2luZG93IGlmIGF2YWlsYWJsZS5cbiAqIE90aGVyd2lzZSwgcmVzb2x2ZXMgd2l0aCBudWxsIChzZXJ2aWNlIHdhcyBub3QgcmVnaXN0ZXJlZCkuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gKiBAcGFyYW0ge3N0cmluZ30gZXh0ZW5zaW9uXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfZWxlbWVudFxuICogQHJldHVybiB7IVByb21pc2U8T2JqZWN0Pn1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGdldEVsZW1lbnRTZXJ2aWNlUHJvbWlzZU9yTnVsbCh3aW4sIGlkLCBleHRlbnNpb24sIG9wdF9lbGVtZW50KSB7XG4gIHJldHVybiBkb20ud2FpdEZvckJvZHlQcm9taXNlKHdpbi5kb2N1bWVudClcbiAgICAgIC50aGVuKCgpID0+IHdhaXRGb3JFeHRlbnNpb25JZlByZXNlbnQod2luLCBleHRlbnNpb24sIHdpbi5kb2N1bWVudC5oZWFkKSlcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgLy8gSWYgdGhpcyBzZXJ2aWNlIGlzIHByb3ZpZGVkIGJ5IGFuIGVsZW1lbnQsIHRoZW4gd2UgY2FuJ3QgZGVwZW5kIG9uXG4gICAgICAgIC8vIHRoZSBzZXJ2aWNlICh0aGV5IG1heSBub3QgdXNlIHRoZSBlbGVtZW50KS5cbiAgICAgICAgaWYgKG9wdF9lbGVtZW50KSB7XG4gICAgICAgICAgcmV0dXJuIGdldFNlcnZpY2VQcm9taXNlT3JOdWxsKHdpbiwgaWQpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzRWxlbWVudFNjaGVkdWxlZCh3aW4sIGV4dGVuc2lvbikpIHtcbiAgICAgICAgICByZXR1cm4gZ2V0U2VydmljZVByb21pc2Uod2luLCBpZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9KTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgRXhwZXJpbWVudHMgc3lzdGVtIGFsbG93cyBhIGRldmVsb3BlciB0byBvcHQtaW4gdG8gdGVzdFxuICogZmVhdHVyZXMgdGhhdCBhcmUgbm90IHlldCBmdWxseSB0ZXN0ZWQuXG4gKlxuICogRXhwZXJpbWVudHMgcGFnZTogaHR0cHM6Ly9jZG4uYW1wcHJvamVjdC5vcmcvZXhwZXJpbWVudHMuaHRtbCAqXG4gKi9cblxuaW1wb3J0IHtnZXRDb29raWUsIHNldENvb2tpZX0gZnJvbSAnLi9jb29raWVzJztcbmltcG9ydCB7aGFzT3dufSBmcm9tICcuL3V0aWxzL29iamVjdCc7XG5pbXBvcnQge3BhcnNlUXVlcnlTdHJpbmd9IGZyb20gJy4vdXJsJztcblxuLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuY29uc3QgQ09PS0lFX05BTUUgPSAnQU1QX0VYUCc7XG5cbi8qKiBAY29uc3Qge251bWJlcn0gKi9cbmNvbnN0IENPT0tJRV9NQVhfQUdFX0RBWVMgPSAxODA7IC8vIDYgbW9udGhcblxuLyoqIEBjb25zdCB7dGltZX0gKi9cbmNvbnN0IENPT0tJRV9FWFBJUkFUSU9OX0lOVEVSVkFMID0gQ09PS0lFX01BWF9BR0VfREFZUyAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XG5cbi8qKiBAY29uc3Qge3N0cmluZ30gKi9cbmNvbnN0IFRPR0dMRVNfV0lORE9XX1BST1BFUlRZID0gJ19fQU1QX19FWFBFUklNRU5UX1RPR0dMRVMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHt7XG4gKiAgIGlzVHJhZmZpY0VsaWdpYmxlOiBmdW5jdGlvbighV2luZG93KTpib29sZWFuLFxuICogICBicmFuY2hlczogIUFycmF5PHN0cmluZz5cbiAqIH19XG4gKi9cbmV4cG9ydCBsZXQgRXhwZXJpbWVudEluZm87XG5cbi8qKlxuICogV2hldGhlciB3ZSBhcmUgaW4gY2FuYXJ5LlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0NhbmFyeSh3aW4pIHtcbiAgcmV0dXJuICEhKHdpbi5BTVBfQ09ORklHICYmIHdpbi5BTVBfQ09ORklHLmNhbmFyeSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBiaW5hcnkgdHlwZSwgZS5nLiwgY2FuYXJ5LCBjb250cm9sLCBvciBwcm9kdWN0aW9uLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEJpbmFyeVR5cGUod2luKSB7XG4gIHJldHVybiB3aW4uQU1QX0NPTkZJRyAmJiB3aW4uQU1QX0NPTkZJRy50eXBlID9cbiAgICB3aW4uQU1QX0NPTkZJRy50eXBlIDogJ3Vua25vd24nO1xufVxuXG4vKipcbiAqIFdoZXRoZXIgdGhlIHNwZWNpZmllZCBleHBlcmltZW50IGlzIG9uIG9yIG9mZi5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gZXhwZXJpbWVudElkXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNFeHBlcmltZW50T24od2luLCBleHBlcmltZW50SWQpIHtcbiAgY29uc3QgdG9nZ2xlcyA9IGV4cGVyaW1lbnRUb2dnbGVzKHdpbik7XG4gIHJldHVybiAhIXRvZ2dsZXNbZXhwZXJpbWVudElkXTtcbn1cblxuLyoqXG4gKiBUb2dnbGVzIHRoZSBleHBlcmltZW50IG9uIG9yIG9mZi4gUmV0dXJucyB0aGUgYWN0dWFsIHZhbHVlIG9mIHRoZSBleHBlcmltZW50XG4gKiBhZnRlciB0b2dnbGluZyBpcyBkb25lLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBleHBlcmltZW50SWRcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9vblxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X3RyYW5zaWVudEV4cGVyaW1lbnQgIFdoZXRoZXIgdG8gdG9nZ2xlIHRoZVxuICogICAgIGV4cGVyaW1lbnQgc3RhdGUgXCJ0cmFuc2llbnRseVwiIChpLmUuLCBmb3IgdGhpcyBwYWdlIGxvYWQgb25seSkgb3JcbiAqICAgICBkdXJhYmx5IChieSBzYXZpbmcgdGhlIGV4cGVyaW1lbnQgSURzIHRvIHRoZSBjb29raWUgYWZ0ZXIgdG9nZ2xpbmcpLlxuICogICAgIERlZmF1bHQ6IGZhbHNlIChzYXZlIGR1cmFibHkpLlxuICogQHJldHVybiB7Ym9vbGVhbn0gTmV3IHN0YXRlIGZvciBleHBlcmltZW50SWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b2dnbGVFeHBlcmltZW50KHdpbiwgZXhwZXJpbWVudElkLCBvcHRfb24sXG4gIG9wdF90cmFuc2llbnRFeHBlcmltZW50KSB7XG4gIGNvbnN0IGN1cnJlbnRseU9uID0gaXNFeHBlcmltZW50T24od2luLCAvKk9LKi9leHBlcmltZW50SWQpO1xuICBjb25zdCBvbiA9ICEhKG9wdF9vbiAhPT0gdW5kZWZpbmVkID8gb3B0X29uIDogIWN1cnJlbnRseU9uKTtcbiAgaWYgKG9uICE9IGN1cnJlbnRseU9uKSB7XG4gICAgY29uc3QgdG9nZ2xlcyA9IGV4cGVyaW1lbnRUb2dnbGVzKHdpbik7XG4gICAgdG9nZ2xlc1tleHBlcmltZW50SWRdID0gb247XG5cbiAgICBpZiAoIW9wdF90cmFuc2llbnRFeHBlcmltZW50KSB7XG4gICAgICBjb25zdCBjb29raWVUb2dnbGVzID0gZ2V0RXhwZXJpbWVudFRvZ2dsZXNGcm9tQ29va2llKHdpbik7XG4gICAgICBjb29raWVUb2dnbGVzW2V4cGVyaW1lbnRJZF0gPSBvbjtcbiAgICAgIHNhdmVFeHBlcmltZW50VG9nZ2xlc1RvQ29va2llKHdpbiwgY29va2llVG9nZ2xlcyk7XG4gICAgfVxuICB9XG4gIHJldHVybiBvbjtcbn1cblxuLyoqXG4gKiBDYWxjdWxhdGUgd2hldGhlciB0aGUgZXhwZXJpbWVudCBpcyBvbiBvciBvZmYgYmFzZWQgb2ZmIG9mIHRoZVxuICogY29va2llRmxhZyBvciB0aGUgZ2xvYmFsIGNvbmZpZyBmcmVxdWVuY3kgZ2l2ZW4uXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXhwZXJpbWVudFRvZ2dsZXMod2luKSB7XG4gIGlmICh3aW5bVE9HR0xFU19XSU5ET1dfUFJPUEVSVFldKSB7XG4gICAgcmV0dXJuIHdpbltUT0dHTEVTX1dJTkRPV19QUk9QRVJUWV07XG4gIH1cbiAgd2luW1RPR0dMRVNfV0lORE9XX1BST1BFUlRZXSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGNvbnN0IHRvZ2dsZXMgPSB3aW5bVE9HR0xFU19XSU5ET1dfUFJPUEVSVFldO1xuXG4gIC8vIFJlYWQgdGhlIGRlZmF1bHQgY29uZmlnIG9mIHRoaXMgYnVpbGQuXG4gIGlmICh3aW4uQU1QX0NPTkZJRykge1xuICAgIGZvciAoY29uc3QgZXhwZXJpbWVudElkIGluIHdpbi5BTVBfQ09ORklHKSB7XG4gICAgICBjb25zdCBmcmVxdWVuY3kgPSB3aW4uQU1QX0NPTkZJR1tleHBlcmltZW50SWRdO1xuICAgICAgaWYgKHR5cGVvZiBmcmVxdWVuY3kgPT09ICdudW1iZXInICYmIGZyZXF1ZW5jeSA+PSAwICYmIGZyZXF1ZW5jeSA8PSAxKSB7XG4gICAgICAgIHRvZ2dsZXNbZXhwZXJpbWVudElkXSA9IE1hdGgucmFuZG9tKCkgPCBmcmVxdWVuY3k7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8vIFJlYWQgZG9jdW1lbnQgbGV2ZWwgb3ZlcnJpZGUgZnJvbSBtZXRhIHRhZy5cbiAgaWYgKHdpbi5BTVBfQ09ORklHXG4gICAgICAmJiBBcnJheS5pc0FycmF5KHdpbi5BTVBfQ09ORklHWydhbGxvdy1kb2Mtb3B0LWluJ10pXG4gICAgICAmJiB3aW4uQU1QX0NPTkZJR1snYWxsb3ctZG9jLW9wdC1pbiddLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBhbGxvd2VkID0gd2luLkFNUF9DT05GSUdbJ2FsbG93LWRvYy1vcHQtaW4nXTtcbiAgICBjb25zdCBtZXRhID1cbiAgICAgICAgd2luLmRvY3VtZW50LmhlYWQucXVlcnlTZWxlY3RvcignbWV0YVtuYW1lPVwiYW1wLWV4cGVyaW1lbnRzLW9wdC1pblwiXScpO1xuICAgIGlmIChtZXRhKSB7XG4gICAgICBjb25zdCBvcHRlZEluRXhwZXJpbWVudHMgPSBtZXRhLmdldEF0dHJpYnV0ZSgnY29udGVudCcpLnNwbGl0KCcsJyk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9wdGVkSW5FeHBlcmltZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoYWxsb3dlZC5pbmRleE9mKG9wdGVkSW5FeHBlcmltZW50c1tpXSkgIT0gLTEpIHtcbiAgICAgICAgICB0b2dnbGVzW29wdGVkSW5FeHBlcmltZW50c1tpXV0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgT2JqZWN0LmFzc2lnbih0b2dnbGVzLCBnZXRFeHBlcmltZW50VG9nZ2xlc0Zyb21Db29raWUod2luKSk7XG5cbiAgaWYgKHdpbi5BTVBfQ09ORklHXG4gICAgICAmJiBBcnJheS5pc0FycmF5KHdpbi5BTVBfQ09ORklHWydhbGxvdy11cmwtb3B0LWluJ10pXG4gICAgICAmJiB3aW4uQU1QX0NPTkZJR1snYWxsb3ctdXJsLW9wdC1pbiddLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBhbGxvd2VkID0gd2luLkFNUF9DT05GSUdbJ2FsbG93LXVybC1vcHQtaW4nXTtcbiAgICBjb25zdCBoYXNoID0gd2luLmxvY2F0aW9uLm9yaWdpbmFsSGFzaCB8fCB3aW4ubG9jYXRpb24uaGFzaDtcbiAgICBjb25zdCBwYXJhbXMgPSBwYXJzZVF1ZXJ5U3RyaW5nKGhhc2gpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWxsb3dlZC5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgcGFyYW0gPSBwYXJhbXNbYGUtJHthbGxvd2VkW2ldfWBdO1xuICAgICAgaWYgKHBhcmFtID09ICcxJykge1xuICAgICAgICB0b2dnbGVzW2FsbG93ZWRbaV1dID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChwYXJhbSA9PSAnMCcpIHtcbiAgICAgICAgdG9nZ2xlc1thbGxvd2VkW2ldXSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gdG9nZ2xlcztcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBjYWNoZWQgZXhwZXJpbWVudHMgdG9nZ2xlcywgb3IgbnVsbCBpZiB0aGV5IGhhdmUgbm90IGJlZW5cbiAqIGNvbXB1dGVkIHlldC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHtPYmplY3Q8c3RyaW5nLCBib29sZWFuPn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4cGVyaW1lbnRUb2dnbGVzT3JOdWxsKHdpbikge1xuICByZXR1cm4gd2luW1RPR0dMRVNfV0lORE9XX1BST1BFUlRZXSB8fCBudWxsO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzZXQgb2YgZXhwZXJpbWVudCBJRHMgY3VycmVudGx5IG9uLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4geyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn1cbiAqL1xuZnVuY3Rpb24gZ2V0RXhwZXJpbWVudFRvZ2dsZXNGcm9tQ29va2llKHdpbikge1xuICBjb25zdCBleHBlcmltZW50Q29va2llID0gZ2V0Q29va2llKHdpbiwgQ09PS0lFX05BTUUpO1xuICBjb25zdCB0b2tlbnMgPSBleHBlcmltZW50Q29va2llID8gZXhwZXJpbWVudENvb2tpZS5zcGxpdCgvXFxzKixcXHMqL2cpIDogW107XG5cbiAgY29uc3QgdG9nZ2xlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHRva2Vuc1tpXS5sZW5ndGggPT0gMCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmICh0b2tlbnNbaV1bMF0gPT0gJy0nKSB7XG4gICAgICB0b2dnbGVzW3Rva2Vuc1tpXS5zdWJzdHIoMSldID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRvZ2dsZXNbdG9rZW5zW2ldXSA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRvZ2dsZXM7XG59XG5cbi8qKlxuICogU2F2ZXMgYSBzZXQgb2YgZXhwZXJpbWVudCBJRHMgY3VycmVudGx5IG9uLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fSB0b2dnbGVzXG4gKi9cbmZ1bmN0aW9uIHNhdmVFeHBlcmltZW50VG9nZ2xlc1RvQ29va2llKHdpbiwgdG9nZ2xlcykge1xuICBjb25zdCBleHBlcmltZW50SWRzID0gW107XG4gIGZvciAoY29uc3QgZXhwZXJpbWVudCBpbiB0b2dnbGVzKSB7XG4gICAgZXhwZXJpbWVudElkcy5wdXNoKCh0b2dnbGVzW2V4cGVyaW1lbnRdID09PSBmYWxzZSA/ICctJyA6ICcnKSArIGV4cGVyaW1lbnQpO1xuICB9XG5cbiAgc2V0Q29va2llKHdpbiwgQ09PS0lFX05BTUUsIGV4cGVyaW1lbnRJZHMuam9pbignLCcpLFxuICAgICAgRGF0ZS5ub3coKSArIENPT0tJRV9FWFBJUkFUSU9OX0lOVEVSVkFMLCB7XG4gICAgICAgIC8vIFNldCBleHBsaWNpdCBkb21haW4sIHNvIHRoZSBjb29raWUgZ2V0cyBzZW5kIHRvIHN1YiBkb21haW5zLlxuICAgICAgICBkb21haW46IHdpbi5sb2NhdGlvbi5ob3N0bmFtZSxcbiAgICAgICAgYWxsb3dPblByb3h5T3JpZ2luOiB0cnVlLFxuICAgICAgfSk7XG59XG5cbi8qKlxuICogU2VlIGdldEV4cGVyaW1lbnRUb2dnbGVzRnJvbUNvb2tpZSgpLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4geyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn1cbiAqIEB2aXNpYmxlRm9yVGVzdGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXhwZXJpbWVudFRvZ2xlc0Zyb21Db29raWVGb3JUZXN0aW5nKHdpbikge1xuICByZXR1cm4gZ2V0RXhwZXJpbWVudFRvZ2dsZXNGcm9tQ29va2llKHdpbik7XG59XG5cbi8qKlxuICogUmVzZXRzIHRoZSBleHBlcmltZW50c1RvZ2dsZSBjYWNoZSBmb3IgdGVzdGluZyBwdXJwb3Nlcy5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0RXhwZXJpbWVudFRvZ2dsZXNGb3JUZXN0aW5nKHdpbikge1xuICBzZXRDb29raWUod2luLCBDT09LSUVfTkFNRSwgJycsIDAsIHtcbiAgICBkb21haW46IHdpbi5sb2NhdGlvbi5ob3N0bmFtZSxcbiAgfSk7XG4gIHdpbltUT0dHTEVTX1dJTkRPV19QUk9QRVJUWV0gPSBudWxsO1xufVxuXG4vKipcbiAqIEluIHNvbWUgYnJvd3NlciBpbXBsZW1lbnRhdGlvbnMgb2YgTWF0aC5yYW5kb20oKSwgc2VxdWVudGlhbCBjYWxscyBvZlxuICogTWF0aC5yYW5kb20oKSBhcmUgY29ycmVsYXRlZCBhbmQgY2FuIGNhdXNlIGEgYmlhcy4gIEluIHBhcnRpY3VsYXIsXG4gKiBpZiB0aGUgcHJldmlvdXMgcmFuZG9tKCkgY2FsbCB3YXMgPCAwLjAwMSAoYXMgaXQgd2lsbCBiZSBpZiB3ZSBzZWxlY3RcbiAqIGludG8gYW4gZXhwZXJpbWVudCksIHRoZSBuZXh0IHZhbHVlIGNvdWxkIGJlIGxlc3MgdGhhbiAwLjUgbW9yZSB0aGFuXG4gKiA1MC43JSBvZiB0aGUgdGltZS4gIFRoaXMgcHJvdmlkZXMgYW4gaW1wbGVtZW50YXRpb24gdGhhdCByb290cyBkb3duIGludG9cbiAqIHRoZSBjcnlwdG8gQVBJLCB3aGVuIGF2YWlsYWJsZSwgdG8gcHJvZHVjZSBsZXNzIGJpYXNlZCBzYW1wbGVzLlxuICpcbiAqIEByZXR1cm4ge251bWJlcn0gUHNldWRvLXJhbmRvbSBmbG9hdGluZy1wb2ludCB2YWx1ZSBvbiB0aGUgcmFuZ2UgWzAsIDEpLlxuICovXG5mdW5jdGlvbiBzbG93QnV0QWNjdXJhdGVQcm5nKCkge1xuICAvLyBUT0RPKHRkcmwpOiBJbXBsZW1lbnQuXG4gIHJldHVybiBNYXRoLnJhbmRvbSgpO1xufVxuXG4vKipcbiAqIENvbnRhaW5lciBmb3IgYWx0ZXJuYXRlIHJhbmRvbSBudW1iZXIgZ2VuZXJhdG9yIGltcGxlbWVudGF0aW9ucy4gIFRoaXNcbiAqIGFsbG93cyB1cyB0byBzZXQgYW4gXCJhY2N1cmF0ZVwiIFBSTkcgZm9yIGJyYW5jaCBzZWxlY3Rpb24sIGJ1dCB0byBtb2NrIGl0XG4gKiBvdXQgZWFzaWx5IGluIHRlc3RzLlxuICpcbiAqIEB2aXNpYmxlRm9yVGVzdGluZ1xuICogQGNvbnN0IHshe2FjY3VyYXRlUHJuZzogZnVuY3Rpb24oKTpudW1iZXJ9fVxuICovXG5leHBvcnQgY29uc3QgUkFORE9NX05VTUJFUl9HRU5FUkFUT1JTID0ge1xuICBhY2N1cmF0ZVBybmc6IHNsb3dCdXRBY2N1cmF0ZVBybmcsXG59O1xuXG4vKipcbiAqIFNlbGVjdHMsIHVuaWZvcm1seSBhdCByYW5kb20sIGEgc2luZ2xlIGl0ZW0gZnJvbSB0aGUgYXJyYXkuXG4gKiBAcGFyYW0geyFBcnJheTxzdHJpbmc+fSBhcnIgT2JqZWN0IHRvIHNlbGVjdCBmcm9tLlxuICogQHJldHVybiB7P3N0cmluZ30gU2luZ2xlIGl0ZW0gZnJvbSBhcnIgb3IgbnVsbCBpZiBhcnIgd2FzIGVtcHR5LlxuICovXG5mdW5jdGlvbiBzZWxlY3RSYW5kb21JdGVtKGFycikge1xuICBjb25zdCBybiA9IFJBTkRPTV9OVU1CRVJfR0VORVJBVE9SUy5hY2N1cmF0ZVBybmcoKTtcbiAgcmV0dXJuIGFycltNYXRoLmZsb29yKHJuICogYXJyLmxlbmd0aCldIHx8IG51bGw7XG59XG5cbi8qKlxuICogU2VsZWN0cyB3aGljaCBwYWdlLWxldmVsIGV4cGVyaW1lbnQgYnJhbmNoZXMgYXJlIGVuYWJsZWQuIElmIGEgZ2l2ZW5cbiAqIGV4cGVyaW1lbnQgbmFtZSBpcyBhbHJlYWR5IHNldCAoaW5jbHVkaW5nIHRvIHRoZSBudWxsIC8gbm8gYnJhbmNoZXMgc2VsZWN0ZWRcbiAqIHN0YXRlKSwgdGhpcyB3b24ndCBhbHRlciBpdHMgc3RhdGUuXG4gKlxuICogQ2hlY2sgd2hldGhlciBhIGdpdmVuIGV4cGVyaW1lbnQgaXMgc2V0IHVzaW5nIGlzRXhwZXJpbWVudE9uKHdpbixcbiAqIGV4cGVyaW1lbnROYW1lKSBhbmQsIGlmIGl0IGlzIG9uLCBsb29rIGZvciB3aGljaCBicmFuY2ggaXMgc2VsZWN0ZWQgaW5cbiAqIHdpbi5leHBlcmltZW50QnJhbmNoZXNbZXhwZXJpbWVudE5hbWVdLlxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luIFdpbmRvdyBjb250ZXh0IG9uIHdoaWNoIHRvIHNhdmUgZXhwZXJpbWVudFxuICogICAgIHNlbGVjdGlvbiBzdGF0ZS5cbiAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsICFFeHBlcmltZW50SW5mbz59IGV4cGVyaW1lbnRzICBTZXQgb2YgZXhwZXJpbWVudHMgdG9cbiAqICAgICBjb25maWd1cmUgZm9yIHRoaXMgcGFnZSBsb2FkLlxuICogQHJldHVybiB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz59IE1hcCBvZiBleHBlcmltZW50IG5hbWVzIHRvIHNlbGVjdGVkXG4gKiAgICAgYnJhbmNoZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByYW5kb21seVNlbGVjdFVuc2V0RXhwZXJpbWVudHMod2luLCBleHBlcmltZW50cykge1xuICB3aW4uZXhwZXJpbWVudEJyYW5jaGVzID0gd2luLmV4cGVyaW1lbnRCcmFuY2hlcyB8fCB7fTtcbiAgY29uc3Qgc2VsZWN0ZWRFeHBlcmltZW50cyA9IHt9O1xuICBmb3IgKGNvbnN0IGV4cGVyaW1lbnROYW1lIGluIGV4cGVyaW1lbnRzKSB7XG4gICAgLy8gU2tpcCBleHBlcmltZW50TmFtZSBpZiBpdCBpcyBub3QgYSBrZXkgb2YgZXhwZXJpbWVudHMgb2JqZWN0IG9yIGlmIGl0XG4gICAgLy8gaGFzIGFscmVhZHkgYmVlbiBwb3B1bGF0ZWQgYnkgc29tZSBvdGhlciBwcm9wZXJ0eS5cbiAgICBpZiAoIWhhc093bihleHBlcmltZW50cywgZXhwZXJpbWVudE5hbWUpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGhhc093bih3aW4uZXhwZXJpbWVudEJyYW5jaGVzLCBleHBlcmltZW50TmFtZSkpIHtcbiAgICAgIHNlbGVjdGVkRXhwZXJpbWVudHNbZXhwZXJpbWVudE5hbWVdID1cbiAgICAgICAgICB3aW4uZXhwZXJpbWVudEJyYW5jaGVzW2V4cGVyaW1lbnROYW1lXTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmICghZXhwZXJpbWVudHNbZXhwZXJpbWVudE5hbWVdLmlzVHJhZmZpY0VsaWdpYmxlIHx8XG4gICAgICAgICFleHBlcmltZW50c1tleHBlcmltZW50TmFtZV0uaXNUcmFmZmljRWxpZ2libGUod2luKSkge1xuICAgICAgd2luLmV4cGVyaW1lbnRCcmFuY2hlc1tleHBlcmltZW50TmFtZV0gPSBudWxsO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gSWYgd2UncmUgaW4gdGhlIGV4cGVyaW1lbnQsIGJ1dCB3ZSBoYXZlbid0IGFscmVhZHkgZm9yY2VkIGEgc3BlY2lmaWNcbiAgICAvLyBleHBlcmltZW50IGJyYW5jaCAoZS5nLiwgdmlhIGEgdGVzdCBzZXR1cCksIHRoZW4gcmFuZG9taXplIHRoZSBicmFuY2hcbiAgICAvLyBjaG9pY2UuXG4gICAgaWYgKCF3aW4uZXhwZXJpbWVudEJyYW5jaGVzW2V4cGVyaW1lbnROYW1lXSAmJlxuICAgICAgaXNFeHBlcmltZW50T24od2luLCAvKk9LKi9leHBlcmltZW50TmFtZSkpIHtcbiAgICAgIGNvbnN0IHticmFuY2hlc30gPSBleHBlcmltZW50c1tleHBlcmltZW50TmFtZV07XG4gICAgICB3aW4uZXhwZXJpbWVudEJyYW5jaGVzW2V4cGVyaW1lbnROYW1lXSA9IHNlbGVjdFJhbmRvbUl0ZW0oYnJhbmNoZXMpO1xuICAgICAgc2VsZWN0ZWRFeHBlcmltZW50c1tleHBlcmltZW50TmFtZV0gPVxuICAgICAgICAgIHdpbi5leHBlcmltZW50QnJhbmNoZXNbZXhwZXJpbWVudE5hbWVdO1xuICAgIH1cbiAgfVxuICByZXR1cm4gc2VsZWN0ZWRFeHBlcmltZW50cztcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBleHBlcmltZW50IGJyYW5jaCBlbmFibGVkIGZvciB0aGUgZ2l2ZW4gZXhwZXJpbWVudCBJRC5cbiAqIEZvciBleGFtcGxlLCAnY29udHJvbCcgb3IgJ2V4cGVyaW1lbnQnLlxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luIFdpbmRvdyBjb250ZXh0IHRvIGNoZWNrIGZvciBleHBlcmltZW50IHN0YXRlLlxuICogQHBhcmFtIHtzdHJpbmd9IGV4cGVyaW1lbnROYW1lIE5hbWUgb2YgdGhlIGV4cGVyaW1lbnQgdG8gY2hlY2suXG4gKiBAcmV0dXJuIHs/c3RyaW5nfSBBY3RpdmUgZXhwZXJpbWVudCBicmFuY2ggSUQgZm9yIGV4cGVyaW1lbnROYW1lIChwb3NzaWJseVxuICogICAgIG51bGwgaWYgZXhwZXJpbWVudE5hbWUgaGFzIGJlZW4gdGVzdGVkIGJ1dCBubyBicmFuY2ggd2FzIGVuYWJsZWQpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXhwZXJpbWVudEJyYW5jaCh3aW4sIGV4cGVyaW1lbnROYW1lKSB7XG4gIHJldHVybiB3aW4uZXhwZXJpbWVudEJyYW5jaGVzID8gd2luLmV4cGVyaW1lbnRCcmFuY2hlc1tleHBlcmltZW50TmFtZV0gOiBudWxsO1xufVxuXG4vKipcbiAqIEZvcmNlIGVuYWJsZSAob3IgZGlzYWJsZSkgYSBzcGVjaWZpYyBicmFuY2ggb2YgYSBnaXZlbiBleHBlcmltZW50IG5hbWUuXG4gKiBEaXNhYmxlcyB0aGUgZXhwZXJpbWVudCBuYW1lIGFsdG9nZXRoZXIgaWYgYnJhbmNoSWQgaXMgZmFsc2Vpc2guXG4gKlxuICogQHBhcmFtIHshV2luZG93fSB3aW4gV2luZG93IGNvbnRleHQgdG8gY2hlY2sgZm9yIGV4cGVyaW1lbnQgc3RhdGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gZXhwZXJpbWVudE5hbWUgTmFtZSBvZiB0aGUgZXhwZXJpbWVudCB0byBjaGVjay5cbiAqIEBwYXJhbSB7P3N0cmluZ30gYnJhbmNoSWQgSUQgb2YgYnJhbmNoIHRvIGZvcmNlIG9yIG51bGwgdG8gZGlzYWJsZVxuICogICAgIGFsdG9nZXRoZXIuXG4gKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcmNlRXhwZXJpbWVudEJyYW5jaCh3aW4sIGV4cGVyaW1lbnROYW1lLCBicmFuY2hJZCkge1xuICB3aW4uZXhwZXJpbWVudEJyYW5jaGVzID0gd2luLmV4cGVyaW1lbnRCcmFuY2hlcyB8fCB7fTtcbiAgdG9nZ2xlRXhwZXJpbWVudCh3aW4sIGV4cGVyaW1lbnROYW1lLCAhIWJyYW5jaElkLCB0cnVlKTtcbiAgd2luLmV4cGVyaW1lbnRCcmFuY2hlc1tleHBlcmltZW50TmFtZV0gPSBicmFuY2hJZDtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge2dldE1vZGV9IGZyb20gJy4vbW9kZSc7XG5pbXBvcnQge2dldE1vZGVPYmplY3R9IGZyb20gJy4vbW9kZS1vYmplY3QnO1xuaW1wb3J0IHtpc0VudW1WYWx1ZX0gZnJvbSAnLi90eXBlcyc7XG5cbi8qKlxuICogVHJpcGxlIHplcm8gd2lkdGggc3BhY2UuXG4gKlxuICogVGhpcyBpcyBhZGRlZCB0byB1c2VyIGVycm9yIG1lc3NhZ2VzLCBzbyB0aGF0IHdlIGNhbiBsYXRlciBpZGVudGlmeVxuICogdGhlbSwgd2hlbiB0aGUgb25seSB0aGluZyB0aGF0IHdlIGhhdmUgaXMgdGhlIG1lc3NhZ2UuIFRoaXMgaXMgdGhlXG4gKiBjYXNlIGluIG1hbnkgYnJvd3NlcnMgd2hlbiB0aGUgZ2xvYmFsIGV4Y2VwdGlvbiBoYW5kbGVyIGlzIGludm9rZWQuXG4gKlxuICogQGNvbnN0IHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBVU0VSX0VSUk9SX1NFTlRJTkVMID0gJ1xcdTIwMEJcXHUyMDBCXFx1MjAwQic7XG5cblxuLyoqXG4gKiBGb3VyIHplcm8gd2lkdGggc3BhY2UuXG4gKlxuICogQGNvbnN0IHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBVU0VSX0VSUk9SX0VNQkVEX1NFTlRJTkVMID0gJ1xcdTIwMEJcXHUyMDBCXFx1MjAwQlxcdTIwMEInO1xuXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2VcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBtZXNzYWdlIHdhcyBhIHVzZXIgZXJyb3IuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1VzZXJFcnJvck1lc3NhZ2UobWVzc2FnZSkge1xuICByZXR1cm4gbWVzc2FnZS5pbmRleE9mKFVTRVJfRVJST1JfU0VOVElORUwpID49IDA7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2VcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBtZXNzYWdlIHdhcyBhIGEgdXNlciBlcnJvciBmcm9tIGFuIGlmcmFtZSBlbWJlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVXNlckVycm9yRW1iZWQobWVzc2FnZSkge1xuICByZXR1cm4gbWVzc2FnZS5pbmRleE9mKFVTRVJfRVJST1JfRU1CRURfU0VOVElORUwpID49IDA7XG59XG5cblxuLyoqXG4gKiBAZW51bSB7bnVtYmVyfVxuICogQHByaXZhdGUgVmlzaWJsZSBmb3IgdGVzdGluZyBvbmx5LlxuICovXG5leHBvcnQgY29uc3QgTG9nTGV2ZWwgPSB7XG4gIE9GRjogMCxcbiAgRVJST1I6IDEsXG4gIFdBUk46IDIsXG4gIElORk86IDMsXG4gIEZJTkU6IDQsXG59O1xuXG4vKipcbiAqIFNldHMgcmVwb3J0RXJyb3IgZnVuY3Rpb24uIENhbGxlZCBmcm9tIGVycm9yLmpzIHRvIGJyZWFrIGN5Y2xpY1xuICogZGVwZW5kZW5jeS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKiwgIUVsZW1lbnQ9KXx1bmRlZmluZWR9IGZuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRSZXBvcnRFcnJvcihmbikge1xuICBzZWxmLnJlcG9ydEVycm9yID0gZm47XG59XG5cbi8qKlxuICogQHR5cGUgeyFMb2dMZXZlbHx1bmRlZmluZWR9XG4gKiBAcHJpdmF0ZVxuICovXG5sZXQgbGV2ZWxPdmVycmlkZV8gPSB1bmRlZmluZWQ7XG5cbi8qKlxuICogQHBhcmFtIHshTG9nTGV2ZWx9IGxldmVsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvdmVycmlkZUxvZ0xldmVsKGxldmVsKSB7XG4gIGxldmVsT3ZlcnJpZGVfID0gbGV2ZWw7XG59XG5cbi8qKlxuICogTG9nZ2luZyBjbGFzcy4gVXNlIG9mIHNlbnRpbmVsIHN0cmluZyBpbnN0ZWFkIG9mIGEgYm9vbGVhbiB0byBjaGVjayB1c2VyL2RldlxuICogZXJyb3JzIGJlY2F1c2UgZXJyb3JzIGNvdWxkIGJlIHJldGhyb3duIGJ5IHNvbWUgbmF0aXZlIGNvZGUgYXMgYSBuZXcgZXJyb3IsXG4gKiBhbmQgb25seSBhIG1lc3NhZ2Ugd291bGQgc3Vydml2ZS4gQWxzbywgc29tZSBicm93c2VyIGRvbuKAmXQgc3VwcG9ydCBhIDV0aFxuICogZXJyb3Igb2JqZWN0IGFyZ3VtZW50IGluIHdpbmRvdy5vbmVycm9yLiBMaXN0IG9mIHN1cHBvcnRpbmcgYnJvd3NlciBjYW4gYmVcbiAqIGZvdW5kIGhlcmU6XG4gKiBodHRwczovL2Jsb2cuc2VudHJ5LmlvLzIwMTYvMDEvMDQvY2xpZW50LWphdmFzY3JpcHQtcmVwb3J0aW5nLXdpbmRvdy1vbmVycm9yLmh0bWxcbiAqIEBmaW5hbFxuICogQHByaXZhdGUgVmlzaWJsZSBmb3IgdGVzdGluZyBvbmx5LlxuICovXG5leHBvcnQgY2xhc3MgTG9nIHtcbiAgLyoqXG4gICAqIG9wdF9zdWZmaXggd2lsbCBiZSBhcHBlbmRlZCB0byBlcnJvciBtZXNzYWdlIHRvIGlkZW50aWZ5IHRoZSB0eXBlIG9mIHRoZVxuICAgKiBlcnJvciBtZXNzYWdlLiBXZSBjYW4ndCByZWx5IG9uIHRoZSBlcnJvciBvYmplY3QgdG8gcGFzcyBhbG9uZyB0aGUgdHlwZVxuICAgKiBiZWNhdXNlIHNvbWUgYnJvd3NlcnMgZG8gbm90IGhhdmUgdGhpcyBwYXJhbSBpbiBpdHMgd2luZG93Lm9uZXJyb3IgQVBJLlxuICAgKiBTZWU6XG4gICAqIGh0dHBzOi8vYmxvZy5zZW50cnkuaW8vMjAxNi8wMS8wNC9jbGllbnQtamF2YXNjcmlwdC1yZXBvcnRpbmctd2luZG93LW9uZXJyb3IuaHRtbFxuICAgKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCEuL21vZGUuTW9kZURlZik6IUxvZ0xldmVsfSBsZXZlbEZ1bmNcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfc3VmZml4XG4gICAqL1xuICBjb25zdHJ1Y3Rvcih3aW4sIGxldmVsRnVuYywgb3B0X3N1ZmZpeCkge1xuICAgIC8qKlxuICAgICAqIEluIHRlc3RzIHdlIHVzZSB0aGUgbWFpbiB0ZXN0IHdpbmRvdyBpbnN0ZWFkIG9mIHRoZSBpZnJhbWUgd2hlcmVcbiAgICAgKiB0aGUgdGVzdHMgcnVucyBiZWNhdXNlIG9ubHkgdGhlIGZvcm1lciBpcyByZWxheWVkIHRvIHRoZSBjb25zb2xlLlxuICAgICAqIEBjb25zdCB7IVdpbmRvd31cbiAgICAgKi9cbiAgICB0aGlzLndpbiA9IChnZXRNb2RlKCkudGVzdCAmJiB3aW4uQU1QX1RFU1RfSUZSQU1FKSA/IHdpbi5wYXJlbnQgOiB3aW47XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtmdW5jdGlvbighLi9tb2RlLk1vZGVEZWYpOiFMb2dMZXZlbH0gKi9cbiAgICB0aGlzLmxldmVsRnVuY18gPSBsZXZlbEZ1bmM7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshTG9nTGV2ZWx9ICovXG4gICAgdGhpcy5sZXZlbF8gPSB0aGlzLmRlZmF1bHRMZXZlbF8oKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnN1ZmZpeF8gPSBvcHRfc3VmZml4IHx8ICcnO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFMb2dMZXZlbH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldExldmVsXygpIHtcbiAgICByZXR1cm4gKGxldmVsT3ZlcnJpZGVfICE9PSB1bmRlZmluZWQpID8gbGV2ZWxPdmVycmlkZV8gOiB0aGlzLmxldmVsXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshTG9nTGV2ZWx9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBkZWZhdWx0TGV2ZWxfKCkge1xuICAgIC8vIE5vIGNvbnNvbGUgLSBjYW4ndCBlbmFibGUgbG9nZ2luZy5cbiAgICBpZiAoIXRoaXMud2luLmNvbnNvbGUgfHwgIXRoaXMud2luLmNvbnNvbGUubG9nKSB7XG4gICAgICByZXR1cm4gTG9nTGV2ZWwuT0ZGO1xuICAgIH1cblxuICAgIC8vIExvZ2dpbmcgaGFzIGJlZW4gZXhwbGljaXRseSBkaXNhYmxlZC5cbiAgICBpZiAoZ2V0TW9kZSgpLmxvZyA9PSAnMCcpIHtcbiAgICAgIHJldHVybiBMb2dMZXZlbC5PRkY7XG4gICAgfVxuXG4gICAgLy8gTG9nZ2luZyBpcyBlbmFibGVkIGZvciB0ZXN0cyBkaXJlY3RseS5cbiAgICBpZiAoZ2V0TW9kZSgpLnRlc3QgJiYgdGhpcy53aW4uRU5BQkxFX0xPRykge1xuICAgICAgcmV0dXJuIExvZ0xldmVsLkZJTkU7XG4gICAgfVxuXG4gICAgLy8gTG9jYWxEZXYgYnkgZGVmYXVsdCBhbGxvd3MgSU5GTyBsZXZlbCwgdW5sZXNzIG92ZXJyaWRlbiBieSBgI2xvZ2AuXG4gICAgaWYgKGdldE1vZGUoKS5sb2NhbERldiAmJiAhZ2V0TW9kZSgpLmxvZykge1xuICAgICAgcmV0dXJuIExvZ0xldmVsLklORk87XG4gICAgfVxuXG4gICAgLy8gRGVsZWdhdGUgdG8gdGhlIHNwZWNpZmljIHJlc29sdmVyLlxuICAgIHJldHVybiB0aGlzLmxldmVsRnVuY18oZ2V0TW9kZU9iamVjdCgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBsZXZlbFxuICAgKiBAcGFyYW0geyFBcnJheX0gbWVzc2FnZXNcbiAgICovXG4gIG1zZ18odGFnLCBsZXZlbCwgbWVzc2FnZXMpIHtcbiAgICBpZiAodGhpcy5nZXRMZXZlbF8oKSAhPSBMb2dMZXZlbC5PRkYpIHtcbiAgICAgIGxldCBmbiA9IHRoaXMud2luLmNvbnNvbGUubG9nO1xuICAgICAgaWYgKGxldmVsID09ICdFUlJPUicpIHtcbiAgICAgICAgZm4gPSB0aGlzLndpbi5jb25zb2xlLmVycm9yIHx8IGZuO1xuICAgICAgfSBlbHNlIGlmIChsZXZlbCA9PSAnSU5GTycpIHtcbiAgICAgICAgZm4gPSB0aGlzLndpbi5jb25zb2xlLmluZm8gfHwgZm47XG4gICAgICB9IGVsc2UgaWYgKGxldmVsID09ICdXQVJOJykge1xuICAgICAgICBmbiA9IHRoaXMud2luLmNvbnNvbGUud2FybiB8fCBmbjtcbiAgICAgIH1cbiAgICAgIGlmIChnZXRNb2RlKCkubG9jYWxEZXYpIHtcbiAgICAgICAgbWVzc2FnZXMudW5zaGlmdCgnWycgKyB0YWcgKyAnXScpO1xuICAgICAgfVxuICAgICAgZm4uYXBwbHkodGhpcy53aW4uY29uc29sZSwgbWVzc2FnZXMpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBsb2dnaW5nIGlzIGVuYWJsZWQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBpc0VuYWJsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0TGV2ZWxfKCkgIT0gTG9nTGV2ZWwuT0ZGO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlcG9ydHMgYSBmaW5lLWdyYWluZWQgbWVzc2FnZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRhZ1xuICAgKiBAcGFyYW0gey4uLip9IHZhcl9hcmdzXG4gICAqL1xuICBmaW5lKHRhZywgdmFyX2FyZ3MpIHtcbiAgICBpZiAodGhpcy5nZXRMZXZlbF8oKSA+PSBMb2dMZXZlbC5GSU5FKSB7XG4gICAgICB0aGlzLm1zZ18odGFnLCAnRklORScsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXBvcnRzIGEgaW5mb3JtYXRpb25hbCBtZXNzYWdlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnXG4gICAqIEBwYXJhbSB7Li4uKn0gdmFyX2FyZ3NcbiAgICovXG4gIGluZm8odGFnLCB2YXJfYXJncykge1xuICAgIGlmICh0aGlzLmdldExldmVsXygpID49IExvZ0xldmVsLklORk8pIHtcbiAgICAgIHRoaXMubXNnXyh0YWcsICdJTkZPJywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlcG9ydHMgYSB3YXJuaW5nIG1lc3NhZ2UuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0YWdcbiAgICogQHBhcmFtIHsuLi4qfSB2YXJfYXJnc1xuICAgKi9cbiAgd2Fybih0YWcsIHZhcl9hcmdzKSB7XG4gICAgaWYgKHRoaXMuZ2V0TGV2ZWxfKCkgPj0gTG9nTGV2ZWwuV0FSTikge1xuICAgICAgdGhpcy5tc2dfKHRhZywgJ1dBUk4nLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVwb3J0cyBhbiBlcnJvciBtZXNzYWdlLiBJZiB0aGUgbG9nZ2luZyBpcyBkaXNhYmxlZCwgdGhlIGVycm9yIGlzIHJldGhyb3duXG4gICAqIGFzeW5jaHJvbm91c2x5LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnXG4gICAqIEBwYXJhbSB7Li4uKn0gdmFyX2FyZ3NcbiAgICogQHJldHVybiB7IUVycm9yfHVuZGVmaW5lZH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGVycm9yXyh0YWcsIHZhcl9hcmdzKSB7XG4gICAgaWYgKHRoaXMuZ2V0TGV2ZWxfKCkgPj0gTG9nTGV2ZWwuRVJST1IpIHtcbiAgICAgIHRoaXMubXNnXyh0YWcsICdFUlJPUicsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBlcnJvciA9IGNyZWF0ZUVycm9yVmFyZ3MuYXBwbHkobnVsbCxcbiAgICAgICAgICBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgICAgIHRoaXMucHJlcGFyZUVycm9yXyhlcnJvcik7XG4gICAgICByZXR1cm4gZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlcG9ydHMgYW4gZXJyb3IgbWVzc2FnZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRhZ1xuICAgKiBAcGFyYW0gey4uLip9IHZhcl9hcmdzXG4gICAqL1xuICBlcnJvcih0YWcsIHZhcl9hcmdzKSB7XG4gICAgY29uc3QgZXJyb3IgPSB0aGlzLmVycm9yXy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmIChlcnJvcikge1xuICAgICAgZXJyb3IubmFtZSA9IHRhZyB8fCBlcnJvci5uYW1lO1xuICAgICAgLy8gcmVwb3J0RXJyb3IgaXMgaW5zdGFsbGVkIGdsb2JhbGx5IHBlciB3aW5kb3cgaW4gdGhlIGVudHJ5IHBvaW50LlxuICAgICAgc2VsZi5yZXBvcnRFcnJvcihlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlcG9ydHMgYW4gZXJyb3IgbWVzc2FnZSBhbmQgbWFya3Mgd2l0aCBhbiBleHBlY3RlZCBwcm9wZXJ0eS4gSWYgdGhlXG4gICAqIGxvZ2dpbmcgaXMgZGlzYWJsZWQsIHRoZSBlcnJvciBpcyByZXRocm93biBhc3luY2hyb25vdXNseS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHVudXNlZFRhZ1xuICAgKiBAcGFyYW0gey4uLip9IHZhcl9hcmdzXG4gICAqL1xuICBleHBlY3RlZEVycm9yKHVudXNlZFRhZywgdmFyX2FyZ3MpIHtcbiAgICBjb25zdCBlcnJvciA9IHRoaXMuZXJyb3JfLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBlcnJvci5leHBlY3RlZCA9IHRydWU7XG4gICAgICAvLyByZXBvcnRFcnJvciBpcyBpbnN0YWxsZWQgZ2xvYmFsbHkgcGVyIHdpbmRvdyBpbiB0aGUgZW50cnkgcG9pbnQuXG4gICAgICBzZWxmLnJlcG9ydEVycm9yKGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBlcnJvciBvYmplY3QuXG4gICAqIEBwYXJhbSB7Li4uKn0gdmFyX2FyZ3NcbiAgICogQHJldHVybiB7IUVycm9yfVxuICAgKi9cbiAgY3JlYXRlRXJyb3IodmFyX2FyZ3MpIHtcbiAgICBjb25zdCBlcnJvciA9IGNyZWF0ZUVycm9yVmFyZ3MuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICB0aGlzLnByZXBhcmVFcnJvcl8oZXJyb3IpO1xuICAgIHJldHVybiBlcnJvcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGVycm9yIG9iamVjdCB3aXRoIGl0cyBleHBlY3RlZCBwcm9wZXJ0eSBzZXQgdG8gdHJ1ZS5cbiAgICogQHBhcmFtIHsuLi4qfSB2YXJfYXJnc1xuICAgKiBAcmV0dXJuIHshRXJyb3J9XG4gICAqL1xuICBjcmVhdGVFeHBlY3RlZEVycm9yKHZhcl9hcmdzKSB7XG4gICAgY29uc3QgZXJyb3IgPSBjcmVhdGVFcnJvclZhcmdzLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgdGhpcy5wcmVwYXJlRXJyb3JfKGVycm9yKTtcbiAgICBlcnJvci5leHBlY3RlZCA9IHRydWU7XG4gICAgcmV0dXJuIGVycm9yO1xuICB9XG5cbiAgLyoqXG4gICAqIFRocm93cyBhbiBlcnJvciBpZiB0aGUgZmlyc3QgYXJndW1lbnQgaXNuJ3QgdHJ1ZWlzaC5cbiAgICpcbiAgICogU3VwcG9ydHMgYXJndW1lbnQgc3Vic3RpdHV0aW9uIGludG8gdGhlIG1lc3NhZ2UgdmlhICVzIHBsYWNlaG9sZGVycy5cbiAgICpcbiAgICogVGhyb3dzIGFuIGVycm9yIG9iamVjdCB0aGF0IGhhcyB0d28gZXh0cmEgcHJvcGVydGllczpcbiAgICogLSBhc3NvY2lhdGVkRWxlbWVudDogVGhpcyBpcyB0aGUgZmlyc3QgZWxlbWVudCBwcm92aWRlZCBpbiB0aGUgdmFyIGFyZ3MuXG4gICAqICAgSXQgY2FuIGJlIHVzZWQgZm9yIGltcHJvdmVkIGRpc3BsYXkgb2YgZXJyb3IgbWVzc2FnZXMuXG4gICAqIC0gbWVzc2FnZUFycmF5OiBUaGUgZWxlbWVudHMgb2YgdGhlIHN1YnN0aXR1dGVkIG1lc3NhZ2UgYXMgbm9uLXN0cmluZ2lmaWVkXG4gICAqICAgZWxlbWVudHMgaW4gYW4gYXJyYXkuIFdoZW4gZS5nLiBwYXNzZWQgdG8gY29uc29sZS5lcnJvciB0aGlzIHlpZWxkc1xuICAgKiAgIG5hdGl2ZSBkaXNwbGF5cyBvZiB0aGluZ3MgbGlrZSBIVE1MIGVsZW1lbnRzLlxuICAgKlxuICAgKiBAcGFyYW0ge1R9IHNob3VsZEJlVHJ1ZWlzaCBUaGUgdmFsdWUgdG8gYXNzZXJ0LiBUaGUgYXNzZXJ0IGZhaWxzIGlmIGl0IGRvZXNcbiAgICogICAgIG5vdCBldmFsdWF0ZSB0byB0cnVlLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG9wdF9tZXNzYWdlIFRoZSBhc3NlcnRpb24gbWVzc2FnZVxuICAgKiBAcGFyYW0gey4uLip9IHZhcl9hcmdzIEFyZ3VtZW50cyBzdWJzdGl0dXRlZCBpbnRvICVzIGluIHRoZSBtZXNzYWdlLlxuICAgKiBAcmV0dXJuIHtUfSBUaGUgdmFsdWUgb2Ygc2hvdWxkQmVUcnVlaXNoLlxuICAgKiBAdGVtcGxhdGUgVFxuICAgKiBlc2xpbnQgXCJnb29nbGUtY2FtZWxjYXNlL2dvb2dsZS1jYW1lbGNhc2VcIjogMFxuICAgKi9cbiAgYXNzZXJ0KHNob3VsZEJlVHJ1ZWlzaCwgb3B0X21lc3NhZ2UsIHZhcl9hcmdzKSB7XG4gICAgbGV0IGZpcnN0RWxlbWVudDtcbiAgICBpZiAoIXNob3VsZEJlVHJ1ZWlzaCkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IG9wdF9tZXNzYWdlIHx8ICdBc3NlcnRpb24gZmFpbGVkJztcbiAgICAgIGNvbnN0IHNwbGl0TWVzc2FnZSA9IG1lc3NhZ2Uuc3BsaXQoJyVzJyk7XG4gICAgICBjb25zdCBmaXJzdCA9IHNwbGl0TWVzc2FnZS5zaGlmdCgpO1xuICAgICAgbGV0IGZvcm1hdHRlZCA9IGZpcnN0O1xuICAgICAgY29uc3QgbWVzc2FnZUFycmF5ID0gW107XG4gICAgICBwdXNoSWZOb25FbXB0eShtZXNzYWdlQXJyYXksIGZpcnN0KTtcbiAgICAgIGZvciAobGV0IGkgPSAyOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHZhbCA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgaWYgKHZhbCAmJiB2YWwudGFnTmFtZSkge1xuICAgICAgICAgIGZpcnN0RWxlbWVudCA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXh0Q29uc3RhbnQgPSBzcGxpdE1lc3NhZ2Uuc2hpZnQoKTtcbiAgICAgICAgbWVzc2FnZUFycmF5LnB1c2godmFsKTtcbiAgICAgICAgcHVzaElmTm9uRW1wdHkobWVzc2FnZUFycmF5LCBuZXh0Q29uc3RhbnQudHJpbSgpKTtcbiAgICAgICAgZm9ybWF0dGVkICs9IHRvU3RyaW5nKHZhbCkgKyBuZXh0Q29uc3RhbnQ7XG4gICAgICB9XG4gICAgICBjb25zdCBlID0gbmV3IEVycm9yKGZvcm1hdHRlZCk7XG4gICAgICBlLmZyb21Bc3NlcnQgPSB0cnVlO1xuICAgICAgZS5hc3NvY2lhdGVkRWxlbWVudCA9IGZpcnN0RWxlbWVudDtcbiAgICAgIGUubWVzc2FnZUFycmF5ID0gbWVzc2FnZUFycmF5O1xuICAgICAgdGhpcy5wcmVwYXJlRXJyb3JfKGUpO1xuICAgICAgLy8gcmVwb3J0RXJyb3IgaXMgaW5zdGFsbGVkIGdsb2JhbGx5IHBlciB3aW5kb3cgaW4gdGhlIGVudHJ5IHBvaW50LlxuICAgICAgc2VsZi5yZXBvcnRFcnJvcihlKTtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuICAgIHJldHVybiBzaG91bGRCZVRydWVpc2g7XG4gIH1cblxuICAvKipcbiAgICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBmaXJzdCBhcmd1bWVudCBpc24ndCBhbiBFbGVtZW50XG4gICAqXG4gICAqIE90aGVyd2lzZSBzZWUgYGFzc2VydGAgZm9yIHVzYWdlXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gc2hvdWxkQmVFbGVtZW50XG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X21lc3NhZ2UgVGhlIGFzc2VydGlvbiBtZXNzYWdlXG4gICAqIEByZXR1cm4geyFFbGVtZW50fSBUaGUgdmFsdWUgb2Ygc2hvdWxkQmVUcnVlaXNoLlxuICAgKiBAdGVtcGxhdGUgVFxuICAgKiBlc2xpbnQgXCJnb29nbGUtY2FtZWxjYXNlL2dvb2dsZS1jYW1lbGNhc2VcIjogMlxuICAgKi9cbiAgYXNzZXJ0RWxlbWVudChzaG91bGRCZUVsZW1lbnQsIG9wdF9tZXNzYWdlKSB7XG4gICAgY29uc3Qgc2hvdWxkQmVUcnVlaXNoID0gc2hvdWxkQmVFbGVtZW50ICYmIHNob3VsZEJlRWxlbWVudC5ub2RlVHlwZSA9PSAxO1xuICAgIHRoaXMuYXNzZXJ0KHNob3VsZEJlVHJ1ZWlzaCwgKG9wdF9tZXNzYWdlIHx8ICdFbGVtZW50IGV4cGVjdGVkJykgKyAnOiAlcycsXG4gICAgICAgIHNob3VsZEJlRWxlbWVudCk7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IUVsZW1lbnR9ICovIChzaG91bGRCZUVsZW1lbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRocm93cyBhbiBlcnJvciBpZiB0aGUgZmlyc3QgYXJndW1lbnQgaXNuJ3QgYSBzdHJpbmcuIFRoZSBzdHJpbmcgY2FuXG4gICAqIGJlIGVtcHR5LlxuICAgKlxuICAgKiBGb3IgbW9yZSBkZXRhaWxzIHNlZSBgYXNzZXJ0YC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBzaG91bGRCZVN0cmluZ1xuICAgKiBAcGFyYW0ge3N0cmluZz19IG9wdF9tZXNzYWdlIFRoZSBhc3NlcnRpb24gbWVzc2FnZVxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBzdHJpbmcgdmFsdWUuIENhbiBiZSBhbiBlbXB0eSBzdHJpbmcuXG4gICAqIGVzbGludCBcImdvb2dsZS1jYW1lbGNhc2UvZ29vZ2xlLWNhbWVsY2FzZVwiOiAyXG4gICAqL1xuICBhc3NlcnRTdHJpbmcoc2hvdWxkQmVTdHJpbmcsIG9wdF9tZXNzYWdlKSB7XG4gICAgdGhpcy5hc3NlcnQodHlwZW9mIHNob3VsZEJlU3RyaW5nID09ICdzdHJpbmcnLFxuICAgICAgICAob3B0X21lc3NhZ2UgfHwgJ1N0cmluZyBleHBlY3RlZCcpICsgJzogJXMnLCBzaG91bGRCZVN0cmluZyk7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAoc2hvdWxkQmVTdHJpbmcpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRocm93cyBhbiBlcnJvciBpZiB0aGUgZmlyc3QgYXJndW1lbnQgaXNuJ3QgYSBudW1iZXIuIFRoZSBhbGxvd2VkIHZhbHVlc1xuICAgKiBpbmNsdWRlIGAwYCBhbmQgYE5hTmAuXG4gICAqXG4gICAqIEZvciBtb3JlIGRldGFpbHMgc2VlIGBhc3NlcnRgLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHNob3VsZEJlTnVtYmVyXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X21lc3NhZ2UgVGhlIGFzc2VydGlvbiBtZXNzYWdlXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG51bWJlciB2YWx1ZS4gVGhlIGFsbG93ZWQgdmFsdWVzIGluY2x1ZGUgYDBgXG4gICAqICAgYW5kIGBOYU5gLlxuICAgKi9cbiAgYXNzZXJ0TnVtYmVyKHNob3VsZEJlTnVtYmVyLCBvcHRfbWVzc2FnZSkge1xuICAgIHRoaXMuYXNzZXJ0KHR5cGVvZiBzaG91bGRCZU51bWJlciA9PSAnbnVtYmVyJyxcbiAgICAgICAgKG9wdF9tZXNzYWdlIHx8ICdOdW1iZXIgZXhwZWN0ZWQnKSArICc6ICVzJywgc2hvdWxkQmVOdW1iZXIpO1xuICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHNob3VsZEJlTnVtYmVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIGZpcnN0IGFyZ3VtZW50IGlzbid0IGEgYm9vbGVhbi5cbiAgICpcbiAgICogRm9yIG1vcmUgZGV0YWlscyBzZWUgYGFzc2VydGAuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gc2hvdWxkQmVCb29sZWFuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X21lc3NhZ2UgVGhlIGFzc2VydGlvbiBtZXNzYWdlXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBib29sZWFuIHZhbHVlLlxuICAgKi9cbiAgYXNzZXJ0Qm9vbGVhbihzaG91bGRCZUJvb2xlYW4sIG9wdF9tZXNzYWdlKSB7XG4gICAgdGhpcy5hc3NlcnQoISFzaG91bGRCZUJvb2xlYW4gPT09IHNob3VsZEJlQm9vbGVhbixcbiAgICAgICAgKG9wdF9tZXNzYWdlIHx8ICdCb29sZWFuIGV4cGVjdGVkJykgKyAnOiAlcycsIHNob3VsZEJlQm9vbGVhbik7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi8gKHNob3VsZEJlQm9vbGVhbik7XG4gIH1cblxuICAvKipcbiAgICogQXNzZXJ0cyBhbmQgcmV0dXJucyB0aGUgZW51bSB2YWx1ZS4gSWYgdGhlIGVudW0gZG9lc24ndCBjb250YWluIHN1Y2ggYVxuICAgKiB2YWx1ZSwgdGhlIGVycm9yIGlzIHRocm93bi5cbiAgICpcbiAgICogQHBhcmFtIHshT2JqZWN0PFQ+fSBlbnVtT2JqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X2VudW1OYW1lXG4gICAqIEByZXR1cm4ge1R9XG4gICAqIEB0ZW1wbGF0ZSBUXG4gICAqIGVzbGludCBcImdvb2dsZS1jYW1lbGNhc2UvZ29vZ2xlLWNhbWVsY2FzZVwiOiAyXG4gICAqL1xuICBhc3NlcnRFbnVtVmFsdWUoZW51bU9iaiwgcywgb3B0X2VudW1OYW1lKSB7XG4gICAgaWYgKGlzRW51bVZhbHVlKGVudW1PYmosIHMpKSB7XG4gICAgICByZXR1cm4gcztcbiAgICB9XG4gICAgdGhpcy5hc3NlcnQoZmFsc2UsXG4gICAgICAgICdVbmtub3duICVzIHZhbHVlOiBcIiVzXCInLFxuICAgICAgICBvcHRfZW51bU5hbWUgfHwgJ2VudW0nLCBzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFcnJvcn0gZXJyb3JcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByZXBhcmVFcnJvcl8oZXJyb3IpIHtcbiAgICBlcnJvciA9IGR1cGxpY2F0ZUVycm9ySWZOZWNlc3NhcnkoZXJyb3IpO1xuICAgIGlmICh0aGlzLnN1ZmZpeF8pIHtcbiAgICAgIGlmICghZXJyb3IubWVzc2FnZSkge1xuICAgICAgICBlcnJvci5tZXNzYWdlID0gdGhpcy5zdWZmaXhfO1xuICAgICAgfSBlbHNlIGlmIChlcnJvci5tZXNzYWdlLmluZGV4T2YodGhpcy5zdWZmaXhfKSA9PSAtMSkge1xuICAgICAgICBlcnJvci5tZXNzYWdlICs9IHRoaXMuc3VmZml4XztcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzVXNlckVycm9yTWVzc2FnZShlcnJvci5tZXNzYWdlKSkge1xuICAgICAgZXJyb3IubWVzc2FnZSA9IGVycm9yLm1lc3NhZ2UucmVwbGFjZShVU0VSX0VSUk9SX1NFTlRJTkVMLCAnJyk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd8IUVsZW1lbnR9IHZhbFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiB0b1N0cmluZyh2YWwpIHtcbiAgLy8gRG8gY2hlY2sgZXF1aXZhbGVudCB0byBgdmFsIGluc3RhbmNlb2YgRWxlbWVudGAgd2l0aG91dCBjcm9zcy13aW5kb3cgYnVnXG4gIGlmICh2YWwgJiYgdmFsLm5vZGVUeXBlID09IDEpIHtcbiAgICByZXR1cm4gdmFsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSArICh2YWwuaWQgPyAnIycgKyB2YWwuaWQgOiAnJyk7XG4gIH1cbiAgcmV0dXJuIC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAodmFsKTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IUFycmF5fSBhcnJheVxuICogQHBhcmFtIHsqfSB2YWxcbiAqL1xuZnVuY3Rpb24gcHVzaElmTm9uRW1wdHkoYXJyYXksIHZhbCkge1xuICBpZiAodmFsICE9ICcnKSB7XG4gICAgYXJyYXkucHVzaCh2YWwpO1xuICB9XG59XG5cbi8qKlxuICogU29tZSBleGNlcHRpb25zIChET01FeGNlcHRpb24sIG5hbWVseSkgaGF2ZSByZWFkLW9ubHkgbWVzc2FnZS5cbiAqIEBwYXJhbSB7IUVycm9yfSBlcnJvclxuICogQHJldHVybiB7IUVycm9yfTtcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGR1cGxpY2F0ZUVycm9ySWZOZWNlc3NhcnkoZXJyb3IpIHtcbiAgY29uc3Qge21lc3NhZ2V9ID0gZXJyb3I7XG4gIGNvbnN0IHRlc3QgPSBTdHJpbmcoTWF0aC5yYW5kb20oKSk7XG4gIGVycm9yLm1lc3NhZ2UgPSB0ZXN0O1xuXG4gIGlmIChlcnJvci5tZXNzYWdlID09PSB0ZXN0KSB7XG4gICAgZXJyb3IubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgcmV0dXJuIGVycm9yO1xuICB9XG5cbiAgY29uc3QgZSA9IG5ldyBFcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgLy8gQ29weSBhbGwgdGhlIGV4dHJhbmVvdXMgdGhpbmdzIHdlIGF0dGFjaC5cbiAgZm9yIChjb25zdCBwcm9wIGluIGVycm9yKSB7XG4gICAgZVtwcm9wXSA9IGVycm9yW3Byb3BdO1xuICB9XG4gIC8vIEVuc3VyZSB0aGVzZSBhcmUgY29waWVkLlxuICBlLnN0YWNrID0gZXJyb3Iuc3RhY2s7XG4gIHJldHVybiBlO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7Li4uKn0gdmFyX2FyZ3NcbiAqIEByZXR1cm4geyFFcnJvcn1cbiAqIEB2aXNpYmxlRm9yVGVzdGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRXJyb3JWYXJncyh2YXJfYXJncykge1xuICBsZXQgZXJyb3IgPSBudWxsO1xuICBsZXQgbWVzc2FnZSA9ICcnO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGFyZyA9IGFyZ3VtZW50c1tpXTtcbiAgICBpZiAoYXJnIGluc3RhbmNlb2YgRXJyb3IgJiYgIWVycm9yKSB7XG4gICAgICBlcnJvciA9IGR1cGxpY2F0ZUVycm9ySWZOZWNlc3NhcnkoYXJnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKG1lc3NhZ2UpIHtcbiAgICAgICAgbWVzc2FnZSArPSAnICc7XG4gICAgICB9XG4gICAgICBtZXNzYWdlICs9IGFyZztcbiAgICB9XG4gIH1cblxuICBpZiAoIWVycm9yKSB7XG4gICAgZXJyb3IgPSBuZXcgRXJyb3IobWVzc2FnZSk7XG4gIH0gZWxzZSBpZiAobWVzc2FnZSkge1xuICAgIGVycm9yLm1lc3NhZ2UgPSBtZXNzYWdlICsgJzogJyArIGVycm9yLm1lc3NhZ2U7XG4gIH1cbiAgcmV0dXJuIGVycm9yO1xufVxuXG5cbi8qKlxuICogUmV0aHJvd3MgdGhlIGVycm9yIHdpdGhvdXQgdGVybWluYXRpbmcgdGhlIGN1cnJlbnQgY29udGV4dC4gVGhpcyBwcmVzZXJ2ZXNcbiAqIHdoZXRoZXIgdGhlIG9yaWdpbmFsIGVycm9yIGRlc2lnbmF0aW9uIGlzIGEgdXNlciBlcnJvciBvciBhIGRldiBlcnJvci5cbiAqIEBwYXJhbSB7Li4uKn0gdmFyX2FyZ3NcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJldGhyb3dBc3luYyh2YXJfYXJncykge1xuICBjb25zdCBlcnJvciA9IGNyZWF0ZUVycm9yVmFyZ3MuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgLy8gcmVwb3J0RXJyb3IgaXMgaW5zdGFsbGVkIGdsb2JhbGx5IHBlciB3aW5kb3cgaW4gdGhlIGVudHJ5IHBvaW50LlxuICAgIHNlbGYucmVwb3J0RXJyb3IoZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9KTtcbn1cblxuXG4vKipcbiAqIENhY2hlIGZvciBsb2dzLiBXZSBkbyBub3QgdXNlIGEgU2VydmljZSBzaW5jZSB0aGUgc2VydmljZSBtb2R1bGUgZGVwZW5kc1xuICogb24gTG9nIGFuZCBjbG9zdXJlIGxpdGVyYWxseSBjYW4ndCBldmVuLlxuICogQHR5cGUge3t1c2VyOiA/TG9nLCBkZXY6ID9Mb2csIHVzZXJGb3JFbWJlZDogP0xvZ319XG4gKi9cbnNlbGYubG9nID0gKHNlbGYubG9nIHx8IHtcbiAgdXNlcjogbnVsbCxcbiAgZGV2OiBudWxsLFxuICB1c2VyRm9yRW1iZWQ6IG51bGwsXG59KTtcblxuY29uc3QgbG9ncyA9IHNlbGYubG9nO1xuXG4vKipcbiAqIEV2ZW50dWFsbHkgaG9sZHMgYSBjb25zdHJ1Y3RvciBmb3IgTG9nIG9iamVjdHMuIExhemlseSBpbml0aWFsaXplZCwgc28gd2VcbiAqIGNhbiBhdm9pZCBldmVyIHJlZmVyZW5jaW5nIHRoZSByZWFsIGNvbnN0cnVjdG9yIGV4Y2VwdCBpbiBKUyBiaW5hcmllc1xuICogdGhhdCBhY3R1YWxseSB3YW50IHRvIGluY2x1ZGUgdGhlIGltcGxlbWVudGF0aW9uLlxuICogQHR5cGUgez9GdW5jdGlvbn1cbiAqL1xubGV0IGxvZ0NvbnN0cnVjdG9yID0gbnVsbDtcblxuLyoqXG4gKiBJbml0aWFsaXplcyBsb2cgY29udHJ1Y3Rvci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluaXRMb2dDb25zdHJ1Y3RvcigpIHtcbiAgbG9nQ29uc3RydWN0b3IgPSBMb2c7XG4gIC8vIEluaXRpYWxpemUgaW5zdGFuY2VzIGZvciB1c2UuIElmIGEgYmluYXJ5IChhbiBleHRlbnNpb24gZm9yIGV4YW1wbGUpIHRoYXRcbiAgLy8gZG9lcyBub3QgY2FsbCBgaW5pdExvZ0NvbnN0cnVjdG9yYCBpbnZva2VzIGBkZXYoKWAgb3IgYHVzZXIoKWAgZWFybGllciB0aGFuXG4gIC8vIHRoZSBiaW5hcnkgdGhhdCBkb2VzIGNhbGwgYGluaXRMb2dDb25zdHJ1Y3RvcmAgKGFtcC5qcyksIHRoZSBleHRlbnNpb24gd2lsbFxuICAvLyB0aHJvdyBhbiBlcnJvciBhcyB0aGF0IGV4dGVuc2lvbiB3aWxsIG5ldmVyIGJlIGFibGUgdG8gaW5pdGlhbGl6ZSB0aGUgbG9nXG4gIC8vIGluc3RhbmNlcyBhbmQgd2UgYWxzbyBkb24ndCB3YW50IGl0IHRvIGNhbGwgYGluaXRMb2dDb25zdHJ1Y3RvcmAgZWl0aGVyXG4gIC8vIChzaW5jZSB0aGF0IHdpbGwgY2F1c2UgdGhlIExvZyBpbXBsZW1lbnRhdGlvbiB0byBiZSBidW5kbGVkIGludG8gdGhhdFxuICAvLyBiaW5hcnkpLiBTbyB3ZSBtdXN0IGluaXRpYWxpemUgdGhlIGluc3RhbmNlcyBlYWdlcmx5IHNvIHRoYXQgdGhleSBhcmUgcmVhZHlcbiAgLy8gZm9yIHVzZSAoc3RvcmVkIGdsb2JhbGx5KSBhZnRlciB0aGUgbWFpbiBiaW5hcnkgY2FsbHMgYGluaXRMb2dDb25zdHJ1Y3RvcmAuXG4gIGRldigpO1xuICB1c2VyKCk7XG59XG5cbi8qKlxuICogUmVzZXRzIGxvZyBjb250cnVjdG9yIGZvciB0ZXN0aW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRMb2dDb25zdHJ1Y3RvckZvclRlc3RpbmcoKSB7XG4gIGxvZ0NvbnN0cnVjdG9yID0gbnVsbDtcbn1cblxuLyoqXG4gKiBQdWJsaXNoZXIgbGV2ZWwgbG9nLlxuICpcbiAqIEVuYWJsZWQgaW4gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuICogIDEuIE5vdCBkaXNhYmxlZCB1c2luZyBgI2xvZz0wYC5cbiAqICAyLiBEZXZlbG9wbWVudCBtb2RlIGlzIGVuYWJsZWQgdmlhIGAjZGV2ZWxvcG1lbnQ9MWAgb3IgbG9nZ2luZyBpcyBleHBsaWNpdGx5XG4gKiAgICAgZW5hYmxlZCB2aWEgYCNsb2c9RGAgd2hlcmUgRCA+PSAxLlxuICogIDMuIEFNUC5zZXRMb2dMZXZlbChEKSBpcyBjYWxsZWQsIHdoZXJlIEQgPj0gMS5cbiAqXG4gKiBAcGFyYW0geyFFbGVtZW50PX0gb3B0X2VsZW1lbnRcbiAqIEByZXR1cm4geyFMb2d9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VyKG9wdF9lbGVtZW50KSB7XG4gIGlmICghbG9ncy51c2VyKSB7XG4gICAgbG9ncy51c2VyID0gZ2V0VXNlckxvZ2dlcihVU0VSX0VSUk9SX1NFTlRJTkVMKTtcbiAgfVxuICBpZiAoIWlzRnJvbUVtYmVkKGxvZ3MudXNlci53aW4sIG9wdF9lbGVtZW50KSkge1xuICAgIHJldHVybiBsb2dzLnVzZXI7XG4gIH0gZWxzZSB7XG4gICAgaWYgKGxvZ3MudXNlckZvckVtYmVkKSB7XG4gICAgICByZXR1cm4gbG9ncy51c2VyRm9yRW1iZWQ7XG4gICAgfVxuICAgIHJldHVybiBsb2dzLnVzZXJGb3JFbWJlZCA9IGdldFVzZXJMb2dnZXIoVVNFUl9FUlJPUl9FTUJFRF9TRU5USU5FTCk7XG4gIH1cbn1cblxuLyoqXG4gKiBHZXR0ZXIgZm9yIHVzZXIgbG9nZ2VyXG4gKiBAcGFyYW0ge3N0cmluZz19IHN1ZmZpeFxuICogQHJldHVybiB7IUxvZ31cbiAqL1xuZnVuY3Rpb24gZ2V0VXNlckxvZ2dlcihzdWZmaXgpIHtcbiAgaWYgKCFsb2dDb25zdHJ1Y3Rvcikge1xuICAgIHRocm93IG5ldyBFcnJvcignZmFpbGVkIHRvIGNhbGwgaW5pdExvZ0NvbnN0cnVjdG9yJyk7XG4gIH1cbiAgcmV0dXJuIG5ldyBsb2dDb25zdHJ1Y3RvcihzZWxmLCBtb2RlID0+IHtcbiAgICBjb25zdCBsb2dOdW0gPSBwYXJzZUludChtb2RlLmxvZywgMTApO1xuICAgIGlmIChtb2RlLmRldmVsb3BtZW50IHx8IGxvZ051bSA+PSAxKSB7XG4gICAgICByZXR1cm4gTG9nTGV2ZWwuRklORTtcbiAgICB9XG4gICAgcmV0dXJuIExvZ0xldmVsLldBUk47XG4gIH0sIHN1ZmZpeCk7XG59XG5cbi8qKlxuICogQU1QIGRldmVsb3BtZW50IGxvZy4gQ2FsbHMgdG8gYGRldkxvZygpLmFzc2VydGAgYW5kIGBkZXYuZmluZWAgYXJlIHN0cmlwcGVkXG4gKiBpbiB0aGUgUFJPRCBiaW5hcnkuIEhvd2V2ZXIsIGBkZXZMb2coKS5hc3NlcnRgIHJlc3VsdCBpcyBwcmVzZXJ2ZWQgaW4gZWl0aGVyXG4gKiBjYXNlLlxuICpcbiAqIEVuYWJsZWQgaW4gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuICogIDEuIE5vdCBkaXNhYmxlZCB1c2luZyBgI2xvZz0wYC5cbiAqICAyLiBMb2dnaW5nIGlzIGV4cGxpY2l0bHkgZW5hYmxlZCB2aWEgYCNsb2c9RGAsIHdoZXJlIEQgPj0gMi5cbiAqICAzLiBBTVAuc2V0TG9nTGV2ZWwoRCkgaXMgY2FsbGVkLCB3aGVyZSBEID49IDIuXG4gKlxuICogQHJldHVybiB7IUxvZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRldigpIHtcbiAgaWYgKGxvZ3MuZGV2KSB7XG4gICAgcmV0dXJuIGxvZ3MuZGV2O1xuICB9XG4gIGlmICghbG9nQ29uc3RydWN0b3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2ZhaWxlZCB0byBjYWxsIGluaXRMb2dDb25zdHJ1Y3RvcicpO1xuICB9XG4gIHJldHVybiBsb2dzLmRldiA9IG5ldyBsb2dDb25zdHJ1Y3RvcihzZWxmLCBtb2RlID0+IHtcbiAgICBjb25zdCBsb2dOdW0gPSBwYXJzZUludChtb2RlLmxvZywgMTApO1xuICAgIGlmIChsb2dOdW0gPj0gMykge1xuICAgICAgcmV0dXJuIExvZ0xldmVsLkZJTkU7XG4gICAgfVxuICAgIGlmIChsb2dOdW0gPj0gMikge1xuICAgICAgcmV0dXJuIExvZ0xldmVsLklORk87XG4gICAgfVxuICAgIHJldHVybiBMb2dMZXZlbC5PRkY7XG4gIH0pO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0geyFFbGVtZW50PX0gb3B0X2VsZW1lbnRcbiAqIEByZXR1cm4ge2Jvb2xlYW59IGlzRW1iZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRnJvbUVtYmVkKHdpbiwgb3B0X2VsZW1lbnQpIHtcbiAgaWYgKCFvcHRfZWxlbWVudCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gb3B0X2VsZW1lbnQub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldyAhPSB3aW47XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtnZXRNb2RlfSBmcm9tICcuL21vZGUnO1xuXG4vKipcbiAqIFByb3ZpZGVzIGluZm8gYWJvdXQgdGhlIGN1cnJlbnQgYXBwLiBUaGlzIHJldHVybiB2YWx1ZSBtYXkgYmUgY2FjaGVkIGFuZFxuICogcGFzc2VkIGFyb3VuZCBhcyBpdCB3aWxsIGFsd2F5cyBiZSBEQ0UnZC5cbiAqIEBwYXJhbSB7P1dpbmRvdz19IG9wdF93aW5cbiAqIEByZXR1cm4geyEuL21vZGUuTW9kZURlZn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE1vZGVPYmplY3Qob3B0X3dpbikge1xuICByZXR1cm4ge1xuICAgIGxvY2FsRGV2OiBnZXRNb2RlKG9wdF93aW4pLmxvY2FsRGV2LFxuICAgIGRldmVsb3BtZW50OiBnZXRNb2RlKG9wdF93aW4pLmRldmVsb3BtZW50LFxuICAgIGZpbHRlcjogZ2V0TW9kZShvcHRfd2luKS5maWx0ZXIsXG4gICAgbWluaWZpZWQ6IGdldE1vZGUob3B0X3dpbikubWluaWZpZWQsXG4gICAgbGl0ZTogZ2V0TW9kZShvcHRfd2luKS5saXRlLFxuICAgIHRlc3Q6IGdldE1vZGUob3B0X3dpbikudGVzdCxcbiAgICBsb2c6IGdldE1vZGUob3B0X3dpbikubG9nLFxuICAgIHZlcnNpb246IGdldE1vZGUob3B0X3dpbikudmVyc2lvbixcbiAgICBydHZWZXJzaW9uOiBnZXRNb2RlKG9wdF93aW4pLnJ0dlZlcnNpb24sXG4gIH07XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtwYXJzZVF1ZXJ5U3RyaW5nX30gZnJvbSAnLi91cmwtcGFyc2UtcXVlcnktc3RyaW5nJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7e1xuICogICBsb2NhbERldjogYm9vbGVhbixcbiAqICAgZGV2ZWxvcG1lbnQ6IGJvb2xlYW4sXG4gKiAgIGZpbHRlcjogKHN0cmluZ3x1bmRlZmluZWQpLFxuICogICBtaW5pZmllZDogYm9vbGVhbixcbiAqICAgbGl0ZTogYm9vbGVhbixcbiAqICAgdGVzdDogYm9vbGVhbixcbiAqICAgbG9nOiAoc3RyaW5nfHVuZGVmaW5lZCksXG4gKiAgIHZlcnNpb246IHN0cmluZyxcbiAqICAgcnR2VmVyc2lvbjogc3RyaW5nLFxuICogfX1cbiAqL1xuZXhwb3J0IGxldCBNb2RlRGVmO1xuXG4vKiogQHR5cGUge3N0cmluZ30gKi9cbmNvbnN0IHZlcnNpb24gPSAnJGludGVybmFsUnVudGltZVZlcnNpb24kJztcblxuLyoqXG4gKiBgcnR2VmVyc2lvbmAgaXMgdGhlIHByZWZpeGVkIHZlcnNpb24gd2Ugc2VydmUgb2ZmIG9mIHRoZSBjZG4uXG4gKiBUaGUgcHJlZml4IGRlbm90ZXMgY2FuYXJ5KDAwKSBvciBwcm9kKDAxKSBvciBhbiBleHBlcmltZW50IHZlcnNpb24gKCA+IDAxKS5cbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmxldCBydHZWZXJzaW9uID0gJyc7XG5cbi8qKlxuICogUHJvdmlkZXMgaW5mbyBhYm91dCB0aGUgY3VycmVudCBhcHAuXG4gKiBAcGFyYW0gez9XaW5kb3c9fSBvcHRfd2luXG4gKiBAcmV0dXJuIHshTW9kZURlZn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE1vZGUob3B0X3dpbikge1xuICBjb25zdCB3aW4gPSBvcHRfd2luIHx8IHNlbGY7XG4gIGlmICh3aW4uQU1QX01PREUpIHtcbiAgICByZXR1cm4gd2luLkFNUF9NT0RFO1xuICB9XG4gIHJldHVybiB3aW4uQU1QX01PREUgPSBnZXRNb2RlXyh3aW4pO1xufVxuXG4vKipcbiAqIFByb3ZpZGVzIGluZm8gYWJvdXQgdGhlIGN1cnJlbnQgYXBwLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4geyFNb2RlRGVmfVxuICovXG5mdW5jdGlvbiBnZXRNb2RlXyh3aW4pIHtcbiAgLy8gTWFnaWMgY29uc3RhbnRzIHRoYXQgYXJlIHJlcGxhY2VkIGJ5IGNsb3N1cmUgY29tcGlsZXIuXG4gIC8vIElTX01JTklGSUVEIGlzIGFsd2F5cyByZXBsYWNlZCB3aXRoIHRydWUgd2hlbiBjbG9zdXJlIGNvbXBpbGVyIGlzIHVzZWRcbiAgLy8gd2hpbGUgSVNfREVWIGlzIG9ubHkgcmVwbGFjZWQgd2hlbiBgZ3VscCBkaXN0YCBpcyBjYWxsZWQgd2l0aG91dCB0aGVcbiAgLy8gLS1mb3J0ZXN0aW5nIGZsYWcuXG4gIGNvbnN0IElTX0RFViA9IHRydWU7XG4gIGNvbnN0IElTX01JTklGSUVEID0gZmFsc2U7XG5cbiAgY29uc3QgbG9jYWxEZXZFbmFibGVkID0gISEoc2VsZi5BTVBfQ09ORklHICYmIHNlbGYuQU1QX0NPTkZJRy5sb2NhbERldik7XG4gIGNvbnN0IHJ1bm5pbmdUZXN0cyA9IElTX0RFViAmJiAhISh3aW4uQU1QX1RFU1QgfHwgd2luLl9fa2FybWFfXyk7XG4gIGNvbnN0IGlzTG9jYWxEZXYgPSBJU19ERVYgJiYgKGxvY2FsRGV2RW5hYmxlZCB8fCBydW5uaW5nVGVzdHMpO1xuICBjb25zdCBoYXNoUXVlcnkgPSBwYXJzZVF1ZXJ5U3RyaW5nXyhcbiAgICAgIC8vIGxvY2F0aW9uLm9yaWdpbmFsSGFzaCBpcyBzZXQgYnkgdGhlIHZpZXdlciB3aGVuIGl0IHJlbW92ZXMgdGhlIGZyYWdtZW50XG4gICAgICAvLyBmcm9tIHRoZSBVUkwuXG4gICAgICB3aW4ubG9jYXRpb24ub3JpZ2luYWxIYXNoIHx8IHdpbi5sb2NhdGlvbi5oYXNoKTtcblxuICBjb25zdCBzZWFyY2hRdWVyeSA9IHBhcnNlUXVlcnlTdHJpbmdfKHdpbi5sb2NhdGlvbi5zZWFyY2gpO1xuXG4gIGlmICghcnR2VmVyc2lvbikge1xuICAgIHJ0dlZlcnNpb24gPSBnZXRSdHZWZXJzaW9uKHdpbiwgaXNMb2NhbERldik7XG4gIH1cblxuICAvLyBUaGUgYG1pbmlmaWVkYCwgYHRlc3RgIGFuZCBgbG9jYWxEZXZgIHByb3BlcnRpZXMgYXJlIHJlcGxhY2VkXG4gIC8vIGFzIGJvb2xlYW4gbGl0ZXJhbHMgd2hlbiB3ZSBydW4gYGd1bHAgZGlzdGAgd2l0aG91dCB0aGUgYC0tZm9ydGVzdGluZ2BcbiAgLy8gZmxhZ3MuIFRoaXMgaW1wcm92ZWQgRENFIG9uIHRoZSBwcm9kdWN0aW9uIGZpbGUgd2UgZGVwbG95IGFzIHRoZSBjb2RlXG4gIC8vIHBhdGhzIGZvciBsb2NhbGhvc3QvdGVzdGluZy9kZXZlbG9wbWVudCBhcmUgZWxpbWluYXRlZC5cbiAgcmV0dXJuIHtcbiAgICBsb2NhbERldjogaXNMb2NhbERldixcbiAgICAvLyBUcmlnZ2VycyB2YWxpZGF0aW9uIG9yIGVuYWJsZSBwdWIgbGV2ZWwgbG9nZ2luZy4gVmFsaWRhdGlvbiBjYW4gYmVcbiAgICAvLyBieXBhc3NlZCB2aWEgI3ZhbGlkYXRlPTAuXG4gICAgLy8gTm90ZSB0aGF0IEFNUF9ERVZfTU9ERSBmbGFnIGlzIHVzZWQgZm9yIHRlc3RpbmcgcHVycG9zZXMuXG4gICAgZGV2ZWxvcG1lbnQ6ICEhKGhhc2hRdWVyeVsnZGV2ZWxvcG1lbnQnXSA9PSAnMScgfHwgd2luLkFNUF9ERVZfTU9ERSksXG4gICAgZXhhbWluZXI6IGhhc2hRdWVyeVsnZGV2ZWxvcG1lbnQnXSA9PSAnMicsXG4gICAgLy8gQWxsb3dzIGZpbHRlcmluZyB2YWxpZGF0aW9uIGVycm9ycyBieSBlcnJvciBjYXRlZ29yeS4gRm9yIHRoZVxuICAgIC8vIGF2YWlsYWJsZSBjYXRlZ29yaWVzLCBzZWUgRXJyb3JDYXRlZ29yeSBpbiB2YWxpZGF0b3IvdmFsaWRhdG9yLnByb3RvLlxuICAgIGZpbHRlcjogaGFzaFF1ZXJ5WydmaWx0ZXInXSxcbiAgICAvLyBhbXAtZ2VvIG92ZXJyaWRlXG4gICAgZ2VvT3ZlcnJpZGU6IGhhc2hRdWVyeVsnYW1wLWdlbyddLFxuICAgIG1pbmlmaWVkOiBJU19NSU5JRklFRCxcbiAgICAvLyBXaGV0aGVyIGRvY3VtZW50IGlzIGluIGFuIGFtcC1saXRlIHZpZXdlci4gSXQgc2lnbmFsIHRoYXQgdGhlIHVzZXJcbiAgICAvLyB3b3VsZCBwcmVmZXIgdG8gdXNlIGxlc3MgYmFuZHdpZHRoLlxuICAgIGxpdGU6IHNlYXJjaFF1ZXJ5WydhbXBfbGl0ZSddICE9IHVuZGVmaW5lZCxcbiAgICB0ZXN0OiBydW5uaW5nVGVzdHMsXG4gICAgbG9nOiBoYXNoUXVlcnlbJ2xvZyddLFxuICAgIHZlcnNpb24sXG4gICAgcnR2VmVyc2lvbixcbiAgfTtcbn1cblxuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgYHJ0dlZlcnNpb25gIHdoaWNoIHdpbGwgaGF2ZSBhIG51bWVyaWMgcHJlZml4XG4gKiBkZW5vdGluZyBjYW5hcnkvcHJvZC9leHBlcmltZW50ICh1bmxlc3MgYGlzTG9jYWxEZXZgIGlzIHRydWUpLlxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzTG9jYWxEZXZcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZ2V0UnR2VmVyc2lvbih3aW4sIGlzTG9jYWxEZXYpIHtcbiAgLy8gSWYgaXQncyBsb2NhbCBkZXYgdGhlbiB3ZSB3b24ndCBhY3R1YWxseSBoYXZlIGEgZnVsbCB2ZXJzaW9uIHNvXG4gIC8vIGp1c3QgdXNlIHRoZSB2ZXJzaW9uLlxuICBpZiAoaXNMb2NhbERldikge1xuICAgIHJldHVybiB2ZXJzaW9uO1xuICB9XG5cbiAgaWYgKHdpbi5BTVBfQ09ORklHICYmIHdpbi5BTVBfQ09ORklHLnYpIHtcbiAgICByZXR1cm4gd2luLkFNUF9DT05GSUcudjtcbiAgfVxuXG4gIC8vIEN1cnJlbnRseSBgJGludGVybmFsUnVudGltZVZlcnNpb24kYCBhbmQgdGh1cyBgbW9kZS52ZXJzaW9uYCBjb250YWluIG9ubHlcbiAgLy8gbWFqb3IgdmVyc2lvbi4gVGhlIGZ1bGwgdmVyc2lvbiBob3dldmVyIG11c3QgYWxzbyBjYXJyeSB0aGUgbWlub3IgdmVyc2lvbi5cbiAgLy8gV2Ugd2lsbCBkZWZhdWx0IHRvIHByb2R1Y3Rpb24gZGVmYXVsdCBgMDFgIG1pbm9yIHZlcnNpb24gZm9yIG5vdy5cbiAgLy8gVE9ETyhlcndpbm1vbWJheSk6IGRlY2lkZSB3aGV0aGVyICRpbnRlcm5hbFJ1bnRpbWVWZXJzaW9uJCBzaG91bGQgY29udGFpblxuICAvLyBtaW5vciB2ZXJzaW9uLlxuICByZXR1cm4gYDAxJHt2ZXJzaW9ufWA7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtib29sZWFufSBpc0xvY2FsRGV2XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJ0dlZlcnNpb25Gb3JUZXN0aW5nKHdpbiwgaXNMb2NhbERldikge1xuICByZXR1cm4gZ2V0UnR2VmVyc2lvbih3aW4sIGlzTG9jYWxEZXYpO1xufVxuXG5cbi8qKiBAdmlzaWJsZUZvclRlc3RpbmcgKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNldFJ0dlZlcnNpb25Gb3JUZXN0aW5nKCkge1xuICBydHZWZXJzaW9uID0gJyc7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtnZXRNb2RlfSBmcm9tICcuL21vZGUnO1xuaW1wb3J0IHtpbnN0YWxsIGFzIGluc3RhbGxBcnJheUluY2x1ZGVzfSBmcm9tICcuL3BvbHlmaWxscy9hcnJheS1pbmNsdWRlcyc7XG5pbXBvcnQge2luc3RhbGwgYXMgaW5zdGFsbEN1c3RvbUVsZW1lbnRzfSBmcm9tICcuL3BvbHlmaWxscy9jdXN0b20tZWxlbWVudHMnO1xuaW1wb3J0IHtcbiAgaW5zdGFsbCBhcyBpbnN0YWxsRE9NVG9rZW5MaXN0VG9nZ2xlLFxufSBmcm9tICcuL3BvbHlmaWxscy9kb210b2tlbmxpc3QtdG9nZ2xlJztcbmltcG9ydCB7aW5zdGFsbCBhcyBpbnN0YWxsRG9jQ29udGFpbnN9IGZyb20gJy4vcG9seWZpbGxzL2RvY3VtZW50LWNvbnRhaW5zJztcbmltcG9ydCB7aW5zdGFsbCBhcyBpbnN0YWxsTWF0aFNpZ259IGZyb20gJy4vcG9seWZpbGxzL21hdGgtc2lnbic7XG5pbXBvcnQge2luc3RhbGwgYXMgaW5zdGFsbE9iamVjdEFzc2lnbn0gZnJvbSAnLi9wb2x5ZmlsbHMvb2JqZWN0LWFzc2lnbic7XG5pbXBvcnQge2luc3RhbGwgYXMgaW5zdGFsbFByb21pc2V9IGZyb20gJy4vcG9seWZpbGxzL3Byb21pc2UnO1xuaW1wb3J0IHtpbnN0YWxsQ3VzdG9tRWxlbWVudHMgYXMgaW5zdGFsbFJlZ2lzdGVyRWxlbWVudH0gZnJvbVxuICAnZG9jdW1lbnQtcmVnaXN0ZXItZWxlbWVudC9idWlsZC9kb2N1bWVudC1yZWdpc3Rlci1lbGVtZW50LnBhdGNoZWQnO1xuaW1wb3J0IHtpc0V4cGVyaW1lbnRPbn0gZnJvbSAnLi9leHBlcmltZW50cyc7XG5cbmlmIChpc0V4cGVyaW1lbnRPbihzZWxmLCAnY3VzdG9tLWVsZW1lbnRzLXYxJykgfHwgZ2V0TW9kZSgpLnRlc3QpIHtcbiAgaW5zdGFsbEN1c3RvbUVsZW1lbnRzKHNlbGYsIGNsYXNzIHt9KTtcbn0gZWxzZSB7XG4gIGluc3RhbGxSZWdpc3RlckVsZW1lbnQoc2VsZiwgJ2F1dG8nKTtcbn1cbmluc3RhbGxET01Ub2tlbkxpc3RUb2dnbGUoc2VsZik7XG5pbnN0YWxsTWF0aFNpZ24oc2VsZik7XG5pbnN0YWxsT2JqZWN0QXNzaWduKHNlbGYpO1xuaW5zdGFsbFByb21pc2Uoc2VsZik7XG5pbnN0YWxsRG9jQ29udGFpbnMoc2VsZik7XG5pbnN0YWxsQXJyYXlJbmNsdWRlcyhzZWxmKTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBlbGVtZW50IGlzIGluIHRoZSBhcnJheSBhbmQgZmFsc2Ugb3RoZXJ3aXNlLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2Zyb21JbmRleFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqIEB0aGlzIHtBcnJheX1cbiAqL1xuZnVuY3Rpb24gaW5jbHVkZXModmFsdWUsIG9wdF9mcm9tSW5kZXgpIHtcbiAgY29uc3QgZnJvbUluZGV4ID0gb3B0X2Zyb21JbmRleCB8fCAwO1xuICBjb25zdCBsZW4gPSB0aGlzLmxlbmd0aDtcbiAgbGV0IGkgPSBmcm9tSW5kZXggPj0gMCA/IGZyb21JbmRleCA6IE1hdGgubWF4KGxlbiArIGZyb21JbmRleCwgMCk7XG4gIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBjb25zdCBvdGhlciA9IHRoaXNbaV07XG4gICAgLy8gSWYgdmFsdWUgaGFzIGJlZW4gZm91bmQgT1IgKHZhbHVlIGlzIE5hTiBBTkQgb3RoZXIgaXMgTmFOKVxuICAgIC8qZXNsaW50IFwibm8tc2VsZi1jb21wYXJlXCI6IDAqL1xuICAgIGlmIChvdGhlciA9PT0gdmFsdWUgfHwgKHZhbHVlICE9PSB2YWx1ZSAmJiBvdGhlciAhPT0gb3RoZXIpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiogU2V0cyB0aGUgQXJyYXkuY29udGFpbnMgcG9seWZpbGwgaWYgaXQgZG9lcyBub3QgZXhpc3QuXG4qIEBwYXJhbSB7IVdpbmRvd30gd2luXG4qL1xuZXhwb3J0IGZ1bmN0aW9uIGluc3RhbGwod2luKSB7XG4gIGlmICghd2luLkFycmF5LnByb3RvdHlwZS5pbmNsdWRlcykge1xuICAgIHdpbi5PYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXkucHJvdG90eXBlLCAnaW5jbHVkZXMnLCB7XG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IGluY2x1ZGVzLFxuICAgIH0pO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7e1xuICogICBwcm9taXNlOiAhUHJvbWlzZTx1bmRlZmluZWQ+LFxuICogICByZXNvbHZlOiBmdW5jdGlvbigpLFxuICogfX1cbiAqL1xubGV0IERlZmVycmVkRGVmO1xuXG4vKipcbiAqIEB0eXBlZGVmIHshRnVuY3Rpb259XG4gKi9cbmxldCBDdXN0b21FbGVtZW50Q29uc3RydWN0b3JEZWY7XG5cbi8qKlxuICogQHR5cGVkZWYge3tcbiAqICBuYW1lOiBzdHJpbmcsXG4gKiAgY3RvcjogIUN1c3RvbUVsZW1lbnRDb25zdHJ1Y3RvckRlZixcbiAqIH19XG4gKi9cbmxldCBDdXN0b21FbGVtZW50RGVmO1xuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGUgY3VzdG9tIGVsZW1lbnQncyBuYW1lLlxuICogVGhpcyBpbnRlbnRpb25hbGx5IGlnbm9yZXMgXCJ2YWxpZFwiIGhpZ2hlciBVbmljb2RlIENvZGUgUG9pbnRzLlxuICogaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvY3VzdG9tLWVsZW1lbnRzLmh0bWwjdmFsaWQtY3VzdG9tLWVsZW1lbnQtbmFtZVxuICovXG5jb25zdCBWQUxJRF9OQU1FID0gL15bYS16XVthLXowLTkuX10qLVthLXowLTkuXy1dKiQvO1xuY29uc3QgSU5WQUxJRF9OQU1FUyA9IFtcbiAgJ2Fubm90YXRpb24teG1sJyxcbiAgJ2NvbG9yLXByb2ZpbGUnLFxuICAnZm9udC1mYWNlJyxcbiAgJ2ZvbnQtZmFjZS1zcmMnLFxuICAnZm9udC1mYWNlLXVyaScsXG4gICdmb250LWZhY2UtZm9ybWF0JyxcbiAgJ2ZvbnQtZmFjZS1uYW1lJyxcbiAgJ21pc3NpbmctZ2x5cGgnLFxuXTtcblxuLyoqXG4gKiBBc3NlcnRzIHRoYXQgdGhlIGN1c3RvbSBlbGVtZW50IG5hbWUgY29uZm9ybXMgdG8gdGhlIHNwZWMuXG4gKlxuICogQHBhcmFtIHshRnVuY3Rpb259IFN5bnRheEVycm9yXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICovXG5mdW5jdGlvbiBhc3NlcnRWYWxpZE5hbWUoU3ludGF4RXJyb3IsIG5hbWUpIHtcbiAgaWYgKCFWQUxJRF9OQU1FLnRlc3QobmFtZSkgfHwgSU5WQUxJRF9OQU1FUy5pbmRleE9mKG5hbWUpID49IDApIHtcbiAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoYGludmFsaWQgY3VzdG9tIGVsZW1lbnQgbmFtZSBcIiR7bmFtZX1cImApO1xuICB9XG59XG5cbi8qKlxuICogRG9lcyB3aW4gaGF2ZSBhIGZ1bGwgQ3VzdG9tIEVsZW1lbnRzIHJlZ2lzdHJ5P1xuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBoYXNDdXN0b21FbGVtZW50cyh3aW4pIHtcbiAgY29uc3Qge2N1c3RvbUVsZW1lbnRzfSA9IHdpbjtcblxuICByZXR1cm4gISEoXG4gICAgY3VzdG9tRWxlbWVudHMgJiZcbiAgICBjdXN0b21FbGVtZW50cy5kZWZpbmUgJiZcbiAgICBjdXN0b21FbGVtZW50cy5nZXQgJiZcbiAgICBjdXN0b21FbGVtZW50cy53aGVuRGVmaW5lZCk7XG59XG5cbi8qKlxuICogV2FzIEhUTUxFbGVtZW50IGFscmVhZHkgcGF0Y2hlZCBmb3IgdGhpcyB3aW5kb3c/XG4gKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzUGF0Y2hlZCh3aW4pIHtcbiAgY29uc3QgdGFnID0gd2luLkhUTUxFbGVtZW50LnRvU3RyaW5nKCk7XG4gIHJldHVybiB0YWcuaW5kZXhPZignW25hdGl2ZSBjb2RlXScpID09PSAtMTtcbn1cblxuLyoqXG4gKiBUaGUgcHVibGljIEN1c3RvbSBFbGVtZW50cyBBUEkuXG4gKi9cbmNsYXNzIEN1c3RvbUVsZW1lbnRSZWdpc3RyeSB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcGFyYW0geyFSZWdpc3RyeX0gcmVnaXN0cnlcbiAgICovXG4gIGNvbnN0cnVjdG9yKHdpbiwgcmVnaXN0cnkpIHtcbiAgICAvKipcbiAgICAgKiBAY29uc3QgQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLndpbl8gPSB3aW47XG5cbiAgICAvKipcbiAgICAgKiBAY29uc3QgQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnJlZ2lzdHJ5XyA9IHJlZ2lzdHJ5O1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBEZWZlcnJlZERlZj59XG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAY29uc3RcbiAgICAgKi9cbiAgICB0aGlzLnBlbmRpbmdEZWZpbmVzXyA9IHRoaXMud2luXy5PYmplY3QuY3JlYXRlKG51bGwpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIHRoZSBjdXN0b20gZWxlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICogQHBhcmFtIHshQ3VzdG9tRWxlbWVudENvbnN0cnVjdG9yRGVmfSBjdG9yXG4gICAqIEBwYXJhbSB7IU9iamVjdD19IG9wdGlvbnNcbiAgICovXG4gIGRlZmluZShuYW1lLCBjdG9yLCBvcHRpb25zKSB7XG4gICAgdGhpcy5yZWdpc3RyeV8uZGVmaW5lKG5hbWUsIGN0b3IsIG9wdGlvbnMpO1xuXG4gICAgLy8gSWYgYW55b25lIGlzIHdhaXRpbmcgZm9yIHRoaXMgY3VzdG9tIGVsZW1lbnQgdG8gYmUgZGVmaW5lZCwgcmVzb2x2ZVxuICAgIC8vIHRoZWlyIHByb21pc2UuXG4gICAgY29uc3QgcGVuZGluZyA9IHRoaXMucGVuZGluZ0RlZmluZXNfO1xuICAgIGNvbnN0IGRlZmVycmVkID0gcGVuZGluZ1tuYW1lXTtcbiAgICBpZiAoZGVmZXJyZWQpIHtcbiAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgIGRlbGV0ZSBwZW5kaW5nW25hbWVdO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGNvbnN0cnVjdG9yIG9mIHRoZSAoYWxyZWFkeSBkZWZpbmVkKSBjdXN0b20gZWxlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICogQHJldHVybiB7IUN1c3RvbUVsZW1lbnRDb25zdHJ1Y3RvckRlZnx1bmRlZmluZWR9XG4gICAqL1xuICBnZXQobmFtZSkge1xuICAgIGNvbnN0IGRlZiA9IHRoaXMucmVnaXN0cnlfLmdldEJ5TmFtZShuYW1lKTtcbiAgICBpZiAoZGVmKSB7XG4gICAgICByZXR1cm4gZGVmLmN0b3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgd2FpdHMgdW50aWwgdGhlIGN1c3RvbSBlbGVtZW50IGlzIGRlZmluZWQuXG4gICAqIElmIHRoZSBjdXN0b20gZWxlbWVudCBpcyBhbHJlYWR5IGRlZmluZWQsIHJldHVybnMgYSByZXNvbHZlZCBwcm9taXNlLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTx1bmRlZmluZWQ+fVxuICAgKi9cbiAgd2hlbkRlZmluZWQobmFtZSkge1xuICAgIGNvbnN0IHtQcm9taXNlLCBTeW50YXhFcnJvcn0gPSB0aGlzLndpbl87XG4gICAgYXNzZXJ0VmFsaWROYW1lKFN5bnRheEVycm9yLCBuYW1lKTtcblxuICAgIGlmICh0aGlzLnJlZ2lzdHJ5Xy5nZXRCeU5hbWUobmFtZSkpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBjb25zdCBwZW5kaW5nID0gdGhpcy5wZW5kaW5nRGVmaW5lc187XG4gICAgY29uc3QgZGVmZXJyZWQgPSBwZW5kaW5nW25hbWVdO1xuICAgIGlmIChkZWZlcnJlZCkge1xuICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfVxuXG4gICAgbGV0IHJlc29sdmU7XG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyAvKk9LKi9Qcm9taXNlKHJlcyA9PiByZXNvbHZlID0gcmVzKTtcbiAgICBwZW5kaW5nW25hbWVdID0ge1xuICAgICAgcHJvbWlzZSxcbiAgICAgIHJlc29sdmUsXG4gICAgfTtcblxuICAgIHJldHVybiBwcm9taXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZ3JhZGUgYWxsIGN1c3RvbSBlbGVtZW50cyBpbnNpZGUgcm9vdC5cbiAgICpcbiAgICogQHBhcmFtIHshTm9kZX0gcm9vdFxuICAgKi9cbiAgdXBncmFkZShyb290KSB7XG4gICAgdGhpcy5yZWdpc3RyeV8udXBncmFkZShyb290KTtcbiAgfVxufVxuXG4vKipcbiAqIFRoaXMgaW50ZXJuYWwgQVBJcyBuZWNlc3NhcnkgdG8gcnVuIHRoZSBDdXN0b21FbGVtZW50UmVnaXN0cnkuXG4gKiBTaW5jZSBSZWdpc3RyeSBpcyBuZXZlciBleHBvc2VkIGV4dGVybmFsbHksIGFsbCBtZXRob2RzIGFyZSBhY3R1YWxseVxuICogYXZhaWxhYmxlIG9uIHRoZSBpbnN0YW5jZS5cbiAqL1xuY2xhc3MgUmVnaXN0cnkge1xuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHdpbikge1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlIEBjb25zdFxuICAgICAqL1xuICAgIHRoaXMud2luXyA9IHdpbjtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlIEBjb25zdFxuICAgICAqL1xuICAgIHRoaXMuZG9jXyA9IHdpbi5kb2N1bWVudDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgIUN1c3RvbUVsZW1lbnREZWY+fVxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGNvbnN0XG4gICAgICovXG4gICAgdGhpcy5kZWZpbml0aW9uc18gPSB3aW4uT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAgIC8qKlxuICAgICAqIEEgdXAtdG8tZGF0ZSBET00gc2VsZWN0b3IgZm9yIGFsbCBjdXN0b20gZWxlbWVudHMuXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICB0aGlzLnF1ZXJ5XyA9ICcnO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnRseSB1cGdyYWRpbmcgZWxlbWVudC5cbiAgICAgKiBAcHJpdmF0ZSB7RWxlbWVudH1cbiAgICAgKi9cbiAgICB0aGlzLmN1cnJlbnRfID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudGx5LWJlaW5nLXVwZ3JhZGVkIGN1c3RvbSBlbGVtZW50LlxuICAgKlxuICAgKiBXaGVuIGFuIGFscmVhZHkgY3JlYXRlZCAodGhyb3VnaCB0aGUgRE9NIHBhcnNpbmcgQVBJcywgb3IgaW5uZXJIVE1MKVxuICAgKiBjdXN0b20gZWxlbWVudCBub2RlIGlzIGJlaW5nIHVwZ3JhZGVkLCB3ZSBjYW4ndCBqdXN0IGNyZWF0ZSBhIG5ldyBub2RlXG4gICAqIChpdCdzIGlsbGVnYWwgaW4gdGhlIHNwZWMpLiBCdXQgd2Ugc3RpbGwgbmVlZCB0byBydW4gdGhlIGN1c3RvbSBlbGVtZW50J3NcbiAgICogY29uc3RydWN0b3IgY29kZSBvbiB0aGUgbm9kZS4gV2UgYXZvaWQgdGhpcyBjb251bmRydW0gYnkgcnVubmluZyB0aGVcbiAgICogY29uc3RydWN0b3Igd2hpbGUgcmV0dXJuaW5nIHRoaXMgY3VycmVudCBub2RlIGluIHRoZSBIVE1MRWxlbWVudFxuICAgKiBjbGFzcyBjb25zdHJ1Y3RvciAodGhlIGJhc2UgY2xhc3Mgb2YgYWxsIGN1c3RvbSBlbGVtZW50cykuXG4gICAqXG4gICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAqL1xuICBjdXJyZW50KCkge1xuICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLmN1cnJlbnRfO1xuICAgIHRoaXMuY3VycmVudF8gPSBudWxsO1xuICAgIHJldHVybiBjdXJyZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmRzIHRoZSBjdXN0b20gZWxlbWVudCBkZWZpbml0aW9uIGJ5IG5hbWUuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEByZXR1cm4ge0N1c3RvbUVsZW1lbnREZWZ8dW5kZWZpbmVkfVxuICAgKi9cbiAgZ2V0QnlOYW1lKG5hbWUpIHtcbiAgICBjb25zdCBkZWZpbml0aW9uID0gdGhpcy5kZWZpbml0aW9uc19bbmFtZV07XG4gICAgaWYgKGRlZmluaXRpb24pIHtcbiAgICAgIHJldHVybiBkZWZpbml0aW9uO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kcyB0aGUgY3VzdG9tIGVsZW1lbnQgZGVmaW5pdGlvbiBieSBjb25zdHJ1Y3RvciBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHtDdXN0b21FbGVtZW50Q29uc3RydWN0b3JEZWZ9IGN0b3JcbiAgICogQHJldHVybiB7Q3VzdG9tRWxlbWVudERlZnx1bmRlZmluZWR9XG4gICAqL1xuICBnZXRCeUNvbnN0cnVjdG9yKGN0b3IpIHtcbiAgICBjb25zdCBkZWZpbml0aW9ucyA9IHRoaXMuZGVmaW5pdGlvbnNfO1xuXG4gICAgZm9yIChjb25zdCBuYW1lIGluIGRlZmluaXRpb25zKSB7XG4gICAgICBjb25zdCBkZWYgPSBkZWZpbml0aW9uc1tuYW1lXTtcbiAgICAgIGlmIChkZWYuY3RvciA9PT0gY3Rvcikge1xuICAgICAgICByZXR1cm4gZGVmO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgdGhlIGN1c3RvbSBlbGVtZW50IGRlZmluaXRpb24sIGFuZCB1cGdyYWRlcyBhbGwgZWxlbWVudHMgYnkgdGhhdFxuICAgKiBuYW1lIGluIHRoZSByb290IGRvY3VtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcGFyYW0geyFDdXN0b21FbGVtZW50Q29uc3RydWN0b3JEZWZ9IGN0b3JcbiAgICogQHBhcmFtIHshT2JqZWN0fHVuZGVmaW5lZH0gb3B0aW9uc1xuICAgKi9cbiAgZGVmaW5lKG5hbWUsIGN0b3IsIG9wdGlvbnMpIHtcbiAgICBjb25zdCB7RXJyb3IsIFN5bnRheEVycm9yfSA9IHRoaXMud2luXztcblxuICAgIGlmIChvcHRpb25zKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4dGVuZGluZyBuYXRpdmUgY3VzdG9tIGVsZW1lbnRzIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbiAgICB9XG5cbiAgICBhc3NlcnRWYWxpZE5hbWUoU3ludGF4RXJyb3IsIG5hbWUpO1xuXG4gICAgaWYgKHRoaXMuZ2V0QnlOYW1lKG5hbWUpIHx8XG4gICAgICAgIHRoaXMuZ2V0QnlDb25zdHJ1Y3RvcihjdG9yKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBkdXBsaWNhdGUgZGVmaW5pdGlvbiBcIiR7bmFtZX1cImApO1xuICAgIH1cblxuICAgIC8vIFRPRE8oanJpZGdld2VsbCk6IFJlY29yZCBjb25uZWN0ZWRDYWxsYmFjaywgZGlzY29ubmVjdGVkQ2FsbGJhY2ssXG4gICAgLy8gYWRvcHRlZENhbGxiYWNrLCBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2ssIGFuZCBvYnNlcnZlZEF0dHJpYnV0ZXMuXG4gICAgLy8gVE9ETyhqcmlkZ2V3ZWxsKTogSWYgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrLCBnYXRoZXIgb2JzZXJ2ZWRBdHRyaWJ1dGVzXG4gICAgdGhpcy5kZWZpbml0aW9uc19bbmFtZV0gPSB7XG4gICAgICBuYW1lLFxuICAgICAgY3RvcixcbiAgICB9O1xuXG4gICAgdGhpcy5vYnNlcnZlXyhuYW1lKTtcbiAgICB0aGlzLnVwZ3JhZGUodGhpcy5kb2NfLCBuYW1lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGdyYWRlcyBjdXN0b20gZWxlbWVudHMgZGVzY2VuZGFudHMgb2Ygcm9vdCAoYnV0IG5vdCBpbmNsdWRpbmcgcm9vdCkuXG4gICAqXG4gICAqIFdoZW4gY2FsbGVkIHdpdGggYW4gb3B0X3F1ZXJ5LCBpdCBib3RoIHVwZ3JhZGVzIGFuZCBjb25uZWN0cyB0aGUgY3VzdG9tXG4gICAqIGVsZW1lbnRzICh0aGlzIGlzIHVzZWQgZHVyaW5nIHRoZSBjdXN0b20gZWxlbWVudCBkZWZpbmUgYWxnb3JpdGhtKS5cbiAgICpcbiAgICogQHBhcmFtIHshTm9kZX0gcm9vdFxuICAgKiBAcGFyYW0ge3N0cmluZz19IG9wdF9xdWVyeVxuICAgKi9cbiAgdXBncmFkZShyb290LCBvcHRfcXVlcnkpIHtcbiAgICAvLyBPbmx5IEN1c3RvbUVsZW1lbnRSZWdpc3RyeS5wLmRlZmluZSBwcm92aWRlcyBhIHF1ZXJ5ICh0aGUgbmV3bHkgZGVmaW5lZFxuICAgIC8vIGN1c3RvbSBlbGVtZW50KS4gSW4gdGhpcyBjYXNlLCB3ZSBhcmUgYm90aCB1cGdyYWRpbmcgX2FuZF8gY29ubmVjdGluZ1xuICAgIC8vIHRoZSBjdXN0b20gZWxlbWVudHMuXG4gICAgY29uc3QgbmV3bHlEZWZpbmVkID0gISFvcHRfcXVlcnk7XG4gICAgY29uc3QgcXVlcnkgPSBvcHRfcXVlcnkgfHwgdGhpcy5xdWVyeV87XG4gICAgY29uc3QgdXBncmFkZUNhbmRpZGF0ZXMgPSB0aGlzLnF1ZXJ5QWxsXyhyb290LCBxdWVyeSk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHVwZ3JhZGVDYW5kaWRhdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjYW5kaWRhdGUgPSB1cGdyYWRlQ2FuZGlkYXRlc1tpXTtcbiAgICAgIGlmIChuZXdseURlZmluZWQpIHtcbiAgICAgICAgdGhpcy5jb25uZWN0ZWRDYWxsYmFja18oY2FuZGlkYXRlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudXBncmFkZVNlbGYoY2FuZGlkYXRlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBncmFkZXMgdGhlIGN1c3RvbSBlbGVtZW50IG5vZGUsIGlmIGEgY3VzdG9tIGVsZW1lbnQgaGFzIGJlZW4gcmVnaXN0ZXJlZFxuICAgKiBieSB0aGlzIG5hbWUuXG4gICAqXG4gICAqIEBwYXJhbSB7IU5vZGV9IG5vZGVcbiAgICovXG4gIHVwZ3JhZGVTZWxmKG5vZGUpIHtcbiAgICBjb25zdCBkZWYgPSB0aGlzLmdldEJ5TmFtZShub2RlLmxvY2FsTmFtZSk7XG4gICAgaWYgKCFkZWYpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnVwZ3JhZGVTZWxmXygvKiogQHR5cGUgeyFFbGVtZW50fSAqLyhub2RlKSwgZGVmKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFOb2RlfSByb290XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBxdWVyeVxuICAgKiBAcmV0dXJuIHshQXJyYXl8IU5vZGVMaXN0fVxuICAgKi9cbiAgcXVlcnlBbGxfKHJvb3QsIHF1ZXJ5KSB7XG4gICAgaWYgKCFxdWVyeSB8fCAhcm9vdC5xdWVyeVNlbGVjdG9yQWxsKSB7XG4gICAgICAvLyBOb3RoaW5nIHRvIGRvLi4uXG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgcmV0dXJuIHJvb3QucXVlcnlTZWxlY3RvckFsbChxdWVyeSk7XG4gIH1cblxuICAvKipcbiAgICogVXBncmFkZXMgdGhlIChhbHJlYWR5IGNyZWF0ZWQgdmlhIERPTSBwYXJzaW5nKSBjdXN0b20gZWxlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHshRWxlbWVudH0gbm9kZVxuICAgKiBAcGFyYW0geyFDdXN0b21FbGVtZW50RGVmfSBkZWZcbiAgICovXG4gIHVwZ3JhZGVTZWxmXyhub2RlLCBkZWYpIHtcbiAgICBjb25zdCB7Y3Rvcn0gPSBkZWY7XG4gICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBjdG9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRGVzcGl0ZSBob3cgaXQgbG9va3MsIHRoaXMgaXMgbm90IGEgdXNlbGVzcyBjb25zdHJ1Y3Rpb24uXG4gICAgLy8gSFRNTEVsZW1lbnRQb2x5ZmlsbCAodGhlIGJhc2UgY2xhc3Mgb2YgYWxsIGN1c3RvbSBlbGVtZW50cykgd2lsbCByZXR1cm5cbiAgICAvLyB0aGUgY3VycmVudCBub2RlLCBhbGxvd2luZyB0aGUgY3VzdG9tIGVsZW1lbnQncyBzdWJjbGFzcyBjb25zdHJ1Y3RvciB0b1xuICAgIC8vIHJ1biBvbiB0aGUgbm9kZS4gVGhlIG5vZGUgaXRzZWxmIGlzIGFscmVhZHkgY29uc3RydWN0ZWQsIHNvIHRoZSByZXR1cm5cbiAgICAvLyB2YWx1ZSBpcyBqdXN0IHRoZSBub2RlLlxuICAgIHRoaXMuY3VycmVudF8gPSBub2RlO1xuICAgIGNvbnN0IGVsID0gbmV3IGN0b3IoKTtcblxuICAgIGlmIChlbCAhPT0gbm9kZSkge1xuICAgICAgdGhyb3cgbmV3IHRoaXMud2luXy5FcnJvcihcbiAgICAgICAgICAnQ29uc3RydWN0b3IgaWxsZWdhbGx5IHJldHVybmVkIGEgZGlmZmVyZW50IGluc3RhbmNlLicpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBGaXJlcyBjb25uZWN0ZWRDYWxsYmFjayBvbiB0aGUgY3VzdG9tIGVsZW1lbnQsIGlmIGl0IGhhcyBvbmUuXG4gICAqIFRoaXMgYWxzbyB1cGdyYWRlcyB0aGUgY3VzdG9tIGVsZW1lbnQsIHNpbmNlIGl0IG1heSBub3QgaGF2ZSBiZWVuXG4gICAqIGFjY2Vzc2libGUgdmlhIHRoZSByb290IGRvY3VtZW50IGJlZm9yZSAoYSBkZXRhY2hlZCBET00gdHJlZSkuXG4gICAqXG4gICAqIEBwYXJhbSB7IU5vZGV9IG5vZGVcbiAgICovXG4gIGNvbm5lY3RlZENhbGxiYWNrXyhub2RlKSB7XG4gICAgY29uc3QgZGVmID0gdGhpcy5nZXRCeU5hbWUobm9kZS5sb2NhbE5hbWUpO1xuICAgIGlmICghZGVmKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMudXBncmFkZVNlbGZfKC8qKiBAdHlwZSB7IUVsZW1lbnR9ICovKG5vZGUpLCBkZWYpO1xuICAgIC8vIFRPRE8oanJpZGdld2VsbCk6IEl0IG1heSBiZSBhcHByb3ByaWF0ZSB0byBhZG9wdENhbGxiYWNrLCBpZiB0aGUgbm9kZVxuICAgIC8vIHVzZWQgdG8gYmUgaW4gYW5vdGhlciBkb2MuXG4gICAgLy8gVE9ETyhqcmlkZ2V3ZWxsKTogSSBzaG91bGQgYmUgY2FsbGluZyB0aGUgZGVmaW5pdGlvbnMgY29ubmVjdGVkQ2FsbGJhY2tcbiAgICAvLyB3aXRoIG5vZGUgYXMgdGhlIGNvbnRleHQuXG4gICAgaWYgKG5vZGUuY29ubmVjdGVkQ2FsbGJhY2spIHtcbiAgICAgIG5vZGUuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRmlyZXMgZGlzY29ubmVjdGVkQ2FsbGJhY2sgb24gdGhlIGN1c3RvbSBlbGVtZW50LCBpZiBpdCBoYXMgb25lLlxuICAgKlxuICAgKiBAcGFyYW0geyFOb2RlfSBub2RlXG4gICAqL1xuICBkaXNjb25uZWN0ZWRDYWxsYmFja18obm9kZSkge1xuICAgIC8vIFRPRE8oanJpZGdld2VsbCk6IEkgc2hvdWxkIGJlIGNhbGxpbmcgdGhlIGRlZmluaXRpb25zIGNvbm5lY3RlZENhbGxiYWNrXG4gICAgLy8gd2l0aCBub2RlIGFzIHRoZSBjb250ZXh0LlxuICAgIGlmIChub2RlLmRpc2Nvbm5lY3RlZENhbGxiYWNrKSB7XG4gICAgICBub2RlLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlY29yZHMgbmFtZSBhcyBhIHJlZ2lzdGVyZWQgY3VzdG9tIGVsZW1lbnQgdG8gb2JzZXJ2ZS5cbiAgICpcbiAgICogU3RhcnRzIHRoZSBNdXRhdGlvbiBPYnNlcnZlciBpZiB0aGlzIGlzIHRoZSBmaXJzdCByZWdpc3RlcmVkIGN1c3RvbVxuICAgKiBlbGVtZW50LiBUaGlzIGlzIGRlZmVycmVkIHVudGlsIHRoZSBmaXJzdCBjdXN0b20gZWxlbWVudCBpcyBkZWZpbmVkIHRvXG4gICAqIHNwZWVkIHVwIGluaXRpYWwgcmVuZGVyaW5nIG9mIHRoZSBwYWdlLlxuICAgKlxuICAgKiBNdXRhdGlvbiBPYnNlcnZlcnMgYXJlIGNvbnZlbmllbnRseSBhdmFpbGFibGUgaW4gZXZlcnkgYnJvd3NlciB3ZSBjYXJlXG4gICAqIGFib3V0LiBXaGVuIGEgbm9kZSBpcyBjb25uZWN0ZWQgdG8gdGhlIHJvb3QgZG9jdW1lbnQsIGFsbCBjdXN0b21cbiAgICogZWxlbWVudHMgKGluY2x1ZGluZyB0aGF0IG5vZGUgaXRlc2VsZikgd2lsbCBiZSB1cGdyYWRlZCBhbmQgY2FsbFxuICAgKiBjb25uZWN0ZWRDYWxsYmFjay4gV2hlbiBhIG5vZGUgaXMgZGlzY29ubmVjdGVkQ2FsbGJhY2sgZnJvbSB0aGUgcm9vdFxuICAgKiBkb2N1bWVudCwgYWxsIGN1c3RvbSBlbGVtZW50cyB3aWxsIGNhbGwgZGlzY29ubmVjdGVkQ2FsbGJhY2suXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqL1xuICBvYnNlcnZlXyhuYW1lKSB7XG4gICAgaWYgKHRoaXMucXVlcnlfKSB7XG4gICAgICB0aGlzLnF1ZXJ5XyArPSBgLCR7bmFtZX1gO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMucXVlcnlfID0gbmFtZTtcblxuICAgIC8vIFRoZSBmaXJzdCByZWdpc3RlcmVkIG5hbWUgc3RhcnRzIHRoZSBtdXRhdGlvbiBvYnNlcnZlci5cbiAgICBjb25zdCBvYnNlcnZlciA9IG5ldyB0aGlzLndpbl8uTXV0YXRpb25PYnNlcnZlcihyZWNvcmRzID0+IHtcbiAgICAgIGlmIChyZWNvcmRzKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlUmVjb3Jkc18ocmVjb3Jkcyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLmRvY18sIHtcbiAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICAgIHN1YnRyZWU6IHRydWUsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIGFsbCB0aGUgTXV0YXRpb24gT2JzZXJ2ZXIncyBNdXRhdGlvbiBSZWNvcmRzLlxuICAgKiBBbGwgYWRkZWQgY3VzdG9tIGVsZW1lbnRzIHdpbGwgYmUgdXBncmFkZWQgKGlmIG5vdCBhbHJlYWR5KSBhbmQgY2FsbFxuICAgKiBjb25uZWN0ZWRDYWxsYmFjay4gQWxsIHJlbW92ZWQgY3VzdG9tIGVsZW1lbnRzIHdpbGwgY2FsbFxuICAgKiBkaXNjb25uZWN0ZWRDYWxsYmFjay5cbiAgICpcbiAgICogQHBhcmFtIHshQXJyYXk8IU11dGF0aW9uUmVjb3JkPn0gcmVjb3Jkc1xuICAgKi9cbiAgaGFuZGxlUmVjb3Jkc18ocmVjb3Jkcykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVjb3Jkcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgcmVjb3JkID0gcmVjb3Jkc1tpXTtcbiAgICAgIGlmICghcmVjb3JkKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB7YWRkZWROb2RlcywgcmVtb3ZlZE5vZGVzfSA9IHJlY29yZDtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWRkZWROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBub2RlID0gYWRkZWROb2Rlc1tpXTtcbiAgICAgICAgY29uc3QgY29ubmVjdGVkQ2FuZGlkYXRlcyA9IHRoaXMucXVlcnlBbGxfKG5vZGUsIHRoaXMucXVlcnlfKTtcbiAgICAgICAgdGhpcy5jb25uZWN0ZWRDYWxsYmFja18obm9kZSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29ubmVjdGVkQ2FuZGlkYXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHRoaXMuY29ubmVjdGVkQ2FsbGJhY2tfKGNvbm5lY3RlZENhbmRpZGF0ZXNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVtb3ZlZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSByZW1vdmVkTm9kZXNbaV07XG4gICAgICAgIGNvbnN0IGRpc2Nvbm5lY3RlZENhbmRpZGF0ZXMgPSB0aGlzLnF1ZXJ5QWxsXyhub2RlLCB0aGlzLnF1ZXJ5Xyk7XG4gICAgICAgIHRoaXMuZGlzY29ubmVjdGVkQ2FsbGJhY2tfKG5vZGUpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRpc2Nvbm5lY3RlZENhbmRpZGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3RlZENhbGxiYWNrXyhkaXNjb25uZWN0ZWRDYW5kaWRhdGVzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIERvZXMgdGhlIHBvbHlmaWxsaW5nLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqL1xuZnVuY3Rpb24gcG9seWZpbGwod2luKSB7XG4gIGNvbnN0IHtIVE1MRWxlbWVudCwgRWxlbWVudCwgTm9kZSwgRG9jdW1lbnQsIE9iamVjdCwgZG9jdW1lbnR9ID0gd2luO1xuICBjb25zdCB7Y3JlYXRlRWxlbWVudCwgY2xvbmVOb2RlLCBpbXBvcnROb2RlfSA9IGRvY3VtZW50O1xuXG4gIGNvbnN0IHJlZ2lzdHJ5ID0gbmV3IFJlZ2lzdHJ5KHdpbik7XG4gIGNvbnN0IGN1c3RvbUVsZW1lbnRzID0gbmV3IEN1c3RvbUVsZW1lbnRSZWdpc3RyeSh3aW4sIHJlZ2lzdHJ5KTtcblxuICAvLyBFeHBvc2UgdGhlIGN1c3RvbSBlbGVtZW50IHJlZ2lzdHJ5LlxuICAvLyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHdpbmRvdywgJ2N1c3RvbUVsZW1lbnRzJylcbiAgLy8ge2dldDogxpIsIHNldDogdW5kZWZpbmVkLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWV9XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW4sICdjdXN0b21FbGVtZW50cycsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAvLyB3cml0YWJsZTogZmFsc2UsXG4gICAgdmFsdWU6IGN1c3RvbUVsZW1lbnRzLFxuICB9KTtcblxuICAvLyBQYXRjaCBjcmVhdGVFbGVtZW50IHRvIGltbWVkaWF0ZWx5IHVwZ3JhZGUgdGhlIGN1c3RvbSBlbGVtZW50LlxuICAvLyBUaGlzIGhhcyB0aGUgYWRkZWQgYmVuZWZpdCB0aGF0IGl0IGF2b2lkcyB0aGUgXCJhbHJlYWR5IGNyZWF0ZWQgYnV0IG5lZWRzXG4gIC8vIGNvbnN0cnVjdG9yIGNvZGUgcnVuXCIgY2hpY2tlbi1hbmQtZWdnIHByb2JsZW0uXG4gIERvY3VtZW50LnByb3RvdHlwZS5jcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24gY3JlYXRlRWxlbWVudFBvbHlmaWxsKG5hbWUpIHtcbiAgICBjb25zdCBkZWYgPSByZWdpc3RyeS5nZXRCeU5hbWUobmFtZSk7XG4gICAgaWYgKGRlZikge1xuICAgICAgcmV0dXJuIG5ldyBkZWYuY3RvcigpO1xuICAgIH1cbiAgICByZXR1cm4gY3JlYXRlRWxlbWVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xuXG4gIC8vIFBhdGNoIGltcG9ydE5vZGUgdG8gaW1tZWRpYXRlbHkgdXBncmFkZSBjdXN0b20gZWxlbWVudHMuXG4gIC8vIFRPRE8oanJpZGdld2VsbCk6IENhbiBmaXJlIGFkb3B0ZWRDYWxsYmFjayBmb3IgY3Jvc3MgZG9jIGltcG9ydHMuXG4gIERvY3VtZW50LnByb3RvdHlwZS5pbXBvcnROb2RlID0gZnVuY3Rpb24gaW1wb3J0Tm9kZVBvbHlmaWxsKCkge1xuICAgIGNvbnN0IGltcG9ydGVkID0gaW1wb3J0Tm9kZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmIChpbXBvcnRlZCkge1xuICAgICAgcmVnaXN0cnkudXBncmFkZVNlbGYoaW1wb3J0ZWQpO1xuICAgICAgcmVnaXN0cnkudXBncmFkZShpbXBvcnRlZCk7XG4gICAgfVxuICAgIHJldHVybiBpbXBvcnRlZDtcbiAgfTtcblxuICAvLyBQYXRjaCBjbG9uZU5vZGUgdG8gaW1tZWRpYXRlbHkgdXBncmFkZSBjdXN0b20gZWxlbWVudHMuXG4gIE5vZGUucHJvdG90eXBlLmNsb25lTm9kZSA9IGZ1bmN0aW9uIGNsb25lTm9kZVBvbHlmaWxsKCkge1xuICAgIGNvbnN0IGNsb25lZCA9IGNsb25lTm9kZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHJlZ2lzdHJ5LnVwZ3JhZGVTZWxmKGNsb25lZCk7XG4gICAgcmVnaXN0cnkudXBncmFkZShjbG9uZWQpO1xuICAgIHJldHVybiBjbG9uZWQ7XG4gIH07XG5cbiAgLy8gUGF0Y2ggdGhlIGlubmVySFRNTCBzZXR0ZXIgdG8gaW1tZWRpYXRlbHkgdXBncmFkZSBjdXN0b20gZWxlbWVudHMuXG4gIC8vIE5vdGUsIHRoaXMgY291bGQgdGVjaG5pY2FsbHkgZmlyZSBjb25uZWN0ZWRDYWxsYmFja3MgaWYgdGhpcyBub2RlIHdhc1xuICAvLyBjb25uZWN0ZWQsIGJ1dCB3ZSBsZWF2ZSB0aGF0IHRvIHRoZSBNdXRhdGlvbiBPYnNlcnZlci5cbiAgY29uc3QgaW5uZXJIVE1MRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoRWxlbWVudC5wcm90b3R5cGUsXG4gICAgICAnaW5uZXJIVE1MJyk7XG4gIGNvbnN0IGlubmVySFRNTFNldHRlciA9IGlubmVySFRNTERlc2Muc2V0O1xuICBpbm5lckhUTUxEZXNjLnNldCA9IGZ1bmN0aW9uKGh0bWwpIHtcbiAgICBpbm5lckhUTUxTZXR0ZXIuY2FsbCh0aGlzLCBodG1sKTtcbiAgICByZWdpc3RyeS51cGdyYWRlKHRoaXMpO1xuICB9O1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRWxlbWVudC5wcm90b3R5cGUsICdpbm5lckhUTUwnLCBpbm5lckhUTUxEZXNjKTtcblxuICAvKipcbiAgICogWW91IGNhbid0IHVzZSB0aGUgcmVhbCBIVE1MRWxlbWVudCBjb25zdHJ1Y3RvciwgYmVjYXVzZSB5b3UgY2FuJ3Qgc3ViY2xhc3NcbiAgICogaXQgd2l0aG91dCB1c2luZyBuYXRpdmUgY2xhc3Nlcy4gU28sIG1vY2sgaXRzIGFwcHJveGltYXRpb24gdXNpbmdcbiAgICogY3JlYXRlRWxlbWVudC5cbiAgICovXG4gIGZ1bmN0aW9uIEhUTUxFbGVtZW50UG9seWZpbGwoKSB7XG4gICAgY29uc3Qge2NvbnN0cnVjdG9yfSA9IHRoaXM7XG5cbiAgICAvLyBJZiB3ZSdyZSB1cGdyYWRpbmcgYW4gYWxyZWFkeSBjcmVhdGVkIGN1c3RvbSBlbGVtZW50LCB3ZSBjYW4ndCBjcmVhdGVcbiAgICAvLyBhbm90aGVyIG5ldyBub2RlIChieSB0aGUgc3BlYywgaXQgbXVzdCBiZSB0aGUgc2FtZSBub2RlKS5cbiAgICBsZXQgZWwgPSByZWdpc3RyeS5jdXJyZW50KCk7XG5cbiAgICAvLyBJZiB0aGVyZSdzIG5vdCBhIGFscmVhZHkgY3JlYXRlZCBjdXN0b20gZWxlbWVudCwgd2UncmUgYmVpbmcgaW52b2tlZCB2aWFcbiAgICAvLyBgbmV3YGluZyB0aGUgY29uc3RydWN0b3IuXG4gICAgLy9cbiAgICAvLyBUZWNobmljYWxseSwgd2UgY291bGQgZ2V0IGhlcmUgdmlhIGNyZWF0ZUVsZW1lbnQsIGJ1dCB3ZSBwYXRjaGVkIHRoYXQuXG4gICAgLy8gSWYgaXQgdGhlIGN1c3RvbSBlbGVtZW50IHdhcyByZWdpc3RlcmVkLCB0aGUgcGF0Y2ggdHVybmVkIGl0IGludG8gYVxuICAgIC8vIGBuZXdgIGNhbGwuXG4gICAgLy8gSWYgaXQgd2FzIG5vdCByZWdpc3RlcmVkLCB0aGUgbmF0aXZlIGNyZWF0ZUVsZW1lbnQgaXMgdXNlZC4gQW5kIGlmXG4gICAgLy8gbmF0aXZlIGNyZWF0ZUVsZW1lbnQgaXMgYmVpbmcgdXNlZCBhbmQgd2UgZ290IHRvIHRoaXMgY29kZSwgd2UncmUgcmVhbGx5XG4gICAgLy8gaW4gYW4gaW5maW5pdGUgbG9vcCAoYSBuYXRpdmUgY3JlYXRlRWxlbWVudCBjYWxsIGp1c3QgYmVsb3cpIHNvIHdlJ3ZlXG4gICAgLy8gZ290IGJpZ2dlciBwcm9ibGVtcy5cbiAgICAvL1xuICAgIC8vIFNvIGp1c3QgdGFrZSBteSB3b3JkIHdlIGdvdCBoZXJlIHZpYSBgbmV3YC5cbiAgICBpZiAoIWVsKSB7XG4gICAgICAvLyBUaGUgY3VzdG9tIGVsZW1lbnQgZGVmaW5pdGlvbiBpcyBhbiBpbnZhcmlhbnQuIElmIHRoZSBjdXN0b20gZWxlbWVudFxuICAgICAgLy8gaXMgcmVnaXN0ZXJlZCwgZXZlcnl0aGluZyB3b3Jrcy4gSWYgaXQncyBub3QsIGl0IHRocm93cyBpbiB0aGUgbWVtYmVyXG4gICAgICAvLyBwcm9wZXJ0eSBhY2Nlc3MgKG9ubHkgZGVmaW5lZCBjdXN0b20gZWxlbWVudHMgY2FuIGJlIGRpcmVjdGx5XG4gICAgICAvLyBjb25zdHJ1Y3RlZCB2aWEgYG5ld2ApLlxuICAgICAgY29uc3QgZGVmID0gcmVnaXN0cnkuZ2V0QnlDb25zdHJ1Y3Rvcihjb25zdHJ1Y3Rvcik7XG4gICAgICBlbCA9IGNyZWF0ZUVsZW1lbnQuY2FsbChkb2N1bWVudCwgZGVmLm5hbWUpO1xuICAgIH1cblxuICAgIC8vIEZpbmFsbHksIGlmIHRoZSBub2RlIHdhcyBhbHJlYWR5IGNvbnN0cnVjdGVkLCB3ZSBuZWVkIHRvIHJlc2V0IGl0J3NcbiAgICAvLyBwcm90b3R5cGUgdG8gdGhlIGN1c3RvbSBlbGVtZW50IHByb3RvdHlwZS4gQW5kIGlmIGl0IHdhc24ndCBhbHJlYWR5XG4gICAgLy8gY29uc3RydWN0ZWQsIHdlIGNyZWF0ZWQgYSBuZXcgbm9kZSB2aWEgbmF0aXZlIGNyZWF0ZUVsZW1lbnQsIGFuZCB3ZSBuZWVkXG4gICAgLy8gdG8gcmVzZXQgaXQncyBwcm90b3R5cGUuIEJhc2ljYWxseSBhbHdheXMgcmVzZXQgdGhlIHByb3RvdHlwZS5cbiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoZWwsIGNvbnN0cnVjdG9yLnByb3RvdHlwZSk7XG4gICAgcmV0dXJuIGVsO1xuICB9XG4gIHN1YkNsYXNzKE9iamVjdCwgSFRNTEVsZW1lbnQsIEhUTUxFbGVtZW50UG9seWZpbGwpO1xuXG4gIC8vIEV4cG9zZSB0aGUgcG9seWZpbGxlZCBIVE1MRWxlbWVudCBjb25zdHJ1Y3RvciBmb3IgZXZlcnlvbmUgdG8gZXh0ZW5kIGZyb20uXG4gIHdpbi5IVE1MRWxlbWVudCA9IEhUTUxFbGVtZW50UG9seWZpbGw7XG59XG5cbi8qKlxuICogV3JhcHMgSFRNTEVsZW1lbnQgaW4gYSBSZWZsZWN0LmNvbnN0cnVjdCBjb25zdHJ1Y3Rvciwgc28gdGhhdCB0cmFuc3BpbGVkXG4gKiBjbGFzc2VzIGNhbiBgX3RoaXMgPSBzdXBlckNsYXNzLmNhbGwodGhpcylgIGR1cmluZyB0aGVpciBjb25zdHJ1Y3Rpb24uXG4gKlxuICogVGhpcyBpcyBvbmx5IHVzZWQgd2hlbiBDdXN0b20gRWxlbWVudHMgdjEgaXMgYWxyZWFkeSBhdmFpbGFibGUgX2FuZF8gd2UncmVcbiAqIHVzaW5nIHRyYW5zcGlsZWQgY2xhc3NlcyAod2hpY2ggdXNlIEVTNSBjb25zdHJ1Y3Rpb24gaWRpb21zKS5cbiAqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICovXG5mdW5jdGlvbiB3cmFwSFRNTEVsZW1lbnQod2luKSB7XG4gIGNvbnN0IHtIVE1MRWxlbWVudCwgUmVmbGVjdCwgT2JqZWN0fSA9IHdpbjtcbiAgLyoqXG4gICAqL1xuICBmdW5jdGlvbiBIVE1MRWxlbWVudFdyYXBwZXIoKSB7XG4gICAgY29uc3QgY3RvciA9IC8qKiBAdHlwZSB7ZnVuY3Rpb24oLi4uPyk6P3x1bmRlZmluZWR9ICovKFxuICAgICAgLyoqIEB0eXBlIHshSFRNTEVsZW1lbnR9ICovKHRoaXMpLmNvbnN0cnVjdG9yKTtcblxuICAgIC8vIFJlZmxlY3QuY29uc3RydWN0IGFsbG93cyB1cyB0byBjb25zdHJ1Y3QgYSBuZXcgSFRNTEVsZW1lbnQgd2l0aG91dCB1c2luZ1xuICAgIC8vIGBuZXdgICh3aGljaCB3aWxsIGFsd2F5cyBmYWlsIGJlY2F1c2UgbmF0aXZlIEhUTUxFbGVtZW50IGlzIGEgcmVzdHJpY3RlZFxuICAgIC8vIGNvbnN0cnVjdG9yKS5cbiAgICByZXR1cm4gUmVmbGVjdC5jb25zdHJ1Y3QoSFRNTEVsZW1lbnQsIFtdLCBjdG9yKTtcbiAgfVxuICBzdWJDbGFzcyhPYmplY3QsIEhUTUxFbGVtZW50LCBIVE1MRWxlbWVudFdyYXBwZXIpO1xuXG4gIC8vIEV4cG9zZSB0aGUgd3JhcHBlZCBIVE1MRWxlbWVudCBjb25zdHJ1Y3RvciBmb3IgZXZlcnlvbmUgdG8gZXh0ZW5kIGZyb20uXG4gIHdpbi5IVE1MRWxlbWVudCA9IEhUTUxFbGVtZW50V3JhcHBlcjtcbn1cblxuLyoqXG4gKiBTZXR1cHMgdXAgcHJvdG90eXBlIGluaGVyaXRhbmNlXG4gKlxuICogQHBhcmFtIHshT2JqZWN0fSBPYmplY3RcbiAqIEBwYXJhbSB7IUZ1bmN0aW9ufSBzdXBlckNsYXNzXG4gKiBAcGFyYW0geyFGdW5jdGlvbn0gc3ViQ2xhc3NcbiAqL1xuZnVuY3Rpb24gc3ViQ2xhc3MoT2JqZWN0LCBzdXBlckNsYXNzLCBzdWJDbGFzcykge1xuICAvLyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHN1cGVyQ2xhc3MucHJvdG90eXBlLCAnY29uc3RydWN0b3InKVxuICAvLyB7dmFsdWU6IMaSLCB3cml0YWJsZTogdHJ1ZSwgZW51bWVyYWJsZTogZmFsc2UsIGNvbmZpZ3VyYWJsZTogdHJ1ZX1cbiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSwge1xuICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICAvLyBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IHN1YkNsYXNzLFxuICAgIH0sXG4gIH0pO1xufVxuXG4vKipcbiAqIFBvbHlmaWxscyBDdXN0b20gRWxlbWVudHMgdjEgQVBJLiBUaGlzIGhhcyA0IG1vZGVzOlxuICpcbiAqIDEuIEN1c3RvbSBlbGVtZW50cyB2MSBhbHJlYWR5IHN1cHBvcnRlZCwgdXNpbmcgbmF0aXZlIGNsYXNzZXNcbiAqIDIuIEN1c3RvbSBlbGVtZW50cyB2MSBhbHJlYWR5IHN1cHBvcnRlZCwgdXNpbmcgdHJhbnNwaWxlZCBjbGFzc2VzXG4gKiAzLiBDdXN0b20gZWxlbWVudHMgdjEgbm90IHN1cHBvcnRlZCwgdXNpbmcgbmF0aXZlIGNsYXNzZXNcbiAqIDQuIEN1c3RvbSBlbGVtZW50cyB2MSBub3Qgc3VwcG9ydGVkLCB1c2luZyB0cmFuc3BpbGVkIGNsYXNzZXNcbiAqXG4gKiBJbiBtb2RlIDEsIG5vdGhpbmcgaXMgZG9uZS4gSW4gbW9kZSAyLCBhIG1pbmltYWwgcG9seWZpbGwgaXMgdXNlZCB0byBzdXBwb3J0XG4gKiBleHRlbmRpbmcgdGhlIEhUTUxFbGVtZW50IGJhc2UgY2xhc3MuIEluIG1vZGUgMyBhbmQgNCwgYSBmdWxsIHBvbHlmaWxsIGlzXG4gKiBkb25lLlxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0geyFGdW5jdGlvbn0gY3RvclxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbCh3aW4sIGN0b3IpIHtcbiAgaWYgKGlzUGF0Y2hlZCh3aW4pKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbGV0IGluc3RhbGwgPSB0cnVlO1xuICBsZXQgaW5zdGFsbFdyYXBwZXIgPSBmYWxzZTtcblxuICBpZiAoaGFzQ3VzdG9tRWxlbWVudHMod2luKSkge1xuICAgIC8vIElmIGN0b3IgaXMgY29uc3RydWN0YWJsZSB3aXRob3V0IG5ldywgaXQncyBhIGZ1bmN0aW9uLiBUaGF0IG1lYW5zIGl0IHdhc1xuICAgIC8vIGNvbXBpbGVkIGRvd24sIGFuZCB3ZSBuZWVkIHRvIGRvIHRoZSBtaW5pbWFsIHBvbHlmaWxsIGJlY2F1c2UgYWxsIHlvdVxuICAgIC8vIGNhbm5vdCBleHRlbmQgSFRNTEVsZW1lbnQgd2l0aG91dCBuYXRpdmUgY2xhc3Nlcy5cbiAgICB0cnkge1xuICAgICAgY29uc3Qge09iamVjdCwgUmVmbGVjdH0gPSB3aW47XG5cbiAgICAgIC8vIFwiQ29uc3RydWN0XCIgY3RvciB1c2luZyBFUzUgaWRpb21zXG4gICAgICBjb25zdCBpbnN0YW5jZSA9IE9iamVjdC5jcmVhdGUoY3Rvci5wcm90b3R5cGUpO1xuICAgICAgY3Rvci5jYWxsKGluc3RhbmNlKTtcblxuICAgICAgLy8gSWYgdGhhdCBzdWNjZWVkZWQsIHdlJ3JlIGluIGEgdHJhbnNwaWxlZCBlbnZpcm9ubWVudFxuICAgICAgLy8gTGV0J3MgZmluZCBvdXQgaWYgd2UgY2FuIHdyYXAgSFRNTEVsZW1lbnQgYW5kIGF2b2lkIGEgZnVsbCBwYXRjaC5cbiAgICAgIGluc3RhbGxXcmFwcGVyID0gISEoUmVmbGVjdCAmJiBSZWZsZWN0LmNvbnN0cnVjdCk7XG4gICAgfSBjYXRjaCAoZSkge1xuXG4gICAgICAvLyBUaGUgY3RvciB0aHJldyB3aGVuIHdlIGNvbnN0cnVjdGVkIGlzIHZpYSBFUzUsIHNvIGl0J3MgYSByZWFsIGNsYXNzLlxuICAgICAgLy8gV2UncmUgb2sgdG8gbm90IGluc3RhbGwgdGhlIHBvbHlmaWxsLlxuICAgICAgaW5zdGFsbCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGlmIChpbnN0YWxsV3JhcHBlcikge1xuICAgIHdyYXBIVE1MRWxlbWVudCh3aW4pO1xuICB9IGVsc2UgaWYgKGluc3RhbGwpIHtcbiAgICBwb2x5ZmlsbCh3aW4pO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuXG4vKipcbiAqIFBvbHlmaWxsIGZvciBgZG9jdW1lbnQuY29udGFpbnMoKWAgbWV0aG9kLiBOb3RpY2UgdGhhdCBhY2NvcmRpbmcgdG8gc3BlY1xuICogYGRvY3VtZW50LmNvbnRhaW5zYCBpcyBpbmNsdXNpb25hcnkuXG4gKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL05vZGUvY29udGFpbnNcbiAqIEBwYXJhbSB7P05vZGV9IG5vZGVcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiBAdGhpcyB7Tm9kZX1cbiAqL1xuZnVuY3Rpb24gZG9jdW1lbnRDb250YWluc1BvbHlmaWxsKG5vZGUpIHtcbiAgLy8gUGVyIHNwZWMsIFwiY29udGFpbnNcIiBtZXRob2QgaXMgaW5jbHVzaW9uYXJ5XG4gIC8vIGkuZS4gYG5vZGUuY29udGFpbnMobm9kZSkgPT0gdHJ1ZWAuIEhvd2V2ZXIsIHdlIHN0aWxsIG5lZWQgdG8gdGVzdFxuICAvLyBlcXVhbGl0eSB0byB0aGUgZG9jdW1lbnQgaXRzZWxmLlxuICByZXR1cm4gbm9kZSA9PSB0aGlzIHx8IHRoaXMuZG9jdW1lbnRFbGVtZW50LmNvbnRhaW5zKG5vZGUpO1xufVxuXG5cbi8qKlxuICogUG9seWZpbGxzIGBIVE1MRG9jdW1lbnQuY29udGFpbnNgIEFQSS5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsKHdpbikge1xuICAvLyBIVE1MRG9jdW1lbnQgaXMgdW5kZWZpbmVkIGluIEludGVybmV0IEV4cGxvcmVyIDEwLCBidXQgaXQgaGFzIERvY3VtZW50LFxuICAvLyBzbyB3ZSB1c2UgdGhhdCBhcyBhIGZhbGxiYWNrLlxuICBjb25zdCBkb2N1bWVudENsYXNzID0gd2luLkhUTUxEb2N1bWVudCB8fCB3aW4uRG9jdW1lbnQ7XG4gIGlmICghZG9jdW1lbnRDbGFzcy5wcm90b3R5cGUuY29udGFpbnMpIHtcbiAgICB3aW4uT2JqZWN0LmRlZmluZVByb3BlcnR5KGRvY3VtZW50Q2xhc3MucHJvdG90eXBlLCAnY29udGFpbnMnLCB7XG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IGRvY3VtZW50Q29udGFpbnNQb2x5ZmlsbCxcbiAgICB9KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cblxuLyoqXG4gKiBQb2x5ZmlsbCBmb3IgYERPTVRva2VuTGlzdC5wcm90b3R5cGUudG9nZ2xlKHRva2VuLCBvcHRfZm9yY2UpYCBtZXRob2QuIFRoaXNcbiAqIGlzIHNwZWNpYWxseSBpbXBvcnRhbnQgYmVjYXVzZSBJRSBkb2VzIG5vdCBzdXBwb3J0IGBvcHRfZm9yY2VgIGF0dHJpYnV0ZS4gU2VlXG4gKiBodHRwczovL2dvby5nbC9oZ0tOWVkgZm9yIGRldGFpbHMuXG4gKiBAcGFyYW0ge3N0cmluZ30gdG9rZW5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9mb3JjZVxuICogQHRoaXMge0RPTVRva2VuTGlzdH1cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGRvbVRva2VuTGlzdFRvZ2dsZVBvbHlmaWxsKHRva2VuLCBvcHRfZm9yY2UpIHtcbiAgY29uc3QgcmVtb3ZlID0gb3B0X2ZvcmNlID09PSB1bmRlZmluZWQgPyB0aGlzLmNvbnRhaW5zKHRva2VuKSA6ICFvcHRfZm9yY2U7XG4gIGlmIChyZW1vdmUpIHtcbiAgICB0aGlzLnJlbW92ZSh0b2tlbik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuYWRkKHRva2VuKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuXG5cbi8qKlxuICogUG9seWZpbGxzIGBET01Ub2tlbkxpc3QucHJvdG90eXBlLnRvZ2dsZWAgQVBJIGluIElFLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluc3RhbGwod2luKSB7XG4gIGlmIChpc0llKHdpbikgJiYgd2luLkRPTVRva2VuTGlzdCkge1xuICAgIHdpbi5PYmplY3QuZGVmaW5lUHJvcGVydHkod2luLkRPTVRva2VuTGlzdC5wcm90b3R5cGUsICd0b2dnbGUnLCB7XG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IGRvbVRva2VuTGlzdFRvZ2dsZVBvbHlmaWxsLFxuICAgIH0pO1xuICB9XG59XG5cblxuLyoqXG4gKiBXaGV0aGVyIHRoZSBjdXJyZW50IGJyb3dzZXIgaXMgYSBJRSBicm93c2VyLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzSWUod2luKSB7XG4gIHJldHVybiAvVHJpZGVudHxNU0lFfElFTW9iaWxlL2kudGVzdCh3aW4ubmF2aWdhdG9yLnVzZXJBZ2VudCk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBQYXJzZXMgdGhlIG51bWJlciB4IGFuZCByZXR1cm5zIGl0cyBzaWduLiBGb3IgcG9zaXRpdmUgeCByZXR1cm5zIDEsIGZvclxuICogbmVnYXRpdmUsIC0xLiBGb3IgMCBhbmQgLTAsIHJldHVybnMgMCBhbmQgLTAgcmVzcGVjdGl2ZWx5LiBGb3IgYW55IG51bWJlclxuICogdGhhdCBwYXJzZXMgdG8gTmFOLCByZXR1cm5zIE5hTi5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0geFxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2lnbih4KSB7XG4gIHggPSBOdW1iZXIoeCk7XG5cbiAgLy8gSWYgeCBpcyAwLCAtMCwgb3IgTmFOLCByZXR1cm4gaXQuXG4gIGlmICgheCkge1xuICAgIHJldHVybiB4O1xuICB9XG5cbiAgcmV0dXJuIHggPiAwID8gMSA6IC0xO1xufVxuXG5cbi8qKlxuICogU2V0cyB0aGUgTWF0aC5zaWduIHBvbHlmaWxsIGlmIGl0IGRvZXMgbm90IGV4aXN0LlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluc3RhbGwod2luKSB7XG4gIGlmICghd2luLk1hdGguc2lnbikge1xuICAgIHdpbi5PYmplY3QuZGVmaW5lUHJvcGVydHkod2luLk1hdGgsICdzaWduJywge1xuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBzaWduLFxuICAgIH0pO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuY29uc3Qge2hhc093blByb3BlcnR5fSA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKlxuICogQ29waWVzIHZhbHVlcyBvZiBhbGwgZW51bWVyYWJsZSBvd24gcHJvcGVydGllcyBmcm9tIG9uZSBvciBtb3JlIHNvdXJjZVxuICogb2JqZWN0cyAocHJvdmlkZWQgYXMgZXh0ZW5kZWQgYXJndW1lbnRzIHRvIHRoZSBmdW5jdGlvbikgdG8gYSB0YXJnZXQgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7IU9iamVjdH0gdGFyZ2V0XG4gKiBAcGFyYW0gey4uLk9iamVjdH0gdmFyX2FyZ3NcbiAqIEByZXR1cm4geyFPYmplY3R9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NpZ24odGFyZ2V0LCB2YXJfYXJncykge1xuICBpZiAodGFyZ2V0ID09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3QnKTtcbiAgfVxuXG4gIGNvbnN0IG91dHB1dCA9IE9iamVjdCh0YXJnZXQpO1xuICBmb3IgKGxldCBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtcbiAgICBpZiAoc291cmNlICE9IG51bGwpIHtcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHNvdXJjZSkge1xuICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgICBvdXRwdXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBvdXRwdXQ7XG59XG5cblxuLyoqXG4gKiBTZXRzIHRoZSBPYmplY3QuYXNzaWduIHBvbHlmaWxsIGlmIGl0IGRvZXMgbm90IGV4aXN0LlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluc3RhbGwod2luKSB7XG4gIGlmICghd2luLk9iamVjdC5hc3NpZ24pIHtcbiAgICB3aW4uT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbi5PYmplY3QsICdhc3NpZ24nLCB7XG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IGFzc2lnbixcbiAgICB9KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cblxuaW1wb3J0ICogYXMgUHJvbWlzZSBmcm9tICdwcm9taXNlLXBqcy9wcm9taXNlJztcblxuLyoqXG4gKiBTZXRzIHRoZSBQcm9taXNlIHBvbHlmaWxsIGlmIGl0IGRvZXMgbm90IGV4aXN0LlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluc3RhbGwod2luKSB7XG4gIGlmICghd2luLlByb21pc2UpIHtcbiAgICB3aW4uUHJvbWlzZSA9IC8qKiBAdHlwZSB7P30gKi8gKFByb21pc2UpO1xuICAgIC8vIEluIGJhYmVsIHRoZSAqIGV4cG9ydCBpcyBhbiBPYmplY3Qgd2l0aCBhIGRlZmF1bHQgcHJvcGVydHkuXG4gICAgLy8gSW4gY2xvc3VyZSBjb21waWxlciBpdCBpcyB0aGUgUHJvbWlzZSBmdW5jdGlvbiBpdHNlbGYuXG4gICAgaWYgKFByb21pc2UuZGVmYXVsdCkge1xuICAgICAgd2luLlByb21pc2UgPSBQcm9taXNlLmRlZmF1bHQ7XG4gICAgfVxuICAgIC8vIFdlIGNvcHkgdGhlIGluZGl2aWR1YWwgc3RhdGljIG1ldGhvZHMsIGJlY2F1c2UgY2xvc3VyZVxuICAgIC8vIGNvbXBpbGVyIGZsYXR0ZW5zIHRoZSBwb2x5ZmlsbCBuYW1lc3BhY2UuXG4gICAgd2luLlByb21pc2UucmVzb2x2ZSA9IFByb21pc2UucmVzb2x2ZTtcbiAgICB3aW4uUHJvbWlzZS5yZWplY3QgPSBQcm9taXNlLnJlamVjdDtcbiAgICB3aW4uUHJvbWlzZS5hbGwgPSBQcm9taXNlLmFsbDtcbiAgICB3aW4uUHJvbWlzZS5yYWNlID0gUHJvbWlzZS5yYWNlO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtTZXJ2aWNlc30gZnJvbSAnLi9zZXJ2aWNlcyc7XG5pbXBvcnQge2Rldn0gZnJvbSAnLi9sb2cnO1xuaW1wb3J0IHtnZXRTZXJ2aWNlUHJvbWlzZX0gZnJvbSAnLi9zZXJ2aWNlJztcblxuLyoqXG4gKiBBIG1hcCBvZiBzZXJ2aWNlcyB0aGF0IGRlbGF5IHJlbmRlcmluZy4gVGhlIGtleSBpcyB0aGUgbmFtZSBvZiB0aGUgc2VydmljZVxuICogYW5kIHRoZSB2YWx1ZSBpcyBhIERPTSBxdWVyeSB3aGljaCBpcyB1c2VkIHRvIGNoZWNrIGlmIHRoZSBzZXJ2aWNlIGlzIG5lZWRlZFxuICogaW4gdGhlIGN1cnJlbnQgZG9jdW1lbnQuXG4gKiBEbyBub3QgYWRkIGEgc2VydmljZSB1bmxlc3MgYWJzb2x1dGVseSBuZWNlc3NhcnkuXG4gKlxuICogXFwgICBcXCAgLyAgXFwgIC8gICAvIC8gICBcXCAgICAgfCAgIF8gIFxcICAgICB8ICBcXCB8ICB8IHwgIHwgfCAgXFwgfCAgfCAgLyBfX19fX3xcbiAqICBcXCAgIFxcLyAgICBcXC8gICAvIC8gIF4gIFxcICAgIHwgIHxfKSAgfCAgICB8ICAgXFx8ICB8IHwgIHwgfCAgIFxcfCAgfCB8ICB8ICBfX1xuICogICBcXCAgICAgICAgICAgIC8gLyAgL19cXCAgXFwgICB8ICAgICAgLyAgICAgfCAgLiBgICB8IHwgIHwgfCAgLiBgICB8IHwgIHwgfF8gfFxuICogICAgXFwgICAgL1xcICAgIC8gLyAgX19fX18gIFxcICB8ICB8XFwgIFxcLS0tLS58ICB8XFwgICB8IHwgIHwgfCAgfFxcICAgfCB8ICB8X198IHxcbiAqICAgICBcXF9fLyAgXFxfXy8gL19fLyAgICAgXFxfX1xcIHwgX3wgYC5fX19fX3x8X198IFxcX198IHxfX3wgfF9ffCBcXF9ffCAgXFxfX19fX198XG4gKlxuICogVGhlIGVxdWl2YWxlbnQgb2YgdGhpcyBsaXN0IGlzIHVzZWQgZm9yIHNlcnZlci1zaWRlIHJlbmRlcmluZyAoU1NSKSBhbmQgYW55XG4gKiBjaGFuZ2VzIG1hZGUgdG8gaXQgbXVzdCBiZSBtYWRlIGluIGNvb3JkaW5hdGlvbiB3aXRoIGNhY2hlcyB0aGF0IGltcGxlbWVudFxuICogU1NSLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiBTU1Igc2VlIGJpdC5seS9hbXAtc3NyLlxuICpcbiAqIEBjb25zdCB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz59XG4gKi9cbmNvbnN0IFNFUlZJQ0VTID0ge1xuICAnYW1wLWR5bmFtaWMtY3NzLWNsYXNzZXMnOiAnW2N1c3RvbS1lbGVtZW50PWFtcC1keW5hbWljLWNzcy1jbGFzc2VzXScsXG4gICd2YXJpYW50JzogJ2FtcC1leHBlcmltZW50JyxcbiAgJ2FtcC1zdG9yeSc6ICdhbXAtc3Rvcnlbc3RhbmRhbG9uZV0nLFxufTtcblxuLyoqXG4gKiBNYXhpbXVtIG1pbGxpc2Vjb25kcyB0byB3YWl0IGZvciBhbGwgZXh0ZW5zaW9ucyB0byBsb2FkIGJlZm9yZSBlcnJvcmluZy5cbiAqIEBjb25zdFxuICovXG5jb25zdCBMT0FEX1RJTUVPVVQgPSAzMDAwO1xuXG4vKipcbiAqIERldGVjdHMgYW55IHJlbmRlciBkZWxheWluZyBzZXJ2aWNlcyB0aGF0IGFyZSByZXF1aXJlZCBvbiB0aGUgcGFnZSwgYW5kXG4gKiByZXR1cm5zIGEgcHJvbWlzZSB3aXRoIGEgdGltZW91dC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHshUHJvbWlzZTwhQXJyYXk8Kj4+fSByZXNvbHZlcyB0byBhbiBBcnJheSB0aGF0IGhhcyB0aGUgc2FtZSBsZW5ndGhcbiAqICAgICBhcyB0aGUgZGV0ZWN0ZWQgcmVuZGVyIGRlbGF5aW5nIHNlcnZpY2VzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3YWl0Rm9yU2VydmljZXMod2luKSB7XG4gIGNvbnN0IHByb21pc2VzID0gaW5jbHVkZWRTZXJ2aWNlcyh3aW4pLm1hcChzZXJ2aWNlID0+IHtcbiAgICByZXR1cm4gU2VydmljZXMudGltZXJGb3Iod2luKS50aW1lb3V0UHJvbWlzZShcbiAgICAgICAgTE9BRF9USU1FT1VULFxuICAgICAgICBnZXRTZXJ2aWNlUHJvbWlzZSh3aW4sIHNlcnZpY2UpLFxuICAgICAgICBgUmVuZGVyIHRpbWVvdXQgd2FpdGluZyBmb3Igc2VydmljZSAke3NlcnZpY2V9IHRvIGJlIHJlYWR5LmBcbiAgICApO1xuICB9KTtcbiAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHBhZ2UgaGFzIGEgcmVuZGVyIGRlbGF5aW5nIHNlcnZpY2UuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc1JlbmRlckRlbGF5aW5nU2VydmljZXMod2luKSB7XG4gIHJldHVybiBpbmNsdWRlZFNlcnZpY2VzKHdpbikubGVuZ3RoID4gMDtcbn1cblxuLyoqXG4gKiBEZXRlY3RzIHdoaWNoLCBpZiBhbnksIHJlbmRlci1kZWxheWluZyBleHRlbnNpb25zIGFyZSBpbmNsdWRlZCBvbiB0aGUgcGFnZS5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHshQXJyYXk8c3RyaW5nPn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluY2x1ZGVkU2VydmljZXMod2luKSB7XG4gIC8qKiBAY29uc3QgeyFEb2N1bWVudH0gKi9cbiAgY29uc3QgZG9jID0gd2luLmRvY3VtZW50O1xuICBkZXYoKS5hc3NlcnQoZG9jLmJvZHkpO1xuXG4gIHJldHVybiBPYmplY3Qua2V5cyhTRVJWSUNFUykuZmlsdGVyKHNlcnZpY2UgPT4ge1xuICAgIHJldHVybiBkb2MucXVlcnlTZWxlY3RvcihTRVJWSUNFU1tzZXJ2aWNlXSk7XG4gIH0pO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBSZWdpc3RyYXRpb24gYW5kIGdldHRlciBmdW5jdGlvbnMgZm9yIEFNUCBzZXJ2aWNlcy5cbiAqXG4gKiBJbnZhcmlhbnQ6IFNlcnZpY2UgZ2V0dGVycyBuZXZlciByZXR1cm4gbnVsbCBmb3IgcmVnaXN0ZXJlZCBzZXJ2aWNlcy5cbiAqL1xuXG4vLyBzcmMvcG9seWZpbGxzLmpzIG11c3QgYmUgdGhlIGZpcnN0IGltcG9ydC5cbmltcG9ydCAnLi9wb2x5ZmlsbHMnOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHNvcnQtaW1wb3J0cy1lczYtYXV0b2ZpeC9zb3J0LWltcG9ydHMtZXM2XG5cbmltcG9ydCB7RGVmZXJyZWR9IGZyb20gJy4vdXRpbHMvcHJvbWlzZSc7XG5pbXBvcnQge2Rldn0gZnJvbSAnLi9sb2cnO1xuaW1wb3J0IHt0b1dpbn0gZnJvbSAnLi90eXBlcyc7XG5cblxuLyoqXG4gKiBIb2xkcyBpbmZvIGFib3V0IGEgc2VydmljZS5cbiAqIC0gb2JqOiBBY3R1YWwgc2VydmljZSBpbXBsZW1lbnRhdGlvbiB3aGVuIGF2YWlsYWJsZS5cbiAqIC0gcHJvbWlzZTogUHJvbWlzZSBmb3IgdGhlIG9iai5cbiAqIC0gcmVzb2x2ZTogRnVuY3Rpb24gdG8gcmVzb2x2ZSB0aGUgcHJvbWlzZSB3aXRoIHRoZSBvYmplY3QuXG4gKiAtIGNvbnRleHQ6IEFyZ3VtZW50IGZvciBjdG9yLCBlaXRoZXIgYSB3aW5kb3cgb3IgYW4gYW1wZG9jLlxuICogLSBjdG9yOiBGdW5jdGlvbiB0aGF0IGNvbnN0cnVjdHMgYW5kIHJldHVybnMgdGhlIHNlcnZpY2UuXG4gKiBAdHlwZWRlZiB7e1xuICogICBvYmo6ICg/T2JqZWN0KSxcbiAqICAgcHJvbWlzZTogKD9Qcm9taXNlKSxcbiAqICAgcmVzb2x2ZTogKD9mdW5jdGlvbighT2JqZWN0KSksXG4gKiAgIGNvbnRleHQ6ICg/V2luZG93fD8uL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jKSxcbiAqICAgY3RvcjogKD9mdW5jdGlvbihuZXc6T2JqZWN0LCAhV2luZG93KXxcbiAqICAgICAgICAgID9mdW5jdGlvbihuZXc6T2JqZWN0LCAhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvYykpLFxuICogfX1cbiAqL1xubGV0IFNlcnZpY2VIb2xkZXJEZWY7XG5cblxuLyoqXG4gKiBUaGlzIGludGVyZmFjZSBwcm92aWRlcyBhIGBkaXNwb3NlYCBtZXRob2QgdGhhdCB3aWxsIGJlIGNhbGxlZCBieVxuICogcnVudGltZSB3aGVuIGEgc2VydmljZSBuZWVkcyB0byBiZSBkaXNwb3NlZCBvZi5cbiAqIEBpbnRlcmZhY2VcbiAqL1xuZXhwb3J0IGNsYXNzIERpc3Bvc2FibGUge1xuXG4gIC8qKlxuICAgKiBJbnN0cnVjdHMgdGhlIHNlcnZpY2UgdG8gcmVsZWFzZSBhbnkgcmVzb3VyY2VzIGl0IG1pZ2h0IGJlIGhvbGRpbmcuIENhblxuICAgKiBiZSBjYWxsZWQgb25seSBvbmNlIGluIHRoZSBsaWZlY3ljbGUgb2YgYSBzZXJ2aWNlLlxuICAgKi9cbiAgZGlzcG9zZSgpIHt9XG59XG5cblxuLyoqXG4gKiBUaGlzIGludGVyZmFjZSBwcm92aWRlcyBhIGBhZG9wdEVtYmVkV2luZG93YCBtZXRob2QgdGhhdCB3aWxsIGJlIGNhbGxlZCBieVxuICogcnVudGltZSBmb3IgYSBuZXcgZW1iZWQgd2luZG93LlxuICogQGludGVyZmFjZVxuICovXG5leHBvcnQgY2xhc3MgRW1iZWRkYWJsZVNlcnZpY2Uge1xuXG4gIC8qKlxuICAgKiBJbnN0cnVjdHMgdGhlIHNlcnZpY2UgdG8gYWRvcHQgdGhlIGVtYmVkIHdpbmRvdyBhbmQgYWRkIGFueSBuZWNlc3NhcnlcbiAgICogbGlzdGVuZXJzIGFuZCByZXNvdXJjZXMuXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gdW51c2VkRW1iZWRXaW5cbiAgICovXG4gIGFkb3B0RW1iZWRXaW5kb3codW51c2VkRW1iZWRXaW4pIHt9XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIGEgc2VydmljZSB3aXRoIHRoZSBnaXZlbiBpZC4gQXNzdW1lcyB0aGF0IGl0IGhhcyBiZWVuIHJlZ2lzdGVyZWRcbiAqIGFscmVhZHkuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfZmFsbGJhY2tUb1RvcFdpblxuICogQHJldHVybiB7T2JqZWN0fSBUaGUgc2VydmljZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEV4aXN0aW5nU2VydmljZUluRW1iZWRTY29wZSh3aW4sIGlkLCBvcHRfZmFsbGJhY2tUb1RvcFdpbikge1xuICAvLyBGaXJzdCwgdHJ5IHRvIHJlc29sdmUgdmlhIGxvY2FsIChlbWJlZCkgd2luZG93LlxuICBjb25zdCBsb2NhbCA9IGdldExvY2FsRXhpc3RpbmdTZXJ2aWNlRm9yRW1iZWRXaW5Pck51bGwod2luLCBpZCk7XG4gIGlmIChsb2NhbCkge1xuICAgIHJldHVybiBsb2NhbDtcbiAgfVxuICBpZiAob3B0X2ZhbGxiYWNrVG9Ub3BXaW4pIHtcbiAgICByZXR1cm4gZ2V0U2VydmljZSh3aW4sIGlkKTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc2VydmljZSB3aXRoIHRoZSBnaXZlbiBpZC4gQXNzdW1lcyB0aGF0IGl0IGhhcyBiZWVuIGNvbnN0cnVjdGVkXG4gKiBhbHJlYWR5LlxuICpcbiAqIFVubGlrZSBtb3N0IHNlcnZpY2UgZ2V0dGVycywgcGFzc2luZyBgTm9kZWAgaXMgbmVjZXNzYXJ5IGZvciBzb21lIEZJRS1zY29wZVxuICogc2VydmljZXMgc2luY2Ugc29tZXRpbWVzIHdlIG9ubHkgaGF2ZSB0aGUgRklFIERvY3VtZW50IGZvciBjb250ZXh0LlxuICpcbiAqIEBwYXJhbSB7IU5vZGV8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IG5vZGVPckRvY1xuICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfZmFsbGJhY2tUb1RvcFdpblxuICogQHJldHVybiB7T2JqZWN0fSBUaGUgc2VydmljZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEV4aXN0aW5nU2VydmljZUZvckRvY0luRW1iZWRTY29wZShcbiAgbm9kZU9yRG9jLCBpZCwgb3B0X2ZhbGxiYWNrVG9Ub3BXaW4pIHtcbiAgLy8gRmlyc3QsIHRyeSB0byByZXNvbHZlIHZpYSBsb2NhbCAoZW1iZWQpIHdpbmRvdy5cbiAgaWYgKG5vZGVPckRvYy5ub2RlVHlwZSkge1xuICAgIC8vIElmIGEgbm9kZSBpcyBwYXNzZWQsIHRyeSB0byByZXNvbHZlIHZpYSB0aGlzIG5vZGUuXG4gICAgY29uc3Qgd2luID0gdG9XaW4oLyoqIEB0eXBlIHshRG9jdW1lbnR9ICovIChcbiAgICAgIG5vZGVPckRvYy5vd25lckRvY3VtZW50IHx8IG5vZGVPckRvYykuZGVmYXVsdFZpZXcpO1xuICAgIGNvbnN0IGxvY2FsID0gZ2V0TG9jYWxFeGlzdGluZ1NlcnZpY2VGb3JFbWJlZFdpbk9yTnVsbCh3aW4sIGlkKTtcbiAgICBpZiAobG9jYWwpIHtcbiAgICAgIHJldHVybiBsb2NhbDtcbiAgICB9XG4gIH1cbiAgLy8gSWYgYW4gYW1wZG9jIGlzIHBhc3NlZCBvciBmYWxsYmFjayBpcyBhbGxvd2VkLCBjb250aW51ZSByZXNvbHZpbmcuXG4gIGlmICghbm9kZU9yRG9jLm5vZGVUeXBlIHx8IG9wdF9mYWxsYmFja1RvVG9wV2luKSB7XG4gICAgcmV0dXJuIGdldFNlcnZpY2VGb3JEb2NEZXByZWNhdGVkKG5vZGVPckRvYywgaWQpO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIEluc3RhbGxzIGEgc2VydmljZSBvdmVycmlkZSBvbiBhbXAtZG9jIGxldmVsLlxuICogQHBhcmFtIHshV2luZG93fSBlbWJlZFdpblxuICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gKiBAcGFyYW0geyFPYmplY3R9IHNlcnZpY2UgVGhlIHNlcnZpY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsU2VydmljZUluRW1iZWRTY29wZShlbWJlZFdpbiwgaWQsIHNlcnZpY2UpIHtcbiAgY29uc3QgdG9wV2luID0gZ2V0VG9wV2luZG93KGVtYmVkV2luKTtcbiAgZGV2KCkuYXNzZXJ0KGVtYmVkV2luICE9IHRvcFdpbixcbiAgICAgICdTZXJ2aWNlIG92ZXJyaWRlIGNhbiBvbmx5IGJlIGluc3RhbGxlZCBpbiBlbWJlZCB3aW5kb3c6ICVzJywgaWQpO1xuICBkZXYoKS5hc3NlcnQoIWdldExvY2FsRXhpc3RpbmdTZXJ2aWNlRm9yRW1iZWRXaW5Pck51bGwoZW1iZWRXaW4sIGlkKSxcbiAgICAgICdTZXJ2aWNlIG92ZXJyaWRlIGhhcyBhbHJlYWR5IGJlZW4gaW5zdGFsbGVkOiAlcycsIGlkKTtcbiAgcmVnaXN0ZXJTZXJ2aWNlSW50ZXJuYWwoZW1iZWRXaW4sIGVtYmVkV2luLCBpZCwgKCkgPT4gc2VydmljZSk7XG4gIGdldFNlcnZpY2VJbnRlcm5hbChlbWJlZFdpbiwgaWQpOyAvLyBGb3JjZSBzZXJ2aWNlIHRvIGJ1aWxkLlxufVxuXG4vKipcbiAqIEBwYXJhbSB7IVdpbmRvd30gZW1iZWRXaW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICogQHJldHVybiB7P09iamVjdH1cbiAqL1xuZnVuY3Rpb24gZ2V0TG9jYWxFeGlzdGluZ1NlcnZpY2VGb3JFbWJlZFdpbk9yTnVsbChlbWJlZFdpbiwgaWQpIHtcbiAgLy8gTm90ZSB0aGF0IHRoaXMgbWV0aG9kIGN1cnJlbnRseSBvbmx5IHJlc29sdmVzIGFnYWluc3QgdGhlIGdpdmVuIHdpbmRvdy5cbiAgLy8gSXQgZG9lcyBub3QgdHJ5IHRvIGdvIGFsbCB0aGUgd2F5IHVwIHRoZSBwYXJlbnQgd2luZG93IGNoYWluLiBXZSBjYW4gY2hhbmdlXG4gIC8vIHRoaXMgaW4gdGhlIGZ1dHVyZSwgYnV0IGZvciBub3cgdGhpcyBnaXZlcyB1cyBhIGJldHRlciBwZXJmb3JtYW5jZS5cbiAgY29uc3QgdG9wV2luID0gZ2V0VG9wV2luZG93KGVtYmVkV2luKTtcbiAgaWYgKGVtYmVkV2luICE9IHRvcFdpbiAmJiBpc1NlcnZpY2VSZWdpc3RlcmVkKGVtYmVkV2luLCBpZCkpIHtcbiAgICByZXR1cm4gZ2V0U2VydmljZUludGVybmFsKGVtYmVkV2luLCBpZCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgYSBzZXJ2aWNlIGdpdmVuIGEgY2xhc3MgdG8gYmUgdXNlZCBhcyBpbXBsZW1lbnRhdGlvbi5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKG5ldzpPYmplY3QsICFXaW5kb3cpfSBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luc3RhbnRpYXRlIFdoZXRoZXIgdG8gaW1tZWRpYXRlbHkgY3JlYXRlIHRoZSBzZXJ2aWNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclNlcnZpY2VCdWlsZGVyKHdpbixcbiAgaWQsXG4gIGNvbnN0cnVjdG9yLFxuICBvcHRfaW5zdGFudGlhdGUpIHtcbiAgd2luID0gZ2V0VG9wV2luZG93KHdpbik7XG4gIHJlZ2lzdGVyU2VydmljZUludGVybmFsKHdpbiwgd2luLCBpZCwgY29uc3RydWN0b3IpO1xuICBpZiAob3B0X2luc3RhbnRpYXRlKSB7XG4gICAgZ2V0U2VydmljZUludGVybmFsKHdpbiwgaWQpO1xuICB9XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIGEgc2VydmljZSBhbmQgcmVnaXN0ZXJzIGl0IGdpdmVuIGEgY2xhc3MgdG8gYmUgdXNlZCBhc1xuICogaW1wbGVtZW50YXRpb24uXG4gKiBAcGFyYW0geyFOb2RlfCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBub2RlT3JEb2NcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBvZiB0aGUgc2VydmljZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24obmV3Ok9iamVjdCwgIS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2MpfSBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luc3RhbnRpYXRlIFdoZXRoZXIgdG8gaW1tZWRpYXRlbHkgY3JlYXRlIHRoZSBzZXJ2aWNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclNlcnZpY2VCdWlsZGVyRm9yRG9jKG5vZGVPckRvYyxcbiAgaWQsXG4gIGNvbnN0cnVjdG9yLFxuICBvcHRfaW5zdGFudGlhdGUpIHtcbiAgY29uc3QgYW1wZG9jID0gZ2V0QW1wZG9jKG5vZGVPckRvYyk7XG4gIGNvbnN0IGhvbGRlciA9IGdldEFtcGRvY1NlcnZpY2VIb2xkZXIoYW1wZG9jKTtcbiAgcmVnaXN0ZXJTZXJ2aWNlSW50ZXJuYWwoaG9sZGVyLCBhbXBkb2MsIGlkLCBjb25zdHJ1Y3Rvcik7XG4gIGlmIChvcHRfaW5zdGFudGlhdGUpIHtcbiAgICBnZXRTZXJ2aWNlSW50ZXJuYWwoaG9sZGVyLCBpZCk7XG4gIH1cbn1cblxuXG4vKipcbiAqIFJldHVybnMgYSBzZXJ2aWNlIGZvciB0aGUgZ2l2ZW4gaWQgYW5kIHdpbmRvdyAoYSBwZXItd2luZG93IHNpbmdsZXRvbikuIFVzZXJzXG4gKiBzaG91bGQgdHlwaWNhbGx5IHdyYXAgdGhpcyBhcyBhIHNwZWNpYWwgcHVycG9zZSBmdW5jdGlvbiAoZS5nLlxuICogYFNlcnZpY2VzLnZzeW5jRm9yKHdpbilgKSBmb3IgdHlwZSBzYWZldHkgYW5kIGJlY2F1c2UgdGhlIGZhY3Rvcnkgc2hvdWxkIG5vdFxuICogYmUgcGFzc2VkIGFyb3VuZC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKiBAdGVtcGxhdGUgVFxuICogQHJldHVybiB7VH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNlcnZpY2Uod2luLCBpZCkge1xuICB3aW4gPSBnZXRUb3BXaW5kb3cod2luKTtcbiAgcmV0dXJuIGdldFNlcnZpY2VJbnRlcm5hbCh3aW4sIGlkKTtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIGZvciBhIHNlcnZpY2UgZm9yIHRoZSBnaXZlbiBpZCBhbmQgd2luZG93LiBBbHNvIGV4cGVjdHMgYW5cbiAqIGVsZW1lbnQgdGhhdCBoYXMgdGhlIGFjdHVhbCBpbXBsZW1lbnRhdGlvbi4gVGhlIHByb21pc2UgcmVzb2x2ZXMgd2hlbiB0aGVcbiAqIGltcGxlbWVudGF0aW9uIGxvYWRlZC4gVXNlcnMgc2hvdWxkIHR5cGljYWxseSB3cmFwIHRoaXMgYXMgYSBzcGVjaWFsIHB1cnBvc2VcbiAqIGZ1bmN0aW9uIChlLmcuIGBTZXJ2aWNlcy52c3luY0Zvcih3aW4pYCkgZm9yIHR5cGUgc2FmZXR5IGFuZCBiZWNhdXNlIHRoZVxuICogZmFjdG9yeSBzaG91bGQgbm90IGJlIHBhc3NlZCBhcm91bmQuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IGlkIG9mIHRoZSBzZXJ2aWNlLlxuICogQHJldHVybiB7IVByb21pc2U8IU9iamVjdD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTZXJ2aWNlUHJvbWlzZSh3aW4sIGlkKSB7XG4gIHJldHVybiBnZXRTZXJ2aWNlUHJvbWlzZUludGVybmFsKHdpbiwgaWQpO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyBhIHNlcnZpY2Ugb3IgbnVsbCB3aXRoIHRoZSBnaXZlbiBpZC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAqIEByZXR1cm4gez9PYmplY3R9IFRoZSBzZXJ2aWNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXhpc3RpbmdTZXJ2aWNlT3JOdWxsKHdpbiwgaWQpIHtcbiAgd2luID0gZ2V0VG9wV2luZG93KHdpbik7XG4gIGlmIChpc1NlcnZpY2VSZWdpc3RlcmVkKHdpbiwgaWQpKSB7XG4gICAgcmV0dXJuIGdldFNlcnZpY2VJbnRlcm5hbCh3aW4sIGlkKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5cbi8qKlxuICogTGlrZSBnZXRTZXJ2aWNlUHJvbWlzZSBidXQgcmV0dXJucyBudWxsIGlmIHRoZSBzZXJ2aWNlIHdhcyBuZXZlciByZWdpc3RlcmVkLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICogQHJldHVybiB7P1Byb21pc2U8IU9iamVjdD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTZXJ2aWNlUHJvbWlzZU9yTnVsbCh3aW4sIGlkKSB7XG4gIHJldHVybiBnZXRTZXJ2aWNlUHJvbWlzZU9yTnVsbEludGVybmFsKHdpbiwgaWQpO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyBhIHNlcnZpY2UgZm9yIHRoZSBnaXZlbiBpZCBhbmQgYW1wZG9jIChhIHBlci1hbXBkb2Mgc2luZ2xldG9uKS5cbiAqIEV4cGVjdHMgc2VydmljZSBgaWRgIHRvIGJlIHJlZ2lzdGVyZWQuXG4gKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICogQHJldHVybiB7VH1cbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTZXJ2aWNlRm9yRG9jKGVsZW1lbnRPckFtcERvYywgaWQpIHtcbiAgY29uc3QgYW1wZG9jID0gZ2V0QW1wZG9jKGVsZW1lbnRPckFtcERvYyk7XG4gIGNvbnN0IGhvbGRlciA9IGdldEFtcGRvY1NlcnZpY2VIb2xkZXIoYW1wZG9jKTtcbiAgcmV0dXJuIGdldFNlcnZpY2VJbnRlcm5hbChob2xkZXIsIGlkKTtcbn1cblxuXG4vKipcbiAqIHRsO2RyIC0tIFVzZSBnZXRTZXJ2aWNlRm9yRG9jKCkgaW5zdGVhZCBvZiB0aGlzLlxuICpcbiAqIFByaXZpbGVnZWQgdmFyaWFudCBvZiBnZXRTZXJ2aWNlRm9yRG9jKCkgdGhhdCBhY2NlcHRzIG5vbi1lbGVtZW50IHBhcmFtcyxcbiAqIGUuZy4gd2luZG93LmRvY3VtZW50LiBUaGlzIGlzIGN1cnJlbnRseSBuZWNlc3NhcnkgZm9yIGRvYy1sZXZlbCBzZXJ2aWNlc1xuICogdXNlZCBpbiBzdGFydHVwLCBlLmcuIENodW5rcy4gRXZlbnR1YWxseSB3ZSB3YW50IHRvIHJlbW92ZSB0aGlzIGZ1bmN0aW9uXG4gKiBhbmQgaGF2ZSBjYWxsZXJzIGZpbmQgdGhlIGFwcHJvcHJpYXRlIEFtcERvYyBhbmQgdXNlIGdldFNlcnZpY2VGb3JEb2MoKS5cbiAqXG4gKiBAcGFyYW0geyFOb2RlfCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBub2RlT3JEb2NcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICogQHJldHVybiB7VH1cbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTZXJ2aWNlRm9yRG9jRGVwcmVjYXRlZChub2RlT3JEb2MsIGlkKSB7XG4gIGNvbnN0IGFtcGRvYyA9IGdldEFtcGRvYyhub2RlT3JEb2MpO1xuICBjb25zdCBob2xkZXIgPSBnZXRBbXBkb2NTZXJ2aWNlSG9sZGVyKGFtcGRvYyk7XG4gIHJldHVybiBnZXRTZXJ2aWNlSW50ZXJuYWwoaG9sZGVyLCBpZCk7XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSBmb3IgYSBzZXJ2aWNlIGZvciB0aGUgZ2l2ZW4gaWQgYW5kIGFtcGRvYy4gQWxzbyBleHBlY3RzXG4gKiBhIHNlcnZpY2UgdGhhdCBoYXMgdGhlIGFjdHVhbCBpbXBsZW1lbnRhdGlvbi4gVGhlIHByb21pc2UgcmVzb2x2ZXMgd2hlblxuICogdGhlIGltcGxlbWVudGF0aW9uIGxvYWRlZC5cbiAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gKiBAcmV0dXJuIHshUHJvbWlzZTwhT2JqZWN0Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNlcnZpY2VQcm9taXNlRm9yRG9jKGVsZW1lbnRPckFtcERvYywgaWQpIHtcbiAgcmV0dXJuIGdldFNlcnZpY2VQcm9taXNlSW50ZXJuYWwoXG4gICAgICBnZXRBbXBkb2NTZXJ2aWNlSG9sZGVyKGVsZW1lbnRPckFtcERvYyksIGlkKTtcbn1cblxuXG4vKipcbiAqIExpa2UgZ2V0U2VydmljZVByb21pc2VGb3JEb2MgYnV0IHJldHVybnMgbnVsbCBpZiB0aGUgc2VydmljZSB3YXMgbmV2ZXJcbiAqIHJlZ2lzdGVyZWQgZm9yIHRoaXMgYW1wZG9jLlxuICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAqIEByZXR1cm4gez9Qcm9taXNlPCFPYmplY3Q+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VydmljZVByb21pc2VPck51bGxGb3JEb2MoZWxlbWVudE9yQW1wRG9jLCBpZCkge1xuICByZXR1cm4gZ2V0U2VydmljZVByb21pc2VPck51bGxJbnRlcm5hbChcbiAgICAgIGdldEFtcGRvY1NlcnZpY2VIb2xkZXIoZWxlbWVudE9yQW1wRG9jKSwgaWQpO1xufVxuXG4vKipcbiAqIFNldCB0aGUgcGFyZW50IGFuZCB0b3Agd2luZG93cyBvbiBhIGNoaWxkIHdpbmRvdyAoZnJpZW5kbHkgaWZyYW1lKS5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0geyFXaW5kb3d9IHBhcmVudFdpblxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0UGFyZW50V2luZG93KHdpbiwgcGFyZW50V2luKSB7XG4gIHdpbi5fX0FNUF9QQVJFTlQgPSBwYXJlbnRXaW47XG4gIHdpbi5fX0FNUF9UT1AgPSBnZXRUb3BXaW5kb3cocGFyZW50V2luKTtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgdGhlIHBhcmVudCB3aW5kb3cgZm9yIGEgY2hpbGQgd2luZG93IChmcmllbmRseSBpZnJhbWUpLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4geyFXaW5kb3d9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQYXJlbnRXaW5kb3cod2luKSB7XG4gIHJldHVybiB3aW4uX19BTVBfUEFSRU5UIHx8IHdpbjtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgdGhlIHRvcCB3aW5kb3cgd2hlcmUgQU1QIFJ1bnRpbWUgaXMgaW5zdGFsbGVkIGZvciBhIGNoaWxkIHdpbmRvd1xuICogKGZyaWVuZGx5IGlmcmFtZSkuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7IVdpbmRvd31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRvcFdpbmRvdyh3aW4pIHtcbiAgcmV0dXJuIHdpbi5fX0FNUF9UT1AgfHwgd2luO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgcGFyZW50IFwiZnJpZW5kbHlcIiBpZnJhbWUgaWYgdGhlIG5vZGUgYmVsb25ncyB0byBhIGNoaWxkIHdpbmRvdy5cbiAqIEBwYXJhbSB7IU5vZGV9IG5vZGVcbiAqIEBwYXJhbSB7IVdpbmRvd30gdG9wV2luXG4gKiBAcmV0dXJuIHs/SFRNTElGcmFtZUVsZW1lbnR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQYXJlbnRXaW5kb3dGcmFtZUVsZW1lbnQobm9kZSwgdG9wV2luKSB7XG4gIGNvbnN0IGNoaWxkV2luID0gKG5vZGUub3duZXJEb2N1bWVudCB8fCBub2RlKS5kZWZhdWx0VmlldztcbiAgaWYgKGNoaWxkV2luICYmIGNoaWxkV2luICE9IHRvcFdpbiAmJiBnZXRUb3BXaW5kb3coY2hpbGRXaW4pID09IHRvcFdpbikge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gLyoqIEB0eXBlIHs/SFRNTElGcmFtZUVsZW1lbnR9ICovIChjaGlsZFdpbi5mcmFtZUVsZW1lbnQpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIElnbm9yZSB0aGUgZXJyb3IuXG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHshTm9kZXwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gbm9kZU9yRG9jXG4gKiBAcmV0dXJuIHshLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEFtcGRvYyhub2RlT3JEb2MpIHtcbiAgaWYgKG5vZGVPckRvYy5ub2RlVHlwZSkge1xuICAgIGNvbnN0IHdpbiA9IHRvV2luKC8qKiBAdHlwZSB7IURvY3VtZW50fSAqLyAoXG4gICAgICBub2RlT3JEb2Mub3duZXJEb2N1bWVudCB8fCBub2RlT3JEb2MpLmRlZmF1bHRWaWV3KTtcbiAgICByZXR1cm4gZ2V0QW1wZG9jU2VydmljZSh3aW4pLmdldEFtcERvYygvKiogQHR5cGUgeyFOb2RlfSAqLyAobm9kZU9yRG9jKSk7XG4gIH1cbiAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9ICovIChub2RlT3JEb2MpO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHshTm9kZXwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gbm9kZU9yRG9jXG4gKiBAcmV0dXJuIHshLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY3whV2luZG93fVxuICovXG5mdW5jdGlvbiBnZXRBbXBkb2NTZXJ2aWNlSG9sZGVyKG5vZGVPckRvYykge1xuICBjb25zdCBhbXBkb2MgPSBnZXRBbXBkb2Mobm9kZU9yRG9jKTtcbiAgcmV0dXJuIGFtcGRvYy5pc1NpbmdsZURvYygpID8gYW1wZG9jLndpbiA6IGFtcGRvYztcbn1cblxuXG4vKipcbiAqIFRoaXMgaXMgZXNzZW50aWFsbHkgYSBkdXBsaWNhdGUgb2YgYGFtcGRvYy5qc2AsIGJ1dCBuZWNlc3NhcnkgdG8gYXZvaWRcbiAqIGNpcmN1bGFyIGRlcGVuZGVuY2llcy5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHshLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY1NlcnZpY2V9XG4gKi9cbmZ1bmN0aW9uIGdldEFtcGRvY1NlcnZpY2Uod2luKSB7XG4gIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jU2VydmljZX0gKi8gKFxuICAgIGdldFNlcnZpY2Uod2luLCAnYW1wZG9jJykpO1xufVxuXG5cbi8qKlxuICogR2V0IHNlcnZpY2UgYGlkYCBmcm9tIGBob2xkZXJgLiBBc3N1bWVzIHRoZSBzZXJ2aWNlXG4gKiBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQuXG4gKiBAcGFyYW0geyFPYmplY3R9IGhvbGRlciBPYmplY3QgaG9sZGluZyB0aGUgc2VydmljZSBpbnN0YW5jZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBvZiB0aGUgc2VydmljZS5cbiAqIEByZXR1cm4ge09iamVjdH1cbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmZ1bmN0aW9uIGdldFNlcnZpY2VJbnRlcm5hbChob2xkZXIsIGlkKSB7XG4gIGRldigpLmFzc2VydChpc1NlcnZpY2VSZWdpc3RlcmVkKGhvbGRlciwgaWQpLFxuICAgICAgYEV4cGVjdGVkIHNlcnZpY2UgJHtpZH0gdG8gYmUgcmVnaXN0ZXJlZGApO1xuICBjb25zdCBzZXJ2aWNlcyA9IGdldFNlcnZpY2VzKGhvbGRlcik7XG4gIGNvbnN0IHMgPSBzZXJ2aWNlc1tpZF07XG4gIGlmICghcy5vYmopIHtcbiAgICBkZXYoKS5hc3NlcnQocy5jdG9yLCBgU2VydmljZSAke2lkfSByZWdpc3RlcmVkIHdpdGhvdXQgY3RvciBub3IgaW1wbC5gKTtcbiAgICBkZXYoKS5hc3NlcnQocy5jb250ZXh0LCBgU2VydmljZSAke2lkfSByZWdpc3RlcmVkIHdpdGhvdXQgY29udGV4dC5gKTtcbiAgICBzLm9iaiA9IG5ldyBzLmN0b3Iocy5jb250ZXh0KTtcbiAgICBkZXYoKS5hc3NlcnQocy5vYmosIGBTZXJ2aWNlICR7aWR9IGNvbnN0cnVjdGVkIHRvIG51bGwuYCk7XG4gICAgcy5jdG9yID0gbnVsbDtcbiAgICBzLmNvbnRleHQgPSBudWxsO1xuICAgIC8vIFRoZSBzZXJ2aWNlIG1heSBoYXZlIGJlZW4gcmVxdWVzdGVkIGFscmVhZHksIGluIHdoaWNoIGNhc2Ugd2UgaGF2ZSBhXG4gICAgLy8gcGVuZGluZyBwcm9taXNlIHdlIG5lZWQgdG8gZnVsZmlsbC5cbiAgICBpZiAocy5yZXNvbHZlKSB7XG4gICAgICBzLnJlc29sdmUocy5vYmopO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcy5vYmo7XG59XG5cbi8qKlxuICogQHBhcmFtIHshT2JqZWN0fSBob2xkZXIgT2JqZWN0IGhvbGRpbmcgdGhlIHNlcnZpY2UgaW5zdGFuY2UuXG4gKiBAcGFyYW0geyFXaW5kb3d8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGNvbnRleHQgV2luIG9yIEFtcERvYy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBvZiB0aGUgc2VydmljZS5cbiAqIEBwYXJhbSB7P2Z1bmN0aW9uKG5ldzpPYmplY3QsICFXaW5kb3cpfD9mdW5jdGlvbihuZXc6T2JqZWN0LCAhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvYyl9IGN0b3IgQ29uc3RydWN0b3IgZnVuY3Rpb24gdG8gbmV3IHRoZSBzZXJ2aWNlLiBDYWxsZWQgd2l0aCBjb250ZXh0LlxuICovXG5mdW5jdGlvbiByZWdpc3RlclNlcnZpY2VJbnRlcm5hbChob2xkZXIsIGNvbnRleHQsIGlkLCBjdG9yKSB7XG4gIGNvbnN0IHNlcnZpY2VzID0gZ2V0U2VydmljZXMoaG9sZGVyKTtcbiAgbGV0IHMgPSBzZXJ2aWNlc1tpZF07XG5cbiAgaWYgKCFzKSB7XG4gICAgcyA9IHNlcnZpY2VzW2lkXSA9IHtcbiAgICAgIG9iajogbnVsbCxcbiAgICAgIHByb21pc2U6IG51bGwsXG4gICAgICByZXNvbHZlOiBudWxsLFxuICAgICAgY29udGV4dDogbnVsbCxcbiAgICAgIGN0b3I6IG51bGwsXG4gICAgfTtcbiAgfVxuXG4gIGlmIChzLmN0b3IgfHwgcy5vYmopIHtcbiAgICAvLyBTZXJ2aWNlIGFscmVhZHkgcmVnaXN0ZXJlZC5cbiAgICByZXR1cm47XG4gIH1cblxuICBzLmN0b3IgPSBjdG9yO1xuICBzLmNvbnRleHQgPSBjb250ZXh0O1xuXG4gIC8vIFRoZSBzZXJ2aWNlIG1heSBoYXZlIGJlZW4gcmVxdWVzdGVkIGFscmVhZHksIGluIHdoaWNoIGNhc2UgdGhlcmUgaXMgYVxuICAvLyBwZW5kaW5nIHByb21pc2UgdGhhdCBuZWVkcyB0byBmdWxmaWxsZWQuXG4gIGlmIChzLnJlc29sdmUpIHtcbiAgICAvLyBnZXRTZXJ2aWNlSW50ZXJuYWwgd2lsbCByZXNvbHZlIHRoZSBwcm9taXNlLlxuICAgIGdldFNlcnZpY2VJbnRlcm5hbChob2xkZXIsIGlkKTtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7IU9iamVjdH0gaG9sZGVyXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKiBAcmV0dXJuIHshUHJvbWlzZTwhT2JqZWN0Pn1cbiAqL1xuZnVuY3Rpb24gZ2V0U2VydmljZVByb21pc2VJbnRlcm5hbChob2xkZXIsIGlkKSB7XG4gIGNvbnN0IGNhY2hlZCA9IGdldFNlcnZpY2VQcm9taXNlT3JOdWxsSW50ZXJuYWwoaG9sZGVyLCBpZCk7XG4gIGlmIChjYWNoZWQpIHtcbiAgICByZXR1cm4gY2FjaGVkO1xuICB9XG4gIC8vIFNlcnZpY2UgaXMgbm90IHJlZ2lzdGVyZWQuXG5cbiAgLy8gVE9ETyhAY3JhbWZvcmNlKTogQWRkIGEgY2hlY2sgdGhhdCBpZiB0aGUgZWxlbWVudCBpcyBldmVudHVhbGx5IHJlZ2lzdGVyZWRcbiAgLy8gdGhhdCB0aGUgc2VydmljZSBpcyBhY3R1YWxseSBwcm92aWRlZCBhbmQgdGhpcyBwcm9taXNlIHJlc29sdmVzLlxuICBjb25zdCBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xuICBjb25zdCB7cHJvbWlzZSwgcmVzb2x2ZX0gPSBkZWZlcnJlZDtcblxuICBjb25zdCBzZXJ2aWNlcyA9IGdldFNlcnZpY2VzKGhvbGRlcik7XG4gIHNlcnZpY2VzW2lkXSA9IHtcbiAgICBvYmo6IG51bGwsXG4gICAgcHJvbWlzZSxcbiAgICByZXNvbHZlLFxuICAgIGNvbnRleHQ6IG51bGwsXG4gICAgY3RvcjogbnVsbCxcbiAgfTtcbiAgcmV0dXJuIHByb21pc2U7XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSBmb3Igc2VydmljZSBgaWRgIGlmIHRoZSBzZXJ2aWNlIGhhcyBiZWVuIHJlZ2lzdGVyZWRcbiAqIG9uIGBob2xkZXJgLlxuICogQHBhcmFtIHshT2JqZWN0fSBob2xkZXJcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBvZiB0aGUgc2VydmljZS5cbiAqIEByZXR1cm4gez9Qcm9taXNlPCFPYmplY3Q+fVxuICovXG5mdW5jdGlvbiBnZXRTZXJ2aWNlUHJvbWlzZU9yTnVsbEludGVybmFsKGhvbGRlciwgaWQpIHtcbiAgY29uc3Qgc2VydmljZXMgPSBnZXRTZXJ2aWNlcyhob2xkZXIpO1xuICBjb25zdCBzID0gc2VydmljZXNbaWRdO1xuICBpZiAocykge1xuICAgIGlmIChzLnByb21pc2UpIHtcbiAgICAgIHJldHVybiBzLnByb21pc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEluc3RhbnRpYXRlIHNlcnZpY2UgaWYgbm90IGFscmVhZHkgaW5zdGFudGlhdGVkLlxuICAgICAgZ2V0U2VydmljZUludGVybmFsKGhvbGRlciwgaWQpO1xuICAgICAgcmV0dXJuIHMucHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgvKiogQHR5cGUgeyFPYmplY3R9ICovIChzLm9iaikpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgdGhlIG9iamVjdCB0aGF0IGhvbGRzIHRoZSBzZXJ2aWNlcyByZWdpc3RlcmVkIGluIGEgaG9sZGVyLlxuICogQHBhcmFtIHshT2JqZWN0fSBob2xkZXJcbiAqIEByZXR1cm4geyFPYmplY3Q8c3RyaW5nLCFTZXJ2aWNlSG9sZGVyRGVmPn1cbiAqL1xuZnVuY3Rpb24gZ2V0U2VydmljZXMoaG9sZGVyKSB7XG4gIGxldCB7c2VydmljZXN9ID0gaG9sZGVyO1xuICBpZiAoIXNlcnZpY2VzKSB7XG4gICAgc2VydmljZXMgPSBob2xkZXIuc2VydmljZXMgPSB7fTtcbiAgfVxuICByZXR1cm4gc2VydmljZXM7XG59XG5cblxuLyoqXG4gKiBXaGV0aGVyIHRoZSBzcGVjaWZpZWQgc2VydmljZSBpbXBsZW1lbnRzIGBEaXNwb3NhYmxlYCBpbnRlcmZhY2UuXG4gKiBAcGFyYW0geyFPYmplY3R9IHNlcnZpY2VcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Rpc3Bvc2FibGUoc2VydmljZSkge1xuICByZXR1cm4gdHlwZW9mIHNlcnZpY2UuZGlzcG9zZSA9PSAnZnVuY3Rpb24nO1xufVxuXG5cbi8qKlxuICogQXNzZXJ0cyB0aGF0IHRoZSBzcGVjaWZpZWQgc2VydmljZSBpbXBsZW1lbnRzIGBEaXNwb3NhYmxlYCBpbnRlcmZhY2UgYW5kXG4gKiB0eXBlY2FzdHMgdGhlIGluc3RhbmNlIHRvIGBEaXNwb3NhYmxlYC5cbiAqIEBwYXJhbSB7IU9iamVjdH0gc2VydmljZVxuICogQHJldHVybiB7IURpc3Bvc2FibGV9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnREaXNwb3NhYmxlKHNlcnZpY2UpIHtcbiAgZGV2KCkuYXNzZXJ0KGlzRGlzcG9zYWJsZShzZXJ2aWNlKSwgJ3JlcXVpcmVkIHRvIGltcGxlbWVudCBEaXNwb3NhYmxlJyk7XG4gIHJldHVybiAvKiogQHR5cGUgeyFEaXNwb3NhYmxlfSAqLyAoc2VydmljZSk7XG59XG5cblxuLyoqXG4gKiBEaXNwb3NlcyBhbGwgZGlzcG9zYWJsZSAoaW1wbGVtZW50cyBgRGlzcG9zYWJsZWAgaW50ZXJmYWNlKSBzZXJ2aWNlcyBpblxuICogYW1wZG9jIHNjb3BlLlxuICogQHBhcmFtIHshLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gYW1wZG9jXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXNwb3NlU2VydmljZXNGb3JEb2MoYW1wZG9jKSB7XG4gIGRpc3Bvc2VTZXJ2aWNlc0ludGVybmFsKGFtcGRvYyk7XG59XG5cblxuLyoqXG4gKiBEaXNwb3NlcyBhbGwgZGlzcG9zYWJsZSAoaW1wbGVtZW50cyBgRGlzcG9zYWJsZWAgaW50ZXJmYWNlKSBzZXJ2aWNlcyBpblxuICogZW1iZWQgc2NvcGUuXG4gKiBAcGFyYW0geyFXaW5kb3d9IGVtYmVkV2luXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXNwb3NlU2VydmljZXNGb3JFbWJlZChlbWJlZFdpbikge1xuICBkaXNwb3NlU2VydmljZXNJbnRlcm5hbChlbWJlZFdpbik7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0geyFPYmplY3R9IGhvbGRlciBPYmplY3QgaG9sZGluZyB0aGUgc2VydmljZSBpbnN0YW5jZXMuXG4gKi9cbmZ1bmN0aW9uIGRpc3Bvc2VTZXJ2aWNlc0ludGVybmFsKGhvbGRlcikge1xuICAvLyBUT0RPKGR2b3l0ZW5rbyk6IENvbnNpZGVyIG1hcmtpbmcgaG9sZGVyIGFzIGRlc3Ryb3llZCBmb3IgbGF0ZXItYXJyaXZpbmdcbiAgLy8gc2VydmljZSB0byBiZSBjYW5jZWxlZCBhdXRvbWF0aWNhbGx5LlxuICBjb25zdCBzZXJ2aWNlcyA9IGdldFNlcnZpY2VzKGhvbGRlcik7XG4gIGZvciAoY29uc3QgaWQgaW4gc2VydmljZXMpIHtcbiAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzZXJ2aWNlcywgaWQpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgY29uc3Qgc2VydmljZUhvbGRlciA9IHNlcnZpY2VzW2lkXTtcbiAgICBpZiAoc2VydmljZUhvbGRlci5vYmopIHtcbiAgICAgIGRpc3Bvc2VTZXJ2aWNlSW50ZXJuYWwoaWQsIHNlcnZpY2VIb2xkZXIub2JqKTtcbiAgICB9IGVsc2UgaWYgKHNlcnZpY2VIb2xkZXIucHJvbWlzZSkge1xuICAgICAgc2VydmljZUhvbGRlci5wcm9taXNlLnRoZW4oXG4gICAgICAgICAgaW5zdGFuY2UgPT4gZGlzcG9zZVNlcnZpY2VJbnRlcm5hbChpZCwgaW5zdGFuY2UpKTtcbiAgICB9XG4gIH1cbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICogQHBhcmFtIHshT2JqZWN0fSBzZXJ2aWNlXG4gKi9cbmZ1bmN0aW9uIGRpc3Bvc2VTZXJ2aWNlSW50ZXJuYWwoaWQsIHNlcnZpY2UpIHtcbiAgaWYgKCFpc0Rpc3Bvc2FibGUoc2VydmljZSkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdHJ5IHtcbiAgICBhc3NlcnREaXNwb3NhYmxlKHNlcnZpY2UpLmRpc3Bvc2UoKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIEVuc3VyZSB0aGF0IGEgZmFpbHVyZSB0byBkaXNwb3NlIGEgc2VydmljZSBkb2VzIG5vdCBkaXNydXB0IG90aGVyXG4gICAgLy8gc2VydmljZXMuXG4gICAgZGV2KCkuZXJyb3IoJ1NFUlZJQ0UnLCAnZmFpbGVkIHRvIGRpc3Bvc2Ugc2VydmljZScsIGlkLCBlKTtcbiAgfVxufVxuXG5cbi8qKlxuICogV2hldGhlciB0aGUgc3BlY2lmaWVkIHNlcnZpY2UgaW1wbGVtZW50cyBgRW1iZWRkYWJsZVNlcnZpY2VgIGludGVyZmFjZS5cbiAqIEBwYXJhbSB7IU9iamVjdH0gc2VydmljZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRW1iZWRkYWJsZShzZXJ2aWNlKSB7XG4gIHJldHVybiB0eXBlb2Ygc2VydmljZS5hZG9wdEVtYmVkV2luZG93ID09ICdmdW5jdGlvbic7XG59XG5cblxuLyoqXG4gKiBBZG9wdHMgYW4gZW1iZWRkYWJsZSAoaW1wbGVtZW50cyBgRW1iZWRkYWJsZVNlcnZpY2VgIGludGVyZmFjZSkgc2VydmljZVxuICogaW4gZW1iZWQgc2NvcGUuXG4gKiBAcGFyYW0geyFXaW5kb3d9IGVtYmVkV2luXG4gKiBAcGFyYW0ge3N0cmluZ30gc2VydmljZUlkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZG9wdFNlcnZpY2VGb3JFbWJlZChlbWJlZFdpbiwgc2VydmljZUlkKSB7XG4gIGNvbnN0IGFkb3B0ZWQgPSBhZG9wdFNlcnZpY2VGb3JFbWJlZElmRW1iZWRkYWJsZShlbWJlZFdpbiwgc2VydmljZUlkKTtcbiAgZGV2KCkuYXNzZXJ0KGFkb3B0ZWQsIGBTZXJ2aWNlICR7c2VydmljZUlkfSBub3QgZm91bmQgb24gcGFyZW50IGAgK1xuICAgICAgJ29yIGRvZXNuXFwndCBpbXBsZW1lbnQgRW1iZWRkYWJsZVNlcnZpY2UuJyk7XG59XG5cblxuLyoqXG4gKiBBZG9wdHMgYW4gZW1iZWRkYWJsZSAoaW1wbGVtZW50cyBgRW1iZWRkYWJsZVNlcnZpY2VgIGludGVyZmFjZSkgc2VydmljZVxuICogaW4gZW1iZWQgc2NvcGUuXG4gKiBAcGFyYW0geyFXaW5kb3d9IGVtYmVkV2luXG4gKiBAcGFyYW0ge3N0cmluZ30gc2VydmljZUlkXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRvcHRTZXJ2aWNlRm9yRW1iZWRJZkVtYmVkZGFibGUoZW1iZWRXaW4sIHNlcnZpY2VJZCkge1xuICBjb25zdCBmcmFtZUVsZW1lbnQgPSAvKiogQHR5cGUgeyFOb2RlfSAqLyAoZGV2KCkuYXNzZXJ0KFxuICAgICAgZW1iZWRXaW4uZnJhbWVFbGVtZW50LFxuICAgICAgJ2ZyYW1lRWxlbWVudCBub3QgZm91bmQgZm9yIGVtYmVkJykpO1xuICBjb25zdCBhbXBkb2MgPSBnZXRBbXBkb2MoZnJhbWVFbGVtZW50KTtcbiAgY29uc3QgaG9sZGVyID0gZ2V0QW1wZG9jU2VydmljZUhvbGRlcihhbXBkb2MpO1xuICBpZiAoIWlzU2VydmljZVJlZ2lzdGVyZWQoaG9sZGVyLCBzZXJ2aWNlSWQpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IHNlcnZpY2UgPSBnZXRTZXJ2aWNlRm9yRG9jRGVwcmVjYXRlZChmcmFtZUVsZW1lbnQsIHNlcnZpY2VJZCk7XG4gIGlmICghaXNFbWJlZGRhYmxlKHNlcnZpY2UpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHNlcnZpY2UuYWRvcHRFbWJlZFdpbmRvdyhlbWJlZFdpbik7XG4gIHJldHVybiB0cnVlO1xufVxuXG5cbi8qKlxuICogUmVzZXRzIGEgc2luZ2xlIHNlcnZpY2UsIHNvIGl0IGdldHMgcmVjcmVhdGVkIG9uIG5leHQgZ2V0U2VydmljZSBpbnZvY2F0aW9uLlxuICogQHBhcmFtIHshT2JqZWN0fSBob2xkZXJcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBvZiB0aGUgc2VydmljZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0U2VydmljZUZvclRlc3RpbmcoaG9sZGVyLCBpZCkge1xuICBpZiAoaG9sZGVyLnNlcnZpY2VzKSB7XG4gICAgaG9sZGVyLnNlcnZpY2VzW2lkXSA9IG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0geyFPYmplY3R9IGhvbGRlciBPYmplY3QgaG9sZGluZyB0aGUgc2VydmljZSBpbnN0YW5jZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBvZiB0aGUgc2VydmljZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzU2VydmljZVJlZ2lzdGVyZWQoaG9sZGVyLCBpZCkge1xuICBjb25zdCBzZXJ2aWNlID0gaG9sZGVyLnNlcnZpY2VzICYmIGhvbGRlci5zZXJ2aWNlc1tpZF07XG4gIC8vIEFsbCByZWdpc3RlcmVkIHNlcnZpY2VzIG11c3QgaGF2ZSBhbiBpbXBsZW1lbnRhdGlvbiBvciBhIGNvbnN0cnVjdG9yLlxuICByZXR1cm4gISEoc2VydmljZSAmJiAoc2VydmljZS5jdG9yIHx8IHNlcnZpY2Uub2JqKSk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgZ2V0QW1wZG9jLFxuICBnZXRFeGlzdGluZ1NlcnZpY2VGb3JEb2NJbkVtYmVkU2NvcGUsXG4gIGdldEV4aXN0aW5nU2VydmljZU9yTnVsbCxcbiAgZ2V0U2VydmljZSxcbiAgZ2V0U2VydmljZUZvckRvYyxcbiAgZ2V0U2VydmljZUZvckRvY0RlcHJlY2F0ZWQsXG4gIGdldFNlcnZpY2VQcm9taXNlRm9yRG9jLFxufSBmcm9tICcuL3NlcnZpY2UnO1xuaW1wb3J0IHtcbiAgZ2V0RWxlbWVudFNlcnZpY2VGb3JEb2MsXG4gIGdldEVsZW1lbnRTZXJ2aWNlSWZBdmFpbGFibGUsXG4gIGdldEVsZW1lbnRTZXJ2aWNlSWZBdmFpbGFibGVGb3JEb2MsXG4gIGdldEVsZW1lbnRTZXJ2aWNlSWZBdmFpbGFibGVGb3JEb2NJbkVtYmVkU2NvcGUsXG59IGZyb20gJy4vZWxlbWVudC1zZXJ2aWNlJztcblxuLyoqIEB0eXBlZGVmIHshLi4vZXh0ZW5zaW9ucy9hbXAtc3Vic2NyaXB0aW9ucy8wLjEvYW1wLXN1YnNjcmlwdGlvbnMuU3Vic2NyaXB0aW9uU2VydmljZX0gKi9cbmV4cG9ydCBsZXQgU3Vic2NyaXB0aW9uU2VydmljZTtcblxuZXhwb3J0IGNsYXNzIFNlcnZpY2VzIHtcbiAgLyoqXG4gICAqIEhpbnQ6IEFkZCBleHRlbnNpb25zIGZvbGRlciBwYXRoIHRvIGNvbXBpbGUuanMgd2l0aFxuICAgKiB3YXJuaW5ncyBjYW5ub3QgZmluZCBtb2R1bGVzLlxuICAgKi9cblxuICAvKipcbiAgICogUmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSBBY2Nlc3Mgc2VydmljZS5cbiAgICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCEuLi9leHRlbnNpb25zL2FtcC1hY2Nlc3MvMC4xL2FtcC1hY2Nlc3MuQWNjZXNzU2VydmljZT59XG4gICAqL1xuICBzdGF0aWMgYWNjZXNzU2VydmljZUZvckRvYyhlbGVtZW50T3JBbXBEb2MpIHtcbiAgICByZXR1cm4gKC8qKiBAdHlwZSB7IVByb21pc2U8IS4uL2V4dGVuc2lvbnMvYW1wLWFjY2Vzcy8wLjEvYW1wLWFjY2Vzcy5BY2Nlc3NTZXJ2aWNlPn0gKi8gKFxuICAgICAgZ2V0RWxlbWVudFNlcnZpY2VGb3JEb2MoZWxlbWVudE9yQW1wRG9jLCAnYWNjZXNzJywgJ2FtcC1hY2Nlc3MnKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgQWNjZXNzIHNlcnZpY2Ugb3IgYSBwcm9taXNlIGZvciBudWxsIGlmIHRoZVxuICAgKiBzZXJ2aWNlIGlzIG5vdCBhdmFpbGFibGUgb24gdGhlIGN1cnJlbnQgcGFnZS5cbiAgICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gICAqIEByZXR1cm4geyFQcm9taXNlPD8uLi9leHRlbnNpb25zL2FtcC1hY2Nlc3MvMC4xL2FtcC1hY2Nlc3MuQWNjZXNzU2VydmljZT59XG4gICAqL1xuICBzdGF0aWMgYWNjZXNzU2VydmljZUZvckRvY09yTnVsbChlbGVtZW50T3JBbXBEb2MpIHtcbiAgICByZXR1cm4gKC8qKiBAdHlwZSB7IVByb21pc2U8Py4uL2V4dGVuc2lvbnMvYW1wLWFjY2Vzcy8wLjEvYW1wLWFjY2Vzcy5BY2Nlc3NTZXJ2aWNlPn0gKi8gKFxuICAgICAgZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZUZvckRvYyhlbGVtZW50T3JBbXBEb2MsICdhY2Nlc3MnLFxuICAgICAgICAgICdhbXAtYWNjZXNzJykpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIFN1YnNjcmlwdGlvbnMgc2VydmljZS5cbiAgICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFTdWJzY3JpcHRpb25TZXJ2aWNlPn1cbiAgICovXG4gIHN0YXRpYyBzdWJzY3JpcHRpb25zU2VydmljZUZvckRvYyhlbGVtZW50T3JBbXBEb2MpIHtcbiAgICByZXR1cm4gKC8qKiBAdHlwZSB7IVByb21pc2U8IVN1YnNjcmlwdGlvblNlcnZpY2U+fSAqLyAoXG4gICAgICBnZXRFbGVtZW50U2VydmljZUZvckRvYyhlbGVtZW50T3JBbXBEb2MsICdzdWJzY3JpcHRpb25zJyxcbiAgICAgICAgICAnYW1wLXN1YnNjcmlwdGlvbnMnKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgU3Vic2NyaXB0aW9ucyBzZXJ2aWNlLlxuICAgKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAgICogQHJldHVybiB7IVByb21pc2U8P1N1YnNjcmlwdGlvblNlcnZpY2U+fVxuICAgKi9cbiAgc3RhdGljIHN1YnNjcmlwdGlvbnNTZXJ2aWNlRm9yRG9jT3JOdWxsKGVsZW1lbnRPckFtcERvYykge1xuICAgIHJldHVybiAoLyoqIEB0eXBlIHshUHJvbWlzZTw/U3Vic2NyaXB0aW9uU2VydmljZT59ICovIChcbiAgICAgIGdldEVsZW1lbnRTZXJ2aWNlSWZBdmFpbGFibGVGb3JEb2MoZWxlbWVudE9yQW1wRG9jLCAnc3Vic2NyaXB0aW9ucycsXG4gICAgICAgICAgJ2FtcC1zdWJzY3JpcHRpb25zJykpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVbmxpa2UgbW9zdCBzZXJ2aWNlIGdldHRlcnMsIHBhc3NpbmcgYE5vZGVgIGlzIG5lY2Vzc2FyeSBmb3Igc29tZSBGSUUtc2NvcGVcbiAgICogc2VydmljZXMgc2luY2Ugc29tZXRpbWVzIHdlIG9ubHkgaGF2ZSB0aGUgRklFIERvY3VtZW50IGZvciBjb250ZXh0LlxuICAgKiBAcGFyYW0geyFOb2RlfCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBub2RlT3JEb2NcbiAgICogQHJldHVybiB7IS4vc2VydmljZS9hY3Rpb24taW1wbC5BY3Rpb25TZXJ2aWNlfVxuICAgKi9cbiAgc3RhdGljIGFjdGlvblNlcnZpY2VGb3JEb2Mobm9kZU9yRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS9hY3Rpb24taW1wbC5BY3Rpb25TZXJ2aWNlfSAqLyAoXG4gICAgICBnZXRFeGlzdGluZ1NlcnZpY2VGb3JEb2NJbkVtYmVkU2NvcGUoXG4gICAgICAgICAgbm9kZU9yRG9jLCAnYWN0aW9uJywgLyogb3B0X2ZhbGxiYWNrVG9Ub3BXaW4gKi8gdHJ1ZSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhQWN0aXZpdHk+fVxuICAgKi9cbiAgc3RhdGljIGFjdGl2aXR5Rm9yRG9jKGVsZW1lbnRPckFtcERvYykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlPCFBY3Rpdml0eT59ICovIChcbiAgICAgIGdldEVsZW1lbnRTZXJ2aWNlRm9yRG9jKGVsZW1lbnRPckFtcERvYywgJ2FjdGl2aXR5JywgJ2FtcC1hbmFseXRpY3MnKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZ2xvYmFsIGluc3RhbmNlIG9mIHRoZSBgQW1wRG9jU2VydmljZWAgc2VydmljZSB0aGF0IGNhbiBiZVxuICAgKiB1c2VkIHRvIHJlc29sdmUgYW4gYW1wZG9jIGZvciBhbnkgbm9kZTogZWl0aGVyIGluIHRoZSBzaW5nbGUtZG9jIG9yXG4gICAqIHNoYWRvdy1kb2MgZW52aXJvbm1lbnQuXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luZG93XG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jU2VydmljZX1cbiAgICovXG4gIHN0YXRpYyBhbXBkb2NTZXJ2aWNlRm9yKHdpbmRvdykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jU2VydmljZX0gKi8gKFxuICAgICAgZ2V0U2VydmljZSh3aW5kb3csICdhbXBkb2MnKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgQW1wRG9jIGZvciB0aGUgc3BlY2lmaWVkIGNvbnRleHQgbm9kZS5cbiAgICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfVxuICAgKi9cbiAgc3RhdGljIGFtcGRvYyhlbGVtZW50T3JBbXBEb2MpIHtcbiAgICByZXR1cm4gZ2V0QW1wZG9jKGVsZW1lbnRPckFtcERvYyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IGxvYWRBbmFseXRpY3NcbiAgICogQHJldHVybiB7IVByb21pc2U8IS4uL2V4dGVuc2lvbnMvYW1wLWFuYWx5dGljcy8wLjEvaW5zdHJ1bWVudGF0aW9uLkluc3RydW1lbnRhdGlvblNlcnZpY2U+fVxuICAgKi9cbiAgc3RhdGljIGFuYWx5dGljc0ZvckRvYyhlbGVtZW50T3JBbXBEb2MsIGxvYWRBbmFseXRpY3MgPSBmYWxzZSkge1xuICAgIGlmIChsb2FkQW5hbHl0aWNzKSB7XG4gICAgICAvLyBHZXQgRXh0ZW5zaW9ucyBzZXJ2aWNlIGFuZCBmb3JjZSBsb2FkIGFuYWx5dGljcyBleHRlbnNpb24uXG4gICAgICBjb25zdCBhbXBkb2MgPSBnZXRBbXBkb2MoZWxlbWVudE9yQW1wRG9jKTtcbiAgICAgIFNlcnZpY2VzLmV4dGVuc2lvbnNGb3IoYW1wZG9jLndpbikuLypPSyovaW5zdGFsbEV4dGVuc2lvbkZvckRvYyhcbiAgICAgICAgICBhbXBkb2MsICdhbXAtYW5hbHl0aWNzJyk7XG4gICAgfVxuICAgIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlPCEuLi9leHRlbnNpb25zL2FtcC1hbmFseXRpY3MvMC4xL2luc3RydW1lbnRhdGlvbi5JbnN0cnVtZW50YXRpb25TZXJ2aWNlPn0gKi8gKFxuICAgICAgZ2V0RWxlbWVudFNlcnZpY2VGb3JEb2MoZWxlbWVudE9yQW1wRG9jLCAnYW1wLWFuYWx5dGljcy1pbnN0cnVtZW50YXRpb24nLFxuICAgICAgICAgICdhbXAtYW5hbHl0aWNzJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZTw/Li4vZXh0ZW5zaW9ucy9hbXAtYW5hbHl0aWNzLzAuMS9pbnN0cnVtZW50YXRpb24uSW5zdHJ1bWVudGF0aW9uU2VydmljZT59XG4gICAqL1xuICBzdGF0aWMgYW5hbHl0aWNzRm9yRG9jT3JOdWxsKGVsZW1lbnRPckFtcERvYykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlPD8uLi9leHRlbnNpb25zL2FtcC1hbmFseXRpY3MvMC4xL2luc3RydW1lbnRhdGlvbi5JbnN0cnVtZW50YXRpb25TZXJ2aWNlPn0gKi8gKFxuICAgICAgZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZUZvckRvYyhlbGVtZW50T3JBbXBEb2MsXG4gICAgICAgICAgJ2FtcC1hbmFseXRpY3MtaW5zdHJ1bWVudGF0aW9uJywgJ2FtcC1hbmFseXRpY3MnKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5kb3dcbiAgICogQHJldHVybiB7IS4vc2VydmljZS9iYXRjaGVkLXhoci1pbXBsLkJhdGNoZWRYaHJ9XG4gICAqL1xuICBzdGF0aWMgYmF0Y2hlZFhockZvcih3aW5kb3cpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL2JhdGNoZWQteGhyLWltcGwuQmF0Y2hlZFhocn0gKi8gKFxuICAgICAgZ2V0U2VydmljZSh3aW5kb3csICdiYXRjaGVkLXhocicpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAgICogQHJldHVybiB7IVByb21pc2U8Py4uL2V4dGVuc2lvbnMvYW1wLWJpbmQvMC4xL2JpbmQtaW1wbC5CaW5kPn1cbiAgICovXG4gIHN0YXRpYyBiaW5kRm9yRG9jT3JOdWxsKGVsZW1lbnRPckFtcERvYykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlPD8uLi9leHRlbnNpb25zL2FtcC1iaW5kLzAuMS9iaW5kLWltcGwuQmluZD59ICovIChcbiAgICAgIGdldEVsZW1lbnRTZXJ2aWNlSWZBdmFpbGFibGVGb3JEb2NJbkVtYmVkU2NvcGUoXG4gICAgICAgICAgZWxlbWVudE9yQW1wRG9jLCAnYmluZCcsICdhbXAtYmluZCcpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAgICogQHJldHVybiB7IVByb21pc2U8IS4vc2VydmljZS9jaWQtaW1wbC5DaWQ+fVxuICAgKi9cbiAgc3RhdGljIGNpZEZvckRvYyhlbGVtZW50T3JBbXBEb2MpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZTwhLi9zZXJ2aWNlL2NpZC1pbXBsLkNpZD59ICovIChcbiAgICAgIGdldFNlcnZpY2VQcm9taXNlRm9yRG9jKGVsZW1lbnRPckFtcERvYywgJ2NpZCcpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAgICogQHJldHVybiB7IS4vc2VydmljZS9uYXZpZ2F0aW9uLk5hdmlnYXRpb259XG4gICAqL1xuICBzdGF0aWMgbmF2aWdhdGlvbkZvckRvYyhlbGVtZW50T3JBbXBEb2MpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL25hdmlnYXRpb24uTmF2aWdhdGlvbn0gKi8gKFxuICAgICAgZ2V0U2VydmljZUZvckRvYyhlbGVtZW50T3JBbXBEb2MsICduYXZpZ2F0aW9uJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luZG93XG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvY3J5cHRvLWltcGwuQ3J5cHRvfVxuICAgKi9cbiAgc3RhdGljIGNyeXB0b0Zvcih3aW5kb3cpIHtcbiAgICByZXR1cm4gKC8qKiBAdHlwZSB7IS4vc2VydmljZS9jcnlwdG8taW1wbC5DcnlwdG99ICovIChcbiAgICAgIGdldFNlcnZpY2Uod2luZG93LCAnY3J5cHRvJykpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAgICogQHJldHVybiB7IS4vc2VydmljZS9kb2N1bWVudC1pbmZvLWltcGwuRG9jdW1lbnRJbmZvRGVmfSBJbmZvIGFib3V0IHRoZSBkb2NcbiAgICovXG4gIHN0YXRpYyBkb2N1bWVudEluZm9Gb3JEb2MoZWxlbWVudE9yQW1wRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS9kb2N1bWVudC1pbmZvLWltcGwuRG9jSW5mb30gKi8gKFxuICAgICAgZ2V0U2VydmljZUZvckRvYyhlbGVtZW50T3JBbXBEb2MsICdkb2N1bWVudEluZm8nKSkuZ2V0KCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5kb3dcbiAgICogQHJldHVybiB7IS4vc2VydmljZS9kb2N1bWVudC1zdGF0ZS5Eb2N1bWVudFN0YXRlfVxuICAgKi9cbiAgc3RhdGljIGRvY3VtZW50U3RhdGVGb3Iod2luZG93KSB7XG4gICAgcmV0dXJuIGdldFNlcnZpY2Uod2luZG93LCAnZG9jdW1lbnRTdGF0ZScpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luZG93XG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvZXh0ZW5zaW9ucy1pbXBsLkV4dGVuc2lvbnN9XG4gICAqL1xuICBzdGF0aWMgZXh0ZW5zaW9uc0Zvcih3aW5kb3cpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL2V4dGVuc2lvbnMtaW1wbC5FeHRlbnNpb25zfSAqLyAoXG4gICAgICBnZXRTZXJ2aWNlKHdpbmRvdywgJ2V4dGVuc2lvbnMnKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBzZXJ2aWNlIGltcGxlbWVudGVkIGluIHNlcnZpY2UvaGlzdG9yeS1pbXBsLlxuICAgKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAgICogQHJldHVybiB7IS4vc2VydmljZS9oaXN0b3J5LWltcGwuSGlzdG9yeX1cbiAgICovXG4gIHN0YXRpYyBoaXN0b3J5Rm9yRG9jKGVsZW1lbnRPckFtcERvYykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UvaGlzdG9yeS1pbXBsLkhpc3Rvcnl9ICovIChcbiAgICAgIGdldFNlcnZpY2VGb3JEb2MoZWxlbWVudE9yQW1wRG9jLCAnaGlzdG9yeScpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcmV0dXJuIHshLi9pbnB1dC5JbnB1dH1cbiAgICovXG4gIHN0YXRpYyBpbnB1dEZvcih3aW4pIHtcbiAgICByZXR1cm4gZ2V0U2VydmljZSh3aW4sICdpbnB1dCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL2xheWVycy1pbXBsLkxheW91dExheWVyc31cbiAgICovXG4gIHN0YXRpYyBsYXllcnNGb3JEb2MoZWxlbWVudE9yQW1wRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS9sYXllcnMtaW1wbC5MYXlvdXRMYXllcnN9ICovIChcbiAgICAgIGdldFNlcnZpY2VGb3JEb2MoZWxlbWVudE9yQW1wRG9jLCAnbGF5ZXJzJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luZG93XG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvcGVyZm9ybWFuY2UtaW1wbC5QZXJmb3JtYW5jZX1cbiAgICovXG4gIHN0YXRpYyBwZXJmb3JtYW5jZUZvcih3aW5kb3cpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL3BlcmZvcm1hbmNlLWltcGwuUGVyZm9ybWFuY2V9Ki8gKFxuICAgICAgZ2V0U2VydmljZSh3aW5kb3csICdwZXJmb3JtYW5jZScpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpbmRvd1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL3BlcmZvcm1hbmNlLWltcGwuUGVyZm9ybWFuY2V9XG4gICAqL1xuICBzdGF0aWMgcGVyZm9ybWFuY2VGb3JPck51bGwod2luZG93KSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS9wZXJmb3JtYW5jZS1pbXBsLlBlcmZvcm1hbmNlfSovIChcbiAgICAgIGdldEV4aXN0aW5nU2VydmljZU9yTnVsbCh3aW5kb3csICdwZXJmb3JtYW5jZScpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpbmRvd1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL3BsYXRmb3JtLWltcGwuUGxhdGZvcm19XG4gICAqL1xuICBzdGF0aWMgcGxhdGZvcm1Gb3Iod2luZG93KSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS9wbGF0Zm9ybS1pbXBsLlBsYXRmb3JtfSAqLyAoXG4gICAgICBnZXRTZXJ2aWNlKHdpbmRvdywgJ3BsYXRmb3JtJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZXMgZ2V0U2VydmljZUZvckRvY0RlcHJlY2F0ZWQoKSBzaW5jZSBSZXNvdXJjZXMgaXMgYSBzdGFydHVwIHNlcnZpY2UuXG4gICAqIEBwYXJhbSB7IU5vZGV8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IG5vZGVPckRvY1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL3Jlc291cmNlcy1pbXBsLlJlc291cmNlc31cbiAgICovXG4gIHN0YXRpYyByZXNvdXJjZXNGb3JEb2Mobm9kZU9yRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS9yZXNvdXJjZXMtaW1wbC5SZXNvdXJjZXN9ICovIChcbiAgICAgIGdldFNlcnZpY2VGb3JEb2NEZXByZWNhdGVkKG5vZGVPckRvYywgJ3Jlc291cmNlcycpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcmV0dXJuIHs/UHJvbWlzZTw/e2luY29taW5nRnJhZ21lbnQ6IHN0cmluZywgb3V0Z29pbmdGcmFnbWVudDogc3RyaW5nfT59XG4gICAqL1xuICBzdGF0aWMgc2hhcmVUcmFja2luZ0Zvck9yTnVsbCh3aW4pIHtcbiAgICByZXR1cm4gKC8qKiBAdHlwZSB7IVByb21pc2U8P3tpbmNvbWluZ0ZyYWdtZW50OiBzdHJpbmcsIG91dGdvaW5nRnJhZ21lbnQ6IHN0cmluZ30+fSAqLyAoXG4gICAgICBnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlKHdpbiwgJ3NoYXJlLXRyYWNraW5nJyxcbiAgICAgICAgICAnYW1wLXNoYXJlLXRyYWNraW5nJywgdHJ1ZSkpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcmV0dXJuIHs/UHJvbWlzZTw/Li4vZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMS4wL3ZhcmlhYmxlLXNlcnZpY2UuU3RvcnlWYXJpYWJsZURlZj59XG4gICAqL1xuICBzdGF0aWMgc3RvcnlWYXJpYWJsZVNlcnZpY2VGb3JPck51bGwod2luKSB7XG4gICAgcmV0dXJuIChcbiAgICAvKiogQHR5cGUgeyFQcm9taXNlPD8uLi9leHRlbnNpb25zL2FtcC1zdG9yeS8xLjAvdmFyaWFibGUtc2VydmljZS5TdG9yeVZhcmlhYmxlRGVmPn0gKi9cbiAgICAgIChnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlKHdpbiwgJ3N0b3J5LXZhcmlhYmxlJywgJ2FtcC1zdG9yeScsXG4gICAgICAgICAgdHJ1ZSkpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJzaW9uIG9mIHRoZSBzdG9yeSBzdG9yZSBzZXJ2aWNlIGRlcGVuZHMgb24gd2hpY2ggdmVyc2lvbiBvZiBhbXAtc3RvcnlcbiAgICogdGhlIHB1Ymxpc2hlciBpcyBsb2FkaW5nLiBUaGV5IGFsbCBoYXZlIHRoZSBzYW1lIGltcGxlbWVudGF0aW9uLlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcmV0dXJuIHs/UHJvbWlzZTw/Li4vZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMS4wL2FtcC1zdG9yeS1zdG9yZS1zZXJ2aWNlLkFtcFN0b3J5U3RvcmVTZXJ2aWNlfD8uLi9leHRlbnNpb25zL2FtcC1zdG9yeS8wLjEvYW1wLXN0b3J5LXN0b3JlLXNlcnZpY2UuQW1wU3RvcnlTdG9yZVNlcnZpY2U+fVxuICAgKi9cbiAgc3RhdGljIHN0b3J5U3RvcmVTZXJ2aWNlRm9yT3JOdWxsKHdpbikge1xuICAgIHJldHVybiAoXG4gICAgLyoqIEB0eXBlIHshUHJvbWlzZTw/Li4vZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMS4wL2FtcC1zdG9yeS1zdG9yZS1zZXJ2aWNlLkFtcFN0b3J5U3RvcmVTZXJ2aWNlfD8uLi9leHRlbnNpb25zL2FtcC1zdG9yeS8wLjEvYW1wLXN0b3J5LXN0b3JlLXNlcnZpY2UuQW1wU3RvcnlTdG9yZVNlcnZpY2U+fSAqL1xuICAgICAgKGdldEVsZW1lbnRTZXJ2aWNlSWZBdmFpbGFibGUod2luLCAnc3Rvcnktc3RvcmUnLCAnYW1wLXN0b3J5JykpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcmV0dXJuIHs/Li4vZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMS4wL2FtcC1zdG9yeS1zdG9yZS1zZXJ2aWNlLkFtcFN0b3J5U3RvcmVTZXJ2aWNlfVxuICAgKi9cbiAgc3RhdGljIHN0b3J5U3RvcmVTZXJ2aWNlKHdpbikge1xuICAgIHJldHVybiAoLyoqIEB0eXBlIHs/Li4vZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMS4wL2FtcC1zdG9yeS1zdG9yZS1zZXJ2aWNlLkFtcFN0b3J5U3RvcmVTZXJ2aWNlfSAqL1xuICAgICAgKGdldEV4aXN0aW5nU2VydmljZU9yTnVsbCh3aW4sICdzdG9yeS1zdG9yZScpKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICogQHJldHVybiB7Py4uL2V4dGVuc2lvbnMvYW1wLXN0b3J5LzEuMC9hbXAtc3RvcnktcmVxdWVzdC1zZXJ2aWNlLkFtcFN0b3J5UmVxdWVzdFNlcnZpY2V9XG4gICAqL1xuICBzdGF0aWMgc3RvcnlSZXF1ZXN0U2VydmljZSh3aW4pIHtcbiAgICByZXR1cm4gKC8qKiBAdHlwZSB7Py4uL2V4dGVuc2lvbnMvYW1wLXN0b3J5LzEuMC9hbXAtc3RvcnktcmVxdWVzdC1zZXJ2aWNlLkFtcFN0b3J5UmVxdWVzdFNlcnZpY2V9ICovXG4gICAgICAoZ2V0RXhpc3RpbmdTZXJ2aWNlT3JOdWxsKHdpbiwgJ3N0b3J5LXJlcXVlc3QnKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEByZXR1cm4geyFQcm9taXNlPD8uLi9leHRlbnNpb25zL2FtcC1zdG9yeS8xLjAvbG9jYWxpemF0aW9uLkxvY2FsaXphdGlvblNlcnZpY2U+fVxuICAgKi9cbiAgc3RhdGljIGxvY2FsaXphdGlvblNlcnZpY2VGb3JPck51bGwod2luKSB7XG4gICAgcmV0dXJuIChcbiAgICAvKiogQHR5cGUgeyFQcm9taXNlPD8uLi9leHRlbnNpb25zL2FtcC1zdG9yeS8xLjAvbG9jYWxpemF0aW9uLkxvY2FsaXphdGlvblNlcnZpY2U+fSAqL1xuICAgICAgKGdldEVsZW1lbnRTZXJ2aWNlSWZBdmFpbGFibGUod2luLCAnbG9jYWxpemF0aW9uJywgJ2FtcC1zdG9yeScsIHRydWUpKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICogQHJldHVybiB7IS4uL2V4dGVuc2lvbnMvYW1wLXN0b3J5LzEuMC9sb2NhbGl6YXRpb24uTG9jYWxpemF0aW9uU2VydmljZX1cbiAgICovXG4gIHN0YXRpYyBsb2NhbGl6YXRpb25TZXJ2aWNlKHdpbikge1xuICAgIHJldHVybiBnZXRTZXJ2aWNlKHdpbiwgJ2xvY2FsaXphdGlvbicpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRPRE8oIzE0MzU3KTogUmVtb3ZlIHRoaXMgd2hlbiBhbXAtc3Rvcnk6MC4xIGlzIGRlcHJlY2F0ZWQuXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEByZXR1cm4geyEuLi9leHRlbnNpb25zL2FtcC1zdG9yeS8wLjEvYW1wLXN0b3J5LXN0b3JlLXNlcnZpY2UuQW1wU3RvcnlTdG9yZVNlcnZpY2V9XG4gICAqL1xuICBzdGF0aWMgc3RvcnlTdG9yZVNlcnZpY2VWMDEod2luKSB7XG4gICAgcmV0dXJuIGdldFNlcnZpY2Uod2luLCAnc3Rvcnktc3RvcmUnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUT0RPKCMxNDM1Nyk6IFJlbW92ZSB0aGlzIHdoZW4gYW1wLXN0b3J5OjAuMSBpcyBkZXByZWNhdGVkLlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcmV0dXJuIHshLi4vZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMC4xL2FtcC1zdG9yeS1yZXF1ZXN0LXNlcnZpY2UuQW1wU3RvcnlSZXF1ZXN0U2VydmljZX1cbiAgICovXG4gIHN0YXRpYyBzdG9yeVJlcXVlc3RTZXJ2aWNlVjAxKHdpbikge1xuICAgIHJldHVybiBnZXRTZXJ2aWNlKHdpbiwgJ3N0b3J5LXJlcXVlc3QtdjAxJyk7XG4gIH1cblxuICAvKipcbiAgICogVE9ETygjMTQzNTcpOiBSZW1vdmUgdGhpcyB3aGVuIGFtcC1zdG9yeTowLjEgaXMgZGVwcmVjYXRlZC5cbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICogQHJldHVybiB7IVByb21pc2U8Py4uL2V4dGVuc2lvbnMvYW1wLXN0b3J5LzAuMS9sb2NhbGl6YXRpb24uTG9jYWxpemF0aW9uU2VydmljZT59XG4gICAqL1xuICBzdGF0aWMgbG9jYWxpemF0aW9uU2VydmljZUZvck9yTnVsbFYwMSh3aW4pIHtcbiAgICByZXR1cm4gKFxuICAgIC8qKiBAdHlwZSB7IVByb21pc2U8Py4uL2V4dGVuc2lvbnMvYW1wLXN0b3J5LzAuMS9sb2NhbGl6YXRpb24uTG9jYWxpemF0aW9uU2VydmljZT59ICovXG4gICAgICAoZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZSh3aW4sICdsb2NhbGl6YXRpb24tdjAxJywgJ2FtcC1zdG9yeScsXG4gICAgICAgICAgdHJ1ZSkpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUT0RPKCMxNDM1Nyk6IFJlbW92ZSB0aGlzIHdoZW4gYW1wLXN0b3J5OjAuMSBpcyBkZXByZWNhdGVkLlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcmV0dXJuIHshLi4vZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMC4xL2xvY2FsaXphdGlvbi5Mb2NhbGl6YXRpb25TZXJ2aWNlfVxuICAgKi9cbiAgc3RhdGljIGxvY2FsaXphdGlvblNlcnZpY2VWMDEod2luKSB7XG4gICAgcmV0dXJuIGdldFNlcnZpY2Uod2luLCAnbG9jYWxpemF0aW9uLXYwMScpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEByZXR1cm4gez9Qcm9taXNlPD8uLi9leHRlbnNpb25zL2FtcC12aWV3ZXItaW50ZWdyYXRpb24vMC4xL3ZhcmlhYmxlLXNlcnZpY2UuVmlld2VySW50ZWdyYXRpb25WYXJpYWJsZURlZj59XG4gICAqL1xuICBzdGF0aWMgdmlld2VySW50ZWdyYXRpb25WYXJpYWJsZVNlcnZpY2VGb3JPck51bGwod2luKSB7XG4gICAgcmV0dXJuIChcbiAgICAvKiogQHR5cGUgeyFQcm9taXNlPD8uLi9leHRlbnNpb25zL2FtcC12aWV3ZXItaW50ZWdyYXRpb24vMC4xL3ZhcmlhYmxlLXNlcnZpY2UuVmlld2VySW50ZWdyYXRpb25WYXJpYWJsZURlZj59ICovXG4gICAgICAoZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZSh3aW4sICd2aWV3ZXItaW50ZWdyYXRpb24tdmFyaWFibGUnLFxuICAgICAgICAgICdhbXAtdmlld2VyLWludGVncmF0aW9uJywgdHJ1ZSkpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAgICogQHJldHVybiB7IVByb21pc2U8IS4uL2V4dGVuc2lvbnMvYW1wLWFuaW1hdGlvbi8wLjEvd2ViLWFuaW1hdGlvbi1zZXJ2aWNlLldlYkFuaW1hdGlvblNlcnZpY2U+fVxuICAgKi9cbiAgc3RhdGljIHdlYkFuaW1hdGlvblNlcnZpY2VGb3IoZWxlbWVudE9yQW1wRG9jKSB7XG4gICAgcmV0dXJuICgvKiogQHR5cGUgeyFQcm9taXNlPCEuLi9leHRlbnNpb25zL2FtcC1hbmltYXRpb24vMC4xL3dlYi1hbmltYXRpb24tc2VydmljZS5XZWJBbmltYXRpb25TZXJ2aWNlPn0gKi9cbiAgICAgIChnZXRFbGVtZW50U2VydmljZUZvckRvYyhcbiAgICAgICAgICBlbGVtZW50T3JBbXBEb2MsICd3ZWItYW5pbWF0aW9uJywgJ2FtcC1hbmltYXRpb24nKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhLi9zZXJ2aWNlL3N0b3JhZ2UtaW1wbC5TdG9yYWdlPn1cbiAgICovXG4gIHN0YXRpYyBzdG9yYWdlRm9yRG9jKGVsZW1lbnRPckFtcERvYykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlPCEuL3NlcnZpY2Uvc3RvcmFnZS1pbXBsLlN0b3JhZ2U+fSAqLyAoXG4gICAgICBnZXRTZXJ2aWNlUHJvbWlzZUZvckRvYyhlbGVtZW50T3JBbXBEb2MsICdzdG9yYWdlJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luZG93XG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvdGVtcGxhdGUtaW1wbC5UZW1wbGF0ZXN9XG4gICAqL1xuICBzdGF0aWMgdGVtcGxhdGVzRm9yKHdpbmRvdykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UvdGVtcGxhdGUtaW1wbC5UZW1wbGF0ZXN9ICovIChcbiAgICAgIGdldFNlcnZpY2Uod2luZG93LCAndGVtcGxhdGVzJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luZG93XG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvdGltZXItaW1wbC5UaW1lcn1cbiAgICovXG4gIHN0YXRpYyB0aW1lckZvcih3aW5kb3cpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL3RpbWVyLWltcGwuVGltZXJ9ICovIChcbiAgICAgIGdldFNlcnZpY2Uod2luZG93LCAndGltZXInKSk7XG4gIH1cblxuICAvKipcbiAgICogVW5saWtlIG1vc3Qgc2VydmljZSBnZXR0ZXJzLCBwYXNzaW5nIGBOb2RlYCBpcyBuZWNlc3NhcnkgZm9yIHNvbWUgRklFLXNjb3BlXG4gICAqIHNlcnZpY2VzIHNpbmNlIHNvbWV0aW1lcyB3ZSBvbmx5IGhhdmUgdGhlIEZJRSBEb2N1bWVudCBmb3IgY29udGV4dC5cbiAgICogQHBhcmFtIHshTm9kZXwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gbm9kZU9yRG9jXG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvdXJsLXJlcGxhY2VtZW50cy1pbXBsLlVybFJlcGxhY2VtZW50c31cbiAgICovXG4gIHN0YXRpYyB1cmxSZXBsYWNlbWVudHNGb3JEb2Mobm9kZU9yRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS91cmwtcmVwbGFjZW1lbnRzLWltcGwuVXJsUmVwbGFjZW1lbnRzfSAqLyAoXG4gICAgICBnZXRFeGlzdGluZ1NlcnZpY2VGb3JEb2NJbkVtYmVkU2NvcGUoXG4gICAgICAgICAgbm9kZU9yRG9jLCAndXJsLXJlcGxhY2UnLCAvKiBvcHRfZmFsbGJhY2tUb1RvcFdpbiAqLyB0cnVlKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCEuLi9leHRlbnNpb25zL2FtcC11c2VyLW5vdGlmaWNhdGlvbi8wLjEvYW1wLXVzZXItbm90aWZpY2F0aW9uLlVzZXJOb3RpZmljYXRpb25NYW5hZ2VyPn1cbiAgICovXG4gIHN0YXRpYyB1c2VyTm90aWZpY2F0aW9uTWFuYWdlckZvckRvYyhlbGVtZW50T3JBbXBEb2MpIHtcbiAgICByZXR1cm4gKC8qKiBAdHlwZSB7IVByb21pc2U8IS4uL2V4dGVuc2lvbnMvYW1wLXVzZXItbm90aWZpY2F0aW9uLzAuMS9hbXAtdXNlci1ub3RpZmljYXRpb24uVXNlck5vdGlmaWNhdGlvbk1hbmFnZXI+fSAqL1xuICAgICAgKGdldEVsZW1lbnRTZXJ2aWNlRm9yRG9jKGVsZW1lbnRPckFtcERvYywgJ3VzZXJOb3RpZmljYXRpb25NYW5hZ2VyJyxcbiAgICAgICAgICAnYW1wLXVzZXItbm90aWZpY2F0aW9uJykpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIGNvbnNlbnRQb2xpY3kgU2VydmljZSBvciBhIHByb21pc2UgZm9yIG51bGwgaWZcbiAgICogdGhlIHNlcnZpY2UgaXMgbm90IGF2YWlsYWJsZSBvbiB0aGUgY3VycmVudCBwYWdlLlxuICAgKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAgICogQHJldHVybiB7IVByb21pc2U8Py4uL2V4dGVuc2lvbnMvYW1wLWNvbnNlbnQvMC4xL2NvbnNlbnQtcG9saWN5LW1hbmFnZXIuQ29uc2VudFBvbGljeU1hbmFnZXI+fVxuICAgKi9cbiAgc3RhdGljIGNvbnNlbnRQb2xpY3lTZXJ2aWNlRm9yRG9jT3JOdWxsKGVsZW1lbnRPckFtcERvYykge1xuICAgIHJldHVybiAoLyoqIEB0eXBlIHshUHJvbWlzZTw/Li4vZXh0ZW5zaW9ucy9hbXAtY29uc2VudC8wLjEvY29uc2VudC1wb2xpY3ktbWFuYWdlci5Db25zZW50UG9saWN5TWFuYWdlcj59ICovXG4gICAgICAoZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZUZvckRvYyhlbGVtZW50T3JBbXBEb2MsXG4gICAgICAgICAgJ2NvbnNlbnRQb2xpY3lNYW5hZ2VyJywgJ2FtcC1jb25zZW50JykpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIGdlbyBzZXJ2aWNlIG9yIGEgcHJvbWlzZSBmb3IgbnVsbCBpZlxuICAgKiB0aGUgc2VydmljZSBpcyBub3QgYXZhaWxhYmxlIG9uIHRoZSBjdXJyZW50IHBhZ2UuXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZTw/Li4vZXh0ZW5zaW9ucy9hbXAtZ2VvLzAuMS9hbXAtZ2VvLkdlb0RlZj59XG4gICAqL1xuICBzdGF0aWMgZ2VvRm9yRG9jT3JOdWxsKGVsZW1lbnRPckFtcERvYykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlPD8uLi9leHRlbnNpb25zL2FtcC1nZW8vMC4xL2FtcC1nZW8uR2VvRGVmPn0gKi8gKFxuICAgICAgZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZUZvckRvYyhcbiAgICAgICAgICBlbGVtZW50T3JBbXBEb2MsICdnZW8nLCAnYW1wLWdlbycsIHRydWUpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVbmxpa2UgbW9zdCBzZXJ2aWNlIGdldHRlcnMsIHBhc3NpbmcgYE5vZGVgIGlzIG5lY2Vzc2FyeSBmb3Igc29tZSBGSUUtc2NvcGVcbiAgICogc2VydmljZXMgc2luY2Ugc29tZXRpbWVzIHdlIG9ubHkgaGF2ZSB0aGUgRklFIERvY3VtZW50IGZvciBjb250ZXh0LlxuICAgKiBAcGFyYW0geyFOb2RlfCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBub2RlT3JEb2NcbiAgICogQHJldHVybiB7IS4vc2VydmljZS91cmwtaW1wbC5Vcmx9XG4gICAqL1xuICBzdGF0aWMgdXJsRm9yRG9jKG5vZGVPckRvYykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UvdXJsLWltcGwuVXJsfSAqLyAoXG4gICAgICBnZXRFeGlzdGluZ1NlcnZpY2VGb3JEb2NJbkVtYmVkU2NvcGUoXG4gICAgICAgICAgbm9kZU9yRG9jLCAndXJsJywgLyogb3B0X2ZhbGxiYWNrVG9Ub3BXaW4gKi8gdHJ1ZSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgZXhwZXJpbWVudCB2YXJpYW50cyBvciBhIHByb21pc2UgZm9yIG51bGwgaWYgaXRcbiAgICogaXMgbm90IGF2YWlsYWJsZSBvbiB0aGUgY3VycmVudCBwYWdlLlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTw/T2JqZWN0PHN0cmluZz4+fVxuICAgKi9cbiAgc3RhdGljIHZhcmlhbnRGb3JPck51bGwod2luKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2U8P09iamVjdDxzdHJpbmc+Pn0gKi8gKFxuICAgICAgZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZSh3aW4sICd2YXJpYW50JywgJ2FtcC1leHBlcmltZW50JywgdHJ1ZSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL3ZpZGVvLXNlcnZpY2UtaW50ZXJmYWNlLlZpZGVvU2VydmljZUludGVyZmFjZX1cbiAgICovXG4gIHN0YXRpYyB2aWRlb01hbmFnZXJGb3JEb2MoZWxlbWVudE9yQW1wRG9jKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIC8qKiBAdHlwZSB7IS4vc2VydmljZS92aWRlby1zZXJ2aWNlLWludGVyZmFjZS5WaWRlb1NlcnZpY2VJbnRlcmZhY2V9ICovIChcbiAgICAgICAgZ2V0U2VydmljZUZvckRvYyhlbGVtZW50T3JBbXBEb2MsICd2aWRlby1tYW5hZ2VyJykpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VzIGdldFNlcnZpY2VGb3JEb2NEZXByZWNhdGVkKCkgc2luY2UgVmlld2VyIGlzIGEgc3RhcnR1cCBzZXJ2aWNlLlxuICAgKiBAcGFyYW0geyFOb2RlfCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBub2RlT3JEb2NcbiAgICogQHJldHVybiB7IS4vc2VydmljZS92aWV3ZXItaW1wbC5WaWV3ZXJ9XG4gICAqL1xuICBzdGF0aWMgdmlld2VyRm9yRG9jKG5vZGVPckRvYykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2Uvdmlld2VyLWltcGwuVmlld2VyfSAqLyAoXG4gICAgICBnZXRTZXJ2aWNlRm9yRG9jRGVwcmVjYXRlZChub2RlT3JEb2MsICd2aWV3ZXInKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBwcm9taXNlIGZvciB0aGUgdmlld2VyLiBUaGlzIGlzIGFuIHVudXN1YWwgY2FzZSBhbmQgbmVjZXNzYXJ5IG9ubHlcbiAgICogZm9yIHNlcnZpY2VzIHRoYXQgbmVlZCByZWZlcmVuY2UgdG8gdGhlIHZpZXdlciBiZWZvcmUgaXQgaGFzIGJlZW5cbiAgICogaW5pdGlhbGl6ZWQuIE1vc3Qgb2YgdGhlIGNvZGUsIGhvd2V2ZXIsIGp1c3Qgc2hvdWxkIHVzZSBgdmlld2VyRm9yRG9jYC5cbiAgICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCEuL3NlcnZpY2Uvdmlld2VyLWltcGwuVmlld2VyPn1cbiAgICovXG4gIHN0YXRpYyB2aWV3ZXJQcm9taXNlRm9yRG9jKGVsZW1lbnRPckFtcERvYykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlPCEuL3NlcnZpY2Uvdmlld2VyLWltcGwuVmlld2VyPn0gKi8gKFxuICAgICAgZ2V0U2VydmljZVByb21pc2VGb3JEb2MoZWxlbWVudE9yQW1wRG9jLCAndmlld2VyJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luZG93XG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvdnN5bmMtaW1wbC5Wc3luY31cbiAgICovXG4gIHN0YXRpYyB2c3luY0Zvcih3aW5kb3cpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL3ZzeW5jLWltcGwuVnN5bmN9ICovIChcbiAgICAgIGdldFNlcnZpY2Uod2luZG93LCAndnN5bmMnKSk7XG4gIH1cblxuICAvKipcbiAgICogVXNlcyBnZXRTZXJ2aWNlRm9yRG9jRGVwcmVjYXRlZCgpIHNpbmNlIFZpZXdwb3J0IGlzIGEgc3RhcnR1cCBzZXJ2aWNlLlxuICAgKiBAcGFyYW0geyFOb2RlfCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBub2RlT3JEb2NcbiAgICogQHJldHVybiB7IS4vc2VydmljZS92aWV3cG9ydC92aWV3cG9ydC1pbXBsLlZpZXdwb3J0fVxuICAgKi9cbiAgc3RhdGljIHZpZXdwb3J0Rm9yRG9jKG5vZGVPckRvYykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2Uvdmlld3BvcnQvdmlld3BvcnQtaW1wbC5WaWV3cG9ydH0gKi8gKFxuICAgICAgZ2V0U2VydmljZUZvckRvY0RlcHJlY2F0ZWQobm9kZU9yRG9jLCAndmlld3BvcnQnKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5kb3dcbiAgICogQHJldHVybiB7IS4vc2VydmljZS94aHItaW1wbC5YaHJ9XG4gICAqL1xuICBzdGF0aWMgeGhyRm9yKHdpbmRvdykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UveGhyLWltcGwuWGhyfSAqLyAoZ2V0U2VydmljZSh3aW5kb3csICd4aHInKSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBfbWF0Y2hcbiAqIEBwYXJhbSB7c3RyaW5nfSBjaGFyYWN0ZXJcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gdG9VcHBlckNhc2UoX21hdGNoLCBjaGFyYWN0ZXIpIHtcbiAgcmV0dXJuIGNoYXJhY3Rlci50b1VwcGVyQ2FzZSgpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBtYXRjaFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBwcmVwZW5kRGFzaEFuZFRvTG93ZXJDYXNlKG1hdGNoKSB7XG4gIHJldHVybiAnLScgKyBtYXRjaC50b0xvd2VyQ2FzZSgpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEF0dHJpYnV0ZSBuYW1lIGNvbnRhaW5pbmcgZGFzaGVzLlxuICogQHJldHVybiB7c3RyaW5nfSBEYXNoZXMgcmVtb3ZlZCBhbmQgc3VjY2Vzc2l2ZSBjaGFyYWN0ZXIgc2VudCB0byB1cHBlciBjYXNlLlxuICogdmlzaWJsZUZvclRlc3RpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRhc2hUb0NhbWVsQ2FzZShuYW1lKSB7XG4gIHJldHVybiBuYW1lLnJlcGxhY2UoLy0oW2Etel0pL2csIHRvVXBwZXJDYXNlKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhIHN0cmluZyB0aGF0IGlzIGluIGNhbWVsQ2FzZSB0byBvbmUgdGhhdCBpcyBpbiBkYXNoLWNhc2UuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBzdHJpbmcgaW4gZGFzaC1jYXNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FtZWxDYXNlVG9EYXNoKHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoLyg/IV4pW0EtWl0vZywgcHJlcGVuZERhc2hBbmRUb0xvd2VyQ2FzZSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgQXR0cmlidXRlIG5hbWUgd2l0aCBkYXNoZXNcbiAqIEByZXR1cm4ge3N0cmluZ30gRGFzaGVzIHJlcGxhY2VkIGJ5IHVuZGVybGluZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkYXNoVG9VbmRlcmxpbmUobmFtZSkge1xuICByZXR1cm4gbmFtZS5yZXBsYWNlKCctJywgJ18nKTtcbn1cblxuLyoqXG4gKiBQb2x5ZmlsbCBmb3IgU3RyaW5nLnByb3RvdHlwZS5lbmRzV2l0aC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmdcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdWZmaXhcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlbmRzV2l0aChzdHJpbmcsIHN1ZmZpeCkge1xuICBjb25zdCBpbmRleCA9IHN0cmluZy5sZW5ndGggLSBzdWZmaXgubGVuZ3RoO1xuICByZXR1cm4gaW5kZXggPj0gMCAmJiBzdHJpbmcuaW5kZXhPZihzdWZmaXgsIGluZGV4KSA9PSBpbmRleDtcbn1cblxuLyoqXG4gKiBQb2x5ZmlsbCBmb3IgU3RyaW5nLnByb3RvdHlwZS5zdGFydHNXaXRoLlxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZ1xuICogQHBhcmFtIHtzdHJpbmd9IHByZWZpeFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0c1dpdGgoc3RyaW5nLCBwcmVmaXgpIHtcbiAgaWYgKHByZWZpeC5sZW5ndGggPiBzdHJpbmcubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBzdHJpbmcubGFzdEluZGV4T2YocHJlZml4LCAwKSA9PSAwO1xufVxuXG4vKipcbiAqIEV4cGFuZHMgcGxhY2Vob2xkZXJzIGluIGEgZ2l2ZW4gdGVtcGxhdGUgc3RyaW5nIHdpdGggdmFsdWVzLlxuICpcbiAqIFBsYWNlaG9sZGVycyB1c2UgJHtrZXktbmFtZX0gc3ludGF4IGFuZCBhcmUgcmVwbGFjZWQgd2l0aCB0aGUgdmFsdWVcbiAqIHJldHVybmVkIGZyb20gdGhlIGdpdmVuIGdldHRlciBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGVtcGxhdGUgVGhlIHRlbXBsYXRlIHN0cmluZyB0byBleHBhbmQuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHN0cmluZyk6Kn0gZ2V0dGVyIEZ1bmN0aW9uIHVzZWQgdG8gcmV0cmlldmUgYSB2YWx1ZSBmb3IgYVxuICogICBwbGFjZWhvbGRlci4gUmV0dXJucyB2YWx1ZXMgd2lsbCBiZSBjb2VyY2VkIGludG8gc3RyaW5ncy5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X21heEl0ZXJhdGlvbnMgTnVtYmVyIG9mIHRpbWVzIHRvIGV4cGFuZCB0aGUgdGVtcGxhdGUuXG4gKiAgIERlZmF1bHRzIHRvIDEsIGJ1dCBzaG91bGQgYmUgc2V0IHRvIGEgbGFyZ2VyIHZhbHVlIHlvdXIgcGxhY2Vob2xkZXIgdG9rZW5zXG4gKiAgIGNhbiBiZSBleHBhbmRlZCB0byBvdGhlciBwbGFjZWhvbGRlciB0b2tlbnMuIFRha2UgY2F1dGlvbiB3aXRoIGxhcmdlIHZhbHVlc1xuICogICBhcyByZWN1cnNpdmVseSBleHBhbmRpbmcgYSBzdHJpbmcgY2FuIGJlIGV4cG9uZW50aWFsbHkgZXhwZW5zaXZlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXhwYW5kVGVtcGxhdGUodGVtcGxhdGUsIGdldHRlciwgb3B0X21heEl0ZXJhdGlvbnMpIHtcbiAgY29uc3QgbWF4SXRlcmF0aW9ucyA9IG9wdF9tYXhJdGVyYXRpb25zIHx8IDE7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbWF4SXRlcmF0aW9uczsgaSsrKSB7XG4gICAgbGV0IG1hdGNoZXMgPSAwO1xuICAgIHRlbXBsYXRlID0gdGVtcGxhdGUucmVwbGFjZSgvXFwkeyhbXn1dKil9L2csIChfYSwgYikgPT4ge1xuICAgICAgbWF0Y2hlcysrO1xuICAgICAgcmV0dXJuIGdldHRlcihiKTtcbiAgICB9KTtcbiAgICBpZiAoIW1hdGNoZXMpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdGVtcGxhdGU7XG59XG5cbi8qKlxuICogSGFzaCBmdW5jdGlvbiBkamIyYVxuICogVGhpcyBpcyBpbnRlbmRlZCB0byBiZSBhIHNpbXBsZSwgZmFzdCBoYXNoaW5nIGZ1bmN0aW9uIHVzaW5nIG1pbmltYWwgY29kZS5cbiAqIEl0IGRvZXMgKm5vdCogaGF2ZSBnb29kIGNyeXB0b2dyYXBoaWMgcHJvcGVydGllcy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge3N0cmluZ30gMzItYml0IHVuc2lnbmVkIGhhc2ggb2YgdGhlIHN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5nSGFzaDMyKHN0cikge1xuICBjb25zdCB7bGVuZ3RofSA9IHN0cjtcbiAgbGV0IGhhc2ggPSA1MzgxO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgaGFzaCA9IGhhc2ggKiAzMyBeIHN0ci5jaGFyQ29kZUF0KGkpO1xuICB9XG4gIC8vIENvbnZlcnQgZnJvbSAzMi1iaXQgc2lnbmVkIHRvIHVuc2lnbmVkLlxuICByZXR1cm4gU3RyaW5nKGhhc2ggPj4+IDApO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7U2VydmljZXN9IGZyb20gJy4vc2VydmljZXMnO1xuaW1wb3J0IHtkZXYsIHJldGhyb3dBc3luY30gZnJvbSAnLi9sb2cnO1xuaW1wb3J0IHtpbnNlcnRBZnRlck9yQXRTdGFydCwgd2FpdEZvckJvZHl9IGZyb20gJy4vZG9tJztcbmltcG9ydCB7bWFwfSBmcm9tICcuL3V0aWxzL29iamVjdCc7XG5pbXBvcnQge3NldFN0eWxlc30gZnJvbSAnLi9zdHlsZSc7XG5pbXBvcnQge3dhaXRGb3JTZXJ2aWNlc30gZnJvbSAnLi9yZW5kZXItZGVsYXlpbmctc2VydmljZXMnO1xuXG5jb25zdCBUUkFOU0ZPUk1FUl9QUk9QID0gJ19fQU1QX0NTU19UUic7XG5jb25zdCBTVFlMRV9NQVBfUFJPUCA9ICdfX0FNUF9DU1NfU00nO1xuY29uc3QgYm9keVZpc2libGVTZW50aW5lbCA9ICdfX0FNUF9CT0RZX1ZJU0lCTEUnO1xuXG5cbi8qKlxuICogQWRkcyB0aGUgZ2l2ZW4gY3NzIHRleHQgdG8gdGhlIGdpdmVuIGFtcGRvYy5cbiAqXG4gKiBUaGUgc3R5bGUgdGFncyB3aWxsIGJlIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGhlYWQgYmVmb3JlIGFsbCBhdXRob3JcbiAqIHN0eWxlcy4gT25lIGVsZW1lbnQgY2FuIGJlIHRoZSBtYWluIHJ1bnRpbWUgQ1NTLiBUaGlzIGlzIGd1YXJhbnRlZWRcbiAqIHRvIGFsd2F5cyBiZSB0aGUgZmlyc3Qgc3R5bGVzaGVldCBpbiB0aGUgZG9jLlxuICpcbiAqIEBwYXJhbSB7IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGFtcGRvYyBUaGUgYW1wZG9jIHRoYXQgc2hvdWxkIGdldCB0aGUgbmV3IHN0eWxlcy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBjc3NUZXh0XG4gKiBAcGFyYW0gez9mdW5jdGlvbighRWxlbWVudCl8dW5kZWZpbmVkfSBjYiBDYWxsZWQgd2hlbiB0aGUgbmV3IHN0eWxlcyBhcmUgYXZhaWxhYmxlLlxuICogICAgIE5vdCB1c2luZyBhIHByb21pc2UsIGJlY2F1c2UgdGhpcyBpcyBzeW5jaHJvbm91cyB3aGVuIHBvc3NpYmxlLlxuICogICAgIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2UuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaXNSdW50aW1lQ3NzIElmIHRydWUsIHRoaXMgc3R5bGUgdGFnIHdpbGwgYmUgaW5zZXJ0ZWRcbiAqICAgICBhcyB0aGUgZmlyc3QgZWxlbWVudCBpbiBoZWFkIGFuZCBhbGwgc3R5bGUgZWxlbWVudHMgd2lsbCBiZSBwb3NpdGlvbmVkXG4gKiAgICAgYWZ0ZXIuXG4gKiBAcGFyYW0ge3N0cmluZz19IG9wdF9leHRcbiAqIEByZXR1cm4geyFFbGVtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbFN0eWxlc0ZvckRvYyhcbiAgYW1wZG9jLCBjc3NUZXh0LCBjYiwgb3B0X2lzUnVudGltZUNzcywgb3B0X2V4dCkge1xuICBjb25zdCBjc3NSb290ID0gYW1wZG9jLmdldEhlYWROb2RlKCk7XG4gIGNvbnN0IHN0eWxlID0gaW5zZXJ0U3R5bGVFbGVtZW50KFxuICAgICAgY3NzUm9vdCxcbiAgICAgIG1heWJlVHJhbnNmb3JtKGNzc1Jvb3QsIGNzc1RleHQpLFxuICAgICAgb3B0X2lzUnVudGltZUNzcyB8fCBmYWxzZSxcbiAgICAgIG9wdF9leHQgfHwgbnVsbCk7XG5cbiAgaWYgKGNiKSB7XG4gICAgY29uc3Qgcm9vdE5vZGUgPSBhbXBkb2MuZ2V0Um9vdE5vZGUoKTtcbiAgICAvLyBTdHlsZXMgYXJlbid0IGFsd2F5cyBhdmFpbGFibGUgc3luY2hyb25vdXNseS4gRS5nLiBpZiB0aGVyZSBpcyBhXG4gICAgLy8gcGVuZGluZyBzdHlsZSBkb3dubG9hZCwgaXQgd2lsbCBoYXZlIHRvIGZpbmlzaCBiZWZvcmUgdGhlIG5ld1xuICAgIC8vIHN0eWxlIGlzIHZpc2libGUuXG4gICAgLy8gRm9yIHRoaXMgcmVhc29uIHdlIHBvbGwgdW50aWwgdGhlIHN0eWxlIGJlY29tZXMgYXZhaWxhYmxlLlxuICAgIC8vIFN5bmMgY2FzZS5cbiAgICBpZiAoc3R5bGVMb2FkZWQocm9vdE5vZGUsIHN0eWxlKSkge1xuICAgICAgY2Ioc3R5bGUpO1xuICAgICAgcmV0dXJuIHN0eWxlO1xuICAgIH1cbiAgICAvLyBQb2xsIHVudGlsIHN0eWxlcyBhcmUgYXZhaWxhYmxlLlxuICAgIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgaWYgKHN0eWxlTG9hZGVkKHJvb3ROb2RlLCBzdHlsZSkpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICAgIGNiKHN0eWxlKTtcbiAgICAgIH1cbiAgICB9LCA0KTtcbiAgfVxuICByZXR1cm4gc3R5bGU7XG59XG5cblxuLyoqXG4gKiBBZGRzIHRoZSBnaXZlbiBjc3MgdGV4dCB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQuXG4gKiBUT0RPKGR2b3l0ZW5rbywgIzEwNzA1KTogUmVtb3ZlIHRoaXMgbWV0aG9kIG9uY2UgRklFL2FtcGRvYyBtaWdyYXRpb24gaXNcbiAqIGRvbmUuXG4gKlxuICogQHBhcmFtIHshRG9jdW1lbnR9IGRvYyBUaGUgZG9jdW1lbnQgdGhhdCBzaG91bGQgZ2V0IHRoZSBuZXcgc3R5bGVzLlxuICogQHBhcmFtIHtzdHJpbmd9IGNzc1RleHRcbiAqIEBwYXJhbSB7P2Z1bmN0aW9uKCFFbGVtZW50KXx1bmRlZmluZWR9IGNiIENhbGxlZCB3aGVuIHRoZSBuZXcgc3R5bGVzIGFyZVxuICogICAgIGF2YWlsYWJsZS4gTm90IHVzaW5nIGEgcHJvbWlzZSwgYmVjYXVzZSB0aGlzIGlzIHN5bmNocm9ub3VzIHdoZW5cbiAqICAgICBwb3NzaWJsZS4gZm9yIGJldHRlciBwZXJmb3JtYW5jZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pc1J1bnRpbWVDc3MgSWYgdHJ1ZSwgdGhpcyBzdHlsZSB0YWcgd2lsbCBiZSBpbnNlcnRlZFxuICogICAgIGFzIHRoZSBmaXJzdCBlbGVtZW50IGluIGhlYWQgYW5kIGFsbCBzdHlsZSBlbGVtZW50cyB3aWxsIGJlIHBvc2l0aW9uZWRcbiAqICAgICBhZnRlci5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X2V4dFxuICogQHJldHVybiB7IUVsZW1lbnR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsU3R5bGVzTGVnYWN5KFxuICBkb2MsIGNzc1RleHQsIGNiLCBvcHRfaXNSdW50aW1lQ3NzLCBvcHRfZXh0KSB7XG4gIGNvbnN0IHN0eWxlID0gaW5zZXJ0U3R5bGVFbGVtZW50KFxuICAgICAgZGV2KCkuYXNzZXJ0RWxlbWVudChkb2MuaGVhZCksXG4gICAgICBjc3NUZXh0LFxuICAgICAgb3B0X2lzUnVudGltZUNzcyB8fCBmYWxzZSxcbiAgICAgIG9wdF9leHQgfHwgbnVsbCk7XG5cbiAgaWYgKGNiKSB7XG4gICAgLy8gU3R5bGVzIGFyZW4ndCBhbHdheXMgYXZhaWxhYmxlIHN5bmNocm9ub3VzbHkuIEUuZy4gaWYgdGhlcmUgaXMgYVxuICAgIC8vIHBlbmRpbmcgc3R5bGUgZG93bmxvYWQsIGl0IHdpbGwgaGF2ZSB0byBmaW5pc2ggYmVmb3JlIHRoZSBuZXdcbiAgICAvLyBzdHlsZSBpcyB2aXNpYmxlLlxuICAgIC8vIEZvciB0aGlzIHJlYXNvbiB3ZSBwb2xsIHVudGlsIHRoZSBzdHlsZSBiZWNvbWVzIGF2YWlsYWJsZS5cbiAgICAvLyBTeW5jIGNhc2UuXG4gICAgaWYgKHN0eWxlTG9hZGVkKGRvYywgc3R5bGUpKSB7XG4gICAgICBjYihzdHlsZSk7XG4gICAgICByZXR1cm4gc3R5bGU7XG4gICAgfVxuICAgIC8vIFBvbGwgdW50aWwgc3R5bGVzIGFyZSBhdmFpbGFibGUuXG4gICAgY29uc3QgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBpZiAoc3R5bGVMb2FkZWQoZG9jLCBzdHlsZSkpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICAgIGNiKHN0eWxlKTtcbiAgICAgIH1cbiAgICB9LCA0KTtcbiAgfVxuICByZXR1cm4gc3R5bGU7XG59XG5cblxuLyoqXG4gKiBDcmVhdGVzIHRoZSBwcm9wZXJseSBjb25maWd1cmVkIHN0eWxlIGVsZW1lbnQuXG4gKiBAcGFyYW0geyFFbGVtZW50fCFTaGFkb3dSb290fSBjc3NSb290XG4gKiBAcGFyYW0ge3N0cmluZ30gY3NzVGV4dFxuICogQHBhcmFtIHtib29sZWFufSBpc1J1bnRpbWVDc3NcbiAqIEBwYXJhbSB7P3N0cmluZ30gZXh0XG4gKiBAcmV0dXJuIHshRWxlbWVudH1cbiAqL1xuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KGNzc1Jvb3QsIGNzc1RleHQsIGlzUnVudGltZUNzcywgZXh0KSB7XG4gIGxldCBzdHlsZU1hcCA9IGNzc1Jvb3RbU1RZTEVfTUFQX1BST1BdO1xuICBpZiAoIXN0eWxlTWFwKSB7XG4gICAgc3R5bGVNYXAgPSBjc3NSb290W1NUWUxFX01BUF9QUk9QXSA9IG1hcCgpO1xuICB9XG5cbiAgY29uc3QgaXNFeHRDc3MgPSAhaXNSdW50aW1lQ3NzICYmXG4gICAgICAoZXh0ICYmIGV4dCAhPSAnYW1wLWN1c3RvbScgJiYgZXh0ICE9ICdhbXAta2V5ZnJhbWVzJyk7XG4gIGNvbnN0IGtleSA9XG4gICAgICBpc1J1bnRpbWVDc3MgPyAnYW1wLXJ1bnRpbWUnIDpcbiAgICAgICAgaXNFeHRDc3MgPyBgYW1wLWV4dGVuc2lvbj0ke2V4dH1gIDogbnVsbDtcblxuICAvLyBDaGVjayBpZiBpdCBoYXMgYWxyZWFkeSBiZWVuIGNyZWF0ZWQgb3IgZGlzY292ZXJlZC5cbiAgaWYgKGtleSkge1xuICAgIGNvbnN0IGV4aXN0aW5nID0gZ2V0RXhpc3RpbmdTdHlsZUVsZW1lbnQoY3NzUm9vdCwgc3R5bGVNYXAsIGtleSk7XG4gICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICByZXR1cm4gZXhpc3Rpbmc7XG4gICAgfVxuICB9XG5cbiAgLy8gQ3JlYXRlIHRoZSBuZXcgc3R5bGUgZWxlbWVudCBhbmQgYXBwZW5kIHRvIGNzc1Jvb3QuXG4gIGNvbnN0IGRvYyA9IChjc3NSb290Lm93bmVyRG9jdW1lbnQgfHwgY3NzUm9vdCk7XG4gIGNvbnN0IHN0eWxlID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gIHN0eWxlLi8qT0sqL3RleHRDb250ZW50ID0gY3NzVGV4dDtcbiAgbGV0IGFmdGVyRWxlbWVudCA9IG51bGw7XG4gIC8vIE1ha2Ugc3VyZSB0aGF0IHdlIHBsYWNlIHN0eWxlIHRhZ3MgYWZ0ZXIgdGhlIG1haW4gcnVudGltZSBDU1MuIE90aGVyd2lzZVxuICAvLyB0aGUgb3JkZXIgaXMgcmFuZG9tLlxuICBpZiAoaXNSdW50aW1lQ3NzKSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKCdhbXAtcnVudGltZScsICcnKTtcbiAgfSBlbHNlIGlmIChpc0V4dENzcykge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZSgnYW1wLWV4dGVuc2lvbicsIGV4dCB8fCAnJyk7XG4gICAgYWZ0ZXJFbGVtZW50ID0gZGV2KCkuYXNzZXJ0RWxlbWVudChnZXRFeGlzdGluZ1N0eWxlRWxlbWVudChcbiAgICAgICAgY3NzUm9vdCwgc3R5bGVNYXAsICdhbXAtcnVudGltZScpKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoZXh0KSB7XG4gICAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoZXh0LCAnJyk7XG4gICAgfVxuICAgIGFmdGVyRWxlbWVudCA9IGNzc1Jvb3QubGFzdENoaWxkO1xuICB9XG4gIGluc2VydEFmdGVyT3JBdFN0YXJ0KGNzc1Jvb3QsIHN0eWxlLCBhZnRlckVsZW1lbnQpO1xuICBpZiAoa2V5KSB7XG4gICAgc3R5bGVNYXBba2V5XSA9IHN0eWxlO1xuICB9XG4gIHJldHVybiBzdHlsZTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IUVsZW1lbnR8IVNoYWRvd1Jvb3R9IGNzc1Jvb3RcbiAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsICFFbGVtZW50Pn0gc3R5bGVNYXBcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcbiAqIEByZXR1cm4gez9FbGVtZW50fVxuICovXG5mdW5jdGlvbiBnZXRFeGlzdGluZ1N0eWxlRWxlbWVudChjc3NSb290LCBzdHlsZU1hcCwga2V5KSB7XG4gIC8vIEFscmVhZHkgY2FjaGVkLlxuICBpZiAoc3R5bGVNYXBba2V5XSkge1xuICAgIHJldHVybiBzdHlsZU1hcFtrZXldO1xuICB9XG4gIC8vIENoZWNrIGlmIHRoZSBzdHlsZSBoYXMgYWxyZWFkeSBiZWVuIGFkZGVkIGJ5IHRoZSBzZXJ2ZXIgbGF5b3V0LlxuICBjb25zdCBleGlzdGluZyA9IGNzc1Jvb3QuLypPSyovcXVlcnlTZWxlY3Rvcihgc3R5bGVbJHtrZXl9XWApO1xuICBpZiAoZXhpc3RpbmcpIHtcbiAgICBzdHlsZU1hcFtrZXldID0gZXhpc3Rpbmc7XG4gICAgcmV0dXJuIGV4aXN0aW5nO1xuICB9XG4gIC8vIE5vdGhpbmcgZm91bmQuXG4gIHJldHVybiBudWxsO1xufVxuXG5cbi8qKlxuICogQXBwbGllcyBhIHRyYW5zZm9ybWVyIHRvIHRoZSBDU1MgdGV4dCBpZiBpdCBoYXMgYmVlbiByZWdpc3RlcmVkLlxuICogQHBhcmFtIHshRWxlbWVudHwhU2hhZG93Um9vdH0gY3NzUm9vdFxuICogQHBhcmFtIHtmdW5jdGlvbihzdHJpbmcpOnN0cmluZ30gdHJhbnNmb3JtZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluc3RhbGxDc3NUcmFuc2Zvcm1lcihjc3NSb290LCB0cmFuc2Zvcm1lcikge1xuICBjc3NSb290W1RSQU5TRk9STUVSX1BST1BdID0gdHJhbnNmb3JtZXI7XG59XG5cblxuLyoqXG4gKiBBcHBsaWVzIGEgdHJhbnNmb3JtZXIgdG8gdGhlIENTUyB0ZXh0IGlmIGl0IGhhcyBiZWVuIHJlZ2lzdGVyZWQuXG4gKiBAcGFyYW0geyFFbGVtZW50fCFTaGFkb3dSb290fSBjc3NSb290XG4gKiBAcGFyYW0ge3N0cmluZ30gY3NzVGV4dFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBtYXliZVRyYW5zZm9ybShjc3NSb290LCBjc3NUZXh0KSB7XG4gIGNvbnN0IHRyYW5zZm9ybWVyID0gY3NzUm9vdFtUUkFOU0ZPUk1FUl9QUk9QXTtcbiAgcmV0dXJuIHRyYW5zZm9ybWVyID8gdHJhbnNmb3JtZXIoY3NzVGV4dCkgOiBjc3NUZXh0O1xufVxuXG5cbi8qKlxuICogU2V0cyB0aGUgZG9jdW1lbnQncyBib2R5IG9wYWNpdHkgdG8gMS5cbiAqIElmIHRoZSBib2R5IGlzIG5vdCB5ZXQgYXZhaWxhYmxlIChiZWNhdXNlIG91ciBzY3JpcHQgd2FzIGxvYWRlZFxuICogc3luY2hyb25vdXNseSksIHBvbGxzIHVudGlsIGl0IGlzLlxuICogQHBhcmFtIHshRG9jdW1lbnR9IGRvYyBUaGUgZG9jdW1lbnQgd2hvJ3MgYm9keSB3ZSBzaG91bGQgbWFrZSB2aXNpYmxlLlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X3dhaXRGb3JTZXJ2aWNlcyBXaGV0aGVyIHRoZSBib2R5IHZpc2liaWxpdHkgc2hvdWxkXG4gKiAgICAgYmUgYmxvY2tlZCBvbiBrZXkgc2VydmljZXMgYmVpbmcgbG9hZGVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWFrZUJvZHlWaXNpYmxlKGRvYywgb3B0X3dhaXRGb3JTZXJ2aWNlcykge1xuICBkZXYoKS5hc3NlcnQoZG9jLmRlZmF1bHRWaWV3LCAnUGFzc2VkIGluIGRvY3VtZW50IG11c3QgaGF2ZSBhIGRlZmF1bHRWaWV3Jyk7XG4gIGNvbnN0IHdpbiA9IC8qKiBAdHlwZSB7IVdpbmRvd30gKi8gKGRvYy5kZWZhdWx0Vmlldyk7XG4gIGlmICh3aW5bYm9keVZpc2libGVTZW50aW5lbF0pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3Qgc2V0ID0gKCkgPT4ge1xuICAgIHdpbltib2R5VmlzaWJsZVNlbnRpbmVsXSA9IHRydWU7XG4gICAgc2V0U3R5bGVzKGRldigpLmFzc2VydEVsZW1lbnQoZG9jLmJvZHkpLCB7XG4gICAgICBvcGFjaXR5OiAxLFxuICAgICAgdmlzaWJpbGl0eTogJ3Zpc2libGUnLFxuICAgICAgJ2FuaW1hdGlvbic6ICdub25lJyxcbiAgICB9KTtcbiAgICByZW5kZXJTdGFydGVkTm9JbmxpbmUoZG9jKTtcbiAgfTtcbiAgdHJ5IHtcbiAgICB3YWl0Rm9yQm9keShkb2MsICgpID0+IHtcbiAgICAgIGlmICh3aW5bYm9keVZpc2libGVTZW50aW5lbF0pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgd2luW2JvZHlWaXNpYmxlU2VudGluZWxdID0gdHJ1ZTtcbiAgICAgIGlmIChvcHRfd2FpdEZvclNlcnZpY2VzKSB7XG4gICAgICAgIHdhaXRGb3JTZXJ2aWNlcyh3aW4pLmNhdGNoKHJlYXNvbiA9PiB7XG4gICAgICAgICAgcmV0aHJvd0FzeW5jKHJlYXNvbik7XG4gICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9KS50aGVuKHNlcnZpY2VzID0+IHtcbiAgICAgICAgICBzZXQoKTtcbiAgICAgICAgICBpZiAoc2VydmljZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgU2VydmljZXMucmVzb3VyY2VzRm9yRG9jKGRvYykuLypPSyovc2NoZWR1bGVQYXNzKFxuICAgICAgICAgICAgICAgIDEsIC8qIHJlbGF5b3V0QWxsICovIHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcGVyZiA9IFNlcnZpY2VzLnBlcmZvcm1hbmNlRm9yKHdpbik7XG4gICAgICAgICAgICBwZXJmLnRpY2soJ21idicpO1xuICAgICAgICAgICAgcGVyZi5mbHVzaCgpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0KCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBJZiB0aGVyZSB3YXMgYW4gZXJyb3IgZHVyaW5nIHRoZSBsb2dpYyBhYm92ZSAoc3VjaCBhcyBzZXJ2aWNlIG5vdFxuICAgIC8vIHlldCBpbnN0YWxsZWQsIGRlZmluaXRlbHkgdHJ5IHRvIG1ha2UgdGhlIGJvZHkgdmlzaWJsZS5cbiAgICBzZXQoKTtcbiAgICAvLyBBdm9pZCBlcnJvcnMgaW4gdGhlIGZ1bmN0aW9uIHRvIGJyZWFrIGV4ZWN1dGlvbiBmbG93IGFzIHRoaXMgaXNcbiAgICAvLyBvZnRlbiBjYWxsZWQgYXMgYSBsYXN0IHJlc29ydC5cbiAgICByZXRocm93QXN5bmMoZSk7XG4gIH1cbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IURvY3VtZW50fSBkb2NcbiAqL1xuZnVuY3Rpb24gcmVuZGVyU3RhcnRlZE5vSW5saW5lKGRvYykge1xuICB0cnkge1xuICAgIFNlcnZpY2VzLnJlc291cmNlc0ZvckRvYyhkb2MpLnJlbmRlclN0YXJ0ZWQoKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIGBtYWtlQm9keVZpc2libGVgIGlzIGNhbGxlZCBpbiB0aGUgZXJyb3ItcHJvY2Vzc2luZyBjeWNsZSBhbmQgdGh1c1xuICAgIC8vIGNvdWxkIGJlIHRyaWdnZXJlZCB3aGVuIHJ1bnRpbWUncyBpbml0aWFsaXphdGlvbiBpcyBpbmNvbXBsZXRlIHdoaWNoXG4gICAgLy8gd291bGQgY2F1c2UgdW5yZWxhdGVkIGVycm9ycyB0byBiZSB0aHJvd24gaGVyZS5cbiAgfVxufVxuXG5cbi8qKlxuICogSW5kaWNhdGVzIHRoYXQgdGhlIGJvZHkgaXMgYWx3YXlzIHZpc2libGUuIEZvciBpbnN0YW5jZSwgaW4gY2FzZSBvZiBQV0EuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICovXG5leHBvcnQgZnVuY3Rpb24gYm9keUFsd2F5c1Zpc2libGUod2luKSB7XG4gIHdpbltib2R5VmlzaWJsZVNlbnRpbmVsXSA9IHRydWU7XG59XG5cblxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciBhIHN0eWxlIGVsZW1lbnQgd2FzIHJlZ2lzdGVyZWQgaW4gdGhlIERPTS5cbiAqIEBwYXJhbSB7IURvY3VtZW50fCFTaGFkb3dSb290fSBkb2NcbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHN0eWxlXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBzdHlsZUxvYWRlZChkb2MsIHN0eWxlKSB7XG4gIGNvbnN0IHNoZWV0cyA9IGRvYy5zdHlsZVNoZWV0cztcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGVldHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBzaGVldCA9IHNoZWV0c1tpXTtcbiAgICBpZiAoc2hlZXQub3duZXJOb2RlID09IHN0eWxlKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8vIE5vdGU6IGxvYWRlZCBieSAzcCBzeXN0ZW0uIENhbm5vdCByZWx5IG9uIGJhYmVsIHBvbHlmaWxscy5cbmltcG9ydCB7bWFwfSBmcm9tICcuL3V0aWxzL29iamVjdC5qcyc7XG5pbXBvcnQge3N0YXJ0c1dpdGh9IGZyb20gJy4vc3RyaW5nJztcblxuXG4vKiogQHR5cGUge09iamVjdDxzdHJpbmcsIHN0cmluZz59ICovXG5sZXQgcHJvcGVydHlOYW1lQ2FjaGU7XG5cbi8qKiBAY29uc3QgeyFBcnJheTxzdHJpbmc+fSAqL1xuY29uc3QgdmVuZG9yUHJlZml4ZXMgPSBbJ1dlYmtpdCcsICd3ZWJraXQnLCAnTW96JywgJ21veicsICdtcycsICdPJywgJ28nXTtcblxuXG4vKipcbiAqIEBleHBvcnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBjYW1lbENhc2UgY2FtZWwgY2FzZWQgc3RyaW5nXG4gKiBAcmV0dXJuIHtzdHJpbmd9IHRpdGxlIGNhc2VkIHN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gY2FtZWxDYXNlVG9UaXRsZUNhc2UoY2FtZWxDYXNlKSB7XG4gIHJldHVybiBjYW1lbENhc2UuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjYW1lbENhc2Uuc2xpY2UoMSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIHRoZSBzdHlsZSBpZiBhIHByZWZpeGVkIHZlcnNpb24gb2YgYSBwcm9wZXJ0eSBleGlzdHMgYW5kIHJldHVybnNcbiAqIGl0IG9yIHJldHVybnMgYW4gZW1wdHkgc3RyaW5nLlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7IU9iamVjdH0gc3R5bGVcbiAqIEBwYXJhbSB7c3RyaW5nfSB0aXRsZUNhc2UgdGhlIHRpdGxlIGNhc2UgdmVyc2lvbiBvZiBhIGNzcyBwcm9wZXJ0eSBuYW1lXG4gKiBAcmV0dXJuIHtzdHJpbmd9IHRoZSBwcmVmaXhlZCBwcm9wZXJ0eSBuYW1lIG9yIG51bGwuXG4gKi9cbmZ1bmN0aW9uIGdldFZlbmRvckpzUHJvcGVydHlOYW1lXyhzdHlsZSwgdGl0bGVDYXNlKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdmVuZG9yUHJlZml4ZXMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBwcm9wZXJ0eU5hbWUgPSB2ZW5kb3JQcmVmaXhlc1tpXSArIHRpdGxlQ2FzZTtcbiAgICBpZiAoc3R5bGVbcHJvcGVydHlOYW1lXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gcHJvcGVydHlOYW1lO1xuICAgIH1cbiAgfVxuICByZXR1cm4gJyc7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgcG9zc2libHkgcHJlZml4ZWQgSmF2YVNjcmlwdCBwcm9wZXJ0eSBuYW1lIG9mIGEgc3R5bGUgcHJvcGVydHlcbiAqIChleC4gV2Via2l0VHJhbnNpdGlvbkR1cmF0aW9uKSBnaXZlbiBhIGNhbWVsQ2FzZSdkIHZlcnNpb24gb2YgdGhlIHByb3BlcnR5XG4gKiAoZXguIHRyYW5zaXRpb25EdXJhdGlvbikuXG4gKiBAZXhwb3J0XG4gKiBAcGFyYW0geyFPYmplY3R9IHN0eWxlXG4gKiBAcGFyYW0ge3N0cmluZ30gY2FtZWxDYXNlIHRoZSBjYW1lbCBjYXNlZCB2ZXJzaW9uIG9mIGEgY3NzIHByb3BlcnR5IG5hbWVcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9ieXBhc3NDYWNoZSBieXBhc3MgdGhlIG1lbW9pemVkIGNhY2hlIG9mIHByb3BlcnR5XG4gKiAgIG1hcHBpbmdcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFZlbmRvckpzUHJvcGVydHlOYW1lKHN0eWxlLCBjYW1lbENhc2UsIG9wdF9ieXBhc3NDYWNoZSkge1xuICBpZiAoc3RhcnRzV2l0aChjYW1lbENhc2UsICctLScpKSB7XG4gICAgLy8gQ1NTIHZhcnMgYXJlIHJldHVybmVkIGFzIGlzLlxuICAgIHJldHVybiBjYW1lbENhc2U7XG4gIH1cbiAgaWYgKCFwcm9wZXJ0eU5hbWVDYWNoZSkge1xuICAgIHByb3BlcnR5TmFtZUNhY2hlID0gbWFwKCk7XG4gIH1cbiAgbGV0IHByb3BlcnR5TmFtZSA9IHByb3BlcnR5TmFtZUNhY2hlW2NhbWVsQ2FzZV07XG4gIGlmICghcHJvcGVydHlOYW1lIHx8IG9wdF9ieXBhc3NDYWNoZSkge1xuICAgIHByb3BlcnR5TmFtZSA9IGNhbWVsQ2FzZTtcbiAgICBpZiAoc3R5bGVbY2FtZWxDYXNlXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCB0aXRsZUNhc2UgPSBjYW1lbENhc2VUb1RpdGxlQ2FzZShjYW1lbENhc2UpO1xuICAgICAgY29uc3QgcHJlZml4ZWRQcm9wZXJ0eU5hbWUgPSBnZXRWZW5kb3JKc1Byb3BlcnR5TmFtZV8oc3R5bGUsIHRpdGxlQ2FzZSk7XG5cbiAgICAgIGlmIChzdHlsZVtwcmVmaXhlZFByb3BlcnR5TmFtZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwcm9wZXJ0eU5hbWUgPSBwcmVmaXhlZFByb3BlcnR5TmFtZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFvcHRfYnlwYXNzQ2FjaGUpIHtcbiAgICAgIHByb3BlcnR5TmFtZUNhY2hlW2NhbWVsQ2FzZV0gPSBwcm9wZXJ0eU5hbWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBwcm9wZXJ0eU5hbWU7XG59XG5cblxuLyoqXG4gKiBTZXRzIHRoZSBDU1Mgc3R5bGVzIG9mIHRoZSBzcGVjaWZpZWQgZWxlbWVudCB3aXRoICFpbXBvcnRhbnQuIFRoZSBzdHlsZXNcbiAqIGFyZSBzcGVjaWZpZWQgYXMgYSBtYXAgZnJvbSBDU1MgcHJvcGVydHkgbmFtZXMgdG8gdGhlaXIgdmFsdWVzLlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgKj59IHN0eWxlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0SW1wb3J0YW50U3R5bGVzKGVsZW1lbnQsIHN0eWxlcykge1xuICBmb3IgKGNvbnN0IGsgaW4gc3R5bGVzKSB7XG4gICAgZWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShcbiAgICAgICAgZ2V0VmVuZG9ySnNQcm9wZXJ0eU5hbWUoc3R5bGVzLCBrKSwgc3R5bGVzW2tdLnRvU3RyaW5nKCksICdpbXBvcnRhbnQnKTtcbiAgfVxufVxuXG5cbi8qKlxuICogU2V0cyB0aGUgQ1NTIHN0eWxlIG9mIHRoZSBzcGVjaWZpZWQgZWxlbWVudCB3aXRoIG9wdGlvbmFsIHVuaXRzLCBlLmcuIFwicHhcIi5cbiAqIEBwYXJhbSB7P0VsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eVxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfdW5pdHNcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9ieXBhc3NDYWNoZVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0U3R5bGUoZWxlbWVudCwgcHJvcGVydHksIHZhbHVlLCBvcHRfdW5pdHMsIG9wdF9ieXBhc3NDYWNoZSkge1xuICBjb25zdCBwcm9wZXJ0eU5hbWUgPSBnZXRWZW5kb3JKc1Byb3BlcnR5TmFtZShlbGVtZW50LnN0eWxlLCBwcm9wZXJ0eSxcbiAgICAgIG9wdF9ieXBhc3NDYWNoZSk7XG4gIGlmIChwcm9wZXJ0eU5hbWUpIHtcbiAgICBlbGVtZW50LnN0eWxlW3Byb3BlcnR5TmFtZV0gPVxuICAgICAgLyoqIEB0eXBlIHtzdHJpbmd9ICovIChvcHRfdW5pdHMgPyB2YWx1ZSArIG9wdF91bml0cyA6IHZhbHVlKTtcbiAgfVxufVxuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIENTUyBzdHlsZSBvZiB0aGUgc3BlY2lmaWVkIGVsZW1lbnQuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHlcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9ieXBhc3NDYWNoZVxuICogQHJldHVybiB7Kn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFN0eWxlKGVsZW1lbnQsIHByb3BlcnR5LCBvcHRfYnlwYXNzQ2FjaGUpIHtcbiAgY29uc3QgcHJvcGVydHlOYW1lID0gZ2V0VmVuZG9ySnNQcm9wZXJ0eU5hbWUoZWxlbWVudC5zdHlsZSwgcHJvcGVydHksXG4gICAgICBvcHRfYnlwYXNzQ2FjaGUpO1xuICBpZiAoIXByb3BlcnR5TmFtZSkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuIGVsZW1lbnQuc3R5bGVbcHJvcGVydHlOYW1lXTtcbn1cblxuXG4vKipcbiAqIFNldHMgdGhlIENTUyBzdHlsZXMgb2YgdGhlIHNwZWNpZmllZCBlbGVtZW50LiBUaGUgc3R5bGVzXG4gKiBhIHNwZWNpZmllZCBhcyBhIG1hcCBmcm9tIENTUyBwcm9wZXJ0eSBuYW1lcyB0byB0aGVpciB2YWx1ZXMuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCAqPn0gc3R5bGVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRTdHlsZXMoZWxlbWVudCwgc3R5bGVzKSB7XG4gIGZvciAoY29uc3QgayBpbiBzdHlsZXMpIHtcbiAgICBzZXRTdHlsZShlbGVtZW50LCBrLCBzdHlsZXNba10pO1xuICB9XG59XG5cblxuLyoqXG4gKiBTaG93cyBvciBoaWRlcyB0aGUgc3BlY2lmaWVkIGVsZW1lbnQuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfZGlzcGxheVxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9nZ2xlKGVsZW1lbnQsIG9wdF9kaXNwbGF5KSB7XG4gIGlmIChvcHRfZGlzcGxheSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgb3B0X2Rpc3BsYXkgPSBnZXRTdHlsZShlbGVtZW50LCAnZGlzcGxheScpID09ICdub25lJztcbiAgfVxuICBzZXRTdHlsZShlbGVtZW50LCAnZGlzcGxheScsIG9wdF9kaXNwbGF5ID8gJycgOiAnbm9uZScpO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyBhIHBpeGVsIHZhbHVlLlxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBweCh2YWx1ZSkge1xuICByZXR1cm4gYCR7dmFsdWV9cHhgO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBkZWdyZWUgdmFsdWUuXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZyh2YWx1ZSkge1xuICByZXR1cm4gYCR7dmFsdWV9ZGVnYDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgXCJ0cmFuc2xhdGVYXCIgZm9yIENTUyBcInRyYW5zZm9ybVwiIHByb3BlcnR5LlxuICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSB2YWx1ZVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNsYXRlWCh2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGB0cmFuc2xhdGVYKCR7dmFsdWV9KWA7XG4gIH1cbiAgcmV0dXJuIGB0cmFuc2xhdGVYKCR7cHgodmFsdWUpfSlgO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyBhIFwidHJhbnNsYXRlWFwiIGZvciBDU1MgXCJ0cmFuc2Zvcm1cIiBwcm9wZXJ0eS5cbiAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30geFxuICogQHBhcmFtIHsobnVtYmVyfHN0cmluZyk9fSBvcHRfeVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNsYXRlKHgsIG9wdF95KSB7XG4gIGlmICh0eXBlb2YgeCA9PSAnbnVtYmVyJykge1xuICAgIHggPSBweCh4KTtcbiAgfVxuICBpZiAob3B0X3kgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBgdHJhbnNsYXRlKCR7eH0pYDtcbiAgfVxuICBpZiAodHlwZW9mIG9wdF95ID09ICdudW1iZXInKSB7XG4gICAgb3B0X3kgPSBweChvcHRfeSk7XG4gIH1cbiAgcmV0dXJuIGB0cmFuc2xhdGUoJHt4fSwgJHtvcHRfeX0pYDtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgYSBcInNjYWxlXCIgZm9yIENTUyBcInRyYW5zZm9ybVwiIHByb3BlcnR5LlxuICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSB2YWx1ZVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUodmFsdWUpIHtcbiAgcmV0dXJuIGBzY2FsZSgke3ZhbHVlfSlgO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBcInJvdGF0ZVwiIGZvciBDU1MgXCJ0cmFuc2Zvcm1cIiBwcm9wZXJ0eS5cbiAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30gdmFsdWVcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZSh2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09ICdudW1iZXInKSB7XG4gICAgdmFsdWUgPSBkZWcodmFsdWUpO1xuICB9XG4gIHJldHVybiBgcm90YXRlKCR7dmFsdWV9KWA7XG59XG5cbi8qKlxuICogUmVtb3ZlIGFscGhhIHZhbHVlIGZyb20gYSByZ2JhIGNvbG9yIHZhbHVlLlxuICogUmV0dXJuIHRoZSBuZXcgY29sb3IgcHJvcGVydHkgd2l0aCBhbHBoYSBlcXVhbHMgaWYgaGFzIHRoZSBhbHBoYSB2YWx1ZS5cbiAqIENhbGxlciBuZWVkcyB0byBtYWtlIHN1cmUgdGhlIGlucHV0IGNvbG9yIHZhbHVlIGlzIGEgdmFsaWQgcmdiYS9yZ2IgdmFsdWVcbiAqIEBwYXJhbSB7c3RyaW5nfSByZ2JhQ29sb3JcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUFscGhhRnJvbUNvbG9yKHJnYmFDb2xvcikge1xuICByZXR1cm4gcmdiYUNvbG9yLnJlcGxhY2UoXG4gICAgICAvXFwoKFteLF0rKSwoW14sXSspLChbXiwpXSspLFteKV0rXFwpL2csICcoJDEsJDIsJDMsIDEpJyk7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgY29tcHV0ZWQgc3R5bGUgb2YgdGhlIGVsZW1lbnQuIFRoZSBoZWxwZXIgaXMgbmVjZXNzYXJ5IHRvIGVuZm9yY2VcbiAqIHRoZSBwb3NzaWJsZSBgbnVsbGAgdmFsdWUgcmV0dXJuZWQgYnkgYSBidWdneSBGaXJlZm94LlxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbFxuICogQHJldHVybiB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlZFN0eWxlKHdpbiwgZWwpIHtcbiAgY29uc3Qgc3R5bGUgPSAvKiogQHR5cGUgez9DU1NTdHlsZURlY2xhcmF0aW9ufSAqLyh3aW4uZ2V0Q29tcHV0ZWRTdHlsZShlbCkpO1xuICByZXR1cm4gLyoqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgc3RyaW5nPn0gKi8oc3R5bGUpIHx8IG1hcCgpO1xufVxuXG5cbi8qKlxuICogUmVzZXRzIHN0eWxlcyB0aGF0IHdlcmUgc2V0IGR5bmFtaWNhbGx5IChpLmUuIGlubGluZSlcbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7IUFycmF5PHN0cmluZz59IHByb3BlcnRpZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0U3R5bGVzKGVsZW1lbnQsIHByb3BlcnRpZXMpIHtcbiAgY29uc3Qgc3R5bGVPYmogPSB7fTtcbiAgcHJvcGVydGllcy5mb3JFYWNoKHByb3AgPT4ge1xuICAgIHN0eWxlT2JqW3Byb3BdID0gbnVsbDtcbiAgfSk7XG4gIHNldFN0eWxlcyhlbGVtZW50LCBzdHlsZU9iaik7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyogQGNvbnN0ICovXG5jb25zdCB0b1N0cmluZ18gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4vKipcbiAqIFJldHVybnMgdGhlIEVDTUEgW1tDbGFzc11dIG9mIGEgdmFsdWVcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gdG9TdHJpbmcodmFsdWUpIHtcbiAgcmV0dXJuIHRvU3RyaW5nXy5jYWxsKHZhbHVlKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHZhbHVlIGlzIGFjdHVhbGx5IGFuIEFycmF5LlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQXJyYXkodmFsdWUpIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsdWUpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIGFycmF5LWxpa2Ugb2JqZWN0IHRvIGFuIGFycmF5LlxuICogQHBhcmFtIHs/SUFycmF5TGlrZTxUPnxzdHJpbmd9IGFycmF5TGlrZVxuICogQHJldHVybiB7IUFycmF5PFQ+fVxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvQXJyYXkoYXJyYXlMaWtlKSB7XG4gIGlmICghYXJyYXlMaWtlKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGNvbnN0IGFycmF5ID0gbmV3IEFycmF5KGFycmF5TGlrZS5sZW5ndGgpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5TGlrZS5sZW5ndGg7IGkrKykge1xuICAgIGFycmF5W2ldID0gYXJyYXlMaWtlW2ldO1xuICB9XG4gIHJldHVybiBhcnJheTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHZhbHVlIGlzIGFjdHVhbGx5IGFuIE9iamVjdC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gdG9TdHJpbmcodmFsdWUpID09PSAnW29iamVjdCBPYmplY3RdJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHZhbHVlIGlzIG9mIG51bWJlciB0eXBlIGFuZCBmaW5pdGUuXG4gKiBOYU4gYW5kIEluZmluaXR5IGFyZSBub3QgY29uc2lkZXJlZCBhIGZpbml0ZSBudW1iZXIuXG4gKiBTdHJpbmcgbnVtYmVycyBhcmUgbm90IGNvbnNpZGVyZWQgbnVtYmVycy5cbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Zpbml0ZU51bWJlcih2YWx1ZSkge1xuICByZXR1cm4gKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgaXNGaW5pdGUodmFsdWUpKTtcbn1cblxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciBgc2AgaXMgYSB2YWxpZCB2YWx1ZSBvZiBgZW51bU9iamAuXG4gKlxuICogQHBhcmFtIHshT2JqZWN0PFQ+fSBlbnVtT2JqXG4gKiBAcGFyYW0ge1R9IHNcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNFbnVtVmFsdWUoZW51bU9iaiwgcykge1xuICBmb3IgKGNvbnN0IGsgaW4gZW51bU9iaikge1xuICAgIGlmIChlbnVtT2JqW2tdID09PSBzKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIEV4dGVybnMgZGVjbGFyZSB0aGF0IGFjY2VzcyBgZGVmYXVsdFZpZXdgIGZyb20gYGRvY3VtZW50YCBvclxuICogYG93bmVyRG9jdW1lbnRgIGlzIG9mIHR5cGUgYChXaW5kb3d8bnVsbClgIGJ1dCBtb3N0IG9mIG91ciBwYXJhbWV0ZXIgdHlwZXNcbiAqIGFzc3VtZSB0aGF0IGl0IGlzIG5ldmVyIG51bGwuIFRoaXMgaXMgT0sgaW4gcHJhY3RpY2UgYXMgd2UgZXZlciBvbmx5IGdldFxuICogbnVsbCBvbiBkaXNjb25uZWN0ZWQgZG9jdW1lbnRzIG9yIG9sZCBJRS5cbiAqIFRoaXMgaGVscGVyIGZ1bmN0aW9uIGNhc3RzIGl0IGludG8ganVzdCBhIHNpbXBsZSBXaW5kb3cgcmV0dXJuIHR5cGUuXG4gKlxuICogQHBhcmFtIHshV2luZG93fG51bGx9IHdpbk9yTnVsbFxuICogQHJldHVybiB7IVdpbmRvd31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvV2luKHdpbk9yTnVsbCkge1xuICByZXR1cm4gLyoqIEB0eXBlIHshV2luZG93fSAqLyAod2luT3JOdWxsKTtcbn1cblxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7dHJ5RGVjb2RlVXJpQ29tcG9uZW50X30gZnJvbSAnLi91cmwtdHJ5LWRlY29kZS11cmktY29tcG9uZW50JztcblxuY29uc3QgcmVnZXggPSAvKD86XlsjP10/fCYpKFtePSZdKykoPzo9KFteJl0qKSk/L2c7XG5cbi8qKlxuICogUGFyc2VzIHRoZSBxdWVyeSBzdHJpbmcgb2YgYW4gVVJMLiBUaGlzIG1ldGhvZCByZXR1cm5zIGEgc2ltcGxlIGtleS92YWx1ZVxuICogbWFwLiBJZiB0aGVyZSBhcmUgZHVwbGljYXRlIGtleXMgdGhlIGxhdGVzdCB2YWx1ZSBpcyByZXR1cm5lZC5cbiAqXG4gKiBETyBOT1QgaW1wb3J0IHRoZSBmdW5jdGlvbiBmcm9tIHRoaXMgZmlsZS4gSW5zdGVhZCwgaW1wb3J0IHBhcnNlUXVlcnlTdHJpbmdcbiAqIGZyb20gYHNyYy91cmwuanNgLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBxdWVyeVN0cmluZ1xuICogQHJldHVybiB7IUpzb25PYmplY3R9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVF1ZXJ5U3RyaW5nXyhxdWVyeVN0cmluZykge1xuICBjb25zdCBwYXJhbXMgPSAvKiogQHR5cGUgeyFKc29uT2JqZWN0fSAqLyAoT2JqZWN0LmNyZWF0ZShudWxsKSk7XG4gIGlmICghcXVlcnlTdHJpbmcpIHtcbiAgICByZXR1cm4gcGFyYW1zO1xuICB9XG5cbiAgbGV0IG1hdGNoO1xuICB3aGlsZSAoKG1hdGNoID0gcmVnZXguZXhlYyhxdWVyeVN0cmluZykpKSB7XG4gICAgY29uc3QgbmFtZSA9IHRyeURlY29kZVVyaUNvbXBvbmVudF8obWF0Y2hbMV0sIG1hdGNoWzFdKTtcbiAgICBjb25zdCB2YWx1ZSA9IG1hdGNoWzJdID8gdHJ5RGVjb2RlVXJpQ29tcG9uZW50XyhtYXRjaFsyXSwgbWF0Y2hbMl0pIDogJyc7XG4gICAgcGFyYW1zW25hbWVdID0gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIHBhcmFtcztcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIFRyaWVzIHRvIGRlY29kZSBhIFVSSSBjb21wb25lbnQsIGZhbGxpbmcgYmFjayB0byBvcHRfZmFsbGJhY2sgKG9yIGFuIGVtcHR5XG4gKiBzdHJpbmcpXG4gKlxuICogRE8gTk9UIGltcG9ydCB0aGUgZnVuY3Rpb24gZnJvbSB0aGlzIGZpbGUuIEluc3RlYWQsIGltcG9ydFxuICogdHJ5RGVjb2RlVXJpQ29tcG9uZW50IGZyb20gYHNyYy91cmwuanNgLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb21wb25lbnRcbiAqIEBwYXJhbSB7c3RyaW5nPX0gZmFsbGJhY2tcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyeURlY29kZVVyaUNvbXBvbmVudF8oY29tcG9uZW50LCBmYWxsYmFjayA9ICcnKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChjb21wb25lbnQpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbGxiYWNrO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtMcnVDYWNoZX0gZnJvbSAnLi91dGlscy9scnUtY2FjaGUnO1xuaW1wb3J0IHtkaWN0fSBmcm9tICcuL3V0aWxzL29iamVjdCc7XG5pbXBvcnQge2VuZHNXaXRoLCBzdGFydHNXaXRofSBmcm9tICcuL3N0cmluZyc7XG5pbXBvcnQge2dldE1vZGV9IGZyb20gJy4vbW9kZSc7XG5pbXBvcnQge2lzQXJyYXl9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHtwYXJzZVF1ZXJ5U3RyaW5nX30gZnJvbSAnLi91cmwtcGFyc2UtcXVlcnktc3RyaW5nJztcbmltcG9ydCB7dHJ5RGVjb2RlVXJpQ29tcG9uZW50X30gZnJvbSAnLi91cmwtdHJ5LWRlY29kZS11cmktY29tcG9uZW50JztcbmltcG9ydCB7dXJsc30gZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0IHt1c2VyfSBmcm9tICcuL2xvZyc7XG5cbi8qKlxuICogQHR5cGUgeyFKc29uT2JqZWN0fVxuICovXG5jb25zdCBTRVJWSU5HX1RZUEVfUFJFRklYID0gZGljdCh7XG4gIC8vIE5vIHZpZXdlclxuICAnYyc6IHRydWUsXG4gIC8vIEluIHZpZXdlclxuICAndic6IHRydWUsXG4gIC8vIEFkIGxhbmRpbmcgcGFnZVxuICAnYSc6IHRydWUsXG4gIC8vIEFkXG4gICdhZCc6IHRydWUsXG59KTtcblxuLyoqXG4gKiBDYWNoZWQgYS10YWcgdG8gYXZvaWQgbWVtb3J5IGFsbG9jYXRpb24gZHVyaW5nIFVSTCBwYXJzaW5nLlxuICogQHR5cGUge0hUTUxBbmNob3JFbGVtZW50fVxuICovXG5sZXQgYTtcblxuLyoqXG4gKiBXZSBjYWNoZWQgYWxsIHBhcnNlZCBVUkxzLiBBcyBvZiBub3cgdGhlcmUgYXJlIG5vIHVzZSBjYXNlc1xuICogb2YgQU1QIGRvY3MgdGhhdCB3b3VsZCBldmVyIHBhcnNlIGFuIGFjdHVhbCBsYXJnZSBudW1iZXIgb2YgVVJMcyxcbiAqIGJ1dCB3ZSBvZnRlbiBwYXJzZSB0aGUgc2FtZSBvbmUgb3ZlciBhbmQgb3ZlciBhZ2Fpbi5cbiAqIEB0eXBlIHtMcnVDYWNoZX1cbiAqL1xubGV0IGNhY2hlO1xuXG4vKiogQHByaXZhdGUgQGNvbnN0IE1hdGNoZXMgYW1wX2pzXyogcGFyYW1ldGVycyBpbiBxdWVyeSBzdHJpbmcuICovXG5jb25zdCBBTVBfSlNfUEFSQU1TX1JFR0VYID0gL1s/Jl1hbXBfanNbXiZdKi87XG5cbi8qKiBAcHJpdmF0ZSBAY29uc3QgTWF0Y2hlcyBhbXBfZ3NhIHBhcmFtZXRlcnMgaW4gcXVlcnkgc3RyaW5nLiAqL1xuY29uc3QgQU1QX0dTQV9QQVJBTVNfUkVHRVggPSAvWz8mXWFtcF9nc2FbXiZdKi87XG5cbi8qKiBAcHJpdmF0ZSBAY29uc3QgTWF0Y2hlcyBhbXBfciBwYXJhbWV0ZXJzIGluIHF1ZXJ5IHN0cmluZy4gKi9cbmNvbnN0IEFNUF9SX1BBUkFNU19SRUdFWCA9IC9bPyZdYW1wX3JbXiZdKi87XG5cbi8qKiBAcHJpdmF0ZSBAY29uc3QgTWF0Y2hlcyB1c3FwIHBhcmFtZXRlcnMgZnJvbSBnb29nIGV4cGVyaW1lbnQgaW4gcXVlcnkgc3RyaW5nLiAqL1xuY29uc3QgR09PR0xFX0VYUEVSSU1FTlRfUEFSQU1TX1JFR0VYID0gL1s/Jl11c3FwW14mXSovO1xuXG5jb25zdCBJTlZBTElEX1BST1RPQ09MUyA9IFtcbiAgLyplc2xpbnQgbm8tc2NyaXB0LXVybDogMCovICdqYXZhc2NyaXB0OicsXG4gIC8qZXNsaW50IG5vLXNjcmlwdC11cmw6IDAqLyAnZGF0YTonLFxuICAvKmVzbGludCBuby1zY3JpcHQtdXJsOiAwKi8gJ3Zic2NyaXB0OicsXG5dO1xuXG4vKiogQGNvbnN0IHtzdHJpbmd9ICovXG5leHBvcnQgY29uc3QgU09VUkNFX09SSUdJTl9QQVJBTSA9ICdfX2FtcF9zb3VyY2Vfb3JpZ2luJztcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBjb3JyZWN0IG9yaWdpbiBmb3IgYSBnaXZlbiB3aW5kb3cuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7c3RyaW5nfSBvcmlnaW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFdpbk9yaWdpbih3aW4pIHtcbiAgcmV0dXJuIHdpbi5vcmlnaW4gfHwgcGFyc2VVcmxEZXByZWNhdGVkKHdpbi5sb2NhdGlvbi5ocmVmKS5vcmlnaW47XG59XG5cbi8qKlxuICogUmV0dXJucyBhIExvY2F0aW9uLWxpa2Ugb2JqZWN0IGZvciB0aGUgZ2l2ZW4gVVJMLiBJZiBpdCBpcyByZWxhdGl2ZSxcbiAqIHRoZSBVUkwgZ2V0cyByZXNvbHZlZC5cbiAqIENvbnNpZGVyIHRoZSByZXR1cm5lZCBvYmplY3QgaW1tdXRhYmxlLiBUaGlzIGlzIGVuZm9yY2VkIGR1cmluZ1xuICogdGVzdGluZyBieSBmcmVlemluZyB0aGUgb2JqZWN0LlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X25vY2FjaGVcbiAqIEByZXR1cm4geyFMb2NhdGlvbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVXJsRGVwcmVjYXRlZCh1cmwsIG9wdF9ub2NhY2hlKSB7XG4gIGlmICghYSkge1xuICAgIGEgPSAvKiogQHR5cGUgeyFIVE1MQW5jaG9yRWxlbWVudH0gKi8gKHNlbGYuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpKTtcbiAgICBjYWNoZSA9IHNlbGYuVXJsQ2FjaGUgfHwgKHNlbGYuVXJsQ2FjaGUgPSBuZXcgTHJ1Q2FjaGUoMTAwKSk7XG4gIH1cblxuICByZXR1cm4gcGFyc2VVcmxXaXRoQShhLCB1cmwsIG9wdF9ub2NhY2hlID8gbnVsbCA6IGNhY2hlKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgTG9jYXRpb24tbGlrZSBvYmplY3QgZm9yIHRoZSBnaXZlbiBVUkwuIElmIGl0IGlzIHJlbGF0aXZlLFxuICogdGhlIFVSTCBnZXRzIHJlc29sdmVkLlxuICogQ29uc2lkZXIgdGhlIHJldHVybmVkIG9iamVjdCBpbW11dGFibGUuIFRoaXMgaXMgZW5mb3JjZWQgZHVyaW5nXG4gKiB0ZXN0aW5nIGJ5IGZyZWV6aW5nIHRoZSBvYmplY3QuXG4gKiBAcGFyYW0geyFIVE1MQW5jaG9yRWxlbWVudH0gYVxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHBhcmFtIHtMcnVDYWNoZT19IG9wdF9jYWNoZVxuICogQHJldHVybiB7IUxvY2F0aW9ufVxuICogQHJlc3RyaWN0ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVXJsV2l0aEEoYSwgdXJsLCBvcHRfY2FjaGUpIHtcbiAgaWYgKG9wdF9jYWNoZSAmJiBvcHRfY2FjaGUuaGFzKHVybCkpIHtcbiAgICByZXR1cm4gb3B0X2NhY2hlLmdldCh1cmwpO1xuICB9XG5cbiAgYS5ocmVmID0gdXJsO1xuXG4gIC8vIElFMTEgZG9lc24ndCBwcm92aWRlIGZ1bGwgVVJMIGNvbXBvbmVudHMgd2hlbiBwYXJzaW5nIHJlbGF0aXZlIFVSTHMuXG4gIC8vIEFzc2lnbmluZyB0byBpdHNlbGYgYWdhaW4gZG9lcyB0aGUgdHJpY2sgIzM0NDkuXG4gIGlmICghYS5wcm90b2NvbCkge1xuICAgIGEuaHJlZiA9IGEuaHJlZjtcbiAgfVxuXG4gIGNvbnN0IGluZm8gPSAvKiogQHR5cGUgeyFMb2NhdGlvbn0gKi8oe1xuICAgIGhyZWY6IGEuaHJlZixcbiAgICBwcm90b2NvbDogYS5wcm90b2NvbCxcbiAgICBob3N0OiBhLmhvc3QsXG4gICAgaG9zdG5hbWU6IGEuaG9zdG5hbWUsXG4gICAgcG9ydDogYS5wb3J0ID09ICcwJyA/ICcnIDogYS5wb3J0LFxuICAgIHBhdGhuYW1lOiBhLnBhdGhuYW1lLFxuICAgIHNlYXJjaDogYS5zZWFyY2gsXG4gICAgaGFzaDogYS5oYXNoLFxuICAgIG9yaWdpbjogbnVsbCwgLy8gU2V0IGJlbG93LlxuICB9KTtcblxuICAvLyBTb21lIElFMTEgc3BlY2lmaWMgcG9seWZpbGxzLlxuICAvLyAxKSBJRTExIHN0cmlwcyBvdXQgdGhlIGxlYWRpbmcgJy8nIGluIHRoZSBwYXRobmFtZS5cbiAgaWYgKGluZm8ucGF0aG5hbWVbMF0gIT09ICcvJykge1xuICAgIGluZm8ucGF0aG5hbWUgPSAnLycgKyBpbmZvLnBhdGhuYW1lO1xuICB9XG5cbiAgLy8gMikgRm9yIFVSTHMgd2l0aCBpbXBsaWNpdCBwb3J0cywgSUUxMSBwYXJzZXMgdG8gZGVmYXVsdCBwb3J0cyB3aGlsZVxuICAvLyBvdGhlciBicm93c2VycyBsZWF2ZSB0aGUgcG9ydCBmaWVsZCBlbXB0eS5cbiAgaWYgKChpbmZvLnByb3RvY29sID09ICdodHRwOicgJiYgaW5mby5wb3J0ID09IDgwKVxuICAgICAgfHwgKGluZm8ucHJvdG9jb2wgPT0gJ2h0dHBzOicgJiYgaW5mby5wb3J0ID09IDQ0MykpIHtcbiAgICBpbmZvLnBvcnQgPSAnJztcbiAgICBpbmZvLmhvc3QgPSBpbmZvLmhvc3RuYW1lO1xuICB9XG5cbiAgLy8gRm9yIGRhdGEgVVJJIGEub3JpZ2luIGlzIGVxdWFsIHRvIHRoZSBzdHJpbmcgJ251bGwnIHdoaWNoIGlzIG5vdCB1c2VmdWwuXG4gIC8vIFdlIGluc3RlYWQgcmV0dXJuIHRoZSBhY3R1YWwgb3JpZ2luIHdoaWNoIGlzIHRoZSBmdWxsIFVSTC5cbiAgaWYgKGEub3JpZ2luICYmIGEub3JpZ2luICE9ICdudWxsJykge1xuICAgIGluZm8ub3JpZ2luID0gYS5vcmlnaW47XG4gIH0gZWxzZSBpZiAoaW5mby5wcm90b2NvbCA9PSAnZGF0YTonIHx8ICFpbmZvLmhvc3QpIHtcbiAgICBpbmZvLm9yaWdpbiA9IGluZm8uaHJlZjtcbiAgfSBlbHNlIHtcbiAgICBpbmZvLm9yaWdpbiA9IGluZm8ucHJvdG9jb2wgKyAnLy8nICsgaW5mby5ob3N0O1xuICB9XG5cbiAgLy8gRnJlZXplIGR1cmluZyB0ZXN0aW5nIHRvIGF2b2lkIGFjY2lkZW50YWwgbXV0YXRpb24uXG4gIGNvbnN0IGZyb3plbiA9IChnZXRNb2RlKCkudGVzdCAmJiBPYmplY3QuZnJlZXplKSA/IE9iamVjdC5mcmVlemUoaW5mbykgOiBpbmZvO1xuXG4gIGlmIChvcHRfY2FjaGUpIHtcbiAgICBvcHRfY2FjaGUucHV0KHVybCwgZnJvemVuKTtcbiAgfVxuXG4gIHJldHVybiBmcm96ZW47XG59XG5cbi8qKlxuICogQXBwZW5kcyB0aGUgc3RyaW5nIGp1c3QgYmVmb3JlIHRoZSBmcmFnbWVudCBwYXJ0IChvciBvcHRpb25hbGx5XG4gKiB0byB0aGUgZnJvbnQgb2YgdGhlIHF1ZXJ5IHN0cmluZykgb2YgdGhlIFVSTC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXJhbVN0cmluZ1xuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2FkZFRvRnJvbnRcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGVuZEVuY29kZWRQYXJhbVN0cmluZ1RvVXJsKHVybCwgcGFyYW1TdHJpbmcsXG4gIG9wdF9hZGRUb0Zyb250KSB7XG4gIGlmICghcGFyYW1TdHJpbmcpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG4gIGNvbnN0IG1haW5BbmRGcmFnbWVudCA9IHVybC5zcGxpdCgnIycsIDIpO1xuICBjb25zdCBtYWluQW5kUXVlcnkgPSBtYWluQW5kRnJhZ21lbnRbMF0uc3BsaXQoJz8nLCAyKTtcblxuICBsZXQgbmV3VXJsID0gbWFpbkFuZFF1ZXJ5WzBdICsgKFxuICAgIG1haW5BbmRRdWVyeVsxXVxuICAgICAgPyAob3B0X2FkZFRvRnJvbnRcbiAgICAgICAgPyBgPyR7cGFyYW1TdHJpbmd9JiR7bWFpbkFuZFF1ZXJ5WzFdfWBcbiAgICAgICAgOiBgPyR7bWFpbkFuZFF1ZXJ5WzFdfSYke3BhcmFtU3RyaW5nfWApXG4gICAgICA6IGA/JHtwYXJhbVN0cmluZ31gKTtcbiAgbmV3VXJsICs9IG1haW5BbmRGcmFnbWVudFsxXSA/IGAjJHttYWluQW5kRnJhZ21lbnRbMV19YCA6ICcnO1xuICByZXR1cm4gbmV3VXJsO1xufVxuLyoqXG4gKiBBcHBlbmRzIGEgcXVlcnkgc3RyaW5nIGZpZWxkIGFuZCB2YWx1ZSB0byBhIHVybC4gYGtleWAgYW5kIGB2YWx1ZWBcbiAqIHdpbGwgYmUgcmFuIHRocm91Z2ggYGVuY29kZVVSSUNvbXBvbmVudGAgYmVmb3JlIGFwcGVuZGluZy5cbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2FkZFRvRnJvbnRcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFBhcmFtVG9VcmwodXJsLCBrZXksIHZhbHVlLCBvcHRfYWRkVG9Gcm9udCkge1xuICBjb25zdCBmaWVsZCA9IGAke2VuY29kZVVSSUNvbXBvbmVudChrZXkpfT0ke2VuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSl9YDtcbiAgcmV0dXJuIGFwcGVuZEVuY29kZWRQYXJhbVN0cmluZ1RvVXJsKHVybCwgZmllbGQsIG9wdF9hZGRUb0Zyb250KTtcbn1cblxuLyoqXG4gKiBBcHBlbmRzIHF1ZXJ5IHN0cmluZyBmaWVsZHMgYW5kIHZhbHVlcyB0byBhIHVybC4gVGhlIGBwYXJhbXNgIG9iamVjdHMnXG4gKiBga2V5YHMgYW5kIGB2YWx1ZWBzIHdpbGwgYmUgdHJhbnNmb3JtZWQgaW50byBxdWVyeSBzdHJpbmcga2V5cy92YWx1ZXMuXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gKiBAcGFyYW0geyFKc29uT2JqZWN0PHN0cmluZywgc3RyaW5nfCFBcnJheTxzdHJpbmc+Pn0gcGFyYW1zXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRQYXJhbXNUb1VybCh1cmwsIHBhcmFtcykge1xuICByZXR1cm4gYXBwZW5kRW5jb2RlZFBhcmFtU3RyaW5nVG9VcmwodXJsLCBzZXJpYWxpemVRdWVyeVN0cmluZyhwYXJhbXMpKTtcbn1cblxuLyoqXG4gKiBTZXJpYWxpemVzIHRoZSBwYXNzZWQgcGFyYW1ldGVyIG1hcCBpbnRvIGEgcXVlcnkgc3RyaW5nIHdpdGggYm90aCBrZXlzXG4gKiBhbmQgdmFsdWVzIGVuY29kZWQuXG4gKiBAcGFyYW0geyFKc29uT2JqZWN0PHN0cmluZywgc3RyaW5nfCFBcnJheTxzdHJpbmc+Pn0gcGFyYW1zXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemVRdWVyeVN0cmluZyhwYXJhbXMpIHtcbiAgY29uc3QgcyA9IFtdO1xuICBmb3IgKGNvbnN0IGsgaW4gcGFyYW1zKSB7XG4gICAgY29uc3QgdiA9IHBhcmFtc1trXTtcbiAgICBpZiAodiA9PSBudWxsKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9IGVsc2UgaWYgKGlzQXJyYXkodikpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBzdiA9IC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAodltpXSk7XG4gICAgICAgIHMucHVzaChgJHtlbmNvZGVVUklDb21wb25lbnQoayl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHN2KX1gKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc3YgPSAvKiogQHR5cGUge3N0cmluZ30gKi8gKHYpO1xuICAgICAgcy5wdXNoKGAke2VuY29kZVVSSUNvbXBvbmVudChrKX09JHtlbmNvZGVVUklDb21wb25lbnQoc3YpfWApO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcy5qb2luKCcmJyk7XG59XG5cbi8qKlxuICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIFVSTCBpcyBzZWN1cmU6IGVpdGhlciBIVFRQUyBvciBsb2NhbGhvc3QgKGZvciB0ZXN0aW5nKS5cbiAqIEBwYXJhbSB7c3RyaW5nfCFMb2NhdGlvbn0gdXJsXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTZWN1cmVVcmxEZXByZWNhdGVkKHVybCkge1xuICBpZiAodHlwZW9mIHVybCA9PSAnc3RyaW5nJykge1xuICAgIHVybCA9IHBhcnNlVXJsRGVwcmVjYXRlZCh1cmwpO1xuICB9XG4gIHJldHVybiAodXJsLnByb3RvY29sID09ICdodHRwczonIHx8XG4gICAgICB1cmwuaG9zdG5hbWUgPT0gJ2xvY2FsaG9zdCcgfHxcbiAgICAgIGVuZHNXaXRoKHVybC5ob3N0bmFtZSwgJy5sb2NhbGhvc3QnKSk7XG59XG5cbi8qKlxuICogQXNzZXJ0cyB0aGF0IGEgZ2l2ZW4gdXJsIGlzIEhUVFBTIG9yIHByb3RvY29sIHJlbGF0aXZlLiBJdCdzIGEgdXNlci1sZXZlbFxuICogYXNzZXJ0LlxuICpcbiAqIFByb3ZpZGVzIGFuIGV4Y2VwdGlvbiBmb3IgbG9jYWxob3N0LlxuICpcbiAqIEBwYXJhbSB7P3N0cmluZ3x1bmRlZmluZWR9IHVybFN0cmluZ1xuICogQHBhcmFtIHshRWxlbWVudHxzdHJpbmd9IGVsZW1lbnRDb250ZXh0IEVsZW1lbnQgd2hlcmUgdGhlIHVybCB3YXMgZm91bmQuXG4gKiBAcGFyYW0ge3N0cmluZz19IHNvdXJjZU5hbWUgVXNlZCBmb3IgZXJyb3IgbWVzc2FnZXMuXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRIdHRwc1VybChcbiAgdXJsU3RyaW5nLCBlbGVtZW50Q29udGV4dCwgc291cmNlTmFtZSA9ICdzb3VyY2UnKSB7XG4gIHVzZXIoKS5hc3NlcnQodXJsU3RyaW5nICE9IG51bGwsICclcyAlcyBtdXN0IGJlIGF2YWlsYWJsZScsXG4gICAgICBlbGVtZW50Q29udGV4dCwgc291cmNlTmFtZSk7XG4gIC8vIChlcndpbm0sICM0NTYwKTogdHlwZSBjYXN0IG5lY2Vzc2FyeSB1bnRpbCAjNDU2MCBpcyBmaXhlZC5cbiAgY29uc3QgdGhlVXJsU3RyaW5nID0gLyoqIEB0eXBlIHtzdHJpbmd9ICovICh1cmxTdHJpbmcpO1xuICB1c2VyKCkuYXNzZXJ0KGlzU2VjdXJlVXJsRGVwcmVjYXRlZCh0aGVVcmxTdHJpbmcpIHx8IC9eKFxcL1xcLykvLnRlc3QodGhlVXJsU3RyaW5nKSxcbiAgICAgICclcyAlcyBtdXN0IHN0YXJ0IHdpdGggJyArXG4gICAgICAnXCJodHRwczovL1wiIG9yIFwiLy9cIiBvciBiZSByZWxhdGl2ZSBhbmQgc2VydmVkIGZyb20gJyArXG4gICAgICAnZWl0aGVyIGh0dHBzIG9yIGZyb20gbG9jYWxob3N0LiBJbnZhbGlkIHZhbHVlOiAlcycsXG4gICAgICBlbGVtZW50Q29udGV4dCwgc291cmNlTmFtZSwgdGhlVXJsU3RyaW5nKTtcbiAgcmV0dXJuIHRoZVVybFN0cmluZztcbn1cblxuLyoqXG4gKiBBc3NlcnRzIHRoYXQgYSBnaXZlbiB1cmwgaXMgYW4gYWJzb2x1dGUgSFRUUCBvciBIVFRQUyBVUkwuXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsU3RyaW5nXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRBYnNvbHV0ZUh0dHBPckh0dHBzVXJsKHVybFN0cmluZykge1xuICB1c2VyKCkuYXNzZXJ0KC9eaHR0cHM/XFw6L2kudGVzdCh1cmxTdHJpbmcpLFxuICAgICAgJ1VSTCBtdXN0IHN0YXJ0IHdpdGggXCJodHRwOi8vXCIgb3IgXCJodHRwczovL1wiLiBJbnZhbGlkIHZhbHVlOiAlcycsXG4gICAgICB1cmxTdHJpbmcpO1xuICByZXR1cm4gcGFyc2VVcmxEZXByZWNhdGVkKHVybFN0cmluZykuaHJlZjtcbn1cblxuXG4vKipcbiAqIFBhcnNlcyB0aGUgcXVlcnkgc3RyaW5nIG9mIGFuIFVSTC4gVGhpcyBtZXRob2QgcmV0dXJucyBhIHNpbXBsZSBrZXkvdmFsdWVcbiAqIG1hcC4gSWYgdGhlcmUgYXJlIGR1cGxpY2F0ZSBrZXlzIHRoZSBsYXRlc3QgdmFsdWUgaXMgcmV0dXJuZWQuXG4gKlxuICogVGhpcyBmdW5jdGlvbiBpcyBpbXBsZW1lbnRlZCBpbiBhIHNlcGFyYXRlIGZpbGUgdG8gYXZvaWQgYSBjaXJjdWxhclxuICogZGVwZW5kZW5jeS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcXVlcnlTdHJpbmdcbiAqIEByZXR1cm4geyFKc29uT2JqZWN0fVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VRdWVyeVN0cmluZyhxdWVyeVN0cmluZykge1xuICByZXR1cm4gcGFyc2VRdWVyeVN0cmluZ18ocXVlcnlTdHJpbmcpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIFVSTCB3aXRob3V0IGZyYWdtZW50LiBJZiBVUkwgZG9lc24ndCBjb250YWluIGZyYWdtZW50LCB0aGUgc2FtZVxuICogc3RyaW5nIGlzIHJldHVybmVkLlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRnJhZ21lbnQodXJsKSB7XG4gIGNvbnN0IGluZGV4ID0gdXJsLmluZGV4T2YoJyMnKTtcbiAgaWYgKGluZGV4ID09IC0xKSB7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuICByZXR1cm4gdXJsLnN1YnN0cmluZygwLCBpbmRleCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZnJhZ21lbnQgZnJvbSB0aGUgVVJMLiBJZiB0aGUgVVJMIGRvZXNuJ3QgY29udGFpbiBmcmFnbWVudCxcbiAqIHRoZSBlbXB0eSBzdHJpbmcgaXMgcmV0dXJuZWQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGcmFnbWVudCh1cmwpIHtcbiAgY29uc3QgaW5kZXggPSB1cmwuaW5kZXhPZignIycpO1xuICBpZiAoaW5kZXggPT0gLTEpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgcmV0dXJuIHVybC5zdWJzdHJpbmcoaW5kZXgpO1xufVxuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciB0aGUgVVJMIGhhcyB0aGUgb3JpZ2luIG9mIGEgcHJveHkuXG4gKiBAcGFyYW0ge3N0cmluZ3whTG9jYXRpb259IHVybCBVUkwgb2YgYW4gQU1QIGRvY3VtZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzUHJveHlPcmlnaW4odXJsKSB7XG4gIGlmICh0eXBlb2YgdXJsID09ICdzdHJpbmcnKSB7XG4gICAgdXJsID0gcGFyc2VVcmxEZXByZWNhdGVkKHVybCk7XG4gIH1cbiAgcmV0dXJuIHVybHMuY2RuUHJveHlSZWdleC50ZXN0KHVybC5vcmlnaW4pO1xufVxuXG4vKipcbiAqIEZvciBwcm94eS1vcmlnaW4gVVJMcywgcmV0dXJucyB0aGUgc2VydmluZyB0eXBlLiBPdGhlcndpc2UsIHJldHVybnMgbnVsbC5cbiAqIEUuZy4sICdodHRwczovL2FtcC1jb20uY2RuLmFtcHByb2plY3Qub3JnL2Evcy9hbXAuY29tL2FtcF9kb2N1bWVudC5odG1sJ1xuICogcmV0dXJucyAnYScuXG4gKiBAcGFyYW0ge3N0cmluZ3whTG9jYXRpb259IHVybCBVUkwgb2YgYW4gQU1QIGRvY3VtZW50LlxuICogQHJldHVybiB7P3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFByb3h5U2VydmluZ1R5cGUodXJsKSB7XG4gIGlmICh0eXBlb2YgdXJsID09ICdzdHJpbmcnKSB7XG4gICAgdXJsID0gcGFyc2VVcmxEZXByZWNhdGVkKHVybCk7XG4gIH1cbiAgaWYgKCFpc1Byb3h5T3JpZ2luKHVybCkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBwYXRoID0gdXJsLnBhdGhuYW1lLnNwbGl0KCcvJywgMik7XG4gIHJldHVybiBwYXRoWzFdO1xufVxuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciB0aGUgVVJMIG9yaWdpbiBpcyBsb2NhbGhvc3QuXG4gKiBAcGFyYW0ge3N0cmluZ3whTG9jYXRpb259IHVybCBVUkwgb2YgYW4gQU1QIGRvY3VtZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTG9jYWxob3N0T3JpZ2luKHVybCkge1xuICBpZiAodHlwZW9mIHVybCA9PSAnc3RyaW5nJykge1xuICAgIHVybCA9IHBhcnNlVXJsRGVwcmVjYXRlZCh1cmwpO1xuICB9XG4gIHJldHVybiB1cmxzLmxvY2FsaG9zdFJlZ2V4LnRlc3QodXJsLm9yaWdpbik7XG59XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSBVUkwgaGFzIHZhbGlkIHByb3RvY29sLlxuICogRGVlcCBsaW5rIHByb3RvY29sIGlzIHZhbGlkLCBidXQgbm90IGphdmFzY3JpcHQgZXRjLlxuICogQHBhcmFtIHtzdHJpbmd8IUxvY2F0aW9ufSB1cmxcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1Byb3RvY29sVmFsaWQodXJsKSB7XG4gIGlmICghdXJsKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKHR5cGVvZiB1cmwgPT0gJ3N0cmluZycpIHtcbiAgICB1cmwgPSBwYXJzZVVybERlcHJlY2F0ZWQodXJsKTtcbiAgfVxuICByZXR1cm4gIUlOVkFMSURfUFJPVE9DT0xTLmluY2x1ZGVzKHVybC5wcm90b2NvbCk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIFVSTCB3aXRob3V0IEFNUCBKUyBwYXJhbWV0ZXJzLlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQW1wSnNQYXJhbXNGcm9tVXJsKHVybCkge1xuICBjb25zdCBwYXJzZWQgPSBwYXJzZVVybERlcHJlY2F0ZWQodXJsKTtcbiAgY29uc3Qgc2VhcmNoID0gcmVtb3ZlQW1wSnNQYXJhbXNGcm9tU2VhcmNoKHBhcnNlZC5zZWFyY2gpO1xuICByZXR1cm4gcGFyc2VkLm9yaWdpbiArIHBhcnNlZC5wYXRobmFtZSArIHNlYXJjaCArIHBhcnNlZC5oYXNoO1xuXG59XG5cbi8qKlxuICogUmV0dXJucyBhIFVSTCB3aXRob3V0IGEgcXVlcnkgc3RyaW5nLlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlU2VhcmNoKHVybCkge1xuICBjb25zdCBpbmRleCA9IHVybC5pbmRleE9mKCc/Jyk7XG4gIGlmIChpbmRleCA9PSAtMSkge1xuICAgIHJldHVybiB1cmw7XG4gIH1cbiAgY29uc3QgZnJhZ21lbnQgPSBnZXRGcmFnbWVudCh1cmwpO1xuICByZXR1cm4gdXJsLnN1YnN0cmluZygwLCBpbmRleCkgKyBmcmFnbWVudDtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIHBhcmFtZXRlcnMgdGhhdCBzdGFydCB3aXRoIGFtcCBqcyBwYXJhbWV0ZXIgcGF0dGVybiBhbmQgcmV0dXJucyB0aGVcbiAqIG5ldyBzZWFyY2ggc3RyaW5nLlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFNlYXJjaFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiByZW1vdmVBbXBKc1BhcmFtc0Zyb21TZWFyY2godXJsU2VhcmNoKSB7XG4gIGlmICghdXJsU2VhcmNoIHx8IHVybFNlYXJjaCA9PSAnPycpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgY29uc3Qgc2VhcmNoID0gdXJsU2VhcmNoXG4gICAgICAucmVwbGFjZShBTVBfSlNfUEFSQU1TX1JFR0VYLCAnJylcbiAgICAgIC5yZXBsYWNlKEFNUF9HU0FfUEFSQU1TX1JFR0VYLCAnJylcbiAgICAgIC5yZXBsYWNlKEFNUF9SX1BBUkFNU19SRUdFWCwgJycpXG4gICAgICAucmVwbGFjZShHT09HTEVfRVhQRVJJTUVOVF9QQVJBTVNfUkVHRVgsICcnKVxuICAgICAgLnJlcGxhY2UoL15bPyZdLywgJycpOyAvLyBSZW1vdmVzIGZpcnN0ID8gb3IgJi5cbiAgcmV0dXJuIHNlYXJjaCA/ICc/JyArIHNlYXJjaCA6ICcnO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHNvdXJjZSBVUkwgb2YgYW4gQU1QIGRvY3VtZW50IGZvciBkb2N1bWVudHMgc2VydmVkXG4gKiBvbiBhIHByb3h5IG9yaWdpbiBvciBkaXJlY3RseS5cbiAqIEBwYXJhbSB7c3RyaW5nfCFMb2NhdGlvbn0gdXJsIFVSTCBvZiBhbiBBTVAgZG9jdW1lbnQuXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTb3VyY2VVcmwodXJsKSB7XG4gIGlmICh0eXBlb2YgdXJsID09ICdzdHJpbmcnKSB7XG4gICAgdXJsID0gcGFyc2VVcmxEZXByZWNhdGVkKHVybCk7XG4gIH1cblxuICAvLyBOb3QgYSBwcm94eSBVUkwgLSByZXR1cm4gdGhlIFVSTCBpdHNlbGYuXG4gIGlmICghaXNQcm94eU9yaWdpbih1cmwpKSB7XG4gICAgcmV0dXJuIHVybC5ocmVmO1xuICB9XG5cbiAgLy8gQSBwcm94eSBVUkwuXG4gIC8vIEV4YW1wbGUgcGF0aCB0aGF0IGlzIGJlaW5nIG1hdGNoZWQgaGVyZS5cbiAgLy8gaHR0cHM6Ly9jZG4uYW1wcHJvamVjdC5vcmcvYy9zL3d3dy5vcmlnaW4uY29tL2Zvby9cbiAgLy8gVGhlIC9zLyBpcyBvcHRpb25hbCBhbmQgc2lnbmFscyBhIHNlY3VyZSBvcmlnaW4uXG4gIGNvbnN0IHBhdGggPSB1cmwucGF0aG5hbWUuc3BsaXQoJy8nKTtcbiAgY29uc3QgcHJlZml4ID0gcGF0aFsxXTtcbiAgdXNlcigpLmFzc2VydChTRVJWSU5HX1RZUEVfUFJFRklYW3ByZWZpeF0sXG4gICAgICAnVW5rbm93biBwYXRoIHByZWZpeCBpbiB1cmwgJXMnLCB1cmwuaHJlZik7XG4gIGNvbnN0IGRvbWFpbk9ySHR0cHNTaWduYWwgPSBwYXRoWzJdO1xuICBjb25zdCBvcmlnaW4gPSBkb21haW5Pckh0dHBzU2lnbmFsID09ICdzJ1xuICAgID8gJ2h0dHBzOi8vJyArIGRlY29kZVVSSUNvbXBvbmVudChwYXRoWzNdKVxuICAgIDogJ2h0dHA6Ly8nICsgZGVjb2RlVVJJQ29tcG9uZW50KGRvbWFpbk9ySHR0cHNTaWduYWwpO1xuICAvLyBTYW5pdHkgdGVzdCB0aGF0IHdoYXQgd2UgZm91bmQgbG9va3MgbGlrZSBhIGRvbWFpbi5cbiAgdXNlcigpLmFzc2VydChvcmlnaW4uaW5kZXhPZignLicpID4gMCwgJ0V4cGVjdGVkIGEgLiBpbiBvcmlnaW4gJXMnLCBvcmlnaW4pO1xuICBwYXRoLnNwbGljZSgxLCBkb21haW5Pckh0dHBzU2lnbmFsID09ICdzJyA/IDMgOiAyKTtcbiAgcmV0dXJuIG9yaWdpbiArIHBhdGguam9pbignLycpICtcbiAgICAgIHJlbW92ZUFtcEpzUGFyYW1zRnJvbVNlYXJjaCh1cmwuc2VhcmNoKSArICh1cmwuaGFzaCB8fCAnJyk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgc291cmNlIG9yaWdpbiBvZiBhbiBBTVAgZG9jdW1lbnQgZm9yIGRvY3VtZW50cyBzZXJ2ZWRcbiAqIG9uIGEgcHJveHkgb3JpZ2luIG9yIGRpcmVjdGx5LlxuICogQHBhcmFtIHtzdHJpbmd8IUxvY2F0aW9ufSB1cmwgVVJMIG9mIGFuIEFNUCBkb2N1bWVudC5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHNvdXJjZSBvcmlnaW4gb2YgdGhlIFVSTC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNvdXJjZU9yaWdpbih1cmwpIHtcbiAgcmV0dXJuIHBhcnNlVXJsRGVwcmVjYXRlZChnZXRTb3VyY2VVcmwodXJsKSkub3JpZ2luO1xufVxuXG4vKipcbiAqIFJldHVybnMgYWJzb2x1dGUgVVJMIHJlc29sdmVkIGJhc2VkIG9uIHRoZSByZWxhdGl2ZSBVUkwgYW5kIHRoZSBiYXNlLlxuICogQHBhcmFtIHtzdHJpbmd9IHJlbGF0aXZlVXJsU3RyaW5nXG4gKiBAcGFyYW0ge3N0cmluZ3whTG9jYXRpb259IGJhc2VVcmxcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVSZWxhdGl2ZVVybChyZWxhdGl2ZVVybFN0cmluZywgYmFzZVVybCkge1xuICBpZiAodHlwZW9mIGJhc2VVcmwgPT0gJ3N0cmluZycpIHtcbiAgICBiYXNlVXJsID0gcGFyc2VVcmxEZXByZWNhdGVkKGJhc2VVcmwpO1xuICB9XG4gIGlmICh0eXBlb2YgVVJMID09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gbmV3IFVSTChyZWxhdGl2ZVVybFN0cmluZywgYmFzZVVybC5ocmVmKS50b1N0cmluZygpO1xuICB9XG4gIHJldHVybiByZXNvbHZlUmVsYXRpdmVVcmxGYWxsYmFja18ocmVsYXRpdmVVcmxTdHJpbmcsIGJhc2VVcmwpO1xufVxuXG4vKipcbiAqIEZhbGxiYWNrIGZvciBVUkwgcmVzb2x2ZXIgd2hlbiBVUkwgY2xhc3MgaXMgbm90IGF2YWlsYWJsZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSByZWxhdGl2ZVVybFN0cmluZ1xuICogQHBhcmFtIHtzdHJpbmd8IUxvY2F0aW9ufSBiYXNlVXJsXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKiBAcHJpdmF0ZSBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZVJlbGF0aXZlVXJsRmFsbGJhY2tfKHJlbGF0aXZlVXJsU3RyaW5nLCBiYXNlVXJsKSB7XG4gIGlmICh0eXBlb2YgYmFzZVVybCA9PSAnc3RyaW5nJykge1xuICAgIGJhc2VVcmwgPSBwYXJzZVVybERlcHJlY2F0ZWQoYmFzZVVybCk7XG4gIH1cbiAgcmVsYXRpdmVVcmxTdHJpbmcgPSByZWxhdGl2ZVVybFN0cmluZy5yZXBsYWNlKC9cXFxcL2csICcvJyk7XG4gIGNvbnN0IHJlbGF0aXZlVXJsID0gcGFyc2VVcmxEZXByZWNhdGVkKHJlbGF0aXZlVXJsU3RyaW5nKTtcblxuICAvLyBBYnNvbHV0ZSBVUkwuXG4gIGlmIChzdGFydHNXaXRoKHJlbGF0aXZlVXJsU3RyaW5nLnRvTG93ZXJDYXNlKCksIHJlbGF0aXZlVXJsLnByb3RvY29sKSkge1xuICAgIHJldHVybiByZWxhdGl2ZVVybC5ocmVmO1xuICB9XG5cbiAgLy8gUHJvdG9jb2wtcmVsYXRpdmUgVVJMLlxuICBpZiAoc3RhcnRzV2l0aChyZWxhdGl2ZVVybFN0cmluZywgJy8vJykpIHtcbiAgICByZXR1cm4gYmFzZVVybC5wcm90b2NvbCArIHJlbGF0aXZlVXJsU3RyaW5nO1xuICB9XG5cbiAgLy8gQWJzb2x1dGUgcGF0aC5cbiAgaWYgKHN0YXJ0c1dpdGgocmVsYXRpdmVVcmxTdHJpbmcsICcvJykpIHtcbiAgICByZXR1cm4gYmFzZVVybC5vcmlnaW4gKyByZWxhdGl2ZVVybFN0cmluZztcbiAgfVxuXG4gIC8vIFJlbGF0aXZlIHBhdGguXG4gIHJldHVybiBiYXNlVXJsLm9yaWdpbiArIGJhc2VVcmwucGF0aG5hbWUucmVwbGFjZSgvXFwvW14vXSokLywgJy8nKVxuICAgICAgKyByZWxhdGl2ZVVybFN0cmluZztcbn1cblxuXG4vKipcbiAqIEFkZCBcIl9fYW1wX3NvdXJjZV9vcmlnaW5cIiBxdWVyeSBwYXJhbWV0ZXIgdG8gdGhlIFVSTC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb3JzVXJsKHdpbiwgdXJsKSB7XG4gIGNoZWNrQ29yc1VybCh1cmwpO1xuICBjb25zdCBzb3VyY2VPcmlnaW4gPSBnZXRTb3VyY2VPcmlnaW4od2luLmxvY2F0aW9uLmhyZWYpO1xuICByZXR1cm4gYWRkUGFyYW1Ub1VybCh1cmwsIFNPVVJDRV9PUklHSU5fUEFSQU0sIHNvdXJjZU9yaWdpbik7XG59XG5cblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIHVybCBoYXMgX19hbXBfc291cmNlX29yaWdpbiBhbmQgdGhyb3dzIGlmIGl0IGRvZXMuXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjaGVja0NvcnNVcmwodXJsKSB7XG4gIGNvbnN0IHBhcnNlZFVybCA9IHBhcnNlVXJsRGVwcmVjYXRlZCh1cmwpO1xuICBjb25zdCBxdWVyeSA9IHBhcnNlUXVlcnlTdHJpbmcocGFyc2VkVXJsLnNlYXJjaCk7XG4gIHVzZXIoKS5hc3NlcnQoIShTT1VSQ0VfT1JJR0lOX1BBUkFNIGluIHF1ZXJ5KSxcbiAgICAgICdTb3VyY2Ugb3JpZ2luIGlzIG5vdCBhbGxvd2VkIGluICVzJywgdXJsKTtcbn1cblxuLyoqXG4gKiBUcmllcyB0byBkZWNvZGUgYSBVUkkgY29tcG9uZW50LCBmYWxsaW5nIGJhY2sgdG8gb3B0X2ZhbGxiYWNrIChvciBhbiBlbXB0eVxuICogc3RyaW5nKVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb21wb25lbnRcbiAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X2ZhbGxiYWNrXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cnlEZWNvZGVVcmlDb21wb25lbnQoY29tcG9uZW50LCBvcHRfZmFsbGJhY2spIHtcbiAgcmV0dXJuIHRyeURlY29kZVVyaUNvbXBvbmVudF8oY29tcG9uZW50LCBvcHRfZmFsbGJhY2spO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7ZGV2fSBmcm9tICcuLi9sb2cnO1xuXG4vKiogQGNvbnN0IHtzdHJpbmd9ICovXG5jb25zdCBUQUcgPSAnbHJ1LWNhY2hlJztcblxuLyoqXG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgY2xhc3MgTHJ1Q2FjaGUge1xuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IGNhcGFjaXR5XG4gICAqL1xuICBjb25zdHJ1Y3RvcihjYXBhY2l0eSkge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge251bWJlcn0gKi9cbiAgICB0aGlzLmNhcGFjaXR5XyA9IGNhcGFjaXR5O1xuXG4gICAgLyoqIEBwcml2YXRlIHtudW1iZXJ9ICovXG4gICAgdGhpcy5zaXplXyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBBbiBpbmNyZW1lbnRpbmcgY291bnRlciB0byBkZWZpbmUgdGhlIGxhc3QgYWNjZXNzLlxuICAgICAqIEBwcml2YXRlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5hY2Nlc3NfID0gMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7IU9iamVjdDwobnVtYmVyfHN0cmluZyksIHtwYXlsb2FkOiBULCBhY2Nlc3M6IG51bWJlcn0+fSAqL1xuICAgIHRoaXMuY2FjaGVfID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIga2V5IGlzIGNhY2hlZC5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSBrZXlcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGhhcyhrZXkpIHtcbiAgICByZXR1cm4gISF0aGlzLmNhY2hlX1trZXldO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30ga2V5XG4gICAqIEByZXR1cm4ge1R9IFRoZSBjYWNoZWQgcGF5bG9hZC5cbiAgICovXG4gIGdldChrZXkpIHtcbiAgICBjb25zdCBjYWNoZWFibGUgPSB0aGlzLmNhY2hlX1trZXldO1xuICAgIGlmIChjYWNoZWFibGUpIHtcbiAgICAgIGNhY2hlYWJsZS5hY2Nlc3MgPSArK3RoaXMuYWNjZXNzXztcbiAgICAgIHJldHVybiBjYWNoZWFibGUucGF5bG9hZDtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9IGtleVxuICAgKiBAcGFyYW0ge1R9IHBheWxvYWQgVGhlIHBheWxvYWQgdG8gY2FjaGUuXG4gICAqL1xuICBwdXQoa2V5LCBwYXlsb2FkKSB7XG4gICAgaWYgKCF0aGlzLmhhcyhrZXkpKSB7XG4gICAgICB0aGlzLnNpemVfKys7XG4gICAgfVxuICAgIHRoaXMuY2FjaGVfW2tleV0gPSB7cGF5bG9hZCwgYWNjZXNzOiB0aGlzLmFjY2Vzc199O1xuICAgIHRoaXMuZXZpY3RfKCk7XG4gIH1cblxuICAvKipcbiAgICogRXZpY3RzIHRoZSBvbGRlc3QgY2FjaGUgZW50cnksIGlmIHdlJ3ZlIGV4Y2VlZGVkIGNhcGFjaXR5LlxuICAgKi9cbiAgZXZpY3RfKCkge1xuICAgIGlmICh0aGlzLnNpemVfIDw9IHRoaXMuY2FwYWNpdHlfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZGV2KCkud2FybihUQUcsICdUcmltbWluZyBMUlUgY2FjaGUnKTtcbiAgICBjb25zdCBjYWNoZSA9IHRoaXMuY2FjaGVfO1xuICAgIGxldCBvbGRlc3QgPSB0aGlzLmFjY2Vzc18gKyAxO1xuICAgIGxldCBvbGRlc3RLZXk7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gY2FjaGUpIHtcbiAgICAgIGNvbnN0IHthY2Nlc3N9ID0gY2FjaGVba2V5XTtcbiAgICAgIGlmIChhY2Nlc3MgPCBvbGRlc3QpIHtcbiAgICAgICAgb2xkZXN0ID0gYWNjZXNzO1xuICAgICAgICBvbGRlc3RLZXkgPSBrZXk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG9sZGVzdEtleSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBkZWxldGUgY2FjaGVbb2xkZXN0S2V5XTtcbiAgICAgIHRoaXMuc2l6ZV8tLTtcbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge2lzT2JqZWN0fSBmcm9tICcuLi90eXBlcyc7XG5cbi8qIEBjb25zdCAqL1xuY29uc3QgaGFzT3duXyA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogUmV0dXJucyBhIG1hcC1saWtlIG9iamVjdC5cbiAqIElmIG9wdF9pbml0aWFsIGlzIHByb3ZpZGVkLCBjb3BpZXMgaXRzIG93biBwcm9wZXJ0aWVzIGludG8gdGhlXG4gKiBuZXdseSBjcmVhdGVkIG9iamVjdC5cbiAqIEBwYXJhbSB7VD19IG9wdF9pbml0aWFsIFRoaXMgc2hvdWxkIHR5cGljYWxseSBiZSBhbiBvYmplY3QgbGl0ZXJhbC5cbiAqIEByZXR1cm4ge1R9XG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gbWFwKG9wdF9pbml0aWFsKSB7XG4gIGNvbnN0IG9iaiA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGlmIChvcHRfaW5pdGlhbCkge1xuICAgIE9iamVjdC5hc3NpZ24ob2JqLCBvcHRfaW5pdGlhbCk7XG4gIH1cbiAgcmV0dXJuIG9iajtcbn1cblxuLyoqXG4gKiBSZXR1cm4gYW4gZW1wdHkgSnNvbk9iamVjdCBvciBtYWtlcyB0aGUgcGFzc2VkIGluIG9iamVjdCBsaXRlcmFsXG4gKiBhbiBKc29uT2JqZWN0LlxuICogVGhlIEpzb25PYmplY3QgdHlwZSBpcyBqdXN0IGEgc2ltcGxlIG9iamVjdCB0aGF0IGlzIGF0LWRpY3QuXG4gKiBTZWVcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1jb21waWxlci93aWtpL0BzdHJ1Y3QtYW5kLUBkaWN0LUFubm90YXRpb25zXG4gKiBmb3Igd2hhdCBhIGRpY3QgaXMgdHlwZS13aXNlLlxuICogVGhlIGxpbnRlciBlbmZvcmNlcyB0aGF0IHRoZSBhcmd1bWVudCBpcywgaW4gZmFjdCwgYXQtZGljdCBsaWtlLlxuICogQHBhcmFtIHshT2JqZWN0PX0gb3B0X2luaXRpYWxcbiAqIEByZXR1cm4geyFKc29uT2JqZWN0fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGljdChvcHRfaW5pdGlhbCkge1xuICAvLyBXZSBkbyBub3QgY29weS4gVGhlIGxpbnRlciBlbmZvcmNlcyB0aGF0IHRoZSBwYXNzZWQgaW4gb2JqZWN0IGlzIGEgbGl0ZXJhbFxuICAvLyBhbmQgdGh1cyB0aGUgY2FsbGVyIGNhbm5vdCBoYXZlIGEgcmVmZXJlbmNlIHRvIGl0LlxuICByZXR1cm4gLyoqIEB0eXBlIHshSnNvbk9iamVjdH0gKi8gKG9wdF9pbml0aWFsIHx8IHt9KTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIGdpdmVuIGtleSBpcyBhIHByb3BlcnR5IGluIHRoZSBtYXAuXG4gKlxuICogQHBhcmFtIHtUfSAgb2JqIGEgbWFwIGxpa2UgcHJvcGVydHkuXG4gKiBAcGFyYW0ge3N0cmluZ30gIGtleVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNPd24ob2JqLCBrZXkpIHtcbiAgcmV0dXJuIGhhc093bl8uY2FsbChvYmosIGtleSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBvYmpba2V5XSBpZmYga2V5IGlzIG9iaidzIG93biBwcm9wZXJ0eSAoaXMgbm90IGluaGVyaXRlZCkuXG4gKiBPdGhlcndpc2UsIHJldHVybnMgdW5kZWZpbmVkLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcbiAqIEByZXR1cm4geyp9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvd25Qcm9wZXJ0eShvYmosIGtleSkge1xuICBpZiAoaGFzT3duKG9iaiwga2V5KSkge1xuICAgIHJldHVybiBvYmpba2V5XTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cbi8qKlxuICogRGVlcCBtZXJnZXMgc291cmNlIGludG8gdGFyZ2V0LlxuICpcbiAqIEBwYXJhbSB7IU9iamVjdH0gdGFyZ2V0XG4gKiBAcGFyYW0geyFPYmplY3R9IHNvdXJjZVxuICogQHBhcmFtIHtudW1iZXJ9IGRlcHRoIFRoZSBtYXhpbXVtIG1lcmdlIGRlcHRoLiBJZiBleGNlZWRlZCwgT2JqZWN0LmFzc2lnblxuICogICAgICAgICAgICAgICAgICAgICAgIHdpbGwgYmUgdXNlZCBpbnN0ZWFkLlxuICogQHJldHVybiB7IU9iamVjdH1cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiBzb3VyY2UgY29udGFpbnMgYSBjaXJjdWxhciByZWZlcmVuY2UuXG4gKiBOb3RlOiBPbmx5IG5lc3RlZCBvYmplY3RzIGFyZSBkZWVwLW1lcmdlZCwgcHJpbWl0aXZlcyBhbmQgYXJyYXlzIGFyZSBub3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWVwTWVyZ2UodGFyZ2V0LCBzb3VyY2UsIGRlcHRoID0gMTApIHtcbiAgLy8gS2VlcCB0cmFjayBvZiBzZWVuIG9iamVjdHMgdG8gZGV0ZWN0IHJlY3Vyc2l2ZSByZWZlcmVuY2VzLlxuICBjb25zdCBzZWVuID0gW107XG5cbiAgLyoqIEB0eXBlIHshQXJyYXk8e3Q6ICFPYmplY3QsIHM6ICFPYmplY3QsIGQ6IG51bWJlcn0+fSAqL1xuICBjb25zdCBxdWV1ZSA9IFtdO1xuICBxdWV1ZS5wdXNoKHt0OiB0YXJnZXQsIHM6IHNvdXJjZSwgZDogMH0pO1xuXG4gIC8vIEJGUyB0byBlbnN1cmUgb2JqZWN0cyBkb24ndCBoYXZlIHJlY3Vyc2l2ZSByZWZlcmVuY2VzIGF0IHNoYWxsb3dlciBkZXB0aHMuXG4gIHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgY29uc3Qge3QsIHMsIGR9ID0gcXVldWUuc2hpZnQoKTtcbiAgICBpZiAoc2Vlbi5pbmNsdWRlcyhzKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTb3VyY2Ugb2JqZWN0IGhhcyBhIGNpcmN1bGFyIHJlZmVyZW5jZS4nKTtcbiAgICB9XG4gICAgc2Vlbi5wdXNoKHMpO1xuICAgIGlmICh0ID09PSBzKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGQgPiBkZXB0aCkge1xuICAgICAgT2JqZWN0LmFzc2lnbih0LCBzKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBPYmplY3Qua2V5cyhzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICBjb25zdCBuZXdWYWx1ZSA9IHNba2V5XTtcbiAgICAgIC8vIFBlcmZvcm0gYSBkZWVwIG1lcmdlIElGRiBib3RoIHRhcmdldCBhbmQgc291cmNlIGhhdmUgdGhlIHNhbWUga2V5XG4gICAgICAvLyB3aG9zZSBjb3JyZXNwb25kaW5nIHZhbHVlcyBhcmUgb2JqZWN0cy5cbiAgICAgIGlmIChoYXNPd24odCwga2V5KSkge1xuICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IHRba2V5XTtcbiAgICAgICAgaWYgKGlzT2JqZWN0KG5ld1ZhbHVlKSAmJiBpc09iamVjdChvbGRWYWx1ZSkpIHtcbiAgICAgICAgICBxdWV1ZS5wdXNoKHt0OiBvbGRWYWx1ZSwgczogbmV3VmFsdWUsIGQ6IGQgKyAxfSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0W2tleV0gPSBuZXdWYWx1ZTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IU9iamVjdH0gbyBBbiBvYmplY3QgdG8gcmVtb3ZlIHByb3BlcnRpZXMgZnJvbVxuICogQHBhcmFtIHshQXJyYXk8c3RyaW5nPn0gcHJvcHMgQSBsaXN0IG9mIHByb3BlcnRpZXMgdG8gcmVtb3ZlIGZyb20gdGhlIE9iamVjdFxuICogQHJldHVybiB7IU9iamVjdH0gQW4gb2JqZWN0IHdpdGggdGhlIGdpdmVuIHByb3BlcnRpZXMgcmVtb3ZlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gb21pdChvLCBwcm9wcykge1xuICByZXR1cm4gT2JqZWN0LmtleXMobykucmVkdWNlKChhY2MsIGtleSkgPT4ge1xuICAgIGlmICghcHJvcHMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgYWNjW2tleV0gPSBvW2tleV07XG4gICAgfVxuICAgIHJldHVybiBhY2M7XG4gIH0sIHt9KTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIFJldHVybnMgYSBEZWZlcnJlZCBzdHJ1Y3QsIHdoaWNoIGhvbGRzIGEgcGVuZGluZyBwcm9taXNlIGFuZCBpdHMgYXNzb2NpYXRlZFxuICogcmVzb2x2ZSBhbmQgcmVqZWN0IGZ1bmN0aW9ucy5cbiAqXG4gKiBUaGlzIGlzIHByZWZlcnJlZCBpbnN0ZWFkIG9mIGNyZWF0aW5nIGEgUHJvbWlzZSBpbnN0YW5jZSB0byBleHRyYWN0IHRoZVxuICogcmVzb2x2ZS9yZWplY3QgZnVuY3Rpb25zIHlvdXJzZWxmOlxuICpcbiAqIGBgYFxuICogLy8gQXZvaWQgZG9pbmdcbiAqIGxldCByZXNvbHZlO1xuICogY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKHJlcyA9PiB7XG4gKiAgIHJlc29sdmUgPSByZXM7XG4gKiB9KTtcbiAqXG4gKiAvLyBHb29kXG4gKiBjb25zdCBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xuICogY29uc3QgeyBwcm9taXNlLCByZXNvbHZlIH0gPSBkZWZlcnJlZDtcbiAqIGBgYFxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmV4cG9ydCBjbGFzcyBEZWZlcnJlZCB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIERlZmVycmVkLlxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgbGV0IHJlc29sdmUsIHJlamVjdDtcblxuICAgIC8qKlxuICAgICAqIEBjb25zdCB7IVByb21pc2U8VD59XG4gICAgICovXG4gICAgdGhpcy5wcm9taXNlID0gbmV3IC8qT0sqL1Byb21pc2UoKHJlcywgcmVqKSA9PiB7XG4gICAgICByZXNvbHZlID0gcmVzO1xuICAgICAgcmVqZWN0ID0gcmVqO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQGNvbnN0IHtmdW5jdGlvbihUPSl9XG4gICAgICovXG4gICAgdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTtcblxuICAgIC8qKlxuICAgICAqIEBjb25zdCB7ZnVuY3Rpb24oKj0pfVxuICAgICAqL1xuICAgIHRoaXMucmVqZWN0ID0gcmVqZWN0O1xuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHByb21pc2UgcmVzb2x2ZWQgdG8gdGhlIHJldHVybiB2YWx1ZSBvZiBmbi5cbiAqIElmIGZuIHN5bmMgdGhyb3dzLCBpdCB3aWxsIGNhdXNlIHRoZSBwcm9taXNlIHRvIHJlamVjdC5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCk6VH0gZm5cbiAqIEByZXR1cm4geyFQcm9taXNlPFQ+fVxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyeVJlc29sdmUoZm4pIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgIHJlc29sdmUoZm4oKSk7XG4gIH0pO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIHdoaWNoIHJlc29sdmVzIGlmIGEgdGhyZXNob2xkIGFtb3VudCBvZiB0aGUgZ2l2ZW4gcHJvbWlzZXNcbiAqIHJlc29sdmUsIGFuZCByZWplY3RzIG90aGVyd2lzZS5cbiAqIEBwYXJhbSB7IUFycmF5PCFQcm9taXNlPn0gcHJvbWlzZXMgVGhlIGFycmF5IG9mIHByb21pc2VzIHRvIHRlc3QuXG4gKiBAcGFyYW0ge251bWJlcn0gY291bnQgVGhlIG51bWJlciBvZiBwcm9taXNlcyB0aGF0IG11c3QgcmVzb2x2ZSBmb3IgdGhlXG4gKiAgICAgcmV0dXJuZWQgcHJvbWlzZSB0byByZXNvbHZlLlxuICogQHJldHVybiB7IVByb21pc2V9IEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIGlmIGFueSBvZiB0aGUgZ2l2ZW4gcHJvbWlzZXNcbiAqICAgICByZXNvbHZlLCBhbmQgd2hpY2ggcmVqZWN0cyBvdGhlcndpc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzb21lKHByb21pc2VzLCBjb3VudCA9IDEpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBjb3VudCA9IE1hdGgubWF4KGNvdW50LCAwKTtcbiAgICBjb25zdCBleHRyYSA9IHByb21pc2VzLmxlbmd0aCAtIGNvdW50O1xuICAgIGlmIChleHRyYSA8IDApIHtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoJ25vdCBlbm91Z2ggcHJvbWlzZXMgdG8gcmVzb2x2ZScpKTtcbiAgICB9XG4gICAgaWYgKHByb21pc2VzLmxlbmd0aCA9PSAwKSB7XG4gICAgICByZXNvbHZlKFtdKTtcbiAgICB9XG4gICAgY29uc3QgdmFsdWVzID0gW107XG4gICAgY29uc3QgcmVhc29ucyA9IFtdO1xuXG4gICAgY29uc3Qgb25GdWxmaWxsZWQgPSB2YWx1ZSA9PiB7XG4gICAgICBpZiAodmFsdWVzLmxlbmd0aCA8IGNvdW50KSB7XG4gICAgICAgIHZhbHVlcy5wdXNoKHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZXMubGVuZ3RoID09IGNvdW50KSB7XG4gICAgICAgIHJlc29sdmUodmFsdWVzKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IG9uUmVqZWN0ZWQgPSByZWFzb24gPT4ge1xuICAgICAgaWYgKHJlYXNvbnMubGVuZ3RoIDw9IGV4dHJhKSB7XG4gICAgICAgIHJlYXNvbnMucHVzaChyZWFzb24pO1xuICAgICAgfVxuICAgICAgaWYgKHJlYXNvbnMubGVuZ3RoID4gZXh0cmEpIHtcbiAgICAgICAgcmVqZWN0KHJlYXNvbnMpO1xuICAgICAgfVxuICAgIH07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9taXNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgUHJvbWlzZS5yZXNvbHZlKHByb21pc2VzW2ldKS50aGVuKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIFJlc29sdmVzIHdpdGggdGhlIHJlc3VsdCBvZiB0aGUgbGFzdCBwcm9taXNlIGFkZGVkLlxuICogQGltcGxlbWVudHMge0lUaGVuYWJsZX1cbiAqL1xuZXhwb3J0IGNsYXNzIExhc3RBZGRlZFJlc29sdmVyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IUFycmF5PCFQcm9taXNlPj19IG9wdF9wcm9taXNlc1xuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0X3Byb21pc2VzKSB7XG4gICAgbGV0IHJlc29sdmVfLCByZWplY3RfO1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFQcm9taXNlfSAqL1xuICAgIHRoaXMucHJvbWlzZV8gPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICByZXNvbHZlXyA9IHJlc29sdmU7XG4gICAgICByZWplY3RfID0gcmVqZWN0O1xuICAgIH0pO1xuXG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgdGhpcy5yZXNvbHZlXyA9IHJlc29sdmVfO1xuXG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgdGhpcy5yZWplY3RfID0gcmVqZWN0XztcblxuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIHRoaXMuY291bnRfID0gMDtcblxuICAgIGlmIChvcHRfcHJvbWlzZXMpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3B0X3Byb21pc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMuYWRkKG9wdF9wcm9taXNlc1tpXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIHByb21pc2UgdG8gcG9zc2libHkgYmUgcmVzb2x2ZWQuXG4gICAqIEBwYXJhbSB7IVByb21pc2V9IHByb21pc2VcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBhZGQocHJvbWlzZSkge1xuICAgIGNvbnN0IGNvdW50QXRBZGQgPSArK3RoaXMuY291bnRfO1xuICAgIFByb21pc2UucmVzb2x2ZShwcm9taXNlKS50aGVuKHJlc3VsdCA9PiB7XG4gICAgICBpZiAodGhpcy5jb3VudF8gPT09IGNvdW50QXRBZGQpIHtcbiAgICAgICAgdGhpcy5yZXNvbHZlXyhyZXN1bHQpO1xuICAgICAgfVxuICAgIH0sIGVycm9yID0+IHtcbiAgICAgIC8vIERvbid0IGZvbGxvdyBiZWhhdmlvciBvZiBQcm9taXNlLmFsbCBhbmQgUHJvbWlzZS5yYWNlIGVycm9yIHNvIHRoYXRcbiAgICAgIC8vIHRoaXMgd2lsbCBvbmx5IHJlamVjdCB3aGVuIG1vc3QgcmVjZW50bHkgYWRkZWQgcHJvbWlzZSBmYWlscy5cbiAgICAgIGlmICh0aGlzLmNvdW50XyA9PT0gY291bnRBdEFkZCkge1xuICAgICAgICB0aGlzLnJlamVjdF8oZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLnByb21pc2VfO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICB0aGVuKG9wdF9yZXNvbHZlLCBvcHRfcmVqZWN0KSB7XG4gICAgcmV0dXJuIHRoaXMucHJvbWlzZV8udGhlbihvcHRfcmVzb2x2ZSwgb3B0X3JlamVjdCk7XG4gIH1cbn1cbiIsIi8qISBodHRwczovL210aHMuYmUvY3NzZXNjYXBlIHYxLjUuMSBieSBAbWF0aGlhcyB8IE1JVCBsaWNlbnNlICovXG5cblxuLyoqXG4gKiBUaGlzIHJlZ2V4IGNvbnNpc3RzIG9mIDQgbWF0Y2hpbmcgY2FwdHVyZSBncm91cHMgYW5kIG9uZSAobm9uLW1hdGNoaW5nKSBmYWxsYmFjazpcbiAqXG4gKiAtIChcXDApLCBjYXRjaCB0aGUgbnVsbCB0ZXJtaW5hdG9yIGNoYXJhY3RlciBzbyBpdCBtYXkgYmUgcmVwbGFjZWQgYnkgVVRGXG4gKiAgIFJlcGxhY2VtZW50IENoYXJcbiAqIC0gXigtKSQsIGNhdGNoIGEgc29saXRhcnkgZGFzaCBjaGFyLCBzbyB0aGF0IGl0IG1heSBiZSBiYWNrc2xhc2ggZXNjYXBlZC5cbiAqICAgVGhpcyBpcyBhIHNlcGFyYXRlIGNhcHR1cmUgZ3JvdXAgc28gdGhhdCB0aGUgbGVnYWwtY2hhcnMgKGdyb3VwIDQpIGRvZXNuJ3RcbiAqICAgY2FwdHVyZSBpdCBmaXJzdCwgc2luY2UgdGhhdCBncm91cCBkb2Vzbid0IG5lZWQgdG8gZXNjYXBlIGl0cyBkYXNoLlxuICogLSAoW1xceDAxLVxceDFmXFx4N2ZdfF4tP1swLTldKSwgY2F0Y2ggYSBVVEYgY29udHJvbCBjaGFyLCBvciBhbnkgbGVhZGluZ1xuICogICBudW1iZXIgKHdpdGggYW4gb3B0aW9uYWwgbGVhZGluZyBkYXNoKS4gVGhlIGNvbnRyb2wgb3IgdGhlIG51bWJlciAoYnV0IG5vdFxuICogICB0aGUgbGVhZGluZyBkYXNoKSBtdXN0IGJlIGhleC1lc2NhcGVkLC5cbiAqIC0gKFtcXHg4MC1cXHVmZmZmMC05YS16QS1aXy1dKyksIGNhdGNoIGxlZ2FsLWNoYXJzLCB3aXRoIHRoZSBleGNlcHRpb24gb2YgYVxuICogICBzb2xpdGFyeSBkYXNoLCB3aGljaCB3aWxsIGFscmVhZHkgaGF2ZSBtYXRjaGVkIGluIGdyb3VwIDEuXG4gKiAtIFteXSwgZmluYWxseSwgYSBjYXRjaC1hbGwgdGhhdCBhbGxvd3MgdXMgdG8gYmFja3NsYXNoIGVzY2FwZSB0aGUgY2hhci5cbiAqXG4gKiBUb2dldGhlciwgdGhpcyBtYXRjaGVzIGV2ZXJ5dGhpbmcgbmVjZXNzYXJ5IGZvciBDU1MuZXNjYXBlLlxuICovXG52YXIgcmVnZXggPSAvKFxcMCl8XigtKSR8KFtcXHgwMS1cXHgxZlxceDdmXXxeLT9bMC05XSl8KFtcXHg4MC1cXHVmZmZmMC05YS16QS1aXy1dKyl8W15dL2c7XG5cbmZ1bmN0aW9uIGVzY2FwZXIobWF0Y2gsIG5pbCwgZGFzaCwgaGV4RXNjYXBlLCBjaGFycykge1xuICAvLyBDaGFycyBpcyB0aGUgbGVnYWwtY2hhcnMgKGdyb3VwIDQpIGNhcHR1cmVcbiAgaWYgKGNoYXJzKSB7XG4gICAgcmV0dXJuIGNoYXJzO1xuICB9XG4gIC8vIE5pbCBpcyB0aGUgbnVsbCB0ZXJtaW5hdG9yIChncm91cCAxKSBjYXB0dXJlXG4gIGlmIChuaWwpIHtcbiAgICByZXR1cm4gJ1xcdUZGRkQnO1xuICB9XG4gIC8vIEJvdGggVVRGIGNvbnRyb2wgY2hhcnMsIGFuZCBsZWFkaW5nIG51bWJlcnMgKHdpdGggb3B0aW9uYWwgbGVhZGluZyBkYXNoKVxuICAvLyAoZ3JvdXAgMykgbXVzdCBiZSBiYWNrc2xhc2ggZXNjYXBlZCB3aXRoIGEgdHJhaWxpbmcgc3BhY2UuICBGdW5uaWx5LCB0aGVcbiAgLy8gbGVhZGluZyBkYXNoIG11c3Qgbm90IGJlIGVzY2FwZWQsIGJ1dCB0aGUgbnVtYmVyLiA6c2hydWc6XG4gIGlmIChoZXhFc2NhcGUpIHtcbiAgICByZXR1cm4gbWF0Y2guc2xpY2UoMCwgLTEpICsgJ1xcXFwnICsgbWF0Y2guc2xpY2UoLTEpLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpICsgJyAnXG4gIH1cbiAgLy8gRmluYWxseSwgdGhlIHNvbGl0YXJ5IGRhc2ggYW5kIHRoZSBjYXRjaC1hbGwgY2hhcnMgcmVxdWlyZSBiYWNrc2xhc2hcbiAgLy8gZXNjYXBpbmcuXG4gIHJldHVybiAnXFxcXCcgKyBtYXRjaDtcbn1cblxuLyoqXG4gKiBodHRwczovL2RyYWZ0cy5jc3N3Zy5vcmcvY3Nzb20vI3NlcmlhbGl6ZS1hbi1pZGVudGlmaWVyXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNzc0VzY2FwZSh2YWx1ZSkge1xuICByZXR1cm4gU3RyaW5nKHZhbHVlKS5yZXBsYWNlKHJlZ2V4LCBlc2NhcGVyKTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBWZXJzaW9uOiAwLjEuMjIuMjMgKi9cbi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuXG4vKipcbiAqIEBwYXJhbSB7IURvY3VtZW50fSBkb2NcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZ2V0UmVhZHlTdGF0ZShkb2MpIHtcbiAgcmV0dXJuIC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAoZG9jWydyZWFkeVN0YXRlJ10pO1xufVxuXG5cbi8qKlxuICogV2hldGhlciB0aGUgZG9jdW1lbnQgaXMgcmVhZHkuXG4gKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc0RvY3VtZW50UmVhZHkoZG9jKSB7XG4gIGNvbnN0IHJlYWR5U3RhdGUgPSBnZXRSZWFkeVN0YXRlKGRvYyk7XG4gIHJldHVybiByZWFkeVN0YXRlICE9ICdsb2FkaW5nJyAmJiByZWFkeVN0YXRlICE9ICd1bmluaXRpYWxpemVkJztcbn1cblxuLyoqXG4gKiBDYWxscyB0aGUgY2FsbGJhY2sgd2hlbiBkb2N1bWVudCBpcyByZWFkeS5cbiAqIEBwYXJhbSB7IURvY3VtZW50fSBkb2NcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oIURvY3VtZW50KX0gY2FsbGJhY2tcbiAqL1xuZnVuY3Rpb24gb25Eb2N1bWVudFJlYWR5KGRvYywgY2FsbGJhY2spIHtcbiAgb25Eb2N1bWVudFN0YXRlKGRvYywgaXNEb2N1bWVudFJlYWR5LCBjYWxsYmFjayk7XG59XG5cbi8qKlxuICogQ2FsbHMgdGhlIGNhbGxiYWNrIHdoZW4gZG9jdW1lbnQncyBzdGF0ZSBzYXRpc2ZpZXMgdGhlIHN0YXRlRm4uXG4gKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFEb2N1bWVudCk6Ym9vbGVhbn0gc3RhdGVGblxuICogQHBhcmFtIHtmdW5jdGlvbighRG9jdW1lbnQpfSBjYWxsYmFja1xuICovXG5mdW5jdGlvbiBvbkRvY3VtZW50U3RhdGUoZG9jLCBzdGF0ZUZuLCBjYWxsYmFjaykge1xuICBsZXQgcmVhZHkgPSBzdGF0ZUZuKGRvYyk7XG4gIGlmIChyZWFkeSkge1xuICAgIGNhbGxiYWNrKGRvYyk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgcmVhZHlMaXN0ZW5lciA9ICgpID0+IHtcbiAgICAgIGlmIChzdGF0ZUZuKGRvYykpIHtcbiAgICAgICAgaWYgKCFyZWFkeSkge1xuICAgICAgICAgIHJlYWR5ID0gdHJ1ZTtcbiAgICAgICAgICBjYWxsYmFjayhkb2MpO1xuICAgICAgICB9XG4gICAgICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZWFkeXN0YXRlY2hhbmdlJywgcmVhZHlMaXN0ZW5lcik7XG4gICAgICB9XG4gICAgfTtcbiAgICBkb2MuYWRkRXZlbnRMaXN0ZW5lcigncmVhZHlzdGF0ZWNoYW5nZScsIHJlYWR5TGlzdGVuZXIpO1xuICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aGVuIGRvY3VtZW50IGlzIHJlYWR5LlxuICogQHBhcmFtIHshRG9jdW1lbnR9IGRvY1xuICogQHJldHVybiB7IVByb21pc2U8IURvY3VtZW50Pn1cbiAqL1xuZnVuY3Rpb24gd2hlbkRvY3VtZW50UmVhZHkoZG9jKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICBvbkRvY3VtZW50UmVhZHkoZG9jLCByZXNvbHZlKTtcbiAgfSk7XG59XG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuXG4vKipcbiAqIEBpbnRlcmZhY2VcbiAqL1xuY2xhc3MgRG9jIHtcblxuICAvKipcbiAgICogQHJldHVybiB7IVdpbmRvd31cbiAgICovXG4gIGdldFdpbigpIHt9XG5cbiAgLyoqXG4gICAqIFRoZSBgRG9jdW1lbnRgIG5vZGUgb3IgYW5hbG9nLlxuICAgKiBAcmV0dXJuIHshTm9kZX1cbiAgICovXG4gIGdldFJvb3ROb2RlKCkge31cblxuICAvKipcbiAgICogVGhlIGBEb2N1bWVudC5kb2N1bWVudEVsZW1lbnRgIGVsZW1lbnQgb3IgYW5hbG9nLlxuICAgKiBAcmV0dXJuIHshRWxlbWVudH1cbiAgICovXG4gIGdldFJvb3RFbGVtZW50KCkge31cblxuICAvKipcbiAgICogVGhlIGBEb2N1bWVudC5oZWFkYCBlbGVtZW50IG9yIGFuYWxvZy4gUmV0dXJucyBgbnVsbGAgaWYgbm90IGF2YWlsYWJsZVxuICAgKiB5ZXQuXG4gICAqIEByZXR1cm4geyFFbGVtZW50fVxuICAgKi9cbiAgZ2V0SGVhZCgpIHt9XG5cbiAgLyoqXG4gICAqIFRoZSBgRG9jdW1lbnQuYm9keWAgZWxlbWVudCBvciBhbmFsb2cuIFJldHVybnMgYG51bGxgIGlmIG5vdCBhdmFpbGFibGVcbiAgICogeWV0LlxuICAgKiBAcmV0dXJuIHs/RWxlbWVudH1cbiAgICovXG4gIGdldEJvZHkoKSB7fVxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBkb2N1bWVudCBoYXMgYmVlbiBmdWxseSBjb25zdHJ1Y3RlZC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzUmVhZHkoKSB7fVxuXG4gIC8qKlxuICAgKiBSZXNvbHZlZCB3aGVuIGRvY3VtZW50IGhhcyBiZWVuIGZ1bGx5IGNvbnN0cnVjdGVkLlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIHdoZW5SZWFkeSgpIHt9XG59XG5cblxuLyoqIEBpbXBsZW1lbnRzIHtEb2N9ICovXG5jbGFzcyBHbG9iYWxEb2Mge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d8IURvY3VtZW50fSB3aW5PckRvY1xuICAgKi9cbiAgY29uc3RydWN0b3Iod2luT3JEb2MpIHtcbiAgICBjb25zdCBpc1dpbiA9ICEhd2luT3JEb2MuZG9jdW1lbnQ7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgICB0aGlzLndpbl8gPSBpc1dpbiA/XG4gICAgICAgIC8qKiBAdHlwZSB7IVdpbmRvd30gKi8gKHdpbk9yRG9jKSA6XG4gICAgICAgIC8qKiBAdHlwZSB7IVdpbmRvd30gKi8gKFxuICAgICAgICAgICAgKC8qKiBAdHlwZSB7IURvY3VtZW50fSAqLyAod2luT3JEb2MpKS5kZWZhdWx0Vmlldyk7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IURvY3VtZW50fSAqL1xuICAgIHRoaXMuZG9jXyA9IGlzV2luID9cbiAgICAgICAgLyoqIEB0eXBlIHshV2luZG93fSAqLyAod2luT3JEb2MpLmRvY3VtZW50IDpcbiAgICAgICAgLyoqIEB0eXBlIHshRG9jdW1lbnR9ICovICh3aW5PckRvYyk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldFdpbigpIHtcbiAgICByZXR1cm4gdGhpcy53aW5fO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXRSb290Tm9kZSgpIHtcbiAgICByZXR1cm4gdGhpcy5kb2NfO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXRSb290RWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5kb2NfLmRvY3VtZW50RWxlbWVudDtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0SGVhZCgpIHtcbiAgICAvLyBgZG9jdW1lbnQuaGVhZGAgYWx3YXlzIGhhcyBhIGNoYW5jZSB0byBiZSBwYXJzZWQsIGF0IGxlYXN0IHBhcnRpYWxseS5cbiAgICByZXR1cm4gLyoqIEB0eXBlIHshRWxlbWVudH0gKi8gKHRoaXMuZG9jXy5oZWFkKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0Qm9keSgpIHtcbiAgICByZXR1cm4gdGhpcy5kb2NfLmJvZHk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGlzUmVhZHkoKSB7XG4gICAgcmV0dXJuIGlzRG9jdW1lbnRSZWFkeSh0aGlzLmRvY18pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICB3aGVuUmVhZHkoKSB7XG4gICAgcmV0dXJuIHdoZW5Eb2N1bWVudFJlYWR5KHRoaXMuZG9jXyk7XG4gIH1cbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IURvY3VtZW50fCFXaW5kb3d8IURvY30gaW5wdXRcbiAqIEByZXR1cm4geyFEb2N9XG4gKi9cbmZ1bmN0aW9uIHJlc29sdmVEb2MoaW5wdXQpIHtcbiAgLy8gSXMgaXQgYSBgRG9jdW1lbnRgXG4gIGlmICgoLyoqIEB0eXBlIHshRG9jdW1lbnR9ICovIChpbnB1dCkpLm5vZGVUeXBlID09PSAvKiBET0NVTUVOVCAqLyA5KSB7XG4gICAgcmV0dXJuIG5ldyBHbG9iYWxEb2MoLyoqIEB0eXBlIHshRG9jdW1lbnR9ICovIChpbnB1dCkpO1xuICB9XG4gIC8vIElzIGl0IGEgYFdpbmRvd2A/XG4gIGlmICgoLyoqIEB0eXBlIHshV2luZG93fSAqLyAoaW5wdXQpKS5kb2N1bWVudCkge1xuICAgIHJldHVybiBuZXcgR2xvYmFsRG9jKC8qKiBAdHlwZSB7IVdpbmRvd30gKi8gKGlucHV0KSk7XG4gIH1cbiAgcmV0dXJuIC8qKiBAdHlwZSB7IURvY30gKi8gKGlucHV0KTtcbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbi8qKlxuICovXG5jbGFzcyBQYWdlQ29uZmlnIHtcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHByb2R1Y3RPclB1YmxpY2F0aW9uSWRcbiAgICogQHBhcmFtIHtib29sZWFufSBsb2NrZWRcbiAgICovXG4gIGNvbnN0cnVjdG9yKHByb2R1Y3RPclB1YmxpY2F0aW9uSWQsIGxvY2tlZCkge1xuICAgIGxldCBwdWJsaWNhdGlvbklkLCBwcm9kdWN0SWQsIGxhYmVsO1xuICAgIGNvbnN0IGRpdiA9IHByb2R1Y3RPclB1YmxpY2F0aW9uSWQuaW5kZXhPZignOicpO1xuICAgIGlmIChkaXYgIT0gLTEpIHtcbiAgICAgIC8vIFRoZSBhcmd1bWVudCBpcyBhIHByb2R1Y3QgaWQuXG4gICAgICBwcm9kdWN0SWQgPSBwcm9kdWN0T3JQdWJsaWNhdGlvbklkO1xuICAgICAgcHVibGljYXRpb25JZCA9IHByb2R1Y3RJZC5zdWJzdHJpbmcoMCwgZGl2KTtcbiAgICAgIGxhYmVsID0gcHJvZHVjdElkLnN1YnN0cmluZyhkaXYgKyAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVGhlIGFyZ3VtZW50IGlzIGEgcHVibGljYXRpb24gaWQuXG4gICAgICBwdWJsaWNhdGlvbklkID0gcHJvZHVjdE9yUHVibGljYXRpb25JZDtcbiAgICAgIHByb2R1Y3RJZCA9IG51bGw7XG4gICAgICBsYWJlbCA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMucHVibGljYXRpb25JZF8gPSBwdWJsaWNhdGlvbklkO1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qgez9zdHJpbmd9ICovXG4gICAgdGhpcy5wcm9kdWN0SWRfID0gcHJvZHVjdElkO1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qgez9zdHJpbmd9ICovXG4gICAgdGhpcy5sYWJlbF8gPSBsYWJlbDtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtib29sZWFufSAqL1xuICAgIHRoaXMubG9ja2VkXyA9IGxvY2tlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBnZXRQdWJsaWNhdGlvbklkKCkge1xuICAgIHJldHVybiB0aGlzLnB1YmxpY2F0aW9uSWRfO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9zdHJpbmd9XG4gICAqL1xuICBnZXRQcm9kdWN0SWQoKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvZHVjdElkXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/c3RyaW5nfVxuICAgKi9cbiAgZ2V0TGFiZWwoKSB7XG4gICAgcmV0dXJuIHRoaXMubGFiZWxfO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBpc0xvY2tlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5sb2NrZWRfO1xuICB9XG59XG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbi8qKlxuICogV2hldGhlciB0aGUgZWxlbWVudCBoYXZlIGEgbmV4dCBub2RlIGluIHRoZSBkb2N1bWVudCBvcmRlci5cbiAqIFRoaXMgbWVhbnMgZWl0aGVyOlxuICogIGEuIFRoZSBlbGVtZW50IGl0c2VsZiBoYXMgYSBuZXh0U2libGluZy5cbiAqICBiLiBBbnkgb2YgdGhlIGVsZW1lbnQgYW5jZXN0b3JzIGhhcyBhIG5leHRTaWJsaW5nLlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHs/Tm9kZT19IG9wdF9zdG9wTm9kZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaGFzTmV4dE5vZGVJbkRvY3VtZW50T3JkZXIoZWxlbWVudCwgb3B0X3N0b3BOb2RlKSB7XG4gIGxldCBjdXJyZW50RWxlbWVudCA9IGVsZW1lbnQ7XG4gIGRvIHtcbiAgICBpZiAoY3VycmVudEVsZW1lbnQubmV4dFNpYmxpbmcpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSB3aGlsZSAoKGN1cnJlbnRFbGVtZW50ID0gY3VycmVudEVsZW1lbnQucGFyZW50Tm9kZSkgJiZcbiAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50ICE9IG9wdF9zdG9wTm9kZSk7XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIERldGVybWluZXMgaWYgdmFsdWUgaXMgYWN0dWFsbHkgYW4gQXJyYXkuXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc0FycmF5KHZhbHVlKSB7XG4gIHJldHVybiBBcnJheS5pc0FycmF5KHZhbHVlKTtcbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIFNpbXBsZSB3cmFwcGVyIGFyb3VuZCBKU09OLnBhcnNlIHRoYXQgY2FzdHMgdGhlIHJldHVybiB2YWx1ZVxuICogdG8gSnNvbk9iamVjdC5cbiAqIENyZWF0ZSBhIG5ldyB3cmFwcGVyIGlmIGFuIGFycmF5IHJldHVybiB2YWx1ZSBpcyBkZXNpcmVkLlxuICogQHBhcmFtIHsqfSBqc29uIEpTT04gc3RyaW5nIHRvIHBhcnNlXG4gKiBAcmV0dXJuIHs/SnNvbk9iamVjdHx1bmRlZmluZWR9IE1heSBiZSBleHRlbmQgdG8gcGFyc2UgYXJyYXlzLlxuICovXG5mdW5jdGlvbiBwYXJzZUpzb24oanNvbikge1xuICByZXR1cm4gLyoqIEB0eXBlIHs/SnNvbk9iamVjdH0gKi8oSlNPTi5wYXJzZSgvKiogQHR5cGUge3N0cmluZ30gKi8gKGpzb24pKSk7XG59XG5cbi8qKlxuICogUGFyc2VzIHRoZSBnaXZlbiBganNvbmAgc3RyaW5nIHdpdGhvdXQgdGhyb3dpbmcgYW4gZXhjZXB0aW9uIGlmIG5vdCB2YWxpZC5cbiAqIFJldHVybnMgYHVuZGVmaW5lZGAgaWYgcGFyc2luZyBmYWlscy5cbiAqIFJldHVybnMgdGhlIGBPYmplY3RgIGNvcnJlc3BvbmRpbmcgdG8gdGhlIEpTT04gc3RyaW5nIHdoZW4gcGFyc2luZyBzdWNjZWVkcy5cbiAqIEBwYXJhbSB7Kn0ganNvbiBKU09OIHN0cmluZyB0byBwYXJzZVxuICogQHBhcmFtIHtmdW5jdGlvbighRXJyb3IpPX0gb3B0X29uRmFpbGVkIE9wdGlvbmFsIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWRcbiAqICAgICB3aXRoIHRoZSBlcnJvciBpZiBwYXJzaW5nIGZhaWxzLlxuICogQHJldHVybiB7P0pzb25PYmplY3R8dW5kZWZpbmVkfSBNYXkgYmUgZXh0ZW5kIHRvIHBhcnNlIGFycmF5cy5cbiAqL1xuZnVuY3Rpb24gdHJ5UGFyc2VKc29uKGpzb24sIG9wdF9vbkZhaWxlZCkge1xuICB0cnkge1xuICAgIHJldHVybiBwYXJzZUpzb24oanNvbik7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAob3B0X29uRmFpbGVkKSB7XG4gICAgICBvcHRfb25GYWlsZWQoZSk7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5jb25zdCBBTFJFQURZX1NFRU4gPSAnX19TV0ctU0VFTl9fJztcblxuXG4vKipcbiAqL1xuY2xhc3MgUGFnZUNvbmZpZ1Jlc29sdmVyIHtcblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fCFEb2N1bWVudHwhRG9jfSB3aW5PckRvY1xuICAgKi9cbiAgY29uc3RydWN0b3Iod2luT3JEb2MpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshRG9jfSAqL1xuICAgIHRoaXMuZG9jXyA9IHJlc29sdmVEb2Mod2luT3JEb2MpO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/ZnVuY3Rpb24oKCFQYWdlQ29uZmlnfCFQcm9taXNlKSl9ICovXG4gICAgdGhpcy5jb25maWdSZXNvbHZlcl8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVByb21pc2U8IVBhZ2VDb25maWc+fSAqL1xuICAgIHRoaXMuY29uZmlnUHJvbWlzZV8gPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIHRoaXMuY29uZmlnUmVzb2x2ZXJfID0gcmVzb2x2ZTtcbiAgICB9KTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFNZXRhUGFyc2VyfSAqL1xuICAgIHRoaXMubWV0YVBhcnNlcl8gPSBuZXcgTWV0YVBhcnNlcih0aGlzLmRvY18pO1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFKc29uTGRQYXJzZXJ9ICovXG4gICAgdGhpcy5sZFBhcnNlcl8gPSBuZXcgSnNvbkxkUGFyc2VyKHRoaXMuZG9jXyk7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IU1pY3JvZGF0YVBhcnNlcn0gKi9cbiAgICB0aGlzLm1pY3JvZGF0YVBhcnNlcl8gPSBuZXcgTWljcm9kYXRhUGFyc2VyKHRoaXMuZG9jXyk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IVByb21pc2U8IVBhZ2VDb25maWc+fVxuICAgKi9cbiAgcmVzb2x2ZUNvbmZpZygpIHtcbiAgICAvLyBUcnkgcmVzb2x2ZSB0aGUgY29uZmlnIGF0IGRpZmZlcmVudCB0aW1lcy5cbiAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKHRoaXMuY2hlY2suYmluZCh0aGlzKSk7XG4gICAgdGhpcy5kb2NfLndoZW5SZWFkeSgpLnRoZW4odGhpcy5jaGVjay5iaW5kKHRoaXMpKTtcbiAgICByZXR1cm4gdGhpcy5jb25maWdQcm9taXNlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/UGFnZUNvbmZpZ31cbiAgICovXG4gIGNoZWNrKCkge1xuICAgIC8vIEFscmVhZHkgcmVzb2x2ZWQuXG4gICAgaWYgKCF0aGlzLmNvbmZpZ1Jlc29sdmVyXykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGxldCBjb25maWcgPSB0aGlzLm1ldGFQYXJzZXJfLmNoZWNrKCk7XG4gICAgaWYgKCFjb25maWcpIHtcbiAgICAgIGNvbmZpZyA9IHRoaXMubGRQYXJzZXJfLmNoZWNrKCk7XG4gICAgfVxuICAgIGlmICghY29uZmlnKSB7XG4gICAgICBjb25maWcgPSB0aGlzLm1pY3JvZGF0YVBhcnNlcl8uY2hlY2soKTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZykge1xuICAgICAgLy8gUHJvZHVjdCBJRCBoYXMgYmVlbiBmb3VuZDogaW5pdGlhbGl6ZSB0aGUgcmVzdCBvZiB0aGUgY29uZmlnLlxuICAgICAgdGhpcy5jb25maWdSZXNvbHZlcl8oY29uZmlnKTtcbiAgICAgIHRoaXMuY29uZmlnUmVzb2x2ZXJfID0gbnVsbDtcbiAgICB9IGVsc2UgaWYgKHRoaXMuZG9jXy5pc1JlYWR5KCkpIHtcbiAgICAgIHRoaXMuY29uZmlnUmVzb2x2ZXJfKFByb21pc2UucmVqZWN0KFxuICAgICAgICAgIG5ldyBFcnJvcignTm8gY29uZmlnIGNvdWxkIGJlIGRpc2NvdmVyZWQgaW4gdGhlIHBhZ2UnKSkpO1xuICAgICAgdGhpcy5jb25maWdSZXNvbHZlcl8gPSBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gY29uZmlnO1xuICB9XG59XG5cblxuY2xhc3MgTWV0YVBhcnNlciB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFEb2N9IGRvY1xuICAgKi9cbiAgY29uc3RydWN0b3IoZG9jKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IURvY30gKi9cbiAgICB0aGlzLmRvY18gPSBkb2M7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7P1BhZ2VDb25maWd9XG4gICAqL1xuICBjaGVjaygpIHtcbiAgICBpZiAoIXRoaXMuZG9jXy5nZXRCb2R5KCkpIHtcbiAgICAgIC8vIFdhaXQgdW50aWwgdGhlIHdob2xlIGA8aGVhZD5gIGlzIHBhcnNlZC5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIFRyeSB0byBmaW5kIHByb2R1Y3QgaWQuXG4gICAgY29uc3QgcHJvZHVjdElkID0gZ2V0TWV0YVRhZyh0aGlzLmRvY18uZ2V0Um9vdE5vZGUoKSxcbiAgICAgICAgJ3N1YnNjcmlwdGlvbnMtcHJvZHVjdC1pZCcpO1xuICAgIGlmICghcHJvZHVjdElkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBJcyBsb2NrZWQ/XG4gICAgY29uc3QgYWNjZXNzaWJsZUZvckZyZWUgPSBnZXRNZXRhVGFnKHRoaXMuZG9jXy5nZXRSb290Tm9kZSgpLFxuICAgICAgICAnc3Vic2NyaXB0aW9ucy1hY2Nlc3NpYmxlLWZvci1mcmVlJyk7XG4gICAgY29uc3QgbG9ja2VkID0gKGFjY2Vzc2libGVGb3JGcmVlICYmXG4gICAgICAgIGFjY2Vzc2libGVGb3JGcmVlLnRvTG93ZXJDYXNlKCkgPT0gJ2ZhbHNlJykgfHwgZmFsc2U7XG5cbiAgICByZXR1cm4gbmV3IFBhZ2VDb25maWcocHJvZHVjdElkLCBsb2NrZWQpO1xuICB9XG59XG5cblxuY2xhc3MgSnNvbkxkUGFyc2VyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IURvY30gZG9jXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihkb2MpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshRG9jfSAqL1xuICAgIHRoaXMuZG9jXyA9IGRvYztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/UGFnZUNvbmZpZ31cbiAgICovXG4gIGNoZWNrKCkge1xuICAgIGlmICghdGhpcy5kb2NfLmdldEJvZHkoKSkge1xuICAgICAgLy8gV2FpdCB1bnRpbCB0aGUgd2hvbGUgYDxoZWFkPmAgaXMgcGFyc2VkLlxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgZG9tUmVhZHkgPSB0aGlzLmRvY18uaXNSZWFkeSgpO1xuXG4gICAgLy8gdHlwZTogJ2FwcGxpY2F0aW9uL2xkK2pzb24nXG4gICAgY29uc3QgZWxlbWVudHMgPSB0aGlzLmRvY18uZ2V0Um9vdE5vZGUoKS5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICAgICAnc2NyaXB0W3R5cGU9XCJhcHBsaWNhdGlvbi9sZCtqc29uXCJdJyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgZWxlbWVudCA9IGVsZW1lbnRzW2ldO1xuICAgICAgaWYgKGVsZW1lbnRbQUxSRUFEWV9TRUVOXSB8fFxuICAgICAgICAgICFlbGVtZW50LnRleHRDb250ZW50IHx8XG4gICAgICAgICAgIWRvbVJlYWR5ICYmICFoYXNOZXh0Tm9kZUluRG9jdW1lbnRPcmRlcihlbGVtZW50KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGVsZW1lbnRbQUxSRUFEWV9TRUVOXSA9IHRydWU7XG4gICAgICBpZiAoZWxlbWVudC50ZXh0Q29udGVudC5pbmRleE9mKCdOZXdzQXJ0aWNsZScpID09IC0xKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgcG9zc2libGVDb25maWcgPSB0aGlzLnRyeUV4dHJhY3RDb25maWdfKGVsZW1lbnQpO1xuICAgICAgaWYgKHBvc3NpYmxlQ29uZmlnKSB7XG4gICAgICAgIHJldHVybiBwb3NzaWJsZUNvbmZpZztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICAgKiBAcmV0dXJuIHs/UGFnZUNvbmZpZ31cbiAgICovXG4gIHRyeUV4dHJhY3RDb25maWdfKGVsZW1lbnQpIHtcbiAgICBjb25zdCBqc29uID0gdHJ5UGFyc2VKc29uKGVsZW1lbnQudGV4dENvbnRlbnQpO1xuICAgIGlmICghanNvbikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gTXVzdCBiZSBhIE5ld3NBcnRpY2xlLlxuICAgIGlmICghdGhpcy5jaGVja1R5cGVfKGpzb24sICdOZXdzQXJ0aWNsZScpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBNdXN0IGhhdmUgYSBpc1BhcnRPZltAdHlwZT1Qcm9kdWN0XS5cbiAgICBsZXQgcHJvZHVjdElkID0gbnVsbDtcbiAgICBjb25zdCBwYXJ0T2ZBcnJheSA9IHRoaXMudmFsdWVBcnJheV8oanNvbiwgJ2lzUGFydE9mJyk7XG4gICAgaWYgKHBhcnRPZkFycmF5KSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRPZkFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHByb2R1Y3RJZCA9IHRoaXMuZGlzY292ZXJQcm9kdWN0SWRfKHBhcnRPZkFycmF5W2ldKTtcbiAgICAgICAgaWYgKHByb2R1Y3RJZCkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghcHJvZHVjdElkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBGb3VuZCBwcm9kdWN0IGlkLCBqdXN0IGNoZWNrIGZvciB0aGUgYWNjZXNzIGZsYWcuXG4gICAgY29uc3QgaXNBY2Nlc3NpYmxlRm9yRnJlZSA9IHRoaXMuYm9vbF8oXG4gICAgICAgIHRoaXMuc2luZ2xlVmFsdWVfKGpzb24sICdpc0FjY2Vzc2libGVGb3JGcmVlJyksXG4gICAgICAgIC8qIGRlZmF1bHQgKi8gdHJ1ZSk7XG5cbiAgICByZXR1cm4gbmV3IFBhZ2VDb25maWcocHJvZHVjdElkLCAhaXNBY2Nlc3NpYmxlRm9yRnJlZSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGRlZlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgYm9vbF8odmFsdWUsIGRlZikge1xuICAgIGlmICh2YWx1ZSA9PSBudWxsIHx8IHZhbHVlID09PSAnJykge1xuICAgICAgcmV0dXJuIGRlZjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnYm9vbGVhbicpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJykge1xuICAgICAgY29uc3QgbG93ZXJjYXNlID0gdmFsdWUudG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmIChsb3dlcmNhc2UgPT0gJ2ZhbHNlJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAobG93ZXJjYXNlID09ICd0cnVlJykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRlZjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFPYmplY3R9IGpzb25cbiAgICogQHJldHVybiB7P3N0cmluZ31cbiAgICovXG4gIGRpc2NvdmVyUHJvZHVjdElkXyhqc29uKSB7XG4gICAgLy8gTXVzdCBoYXZlIHR5cGUgYFByb2R1Y3RgLlxuICAgIGlmICghdGhpcy5jaGVja1R5cGVfKGpzb24sICdQcm9kdWN0JykpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gLyoqIEB0eXBlIHs/c3RyaW5nfSAqLyAodGhpcy5zaW5nbGVWYWx1ZV8oanNvbiwgJ3Byb2R1Y3RJRCcpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFPYmplY3R9IGpzb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICogQHJldHVybiB7P0FycmF5fVxuICAgKi9cbiAgdmFsdWVBcnJheV8oanNvbiwgbmFtZSkge1xuICAgIGNvbnN0IHZhbHVlID0ganNvbltuYW1lXTtcbiAgICBpZiAodmFsdWUgPT0gbnVsbCB8fCB2YWx1ZSA9PT0gJycpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFt2YWx1ZV07XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshT2JqZWN0fSBqc29uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEByZXR1cm4geyp9XG4gICAqL1xuICBzaW5nbGVWYWx1ZV8oanNvbiwgbmFtZSkge1xuICAgIGNvbnN0IHZhbHVlQXJyYXkgPSB0aGlzLnZhbHVlQXJyYXlfKGpzb24sIG5hbWUpO1xuICAgIGNvbnN0IHZhbHVlID0gdmFsdWVBcnJheSAmJiB2YWx1ZUFycmF5WzBdO1xuICAgIHJldHVybiAodmFsdWUgPT0gbnVsbCB8fCB2YWx1ZSA9PT0gJycpID8gbnVsbCA6IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IU9iamVjdH0ganNvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXhwZWN0ZWRUeXBlXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBjaGVja1R5cGVfKGpzb24sIGV4cGVjdGVkVHlwZSkge1xuICAgIGNvbnN0IHR5cGVBcnJheSA9IHRoaXMudmFsdWVBcnJheV8oanNvbiwgJ0B0eXBlJyk7XG4gICAgaWYgKCF0eXBlQXJyYXkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuICh0eXBlQXJyYXkuaW5jbHVkZXMoZXhwZWN0ZWRUeXBlKSB8fFxuICAgICAgICB0eXBlQXJyYXkuaW5jbHVkZXMoJ2h0dHA6Ly9zY2hlbWEub3JnLycgKyBleHBlY3RlZFR5cGUpKTtcbiAgfVxufVxuXG5jbGFzcyBNaWNyb2RhdGFQYXJzZXIge1xuICAvKipcbiAgICogQHBhcmFtIHshRG9jfSBkb2NcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRvYykge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFEb2N9ICovXG4gICAgdGhpcy5kb2NfID0gZG9jO1xuICAgIC8qKiBAcHJpdmF0ZSB7P2Jvb2xlYW59ICovXG4gICAgdGhpcy5hY2Nlc3NfID0gbnVsbDtcbiAgICAvKiogQHByaXZhdGUgez9zdHJpbmd9ICovXG4gICAgdGhpcy5wcm9kdWN0SWRfID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGZhbHNlIGlmIGFjY2VzcyBpcyByZXN0cmljdGVkLCBvdGhlcndpc2UgdHJ1ZVxuICAgKiBAcGFyYW0geyFFbGVtZW50fSByb290IEFuIGVsZW1lbnQgdGhhdCBpcyBhbiBpdGVtIG9mIHR5cGUgJ05ld3NBcnRpY2xlJ1xuICAgKiBAcmV0dXJuIHs/Ym9vbGVhbn0gbG9ja2VkIGFjY2Vzc1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZGlzY292ZXJBY2Nlc3NfKHJvb3QpIHtcbiAgICBjb25zdCBBTFJFQURZX1NFRU4gPSAnYWxyZWFkeVNlZW5Gb3JBY2Nlc3NJbmZvJztcbiAgICBjb25zdCBub2RlTGlzdCA9IHJvb3RcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbaXRlbXByb3A9J2lzQWNjZXNzaWJsZUZvckZyZWUnXVwiKTtcbiAgICBmb3IgKGxldCBpID0gMDsgbm9kZUxpc3RbaV07IGkrKykge1xuICAgICAgY29uc3QgZWxlbWVudCA9IG5vZGVMaXN0W2ldO1xuICAgICAgY29uc3QgY29udGVudCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdjb250ZW50JykgfHwgZWxlbWVudC50ZXh0Q29udGVudDtcbiAgICAgIGlmICghY29udGVudCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmlzVmFsaWRFbGVtZW50XyhlbGVtZW50LCByb290LCBBTFJFQURZX1NFRU4pKSB7XG4gICAgICAgIGxldCBhY2Nlc3NGb3JGcmVlID0gbnVsbDtcbiAgICAgICAgaWYgKGNvbnRlbnQudG9Mb3dlckNhc2UoKSA9PSAndHJ1ZScpIHtcbiAgICAgICAgICBhY2Nlc3NGb3JGcmVlID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmIChjb250ZW50LnRvTG93ZXJDYXNlKCkgPT0gJ2ZhbHNlJykge1xuICAgICAgICAgIGFjY2Vzc0ZvckZyZWUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWNjZXNzRm9yRnJlZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpZXMgaWYgYW4gZWxlbWVudCBpcyB2YWxpZCBiYXNlZCBvbiB0aGUgZm9sbG93aW5nXG4gICAqIC0gY2hpbGQgb2YgYW4gaXRlbSBvZiB0eXBlICdOZXdzQXJ0aWNsZSdcbiAgICogLSBub3QgYSBjaGlsZCBvZiBhbiBpdGVtIG9mIGFueSBvdGhlciB0eXBlXG4gICAqIC0gbm90IHNlZW4gYmVmb3JlLCBtYXJrZWQgdXNpbmcgdGhlIGFscmVhZHlTZWVuIHRhZ1xuICAgKiBAcGFyYW0gez9FbGVtZW50fSBjdXJyZW50IHRoZSBlbGVtZW50IHRvIGJlIHZlcmlmaWVkXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IHJvb3QgdGhlIHBhcmVudCB0byB0cmFjayB1cCB0b1xuICAgKiBAcGFyYW0geyFzdHJpbmd9IGFscmVhZHlTZWVuIHVzZWQgdG8gdGFnIGFscmVhZHkgdmlzaXRlZCBub2Rlc1xuICAgKiBAcmV0dXJuIHshYm9vbGVhbn0gdmFsaWQgbm9kZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaXNWYWxpZEVsZW1lbnRfKGN1cnJlbnQsIHJvb3QsIGFscmVhZHlTZWVuKSB7XG4gICAgZm9yIChsZXQgbm9kZSA9IGN1cnJlbnQ7XG4gICAgICAgIG5vZGUgJiYgIW5vZGVbYWxyZWFkeVNlZW5dOyBub2RlID0gbm9kZS5wYXJlbnROb2RlKSB7XG4gICAgICBub2RlW2FscmVhZHlTZWVuXSA9IHRydWU7XG4gICAgICBpZiAobm9kZS5oYXNBdHRyaWJ1dGUoJ2l0ZW1zY29wZScpKSB7XG4gICAgICAgIC8qKns/c3RyaW5nfSAqL1xuICAgICAgICBjb25zdCB0eXBlID0gbm9kZS5nZXRBdHRyaWJ1dGUoJ2l0ZW10eXBlJyk7XG4gICAgICAgIGlmICh0eXBlLmluZGV4T2YoJ2h0dHA6Ly9zY2hlbWEub3JnL05ld3NBcnRpY2xlJykgPj0gMCkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogT2J0YWlucyB0aGUgcHJvZHVjdCBJRCB0aGF0IG1lZXRzIHRoZSByZXF1aXJlbWVudHNcbiAgICogLSBjaGlsZCBvZiBhbiBpdGVtIG9mIHR5cGUgJ05ld3NBcnRpY2xlJ1xuICAgKiAtIE5vdCBhIGNoaWxkIG9mIGFuIGl0ZW0gb2YgdHlwZSAnU2VjdGlvbidcbiAgICogLSBjaGlsZCBvZiBhbiBpdGVtIG9mIHR5cGUgJ3Byb2R1Y3RJRCdcbiAgICogQHBhcmFtIHshRWxlbWVudH0gcm9vdCBBbiBlbGVtZW50IHRoYXQgaXMgYW4gaXRlbSBvZiB0eXBlICdOZXdzQXJ0aWNsZSdcbiAgICogQHJldHVybiB7P3N0cmluZ30gcHJvZHVjdCBJRCwgaWYgZm91bmRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGRpc2NvdmVyUHJvZHVjdElkXyhyb290KSB7XG4gICAgY29uc3QgQUxSRUFEWV9TRUVOID0gJ2FscmVhZHlTZWVuRm9yUHJvZHVjdEluZm8nO1xuICAgIGNvbnN0IG5vZGVMaXN0ID0gcm9vdFxuICAgICAgICAucXVlcnlTZWxlY3RvckFsbCgnW2l0ZW1wcm9wPVwicHJvZHVjdElEXCJdJyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IG5vZGVMaXN0W2ldOyBpKyspIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBub2RlTGlzdFtpXTtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnY29udGVudCcpIHx8IGVsZW1lbnQudGV4dENvbnRlbnQ7XG4gICAgICBjb25zdCBpdGVtID0gZWxlbWVudC5jbG9zZXN0KCdbaXRlbXR5cGVdW2l0ZW1zY29wZV0nKTtcbiAgICAgIGNvbnN0IHR5cGUgPSBpdGVtLmdldEF0dHJpYnV0ZSgnaXRlbXR5cGUnKTtcbiAgICAgIGlmICh0eXBlLmluZGV4T2YoJ2h0dHA6Ly9zY2hlbWEub3JnL1Byb2R1Y3QnKSA8PSAtMSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmlzVmFsaWRFbGVtZW50XyhpdGVtLnBhcmVudEVsZW1lbnQsIHJvb3QsIEFMUkVBRFlfU0VFTikpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgUGFnZUNvbmZpZyBpZiBhdmFpbGFibGVcbiAgICogQHJldHVybiB7P1BhZ2VDb25maWd9IFBhZ2VDb25maWcgZm91bmQgc28gZmFyXG4gICAqL1xuICBnZXRQYWdlQ29uZmlnXygpIHtcbiAgICBsZXQgbG9ja2VkID0gbnVsbDtcbiAgICBpZiAodGhpcy5hY2Nlc3NfICE9IG51bGwpIHtcbiAgICAgIGxvY2tlZCA9ICF0aGlzLmFjY2Vzc187XG4gICAgfSBlbHNlIGlmICh0aGlzLmRvY18uaXNSZWFkeSgpKSB7XG4gICAgICAvLyBEZWZhdWx0IHRvIHVubG9ja2VkXG4gICAgICBsb2NrZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHRoaXMucHJvZHVjdElkXyAhPSBudWxsICYmIGxvY2tlZCAhPSBudWxsKSB7XG4gICAgICByZXR1cm4gbmV3IFBhZ2VDb25maWcodGhpcy5wcm9kdWN0SWRfLCBsb2NrZWQpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRyYWN0cyBwYWdlIGNvbmZpZyBmcm9tIE1pY3JvZGF0YSBpbiB0aGUgRE9NXG4gICAqIEByZXR1cm4gez9QYWdlQ29uZmlnfSBQYWdlQ29uZmlnIGZvdW5kXG4gICAqL1xuICB0cnlFeHRyYWN0Q29uZmlnXygpIHtcbiAgICBsZXQgY29uZmlnID0gdGhpcy5nZXRQYWdlQ29uZmlnXygpO1xuICAgIGlmIChjb25maWcpIHtcbiAgICAgIHJldHVybiBjb25maWc7XG4gICAgfVxuICAgIGNvbnN0IG5vZGVMaXN0ID0gdGhpcy5kb2NfLmdldFJvb3ROb2RlKCkucXVlcnlTZWxlY3RvckFsbChcbiAgICAgICAgJ1tpdGVtc2NvcGVdW2l0ZW10eXBlKj1cImh0dHA6Ly9zY2hlbWEub3JnL05ld3NBcnRpY2xlXCJdJyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IG5vZGVMaXN0W2ldICYmIGNvbmZpZyA9PSBudWxsOyBpKyspIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBub2RlTGlzdFtpXTtcbiAgICAgIGlmICh0aGlzLmFjY2Vzc18gPT0gbnVsbCkge1xuICAgICAgICB0aGlzLmFjY2Vzc18gPSB0aGlzLmRpc2NvdmVyQWNjZXNzXyhlbGVtZW50KTtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5wcm9kdWN0SWRfKSB7XG4gICAgICAgIHRoaXMucHJvZHVjdElkXyA9IHRoaXMuZGlzY292ZXJQcm9kdWN0SWRfKGVsZW1lbnQpO1xuICAgICAgfVxuICAgICAgY29uZmlnID0gdGhpcy5nZXRQYWdlQ29uZmlnXygpO1xuICAgIH1cbiAgICByZXR1cm4gY29uZmlnO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9QYWdlQ29uZmlnfVxuICAgKi9cbiAgY2hlY2soKSB7XG4gICAgaWYgKCF0aGlzLmRvY18uZ2V0Qm9keSgpKSB7XG4gICAgICAvLyBXYWl0IHVudGlsIHRoZSB3aG9sZSBgPGhlYWQ+YCBpcyBwYXJzZWQuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudHJ5RXh0cmFjdENvbmZpZ18oKTtcbiAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHZhbHVlIGZyb20gY29udGVudCBhdHRyaWJ1dGUgb2YgYSBtZXRhIHRhZyB3aXRoIGdpdmVuIG5hbWUuXG4gKlxuICogSWYgbXVsdGlwbGUgdGFncyBhcmUgZm91bmQsIHRoZSBmaXJzdCB2YWx1ZSBpcyByZXR1cm5lZC5cbiAqXG4gKiBAcGFyYW0geyFOb2RlfSByb290Tm9kZVxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgVGhlIHRhZyBuYW1lIHRvIGxvb2sgZm9yLlxuICogQHJldHVybiB7P3N0cmluZ30gYXR0cmlidXRlIHZhbHVlIG9yIGVtcHR5IHN0cmluZy5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGdldE1ldGFUYWcocm9vdE5vZGUsIG5hbWUpIHtcbiAgY29uc3QgZWwgPSByb290Tm9kZS5xdWVyeVNlbGVjdG9yKGBtZXRhW25hbWU9XCIke25hbWV9XCJdYCk7XG4gIGlmIChlbCkge1xuICAgIHJldHVybiBlbC5nZXRBdHRyaWJ1dGUoJ2NvbnRlbnQnKTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbmV4cG9ydCB7XG4gIERvYyxcbiAgUGFnZUNvbmZpZyxcbiAgUGFnZUNvbmZpZ1Jlc29sdmVyLFxufTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBWZXJzaW9uOiAwLjEuMjIuMjMgKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IFRoZSBXZWIgQWN0aXZpdGllcyBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyplc2xpbnQgbm8tdW51c2VkLXZhcnM6IDAqL1xuXG5cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuY29uc3QgQWN0aXZpdHlNb2RlID0ge1xuICBJRlJBTUU6ICdpZnJhbWUnLFxuICBQT1BVUDogJ3BvcHVwJyxcbiAgUkVESVJFQ1Q6ICdyZWRpcmVjdCcsXG59O1xuXG5cbi8qKlxuICogVGhlIHJlc3VsdCBjb2RlIHVzZWQgZm9yIGBBY3Rpdml0eVJlc3VsdGAuXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5jb25zdCBBY3Rpdml0eVJlc3VsdENvZGUgPSB7XG4gIE9LOiAnb2snLFxuICBDQU5DRUxFRDogJ2NhbmNlbGVkJyxcbiAgRkFJTEVEOiAnZmFpbGVkJyxcbn07XG5cblxuLyoqXG4gKiBUaGUgcmVzdWx0IG9mIGFuIGFjdGl2aXR5LiBUaGUgYWN0aXZpdHkgaW1wbGVtZW50YXRpb24gcmV0dXJucyB0aGlzIG9iamVjdFxuICogZm9yIGEgc3VjY2Vzc2Z1bCByZXN1bHQsIGEgY2FuY2VsYXRpb24gb3IgYSBmYWlsdXJlLlxuICogQHN0cnVjdFxuICovXG5jbGFzcyBBY3Rpdml0eVJlc3VsdCB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFBY3Rpdml0eVJlc3VsdENvZGV9IGNvZGVcbiAgICogQHBhcmFtIHsqfSBkYXRhXG4gICAqIEBwYXJhbSB7IUFjdGl2aXR5TW9kZX0gbW9kZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3JpZ2luXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3JpZ2luVmVyaWZpZWRcbiAgICogQHBhcmFtIHtib29sZWFufSBzZWN1cmVDaGFubmVsXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihjb2RlLCBkYXRhLCBtb2RlLCBvcmlnaW4sIG9yaWdpblZlcmlmaWVkLCBzZWN1cmVDaGFubmVsKSB7XG4gICAgLyoqIEBjb25zdCB7IUFjdGl2aXR5UmVzdWx0Q29kZX0gKi9cbiAgICB0aGlzLmNvZGUgPSBjb2RlO1xuICAgIC8qKiBAY29uc3Qgeyp9ICovXG4gICAgdGhpcy5kYXRhID0gY29kZSA9PSBBY3Rpdml0eVJlc3VsdENvZGUuT0sgPyBkYXRhIDogbnVsbDtcbiAgICAvKiogQGNvbnN0IHshQWN0aXZpdHlNb2RlfSAqL1xuICAgIHRoaXMubW9kZSA9IG1vZGU7XG4gICAgLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMub3JpZ2luID0gb3JpZ2luO1xuICAgIC8qKiBAY29uc3Qge2Jvb2xlYW59ICovXG4gICAgdGhpcy5vcmlnaW5WZXJpZmllZCA9IG9yaWdpblZlcmlmaWVkO1xuICAgIC8qKiBAY29uc3Qge2Jvb2xlYW59ICovXG4gICAgdGhpcy5zZWN1cmVDaGFubmVsID0gc2VjdXJlQ2hhbm5lbDtcbiAgICAvKiogQGNvbnN0IHtib29sZWFufSAqL1xuICAgIHRoaXMub2sgPSBjb2RlID09IEFjdGl2aXR5UmVzdWx0Q29kZS5PSztcbiAgICAvKiogQGNvbnN0IHs/RXJyb3J9ICovXG4gICAgdGhpcy5lcnJvciA9IGNvZGUgPT0gQWN0aXZpdHlSZXN1bHRDb2RlLkZBSUxFRCA/XG4gICAgICAgIG5ldyBFcnJvcihTdHJpbmcoZGF0YSkgfHwgJycpIDpcbiAgICAgICAgbnVsbDtcbiAgfVxufVxuXG5cbi8qKlxuICogVGhlIGFjdGl2aXR5IHJlcXVlc3QgdGhhdCBkaWZmZXJlbnQgdHlwZXMgb2YgaG9zdHMgY2FuIGJlIHN0YXJ0ZWQgd2l0aC5cbiAqIEB0eXBlZGVmIHt7XG4gKiAgIHJlcXVlc3RJZDogc3RyaW5nLFxuICogICByZXR1cm5Vcmw6IHN0cmluZyxcbiAqICAgYXJnczogP09iamVjdCxcbiAqICAgb3JpZ2luOiAoc3RyaW5nfHVuZGVmaW5lZCksXG4gKiAgIG9yaWdpblZlcmlmaWVkOiAoYm9vbGVhbnx1bmRlZmluZWQpLFxuICogfX1cbiAqL1xubGV0IEFjdGl2aXR5UmVxdWVzdDtcblxuXG4vKipcbiAqIFRoZSBhY3Rpdml0eSBcIm9wZW5cIiBvcHRpb25zIHVzZWQgZm9yIHBvcHVwcyBhbmQgcmVkaXJlY3RzLlxuICpcbiAqIC0gcmV0dXJuVXJsOiBvdmVycmlkZSB0aGUgcmV0dXJuIFVSTC4gQnkgZGVmYXVsdCwgdGhlIGN1cnJlbnQgVVJMIHdpbGwgYmVcbiAqICAgdXNlZC5cbiAqIC0gc2tpcFJlcXVlc3RJblVybDogcmVtb3ZlcyB0aGUgYWN0aXZpdHkgcmVxdWVzdCBmcm9tIHRoZSBVUkwsIGluIGNhc2VcbiAqICAgcmVkaXJlY3QgaXMgdXNlZC4gQnkgZGVmYXVsdCwgdGhlIGFjdGl2aXR5IHJlcXVlc3QgaXMgYXBwZW5kZWQgdG8gdGhlXG4gKiAgIGFjdGl2aXR5IFVSTC4gVGhpcyBvcHRpb24gY2FuIGJlIHVzZWQgaWYgdGhlIGFjdGl2aXR5IHJlcXVlc3QgaXMgcGFzc2VkXG4gKiAgIHRvIHRoZSBhY3Rpdml0eSBieSBzb21lIGFsdGVybmF0aXZlIG1lYW5zLlxuICpcbiAqIEB0eXBlZGVmIHt7XG4gKiAgIHJldHVyblVybDogKHN0cmluZ3x1bmRlZmluZWQpLFxuICogICBza2lwUmVxdWVzdEluVXJsOiAoYm9vbGVhbnx1bmRlZmluZWQpLFxuICogICB3aWR0aDogKG51bWJlcnx1bmRlZmluZWQpLFxuICogICBoZWlnaHQ6IChudW1iZXJ8dW5kZWZpbmVkKSxcbiAqIH19XG4gKi9cbmxldCBBY3Rpdml0eU9wZW5PcHRpb25zO1xuXG5cbi8qKlxuICogQWN0aXZpdHkgY2xpZW50LXNpZGUgYmluZGluZy4gVGhlIHBvcnQgcHJvdmlkZXMgbGltaXRlZCB3YXlzIHRvIGNvbW11bmljYXRlXG4gKiB3aXRoIHRoZSBhY3Rpdml0eSBhbmQgcmVjZWl2ZSBzaWduYWxzIGFuZCByZXN1bHRzIGZyb20gaXQuIE5vdCBldmVyeSB0eXBlXG4gKiBvZiBhY3Rpdml0eSBleHBvc2VzIGEgcG9ydC5cbiAqXG4gKiBAaW50ZXJmYWNlXG4gKi9cbmNsYXNzIEFjdGl2aXR5UG9ydCB7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG1vZGUgb2YgdGhlIGFjdGl2aXR5OiBpZnJhbWUsIHBvcHVwIG9yIHJlZGlyZWN0LlxuICAgKiBAcmV0dXJuIHshQWN0aXZpdHlNb2RlfVxuICAgKi9cbiAgZ2V0TW9kZSgpIHt9XG5cbiAgLyoqXG4gICAqIEFjY2VwdHMgdGhlIHJlc3VsdCB3aGVuIHJlYWR5LiBUaGUgY2xpZW50IHNob3VsZCB2ZXJpZnkgdGhlIGFjdGl2aXR5J3NcbiAgICogbW9kZSwgb3JpZ2luLCB2ZXJpZmljYXRpb24gYW5kIHNlY3VyZSBjaGFubmVsIGZsYWdzIGJlZm9yZSBkZWNpZGluZ1xuICAgKiB3aGV0aGVyIG9yIG5vdCB0byB0cnVzdCB0aGUgcmVzdWx0LlxuICAgKlxuICAgKiBSZXR1cm5zIHRoZSBwcm9taXNlIHRoYXQgeWllbGRzIHdoZW4gdGhlIGFjdGl2aXR5IGhhcyBiZWVuIGNvbXBsZXRlZCBhbmRcbiAgICogZWl0aGVyIGEgcmVzdWx0LCBhIGNhbmNlbGF0aW9uIG9yIGEgZmFpbHVyZSBoYXMgYmVlbiByZXR1cm5lZC5cbiAgICpcbiAgICogQHJldHVybiB7IVByb21pc2U8IUFjdGl2aXR5UmVzdWx0Pn1cbiAgICovXG4gIGFjY2VwdFJlc3VsdCgpIHt9XG59XG5cblxuXG4vKiogRE9NRXhjZXB0aW9uLkFCT1JUX0VSUiBuYW1lICovXG5jb25zdCBBQk9SVF9FUlJfTkFNRSA9ICdBYm9ydEVycm9yJztcblxuLyoqIERPTUV4Y2VwdGlvbi5BQk9SVF9FUlIgPSAyMCAqL1xuY29uc3QgQUJPUlRfRVJSX0NPREUgPSAyMDtcblxuLyoqIEB0eXBlIHs/SFRNTEFuY2hvckVsZW1lbnR9ICovXG5sZXQgYVJlc29sdmVyO1xuXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFN0cmluZ1xuICogQHJldHVybiB7IUhUTUxBbmNob3JFbGVtZW50fVxuICovXG5mdW5jdGlvbiBwYXJzZVVybCh1cmxTdHJpbmcpIHtcbiAgaWYgKCFhUmVzb2x2ZXIpIHtcbiAgICBhUmVzb2x2ZXIgPSAvKiogQHR5cGUgeyFIVE1MQW5jaG9yRWxlbWVudH0gKi8gKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKSk7XG4gIH1cbiAgYVJlc29sdmVyLmhyZWYgPSB1cmxTdHJpbmc7XG4gIHJldHVybiAvKiogQHR5cGUgeyFIVE1MQW5jaG9yRWxlbWVudH0gKi8gKGFSZXNvbHZlcik7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0geyFMb2NhdGlvbnwhVVJMfCFIVE1MQW5jaG9yRWxlbWVudH0gbG9jXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGdldE9yaWdpbihsb2MpIHtcbiAgaWYgKGxvYy5vcmlnaW4pIHtcbiAgICByZXR1cm4gbG9jLm9yaWdpbjtcbiAgfVxuICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgb3JpZ2luIGlzIG5vcm1hbGl6ZWQuIFNwZWNpZmljYWxseSBvbiBJRSwgaG9zdCBzb21ldGltZXNcbiAgLy8gaW5jbHVkZXMgdGhlIGRlZmF1bHQgcG9ydCwgd2hpY2ggaXMgbm90IHBlciBzdGFuZGFyZC5cbiAgY29uc3QgcHJvdG9jb2wgPSBsb2MucHJvdG9jb2w7XG4gIGxldCBob3N0ID0gbG9jLmhvc3Q7XG4gIGlmIChwcm90b2NvbCA9PSAnaHR0cHM6JyAmJiBob3N0LmluZGV4T2YoJzo0NDMnKSA9PSBob3N0Lmxlbmd0aCAtIDQpIHtcbiAgICBob3N0ID0gaG9zdC5yZXBsYWNlKCc6NDQzJywgJycpO1xuICB9IGVsc2UgaWYgKHByb3RvY29sID09ICdodHRwOicgJiYgaG9zdC5pbmRleE9mKCc6ODAnKSA9PSBob3N0Lmxlbmd0aCAtIDMpIHtcbiAgICBob3N0ID0gaG9zdC5yZXBsYWNlKCc6ODAnLCAnJyk7XG4gIH1cbiAgcmV0dXJuIHByb3RvY29sICsgJy8vJyArIGhvc3Q7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsU3RyaW5nXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGdldE9yaWdpbkZyb21VcmwodXJsU3RyaW5nKSB7XG4gIHJldHVybiBnZXRPcmlnaW4ocGFyc2VVcmwodXJsU3RyaW5nKSk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsU3RyaW5nXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHJlbW92ZUZyYWdtZW50KHVybFN0cmluZykge1xuICBjb25zdCBpbmRleCA9IHVybFN0cmluZy5pbmRleE9mKCcjJyk7XG4gIGlmIChpbmRleCA9PSAtMSkge1xuICAgIHJldHVybiB1cmxTdHJpbmc7XG4gIH1cbiAgcmV0dXJuIHVybFN0cmluZy5zdWJzdHJpbmcoMCwgaW5kZXgpO1xufVxuXG5cbi8qKlxuICogUGFyc2VzIGFuZCBidWlsZHMgT2JqZWN0IG9mIFVSTCBxdWVyeSBzdHJpbmcuXG4gKiBAcGFyYW0ge3N0cmluZ30gcXVlcnkgVGhlIFVSTCBxdWVyeSBzdHJpbmcuXG4gKiBAcmV0dXJuIHshT2JqZWN0PHN0cmluZywgc3RyaW5nPn1cbiAqL1xuZnVuY3Rpb24gcGFyc2VRdWVyeVN0cmluZyhxdWVyeSkge1xuICBpZiAoIXF1ZXJ5KSB7XG4gICAgcmV0dXJuIHt9O1xuICB9XG4gIHJldHVybiAoL15bPyNdLy50ZXN0KHF1ZXJ5KSA/IHF1ZXJ5LnNsaWNlKDEpIDogcXVlcnkpXG4gICAgICAuc3BsaXQoJyYnKVxuICAgICAgLnJlZHVjZSgocGFyYW1zLCBwYXJhbSkgPT4ge1xuICAgICAgICBjb25zdCBpdGVtID0gcGFyYW0uc3BsaXQoJz0nKTtcbiAgICAgICAgY29uc3Qga2V5ID0gZGVjb2RlVVJJQ29tcG9uZW50KGl0ZW1bMF0gfHwgJycpO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGRlY29kZVVSSUNvbXBvbmVudChpdGVtWzFdIHx8ICcnKTtcbiAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgIHBhcmFtc1trZXldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICAgIH0sIHt9KTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBxdWVyeVN0cmluZyAgQSBxdWVyeSBzdHJpbmcgaW4gdGhlIGZvcm0gb2YgXCJhPWImYz1kXCIuIENvdWxkXG4gKiAgIGJlIG9wdGlvbmFsbHkgcHJlZml4ZWQgd2l0aCBcIj9cIiBvciBcIiNcIi5cbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXJhbSBUaGUgcGFyYW0gdG8gZ2V0IGZyb20gdGhlIHF1ZXJ5IHN0cmluZy5cbiAqIEByZXR1cm4gez9zdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGdldFF1ZXJ5UGFyYW0ocXVlcnlTdHJpbmcsIHBhcmFtKSB7XG4gIHJldHVybiBwYXJzZVF1ZXJ5U3RyaW5nKHF1ZXJ5U3RyaW5nKVtwYXJhbV07XG59XG5cblxuLyoqXG4gKiBBZGQgYSBxdWVyeS1saWtlIHBhcmFtZXRlciB0byB0aGUgZnJhZ21lbnQgc3RyaW5nLlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHBhcmFtIHtzdHJpbmd9IHBhcmFtXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gYWRkRnJhZ21lbnRQYXJhbSh1cmwsIHBhcmFtLCB2YWx1ZSkge1xuICByZXR1cm4gdXJsICtcbiAgICAgICh1cmwuaW5kZXhPZignIycpID09IC0xID8gJyMnIDogJyYnKSArXG4gICAgICBlbmNvZGVVUklDb21wb25lbnQocGFyYW0pICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBxdWVyeVN0cmluZyAgQSBxdWVyeSBzdHJpbmcgaW4gdGhlIGZvcm0gb2YgXCJhPWImYz1kXCIuIENvdWxkXG4gKiAgIGJlIG9wdGlvbmFsbHkgcHJlZml4ZWQgd2l0aCBcIj9cIiBvciBcIiNcIi5cbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXJhbSBUaGUgcGFyYW0gdG8gcmVtb3ZlIGZyb20gdGhlIHF1ZXJ5IHN0cmluZy5cbiAqIEByZXR1cm4gez9zdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHJlbW92ZVF1ZXJ5UGFyYW0ocXVlcnlTdHJpbmcsIHBhcmFtKSB7XG4gIGlmICghcXVlcnlTdHJpbmcpIHtcbiAgICByZXR1cm4gcXVlcnlTdHJpbmc7XG4gIH1cbiAgY29uc3Qgc2VhcmNoID0gZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtKSArICc9JztcbiAgbGV0IGluZGV4ID0gLTE7XG4gIGRvIHtcbiAgICBpbmRleCA9IHF1ZXJ5U3RyaW5nLmluZGV4T2Yoc2VhcmNoLCBpbmRleCk7XG4gICAgaWYgKGluZGV4ICE9IC0xKSB7XG4gICAgICBjb25zdCBwcmV2ID0gaW5kZXggPiAwID8gcXVlcnlTdHJpbmcuc3Vic3RyaW5nKGluZGV4IC0gMSwgaW5kZXgpIDogJyc7XG4gICAgICBpZiAocHJldiA9PSAnJyB8fCBwcmV2ID09ICc/JyB8fCBwcmV2ID09ICcjJyB8fCBwcmV2ID09ICcmJykge1xuICAgICAgICBsZXQgZW5kID0gcXVlcnlTdHJpbmcuaW5kZXhPZignJicsIGluZGV4ICsgMSk7XG4gICAgICAgIGlmIChlbmQgPT0gLTEpIHtcbiAgICAgICAgICBlbmQgPSBxdWVyeVN0cmluZy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgcXVlcnlTdHJpbmcgPVxuICAgICAgICAgICAgcXVlcnlTdHJpbmcuc3Vic3RyaW5nKDAsIGluZGV4KSArXG4gICAgICAgICAgICBxdWVyeVN0cmluZy5zdWJzdHJpbmcoZW5kICsgMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbmRleCsrO1xuICAgICAgfVxuICAgIH1cbiAgfSB3aGlsZSAoaW5kZXggIT0gLTEgJiYgaW5kZXggPCBxdWVyeVN0cmluZy5sZW5ndGgpO1xuICByZXR1cm4gcXVlcnlTdHJpbmc7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0geyFBY3Rpdml0eVJlcXVlc3R9IHJlcXVlc3RcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gc2VyaWFsaXplUmVxdWVzdChyZXF1ZXN0KSB7XG4gIGNvbnN0IG1hcCA9IHtcbiAgICAncmVxdWVzdElkJzogcmVxdWVzdC5yZXF1ZXN0SWQsXG4gICAgJ3JldHVyblVybCc6IHJlcXVlc3QucmV0dXJuVXJsLFxuICAgICdhcmdzJzogcmVxdWVzdC5hcmdzLFxuICB9O1xuICBpZiAocmVxdWVzdC5vcmlnaW4gIT09IHVuZGVmaW5lZCkge1xuICAgIG1hcFsnb3JpZ2luJ10gPSByZXF1ZXN0Lm9yaWdpbjtcbiAgfVxuICBpZiAocmVxdWVzdC5vcmlnaW5WZXJpZmllZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgbWFwWydvcmlnaW5WZXJpZmllZCddID0gcmVxdWVzdC5vcmlnaW5WZXJpZmllZDtcbiAgfVxuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkobWFwKTtcbn1cblxuXG4vKipcbiAqIENyZWF0ZXMgb3IgZW11bGF0ZXMgYSBET01FeGNlcHRpb24gb2YgQWJvcnRFcnJvciB0eXBlLlxuICogU2VlIGh0dHBzOi8vaGV5Y2FtLmdpdGh1Yi5pby93ZWJpZGwvI2Fib3J0ZXJyb3IuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfbWVzc2FnZVxuICogQHJldHVybiB7IURPTUV4Y2VwdGlvbn1cbiAqL1xuZnVuY3Rpb24gY3JlYXRlQWJvcnRFcnJvcih3aW4sIG9wdF9tZXNzYWdlKSB7XG4gIGNvbnN0IG1lc3NhZ2UgPSAnQWJvcnRFcnJvcicgKyAob3B0X21lc3NhZ2UgPyAnOiAnICsgb3B0X21lc3NhZ2UgOiAnJyk7XG4gIGxldCBlcnJvciA9IG51bGw7XG4gIGlmICh0eXBlb2Ygd2luWydET01FeGNlcHRpb24nXSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgLy8gVE9ETyhkdm95dGVua28pOiByZW1vdmUgdHlwZWNhc3Qgb25jZSBleHRlcm5zIGFyZSBmaXhlZC5cbiAgICBjb25zdCBjb25zdHIgPSAvKiogQHR5cGUge2Z1bmN0aW9uKG5ldzpET01FeGNlcHRpb24sIHN0cmluZywgc3RyaW5nKX0gKi8gKFxuICAgICAgICB3aW5bJ0RPTUV4Y2VwdGlvbiddKTtcbiAgICB0cnkge1xuICAgICAgZXJyb3IgPSBuZXcgY29uc3RyKG1lc3NhZ2UsIEFCT1JUX0VSUl9OQU1FKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBJZ25vcmUuIEluIHBhcnRpY3VsYXIsIGBuZXcgRE9NRXhjZXB0aW9uKClgIGZhaWxzIGluIEVkZ2UuXG4gICAgfVxuICB9XG4gIGlmICghZXJyb3IpIHtcbiAgICAvLyBUT0RPKGR2b3l0ZW5rbyk6IHJlbW92ZSB0eXBlY2FzdCBvbmNlIGV4dGVybnMgYXJlIGZpeGVkLlxuICAgIGNvbnN0IGNvbnN0ciA9IC8qKiBAdHlwZSB7ZnVuY3Rpb24obmV3OkRPTUV4Y2VwdGlvbiwgc3RyaW5nKX0gKi8gKFxuICAgICAgICBFcnJvcik7XG4gICAgZXJyb3IgPSBuZXcgY29uc3RyKG1lc3NhZ2UpO1xuICAgIGVycm9yLm5hbWUgPSBBQk9SVF9FUlJfTkFNRTtcbiAgICBlcnJvci5jb2RlID0gQUJPUlRfRVJSX0NPREU7XG4gIH1cbiAgcmV0dXJuIGVycm9yO1xufVxuXG5cbi8qKlxuICogUmVzb2x2ZXMgdGhlIGFjdGl2aXR5IHJlc3VsdCBhcyBhIHByb21pc2U6XG4gKiAgLSBgT0tgIHJlc3VsdCBpcyB5aWVsZGVkIGFzIHRoZSBwcm9taXNlJ3MgcGF5bG9hZDtcbiAqICAtIGBDQU5DRUxgIHJlc3VsdCBpcyByZWplY3RlZCB3aXRoIHRoZSBgQWJvcnRFcnJvcmA7XG4gKiAgLSBgRkFJTEVEYCByZXN1bHQgaXMgcmVqZWN0ZWQgd2l0aCB0aGUgZW1iZWRkZWQgZXJyb3IuXG4gKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7IUFjdGl2aXR5UmVzdWx0fSByZXN1bHRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKCFBY3Rpdml0eVJlc3VsdHwhUHJvbWlzZSkpfSByZXNvbHZlclxuICovXG5mdW5jdGlvbiByZXNvbHZlUmVzdWx0KHdpbiwgcmVzdWx0LCByZXNvbHZlcikge1xuICBpZiAocmVzdWx0Lm9rKSB7XG4gICAgcmVzb2x2ZXIocmVzdWx0KTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBlcnJvciA9IHJlc3VsdC5lcnJvciB8fCBjcmVhdGVBYm9ydEVycm9yKHdpbik7XG4gICAgZXJyb3IuYWN0aXZpdHlSZXN1bHQgPSByZXN1bHQ7XG4gICAgcmVzb2x2ZXIoUHJvbWlzZS5yZWplY3QoZXJyb3IpKTtcbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzSWVCcm93c2VyKHdpbikge1xuICAvLyBNU0lFIGFuZCBUcmlkZW50IGFyZSB0eXBpY2FsIHVzZXIgYWdlbnRzIGZvciBJRSBicm93c2Vycy5cbiAgY29uc3QgbmF2ID0gd2luLm5hdmlnYXRvcjtcbiAgcmV0dXJuIC9UcmlkZW50fE1TSUV8SUVNb2JpbGUvaS50ZXN0KG5hdiAmJiBuYXYudXNlckFnZW50KTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc0VkZ2VCcm93c2VyKHdpbikge1xuICBjb25zdCBuYXYgPSB3aW4ubmF2aWdhdG9yO1xuICByZXR1cm4gL0VkZ2UvaS50ZXN0KG5hdiAmJiBuYXYudXNlckFnZW50KTtcbn1cblxuXG5cbmNvbnN0IFNFTlRJTkVMID0gJ19fQUNUSVZJVElFU19fJztcblxuXG4vKipcbiAqIFRoZSBtZXNzZW5nZXIgaGVscGVyIGZvciBhY3Rpdml0eSdzIHBvcnQgYW5kIGhvc3QuXG4gKi9cbmNsYXNzIE1lc3NlbmdlciB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEBwYXJhbSB7IVdpbmRvd3xmdW5jdGlvbigpOj9XaW5kb3d9IHRhcmdldE9yQ2FsbGJhY2tcbiAgICogQHBhcmFtIHs/c3RyaW5nfSB0YXJnZXRPcmlnaW5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHdpbiwgdGFyZ2V0T3JDYWxsYmFjaywgdGFyZ2V0T3JpZ2luKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgICB0aGlzLndpbl8gPSB3aW47XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVdpbmRvd3xmdW5jdGlvbigpOj9XaW5kb3d9ICovXG4gICAgdGhpcy50YXJnZXRPckNhbGxiYWNrXyA9IHRhcmdldE9yQ2FsbGJhY2s7XG5cbiAgICAvKipcbiAgICAgKiBNYXkgc3RhcnQgYXMgdW5rbm93biAoYG51bGxgKSB1bnRpbCByZWNlaXZlZCBpbiB0aGUgZmlyc3QgbWVzc2FnZS5cbiAgICAgKiBAcHJpdmF0ZSB7P3N0cmluZ31cbiAgICAgKi9cbiAgICB0aGlzLnRhcmdldE9yaWdpbl8gPSB0YXJnZXRPcmlnaW47XG5cbiAgICAvKiogQHByaXZhdGUgez9XaW5kb3d9ICovXG4gICAgdGhpcy50YXJnZXRfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLmFjY2VwdHNDaGFubmVsXyA9IGZhbHNlO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/TWVzc2FnZVBvcnR9ICovXG4gICAgdGhpcy5wb3J0XyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9mdW5jdGlvbihzdHJpbmcsID9PYmplY3QpfSAqL1xuICAgIHRoaXMub25Db21tYW5kXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9mdW5jdGlvbighT2JqZWN0KX0gKi9cbiAgICB0aGlzLm9uQ3VzdG9tTWVzc2FnZV8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGUgez9PYmplY3Q8c3RyaW5nLCAhQ2hhbm5lbEhvbGRlcj59XG4gICAgICovXG4gICAgdGhpcy5jaGFubmVsc18gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCAqL1xuICAgIHRoaXMuYm91bmRIYW5kbGVFdmVudF8gPSB0aGlzLmhhbmRsZUV2ZW50Xy5iaW5kKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbm5lY3QgdGhlIHBvcnQgdG8gdGhlIGhvc3Qgb3IgdmljZSB2ZXJzYS5cbiAgICogQHBhcmFtIHtmdW5jdGlvbihzdHJpbmcsID9PYmplY3QpfSBvbkNvbW1hbmRcbiAgICovXG4gIGNvbm5lY3Qob25Db21tYW5kKSB7XG4gICAgaWYgKHRoaXMub25Db21tYW5kXykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdhbHJlYWR5IGNvbm5lY3RlZCcpO1xuICAgIH1cbiAgICB0aGlzLm9uQ29tbWFuZF8gPSBvbkNvbW1hbmQ7XG4gICAgdGhpcy53aW5fLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLmJvdW5kSGFuZGxlRXZlbnRfKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNjb25uZWN0IG1lc3Nlbmdlci5cbiAgICovXG4gIGRpc2Nvbm5lY3QoKSB7XG4gICAgaWYgKHRoaXMub25Db21tYW5kXykge1xuICAgICAgdGhpcy5vbkNvbW1hbmRfID0gbnVsbDtcbiAgICAgIGlmICh0aGlzLnBvcnRfKSB7XG4gICAgICAgIGNsb3NlUG9ydCh0aGlzLnBvcnRfKTtcbiAgICAgICAgdGhpcy5wb3J0XyA9IG51bGw7XG4gICAgICB9XG4gICAgICB0aGlzLndpbl8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMuYm91bmRIYW5kbGVFdmVudF8pO1xuICAgICAgaWYgKHRoaXMuY2hhbm5lbHNfKSB7XG4gICAgICAgIGZvciAoY29uc3QgayBpbiB0aGlzLmNoYW5uZWxzXykge1xuICAgICAgICAgIGNvbnN0IGNoYW5uZWxPYmogPSB0aGlzLmNoYW5uZWxzX1trXTtcbiAgICAgICAgICBpZiAoY2hhbm5lbE9iai5wb3J0MSkge1xuICAgICAgICAgICAgY2xvc2VQb3J0KGNoYW5uZWxPYmoucG9ydDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY2hhbm5lbE9iai5wb3J0Mikge1xuICAgICAgICAgICAgY2xvc2VQb3J0KGNoYW5uZWxPYmoucG9ydDIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoYW5uZWxzXyA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGUgbWVzc2VuZ2VyIGhhcyBiZWVuIGNvbm5lY3RlZCBhbHJlYWR5LlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaXNDb25uZWN0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMudGFyZ2V0T3JpZ2luXyAhPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG1lc3NhZ2luZyB0YXJnZXQuIE9ubHkgYXZhaWxhYmxlIHdoZW4gY29ubmVjdGlvbiBoYXMgYmVlblxuICAgKiBlc3RhYmxpaHNlZC5cbiAgICogQHJldHVybiB7IVdpbmRvd31cbiAgICovXG4gIGdldFRhcmdldCgpIHtcbiAgICBjb25zdCB0YXJnZXQgPSB0aGlzLmdldE9wdGlvbmFsVGFyZ2V0XygpO1xuICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vdCBjb25uZWN0ZWQnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/V2luZG93fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0T3B0aW9uYWxUYXJnZXRfKCkge1xuICAgIGlmICh0aGlzLm9uQ29tbWFuZF8gJiYgIXRoaXMudGFyZ2V0Xykge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLnRhcmdldE9yQ2FsbGJhY2tfID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy50YXJnZXRfID0gdGhpcy50YXJnZXRPckNhbGxiYWNrXygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50YXJnZXRfID0gLyoqIEB0eXBlIHshV2luZG93fSAqLyAodGhpcy50YXJnZXRPckNhbGxiYWNrXyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnRhcmdldF87XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbWVzc2FnaW5nIG9yaWdpbi4gT25seSBhdmFpbGFibGUgd2hlbiBjb25uZWN0aW9uIGhhcyBiZWVuXG4gICAqIGVzdGFibGloc2VkLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBnZXRUYXJnZXRPcmlnaW4oKSB7XG4gICAgaWYgKHRoaXMudGFyZ2V0T3JpZ2luXyA9PSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vdCBjb25uZWN0ZWQnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudGFyZ2V0T3JpZ2luXztcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgaG9zdCBzZW5kcyB0aGlzIG1lc3NhZ2UgdG8gdGhlIGNsaWVudCB0byBpbmRpY2F0ZSB0aGF0IGl0J3MgcmVhZHkgdG9cbiAgICogc3RhcnQgY29tbXVuaWNhdGluZy4gVGhlIGNsaWVudCBpcyBleHBlY3RlZCB0byByZXNwb25kIGJhY2sgd2l0aCB0aGVcbiAgICogXCJzdGFydFwiIGNvbW1hbmQuIFNlZSBgc2VuZFN0YXJ0Q29tbWFuZGAgbWV0aG9kLlxuICAgKi9cbiAgc2VuZENvbm5lY3RDb21tYW5kKCkge1xuICAgIC8vIFRPRE8oZHZveXRlbmtvKTogTWVzc2FnZUNoYW5uZWwgaXMgY3JpdGljYWxseSBuZWNlc3NhcnkgZm9yIElFL0VkZ2UsXG4gICAgLy8gc2luY2Ugd2luZG93IG1lc3NhZ2luZyBkb2Vzbid0IGFsd2F5cyB3b3JrLiBJdCdzIGFsc28gcHJlZmVycmVkIGFzIGFuIEFQSVxuICAgIC8vIGZvciBvdGhlciBicm93c2VyczogaXQncyBuZXdlciwgY2xlYW5lciBhbmQgYXJndWFibHkgbW9yZSBzZWN1cmUuXG4gICAgLy8gVW5mb3J0dW5hdGVseSwgYnJvd3NlcnMgY3VycmVudGx5IGRvIG5vdCBwcm9wYWdhdGUgdXNlciBnZXN0dXJlcyB2aWFcbiAgICAvLyBNZXNzYWdlQ2hhbm5lbCwgb25seSB2aWEgd2luZG93IG1lc3NhZ2luZy4gVGhpcyBzaG91bGQgYmUgcmUtZW5hYmxlZFxuICAgIC8vIG9uY2UgYnJvd3NlcnMgZml4IHVzZXIgZ2VzdHVyZSBwcm9wYWdhdGlvbi5cbiAgICAvLyBTZWU6XG4gICAgLy8gU2FmYXJpOiBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTg2NTkzXG4gICAgLy8gQ2hyb21lOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD04NTE0OTNcbiAgICAvLyBGaXJlZm94OiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xNDY5NDIyXG4gICAgY29uc3QgYWNjZXB0c0NoYW5uZWwgPSBpc0llQnJvd3Nlcih0aGlzLndpbl8pIHx8IGlzRWRnZUJyb3dzZXIodGhpcy53aW5fKTtcbiAgICB0aGlzLnNlbmRDb21tYW5kKCdjb25uZWN0JywgeydhY2NlcHRzQ2hhbm5lbCc6IGFjY2VwdHNDaGFubmVsfSk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGNsaWVudCBzZW5kcyB0aGlzIG1lc3NhZ2UgdG8gdGhlIGhvc3QgdXBvbiByZWNlaXZpbmcgdGhlIFwiY29ubmVjdFwiXG4gICAqIG1lc3NhZ2UgdG8gc3RhcnQgdGhlIG1haW4gY29tbXVuaWNhdGlvbiBjaGFubmVsLiBBcyBhIHBheWxvYWQsIHRoZSBtZXNzYWdlXG4gICAqIHdpbGwgY29udGFpbiB0aGUgcHJvdmlkZWQgc3RhcnQgYXJndW1lbnRzLlxuICAgKiBAcGFyYW0gez9PYmplY3R9IGFyZ3NcbiAgICovXG4gIHNlbmRTdGFydENvbW1hbmQoYXJncykge1xuICAgIGxldCBjaGFubmVsID0gbnVsbDtcbiAgICBpZiAodGhpcy5hY2NlcHRzQ2hhbm5lbF8gJiYgdHlwZW9mIHRoaXMud2luXy5NZXNzYWdlQ2hhbm5lbCA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjaGFubmVsID0gbmV3IHRoaXMud2luXy5NZXNzYWdlQ2hhbm5lbCgpO1xuICAgIH1cbiAgICBpZiAoY2hhbm5lbCkge1xuICAgICAgdGhpcy5zZW5kQ29tbWFuZCgnc3RhcnQnLCBhcmdzLCBbY2hhbm5lbC5wb3J0Ml0pO1xuICAgICAgLy8gSXQncyBjcml0aWNhbCB0byBzd2l0Y2ggdG8gcG9ydCBtZXNzYWdpbmcgb25seSBhZnRlciBcInN0YXJ0XCIgaGFzIGJlZW5cbiAgICAgIC8vIHNlbnQuIE90aGVyd2lzZSwgaXQgd29uJ3QgYmUgZGVsaXZlcmVkLlxuICAgICAgdGhpcy5zd2l0Y2hUb0NoYW5uZWxfKGNoYW5uZWwucG9ydDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNlbmRDb21tYW5kKCdzdGFydCcsIGFyZ3MpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyB0aGUgc3BlY2lmaWVkIGNvbW1hbmQgZnJvbSB0aGUgcG9ydCB0byB0aGUgaG9zdCBvciB2aWNlIHZlcnNhLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY21kXG4gICAqIEBwYXJhbSB7P09iamVjdD19IG9wdF9wYXlsb2FkXG4gICAqIEBwYXJhbSB7P0FycmF5PX0gb3B0X3RyYW5zZmVyXG4gICAqL1xuICBzZW5kQ29tbWFuZChjbWQsIG9wdF9wYXlsb2FkLCBvcHRfdHJhbnNmZXIpIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgJ3NlbnRpbmVsJzogU0VOVElORUwsXG4gICAgICAnY21kJzogY21kLFxuICAgICAgJ3BheWxvYWQnOiBvcHRfcGF5bG9hZCB8fCBudWxsLFxuICAgIH07XG4gICAgaWYgKHRoaXMucG9ydF8pIHtcbiAgICAgIHRoaXMucG9ydF8ucG9zdE1lc3NhZ2UoZGF0YSwgb3B0X3RyYW5zZmVyIHx8IHVuZGVmaW5lZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IHRoaXMuZ2V0VGFyZ2V0KCk7XG4gICAgICAvLyBPbmx5IFwiY29ubmVjdFwiIGNvbW1hbmQgaXMgYWxsb3dlZCB0byB1c2UgYHRhcmdldE9yaWdpbiA9PSAnKidgXG4gICAgICBjb25zdCB0YXJnZXRPcmlnaW4gPVxuICAgICAgICAgIGNtZCA9PSAnY29ubmVjdCcgP1xuICAgICAgICAgICh0aGlzLnRhcmdldE9yaWdpbl8gIT0gbnVsbCA/IHRoaXMudGFyZ2V0T3JpZ2luXyA6ICcqJykgOlxuICAgICAgICAgIHRoaXMuZ2V0VGFyZ2V0T3JpZ2luKCk7XG4gICAgICB0YXJnZXQucG9zdE1lc3NhZ2UoZGF0YSwgdGFyZ2V0T3JpZ2luLCBvcHRfdHJhbnNmZXIgfHwgdW5kZWZpbmVkKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2VuZHMgYSBtZXNzYWdlIHRvIHRoZSBjbGllbnQuXG4gICAqIEBwYXJhbSB7IU9iamVjdH0gcGF5bG9hZFxuICAgKi9cbiAgY3VzdG9tTWVzc2FnZShwYXlsb2FkKSB7XG4gICAgdGhpcy5zZW5kQ29tbWFuZCgnbXNnJywgcGF5bG9hZCk7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgY2FsbGJhY2sgdG8gcmVjZWl2ZSBtZXNzYWdlcyBmcm9tIHRoZSBjbGllbnQuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIU9iamVjdCl9IGNhbGxiYWNrXG4gICAqL1xuICBvbkN1c3RvbU1lc3NhZ2UoY2FsbGJhY2spIHtcbiAgICB0aGlzLm9uQ3VzdG9tTWVzc2FnZV8gPSBjYWxsYmFjaztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG9wdF9uYW1lXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFNZXNzYWdlUG9ydD59XG4gICAqL1xuICBzdGFydENoYW5uZWwob3B0X25hbWUpIHtcbiAgICBjb25zdCBuYW1lID0gb3B0X25hbWUgfHwgJyc7XG4gICAgY29uc3QgY2hhbm5lbE9iaiA9IHRoaXMuZ2V0Q2hhbm5lbE9ial8obmFtZSk7XG4gICAgaWYgKCFjaGFubmVsT2JqLnBvcnQxKSB7XG4gICAgICBjb25zdCBjaGFubmVsID0gbmV3IHRoaXMud2luXy5NZXNzYWdlQ2hhbm5lbCgpO1xuICAgICAgY2hhbm5lbE9iai5wb3J0MSA9IGNoYW5uZWwucG9ydDE7XG4gICAgICBjaGFubmVsT2JqLnBvcnQyID0gY2hhbm5lbC5wb3J0MjtcbiAgICAgIGNoYW5uZWxPYmoucmVzb2x2ZXIoY2hhbm5lbE9iai5wb3J0MSk7XG4gICAgfVxuICAgIGlmIChjaGFubmVsT2JqLnBvcnQyKSB7XG4gICAgICAvLyBOb3QgeWV0IHNlbnQuXG4gICAgICB0aGlzLnNlbmRDb21tYW5kKCdjbnNldCcsIHsnbmFtZSc6IG5hbWV9LCBbY2hhbm5lbE9iai5wb3J0Ml0pO1xuICAgICAgY2hhbm5lbE9iai5wb3J0MiA9IG51bGw7XG4gICAgfVxuICAgIHJldHVybiBjaGFubmVsT2JqLnByb21pc2U7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfbmFtZVxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhTWVzc2FnZVBvcnQ+fVxuICAgKi9cbiAgYXNrQ2hhbm5lbChvcHRfbmFtZSkge1xuICAgIGNvbnN0IG5hbWUgPSBvcHRfbmFtZSB8fCAnJztcbiAgICBjb25zdCBjaGFubmVsT2JqID0gdGhpcy5nZXRDaGFubmVsT2JqXyhuYW1lKTtcbiAgICBpZiAoIWNoYW5uZWxPYmoucG9ydDEpIHtcbiAgICAgIHRoaXMuc2VuZENvbW1hbmQoJ2NuZ2V0JywgeyduYW1lJzogbmFtZX0pO1xuICAgIH1cbiAgICByZXR1cm4gY2hhbm5lbE9iai5wcm9taXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEBwYXJhbSB7IU1lc3NhZ2VQb3J0fSBwb3J0XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICByZWNlaXZlQ2hhbm5lbF8obmFtZSwgcG9ydCkge1xuICAgIGNvbnN0IGNoYW5uZWxPYmogPSB0aGlzLmdldENoYW5uZWxPYmpfKG5hbWUpO1xuICAgIGNoYW5uZWxPYmoucG9ydDEgPSBwb3J0O1xuICAgIGNoYW5uZWxPYmoucmVzb2x2ZXIocG9ydCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICogQHJldHVybiB7IUNoYW5uZWxIb2xkZXJ9XG4gICAqL1xuICBnZXRDaGFubmVsT2JqXyhuYW1lKSB7XG4gICAgaWYgKCF0aGlzLmNoYW5uZWxzXykge1xuICAgICAgdGhpcy5jaGFubmVsc18gPSB7fTtcbiAgICB9XG4gICAgbGV0IGNoYW5uZWxPYmogPSB0aGlzLmNoYW5uZWxzX1tuYW1lXTtcbiAgICBpZiAoIWNoYW5uZWxPYmopIHtcbiAgICAgIGxldCByZXNvbHZlcjtcbiAgICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgcmVzb2x2ZXIgPSByZXNvbHZlO1xuICAgICAgfSk7XG4gICAgICBjaGFubmVsT2JqID0ge1xuICAgICAgICBwb3J0MTogbnVsbCxcbiAgICAgICAgcG9ydDI6IG51bGwsXG4gICAgICAgIHJlc29sdmVyLFxuICAgICAgICBwcm9taXNlLFxuICAgICAgfTtcbiAgICAgIHRoaXMuY2hhbm5lbHNfW25hbWVdID0gY2hhbm5lbE9iajtcbiAgICB9XG4gICAgcmV0dXJuIGNoYW5uZWxPYmo7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshTWVzc2FnZVBvcnR9IHBvcnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN3aXRjaFRvQ2hhbm5lbF8ocG9ydCkge1xuICAgIGlmICh0aGlzLnBvcnRfKSB7XG4gICAgICBjbG9zZVBvcnQodGhpcy5wb3J0Xyk7XG4gICAgfVxuICAgIHRoaXMucG9ydF8gPSBwb3J0O1xuICAgIHRoaXMucG9ydF8ub25tZXNzYWdlID0gZXZlbnQgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IGV2ZW50LmRhdGE7XG4gICAgICBjb25zdCBjbWQgPSBkYXRhICYmIGRhdGFbJ2NtZCddO1xuICAgICAgY29uc3QgcGF5bG9hZCA9IGRhdGEgJiYgZGF0YVsncGF5bG9hZCddIHx8IG51bGw7XG4gICAgICBpZiAoY21kKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlQ29tbWFuZF8oY21kLCBwYXlsb2FkLCBldmVudCk7XG4gICAgICB9XG4gICAgfTtcbiAgICAvLyBFdmVuIHRob3VnaCBhbGwgbWVzc2FnaW5nIHdpbGwgc3dpdGNoIHRvIHBvcnRzLCB0aGUgd2luZG93LWJhc2VkIG1lc3NhZ2VcbiAgICAvLyBsaXN0ZW5lciB3aWxsIGJlIHByZXNlcnZlZCBqdXN0IGluIGNhc2UgdGhlIGhvc3QgaXMgcmVmcmVzaGVkIGFuZCBuZWVkc1xuICAgIC8vIGFub3RoZXIgY29ubmVjdGlvbi5cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFNZXNzYWdlRXZlbnR9IGV2ZW50XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVFdmVudF8oZXZlbnQpIHtcbiAgICBjb25zdCBkYXRhID0gZXZlbnQuZGF0YTtcbiAgICBpZiAoIWRhdGEgfHwgZGF0YVsnc2VudGluZWwnXSAhPSBTRU5USU5FTCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjbWQgPSBkYXRhWydjbWQnXTtcbiAgICBpZiAodGhpcy5wb3J0XyAmJiBjbWQgIT0gJ2Nvbm5lY3QnICYmIGNtZCAhPSAnc3RhcnQnKSB7XG4gICAgICAvLyBNZXNzYWdpbmcgY2hhbm5lbCBoYXMgYWxyZWFkeSB0YWtlbiBvdmVyLiBIb3dldmVyLCB0aGUgXCJjb25uZWN0XCIgYW5kXG4gICAgICAvLyBcInN0YXJ0XCIgY29tbWFuZHMgYXJlIGFsbG93ZWQgdG8gcHJvY2VlZCBpbiBjYXNlIHJlLWNvbm5lY3Rpb24gaXNcbiAgICAgIC8vIHJlcXVlc3RlZC5cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgb3JpZ2luID0gLyoqIEB0eXBlIHtzdHJpbmd9ICovIChldmVudC5vcmlnaW4pO1xuICAgIGNvbnN0IHBheWxvYWQgPSBkYXRhWydwYXlsb2FkJ10gfHwgbnVsbDtcbiAgICBpZiAodGhpcy50YXJnZXRPcmlnaW5fID09IG51bGwgJiYgY21kID09ICdzdGFydCcpIHtcbiAgICAgIHRoaXMudGFyZ2V0T3JpZ2luXyA9IG9yaWdpbjtcbiAgICB9XG4gICAgaWYgKHRoaXMudGFyZ2V0T3JpZ2luXyA9PSBudWxsICYmIGV2ZW50LnNvdXJjZSkge1xuICAgICAgaWYgKHRoaXMuZ2V0T3B0aW9uYWxUYXJnZXRfKCkgPT0gZXZlbnQuc291cmNlKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0T3JpZ2luXyA9IG9yaWdpbjtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gTm90aWNlIHRoYXQgZXZlbnQuc291cmNlIG1heSBkaWZmZXIgZnJvbSB0aGUgdGFyZ2V0IGJlY2F1c2Ugb2ZcbiAgICAvLyBmcmllbmRseS1pZnJhbWUgaW50ZXJtZWRpYXJpZXMuXG4gICAgaWYgKG9yaWdpbiAhPSB0aGlzLnRhcmdldE9yaWdpbl8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5oYW5kbGVDb21tYW5kXyhjbWQsIHBheWxvYWQsIGV2ZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY21kXG4gICAqIEBwYXJhbSB7P09iamVjdH0gcGF5bG9hZFxuICAgKiBAcGFyYW0geyFNZXNzYWdlRXZlbnR9IGV2ZW50XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVDb21tYW5kXyhjbWQsIHBheWxvYWQsIGV2ZW50KSB7XG4gICAgaWYgKGNtZCA9PSAnY29ubmVjdCcpIHtcbiAgICAgIGlmICh0aGlzLnBvcnRfKSB7XG4gICAgICAgIC8vIEluIGNhc2UgdGhlIHBvcnQgaGFzIGFscmVhZHkgYmVlbiBvcGVuIC0gY2xvc2UgaXQgdG8gcmVvcGVuIGl0XG4gICAgICAgIC8vIGFnYWluIGxhdGVyLlxuICAgICAgICBjbG9zZVBvcnQodGhpcy5wb3J0Xyk7XG4gICAgICAgIHRoaXMucG9ydF8gPSBudWxsO1xuICAgICAgfVxuICAgICAgdGhpcy5hY2NlcHRzQ2hhbm5lbF8gPSBwYXlsb2FkICYmIHBheWxvYWRbJ2FjY2VwdHNDaGFubmVsJ10gfHwgZmFsc2U7XG4gICAgICB0aGlzLm9uQ29tbWFuZF8oY21kLCBwYXlsb2FkKTtcbiAgICB9IGVsc2UgaWYgKGNtZCA9PSAnc3RhcnQnKSB7XG4gICAgICBjb25zdCBwb3J0ID0gZXZlbnQucG9ydHMgJiYgZXZlbnQucG9ydHNbMF07XG4gICAgICBpZiAocG9ydCkge1xuICAgICAgICB0aGlzLnN3aXRjaFRvQ2hhbm5lbF8ocG9ydCk7XG4gICAgICB9XG4gICAgICB0aGlzLm9uQ29tbWFuZF8oY21kLCBwYXlsb2FkKTtcbiAgICB9IGVsc2UgaWYgKGNtZCA9PSAnbXNnJykge1xuICAgICAgaWYgKHRoaXMub25DdXN0b21NZXNzYWdlXyAhPSBudWxsICYmIHBheWxvYWQgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLm9uQ3VzdG9tTWVzc2FnZV8ocGF5bG9hZCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjbWQgPT0gJ2NuZ2V0Jykge1xuICAgICAgY29uc3QgbmFtZSA9IHBheWxvYWRbJ25hbWUnXTtcbiAgICAgIHRoaXMuc3RhcnRDaGFubmVsKG5hbWUpO1xuICAgIH0gZWxzZSBpZiAoY21kID09ICdjbnNldCcpIHtcbiAgICAgIGNvbnN0IG5hbWUgPSBwYXlsb2FkWyduYW1lJ107XG4gICAgICBjb25zdCBwb3J0ID0gZXZlbnQucG9ydHNbMF07XG4gICAgICB0aGlzLnJlY2VpdmVDaGFubmVsXyhuYW1lLCAvKiogQHR5cGUgeyFNZXNzYWdlUG9ydH0gKi8gKHBvcnQpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vbkNvbW1hbmRfKGNtZCwgcGF5bG9hZCk7XG4gICAgfVxuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0geyFNZXNzYWdlUG9ydH0gcG9ydFxuICovXG5mdW5jdGlvbiBjbG9zZVBvcnQocG9ydCkge1xuICB0cnkge1xuICAgIHBvcnQuY2xvc2UoKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIElnbm9yZS5cbiAgfVxufVxuXG5cblxuXG4vKipcbiAqIFRoZSBgQWN0aXZpdHlQb3J0YCBpbXBsZW1lbnRhdGlvbiBmb3IgdGhlIGlmcmFtZSBjYXNlLiBVbmxpa2Ugb3RoZXIgdHlwZXNcbiAqIG9mIGFjdGl2aXRpZXMsIGlmcmFtZS1iYXNlZCBhY3Rpdml0aWVzIGFyZSBhbHdheXMgY29ubmVjdGVkIGFuZCBjYW4gcmVhY3RcbiAqIHRvIHNpemUgcmVxdWVzdHMuXG4gKlxuICogQGltcGxlbWVudHMge0FjdGl2aXR5UG9ydH1cbiAqL1xuY2xhc3MgQWN0aXZpdHlJZnJhbWVQb3J0IHtcblxuICAvKipcbiAgICogQHBhcmFtIHshSFRNTElGcmFtZUVsZW1lbnR9IGlmcmFtZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gICAqIEBwYXJhbSB7P09iamVjdD19IG9wdF9hcmdzXG4gICAqL1xuICBjb25zdHJ1Y3RvcihpZnJhbWUsIHVybCwgb3B0X2FyZ3MpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshSFRNTElGcmFtZUVsZW1lbnR9ICovXG4gICAgdGhpcy5pZnJhbWVfID0gaWZyYW1lO1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnVybF8gPSB1cmw7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7P09iamVjdH0gKi9cbiAgICB0aGlzLmFyZ3NfID0gb3B0X2FyZ3MgfHwgbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFXaW5kb3d9ICovXG4gICAgdGhpcy53aW5fID0gLyoqIEB0eXBlIHshV2luZG93fSAqLyAodGhpcy5pZnJhbWVfLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMudGFyZ2V0T3JpZ2luXyA9IGdldE9yaWdpbkZyb21VcmwodXJsKTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLmNvbm5lY3RlZF8gPSBmYWxzZTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P2Z1bmN0aW9uKCl9ICovXG4gICAgdGhpcy5jb25uZWN0ZWRSZXNvbHZlcl8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVByb21pc2V9ICovXG4gICAgdGhpcy5jb25uZWN0ZWRQcm9taXNlXyA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgdGhpcy5jb25uZWN0ZWRSZXNvbHZlcl8gPSByZXNvbHZlO1xuICAgIH0pO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/ZnVuY3Rpb24oKX0gKi9cbiAgICB0aGlzLnJlYWR5UmVzb2x2ZXJfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFQcm9taXNlfSAqL1xuICAgIHRoaXMucmVhZHlQcm9taXNlXyA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgdGhpcy5yZWFkeVJlc29sdmVyXyA9IHJlc29sdmU7XG4gICAgfSk7XG5cbiAgICAvKiogQHByaXZhdGUgez9mdW5jdGlvbigoIUFjdGl2aXR5UmVzdWx0fCFQcm9taXNlKSl9ICovXG4gICAgdGhpcy5yZXN1bHRSZXNvbHZlcl8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVByb21pc2U8IUFjdGl2aXR5UmVzdWx0Pn0gKi9cbiAgICB0aGlzLnJlc3VsdFByb21pc2VfID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICB0aGlzLnJlc3VsdFJlc29sdmVyXyA9IHJlc29sdmU7XG4gICAgfSk7XG5cbiAgICAvKiogQHByaXZhdGUgez9mdW5jdGlvbihudW1iZXIpfSAqL1xuICAgIHRoaXMub25SZXNpemVSZXF1ZXN0XyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9udW1iZXJ9ICovXG4gICAgdGhpcy5yZXF1ZXN0ZWRIZWlnaHRfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFNZXNzZW5nZXJ9ICovXG4gICAgdGhpcy5tZXNzZW5nZXJfID0gbmV3IE1lc3NlbmdlcihcbiAgICAgICAgdGhpcy53aW5fLFxuICAgICAgICAoKSA9PiB0aGlzLmlmcmFtZV8uY29udGVudFdpbmRvdyxcbiAgICAgICAgdGhpcy50YXJnZXRPcmlnaW5fKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0TW9kZSgpIHtcbiAgICByZXR1cm4gQWN0aXZpdHlNb2RlLklGUkFNRTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXYWl0cyB1bnRpbCB0aGUgYWN0aXZpdHkgcG9ydCBpcyBjb25uZWN0ZWQgdG8gdGhlIGhvc3QuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgY29ubmVjdCgpIHtcbiAgICBpZiAoIXRoaXMud2luXy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY29udGFpbnModGhpcy5pZnJhbWVfKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdpZnJhbWUgbXVzdCBiZSBpbiBET00nKTtcbiAgICB9XG4gICAgdGhpcy5tZXNzZW5nZXJfLmNvbm5lY3QodGhpcy5oYW5kbGVDb21tYW5kXy5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLmlmcmFtZV8uc3JjID0gdGhpcy51cmxfO1xuICAgIHJldHVybiB0aGlzLmNvbm5lY3RlZFByb21pc2VfO1xuICB9XG5cbiAgLyoqXG4gICAqIERpc2Nvbm5lY3QgdGhlIGFjdGl2aXR5IGJpbmRpbmcgYW5kIGNsZWFudXAgbGlzdGVuZXJzLlxuICAgKi9cbiAgZGlzY29ubmVjdCgpIHtcbiAgICB0aGlzLmNvbm5lY3RlZF8gPSBmYWxzZTtcbiAgICB0aGlzLm1lc3Nlbmdlcl8uZGlzY29ubmVjdCgpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhY2NlcHRSZXN1bHQoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVzdWx0UHJvbWlzZV87XG4gIH1cblxuICAvKipcbiAgICogU2VuZHMgYSBtZXNzYWdlIHRvIHRoZSBob3N0LlxuICAgKiBAcGFyYW0geyFPYmplY3R9IHBheWxvYWRcbiAgICovXG4gIG1lc3NhZ2UocGF5bG9hZCkge1xuICAgIHRoaXMubWVzc2VuZ2VyXy5jdXN0b21NZXNzYWdlKHBheWxvYWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIGNhbGxiYWNrIHRvIHJlY2VpdmUgbWVzc2FnZXMgZnJvbSB0aGUgaG9zdC5cbiAgICogQHBhcmFtIHtmdW5jdGlvbighT2JqZWN0KX0gY2FsbGJhY2tcbiAgICovXG4gIG9uTWVzc2FnZShjYWxsYmFjaykge1xuICAgIHRoaXMubWVzc2VuZ2VyXy5vbkN1c3RvbU1lc3NhZ2UoY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgY29tbXVuaWNhdGlvbiBjaGFubmVsIG9yIHJldHVybnMgYW4gZXhpc3Rpbmcgb25lLlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG9wdF9uYW1lXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFNZXNzYWdlUG9ydD59XG4gICAqL1xuICBtZXNzYWdlQ2hhbm5lbChvcHRfbmFtZSkge1xuICAgIHJldHVybiB0aGlzLm1lc3Nlbmdlcl8uYXNrQ2hhbm5lbChvcHRfbmFtZSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHByb21pc2UgdGhhdCB5aWVsZHMgd2hlbiB0aGUgaWZyYW1lIGlzIHJlYWR5IHRvIGJlIGludGVyYWN0ZWRcbiAgICogd2l0aC5cbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICB3aGVuUmVhZHkoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVhZHlQcm9taXNlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBhIGNhbGxiYWNrIHRvIGhhbmRsZSByZXNpemUgcmVxdWVzdHMuIE9uY2Ugc3VjY2Vzc2Z1bGx5IHJlc2l6ZWQsXG4gICAqIGVuc3VyZSB0byBjYWxsIGByZXNpemVkKClgIG1ldGhvZC5cbiAgICogQHBhcmFtIHtmdW5jdGlvbihudW1iZXIpfSBjYWxsYmFja1xuICAgKi9cbiAgb25SZXNpemVSZXF1ZXN0KGNhbGxiYWNrKSB7XG4gICAgdGhpcy5vblJlc2l6ZVJlcXVlc3RfID0gY2FsbGJhY2s7XG4gICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB7XG4gICAgICBpZiAodGhpcy5yZXF1ZXN0ZWRIZWlnaHRfICE9IG51bGwpIHtcbiAgICAgICAgY2FsbGJhY2sodGhpcy5yZXF1ZXN0ZWRIZWlnaHRfKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaWduYWxzIGJhY2sgdG8gdGhlIGFjdGl2aXR5IGltcGxlbWVudGF0aW9uIHRoYXQgdGhlIGNsaWVudCBoYXMgdXBkYXRlZFxuICAgKiB0aGUgYWN0aXZpdHkncyBzaXplLlxuICAgKi9cbiAgcmVzaXplZCgpIHtcbiAgICBpZiAoIXRoaXMuY29ubmVjdGVkXykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBoZWlnaHQgPSB0aGlzLmlmcmFtZV8ub2Zmc2V0SGVpZ2h0O1xuICAgIHRoaXMubWVzc2VuZ2VyXy5zZW5kQ29tbWFuZCgncmVzaXplZCcsIHsnaGVpZ2h0JzogaGVpZ2h0fSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNtZFxuICAgKiBAcGFyYW0gez9PYmplY3R9IHBheWxvYWRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhbmRsZUNvbW1hbmRfKGNtZCwgcGF5bG9hZCkge1xuICAgIGlmIChjbWQgPT0gJ2Nvbm5lY3QnKSB7XG4gICAgICAvLyBGaXJzdCBldmVyIG1lc3NhZ2UuIEluZGljYXRlcyB0aGF0IHRoZSByZWNlaXZlciBpcyBsaXN0ZW5pbmcuXG4gICAgICB0aGlzLmNvbm5lY3RlZF8gPSB0cnVlO1xuICAgICAgdGhpcy5tZXNzZW5nZXJfLnNlbmRTdGFydENvbW1hbmQodGhpcy5hcmdzXyk7XG4gICAgICB0aGlzLmNvbm5lY3RlZFJlc29sdmVyXygpO1xuICAgIH0gZWxzZSBpZiAoY21kID09ICdyZXN1bHQnKSB7XG4gICAgICAvLyBUaGUgbGFzdCBtZXNzYWdlLiBJbmRpY2F0ZXMgdGhhdCB0aGUgcmVzdWx0IGhhcyBiZWVuIHJlY2VpdmVkLlxuICAgICAgaWYgKHRoaXMucmVzdWx0UmVzb2x2ZXJfKSB7XG4gICAgICAgIGNvbnN0IGNvZGUgPSAvKiogQHR5cGUgeyFBY3Rpdml0eVJlc3VsdENvZGV9ICovIChwYXlsb2FkWydjb2RlJ10pO1xuICAgICAgICBjb25zdCBkYXRhID1cbiAgICAgICAgICAgIGNvZGUgPT0gQWN0aXZpdHlSZXN1bHRDb2RlLkZBSUxFRCA/XG4gICAgICAgICAgICBuZXcgRXJyb3IocGF5bG9hZFsnZGF0YSddIHx8ICcnKSA6XG4gICAgICAgICAgICBwYXlsb2FkWydkYXRhJ107XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBBY3Rpdml0eVJlc3VsdChcbiAgICAgICAgICAgIGNvZGUsXG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgQWN0aXZpdHlNb2RlLklGUkFNRSxcbiAgICAgICAgICAgIHRoaXMubWVzc2VuZ2VyXy5nZXRUYXJnZXRPcmlnaW4oKSxcbiAgICAgICAgICAgIC8qIG9yaWdpblZlcmlmaWVkICovIHRydWUsXG4gICAgICAgICAgICAvKiBzZWN1cmVDaGFubmVsICovIHRydWUpO1xuICAgICAgICByZXNvbHZlUmVzdWx0KHRoaXMud2luXywgcmVzdWx0LCB0aGlzLnJlc3VsdFJlc29sdmVyXyk7XG4gICAgICAgIHRoaXMucmVzdWx0UmVzb2x2ZXJfID0gbnVsbDtcbiAgICAgICAgdGhpcy5tZXNzZW5nZXJfLnNlbmRDb21tYW5kKCdjbG9zZScpO1xuICAgICAgICB0aGlzLmRpc2Nvbm5lY3QoKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNtZCA9PSAncmVhZHknKSB7XG4gICAgICBpZiAodGhpcy5yZWFkeVJlc29sdmVyXykge1xuICAgICAgICB0aGlzLnJlYWR5UmVzb2x2ZXJfKCk7XG4gICAgICAgIHRoaXMucmVhZHlSZXNvbHZlcl8gPSBudWxsO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoY21kID09ICdyZXNpemUnKSB7XG4gICAgICB0aGlzLnJlcXVlc3RlZEhlaWdodF8gPSAvKiogQHR5cGUge251bWJlcn0gKi8gKHBheWxvYWRbJ2hlaWdodCddKTtcbiAgICAgIGlmICh0aGlzLm9uUmVzaXplUmVxdWVzdF8pIHtcbiAgICAgICAgdGhpcy5vblJlc2l6ZVJlcXVlc3RfKHRoaXMucmVxdWVzdGVkSGVpZ2h0Xyk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cblxuXG5cbi8qKlxuICogVGhlIGBBY3Rpdml0eVBvcnRgIGltcGxlbWVudGF0aW9uIGZvciB0aGUgc3RhbmRhbG9uZSB3aW5kb3cgYWN0aXZpdHlcbiAqIGNsaWVudCBleGVjdXRlZCBhcyBhIHBvcHVwLlxuICpcbiAqIEBpbXBsZW1lbnRzIHtBY3Rpdml0eVBvcnR9XG4gKi9cbmNsYXNzIEFjdGl2aXR5V2luZG93UG9ydCB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0SWRcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGFyZ2V0XG4gICAqIEBwYXJhbSB7P09iamVjdD19IG9wdF9hcmdzXG4gICAqIEBwYXJhbSB7P0FjdGl2aXR5T3Blbk9wdGlvbnM9fSBvcHRfb3B0aW9uc1xuICAgKi9cbiAgY29uc3RydWN0b3Iod2luLCByZXF1ZXN0SWQsIHVybCwgdGFyZ2V0LCBvcHRfYXJncywgb3B0X29wdGlvbnMpIHtcbiAgICBjb25zdCBpc1ZhbGlkVGFyZ2V0ID1cbiAgICAgICAgdGFyZ2V0ICYmXG4gICAgICAgICh0YXJnZXQgPT0gJ19ibGFuaycgfHwgdGFyZ2V0ID09ICdfdG9wJyB8fCB0YXJnZXRbMF0gIT0gJ18nKTtcbiAgICBpZiAoIWlzVmFsaWRUYXJnZXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIG9ubHkgYWxsb3dlZCB0YXJnZXRzIGFyZSBcIl9ibGFua1wiLCBcIl90b3BcIicgK1xuICAgICAgICAgICcgYW5kIG5hbWUgdGFyZ2V0cycpO1xuICAgIH1cblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFXaW5kb3d9ICovXG4gICAgdGhpcy53aW5fID0gd2luO1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnJlcXVlc3RJZF8gPSByZXF1ZXN0SWQ7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMudXJsXyA9IHVybDtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5vcGVuVGFyZ2V0XyA9IHRhcmdldDtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHs/T2JqZWN0fSAqL1xuICAgIHRoaXMuYXJnc18gPSBvcHRfYXJncyB8fCBudWxsO1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qgez9BY3Rpdml0eU9wZW5PcHRpb25zfSAqL1xuICAgIHRoaXMub3B0aW9uc18gPSBvcHRfb3B0aW9ucyB8fCBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/ZnVuY3Rpb24oKCFBY3Rpdml0eVJlc3VsdHwhUHJvbWlzZSkpfSAqL1xuICAgIHRoaXMucmVzdWx0UmVzb2x2ZXJfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFQcm9taXNlPCFBY3Rpdml0eVJlc3VsdD59ICovXG4gICAgdGhpcy5yZXN1bHRQcm9taXNlXyA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgdGhpcy5yZXN1bHRSZXNvbHZlcl8gPSByZXNvbHZlO1xuICAgIH0pO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/V2luZG93fSAqL1xuICAgIHRoaXMudGFyZ2V0V2luXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9udW1iZXJ9ICovXG4gICAgdGhpcy5oZWFydGJlYXRJbnRlcnZhbF8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/TWVzc2VuZ2VyfSAqL1xuICAgIHRoaXMubWVzc2VuZ2VyXyA9IG51bGw7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldE1vZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMub3BlblRhcmdldF8gPT0gJ190b3AnID9cbiAgICAgICAgQWN0aXZpdHlNb2RlLlJFRElSRUNUIDpcbiAgICAgICAgQWN0aXZpdHlNb2RlLlBPUFVQO1xuICB9XG5cbiAgLyoqXG4gICAqIE9wZW5zIHRoZSBhY3Rpdml0eSBpbiBhIHdpbmRvdywgZWl0aGVyIGFzIGEgcG9wdXAgb3IgdmlhIHJlZGlyZWN0LlxuICAgKlxuICAgKiBSZXR1cm5zIHRoZSBwcm9taXNlIHRoYXQgd2lsbCB5aWVsZCB3aGVuIHRoZSB3aW5kb3cgcmV0dXJucyBvciBjbG9zZWQuXG4gICAqIE5vdGljZSwgdGhhdCB0aGlzIHByb21pc2UgbWF5IG5ldmVyIGNvbXBsZXRlIGlmIFwicmVkaXJlY3RcIiBtb2RlIHdhcyB1c2VkLlxuICAgKlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIG9wZW4oKSB7XG4gICAgcmV0dXJuIHRoaXMub3BlbkludGVybmFsXygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9XaW5kb3d9XG4gICAqL1xuICBnZXRUYXJnZXRXaW4oKSB7XG4gICAgcmV0dXJuIHRoaXMudGFyZ2V0V2luXztcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNjb25uZWN0IHRoZSBhY3Rpdml0eSBiaW5kaW5nIGFuZCBjbGVhbnVwIGxpc3RlbmVycy5cbiAgICovXG4gIGRpc2Nvbm5lY3QoKSB7XG4gICAgaWYgKHRoaXMuaGVhcnRiZWF0SW50ZXJ2YWxfKSB7XG4gICAgICB0aGlzLndpbl8uY2xlYXJJbnRlcnZhbCh0aGlzLmhlYXJ0YmVhdEludGVydmFsXyk7XG4gICAgICB0aGlzLmhlYXJ0YmVhdEludGVydmFsXyA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLm1lc3Nlbmdlcl8pIHtcbiAgICAgIHRoaXMubWVzc2VuZ2VyXy5kaXNjb25uZWN0KCk7XG4gICAgICB0aGlzLm1lc3Nlbmdlcl8gPSBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy50YXJnZXRXaW5fKSB7XG4gICAgICAvLyBUcnkgdG8gY2xvc2UgdGhlIHBvcHVwIHdpbmRvdy4gVGhlIGhvc3Qgd2lsbCBhbHNvIHRyeSB0byBkbyB0aGUgc2FtZS5cbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMudGFyZ2V0V2luXy5jbG9zZSgpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBJZ25vcmUuXG4gICAgICB9XG4gICAgICB0aGlzLnRhcmdldFdpbl8gPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLnJlc3VsdFJlc29sdmVyXyA9IG51bGw7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFjY2VwdFJlc3VsdCgpIHtcbiAgICByZXR1cm4gdGhpcy5yZXN1bHRQcm9taXNlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCB3cmFwcyBhcm91bmQgd2luZG93J3Mgb3BlbiBtZXRob2QuIEl0IGZpcnN0IHRyaWVzIHRvIGV4ZWN1dGVcbiAgICogYG9wZW5gIGNhbGwgd2l0aCB0aGUgcHJvdmlkZWQgdGFyZ2V0IGFuZCBpZiBpdCBmYWlscywgaXQgcmV0cmllcyB0aGUgY2FsbFxuICAgKiB3aXRoIHRoZSBgX3RvcGAgdGFyZ2V0LiBUaGlzIGlzIG5lY2Vzc2FyeSBnaXZlbiB0aGF0IGluIHNvbWUgZW1iZWRkaW5nXG4gICAqIHNjZW5hcmlvcywgc3VjaCBhcyBpT1MnIFdLV2ViVmlldywgbmF2aWdhdGlvbiB0byBgX2JsYW5rYCBhbmQgb3RoZXIgdGFyZ2V0c1xuICAgKiBpcyBibG9ja2VkIGJ5IGRlZmF1bHQuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgb3BlbkludGVybmFsXygpIHtcbiAgICBjb25zdCBmZWF0dXJlc1N0ciA9IHRoaXMuYnVpbGRGZWF0dXJlc18oKTtcblxuICAgIC8vIFByb3RlY3RpdmVseSwgdGhlIFVSTCB3aWxsIGNvbnRhaW4gdGhlIHJlcXVlc3QgcGF5bG9hZCwgdW5sZXNzIGV4cGxpY2l0bHlcbiAgICAvLyBkaXJlY3RlZCBub3QgdG8gdmlhIGBza2lwUmVxdWVzdEluVXJsYCBvcHRpb24uXG4gICAgbGV0IHVybCA9IHRoaXMudXJsXztcbiAgICBpZiAoISh0aGlzLm9wdGlvbnNfICYmIHRoaXMub3B0aW9uc18uc2tpcFJlcXVlc3RJblVybCkpIHtcbiAgICAgIGNvbnN0IHJldHVyblVybCA9XG4gICAgICAgICAgdGhpcy5vcHRpb25zXyAmJiB0aGlzLm9wdGlvbnNfLnJldHVyblVybCB8fFxuICAgICAgICAgIHJlbW92ZUZyYWdtZW50KHRoaXMud2luXy5sb2NhdGlvbi5ocmVmKTtcbiAgICAgIGNvbnN0IHJlcXVlc3RTdHJpbmcgPSBzZXJpYWxpemVSZXF1ZXN0KHtcbiAgICAgICAgcmVxdWVzdElkOiB0aGlzLnJlcXVlc3RJZF8sXG4gICAgICAgIHJldHVyblVybCxcbiAgICAgICAgYXJnczogdGhpcy5hcmdzXyxcbiAgICAgIH0pO1xuICAgICAgdXJsID0gYWRkRnJhZ21lbnRQYXJhbSh1cmwsICdfX1dBX18nLCByZXF1ZXN0U3RyaW5nKTtcbiAgICB9XG5cbiAgICAvLyBPcGVuIHRoZSB3aW5kb3cuXG4gICAgbGV0IHRhcmdldFdpbjtcbiAgICBsZXQgb3BlblRhcmdldCA9IHRoaXMub3BlblRhcmdldF87XG4gICAgLy8gSUUgZG9lcyBub3Qgc3VwcG9ydCBDT1JTIHBvcHVwcyAtIHRoZSBwb3B1cCBoYXMgdG8gZmFsbGJhY2sgdG8gcmVkaXJlY3RcbiAgICAvLyBtb2RlLlxuICAgIGlmIChvcGVuVGFyZ2V0ICE9ICdfdG9wJykge1xuICAgICAgaWYgKGlzSWVCcm93c2VyKHRoaXMud2luXykpIHtcbiAgICAgICAgb3BlblRhcmdldCA9ICdfdG9wJztcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gVHJ5IGZpcnN0IHdpdGggdGhlIHNwZWNpZmllZCB0YXJnZXQuIElmIHdlJ3JlIGluc2lkZSB0aGUgV0tXZWJWaWV3IG9yXG4gICAgLy8gYSBzaW1pbGFyIGVudmlyb25tZW50cywgdGhpcyBtZXRob2QgaXMgZXhwZWN0ZWQgdG8gZmFpbCBieSBkZWZhdWx0IGZvclxuICAgIC8vIGFsbCB0YXJnZXRzIGV4Y2VwdCBgX3RvcGAuXG4gICAgdHJ5IHtcbiAgICAgIHRhcmdldFdpbiA9IHRoaXMud2luXy5vcGVuKHVybCwgb3BlblRhcmdldCwgZmVhdHVyZXNTdHIpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIElnbm9yZS5cbiAgICB9XG4gICAgLy8gVGhlbiB0cnkgd2l0aCBgX3RvcGAgdGFyZ2V0LlxuICAgIGlmICghdGFyZ2V0V2luICYmIG9wZW5UYXJnZXQgIT0gJ190b3AnKSB7XG4gICAgICBvcGVuVGFyZ2V0ID0gJ190b3AnO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGFyZ2V0V2luID0gdGhpcy53aW5fLm9wZW4odXJsLCBvcGVuVGFyZ2V0KTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gSWdub3JlLlxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNldHVwIHRoZSB0YXJnZXQgd2luZG93LlxuICAgIGlmICh0YXJnZXRXaW4pIHtcbiAgICAgIHRoaXMudGFyZ2V0V2luXyA9IHRhcmdldFdpbjtcbiAgICAgIGlmIChvcGVuVGFyZ2V0ICE9ICdfdG9wJykge1xuICAgICAgICB0aGlzLnNldHVwUG9wdXBfKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGlzY29ubmVjdFdpdGhFcnJvcl8obmV3IEVycm9yKCdmYWlsZWQgdG8gb3BlbiB3aW5kb3cnKSk7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHJlc3VsdCBwcm9taXNlLCBldmVuIHRob3VnaCBpdCBtYXkgbmV2ZXIgY29tcGxldGUuXG4gICAgcmV0dXJuIHRoaXMucmVzdWx0UHJvbWlzZV8uY2F0Y2goKCkgPT4ge1xuICAgICAgLy8gSWdub3JlLiBDYWxsIHRvIHRoZSBgYWNjZXB0UmVzdWx0KClgIHNob3VsZCBmYWlsIGlmIG5lZWRlZC5cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBidWlsZEZlYXR1cmVzXygpIHtcbiAgICAvLyBUaGUgbWF4IHdpZHRoIGFuZCBoZWlnaHRzIGFyZSBjYWxjdWxhdGVkIGFzIGZvbGxvd2luZzpcbiAgICAvLyBNYXhTaXplID0gQXZhaWxTaXplIC0gQ29udHJvbHNTaXplXG4gICAgLy8gQ29udHJvbHNTaXplID0gT3V0ZXJTaXplIC0gSW5uZXJTaXplXG4gICAgY29uc3Qgc2NyZWVuID0gdGhpcy53aW5fLnNjcmVlbjtcbiAgICBjb25zdCBhdmFpbFdpZHRoID0gc2NyZWVuLmF2YWlsV2lkdGggfHwgc2NyZWVuLndpZHRoO1xuICAgIGNvbnN0IGF2YWlsSGVpZ2h0ID0gc2NyZWVuLmF2YWlsSGVpZ2h0IHx8IHNjcmVlbi5oZWlnaHQ7XG4gICAgY29uc3QgaXNUb3AgPSB0aGlzLmlzVG9wV2luZG93XygpO1xuICAgIGNvbnN0IGlzRWRnZSA9IGlzRWRnZUJyb3dzZXIodGhpcy53aW5fKTtcbiAgICAvLyBMaW1pdCBjb250cm9scyB0byAxMDBweCB3aWR0aCBhbmQgaGVpZ2h0LiBOb3RpY2UgdGhhdCBpdCdzIG9ubHlcbiAgICAvLyBwb3NzaWJsZSB0byBjYWxjdWxhdGUgY29udHJvbHMgc2l6ZSBpbiB0aGUgdG9wIHdpbmRvdywgbm90IGluIGlmcmFtZXMuXG4gICAgLy8gTm90aWNlIHRoYXQgdGhlIEVkZ2UgYmVoYXZpb3IgaXMgc29tZXdoYXQgdW5pcXVlLiBJZiB3ZSBjYW4ndCBmaW5kIHRoZVxuICAgIC8vIHJpZ2h0IHdpZHRoL2hlaWdodCwgaXQgd2lsbCBsYXVuY2ggaW4gdGhlIGZ1bGwtc2NyZWVuLiBPdGhlciBicm93c2Vyc1xuICAgIC8vIGRlYWwgd2l0aCBzdWNoIGNhc2VzIG1vcmUgZ3JhY2VmdWxseS5cbiAgICBjb25zdCBjb250cm9sc1dpZHRoID1cbiAgICAgICAgaXNUb3AgJiYgdGhpcy53aW5fLm91dGVyV2lkdGggPiB0aGlzLndpbl8uaW5uZXJXaWR0aCA/XG4gICAgICAgIE1hdGgubWluKDEwMCwgdGhpcy53aW5fLm91dGVyV2lkdGggLSB0aGlzLndpbl8uaW5uZXJXaWR0aCkgOlxuICAgICAgICAoaXNFZGdlID8gMTAwIDogMCk7XG4gICAgY29uc3QgY29udHJvbHNIZWlnaHQgPVxuICAgICAgICBpc1RvcCAmJiB0aGlzLndpbl8ub3V0ZXJIZWlnaHQgPiB0aGlzLndpbl8uaW5uZXJIZWlnaHQgP1xuICAgICAgICBNYXRoLm1pbigxMDAsIHRoaXMud2luXy5vdXRlckhlaWdodCAtIHRoaXMud2luXy5pbm5lckhlaWdodCkgOlxuICAgICAgICAoaXNFZGdlID8gMTAwIDogMCk7XG4gICAgLy8gV2l0aCBhbGwgdGhlIGFkanVzdG1lbnRzLCBhdCBsZWFzdCA1MCUgb2YgdGhlIGF2YWlsYWJsZSB3aWR0aC9oZWlnaHRcbiAgICAvLyBzaG91bGQgYmUgbWFkZSBhdmFpbGFibGUgdG8gYSBwb3B1cC5cbiAgICBjb25zdCBtYXhXaWR0aCA9IE1hdGgubWF4KGF2YWlsV2lkdGggLSBjb250cm9sc1dpZHRoLCBhdmFpbFdpZHRoICogMC41KTtcbiAgICBjb25zdCBtYXhIZWlnaHQgPSBNYXRoLm1heChhdmFpbEhlaWdodCAtIGNvbnRyb2xzSGVpZ2h0LCBhdmFpbEhlaWdodCAqIDAuNSk7XG4gICAgbGV0IHcgPSBNYXRoLmZsb29yKE1hdGgubWluKDYwMCwgbWF4V2lkdGggKiAwLjkpKTtcbiAgICBsZXQgaCA9IE1hdGguZmxvb3IoTWF0aC5taW4oNjAwLCBtYXhIZWlnaHQgKiAwLjkpKTtcbiAgICBpZiAodGhpcy5vcHRpb25zXykge1xuICAgICAgaWYgKHRoaXMub3B0aW9uc18ud2lkdGgpIHtcbiAgICAgICAgdyA9IE1hdGgubWluKHRoaXMub3B0aW9uc18ud2lkdGgsIG1heFdpZHRoKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm9wdGlvbnNfLmhlaWdodCkge1xuICAgICAgICBoID0gTWF0aC5taW4odGhpcy5vcHRpb25zXy5oZWlnaHQsIG1heEhlaWdodCk7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHggPSBNYXRoLmZsb29yKChzY3JlZW4ud2lkdGggLSB3KSAvIDIpO1xuICAgIGNvbnN0IHkgPSBNYXRoLmZsb29yKChzY3JlZW4uaGVpZ2h0IC0gaCkgLyAyKTtcbiAgICBjb25zdCBmZWF0dXJlcyA9IHtcbiAgICAgICdoZWlnaHQnOiBoLFxuICAgICAgJ3dpZHRoJzogdyxcbiAgICAgICdyZXNpemFibGUnOiAneWVzJyxcbiAgICAgICdzY3JvbGxiYXJzJzogJ3llcycsXG4gICAgfTtcbiAgICAvLyBEbyBub3Qgc2V0IGxlZnQvdG9wIGluIEVkZ2U6IGl0IGZhaWxzLlxuICAgIGlmICghaXNFZGdlKSB7XG4gICAgICBmZWF0dXJlc1snbGVmdCddID0geDtcbiAgICAgIGZlYXR1cmVzWyd0b3AnXSA9IHk7XG4gICAgfVxuICAgIGxldCBmZWF0dXJlc1N0ciA9ICcnO1xuICAgIGZvciAoY29uc3QgZiBpbiBmZWF0dXJlcykge1xuICAgICAgaWYgKGZlYXR1cmVzU3RyKSB7XG4gICAgICAgIGZlYXR1cmVzU3RyICs9ICcsJztcbiAgICAgIH1cbiAgICAgIGZlYXR1cmVzU3RyICs9IGAke2Z9PSR7ZmVhdHVyZXNbZl19YDtcbiAgICB9XG4gICAgcmV0dXJuIGZlYXR1cmVzU3RyO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgbWV0aG9kIG9ubHkgZXhpc3RzIHRvIG1ha2UgaWZyYW1lL3RvcCBlbXVsYXRpb24gcG9zc2libGUgaW4gdGVzdHMuXG4gICAqIE90aGVyd2lzZSBgd2luZG93LnRvcGAgY2Fubm90IGJlIG92ZXJyaWRkZW4uXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc1RvcFdpbmRvd18oKSB7XG4gICAgcmV0dXJuIHRoaXMud2luXyA9PSB0aGlzLndpbl8udG9wO1xuICB9XG5cbiAgLyoqIEBwcml2YXRlICovXG4gIHNldHVwUG9wdXBfKCkge1xuICAgIC8vIEtlZXAgYWxpdmUgdG8gY2F0Y2ggdGhlIHdpbmRvdyBjbG9zaW5nLCB3aGljaCB3b3VsZCBpbmRpY2F0ZVxuICAgIC8vIFwiY2FuY2VsXCIgc2lnbmFsLlxuICAgIHRoaXMuaGVhcnRiZWF0SW50ZXJ2YWxfID0gdGhpcy53aW5fLnNldEludGVydmFsKCgpID0+IHtcbiAgICAgIHRoaXMuY2hlY2tfKC8qIGRlbGF5Q2FuY2VsICovIHRydWUpO1xuICAgIH0sIDUwMCk7XG5cbiAgICAvLyBTdGFydCB1cCBtZXNzYWdpbmcuIFRoZSBtZXNzYWdpbmcgaXMgZXhwbGljaXRseSBhbGxvd2VkIHRvIHByb2NlZWRcbiAgICAvLyB3aXRob3V0IG9yaWdpbiBjaGVjayBiL2MgYWxsIGFyZ3VtZW50cyBoYXZlIGFscmVhZHkgYmVlbiBwYXNzZWQgaW5cbiAgICAvLyB0aGUgVVJMIGFuZCBzcGVjaWFsIGhhbmRsaW5nIGlzIGVuZm9yY2VkIHdoZW4gcmVzdWx0IGlzIGRlbGl2ZXJlZC5cbiAgICB0aGlzLm1lc3Nlbmdlcl8gPSBuZXcgTWVzc2VuZ2VyKFxuICAgICAgICB0aGlzLndpbl8sXG4gICAgICAgIC8qKiBAdHlwZSB7IVdpbmRvd30gKi8gKHRoaXMudGFyZ2V0V2luXyksXG4gICAgICAgIC8qIHRhcmdldE9yaWdpbiAqLyBudWxsKTtcbiAgICB0aGlzLm1lc3Nlbmdlcl8uY29ubmVjdCh0aGlzLmhhbmRsZUNvbW1hbmRfLmJpbmQodGhpcykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9kZWxheUNhbmNlbFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY2hlY2tfKG9wdF9kZWxheUNhbmNlbCkge1xuICAgIGlmICghdGhpcy50YXJnZXRXaW5fIHx8IHRoaXMudGFyZ2V0V2luXy5jbG9zZWQpIHtcbiAgICAgIGlmICh0aGlzLmhlYXJ0YmVhdEludGVydmFsXykge1xuICAgICAgICB0aGlzLndpbl8uY2xlYXJJbnRlcnZhbCh0aGlzLmhlYXJ0YmVhdEludGVydmFsXyk7XG4gICAgICAgIHRoaXMuaGVhcnRiZWF0SW50ZXJ2YWxfID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIC8vIEdpdmUgYSBjaGFuY2UgZm9yIHRoZSByZXN1bHQgdG8gYXJyaXZlLCBidXQgb3RoZXJ3aXNlIGNvbnNpZGVyIHRoZVxuICAgICAgLy8gcmVzcG9uY2UgdG8gYmUgZW1wdHkuXG4gICAgICB0aGlzLndpbl8uc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdGhpcy5yZXN1bHRfKEFjdGl2aXR5UmVzdWx0Q29kZS5DQU5DRUxFRCwgLyogZGF0YSAqLyBudWxsKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHRoaXMuZGlzY29ubmVjdFdpdGhFcnJvcl8oZSk7XG4gICAgICAgIH1cbiAgICAgIH0sIG9wdF9kZWxheUNhbmNlbCA/IDMwMDAgOiAwKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRXJyb3J9IHJlYXNvblxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZGlzY29ubmVjdFdpdGhFcnJvcl8ocmVhc29uKSB7XG4gICAgaWYgKHRoaXMucmVzdWx0UmVzb2x2ZXJfKSB7XG4gICAgICB0aGlzLnJlc3VsdFJlc29sdmVyXyhQcm9taXNlLnJlamVjdChyZWFzb24pKTtcbiAgICB9XG4gICAgdGhpcy5kaXNjb25uZWN0KCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshQWN0aXZpdHlSZXN1bHRDb2RlfSBjb2RlXG4gICAqIEBwYXJhbSB7Kn0gZGF0YVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcmVzdWx0Xyhjb2RlLCBkYXRhKSB7XG4gICAgaWYgKHRoaXMucmVzdWx0UmVzb2x2ZXJfKSB7XG4gICAgICBjb25zdCBpc0Nvbm5lY3RlZCA9IHRoaXMubWVzc2VuZ2VyXy5pc0Nvbm5lY3RlZCgpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IEFjdGl2aXR5UmVzdWx0KFxuICAgICAgICAgIGNvZGUsXG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgICBBY3Rpdml0eU1vZGUuUE9QVVAsXG4gICAgICAgICAgaXNDb25uZWN0ZWQgP1xuICAgICAgICAgICAgICB0aGlzLm1lc3Nlbmdlcl8uZ2V0VGFyZ2V0T3JpZ2luKCkgOlxuICAgICAgICAgICAgICBnZXRPcmlnaW5Gcm9tVXJsKHRoaXMudXJsXyksXG4gICAgICAgICAgLyogb3JpZ2luVmVyaWZpZWQgKi8gaXNDb25uZWN0ZWQsXG4gICAgICAgICAgLyogc2VjdXJlQ2hhbm5lbCAqLyBpc0Nvbm5lY3RlZCk7XG4gICAgICByZXNvbHZlUmVzdWx0KHRoaXMud2luXywgcmVzdWx0LCB0aGlzLnJlc3VsdFJlc29sdmVyXyk7XG4gICAgICB0aGlzLnJlc3VsdFJlc29sdmVyXyA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLm1lc3Nlbmdlcl8pIHtcbiAgICAgIHRoaXMubWVzc2VuZ2VyXy5zZW5kQ29tbWFuZCgnY2xvc2UnKTtcbiAgICB9XG4gICAgdGhpcy5kaXNjb25uZWN0KCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNtZFxuICAgKiBAcGFyYW0gez9PYmplY3R9IHBheWxvYWRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhbmRsZUNvbW1hbmRfKGNtZCwgcGF5bG9hZCkge1xuICAgIGlmIChjbWQgPT0gJ2Nvbm5lY3QnKSB7XG4gICAgICAvLyBGaXJzdCBldmVyIG1lc3NhZ2UuIEluZGljYXRlcyB0aGF0IHRoZSByZWNlaXZlciBpcyBsaXN0ZW5pbmcuXG4gICAgICB0aGlzLm1lc3Nlbmdlcl8uc2VuZFN0YXJ0Q29tbWFuZCh0aGlzLmFyZ3NfKTtcbiAgICB9IGVsc2UgaWYgKGNtZCA9PSAncmVzdWx0Jykge1xuICAgICAgLy8gVGhlIGxhc3QgbWVzc2FnZS4gSW5kaWNhdGVzIHRoYXQgdGhlIHJlc3VsdCBoYXMgYmVlbiByZWNlaXZlZC5cbiAgICAgIGNvbnN0IGNvZGUgPSAvKiogQHR5cGUgeyFBY3Rpdml0eVJlc3VsdENvZGV9ICovIChwYXlsb2FkWydjb2RlJ10pO1xuICAgICAgY29uc3QgZGF0YSA9XG4gICAgICAgICAgY29kZSA9PSBBY3Rpdml0eVJlc3VsdENvZGUuRkFJTEVEID9cbiAgICAgICAgICBuZXcgRXJyb3IocGF5bG9hZFsnZGF0YSddIHx8ICcnKSA6XG4gICAgICAgICAgcGF5bG9hZFsnZGF0YSddO1xuICAgICAgdGhpcy5yZXN1bHRfKGNvZGUsIGRhdGEpO1xuICAgIH0gZWxzZSBpZiAoY21kID09ICdjaGVjaycpIHtcbiAgICAgIHRoaXMud2luXy5zZXRUaW1lb3V0KCgpID0+IHRoaXMuY2hlY2tfKCksIDIwMCk7XG4gICAgfVxuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IGZyYWdtZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdElkXG4gKiBAcmV0dXJuIHs/QWN0aXZpdHlQb3J0fVxuICovXG5mdW5jdGlvbiBkaXNjb3ZlclJlZGlyZWN0UG9ydCh3aW4sIGZyYWdtZW50LCByZXF1ZXN0SWQpIHtcbiAgLy8gVHJ5IHRvIGZpbmQgdGhlIHJlc3VsdCBpbiB0aGUgZnJhZ21lbnQuXG4gIGNvbnN0IHBhcmFtTmFtZSA9ICdfX1dBX1JFU19fJztcbiAgY29uc3QgZnJhZ21lbnRQYXJhbSA9IGdldFF1ZXJ5UGFyYW0oZnJhZ21lbnQsIHBhcmFtTmFtZSk7XG4gIGlmICghZnJhZ21lbnRQYXJhbSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IHJlc3BvbnNlID0gLyoqIEB0eXBlIHs/T2JqZWN0fSAqLyAoSlNPTi5wYXJzZShcbiAgICAgIGRlY29kZVVSSUNvbXBvbmVudChmcmFnbWVudFBhcmFtKSkpO1xuICBpZiAoIXJlc3BvbnNlIHx8IHJlc3BvbnNlWydyZXF1ZXN0SWQnXSAhPSByZXF1ZXN0SWQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIFJlbW92ZSB0aGUgZm91bmQgcGFyYW0gZnJvbSB0aGUgZnJhZ21lbnQuXG4gIGNvbnN0IGNsZWFuRnJhZ21lbnQgPSByZW1vdmVRdWVyeVBhcmFtKHdpbi5sb2NhdGlvbi5oYXNoLCBwYXJhbU5hbWUpIHx8ICcnO1xuICBpZiAoY2xlYW5GcmFnbWVudCAhPSB3aW4ubG9jYXRpb24uaGFzaCkge1xuICAgIGlmICh3aW4uaGlzdG9yeSAmJiB3aW4uaGlzdG9yeS5yZXBsYWNlU3RhdGUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHdpbi5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh3aW4uaGlzdG9yeS5zdGF0ZSwgJycsIGNsZWFuRnJhZ21lbnQpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBJZ25vcmUuXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29uc3QgY29kZSA9IHJlc3BvbnNlWydjb2RlJ107XG4gIGNvbnN0IGRhdGEgPSByZXNwb25zZVsnZGF0YSddO1xuICBjb25zdCBvcmlnaW4gPSByZXNwb25zZVsnb3JpZ2luJ107XG4gIGNvbnN0IHJlZmVycmVyT3JpZ2luID0gd2luLmRvY3VtZW50LnJlZmVycmVyICYmXG4gICAgICBnZXRPcmlnaW5Gcm9tVXJsKHdpbi5kb2N1bWVudC5yZWZlcnJlcik7XG4gIGNvbnN0IG9yaWdpblZlcmlmaWVkID0gb3JpZ2luID09IHJlZmVycmVyT3JpZ2luO1xuICByZXR1cm4gbmV3IEFjdGl2aXR5V2luZG93UmVkaXJlY3RQb3J0KFxuICAgICAgd2luLFxuICAgICAgY29kZSxcbiAgICAgIGRhdGEsXG4gICAgICBvcmlnaW4sXG4gICAgICBvcmlnaW5WZXJpZmllZCk7XG59XG5cblxuLyoqXG4gKiBUaGUgYEFjdGl2aXR5UG9ydGAgaW1wbGVtZW50YXRpb24gZm9yIHRoZSBzdGFuZGFsb25lIHdpbmRvdyBhY3Rpdml0eVxuICogY2xpZW50IGV4ZWN1dGVkIGFzIGEgcG9wdXAuXG4gKlxuICogQGltcGxlbWVudHMge0FjdGl2aXR5UG9ydH1cbiAqL1xuY2xhc3MgQWN0aXZpdHlXaW5kb3dSZWRpcmVjdFBvcnQge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcGFyYW0geyFBY3Rpdml0eVJlc3VsdENvZGV9IGNvZGVcbiAgICogQHBhcmFtIHsqfSBkYXRhXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0YXJnZXRPcmlnaW5cbiAgICogQHBhcmFtIHtib29sZWFufSB0YXJnZXRPcmlnaW5WZXJpZmllZFxuICAgKi9cbiAgY29uc3RydWN0b3Iod2luLCBjb2RlLCBkYXRhLCB0YXJnZXRPcmlnaW4sIHRhcmdldE9yaWdpblZlcmlmaWVkKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgICB0aGlzLndpbl8gPSB3aW47XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUFjdGl2aXR5UmVzdWx0Q29kZX0gKi9cbiAgICB0aGlzLmNvZGVfID0gY29kZTtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHsqfSAqL1xuICAgIHRoaXMuZGF0YV8gPSBkYXRhO1xuICAgIC8qKiBAcHJpdmF0ZSB7c3RyaW5nfSAqL1xuICAgIHRoaXMudGFyZ2V0T3JpZ2luXyA9IHRhcmdldE9yaWdpbjtcbiAgICAvKiogQHByaXZhdGUge2Jvb2xlYW59ICovXG4gICAgdGhpcy50YXJnZXRPcmlnaW5WZXJpZmllZF8gPSB0YXJnZXRPcmlnaW5WZXJpZmllZDtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0TW9kZSgpIHtcbiAgICByZXR1cm4gQWN0aXZpdHlNb2RlLlJFRElSRUNUO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhY2NlcHRSZXN1bHQoKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gbmV3IEFjdGl2aXR5UmVzdWx0KFxuICAgICAgICB0aGlzLmNvZGVfLFxuICAgICAgICB0aGlzLmRhdGFfLFxuICAgICAgICBBY3Rpdml0eU1vZGUuUkVESVJFQ1QsXG4gICAgICAgIHRoaXMudGFyZ2V0T3JpZ2luXyxcbiAgICAgICAgdGhpcy50YXJnZXRPcmlnaW5WZXJpZmllZF8sXG4gICAgICAgIC8qIHNlY3VyZUNoYW5uZWwgKi8gZmFsc2UpO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIHJlc29sdmVSZXN1bHQodGhpcy53aW5fLCByZXN1bHQsIHJlc29sdmUpO1xuICAgIH0pO1xuICB9XG59XG5cblxuXG5cbi8qKlxuICogVGhlIHBhZ2UtbGV2ZWwgYWN0aXZpdGllcyBtYW5hZ2VyIHBvcnRzLiBUaGlzIGNsYXNzIGlzIGludGVuZGVkIHRvIGJlIHVzZWRcbiAqIGFzIGEgc2luZ2xldG9uLiBJdCBjYW4gc3RhcnQgYWN0aXZpdGllcyBvZiBhbGwgbW9kZXM6IGlmcmFtZSwgcG9wdXAsIGFuZFxuICogcmVkaXJlY3QuXG4gKi9cbmNsYXNzIEFjdGl2aXR5UG9ydHMge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKi9cbiAgY29uc3RydWN0b3Iod2luKSB7XG4gICAgLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMudmVyc2lvbiA9ICcxLjEzJztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFXaW5kb3d9ICovXG4gICAgdGhpcy53aW5fID0gd2luO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMuZnJhZ21lbnRfID0gd2luLmxvY2F0aW9uLmhhc2g7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZSBAY29uc3QgeyFPYmplY3Q8c3RyaW5nLCAhQXJyYXk8ZnVuY3Rpb24oIUFjdGl2aXR5UG9ydCk+Pn1cbiAgICAgKi9cbiAgICB0aGlzLnJlcXVlc3RIYW5kbGVyc18gPSB7fTtcblxuICAgIC8qKlxuICAgICAqIFRoZSByZXN1bHQgYnVmZmVyIGlzIGluZGV4ZWQgYnkgYHJlcXVlc3RJZGAuXG4gICAgICogQHByaXZhdGUgQGNvbnN0IHshT2JqZWN0PHN0cmluZywgIUFjdGl2aXR5UG9ydD59XG4gICAgICovXG4gICAgdGhpcy5yZXN1bHRCdWZmZXJfID0ge307XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgYW4gYWN0aXZpdHkgd2l0aGluIHRoZSBzcGVjaWZpZWQgaWZyYW1lLlxuICAgKiBAcGFyYW0geyFIVE1MSUZyYW1lRWxlbWVudH0gaWZyYW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAgICogQHBhcmFtIHs/T2JqZWN0PX0gb3B0X2FyZ3NcbiAgICogQHJldHVybiB7IVByb21pc2U8IUFjdGl2aXR5SWZyYW1lUG9ydD59XG4gICAqL1xuICBvcGVuSWZyYW1lKGlmcmFtZSwgdXJsLCBvcHRfYXJncykge1xuICAgIGNvbnN0IHBvcnQgPSBuZXcgQWN0aXZpdHlJZnJhbWVQb3J0KGlmcmFtZSwgdXJsLCBvcHRfYXJncyk7XG4gICAgcmV0dXJuIHBvcnQuY29ubmVjdCgpLnRoZW4oKCkgPT4gcG9ydCk7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgYW4gYWN0aXZpdHkgaW4gYSBzZXBhcmF0ZSB3aW5kb3cuIFRoZSByZXN1bHQgd2lsbCBiZSBkZWxpdmVyZWRcbiAgICogdG8gdGhlIGBvblJlc3VsdGAgY2FsbGJhY2suXG4gICAqXG4gICAqIFRoZSBhY3Rpdml0eSBjYW4gYmUgb3BlbmVkIGluIHR3byBtb2RlczogXCJwb3B1cFwiIGFuZCBcInJlZGlyZWN0XCIuIFRoaXNcbiAgICogZGVwZW5kcyBvbiB0aGUgYHRhcmdldGAgdmFsdWUsIGJ1dCBhbHNvIG9uIHRoZSBicm93c2VyL2Vudmlyb25tZW50LlxuICAgKlxuICAgKiBUaGUgYWxsb3dlZCBgdGFyZ2V0YCB2YWx1ZXMgYXJlIGBfYmxhbmtgLCBgX3RvcGAgYW5kIG5hbWUgdGFyZ2V0cy4gVGhlXG4gICAqIGBfc2VsZmAsIGBfcGFyZW50YCBhbmQgc2ltaWxhciB0YXJnZXRzIGFyZSBub3QgYWxsb3dlZC5cbiAgICpcbiAgICogVGhlIGBfdG9wYCB0YXJnZXQgaW5kaWNhdGVzIHRoYXQgdGhlIGFjdGl2aXR5IHNob3VsZCBiZSBvcGVuZWQgYXMgYVxuICAgKiBcInJlZGlyZWN0XCIsIHdoaWxlIG90aGVyIHRhcmdldHMgaW5kaWNhdGUgdGhhdCB0aGUgYWN0aXZpdHkgc2hvdWxkIGJlXG4gICAqIG9wZW5lZCBhcyBhIHBvcHVwLiBUaGUgYWN0aXZpdHkgY2xpZW50IHdpbGwgdHJ5IHRvIGhvbm9yIHRoZSByZXF1ZXN0ZWRcbiAgICogdGFyZ2V0LiBIb3dldmVyLCBpdCdzIG5vdCBhbHdheXMgcG9zc2libGUuIFNvbWUgZW52aXJvbm1lbnRzIGRvIG5vdFxuICAgKiBhbGxvdyBwb3B1cHMgYW5kIHRoZXkgZWl0aGVyIGZvcmNlIHJlZGlyZWN0IG9yIGZhaWwgdGhlIHdpbmRvdyBvcGVuXG4gICAqIHJlcXVlc3QuIEluIHRoaXMgY2FzZSwgdGhlIGFjdGl2aXR5IHdpbGwgdHJ5IHRvIGZhbGxiYWNrIHRvIHRoZSBcInJlZGlyZWN0XCJcbiAgICogbW9kZS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3RJZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0YXJnZXRcbiAgICogQHBhcmFtIHs/T2JqZWN0PX0gb3B0X2FyZ3NcbiAgICogQHBhcmFtIHs/QWN0aXZpdHlPcGVuT3B0aW9ucz19IG9wdF9vcHRpb25zXG4gICAqIEByZXR1cm4ge3t0YXJnZXRXaW46ID9XaW5kb3d9fVxuICAgKi9cbiAgb3BlbihyZXF1ZXN0SWQsIHVybCwgdGFyZ2V0LCBvcHRfYXJncywgb3B0X29wdGlvbnMpIHtcbiAgICBjb25zdCBwb3J0ID0gbmV3IEFjdGl2aXR5V2luZG93UG9ydChcbiAgICAgICAgdGhpcy53aW5fLCByZXF1ZXN0SWQsIHVybCwgdGFyZ2V0LCBvcHRfYXJncywgb3B0X29wdGlvbnMpO1xuICAgIHBvcnQub3BlbigpLnRoZW4oKCkgPT4ge1xuICAgICAgLy8gQXdhaXQgcmVzdWx0IGlmIHBvc3NpYmxlLiBOb3RpY2UgdGhhdCB3aGVuIGZhbGxpbmcgYmFjayB0byBcInJlZGlyZWN0XCIsXG4gICAgICAvLyB0aGUgcmVzdWx0IHdpbGwgbmV2ZXIgYXJyaXZlIHRocm91Z2ggdGhpcyBwb3J0LlxuICAgICAgdGhpcy5jb25zdW1lUmVzdWx0QWxsXyhyZXF1ZXN0SWQsIHBvcnQpO1xuICAgIH0pO1xuICAgIHJldHVybiB7dGFyZ2V0V2luOiBwb3J0LmdldFRhcmdldFdpbigpfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgdGhlIGNhbGxiYWNrIGZvciB0aGUgcmVzdWx0IG9mIHRoZSBhY3Rpdml0eSBvcGVuZWQgd2l0aCB0aGVcbiAgICogc3BlY2lmaWVkIGByZXF1ZXN0SWRgIChzZWUgdGhlIGBvcGVuKClgIG1ldGhvZCkuIFRoZSBjYWxsYmFjayBpcyBhXG4gICAqIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSBzaW5nbGUgYEFjdGl2aXR5UG9ydGAgYXJndW1lbnQuIFRoZSBjbGllbnRcbiAgICogY2FuIHVzZSB0aGlzIG9iamVjdCB0byB2ZXJpZnkgdGhlIHBvcnQgdXNpbmcgaXQncyBvcmlnaW4sIHZlcmlmaWVkIGFuZFxuICAgKiBzZWN1cmUgY2hhbm5lbCBmbGFncy4gVGhlbiB0aGUgY2xpZW50IGNhbiBjYWxsXG4gICAqIGBBY3Rpdml0eVBvcnQuYWNjZXB0UmVzdWx0KClgIG1ldGhvZCB0byBhY2NlcHQgdGhlIHJlc3VsdC5cbiAgICpcbiAgICogVGhlIGFjdGl2aXR5IHJlc3VsdCBpcyBoYW5kbGVkIHZpYSBhIHNlcGFyYXRlIGNhbGxiYWNrIGJlY2F1c2Ugb2YgYVxuICAgKiBwb3NzaWJsZSByZWRpcmVjdC4gU28gdXNlIG9mIGRpcmVjdCBjYWxsYmFja3MgYW5kL29yIHByb21pc2VzIGlzIG5vdFxuICAgKiBwb3NzaWJsZSBpbiB0aGF0IGNhc2UuXG4gICAqXG4gICAqIEEgdHlwaWNhbCBpbXBsZW1lbnRhdGlvbiB3b3VsZCBsb29rIGxpa2U6XG4gICAqIGBgYFxuICAgKiBwb3J0cy5vblJlc3VsdCgncmVxdWVzdDEnLCBmdW5jdGlvbihwb3J0KSB7XG4gICAqICAgcG9ydC5hY2NlcHRSZXN1bHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgKiAgICAgLy8gT25seSB2ZXJpZmllZCBvcmlnaW5zIGFyZSBhbGxvd2VkLlxuICAgKiAgICAgaWYgKHJlc3VsdC5vcmlnaW4gPT0gZXhwZWN0ZWRPcmlnaW4gJiZcbiAgICogICAgICAgICByZXN1bHQub3JpZ2luVmVyaWZpZWQgJiZcbiAgICogICAgICAgICByZXN1bHQuc2VjdXJlQ2hhbm5lbCkge1xuICAgKiAgICAgICBoYW5kbGVSZXN1bHRGb3JSZXF1ZXN0MShyZXN1bHQpO1xuICAgKiAgICAgfVxuICAgKiAgIH0pO1xuICAgKiB9KVxuICAgKlxuICAgKiBwb3J0cy5vcGVuKCdyZXF1ZXN0MScsIHJlcXVlc3QxVXJsLCAnX2JsYW5rJyk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdElkXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIUFjdGl2aXR5UG9ydCl9IGNhbGxiYWNrXG4gICAqL1xuICBvblJlc3VsdChyZXF1ZXN0SWQsIGNhbGxiYWNrKSB7XG4gICAgbGV0IGhhbmRsZXJzID0gdGhpcy5yZXF1ZXN0SGFuZGxlcnNfW3JlcXVlc3RJZF07XG4gICAgaWYgKCFoYW5kbGVycykge1xuICAgICAgaGFuZGxlcnMgPSBbXTtcbiAgICAgIHRoaXMucmVxdWVzdEhhbmRsZXJzX1tyZXF1ZXN0SWRdID0gaGFuZGxlcnM7XG4gICAgfVxuICAgIGhhbmRsZXJzLnB1c2goY2FsbGJhY2spO1xuXG4gICAgLy8gQ29uc3VtZSBhdmFpbGFibGUgcmVzdWx0LlxuICAgIGNvbnN0IGF2YWlsYWJsZVJlc3VsdCA9IHRoaXMuZGlzY292ZXJSZXN1bHRfKHJlcXVlc3RJZCk7XG4gICAgaWYgKGF2YWlsYWJsZVJlc3VsdCkge1xuICAgICAgdGhpcy5jb25zdW1lUmVzdWx0XyhhdmFpbGFibGVSZXN1bHQsIGNhbGxiYWNrKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3RJZFxuICAgKiBAcmV0dXJuIHs/QWN0aXZpdHlQb3J0fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZGlzY292ZXJSZXN1bHRfKHJlcXVlc3RJZCkge1xuICAgIGxldCBwb3J0ID0gdGhpcy5yZXN1bHRCdWZmZXJfW3JlcXVlc3RJZF07XG4gICAgaWYgKCFwb3J0ICYmIHRoaXMuZnJhZ21lbnRfKSB7XG4gICAgICBwb3J0ID0gZGlzY292ZXJSZWRpcmVjdFBvcnQoXG4gICAgICAgICAgdGhpcy53aW5fLCB0aGlzLmZyYWdtZW50XywgcmVxdWVzdElkKTtcbiAgICAgIGlmIChwb3J0KSB7XG4gICAgICAgIHRoaXMucmVzdWx0QnVmZmVyX1tyZXF1ZXN0SWRdID0gcG9ydDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBvcnQ7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshQWN0aXZpdHlQb3J0fSBwb3J0XG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIUFjdGl2aXR5UG9ydCl9IGNhbGxiYWNrXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjb25zdW1lUmVzdWx0Xyhwb3J0LCBjYWxsYmFjaykge1xuICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4ge1xuICAgICAgY2FsbGJhY2socG9ydCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3RJZFxuICAgKiBAcGFyYW0geyFBY3Rpdml0eVBvcnR9IHBvcnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNvbnN1bWVSZXN1bHRBbGxfKHJlcXVlc3RJZCwgcG9ydCkge1xuICAgIC8vIEZpbmQgYW5kIGV4ZWN1dGUgaGFuZGxlcnMuXG4gICAgY29uc3QgaGFuZGxlcnMgPSB0aGlzLnJlcXVlc3RIYW5kbGVyc19bcmVxdWVzdElkXTtcbiAgICBpZiAoaGFuZGxlcnMpIHtcbiAgICAgIGhhbmRsZXJzLmZvckVhY2goaGFuZGxlciA9PiB7XG4gICAgICAgIHRoaXMuY29uc3VtZVJlc3VsdF8ocG9ydCwgaGFuZGxlcik7XG4gICAgICB9KTtcbiAgICB9XG4gICAgLy8gQnVmZmVyIHRoZSByZXN1bHQgZm9yIGNhbGxiYWNrcyB0aGF0IG1heSBhcnJpdmUgaW4gdGhlIGZ1dHVyZS5cbiAgICB0aGlzLnJlc3VsdEJ1ZmZlcl9bcmVxdWVzdElkXSA9IHBvcnQ7XG4gIH1cbn1cblxuXG5cbnZhciBhY3Rpdml0eVBvcnRzID0ge1xuICBBY3Rpdml0eVBvcnRzLFxuICBBY3Rpdml0eUlmcmFtZVBvcnQsXG4gIEFjdGl2aXR5TW9kZSxcbiAgQWN0aXZpdHlPcGVuT3B0aW9ucyxcbiAgQWN0aXZpdHlQb3J0LFxuICBBY3Rpdml0eVJlcXVlc3QsXG4gIEFjdGl2aXR5UmVzdWx0LFxuICBBY3Rpdml0eVJlc3VsdENvZGUsXG4gIEFjdGl2aXR5V2luZG93UG9ydCxcbn07XG52YXIgYWN0aXZpdHlQb3J0c18xID0gYWN0aXZpdHlQb3J0cy5BY3Rpdml0eVBvcnRzO1xuXG4vKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBmaXJzdCBhcmd1bWVudCBpc24ndCB0cnVlaXNoLlxuICpcbiAqIFN1cHBvcnRzIGFyZ3VtZW50IHN1YnN0aXR1dGlvbiBpbnRvIHRoZSBtZXNzYWdlIHZpYSAlcyBwbGFjZWhvbGRlcnMuXG4gKlxuICogVGhyb3dzIGFuIGVycm9yIG9iamVjdCB0aGF0IGhhcyB0d28gZXh0cmEgcHJvcGVydGllczpcbiAqIC0gYXNzb2NpYXRlZEVsZW1lbnQ6IFRoaXMgaXMgdGhlIGZpcnN0IGVsZW1lbnQgcHJvdmlkZWQgaW4gdGhlIHZhciBhcmdzLlxuICogICBJdCBjYW4gYmUgdXNlZCBmb3IgaW1wcm92ZWQgZGlzcGxheSBvZiBlcnJvciBtZXNzYWdlcy5cbiAqIC0gbWVzc2FnZUFycmF5OiBUaGUgZWxlbWVudHMgb2YgdGhlIHN1YnN0aXR1dGVkIG1lc3NhZ2UgYXMgbm9uLXN0cmluZ2lmaWVkXG4gKiAgIGVsZW1lbnRzIGluIGFuIGFycmF5LiBXaGVuIGUuZy4gcGFzc2VkIHRvIGNvbnNvbGUuZXJyb3IgdGhpcyB5aWVsZHNcbiAqICAgbmF0aXZlIGRpc3BsYXlzIG9mIHRoaW5ncyBsaWtlIEhUTUwgZWxlbWVudHMuXG4gKlxuICogQHBhcmFtIHtUfSBzaG91bGRCZVRydWVpc2ggVGhlIHZhbHVlIHRvIGFzc2VydC4gVGhlIGFzc2VydCBmYWlscyBpZiBpdCBkb2VzXG4gKiAgICAgbm90IGV2YWx1YXRlIHRvIHRydWUuXG4gKiBAcGFyYW0ge3N0cmluZz19IG9wdF9tZXNzYWdlIFRoZSBhc3NlcnRpb24gbWVzc2FnZVxuICogQHBhcmFtIHsuLi4qfSB2YXJfYXJncyBBcmd1bWVudHMgc3Vic3RpdHV0ZWQgaW50byAlcyBpbiB0aGUgbWVzc2FnZS5cbiAqIEByZXR1cm4ge1R9IFRoZSB2YWx1ZSBvZiBzaG91bGRCZVRydWVpc2guXG4gKiBAdGVtcGxhdGUgVFxuICovXG5mdW5jdGlvbiBhc3NlcnQoc2hvdWxkQmVUcnVlaXNoLCBvcHRfbWVzc2FnZSwgdmFyX2FyZ3MpIHtcbiAgbGV0IGZpcnN0RWxlbWVudDtcbiAgaWYgKCFzaG91bGRCZVRydWVpc2gpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gb3B0X21lc3NhZ2UgfHwgJ0Fzc2VydGlvbiBmYWlsZWQnO1xuICAgIGNvbnN0IHNwbGl0TWVzc2FnZSA9IG1lc3NhZ2Uuc3BsaXQoJyVzJyk7XG4gICAgY29uc3QgZmlyc3QgPSBzcGxpdE1lc3NhZ2Uuc2hpZnQoKTtcbiAgICBsZXQgZm9ybWF0dGVkID0gZmlyc3Q7XG4gICAgY29uc3QgbWVzc2FnZUFycmF5ID0gW107XG4gICAgcHVzaElmTm9uRW1wdHkobWVzc2FnZUFycmF5LCBmaXJzdCk7XG4gICAgZm9yIChsZXQgaSA9IDI7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHZhbCA9IGFyZ3VtZW50c1tpXTtcbiAgICAgIGlmICh2YWwgJiYgdmFsLnRhZ05hbWUpIHtcbiAgICAgICAgZmlyc3RFbGVtZW50ID0gdmFsO1xuICAgICAgfVxuICAgICAgY29uc3QgbmV4dENvbnN0YW50ID0gc3BsaXRNZXNzYWdlLnNoaWZ0KCk7XG4gICAgICBtZXNzYWdlQXJyYXkucHVzaCh2YWwpO1xuICAgICAgcHVzaElmTm9uRW1wdHkobWVzc2FnZUFycmF5LCBuZXh0Q29uc3RhbnQudHJpbSgpKTtcbiAgICAgIGZvcm1hdHRlZCArPSB0b1N0cmluZyh2YWwpICsgbmV4dENvbnN0YW50O1xuICAgIH1cbiAgICBjb25zdCBlID0gbmV3IEVycm9yKGZvcm1hdHRlZCk7XG4gICAgZS5mcm9tQXNzZXJ0ID0gdHJ1ZTtcbiAgICBlLmFzc29jaWF0ZWRFbGVtZW50ID0gZmlyc3RFbGVtZW50O1xuICAgIGUubWVzc2FnZUFycmF5ID0gbWVzc2FnZUFycmF5O1xuICAgIHRocm93IGU7XG4gIH1cbiAgcmV0dXJuIHNob3VsZEJlVHJ1ZWlzaDtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyFBcnJheX0gYXJyYXlcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKi9cbmZ1bmN0aW9uIHB1c2hJZk5vbkVtcHR5KGFycmF5LCB2YWwpIHtcbiAgaWYgKHZhbCAhPSAnJykge1xuICAgIGFycmF5LnB1c2godmFsKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB0b1N0cmluZyh2YWwpIHtcbi8vIERvIGNoZWNrIGVxdWl2YWxlbnQgdG8gYHZhbCBpbnN0YW5jZW9mIEVsZW1lbnRgIHdpdGhvdXQgY3Jvc3Mtd2luZG93IGJ1Z1xuICBpZiAodmFsICYmIHZhbC5ub2RlVHlwZSA9PSAxKSB7XG4gICAgcmV0dXJuIHZhbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgKyAodmFsLmlkID8gJyMnICsgdmFsLmlkIDogJycpO1xuICB9XG4gIHJldHVybiAvKiogQHR5cGUge3N0cmluZ30gKi8gKHZhbCk7XG59XG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuXG4vKipcbiAqIFJldHVybnMgYSBtYXAtbGlrZSBvYmplY3QuXG4gKiBJZiBvcHRfaW5pdGlhbCBpcyBwcm92aWRlZCwgY29waWVzIGl0cyBvd24gcHJvcGVydGllcyBpbnRvIHRoZVxuICogbmV3bHkgY3JlYXRlZCBvYmplY3QuXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdF9pbml0aWFsIFRoaXMgc2hvdWxkIHR5cGljYWxseSBiZSBhbiBvYmplY3QgbGl0ZXJhbC5cbiAqIEByZXR1cm4geyFPYmplY3R9XG4gKiBAdGVtcGxhdGUgVFxuICovXG5mdW5jdGlvbiBtYXAob3B0X2luaXRpYWwpIHtcbiAgY29uc3Qgb2JqID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgaWYgKG9wdF9pbml0aWFsKSB7XG4gICAgT2JqZWN0LmFzc2lnbihvYmosIG9wdF9pbml0aWFsKTtcbiAgfVxuICByZXR1cm4gb2JqO1xufVxuXG4vKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogUG9seWZpbGwgZm9yIFN0cmluZy5wcm90b3R5cGUuc3RhcnRzV2l0aC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmdcbiAqIEBwYXJhbSB7c3RyaW5nfSBwcmVmaXhcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIHN0YXJ0c1dpdGgoc3RyaW5nLCBwcmVmaXgpIHtcbiAgaWYgKHByZWZpeC5sZW5ndGggPiBzdHJpbmcubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBzdHJpbmcubGFzdEluZGV4T2YocHJlZml4LCAwKSA9PSAwO1xufVxuXG4vKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgc3RyaW5nPn0gKi9cbmxldCBwcm9wZXJ0eU5hbWVDYWNoZTtcblxuLyoqIEBjb25zdCB7IUFycmF5PHN0cmluZz59ICovXG5jb25zdCB2ZW5kb3JQcmVmaXhlcyA9IFsnV2Via2l0JywgJ3dlYmtpdCcsICdNb3onLCAnbW96JywgJ21zJywgJ08nLCAnbyddO1xuXG4vKipcbiAqIERlZmF1bHQgc3R5bGVzIHRvIGJlIHNldCBmb3IgdG9wIGxldmVsIGZyaWVuZGx5IGlmcmFtZS5cbiAqIFNvbWUgYXR0cmlidXRlcyBhcmUgbm90IGluY2x1ZGVkIHN1Y2ggYXMgaGVpZ2h0LCBsZWZ0LCBtYXJnaW4tbGVmdDsgc2luY2VcbiAqIHRoZXNlIGF0dHJpYnV0ZXMgYXJlIHVwZGF0ZWQgYnkgQG1lZGlhIHF1ZXJpZXMgYW5kIGhhdmluZyB0aGVzZSB2YWx1ZXNcbiAqIGRlZmluZWQgaGVyZSBhcyAhaW1wb3J0YW50IGRvZXMgbm90IHdvcmsgb24gSUUvZWRnZSBicm93c2Vycy5cbiAqIEBjb25zdCB7IU9iamVjdDxzdHJpbmcsIHN0cmluZ3xudW1iZXI+fVxuICovXG5jb25zdCBkZWZhdWx0U3R5bGVzID0ge1xuICAnYWxpZ24tY29udGVudCc6ICdub3JtYWwnLFxuICAnYW5pbWF0aW9uJzogJ25vbmUnLFxuICAnYWxpZ24taXRlbXMnOiAnbm9ybWFsJyxcbiAgJ2FsaWduLXNlbGYnOiAnYXV0bycsXG4gICdhbGlnbm1lbnQtYmFzZWxpbmUnOiAnYXV0bycsXG4gICdiYWNrZmFjZS12aXNpYmlsaXR5JzogJ2hpZGRlbicsXG4gICdiYWNrZ3JvdW5kLWNsaXAnOiAnYm9yZGVyLWJveCcsXG4gICdiYWNrZ3JvdW5kLWltYWdlJzogJ25vbmUnLFxuICAnYmFzZWxpbmUtc2hpZnQnOiAnMCcsXG4gICdibG9jay1zaXplJzogJ2F1dG8nLFxuICAnYm9yZGVyJzogJ25vbmUnLFxuICAnYm9yZGVyLWNvbGxhcHNlJzogJ3NlcGFyYXRlJyxcbiAgJ2JvdHRvbSc6ICcwJyxcbiAgJ2JveC1zaXppbmcnOiAnYm9yZGVyLWJveCcsXG4gICdicmVhay1hZnRlcic6ICdhdXRvJyxcbiAgJ2JyZWFrLWJlZm9yZSc6ICdhdXRvJyxcbiAgJ2JyZWFrLWluc2lkZSc6ICdhdXRvJyxcbiAgJ2J1ZmZlcmVkLXJlbmRlcmluZyc6ICdhdXRvJyxcbiAgJ2NhcHRpb24tc2lkZSc6ICd0b3AnLFxuICAnY2FyZXQtY29sb3InOiAncmdiKDUxLCA1MSwgNTEpJyxcbiAgJ2NsZWFyJzogJ25vbmUnLFxuICAnY29sb3InOiAncmdiKDUxLCA1MSwgNTEpJyxcbiAgJ2NvbG9yLXJlbmRlcmluZyc6ICdhdXRvJyxcbiAgJ2NvbHVtbi1jb3VudCc6ICdhdXRvJyxcbiAgJ2NvbHVtbi1maWxsJzogJ2JhbGFuY2UnLFxuICAnY29sdW1uLWdhcCc6ICdub3JtYWwnLFxuICAnY29sdW1uLXJ1bGUtY29sb3InOiAncmdiKDUxLCA1MSwgNTEpJyxcbiAgJ2NvbHVtbi1ydWxlLXN0eWxlJzogJ25vbmUnLFxuICAnY29sdW1uLXJ1bGUtd2lkdGgnOiAnMCcsXG4gICdjb2x1bW4tc3Bhbic6ICdub25lJyxcbiAgJ2NvbHVtbi13aWR0aCc6ICdhdXRvJyxcbiAgJ2NvbnRhaW4nOiAnbm9uZScsXG4gICdjb3VudGVyLWluY3JlbWVudCc6ICdub25lJyxcbiAgJ2NvdW50ZXItcmVzZXQnOiAnbm9uZScsXG4gICdjdXJzb3InOiAnYXV0bycsXG4gICdkaXJlY3Rpb24nOiAnaW5oZXJpdCcsXG4gICdkaXNwbGF5JzogJ2Jsb2NrJyxcbiAgJ2VtcHR5LWNlbGxzJzogJ3Nob3cnLFxuICAnZmlsdGVyJzogJ25vbmUnLFxuICAnZmxleCc6ICdub25lJywgIC8vIGZsZXgtZ3JvdywgZmxleC1zaHJpbmssIGFuZCBmbGV4LWJhc2lzLlxuICAnZmxleC1mbG93JzogJ3JvdyBub3dyYXAnLCAgLy8gZmxleC1kaXJlY3Rpb24sIGZsZXgtd3JhcC5cbiAgJ2Zsb2F0JzogJ25vbmUnLFxuICAnZmxvb2QtY29sb3InOiAncmdiKDAsIDAsIDApJyxcbiAgJ2Zsb29kLW9wYWNpdHknOiAnMScsXG4gICdmb250JzogJ25vbmUnLFxuICAnZm9udC1zaXplJzogJ21lZGl1bScsXG4gICdmb250LWZhbWlseSc6ICcnLFxuICAnaGVpZ2h0JzogJ2F1dG8nLFxuICAnaHlwaGVucyc6ICdtYW51YWwnLFxuICAnaW1hZ2UtcmVuZGVyaW5nJzogJ2F1dG8nLFxuICAnaW5saW5lLXNpemUnOiAnJywgIC8vIFNldHRpbmcgdG8gJ2F1dG8nIHdpbGwgbm90IGFsbG93IG92ZXJyaWRlLlxuICAnaXNvbGF0aW9uJzogJ2F1dG8nLFxuICAnanVzdGlmeS1jb250ZW50JzogJ25vcm1hbCcsXG4gICdqdXN0aWZ5LWl0ZW1zJzogJ25vcm1hbCcsXG4gICdqdXN0aWZ5LXNlbGYnOiAnYXV0bycsXG4gICdsZXR0ZXItc3BhY2luZyc6ICdub3JtYWwnLFxuICAnbGlnaHRpbmctY29sb3InOiAncmdiKDI1NSwgMjU1LCAyNTUpJyxcbiAgJ2xpbmUtYnJlYWsnOiAnYXV0bycsXG4gICdsaW5lLWhlaWdodCc6ICdub3JtYWwnLFxuICAnbWFzayc6ICdub25lJyxcbiAgJ21heC1ibG9jay1zaXplJzogJ25vbmUnLFxuICAnbWF4LWhlaWdodCc6ICdub25lJyxcbiAgJ21heC1pbmxpbmUtc2l6ZSc6ICdub25lJyxcbiAgJ21heC13aWR0aCc6ICdub25lJyxcbiAgJ21pbi1ibG9jay1zaXplJzogJ25vbmUnLFxuICAnbWluLWhlaWdodCc6ICcwJyxcbiAgJ21pbi1pbmxpbmUtc2l6ZSc6ICcwJyxcbiAgJ21pbi13aWR0aCc6ICcwJyxcbiAgJ21peC1ibGVuZC1tb2RlJzogJ25vcm1hbCcsXG4gICdvYmplY3QtZml0JzogJ2ZpbGwnLCAgLy8gSW1wb3J0YW50IGZvciBTYWZhcmkgYnJvd3Nlci5cbiAgJ29mZnNldC1kaXN0YW5jZSc6ICdub25lJywgIC8vIENocm9tZSBvbmx5IChFeHBlcmltZW50YWwpLlxuICAnb2Zmc2V0LXBhdGgnOiAnbm9uZScsICAvLyBDaHJvbWUgb25seSAoRXhwZXJpbWVudGFsKS5cbiAgJ29mZnNldC1yb3RhdGUnOiAnYXV0byAwZGVnJywgIC8vIENocm9tZSBvbmx5IChFeHBlcmltZW50YWwpLlxuICAnb3BhY2l0eSc6ICcxJyxcbiAgJ29yZGVyJzogJzAnLFxuICAnb3JwaGFucyc6ICcyJyxcbiAgJ291dGxpbmUnOiAnbm9uZScsXG4gICdvdmVyZmxvdy1hbmNob3InOiAnYXV0bycsXG4gICdvdmVyZmxvdy13cmFwJzogJ25vcm1hbCcsXG4gICdvdmVyZmxvdyc6ICd2aXNpYmxlJyxcbiAgJ3BhZGRpbmcnOiAnMCcsXG4gICdwYWdlJzogJycsXG4gICdwZXJzcGVjdGl2ZSc6ICdub25lJyxcbiAgJ3BvaW50ZXItZXZlbnRzJzogJ2F1dG8nLFxuICAncG9zaXRpb24nOiAnc3RhdGljJyxcbiAgJ3F1b3Rlcyc6ICcnLFxuICAncmVzaXplJzogJ25vbmUnLFxuICAncmlnaHQnOiAnMCcsXG4gICdzY3JvbGwtYmVoYXZpb3InOiAnYXV0bycsXG4gICd0YWItc2l6ZSc6ICc4JywgIC8vIE9ubHkgQ2hyb21lLCBTYWZhcmkgKEV4cGVyaW1lbnRhbCkuXG4gICd0YWJsZS1sYXlvdXQnOiAnYXV0bycsXG4gICd0ZXh0LWFsaWduJzogJ3N0YXJ0JyxcbiAgJ3RleHQtYWxpZ24tbGFzdCc6ICdhdXRvJyxcbiAgJ3RleHQtYW5jaG9yJzogJ3N0YXJ0JyxcbiAgJ3RleHQtY29tYmluZS11cHJpZ2h0JzogJ25vbmUnLFxuICAndGV4dC1kZWNvcmF0aW9uJzogJ25vbmUnLFxuICAndGV4dC1pbmRlbnQnOiAnMCcsXG4gICd0ZXh0LW9yaWVudGF0aW9uJzogJ21peGVkJyxcbiAgJ3RleHQtb3ZlcmZsb3cnOiAnY2xpcCcsXG4gICd0ZXh0LXJlbmRlcmluZyc6ICdhdXRvJyxcbiAgJ3RleHQtc2hhZG93JzogJ25vbmUnLFxuICAndGV4dC1zaXplLWFkanVzdCc6ICdhdXRvJyxcbiAgJ3RleHQtdHJhbnNmb3JtJzogJ25vbmUnLFxuICAndGV4dC11bmRlcmxpbmUtcG9zaXRpb24nOiAnYXV0bycsXG4gICd0b3AnOiAnYXV0bycsXG4gICd0b3VjaC1hY3Rpb24nOiAnYXV0bycsXG4gICd0cmFuc2Zvcm0nOiAnbm9uZScsXG4gICd0cmFuc2l0aW9uJzogJ25vbmUgMHMgZWFzZSAwcycsXG4gICd1bmljb2RlLWJpZGknOiAnbm9ybWFsJyxcbiAgJ3VzZXItc2VsZWN0JzogJ2F1dG8nLFxuICAndmVjdG9yLWVmZmVjdCc6ICdub25lJyxcbiAgJ3ZlcnRpY2FsLWFsaWduJzogJ2Jhc2VsaW5lJyxcbiAgJ3Zpc2liaWxpdHknOiAndmlzaWJsZScsXG4gICd3aGl0ZS1zcGFjZSc6ICdub3JtYWwnLFxuICAnd2lkb3dzJzogJzInLFxuICAnd29yZC1icmVhayc6ICdub3JtYWwnLFxuICAnd29yZC1zcGFjaW5nJzogJzAnLFxuICAnd29yZC13cmFwJzogJ25vcm1hbCcsXG4gICd3cml0aW5nLW1vZGUnOiAnaG9yaXpvbnRhbC10YicsXG4gICd6b29tJzogJzEnLFxuICAnei1pbmRleCc6ICdhdXRvJyxcbn07XG5cbi8qKlxuICogQGV4cG9ydFxuICogQHBhcmFtIHtzdHJpbmd9IGNhbWVsQ2FzZSBjYW1lbCBjYXNlZCBzdHJpbmdcbiAqIEByZXR1cm4ge3N0cmluZ30gdGl0bGUgY2FzZWQgc3RyaW5nXG4gKi9cbmZ1bmN0aW9uIGNhbWVsQ2FzZVRvVGl0bGVDYXNlKGNhbWVsQ2FzZSkge1xuICByZXR1cm4gY2FtZWxDYXNlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtZWxDYXNlLnNsaWNlKDEpO1xufVxuXG4vKipcbiAqIENoZWNrcyB0aGUgc3R5bGUgaWYgYSBwcmVmaXhlZCB2ZXJzaW9uIG9mIGEgcHJvcGVydHkgZXhpc3RzIGFuZCByZXR1cm5zXG4gKiBpdCBvciByZXR1cm5zIGFuIGVtcHR5IHN0cmluZy5cbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyFPYmplY3R9IHN0eWxlXG4gKiBAcGFyYW0ge3N0cmluZ30gdGl0bGVDYXNlIHRoZSB0aXRsZSBjYXNlIHZlcnNpb24gb2YgYSBjc3MgcHJvcGVydHkgbmFtZVxuICogQHJldHVybiB7c3RyaW5nfSB0aGUgcHJlZml4ZWQgcHJvcGVydHkgbmFtZSBvciBudWxsLlxuICovXG5mdW5jdGlvbiBnZXRWZW5kb3JKc1Byb3BlcnR5TmFtZV8oc3R5bGUsIHRpdGxlQ2FzZSkge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHZlbmRvclByZWZpeGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgcHJvcGVydHlOYW1lID0gdmVuZG9yUHJlZml4ZXNbaV0gKyB0aXRsZUNhc2U7XG4gICAgaWYgKHN0eWxlW3Byb3BlcnR5TmFtZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHByb3BlcnR5TmFtZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuICcnO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgcG9zc2libHkgcHJlZml4ZWQgSmF2YVNjcmlwdCBwcm9wZXJ0eSBuYW1lIG9mIGEgc3R5bGUgcHJvcGVydHlcbiAqIChleC4gV2Via2l0VHJhbnNpdGlvbkR1cmF0aW9uKSBnaXZlbiBhIGNhbWVsQ2FzZSdkIHZlcnNpb24gb2YgdGhlIHByb3BlcnR5XG4gKiAoZXguIHRyYW5zaXRpb25EdXJhdGlvbikuXG4gKiBAZXhwb3J0XG4gKiBAcGFyYW0geyFPYmplY3R9IHN0eWxlXG4gKiBAcGFyYW0ge3N0cmluZ30gY2FtZWxDYXNlIHRoZSBjYW1lbCBjYXNlZCB2ZXJzaW9uIG9mIGEgY3NzIHByb3BlcnR5IG5hbWVcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9ieXBhc3NDYWNoZSBieXBhc3MgdGhlIG1lbW9pemVkIGNhY2hlIG9mIHByb3BlcnR5XG4gKiAgIG1hcHBpbmdcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZ2V0VmVuZG9ySnNQcm9wZXJ0eU5hbWUoc3R5bGUsIGNhbWVsQ2FzZSwgb3B0X2J5cGFzc0NhY2hlKSB7XG4gIGlmIChzdGFydHNXaXRoKGNhbWVsQ2FzZSwgJy0tJykpIHtcbiAgICAvLyBDU1MgdmFycyBhcmUgcmV0dXJuZWQgYXMgaXMuXG4gICAgcmV0dXJuIGNhbWVsQ2FzZTtcbiAgfVxuICBpZiAoIXByb3BlcnR5TmFtZUNhY2hlKSB7XG4gICAgcHJvcGVydHlOYW1lQ2FjaGUgPSBtYXAoKTtcbiAgfVxuICBsZXQgcHJvcGVydHlOYW1lID0gcHJvcGVydHlOYW1lQ2FjaGVbY2FtZWxDYXNlXTtcbiAgaWYgKCFwcm9wZXJ0eU5hbWUgfHwgb3B0X2J5cGFzc0NhY2hlKSB7XG4gICAgcHJvcGVydHlOYW1lID0gY2FtZWxDYXNlO1xuICAgIGlmIChzdHlsZVtjYW1lbENhc2VdID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IHRpdGxlQ2FzZSA9IGNhbWVsQ2FzZVRvVGl0bGVDYXNlKGNhbWVsQ2FzZSk7XG4gICAgICBjb25zdCBwcmVmaXhlZFByb3BlcnR5TmFtZSA9IGdldFZlbmRvckpzUHJvcGVydHlOYW1lXyhzdHlsZSwgdGl0bGVDYXNlKTtcblxuICAgICAgaWYgKHN0eWxlW3ByZWZpeGVkUHJvcGVydHlOYW1lXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHByb3BlcnR5TmFtZSA9IHByZWZpeGVkUHJvcGVydHlOYW1lO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIW9wdF9ieXBhc3NDYWNoZSkge1xuICAgICAgcHJvcGVydHlOYW1lQ2FjaGVbY2FtZWxDYXNlXSA9IHByb3BlcnR5TmFtZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHByb3BlcnR5TmFtZTtcbn1cblxuXG4vKipcbiAqIFNldHMgdGhlIENTUyBzdHlsZXMgb2YgdGhlIHNwZWNpZmllZCBlbGVtZW50IHdpdGggIWltcG9ydGFudC4gVGhlIHN0eWxlc1xuICogYXJlIHNwZWNpZmllZCBhcyBhIG1hcCBmcm9tIENTUyBwcm9wZXJ0eSBuYW1lcyB0byB0aGVpciB2YWx1ZXMuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCBzdHJpbmd8bnVtYmVyPn0gc3R5bGVzXG4gKi9cbmZ1bmN0aW9uIHNldEltcG9ydGFudFN0eWxlcyhlbGVtZW50LCBzdHlsZXMpIHtcbiAgZm9yIChjb25zdCBrIGluIHN0eWxlcykge1xuICAgIGVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoXG4gICAgICAgIGdldFZlbmRvckpzUHJvcGVydHlOYW1lKHN0eWxlcywgayksIHN0eWxlc1trXS50b1N0cmluZygpLCAnaW1wb3J0YW50Jyk7XG4gIH1cbn1cblxuXG4vKipcbiAqIFNldHMgdGhlIENTUyBzdHlsZSBvZiB0aGUgc3BlY2lmaWVkIGVsZW1lbnQgd2l0aCBvcHRpb25hbCB1bml0cywgZS5nLiBcInB4XCIuXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eVxuICogQHBhcmFtIHs/c3RyaW5nfG51bWJlcnxib29sZWFufSB2YWx1ZVxuICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfdW5pdHNcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9ieXBhc3NDYWNoZVxuICovXG5mdW5jdGlvbiBzZXRTdHlsZShlbGVtZW50LCBwcm9wZXJ0eSwgdmFsdWUsIG9wdF91bml0cywgb3B0X2J5cGFzc0NhY2hlKSB7XG4gIGNvbnN0IHByb3BlcnR5TmFtZSA9IGdldFZlbmRvckpzUHJvcGVydHlOYW1lKGVsZW1lbnQuc3R5bGUsIHByb3BlcnR5LFxuICAgICAgb3B0X2J5cGFzc0NhY2hlKTtcbiAgaWYgKHByb3BlcnR5TmFtZSkge1xuICAgIGVsZW1lbnQuc3R5bGVbcHJvcGVydHlOYW1lXSA9XG4gICAgICAgIC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAob3B0X3VuaXRzID8gdmFsdWUgKyBvcHRfdW5pdHMgOiB2YWx1ZSk7XG4gIH1cbn1cblxuXG4vKipcbiAqIFNldHMgdGhlIENTUyBzdHlsZXMgb2YgdGhlIHNwZWNpZmllZCBlbGVtZW50LiBUaGUgc3R5bGVzXG4gKiBhIHNwZWNpZmllZCBhcyBhIG1hcCBmcm9tIENTUyBwcm9wZXJ0eSBuYW1lcyB0byB0aGVpciB2YWx1ZXMuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCA/c3RyaW5nfG51bWJlcnxib29sZWFuPn0gc3R5bGVzXG4gKi9cbmZ1bmN0aW9uIHNldFN0eWxlcyhlbGVtZW50LCBzdHlsZXMpIHtcbiAgZm9yIChjb25zdCBrIGluIHN0eWxlcykge1xuICAgIHNldFN0eWxlKGVsZW1lbnQsIGssIHN0eWxlc1trXSk7XG4gIH1cbn1cblxuXG4vKipcbiAqIFJlc2V0cyBzdHlsZXMgdGhhdCB3ZXJlIHNldCBkeW5hbWljYWxseSAoaS5lLiBpbmxpbmUpXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0geyFBcnJheTxzdHJpbmc+fSBwcm9wZXJ0aWVzXG4gKi9cbmZ1bmN0aW9uIHJlc2V0U3R5bGVzKGVsZW1lbnQsIHByb3BlcnRpZXMpIHtcbiAgY29uc3Qgc3R5bGVPYmogPSB7fTtcbiAgcHJvcGVydGllcy5mb3JFYWNoKHByb3AgPT4ge1xuICAgIHN0eWxlT2JqW3Byb3BdID0gbnVsbDtcbiAgfSk7XG4gIHNldFN0eWxlcyhlbGVtZW50LCBzdHlsZU9iaik7XG59XG5cblxuLyoqXG4gKiBSZXNldHMgYWxsIHRoZSBzdHlsZXMgb2YgYW4gZWxlbWVudCB0byBhIGdpdmVuIHZhbHVlLiBEZWZhdWx0cyB0byBudWxsLlxuICogVGhlIHZhbGlkIHZhbHVlcyBhcmUgJ2luaGVyaXQnLCAnaW5pdGlhbCcsICd1bnNldCcgb3IgbnVsbC5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqL1xuZnVuY3Rpb24gcmVzZXRBbGxTdHlsZXMoZWxlbWVudCkge1xuICBzZXRJbXBvcnRhbnRTdHlsZXMoZWxlbWVudCwgZGVmYXVsdFN0eWxlcyk7XG59XG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuY29uc3Qgc3R5bGVUeXBlID0gJ3RleHQvY3NzJztcblxuXG4vKipcbiAqIEFkZCBhdHRyaWJ1dGVzIHRvIGFuIGVsZW1lbnQuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCBzdHJpbmd8bnVtYmVyfGJvb2xlYW58IU9iamVjdDxzdHJpbmcsIHN0cmluZ3xudW1iZXJ8Ym9vbGVhbj4+fSBhdHRyaWJ1dGVzXG4gKiBAcmV0dXJuIHshRWxlbWVudH0gdXBkYXRlZCBlbGVtZW50LlxuICovXG5mdW5jdGlvbiBhZGRBdHRyaWJ1dGVzVG9FbGVtZW50KGVsZW1lbnQsIGF0dHJpYnV0ZXMpIHtcbiAgZm9yIChjb25zdCBhdHRyIGluIGF0dHJpYnV0ZXMpIHtcbiAgICBpZiAoYXR0ciA9PSAnc3R5bGUnKSB7XG4gICAgICBzZXRTdHlsZXMoZWxlbWVudCxcbiAgICAgICAgICAgLyoqIEB0eXBlICFPYmplY3Q8c3RyaW5nLCBzdHJpbmd8Ym9vbGVhbnxudW1iZXI+ICovXG4gICAgICAgICAgIChhdHRyaWJ1dGVzW2F0dHJdKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKGF0dHIsXG4gICAgICAgICAgLyoqIEB0eXBlIHtzdHJpbmd8Ym9vbGVhbnxudW1iZXJ9ICovIChhdHRyaWJ1dGVzW2F0dHJdKSk7XG4gICAgfVxuXG4gIH1cbiAgcmV0dXJuIGVsZW1lbnQ7XG59XG5cblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgZWxlbWVudCBvbiBkb2N1bWVudCB3aXRoIHNwZWNpZmllZCB0YWdOYW1lIGFuZCBhdHRyaWJ1dGVzLlxuICogQHBhcmFtIHshRG9jdW1lbnR9IGRvY1xuICogQHBhcmFtIHtzdHJpbmd9IHRhZ05hbWVcbiAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz59IGF0dHJpYnV0ZXNcbiAqIEBwYXJhbSB7PyhzdHJpbmd8IU5vZGV8IUFycmF5TGlrZTwhTm9kZT58IUFycmF5PCFOb2RlPik9fSBvcHRfY29udGVudFxuICogQHJldHVybiB7IUVsZW1lbnR9IGNyZWF0ZWQgZWxlbWVudC5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlRWxlbWVudChkb2MsIHRhZ05hbWUsIGF0dHJpYnV0ZXMsIG9wdF9jb250ZW50KSB7XG4gIGNvbnN0IGVsZW1lbnQgPSBkb2MuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTtcbiAgYWRkQXR0cmlidXRlc1RvRWxlbWVudChlbGVtZW50LCBhdHRyaWJ1dGVzKTtcbiAgaWYgKG9wdF9jb250ZW50ICE9IG51bGwpIHtcbiAgICBpZiAodHlwZW9mIG9wdF9jb250ZW50ID09ICdzdHJpbmcnKSB7XG4gICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gb3B0X2NvbnRlbnQ7XG4gICAgfSBlbHNlIGlmIChvcHRfY29udGVudC5ub2RlVHlwZSkge1xuICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChvcHRfY29udGVudCk7XG4gICAgfSBlbHNlIGlmICgnbGVuZ3RoJyBpbiBvcHRfY29udGVudCkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcHRfY29udGVudC5sZW5ndGg7IGkrKykge1xuICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKG9wdF9jb250ZW50W2ldKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYXNzZXJ0KGZhbHNlLCAnVW5zdXBwb3J0ZWQgY29udGVudDogJXMnLCBvcHRfY29udGVudCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBlbGVtZW50O1xufVxuXG5cbi8qKlxuICogUmVtb3ZlcyBhbGwgY2hpbGRyZW4gZnJvbSB0aGUgcGFyZW50IGVsZW1lbnQuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBwYXJlbnRcbiAqL1xuZnVuY3Rpb24gcmVtb3ZlQ2hpbGRyZW4ocGFyZW50KSB7XG4gIHBhcmVudC50ZXh0Q29udGVudCA9ICcnO1xufVxuXG5cbi8qKlxuICogSW5qZWN0cyB0aGUgcHJvdmlkZWQgc3R5bGVzIGluIHRoZSBIRUFEIHNlY3Rpb24gb2YgdGhlIGRvY3VtZW50LlxuICogQHBhcmFtIHshRG9jdW1lbnR9IGRvYyBUaGUgZG9jdW1lbnQgb2JqZWN0LlxuICogQHBhcmFtIHtzdHJpbmd9IHN0eWxlVGV4dCBUaGUgc3R5bGUgc3RyaW5nLlxuICogQHJldHVybiB7IUVsZW1lbnR9XG4gKi9cbmZ1bmN0aW9uIGluamVjdFN0eWxlU2hlZXQoZG9jLCBzdHlsZVRleHQpIHtcbiAgY29uc3Qgc3R5bGVFbGVtZW50ID0gY3JlYXRlRWxlbWVudChkb2MsICdzdHlsZScsIHtcbiAgICAndHlwZSc6IHN0eWxlVHlwZSxcbiAgfSk7XG4gIHN0eWxlRWxlbWVudC50ZXh0Q29udGVudCA9IHN0eWxlVGV4dDtcbiAgZG9jLmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTtcbiAgcmV0dXJuIHN0eWxlRWxlbWVudDtcbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbi8qKlxuICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgc3RyaW5nPn0gbWFwXG4gKiBAcGFyYW0gez9zdHJpbmd8P0VsZW1lbnR9IGxhbmdPckVsZW1lbnRcbiAqIEByZXR1cm4gez9zdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIG1zZyhtYXAsIGxhbmdPckVsZW1lbnQpIHtcbiAgY29uc3QgbGFuZyA9XG4gICAgICAhbGFuZ09yRWxlbWVudCA/ICcnIDpcbiAgICAgIHR5cGVvZiBsYW5nT3JFbGVtZW50ID09ICdzdHJpbmcnID8gbGFuZ09yRWxlbWVudCA6XG4gICAgICBsYW5nT3JFbGVtZW50LmxhbmcgfHxcbiAgICAgIGxhbmdPckVsZW1lbnQub3duZXJEb2N1bWVudCAmJlxuICAgICAgICAgIGxhbmdPckVsZW1lbnQub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQubGFuZztcbiAgbGV0IHNlYXJjaCA9IChsYW5nICYmIGxhbmcudG9Mb3dlckNhc2UoKSB8fCAnZW4nKS5yZXBsYWNlKC9fL2csICctJyk7XG4gIHdoaWxlIChzZWFyY2gpIHtcbiAgICBpZiAoc2VhcmNoIGluIG1hcCkge1xuICAgICAgcmV0dXJuIG1hcFtzZWFyY2hdO1xuICAgIH1cbiAgICBjb25zdCBkYXNoID0gc2VhcmNoLmxhc3RJbmRleE9mKCctJyk7XG4gICAgc2VhcmNoID0gZGFzaCAhPSAtMSA/IHNlYXJjaC5zdWJzdHJpbmcoMCwgZGFzaCkgOiAnJztcbiAgfVxuICAvLyBcImVuXCIgaXMgYWx3YXlzIGRlZmF1bHQuXG4gIHJldHVybiBtYXBbJ2VuJ107XG59XG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgc3RyaW5nPn0gKi9cbmNvbnN0IFRJVExFX0xBTkdfTUFQID0ge1xuICAnZW4nOiAnU3Vic2NyaWJlIHdpdGggR29vZ2xlJyxcbiAgJ2FyJzogJ9in2YTYp9i02KrYsdin2YMg2LnYqNixIEdvb2dsZScsXG4gICdkZSc6ICdBYm9ubmllcmVuIG1pdCBHb29nbGUnLFxuICAnZXMnOiAnU3VzY3LDrWJldGUgY29uIEdvb2dsZScsXG4gICdlcy1sYXRhbSc6ICdTdXNjcmliaXJzZSBjb24gR29vZ2xlJyxcbiAgJ2VzLWxhdG4nOiAnU3VzY3JpYmlyc2UgY29uIEdvb2dsZScsXG4gICdmcic6ICdTXFwnYWJvbm5lciBhdmVjIEdvb2dsZScsXG4gICdoaSc6ICdHb29nbGUg4KSV4KWAIOCkuOCkpuCkuOCljeCkr+CkpOCkviDgpLLgpYfgpIInLFxuICAnaWQnOiAnQmVybGFuZ2dhbmFuIGRlbmdhbiBHb29nbGUnLFxuICAnaXQnOiAnQWJib25hdGkgY29uIEdvb2dsZScsXG4gICdqcCc6ICdHb29nbGUg44Gn6LO86KqtJyxcbiAgJ2tvJzogJ0dvb2dsZSDsnYQo66W8KSDthrXtlbQg6rWs64+FJyxcbiAgJ21zJzogJ0xhbmdnYW4gZGVuZ2FuIEdvb2dsZScsXG4gICdubCc6ICdBYm9ubmVyZW4gbWV0IEdvb2dsZScsXG4gICdubyc6ICdBYm9ubmVyIG1lZCBHb29nbGUnLFxuICAncGwnOiAnU3Vic2tyeWJ1aiB6IEdvb2dsZScsXG4gICdwdCc6ICdTdWJzY3JldmVyIGNvbSBvIEdvb2dsZScsXG4gICdwdC1icic6ICdGYcOnYSBzdWEgYXNzaW5hdHVyYSBjb20gR29vZ2xlJyxcbiAgJ3J1JzogJ9Cf0L7QtNC/0LjRiNC40YLQtdGB0Ywg0YfQtdGA0LXQtyBHb29nbGUnLFxuICAnc2UnOiAnUHJlbnVtZXJlcmEgbWVkIEdvb2dsZScsXG4gICd0aCc6ICfguKrguKHguLHguITguKPguKPguLHguJrguILguYnguK3guKHguLnguKXguJTguYnguKfguKIgR29vZ2xlJyxcbiAgJ3RyJzogJ0dvb2dsZSBpbGUgYWJvbmUgb2x1bicsXG4gICd1ayc6ICfQn9GW0LTQv9C40YHQsNGC0LjRgdGPINGH0LXRgNC10LcgR29vZ2xlJyxcbiAgJ3poLXR3JzogJ+mAj+mBjiBHb29nbGUg6KiC6ZaxJyxcbn07XG5cblxuLyoqXG4gKiBUaGUgYnV0dG9uIHN0eWxlc2hlZXQgY2FuIGJlIGZvdW5kIGluIHRoZSBgL2Fzc2V0cy9zd2ctYnV0dG9uLmNzc2AuXG4gKiBJdCdzIHByb2R1Y2VkIGJ5IHRoZSBgYXNzZXRzOnN3Zy1idXR0b25gIGd1bHAgdGFzayBhbmQgZGVwbG95ZWQgdG9cbiAqIGBodHRwczovL25ld3MuZ29vZ2xlLmNvbS9zd2cvanMvdjEvc3dnLWJ1dHRvbi5jc3NgLlxuICovXG5jbGFzcyBCdXR0b25BcGkge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuLi9tb2RlbC9kb2MuRG9jfSBkb2NcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRvYykge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9tb2RlbC9kb2MuRG9jfSAqL1xuICAgIHRoaXMuZG9jXyA9IGRvYztcbiAgfVxuXG4gIC8qKlxuICAgKi9cbiAgaW5pdCgpIHtcbiAgICBjb25zdCBoZWFkID0gdGhpcy5kb2NfLmdldEhlYWQoKTtcbiAgICBpZiAoIWhlYWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB1cmwgPSAnaHR0cHM6Ly9uZXdzLmdvb2dsZS5jb20vc3dnL2pzL3YxL3N3Zy1idXR0b24uY3NzJztcbiAgICBjb25zdCBleGlzdGluZyA9IGhlYWQucXVlcnlTZWxlY3RvcihgbGlua1tocmVmPVwiJHt1cmx9XCJdYCk7XG4gICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIGhyZWY9XCIuLi5cIiB0eXBlPVwidGV4dC9jc3NcIj5cbiAgICBoZWFkLmFwcGVuZENoaWxkKGNyZWF0ZUVsZW1lbnQodGhpcy5kb2NfLmdldFdpbigpLmRvY3VtZW50LCAnbGluaycsIHtcbiAgICAgICdyZWwnOiAnc3R5bGVzaGVldCcsXG4gICAgICAndHlwZSc6ICd0ZXh0L2NzcycsXG4gICAgICAnaHJlZic6IHVybCxcbiAgICB9KSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshT2JqZWN0fGZ1bmN0aW9uKCl9IG9wdGlvbnNPckNhbGxiYWNrXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKT19IG9wdF9jYWxsYmFja1xuICAgKiBAcmV0dXJuIHshRWxlbWVudH1cbiAgICovXG4gIGNyZWF0ZShvcHRpb25zT3JDYWxsYmFjaywgb3B0X2NhbGxiYWNrKSB7XG4gICAgY29uc3QgYnV0dG9uID0gY3JlYXRlRWxlbWVudCh0aGlzLmRvY18uZ2V0V2luKCkuZG9jdW1lbnQsICdidXR0b24nLCB7fSk7XG4gICAgcmV0dXJuIHRoaXMuYXR0YWNoKGJ1dHRvbiwgb3B0aW9uc09yQ2FsbGJhY2ssIG9wdF9jYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudH0gYnV0dG9uXG4gICAqIEBwYXJhbSB7IU9iamVjdHxmdW5jdGlvbigpfSBvcHRpb25zT3JDYWxsYmFja1xuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCk9fSBvcHRfY2FsbGJhY2tcbiAgICogQHJldHVybiB7IUVsZW1lbnR9XG4gICAqL1xuICBhdHRhY2goYnV0dG9uLCBvcHRpb25zT3JDYWxsYmFjaywgb3B0X2NhbGxiYWNrKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9XG4gICAgICAgIHR5cGVvZiBvcHRpb25zT3JDYWxsYmFjayAhPSAnZnVuY3Rpb24nID9cbiAgICAgICAgb3B0aW9uc09yQ2FsbGJhY2sgOiBudWxsO1xuICAgIGNvbnN0IGNhbGxiYWNrID0gLyoqIEB0eXBlIHtmdW5jdGlvbigpfSAqLyAoXG4gICAgICAgICh0eXBlb2Ygb3B0aW9uc09yQ2FsbGJhY2sgPT0gJ2Z1bmN0aW9uJyA/IG9wdGlvbnNPckNhbGxiYWNrIDogbnVsbCkgfHxcbiAgICAgICAgICAgIG9wdF9jYWxsYmFjayk7XG4gICAgbGV0IHRoZW1lID0gb3B0aW9ucyAmJiBvcHRpb25zWyd0aGVtZSddO1xuICAgIGlmICh0aGVtZSAhPT0gJ2xpZ2h0JyAmJiB0aGVtZSAhPT0gJ2RhcmsnKSB7XG4gICAgICB0aGVtZSA9ICdsaWdodCc7XG4gICAgfVxuICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKGBzd2ctYnV0dG9uLSR7dGhlbWV9YCk7XG4gICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgncm9sZScsICdidXR0b24nKTtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zWydsYW5nJ10pIHtcbiAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2xhbmcnLCBvcHRpb25zWydsYW5nJ10pO1xuICAgIH1cbiAgICBidXR0b24uc2V0QXR0cmlidXRlKCd0aXRsZScsIG1zZyhUSVRMRV9MQU5HX01BUCwgYnV0dG9uKSB8fCAnJyk7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2FsbGJhY2spO1xuICAgIHJldHVybiBidXR0b247XG4gIH1cbn1cblxuY29uc3QgQ1NTID0gXCIuc3dnLWRpYWxvZywuc3dnLXRvYXN0e2JveC1zaXppbmc6Ym9yZGVyLWJveDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmYhaW1wb3J0YW50fS5zd2ctdG9hc3R7cG9zaXRpb246Zml4ZWQhaW1wb3J0YW50O2JvdHRvbTowIWltcG9ydGFudDttYXgtaGVpZ2h0OjQ2cHghaW1wb3J0YW50O3otaW5kZXg6MjE0NzQ4MzY0NyFpbXBvcnRhbnQ7Ym9yZGVyOm5vbmUhaW1wb3J0YW50fUBtZWRpYSAobWF4LWhlaWdodDo2NDBweCksIChtYXgtd2lkdGg6NjQwcHgpey5zd2ctZGlhbG9nLC5zd2ctdG9hc3R7d2lkdGg6NDgwcHghaW1wb3J0YW50O2xlZnQ6LTI0MHB4IWltcG9ydGFudDttYXJnaW4tbGVmdDo1MHZ3IWltcG9ydGFudDtib3JkZXItdG9wLWxlZnQtcmFkaXVzOjhweCFpbXBvcnRhbnQ7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6OHB4IWltcG9ydGFudDtib3gtc2hhZG93OjAgMXB4IDFweCByZ2JhKDYwLDY0LDY3LC4zKSwwIDFweCA0cHggMXB4IHJnYmEoNjAsNjQsNjcsLjE1KSFpbXBvcnRhbnR9fUBtZWRpYSAobWluLXdpZHRoOjY0MHB4KSBhbmQgKG1pbi1oZWlnaHQ6NjQwcHgpey5zd2ctZGlhbG9ne3dpZHRoOjYzMHB4IWltcG9ydGFudDtsZWZ0Oi0zMTVweCFpbXBvcnRhbnQ7bWFyZ2luLWxlZnQ6NTB2dyFpbXBvcnRhbnQ7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudCFpbXBvcnRhbnQ7Ym9yZGVyOm5vbmUhaW1wb3J0YW50fS5zd2ctdG9hc3R7bGVmdDowIWltcG9ydGFudH19QG1lZGlhIChtYXgtd2lkdGg6NDgwcHgpey5zd2ctZGlhbG9nLC5zd2ctdG9hc3R7d2lkdGg6MTAwJSFpbXBvcnRhbnQ7bGVmdDowIWltcG9ydGFudDtyaWdodDowIWltcG9ydGFudDttYXJnaW4tbGVmdDowIWltcG9ydGFudDtib3JkZXItdG9wLWxlZnQtcmFkaXVzOjhweCFpbXBvcnRhbnQ7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6OHB4IWltcG9ydGFudDtib3gtc2hhZG93OjAgMXB4IDFweCByZ2JhKDYwLDY0LDY3LC4zKSwwIDFweCA0cHggMXB4IHJnYmEoNjAsNjQsNjcsLjE1KSFpbXBvcnRhbnR9fVxcbi8qIyBzb3VyY2VVUkw9Ly4vc3JjL2NvbXBvbmVudHMvZGlhbG9nLmNzcyovXCI7XG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuXG4vKiogQGVudW0ge251bWJlcn0gKi9cbmNvbnN0IENhbGxiYWNrSWQgPSB7XG4gIEVOVElUTEVNRU5UUzogMSxcbiAgU1VCU0NSSUJFX1JFUVVFU1Q6IDIsXG4gIFNVQlNDUklCRV9SRVNQT05TRTogMyxcbiAgTE9HSU5fUkVRVUVTVDogNCxcbiAgTElOS19QUk9HUkVTUzogNSxcbiAgTElOS19DT01QTEVURTogNixcbiAgRkxPV19TVEFSVEVEOiA3LFxuICBGTE9XX0NBTkNFTEVEOiA4LFxufTtcblxuXG4vKipcbiAqL1xuY2xhc3MgQ2FsbGJhY2tzIHtcblxuICAvKipcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFPYmplY3Q8Q2FsbGJhY2tJZCwgZnVuY3Rpb24oKik+fSAqL1xuICAgIHRoaXMuY2FsbGJhY2tzXyA9IHt9O1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFPYmplY3Q8Q2FsbGJhY2tJZCwgKj59ICovXG4gICAgdGhpcy5yZXN1bHRCdWZmZXJfID0ge307XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbighUHJvbWlzZTwhLi4vYXBpL2VudGl0bGVtZW50cy5FbnRpdGxlbWVudHM+KX0gY2FsbGJhY2tcbiAgICovXG4gIHNldE9uRW50aXRsZW1lbnRzUmVzcG9uc2UoY2FsbGJhY2spIHtcbiAgICB0aGlzLnNldENhbGxiYWNrXyhDYWxsYmFja0lkLkVOVElUTEVNRU5UUywgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVByb21pc2U8IS4uL2FwaS9lbnRpdGxlbWVudHMuRW50aXRsZW1lbnRzPn0gcHJvbWlzZVxuICAgKi9cbiAgdHJpZ2dlckVudGl0bGVtZW50c1Jlc3BvbnNlKHByb21pc2UpIHtcbiAgICByZXR1cm4gdGhpcy50cmlnZ2VyXyhcbiAgICAgICAgQ2FsbGJhY2tJZC5FTlRJVExFTUVOVFMsXG4gICAgICAgIHByb21pc2UudGhlbihyZXMgPT4gcmVzLmNsb25lKCkpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaGFzRW50aXRsZW1lbnRzUmVzcG9uc2VQZW5kaW5nKCkge1xuICAgIHJldHVybiAhIXRoaXMucmVzdWx0QnVmZmVyX1tDYWxsYmFja0lkLkVOVElUTEVNRU5UU107XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbighLi4vYXBpL3N1YnNjcmlwdGlvbnMuTG9naW5SZXF1ZXN0KX0gY2FsbGJhY2tcbiAgICovXG4gIHNldE9uTG9naW5SZXF1ZXN0KGNhbGxiYWNrKSB7XG4gICAgdGhpcy5zZXRDYWxsYmFja18oQ2FsbGJhY2tJZC5MT0dJTl9SRVFVRVNULCBjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshLi4vYXBpL3N1YnNjcmlwdGlvbnMuTG9naW5SZXF1ZXN0fSByZXF1ZXN0XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGNhbGxiYWNrIGhhcyBiZWVuIGZvdW5kLlxuICAgKi9cbiAgdHJpZ2dlckxvZ2luUmVxdWVzdChyZXF1ZXN0KSB7XG4gICAgcmV0dXJuIHRoaXMudHJpZ2dlcl8oQ2FsbGJhY2tJZC5MT0dJTl9SRVFVRVNULCByZXF1ZXN0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IGNhbGxiYWNrXG4gICAqL1xuICBzZXRPbkxpbmtQcm9ncmVzcyhjYWxsYmFjaykge1xuICAgIHRoaXMuc2V0Q2FsbGJhY2tfKENhbGxiYWNrSWQuTElOS19QUk9HUkVTUywgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGNhbGxiYWNrIGhhcyBiZWVuIGZvdW5kLlxuICAgKi9cbiAgdHJpZ2dlckxpbmtQcm9ncmVzcygpIHtcbiAgICByZXR1cm4gdGhpcy50cmlnZ2VyXyhDYWxsYmFja0lkLkxJTktfUFJPR1JFU1MsIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqL1xuICByZXNldExpbmtQcm9ncmVzcygpIHtcbiAgICB0aGlzLnJlc2V0Q2FsbGJhY2tfKENhbGxiYWNrSWQuTElOS19QUk9HUkVTUyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbigpfSBjYWxsYmFja1xuICAgKi9cbiAgc2V0T25MaW5rQ29tcGxldGUoY2FsbGJhY2spIHtcbiAgICB0aGlzLnNldENhbGxiYWNrXyhDYWxsYmFja0lkLkxJTktfQ09NUExFVEUsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBjYWxsYmFjayBoYXMgYmVlbiBmb3VuZC5cbiAgICovXG4gIHRyaWdnZXJMaW5rQ29tcGxldGUoKSB7XG4gICAgcmV0dXJuIHRoaXMudHJpZ2dlcl8oQ2FsbGJhY2tJZC5MSU5LX0NPTVBMRVRFLCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaGFzTGlua0NvbXBsZXRlUGVuZGluZygpIHtcbiAgICByZXR1cm4gISF0aGlzLnJlc3VsdEJ1ZmZlcl9bQ2FsbGJhY2tJZC5MSU5LX0NPTVBMRVRFXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IGNhbGxiYWNrXG4gICAqL1xuICBzZXRPblN1YnNjcmliZVJlcXVlc3QoY2FsbGJhY2spIHtcbiAgICB0aGlzLnNldENhbGxiYWNrXyhDYWxsYmFja0lkLlNVQlNDUklCRV9SRVFVRVNULCBjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgY2FsbGJhY2sgaGFzIGJlZW4gZm91bmQuXG4gICAqL1xuICB0cmlnZ2VyU3Vic2NyaWJlUmVxdWVzdCgpIHtcbiAgICByZXR1cm4gdGhpcy50cmlnZ2VyXyhDYWxsYmFja0lkLlNVQlNDUklCRV9SRVFVRVNULCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaGFzU3Vic2NyaWJlUmVxdWVzdENhbGxiYWNrKCkge1xuICAgIHJldHVybiAhIXRoaXMuY2FsbGJhY2tzX1tDYWxsYmFja0lkLlNVQlNDUklCRV9SRVFVRVNUXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFQcm9taXNlPCEuLi9hcGkvc3Vic2NyaWJlLXJlc3BvbnNlLlN1YnNjcmliZVJlc3BvbnNlPil9IGNhbGxiYWNrXG4gICAqL1xuICBzZXRPblN1YnNjcmliZVJlc3BvbnNlKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5zZXRDYWxsYmFja18oQ2FsbGJhY2tJZC5TVUJTQ1JJQkVfUkVTUE9OU0UsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFQcm9taXNlPCEuLi9hcGkvc3Vic2NyaWJlLXJlc3BvbnNlLlN1YnNjcmliZVJlc3BvbnNlPn0gcmVzcG9uc2VQcm9taXNlXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGNhbGxiYWNrIGhhcyBiZWVuIGZvdW5kLlxuICAgKi9cbiAgdHJpZ2dlclN1YnNjcmliZVJlc3BvbnNlKHJlc3BvbnNlUHJvbWlzZSkge1xuICAgIHJldHVybiB0aGlzLnRyaWdnZXJfKFxuICAgICAgICBDYWxsYmFja0lkLlNVQlNDUklCRV9SRVNQT05TRSxcbiAgICAgICAgcmVzcG9uc2VQcm9taXNlLnRoZW4ocmVzID0+IHJlcy5jbG9uZSgpKSk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGhhc1N1YnNjcmliZVJlc3BvbnNlUGVuZGluZygpIHtcbiAgICByZXR1cm4gISF0aGlzLnJlc3VsdEJ1ZmZlcl9bQ2FsbGJhY2tJZC5TVUJTQ1JJQkVfUkVTUE9OU0VdO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oe2Zsb3c6IHN0cmluZywgZGF0YTogIU9iamVjdH0pfSBjYWxsYmFja1xuICAgKi9cbiAgc2V0T25GbG93U3RhcnRlZChjYWxsYmFjaykge1xuICAgIHRoaXMuc2V0Q2FsbGJhY2tfKENhbGxiYWNrSWQuRkxPV19TVEFSVEVELCBjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZsb3dcbiAgICogQHBhcmFtIHshT2JqZWN0PX0gb3B0X2RhdGFcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgY2FsbGJhY2sgaGFzIGJlZW4gZm91bmQuXG4gICAqL1xuICB0cmlnZ2VyRmxvd1N0YXJ0ZWQoZmxvdywgb3B0X2RhdGEpIHtcbiAgICByZXR1cm4gdGhpcy50cmlnZ2VyXyhDYWxsYmFja0lkLkZMT1dfU1RBUlRFRCwge1xuICAgICAgZmxvdyxcbiAgICAgIGRhdGE6IG9wdF9kYXRhIHx8IHt9LFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oe2Zsb3c6IHN0cmluZywgZGF0YTogIU9iamVjdH0pfSBjYWxsYmFja1xuICAgKi9cbiAgc2V0T25GbG93Q2FuY2VsZWQoY2FsbGJhY2spIHtcbiAgICB0aGlzLnNldENhbGxiYWNrXyhDYWxsYmFja0lkLkZMT1dfQ0FOQ0VMRUQsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmxvd1xuICAgKiBAcGFyYW0geyFPYmplY3Q9fSBvcHRfZGF0YVxuICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBjYWxsYmFjayBoYXMgYmVlbiBmb3VuZC5cbiAgICovXG4gIHRyaWdnZXJGbG93Q2FuY2VsZWQoZmxvdywgb3B0X2RhdGEpIHtcbiAgICByZXR1cm4gdGhpcy50cmlnZ2VyXyhDYWxsYmFja0lkLkZMT1dfQ0FOQ0VMRUQsIHtcbiAgICAgIGZsb3csXG4gICAgICBkYXRhOiBvcHRfZGF0YSB8fCB7fSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFDYWxsYmFja0lkfSBpZFxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKD8pfSBjYWxsYmFja1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc2V0Q2FsbGJhY2tfKGlkLCBjYWxsYmFjaykge1xuICAgIHRoaXMuY2FsbGJhY2tzX1tpZF0gPSBjYWxsYmFjaztcbiAgICAvLyBJZiByZXN1bHQgYWxyZWFkeSBleGlzdCwgZXhlY3V0ZSB0aGUgY2FsbGJhY2sgcmlnaHQgYXdheS5cbiAgICBpZiAoaWQgaW4gdGhpcy5yZXN1bHRCdWZmZXJfKSB7XG4gICAgICB0aGlzLmV4ZWN1dGVDYWxsYmFja18oaWQsIGNhbGxiYWNrLCB0aGlzLnJlc3VsdEJ1ZmZlcl9baWRdKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshQ2FsbGJhY2tJZH0gaWRcbiAgICogQHBhcmFtIHsqfSBkYXRhXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0cmlnZ2VyXyhpZCwgZGF0YSkge1xuICAgIHRoaXMucmVzdWx0QnVmZmVyX1tpZF0gPSBkYXRhO1xuICAgIGNvbnN0IGNhbGxiYWNrID0gdGhpcy5jYWxsYmFja3NfW2lkXTtcbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgIHRoaXMuZXhlY3V0ZUNhbGxiYWNrXyhpZCwgY2FsbGJhY2ssIGRhdGEpO1xuICAgIH1cbiAgICByZXR1cm4gISFjYWxsYmFjaztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFDYWxsYmFja0lkfSBpZFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcmVzZXRDYWxsYmFja18oaWQpIHtcbiAgICBpZiAoaWQgaW4gdGhpcy5yZXN1bHRCdWZmZXJfKSB7XG4gICAgICBkZWxldGUgdGhpcy5yZXN1bHRCdWZmZXJfW2lkXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshQ2FsbGJhY2tJZH0gaWRcbiAgICogQHBhcmFtIHtmdW5jdGlvbigqKX0gY2FsbGJhY2tcbiAgICogQHBhcmFtIHsqfSBkYXRhXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBleGVjdXRlQ2FsbGJhY2tfKGlkLCBjYWxsYmFjaywgZGF0YSkge1xuICAgIC8vIEFsd2F5cyBleGVjdXRlIGNhbGxiYWNrcyBpbiBhIG1pY3JvdGFzay5cbiAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHtcbiAgICAgIGNhbGxiYWNrKGRhdGEpO1xuICAgICAgdGhpcy5yZXNldENhbGxiYWNrXyhpZCk7XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbi8qKlxuICogYWJzdHJhY3QgVmlldyBDbGFzcy4gVXNlZCB0byByZW5kZXIgdGhlIGNvbnRlbnQgd2l0aGluIHRoZSBEaWFsb2cuIFRoZVxuICogZXh0ZW5kZWQgY2xhc3MgaGFzIGFjdHVhbCBjb250ZW50LlxuICogQGFic3RyYWN0XG4gKi9cbmNsYXNzIFZpZXcge1xuXG4gIC8qKlxuICAgKiBFbXB0eSBjb25zdHJ1Y3Rvci5cbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge31cblxuICAvKipcbiAgICogR2V0cyB0aGUgaWZyYW1lIGVsZW1lbnQuXG4gICAqIEByZXR1cm4geyFFbGVtZW50fVxuICAgKiBAYWJzdHJhY3RcbiAgICovXG4gIGdldEVsZW1lbnQoKSB7fVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuL2RpYWxvZy5EaWFsb2d9IHVudXNlZERpYWxvZ1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICogQGFic3RyYWN0XG4gICAqL1xuICBpbml0KHVudXNlZERpYWxvZykge31cblxuICAvKipcbiAgICogUmVzaXplcyB0aGUgY29udGVudC5cbiAgICovXG4gIHJlc2l6ZWQoKSB7XG4gICAgLy8gRG8gbm90aGluZyBieSBkZWZhdWx0LiBPdmVycmlkZSBpZiBuZWVkZWQuXG4gIH1cblxuICAvKipcbiAgICogQWNjZXB0IHRoZSByZXN1bHQuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKiBAYWJzdHJhY3RcbiAgICovXG4gIHdoZW5Db21wbGV0ZSgpIHt9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqIEBhYnN0cmFjdFxuICAgKi9cbiAgc2hvdWxkRmFkZUJvZHkoKSB7fVxufVxuXG4vKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cblxuLyoqXG4gKiBAcGFyYW0geyp9IGVycm9yXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc0NhbmNlbEVycm9yKGVycm9yKSB7XG4gIGlmICghZXJyb3IgfHwgdHlwZW9mIGVycm9yICE9ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiAoZXJyb3JbJ25hbWUnXSA9PT0gJ0Fib3J0RXJyb3InKTtcbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKiogQGNvbnN0IHshT2JqZWN0PHN0cmluZywgc3RyaW5nPn0gKi9cbmNvbnN0IGlmcmFtZUF0dHJpYnV0ZXMgPSB7XG4gICdmcmFtZWJvcmRlcic6ICcwJyxcbiAgJ3Njcm9sbGluZyc6ICdubycsXG59O1xuXG5cbi8qKlxuICogQ2xhc3MgdG8gYnVpbGQgYW5kIHJlbmRlciBBY3Rpdml0eSBpZnJhbWUgdmlldy5cbiAqL1xuY2xhc3MgQWN0aXZpdHlJZnJhbWVWaWV3IGV4dGVuZHMgVmlldyB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEBwYXJhbSB7IXdlYi1hY3Rpdml0aWVzL2FjdGl2aXR5LXBvcnRzLkFjdGl2aXR5UG9ydHN9IGFjdGl2aXR5UG9ydHNcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNyY1xuICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCA/Pj19IGFyZ3NcbiAgICogQHBhcmFtIHtib29sZWFuPX0gc2hvdWxkRmFkZUJvZHlcbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgICAgd2luLFxuICAgICAgYWN0aXZpdHlQb3J0cyxcbiAgICAgIHNyYyxcbiAgICAgIGFyZ3MsXG4gICAgICBzaG91bGRGYWRlQm9keSA9IGZhbHNlKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFXaW5kb3d9ICovXG4gICAgdGhpcy53aW5fID0gd2luO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IURvY3VtZW50fSAqL1xuICAgIHRoaXMuZG9jXyA9IHRoaXMud2luXy5kb2N1bWVudDtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFIVE1MSUZyYW1lRWxlbWVudH0gKi9cbiAgICB0aGlzLmlmcmFtZV8gPVxuICAgICAgICAvKiogQHR5cGUgeyFIVE1MSUZyYW1lRWxlbWVudH0gKi8gKFxuICAgICAgICAgICAgY3JlYXRlRWxlbWVudCh0aGlzLmRvY18sICdpZnJhbWUnLCBpZnJhbWVBdHRyaWJ1dGVzKSk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshd2ViLWFjdGl2aXRpZXMvYWN0aXZpdHktcG9ydHMuQWN0aXZpdHlQb3J0c30gKi9cbiAgICB0aGlzLmFjdGl2aXR5UG9ydHNfID0gYWN0aXZpdHlQb3J0cztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnNyY18gPSBzcmM7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshT2JqZWN0PHN0cmluZywgPz59ICovXG4gICAgdGhpcy5hcmdzXyA9IGFyZ3MgfHwge307XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtib29sZWFufSAqL1xuICAgIHRoaXMuc2hvdWxkRmFkZUJvZHlfID0gc2hvdWxkRmFkZUJvZHk7XG5cbiAgICAvKiogQHByaXZhdGUgez93ZWItYWN0aXZpdGllcy9hY3Rpdml0eS1wb3J0cy5BY3Rpdml0eUlmcmFtZVBvcnR9ICovXG4gICAgdGhpcy5wb3J0XyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIHs/ZnVuY3Rpb248IXdlYi1hY3Rpdml0aWVzL2FjdGl2aXR5LXBvcnRzLkFjdGl2aXR5SWZyYW1lUG9ydHwhUHJvbWlzZT59XG4gICAgICovXG4gICAgdGhpcy5wb3J0UmVzb2x2ZXJfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlIEBjb25zdFxuICAgICAqIHshUHJvbWlzZTwhd2ViLWFjdGl2aXRpZXMvYWN0aXZpdHktcG9ydHMuQWN0aXZpdHlJZnJhbWVQb3J0Pn1cbiAgICAgKi9cbiAgICB0aGlzLnBvcnRQcm9taXNlXyA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgdGhpcy5wb3J0UmVzb2x2ZXJfID0gcmVzb2x2ZTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0RWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5pZnJhbWVfO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBpbml0KGRpYWxvZykge1xuICAgIHJldHVybiB0aGlzLmFjdGl2aXR5UG9ydHNfLm9wZW5JZnJhbWUodGhpcy5pZnJhbWVfLCB0aGlzLnNyY18sIHRoaXMuYXJnc18pXG4gICAgICAgIC50aGVuKHBvcnQgPT4gdGhpcy5vbk9wZW5JZnJhbWVSZXNwb25zZV8ocG9ydCwgZGlhbG9nKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBpZiBkb2N1bWVudCBzaG91bGQgZmFkZSBmb3IgdGhpcyB2aWV3LlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgc2hvdWxkRmFkZUJvZHkoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2hvdWxkRmFkZUJvZHlfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IXdlYi1hY3Rpdml0aWVzL2FjdGl2aXR5LXBvcnRzLkFjdGl2aXR5SWZyYW1lUG9ydH0gcG9ydFxuICAgKiBAcGFyYW0geyEuLi9jb21wb25lbnRzL2RpYWxvZy5EaWFsb2d9IGRpYWxvZ1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIG9uT3BlbklmcmFtZVJlc3BvbnNlXyhwb3J0LCBkaWFsb2cpIHtcbiAgICB0aGlzLnBvcnRfID0gcG9ydDtcbiAgICB0aGlzLnBvcnRSZXNvbHZlcl8ocG9ydCk7XG5cbiAgICB0aGlzLnBvcnRfLm9uUmVzaXplUmVxdWVzdChoZWlnaHQgPT4ge1xuICAgICAgZGlhbG9nLnJlc2l6ZVZpZXcodGhpcywgaGVpZ2h0KTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLnBvcnRfLndoZW5SZWFkeSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCF3ZWItYWN0aXZpdGllcy9hY3Rpdml0eS1wb3J0cy5BY3Rpdml0eUlmcmFtZVBvcnQ+fVxuICAgKi9cbiAgcG9ydCgpIHtcbiAgICByZXR1cm4gdGhpcy5wb3J0UHJvbWlzZV87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshT2JqZWN0fSBkYXRhXG4gICAqL1xuICBtZXNzYWdlKGRhdGEpIHtcbiAgICB0aGlzLnBvcnQoKS50aGVuKHBvcnQgPT4ge1xuICAgICAgcG9ydC5tZXNzYWdlKGRhdGEpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIG1lc3NhZ2UgcmVjZWl2ZWQgYnkgdGhlIHBvcnQuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIU9iamVjdDxzdHJpbmcsIHN0cmluZ3xib29sZWFuPil9IGNhbGxiYWNrXG4gICAqL1xuICBvbk1lc3NhZ2UoY2FsbGJhY2spIHtcbiAgICB0aGlzLnBvcnQoKS50aGVuKHBvcnQgPT4ge1xuICAgICAgcG9ydC5vbk1lc3NhZ2UoY2FsbGJhY2spO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEFjY2VwdHMgcmVzdWx0cyBmcm9tIHRoZSBjYWxsZXIuXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCF3ZWItYWN0aXZpdGllcy9hY3Rpdml0eS1wb3J0cy5BY3Rpdml0eVJlc3VsdD59XG4gICAqL1xuICBhY2NlcHRSZXN1bHQoKSB7XG4gICAgcmV0dXJuIHRoaXMucG9ydCgpLnRoZW4ocG9ydCA9PiBwb3J0LmFjY2VwdFJlc3VsdCgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wbGV0ZXMgdGhlIGZsb3cuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgd2hlbkNvbXBsZXRlKCkge1xuICAgIHJldHVybiB0aGlzLmFjY2VwdFJlc3VsdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gY2FsbGJhY2tcbiAgICovXG4gIG9uQ2FuY2VsKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5hY2NlcHRSZXN1bHQoKS5jYXRjaChyZWFzb24gPT4ge1xuICAgICAgaWYgKGlzQ2FuY2VsRXJyb3IocmVhc29uKSkge1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfVxuICAgICAgdGhyb3cgcmVhc29uO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICByZXNpemVkKCkge1xuICAgIGlmICh0aGlzLnBvcnRfKSB7XG4gICAgICB0aGlzLnBvcnRfLnJlc2l6ZWQoKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbi8qKlxuICogVGhlIGhvbGRlciBvZiB0aGUgZW50aXRsZW1lbnRzIGZvciBhIHNlcnZpY2UuXG4gKi9cbmNsYXNzIEVudGl0bGVtZW50cyB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzZXJ2aWNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByYXdcbiAgICogQHBhcmFtIHshQXJyYXk8IUVudGl0bGVtZW50Pn0gZW50aXRsZW1lbnRzXG4gICAqIEBwYXJhbSB7P3N0cmluZ30gY3VycmVudFByb2R1Y3RcbiAgICogQHBhcmFtIHtmdW5jdGlvbighRW50aXRsZW1lbnRzKX0gYWNrSGFuZGxlclxuICAgKi9cbiAgY29uc3RydWN0b3Ioc2VydmljZSwgcmF3LCBlbnRpdGxlbWVudHMsIGN1cnJlbnRQcm9kdWN0LCBhY2tIYW5kbGVyKSB7XG4gICAgLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMuc2VydmljZSA9IHNlcnZpY2U7XG4gICAgLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMucmF3ID0gcmF3O1xuICAgIC8qKiBAY29uc3QgeyFBcnJheTwhRW50aXRsZW1lbnQ+fSAqL1xuICAgIHRoaXMuZW50aXRsZW1lbnRzID0gZW50aXRsZW1lbnRzO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7P3N0cmluZ30gKi9cbiAgICB0aGlzLnByb2R1Y3RfID0gY3VycmVudFByb2R1Y3Q7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7ZnVuY3Rpb24oIUVudGl0bGVtZW50cyl9ICovXG4gICAgdGhpcy5hY2tIYW5kbGVyXyA9IGFja0hhbmRsZXI7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IUVudGl0bGVtZW50c31cbiAgICovXG4gIGNsb25lKCkge1xuICAgIHJldHVybiBuZXcgRW50aXRsZW1lbnRzKFxuICAgICAgICB0aGlzLnNlcnZpY2UsXG4gICAgICAgIHRoaXMucmF3LFxuICAgICAgICB0aGlzLmVudGl0bGVtZW50cy5tYXAoZW50ID0+IGVudC5jbG9uZSgpKSxcbiAgICAgICAgdGhpcy5wcm9kdWN0XyxcbiAgICAgICAgdGhpcy5hY2tIYW5kbGVyXyk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IU9iamVjdH1cbiAgICovXG4gIGpzb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdzZXJ2aWNlJzogdGhpcy5zZXJ2aWNlLFxuICAgICAgJ2VudGl0bGVtZW50cyc6IHRoaXMuZW50aXRsZW1lbnRzLm1hcChpdGVtID0+IGl0ZW0uanNvbigpKSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X3NvdXJjZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgZW5hYmxlc1RoaXMob3B0X3NvdXJjZSkge1xuICAgIHJldHVybiB0aGlzLmVuYWJsZXModGhpcy5wcm9kdWN0Xywgb3B0X3NvdXJjZSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfc291cmNlXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBlbmFibGVzQW55KG9wdF9zb3VyY2UpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZW50aXRsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5lbnRpdGxlbWVudHNbaV0ucHJvZHVjdHMubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICghb3B0X3NvdXJjZSB8fCBvcHRfc291cmNlID09IHRoaXMuZW50aXRsZW1lbnRzW2ldLnNvdXJjZSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZXNlIGVudGl0bGVtZW50cyBlbmFibGUgdGhlIHNwZWNpZmllZCBwcm9kdWN0LCBvcHRpb25hbGx5IGFsc29cbiAgICogcmVzdHJpY3RpbmcgdGhlIHNvdXJjZS5cbiAgICogQHBhcmFtIHs/c3RyaW5nfSBwcm9kdWN0XG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X3NvdXJjZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgZW5hYmxlcyhwcm9kdWN0LCBvcHRfc291cmNlKSB7XG4gICAgaWYgKCFwcm9kdWN0KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiAhIXRoaXMuZ2V0RW50aXRsZW1lbnRGb3IocHJvZHVjdCwgb3B0X3NvdXJjZSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZmlyc3QgbWF0Y2hpbmcgZW50aXRsZW1lbnQgZm9yIHRoZSBjdXJyZW50IHByb2R1Y3QsXG4gICAqIG9wdGlvbmFsbHkgYWxzbyBtYXRjaGluZyB0aGUgc3BlY2lmaWVkIHNvdXJjZS5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfc291cmNlXG4gICAqIEByZXR1cm4gez9FbnRpdGxlbWVudH1cbiAgICovXG4gIGdldEVudGl0bGVtZW50Rm9yVGhpcyhvcHRfc291cmNlKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0RW50aXRsZW1lbnRGb3IodGhpcy5wcm9kdWN0Xywgb3B0X3NvdXJjZSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZmlyc3QgbWF0Y2hpbmcgZW50aXRsZW1lbnQgZm9yIHRoZSBzcGVjaWZpZWQgcHJvZHVjdCxcbiAgICogb3B0aW9uYWxseSBhbHNvIG1hdGNoaW5nIHRoZSBzcGVjaWZpZWQgc291cmNlLlxuICAgKiBAcGFyYW0gez9zdHJpbmd9IHByb2R1Y3RcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfc291cmNlXG4gICAqIEByZXR1cm4gez9FbnRpdGxlbWVudH1cbiAgICovXG4gIGdldEVudGl0bGVtZW50Rm9yKHByb2R1Y3QsIG9wdF9zb3VyY2UpIHtcbiAgICBpZiAocHJvZHVjdCAmJiB0aGlzLmVudGl0bGVtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZW50aXRsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICh0aGlzLmVudGl0bGVtZW50c1tpXS5lbmFibGVzKHByb2R1Y3QpICYmXG4gICAgICAgICAgICAoIW9wdF9zb3VyY2UgfHwgb3B0X3NvdXJjZSA9PSB0aGlzLmVudGl0bGVtZW50c1tpXS5zb3VyY2UpKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZW50aXRsZW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGZpcnN0IG1hdGNoaW5nIGVudGl0bGVtZW50IGZvciB0aGUgc3BlY2lmaWVkIHNvdXJjZSB3L29cbiAgICogbWF0Y2hpbmcgYW55IHNwZWNpZmljIHByb2R1Y3RzLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc291cmNlXG4gICAqIEByZXR1cm4gez9FbnRpdGxlbWVudH1cbiAgICovXG4gIGdldEVudGl0bGVtZW50Rm9yU291cmNlKHNvdXJjZSkge1xuICAgIGlmICh0aGlzLmVudGl0bGVtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZW50aXRsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICh0aGlzLmVudGl0bGVtZW50c1tpXS5zdWJzY3JpcHRpb25Ub2tlbiAmJlxuICAgICAgICAgICAgKHNvdXJjZSA9PSB0aGlzLmVudGl0bGVtZW50c1tpXS5zb3VyY2UpKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZW50aXRsZW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgM3Agc2l0ZSBzaG91bGQgY2FsbCB0aGlzIG1ldGhvZCB0byBhY2tub3dsZWRnZSB0aGF0IGl0IFwic2F3XCIgYW5kXG4gICAqIFwidW5kZXJzdG9vZFwiIGVudGl0bGVtZW50cy5cbiAgICovXG4gIGFjaygpIHtcbiAgICB0aGlzLmFja0hhbmRsZXJfKHRoaXMpO1xuICB9XG59XG5cblxuLyoqXG4gKiBUaGUgc2luZ2xlIGVudGl0bGVtZW50IG9iamVjdC5cbiAqL1xuY2xhc3MgRW50aXRsZW1lbnQge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc291cmNlXG4gICAqIEBwYXJhbSB7IUFycmF5PHN0cmluZz59IHByb2R1Y3RzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdWJzY3JpcHRpb25Ub2tlblxuICAgKi9cbiAgY29uc3RydWN0b3Ioc291cmNlLCBwcm9kdWN0cywgc3Vic2NyaXB0aW9uVG9rZW4pIHtcbiAgICAvKiogQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgLyoqIEBjb25zdCB7IUFycmF5PHN0cmluZz59ICovXG4gICAgdGhpcy5wcm9kdWN0cyA9IHByb2R1Y3RzO1xuICAgIC8qKiBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnN1YnNjcmlwdGlvblRva2VuID0gc3Vic2NyaXB0aW9uVG9rZW47XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IUVudGl0bGVtZW50fVxuICAgKi9cbiAgY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyBFbnRpdGxlbWVudChcbiAgICAgICAgdGhpcy5zb3VyY2UsXG4gICAgICAgIHRoaXMucHJvZHVjdHMuc2xpY2UoMCksXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uVG9rZW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFPYmplY3R9XG4gICAqL1xuICBqc29uKCkge1xuICAgIHJldHVybiB7XG4gICAgICAnc291cmNlJzogdGhpcy5zb3VyY2UsXG4gICAgICAncHJvZHVjdHMnOiB0aGlzLnByb2R1Y3RzLFxuICAgICAgJ3N1YnNjcmlwdGlvblRva2VuJzogdGhpcy5zdWJzY3JpcHRpb25Ub2tlbixcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7P3N0cmluZ30gcHJvZHVjdFxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgZW5hYmxlcyhwcm9kdWN0KSB7XG4gICAgaWYgKCFwcm9kdWN0KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnByb2R1Y3RzLmluY2x1ZGVzKHByb2R1Y3QpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7P09iamVjdH0ganNvblxuICAgKiBAcmV0dXJuIHshRW50aXRsZW1lbnR9XG4gICAqL1xuICBzdGF0aWMgcGFyc2VGcm9tSnNvbihqc29uKSB7XG4gICAgaWYgKCFqc29uKSB7XG4gICAgICBqc29uID0ge307XG4gICAgfVxuICAgIGNvbnN0IHNvdXJjZSA9IGpzb25bJ3NvdXJjZSddIHx8ICcnO1xuICAgIGNvbnN0IHByb2R1Y3RzID0ganNvblsncHJvZHVjdHMnXSB8fCBbXTtcbiAgICBjb25zdCBzdWJzY3JpcHRpb25Ub2tlbiA9IGpzb25bJ3N1YnNjcmlwdGlvblRva2VuJ107XG4gICAgcmV0dXJuIG5ldyBFbnRpdGxlbWVudChzb3VyY2UsIHByb2R1Y3RzLCBzdWJzY3JpcHRpb25Ub2tlbik7XG4gIH1cblxuICAvKipcbiAgICogVGhlIEpTT04gaXMgZXhwZWN0ZWQgaW4gb25lIG9mIHRoZSBmb3JtczpcbiAgICogLSBTaW5nbGUgZW50aXRsZW1lbnQ6IGB7cHJvZHVjdHM6IFtdLCAuLi59YC5cbiAgICogLSBBIGxpc3Qgb2YgZW50aXRsZW1lbnRzOiBgW3twcm9kdWN0czogW10sIC4uLn0sIHsuLi59XWAuXG4gICAqIEBwYXJhbSB7IU9iamVjdHwhQXJyYXk8IU9iamVjdD59IGpzb25cbiAgICogQHJldHVybiB7IUFycmF5PCFFbnRpdGxlbWVudD59XG4gICAqL1xuICBzdGF0aWMgcGFyc2VMaXN0RnJvbUpzb24oanNvbikge1xuICAgIGNvbnN0IGpzb25MaXN0ID0gQXJyYXkuaXNBcnJheShqc29uKSA/XG4gICAgICAgIC8qKiBAdHlwZSB7IUFycmF5PE9iamVjdD59ICovIChqc29uKSA6IFtqc29uXTtcbiAgICByZXR1cm4ganNvbkxpc3QubWFwKGpzb24gPT4gRW50aXRsZW1lbnQucGFyc2VGcm9tSnNvbihqc29uKSk7XG4gIH1cbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbi8qKlxuICovXG5jbGFzcyBVc2VyRGF0YSB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZFRva2VuXG4gICAqIEBwYXJhbSB7IU9iamVjdH0gZGF0YVxuICAgKi9cbiAgY29uc3RydWN0b3IoaWRUb2tlbiwgZGF0YSkge1xuICAgIC8qKiBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLmlkVG9rZW4gPSBpZFRva2VuO1xuICAgIC8qKiBAY29uc3QgeyFPYmplY3R9ICovXG4gICAgdGhpcy5kYXRhID0gZGF0YTtcblxuICAgIC8qKiBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLmlkID0gZGF0YVsnc3ViJ107XG4gICAgLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMuZW1haWwgPSBkYXRhWydlbWFpbCddO1xuICAgIC8qKiBAY29uc3Qge2Jvb2xlYW59ICovXG4gICAgdGhpcy5lbWFpbFZlcmlmaWVkID0gZGF0YVsnZW1haWxfdmVyaWZpZWQnXTtcbiAgICAvKiogQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5uYW1lID0gZGF0YVsnbmFtZSddO1xuICAgIC8qKiBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLmdpdmVuTmFtZSA9IGRhdGFbJ2dpdmVuX25hbWUnXTtcbiAgICAvKiogQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5mYW1pbHlOYW1lID0gZGF0YVsnZmFtaWx5X25hbWUnXTtcbiAgICAvKiogQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5waWN0dXJlVXJsID0gZGF0YVsncGljdHVyZSddO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFVc2VyRGF0YX1cbiAgICovXG4gIGNsb25lKCkge1xuICAgIHJldHVybiBuZXcgVXNlckRhdGEodGhpcy5pZFRva2VuLCB0aGlzLmRhdGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFPYmplY3R9XG4gICAqL1xuICBqc29uKCkge1xuICAgIHJldHVybiB7XG4gICAgICAnaWQnOiB0aGlzLmlkLFxuICAgICAgJ2VtYWlsJzogdGhpcy5lbWFpbCxcbiAgICAgICdlbWFpbFZlcmlmaWVkJzogdGhpcy5lbWFpbFZlcmlmaWVkLFxuICAgICAgJ25hbWUnOiB0aGlzLm5hbWUsXG4gICAgICAnZ2l2ZW5OYW1lJzogdGhpcy5naXZlbk5hbWUsXG4gICAgICAnZmFtaWx5TmFtZSc6IHRoaXMuZmFtaWx5TmFtZSxcbiAgICAgICdwaWN0dXJlVXJsJzogdGhpcy5waWN0dXJlVXJsLFxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbi8qKlxuICovXG5jbGFzcyBTdWJzY3JpYmVSZXNwb25zZSB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByYXdcbiAgICogQHBhcmFtIHshUHVyY2hhc2VEYXRhfSBwdXJjaGFzZURhdGFcbiAgICogQHBhcmFtIHs/VXNlckRhdGF9IHVzZXJEYXRhXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKTohUHJvbWlzZX0gY29tcGxldGVIYW5kbGVyXG4gICAqL1xuICBjb25zdHJ1Y3RvcihyYXcsIHB1cmNoYXNlRGF0YSwgdXNlckRhdGEsIGNvbXBsZXRlSGFuZGxlcikge1xuICAgIC8qKiBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnJhdyA9IHJhdztcbiAgICAvKiogQGNvbnN0IHshUHVyY2hhc2VEYXRhfSAqL1xuICAgIHRoaXMucHVyY2hhc2VEYXRhID0gcHVyY2hhc2VEYXRhO1xuICAgIC8qKiBAY29uc3Qgez9Vc2VyRGF0YX0gKi9cbiAgICB0aGlzLnVzZXJEYXRhID0gdXNlckRhdGE7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7ZnVuY3Rpb24oKTohUHJvbWlzZX0gKi9cbiAgICB0aGlzLmNvbXBsZXRlSGFuZGxlcl8gPSBjb21wbGV0ZUhhbmRsZXI7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IVN1YnNjcmliZVJlc3BvbnNlfVxuICAgKi9cbiAgY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyBTdWJzY3JpYmVSZXNwb25zZShcbiAgICAgICAgdGhpcy5yYXcsXG4gICAgICAgIHRoaXMucHVyY2hhc2VEYXRhLFxuICAgICAgICB0aGlzLnVzZXJEYXRhLFxuICAgICAgICB0aGlzLmNvbXBsZXRlSGFuZGxlcl8pO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFPYmplY3R9XG4gICAqL1xuICBqc29uKCkge1xuICAgIHJldHVybiB7XG4gICAgICAncHVyY2hhc2VEYXRhJzogdGhpcy5wdXJjaGFzZURhdGEuanNvbigpLFxuICAgICAgJ3VzZXJEYXRhJzogdGhpcy51c2VyRGF0YSA/IHRoaXMudXNlckRhdGEuanNvbigpIDogbnVsbCxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEFsbG93cyB0aGUgcmVjZWl2aW5nIHNpdGUgdG8gY29tcGxldGUvYWNrbm93bGVkZ2UgdGhhdCBpdCByZWdpc3RlcmVkXG4gICAqIHRoZSBzdWJzY3JpcHRpb24gcHVyY2hhc2UuIFRoZSB0eXBpY2FsIGFjdGlvbiB3b3VsZCBiZSB0byBjcmVhdGUgYW5cbiAgICogYWNjb3VudCAob3IgbWF0Y2ggYW4gZXhpc3Rpbmcgb25lKSBhbmQgYXNzb2NpYXRlZCB0aGUgcHVyY2hhc2Ugd2l0aFxuICAgKiB0aGF0IGFjY291bnQuXG4gICAqXG4gICAqIFN3RyB3aWxsIGRpc3BsYXkgcHJvZ3Jlc3MgaW5kaWNhdG9yIHVudGlsIHRoaXMgbWV0aG9kIGlzIGNhbGxlZCBhbmRcbiAgICogdXBvbiByZWNlaXZpbmcgdGhpcyBjYWxsIHdpbGwgc2hvdyB0aGUgY29uZmlybWF0aW9uIHRvIHRoZSB1c2VyLlxuICAgKiBUaGUgcHJvbWlzZSByZXR1cm5lZCBieSB0aGlzIG1ldGhvZCB3aWxsIHlpZWxkIG9uY2UgdGhlIHVzZXIgY2xvc2VzXG4gICAqIHRoZSBjb25maXJtYXRpb24uXG4gICAqXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgY29tcGxldGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29tcGxldGVIYW5kbGVyXygpO1xuICB9XG59XG5cblxuLyoqXG4gKi9cbmNsYXNzIFB1cmNoYXNlRGF0YSB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByYXdcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNpZ25hdHVyZVxuICAgKi9cbiAgY29uc3RydWN0b3IocmF3LCBzaWduYXR1cmUpIHtcbiAgICAvKiogQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5yYXcgPSByYXc7XG4gICAgLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMuc2lnbmF0dXJlID0gc2lnbmF0dXJlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFQdXJjaGFzZURhdGF9XG4gICAqL1xuICBjbG9uZSgpIHtcbiAgICByZXR1cm4gbmV3IFB1cmNoYXNlRGF0YSh0aGlzLnJhdywgdGhpcy5zaWduYXR1cmUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFPYmplY3R9XG4gICAqL1xuICBqc29uKCkge1xuICAgIHJldHVybiB7XG4gICAgICAnZGF0YSc6IHRoaXMucmF3LFxuICAgICAgJ3NpZ25hdHVyZSc6IHRoaXMuc2lnbmF0dXJlLFxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbi8qKlxuICovXG5jbGFzcyBEZWZlcnJlZEFjY291bnRDcmVhdGlvblJlc3BvbnNlIHtcblxuICAvKipcbiAgICogQHBhcmFtIHshRW50aXRsZW1lbnRzfSBlbnRpdGxlbWVudHNcbiAgICogQHBhcmFtIHshVXNlckRhdGF9IHVzZXJEYXRhXG4gICAqIEBwYXJhbSB7IVB1cmNoYXNlRGF0YX0gcHVyY2hhc2VEYXRhXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKTohUHJvbWlzZX0gY29tcGxldGVIYW5kbGVyXG4gICAqL1xuICBjb25zdHJ1Y3RvcihlbnRpdGxlbWVudHMsIHVzZXJEYXRhLCBwdXJjaGFzZURhdGEsIGNvbXBsZXRlSGFuZGxlcikge1xuICAgIC8qKiBAY29uc3QgeyFFbnRpdGxlbWVudHN9ICovXG4gICAgdGhpcy5lbnRpdGxlbWVudHMgPSBlbnRpdGxlbWVudHM7XG4gICAgLyoqIEBjb25zdCB7IVVzZXJEYXRhfSAqL1xuICAgIHRoaXMudXNlckRhdGEgPSB1c2VyRGF0YTtcbiAgICAvKiogQGNvbnN0IHshUHVyY2hhc2VEYXRhfSAqL1xuICAgIHRoaXMucHVyY2hhc2VEYXRhID0gcHVyY2hhc2VEYXRhO1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge2Z1bmN0aW9uKCk6IVByb21pc2V9ICovXG4gICAgdGhpcy5jb21wbGV0ZUhhbmRsZXJfID0gY29tcGxldGVIYW5kbGVyO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFEZWZlcnJlZEFjY291bnRDcmVhdGlvblJlc3BvbnNlfVxuICAgKi9cbiAgY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyBEZWZlcnJlZEFjY291bnRDcmVhdGlvblJlc3BvbnNlKFxuICAgICAgICB0aGlzLmVudGl0bGVtZW50cyxcbiAgICAgICAgdGhpcy51c2VyRGF0YSxcbiAgICAgICAgdGhpcy5wdXJjaGFzZURhdGEsXG4gICAgICAgIHRoaXMuY29tcGxldGVIYW5kbGVyXyk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IU9iamVjdH1cbiAgICovXG4gIGpzb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdlbnRpdGxlbWVudHMnOiB0aGlzLmVudGl0bGVtZW50cy5qc29uKCksXG4gICAgICAndXNlckRhdGEnOiB0aGlzLnVzZXJEYXRhLmpzb24oKSxcbiAgICAgICdwdXJjaGFzZURhdGEnOiB0aGlzLnB1cmNoYXNlRGF0YS5qc29uKCksXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbGxvd3MgdGhlIHJlY2VpdmluZyBzaXRlIHRvIGNvbXBsZXRlL2Fja25vd2xlZGdlIHRoYXQgaXQgcmVnaXN0ZXJlZFxuICAgKiB0aGUgc3Vic2NyaXB0aW9uIGluZm8uIFRoZSB0eXBpY2FsIGFjdGlvbiB3b3VsZCBiZSB0byBjcmVhdGUgYW5cbiAgICogYWNjb3VudCAob3IgbWF0Y2ggYW4gZXhpc3Rpbmcgb25lKSBhbmQgYXNzb2NpYXRlZCB0aGUgc3Vic2NyaXB0aW9uIHdpdGhcbiAgICogdGhhdCBhY2NvdW50LlxuICAgKlxuICAgKiBTd0cgd2lsbCBkaXNwbGF5IHByb2dyZXNzIGluZGljYXRvciB1bnRpbCB0aGlzIG1ldGhvZCBpcyBjYWxsZWQgYW5kXG4gICAqIHVwb24gcmVjZWl2aW5nIHRoaXMgY2FsbCB3aWxsIHNob3cgdGhlIGNvbmZpcm1hdGlvbiB0byB0aGUgdXNlci5cbiAgICogVGhlIHByb21pc2UgcmV0dXJuZWQgYnkgdGhpcyBtZXRob2Qgd2lsbCB5aWVsZCBvbmNlIHRoZSB1c2VyIGNsb3Nlc1xuICAgKiB0aGUgY29uZmlybWF0aW9uLlxuICAgKlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIGNvbXBsZXRlKCkge1xuICAgIHJldHVybiB0aGlzLmNvbXBsZXRlSGFuZGxlcl8oKTtcbiAgfVxufVxuXG4vKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQ2hhcmFjdGVyIG1hcHBpbmcgZnJvbSBiYXNlNjR1cmwgdG8gYmFzZTY0LlxuICogQGNvbnN0IHshT2JqZWN0PHN0cmluZywgc3RyaW5nPn1cbiAqL1xuY29uc3QgYmFzZTY0VXJsRGVjb2RlU3VicyA9IHsnLSc6ICcrJywgJ18nOiAnLycsICcuJzogJz0nfTtcblxuXG4vKipcbiAqIENvbnZlcnRzIGEgc3RyaW5nIHdoaWNoIGhvbGRzIDgtYml0IGNvZGUgcG9pbnRzLCBzdWNoIGFzIHRoZSByZXN1bHQgb2YgYXRvYixcbiAqIGludG8gYSBVaW50OEFycmF5IHdpdGggdGhlIGNvcnJlc3BvbmRpbmcgYnl0ZXMuXG4gKiBJZiB5b3UgaGF2ZSBhIHN0cmluZyBvZiBjaGFyYWN0ZXJzLCB5b3UgcHJvYmFibHkgd2FudCB0byBiZSB1c2luZyB1dGY4RW5jb2RlLlxuICogQHBhcmFtIHtzdHJpbmd9IHN0clxuICogQHJldHVybiB7IVVpbnQ4QXJyYXl9XG4gKi9cbmZ1bmN0aW9uIHN0cmluZ1RvQnl0ZXMoc3RyKSB7XG4gIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoc3RyLmxlbmd0aCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgY2hhckNvZGUgPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICBhc3NlcnQoY2hhckNvZGUgPD0gMjU1LCAnQ2hhcmFjdGVycyBtdXN0IGJlIGluIHJhbmdlIFswLDI1NV0nKTtcbiAgICBieXRlc1tpXSA9IGNoYXJDb2RlO1xuICB9XG4gIHJldHVybiBieXRlcztcbn1cblxuXG4vKipcbiAqIENvbnZlcnRzIGEgOC1iaXQgYnl0ZXMgYXJyYXkgaW50byBhIHN0cmluZ1xuICogQHBhcmFtIHshVWludDhBcnJheX0gYnl0ZXNcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gYnl0ZXNUb1N0cmluZyhieXRlcykge1xuICAvLyBJbnRlbnRpb25hbGx5IGF2b2lkcyBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5IHNvIHdlIGRvbid0IHN1ZmZlciBhXG4gIC8vIHN0YWNrIG92ZXJmbG93LiAjMTA0OTUsIGh0dHBzOi8vanNwZXJmLmNvbS9ieXRlc1RvU3RyaW5nLTJcbiAgY29uc3QgYXJyYXkgPSBuZXcgQXJyYXkoYnl0ZXMubGVuZ3RoKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkrKykge1xuICAgIGFycmF5W2ldID0gU3RyaW5nLmZyb21DaGFyQ29kZShieXRlc1tpXSk7XG4gIH1cbiAgcmV0dXJuIGFycmF5LmpvaW4oJycpO1xufVxuXG5cbi8qKlxuICogSW50ZXJwcmV0IGEgYnl0ZSBhcnJheSBhcyBhIFVURi04IHN0cmluZy5cbiAqIEBwYXJhbSB7IUJ1ZmZlclNvdXJjZX0gYnl0ZXNcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gdXRmOERlY29kZVN5bmMoYnl0ZXMpIHtcbiAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gbmV3IFRleHREZWNvZGVyKCd1dGYtOCcpLmRlY29kZShieXRlcyk7XG4gIH1cbiAgY29uc3QgYXNjaWlTdHJpbmcgPSBieXRlc1RvU3RyaW5nKG5ldyBVaW50OEFycmF5KGJ5dGVzLmJ1ZmZlciB8fCBieXRlcykpO1xuICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShhc2NpaVN0cmluZykpO1xufVxuXG5cbi8qKlxuICogVHVybiBhIHN0cmluZyBpbnRvIFVURi04IGJ5dGVzLlxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZ1xuICogQHJldHVybiB7IVVpbnQ4QXJyYXl9XG4gKi9cbmZ1bmN0aW9uIHV0ZjhFbmNvZGVTeW5jKHN0cmluZykge1xuICBpZiAodHlwZW9mIFRleHRFbmNvZGVyICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBuZXcgVGV4dEVuY29kZXIoJ3V0Zi04JykuZW5jb2RlKHN0cmluZyk7XG4gIH1cbiAgcmV0dXJuIHN0cmluZ1RvQnl0ZXModW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZykpKTtcbn1cblxuXG4vKipcbiAqIENvbnZlcnRzIGEgc3RyaW5nIHdoaWNoIGlzIGluIGJhc2U2NHVybCBlbmNvZGluZyBpbnRvIGEgVWludDhBcnJheVxuICogY29udGFpbmluZyB0aGUgZGVjb2RlZCB2YWx1ZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcbiAqIEByZXR1cm4geyFVaW50OEFycmF5fVxuICovXG5mdW5jdGlvbiBiYXNlNjRVcmxEZWNvZGVUb0J5dGVzKHN0cikge1xuICBjb25zdCBlbmNvZGVkID0gYXRvYihzdHIucmVwbGFjZSgvWy1fLl0vZywgY2ggPT4gYmFzZTY0VXJsRGVjb2RlU3Vic1tjaF0pKTtcbiAgcmV0dXJuIHN0cmluZ1RvQnl0ZXMoZW5jb2RlZCk7XG59XG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIFNpbXBsZSB3cmFwcGVyIGFyb3VuZCBKU09OLnBhcnNlIHRoYXQgY2FzdHMgdGhlIHJldHVybiB2YWx1ZVxuICogdG8gSnNvbk9iamVjdC5cbiAqIENyZWF0ZSBhIG5ldyB3cmFwcGVyIGlmIGFuIGFycmF5IHJldHVybiB2YWx1ZSBpcyBkZXNpcmVkLlxuICogQHBhcmFtIHsqfSBqc29uIEpTT04gc3RyaW5nIHRvIHBhcnNlXG4gKiBAcmV0dXJuIHs/SnNvbk9iamVjdHx1bmRlZmluZWR9IE1heSBiZSBleHRlbmQgdG8gcGFyc2UgYXJyYXlzLlxuICovXG5mdW5jdGlvbiBwYXJzZUpzb24oanNvbikge1xuICByZXR1cm4gLyoqIEB0eXBlIHs/SnNvbk9iamVjdH0gKi8oSlNPTi5wYXJzZSgvKiogQHR5cGUge3N0cmluZ30gKi8gKGpzb24pKSk7XG59XG5cbi8qKlxuICogUGFyc2VzIHRoZSBnaXZlbiBganNvbmAgc3RyaW5nIHdpdGhvdXQgdGhyb3dpbmcgYW4gZXhjZXB0aW9uIGlmIG5vdCB2YWxpZC5cbiAqIFJldHVybnMgYHVuZGVmaW5lZGAgaWYgcGFyc2luZyBmYWlscy5cbiAqIFJldHVybnMgdGhlIGBPYmplY3RgIGNvcnJlc3BvbmRpbmcgdG8gdGhlIEpTT04gc3RyaW5nIHdoZW4gcGFyc2luZyBzdWNjZWVkcy5cbiAqIEBwYXJhbSB7Kn0ganNvbiBKU09OIHN0cmluZyB0byBwYXJzZVxuICogQHBhcmFtIHtmdW5jdGlvbighRXJyb3IpPX0gb3B0X29uRmFpbGVkIE9wdGlvbmFsIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWRcbiAqICAgICB3aXRoIHRoZSBlcnJvciBpZiBwYXJzaW5nIGZhaWxzLlxuICogQHJldHVybiB7P0pzb25PYmplY3R8dW5kZWZpbmVkfSBNYXkgYmUgZXh0ZW5kIHRvIHBhcnNlIGFycmF5cy5cbiAqL1xuZnVuY3Rpb24gdHJ5UGFyc2VKc29uKGpzb24sIG9wdF9vbkZhaWxlZCkge1xuICB0cnkge1xuICAgIHJldHVybiBwYXJzZUpzb24oanNvbik7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAob3B0X29uRmFpbGVkKSB7XG4gICAgICBvcHRfb25GYWlsZWQoZSk7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbi8qKlxuICogUHJvdmlkZXMgaGVscGVyIG1ldGhvZHMgdG8gZGVjb2RlIGFuZCB2ZXJpZnkgSldUIHRva2Vucy5cbiAqL1xuY2xhc3MgSnd0SGVscGVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gIH1cblxuICAvKipcbiAgICogRGVjb2RlcyBKV1QgdG9rZW4gYW5kIHJldHVybnMgaXRzIHBheWxvYWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbmNvZGVkVG9rZW5cbiAgICogQHJldHVybiB7P0pzb25PYmplY3R8dW5kZWZpbmVkfVxuICAgKi9cbiAgZGVjb2RlKGVuY29kZWRUb2tlbikge1xuICAgIHJldHVybiB0aGlzLmRlY29kZUludGVybmFsXyhlbmNvZGVkVG9rZW4pLnBheWxvYWQ7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGVuY29kZWRUb2tlblxuICAgKiBAcmV0dXJuIHshSnd0VG9rZW5JbnRlcm5hbERlZn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGRlY29kZUludGVybmFsXyhlbmNvZGVkVG9rZW4pIHtcbiAgICAvLyBTZWUgaHR0cHM6Ly9qd3QuaW8vaW50cm9kdWN0aW9uL1xuICAgIC8qKlxuICAgICAqIFRocm93cyBlcnJvciBhYm91dCBpbnZhbGlkIHRva2VuLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGludmFsaWRUb2tlbigpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCB0b2tlbjogXCIke2VuY29kZWRUb2tlbn1cImApO1xuICAgIH1cblxuICAgIC8vIEVuY29kZWQgdG9rZW4gaGFzIHRocmVlIHBhcnRzOiBoZWFkZXIucGF5bG9hZC5zaWdcbiAgICAvLyBOb3RlISBUaGUgcGFkZGluZyBpcyBub3QgYWxsb3dlZCBieSBKV1Qgc3BlYzpcbiAgICAvLyBodHRwOi8vc2VsZi1pc3N1ZWQuaW5mby9kb2NzL2RyYWZ0LWdvbGFuZC1qc29uLXdlYi10b2tlbi0wMC5odG1sI3JmYy5zZWN0aW9uLjVcbiAgICBjb25zdCBwYXJ0cyA9IGVuY29kZWRUb2tlbi5zcGxpdCgnLicpO1xuICAgIGlmIChwYXJ0cy5sZW5ndGggIT0gMykge1xuICAgICAgaW52YWxpZFRva2VuKCk7XG4gICAgfVxuICAgIGNvbnN0IGhlYWRlclV0ZjhCeXRlcyA9IGJhc2U2NFVybERlY29kZVRvQnl0ZXMocGFydHNbMF0pO1xuICAgIGNvbnN0IHBheWxvYWRVdGY4Qnl0ZXMgPSBiYXNlNjRVcmxEZWNvZGVUb0J5dGVzKHBhcnRzWzFdKTtcbiAgICByZXR1cm4ge1xuICAgICAgaGVhZGVyOiB0cnlQYXJzZUpzb24odXRmOERlY29kZVN5bmMoaGVhZGVyVXRmOEJ5dGVzKSwgaW52YWxpZFRva2VuKSxcbiAgICAgIHBheWxvYWQ6IHRyeVBhcnNlSnNvbih1dGY4RGVjb2RlU3luYyhwYXlsb2FkVXRmOEJ5dGVzKSwgaW52YWxpZFRva2VuKSxcbiAgICAgIHZlcmlmaWFibGU6IGAke3BhcnRzWzBdfS4ke3BhcnRzWzFdfWAsXG4gICAgICBzaWc6IHBhcnRzWzJdLFxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cblxuLyoqIEBlbnVtIHtzdHJpbmd9ICovXG5jb25zdCBTdWJzY3JpcHRpb25GbG93cyA9IHtcbiAgU0hPV19PRkZFUlM6ICdzaG93T2ZmZXJzJyxcbiAgU0hPV19TVUJTQ1JJQkVfT1BUSU9OOiAnc2hvd1N1YnNjcmliZU9wdGlvbicsXG4gIFNIT1dfQUJCUlZfT0ZGRVI6ICdzaG93QWJicnZPZmZlcicsXG4gIFNVQlNDUklCRTogJ3N1YnNjcmliZScsXG4gIENPTVBMRVRFX0RFRkVSUkVEX0FDQ09VTlRfQ1JFQVRJT046ICdjb21wbGV0ZURlZmVycmVkQWNjb3VudENyZWF0aW9uJyxcbiAgTElOS19BQ0NPVU5UOiAnbGlua0FjY291bnQnLFxuICBTSE9XX0xPR0lOX1BST01QVDogJ3Nob3dMb2dpblByb21wdCcsXG4gIFNIT1dfTE9HSU5fTk9USUZJQ0FUSU9OOiAnc2hvd0xvZ2luTm90aWZpY2F0aW9uJyxcbn07XG5cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5jb25zdCBXaW5kb3dPcGVuTW9kZSA9IHtcbiAgQVVUTzogJ2F1dG8nLFxuICBSRURJUkVDVDogJ3JlZGlyZWN0Jyxcbn07XG5cblxuLyoqXG4gKiBAcmV0dXJuIHshQ29uZmlnfVxuICovXG5mdW5jdGlvbiBkZWZhdWx0Q29uZmlnKCkge1xuICByZXR1cm4ge1xuICAgIHdpbmRvd09wZW5Nb2RlOiBXaW5kb3dPcGVuTW9kZS5BVVRPLFxuICB9O1xufVxuXG4vKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cblxuLyoqXG4gKiBDYWNoZWQgYS10YWcgdG8gYXZvaWQgbWVtb3J5IGFsbG9jYXRpb24gZHVyaW5nIFVSTCBwYXJzaW5nLlxuICogQHR5cGUge0hUTUxBbmNob3JFbGVtZW50fVxuICovXG5sZXQgYTtcblxuXG4vKipcbiAqIFdlIGNhY2hlZCBhbGwgcGFyc2VkIFVSTHMuIEFzIG9mIG5vdyB0aGVyZSBhcmUgbm8gdXNlIGNhc2VzXG4gKiBvZiBBTVAgZG9jcyB0aGF0IHdvdWxkIGV2ZXIgcGFyc2UgYW4gYWN0dWFsIGxhcmdlIG51bWJlciBvZiBVUkxzLFxuICogYnV0IHdlIG9mdGVuIHBhcnNlIHRoZSBzYW1lIG9uZSBvdmVyIGFuZCBvdmVyIGFnYWluLlxuICogQHR5cGUge09iamVjdDxzdHJpbmcsICFMb2NhdGlvbkRlZj59XG4gKi9cbmxldCBjYWNoZTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgTG9jYXRpb24tbGlrZSBvYmplY3QgZm9yIHRoZSBnaXZlbiBVUkwuIElmIGl0IGlzIHJlbGF0aXZlLFxuICogdGhlIFVSTCBnZXRzIHJlc29sdmVkLlxuICogQ29uc2lkZXIgdGhlIHJldHVybmVkIG9iamVjdCBpbW11dGFibGUuIFRoaXMgaXMgZW5mb3JjZWQgZHVyaW5nXG4gKiB0ZXN0aW5nIGJ5IGZyZWV6aW5nIHRoZSBvYmplY3QuXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfbm9jYWNoZVxuICogQHJldHVybiB7IUxvY2F0aW9uRGVmfVxuICovXG5mdW5jdGlvbiBwYXJzZVVybCQxKHVybCwgb3B0X25vY2FjaGUpIHtcbiAgaWYgKCFhKSB7XG4gICAgYSA9IC8qKiBAdHlwZSB7IUhUTUxBbmNob3JFbGVtZW50fSAqLyAoc2VsZi5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJykpO1xuICAgIGNhY2hlID0gc2VsZi5VcmxDYWNoZSB8fCAoc2VsZi5VcmxDYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCkpO1xuICB9XG5cbiAgY29uc3QgZnJvbUNhY2hlID0gY2FjaGVbdXJsXTtcbiAgaWYgKGZyb21DYWNoZSkge1xuICAgIHJldHVybiBmcm9tQ2FjaGU7XG4gIH1cblxuICBjb25zdCBpbmZvID0gcGFyc2VVcmxXaXRoQShhLCB1cmwpO1xuXG4gIHJldHVybiBjYWNoZVt1cmxdID0gaW5mbztcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgTG9jYXRpb24tbGlrZSBvYmplY3QgZm9yIHRoZSBnaXZlbiBVUkwuIElmIGl0IGlzIHJlbGF0aXZlLFxuICogdGhlIFVSTCBnZXRzIHJlc29sdmVkLlxuICogQHBhcmFtIHshSFRNTEFuY2hvckVsZW1lbnR9IGFcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEByZXR1cm4geyFMb2NhdGlvbkRlZn1cbiAqL1xuZnVuY3Rpb24gcGFyc2VVcmxXaXRoQShhLCB1cmwpIHtcbiAgYS5ocmVmID0gdXJsO1xuXG4gIC8vIElFMTEgZG9lc24ndCBwcm92aWRlIGZ1bGwgVVJMIGNvbXBvbmVudHMgd2hlbiBwYXJzaW5nIHJlbGF0aXZlIFVSTHMuXG4gIC8vIEFzc2lnbmluZyB0byBpdHNlbGYgYWdhaW4gZG9lcyB0aGUgdHJpY2suXG4gIGlmICghYS5wcm90b2NvbCkge1xuICAgIGEuaHJlZiA9IGEuaHJlZjtcbiAgfVxuXG4gIC8qKiBAdHlwZSB7IUxvY2F0aW9uRGVmfSAqL1xuICBjb25zdCBpbmZvID0ge1xuICAgIGhyZWY6IGEuaHJlZixcbiAgICBwcm90b2NvbDogYS5wcm90b2NvbCxcbiAgICBob3N0OiBhLmhvc3QsXG4gICAgaG9zdG5hbWU6IGEuaG9zdG5hbWUsXG4gICAgcG9ydDogYS5wb3J0ID09ICcwJyA/ICcnIDogYS5wb3J0LFxuICAgIHBhdGhuYW1lOiBhLnBhdGhuYW1lLFxuICAgIHNlYXJjaDogYS5zZWFyY2gsXG4gICAgaGFzaDogYS5oYXNoLFxuICAgIG9yaWdpbjogJycsIC8vIFNldCBiZWxvdy5cbiAgfTtcblxuICAvLyBTb21lIElFMTEgc3BlY2lmaWMgcG9seWZpbGxzLlxuICAvLyAxKSBJRTExIHN0cmlwcyBvdXQgdGhlIGxlYWRpbmcgJy8nIGluIHRoZSBwYXRobmFtZS5cbiAgaWYgKGluZm8ucGF0aG5hbWVbMF0gIT09ICcvJykge1xuICAgIGluZm8ucGF0aG5hbWUgPSAnLycgKyBpbmZvLnBhdGhuYW1lO1xuICB9XG5cbiAgLy8gMikgRm9yIFVSTHMgd2l0aCBpbXBsaWNpdCBwb3J0cywgSUUxMSBwYXJzZXMgdG8gZGVmYXVsdCBwb3J0cyB3aGlsZVxuICAvLyBvdGhlciBicm93c2VycyBsZWF2ZSB0aGUgcG9ydCBmaWVsZCBlbXB0eS5cbiAgaWYgKChpbmZvLnByb3RvY29sID09ICdodHRwOicgJiYgaW5mby5wb3J0ID09IDgwKSB8fFxuICAgICAgKGluZm8ucHJvdG9jb2wgPT0gJ2h0dHBzOicgJiYgaW5mby5wb3J0ID09IDQ0MykpIHtcbiAgICBpbmZvLnBvcnQgPSAnJztcbiAgICBpbmZvLmhvc3QgPSBpbmZvLmhvc3RuYW1lO1xuICB9XG5cbiAgLy8gRm9yIGRhdGEgVVJJIGEub3JpZ2luIGlzIGVxdWFsIHRvIHRoZSBzdHJpbmcgJ251bGwnIHdoaWNoIGlzIG5vdCB1c2VmdWwuXG4gIC8vIFdlIGluc3RlYWQgcmV0dXJuIHRoZSBhY3R1YWwgb3JpZ2luIHdoaWNoIGlzIHRoZSBmdWxsIFVSTC5cbiAgaWYgKGEub3JpZ2luICYmIGEub3JpZ2luICE9ICdudWxsJykge1xuICAgIGluZm8ub3JpZ2luID0gYS5vcmlnaW47XG4gIH0gZWxzZSBpZiAoaW5mby5wcm90b2NvbCA9PSAnZGF0YTonIHx8ICFpbmZvLmhvc3QpIHtcbiAgICBpbmZvLm9yaWdpbiA9IGluZm8uaHJlZjtcbiAgfSBlbHNlIHtcbiAgICBpbmZvLm9yaWdpbiA9IGluZm8ucHJvdG9jb2wgKyAnLy8nICsgaW5mby5ob3N0O1xuICB9XG4gIHJldHVybiBpbmZvO1xufVxuXG5cbi8qKlxuICogQWRkcyBhIHBhcmFtZXRlciB0byBhIHF1ZXJ5IHN0cmluZy5cbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXJhbVxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGFkZFF1ZXJ5UGFyYW0odXJsLCBwYXJhbSwgdmFsdWUpIHtcbiAgY29uc3QgcXVlcnlJbmRleCA9IHVybC5pbmRleE9mKCc/Jyk7XG4gIGNvbnN0IGZyYWdtZW50SW5kZXggPSB1cmwuaW5kZXhPZignIycpO1xuICBsZXQgZnJhZ21lbnQgPSAnJztcbiAgaWYgKGZyYWdtZW50SW5kZXggIT0gLTEpIHtcbiAgICBmcmFnbWVudCA9IHVybC5zdWJzdHJpbmcoZnJhZ21lbnRJbmRleCk7XG4gICAgdXJsID0gdXJsLnN1YnN0cmluZygwLCBmcmFnbWVudEluZGV4KTtcbiAgfVxuICBpZiAocXVlcnlJbmRleCA9PSAtMSkge1xuICAgIHVybCArPSAnPyc7XG4gIH0gZWxzZSBpZiAocXVlcnlJbmRleCA8IHVybC5sZW5ndGggLSAxKSB7XG4gICAgdXJsICs9ICcmJztcbiAgfVxuICB1cmwgKz0gZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtKSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XG4gIHJldHVybiB1cmwgKyBmcmFnbWVudDtcbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbi8qKiBAcHJpdmF0ZSBAY29uc3QgeyFBcnJheTxzdHJpbmc+fSAqL1xuY29uc3QgYWxsb3dlZE1ldGhvZHNfID0gWydHRVQnLCAnUE9TVCddO1xuXG4vKiogQHByaXZhdGUgQGVudW0ge251bWJlcn0gQWxsb3dlZCBmZXRjaCByZXNwb25zZXMuICovXG5jb25zdCBhbGxvd2VkRmV0Y2hUeXBlc18gPSB7XG4gIGRvY3VtZW50OiAxLFxuICB0ZXh0OiAyLFxufTtcblxuXG4vKipcbiAqIEEgY2xhc3MgdGhhdCBwb2x5ZmlsbHMgRmV0Y2ggQVBJLlxuICovXG5jbGFzcyBYaHIge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKi9cbiAgY29uc3RydWN0b3Iod2luKSB7XG4gICAgLyoqIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgICB0aGlzLndpbiA9IHdpbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBXZSB3YW50IHRvIGNhbGwgYGZldGNoX2AgdW5ib3VuZCBmcm9tIGFueSBjb250ZXh0IHNpbmNlIGl0IGNvdWxkXG4gICAqIGJlIGVpdGhlciB0aGUgbmF0aXZlIGZldGNoIG9yIG91ciBwb2x5ZmlsbC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlucHV0XG4gICAqIEBwYXJhbSB7IUZldGNoSW5pdERlZn0gaW5pdFxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhRmV0Y2hSZXNwb25zZT58IVByb21pc2U8IVJlc3BvbnNlPn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGZldGNoXyhpbnB1dCwgaW5pdCkge1xuICAgIC8vIFRPRE8oYXZpbWVodGEpOiBTaG91bGQgdGhlIHJlcXVlc3RzIGdvIHRocm91Z2ggd2hlbiBwYWdlIGlzIG5vdCB2aXNpYmxlP1xuICAgIGFzc2VydCh0eXBlb2YgaW5wdXQgPT0gJ3N0cmluZycsICdPbmx5IFVSTCBzdXBwb3J0ZWQ6ICVzJywgaW5wdXQpO1xuICAgIC8vIEluIHBhcnRpY3VsYXIsIEZpcmVmb3ggZG9lcyBub3QgdG9sZXJhdGUgYG51bGxgIHZhbHVlcyBmb3JcbiAgICAvLyBgY3JlZGVudGlhbHNgLlxuICAgIGNvbnN0IGNyZWRzID0gaW5pdC5jcmVkZW50aWFscztcbiAgICBhc3NlcnQoXG4gICAgICAgIGNyZWRzID09PSB1bmRlZmluZWQgfHwgY3JlZHMgPT0gJ2luY2x1ZGUnIHx8IGNyZWRzID09ICdvbWl0JyxcbiAgICAgICAgJ09ubHkgY3JlZGVudGlhbHM9aW5jbHVkZXxvbWl0IHN1cHBvcnQ6ICVzJywgY3JlZHMpO1xuICAgIC8vIEZhbGxiYWNrIHRvIHhociBwb2x5ZmlsbCBzaW5jZSBgZmV0Y2hgIGFwaSBkb2VzIG5vdCBzdXBwb3J0XG4gICAgLy8gcmVzcG9uc2VUeXBlID0gJ2RvY3VtZW50Jy4gV2UgZG8gdGhpcyBzbyB3ZSBkb24ndCBoYXZlIHRvIGRvIGFueSBwYXJzaW5nXG4gICAgLy8gYW5kIGRvY3VtZW50IGNvbnN0cnVjdGlvbiBvbiB0aGUgVUkgdGhyZWFkIHdoaWNoIHdvdWxkIGJlIGV4cGVuc2l2ZS5cbiAgICBpZiAoaW5pdC5yZXNwb25zZVR5cGUgPT0gJ2RvY3VtZW50Jykge1xuICAgICAgcmV0dXJuIGZldGNoUG9seWZpbGwoaW5wdXQsIGluaXQpO1xuICAgIH1cbiAgICByZXR1cm4gKHRoaXMud2luLmZldGNoIHx8IGZldGNoUG9seWZpbGwpLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlucHV0IFVSTFxuICAgKiBAcGFyYW0gez9GZXRjaEluaXREZWZ9IG9wdF9pbml0IEZldGNoIG9wdGlvbnMgb2JqZWN0LlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhRmV0Y2hSZXNwb25zZT59XG4gICAqL1xuICBmZXRjaChpbnB1dCwgb3B0X2luaXQpIHtcbiAgICAvLyBUT0RPIChhdmltZWh0YSk6IEZpZ3VyZSBvdXQgaWYgQ09SUyBuZWVkcyBiZSBoYW5kbGVkIHRoZSB3YXkgQU1QIGRvZXMgaXQuXG4gICAgY29uc3QgaW5pdCA9IHNldHVwSW5pdChvcHRfaW5pdCk7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hfKGlucHV0LCBpbml0KS50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLCByZWFzb24gPT4ge1xuICAgICAgY29uc3QgdGFyZ2V0T3JpZ2luID0gcGFyc2VVcmwkMShpbnB1dCkub3JpZ2luO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdYSFIgRmFpbGVkIGZldGNoaW5nJyArXG4gICAgICAgICAgYCAoJHt0YXJnZXRPcmlnaW59Ly4uLik6YCwgcmVhc29uICYmIHJlYXNvbi5tZXNzYWdlKTtcbiAgICB9KS50aGVuKHJlc3BvbnNlID0+IGFzc2VydFN1Y2Nlc3MocmVzcG9uc2UpKTtcbiAgfVxufVxuXG4vKipcbiAqIE5vcm1hbGl6ZWQgbWV0aG9kIG5hbWUgYnkgdXBwZXJjYXNpbmcuXG4gKiBAcGFyYW0ge3N0cmluZ3x1bmRlZmluZWR9IG1ldGhvZFxuICogQHJldHVybiB7c3RyaW5nfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gbm9ybWFsaXplTWV0aG9kXyhtZXRob2QpIHtcbiAgaWYgKG1ldGhvZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuICdHRVQnO1xuICB9XG4gIG1ldGhvZCA9IG1ldGhvZC50b1VwcGVyQ2FzZSgpO1xuXG4gIGFzc2VydChcbiAgICAgIGFsbG93ZWRNZXRob2RzXy5pbmNsdWRlcyhtZXRob2QpLFxuICAgICAgJ09ubHkgb25lIG9mICVzIGlzIGN1cnJlbnRseSBhbGxvd2VkLiBHb3QgJXMnLFxuICAgICAgYWxsb3dlZE1ldGhvZHNfLmpvaW4oJywgJyksXG4gICAgICBtZXRob2RcbiAgKTtcblxuICByZXR1cm4gbWV0aG9kO1xufVxuXG4vKipcbiAqIFNldHMgdXAgYW5kIG5vcm1hbGl6ZXMgdGhlIEZldGNoSW5pdERlZlxuICpcbiAqIEBwYXJhbSB7P0ZldGNoSW5pdERlZj19IG9wdF9pbml0IEZldGNoIG9wdGlvbnMgb2JqZWN0LlxuICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfYWNjZXB0IFRoZSBIVFRQIEFjY2VwdCBoZWFkZXIgdmFsdWUuXG4gKiBAcmV0dXJuIHshRmV0Y2hJbml0RGVmfVxuICovXG5mdW5jdGlvbiBzZXR1cEluaXQob3B0X2luaXQsIG9wdF9hY2NlcHQpIHtcbiAgY29uc3QgaW5pdCA9IG9wdF9pbml0IHx8IC8qKiBAdHlwZSB7RmV0Y2hJbml0RGVmfSAqLyAoe30pO1xuICBpbml0Lm1ldGhvZCA9IG5vcm1hbGl6ZU1ldGhvZF8oaW5pdC5tZXRob2QpO1xuICBpbml0LmhlYWRlcnMgPSBpbml0LmhlYWRlcnMgfHwge307XG4gIGlmIChvcHRfYWNjZXB0KSB7XG4gICAgaW5pdC5oZWFkZXJzWydBY2NlcHQnXSA9IG9wdF9hY2NlcHQ7XG4gIH1cbiAgcmV0dXJuIGluaXQ7XG59XG5cblxuLyoqXG4gKiBBIG1pbmltYWwgcG9seWZpbGwgb2YgRmV0Y2ggQVBJLiBJdCBvbmx5IHBvbHlmaWxscyB3aGF0IHdlIGN1cnJlbnRseSB1c2UuXG4gKlxuICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9HbG9iYWxGZXRjaC9mZXRjaFxuICpcbiAqIE5vdGljZSB0aGF0IHRoZSBcImZldGNoXCIgbWV0aG9kIGl0c2VsZiBpcyBub3QgZXhwb3J0ZWQgYXMgdGhhdCB3b3VsZCByZXF1aXJlXG4gKiB1cyB0byBpbW1lZGlhdGVseSBzdXBwb3J0IGEgbXVjaCB3aWRlIEFQSS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaW5wdXRcbiAqIEBwYXJhbSB7IUZldGNoSW5pdERlZn0gaW5pdFxuICogQHJldHVybiB7IVByb21pc2U8IUZldGNoUmVzcG9uc2U+fVxuICogQHByaXZhdGUgVmlzaWJsZSBmb3IgdGVzdGluZ1xuICovXG5mdW5jdGlvbiBmZXRjaFBvbHlmaWxsKGlucHV0LCBpbml0KSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICBjb25zdCB4aHIgPSBjcmVhdGVYaHJSZXF1ZXN0KGluaXQubWV0aG9kIHx8ICdHRVQnLCBpbnB1dCk7XG5cbiAgICBpZiAoaW5pdC5jcmVkZW50aWFscyA9PSAnaW5jbHVkZScpIHtcbiAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmIChpbml0LnJlc3BvbnNlVHlwZSBpbiBhbGxvd2VkRmV0Y2hUeXBlc18pIHtcbiAgICAgIHhoci5yZXNwb25zZVR5cGUgPSBpbml0LnJlc3BvbnNlVHlwZTtcbiAgICB9XG5cbiAgICBpZiAoaW5pdC5oZWFkZXJzKSB7XG4gICAgICBPYmplY3Qua2V5cyhpbml0LmhlYWRlcnMpLmZvckVhY2goZnVuY3Rpb24oaGVhZGVyKSB7XG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGhlYWRlciwgaW5pdC5oZWFkZXJzW2hlYWRlcl0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA8IC8qIFNUQVRVU19SRUNFSVZFRCAqLyAyKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh4aHIuc3RhdHVzIDwgMTAwIHx8IHhoci5zdGF0dXMgPiA1OTkpIHtcbiAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoYFVua25vd24gSFRUUCBzdGF0dXMgJHt4aHIuc3RhdHVzfWApKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBUT0RPKGR2b3l0ZW5rbyk6IFRoaXMgaXMgY3VycmVudGx5IHNpbXBsaWZpZWQ6IHdlIHdpbGwgd2FpdCBmb3IgdGhlXG4gICAgICAvLyB3aG9sZSBkb2N1bWVudCBsb2FkaW5nIHRvIGNvbXBsZXRlLiBUaGlzIGlzIGZpbmUgZm9yIHRoZSB1c2UgY2FzZXNcbiAgICAgIC8vIHdlIGhhdmUgbm93LCBidXQgbWF5IG5lZWQgdG8gYmUgcmVpbXBsZW1lbnRlZCBsYXRlci5cbiAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PSAvKiBDT01QTEVURSAqLyA0KSB7XG4gICAgICAgIHJlc29sdmUobmV3IEZldGNoUmVzcG9uc2UoeGhyKSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB4aHIub25lcnJvciA9ICgpID0+IHtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoJ05ldHdvcmsgZmFpbHVyZScpKTtcbiAgICB9O1xuICAgIHhoci5vbmFib3J0ID0gKCkgPT4ge1xuICAgICAgcmVqZWN0KG5ldyBFcnJvcignUmVxdWVzdCBhYm9ydGVkJykpO1xuICAgIH07XG5cbiAgICBpZiAoaW5pdC5tZXRob2QgPT0gJ1BPU1QnKSB7XG4gICAgICB4aHIuc2VuZChpbml0LmJvZHkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB4aHIuc2VuZCgpO1xuICAgIH1cbiAgfSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IG1ldGhvZFxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHJldHVybiB7IVhNTEh0dHBSZXF1ZXN0fVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlWGhyUmVxdWVzdChtZXRob2QsIHVybCkge1xuICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgLy8gVE9ETyhhdmltZWh0YSk6IElFIDgvOSBkb24ndCBzdXBwb3J0IFhIUiAod2l0aCBDT1JTKS4gVXNlIFhEUiBpbnN0ZWFkXG4gIC8vIGlmIHdlIHBsYW4gdG8gc3VwcG9ydCB0aG9zZSBicm93c2Vycy5cbiAgaWYgKCd3aXRoQ3JlZGVudGlhbHMnIGluIHhocikge1xuICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsLCB0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0NPUlMgaXMgbm90IHN1cHBvcnRlZCcpO1xuICB9XG4gIHJldHVybiB4aHI7XG59XG5cbi8qKlxuICogSWYgNDE1IG9yIGluIHRoZSA1eHggcmFuZ2UuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RhdHVzXG4gKi9cbmZ1bmN0aW9uIGlzUmV0cmlhYmxlKHN0YXR1cykge1xuICByZXR1cm4gc3RhdHVzID09IDQxNSB8fCAoc3RhdHVzID49IDUwMCAmJiBzdGF0dXMgPCA2MDApO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgcmVzcG9uc2UgaWYgc3VjY2Vzc2Z1bCBvciBvdGhlcndpc2UgdGhyb3dzIGFuIGVycm9yLlxuICogQHBhcmFtIHshRmV0Y2hSZXNwb25zZX0gcmVzcG9uc2VcbiAqIEByZXR1cm4geyFQcm9taXNlPCFGZXRjaFJlc3BvbnNlPn1cbiAqIEBwcml2YXRlIFZpc2libGUgZm9yIHRlc3RpbmdcbiAqL1xuZnVuY3Rpb24gYXNzZXJ0U3VjY2VzcyhyZXNwb25zZSkge1xuICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgfVxuXG4gICAgY29uc3Qge3N0YXR1c30gPSByZXNwb25zZTtcbiAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoYEhUVFAgZXJyb3IgJHtzdGF0dXN9YCk7XG4gICAgZXJyLnJldHJpYWJsZSA9IGlzUmV0cmlhYmxlKHN0YXR1cyk7XG4gICAgLy8gVE9ETyhAanJpZGdld2VsbCwgIzk0NDgpOiBDYWxsZXJzIHdobyBuZWVkIHRoZSByZXNwb25zZSBzaG91bGRcbiAgICAvLyBza2lwIHByb2Nlc3NpbmcuXG4gICAgZXJyLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgdGhyb3cgZXJyO1xuICB9KTtcbn1cblxuXG4vKipcbiAqIFJlc3BvbnNlIG9iamVjdCBpbiB0aGUgRmV0Y2ggQVBJLlxuICpcbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvR2xvYmFsRmV0Y2gvZmV0Y2hcbiAqL1xuY2xhc3MgRmV0Y2hSZXNwb25zZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFYTUxIdHRwUmVxdWVzdH0geGhyXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih4aHIpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshWE1MSHR0cFJlcXVlc3R9ICovXG4gICAgdGhpcy54aHJfID0geGhyO1xuXG4gICAgLyoqIEBjb25zdCB7bnVtYmVyfSAqL1xuICAgIHRoaXMuc3RhdHVzID0gdGhpcy54aHJfLnN0YXR1cztcblxuICAgIC8qKiBAY29uc3Qge2Jvb2xlYW59ICovXG4gICAgdGhpcy5vayA9IHRoaXMuc3RhdHVzID49IDIwMCAmJiB0aGlzLnN0YXR1cyA8IDMwMDtcblxuICAgIC8qKiBAY29uc3QgeyFGZXRjaFJlc3BvbnNlSGVhZGVyc30gKi9cbiAgICB0aGlzLmhlYWRlcnMgPSBuZXcgRmV0Y2hSZXNwb25zZUhlYWRlcnMoeGhyKTtcblxuICAgIC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLmJvZHlVc2VkID0gZmFsc2U7XG5cbiAgICAvKiogQHR5cGUgez9SZWFkYWJsZVN0cmVhbX0gKi9cbiAgICB0aGlzLmJvZHkgPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIGNvcHkgb2YgdGhlIHJlc3BvbnNlIGFuZCByZXR1cm4gaXQuXG4gICAqIEByZXR1cm4geyFGZXRjaFJlc3BvbnNlfVxuICAgKi9cbiAgY2xvbmUoKSB7XG4gICAgYXNzZXJ0KCF0aGlzLmJvZHlVc2VkLCAnQm9keSBhbHJlYWR5IHVzZWQnKTtcbiAgICByZXR1cm4gbmV3IEZldGNoUmVzcG9uc2UodGhpcy54aHJfKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmFpbnMgdGhlIHJlc3BvbnNlIGFuZCByZXR1cm5zIHRoZSB0ZXh0LlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTxzdHJpbmc+fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZHJhaW5UZXh0XygpIHtcbiAgICBhc3NlcnQoIXRoaXMuYm9keVVzZWQsICdCb2R5IGFscmVhZHkgdXNlZCcpO1xuICAgIHRoaXMuYm9keVVzZWQgPSB0cnVlO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy54aHJfLnJlc3BvbnNlVGV4dCk7XG4gIH1cblxuICAvKipcbiAgICogRHJhaW5zIHRoZSByZXNwb25zZSBhbmQgcmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSByZXNwb25zZVxuICAgKiB0ZXh0LlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTxzdHJpbmc+fVxuICAgKi9cbiAgdGV4dCgpIHtcbiAgICByZXR1cm4gdGhpcy5kcmFpblRleHRfKCk7XG4gIH1cblxuICAvKipcbiAgICogRHJhaW5zIHRoZSByZXNwb25zZSBhbmQgcmV0dXJucyB0aGUgSlNPTiBvYmplY3QuXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFKc29uT2JqZWN0Pn1cbiAgICovXG4gIGpzb24oKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2U8IUpzb25PYmplY3Q+fSAqLyAoXG4gICAgICAgIHRoaXMuZHJhaW5UZXh0XygpLnRoZW4ocGFyc2VKc29uKSk7XG4gIH1cblxuICAvKipcbiAgICogUmVhZHMgdGhlIHhociByZXNwb25zZVhNTC5cbiAgICogQHJldHVybiB7IVByb21pc2U8IURvY3VtZW50Pn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGRvY3VtZW50XygpIHtcbiAgICBhc3NlcnQoIXRoaXMuYm9keVVzZWQsICdCb2R5IGFscmVhZHkgdXNlZCcpO1xuICAgIHRoaXMuYm9keVVzZWQgPSB0cnVlO1xuICAgIGFzc2VydCh0aGlzLnhocl8ucmVzcG9uc2VYTUwsXG4gICAgICAgICdyZXNwb25zZVhNTCBzaG91bGQgZXhpc3QuIE1ha2Ugc3VyZSB0byByZXR1cm4gJyArXG4gICAgICAgICdDb250ZW50LVR5cGU6IHRleHQvaHRtbCBoZWFkZXIuJyk7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2U8IURvY3VtZW50Pn0gKi8gKFxuICAgICAgICBQcm9taXNlLnJlc29sdmUoYXNzZXJ0KHRoaXMueGhyXy5yZXNwb25zZVhNTCkpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEcmFpbnMgdGhlIHJlc3BvbnNlIGFuZCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHJlc3BvbnNlXG4gICAqIEFycmF5QnVmZmVyLlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhQXJyYXlCdWZmZXI+fVxuICAgKi9cbiAgYXJyYXlCdWZmZXIoKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2U8IUFycmF5QnVmZmVyPn0gKi8gKFxuICAgICAgICB0aGlzLmRyYWluVGV4dF8oKS50aGVuKHV0ZjhFbmNvZGVTeW5jKSk7XG4gIH1cbn1cblxuXG4vKipcbiAqIFByb3ZpZGVzIGFjY2VzcyB0byB0aGUgcmVzcG9uc2UgaGVhZGVycyBhcyBkZWZpbmVkIGluIHRoZSBGZXRjaCBBUEkuXG4gKiBAcHJpdmF0ZSBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICovXG5jbGFzcyBGZXRjaFJlc3BvbnNlSGVhZGVycyB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFYTUxIdHRwUmVxdWVzdH0geGhyXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih4aHIpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshWE1MSHR0cFJlcXVlc3R9ICovXG4gICAgdGhpcy54aHJfID0geGhyO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIGdldChuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMueGhyXy5nZXRSZXNwb25zZUhlYWRlcihuYW1lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaGFzKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy54aHJfLmdldFJlc3BvbnNlSGVhZGVyKG5hbWUpICE9IG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEhhdmUgdG8gcHV0IHRoZXNlIGluIHRoZSBtYXAgdG8gYXZvaWQgY29tcGlsZXIgb3B0aW1pemF0aW9uLiBEdWUgdG9cbiAqIG9wdGltaXphdGlvbiBpc3N1ZXMsIHRoaXMgbWFwIG9ubHkgYWxsb3dzIHByb3BlcnR5LXN0eWxlIGtleXMuIEUuZy4gXCJocjFcIixcbiAqIGFzIG9wcG9zZWQgdG8gXCIxaHJcIi5cbiAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgbnVtYmVyPn1cbiAqIEBwYWNrYWdlIFZpc2libGUgZm9yIHRlc3Rpbmcgb25seS5cbiAqL1xuY29uc3QgQ0FDSEVfS0VZUyA9IHtcbiAgJ25vY2FjaGUnOiAxLFxuICAnaHIxJzogMzYwMDAwMCwgIC8vIDFociA9IDEwMDAgKiA2MCAqIDYwXG4gICdocjEyJzogNDMyMDAwMDAsICAvLyAxMmhyID0gMTAwMCAqIDYwICogNjAgKiAxMlxufTtcblxuXG4vKipcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZmVPcmlnaW4oKSB7XG4gIHJldHVybiBwYXJzZVVybCQxKCdodHRwczovL25ld3MuZ29vZ2xlLmNvbScpLm9yaWdpbjtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgUmVsYXRpdmUgVVJMLCBlLmcuIFwiL3NlcnZpY2UxXCIuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBjb21wbGV0ZSBVUkwuXG4gKi9cbmZ1bmN0aW9uIHNlcnZpY2VVcmwodXJsKSB7XG4gIHJldHVybiAnaHR0cHM6Ly9uZXdzLmdvb2dsZS5jb20vc3dnL18vYXBpL3YxJyArIHVybDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgUmVsYXRpdmUgVVJMLCBlLmcuIFwiL29mZmVyc2lmcmFtZVwiLlxuICogQHBhcmFtIHtzdHJpbmc9fSBwcmVmaXhcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGNvbXBsZXRlIFVSTC5cbiAqL1xuZnVuY3Rpb24gZmVVcmwodXJsLCBwcmVmaXggPSAnJykge1xuICByZXR1cm4gZmVDYWNoZWQoJ2h0dHBzOi8vbmV3cy5nb29nbGUuY29tJyArIHByZWZpeCArICcvc3dnL18vdWkvdjEnICsgdXJsKTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgRkUgVVJMLlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgY29tcGxldGUgVVJMIGluY2x1ZGluZyBjYWNoZSBwYXJhbXMuXG4gKi9cbmZ1bmN0aW9uIGZlQ2FjaGVkKHVybCkge1xuICByZXR1cm4gYWRkUXVlcnlQYXJhbSh1cmwsICdfJywgY2FjaGVQYXJhbSgnaHIxJykpO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgPz59IGFyZ3NcbiAqIEByZXR1cm4geyFPYmplY3Q8c3RyaW5nLCA/Pn1cbiAqL1xuZnVuY3Rpb24gZmVBcmdzKGFyZ3MpIHtcbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24oYXJncywge1xuICAgICdfY2xpZW50JzogJ1N3RyAwLjEuMjIuMjMnLFxuICB9KTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBjYWNoZUtleVxuICogQHJldHVybiB7c3RyaW5nfVxuICogQHBhY2thZ2UgVmlzaWJsZSBmb3IgdGVzdGluZyBvbmx5LlxuICovXG5mdW5jdGlvbiBjYWNoZVBhcmFtKGNhY2hlS2V5KSB7XG4gIGxldCBwZXJpb2QgPSBDQUNIRV9LRVlTW2NhY2hlS2V5XTtcbiAgaWYgKHBlcmlvZCA9PSBudWxsKSB7XG4gICAgcGVyaW9kID0gMTtcbiAgfVxuICBpZiAocGVyaW9kID09PSAwKSB7XG4gICAgcmV0dXJuICdfJztcbiAgfVxuICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICByZXR1cm4gU3RyaW5nKHBlcmlvZCA8PSAxID8gbm93IDogTWF0aC5mbG9vcihub3cgLyBwZXJpb2QpKTtcbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5jb25zdCBQQVlfUkVRVUVTVF9JRCA9ICdzd2ctcGF5JztcblxuLyoqXG4gKiBAY29uc3QgeyFPYmplY3Q8c3RyaW5nLCBzdHJpbmc+fVxuICogQHBhY2thZ2UgVmlzaWJsZSBmb3IgdGVzdGluZyBvbmx5LlxuICovXG5jb25zdCBQQVlfT1JJR0lOID0ge1xuICAnUFJPRFVDVElPTic6ICdodHRwczovL3BheS5nb29nbGUuY29tJyxcbiAgJ1NBTkRCT1gnOiAnaHR0cHM6Ly9wYXkuc2FuZGJveC5nb29nbGUuY29tJyxcbn07XG5cblxuLyoqIEByZXR1cm4ge3N0cmluZ30gKi9cbmZ1bmN0aW9uIHBheU9yaWdpbigpIHtcbiAgcmV0dXJuIFBBWV9PUklHSU5bJ1BST0RVQ1RJT04nXTtcbn1cblxuLyoqIEByZXR1cm4ge3N0cmluZ30gKi9cbmZ1bmN0aW9uIHBheVVybCgpIHtcbiAgcmV0dXJuIGZlQ2FjaGVkKFBBWV9PUklHSU5bJ1BST0RVQ1RJT04nXSArICcvZ3AvcC91aS9wYXknKTtcbn1cblxuLyoqIEByZXR1cm4ge3N0cmluZ30gKi9cbmZ1bmN0aW9uIHBheURlY3J5cHRVcmwoKSB7XG4gIHJldHVybiBQQVlfT1JJR0lOWydQUk9EVUNUSU9OJ10gKyAnL2dwL3AvYXBpcy9idXlmbG93L3Byb2Nlc3MnO1xufVxuXG5cbi8qKlxuICogVGhlIGZsb3cgdG8gaW5pdGlhdGUgcGF5bWVudCBwcm9jZXNzLlxuICovXG5jbGFzcyBQYXlTdGFydEZsb3cge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuLi91dGlscy9wcmVjb25uZWN0LlByZWNvbm5lY3R9IHByZVxuICAgKi9cbiAgc3RhdGljIHByZWNvbm5lY3QocHJlKSB7XG4gICAgcHJlLnByZWZldGNoKHBheVVybCgpKTtcbiAgICBwcmUucHJlZmV0Y2goXG4gICAgICAgICdodHRwczovL3BheW1lbnRzLmdvb2dsZS5jb20vcGF5bWVudHMvdjQvanMvaW50ZWdyYXRvci5qcz9zcz1tZCcpO1xuICAgIHByZS5wcmVmZXRjaCgnaHR0cHM6Ly9jbGllbnRzMi5nb29nbGUuY29tL2dyL2dyX2Z1bGxfMi4wLjYuanMnKTtcbiAgICBwcmUucHJlY29ubmVjdCgnaHR0cHM6Ly93d3cuZ3N0YXRpYy5jb20vJyk7XG4gICAgcHJlLnByZWNvbm5lY3QoJ2h0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vJyk7XG4gICAgcHJlLnByZWNvbm5lY3QoJ2h0dHBzOi8vd3d3Lmdvb2dsZS5jb20vJyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshLi9kZXBzLkRlcHNEZWZ9IGRlcHNcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNrdVxuICAgKi9cbiAgY29uc3RydWN0b3IoZGVwcywgc2t1KSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4vZGVwcy5EZXBzRGVmfSAqL1xuICAgIHRoaXMuZGVwc18gPSBkZXBzO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IXdlYi1hY3Rpdml0aWVzL2FjdGl2aXR5LXBvcnRzLkFjdGl2aXR5UG9ydHN9ICovXG4gICAgdGhpcy5hY3Rpdml0eVBvcnRzXyA9IGRlcHMuYWN0aXZpdGllcygpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL21vZGVsL3BhZ2UtY29uZmlnLlBhZ2VDb25maWd9ICovXG4gICAgdGhpcy5wYWdlQ29uZmlnXyA9IGRlcHMucGFnZUNvbmZpZygpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2NvbXBvbmVudHMvZGlhbG9nLW1hbmFnZXIuRGlhbG9nTWFuYWdlcn0gKi9cbiAgICB0aGlzLmRpYWxvZ01hbmFnZXJfID0gZGVwcy5kaWFsb2dNYW5hZ2VyKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5za3VfID0gc2t1O1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyB0aGUgcGF5bWVudHMgZmxvdy5cbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBzdGFydCgpIHtcbiAgICAvLyBTdGFydC9jYW5jZWwgZXZlbnRzLlxuICAgIHRoaXMuZGVwc18uY2FsbGJhY2tzKCkudHJpZ2dlckZsb3dTdGFydGVkKFN1YnNjcmlwdGlvbkZsb3dzLlNVQlNDUklCRSwge1xuICAgICAgJ3NrdSc6IHRoaXMuc2t1XyxcbiAgICB9KTtcblxuICAgIC8vIFRPRE8oZHZveXRlbmtvKTogc3dpdGNoIHRvIGdwYXkgYXN5bmMgY2xpZW50LlxuICAgIGNvbnN0IGZvcmNlUmVkaXJlY3QgPVxuICAgICAgICB0aGlzLmRlcHNfLmNvbmZpZygpLndpbmRvd09wZW5Nb2RlID09IFdpbmRvd09wZW5Nb2RlLlJFRElSRUNUO1xuICAgIGNvbnN0IG9wZW5lciA9IHRoaXMuYWN0aXZpdHlQb3J0c18ub3BlbihcbiAgICAgICAgUEFZX1JFUVVFU1RfSUQsXG4gICAgICAgIHBheVVybCgpLFxuICAgICAgICBmb3JjZVJlZGlyZWN0ID8gJ190b3AnIDogJ19ibGFuaycsXG4gICAgICAgIGZlQXJncyh7XG4gICAgICAgICAgJ2FwaVZlcnNpb24nOiAxLFxuICAgICAgICAgICdhbGxvd2VkUGF5bWVudE1ldGhvZHMnOiBbJ0NBUkQnXSxcbiAgICAgICAgICAnZW52aXJvbm1lbnQnOiAnUFJPRFVDVElPTicsXG4gICAgICAgICAgJ3BsYXlFbnZpcm9ubWVudCc6ICdQUk9EJyxcbiAgICAgICAgICAnc3dnJzoge1xuICAgICAgICAgICAgJ3B1YmxpY2F0aW9uSWQnOiB0aGlzLnBhZ2VDb25maWdfLmdldFB1YmxpY2F0aW9uSWQoKSxcbiAgICAgICAgICAgICdza3VJZCc6IHRoaXMuc2t1XyxcbiAgICAgICAgICB9LFxuICAgICAgICB9KSwge30pO1xuICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8ucG9wdXBPcGVuZWQob3BlbmVyICYmIG9wZW5lci50YXJnZXRXaW4pO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxufVxuXG5cbi8qKlxuICogVGhlIGZsb3cgZm9yIHN1Y2Nlc3NmdWwgcGF5bWVudHMgY29tcGxldGlvbi5cbiAqL1xuY2xhc3MgUGF5Q29tcGxldGVGbG93IHtcblxuICAvKipcbiAgICogQHBhcmFtIHshLi9kZXBzLkRlcHNEZWZ9IGRlcHNcbiAgICovXG4gIHN0YXRpYyBjb25maWd1cmVQZW5kaW5nKGRlcHMpIHtcbiAgICBkZXBzLmFjdGl2aXRpZXMoKS5vblJlc3VsdChQQVlfUkVRVUVTVF9JRCwgcG9ydCA9PiB7XG4gICAgICBkZXBzLmRpYWxvZ01hbmFnZXIoKS5wb3B1cENsb3NlZCgpO1xuICAgICAgZGVwcy5lbnRpdGxlbWVudHNNYW5hZ2VyKCkuYmxvY2tOZXh0Tm90aWZpY2F0aW9uKCk7XG4gICAgICBjb25zdCBmbG93ID0gbmV3IFBheUNvbXBsZXRlRmxvdyhkZXBzKTtcbiAgICAgIGNvbnN0IHByb21pc2UgPSB2YWxpZGF0ZVBheVJlc3BvbnNlKFxuICAgICAgICAgIGRlcHMud2luKCksIHBvcnQsIGZsb3cuY29tcGxldGUuYmluZChmbG93KSk7XG4gICAgICBkZXBzLmNhbGxiYWNrcygpLnRyaWdnZXJTdWJzY3JpYmVSZXNwb25zZShwcm9taXNlKTtcbiAgICAgIHJldHVybiBwcm9taXNlLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICBmbG93LnN0YXJ0KHJlc3BvbnNlKTtcbiAgICAgIH0sIHJlYXNvbiA9PiB7XG4gICAgICAgIGlmIChpc0NhbmNlbEVycm9yKHJlYXNvbikpIHtcbiAgICAgICAgICBkZXBzLmNhbGxiYWNrcygpLnRyaWdnZXJGbG93Q2FuY2VsZWQoU3Vic2NyaXB0aW9uRmxvd3MuU1VCU0NSSUJFKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyByZWFzb247XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuL2RlcHMuRGVwc0RlZn0gZGVwc1xuICAgKi9cbiAgY29uc3RydWN0b3IoZGVwcykge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFXaW5kb3d9ICovXG4gICAgdGhpcy53aW5fID0gZGVwcy53aW4oKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuL2RlcHMuRGVwc0RlZn0gKi9cbiAgICB0aGlzLmRlcHNfID0gZGVwcztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyF3ZWItYWN0aXZpdGllcy9hY3Rpdml0eS1wb3J0cy5BY3Rpdml0eVBvcnRzfSAqL1xuICAgIHRoaXMuYWN0aXZpdHlQb3J0c18gPSBkZXBzLmFjdGl2aXRpZXMoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9jb21wb25lbnRzL2RpYWxvZy1tYW5hZ2VyLkRpYWxvZ01hbmFnZXJ9ICovXG4gICAgdGhpcy5kaWFsb2dNYW5hZ2VyXyA9IGRlcHMuZGlhbG9nTWFuYWdlcigpO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/QWN0aXZpdHlJZnJhbWVWaWV3fSAqL1xuICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3XyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9TdWJzY3JpYmVSZXNwb25zZX0gKi9cbiAgICB0aGlzLnJlc3BvbnNlXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9Qcm9taXNlfSAqL1xuICAgIHRoaXMucmVhZHlQcm9taXNlXyA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnRzIHRoZSBwYXltZW50cyBjb21wbGV0aW9uIGZsb3cuXG4gICAqIEBwYXJhbSB7IVN1YnNjcmliZVJlc3BvbnNlfSByZXNwb25zZVxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIHN0YXJ0KHJlc3BvbnNlKSB7XG4gICAgdGhpcy5kZXBzXy5lbnRpdGxlbWVudHNNYW5hZ2VyKCkucmVzZXQodHJ1ZSk7XG4gICAgdGhpcy5yZXNwb25zZV8gPSByZXNwb25zZTtcbiAgICB0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18gPSBuZXcgQWN0aXZpdHlJZnJhbWVWaWV3KFxuICAgICAgICB0aGlzLndpbl8sXG4gICAgICAgIHRoaXMuYWN0aXZpdHlQb3J0c18sXG4gICAgICAgIGZlVXJsKCcvcGF5Y29uZmlybWlmcmFtZScpLFxuICAgICAgICBmZUFyZ3Moe1xuICAgICAgICAgICdwdWJsaWNhdGlvbklkJzogdGhpcy5kZXBzXy5wYWdlQ29uZmlnKCkuZ2V0UHVibGljYXRpb25JZCgpLFxuICAgICAgICAgICdsb2dpbkhpbnQnOiByZXNwb25zZS51c2VyRGF0YSAmJiByZXNwb25zZS51c2VyRGF0YS5lbWFpbCxcbiAgICAgICAgfSksXG4gICAgICAgIC8qIHNob3VsZEZhZGVCb2R5ICovIHRydWUpO1xuICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xy5vbk1lc3NhZ2UoZGF0YSA9PiB7XG4gICAgICBpZiAoZGF0YVsnZW50aXRsZW1lbnRzJ10pIHtcbiAgICAgICAgdGhpcy5kZXBzXy5lbnRpdGxlbWVudHNNYW5hZ2VyKCkucHVzaE5leHRFbnRpdGxlbWVudHMoXG4gICAgICAgICAgICAvKiogQHR5cGUge3N0cmluZ30gKi8gKGRhdGFbJ2VudGl0bGVtZW50cyddKSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18uYWNjZXB0UmVzdWx0KCkudGhlbigoKSA9PiB7XG4gICAgICAvLyBUaGUgZmxvdyBpcyBjb21wbGV0ZS5cbiAgICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8uY29tcGxldGVWaWV3KHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xyk7XG4gICAgfSk7XG4gICAgdGhpcy5yZWFkeVByb21pc2VfID0gdGhpcy5kaWFsb2dNYW5hZ2VyXy5vcGVuVmlldyh0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18pO1xuICAgIHJldHVybiB0aGlzLnJlYWR5UHJvbWlzZV87XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBjb21wbGV0ZSgpIHtcbiAgICB0aGlzLmRlcHNfLmVudGl0bGVtZW50c01hbmFnZXIoKS51bmJsb2NrTmV4dE5vdGlmaWNhdGlvbigpO1xuICAgIHRoaXMucmVhZHlQcm9taXNlXy50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xy5tZXNzYWdlKHsnY29tcGxldGUnOiB0cnVlfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xy5hY2NlcHRSZXN1bHQoKS5jYXRjaCgoKSA9PiB7XG4gICAgICAvLyBJZ25vcmUgZXJyb3JzLlxuICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5kZXBzXy5lbnRpdGxlbWVudHNNYW5hZ2VyKCkuc2V0VG9hc3RTaG93bih0cnVlKTtcbiAgICB9KTtcbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7IXdlYi1hY3Rpdml0aWVzL2FjdGl2aXR5LXBvcnRzLkFjdGl2aXR5UG9ydH0gcG9ydFxuICogQHBhcmFtIHtmdW5jdGlvbigpOiFQcm9taXNlfSBjb21wbGV0ZUhhbmRsZXJcbiAqIEByZXR1cm4geyFQcm9taXNlPCFTdWJzY3JpYmVSZXNwb25zZT59XG4gKiBAcGFja2FnZSBWaXNpYmxlIGZvciB0ZXN0aW5nIG9ubHkuXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlUGF5UmVzcG9uc2Uod2luLCBwb3J0LCBjb21wbGV0ZUhhbmRsZXIpIHtcbiAgLy8gRG8gbm90IHJlcXVpcmUgc2VjdXJpdHkgaW1tZWRpYXRlbHk6IGl0IHdpbGwgYmUgY2hlY2tlZCBiZWxvdy5cbiAgcmV0dXJuIHBvcnQuYWNjZXB0UmVzdWx0KCkudGhlbihyZXN1bHQgPT4ge1xuICAgIGlmIChyZXN1bHQub3JpZ2luICE9IHBheU9yaWdpbigpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NoYW5uZWwgbWlzbWF0Y2gnKTtcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IC8qKiBAdHlwZSB7IU9iamVjdH0gKi8gKHJlc3VsdC5kYXRhKTtcbiAgICBpZiAoZGF0YVsncmVkaXJlY3RFbmNyeXB0ZWRDYWxsYmFja0RhdGEnXSkge1xuICAgICAgLy8gRGF0YSBpcyBzdXBwbGllZCBhcyBhbiBlbmNyeXB0ZWQgYmxvYi5cbiAgICAgIGNvbnN0IHhociA9IG5ldyBYaHIod2luKTtcbiAgICAgIGNvbnN0IHVybCA9IHBheURlY3J5cHRVcmwoKTtcbiAgICAgIGNvbnN0IGluaXQgPSAvKiogQHR5cGUgeyEuLi91dGlscy94aHIuRmV0Y2hJbml0RGVmfSAqLyAoe1xuICAgICAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICAgICAgaGVhZGVyczogeydBY2NlcHQnOiAndGV4dC9wbGFpbiwgYXBwbGljYXRpb24vanNvbid9LFxuICAgICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnLFxuICAgICAgICBib2R5OiBkYXRhWydyZWRpcmVjdEVuY3J5cHRlZENhbGxiYWNrRGF0YSddLFxuICAgICAgICBtb2RlOiAnY29ycycsXG4gICAgICB9KTtcbiAgICAgIHJldHVybiB4aHIuZmV0Y2godXJsLCBpbml0KS50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgfVxuICAgIC8vIERhdGEgaXMgc3VwcGxpZWQgZGlyZWN0bHk6IG11c3QgYmUgYSB2ZXJpZmllZCBhbmQgc2VjdXJlIGNoYW5uZWwuXG4gICAgaWYgKHJlc3VsdC5vcmlnaW5WZXJpZmllZCAmJiByZXN1bHQuc2VjdXJlQ2hhbm5lbCkge1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcignY2hhbm5lbCBtaXNtYXRjaCcpO1xuICB9KS50aGVuKGRhdGEgPT4gcGFyc2VTdWJzY3JpcHRpb25SZXNwb25zZShkYXRhLCBjb21wbGV0ZUhhbmRsZXIpKTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7Kn0gZGF0YVxuICogQHBhcmFtIHtmdW5jdGlvbigpOiFQcm9taXNlfSBjb21wbGV0ZUhhbmRsZXJcbiAqIEByZXR1cm4geyFTdWJzY3JpYmVSZXNwb25zZX1cbiAqL1xuZnVuY3Rpb24gcGFyc2VTdWJzY3JpcHRpb25SZXNwb25zZShkYXRhLCBjb21wbGV0ZUhhbmRsZXIpIHtcbiAgbGV0IHN3Z0RhdGEgPSBudWxsO1xuICBsZXQgcmF3ID0gbnVsbDtcbiAgaWYgKGRhdGEpIHtcbiAgICBpZiAodHlwZW9mIGRhdGEgPT0gJ3N0cmluZycpIHtcbiAgICAgIHJhdyA9IC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAoZGF0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEFzc3VtZSBpdCdzIGEganNvbiBvYmplY3QgaW4gdGhlIGZvcm1hdDpcbiAgICAgIC8vIGB7aW50ZWdyYXRvckNsaWVudENhbGxiYWNrRGF0YTogXCIuLi5cIn1gIG9yIGB7c3dnQ2FsbGJhY2tEYXRhOiBcIi4uLlwifWAuXG4gICAgICBjb25zdCBqc29uID0gLyoqIEB0eXBlIHshT2JqZWN0fSAqLyAoZGF0YSk7XG4gICAgICBpZiAoJ3N3Z0NhbGxiYWNrRGF0YScgaW4ganNvbikge1xuICAgICAgICBzd2dEYXRhID0gLyoqIEB0eXBlIHshT2JqZWN0fSAqLyAoanNvblsnc3dnQ2FsbGJhY2tEYXRhJ10pO1xuICAgICAgfSBlbHNlIGlmICgnaW50ZWdyYXRvckNsaWVudENhbGxiYWNrRGF0YScgaW4ganNvbikge1xuICAgICAgICByYXcgPSBqc29uWydpbnRlZ3JhdG9yQ2xpZW50Q2FsbGJhY2tEYXRhJ107XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChyYXcgJiYgIXN3Z0RhdGEpIHtcbiAgICByYXcgPSBhdG9iKHJhdyk7XG4gICAgaWYgKHJhdykge1xuICAgICAgY29uc3QgcGFyc2VkID0gcGFyc2VKc29uKHJhdyk7XG4gICAgICBzd2dEYXRhID0gcGFyc2VkWydzd2dDYWxsYmFja0RhdGEnXTtcbiAgICB9XG4gIH1cbiAgaWYgKCFzd2dEYXRhKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCd1bmV4cGVjdGVkIHBheW1lbnQgcmVzcG9uc2UnKTtcbiAgfVxuICByYXcgPSBKU09OLnN0cmluZ2lmeSgvKiogQHR5cGUgeyFKc29uT2JqZWN0fSAqLyAoc3dnRGF0YSkpO1xuICByZXR1cm4gbmV3IFN1YnNjcmliZVJlc3BvbnNlKFxuICAgICAgcmF3LFxuICAgICAgcGFyc2VQdXJjaGFzZURhdGEoc3dnRGF0YSksXG4gICAgICBwYXJzZVVzZXJEYXRhKHN3Z0RhdGEpLFxuICAgICAgY29tcGxldGVIYW5kbGVyKTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IU9iamVjdH0gc3dnRGF0YVxuICogQHJldHVybiB7IVB1cmNoYXNlRGF0YX1cbiAqL1xuZnVuY3Rpb24gcGFyc2VQdXJjaGFzZURhdGEoc3dnRGF0YSkge1xuICBjb25zdCByYXcgPSBzd2dEYXRhWydwdXJjaGFzZURhdGEnXTtcbiAgY29uc3Qgc2lnbmF0dXJlID0gc3dnRGF0YVsncHVyY2hhc2VEYXRhU2lnbmF0dXJlJ107XG4gIHJldHVybiBuZXcgUHVyY2hhc2VEYXRhKHJhdywgc2lnbmF0dXJlKTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IU9iamVjdH0gc3dnRGF0YVxuICogQHJldHVybiB7P1VzZXJEYXRhfVxuICogQHBhY2thZ2UgVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAqL1xuZnVuY3Rpb24gcGFyc2VVc2VyRGF0YShzd2dEYXRhKSB7XG4gIGNvbnN0IGlkVG9rZW4gPSBzd2dEYXRhWydpZFRva2VuJ107XG4gIGlmICghaWRUb2tlbikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IGp3dCA9IC8qKiBAdHlwZSB7IU9iamVjdH0gKi8gKG5ldyBKd3RIZWxwZXIoKS5kZWNvZGUoaWRUb2tlbikpO1xuICByZXR1cm4gbmV3IFVzZXJEYXRhKGlkVG9rZW4sIGp3dCk7XG59XG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuXG4vKipcbiAqIFRoZSBmbG93IHRvIGluaXRpYXRlIGRlZmVycmVkIGFjY291bnQgcHJvY2Vzcy5cbiAqIFNlZSBgU3Vic2NyaXB0aW9ucy5jb21wbGV0ZURlZmVycmVkQWNjb3VudENyZWF0aW9uYCBBUEkuXG4gKi9cbmNsYXNzIERlZmVycmVkQWNjb3VudEZsb3cge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuL2RlcHMuRGVwc0RlZn0gZGVwc1xuICAgKiBAcGFyYW0gez8uLi9hcGkvZGVmZXJyZWQtYWNjb3VudC1jcmVhdGlvbi5EZWZlcnJlZEFjY291bnRDcmVhdGlvblJlcXVlc3R9IG9wdGlvbnNcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRlcHMsIG9wdGlvbnMpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi9kZXBzLkRlcHNEZWZ9ICovXG4gICAgdGhpcy5kZXBzXyA9IGRlcHM7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IGRlcHMud2luKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshd2ViLWFjdGl2aXRpZXMvYWN0aXZpdHktcG9ydHMuQWN0aXZpdHlQb3J0c30gKi9cbiAgICB0aGlzLmFjdGl2aXR5UG9ydHNfID0gZGVwcy5hY3Rpdml0aWVzKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vY29tcG9uZW50cy9kaWFsb2ctbWFuYWdlci5EaWFsb2dNYW5hZ2VyfSAqL1xuICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8gPSBkZXBzLmRpYWxvZ01hbmFnZXIoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P0FjdGl2aXR5SWZyYW1lVmlld30gKi9cbiAgICB0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/UHJvbWlzZX0gKi9cbiAgICB0aGlzLm9wZW5Qcm9taXNlXyA9IG51bGw7XG5cbiAgICAvKiogQHR5cGUgeyEuLi9hcGkvZGVmZXJyZWQtYWNjb3VudC1jcmVhdGlvbi5EZWZlcnJlZEFjY291bnRDcmVhdGlvblJlcXVlc3R9ICovXG4gICAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgICBlbnRpdGxlbWVudHM6IG51bGwsXG4gICAgICBjb25zZW50OiB0cnVlLFxuICAgIH07XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2FwaS9kZWZlcnJlZC1hY2NvdW50LWNyZWF0aW9uLkRlZmVycmVkQWNjb3VudENyZWF0aW9uUmVxdWVzdH0gKi9cbiAgICB0aGlzLm9wdGlvbnNfID0gT2JqZWN0LmFzc2lnbihkZWZhdWx0T3B0aW9ucywgb3B0aW9ucyB8fCB7fSk7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnRzIHRoZSBkZWZlcnJlZCBhY2NvdW50IGZsb3cuXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFEZWZlcnJlZEFjY291bnRDcmVhdGlvblJlc3BvbnNlPn1cbiAgICovXG4gIHN0YXJ0KCkge1xuICAgIGNvbnN0IGVudGl0bGVtZW50cyA9IHRoaXMub3B0aW9uc18uZW50aXRsZW1lbnRzO1xuXG4gICAgLy8gRm9yIG5vdywgZW50aXRsZW1lbnRzIGFyZSByZXF1aXJlZCB0byBiZSBwcmVzZW50IGFuZCBoYXZlIHRoZSBHb29nbGVcbiAgICAvLyB0b2tlbi4gVGhpcyBpcyBzdHJpY3RseSBub3QgcmVxdWlyZWQgZm9yIHRoZSBpbXBsZW1lbnRhdGlvbi4gQnV0IGl0J3NcbiAgICAvLyBwcmVmZXJyYWJsZSBBUEktd2lzZSBhdCB0aGlzIHRpbWUuXG4gICAgaWYgKCFlbnRpdGxlbWVudHMgfHwgIWVudGl0bGVtZW50cy5nZXRFbnRpdGxlbWVudEZvclNvdXJjZSgnZ29vZ2xlJykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gZW50aXRsZW1lbnRzIHdpdGggXCJnb29nbGVcIiBzb3VyY2UnKTtcbiAgICB9XG5cbiAgICAvLyBTdGFydC9jYW5jZWwgZXZlbnRzLlxuICAgIHRoaXMuZGVwc18uY2FsbGJhY2tzKCkudHJpZ2dlckZsb3dTdGFydGVkKFxuICAgICAgICBTdWJzY3JpcHRpb25GbG93cy5DT01QTEVURV9ERUZFUlJFRF9BQ0NPVU5UX0NSRUFUSU9OKTtcblxuICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3XyA9IG5ldyBBY3Rpdml0eUlmcmFtZVZpZXcoXG4gICAgICAgIHRoaXMud2luXyxcbiAgICAgICAgdGhpcy5hY3Rpdml0eVBvcnRzXyxcbiAgICAgICAgZmVVcmwoJy9yZWNvdmVyaWZyYW1lJyksXG4gICAgICAgIGZlQXJncyh7XG4gICAgICAgICAgJ3B1YmxpY2F0aW9uSWQnOiB0aGlzLmRlcHNfLnBhZ2VDb25maWcoKS5nZXRQdWJsaWNhdGlvbklkKCksXG4gICAgICAgICAgJ3Byb2R1Y3RJZCc6IHRoaXMuZGVwc18ucGFnZUNvbmZpZygpLmdldFByb2R1Y3RJZCgpLFxuICAgICAgICAgICdlbnRpdGxlbWVudHMnOiBlbnRpdGxlbWVudHMgJiYgZW50aXRsZW1lbnRzLnJhdyB8fCBudWxsLFxuICAgICAgICAgICdjb25zZW50JzogdGhpcy5vcHRpb25zXy5jb25zZW50LFxuICAgICAgICB9KSxcbiAgICAgICAgLyogc2hvdWxkRmFkZUJvZHkgKi8gdHJ1ZSk7XG5cbiAgICB0aGlzLm9wZW5Qcm9taXNlXyA9IHRoaXMuZGlhbG9nTWFuYWdlcl8ub3BlblZpZXcodGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfKTtcbiAgICByZXR1cm4gdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfLmFjY2VwdFJlc3VsdCgpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgIC8vIFRoZSBjb25zZW50IHBhcnQgaXMgY29tcGxldGUuXG4gICAgICByZXR1cm4gdGhpcy5oYW5kbGVDb25zZW50UmVzcG9uc2VfKC8qKiBAdHlwZSB7IU9iamVjdH0gKi8gKHJlc3VsdC5kYXRhKSk7XG4gICAgfSwgcmVhc29uID0+IHtcbiAgICAgIGlmIChpc0NhbmNlbEVycm9yKHJlYXNvbikpIHtcbiAgICAgICAgdGhpcy5kZXBzXy5jYWxsYmFja3MoKS50cmlnZ2VyRmxvd0NhbmNlbGVkKFxuICAgICAgICAgICAgU3Vic2NyaXB0aW9uRmxvd3MuQ09NUExFVEVfREVGRVJSRURfQUNDT1VOVF9DUkVBVElPTik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRpYWxvZ01hbmFnZXJfLmNvbXBsZXRlVmlldyh0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18pO1xuICAgICAgfVxuICAgICAgdGhyb3cgcmVhc29uO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IU9iamVjdH0gZGF0YVxuICAgKiBAcmV0dXJuIHshRGVmZXJyZWRBY2NvdW50Q3JlYXRpb25SZXNwb25zZX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhbmRsZUNvbnNlbnRSZXNwb25zZV8oZGF0YSkge1xuICAgIHRoaXMuZGVwc18uZW50aXRsZW1lbnRzTWFuYWdlcigpLmJsb2NrTmV4dE5vdGlmaWNhdGlvbigpO1xuXG4gICAgLy8gUGFyc2UgdGhlIHJlc3BvbnNlLlxuICAgIGNvbnN0IGVudGl0bGVtZW50c0p3dCA9IGRhdGFbJ2VudGl0bGVtZW50cyddO1xuICAgIGNvbnN0IGlkVG9rZW4gPSBkYXRhWydpZFRva2VuJ107XG4gICAgY29uc3QgZW50aXRsZW1lbnRzID0gdGhpcy5kZXBzXy5lbnRpdGxlbWVudHNNYW5hZ2VyKClcbiAgICAgICAgLnBhcnNlRW50aXRsZW1lbnRzKHsnc2lnbmVkRW50aXRsZW1lbnRzJzogZW50aXRsZW1lbnRzSnd0fSk7XG4gICAgY29uc3QgdXNlckRhdGEgPSBuZXcgVXNlckRhdGEoXG4gICAgICAgIGlkVG9rZW4sXG4gICAgICAgIC8qKiBAdHlwZSB7IU9iamVjdH0gKi8gKG5ldyBKd3RIZWxwZXIoKS5kZWNvZGUoaWRUb2tlbikpKTtcbiAgICBjb25zdCBwdXJjaGFzZURhdGEgPSBuZXcgUHVyY2hhc2VEYXRhKFxuICAgICAgICBkYXRhWydwdXJjaGFzZURhdGEnXSxcbiAgICAgICAgZGF0YVsncHVyY2hhc2VEYXRhU2lnbmF0dXJlJ10pO1xuXG4gICAgLy8gRm9yIG5vdywgd2UnbGwgdXNlIHRoZSBgUGF5Q29tcGxldGVGbG93YCBhcyBhIFwiY3JlYXRpbmcgYWNjb3VudFwiIGZsb3cuXG4gICAgLy8gQnV0IHRoaXMgY2FuIGJlIGV2ZW50dWFsbHkgaW1wbGVtZW50ZWQgYnkgdGhlIHNhbWUgaWZyYW1lLlxuICAgIGNvbnN0IGNyZWF0aW5nRmxvdyA9IG5ldyBQYXlDb21wbGV0ZUZsb3codGhpcy5kZXBzXyk7XG4gICAgY29uc3QgY29tcGxldGVIYW5kbGVyID0gY3JlYXRpbmdGbG93LmNvbXBsZXRlLmJpbmQoY3JlYXRpbmdGbG93KTtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gbmV3IERlZmVycmVkQWNjb3VudENyZWF0aW9uUmVzcG9uc2UoXG4gICAgICAgIGVudGl0bGVtZW50cyxcbiAgICAgICAgdXNlckRhdGEsXG4gICAgICAgIHB1cmNoYXNlRGF0YSxcbiAgICAgICAgY29tcGxldGVIYW5kbGVyKTtcblxuICAgIC8vIFN0YXJ0IHRoZSBcInN5bmNcIiBmbG93LlxuICAgIGNyZWF0aW5nRmxvdy5zdGFydChuZXcgU3Vic2NyaWJlUmVzcG9uc2UoXG4gICAgICAgICcnLCAgLy8gcmF3IGZpZWxkIGRvZXNuJ3QgbWF0dGVyIGluIHRoaXMgY2FzZVxuICAgICAgICBwdXJjaGFzZURhdGEsXG4gICAgICAgIHVzZXJEYXRhLFxuICAgICAgICAoKSA9PiBQcm9taXNlLnJlc29sdmUoKSAgLy8gY29tcGxldGVIYW5kbGVyIGRvZXNuJ3QgbWF0dGVyIGluIHRoaXMgY2FzZVxuICAgICkpO1xuICAgIHJldHVybiByZXNwb25zZTtcbiAgfVxufVxuXG4vKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmNvbnN0IENTUyQxID0gXCJib2R5e3BhZGRpbmc6MDttYXJnaW46MH1zd2ctY29udGFpbmVyLHN3Zy1sb2FkaW5nLHN3Zy1sb2FkaW5nLWFuaW1hdGUsc3dnLWxvYWRpbmctaW1hZ2V7ZGlzcGxheTpibG9ja31zd2ctbG9hZGluZy1jb250YWluZXJ7d2lkdGg6MTAwJSFpbXBvcnRhbnQ7ZGlzcGxheTotd2Via2l0LWJveCFpbXBvcnRhbnQ7ZGlzcGxheTotbXMtZmxleGJveCFpbXBvcnRhbnQ7ZGlzcGxheTpmbGV4IWltcG9ydGFudDstd2Via2l0LWJveC1hbGlnbjpjZW50ZXIhaW1wb3J0YW50Oy1tcy1mbGV4LWFsaWduOmNlbnRlciFpbXBvcnRhbnQ7YWxpZ24taXRlbXM6Y2VudGVyIWltcG9ydGFudDstd2Via2l0LWJveC1wYWNrOmNlbnRlciFpbXBvcnRhbnQ7LW1zLWZsZXgtcGFjazpjZW50ZXIhaW1wb3J0YW50O2p1c3RpZnktY29udGVudDpjZW50ZXIhaW1wb3J0YW50O21pbi1oZWlnaHQ6MTQ4cHghaW1wb3J0YW50O2hlaWdodDoxMDAlIWltcG9ydGFudDtib3R0b206MCFpbXBvcnRhbnQ7bWFyZ2luLXRvcDo1cHghaW1wb3J0YW50O3otaW5kZXg6MjE0NzQ4MzY0NyFpbXBvcnRhbnR9QG1lZGlhIChtaW4taGVpZ2h0OjYzMHB4KSwgKG1pbi13aWR0aDo2MzBweCl7c3dnLWxvYWRpbmctY29udGFpbmVye3dpZHRoOjU2MHB4IWltcG9ydGFudDttYXJnaW4tbGVmdDozNXB4IWltcG9ydGFudDtib3JkZXItdG9wLWxlZnQtcmFkaXVzOjhweCFpbXBvcnRhbnQ7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6OHB4IWltcG9ydGFudDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmYhaW1wb3J0YW50O2JveC1zaGFkb3c6MCAxcHggMXB4IHJnYmEoNjAsNjQsNjcsLjMpLDAgMXB4IDRweCAxcHggcmdiYSg2MCw2NCw2NywuMTUpIWltcG9ydGFudH19c3dnLWxvYWRpbmd7ei1pbmRleDoyMTQ3NDgzNjQ3IWltcG9ydGFudDt3aWR0aDozNnB4O2hlaWdodDozNnB4O292ZXJmbG93OmhpZGRlbjstd2Via2l0LWFuaW1hdGlvbjptc3Bpbi1yb3RhdGUgMTU2OC42M21zIGluZmluaXRlIGxpbmVhcjthbmltYXRpb246bXNwaW4tcm90YXRlIDE1NjguNjNtcyBpbmZpbml0ZSBsaW5lYXJ9c3dnLWxvYWRpbmctYW5pbWF0ZXstd2Via2l0LWFuaW1hdGlvbjptc3Bpbi1yZXZyb3QgNTMzMm1zIGluZmluaXRlIHN0ZXBzKDQpO2FuaW1hdGlvbjptc3Bpbi1yZXZyb3QgNTMzMm1zIGluZmluaXRlIHN0ZXBzKDQpfXN3Zy1sb2FkaW5nLWltYWdle2JhY2tncm91bmQtaW1hZ2U6dXJsKCdkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtODtiYXNlNjQsRFFvOGMzWm5JSFpsY25OcGIyNDlJakVpSUhodGJHNXpQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh5TURBd0wzTjJaeUlnZUcxc2JuTTZlR3hwYm1zOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6RTVPVGt2ZUd4cGJtc2lJSGRwWkhSb1BTSXhNVFkyTkNJZ2FHVnBaMmgwUFNJek5pSWdkbWxsZDBKdmVEMGlNQ0F3SURFeE5qWTBJRE0ySWo0OFpHVm1jejQ4Y0dGMGFDQnBaRDBpWVNJZ1ptbHNiRDBpYm05dVpTSWdjM1J5YjJ0bExXUmhjMmhoY25KaGVUMGlOVGd1T1NJZ1pEMGlUVEU0SURVdU5VRXhNaTQxSURFeUxqVWdNQ0F4SURFZ05TNDFJREU0SWlCemRISnZhMlV0ZDJsa2RHZzlJak1pSUhOMGNtOXJaUzFzYVc1bFkyRndQU0p6Y1hWaGNtVWlMejQ4WnlCcFpEMGlZaUkrUEhWelpTQjRiR2x1YXpwb2NtVm1QU0lqWVNJZ2MzUnliMnRsTFdSaGMyaHZabVp6WlhROUlqRTNOaTQyTmlJdlBqeDFjMlVnZUd4cGJtczZhSEpsWmowaUkyRWlJSE4wY205clpTMWtZWE5vYjJabWMyVjBQU0l4TnpZdU5UZ2lJSFJ5WVc1elptOXliVDBpZEhKaGJuTnNZWFJsS0RNMktTSXZQangxYzJVZ2VHeHBibXM2YUhKbFpqMGlJMkVpSUhOMGNtOXJaUzFrWVhOb2IyWm1jMlYwUFNJeE56WXVNeklpSUhSeVlXNXpabTl5YlQwaWRISmhibk5zWVhSbEtEY3lLU0l2UGp4MWMyVWdlR3hwYm1zNmFISmxaajBpSTJFaUlITjBjbTlyWlMxa1lYTm9iMlptYzJWMFBTSXhOelV1T0RVaUlIUnlZVzV6Wm05eWJUMGlkSEpoYm5Oc1lYUmxLREV3T0NraUx6NDhkWE5sSUhoc2FXNXJPbWh5WldZOUlpTmhJaUJ6ZEhKdmEyVXRaR0Z6YUc5bVpuTmxkRDBpTVRjMUxqRTBJaUIwY21GdWMyWnZjbTA5SW5SeVlXNXpiR0YwWlNneE5EUXBJaTgrUEhWelpTQjRiR2x1YXpwb2NtVm1QU0lqWVNJZ2MzUnliMnRsTFdSaGMyaHZabVp6WlhROUlqRTNOQzR4TXlJZ2RISmhibk5tYjNKdFBTSjBjbUZ1YzJ4aGRHVW9NVGd3S1NJdlBqeDFjMlVnZUd4cGJtczZhSEpsWmowaUkyRWlJSE4wY205clpTMWtZWE5vYjJabWMyVjBQU0l4TnpJdU56Z2lJSFJ5WVc1elptOXliVDBpZEhKaGJuTnNZWFJsS0RJeE5pa2lMejQ4ZFhObElIaHNhVzVyT21oeVpXWTlJaU5oSWlCemRISnZhMlV0WkdGemFHOW1abk5sZEQwaU1UY3hMakF4SWlCMGNtRnVjMlp2Y20wOUluUnlZVzV6YkdGMFpTZ3lOVElwSWk4K1BIVnpaU0I0YkdsdWF6cG9jbVZtUFNJallTSWdjM1J5YjJ0bExXUmhjMmh2Wm1aelpYUTlJakUyT0M0M09DSWdkSEpoYm5ObWIzSnRQU0owY21GdWMyeGhkR1VvTWpnNEtTSXZQangxYzJVZ2VHeHBibXM2YUhKbFpqMGlJMkVpSUhOMGNtOXJaUzFrWVhOb2IyWm1jMlYwUFNJeE5qWXVNRElpSUhSeVlXNXpabTl5YlQwaWRISmhibk5zWVhSbEtETXlOQ2tpTHo0OGRYTmxJSGhzYVc1ck9taHlaV1k5SWlOaElpQnpkSEp2YTJVdFpHRnphRzltWm5ObGREMGlNVFl5TGpjeklpQjBjbUZ1YzJadmNtMDlJblJ5WVc1emJHRjBaU2d6TmpBcElpOCtQSFZ6WlNCNGJHbHVhenBvY21WbVBTSWpZU0lnYzNSeWIydGxMV1JoYzJodlptWnpaWFE5SWpFMU9TNHdNU0lnZEhKaGJuTm1iM0p0UFNKMGNtRnVjMnhoZEdVb016azJLU0l2UGp4MWMyVWdlR3hwYm1zNmFISmxaajBpSTJFaUlITjBjbTlyWlMxa1lYTm9iMlptYzJWMFBTSXhOVFV1TURRaUlIUnlZVzV6Wm05eWJUMGlkSEpoYm5Oc1lYUmxLRFF6TWlraUx6NDhkWE5sSUhoc2FXNXJPbWh5WldZOUlpTmhJaUJ6ZEhKdmEyVXRaR0Z6YUc5bVpuTmxkRDBpTVRVeExqQTFJaUIwY21GdWMyWnZjbTA5SW5SeVlXNXpiR0YwWlNnME5qZ3BJaTgrUEhWelpTQjRiR2x1YXpwb2NtVm1QU0lqWVNJZ2MzUnliMnRsTFdSaGMyaHZabVp6WlhROUlqRTBOeTR5TXlJZ2RISmhibk5tYjNKdFBTSjBjbUZ1YzJ4aGRHVW9OVEEwS1NJdlBqeDFjMlVnZUd4cGJtczZhSEpsWmowaUkyRWlJSE4wY205clpTMWtZWE5vYjJabWMyVjBQU0l4TkRNdU56RWlJSFJ5WVc1elptOXliVDBpZEhKaGJuTnNZWFJsS0RVME1Da2lMejQ4ZFhObElIaHNhVzVyT21oeVpXWTlJaU5oSWlCemRISnZhMlV0WkdGemFHOW1abk5sZEQwaU1UUXdMalUwSWlCMGNtRnVjMlp2Y20wOUluUnlZVzV6YkdGMFpTZzFOellwSWk4K1BIVnpaU0I0YkdsdWF6cG9jbVZtUFNJallTSWdjM1J5YjJ0bExXUmhjMmh2Wm1aelpYUTlJakV6Tnk0M01pSWdkSEpoYm5ObWIzSnRQU0owY21GdWMyeGhkR1VvTmpFeUtTSXZQangxYzJVZ2VHeHBibXM2YUhKbFpqMGlJMkVpSUhOMGNtOXJaUzFrWVhOb2IyWm1jMlYwUFNJeE16VXVNakVpSUhSeVlXNXpabTl5YlQwaWRISmhibk5zWVhSbEtEWTBPQ2tpTHo0OGRYTmxJSGhzYVc1ck9taHlaV1k5SWlOaElpQnpkSEp2YTJVdFpHRnphRzltWm5ObGREMGlNVE15TGprNElpQjBjbUZ1YzJadmNtMDlJblJ5WVc1emJHRjBaU2cyT0RRcElpOCtQSFZ6WlNCNGJHbHVhenBvY21WbVBTSWpZU0lnYzNSeWIydGxMV1JoYzJodlptWnpaWFE5SWpFek1TNHdNU0lnZEhKaGJuTm1iM0p0UFNKMGNtRnVjMnhoZEdVb056SXdLU0l2UGp4MWMyVWdlR3hwYm1zNmFISmxaajBpSTJFaUlITjBjbTlyWlMxa1lYTm9iMlptYzJWMFBTSXhNamt1TWpZaUlIUnlZVzV6Wm05eWJUMGlkSEpoYm5Oc1lYUmxLRGMxTmlraUx6NDhkWE5sSUhoc2FXNXJPbWh5WldZOUlpTmhJaUJ6ZEhKdmEyVXRaR0Z6YUc5bVpuTmxkRDBpTVRJM0xqY3hJaUIwY21GdWMyWnZjbTA5SW5SeVlXNXpiR0YwWlNnM09USXBJaTgrUEhWelpTQjRiR2x1YXpwb2NtVm1QU0lqWVNJZ2MzUnliMnRsTFdSaGMyaHZabVp6WlhROUlqRXlOaTR6TXlJZ2RISmhibk5tYjNKdFBTSjBjbUZ1YzJ4aGRHVW9PREk0S1NJdlBqeDFjMlVnZUd4cGJtczZhSEpsWmowaUkyRWlJSE4wY205clpTMWtZWE5vYjJabWMyVjBQU0l4TWpVdU1TSWdkSEpoYm5ObWIzSnRQU0owY21GdWMyeGhkR1VvT0RZMEtTSXZQangxYzJVZ2VHeHBibXM2YUhKbFpqMGlJMkVpSUhOMGNtOXJaUzFrWVhOb2IyWm1jMlYwUFNJeE1qUXVNREVpSUhSeVlXNXpabTl5YlQwaWRISmhibk5zWVhSbEtEa3dNQ2tpTHo0OGRYTmxJSGhzYVc1ck9taHlaV1k5SWlOaElpQnpkSEp2YTJVdFpHRnphRzltWm5ObGREMGlNVEl6TGpBMElpQjBjbUZ1YzJadmNtMDlJblJ5WVc1emJHRjBaU2c1TXpZcElpOCtQSFZ6WlNCNGJHbHVhenBvY21WbVBTSWpZU0lnYzNSeWIydGxMV1JoYzJodlptWnpaWFE5SWpFeU1pNHhPU0lnZEhKaGJuTm1iM0p0UFNKMGNtRnVjMnhoZEdVb09UY3lLU0l2UGp4MWMyVWdlR3hwYm1zNmFISmxaajBpSTJFaUlITjBjbTlyWlMxa1lYTm9iMlptYzJWMFBTSXhNakV1TkRNaUlIUnlZVzV6Wm05eWJUMGlkSEpoYm5Oc1lYUmxLREV3TURncElpOCtQSFZ6WlNCNGJHbHVhenBvY21WbVBTSWpZU0lnYzNSeWIydGxMV1JoYzJodlptWnpaWFE5SWpFeU1DNDNOeUlnZEhKaGJuTm1iM0p0UFNKMGNtRnVjMnhoZEdVb01UQTBOQ2tpTHo0OGRYTmxJSGhzYVc1ck9taHlaV1k5SWlOaElpQnpkSEp2YTJVdFpHRnphRzltWm5ObGREMGlNVEl3TGpFNUlpQjBjbUZ1YzJadmNtMDlJblJ5WVc1emJHRjBaU2d4TURnd0tTSXZQangxYzJVZ2VHeHBibXM2YUhKbFpqMGlJMkVpSUhOMGNtOXJaUzFrWVhOb2IyWm1jMlYwUFNJeE1Ua3VOamtpSUhSeVlXNXpabTl5YlQwaWRISmhibk5zWVhSbEtERXhNVFlwSWk4K1BIVnpaU0I0YkdsdWF6cG9jbVZtUFNJallTSWdjM1J5YjJ0bExXUmhjMmh2Wm1aelpYUTlJakV4T1M0eU5pSWdkSEpoYm5ObWIzSnRQU0owY21GdWMyeGhkR1VvTVRFMU1pa2lMejQ4ZFhObElIaHNhVzVyT21oeVpXWTlJaU5oSWlCemRISnZhMlV0WkdGemFHOW1abk5sZEQwaU1URTRMamc1SWlCMGNtRnVjMlp2Y20wOUluUnlZVzV6YkdGMFpTZ3hNVGc0S1NJdlBqeDFjMlVnZUd4cGJtczZhSEpsWmowaUkyRWlJSE4wY205clpTMWtZWE5vYjJabWMyVjBQU0l4TVRndU5UZ2lJSFJ5WVc1elptOXliVDBpZEhKaGJuTnNZWFJsS0RFeU1qUXBJaTgrUEhWelpTQjRiR2x1YXpwb2NtVm1QU0lqWVNJZ2MzUnliMnRsTFdSaGMyaHZabVp6WlhROUlqRXhPQzR6TXlJZ2RISmhibk5tYjNKdFBTSjBjbUZ1YzJ4aGRHVW9NVEkyTUNraUx6NDhkWE5sSUhoc2FXNXJPbWh5WldZOUlpTmhJaUJ6ZEhKdmEyVXRaR0Z6YUc5bVpuTmxkRDBpTVRFNExqRXpJaUIwY21GdWMyWnZjbTA5SW5SeVlXNXpiR0YwWlNneE1qazJLU0l2UGp4MWMyVWdlR3hwYm1zNmFISmxaajBpSTJFaUlITjBjbTlyWlMxa1lYTm9iMlptYzJWMFBTSXhNVGN1T1RnaUlIUnlZVzV6Wm05eWJUMGlkSEpoYm5Oc1lYUmxLREV6TXpJcElpOCtQSFZ6WlNCNGJHbHVhenBvY21WbVBTSWpZU0lnYzNSeWIydGxMV1JoYzJodlptWnpaWFE5SWpFeE55NDRPQ0lnZEhKaGJuTm1iM0p0UFNKMGNtRnVjMnhoZEdVb01UTTJPQ2tpTHo0OGRYTmxJSGhzYVc1ck9taHlaV1k5SWlOaElpQnpkSEp2YTJVdFpHRnphRzltWm5ObGREMGlNVEUzTGpneUlpQjBjbUZ1YzJadmNtMDlJblJ5WVc1emJHRjBaU2d4TkRBMEtTSXZQangxYzJVZ2VHeHBibXM2YUhKbFpqMGlJMkVpSUhOMGNtOXJaUzFrWVhOb2IyWm1jMlYwUFNJeE1UY3VPQ0lnZEhKaGJuTm1iM0p0UFNKMGNtRnVjMnhoZEdVb01UUTBNQ2tpTHo0OGRYTmxJSGhzYVc1ck9taHlaV1k5SWlOaElpQnpkSEp2YTJVdFpHRnphRzltWm5ObGREMGlNVEUzTGpjeUlpQjBjbUZ1YzJadmNtMDlJblJ5WVc1emJHRjBaU2d4TkRjMktTSXZQangxYzJVZ2VHeHBibXM2YUhKbFpqMGlJMkVpSUhOMGNtOXJaUzFrWVhOb2IyWm1jMlYwUFNJeE1UY3VORFlpSUhSeVlXNXpabTl5YlQwaWRISmhibk5zWVhSbEtERTFNVElwSWk4K1BIVnpaU0I0YkdsdWF6cG9jbVZtUFNJallTSWdjM1J5YjJ0bExXUmhjMmh2Wm1aelpYUTlJakV4TnlJZ2RISmhibk5tYjNKdFBTSjBjbUZ1YzJ4aGRHVW9NVFUwT0NraUx6NDhkWE5sSUhoc2FXNXJPbWh5WldZOUlpTmhJaUJ6ZEhKdmEyVXRaR0Z6YUc5bVpuTmxkRDBpTVRFMkxqSTVJaUIwY21GdWMyWnZjbTA5SW5SeVlXNXpiR0YwWlNneE5UZzBLU0l2UGp4MWMyVWdlR3hwYm1zNmFISmxaajBpSTJFaUlITjBjbTlyWlMxa1lYTm9iMlptYzJWMFBTSXhNVFV1TWpraUlIUnlZVzV6Wm05eWJUMGlkSEpoYm5Oc1lYUmxLREUyTWpBcElpOCtQSFZ6WlNCNGJHbHVhenBvY21WbVBTSWpZU0lnYzNSeWIydGxMV1JoYzJodlptWnpaWFE5SWpFeE15NDVOQ0lnZEhKaGJuTm1iM0p0UFNKMGNtRnVjMnhoZEdVb01UWTFOaWtpTHo0OGRYTmxJSGhzYVc1ck9taHlaV1k5SWlOaElpQnpkSEp2YTJVdFpHRnphRzltWm5ObGREMGlNVEV5TGpFNUlpQjBjbUZ1YzJadmNtMDlJblJ5WVc1emJHRjBaU2d4TmpreUtTSXZQangxYzJVZ2VHeHBibXM2YUhKbFpqMGlJMkVpSUhOMGNtOXJaUzFrWVhOb2IyWm1jMlYwUFNJeE1Ea3VPVGNpSUhSeVlXNXpabTl5YlQwaWRISmhibk5zWVhSbEtERTNNamdwSWk4K1BIVnpaU0I0YkdsdWF6cG9jbVZtUFNJallTSWdjM1J5YjJ0bExXUmhjMmh2Wm1aelpYUTlJakV3Tnk0eU15SWdkSEpoYm5ObWIzSnRQU0owY21GdWMyeGhkR1VvTVRjMk5Da2lMejQ4ZFhObElIaHNhVzVyT21oeVpXWTlJaU5oSWlCemRISnZhMlV0WkdGemFHOW1abk5sZEQwaU1UQXpMamsySWlCMGNtRnVjMlp2Y20wOUluUnlZVzV6YkdGMFpTZ3hPREF3S1NJdlBqeDFjMlVnZUd4cGJtczZhSEpsWmowaUkyRWlJSE4wY205clpTMWtZWE5vYjJabWMyVjBQU0l4TURBdU1qY2lJSFJ5WVc1elptOXliVDBpZEhKaGJuTnNZWFJsS0RFNE16WXBJaTgrUEhWelpTQjRiR2x1YXpwb2NtVm1QU0lqWVNJZ2MzUnliMnRsTFdSaGMyaHZabVp6WlhROUlqazJMak15SWlCMGNtRnVjMlp2Y20wOUluUnlZVzV6YkdGMFpTZ3hPRGN5S1NJdlBqeDFjMlVnZUd4cGJtczZhSEpsWmowaUkyRWlJSE4wY205clpTMWtZWE5vYjJabWMyVjBQU0k1TWk0ek5TSWdkSEpoYm5ObWIzSnRQU0owY21GdWMyeGhkR1VvTVRrd09Da2lMejQ4ZFhObElIaHNhVzVyT21oeVpXWTlJaU5oSWlCemRISnZhMlV0WkdGemFHOW1abk5sZEQwaU9EZ3VOVFlpSUhSeVlXNXpabTl5YlQwaWRISmhibk5zWVhSbEtERTVORFFwSWk4K1BIVnpaU0I0YkdsdWF6cG9jbVZtUFNJallTSWdjM1J5YjJ0bExXUmhjMmh2Wm1aelpYUTlJamcxTGpBM0lpQjBjbUZ1YzJadmNtMDlJblJ5WVc1emJHRjBaU2d4T1Rnd0tTSXZQangxYzJVZ2VHeHBibXM2YUhKbFpqMGlJMkVpSUhOMGNtOXJaUzFrWVhOb2IyWm1jMlYwUFNJNE1TNDVNaUlnZEhKaGJuTm1iM0p0UFNKMGNtRnVjMnhoZEdVb01qQXhOaWtpTHo0OGRYTmxJSGhzYVc1ck9taHlaV1k5SWlOaElpQnpkSEp2YTJVdFpHRnphRzltWm5ObGREMGlOemt1TVRFaUlIUnlZVzV6Wm05eWJUMGlkSEpoYm5Oc1lYUmxLREl3TlRJcElpOCtQSFZ6WlNCNGJHbHVhenBvY21WbVBTSWpZU0lnYzNSeWIydGxMV1JoYzJodlptWnpaWFE5SWpjMkxqWXhJaUIwY21GdWMyWnZjbTA5SW5SeVlXNXpiR0YwWlNneU1EZzRLU0l2UGp4MWMyVWdlR3hwYm1zNmFISmxaajBpSTJFaUlITjBjbTlyWlMxa1lYTm9iMlptYzJWMFBTSTNOQzQwSWlCMGNtRnVjMlp2Y20wOUluUnlZVzV6YkdGMFpTZ3lNVEkwS1NJdlBqeDFjMlVnZUd4cGJtczZhSEpsWmowaUkyRWlJSE4wY205clpTMWtZWE5vYjJabWMyVjBQU0kzTWk0ME5TSWdkSEpoYm5ObWIzSnRQU0owY21GdWMyeGhkR1VvTWpFMk1Da2lMejQ4ZFhObElIaHNhVzVyT21oeVpXWTlJaU5oSWlCemRISnZhMlV0WkdGemFHOW1abk5sZEQwaU56QXVOekVpSUhSeVlXNXpabTl5YlQwaWRISmhibk5zWVhSbEtESXhPVFlwSWk4K1BIVnpaU0I0YkdsdWF6cG9jbVZtUFNJallTSWdjM1J5YjJ0bExXUmhjMmh2Wm1aelpYUTlJalk1TGpFMklpQjBjbUZ1YzJadmNtMDlJblJ5WVc1emJHRjBaU2d5TWpNeUtTSXZQangxYzJVZ2VHeHBibXM2YUhKbFpqMGlJMkVpSUhOMGNtOXJaUzFrWVhOb2IyWm1jMlYwUFNJMk55NDNPU0lnZEhKaGJuTm1iM0p0UFNKMGNtRnVjMnhoZEdVb01qSTJPQ2tpTHo0OGRYTmxJSGhzYVc1ck9taHlaV1k5SWlOaElpQnpkSEp2YTJVdFpHRnphRzltWm5ObGREMGlOall1TlRjaUlIUnlZVzV6Wm05eWJUMGlkSEpoYm5Oc1lYUmxLREl6TURRcElpOCtQSFZ6WlNCNGJHbHVhenBvY21WbVBTSWpZU0lnYzNSeWIydGxMV1JoYzJodlptWnpaWFE5SWpZMUxqUTVJaUIwY21GdWMyWnZjbTA5SW5SeVlXNXpiR0YwWlNneU16UXdLU0l2UGp4MWMyVWdlR3hwYm1zNmFISmxaajBpSTJFaUlITjBjbTlyWlMxa1lYTm9iMlptYzJWMFBTSTJOQzQxTXlJZ2RISmhibk5tYjNKdFBTSjBjbUZ1YzJ4aGRHVW9Nak0zTmlraUx6NDhkWE5sSUhoc2FXNXJPbWh5WldZOUlpTmhJaUJ6ZEhKdmEyVXRaR0Z6YUc5bVpuTmxkRDBpTmpNdU5qZ2lJSFJ5WVc1elptOXliVDBpZEhKaGJuTnNZWFJsS0RJME1USXBJaTgrUEhWelpTQjRiR2x1YXpwb2NtVm1QU0lqWVNJZ2MzUnliMnRsTFdSaGMyaHZabVp6WlhROUlqWXlMamt6SWlCMGNtRnVjMlp2Y20wOUluUnlZVzV6YkdGMFpTZ3lORFE0S1NJdlBqeDFjMlVnZUd4cGJtczZhSEpsWmowaUkyRWlJSE4wY205clpTMWtZWE5vYjJabWMyVjBQU0kyTWk0eU55SWdkSEpoYm5ObWIzSnRQU0owY21GdWMyeGhkR1VvTWpRNE5Da2lMejQ4ZFhObElIaHNhVzVyT21oeVpXWTlJaU5oSWlCemRISnZhMlV0WkdGemFHOW1abk5sZEQwaU5qRXVOeUlnZEhKaGJuTm1iM0p0UFNKMGNtRnVjMnhoZEdVb01qVXlNQ2tpTHo0OGRYTmxJSGhzYVc1ck9taHlaV1k5SWlOaElpQnpkSEp2YTJVdFpHRnphRzltWm5ObGREMGlOakV1TWlJZ2RISmhibk5tYjNKdFBTSjBjbUZ1YzJ4aGRHVW9NalUxTmlraUx6NDhkWE5sSUhoc2FXNXJPbWh5WldZOUlpTmhJaUJ6ZEhKdmEyVXRaR0Z6YUc5bVpuTmxkRDBpTmpBdU56Y2lJSFJ5WVc1elptOXliVDBpZEhKaGJuTnNZWFJsS0RJMU9USXBJaTgrUEhWelpTQjRiR2x1YXpwb2NtVm1QU0lqWVNJZ2MzUnliMnRsTFdSaGMyaHZabVp6WlhROUlqWXdMalFpSUhSeVlXNXpabTl5YlQwaWRISmhibk5zWVhSbEtESTJNamdwSWk4K1BIVnpaU0I0YkdsdWF6cG9jbVZtUFNJallTSWdjM1J5YjJ0bExXUmhjMmh2Wm1aelpYUTlJall3TGpFaUlIUnlZVzV6Wm05eWJUMGlkSEpoYm5Oc1lYUmxLREkyTmpRcElpOCtQSFZ6WlNCNGJHbHVhenBvY21WbVBTSWpZU0lnYzNSeWIydGxMV1JoYzJodlptWnpaWFE5SWpVNUxqZzFJaUIwY21GdWMyWnZjbTA5SW5SeVlXNXpiR0YwWlNneU56QXdLU0l2UGp4MWMyVWdlR3hwYm1zNmFISmxaajBpSTJFaUlITjBjbTlyWlMxa1lYTm9iMlptYzJWMFBTSTFPUzQyTlNJZ2RISmhibk5tYjNKdFBTSjBjbUZ1YzJ4aGRHVW9NamN6TmlraUx6NDhkWE5sSUhoc2FXNXJPbWh5WldZOUlpTmhJaUJ6ZEhKdmEyVXRaR0Z6YUc5bVpuTmxkRDBpTlRrdU5TSWdkSEpoYm5ObWIzSnRQU0owY21GdWMyeGhkR1VvTWpjM01pa2lMejQ4ZFhObElIaHNhVzVyT21oeVpXWTlJaU5oSWlCemRISnZhMlV0WkdGemFHOW1abk5sZEQwaU5Ua3VOQ0lnZEhKaGJuTm1iM0p0UFNKMGNtRnVjMnhoZEdVb01qZ3dPQ2tpTHo0OGRYTmxJSGhzYVc1ck9taHlaV1k5SWlOaElpQnpkSEp2YTJVdFpHRnphRzltWm5ObGREMGlOVGt1TXpRaUlIUnlZVzV6Wm05eWJUMGlkSEpoYm5Oc1lYUmxLREk0TkRRcElpOCtQSFZ6WlNCNGJHbHVhenBvY21WbVBTSWpZU0lnYzNSeWIydGxMV1JoYzJodlptWnpaWFE5SWpVNUxqTXlJaUIwY21GdWMyWnZjbTA5SW5SeVlXNXpiR0YwWlNneU9EZ3dLU0l2UGp3dlp6NDhaeUJwWkQwaVl5SStQSFZ6WlNCNGJHbHVhenBvY21WbVBTSWpZU0lnYzNSeWIydGxMV1JoYzJodlptWnpaWFE5SWpjd0xqY3hJaUIwY21GdWMyWnZjbTA5SW5SeVlXNXpiR0YwWlNneU1UazJLU0lnYjNCaFkybDBlVDBpTGpBMUlpOCtQSFZ6WlNCNGJHbHVhenBvY21WbVBTSWpZU0lnYzNSeWIydGxMV1JoYzJodlptWnpaWFE5SWpZNUxqRTJJaUIwY21GdWMyWnZjbTA5SW5SeVlXNXpiR0YwWlNneU1qTXlLU0lnYjNCaFkybDBlVDBpTGpFaUx6NDhkWE5sSUhoc2FXNXJPbWh5WldZOUlpTmhJaUJ6ZEhKdmEyVXRaR0Z6YUc5bVpuTmxkRDBpTmpjdU56a2lJSFJ5WVc1elptOXliVDBpZEhKaGJuTnNZWFJsS0RJeU5qZ3BJaUJ2Y0dGamFYUjVQU0l1TVRVaUx6NDhkWE5sSUhoc2FXNXJPbWh5WldZOUlpTmhJaUJ6ZEhKdmEyVXRaR0Z6YUc5bVpuTmxkRDBpTmpZdU5UY2lJSFJ5WVc1elptOXliVDBpZEhKaGJuTnNZWFJsS0RJek1EUXBJaUJ2Y0dGamFYUjVQU0l1TWlJdlBqeDFjMlVnZUd4cGJtczZhSEpsWmowaUkyRWlJSE4wY205clpTMWtZWE5vYjJabWMyVjBQU0kyTlM0ME9TSWdkSEpoYm5ObWIzSnRQU0owY21GdWMyeGhkR1VvTWpNME1Da2lJRzl3WVdOcGRIazlJaTR5TlNJdlBqeDFjMlVnZUd4cGJtczZhSEpsWmowaUkyRWlJSE4wY205clpTMWtZWE5vYjJabWMyVjBQU0kyTkM0MU15SWdkSEpoYm5ObWIzSnRQU0owY21GdWMyeGhkR1VvTWpNM05pa2lJRzl3WVdOcGRIazlJaTR6SWk4K1BIVnpaU0I0YkdsdWF6cG9jbVZtUFNJallTSWdjM1J5YjJ0bExXUmhjMmh2Wm1aelpYUTlJall6TGpZNElpQjBjbUZ1YzJadmNtMDlJblJ5WVc1emJHRjBaU2d5TkRFeUtTSWdiM0JoWTJsMGVUMGlMak0xSWk4K1BIVnpaU0I0YkdsdWF6cG9jbVZtUFNJallTSWdjM1J5YjJ0bExXUmhjMmh2Wm1aelpYUTlJall5TGpreklpQjBjbUZ1YzJadmNtMDlJblJ5WVc1emJHRjBaU2d5TkRRNEtTSWdiM0JoWTJsMGVUMGlMalFpTHo0OGRYTmxJSGhzYVc1ck9taHlaV1k5SWlOaElpQnpkSEp2YTJVdFpHRnphRzltWm5ObGREMGlOakl1TWpjaUlIUnlZVzV6Wm05eWJUMGlkSEpoYm5Oc1lYUmxLREkwT0RRcElpQnZjR0ZqYVhSNVBTSXVORFVpTHo0OGRYTmxJSGhzYVc1ck9taHlaV1k5SWlOaElpQnpkSEp2YTJVdFpHRnphRzltWm5ObGREMGlOakV1TnlJZ2RISmhibk5tYjNKdFBTSjBjbUZ1YzJ4aGRHVW9NalV5TUNraUlHOXdZV05wZEhrOUlpNDFJaTgrUEhWelpTQjRiR2x1YXpwb2NtVm1QU0lqWVNJZ2MzUnliMnRsTFdSaGMyaHZabVp6WlhROUlqWXhMaklpSUhSeVlXNXpabTl5YlQwaWRISmhibk5zWVhSbEtESTFOVFlwSWlCdmNHRmphWFI1UFNJdU5UVWlMejQ4ZFhObElIaHNhVzVyT21oeVpXWTlJaU5oSWlCemRISnZhMlV0WkdGemFHOW1abk5sZEQwaU5qQXVOemNpSUhSeVlXNXpabTl5YlQwaWRISmhibk5zWVhSbEtESTFPVElwSWlCdmNHRmphWFI1UFNJdU5pSXZQangxYzJVZ2VHeHBibXM2YUhKbFpqMGlJMkVpSUhOMGNtOXJaUzFrWVhOb2IyWm1jMlYwUFNJMk1DNDBJaUIwY21GdWMyWnZjbTA5SW5SeVlXNXpiR0YwWlNneU5qSTRLU0lnYjNCaFkybDBlVDBpTGpZMUlpOCtQSFZ6WlNCNGJHbHVhenBvY21WbVBTSWpZU0lnYzNSeWIydGxMV1JoYzJodlptWnpaWFE5SWpZd0xqRWlJSFJ5WVc1elptOXliVDBpZEhKaGJuTnNZWFJsS0RJMk5qUXBJaUJ2Y0dGamFYUjVQU0l1TnlJdlBqeDFjMlVnZUd4cGJtczZhSEpsWmowaUkyRWlJSE4wY205clpTMWtZWE5vYjJabWMyVjBQU0kxT1M0NE5TSWdkSEpoYm5ObWIzSnRQU0owY21GdWMyeGhkR1VvTWpjd01Da2lJRzl3WVdOcGRIazlJaTQzTlNJdlBqeDFjMlVnZUd4cGJtczZhSEpsWmowaUkyRWlJSE4wY205clpTMWtZWE5vYjJabWMyVjBQU0kxT1M0Mk5TSWdkSEpoYm5ObWIzSnRQU0owY21GdWMyeGhkR1VvTWpjek5pa2lJRzl3WVdOcGRIazlJaTQ0SWk4K1BIVnpaU0I0YkdsdWF6cG9jbVZtUFNJallTSWdjM1J5YjJ0bExXUmhjMmh2Wm1aelpYUTlJalU1TGpVaUlIUnlZVzV6Wm05eWJUMGlkSEpoYm5Oc1lYUmxLREkzTnpJcElpQnZjR0ZqYVhSNVBTSXVPRFVpTHo0OGRYTmxJSGhzYVc1ck9taHlaV1k5SWlOaElpQnpkSEp2YTJVdFpHRnphRzltWm5ObGREMGlOVGt1TkNJZ2RISmhibk5tYjNKdFBTSjBjbUZ1YzJ4aGRHVW9Namd3T0NraUlHOXdZV05wZEhrOUlpNDVJaTgrUEhWelpTQjRiR2x1YXpwb2NtVm1QU0lqWVNJZ2MzUnliMnRsTFdSaGMyaHZabVp6WlhROUlqVTVMak0wSWlCMGNtRnVjMlp2Y20wOUluUnlZVzV6YkdGMFpTZ3lPRFEwS1NJZ2IzQmhZMmwwZVQwaUxqazFJaTgrUEhWelpTQjRiR2x1YXpwb2NtVm1QU0lqWVNJZ2MzUnliMnRsTFdSaGMyaHZabVp6WlhROUlqVTVMak15SWlCMGNtRnVjMlp2Y20wOUluUnlZVzV6YkdGMFpTZ3lPRGd3S1NJdlBqd3ZaejQ4TDJSbFpuTStQSFZ6WlNCNGJHbHVhenBvY21WbVBTSWpZaUlnYzNSeWIydGxQU0lqTkRJNE5XWTBJaTgrUEhWelpTQjRiR2x1YXpwb2NtVm1QU0lqWXlJZ2MzUnliMnRsUFNJalpHSTBORE0zSWk4K1BIVnpaU0I0YkdsdWF6cG9jbVZtUFNJallpSWdjM1J5YjJ0bFBTSWpaR0kwTkRNM0lpQjBjbUZ1YzJadmNtMDlJblJ5WVc1emJHRjBaU2d5T1RFMktTSXZQangxYzJVZ2VHeHBibXM2YUhKbFpqMGlJMk1pSUhOMGNtOXJaVDBpSTJZMFlqUXdNQ0lnZEhKaGJuTm1iM0p0UFNKMGNtRnVjMnhoZEdVb01qa3hOaWtpTHo0OGRYTmxJSGhzYVc1ck9taHlaV1k5SWlOaUlpQnpkSEp2YTJVOUlpTm1OR0kwTURBaUlIUnlZVzV6Wm05eWJUMGlkSEpoYm5Oc1lYUmxLRFU0TXpJcElpOCtQSFZ6WlNCNGJHbHVhenBvY21WbVBTSWpZeUlnYzNSeWIydGxQU0lqTUdZNVpEVTRJaUIwY21GdWMyWnZjbTA5SW5SeVlXNXpiR0YwWlNnMU9ETXlLU0l2UGp4MWMyVWdlR3hwYm1zNmFISmxaajBpSTJJaUlITjBjbTlyWlQwaUl6Qm1PV1ExT0NJZ2RISmhibk5tYjNKdFBTSjBjbUZ1YzJ4aGRHVW9PRGMwT0NraUx6NDhkWE5sSUhoc2FXNXJPbWh5WldZOUlpTmpJaUJ6ZEhKdmEyVTlJaU0wTWpnMVpqUWlJSFJ5WVc1elptOXliVDBpZEhKaGJuTnNZWFJsS0RnM05EZ3BJaTgrUEM5emRtYysnKTtiYWNrZ3JvdW5kLXNpemU6MTAwJTt3aWR0aDoxMTY2NHB4O2hlaWdodDozNnB4Oy13ZWJraXQtYW5pbWF0aW9uOnN3Zy1sb2FkaW5nLWZpbG0gNTMzMm1zIGluZmluaXRlIHN0ZXBzKDMyNCk7YW5pbWF0aW9uOnN3Zy1sb2FkaW5nLWZpbG0gNTMzMm1zIGluZmluaXRlIHN0ZXBzKDMyNCl9QC13ZWJraXQta2V5ZnJhbWVzIHN3Zy1sb2FkaW5nLWZpbG17MCV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWCgwKTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgwKX10b3std2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVYKC0xMTY2NHB4KTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgtMTE2NjRweCl9fUBrZXlmcmFtZXMgc3dnLWxvYWRpbmctZmlsbXswJXstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVYKDApO3RyYW5zZm9ybTp0cmFuc2xhdGVYKDApfXRvey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTExNjY0cHgpO3RyYW5zZm9ybTp0cmFuc2xhdGVYKC0xMTY2NHB4KX19QC13ZWJraXQta2V5ZnJhbWVzIG1zcGluLXJvdGF0ZXswJXstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoMGRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgwZGVnKX10b3std2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoMzYwZGVnKTt0cmFuc2Zvcm06cm90YXRlKDM2MGRlZyl9fUBrZXlmcmFtZXMgbXNwaW4tcm90YXRlezAley13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgwZGVnKTt0cmFuc2Zvcm06cm90YXRlKDBkZWcpfXRvey13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpO3RyYW5zZm9ybTpyb3RhdGUoMzYwZGVnKX19QC13ZWJraXQta2V5ZnJhbWVzIG1zcGluLXJldnJvdHswJXstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoMGRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgwZGVnKX10b3std2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoLTM2MGRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgtMzYwZGVnKX19QGtleWZyYW1lcyBtc3Bpbi1yZXZyb3R7MCV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDBkZWcpO3RyYW5zZm9ybTpyb3RhdGUoMGRlZyl9dG97LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKC0zNjBkZWcpO3RyYW5zZm9ybTpyb3RhdGUoLTM2MGRlZyl9fVxcbi8qIyBzb3VyY2VVUkw9Ly4vc3JjL3VpL3VpLmNzcyovXCI7XG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSB3aGljaCBpcyByZXNvbHZlZCBhZnRlciB0aGUgZ2l2ZW4gZHVyYXRpb24gb2YgYW5pbWF0aW9uXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbCAtIEVsZW1lbnQgdG8gYmUgb2JzZXJ2ZWQuXG4gKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCBzdHJpbmd8bnVtYmVyPn0gcHJvcHMgLSBwcm9wZXJ0aWVzIHRvIGJlIGFuaW1hdGVkLlxuICogQHBhcmFtIHtudW1iZXJ9IGR1cmF0aW9uTWlsbGlzIC0gZHVyYXRpb24gb2YgYW5pbWF0aW9uLlxuICogQHBhcmFtIHtzdHJpbmd9IGN1cnZlIC0gdHJhbnNpdGlvbiBmdW5jdGlvbiBmb3IgdGhlIGFuaW1hdGlvbi5cbiAqIEByZXR1cm4geyFQcm9taXNlfSBQcm9taXNlIHdoaWNoIHJlc29sdmVzIG9uY2UgdGhlIGFuaW1hdGlvbiBpcyBkb25lIHBsYXlpbmcuXG4gKi9cbmZ1bmN0aW9uIHRyYW5zaXRpb24oZWwsIHByb3BzLCBkdXJhdGlvbk1pbGxpcywgY3VydmUpIHtcbiAgY29uc3Qgd2luID0gZWwub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldztcbiAgY29uc3QgcHJldmlvdXNUcmFuc2l0aW9uVmFsdWUgPSBlbC5zdHlsZS50cmFuc2l0aW9uIHx8ICcnO1xuICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgd2luLnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgd2luLnNldFRpbWVvdXQocmVzb2x2ZSwgZHVyYXRpb25NaWxsaXMpO1xuICAgICAgY29uc3QgdHIgPSBgJHtkdXJhdGlvbk1pbGxpc31tcyAke2N1cnZlfWA7XG4gICAgICBzZXRJbXBvcnRhbnRTdHlsZXMoZWwsIE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAndHJhbnNpdGlvbic6IGB0cmFuc2Zvcm0gJHt0cn0sIG9wYWNpdHkgJHt0cn1gLFxuICAgICAgfSwgcHJvcHMpKTtcbiAgICB9KTtcbiAgfSkudGhlbigoKSA9PiB7XG4gICAgc2V0SW1wb3J0YW50U3R5bGVzKGVsLCB7XG4gICAgICAndHJhbnNpdGlvbic6IHByZXZpb3VzVHJhbnNpdGlvblZhbHVlLFxuICAgIH0pO1xuICB9KTtcbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbmNsYXNzIEdyYXlwYW5lIHtcblxuICAvKipcbiAgICogQHBhcmFtIHshLi4vbW9kZWwvZG9jLkRvY30gZG9jXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6SW5kZXhcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRvYywgekluZGV4KSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL21vZGVsL2RvYy5Eb2N9ICovXG4gICAgdGhpcy5kb2NfID0gZG9jO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUVsZW1lbnR9ICovXG4gICAgdGhpcy5mYWRlQmFja2dyb3VuZF8gPSB0aGlzLmRvY18uZ2V0V2luKCkuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ3N3Zy1wb3B1cC1iYWNrZ3JvdW5kJyk7XG4gICAgc2V0SW1wb3J0YW50U3R5bGVzKHRoaXMuZmFkZUJhY2tncm91bmRfLCB7XG4gICAgICAnei1pbmRleCc6IHpJbmRleCxcbiAgICAgICdkaXNwbGF5JzogJ25vbmUnLFxuICAgICAgJ3Bvc2l0aW9uJzogJ2ZpeGVkJyxcbiAgICAgICd0b3AnOiAwLFxuICAgICAgJ3JpZ2h0JzogMCxcbiAgICAgICdib3R0b20nOiAwLFxuICAgICAgJ2xlZnQnOiAwLFxuICAgICAgJ2JhY2tncm91bmQtY29sb3InOiAncmdiYSgzMiwgMzMsIDM2LCAuNiknLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFFbGVtZW50fVxuICAgKi9cbiAgZ2V0RWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5mYWRlQmFja2dyb3VuZF87XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzQXR0YWNoZWQoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5mYWRlQmFja2dyb3VuZF8ucGFyZW50Tm9kZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBdHRhY2hlcyB0aGUgZ3JheXBhbmUgdG8gdGhlIGRvY3VtZW50LlxuICAgKi9cbiAgYXR0YWNoKCkge1xuICAgIHRoaXMuZG9jXy5nZXRCb2R5KCkuYXBwZW5kQ2hpbGQodGhpcy5mYWRlQmFja2dyb3VuZF8pO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGFjaGVzIHRoZSBncmF5cGFuZSB0byB0aGUgZG9jdW1lbnQuXG4gICAqL1xuICBkZXN0cm95KCkge1xuICAgIHRoaXMuZG9jXy5nZXRCb2R5KCkucmVtb3ZlQ2hpbGQodGhpcy5mYWRlQmFja2dyb3VuZF8pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNob3dzIHRoZSBncmF5cGFuZS5cbiAgICogQHBhcmFtIHtib29sZWFuPX0gYW5pbWF0ZWRcbiAgICogQHJldHVybiB7IVByb21pc2V8dW5kZWZpbmVkfVxuICAgKi9cbiAgc2hvdyhhbmltYXRlZCA9IHRydWUpIHtcbiAgICBzZXRJbXBvcnRhbnRTdHlsZXModGhpcy5mYWRlQmFja2dyb3VuZF8sIHtcbiAgICAgICdkaXNwbGF5JzogJ2Jsb2NrJyxcbiAgICAgICdvcGFjaXR5JzogYW5pbWF0ZWQgPyAwIDogMSxcbiAgICB9KTtcbiAgICBpZiAoYW5pbWF0ZWQpIHtcbiAgICAgIHJldHVybiB0cmFuc2l0aW9uKHRoaXMuZmFkZUJhY2tncm91bmRfLCB7XG4gICAgICAgICdvcGFjaXR5JzogMSxcbiAgICAgIH0sIDMwMCwgJ2Vhc2Utb3V0Jyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhpZGVzIHRoZSBncmF5cGFuZS5cbiAgICogQHBhcmFtIHtib29sZWFuPX0gYW5pbWF0ZWRcbiAgICogQHJldHVybiB7IVByb21pc2V8dW5kZWZpbmVkfVxuICAgKi9cbiAgaGlkZShhbmltYXRlZCA9IHRydWUpIHtcbiAgICBpZiAoYW5pbWF0ZWQpIHtcbiAgICAgIHJldHVybiB0cmFuc2l0aW9uKHRoaXMuZmFkZUJhY2tncm91bmRfLCB7XG4gICAgICAgICdvcGFjaXR5JzogMCxcbiAgICAgIH0sIDMwMCwgJ2Vhc2Utb3V0JykudGhlbigoKSA9PiB7XG4gICAgICAgIHNldEltcG9ydGFudFN0eWxlcyh0aGlzLmZhZGVCYWNrZ3JvdW5kXywgeydkaXNwbGF5JzogJ25vbmUnfSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgc2V0SW1wb3J0YW50U3R5bGVzKHRoaXMuZmFkZUJhY2tncm91bmRfLCB7J2Rpc3BsYXknOiAnbm9uZSd9KTtcbiAgfVxufVxuXG4vKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cblxuLyoqXG4gKiBMb2FkaW5nIGluZGljYXRvciBjbGFzcy4gQnVpbGRzIHRoZSBsb2FkaW5nIGluZGljYXRvciB2aWV3IHRvIGJlIGluamVjdGVkIGluXG4gKiBwYXJlbnQgZWxlbWVudCA8aWZyYW1lIGNsYXNzPVwic3dnLWRpYWxvZ1wiPiBlbGVtZW50LiBQcm92aWRlcyBtZXRob2RzIHRvXG4gKiBzaG93L2hpZGUgbG9hZGluZyBpbmRpY2F0b3IuXG4gKi9cbmNsYXNzIExvYWRpbmdWaWV3IHtcblxuICAvKipcbiAgICogQHBhcmFtIHshRG9jdW1lbnR9IGRvY1xuICAgKi9cbiAgY29uc3RydWN0b3IoZG9jKSB7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshRG9jdW1lbnR9ICovXG4gICAgdGhpcy5kb2NfID0gZG9jO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUVsZW1lbnR9ICovXG4gICAgdGhpcy5sb2FkaW5nQ29udGFpbmVyXyA9XG4gICAgICAgIGNyZWF0ZUVsZW1lbnQodGhpcy5kb2NfLCAnc3dnLWxvYWRpbmctY29udGFpbmVyJywge30pO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUVsZW1lbnR9ICovXG4gICAgdGhpcy5sb2FkaW5nXyA9IGNyZWF0ZUVsZW1lbnQodGhpcy5kb2NfLCAnc3dnLWxvYWRpbmcnLCB7fSk7XG4gICAgdGhpcy5sb2FkaW5nQ29udGFpbmVyXy5hcHBlbmRDaGlsZCh0aGlzLmxvYWRpbmdfKTtcblxuICAgIHRoaXMubG9hZGluZ0NvbnRhaW5lcl8uc3R5bGUuc2V0UHJvcGVydHkoJ2Rpc3BsYXknLCAnbm9uZScsICdpbXBvcnRhbnQnKTtcblxuICAgIC8vIEJ1aWxkIHRoZSBhbmltYXRlZCBsb2FkaW5nIGluZGljYXRvci5cbiAgICB0aGlzLmJ1aWxkTG9hZGluZ0luZGljYXRvcl8oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBwb3B1bGF0ZWQgbG9hZGluZyBjb250YWluZXIuXG4gICAqIEByZXR1cm4geyFFbGVtZW50fVxuICAgKi9cbiAgZ2V0RWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5sb2FkaW5nQ29udGFpbmVyXztcbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93cyB0aGUgbG9hZGluZyBpbmRpY2F0b3Igd2l0aGluIHRoZSBjb250YWluZXIgZWxlbWVudC5cbiAgICovXG4gIHNob3coKSB7XG4gICAgdGhpcy5sb2FkaW5nQ29udGFpbmVyXy5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnZGlzcGxheScpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhpZGVzIHRoZSBsb2FkaW5nIGluZGljYXRvciB3aXRoaW4gdGhlIGNvbnRhaW5lciBlbGVtZW50LlxuICAgKi9cbiAgaGlkZSgpIHtcbiAgICB0aGlzLmxvYWRpbmdDb250YWluZXJfLnN0eWxlLnNldFByb3BlcnR5KCdkaXNwbGF5JywgJ25vbmUnLCAnaW1wb3J0YW50Jyk7XG4gIH1cblxuICAvKipcbiAgICogUG9wdWxhdGVzIHRoZSBsb2FkaW5nIGluZGl2aWNhdG9yLiBUaGUgcG9wdWxhdGVkIGVsZW1lbnRcbiAgICogY2FuIGJlIGFkZGVkIGluIGFueSB2aWV3LCB3aGVuIHJlcXVpcmVkLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYnVpbGRMb2FkaW5nSW5kaWNhdG9yXygpIHtcbiAgICBjb25zdCBsb2FkaW5nQ29udGFpbmVyID0gdGhpcy5sb2FkaW5nXztcblxuICAgIGNvbnN0IGxvYWRpbmdJbmRpY2F0b3JUb3BDb250YWluZXIgPVxuICAgICAgICBjcmVhdGVFbGVtZW50KHRoaXMuZG9jXywgJ3N3Zy1sb2FkaW5nLWFuaW1hdGUnLCB7fSk7XG4gICAgbG9hZGluZ0NvbnRhaW5lci5hcHBlbmRDaGlsZChsb2FkaW5nSW5kaWNhdG9yVG9wQ29udGFpbmVyKTtcblxuICAgIGNvbnN0IGxvYWRpbmdJbmRpY2F0b3JDaGlsZENvbnRhaW5lciA9XG4gICAgICAgIGNyZWF0ZUVsZW1lbnQodGhpcy5kb2NfLCAnc3dnLWxvYWRpbmctaW1hZ2UnLCB7fSk7XG4gICAgbG9hZGluZ0luZGljYXRvclRvcENvbnRhaW5lci5hcHBlbmRDaGlsZChsb2FkaW5nSW5kaWNhdG9yQ2hpbGRDb250YWluZXIpO1xuICB9XG59XG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqIEBjb25zdCB7IU9iamVjdDxzdHJpbmd8bnVtYmVyPn0gKi9cbmNvbnN0IGZyaWVuZGx5SWZyYW1lQXR0cmlidXRlcyA9IHtcbiAgJ2ZyYW1lYm9yZGVyJzogMCxcbiAgJ3Njcm9sbGluZyc6ICdubycsXG4gICdzcmMnOiAnYWJvdXQ6YmxhbmsnLFxufTtcblxuLyoqXG4gKiBUaGUgY2xhc3MgZm9yIGJ1aWxkaW5nIGZyaWVuZGx5IGlmcmFtZS5cbiAqL1xuY2xhc3MgRnJpZW5kbHlJZnJhbWUge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIHN0cmluZ3xudW1iZXI+PX0gYXR0cnNcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRvYywgYXR0cnMgPSB7fSkge1xuXG4gICAgY29uc3QgbWVyZ2VkQXR0cnMgPSBPYmplY3QuYXNzaWduKHt9LCBmcmllbmRseUlmcmFtZUF0dHJpYnV0ZXMsIGF0dHJzKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFIVE1MSUZyYW1lRWxlbWVudH0gKi9cbiAgICB0aGlzLmlmcmFtZV8gPVxuICAgICAgICAvKiogQHR5cGUgeyFIVE1MSUZyYW1lRWxlbWVudH0gKi8gKFxuICAgICAgICAgICAgY3JlYXRlRWxlbWVudChkb2MsICdpZnJhbWUnLCBtZXJnZWRBdHRycykpO1xuXG4gICAgLy8gRW5zdXJlIHRoYXQgdGhlIG5ldyBpZnJhbWUgZG9lcyBub3QgaW5oZXJpdCBhbnkgQ1NTIHN0eWxlcy5cbiAgICByZXNldEFsbFN0eWxlcyh0aGlzLmlmcmFtZV8pO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVByb21pc2V9ICovXG4gICAgdGhpcy5yZWFkeV8gPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIHRoaXMuaWZyYW1lXy5vbmxvYWQgPSByZXNvbHZlO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFdoZW4gcHJvbWlzZSBpcyByZXNvbHZlZC5cbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICB3aGVuUmVhZHkoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVhZHlfO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGlmcmFtZSBlbGVtZW50LlxuICAgKiBAcmV0dXJuIHshSFRNTElGcmFtZUVsZW1lbnR9XG4gICAqL1xuICBnZXRFbGVtZW50KCkge1xuICAgIHJldHVybiB0aGlzLmlmcmFtZV87XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgZG9jdW1lbnQgb2JqZWN0IG9mIHRoZSBpZnJhbWUgZWxlbWVudC5cbiAgICogQHJldHVybiB7IURvY3VtZW50fVxuICAgKi9cbiAgZ2V0RG9jdW1lbnQoKSB7XG4gICAgY29uc3QgZG9jID0gdGhpcy5nZXRFbGVtZW50KCkuY29udGVudERvY3VtZW50IHx8XG4gICAgICAgICh0aGlzLmdldEVsZW1lbnQoKS5jb250ZW50V2luZG93ICYmXG4gICAgICAgIHRoaXMuZ2V0RWxlbWVudCgpLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQpO1xuXG4gICAgaWYgKCFkb2MpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignbm90IGxvYWRlZCcpO1xuICAgIH1cbiAgICByZXR1cm4gZG9jO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGJvZHkgb2YgdGhlIGlmcmFtZS5cbiAgICogQHJldHVybiB7IUVsZW1lbnR9XG4gICAqL1xuICBnZXRCb2R5KCkge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyFFbGVtZW50fSAqLyAodGhpcy5nZXREb2N1bWVudCgpLmJvZHkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIGlmcmFtZSBpcyBjb25uZWN0ZWQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBpc0Nvbm5lY3RlZCgpIHtcbiAgICBpZiAoIXRoaXMuZ2V0RWxlbWVudCgpLm93bmVyRG9jdW1lbnQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZ2V0RWxlbWVudCgpLm93bmVyRG9jdW1lbnQuY29udGFpbnModGhpcy5pZnJhbWVfKTtcbiAgfVxufVxuXG4vKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmNvbnN0IFpfSU5ERVggPSAyMTQ3NDgzNjQ3O1xuXG4vKipcbiAqIERlZmF1bHQgaWZyYW1lIGltcG9ydGFudCBzdHlsZXMuXG4gKiBOb3RlOiBUaGUgaWZyYW1lIHJlc3BvbnNpdmVuZXNzIG1lZGlhIHF1ZXJ5IHN0eWxlIGlzIGluamVjdGVkIGluIHRoZVxuICogcHVibGlzaGVyJ3MgcGFnZSBzaW5jZSBzdHlsZSBhdHRyaWJ1dGUgY2FuIG5vdCBpbmNsdWRlIG1lZGlhIHF1ZXJ5LlxuICogQGNvbnN0IHshT2JqZWN0PHN0cmluZywgc3RyaW5nfG51bWJlcj59XG4gKi9cbmNvbnN0IHJvb3RFbGVtZW50SW1wb3J0YW50U3R5bGVzID0ge1xuICAnbWluLWhlaWdodCc6ICc1MHB4JyxcbiAgJ2JvcmRlcic6ICdub25lJyxcbiAgJ2Rpc3BsYXknOiAnYmxvY2snLFxuICAncG9zaXRpb24nOiAnZml4ZWQnLFxuICAnei1pbmRleCc6IFpfSU5ERVgsXG4gICdib3gtc2l6aW5nJzogJ2JvcmRlci1ib3gnLFxufTtcblxuLyoqXG4gKiBSZXNldCB2aWV3IHN0eWxlcy5cbiAqIEBjb25zdCB7IU9iamVjdDxzdHJpbmcsIHN0cmluZ3xudW1iZXI+fVxuICovXG5jb25zdCByZXNldFZpZXdTdHlsZXMgPSB7XG4gICdwb3NpdGlvbic6ICdhYnNvbHV0ZScsXG4gICd0b3AnOiAnMCcsXG4gICdsZWZ0JzogJzAnLFxuICAncmlnaHQnOiAnMCcsXG4gICdib3R0b20nOiAnMCcsXG4gICdvcGFjaXR5JzogMCxcbiAgLyogVGhlc2UgbGluZXMgYXJlIGEgd29yayBhcm91bmQgdG8gdGhpcyBpc3N1ZSBpbiBpT1M6ICAgICAqL1xuICAvKiBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTU1MTk4ICAgICAgICAgICovXG4gICdoZWlnaHQnOiAwLFxuICAnbWF4LWhlaWdodCc6ICcxMDAlJyxcbiAgJ21heC13aWR0aCc6ICcxMDAlJyxcbiAgJ21pbi1oZWlnaHQnOiAnMTAwJScsXG4gICdtaW4td2lkdGgnOiAnMTAwJScsXG4gICd3aWR0aCc6IDAsXG59O1xuXG4vKipcbiAqIFBvc2l0aW9uIG9mIHRoZSBkaWFsb2cuXG4gKiBAY29uc3QgQGVudW0ge3N0cmluZ31cbiAqL1xuY29uc3QgUG9zaXRpb25BdCA9IHtcbiAgQk9UVE9NOiAnQk9UVE9NJyxcbiAgVE9QOiAnVE9QJyxcbiAgRkxPQVQ6ICdGTE9BVCcsXG4gIEZVTEw6ICdGVUxMJyxcbn07XG5cblxuLyoqXG4gKiBUaGUgY2xhc3MgZm9yIHRoZSB0b3AgbGV2ZWwgZGlhbG9nLlxuICogQGZpbmFsXG4gKi9cbmNsYXNzIERpYWxvZyB7XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIGRpYWxvZyBmb3IgdGhlIHByb3ZpZGVkIGRvYy5cbiAgICogQHBhcmFtIHshLi4vbW9kZWwvZG9jLkRvY30gZG9jXG4gICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIHN0cmluZ3xudW1iZXI+PX0gaW1wb3J0YW50U3R5bGVzXG4gICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIHN0cmluZ3xudW1iZXI+PX0gc3R5bGVzXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihkb2MsIGltcG9ydGFudFN0eWxlcyA9IHt9LCBzdHlsZXMgPSB7fSkge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9tb2RlbC9kb2MuRG9jfSAqL1xuICAgIHRoaXMuZG9jXyA9IGRvYztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFGcmllbmRseUlmcmFtZX0gKi9cbiAgICB0aGlzLmlmcmFtZV8gPSBuZXcgRnJpZW5kbHlJZnJhbWUoXG4gICAgICAgIGRvYy5nZXRXaW4oKS5kb2N1bWVudCwgeydjbGFzcyc6ICdzd2ctZGlhbG9nJ30pO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUdyYXlwYW5lfSAqL1xuICAgIHRoaXMuZ3JheXBhbmVfID0gbmV3IEdyYXlwYW5lKGRvYywgWl9JTkRFWCAtIDEpO1xuXG4gICAgY29uc3QgbW9kaWZpZWRJbXBvcnRhbnRTdHlsZXMgPVxuICAgICAgICBPYmplY3QuYXNzaWduKHt9LCByb290RWxlbWVudEltcG9ydGFudFN0eWxlcywgaW1wb3J0YW50U3R5bGVzKTtcbiAgICBzZXRJbXBvcnRhbnRTdHlsZXMoXG4gICAgICAgIHRoaXMuaWZyYW1lXy5nZXRFbGVtZW50KCksIG1vZGlmaWVkSW1wb3J0YW50U3R5bGVzKTtcblxuICAgIHNldFN0eWxlcyh0aGlzLmlmcmFtZV8uZ2V0RWxlbWVudCgpLCBzdHlsZXMpO1xuXG4gICAgLyoqIEBwcml2YXRlIHtMb2FkaW5nVmlld30gKi9cbiAgICB0aGlzLmxvYWRpbmdWaWV3XyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9FbGVtZW50fSAqL1xuICAgIHRoaXMuY29udGFpbmVyXyA9IG51bGw7ICAvLyBEZXBlbmRzIG9uIGNvbnN0cnVjdGVkIGRvY3VtZW50IGluc2lkZSBpZnJhbWUuXG5cbiAgICAvKiogQHByaXZhdGUgez8uL3ZpZXcuVmlld30gKi9cbiAgICB0aGlzLnZpZXdfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P1Byb21pc2V9ICovXG4gICAgdGhpcy5hbmltYXRpbmdfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLmhpZGRlbl8gPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPcGVucyB0aGUgZGlhbG9nIGFuZCBidWlsZHMgdGhlIGlmcmFtZSBjb250YWluZXIuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IGhpZGRlblxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhRGlhbG9nPn1cbiAgICovXG4gIG9wZW4oaGlkZGVuID0gZmFsc2UpIHtcbiAgICBjb25zdCBpZnJhbWUgPSB0aGlzLmlmcmFtZV87XG4gICAgaWYgKGlmcmFtZS5pc0Nvbm5lY3RlZCgpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2FscmVhZHkgb3BlbmVkJyk7XG4gICAgfVxuXG4gICAgLy8gQXR0YWNoLlxuICAgIHRoaXMuZG9jXy5nZXRCb2R5KCkuYXBwZW5kQ2hpbGQoaWZyYW1lLmdldEVsZW1lbnQoKSk7ICAvLyBGaXJlcyBvbmxvYWQuXG4gICAgdGhpcy5ncmF5cGFuZV8uYXR0YWNoKCk7XG5cbiAgICBpZiAoaGlkZGVuKSB7XG4gICAgICBzZXRJbXBvcnRhbnRTdHlsZXMoaWZyYW1lLmdldEVsZW1lbnQoKSwge1xuICAgICAgICAndmlzaWJpbGl0eSc6ICdoaWRkZW4nLFxuICAgICAgICAnb3BhY2l0eSc6IDAsXG4gICAgICB9KTtcbiAgICAgIHRoaXMuaGlkZGVuXyA9IGhpZGRlbjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zaG93XygpO1xuICAgIH1cblxuICAgIHJldHVybiBpZnJhbWUud2hlblJlYWR5KCkudGhlbigoKSA9PiB7XG4gICAgICB0aGlzLmJ1aWxkSWZyYW1lXygpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQnVpbGQgdGhlIGlmcmFtZSB3aXRoIHRoZSBzdHlsaW5nIGFmdGVyIGlmcmFtZSBpcyBsb2FkZWQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBidWlsZElmcmFtZV8oKSB7XG4gICAgY29uc3QgaWZyYW1lID0gdGhpcy5pZnJhbWVfO1xuICAgIGNvbnN0IGlmcmFtZUJvZHkgPSBpZnJhbWUuZ2V0Qm9keSgpO1xuICAgIGNvbnN0IGlmcmFtZURvYyA9IC8qKiBAdHlwZSB7IUhUTUxEb2N1bWVudH0gKi8gKHRoaXMuaWZyYW1lXy5nZXREb2N1bWVudCgpKTtcblxuICAgIC8vIEluamVjdCBHb29nbGUgZm9udHMgaW4gPEhFQUQ+IHNlY3Rpb24gb2YgdGhlIGlmcmFtZS5cbiAgICBpbmplY3RTdHlsZVNoZWV0KGlmcmFtZURvYywgQ1NTJDEpO1xuXG4gICAgLy8gQWRkIExvYWRpbmcgaW5kaWNhdG9yLlxuICAgIHRoaXMubG9hZGluZ1ZpZXdfID0gbmV3IExvYWRpbmdWaWV3KGlmcmFtZURvYyk7XG4gICAgaWZyYW1lQm9keS5hcHBlbmRDaGlsZCh0aGlzLmxvYWRpbmdWaWV3Xy5nZXRFbGVtZW50KCkpO1xuXG4gICAgLy8gQ29udGFpbmVyIGZvciBhbGwgZHluYW1pYyBjb250ZW50LCBpbmNsdWRpbmcgM1AgaWZyYW1lLlxuICAgIHRoaXMuY29udGFpbmVyXyA9IGNyZWF0ZUVsZW1lbnQoaWZyYW1lRG9jLCAnc3dnLWNvbnRhaW5lcicsIHt9KTtcbiAgICBpZnJhbWVCb2R5LmFwcGVuZENoaWxkKHRoaXMuY29udGFpbmVyXyk7XG4gICAgdGhpcy5zZXRQb3NpdGlvbl8oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbG9zZXMgdGhlIGRpYWxvZy5cbiAgICogQHBhcmFtIHtib29sZWFuPX0gYW5pbWF0ZWRcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBjbG9zZShhbmltYXRlZCA9IHRydWUpIHtcbiAgICBsZXQgYW5pbWF0aW5nO1xuICAgIGlmIChhbmltYXRlZCkge1xuICAgICAgYW5pbWF0aW5nID0gdGhpcy5hbmltYXRlXygoKSA9PiB7XG4gICAgICAgIHRoaXMuZ3JheXBhbmVfLmhpZGUoLyogYW5pbWF0ZSAqLyB0cnVlKTtcbiAgICAgICAgcmV0dXJuIHRyYW5zaXRpb24odGhpcy5nZXRFbGVtZW50KCksIHtcbiAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVkoMTAwJSknLFxuICAgICAgICB9LCAzMDAsICdlYXNlLW91dCcpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFuaW1hdGluZyA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZXR1cm4gYW5pbWF0aW5nLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5kb2NfLmdldEJvZHkoKS5yZW1vdmVDaGlsZCh0aGlzLmlmcmFtZV8uZ2V0RWxlbWVudCgpKTtcbiAgICAgIHRoaXMucmVtb3ZlUGFkZGluZ1RvSHRtbF8oKTtcbiAgICAgIHRoaXMuZ3JheXBhbmVfLmRlc3Ryb3koKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjb250YWluZXIgd2l0aGluIHRoZSBkaWFsb2cuXG4gICAqIEByZXR1cm4geyFFbGVtZW50fVxuICAgKi9cbiAgZ2V0Q29udGFpbmVyKCkge1xuICAgIGlmICghdGhpcy5jb250YWluZXJfKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vdCBvcGVuZWQgeWV0Jyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcl87XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgYXR0YWNoZWQgaWZyYW1lIGluc3RhbmNlLlxuICAgKiBAcmV0dXJuIHshRnJpZW5kbHlJZnJhbWV9XG4gICAqL1xuICBnZXRJZnJhbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuaWZyYW1lXztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBJZnJhbWUgZWxlbWVudC5cbiAgICogQHJldHVybiB7IUhUTUxJRnJhbWVFbGVtZW50fVxuICAgKi9cbiAgZ2V0RWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5pZnJhbWVfLmdldEVsZW1lbnQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGRpc3BsYXkgbG9hZGluZyBpbmRpY2F0b3IuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNMb2FkaW5nXG4gICAqL1xuICBzZXRMb2FkaW5nKGlzTG9hZGluZykge1xuICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgIHRoaXMubG9hZGluZ1ZpZXdfLnNob3coKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5sb2FkaW5nVmlld18uaGlkZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAcmV0dXJuIHs/Li92aWV3LlZpZXd9ICovXG4gIGdldEN1cnJlbnRWaWV3KCkge1xuICAgIHJldHVybiB0aGlzLnZpZXdfO1xuICB9XG5cbiAgLyoqXG4gICAqIE9wZW5zIHRoZSBnaXZlbiB2aWV3IGFuZCByZW1vdmVzIGV4aXN0aW5nIHZpZXcgZnJvbSB0aGUgRE9NIGlmIGFueS5cbiAgICogQHBhcmFtIHshLi92aWV3LlZpZXd9IHZpZXdcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBvcGVuVmlldyh2aWV3KSB7XG4gICAgaWYgKHRoaXMudmlld18pIHtcbiAgICAgIC8vIFRPRE8oZHBhcmlraCk6IE1heWJlIEkgbmVlZCB0byBrZWVwIGl0IHVudGlsIHRoZSBuZXcgb25lIGlzIHJlYWR5LlxuICAgICAgcmVtb3ZlQ2hpbGRyZW4odGhpcy5nZXRDb250YWluZXIoKSk7XG4gICAgfVxuICAgIHRoaXMudmlld18gPSB2aWV3O1xuXG4gICAgc2V0SW1wb3J0YW50U3R5bGVzKHZpZXcuZ2V0RWxlbWVudCgpLCByZXNldFZpZXdTdHlsZXMpO1xuICAgIHRoaXMuc2V0TG9hZGluZyh0cnVlKTtcbiAgICB0aGlzLmdldENvbnRhaW5lcigpLmFwcGVuZENoaWxkKHZpZXcuZ2V0RWxlbWVudCgpKTtcblxuICAgIC8vIElmIHRoZSBjdXJyZW50IHZpZXcgc2hvdWxkIGZhZGUgdGhlIHBhcmVudCBkb2N1bWVudC5cbiAgICBpZiAodmlldy5zaG91bGRGYWRlQm9keSgpICYmICF0aGlzLmhpZGRlbl8pIHtcbiAgICAgIHRoaXMuZ3JheXBhbmVfLnNob3coLyogYW5pbWF0ZSAqLyB0cnVlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmlldy5pbml0KHRoaXMpLnRoZW4oKCkgPT4ge1xuICAgICAgc2V0SW1wb3J0YW50U3R5bGVzKHZpZXcuZ2V0RWxlbWVudCgpLCB7XG4gICAgICAgICdvcGFjaXR5JzogMSxcbiAgICAgIH0pO1xuICAgICAgaWYgKHRoaXMuaGlkZGVuXykge1xuICAgICAgICBpZiAodmlldy5zaG91bGRGYWRlQm9keSgpKSB7XG4gICAgICAgICAgdGhpcy5ncmF5cGFuZV8uc2hvdygvKiBhbmltYXRlZCAqLyB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNob3dfKCk7XG4gICAgICB9XG4gICAgICB0aGlzLnNldExvYWRpbmcoZmFsc2UpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNob3cgdGhlIGlmcmFtZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc2hvd18oKSB7XG4gICAgdGhpcy5hbmltYXRlXygoKSA9PiB7XG4gICAgICBzZXRJbXBvcnRhbnRTdHlsZXModGhpcy5nZXRFbGVtZW50KCksIHtcbiAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2xhdGVZKDEwMCUpJyxcbiAgICAgICAgJ29wYWN0aXknOiAxLFxuICAgICAgICAndmlzaWJpbGl0eSc6ICd2aXNpYmxlJyxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRyYW5zaXRpb24odGhpcy5nZXRFbGVtZW50KCksIHtcbiAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2xhdGVZKDApJyxcbiAgICAgICAgJ29wYWNpdHknOiAxLFxuICAgICAgICAndmlzaWJpbGl0eSc6ICd2aXNpYmxlJyxcbiAgICAgIH0sIDMwMCwgJ2Vhc2Utb3V0Jyk7XG4gICAgfSk7XG4gICAgdGhpcy5oaWRkZW5fID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogUmVzaXplcyB0aGUgZGlhbG9nIGNvbnRhaW5lci5cbiAgICogQHBhcmFtIHshLi92aWV3LlZpZXd9IHZpZXdcbiAgICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodFxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBhbmltYXRlZFxuICAgKiBAcmV0dXJuIHs/UHJvbWlzZX1cbiAgICovXG4gIHJlc2l6ZVZpZXcodmlldywgaGVpZ2h0LCBhbmltYXRlZCA9IHRydWUpIHtcbiAgICBpZiAodGhpcy52aWV3XyAhPSB2aWV3KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgbmV3SGVpZ2h0ID0gdGhpcy5nZXRNYXhBbGxvd2VkSGVpZ2h0XyhoZWlnaHQpO1xuXG4gICAgbGV0IGFuaW1hdGluZztcbiAgICBpZiAoYW5pbWF0ZWQpIHtcbiAgICAgIGNvbnN0IG9sZEhlaWdodCA9IHRoaXMuZ2V0RWxlbWVudCgpLm9mZnNldEhlaWdodDtcbiAgICAgIGlmIChuZXdIZWlnaHQgPj0gb2xkSGVpZ2h0KSB7XG4gICAgICAgIC8vIEV4cGFuZC5cbiAgICAgICAgYW5pbWF0aW5nID0gdGhpcy5hbmltYXRlXygoKSA9PiB7XG4gICAgICAgICAgc2V0SW1wb3J0YW50U3R5bGVzKHRoaXMuZ2V0RWxlbWVudCgpLCB7XG4gICAgICAgICAgICAnaGVpZ2h0JzogYCR7bmV3SGVpZ2h0fXB4YCxcbiAgICAgICAgICAgICd0cmFuc2Zvcm0nOiBgdHJhbnNsYXRlWSgke25ld0hlaWdodCAtIG9sZEhlaWdodH1weClgLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiB0cmFuc2l0aW9uKHRoaXMuZ2V0RWxlbWVudCgpLCB7XG4gICAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVkoMCknLFxuICAgICAgICAgIH0sIDMwMCwgJ2Vhc2Utb3V0Jyk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQ29sbGFwc2UuXG4gICAgICAgIGFuaW1hdGluZyA9IHRoaXMuYW5pbWF0ZV8oKCkgPT4ge1xuICAgICAgICAgIHJldHVybiB0cmFuc2l0aW9uKHRoaXMuZ2V0RWxlbWVudCgpLCB7XG4gICAgICAgICAgICAndHJhbnNmb3JtJzogYHRyYW5zbGF0ZVkoJHtvbGRIZWlnaHQgLSBuZXdIZWlnaHR9cHgpYCxcbiAgICAgICAgICB9LCAzMDAsICdlYXNlLW91dCcpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgc2V0SW1wb3J0YW50U3R5bGVzKHRoaXMuZ2V0RWxlbWVudCgpLCB7XG4gICAgICAgICAgICAgICdoZWlnaHQnOiBgJHtuZXdIZWlnaHR9cHhgLFxuICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVkoMCknLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzZXRJbXBvcnRhbnRTdHlsZXModGhpcy5nZXRFbGVtZW50KCksIHtcbiAgICAgICAgJ2hlaWdodCc6IGAke25ld0hlaWdodH1weGAsXG4gICAgICB9KTtcbiAgICAgIGFuaW1hdGluZyA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZXR1cm4gYW5pbWF0aW5nLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy51cGRhdGVQYWRkaW5nVG9IdG1sXyhoZWlnaHQpO1xuICAgICAgdmlldy5yZXNpemVkKCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbigpOiFQcm9taXNlfSBjYWxsYmFja1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFuaW1hdGVfKGNhbGxiYWNrKSB7XG4gICAgY29uc3Qgd2FpdCA9IHRoaXMuYW5pbWF0aW5nXyB8fCBQcm9taXNlLnJlc29sdmUoKTtcbiAgICByZXR1cm4gdGhpcy5hbmltYXRpbmdfID0gd2FpdC50aGVuKCgpID0+IHtcbiAgICAgIHJldHVybiBjYWxsYmFjaygpO1xuICAgIH0sICgpID0+IHtcbiAgICAgIC8vIElnbm9yZSBlcnJvcnMgdG8gbWFrZSBzdXJlIGFuaW1hdGlvbnMgZG9uJ3QgZ2V0IHN0dWNrLlxuICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5hbmltYXRpbmdfID0gbnVsbDtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIG1heGltdW0gYWxsb3dlZCBoZWlnaHQgZm9yIGN1cnJlbnQgdmlld3BvcnQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHRcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0TWF4QWxsb3dlZEhlaWdodF8oaGVpZ2h0KSB7XG4gICAgcmV0dXJuIE1hdGgubWluKGhlaWdodCwgdGhpcy5kb2NfLmdldFdpbigpLi8qT0sqL2lubmVySGVpZ2h0ICogMC45KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBlbGVtZW50J3MgaGVpZ2h0LlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRIZWlnaHRfKCkge1xuICAgIHJldHVybiB0aGlzLmdldEVsZW1lbnQoKS5vZmZzZXRIZWlnaHQ7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgcG9zaXRpb24gb2YgdGhlIGRpYWxvZy4gQ3VycmVudGx5ICdCT1RUT00nIGlzIHNldCBieSBkZWZhdWx0LlxuICAgKi9cbiAgc2V0UG9zaXRpb25fKCkge1xuICAgIHNldEltcG9ydGFudFN0eWxlcyh0aGlzLmdldEVsZW1lbnQoKSwgdGhpcy5nZXRQb3NpdGlvblN0eWxlXygpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgdGhlIHBhZGRpbmcgdG8gdGhlIGNvbnRhaW5pbmcgcGFnZSBzbyBhcyB0byBub3QgaGlkZSB0aGUgY29udGVudFxuICAgKiBiZWhpbmQgdGhlIHBvcHVwLCBpZiByZW5kZXJlZCBhdCB0aGUgYm90dG9tLlxuICAgKiBAcGFyYW0ge251bWJlcn0gbmV3SGVpZ2h0XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB1cGRhdGVQYWRkaW5nVG9IdG1sXyhuZXdIZWlnaHQpIHtcbiAgICBpZiAodGhpcy5pbmZlclBvc2l0aW9uXygpID09IFBvc2l0aW9uQXQuQk9UVE9NKSB7XG4gICAgICBjb25zdCBib3R0b21QYWRkaW5nID0gbmV3SGVpZ2h0ICsgMjA7ICAvLyBBZGQgc29tZSBleHRyYSBwYWRkaW5nLlxuICAgICAgY29uc3QgaHRtbEVsZW1lbnQgPSB0aGlzLmRvY18uZ2V0Um9vdEVsZW1lbnQoKTtcbiAgICAgIHNldEltcG9ydGFudFN0eWxlcyhodG1sRWxlbWVudCwge1xuICAgICAgICAncGFkZGluZy1ib3R0b20nOiBgJHtib3R0b21QYWRkaW5nfXB4YCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIHByZXZpb3VseSBhZGRlZCBib3R0b20gcGFkZGluZyBmcm9tIHRoZSBkb2N1bWVudC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlbW92ZVBhZGRpbmdUb0h0bWxfKCkge1xuICAgIHRoaXMuZG9jXy5nZXRSb290RWxlbWVudCgpLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdwYWRkaW5nLWJvdHRvbScpO1xuICB9XG5cblxuICAvKipcbiAgICogQ2FsY3VsYXRlcyB0aGUgcG9zaXRpb24gb2YgdGhlIGRpYWxvZy4gQ3VycmVudGx5IGRpYWxvZyBpcyBwb3NpdGlvbmVkIGF0XG4gICAqIHRoZSBib3R0b20gb25seS4gVGhpcyBjb3VsZCBjaGFuZ2UgaW4gZnV0dXJlIHRvIGFkanVzdCB0aGUgZGlhbG9nIHBvc2l0aW9uXG4gICAqIGJhc2VkIG9uIHRoZSBzY3JlZW4gc2l6ZS5cbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaW5mZXJQb3NpdGlvbl8oKSB7XG4gICAgcmV0dXJuIFBvc2l0aW9uQXQuQk9UVE9NO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHN0eWxlcyByZXF1aXJlZCB0byBwb3N0aW9uIHRoZSBkaWFsb2cuXG4gICAqIEByZXR1cm4geyFPYmplY3Q8c3RyaW5nLCBzdHJpbmd8bnVtYmVyPn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldFBvc2l0aW9uU3R5bGVfKCkge1xuICAgIGNvbnN0IGRpYWxvZ1Bvc2l0aW9uID0gdGhpcy5pbmZlclBvc2l0aW9uXygpO1xuICAgIHN3aXRjaCAoZGlhbG9nUG9zaXRpb24pIHtcbiAgICAgIGNhc2UgUG9zaXRpb25BdC5CT1RUT006XG4gICAgICAgIHJldHVybiB7J2JvdHRvbSc6IDB9O1xuICAgICAgY2FzZSBQb3NpdGlvbkF0LlRPUDpcbiAgICAgICAgcmV0dXJuIHsndG9wJzogMH07XG4gICAgICBjYXNlIFBvc2l0aW9uQXQuRkxPQVQ6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgJ3Bvc2l0aW9uJzogJ2ZpeGVkJyxcbiAgICAgICAgICAndG9wJzogJzUwJScsXG4gICAgICAgICAgJ2xlZnQnOiAnNTAlJyxcbiAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZSgtNTAlLCAtNTAlKScsXG4gICAgICAgIH07XG4gICAgICBjYXNlIFBvc2l0aW9uQXQuRlVMTDpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAncG9zaXRpb24nOiAnZml4ZWQnLFxuICAgICAgICAgICdoZWlnaHQnOiAnMTAwJScsXG4gICAgICAgICAgJ3RvcCc6IDAsXG4gICAgICAgICAgJ2JvdHRvbSc6IDAsXG4gICAgICAgIH07XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4geydib3R0b20nOiAwfTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5jb25zdCBQT1BVUF9aX0lOREVYID0gMjE0NzQ4MzY0NztcblxuXG4vKipcbiAqIFRoZSBjbGFzcyBmb3IgdGhlIHRvcCBsZXZlbCBkaWFsb2cuXG4gKiBAZmluYWxcbiAqL1xuY2xhc3MgRGlhbG9nTWFuYWdlciB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4uL21vZGVsL2RvYy5Eb2N9IGRvY1xuICAgKi9cbiAgY29uc3RydWN0b3IoZG9jKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL21vZGVsL2RvYy5Eb2N9ICovXG4gICAgdGhpcy5kb2NfID0gZG9jO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/RGlhbG9nfSAqL1xuICAgIHRoaXMuZGlhbG9nXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9Qcm9taXNlPCFEaWFsb2c+fSAqL1xuICAgIHRoaXMub3BlblByb21pc2VfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFHcmF5cGFuZX0gKi9cbiAgICB0aGlzLnBvcHVwR3JheXBhbmVfID0gbmV3IEdyYXlwYW5lKGRvYywgUE9QVVBfWl9JTkRFWCk7XG5cbiAgICAvKiogQHByaXZhdGUgez9XaW5kb3d9ICovXG4gICAgdGhpcy5wb3B1cFdpbl8gPSBudWxsO1xuXG4gICAgdGhpcy5wb3B1cEdyYXlwYW5lXy5nZXRFbGVtZW50KCkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5wb3B1cFdpbl8pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB0aGlzLnBvcHVwV2luXy5mb2N1cygpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gSWdub3JlIGVycm9yLlxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFuPX0gaGlkZGVuXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFEaWFsb2c+fVxuICAgKi9cbiAgb3BlbkRpYWxvZyhoaWRkZW4gPSBmYWxzZSkge1xuICAgIGlmICghdGhpcy5vcGVuUHJvbWlzZV8pIHtcbiAgICAgIHRoaXMuZGlhbG9nXyA9IG5ldyBEaWFsb2codGhpcy5kb2NfKTtcbiAgICAgIHRoaXMub3BlblByb21pc2VfID0gdGhpcy5kaWFsb2dfLm9wZW4oaGlkZGVuKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMub3BlblByb21pc2VfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4vdmlldy5WaWV3fSB2aWV3XG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IGhpZGRlblxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIG9wZW5WaWV3KHZpZXcsIGhpZGRlbiA9IGZhbHNlKSB7XG4gICAgdmlldy53aGVuQ29tcGxldGUoKS5jYXRjaChyZWFzb24gPT4ge1xuICAgICAgaWYgKGlzQ2FuY2VsRXJyb3IocmVhc29uKSkge1xuICAgICAgICB0aGlzLmNvbXBsZXRlVmlldyh2aWV3KTtcbiAgICAgIH1cbiAgICAgIHRocm93IChyZWFzb24pO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLm9wZW5EaWFsb2coaGlkZGVuKS50aGVuKGRpYWxvZyA9PiB7XG4gICAgICByZXR1cm4gZGlhbG9nLm9wZW5WaWV3KHZpZXcpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Py4vdmlldy5WaWV3fSB2aWV3XG4gICAqL1xuICBjb21wbGV0ZVZpZXcodmlldykge1xuICAgIC8vIEdpdmUgYSBzbWFsbCBhbW91bnQgb2YgdGltZSBmb3IgYW5vdGhlciB2aWV3IHRvIHRha2Ugb3ZlciB0aGUgZGlhbG9nLlxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuZGlhbG9nXyAmJiB0aGlzLmRpYWxvZ18uZ2V0Q3VycmVudFZpZXcoKSA9PSB2aWV3KSB7XG4gICAgICAgIHRoaXMuY2xvc2VfKCk7XG4gICAgICB9XG4gICAgfSwgMTAwKTtcbiAgfVxuXG4gIC8qKlxuICAgKi9cbiAgY29tcGxldGVBbGwoKSB7XG4gICAgaWYgKHRoaXMuZGlhbG9nXykge1xuICAgICAgdGhpcy5jbG9zZV8oKTtcbiAgICB9XG4gICAgaWYgKHRoaXMucG9wdXBHcmF5cGFuZV8uaXNBdHRhY2hlZCgpKSB7XG4gICAgICB0aGlzLnBvcHVwR3JheXBhbmVfLmRlc3Ryb3koKTtcbiAgICB9XG4gIH1cblxuICAvKiogQHByaXZhdGUgKi9cbiAgY2xvc2VfKCkge1xuICAgIHRoaXMuZGlhbG9nXy5jbG9zZSgpO1xuICAgIHRoaXMuZGlhbG9nXyA9IG51bGw7XG4gICAgdGhpcy5vcGVuUHJvbWlzZV8gPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7P1dpbmRvd3x1bmRlZmluZWR9IHRhcmdldFdpblxuICAgKi9cbiAgcG9wdXBPcGVuZWQodGFyZ2V0V2luKSB7XG4gICAgdGhpcy5wb3B1cFdpbl8gPSB0YXJnZXRXaW4gfHwgbnVsbDtcbiAgICBpZiAoIXRoaXMucG9wdXBHcmF5cGFuZV8uaXNBdHRhY2hlZCgpKSB7XG4gICAgICB0aGlzLnBvcHVwR3JheXBhbmVfLmF0dGFjaCgpO1xuICAgIH1cbiAgICB0aGlzLnBvcHVwR3JheXBhbmVfLnNob3coKTtcbiAgfVxuXG4gIC8qKlxuICAgKi9cbiAgcG9wdXBDbG9zZWQoKSB7XG4gICAgdGhpcy5wb3B1cFdpbl8gPSBudWxsO1xuICAgIHRyeSB7XG4gICAgICB0aGlzLnBvcHVwR3JheXBhbmVfLmhpZGUoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBJZ25vcmUuXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuXG4vKipcbiAqIEBwYXJhbSB7IURvY3VtZW50fSBkb2NcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZ2V0UmVhZHlTdGF0ZShkb2MpIHtcbiAgcmV0dXJuIC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAoZG9jWydyZWFkeVN0YXRlJ10pO1xufVxuXG5cbi8qKlxuICogV2hldGhlciB0aGUgZG9jdW1lbnQgaXMgcmVhZHkuXG4gKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc0RvY3VtZW50UmVhZHkoZG9jKSB7XG4gIGNvbnN0IHJlYWR5U3RhdGUgPSBnZXRSZWFkeVN0YXRlKGRvYyk7XG4gIHJldHVybiByZWFkeVN0YXRlICE9ICdsb2FkaW5nJyAmJiByZWFkeVN0YXRlICE9ICd1bmluaXRpYWxpemVkJztcbn1cblxuLyoqXG4gKiBDYWxscyB0aGUgY2FsbGJhY2sgd2hlbiBkb2N1bWVudCBpcyByZWFkeS5cbiAqIEBwYXJhbSB7IURvY3VtZW50fSBkb2NcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oIURvY3VtZW50KX0gY2FsbGJhY2tcbiAqL1xuZnVuY3Rpb24gb25Eb2N1bWVudFJlYWR5KGRvYywgY2FsbGJhY2spIHtcbiAgb25Eb2N1bWVudFN0YXRlKGRvYywgaXNEb2N1bWVudFJlYWR5LCBjYWxsYmFjayk7XG59XG5cbi8qKlxuICogQ2FsbHMgdGhlIGNhbGxiYWNrIHdoZW4gZG9jdW1lbnQncyBzdGF0ZSBzYXRpc2ZpZXMgdGhlIHN0YXRlRm4uXG4gKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFEb2N1bWVudCk6Ym9vbGVhbn0gc3RhdGVGblxuICogQHBhcmFtIHtmdW5jdGlvbighRG9jdW1lbnQpfSBjYWxsYmFja1xuICovXG5mdW5jdGlvbiBvbkRvY3VtZW50U3RhdGUoZG9jLCBzdGF0ZUZuLCBjYWxsYmFjaykge1xuICBsZXQgcmVhZHkgPSBzdGF0ZUZuKGRvYyk7XG4gIGlmIChyZWFkeSkge1xuICAgIGNhbGxiYWNrKGRvYyk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgcmVhZHlMaXN0ZW5lciA9ICgpID0+IHtcbiAgICAgIGlmIChzdGF0ZUZuKGRvYykpIHtcbiAgICAgICAgaWYgKCFyZWFkeSkge1xuICAgICAgICAgIHJlYWR5ID0gdHJ1ZTtcbiAgICAgICAgICBjYWxsYmFjayhkb2MpO1xuICAgICAgICB9XG4gICAgICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZWFkeXN0YXRlY2hhbmdlJywgcmVhZHlMaXN0ZW5lcik7XG4gICAgICB9XG4gICAgfTtcbiAgICBkb2MuYWRkRXZlbnRMaXN0ZW5lcigncmVhZHlzdGF0ZWNoYW5nZScsIHJlYWR5TGlzdGVuZXIpO1xuICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aGVuIGRvY3VtZW50IGlzIHJlYWR5LlxuICogQHBhcmFtIHshRG9jdW1lbnR9IGRvY1xuICogQHJldHVybiB7IVByb21pc2U8IURvY3VtZW50Pn1cbiAqL1xuZnVuY3Rpb24gd2hlbkRvY3VtZW50UmVhZHkoZG9jKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICBvbkRvY3VtZW50UmVhZHkoZG9jLCByZXNvbHZlKTtcbiAgfSk7XG59XG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuXG4vKiogQGltcGxlbWVudHMge0RvY30gKi9cbmNsYXNzIEdsb2JhbERvYyB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd3whRG9jdW1lbnR9IHdpbk9yRG9jXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih3aW5PckRvYykge1xuICAgIGNvbnN0IGlzV2luID0gISF3aW5PckRvYy5kb2N1bWVudDtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IGlzV2luID9cbiAgICAgICAgLyoqIEB0eXBlIHshV2luZG93fSAqLyAod2luT3JEb2MpIDpcbiAgICAgICAgLyoqIEB0eXBlIHshV2luZG93fSAqLyAoXG4gICAgICAgICAgICAoLyoqIEB0eXBlIHshRG9jdW1lbnR9ICovICh3aW5PckRvYykpLmRlZmF1bHRWaWV3KTtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshRG9jdW1lbnR9ICovXG4gICAgdGhpcy5kb2NfID0gaXNXaW4gP1xuICAgICAgICAvKiogQHR5cGUgeyFXaW5kb3d9ICovICh3aW5PckRvYykuZG9jdW1lbnQgOlxuICAgICAgICAvKiogQHR5cGUgeyFEb2N1bWVudH0gKi8gKHdpbk9yRG9jKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0V2luKCkge1xuICAgIHJldHVybiB0aGlzLndpbl87XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldFJvb3ROb2RlKCkge1xuICAgIHJldHVybiB0aGlzLmRvY187XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldFJvb3RFbGVtZW50KCkge1xuICAgIHJldHVybiB0aGlzLmRvY18uZG9jdW1lbnRFbGVtZW50O1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXRIZWFkKCkge1xuICAgIC8vIGBkb2N1bWVudC5oZWFkYCBhbHdheXMgaGFzIGEgY2hhbmNlIHRvIGJlIHBhcnNlZCwgYXQgbGVhc3QgcGFydGlhbGx5LlxuICAgIHJldHVybiAvKiogQHR5cGUgeyFFbGVtZW50fSAqLyAodGhpcy5kb2NfLmhlYWQpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXRCb2R5KCkge1xuICAgIHJldHVybiB0aGlzLmRvY18uYm9keTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgaXNSZWFkeSgpIHtcbiAgICByZXR1cm4gaXNEb2N1bWVudFJlYWR5KHRoaXMuZG9jXyk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHdoZW5SZWFkeSgpIHtcbiAgICByZXR1cm4gd2hlbkRvY3VtZW50UmVhZHkodGhpcy5kb2NfKTtcbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHshRG9jdW1lbnR8IVdpbmRvd3whRG9jfSBpbnB1dFxuICogQHJldHVybiB7IURvY31cbiAqL1xuZnVuY3Rpb24gcmVzb2x2ZURvYyhpbnB1dCkge1xuICAvLyBJcyBpdCBhIGBEb2N1bWVudGBcbiAgaWYgKCgvKiogQHR5cGUgeyFEb2N1bWVudH0gKi8gKGlucHV0KSkubm9kZVR5cGUgPT09IC8qIERPQ1VNRU5UICovIDkpIHtcbiAgICByZXR1cm4gbmV3IEdsb2JhbERvYygvKiogQHR5cGUgeyFEb2N1bWVudH0gKi8gKGlucHV0KSk7XG4gIH1cbiAgLy8gSXMgaXQgYSBgV2luZG93YD9cbiAgaWYgKCgvKiogQHR5cGUgeyFXaW5kb3d9ICovIChpbnB1dCkpLmRvY3VtZW50KSB7XG4gICAgcmV0dXJuIG5ldyBHbG9iYWxEb2MoLyoqIEB0eXBlIHshV2luZG93fSAqLyAoaW5wdXQpKTtcbiAgfVxuICByZXR1cm4gLyoqIEB0eXBlIHshRG9jfSAqLyAoaW5wdXQpO1xufVxuXG4vKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKiBAY29uc3QgeyFPYmplY3Q8c3RyaW5nLCBzdHJpbmd8bnVtYmVyPn0gKi9cbmNvbnN0IHRvYXN0SW1wb3J0YW50U3R5bGVzID0ge1xuICAnaGVpZ2h0JzogMCxcbn07XG5cbi8qKiBAY29uc3QgeyFPYmplY3Q8c3RyaW5nLCBzdHJpbmc+fSAqL1xuY29uc3QgaWZyYW1lQXR0cmlidXRlcyQxID0ge1xuICAnZnJhbWVib3JkZXInOiAnMCcsXG4gICdzY3JvbGxpbmcnOiAnbm8nLFxuICAnY2xhc3MnOiAnc3dnLXRvYXN0Jyxcbn07XG5cbi8qKlxuICogVGhlIGNsYXNzIE5vdGlmaWNhdGlvbiB0b2FzdC5cbiAqL1xuY2xhc3MgVG9hc3Qge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuLi9ydW50aW1lL2RlcHMuRGVwc0RlZn0gZGVwc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gc3JjXG4gICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsID8+fSBhcmdzXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkZXBzLCBzcmMsIGFyZ3MpIHtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9tb2RlbC9kb2MuRG9jfSAqL1xuICAgIHRoaXMuZG9jXyA9IGRlcHMuZG9jKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshd2ViLWFjdGl2aXRpZXMvYWN0aXZpdHktcG9ydHMuQWN0aXZpdHlQb3J0c30gKi9cbiAgICB0aGlzLmFjdGl2aXR5UG9ydHNfID0gZGVwcy5hY3Rpdml0aWVzKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5zcmNfID0gc3JjO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IU9iamVjdDxzdHJpbmcsID8+fSAqL1xuICAgIHRoaXMuYXJnc18gPSBhcmdzO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/UHJvbWlzZX0gKi9cbiAgICB0aGlzLmFuaW1hdGluZ18gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUhUTUxJRnJhbWVFbGVtZW50fSAqL1xuICAgIHRoaXMuaWZyYW1lXyA9XG4gICAgICAgIC8qKiBAdHlwZSB7IUhUTUxJRnJhbWVFbGVtZW50fSAqLyAoXG4gICAgICAgICAgICBjcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgIHRoaXMuZG9jXy5nZXRXaW4oKS5kb2N1bWVudCxcbiAgICAgICAgICAgICAgICAnaWZyYW1lJyxcbiAgICAgICAgICAgICAgICBpZnJhbWVBdHRyaWJ1dGVzJDEpKTtcblxuICAgIHNldEltcG9ydGFudFN0eWxlcyh0aGlzLmlmcmFtZV8sIHRvYXN0SW1wb3J0YW50U3R5bGVzKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFQcm9taXNlfSAqL1xuICAgIHRoaXMucmVhZHlfID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICB0aGlzLmlmcmFtZV8ub25sb2FkID0gcmVzb2x2ZTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBpZnJhbWUgZWxlbWVudC5cbiAgICogQHJldHVybiB7IUhUTUxJRnJhbWVFbGVtZW50fVxuICAgKi9cbiAgZ2V0RWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5pZnJhbWVfO1xuICB9XG5cbiAgLyoqXG4gICAqIE9wZW5zIHRoZSBub3RpZmljYXRpb24gdG9hc3QuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgb3BlbigpIHtcbiAgICB0aGlzLmRvY18uZ2V0Qm9keSgpLmFwcGVuZENoaWxkKHRoaXMuaWZyYW1lXyk7ICAvLyBGaXJlcyBvbmxvYWQuXG4gICAgcmV0dXJuIHRoaXMuYnVpbGRUb2FzdF8oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCdWlsZHMgdGhlIGNvbnRlbnQgb2YgdGhlIGlmcmFtZS4gT24gbG9hZCwgYW5pbWF0ZXMgdGhlIHRvYXN0LlxuICAgKi9cbiAgYnVpbGRUb2FzdF8oKSB7XG4gICAgY29uc3QgdG9hc3REdXJhdGlvblNlY29uZHMgPSA3O1xuICAgIHJldHVybiB0aGlzLmFjdGl2aXR5UG9ydHNfLm9wZW5JZnJhbWUoXG4gICAgICAgIHRoaXMuaWZyYW1lXywgdGhpcy5zcmNfLCB0aGlzLmFyZ3NfKS50aGVuKHBvcnQgPT4ge1xuICAgICAgICAgIHJldHVybiBwb3J0LndoZW5SZWFkeSgpO1xuICAgICAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgICAgICByZXNldFN0eWxlcyh0aGlzLmlmcmFtZV8sIFsnaGVpZ2h0J10pO1xuXG4gICAgICAgICAgdGhpcy5hbmltYXRlXygoKSA9PiB7XG4gICAgICAgICAgICBzZXRJbXBvcnRhbnRTdHlsZXModGhpcy5pZnJhbWVfLCB7XG4gICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiAndHJhbnNsYXRlWSgxMDAlKScsXG4gICAgICAgICAgICAgICdvcGFjdGl5JzogMSxcbiAgICAgICAgICAgICAgJ3Zpc2liaWxpdHknOiAndmlzaWJsZScsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0cmFuc2l0aW9uKHRoaXMuaWZyYW1lXywge1xuICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVkoMCknLFxuICAgICAgICAgICAgICAnb3BhY2l0eSc6IDEsXG4gICAgICAgICAgICAgICd2aXNpYmlsaXR5JzogJ3Zpc2libGUnLFxuICAgICAgICAgICAgfSwgNDAwLCAnZWFzZS1vdXQnKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIENsb3NlIHRoZSBUb2FzdCBhZnRlciB0aGUgc3BlY2lmaWVkIGR1cmF0aW9uLlxuICAgICAgICAgIHRoaXMuZG9jXy5nZXRXaW4oKS5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICB9LCAodG9hc3REdXJhdGlvblNlY29uZHMgKyAxKSAqIDEwMDApO1xuICAgICAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCk6IVByb21pc2V9IGNhbGxiYWNrXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYW5pbWF0ZV8oY2FsbGJhY2spIHtcbiAgICBjb25zdCB3YWl0ID0gdGhpcy5hbmltYXRpbmdfIHx8IFByb21pc2UucmVzb2x2ZSgpO1xuICAgIHJldHVybiB0aGlzLmFuaW1hdGluZ18gPSB3YWl0LnRoZW4oKCkgPT4ge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7XG4gICAgfSwgKCkgPT4ge1xuICAgICAgLy8gSWdub3JlIGVycm9ycyB0byBtYWtlIHN1cmUgYW5pbWF0aW9ucyBkb24ndCBnZXQgc3R1Y2suXG4gICAgfSkudGhlbigoKSA9PiB7XG4gICAgICB0aGlzLmFuaW1hdGluZ18gPSBudWxsO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENsb3NlcyB0aGUgdG9hc3QuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgY2xvc2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuYW5pbWF0ZV8oKCkgPT4ge1xuICAgICAgLy8gUmVtb3ZlIHRoZSB0b2FzdCBmcm9tIHRoZSBET00gYWZ0ZXIgYW5pbWF0aW9uIGlzIGNvbXBsZXRlLlxuICAgICAgdGhpcy5kb2NfLmdldFdpbigpLnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLmRvY18uZ2V0Qm9keSgpLnJlbW92ZUNoaWxkKHRoaXMuaWZyYW1lXyk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgIH0sIDUwMCk7XG5cbiAgICAgIHJldHVybiB0cmFuc2l0aW9uKHRoaXMuaWZyYW1lXywge1xuICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZVkoMTAwJSknLFxuICAgICAgICAnb3BhY2l0eSc6IDEsXG4gICAgICAgICd2aXNpYmlsaXR5JzogJ3Zpc2libGUnLFxuICAgICAgfSwgNDAwLCAnZWFzZS1vdXQnKTtcbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmNvbnN0IFNFUlZJQ0VfSUQgPSAnc3Vic2NyaWJlLmdvb2dsZS5jb20nO1xuY29uc3QgVE9BU1RfU1RPUkFHRV9LRVkgPSAndG9hc3QnO1xuY29uc3QgRU5UU19TVE9SQUdFX0tFWSA9ICdlbnRzJztcblxuXG4vKipcbiAqL1xuY2xhc3MgRW50aXRsZW1lbnRzTWFuYWdlciB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEBwYXJhbSB7IS4uL21vZGVsL3BhZ2UtY29uZmlnLlBhZ2VDb25maWd9IGNvbmZpZ1xuICAgKiBAcGFyYW0geyEuL2ZldGNoZXIuRmV0Y2hlcn0gZmV0Y2hlclxuICAgKiBAcGFyYW0geyEuL2RlcHMuRGVwc0RlZn0gZGVwc1xuICAgKi9cbiAgY29uc3RydWN0b3Iod2luLCBjb25maWcsIGZldGNoZXIsIGRlcHMpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IHdpbjtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9tb2RlbC9wYWdlLWNvbmZpZy5QYWdlQ29uZmlnfSAqL1xuICAgIHRoaXMuY29uZmlnXyA9IGNvbmZpZztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnB1YmxpY2F0aW9uSWRfID0gdGhpcy5jb25maWdfLmdldFB1YmxpY2F0aW9uSWQoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuL2ZldGNoZXIuRmV0Y2hlcn0gKi9cbiAgICB0aGlzLmZldGNoZXJfID0gZmV0Y2hlcjtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuL2RlcHMuRGVwc0RlZn0gKi9cbiAgICB0aGlzLmRlcHNfID0gZGVwcztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFKd3RIZWxwZXJ9ICovXG4gICAgdGhpcy5qd3RIZWxwZXJfID0gbmV3IEp3dEhlbHBlcigpO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/UHJvbWlzZTwhRW50aXRsZW1lbnRzPn0gKi9cbiAgICB0aGlzLnJlc3BvbnNlUHJvbWlzZV8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHtudW1iZXJ9ICovXG4gICAgdGhpcy5wb3NpdGl2ZVJldHJpZXNfID0gMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLmJsb2NrTmV4dE5vdGlmaWNhdGlvbl8gPSBmYWxzZTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuL3N0b3JhZ2UuU3RvcmFnZX0gKi9cbiAgICB0aGlzLnN0b3JhZ2VfID0gZGVwcy5zdG9yYWdlKCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2V4cGVjdFBvc2l0aXZlXG4gICAqL1xuICByZXNldChvcHRfZXhwZWN0UG9zaXRpdmUpIHtcbiAgICB0aGlzLnJlc3BvbnNlUHJvbWlzZV8gPSBudWxsO1xuICAgIHRoaXMucG9zaXRpdmVSZXRyaWVzXyA9IE1hdGgubWF4KFxuICAgICAgICB0aGlzLnBvc2l0aXZlUmV0cmllc18sIG9wdF9leHBlY3RQb3NpdGl2ZSA/IDMgOiAwKTtcbiAgICBpZiAob3B0X2V4cGVjdFBvc2l0aXZlKSB7XG4gICAgICB0aGlzLnN0b3JhZ2VfLnJlbW92ZShFTlRTX1NUT1JBR0VfS0VZKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IVByb21pc2U8IUVudGl0bGVtZW50cz59XG4gICAqL1xuICBnZXRFbnRpdGxlbWVudHMoKSB7XG4gICAgaWYgKCF0aGlzLnJlc3BvbnNlUHJvbWlzZV8pIHtcbiAgICAgIHRoaXMucmVzcG9uc2VQcm9taXNlXyA9IHRoaXMuZ2V0RW50aXRsZW1lbnRzRmxvd18oKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucmVzcG9uc2VQcm9taXNlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmF3XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBwdXNoTmV4dEVudGl0bGVtZW50cyhyYXcpIHtcbiAgICBjb25zdCBlbnRpdGxlbWVudHMgPSB0aGlzLmdldFZhbGlkSnd0RW50aXRsZW1lbnRzXyhcbiAgICAgICAgcmF3LCAvKiByZXF1aXJlTm9uRXhwaXJlZCAqLyB0cnVlKTtcbiAgICBpZiAoZW50aXRsZW1lbnRzICYmIGVudGl0bGVtZW50cy5lbmFibGVzVGhpcygpKSB7XG4gICAgICB0aGlzLnN0b3JhZ2VfLnNldChFTlRTX1NUT1JBR0VfS0VZLCByYXcpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhRW50aXRsZW1lbnRzPn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldEVudGl0bGVtZW50c0Zsb3dfKCkge1xuICAgIHJldHVybiB0aGlzLmZldGNoRW50aXRsZW1lbnRzV2l0aENhY2hpbmdfKCkudGhlbihlbnRpdGxlbWVudHMgPT4ge1xuICAgICAgdGhpcy5vbkVudGl0bGVtZW50c0ZldGNoZWRfKGVudGl0bGVtZW50cyk7XG4gICAgICByZXR1cm4gZW50aXRsZW1lbnRzO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFFbnRpdGxlbWVudHM+fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZmV0Y2hFbnRpdGxlbWVudHNXaXRoQ2FjaGluZ18oKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmFnZV8uZ2V0KEVOVFNfU1RPUkFHRV9LRVkpLnRoZW4ocmF3ID0+IHtcbiAgICAgIC8vIFRyeSBjYWNoZSBmaXJzdC5cbiAgICAgIGlmIChyYXcpIHtcbiAgICAgICAgY29uc3QgY2FjaGVkID0gdGhpcy5nZXRWYWxpZEp3dEVudGl0bGVtZW50c18oXG4gICAgICAgICAgICByYXcsIC8qIHJlcXVpcmVOb25FeHBpcmVkICovIHRydWUpO1xuICAgICAgICBpZiAoY2FjaGVkICYmIGNhY2hlZC5lbmFibGVzVGhpcygpKSB7XG4gICAgICAgICAgLy8gQWxyZWFkeSBoYXZlIGEgcG9zaXRpdmUgcmVzcG9uc2UuXG4gICAgICAgICAgdGhpcy5wb3NpdGl2ZVJldHJpZXNfID0gMDtcbiAgICAgICAgICByZXR1cm4gY2FjaGVkO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBJZiBjYWNoZSBkaWRuJ3QgbWF0Y2gsIHBlcmZvcm0gZmV0Y2guXG4gICAgICByZXR1cm4gdGhpcy5mZXRjaEVudGl0bGVtZW50c18oKS50aGVuKGVudHMgPT4ge1xuICAgICAgICAvLyBJZiBlbnRpdGxlbWVudHMgbWF0Y2ggdGhlIHByb2R1Y3QsIHN0b3JlIHRoZW0gaW4gY2FjaGUuXG4gICAgICAgIGlmIChlbnRzICYmIGVudHMuZW5hYmxlc1RoaXMoKSAmJiBlbnRzLnJhdykge1xuICAgICAgICAgIHRoaXMuc3RvcmFnZV8uc2V0KEVOVFNfU1RPUkFHRV9LRVksIGVudHMucmF3KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW50cztcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFFbnRpdGxlbWVudHM+fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZmV0Y2hFbnRpdGxlbWVudHNfKCkge1xuICAgIC8vIFRPRE8oZHZveXRlbmtvKTogUmVwbGFjZSByZXRyaWVzIHdpdGggY29uc2lzdGVudCBmZXRjaC5cbiAgICBsZXQgcG9zaXRpdmVSZXRyaWVzID0gdGhpcy5wb3NpdGl2ZVJldHJpZXNfO1xuICAgIHRoaXMucG9zaXRpdmVSZXRyaWVzXyA9IDA7XG4gICAgY29uc3QgYXR0ZW1wdCA9ICgpID0+IHtcbiAgICAgIHBvc2l0aXZlUmV0cmllcy0tO1xuICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hfKCkudGhlbihlbnRpdGxlbWVudHMgPT4ge1xuICAgICAgICBpZiAoZW50aXRsZW1lbnRzLmVuYWJsZXNUaGlzKCkgfHwgcG9zaXRpdmVSZXRyaWVzIDw9IDApIHtcbiAgICAgICAgICByZXR1cm4gZW50aXRsZW1lbnRzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICB0aGlzLndpbl8uc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKGF0dGVtcHQoKSk7XG4gICAgICAgICAgfSwgNTUwKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBhdHRlbXB0KCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSB2YWx1ZVxuICAgKi9cbiAgc2V0VG9hc3RTaG93bih2YWx1ZSkge1xuICAgIHRoaXMuc3RvcmFnZV8uc2V0KFRPQVNUX1NUT1JBR0VfS0VZLCB2YWx1ZSA/ICcxJyA6ICcwJyk7XG4gIH1cblxuICAvKipcbiAgICovXG4gIGJsb2NrTmV4dE5vdGlmaWNhdGlvbigpIHtcbiAgICB0aGlzLmJsb2NrTmV4dE5vdGlmaWNhdGlvbl8gPSB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqL1xuICB1bmJsb2NrTmV4dE5vdGlmaWNhdGlvbigpIHtcbiAgICB0aGlzLmJsb2NrTmV4dE5vdGlmaWNhdGlvbl8gPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgSlNPTiBtdXN0IGVpdGhlciBjb250YWluIGEgXCJzaWduZWRFbnRpdGxlbWVudHNcIiB3aXRoIEpXVCwgb3JcbiAgICogXCJlbnRpdGxlbWVudHNcIiBmaWVsZCB3aXRoIHBsYWluIEpTT04gb2JqZWN0LlxuICAgKiBAcGFyYW0geyFPYmplY3R9IGpzb25cbiAgICogQHJldHVybiB7IUVudGl0bGVtZW50c31cbiAgICovXG4gIHBhcnNlRW50aXRsZW1lbnRzKGpzb24pIHtcbiAgICBjb25zdCBzaWduZWREYXRhID0ganNvblsnc2lnbmVkRW50aXRsZW1lbnRzJ107XG4gICAgaWYgKHNpZ25lZERhdGEpIHtcbiAgICAgIGNvbnN0IGVudGl0bGVtZW50cyA9IHRoaXMuZ2V0VmFsaWRKd3RFbnRpdGxlbWVudHNfKFxuICAgICAgICAgIHNpZ25lZERhdGEsIC8qIHJlcXVpcmVOb25FeHBpcmVkICovIGZhbHNlKTtcbiAgICAgIGlmIChlbnRpdGxlbWVudHMpIHtcbiAgICAgICAgcmV0dXJuIGVudGl0bGVtZW50cztcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcGxhaW5FbnRpdGxlbWVudHMgPSBqc29uWydlbnRpdGxlbWVudHMnXTtcbiAgICAgIGlmIChwbGFpbkVudGl0bGVtZW50cykge1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVFbnRpdGxlbWVudHNfKCcnLCBwbGFpbkVudGl0bGVtZW50cyk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIEVtcHR5IHJlc3BvbnNlLlxuICAgIHJldHVybiB0aGlzLmNyZWF0ZUVudGl0bGVtZW50c18oJycsIFtdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmF3XG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVxdWlyZU5vbkV4cGlyZWRcbiAgICogQHJldHVybiB7P0VudGl0bGVtZW50c31cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldFZhbGlkSnd0RW50aXRsZW1lbnRzXyhyYXcsIHJlcXVpcmVOb25FeHBpcmVkKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGp3dCA9IHRoaXMuand0SGVscGVyXy5kZWNvZGUocmF3KTtcbiAgICAgIGlmIChyZXF1aXJlTm9uRXhwaXJlZCkge1xuICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCBleHAgPSBqd3RbJ2V4cCddO1xuICAgICAgICBpZiAocGFyc2VGbG9hdChleHApICogMTAwMCA8IG5vdykge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBlbnRpdGxlbWVudHNDbGFpbSA9IGp3dFsnZW50aXRsZW1lbnRzJ107XG4gICAgICByZXR1cm4gZW50aXRsZW1lbnRzQ2xhaW0gJiZcbiAgICAgICAgICB0aGlzLmNyZWF0ZUVudGl0bGVtZW50c18ocmF3LCBlbnRpdGxlbWVudHNDbGFpbSkgfHwgbnVsbDtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBJZ25vcmUgdGhlIGVycm9yLlxuICAgICAgdGhpcy53aW5fLnNldFRpbWVvdXQoKCkgPT4ge3Rocm93IGU7fSk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByYXdcbiAgICogQHBhcmFtIHshT2JqZWN0fCFBcnJheTwhT2JqZWN0Pn0ganNvblxuICAgKiBAcmV0dXJuIHshRW50aXRsZW1lbnRzfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY3JlYXRlRW50aXRsZW1lbnRzXyhyYXcsIGpzb24pIHtcbiAgICByZXR1cm4gbmV3IEVudGl0bGVtZW50cyhcbiAgICAgICAgU0VSVklDRV9JRCxcbiAgICAgICAgcmF3LFxuICAgICAgICBFbnRpdGxlbWVudC5wYXJzZUxpc3RGcm9tSnNvbihqc29uKSxcbiAgICAgICAgdGhpcy5jb25maWdfLmdldFByb2R1Y3RJZCgpLFxuICAgICAgICB0aGlzLmFja18uYmluZCh0aGlzKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRW50aXRsZW1lbnRzfSBlbnRpdGxlbWVudHNcbiAgICogQHByaXZhdGVcbiAgICovXG4gIG9uRW50aXRsZW1lbnRzRmV0Y2hlZF8oZW50aXRsZW1lbnRzKSB7XG4gICAgLy8gU2tpcCBhbnkgbm90aWZpY2F0aW9ucyBhbmQgdG9hc3QgaWYgb3RoZXIgZmxvd3MgYXJlIG9uZ29pbmcuXG4gICAgLy8gVE9ETyhkdm95dGVua28pOiB3aGF0J3MgdGhlIHJpZ2h0IGFjdGlvbiB3aGVuIHBheSBmbG93IHdhcyBjYW5jZWxlZD9cbiAgICBjb25zdCBibG9ja05vdGlmaWNhdGlvbiA9IHRoaXMuYmxvY2tOZXh0Tm90aWZpY2F0aW9uXztcbiAgICB0aGlzLmJsb2NrTmV4dE5vdGlmaWNhdGlvbl8gPSBmYWxzZTtcbiAgICBpZiAoYmxvY2tOb3RpZmljYXRpb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBOb3RpZnkgb24gdGhlIHJlY2VpdmVkIGVudGl0bGVtZW50cy5cbiAgICB0aGlzLmRlcHNfLmNhbGxiYWNrcygpLnRyaWdnZXJFbnRpdGxlbWVudHNSZXNwb25zZShcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKGVudGl0bGVtZW50cykpO1xuXG4gICAgLy8gU2hvdyBhIHRvYXN0IGlmIG5lZWRlZC5cbiAgICB0aGlzLm1heWJlU2hvd1RvYXN0XyhlbnRpdGxlbWVudHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVudGl0bGVtZW50c30gZW50aXRsZW1lbnRzXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgbWF5YmVTaG93VG9hc3RfKGVudGl0bGVtZW50cykge1xuICAgIGNvbnN0IGVudGl0bGVtZW50ID0gZW50aXRsZW1lbnRzLmdldEVudGl0bGVtZW50Rm9yVGhpcygpO1xuICAgIGlmICghZW50aXRsZW1lbnQpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgLy8gQ2hlY2sgaWYgc3RvcmFnZSBiaXQgaXMgc2V0LiBJdCdzIG9ubHkgc2V0IGJ5IHRoZSBgRW50aXRsZW1lbnRzLmFja2BcbiAgICAvLyBtZXRob2QuXG4gICAgcmV0dXJuIHRoaXMuc3RvcmFnZV8uZ2V0KFRPQVNUX1NUT1JBR0VfS0VZKS50aGVuKHZhbHVlID0+IHtcbiAgICAgIGlmICh2YWx1ZSA9PSAnMScpIHtcbiAgICAgICAgLy8gQWxyZWFkeSBzaG93bjtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKGVudGl0bGVtZW50KSB7XG4gICAgICAgIHRoaXMuc2hvd1RvYXN0XyhlbnRpdGxlbWVudCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRW50aXRsZW1lbnR9IGVudGl0bGVtZW50XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzaG93VG9hc3RfKGVudGl0bGVtZW50KSB7XG4gICAgY29uc3Qgc291cmNlID0gZW50aXRsZW1lbnQuc291cmNlIHx8ICdnb29nbGUnO1xuICAgIHJldHVybiBuZXcgVG9hc3QodGhpcy5kZXBzXywgZmVVcmwoJy90b2FzdGlmcmFtZScpLCBmZUFyZ3Moe1xuICAgICAgJ3B1YmxpY2F0aW9uSWQnOiB0aGlzLnB1YmxpY2F0aW9uSWRfLFxuICAgICAgJ3NvdXJjZSc6IHNvdXJjZSxcbiAgICB9KSkub3BlbigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVudGl0bGVtZW50c30gZW50aXRsZW1lbnRzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhY2tfKGVudGl0bGVtZW50cykge1xuICAgIGlmIChlbnRpdGxlbWVudHMuZ2V0RW50aXRsZW1lbnRGb3JUaGlzKCkpIHtcbiAgICAgIHRoaXMuc2V0VG9hc3RTaG93bih0cnVlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IVByb21pc2U8IUVudGl0bGVtZW50cz59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBmZXRjaF8oKSB7XG4gICAgY29uc3QgdXJsID0gc2VydmljZVVybChcbiAgICAgICAgJy9wdWJsaWNhdGlvbi8nICtcbiAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMucHVibGljYXRpb25JZF8pICtcbiAgICAgICAgJy9lbnRpdGxlbWVudHMnKTtcbiAgICByZXR1cm4gdGhpcy5mZXRjaGVyXy5mZXRjaENyZWRlbnRpYWxlZEpzb24odXJsKVxuICAgICAgICAudGhlbihqc29uID0+IHRoaXMucGFyc2VFbnRpdGxlbWVudHMoanNvbikpO1xuICB9XG59XG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuXG4vKipcbiAqIEBpbnRlcmZhY2VcbiAqL1xuY2xhc3MgRmV0Y2hlciB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1bnVzZWRVcmxcbiAgICogQHJldHVybiB7IVByb21pc2U8IU9iamVjdD59XG4gICAqL1xuICBmZXRjaENyZWRlbnRpYWxlZEpzb24odW51c2VkVXJsKSB7fVxufVxuXG5cbi8qKlxuICogQGltcGxlbWVudHMge0ZldGNoZXJ9XG4gKi9cbmNsYXNzIFhockZldGNoZXIge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKi9cbiAgY29uc3RydWN0b3Iod2luKSB7XG4gICAgLyoqIEBjb25zdCB7IVhocn0gKi9cbiAgICB0aGlzLnhocl8gPSBuZXcgWGhyKHdpbik7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGZldGNoQ3JlZGVudGlhbGVkSnNvbih1cmwpIHtcbiAgICBjb25zdCBpbml0ID0gLyoqIEB0eXBlIHshLi4vdXRpbHMveGhyLkZldGNoSW5pdERlZn0gKi8gKHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBoZWFkZXJzOiB7J0FjY2VwdCc6ICd0ZXh0L3BsYWluLCBhcHBsaWNhdGlvbi9qc29uJ30sXG4gICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnLFxuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLnhocl8uZmV0Y2godXJsLCBpbml0KS50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSk7XG4gIH1cbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbi8qKlxuICogQHBhcmFtIHshd2ViLWFjdGl2aXRpZXMvYWN0aXZpdHktcG9ydHMuQWN0aXZpdHlQb3J0fSBwb3J0XG4gKiBAcGFyYW0ge3N0cmluZ30gcmVxdWlyZU9yaWdpblxuICogQHBhcmFtIHtib29sZWFufSByZXF1aXJlT3JpZ2luVmVyaWZpZWRcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVxdWlyZVNlY3VyZUNoYW5uZWxcbiAqIEByZXR1cm4geyFQcm9taXNlPCFPYmplY3Q+fVxuICovXG5mdW5jdGlvbiBhY2NlcHRQb3J0UmVzdWx0RGF0YShcbiAgICBwb3J0LFxuICAgIHJlcXVpcmVPcmlnaW4sXG4gICAgcmVxdWlyZU9yaWdpblZlcmlmaWVkLFxuICAgIHJlcXVpcmVTZWN1cmVDaGFubmVsKSB7XG4gIHJldHVybiBwb3J0LmFjY2VwdFJlc3VsdCgpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICBpZiAocmVzdWx0Lm9yaWdpbiAhPSByZXF1aXJlT3JpZ2luIHx8XG4gICAgICAgIHJlcXVpcmVPcmlnaW5WZXJpZmllZCAmJiAhcmVzdWx0Lm9yaWdpblZlcmlmaWVkIHx8XG4gICAgICAgIHJlcXVpcmVTZWN1cmVDaGFubmVsICYmICFyZXN1bHQuc2VjdXJlQ2hhbm5lbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjaGFubmVsIG1pc21hdGNoJyk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQuZGF0YTtcbiAgfSk7XG59XG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuY29uc3QgTElOS19SRVFVRVNUX0lEID0gJ3N3Zy1saW5rJztcblxuXG4vKipcbiAqIFRoZSBmbG93IHRvIGluaXRpYXRlIGxpbmtiYWNrIGZsb3cuXG4gKi9cbmNsYXNzIExpbmtiYWNrRmxvdyB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4vZGVwcy5EZXBzRGVmfSBkZXBzXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkZXBzKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4vZGVwcy5EZXBzRGVmfSAqL1xuICAgIHRoaXMuZGVwc18gPSBkZXBzO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IXdlYi1hY3Rpdml0aWVzL2FjdGl2aXR5LXBvcnRzLkFjdGl2aXR5UG9ydHN9ICovXG4gICAgdGhpcy5hY3Rpdml0eVBvcnRzXyA9IGRlcHMuYWN0aXZpdGllcygpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL21vZGVsL3BhZ2UtY29uZmlnLlBhZ2VDb25maWd9ICovXG4gICAgdGhpcy5wYWdlQ29uZmlnXyA9IGRlcHMucGFnZUNvbmZpZygpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2NvbXBvbmVudHMvZGlhbG9nLW1hbmFnZXIuRGlhbG9nTWFuYWdlcn0gKi9cbiAgICB0aGlzLmRpYWxvZ01hbmFnZXJfID0gZGVwcy5kaWFsb2dNYW5hZ2VyKCk7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnRzIHRoZSBMaW5rIGFjY291bnQgZmxvdy5cbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBzdGFydCgpIHtcbiAgICB0aGlzLmRlcHNfLmNhbGxiYWNrcygpLnRyaWdnZXJGbG93U3RhcnRlZChTdWJzY3JpcHRpb25GbG93cy5MSU5LX0FDQ09VTlQpO1xuICAgIGNvbnN0IGZvcmNlUmVkaXJlY3QgPVxuICAgICAgICB0aGlzLmRlcHNfLmNvbmZpZygpLndpbmRvd09wZW5Nb2RlID09IFdpbmRvd09wZW5Nb2RlLlJFRElSRUNUO1xuICAgIGNvbnN0IG9wZW5lciA9IHRoaXMuYWN0aXZpdHlQb3J0c18ub3BlbihcbiAgICAgICAgTElOS19SRVFVRVNUX0lELFxuICAgICAgICBmZVVybCgnL2xpbmtiYWNrc3RhcnQnKSxcbiAgICAgICAgZm9yY2VSZWRpcmVjdCA/ICdfdG9wJyA6ICdfYmxhbmsnLFxuICAgICAgICBmZUFyZ3Moe1xuICAgICAgICAgICdwdWJsaWNhdGlvbklkJzogdGhpcy5wYWdlQ29uZmlnXy5nZXRQdWJsaWNhdGlvbklkKCksXG4gICAgICAgIH0pLCB7fSk7XG4gICAgdGhpcy5kaWFsb2dNYW5hZ2VyXy5wb3B1cE9wZW5lZChvcGVuZXIgJiYgb3BlbmVyLnRhcmdldFdpbik7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9XG59XG5cblxuLyoqXG4gKiBUaGUgY2xhc3MgZm9yIExpbmsgYWNjb3VudHMgZmxvdy5cbiAqL1xuY2xhc3MgTGlua0NvbXBsZXRlRmxvdyB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4vZGVwcy5EZXBzRGVmfSBkZXBzXG4gICAqL1xuICBzdGF0aWMgY29uZmlndXJlUGVuZGluZyhkZXBzKSB7XG4gICAgLyoqXG4gICAgICogSGFuZGxlciBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0geyF3ZWItYWN0aXZpdGllcy9hY3Rpdml0eS1wb3J0cy5BY3Rpdml0eVBvcnR9IHBvcnRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBoYW5kbGVyKHBvcnQpIHtcbiAgICAgIGRlcHMuZW50aXRsZW1lbnRzTWFuYWdlcigpLmJsb2NrTmV4dE5vdGlmaWNhdGlvbigpO1xuICAgICAgZGVwcy5jYWxsYmFja3MoKS50cmlnZ2VyTGlua1Byb2dyZXNzKCk7XG4gICAgICBkZXBzLmRpYWxvZ01hbmFnZXIoKS5wb3B1cENsb3NlZCgpO1xuICAgICAgY29uc3QgcHJvbWlzZSA9IGFjY2VwdFBvcnRSZXN1bHREYXRhKFxuICAgICAgICAgIHBvcnQsXG4gICAgICAgICAgZmVPcmlnaW4oKSxcbiAgICAgICAgICAvKiByZXF1aXJlT3JpZ2luVmVyaWZpZWQgKi8gZmFsc2UsXG4gICAgICAgICAgLyogcmVxdWlyZVNlY3VyZUNoYW5uZWwgKi8gZmFsc2UpO1xuICAgICAgcmV0dXJuIHByb21pc2UudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgIGNvbnN0IGZsb3cgPSBuZXcgTGlua0NvbXBsZXRlRmxvdyhkZXBzLCByZXNwb25zZSk7XG4gICAgICAgIGZsb3cuc3RhcnQoKTtcbiAgICAgIH0sIHJlYXNvbiA9PiB7XG4gICAgICAgIGlmIChpc0NhbmNlbEVycm9yKHJlYXNvbikpIHtcbiAgICAgICAgICBkZXBzLmNhbGxiYWNrcygpLnRyaWdnZXJGbG93Q2FuY2VsZWQoU3Vic2NyaXB0aW9uRmxvd3MuTElOS19BQ0NPVU5UKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSAgICBkZXBzLmFjdGl2aXRpZXMoKS5vblJlc3VsdChMSU5LX1JFUVVFU1RfSUQsIGhhbmRsZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4vZGVwcy5EZXBzRGVmfSBkZXBzXG4gICAqIEBwYXJhbSB7P09iamVjdH0gcmVzcG9uc2VcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRlcHMsIHJlc3BvbnNlKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgICB0aGlzLndpbl8gPSBkZXBzLndpbigpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IXdlYi1hY3Rpdml0aWVzL2FjdGl2aXR5LXBvcnRzLkFjdGl2aXR5UG9ydHN9ICovXG4gICAgdGhpcy5hY3Rpdml0eVBvcnRzXyA9IGRlcHMuYWN0aXZpdGllcygpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2NvbXBvbmVudHMvZGlhbG9nLW1hbmFnZXIuRGlhbG9nTWFuYWdlcn0gKi9cbiAgICB0aGlzLmRpYWxvZ01hbmFnZXJfID0gZGVwcy5kaWFsb2dNYW5hZ2VyKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi9lbnRpdGxlbWVudHMtbWFuYWdlci5FbnRpdGxlbWVudHNNYW5hZ2VyfSAqL1xuICAgIHRoaXMuZW50aXRsZW1lbnRzTWFuYWdlcl8gPSBkZXBzLmVudGl0bGVtZW50c01hbmFnZXIoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuL2NhbGxiYWNrcy5DYWxsYmFja3N9ICovXG4gICAgdGhpcy5jYWxsYmFja3NfID0gZGVwcy5jYWxsYmFja3MoKTtcblxuICAgIGNvbnN0IGluZGV4ID0gcmVzcG9uc2UgJiYgcmVzcG9uc2VbJ2luZGV4J10gfHwgJzAnO1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFBY3Rpdml0eUlmcmFtZVZpZXd9ICovXG4gICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfID1cbiAgICAgICAgbmV3IEFjdGl2aXR5SWZyYW1lVmlldyhcbiAgICAgICAgICAgIHRoaXMud2luXyxcbiAgICAgICAgICAgIHRoaXMuYWN0aXZpdHlQb3J0c18sXG4gICAgICAgICAgICBmZVVybCgnL2xpbmtjb25maXJtaWZyYW1lJywgJy91LycgKyBpbmRleCksXG4gICAgICAgICAgICBmZUFyZ3Moe1xuICAgICAgICAgICAgICAncHJvZHVjdElkJzogZGVwcy5wYWdlQ29uZmlnKCkuZ2V0UHJvZHVjdElkKCksXG4gICAgICAgICAgICAgICdwdWJsaWNhdGlvbklkJzogZGVwcy5wYWdlQ29uZmlnKCkuZ2V0UHVibGljYXRpb25JZCgpLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAvKiBzaG91bGRGYWRlQm9keSAqLyB0cnVlKTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P2Z1bmN0aW9uKCl9ICovXG4gICAgdGhpcy5jb21wbGV0ZVJlc29sdmVyXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshUHJvbWlzZX0gKi9cbiAgICB0aGlzLmNvbXBsZXRlUHJvbWlzZV8gPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIHRoaXMuY29tcGxldGVSZXNvbHZlcl8gPSByZXNvbHZlO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyB0aGUgTGluayBhY2NvdW50IGZsb3cuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgc3RhcnQoKSB7XG4gICAgY29uc3QgcHJvbWlzZSA9IHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xy5wb3J0KCkudGhlbihwb3J0ID0+IHtcbiAgICAgIHJldHVybiBhY2NlcHRQb3J0UmVzdWx0RGF0YShcbiAgICAgICAgICBwb3J0LFxuICAgICAgICAgIGZlT3JpZ2luKCksXG4gICAgICAgICAgLyogcmVxdWlyZU9yaWdpblZlcmlmaWVkICovIHRydWUsXG4gICAgICAgICAgLyogcmVxdWlyZVNlY3VyZUNoYW5uZWwgKi8gdHJ1ZSk7XG4gICAgfSk7XG4gICAgcHJvbWlzZS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgIHRoaXMuY29tcGxldGVfKHJlc3BvbnNlKTtcbiAgICB9KS5jYXRjaChyZWFzb24gPT4ge1xuICAgICAgLy8gUmV0aHJvdyBhc3luYy5cbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aHJvdyByZWFzb247XG4gICAgICB9KTtcbiAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgIC8vIFRoZSBmbG93IGlzIGNvbXBsZXRlLlxuICAgICAgdGhpcy5kaWFsb2dNYW5hZ2VyXy5jb21wbGV0ZVZpZXcodGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5kaWFsb2dNYW5hZ2VyXy5vcGVuVmlldyh0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7P09iamVjdH0gcmVzcG9uc2VcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNvbXBsZXRlXyhyZXNwb25zZSkge1xuICAgIHRoaXMuY2FsbGJhY2tzXy50cmlnZ2VyTGlua0NvbXBsZXRlKCk7XG4gICAgdGhpcy5jYWxsYmFja3NfLnJlc2V0TGlua1Byb2dyZXNzKCk7XG4gICAgdGhpcy5lbnRpdGxlbWVudHNNYW5hZ2VyXy5zZXRUb2FzdFNob3duKHRydWUpO1xuICAgIHRoaXMuZW50aXRsZW1lbnRzTWFuYWdlcl8udW5ibG9ja05leHROb3RpZmljYXRpb24oKTtcbiAgICB0aGlzLmVudGl0bGVtZW50c01hbmFnZXJfLnJlc2V0KHJlc3BvbnNlICYmIHJlc3BvbnNlWydzdWNjZXNzJ10gfHwgZmFsc2UpO1xuICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZVsnZW50aXRsZW1lbnRzJ10pIHtcbiAgICAgIHRoaXMuZW50aXRsZW1lbnRzTWFuYWdlcl8ucHVzaE5leHRFbnRpdGxlbWVudHMocmVzcG9uc2VbJ2VudGl0bGVtZW50cyddKTtcbiAgICB9XG4gICAgdGhpcy5jb21wbGV0ZVJlc29sdmVyXygpO1xuICB9XG5cbiAgLyoqIEByZXR1cm4geyFQcm9taXNlfSAqL1xuICB3aGVuQ29tcGxldGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29tcGxldGVQcm9taXNlXztcbiAgfVxufVxuXG4vKipcbiAqIFRoZSBmbG93IHRvIHNhdmUgc3Vic2NyaXB0aW9uIGluZm9ybWF0aW9uLlxuICovXG5jbGFzcyBMaW5rU2F2ZUZsb3cge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuL2RlcHMuRGVwc0RlZn0gZGVwc1xuICAgKiBAcGFyYW0geyEuLi9hcGkvc3Vic2NyaXB0aW9ucy5TYXZlU3Vic2NyaXB0aW9uUmVxdWVzdENhbGxiYWNrfSBjYWxsYmFja1xuICAgKi9cbiAgY29uc3RydWN0b3IoZGVwcywgY2FsbGJhY2spIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IGRlcHMud2luKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi9kZXBzLkRlcHNEZWZ9ICovXG4gICAgdGhpcy5kZXBzXyA9IGRlcHM7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshd2ViLWFjdGl2aXRpZXMvYWN0aXZpdHktcG9ydHMuQWN0aXZpdHlQb3J0c30gKi9cbiAgICB0aGlzLmFjdGl2aXR5UG9ydHNfID0gZGVwcy5hY3Rpdml0aWVzKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vY29tcG9uZW50cy9kaWFsb2ctbWFuYWdlci5EaWFsb2dNYW5hZ2VyfSAqL1xuICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8gPSBkZXBzLmRpYWxvZ01hbmFnZXIoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7IS4uL2FwaS9zdWJzY3JpcHRpb25zLlNhdmVTdWJzY3JpcHRpb25SZXF1ZXN0Q2FsbGJhY2t9ICovXG4gICAgdGhpcy5jYWxsYmFja18gPSBjYWxsYmFjaztcblxuICAgIC8qKiBAcHJpdmF0ZSB7P1Byb21pc2U8IS4uL2FwaS9zdWJzY3JpcHRpb25zLlNhdmVTdWJzY3JpcHRpb25SZXF1ZXN0Pn0gKi9cbiAgICB0aGlzLnJlcXVlc3RQcm9taXNlXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9BY3Rpdml0eUlmcmFtZVZpZXd9ICovXG4gICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/UHJvbWlzZTwhLi4vYXBpL3N1YnNjcmlwdGlvbnMuU2F2ZVN1YnNjcmlwdGlvblJlcXVlc3Q+fVxuICAgKiBAcGFja2FnZSBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICAgKi9cbiAgZ2V0UmVxdWVzdFByb21pc2UoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdFByb21pc2VfO1xuICB9XG4gIC8qKlxuICAgKiBTdGFydHMgdGhlIHNhdmUgc3Vic2NyaXB0aW9uXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgc3RhcnQoKSB7XG4gICAgY29uc3QgaWZyYW1lQXJncyA9IHtcbiAgICAgICdwdWJsaWNhdGlvbklkJzogdGhpcy5kZXBzXy5wYWdlQ29uZmlnKCkuZ2V0UHVibGljYXRpb25JZCgpLFxuICAgICAgJ2lzQ2xvc2FibGUnOiB0cnVlLFxuICAgIH07XG5cbiAgICB0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18gPSBuZXcgQWN0aXZpdHlJZnJhbWVWaWV3KFxuICAgICAgICB0aGlzLndpbl8sXG4gICAgICAgIHRoaXMuYWN0aXZpdHlQb3J0c18sXG4gICAgICAgIGZlVXJsKCcvbGlua3NhdmVpZnJhbWUnKSxcbiAgICAgICAgZmVBcmdzKGlmcmFtZUFyZ3MpLFxuICAgICAgICAvKiBzaG91bGRGYWRlQm9keSAqLyBmYWxzZVxuICAgICk7XG4gICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfLm9uTWVzc2FnZShkYXRhID0+IHtcbiAgICAgIGlmIChkYXRhWydnZXRMaW5raW5nSW5mbyddKSB7XG4gICAgICAgIHRoaXMucmVxdWVzdFByb21pc2VfID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZSh0aGlzLmNhbGxiYWNrXygpKTtcbiAgICAgICAgfSkudGhlbihyZXF1ZXN0ID0+IHtcbiAgICAgICAgICBsZXQgc2F2ZVJlcXVlc3Q7XG4gICAgICAgICAgaWYgKHJlcXVlc3QgJiYgcmVxdWVzdC50b2tlbikge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3QuYXV0aENvZGUpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdCb3RoIGF1dGhDb2RlIGFuZCB0b2tlbiBhcmUgYXZhaWxhYmxlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzYXZlUmVxdWVzdCA9IHsndG9rZW4nOiByZXF1ZXN0LnRva2VufTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKHJlcXVlc3QgJiYgcmVxdWVzdC5hdXRoQ29kZSkge1xuICAgICAgICAgICAgc2F2ZVJlcXVlc3QgPSB7J2F1dGhDb2RlJzogcmVxdWVzdC5hdXRoQ29kZX07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTmVpdGhlciB0b2tlbiBvciBhdXRoQ29kZSBpcyBhdmFpbGFibGUnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfLm1lc3NhZ2Uoc2F2ZVJlcXVlc3QpO1xuICAgICAgICB9KS5jYXRjaChyZWFzb24gPT4ge1xuICAgICAgICAgIC8vIFRoZSBmbG93IGlzIGNvbXBsZXRlLlxuICAgICAgICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8uY29tcGxldGVWaWV3KHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xyk7XG4gICAgICAgICAgdGhyb3cgcmVhc29uO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICAvKiogeyFQcm9taXNlPGJvb2xlYW4+fSAqL1xuICAgIHJldHVybiB0aGlzLmRpYWxvZ01hbmFnZXJfLm9wZW5WaWV3KHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3XyxcbiAgICAgICAgLyogaGlkZGVuICovIHRydWUpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18ucG9ydCgpLnRoZW4ocG9ydCA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYWNjZXB0UG9ydFJlc3VsdERhdGEoXG4gICAgICAgICAgICAgICAgcG9ydCxcbiAgICAgICAgICAgICAgICBmZU9yaWdpbigpLFxuICAgICAgICAgICAgICAgIC8qIHJlcXVpcmVPcmlnaW5WZXJpZmllZCAqLyB0cnVlLFxuICAgICAgICAgICAgICAgIC8qIHJlcXVpcmVTZWN1cmVDaGFubmVsICovIHRydWUpO1xuICAgICAgICAgIH0pLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRbJ2xpbmtlZCddO1xuICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9KS50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICAvLyBUaGUgZmxvdyBpcyBjb21wbGV0ZS5cbiAgICAgICAgICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8uY29tcGxldGVWaWV3KHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xyk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cblxuY2xhc3MgTG9naW5Qcm9tcHRBcGkge1xuICAvKipcbiAgICogQHBhcmFtIHshLi9kZXBzLkRlcHNEZWZ9IGRlcHNcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRlcHMpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi9kZXBzLkRlcHNEZWZ9ICovXG4gICAgdGhpcy5kZXBzXyA9IGRlcHM7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IGRlcHMud2luKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshd2ViLWFjdGl2aXRpZXMvYWN0aXZpdHktcG9ydHMuQWN0aXZpdHlQb3J0c30gKi9cbiAgICB0aGlzLmFjdGl2aXR5UG9ydHNfID0gZGVwcy5hY3Rpdml0aWVzKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vY29tcG9uZW50cy9kaWFsb2ctbWFuYWdlci5EaWFsb2dNYW5hZ2VyfSAqL1xuICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8gPSBkZXBzLmRpYWxvZ01hbmFnZXIoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P1Byb21pc2V9ICovXG4gICAgdGhpcy5vcGVuVmlld1Byb21pc2VfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFBY3Rpdml0eUlmcmFtZVZpZXd9ICovXG4gICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfID0gbmV3IEFjdGl2aXR5SWZyYW1lVmlldyhcbiAgICAgICAgdGhpcy53aW5fLFxuICAgICAgICB0aGlzLmFjdGl2aXR5UG9ydHNfLFxuICAgICAgICBmZVVybCgnL2xvZ2luaWZyYW1lJyksXG4gICAgICAgIGZlQXJncyh7XG4gICAgICAgICAgcHVibGljYXRpb25JZDogZGVwcy5wYWdlQ29uZmlnKCkuZ2V0UHVibGljYXRpb25JZCgpLFxuICAgICAgICAgIHByb2R1Y3RJZDogZGVwcy5wYWdlQ29uZmlnKCkuZ2V0UHJvZHVjdElkKCksXG4gICAgICAgICAgLy8gRmlyc3QgYXNrIHRoZSB1c2VyIGlmIHRoZXkgd2FudCB1cyB0byBsb2cgdGhlbSBpbi5cbiAgICAgICAgICB1c2VyQ29uc2VudDogdHJ1ZSxcbiAgICAgICAgICAvLyBUT0RPKGNoZW5zaGF5KTogUGFzcyBlbnRpdGxlbWVudHMgdmFsdWUgaGVyZS5cbiAgICAgICAgfSksXG4gICAgICAgIC8qIHNob3VsZEZhZGVCb2R5ICovIHRydWVcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFByb21wdHMgdGhlIHVzZXIgdG8gbG9naW4uXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgc3RhcnQoKSB7XG4gICAgdGhpcy5kZXBzXy5jYWxsYmFja3MoKS50cmlnZ2VyRmxvd1N0YXJ0ZWQoXG4gICAgICAgIFN1YnNjcmlwdGlvbkZsb3dzLlNIT1dfTE9HSU5fUFJPTVBUKTtcblxuICAgIHRoaXMub3BlblZpZXdQcm9taXNlXyA9IHRoaXMuZGlhbG9nTWFuYWdlcl8ub3BlblZpZXcoXG4gICAgICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xyk7XG5cbiAgICByZXR1cm4gdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfLmFjY2VwdFJlc3VsdCgpLnRoZW4oKCkgPT4ge1xuICAgICAgLy8gVGhlIGNvbnNlbnQgcGFydCBpcyBjb21wbGV0ZS5cbiAgICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8uY29tcGxldGVWaWV3KHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xyk7XG4gICAgfSwgcmVhc29uID0+IHtcbiAgICAgIGlmIChpc0NhbmNlbEVycm9yKHJlYXNvbikpIHtcbiAgICAgICAgdGhpcy5kZXBzXy5jYWxsYmFja3MoKS50cmlnZ2VyRmxvd0NhbmNlbGVkKFxuICAgICAgICAgICAgU3Vic2NyaXB0aW9uRmxvd3MuU0hPV19MT0dJTl9QUk9NUFQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kaWFsb2dNYW5hZ2VyXy5jb21wbGV0ZVZpZXcodGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfKTtcbiAgICAgIH1cbiAgICAgIHRocm93IHJlYXNvbjtcbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cblxuY2xhc3MgTG9naW5Ob3RpZmljYXRpb25BcGkge1xuICAvKipcbiAgICogQHBhcmFtIHshLi9kZXBzLkRlcHNEZWZ9IGRlcHNcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRlcHMpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi9kZXBzLkRlcHNEZWZ9ICovXG4gICAgdGhpcy5kZXBzXyA9IGRlcHM7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IGRlcHMud2luKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshd2ViLWFjdGl2aXRpZXMvYWN0aXZpdHktcG9ydHMuQWN0aXZpdHlQb3J0c30gKi9cbiAgICB0aGlzLmFjdGl2aXR5UG9ydHNfID0gZGVwcy5hY3Rpdml0aWVzKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vY29tcG9uZW50cy9kaWFsb2ctbWFuYWdlci5EaWFsb2dNYW5hZ2VyfSAqL1xuICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8gPSBkZXBzLmRpYWxvZ01hbmFnZXIoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P1Byb21pc2V9ICovXG4gICAgdGhpcy5vcGVuVmlld1Byb21pc2VfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFBY3Rpdml0eUlmcmFtZVZpZXd9ICovXG4gICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfID0gbmV3IEFjdGl2aXR5SWZyYW1lVmlldyhcbiAgICAgICAgdGhpcy53aW5fLFxuICAgICAgICB0aGlzLmFjdGl2aXR5UG9ydHNfLFxuICAgICAgICBmZVVybCgnL2xvZ2luaWZyYW1lJyksXG4gICAgICAgIGZlQXJncyh7XG4gICAgICAgICAgcHVibGljYXRpb25JZDogZGVwcy5wYWdlQ29uZmlnKCkuZ2V0UHVibGljYXRpb25JZCgpLFxuICAgICAgICAgIHByb2R1Y3RJZDogZGVwcy5wYWdlQ29uZmlnKCkuZ2V0UHJvZHVjdElkKCksXG4gICAgICAgICAgLy8gTm8gbmVlZCB0byBhc2sgdGhlIHVzZXIuIEp1c3QgdGVsbCB0aGVtIHlvdSdyZSBsb2dnaW5nIHRoZW0gaW4uXG4gICAgICAgICAgdXNlckNvbnNlbnQ6IGZhbHNlLFxuICAgICAgICAgIC8vIFRPRE8oY2hlbnNoYXkpOiBQYXNzIGVudGl0bGVtZW50cyB2YWx1ZSBoZXJlLlxuICAgICAgICB9KSxcbiAgICAgICAgLyogc2hvdWxkRmFkZUJvZHkgKi8gdHJ1ZVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQ29udGludWVzIHRoZSBMb2dpbiBmbG93IChhZnRlciB3YWl0aW5nKS5cbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBzdGFydCgpIHtcbiAgICB0aGlzLmRlcHNfLmNhbGxiYWNrcygpLnRyaWdnZXJGbG93U3RhcnRlZChcbiAgICAgICAgU3Vic2NyaXB0aW9uRmxvd3MuU0hPV19MT0dJTl9OT1RJRklDQVRJT04pO1xuXG4gICAgdGhpcy5vcGVuVmlld1Byb21pc2VfID0gdGhpcy5kaWFsb2dNYW5hZ2VyXy5vcGVuVmlldyhcbiAgICAgICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfKTtcblxuICAgIHJldHVybiB0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18uYWNjZXB0UmVzdWx0KCkudGhlbigoKSA9PiB7XG4gICAgICAvLyBUaGUgY29uc2VudCBwYXJ0IGlzIGNvbXBsZXRlLlxuICAgICAgdGhpcy5kaWFsb2dNYW5hZ2VyXy5jb21wbGV0ZVZpZXcodGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfKTtcbiAgICB9LCByZWFzb24gPT4ge1xuICAgICAgdGhpcy5kaWFsb2dNYW5hZ2VyXy5jb21wbGV0ZVZpZXcodGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfKTtcbiAgICAgIHRocm93IHJlYXNvbjtcbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cblxuY2xhc3MgV2FpdEZvclN1YnNjcmlwdGlvbkxvb2t1cEFwaSB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyEuL2RlcHMuRGVwc0RlZn0gZGVwc1xuICAgKiBAcGFyYW0gez9Qcm9taXNlfSBhY2NvdW50UHJvbWlzZVxuICAgKi9cbiAgY29uc3RydWN0b3IoZGVwcywgYWNjb3VudFByb21pc2UpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi9kZXBzLkRlcHNEZWZ9ICovXG4gICAgdGhpcy5kZXBzXyA9IGRlcHM7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IGRlcHMud2luKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshd2ViLWFjdGl2aXRpZXMvYWN0aXZpdHktcG9ydHMuQWN0aXZpdHlQb3J0c30gKi9cbiAgICB0aGlzLmFjdGl2aXR5UG9ydHNfID0gZGVwcy5hY3Rpdml0aWVzKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vY29tcG9uZW50cy9kaWFsb2ctbWFuYWdlci5EaWFsb2dNYW5hZ2VyfSAqL1xuICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8gPSBkZXBzLmRpYWxvZ01hbmFnZXIoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P1Byb21pc2V9ICovXG4gICAgdGhpcy5vcGVuVmlld1Byb21pc2VfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P1Byb21pc2V9ICovXG4gICAgdGhpcy5hY2NvdW50UHJvbWlzZV8gPSBhY2NvdW50UHJvbWlzZSB8fCBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUFjdGl2aXR5SWZyYW1lVmlld30gKi9cbiAgICB0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18gPSBuZXcgQWN0aXZpdHlJZnJhbWVWaWV3KFxuICAgICAgICB0aGlzLndpbl8sXG4gICAgICAgIHRoaXMuYWN0aXZpdHlQb3J0c18sXG4gICAgICAgIGZlVXJsKCcvd2FpdGZvcnN1YnNjcmlwdGlvbmxvb2t1cGlmcmFtZScpLFxuICAgICAgICBmZUFyZ3Moe1xuICAgICAgICAgIHB1YmxpY2F0aW9uSWQ6IGRlcHMucGFnZUNvbmZpZygpLmdldFB1YmxpY2F0aW9uSWQoKSxcbiAgICAgICAgICBwcm9kdWN0SWQ6IGRlcHMucGFnZUNvbmZpZygpLmdldFByb2R1Y3RJZCgpLFxuICAgICAgICB9KSxcbiAgICAgICAgLyogc2hvdWxkRmFkZUJvZHkgKi8gdHJ1ZVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnRzIHRoZSBMb2dpbiBGbG93LlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIHN0YXJ0KCkge1xuICAgIHRoaXMub3BlblZpZXdQcm9taXNlXyA9IHRoaXMuZGlhbG9nTWFuYWdlcl8ub3BlblZpZXcoXG4gICAgICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xyk7XG5cbiAgICByZXR1cm4gdGhpcy5hY2NvdW50UHJvbWlzZV8udGhlbihhY2NvdW50ID0+IHtcbiAgICAgIC8vIEFjY291bnQgd2FzIGZvdW5kLlxuICAgICAgdGhpcy5kaWFsb2dNYW5hZ2VyXy5jb21wbGV0ZVZpZXcodGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfKTtcbiAgICAgIHJldHVybiBhY2NvdW50O1xuICAgIH0sIHJlYXNvbiA9PiB7XG4gICAgICB0aGlzLmRpYWxvZ01hbmFnZXJfLmNvbXBsZXRlVmlldyh0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18pO1xuICAgICAgdGhyb3cgcmVhc29uO1xuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuXG5jbGFzcyBPZmZlcnNBcGkge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuLi9tb2RlbC9wYWdlLWNvbmZpZy5QYWdlQ29uZmlnfSBjb25maWdcbiAgICogQHBhcmFtIHshLi9mZXRjaGVyLkZldGNoZXJ9IGZldGNoZXJcbiAgICovXG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZmV0Y2hlcikge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi9tb2RlbC9wYWdlLWNvbmZpZy5QYWdlQ29uZmlnfSAqL1xuICAgIHRoaXMuY29uZmlnXyA9IGNvbmZpZztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuL2ZldGNoZXIuRmV0Y2hlcn0gKi9cbiAgICB0aGlzLmZldGNoZXJfID0gZmV0Y2hlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZz19IG9wdF9wcm9kdWN0SWRcbiAgICogQHJldHVybiB7IVByb21pc2U8IUFycmF5PCEuLi9hcGkvb2ZmZXIuT2ZmZXI+Pn1cbiAgICovXG4gIGdldE9mZmVycyhvcHRfcHJvZHVjdElkKSB7XG4gICAgY29uc3QgcHJvZHVjdElkID0gb3B0X3Byb2R1Y3RJZCB8fCB0aGlzLmNvbmZpZ18uZ2V0UHJvZHVjdElkKCk7XG4gICAgaWYgKCFwcm9kdWN0SWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignZ2V0T2ZmZXJzIHJlcXVpcmVzIHByb2R1Y3RJZCBpbiBjb25maWcgb3IgYXJndW1lbnRzJyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmZldGNoXyhwcm9kdWN0SWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9kdWN0SWRcbiAgICogQHJldHVybiB7IVByb21pc2U8IUFycmF5PCEuLi9hcGkvb2ZmZXIuT2ZmZXI+Pn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGZldGNoXyhwcm9kdWN0SWQpIHtcbiAgICBjb25zdCB1cmwgPSBzZXJ2aWNlVXJsKFxuICAgICAgICAnL3B1YmxpY2F0aW9uLycgK1xuICAgICAgICBlbmNvZGVVUklDb21wb25lbnQodGhpcy5jb25maWdfLmdldFB1YmxpY2F0aW9uSWQoKSkgK1xuICAgICAgICAnL29mZmVycycgK1xuICAgICAgICAnP2xhYmVsPScgKyBlbmNvZGVVUklDb21wb25lbnQocHJvZHVjdElkKSk7XG4gICAgLy8gVE9ETyhkdm95dGVua28pOiBzd2l0Y2ggdG8gYSBub24tY3JlZGVudGlhbGVkIHJlcXVlc3QgYWZ0ZXIgbGF1bmNoLlxuICAgIHJldHVybiB0aGlzLmZldGNoZXJfLmZldGNoQ3JlZGVudGlhbGVkSnNvbih1cmwpLnRoZW4oanNvbiA9PiB7XG4gICAgICByZXR1cm4ganNvblsnb2ZmZXJzJ10gfHwgW107XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIE9mZmVycyB2aWV3IGlzIGNsb3NhYmxlIHdoZW4gcmVxdWVzdCB3YXMgb3JpZ2luYXRlZCBmcm9tICdBYmJydk9mZmVyRmxvdydcbiAqIG9yIGZyb20gJ1N1YnNjcmliZU9wdGlvbkZsb3cnLlxuICovXG5jb25zdCBPRkZFUlNfVklFV19DTE9TQUJMRSA9IHRydWU7XG5cbi8qKlxuICogVGhlIGNsYXNzIGZvciBPZmZlcnMgZmxvdy5cbiAqL1xuY2xhc3MgT2ZmZXJzRmxvdyB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4vZGVwcy5EZXBzRGVmfSBkZXBzXG4gICAqIEBwYXJhbSB7IS4uL2FwaS9zdWJzY3JpcHRpb25zLk9mZmVyc1JlcXVlc3R8dW5kZWZpbmVkfSBvcHRpb25zXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkZXBzLCBvcHRpb25zKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4vZGVwcy5EZXBzRGVmfSAqL1xuICAgIHRoaXMuZGVwc18gPSBkZXBzO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgICB0aGlzLndpbl8gPSBkZXBzLndpbigpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IXdlYi1hY3Rpdml0aWVzL2FjdGl2aXR5LXBvcnRzLkFjdGl2aXR5UG9ydHN9ICovXG4gICAgdGhpcy5hY3Rpdml0eVBvcnRzXyA9IGRlcHMuYWN0aXZpdGllcygpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2NvbXBvbmVudHMvZGlhbG9nLW1hbmFnZXIuRGlhbG9nTWFuYWdlcn0gKi9cbiAgICB0aGlzLmRpYWxvZ01hbmFnZXJfID0gZGVwcy5kaWFsb2dNYW5hZ2VyKCk7XG5cbiAgICBsZXQgaXNDbG9zYWJsZSA9IG9wdGlvbnMgJiYgb3B0aW9ucy5pc0Nsb3NhYmxlO1xuICAgIGlmIChpc0Nsb3NhYmxlID09IHVuZGVmaW5lZCkge1xuICAgICAgaXNDbG9zYWJsZSA9IGZhbHNlOyAgLy8gRGVmYXVsdCBpcyB0byBoaWRlIENsb3NlIGJ1dHRvbi5cbiAgICB9XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshQWN0aXZpdHlJZnJhbWVWaWV3fSAqL1xuICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3XyA9IG5ldyBBY3Rpdml0eUlmcmFtZVZpZXcoXG4gICAgICAgIHRoaXMud2luXyxcbiAgICAgICAgdGhpcy5hY3Rpdml0eVBvcnRzXyxcbiAgICAgICAgZmVVcmwoJy9vZmZlcnNpZnJhbWUnKSxcbiAgICAgICAgZmVBcmdzKHtcbiAgICAgICAgICAncHJvZHVjdElkJzogZGVwcy5wYWdlQ29uZmlnKCkuZ2V0UHJvZHVjdElkKCksXG4gICAgICAgICAgJ3B1YmxpY2F0aW9uSWQnOiBkZXBzLnBhZ2VDb25maWcoKS5nZXRQdWJsaWNhdGlvbklkKCksXG4gICAgICAgICAgJ3Nob3dOYXRpdmUnOiBkZXBzLmNhbGxiYWNrcygpLmhhc1N1YnNjcmliZVJlcXVlc3RDYWxsYmFjaygpLFxuICAgICAgICAgICdsaXN0Jzogb3B0aW9ucyAmJiBvcHRpb25zLmxpc3QgfHwgJ2RlZmF1bHQnLFxuICAgICAgICAgICdza3VzJzogb3B0aW9ucyAmJiBvcHRpb25zLnNrdXMgfHwgbnVsbCxcbiAgICAgICAgICAnaXNDbG9zYWJsZSc6IGlzQ2xvc2FibGUsXG4gICAgICAgIH0pLFxuICAgICAgICAvKiBzaG91bGRGYWRlQm9keSAqLyB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydHMgdGhlIG9mZmVycyBmbG93IG9yIGFscmVhZHlTdWJzY3JpYmVkIGZsb3cuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgc3RhcnQoKSB7XG4gICAgLy8gU3RhcnQvY2FuY2VsIGV2ZW50cy5cbiAgICB0aGlzLmRlcHNfLmNhbGxiYWNrcygpLnRyaWdnZXJGbG93U3RhcnRlZChcbiAgICAgICAgU3Vic2NyaXB0aW9uRmxvd3MuU0hPV19PRkZFUlMpO1xuICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xy5vbkNhbmNlbCgoKSA9PiB7XG4gICAgICB0aGlzLmRlcHNfLmNhbGxiYWNrcygpLnRyaWdnZXJGbG93Q2FuY2VsZWQoXG4gICAgICAgICAgU3Vic2NyaXB0aW9uRmxvd3MuU0hPV19PRkZFUlMpO1xuICAgIH0pO1xuXG4gICAgLy8gSWYgcmVzdWx0IGlzIGR1ZSB0byBPZmZlclNlbGVjdGlvbiwgcmVkaXJlY3QgdG8gcGF5bWVudHMuXG4gICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfLm9uTWVzc2FnZShyZXN1bHQgPT4ge1xuICAgICAgaWYgKHJlc3VsdFsnYWxyZWFkeVN1YnNjcmliZWQnXSkge1xuICAgICAgICB0aGlzLmRlcHNfLmNhbGxiYWNrcygpLnRyaWdnZXJMb2dpblJlcXVlc3Qoe1xuICAgICAgICAgIGxpbmtSZXF1ZXN0ZWQ6ICEhcmVzdWx0WydsaW5rUmVxdWVzdGVkJ10sXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAocmVzdWx0Wydza3UnXSkge1xuICAgICAgICBuZXcgUGF5U3RhcnRGbG93KFxuICAgICAgICAgICAgdGhpcy5kZXBzXyxcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAocmVzdWx0Wydza3UnXSkpXG4gICAgICAgICAgICAuc3RhcnQoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHJlc3VsdFsnbmF0aXZlJ10pIHtcbiAgICAgICAgdGhpcy5kZXBzXy5jYWxsYmFja3MoKS50cmlnZ2VyU3Vic2NyaWJlUmVxdWVzdCgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcy5kaWFsb2dNYW5hZ2VyXy5vcGVuVmlldyh0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18pO1xuICB9XG59XG5cblxuLyoqXG4gKiBUaGUgY2xhc3MgZm9yIHN1YnNjcmliZSBvcHRpb24gZmxvdy5cbiAqL1xuY2xhc3MgU3Vic2NyaWJlT3B0aW9uRmxvdyB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4vZGVwcy5EZXBzRGVmfSBkZXBzXG4gICAqIEBwYXJhbSB7IS4uL2FwaS9zdWJzY3JpcHRpb25zLk9mZmVyc1JlcXVlc3R8dW5kZWZpbmVkfSBvcHRpb25zXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkZXBzLCBvcHRpb25zKSB7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi9kZXBzLkRlcHNEZWZ9ICovXG4gICAgdGhpcy5kZXBzXyA9IGRlcHM7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vYXBpL3N1YnNjcmlwdGlvbnMuT2ZmZXJzUmVxdWVzdHx1bmRlZmluZWR9ICovXG4gICAgdGhpcy5vcHRpb25zXyA9IG9wdGlvbnM7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshd2ViLWFjdGl2aXRpZXMvYWN0aXZpdHktcG9ydHMuQWN0aXZpdHlQb3J0c30gKi9cbiAgICB0aGlzLmFjdGl2aXR5UG9ydHNfID0gZGVwcy5hY3Rpdml0aWVzKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vY29tcG9uZW50cy9kaWFsb2ctbWFuYWdlci5EaWFsb2dNYW5hZ2VyfSAqL1xuICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8gPSBkZXBzLmRpYWxvZ01hbmFnZXIoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFBY3Rpdml0eUlmcmFtZVZpZXd9ICovXG4gICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfID0gbmV3IEFjdGl2aXR5SWZyYW1lVmlldyhcbiAgICAgICAgZGVwcy53aW4oKSxcbiAgICAgICAgdGhpcy5hY3Rpdml0eVBvcnRzXyxcbiAgICAgICAgZmVVcmwoJy9vcHRpb25zaWZyYW1lJyksXG4gICAgICAgIGZlQXJncyh7XG4gICAgICAgICAgJ3B1YmxpY2F0aW9uSWQnOiBkZXBzLnBhZ2VDb25maWcoKS5nZXRQdWJsaWNhdGlvbklkKCksXG4gICAgICAgICAgJ3Byb2R1Y3RJZCc6IGRlcHMucGFnZUNvbmZpZygpLmdldFByb2R1Y3RJZCgpLFxuICAgICAgICAgICdsaXN0Jzogb3B0aW9ucyAmJiBvcHRpb25zLmxpc3QgfHwgJ2RlZmF1bHQnLFxuICAgICAgICAgICdza3VzJzogb3B0aW9ucyAmJiBvcHRpb25zLnNrdXMgfHwgbnVsbCxcbiAgICAgICAgICAnaXNDbG9zYWJsZSc6IHRydWUsXG4gICAgICAgIH0pLFxuICAgICAgICAvKiBzaG91bGRGYWRlQm9keSAqLyBmYWxzZSk7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnRzIHRoZSBvZmZlcnMgZmxvdyBvciBhbHJlYWR5U3Vic2NyaWJlZCBmbG93LlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIHN0YXJ0KCkge1xuICAgIC8vIFN0YXJ0L2NhbmNlbCBldmVudHMuXG4gICAgdGhpcy5kZXBzXy5jYWxsYmFja3MoKS50cmlnZ2VyRmxvd1N0YXJ0ZWQoXG4gICAgICAgIFN1YnNjcmlwdGlvbkZsb3dzLlNIT1dfU1VCU0NSSUJFX09QVElPTik7XG4gICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfLm9uQ2FuY2VsKCgpID0+IHtcbiAgICAgIHRoaXMuZGVwc18uY2FsbGJhY2tzKCkudHJpZ2dlckZsb3dDYW5jZWxlZChcbiAgICAgICAgICBTdWJzY3JpcHRpb25GbG93cy5TSE9XX1NVQlNDUklCRV9PUFRJT04pO1xuICAgIH0pO1xuXG4gICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfLm9uTWVzc2FnZShkYXRhID0+IHtcbiAgICAgIHRoaXMubWF5YmVPcGVuT2ZmZXJzRmxvd18oZGF0YSk7XG4gICAgfSk7XG4gICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfLmFjY2VwdFJlc3VsdCgpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgIHRoaXMubWF5YmVPcGVuT2ZmZXJzRmxvd18ocmVzdWx0LmRhdGEpO1xuICAgIH0sIHJlYXNvbiA9PiB7XG4gICAgICB0aGlzLmRpYWxvZ01hbmFnZXJfLmNvbXBsZXRlVmlldyh0aGlzLmFjdGl2aXR5SWZyYW1lVmlld18pO1xuICAgICAgdGhyb3cgcmVhc29uO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLmRpYWxvZ01hbmFnZXJfLm9wZW5WaWV3KHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHsqfSBkYXRhXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBtYXliZU9wZW5PZmZlcnNGbG93XyhkYXRhKSB7XG4gICAgaWYgKGRhdGEgJiYgZGF0YVsnc3Vic2NyaWJlJ10pIHtcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnNfIHx8IHt9O1xuICAgICAgaWYgKG9wdGlvbnMuaXNDbG9zYWJsZSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgb3B0aW9ucy5pc0Nsb3NhYmxlID0gT0ZGRVJTX1ZJRVdfQ0xPU0FCTEU7XG4gICAgICB9XG4gICAgICBuZXcgT2ZmZXJzRmxvdyh0aGlzLmRlcHNfLCBvcHRpb25zKS5zdGFydCgpO1xuICAgIH1cbiAgfVxufVxuXG5cbi8qKlxuICogVGhlIGNsYXNzIGZvciBBYmJyZXZpYXRlZCBPZmZlciBmbG93LlxuICpcbiAqL1xuY2xhc3MgQWJicnZPZmZlckZsb3cge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuL2RlcHMuRGVwc0RlZn0gZGVwc1xuICAgKiBAcGFyYW0geyEuLi9hcGkvc3Vic2NyaXB0aW9ucy5PZmZlcnNSZXF1ZXN0PX0gb3B0aW9uc1xuICAgKi9cbiAgY29uc3RydWN0b3IoZGVwcywgb3B0aW9ucyA9IHt9KSB7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi9kZXBzLkRlcHNEZWZ9ICovXG4gICAgdGhpcy5kZXBzXyA9IGRlcHM7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vYXBpL3N1YnNjcmlwdGlvbnMuT2ZmZXJzUmVxdWVzdHx1bmRlZmluZWR9ICovXG4gICAgdGhpcy5vcHRpb25zXyA9IG9wdGlvbnM7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IGRlcHMud2luKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshd2ViLWFjdGl2aXRpZXMvYWN0aXZpdHktcG9ydHMuQWN0aXZpdHlQb3J0c30gKi9cbiAgICB0aGlzLmFjdGl2aXR5UG9ydHNfID0gZGVwcy5hY3Rpdml0aWVzKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vY29tcG9uZW50cy9kaWFsb2ctbWFuYWdlci5EaWFsb2dNYW5hZ2VyfSAqL1xuICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8gPSBkZXBzLmRpYWxvZ01hbmFnZXIoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFBY3Rpdml0eUlmcmFtZVZpZXd9ICovXG4gICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfID0gbmV3IEFjdGl2aXR5SWZyYW1lVmlldyhcbiAgICAgICAgdGhpcy53aW5fLFxuICAgICAgICB0aGlzLmFjdGl2aXR5UG9ydHNfLFxuICAgICAgICBmZVVybCgnL2FiYnJ2b2ZmZXJpZnJhbWUnKSxcbiAgICAgICAgZmVBcmdzKHtcbiAgICAgICAgICAncHVibGljYXRpb25JZCc6IGRlcHMucGFnZUNvbmZpZygpLmdldFB1YmxpY2F0aW9uSWQoKSxcbiAgICAgICAgICAncHJvZHVjdElkJzogZGVwcy5wYWdlQ29uZmlnKCkuZ2V0UHJvZHVjdElkKCksXG4gICAgICAgICAgJ3Nob3dOYXRpdmUnOiBkZXBzLmNhbGxiYWNrcygpLmhhc1N1YnNjcmliZVJlcXVlc3RDYWxsYmFjaygpLFxuICAgICAgICAgICdsaXN0Jzogb3B0aW9ucyAmJiBvcHRpb25zLmxpc3QgfHwgJ2RlZmF1bHQnLFxuICAgICAgICAgICdza3VzJzogb3B0aW9ucyAmJiBvcHRpb25zLnNrdXMgfHwgbnVsbCxcbiAgICAgICAgICAnaXNDbG9zYWJsZSc6IHRydWUsXG4gICAgICAgIH0pLFxuICAgICAgICAvKiBzaG91bGRGYWRlQm9keSAqLyBmYWxzZSk7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnRzIHRoZSBvZmZlcnMgZmxvd1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIHN0YXJ0KCkge1xuICAgIC8vIFN0YXJ0L2NhbmNlbCBldmVudHMuXG4gICAgdGhpcy5kZXBzXy5jYWxsYmFja3MoKS50cmlnZ2VyRmxvd1N0YXJ0ZWQoXG4gICAgICAgIFN1YnNjcmlwdGlvbkZsb3dzLlNIT1dfQUJCUlZfT0ZGRVIpO1xuICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xy5vbkNhbmNlbCgoKSA9PiB7XG4gICAgICB0aGlzLmRlcHNfLmNhbGxiYWNrcygpLnRyaWdnZXJGbG93Q2FuY2VsZWQoXG4gICAgICAgICAgU3Vic2NyaXB0aW9uRmxvd3MuU0hPV19BQkJSVl9PRkZFUik7XG4gICAgfSk7XG5cbiAgICAvLyBJZiB0aGUgdXNlciBpcyBhbHJlYWR5IHN1YnNjcmliZWQsIHRyaWdnZXIgbG9naW4gZmxvd1xuICAgIHRoaXMuYWN0aXZpdHlJZnJhbWVWaWV3Xy5vbk1lc3NhZ2UoZGF0YSA9PiB7XG4gICAgICBpZiAoZGF0YVsnYWxyZWFkeVN1YnNjcmliZWQnXSkge1xuICAgICAgICB0aGlzLmRlcHNfLmNhbGxiYWNrcygpLnRyaWdnZXJMb2dpblJlcXVlc3Qoe1xuICAgICAgICAgIGxpbmtSZXF1ZXN0ZWQ6ICEhZGF0YVsnbGlua1JlcXVlc3RlZCddLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0pO1xuICAgIC8vIElmIHJlc3VsdCBpcyBkdWUgdG8gcmVxdWVzdGluZyBvZmZlcnMsIHJlZGlyZWN0IHRvIG9mZmVycyBmbG93XG4gICAgdGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfLmFjY2VwdFJlc3VsdCgpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgIGlmIChyZXN1bHQuZGF0YVsndmlld09mZmVycyddKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnNfIHx8IHt9O1xuICAgICAgICBpZiAob3B0aW9ucy5pc0Nsb3NhYmxlID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIG9wdGlvbnMuaXNDbG9zYWJsZSA9IE9GRkVSU19WSUVXX0NMT1NBQkxFO1xuICAgICAgICB9XG4gICAgICAgIG5ldyBPZmZlcnNGbG93KHRoaXMuZGVwc18sIG9wdGlvbnMpLnN0YXJ0KCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChyZXN1bHQuZGF0YVsnbmF0aXZlJ10pIHtcbiAgICAgICAgdGhpcy5kZXBzXy5jYWxsYmFja3MoKS50cmlnZ2VyU3Vic2NyaWJlUmVxdWVzdCgpO1xuICAgICAgICAvLyBUaGUgZmxvdyBpcyBjb21wbGV0ZS5cbiAgICAgICAgdGhpcy5kaWFsb2dNYW5hZ2VyXy5jb21wbGV0ZVZpZXcodGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuZGlhbG9nTWFuYWdlcl8ub3BlblZpZXcodGhpcy5hY3Rpdml0eUlmcmFtZVZpZXdfKTtcbiAgfVxufVxuXG4vKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBTdWJzY3JpYmUgd2l0aCBHb29nbGUgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbmNsYXNzIFByZWNvbm5lY3Qge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihkb2MpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshRG9jdW1lbnR9ICovXG4gICAgdGhpcy5kb2NfID0gZG9jO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAgICovXG4gIHByZWNvbm5lY3QodXJsKSB7XG4gICAgdGhpcy5wcmVfKHVybCwgJ3ByZWNvbm5lY3QnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gICAqL1xuICBkbnNQcmVmZXRjaCh1cmwpIHtcbiAgICB0aGlzLnByZV8odXJsLCAnZG5zLXByZWZldGNoJyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICAgKi9cbiAgcHJlZmV0Y2godXJsKSB7XG4gICAgdGhpcy5wcmVfKHVybCwgJ3ByZWNvbm5lY3QgcHJlZmV0Y2gnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhc1xuICAgKi9cbiAgcHJlbG9hZCh1cmwsIGFzKSB7XG4gICAgdGhpcy5wcmVfKHVybCwgJ3ByZWNvbm5lY3QgcHJlbG9hZCcsIGFzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWxcbiAgICogQHBhcmFtIHs/c3RyaW5nPX0gb3B0X2FzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcmVfKHVybCwgcmVsLCBvcHRfYXMpIHtcbiAgICAvLyA8bGluayByZWw9XCJwcmVmZXRjaFwiIGhyZWY9XCIuLi5cIiBhcz1cIlwiPlxuICAgIGNvbnN0IGxpbmtFbCA9IGNyZWF0ZUVsZW1lbnQodGhpcy5kb2NfLCAnbGluaycsIHtcbiAgICAgICdyZWwnOiByZWwsXG4gICAgICAnaHJlZic6IHVybCxcbiAgICB9KTtcbiAgICBpZiAob3B0X2FzKSB7XG4gICAgICBsaW5rRWwuc2V0QXR0cmlidXRlKCdhcycsIG9wdF9hcyk7XG4gICAgfVxuICAgIHRoaXMuZG9jXy5oZWFkLmFwcGVuZENoaWxkKGxpbmtFbCk7XG4gIH1cbn1cblxuLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgU3Vic2NyaWJlIHdpdGggR29vZ2xlIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5jb25zdCBQUkVGSVggPSAnc3Vic2NyaWJlLmdvb2dsZS5jb20nO1xuXG5cbmNsYXNzIFN0b3JhZ2Uge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKi9cbiAgY29uc3RydWN0b3Iod2luKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgICB0aGlzLndpbl8gPSB3aW47XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshT2JqZWN0PHN0cmluZywgIVByb21pc2U8P3N0cmluZz4+fSAqL1xuICAgIHRoaXMudmFsdWVzXyA9IHt9O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcbiAgICogQHJldHVybiB7IVByb21pc2U8P3N0cmluZz59XG4gICAqL1xuICBnZXQoa2V5KSB7XG4gICAgaWYgKCF0aGlzLnZhbHVlc19ba2V5XSkge1xuICAgICAgdGhpcy52YWx1ZXNfW2tleV0gPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgaWYgKHRoaXMud2luXy5zZXNzaW9uU3RvcmFnZSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXNvbHZlKHRoaXMud2luXy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKHN0b3JhZ2VLZXkoa2V5KSkpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIElnbm9yZSBlcnJvci5cbiAgICAgICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy52YWx1ZXNfW2tleV07XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBzZXQoa2V5LCB2YWx1ZSkge1xuICAgIHRoaXMudmFsdWVzX1trZXldID0gUHJvbWlzZS5yZXNvbHZlKHZhbHVlKTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBpZiAodGhpcy53aW5fLnNlc3Npb25TdG9yYWdlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdGhpcy53aW5fLnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oc3RvcmFnZUtleShrZXkpLCB2YWx1ZSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBJZ25vcmUgZXJyb3IuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJlc29sdmUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5XG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgcmVtb3ZlKGtleSkge1xuICAgIGRlbGV0ZSB0aGlzLnZhbHVlc19ba2V5XTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBpZiAodGhpcy53aW5fLnNlc3Npb25TdG9yYWdlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdGhpcy53aW5fLnNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oc3RvcmFnZUtleShrZXkpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIElnbm9yZSBlcnJvci5cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmVzb2x2ZSgpO1xuICAgIH0pO1xuICB9XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHN0b3JhZ2VLZXkoa2V5KSB7XG4gIHJldHVybiBQUkVGSVggKyAnOicgKyBrZXk7XG59XG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuXG4vKipcbiAqIEBpbXBsZW1lbnRzIHtEZXBzRGVmfVxuICogQGltcGxlbWVudHMge1N1YnNjcmlwdGlvbnN9XG4gKi9cbmNsYXNzIENvbmZpZ3VyZWRSdW50aW1lIHtcblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fCFEb2N1bWVudHwhRG9jfSB3aW5PckRvY1xuICAgKiBAcGFyYW0geyEuLi9tb2RlbC9wYWdlLWNvbmZpZy5QYWdlQ29uZmlnfSBwYWdlQ29uZmlnXG4gICAqIEBwYXJhbSB7e1xuICAgKiAgICAgZmV0Y2hlcjogKCFGZXRjaGVyfHVuZGVmaW5lZCksXG4gICAqICAgfT19IG9wdF9pbnRlZ3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKHdpbk9yRG9jLCBwYWdlQ29uZmlnLCBvcHRfaW50ZWdyKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IURvY30gKi9cbiAgICB0aGlzLmRvY18gPSByZXNvbHZlRG9jKHdpbk9yRG9jKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFXaW5kb3d9ICovXG4gICAgdGhpcy53aW5fID0gdGhpcy5kb2NfLmdldFdpbigpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uL2FwaS9zdWJzY3JpcHRpb25zLkNvbmZpZ30gKi9cbiAgICB0aGlzLmNvbmZpZ18gPSBkZWZhdWx0Q29uZmlnKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vbW9kZWwvcGFnZS1jb25maWcuUGFnZUNvbmZpZ30gKi9cbiAgICB0aGlzLnBhZ2VDb25maWdfID0gcGFnZUNvbmZpZztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFQcm9taXNlfSAqL1xuICAgIHRoaXMuZG9jdW1lbnRQYXJzZWRfID0gdGhpcy5kb2NfLndoZW5SZWFkeSgpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUZldGNoZXJ9ICovXG4gICAgdGhpcy5mZXRjaGVyXyA9IG9wdF9pbnRlZ3IgJiYgb3B0X2ludGVnci5mZXRjaGVyIHx8XG4gICAgICAgIG5ldyBYaHJGZXRjaGVyKHRoaXMud2luXyk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshU3RvcmFnZX0gKi9cbiAgICB0aGlzLnN0b3JhZ2VfID0gbmV3IFN0b3JhZ2UodGhpcy53aW5fKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFEaWFsb2dNYW5hZ2VyfSAqL1xuICAgIHRoaXMuZGlhbG9nTWFuYWdlcl8gPSBuZXcgRGlhbG9nTWFuYWdlcih0aGlzLmRvY18pO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IXdlYi1hY3Rpdml0aWVzL2FjdGl2aXR5LXBvcnRzLkFjdGl2aXR5UG9ydHN9ICovXG4gICAgdGhpcy5hY3Rpdml0eVBvcnRzXyA9IG5ldyBhY3Rpdml0eVBvcnRzXzEodGhpcy53aW5fKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFDYWxsYmFja3N9ICovXG4gICAgdGhpcy5jYWxsYmFja3NfID0gbmV3IENhbGxiYWNrcygpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUVudGl0bGVtZW50c01hbmFnZXJ9ICovXG4gICAgdGhpcy5lbnRpdGxlbWVudHNNYW5hZ2VyXyA9IG5ldyBFbnRpdGxlbWVudHNNYW5hZ2VyKFxuICAgICAgICB0aGlzLndpbl8sIHRoaXMucGFnZUNvbmZpZ18sIHRoaXMuZmV0Y2hlcl8sIHRoaXMpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IU9mZmVyc0FwaX0gKi9cbiAgICB0aGlzLm9mZmVyc0FwaV8gPSBuZXcgT2ZmZXJzQXBpKHRoaXMucGFnZUNvbmZpZ18sIHRoaXMuZmV0Y2hlcl8pO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUJ1dHRvbkFwaX0gKi9cbiAgICB0aGlzLmJ1dHRvbkFwaV8gPSBuZXcgQnV0dG9uQXBpKHRoaXMuZG9jXyk7XG5cbiAgICBjb25zdCBwcmVjb25uZWN0ID0gbmV3IFByZWNvbm5lY3QodGhpcy53aW5fLmRvY3VtZW50KTtcblxuICAgIExpbmtDb21wbGV0ZUZsb3cuY29uZmlndXJlUGVuZGluZyh0aGlzKTtcbiAgICBQYXlDb21wbGV0ZUZsb3cuY29uZmlndXJlUGVuZGluZyh0aGlzKTtcbiAgICBQYXlTdGFydEZsb3cucHJlY29ubmVjdChwcmVjb25uZWN0KTtcblxuICAgIGluamVjdFN0eWxlU2hlZXQodGhpcy53aW5fLmRvY3VtZW50LCBDU1MpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBkb2MoKSB7XG4gICAgcmV0dXJuIHRoaXMuZG9jXztcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgd2luKCkge1xuICAgIHJldHVybiB0aGlzLndpbl87XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHBhZ2VDb25maWcoKSB7XG4gICAgcmV0dXJuIHRoaXMucGFnZUNvbmZpZ187XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFjdGl2aXRpZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0aXZpdHlQb3J0c187XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGRpYWxvZ01hbmFnZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGlhbG9nTWFuYWdlcl87XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGVudGl0bGVtZW50c01hbmFnZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuZW50aXRsZW1lbnRzTWFuYWdlcl87XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGNhbGxiYWNrcygpIHtcbiAgICByZXR1cm4gdGhpcy5jYWxsYmFja3NfO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzdG9yYWdlKCkge1xuICAgIHJldHVybiB0aGlzLnN0b3JhZ2VfO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBpbml0KCkge1xuICAgIC8vIEltcGxlbWVudGVkIGJ5IHRoZSBgUnVudGltZWAgY2xhc3MuXG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGNvbmZpZ3VyZShjb25maWcpIHtcbiAgICAvLyBWYWxpZGF0ZSBmaXJzdC5cbiAgICBsZXQgZXJyb3IgPSBudWxsO1xuICAgIGZvciAoY29uc3QgayBpbiBjb25maWcpIHtcbiAgICAgIGNvbnN0IHYgPSBjb25maWdba107XG4gICAgICBpZiAoayA9PSAnd2luZG93T3Blbk1vZGUnKSB7XG4gICAgICAgIGlmICh2ICE9IFdpbmRvd09wZW5Nb2RlLkFVVE8gJiZcbiAgICAgICAgICAgIHYgIT0gV2luZG93T3Blbk1vZGUuUkVESVJFQ1QpIHtcbiAgICAgICAgICBlcnJvciA9ICdVbmtub3duIHdpbmRvd09wZW5Nb2RlOiAnICsgdjtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXJyb3IgPSAnVW5rbm93biBjb25maWcgcHJvcGVydHk6ICcgKyBrO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgfVxuICAgIC8vIEFzc2lnbi5cbiAgICBPYmplY3QuYXNzaWduKHRoaXMuY29uZmlnXywgY29uZmlnKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgY29uZmlnKCkge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ187XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHJlc2V0KCkge1xuICAgIHRoaXMuZW50aXRsZW1lbnRzTWFuYWdlcl8ucmVzZXQoKTtcbiAgICB0aGlzLmRpYWxvZ01hbmFnZXJfLmNvbXBsZXRlQWxsKCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHN0YXJ0KCkge1xuICAgIC8vIE5vIG5lZWQgdG8gcnVuIGVudGl0bGVtZW50cyB3aXRob3V0IGEgcHJvZHVjdCBvciBmb3IgYW4gdW5sb2NrZWQgcGFnZS5cbiAgICBpZiAoIXRoaXMucGFnZUNvbmZpZ18uZ2V0UHJvZHVjdElkKCkgfHwgIXRoaXMucGFnZUNvbmZpZ18uaXNMb2NrZWQoKSkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICB0aGlzLmdldEVudGl0bGVtZW50cygpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXRFbnRpdGxlbWVudHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZW50aXRsZW1lbnRzTWFuYWdlcl8uZ2V0RW50aXRsZW1lbnRzKClcbiAgICAgICAgLnRoZW4oZW50aXRsZW1lbnRzID0+IGVudGl0bGVtZW50cy5jbG9uZSgpKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc2V0T25FbnRpdGxlbWVudHNSZXNwb25zZShjYWxsYmFjaykge1xuICAgIHRoaXMuY2FsbGJhY2tzXy5zZXRPbkVudGl0bGVtZW50c1Jlc3BvbnNlKGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0T2ZmZXJzKG9wdF9vcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMub2ZmZXJzQXBpXy5nZXRPZmZlcnMob3B0X29wdGlvbnMgJiYgb3B0X29wdGlvbnMucHJvZHVjdElkKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc2hvd09mZmVycyhvcHRfb3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLmRvY3VtZW50UGFyc2VkXy50aGVuKCgpID0+IHtcbiAgICAgIGNvbnN0IGZsb3cgPSBuZXcgT2ZmZXJzRmxvdyh0aGlzLCBvcHRfb3B0aW9ucyk7XG4gICAgICByZXR1cm4gZmxvdy5zdGFydCgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzaG93U3Vic2NyaWJlT3B0aW9uKG9wdF9vcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRQYXJzZWRfLnRoZW4oKCkgPT4ge1xuICAgICAgY29uc3QgZmxvdyA9IG5ldyBTdWJzY3JpYmVPcHRpb25GbG93KHRoaXMsIG9wdF9vcHRpb25zKTtcbiAgICAgIHJldHVybiBmbG93LnN0YXJ0KCk7XG4gICAgfSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNob3dBYmJydk9mZmVyKG9wdF9vcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRQYXJzZWRfLnRoZW4oKCkgPT4ge1xuICAgICAgY29uc3QgZmxvdyA9IG5ldyBBYmJydk9mZmVyRmxvdyh0aGlzLCBvcHRfb3B0aW9ucyk7XG4gICAgICByZXR1cm4gZmxvdy5zdGFydCgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzaG93U3Vic2NyaXB0aW9uTG9va3VwUHJvZ3Jlc3MoYWNjb3VudFByb21pc2UpIHtcbiAgICByZXR1cm4gdGhpcy5kb2N1bWVudFBhcnNlZF8udGhlbigoKSA9PiB7XG4gICAgICBjb25zdCB3YWl0ID0gbmV3IFdhaXRGb3JTdWJzY3JpcHRpb25Mb29rdXBBcGkodGhpcywgYWNjb3VudFByb21pc2UpO1xuICAgICAgcmV0dXJuIHdhaXQuc3RhcnQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc2V0T25Mb2dpblJlcXVlc3QoY2FsbGJhY2spIHtcbiAgICB0aGlzLmNhbGxiYWNrc18uc2V0T25Mb2dpblJlcXVlc3QoY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzZXRPbkxpbmtDb21wbGV0ZShjYWxsYmFjaykge1xuICAgIHRoaXMuY2FsbGJhY2tzXy5zZXRPbkxpbmtDb21wbGV0ZShjYWxsYmFjayk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGxpbmtBY2NvdW50KCkge1xuICAgIHJldHVybiB0aGlzLmRvY3VtZW50UGFyc2VkXy50aGVuKCgpID0+IHtcbiAgICAgIHJldHVybiBuZXcgTGlua2JhY2tGbG93KHRoaXMpLnN0YXJ0KCk7XG4gICAgfSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNhdmVTdWJzY3JpcHRpb24oc2F2ZVN1YnNjcmlwdGlvblJlcXVlc3RDYWxsYmFjaykge1xuICAgIHJldHVybiB0aGlzLmRvY3VtZW50UGFyc2VkXy50aGVuKCgpID0+IHtcbiAgICAgIHJldHVybiBuZXcgTGlua1NhdmVGbG93KHRoaXMsIHNhdmVTdWJzY3JpcHRpb25SZXF1ZXN0Q2FsbGJhY2spLnN0YXJ0KCk7XG4gICAgfSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNob3dMb2dpblByb21wdCgpIHtcbiAgICByZXR1cm4gdGhpcy5kb2N1bWVudFBhcnNlZF8udGhlbigoKSA9PiB7XG4gICAgICByZXR1cm4gbmV3IExvZ2luUHJvbXB0QXBpKHRoaXMpLnN0YXJ0KCk7XG4gICAgfSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNob3dMb2dpbk5vdGlmaWNhdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5kb2N1bWVudFBhcnNlZF8udGhlbigoKSA9PiB7XG4gICAgICByZXR1cm4gbmV3IExvZ2luTm90aWZpY2F0aW9uQXBpKHRoaXMpLnN0YXJ0KCk7XG4gICAgfSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNldE9uTmF0aXZlU3Vic2NyaWJlUmVxdWVzdChjYWxsYmFjaykge1xuICAgIHRoaXMuY2FsbGJhY2tzXy5zZXRPblN1YnNjcmliZVJlcXVlc3QoY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzZXRPblN1YnNjcmliZVJlc3BvbnNlKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5jYWxsYmFja3NfLnNldE9uU3Vic2NyaWJlUmVzcG9uc2UoY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzdWJzY3JpYmUoc2t1KSB7XG4gICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRQYXJzZWRfLnRoZW4oKCkgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBQYXlTdGFydEZsb3codGhpcywgc2t1KS5zdGFydCgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBjb21wbGV0ZURlZmVycmVkQWNjb3VudENyZWF0aW9uKG9wdF9vcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRQYXJzZWRfLnRoZW4oKCkgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBEZWZlcnJlZEFjY291bnRGbG93KHRoaXMsIG9wdF9vcHRpb25zIHx8IG51bGwpLnN0YXJ0KCk7XG4gICAgfSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNldE9uRmxvd1N0YXJ0ZWQoY2FsbGJhY2spIHtcbiAgICB0aGlzLmNhbGxiYWNrc18uc2V0T25GbG93U3RhcnRlZChjYWxsYmFjayk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNldE9uRmxvd0NhbmNlbGVkKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5jYWxsYmFja3NfLnNldE9uRmxvd0NhbmNlbGVkKGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgY3JlYXRlQnV0dG9uKG9wdGlvbnNPckNhbGxiYWNrLCBvcHRfY2FsbGJhY2spIHtcbiAgICAvLyBUaGlzIGlzIGEgbWlub3IgZHVwbGljYXRpb24gdG8gYWxsb3cgdGhpcyBjb2RlIHRvIGJlIHN5bmMuXG4gICAgcmV0dXJuIHRoaXMuYnV0dG9uQXBpXy5jcmVhdGUob3B0aW9uc09yQ2FsbGJhY2ssIG9wdF9jYWxsYmFjayk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGF0dGFjaEJ1dHRvbihidXR0b24sIG9wdGlvbnNPckNhbGxiYWNrLCBvcHRfY2FsbGJhY2spIHtcbiAgICAvLyBUaGlzIGlzIGEgbWlub3IgZHVwbGljYXRpb24gdG8gYWxsb3cgdGhpcyBjb2RlIHRvIGJlIHN5bmMuXG4gICAgdGhpcy5idXR0b25BcGlfLmF0dGFjaChidXR0b24sIG9wdGlvbnNPckNhbGxiYWNrLCBvcHRfY2FsbGJhY2spO1xuICB9XG59XG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIFN1YnNjcmliZSB3aXRoIEdvb2dsZSBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuXG5leHBvcnQge1xuICBDb25maWd1cmVkUnVudGltZSxcbiAgRW50aXRsZW1lbnRzLFxuICBFbnRpdGxlbWVudCxcbiAgRmV0Y2hlcixcbiAgU3Vic2NyaWJlUmVzcG9uc2UsXG59O1xuIl19"}