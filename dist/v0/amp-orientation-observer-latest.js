(self.AMP=self.AMP||[]).push({n:"amp-orientation-observer",v:"0",f:(function(AMP,_){
function h(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]};self.log=self.log||{user:null,dev:null,userForEmbed:null};var l=self.log;function m(){var a="\u200b\u200b\u200b";throw Error("failed to call initLogConstructor");};function n(a,b){a=p(a);a=p(a);a=a.isSingleDoc()?a.win:a;return q(a,b)}function p(a){if(a.nodeType){var b=(a.ownerDocument||a).defaultView,b=b.__AMP_TOP||b;a=q(b,"ampdoc").getAmpDoc(a)}return a}function q(a,b){r(a,b);var c=a.services;c||(c=a.services={});var d=c;a=d[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function r(a,b){a=a.services&&a.services[b];return!(!a||!a.ctor&&!a.obj)};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function t(a){a=AMP.BaseElement.call(this,a)||this;a.A=p(a.element);a.w=null;a.c=[0,360];a.j=[-180,180];a.m=[-90,90];a.h=180;a.l=0;a.o=0;return a}h(t,AMP.BaseElement);t.prototype.buildCallback=function(){var a;a:{a=this.element;if(a.nodeType){var b=(a.ownerDocument||a).defaultView;if(b=b!=(b.__AMP_TOP||b)&&r(b,"action")?q(b,"action"):null){a=b;break a}}a=n(a,"action")}this.w=a;var c=n(this.A,"viewer");c.whenFirstVisible().then(this.B.bind(this))};
t.prototype.B=function(){var a=this;l.user||(l.user=m());l.user.assert(this.win.DeviceOrientationEvent,"The current browser doesn't support the `window.DeviceOrientationEvent`");this.c=v(this,"alpha-range",this.c);this.j=v(this,"beta-range",this.j);this.m=v(this,"gamma-range",this.m);this.win.addEventListener("deviceorientation",function(b){b instanceof DeviceOrientationEvent&&(b.alpha!==a.h&&(a.h=b.alpha,w(a,"alpha",a.h,a.c)),b.beta!==a.l&&(a.l=b.beta,w(a,"beta",a.l,a.j)),b.gamma!==a.o&&(a.o=b.gamma,
w(a,"gamma",a.o,a.m)))},!0)};function v(a,b,c){var d=a.element.getAttribute(b);if(d){var e=d.trim().split(" ");return[parseInt(e[0],10),parseInt(e[1],10)]}return c}
function w(a,b,c,d){var e=0>d[0]?c.toFixed()-d[0]:c.toFixed(),f=a.win,g;g="amp-orientation-observer."+b;var u={angle:c.toFixed(),percent:e/(d[1]-d[0])},k={detail:u};Object.assign(k,void 0);"function"==typeof f.CustomEvent?g=new f.CustomEvent(g,k):(f=f.document.createEvent("CustomEvent"),f.initCustomEvent(g,!!k.bubbles,!!k.cancelable,u),g=f);a.w.trigger(a.element,b,g,1)}(function(a){a.registerElement("amp-orientation-observer",t)})(self.AMP);
})});
//# sourceMappingURL=amp-orientation-observer-0.1.js.map

