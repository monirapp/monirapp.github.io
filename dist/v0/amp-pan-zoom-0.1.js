(self.AMP=self.AMP||[]).push({n:"amp-pan-zoom",v:"0",f:(function(AMP,_){
var f;function n(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]};self.log=self.log||{user:null,dev:null,userForEmbed:null};var p=self.log;function r(){if(!p.user)throw Error("failed to call initLogConstructor");return p.user}function t(){if(p.dev)return p.dev;throw Error("failed to call initLogConstructor");};function u(){var a,b;this.promise=new Promise(function(c,d){a=c;b=d});this.resolve=a;this.reject=b};function aa(a){if(a.nodeType){var b=(a.ownerDocument||a).defaultView;if(b=b!=(b.__AMP_TOP||b)&&ba(b,"action")?v(b,"action"):null)return b}b=ca(a);b=ca(b);b=b.isSingleDoc()?b.win:b;return v(b,"action")}function w(a,b){a=a.__AMP_TOP||a;return v(a,b)}function ca(a){return a.nodeType?w((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}
function v(a,b){ba(a,b);var c=a.services;c||(c=a.services={});var d=c;a=d[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function ba(a,b){a=a.services&&a.services[b];return!(!a||!a.ctor&&!a.obj)};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
var x;function y(a,b,c){var d=void 0,e=a,g=c,h;h=function(a){try{return g(a)}catch(m){throw self.reportError(m),m;}};var k=da(),l=!1;d&&(l=d.capture);e.addEventListener(b,h,k?d:l);return function(){e&&e.removeEventListener(b,h,k?d:l);h=e=g=null}}function da(){if(void 0!==x)return x;x=!1;try{var a={get capture(){x=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(b){}return x};function ea(a,b,c,d){var e={detail:c};Object.assign(e,d);if("function"==typeof a.CustomEvent)return new a.CustomEvent(b,e);a=a.document.createEvent("CustomEvent");a.initCustomEvent(b,!!e.bubbles,!!e.cancelable,c);return a};var z,fa="Webkit webkit Moz moz ms O o".split(" ");function ga(a,b){for(var c in b){var d=a,e=b[c],g;g=d.style;var h=c;if(2>h.length?0:0==h.lastIndexOf("--",0))g=h;else{z||(z=Object.create(null));var k=z[h];if(!k){k=h;if(void 0===g[h]){var l=h.charAt(0).toUpperCase()+h.slice(1);b:{for(var q=0;q<fa.length;q++){var m=fa[q]+l;if(void 0!==g[m]){l=m;break b}}l=""}void 0!==g[l]&&(k=l)}z[h]=k}g=k}g&&(d.style[g]=e)}};function ha(a,b,c,d){return{left:a,top:b,width:c,height:d,bottom:b+d,right:a+c,x:a,y:b}}function ia(a){return ha(Number(a.left),Number(a.top),Number(a.width),Number(a.height))};function A(){this.H=null}f=A.prototype;f.add=function(a){var b=this;this.H||(this.H=[]);this.H.push(a);return function(){b.remove(a)}};f.remove=function(a){this.H&&(a=this.H.indexOf(a),-1<a&&this.H.splice(a,1))};f.removeAll=function(){this.H&&(this.H.length=0)};f.fire=function(a){if(this.H)for(var b=this.H,c=0;c<b.length;c++)(0,b[c])(a)};f.getHandlerCount=function(){return this.H?this.H.length:0};function ja(a,b){for(var c=0;c<a.length;c++)if(b(a[c],c,a))return c;return-1};function B(a,b,c){var d=this;this.kb=w(a,"timer");this.pb=b;this.nb=c||0;this.da=-1;this.Ca=0;this.U=!1;this.mb=function(){return d.pa()}}B.prototype.isPending=function(){return-1!=this.da};B.prototype.schedule=function(a){var b=a||this.nb;this.U&&10>b&&(b=10);var c=Date.now()+b;return!this.isPending()||-10>c-this.Ca?(this.cancel(),this.Ca=c,this.da=this.kb.delay(this.mb,b),!0):!1};B.prototype.pa=function(){this.da=-1;this.Ca=0;this.U=!0;this.pb();this.U=!1};
B.prototype.cancel=function(){this.isPending()&&(this.kb.cancel(this.da),this.da=-1)};function ka(a,b,c){var d=Date.now();this.type=a;this.data=b;this.time=d;this.event=c}
function la(a,b){this.N=a;this.l=[];this.Z=[];this.K=[];this.m=[];this.w=null;this.xb=b;this.wa=!1;this.pa=new B(a.ownerDocument.defaultView,this.Ua.bind(this));this.fb=new A;this.ba=Object.create(null);this.Pa=this.wb.bind(this);this.Na=this.ub.bind(this);this.Oa=this.vb.bind(this);this.Ma=this.tb.bind(this);this.N.addEventListener("touchstart",this.Pa);this.N.addEventListener("touchend",this.Na);this.N.addEventListener("touchmove",this.Oa);this.N.addEventListener("touchcancel",this.Ma);this.Da=
!1}function ma(a){var b;b=void 0===b?!1:b;var c=a.__AMP_Gestures;c||(c=new la(a,b),a.__AMP_Gestures=c);return c}f=la.prototype;f.cleanup=function(){this.N.removeEventListener("touchstart",this.Pa);this.N.removeEventListener("touchend",this.Na);this.N.removeEventListener("touchmove",this.Oa);this.N.removeEventListener("touchcancel",this.Ma);delete this.N.__AMP_Gestures;this.pa.cancel()};
f.onGesture=function(a,b){var c=new a(this),d=c.getType(),e=this.ba[d];e||(this.l.push(c),e=new A,this.ba[d]=e);return e.add(b)};f.removeGesture=function(a){var b=(new a(this)).getType();if(a=this.ba[b]){a.removeAll();a=ja(this.l,function(a){return a.getType()==b});if(0>a)return!1;this.l.splice(a,1);this.K.splice(a,1);this.m.splice(a,1);this.Z.splice(a,1);delete this.ba[b];return!0}return!1};f.onPointerDown=function(a){return this.fb.add(a)};
f.wb=function(a){var b=Date.now();this.wa=!1;this.fb.fire(a);for(var c=0;c<this.l.length;c++)if(!this.K[c]&&(this.m[c]&&this.m[c]<b&&C(this,c),this.l[c].onTouchStart(a))){var d=c;this.Z[d]=!0;this.m[d]=0}D(this,a)};f.vb=function(a){for(var b=Date.now(),c=0;c<this.l.length;c++)this.Z[c]&&(this.m[c]&&this.m[c]<b?C(this,c):this.l[c].onTouchMove(a)||C(this,c));D(this,a)};
f.ub=function(a){for(var b=Date.now(),c=0;c<this.l.length;c++)this.Z[c]&&(this.m[c]&&this.m[c]<b?C(this,c):(this.l[c].onTouchEnd(a),(!this.m[c]||this.m[c]<b)&&C(this,c)));D(this,a)};f.tb=function(a){for(var b=0;b<this.l.length;b++){var c=b;this.K[c]=0;C(this,c)}D(this,a)};function D(a,b){var c=!!a.w||a.wa;a.wa=!1;if(!c)for(var d=Date.now(),e=0;e<a.l.length;e++)if(a.K[e]||a.m[e]&&a.m[e]>=d){c=!0;break}c&&(b.stopPropagation(),a.xb||b.preventDefault());a.Da&&(a.Da=!1,a.Ua())}
f.Ua=function(){for(var a=Date.now(),b=-1,c=0;c<this.l.length;c++)if(!this.K[c])this.m[c]&&this.m[c]<a&&C(this,c);else if(-1==b||this.K[c]>this.K[b])b=c;if(-1!=b){for(var d=0,c=0;c<this.l.length;c++)!this.K[c]&&this.Z[c]&&(d=Math.max(d,this.m[c]-a));if(2>d){for(var a=b,c=this.l[a],e=0;e<this.l.length;e++)if(e!=a){var g=e;this.K[g]=0;C(this,g)}this.K[a]=0;this.m[a]=0;this.w=c;c.acceptStart()}else this.pa.schedule(d)}};function C(a,b){a.Z[b]=!1;a.m[b]=0;a.K[b]||a.l[b].acceptCancel()}
function E(a,b){this.Ab=a;this.oa=b}f=E.prototype;f.getType=function(){return this.Ab};f.signalReady=function(a){var b=this.oa;if(b.w)this.acceptCancel();else{for(var c=Date.now(),d=0;d<b.l.length;d++)b.l[d]==this&&(b.K[d]=c+a,b.m[d]=0);b.Da=!0}};f.signalPending=function(a){var b=this.oa;if(b.w)this.acceptCancel();else for(var c=Date.now(),d=0;d<b.l.length;d++)b.l[d]==this&&(b.m[d]=c+a)};f.signalEnd=function(){var a=this.oa;a.w==this&&(a.w=null,a.wa=!0)};
f.signalEmit=function(a,b){var c=this.oa.ba[this.getType()];c&&c.fire(new ka(this.getType(),a,b))};f.acceptStart=function(){};f.acceptCancel=function(){};f.onTouchStart=function(){return!1};f.onTouchMove=function(){return!1};f.onTouchEnd=function(){};function na(){}var oa=Math.round(-16.67/Math.log(.95));function F(a,b,c){1>b&&(b=1);var d=a/b,e=.5+Math.min(b/33.34,.5);return d*e+c*(1-e)}function pa(a,b,c,d,e,g){var h;return(new qa(a,b,c,d,e,g,h)).start()}function qa(a,b,c,d,e,g,h){this.W=h||w(self,"vsync");this.P=a;this.xa=g;this.c=b;this.h=c;this.Aa=d;this.Ba=e;this.B=this.A=0;a=new u;this.ca=a.promise;this.Ja=a.resolve;this.Ia=a.reject;this.$=!1}f=qa.prototype;
f.start=function(){this.$=!0;if(.02>=Math.abs(this.Aa)&&.02>=Math.abs(this.Ba))this.xa(this.c,this.h),this.ya(!0);else{this.A=this.Aa;this.B=this.Ba;var a=this.yb.bind(this),b=this.ya.bind(this,!0);this.W.runAnimMutateSeries(this.P,a,5E3).then(b,b)}return this};f.halt=function(){this.$&&this.ya(!1)};f.then=function(a,b){return a||b?this.ca.then(a,b):this.ca};f.thenAlways=function(a){a=a||na;return this.then(a,a)};
f.yb=function(a,b){if(!this.$)return!1;this.c+=b*this.A;this.h+=b*this.B;if(!this.xa(this.c,this.h))return!1;var c=Math.exp(-a/oa);this.A=this.Aa*c;this.B=this.Ba*c;return.02<Math.abs(this.A)||.02<Math.abs(this.B)};f.ya=function(a){this.$&&(this.$=!1,this.xa(this.c,this.h),a?this.Ja():this.Ia())};function G(a){E.call(this,"tap",a);this.h=this.c=this.D=this.C=0;this.ib=null}n(G,E);G.prototype.onTouchStart=function(a){var b=a.touches;this.ib=a.target;return b&&1==b.length?(this.C=b[0].clientX,this.D=b[0].clientY,!0):!1};G.prototype.onTouchMove=function(a){return(a=a.changedTouches||a.touches)&&1==a.length&&(this.c=a[0].clientX,this.h=a[0].clientY,a=8<=Math.abs(this.h-this.D),8<=Math.abs(this.c-this.C)||a)?!1:!0};G.prototype.onTouchEnd=function(){this.signalReady(0)};
G.prototype.acceptStart=function(){this.signalEmit({clientX:this.c,clientY:this.h,target:this.ib},null);this.signalEnd()};function H(a){E.call(this,"doubletap",a);this.ia=this.h=this.c=this.D=this.C=0;this.Va=null}n(H,E);f=H.prototype;f.onTouchStart=function(a){return 1<this.ia?!1:(a=a.touches)&&1==a.length?(this.C=a[0].clientX,this.D=a[0].clientY,this.c=a[0].clientX,this.h=a[0].clientY,!0):!1};
f.onTouchMove=function(a){return(a=a.touches)&&1==a.length?(this.c=a[0].clientX,this.h=a[0].clientY,a=8<=Math.abs(this.h-this.D),8<=Math.abs(this.c-this.C)||a?(this.acceptCancel(),!1):!0):!1};f.onTouchEnd=function(a){this.ia++;2>this.ia?this.signalPending(200):(this.Va=a,this.signalReady(0))};f.acceptStart=function(){this.ia=0;this.signalEmit({clientX:this.c,clientY:this.h},this.Va);this.signalEnd()};f.acceptCancel=function(){this.ia=0};
function I(a,b,c,d){E.call(this,a,b);this.ja=c;this.va=d;this.w=!1;this.B=this.A=this.T=this.O=this.V=this.Ha=this.Ga=this.h=this.c=this.D=this.C=0}n(I,E);f=I.prototype;f.onTouchStart=function(a){return(a=a.touches)&&1==a.length?(this.V=Date.now(),this.C=a[0].clientX,this.D=a[0].clientY,!0):!1};
f.onTouchMove=function(a){var b=a.touches;if(b&&1==b.length){var c=b[0],b=c.clientX,c=c.clientY;this.c=b;this.h=c;if(this.w)this.R(!1,!1,a);else if(a=Math.abs(b-this.C),b=Math.abs(c-this.D),this.ja&&this.va)(8<=a||8<=b)&&this.signalReady(-10);else if(this.ja)if(8<=a&&a>b)this.signalReady(-10);else{if(8<=b)return!1}else if(this.va)if(8<=b&&b>a)this.signalReady(-10);else{if(8<=a)return!1}else return!1;return!0}return!1};f.onTouchEnd=function(a){this.za(a)};
f.acceptStart=function(){this.w=!0;this.Ga=this.C;this.Ha=this.D;this.T=this.V;this.C=this.c;this.D=this.h;this.R(!0,!1,null)};f.acceptCancel=function(){this.w=!1};
f.R=function(a,b,c){this.O=Date.now();var d=this.O-this.T;if(!b&&4<d||b&&16<d)this.A=F(this.c-this.Ga,d,this.A),this.B=F(this.h-this.Ha,d,this.B),this.A=1E-4<Math.abs(this.A)?this.A:0,this.B=1E-4<Math.abs(this.B)?this.B:0,this.Ga=this.c,this.Ha=this.h,this.T=this.O;this.signalEmit({first:a,last:b,time:this.O,deltaX:this.ja?this.c-this.C:0,deltaY:this.va?this.h-this.D:0,startX:this.C,startY:this.D,lastX:this.c,lastY:this.h,velocityX:this.ja?this.A:0,velocityY:this.va?this.B:0},c)};
f.za=function(a){this.w&&(this.w=!1,this.R(!1,!0,a),this.signalEnd())};function J(a){I.call(this,"swipe-xy",a,!0,!0)}n(J,I);function K(a){E.call(this,"pinch",a);this.w=!1;this.B=this.A=this.T=this.O=this.V=this.Ra=this.Qa=this.Fa=this.Ea=this.na=this.la=this.ma=this.ka=this.ha=this.fa=this.ga=this.ea=0}n(K,E);f=K.prototype;
f.onTouchStart=function(a){return(a=a.touches)&&1==a.length?!0:a&&2==a.length?(this.V=Date.now(),this.ea=a[0].clientX,this.ga=a[0].clientY,this.fa=a[1].clientX,this.ha=a[1].clientY,!0):!1};
f.onTouchMove=function(a){var b=a.touches;if(b&&1==b.length)return!0;if(b&&2==b.length){this.ka=b[0].clientX;this.ma=b[0].clientY;this.la=b[1].clientX;this.na=b[1].clientY;if(this.w)this.R(!1,!1,a);else{var c=this.ka-this.ea,d=this.ma-this.ga,e=this.la-this.fa,g=this.na-this.ha;if(0>=c*e&&0>=d*g)(4<=Math.abs(c-e)||4<=Math.abs(d-g))&&this.signalReady(0);else if(10<=Math.abs(c+e)||10<=Math.abs(d+g))return!1}return!0}return!1};f.onTouchEnd=function(a){this.za(a)};
f.acceptStart=function(){this.w=!0;this.T=this.V;this.Fa=this.Ea=0;this.Qa=.5*(this.ea+this.fa);this.Ra=.5*(this.ga+this.ha);this.R(!0,!1,null)};f.acceptCancel=function(){this.w=!1};
f.R=function(a,b,c){this.O=Date.now();var d=this.O-this.T,e=Math.abs(this.ka-this.ea-(this.la-this.fa)),g=Math.abs(this.ma-this.ga-(this.na-this.ha));if(!b&&4<d||b&&16<d)this.A=F(e-this.Ea,d,this.A),this.B=F(g-this.Fa,d,this.B),this.A=1E-4<Math.abs(this.A)?this.A:0,this.B=1E-4<Math.abs(this.B)?this.B:0,this.Ea=e,this.Fa=g,this.T=this.O;var d=this.ea,h=this.fa,k=this.ga,l=this.ha,q=(d-h)*(d-h)+(k-l)*(k-l),d=this.ka,h=this.la,k=this.ma,l=this.na,m=(d-h)*(d-h)+(k-l)*(k-l);this.signalEmit({first:a,last:b,
time:this.O,centerClientX:this.Qa,centerClientY:this.Ra,dir:Math.sign(m-q),deltaX:.5*e,deltaY:.5*g,velocityX:.5*this.A,velocityY:.5*this.B},c)};f.za=function(a){this.w&&(this.w=!1,this.R(!1,!0,a),this.signalEnd())};function L(a,b,c,d){var e=new ra(0,0,a,b,c,d,1,1);return e.solveYValueFromXValue.bind(e)}function ra(a,b,c,d,e,g,h,k){this.x0=a;this.y0=b;this.x1=c;this.y1=d;this.x2=e;this.y2=g;this.x3=h;this.y3=k}f=ra.prototype;f.solveYValueFromXValue=function(a){return this.getPointY(this.solvePositionFromXValue(a))};
f.solvePositionFromXValue=function(a){var b=1E-6,c=(a-this.x0)/(this.x3-this.x0);if(0>=c)return 0;if(1<=c)return 1;for(var d=0,e=1,g=0,h=0;8>h;h++){var g=this.getPointX(c),k=(this.getPointX(c+b)-g)/b;if(Math.abs(g-a)<b)return c;if(Math.abs(k)<b)break;else g<a?d=c:e=c,c-=(g-a)/k}for(h=0;Math.abs(g-a)>b&&8>h;h++)g<a?(d=c,c=(c+e)/2):(e=c,c=(c+d)/2),g=this.getPointX(c);return c};
f.getPointX=function(a){if(0==a)return this.x0;if(1==a)return this.x3;var b=this.lerp(this.x0,this.x1,a),c=this.lerp(this.x1,this.x2,a),d=this.lerp(this.x2,this.x3,a),b=this.lerp(b,c,a),c=this.lerp(c,d,a);return this.lerp(b,c,a)};f.getPointY=function(a){if(0==a)return this.y0;if(1==a)return this.y3;var b=this.lerp(this.y0,this.y1,a),c=this.lerp(this.y1,this.y2,a),d=this.lerp(this.y2,this.y3,a),b=this.lerp(b,c,a),c=this.lerp(c,d,a);return this.lerp(b,c,a)};f.lerp=function(a,b,c){return a+c*(b-a)};
var sa=L(.25,.1,.25,1),ta=L(.42,0,1,1),ua=L(0,0,.58,1),va=L(.42,0,.58,1),wa={linear:function(a){return a},ease:sa,"ease-in":ta,"ease-out":ua,"ease-in-out":va};function xa(a){if(!a)return null;if("string"==typeof a){if(-1!=a.indexOf("cubic-bezier")){var b=a.match(/cubic-bezier\((.+)\)/);if(b&&(b=b[1].split(",").map(parseFloat),4==b.length)){for(var c=0;4>c;c++)if(isNaN(b[c]))return null;return L(b[0],b[1],b[2],b[3])}return null}return wa[a]}return a};function ya(){}function M(a,b){this.P=a;this.W=b||w(self,"vsync");this.Sa=null;this.F=[]}function za(a,b,c){var d=Aa;return(new M(a)).setCurve(d).add(0,b,1).start(c)}M.prototype.setCurve=function(a){a&&(this.Sa=xa(a));return this};M.prototype.add=function(a,b,c,d){this.F.push({delay:a,func:b,duration:c,curve:xa(d)});return this};M.prototype.start=function(a){var b=new N(this.W,this.P,this.F,this.Sa,a);return b};
function N(a,b,c,d,e){this.W=a;this.P=b;this.F=[];for(b=0;b<c.length;b++){var g=c[b];this.F.push({delay:g.delay,func:g.func,duration:g.duration,curve:g.curve||d,started:!1,completed:!1})}this.ob=e;this.V=Date.now();this.U=!0;this.hb={};e=new u;this.ca=e.promise;this.Ja=e.resolve;this.Ia=e.reject;this.jb=this.W.createAnimTask(this.P,{mutate:this.zb.bind(this)});this.W.canAnimate(this.P)?this.jb(this.hb):(t().warn("Animation","cannot animate"),O(this,!1,0))}
N.prototype.then=function(a,b){return a||b?this.ca.then(a,b):this.ca};N.prototype.thenAlways=function(a){a=a||ya;return this.then(a,a)};N.prototype.halt=function(a){O(this,!1,a||0)};function O(a,b,c){if(a.U){a.U=!1;if(0!=c){1<a.F.length&&a.F.sort(function(a,b){return a.delay+a.duration-(b.delay+b.duration)});try{if(0<c)for(c=0;c<a.F.length;c++)a.F[c].func(1,!0);else for(var d=a.F.length-1;0<=d;d--)a.F[d].func(0,!1)}catch(e){t().error("Animation","completion failed: "+e,e),b=!1}}b?a.Ja():a.Ia()}}
N.prototype.zb=function(){if(this.U){for(var a=Date.now(),b=Math.min((a-this.V)/this.ob,1),c=0;c<this.F.length;c++){var d=this.F[c];!d.started&&b>=d.delay&&(d.started=!0)}for(c=0;c<this.F.length;c++)if(d=this.F[c],d.started&&!d.completed)a:{var e,g;if(0<d.duration){if(e=g=Math.min((b-d.delay)/d.duration,1),d.curve&&1!=e)try{e=d.curve(g)}catch(h){t().error("Animation","step curve failed: "+h,h);O(this,!1,0);break a}}else e=g=1;1==g&&(d.completed=!0);try{d.func(e,d.completed)}catch(h){t().error("Animation",
"step mutate failed: "+h,h),O(this,!1,0)}}1==b?O(this,!0,0):this.W.canAnimate(this.P)?this.jb(this.hb):(t().warn("Animation","cancel animation"),O(this,!1,0))}};function P(a,b){return function(c){return a+(b-a)*c}};var Aa=L(.4,0,.2,1.4),Ba={svg:!0,DIV:!0,"AMP-IMG":!0,"AMP-LAYOUT":!0};function Q(a){a=AMP.BaseElement.call(this,a)||this;a.G=null;a.La=null;a.ra=0;a.qa=0;a.o=null;a.X=null;a.ua=null;a.j=1;a.Ka=1;a.Y=1;a.S=3;a.Xa=0;a.Ya=0;a.Wa=1;a.C=0;a.D=0;a.I=0;a.J=0;a.ab=0;a.bb=0;a.Za=0;a.$a=0;a.M=null;a.aa=null;a.gb=!1;a.L=null;a.Ta=!1;a.lb=null;a.ta=null;a.sa=null;a.eb=0;a.cb=0;return a}n(Q,AMP.BaseElement);f=Q.prototype;
f.buildCallback=function(){var a=this;this.La=aa(this.element);var b=this.getRealChildren();r().assert(1==b.length,"amp-pan-zoom should\n  have its target element as the one and only child");r().assert(Ba[b[0].tagName],b[0].tagName+" is not supported by amp-pan-zoom");this.element.classList.add("i-amphtml-pan-zoom");this.G=b[0];this.G.classList.add("i-amphtml-pan-zoom-child");this.S=R(this,"max-scale",3);this.Wa=R(this,"initial-scale",1);this.Xa=R(this,"initial-x",0);this.Ya=R(this,"initial-y",0);
this.gb=this.element.hasAttribute("reset-on-resize");this.Ta=this.element.hasAttribute("disable-double-tap");this.registerAction("transform",function(b){var c=b.args;if(c)return a.transform(c.x||0,c.y||0,c.scale||1)})};f.transform=function(a,b,c){var d=this;S(this,c);var e=T(this,a,!1),g=U(this,b,!1);return V(this,c,e,g,!0).then(function(){return W(d)})};f.onMeasureChanged=function(){this.gb&&Ca(this)};f.layoutCallback=function(){Da(this);return Ca(this).then(Ea(this))};f.pauseCallback=function(){Fa(this)};
f.resumeCallback=function(){this.G&&this.scheduleLayout(this.G);Ea(this)};f.unlayoutCallback=function(){Fa(this);return!0};f.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"fill"==a||"responsive"==a};
function Da(a){a.L=a.element.ownerDocument.createElement("div");a.L.classList.add("amp-pan-zoom-in-icon");a.L.classList.add("amp-pan-zoom-button");a.L.addEventListener("click",function(){a.L.classList.contains("amp-pan-zoom-in-icon")?(a.transform(0,0,a.S),Ga(a)):(a.transform(0,0,a.Y),Ha(a))});a.element.appendChild(a.L)}function R(a,b,c){a=a.element;return a.hasAttribute(b)?parseInt(a.getAttribute(b),10):c}
function Ca(a){var b=a.G;return a.measureMutateElement(function(){a.ra=a.G.scrollWidth;a.qa=a.G.scrollHeight;var b=a.ra/a.qa;a.o=ia(a.element.getBoundingClientRect());var d=Math.min(a.o.width/b,a.o.height),e=Math.min(a.o.height*b,a.o.width);16>=Math.abs(e-a.ra)&&16>=Math.abs(d-a.qa)&&(e=a.ra,d=a.qa);a.X=ha(0,0,Math.round(e),Math.round(d));d=a.o;d=d.width/d.height;a.S=Math.max(a.S,Math.max(d/b,b/d));a.Ka=a.j=a.Wa;a.C=a.I=a.Xa;a.D=a.J=a.Ya},function(){ga(b,{width:a.X.width+"px",height:a.X.height+"px"})},
b).then(function(){var b=ia(a.G.getBoundingClientRect());a.X.top=b.top-a.o.top;a.X.left=b.left-a.o.left;S(a,a.j);return X(a)})}function Ea(a){Ia(a);var b;b=a.qb.bind(a);b=y(a.element,"mousedown",b);a.lb=b}function Fa(a){a.M&&(a.M.cleanup(),a.M=null);var b=a.lb;b&&b();(b=a.sa)&&b();(a=a.ta)&&a()}
f.qb=function(a){if(2!=a.button){a.preventDefault();var b=a.clientX;a=a.clientY;var c=this.sa;c&&c();(c=this.ta)&&c();this.cb=b;this.eb=a;b=this.rb.bind(this);this.sa=y(this.element,"mousemove",b);b=this.sb.bind(this);this.ta=y(this.win,"mouseup",b)}};f.rb=function(a){a.preventDefault();Ja(this,a.clientX-this.cb,a.clientY-this.eb)};f.sb=function(a){a.preventDefault();Y(this);(a=this.sa)&&a();(a=this.ta)&&a()};
function Ia(a){a.M||(a.M=ma(a.element),a.M.onPointerDown(function(){a.aa&&a.aa.halt()}),a.M.onGesture(K,function(b){var c=b.data,d=c.centerClientX,e=c.centerClientY;b=c.last;var g=c.deltaX,h=c.deltaY,k=c.dir;if(0!=k){var l=a.o,c=l.height,g=Math.sqrt(g*g+h*h),h=a.Ka*(1+k*g/100),l=l.width/2-(d-(a.o.left-a.getViewport().getScrollLeft())),c=c/2-(e-(a.o.top-a.getViewport().getScrollTop()));Ka(a,h,Math.min(g/100,1)*l,Math.min(g/100,1)*c,!1)}b&&W(a)}),a.Ta||(a.M.onGesture(H,function(b){b=b.data;La(a,b.clientX,
b.clientY).then(function(){return W(a)})}),a.M.onGesture(G,function(b){var c=ea(a.win,"click",null,{bubbles:!0});b.data.target.dispatchEvent(c)})))}function Ma(a){a.ua=a.M.onGesture(J,function(b){b=b.data;var c=b.last,d=b.velocityX,e=b.velocityY;Ja(a,b.deltaX,b.deltaY);c&&Na(a,d,e)})}function T(a,b,c){var d=.25*a.o.width;c=c&&1<a.j?d:0;return Math.min(Math.max(b,a.ab-c),a.Za+c)}function U(a,b,c){var d=.25*a.o.height;c=c&&1<a.j?d:0;return Math.min(Math.max(b,a.bb-c),a.$a+c)}
function S(a,b){var c=a.X,d=c.width,e=c.left,g=c.height,h=c.top,c=a.o,k=c.width,l=c.height;a.ab=Math.min(0,k-(e+d*(b+1)/2));a.Za=Math.max(0,(d*b-d)/2-e);a.bb=Math.min(0,l-(h+g*(b+1)/2));a.$a=Math.max(0,(g*b-g)/2-h)}function X(a){var b=a.j,c=a.I,d=a.J,e=a.G;return a.mutateElement(function(){var a;a=c;var h=d;"number"==typeof a&&(a+="px");void 0===h?a="translate("+a+")":("number"==typeof h&&(h+="px"),a="translate("+a+", "+h+")");ga(e,{transform:a+" "+("scale("+b+")")})},e)}
function Z(a,b,c,d){var e=ea(a.win,"amp-pan-zoom.transformEnd",{scale:b,x:c,y:d});a.La.trigger(a.element,"transformEnd",e,100);a.element.dispatchCustomEvent("transformEnd")}function Ja(a,b,c){var d=!1,e=T(a,a.C+b,!0),g=U(a,a.D+c,!0);V(a,a.j,e,g,d)}function Na(a,b,c){a.aa=pa(a.G,a.I,a.J,b,c,function(b,c){b=T(a,b,!0);c=U(a,c,!0);if(1>Math.abs(b-a.I)&&1>Math.abs(c-a.J))return!1;V(a,a.j,b,c,!1);return!0});a.aa.thenAlways(function(){a.aa=null;return Y(a)})}
function La(a,b,c){var d=a.j==a.Y?a.S:a.Y;b=a.o.width/2-(b-(a.o.left-a.getViewport().getScrollLeft()));c=a.o.height/2-(c-(a.o.top-a.getViewport().getScrollTop()));return Ka(a,d,b,c,!0)}function Ka(a,b,c,d,e){b=Math.min(Math.max(b,a.Y-.25),a.S+.25);if(b==a.j)return Promise.resolve();S(a,b);c=T(a,a.C+c*b,!1);d=U(a,a.D+d*b,!1);return V(a,b,c,d,e)}function Ha(a){a.L&&(a.L.classList.add("amp-pan-zoom-in-icon"),a.L.classList.remove("amp-pan-zoom-out-icon"))}
function Ga(a){a.L&&(a.L.classList.remove("amp-pan-zoom-in-icon"),a.L.classList.add("amp-pan-zoom-out-icon"))}function W(a){return Y(a).then(function(){a.j<=a.Y?(a.ua&&(a.ua(),a.ua=null,a.M.removeGesture(J)),Ha(a),a.G.classList.remove("i-amphtml-pan-zoom-scrollable")):(Ma(a),Ga(a),a.G.classList.add("i-amphtml-pan-zoom-scrollable"))})}
function V(a,b,c,d,e){var g=b-a.j,h=c-a.I,k=d-a.J,h=Math.sqrt(h*h+k*k),l=e?250*Math.min(1,Math.max(.01*h,Math.abs(g))):0;if(16<l&&e){var q=P(a.j,b),m=P(a.I,c),Oa=P(a.J,d);return za(a.G,function(b){a.j=q(b);a.I=m(b);a.J=Oa(b);X(a)},l).thenAlways(function(){a.j=b;a.I=c;a.J=d;X(a);Z(a,b,c,d)})}a.j=b;a.I=c;a.J=d;return X(a).then(function(){Z(a,b,c,d)})}
function Y(a){var b=Math.min(Math.max(a.j,a.Y-0),a.S+0);b!=a.j&&S(a,b);var c=T(a,a.I/a.j*b,!1),d=U(a,a.J/a.j*b,!1);return V(a,b,c,d,!0).then(function(){a.Ka=a.j;a.C=a.I;a.D=a.J;Z(a,a.j,a.I,a.J)})}(function(a){a.registerElement("amp-pan-zoom",Q,".i-amphtml-pan-zoom{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.i-amphtml-pan-zoom-child{position:absolute}.i-amphtml-pan-zoom-scrollable{cursor:all-scroll}.amp-pan-zoom-button{position:absolute;right:12px;width:36px;height:36px;bottom:12px;background-repeat:no-repeat;background-position:50%;box-shadow:1px 1px 2px;background-color:#fff;border-radius:3px}.amp-pan-zoom-in-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg height='24' width='24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/svg%3E\")}.amp-pan-zoom-out-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg height='24' width='24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M19 13H5v-2h14z'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/svg%3E\")}\n/*# sourceURL=/extensions/amp-pan-zoom/0.1/amp-pan-zoom.css*/")})(self.AMP);
})});
//# sourceMappingURL=amp-pan-zoom-0.1.js.map

