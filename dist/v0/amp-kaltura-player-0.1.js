(self.AMP=self.AMP||[]).push({n:"amp-kaltura-player",v:"0",f:(function(AMP,_){
function f(a,b){function d(){}d.prototype=b.prototype;a.prototype=new d;a.prototype.constructor=a;for(var c in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,c);e&&Object.defineProperty(a,c,e)}else a[c]=b[c]};self.log=self.log||{user:null,dev:null,userForEmbed:null};var l=self.log;function m(a){return a||{}};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function n(a,b){var d,c=b||function(a){return a},e=a.dataset;a={};var g=d?d:/^param(.+)/,h;for(h in e){var k=h.match(g);k&&(a[c(k[1][0].toLowerCase()+k[1].substr(1))]=e[h])}return a};m({c:!0,v:!0,a:!0,ad:!0});function p(a,b){var d;if(!b)return a;var c=a.split("#",2),e=c[0].split("?",2),g=e[0]+(e[1]?d?"?"+b+"&"+e[1]:"?"+e[1]+"&"+b:"?"+b);return g+=c[1]?"#"+c[1]:""}function q(a){var b=[],d;for(d in a){var c=a[d];if(null!=c)if(Array.isArray(c))for(var e=0;e<c.length;e++){var g=c[e];b.push(encodeURIComponent(d)+"="+encodeURIComponent(g))}else b.push(encodeURIComponent(d)+"="+encodeURIComponent(c))}return b.join("&")};function r(a){a=AMP.BaseElement.call(this,a)||this;a.j=null;a.h="";a.l="";return a}f(r,AMP.BaseElement);r.prototype.preconnectCallback=function(a){this.preconnect.url("https://cdnapisec.kaltura.com",a)};r.prototype.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a||"fluid"==a||"intrinsic"==a};
r.prototype.buildCallback=function(){if(!l.user)throw Error("failed to call initLogConstructor");this.h=l.user.assert(this.element.getAttribute("data-partner"),"The data-partner attribute is required for <amp-kaltura-player> %s",this.element);this.l=this.element.getAttribute("data-entryid")||"default"};
r.prototype.layoutCallback=function(){var a=this.element.getAttribute("data-uiconf")||this.element.getAttribute("data-uiconf-id")||"default",b=this.element.ownerDocument.createElement("iframe"),d="https://cdnapisec.kaltura.com/p/"+encodeURIComponent(this.h)+"/sp/"+encodeURIComponent(this.h)+"00/embedIframeJs/uiconf_id/"+encodeURIComponent(a)+"/partner_id/"+encodeURIComponent(this.h)+"?iframeembed=true&playerId=kaltura_player_amp&entry_id="+encodeURIComponent(this.l),c=n(this.element,function(a){return"flashvars["+
a+"]"}),d=p(d,q(c));b.setAttribute("frameborder","0");b.setAttribute("allowfullscreen","true");b.src=d;this.applyFillContent(b);this.element.appendChild(b);this.j=b;return this.loadPromise(b)};
r.prototype.createPlaceholderCallback=function(){var a=this.win.document.createElement("amp-img");this.propagateAttributes(["aria-label"],a);var b=this.element.getAttribute("width"),d=this.element.getAttribute("height"),c="https://cdnapisec.kaltura.com/p/"+encodeURIComponent(this.h)+"/thumbnail/entry_id/"+encodeURIComponent(this.l);b&&(c+="/width/"+b);d&&(c+="/height/"+d);a.setAttribute("src",c);a.setAttribute("layout","fill");a.setAttribute("placeholder","");a.setAttribute("referrerpolicy","origin");
a.hasAttribute("aria-label")?a.setAttribute("alt","Loading video - "+a.getAttribute("aria-label")):a.setAttribute("alt","Loading video");return a};r.prototype.pauseCallback=function(){this.j&&this.j.contentWindow&&this.j.contentWindow.postMessage(JSON.stringify(m({method:"pause",value:""})),"*")};(function(a){a.registerElement("amp-kaltura-player",r)})(self.AMP);
})});
//# sourceMappingURL=amp-kaltura-player-0.1.js.map

