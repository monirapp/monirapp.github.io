(self.AMP=self.AMP||[]).push({n:"amp-fx-collection",v:"0",f:(function(AMP,_){
var k;function l(a){for(var b=null,c="",e=0;e<arguments.length;e++){var d=arguments[e];if(d instanceof Error&&!b){var b=void 0,f=d.message,g=String(Math.random());d.message=g;if(d.message===g)d.message=f,b=d;else{f=Error(d.message);for(b in d)f[b]=d[b];f.stack=d.stack;b=f}}else c&&(c+=" "),c+=d}b?c&&(b.message=c+": "+b.message):b=Error(c);return b}function m(a){var b=l.apply(null,arguments);setTimeout(function(){self.reportError(b);throw b;})}self.log=self.log||{user:null,dev:null,userForEmbed:null};
var q=self.log;function r(){if(!q.user)throw Error("failed to call initLogConstructor");return q.user}function t(){if(q.dev)return q.dev;throw Error("failed to call initLogConstructor");};function u(){var a,b=Object.create(null);a&&Object.assign(b,a);return b};function v(a,b){var c=w(a),e=x(c);a=e;var d=y(a),f=d["position-observer"];f||(f=d["position-observer"]={obj:null,promise:null,resolve:null,context:null,ctor:null});f.ctor||f.obj||(f.ctor=b,f.context=c,f.resolve&&z(a,"position-observer"))}function A(a,b){a=a.__AMP_TOP||a;return z(a,b)}function B(a,b){a=w(a);a=x(a);return z(a,b)}function w(a){return a.nodeType?A((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function x(a){a=w(a);return a.isSingleDoc()?a.win:a}
function z(a,b){var c=y(a);a=c[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function y(a){var b=a.services;b||(b=a.services={});return b};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function C(a,b){return b.length>a.length?!1:0==a.lastIndexOf(b,0)};function D(a,b){for(var c=0,e;void 0!==(e=a[c]);c++)b(e,c)};function E(a){return B(a,"viewport")};var F;function G(a,b){var c=void 0,e=a,d=b,f;f=function(a){try{return d(a)}catch(p){throw self.reportError(p),p;}};var g=aa(),h=!1;c&&(h=c.capture);e.addEventListener("amp:dom-update",f,g?c:h)}function aa(){if(void 0!==F)return F;F=!1;try{var a={get capture(){F=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(b){}return F};var I,J="Webkit webkit Moz moz ms O o".split(" ");function K(a,b){for(var c in b){var e=a,d=b[c],f;f=e.style;var g=c;if(C(g,"--"))f=g;else{I||(I=u());var h=I[g];if(!h){h=g;if(void 0===f[g]){var n=g.charAt(0).toUpperCase()+g.slice(1);b:{for(var p=0;p<J.length;p++){var H=J[p]+n;if(void 0!==f[H]){n=H;break b}}n=""}void 0!==f[n]&&(h=n)}I[g]=h}f=h}f&&(e.style[f]=d)}}function L(a,b){return a.getComputedStyle(b)||u()};function ba(a,b){return{left:0,top:0,width:a,height:b,bottom:0+b,right:0+a,x:0,y:0}}function M(a,b){return a&&b?a.left==b.left&&a.top==b.top&&a.width==b.width&&a.height==b.height:!1};function ca(a,b){function c(){e=0;var g=500-(a.Date.now()-d);if(0<g)e=a.setTimeout(c,g);else{var h=f;f=null;b.apply(null,h)}}var e=0,d=0,f=null;return function(b){for(var g=[],n=0;n<arguments.length;++n)g[n-0]=arguments[n];d=a.Date.now();f=g;e||(e=a.setTimeout(c,500))}};function N(a,b,c,e){this.element=b;this.I=e;this.fidelity=c;this.turn=0==c?Math.floor(4*Math.random()):0;this.o=null;this.c=E(a)}
N.prototype.update=function(a){var b=this;if(!a){if(0!=this.turn){this.turn--;return}0==this.fidelity&&(this.turn=4)}var c=this.c.getSize(),e=ba(c.width,c.height);this.c.getClientRectAsync(this.element).then(function(a){var c={positionRect:a,viewportRect:e,relativePos:""},d=b.o;if(!(d&&M(d.positionRect,c.positionRect)&&M(d.viewportRect,c.viewportRect))){var d=c.positionRect,h=c.viewportRect;c.relativePos=d.top<h.top?"top":d.bottom>h.bottom?"bottom":"inside";h=c.viewportRect;d.top<=h.bottom&&h.top<=
d.bottom&&d.left<=h.right&&h.left<=d.right?(b.o=c,b.I(c)):b.o&&(b.o=null,c.positionRect=null,b.I(c))}})};function O(a){var b=this;this.l=a;this.O=a.win;this.h=[];this.Y=A(this.O,"vsync");this.c=E(a);this.w=[];this.A=this.F=this.D=!1;this.P=ca(this.O,function(){b.D=!1})}O.prototype.observe=function(a,b,c){var e=this,d=new N(this.l,a,b,c);this.h.push(d);this.A||da(this);d.update();return function(){for(var a=0;a<e.h.length;a++)if(e.h[a]==d){e.h.splice(a,1);0==e.h.length&&P(e);break}}};
O.prototype.unobserve=function(a){for(var b=0;b<this.h.length;b++)if(this.h[b].element==a){this.h.splice(b,1);0==this.h.length&&P(this);return}t().error("POSITION_OBSERVER","cannot unobserve unobserved element")};function da(a){a.A=!0;a.w.push(a.c.onScroll(function(){a.P();a.D=!0;a.F||Q(a)}));a.w.push(a.c.onResize(function(){a.updateAllEntries(!0)}))}function P(a){for(a.A=!1;a.w.length;)a.w.pop()()}O.prototype.updateAllEntries=function(a){for(var b=0;b<this.h.length;b++)this.h[b].update(a)};
function Q(a){a.updateAllEntries();a.F=!0;a.D?a.Y.measure(function(){Q(a)}):a.F=!1}function ea(a){v(a,function(){return new O(a)})};var R={parallax:{userAsserts:function(a){var b=r().assert(a.getAttribute("data-parallax-factor"),"data-parallax-factor=<number> attribute must be provided for: %s",a);r().assert(0<parseFloat(b),"data-parallax-factor must be a number and greater than 0 for: %s",a)},update:function(a){var b=this,c=a.positionRect?a.positionRect.top:null;if(c&&!(c>b.adjustedViewportHeight)){var e=-(parseFloat(b.getFactor())-1);b.setOffset((b.adjustedViewportHeight-c)*e);b.isMutateScheduled()||(b.setIsMutateScheduled(!0),
b.getResources().mutateElement(b.getElement(),function(){b.setIsMutateScheduled(!1);K(b.getElement(),{transform:"translateY("+b.getOffset().toFixed(0)+"px)"})}))}}},"fly-in-bottom":{userAsserts:function(a){var b=parseFloat(a.getAttribute("data-margin-start"));b&&r().assert(0<=b&&100>=b,"data-margin-start must be a percentage value and be between 0% and 100% for: %s",a)},update:function(a){var b=this;!(a=a.positionRect?a.positionRect.top:null)||a-b.viewportHeight*b.getFlyInDistance()/100>(1-b.getMarginStart())*
b.viewportHeight||b.isMutateScheduled()||(b.initialTrigger||b.getResources().mutateElement(b.getElement(),function(){var a=L(b.getAmpDoc().win,b.getElement());K(b.getElement(),{top:"calc("+a.top+" + "+b.getFlyInDistance()+"vh)",visibility:"visible"});b.initialTrigger=!0}),b.setIsMutateScheduled(!0),b.getResources().mutateElement(b.getElement(),function(){b.setIsMutateScheduled(!1);K(b.getElement(),{"transition-duration":b.getDuration(),"transition-timing-function":b.getEasing(),transform:"translateY(-"+
b.getFlyInDistance()+"vh)"})}))}},"fly-in-left":{userAsserts:function(a){var b=parseFloat(a.getAttribute("data-margin-start"));b&&r().assert(0<=b&&100>=b,"data-margin-start must be a percentage value and be between 0% and 100% for: %s",a)},update:function(a){var b=this;!(a=a.positionRect?a.positionRect.top:null)||a>(1-b.getMarginStart())*b.viewportHeight||b.isMutateScheduled()||(b.initialTrigger||b.getResources().mutateElement(b.getElement(),function(){var a=L(b.getAmpDoc().win,b.getElement());K(b.getElement(),
{left:"calc("+a.left+" - "+b.getFlyInDistance()+"vw)",visibility:"visible"});b.initialTrigger=!0}),b.setIsMutateScheduled(!0),b.getResources().mutateElement(b.getElement(),function(){b.setIsMutateScheduled(!1);K(b.getElement(),{"transition-duration":b.getDuration(),"transition-timing-function":b.getEasing(),transform:"translateX("+b.getFlyInDistance()+"vw)"})}))}},"fly-in-right":{userAsserts:function(a){var b=parseFloat(a.getAttribute("data-margin-start"));b&&r().assert(0<=b&&100>=b,"data-margin-start must be a percentage value and be between 0% and 100% for: %s",
a)},update:function(a){var b=this;!(a=a.positionRect?a.positionRect.top:null)||a>(1-b.getMarginStart())*b.viewportHeight||b.isMutateScheduled()||(b.initialTrigger||b.getResources().mutateElement(b.getElement(),function(){var a=L(b.getAmpDoc().win,b.getElement());K(b.getElement(),{left:"calc("+a.left+" + "+b.getFlyInDistance()+"vw)",visibility:"visible"});b.initialTrigger=!0}),b.setIsMutateScheduled(!0),b.getResources().mutateElement(b.getElement(),function(){b.setIsMutateScheduled(!1);K(b.getElement(),
{"transition-duration":b.getDuration(),"transition-timing-function":b.getEasing(),transform:"translateX(-"+b.getFlyInDistance()+"vw)"})}))}},"fly-in-top":{userAsserts:function(a){var b=parseFloat(a.getAttribute("data-margin-start"));b&&r().assert(0<=b&&100>=b,"data-margin-start must be a percentage value and be between 0% and 100% for: %s",a)},update:function(a){var b=this;!(a=a.positionRect?a.positionRect.top:null)||a+b.viewportHeight*b.getFlyInDistance()/100>(1-b.getMarginStart())*b.viewportHeight||
b.isMutateScheduled()||(b.initialTrigger||b.getResources().mutateElement(b.getElement(),function(){var a=L(b.getAmpDoc().win,b.getElement());K(b.getElement(),{top:"calc("+a.top+" - "+b.getFlyInDistance()+"vh)",visibility:"visible"});b.initialTrigger=!0}),b.setIsMutateScheduled(!0),b.getResources().mutateElement(b.getElement(),function(){b.setIsMutateScheduled(!1);K(b.getElement(),{"transition-duration":b.getDuration(),"transition-timing-function":b.getEasing(),transform:"translateY("+b.getFlyInDistance()+
"vh)"})}))}},"fade-in":{userAsserts:function(a){var b=parseFloat(a.getAttribute("data-margin-start"));b&&r().assert(0<=b&&100>=b,"data-margin-start must be a percentage value and be between 0% and 100% for: %s",a)},update:function(a){var b=this;!(a=a.positionRect?a.positionRect.top:null)||a>(1-b.getMarginStart())*b.viewportHeight||b.isMutateScheduled()||(b.setIsMutateScheduled(!0),b.getResources().mutateElement(b.getElement(),function(){b.setIsMutateScheduled(!1);K(b.getElement(),{"transition-duration":b.getDuration(),
"transition-timing-function":b.getEasing(),opacity:1})}))}},"fade-in-scroll":{userAsserts:function(a){var b=parseFloat(a.getAttribute("data-margin-start")),c=parseFloat(a.getAttribute("data-margin-end"));if(b||c)r().assert(0<=b&&100>=b,"data-margin-start must be a percentage value and be between 0% and 100% for: %s",a),r().assert(0<=c&&100>=c,"data-margin-end must be a percentage value and be between 0% and 100% for: %s",a),r().assert(c>b,"data-margin-end must be greater than data-margin-start for: %s",
a)},update:function(a){var b=this;a=a.positionRect?a.positionRect.top:null;if(!(!a||a>(1-b.getMarginStart())*b.adjustedViewportHeight||b.isMutateScheduled()||!b.hasRepeat()&&1<=b.getOffset())){var c=b.getMarginEnd()-b.getMarginStart();a=1*(b.viewportHeight-a-b.getMarginStart()*b.viewportHeight)/(c*b.viewportHeight);b.setOffset(a);b.isMutateScheduled()||(b.setIsMutateScheduled(!0),b.getResources().mutateElement(b.getElement(),function(){b.setIsMutateScheduled(!1);K(b.getElement(),{opacity:b.getOffset()})}))}}}};function fa(a){switch(a){case "linear":return"cubic-bezier(0.00, 0.00, 1.00, 1.00)";case "ease-in-out":return"cubic-bezier(0.80, 0.00, 0.20, 1.00)";case "ease-in":return"cubic-bezier(0.80, 0.00, 0.60, 1.00)";case "ease-out":return"cubic-bezier(0.40, 0.00, 0.40, 1.00)";default:return r().assert(C(a,"cubic-bezier"),"All custom bezier curves should be specified by following the `cubic-bezier()` function notation."),a}}function S(a){var b=parseFloat(a);return isNaN(b)?null:b/100}
function ga(a){switch(a){case "parallax":return{"will-change":"transform"};case "fade-in":return{"will-change":"opacity",opacity:0};case "fade-in-scroll":return{"will-change":"opacity",opacity:0};case "fly-in-bottom":case "fly-in-top":case "fly-in-left":case "fly-in-right":return{"will-change":"transform"};default:return{visibility:"visible"}}}
function ha(a,b){switch(b){case "fade-in":return"1000ms";case "fly-in-bottom":case "fly-in-top":case "fly-in-left":case "fly-in-right":return a=E(a).getSize().width,a=Math.min(1E3,a),480>a?a=480:1E3<a&&(a=1E3),200*(a-480)/520+400+"ms";default:return"1ms"}}function T(a){switch(a){case "fade-in":case "fly-in-right":case "fly-in-left":case "fly-in-top":case "fly-in-bottom":return{start:.05};case "fade-in-scroll":return{start:0,end:.5};default:return{start:0,end:1}}};function U(a,b){this.c=E(a);this.m=B(a,"resources");ea(a);var c=w(a),c=x(c);this.G=z(c,"position-observer");this.l=a;this.j=b}U.prototype.installOn=function(a){new V(a,this.G,this.c,this.m,this.l,this.j);var b=ga(this.j);"display"in b&&t().error("STYLE","`display` style detected in styles. You must use toggle instead.");K(a,b)};
function V(a,b,c,e,d,f){var g=this;this.G=b;this.c=c;this.m=e;this.adjustedViewportHeight=this.viewportHeight=null;this.B=a;this.J=!1;this.K=0;this.j=f;this.l=d;R[this.j].userAsserts(a);this.T=parseFloat(a.getAttribute("data-parallax-factor"));this.X=a.hasAttribute("data-margin-start")?S(a.getAttribute("data-margin-start")):T(this.j).start;this.W=a.hasAttribute("data-margin-end")?S(a.getAttribute("data-margin-end")):T(this.j).end;if(a.hasAttribute("data-easing"))d=a.getAttribute("data-easing");else a:switch(this.j){case "fade-in":d=
"ease-in";break a;case "fly-in-right":case "fly-in-left":case "fly-in-top":case "fly-in-bottom":d="ease-out";break a;default:d="ease-in"}this.S=fa(d);this.R=a.hasAttribute("data-duration")?a.getAttribute("data-duration"):ha(this.l,this.j);if(a.hasAttribute("data-fly-in-distance"))d=parseFloat(a.getAttribute("data-fly-in-distance"));else a:switch(this.j){case "fly-in-bottom":case "fly-in-top":d=1E3>E(this.l).getSize().width?25:33;break a;case "fly-in-left":case "fly-in-right":d=100;break a;default:d=
1}this.U=d;this.V=a.hasAttribute("data-repeat");this.initialTrigger=!1;W(this).then(function(a){g.adjustedViewportHeight=a;ia(g)});X(this).then(function(a){g.viewportHeight=a})}function ia(a){a.G.observe(a.B,1,R[a.j].update.bind(a));a.c.onResize(function(){W(a).then(function(b){a.adjustedViewportHeight=b});X(a).then(function(b){a.viewportHeight=b})})}function X(a){return a.m.measureElement(function(){return a.c.getHeight()})}
function W(a){return a.m.measureElement(function(){for(var b=a.c.getHeight(),c=0,e=a.B;e;e=e.offsetParent)c+=e.offsetTop;var d=c<b;return d?c:b})}k=V.prototype;k.getAmpDoc=function(){return this.l};k.getFactor=function(){return this.T};k.getDuration=function(){return this.R};k.getMarginStart=function(){return this.X};k.getMarginEnd=function(){return this.W};k.getFlyInDistance=function(){return this.U};k.getEasing=function(){return this.S};k.getElement=function(){return this.B};k.getResources=function(){return this.m};
k.getOffset=function(){return this.K};k.setOffset=function(a){this.K=a};k.isMutateScheduled=function(){return this.J};k.hasRepeat=function(){return this.V};k.setIsMutateScheduled=function(a){this.J=a};var ja={PARALLAX:"parallax",FADE_IN:"fade-in",FADE_IN_SCROLL:"fade-in-scroll",FLY_IN_BOTTOM:"fly-in-bottom",FLY_IN_LEFT:"fly-in-left",FLY_IN_RIGHT:"fly-in-right",FLY_IN_TOP:"fly-in-top"},Y={parallax:["fly-in-top","fly-in-bottom"],"fly-in-top":["parallax","fly-in-bottom"],"fly-in-bottom":["fly-in-top","parallax"],"fly-in-right":["fly-in-left"],"fly-in-left":["fly-in-right"],"fade-in":["fade-in-scroll"],"fade-in-scroll":["fade-in"]};
function Z(a){var b=this;this.l=a;this.L=a.getRootNode();this.H=[];this.N=B(a,"viewer");this.C=u();Promise.all([a.whenReady(),this.N.whenFirstVisible()]).then(function(){b.M();var a=b.M.bind(b);G(b.L,a)})}Z.prototype.M=function(){var a=this,b=this.L.querySelectorAll("[amp-fx]");D(b,function(b){if(!a.H.includes(b))try{ka(a,b),a.H.push(b)}catch(e){m(e)}})};function ka(a,b){a.H.includes(b);a.N.isVisible();var c=la(b);c.forEach(function(c){a.C[c]||(a.C[c]=new U(a.l,c));var d=a.C[c];d.installOn(b)})}
function la(a){a=a.getAttribute("amp-fx").trim().toLowerCase().split(/\s+/);r().assert(a.length,"No value provided for `amp-fx` attribute");a.forEach(function(a){r().assertEnumValue(ja,a,"amp-fx")});ma(a);return a}function ma(a){for(var b=0;b<a.length;b++){var c=a[b];if(c in Y)for(var e=b+1;e<a.length;e++)-1!==Y[c].indexOf(a[e])&&(r().warn("amp-fx-collection","%s preset can't be combined with %s preset as the resulting animation isn't valid.",c,a[e]),a.splice(e,1))}}
(function(a){a.registerServiceForDoc("amp-fx-collection",Z)})(self.AMP);
})});
//# sourceMappingURL=amp-fx-collection-0.1.js.map

