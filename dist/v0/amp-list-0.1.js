(self.AMP=self.AMP||[]).push({n:"amp-list",v:"0",f:(function(AMP,_){
function aa(a,b){function d(){}d.prototype=b.prototype;a.prototype=new d;a.prototype.constructor=a;for(var c in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,c);e&&Object.defineProperty(a,c,e)}else a[c]=b[c]};var ba=Object.prototype.toString;function h(a){return Array.isArray(a)}function k(a){return"[object Object]"===ba.call(a)};self.log=self.log||{user:null,dev:null,userForEmbed:null};var l=self.log;function m(){if(!l.user)throw Error("failed to call initLogConstructor");return l.user}function n(){if(l.dev)return l.dev;throw Error("failed to call initLogConstructor");};function p(){var a,b=Object.create(null);a&&Object.assign(b,a);return b}function q(a){return a||{}};function r(){var a,b;this.promise=new Promise(function(d,c){a=d;b=c});this.resolve=a;this.reject=b};function t(a,b,d){if(a.nodeType){var c=(a.ownerDocument||a).defaultView;if(c=c!=(c.__AMP_TOP||c)&&u(c,b)?v(c,b):null)return c}return!a.nodeType||d?w(a,b):null}function y(a,b){a=a.__AMP_TOP||a;return v(a,b)}function w(a,b){a=z(a);a=A(a);return v(a,b)}function z(a){return a.nodeType?y((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function A(a){a=z(a);return a.isSingleDoc()?a.win:a}
function v(a,b){u(a,b);var d=B(a);a=d[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function C(a){var b=D(a);if(b)return b;var d=new r,c=d,e=c.promise,c=c.resolve;B(a).bind={obj:null,promise:e,resolve:c,context:null,ctor:null};return e}function D(a){var b=B(a).bind;if(b){if(b.promise)return b.promise;v(a,"bind");return b.promise=Promise.resolve(b.obj)}return null}function B(a){var b=a.services;b||(b=a.services={});return b}
function u(a,b){a=a.services&&a.services[b];return!(!a||!a.ctor&&!a.obj)};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function ca(a,b,d){if(b(a))d();else{var c=a.ownerDocument.defaultView;if(c.MutationObserver){var e=new c.MutationObserver(function(){b(a)&&(e.disconnect(),d())});e.observe(a,{childList:!0})}else var f=c.setInterval(function(){b(a)&&(c.clearInterval(f),d())},5)}}function da(a,b){ca(a.documentElement,function(){return!!a.body},b)}function ea(a){return new Promise(function(b){da(a,b)})}function E(a){for(;a.firstChild;)a.removeChild(a.firstChild)};function fa(a){var b=z(a),d=D(A(a));return d?d:b.whenBodyAvailable().then(function(){return F(b.win,b.getHeadNode())}).then(function(){var c=b.win;return c.ampExtendedElements&&c.ampExtendedElements["amp-bind"]?C(A(a)):null})}function G(a){var b=t(a,"bind");return b?Promise.resolve(b):a.nodeType?(b=a.ownerDocument.defaultView,b!==(b.__AMP_TOP||b)?ga(b):fa(a)):Promise.resolve(null)}
function F(a,b){var d;if(b){d=[];b=b.querySelectorAll("script[custom-element]");for(var c=0;c<b.length;c++)d.push(b[c].getAttribute("custom-element"))}else d=[];if(!d.includes("amp-bind"))return Promise.resolve();var e=y(a,"extensions");return e.waitForExtension(a,"amp-bind")}function ga(a){return ea(a.document).then(function(){return F(a,a.document.head)}).then(function(){return a.ampExtendedElements&&a.ampExtendedElements["amp-bind"]?C(a):null})};function H(a){this.O=a;this.B=this.G=0;this.A=Object.create(null)}H.prototype.has=function(a){return!!this.A[a]};H.prototype.get=function(a){var b=this.A[a];if(b)return b.access=++this.B,b.payload};H.prototype.put=function(a,b){this.has(a)||this.G++;this.A[a]={payload:b,access:this.B};if(!(this.G<=this.O)){n().warn("lru-cache","Trimming LRU cache");a=this.A;var d=this.B+1,c,e;for(e in a){var f=a[e].access;f<d&&(d=f,c=e)}void 0!==c&&(delete a[c],this.G--)}};var I=self.AMP_CONFIG||{},ha={thirdParty:I.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:I.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:("string"==typeof I.thirdPartyFrameRegex?new RegExp(I.thirdPartyFrameRegex):I.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,cdn:I.cdnUrl||"https://cdn.ampproject.org",cdnProxyRegex:("string"==typeof I.cdnProxyRegex?new RegExp(I.cdnProxyRegex):I.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,
errorReporting:I.errorReportingUrl||"https://amp-error-reporting.appspot.com/r",localDev:I.localDev||!1};var ia=q({c:!0,v:!0,a:!0,ad:!0}),J,K,ja=/[?&]amp_js[^&]*/,ka=/[?&]amp_gsa[^&]*/,la=/[?&]amp_r[^&]*/,ma=/[?&]usqp[^&]*/;
function L(a){var b;J||(J=self.document.createElement("a"),K=self.UrlCache||(self.UrlCache=new H(100)));var d=b?null:K,c=J;if(d&&d.has(a))a=d.get(a);else{c.href=a;c.protocol||(c.href=c.href);var e={href:c.href,protocol:c.protocol,host:c.host,hostname:c.hostname,port:"0"==c.port?"":c.port,pathname:c.pathname,search:c.search,hash:c.hash,origin:null};"/"!==e.pathname[0]&&(e.pathname="/"+e.pathname);if("http:"==e.protocol&&80==e.port||"https:"==e.protocol&&443==e.port)e.port="",e.host=e.hostname;e.origin=
c.origin&&"null"!=c.origin?c.origin:"data:"!=e.protocol&&e.host?e.protocol+"//"+e.host:e.href;d&&d.put(a,e);a=e}return a}function na(a){var b=[],d;for(d in a){var c=a[d];if(null!=c)if(h(c))for(var e=0;e<c.length;e++){var f=c[e];b.push(encodeURIComponent(d)+"="+encodeURIComponent(f))}else b.push(encodeURIComponent(d)+"="+encodeURIComponent(c))}return b.join("&")}
function oa(a){"string"==typeof a&&(a=L(a));var b;(b="https:"==a.protocol||"localhost"==a.hostname)||(a=a.hostname,b=a.length-10,b=0<=b&&a.indexOf(".localhost",b)==b);return b}function pa(a,b){var d;d=void 0===d?"source":d;m().assert(null!=a,"%s %s must be available",b,d);var c=a;m().assert(oa(c)||/^(\/\/)/.test(c),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',b,d,c)}
function M(a){"string"==typeof a&&(a=L(a));var b=a;"string"==typeof b&&(b=L(b));if(!ha.cdnProxyRegex.test(b.origin))return a.href;var b=a.pathname.split("/"),d=b[1];m().assert(ia[d],"Unknown path prefix in url %s",a.href);var c=b[2],e="s"==c?"https://"+decodeURIComponent(b[3]):"http://"+decodeURIComponent(c);m().assert(0<e.indexOf("."),"Expected a . in origin %s",e);b.splice(1,"s"==c?3:2);b=e+b.join("/");d=(d=a.search)&&"?"!=d?(d=d.replace(ja,"").replace(ka,"").replace(la,"").replace(ma,"").replace(/^[?&]/,
""))?"?"+d:"":"";return b+d+(a.hash||"")};function qa(a){var b={bubbles:!0},d={detail:null};Object.assign(d,b);if("function"==typeof a.CustomEvent)return new a.CustomEvent("amp:dom-update",d);a=a.document.createEvent("CustomEvent");a.initCustomEvent("amp:dom-update",!!d.bubbles,!!d.cancelable,null);return a};var N,O="Webkit webkit Moz moz ms O o".split(" ");function P(a,b){var d=void 0;if(2>b.length?0:0==b.lastIndexOf("--",0))return b;N||(N=p());var c=N[b];if(!c||d){c=b;if(void 0===a[b]){var e=b.charAt(0).toUpperCase()+b.slice(1);a:{for(var f=0;f<O.length;f++){var g=O[f]+e;if(void 0!==a[g]){e=g;break a}}e=""}var x=e;void 0!==a[x]&&(c=x)}d||(N[b]=c)}return c}function Q(a,b,d){var c;(b=P(a.style,b))&&(a.style[b]=c?d+c:d)}function R(a,b){for(var d in b)Q(a,d,b[d])};function S(a,b,d){var c=this;this.M=y(a,"timer");this.R=b;this.P=d||0;this.m=-1;this.D=0;this.F=!1;this.N=function(){c.m=-1;c.D=0;c.F=!0;c.R();c.F=!1}}S.prototype.isPending=function(){return-1!=this.m};S.prototype.schedule=function(a){var b=a||this.P;this.F&&10>b&&(b=10);var d=Date.now()+b;return!this.isPending()||-10>d-this.D?(this.cancel(),this.D=d,this.m=this.M.delay(this.N,b),!0):!1};S.prototype.cancel=function(){this.isPending()&&(this.M.cancel(this.m),this.m=-1)};function ra(a,b,d,c){d=void 0===d?".":d;c=void 0===c?0:c;pa(b.getAttribute("src"),b);return T(a,b,c).then(function(b){return y(a.win,"batched-xhr").fetchJson(b.xhrUrl,b.fetchOpt)}).then(function(a){return a.json()}).then(function(a){if(null==a)throw Error("Response is undefined.");var b;b=d||".";if("."!=b){b=b.split(".");for(var c=0;c<b.length;c++){var e=b[c];if(e&&a&&void 0!==a[e]&&(null==a||"object"!=typeof a?0:Object.prototype.hasOwnProperty.call(a,e)))a=a[e];else{a=void 0;break}}}b=a;return b})}
function T(a,b,d){var c=b.getAttribute("src"),e=t(a,"url-replace",!0),f=1<=d?e.expandUrlAsync(c):Promise.resolve(c);return f.then(function(a){if(1==d){var c=e.collectUnwhitelistedVarsSync(b);if(0<c.length)throw m().createError("URL variable substitutions in CORS fetches from dynamic URLs (e.g. via amp-bind) require opt-in. "+('Please add data-amp-replace="'+c.join(" ")+'" to the ')+("<"+b.tagName+"> element. See https://bit.ly/amp-var-subs."));}var f={};b.hasAttribute("credentials")?f.credentials=
b.getAttribute("credentials"):f.requireAmpResponseSourceOrigin=!1;return{xhrUrl:a,fetchOpt:f}})};function sa(a){return!!a&&"function"==typeof a.getFormData};var ta=["GET","POST"],ua=[h,k];function va(a,b){var d=Object.assign({},b);if(sa(b.body)){d.headers["Content-Type"]="multipart/form-data;charset=utf-8";b=b.body.entries();for(var c=[],e=b.next();!e.done;e=b.next())c.push(e.value);d.body=c}return{input:a,init:d}}
function wa(a,b){m().assert(k(a),"Object expected: %s",a);var d="document"==b;if(!d)return new Response(a.body,a.init);var c=p(),e={status:200,statusText:"OK",getResponseHeader:function(a){return c[String(a).toLowerCase()]||null}};if(a.init){var f=a.init;h(f.headers)&&f.headers.forEach(function(a){var b=a[0],d=a[1];c[String(b).toLowerCase()]=String(d)});f.status&&(e.status=parseInt(f.status,10));f.statusText&&(e.statusText=String(f.statusText))}return new Response(a.body?String(a.body):"",e)}
function xa(a){var b="application/json";a=a||{};var d=a.credentials,c;c=a.method;void 0===c?c="GET":(c=c.toUpperCase(),ta.includes(c));a.method=c;a.headers=a.headers||q({});b&&(a.headers.Accept=b);return a}function ya(a){var b=xa(a);if("POST"==b.method&&!sa(b.body)){ua.some(function(a){return a(b.body)});b.headers["Content-Type"]=b.headers["Content-Type"]||"text/plain;charset=utf-8";var d=b.headers["Content-Type"];b.body="application/x-www-form-urlencoded"===d?na(b.body):JSON.stringify(b.body)}};function U(a,b,d){this.H=b;this.j=d;this.I=new XMLSerializer;this.S=a}U.prototype.isSupported=function(){var a=this.H.ampdoc;return a.isSingleDoc()&&a.getRootNode().documentElement.hasAttribute("allow-viewer-render-template")?this.H.hasCapability("viewerRenderTemplate"):!1};
U.prototype.fetchAndRenderTemplate=function(a,b,d,c){d=void 0===d?null:d;c=void 0===c?{}:c;var e;d||this.j.maybeFindTemplate(a)&&(e=this.I.serializeToString(this.j.findTemplate(a)));return this.H.sendMessageAwaitResponse("viewerRenderTemplate",za(this,b,e,d,c))};
function za(a,b,d,c,e){e=void 0===e?{}:e;var f=q({type:a.S,successTemplate:{type:"amp-mustache",payload:c?a.I.serializeToString(c.successTemplate):d},errorTemplate:{type:"amp-mustache",payload:c?a.I.serializeToString(c.errorTemplate):null}}),g=q({originalRequest:va(b.xhrUrl,b.fetchOpt),ampComponent:f}),x=e&&Object.keys(e);x&&Object.keys(e).forEach(function(a){g[a]=e[a]});return g}
U.prototype.verifySsrResponse=function(a,b,d){b=wa(b,d.fetchOpt.responseType);d=d.fetchOpt;(b=b.headers.get("AMP-Access-Control-Allow-Source-Origin"))?(a=L(M(a.location.href)).origin,m().assert(b==a,"Returned AMP-Access-Control-Allow-Source-Origin is not equal to the current: "+b+(" vs "+a))):d.requireAmpResponseSourceOrigin&&m().assert(!1,"Response must contain the AMP-Access-Control-Allow-Source-Origin header")};function V(a){var b;b=AMP.BaseElement.call(this,a)||this;b.h=null;b.J=!1;b.L=new S(b.win,function(){return Aa(b)});b.l=null;b.j=y(b.win,"templates");b.C=!1;b.K=null;b.w=null;b.registerAction("refresh",function(){if(b.C)return W(b),X(b)},100);b.o=null;return b}aa(V,AMP.BaseElement);V.prototype.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a||"fluid"==a||"intrinsic"==a};
V.prototype.buildCallback=function(){var a=this,b=w(this.getAmpDoc(),"viewer");this.o=new U("amp-list",b,this.j);this.K=this.element.getAttribute("src");this.h=this.win.document.createElement("div");this.applyFillContent(this.h,!0);this.element.appendChild(this.h);this.h.hasAttribute("role")||this.h.setAttribute("role","list");this.element.hasAttribute("aria-live")||this.element.setAttribute("aria-live","polite");G(this.element).then(function(b){a.w=b})};V.prototype.reconstructWhenReparented=function(){return!1};
V.prototype.layoutCallback=function(){this.C=!0;return X(this)};V.prototype.mutatedAttributesCallback=function(a){n().info("amp-list","mutate:",a);var b=a.src,d=a.state;void 0!==b?"string"===typeof b?this.C&&(W(this),X(this)):"object"===typeof b?(this.element.setAttribute("src",""),W(this,!1),Y(this,h(b)?b:[b])):this.user().error("amp-list",'Unexpected "src" type: '+b):void 0!==d&&(m().error("amp-list","[state] is deprecated, please use [src] instead."),W(this,!1),Y(this,h(d)?d:[d]))};
V.prototype.isLoadingReused=function(){return this.element.hasAttribute("reset-on-refresh")};function Z(a,b){if(b||a.J)a.toggleFallback(b),a.J=b}function W(a,b){if((b=void 0===b?!0:b)&&a.element.hasAttribute("reset-on-refresh")||"always"===a.element.getAttribute("reset-on-refresh"))a.togglePlaceholder(!0),a.toggleLoading(!0,!0),a.mutateElement(function(){Z(a,!1);E(a.h)})}
function X(a){if(!a.element.getAttribute("src"))return Promise.resolve();var b;if(a.o.isSupported())b=Ba(a);else{var d=a.element.getAttribute("items")||"items";b=Ca(a,d).then(function(b){a.element.hasAttribute("single-item")&&(m().assert("undefined"!==typeof b,'Response must contain an array or object at "%s". %s',d,a.element),h(b)||(b=[b]));m().assert(h(b),'Response must contain an array at "%s". %s',d,a.element);var c=parseInt(a.element.getAttribute("max-items"),10);c<b.length&&(b=b.slice(0,c));
return Y(a,b)},function(a){throw m().createError("Error fetching amp-list",a);})}return b.catch(function(b){a.toggleLoading(!1);if(a.getFallback())Z(a,!0),a.togglePlaceholder(!1);else throw b;})}
function Ba(a){var b;return T(a.getAmpDoc(),a.element,Da(a)).then(function(d){var c=b=d,e=a.win,f=b.xhrUrl,g=b.fetchOpt;!1===g.ampCors&&(g.requireAmpResponseSourceOrigin=!1);!0===g.requireAmpResponseSourceOrigin&&n().error("XHR","requireAmpResponseSourceOrigin is deprecated, use ampCors instead");void 0===g.requireAmpResponseSourceOrigin&&(g.requireAmpResponseSourceOrigin=!0);e=e.origin||L(e.location.href).origin;f=L(f).origin;e==f&&(g.headers=g.headers||{},g.headers["AMP-Same-Origin"]="true");c.fetchOpt=
g;ya(d.fetchOpt);d=q({ampListAttributes:{items:a.element.getAttribute("items")||"items",singleItem:a.element.getAttribute("single-item"),maxItems:a.element.getAttribute("max-items")}});return a.o.fetchAndRenderTemplate(a.element,b,null,d)}).then(function(d){b.fetchOpt.responseType="application/json";a.o.verifySsrResponse(a.win,d,b);return d.html},function(a){throw m().createError("Error proxying amp-list templates",a);}).then(function(b){return Y(a,b)})}
function Y(a,b){n().info("amp-list","schedule:",b);var d=new r,c=d.promise,e=d.resolve,f=d.reject;a.l||a.L.schedule();a.l={data:b,resolver:e,rejecter:f};return c}
function Aa(a){function b(){c();e.rejecter()}function d(){c();e.resolver()}function c(){a.l!==e?a.L.schedule(1):a.l=null}var e=a.l;n().info("amp-list","pass:",e);a.o.isSupported()?a.j.findAndRenderTemplate(a.element,e.data).then(function(b){return Ea(a,[b])}).then(d,b):a.j.findAndRenderTemplateArray(a.element,e.data).then(function(b){return Fa(a,b)}).then(function(b){return Ea(a,b)}).then(d,b)}
function Fa(a,b){function d(c){return c.scanAndApply(b,[a.h]).then(function(){return b},function(){return b})}var c=a.element.getAttribute("binding");return"no"===c?Promise.resolve(b):"refresh"===c?a.w&&a.w.signals().get("FIRST_MUTATE")?d(a.w):Promise.resolve(b):G(a.element).then(function(a){return a?d(a):Promise.resolve(b)})}
function Ea(a,b){n().info("amp-list","render:",b);var d=a.element.hasAttribute("auto-resize");a.mutateElement(function(){a.toggleLoading(!1);a.getFallback()&&Z(a,!1);a.togglePlaceholder(!1);E(a.h);b.forEach(function(b){b.hasAttribute("role")||b.setAttribute("role","listitem");a.h.appendChild(b)});var c=qa(a.win);a.h.dispatchEvent(c);a.measureElement(function(){var b=a.h.scrollHeight;if(b>a.element.offsetHeight)if(d){var c=a.element.getAttribute("layout");"flex-item"==c?a.attemptChangeHeight(b).catch(function(){}):
"container"!==c&&Ga(a,c)}else a.attemptChangeHeight(b).catch(function(){})})})}
function Ga(a,b){switch(b){case "responsive":a.element.classList.remove("i-amphtml-layout-responsive");break;case "fixed":a.element.classList.remove("i-amphtml-layout-fixed");R(a.element,{height:""});break;case "fixed-height":a.element.classList.remove("i-amphtml-layout-fixed-height");R(a.element,{height:"",width:""});break;case "intrinsic":a.element.classList.remove("i-amphtml-layout-intrinsic")}a.element.changeSize();a.element.classList.remove("i-amphtml-layout-size-defined");a.h.classList.remove("i-amphtml-fill-content",
"i-amphtml-replaced-content");var d=a.getOverflowElement();if(d){b=d;var c=!1;void 0===c&&(c=(c=P(b.style,"display"))?b.style[c]:void 0,c="none"==c);Q(b,"display",c?"":"none")}a.element.setAttribute("layout","container")}function Ca(a,b){return ra(a.getAmpDoc(),a.element,b,Da(a))}function Da(a){var b=a.element.getAttribute("src"),d=1;if(b==a.K||L(M(b)).origin==L(M(a.getAmpDoc().win.location)).origin)d=2;return d}(function(a){a.registerElement("amp-list",V)})(self.AMP);
})});
//# sourceMappingURL=amp-list-0.1.js.map

