(self.AMP=self.AMP||[]).push({n:"amp-pinterest",v:"0",f:(function(AMP,_){
function f(a,b){function d(){}d.prototype=b.prototype;a.prototype=new d;a.prototype.constructor=a;for(var c in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,c);e&&Object.defineProperty(a,c,e)}else a[c]=b[c]};self.log=self.log||{user:null,dev:null,userForEmbed:null};var g=self.log;function k(){if(!g.user)throw Error("failed to call initLogConstructor");return g.user}function l(){if(g.dev)return g.dev;throw Error("failed to call initLogConstructor");};function m(a){return new Promise(function(b){b(a())})};function n(a){a=a.__AMP_TOP||a;var b=a.services;b||(b=a.services={});a=b.xhr;a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function p(a,b,d){var c=window,e;try{e=c.open(a,b,d)}catch(h){l().error("DOM","Failed to open url on target: ",b,h)}e||"_top"==b||c.open(a,"_top")};function q(a){this.l=a;this.h=this.j=0;this.c=Object.create(null)}q.prototype.has=function(a){return!!this.c[a]};q.prototype.get=function(a){var b=this.c[a];if(b)return b.access=++this.h,b.payload};q.prototype.put=function(a,b){this.has(a)||this.j++;this.c[a]={payload:b,access:this.h};if(!(this.j<=this.l)){l().warn("lru-cache","Trimming LRU cache");a=this.c;var d=this.h+1,c,e;for(e in a){var h=a[e].access;h<d&&(d=h,c=e)}void 0!==c&&(delete a[c],this.j--)}};var r,t;
function u(a){var b;r||(r=self.document.createElement("a"),t=self.UrlCache||(self.UrlCache=new q(100)));var d=b?null:t,c=r;if(d&&d.has(a))a=d.get(a);else{c.href=a;c.protocol||(c.href=c.href);var e={href:c.href,protocol:c.protocol,host:c.host,hostname:c.hostname,port:"0"==c.port?"":c.port,pathname:c.pathname,search:c.search,hash:c.hash,origin:null};"/"!==e.pathname[0]&&(e.pathname="/"+e.pathname);if("http:"==e.protocol&&80==e.port||"https:"==e.protocol&&443==e.port)e.port="",e.host=e.hostname;e.origin=
c.origin&&"null"!=c.origin?c.origin:"data:"!=e.protocol&&e.host?e.protocol+"//"+e.host:e.href;d&&d.put(a,e);a=e}return a}function w(a){"string"==typeof a&&(a=u(a));var b;(b="https:"==a.protocol||"localhost"==a.hostname)||(a=a.hostname,b=a.length-10,b=0<=b&&a.indexOf(".localhost",b)==b);return b}
function z(a,b){var d;d=void 0===d?"source":d;k().assert(null!=a,"%s %s must be available",b,d);var c=a;k().assert(w(c)||/^(\/\/)/.test(c),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',b,d,c);return c};for(var A="",i=0;12>i;i+=1)A+="0123456789ABCDEFGHJKLMNPQRSTUVWXYZ_abcdefghijkmnopqrstuvwxyz".substr(Math.floor(60*Math.random()),1);function C(a){var b,d;d=b="";try{b=decodeURIComponent(a)}catch(c){}d=b.replace(/</g,"&lt;");return d=d.replace(/>/g,"&gt;")}var D=A;function E(a){var b=new Image,d="https://log.pinterest.com/?guid="+A,d=d+"&amp=1";a&&(d+=a);d=d+"&via="+encodeURIComponent(window.location.href);b.src=d}
function F(a,b){var d=null,c,e;for(c in b){d=a.createElement(c);for(e in b[c])if("string"===typeof b[c][e]){a=d;var h=e,v=b[c][e];"string"===typeof a[h]?a[h]=v:a.setAttribute(h,v)}break}return d};function G(a){k().assert(a.getAttribute("data-href"),"The data-href attribute is required for follow buttons");k().assert(a.getAttribute("data-label"),"The data-label attribute is required for follow buttons");this.element=a;this.label=a.getAttribute("data-label");this.href=z(a.getAttribute("data-href"),a)}
G.prototype.handleClick=function(a){a.preventDefault();p(this.href,"pin"+Date.now(),"status=no,resizable=yes,scrollbars=yes,\n  personalbar=no,directories=no,location=no,toolbar=no,\n  menubar=no,width=1040,height=640,left=0,top=0");E("&type=button_follow&href="+this.href)};
G.prototype.renderTemplate=function(){var a=F(this.element.ownerDocument,{a:{class:"-amp-pinterest-follow-button",href:this.href,textContent:this.label}});a.appendChild(F(this.element.ownerDocument,{i:{}}));a.onclick=this.handleClick.bind(this);return a};G.prototype.render=function(){var a=this;"/"!==this.href.substr(-1)&&(this.href+="/");this.href+="pins/follow/?guid="+D;return m(function(){return a.renderTemplate()})};function H(a){k().assert(a.getAttribute("data-url"),"The data-url attribute is required for Pin It buttons");k().assert(a.getAttribute("data-media"),"The data-media attribute is required for Pin It buttons");k().assert(a.getAttribute("data-description"),"The data-description attribute is required for Pin It buttons");this.element=a;this.xhr=n(a.ownerDocument.defaultView);this.color=a.getAttribute("data-color");this.count=a.getAttribute("data-count");this.lang=a.getAttribute("data-lang");this.round=
a.getAttribute("data-round");this.tall=a.getAttribute("data-tall");this.description=a.getAttribute("data-description");this.href=this.url=this.media=null}H.prototype.handleClick=function(a){a.preventDefault();p(this.href,"_pinit","status=no,resizable=yes,scrollbars=yes,personalbar=no,directories=no,location=no,toolbar=no,menubar=no,width=900,height=500,left=0,top=0");E("&type=button_pinit")};
H.prototype.fetchCount=function(){return this.xhr.fetchJson("https://widgets.pinterest.com/v1/urls/count.json?return_jsonp=false&url="+this.url,{requireAmpResponseSourceOrigin:!1}).then(function(a){return a.json()})};H.prototype.formatPinCount=function(a){999<a&&(a=1E6>a?parseInt(a/1E3,10)+"K+":1E9>a?parseInt(a/1E6,10)+"M+":"++");return String(a)};
H.prototype.renderCount=function(a,b){E("&type=pidget&button_count=1");return F(this.element.ownerDocument,{span:{class:"-amp-pinterest-bubble-"+this.count+b,textContent:this.formatPinCount(a)}})};
H.prototype.renderTemplate=function(a){var b={shape:this.round?"-round":"-rect",height:this.tall?"-tall":"",lang:"ja"===this.lang?"-ja":"-en",color:-1!==["red","white"].indexOf(this.color)?this.color:"gray"},d=["-amp-pinterest"+b.shape+b.height,"i-amphtml-fill-content"],c=null;this.round||(d.push("-amp-pinterest"+b.lang+"-"+b.color+b.height),a&&(d.push("-amp-pinterest-count-pad-"+this.count+b.height),c=this.renderCount(a.count,b.height)));var e=F(this.element.ownerDocument,{a:{class:d.join(" "),href:this.href}});
c&&e.appendChild(c);e.onclick=this.handleClick.bind(this);return e};
H.prototype.render=function(){this.description=encodeURIComponent(this.description);this.media=encodeURIComponent(this.element.getAttribute("data-media"));this.url=encodeURIComponent(this.element.getAttribute("data-url"));this.href="https://www.pinterest.com/pin/create/button/?"+["amp=1","guid="+D,"url="+this.url,"media="+this.media,"description="+this.description].join("&");return("above"===this.count||"beside"===this.count?this.fetchCount():Promise.resolve()).then(this.renderTemplate.bind(this))};function I(a){k().assert(a.getAttribute("data-url"),"The data-url attribute is required for Pin widgets");this.element=a;this.xhr=n(a.ownerDocument.defaultView);this.layout=this.width=this.pinUrl=this.alt=this.pinId=""}
I.prototype.handleClick=function(a){a.preventDefault();a=a.target;var b=a.getAttribute("data-pin-pop")||!1,d=a.getAttribute("data-pin-href"),c=a.getAttribute("data-pin-log");d&&(a=d,k().assert(/^https?\:/i.test(a),'URL must start with "http://" or "https://". Invalid value: %s',a),u(a),b?p(d,"_pinit","status=no,resizable=yes,scrollbars=yes,personalbar=no,directories=no,location=no,toolbar=no,menubar=no,width=900,height=500,left=0,top=0"):p(d+"?amp=1&guid="+D,"_blank"));c&&E("&type="+c)};
I.prototype.fetchPin=function(){return this.xhr.fetchJson("https://widgets.pinterest.com/v3/pidgets/pins/info/?"+("pin_ids="+this.pinId+"&sub=www&base_scheme=https"),{requireAmpResponseSourceOrigin:!1}).then(function(a){return a.json()}).then(function(a){try{return a.data[0]}catch(b){return null}})};
I.prototype.renderPin=function(a){var b="-amp-pinterest-embed-pin",d=z(a.images["237x"].url,this.element);"medium"===this.width||"large"===this.width?(b+="-medium",d=d.replace(/237/,"345"),E("&type=pidget&pin_count_medium=1")):E("&type=pidget&pin_count=1");"responsive"===this.layout&&(b+=" -amp-pinterest-embed-pin-responsive");var c=F(this.element.ownerDocument,{span:{}});c.className=b+" i-amphtml-fill-content";b=F(this.element.ownerDocument,{span:{className:"-amp-pinterest-embed-pin-inner","data-pin-log":"embed_pin"}});
!this.alt&&a.attribution&&(this.alt=a.attribution.title);var e=F(this.element.ownerDocument,{img:{src:d,className:"-amp-pinterest-embed-pin-image","data-pin-no-hover":!0,"data-pin-href":"https://www.pinterest.com/pin/"+a.id+"/","data-pin-log":"embed_pin_img",alt:this.alt}});b.appendChild(e);var h=F(this.element.ownerDocument,{span:{className:"-amp-pinterest-rect -amp-pinterest-en-red -amp-pinterest-embed-pin-repin","data-pin-log":"embed_pin_repin","data-pin-pop":"1","data-pin-href":"https://www.pinterest.com/pin/"+
a.id+"/repin/x/?amp=1&guid="+D}});b.appendChild(h);e=F(this.element.ownerDocument,{span:{className:"-amp-pinterest-embed-pin-text"}});if(a.description){var v=F(this.element.ownerDocument,{span:{className:"-amp-pinterest-embed-pin-text-block -amp-pinterest-embed-pin-description",textContent:C(a.description)}});e.appendChild(v)}if(a.attribution){var x=F(this.element.ownerDocument,{span:{className:"-amp-pinterest-embed-pin-text-block -amp-pinterest-embed-pin-attribution"}});x.appendChild(F(this.element.ownerDocument,
{img:{className:"-amp-pinterest-embed-pin-text-icon-attrib",src:a.attribution.provider_icon_url}}));x.appendChild(F(this.element.ownerDocument,{span:{textContent:" by "}}));x.appendChild(F(this.element.ownerDocument,{span:{"data-pin-href":a.attribution.url,textContent:C(a.attribution.author_name)}}));e.appendChild(x)}if(a.repin_count||a.like_count){var B=F(this.element.ownerDocument,{span:{className:"-amp-pinterest-embed-pin-text-block -amp-pinterest-embed-pin-stats"}});if(a.repin_count){var K=F(this.element.ownerDocument,
{span:{className:"-amp-pinterest-embed-pin-stats-repins",textContent:String(a.repin_count)}});B.appendChild(K)}if(a.like_count){var L=F(this.element.ownerDocument,{span:{className:"-amp-pinterest-embed-pin-stats-likes",textContent:String(a.like_count)}});B.appendChild(L)}e.appendChild(B)}if(a.pinner){var y=F(this.element.ownerDocument,{span:{className:"-amp-pinterest-embed-pin-text-block -amp-pinterest-embed-pin-pinner"}});y.appendChild(F(this.element.ownerDocument,{img:{className:"-amp-pinterest-embed-pin-pinner-avatar",
alt:C(a.pinner.full_name),title:C(a.pinner.full_name),src:a.pinner.image_small_url,"data-pin-href":a.pinner.profile_url}}));y.appendChild(F(this.element.ownerDocument,{span:{className:"-amp-pinterest-embed-pin-pinner-name",textContent:C(a.pinner.full_name),"data-pin-href":a.pinner.profile_url}}));y.appendChild(F(this.element.ownerDocument,{span:{className:"-amp-pinterest-embed-pin-board-name",textContent:C(a.board.name),"data-pin-href":"https://www.pinterest.com/"+a.board.url}}));e.appendChild(y)}b.appendChild(e);
c.appendChild(b);c.addEventListener("click",this.handleClick.bind(this));return c};I.prototype.render=function(){this.pinUrl=this.element.getAttribute("data-url");this.width=this.element.getAttribute("data-width");this.layout=this.element.getAttribute("layout");this.alt=this.element.getAttribute("alt");this.pinId="";try{this.pinId=this.pinUrl.split("/pin/")[1].split("/")[0]}catch(a){return Promise.reject(k().createError("Invalid pinterest url: "+this.pinUrl))}return this.fetchPin().then(this.renderPin.bind(this))};function J(a){return AMP.BaseElement.apply(this,arguments)||this}f(J,AMP.BaseElement);J.prototype.preconnectCallback=function(a){this.preconnect.url("https://widgets.pinterest.com",a)};J.prototype.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a||"fluid"==a||"intrinsic"==a};
J.prototype.layoutCallback=function(){var a=this,b=k().assert(this.element.getAttribute("data-do"),"The data-do attribute is required for <amp-pinterest> %s",this.element);return this.render(b).then(function(b){return a.element.appendChild(b)})};
J.prototype.render=function(a){switch(a){case "embedPin":return(new I(this.element)).render();case "buttonPin":return(new H(this.element)).render();case "buttonFollow":return(new G(this.element)).render()}return Promise.reject(k().createError("Invalid selector: "+a))};(function(a){a.registerElement("amp-pinterest",J,".-amp-pinterest-round{height:16px;width:16px;background-image:url(https://s-passets.pinimg.com/images/pidgets/pinit_bg_en_round_red_16_2.png);background-size:16px 16px}.-amp-pinterest-round-tall{height:32px;width:32px;background-image:url(https://s-passets.pinimg.com/images/pidgets/pinit_bg_en_round_red_32_2.png);background-size:32px 32px}.-amp-pinterest-rect{height:20px;width:40px;background:url() 0 -20px no-repeat;background-size:40px 60px}.-amp-pinterest-rect:hover{background-position:0 0}.-amp-pinterest-rect:active{background-position:0 -40px}.-amp-pinterest-en-gray{background-image:url(https://s-passets.pinimg.com/images/pidgets/pinit_bg_en_rect_gray_20_2.png)}.-amp-pinterest-en-red{background-image:url(https://s-passets.pinimg.com/images/pidgets/pinit_bg_en_rect_red_20_2.png)}.-amp-pinterest-en-white{background-image:url(https://s-passets.pinimg.com/images/pidgets/pinit_bg_en_rect_white_20_2.png)}.-amp-pinterest-ja-gray{background-image:url(https://s-passets.pinimg.com/images/pidgets/pinit_bg_ja_rect_gray_20_2.png)}.-amp-pinterest-ja-red{background-image:url(https://s-passets.pinimg.com/images/pidgets/pinit_bg_ja_rect_red_20_2.png)}.-amp-pinterest-ja-white{background-image:url(https://s-passets.pinimg.com/images/pidgets/pinit_bg_ja_rect_white_20_2.png)}.-amp-pinterest-rect-tall{height:28px;width:56px;background:url() 0 -28px no-repeat;background-size:56px 84px}.-amp-pinterest-rect-tall:hover{background-position:0 0}.-amp-pinterest-rect-tall:active{background-position:0 -56px}.-amp-pinterest-en-gray-tall{background-image:url(https://s-passets.pinimg.com/images/pidgets/pinit_bg_en_rect_gray_28_2.png)}.-amp-pinterest-en-red-tall{background-image:url(https://s-passets.pinimg.com/images/pidgets/pinit_bg_en_rect_red_28_2.png)}.-amp-pinterest-en-white-tall{background-image:url(https://s-passets.pinimg.com/images/pidgets/pinit_bg_en_rect_white_28_2.png)}.-amp-pinterest-ja-gray-tall{background-image:url(https://s-passets.pinimg.com/images/pidgets/pinit_bg_ja_rect_gray_28_2.png)}.-amp-pinterest-ja-red-tall{background-image:url(https://s-passets.pinimg.com/images/pidgets/pinit_bg_ja_rect_red_28_2.png)}.-amp-pinterest-ja-white-tall{background-image:url(https://s-passets.pinimg.com/images/pidgets/pinit_bg_ja_rect_white_28_2.png)}.-amp-pinterest-count-pad-above{margin-top:30px}.-amp-pinterest-count-pad-above-tall{margin-top:38px}.-amp-pinterest-bubble-above{bottom:21px;height:29px;width:40px;background:transparent url(https://s-passets.pinimg.com/images/pidgets/count_north_white_rect_20_2.png) 0 0 no-repeat;background-size:40px 29px;font:12px Arial,Helvetica,sans-serif;line-height:24px}.-amp-pinterest-bubble-above,.-amp-pinterest-bubble-above-tall{position:absolute;left:0;text-align:center;text-decoration:none;color:#777}.-amp-pinterest-bubble-above-tall{bottom:29px;height:37px;width:56px;background:transparent url(https://s-passets.pinimg.com/images/pidgets/count_north_white_rect_28_2.png) 0 0 no-repeat;background-size:56px 37px;font:15px Arial,Helvetica,sans-serif;line-height:28px}.-amp-pinterest-count-pad-beside{width:86px}.-amp-pinterest-count-pad-beside-tall{width:120px}.-amp-pinterest-bubble-beside{height:20px;width:45px;text-indent:5px;background:transparent url(https://s-passets.pinimg.com/images/pidgets/count_east_white_rect_20_2.png) 0 0 no-repeat;background-size:45px 20px;font:12px Arial,Helvetica,sans-serif;line-height:20px}.-amp-pinterest-bubble-beside,.-amp-pinterest-bubble-beside-tall{position:absolute;top:0;right:0;text-align:center;text-decoration:none;color:#777}.-amp-pinterest-bubble-beside-tall{height:28px;width:63px;text-indent:7px;background:transparent url(https://s-passets.pinimg.com/images/pidgets/count_east_white_rect_28_2.png) 0 0 no-repeat;background-size:63px 28px;font:15px Arial,Helvetica,sans-serif;line-height:28px}.-amp-pinterest-follow-button{background:transparent url(https://s-passets.pinimg.com/images/pidgets/bfs2.png) 0 0 no-repeat;background-size:200px 60px;border-right:1px solid #d0d0d0;border-radius:4px;color:#444;cursor:pointer;display:inline-block;font:700 normal normal 11px/20px Helvetica Neue,helvetica,arial,san-serif;padding-right:3px;position:relative;text-decoration:none;text-indent:20px}.-amp-pinterest-follow-button:hover{background-position:0 -20px;border-right-color:#919191}.-amp-pinterest-follow-button i{background-image:url(https://s-passets.pinimg.com/images/pidgets/log2.png);background-size:14px 14px;height:14px;left:3px;position:absolute;top:3px;width:14px}.-amp-pinterest-embed-pin,.-amp-pinterest-embed-pin-medium{box-sizing:border-box;padding:5px;width:237px}.-amp-pinterest-embed-pin-medium{width:345px}.-amp-pinterest-embed-pin-responsive{width:100%}.-amp-pinterest-embed-pin-responsive .-amp-pinterest-embed-pin-image{max-width:100%}.-amp-pinterest-embed-pin-inner{display:block;position:relative;-webkit-font-smoothing:antialiased;cursor:pointer;background:#fff;box-shadow:0 1px 3px rgba(0,0,0,0.33);border-radius:3px;width:100%}.-amp-pinterest-embed-pin-text{color:#a8a8a8;white-space:normal;font-family:Helvetica Neue,arial,sans-serif;font-size:11px;line-height:18px;font-weight:700}.-amp-pinterest-embed-pin-image{border-radius:3px 3px 0 0}.-amp-pinterest-embed-pin-text-block{display:block;line-height:30px;padding:0 12px}.-amp-pinterest-embed-pin-text-icon-attrib{height:16px;width:16px;vertical-align:middle}.-amp-pinterest-embed-pin-stats{height:16px;line-height:16px;padding:8px 12px}.-amp-pinterest-embed-pin-stats-likes{padding-left:14px;background:transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAAAAAClR+AmAAAAUElEQVR4AT2HMQpFIQwEc/+zbXhFLBW8QUihIAT2E8Q/xe6M0Jv2zK7NKUcBzAlAjzjqtdZl4c8S2nOjMPS6BoWMr/wLVnAbYJs3mGMkXzx+OeRqUf5HHRoAAAAASUVORK5CYII=) 0 2px no-repeat}.-amp-pinterest-embed-pin-stats-repins{padding:0 10px 0 18px;background:transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAALCAAAAABq7uO+AAAASklEQVQI10WNMQrAMBRCvf/Z3pQcImPplsIPdqhNXOSJqLxVtnWQsuUO9IM3cHlV8dSSDZQHAOPH2YA2FU+qtH7MRhaVh/xt/PQCEW6N4EV+CPEAAAAASUVORK5CYII=) 0 0 no-repeat}.-amp-pinterest-embed-pin-description{color:#363636;font-weight:400;font-size:14px;line-height:17px;padding-top:5px}.-amp-pinterest-embed-pin-pinner{padding:12px;border-top:1px solid rgba(0,0,0,0.09)}.-amp-pinterest-embed-pin-pinner-avatar{border-radius:15px;border:none;height:30px;width:30px;vertical-align:middle;margin:0 8px 12px 0;float:left}.-amp-pinterest-embed-pin-board-name,.-amp-pinterest-embed-pin-pinner-name{display:block;height:15px;line-height:15px}.-amp-pinterest-embed-pin-pinner-name{color:#777}.-amp-pinterest-embed-pin-repin{position:absolute;top:12px;left:12px;cursor:pointer}\n/*# sourceURL=/extensions/amp-pinterest/0.1/amp-pinterest.css*/")})(self.AMP);
})});
//# sourceMappingURL=amp-pinterest-0.1.js.map

