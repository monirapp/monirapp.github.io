(self.AMP=self.AMP||[]).push({n:"amp-access",v:"0",f:(function(AMP,_){
var h;function k(a,b){b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(c){return b}};var aa=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function t(a){var b=Object.create(null);if(!a)return b;for(var c;c=aa.exec(a);){var d=k(c[1],c[1]),e=c[2]?k(c[2],c[2]):"";b[d]=e}return b};var ca="";
function u(a){var b=a||self,c;if(b.AMP_MODE)c=b.AMP_MODE;else{c=b;var d=!!(self.AMP_CONFIG||{}).test||!1,e=t(c.location.originalHash||c.location.hash),f=t(c.location.search);ca||(ca=c.AMP_CONFIG&&c.AMP_CONFIG.v?c.AMP_CONFIG.v:"010");c=b.AMP_MODE={localDev:!1,development:!("1"!=e.development&&!c.AMP_DEV_MODE),examiner:"2"==e.development,filter:e.filter,geoOverride:e["amp-geo"],minified:!0,lite:void 0!=f.amp_lite,test:d,log:e.log,version:"0",rtvVersion:ca}}return c};var da=Object.prototype.toString;self.log=self.log||{user:null,dev:null,userForEmbed:null};var w=self.log;function x(){if(!w.user)throw Error("failed to call initLogConstructor");return w.user}function A(){if(w.dev)return w.dev;throw Error("failed to call initLogConstructor");};function ea(){var a,b=Object.create(null);a&&Object.assign(b,a);return b}function G(a){return a||{}};function I(){var a,b;this.promise=new Promise(function(c,d){a=c;b=d});this.resolve=a;this.reject=b};function fa(a,b){if(a.nodeType){var c=(a.ownerDocument||a).defaultView;if(c=c!=(c.__AMP_TOP||c)&&ga(c,b)?J(c,b):null)return c}return K(a,b)}function L(a,b){a=a.__AMP_TOP||a;return J(a,b)}function ha(a){a=a.__AMP_TOP||a;return ga(a,"performance")?J(a,"performance"):null}function K(a,b){a=ia(a);a=M(a);return J(a,b)}function ia(a){return a.nodeType?L((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function M(a){a=ia(a);return a.isSingleDoc()?a.win:a}
function J(a,b){ga(a,b);var c=ja(a);a=c[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function ka(a,b){var c=la(a,b);if(c)return c;var d=new I,e=d,f=e.promise,e=e.resolve;ja(a)[b]={obj:null,promise:f,resolve:e,context:null,ctor:null};return f}function la(a,b){var c=ja(a)[b];if(c){if(c.promise)return c.promise;J(a,b);return c.promise=Promise.resolve(c.obj)}return null}function ja(a){var b=a.services;b||(b=a.services={});return b}
function ga(a,b){a=a.services&&a.services[b];return!(!a||!a.ctor&&!a.obj)};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
var ma=/(\0)|^(-)$|([\x01-\x1f\x7f]|^-?[0-9])|([\x80-\uffff0-9a-zA-Z_-]+)|[^]/g;function na(a,b,c,d,e){return e?e:b?"\ufffd":d?a.slice(0,-1)+"\\"+a.slice(-1).charCodeAt(0).toString(16)+" ":"\\"+a};function oa(a,b){return b.length>a.length?!1:0==a.lastIndexOf(b,0)};function pa(a,b,c){var d;try{d=a.open(b,"_blank",c)}catch(e){A().error("DOM","Failed to open url on target: ","_blank",e)}d||(d=a.open(b,"_top"));return d};function qa(a){var b=ia(a),c=la(M(a),"amp-analytics-instrumentation");return c?c:b.whenBodyAvailable().then(function(){var a;a=b.win;var c=b.getHeadNode(),f;if(c){f=[];for(var c=c.querySelectorAll("script[custom-element]"),g=0;g<c.length;g++)f.push(c[g].getAttribute("custom-element"))}else f=[];a=f.includes("amp-analytics")?L(a,"extensions").waitForExtension(a,"amp-analytics"):Promise.resolve();return a}).then(function(){var c=b.win;return c.ampExtendedElements&&c.ampExtendedElements["amp-analytics"]?
ka(M(a),"amp-analytics-instrumentation"):null})};function N(a){return L(a,"timer")}function O(a){return K(a,"viewer")};function P(a){this.Va=a;this.oa=this.Ba=0;this.ca=Object.create(null)}P.prototype.has=function(a){return!!this.ca[a]};P.prototype.get=function(a){var b=this.ca[a];if(b)return b.access=++this.oa,b.payload};P.prototype.put=function(a,b){this.has(a)||this.Ba++;this.ca[a]={payload:b,access:this.oa};if(!(this.Ba<=this.Va)){A().warn("lru-cache","Trimming LRU cache");a=this.ca;var c=this.oa+1,d,e;for(e in a){var f=a[e].access;f<c&&(c=f,d=e)}void 0!==d&&(delete a[d],this.Ba--)}};var S=self.AMP_CONFIG||{},ua={thirdParty:S.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:S.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:("string"==typeof S.thirdPartyFrameRegex?new RegExp(S.thirdPartyFrameRegex):S.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,cdn:S.cdnUrl||"https://cdn.ampproject.org",cdnProxyRegex:("string"==typeof S.cdnProxyRegex?new RegExp(S.cdnProxyRegex):S.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,
errorReporting:S.errorReportingUrl||"https://amp-error-reporting.appspot.com/r",localDev:S.localDev||!1};var va=G({c:!0,v:!0,a:!0,ad:!0}),wa,xa,ya=/[?&]amp_js[^&]*/,za=/[?&]amp_gsa[^&]*/,Aa=/[?&]amp_r[^&]*/,Ba=/[?&]usqp[^&]*/;
function T(a){var b;wa||(wa=self.document.createElement("a"),xa=self.UrlCache||(self.UrlCache=new P(100)));var c=b?null:xa,d=wa;if(c&&c.has(a))a=c.get(a);else{d.href=a;d.protocol||(d.href=d.href);var e={href:d.href,protocol:d.protocol,host:d.host,hostname:d.hostname,port:"0"==d.port?"":d.port,pathname:d.pathname,search:d.search,hash:d.hash,origin:null};"/"!==e.pathname[0]&&(e.pathname="/"+e.pathname);if("http:"==e.protocol&&80==e.port||"https:"==e.protocol&&443==e.port)e.port="",e.host=e.hostname;
e.origin=d.origin&&"null"!=d.origin?d.origin:"data:"!=e.protocol&&e.host?e.protocol+"//"+e.host:e.href;c&&c.put(a,e);a=e}return a}function Ca(a){var b=[],c;for(c in a){var d=a[c];if(null!=d)if(Array.isArray(d))for(var e=0;e<d.length;e++){var f=d[e];b.push(encodeURIComponent(c)+"="+encodeURIComponent(f))}else b.push(encodeURIComponent(c)+"="+encodeURIComponent(d))}return b.join("&")}
function Da(a){"string"==typeof a&&(a=T(a));var b;(b="https:"==a.protocol||"localhost"==a.hostname)||(a=a.hostname,b=a.length-10,b=0<=b&&a.indexOf(".localhost",b)==b);return b}function U(a,b){var c;c=void 0===c?"source":c;x().assert(null!=a,"%s %s must be available",b,c);var d=a;x().assert(Da(d)||/^(\/\/)/.test(d),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',b,c,d)}
function V(a){var b=a.indexOf("#");return-1==b?a:a.substring(0,b)}function W(a){"string"==typeof a&&(a=T(a));return ua.cdnProxyRegex.test(a.origin)}
function X(a){"string"==typeof a&&(a=T(a));if(!W(a))return a.href;var b=a.pathname.split("/"),c=b[1];x().assert(va[c],"Unknown path prefix in url %s",a.href);var d=b[2],e="s"==d?"https://"+decodeURIComponent(b[3]):"http://"+decodeURIComponent(d);x().assert(0<e.indexOf("."),"Expected a . in origin %s",e);b.splice(1,"s"==d?3:2);b=e+b.join("/");c=(c=a.search)&&"?"!=c?(c=c.replace(ya,"").replace(za,"").replace(Aa,"").replace(Ba,"").replace(/^[?&]/,""))?"?"+c:"":"";return b+c+(a.hash||"")};var Y;function Ea(a,b,c){var d=void 0,e=a,f=c,g;g=function(a){try{return f(a)}catch(C){throw self.reportError(C),C;}};var l=Fa(),m=!1;d&&(m=d.capture);e.addEventListener(b,g,l?d:m);return function(){e&&e.removeEventListener(b,g,l?d:m);g=e=f=null}}function Fa(){if(void 0!==Y)return Y;Y=!1;try{var a={get capture(){Y=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(b){}return Y};function Ga(a,b){return Ea(a,"message",b)}function Ha(a,b){var c=b,d=Ea(a,"click",function(a){try{c(a)}finally{c=null,d()}});return d};function Ia(a,b){if("."==b)return a;var c=b.split(".");for(b=0;b<c.length;b++){var d=c[b];if(d&&a&&void 0!==a[d]&&(null==a||"object"!=typeof a?0:Object.prototype.hasOwnProperty.call(a,d)))a=a[d];else{a=void 0;break}}return a}function Ja(a,b){try{return JSON.parse(a)}catch(c){b&&b(c)}};function Z(a,b){var c;if(a.__AMP__EXPERIMENT_TOGGLES)c=a.__AMP__EXPERIMENT_TOGGLES;else{a.__AMP__EXPERIMENT_TOGGLES=Object.create(null);c=a.__AMP__EXPERIMENT_TOGGLES;if(a.AMP_CONFIG)for(var d in a.AMP_CONFIG){var e=a.AMP_CONFIG[d];"number"===typeof e&&0<=e&&1>=e&&(c[d]=Math.random()<e)}if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-doc-opt-in"])&&0<a.AMP_CONFIG["allow-doc-opt-in"].length&&(d=a.AMP_CONFIG["allow-doc-opt-in"],e=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]')))for(var e=
e.getAttribute("content").split(","),f=0;f<e.length;f++)-1!=d.indexOf(e[f])&&(c[e[f]]=!0);Object.assign(c,Ka(a));if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-url-opt-in"])&&0<a.AMP_CONFIG["allow-url-opt-in"].length)for(d=a.AMP_CONFIG["allow-url-opt-in"],a=t(a.location.originalHash||a.location.hash),e=0;e<d.length;e++)f=a["e-"+d[e]],"1"==f&&(c[d[e]]=!0),"0"==f&&(c[d[e]]=!1)}var g=c;return!!g[b]}
function Ka(a){a:{var b;try{b=a.document.cookie}catch(g){b=""}if(a=b)for(a=a.split(";"),b=0;b<a.length;b++){var c=a[b].trim(),d=c.indexOf("=");if(-1!=d&&"AMP_EXP"==k(c.substring(0,d).trim(),void 0)){a=c.substring(d+1).trim();a=k(a,a);break a}}a=null}var e=a,f=e?e.split(/\s*,\s*/g):[];a=Object.create(null);for(b=0;b<f.length;b++)0!=f[b].length&&("-"==f[b][0]?a[f[b].substr(1)]=!1:a[f[b]]=!0);return a};var La,Ma="Webkit webkit Moz moz ms O o".split(" ");function Na(a){var b=void 0;if(oa("display","--"))return"display";La||(La=ea());var c=La.display;if(!c||b){c="display";if(void 0===a.display){var d;a:{for(d=0;d<Ma.length;d++){var e=Ma[d]+"Display";if(void 0!==a[e]){d=e;break a}}d=""}var f=d;void 0!==a[f]&&(c=f)}b||(La.display=c)}return c}function Oa(a){var b=!1;if(void 0===b){var c;c=(c=Na(a.style))?a.style[c]:void 0;b="none"==c}c=b?"":"none";var d=Na(a.style);d&&(a.style[d]=c)};function Pa(a,b){var c="\n/*# sourceURL=/extensions/amp-access/0.1/amp-access.css*/",d=!1,e="amp-access",f=a.getHeadNode(),g=Qa(f,Ra(f,c),d||!1,e||null);if(b){var l=a.getRootNode();if(Sa(l,g))b(g);else var m=setInterval(function(){Sa(l,g)&&(clearInterval(m),b(g))},4)}}
function Qa(a,b,c,d){var e=a.__AMP_CSS_SM;e||(e=a.__AMP_CSS_SM=ea());var f=!c&&d&&"amp-custom"!=d&&"amp-keyframes"!=d,g=c?"amp-runtime":f?"amp-extension="+d:null;if(g){var l=Ta(a,e,g);if(l)return l.textContent!==b&&(l.textContent=b),l}var m=(a.ownerDocument||a).createElement("style");m.textContent=b;var n=null;c?m.setAttribute("amp-runtime",""):f?(m.setAttribute("amp-extension",d||""),n=Ta(a,e,"amp-runtime")):(d&&m.setAttribute(d,""),n=a.lastChild);b=n;a.insertBefore(m,b?b.nextSibling:a.firstChild);
g&&(e[g]=m);return m}function Ta(a,b,c){return b[c]?b[c]:(a=a.querySelector("style["+c+"]"))?b[c]=a:null}function Ra(a,b){return(a=a.__AMP_CSS_TR)?a(b):b}function Sa(a,b){var c=a.styleSheets;for(a=0;a<c.length;a++){var d=c[a];if(d.ownerNode==b)return!0}return!1};function Wa(a,b){var c;qa(a).then(function(d){d&&d.triggerEventForTarget(a,b,c)})};self.AMPErrors=self.AMPErrors||[];function Xa(){this.m=null}h=Xa.prototype;h.add=function(a){var b=this;this.m||(this.m=[]);this.m.push(a);return function(){b.remove(a)}};h.remove=function(a){this.m&&(a=this.m.indexOf(a),-1<a&&this.m.splice(a,1))};h.removeAll=function(){this.m&&(this.m.length=0)};h.fire=function(a){if(this.m)for(var b=this.m,c=0;c<b.length;c++)(0,b[c])(a)};h.getHandlerCount=function(){return this.m?this.m.length:0};function Ya(a){if("undefined"!==typeof TextDecoder)return(new TextDecoder("utf-8")).decode(a);for(var b=new Uint8Array(a.buffer||a),c=Array(b.length),d=0;d<b.length;d++)c[d]=String.fromCharCode(b[d]);var e=c.join("");return decodeURIComponent(escape(e))}function Za(a){for(var b=new Uint8Array(a.length),c=0;c<a.length;c++){var d=a.charCodeAt(c);b[c]=d}return b};var $a={"-":"+",_:"/",".":"="};function ab(a){var b=atob(a.replace(/[-_.]/g,function(a){return $a[a]}));return Za(b)};var bb=["GET","POST"];function cb(a,b){var c=Object.assign({},b),d=b.body;if(d&&"function"==typeof d.getFormData){c.headers["Content-Type"]="multipart/form-data;charset=utf-8";b=b.body.entries();for(var d=[],e=b.next();!e.done;e=b.next())d.push(e.value);c.body=d}return{input:a,init:c}}
function db(a,b){x().assert("[object Object]"===da.call(a),"Object expected: %s",a);var c="document"==b;if(!c)return new Response(a.body,a.init);var d=ea(),e={status:200,statusText:"OK",getResponseHeader:function(a){return d[String(a).toLowerCase()]||null}};if(a.init){var f=a.init;Array.isArray(f.headers)&&f.headers.forEach(function(a){var b=a[0],c=a[1];d[String(b).toLowerCase()]=String(c)});f.status&&(e.status=parseInt(f.status,10));f.statusText&&(e.statusText=String(f.statusText))}return new Response(a.body?
String(a.body):"",e)}function eb(a,b,c,d){if(!b)return Promise.resolve();var e=O(b),f=e.whenFirstVisible();return!W(c)&&e.hasCapability("xhrInterceptor")&&b.getRootNode().documentElement.hasAttribute("allow-xhr-interception")?f.then(function(){return e.isTrustedViewer()}).then(function(b){var f=u(a).development;if(b||f){var g=G({originalRequest:cb(c,d)});return e.sendMessageAwaitResponse("xhr",g).then(function(a){return db(a,d.responseType)})}}):f}
function fb(a,b,c){!1!==c.ampCors&&(c=T(b),c=t(c.search),x().assert(!("__amp_source_origin"in c),"Source origin is not allowed in %s",b),a=T(X(a.location.href)).origin,a=encodeURIComponent("__amp_source_origin")+"="+encodeURIComponent(a))&&(b=b.split("#",2),c=b[0].split("?",2),a=c[0]+(c[1]?"?"+c[1]+"&"+a:"?"+a),b=a+=b[1]?"#"+b[1]:"");return b}
function gb(a){var b="text/html";a=a||{};var c=a.credentials,d;d=a.method;void 0===d?d="GET":(d=d.toUpperCase(),bb.includes(d));a.method=d;a.headers=a.headers||G({});b&&(a.headers.Accept=b);return a}
function hb(a,b,c){!1===c.ampCors&&(c.requireAmpResponseSourceOrigin=!1);!0===c.requireAmpResponseSourceOrigin&&A().error("XHR","requireAmpResponseSourceOrigin is deprecated, use ampCors instead");void 0===c.requireAmpResponseSourceOrigin&&(c.requireAmpResponseSourceOrigin=!0);var d=a.origin||T(a.location.href).origin,e=T(b).origin;d==e&&(c.headers=c.headers||{},c.headers["AMP-Same-Origin"]="true");return c}
function ib(a){return new Promise(function(b){if(a.ok)return b(a);b=a.status;var c=x().createError("HTTP error "+b);c.retriable=415==b||500<=b&&600>b;c.response=a;throw c;})};var jb=function(){function a(a,b,c){var d;c=c||{};for(d=a.length;d--;c[a[d]]=b);return c}function b(){this.yy={}}var c=[1,3],d=[1,4],e=[1,18],f=[1,13],g=[1,14],l=[1,15],m=[1,16],n=[1,17],C=[1,20],Q=[1,21],q=[5,6,7,10],z=[5,6,7,10,15,16,17,18,19,20,21],D=[5,6,7,10,15,16,17,18,19,20,21,25],R={trace:function oc(){},yy:{},ib:{error:2,result:3,search_condition:4,EOF:5,OR:6,AND:7,NOT:8,"(":9,")":10,predicate:11,comparison_predicate:12,truthy_predicate:13,scalar_exp:14,EQ:15,DEQ:16,NEQ:17,LT:18,LTE:19,GT:20,
GTE:21,atom:22,field_ref:23,literal:24,DOT:25,field_name:26,NAME:27,STRING:28,NUMERIC:29,TRUE:30,FALSE:31,NULL:32,$accept:0,$end:1},$:{2:"error",5:"EOF",6:"OR",7:"AND",8:"NOT",9:"(",10:")",15:"EQ",16:"DEQ",17:"NEQ",18:"LT",19:"LTE",20:"GT",21:"GTE",25:"DOT",27:"NAME",28:"STRING",29:"NUMERIC",30:"TRUE",31:"FALSE",32:"NULL"},Qa:[0,[3,2],[4,3],[4,3],[4,2],[4,3],[4,1],[11,1],[11,1],[12,3],[12,3],[12,3],[12,3],[12,3],[12,3],[12,3],[13,1],[14,1],[14,1],[22,1],[23,3],[23,1],[26,1],[24,1],[24,1],[24,1],[24,
1],[24,1]],performAction:function pc(a,b,c,d,e,f){var g=f.length-1;switch(e){case 1:return f[g-1];case 2:this.h=f[g-2]||f[g];break;case 3:this.h=f[g-2]&&f[g];break;case 4:this.h=!f[g];break;case 5:this.h=f[g-1];break;case 6:case 7:case 8:case 17:case 18:case 19:this.h=f[g];break;case 9:this.h=f[g-2]===f[g];break;case 10:throw Error('"==" is not allowed, use "="');case 11:this.h=f[g-2]!==f[g];break;case 12:this.h=typeof f[g-2]==typeof f[g]&&f[g-2]<f[g];break;case 13:this.h=typeof f[g-2]==typeof f[g]&&
f[g-2]<=f[g];break;case 14:this.h=typeof f[g-2]==typeof f[g]&&f[g-2]>f[g];break;case 15:this.h=typeof f[g-2]==typeof f[g]&&f[g-2]>=f[g];break;case 16:this.h=void 0!==f[g]&&null!==f[g]&&""!==f[g]&&0!==f[g]&&!1!==f[g];break;case 20:this.h="[object Object]"==Object.prototype.toString.call(f[g-2])&&f[g-2].hasOwnProperty(f[g])?f[g-2][f[g]]:null;break;case 21:this.h=void 0!==d[f[g]]?d[f[g]]:null;break;case 22:this.h=a;break;case 23:this.h=a.substring(1,a.length-1);break;case 24:this.h=Number(a);break;case 25:this.h=
!0;break;case 26:this.h=!1;break;case 27:this.h=null}},table:[{3:1,4:2,8:c,9:d,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,27:e,28:f,29:g,30:l,31:m,32:n},{1:[3]},{5:[1,19],6:C,7:Q},{4:22,8:c,9:d,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,27:e,28:f,29:g,30:l,31:m,32:n},{4:23,8:c,9:d,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,27:e,28:f,29:g,30:l,31:m,32:n},a(q,[2,6]),a(q,[2,7]),a(q,[2,8]),a(q,[2,16],{15:[1,24],16:[1,25],17:[1,26],18:[1,27],19:[1,28],20:[1,29],21:[1,30]}),a(z,[2,17]),a(z,[2,18],{25:[1,
31]}),a(z,[2,19]),a(D,[2,21]),a(z,[2,23]),a(z,[2,24]),a(z,[2,25]),a(z,[2,26]),a(z,[2,27]),a(D,[2,22]),{1:[2,1]},{4:32,8:c,9:d,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,27:e,28:f,29:g,30:l,31:m,32:n},{4:33,8:c,9:d,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,27:e,28:f,29:g,30:l,31:m,32:n},a(q,[2,4]),{6:C,7:Q,10:[1,34]},{14:35,22:9,23:10,24:11,26:12,27:e,28:f,29:g,30:l,31:m,32:n},{14:36,22:9,23:10,24:11,26:12,27:e,28:f,29:g,30:l,31:m,32:n},{14:37,22:9,23:10,24:11,26:12,27:e,28:f,29:g,30:l,31:m,32:n},
{14:38,22:9,23:10,24:11,26:12,27:e,28:f,29:g,30:l,31:m,32:n},{14:39,22:9,23:10,24:11,26:12,27:e,28:f,29:g,30:l,31:m,32:n},{14:40,22:9,23:10,24:11,26:12,27:e,28:f,29:g,30:l,31:m,32:n},{14:41,22:9,23:10,24:11,26:12,27:e,28:f,29:g,30:l,31:m,32:n},{26:42,27:e},a([5,6,10],[2,2],{7:Q}),a(q,[2,3]),a(q,[2,5]),a(q,[2,9]),a(q,[2,10]),a(q,[2,11]),a(q,[2,12]),a(q,[2,13]),a(q,[2,14]),a(q,[2,15]),a(D,[2,20])],defaultActions:{19:[2,1]},parseError:function qc(a,b){if(b.recoverable)this.trace(a);else throw a=Error(a),
a.hash=b,a;},parse:function rc(a){function b(a){d.length-=2*a;f.length-=a;g.length-=a}var c=this,d=[0],e=[],f=[null],g=[],l=this.table,m="",n=0,ra=0,q=0,z=2,C=1,Q=g.slice.call(arguments,1),p=Object.create(this.lexer),E={yy:{}},y;for(y in this.yy)Object.prototype.hasOwnProperty.call(this.yy,y)&&(E.yy[y]=this.yy[y]);p.setInput(a,E.yy);E.yy.lexer=p;E.yy.parser=this;"undefined"==typeof p.yylloc&&(p.yylloc={});var D=p.yylloc;g.push(D);var R=p.options&&p.options.ranges;this.parseError="function"===typeof E.yy.parseError?
E.yy.parseError:Object.getPrototypeOf(this).parseError;var ta=function(){var a;a=p.lex()||C;"number"!==typeof a&&(a=c.ib[a]||a);return a};for(var r,sa,F,v,H={},ba,B,Ua;;){F=d[d.length-1];if(this.defaultActions[F])v=this.defaultActions[F];else{if(null===r||"undefined"==typeof r)r=ta();v=l[F]&&l[F][r]}if("undefined"===typeof v||!v.length||!v[0]){var Va="";y=[];for(ba in l[F])this.$[ba]&&ba>z&&y.push("'"+this.$[ba]+"'");Va=p.showPosition?"Parse error on line "+(n+1)+":\n"+p.showPosition()+"\nExpecting "+
y.join(", ")+", got '"+(this.$[r]||r)+"'":"Parse error on line "+(n+1)+": Unexpected "+(r==C?"end of input":"'"+(this.$[r]||r)+"'");this.parseError(Va,{text:p.match,token:this.$[r]||r,line:p.yylineno,loc:D,expected:y})}if(v[0]instanceof Array&&1<v.length)throw Error("Parse Error: multiple actions possible at state: "+F+", token: "+r);switch(v[0]){case 1:d.push(r);f.push(p.yytext);g.push(p.yylloc);d.push(v[1]);r=null;sa?(r=sa,sa=null):(ra=p.yyleng,m=p.yytext,n=p.yylineno,D=p.yylloc,0<q&&q--);break;
case 2:B=this.Qa[v[1]][1];H.h=f[f.length-B];H.Ha={first_line:g[g.length-(B||1)].first_line,last_line:g[g.length-1].last_line,first_column:g[g.length-(B||1)].first_column,last_column:g[g.length-1].last_column};R&&(H.Ha.range=[g[g.length-(B||1)].range[0],g[g.length-1].range[1]]);y=this.performAction.apply(H,[m,ra,n,E.yy,v[1],f,g].concat(Q));if("undefined"!==typeof y)return y;B&&(d=d.slice(0,-2*B),f=f.slice(0,-1*B),g=g.slice(0,-1*B));d.push(this.Qa[v[1]][0]);f.push(H.h);g.push(H.Ha);Ua=l[d[d.length-
2]][d[d.length-1]];d.push(Ua);break;case 3:return!0}}}},ta=function(){return{EOF:1,parseError:function(a,b){if(this.yy.parser)this.yy.parser.parseError(a,b);else throw Error(a);},setInput:function(a,b){this.yy=b||this.yy||{};this._input=a;this._more=this._backtrack=this.done=!1;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};this.options.ranges&&(this.yylloc.range=[0,0]);this.offset=
0;return this},input:function(){var a=this._input[0];this.yytext+=a;this.yyleng++;this.offset++;this.match+=a;this.matched+=a;var b=a.match(/(?:\r\n?|\n).*/g);b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++;this.options.ranges&&this.yylloc.range[1]++;this._input=this._input.slice(1);return a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-b);this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);
this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);c.length-1&&(this.yylineno-=c.length-1);a=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b};this.options.ranges&&(this.yylloc.range=[a[0],a[0]+this.yyleng-b]);this.yyleng=this.yytext.length;
return this},more:function(){this._more=!0;return this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-
this.match.length);return(20<a.length?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;20>a.length&&(a+=this._input.substr(0,20-a.length));return(a.substr(0,20)+(20<a.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},test_match:function(a,b){var c,d;this.options.backtrack_lexer&&(d={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,
first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(d.yylloc.range=this.yylloc.range.slice(0)));if(c=a[0].match(/(?:\r\n?|\n).*/g))this.yylineno+=c.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,
last_column:c?c[c.length-1].length-c[c.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+a[0].length};this.yytext+=a[0];this.match+=a[0];this.matches=a;this.yyleng=this.yytext.length;this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]);this._backtrack=this._more=!1;this._input=this._input.slice(a[0].length);this.matched+=a[0];a=this.performAction.call(this,this.yy,this,b,this.conditionStack[this.conditionStack.length-1]);this.done&&this._input&&(this.done=!1);
if(a)return a;if(this._backtrack)for(var e in d)this[e]=d[e];return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c;this._more||(this.match=this.yytext="");for(var d=this._currentRules(),e=0;e<d.length;e++)if((b=this._input.match(this.rules[d[e]]))&&(!a||b[0].length>a[0].length))if(a=b,c=e,this.options.backtrack_lexer){a=this.test_match(b,d[e]);if(!1!==a)return a;if(this._backtrack)a=!1;else return!1}else if(!this.options.flex)break;return a?(a=this.test_match(a,
d[c]),!1!==a?a:!1):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function ra(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function sc(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-
1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function tc(a){a=this.conditionStack.length-1-Math.abs(a||0);return 0<=a?this.conditionStack[a]:"INITIAL"},pushState:function uc(a){this.begin(a)},stateStackSize:function vc(){return this.conditionStack.length},options:{},performAction:function(a,b,c,d){var e=d;switch(c){case 1:return 7;case 2:return 6;case 3:return 8;case 4:return 32;case 5:return 30;case 6:return 30;case 7:return 31;
case 8:return 31;case 9:return 9;case 10:return 10;case 11:return"|";case 12:return 19;case 13:return 18;case 14:return 21;case 15:return 20;case 16:return 17;case 17:return 16;case 18:return 15;case 19:return 29;case 20:return 27;case 21:return 28;case 22:return 28;case 23:return 25;case 24:return"INVALID";case 25:return 5}},rules:[/^(?:\s+)/,/^(?:AND\b)/,/^(?:OR\b)/,/^(?:NOT\b)/,/^(?:NULL\b)/,/^(?:TRUE\b)/,/^(?:true\b)/,/^(?:FALSE\b)/,/^(?:false\b)/,/^(?:\()/,/^(?:\))/,/^(?:\|)/,/^(?:<=)/,/^(?:<)/,
/^(?:>=)/,/^(?:>)/,/^(?:!=)/,/^(?:==)/,/^(?:=)/,/^(?:-?[0-9]+(\.[0-9]+)?\b)/,/^(?:[a-zA-Z_][a-zA-Z0-9_]*)/,/^(?:'[^\']*')/,/^(?:"[^\"]*")/,/^(?:\.)/,/^(?:.)/,/^(?:$)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25],inclusive:!0}}}}();R.lexer=ta;b.prototype=R;R.Parser=b;return new b}();function kb(a,b,c){this.ampdoc=a;this.C=c;this.ba=x().assert(b.authorization,'"authorization" URL must be specified');U(this.ba,'"authorization"');this.V=!b.noPingback;this.la=b.pingback;this.V&&(x().assert(this.la,'"pingback" URL must be specified'),U(this.la,'"pingback"'));c=b;c.authorizationTimeout?(c=c.authorizationTimeout,x().assert("number"==typeof c,'"authorizationTimeout" must be a number'),u().development||(c=Math.min(c,3E3))):c=3E3;this.qa=c;this.O=L(a.win,"xhr");this.B=N(a.win)}h=kb.prototype;
h.getConfig=function(){return{authorizationUrl:this.ba,pingbackEnabled:this.V,pingbackUrl:this.la,authorizationTimeout:this.qa}};h.getAuthorizationUrl=function(){return this.ba};h.isAuthorizationEnabled=function(){return!0};h.getAuthorizationTimeout=function(){return this.qa};h.authorize=function(){var a=this,b=this.C.buildUrl(this.ba,!1);return b.then(function(b){return a.B.timeoutPromise(a.qa,a.O.fetchJson(b,{credentials:"include"})).then(function(a){return a.json()})})};h.isPingbackEnabled=function(){return this.V};
h.pingback=function(){var a=this;return this.C.buildUrl(this.la,!0).then(function(b){return a.O.sendSignal(b,{method:"POST",credentials:"include",headers:G({"Content-Type":"application/x-www-form-urlencoded"}),body:""})})};h.postAction=function(){};function lb(a,b,c){this.Ua=a;this.Ca=b;this.o=c;this.M=this.Da=null;this.Ka=this.ab.bind(this);this.gb=0;this.Ga={}}h=lb.prototype;h.connect=function(a){if(this.M)throw Error("already connected");this.M=a;this.Ua.addEventListener("message",this.Ka)};h.disconnect=function(){this.M&&(this.M=null,this.Ua.removeEventListener("message",this.Ka))};h.isConnected=function(){return null!=this.o};h.getTarget=function(){var a=mb(this);if(!a)throw Error("not connected");return a};
function mb(a){a.M&&!a.Da&&(a.Da="function"==typeof a.Ca?a.Ca():a.Ca);return a.Da}h.getTargetOrigin=function(){if(null==this.o)throw Error("not connected");return this.o};h.sendCommand=function(a,b){nb(this,void 0,a,b)};h.sendCommandRsvp=function(a,b){var c=String(++this.gb),d=new I,e=d.promise;this.Ga[c]={promise:e,resolver:d.resolve};nb(this,c,a,b);return e};
function nb(a,b,c,d){var e=a.getTarget();a="connect"==c?null!=a.o?a.o:"*":a.getTargetOrigin();e.postMessage({sentinel:"__AMP__",_rsvp:b,cmd:c,payload:d||null},a)}
h.ab=function(a){var b=this,c=a.data;if(c&&"__AMP__"==c.sentinel){var d=a.origin,e=c.cmd,f=c.payload||null;null==this.o&&"start"==e&&(this.o=d);null==this.o&&a.source&&mb(this)==a.source&&(this.o=d);if(d==this.o){var g=c._rsvp,l=!!g&&"rsvp"!=e;a=this.ta(g,e,f);l&&Promise.resolve(a).then(function(a){nb(b,g,"rsvp",{result:a})},function(a){nb(b,g,"rsvp",{error:String(a)})})}}};
h.ta=function(a,b,c){if("rsvp"==b){var d=a&&this.Ga[a];d&&("error"in c?d.resolver(Promise.reject(Error(c.error))):d.resolver(c.result),delete this.Ga[a])}else return this.M(b,c)};function ob(a,b,c){var d=this;this.ampdoc=a;this.C=c;this.Xa=b;this.B=N(a.win);this.ha=x().assert(b.iframeSrc,'"iframeSrc" URL must be specified');U(this.ha,'"iframeSrc"');(this.T=b.iframeVars||null)&&x().assert(Array.isArray(this.T),'"iframeVars" must be an array');this.Ya=x().assert(b.defaultResponse,'"defaultResponse" must be specified');this.o=T(this.ha).origin;this.ra=this.da=null;this.U=a.win.document.createElement("iframe");Oa(this.U);this.X=new lb(this.ampdoc.win,function(){return d.U.contentWindow},
this.o);this.Ma=null}h=ob.prototype;h.disconnect=function(){this.X.disconnect();this.ampdoc.getBody().removeChild(this.U)};h.getConfig=function(){return{iframeSrc:this.ha,iframeVars:this.T}};h.isAuthorizationEnabled=function(){return!0};h.authorize=function(){return Promise.race([pb(this),qb(this)])};h.isPingbackEnabled=function(){return!0};h.pingback=function(){var a=this;return this.connect().then(function(){return a.X.sendCommandRsvp("pingback",{})})};h.postAction=function(){rb(this,null)};
h.connect=function(){if(!this.ra){var a=new I;this.ra=a.promise;this.da=a.resolve;this.Ma=sb(this);this.X.connect(this.ta.bind(this));this.ampdoc.getBody().appendChild(this.U);this.U.src=this.ha}return this.ra};function sb(a){return new Promise(function(b){var c=JSON.parse(JSON.stringify(a.Xa));if(a.T){var d=a.T.join("&"),e=a.C.collectUrlVars(d,!1);b(e.then(function(a){c.iframeVars=a;return c}))}else b(c)})}
function pb(a){var b=3E3*(u().development?2:1);return a.B.promise(b).then(function(){return tb(a)||a.Ya})}function qb(a){return a.connect().then(function(){return a.X.sendCommandRsvp("authorize",{})}).then(function(b){b&&Promise.resolve().then(function(){return rb(a,b)});return b})}
function tb(a){var b=a.ampdoc.win,c=b.sessionStorage||b.localStorage;if(!c)return null;try{var d=c.getItem("amp-access-iframe");if(!d)return null;var e=JSON.parse(d);return e.t+6048E5<a.ampdoc.win.Date.now()?null:e.d||null}catch(f){A().error("amp-access-iframe","failed to restore access response: ",f);try{c.removeItem("amp-access-iframe")}catch(g){}return null}}
function rb(a,b){var c=a.ampdoc.win;if(c=c.sessionStorage||c.localStorage)try{b?c.setItem("amp-access-iframe",JSON.stringify(G({t:a.ampdoc.win.Date.now(),d:b}))):c.removeItem("amp-access-iframe")}catch(d){A().error("amp-access-iframe","failed to store access response: ",d)}}h.ta=function(a){var b=this;"connect"==a&&this.Ma.then(function(a){b.X.sendCommandRsvp("start",{protocol:"amp-access",config:a}).then(function(){b.da&&(b.da(),b.da=null)})})};function ub(a,b,c){this.ampdoc=a;this.C=c;this.pa=b.authorizationFallbackResponse||null;this.F=W(a.win.location)}h=ub.prototype;h.getConfig=function(){return{authorizationResponse:this.pa}};h.isAuthorizationEnabled=function(){return!!this.pa&&!this.F};h.authorize=function(){return Promise.resolve(this.pa)};h.isPingbackEnabled=function(){return!1};h.pingback=function(){return Promise.resolve()};h.postAction=function(){};function vb(a){a=a.trim();a=a.replace(/^\-+BEGIN[^-]*\-+/,"");a=a.replace(/\-+END[^-]*\-+$/,"");a=a.replace(/[\r\n]/g,"").trim();return Za(atob(a))};function wb(a){this.win=a;this.na=a.crypto&&(a.crypto.subtle||a.crypto.webkitSubtle)||null}wb.prototype.decode=function(a){return xb(a).payload};wb.prototype.isVerificationSupported=function(){return!!this.na};
wb.prototype.decodeAndVerify=function(a,b){var c=this;if(!this.na)throw Error("Crypto is not supported on this platform");var d=new Promise(function(b){return b(xb(a))});return d.then(function(a){var d=a.header.alg;if(!d||"RS256"!=d)throw Error("Only alg=RS256 is supported");return yb(c,b).then(function(b){var d=ab(a.sig);return c.na.verify({name:"RSASSA-PKCS1-v1_5"},b,d,Za(a.verifiable))}).then(function(b){if(b)return a.payload;throw Error("Signature verification failed");})})};
function xb(a){function b(){throw Error('Invalid token: "'+a+'"');}var c=a.split(".");3!=c.length&&b();var d=ab(c[0]),e=ab(c[1]);return{header:Ja(Ya(d),b),payload:Ja(Ya(e),b),verifiable:c[0]+"."+c[1],sig:c[2]}}function yb(a,b){return b.then(function(b){return a.na.importKey("spki",vb(b),{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"])})};function zb(a,b,c){var d=gb(c),d=hb(a,b,d);b=fb(a,b,d);c=L(a,"ampdoc");c=c.isSingleDoc()?c.getAmpDoc():null;d.responseType="document";return eb(a,c,b,d).then(function(c){return c?c.text().then(function(a){return(new DOMParser).parseFromString(a,"text/html")}):Ab(b,d).then(function(b){var c=b.xhr,e=d;(b=b.response.headers.get("AMP-Access-Control-Allow-Source-Origin"))?(e=T(X(a.location.href)).origin,x().assert(b==e,"Returned AMP-Access-Control-Allow-Source-Origin is not equal to the current: "+b+(" vs "+
e))):e.requireAmpResponseSourceOrigin&&x().assert(!1,"Response must contain the AMP-Access-Control-Allow-Source-Origin header");return c.responseXML})})}
function Ab(a,b){return new Promise(function(c,d){var e=new XMLHttpRequest;e.open(b.method||"GET",a,!0);e.withCredentials="include"==b.credentials;e.responseType="document";for(var f in b.headers)e.setRequestHeader(f,b.headers[f]);e.onreadystatechange=function(){if(!(2>e.readyState))if(100>e.status||599<e.status)e.onreadystatechange=null,d(x().createExpectedError("Unknown HTTP status "+e.status));else if(4==e.readyState){var a={status:e.status,statusText:e.statusText,headers:Bb(e.getAllResponseHeaders())},
a=new Response("",a),a=ib(a).then(function(a){return{response:a,xhr:e}});c(a)}};e.onerror=function(){d(x().createExpectedError("Request failure"))};e.onabort=function(){d(x().createExpectedError("Request aborted"))};"POST"==b.method?e.send(b.body):e.send()})}function Bb(a){var b=G({}),c=a.replace(/\r?\n[\t ]+/g," ");c.split(/\r?\n/).forEach(function(a){a=a.split(":");var c=a.shift().trim();c&&(b[c]=a.join(":").trim())});return b};function Cb(a,b,c){this.ampdoc=a;this.C=c;this.w=new kb(a,b,c);this.l=O(a);this.O=L(a.win,"xhr");this.B=N(a.win);this.N=L(a.win,"vsync");var d=a.getRootNode().querySelector('meta[name="i-amphtml-access-state"]');this.H=d?d.getAttribute("content"):null;var e=Z(a.win,"amp-access-server-jwt");this.F=W(a.win.location)||e;var f=e?this.l.getParam("serverAccessService"):null;this.Aa=f||V(a.win.location.href);this.W=b.publicKey||null;this.K=b.publicKeyUrl||null;x().assert(this.W||this.K,'"publicKey" or "publicKeyUrl" must be specified');
this.K&&U(this.K,'"publicKeyUrl"');this.W&&this.K&&x().warn("amp-access-server-jwt",'Both "publicKey" and "publicKeyUrl" specified. The "publicKeyUrl" will be ignored.');this.ua=new wb(a.win)}h=Cb.prototype;h.getConfig=function(){return{client:this.w.getConfig(),proxy:this.F,serverState:this.H,publicKey:this.W,publicKeyUrl:this.K}};h.isAuthorizationEnabled=function(){return!0};h.authorize=function(){return this.F&&this.H?Db(this):Eb(this)};h.isPingbackEnabled=function(){return this.w.isPingbackEnabled()};
h.pingback=function(){return this.w.pingback()};h.postAction=function(){};
function Fb(a){var b=a.C.buildUrl(a.w.getAuthorizationUrl(),!1).then(function(b){return a.B.timeoutPromise(3E3,a.O.fetchText(b,{credentials:"include"}))}).then(function(a){return a.text()}).then(function(b){var c=a.ua.decode(b);x().assert(c.amp_authdata,'"amp_authdata" must be present in JWT');return{encoded:b,jwt:c}});u().development&&(a.ua.isVerificationSupported()?b=b.then(function(b){return a.ua.decodeAndVerify(b.encoded,Gb(a)).then(function(){return b})}):x().warn("amp-access-server-jwt","Cannot verify signature on this browser since it doesn't support WebCrypto APIs"),
b=b.then(function(a){var b=a.jwt,c=Date.now(),f=b.exp;x().assert(f,'"exp" field must be specified');x().assert(1E3*parseFloat(f)>c,"token has expired: %s",f);b=b.aud;x().assert(b,'"aud" field must be specified');c=!1;if(Array.isArray(b))for(f=0;f<b.length;f++){if("ampproject.org"==b[f]){c=!0;break}}else c="ampproject.org"==b;x().assert(c,'"aud" must be "%s": %s',"ampproject.org",b);return a}));return b.catch(function(a){throw x().createError("JWT fetch or validation failed: ",a);})}
function Gb(a){return a.W?Promise.resolve(a.W):a.O.fetchText(a.K).then(function(a){return a.text()})}function Eb(a){return Fb(a).then(function(a){return a.jwt.amp_authdata})}
function Db(a){return Fb(a).then(function(b){var c=b.encoded,d=b.jwt.amp_authdata;b=Ca(G({url:V(a.ampdoc.win.location.href),state:a.H,jwt:c}));return a.B.timeoutPromise(3E3,zb(a.ampdoc.win,a.Aa,{method:"POST",body:b,headers:G({"Content-Type":"application/x-www-form-urlencoded"}),requireAmpResponseSourceOrigin:!1})).then(function(b){return a.za(b)}).then(function(){return d})})}
h.za=function(a){var b=this,c=a.querySelectorAll("[i-amphtml-access-id]");return this.N.mutatePromise(function(){for(var a=0;a<c.length;a++){var e=c[a],f=e.getAttribute("i-amphtml-access-id"),g=b.ampdoc.getRootNode().querySelector('[i-amphtml-access-id="'+String(f).replace(ma,na)+'"]');g?g.parentElement.replaceChild(b.ampdoc.win.document.importNode(e,!0),g):A().warn("amp-access-server-jwt","Section not found: ",f)}})};function Hb(a,b,c){this.ampdoc=a;this.C=c;this.w=new kb(a,b,c);this.l=O(a);this.O=L(a.win,"xhr");this.B=N(a.win);this.N=L(a.win,"vsync");this.H=(b=a.getRootNode().querySelector('meta[name="i-amphtml-access-state"]'))?b.getAttribute("content"):null;b=Z(a.win,"amp-access-server");this.F=W(a.win.location)||b;this.Aa=(b?this.l.getParam("serverAccessService"):null)||V(a.win.location.href)}h=Hb.prototype;h.getConfig=function(){return{client:this.w.getConfig(),proxy:this.F,serverState:this.H}};
h.isAuthorizationEnabled=function(){return!0};
h.authorize=function(){var a=this;return this.F&&this.H?this.C.collectUrlVars(this.w.getAuthorizationUrl(),!1).then(function(b){var c={},d;for(d in b)null!=b[d]&&(c[d]=String(b[d]));b=G({url:V(a.ampdoc.win.location.href),state:a.H,vars:c});return a.B.timeoutPromise(a.w.getAuthorizationTimeout(),zb(a.ampdoc.win,a.Aa,{method:"POST",body:"request="+encodeURIComponent(JSON.stringify(b)),headers:G({"Content-Type":"application/x-www-form-urlencoded"}),requireAmpResponseSourceOrigin:!1}))}).then(function(b){var c=b.querySelector('script[id="amp-access-data"]').textContent,
d=JSON.parse(c);return a.za(b).then(function(){return d})}):this.w.authorize()};h.isPingbackEnabled=function(){return this.w.isPingbackEnabled()};h.pingback=function(){return this.w.pingback()};h.postAction=function(){};
h.za=function(a){var b=this,c=a.querySelectorAll("[i-amphtml-access-id]");return this.N.mutatePromise(function(){for(var a=0;a<c.length;a++){var e=c[a],f=e.getAttribute("i-amphtml-access-id"),g=b.ampdoc.getRootNode().querySelector('[i-amphtml-access-id="'+String(f).replace(ma,na)+'"]');g?g.parentElement.replaceChild(b.ampdoc.win.document.importNode(e,!0),g):A().warn("amp-access-server","Section not found: ",f)}})};function Ib(a,b){this.ampdoc=a;this.Sa=x().assert(b.vendor,'"vendor" name must be specified');this.kb=b[this.Sa]||{};this.V=!b.noPingback;a=new I;this.Ta=a.promise;this.Fa=a.resolve}h=Ib.prototype;h.getVendorName=function(){return this.Sa};h.getConfig=function(){return this.kb};h.registerVendor=function(a){x().assert(this.Fa,"Vendor has already been registered");this.Fa(a);this.Fa=null};h.isAuthorizationEnabled=function(){return!0};h.authorize=function(){return this.Ta.then(function(a){return a.authorize()})};
h.isPingbackEnabled=function(){return this.V};h.pingback=function(){return this.Ta.then(function(a){return a.pingback()})};h.postAction=function(){};var Jb=/RETURN_URL/;function Kb(a,b){var c=O(a),d=parseInt(c.getParam("dialog"),10);return d?new Lb(c,b):new Mb(a.win,c,b)}function Nb(a,b){return Kb(a,b).open()}function Lb(a,b){this.viewer=a;this.urlOrPromise=b}Lb.prototype.getLoginUrl=function(){return("string"==typeof this.urlOrPromise?Promise.resolve(this.urlOrPromise):this.urlOrPromise).then(function(a){return Ob(a,"RETURN_URL")})};
Lb.prototype.open=function(){var a=this;return this.getLoginUrl().then(function(b){return a.viewer.sendMessageAwaitResponse("openDialog",G({url:b}))})};function Mb(a,b,c){this.win=a;this.viewer=b;this.urlOrPromise=c;this.ja=this.J=this.R=this.A=this.ya=this.Z=null}Mb.prototype.open=function(){var a=this;x().assert(!this.Z,"Dialog already opened");return(new Promise(function(b,c){a.Z=b;a.ya=c;Pb(a)})).then(function(b){Qb(a);return b},function(b){Qb(a);throw b;})};
function Qb(a){a.Z=null;a.ya=null;if(a.A){try{a.A.close()}catch(b){}a.A=null}a.J&&(a.win.clearInterval(a.J),a.J=null);a.ja&&(a.ja(),a.ja=null)}Mb.prototype.getLoginUrl=function(){var a=this;return("string"==typeof this.urlOrPromise?Promise.resolve(this.urlOrPromise):this.urlOrPromise).then(function(b){return Ob(b,Rb(a))})};
function Pb(a){var b=a.win.screen,c=Math.floor(Math.min(700,.9*b.width)),d=Math.floor(Math.min(450,.9*b.height)),e="height="+d+",width="+c+",left="+Math.floor((b.width-c)/2)+",top="+Math.floor((b.height-d)/2),b=e+",resizable=yes,scrollbars=yes",f=Rb(a);a.R=null;"string"==typeof a.urlOrPromise?(c=Ob(a.urlOrPromise,f),a.A=pa(a.win,c,b),a.A&&(a.R=Promise.resolve())):(a.A=pa(a.win,"",b),a.A&&(a.R=a.urlOrPromise.then(function(b){b=Ob(b,f);a.A.location.replace(b)},function(a){throw Error("failed to resolve url: "+
a);})));a.R?a.R.then(function(){Sb(a,f)},function(b){Tb(a,null,b)}):Tb(a,null,Error("failed to open dialog"))}function Sb(a,b){var c=T(b).origin;a.J=a.win.setInterval(function(){a.A.closed&&(a.win.clearInterval(a.J),a.J=null,a.win.setTimeout(function(){Tb(a,"")},3E3))},500);a.ja=Ga(a.win,function(b){b.origin==c&&b.data&&"amp"==b.data.sentinel&&"result"==b.data.type&&(a.A&&a.A.postMessage(G({sentinel:"amp",type:"result-ack"}),c),Tb(a,b.data.result))})}
function Tb(a,b,c){a.Z&&(c?a.ya(c):a.Z(b),Qb(a))}function Rb(a){var b,c=a.viewer.getResolvedViewerUrl();return ua.cdn+"/v0/amp-login-done-0.1.html?url="+encodeURIComponent(c)}function Ob(a,b){return Jb.test(a)?a.replace(Jb,encodeURIComponent(b)):a+(-1==a.indexOf("?")?"?":"&")+"return="+encodeURIComponent(b)};var Ub={CLIENT:"client",IFRAME:"iframe",SERVER:"server",VENDOR:"vendor",OTHER:"other"};
function Vb(a,b,c,d,e,f){this.ampdoc=a;this.fa=c;this.ma=d;this.va=e;this.P=f;this.Na=Z(a.win,"amp-access-server");this.bb=Z(a.win,"amp-access-jwt");var g=b.type?x().assertEnumValue(Ub,b.type,"access type"):null;g||(g=b.vendor?"vendor":"client");"server"!=g||this.Na||(x().warn("amp-access",'Experiment "amp-access-server" is not enabled.'),g="client");"client"==g&&this.Na&&(x().info("amp-access","Forcing access type: SERVER"),g="server");"iframe"!=g||Z(this.ampdoc.win,"amp-access-iframe")||(x().error("amp-access",
'Experiment "amp-access-iframe" is not enabled.'),g="client");this.Ea=g;var g=b.login,l={};if(g)if("string"==typeof g)l[""]=g;else if("[object Object]"===da.call(g))for(var m in g)l[m]=g[m];else x().assert(!1,'"login" must be either a single URL or a map of URLs');for(var n in l)U(l[n],this.P);this.ia=l;this.Ja=b.authorizationFallbackResponse;this.cb=b.namespace||null;this.I=Wb(this,b);this.wa=T(X(a.win.location)).origin;this.Ra=fa(a,"url-replace");this.l=O(a);this.fb=Nb.bind(null,a);this.aa=null;
a=new I;this.Za=a.promise;this.sa=a.resolve;this.Pa={};this.G=null;this.Oa=0}h=Vb.prototype;h.getNamespace=function(){return this.cb};h.getType=function(){return this.Ea};h.getAdapter=function(){return this.I};h.getAuthResponse=function(){return this.aa};
function Wb(a,b){var c={buildUrl:a.buildUrl.bind(a),collectUrlVars:a.collectUrlVars.bind(a)},d=a.bb&&!0===b.jwt;switch(a.Ea){case "client":return d?new Cb(a.ampdoc,b,c):new kb(a.ampdoc,b,c);case "iframe":return new ob(a.ampdoc,b,c);case "server":return d?new Cb(a.ampdoc,b,c):new Hb(a.ampdoc,b,c);case "vendor":return new Ib(a.ampdoc,b);case "other":return new ub(a.ampdoc,b,c)}throw A().createError("Unsupported access type: ",a.Ea);}h.getAdapterConfig=function(){return this.I.getConfig()};
h.whenFirstAuthorized=function(){return this.Za};h.ga=function(){var a=this.ampdoc.getRootNode();return a.documentElement||a.body||a};h.D=function(a){Wa(this.ga(),a)};h.start=function(){Xb(this)};h.buildUrl=function(a,b){var c=this;return Yb(this,b).then(function(b){return c.Ra.expandUrlAsync(a,b)})};h.collectUrlVars=function(a,b){var c=this;return Yb(this,b).then(function(b){return c.Ra.collectVars(a,b)})};
function Yb(a,b){return a.fa().then(function(c){var d={READER_ID:c,ACCESS_READER_ID:c};b&&(d.AUTHDATA=function(b){if(a.aa)return Ia(a.aa,b)});return d})}
h.runAuthorization=function(a){var b=this;if(!this.I.isAuthorizationEnabled())return this.sa(),Promise.resolve();var c=this.I.authorize().catch(function(c){b.D("access-authorization-failed");if(b.Ja&&!a)return x().error("amp-access","Authorization failed: ",c),b.Ja;throw c;});return c.then(function(a){b.aa=a;b.sa();Xb(b);return a}).catch(function(a){x().error("amp-access","Authorization failed: ",a);b.sa();throw a;})};
h.reportViewToServer=function(){var a=this;return this.I.pingback().then(function(){a.D("access-pingback-sent")}).catch(function(b){a.D("access-pingback-failed");throw x().createError("Pingback failed: ",b);})};h.getLoginUrl=function(a){return Kb(this.ampdoc,a).getLoginUrl()};h.loginWithType=function(a){x().assert(this.ia[a],"Login URL is not configured: %s",a);var b=x().assert(this.Pa[a],"Login URL is not ready: %s",a);return Zb(this,b,a)};
h.loginWithUrl=function(a,b){b=void 0===b?"":b;return Zb(this,a,b)};function Zb(a,b,c){var d=Date.now();if(a.G&&1E3>d-a.Oa)return a.G;$b(a,c,"started");var e=a.fb(b),f=e.then(function(b){a.G=null;b=t(b).success;var d="true"==b||"yes"==b||"1"==b;d?$b(a,c,"success"):$b(a,c,"rejected");if(d||!b){a.I.postAction();var e=a.runAuthorization(!0);a.va(e);return e.then(function(){a.ma(0)})}}).catch(function(b){$b(a,c,"failed");a.G==f&&(a.G=null);throw b;});a.G=f;a.Oa=d;return a.G}
function $b(a,b,c){a.D("access-login-"+c);b&&a.D("access-login-"+b+"-"+c)}function Xb(a){if(0!=Object.keys(a.ia).length){var b=[],c={},d;for(d in a.ia)c.k=d,b.push(a.buildUrl(a.ia[c.k],!0).then(function(b){return function(c){a.Pa[b.k]=c;return{type:b.k,url:c}}}(c))),c={k:c.k};Promise.all(b)}};function ac(a){var b=this;this.ampdoc=a;Pa(a,function(){});var c=a.getElementById("amp-access");if(this.S=!!c)this.P=c,this.wa=T(X(a.win.location)).origin,this.B=N(a.win),this.N=L(a.win,"vsync"),this.Wa=ka(M(a),"cid"),this.l=O(a),this.lb=K(a,"viewport"),this.jb=L(a.win,"templates"),this.hb=K(a,"resources"),this.ka=ha(a.win),this.xa=null,this.j=bc(this),c=this.j.map(function(a){return a.whenFirstAuthorized()}),this.ea=!1,this.L=Promise.all(c),this.Y=null,this.Ia=new Xa,this.L.then(function(){b.ea=
!0;b.D("access-authorization-received");b.ka&&(b.ka.tick("aaa"),b.ka.tickSinceVisible("aaav"),b.ka.flush())}),a.getRootNode().addEventListener("amp:dom-update",this.eb.bind(this))}h=ac.prototype;h.getAccessReaderId=function(){return this.S?this.fa():null};h.fa=function(){if(!this.xa){var a=Promise.resolve();this.xa=this.Wa.then(function(b){return b.get({scope:"amp-access",createCookieIfNotPresent:!0},a)})}return this.xa};h.areFirstAuthorizationsCompleted=function(){return this.ea};
h.onApplyAuthorizations=function(a){this.Ia.add(a)};function bc(a){var b=Ja(a.P.textContent,function(a){throw x().createError('Failed to parse "amp-access" JSON: '+a);}),c={};if(Array.isArray(b))for(var d=b,e=0;e<d.length;e++){var f=d[e].namespace;x().assert(!!f,"Namespace required");x().assert(!c[f],"Namespace already used: "+f);c[f]=d[e]}else c[b.namespace||""]=b;var g=a.fa.bind(a),l=a.ma.bind(a),m=a.va.bind(a);return Object.keys(c).map(function(b){return new Vb(a.ampdoc,c[b],g,l,m,a.P)})}
h.eb=function(a){var b=this;if(this.ea){var c=a.target;return this.L.then(function(){var a=b.combinedResponses();cc(b,c,a)})}};h.getVendorSource=function(a){for(var b=0;b<this.j.length;b++){var c=this.j[b];if("vendor"==c.getType()){var d=c.getAdapter();if(d.getVendorName()==a)return c}}x().assert(!1,'Access vendor "%s" can only be used for "type=vendor", but none found',a);throw Error();};h.isEnabled=function(){return this.S};
h.ga=function(){var a=this.ampdoc.getRootNode();return a.documentElement||a.body||a};h.D=function(a){Wa(this.ga(),a)};function dc(a){a.l.onBroadcast(function(b){"amp-access-reauthorize"==b.type&&b.origin==a.wa&&ec(a)})}h.va=function(a){var b=this;this.La();a.then(function(){b.ea&&b.L.then(function(){b.ampdoc.whenReady().then(function(){var a=b.ampdoc.getRootNode(),d=b.combinedResponses();return cc(b,a,d)})})})};h.La=function(){this.l.broadcast(G({type:"amp-access-reauthorize",origin:this.wa}))};
function ec(a){fc(a,"amp-access-loading",!0);var b=a.l.whenFirstVisible().then(function(){return Promise.all(a.j.map(function(b){return gc(a,b)}))}),c=b.then(function(){fc(a,"amp-access-loading",!1);return a.ampdoc.whenReady().then(function(){var b=a.ampdoc.getRootNode(),c=a.combinedResponses();return cc(a,b,c)})});a.L=c}function gc(a,b){return b.runAuthorization().catch(function(){fc(a,"amp-access-error",!0)})}
h.getAuthdataField=function(a){var b=this;return this.S?this.L.then(function(){var c=b.combinedResponses(),c=Ia(c,a);return void 0!==c?c:null}):null};function cc(a,b,c){b=b.querySelectorAll("[amp-access]");for(var d=[],e=0;e<b.length;e++)d.push(hc(a,b[e],c));return Promise.all(d).then(function(){a.Ia.fire()})}
function hc(a,b,c){var d=b.getAttribute("amp-access"),e;a:{try{jb.yy=c;e=!!jb.parse(d);break a}finally{jb.yy=null}e=void 0}var f=e,g=null;f&&(g=ic(a,b,c));return g?g.then(function(){return jc(a,b,f)}):jc(a,b,f)}function jc(a,b,c){var d=!b.hasAttribute("amp-access-hide");return c==d?Promise.resolve():a.hb.mutateElement(b,function(){c?b.removeAttribute("amp-access-hide"):b.setAttribute("amp-access-hide","")})}
function ic(a,b,c){var d=[],e=b.querySelectorAll("[amp-access-template]");if(0<e.length)for(var f={i:0};f.i<e.length;f={i:f.i},f.i++){var g=kc(a,e[f.i],c).catch(function(a){return function(c){A().error("amp-access","Template failed: ",c,e[a.i],b)}}(f));d.push(g)}return 0<d.length?Promise.all(d):null}
function kc(a,b,c){var d=b,e=null;"TEMPLATE"!=d.tagName&&(e=d,d=e.__AMP_ACCESS__TEMPLATE);return d?a.jb.renderTemplate(d,c).then(function(b){return a.N.mutatePromise(function(){b.setAttribute("amp-access-template","");b.__AMP_ACCESS__TEMPLATE=d;d.parentElement?d.parentElement.replaceChild(b,d):e&&e.parentElement&&e.parentElement.replaceChild(b,e)})}):Promise.reject(Error("template not found"))}
h.ma=function(a){var b=this;this.j.some(function(a){return a.getAdapter().isPingbackEnabled()})&&(this.Y=null,this.ampdoc.whenReady().then(function(){b.l.isVisible()&&lc(b,a);b.l.onVisibilityChanged(function(){b.l.isVisible()&&lc(b,a)})}))};
function lc(a,b){a.Y||(a.Y=mc(a,b).then(function(){return a.L}).then(function(){a.D("access-viewed");for(var b=[],d=0;d<a.j.length;d++)a.j[d].getAdapter().isPingbackEnabled()&&b.push(a.j[d].reportViewToServer());return Promise.all(b)}).catch(function(b){a.Y=null;throw b;}),a.Y.then(a.La.bind(a)))}
function mc(a,b){if(0==b)return Promise.resolve();var c=[];return(new Promise(function(d,e){c.push(a.l.onVisibilityChanged(function(){a.l.isVisible()||e(Error("CANCELLED"))}));var f=a.B.delay(d,b);c.push(function(){return a.B.cancel(f)});c.push(a.lb.onScroll(d));c.push(Ha(a.ampdoc.getRootNode(),d))})).then(function(){c.forEach(function(a){return a()})},function(a){c.forEach(function(a){return a()});throw a;})}function fc(a,b,c){a.N.mutate(function(){a.ga().classList.toggle(b,c)})}
h.$a=function(a){"login"==a.method?(a.event&&a.event.preventDefault(),nc(this,"")):oa(a.method,"login-")&&(a.event&&a.event.preventDefault(),nc(this,a.method.substring(6)));return null};h.getSource=function(a){x().assert(0<=a&&a<this.j.length,"Invalid index: %d",a);return this.j[a]};
function nc(a,b){var c=b.indexOf("-"),d=1==a.j.length,e=-1<c?b.substring(0,c):b,f=a.j.filter(function(a){return a.getNamespace()==e});if(f.length){var g=-1<c?b.substring(c+1):"";f[0].loginWithType(g)}else x().assert(d,"Login must match namespace: %s",e),a.j[0].loginWithType(b)}h.combinedResponses=function(){if(1==this.j.length&&!this.j[0].getNamespace())return this.j[0].getAuthResponse()||{};var a={};this.j.forEach(function(b){return a[b.getNamespace()]=b.getAuthResponse()});return a};
(function(a){a.registerServiceForDoc("access",function(a){a=new ac(a);if(a.S){fa(a.ampdoc,"action").installActionHandler(a.P,a.$a.bind(a));for(var b=0;b<a.j.length;b++)a.j[b].start();ec(a);a.ma(2E3);dc(a)}else x().info("amp-access",'Access is disabled - no "id=amp-access" element');return a})})(self.AMP);
})});
//# sourceMappingURL=amp-access-0.1.js.map

