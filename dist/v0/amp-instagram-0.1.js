(self.AMP=self.AMP||[]).push({n:"amp-instagram",v:"0",f:(function(AMP,_){
var g;function m(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var k=Object.getOwnPropertyDescriptor(b,d);k&&Object.defineProperty(a,d,k)}else a[d]=b[d]};var p=Object.prototype.toString;self.log=self.log||{user:null,dev:null,userForEmbed:null};var q=self.log;/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function r(a,b){return b.length>a.length?!1:0==a.lastIndexOf(b,0)};var t;function u(a,b){var c=void 0,d=a,k=b,e;e=function(a){try{return k(a)}catch(l){throw self.reportError(l),l;}};var f=v(),h=!1;c&&(h=c.capture);d.addEventListener("message",e,f?c:h);return function(){d&&d.removeEventListener("message",e,f?c:h);e=d=k=null}}function v(){if(void 0!==t)return t;t=!1;try{var a={get capture(){t=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(b){}return t};function w(a,b){return u(a,b)};function y(a){var b;try{return JSON.parse(a)}catch(c){b&&b(c)}};var z,A="Webkit webkit Moz moz ms O o".split(" ");function B(a,b){for(var c in b){var d=a,k=b[c],e;e=d.style;var f=c;if(r(f,"--"))e=f;else{z||(z=Object.create(null));var h=z[f];if(!h){h=f;if(void 0===e[f]){var n=f.charAt(0).toUpperCase()+f.slice(1);b:{for(var l=0;l<A.length;l++){var x=A[l]+n;if(void 0!==e[x]){n=x;break b}}n=""}void 0!==e[n]&&(h=n)}z[f]=h}e=h}e&&(d.style[e]=k)}};function C(a){a=AMP.BaseElement.call(this,a)||this;a.c=null;a.h="";a.j=null;a.l="";a.m=null;return a}m(C,AMP.BaseElement);g=C.prototype;g.preconnectCallback=function(a){this.preconnect.url("https://www.instagram.com",a);this.preconnect.url("https://instagram.fsnc1-1.fna.fbcdn.net",a)};g.renderOutsideViewport=function(){return!1};
g.buildCallback=function(){if(!q.user)throw Error("failed to call initLogConstructor");this.h=q.user.assert(this.element.getAttribute("data-shortcode")||this.element.getAttribute("shortcode"),"The data-shortcode attribute is required for <amp-instagram> %s",this.element);this.l=this.element.hasAttribute("data-captioned")?"captioned/":""};
g.createPlaceholderCallback=function(){var a=this.win.document.createElement("div");a.setAttribute("placeholder","");var b=this.win.document.createElement("amp-img");b.setAttribute("noprerender","");b.setAttribute("src","https://www.instagram.com/p/"+encodeURIComponent(this.h)+"/media/?size=l");b.setAttribute("layout","fill");b.setAttribute("referrerpolicy","origin");this.propagateAttributes(["alt"],b);this.element.hasAttribute("data-default-framing")&&this.element.classList.add("amp-instagram-default-framing");
B(b,{top:"0 px",bottom:"0 px",left:"0 px",right:"0 px"});a.appendChild(b);return a};g.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a||"fluid"==a||"intrinsic"==a};
g.layoutCallback=function(){var a=this,b=this.element.ownerDocument.createElement("iframe");this.c=b;this.j=w(this.win,this.o.bind(this));b.setAttribute("scrolling","no");b.setAttribute("frameborder","0");b.setAttribute("allowtransparency","true");b.setAttribute("title","Instagram: "+this.element.getAttribute("alt"));b.src="https://www.instagram.com/p/"+encodeURIComponent(this.h)+"/embed/"+this.l+"?cr=1&v=9";this.applyFillContent(b);this.element.appendChild(b);B(b,{opacity:0});return this.m=this.loadPromise(b).then(function(){a.getVsync().mutate(function(){B(b,
{opacity:1})})})};g.o=function(a){var b=this;if("https://www.instagram.com"==a.origin&&a.source==this.c.contentWindow){var c=a.data;if(c&&("[object Object]"===p.call(c)||r(c,"{"))&&(a="[object Object]"===p.call(c)?c:y(c),void 0!==a&&"MEASURE"==a.type&&a.details)){var d=a.details.height;this.getVsync().measure(function(){b.c&&b.c.offsetHeight!==d&&b.changeHeight(d)})}}};g.unlayoutOnPause=function(){return!0};
g.unlayoutCallback=function(){if(this.c){var a=this.c;a.parentElement&&a.parentElement.removeChild(a);this.m=this.c=null}this.j&&this.j();return!0};(function(a){a.registerElement("amp-instagram",C,"amp-instagram.amp-instagram-default-framing{border:1px solid #dbdbdb!important}\n/*# sourceURL=/extensions/amp-instagram/0.1/amp-instagram.css*/")})(self.AMP);
})});
//# sourceMappingURL=amp-instagram-0.1.js.map

