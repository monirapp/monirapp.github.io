(self.AMP=self.AMP||[]).push({n:"amp-google-vrview-image",v:"0",f:(function(AMP,_){
function h(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]}function k(a,b){b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(c){return b}};var l=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;self.log=self.log||{user:null,dev:null,userForEmbed:null};var m=self.log;function n(){if(!m.user)throw Error("failed to call initLogConstructor");return m.user};function p(a){this.o=a;this.j=this.m=0;this.c=Object.create(null)}p.prototype.has=function(a){return!!this.c[a]};p.prototype.get=function(a){var b=this.c[a];if(b)return b.access=++this.j,b.payload};
p.prototype.put=function(a,b){this.has(a)||this.m++;this.c[a]={payload:b,access:this.j};if(!(this.m<=this.o)){if(m.dev)a=m.dev;else throw Error("failed to call initLogConstructor");a.warn("lru-cache","Trimming LRU cache");a=this.c;var c=this.j+1,d,e;for(e in a){var f=a[e].access;f<c&&(c=f,d=e)}void 0!==d&&(delete a[d],this.m--)}};var q,r;function t(a,b,c){if(b=encodeURIComponent(b)+"="+encodeURIComponent(c))a=a.split("#",2),c=a[0].split("?",2),b=c[0]+(c[1]?"?"+c[1]+"&"+b:"?"+b),a=b+=a[1]?"#"+a[1]:"";return a}
function u(a){if("string"==typeof a){q||(q=self.document.createElement("a"),r=self.UrlCache||(self.UrlCache=new p(100)));var b=r,c=q;if(b&&b.has(a))a=b.get(a);else{c.href=a;c.protocol||(c.href=c.href);var d={href:c.href,protocol:c.protocol,host:c.host,hostname:c.hostname,port:"0"==c.port?"":c.port,pathname:c.pathname,search:c.search,hash:c.hash,origin:null};"/"!==d.pathname[0]&&(d.pathname="/"+d.pathname);if("http:"==d.protocol&&80==d.port||"https:"==d.protocol&&443==d.port)d.port="",d.host=d.hostname;
d.origin=c.origin&&"null"!=c.origin?c.origin:"data:"!=d.protocol&&d.host?d.protocol+"//"+d.host:d.href;b&&b.put(a,d);a=d}}(b="https:"==a.protocol||"localhost"==a.hostname)||(a=a.hostname,b=a.length-10,b=0<=b&&a.indexOf(".localhost",b)==b);return b};function v(a){var b="amp-google-vrview-image",c;if(a.__AMP__EXPERIMENT_TOGGLES)c=a.__AMP__EXPERIMENT_TOGGLES;else{a.__AMP__EXPERIMENT_TOGGLES=Object.create(null);c=a.__AMP__EXPERIMENT_TOGGLES;if(a.AMP_CONFIG)for(var d in a.AMP_CONFIG){var e=a.AMP_CONFIG[d];"number"===typeof e&&0<=e&&1>=e&&(c[d]=Math.random()<e)}if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-doc-opt-in"])&&0<a.AMP_CONFIG["allow-doc-opt-in"].length&&(d=a.AMP_CONFIG["allow-doc-opt-in"],e=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]')))for(var e=
e.getAttribute("content").split(","),f=0;f<e.length;f++)-1!=d.indexOf(e[f])&&(c[e[f]]=!0);Object.assign(c,w(a));if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-url-opt-in"])&&0<a.AMP_CONFIG["allow-url-opt-in"].length){d=a.AMP_CONFIG["allow-url-opt-in"];e=a.location.originalHash||a.location.hash;a=Object.create(null);if(e)for(var g;g=l.exec(e);)f=k(g[1],g[1]),g=g[2]?k(g[2],g[2]):"",a[f]=g;for(e=0;e<d.length;e++)f=a["e-"+d[e]],"1"==f&&(c[d[e]]=!0),"0"==f&&(c[d[e]]=!1)}}var y=c;return!!y[b]}
function w(a){a:{var b;try{b=a.document.cookie}catch(g){b=""}if(a=b)for(a=a.split(";"),b=0;b<a.length;b++){var c=a[b].trim(),d=c.indexOf("=");if(-1!=d&&"AMP_EXP"==k(c.substring(0,d).trim(),void 0)){a=c.substring(d+1).trim();a=k(a,a);break a}}a=null}var e=a,f=e?e.split(/\s*,\s*/g):[];a=Object.create(null);for(b=0;b<f.length;b++)0!=f[b].length&&("-"==f[b][0]?a[f[b].substr(1)]=!1:a[f[b]]=!0);return a};function x(a){a=AMP.BaseElement.call(this,a)||this;a.l="";a.h="";return a}h(x,AMP.BaseElement);x.prototype.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a||"fluid"==a||"intrinsic"==a};
x.prototype.buildCallback=function(){n().assert(v(this.win),"TAG amp-google-vrview-image disabled");var a=this.element.getAttribute("src"),b=this.element,c;c=void 0===c?"source":c;n().assert(null!=a,"%s %s must be available",b,c);n().assert(u(a)||/^(\/\/)/.test(a),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',b,c,a);this.l=a;a=t("https://storage.googleapis.com/vrview/index.html","image",this.l);this.element.hasAttribute("stereo")&&
(a=t(a,"is_stereo","true"));var d=this.element.getAttribute("yaw");d&&(a=t(a,"start_yaw",d));this.element.hasAttribute("yaw-only")&&(a=t(a,"is_yaw_only","true"));this.h=a};x.prototype.preconnectCallback=function(){this.h&&(this.preconnect.preload(this.h),this.preconnect.preload(this.l))};x.prototype.createPlaceholderCallback=function(){return null};
x.prototype.layoutCallback=function(){var a=this.element.ownerDocument.createElement("iframe");a.onload=function(){a.readyState="complete"};this.applyFillContent(a);a.setAttribute("frameborder","0");a.setAttribute("allowfullscreen","true");a.setAttribute("src",this.h);this.element.appendChild(a);return this.loadPromise(a)};(function(a){a.registerElement("amp-google-vrview-image",x)})(self.AMP);
})});
//# sourceMappingURL=amp-google-vrview-image-0.1.js.map

