{"version":3,"sources":["node_modules/browser-pack/_prelude.js","ads/_a4a-config.js","ads/_config.js","ads/google/a4a/experiment-utils.js","ads/google/a4a/traffic-experiments.js","ads/google/a4a/url-builder.js","ads/google/a4a/utils.js","build/amp-ad-0.1.css.js","extensions/amp-ad-network-adsense-impl/0.1/adsense-a4a-config.js","extensions/amp-ad-network-cloudflare-impl/0.1/cloudflare-a4a-config.js","extensions/amp-ad-network-gmossp-impl/0.1/gmossp-a4a-config.js","extensions/amp-ad-network-triplelift-impl/0.1/triplelift-a4a-config.js","extensions/amp-ad/0.1/amp-ad-3p-impl.js","extensions/amp-ad/0.1/amp-ad-custom.js","extensions/amp-ad/0.1/amp-ad-ui.js","extensions/amp-ad/0.1/amp-ad-xorigin-iframe-handler.js","extensions/amp-ad/0.1/amp-ad.js","extensions/amp-ad/0.1/concurrent-load.js","node_modules/document-register-element/build/document-register-element.patched.js","node_modules/promise-pjs/promise.js","src/3p-frame-messaging.js","src/3p-frame.js","src/ad-cid.js","src/ad-helper.js","src/amp-events.js","src/analytics.js","src/common-signals.js","src/config.js","src/consent-state.js","src/consent.js","src/cookies.js","src/dom.js","src/element-service.js","src/error.js","src/event-helper-listen.js","src/event-helper.js","src/experiments.js","src/exponential-backoff.js","src/get-html.js","src/iframe-attributes.js","src/iframe-helper.js","src/intersection-observer.js","src/json.js","src/layout-rect.js","src/layout.js","src/log.js","src/mode-object.js","src/mode.js","src/polyfills.js","src/polyfills/array-includes.js","src/polyfills/custom-elements.js","src/polyfills/document-contains.js","src/polyfills/domtokenlist-toggle.js","src/polyfills/math-sign.js","src/polyfills/object-assign.js","src/polyfills/promise.js","src/render-delaying-services.js","src/service.js","src/service/variable-source.js","src/services.js","src/static-template.js","src/string.js","src/style-installer.js","src/style.js","src/types.js","src/url-parse-query-string.js","src/url-try-decode-uri-component.js","src/url.js","src/utils/array.js","src/utils/dom-fingerprint.js","src/utils/lru-cache.js","src/utils/math.js","src/utils/object.js","src/utils/promise.js","src/utils/rate-limit.js","third_party/css-escape/css-escape.js"],"names":[],"mappings":"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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACn6CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;QCzbgB,M,GAAA,M;QAeA,gB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","file":"amp-ad-0.1.max.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  adsenseIsA4AEnabled,\n} from '../extensions/amp-ad-network-adsense-impl/0.1/adsense-a4a-config';\nimport {\n  cloudflareIsA4AEnabled,\n} from\n  '../extensions/amp-ad-network-cloudflare-impl/0.1/cloudflare-a4a-config';\nimport {\n  gmosspIsA4AEnabled,\n} from\n  '../extensions/amp-ad-network-gmossp-impl/0.1/gmossp-a4a-config';\nimport {map} from '../src/utils/object';\nimport {\n  tripleliftIsA4AEnabled,\n} from\n  '../extensions/amp-ad-network-triplelift-impl/0.1/triplelift-a4a-config';\n\n/**\n * Registry for A4A (AMP Ads for AMPHTML pages) \"is supported\" predicates.\n * If an ad network, {@code ${NETWORK}}, is registered in this object, then the\n * {@code <amp-ad type=\"${NETWORK}\">} implementation will look up its predicate\n * here. If there is a predicate and it and returns {@code true}, then\n * {@code amp-ad} will attempt to render the ad via the A4A pathway (fetch\n * ad creative via early XHR CORS request; verify that it is validated AMP;\n * and then render directly in the host page by splicing into the host DOM).\n * Otherwise, it will attempt to render the ad via the existing \"3p iframe\"\n * pathway (delay load into a cross-domain iframe).\n *\n * @type {!Object<string, function(!Window, !Element): boolean>}\n */\nlet a4aRegistry;\n\n/**\n * Returns the a4a registry map\n * @return {Object}\n */\nexport function getA4ARegistry() {\n  if (!a4aRegistry) {\n    a4aRegistry = map({\n      'adsense': adsenseIsA4AEnabled,\n      'adzerk': () => true,\n      'doubleclick': () => true,\n      'triplelift': tripleliftIsA4AEnabled,\n      'cloudflare': cloudflareIsA4AEnabled,\n      'gmossp': gmosspIsA4AEnabled,\n      'fake': () => true,\n      // TODO: Add new ad network implementation \"is enabled\" functions here.\n      // Note: if you add a function here that requires a new \"import\", above,\n      // you'll probably also need to add a whitelist exception to\n      // build-system/dep-check-config.js in the \"filesMatching: 'ads/**/*.js'\n      // rule.\n    });\n  }\n\n  return a4aRegistry;\n}\n\n/**\n * An object mapping signing server names to their corresponding URLs.\n * @type {!Object<string, string>}\n */\nexport const signingServerURLs = {\n  'google': 'https://cdn.ampproject.org/amp-ad-verifying-keyset.json',\n  'google-dev': 'https://cdn.ampproject.org/amp-ad-verifying-keyset-dev.json',\n  'cloudflare': 'https://amp.cloudflare.com/amp-ad-verifying-keyset.json',\n  'cloudflare-dev': 'https://amp.cloudflare.com/amp-ad-verifying-keyset-dev.json',\n};\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @typedef {{\n *   prefetch: (string|undefined),\n *   preconnect: (string|undefined),\n *   renderStartImplemented: (boolean|undefined),\n *   clientIdScope: (string|undefined),\n *   clientIdCookieName: (string|undefined),\n *   consentHandlingOverride: (boolean|undefined),\n *   remoteHTMLDisabled: (boolean|undefined),\n *   fullWidthHeightRatio: (number|undefined),\n * }}\n */\nlet AdNetworkConfigDef;\n\n/**\n * The config of each ad network.\n * Please keep the list alphabetic order.\n *\n * yourNetworkName: {  // This is the \"type\" attribute of <amp-ad>\n *\n *   // List of URLs for prefetch\n *   prefetch: string|array\n *\n *   // List of hosts for preconnect\n *   preconnect: string|array\n *\n *   // The scope used to provide CIDs to ads\n *   clientIdScope: string\n *\n *   // The cookie name to store the CID. In absence, `clientIdScope` is used.\n *   clientIdCookieName: string\n *\n *   // If the ad network is willing to override the consent handling, which\n *   // by default is blocking ad load until the consent is accepted.\n *   consentHandlingOverride: boolean\n *\n *   // Whether render-start API has been implemented\n *   // We highly recommend all networks to implement the API,\n *   // see details in the README.md\n *   renderStartImplemented: boolean\n *\n *   // The width / height ratio for full width ad units.\n *   // If absent, it means the network does not support full width ad units.\n *   // Example value: 1.2\n *   fullWidthHeightRatio: number\n * }\n *\n * @const {!Object<string, !AdNetworkConfigDef>}}\n */\nexport const adConfig = {\n  '_ping_': {\n    renderStartImplemented: true,\n    clientIdScope: '_PING_',\n    consentHandlingOverride: true,\n  },\n\n  '24smi': {\n    prefetch: 'https://jsn.24smi.net/smi.js',\n    preconnect: 'https://data.24smi.net',\n  },\n\n  'a8': {\n    prefetch: 'https://statics.a8.net/amp/ad.js',\n    renderStartImplemented: true,\n  },\n\n  'a9': {\n    prefetch: 'https://c.amazon-adsystem.com/aax2/assoc.js',\n  },\n\n  'accesstrade': {\n    prefetch: 'https://h.accesstrade.net/js/amp/amp.js',\n  },\n\n  'adagio': {\n    prefetch: 'https://js-ssl.neodatagroup.com/adagio_amp.js',\n    preconnect: [\n      'https://ad-aws-it.neodatagroup.com',\n      'https://tracker.neodatagroup.com',\n    ],\n    renderStartImplemented: true,\n  },\n\n  'adblade': {\n    prefetch: 'https://web.adblade.com/js/ads/async/show.js',\n    preconnect: [\n      'https://staticd.cdn.adblade.com',\n      'https://static.adblade.com',\n    ],\n    renderStartImplemented: true,\n  },\n\n  'adbutler': {\n    prefetch: 'https://servedbyadbutler.com/app.js',\n  },\n\n  'adform': {},\n\n  'adfox': {\n    prefetch: 'https://yastatic.net/pcode/adfox/loader.js',\n    renderStartImplemented: true,\n  },\n\n  'adgeneration': {\n    prefetch: 'https://i.socdm.com/sdk/js/adg-script-loader.js',\n  },\n\n  'adhese': {\n    renderStartImplemented: true,\n  },\n\n  'adincube': {\n    renderStartImplemented: true,\n  },\n\n  'adition': {},\n\n  'adman': {},\n\n  'admanmedia': {\n    renderStartImplemented: true,\n  },\n\n  'admixer': {\n    renderStartImplemented: true,\n    preconnect: [\n      'https://inv-nets.admixer.net',\n      'https://cdn.admixer.net',\n    ],\n  },\n\n  'adocean': {},\n\n  'adpicker': {\n    renderStartImplemented: true,\n  },\n\n  'adplugg': {\n    prefetch: 'https://www.adplugg.com/serve/js/ad.js',\n    renderStartImplemented: true,\n  },\n\n  'adreactor': {},\n\n  'adsense': {\n    prefetch: 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js',\n    preconnect: 'https://googleads.g.doubleclick.net',\n    clientIdScope: 'AMP_ECID_GOOGLE',\n    clientIdCookieName: '_ga',\n    remoteHTMLDisabled: true,\n    masterFrameAccessibleType: 'google_network',\n    fullWidthHeightRatio: 1.2,\n    consentHandlingOverride: true,\n  },\n\n  'adsnative': {\n    prefetch: 'https://static.adsnative.com/static/js/render.v1.js',\n    preconnect: 'https://api.adsnative.com',\n  },\n\n  'adspeed': {\n    preconnect: 'https://g.adspeed.net',\n    renderStartImplemented: true,\n  },\n\n  'adspirit': {},\n\n  'adstir': {\n    prefetch: 'https://js.ad-stir.com/js/adstir_async.js',\n    preconnect: 'https://ad.ad-stir.com',\n  },\n\n  'adtech': {\n    prefetch: 'https://s.aolcdn.com/os/ads/adsWrapper3.js',\n    preconnect: [\n      'https://mads.at.atwola.com',\n      'https://aka-cdn.adtechus.com',\n    ],\n  },\n\n  'adthrive': {\n    prefetch: [\n      'https://www.googletagservices.com/tag/js/gpt.js',\n    ],\n    preconnect: [\n      'https://partner.googleadservices.com',\n      'https://securepubads.g.doubleclick.net',\n      'https://tpc.googlesyndication.com',\n    ],\n    renderStartImplemented: true,\n  },\n\n  'adunity': {\n    preconnect: [\n      'https://content.adunity.com',\n    ],\n    renderStartImplemented: true,\n  },\n\n  'aduptech': {\n    prefetch: 'https://s.d.adup-tech.com/jsapi',\n    preconnect: [\n      'https://d.adup-tech.com',\n      'https://m.adup-tech.com',\n    ],\n    renderStartImplemented: true,\n  },\n\n  'adventive': {\n    preconnect: [\n      'https://ads.adventive.com',\n      'https://amp.adventivedev.com',\n    ],\n    renderStartImplemented: true,\n  },\n\n  'adverline': {\n    prefetch: 'https://ads.adverline.com/richmedias/amp.js',\n    preconnect: [\n      'https://adnext.fr',\n    ],\n    renderStartImplemented: true,\n  },\n\n  'adverticum': {},\n\n  'advertserve': {\n    renderStartImplemented: true,\n  },\n\n  'adzerk': {},\n\n  'affiliateb': {\n    prefetch: 'https://track.affiliate-b.com/amp/a.js',\n    renderStartImplemented: true,\n  },\n\n  'aja': {\n    renderStartImplemented: true,\n    prefetch: 'https://cdn.as.amanad.adtdp.com/sdk/asot-v2.js',\n  },\n\n  'appvador': {\n    prefetch: [\n      'https://cdn.apvdr.com/js/VastAdUnit.min.js',\n      'https://cdn.apvdr.com/js/VideoAd.min.js',\n      'https://cdn.apvdr.com/js/VideoAd3PAS.min.js',\n      'https://cdn.apvdr.com/js/VideoAdAutoPlay.min.js',\n      'https://cdn.apvdr.com/js/VideoAdNative.min.js',\n    ],\n    renderStartImplemented: true,\n  },\n\n  'amoad': {\n    prefetch: [\n      'https://j.amoad.com/js/a.js',\n      'https://j.amoad.com/js/n.js',\n    ],\n    preconnect: [\n      'https://d.amoad.com',\n      'https://i.amoad.com',\n      'https://m.amoad.com',\n      'https://v.amoad.com',\n    ],\n  },\n\n  'appnexus': {\n    prefetch: 'https://acdn.adnxs.com/ast/ast.js',\n    preconnect: 'https://ib.adnxs.com',\n    renderStartImplemented: true,\n  },\n\n  'atomx': {\n    prefetch: 'https://s.ato.mx/p.js',\n  },\n\n  'beopinion': {\n    prefetch: 'https://widget.beopinion.com/sdk.js',\n    preconnect: [\n      'https://t.beopinion.com',\n      'https://s.beopinion.com',\n      'https://data.beopinion.com',\n    ],\n    renderStartImplemented: true,\n  },\n\n  'bidtellect': {},\n\n  'brainy': {},\n\n  'bringhub': {\n    renderStartImplemented: true,\n    preconnect: [\n      'https://static.bh-cdn.com',\n      'https://core-api.bringhub.io',\n    ],\n  },\n\n  'broadstreetads': {\n    prefetch: 'https://cdn.broadstreetads.com/init-2.min.js',\n  },\n\n  'caajainfeed': {\n    prefetch: [\n      'https://cdn.amanad.adtdp.com/sdk/ajaamp.js',\n    ],\n    preconnect: [\n      'https://ad.amanad.adtdp.com',\n    ],\n  },\n\n  'capirs': {\n    renderStartImplemented: true,\n  },\n\n  'caprofitx': {\n    prefetch: [\n      'https://cdn.caprofitx.com/pfx.min.js',\n      'https://cdn.caprofitx.com/tags/amp/profitx_amp.js',\n    ],\n    preconnect: 'https://ad.caprofitx.adtdp.com',\n  },\n\n  'cedato': {\n    renderStartImplemented: true,\n  },\n\n  'chargeads': {},\n\n  'colombia': {\n    prefetch: 'https://static.clmbtech.com/ad/commons/js/colombia-amp.js',\n  },\n\n  'connatix': {\n    renderStartImplemented: true,\n  },\n\n  'contentad': {},\n\n\n  'criteo': {\n    prefetch: 'https://static.criteo.net/js/ld/publishertag.js',\n    preconnect: 'https://cas.criteo.com',\n  },\n\n  'csa': {\n    prefetch: 'https://www.google.com/adsense/search/ads.js',\n  },\n\n  'dable': {\n    preconnect: [\n      'https://static.dable.io',\n      'https://api.dable.io',\n      'https://images.dable.io',\n    ],\n    renderStartImplemented: true,\n  },\n\n  'directadvert': {\n    renderStartImplemented: true,\n  },\n\n  'distroscale': {\n    preconnect: [\n      'https://c.jsrdn.com',\n      'https://s.jsrdn.com',\n      'https://i.jsrdn.com',\n    ],\n    renderStartImplemented: true,\n  },\n\n  'dotandads': {\n    prefetch: 'https://amp.ad.dotandad.com/dotandadsAmp.js',\n    preconnect: 'https://bal.ad.dotandad.com',\n  },\n\n  'eadv': {\n    renderStartImplemented: true,\n    clientIdScope: 'AMP_ECID_EADV',\n    prefetch: [\n      'https://www.eadv.it/track/esr.min.js',\n      'https://www.eadv.it/track/ead.min.js',\n    ],\n  },\n\n  'eas': {\n    prefetch: 'https://amp.emediate.eu/amp.v0.js',\n    renderStartImplemented: true,\n  },\n\n  'engageya': {},\n\n  'epeex': {},\n\n  'eplanning': {\n    prefetch: 'https://us.img.e-planning.net/layers/epl-amp.js',\n  },\n\n  'ezoic': {\n    prefetch: [\n      'https://www.googletagservices.com/tag/js/gpt.js',\n      'https://g.ezoic.net/ezoic/ampad.js',\n    ],\n    clientIdScope: 'AMP_ECID_EZOIC',\n    consentHandlingOverride: true,\n  },\n\n  'f1e': {\n    prefetch: 'https://img.ak.impact-ad.jp/util/f1e_amp.min.js',\n  },\n\n  'f1h': {\n    preconnect: 'https://img.ak.impact-ad.jp',\n    renderStartImplemented: true,\n  },\n\n  'fake': {},\n\n  'felmat': {\n    prefetch: 'https://t.felmat.net/js/fmamp.js',\n    renderStartImplemented: true,\n  },\n\n  'flite': {},\n\n  'fluct': {\n    preconnect: [\n      'https://cdn-fluct.sh.adingo.jp',\n      'https://s.sh.adingo.jp',\n      'https://i.adingo.jp',\n    ],\n  },\n\n  'fusion': {\n    prefetch: 'https://assets.adtomafusion.net/fusion/latest/fusion-amp.min.js',\n  },\n\n  'genieessp': {\n    prefetch: 'https://js.gsspcln.jp/l/amp.js',\n  },\n\n  'giraff': {\n    renderStartImplemented: true,\n  },\n\n  'gmossp': {\n    prefetch: 'https://cdn.gmossp-sp.jp/ads/amp.js',\n  },\n\n  'gumgum': {\n    prefetch: 'https://g2.gumgum.com/javascripts/ad.js',\n    renderStartImplemented: true,\n  },\n\n  'holder': {\n    prefetch: 'https://i.holder.com.ua/js2/holder/ajax/ampv1.js',\n    preconnect: 'https://h.holder.com.ua',\n    renderStartImplemented: true,\n  },\n\n  'ibillboard': {},\n\n  'imedia': {\n    prefetch: 'https://i.imedia.cz/js/im3.js',\n    renderStartImplemented: true,\n  },\n\n  'imobile': {\n    prefetch: 'https://spamp.i-mobile.co.jp/script/amp.js',\n    preconnect: 'https://spad.i-mobile.co.jp',\n  },\n  'imonomy': {\n    renderStartImplemented: true,\n  },\n  'improvedigital': {},\n\n  'industrybrains': {\n    prefetch: 'https://web.industrybrains.com/js/ads/async/show.js',\n    preconnect: [\n      'https://staticd.cdn.industrybrains.com',\n      'https://static.industrybrains.com',\n    ],\n    renderStartImplemented: true,\n  },\n\n  'inmobi': {\n    prefetch: 'https://cf.cdn.inmobi.com/ad/inmobi.secure.js',\n    renderStartImplemented: true,\n  },\n\n  'innity': {\n    prefetch: 'https://cdn.innity.net/admanager.js',\n    preconnect: 'https://as.innity.com',\n    renderStartImplemented: true,\n  },\n\n  'ix': {\n    prefetch: [\n      'https://js-sec.indexww.com/apl/amp.js',\n    ],\n    preconnect: 'https://as-sec.casalemedia.com',\n    renderStartImplemented: true,\n  },\n\n  'kargo': {},\n\n  'kiosked': {\n    renderStartImplemented: true,\n  },\n\n  'kixer': {\n    prefetch: 'https://cdn.kixer.com/ad/load.js',\n    renderStartImplemented: true,\n  },\n\n  'kuadio': {},\n\n  'ligatus': {\n    prefetch: 'https://ssl.ligatus.com/render/ligrend.js',\n    renderStartImplemented: true,\n  },\n\n  'lockerdome': {\n    prefetch: 'https://cdn2.lockerdomecdn.com/_js/amp.js',\n    renderStartImplemented: true,\n  },\n\n  'loka': {\n    prefetch: 'https://loka-cdn.akamaized.net/scene/amp.js',\n    preconnect: [\n      'https://scene-front.lokaplatform.com',\n      'https://loka-materials.akamaized.net',\n    ],\n    renderStartImplemented: true,\n  },\n\n  'mads': {\n    prefetch: 'https://eu2.madsone.com/js/tags.js',\n  },\n\n  'mantis-display': {\n    prefetch: 'https://assets.mantisadnetwork.com/mantodea.min.js',\n    preconnect: [\n      'https://mantodea.mantisadnetwork.com',\n      'https://res.cloudinary.com',\n      'https://resize.mantisadnetwork.com',\n    ],\n  },\n\n  'mantis-recommend': {\n    prefetch: 'https://assets.mantisadnetwork.com/recommend.min.js',\n    preconnect: [\n      'https://mantodea.mantisadnetwork.com',\n      'https://resize.mantisadnetwork.com',\n    ],\n  },\n\n  'mediaimpact': {\n    prefetch: 'https://ec-ns.sascdn.com/diff/251/pages/amp_default.js',\n    preconnect: [\n      'https://ww251.smartadserver.com',\n      'https://static.sascdn.com/',\n    ],\n    renderStartImplemented: true,\n  },\n\n  'medianet': {\n    preconnect: 'https://contextual.media.net',\n    renderStartImplemented: true,\n  },\n\n  'mediavine': {\n    prefetch: 'https://amp.mediavine.com/wrapper.min.js',\n    preconnect: [\n      'https://partner.googleadservices.com',\n      'https://securepubads.g.doubleclick.net',\n      'https://tpc.googlesyndication.com',\n    ],\n    renderStartImplemented: true,\n    consentHandlingOverride: true,\n  },\n\n  'medyanet': {\n    renderStartImplemented: true,\n  },\n\n  'meg': {\n    renderStartImplemented: true,\n  },\n\n  'microad': {\n    prefetch: 'https://j.microad.net/js/camp.js',\n    preconnect: [\n      'https://s-rtb.send.microad.jp',\n      'https://s-rtb.send.microadinc.com',\n      'https://cache.send.microad.jp',\n      'https://cache.send.microadinc.com',\n      'https://deb.send.microad.jp',\n    ],\n  },\n\n  'miximedia': {\n    renderStartImplemented: true,\n  },\n\n  'mixpo': {\n    prefetch: 'https://cdn.mixpo.com/js/loader.js',\n    preconnect: [\n      'https://player1.mixpo.com',\n      'https://player2.mixpo.com',\n    ],\n  },\n\n  'monetizer101': {\n    renderStartImplemented: true,\n  },\n\n  'mytarget': {\n    prefetch: 'https://ad.mail.ru/static/ads-async.js',\n    renderStartImplemented: true,\n  },\n\n  'mywidget': {\n    preconnect: 'https://likemore-fe.go.mail.ru',\n    prefetch: 'https://likemore-go.imgsmail.ru/widget_amp.js',\n    renderStartImplemented: true,\n  },\n\n  'nativo': {\n    prefetch: 'https://s.ntv.io/serve/load.js',\n  },\n\n  'navegg': {\n    renderStartImplemented: true,\n  },\n\n  'nend': {\n    prefetch: 'https://js1.nend.net/js/amp.js',\n    preconnect: [\n      'https://output.nend.net',\n      'https://img1.nend.net',\n    ],\n  },\n\n  'netletix': {\n    preconnect: [\n      'https://call.netzathleten-media.de',\n    ],\n    renderStartImplemented: true,\n  },\n\n  'noddus': {\n    prefetch: 'https://noddus.com/amp_loader.js',\n    renderStartImplemented: true,\n  },\n\n  'nokta': {\n    prefetch: 'https://static.virgul.com/theme/mockups/noktaamp/ampjs.js',\n    renderStartImplemented: true,\n  },\n\n  'openadstream': {},\n\n  'openx': {\n    prefetch: 'https://www.googletagservices.com/tag/js/gpt.js',\n    preconnect: [\n      'https://partner.googleadservices.com',\n      'https://securepubads.g.doubleclick.net',\n      'https://tpc.googlesyndication.com',\n    ],\n    renderStartImplemented: true,\n  },\n\n  'outbrain': {\n    renderStartImplemented: true,\n    prefetch: 'https://widgets.outbrain.com/widgetAMP/outbrainAMP.min.js',\n    preconnect: [\n      'https://odb.outbrain.com',\n    ],\n    consentHandlingOverride: true,\n  },\n\n  'pixels': {\n    prefetch: 'https://cdn.adsfactor.net/amp/pixels-amp.min.js',\n    clientIdCookieName: '__AF',\n    renderStartImplemented: true,\n  },\n\n  'plista': {},\n\n  'polymorphicads': {\n    prefetch: 'https://www.polymorphicads.jp/js/amp.js',\n    preconnect: [\n      'https://img.polymorphicads.jp',\n      'https://ad.polymorphicads.jp',\n    ],\n    renderStartImplemented: true,\n  },\n\n  'popin': {\n    renderStartImplemented: true,\n  },\n\n  'postquare': {},\n\n  'pubexchange': {},\n\n  'pubguru': {\n    renderStartImplemented: true,\n  },\n\n  'pubmatic': {\n    prefetch: 'https://ads.pubmatic.com/AdServer/js/amp.js',\n  },\n\n  'pubmine': {\n    prefetch: [\n      'https://s.pubmine.com/head.js',\n      'https://s.pubmine.com/showad.js',\n    ],\n    preconnect: 'https://delivery.g.switchadhub.com',\n    renderStartImplemented: true,\n  },\n\n  'pulsepoint': {\n    prefetch: 'https://ads.contextweb.com/TagPublish/getjs.static.js',\n    preconnect: 'https://tag.contextweb.com',\n  },\n\n  'purch': {\n    prefetch: 'https://ramp.purch.com/serve/creative_amp.js',\n    renderStartImplemented: true,\n  },\n\n  'quoraad': {\n    prefetch: 'https://a.quora.com/amp_ad.js',\n    preconnect: 'https://ampad.quora.com',\n    renderStartImplemented: true,\n  },\n\n  'realclick': {\n    renderStartImplemented: true,\n  },\n\n  'relap': {\n    renderStartImplemented: true,\n  },\n\n  'revcontent': {\n    prefetch: 'https://labs-cdn.revcontent.com/build/amphtml/revcontent.amp.min.js',\n    preconnect: [\n      'https://trends.revcontent.com',\n      'https://cdn.revcontent.com',\n      'https://img.revcontent.com',\n    ],\n    renderStartImplemented: true,\n  },\n\n  'revjet': {\n    prefetch: 'https://cdn.revjet.com/~cdn/JS/03/amp.js',\n    renderStartImplemented: true,\n  },\n\n  'rubicon': {},\n\n  'sekindo': {\n    renderStartImplemented: true,\n  },\n\n  'sharethrough': {\n    renderStartImplemented: true,\n  },\n\n  'sklik': {\n    prefetch: 'https://c.imedia.cz/js/amp.js',\n  },\n\n  'slimcutmedia': {\n    preconnect: [\n      'https://sb.freeskreen.com',\n      'https://static.freeskreen.com',\n      'https://video.freeskreen.com',\n    ],\n    renderStartImplemented: true,\n  },\n\n  'smartadserver': {\n    prefetch: 'https://ec-ns.sascdn.com/diff/js/amp.v0.js',\n    preconnect: 'https://static.sascdn.com',\n    renderStartImplemented: true,\n  },\n\n  'smartclip': {\n    prefetch: 'https://cdn.smartclip.net/amp/amp.v0.js',\n    preconnect: 'https://des.smartclip.net',\n    renderStartImplemented: true,\n  },\n\n  'smi2': {\n    renderStartImplemented: true,\n  },\n\n  'sogouad': {\n    prefetch: 'https://theta.sogoucdn.com/wap/js/aw.js',\n    renderStartImplemented: true,\n  },\n\n  'sortable': {\n    prefetch: 'https://www.googletagservices.com/tag/js/gpt.js',\n    preconnect: [\n      'https://tags-cdn.deployads.com',\n      'https://partner.googleadservices.com',\n      'https://securepubads.g.doubleclick.net',\n      'https://tpc.googlesyndication.com',\n    ],\n    renderStartImplemented: true,\n  },\n\n  'sovrn': {\n    prefetch: 'https://ap.lijit.com/www/sovrn_amp/sovrn_ads.js',\n  },\n\n  'spotx': {\n    preconnect: 'https://js.spotx.tv',\n    renderStartImplemented: true,\n  },\n\n  'sunmedia': {\n    prefetch: 'https://vod.addevweb.com/sunmedia/amp/ads/sunmedia.js',\n    preconnect: 'https://static.addevweb.com',\n    renderStartImplemented: true,\n  },\n\n  'swoop': {\n    prefetch: 'https://www.swoop-amp.com/amp.js',\n    preconnect: [\n      'https://www.swpsvc.com',\n      'https://client.swpcld.com',\n    ],\n    renderStartImplemented: true,\n  },\n\n  'taboola': {},\n\n  'teads': {\n    prefetch: 'https://cdn.teads.tv/media/format/v3/teads-format.min.js',\n    preconnect: [\n      'https://cdn2.teads.tv',\n      'https://a.teads.tv',\n      'https://t.teads.tv',\n      'https://r.teads.tv',\n    ],\n    consentHandlingOverride: true,\n  },\n\n  'triplelift': {},\n\n  'trugaze': {\n    clientIdScope: '__tg_amp',\n    renderStartImplemented: true,\n  },\n\n  'uas': {\n    prefetch: 'https://ads.pubmatic.com/AdServer/js/phoenix.js',\n  },\n\n  'uzou': {\n    preconnect: [\n      'https://speee-ad.akamaized.net',\n    ],\n    renderStartImplemented: true,\n  },\n\n  'unruly': {\n    prefetch: 'https://video.unrulymedia.com/amp-demo/native-loader.js',\n    renderStartImplemented: true,\n  },\n\n  'valuecommerce': {\n    prefetch: 'https://amp.valuecommerce.com/amp_bridge.js',\n    preconnect: [\n      'https://ad.jp.ap.valuecommerce.com',\n      'https://ad.omks.valuecommerce.com',\n    ],\n    renderStartImplemented: true,\n  },\n\n  'videointelligence': {\n    preconnect: 'https://s.vi-serve.com',\n    renderStartImplemented: true,\n  },\n\n  'videonow': {\n    renderStartImplemented: true,\n  },\n\n  'viralize': {\n    renderStartImplemented: true,\n  },\n\n  'vmfive': {\n    prefetch: 'https://man.vm5apis.com/dist/adn-web-sdk.js',\n    preconnect: [\n      'https://vawpro.vm5apis.com',\n      'https://vahfront.vm5apis.com',\n    ],\n    renderStartImplemented: true,\n  },\n\n  'webediads': {\n    prefetch: 'https://eu1.wbdds.com/amp.min.js',\n    preconnect: [\n      'https://goutee.top',\n      'https://mediaathay.org.uk',\n    ],\n    renderStartImplemented: true,\n  },\n\n  'weborama-display': {\n    prefetch: [\n      'https://cstatic.weborama.fr/js/advertiserv2/adperf_launch_1.0.0_scrambled.js',\n      'https://cstatic.weborama.fr/js/advertiserv2/adperf_core_1.0.0_scrambled.js',\n    ],\n  },\n\n  'widespace': {},\n\n  'wisteria': {\n    renderStartImplemented: true,\n  },\n\n  'wpmedia': {\n    prefetch: 'https://std.wpcdn.pl/wpjslib/wpjslib-amp.js',\n    preconnect: [\n      'https://www.wp.pl',\n      'https://v.wpimg.pl',\n    ],\n    renderStartImplemented: true,\n  },\n\n  'xlift': {\n    prefetch: 'https://cdn.x-lift.jp/resources/common/xlift_amp.js',\n    renderStartImplemented: true,\n  },\n\n  'yahoo': {\n    prefetch: 'https://s.yimg.com/os/ampad/display.js',\n    preconnect: 'https://us.adserver.yahoo.com',\n  },\n\n  'yahoojp': {\n    prefetch: [\n      'https://s.yimg.jp/images/listing/tool/yads/ydn/amp/amp.js',\n      'https://yads.c.yimg.jp/js/yads.js',\n    ],\n    preconnect: 'https://yads.yahoo.co.jp',\n  },\n\n  'yandex': {\n    prefetch: 'https://yastatic.net/partner-code/loaders/context_amp.js',\n    renderStartImplemented: true,\n  },\n\n  'yengo': {\n    renderStartImplemented: true,\n  },\n\n  'yieldbot': {\n    prefetch: [\n      'https://cdn.yldbt.com/js/yieldbot.intent.amp.js',\n      'https://msg.yldbt.com/js/ybmsg.html',\n    ],\n    preconnect: 'https://i.yldbt.com',\n  },\n\n  'yieldmo': {\n    prefetch: 'https://static.yieldmo.com/ym.1.js',\n    preconnect: [\n      'https://s.yieldmo.com',\n      'https://ads.yieldmo.com',\n    ],\n    renderStartImplemented: true,\n  },\n\n  'yieldone': {\n    prefetch: 'https://img.ak.impact-ad.jp/ic/pone/commonjs/yone-amp.js',\n  },\n\n  'yieldpro': {\n    preconnect: 'https://creatives.yieldpro.eu',\n    renderStartImplemented: true,\n  },\n\n  'zedo': {\n    prefetch: 'https://ss3.zedo.com/gecko/tag/Gecko.amp.min.js',\n    renderStartImplemented: true,\n  },\n\n  'zergnet': {},\n\n  'zucks': {\n    preconnect: [\n      'https://j.zucks.net.zimg.jp',\n      'https://sh.zucks.net',\n      'https://k.zucks.net',\n      'https://static.zucks.net.zimg.jp',\n    ],\n  },\n\n};\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  ExperimentInfo, // eslint-disable-line no-unused-vars\n  forceExperimentBranch,\n  getExperimentBranch,\n  randomlySelectUnsetExperiments,\n} from '../../../src/experiments';\nimport {\n  addExperimentIdToElement,\n} from './traffic-experiments';\n\n/**\n * Attempts to select into experiment and forces branch if selected.\n * @param {!Window} win\n * @param {!Element} element\n * @param {!Array<string>} branches\n * @param {string} expName\n * @param {boolean=} optAddExpIdToElement\n */\nexport function selectAndSetExperiments(\n  win, element, branches, expName, optAddExpIdToElement) {\n  const experimentId = expUtils.maybeSelectExperiment(\n      win, element, branches, expName);\n  if (!!experimentId) {\n    addExperimentIdToElement(optAddExpIdToElement ?\n      experimentId : undefined, element);\n    forceExperimentBranch(win, expName, experimentId);\n  }\n  return experimentId;\n}\n\nexport class ExperimentUtils {\n  /**\n   * @param {!Window} win\n   * @param {!Element} element\n   * @param {!Array<string>} selectionBranches\n   * @param {string} experimentName\n   */\n  maybeSelectExperiment(\n    win, element, selectionBranches, experimentName) {\n    const experimentInfoMap =\n    /** @type {!Object<string, !ExperimentInfo>} */ ({});\n    experimentInfoMap[experimentName] = {\n      isTrafficEligible: () => true,\n      branches: selectionBranches,\n    };\n    randomlySelectUnsetExperiments(win, experimentInfoMap);\n    return getExperimentBranch(win, experimentName);\n  }\n}\n\n/**\n * ExperimentUtils singleton.\n * @type {!ExperimentUtils}\n*/\nconst expUtils = new ExperimentUtils();\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Machinery for doing \"traffic-level\" experiments.  That is, rather than\n * a single user choosing to opt-in to an experimental version of a module,\n * this framework allows you to do randomized, controlled experiments on all\n * AMP page loads to, for example, test relative performance or look for\n * impacts on click-throughs.\n */\n\nimport {\n  EXPERIMENT_ATTRIBUTE,\n  mergeExperimentIds,\n} from './utils';\nimport {\n  ExperimentInfo, // eslint-disable-line no-unused-vars\n  isExperimentOn,\n} from '../../../src/experiments';\nimport {Services} from '../../../src/services';\nimport {parseQueryString} from '../../../src/url';\n\n/** @typedef {{\n *    control: string,\n *    experiment: string\n *  }} */\nexport let A4aExperimentBranches;\n\n/** @type {string} @private */\nexport const MANUAL_EXPERIMENT_ID = '117152632';\n\n/**\n * @param {!Window} win\n * @param {!Element} element Ad tag Element.\n * @return {?string} experiment extracted from page url.\n */\nexport function extractUrlExperimentId(win, element) {\n  const expParam = Services.viewerForDoc(element).getParam('exp') ||\n    parseQueryString(win.location.search)['exp'];\n  if (!expParam) {\n    return null;\n  }\n  // Allow for per type experiment control with Doubleclick key set for 'da'\n  // and AdSense using 'aa'.  Fallback to 'a4a' if type specific is missing.\n  const expKeys = [\n    (element.getAttribute('type') || '').toLowerCase() == 'doubleclick' ?\n      'da' : 'aa',\n    'a4a',\n  ];\n  let arg;\n  let match;\n  expKeys.forEach(key => arg = arg ||\n    ((match = new RegExp(`(?:^|,)${key}:(-?\\\\d+)`).exec(expParam)) &&\n      match[1]));\n  return arg || null;\n}\n\n/**\n * Sets of experiment IDs can be attached to Elements via attributes.  In\n * that case, we encode them as a string containing a comma-separated list\n * of experiment IDs.  This parses a comma-separated list from a string into\n * a list of ID strings.  If the input string is empty or null, this returns\n * the empty list.  This does no validity checking on the ID formats -- for\n * that, use validateExperimentIds.\n *\n * @param {?string} idString  String to parse.\n * @return {!Array<string>}  List of experiment IDs (possibly empty).\n * @see validateExperimentIds\n */\nexport function parseExperimentIds(idString) {\n  if (idString) {\n    return idString.split(',');\n  }\n  return [];\n}\n\n/**\n * Checks whether the given element is a member of the given experiment branch.\n * I.e., whether the element's data-experiment-id attribute contains the id\n * value (possibly because the host page URL contains a 'exp=a4a:X' parameter\n * and #maybeSetExperimentFromUrl has added the appropriate EID).\n *\n * @param {!Element} element Element to check for membership in a specific\n *   experiment.\n * @param {?string} id Experiment ID to check for on `element`.\n * @return {boolean}\n */\nexport function isInExperiment(element, id) {\n  return parseExperimentIds(element.getAttribute(EXPERIMENT_ATTRIBUTE)).some(\n      x => { return x === id; });\n}\n\n/**\n * Checks whether the given element is a member of the 'manually triggered\n * \"experiment\" branch'.  I.e., whether the element's data-experiment-id\n * attribute contains the MANUAL_EXPERIMENT_ID value (hopefully because the\n * user has manually specified 'exp=a4a:-1' in the host page URL and\n * #maybeSetExperimentFromUrl has added it).\n *\n * @param {!Element} element  Element to check for manual experiment membership.\n * @return {boolean}\n */\nexport function isInManualExperiment(element) {\n  return isInExperiment(element, MANUAL_EXPERIMENT_ID);\n}\n\n/**\n * Predicate to check whether A4A has launched yet or not.\n * If it has not yet launched, then the experimental branch serves A4A, and\n * control/filler do not. If it has not, then the filler and control branch do\n * serve A4A, and the experimental branch does not.\n *\n * @param {!Window} win  Host window for the ad.\n * @param {!Element} element  Element to check for pre-launch membership.\n * @return {boolean}\n */\nexport function hasLaunched(win, element) {\n  switch (element.getAttribute('type')) {\n    case 'adsense':\n      return isExperimentOn(win, 'a4aFastFetchAdSenseLaunched');\n    case 'doubleclick':\n      return isExperimentOn(win, 'a4aFastFetchDoubleclickLaunched');\n    default:\n      return false;\n  }\n}\n\n/**\n * Checks that all string experiment IDs in a list are syntactically valid\n * (integer base 10).\n *\n * @param {!Array<string>} idList  List of experiment IDs.  Can be empty.\n * @return {boolean} Whether all list elements are valid experiment IDs.\n */\nexport function validateExperimentIds(idList) {\n  return idList.every(id => { return !isNaN(parseInt(id, 10)); });\n}\n\n/**\n * Adds a single experimentID to an element iff it's a valid experiment ID.\n * No-ops if the experimentId is undefined.\n *\n * @param {string|undefined} experimentId  ID to add to the element.\n * @param {Element} element to add the experiment ID to.\n */\nexport function addExperimentIdToElement(experimentId, element) {\n  if (!experimentId) {\n    return;\n  }\n  const currentEids = element.getAttribute(EXPERIMENT_ATTRIBUTE);\n  if (currentEids && validateExperimentIds(parseExperimentIds(currentEids))) {\n    element.setAttribute(EXPERIMENT_ATTRIBUTE,\n        mergeExperimentIds([experimentId], currentEids));\n  } else {\n    element.setAttribute(EXPERIMENT_ATTRIBUTE, experimentId);\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {{name: string, value: (string|number|null)}} */\nexport let QueryParameterDef;\n\n/**\n * Builds a URL from query parameters, truncating to a maximum length if\n * necessary.\n * @param {string} baseUrl scheme, domain, and path for the URL.\n * @param {!Object<string,string|number|null>} queryParams query parameters for\n *     the URL.\n * @param {number} maxLength length to truncate the URL to if necessary.\n * @param {?QueryParameterDef=} opt_truncationQueryParam query parameter to\n *     append to the URL iff any query parameters were truncated.\n * @return {string} the fully constructed URL.\n */\nexport function buildUrl(\n  baseUrl, queryParams, maxLength, opt_truncationQueryParam) {\n  const encodedParams = [];\n  const encodedTruncationParam =\n      opt_truncationQueryParam &&\n      !(opt_truncationQueryParam.value == null ||\n      opt_truncationQueryParam.value === '') ?\n        encodeURIComponent(opt_truncationQueryParam.name) + '=' +\n      encodeURIComponent(String(opt_truncationQueryParam.value)) :\n        null;\n  let capacity = maxLength - baseUrl.length;\n  if (encodedTruncationParam) {\n    capacity -= encodedTruncationParam.length + 1;\n  }\n  const keys = Object.keys(queryParams);\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    const value = queryParams[key];\n    if (value == null || value === '') {\n      continue;\n    }\n    const encodedNameAndSep = encodeURIComponent(key) + '=';\n    const encodedValue = encodeURIComponent(String(value));\n    const fullLength = encodedNameAndSep.length + encodedValue.length + 1;\n    if (fullLength > capacity) {\n      const truncatedValue = encodedValue\n          .substr(0, capacity - encodedNameAndSep.length - 1)\n      // Don't end with a partially truncated escape sequence\n          .replace(/%\\w?$/, '');\n      if (truncatedValue) {\n        encodedParams.push(encodedNameAndSep + truncatedValue);\n      }\n      if (encodedTruncationParam) {\n        encodedParams.push(encodedTruncationParam);\n      }\n      break;\n    }\n    encodedParams.push(encodedNameAndSep + encodedValue);\n    capacity -= fullLength;\n  }\n  if (!encodedParams.length) {\n    return baseUrl;\n  }\n  return baseUrl + '?' + encodedParams.join('&');\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {DomFingerprint} from '../../../src/utils/dom-fingerprint';\nimport {Services} from '../../../src/services';\nimport {buildUrl} from './url-builder';\nimport {dev} from '../../../src/log';\nimport {dict} from '../../../src/utils/object';\nimport {getBinaryType} from '../../../src/experiments';\nimport {getMode} from '../../../src/mode';\nimport {getOrCreateAdCid} from '../../../src/ad-cid';\nimport {getTimingDataSync} from '../../../src/service/variable-source';\nimport {\n  isExperimentOn,\n  toggleExperiment,\n} from '../../../src/experiments';\nimport {parseJson} from '../../../src/json';\nimport {whenUpgradedToCustomElement} from '../../../src/dom';\n\n/** @type {string}  */\nconst AMP_ANALYTICS_HEADER = 'X-AmpAnalytics';\n\n/** @const {number} */\nconst MAX_URL_LENGTH = 16384;\n\n/** @enum {string} */\nconst AmpAdImplementation = {\n  AMP_AD_XHR_TO_IFRAME: '2',\n  AMP_AD_XHR_TO_IFRAME_OR_AMP: '3',\n  AMP_AD_IFRAME_GET: '5',\n};\n\n/** @const {!Object} */\nexport const ValidAdContainerTypes = {\n  'AMP-CAROUSEL': 'ac',\n  'AMP-FX-FLYING-CARPET': 'fc',\n  'AMP-LIGHTBOX': 'lb',\n  'AMP-STICKY-AD': 'sa',\n};\n\n/**\n * See `VisibilityState` enum.\n * @const {!Object<string, string>}\n */\nconst visibilityStateCodes = {\n  'visible': '1',\n  'hidden': '2',\n  'prerender': '3',\n  'unloaded': '5',\n};\n\n/** @const {string} */\nexport const QQID_HEADER = 'X-QQID';\n\n/**\n * Element attribute that stores experiment IDs.\n *\n * Note: This attribute should be used only for tracking experimental\n * implementations of AMP tags, e.g., by AMPHTML implementors.  It should not be\n * added by a publisher page.\n *\n * @const {string}\n * @visibleForTesting\n */\nexport const EXPERIMENT_ATTRIBUTE = 'data-experiment-id';\n\n/** @typedef {{urls: !Array<string>}}\n */\nexport let AmpAnalyticsConfigDef;\n\n/**\n * @typedef {{instantLoad: boolean, writeInBody: boolean}}\n */\nexport let NameframeExperimentConfig;\n\n/**\n * @const {!./url-builder.QueryParameterDef}\n * @visibleForTesting\n */\nexport const TRUNCATION_PARAM = {name: 'trunc', value: '1'};\n\n/** @const {Object} */\nconst CDN_PROXY_REGEXP = /^https:\\/\\/([a-zA-Z0-9_-]+\\.)?cdn\\.ampproject\\.org((\\/.*)|($))+/;\n\n/**\n * Returns the value of navigation start using the performance API or 0 if not\n * supported by the browser.\n * Feature detection is used for safety on browsers that do not support the\n * performance API.\n * @param {!Window} win\n * @return {number}\n */\nfunction getNavStart(win) {\n  return (win['performance'] && win['performance']['timing'] &&\n      win['performance']['timing']['navigationStart']) || 0;\n}\n\n/**\n * Check whether Google Ads supports the A4A rendering pathway is valid for the\n * environment by ensuring native crypto support and page originated in the\n * {@code cdn.ampproject.org} CDN <em>or</em> we must be running in local\n * dev mode.\n *\n * @param {!Window} win  Host window for the ad.\n * @return {boolean}  Whether Google Ads should attempt to render via the A4A\n *   pathway.\n */\nexport function isGoogleAdsA4AValidEnvironment(win) {\n  return supportsNativeCrypto(win) && (\n    !!isCdnProxy(win) || getMode(win).localDev || getMode(win).test);\n}\n\n/**\n * Checks whether native crypto is supported for win.\n * @param {!Window} win  Host window for the ad.\n * @return {boolean} Whether native crypto is supported.\n */\nexport function supportsNativeCrypto(win) {\n  return win.crypto && (win.crypto.subtle || win.crypto.webkitSubtle);\n}\n\n/**\n * @param {!AMP.BaseElement} ampElement The element on whose lifecycle this\n *    reporter will be reporting.\n * @return {boolean} whether reporting is enabled for this element\n */\nexport function isReportingEnabled(ampElement) {\n  // Carve-outs: We only want to enable profiling pingbacks when:\n  //   - The ad is from one of the Google networks (AdSense or Doubleclick).\n  //   - The ad slot is in the A4A-vs-3p amp-ad control branch (either via\n  //     internal, client-side selection or via external, Google Search\n  //     selection).\n  //   - We haven't turned off profiling via the rate controls in\n  //     build-system/global-config/{canary,prod}-config.json\n  // If any of those fail, we use the `BaseLifecycleReporter`, which is a\n  // a no-op (sends no pings).\n  const type = ampElement.element.getAttribute('type');\n  const {win} = ampElement;\n  // In local dev mode, neither the canary nor prod config files is available,\n  // so manually set the profiling rate, for testing/dev.\n  if (getMode(ampElement.win).localDev && !getMode(ampElement.win).test) {\n    toggleExperiment(win, 'a4aProfilingRate', true, true);\n  }\n  return (type == 'doubleclick' || type == 'adsense') &&\n      isExperimentOn(win, 'a4aProfilingRate');\n}\n\n/**\n * Has side-effect of incrementing ifi counter on window.\n * @param {!../../../extensions/amp-a4a/0.1/amp-a4a.AmpA4A} a4a\n * @param {!Array<string>=} opt_experimentIds Any experiments IDs (in addition\n *     to those specified on the ad element) that should be included in the\n *     request.\n * @return {!Object<string,null|number|string>} block level parameters\n */\nexport function googleBlockParameters(a4a, opt_experimentIds) {\n  const {element: adElement, win} = a4a;\n  const slotRect = a4a.getPageLayoutBox();\n  const iframeDepth = iframeNestingDepth(win);\n  const enclosingContainers = getEnclosingContainerTypes(adElement);\n  let eids = adElement.getAttribute('data-experiment-id');\n  if (opt_experimentIds) {\n    eids = mergeExperimentIds(opt_experimentIds, eids);\n  }\n  return {\n    'adf': DomFingerprint.generate(adElement),\n    'nhd': iframeDepth,\n    'eid': eids,\n    'adx': slotRect.left,\n    'ady': slotRect.top,\n    'oid': '2',\n    'act': enclosingContainers.length ? enclosingContainers.join() : null,\n  };\n}\n\n/**\n * @param {!Window} win\n * @param {string} type matching typing attribute.\n * @param {function(!Element):string} groupFn\n * @return {!Promise<!Object<string,!Array<!Promise<!../../../src/base-element.BaseElement>>>>}\n */\nexport function groupAmpAdsByType(win, type, groupFn) {\n  // Look for amp-ad elements of correct type or those contained within\n  // standard container type.  Note that display none containers will not be\n  // included as they will never be measured.\n  // TODO(keithwrightbos): what about slots that become measured due to removal\n  // of display none (e.g. user resizes viewport and media selector makes\n  // visible).\n  const ampAdSelector =\n      r => r.element./*OK*/querySelector(`amp-ad[type=${type}]`);\n  return Services.resourcesForDoc(win.document).getMeasuredResources(win,\n      r => {\n        const isAmpAdType = r.element.tagName == 'AMP-AD' &&\n          r.element.getAttribute('type') == type;\n        if (isAmpAdType) {\n          return true;\n        }\n        const isAmpAdContainerElement =\n          Object.keys(ValidAdContainerTypes).includes(r.element.tagName) &&\n          !!ampAdSelector(r);\n        return isAmpAdContainerElement;\n      })\n      // Need to wait on any contained element resolution followed by build\n      // of child ad.\n      .then(resources => Promise.all(resources.map(\n          resource => {\n            if (resource.element.tagName == 'AMP-AD') {\n              return resource.element;\n            }\n            // Must be container element so need to wait for child amp-ad to\n            // be upgraded.\n            return whenUpgradedToCustomElement(\n                dev().assertElement(ampAdSelector(resource)));\n          })))\n      // Group by networkId.\n      .then(elements => elements.reduce((result, element) => {\n        const groupId = groupFn(element);\n        (result[groupId] || (result[groupId] = [])).push(element.getImpl());\n        return result;\n      }, {}));\n}\n\n/**\n * @param {! ../../../extensions/amp-a4a/0.1/amp-a4a.AmpA4A} a4a\n * @param {number} startTime\n * @return {!Promise<!Object<string,null|number|string>>}\n */\nexport function googlePageParameters(a4a, startTime) {\n  const {win} = a4a;\n  const ampDoc = a4a.getAmpDoc();\n  return Promise.all([\n    getOrCreateAdCid(ampDoc, 'AMP_ECID_GOOGLE', '_ga'),\n    Services.viewerForDoc(ampDoc).getReferrerUrl()])\n      .then(promiseResults => {\n        const clientId = promiseResults[0];\n        const documentInfo = Services.documentInfoForDoc(ampDoc);\n        // Read by GPT for GA/GPT integration.\n        win.gaGlobal = win.gaGlobal ||\n        {cid: clientId, hid: documentInfo.pageViewId};\n        const {screen} = win;\n        const viewport = Services.viewportForDoc(ampDoc);\n        const viewportRect = viewport.getRect();\n        const viewportSize = viewport.getSize();\n        const visibilityState = Services.viewerForDoc(ampDoc)\n            .getVisibilityState();\n        return {\n          'is_amp': a4a.isXhrAllowed() ?\n            AmpAdImplementation.AMP_AD_XHR_TO_IFRAME_OR_AMP :\n            AmpAdImplementation.AMP_AD_IFRAME_GET,\n          'amp_v': '$internalRuntimeVersion$',\n          'd_imp': '1',\n          'c': getCorrelator(win, ampDoc, clientId),\n          'ga_cid': win.gaGlobal.cid || null,\n          'ga_hid': win.gaGlobal.hid || null,\n          'dt': startTime,\n          'biw': viewportRect.width,\n          'bih': viewportRect.height,\n          'u_aw': screen ? screen.availWidth : null,\n          'u_ah': screen ? screen.availHeight : null,\n          'u_cd': screen ? screen.colorDepth : null,\n          'u_w': screen ? screen.width : null,\n          'u_h': screen ? screen.height : null,\n          'u_tz': -new Date().getTimezoneOffset(),\n          'u_his': getHistoryLength(win),\n          'isw': win != win.top ? viewportSize.width : null,\n          'ish': win != win.top ? viewportSize.height : null,\n          'art': getAmpRuntimeTypeParameter(win),\n          'vis': visibilityStateCodes[visibilityState] || '0',\n          'scr_x': viewport.getScrollLeft(),\n          'scr_y': viewport.getScrollTop(),\n          'bc': getBrowserCapabilitiesBitmap(win) || null,\n          'debug_experiment_id':\n              (/(?:#|,)deid=([\\d,]+)/i.exec(win.location.hash) || [])[1] ||\n                  null,\n          'url': documentInfo.canonicalUrl,\n          'top': win != win.top ? topWindowUrlOrDomain(win) : null,\n          'loc': win.location.href == documentInfo.canonicalUrl ?\n            null : win.location.href,\n          'ref': promiseResults[1] || null,\n        };\n      });\n}\n\n/**\n * @param {!../../../extensions/amp-a4a/0.1/amp-a4a.AmpA4A} a4a\n * @param {string} baseUrl\n * @param {number} startTime\n * @param {!Object<string,null|number|string>} parameters\n * @param {!Array<string>=} opt_experimentIds Any experiments IDs (in addition\n *     to those specified on the ad element) that should be included in the\n *     request.\n * @return {!Promise<string>}\n */\nexport function googleAdUrl(\n  a4a, baseUrl, startTime, parameters, opt_experimentIds) {\n  // TODO: Maybe add checks in case these promises fail.\n  const blockLevelParameters = googleBlockParameters(a4a, opt_experimentIds);\n  return googlePageParameters(a4a, startTime)\n      .then(pageLevelParameters => {\n        Object.assign(parameters, blockLevelParameters, pageLevelParameters);\n        return truncAndTimeUrl(baseUrl, parameters, startTime);\n      });\n}\n\n/**\n * @param {string} baseUrl\n * @param {!Object<string,null|number|string>} parameters\n * @param {number} startTime\n * @return {string}\n */\nexport function truncAndTimeUrl(baseUrl, parameters, startTime) {\n  return buildUrl(\n      baseUrl, parameters, MAX_URL_LENGTH - 10, TRUNCATION_PARAM)\n    + '&dtd=' + elapsedTimeWithCeiling(Date.now(), startTime);\n}\n\n/**\n * @param {!Window} win\n * @return {number}\n */\nfunction iframeNestingDepth(win) {\n  let w = win;\n  let depth = 0;\n  while (w != w.parent && depth < 100) {\n    w = w.parent;\n    depth++;\n  }\n  dev().assert(w == win.top);\n  return depth;\n}\n\n/**\n * @param {!Window} win\n * @return {number}\n */\nfunction getHistoryLength(win) {\n  // We have seen cases where accessing history length causes errors.\n  try {\n    return win.history.length;\n  } catch (e) {\n    return 0;\n  }\n}\n\n/**\n * @param {string} url\n * @return {string} hostname portion of url\n * @visibleForTesting\n */\nexport function extractHost(url) {\n  return (/^(?:https?:\\/\\/)?([^\\/\\?:]+)/i.exec(url) || [])[1] || url;\n}\n\n/**\n * @param {!Window} win\n * @return {?string}\n */\nfunction topWindowUrlOrDomain(win) {\n  const {ancestorOrigins} = win.location;\n  if (ancestorOrigins) {\n    const {origin} = win.location;\n    const topOrigin = ancestorOrigins[ancestorOrigins.length - 1];\n    if (origin == topOrigin) {\n      return win.top.location.hostname;\n    }\n    const secondFromTop = secondWindowFromTop(win);\n    if (secondFromTop == win ||\n        origin == ancestorOrigins[ancestorOrigins.length - 2]) {\n      return extractHost(secondFromTop./*OK*/document.referrer);\n    }\n    return extractHost(topOrigin);\n  } else {\n    try {\n      return win.top.location.hostname;\n    } catch (e) {}\n    const secondFromTop = secondWindowFromTop(win);\n    try {\n      return extractHost(secondFromTop./*OK*/document.referrer);\n    } catch (e) {}\n    return null;\n  }\n}\n\n/**\n * @param {!Window} win\n * @return {!Window}\n */\nfunction secondWindowFromTop(win) {\n  let secondFromTop = win;\n  let depth = 0;\n  while (secondFromTop.parent != secondFromTop.parent.parent &&\n        depth < 100) {\n    secondFromTop = secondFromTop.parent;\n    depth++;\n  }\n  dev().assert(secondFromTop.parent == win.top);\n  return secondFromTop;\n}\n\n/**\n * @param {number} time\n * @param {number} start\n * @return {(number|string)}\n */\nfunction elapsedTimeWithCeiling(time, start) {\n  const duration = time - start;\n  if (duration >= 1e6) {\n    return 'M';\n  } else if (duration >= 0) {\n    return duration;\n  }\n  return '-M';\n}\n\n/**\n * `nodeOrDoc` must be passed for correct behavior in shadow AMP (PWA) case.\n * @param {!Window} win\n * @param {!Element|!../../../src/service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n * @param {string=} opt_cid\n * @return {number} The correlator.\n */\nexport function getCorrelator(win, elementOrAmpDoc, opt_cid) {\n  if (!win.ampAdPageCorrelator) {\n    win.ampAdPageCorrelator = isExperimentOn(win, 'exp-new-correlator') ?\n      Math.floor(4503599627370496 * Math.random()) :\n      makeCorrelator(\n          Services.documentInfoForDoc(elementOrAmpDoc).pageViewId, opt_cid);\n  }\n  return win.ampAdPageCorrelator;\n}\n\n/**\n * @param {string} pageViewId\n * @param {string=} opt_clientId\n * @return {number}\n */\nfunction makeCorrelator(pageViewId, opt_clientId) {\n  const pageViewIdNumeric = Number(pageViewId || 0);\n  if (opt_clientId) {\n    return pageViewIdNumeric + ((opt_clientId.replace(/\\D/g, '') % 1e6) * 1e6);\n  } else {\n    // In this case, pageViewIdNumeric is only 4 digits => too low entropy\n    // to be useful as a page correlator.  So synthesize one from scratch.\n    // 4503599627370496 == 2^52.  The guaranteed range of JS Number is at least\n    // 2^53 - 1.\n    return Math.floor(4503599627370496 * Math.random());\n  }\n}\n\n\n/**\n * Collect additional dimensions for the brdim parameter.\n * @param {!Window} win The window for which we read the browser dimensions.\n * @param {{width: number, height: number}|null} viewportSize\n * @return {string}\n * @visibleForTesting\n */\nexport function additionalDimensions(win, viewportSize) {\n  // Some browsers throw errors on some of these.\n  let screenX, screenY, outerWidth, outerHeight, innerWidth, innerHeight;\n  try {\n    screenX = win.screenX;\n    screenY = win.screenY;\n  } catch (e) {}\n  try {\n    outerWidth = win.outerWidth;\n    outerHeight = win.outerHeight;\n  } catch (e) {}\n  try {\n    innerWidth = viewportSize.width;\n    innerHeight = viewportSize.height;\n  } catch (e) {}\n  return [win.screenLeft,\n    win.screenTop,\n    screenX,\n    screenY,\n    win.screen ? win.screen.availWidth : undefined,\n    win.screen ? win.screen.availTop : undefined,\n    outerWidth,\n    outerHeight,\n    innerWidth,\n    innerHeight].join();\n}\n\n/**\n * Returns amp-analytics config for a new CSI trigger.\n * @param {string} on The name of the analytics trigger.\n * @param {!Object<string, string>} params Params to be included on the ping.\n * @return {!JsonObject}\n */\nfunction csiTrigger(on, params) {\n  return dict({\n    'on': on,\n    'request': 'csi',\n    'sampleSpec': {\n      // Pings are sampled on a per-pageview basis. A prefix is included in the\n      // sampleOn spec so that the hash is orthogonal to any other sampling in\n      // amp.\n      'sampleOn': 'a4a-csi-${pageViewId}',\n      'threshold': 1, // 1% sample\n    },\n    'selector': 'amp-ad',\n    'selectionMethod': 'closest',\n    'extraUrlParams': params,\n  });\n}\n\n/**\n * Returns amp-analytics config for Google ads network impls.\n * @return {!JsonObject}\n */\nexport function getCsiAmpAnalyticsConfig() {\n  return dict({\n    'requests': {\n      'csi': 'https://csi.gstatic.com/csi?',\n    },\n    'transport': {'xhrpost': false},\n    'triggers': {\n      'adRequestStart': csiTrigger('ad-request-start', {\n        // afs => ad fetch start\n        'met.a4a': 'afs_lvt.${viewerLastVisibleTime}~afs.${time}',\n      }),\n      'adResponseEnd': csiTrigger('ad-response-end', {\n        // afe => ad fetch end\n        'met.a4a': 'afe.${time}',\n      }),\n      'adRenderStart': csiTrigger('ad-render-start', {\n        // ast => ad schedule time\n        // ars => ad render start\n        'met.a4a':\n            'ast.${scheduleTime}~ars_lvt.${viewerLastVisibleTime}~ars.${time}',\n        'qqid': '${qqid}',\n      }),\n      'adIframeLoaded': csiTrigger('ad-iframe-loaded', {\n        // ail => ad iframe loaded\n        'met.a4a': 'ail.${time}',\n      }),\n    },\n    'extraUrlParams': {\n      's': 'ampad',\n      'ctx': '2',\n      'c': '${correlator}',\n      'slotId': '${slotId}',\n      // Time that the beacon was actually sent. Note that there can be delays\n      // between the time at which the event is fired and when ${nowMs} is\n      // evaluated when the URL is built by amp-analytics.\n      'puid': '${requestCount}~${timestamp}',\n    },\n  });\n}\n\n/**\n * Returns variables to be included in the amp-analytics event for A4A.\n * @param {string} analyticsTrigger The name of the analytics trigger.\n * @param {!AMP.BaseElement} a4a The A4A element.\n * @param {?string} qqid The query ID or null if the query ID has not been set\n *     yet.\n */\nexport function getCsiAmpAnalyticsVariables(analyticsTrigger, a4a, qqid) {\n  const {win} = a4a;\n  const ampdoc = a4a.getAmpDoc();\n  const viewer = Services.viewerForDoc(ampdoc);\n  const navStart = getNavStart(win);\n  const vars = {\n    'correlator': getCorrelator(win, ampdoc),\n    'slotId': a4a.element.getAttribute('data-amp-slot-index'),\n    'viewerLastVisibleTime': viewer.getLastVisibleTime() - navStart,\n  };\n  if (qqid) {\n    vars['qqid'] = qqid;\n  }\n  if (analyticsTrigger == 'ad-render-start') {\n    vars['scheduleTime'] = a4a.element.layoutScheduleTime - navStart;\n  }\n  return vars;\n}\n\n/**\n * Extracts configuration used to build amp-analytics element for active view.\n *\n * @param {!../../../extensions/amp-a4a/0.1/amp-a4a.AmpA4A} a4a\n * @param {!../../../src/utils/xhr-utils.FetchResponseHeaders} responseHeaders\n *   XHR service FetchResponseHeaders object containing the response\n *   headers.\n * @return {?JsonObject} config or null if invalid/missing.\n */\nexport function extractAmpAnalyticsConfig(a4a, responseHeaders) {\n  if (!responseHeaders.has(AMP_ANALYTICS_HEADER)) {\n    return null;\n  }\n  try {\n    const analyticsConfig =\n        parseJson(responseHeaders.get(AMP_ANALYTICS_HEADER));\n    dev().assert(Array.isArray(analyticsConfig['url']));\n    const urls = analyticsConfig['url'];\n    if (!urls.length) {\n      return null;\n    }\n\n    const config = /** @type {JsonObject}*/ ({\n      'transport': {'beacon': false, 'xhrpost': false},\n      'triggers': {\n        'continuousVisible': {\n          'on': 'visible',\n          'visibilitySpec': {\n            'selector': 'amp-ad',\n            'selectionMethod': 'closest',\n            'visiblePercentageMin': 50,\n            'continuousTimeMin': 1000,\n          },\n        },\n      },\n    });\n\n    // Discover and build visibility endpoints.\n    const requests = dict();\n    for (let idx = 1; idx <= urls.length; idx++) {\n      // TODO: Ensure url is valid and not freeform JS?\n      requests[`visibility${idx}`] = `${urls[idx - 1]}`;\n    }\n    // Security review needed here.\n    config['requests'] = requests;\n    config['triggers']['continuousVisible']['request'] =\n        Object.keys(requests);\n    return config;\n  } catch (err) {\n    dev().error('AMP-A4A', 'Invalid analytics', err,\n        responseHeaders.get(AMP_ANALYTICS_HEADER));\n  }\n  return null;\n}\n\n/**\n * Add new experiment IDs to a (possibly empty) existing set of experiment IDs.\n * The {@code currentIdString} may be {@code null} or {@code ''}, but if it is\n * populated, it must contain a comma-separated list of integer experiment IDs\n * (per {@code parseExperimentIds()}).  Returns the new set of IDs, encoded\n * as a comma-separated list.  Does not de-duplicate ID entries.\n *\n * @param {!Array<string>} newIds IDs to merge in. Should contain stringified\n *     integer (base 10) experiment IDs.\n * @param {?string} currentIdString  If present, a string containing a\n *   comma-separated list of integer experiment IDs.\n * @return {string}  New experiment list string, including newId iff it is\n *   a valid (integer) experiment ID.\n * @see parseExperimentIds, validateExperimentIds\n */\nexport function mergeExperimentIds(newIds, currentIdString) {\n  const newIdString = newIds.filter(newId => Number(newId)).join(',');\n  currentIdString = currentIdString || '';\n  return currentIdString + (currentIdString && newIdString ? ',' : '')\n      + newIdString;\n}\n\n/**\n * Adds two CSI signals to the given amp-analytics configuration object, one\n * for render-start, and one for ini-load.\n *\n * @param {!Window} win\n * @param {!Element} element The ad slot.\n * @param {!JsonObject} config The original config object.\n * @param {?string} qqid\n * @param {boolean} isVerifiedAmpCreative\n * @return {?JsonObject} config or null if invalid/missing.\n */\nexport function addCsiSignalsToAmpAnalyticsConfig(\n  win, element, config, qqid, isVerifiedAmpCreative) {\n  // Add CSI pingbacks.\n  const correlator = getCorrelator(win, element);\n  const slotId = Number(element.getAttribute('data-amp-slot-index'));\n  const eids = encodeURIComponent(\n      element.getAttribute(EXPERIMENT_ATTRIBUTE));\n  const adType = element.getAttribute('type');\n  const initTime =\n      Number(getTimingDataSync(win, 'navigationStart') || Date.now());\n  const deltaTime = Math.round(win.performance && win.performance.now ?\n    win.performance.now() : (Date.now() - initTime));\n  const baseCsiUrl = 'https://csi.gstatic.com/csi?s=a4a' +\n      `&c=${correlator}&slotId=${slotId}&qqid.${slotId}=${qqid}` +\n      `&dt=${initTime}` +\n      (eids != 'null' ? `&e.${slotId}=${eids}` : '') +\n      `&rls=$internalRuntimeVersion$&adt.${slotId}=${adType}`;\n  const isAmpSuffix = isVerifiedAmpCreative ? 'Friendly' : 'CrossDomain';\n  config['triggers']['continuousVisibleIniLoad'] = {\n    'on': 'ini-load',\n    'selector': 'amp-ad',\n    'selectionMethod': 'closest',\n    'request': 'iniLoadCsi',\n  };\n  config['triggers']['continuousVisibleRenderStart'] = {\n    'on': 'render-start',\n    'selector': 'amp-ad',\n    'selectionMethod': 'closest',\n    'request': 'renderStartCsi',\n  };\n  config['requests']['iniLoadCsi'] = baseCsiUrl +\n      `&met.a4a.${slotId}=iniLoadCsi${isAmpSuffix}.${deltaTime}`;\n  config['requests']['renderStartCsi'] = baseCsiUrl +\n      `&met.a4a.${slotId}=renderStartCsi${isAmpSuffix}.${deltaTime}`;\n\n  // Add CSI ping for visibility.\n  config['requests']['visibilityCsi'] = baseCsiUrl +\n      `&met.a4a.${slotId}=visibilityCsi.${deltaTime}`;\n  config['triggers']['continuousVisible']['request'].push('visibilityCsi');\n  return config;\n}\n\n/**\n * Returns an array of two-letter codes representing the amp-ad containers\n * enclosing the given ad element.\n *\n * @param {!Element} adElement\n * @return {!Array<string>}\n */\nexport function getEnclosingContainerTypes(adElement) {\n  const containerTypeSet = {};\n  for (let el = adElement.parentElement, counter = 0;\n    el && counter < 20; el = el.parentElement, counter++) {\n    const tagName = el.tagName.toUpperCase();\n    if (ValidAdContainerTypes[tagName]) {\n      containerTypeSet[ValidAdContainerTypes[tagName]] = true;\n    }\n  }\n  return Object.keys(containerTypeSet);\n}\n\n/**\n * Appends parameter to ad request indicating error state so long as error\n * parameter is not already present or url has been truncated.\n * @param {string} adUrl used for network request\n * @param {string} parameterValue to be appended\n * @return {string|undefined} potentially modified url, undefined\n */\nexport function maybeAppendErrorParameter(adUrl, parameterValue) {\n  dev().assert(!!adUrl && !!parameterValue);\n  // Add parameter indicating error so long as the url has not already been\n  // truncated and error parameter is not already present.  Note that we assume\n  // that added, error parameter length will be less than truncation parameter\n  // so adding will not cause length to exceed maximum.\n  if (new RegExp(`[?|&](${encodeURIComponent(TRUNCATION_PARAM.name)}=` +\n      `${encodeURIComponent(String(TRUNCATION_PARAM.value))}|aet=[^&]*)$`)\n      .test(adUrl)) {\n    return;\n  }\n  const modifiedAdUrl = adUrl + `&aet=${parameterValue}`;\n  dev().assert(modifiedAdUrl.length <= MAX_URL_LENGTH);\n  return modifiedAdUrl;\n}\n\n/**\n * Returns a numerical code representing the binary type.\n * @param {string} type\n * @return {?string}\n */\nexport function getBinaryTypeNumericalCode(type) {\n  return {\n    'production': '0',\n    'control': '1',\n    'canary': '2',\n  }[type] || null;\n}\n\n/** @const {!RegExp} */\nconst IDENTITY_DOMAIN_REGEXP_ = /\\.google\\.(?:com?\\.)?[a-z]{2,3}$/;\n\n/** @typedef {{\n      token: (string|undefined),\n      jar: (string|undefined),\n      pucrd: (string|undefined),\n      freshLifetimeSecs: (number|undefined),\n      validLifetimeSecs: (number|undefined),\n      fetchTimeMs: (number|undefined)\n   }} */\nexport let IdentityToken;\n\n/**\n * @param {!Window} win\n * @param {!Element|!../../../src/service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n * @return {!Promise<!IdentityToken>}\n */\nexport function getIdentityToken(win, elementOrAmpDoc) {\n  win['goog_identity_prom'] = win['goog_identity_prom'] ||\n      executeIdentityTokenFetch(win, elementOrAmpDoc);\n  return /** @type {!Promise<!IdentityToken>} */(win['goog_identity_prom']);\n}\n\n/**\n * @param {!Window} win\n * @param {!Element|!../../../src/service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n * @param {number=} redirectsRemaining (default 1)\n * @param {string=} domain\n * @param {number=} startTime\n * @return {!Promise<!IdentityToken>}\n */\nfunction executeIdentityTokenFetch(win, elementOrAmpDoc, redirectsRemaining = 1,\n  domain = undefined, startTime = Date.now()) {\n  const url = getIdentityTokenRequestUrl(win, elementOrAmpDoc, domain);\n  return Services.xhrFor(win).fetchJson(url, {\n    mode: 'cors',\n    method: 'GET',\n    ampCors: false,\n    credentials: 'include',\n  }).then(res => res.json())\n      .then(obj => {\n        const token = obj['newToken'];\n        const jar = obj['1p_jar'] || '';\n        const pucrd = obj['pucrd'] || '';\n        const freshLifetimeSecs = parseInt(obj['freshLifetimeSecs'] || '', 10);\n        const validLifetimeSecs = parseInt(obj['validLifetimeSecs'] || '', 10);\n        const altDomain = obj['altDomain'];\n        const fetchTimeMs = Date.now() - startTime;\n        if (IDENTITY_DOMAIN_REGEXP_.test(altDomain)) {\n          if (!redirectsRemaining--) {\n            // Max redirects, log?\n            return {fetchTimeMs};\n          }\n          return executeIdentityTokenFetch(\n              win, elementOrAmpDoc, redirectsRemaining, altDomain, startTime);\n        } else if (freshLifetimeSecs > 0 && validLifetimeSecs > 0 &&\n            typeof token == 'string') {\n          return {token, jar, pucrd, freshLifetimeSecs, validLifetimeSecs,\n            fetchTimeMs};\n        }\n        // returning empty\n        return {fetchTimeMs};\n      })\n      .catch(unusedErr => {\n        // TODO log?\n        return {};\n      });\n}\n\n/**\n * @param {!Window} win\n * @param {!Element|!../../../src/service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n * @param {string=} domain\n * @return {string} url\n * @visibleForTesting\n */\nexport function getIdentityTokenRequestUrl(win, elementOrAmpDoc,\n  domain = undefined) {\n  if (!domain && win != win.top && win.location.ancestorOrigins) {\n    const matches = IDENTITY_DOMAIN_REGEXP_.exec(\n        win.location.ancestorOrigins[win.location.ancestorOrigins.length - 1]);\n    domain = (matches && matches[0]) || undefined;\n  }\n  domain = domain || '.google.com';\n  const canonical =\n    extractHost(Services.documentInfoForDoc(elementOrAmpDoc).canonicalUrl);\n  return `https://adservice${domain}/adsid/integrator.json?domain=${canonical}`;\n}\n\n/**\n * Returns whether we are running on the AMP CDN.\n * @param {!Window} win\n * @return {boolean}\n */\nexport function isCdnProxy(win) {\n  return CDN_PROXY_REGEXP.test(win.location.origin);\n}\n\n/**\n * Populates the fields of the given Nameframe experiment config object.\n * @param {!../../../src/utils/xhr-utils.FetchResponseHeaders} headers\n * @param {!NameframeExperimentConfig} nameframeConfig\n */\nexport function setNameframeExperimentConfigs(headers, nameframeConfig) {\n  const nameframeExperimentHeader = headers.get('amp-nameframe-exp');\n  if (nameframeExperimentHeader) {\n    nameframeExperimentHeader.split(';').forEach(config => {\n      if (config == 'instantLoad' || config == 'writeInBody') {\n        nameframeConfig[config] = true;\n      }\n    });\n  }\n}\n\n/**\n * Enum for browser capabilities. NOTE: Since JS is 32-bit, do not add anymore\n * than 32 capabilities to this enum.\n * @enum {number}\n */\nconst Capability = {\n  SVG_SUPPORTED: 1 << 0,\n  SANDBOXING_ALLOW_TOP_NAVIGATION_BY_USER_ACTIVATION_SUPPORTED: 1 << 1,\n  SANDBOXING_ALLOW_POPUPS_TO_ESCAPE_SANDBOX_SUPPORTED: 1 << 2,\n};\n\n/**\n * Returns a bitmap representing what features are supported by this browser.\n * @param {!Window} win\n * @return {number}\n */\nfunction getBrowserCapabilitiesBitmap(win) {\n  let browserCapabilities = 0;\n  const doc = win.document;\n  if (win.SVGElement && doc.createElementNS) {\n    browserCapabilities |= Capability.SVG_SUPPORTED;\n  }\n  const iframeEl = doc.createElement('iframe');\n  if (iframeEl.sandbox && iframeEl.sandbox.supports) {\n    if (iframeEl.sandbox.supports('allow-top-navigation-by-user-activation')) {\n      browserCapabilities |=\n        Capability.SANDBOXING_ALLOW_TOP_NAVIGATION_BY_USER_ACTIVATION_SUPPORTED;\n    }\n    if (iframeEl.sandbox.supports('allow-popups-to-escape-sandbox')) {\n      browserCapabilities |=\n        Capability.SANDBOXING_ALLOW_POPUPS_TO_ESCAPE_SANDBOX_SUPPORTED;\n    }\n  }\n  return browserCapabilities;\n}\n\n/**\n * Returns an enum value representing the AMP binary type, or null if this is a\n * canonical page.\n * @param {!Window} win\n * @return {?string} The binary type enum.\n * @visibleForTesting\n */\nexport function getAmpRuntimeTypeParameter(win) {\n  const art = getBinaryTypeNumericalCode(getBinaryType(win));\n  return isCdnProxy(win) && art != '0' ? art : null;\n}\n","export const CSS = \"amp-ad iframe,amp-embed iframe{border:0!important;margin:0!important;padding:0!important}.i-amphtml-ad-default-holder{position:absolute;left:0;right:0;top:0;bottom:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background-color:hsla(0,0%,78.4%,0.05)}.i-amphtml-ad-default-holder:after{content:\\\"Ad\\\";content:attr(data-ad-holder-text);background-color:transparent;border-radius:2px;color:#696969;font-size:10px;line-height:1;font-family:Arial,sans-serif;padding:3px 4px 1px;border:1px solid #696969}amp-ad[data-a4a-upgrade-type=amp-ad-network-doubleclick-impl]>iframe,amp-ad[type=adsense]>iframe{top:50%!important;left:50%!important;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}amp-ad[type=adsense],amp-ad[type=doubleclick]{direction:ltr}amp-ad[data-a4a-upgrade-type=amp-ad-network-adsense-impl]>iframe,amp-ad[data-a4a-upgrade-type=amp-ad-network-doubleclick-impl]>iframe{min-height:0;min-width:0}amp-ad[data-a4a-upgrade-type=amp-ad-network-doubleclick-impl][height=fluid]>iframe{height:100%!important;width:100%!important;position:relative}amp-ad[data-a4a-upgrade-type=amp-ad-network-doubleclick-impl][height=fluid]{width:100%!important}\\n/*# sourceURL=/extensions/amp-ad/0.1/amp-ad.css*/\";\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// Because AdSense and DoubleClick are both operated by Google and their A4A\n// implementations share some behavior in common, part of the logic for this\n// implementation is located in the ads/google/a4a directory rather than here.\n// Most other ad networks will want to put their A4A code entirely in the\n// extensions/amp-ad-network-${NETWORK_NAME}-impl directory.\n\nimport {\n  MANUAL_EXPERIMENT_ID,\n  addExperimentIdToElement,\n  extractUrlExperimentId,\n} from '../../../ads/google/a4a/traffic-experiments';\nimport {dev} from '../../../src/log';\nimport {\n  forceExperimentBranch,\n  getExperimentBranch,\n} from '../../../src/experiments';\nimport {\n  isCdnProxy,\n  isGoogleAdsA4AValidEnvironment,\n} from '../../../ads/google/a4a/utils';\nimport {selectAndSetExperiments} from '../../../ads/google/a4a/experiment-utils';\n\n/** @const {string} @visibleForTesting */\nexport const ADSENSE_A4A_EXPERIMENT_NAME = 'expAdsenseA4A';\n\n/** @type {string} */\nconst TAG = 'amp-ad-network-adsense-impl';\n\n/** @const @type {!Object<string,?string>} */\nexport const URL_EXPERIMENT_MAPPING = {\n  '-1': MANUAL_EXPERIMENT_ID,\n  '0': null,\n};\n\n/** @const @type {!Object<string, string>} */\nexport const ADSENSE_EXPERIMENTS = {\n  UNCONDITIONED_CANONICAL_EXP: '21062154',\n  UNCONDITIONED_CANONICAL_CTL: '21062155',\n  CANONICAL_EXP: '21062158',\n  CANONICAL_CTL: '21062159',\n};\n\n/** @const @type {!Object<string, string>} */\nexport const ADSENSE_EXP_NAMES = {\n  UNCONDITIONED_CANONICAL: 'expAdsenseUnconditionedCanonical',\n  CANONICAL: 'expAdsenseCanonical',\n};\n\n/**\n * Attempts to select into Adsense experiments.\n * @param {!Window} win\n * @param {!Element} element\n */\nfunction selectExperiments(win, element) {\n  selectAndSetExperiments(win, element,\n      [ADSENSE_EXPERIMENTS.UNCONDITIONED_CANONICAL_EXP,\n        ADSENSE_EXPERIMENTS.UNCONDITIONED_CANONICAL_CTL],\n      ADSENSE_EXP_NAMES.UNCONDITIONED_CANONICAL,\n      true);\n\n\n  // See if in holdback control/experiment.\n  const urlExperimentId = extractUrlExperimentId(win, element);\n  const experimentId = URL_EXPERIMENT_MAPPING[urlExperimentId || ''];\n  if (experimentId) {\n    addExperimentIdToElement(experimentId, element);\n    forceExperimentBranch(win, ADSENSE_A4A_EXPERIMENT_NAME, experimentId);\n    dev().info(\n        TAG, `url experiment selection ${urlExperimentId}: ${experimentId}.`);\n  }\n\n  // If not in the unconditioned canonical experiment, attempt to\n  // select into the undiluted canonical experiment.\n  const inUnconditionedCanonicalExp = !!getExperimentBranch(\n      win, ADSENSE_EXP_NAMES.UNCONDITIONED_CANONICAL);\n  if (!inUnconditionedCanonicalExp && !isCdnProxy(win)) {\n    selectAndSetExperiments(win, element,\n        [ADSENSE_EXPERIMENTS.CANONICAL_EXP,\n          ADSENSE_EXPERIMENTS.CANONICAL_CTL],\n        ADSENSE_EXP_NAMES.CANONICAL, true);\n  }\n}\n\n/**\n * @param {!Window} win\n * @param {!Element} element\n * @param {boolean} useRemoteHtml\n * @return {boolean}\n */\nexport function adsenseIsA4AEnabled(win, element, useRemoteHtml) {\n  if (useRemoteHtml || !element.getAttribute('data-ad-client')) {\n    return false;\n  }\n  selectExperiments(win, element);\n  return isGoogleAdsA4AValidEnvironment(win) ||\n      getExperimentBranch(\n          win, ADSENSE_EXP_NAMES.UNCONDITIONED_CANONICAL) ==\n      ADSENSE_EXPERIMENTS.UNCONDITIONED_CANONICAL_EXP ||\n      getExperimentBranch(win, ADSENSE_EXP_NAMES.CANONICAL) ==\n      ADSENSE_EXPERIMENTS.CANONICAL_EXP;\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Determines which tags desire A4A handling\n * @param {!Window} win\n * @param {!Element} element\n * @param {boolean} useRemoteHtml\n * @return {boolean}\n */\nexport function cloudflareIsA4AEnabled(win, element, useRemoteHtml) {\n  // We assume fast fetch for all content, but this will gracefully degrade,\n  // when non-a4a content is delivered\n  return !useRemoteHtml;\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {startsWith} from '../../../src/string';\n\n/** @const @private {string} */\nconst GMOSSP_SRC_PREFIX_ = 'https://sp.gmossp-sp.jp/';\n\n/** @const @private {string} */\nconst GMOSSP_SRC_A4A_PREFIX_ = 'https://amp.sp.gmossp-sp.jp/_a4a/';\n\n/**\n * @param {!Window} win\n * @param {!Element} element\n * @param {boolean} useRemoteHtml\n * @return {boolean}\n */\nexport function gmosspIsA4AEnabled(win, element, useRemoteHtml) {\n  let src;\n  return !useRemoteHtml && !!(src = element.getAttribute('src')) &&\n      !!element.getAttribute('data-use-a4a') &&\n      (startsWith(src, GMOSSP_SRC_PREFIX_) ||\n       startsWith(src, GMOSSP_SRC_A4A_PREFIX_));\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @const @private {string} */\nconst SRC_PREFIX_ = 'https://ib.3lift.com/';\n/**\n * @param {!Window} win\n * @param {!Element} element\n * @param {boolean} useRemoteHtml\n * @return {boolean}\n */\nexport function tripleliftIsA4AEnabled(win, element, useRemoteHtml) {\n  let src;\n  return !useRemoteHtml && !!element.getAttribute('data-use-a4a') && !!(src =\n    element.getAttribute('src')) && src.indexOf(SRC_PREFIX_) == 0;\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {AmpAdUIHandler} from './amp-ad-ui';\nimport {AmpAdXOriginIframeHandler} from './amp-ad-xorigin-iframe-handler';\nimport {\n  CONSENT_POLICY_STATE, // eslint-disable-line no-unused-vars\n} from '../../../src/consent-state';\nimport {\n  Layout, // eslint-disable-line no-unused-vars\n  LayoutPriority,\n} from '../../../src/layout';\nimport {adConfig} from '../../../ads/_config';\nimport {clamp} from '../../../src/utils/math';\nimport {\n  computedStyle,\n  setStyle,\n} from '../../../src/style';\nimport {dev, user} from '../../../src/log';\nimport {getAdCid} from '../../../src/ad-cid';\nimport {getAdContainer, isAdPositionAllowed}\n  from '../../../src/ad-helper';\nimport {\n  getAmpAdRenderOutsideViewport,\n  incrementLoadingAds,\n  is3pThrottled,\n} from './concurrent-load';\nimport {\n  getConsentPolicySharedData,\n  getConsentPolicyState,\n} from '../../../src/consent';\nimport {getIframe} from '../../../src/3p-frame';\nimport {isLayoutSizeDefined} from '../../../src/layout';\nimport {moveLayoutRect} from '../../../src/layout-rect';\nimport {preloadBootstrap} from '../../../src/3p-frame';\nimport {toWin} from '../../../src/types';\n\n/** @const {string} Tag name for 3P AD implementation. */\nexport const TAG_3P_IMPL = 'amp-ad-3p-impl';\n\n/** @const {number} */\nconst MIN_FULL_WIDTH_HEIGHT = 100;\n\n/** @const {number} */\nconst MAX_FULL_WIDTH_HEIGHT = 500;\n\nexport class AmpAd3PImpl extends AMP.BaseElement {\n\n  /**\n   * @param {!AmpElement} element\n   */\n  constructor(element) {\n    super(element);\n\n    /**\n     * @private {?Element}\n     * @visibleForTesting\n     */\n    this.iframe_ = null;\n\n    /** {?Object} */\n    this.config = null;\n\n    /** {?AmpAdUIHandler} */\n    this.uiHandler = null;\n\n    /** @private {?AmpAdXOriginIframeHandler} */\n    this.xOriginIframeHandler_ = null;\n\n    /**\n     * @private {?Element}\n     * @visibleForTesting\n     */\n    this.placeholder_ = null;\n\n    /**\n     * @private {?Element}\n     * @visibleForTesting\n     */\n    this.fallback_ = null;\n\n    /** @private {boolean} */\n    this.isInFixedContainer_ = false;\n\n    /**\n     * The (relative) layout box of the ad iframe to the amp-ad tag.\n     * @private {?../../../src/layout-rect.LayoutRectDef}\n     */\n    this.iframeLayoutBox_ = null;\n\n    /**\n     * Call to stop listening to viewport changes.\n     * @private {?function()}\n     * @visibleForTesting\n     */\n    this.unlistenViewportChanges_ = null;\n\n    /**\n     * @private {IntersectionObserver}\n     * @visibleForTesting\n     */\n    this.intersectionObserver_ = null;\n\n    /** @private {?string|undefined} */\n    this.container_ = undefined;\n\n    /** @private {?Promise} */\n    this.layoutPromise_ = null;\n\n    /** @private {string|undefined} */\n    this.type_ = undefined;\n\n    /**\n     * For full-width responsive ads: whether the element has already been\n     * aligned to the edges of the viewport.\n     * @private {boolean}\n     */\n    this.isFullWidthAligned_ = false;\n\n    /**\n     * Whether full-width responsive was requested for this ad.\n     * @private {boolean}\n     */\n    this.isFullWidthRequested_ = false;\n  }\n\n  /** @override */\n  getLayoutPriority() {\n    // Loads ads after other content,\n    const isPWA = !this.element.getAmpDoc().isSingleDoc();\n    // give the ad higher priority if it is inside a PWA\n    return isPWA ? LayoutPriority.METADATA : LayoutPriority.ADS;\n  }\n\n  /** @override */\n  renderOutsideViewport() {\n    if (is3pThrottled(this.win)) {\n      return false;\n    }\n    // Otherwise the ad is good to go.\n    const elementCheck = getAmpAdRenderOutsideViewport(this.element);\n    return elementCheck !== null ?\n      elementCheck : super.renderOutsideViewport();\n  }\n\n  /**\n   * @param {!Layout} layout\n   * @override\n   */\n  isLayoutSupported(layout) {\n    return isLayoutSizeDefined(layout);\n  }\n\n  /**\n   * @return {!../../../src/service/resource.Resource}\n   * @visibleForTesting\n   */\n  getResource() {\n    return this.element.getResources().getResourceForElement(this.element);\n  }\n\n  /** @override */\n  getConsentPolicy() {\n    const type = this.element.getAttribute('type');\n    const config = adConfig[type];\n    if (config && config['consentHandlingOverride']) {\n      return null;\n    }\n    return super.getConsentPolicy();\n  }\n\n  /** @override */\n  buildCallback() {\n    this.type_ = this.element.getAttribute('type');\n    const upgradeDelayMs = Math.round(this.getResource().getUpgradeDelayMs());\n    dev().info(TAG_3P_IMPL, `upgradeDelay ${this.type_}: ${upgradeDelayMs}`);\n\n    this.placeholder_ = this.getPlaceholder();\n    this.fallback_ = this.getFallback();\n\n    this.config = adConfig[this.type_];\n    user().assert(\n        this.config, `Type \"${this.type_}\" is not supported in amp-ad`);\n\n    this.uiHandler = new AmpAdUIHandler(this);\n\n    this.isFullWidthRequested_ = this.shouldRequestFullWidth_();\n\n    if (this.isFullWidthRequested_) {\n      return this.attemptFullWidthSizeChange_();\n    }\n  }\n\n  /**\n   * @return {boolean}\n   * @private\n   */\n  shouldRequestFullWidth_() {\n    const hasFullWidth = this.element.hasAttribute('data-full-width');\n    if (!hasFullWidth) {\n      return false;\n    }\n    user().assert(this.element.getAttribute('width') == '100vw',\n        'Ad units with data-full-width must have width=\"100vw\".');\n    user().assert(!!this.config.fullWidthHeightRatio,\n        'Ad network does not support full width ads.');\n    dev().info(TAG_3P_IMPL,\n        '#${this.getResource().getId()} Full width requested');\n    return true;\n  }\n\n  /**\n   * Prefetches and preconnects URLs related to the ad.\n   * @param {boolean=} opt_onLayout\n   * @override\n   */\n  preconnectCallback(opt_onLayout) {\n    // We always need the bootstrap.\n    preloadBootstrap(\n        this.win, this.preconnect, this.type_, this.config.remoteHTMLDisabled);\n    if (typeof this.config.prefetch == 'string') {\n      this.preconnect.preload(this.config.prefetch, 'script');\n    } else if (this.config.prefetch) {\n      this.config.prefetch.forEach(p => {\n        this.preconnect.preload(p, 'script');\n      });\n    }\n    if (typeof this.config.preconnect == 'string') {\n      this.preconnect.url(this.config.preconnect, opt_onLayout);\n    } else if (this.config.preconnect) {\n      this.config.preconnect.forEach(p => {\n        this.preconnect.url(p, opt_onLayout);\n      });\n    }\n    // If fully qualified src for ad script is specified we preconnect to it.\n    const src = this.element.getAttribute('src');\n    if (src) {\n      // We only preconnect to the src because we cannot know whether the URL\n      // will have caching headers set.\n      this.preconnect.url(src);\n    }\n  }\n\n  /**\n   * @override\n   */\n  onLayoutMeasure() {\n    this.isInFixedContainer_ = !isAdPositionAllowed(this.element, this.win);\n    /** detect ad containers, add the list to element as a new attribute */\n    if (this.container_ === undefined) {\n      this.container_ = getAdContainer(this.element);\n    }\n    // We remeasured this tag, let's also remeasure the iframe. Should be\n    // free now and it might have changed.\n    this.measureIframeLayoutBox_();\n    if (this.xOriginIframeHandler_) {\n      this.xOriginIframeHandler_.onLayoutMeasure();\n    }\n\n    if (this.isFullWidthRequested_ && !this.isFullWidthAligned_) {\n      this.isFullWidthAligned_ = true;\n      const layoutBox = this.getLayoutBox();\n\n      // Nudge into the correct horizontal position by changing side margin.\n      this.getVsync().run({\n        measure: state => {\n          state.direction =\n              computedStyle(this.win, this.element)['direction'];\n        },\n        mutate: state => {\n          if (state.direction == 'rtl') {\n            setStyle(this.element, 'marginRight', layoutBox.left, 'px');\n          } else {\n            setStyle(this.element, 'marginLeft', -layoutBox.left, 'px');\n          }\n        },\n      }, {direction: ''});\n    }\n  }\n\n  /**\n   * Measure the layout box of the iframe if we rendered it already.\n   * @private\n   */\n  measureIframeLayoutBox_() {\n    if (this.xOriginIframeHandler_ && this.xOriginIframeHandler_.iframe) {\n      const iframeBox =\n          this.getViewport().getLayoutRect(this.xOriginIframeHandler_.iframe);\n      const box = this.getLayoutBox();\n      // Cache the iframe's relative position to the amp-ad. This is\n      // necessary for fixed-position containers which \"move\" with the\n      // viewport.\n      this.iframeLayoutBox_ = moveLayoutRect(iframeBox, -box.left, -box.top);\n    }\n  }\n\n  /**\n   * @override\n   */\n  getIntersectionElementLayoutBox() {\n    if (!this.xOriginIframeHandler_ || !this.xOriginIframeHandler_.iframe) {\n      return super.getIntersectionElementLayoutBox();\n    }\n    const box = this.getLayoutBox();\n    if (!this.iframeLayoutBox_) {\n      this.measureIframeLayoutBox_();\n    }\n\n    const iframe = /** @type {!../../../src/layout-rect.LayoutRectDef} */(\n      dev().assert(this.iframeLayoutBox_));\n    return moveLayoutRect(iframe, box.left, box.top);\n  }\n\n  /** @override */\n  layoutCallback() {\n    if (this.layoutPromise_) {\n      return this.layoutPromise_;\n    }\n    user().assert(!this.isInFixedContainer_,\n        '<amp-ad> is not allowed to be placed in elements with ' +\n        'position:fixed: %s', this.element);\n\n    const consentPromise = this.getConsentState();\n    const consentPolicyId = super.getConsentPolicy();\n    const sharedDataPromise = consentPolicyId\n      ? getConsentPolicySharedData(this.getAmpDoc(), consentPolicyId)\n      : Promise.resolve(null);\n\n    this.layoutPromise_ = Promise.all(\n        [getAdCid(this), consentPromise, sharedDataPromise]).then(consents => {\n      const opt_context = {\n        clientId: consents[0] || null,\n        container: this.container_,\n        initialConsentState: consents[1],\n        consentSharedData: consents[2],\n      };\n\n      // In this path, the request and render start events are entangled,\n      // because both happen inside a cross-domain iframe.  Separating them\n      // here, though, allows us to measure the impact of ad throttling via\n      // incrementLoadingAds().\n      const iframe = getIframe(toWin(this.element.ownerDocument.defaultView),\n          this.element, this.type_, opt_context,\n          {disallowCustom: this.config.remoteHTMLDisabled});\n      this.xOriginIframeHandler_ = new AmpAdXOriginIframeHandler(\n          this);\n      return this.xOriginIframeHandler_.init(iframe);\n    });\n    incrementLoadingAds(this.win, this.layoutPromise_);\n    return this.layoutPromise_;\n  }\n\n  /**\n   * @param {boolean} inViewport\n   * @override\n   */\n  viewportCallback(inViewport) {\n    if (this.xOriginIframeHandler_) {\n      this.xOriginIframeHandler_.viewportCallback(inViewport);\n    }\n  }\n\n  /** @override  */\n  unlayoutCallback() {\n    this.layoutPromise_ = null;\n    this.uiHandler.applyUnlayoutUI();\n    if (this.xOriginIframeHandler_) {\n      this.xOriginIframeHandler_.freeXOriginIframe();\n      this.xOriginIframeHandler_ = null;\n    }\n    return true;\n  }\n\n  /** @override */\n  createPlaceholderCallback() {\n    return this.uiHandler.createPlaceholder();\n  }\n\n  /**\n   * @return {!Promise<?CONSENT_POLICY_STATE>}\n   */\n  getConsentState() {\n    const consentPolicyId = super.getConsentPolicy();\n    return consentPolicyId\n      ? getConsentPolicyState(this.getAmpDoc(), consentPolicyId)\n      : Promise.resolve(null);\n  }\n\n  /**\n  * Calculates and attempts to set the appropriate height & width for a\n  * responsive full width ad unit.\n  * @return {!Promise}\n  * @private\n  */\n  attemptFullWidthSizeChange_() {\n    const viewportSize = this.getViewport().getSize();\n    const maxHeight = Math.min(MAX_FULL_WIDTH_HEIGHT, viewportSize.height);\n    const ratio = this.config.fullWidthHeightRatio;\n    const idealHeight = Math.round(viewportSize.width / ratio);\n    const height = clamp(idealHeight, MIN_FULL_WIDTH_HEIGHT, maxHeight);\n    const {width} = viewportSize;\n    // Attempt to resize to the correct height. The width should already be\n    // 100vw, but is fixed here so that future resizes of the viewport don't\n    // affect it.\n\n    return this.attemptChangeSize(height, width).then(\n        () => {\n          dev().info(TAG_3P_IMPL, `Size change accepted: ${width}x${height}`);\n        },\n        () => {\n          dev().info(TAG_3P_IMPL, `Size change rejected: ${width}x${height}`);\n        }\n    );\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {AmpAdUIHandler} from './amp-ad-ui';\nimport {CommonSignals} from '../../../src/common-signals';\nimport {LayoutPriority} from '../../../src/layout';\nimport {Services} from '../../../src/services';\nimport {addParamToUrl} from '../../../src/url';\nimport {ancestorElementsByTag} from '../../../src/dom';\nimport {\n  childElementByTag,\n  removeChildren,\n} from '../../../src/dom';\nimport {hasOwn} from '../../../src/utils/object';\nimport {isLayoutSizeDefined} from '../../../src/layout';\nimport {user} from '../../../src/log';\n\n/** @const {string} Tag name for custom ad implementation. */\nexport const TAG_AD_CUSTOM = 'amp-ad-custom';\n\n/** @var {Object} A map of promises for each value of data-url. The promise\n *  will fetch data for the URL for the ad server, and return it as a map of\n *  objects, keyed by slot; each object contains the variables to be\n *   substituted into the mustache template. */\nconst ampCustomadXhrPromises = {};\n\n/** @var {Object} a map of full urls (i.e. including the ampslots parameter)\n * for each value of data-url */\nlet ampCustomadFullUrls = null;\n\nexport class AmpAdCustom extends AMP.BaseElement {\n\n  /** @param {!AmpElement} element */\n  constructor(element) {\n    super(element);\n    /** @private {?string} The base URL of the ad server for this ad */\n    this.url_ = null;\n\n    /** @private {?string} A string identifying this ad slot: the server's\n     *  responses will be keyed by slot */\n    this.slot_ = null;\n\n    /** {?AmpAdUIHandler} */\n    this.uiHandler = null;\n  }\n\n  /** @override */\n  getLayoutPriority() {\n    // Since this is AMPHTML we are trusting that it will load responsibly\n    return LayoutPriority.CONTENT;\n  }\n\n  /** @override **/\n  isLayoutSupported(layout) {\n    /** @TODO Add proper support for more layouts, and figure out which ones\n     *  we're permitting */\n    return isLayoutSizeDefined(layout);\n  }\n\n  /**\n   * Builds AmpAdUIHandler callback\n   */\n  buildCallback() {\n    this.url_ = this.element.getAttribute('data-url');\n    this.slot_ = this.element.getAttribute('data-slot');\n    // Ensure that the slot value is legal\n    user().assert(this.slot_ === null || this.slot_.match(/^[0-9a-z]+$/),\n        'custom ad slot should be alphanumeric: ' + this.slot_);\n\n    this.uiHandler = new AmpAdUIHandler(this);\n  }\n\n  /** @override */\n  layoutCallback() {\n    /** @const {string} fullUrl */\n    const fullUrl = this.getFullUrl_();\n    // if we have cached the response, find it, otherwise fetch\n    const responsePromise = ampCustomadXhrPromises[fullUrl] ||\n        Services.xhrFor(this.win).fetchJson(fullUrl).then(res => res.json());\n    if (this.slot_ !== null) {\n      // Cache this response if using `data-slot` feature so only one request\n      // is made per url\n      ampCustomadXhrPromises[fullUrl] = responsePromise;\n    }\n    return responsePromise.then(data => {\n      // We will get here when the data has been fetched from the server\n      let templateData = data;\n      if (this.slot_ !== null) {\n        templateData = hasOwn(data, this.slot_) ? data[this.slot_] :\n          null;\n      }\n\n      if (!templateData || typeof templateData != 'object') {\n        this.uiHandler.applyNoContentUI();\n        return;\n      }\n\n      templateData = this.handleTemplateData_(templateData);\n\n      this.renderStarted();\n\n      try {\n        Services.templatesFor(this.win)\n            .findAndRenderTemplate(this.element, templateData)\n            .then(renderedElement => {\n              // Get here when the template has been rendered Clear out the\n              // child template and replace it by the rendered version Note that\n              // we can't clear templates that's not ad's child because they\n              // maybe used by other ad component.\n              removeChildren(this.element);\n              this.element.appendChild(renderedElement);\n              this.signals().signal(CommonSignals.INI_LOAD);\n            });\n      } catch (e) {\n        this.uiHandler.applyNoContentUI();\n      }\n    });\n  }\n\n  /**\n   * Handles the template data response.\n   * There are two types of templateData format\n   * Format option 1\n   * {\n   *   'templateId': {},\n   *   'vars': {},\n   *   'data': {\n   *     'a': '1',\n   *     'b': '2'\n   *   }\n   * }\n   * or format option 2\n   * {\n   *  'a': '1',\n   *  'b': '2'\n   * }\n   * if `templateId` or `vars` are not specified.\n   *\n   * @param {!JsonObject} templateData\n   * @return {!JsonObject}\n   */\n  handleTemplateData_(templateData) {\n    if (childElementByTag(this.element, 'template')) {\n      // Need to check for template attribute if it's allowed in amp-ad tag\n      return templateData;\n    }\n\n    // If use remote template specified by response\n    user().assert(templateData['templateId'], 'TemplateId not specified');\n\n    user().assert(\n        templateData['data'] && typeof templateData['data'] == 'object',\n        'Template data not specified');\n\n    this.element.setAttribute('template', templateData['templateId']);\n\n    if (templateData['vars'] && typeof templateData['vars'] == 'object') {\n      // Support for vars\n      const vars = templateData['vars'];\n      const keys = Object.keys(vars);\n      for (let i = 0; i < keys.length; i++) {\n        const attrName = 'data-vars-' + keys[i];\n        try {\n          this.element.setAttribute(attrName, vars[keys[i]]);\n        } catch (e) {\n          this.user().error(TAG_AD_CUSTOM, 'Fail to set attribute: ', e);\n        }\n      }\n    }\n\n    return templateData['data'];\n  }\n\n  /** @override  */\n  unlayoutCallback() {\n    this.uiHandler.applyUnlayoutUI();\n    return true;\n  }\n\n  /** @override */\n  createPlaceholderCallback() {\n    return this.uiHandler.createPlaceholder();\n  }\n\n  /**\n   * @private getFullUrl_ Get a URL which includes a parameter indicating\n   * all slots to be fetched from this web server URL\n   * @return {string} The URL with the \"ampslots\" parameter appended\n   */\n  getFullUrl_() {\n    // If this ad doesn't have a slot defined, just return the base URL\n    if (this.slot_ === null) {\n      return /** @type {string} */ (this.url_);\n    }\n    if (ampCustomadFullUrls === null) {\n      // The array of ad urls has not yet been built, do so now.\n      ampCustomadFullUrls = {};\n      const slots = {};\n\n      // Get the parent body of this amp-ad element. It could be the body of\n      // the main document, or it could be an enclosing iframe.\n      const body = ancestorElementsByTag(this.element, 'BODY')[0];\n      const elements = body.querySelectorAll('amp-ad[type=custom]');\n      for (let index = 0; index < elements.length; index++) {\n        const elem = elements[index];\n        const url = elem.getAttribute('data-url');\n        const slotId = elem.getAttribute('data-slot');\n        if (slotId !== null) {\n          if (!(url in slots)) {\n            slots[url] = [];\n          }\n          slots[url].push(encodeURIComponent(slotId));\n        }\n      }\n      for (const baseUrl in slots) {\n        ampCustomadFullUrls[baseUrl] = addParamToUrl(baseUrl, 'ampslots',\n            slots[baseUrl].join(','));\n      }\n    }\n    return ampCustomadFullUrls[this.url_];\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use baseInstance file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {getAdContainer} from '../../../src/ad-helper';\n\nexport class AmpAdUIHandler {\n\n  /**\n   * @param {!AMP.BaseElement} baseInstance\n   */\n  constructor(baseInstance) {\n    /** @private {!AMP.BaseElement} */\n    this.baseInstance_ = baseInstance;\n\n    /** @private {!Element} */\n    this.element_ = baseInstance.element;\n\n    /** @private @const {!Document} */\n    this.doc_ = baseInstance.win.document;\n\n    if (!baseInstance.getFallback()) {\n      const fallback = this.addDefaultUiComponent_('fallback');\n      if (fallback) {\n        this.baseInstance_.element.appendChild(fallback);\n      }\n    }\n  }\n\n  /**\n   * Create a default placeholder if not provided.\n   * Should be called in baseElement createPlaceholderCallback.\n   */\n  createPlaceholder() {\n    return this.addDefaultUiComponent_('placeholder');\n  }\n\n  /**\n   * Apply UI for laid out ad with no-content\n   * Order: try collapse -> apply provided fallback -> apply default fallback\n   */\n  applyNoContentUI() {\n    if (getAdContainer(this.element_) == 'AMP-STICKY-AD') {\n      // Special case: force collapse sticky-ad if no content.\n      this.baseInstance_./*OK*/collapse();\n      return;\n    }\n    // The order here is collapse > user provided fallback > default fallback\n    this.baseInstance_.attemptCollapse().catch(() => {\n      this.baseInstance_.mutateElement(() => {\n        this.baseInstance_.togglePlaceholder(false);\n        this.baseInstance_.toggleFallback(true);\n      });\n    });\n  }\n\n  /**\n   * Apply UI for unlaid out ad: Hide fallback.\n   * Note: No need to togglePlaceholder here, unlayout show it by default.\n   */\n  applyUnlayoutUI() {\n    this.baseInstance_.mutateElement(() => {\n      this.baseInstance_.toggleFallback(false);\n    });\n  }\n\n  /**\n   * @param {string} name\n   * @return {?Element}\n   * @private\n   */\n  addDefaultUiComponent_(name) {\n    if (this.element_.tagName == 'AMP-EMBED') {\n      // Do nothing for amp-embed element;\n      return null;\n    }\n    const uiComponent = this.doc_.createElement('div');\n    uiComponent.setAttribute(name, '');\n\n    const content = this.doc_.createElement('div');\n    content.classList.add('i-amphtml-ad-default-holder');\n\n    // TODO(aghassemi, #4146) i18n\n    content.setAttribute('data-ad-holder-text', 'Ad');\n    uiComponent.appendChild(content);\n\n    return uiComponent;\n  }\n\n  /**\n   * @param {number|string|undefined} height\n   * @param {number|string|undefined} width\n   * @param {number} iframeHeight\n   * @param {number} iframeWidth\n   * @return {!Promise<!Object>}\n   */\n  updateSize(height, width, iframeHeight, iframeWidth) {\n    // Calculate new width and height of the container to include the padding.\n    // If padding is negative, just use the requested width and height directly.\n    let newHeight, newWidth;\n    height = parseInt(height, 10);\n    if (!isNaN(height)) {\n      newHeight = Math.max(this.element_./*OK*/offsetHeight +\n          height - iframeHeight, height);\n    }\n    width = parseInt(width, 10);\n    if (!isNaN(width)) {\n      newWidth = Math.max(this.element_./*OK*/offsetWidth +\n          width - iframeWidth, width);\n    }\n\n    /** @type {!Object<boolean, number|undefined, number|undefined>} */\n    const resizeInfo = {\n      success: true,\n      newWidth,\n      newHeight,\n    };\n\n    if (!newHeight && !newWidth) {\n      return Promise.reject(new Error('undefined width and height'));\n    }\n\n    if (getAdContainer(this.element_) == 'AMP-STICKY-AD') {\n      // Special case: force collapse sticky-ad if no content.\n      resizeInfo.success = false;\n      return Promise.resolve(resizeInfo);\n    }\n    return this.baseInstance_.attemptChangeSize(\n        newHeight, newWidth).then(() => {\n      return resizeInfo;\n    }, () => {\n      resizeInfo.success = false;\n      return resizeInfo;\n    });\n  }\n}\n\n// Make the class available to other late loaded amp-ad implementations\n// without them having to depend on it directly.\nAMP.AmpAdUIHandler = AmpAdUIHandler;\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  ADSENSE_EXPERIMENTS,\n  ADSENSE_EXP_NAMES,\n} from '../../amp-ad-network-adsense-impl/0.1/adsense-a4a-config';\nimport {\n  CONSTANTS,\n  MessageType,\n} from '../../../src/3p-frame-messaging';\nimport {CommonSignals} from '../../../src/common-signals';\nimport {Deferred} from '../../../src/utils/promise';\nimport {\n  IntersectionObserver,\n} from '../../../src/intersection-observer';\nimport {Services} from '../../../src/services';\nimport {\n  SubscriptionApi,\n  listenFor,\n  listenForOncePromise,\n  postMessageToWindows,\n} from '../../../src/iframe-helper';\nimport {dev} from '../../../src/log';\nimport {dict} from '../../../src/utils/object';\nimport {getData, loadPromise} from '../../../src/event-helper';\nimport {\n  getExperimentBranch,\n  isExperimentOn,\n} from '../../../src/experiments';\nimport {getHtml} from '../../../src/get-html';\nimport {removeElement} from '../../../src/dom';\nimport {reportErrorToAnalytics} from '../../../src/error';\nimport {setStyle} from '../../../src/style';\nimport {throttle} from '../../../src/utils/rate-limit';\n\nconst VISIBILITY_TIMEOUT = 10000;\n\nconst MIN_INABOX_POSITION_EVENT_INTERVAL = 100;\n\n\nexport class AmpAdXOriginIframeHandler {\n\n  /**\n   * @param {!./amp-ad-3p-impl.AmpAd3PImpl|!../../amp-a4a/0.1/amp-a4a.AmpA4A} baseInstance\n   */\n  constructor(baseInstance) {\n    /** @private {!Window} */\n    this.win_ = baseInstance.win;\n\n    /** @private */\n    this.baseInstance_ = baseInstance;\n\n    /** @private {!Element} */\n    this.element_ = baseInstance.element;\n\n    /** @private {?AMP.AmpAdUIHandler} */\n    this.uiHandler_ = baseInstance.uiHandler;\n\n    /** {?Element} iframe instance */\n    this.iframe = null;\n\n    /** @private {?IntersectionObserver} */\n    this.intersectionObserver_ = null;\n\n    /** @private {SubscriptionApi} */\n    this.embedStateApi_ = null;\n\n    /** @private {?SubscriptionApi} */\n    this.inaboxPositionApi_ = null;\n\n    /** @private {boolean} */\n    this.isInaboxPositionApiInit_ = false;\n\n    /** @private {!Array<!Function>} functions to unregister listeners */\n    this.unlisteners_ = [];\n\n    /** @private @const {!../../../src/service/viewer-impl.Viewer} */\n    this.viewer_ = Services.viewerForDoc(this.baseInstance_.getAmpDoc());\n\n    /** @private @const {!../../../src/service/viewport/viewport-impl.Viewport} */\n    this.viewport_ = Services.viewportForDoc(this.baseInstance_.getAmpDoc());\n\n    /** @private {boolean} */\n    this.sendPositionPending_ = false;\n  }\n\n\n  /**\n   * Sets up listeners and iframe state for iframe containing ad creative.\n   * @param {!Element} iframe\n   * @param {boolean=} opt_isA4A when true do not listen to ad response\n   * @return {!Promise} awaiting render complete promise\n   */\n  init(iframe, opt_isA4A) {\n    dev().assert(\n        !this.iframe, 'multiple invocations of init without destroy!');\n    this.iframe = iframe;\n    this.iframe.setAttribute('scrolling', 'no');\n    this.baseInstance_.applyFillContent(this.iframe);\n    const timer = Services.timerFor(this.baseInstance_.win);\n\n    // Init IntersectionObserver service.\n    this.intersectionObserver_ = new IntersectionObserver(\n        this.baseInstance_, this.iframe, true);\n\n    this.embedStateApi_ = new SubscriptionApi(\n        this.iframe, 'send-embed-state', true,\n        () => this.sendEmbedInfo_(this.baseInstance_.isInViewport()));\n\n    // TODO(bradfrizzell): Would be better to turn this on if\n    // A4A.isXhrEnabled() is false, or if we simply decide it is\n    // ok to turn this on for all traffic.\n    if (getExperimentBranch(\n        this.win_, ADSENSE_EXP_NAMES.UNCONDITIONED_CANONICAL) ==\n       ADSENSE_EXPERIMENTS.UNCONDITIONED_CANONICAL_EXP ||\n       getExperimentBranch(this.win_, ADSENSE_EXP_NAMES.CANONICAL) ==\n        ADSENSE_EXPERIMENTS.CANONICAL_EXP ||\n       isExperimentOn(this.win_, 'inabox-position-api')) {\n      // To provide position to inabox.\n      this.inaboxPositionApi_ = new SubscriptionApi(\n          this.iframe, MessageType.SEND_POSITIONS, true, () => {\n            // TODO(@zhouyx): Make sendPosition_ only send to\n            // message origin iframe\n            this.sendPosition_();\n            this.registerPosition_();\n          });\n    }\n    // Triggered by context.reportRenderedEntityIdentifier() inside the ad\n    // iframe.\n    listenForOncePromise(this.iframe, 'entity-id', true)\n        .then(info => {\n          this.element_.creativeId = info.data['id'];\n        });\n\n    this.handleOneTimeRequest_(MessageType.GET_HTML, payload => {\n      const selector = payload['selector'];\n      const attributes = payload['attributes'];\n      let content = '';\n      if (this.element_.hasAttribute('data-html-access-allowed')) {\n        content = getHtml(this.baseInstance_.win, selector, attributes);\n      }\n      return Promise.resolve(content);\n    });\n\n    this.handleOneTimeRequest_(MessageType.GET_CONSENT_STATE, () => {\n      return this.baseInstance_.getConsentState().then(consentState => {\n        return {consentState};\n      });\n    });\n\n    // Install iframe resize API.\n    this.unlisteners_.push(listenFor(this.iframe, 'embed-size',\n        (data, source, origin) => {\n          if (!!data['hasOverflow']) {\n            this.element_.warnOnMissingOverflow = false;\n          }\n          this.handleResize_(data['height'], data['width'], source, origin);\n        }, true, true));\n\n    this.unlisteners_.push(this.viewer_.onVisibilityChanged(() => {\n      this.sendEmbedInfo_(this.baseInstance_.isInViewport());\n    }));\n\n    this.unlisteners_.push(listenFor(this.iframe,\n        MessageType.USER_ERROR_IN_IFRAME, data => {\n          this.userErrorForAnalytics_(data['message']);\n        }, true, true /* opt_includingNestedWindows */));\n\n    // Iframe.onload normally called by the Ad after full load.\n    const iframeLoadPromise = loadPromise(this.iframe).then(() => {\n      // Wait just a little to allow `no-content` message to arrive.\n      if (this.iframe) {\n        // Chrome does not reflect the iframe readystate.\n        this.iframe.readyState = 'complete';\n      }\n      return timer.promise(10);\n    });\n\n    // Calculate render-start and no-content signals.\n    const {\n      promise: renderStartPromise,\n      resolve: renderStartResolve,\n    } = new Deferred();\n    const {\n      promise: noContentPromise,\n      resolve: noContentResolve,\n    } = new Deferred();\n\n    if (this.baseInstance_.config &&\n            this.baseInstance_.config.renderStartImplemented) {\n      // When `render-start` is supported, these signals are mutually\n      // exclusive. Whichever arrives first wins.\n      listenForOncePromise(this.iframe,\n          ['render-start', 'no-content'], true).then(info => {\n        const {data} = info;\n        if (data['type'] == 'render-start') {\n          this.renderStart_(info);\n          renderStartResolve();\n        } else {\n          this.noContent_();\n          noContentResolve();\n        }\n      });\n    } else {\n      // If `render-start` is not supported, listen to `bootstrap-loaded`.\n      // This will avoid keeping the Ad empty until it's fully loaded, which\n      // could be a long time.\n      listenForOncePromise(this.iframe, 'bootstrap-loaded', true).then(() => {\n        this.renderStart_();\n        renderStartResolve();\n      });\n      // Likewise, no-content is observed here. However, it's impossible to\n      // assure exclusivity between `no-content` and `bootstrap-loaded` b/c\n      // `bootstrap-loaded` always arrives first.\n      listenForOncePromise(this.iframe, 'no-content', true).then(() => {\n        this.noContent_();\n        noContentResolve();\n      });\n    }\n\n    // Wait for initial load signal. Notice that this signal is not\n    // used to resolve the final layout promise because iframe may still be\n    // consuming significant network and CPU resources.\n    listenForOncePromise(this.iframe, CommonSignals.INI_LOAD, true).then(() => {\n      // TODO(dvoytenko, #7788): ensure that in-a-box \"ini-load\" message is\n      // received here as well.\n      this.baseInstance_.signals().signal(CommonSignals.INI_LOAD);\n    });\n\n    this.element_.appendChild(this.iframe);\n    if (opt_isA4A) {\n      // A4A writes creative frame directly to page once creative is received\n      // and therefore does not require render start message so attach and\n      // impose no loader delay.  Network is using renderStart or\n      // bootstrap-loaded to indicate ad request was sent, either way we know\n      // that occurred for Fast Fetch.\n      this.renderStart_();\n      renderStartResolve();\n    } else {\n      // Set iframe initially hidden which will be removed on render-start or\n      // load, whichever is earlier.\n      setStyle(this.iframe, 'visibility', 'hidden');\n    }\n\n    Promise.race([\n      renderStartPromise,\n      iframeLoadPromise,\n      timer.promise(VISIBILITY_TIMEOUT),\n    ]).then(() => {\n      if (this.iframe) {\n        setStyle(this.iframe, 'visibility', '');\n      }\n    });\n\n    // The actual ad load is eariliest of iframe.onload event and no-content.\n    return Promise.race([iframeLoadPromise, noContentPromise]);\n  }\n\n  /**\n   * @param {string} requestType\n   * @param {function(*)} getter\n   * @private\n   */\n  handleOneTimeRequest_(requestType, getter) {\n    this.unlisteners_.push(listenFor(this.iframe, requestType,\n        (info, source, origin) => {\n          if (!this.iframe) {\n            return;\n          }\n\n          const messageId = info[CONSTANTS.messageIdFieldName];\n          const payload = info[CONSTANTS.payloadFieldName];\n\n          getter(payload).then(content => {\n            const result = dict();\n            result[CONSTANTS.messageIdFieldName] = messageId;\n            result[CONSTANTS.contentFieldName] = content;\n            postMessageToWindows(\n                dev().assertElement(this.iframe), [{win: source, origin}],\n                requestType + CONSTANTS.responseTypeSuffix,\n                result, true\n            );\n          });\n        }, true /* opt_is3P */, false /* opt_includingNestedWindows */));\n  }\n\n  /**\n   * callback functon on receiving render-start\n   * @param {{data: !JsonObject}=} opt_info\n   * @private\n   */\n  renderStart_(opt_info) {\n    this.baseInstance_.renderStarted();\n    if (!opt_info) {\n      return;\n    }\n    const data = getData(opt_info);\n    this.handleResize_(\n        data['height'], data['width'], opt_info['source'], opt_info['origin']);\n  }\n\n  /**\n   * Cleans up the listeners on the cross domain ad iframe and frees the\n   * iframe resource.\n   * @param {boolean=} opt_keep\n   */\n  freeXOriginIframe(opt_keep) {\n    this.cleanup_();\n    // If ask to keep the iframe.\n    // Use in the case of no-content and iframe is a master iframe.\n    if (opt_keep) {\n      return;\n    }\n    if (this.iframe) {\n      removeElement(this.iframe);\n      this.iframe = null;\n    }\n  }\n\n  /**\n   * Cleans up listeners on the ad, and apply the default UI for ad.\n   * @private\n   */\n  noContent_() {\n    if (!this.iframe) {\n      // unlayout already called\n      return;\n    }\n    this.freeXOriginIframe(this.iframe.name.indexOf('_master') >= 0);\n    this.uiHandler_.applyNoContentUI();\n  }\n\n  /**\n   * Cleans up listeners on the ad iframe.\n   * @private\n   */\n  cleanup_() {\n    this.unlisteners_.forEach(unlistener => unlistener());\n    this.unlisteners_.length = 0;\n    if (this.embedStateApi_) {\n      this.embedStateApi_.destroy();\n      this.embedStateApi_ = null;\n    }\n    if (this.inaboxPositionApi_) {\n      this.inaboxPositionApi_.destroy();\n      this.inaboxPositionApi_ = null;\n    }\n    if (this.intersectionObserver_) {\n      this.intersectionObserver_.destroy();\n      this.intersectionObserver_ = null;\n    }\n  }\n\n  /**\n   * Updates the element's dimensions to accommodate the iframe's\n   * requested dimensions. Notifies the window that request the resize\n   * of success or failure.\n   * @param {number|string|undefined} height\n   * @param {number|string|undefined} width\n   * @param {!Window} source\n   * @param {string} origin\n   * @private\n   */\n  handleResize_(height, width, source, origin) {\n    this.baseInstance_.getVsync().mutate(() => {\n      if (!this.iframe) {\n        // iframe can be cleanup before vsync.\n        return;\n      }\n      const iframeHeight = this.iframe./*OK*/offsetHeight;\n      const iframeWidth = this.iframe./*OK*/offsetWidth;\n      this.uiHandler_.updateSize(height, width, iframeHeight,\n          iframeWidth).then(info => {\n        this.sendEmbedSizeResponse_(info.success,\n            info.newWidth, info.newHeight, source, origin);\n      }, () => {});\n    });\n  }\n\n  /**\n   * Sends a response to the window which requested a resize.\n   * @param {boolean} success\n   * @param {number} requestedWidth\n   * @param {number} requestedHeight\n   * @param {!Window} source\n   * @param {string} origin\n   * @private\n   */\n  sendEmbedSizeResponse_(success, requestedWidth, requestedHeight, source,\n    origin) {\n    // The iframe may have been removed by the time we resize.\n    if (!this.iframe) {\n      return;\n    }\n    postMessageToWindows(\n        this.iframe,\n        [{win: source, origin}],\n        success ? 'embed-size-changed' : 'embed-size-denied',\n        dict({\n          'requestedWidth': requestedWidth,\n          'requestedHeight': requestedHeight,\n        }),\n        true);\n  }\n\n  /**\n   * @param {boolean} inViewport\n   * @private\n   */\n  sendEmbedInfo_(inViewport) {\n    if (!this.embedStateApi_) {\n      return;\n    }\n    this.embedStateApi_.send('embed-state', dict({\n      'inViewport': inViewport,\n      'pageHidden': !this.viewer_.isVisible(),\n    }));\n  }\n\n  /**\n   * Retrieve iframe position entry in next animation frame.\n   * @private\n   */\n  getIframePositionPromise_() {\n    return this.viewport_.getClientRectAsync(\n        dev().assertElement(this.iframe)).then(position => {\n      dev().assert(position,\n          'element clientRect should intersects with root clientRect');\n      const viewport = this.viewport_.getRect();\n      return dict({\n        'targetRect': position,\n        'viewportRect': viewport,\n      });\n    });\n  }\n\n  /** @private */\n  sendPosition_() {\n    if (this.sendPositionPending_) {\n      // Only send once in single animation frame.\n      return;\n    }\n\n    this.sendPositionPending_ = true;\n    this.getIframePositionPromise_().then(position => {\n      this.sendPositionPending_ = false;\n      this.inaboxPositionApi_.send(MessageType.POSITION, position);\n    });\n  }\n\n  /** @private */\n  registerPosition_() {\n    if (this.isInaboxPositionApiInit_) {\n      // only register to viewport scroll/resize once\n      return;\n    }\n\n    this.isInaboxPositionApiInit_ = true;\n    // Send window scroll/resize event to viewport.\n    this.unlisteners_.push(this.viewport_.onScroll(throttle(this.win_, () => {\n      this.getIframePositionPromise_().then(position => {\n        this.inaboxPositionApi_.send(MessageType.POSITION, position);\n      });\n    }, MIN_INABOX_POSITION_EVENT_INTERVAL)));\n    this.unlisteners_.push(this.viewport_.onResize(() => {\n      this.getIframePositionPromise_().then(position => {\n        this.inaboxPositionApi_.send(MessageType.POSITION, position);\n      });\n    }));\n  }\n\n  /**\n   * See BaseElement method.\n   * @param {boolean} inViewport\n   */\n  viewportCallback(inViewport) {\n    if (this.intersectionObserver_) {\n      this.intersectionObserver_.onViewportCallback(inViewport);\n    }\n    this.sendEmbedInfo_(inViewport);\n  }\n\n\n  /**\n   * See BaseElement method.\n   */\n  onLayoutMeasure() {\n    // When the framework has the need to remeasure us, our position might\n    // have changed. Send an intersection record if needed.\n    if (this.intersectionObserver_) {\n      this.intersectionObserver_.fire();\n    }\n  }\n\n  /**\n   * @param {string} message\n   * @private\n   */\n  userErrorForAnalytics_(message) {\n    if (typeof message == 'string') {\n      const e = new Error(message);\n      e.name = '3pError';\n      reportErrorToAnalytics(e, this.baseInstance_.win);\n    }\n  }\n}\n\n// Make the class available to other late loaded amp-ad implementations\n// without them having to depend on it directly.\nAMP.AmpAdXOriginIframeHandler = AmpAdXOriginIframeHandler;\n","/* Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {AmpAd3PImpl} from './amp-ad-3p-impl';\nimport {AmpAdCustom} from './amp-ad-custom';\nimport {CSS} from '../../../build/amp-ad-0.1.css';\nimport {Services} from '../../../src/services';\nimport {adConfig} from '../../../ads/_config';\nimport {getA4ARegistry} from '../../../ads/_a4a-config';\nimport {hasOwn} from '../../../src/utils/object';\nimport {user} from '../../../src/log';\n\n\n/**\n * Construct ad network type-specific tag and script name.  Note that this\n * omits the version number and '.js' suffix for the extension script, which\n * will be handled by the extension loader.\n *\n * @param {string} type\n * @return {string}\n * @private\n */\nfunction networkImplementationTag(type) {\n  return `amp-ad-network-${type}-impl`;\n}\n\nexport class AmpAd extends AMP.BaseElement {\n\n  /** @override */\n  isLayoutSupported(unusedLayout) {\n    // TODO(jridgewell, #5980, #8218): ensure that unupgraded calls are not\n    // done for `isLayoutSupported`.\n    return true;\n  }\n\n  /** @override */\n  upgradeCallback() {\n    const a4aRegistry = getA4ARegistry();\n    // Block whole ad load if a consent is needed.\n    /** @const {string} */\n    const consentId = this.element.getAttribute('data-consent-notification-id');\n    const consent = consentId\n      ? Services.userNotificationManagerForDoc(this.element)\n          .then(service => service.get(consentId))\n      : Promise.resolve();\n    const type = this.element.getAttribute('type');\n    return consent.then(() => {\n      const isCustom = type === 'custom';\n      user().assert(isCustom || hasOwn(adConfig, type)\n          || hasOwn(a4aRegistry, type), `Unknown ad type \"${type}\"`);\n\n      // Check for the custom ad type (no ad network, self-service)\n      if (isCustom) {\n        return new AmpAdCustom(this.element);\n      }\n\n      this.win.ampAdSlotIdCounter = this.win.ampAdSlotIdCounter || 0;\n      const slotId = this.win.ampAdSlotIdCounter++;\n\n      return new Promise(resolve => {\n        this.getVsync().mutate(() => {\n          this.element.setAttribute('data-amp-slot-index', slotId);\n\n          const useRemoteHtml = (!(adConfig[type] || {}).remoteHTMLDisabled &&\n              this.win.document.querySelector('meta[name=amp-3p-iframe-src]'));\n          // TODO(tdrl): Check amp-ad registry to see if they have this already.\n          // TODO(a4a-cam): Shorten this predicate.\n          if (!a4aRegistry[type] ||\n              // Note that predicate execution may have side effects.\n              !a4aRegistry[type](this.win, this.element, useRemoteHtml)) {\n            // Either this ad network doesn't support Fast Fetch, its Fast\n            // Fetch implementation has explicitly opted not to handle this\n            // tag, or this page uses remote.html which is inherently\n            // incompatible with Fast Fetch. Fall back to Delayed Fetch.\n            return resolve(new AmpAd3PImpl(this.element));\n          }\n\n          const extensionTagName = networkImplementationTag(type);\n          this.element.setAttribute('data-a4a-upgrade-type', extensionTagName);\n          resolve(Services.extensionsFor(this.win)\n              .loadElementClass(extensionTagName)\n              .then(ctor => new ctor(this.element))\n              .catch(error => {\n              // Work around presubmit restrictions.\n                const TAG = this.element.tagName;\n                // Report error and fallback to 3p\n                this.user().error(\n                    TAG, 'Unable to load ad implementation for type ',\n                    type, ', falling back to 3p, error: ', error);\n                return new AmpAd3PImpl(this.element);\n              }));\n        });\n      });\n    });\n  }\n}\n\nAMP.extension('amp-ad', '0.1', AMP => {\n  AMP.registerElement('amp-ad', AmpAd, CSS);\n  AMP.registerElement('amp-embed', AmpAd);\n});\n","/* Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Deferred} from '../../../src/utils/promise';\nimport {Services} from '../../../src/services';\nimport {user} from '../../../src/log';\n\n/**\n * Store loading ads info within window to ensure it can be properly stored\n * across separately compiled binaries that share load throttling.\n * @const ID of window variable used to track 3p ads waiting to load.\n */\nconst LOADING_ADS_WIN_ID_ = '3pla';\n\n/** @private {?Promise} resolves when no 3p throttle */\nlet throttlePromise_ = null;\n/** @private {?Function} resolver for throttle promise */\nlet throttlePromiseResolver_ = null;\n\n/**\n * @param {!Window} win\n * @return {boolean} Whether 3p is currently throttled.\n */\nexport function is3pThrottled(win) {\n  return !!win[LOADING_ADS_WIN_ID_];\n}\n\n/** @return {!Promise} resolves when no 3p throttle */\nexport function waitFor3pThrottle() {\n  return throttlePromise_ || Promise.resolve();\n}\n\n/**\n * @param {!Element} element\n * @return {?number} number if explicit value should be used otherwise super\n *    default should be used.\n */\nexport function getAmpAdRenderOutsideViewport(element) {\n  const rawValue = element.getAttribute('data-loading-strategy');\n  if (rawValue == null) {\n    return null;\n  }\n  // Ad opts into lazier loading strategy where we only load ads that are\n  // at closer given number of viewports away.\n  if (rawValue == 'prefer-viewability-over-views' || rawValue == '') {\n    return 1.25;\n  }\n  const errorMessage =\n      'Value of data-loading-strategy should be a float number in range ' +\n      'of [0, 3], but got ' + rawValue;\n  const viewportNumber =\n      user().assertNumber(parseFloat(rawValue), errorMessage);\n  user().assert(viewportNumber >= 0 && viewportNumber <= 3, errorMessage);\n  return viewportNumber;\n}\n\n/**\n * Increments loading ads count for throttling.\n * @param {!Window} win\n * @param {!Promise=} opt_loadingPromise\n */\nexport function incrementLoadingAds(win, opt_loadingPromise) {\n  if (win[LOADING_ADS_WIN_ID_] === undefined) {\n    win[LOADING_ADS_WIN_ID_] = 0;\n  }\n  win[LOADING_ADS_WIN_ID_]++;\n\n  if (!throttlePromise_) {\n    const deferred = new Deferred();\n    throttlePromise_ = deferred.promise;\n    throttlePromiseResolver_ = deferred.resolve;\n  }\n\n  Services.timerFor(win)\n      .timeoutPromise(1000, opt_loadingPromise)\n      .catch(() => {})\n      .then(() => {\n        if (!--win[LOADING_ADS_WIN_ID_]) {\n          throttlePromiseResolver_();\n          throttlePromise_ = null;\n          throttlePromiseResolver_ = null;\n        }\n      });\n}\n","/*!\n\nCopyright (C) 2014-2016 by Andrea Giammarchi - @WebReflection\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n*/\n// global window Object\n// optional polyfill info\n//    'auto' used by default, everything is feature detected\n//    'force' use the polyfill even if not fully needed\nfunction installCustomElements(window, polyfill) {'use strict';\n\n  // DO NOT USE THIS FILE DIRECTLY, IT WON'T WORK\n  // THIS IS A PROJECT BASED ON A BUILD SYSTEM\n  // THIS FILE IS JUST WRAPPED UP RESULTING IN\n  // build/document-register-element.node.js\n\n  var\n    document = window.document,\n    Object = window.Object\n  ;\n\n  var htmlClass = (function (info) {\n    // (C) Andrea Giammarchi - @WebReflection - MIT Style\n    var\n      catchClass = /^[A-Z]+[a-z]/,\n      filterBy = function (re) {\n        var arr = [], tag;\n        for (tag in register) {\n          if (re.test(tag)) arr.push(tag);\n        }\n        return arr;\n      },\n      add = function (Class, tag) {\n        tag = tag.toLowerCase();\n        if (!(tag in register)) {\n          register[Class] = (register[Class] || []).concat(tag);\n          register[tag] = (register[tag.toUpperCase()] = Class);\n        }\n      },\n      register = (Object.create || Object)(null),\n      htmlClass = {},\n      i, section, tags, Class\n    ;\n    for (section in info) {\n      for (Class in info[section]) {\n        tags = info[section][Class];\n        register[Class] = tags;\n        for (i = 0; i < tags.length; i++) {\n          register[tags[i].toLowerCase()] =\n          register[tags[i].toUpperCase()] = Class;\n        }\n      }\n    }\n    htmlClass.get = function get(tagOrClass) {\n      return typeof tagOrClass === 'string' ?\n        (register[tagOrClass] || (catchClass.test(tagOrClass) ? [] : '')) :\n        filterBy(tagOrClass);\n    };\n    htmlClass.set = function set(tag, Class) {\n      return (catchClass.test(tag) ?\n        add(tag, Class) :\n        add(Class, tag)\n      ), htmlClass;\n    };\n    return htmlClass;\n  }({\n    \"collections\": {\n      \"HTMLAllCollection\": [\n        \"all\"\n      ],\n      \"HTMLCollection\": [\n        \"forms\"\n      ],\n      \"HTMLFormControlsCollection\": [\n        \"elements\"\n      ],\n      \"HTMLOptionsCollection\": [\n        \"options\"\n      ]\n    },\n    \"elements\": {\n      \"Element\": [\n        \"element\"\n      ],\n      \"HTMLAnchorElement\": [\n        \"a\"\n      ],\n      \"HTMLAppletElement\": [\n        \"applet\"\n      ],\n      \"HTMLAreaElement\": [\n        \"area\"\n      ],\n      \"HTMLAttachmentElement\": [\n        \"attachment\"\n      ],\n      \"HTMLAudioElement\": [\n        \"audio\"\n      ],\n      \"HTMLBRElement\": [\n        \"br\"\n      ],\n      \"HTMLBaseElement\": [\n        \"base\"\n      ],\n      \"HTMLBodyElement\": [\n        \"body\"\n      ],\n      \"HTMLButtonElement\": [\n        \"button\"\n      ],\n      \"HTMLCanvasElement\": [\n        \"canvas\"\n      ],\n      \"HTMLContentElement\": [\n        \"content\"\n      ],\n      \"HTMLDListElement\": [\n        \"dl\"\n      ],\n      \"HTMLDataElement\": [\n        \"data\"\n      ],\n      \"HTMLDataListElement\": [\n        \"datalist\"\n      ],\n      \"HTMLDetailsElement\": [\n        \"details\"\n      ],\n      \"HTMLDialogElement\": [\n        \"dialog\"\n      ],\n      \"HTMLDirectoryElement\": [\n        \"dir\"\n      ],\n      \"HTMLDivElement\": [\n        \"div\"\n      ],\n      \"HTMLDocument\": [\n        \"document\"\n      ],\n      \"HTMLElement\": [\n        \"element\",\n        \"abbr\",\n        \"address\",\n        \"article\",\n        \"aside\",\n        \"b\",\n        \"bdi\",\n        \"bdo\",\n        \"cite\",\n        \"code\",\n        \"command\",\n        \"dd\",\n        \"dfn\",\n        \"dt\",\n        \"em\",\n        \"figcaption\",\n        \"figure\",\n        \"footer\",\n        \"header\",\n        \"i\",\n        \"kbd\",\n        \"mark\",\n        \"nav\",\n        \"noscript\",\n        \"rp\",\n        \"rt\",\n        \"ruby\",\n        \"s\",\n        \"samp\",\n        \"section\",\n        \"small\",\n        \"strong\",\n        \"sub\",\n        \"summary\",\n        \"sup\",\n        \"u\",\n        \"var\",\n        \"wbr\"\n      ],\n      \"HTMLEmbedElement\": [\n        \"embed\"\n      ],\n      \"HTMLFieldSetElement\": [\n        \"fieldset\"\n      ],\n      \"HTMLFontElement\": [\n        \"font\"\n      ],\n      \"HTMLFormElement\": [\n        \"form\"\n      ],\n      \"HTMLFrameElement\": [\n        \"frame\"\n      ],\n      \"HTMLFrameSetElement\": [\n        \"frameset\"\n      ],\n      \"HTMLHRElement\": [\n        \"hr\"\n      ],\n      \"HTMLHeadElement\": [\n        \"head\"\n      ],\n      \"HTMLHeadingElement\": [\n        \"h1\",\n        \"h2\",\n        \"h3\",\n        \"h4\",\n        \"h5\",\n        \"h6\"\n      ],\n      \"HTMLHtmlElement\": [\n        \"html\"\n      ],\n      \"HTMLIFrameElement\": [\n        \"iframe\"\n      ],\n      \"HTMLImageElement\": [\n        \"img\"\n      ],\n      \"HTMLInputElement\": [\n        \"input\"\n      ],\n      \"HTMLKeygenElement\": [\n        \"keygen\"\n      ],\n      \"HTMLLIElement\": [\n        \"li\"\n      ],\n      \"HTMLLabelElement\": [\n        \"label\"\n      ],\n      \"HTMLLegendElement\": [\n        \"legend\"\n      ],\n      \"HTMLLinkElement\": [\n        \"link\"\n      ],\n      \"HTMLMapElement\": [\n        \"map\"\n      ],\n      \"HTMLMarqueeElement\": [\n        \"marquee\"\n      ],\n      \"HTMLMediaElement\": [\n        \"media\"\n      ],\n      \"HTMLMenuElement\": [\n        \"menu\"\n      ],\n      \"HTMLMenuItemElement\": [\n        \"menuitem\"\n      ],\n      \"HTMLMetaElement\": [\n        \"meta\"\n      ],\n      \"HTMLMeterElement\": [\n        \"meter\"\n      ],\n      \"HTMLModElement\": [\n        \"del\",\n        \"ins\"\n      ],\n      \"HTMLOListElement\": [\n        \"ol\"\n      ],\n      \"HTMLObjectElement\": [\n        \"object\"\n      ],\n      \"HTMLOptGroupElement\": [\n        \"optgroup\"\n      ],\n      \"HTMLOptionElement\": [\n        \"option\"\n      ],\n      \"HTMLOutputElement\": [\n        \"output\"\n      ],\n      \"HTMLParagraphElement\": [\n        \"p\"\n      ],\n      \"HTMLParamElement\": [\n        \"param\"\n      ],\n      \"HTMLPictureElement\": [\n        \"picture\"\n      ],\n      \"HTMLPreElement\": [\n        \"pre\"\n      ],\n      \"HTMLProgressElement\": [\n        \"progress\"\n      ],\n      \"HTMLQuoteElement\": [\n        \"blockquote\",\n        \"q\",\n        \"quote\"\n      ],\n      \"HTMLScriptElement\": [\n        \"script\"\n      ],\n      \"HTMLSelectElement\": [\n        \"select\"\n      ],\n      \"HTMLShadowElement\": [\n        \"shadow\"\n      ],\n      \"HTMLSlotElement\": [\n        \"slot\"\n      ],\n      \"HTMLSourceElement\": [\n        \"source\"\n      ],\n      \"HTMLSpanElement\": [\n        \"span\"\n      ],\n      \"HTMLStyleElement\": [\n        \"style\"\n      ],\n      \"HTMLTableCaptionElement\": [\n        \"caption\"\n      ],\n      \"HTMLTableCellElement\": [\n        \"td\",\n        \"th\"\n      ],\n      \"HTMLTableColElement\": [\n        \"col\",\n        \"colgroup\"\n      ],\n      \"HTMLTableElement\": [\n        \"table\"\n      ],\n      \"HTMLTableRowElement\": [\n        \"tr\"\n      ],\n      \"HTMLTableSectionElement\": [\n        \"thead\",\n        \"tbody\",\n        \"tfoot\"\n      ],\n      \"HTMLTemplateElement\": [\n        \"template\"\n      ],\n      \"HTMLTextAreaElement\": [\n        \"textarea\"\n      ],\n      \"HTMLTimeElement\": [\n        \"time\"\n      ],\n      \"HTMLTitleElement\": [\n        \"title\"\n      ],\n      \"HTMLTrackElement\": [\n        \"track\"\n      ],\n      \"HTMLUListElement\": [\n        \"ul\"\n      ],\n      \"HTMLUnknownElement\": [\n        \"unknown\",\n        \"vhgroupv\",\n        \"vkeygen\"\n      ],\n      \"HTMLVideoElement\": [\n        \"video\"\n      ]\n    },\n    \"nodes\": {\n      \"Attr\": [\n        \"node\"\n      ],\n      \"Audio\": [\n        \"audio\"\n      ],\n      \"CDATASection\": [\n        \"node\"\n      ],\n      \"CharacterData\": [\n        \"node\"\n      ],\n      \"Comment\": [\n        \"#comment\"\n      ],\n      \"Document\": [\n        \"#document\"\n      ],\n      \"DocumentFragment\": [\n        \"#document-fragment\"\n      ],\n      \"DocumentType\": [\n        \"node\"\n      ],\n      \"HTMLDocument\": [\n        \"#document\"\n      ],\n      \"Image\": [\n        \"img\"\n      ],\n      \"Option\": [\n        \"option\"\n      ],\n      \"ProcessingInstruction\": [\n        \"node\"\n      ],\n      \"ShadowRoot\": [\n        \"#shadow-root\"\n      ],\n      \"Text\": [\n        \"#text\"\n      ],\n      \"XMLDocument\": [\n        \"xml\"\n      ]\n    }\n  }));\n  \n  \n    \n  // passed at runtime, configurable\n  // via nodejs module\n  if (!polyfill) polyfill = 'auto';\n  \n  var\n    // V0 polyfill entry\n    REGISTER_ELEMENT = 'registerElement',\n  \n    // IE < 11 only + old WebKit for attributes + feature detection\n    EXPANDO_UID = '__' + REGISTER_ELEMENT + (window.Math.random() * 10e4 >> 0),\n  \n    // shortcuts and costants\n    ADD_EVENT_LISTENER = 'addEventListener',\n    ATTACHED = 'attached',\n    CALLBACK = 'Callback',\n    DETACHED = 'detached',\n    EXTENDS = 'extends',\n  \n    ATTRIBUTE_CHANGED_CALLBACK = 'attributeChanged' + CALLBACK,\n    ATTACHED_CALLBACK = ATTACHED + CALLBACK,\n    CONNECTED_CALLBACK = 'connected' + CALLBACK,\n    DISCONNECTED_CALLBACK = 'disconnected' + CALLBACK,\n    CREATED_CALLBACK = 'created' + CALLBACK,\n    DETACHED_CALLBACK = DETACHED + CALLBACK,\n  \n    ADDITION = 'ADDITION',\n    MODIFICATION = 'MODIFICATION',\n    REMOVAL = 'REMOVAL',\n  \n    DOM_ATTR_MODIFIED = 'DOMAttrModified',\n    DOM_CONTENT_LOADED = 'DOMContentLoaded',\n    DOM_SUBTREE_MODIFIED = 'DOMSubtreeModified',\n  \n    PREFIX_TAG = '<',\n    PREFIX_IS = '=',\n  \n    // valid and invalid node names\n    validName = /^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,\n    invalidNames = [\n      'ANNOTATION-XML',\n      'COLOR-PROFILE',\n      'FONT-FACE',\n      'FONT-FACE-SRC',\n      'FONT-FACE-URI',\n      'FONT-FACE-FORMAT',\n      'FONT-FACE-NAME',\n      'MISSING-GLYPH'\n    ],\n  \n    // registered types and their prototypes\n    types = [],\n    protos = [],\n  \n    // to query subnodes\n    query = '',\n  \n    // html shortcut used to feature detect\n    documentElement = document.documentElement,\n  \n    // ES5 inline helpers || basic patches\n    indexOf = types.indexOf || function (v) {\n      for(var i = this.length; i-- && this[i] !== v;){}\n      return i;\n    },\n  \n    // other helpers / shortcuts\n    OP = Object.prototype,\n    hOP = OP.hasOwnProperty,\n    iPO = OP.isPrototypeOf,\n  \n    defineProperty = Object.defineProperty,\n    empty = [],\n    gOPD = Object.getOwnPropertyDescriptor,\n    gOPN = Object.getOwnPropertyNames,\n    gPO = Object.getPrototypeOf,\n    sPO = Object.setPrototypeOf,\n  \n    // jshint proto: true\n    hasProto = !!Object.__proto__,\n  \n    // V1 helpers\n    fixGetClass = false,\n    DRECEV1 = '__dreCEv1',\n    customElements = window.customElements,\n    usableCustomElements = polyfill !== 'force' && !!(\n      customElements &&\n      customElements.define &&\n      customElements.get &&\n      customElements.whenDefined\n    ),\n    Dict = Object.create || Object,\n    Map = window.Map || function Map() {\n      var K = [], V = [], i;\n      return {\n        get: function (k) {\n          return V[indexOf.call(K, k)];\n        },\n        set: function (k, v) {\n          i = indexOf.call(K, k);\n          if (i < 0) V[K.push(k) - 1] = v;\n          else V[i] = v;\n        }\n      };\n    },\n    Promise = window.Promise || function (fn) {\n      var\n        notify = [],\n        done = false,\n        p = {\n          'catch': function () {\n            return p;\n          },\n          'then': function (cb) {\n            notify.push(cb);\n            if (done) setTimeout(resolve, 1);\n            return p;\n          }\n        }\n      ;\n      function resolve(value) {\n        done = true;\n        while (notify.length) notify.shift()(value);\n      }\n      fn(resolve);\n      return p;\n    },\n    justCreated = false,\n    constructors = Dict(null),\n    waitingList = Dict(null),\n    nodeNames = new Map(),\n    secondArgument = function (is) {\n      return is.toLowerCase();\n    },\n  \n    // used to create unique instances\n    create = Object.create || function Bridge(proto) {\n      // silly broken polyfill probably ever used but short enough to work\n      return proto ? ((Bridge.prototype = proto), new Bridge()) : this;\n    },\n  \n    // will set the prototype if possible\n    // or copy over all properties\n    setPrototype = sPO || (\n      hasProto ?\n        function (o, p) {\n          o.__proto__ = p;\n          return o;\n        } : (\n      (gOPN && gOPD) ?\n        (function(){\n          function setProperties(o, p) {\n            for (var\n              key,\n              names = gOPN(p),\n              i = 0, length = names.length;\n              i < length; i++\n            ) {\n              key = names[i];\n              if (!hOP.call(o, key)) {\n                defineProperty(o, key, gOPD(p, key));\n              }\n            }\n          }\n          return function (o, p) {\n            do {\n              setProperties(o, p);\n            } while ((p = gPO(p)) && !iPO.call(p, o));\n            return o;\n          };\n        }()) :\n        function (o, p) {\n          for (var key in p) {\n            o[key] = p[key];\n          }\n          return o;\n        }\n    )),\n  \n    // DOM shortcuts and helpers, if any\n  \n    MutationObserver = window.MutationObserver ||\n                       window.WebKitMutationObserver,\n  \n    HTMLElementPrototype = (\n      window.HTMLElement ||\n      window.Element ||\n      window.Node\n    ).prototype,\n  \n    IE8 = !iPO.call(HTMLElementPrototype, documentElement),\n  \n    safeProperty = IE8 ? function (o, k, d) {\n      o[k] = d.value;\n      return o;\n    } : defineProperty,\n  \n    isValidNode = IE8 ?\n      function (node) {\n        return node.nodeType === 1;\n      } :\n      function (node) {\n        return iPO.call(HTMLElementPrototype, node);\n      },\n  \n    targets = IE8 && [],\n  \n    attachShadow = HTMLElementPrototype.attachShadow,\n    cloneNode = HTMLElementPrototype.cloneNode,\n    dispatchEvent = HTMLElementPrototype.dispatchEvent,\n    getAttribute = HTMLElementPrototype.getAttribute,\n    hasAttribute = HTMLElementPrototype.hasAttribute,\n    removeAttribute = HTMLElementPrototype.removeAttribute,\n    setAttribute = HTMLElementPrototype.setAttribute,\n  \n    // replaced later on\n    createElement = document.createElement,\n    patchedCreateElement = createElement,\n  \n    // shared observer for all attributes\n    attributesObserver = MutationObserver && {\n      attributes: true,\n      characterData: true,\n      attributeOldValue: true\n    },\n  \n    // useful to detect only if there's no MutationObserver\n    DOMAttrModified = MutationObserver || function(e) {\n      doesNotSupportDOMAttrModified = false;\n      documentElement.removeEventListener(\n        DOM_ATTR_MODIFIED,\n        DOMAttrModified\n      );\n    },\n  \n    // will both be used to make DOMNodeInserted asynchronous\n    asapQueue,\n    asapTimer = 0,\n  \n    // internal flags\n    V0 = REGISTER_ELEMENT in document,\n    setListener = true,\n    justSetup = false,\n    doesNotSupportDOMAttrModified = true,\n    dropDomContentLoaded = true,\n  \n    // needed for the innerHTML helper\n    notFromInnerHTMLHelper = true,\n  \n    // optionally defined later on\n    onSubtreeModified,\n    callDOMAttrModified,\n    getAttributesMirror,\n    observer,\n    observe,\n  \n    // based on setting prototype capability\n    // will check proto or the expando attribute\n    // in order to setup the node once\n    patchIfNotAlready,\n    patch\n  ;\n  \n  // only if needed\n  if (!V0) {\n  \n    if (sPO || hasProto) {\n        patchIfNotAlready = function (node, proto) {\n          if (!iPO.call(proto, node)) {\n            setupNode(node, proto);\n          }\n        };\n        patch = setupNode;\n    } else {\n        patchIfNotAlready = function (node, proto) {\n          if (!node[EXPANDO_UID]) {\n            node[EXPANDO_UID] = Object(true);\n            setupNode(node, proto);\n          }\n        };\n        patch = patchIfNotAlready;\n    }\n  \n    if (IE8) {\n      doesNotSupportDOMAttrModified = false;\n      (function (){\n        var\n          descriptor = gOPD(HTMLElementPrototype, ADD_EVENT_LISTENER),\n          addEventListener = descriptor.value,\n          patchedRemoveAttribute = function (name) {\n            var e = new CustomEvent(DOM_ATTR_MODIFIED, {bubbles: true});\n            e.attrName = name;\n            e.prevValue = getAttribute.call(this, name);\n            e.newValue = null;\n            e[REMOVAL] = e.attrChange = 2;\n            removeAttribute.call(this, name);\n            dispatchEvent.call(this, e);\n          },\n          patchedSetAttribute = function (name, value) {\n            var\n              had = hasAttribute.call(this, name),\n              old = had && getAttribute.call(this, name),\n              e = new CustomEvent(DOM_ATTR_MODIFIED, {bubbles: true})\n            ;\n            setAttribute.call(this, name, value);\n            e.attrName = name;\n            e.prevValue = had ? old : null;\n            e.newValue = value;\n            if (had) {\n              e[MODIFICATION] = e.attrChange = 1;\n            } else {\n              e[ADDITION] = e.attrChange = 0;\n            }\n            dispatchEvent.call(this, e);\n          },\n          onPropertyChange = function (e) {\n            // jshint eqnull:true\n            var\n              node = e.currentTarget,\n              superSecret = node[EXPANDO_UID],\n              propertyName = e.propertyName,\n              event\n            ;\n            if (superSecret.hasOwnProperty(propertyName)) {\n              superSecret = superSecret[propertyName];\n              event = new CustomEvent(DOM_ATTR_MODIFIED, {bubbles: true});\n              event.attrName = superSecret.name;\n              event.prevValue = superSecret.value || null;\n              event.newValue = (superSecret.value = node[propertyName] || null);\n              if (event.prevValue == null) {\n                event[ADDITION] = event.attrChange = 0;\n              } else {\n                event[MODIFICATION] = event.attrChange = 1;\n              }\n              dispatchEvent.call(node, event);\n            }\n          }\n        ;\n        descriptor.value = function (type, handler, capture) {\n          if (\n            type === DOM_ATTR_MODIFIED &&\n            this[ATTRIBUTE_CHANGED_CALLBACK] &&\n            this.setAttribute !== patchedSetAttribute\n          ) {\n            this[EXPANDO_UID] = {\n              className: {\n                name: 'class',\n                value: this.className\n              }\n            };\n            this.setAttribute = patchedSetAttribute;\n            this.removeAttribute = patchedRemoveAttribute;\n            addEventListener.call(this, 'propertychange', onPropertyChange);\n          }\n          addEventListener.call(this, type, handler, capture);\n        };\n        defineProperty(HTMLElementPrototype, ADD_EVENT_LISTENER, descriptor);\n      }());\n    } else if (!MutationObserver) {\n      documentElement[ADD_EVENT_LISTENER](DOM_ATTR_MODIFIED, DOMAttrModified);\n      documentElement.setAttribute(EXPANDO_UID, 1);\n      documentElement.removeAttribute(EXPANDO_UID);\n      if (doesNotSupportDOMAttrModified) {\n        onSubtreeModified = function (e) {\n          var\n            node = this,\n            oldAttributes,\n            newAttributes,\n            key\n          ;\n          if (node === e.target) {\n            oldAttributes = node[EXPANDO_UID];\n            node[EXPANDO_UID] = (newAttributes = getAttributesMirror(node));\n            for (key in newAttributes) {\n              if (!(key in oldAttributes)) {\n                // attribute was added\n                return callDOMAttrModified(\n                  0,\n                  node,\n                  key,\n                  oldAttributes[key],\n                  newAttributes[key],\n                  ADDITION\n                );\n              } else if (newAttributes[key] !== oldAttributes[key]) {\n                // attribute was changed\n                return callDOMAttrModified(\n                  1,\n                  node,\n                  key,\n                  oldAttributes[key],\n                  newAttributes[key],\n                  MODIFICATION\n                );\n              }\n            }\n            // checking if it has been removed\n            for (key in oldAttributes) {\n              if (!(key in newAttributes)) {\n                // attribute removed\n                return callDOMAttrModified(\n                  2,\n                  node,\n                  key,\n                  oldAttributes[key],\n                  newAttributes[key],\n                  REMOVAL\n                );\n              }\n            }\n          }\n        };\n        callDOMAttrModified = function (\n          attrChange,\n          currentTarget,\n          attrName,\n          prevValue,\n          newValue,\n          action\n        ) {\n          var e = {\n            attrChange: attrChange,\n            currentTarget: currentTarget,\n            attrName: attrName,\n            prevValue: prevValue,\n            newValue: newValue\n          };\n          e[action] = attrChange;\n          onDOMAttrModified(e);\n        };\n        getAttributesMirror = function (node) {\n          for (var\n            attr, name,\n            result = {},\n            attributes = node.attributes,\n            i = 0, length = attributes.length;\n            i < length; i++\n          ) {\n            attr = attributes[i];\n            name = attr.name;\n            if (name !== 'setAttribute') {\n              result[name] = attr.value;\n            }\n          }\n          return result;\n        };\n      }\n    }\n  \n    // set as enumerable, writable and configurable\n    document[REGISTER_ELEMENT] = function registerElement(type, options) {\n      upperType = type.toUpperCase();\n      if (setListener) {\n        // only first time document.registerElement is used\n        // we need to set this listener\n        // setting it by default might slow down for no reason\n        setListener = false;\n        if (MutationObserver) {\n          observer = (function(attached, detached){\n            function checkEmAll(list, callback) {\n              for (var i = 0, length = list.length; i < length; callback(list[i++])){}\n            }\n            return new MutationObserver(function (records) {\n              for (var\n                current, node, newValue,\n                i = 0, length = records.length; i < length; i++\n              ) {\n                current = records[i];\n                if (current.type === 'childList') {\n                  checkEmAll(current.addedNodes, attached);\n                  checkEmAll(current.removedNodes, detached);\n                } else {\n                  node = current.target;\n                  if (notFromInnerHTMLHelper &&\n                      node[ATTRIBUTE_CHANGED_CALLBACK] &&\n                      current.attributeName !== 'style') {\n                    newValue = getAttribute.call(node, current.attributeName);\n                    if (newValue !== current.oldValue) {\n                      node[ATTRIBUTE_CHANGED_CALLBACK](\n                        current.attributeName,\n                        current.oldValue,\n                        newValue\n                      );\n                    }\n                  }\n                }\n              }\n            });\n          }(executeAction(ATTACHED), executeAction(DETACHED)));\n          observe = function (node) {\n            observer.observe(\n              node,\n              {\n                childList: true,\n                subtree: true\n              }\n            );\n            return node;\n          };\n          observe(document);\n          if (attachShadow) {\n            HTMLElementPrototype.attachShadow = function () {\n              return observe(attachShadow.apply(this, arguments));\n            };\n          }\n        } else {\n          asapQueue = [];\n          document[ADD_EVENT_LISTENER]('DOMNodeInserted', onDOMNode(ATTACHED));\n          document[ADD_EVENT_LISTENER]('DOMNodeRemoved', onDOMNode(DETACHED));\n        }\n  \n        document[ADD_EVENT_LISTENER](DOM_CONTENT_LOADED, onReadyStateChange);\n        document[ADD_EVENT_LISTENER]('readystatechange', onReadyStateChange);\n  \n        HTMLElementPrototype.cloneNode = function (deep) {\n          var\n            node = cloneNode.call(this, !!deep),\n            i = getTypeIndex(node)\n          ;\n          if (-1 < i) patch(node, protos[i]);\n          if (deep && query.length) loopAndSetup(node.querySelectorAll(query));\n          return node;\n        };\n      }\n  \n      if (justSetup) return (justSetup = false);\n  \n      if (-2 < (\n        indexOf.call(types, PREFIX_IS + upperType) +\n        indexOf.call(types, PREFIX_TAG + upperType)\n      )) {\n        throwTypeError(type);\n      }\n  \n      if (!validName.test(upperType) || -1 < indexOf.call(invalidNames, upperType)) {\n        throw new Error('The type ' + type + ' is invalid');\n      }\n  \n      var\n        constructor = function () {\n          return extending ?\n            document.createElement(nodeName, upperType) :\n            document.createElement(nodeName);\n        },\n        opt = options || OP,\n        extending = hOP.call(opt, EXTENDS),\n        nodeName = extending ? options[EXTENDS].toUpperCase() : upperType,\n        upperType,\n        i\n      ;\n  \n      if (extending && -1 < (\n        indexOf.call(types, PREFIX_TAG + nodeName)\n      )) {\n        throwTypeError(nodeName);\n      }\n  \n      i = types.push((extending ? PREFIX_IS : PREFIX_TAG) + upperType) - 1;\n  \n      query = query.concat(\n        query.length ? ',' : '',\n        extending ? nodeName + '[is=\"' + type.toLowerCase() + '\"]' : nodeName\n      );\n  \n      constructor.prototype = (\n        protos[i] = hOP.call(opt, 'prototype') ?\n          opt.prototype :\n          create(HTMLElementPrototype)\n      );\n  \n      if (query.length) loopAndVerify(\n        document.querySelectorAll(query),\n        ATTACHED\n      );\n  \n      return constructor;\n    };\n  \n    document.createElement = (patchedCreateElement = function (localName, typeExtension) {\n      var\n        is = getIs(typeExtension),\n        node = is ?\n          createElement.call(document, localName, secondArgument(is)) :\n          createElement.call(document, localName),\n        name = '' + localName,\n        i = indexOf.call(\n          types,\n          (is ? PREFIX_IS : PREFIX_TAG) +\n          (is || name).toUpperCase()\n        ),\n        setup = -1 < i\n      ;\n      if (is) {\n        node.setAttribute('is', is = is.toLowerCase());\n        if (setup) {\n          setup = isInQSA(name.toUpperCase(), is);\n        }\n      }\n      notFromInnerHTMLHelper = !document.createElement.innerHTMLHelper;\n      if (setup) patch(node, protos[i]);\n      return node;\n    });\n  \n  }\n  \n  function ASAP() {\n    var queue = asapQueue.splice(0, asapQueue.length);\n    asapTimer = 0;\n    while (queue.length) {\n      queue.shift().call(\n        null, queue.shift()\n      );\n    }\n  }\n  \n  function loopAndVerify(list, action) {\n    for (var i = 0, length = list.length; i < length; i++) {\n      verifyAndSetupAndAction(list[i], action);\n    }\n  }\n  \n  function loopAndSetup(list) {\n    for (var i = 0, length = list.length, node; i < length; i++) {\n      node = list[i];\n      patch(node, protos[getTypeIndex(node)]);\n    }\n  }\n  \n  function executeAction(action) {\n    return function (node) {\n      if (isValidNode(node)) {\n        verifyAndSetupAndAction(node, action);\n        if (query.length) loopAndVerify(\n          node.querySelectorAll(query),\n          action\n        );\n      }\n    };\n  }\n  \n  function getTypeIndex(target) {\n    var\n      is = getAttribute.call(target, 'is'),\n      nodeName = target.nodeName.toUpperCase(),\n      i = indexOf.call(\n        types,\n        is ?\n            PREFIX_IS + is.toUpperCase() :\n            PREFIX_TAG + nodeName\n      )\n    ;\n    return is && -1 < i && !isInQSA(nodeName, is) ? -1 : i;\n  }\n  \n  function isInQSA(name, type) {\n    return -1 < query.indexOf(name + '[is=\"' + type + '\"]');\n  }\n  \n  function onDOMAttrModified(e) {\n    var\n      node = e.currentTarget,\n      attrChange = e.attrChange,\n      attrName = e.attrName,\n      target = e.target,\n      addition = e[ADDITION] || 2,\n      removal = e[REMOVAL] || 3\n    ;\n    if (notFromInnerHTMLHelper &&\n        (!target || target === node) &&\n        node[ATTRIBUTE_CHANGED_CALLBACK] &&\n        attrName !== 'style' && (\n          e.prevValue !== e.newValue ||\n          // IE9, IE10, and Opera 12 gotcha\n          e.newValue === '' && (\n            attrChange === addition ||\n            attrChange === removal\n          )\n    )) {\n      node[ATTRIBUTE_CHANGED_CALLBACK](\n        attrName,\n        attrChange === addition ? null : e.prevValue,\n        attrChange === removal ? null : e.newValue\n      );\n    }\n  }\n  \n  function onDOMNode(action) {\n    var executor = executeAction(action);\n    return function (e) {\n      asapQueue.push(executor, e.target);\n      if (asapTimer) clearTimeout(asapTimer);\n      asapTimer = setTimeout(ASAP, 1);\n    };\n  }\n  \n  function onReadyStateChange(e) {\n    if (dropDomContentLoaded) {\n      dropDomContentLoaded = false;\n      e.currentTarget.removeEventListener(DOM_CONTENT_LOADED, onReadyStateChange);\n    }\n    if (query.length) loopAndVerify(\n      (e.target || document).querySelectorAll(query),\n      e.detail === DETACHED ? DETACHED : ATTACHED\n    );\n    if (IE8) purge();\n  }\n  \n  function patchedSetAttribute(name, value) {\n    // jshint validthis:true\n    var self = this;\n    setAttribute.call(self, name, value);\n    onSubtreeModified.call(self, {target: self});\n  }\n  \n  function setupNode(node, proto) {\n    setPrototype(node, proto);\n    if (observer) {\n      observer.observe(node, attributesObserver);\n    } else {\n      if (doesNotSupportDOMAttrModified) {\n        node.setAttribute = patchedSetAttribute;\n        node[EXPANDO_UID] = getAttributesMirror(node);\n        node[ADD_EVENT_LISTENER](DOM_SUBTREE_MODIFIED, onSubtreeModified);\n      }\n      node[ADD_EVENT_LISTENER](DOM_ATTR_MODIFIED, onDOMAttrModified);\n    }\n    if (node[CREATED_CALLBACK] && notFromInnerHTMLHelper) {\n      node.created = true;\n      node[CREATED_CALLBACK]();\n      node.created = false;\n    }\n  }\n  \n  function purge() {\n    for (var\n      node,\n      i = 0,\n      length = targets.length;\n      i < length; i++\n    ) {\n      node = targets[i];\n      if (!documentElement.contains(node)) {\n        length--;\n        targets.splice(i--, 1);\n        verifyAndSetupAndAction(node, DETACHED);\n      }\n    }\n  }\n  \n  function throwTypeError(type) {\n    throw new Error('A ' + type + ' type is already registered');\n  }\n  \n  function verifyAndSetupAndAction(node, action) {\n    var\n      fn,\n      i = getTypeIndex(node)\n    ;\n    if (-1 < i) {\n      patchIfNotAlready(node, protos[i]);\n      i = 0;\n      if (action === ATTACHED && !node[ATTACHED]) {\n        node[DETACHED] = false;\n        node[ATTACHED] = true;\n        i = 1;\n        if (IE8 && indexOf.call(targets, node) < 0) {\n          targets.push(node);\n        }\n      } else if (action === DETACHED && !node[DETACHED]) {\n        node[ATTACHED] = false;\n        node[DETACHED] = true;\n        i = 1;\n      }\n      if (i && (fn = node[action + CALLBACK])) fn.call(node);\n    }\n  }\n  \n  \n  \n  // V1 in da House!\n  function CustomElementRegistry() {}\n  \n  CustomElementRegistry.prototype = {\n    constructor: CustomElementRegistry,\n    // a workaround for the stubborn WebKit\n    define: usableCustomElements ?\n      function (name, Class, options) {\n        if (options) {\n          CERDefine(name, Class, options);\n        } else {\n          var NAME = name.toUpperCase();\n          constructors[NAME] = {\n            constructor: Class,\n            create: [NAME]\n          };\n          nodeNames.set(Class, NAME);\n          customElements.define(name, Class);\n        }\n      } :\n      CERDefine,\n    get: usableCustomElements ?\n      function (name) {\n        return customElements.get(name) || get(name);\n      } :\n      get,\n    whenDefined: usableCustomElements ?\n      function (name) {\n        return Promise.race([\n          customElements.whenDefined(name),\n          whenDefined(name)\n        ]);\n      } :\n      whenDefined\n  };\n  \n  function CERDefine(name, Class, options) {\n    var\n      is = options && options[EXTENDS] || '',\n      CProto = Class.prototype,\n      proto = create(CProto),\n      attributes = Class.observedAttributes || empty,\n      definition = {prototype: proto}\n    ;\n    // TODO: is this needed at all since it's inherited?\n    // defineProperty(proto, 'constructor', {value: Class});\n    safeProperty(proto, CREATED_CALLBACK, {\n        value: function () {\n          if (justCreated) justCreated = false;\n          else if (!this[DRECEV1]) {\n            this[DRECEV1] = true;\n            new Class(this);\n            if (CProto[CREATED_CALLBACK])\n              CProto[CREATED_CALLBACK].call(this);\n            var info = constructors[nodeNames.get(Class)];\n            if (!usableCustomElements || info.create.length > 1) {\n              notifyAttributes(this);\n            }\n          }\n      }\n    });\n    safeProperty(proto, ATTRIBUTE_CHANGED_CALLBACK, {\n      value: function (name) {\n        if (-1 < indexOf.call(attributes, name))\n          CProto[ATTRIBUTE_CHANGED_CALLBACK].apply(this, arguments);\n      }\n    });\n    if (CProto[CONNECTED_CALLBACK]) {\n      safeProperty(proto, ATTACHED_CALLBACK, {\n        value: CProto[CONNECTED_CALLBACK]\n      });\n    }\n    if (CProto[DISCONNECTED_CALLBACK]) {\n      safeProperty(proto, DETACHED_CALLBACK, {\n        value: CProto[DISCONNECTED_CALLBACK]\n      });\n    }\n    if (is) definition[EXTENDS] = is;\n    name = name.toUpperCase();\n    constructors[name] = {\n      constructor: Class,\n      create: is ? [is, secondArgument(name)] : [name]\n    };\n    nodeNames.set(Class, name);\n    document[REGISTER_ELEMENT](name.toLowerCase(), definition);\n    whenDefined(name);\n    waitingList[name].r();\n  }\n  \n  function get(name) {\n    var info = constructors[name.toUpperCase()];\n    return info && info.constructor;\n  }\n  \n  function getIs(options) {\n    return typeof options === 'string' ?\n        options : (options && options.is || '');\n  }\n  \n  function notifyAttributes(self) {\n    var\n      callback = self[ATTRIBUTE_CHANGED_CALLBACK],\n      attributes = callback ? self.attributes : empty,\n      i = attributes.length,\n      attribute\n    ;\n    while (i--) {\n      attribute =  attributes[i]; // || attributes.item(i);\n      callback.call(\n        self,\n        attribute.name || attribute.nodeName,\n        null,\n        attribute.value || attribute.nodeValue\n      );\n    }\n  }\n  \n  function whenDefined(name) {\n    name = name.toUpperCase();\n    if (!(name in waitingList)) {\n      waitingList[name] = {};\n      waitingList[name].p = new Promise(function (resolve) {\n        waitingList[name].r = resolve;\n      });\n    }\n    return waitingList[name].p;\n  }\n  \n  function polyfillV1() {\n    if (customElements) delete window.customElements;\n    defineProperty(window, 'customElements', {\n      configurable: true,\n      value: new CustomElementRegistry()\n    });\n    defineProperty(window, 'CustomElementRegistry', {\n      configurable: true,\n      value: CustomElementRegistry\n    });\n    for (var\n      patchClass = function (name) {\n        var Class = window[name];\n        if (Class) {\n          window[name] = function CustomElementsV1(self) {\n            var info, isNative;\n            if (!self) self = this;\n            if (!self[DRECEV1]) {\n              justCreated = true;\n              info = constructors[nodeNames.get(self.constructor)];\n              isNative = usableCustomElements && info.create.length === 1;\n              self = isNative ?\n                Reflect.construct(Class, empty, info.constructor) :\n                document.createElement.apply(document, info.create);\n              self[DRECEV1] = true;\n              justCreated = false;\n              if (!isNative) notifyAttributes(self);\n            }\n            return self;\n          };\n          window[name].prototype = Class.prototype;\n          try {\n            Class.prototype.constructor = window[name];\n          } catch(WebKit) {\n            fixGetClass = true;\n            defineProperty(Class, DRECEV1, {value: window[name]});\n          }\n        }\n      },\n      Classes = htmlClass.get(/^HTML[A-Z]*[a-z]/),\n      i = Classes.length;\n      i--;\n      patchClass(Classes[i])\n    ) {}\n    (document.createElement = function (name, options) {\n      var is = getIs(options);\n      return is ?\n        patchedCreateElement.call(this, name, secondArgument(is)) :\n        patchedCreateElement.call(this, name);\n    });\n    if (!V0) {\n      justSetup = true;\n      document[REGISTER_ELEMENT]('');\n    }\n  }\n  \n  // if customElements is not there at all\n  if (!customElements || polyfill === 'force') polyfillV1();\n  else {\n    // if available test extends work as expected\n    try {\n      (function (DRE, options, name) {\n        options[EXTENDS] = 'a';\n        DRE.prototype = create(HTMLAnchorElement.prototype);\n        DRE.prototype.constructor = DRE;\n        window.customElements.define(name, DRE, options);\n        if (\n          getAttribute.call(document.createElement('a', {is: name}), 'is') !== name ||\n          (usableCustomElements && getAttribute.call(new DRE(), 'is') !== name)\n        ) {\n          throw options;\n        }\n      }(\n        function DRE() {\n          return Reflect.construct(HTMLAnchorElement, [], DRE);\n        },\n        {},\n        'document-register-element-a'\n      ));\n    } catch(o_O) {\n      // or force the polyfill if not\n      // and keep internal original reference\n      polyfillV1();\n    }\n  }\n  \n  try {\n    createElement.call(document, 'a', 'a');\n  } catch(FireFox) {\n    secondArgument = function (is) {\n      return {is: is.toLowerCase()};\n    };\n  }\n  \n}\n\nexports.installCustomElements = installCustomElements;\n\n","'use strict';\n\n/**\n * Constructs a ES6/Promises A+ Promise instance.\n *\n * @constructor\n * @param {function(function(*=), function (*=))} resolver\n */\nfunction Promise(resolver) {\n  if (!(this instanceof Promise)) {\n    throw new TypeError('Constructor Promise requires `new`');\n  }\n  if (!isFunction(resolver)) {\n    throw new TypeError('Must pass resolver function');\n  }\n\n  /**\n   * @type {function(this:Promise,*=,function(*=),function(*=),Deferred):!Promise}\n   * @private\n   */\n  this._state = PendingPromise;\n\n  /**\n   * @type {*}\n   * @private\n   */\n  this._value = [];\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this._isChainEnd = true;\n\n  doResolve(\n    this,\n    adopter(this, FulfilledPromise),\n    adopter(this, RejectedPromise),\n    { then: resolver }\n  );\n}\n\n/****************************\n  Public Instance Methods\n ****************************/\n\n/**\n * Creates a new promise instance that will receive the result of this promise\n * as inputs to the onFulfilled or onRejected callbacks.\n *\n * @param {function(*)} onFulfilled\n * @param {function(*)} onRejected\n */\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  onFulfilled = isFunction(onFulfilled) ? onFulfilled : void 0;\n  onRejected = isFunction(onRejected) ? onRejected : void 0;\n\n  if (onFulfilled || onRejected) {\n    this._isChainEnd = false;\n  }\n\n  return this._state(\n    this._value,\n    onFulfilled,\n    onRejected\n  );\n};\n\n/**\n * Creates a new promise that will handle the rejected state of this promise.\n *\n * @param {function(*)} onRejected\n * @returns {!Promise}\n */\nPromise.prototype.catch = function(onRejected) {\n  return this.then(void 0, onRejected);\n};\n\n/****************************\n  Public Static Methods\n ****************************/\n\n/**\n * Creates a fulfilled Promise of value. If value is itself a then-able,\n * resolves with the then-able's value.\n *\n * @this {!Promise}\n * @param {*=} value\n * @returns {!Promise}\n */\nPromise.resolve = function(value) {\n  var Constructor = this;\n  var promise;\n\n  if (isObject(value) && value instanceof this) {\n    promise = value;\n  } else {\n    promise = new Constructor(function(resolve) {\n      resolve(value);\n    });\n  }\n\n  return /** @type {!Promise} */(promise);\n};\n\n/**\n * Creates a rejected Promise of reason.\n *\n * @this {!Promise}\n * @param {*=} reason\n * @returns {!Promise}\n */\nPromise.reject = function(reason) {\n  var Constructor = this;\n  var promise = new Constructor(function(_, reject) {\n    reject(reason);\n  });\n\n  return /** @type {!Promise} */(promise);\n};\n\n/**\n * Creates a Promise that will resolve with an array of the values of the\n * passed in promises. If any promise rejects, the returned promise will\n * reject.\n *\n * @this {!Promise}\n * @param {!Array<Promise|*>} promises\n * @returns {!Promise}\n */\nPromise.all = function(promises) {\n  var Constructor = this;\n  var promise = new Constructor(function(resolve, reject) {\n    var length = promises.length;\n    var values = new Array(length);\n\n    if (length === 0) {\n      return resolve(values);\n    }\n\n    each(promises, function(promise, index) {\n      Constructor.resolve(promise).then(function(value) {\n        values[index] = value;\n        if (--length === 0) {\n          resolve(values);\n        }\n      }, reject);\n    });\n  });\n\n  return /** @type {!Promise} */(promise);\n};\n\n/**\n * Creates a Promise that will resolve or reject based on the first\n * resolved or rejected promise.\n *\n * @this {!Promise}\n * @param {!Array<Promise|*>} promises\n * @returns {!Promise}\n */\nPromise.race = function(promises) {\n  var Constructor = this;\n  var promise = new Constructor(function(resolve, reject) {\n    for (var i = 0; i < promises.length; i++) {\n      Constructor.resolve(promises[i]).then(resolve, reject);\n    }\n  });\n\n  return /** @type {!Promise} */(promise);\n};\n\nvar onPossiblyUnhandledRejection = function(reason, promise) {\n  throw reason;\n};\n\n/**\n * An internal use static function.\n */\nPromise._overrideUnhandledExceptionHandler = function(handler) {\n  onPossiblyUnhandledRejection = handler;\n};\n\n/****************************\n  Private functions\n ****************************/\n\n/**\n * The Fulfilled Promise state. Calls onFulfilled with the resolved value of\n * this promise, creating a new promise.\n *\n * If there is no onFulfilled, returns the current promise to avoid an promise\n * instance.\n *\n * @this {!Promise} The current promise\n * @param {*=} value The current promise's resolved value.\n * @param {function(*=)=} onFulfilled\n * @param {function(*=)=} unused\n * @param {Deferred} deferred A deferred object that holds a promise and its\n *     resolve and reject functions. It IS NOT passed when called from\n *     Promise#then to save an object instance (since we may return the current\n *     promise). It IS passed in when adopting the Fulfilled state from the\n *     Pending state.\n * @returns {!Promise}\n */\nfunction FulfilledPromise(value, onFulfilled, unused, deferred) {\n  if (!onFulfilled) {\n    deferredAdopt(deferred, FulfilledPromise, value);\n    return this;\n  }\n  if (!deferred) {\n    deferred = new Deferred(this.constructor);\n  }\n  defer(tryCatchDeferred(deferred, onFulfilled, value));\n  return deferred.promise;\n}\n\n/**\n * The Rejected Promise state. Calls onRejected with the resolved value of\n * this promise, creating a new promise.\n *\n * If there is no onRejected, returns the current promise to avoid an promise\n * instance.\n *\n * @this {!Promise} The current promise\n * @param {*=} reason The current promise's rejection reason.\n * @param {function(*=)=} unused\n * @param {function(*=)=} onRejected\n * @param {Deferred} deferred A deferred object that holds a promise and its\n *     resolve and reject functions. It IS NOT passed when called from\n *     Promise#then to save an object instance (since we may return the current\n *     promise). It IS passed in when adopting the Rejected state from the\n *     Pending state.\n * @returns {!Promise}\n */\nfunction RejectedPromise(reason, unused, onRejected, deferred) {\n  if (!onRejected) {\n    deferredAdopt(deferred, RejectedPromise, reason);\n    return this;\n  }\n  if (!deferred) {\n    deferred = new Deferred(this.constructor);\n  }\n  defer(tryCatchDeferred(deferred, onRejected, reason));\n  return deferred.promise;\n}\n\n/**\n * The Pending Promise state. Eventually calls onFulfilled once the promise has\n * resolved, or onRejected once the promise rejects.\n *\n * If there is no onFulfilled and no onRejected, returns the current promise to\n * avoid an promise instance.\n *\n * @this {!Promise} The current promise\n * @param {*=} queue The current promise's pending promises queue.\n * @param {function(*=)=} onFulfilled\n * @param {function(*=)=} onRejected\n * @param {Deferred} deferred A deferred object that holds a promise and its\n *     resolve and reject functions. It IS NOT passed when called from\n *     Promise#then to save an object instance (since we may return the current\n *     promise). It IS passed in when adopting the Pending state from the\n *     Pending state of another promise.\n * @returns {!Promise}\n */\nfunction PendingPromise(queue, onFulfilled, onRejected, deferred) {\n  if (!deferred) {\n    if (!onFulfilled && !onRejected) { return this; }\n    deferred = new Deferred(this.constructor);\n  }\n  queue.push({\n    deferred: deferred,\n    onFulfilled: onFulfilled || deferred.resolve,\n    onRejected: onRejected || deferred.reject\n  });\n  return deferred.promise;\n}\n\n/**\n * Constructs a deferred instance that holds a promise and its resolve and\n * reject functions.\n *\n * @constructor\n */\nfunction Deferred(Promise) {\n  var deferred = this;\n  /** @type {!Promise} */\n  this.promise = new Promise(function(resolve, reject) {\n    /** @type {function(*=)} */\n    deferred.resolve = resolve;\n\n    /** @type {function(*=)} */\n    deferred.reject = reject;\n  });\n  return deferred;\n}\n\n/**\n * Transitions the state of promise to another state. This is only ever called\n * on with a promise that is currently in the Pending state.\n *\n * @param {!Promise} promise\n * @param {function(this:Promise,*=,function(*=),function(*=),Deferred):!Promise} state\n * @param {*=} value\n */\nfunction adopt(promise, state, value, adoptee) {\n  var queue = promise._value;\n  promise._state = state;\n  promise._value = value;\n\n  if (adoptee && state === PendingPromise) {\n    adoptee._state(value, void 0, void 0, {\n      promise: promise,\n      resolve: void 0,\n      reject: void 0\n    });\n  }\n\n  for (var i = 0; i < queue.length; i++) {\n    var next = queue[i];\n    promise._state(\n      value,\n      next.onFulfilled,\n      next.onRejected,\n      next.deferred\n    );\n  }\n  queue.length = 0;\n\n  // Determine if this rejected promise will be \"handled\".\n  if (state === RejectedPromise && promise._isChainEnd) {\n    setTimeout(function() {\n      if (promise._isChainEnd) {\n        onPossiblyUnhandledRejection(value, promise);\n      }\n    }, 0);\n  }\n}\n\n/**\n * A partial application of adopt.\n *\n * @param {!Promise} promise\n * @param {function(this:Promise,*=,function(*=),function(*=),Deferred):!Promise} state\n * @returns {function(*=)}\n */\nfunction adopter(promise, state) {\n  return function(value) {\n    adopt(promise, state, value);\n  };\n}\n\n/**\n * Updates a deferred promises state. Necessary for updating an adopting\n * promise's state when the adoptee resolves.\n *\n * @param {?Deferred} deferred\n * @param {function(this:Promise,*=,function(*=),function(*=),Deferred):!Promise} state\n * @param {*=} value\n */\nfunction deferredAdopt(deferred, state, value) {\n  if (deferred) {\n    var promise = deferred.promise;\n    promise._state = state;\n    promise._value = value;\n  }\n}\n\n/**\n * A no-op function to prevent double resolving.\n */\nfunction noop() {}\n\n/**\n * Tests if fn is a Function\n *\n * @param {*} fn\n * @returns {boolean}\n */\nfunction isFunction(fn) {\n  return typeof fn === 'function';\n}\n\n/**\n * Tests if fn is an Object\n *\n * @param {*} obj\n * @returns {boolean}\n */\nfunction isObject(obj) {\n  return obj === Object(obj);\n}\n\n/**\n * Iterates over each element of an array, calling the iterator with the\n * element and its index.\n *\n * @param {!Array} collection\n * @param {function(*=,number)} iterator\n */\nfunction each(collection, iterator) {\n  for (var i = 0; i < collection.length; i++) {\n    iterator(collection[i], i);\n  }\n}\n\n/**\n * Creates a function that will attempt to resolve the deferred with the return\n * of fn. If any error is raised, rejects instead.\n *\n * @param {!Deferred} deferred\n * @param {function(*=)} fn\n * @param {*} arg\n * @returns {function()}\n */\nfunction tryCatchDeferred(deferred, fn, arg) {\n  var promise = deferred.promise;\n  var resolve = deferred.resolve;\n  var reject = deferred.reject;\n  return function() {\n    try {\n      var result = fn(arg);\n      doResolve(promise, resolve, reject, result, result);\n    } catch (e) {\n      reject(e);\n    }\n  };\n}\n\n/**\n * Queues and executes multiple deferred functions on another run loop.\n */\nvar defer = (function() {\n  /**\n   * Defers fn to another run loop.\n   */\n  var scheduleFlush;\n  if (typeof window !== 'undefined' && window.postMessage) {\n    window.addEventListener('message', flush);\n    scheduleFlush = function() {\n      window.postMessage('macro-task', '*');\n    };\n  } else {\n    scheduleFlush = function() {\n      setTimeout(flush, 0);\n    };\n  }\n\n  var queue = new Array(16);\n  var length = 0;\n\n  function flush() {\n    for (var i = 0; i < length; i++) {\n      var fn = queue[i];\n      queue[i] = null;\n      fn();\n    }\n    length = 0;\n  }\n\n  /**\n   * @param {function()} fn\n   */\n  function defer(fn) {\n    if (length === 0) { scheduleFlush(); }\n    queue[length++] = fn;\n  }\n\n  return defer;\n})();\n\n/**\n * The Promise resolution procedure.\n * https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n *\n * @param {!Promise} promise\n * @param {function(*=)} resolve\n * @param {function(*=)} reject\n * @param {*} value\n * @param {*=} context\n */\nfunction doResolve(promise, resolve, reject, value, context) {\n  var _reject = reject;\n  var then;\n  var _resolve;\n  try {\n    if (value === promise) {\n      throw new TypeError('Cannot fulfill promise with itself');\n    }\n    var isObj = isObject(value);\n    if (isObj && value instanceof promise.constructor) {\n      adopt(promise, value._state, value._value, value);\n    } else if (isObj && (then = value.then) && isFunction(then)) {\n      _resolve = function(value) {\n        _resolve = _reject = noop;\n        doResolve(promise, resolve, reject, value, value);\n      };\n      _reject = function(reason) {\n        _resolve = _reject = noop;\n        reject(reason);\n      };\n      then.call(\n        context,\n        function(value) { _resolve(value); },\n        function(reason) { _reject(reason); }\n      );\n    } else {\n      resolve(value);\n    }\n  } catch (e) {\n    _reject(e);\n  }\n}\n\nmodule.exports = Promise;\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {dev} from './log';\nimport {dict} from './utils/object';\nimport {internalListenImplementation} from './event-helper-listen';\nimport {parseJson} from './json';\n\n\n/** @const */\nconst AMP_MESSAGE_PREFIX = 'amp-';\nexport const CONSTANTS = {\n  responseTypeSuffix: '-result',\n  messageIdFieldName: 'messageId',\n  payloadFieldName: 'payload',\n  contentFieldName: 'content',\n};\n\n/** @enum {string} */\nexport const MessageType = {\n  // For amp-ad\n  SEND_EMBED_STATE: 'send-embed-state',\n  EMBED_STATE: 'embed-state',\n  SEND_EMBED_CONTEXT: 'send-embed-context',\n  EMBED_CONTEXT: 'embed-context',\n  SEND_INTERSECTIONS: 'send-intersections',\n  INTERSECTION: 'intersection',\n  EMBED_SIZE: 'embed-size',\n  EMBED_SIZE_CHANGED: 'embed-size-changed',\n  EMBED_SIZE_DENIED: 'embed-size-denied',\n  NO_CONTENT: 'no-content',\n  GET_HTML: 'get-html',\n  GET_CONSENT_STATE: 'get-consent-state',\n\n  // For the frame to be placed in full overlay mode for lightboxes\n  FULL_OVERLAY_FRAME: 'full-overlay-frame',\n  FULL_OVERLAY_FRAME_RESPONSE: 'full-overlay-frame-response',\n  CANCEL_FULL_OVERLAY_FRAME: 'cancel-full-overlay-frame',\n  CANCEL_FULL_OVERLAY_FRAME_RESPONSE: 'cancel-full-overlay-frame-response',\n\n  // For amp-inabox\n  SEND_POSITIONS: 'send-positions',\n  POSITION: 'position',\n\n  // For amp-analytics' iframe-transport\n  SEND_IFRAME_TRANSPORT_EVENTS: 'send-iframe-transport-events',\n  IFRAME_TRANSPORT_EVENTS: 'iframe-transport-events',\n  IFRAME_TRANSPORT_RESPONSE: 'iframe-transport-response',\n\n  // For user-error-in-iframe\n  USER_ERROR_IN_IFRAME: 'user-error-in-iframe',\n};\n\n/**\n * Listens for the specified event on the element.\n * @param {!EventTarget} element\n * @param {string} eventType\n * @param {function(!Event)} listener\n * @param {Object=} opt_evtListenerOpts\n * @return {!UnlistenDef}\n */\nexport function listen(element, eventType, listener, opt_evtListenerOpts) {\n  return internalListenImplementation(\n      element, eventType, listener, opt_evtListenerOpts);\n}\n\n\n/**\n * Serialize an AMP post message. Output looks like:\n * 'amp-011481323099490{\"type\":\"position\",\"sentinel\":\"12345\",\"foo\":\"bar\"}'\n * @param {string} type\n * @param {string} sentinel\n * @param {JsonObject=} data\n * @param {?string=} rtvVersion\n * @return {string}\n */\nexport function serializeMessage(type, sentinel, data = dict(),\n  rtvVersion = null) {\n  // TODO: consider wrap the data in a \"data\" field. { type, sentinal, data }\n  const message = data;\n  message['type'] = type;\n  message['sentinel'] = sentinel;\n  return AMP_MESSAGE_PREFIX + (rtvVersion || '') + JSON.stringify(message);\n}\n\n\n/**\n * Deserialize an AMP post message.\n * Returns null if it's not valid AMP message format.\n *\n * @param {*} message\n * @return {?JsonObject|undefined}\n */\nexport function deserializeMessage(message) {\n  if (!isAmpMessage(message)) {\n    return null;\n  }\n  const startPos = message.indexOf('{');\n  dev().assert(startPos != -1, 'JSON missing in %s', message);\n  try {\n    return parseJson(message.substr(startPos));\n  } catch (e) {\n    dev().error('MESSAGING', 'Failed to parse message: ' + message, e);\n    return null;\n  }\n}\n\n\n/**\n *  Returns true if message looks like it is an AMP postMessage\n *  @param {*} message\n *  @return {boolean}\n */\nexport function isAmpMessage(message) {\n  return (typeof message == 'string' &&\n      message.indexOf(AMP_MESSAGE_PREFIX) == 0 &&\n      message.indexOf('{') != -1);\n}\n\n/** @typedef {{creativeId: string, message: string}} */\nexport let IframeTransportEvent;\n// An event, and the transport ID of the amp-analytics tags that\n// generated it. For instance if the creative with transport\n// ID 2 sends \"hi\", then an IframeTransportEvent would look like:\n// { creativeId: \"2\", message: \"hi\" }\n// If the creative with transport ID 2 sent that, and also sent \"hello\",\n// and the creative with transport ID 3 sends \"goodbye\" then an *array* of 3\n// AmpAnalyticsIframeTransportEvent would be sent to the 3p frame like so:\n// [\n//   { creativeId: \"2\", message: \"hi\" }, // An AmpAnalyticsIframeTransportEvent\n//   { creativeId: \"2\", message: \"hello\" }, // Another\n//   { creativeId: \"3\", message: \"goodbye\" } // And another\n// ]\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {assertHttpsUrl, parseUrlDeprecated} from './url';\nimport {dev, user} from './log';\nimport {dict} from './utils/object';\nimport {getContextMetadata} from '../src/iframe-attributes';\nimport {getMode} from './mode';\nimport {isExperimentOn} from './experiments';\nimport {setStyle} from './style';\nimport {startsWith} from './string';\nimport {tryParseJson} from './json';\nimport {urls} from './config';\n\n/** @type {!Object<string,number>} Number of 3p frames on the for that type. */\nlet count = {};\n\n/** @type {string} */\nlet overrideBootstrapBaseUrl;\n\n/** @const {string} */\nconst TAG = '3p-frame';\n\n/**\n * Produces the attributes for the ad template.\n * @param {!Window} parentWindow\n * @param {!AmpElement} element\n * @param {string=} opt_type\n * @param {Object=} opt_context\n * @return {!JsonObject} Contains\n *     - type, width, height, src attributes of <amp-ad> tag. These have\n *       precedence over the data- attributes.\n *     - data-* attributes of the <amp-ad> tag with the \"data-\" removed.\n *     - A _context object for internal use.\n */\nfunction getFrameAttributes(parentWindow, element, opt_type, opt_context) {\n  const type = opt_type || element.getAttribute('type');\n  user().assert(type, 'Attribute type required for <amp-ad>: %s', element);\n  const sentinel = generateSentinel(parentWindow);\n  let attributes = dict();\n  // Do these first, as the other attributes have precedence.\n  addDataAndJsonAttributes_(element, attributes);\n  attributes = getContextMetadata(parentWindow, element, sentinel,\n      attributes);\n  attributes['type'] = type;\n  Object.assign(attributes['_context'], opt_context);\n  return attributes;\n}\n\n/**\n * Creates the iframe for the embed. Applies correct size and passes the embed\n * attributes to the frame via JSON inside the fragment.\n * @param {!Window} parentWindow\n * @param {!AmpElement} parentElement\n * @param {string=} opt_type\n * @param {Object=} opt_context\n * @param {!{\n *   disallowCustom,\n *   allowFullscreen,\n * }=} opt_options Options for the created iframe.\n * @return {!Element} The iframe.\n */\nexport function getIframe(\n  parentWindow, parentElement, opt_type, opt_context,\n  {disallowCustom, allowFullscreen} = {}) {\n  // Check that the parentElement is already in DOM. This code uses a new and\n  // fast `isConnected` API and thus only used when it's available.\n  dev().assert(\n      parentElement['isConnected'] === undefined ||\n      parentElement['isConnected'] === true,\n      'Parent element must be in DOM');\n  const attributes =\n      getFrameAttributes(parentWindow, parentElement, opt_type, opt_context);\n  const iframe = parentWindow.document.createElement('iframe');\n\n  if (!count[attributes['type']]) {\n    count[attributes['type']] = 0;\n  }\n  count[attributes['type']] += 1;\n\n  const baseUrl = getBootstrapBaseUrl(\n      parentWindow, undefined, opt_type, disallowCustom);\n  const host = parseUrlDeprecated(baseUrl).hostname;\n  // This name attribute may be overwritten if this frame is chosen to\n  // be the master frame. That is ok, as we will read the name off\n  // for our uses before that would occur.\n  // @see https://github.com/ampproject/amphtml/blob/master/3p/integration.js\n  const name = JSON.stringify(dict({\n    'host': host,\n    'type': attributes['type'],\n    // https://github.com/ampproject/amphtml/pull/2955\n    'count': count[attributes['type']],\n    'attributes': attributes,\n  }));\n\n  iframe.src = baseUrl;\n  iframe.ampLocation = parseUrlDeprecated(baseUrl);\n  iframe.name = name;\n  // Add the check before assigning to prevent IE throw Invalid argument error\n  if (attributes['width']) {\n    iframe.width = attributes['width'];\n  }\n  if (attributes['height']) {\n    iframe.height = attributes['height'];\n  }\n  if (attributes['title']) {\n    iframe.title = attributes['title'];\n  }\n  if (allowFullscreen) {\n    iframe.setAttribute('allowfullscreen', 'true');\n  }\n  iframe.setAttribute('scrolling', 'no');\n  setStyle(iframe, 'border', 'none');\n  /** @this {!Element} */\n  iframe.onload = function() {\n    // Chrome does not reflect the iframe readystate.\n    this.readyState = 'complete';\n  };\n  if (isExperimentOn(parentWindow, 'no-sync-xhr-in-ads')) {\n    // Block synchronous XHR in ad. These are very rare, but super bad for UX\n    // as they block the UI thread for the arbitrary amount of time until the\n    // request completes.\n    iframe.setAttribute('allow', 'sync-xhr \\'none\\';');\n  }\n  iframe.setAttribute('data-amp-3p-sentinel',\n      attributes['_context']['sentinel']);\n  return iframe;\n}\n\n/**\n * Copies data- attributes from the element into the attributes object.\n * Removes the data- from the name and capitalizes after -. If there\n * is an attribute called json, parses the JSON and adds it to the\n * attributes.\n * @param {!Element} element\n * @param {!JsonObject} attributes The destination.\n * visibleForTesting\n */\nexport function addDataAndJsonAttributes_(element, attributes) {\n  const {dataset} = element;\n  for (const name in dataset) {\n    // data-vars- is reserved for amp-analytics\n    // see https://github.com/ampproject/amphtml/blob/master/extensions/amp-analytics/analytics-vars.md#variables-as-data-attribute\n    if (!startsWith(name, 'vars')) {\n      attributes[name] = dataset[name];\n    }\n  }\n  const json = element.getAttribute('json');\n  if (json) {\n    const obj = tryParseJson(json);\n    if (obj === undefined) {\n      throw user().createError(\n          'Error parsing JSON in json attribute in element %s',\n          element);\n    }\n    for (const key in obj) {\n      attributes[key] = obj[key];\n    }\n  }\n}\n\n/**\n * Preloads URLs related to the bootstrap iframe.\n * @param {!Window} win\n * @param {!./preconnect.Preconnect} preconnect\n * @param {string=} opt_type\n * @param {boolean=} opt_disallowCustom whether 3p url should not use meta tag.\n */\nexport function preloadBootstrap(\n  win, preconnect, opt_type, opt_disallowCustom) {\n  const url = getBootstrapBaseUrl(win, undefined, opt_type, opt_disallowCustom);\n  preconnect.preload(url, 'document');\n\n  // While the URL may point to a custom domain, this URL will always be\n  // fetched by it.\n  const scriptUrl = getMode().localDev\n    ? getAdsLocalhost(win) + '/dist.3p/current/integration.js'\n    : `${urls.thirdParty}/$internalRuntimeVersion$/f.js`;\n  preconnect.preload(scriptUrl, 'script');\n}\n\n/**\n * Returns the base URL for 3p bootstrap iframes.\n * @param {!Window} parentWindow\n * @param {boolean=} opt_strictForUnitTest\n * @param {string=} opt_type\n * @param {boolean=} opt_disallowCustom whether 3p url should not use meta tag.\n * @return {string}\n * @visibleForTesting\n */\nexport function getBootstrapBaseUrl(\n  parentWindow, opt_strictForUnitTest, opt_type, opt_disallowCustom) {\n  // The value is cached in a global variable called `bootstrapBaseUrl`;\n  const {bootstrapBaseUrl} = parentWindow;\n  if (bootstrapBaseUrl) {\n    return bootstrapBaseUrl;\n  }\n  return parentWindow.bootstrapBaseUrl = getCustomBootstrapBaseUrl(\n      parentWindow, opt_strictForUnitTest, opt_type, opt_disallowCustom) ||\n      getDefaultBootstrapBaseUrl(parentWindow);\n}\n\n/**\n * @param {string} url\n */\nexport function setDefaultBootstrapBaseUrlForTesting(url) {\n  overrideBootstrapBaseUrl = url;\n}\n\n/**\n * @param {*} win\n */\nexport function resetBootstrapBaseUrlForTesting(win) {\n  win.bootstrapBaseUrl = undefined;\n  win.defaultBootstrapSubDomain = undefined;\n}\n\n/**\n * Returns the default base URL for 3p bootstrap iframes.\n * @param {!Window} parentWindow\n * @param {string=} opt_srcFileBasename\n * @return {string}\n */\nexport function getDefaultBootstrapBaseUrl(parentWindow, opt_srcFileBasename) {\n  const srcFileBasename = opt_srcFileBasename || 'frame';\n  if (getMode().localDev || getMode().test) {\n    return overrideBootstrapBaseUrl || getAdsLocalhost(parentWindow)\n          + '/dist.3p/'\n          + (getMode().minified ? `$internalRuntimeVersion$/${srcFileBasename}`\n            : `current/${srcFileBasename}.max`)\n          + '.html';\n  }\n  // Ensure same sub-domain is used despite potentially different file.\n  parentWindow.defaultBootstrapSubDomain =\n      parentWindow.defaultBootstrapSubDomain || getSubDomain(parentWindow);\n  return 'https://' + parentWindow.defaultBootstrapSubDomain +\n      `.${urls.thirdPartyFrameHost}/$internalRuntimeVersion$/` +\n      `${srcFileBasename}.html`;\n}\n\n/**\n * @param {!Window} win\n * @return {string}\n */\nfunction getAdsLocalhost(win) {\n  let adsUrl = urls.thirdParty; // local dev with a non-localhost server\n  if (adsUrl.indexOf('ampproject.net') > -1) {\n    adsUrl = 'http://ads.localhost'; // local dev with a localhost server\n  }\n  return adsUrl + ':' + (win.location.port || win.parent.location.port);\n}\n\n/**\n * Sub domain on which the 3p iframe will be hosted.\n * Because we only calculate the URL once per page, this function is only\n * called once and hence all frames on a page use the same URL.\n * @param {!Window} win\n * @return {string}\n * @visibleForTesting\n */\nexport function getSubDomain(win) {\n  return 'd-' + getRandom(win);\n}\n\n/**\n * Generates a random non-negative integer.\n * @param {!Window} win\n * @return {string}\n */\nexport function getRandom(win) {\n  let rand;\n  if (win.crypto && win.crypto.getRandomValues) {\n    // By default use 2 32 bit integers.\n    const uint32array = new Uint32Array(2);\n    win.crypto.getRandomValues(uint32array);\n    rand = String(uint32array[0]) + uint32array[1];\n  } else {\n    // Fall back to Math.random.\n    rand = String(win.Math.random()).substr(2) + '0';\n  }\n  return rand;\n}\n\n/**\n * Returns the custom base URL for 3p bootstrap iframes if it exists.\n * Otherwise null.\n * @param {!Window} parentWindow\n * @param {boolean=} opt_strictForUnitTest\n * @param {string=} opt_type\n * @param {boolean=} opt_disallowCustom whether 3p url should not use meta tag.\n * @return {?string}\n */\nfunction getCustomBootstrapBaseUrl(\n  parentWindow, opt_strictForUnitTest, opt_type, opt_disallowCustom) {\n  const meta = parentWindow.document\n      .querySelector('meta[name=\"amp-3p-iframe-src\"]');\n  if (!meta) {\n    return null;\n  }\n  if (opt_disallowCustom) {\n    user().error(TAG, `3p iframe url disabled for ${opt_type || 'unknown'}`);\n    return null;\n  }\n  const url = assertHttpsUrl(meta.getAttribute('content'), meta);\n  user().assert(url.indexOf('?') == -1,\n      '3p iframe url must not include query string %s in element %s.',\n      url, meta);\n  // This is not a security primitive, we just don't want this to happen in\n  // practice. People could still redirect to the same origin, but they cannot\n  // redirect to the proxy origin which is the important one.\n  const parsed = parseUrlDeprecated(url);\n  user().assert((parsed.hostname == 'localhost' && !opt_strictForUnitTest) ||\n      parsed.origin != parseUrlDeprecated(parentWindow.location.href).origin,\n  '3p iframe url must not be on the same origin as the current document ' +\n      '%s (%s) in element %s. See https://github.com/ampproject/amphtml' +\n      '/blob/master/spec/amp-iframe-origin-policy.md for details.', url,\n  parsed.origin, meta);\n  return url + '?$internalRuntimeVersion$';\n}\n\n/**\n * Returns a randomized sentinel value for 3p iframes.\n * The format is \"%d-%d\" with the first value being the depth of current\n * window in the window hierarchy and the second a random integer.\n * @param {!Window} parentWindow\n * @return {string}\n * @visibleForTesting\n */\nexport function generateSentinel(parentWindow) {\n  let windowDepth = 0;\n  for (let win = parentWindow; win && win != win.parent; win = win.parent) {\n    windowDepth++;\n  }\n  return String(windowDepth) + '-' + getRandom(parentWindow);\n}\n\n/**\n * Resets the count of each 3p frame type\n * @visibleForTesting\n */\nexport function resetCountForTesting() {\n  count = {};\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Services} from './services';\nimport {adConfig} from '../ads/_config';\nimport {dev} from '../src/log';\n\n/**\n * @param {AMP.BaseElement} adElement\n * @return {!Promise<string|undefined>} A promise for a CID or undefined if\n *     - the ad network does not request one or\n *     - `amp-analytics` which provides the CID service was not installed.\n */\nexport function getAdCid(adElement) {\n  const config = adConfig[adElement.element.getAttribute('type')];\n  if (!config || !config.clientIdScope) {\n    return Promise.resolve();\n  }\n  return getOrCreateAdCid(adElement.getAmpDoc(), config.clientIdScope,\n      config.clientIdCookieName);\n}\n\n/**\n * @param {!./service/ampdoc-impl.AmpDoc} ampDoc\n * @param {string} clientIdScope\n * @param {string=} opt_clientIdCookieName\n * @param {number=} opt_timeout\n * @return {!Promise<string|undefined>} A promise for a CID or undefined.\n */\nexport function getOrCreateAdCid(\n  ampDoc, clientIdScope, opt_clientIdCookieName, opt_timeout) {\n  const timeout = isNaN(opt_timeout) || opt_timeout == null ?\n    1000 : opt_timeout;\n  const cidPromise = Services.cidForDoc(ampDoc).then(cidService => {\n    if (!cidService) {\n      return;\n    }\n    return cidService.get({\n      scope: dev().assertString(clientIdScope),\n      createCookieIfNotPresent: true,\n      cookieName: opt_clientIdCookieName,\n    }, Promise.resolve(undefined)).catch(error => {\n      // Not getting a CID is not fatal.\n      dev().error('AD-CID', error);\n      return undefined;\n    });\n  });\n  // The CID should never be crucial for an ad. If it does not come within\n  // 1 second, assume it will never arrive.\n  return Services.timerFor(ampDoc.win)\n      .timeoutPromise(timeout, cidPromise, 'cid timeout').catch(error => {\n        // Timeout is not fatal.\n        dev().warn('AD-CID', error);\n        return undefined;\n      });\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {computedStyle} from './style';\nimport {dev} from './log';\nimport {getParentWindowFrameElement} from './service';\n\nconst AD_CONTAINER_PROP = '__AMP__AD_CONTAINER';\n\n/**\n * Tags that are allowed to have fixed positioning\n * @const {!Object<string, boolean>}\n */\nconst CONTAINERS = {\n  'AMP-FX-FLYING-CARPET': true,\n  'AMP-LIGHTBOX': true,\n  'AMP-STICKY-AD': true,\n  'AMP-LIGHTBOX-GALLERY': true,\n};\n\n/**\n * Determines if an element is fixed-positioned.\n * OK to use, because it's only called from onLayoutMeasure\n * @param {!Element} el\n * @param {!Window} win\n * @return {boolean}\n */\nfunction isPositionFixed(el, win) {\n  const {position} = computedStyle(win, el);\n  // We consider sticky positions as fixed, since they can be fixed.\n  return position == 'fixed' || position == 'sticky';\n}\n\n/**\n * @param {!Element} element\n * @param {!Window} win\n * @return {boolean} whether the element position is allowed. If the element\n * belongs to CONTAINERS, it is allowed to be position fixed.\n * If the element has a position fixed ancestor, it is not allowed.\n * This should only be called when a layout on the page was just forced\n * anyway.\n */\nexport function isAdPositionAllowed(element, win) {\n  let hasFixedAncestor = false;\n  let containers = 0;\n  let el = element;\n  do {\n    if (CONTAINERS[el.tagName]) {\n      // The containers must not themselves be contained in a fixed-position\n      // element. Continue the search.\n      containers++;\n      hasFixedAncestor = false;\n    } else if (isPositionFixed(dev().assertElement(el), win)) {\n      // Because certain blessed elements may contain a position fixed\n      // container (which contain an ad), we continue to search the\n      // ancestry tree.\n      hasFixedAncestor = true;\n    }\n    el = el.parentElement;\n  } while (el && el.tagName != 'BODY');\n  return !hasFixedAncestor && containers <= 1;\n}\n\n/**\n * Returns the blessed container element tagName if the ad is contained by one.\n * This is called during layout measure.\n * @param {!Element} element\n * @return {?string}\n */\nexport function getAdContainer(element) {\n  if (element[AD_CONTAINER_PROP] === undefined) {\n    let el = element.parentElement;\n    while (el && el.tagName != 'BODY') {\n      if (CONTAINERS[el.tagName]) {\n        return element[AD_CONTAINER_PROP] = el.tagName;\n      }\n      el = el.parentElement;\n    }\n    element[AD_CONTAINER_PROP] = null;\n  }\n  return element[AD_CONTAINER_PROP];\n}\n\n/**\n * Gets the resource ID of the amp-ad element containing the passed node.\n * If there is no containing amp-ad tag, then null will be returned.\n * TODO(jonkeller): Investigate whether non-A4A use case is needed. Issue 11436\n * @param {!Element} node\n * @param {!Window} topWin\n * @return {?string}\n */\nexport function getAmpAdResourceId(node, topWin) {\n  try {\n    const frameParent = getParentWindowFrameElement(node, topWin).parentElement;\n    if (frameParent.nodeName == 'AMP-AD') {\n      return String(frameParent.getResourceId());\n    }\n  } catch (e) {\n  }\n  // Whether we entered the catch above (e.g. due to attempt to access\n  // across xdomain boundary), or failed to enter the if further above, the\n  // node is not within a friendly amp-ad tag. So, there is no amp-ad\n  // resource ID. How to handle that is up to the caller, but see TODO above.\n  return null;\n}\n\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Common AMP events.\n * @enum {string}\n */\nexport const AmpEvents = {\n  BUILT: 'amp:built',\n  DOM_UPDATE: 'amp:dom-update',\n  VISIBILITY_CHANGE: 'amp:visibilitychange', // https://github.com/ampproject/amphtml/blob/master/ads/README.md#page-visibility\n  // The following codes are only used for testing.\n  // TODO(choumx): Move these to a separate enum so they can be DCE'd.\n  ATTACHED: 'amp:attached',\n  STUBBED: 'amp:stubbed',\n  LOAD_START: 'amp:load:start',\n  LOAD_END: 'amp:load:end',\n  ERROR: 'amp:error',\n};\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Services} from './services';\n\n/**\n * Helper method to trigger analytics event if amp-analytics is available.\n * TODO: Do not expose this function\n * @param {!Element} target\n * @param {string} eventType\n * @param {!Object<string, string>=} opt_vars A map of vars and their values.\n */\nexport function triggerAnalyticsEvent(target, eventType, opt_vars) {\n  Services.analyticsForDocOrNull(target).then(analytics => {\n    if (!analytics) {\n      return;\n    }\n    analytics.triggerEventForTarget(target, eventType, opt_vars);\n  });\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * Commonly used signals across different elements and documents.\n * @enum {string}\n */\nexport const CommonSignals = {\n\n  /**\n   * The element has been built.\n   */\n  BUILT: 'built',\n\n  /**\n   * The initial contents of an element/document/embed have been loaded.\n   */\n  INI_LOAD: 'ini-load',\n\n  /**\n   * The element has been loaded.\n   */\n  LOAD_END: 'load-end',\n\n  /**\n   * The element has started loading.\n   */\n  LOAD_START: 'load-start',\n\n  /**\n   * Rendering has been confirmed to have been started.\n   */\n  RENDER_START: 'render-start',\n\n  /**\n   * The element has been unlaid out.\n   */\n  UNLOAD: 'unload',\n};\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Allows for runtime configuration. Internally, the runtime should\n * use the src/config.js module for various constants. We can use the\n * AMP_CONFIG global to translate user-defined configurations to this\n * module.\n * @type {!Object<string, string>}\n */\nconst env = self.AMP_CONFIG || {};\n\nconst thirdPartyFrameRegex = typeof env['thirdPartyFrameRegex'] == 'string' ?\n  new RegExp(env['thirdPartyFrameRegex']) : env['thirdPartyFrameRegex'];\n\nconst cdnProxyRegex = typeof env['cdnProxyRegex'] == 'string' ?\n  new RegExp(env['cdnProxyRegex']) : env['cdnProxyRegex'];\n\n/** @type {!Object<string, string|boolean|RegExp>} */\nexport const urls = {\n  thirdParty: env['thirdPartyUrl'] || 'https://3p.ampproject.net',\n  thirdPartyFrameHost: env['thirdPartyFrameHost'] || 'ampproject.net',\n  thirdPartyFrameRegex: thirdPartyFrameRegex || /^d-\\d+\\.ampproject\\.net$/,\n  cdn: env['cdnUrl'] || 'https://cdn.ampproject.org',\n  /* Note that cdnProxyRegex is only ever checked against origins\n   * (proto://host[:port]) so does not need to consider path\n   */\n  cdnProxyRegex: cdnProxyRegex ||\n      /^https:\\/\\/([a-zA-Z0-9_-]+\\.)?cdn\\.ampproject\\.org$/,\n  localhostRegex: /^https?:\\/\\/localhost(:\\d+)?$/,\n  errorReporting: env['errorReportingUrl'] ||\n      'https://amp-error-reporting.appspot.com/r',\n  localDev: env['localDev'] || false,\n};\n\nexport const config = {\n  urls,\n};\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// This file will be imported by 3P scripts.\n\n/**\n * Possible consent policy state to proceed with.\n * @enum {number}\n */\nexport const CONSENT_POLICY_STATE = {\n  // Enum value has external dependency. Please do not change existing value.\n  // If new values are added, please notify the AMP for Ads team to assure\n  // correct Real Time Config behavior is maintained for Fast Fetch.\n  SUFFICIENT: 1,\n  INSUFFICIENT: 2,\n  UNKNOWN_NOT_REQUIRED: 3,\n  UNKNOWN: 4,\n};\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  CONSENT_POLICY_STATE, // eslint-disable-line no-unused-vars\n} from './consent-state';\nimport {Services} from './services';\n\n/**\n * Returns a promise that resolve when all consent state the policy wait\n * for resolve. Or if consent service is not available.\n * @param {!./service/ampdoc-impl.AmpDoc} ampdoc\n * @param {string} policyId\n * @return {!Promise<?CONSENT_POLICY_STATE>}\n */\nexport function getConsentPolicyState(ampdoc, policyId) {\n  return Services.consentPolicyServiceForDocOrNull(ampdoc)\n      .then(consentPolicy => {\n        if (!consentPolicy) {\n          return null;\n        }\n        return consentPolicy.whenPolicyResolved(\n            /** @type {string} */ (policyId));\n      });\n}\n\n/**\n * Returns a promise that resolves to a sharedData retrieved from consent\n * remote endpoint.\n * @param {!./service/ampdoc-impl.AmpDoc} ampdoc\n * @param {string} policyId\n * @return {!Promise<?Object>}\n */\nexport function getConsentPolicySharedData(ampdoc, policyId) {\n  return Services.consentPolicyServiceForDocOrNull(ampdoc)\n      .then(consentPolicy => {\n        if (!consentPolicy) {\n          return null;\n        }\n        return consentPolicy.getMergedSharedData(\n            /** @type {string} */ (policyId));\n      });\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {endsWith} from './string';\nimport {\n  isProxyOrigin,\n  parseUrlDeprecated,\n  tryDecodeUriComponent,\n} from './url';\nimport {urls} from './config';\n\n\n/**\n * Returns the value of the cookie. The cookie access is restricted and must\n * go through the privacy review. Before using this method please file a\n * GitHub issue with \"Privacy Review\" label.\n *\n * Returns the cookie's value or `null`.\n *\n * @param {!Window} win\n * @param {string} name\n * @return {?string}\n */\nexport function getCookie(win, name) {\n  const cookieString = tryGetDocumentCookieNoInline(win);\n  if (!cookieString) {\n    return null;\n  }\n  const cookies = cookieString.split(';');\n  for (let i = 0; i < cookies.length; i++) {\n    const cookie = cookies[i].trim();\n    const eq = cookie.indexOf('=');\n    if (eq == -1) {\n      continue;\n    }\n    if (tryDecodeUriComponent(cookie.substring(0, eq).trim()) == name) {\n      const value = cookie.substring(eq + 1).trim();\n      return tryDecodeUriComponent(value, value);\n    }\n  }\n  return null;\n}\n\n/**\n * This method should not be inlined to prevent TryCatch deoptimization.\n * NoInline keyword at the end of function name also prevents Closure compiler\n * from inlining the function.\n * @param {!Window} win\n * @return {string}\n */\nfunction tryGetDocumentCookieNoInline(win) {\n  try {\n    return win.document.cookie;\n  } catch (e) {\n    // Act as if no cookie is available. Exceptions can be thrown when\n    // AMP docs are opened on origins that do not allow setting\n    // cookies such as null origins.\n    return '';\n  }\n}\n\n/**\n * Sets the value of the cookie. The cookie access is restricted and must\n * go through the privacy review. Before using this method please file a\n * GitHub issue with \"Privacy Review\" label.\n *\n * @param {!Window} win\n * @param {string} name\n * @param {string} value\n * @param {time} expirationTime\n * @param {{\n *   highestAvailableDomain:(boolean|undefined),\n *   domain:(string|undefined)\n * }=} opt_options\n *     - highestAvailableDomain: If true, set the cookie at the widest domain\n *       scope allowed by the browser. E.g. on example.com if we are currently\n *       on www.example.com.\n *     - domain: Explicit domain to set.\n *     - allowOnProxyOrigin: Allow setting a cookie on the AMP Cache.\n */\nexport function setCookie(win, name, value, expirationTime, opt_options) {\n  checkOriginForSettingCookie(win, opt_options, name);\n  if (opt_options && opt_options.highestAvailableDomain) {\n    const parts = win.location.hostname.split('.');\n    let domain = parts[parts.length - 1];\n    for (let i = parts.length - 2; i >= 0; i--) {\n      domain = parts[i] + '.' + domain;\n      trySetCookie(win, name, value, expirationTime, domain);\n      if (getCookie(win, name) == value) {\n        return;\n      }\n    }\n  }\n  let domain = undefined;\n  if (opt_options && opt_options.domain) {\n    domain = opt_options.domain;\n  }\n  trySetCookie(win, name, value, expirationTime, domain);\n}\n\n/**\n * Attempt to set a cookie with the given params.\n *\n * @param {!Window} win\n * @param {string} name\n * @param {string} value\n * @param {time} expirationTime\n * @param {string|undefined} domain\n */\nfunction trySetCookie(win, name, value, expirationTime, domain) {\n  // We do not allow setting cookies on the domain that contains both\n  // the cdn. and www. hosts.\n  if (domain == 'ampproject.org') {\n    // Actively delete them.\n    value = 'delete';\n    expirationTime = 0;\n  }\n  const cookie = encodeURIComponent(name) + '=' +\n      encodeURIComponent(value) +\n      '; path=/' +\n      (domain ? '; domain=' + domain : '') +\n      '; expires=' + new Date(expirationTime).toUTCString();\n  try {\n    win.document.cookie = cookie;\n  } catch (ignore) {\n    // Do not throw if setting the cookie failed Exceptions can be thrown\n    // when AMP docs are opened on origins that do not allow setting\n    // cookies such as null origins.\n  }\n}\n\n/**\n * Throws if a given cookie should not be set on the given origin.\n * This is a defense-in-depth. Callers should never run into this.\n *\n * @param {!Window} win\n * @param {!Object|undefined} options\n * @param {string} name For the error message.\n */\nfunction checkOriginForSettingCookie(win, options, name) {\n  if (options && options.allowOnProxyOrigin) {\n    return;\n  }\n  if (isProxyOrigin(win.location.href)) {\n    throw new Error('Should never attempt to set cookie on proxy origin: '\n        + name);\n  }\n\n  const current = parseUrlDeprecated(win.location.href).hostname.toLowerCase();\n  const proxy = parseUrlDeprecated(urls.cdn).hostname.toLowerCase();\n  if (current == proxy || endsWith(current, '.' + proxy)) {\n    throw new Error('Should never attempt to set cookie on proxy origin.'\n        + ' (in depth check): ' + name);\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Deferred} from './utils/promise';\nimport {cssEscape} from '../third_party/css-escape/css-escape';\nimport {dev} from './log';\nimport {dict} from './utils/object';\nimport {startsWith} from './string';\nimport {toWin} from './types';\n\nconst HTML_ESCAPE_CHARS = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#x27;',\n  '`': '&#x60;',\n};\nconst HTML_ESCAPE_REGEX = /(&|<|>|\"|'|`)/g;\n\n/** @const {string} */\nexport const UPGRADE_TO_CUSTOMELEMENT_PROMISE =\n    '__AMP_UPG_PRM';\n\n/** @const {string} */\nexport const UPGRADE_TO_CUSTOMELEMENT_RESOLVER =\n    '__AMP_UPG_RES';\n\n/**\n * Waits until the child element is constructed. Once the child is found, the\n * callback is executed.\n * @param {!Element} parent\n * @param {function(!Element):boolean} checkFunc\n * @param {function()} callback\n */\nexport function waitForChild(parent, checkFunc, callback) {\n  if (checkFunc(parent)) {\n    callback();\n    return;\n  }\n  /** @const {!Window} */\n  const win = toWin(parent.ownerDocument.defaultView);\n  if (win.MutationObserver) {\n    /** @const {MutationObserver} */\n    const observer = new win.MutationObserver(() => {\n      if (checkFunc(parent)) {\n        observer.disconnect();\n        callback();\n      }\n    });\n    observer.observe(parent, {childList: true});\n  } else {\n    /** @const {number} */\n    const interval = win.setInterval(() => {\n      if (checkFunc(parent)) {\n        win.clearInterval(interval);\n        callback();\n      }\n    }, /* milliseconds */ 5);\n  }\n}\n\n/**\n * Waits until the child element is constructed. Once the child is found, the\n * promise is resolved.\n * @param {!Element} parent\n * @param {function(!Element):boolean} checkFunc\n * @return {!Promise}\n */\nexport function waitForChildPromise(parent, checkFunc) {\n  return new Promise(resolve => {\n    waitForChild(parent, checkFunc, resolve);\n  });\n}\n\n/**\n * Waits for document's body to be available.\n * Will be deprecated soon; use {@link AmpDoc#whenBodyAvailable} or\n * @{link DocumentState#onBodyAvailable} instead.\n * @param {!Document} doc\n * @param {function()} callback\n */\nexport function waitForBody(doc, callback) {\n  waitForChild(doc.documentElement, () => !!doc.body, callback);\n}\n\n\n/**\n * Waits for document's body to be available.\n * @param {!Document} doc\n * @return {!Promise}\n */\nexport function waitForBodyPromise(doc) {\n  return new Promise(resolve => {\n    waitForBody(doc, resolve);\n  });\n}\n\n\n/**\n * Removes the element.\n * @param {!Element} element\n */\nexport function removeElement(element) {\n  if (element.parentElement) {\n    element.parentElement.removeChild(element);\n  }\n}\n\n\n/**\n * Removes all child nodes of the specified element.\n * @param {!Element} parent\n */\nexport function removeChildren(parent) {\n  while (parent.firstChild) {\n    parent.removeChild(parent.firstChild);\n  }\n}\n\n\n/**\n * Copies all children nodes of element \"from\" to element \"to\". Child nodes\n * are deeply cloned. Notice, that this method should be used with care and\n * preferably on smaller subtrees.\n * @param {!Element} from\n * @param {!Element|!DocumentFragment} to\n */\nexport function copyChildren(from, to) {\n  const frag = to.ownerDocument.createDocumentFragment();\n  for (let n = from.firstChild; n; n = n.nextSibling) {\n    frag.appendChild(n.cloneNode(true));\n  }\n  to.appendChild(frag);\n}\n\n/**\n * Insert the element in the root after the element named after or\n * if that is null at the beginning.\n * @param {!Element|!ShadowRoot} root\n * @param {!Element} element\n * @param {?Node} after\n */\nexport function insertAfterOrAtStart(root, element, after) {\n  const before = after ? after.nextSibling : root.firstChild;\n  root.insertBefore(element, before);\n}\n\n/**\n * Add attributes to an element.\n * @param {!Element} element\n * @param {!JsonObject<string, string>} attributes\n * @return {!Element} created element\n */\nexport function addAttributesToElement(element, attributes) {\n  for (const attr in attributes) {\n    element.setAttribute(attr, attributes[attr]);\n  }\n  return element;\n}\n\n/**\n * Create a new element on document with specified tagName and attributes.\n * @param {!Document} doc\n * @param {string} tagName\n * @param {!JsonObject<string, string>} attributes\n * @return {!Element} created element\n */\nexport function createElementWithAttributes(doc, tagName, attributes) {\n  const element = doc.createElement(tagName);\n  return addAttributesToElement(element, attributes);\n}\n\n/**\n * Returns true if node is connected (attached).\n * @param {!Node} node\n * @return {boolean}\n * @see https://dom.spec.whatwg.org/#connected\n */\nexport function isConnectedNode(node) {\n  const connected = node.isConnected;\n  if (connected !== undefined) {\n    return connected;\n  }\n\n  // \"An element is connected if its shadow-including root is a document.\"\n  let n = node;\n  do {\n    n = rootNodeFor(n);\n    if (n.host) {\n      n = n.host;\n    } else {\n      break;\n    }\n  } while (true);\n  return n.nodeType === Node.DOCUMENT_NODE;\n}\n\n/**\n * Returns the root for a given node. Does not cross shadow DOM boundary.\n * @param {!Node} node\n * @return {!Node}\n */\nexport function rootNodeFor(node) {\n  if (Node.prototype.getRootNode) {\n    // Type checker says `getRootNode` may return null.\n    return node.getRootNode() || node;\n  }\n  let n;\n  for (n = node; !!n.parentNode; n = n.parentNode) {}\n  return n;\n}\n\n/**\n * Finds the closest element that satisfies the callback from this element\n * up the DOM subtree.\n * @param {!Element} element\n * @param {function(!Element):boolean} callback\n * @param {Element=} opt_stopAt optional elemnt to stop the search at.\n * @return {?Element}\n */\nexport function closest(element, callback, opt_stopAt) {\n  for (let el = element; el && el !== opt_stopAt; el = el.parentElement) {\n    if (callback(el)) {\n      return el;\n    }\n  }\n  return null;\n}\n\n\n/**\n * Finds the closest node that satisfies the callback from this node\n * up the DOM subtree.\n * @param {!Node} node\n * @param {function(!Node):boolean} callback\n * @return {?Node}\n */\nexport function closestNode(node, callback) {\n  for (let n = node; n; n = n.parentNode) {\n    if (callback(n)) {\n      return n;\n    }\n  }\n  return null;\n}\n\n\n/**\n * Finds the closest element with the specified name from this element\n * up the DOM subtree.\n * @param {!Element} element\n * @param {string} tagName\n * @return {?Element}\n */\nexport function closestByTag(element, tagName) {\n  if (element.closest) {\n    return element.closest(tagName);\n  }\n  tagName = tagName.toUpperCase();\n  return closest(element, el => {\n    return el.tagName == tagName;\n  });\n}\n\n/**\n * Finds the closest element with the specified selector from this element\n * @param {!Element} element\n * @param {string} selector\n * @return {?Element} closest ancestor if found.\n */\nexport function closestBySelector(element, selector) {\n  if (element.closest) {\n    return element.closest(selector);\n  }\n\n  return closest(element, el => {\n    return matches(el, selector);\n  });\n}\n\n/**\n * Checks if the given element matches the selector\n * @param  {!Element} el The element to verify\n * @param  {string} selector The selector to check against\n * @return {boolean} True if the element matched the selector. False otherwise.\n */\nexport function matches(el, selector) {\n  const matcher = el.matches ||\n      el.webkitMatchesSelector ||\n      el.mozMatchesSelector ||\n      el.msMatchesSelector ||\n      el.oMatchesSelector;\n  if (matcher) {\n    return matcher.call(el, selector);\n  }\n  return false; // IE8 always returns false.\n}\n\n/**\n * Finds the first descendant element with the specified name.\n * @param {!Element|!Document|!ShadowRoot} element\n * @param {string} tagName\n * @return {?Element}\n */\nexport function elementByTag(element, tagName) {\n  let elements;\n  // getElementsByTagName() is not supported on ShadowRoot.\n  if (typeof element.getElementsByTagName === 'function') {\n    elements = element.getElementsByTagName(tagName);\n  } else {\n    elements = element./*OK*/querySelectorAll(tagName);\n  }\n  return (elements && elements[0]) || null;\n}\n\n\n/**\n * Finds the first child element that satisfies the callback.\n * @param {!Element} parent\n * @param {function(!Element):boolean} callback\n * @return {?Element}\n */\nexport function childElement(parent, callback) {\n  for (let child = parent.firstElementChild; child;\n    child = child.nextElementSibling) {\n    if (callback(child)) {\n      return child;\n    }\n  }\n  return null;\n}\n\n\n/**\n * Finds all child elements that satisfy the callback.\n * @param {!Element} parent\n * @param {function(!Element):boolean} callback\n * @return {!Array<!Element>}\n */\nexport function childElements(parent, callback) {\n  const children = [];\n  for (let child = parent.firstElementChild; child;\n    child = child.nextElementSibling) {\n    if (callback(child)) {\n      children.push(child);\n    }\n  }\n  return children;\n}\n\n\n/**\n * Finds the last child element that satisfies the callback.\n * @param {!Element} parent\n * @param {function(!Element):boolean} callback\n * @return {?Element}\n */\nexport function lastChildElement(parent, callback) {\n  for (let child = parent.lastElementChild; child;\n    child = child.previousElementSibling) {\n    if (callback(child)) {\n      return child;\n    }\n  }\n  return null;\n}\n\n/**\n * Finds all child nodes that satisfy the callback.\n * These nodes can include Text, Comment and other child nodes.\n * @param {!Node} parent\n * @param {function(!Node):boolean} callback\n * @return {!Array<!Node>}\n */\nexport function childNodes(parent, callback) {\n  const nodes = [];\n  for (let child = parent.firstChild; child;\n    child = child.nextSibling) {\n    if (callback(child)) {\n      nodes.push(child);\n    }\n  }\n  return nodes;\n}\n\n/**\n * @type {boolean|undefined}\n * @visibleForTesting\n */\nlet scopeSelectorSupported;\n\n/**\n * @param {boolean|undefined} val\n * @visibleForTesting\n */\nexport function setScopeSelectorSupportedForTesting(val) {\n  scopeSelectorSupported = val;\n}\n\n/**\n * Test that the :scope selector is supported and behaves correctly.\n * @param {!Element} parent\n * @return {boolean}\n */\nfunction isScopeSelectorSupported(parent) {\n  const doc = parent.ownerDocument;\n  try {\n    const testElement = doc.createElement('div');\n    const testChild = doc.createElement('div');\n    testElement.appendChild(testChild);\n    // NOTE(cvializ, #12383): Firefox's implementation is incomplete,\n    // therefore we test actual functionality of`:scope` as well.\n    return testElement./*OK*/querySelector(':scope div') === testChild;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Finds the first child element that has the specified attribute.\n * @param {!Element} parent\n * @param {string} attr\n * @return {?Element}\n */\nexport function childElementByAttr(parent, attr) {\n  return scopedQuerySelector/*OK*/(parent, `> [${attr}]`);\n}\n\n\n/**\n * Finds the last child element that has the specified attribute.\n * @param {!Element} parent\n * @param {string} attr\n * @return {?Element}\n */\nexport function lastChildElementByAttr(parent, attr) {\n  return lastChildElement(parent, el => {\n    return el.hasAttribute(attr);\n  });\n}\n\n\n/**\n * Finds all child elements that has the specified attribute.\n * @param {!Element} parent\n * @param {string} attr\n * @return {!NodeList<!Element>}\n */\nexport function childElementsByAttr(parent, attr) {\n  return scopedQuerySelectorAll/*OK*/(parent, `> [${attr}]`);\n}\n\n\n/**\n * Finds the first child element that has the specified tag name.\n * @param {!Element} parent\n * @param {string} tagName\n * @return {?Element}\n */\nexport function childElementByTag(parent, tagName) {\n  return scopedQuerySelector/*OK*/(parent, `> ${tagName}`);\n}\n\n\n/**\n * Finds all child elements with the specified tag name.\n * @param {!Element} parent\n * @param {string} tagName\n * @return {!NodeList<!Element>}\n */\nexport function childElementsByTag(parent, tagName) {\n  return scopedQuerySelectorAll/*OK*/(parent, `> ${tagName}`);\n}\n\n\n/**\n * Finds the first element that matches `selector`, scoped inside `root`.\n * Note: in IE, this causes a quick mutation of the element's class list.\n * @param {!Element} root\n * @param {string} selector\n * @return {?Element}\n */\nexport function scopedQuerySelector(root, selector) {\n  if (scopeSelectorSupported == null) {\n    scopeSelectorSupported = isScopeSelectorSupported(root);\n  }\n  if (scopeSelectorSupported) {\n    return root./*OK*/querySelector(`:scope ${selector}`);\n  }\n\n  // Only IE.\n  const unique = 'i-amphtml-scoped';\n  root.classList.add(unique);\n  const element = root./*OK*/querySelector(`.${unique} ${selector}`);\n  root.classList.remove(unique);\n  return element;\n}\n\n\n/**\n * Finds the every element that matches `selector`, scoped inside `root`.\n * Note: in IE, this causes a quick mutation of the element's class list.\n * @param {!Element} root\n * @param {string} selector\n * @return {!NodeList<!Element>}\n */\nexport function scopedQuerySelectorAll(root, selector) {\n  if (scopeSelectorSupported == null) {\n    scopeSelectorSupported = isScopeSelectorSupported(root);\n  }\n  if (scopeSelectorSupported) {\n    return root./*OK*/querySelectorAll(`:scope ${selector}`);\n  }\n\n  // Only IE.\n  const unique = 'i-amphtml-scoped';\n  root.classList.add(unique);\n  const elements = root./*OK*/querySelectorAll(`.${unique} ${selector}`);\n  root.classList.remove(unique);\n  return elements;\n}\n\n\n/**\n * Returns element data-param- attributes as url parameters key-value pairs.\n * e.g. data-param-some-attr=value -> {someAttr: value}.\n * @param {!Element} element\n * @param {function(string):string=} opt_computeParamNameFunc to compute the\n *    parameter name, get passed the camel-case parameter name.\n * @param {!RegExp=} opt_paramPattern Regex pattern to match data attributes.\n * @return {!JsonObject}\n */\nexport function getDataParamsFromAttributes(element, opt_computeParamNameFunc,\n  opt_paramPattern) {\n  const computeParamNameFunc = opt_computeParamNameFunc || (key => key);\n  const {dataset} = element;\n  const params = dict();\n  const paramPattern = opt_paramPattern ? opt_paramPattern : /^param(.+)/;\n  for (const key in dataset) {\n    const matches = key.match(paramPattern);\n    if (matches) {\n      const param = matches[1][0].toLowerCase() + matches[1].substr(1);\n      params[computeParamNameFunc(param)] = dataset[key];\n    }\n  }\n  return params;\n}\n\n/**\n * Whether the element have a next node in the document order.\n * This means either:\n *  a. The element itself has a nextSibling.\n *  b. Any of the element ancestors has a nextSibling.\n * @param {!Element} element\n * @param {?Node} opt_stopNode\n * @return {boolean}\n */\nexport function hasNextNodeInDocumentOrder(element, opt_stopNode) {\n  let currentElement = element;\n  do {\n    if (currentElement.nextSibling) {\n      return true;\n    }\n  } while ((currentElement = currentElement.parentNode) &&\n            currentElement != opt_stopNode);\n  return false;\n}\n\n\n/**\n * Finds all ancestor elements that satisfy predicate.\n * @param {!Element} child\n * @param {function(!Element):boolean} predicate\n * @return {!Array<!Element>}\n */\nexport function ancestorElements(child, predicate) {\n  const ancestors = [];\n  for (let ancestor = child.parentElement; ancestor;\n    ancestor = ancestor.parentElement) {\n    if (predicate(ancestor)) {\n      ancestors.push(ancestor);\n    }\n  }\n  return ancestors;\n}\n\n\n/**\n * Finds all ancestor elements that has the specified tag name.\n * @param {!Element} child\n * @param {string} tagName\n * @return {!Array<!Element>}\n */\nexport function ancestorElementsByTag(child, tagName) {\n  tagName = tagName.toUpperCase();\n  return ancestorElements(child, el => {\n    return el.tagName == tagName;\n  });\n}\n\n/**\n * Returns a clone of the content of a template element.\n *\n * Polyfill to replace .content access for browsers that do not support\n * HTMLTemplateElements natively.\n *\n * @param {!HTMLTemplateElement|!Element} template\n * @return {!DocumentFragment}\n */\nexport function templateContentClone(template) {\n  if ('content' in template) {\n    return template.content.cloneNode(true);\n  } else {\n    const content = template.ownerDocument.createDocumentFragment();\n    copyChildren(template, content);\n    return content;\n  }\n}\n\n/**\n * Iterate over an array-like. Some collections like NodeList are\n * lazily evaluated in some browsers, and accessing `length` forces full\n * evaluation. We can improve performance by iterating until an element is\n * `undefined` to avoid checking the `length` property.\n * Test cases: https://jsperf.com/iterating-over-collections-of-elements\n * @param {!IArrayLike<T>} iterable\n * @param {function(T, number)} cb\n * @template T\n */\nexport function iterateCursor(iterable, cb) {\n  for (let i = 0, value; (value = iterable[i]) !== undefined; i++) {\n    cb(value, i);\n  }\n}\n\n/**\n * This method wraps around window's open method. It first tries to execute\n * `open` call with the provided target and if it fails, it retries the call\n * with the `_top` target. This is necessary given that in some embedding\n * scenarios, such as iOS' WKWebView, navigation to `_blank` and other targets\n * is blocked by default.\n *\n * @param {!Window} win\n * @param {string} url\n * @param {string} target\n * @param {string=} opt_features\n * @return {?Window}\n */\nexport function openWindowDialog(win, url, target, opt_features) {\n  // Try first with the specified target. If we're inside the WKWebView or\n  // a similar environments, this method is expected to fail by default for\n  // all targets except `_top`.\n  let res;\n  try {\n    res = win.open(url, target, opt_features);\n  } catch (e) {\n    dev().error('DOM', 'Failed to open url on target: ', target, e);\n  }\n\n  // Then try with `_top` target.\n  if (!res && target != '_top') {\n    res = win.open(url, '_top');\n  }\n  return res;\n}\n\n/**\n * Whether the element is a script tag with application/json type.\n * @param {!Element} element\n * @return {boolean}\n */\nexport function isJsonScriptTag(element) {\n  return element.tagName == 'SCRIPT' &&\n            element.getAttribute('type').toUpperCase() == 'APPLICATION/JSON';\n}\n\n/**\n * Whether the element is a script tag with application/json type.\n * @param {!Element} element\n * @return {boolean}\n */\nexport function isJsonLdScriptTag(element) {\n  return element.tagName == 'SCRIPT' &&\n      element.getAttribute('type').toUpperCase() == 'APPLICATION/LD+JSON';\n}\n\n/**\n * Whether the page's direction is right to left or not.\n * @param {!Document} doc\n * @return {boolean}\n */\nexport function isRTL(doc) {\n  const dir = doc.body.getAttribute('dir')\n                 || doc.documentElement.getAttribute('dir')\n                 || 'ltr';\n  return dir == 'rtl';\n}\n\n\n/**\n * Escapes an ident (ID or a class name) to be used as a CSS selector.\n *\n * See https://drafts.csswg.org/cssom/#serialize-an-identifier.\n *\n * @param {string} ident\n * @return {string}\n */\nexport function escapeCssSelectorIdent(ident) {\n  return cssEscape(ident);\n}\n\n/**\n * Escapes an ident in a way that can be used by :nth-child() psuedo-class.\n *\n * See https://github.com/w3c/csswg-drafts/issues/2306.\n *\n * @param {string|number} ident\n * @return {string}\n */\nexport function escapeCssSelectorNth(ident) {\n  const escaped = String(ident);\n  // Ensure it doesn't close the nth-child psuedo class.\n  dev().assert(escaped.indexOf(')') === -1);\n  return escaped;\n}\n\n/**\n * Escapes `<`, `>` and other HTML charcaters with their escaped forms.\n * @param {string} text\n * @return {string}\n */\nexport function escapeHtml(text) {\n  if (!text) {\n    return text;\n  }\n  return text.replace(HTML_ESCAPE_REGEX, escapeHtmlChar);\n}\n\n/**\n * @param {string} c\n * @return {string}\n */\nfunction escapeHtmlChar(c) {\n  return HTML_ESCAPE_CHARS[c];\n}\n\n/**\n * Tries to focus on the given element; fails silently if browser throws an\n * exception.\n * @param {!Element} element\n */\nexport function tryFocus(element) {\n  try {\n    element./*OK*/focus();\n  } catch (e) {\n    // IE <= 7 may throw exceptions when focusing on hidden items.\n  }\n}\n\n/**\n * Whether the given window is in an iframe or not.\n * @param {!Window} win\n * @return {boolean}\n */\nexport function isIframed(win) {\n  return win.parent && win.parent != win;\n}\n\n/**\n * Determines if this element is an AMP element\n * @param {!Element} element\n * @return {boolean}\n */\nexport function isAmpElement(element) {\n  const tag = element.tagName;\n  // Use prefix to recognize AMP element. This is necessary because stub\n  // may not be attached yet.\n  return startsWith(tag, 'AMP-') &&\n      // Some \"amp-*\" elements are not really AMP elements. :smh:\n      !(tag == 'AMP-STICKY-AD-TOP-PADDING' || tag == 'AMP-BODY');\n}\n\n/**\n * Return a promise that resolve when an AMP element upgrade from HTMLElement\n * to CustomElement\n * @param {!Element} element\n * @return {!Promise<!Element>}\n */\nexport function whenUpgradedToCustomElement(element) {\n  dev().assert(isAmpElement(element), 'element is not AmpElement');\n  if (element.createdCallback) {\n    // Element already is CustomElement;\n    return Promise.resolve(element);\n  }\n  // If Element is still HTMLElement, wait for it to upgrade to customElement\n  // Note: use pure string to avoid obfuscation between versions.\n  if (!element[UPGRADE_TO_CUSTOMELEMENT_PROMISE]) {\n    const deferred = new Deferred();\n    element[UPGRADE_TO_CUSTOMELEMENT_PROMISE] = deferred.promise;\n    element[UPGRADE_TO_CUSTOMELEMENT_RESOLVER] = deferred.resolve;\n\n  }\n\n  return element[UPGRADE_TO_CUSTOMELEMENT_PROMISE];\n}\n\n/**\n * Replacement for `Element.requestFullscreen()` method.\n * https://developer.mozilla.org/en-US/docs/Web/API/Element/requestFullscreen\n * @param {!Element} element\n */\nexport function fullscreenEnter(element) {\n  const requestFs = element.requestFullscreen\n   || element.requestFullScreen\n   || element.webkitRequestFullscreen\n   || element.webkitRequestFullScreen\n   || element.webkitEnterFullscreen\n   || element.webkitEnterFullScreen\n   || element.msRequestFullscreen\n   || element.msRequestFullScreen\n   || element.mozRequestFullscreen\n   || element.mozRequestFullScreen;\n  if (requestFs) {\n    requestFs.call(element);\n  }\n}\n\n/**\n * Replacement for `Document.exitFullscreen()` method.\n * https://developer.mozilla.org/en-US/docs/Web/API/Document/exitFullscreen\n * @param {!Element} element\n */\nexport function fullscreenExit(element) {\n  let exitFs = element.cancelFullScreen\n              || element.exitFullscreen\n              || element.exitFullScreen\n              || element.webkitExitFullscreen\n              || element.webkitExitFullScreen\n              || element.webkitCancelFullScreen\n              || element.mozCancelFullScreen\n              || element.msExitFullscreen;\n  if (exitFs) {\n    exitFs.call(element);\n    return;\n  }\n  if (element.ownerDocument) {\n    exitFs = element.ownerDocument.cancelFullScreen\n             || element.ownerDocument.exitFullscreen\n             || element.ownerDocument.exitFullScreen\n             || element.ownerDocument.webkitExitFullscreen\n             || element.ownerDocument.webkitExitFullScreen\n             || element.ownerDocument.webkitCancelFullScreen\n             || element.ownerDocument.mozCancelFullScreen\n             || element.ownerDocument.msExitFullscreen;\n  }\n  if (exitFs) {\n    exitFs.call(element.ownerDocument);\n    return;\n  }\n}\n\n\n/**\n * Replacement for `Document.fullscreenElement`.\n * https://developer.mozilla.org/en-US/docs/Web/API/Document/fullscreenElement\n * @param {!Element} element\n * @return {boolean}\n */\nexport function isFullscreenElement(element) {\n  const isFullscreen = element.webkitDisplayingFullscreen;\n  if (isFullscreen) {\n    return true;\n  }\n  if (element.ownerDocument) {\n    const fullscreenElement = element.ownerDocument.fullscreenElement\n             || element.ownerDocument.webkitFullscreenElement\n             || element.ownerDocument.mozFullScreenElement\n             || element.webkitCurrentFullScreenElement;\n    if (fullscreenElement == element) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Returns true if node is not disabled.\n *\n * IE8 can return false positives, see {@link matches}.\n * @param {!Element} element\n * @return {boolean}\n * @see https://www.w3.org/TR/html5/forms.html#concept-fe-disabled\n */\nexport function isEnabled(element) {\n  return !(element.disabled || matches(element, ':disabled'));\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as dom from './dom';\nimport {\n  getAmpdoc,\n  getExistingServiceForDocInEmbedScope,\n  getService,\n  getServicePromise,\n  getServicePromiseForDoc,\n  getServicePromiseOrNull,\n  getServicePromiseOrNullForDoc,\n  getTopWindow,\n} from './service';\nimport {toWin} from './types';\nimport {user} from './log';\n\n/**\n * Returns a promise for a service for the given id and window. Also expects an\n * element that has the actual implementation. The promise resolves when the\n * implementation loaded. Users should typically wrap this as a special purpose\n * function (e.g. Services.viewportForDoc(...)) for type safety and because the\n * factory should not be passed around.\n * @param {!Window} win\n * @param {string} id of the service.\n * @param {string} extension Name of the custom extension that provides the\n *     implementation of this service.\n * @param {boolean=} opt_element Whether this service is provided by an element,\n *     not the extension.\n * @return {!Promise<*>}\n */\nexport function getElementService(win, id, extension, opt_element) {\n  return getElementServiceIfAvailable(win, id, extension, opt_element).then(\n      service => assertService(service, id, extension));\n}\n\n/**\n * Same as getElementService but produces null if the given element is not\n * actually available on the current page.\n * @param {!Window} win\n * @param {string} id of the service.\n * @param {string} extension Name of the custom extension that provides the\n *     implementation of this service.\n * @param {boolean=} opt_element Whether this service is provided by an\n *     element, not the extension.\n * @return {!Promise<?Object>}\n */\nexport function getElementServiceIfAvailable(win, id, extension, opt_element) {\n  const s = getServicePromiseOrNull(win, id);\n  if (s) {\n    return /** @type {!Promise<?Object>} */ (s);\n  }\n  return getElementServicePromiseOrNull(win, id, extension, opt_element);\n}\n\n/**\n * @param {!Window} win\n * @param {string} elementName Name of an extended custom element.\n * @return {boolean} Whether this element is scheduled to be loaded.\n */\nfunction isElementScheduled(win, elementName) {\n  // Set in custom-element.js\n  if (!win.ampExtendedElements) {\n    return false;\n  }\n  return !!win.ampExtendedElements[elementName];\n}\n\n\n/**\n * Returns a promise for a service for the given id and window. Also expects an\n * element that has the actual implementation. The promise resolves when the\n * implementation loaded. Users should typically wrap this as a special purpose\n * function (e.g. Services.viewportForDoc(...)) for type safety and because the\n * factory should not be passed around.\n * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n * @param {string} id of the service.\n * @param {string} extension Name of the custom extension that provides the\n *     implementation of this service.\n * @param {boolean=} opt_element Whether this service is provided by an element,\n *     not the extension.\n * @return {!Promise<*>}\n */\nexport function getElementServiceForDoc(elementOrAmpDoc, id, extension,\n  opt_element) {\n  return getElementServiceIfAvailableForDoc(\n      elementOrAmpDoc, id, extension, opt_element)\n      .then(service => assertService(service, id, extension));\n}\n\n/**\n * Same as getElementService but produces null if the given element is not\n * actually available on the current page.\n * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n * @param {string} id of the service.\n * @param {string} extension Name of the custom extension that provides the\n *     implementation of this service.\n * @param {boolean=} opt_element Whether this service is provided by an\n *     element, not the extension.\n * @return {!Promise<?Object>}\n */\nexport function getElementServiceIfAvailableForDoc(\n  elementOrAmpDoc, id, extension, opt_element) {\n  const ampdoc = getAmpdoc(elementOrAmpDoc);\n  const s = getServicePromiseOrNullForDoc(elementOrAmpDoc, id);\n  if (s) {\n    return /** @type {!Promise<?Object>} */ (s);\n  }\n\n  return ampdoc.whenBodyAvailable()\n      .then(() => waitForExtensionIfPresent(\n          ampdoc.win, extension,\n          ampdoc.getHeadNode()))\n      .then(() => {\n        // If this service is provided by an element, then we can't depend on\n        // the service (they may not use the element).\n        if (opt_element) {\n          return getServicePromiseOrNullForDoc(elementOrAmpDoc, id);\n        } else if (isElementScheduled(ampdoc.win, extension)) {\n          return getServicePromiseForDoc(elementOrAmpDoc, id);\n        }\n        return null;\n      });\n}\n\n/**\n * Returns a promise for service for the given id in the embed scope of\n * a given node, if it exists. Otherwise, falls back to ampdoc scope IFF\n * the given node is in the top-level window.\n * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n * @param {string} id of the service.\n * @param {string} extension Name of the custom element that provides\n *     the implementation of this service.\n * @return {!Promise<?Object>}\n */\nexport function getElementServiceIfAvailableForDocInEmbedScope(\n  elementOrAmpDoc, id, extension) {\n  const s = getExistingServiceForDocInEmbedScope(elementOrAmpDoc, id);\n  if (s) {\n    return /** @type {!Promise<?Object>} */ (Promise.resolve(s));\n  }\n  // Return embed-scope element service promise if scheduled.\n  if (elementOrAmpDoc.nodeType) {\n    const win = toWin(elementOrAmpDoc.ownerDocument.defaultView);\n    const topWin = getTopWindow(win);\n    // In embeds, doc-scope services are window-scope. But make sure to\n    // only do this for embeds (not the top window), otherwise we'd grab\n    // a promise from the wrong service holder which would never resolve.\n    if (win !== topWin) {\n      return getElementServicePromiseOrNull(win, id, extension);\n    } else {\n      // Fallback to ampdoc IFF the given node is _not_ FIE.\n      return getElementServiceIfAvailableForDoc(elementOrAmpDoc, id, extension);\n    }\n  }\n  return /** @type {!Promise<?Object>} */ (Promise.resolve(null));\n}\n\n/**\n * Throws user error if `service` is null.\n * @param {Object} service\n * @param {string} id\n * @param {string} extension\n * @return {!Object}\n * @private\n */\nfunction assertService(service, id, extension) {\n  return /** @type {!Object} */ (user().assert(service,\n      'Service %s was requested to be provided through %s, ' +\n      'but %s is not loaded in the current page. To fix this ' +\n      'problem load the JavaScript file for %s in this page.',\n      id, extension, extension, extension));\n}\n\n/**\n * Get list of all the extension JS files\n * @param {HTMLHeadElement|Element|ShadowRoot} head\n * @return {!Array<string>}\n */\nexport function extensionScriptsInNode(head) {\n  // ampdoc.getHeadNode() can return null\n  if (!head) {\n    return [];\n  }\n  const scripts = [];\n  const list = head.querySelectorAll('script[custom-element]');\n  for (let i = 0; i < list.length; i++) {\n    scripts.push(list[i].getAttribute('custom-element'));\n  }\n  return scripts;\n}\n\n/**\n * Waits for body to be present then verifies that an extension script is\n * present in head for installation.\n * @param {!./service/ampdoc-impl.AmpDoc} ampdoc\n * @param {string} extensionId\n * @return {!Promise<boolean>}\n */\nexport function isExtensionScriptInNode(ampdoc, extensionId) {\n  return ampdoc.whenBodyAvailable()\n      .then(() => {\n        return extensionScriptInNode(\n            ampdoc.getHeadNode(), extensionId);\n      });\n}\n\n/**\n * Verifies that an extension script is present in head for\n * installation.\n * @param {HTMLHeadElement|Element|ShadowRoot} head\n * @param {string} extensionId\n * @private\n */\nfunction extensionScriptInNode(head, extensionId) {\n  return extensionScriptsInNode(head).includes(extensionId);\n}\n\n/**\n * Waits for an extension if its script is present\n * @param {!Window} win\n * @param {string} extension\n * @param {HTMLHeadElement|Element|ShadowRoot} head\n * @return {!Promise}\n * @private\n */\nfunction waitForExtensionIfPresent(win, extension, head) {\n  /**\n   * If there is an extension script wait for it to load before trying\n   * to get the service. Prevents a race condition when everything but\n   * the extensions is in cache. If there is no script then it's either\n   * not present, or the service was defined by a test. In those cases\n   * we don't wait around for an extension that does not exist.\n   */\n\n  // TODO(jpettitt) investigate registerExtension to short circuit\n  // the dom call in extensionScriptsInNode()\n  if (!extensionScriptInNode(head, extension)) {\n    return Promise.resolve();\n  }\n\n  const extensions = getService(win, 'extensions');\n  return /** @type {!Promise<?Object>} */ (\n    extensions.waitForExtension(win, extension));\n}\n\n/**\n * Returns the promise for service with `id` on the given window if available.\n * Otherwise, resolves with null (service was not registered).\n * @param {!Window} win\n * @param {string} id\n * @param {string} extension\n * @param {boolean=} opt_element\n * @return {!Promise<Object>}\n * @private\n */\nfunction getElementServicePromiseOrNull(win, id, extension, opt_element) {\n  return dom.waitForBodyPromise(win.document)\n      .then(() => waitForExtensionIfPresent(win, extension, win.document.head))\n      .then(() => {\n        // If this service is provided by an element, then we can't depend on\n        // the service (they may not use the element).\n        if (opt_element) {\n          return getServicePromiseOrNull(win, id);\n        } else if (isElementScheduled(win, extension)) {\n          return getServicePromise(win, id);\n        }\n        return null;\n      });\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nimport {AmpEvents} from './amp-events';\nimport {Services} from './services';\nimport {\n  USER_ERROR_SENTINEL,\n  dev,\n  duplicateErrorIfNecessary,\n  isUserErrorEmbed,\n  isUserErrorMessage,\n} from './log';\nimport {experimentTogglesOrNull, getBinaryType, isCanary} from './experiments';\nimport {exponentialBackoff} from './exponential-backoff';\nimport {getMode} from './mode';\nimport {isExperimentOn} from './experiments';\nimport {\n  isLoadErrorMessage,\n} from './event-helper';\nimport {isProxyOrigin} from './url';\nimport {makeBodyVisible} from './style-installer';\nimport {startsWith} from './string';\nimport {triggerAnalyticsEvent} from './analytics';\nimport {urls} from './config';\n\n/**\n * @const {string}\n */\nconst CANCELLED = 'CANCELLED';\n\n/**\n * @const {string}\n */\nconst BLOCK_BY_CONSENT = 'BLOCK_BY_CONSENT';\n\n\n/**\n * The threshold for errors throttled because nothing can be done about\n * them, but we'd still like to report the rough number.\n * @const {number}\n */\nconst NON_ACTIONABLE_ERROR_THROTTLE_THRESHOLD = 0.001;\n\n/**\n * The threshold for errors throttled because nothing can be done about\n * them, but we'd still like to report the rough number.\n * @const {number}\n */\nconst USER_ERROR_THROTTLE_THRESHOLD = 0.1;\n\n\n/**\n * Collects error messages, so they can be included in subsequent reports.\n * That allows identifying errors that might be caused by previous errors.\n */\nlet accumulatedErrorMessages = self.AMPErrors || [];\n// Use a true global, to avoid multi-module inclusion issues.\nself.AMPErrors = accumulatedErrorMessages;\n\n/**\n * Pushes element into array, keeping at most the most recent limit elements\n *\n * @param {!Array<T>} array\n * @param {T} element\n * @param {number} limit\n * @template T\n */\nfunction pushLimit(array, element, limit) {\n  if (array.length >= limit) {\n    array.splice(0, array.length - limit + 1);\n  }\n  array.push(element);\n}\n\n/**\n * A wrapper around our exponentialBackoff, to lazy initialize it to avoid an\n * un-DCE'able side-effect.\n * @param {function()} work the function to execute after backoff\n * @return {number} the setTimeout id\n */\nlet reportingBackoff = function(work) {\n  // Set reportingBackoff as the lazy-created function. JS Vooodoooo.\n  reportingBackoff = exponentialBackoff(1.5);\n  return reportingBackoff(work);\n};\n\n/**\n * Attempts to stringify a value, falling back to String.\n * @param {*} value\n * @return {string}\n */\nfunction tryJsonStringify(value) {\n  try {\n    // Cast is fine, because we really don't care here. Just trying.\n    return JSON.stringify(/** @type {!JsonObject} */ (value));\n  } catch (e) {\n    return String(value);\n  }\n}\n\n/**\n * The true JS engine, as detected by inspecting an Error stack. This should be\n * used with the userAgent to tell definitely. I.e., Chrome on iOS is really a\n * Safari JS engine.\n */\nlet detectedJsEngine;\n\n/**\n * @param {!Window} win\n * @param {*} error\n * @param {!Element=} opt_associatedElement\n */\nexport function reportErrorForWin(win, error, opt_associatedElement) {\n  reportError(error, opt_associatedElement);\n  if (error && !!win && isUserErrorMessage(error.message)\n      && !isUserErrorEmbed(error.message)) {\n    reportErrorToAnalytics(/** @type {!Error} */(error), win);\n  }\n}\n\n/**\n * Reports an error. If the error has an \"associatedElement\" property\n * the element is marked with the `i-amphtml-element-error` and displays\n * the message itself. The message is always send to the console.\n * If the error has a \"messageArray\" property, that array is logged.\n * This way one gets the native fidelity of the console for things like\n * elements instead of stringification.\n * @param {*} error\n * @param {!Element=} opt_associatedElement\n * @return {!Error}\n */\nexport function reportError(error, opt_associatedElement) {\n  try {\n    // Convert error to the expected type.\n    let isValidError;\n    if (error) {\n      if (error.message !== undefined) {\n        error = duplicateErrorIfNecessary(/** @type {!Error} */(error));\n        isValidError = true;\n      } else {\n        const origError = error;\n        error = new Error(tryJsonStringify(origError));\n        error.origError = origError;\n      }\n    } else {\n      error = new Error('Unknown error');\n    }\n    // Report if error is not an expected type.\n    if (!isValidError && getMode().localDev && !getMode().test) {\n      setTimeout(function() {\n        const rethrow = new Error(\n            '_reported_ Error reported incorrectly: ' + error);\n        throw rethrow;\n      });\n    }\n\n    if (error.reported) {\n      return /** @type {!Error} */ (error);\n    }\n    error.reported = true;\n\n    // Update element.\n    const element = opt_associatedElement || error.associatedElement;\n    if (element && element.classList) {\n      element.classList.add('i-amphtml-error');\n      if (getMode().development) {\n        element.classList.add('i-amphtml-element-error');\n        element.setAttribute('error-message', error.message);\n      }\n    }\n\n    // Report to console.\n    if (self.console) {\n      const output = (console.error || console.log);\n      if (error.messageArray) {\n        output.apply(console, error.messageArray);\n      } else {\n        if (element) {\n          output.call(console, error.message, element);\n        } else if (!getMode().minified) {\n          output.call(console, error.stack);\n        } else {\n          output.call(console, error.message);\n        }\n      }\n    }\n    if (element && element.dispatchCustomEventForTesting) {\n      element.dispatchCustomEventForTesting(AmpEvents.ERROR, error.message);\n    }\n\n    // 'call' to make linter happy. And .call to make compiler happy\n    // that expects some @this.\n    reportErrorToServer['call'](undefined, undefined, undefined, undefined,\n        undefined, error);\n  } catch (errorReportingError) {\n    setTimeout(function() {\n      throw errorReportingError;\n    });\n  }\n  return /** @type {!Error} */ (error);\n}\n\n/**\n * Returns an error for a cancellation of a promise.\n * @return {!Error}\n */\nexport function cancellation() {\n  return new Error(CANCELLED);\n}\n\n/**\n * @param {*} errorOrMessage\n * @return {boolean}\n */\nexport function isCancellation(errorOrMessage) {\n  if (!errorOrMessage) {\n    return false;\n  }\n  if (typeof errorOrMessage == 'string') {\n    return startsWith(errorOrMessage, CANCELLED);\n  }\n  if (typeof errorOrMessage.message == 'string') {\n    return startsWith(errorOrMessage.message, CANCELLED);\n  }\n  return false;\n}\n\n/**\n * Returns an error for component blocked by consent\n * @return {!Error}\n */\nexport function blockedByConsentError() {\n  return new Error(BLOCK_BY_CONSENT);\n}\n\n/**\n * @param {*} errorOrMessage\n * @return {boolean}\n */\nexport function isBlockedByConsent(errorOrMessage) {\n  if (!errorOrMessage) {\n    return false;\n  }\n  if (typeof errorOrMessage == 'string') {\n    return startsWith(errorOrMessage, BLOCK_BY_CONSENT);\n  }\n  if (typeof errorOrMessage.message == 'string') {\n    return startsWith(errorOrMessage.message, BLOCK_BY_CONSENT);\n  }\n  return false;\n}\n\n\n/**\n * Install handling of global unhandled exceptions.\n * @param {!Window} win\n */\nexport function installErrorReporting(win) {\n  win.onerror = /** @type {!Function} */ (reportErrorToServer);\n  win.addEventListener('unhandledrejection', event => {\n    if (event.reason &&\n      (event.reason.message === CANCELLED ||\n      event.reason.message === BLOCK_BY_CONSENT)) {\n      event.preventDefault();\n      return;\n    }\n    reportError(event.reason || new Error('rejected promise ' + event));\n  });\n}\n\n/**\n * Signature designed, so it can work with window.onerror\n * @param {string|undefined} message\n * @param {string|undefined} filename\n * @param {string|undefined} line\n * @param {string|undefined} col\n * @param {*|undefined} error\n * @this {!Window|undefined}\n */\nfunction reportErrorToServer(message, filename, line, col, error) {\n  // Make an attempt to unhide the body.\n  if (this && this.document) {\n    makeBodyVisible(this.document);\n  }\n  if (getMode().localDev || getMode().development || getMode().test) {\n    return;\n  }\n  let hasNonAmpJs = false;\n  try {\n    hasNonAmpJs = detectNonAmpJs(self);\n  } catch (ignore) {\n    // Ignore errors during error report generation.\n  }\n  if (hasNonAmpJs && Math.random() > 0.01) {\n    // Only report 1% of errors on pages with non-AMP JS.\n    // These errors can almost never be acted upon, but spikes such as\n    // due to buggy browser extensions may be helpful to notify authors.\n    return;\n  }\n  const data = getErrorReportData(message, filename, line, col, error,\n      hasNonAmpJs);\n  if (data) {\n    // Report the error to viewer if it has the capability. The data passed\n    // to the viewer is exactly the same as the data passed to the server\n    // below.\n    maybeReportErrorToViewer(this, data);\n    reportingBackoff(() => {\n      const xhr = new XMLHttpRequest();\n      xhr.open('POST', urls.errorReporting, true);\n      xhr.send(JSON.stringify(data));\n    });\n  }\n}\n\n/**\n * Passes the given error data to the viewer if the following criteria is met:\n * - The viewer is a trusted viewer\n * - The viewer has the `errorReporter` capability\n * - The AMP doc is in single doc mode\n * - The AMP doc is opted-in for error interception (`<html>` tag has the\n *   `report-errors-to-viewer` attribute)\n *\n * @param {!Window} win\n * @param {!JsonObject} data Data from `getErrorReportData`.\n * @return {!Promise<boolean>} `Promise<True>` if the error was sent to the\n *     viewer, `Promise<False>` otherwise.\n * @visibleForTesting\n */\nexport function maybeReportErrorToViewer(win, data) {\n  const ampdocService = Services.ampdocServiceFor(win);\n  if (!ampdocService.isSingleDoc()) {\n    return Promise.resolve(false);\n  }\n  const ampdocSingle = ampdocService.getAmpDoc();\n  const htmlElement = ampdocSingle.getRootNode().documentElement;\n  const docOptedIn = htmlElement.hasAttribute('report-errors-to-viewer');\n  if (!docOptedIn) {\n    return Promise.resolve(false);\n  }\n\n  const viewer = Services.viewerForDoc(ampdocSingle);\n  if (!viewer.hasCapability('errorReporter')) {\n    return Promise.resolve(false);\n  }\n\n  return viewer.isTrustedViewer().then(viewerTrusted => {\n    if (!viewerTrusted) {\n      return false;\n    }\n    viewer.sendMessage('error', data);\n    return true;\n  });\n}\n\n/**\n * Signature designed, so it can work with window.onerror\n * @param {string|undefined} message\n * @param {string|undefined} filename\n * @param {string|undefined} line\n * @param {string|undefined} col\n * @param {*|undefined} error\n * @param {boolean} hasNonAmpJs\n * @return {!JsonObject|undefined} The data to post\n * visibleForTesting\n */\nexport function getErrorReportData(message, filename, line, col, error,\n  hasNonAmpJs) {\n  let expected = false;\n  if (error) {\n    if (error.message) {\n      message = error.message;\n    } else {\n      // This should never be a string, but sometimes it is.\n      message = String(error);\n    }\n    // An \"expected\" error is still an error, i.e. some features are disabled\n    // or not functioning fully because of it. However, it's an expected\n    // error. E.g. as is the case with some browser API missing (storage).\n    // Thus, the error can be classified differently by log aggregators.\n    // The main goal is to monitor that an \"expected\" error doesn't deteriorate\n    // over time. It's impossible to completely eliminate it.\n    if (error.expected) {\n      expected = true;\n    }\n  }\n  if (!message) {\n    message = 'Unknown error';\n  }\n  if (/_reported_/.test(message)) {\n    return;\n  }\n  if (message == CANCELLED) {\n    return;\n  }\n\n  const detachedWindow = !(self && self.window);\n  const throttleBase = Math.random();\n\n  // We throttle load errors and generic \"Script error.\" errors\n  // that have no information and thus cannot be acted upon.\n  if (isLoadErrorMessage(message) ||\n    // See https://github.com/ampproject/amphtml/issues/7353\n    // for context.\n    message == 'Script error.' ||\n    // Window has become detached, really anything can happen\n    // at this point.\n    detachedWindow) {\n    expected = true;\n\n    if (throttleBase > NON_ACTIONABLE_ERROR_THROTTLE_THRESHOLD) {\n      return;\n    }\n  }\n\n  const isUserError = isUserErrorMessage(message);\n\n  // Only report a subset of user errors.\n  if (isUserError && throttleBase > USER_ERROR_THROTTLE_THRESHOLD) {\n    return;\n  }\n\n  // This is the App Engine app in\n  // https://github.com/ampproject/error-tracker\n  // It stores error reports via https://cloud.google.com/error-reporting/\n  // for analyzing production issues.\n  const data = /** @type {!JsonObject} */ (Object.create(null));\n  data['v'] = getMode().rtvVersion;\n  data['noAmp'] = hasNonAmpJs ? '1' : '0';\n  data['m'] = message.replace(USER_ERROR_SENTINEL, '');\n  data['a'] = isUserError ? '1' : '0';\n\n  // Errors are tagged with \"ex\" (\"expected\") label to allow loggers to\n  // classify these errors as benchmarks and not exceptions.\n  data['ex'] = expected ? '1' : '0';\n  data['dw'] = detachedWindow ? '1' : '0';\n\n  let runtime = '1p';\n  if (self.context && self.context.location) {\n    data['3p'] = '1';\n    runtime = '3p';\n  } else if (getMode().runtime) {\n    runtime = getMode().runtime;\n  }\n  data['rt'] = runtime;\n\n  // TODO(erwinm): Remove ca when all systems read `bt` instead of `ca` to\n  // identify js binary type.\n  data['ca'] = isCanary(self) ? '1' : '0';\n\n  // Pass binary type.\n  data['bt'] = getBinaryType(self);\n\n  if (self.location.ancestorOrigins && self.location.ancestorOrigins[0]) {\n    data['or'] = self.location.ancestorOrigins[0];\n  }\n  if (self.viewerState) {\n    data['vs'] = self.viewerState;\n  }\n  // Is embedded?\n  if (self.parent && self.parent != self) {\n    data['iem'] = '1';\n  }\n\n  if (self.AMP && self.AMP.viewer) {\n    const resolvedViewerUrl = self.AMP.viewer.getResolvedViewerUrl();\n    const messagingOrigin = self.AMP.viewer.maybeGetMessagingOrigin();\n    if (resolvedViewerUrl) {\n      data['rvu'] = resolvedViewerUrl;\n    }\n    if (messagingOrigin) {\n      data['mso'] = messagingOrigin;\n    }\n  }\n\n  if (!detectedJsEngine) {\n    detectedJsEngine = detectJsEngineFromStack();\n  }\n  data['jse'] = detectedJsEngine;\n\n  const exps = [];\n  const experiments = experimentTogglesOrNull(self);\n  for (const exp in experiments) {\n    const on = experiments[exp];\n    exps.push(`${exp}=${on ? '1' : '0'}`);\n  }\n  data['exps'] = exps.join(',');\n\n  if (error) {\n    const tagName = error.associatedElement\n      ? error.associatedElement.tagName\n      : 'u'; // Unknown\n    data['el'] = tagName;\n\n    if (error.args) {\n      data['args'] = JSON.stringify(error.args);\n    }\n\n    if (!isUserError && !error.ignoreStack && error.stack) {\n      data['s'] = error.stack;\n    }\n\n    error.message += ' _reported_';\n  } else {\n    data['f'] = filename || '';\n    data['l'] = line || '';\n    data['c'] = col || '';\n  }\n  data['r'] = self.document.referrer;\n  data['ae'] = accumulatedErrorMessages.join(',');\n  data['fr'] = self.location.originalHash || self.location.hash;\n\n  pushLimit(accumulatedErrorMessages, message, 25);\n\n  return data;\n}\n\n/**\n * Returns true if it appears like there is non-AMP JS on the\n * current page.\n * @param {!Window} win\n * @return {boolean}\n * @visibleForTesting\n */\nexport function detectNonAmpJs(win) {\n  const scripts = win.document.querySelectorAll('script[src]');\n  for (let i = 0; i < scripts.length; i++) {\n    if (!isProxyOrigin(scripts[i].src.toLowerCase())) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Resets accumulated error messages for testing\n */\nexport function resetAccumulatedErrorMessagesForTesting() {\n  accumulatedErrorMessages = [];\n}\n\n/**\n * Does a series of checks on the stack of an thrown error to determine the\n * JS engine that is currently running. This gives a bit more information than\n * just the UserAgent, since browsers often allow overriding it to \"emulate\"\n * mobile.\n * @return {string}\n * @visibleForTesting\n */\nexport function detectJsEngineFromStack() {\n  /** @constructor */\n  function Fn() {}\n  Fn.prototype.t = function() {\n    throw new Error('message');\n  };\n  const object = new Fn();\n  try {\n    object.t();\n  } catch (e) {\n    const {stack} = e;\n\n    // Safari only mentions the method name.\n    if (startsWith(stack, 't@')) {\n      return 'Safari';\n    }\n\n    // Firefox mentions \"prototype\".\n    if (stack.indexOf('.prototype.t@') > -1) {\n      return 'Firefox';\n    }\n\n    // IE looks like Chrome, but includes a context for the base stack line.\n    // Explicitly, we're looking for something like:\n    // \"    at Global code (https://example.com/app.js:1:200)\" or\n    // \"    at Anonymous function (https://example.com/app.js:1:200)\"\n    // vs Chrome which has:\n    // \"    at https://example.com/app.js:1:200\"\n    const last = stack.split('\\n').pop();\n    if (/\\bat .* \\(/i.test(last)) {\n      return 'IE';\n    }\n\n    // Finally, chrome includes the error message in the stack.\n    if (startsWith(stack, 'Error: message')) {\n      return 'Chrome';\n    }\n  }\n\n  return 'unknown';\n}\n\n/**\n * @param {!Error} error\n * @param {!Window} win\n */\nexport function reportErrorToAnalytics(error, win) {\n  if (isExperimentOn(win, 'user-error-reporting')) {\n    const vars = {\n      'errorName': error.name,\n      'errorMessage': error.message,\n    };\n    triggerAnalyticsEvent(getRootElement_(win), 'user-error', vars);\n  }\n}\n\n/**\n * @param {!Window} win\n * @return {!Element}\n * @private\n */\nfunction getRootElement_(win) {\n  const root = Services.ampdocServiceFor(win).getAmpDoc().getRootNode();\n  return dev().assertElement(root.documentElement || root.body || root);\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n  * Whether addEventListener supports options or only takes capture as a boolean\n  * @type {boolean|undefined}\n  * @visibleForTesting\n  */\nlet optsSupported;\n\n/**\n * Listens for the specified event on the element.\n *\n * Do not use this directly. This method is implemented as a shared\n * dependency. Use `listen()` in either `event-helper` or `3p-frame-messaging`,\n * depending on your use case.\n *\n * @param {!EventTarget} element\n * @param {string} eventType\n * @param {function(!Event)} listener\n * @param {Object=} opt_evtListenerOpts\n * @return {!UnlistenDef}\n */\nexport function internalListenImplementation(element, eventType, listener,\n  opt_evtListenerOpts) {\n  let localElement = element;\n  let localListener = listener;\n  /**\n   * @type {?Function}\n   */\n  let wrapped;\n\n  wrapped = event => {\n    try {\n      return localListener(event);\n    } catch (e) {\n      // reportError is installed globally per window in the entry point.\n      self.reportError(e);\n      throw e;\n    }\n  };\n  const optsSupported = detectEvtListenerOptsSupport();\n  let capture = false;\n  if (opt_evtListenerOpts) {\n    capture = opt_evtListenerOpts.capture;\n  }\n  localElement.addEventListener(\n      eventType,\n      wrapped,\n      optsSupported ? opt_evtListenerOpts : capture\n  );\n  return () => {\n    if (localElement) {\n      localElement.removeEventListener(\n          eventType,\n          wrapped,\n          optsSupported ? opt_evtListenerOpts : capture\n      );\n    }\n    // Ensure these are GC'd\n    localListener = null;\n    localElement = null;\n    wrapped = null;\n  };\n}\n\n/**\n * Tests whether the browser supports options as an argument of addEventListener\n * or not.\n *\n * @return {boolean}\n */\nexport function detectEvtListenerOptsSupport() {\n  // Only run the test once\n  if (optsSupported !== undefined) {\n    return optsSupported;\n  }\n\n  optsSupported = false;\n  try {\n    // Test whether browser supports EventListenerOptions or not\n    const options = {\n      get capture() {\n        optsSupported = true;\n      },\n    };\n    self.addEventListener('test-options', null, options);\n    self.removeEventListener('test-options', null, options);\n  } catch (err) {\n    // EventListenerOptions are not supported\n  }\n  return optsSupported;\n}\n\n/**\n  * Resets the test for whether addEventListener supports options or not.\n  */\nexport function resetEvtListenerOptsSupportForTesting() {\n  optsSupported = undefined;\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {internalListenImplementation} from './event-helper-listen';\nimport {user} from './log';\n\n/** @const {string}  */\nconst LOAD_FAILURE_PREFIX = 'Failed to load:';\n\n/**\n * Returns a CustomEvent with a given type and detail; supports fallback for IE.\n * @param {!Window} win\n * @param {string} type\n * @param {!JsonObject|string|undefined|null} detail\n * @param {EventInit=} opt_eventInit\n * @return {!Event}\n */\nexport function createCustomEvent(win, type, detail, opt_eventInit) {\n  const eventInit = /** @type {!CustomEventInit} */ ({detail});\n  Object.assign(eventInit, opt_eventInit);\n  // win.CustomEvent is a function on Edge, Chrome, FF, Safari but\n  // is an object on IE 11.\n  if (typeof win.CustomEvent == 'function') {\n    return new win.CustomEvent(type, eventInit);\n  } else {\n    // Deprecated fallback for IE.\n    const e = win.document.createEvent('CustomEvent');\n    e.initCustomEvent(\n        type, !!eventInit.bubbles, !!eventInit.cancelable, detail);\n    return e;\n  }\n}\n\n/**\n * Listens for the specified event on the element.\n * @param {!EventTarget} element\n * @param {string} eventType\n * @param {function(!Event)} listener\n * @param {Object=} opt_evtListenerOpts\n * @return {!UnlistenDef}\n */\nexport function listen(element, eventType, listener, opt_evtListenerOpts) {\n  return internalListenImplementation(\n      element, eventType, listener, opt_evtListenerOpts);\n}\n\n/**\n * Returns the data property of an event with the correct type.\n * @param {!Event|{data: !JsonObject}} event\n * @return {?JsonObject|string|undefined}\n */\nexport function getData(event) {\n  return /** @type {?JsonObject|string|undefined} */ (event.data);\n}\n\n/**\n * Returns the detail property of an event with the correct type.\n * @param {!Event|{detail: !JsonObject}} event\n * @return {?JsonObject|string|undefined}\n */\nexport function getDetail(event) {\n  return /** @type {?JsonObject|string|undefined} */ (event.detail);\n}\n\n/**\n * Listens for the specified event on the element and removes the listener\n * as soon as event has been received.\n * @param {!EventTarget} element\n * @param {string} eventType\n * @param {function(!Event)} listener\n * @param {Object=} opt_evtListenerOpts\n * @return {!UnlistenDef}\n */\nexport function listenOnce(element, eventType, listener, opt_evtListenerOpts) {\n  let localListener = listener;\n  const unlisten = internalListenImplementation(element, eventType, event => {\n    try {\n      localListener(event);\n    } finally {\n      // Ensure listener is GC'd\n      localListener = null;\n      unlisten();\n    }\n  }, opt_evtListenerOpts);\n  return unlisten;\n}\n\n\n/**\n * Returns  a promise that will resolve as soon as the specified event has\n * fired on the element.\n * @param {!EventTarget} element\n * @param {string} eventType\n * @param {Object=} opt_evtListenerOpts\n * @param {function(!UnlistenDef)=} opt_cancel An optional function that, when\n *     provided, will be called with the unlistener. This gives the caller\n *     access to the unlistener, so it may be called manually when necessary.\n * @return {!Promise<!Event>}\n */\nexport function listenOncePromise(element, eventType, opt_evtListenerOpts,\n  opt_cancel) {\n  let unlisten;\n  const eventPromise = new Promise(resolve => {\n    unlisten = listenOnce(element, eventType, resolve, opt_evtListenerOpts);\n  });\n  eventPromise.then(unlisten, unlisten);\n  if (opt_cancel) {\n    opt_cancel(unlisten);\n  }\n  return eventPromise;\n}\n\n\n/**\n * Whether the specified element/window has been loaded already.\n * @param {!Element|!Window} eleOrWindow\n * @return {boolean}\n */\nexport function isLoaded(eleOrWindow) {\n  return !!(eleOrWindow.complete || eleOrWindow.readyState == 'complete'\n      // If the passed in thing is a Window, infer loaded state from\n      //\n      || (eleOrWindow.document\n          && eleOrWindow.document.readyState == 'complete'));\n}\n\n/**\n * Returns a promise that will resolve or fail based on the eleOrWindow's 'load'\n * and 'error' events. Optionally this method takes a timeout, which will reject\n * the promise if the resource has not loaded by then.\n * @param {T} eleOrWindow Supports both Elements and as a special case Windows.\n * @return {!Promise<T>}\n * @template T\n */\nexport function loadPromise(eleOrWindow) {\n  let unlistenLoad;\n  let unlistenError;\n  if (isLoaded(eleOrWindow)) {\n    return Promise.resolve(eleOrWindow);\n  }\n  const loadingPromise = new Promise((resolve, reject) => {\n    // Listen once since IE 5/6/7 fire the onload event continuously for\n    // animated GIFs.\n    const {tagName} = eleOrWindow;\n    if (tagName === 'AUDIO' || tagName === 'VIDEO') {\n      unlistenLoad = listenOnce(eleOrWindow, 'loadstart', resolve);\n    } else {\n      unlistenLoad = listenOnce(eleOrWindow, 'load', resolve);\n    }\n    // For elements, unlisten on error (don't for Windows).\n    if (tagName) {\n      unlistenError = listenOnce(eleOrWindow, 'error', reject);\n    }\n  });\n\n  return loadingPromise.then(() => {\n    if (unlistenError) {\n      unlistenError();\n    }\n    return eleOrWindow;\n  }, () => {\n    if (unlistenLoad) {\n      unlistenLoad();\n    }\n    failedToLoad(eleOrWindow);\n  });\n}\n\n/**\n * Emit error on load failure.\n * @param {!Element|!Window} eleOrWindow Supports both Elements and as a special\n *     case Windows.\n */\nfunction failedToLoad(eleOrWindow) {\n  // Report failed loads as user errors so that they automatically go\n  // into the \"document error\" bucket.\n  let target = eleOrWindow;\n  if (target && target.src) {\n    target = target.src;\n  }\n  throw user().createError(LOAD_FAILURE_PREFIX, target);\n}\n\n/**\n * Returns true if this error message is was created for a load error.\n * @param {string} message An error message\n * @return {boolean}\n */\nexport function isLoadErrorMessage(message) {\n  return message.indexOf(LOAD_FAILURE_PREFIX) != -1;\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Experiments system allows a developer to opt-in to test\n * features that are not yet fully tested.\n *\n * Experiments page: https://cdn.ampproject.org/experiments.html *\n */\n\nimport {getCookie, setCookie} from './cookies';\nimport {hasOwn} from './utils/object';\nimport {parseQueryString} from './url';\n\n/** @const {string} */\nconst COOKIE_NAME = 'AMP_EXP';\n\n/** @const {number} */\nconst COOKIE_MAX_AGE_DAYS = 180; // 6 month\n\n/** @const {time} */\nconst COOKIE_EXPIRATION_INTERVAL = COOKIE_MAX_AGE_DAYS * 24 * 60 * 60 * 1000;\n\n/** @const {string} */\nconst TOGGLES_WINDOW_PROPERTY = '__AMP__EXPERIMENT_TOGGLES';\n\n/**\n * @typedef {{\n *   isTrafficEligible: function(!Window):boolean,\n *   branches: !Array<string>\n * }}\n */\nexport let ExperimentInfo;\n\n/**\n * Whether we are in canary.\n * @param {!Window} win\n * @return {boolean}\n */\nexport function isCanary(win) {\n  return !!(win.AMP_CONFIG && win.AMP_CONFIG.canary);\n}\n\n/**\n * Returns binary type, e.g., canary, control, or production.\n * @param {!Window} win\n * @return {string}\n */\nexport function getBinaryType(win) {\n  return win.AMP_CONFIG && win.AMP_CONFIG.type ?\n    win.AMP_CONFIG.type : 'unknown';\n}\n\n/**\n * Whether the specified experiment is on or off.\n * @param {!Window} win\n * @param {string} experimentId\n * @return {boolean}\n */\nexport function isExperimentOn(win, experimentId) {\n  const toggles = experimentToggles(win);\n  return !!toggles[experimentId];\n}\n\n/**\n * Toggles the experiment on or off. Returns the actual value of the experiment\n * after toggling is done.\n * @param {!Window} win\n * @param {string} experimentId\n * @param {boolean=} opt_on\n * @param {boolean=} opt_transientExperiment  Whether to toggle the\n *     experiment state \"transiently\" (i.e., for this page load only) or\n *     durably (by saving the experiment IDs to the cookie after toggling).\n *     Default: false (save durably).\n * @return {boolean} New state for experimentId.\n */\nexport function toggleExperiment(win, experimentId, opt_on,\n  opt_transientExperiment) {\n  const currentlyOn = isExperimentOn(win, /*OK*/experimentId);\n  const on = !!(opt_on !== undefined ? opt_on : !currentlyOn);\n  if (on != currentlyOn) {\n    const toggles = experimentToggles(win);\n    toggles[experimentId] = on;\n\n    if (!opt_transientExperiment) {\n      const cookieToggles = getExperimentTogglesFromCookie(win);\n      cookieToggles[experimentId] = on;\n      saveExperimentTogglesToCookie(win, cookieToggles);\n    }\n  }\n  return on;\n}\n\n/**\n * Calculate whether the experiment is on or off based off of the\n * cookieFlag or the global config frequency given.\n * @param {!Window} win\n * @return {!Object<string, boolean>}\n */\nexport function experimentToggles(win) {\n  if (win[TOGGLES_WINDOW_PROPERTY]) {\n    return win[TOGGLES_WINDOW_PROPERTY];\n  }\n  win[TOGGLES_WINDOW_PROPERTY] = Object.create(null);\n  const toggles = win[TOGGLES_WINDOW_PROPERTY];\n\n  // Read the default config of this build.\n  if (win.AMP_CONFIG) {\n    for (const experimentId in win.AMP_CONFIG) {\n      const frequency = win.AMP_CONFIG[experimentId];\n      if (typeof frequency === 'number' && frequency >= 0 && frequency <= 1) {\n        toggles[experimentId] = Math.random() < frequency;\n      }\n    }\n  }\n  // Read document level override from meta tag.\n  if (win.AMP_CONFIG\n      && Array.isArray(win.AMP_CONFIG['allow-doc-opt-in'])\n      && win.AMP_CONFIG['allow-doc-opt-in'].length > 0) {\n    const allowed = win.AMP_CONFIG['allow-doc-opt-in'];\n    const meta =\n        win.document.head.querySelector('meta[name=\"amp-experiments-opt-in\"]');\n    if (meta) {\n      const optedInExperiments = meta.getAttribute('content').split(',');\n      for (let i = 0; i < optedInExperiments.length; i++) {\n        if (allowed.indexOf(optedInExperiments[i]) != -1) {\n          toggles[optedInExperiments[i]] = true;\n        }\n      }\n    }\n  }\n\n  Object.assign(toggles, getExperimentTogglesFromCookie(win));\n\n  if (win.AMP_CONFIG\n      && Array.isArray(win.AMP_CONFIG['allow-url-opt-in'])\n      && win.AMP_CONFIG['allow-url-opt-in'].length > 0) {\n    const allowed = win.AMP_CONFIG['allow-url-opt-in'];\n    const hash = win.location.originalHash || win.location.hash;\n    const params = parseQueryString(hash);\n    for (let i = 0; i < allowed.length; i++) {\n      const param = params[`e-${allowed[i]}`];\n      if (param == '1') {\n        toggles[allowed[i]] = true;\n      }\n      if (param == '0') {\n        toggles[allowed[i]] = false;\n      }\n    }\n  }\n  return toggles;\n}\n\n/**\n * Returns the cached experiments toggles, or null if they have not been\n * computed yet.\n * @param {!Window} win\n * @return {Object<string, boolean>}\n */\nexport function experimentTogglesOrNull(win) {\n  return win[TOGGLES_WINDOW_PROPERTY] || null;\n}\n\n/**\n * Returns a set of experiment IDs currently on.\n * @param {!Window} win\n * @return {!Object<string, boolean>}\n */\nfunction getExperimentTogglesFromCookie(win) {\n  const experimentCookie = getCookie(win, COOKIE_NAME);\n  const tokens = experimentCookie ? experimentCookie.split(/\\s*,\\s*/g) : [];\n\n  const toggles = Object.create(null);\n  for (let i = 0; i < tokens.length; i++) {\n    if (tokens[i].length == 0) {\n      continue;\n    }\n    if (tokens[i][0] == '-') {\n      toggles[tokens[i].substr(1)] = false;\n    } else {\n      toggles[tokens[i]] = true;\n    }\n  }\n\n  return toggles;\n}\n\n/**\n * Saves a set of experiment IDs currently on.\n * @param {!Window} win\n * @param {!Object<string, boolean>} toggles\n */\nfunction saveExperimentTogglesToCookie(win, toggles) {\n  const experimentIds = [];\n  for (const experiment in toggles) {\n    experimentIds.push((toggles[experiment] === false ? '-' : '') + experiment);\n  }\n\n  setCookie(win, COOKIE_NAME, experimentIds.join(','),\n      Date.now() + COOKIE_EXPIRATION_INTERVAL, {\n        // Set explicit domain, so the cookie gets send to sub domains.\n        domain: win.location.hostname,\n        allowOnProxyOrigin: true,\n      });\n}\n\n/**\n * See getExperimentTogglesFromCookie().\n * @param {!Window} win\n * @return {!Object<string, boolean>}\n * @visibleForTesting\n */\nexport function getExperimentToglesFromCookieForTesting(win) {\n  return getExperimentTogglesFromCookie(win);\n}\n\n/**\n * Resets the experimentsToggle cache for testing purposes.\n * @param {!Window} win\n * @visibleForTesting\n */\nexport function resetExperimentTogglesForTesting(win) {\n  setCookie(win, COOKIE_NAME, '', 0, {\n    domain: win.location.hostname,\n  });\n  win[TOGGLES_WINDOW_PROPERTY] = null;\n}\n\n/**\n * In some browser implementations of Math.random(), sequential calls of\n * Math.random() are correlated and can cause a bias.  In particular,\n * if the previous random() call was < 0.001 (as it will be if we select\n * into an experiment), the next value could be less than 0.5 more than\n * 50.7% of the time.  This provides an implementation that roots down into\n * the crypto API, when available, to produce less biased samples.\n *\n * @return {number} Pseudo-random floating-point value on the range [0, 1).\n */\nfunction slowButAccuratePrng() {\n  // TODO(tdrl): Implement.\n  return Math.random();\n}\n\n/**\n * Container for alternate random number generator implementations.  This\n * allows us to set an \"accurate\" PRNG for branch selection, but to mock it\n * out easily in tests.\n *\n * @visibleForTesting\n * @const {!{accuratePrng: function():number}}\n */\nexport const RANDOM_NUMBER_GENERATORS = {\n  accuratePrng: slowButAccuratePrng,\n};\n\n/**\n * Selects, uniformly at random, a single item from the array.\n * @param {!Array<string>} arr Object to select from.\n * @return {?string} Single item from arr or null if arr was empty.\n */\nfunction selectRandomItem(arr) {\n  const rn = RANDOM_NUMBER_GENERATORS.accuratePrng();\n  return arr[Math.floor(rn * arr.length)] || null;\n}\n\n/**\n * Selects which page-level experiment branches are enabled. If a given\n * experiment name is already set (including to the null / no branches selected\n * state), this won't alter its state.\n *\n * Check whether a given experiment is set using isExperimentOn(win,\n * experimentName) and, if it is on, look for which branch is selected in\n * win.experimentBranches[experimentName].\n *\n * @param {!Window} win Window context on which to save experiment\n *     selection state.\n * @param {!Object<string, !ExperimentInfo>} experiments  Set of experiments to\n *     configure for this page load.\n * @return {!Object<string, string>} Map of experiment names to selected\n *     branches.\n */\nexport function randomlySelectUnsetExperiments(win, experiments) {\n  win.experimentBranches = win.experimentBranches || {};\n  const selectedExperiments = {};\n  for (const experimentName in experiments) {\n    // Skip experimentName if it is not a key of experiments object or if it\n    // has already been populated by some other property.\n    if (!hasOwn(experiments, experimentName)) {\n      continue;\n    }\n    if (hasOwn(win.experimentBranches, experimentName)) {\n      selectedExperiments[experimentName] =\n          win.experimentBranches[experimentName];\n      continue;\n    }\n\n    if (!experiments[experimentName].isTrafficEligible ||\n        !experiments[experimentName].isTrafficEligible(win)) {\n      win.experimentBranches[experimentName] = null;\n      continue;\n    }\n\n    // If we're in the experiment, but we haven't already forced a specific\n    // experiment branch (e.g., via a test setup), then randomize the branch\n    // choice.\n    if (!win.experimentBranches[experimentName] &&\n      isExperimentOn(win, /*OK*/experimentName)) {\n      const {branches} = experiments[experimentName];\n      win.experimentBranches[experimentName] = selectRandomItem(branches);\n      selectedExperiments[experimentName] =\n          win.experimentBranches[experimentName];\n    }\n  }\n  return selectedExperiments;\n}\n\n/**\n * Returns the experiment branch enabled for the given experiment ID.\n * For example, 'control' or 'experiment'.\n *\n * @param {!Window} win Window context to check for experiment state.\n * @param {string} experimentName Name of the experiment to check.\n * @return {?string} Active experiment branch ID for experimentName (possibly\n *     null if experimentName has been tested but no branch was enabled).\n */\nexport function getExperimentBranch(win, experimentName) {\n  return win.experimentBranches ? win.experimentBranches[experimentName] : null;\n}\n\n/**\n * Force enable (or disable) a specific branch of a given experiment name.\n * Disables the experiment name altogether if branchId is falseish.\n *\n * @param {!Window} win Window context to check for experiment state.\n * @param {string} experimentName Name of the experiment to check.\n * @param {?string} branchId ID of branch to force or null to disable\n *     altogether.\n * @visibleForTesting\n */\nexport function forceExperimentBranch(win, experimentName, branchId) {\n  win.experimentBranches = win.experimentBranches || {};\n  toggleExperiment(win, experimentName, !!branchId, true);\n  win.experimentBranches[experimentName] = branchId;\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * @param {number=} opt_base Exponential base. Defaults to 2.\n * @return {function(function()): number} Function that when invoked will\n *     call the passed in function. On every invocation the next\n *     invocation of the passed in function will be exponentially\n *     later. Returned function returns timeout id.\n */\nexport function exponentialBackoff(opt_base) {\n  const getTimeout = exponentialBackoffClock(opt_base);\n  return work => {\n    return setTimeout(work, getTimeout());\n  };\n}\n\n/**\n * @param {number=} opt_base Exponential base. Defaults to 2.\n * @return {function(): number} Function that when invoked will return\n *    a number that exponentially grows per invocation.\n */\nexport function exponentialBackoffClock(opt_base) {\n  const base = opt_base || 2;\n  let count = 0;\n  return () => {\n    let wait = Math.pow(base, count++);\n    wait += getJitter(wait);\n    return wait * 1000;\n  };\n}\n\n/**\n * Add jitter to avoid the thundering herd. This can e.g. happen when\n * we poll a backend and it fails for everyone at the same time.\n * We add up to 30% (default) longer or shorter than the given time.\n *\n * @param {number} wait the amount if base milliseconds\n * @param {number=} opt_perc the min/max percentage to add or sutract\n * @return {number}\n */\nexport function getJitter(wait, opt_perc) {\n  opt_perc = opt_perc || .3;\n  let jitter = wait * opt_perc * Math.random();\n  if (Math.random() > .5) {\n    jitter *= -1;\n  }\n  return jitter;\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {startsWith} from './string';\n\n/** @type {!Array<string>} */\nconst excludedTags = ['script', 'style'];\n\n/** @type {!Array<string>} */\nconst allowedAmpTags = ['amp-accordion', 'amp-app-banner', 'amp-carousel',\n  'amp-fit-text', 'amp-form', 'amp-selector', 'amp-sidebar'];\n\n/** @type {!Array<string>} */\nconst allowedAttributes = ['action', 'alt', 'class', 'disabled', 'height',\n  'href', 'id', 'name', 'placeholder', 'readonly', 'src', 'tabindex',\n  'title', 'type', 'value', 'width'];\n\n/**\n * Returns content of HTML node\n * @param {!Window} win\n * @param {string} selector - CSS selector of the node to take content from\n * @param {!Array<string>} attrs - tag attributes to be left in the stringified\n * HTML\n * @return {string}\n */\nexport function getHtml(win, selector, attrs) {\n  const root = win.document.querySelector(selector);\n  const result = [];\n\n  if (root) {\n    appendToResult(root, attrs, result);\n  }\n\n  return result.join('').replace(/\\s{2,}/g, ' ');\n}\n\n/**\n * @param {!Element} node - node to take content from\n * @param {!Array<string>} attrs - tag attributes to be left in the stringified HTML\n * @param {!Array<string>} result\n */\nfunction appendToResult(node, attrs, result) {\n  const stack = [node];\n  const allowedAttrs = attrs.filter(attr => {\n    return allowedAttributes.includes(attr);\n  });\n\n  while (stack.length > 0) {\n    node = stack.pop();\n\n    if (typeof node === 'string') {\n      result.push(node);\n    } else if (node.nodeType === Node.TEXT_NODE) {\n      result.push(node.textContent);\n    } else if (node.nodeType === Node.ELEMENT_NODE && isApplicableNode(node)) {\n      appendOpenTag(node, allowedAttrs, result);\n      stack.push(`</${node.tagName.toLowerCase()}>`);\n\n      for (let child = node.lastChild; child; child = child.previousSibling) {\n        stack.push(child);\n      }\n    }\n  }\n}\n\n\n/**\n *\n * @param {!Element} node\n * @return {boolean}\n */\nfunction isApplicableNode(node) {\n  const tagName = node.tagName.toLowerCase();\n\n  if (startsWith(tagName, 'amp-')) {\n    return !!(allowedAmpTags.includes(tagName) && node.textContent);\n  } else {\n    return !!(!excludedTags.includes(tagName) && node.textContent);\n  }\n}\n\n\n/**\n *\n * @param {!Element} node\n * @param {!Array<string>} attrs\n * @param {Array<string>} result\n */\nfunction appendOpenTag(node, attrs, result) {\n  result.push(`<${node.tagName.toLowerCase()}`);\n\n  attrs.forEach(function(attr) {\n    if (node.hasAttribute(attr)) {\n      result.push(` ${attr}=\"${node.getAttribute(attr)}\"`);\n    }\n  });\n\n  result.push('>');\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {DomFingerprint} from './utils/dom-fingerprint';\nimport {Services} from './services';\nimport {dict} from './utils/object.js';\nimport {experimentToggles, isCanary} from './experiments';\nimport {getLengthNumeral} from './layout';\nimport {getModeObject} from './mode-object';\nimport {urls} from './config';\n\n/**\n * Produces the attributes for the ad template.\n * @param {!Window} parentWindow\n * @param {!AmpElement} element\n * @param {string} sentinel\n * @param {!JsonObject=} attributes\n * @return {!JsonObject}\n */\nexport function getContextMetadata(\n  parentWindow, element, sentinel, attributes) {\n  const startTime = Date.now();\n  const width = element.getAttribute('width');\n  const height = element.getAttribute('height');\n  attributes = attributes ? attributes : dict();\n  attributes['width'] = getLengthNumeral(width);\n  attributes['height'] = getLengthNumeral(height);\n  if (element.getAttribute('title')) {\n    attributes['title'] = element.getAttribute('title');\n  }\n  let locationHref = parentWindow.location.href;\n  // This is really only needed for tests, but whatever. Children\n  // see us as the logical origin, so telling them we are about:srcdoc\n  // will fail ancestor checks.\n  if (locationHref == 'about:srcdoc') {\n    locationHref = parentWindow.parent.location.href;\n  }\n\n  const docInfo = Services.documentInfoForDoc(element);\n  const viewer = Services.viewerForDoc(element);\n  const referrer = viewer.getUnconfirmedReferrerUrl();\n\n  // TODO(alanorozco): Redesign data structure so that fields not exposed by\n  // AmpContext are not part of this object.\n  const layoutRect = element.getPageLayoutBox();\n  attributes['_context'] = dict({\n    'ampcontextVersion': '$internalRuntimeVersion$',\n    'ampcontextFilepath': urls.thirdParty + '/$internalRuntimeVersion$' +\n        '/ampcontext-v0.js',\n    'sourceUrl': docInfo.sourceUrl,\n    'referrer': referrer,\n    'canonicalUrl': docInfo.canonicalUrl,\n    'pageViewId': docInfo.pageViewId,\n    'location': {\n      'href': locationHref,\n    },\n    'startTime': startTime,\n    'tagName': element.tagName,\n    'mode': getModeObject(),\n    'canary': isCanary(parentWindow),\n    'hidden': !viewer.isVisible(),\n    'initialLayoutRect': layoutRect ? {\n      'left': layoutRect.left,\n      'top': layoutRect.top,\n      'width': layoutRect.width,\n      'height': layoutRect.height,\n    } : null,\n    'initialIntersection': element.getIntersectionChangeEntry(),\n    'domFingerprint': DomFingerprint.generate(element),\n    'experimentToggles': experimentToggles(parentWindow),\n    'sentinel': sentinel,\n  });\n  const adSrc = element.getAttribute('src');\n  if (adSrc) {\n    attributes['src'] = adSrc;\n  }\n  return attributes;\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {addAttributesToElement, closestBySelector} from './dom';\nimport {deserializeMessage, isAmpMessage} from './3p-frame-messaging';\nimport {dev} from './log';\nimport {dict} from './utils/object';\nimport {filterSplice} from './utils/array';\nimport {getData} from './event-helper';\nimport {parseUrlDeprecated} from './url';\nimport {setStyle} from './style';\nimport {tryParseJson} from './json';\n\n/**\n * Sentinel used to force unlistening after a iframe is detached.\n * @type {string}\n */\nconst UNLISTEN_SENTINEL = 'unlisten';\n\n/**\n * @typedef {{\n *   frame: !Element,\n *   events: !Object<string, !Array<function(!JsonObject)>>\n * }}\n */\nlet WindowEventsDef;\n\n/**\n * Returns a mapping from a URL's origin to an array of windows and their\n * listenFor listeners.\n * @param {?Window} parentWin the window that created the iframe\n * @param {boolean=} opt_create create the mapping if it does not exist\n * @return {?Object<string, !Array<!WindowEventsDef>>}\n */\nfunction getListenFors(parentWin, opt_create) {\n  let {listeningFors} = parentWin;\n\n  if (!listeningFors && opt_create) {\n    listeningFors = parentWin.listeningFors = Object.create(null);\n  }\n  return listeningFors || null;\n}\n\n/**\n * Returns an array of WindowEventsDef that have had any listenFor listeners\n * registered for this sentinel.\n * @param {?Window} parentWin the window that created the iframe\n * @param {string} sentinel the sentinel of the message\n * @param {boolean=} opt_create create the array if it does not exist\n * @return {?Array<!WindowEventsDef>}\n */\nfunction getListenForSentinel(parentWin, sentinel, opt_create) {\n  const listeningFors = getListenFors(parentWin, opt_create);\n  if (!listeningFors) {\n    return listeningFors;\n  }\n\n  let listenSentinel = listeningFors[sentinel];\n  if (!listenSentinel && opt_create) {\n    listenSentinel = listeningFors[sentinel] = [];\n  }\n  return listenSentinel || null;\n}\n\n/**\n * Returns an mapping of event names to listenFor listeners.\n * @param {?Window} parentWin the window that created the iframe\n * @param {!Element} iframe the iframe element who's context will trigger the\n *     event\n * @param {boolean=} opt_is3P set to true if the iframe is 3p.\n * @return {?Object<string, !Array<function(!JsonObject, !Window, string)>>}\n */\nfunction getOrCreateListenForEvents(parentWin, iframe, opt_is3P) {\n  const {origin} = parseUrlDeprecated(iframe.src);\n  const sentinel = getSentinel_(iframe, opt_is3P);\n  const listenSentinel = getListenForSentinel(parentWin, sentinel, true);\n\n  let windowEvents;\n  for (let i = 0; i < listenSentinel.length; i++) {\n    const we = listenSentinel[i];\n    if (we.frame === iframe) {\n      windowEvents = we;\n      break;\n    }\n  }\n\n  if (!windowEvents) {\n    windowEvents = {\n      frame: iframe,\n      origin,\n      events: Object.create(null),\n    };\n    listenSentinel.push(windowEvents);\n  }\n\n  return windowEvents.events;\n}\n\n/**\n * Returns an mapping of event names to listenFor listeners.\n * @param {?Window} parentWin the window that created the iframe\n * @param {string} sentinel the sentinel of the message\n * @param {string} origin the source window's origin\n * @param {?Window} triggerWin the window that triggered the event\n * @return {?Object<string, !Array<function(!JsonObject, !Window, string)>>}\n */\nfunction getListenForEvents(parentWin, sentinel, origin, triggerWin) {\n  const listenSentinel = getListenForSentinel(parentWin, sentinel);\n\n  if (!listenSentinel) {\n    return listenSentinel;\n  }\n\n  // Find the entry for the frame.\n  // TODO(@nekodo): Add a WeakMap<Window, WindowEventsDef> cache to\n  //     speed up this process.\n  let windowEvents;\n  for (let i = 0; i < listenSentinel.length; i++) {\n    const we = listenSentinel[i];\n    const {contentWindow} = we.frame;\n    if (!contentWindow) {\n      setTimeout(dropListenSentinel, 0, listenSentinel);\n    } else if (sentinel === 'amp') {\n      // A non-3P code path, origin must match.\n      if (we.origin === origin && contentWindow == triggerWin) {\n        windowEvents = we;\n        break;\n      }\n    } else if (triggerWin == contentWindow ||\n        isDescendantWindow(contentWindow, triggerWin)) {\n      // 3p code path, we may accept messages from nested frames.\n      windowEvents = we;\n      break;\n    }\n  }\n\n  return windowEvents ? windowEvents.events : null;\n}\n\n/**\n * Checks whether one window is a descendant of another by climbing\n * the parent chain.\n * @param {?Window} ancestor potential ancestor window\n * @param {?Window} descendant potential descendant window\n * @return {boolean}\n */\nfunction isDescendantWindow(ancestor, descendant) {\n  for (let win = descendant; win && win != win.parent; win = win.parent) {\n    if (win == ancestor) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Removes any listenFors registed on listenSentinel that do not have\n * a contentWindow (the frame was removed from the DOM tree).\n * @param {!Array<!WindowEventsDef>} listenSentinel\n */\nfunction dropListenSentinel(listenSentinel) {\n  const noopData = dict({'sentinel': UNLISTEN_SENTINEL});\n\n  for (let i = listenSentinel.length - 1; i >= 0; i--) {\n    const windowEvents = listenSentinel[i];\n\n    if (!windowEvents.frame.contentWindow) {\n      listenSentinel.splice(i, 1);\n\n      const {events} = windowEvents;\n      for (const name in events) {\n        // Splice here, so that each unlisten does not shift the array\n        events[name].splice(0, Infinity).forEach(event => {\n          event(noopData);\n        });\n      }\n    }\n  }\n}\n\n/**\n * Registers the global listenFor event listener if it has yet to be.\n * @param {?Window} parentWin\n */\nfunction registerGlobalListenerIfNeeded(parentWin) {\n  if (parentWin.listeningFors) {\n    return;\n  }\n  const listenForListener = function(event) {\n    if (!getData(event)) {\n      return;\n    }\n    const data = parseIfNeeded(getData(event));\n    if (!data || !data['sentinel']) {\n      return;\n    }\n\n    const listenForEvents = getListenForEvents(\n        parentWin,\n        data['sentinel'],\n        event.origin,\n        event.source\n    );\n    if (!listenForEvents) {\n      return;\n    }\n\n    let listeners = listenForEvents[data['type']];\n    if (!listeners) {\n      return;\n    }\n\n    // We slice to avoid issues with adding another listener or unlistening\n    // during iteration. We could move to a Doubly Linked List with\n    // backtracking, but that's overly complicated.\n    listeners = listeners.slice();\n    for (let i = 0; i < listeners.length; i++) {\n      const listener = listeners[i];\n      listener(data, event.source, event.origin);\n    }\n  };\n\n  parentWin.addEventListener('message', listenForListener);\n}\n\n/**\n * Allows listening for message from the iframe. Returns an unlisten\n * function to remove the listener.\n *\n * @param {?Element} iframe\n * @param {string} typeOfMessage\n * @param {?function(!JsonObject, !Window, string)} callback Called when a\n *     message of this type arrives for this iframe.\n * @param {boolean=} opt_is3P set to true if the iframe is 3p.\n * @param {boolean=} opt_includingNestedWindows set to true if a messages from\n *     nested frames should also be accepted.\n * @return {!UnlistenDef}\n */\nexport function listenFor(\n  iframe, typeOfMessage, callback, opt_is3P, opt_includingNestedWindows) {\n  dev().assert(iframe.src, 'only iframes with src supported');\n  dev().assert(!iframe.parentNode, 'cannot register events on an attached ' +\n      'iframe. It will cause hair-pulling bugs like #2942');\n  dev().assert(callback);\n  const parentWin = iframe.ownerDocument.defaultView;\n\n  registerGlobalListenerIfNeeded(parentWin);\n\n  const listenForEvents = getOrCreateListenForEvents(\n      parentWin,\n      iframe,\n      opt_is3P\n  );\n\n\n  let events = listenForEvents[typeOfMessage] ||\n    (listenForEvents[typeOfMessage] = []);\n\n  let unlisten;\n  let listener = function(data, source, origin) {\n    // Exclude nested frames if necessary.\n    // Note that the source was already verified to be either the contentWindow\n    // of the iframe itself or a descendant window within it.\n    if (!opt_includingNestedWindows && source != iframe.contentWindow) {\n      return;\n    }\n\n    if (data.sentinel == UNLISTEN_SENTINEL) {\n      unlisten();\n      return;\n    }\n    callback(data, source, origin);\n  };\n\n  events.push(listener);\n\n  return unlisten = function() {\n    if (listener) {\n      const index = events.indexOf(listener);\n      if (index > -1) {\n        events.splice(index, 1);\n      }\n      // Make sure references to the unlisten function do not keep\n      // alive too much.\n      listener = null;\n      events = null;\n      callback = null;\n    }\n  };\n}\n\n/**\n * Returns a promise that resolves when one of given messages has been observed\n * for the first time. And remove listener for all other messages.\n * @param {!Element} iframe\n * @param {string|!Array<string>} typeOfMessages\n * @param {boolean=} opt_is3P\n * @return {!Promise<!{data: !JsonObject, source: !Window, origin: string}>}\n */\nexport function listenForOncePromise(iframe, typeOfMessages, opt_is3P) {\n  const unlistenList = [];\n  if (typeof typeOfMessages == 'string') {\n    typeOfMessages = [typeOfMessages];\n  }\n  return new Promise(resolve => {\n    for (let i = 0; i < typeOfMessages.length; i++) {\n      const message = typeOfMessages[i];\n      const unlisten = listenFor(iframe, message, (data, source, origin) => {\n        for (let i = 0; i < unlistenList.length; i++) {\n          unlistenList[i]();\n        }\n        resolve({data, source, origin});\n      }, opt_is3P);\n      unlistenList.push(unlisten);\n    }\n  });\n}\n\n/**\n * Posts a message to the iframe.\n * @param {!Element} iframe The iframe.\n * @param {string} type Type of the message.\n * @param {!JsonObject} object Message payload.\n * @param {string} targetOrigin origin of the target.\n * @param {boolean=} opt_is3P set to true if the iframe is 3p.\n */\nexport function postMessage(iframe, type, object, targetOrigin, opt_is3P) {\n  postMessageToWindows(iframe,\n      [{win: iframe.contentWindow, origin: targetOrigin}], type, object,\n      opt_is3P);\n}\n\n/**\n * Posts an identical message to multiple target windows with the same\n * sentinel.\n * The message is serialized only once.\n * @param {!Element} iframe The iframe.\n * @param {!Array<{win: !Window, origin: string}>} targets to send the message\n *     to, pairs of window and its origin.\n * @param {string} type Type of the message.\n * @param {!JsonObject} object Message payload.\n * @param {boolean=} opt_is3P set to true if the iframe is 3p.\n */\nexport function postMessageToWindows(iframe, targets, type, object, opt_is3P) {\n  if (!iframe.contentWindow) {\n    return;\n  }\n  object['type'] = type;\n  object['sentinel'] = getSentinel_(iframe, opt_is3P);\n  let payload = object;\n  if (opt_is3P) {\n    // Serialize ourselves because that is much faster in Chrome.\n    payload = 'amp-' + JSON.stringify(object);\n  }\n  for (let i = 0; i < targets.length; i++) {\n    const target = targets[i];\n    target.win./*OK*/postMessage(payload, target.origin);\n  }\n}\n\n/**\n * Gets the sentinel string.\n * @param {!Element} iframe The iframe.\n * @param {boolean=} opt_is3P set to true if the iframe is 3p.\n * @return {string} Sentinel string.\n * @private\n */\nfunction getSentinel_(iframe, opt_is3P) {\n  return opt_is3P ? iframe.getAttribute('data-amp-3p-sentinel') : 'amp';\n}\n\n/**\n * JSON parses event.data if it needs to be\n * @param {*} data\n * @return {?JsonObject} object message\n * @private\n * @visibleForTesting\n */\nexport function parseIfNeeded(data) {\n  if (typeof data == 'string') {\n    if (data.charAt(0) == '{') {\n      data = tryParseJson(data, e => {\n        dev().warn('IFRAME-HELPER',\n            'Postmessage could not be parsed. ' +\n            'Is it in a valid JSON format?', e);\n      }) || null;\n    } else if (isAmpMessage(data)) {\n      data = deserializeMessage(data);\n    } else {\n      data = null;\n    }\n  }\n  return /** @type {?JsonObject} */ (data);\n}\n\n\n\n/**\n * Manages a postMessage API for an iframe with a subscription message and\n * a way to broadcast messages to all subscribed windows, which\n * in turn must all be descendants of the contentWindow of the iframe.\n */\nexport class SubscriptionApi {\n  /**\n   * @param {!Element} iframe The iframe.\n   * @param {string} type Type of the subscription message.\n   * @param {boolean} is3p set to true if the iframe is 3p.\n   * @param {function(!JsonObject, !Window, string)} requestCallback Callback\n   *     invoked whenever a new window subscribes.\n   */\n  constructor(iframe, type, is3p, requestCallback) {\n    /** @private @const {!Element} */\n    this.iframe_ = iframe;\n    /** @private @const {boolean} */\n    this.is3p_ = is3p;\n    /** @private @const {!Array<{win: !Window, origin: string}>} */\n    this.clientWindows_ = [];\n\n    /** @private @const {!UnlistenDef} */\n    this.unlisten_ = listenFor(this.iframe_, type, (data, source, origin) => {\n      // This message might be from any window within the iframe, we need\n      // to keep track of which windows want to be sent updates.\n      if (!this.clientWindows_.some(entry => entry.win == source)) {\n        this.clientWindows_.push({win: source, origin});\n      }\n      requestCallback(data, source, origin);\n    }, this.is3p_,\n        // For 3P frames we also allow nested frames within them to subscribe..\n    this.is3p_ /* opt_includingNestedWindows */);\n  }\n\n  /**\n   * Sends a message to all subscribed windows.\n   * @param {string} type Type of the message.\n   * @param {!JsonObject} data Message payload.\n   */\n  send(type, data) {\n    // Remove clients that have been removed from the DOM.\n    filterSplice(this.clientWindows_, client => !!client.win.parent);\n    postMessageToWindows(\n        this.iframe_,\n        this.clientWindows_,\n        type,\n        data,\n        this.is3p_);\n  }\n\n  /**\n   * Destroys iframe.\n   */\n  destroy() {\n    this.unlisten_();\n    this.clientWindows_.length = 0;\n  }\n}\n\n/**\n * @param {!Element} element\n * @return {boolean}\n */\nexport function looksLikeTrackingIframe(element) {\n  const box = element.getLayoutBox();\n  // This heuristic is subject to change.\n  if (box.width > 10 || box.height > 10) {\n    return false;\n  }\n  // Iframe is not tracking iframe if open with user interaction\n  return !closestBySelector(element, '.i-amphtml-overlay');\n}\n\n// Most common ad sizes\n// Array of [width, height] pairs.\nconst adSizes = [\n  [300, 250],\n  [320, 50],\n  [300, 50],\n  [320, 100],\n];\n\n/**\n * Guess whether this element might be an ad.\n * @param {!Element} element An amp-iframe element.\n * @return {boolean}\n * @visibleForTesting\n */\nexport function isAdLike(element) {\n  const box = element.getLayoutBox();\n  const {height, width} = box;\n  for (let i = 0; i < adSizes.length; i++) {\n    const refWidth = adSizes[i][0];\n    const refHeight = adSizes[i][1];\n    if (refHeight > height) {\n      continue;\n    }\n    if (refWidth > width) {\n      continue;\n    }\n    // Fuzzy matching to account for padding.\n    if (height - refHeight <= 20 && width - refWidth <= 20) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * @param {!Element} iframe\n * @private\n */\nexport function disableScrollingOnIframe(iframe) {\n  addAttributesToElement(iframe, dict({'scrolling': 'no'}));\n\n  // This shouldn't work, but it does on Firefox.\n  // https://stackoverflow.com/a/15494969\n  setStyle(iframe, 'overflow', 'hidden');\n\n  return iframe;\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Services} from './services';\nimport {SubscriptionApi} from './iframe-helper';\nimport {dev} from './log';\nimport {dict} from './utils/object';\nimport {layoutRectLtwh, moveLayoutRect, rectIntersection} from './layout-rect';\n\n/**\n * The structure that defines the rectangle used in intersection observers.\n *\n * @typedef {{\n *   top: number,\n *   bottom: number,\n *   left: number,\n *   right: number,\n *   width: number,\n *   height: number,\n *   x: number,\n *   y: number,\n * }}\n */\nexport let DOMRect;\n\n/**\n * Returns the ratio of the smaller box's area to the larger box's area.\n * @param {!./layout-rect.LayoutRectDef} smaller\n * @param {!./layout-rect.LayoutRectDef} larger\n * @return {number}\n */\nfunction intersectionRatio(smaller, larger) {\n  return (smaller.width * smaller.height) / (larger.width * larger.height);\n}\n\n/**\n * Produces a change entry for that should be compatible with\n * IntersectionObserverEntry.\n *\n * Mutates passed in rootBounds to have x and y according to spec.\n *\n * @param {!./layout-rect.LayoutRectDef} element The element's layout rectangle\n * @param {?./layout-rect.LayoutRectDef} owner The owner's layout rect, if\n *     there is an owner.\n * @param {!./layout-rect.LayoutRectDef} viewport The viewport's layout rect.\n * @return {!IntersectionObserverEntry} A change entry.\n * @private\n */\nexport function getIntersectionChangeEntry(element, owner, viewport) {\n  dev().assert(element.width >= 0 && element.height >= 0,\n      'Negative dimensions in element.');\n  // Building an IntersectionObserverEntry.\n\n  let intersectionRect = element;\n  if (owner) {\n    intersectionRect = rectIntersection(owner, element) ||\n        // No intersection.\n        layoutRectLtwh(0, 0, 0, 0);\n  }\n  intersectionRect = rectIntersection(viewport, intersectionRect) ||\n      // No intersection.\n      layoutRectLtwh(0, 0, 0, 0);\n\n  // The element is relative to (0, 0), while the viewport moves. So, we must\n  // adjust.\n  const boundingClientRect = moveLayoutRect(element, -viewport.left,\n      -viewport.top);\n  intersectionRect = moveLayoutRect(intersectionRect, -viewport.left,\n      -viewport.top);\n  // Now, move the viewport to (0, 0)\n  const rootBounds = moveLayoutRect(viewport, -viewport.left, -viewport.top);\n\n  return /** @type {!IntersectionObserverEntry} */ ({\n    time: Date.now(),\n    rootBounds,\n    boundingClientRect,\n    intersectionRect,\n    intersectionRatio: intersectionRatio(intersectionRect, element),\n  });\n}\n\n/**\n * The IntersectionObserver class lets any element share its viewport\n * intersection data with an iframe of its choice (most likely contained within\n * the element itself.). When instantiated the class will start listening for a\n * 'send-intersections' postMessage from the iframe, and only then  would start\n * sending intersection data to the iframe. The intersection data would be sent\n * when the element is moved inside or outside the viewport as well as on scroll\n * and resize. The element should create an IntersectionObserver instance once\n * the Iframe element is created. The IntersectionObserver class exposes a\n * `fire` method that would send the intersection data to the iframe. The\n * IntersectionObserver class exposes a `onViewportCallback` method that should\n * be called inside if the viewportCallback of the element. This would let the\n * element sent intersection data automatically when there element comes inside\n * or goes outside the viewport and also manage sending intersection data\n * onscroll and resize. Note: The IntersectionObserver would not send any data\n * over to the iframe if it had not requested the intersection data already via\n * a postMessage.\n */\nexport class IntersectionObserver {\n  /**\n   * @param {!AMP.BaseElement} baseElement\n   * @param {!Element} iframe Iframe element which requested the\n   *     intersection data.\n   * @param {?boolean} opt_is3p Set to `true` when the iframe is 3'rd party.\n   */\n  constructor(baseElement, iframe, opt_is3p) {\n    /** @private @const {!AMP.BaseElement} */\n    this.baseElement_ = baseElement;\n    /** @private @const {!./service/timer-impl.Timer} */\n    this.timer_ = Services.timerFor(baseElement.win);\n    /** @private {boolean} */\n    this.shouldSendIntersectionChanges_ = false;\n    /** @private {boolean} */\n    this.inViewport_ = false;\n\n    /** @private {!Array<!IntersectionObserverEntry>} */\n    this.pendingChanges_ = [];\n\n    /** @private {number|string} */\n    this.flushTimeout_ = 0;\n\n    /** @private @const {function()} */\n    this.boundFlush_ = this.flush_.bind(this);\n\n    /**\n     * An object which handles tracking subscribers to the\n     * intersection updates for this element.\n     * Triggered by context.observeIntersection() inside the ad/iframe\n     * or by directly posting a send-intersections message.\n     * @private {!SubscriptionApi}\n     */\n    this.postMessageApi_ = new SubscriptionApi(\n        iframe, 'send-intersections', opt_is3p || false,\n        // Each time someone subscribes we make sure that they\n        // get an update.\n        () => this.startSendingIntersectionChanges_());\n\n    /** @private {?Function} */\n    this.unlistenViewportChanges_ = null;\n  }\n\n  /**\n   * Fires element intersection\n   */\n  fire() {\n    this.sendElementIntersection_();\n  }\n\n  /**\n   * Check if we need to unlisten when moving out of viewport,\n   * unlisten and reset unlistenViewportChanges_.\n   * @private\n   */\n  unlistenOnOutViewport_() {\n    if (this.unlistenViewportChanges_) {\n      this.unlistenViewportChanges_();\n      this.unlistenViewportChanges_ = null;\n    }\n  }\n  /**\n   * Called via postMessage from the child iframe when the ad/iframe starts\n   * observing its position in the viewport.\n   * Sets a flag, measures the iframe position if necessary and sends\n   * one change record to the iframe.\n   * Note that this method may be called more than once if a single ad\n   * has multiple parties interested in viewability data.\n   * @private\n   */\n  startSendingIntersectionChanges_() {\n    this.shouldSendIntersectionChanges_ = true;\n    this.baseElement_.getVsync().measure(() => {\n      if (this.baseElement_.isInViewport()) {\n        this.onViewportCallback(true);\n      }\n      this.fire();\n    });\n  }\n\n  /**\n   * Triggered by the AmpElement to when it either enters or exits the visible\n   * viewport.\n   * @param {boolean} inViewport true if the element is in viewport.\n   */\n  onViewportCallback(inViewport) {\n    if (this.inViewport_ == inViewport) {\n      return;\n    }\n    this.inViewport_ = inViewport;\n    // Lets the ad know that it became visible or no longer is.\n    this.fire();\n    // And update the ad about its position in the viewport while\n    // it is visible.\n    if (inViewport) {\n      const send = this.fire.bind(this);\n      // Scroll events.\n      const unlistenScroll = this.baseElement_.getViewport().onScroll(send);\n      // Throttled scroll events. Also fires for resize events.\n      const unlistenChanged = this.baseElement_.getViewport().onChanged(send);\n      this.unlistenViewportChanges_ = () => {\n        unlistenScroll();\n        unlistenChanged();\n      };\n    } else {\n      this.unlistenOnOutViewport_();\n    }\n  }\n\n  /**\n   * Sends 'intersection' message to ad/iframe with intersection change records\n   * if this has been activated and we measured the layout box of the iframe\n   * at least once.\n   * @private\n   */\n  sendElementIntersection_() {\n    if (!this.shouldSendIntersectionChanges_) {\n      return;\n    }\n    const change = this.baseElement_.element.getIntersectionChangeEntry();\n    if (this.pendingChanges_.length > 0 &&\n        this.pendingChanges_[this.pendingChanges_.length - 1].time\n        == change.time) {\n      return;\n    }\n    this.pendingChanges_.push(change);\n    if (!this.flushTimeout_) {\n      // Send one immediately, \n      this.flush_();\n      // but only send a maximum of 10 postMessages per second.\n      this.flushTimeout_ = this.timer_.delay(this.boundFlush_, 100);\n    }\n  }\n\n  /**\n   * @private\n   */\n  flush_() {\n    // TODO(zhouyx): One potential place to check if element is still in doc.\n    this.flushTimeout_ = 0;\n    if (!this.pendingChanges_.length) {\n      return;\n    }\n    // Note that SubscribeApi multicasts the update to all interested windows.\n    this.postMessageApi_.send('intersection', dict({\n      'changes': this.pendingChanges_,\n    }));\n    this.pendingChanges_.length = 0;\n  }\n\n  /**\n   * Provide a function to clear timeout before set this intersection to null.\n   */\n  destroy() {\n    this.timer_.cancel(this.flushTimeout_);\n    this.unlistenOnOutViewport_();\n    this.postMessageApi_.destroy();\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview This module declares JSON types as defined in the\n * {@link http://json.org/}.\n */\n\nimport {isObject} from './types';\n\n\n// NOTE Type are changed to {*} because of\n// https://github.com/google/closure-compiler/issues/1999\n\n/**\n * JSON scalar. It's either string, number or boolean.\n * @typedef {*} should be string|number|boolean\n */\nlet JSONScalarDef;\n\n\n/**\n * JSON object. It's a map with string keys and JSON values.\n * @typedef {*} should be !Object<string, ?JSONValueDef>\n */\nlet JSONObjectDef;\n\n\n/**\n * JSON array. It's an array with JSON values.\n * @typedef {*} should be !Array<?JSONValueDef>\n */\nlet JSONArrayDef;\n\n\n/**\n * JSON value. It's either a scalar, an object or an array.\n * @typedef {*} should be !JSONScalarDef|!JSONObjectDef|!JSONArrayDef\n */\nlet JSONValueDef;\n\n/**\n * Recreates objects with prototype-less copies.\n * @param {!JsonObject} obj\n * @return {!JsonObject}\n */\nexport function recreateNonProtoObject(obj) {\n  const copy = Object.create(null);\n  for (const k in obj) {\n    if (!hasOwnProperty(obj, k)) {\n      continue;\n    }\n    const v = obj[k];\n    copy[k] = isObject(v) ? recreateNonProtoObject(v) : v;\n  }\n  return /** @type {!JsonObject} */ (copy);\n}\n\n/**\n * Returns a value from an object for a field-based expression. The expression\n * is a simple nested dot-notation of fields, such as `field1.field2`. If any\n * field in a chain does not exist or is not an object or array, the returned\n * value will be `undefined`.\n *\n * @param {!JsonObject} obj\n * @param {string} expr\n * @return {*}\n */\nexport function getValueForExpr(obj, expr) {\n  // The `.` indicates \"the object itself\".\n  if (expr == '.') {\n    return obj;\n  }\n  // Otherwise, navigate via properties.\n  const parts = expr.split('.');\n  let value = obj;\n  for (let i = 0; i < parts.length; i++) {\n    const part = parts[i];\n    if (part &&\n        value &&\n        value[part] !== undefined &&\n        hasOwnProperty(value, part)\n    ) {\n      value = value[part];\n      continue;\n    }\n    value = undefined;\n    break;\n  }\n  return value;\n}\n\n/**\n * Simple wrapper around JSON.parse that casts the return value\n * to JsonObject.\n * Create a new wrapper if an array return value is desired.\n * @param {*} json JSON string to parse\n * @return {?JsonObject} May be extend to parse arrays.\n */\nexport function parseJson(json) {\n  return /** @type {?JsonObject} */(JSON.parse(/** @type {string} */ (json)));\n}\n\n/**\n * Parses the given `json` string without throwing an exception if not valid.\n * Returns `undefined` if parsing fails.\n * Returns the `Object` corresponding to the JSON string when parsing succeeds.\n * @param {*} json JSON string to parse\n * @param {function(!Error)=} opt_onFailed Optional function that will be called\n *     with the error if parsing fails.\n * @return {?JsonObject|undefined} May be extend to parse arrays.\n */\nexport function tryParseJson(json, opt_onFailed) {\n  try {\n    return parseJson(json);\n  } catch (e) {\n    if (opt_onFailed) {\n      opt_onFailed(e);\n    }\n    return undefined;\n  }\n}\n\n/**\n * Recursively checks strict equality of items in nested arrays and objects.\n *\n * @param {JSONValueDef} a\n * @param {JSONValueDef} b\n * @param {number} depth The maximum recursion depth. Must be finite.\n * @return {boolean}\n * @throws {Error} If depth argument is not finite.\n */\nexport function recursiveEquals(a, b, depth = 3) {\n  if (!isFinite(depth)) {\n    throw new Error('depth arg must be finite: ' + depth);\n  }\n  if (a === b) {\n    return true;\n  }\n  // Only check shallow equality for depth < 1.\n  if (depth < 1) {\n    return false;\n  }\n  if (typeof a !== typeof b) {\n    return false;\n  }\n  if (Array.isArray(a) && Array.isArray(b)) {\n    if (a.length !== b.length) {\n      return false;\n    }\n    for (let i = 0; i < a.length; i++) {\n      if (!recursiveEquals(a[i], b[i], depth - 1)) {\n        return false;\n      }\n    }\n    return true;\n  }\n  if (a && b && typeof a === 'object' && typeof b === 'object') {\n    const keysA = Object.keys(/** @type {!Object} */ (a));\n    const keysB = Object.keys(/** @type {!Object} */ (b));\n    if (keysA.length !== keysB.length) {\n      return false;\n    }\n    for (let i = 0; i < keysA.length; i++) {\n      const keyA = keysA[i];\n      const valueA = a[keyA];\n      const valueB = b[keyA];\n      if (!recursiveEquals(valueA, valueB, depth - 1)) {\n        return false;\n      }\n    }\n    return true;\n  }\n  return false;\n}\n\n\n/**\n * @param {*} obj\n * @param {string} key\n * @return {boolean}\n */\nfunction hasOwnProperty(obj, key) {\n  if (obj == null || typeof obj != 'object') {\n    return false;\n  }\n  return Object.prototype.hasOwnProperty.call(\n      /** @type {!Object} */ (obj), key);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * The structure that combines position and size for an element. The exact\n * interpretation of position and size depends on the use case.\n *\n * @typedef {{\n *   top: number,\n *   bottom: number,\n *   left: number,\n *   right: number,\n *   width: number,\n *   height: number,\n *   x: number,\n *   y: number\n * }}\n */\nexport let LayoutRectDef;\n\n\n/**\n * The structure that represents the margins of an Element.\n *\n * @typedef {{\n *   top: number,\n *   right: number,\n *   bottom: number,\n *   left: number\n * }}\n */\nexport let LayoutMarginsDef;\n\n\n/**\n * The structure that represents a requested change to the margins of an\n * Element. Any new values specified will replace existing ones (rather than\n * being additive).\n *\n * @typedef {{\n *   top: (number|undefined),\n *   right: (number|undefined),\n *   bottom: (number|undefined),\n *   left: (number|undefined)\n * }}\n */\nexport let LayoutMarginsChangeDef;\n\n/**\n* RelativePositions\n*\n* Describes the relative position of an element to another (whether the\n* first is inside the second, on top of the second or on the bottom\n* @enum {string}\n*/\nexport const RelativePositions = {\n  INSIDE: 'inside',\n  TOP: 'top',\n  BOTTOM: 'bottom',\n};\n\n/**\n * Creates a layout rect based on the left, top, width and height parameters\n * in that order.\n * @param {number} left\n * @param {number} top\n * @param {number} width\n * @param {number} height\n * @return {!LayoutRectDef}\n */\nexport function layoutRectLtwh(left, top, width, height) {\n  return {\n    left,\n    top,\n    width,\n    height,\n    bottom: top + height,\n    right: left + width,\n    x: left,\n    y: top,\n  };\n}\n\n\n/**\n * Creates a layout rect based on the DOMRect, e.g. obtained from calling\n * getBoundingClientRect.\n * @param {!ClientRect} rect\n * @return {!LayoutRectDef}\n */\nexport function layoutRectFromDomRect(rect) {\n  return layoutRectLtwh(Number(rect.left), Number(rect.top),\n      Number(rect.width), Number(rect.height));\n}\n\n/**\n * Returns true if the specified two rects overlap by a single pixel.\n * @param {!LayoutRectDef} r1\n * @param {!LayoutRectDef} r2\n * @return {boolean}\n */\nexport function layoutRectsOverlap(r1, r2) {\n  return (r1.top <= r2.bottom && r2.top <= r1.bottom &&\n      r1.left <= r2.right && r2.left <= r1.right);\n}\n\n\n/**\n * Returns the intersection between a, b or null if there is none.\n * @param {...?LayoutRectDef|undefined} var_args\n * @return {?LayoutRectDef}\n */\nexport function rectIntersection(var_args) {\n  let x0 = -Infinity;\n  let x1 = Infinity;\n  let y0 = -Infinity;\n  let y1 = Infinity;\n  for (let i = 0; i < arguments.length; i++) {\n    const current = arguments[i];\n    if (!current) {\n      continue;\n    }\n    x0 = Math.max(x0, current.left);\n    x1 = Math.min(x1, current.left + current.width);\n    y0 = Math.max(y0, current.top);\n    y1 = Math.min(y1, current.top + current.height);\n    if (x1 < x0 || y1 < y0) {\n      return null;\n    }\n  }\n  if (x1 == Infinity) {\n    return null;\n  }\n  return layoutRectLtwh(x0, y0, x1 - x0, y1 - y0);\n}\n\n/**\n * Returns the position of r2 relative to r1\n * @param {!LayoutRectDef} r1\n * @param {!LayoutRectDef} r2\n * @return {RelativePositions}\n */\nexport function layoutRectsRelativePos(r1, r2) {\n  if (r1.top < r2.top) {\n    return RelativePositions.TOP;\n  } else if (r1.bottom > r2.bottom) {\n    return RelativePositions.BOTTOM;\n  } else {\n    return RelativePositions.INSIDE;\n  }\n}\n\n/**\n * Expand the layout rect using multiples of width and height.\n * @param {!LayoutRectDef} rect Original rect.\n * @param {number} dw Expansion in width, specified as a multiple of width.\n * @param {number} dh Expansion in height, specified as a multiple of height.\n * @return {!LayoutRectDef}\n */\nexport function expandLayoutRect(rect, dw, dh) {\n  return layoutRectLtwh(rect.left - rect.width * dw,\n      rect.top - rect.height * dh,\n      rect.width * (1 + dw * 2),\n      rect.height * (1 + dh * 2));\n}\n\n/**\n * Moves the layout rect using dx and dy.\n * @param {!LayoutRectDef} rect Original rect.\n * @param {number} dx Move horizontally with this value.\n * @param {number} dy Move vertically with this value.\n * @return {!LayoutRectDef}\n */\nexport function moveLayoutRect(rect, dx, dy) {\n  if ((dx == 0 && dy == 0) ||\n      (rect.width == 0 && rect.height == 0)) {\n    return rect;\n  }\n  return layoutRectLtwh(rect.left + dx, rect.top + dy,\n      rect.width, rect.height);\n}\n\n\n/**\n * @param {!LayoutMarginsDef} margins\n * @param {!LayoutMarginsChangeDef} change\n * @return {boolean}\n */\nexport function areMarginsChanged(margins, change) {\n  return (change.top !== undefined && change.top != margins.top) ||\n      (change.right !== undefined && change.right != margins.right) ||\n      (change.bottom !== undefined && change.bottom != margins.bottom) ||\n      (change.left !== undefined && change.left != margins.left);\n}\n\n/**\n * @param {!LayoutRectDef} from\n * @param {!LayoutRectDef} to\n * @return {boolean}\n */\nexport function layoutRectSizeEquals(from, to) {\n  return from.width == to.width &&\n      from.height === to.height;\n}\n\n/**\n * @param {?LayoutRectDef} r1\n * @param {?LayoutRectDef} r2\n * @return {boolean}\n */\nexport function layoutRectEquals(r1, r2) {\n  if (!r1 || !r2) {\n    return false;\n  }\n  return r1.left == r2.left && r1.top == r2.top &&\n      r1.width == r2.width && r1.height == r2.height;\n}\n\n/**\n * @param {LayoutMarginsChangeDef|undefined} marginsChange\n * @return {LayoutMarginsChangeDef|undefined}\n */\nexport function cloneLayoutMarginsChangeDef(marginsChange) {\n  if (!marginsChange) {\n    return marginsChange;\n  }\n  return {\n    top: marginsChange.top,\n    bottom: marginsChange.bottom,\n    left: marginsChange.left,\n    right: marginsChange.right,\n  };\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Implements element layout. See https://goo.gl/9avXuT for\n * details.\n */\n\nimport {dev, user} from './log';\nimport {htmlFor} from './static-template';\nimport {isFiniteNumber} from './types';\nimport {setStyle, setStyles} from './style';\nimport {startsWith} from './string';\n\n/**\n * @enum {string}\n */\nexport const Layout = {\n  NODISPLAY: 'nodisplay',\n  FIXED: 'fixed',\n  FIXED_HEIGHT: 'fixed-height',\n  RESPONSIVE: 'responsive',\n  CONTAINER: 'container',\n  FILL: 'fill',\n  FLEX_ITEM: 'flex-item',\n  FLUID: 'fluid',\n  INTRINSIC: 'intrinsic',\n};\n\n\n/**\n * Layout priorities to use with BaseElement#getLayoutPriority() and\n * BaseElement#updateLayoutPriority().\n * @enum {number}\n */\nexport const LayoutPriority = {\n  CONTENT: 0,\n  METADATA: 1,\n  ADS: 2,\n  BACKGROUND: 3,\n};\n\n\n/**\n * CSS Length type. E.g. \"1px\" or \"20vh\".\n * @typedef {string}\n */\nexport let LengthDef;\n\n\n/**\n * @typedef {{\n *   width: string,\n *   height: string\n * }}\n */\nlet DimensionsDef;\n\n\n/**\n * The set of elements with natural dimensions, that is, elements\n * which have a known dimension either based on their value specified here,\n * or, if the value is null, a dimension specific to the browser.\n * `hasNaturalDimensions` checks for membership in this set.\n * `getNaturalDimensions` determines the dimensions for an element in the\n *    set and caches it.\n * @type {!Object<string, ?DimensionsDef>}\n * @private  Visible for testing only!\n */\nexport const naturalDimensions_ = {\n  'AMP-PIXEL': {width: '0px', height: '0px'},\n  'AMP-ANALYTICS': {width: '1px', height: '1px'},\n  // TODO(dvoytenko): audio should have width:auto.\n  'AMP-AUDIO': null,\n  'AMP-SOCIAL-SHARE': {width: '60px', height: '44px'},\n};\n\n\n/**\n * Elements that the progess can be shown for. This set has to be externalized\n * since the element's implementation may not be downloaded yet.\n * @enum {boolean}\n * @private  Visible for testing only!\n */\nexport const LOADING_ELEMENTS_ = {\n  'AMP-ANIM': true,\n  'AMP-BRIGHTCOVE': true,\n  'AMP-GOOGLE-DOCUMENT-EMBED': true,\n  'AMP-EMBED': true,\n  'AMP-FACEBOOK': true,\n  'AMP-FACEBOOK-COMMENTS': true,\n  'AMP-FACEBOOK-LIKE': true,\n  'AMP-FACEBOOK-PAGE': true,\n  'AMP-IFRAME': true,\n  'AMP-IMG': true,\n  'AMP-INSTAGRAM': true,\n  'AMP-LIST': true,\n  'AMP-OOYALA-PLAYER': true,\n  'AMP-PINTEREST': true,\n  'AMP-PLAYBUZZ': true,\n  'AMP-VIDEO': true,\n  'AMP-YOUTUBE': true,\n};\n\n\n/**\n * @param {string} s\n * @return {Layout|undefined} Returns undefined in case of failure to parse\n *   the layout string.\n */\nexport function parseLayout(s) {\n  for (const k in Layout) {\n    if (Layout[k] == s) {\n      return Layout[k];\n    }\n  }\n  return undefined;\n}\n\n\n/**\n * @param {!Layout} layout\n * @return {string}\n */\nexport function getLayoutClass(layout) {\n  return 'i-amphtml-layout-' + layout;\n}\n\n\n/**\n * Whether an element with this layout inherently defines the size.\n * @param {!Layout} layout\n * @return {boolean}\n */\nexport function isLayoutSizeDefined(layout) {\n  return (layout == Layout.FIXED ||\n      layout == Layout.FIXED_HEIGHT ||\n      layout == Layout.RESPONSIVE ||\n      layout == Layout.FILL ||\n      layout == Layout.FLEX_ITEM ||\n      layout == Layout.FLUID ||\n      layout == Layout.INTRINSIC);\n}\n\n\n/**\n * Whether the tag is an internal (service) AMP tag.\n * @param {!Node|string} tag\n * @return {boolean}\n */\nexport function isInternalElement(tag) {\n  const tagName = (typeof tag == 'string') ? tag : tag.tagName;\n  return tagName && startsWith(tagName.toLowerCase(), 'i-');\n}\n\n\n/**\n * Parses the CSS length value. If no units specified, the assumed value is\n * \"px\". Returns undefined in case of parsing error.\n * @param {string|undefined|null} s\n * @return {!LengthDef|undefined}\n */\nexport function parseLength(s) {\n  if (typeof s == 'number') {\n    return s + 'px';\n  }\n  if (!s) {\n    return undefined;\n  }\n  if (!/^\\d+(\\.\\d+)?(px|em|rem|vh|vw|vmin|vmax|cm|mm|q|in|pc|pt)?$/.test(s)) {\n    return undefined;\n  }\n  if (/^\\d+(\\.\\d+)?$/.test(s)) {\n    return s + 'px';\n  }\n  return s;\n}\n\n\n\n/**\n * Asserts that the supplied value is a non-percent CSS Length value.\n * @param {!LengthDef|string|null|undefined} length\n * @return {!LengthDef}\n */\nexport function assertLength(length) {\n  user().assert(\n      /^\\d+(\\.\\d+)?(px|em|rem|vh|vw|vmin|vmax|cm|mm|q|in|pc|pt)$/.test(length),\n      'Invalid length value: %s', length);\n  return /** @type {!LengthDef} */ (length);\n}\n\n\n\n\n/**\n * Asserts that the supplied value is a CSS Length value\n * (including percent unit).\n * @param {!LengthDef|string} length\n * @return {!LengthDef}\n */\nexport function assertLengthOrPercent(length) {\n  user().assert(/^\\d+(\\.\\d+)?(px|em|rem|vh|vw|vmin|vmax|%)$/.test(length),\n      'Invalid length or percent value: %s', length);\n  return length;\n}\n\n\n/**\n * Returns units from the CSS length value.\n * @param {!LengthDef|string|null|undefined} length\n * @return {string}\n */\nexport function getLengthUnits(length) {\n  assertLength(length);\n  dev().assertString(length);\n  const m = user().assert(length.match(/[a-z]+/i),\n      'Failed to read units from %s', length);\n  return m[0];\n}\n\n\n/**\n * Returns the numeric value of a CSS length value.\n * @param {!LengthDef|string|null|undefined} length\n * @return {number|undefined}\n */\nexport function getLengthNumeral(length) {\n  const res = parseFloat(length);\n  return isFiniteNumber(res) ? res : undefined;\n}\n\n\n/**\n * Determines whether the tagName is a known element that has natural dimensions\n * in our runtime or the browser.\n * @param {string} tagName The element tag name.\n * @return {boolean}\n */\nexport function hasNaturalDimensions(tagName) {\n  tagName = tagName.toUpperCase();\n  return naturalDimensions_[tagName] !== undefined;\n}\n\n\n/**\n * Determines the default dimensions for an element which could vary across\n * different browser implementations, like <audio> for instance.\n * This operation can only be completed for an element whitelisted by\n * `hasNaturalDimensions`.\n * @param {!Element} element\n * @return {DimensionsDef}\n */\nexport function getNaturalDimensions(element) {\n  const tagName = element.tagName.toUpperCase();\n  dev().assert(naturalDimensions_[tagName] !== undefined);\n  if (!naturalDimensions_[tagName]) {\n    const doc = element.ownerDocument;\n    const naturalTagName = tagName.replace(/^AMP\\-/, '');\n    const temp = doc.createElement(naturalTagName);\n    // For audio, should no-op elsewhere.\n    temp.controls = true;\n    setStyles(temp, {\n      position: 'absolute',\n      visibility: 'hidden',\n    });\n    doc.body.appendChild(temp);\n    naturalDimensions_[tagName] = {\n      width: (temp./*OK*/offsetWidth || 1) + 'px',\n      height: (temp./*OK*/offsetHeight || 1) + 'px',\n    };\n    doc.body.removeChild(temp);\n  }\n  return /** @type {DimensionsDef} */ (naturalDimensions_[tagName]);\n}\n\n\n/**\n * Whether the loading can be shown for the specified elemeent. This set has\n * to be externalized since the element's implementation may not be\n * downloaded yet.\n * @param {!Element} element\n * @return {boolean}\n */\nexport function isLoadingAllowed(element) {\n  const tagName = element.tagName.toUpperCase();\n  if (tagName == 'AMP-AD' || tagName == 'AMP-EMBED') {\n    return true;\n  }\n  return LOADING_ELEMENTS_[tagName] || false;\n}\n\n\n/**\n * Applies layout to the element. Visible for testing only.\n *\n * \\   \\  /  \\  /   / /   \\     |   _  \\     |  \\ |  | |  | |  \\ |  |  / _____|\n *  \\   \\/    \\/   / /  ^  \\    |  |_)  |    |   \\|  | |  | |   \\|  | |  |  __\n *   \\            / /  /_\\  \\   |      /     |  . `  | |  | |  . `  | |  | |_ |\n *    \\    /\\    / /  _____  \\  |  |\\  \\----.|  |\\   | |  | |  |\\   | |  |__| |\n *     \\__/  \\__/ /__/     \\__\\ | _| `._____||__| \\__| |__| |__| \\__|  \\______|\n *\n * The equivalent of this method is used for server-side rendering (SSR) and\n * any changes made to it must be made in coordination with caches that\n * implement SSR. For more information on SSR see bit.ly/amp-ssr.\n *\n * @param {!Element} element\n * @return {!Layout}\n */\nexport function applyStaticLayout(element) {\n  // Check if the layout has already been done by server-side rendering. The\n  // document may be visible to the user if the boilerplate was removed so\n  // please take care in making changes here.\n  const completedLayoutAttr = element.getAttribute('i-amphtml-layout');\n  if (completedLayoutAttr) {\n    const layout = /** @type {!Layout} */ (dev().assert(\n        parseLayout(completedLayoutAttr)));\n    if ((layout == Layout.RESPONSIVE || layout == Layout.INTRINSIC)\n      && element.firstElementChild) {\n      // Find sizer, but assume that it might not have been parsed yet.\n      element.sizerElement =\n          element.querySelector('i-amphtml-sizer') || undefined;\n    } else if (layout == Layout.NODISPLAY) {\n      applyNoDisplayLayout(element);\n    }\n    return layout;\n  }\n\n  // If the layout was already done by server-side rendering (SSR), then the\n  // code below will not run. Any changes below will necessitate a change to SSR\n  // and must be coordinated with caches that implement SSR. See bit.ly/amp-ssr.\n\n  // Parse layout from the element.\n  const layoutAttr = element.getAttribute('layout');\n  const widthAttr = element.getAttribute('width');\n  const heightAttr = element.getAttribute('height');\n  const sizesAttr = element.getAttribute('sizes');\n  const heightsAttr = element.getAttribute('heights');\n\n  // Input layout attributes.\n  const inputLayout = layoutAttr ? parseLayout(layoutAttr) : null;\n  user().assert(inputLayout !== undefined, 'Unknown layout: %s', layoutAttr);\n  /** @const {string|null|undefined} */\n  const inputWidth = (widthAttr && widthAttr != 'auto') ?\n    parseLength(widthAttr) : widthAttr;\n  user().assert(inputWidth !== undefined, 'Invalid width value: %s', widthAttr);\n  /** @const {string|null|undefined} */\n  const inputHeight = (heightAttr && heightAttr != 'fluid') ?\n    parseLength(heightAttr) : heightAttr;\n  user().assert(inputHeight !== undefined, 'Invalid height value: %s',\n      heightAttr);\n\n  // Effective layout attributes. These are effectively constants.\n  let width;\n  let height;\n  let layout;\n\n  // Calculate effective width and height.\n  if ((!inputLayout || inputLayout == Layout.FIXED ||\n      inputLayout == Layout.FIXED_HEIGHT) &&\n      (!inputWidth || !inputHeight) && hasNaturalDimensions(element.tagName)) {\n    // Default width and height: handle elements that do not specify a\n    // width/height and are defined to have natural browser dimensions.\n    const dimensions = getNaturalDimensions(element);\n    width = (inputWidth || inputLayout == Layout.FIXED_HEIGHT) ? inputWidth :\n      dimensions.width;\n    height = inputHeight || dimensions.height;\n  } else {\n    width = inputWidth;\n    height = inputHeight;\n  }\n\n  // Calculate effective layout.\n  if (inputLayout) {\n    layout = inputLayout;\n  } else if (!width && !height) {\n    layout = Layout.CONTAINER;\n  } else if (height == 'fluid') {\n    layout = Layout.FLUID;\n  } else if (height && (!width || width == 'auto')) {\n    layout = Layout.FIXED_HEIGHT;\n  } else if (height && width && (sizesAttr || heightsAttr)) {\n    layout = Layout.RESPONSIVE;\n  } else {\n    layout = Layout.FIXED;\n  }\n\n  // Verify layout attributes.\n  if (layout == Layout.FIXED || layout == Layout.FIXED_HEIGHT ||\n      layout == Layout.RESPONSIVE || layout == Layout.INTRINSIC) {\n    user().assert(height, 'Expected height to be available: %s', heightAttr);\n  }\n  if (layout == Layout.FIXED_HEIGHT) {\n    user().assert(!width || width == 'auto',\n        'Expected width to be either absent or equal \"auto\" ' +\n        'for fixed-height layout: %s', widthAttr);\n  }\n  if (layout == Layout.FIXED || layout == Layout.RESPONSIVE ||\n      layout == Layout.INTRINSIC) {\n    user().assert(width && width != 'auto',\n        'Expected width to be available and not equal to \"auto\": %s',\n        widthAttr);\n  }\n\n  if (layout == Layout.RESPONSIVE || layout == Layout.INTRINSIC) {\n    user().assert(getLengthUnits(width) == getLengthUnits(height),\n        'Length units should be the same for width and height: %s, %s',\n        widthAttr, heightAttr);\n  } else {\n    user().assert(heightsAttr === null,\n        'Unexpected \"heights\" attribute for none-responsive layout');\n  }\n\n  // Apply UI.\n  element.classList.add(getLayoutClass(layout));\n  if (isLayoutSizeDefined(layout)) {\n    element.classList.add('i-amphtml-layout-size-defined');\n  }\n  if (layout == Layout.NODISPLAY) {\n    // CSS defines layout=nodisplay automatically with `display:none`. Thus\n    // no additional styling is needed.\n    applyNoDisplayLayout(element);\n  } else if (layout == Layout.FIXED) {\n    setStyles(element, {\n      width: dev().assertString(width),\n      height: dev().assertString(height),\n    });\n  } else if (layout == Layout.FIXED_HEIGHT) {\n    setStyle(element, 'height', dev().assertString(height));\n  } else if (layout == Layout.RESPONSIVE) {\n    const sizer = element.ownerDocument.createElement('i-amphtml-sizer');\n    setStyles(sizer, {\n      display: 'block',\n      paddingTop:\n        ((getLengthNumeral(height) / getLengthNumeral(width)) * 100) + '%',\n    });\n    element.insertBefore(sizer, element.firstChild);\n    element.sizerElement = sizer;\n  } else if (layout == Layout.INTRINSIC) {\n    // Intrinsic uses an svg inside the sizer element rather than the padding\n    // trick Note a naked svg won't work becasue other thing expect the\n    // i-amphtml-sizer element\n    const sizer = htmlFor(element)`\n      <i-amphtml-sizer class=\"i-amphtml-sizer\">\n        <img class=\"i-amphtml-intrinsic-sizer\" />\n      </i-amphtml-sizer>`;\n    const intrinsicSizer = sizer.firstElementChild;\n    intrinsicSizer.setAttribute('src',\n        `data:image/svg+xml;charset=utf-8,<svg height=\"${height}\" width=\"${width}\" xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\"/>`);\n    element.insertBefore(sizer, element.firstChild);\n    // TODO(jpettitt): sizer is leaked and can't be cleaned up.\n    element.sizerElement = intrinsicSizer;\n  } else if (layout == Layout.FILL) {\n    // Do nothing.\n  } else if (layout == Layout.CONTAINER) {\n    // Do nothing. Elements themselves will check whether the supplied\n    // layout value is acceptable. In particular container is only OK\n    // sometimes.\n  } else if (layout == Layout.FLEX_ITEM) {\n    // Set height and width to a flex item if they exist.\n    // The size set to a flex item could be overridden by `display: flex` later.\n    if (width) {\n      setStyle(element, 'width', width);\n    }\n    if (height) {\n      setStyle(element, 'height', height);\n    }\n  } else if (layout == Layout.FLUID) {\n    element.classList.add('i-amphtml-layout-awaiting-size');\n    if (width) {\n      setStyle(element, 'width', width);\n    }\n    setStyle(element, 'height', 0);\n  }\n  return layout;\n}\n\n\n/**\n * @param {!Element} element\n */\nfunction applyNoDisplayLayout(element) {\n  // TODO(dvoytenko, #9353): once `toggleLayoutDisplay` API has been deployed\n  // everywhere, switch all relevant elements to this API. In the meantime,\n  // simply unblock display toggling via `style=\"display: ...\"`.\n  setStyle(element, 'display', 'none');\n  element.classList.add('i-amphtml-display');\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {getMode} from './mode';\nimport {getModeObject} from './mode-object';\nimport {isEnumValue} from './types';\n\n/**\n * Triple zero width space.\n *\n * This is added to user error messages, so that we can later identify\n * them, when the only thing that we have is the message. This is the\n * case in many browsers when the global exception handler is invoked.\n *\n * @const {string}\n */\nexport const USER_ERROR_SENTINEL = '\\u200B\\u200B\\u200B';\n\n\n/**\n * Four zero width space.\n *\n * @const {string}\n */\nexport const USER_ERROR_EMBED_SENTINEL = '\\u200B\\u200B\\u200B\\u200B';\n\n\n/**\n * @param {string} message\n * @return {boolean} Whether this message was a user error.\n */\nexport function isUserErrorMessage(message) {\n  return message.indexOf(USER_ERROR_SENTINEL) >= 0;\n}\n\n/**\n * @param {string} message\n * @return {boolean} Whether this message was a a user error from an iframe embed.\n */\nexport function isUserErrorEmbed(message) {\n  return message.indexOf(USER_ERROR_EMBED_SENTINEL) >= 0;\n}\n\n\n/**\n * @enum {number}\n * @private Visible for testing only.\n */\nexport const LogLevel = {\n  OFF: 0,\n  ERROR: 1,\n  WARN: 2,\n  INFO: 3,\n  FINE: 4,\n};\n\n/**\n * Sets reportError function. Called from error.js to break cyclic\n * dependency.\n * @param {function(*, !Element=)|undefined} fn\n */\nexport function setReportError(fn) {\n  self.reportError = fn;\n}\n\n/**\n * @type {!LogLevel|undefined}\n * @private\n */\nlet levelOverride_ = undefined;\n\n/**\n * @param {!LogLevel} level\n */\nexport function overrideLogLevel(level) {\n  levelOverride_ = level;\n}\n\n/**\n * Logging class. Use of sentinel string instead of a boolean to check user/dev\n * errors because errors could be rethrown by some native code as a new error,\n * and only a message would survive. Also, some browser dont support a 5th\n * error object argument in window.onerror. List of supporting browser can be\n * found here:\n * https://blog.sentry.io/2016/01/04/client-javascript-reporting-window-onerror.html\n * @final\n * @private Visible for testing only.\n */\nexport class Log {\n  /**\n   * opt_suffix will be appended to error message to identify the type of the\n   * error message. We can't rely on the error object to pass along the type\n   * because some browsers do not have this param in its window.onerror API.\n   * See:\n   * https://blog.sentry.io/2016/01/04/client-javascript-reporting-window-onerror.html\n   *\n   * @param {!Window} win\n   * @param {function(!./mode.ModeDef):!LogLevel} levelFunc\n   * @param {string=} opt_suffix\n   */\n  constructor(win, levelFunc, opt_suffix) {\n    /**\n     * In tests we use the main test window instead of the iframe where\n     * the tests runs because only the former is relayed to the console.\n     * @const {!Window}\n     */\n    this.win = (getMode().test && win.AMP_TEST_IFRAME) ? win.parent : win;\n\n    /** @private @const {function(!./mode.ModeDef):!LogLevel} */\n    this.levelFunc_ = levelFunc;\n\n    /** @private @const {!LogLevel} */\n    this.level_ = this.defaultLevel_();\n\n    /** @private @const {string} */\n    this.suffix_ = opt_suffix || '';\n  }\n\n  /**\n   * @return {!LogLevel}\n   * @private\n   */\n  getLevel_() {\n    return (levelOverride_ !== undefined) ? levelOverride_ : this.level_;\n  }\n\n  /**\n   * @return {!LogLevel}\n   * @private\n   */\n  defaultLevel_() {\n    // No console - can't enable logging.\n    if (!this.win.console || !this.win.console.log) {\n      return LogLevel.OFF;\n    }\n\n    // Logging has been explicitly disabled.\n    if (getMode().log == '0') {\n      return LogLevel.OFF;\n    }\n\n    // Logging is enabled for tests directly.\n    if (getMode().test && this.win.ENABLE_LOG) {\n      return LogLevel.FINE;\n    }\n\n    // LocalDev by default allows INFO level, unless overriden by `#log`.\n    if (getMode().localDev && !getMode().log) {\n      return LogLevel.INFO;\n    }\n\n    // Delegate to the specific resolver.\n    return this.levelFunc_(getModeObject());\n  }\n\n  /**\n   * @param {string} tag\n   * @param {string} level\n   * @param {!Array} messages\n   */\n  msg_(tag, level, messages) {\n    if (this.getLevel_() != LogLevel.OFF) {\n      let fn = this.win.console.log;\n      if (level == 'ERROR') {\n        fn = this.win.console.error || fn;\n      } else if (level == 'INFO') {\n        fn = this.win.console.info || fn;\n      } else if (level == 'WARN') {\n        fn = this.win.console.warn || fn;\n      }\n      if (getMode().localDev) {\n        messages.unshift('[' + tag + ']');\n      }\n      fn.apply(this.win.console, messages);\n    }\n  }\n\n  /**\n   * Whether the logging is enabled.\n   * @return {boolean}\n   */\n  isEnabled() {\n    return this.getLevel_() != LogLevel.OFF;\n  }\n\n  /**\n   * Reports a fine-grained message.\n   * @param {string} tag\n   * @param {...*} var_args\n   */\n  fine(tag, var_args) {\n    if (this.getLevel_() >= LogLevel.FINE) {\n      this.msg_(tag, 'FINE', Array.prototype.slice.call(arguments, 1));\n    }\n  }\n\n  /**\n   * Reports a informational message.\n   * @param {string} tag\n   * @param {...*} var_args\n   */\n  info(tag, var_args) {\n    if (this.getLevel_() >= LogLevel.INFO) {\n      this.msg_(tag, 'INFO', Array.prototype.slice.call(arguments, 1));\n    }\n  }\n\n  /**\n   * Reports a warning message.\n   * @param {string} tag\n   * @param {...*} var_args\n   */\n  warn(tag, var_args) {\n    if (this.getLevel_() >= LogLevel.WARN) {\n      this.msg_(tag, 'WARN', Array.prototype.slice.call(arguments, 1));\n    }\n  }\n\n  /**\n   * Reports an error message. If the logging is disabled, the error is rethrown\n   * asynchronously.\n   * @param {string} tag\n   * @param {...*} var_args\n   * @return {!Error|undefined}\n   * @private\n   */\n  error_(tag, var_args) {\n    if (this.getLevel_() >= LogLevel.ERROR) {\n      this.msg_(tag, 'ERROR', Array.prototype.slice.call(arguments, 1));\n    } else {\n      const error = createErrorVargs.apply(null,\n          Array.prototype.slice.call(arguments, 1));\n      this.prepareError_(error);\n      return error;\n    }\n  }\n\n  /**\n   * Reports an error message.\n   * @param {string} tag\n   * @param {...*} var_args\n   */\n  error(tag, var_args) {\n    const error = this.error_.apply(this, arguments);\n    if (error) {\n      error.name = tag || error.name;\n      // reportError is installed globally per window in the entry point.\n      self.reportError(error);\n    }\n  }\n\n  /**\n   * Reports an error message and marks with an expected property. If the\n   * logging is disabled, the error is rethrown asynchronously.\n   * @param {string} unusedTag\n   * @param {...*} var_args\n   */\n  expectedError(unusedTag, var_args) {\n    const error = this.error_.apply(this, arguments);\n    if (error) {\n      error.expected = true;\n      // reportError is installed globally per window in the entry point.\n      self.reportError(error);\n    }\n  }\n\n  /**\n   * Creates an error object.\n   * @param {...*} var_args\n   * @return {!Error}\n   */\n  createError(var_args) {\n    const error = createErrorVargs.apply(null, arguments);\n    this.prepareError_(error);\n    return error;\n  }\n\n  /**\n   * Creates an error object with its expected property set to true.\n   * @param {...*} var_args\n   * @return {!Error}\n   */\n  createExpectedError(var_args) {\n    const error = createErrorVargs.apply(null, arguments);\n    this.prepareError_(error);\n    error.expected = true;\n    return error;\n  }\n\n  /**\n   * Throws an error if the first argument isn't trueish.\n   *\n   * Supports argument substitution into the message via %s placeholders.\n   *\n   * Throws an error object that has two extra properties:\n   * - associatedElement: This is the first element provided in the var args.\n   *   It can be used for improved display of error messages.\n   * - messageArray: The elements of the substituted message as non-stringified\n   *   elements in an array. When e.g. passed to console.error this yields\n   *   native displays of things like HTML elements.\n   *\n   * @param {T} shouldBeTrueish The value to assert. The assert fails if it does\n   *     not evaluate to true.\n   * @param {string=} opt_message The assertion message\n   * @param {...*} var_args Arguments substituted into %s in the message.\n   * @return {T} The value of shouldBeTrueish.\n   * @template T\n   * eslint \"google-camelcase/google-camelcase\": 0\n   */\n  assert(shouldBeTrueish, opt_message, var_args) {\n    let firstElement;\n    if (!shouldBeTrueish) {\n      const message = opt_message || 'Assertion failed';\n      const splitMessage = message.split('%s');\n      const first = splitMessage.shift();\n      let formatted = first;\n      const messageArray = [];\n      pushIfNonEmpty(messageArray, first);\n      for (let i = 2; i < arguments.length; i++) {\n        const val = arguments[i];\n        if (val && val.tagName) {\n          firstElement = val;\n        }\n        const nextConstant = splitMessage.shift();\n        messageArray.push(val);\n        pushIfNonEmpty(messageArray, nextConstant.trim());\n        formatted += toString(val) + nextConstant;\n      }\n      const e = new Error(formatted);\n      e.fromAssert = true;\n      e.associatedElement = firstElement;\n      e.messageArray = messageArray;\n      this.prepareError_(e);\n      // reportError is installed globally per window in the entry point.\n      self.reportError(e);\n      throw e;\n    }\n    return shouldBeTrueish;\n  }\n\n  /**\n   * Throws an error if the first argument isn't an Element\n   *\n   * Otherwise see `assert` for usage\n   *\n   * @param {*} shouldBeElement\n   * @param {string=} opt_message The assertion message\n   * @return {!Element} The value of shouldBeTrueish.\n   * @template T\n   * eslint \"google-camelcase/google-camelcase\": 2\n   */\n  assertElement(shouldBeElement, opt_message) {\n    const shouldBeTrueish = shouldBeElement && shouldBeElement.nodeType == 1;\n    this.assert(shouldBeTrueish, (opt_message || 'Element expected') + ': %s',\n        shouldBeElement);\n    return /** @type {!Element} */ (shouldBeElement);\n  }\n\n  /**\n   * Throws an error if the first argument isn't a string. The string can\n   * be empty.\n   *\n   * For more details see `assert`.\n   *\n   * @param {*} shouldBeString\n   * @param {string=} opt_message The assertion message\n   * @return {string} The string value. Can be an empty string.\n   * eslint \"google-camelcase/google-camelcase\": 2\n   */\n  assertString(shouldBeString, opt_message) {\n    this.assert(typeof shouldBeString == 'string',\n        (opt_message || 'String expected') + ': %s', shouldBeString);\n    return /** @type {string} */ (shouldBeString);\n  }\n\n  /**\n   * Throws an error if the first argument isn't a number. The allowed values\n   * include `0` and `NaN`.\n   *\n   * For more details see `assert`.\n   *\n   * @param {*} shouldBeNumber\n   * @param {string=} opt_message The assertion message\n   * @return {number} The number value. The allowed values include `0`\n   *   and `NaN`.\n   */\n  assertNumber(shouldBeNumber, opt_message) {\n    this.assert(typeof shouldBeNumber == 'number',\n        (opt_message || 'Number expected') + ': %s', shouldBeNumber);\n    return /** @type {number} */ (shouldBeNumber);\n  }\n\n  /**\n   * Throws an error if the first argument isn't a boolean.\n   *\n   * For more details see `assert`.\n   *\n   * @param {*} shouldBeBoolean\n   * @param {string=} opt_message The assertion message\n   * @return {boolean} The boolean value.\n   */\n  assertBoolean(shouldBeBoolean, opt_message) {\n    this.assert(!!shouldBeBoolean === shouldBeBoolean,\n        (opt_message || 'Boolean expected') + ': %s', shouldBeBoolean);\n    return /** @type {boolean} */ (shouldBeBoolean);\n  }\n\n  /**\n   * Asserts and returns the enum value. If the enum doesn't contain such a\n   * value, the error is thrown.\n   *\n   * @param {!Object<T>} enumObj\n   * @param {string} s\n   * @param {string=} opt_enumName\n   * @return {T}\n   * @template T\n   * eslint \"google-camelcase/google-camelcase\": 2\n   */\n  assertEnumValue(enumObj, s, opt_enumName) {\n    if (isEnumValue(enumObj, s)) {\n      return s;\n    }\n    this.assert(false,\n        'Unknown %s value: \"%s\"',\n        opt_enumName || 'enum', s);\n  }\n\n  /**\n   * @param {!Error} error\n   * @private\n   */\n  prepareError_(error) {\n    error = duplicateErrorIfNecessary(error);\n    if (this.suffix_) {\n      if (!error.message) {\n        error.message = this.suffix_;\n      } else if (error.message.indexOf(this.suffix_) == -1) {\n        error.message += this.suffix_;\n      }\n    } else if (isUserErrorMessage(error.message)) {\n      error.message = error.message.replace(USER_ERROR_SENTINEL, '');\n    }\n  }\n}\n\n/**\n * @param {string|!Element} val\n * @return {string}\n */\nfunction toString(val) {\n  // Do check equivalent to `val instanceof Element` without cross-window bug\n  if (val && val.nodeType == 1) {\n    return val.tagName.toLowerCase() + (val.id ? '#' + val.id : '');\n  }\n  return /** @type {string} */ (val);\n}\n\n\n/**\n * @param {!Array} array\n * @param {*} val\n */\nfunction pushIfNonEmpty(array, val) {\n  if (val != '') {\n    array.push(val);\n  }\n}\n\n/**\n * Some exceptions (DOMException, namely) have read-only message.\n * @param {!Error} error\n * @return {!Error};\n */\nexport function duplicateErrorIfNecessary(error) {\n  const {message} = error;\n  const test = String(Math.random());\n  error.message = test;\n\n  if (error.message === test) {\n    error.message = message;\n    return error;\n  }\n\n  const e = new Error(error.message);\n  // Copy all the extraneous things we attach.\n  for (const prop in error) {\n    e[prop] = error[prop];\n  }\n  // Ensure these are copied.\n  e.stack = error.stack;\n  return e;\n}\n\n/**\n * @param {...*} var_args\n * @return {!Error}\n * @visibleForTesting\n */\nexport function createErrorVargs(var_args) {\n  let error = null;\n  let message = '';\n  for (let i = 0; i < arguments.length; i++) {\n    const arg = arguments[i];\n    if (arg instanceof Error && !error) {\n      error = duplicateErrorIfNecessary(arg);\n    } else {\n      if (message) {\n        message += ' ';\n      }\n      message += arg;\n    }\n  }\n\n  if (!error) {\n    error = new Error(message);\n  } else if (message) {\n    error.message = message + ': ' + error.message;\n  }\n  return error;\n}\n\n\n/**\n * Rethrows the error without terminating the current context. This preserves\n * whether the original error designation is a user error or a dev error.\n * @param {...*} var_args\n */\nexport function rethrowAsync(var_args) {\n  const error = createErrorVargs.apply(null, arguments);\n  setTimeout(() => {\n    // reportError is installed globally per window in the entry point.\n    self.reportError(error);\n    throw error;\n  });\n}\n\n\n/**\n * Cache for logs. We do not use a Service since the service module depends\n * on Log and closure literally can't even.\n * @type {{user: ?Log, dev: ?Log, userForEmbed: ?Log}}\n */\nself.log = (self.log || {\n  user: null,\n  dev: null,\n  userForEmbed: null,\n});\n\nconst logs = self.log;\n\n/**\n * Eventually holds a constructor for Log objects. Lazily initialized, so we\n * can avoid ever referencing the real constructor except in JS binaries\n * that actually want to include the implementation.\n * @type {?Function}\n */\nlet logConstructor = null;\n\n/**\n * Initializes log contructor.\n */\nexport function initLogConstructor() {\n  logConstructor = Log;\n  // Initialize instances for use. If a binary (an extension for example) that\n  // does not call `initLogConstructor` invokes `dev()` or `user()` earlier than\n  // the binary that does call `initLogConstructor` (amp.js), the extension will\n  // throw an error as that extension will never be able to initialize the log\n  // instances and we also don't want it to call `initLogConstructor` either\n  // (since that will cause the Log implementation to be bundled into that\n  // binary). So we must initialize the instances eagerly so that they are ready\n  // for use (stored globally) after the main binary calls `initLogConstructor`.\n  dev();\n  user();\n}\n\n/**\n * Resets log contructor for testing.\n */\nexport function resetLogConstructorForTesting() {\n  logConstructor = null;\n}\n\n/**\n * Publisher level log.\n *\n * Enabled in the following conditions:\n *  1. Not disabled using `#log=0`.\n *  2. Development mode is enabled via `#development=1` or logging is explicitly\n *     enabled via `#log=D` where D >= 1.\n *  3. AMP.setLogLevel(D) is called, where D >= 1.\n *\n * @param {!Element=} opt_element\n * @return {!Log}\n */\nexport function user(opt_element) {\n  if (!logs.user) {\n    logs.user = getUserLogger(USER_ERROR_SENTINEL);\n  }\n  if (!isFromEmbed(logs.user.win, opt_element)) {\n    return logs.user;\n  } else {\n    if (logs.userForEmbed) {\n      return logs.userForEmbed;\n    }\n    return logs.userForEmbed = getUserLogger(USER_ERROR_EMBED_SENTINEL);\n  }\n}\n\n/**\n * Getter for user logger\n * @param {string=} suffix\n * @return {!Log}\n */\nfunction getUserLogger(suffix) {\n  if (!logConstructor) {\n    throw new Error('failed to call initLogConstructor');\n  }\n  return new logConstructor(self, mode => {\n    const logNum = parseInt(mode.log, 10);\n    if (mode.development || logNum >= 1) {\n      return LogLevel.FINE;\n    }\n    return LogLevel.WARN;\n  }, suffix);\n}\n\n/**\n * AMP development log. Calls to `devLog().assert` and `dev.fine` are stripped\n * in the PROD binary. However, `devLog().assert` result is preserved in either\n * case.\n *\n * Enabled in the following conditions:\n *  1. Not disabled using `#log=0`.\n *  2. Logging is explicitly enabled via `#log=D`, where D >= 2.\n *  3. AMP.setLogLevel(D) is called, where D >= 2.\n *\n * @return {!Log}\n */\nexport function dev() {\n  if (logs.dev) {\n    return logs.dev;\n  }\n  if (!logConstructor) {\n    throw new Error('failed to call initLogConstructor');\n  }\n  return logs.dev = new logConstructor(self, mode => {\n    const logNum = parseInt(mode.log, 10);\n    if (logNum >= 3) {\n      return LogLevel.FINE;\n    }\n    if (logNum >= 2) {\n      return LogLevel.INFO;\n    }\n    return LogLevel.OFF;\n  });\n}\n\n/**\n * @param {!Window} win\n * @param {!Element=} opt_element\n * @return {boolean} isEmbed\n */\nexport function isFromEmbed(win, opt_element) {\n  if (!opt_element) {\n    return false;\n  }\n  return opt_element.ownerDocument.defaultView != win;\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {getMode} from './mode';\n\n/**\n * Provides info about the current app. This return value may be cached and\n * passed around as it will always be DCE'd.\n * @param {?Window=} opt_win\n * @return {!./mode.ModeDef}\n */\nexport function getModeObject(opt_win) {\n  return {\n    localDev: getMode(opt_win).localDev,\n    development: getMode(opt_win).development,\n    filter: getMode(opt_win).filter,\n    minified: getMode(opt_win).minified,\n    lite: getMode(opt_win).lite,\n    test: getMode(opt_win).test,\n    log: getMode(opt_win).log,\n    version: getMode(opt_win).version,\n    rtvVersion: getMode(opt_win).rtvVersion,\n  };\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {parseQueryString_} from './url-parse-query-string';\n\n/**\n * @typedef {{\n *   localDev: boolean,\n *   development: boolean,\n *   filter: (string|undefined),\n *   minified: boolean,\n *   lite: boolean,\n *   test: boolean,\n *   log: (string|undefined),\n *   version: string,\n *   rtvVersion: string,\n * }}\n */\nexport let ModeDef;\n\n/** @type {string} */\nconst version = '$internalRuntimeVersion$';\n\n/**\n * `rtvVersion` is the prefixed version we serve off of the cdn.\n * The prefix denotes canary(00) or prod(01) or an experiment version ( > 01).\n * @type {string}\n */\nlet rtvVersion = '';\n\n/**\n * Provides info about the current app.\n * @param {?Window=} opt_win\n * @return {!ModeDef}\n */\nexport function getMode(opt_win) {\n  const win = opt_win || self;\n  if (win.AMP_MODE) {\n    return win.AMP_MODE;\n  }\n  return win.AMP_MODE = getMode_(win);\n}\n\n/**\n * Provides info about the current app.\n * @param {!Window} win\n * @return {!ModeDef}\n */\nfunction getMode_(win) {\n  // Magic constants that are replaced by closure compiler.\n  // IS_MINIFIED is always replaced with true when closure compiler is used\n  // while IS_DEV is only replaced when `gulp dist` is called without the\n  // --fortesting flag.\n  const IS_DEV = true;\n  const IS_MINIFIED = false;\n\n  const localDevEnabled = !!(self.AMP_CONFIG && self.AMP_CONFIG.localDev);\n  const runningTests = IS_DEV && !!(win.AMP_TEST || win.__karma__);\n  const isLocalDev = IS_DEV && (localDevEnabled || runningTests);\n  const hashQuery = parseQueryString_(\n      // location.originalHash is set by the viewer when it removes the fragment\n      // from the URL.\n      win.location.originalHash || win.location.hash);\n\n  const searchQuery = parseQueryString_(win.location.search);\n\n  if (!rtvVersion) {\n    rtvVersion = getRtvVersion(win, isLocalDev);\n  }\n\n  // The `minified`, `test` and `localDev` properties are replaced\n  // as boolean literals when we run `gulp dist` without the `--fortesting`\n  // flags. This improved DCE on the production file we deploy as the code\n  // paths for localhost/testing/development are eliminated.\n  return {\n    localDev: isLocalDev,\n    // Triggers validation or enable pub level logging. Validation can be\n    // bypassed via #validate=0.\n    // Note that AMP_DEV_MODE flag is used for testing purposes.\n    development: !!(hashQuery['development'] == '1' || win.AMP_DEV_MODE),\n    examiner: hashQuery['development'] == '2',\n    // Allows filtering validation errors by error category. For the\n    // available categories, see ErrorCategory in validator/validator.proto.\n    filter: hashQuery['filter'],\n    // amp-geo override\n    geoOverride: hashQuery['amp-geo'],\n    minified: IS_MINIFIED,\n    // Whether document is in an amp-lite viewer. It signal that the user\n    // would prefer to use less bandwidth.\n    lite: searchQuery['amp_lite'] != undefined,\n    test: runningTests,\n    log: hashQuery['log'],\n    version,\n    rtvVersion,\n  };\n}\n\n/**\n * Retrieve the `rtvVersion` which will have a numeric prefix\n * denoting canary/prod/experiment (unless `isLocalDev` is true).\n *\n * @param {!Window} win\n * @param {boolean} isLocalDev\n * @return {string}\n */\nfunction getRtvVersion(win, isLocalDev) {\n  // If it's local dev then we won't actually have a full version so\n  // just use the version.\n  if (isLocalDev) {\n    return version;\n  }\n\n  if (win.AMP_CONFIG && win.AMP_CONFIG.v) {\n    return win.AMP_CONFIG.v;\n  }\n\n  // Currently `$internalRuntimeVersion$` and thus `mode.version` contain only\n  // major version. The full version however must also carry the minor version.\n  // We will default to production default `01` minor version for now.\n  // TODO(erwinmombay): decide whether $internalRuntimeVersion$ should contain\n  // minor version.\n  return `01${version}`;\n}\n\n\n/**\n * @param {!Window} win\n * @param {boolean} isLocalDev\n * @return {string}\n * @visibleForTesting\n */\nexport function getRtvVersionForTesting(win, isLocalDev) {\n  return getRtvVersion(win, isLocalDev);\n}\n\n\n/** @visibleForTesting */\nexport function resetRtvVersionForTesting() {\n  rtvVersion = '';\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {getMode} from './mode';\nimport {install as installArrayIncludes} from './polyfills/array-includes';\nimport {install as installCustomElements} from './polyfills/custom-elements';\nimport {\n  install as installDOMTokenListToggle,\n} from './polyfills/domtokenlist-toggle';\nimport {install as installDocContains} from './polyfills/document-contains';\nimport {install as installMathSign} from './polyfills/math-sign';\nimport {install as installObjectAssign} from './polyfills/object-assign';\nimport {install as installPromise} from './polyfills/promise';\nimport {installCustomElements as installRegisterElement} from\n  'document-register-element/build/document-register-element.patched';\nimport {isExperimentOn} from './experiments';\n\nif (isExperimentOn(self, 'custom-elements-v1') || getMode().test) {\n  installCustomElements(self, class {});\n} else {\n  installRegisterElement(self, 'auto');\n}\ninstallDOMTokenListToggle(self);\ninstallMathSign(self);\ninstallObjectAssign(self);\ninstallPromise(self);\ninstallDocContains(self);\ninstallArrayIncludes(self);\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * Returns true if the element is in the array and false otherwise.\n *\n * @param {*} value\n * @param {number=} opt_fromIndex\n * @return {boolean}\n * @this {Array}\n */\nfunction includes(value, opt_fromIndex) {\n  const fromIndex = opt_fromIndex || 0;\n  const len = this.length;\n  let i = fromIndex >= 0 ? fromIndex : Math.max(len + fromIndex, 0);\n  for (; i < len; i++) {\n    const other = this[i];\n    // If value has been found OR (value is NaN AND other is NaN)\n    /*eslint \"no-self-compare\": 0*/\n    if (other === value || (value !== value && other !== other)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n* Sets the Array.contains polyfill if it does not exist.\n* @param {!Window} win\n*/\nexport function install(win) {\n  if (!win.Array.prototype.includes) {\n    win.Object.defineProperty(Array.prototype, 'includes', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: includes,\n    });\n  }\n}\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @typedef {{\n *   promise: !Promise<undefined>,\n *   resolve: function(),\n * }}\n */\nlet DeferredDef;\n\n/**\n * @typedef {!Function}\n */\nlet CustomElementConstructorDef;\n\n/**\n * @typedef {{\n *  name: string,\n *  ctor: !CustomElementConstructorDef,\n * }}\n */\nlet CustomElementDef;\n\n/**\n * Validates the custom element's name.\n * This intentionally ignores \"valid\" higher Unicode Code Points.\n * https://html.spec.whatwg.org/multipage/custom-elements.html#valid-custom-element-name\n */\nconst VALID_NAME = /^[a-z][a-z0-9._]*-[a-z0-9._-]*$/;\nconst INVALID_NAMES = [\n  'annotation-xml',\n  'color-profile',\n  'font-face',\n  'font-face-src',\n  'font-face-uri',\n  'font-face-format',\n  'font-face-name',\n  'missing-glyph',\n];\n\n/**\n * Asserts that the custom element name conforms to the spec.\n *\n * @param {!Function} SyntaxError\n * @param {string} name\n */\nfunction assertValidName(SyntaxError, name) {\n  if (!VALID_NAME.test(name) || INVALID_NAMES.indexOf(name) >= 0) {\n    throw new SyntaxError(`invalid custom element name \"${name}\"`);\n  }\n}\n\n/**\n * Does win have a full Custom Elements registry?\n *\n * @param {!Window} win\n * @return {boolean}\n */\nfunction hasCustomElements(win) {\n  const {customElements} = win;\n\n  return !!(\n    customElements &&\n    customElements.define &&\n    customElements.get &&\n    customElements.whenDefined);\n}\n\n/**\n * Was HTMLElement already patched for this window?\n *\n * @param {!Window} win\n * @return {boolean}\n */\nfunction isPatched(win) {\n  const tag = win.HTMLElement.toString();\n  return tag.indexOf('[native code]') === -1;\n}\n\n/**\n * The public Custom Elements API.\n */\nclass CustomElementRegistry {\n  /**\n   * @param {!Window} win\n   * @param {!Registry} registry\n   */\n  constructor(win, registry) {\n    /**\n     * @const @private\n     */\n    this.win_ = win;\n\n    /**\n     * @const @private\n     */\n    this.registry_ = registry;\n\n    /**\n     * @type {!Object<string, DeferredDef>}\n     * @private\n     * @const\n     */\n    this.pendingDefines_ = this.win_.Object.create(null);\n  }\n\n  /**\n   * Register the custom element.\n   *\n   * @param {string} name\n   * @param {!CustomElementConstructorDef} ctor\n   * @param {!Object=} options\n   */\n  define(name, ctor, options) {\n    this.registry_.define(name, ctor, options);\n\n    // If anyone is waiting for this custom element to be defined, resolve\n    // their promise.\n    const pending = this.pendingDefines_;\n    const deferred = pending[name];\n    if (deferred) {\n      deferred.resolve();\n      delete pending[name];\n    }\n  }\n\n  /**\n   * Get the constructor of the (already defined) custom element.\n   *\n   * @param {string} name\n   * @return {!CustomElementConstructorDef|undefined}\n   */\n  get(name) {\n    const def = this.registry_.getByName(name);\n    if (def) {\n      return def.ctor;\n    }\n  }\n\n  /**\n   * Returns a promise that waits until the custom element is defined.\n   * If the custom element is already defined, returns a resolved promise.\n   *\n   * @param {string} name\n   * @return {!Promise<undefined>}\n   */\n  whenDefined(name) {\n    const {Promise, SyntaxError} = this.win_;\n    assertValidName(SyntaxError, name);\n\n    if (this.registry_.getByName(name)) {\n      return Promise.resolve();\n    }\n\n    const pending = this.pendingDefines_;\n    const deferred = pending[name];\n    if (deferred) {\n      return deferred.promise;\n    }\n\n    let resolve;\n    const promise = new /*OK*/Promise(res => resolve = res);\n    pending[name] = {\n      promise,\n      resolve,\n    };\n\n    return promise;\n  }\n\n  /**\n   * Upgrade all custom elements inside root.\n   *\n   * @param {!Node} root\n   */\n  upgrade(root) {\n    this.registry_.upgrade(root);\n  }\n}\n\n/**\n * This internal APIs necessary to run the CustomElementRegistry.\n * Since Registry is never exposed externally, all methods are actually\n * available on the instance.\n */\nclass Registry {\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n    /**\n     * @private @const\n     */\n    this.win_ = win;\n\n    /**\n     * @private @const\n     */\n    this.doc_ = win.document;\n\n    /**\n     * @type {!Object<string, !CustomElementDef>}\n     * @private\n     * @const\n     */\n    this.definitions_ = win.Object.create(null);\n\n    /**\n     * A up-to-date DOM selector for all custom elements.\n     * @type {string}\n     */\n    this.query_ = '';\n\n    /**\n     * The currently upgrading element.\n     * @private {Element}\n     */\n    this.current_ = null;\n  }\n\n  /**\n   * The currently-being-upgraded custom element.\n   *\n   * When an already created (through the DOM parsing APIs, or innerHTML)\n   * custom element node is being upgraded, we can't just create a new node\n   * (it's illegal in the spec). But we still need to run the custom element's\n   * constructor code on the node. We avoid this conundrum by running the\n   * constructor while returning this current node in the HTMLElement\n   * class constructor (the base class of all custom elements).\n   *\n   * @return {Element}\n   */\n  current() {\n    const current = this.current_;\n    this.current_ = null;\n    return current;\n  }\n\n  /**\n   * Finds the custom element definition by name.\n   *\n   * @param {string} name\n   * @return {CustomElementDef|undefined}\n   */\n  getByName(name) {\n    const definition = this.definitions_[name];\n    if (definition) {\n      return definition;\n    }\n  }\n\n  /**\n   * Finds the custom element definition by constructor instance.\n   *\n   * @param {CustomElementConstructorDef} ctor\n   * @return {CustomElementDef|undefined}\n   */\n  getByConstructor(ctor) {\n    const definitions = this.definitions_;\n\n    for (const name in definitions) {\n      const def = definitions[name];\n      if (def.ctor === ctor) {\n        return def;\n      }\n    }\n  }\n\n  /**\n   * Registers the custom element definition, and upgrades all elements by that\n   * name in the root document.\n   *\n   * @param {string} name\n   * @param {!CustomElementConstructorDef} ctor\n   * @param {!Object|undefined} options\n   */\n  define(name, ctor, options) {\n    const {Error, SyntaxError} = this.win_;\n\n    if (options) {\n      throw new Error('Extending native custom elements is not supported');\n    }\n\n    assertValidName(SyntaxError, name);\n\n    if (this.getByName(name) ||\n        this.getByConstructor(ctor)) {\n      throw new Error(`duplicate definition \"${name}\"`);\n    }\n\n    // TODO(jridgewell): Record connectedCallback, disconnectedCallback,\n    // adoptedCallback, attributeChangedCallback, and observedAttributes.\n    // TODO(jridgewell): If attributeChangedCallback, gather observedAttributes\n    this.definitions_[name] = {\n      name,\n      ctor,\n    };\n\n    this.observe_(name);\n    this.upgrade(this.doc_, name);\n  }\n\n  /**\n   * Upgrades custom elements descendants of root (but not including root).\n   *\n   * When called with an opt_query, it both upgrades and connects the custom\n   * elements (this is used during the custom element define algorithm).\n   *\n   * @param {!Node} root\n   * @param {string=} opt_query\n   */\n  upgrade(root, opt_query) {\n    // Only CustomElementRegistry.p.define provides a query (the newly defined\n    // custom element). In this case, we are both upgrading _and_ connecting\n    // the custom elements.\n    const newlyDefined = !!opt_query;\n    const query = opt_query || this.query_;\n    const upgradeCandidates = this.queryAll_(root, query);\n\n    for (let i = 0; i < upgradeCandidates.length; i++) {\n      const candidate = upgradeCandidates[i];\n      if (newlyDefined) {\n        this.connectedCallback_(candidate);\n      } else {\n        this.upgradeSelf(candidate);\n      }\n    }\n  }\n\n  /**\n   * Upgrades the custom element node, if a custom element has been registered\n   * by this name.\n   *\n   * @param {!Node} node\n   */\n  upgradeSelf(node) {\n    const def = this.getByName(node.localName);\n    if (!def) {\n      return;\n    }\n\n    this.upgradeSelf_(/** @type {!Element} */(node), def);\n  }\n\n  /**\n   * @param {!Node} root\n   * @param {string} query\n   * @return {!Array|!NodeList}\n   */\n  queryAll_(root, query) {\n    if (!query || !root.querySelectorAll) {\n      // Nothing to do...\n      return [];\n    }\n\n    return root.querySelectorAll(query);\n  }\n\n  /**\n   * Upgrades the (already created via DOM parsing) custom element.\n   *\n   * @param {!Element} node\n   * @param {!CustomElementDef} def\n   */\n  upgradeSelf_(node, def) {\n    const {ctor} = def;\n    if (node instanceof ctor) {\n      return;\n    }\n\n    // Despite how it looks, this is not a useless construction.\n    // HTMLElementPolyfill (the base class of all custom elements) will return\n    // the current node, allowing the custom element's subclass constructor to\n    // run on the node. The node itself is already constructed, so the return\n    // value is just the node.\n    this.current_ = node;\n    const el = new ctor();\n\n    if (el !== node) {\n      throw new this.win_.Error(\n          'Constructor illegally returned a different instance.');\n    }\n  }\n\n  /**\n   * Fires connectedCallback on the custom element, if it has one.\n   * This also upgrades the custom element, since it may not have been\n   * accessible via the root document before (a detached DOM tree).\n   *\n   * @param {!Node} node\n   */\n  connectedCallback_(node) {\n    const def = this.getByName(node.localName);\n    if (!def) {\n      return;\n    }\n    this.upgradeSelf_(/** @type {!Element} */(node), def);\n    // TODO(jridgewell): It may be appropriate to adoptCallback, if the node\n    // used to be in another doc.\n    // TODO(jridgewell): I should be calling the definitions connectedCallback\n    // with node as the context.\n    if (node.connectedCallback) {\n      node.connectedCallback();\n    }\n  }\n\n  /**\n   * Fires disconnectedCallback on the custom element, if it has one.\n   *\n   * @param {!Node} node\n   */\n  disconnectedCallback_(node) {\n    // TODO(jridgewell): I should be calling the definitions connectedCallback\n    // with node as the context.\n    if (node.disconnectedCallback) {\n      node.disconnectedCallback();\n    }\n  }\n\n  /**\n   * Records name as a registered custom element to observe.\n   *\n   * Starts the Mutation Observer if this is the first registered custom\n   * element. This is deferred until the first custom element is defined to\n   * speed up initial rendering of the page.\n   *\n   * Mutation Observers are conveniently available in every browser we care\n   * about. When a node is connected to the root document, all custom\n   * elements (including that node iteself) will be upgraded and call\n   * connectedCallback. When a node is disconnectedCallback from the root\n   * document, all custom elements will call disconnectedCallback.\n   *\n   * @param {string} name\n   */\n  observe_(name) {\n    if (this.query_) {\n      this.query_ += `,${name}`;\n      return;\n    }\n\n    this.query_ = name;\n\n    // The first registered name starts the mutation observer.\n    const observer = new this.win_.MutationObserver(records => {\n      if (records) {\n        this.handleRecords_(records);\n      }\n    });\n    observer.observe(this.doc_, {\n      childList: true,\n      subtree: true,\n    });\n  }\n\n  /**\n   * Handle all the Mutation Observer's Mutation Records.\n   * All added custom elements will be upgraded (if not already) and call\n   * connectedCallback. All removed custom elements will call\n   * disconnectedCallback.\n   *\n   * @param {!Array<!MutationRecord>} records\n   */\n  handleRecords_(records) {\n    for (let i = 0; i < records.length; i++) {\n      const record = records[i];\n      if (!record) {\n        continue;\n      }\n\n      const {addedNodes, removedNodes} = record;\n      for (let i = 0; i < addedNodes.length; i++) {\n        const node = addedNodes[i];\n        const connectedCandidates = this.queryAll_(node, this.query_);\n        this.connectedCallback_(node);\n        for (let i = 0; i < connectedCandidates.length; i++) {\n          this.connectedCallback_(connectedCandidates[i]);\n        }\n      }\n\n      for (let i = 0; i < removedNodes.length; i++) {\n        const node = removedNodes[i];\n        const disconnectedCandidates = this.queryAll_(node, this.query_);\n        this.disconnectedCallback_(node);\n        for (let i = 0; i < disconnectedCandidates.length; i++) {\n          this.disconnectedCallback_(disconnectedCandidates[i]);\n        }\n      }\n    }\n  }\n}\n\n/**\n * Does the polyfilling.\n * @param {!Window} win\n */\nfunction polyfill(win) {\n  const {HTMLElement, Element, Node, Document, Object, document} = win;\n  const {createElement, cloneNode, importNode} = document;\n\n  const registry = new Registry(win);\n  const customElements = new CustomElementRegistry(win, registry);\n\n  // Expose the custom element registry.\n  // Object.getOwnPropertyDescriptor(window, 'customElements')\n  // {get: , set: undefined, enumerable: true, configurable: true}\n  Object.defineProperty(win, 'customElements', {\n    enumerable: true,\n    configurable: true,\n    // writable: false,\n    value: customElements,\n  });\n\n  // Patch createElement to immediately upgrade the custom element.\n  // This has the added benefit that it avoids the \"already created but needs\n  // constructor code run\" chicken-and-egg problem.\n  Document.prototype.createElement = function createElementPolyfill(name) {\n    const def = registry.getByName(name);\n    if (def) {\n      return new def.ctor();\n    }\n    return createElement.apply(this, arguments);\n  };\n\n  // Patch importNode to immediately upgrade custom elements.\n  // TODO(jridgewell): Can fire adoptedCallback for cross doc imports.\n  Document.prototype.importNode = function importNodePolyfill() {\n    const imported = importNode.apply(this, arguments);\n    if (imported) {\n      registry.upgradeSelf(imported);\n      registry.upgrade(imported);\n    }\n    return imported;\n  };\n\n  // Patch cloneNode to immediately upgrade custom elements.\n  Node.prototype.cloneNode = function cloneNodePolyfill() {\n    const cloned = cloneNode.apply(this, arguments);\n    registry.upgradeSelf(cloned);\n    registry.upgrade(cloned);\n    return cloned;\n  };\n\n  // Patch the innerHTML setter to immediately upgrade custom elements.\n  // Note, this could technically fire connectedCallbacks if this node was\n  // connected, but we leave that to the Mutation Observer.\n  const innerHTMLDesc = Object.getOwnPropertyDescriptor(Element.prototype,\n      'innerHTML');\n  const innerHTMLSetter = innerHTMLDesc.set;\n  innerHTMLDesc.set = function(html) {\n    innerHTMLSetter.call(this, html);\n    registry.upgrade(this);\n  };\n  Object.defineProperty(Element.prototype, 'innerHTML', innerHTMLDesc);\n\n  /**\n   * You can't use the real HTMLElement constructor, because you can't subclass\n   * it without using native classes. So, mock its approximation using\n   * createElement.\n   */\n  function HTMLElementPolyfill() {\n    const {constructor} = this;\n\n    // If we're upgrading an already created custom element, we can't create\n    // another new node (by the spec, it must be the same node).\n    let el = registry.current();\n\n    // If there's not a already created custom element, we're being invoked via\n    // `new`ing the constructor.\n    //\n    // Technically, we could get here via createElement, but we patched that.\n    // If it the custom element was registered, the patch turned it into a\n    // `new` call.\n    // If it was not registered, the native createElement is used. And if\n    // native createElement is being used and we got to this code, we're really\n    // in an infinite loop (a native createElement call just below) so we've\n    // got bigger problems.\n    //\n    // So just take my word we got here via `new`.\n    if (!el) {\n      // The custom element definition is an invariant. If the custom element\n      // is registered, everything works. If it's not, it throws in the member\n      // property access (only defined custom elements can be directly\n      // constructed via `new`).\n      const def = registry.getByConstructor(constructor);\n      el = createElement.call(document, def.name);\n    }\n\n    // Finally, if the node was already constructed, we need to reset it's\n    // prototype to the custom element prototype. And if it wasn't already\n    // constructed, we created a new node via native createElement, and we need\n    // to reset it's prototype. Basically always reset the prototype.\n    Object.setPrototypeOf(el, constructor.prototype);\n    return el;\n  }\n  subClass(Object, HTMLElement, HTMLElementPolyfill);\n\n  // Expose the polyfilled HTMLElement constructor for everyone to extend from.\n  win.HTMLElement = HTMLElementPolyfill;\n}\n\n/**\n * Wraps HTMLElement in a Reflect.construct constructor, so that transpiled\n * classes can `_this = superClass.call(this)` during their construction.\n *\n * This is only used when Custom Elements v1 is already available _and_ we're\n * using transpiled classes (which use ES5 construction idioms).\n *\n * @param {!Window} win\n */\nfunction wrapHTMLElement(win) {\n  const {HTMLElement, Reflect, Object} = win;\n  /**\n   */\n  function HTMLElementWrapper() {\n    const ctor = /** @type {function(...?):?|undefined} */(\n      /** @type {!HTMLElement} */(this).constructor);\n\n    // Reflect.construct allows us to construct a new HTMLElement without using\n    // `new` (which will always fail because native HTMLElement is a restricted\n    // constructor).\n    return Reflect.construct(HTMLElement, [], ctor);\n  }\n  subClass(Object, HTMLElement, HTMLElementWrapper);\n\n  // Expose the wrapped HTMLElement constructor for everyone to extend from.\n  win.HTMLElement = HTMLElementWrapper;\n}\n\n/**\n * Setups up prototype inheritance\n *\n * @param {!Object} Object\n * @param {!Function} superClass\n * @param {!Function} subClass\n */\nfunction subClass(Object, superClass, subClass) {\n  // Object.getOwnPropertyDescriptor(superClass.prototype, 'constructor')\n  // {value: , writable: true, enumerable: false, configurable: true}\n  subClass.prototype = Object.create(superClass.prototype, {\n    constructor: {\n      // enumerable: false,\n      configurable: true,\n      writable: true,\n      value: subClass,\n    },\n  });\n}\n\n/**\n * Polyfills Custom Elements v1 API. This has 4 modes:\n *\n * 1. Custom elements v1 already supported, using native classes\n * 2. Custom elements v1 already supported, using transpiled classes\n * 3. Custom elements v1 not supported, using native classes\n * 4. Custom elements v1 not supported, using transpiled classes\n *\n * In mode 1, nothing is done. In mode 2, a minimal polyfill is used to support\n * extending the HTMLElement base class. In mode 3 and 4, a full polyfill is\n * done.\n *\n * @param {!Window} win\n * @param {!Function} ctor\n */\nexport function install(win, ctor) {\n  if (isPatched(win)) {\n    return;\n  }\n\n  let install = true;\n  let installWrapper = false;\n\n  if (hasCustomElements(win)) {\n    // If ctor is constructable without new, it's a function. That means it was\n    // compiled down, and we need to do the minimal polyfill because all you\n    // cannot extend HTMLElement without native classes.\n    try {\n      const {Object, Reflect} = win;\n\n      // \"Construct\" ctor using ES5 idioms\n      const instance = Object.create(ctor.prototype);\n      ctor.call(instance);\n\n      // If that succeeded, we're in a transpiled environment\n      // Let's find out if we can wrap HTMLElement and avoid a full patch.\n      installWrapper = !!(Reflect && Reflect.construct);\n    } catch (e) {\n\n      // The ctor threw when we constructed is via ES5, so it's a real class.\n      // We're ok to not install the polyfill.\n      install = false;\n    }\n  }\n\n  if (installWrapper) {\n    wrapHTMLElement(win);\n  } else if (install) {\n    polyfill(win);\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * Polyfill for `document.contains()` method. Notice that according to spec\n * `document.contains` is inclusionary.\n * See https://developer.mozilla.org/en-US/docs/Web/API/Node/contains\n * @param {?Node} node\n * @return {boolean}\n * @this {Node}\n */\nfunction documentContainsPolyfill(node) {\n  // Per spec, \"contains\" method is inclusionary\n  // i.e. `node.contains(node) == true`. However, we still need to test\n  // equality to the document itself.\n  return node == this || this.documentElement.contains(node);\n}\n\n\n/**\n * Polyfills `HTMLDocument.contains` API.\n * @param {!Window} win\n */\nexport function install(win) {\n  // HTMLDocument is undefined in Internet Explorer 10, but it has Document,\n  // so we use that as a fallback.\n  const documentClass = win.HTMLDocument || win.Document;\n  if (!documentClass.prototype.contains) {\n    win.Object.defineProperty(documentClass.prototype, 'contains', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: documentContainsPolyfill,\n    });\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * Polyfill for `DOMTokenList.prototype.toggle(token, opt_force)` method. This\n * is specially important because IE does not support `opt_force` attribute. See\n * https://goo.gl/hgKNYY for details.\n * @param {string} token\n * @param {boolean=} opt_force\n * @this {DOMTokenList}\n * @return {boolean}\n */\nfunction domTokenListTogglePolyfill(token, opt_force) {\n  const remove = opt_force === undefined ? this.contains(token) : !opt_force;\n  if (remove) {\n    this.remove(token);\n    return false;\n  } else {\n    this.add(token);\n    return true;\n  }\n}\n\n\n/**\n * Polyfills `DOMTokenList.prototype.toggle` API in IE.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (isIe(win) && win.DOMTokenList) {\n    win.Object.defineProperty(win.DOMTokenList.prototype, 'toggle', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: domTokenListTogglePolyfill,\n    });\n  }\n}\n\n\n/**\n * Whether the current browser is a IE browser.\n * @param {!Window} win\n * @return {boolean}\n */\nfunction isIe(win) {\n  return /Trident|MSIE|IEMobile/i.test(win.navigator.userAgent);\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Parses the number x and returns its sign. For positive x returns 1, for\n * negative, -1. For 0 and -0, returns 0 and -0 respectively. For any number\n * that parses to NaN, returns NaN.\n *\n * @param {number} x\n * @return {number}\n */\nexport function sign(x) {\n  x = Number(x);\n\n  // If x is 0, -0, or NaN, return it.\n  if (!x) {\n    return x;\n  }\n\n  return x > 0 ? 1 : -1;\n}\n\n\n/**\n * Sets the Math.sign polyfill if it does not exist.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (!win.Math.sign) {\n    win.Object.defineProperty(win.Math, 'sign', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: sign,\n    });\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst {hasOwnProperty} = Object.prototype;\n\n/**\n * Copies values of all enumerable own properties from one or more source\n * objects (provided as extended arguments to the function) to a target object.\n *\n * @param {!Object} target\n * @param {...Object} var_args\n * @return {!Object}\n */\nexport function assign(target, var_args) {\n  if (target == null) {\n    throw new TypeError('Cannot convert undefined or null to object');\n  }\n\n  const output = Object(target);\n  for (let i = 1; i < arguments.length; i++) {\n    const source = arguments[i];\n    if (source != null) {\n      for (const key in source) {\n        if (hasOwnProperty.call(source, key)) {\n          output[key] = source[key];\n        }\n      }\n    }\n  }\n  return output;\n}\n\n\n/**\n * Sets the Object.assign polyfill if it does not exist.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (!win.Object.assign) {\n    win.Object.defineProperty(win.Object, 'assign', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: assign,\n    });\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nimport * as Promise from 'promise-pjs/promise';\n\n/**\n * Sets the Promise polyfill if it does not exist.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (!win.Promise) {\n    win.Promise = /** @type {?} */ (Promise);\n    // In babel the * export is an Object with a default property.\n    // In closure compiler it is the Promise function itself.\n    if (Promise.default) {\n      win.Promise = Promise.default;\n    }\n    // We copy the individual static methods, because closure\n    // compiler flattens the polyfill namespace.\n    win.Promise.resolve = Promise.resolve;\n    win.Promise.reject = Promise.reject;\n    win.Promise.all = Promise.all;\n    win.Promise.race = Promise.race;\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Services} from './services';\nimport {dev} from './log';\nimport {getServicePromise} from './service';\n\n/**\n * A map of services that delay rendering. The key is the name of the service\n * and the value is a DOM query which is used to check if the service is needed\n * in the current document.\n * Do not add a service unless absolutely necessary.\n *\n * \\   \\  /  \\  /   / /   \\     |   _  \\     |  \\ |  | |  | |  \\ |  |  / _____|\n *  \\   \\/    \\/   / /  ^  \\    |  |_)  |    |   \\|  | |  | |   \\|  | |  |  __\n *   \\            / /  /_\\  \\   |      /     |  . `  | |  | |  . `  | |  | |_ |\n *    \\    /\\    / /  _____  \\  |  |\\  \\----.|  |\\   | |  | |  |\\   | |  |__| |\n *     \\__/  \\__/ /__/     \\__\\ | _| `._____||__| \\__| |__| |__| \\__|  \\______|\n *\n * The equivalent of this list is used for server-side rendering (SSR) and any\n * changes made to it must be made in coordination with caches that implement\n * SSR. For more information on SSR see bit.ly/amp-ssr.\n *\n * @const {!Object<string, string>}\n */\nconst SERVICES = {\n  'amp-dynamic-css-classes': '[custom-element=amp-dynamic-css-classes]',\n  'variant': 'amp-experiment',\n  'amp-story': 'amp-story[standalone]',\n};\n\n/**\n * Maximum milliseconds to wait for all extensions to load before erroring.\n * @const\n */\nconst LOAD_TIMEOUT = 3000;\n\n/**\n * Detects any render delaying services that are required on the page, and\n * returns a promise with a timeout.\n * @param {!Window} win\n * @return {!Promise<!Array<*>>} resolves to an Array that has the same length\n *     as the detected render delaying services\n */\nexport function waitForServices(win) {\n  const promises = includedServices(win).map(service => {\n    return Services.timerFor(win).timeoutPromise(\n        LOAD_TIMEOUT,\n        getServicePromise(win, service),\n        `Render timeout waiting for service ${service} to be ready.`\n    );\n  });\n  return Promise.all(promises);\n}\n\n/**\n * Returns true if the page has a render delaying service.\n * @param {!Window} win\n * @return {boolean}\n */\nexport function hasRenderDelayingServices(win) {\n  return includedServices(win).length > 0;\n}\n\n/**\n * Detects which, if any, render-delaying extensions are included on the page.\n * @param {!Window} win\n * @return {!Array<string>}\n */\nexport function includedServices(win) {\n  /** @const {!Document} */\n  const doc = win.document;\n  dev().assert(doc.body);\n\n  return Object.keys(SERVICES).filter(service => {\n    return doc.querySelector(SERVICES[service]);\n  });\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Registration and getter functions for AMP services.\n *\n * Invariant: Service getters never return null for registered services.\n */\n\n// src/polyfills.js must be the first import.\nimport './polyfills'; // eslint-disable-line sort-imports-es6-autofix/sort-imports-es6\n\nimport {Deferred} from './utils/promise';\nimport {dev} from './log';\nimport {toWin} from './types';\n\n\n/**\n * Holds info about a service.\n * - obj: Actual service implementation when available.\n * - promise: Promise for the obj.\n * - resolve: Function to resolve the promise with the object.\n * - context: Argument for ctor, either a window or an ampdoc.\n * - ctor: Function that constructs and returns the service.\n * @typedef {{\n *   obj: (?Object),\n *   promise: (?Promise),\n *   resolve: (?function(!Object)),\n *   context: (?Window|?./service/ampdoc-impl.AmpDoc),\n *   ctor: (?function(new:Object, !Window)|\n *          ?function(new:Object, !./service/ampdoc-impl.AmpDoc)),\n * }}\n */\nlet ServiceHolderDef;\n\n\n/**\n * This interface provides a `dispose` method that will be called by\n * runtime when a service needs to be disposed of.\n * @interface\n */\nexport class Disposable {\n\n  /**\n   * Instructs the service to release any resources it might be holding. Can\n   * be called only once in the lifecycle of a service.\n   */\n  dispose() {}\n}\n\n\n/**\n * This interface provides a `adoptEmbedWindow` method that will be called by\n * runtime for a new embed window.\n * @interface\n */\nexport class EmbeddableService {\n\n  /**\n   * Instructs the service to adopt the embed window and add any necessary\n   * listeners and resources.\n   * @param {!Window} unusedEmbedWin\n   */\n  adoptEmbedWindow(unusedEmbedWin) {}\n}\n\n\n/**\n * Returns a service with the given id. Assumes that it has been registered\n * already.\n * @param {!Window} win\n * @param {string} id\n * @param {boolean=} opt_fallbackToTopWin\n * @return {Object} The service.\n */\nexport function getExistingServiceInEmbedScope(win, id, opt_fallbackToTopWin) {\n  // First, try to resolve via local (embed) window.\n  const local = getLocalExistingServiceForEmbedWinOrNull(win, id);\n  if (local) {\n    return local;\n  }\n  if (opt_fallbackToTopWin) {\n    return getService(win, id);\n  }\n  return null;\n}\n\n/**\n * Returns a service with the given id. Assumes that it has been constructed\n * already.\n *\n * Unlike most service getters, passing `Node` is necessary for some FIE-scope\n * services since sometimes we only have the FIE Document for context.\n *\n * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n * @param {string} id\n * @param {boolean=} opt_fallbackToTopWin\n * @return {Object} The service.\n */\nexport function getExistingServiceForDocInEmbedScope(\n  nodeOrDoc, id, opt_fallbackToTopWin) {\n  // First, try to resolve via local (embed) window.\n  if (nodeOrDoc.nodeType) {\n    // If a node is passed, try to resolve via this node.\n    const win = toWin(/** @type {!Document} */ (\n      nodeOrDoc.ownerDocument || nodeOrDoc).defaultView);\n    const local = getLocalExistingServiceForEmbedWinOrNull(win, id);\n    if (local) {\n      return local;\n    }\n  }\n  // If an ampdoc is passed or fallback is allowed, continue resolving.\n  if (!nodeOrDoc.nodeType || opt_fallbackToTopWin) {\n    return getServiceForDocDeprecated(nodeOrDoc, id);\n  }\n  return null;\n}\n\n/**\n * Installs a service override on amp-doc level.\n * @param {!Window} embedWin\n * @param {string} id\n * @param {!Object} service The service.\n */\nexport function installServiceInEmbedScope(embedWin, id, service) {\n  const topWin = getTopWindow(embedWin);\n  dev().assert(embedWin != topWin,\n      'Service override can only be installed in embed window: %s', id);\n  dev().assert(!getLocalExistingServiceForEmbedWinOrNull(embedWin, id),\n      'Service override has already been installed: %s', id);\n  registerServiceInternal(embedWin, embedWin, id, () => service);\n  getServiceInternal(embedWin, id); // Force service to build.\n}\n\n/**\n * @param {!Window} embedWin\n * @param {string} id\n * @return {?Object}\n */\nfunction getLocalExistingServiceForEmbedWinOrNull(embedWin, id) {\n  // Note that this method currently only resolves against the given window.\n  // It does not try to go all the way up the parent window chain. We can change\n  // this in the future, but for now this gives us a better performance.\n  const topWin = getTopWindow(embedWin);\n  if (embedWin != topWin && isServiceRegistered(embedWin, id)) {\n    return getServiceInternal(embedWin, id);\n  } else {\n    return null;\n  }\n}\n\n/**\n * Registers a service given a class to be used as implementation.\n * @param {!Window} win\n * @param {string} id of the service.\n * @param {function(new:Object, !Window)} constructor\n * @param {boolean=} opt_instantiate Whether to immediately create the service\n */\nexport function registerServiceBuilder(win,\n  id,\n  constructor,\n  opt_instantiate) {\n  win = getTopWindow(win);\n  registerServiceInternal(win, win, id, constructor);\n  if (opt_instantiate) {\n    getServiceInternal(win, id);\n  }\n}\n\n\n/**\n * Returns a service and registers it given a class to be used as\n * implementation.\n * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n * @param {string} id of the service.\n * @param {function(new:Object, !./service/ampdoc-impl.AmpDoc)} constructor\n * @param {boolean=} opt_instantiate Whether to immediately create the service\n */\nexport function registerServiceBuilderForDoc(nodeOrDoc,\n  id,\n  constructor,\n  opt_instantiate) {\n  const ampdoc = getAmpdoc(nodeOrDoc);\n  const holder = getAmpdocServiceHolder(ampdoc);\n  registerServiceInternal(holder, ampdoc, id, constructor);\n  if (opt_instantiate) {\n    getServiceInternal(holder, id);\n  }\n}\n\n\n/**\n * Returns a service for the given id and window (a per-window singleton). Users\n * should typically wrap this as a special purpose function (e.g.\n * `Services.vsyncFor(win)`) for type safety and because the factory should not\n * be passed around.\n * @param {!Window} win\n * @param {string} id of the service.\n * @template T\n * @return {T}\n */\nexport function getService(win, id) {\n  win = getTopWindow(win);\n  return getServiceInternal(win, id);\n}\n\n\n/**\n * Returns a promise for a service for the given id and window. Also expects an\n * element that has the actual implementation. The promise resolves when the\n * implementation loaded. Users should typically wrap this as a special purpose\n * function (e.g. `Services.vsyncFor(win)`) for type safety and because the\n * factory should not be passed around.\n * @param {!Window} win\n * @param {string} id of the service.\n * @return {!Promise<!Object>}\n */\nexport function getServicePromise(win, id) {\n  return getServicePromiseInternal(win, id);\n}\n\n\n/**\n * Returns a service or null with the given id.\n * @param {!Window} win\n * @param {string} id\n * @return {?Object} The service.\n */\nexport function getExistingServiceOrNull(win, id) {\n  win = getTopWindow(win);\n  if (isServiceRegistered(win, id)) {\n    return getServiceInternal(win, id);\n  } else {\n    return null;\n  }\n}\n\n\n/**\n * Like getServicePromise but returns null if the service was never registered.\n * @param {!Window} win\n * @param {string} id\n * @return {?Promise<!Object>}\n */\nexport function getServicePromiseOrNull(win, id) {\n  return getServicePromiseOrNullInternal(win, id);\n}\n\n\n/**\n * Returns a service for the given id and ampdoc (a per-ampdoc singleton).\n * Expects service `id` to be registered.\n * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n * @param {string} id\n * @return {T}\n * @template T\n */\nexport function getServiceForDoc(elementOrAmpDoc, id) {\n  const ampdoc = getAmpdoc(elementOrAmpDoc);\n  const holder = getAmpdocServiceHolder(ampdoc);\n  return getServiceInternal(holder, id);\n}\n\n\n/**\n * tl;dr -- Use getServiceForDoc() instead of this.\n *\n * Privileged variant of getServiceForDoc() that accepts non-element params,\n * e.g. window.document. This is currently necessary for doc-level services\n * used in startup, e.g. Chunks. Eventually we want to remove this function\n * and have callers find the appropriate AmpDoc and use getServiceForDoc().\n *\n * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n * @param {string} id\n * @return {T}\n * @template T\n */\nexport function getServiceForDocDeprecated(nodeOrDoc, id) {\n  const ampdoc = getAmpdoc(nodeOrDoc);\n  const holder = getAmpdocServiceHolder(ampdoc);\n  return getServiceInternal(holder, id);\n}\n\n\n/**\n * Returns a promise for a service for the given id and ampdoc. Also expects\n * a service that has the actual implementation. The promise resolves when\n * the implementation loaded.\n * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n * @param {string} id\n * @return {!Promise<!Object>}\n */\nexport function getServicePromiseForDoc(elementOrAmpDoc, id) {\n  return getServicePromiseInternal(\n      getAmpdocServiceHolder(elementOrAmpDoc), id);\n}\n\n\n/**\n * Like getServicePromiseForDoc but returns null if the service was never\n * registered for this ampdoc.\n * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n * @param {string} id\n * @return {?Promise<!Object>}\n */\nexport function getServicePromiseOrNullForDoc(elementOrAmpDoc, id) {\n  return getServicePromiseOrNullInternal(\n      getAmpdocServiceHolder(elementOrAmpDoc), id);\n}\n\n/**\n * Set the parent and top windows on a child window (friendly iframe).\n * @param {!Window} win\n * @param {!Window} parentWin\n */\nexport function setParentWindow(win, parentWin) {\n  win.__AMP_PARENT = parentWin;\n  win.__AMP_TOP = getTopWindow(parentWin);\n}\n\n\n/**\n * Returns the parent window for a child window (friendly iframe).\n * @param {!Window} win\n * @return {!Window}\n */\nexport function getParentWindow(win) {\n  return win.__AMP_PARENT || win;\n}\n\n\n/**\n * Returns the top window where AMP Runtime is installed for a child window\n * (friendly iframe).\n * @param {!Window} win\n * @return {!Window}\n */\nexport function getTopWindow(win) {\n  return win.__AMP_TOP || win;\n}\n\n\n/**\n * Returns the parent \"friendly\" iframe if the node belongs to a child window.\n * @param {!Node} node\n * @param {!Window} topWin\n * @return {?HTMLIFrameElement}\n */\nexport function getParentWindowFrameElement(node, topWin) {\n  const childWin = (node.ownerDocument || node).defaultView;\n  if (childWin && childWin != topWin && getTopWindow(childWin) == topWin) {\n    try {\n      return /** @type {?HTMLIFrameElement} */ (childWin.frameElement);\n    } catch (e) {\n      // Ignore the error.\n    }\n  }\n  return null;\n}\n\n\n/**\n * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n * @return {!./service/ampdoc-impl.AmpDoc}\n */\nexport function getAmpdoc(nodeOrDoc) {\n  if (nodeOrDoc.nodeType) {\n    const win = toWin(/** @type {!Document} */ (\n      nodeOrDoc.ownerDocument || nodeOrDoc).defaultView);\n    return getAmpdocService(win).getAmpDoc(/** @type {!Node} */ (nodeOrDoc));\n  }\n  return /** @type {!./service/ampdoc-impl.AmpDoc} */ (nodeOrDoc);\n}\n\n\n/**\n * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n * @return {!./service/ampdoc-impl.AmpDoc|!Window}\n */\nfunction getAmpdocServiceHolder(nodeOrDoc) {\n  const ampdoc = getAmpdoc(nodeOrDoc);\n  return ampdoc.isSingleDoc() ? ampdoc.win : ampdoc;\n}\n\n\n/**\n * This is essentially a duplicate of `ampdoc.js`, but necessary to avoid\n * circular dependencies.\n * @param {!Window} win\n * @return {!./service/ampdoc-impl.AmpDocService}\n */\nfunction getAmpdocService(win) {\n  return /** @type {!./service/ampdoc-impl.AmpDocService} */ (\n    getService(win, 'ampdoc'));\n}\n\n\n/**\n * Get service `id` from `holder`. Assumes the service\n * has already been registered.\n * @param {!Object} holder Object holding the service instance.\n * @param {string} id of the service.\n * @return {Object}\n * @template T\n */\nfunction getServiceInternal(holder, id) {\n  dev().assert(isServiceRegistered(holder, id),\n      `Expected service ${id} to be registered`);\n  const services = getServices(holder);\n  const s = services[id];\n  if (!s.obj) {\n    dev().assert(s.ctor, `Service ${id} registered without ctor nor impl.`);\n    dev().assert(s.context, `Service ${id} registered without context.`);\n    s.obj = new s.ctor(s.context);\n    dev().assert(s.obj, `Service ${id} constructed to null.`);\n    s.ctor = null;\n    s.context = null;\n    // The service may have been requested already, in which case we have a\n    // pending promise we need to fulfill.\n    if (s.resolve) {\n      s.resolve(s.obj);\n    }\n  }\n  return s.obj;\n}\n\n/**\n * @param {!Object} holder Object holding the service instance.\n * @param {!Window|!./service/ampdoc-impl.AmpDoc} context Win or AmpDoc.\n * @param {string} id of the service.\n * @param {?function(new:Object, !Window)|?function(new:Object, !./service/ampdoc-impl.AmpDoc)} ctor Constructor function to new the service. Called with context.\n */\nfunction registerServiceInternal(holder, context, id, ctor) {\n  const services = getServices(holder);\n  let s = services[id];\n\n  if (!s) {\n    s = services[id] = {\n      obj: null,\n      promise: null,\n      resolve: null,\n      context: null,\n      ctor: null,\n    };\n  }\n\n  if (s.ctor || s.obj) {\n    // Service already registered.\n    return;\n  }\n\n  s.ctor = ctor;\n  s.context = context;\n\n  // The service may have been requested already, in which case there is a\n  // pending promise that needs to fulfilled.\n  if (s.resolve) {\n    // getServiceInternal will resolve the promise.\n    getServiceInternal(holder, id);\n  }\n}\n\n/**\n * @param {!Object} holder\n * @param {string} id of the service.\n * @return {!Promise<!Object>}\n */\nfunction getServicePromiseInternal(holder, id) {\n  const cached = getServicePromiseOrNullInternal(holder, id);\n  if (cached) {\n    return cached;\n  }\n  // Service is not registered.\n\n  // TODO(@cramforce): Add a check that if the element is eventually registered\n  // that the service is actually provided and this promise resolves.\n  const deferred = new Deferred();\n  const {promise, resolve} = deferred;\n\n  const services = getServices(holder);\n  services[id] = {\n    obj: null,\n    promise,\n    resolve,\n    context: null,\n    ctor: null,\n  };\n  return promise;\n}\n\n\n/**\n * Returns a promise for service `id` if the service has been registered\n * on `holder`.\n * @param {!Object} holder\n * @param {string} id of the service.\n * @return {?Promise<!Object>}\n */\nfunction getServicePromiseOrNullInternal(holder, id) {\n  const services = getServices(holder);\n  const s = services[id];\n  if (s) {\n    if (s.promise) {\n      return s.promise;\n    } else {\n      // Instantiate service if not already instantiated.\n      getServiceInternal(holder, id);\n      return s.promise = Promise.resolve(/** @type {!Object} */ (s.obj));\n    }\n  }\n  return null;\n}\n\n\n/**\n * Returns the object that holds the services registered in a holder.\n * @param {!Object} holder\n * @return {!Object<string,!ServiceHolderDef>}\n */\nfunction getServices(holder) {\n  let {services} = holder;\n  if (!services) {\n    services = holder.services = {};\n  }\n  return services;\n}\n\n\n/**\n * Whether the specified service implements `Disposable` interface.\n * @param {!Object} service\n * @return {boolean}\n */\nexport function isDisposable(service) {\n  return typeof service.dispose == 'function';\n}\n\n\n/**\n * Asserts that the specified service implements `Disposable` interface and\n * typecasts the instance to `Disposable`.\n * @param {!Object} service\n * @return {!Disposable}\n */\nexport function assertDisposable(service) {\n  dev().assert(isDisposable(service), 'required to implement Disposable');\n  return /** @type {!Disposable} */ (service);\n}\n\n\n/**\n * Disposes all disposable (implements `Disposable` interface) services in\n * ampdoc scope.\n * @param {!./service/ampdoc-impl.AmpDoc} ampdoc\n */\nexport function disposeServicesForDoc(ampdoc) {\n  disposeServicesInternal(ampdoc);\n}\n\n\n/**\n * Disposes all disposable (implements `Disposable` interface) services in\n * embed scope.\n * @param {!Window} embedWin\n */\nexport function disposeServicesForEmbed(embedWin) {\n  disposeServicesInternal(embedWin);\n}\n\n\n/**\n * @param {!Object} holder Object holding the service instances.\n */\nfunction disposeServicesInternal(holder) {\n  // TODO(dvoytenko): Consider marking holder as destroyed for later-arriving\n  // service to be canceled automatically.\n  const services = getServices(holder);\n  for (const id in services) {\n    if (!Object.prototype.hasOwnProperty.call(services, id)) {\n      continue;\n    }\n    const serviceHolder = services[id];\n    if (serviceHolder.obj) {\n      disposeServiceInternal(id, serviceHolder.obj);\n    } else if (serviceHolder.promise) {\n      serviceHolder.promise.then(\n          instance => disposeServiceInternal(id, instance));\n    }\n  }\n}\n\n\n/**\n * @param {string} id\n * @param {!Object} service\n */\nfunction disposeServiceInternal(id, service) {\n  if (!isDisposable(service)) {\n    return;\n  }\n  try {\n    assertDisposable(service).dispose();\n  } catch (e) {\n    // Ensure that a failure to dispose a service does not disrupt other\n    // services.\n    dev().error('SERVICE', 'failed to dispose service', id, e);\n  }\n}\n\n\n/**\n * Whether the specified service implements `EmbeddableService` interface.\n * @param {!Object} service\n * @return {boolean}\n */\nexport function isEmbeddable(service) {\n  return typeof service.adoptEmbedWindow == 'function';\n}\n\n\n/**\n * Adopts an embeddable (implements `EmbeddableService` interface) service\n * in embed scope.\n * @param {!Window} embedWin\n * @param {string} serviceId\n */\nexport function adoptServiceForEmbed(embedWin, serviceId) {\n  const adopted = adoptServiceForEmbedIfEmbeddable(embedWin, serviceId);\n  dev().assert(adopted, `Service ${serviceId} not found on parent ` +\n      'or doesn\\'t implement EmbeddableService.');\n}\n\n\n/**\n * Adopts an embeddable (implements `EmbeddableService` interface) service\n * in embed scope.\n * @param {!Window} embedWin\n * @param {string} serviceId\n * @return {boolean}\n */\nexport function adoptServiceForEmbedIfEmbeddable(embedWin, serviceId) {\n  const frameElement = /** @type {!Node} */ (dev().assert(\n      embedWin.frameElement,\n      'frameElement not found for embed'));\n  const ampdoc = getAmpdoc(frameElement);\n  const holder = getAmpdocServiceHolder(ampdoc);\n  if (!isServiceRegistered(holder, serviceId)) {\n    return false;\n  }\n  const service = getServiceForDocDeprecated(frameElement, serviceId);\n  if (!isEmbeddable(service)) {\n    return false;\n  }\n  service.adoptEmbedWindow(embedWin);\n  return true;\n}\n\n\n/**\n * Resets a single service, so it gets recreated on next getService invocation.\n * @param {!Object} holder\n * @param {string} id of the service.\n */\nexport function resetServiceForTesting(holder, id) {\n  if (holder.services) {\n    holder.services[id] = null;\n  }\n}\n\n/**\n * @param {!Object} holder Object holding the service instance.\n * @param {string} id of the service.\n * @return {boolean}\n */\nfunction isServiceRegistered(holder, id) {\n  const service = holder.services && holder.services[id];\n  // All registered services must have an implementation or a constructor.\n  return !!(service && (service.ctor || service.obj));\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {dev} from '../log';\nimport {isFiniteNumber} from '../types';\nimport {loadPromise} from '../event-helper';\n\n/** @typedef {string|number|boolean|undefined|null} */\nlet ResolverReturnDef;\n\n/** @typedef {function(...*):ResolverReturnDef} */\nexport let SyncResolverDef;\n\n/** @typedef {function(...*):!Promise<ResolverReturnDef>} */\nexport let AsyncResolverDef;\n\n/** @typedef {{sync: SyncResolverDef, async: AsyncResolverDef}} */\nlet ReplacementDef;\n\n\n/**\n * Returns navigation timing information based on the start and end events.\n * The data for the timing events is retrieved from performance.timing API.\n * If start and end events are both given, the result is the difference between\n * the two. If only start event is given, the result is the timing value at\n * start event.\n * @param {!Window} win\n * @param {string} startEvent\n * @param {string=} endEvent\n * @return {!Promise<ResolverReturnDef>}\n */\nexport function getTimingDataAsync(win, startEvent, endEvent) {\n  return loadPromise(win).then(() => {\n    return getTimingDataSync(win, startEvent, endEvent);\n  });\n}\n\n/**\n * Returns navigation timing information based on the start and end events.\n * The data for the timing events is retrieved from performance.timing API.\n * If start and end events are both given, the result is the difference between\n * the two. If only start event is given, the result is the timing value at\n * start event. Enforces synchronous evaluation.\n * @param {!Window} win\n * @param {string} startEvent\n * @param {string=} endEvent\n * @return {ResolverReturnDef} undefined if API is not available, empty string\n *    if it is not yet available, or value as string\n */\nexport function getTimingDataSync(win, startEvent, endEvent) {\n  const timingInfo = win['performance'] && win['performance']['timing'];\n  if (!timingInfo || timingInfo['navigationStart'] == 0) {\n    // Navigation timing API is not supported.\n    return;\n  }\n\n  const metric = (endEvent === undefined)\n    ? timingInfo[startEvent]\n    : timingInfo[endEvent] - timingInfo[startEvent];\n\n  if (!isFiniteNumber(metric) || metric < 0) {\n    // The metric is not supported.\n    return;\n  } else {\n    return metric;\n  }\n}\n\n/**\n * Returns navigation information from the current browsing context.\n * @param {!Window} win\n * @param {string} attribute\n * @return {ResolverReturnDef}\n * @private\n */\nexport function getNavigationData(win, attribute) {\n  const navigationInfo = win['performance'] &&\n    win['performance']['navigation'];\n  if (!navigationInfo || navigationInfo[attribute] === undefined) {\n    // PerformanceNavigation interface is not supported or attribute is not\n    // implemented.\n    return;\n  }\n  return navigationInfo[attribute];\n}\n\n\n/**\n * A class to provide variable substitution related features. Extend this class\n * and override initialize() to add more supported variables.\n */\nexport class VariableSource {\n  /**\n   * @param {!./ampdoc-impl.AmpDoc} ampdoc\n   */\n  constructor(ampdoc) {\n    /** @protected @const {!./ampdoc-impl.AmpDoc} */\n    this.ampdoc = ampdoc;\n\n    /** @private {!RegExp|undefined} */\n    this.replacementExpr_ = undefined;\n\n    /** @private {!RegExp|undefined} */\n    this.replacementExprV2_ = undefined;\n\n    /** @private @const {!Object<string, !ReplacementDef>} */\n    this.replacements_ = Object.create(null);\n\n    /** @private {boolean} */\n    this.initialized_ = false;\n\n    this.getUrlMacroWhitelist_();\n  }\n\n  /**\n   * Lazily initialize the default replacements.\n   * @private\n   */\n  initialize_() {\n    this.initialize();\n    this.initialized_ = true;\n  }\n\n  /**\n   * Override this method to set all the variables supported by derived class.\n   */\n  initialize() {\n    // Needs to be implemented by derived classes.\n  }\n\n  /**\n   * Method exists to assist stubbing in tests.\n   * @param {string} name\n   * @return {!ReplacementDef}\n   */\n  get(name) {\n    if (!this.initialized_) {\n      this.initialize_();\n    }\n\n    return this.replacements_[name];\n  }\n\n  /**\n   * Sets a synchronous value resolver for the variable with the specified name.\n   * The value resolver may optionally take an extra parameter.\n   * Can be called in conjunction with setAsync to allow for additional\n   * asynchronous resolver where expand will use async and expandSync the sync\n   * version.\n   * @param {string} varName\n   * @param {!SyncResolverDef} syncResolver\n   * @return {!VariableSource}\n   */\n  set(varName, syncResolver) {\n    dev().assert(varName.indexOf('RETURN') == -1);\n    this.replacements_[varName] =\n        this.replacements_[varName] || {sync: undefined, async: undefined};\n    this.replacements_[varName].sync = syncResolver;\n    this.replacementExpr_ = undefined;\n    this.replacementExprV2_ = undefined;\n    return this;\n  }\n\n  /**\n   * Sets an async value resolver for the variable with the specified name.\n   * The value resolver may optionally take an extra parameter.\n   * Can be called in conjuction with setAsync to allow for additional\n   * asynchronous resolver where expand will use async and expandSync the sync\n   * version.\n   * @param {string} varName\n   * @param {!AsyncResolverDef} asyncResolver\n   * @return {!VariableSource}\n   */\n  setAsync(varName, asyncResolver) {\n    dev().assert(varName.indexOf('RETURN') == -1);\n    this.replacements_[varName] =\n        this.replacements_[varName] || {sync: undefined, async: undefined};\n    this.replacements_[varName].async = asyncResolver;\n    this.replacementExpr_ = undefined;\n    this.replacementExprV2_ = undefined;\n    return this;\n  }\n\n  /**\n   * Helper method to set both sync and async resolvers.\n   * @param {string} varName\n   * @param {!SyncResolverDef} syncResolver\n   * @param {!AsyncResolverDef} asyncResolver\n   * @return {!VariableSource}\n   */\n  setBoth(varName, syncResolver, asyncResolver) {\n    return this.set(varName, syncResolver).setAsync(varName, asyncResolver);\n  }\n\n  /**\n   * Returns a Regular expression that can be used to detect all the variables\n   * in a template.\n   * @param {!Object<string, *>=} opt_bindings\n   * @param {boolean=} isV2 Flag to ignore capture of args.\n   * @param {!Object<string, boolean>=} opt_whiteList Optional white list of names\n   *   that can be substituted.\n   */\n  getExpr(opt_bindings, isV2, opt_whiteList) {\n    if (!this.initialized_) {\n      this.initialize_();\n    }\n\n    const additionalKeys = opt_bindings ? Object.keys(opt_bindings) : null;\n    if (additionalKeys && additionalKeys.length > 0) {\n      const allKeys = Object.keys(this.replacements_);\n      additionalKeys.forEach(key => {\n        if (this.replacements_[key] === undefined) {\n          allKeys.push(key);\n        }\n      });\n      return this.buildExpr_(allKeys, isV2, opt_whiteList);\n    }\n    if (!this.replacementExpr_ && !isV2) {\n      this.replacementExpr_ = this.buildExpr_(\n          Object.keys(this.replacements_));\n    }\n    // sometimes the v1 expand will be called before the v2\n    // so we need to cache both versions\n    if (!this.replacementExprV2_ && isV2) {\n      this.replacementExprV2_ = this.buildExpr_(\n          Object.keys(this.replacements_), isV2, opt_whiteList);\n    }\n\n    return isV2 ? this.replacementExprV2_ :\n      this.replacementExpr_;\n  }\n\n  /**\n   * @param {!Array<string>} keys\n   * @param {boolean=} isV2 flag to ignore capture of args\n   * @param {!Object<string, boolean>=} opt_whiteList Optional white list of names\n   *   that can be substituted.\n   * @return {!RegExp}\n   * @private\n   */\n  buildExpr_(keys, isV2, opt_whiteList) {\n    // If a whitelist is present, the keys must belong to the whitelist.\n    // We filter the keys one last time to ensure no unwhitelisted key is\n    // allowed.\n    if (this.getUrlMacroWhitelist_()) {\n      keys = keys.filter(key => this.getUrlMacroWhitelist_().includes(key));\n    }\n    // If a whitelist is passed into the call to GlobalVariableSource.expand_\n    // then we only resolve values contained in the whitelist.\n    if (opt_whiteList) {\n      keys = keys.filter(key => opt_whiteList[key]);\n    }\n    // The keys must be sorted to ensure that the longest keys are considered\n    // first. This avoids a problem where a RANDOM conflicts with RANDOM_ONE.\n    keys.sort((s1, s2) => s2.length - s1.length);\n    // Keys that start with a `$` need to be escaped so that they do not\n    // interfere with the regex that is constructed.\n    const escaped = keys.map(key => {\n      if (key[0] === '$') {\n        return '\\\\' + key;\n      }\n      return key;\n    });\n\n    const all = escaped.join('|');\n    // Match the given replacement patterns, as well as optionally\n    // arguments to the replacement behind it in parentheses.\n    // Example string that match\n    // FOO_BAR\n    // FOO_BAR(arg1)\n    // FOO_BAR(arg1,arg2)\n    // FOO_BAR(arg1, arg2)\n    let regexStr = '\\\\$?(' + all + ')';\n    // ignore the capturing of arguments in new parser\n    if (!isV2) {\n      regexStr += '(?:\\\\(((?:\\\\s*[0-9a-zA-Z-_.]*\\\\s*(?=,|\\\\)),?)*)\\\\s*\\\\))?';\n    }\n    return new RegExp(regexStr, 'g');\n  }\n\n  /**\n   * @return {?Array<string>} The whitelist of allowed AMP variables. (if provided in\n   *     a meta tag).\n   * @private\n   */\n  getUrlMacroWhitelist_() {\n    if (this.variableWhitelist_) {\n      return this.variableWhitelist_;\n    }\n\n    const {head} = this.ampdoc.getRootNode();\n    if (!head) {\n      return null;\n    }\n\n    // A meta[name=\"amp-allowed-url-macros\"] tag, if present,\n    // contains, in its content attribute, a whitelist of variable substitution.\n    const meta =\n      head.querySelector('meta[name=\"amp-allowed-url-macros\"]');\n    if (!meta) {\n      return null;\n    }\n\n    /**\n     * The whitelist of variables allowed for variable substitution.\n     * @private {?Array<string>}\n     */\n    this.variableWhitelist_ = meta.getAttribute('content').split(',')\n        .map(variable => variable.trim());\n    return this.variableWhitelist_;\n  }\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  getAmpdoc,\n  getExistingServiceForDocInEmbedScope,\n  getExistingServiceOrNull,\n  getService,\n  getServiceForDoc,\n  getServiceForDocDeprecated,\n  getServicePromiseForDoc,\n} from './service';\nimport {\n  getElementServiceForDoc,\n  getElementServiceIfAvailable,\n  getElementServiceIfAvailableForDoc,\n  getElementServiceIfAvailableForDocInEmbedScope,\n} from './element-service';\n\n/** @typedef {!../extensions/amp-subscriptions/0.1/amp-subscriptions.SubscriptionService} */\nexport let SubscriptionService;\n\nexport class Services {\n  /**\n   * Hint: Add extensions folder path to compile.js with\n   * warnings cannot find modules.\n   */\n\n  /**\n   * Returns a promise for the Access service.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!../extensions/amp-access/0.1/amp-access.AccessService>}\n   */\n  static accessServiceForDoc(elementOrAmpDoc) {\n    return (/** @type {!Promise<!../extensions/amp-access/0.1/amp-access.AccessService>} */ (\n      getElementServiceForDoc(elementOrAmpDoc, 'access', 'amp-access')));\n  }\n\n  /**\n   * Returns a promise for the Access service or a promise for null if the\n   * service is not available on the current page.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<?../extensions/amp-access/0.1/amp-access.AccessService>}\n   */\n  static accessServiceForDocOrNull(elementOrAmpDoc) {\n    return (/** @type {!Promise<?../extensions/amp-access/0.1/amp-access.AccessService>} */ (\n      getElementServiceIfAvailableForDoc(elementOrAmpDoc, 'access',\n          'amp-access')));\n  }\n\n  /**\n   * Returns a promise for the Subscriptions service.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!SubscriptionService>}\n   */\n  static subscriptionsServiceForDoc(elementOrAmpDoc) {\n    return (/** @type {!Promise<!SubscriptionService>} */ (\n      getElementServiceForDoc(elementOrAmpDoc, 'subscriptions',\n          'amp-subscriptions')));\n  }\n\n  /**\n   * Returns a promise for the Subscriptions service.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<?SubscriptionService>}\n   */\n  static subscriptionsServiceForDocOrNull(elementOrAmpDoc) {\n    return (/** @type {!Promise<?SubscriptionService>} */ (\n      getElementServiceIfAvailableForDoc(elementOrAmpDoc, 'subscriptions',\n          'amp-subscriptions')));\n  }\n\n  /**\n   * Unlike most service getters, passing `Node` is necessary for some FIE-scope\n   * services since sometimes we only have the FIE Document for context.\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/action-impl.ActionService}\n   */\n  static actionServiceForDoc(nodeOrDoc) {\n    return /** @type {!./service/action-impl.ActionService} */ (\n      getExistingServiceForDocInEmbedScope(\n          nodeOrDoc, 'action', /* opt_fallbackToTopWin */ true));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!Activity>}\n   */\n  static activityForDoc(elementOrAmpDoc) {\n    return /** @type {!Promise<!Activity>} */ (\n      getElementServiceForDoc(elementOrAmpDoc, 'activity', 'amp-analytics'));\n  }\n\n  /**\n   * Returns the global instance of the `AmpDocService` service that can be\n   * used to resolve an ampdoc for any node: either in the single-doc or\n   * shadow-doc environment.\n   * @param {!Window} window\n   * @return {!./service/ampdoc-impl.AmpDocService}\n   */\n  static ampdocServiceFor(window) {\n    return /** @type {!./service/ampdoc-impl.AmpDocService} */ (\n      getService(window, 'ampdoc'));\n  }\n\n  /**\n   * Returns the AmpDoc for the specified context node.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!./service/ampdoc-impl.AmpDoc}\n   */\n  static ampdoc(elementOrAmpDoc) {\n    return getAmpdoc(elementOrAmpDoc);\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @param {boolean=} loadAnalytics\n   * @return {!Promise<!../extensions/amp-analytics/0.1/instrumentation.InstrumentationService>}\n   */\n  static analyticsForDoc(elementOrAmpDoc, loadAnalytics = false) {\n    if (loadAnalytics) {\n      // Get Extensions service and force load analytics extension.\n      const ampdoc = getAmpdoc(elementOrAmpDoc);\n      Services.extensionsFor(ampdoc.win)./*OK*/installExtensionForDoc(\n          ampdoc, 'amp-analytics');\n    }\n    return /** @type {!Promise<!../extensions/amp-analytics/0.1/instrumentation.InstrumentationService>} */ (\n      getElementServiceForDoc(elementOrAmpDoc, 'amp-analytics-instrumentation',\n          'amp-analytics'));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<?../extensions/amp-analytics/0.1/instrumentation.InstrumentationService>}\n   */\n  static analyticsForDocOrNull(elementOrAmpDoc) {\n    return /** @type {!Promise<?../extensions/amp-analytics/0.1/instrumentation.InstrumentationService>} */ (\n      getElementServiceIfAvailableForDoc(elementOrAmpDoc,\n          'amp-analytics-instrumentation', 'amp-analytics'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/batched-xhr-impl.BatchedXhr}\n   */\n  static batchedXhrFor(window) {\n    return /** @type {!./service/batched-xhr-impl.BatchedXhr} */ (\n      getService(window, 'batched-xhr'));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<?../extensions/amp-bind/0.1/bind-impl.Bind>}\n   */\n  static bindForDocOrNull(elementOrAmpDoc) {\n    return /** @type {!Promise<?../extensions/amp-bind/0.1/bind-impl.Bind>} */ (\n      getElementServiceIfAvailableForDocInEmbedScope(\n          elementOrAmpDoc, 'bind', 'amp-bind'));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!./service/cid-impl.Cid>}\n   */\n  static cidForDoc(elementOrAmpDoc) {\n    return /** @type {!Promise<!./service/cid-impl.Cid>} */ (\n      getServicePromiseForDoc(elementOrAmpDoc, 'cid'));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!./service/navigation.Navigation}\n   */\n  static navigationForDoc(elementOrAmpDoc) {\n    return /** @type {!./service/navigation.Navigation} */ (\n      getServiceForDoc(elementOrAmpDoc, 'navigation'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/crypto-impl.Crypto}\n   */\n  static cryptoFor(window) {\n    return (/** @type {!./service/crypto-impl.Crypto} */ (\n      getService(window, 'crypto')));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!./service/document-info-impl.DocumentInfoDef} Info about the doc\n   */\n  static documentInfoForDoc(elementOrAmpDoc) {\n    return /** @type {!./service/document-info-impl.DocInfo} */ (\n      getServiceForDoc(elementOrAmpDoc, 'documentInfo')).get();\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/document-state.DocumentState}\n   */\n  static documentStateFor(window) {\n    return getService(window, 'documentState');\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/extensions-impl.Extensions}\n   */\n  static extensionsFor(window) {\n    return /** @type {!./service/extensions-impl.Extensions} */ (\n      getService(window, 'extensions'));\n  }\n\n  /**\n   * Returns service implemented in service/history-impl.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!./service/history-impl.History}\n   */\n  static historyForDoc(elementOrAmpDoc) {\n    return /** @type {!./service/history-impl.History} */ (\n      getServiceForDoc(elementOrAmpDoc, 'history'));\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {!./input.Input}\n   */\n  static inputFor(win) {\n    return getService(win, 'input');\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!./service/layers-impl.LayoutLayers}\n   */\n  static layersForDoc(elementOrAmpDoc) {\n    return /** @type {!./service/layers-impl.LayoutLayers} */ (\n      getServiceForDoc(elementOrAmpDoc, 'layers'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/performance-impl.Performance}\n   */\n  static performanceFor(window) {\n    return /** @type {!./service/performance-impl.Performance}*/ (\n      getService(window, 'performance'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/performance-impl.Performance}\n   */\n  static performanceForOrNull(window) {\n    return /** @type {!./service/performance-impl.Performance}*/ (\n      getExistingServiceOrNull(window, 'performance'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/platform-impl.Platform}\n   */\n  static platformFor(window) {\n    return /** @type {!./service/platform-impl.Platform} */ (\n      getService(window, 'platform'));\n  }\n\n  /**\n   * Uses getServiceForDocDeprecated() since Resources is a startup service.\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/resources-impl.Resources}\n   */\n  static resourcesForDoc(nodeOrDoc) {\n    return /** @type {!./service/resources-impl.Resources} */ (\n      getServiceForDocDeprecated(nodeOrDoc, 'resources'));\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {?Promise<?{incomingFragment: string, outgoingFragment: string}>}\n   */\n  static shareTrackingForOrNull(win) {\n    return (/** @type {!Promise<?{incomingFragment: string, outgoingFragment: string}>} */ (\n      getElementServiceIfAvailable(win, 'share-tracking',\n          'amp-share-tracking', true)));\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {?Promise<?../extensions/amp-story/1.0/variable-service.StoryVariableDef>}\n   */\n  static storyVariableServiceForOrNull(win) {\n    return (\n    /** @type {!Promise<?../extensions/amp-story/1.0/variable-service.StoryVariableDef>} */\n      (getElementServiceIfAvailable(win, 'story-variable', 'amp-story',\n          true)));\n  }\n\n  /**\n   * Version of the story store service depends on which version of amp-story\n   * the publisher is loading. They all have the same implementation.\n   * @param {!Window} win\n   * @return {?Promise<?../extensions/amp-story/1.0/amp-story-store-service.AmpStoryStoreService|?../extensions/amp-story/0.1/amp-story-store-service.AmpStoryStoreService>}\n   */\n  static storyStoreServiceForOrNull(win) {\n    return (\n    /** @type {!Promise<?../extensions/amp-story/1.0/amp-story-store-service.AmpStoryStoreService|?../extensions/amp-story/0.1/amp-story-store-service.AmpStoryStoreService>} */\n      (getElementServiceIfAvailable(win, 'story-store', 'amp-story')));\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {?../extensions/amp-story/1.0/amp-story-store-service.AmpStoryStoreService}\n   */\n  static storyStoreService(win) {\n    return (/** @type {?../extensions/amp-story/1.0/amp-story-store-service.AmpStoryStoreService} */\n      (getExistingServiceOrNull(win, 'story-store')));\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {?../extensions/amp-story/1.0/amp-story-request-service.AmpStoryRequestService}\n   */\n  static storyRequestService(win) {\n    return (/** @type {?../extensions/amp-story/1.0/amp-story-request-service.AmpStoryRequestService} */\n      (getExistingServiceOrNull(win, 'story-request')));\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {!Promise<?../extensions/amp-story/1.0/localization.LocalizationService>}\n   */\n  static localizationServiceForOrNull(win) {\n    return (\n    /** @type {!Promise<?../extensions/amp-story/1.0/localization.LocalizationService>} */\n      (getElementServiceIfAvailable(win, 'localization', 'amp-story', true)));\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {!../extensions/amp-story/1.0/localization.LocalizationService}\n   */\n  static localizationService(win) {\n    return getService(win, 'localization');\n  }\n\n  /**\n   * TODO(#14357): Remove this when amp-story:0.1 is deprecated.\n   * @param {!Window} win\n   * @return {!../extensions/amp-story/0.1/amp-story-store-service.AmpStoryStoreService}\n   */\n  static storyStoreServiceV01(win) {\n    return getService(win, 'story-store');\n  }\n\n  /**\n   * TODO(#14357): Remove this when amp-story:0.1 is deprecated.\n   * @param {!Window} win\n   * @return {!../extensions/amp-story/0.1/amp-story-request-service.AmpStoryRequestService}\n   */\n  static storyRequestServiceV01(win) {\n    return getService(win, 'story-request-v01');\n  }\n\n  /**\n   * TODO(#14357): Remove this when amp-story:0.1 is deprecated.\n   * @param {!Window} win\n   * @return {!Promise<?../extensions/amp-story/0.1/localization.LocalizationService>}\n   */\n  static localizationServiceForOrNullV01(win) {\n    return (\n    /** @type {!Promise<?../extensions/amp-story/0.1/localization.LocalizationService>} */\n      (getElementServiceIfAvailable(win, 'localization-v01', 'amp-story',\n          true)));\n  }\n\n  /**\n   * TODO(#14357): Remove this when amp-story:0.1 is deprecated.\n   * @param {!Window} win\n   * @return {!../extensions/amp-story/0.1/localization.LocalizationService}\n   */\n  static localizationServiceV01(win) {\n    return getService(win, 'localization-v01');\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {?Promise<?../extensions/amp-viewer-integration/0.1/variable-service.ViewerIntegrationVariableDef>}\n   */\n  static viewerIntegrationVariableServiceForOrNull(win) {\n    return (\n    /** @type {!Promise<?../extensions/amp-viewer-integration/0.1/variable-service.ViewerIntegrationVariableDef>} */\n      (getElementServiceIfAvailable(win, 'viewer-integration-variable',\n          'amp-viewer-integration', true)));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!../extensions/amp-animation/0.1/web-animation-service.WebAnimationService>}\n   */\n  static webAnimationServiceFor(elementOrAmpDoc) {\n    return (/** @type {!Promise<!../extensions/amp-animation/0.1/web-animation-service.WebAnimationService>} */\n      (getElementServiceForDoc(\n          elementOrAmpDoc, 'web-animation', 'amp-animation')));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!./service/storage-impl.Storage>}\n   */\n  static storageForDoc(elementOrAmpDoc) {\n    return /** @type {!Promise<!./service/storage-impl.Storage>} */ (\n      getServicePromiseForDoc(elementOrAmpDoc, 'storage'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/template-impl.Templates}\n   */\n  static templatesFor(window) {\n    return /** @type {!./service/template-impl.Templates} */ (\n      getService(window, 'templates'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/timer-impl.Timer}\n   */\n  static timerFor(window) {\n    return /** @type {!./service/timer-impl.Timer} */ (\n      getService(window, 'timer'));\n  }\n\n  /**\n   * Unlike most service getters, passing `Node` is necessary for some FIE-scope\n   * services since sometimes we only have the FIE Document for context.\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/url-replacements-impl.UrlReplacements}\n   */\n  static urlReplacementsForDoc(nodeOrDoc) {\n    return /** @type {!./service/url-replacements-impl.UrlReplacements} */ (\n      getExistingServiceForDocInEmbedScope(\n          nodeOrDoc, 'url-replace', /* opt_fallbackToTopWin */ true));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!../extensions/amp-user-notification/0.1/amp-user-notification.UserNotificationManager>}\n   */\n  static userNotificationManagerForDoc(elementOrAmpDoc) {\n    return (/** @type {!Promise<!../extensions/amp-user-notification/0.1/amp-user-notification.UserNotificationManager>} */\n      (getElementServiceForDoc(elementOrAmpDoc, 'userNotificationManager',\n          'amp-user-notification')));\n  }\n\n  /**\n   * Returns a promise for the consentPolicy Service or a promise for null if\n   * the service is not available on the current page.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<?../extensions/amp-consent/0.1/consent-policy-manager.ConsentPolicyManager>}\n   */\n  static consentPolicyServiceForDocOrNull(elementOrAmpDoc) {\n    return (/** @type {!Promise<?../extensions/amp-consent/0.1/consent-policy-manager.ConsentPolicyManager>} */\n      (getElementServiceIfAvailableForDoc(elementOrAmpDoc,\n          'consentPolicyManager', 'amp-consent')));\n  }\n\n  /**\n   * Returns a promise for the geo service or a promise for null if\n   * the service is not available on the current page.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<?../extensions/amp-geo/0.1/amp-geo.GeoDef>}\n   */\n  static geoForDocOrNull(elementOrAmpDoc) {\n    return /** @type {!Promise<?../extensions/amp-geo/0.1/amp-geo.GeoDef>} */ (\n      getElementServiceIfAvailableForDoc(\n          elementOrAmpDoc, 'geo', 'amp-geo', true));\n  }\n\n  /**\n   * Unlike most service getters, passing `Node` is necessary for some FIE-scope\n   * services since sometimes we only have the FIE Document for context.\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/url-impl.Url}\n   */\n  static urlForDoc(nodeOrDoc) {\n    return /** @type {!./service/url-impl.Url} */ (\n      getExistingServiceForDocInEmbedScope(\n          nodeOrDoc, 'url', /* opt_fallbackToTopWin */ true));\n  }\n\n  /**\n   * Returns a promise for the experiment variants or a promise for null if it\n   * is not available on the current page.\n   * @param {!Window} win\n   * @return {!Promise<?Object<string>>}\n   */\n  static variantForOrNull(win) {\n    return /** @type {!Promise<?Object<string>>} */ (\n      getElementServiceIfAvailable(win, 'variant', 'amp-experiment', true));\n  }\n\n  /**\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!./service/video-service-interface.VideoServiceInterface}\n   */\n  static videoManagerForDoc(elementOrAmpDoc) {\n    return (\n      /** @type {!./service/video-service-interface.VideoServiceInterface} */ (\n        getServiceForDoc(elementOrAmpDoc, 'video-manager')));\n  }\n\n  /**\n   * Uses getServiceForDocDeprecated() since Viewer is a startup service.\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/viewer-impl.Viewer}\n   */\n  static viewerForDoc(nodeOrDoc) {\n    return /** @type {!./service/viewer-impl.Viewer} */ (\n      getServiceForDocDeprecated(nodeOrDoc, 'viewer'));\n  }\n\n  /**\n   * Returns promise for the viewer. This is an unusual case and necessary only\n   * for services that need reference to the viewer before it has been\n   * initialized. Most of the code, however, just should use `viewerForDoc`.\n   * @param {!Element|!./service/ampdoc-impl.AmpDoc} elementOrAmpDoc\n   * @return {!Promise<!./service/viewer-impl.Viewer>}\n   */\n  static viewerPromiseForDoc(elementOrAmpDoc) {\n    return /** @type {!Promise<!./service/viewer-impl.Viewer>} */ (\n      getServicePromiseForDoc(elementOrAmpDoc, 'viewer'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/vsync-impl.Vsync}\n   */\n  static vsyncFor(window) {\n    return /** @type {!./service/vsync-impl.Vsync} */ (\n      getService(window, 'vsync'));\n  }\n\n  /**\n   * Uses getServiceForDocDeprecated() since Viewport is a startup service.\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/viewport/viewport-impl.Viewport}\n   */\n  static viewportForDoc(nodeOrDoc) {\n    return /** @type {!./service/viewport/viewport-impl.Viewport} */ (\n      getServiceForDocDeprecated(nodeOrDoc, 'viewport'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/xhr-impl.Xhr}\n   */\n  static xhrFor(window) {\n    return /** @type {!./service/xhr-impl.Xhr} */ (getService(window, 'xhr'));\n  }\n}\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {dev} from './log';\nimport {map} from './utils/object.js';\n\nlet container;\n\n/**\n * Creates the html helper for the doc.\n *\n * @param {!Element|!Document} nodeOrDoc\n * @return {function(!Array<string>):!Element}\n */\nexport function htmlFor(nodeOrDoc) {\n  const doc = nodeOrDoc.ownerDocument || nodeOrDoc;\n  if (!container || container.ownerDocument !== doc) {\n    container = doc.createElement('div');\n  }\n\n  return html;\n}\n\n/**\n * A tagged template literal helper to generate static DOM trees.\n * This must be used as a tagged template, ie\n *\n * ```\n * const div = html`<div><span></span></div>`;\n * ```\n *\n * Only the root element and its subtree will be returned. DO NOT use this to\n * render subtree's with dynamic content, it WILL result in an error!\n *\n * @param {!Array<string>} strings\n * @return {!Element}\n */\nfunction html(strings) {\n  dev().assert(strings.length === 1, 'Improper html template tag usage.');\n  container./*OK*/innerHTML = strings[0];\n\n  const el = container.firstElementChild;\n  dev().assert(el, 'No elements in template');\n  dev().assert(!el.nextElementSibling, 'Too many root elements in template');\n\n  // Clear to free memory.\n  container./*OK*/innerHTML = '';\n\n  return el;\n}\n\n/**\n * Queries an element for all elements with a \"ref\" attribute, removing\n * the attribute afterwards.\n * Returns a named map of all ref elements.\n *\n * @param {!Element} root\n * @return {!Object<string, !Element>}\n */\nexport function htmlRefs(root) {\n  const elements = root.querySelectorAll('[ref]');\n  const refs = map();\n\n  for (let i = 0; i < elements.length; i++) {\n    const element = elements[i];\n    const ref = dev().assert(element.getAttribute('ref'), 'Empty ref attr');\n    element.removeAttribute('ref');\n    dev().assert(refs[ref] === undefined, 'Duplicate ref');\n    refs[ref] = element;\n  }\n\n  return refs;\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @param {string} _match\n * @param {string} character\n * @return {string}\n */\nfunction toUpperCase(_match, character) {\n  return character.toUpperCase();\n}\n\n/**\n * @param {string} match\n * @return {string}\n */\nfunction prependDashAndToLowerCase(match) {\n  return '-' + match.toLowerCase();\n}\n\n/**\n * @param {string} name Attribute name containing dashes.\n * @return {string} Dashes removed and successive character sent to upper case.\n * visibleForTesting\n */\nexport function dashToCamelCase(name) {\n  return name.replace(/-([a-z])/g, toUpperCase);\n}\n\n/**\n * Converts a string that is in camelCase to one that is in dash-case.\n *\n * @param {string} string The string to convert.\n * @return {string} The string in dash-case.\n */\nexport function camelCaseToDash(string) {\n  return string.replace(/(?!^)[A-Z]/g, prependDashAndToLowerCase);\n}\n\n/**\n * @param {string} name Attribute name with dashes\n * @return {string} Dashes replaced by underlines.\n */\nexport function dashToUnderline(name) {\n  return name.replace('-', '_');\n}\n\n/**\n * Polyfill for String.prototype.endsWith.\n * @param {string} string\n * @param {string} suffix\n * @return {boolean}\n */\nexport function endsWith(string, suffix) {\n  const index = string.length - suffix.length;\n  return index >= 0 && string.indexOf(suffix, index) == index;\n}\n\n/**\n * Polyfill for String.prototype.startsWith.\n * @param {string} string\n * @param {string} prefix\n * @return {boolean}\n */\nexport function startsWith(string, prefix) {\n  if (prefix.length > string.length) {\n    return false;\n  }\n  return string.lastIndexOf(prefix, 0) == 0;\n}\n\n/**\n * Expands placeholders in a given template string with values.\n *\n * Placeholders use ${key-name} syntax and are replaced with the value\n * returned from the given getter function.\n *\n * @param {string} template The template string to expand.\n * @param {function(string):*} getter Function used to retrieve a value for a\n *   placeholder. Returns values will be coerced into strings.\n * @param {number=} opt_maxIterations Number of times to expand the template.\n *   Defaults to 1, but should be set to a larger value your placeholder tokens\n *   can be expanded to other placeholder tokens. Take caution with large values\n *   as recursively expanding a string can be exponentially expensive.\n */\nexport function expandTemplate(template, getter, opt_maxIterations) {\n  const maxIterations = opt_maxIterations || 1;\n  for (let i = 0; i < maxIterations; i++) {\n    let matches = 0;\n    template = template.replace(/\\${([^}]*)}/g, (_a, b) => {\n      matches++;\n      return getter(b);\n    });\n    if (!matches) {\n      break;\n    }\n  }\n  return template;\n}\n\n/**\n * Hash function djb2a\n * This is intended to be a simple, fast hashing function using minimal code.\n * It does *not* have good cryptographic properties.\n * @param {string} str\n * @return {string} 32-bit unsigned hash of the string\n */\nexport function stringHash32(str) {\n  const {length} = str;\n  let hash = 5381;\n  for (let i = 0; i < length; i++) {\n    hash = hash * 33 ^ str.charCodeAt(i);\n  }\n  // Convert from 32-bit signed to unsigned.\n  return String(hash >>> 0);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Services} from './services';\nimport {dev, rethrowAsync} from './log';\nimport {insertAfterOrAtStart, waitForBody} from './dom';\nimport {map} from './utils/object';\nimport {setStyles} from './style';\nimport {waitForServices} from './render-delaying-services';\n\nconst TRANSFORMER_PROP = '__AMP_CSS_TR';\nconst STYLE_MAP_PROP = '__AMP_CSS_SM';\nconst bodyVisibleSentinel = '__AMP_BODY_VISIBLE';\n\n\n/**\n * Adds the given css text to the given ampdoc.\n *\n * The style tags will be at the beginning of the head before all author\n * styles. One element can be the main runtime CSS. This is guaranteed\n * to always be the first stylesheet in the doc.\n *\n * @param {!./service/ampdoc-impl.AmpDoc} ampdoc The ampdoc that should get the new styles.\n * @param {string} cssText\n * @param {?function(!Element)|undefined} cb Called when the new styles are available.\n *     Not using a promise, because this is synchronous when possible.\n *     for better performance.\n * @param {boolean=} opt_isRuntimeCss If true, this style tag will be inserted\n *     as the first element in head and all style elements will be positioned\n *     after.\n * @param {string=} opt_ext\n * @return {!Element}\n */\nexport function installStylesForDoc(\n  ampdoc, cssText, cb, opt_isRuntimeCss, opt_ext) {\n  const cssRoot = ampdoc.getHeadNode();\n  const style = insertStyleElement(\n      cssRoot,\n      maybeTransform(cssRoot, cssText),\n      opt_isRuntimeCss || false,\n      opt_ext || null);\n\n  if (cb) {\n    const rootNode = ampdoc.getRootNode();\n    // Styles aren't always available synchronously. E.g. if there is a\n    // pending style download, it will have to finish before the new\n    // style is visible.\n    // For this reason we poll until the style becomes available.\n    // Sync case.\n    if (styleLoaded(rootNode, style)) {\n      cb(style);\n      return style;\n    }\n    // Poll until styles are available.\n    const interval = setInterval(() => {\n      if (styleLoaded(rootNode, style)) {\n        clearInterval(interval);\n        cb(style);\n      }\n    }, 4);\n  }\n  return style;\n}\n\n\n/**\n * Adds the given css text to the given document.\n * TODO(dvoytenko, #10705): Remove this method once FIE/ampdoc migration is\n * done.\n *\n * @param {!Document} doc The document that should get the new styles.\n * @param {string} cssText\n * @param {?function(!Element)|undefined} cb Called when the new styles are\n *     available. Not using a promise, because this is synchronous when\n *     possible. for better performance.\n * @param {boolean=} opt_isRuntimeCss If true, this style tag will be inserted\n *     as the first element in head and all style elements will be positioned\n *     after.\n * @param {string=} opt_ext\n * @return {!Element}\n */\nexport function installStylesLegacy(\n  doc, cssText, cb, opt_isRuntimeCss, opt_ext) {\n  const style = insertStyleElement(\n      dev().assertElement(doc.head),\n      cssText,\n      opt_isRuntimeCss || false,\n      opt_ext || null);\n\n  if (cb) {\n    // Styles aren't always available synchronously. E.g. if there is a\n    // pending style download, it will have to finish before the new\n    // style is visible.\n    // For this reason we poll until the style becomes available.\n    // Sync case.\n    if (styleLoaded(doc, style)) {\n      cb(style);\n      return style;\n    }\n    // Poll until styles are available.\n    const interval = setInterval(() => {\n      if (styleLoaded(doc, style)) {\n        clearInterval(interval);\n        cb(style);\n      }\n    }, 4);\n  }\n  return style;\n}\n\n\n/**\n * Creates the properly configured style element.\n * @param {!Element|!ShadowRoot} cssRoot\n * @param {string} cssText\n * @param {boolean} isRuntimeCss\n * @param {?string} ext\n * @return {!Element}\n */\nfunction insertStyleElement(cssRoot, cssText, isRuntimeCss, ext) {\n  let styleMap = cssRoot[STYLE_MAP_PROP];\n  if (!styleMap) {\n    styleMap = cssRoot[STYLE_MAP_PROP] = map();\n  }\n\n  const isExtCss = !isRuntimeCss &&\n      (ext && ext != 'amp-custom' && ext != 'amp-keyframes');\n  const key =\n      isRuntimeCss ? 'amp-runtime' :\n        isExtCss ? `amp-extension=${ext}` : null;\n\n  // Check if it has already been created or discovered.\n  if (key) {\n    const existing = getExistingStyleElement(cssRoot, styleMap, key);\n    if (existing) {\n      return existing;\n    }\n  }\n\n  // Create the new style element and append to cssRoot.\n  const doc = (cssRoot.ownerDocument || cssRoot);\n  const style = doc.createElement('style');\n  style./*OK*/textContent = cssText;\n  let afterElement = null;\n  // Make sure that we place style tags after the main runtime CSS. Otherwise\n  // the order is random.\n  if (isRuntimeCss) {\n    style.setAttribute('amp-runtime', '');\n  } else if (isExtCss) {\n    style.setAttribute('amp-extension', ext || '');\n    afterElement = dev().assertElement(getExistingStyleElement(\n        cssRoot, styleMap, 'amp-runtime'));\n  } else {\n    if (ext) {\n      style.setAttribute(ext, '');\n    }\n    afterElement = cssRoot.lastChild;\n  }\n  insertAfterOrAtStart(cssRoot, style, afterElement);\n  if (key) {\n    styleMap[key] = style;\n  }\n  return style;\n}\n\n\n/**\n * @param {!Element|!ShadowRoot} cssRoot\n * @param {!Object<string, !Element>} styleMap\n * @param {string} key\n * @return {?Element}\n */\nfunction getExistingStyleElement(cssRoot, styleMap, key) {\n  // Already cached.\n  if (styleMap[key]) {\n    return styleMap[key];\n  }\n  // Check if the style has already been added by the server layout.\n  const existing = cssRoot./*OK*/querySelector(`style[${key}]`);\n  if (existing) {\n    styleMap[key] = existing;\n    return existing;\n  }\n  // Nothing found.\n  return null;\n}\n\n\n/**\n * Applies a transformer to the CSS text if it has been registered.\n * @param {!Element|!ShadowRoot} cssRoot\n * @param {function(string):string} transformer\n */\nexport function installCssTransformer(cssRoot, transformer) {\n  cssRoot[TRANSFORMER_PROP] = transformer;\n}\n\n\n/**\n * Applies a transformer to the CSS text if it has been registered.\n * @param {!Element|!ShadowRoot} cssRoot\n * @param {string} cssText\n * @return {string}\n */\nfunction maybeTransform(cssRoot, cssText) {\n  const transformer = cssRoot[TRANSFORMER_PROP];\n  return transformer ? transformer(cssText) : cssText;\n}\n\n\n/**\n * Sets the document's body opacity to 1.\n * If the body is not yet available (because our script was loaded\n * synchronously), polls until it is.\n * @param {!Document} doc The document who's body we should make visible.\n * @param {boolean=} opt_waitForServices Whether the body visibility should\n *     be blocked on key services being loaded.\n */\nexport function makeBodyVisible(doc, opt_waitForServices) {\n  dev().assert(doc.defaultView, 'Passed in document must have a defaultView');\n  const win = /** @type {!Window} */ (doc.defaultView);\n  if (win[bodyVisibleSentinel]) {\n    return;\n  }\n  const set = () => {\n    win[bodyVisibleSentinel] = true;\n    setStyles(dev().assertElement(doc.body), {\n      opacity: 1,\n      visibility: 'visible',\n      'animation': 'none',\n    });\n    renderStartedNoInline(doc);\n  };\n  try {\n    waitForBody(doc, () => {\n      if (win[bodyVisibleSentinel]) {\n        return;\n      }\n      win[bodyVisibleSentinel] = true;\n      if (opt_waitForServices) {\n        waitForServices(win).catch(reason => {\n          rethrowAsync(reason);\n          return [];\n        }).then(services => {\n          set();\n          if (services.length > 0) {\n            Services.resourcesForDoc(doc)./*OK*/schedulePass(\n                1, /* relayoutAll */ true);\n          }\n          try {\n            const perf = Services.performanceFor(win);\n            perf.tick('mbv');\n            perf.flush();\n          } catch (e) {}\n        });\n      } else {\n        set();\n      }\n    });\n  } catch (e) {\n    // If there was an error during the logic above (such as service not\n    // yet installed, definitely try to make the body visible.\n    set();\n    // Avoid errors in the function to break execution flow as this is\n    // often called as a last resort.\n    rethrowAsync(e);\n  }\n}\n\n\n/**\n * @param {!Document} doc\n */\nfunction renderStartedNoInline(doc) {\n  try {\n    Services.resourcesForDoc(doc).renderStarted();\n  } catch (e) {\n    // `makeBodyVisible` is called in the error-processing cycle and thus\n    // could be triggered when runtime's initialization is incomplete which\n    // would cause unrelated errors to be thrown here.\n  }\n}\n\n\n/**\n * Indicates that the body is always visible. For instance, in case of PWA.\n * @param {!Window} win\n */\nexport function bodyAlwaysVisible(win) {\n  win[bodyVisibleSentinel] = true;\n}\n\n\n/**\n * Checks whether a style element was registered in the DOM.\n * @param {!Document|!ShadowRoot} doc\n * @param {!Element} style\n * @return {boolean}\n */\nfunction styleLoaded(doc, style) {\n  const sheets = doc.styleSheets;\n  for (let i = 0; i < sheets.length; i++) {\n    const sheet = sheets[i];\n    if (sheet.ownerNode == style) {\n      return true;\n    }\n  }\n  return false;\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// Note: loaded by 3p system. Cannot rely on babel polyfills.\nimport {map} from './utils/object.js';\nimport {startsWith} from './string';\n\n\n/** @type {Object<string, string>} */\nlet propertyNameCache;\n\n/** @const {!Array<string>} */\nconst vendorPrefixes = ['Webkit', 'webkit', 'Moz', 'moz', 'ms', 'O', 'o'];\n\n\n/**\n * @export\n * @param {string} camelCase camel cased string\n * @return {string} title cased string\n */\nexport function camelCaseToTitleCase(camelCase) {\n  return camelCase.charAt(0).toUpperCase() + camelCase.slice(1);\n}\n\n/**\n * Checks the style if a prefixed version of a property exists and returns\n * it or returns an empty string.\n * @private\n * @param {!Object} style\n * @param {string} titleCase the title case version of a css property name\n * @return {string} the prefixed property name or null.\n */\nfunction getVendorJsPropertyName_(style, titleCase) {\n  for (let i = 0; i < vendorPrefixes.length; i++) {\n    const propertyName = vendorPrefixes[i] + titleCase;\n    if (style[propertyName] !== undefined) {\n      return propertyName;\n    }\n  }\n  return '';\n}\n\n/**\n * Returns the possibly prefixed JavaScript property name of a style property\n * (ex. WebkitTransitionDuration) given a camelCase'd version of the property\n * (ex. transitionDuration).\n * @export\n * @param {!Object} style\n * @param {string} camelCase the camel cased version of a css property name\n * @param {boolean=} opt_bypassCache bypass the memoized cache of property\n *   mapping\n * @return {string}\n */\nexport function getVendorJsPropertyName(style, camelCase, opt_bypassCache) {\n  if (startsWith(camelCase, '--')) {\n    // CSS vars are returned as is.\n    return camelCase;\n  }\n  if (!propertyNameCache) {\n    propertyNameCache = map();\n  }\n  let propertyName = propertyNameCache[camelCase];\n  if (!propertyName || opt_bypassCache) {\n    propertyName = camelCase;\n    if (style[camelCase] === undefined) {\n      const titleCase = camelCaseToTitleCase(camelCase);\n      const prefixedPropertyName = getVendorJsPropertyName_(style, titleCase);\n\n      if (style[prefixedPropertyName] !== undefined) {\n        propertyName = prefixedPropertyName;\n      }\n    }\n    if (!opt_bypassCache) {\n      propertyNameCache[camelCase] = propertyName;\n    }\n  }\n  return propertyName;\n}\n\n\n/**\n * Sets the CSS styles of the specified element with !important. The styles\n * are specified as a map from CSS property names to their values.\n * @param {!Element} element\n * @param {!Object<string, *>} styles\n */\nexport function setImportantStyles(element, styles) {\n  for (const k in styles) {\n    element.style.setProperty(\n        getVendorJsPropertyName(styles, k), styles[k].toString(), 'important');\n  }\n}\n\n\n/**\n * Sets the CSS style of the specified element with optional units, e.g. \"px\".\n * @param {?Element} element\n * @param {string} property\n * @param {*} value\n * @param {string=} opt_units\n * @param {boolean=} opt_bypassCache\n */\nexport function setStyle(element, property, value, opt_units, opt_bypassCache) {\n  const propertyName = getVendorJsPropertyName(element.style, property,\n      opt_bypassCache);\n  if (propertyName) {\n    element.style[propertyName] =\n      /** @type {string} */ (opt_units ? value + opt_units : value);\n  }\n}\n\n\n/**\n * Returns the value of the CSS style of the specified element.\n * @param {!Element} element\n * @param {string} property\n * @param {boolean=} opt_bypassCache\n * @return {*}\n */\nexport function getStyle(element, property, opt_bypassCache) {\n  const propertyName = getVendorJsPropertyName(element.style, property,\n      opt_bypassCache);\n  if (!propertyName) {\n    return undefined;\n  }\n  return element.style[propertyName];\n}\n\n\n/**\n * Sets the CSS styles of the specified element. The styles\n * a specified as a map from CSS property names to their values.\n * @param {!Element} element\n * @param {!Object<string, *>} styles\n */\nexport function setStyles(element, styles) {\n  for (const k in styles) {\n    setStyle(element, k, styles[k]);\n  }\n}\n\n\n/**\n * Shows or hides the specified element.\n * @param {!Element} element\n * @param {boolean=} opt_display\n */\nexport function toggle(element, opt_display) {\n  if (opt_display === undefined) {\n    opt_display = getStyle(element, 'display') == 'none';\n  }\n  setStyle(element, 'display', opt_display ? '' : 'none');\n}\n\n\n/**\n * Returns a pixel value.\n * @param {number} value\n * @return {string}\n */\nexport function px(value) {\n  return `${value}px`;\n}\n\n/**\n * Returns a degree value.\n * @param {number} value\n * @return {string}\n */\nexport function deg(value) {\n  return `${value}deg`;\n}\n\n/**\n * Returns a \"translateX\" for CSS \"transform\" property.\n * @param {number|string} value\n * @return {string}\n */\nexport function translateX(value) {\n  if (typeof value == 'string') {\n    return `translateX(${value})`;\n  }\n  return `translateX(${px(value)})`;\n}\n\n\n/**\n * Returns a \"translateX\" for CSS \"transform\" property.\n * @param {number|string} x\n * @param {(number|string)=} opt_y\n * @return {string}\n */\nexport function translate(x, opt_y) {\n  if (typeof x == 'number') {\n    x = px(x);\n  }\n  if (opt_y === undefined) {\n    return `translate(${x})`;\n  }\n  if (typeof opt_y == 'number') {\n    opt_y = px(opt_y);\n  }\n  return `translate(${x}, ${opt_y})`;\n}\n\n\n/**\n * Returns a \"scale\" for CSS \"transform\" property.\n * @param {number|string} value\n * @return {string}\n */\nexport function scale(value) {\n  return `scale(${value})`;\n}\n\n/**\n * Returns a \"rotate\" for CSS \"transform\" property.\n * @param {number|string} value\n * @return {string}\n */\nexport function rotate(value) {\n  if (typeof value == 'number') {\n    value = deg(value);\n  }\n  return `rotate(${value})`;\n}\n\n/**\n * Remove alpha value from a rgba color value.\n * Return the new color property with alpha equals if has the alpha value.\n * Caller needs to make sure the input color value is a valid rgba/rgb value\n * @param {string} rgbaColor\n * @return {string}\n */\nexport function removeAlphaFromColor(rgbaColor) {\n  return rgbaColor.replace(\n      /\\(([^,]+),([^,]+),([^,)]+),[^)]+\\)/g, '($1,$2,$3, 1)');\n}\n\n/**\n * Gets the computed style of the element. The helper is necessary to enforce\n * the possible `null` value returned by a buggy Firefox.\n *\n * @param {!Window} win\n * @param {!Element} el\n * @return {!Object<string, string>}\n */\nexport function computedStyle(win, el) {\n  const style = /** @type {?CSSStyleDeclaration} */(win.getComputedStyle(el));\n  return /** @type {!Object<string, string>} */(style) || map();\n}\n\n\n/**\n * Resets styles that were set dynamically (i.e. inline)\n * @param {!Element} element\n * @param {!Array<string>} properties\n */\nexport function resetStyles(element, properties) {\n  const styleObj = {};\n  properties.forEach(prop => {\n    styleObj[prop] = null;\n  });\n  setStyles(element, styleObj);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* @const */\nconst toString_ = Object.prototype.toString;\n\n/**\n * Returns the ECMA [[Class]] of a value\n * @param {*} value\n * @return {string}\n */\nfunction toString(value) {\n  return toString_.call(value);\n}\n\n/**\n * Determines if value is actually an Array.\n * @param {*} value\n * @return {boolean}\n */\nexport function isArray(value) {\n  return Array.isArray(value);\n}\n\n/**\n * Converts an array-like object to an array.\n * @param {?IArrayLike<T>|string} arrayLike\n * @return {!Array<T>}\n * @template T\n */\nexport function toArray(arrayLike) {\n  if (!arrayLike) {\n    return [];\n  }\n  const array = new Array(arrayLike.length);\n  for (let i = 0; i < arrayLike.length; i++) {\n    array[i] = arrayLike[i];\n  }\n  return array;\n}\n\n/**\n * Determines if value is actually an Object.\n * @param {*} value\n * @return {boolean}\n */\nexport function isObject(value) {\n  return toString(value) === '[object Object]';\n}\n\n/**\n * Determines if value is of number type and finite.\n * NaN and Infinity are not considered a finite number.\n * String numbers are not considered numbers.\n * @param {*} value\n * @return {boolean}\n */\nexport function isFiniteNumber(value) {\n  return (typeof value === 'number' && isFinite(value));\n}\n\n/**\n * Checks whether `s` is a valid value of `enumObj`.\n *\n * @param {!Object<T>} enumObj\n * @param {T} s\n * @return {boolean}\n * @template T\n */\nexport function isEnumValue(enumObj, s) {\n  for (const k in enumObj) {\n    if (enumObj[k] === s) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Externs declare that access `defaultView` from `document` or\n * `ownerDocument` is of type `(Window|null)` but most of our parameter types\n * assume that it is never null. This is OK in practice as we ever only get\n * null on disconnected documents or old IE.\n * This helper function casts it into just a simple Window return type.\n *\n * @param {!Window|null} winOrNull\n * @return {!Window}\n */\nexport function toWin(winOrNull) {\n  return /** @type {!Window} */ (winOrNull);\n}\n\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {tryDecodeUriComponent_} from './url-try-decode-uri-component';\n\nconst regex = /(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;\n\n/**\n * Parses the query string of an URL. This method returns a simple key/value\n * map. If there are duplicate keys the latest value is returned.\n *\n * DO NOT import the function from this file. Instead, import parseQueryString\n * from `src/url.js`.\n *\n * @param {string} queryString\n * @return {!JsonObject}\n */\nexport function parseQueryString_(queryString) {\n  const params = /** @type {!JsonObject} */ (Object.create(null));\n  if (!queryString) {\n    return params;\n  }\n\n  let match;\n  while ((match = regex.exec(queryString))) {\n    const name = tryDecodeUriComponent_(match[1], match[1]);\n    const value = match[2] ? tryDecodeUriComponent_(match[2], match[2]) : '';\n    params[name] = value;\n  }\n  return params;\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Tries to decode a URI component, falling back to opt_fallback (or an empty\n * string)\n *\n * DO NOT import the function from this file. Instead, import\n * tryDecodeUriComponent from `src/url.js`.\n *\n * @param {string} component\n * @param {string=} fallback\n * @return {string}\n */\nexport function tryDecodeUriComponent_(component, fallback = '') {\n  try {\n    return decodeURIComponent(component);\n  } catch (e) {\n    return fallback;\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {LruCache} from './utils/lru-cache';\nimport {dict} from './utils/object';\nimport {endsWith, startsWith} from './string';\nimport {getMode} from './mode';\nimport {isArray} from './types';\nimport {parseQueryString_} from './url-parse-query-string';\nimport {tryDecodeUriComponent_} from './url-try-decode-uri-component';\nimport {urls} from './config';\nimport {user} from './log';\n\n/**\n * @type {!JsonObject}\n */\nconst SERVING_TYPE_PREFIX = dict({\n  // No viewer\n  'c': true,\n  // In viewer\n  'v': true,\n  // Ad landing page\n  'a': true,\n  // Ad\n  'ad': true,\n});\n\n/**\n * Cached a-tag to avoid memory allocation during URL parsing.\n * @type {HTMLAnchorElement}\n */\nlet a;\n\n/**\n * We cached all parsed URLs. As of now there are no use cases\n * of AMP docs that would ever parse an actual large number of URLs,\n * but we often parse the same one over and over again.\n * @type {LruCache}\n */\nlet cache;\n\n/** @private @const Matches amp_js_* parameters in query string. */\nconst AMP_JS_PARAMS_REGEX = /[?&]amp_js[^&]*/;\n\n/** @private @const Matches amp_gsa parameters in query string. */\nconst AMP_GSA_PARAMS_REGEX = /[?&]amp_gsa[^&]*/;\n\n/** @private @const Matches amp_r parameters in query string. */\nconst AMP_R_PARAMS_REGEX = /[?&]amp_r[^&]*/;\n\n/** @private @const Matches usqp parameters from goog experiment in query string. */\nconst GOOGLE_EXPERIMENT_PARAMS_REGEX = /[?&]usqp[^&]*/;\n\nconst INVALID_PROTOCOLS = [\n  /*eslint no-script-url: 0*/ 'javascript:',\n  /*eslint no-script-url: 0*/ 'data:',\n  /*eslint no-script-url: 0*/ 'vbscript:',\n];\n\n/** @const {string} */\nexport const SOURCE_ORIGIN_PARAM = '__amp_source_origin';\n\n/**\n * Returns the correct origin for a given window.\n * @param {!Window} win\n * @return {string} origin\n */\nexport function getWinOrigin(win) {\n  return win.origin || parseUrlDeprecated(win.location.href).origin;\n}\n\n/**\n * Returns a Location-like object for the given URL. If it is relative,\n * the URL gets resolved.\n * Consider the returned object immutable. This is enforced during\n * testing by freezing the object.\n * @param {string} url\n * @param {boolean=} opt_nocache\n * @return {!Location}\n */\nexport function parseUrlDeprecated(url, opt_nocache) {\n  if (!a) {\n    a = /** @type {!HTMLAnchorElement} */ (self.document.createElement('a'));\n    cache = self.UrlCache || (self.UrlCache = new LruCache(100));\n  }\n\n  return parseUrlWithA(a, url, opt_nocache ? null : cache);\n}\n\n/**\n * Returns a Location-like object for the given URL. If it is relative,\n * the URL gets resolved.\n * Consider the returned object immutable. This is enforced during\n * testing by freezing the object.\n * @param {!HTMLAnchorElement} a\n * @param {string} url\n * @param {LruCache=} opt_cache\n * @return {!Location}\n * @restricted\n */\nexport function parseUrlWithA(a, url, opt_cache) {\n  if (opt_cache && opt_cache.has(url)) {\n    return opt_cache.get(url);\n  }\n\n  a.href = url;\n\n  // IE11 doesn't provide full URL components when parsing relative URLs.\n  // Assigning to itself again does the trick #3449.\n  if (!a.protocol) {\n    a.href = a.href;\n  }\n\n  const info = /** @type {!Location} */({\n    href: a.href,\n    protocol: a.protocol,\n    host: a.host,\n    hostname: a.hostname,\n    port: a.port == '0' ? '' : a.port,\n    pathname: a.pathname,\n    search: a.search,\n    hash: a.hash,\n    origin: null, // Set below.\n  });\n\n  // Some IE11 specific polyfills.\n  // 1) IE11 strips out the leading '/' in the pathname.\n  if (info.pathname[0] !== '/') {\n    info.pathname = '/' + info.pathname;\n  }\n\n  // 2) For URLs with implicit ports, IE11 parses to default ports while\n  // other browsers leave the port field empty.\n  if ((info.protocol == 'http:' && info.port == 80)\n      || (info.protocol == 'https:' && info.port == 443)) {\n    info.port = '';\n    info.host = info.hostname;\n  }\n\n  // For data URI a.origin is equal to the string 'null' which is not useful.\n  // We instead return the actual origin which is the full URL.\n  if (a.origin && a.origin != 'null') {\n    info.origin = a.origin;\n  } else if (info.protocol == 'data:' || !info.host) {\n    info.origin = info.href;\n  } else {\n    info.origin = info.protocol + '//' + info.host;\n  }\n\n  // Freeze during testing to avoid accidental mutation.\n  const frozen = (getMode().test && Object.freeze) ? Object.freeze(info) : info;\n\n  if (opt_cache) {\n    opt_cache.put(url, frozen);\n  }\n\n  return frozen;\n}\n\n/**\n * Appends the string just before the fragment part (or optionally\n * to the front of the query string) of the URL.\n * @param {string} url\n * @param {string} paramString\n * @param {boolean=} opt_addToFront\n * @return {string}\n */\nexport function appendEncodedParamStringToUrl(url, paramString,\n  opt_addToFront) {\n  if (!paramString) {\n    return url;\n  }\n  const mainAndFragment = url.split('#', 2);\n  const mainAndQuery = mainAndFragment[0].split('?', 2);\n\n  let newUrl = mainAndQuery[0] + (\n    mainAndQuery[1]\n      ? (opt_addToFront\n        ? `?${paramString}&${mainAndQuery[1]}`\n        : `?${mainAndQuery[1]}&${paramString}`)\n      : `?${paramString}`);\n  newUrl += mainAndFragment[1] ? `#${mainAndFragment[1]}` : '';\n  return newUrl;\n}\n/**\n * Appends a query string field and value to a url. `key` and `value`\n * will be ran through `encodeURIComponent` before appending.\n * @param {string} url\n * @param {string} key\n * @param {string} value\n * @param {boolean=} opt_addToFront\n * @return {string}\n */\nexport function addParamToUrl(url, key, value, opt_addToFront) {\n  const field = `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\n  return appendEncodedParamStringToUrl(url, field, opt_addToFront);\n}\n\n/**\n * Appends query string fields and values to a url. The `params` objects'\n * `key`s and `value`s will be transformed into query string keys/values.\n * @param {string} url\n * @param {!JsonObject<string, string|!Array<string>>} params\n * @return {string}\n */\nexport function addParamsToUrl(url, params) {\n  return appendEncodedParamStringToUrl(url, serializeQueryString(params));\n}\n\n/**\n * Serializes the passed parameter map into a query string with both keys\n * and values encoded.\n * @param {!JsonObject<string, string|!Array<string>>} params\n * @return {string}\n */\nexport function serializeQueryString(params) {\n  const s = [];\n  for (const k in params) {\n    const v = params[k];\n    if (v == null) {\n      continue;\n    } else if (isArray(v)) {\n      for (let i = 0; i < v.length; i++) {\n        const sv = /** @type {string} */ (v[i]);\n        s.push(`${encodeURIComponent(k)}=${encodeURIComponent(sv)}`);\n      }\n    } else {\n      const sv = /** @type {string} */ (v);\n      s.push(`${encodeURIComponent(k)}=${encodeURIComponent(sv)}`);\n    }\n  }\n  return s.join('&');\n}\n\n/**\n * Returns `true` if the URL is secure: either HTTPS or localhost (for testing).\n * @param {string|!Location} url\n * @return {boolean}\n */\nexport function isSecureUrlDeprecated(url) {\n  if (typeof url == 'string') {\n    url = parseUrlDeprecated(url);\n  }\n  return (url.protocol == 'https:' ||\n      url.hostname == 'localhost' ||\n      endsWith(url.hostname, '.localhost'));\n}\n\n/**\n * Asserts that a given url is HTTPS or protocol relative. It's a user-level\n * assert.\n *\n * Provides an exception for localhost.\n *\n * @param {?string|undefined} urlString\n * @param {!Element|string} elementContext Element where the url was found.\n * @param {string=} sourceName Used for error messages.\n * @return {string}\n */\nexport function assertHttpsUrl(\n  urlString, elementContext, sourceName = 'source') {\n  user().assert(urlString != null, '%s %s must be available',\n      elementContext, sourceName);\n  // (erwinm, #4560): type cast necessary until #4560 is fixed.\n  const theUrlString = /** @type {string} */ (urlString);\n  user().assert(isSecureUrlDeprecated(theUrlString) || /^(\\/\\/)/.test(theUrlString),\n      '%s %s must start with ' +\n      '\"https://\" or \"//\" or be relative and served from ' +\n      'either https or from localhost. Invalid value: %s',\n      elementContext, sourceName, theUrlString);\n  return theUrlString;\n}\n\n/**\n * Asserts that a given url is an absolute HTTP or HTTPS URL.\n * @param {string} urlString\n * @return {string}\n */\nexport function assertAbsoluteHttpOrHttpsUrl(urlString) {\n  user().assert(/^https?\\:/i.test(urlString),\n      'URL must start with \"http://\" or \"https://\". Invalid value: %s',\n      urlString);\n  return parseUrlDeprecated(urlString).href;\n}\n\n\n/**\n * Parses the query string of an URL. This method returns a simple key/value\n * map. If there are duplicate keys the latest value is returned.\n *\n * This function is implemented in a separate file to avoid a circular\n * dependency.\n *\n * @param {string} queryString\n * @return {!JsonObject}\n */\nexport function parseQueryString(queryString) {\n  return parseQueryString_(queryString);\n}\n\n/**\n * Returns the URL without fragment. If URL doesn't contain fragment, the same\n * string is returned.\n * @param {string} url\n * @return {string}\n */\nexport function removeFragment(url) {\n  const index = url.indexOf('#');\n  if (index == -1) {\n    return url;\n  }\n  return url.substring(0, index);\n}\n\n/**\n * Returns the fragment from the URL. If the URL doesn't contain fragment,\n * the empty string is returned.\n * @param {string} url\n * @return {string}\n */\nexport function getFragment(url) {\n  const index = url.indexOf('#');\n  if (index == -1) {\n    return '';\n  }\n  return url.substring(index);\n}\n\n/**\n * Returns whether the URL has the origin of a proxy.\n * @param {string|!Location} url URL of an AMP document.\n * @return {boolean}\n */\nexport function isProxyOrigin(url) {\n  if (typeof url == 'string') {\n    url = parseUrlDeprecated(url);\n  }\n  return urls.cdnProxyRegex.test(url.origin);\n}\n\n/**\n * For proxy-origin URLs, returns the serving type. Otherwise, returns null.\n * E.g., 'https://amp-com.cdn.ampproject.org/a/s/amp.com/amp_document.html'\n * returns 'a'.\n * @param {string|!Location} url URL of an AMP document.\n * @return {?string}\n */\nexport function getProxyServingType(url) {\n  if (typeof url == 'string') {\n    url = parseUrlDeprecated(url);\n  }\n  if (!isProxyOrigin(url)) {\n    return null;\n  }\n  const path = url.pathname.split('/', 2);\n  return path[1];\n}\n\n/**\n * Returns whether the URL origin is localhost.\n * @param {string|!Location} url URL of an AMP document.\n * @return {boolean}\n */\nexport function isLocalhostOrigin(url) {\n  if (typeof url == 'string') {\n    url = parseUrlDeprecated(url);\n  }\n  return urls.localhostRegex.test(url.origin);\n}\n\n/**\n * Returns whether the URL has valid protocol.\n * Deep link protocol is valid, but not javascript etc.\n * @param {string|!Location} url\n * @return {boolean}\n */\nexport function isProtocolValid(url) {\n  if (!url) {\n    return true;\n  }\n  if (typeof url == 'string') {\n    url = parseUrlDeprecated(url);\n  }\n  return !INVALID_PROTOCOLS.includes(url.protocol);\n}\n\n/**\n * Returns a URL without AMP JS parameters.\n * @param {string} url\n * @return {string}\n */\nexport function removeAmpJsParamsFromUrl(url) {\n  const parsed = parseUrlDeprecated(url);\n  const search = removeAmpJsParamsFromSearch(parsed.search);\n  return parsed.origin + parsed.pathname + search + parsed.hash;\n\n}\n\n/**\n * Returns a URL without a query string.\n * @param {string} url\n * @return {string}\n */\nexport function removeSearch(url) {\n  const index = url.indexOf('?');\n  if (index == -1) {\n    return url;\n  }\n  const fragment = getFragment(url);\n  return url.substring(0, index) + fragment;\n}\n\n/**\n * Removes parameters that start with amp js parameter pattern and returns the\n * new search string.\n * @param {string} urlSearch\n * @return {string}\n */\nfunction removeAmpJsParamsFromSearch(urlSearch) {\n  if (!urlSearch || urlSearch == '?') {\n    return '';\n  }\n  const search = urlSearch\n      .replace(AMP_JS_PARAMS_REGEX, '')\n      .replace(AMP_GSA_PARAMS_REGEX, '')\n      .replace(AMP_R_PARAMS_REGEX, '')\n      .replace(GOOGLE_EXPERIMENT_PARAMS_REGEX, '')\n      .replace(/^[?&]/, ''); // Removes first ? or &.\n  return search ? '?' + search : '';\n}\n\n/**\n * Returns the source URL of an AMP document for documents served\n * on a proxy origin or directly.\n * @param {string|!Location} url URL of an AMP document.\n * @return {string}\n */\nexport function getSourceUrl(url) {\n  if (typeof url == 'string') {\n    url = parseUrlDeprecated(url);\n  }\n\n  // Not a proxy URL - return the URL itself.\n  if (!isProxyOrigin(url)) {\n    return url.href;\n  }\n\n  // A proxy URL.\n  // Example path that is being matched here.\n  // https://cdn.ampproject.org/c/s/www.origin.com/foo/\n  // The /s/ is optional and signals a secure origin.\n  const path = url.pathname.split('/');\n  const prefix = path[1];\n  user().assert(SERVING_TYPE_PREFIX[prefix],\n      'Unknown path prefix in url %s', url.href);\n  const domainOrHttpsSignal = path[2];\n  const origin = domainOrHttpsSignal == 's'\n    ? 'https://' + decodeURIComponent(path[3])\n    : 'http://' + decodeURIComponent(domainOrHttpsSignal);\n  // Sanity test that what we found looks like a domain.\n  user().assert(origin.indexOf('.') > 0, 'Expected a . in origin %s', origin);\n  path.splice(1, domainOrHttpsSignal == 's' ? 3 : 2);\n  return origin + path.join('/') +\n      removeAmpJsParamsFromSearch(url.search) + (url.hash || '');\n}\n\n/**\n * Returns the source origin of an AMP document for documents served\n * on a proxy origin or directly.\n * @param {string|!Location} url URL of an AMP document.\n * @return {string} The source origin of the URL.\n */\nexport function getSourceOrigin(url) {\n  return parseUrlDeprecated(getSourceUrl(url)).origin;\n}\n\n/**\n * Returns absolute URL resolved based on the relative URL and the base.\n * @param {string} relativeUrlString\n * @param {string|!Location} baseUrl\n * @return {string}\n */\nexport function resolveRelativeUrl(relativeUrlString, baseUrl) {\n  if (typeof baseUrl == 'string') {\n    baseUrl = parseUrlDeprecated(baseUrl);\n  }\n  if (typeof URL == 'function') {\n    return new URL(relativeUrlString, baseUrl.href).toString();\n  }\n  return resolveRelativeUrlFallback_(relativeUrlString, baseUrl);\n}\n\n/**\n * Fallback for URL resolver when URL class is not available.\n * @param {string} relativeUrlString\n * @param {string|!Location} baseUrl\n * @return {string}\n * @private Visible for testing.\n */\nexport function resolveRelativeUrlFallback_(relativeUrlString, baseUrl) {\n  if (typeof baseUrl == 'string') {\n    baseUrl = parseUrlDeprecated(baseUrl);\n  }\n  relativeUrlString = relativeUrlString.replace(/\\\\/g, '/');\n  const relativeUrl = parseUrlDeprecated(relativeUrlString);\n\n  // Absolute URL.\n  if (startsWith(relativeUrlString.toLowerCase(), relativeUrl.protocol)) {\n    return relativeUrl.href;\n  }\n\n  // Protocol-relative URL.\n  if (startsWith(relativeUrlString, '//')) {\n    return baseUrl.protocol + relativeUrlString;\n  }\n\n  // Absolute path.\n  if (startsWith(relativeUrlString, '/')) {\n    return baseUrl.origin + relativeUrlString;\n  }\n\n  // Relative path.\n  return baseUrl.origin + baseUrl.pathname.replace(/\\/[^/]*$/, '/')\n      + relativeUrlString;\n}\n\n\n/**\n * Add \"__amp_source_origin\" query parameter to the URL.\n * @param {!Window} win\n * @param {string} url\n * @return {string}\n */\nexport function getCorsUrl(win, url) {\n  checkCorsUrl(url);\n  const sourceOrigin = getSourceOrigin(win.location.href);\n  return addParamToUrl(url, SOURCE_ORIGIN_PARAM, sourceOrigin);\n}\n\n\n/**\n * Checks if the url has __amp_source_origin and throws if it does.\n * @param {string} url\n */\nexport function checkCorsUrl(url) {\n  const parsedUrl = parseUrlDeprecated(url);\n  const query = parseQueryString(parsedUrl.search);\n  user().assert(!(SOURCE_ORIGIN_PARAM in query),\n      'Source origin is not allowed in %s', url);\n}\n\n/**\n * Tries to decode a URI component, falling back to opt_fallback (or an empty\n * string)\n *\n * @param {string} component\n * @param {string=} opt_fallback\n * @return {string}\n */\nexport function tryDecodeUriComponent(component, opt_fallback) {\n  return tryDecodeUriComponent_(component, opt_fallback);\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * Compares if two arrays contains exactly same elements of same number\n * of same order.\n * Notice that it does NOT handle NaN case as expected\n *\n * @param {!Array<T>} arr1\n * @param {!Array<T>} arr2\n * @return {boolean}\n * @template T\n */\nexport function areEqualOrdered(arr1, arr2) {\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n\n  for (let i = 0; i < arr1.length; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * A bit like Array#filter, but removes elements that filter false from the\n * array. Returns the filtered items.\n *\n * @param {!Array<T>} array\n * @param {function(T, number, !Array<T>):boolean} filter\n * @return {!Array<T>}\n * @template T\n */\nexport function filterSplice(array, filter) {\n  const splice = [];\n  let index = 0;\n  for (let i = 0; i < array.length; i++) {\n    const item = array[i];\n    if (filter(item, i, array)) {\n      if (index < i) {\n        array[index] = item;\n      }\n      index++;\n    } else {\n      splice.push(item);\n    }\n  }\n\n  if (index < array.length) {\n    array.length = index;\n  }\n\n  return splice;\n}\n\n/**\n * Returns the index of the first element matching the predicate.\n * Like Array#findIndex.\n *\n * @param {!Array<T>} array\n * @param {function(T, number, !Array<T>):boolean} predicate\n * @return {number}\n * @template T\n */\nexport function findIndex(array, predicate) {\n  for (let i = 0; i < array.length; i++) {\n    if (predicate(array[i], i, array)) {\n      return i;\n    }\n  }\n  return -1;\n}\n\n/**\n * Converts the given iterator to an array.\n *\n * @param {!Iterator<T>} iterator\n * @return {Array<T>}\n * @template T\n */\nexport function fromIterator(iterator) {\n  const array = [];\n  for (let e = iterator.next(); !e.done; e = iterator.next()) {\n    array.push(e.value);\n  }\n  return array;\n}\n\n/**\n * Adds item to array if it is not already present.\n *\n * @param {Array<T>} array\n * @param {T} item\n * @template T\n */\nexport function pushIfNotExist(array, item) {\n  if (array.indexOf(item) < 0) {\n    array.push(item);\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {stringHash32} from '../string';\n\n\n/**\n * Gets a string of concatenated element names and relative positions\n * of the DOM element and its parentElement's (up to 25).  Relative position\n * is the index of nodes with this tag within the parent's children.\n * The order is from the inner to outer nodes in DOM hierarchy.\n *\n * If a DOM hierarchy is the following:\n *\n * <div id='id1' ...>\n *   <div id='id2' ...>\n *     <table ...>       // table:0\n *       <tr>            // tr:0\n *         <td>...</td>  // td:0\n *         <td>          // td:1\n *           <amp-ad ...></amp-ad>\n *         </td>\n *       </tr>\n *       <tr>...</tr>    // tr:1\n *     </table>\n *   </div>\n * </div>\n *\n * With the amp-ad element passed in:\n * 'amp-ad.0,td.1,tr.0,table.0,div/id2.0,div/id1.0'\n *\n * Note: 25 is chosen arbitrarily.\n *\n * @param {?Element} element DOM node from which to get fingerprint.\n * @return {string} Concatenated element ids.\n */\nexport function domFingerprintPlain(element) {\n  const ids = [];\n  let level = 0;\n  while (element && element.nodeType == /* element */ 1 && level < 25) {\n    let id = '';\n    if (element.id) {\n      id = `/${element.id}`;\n    }\n    const nodeName = element.nodeName.toLowerCase();\n    ids.push(`${nodeName}${id}${indexWithinParent(element)}`);\n    level++;\n    element = element.parentElement;\n  }\n  return ids.join();\n}\n\n\nexport class DomFingerprint {\n  /**\n   * Calculates ad slot DOM fingerprint.  This key is intended to\n   * identify \"same\" ad unit across many page views. This is\n   * based on where the ad appears within the page's DOM structure.\n   *\n   * @param {?Element} element The DOM element from which to collect\n   *     the DOM chain element IDs.  If null, DOM chain element IDs are not\n   *     included in the hash.\n   * @return {string} The ad unit hash key string.\n   */\n  static generate(element) {\n    return stringHash32(domFingerprintPlain(element));\n  }\n}\n\n\n/**\n * Gets a string showing the index of an element within\n * the children of its parent, counting only nodes with the same tag.\n * Stop at 25, just to have a limit.\n * @param {!Element} element DOM node to get index of.\n * @return {string} '.<index>' or ''.\n */\nfunction indexWithinParent(element) {\n  const {nodeName} = element;\n  // Find my index within my parent's children\n  let i = 0;\n  let count = 0;\n  let sibling = element.previousElementSibling;\n  // Different browsers have different children.\n  // So count only nodes with the same tag.\n  // Use a limit for the tags, so that different browsers get the same\n  // count. So 25 and higher all return no index.\n  while (sibling && count < 25 && i < 100) {\n    if (sibling.nodeName == nodeName) {\n      count++;\n    }\n    i++;\n    sibling = sibling.previousElementSibling;\n  }\n  // If we got to the end, then the count is accurate; otherwise skip count.\n  return count < 25 && i < 100 ? `.${count}` : '';\n}\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {dev} from '../log';\n\n/** @const {string} */\nconst TAG = 'lru-cache';\n\n/**\n * @template T\n */\nexport class LruCache {\n  /**\n   * @param {number} capacity\n   */\n  constructor(capacity) {\n    /** @private @const {number} */\n    this.capacity_ = capacity;\n\n    /** @private {number} */\n    this.size_ = 0;\n\n    /**\n     * An incrementing counter to define the last access.\n     * @private {number}\n     */\n    this.access_ = 0;\n\n    /** @private {!Object<(number|string), {payload: T, access: number}>} */\n    this.cache_ = Object.create(null);\n  }\n\n  /**\n   * Returns whether key is cached.\n   *\n   * @param {number|string} key\n   * @return {boolean}\n   */\n  has(key) {\n    return !!this.cache_[key];\n  }\n\n  /**\n   * @param {number|string} key\n   * @return {T} The cached payload.\n   */\n  get(key) {\n    const cacheable = this.cache_[key];\n    if (cacheable) {\n      cacheable.access = ++this.access_;\n      return cacheable.payload;\n    }\n    return undefined;\n  }\n\n  /**\n   * @param {number|string} key\n   * @param {T} payload The payload to cache.\n   */\n  put(key, payload) {\n    if (!this.has(key)) {\n      this.size_++;\n    }\n    this.cache_[key] = {payload, access: this.access_};\n    this.evict_();\n  }\n\n  /**\n   * Evicts the oldest cache entry, if we've exceeded capacity.\n   */\n  evict_() {\n    if (this.size_ <= this.capacity_) {\n      return;\n    }\n\n    dev().warn(TAG, 'Trimming LRU cache');\n    const cache = this.cache_;\n    let oldest = this.access_ + 1;\n    let oldestKey;\n    for (const key in cache) {\n      const {access} = cache[key];\n      if (access < oldest) {\n        oldest = access;\n        oldestKey = key;\n      }\n    }\n\n    if (oldestKey !== undefined) {\n      delete cache[oldestKey];\n      this.size_--;\n    }\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Maps a value in a first range to its equivalent in a second range\n * Ex.: 5 in the range [0,10] gives 60 in the range[40,80]\n *\n * NOTE: lower/upper bounds on the source range are detected automatically,\n * however the bounds on the target range are not altered (thus the target\n * range could be decreasing).\n * Ex1: 8 in the range [0, 10] gives 2 in the range [10, 0]\n * Ex2: also, 8 in the range [10, 0] gives 2 in the range [10, 0]\n *\n * NOTE: Input value is enforced to be bounded inside the source range\n * Ex1: -2 in the range [0, 10] is interpreted as 0 and thus gives 40 in [40,80]\n * Ex2: 19 in the range [0, 5] is interpreted as 5 and thus gives 80 in [40,80]\n *\n * @param {number} val the value in the source range\n * @param {number} min1 the lower bound of the source range\n * @param {number} max1 the upper bound of the source range\n * @param {number} min2 the lower bound of the target range\n * @param {number} max2 the upper bound of the target range\n * @return {number} the equivalent value in the target range\n */\nexport function mapRange(val, min1, max1, min2, max2) {\n\n  let max1Bound = max1;\n  let min1Bound = min1;\n  if (min1 > max1) {\n    max1Bound = min1;\n    min1Bound = max1;\n  }\n\n  if (val < min1Bound) {\n    val = min1Bound;\n  } else if (val > max1Bound) {\n    val = max1Bound;\n  }\n\n  return (val - min1) * (max2 - min2) / (max1 - min1) + min2;\n}\n\n/**\n * Computes the modulus of values `a` and `b`.\n *\n * This is needed because the % operator in JavaScript doesn't implement\n * modulus behaviour as can be seen by the spec here:\n * http://www.ecma-international.org/ecma-262/5.1/#sec-11.5.3.\n * It instead is used to obtain the remainder of a division.\n * This function uses the remainder (%) operator to determine the modulus.\n * Derived from here:\n * https://stackoverflow.com/questions/25726760/javascript-modular-arithmetic/47354356#47354356\n *\n * @param {number} a\n * @param {number} b\n * @return {number} returns the modulus of the two numbers.\n * @example\n *\n * _.min(10, 5);\n * // => 0\n *\n * _.mod(-1, 5);\n * // => 4\n */\nexport function mod(a, b) {\n  return a > 0 && b > 0 ? a % b : ((a % b) + b) % b;\n}\n\n/**\n * Restricts a number to be in the given min/max range.\n *\n * Examples:\n * clamp(0.5, 0, 1) -> 0.5\n * clamp(1.5, 0, 1) -> 1\n * clamp(-0.5, 0, 1) -> 0\n *\n * @param {number} val the value to clamp.\n * @param {number} min the lower bound.\n * @param {number} max the upper bound.\n * @return {number} the clamped value.\n */\nexport function clamp(val, min, max) {\n  return Math.min(Math.max(val, min), max);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {isObject} from '../types';\n\n/* @const */\nconst hasOwn_ = Object.prototype.hasOwnProperty;\n\n/**\n * Returns a map-like object.\n * If opt_initial is provided, copies its own properties into the\n * newly created object.\n * @param {T=} opt_initial This should typically be an object literal.\n * @return {T}\n * @template T\n */\nexport function map(opt_initial) {\n  const obj = Object.create(null);\n  if (opt_initial) {\n    Object.assign(obj, opt_initial);\n  }\n  return obj;\n}\n\n/**\n * Return an empty JsonObject or makes the passed in object literal\n * an JsonObject.\n * The JsonObject type is just a simple object that is at-dict.\n * See\n * https://github.com/google/closure-compiler/wiki/@struct-and-@dict-Annotations\n * for what a dict is type-wise.\n * The linter enforces that the argument is, in fact, at-dict like.\n * @param {!Object=} opt_initial\n * @return {!JsonObject}\n */\nexport function dict(opt_initial) {\n  // We do not copy. The linter enforces that the passed in object is a literal\n  // and thus the caller cannot have a reference to it.\n  return /** @type {!JsonObject} */ (opt_initial || {});\n}\n\n/**\n * Checks if the given key is a property in the map.\n *\n * @param {T}  obj a map like property.\n * @param {string}  key\n * @return {boolean}\n * @template T\n */\nexport function hasOwn(obj, key) {\n  return hasOwn_.call(obj, key);\n}\n\n/**\n * Returns obj[key] iff key is obj's own property (is not inherited).\n * Otherwise, returns undefined.\n *\n * @param {Object} obj\n * @param {string} key\n * @return {*}\n */\nexport function ownProperty(obj, key) {\n  if (hasOwn(obj, key)) {\n    return obj[key];\n  } else {\n    return undefined;\n  }\n}\n\n/**\n * Deep merges source into target.\n *\n * @param {!Object} target\n * @param {!Object} source\n * @param {number} depth The maximum merge depth. If exceeded, Object.assign\n *                       will be used instead.\n * @return {!Object}\n * @throws {Error} If source contains a circular reference.\n * Note: Only nested objects are deep-merged, primitives and arrays are not.\n */\nexport function deepMerge(target, source, depth = 10) {\n  // Keep track of seen objects to detect recursive references.\n  const seen = [];\n\n  /** @type {!Array<{t: !Object, s: !Object, d: number}>} */\n  const queue = [];\n  queue.push({t: target, s: source, d: 0});\n\n  // BFS to ensure objects don't have recursive references at shallower depths.\n  while (queue.length > 0) {\n    const {t, s, d} = queue.shift();\n    if (seen.includes(s)) {\n      throw new Error('Source object has a circular reference.');\n    }\n    seen.push(s);\n    if (t === s) {\n      continue;\n    }\n    if (d > depth) {\n      Object.assign(t, s);\n      continue;\n    }\n    Object.keys(s).forEach(key => {\n      const newValue = s[key];\n      // Perform a deep merge IFF both target and source have the same key\n      // whose corresponding values are objects.\n      if (hasOwn(t, key)) {\n        const oldValue = t[key];\n        if (isObject(newValue) && isObject(oldValue)) {\n          queue.push({t: oldValue, s: newValue, d: d + 1});\n          return;\n        }\n      }\n      t[key] = newValue;\n    });\n  }\n  return target;\n}\n\n/**\n * @param {!Object} o An object to remove properties from\n * @param {!Array<string>} props A list of properties to remove from the Object\n * @return {!Object} An object with the given properties removed\n */\nexport function omit(o, props) {\n  return Object.keys(o).reduce((acc, key) => {\n    if (!props.includes(key)) {\n      acc[key] = o[key];\n    }\n    return acc;\n  }, {});\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Returns a Deferred struct, which holds a pending promise and its associated\n * resolve and reject functions.\n *\n * This is preferred instead of creating a Promise instance to extract the\n * resolve/reject functions yourself:\n *\n * ```\n * // Avoid doing\n * let resolve;\n * const promise = new Promise(res => {\n *   resolve = res;\n * });\n *\n * // Good\n * const deferred = new Deferred();\n * const { promise, resolve } = deferred;\n * ```\n *\n * @template T\n */\nexport class Deferred {\n  /**\n   * Creates an instance of Deferred.\n   */\n  constructor() {\n    let resolve, reject;\n\n    /**\n     * @const {!Promise<T>}\n     */\n    this.promise = new /*OK*/Promise((res, rej) => {\n      resolve = res;\n      reject = rej;\n    });\n\n    /**\n     * @const {function(T=)}\n     */\n    this.resolve = resolve;\n\n    /**\n     * @const {function(*=)}\n     */\n    this.reject = reject;\n  }\n}\n\n/**\n * Creates a promise resolved to the return value of fn.\n * If fn sync throws, it will cause the promise to reject.\n *\n * @param {function():T} fn\n * @return {!Promise<T>}\n * @template T\n */\nexport function tryResolve(fn) {\n  return new Promise(resolve => {\n    resolve(fn());\n  });\n}\n\n/**\n * Returns a promise which resolves if a threshold amount of the given promises\n * resolve, and rejects otherwise.\n * @param {!Array<!Promise>} promises The array of promises to test.\n * @param {number} count The number of promises that must resolve for the\n *     returned promise to resolve.\n * @return {!Promise} A promise that resolves if any of the given promises\n *     resolve, and which rejects otherwise.\n */\nexport function some(promises, count = 1) {\n  return new Promise((resolve, reject) => {\n    count = Math.max(count, 0);\n    const extra = promises.length - count;\n    if (extra < 0) {\n      reject(new Error('not enough promises to resolve'));\n    }\n    if (promises.length == 0) {\n      resolve([]);\n    }\n    const values = [];\n    const reasons = [];\n\n    const onFulfilled = value => {\n      if (values.length < count) {\n        values.push(value);\n      }\n      if (values.length == count) {\n        resolve(values);\n      }\n    };\n    const onRejected = reason => {\n      if (reasons.length <= extra) {\n        reasons.push(reason);\n      }\n      if (reasons.length > extra) {\n        reject(reasons);\n      }\n    };\n    for (let i = 0; i < promises.length; i++) {\n      Promise.resolve(promises[i]).then(onFulfilled, onRejected);\n    }\n  });\n}\n\n/**\n * Resolves with the result of the last promise added.\n * @implements {IThenable}\n */\nexport class LastAddedResolver {\n  /**\n   * @param {!Array<!Promise>=} opt_promises\n   */\n  constructor(opt_promises) {\n    let resolve_, reject_;\n    /** @private @const {!Promise} */\n    this.promise_ = new Promise((resolve, reject) => {\n      resolve_ = resolve;\n      reject_ = reject;\n    });\n\n    /** @private */\n    this.resolve_ = resolve_;\n\n    /** @private */\n    this.reject_ = reject_;\n\n    /** @private */\n    this.count_ = 0;\n\n    if (opt_promises) {\n      for (let i = 0; i < opt_promises.length; i++) {\n        this.add(opt_promises[i]);\n      }\n    }\n  }\n\n  /**\n   * Add a promise to possibly be resolved.\n   * @param {!Promise} promise\n   * @return {!Promise}\n   */\n  add(promise) {\n    const countAtAdd = ++this.count_;\n    Promise.resolve(promise).then(result => {\n      if (this.count_ === countAtAdd) {\n        this.resolve_(result);\n      }\n    }, error => {\n      // Don't follow behavior of Promise.all and Promise.race error so that\n      // this will only reject when most recently added promise fails.\n      if (this.count_ === countAtAdd) {\n        this.reject_(error);\n      }\n    });\n    return this.promise_;\n  }\n\n  /** @override */\n  then(opt_resolve, opt_reject) {\n    return this.promise_.then(opt_resolve, opt_reject);\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Wraps a given callback and applies a rate limit.\n * It throttles the calls so that no consequent calls have time interval\n * smaller than the given minimal interval.\n *\n * @param {!Window} win\n * @param {function(...*)} callback\n * @param {number} minInterval the minimum time interval in millisecond\n * @return {function(...*)}\n */\nexport function throttle(win, callback, minInterval) {\n  let locker = 0;\n  let nextCallArgs = null;\n\n  /**\n   * @param {!Object} args\n   */\n  function fire(args) {\n    nextCallArgs = null;\n    // Lock the fire for minInterval milliseconds\n    locker = win.setTimeout(waiter, minInterval);\n\n    callback.apply(null, args);\n  }\n\n  /**\n   * Waiter function\n   */\n  function waiter() {\n    locker = 0;\n    // If during the period there're invocations queued up, fire once.\n    if (nextCallArgs) {\n      fire(nextCallArgs);\n    }\n  }\n\n  return function(...args) {\n    if (locker) {\n      nextCallArgs = args;\n    } else {\n      fire(args);\n    }\n  };\n}\n\n/**\n * Wraps a given callback and applies a wait timer, so that minInterval\n * milliseconds must pass since the last call before the callback is actually\n * invoked.\n *\n * @param {!Window} win\n * @param {function(...*)} callback\n * @param {number} minInterval the minimum time interval in millisecond\n * @return {function(...*)}\n */\nexport function debounce(win, callback, minInterval) {\n  let locker = 0;\n  let timestamp = 0;\n  let nextCallArgs = null;\n\n  /**\n   * @param {?Array} args\n   */\n  function fire(args) {\n    nextCallArgs = null;\n    callback.apply(null, args);\n  }\n\n  /**\n   * Wait function for debounce\n   */\n  function waiter() {\n    locker = 0;\n    const remaining = minInterval - (win.Date.now() - timestamp);\n    if (remaining > 0) {\n      locker = win.setTimeout(waiter, remaining);\n    } else {\n      fire(nextCallArgs);\n    }\n  }\n\n  return function(...args) {\n    timestamp = win.Date.now();\n    nextCallArgs = args;\n    if (!locker) {\n      locker = win.setTimeout(waiter, minInterval);\n    }\n  };\n}\n","/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */\n\n\n/**\n * This regex consists of 4 matching capture groups and one (non-matching) fallback:\n *\n * - (\\0), catch the null terminator character so it may be replaced by UTF\n *   Replacement Char\n * - ^(-)$, catch a solitary dash char, so that it may be backslash escaped.\n *   This is a separate capture group so that the legal-chars (group 4) doesn't\n *   capture it first, since that group doesn't need to escape its dash.\n * - ([\\x01-\\x1f\\x7f]|^-?[0-9]), catch a UTF control char, or any leading\n *   number (with an optional leading dash). The control or the number (but not\n *   the leading dash) must be hex-escaped,.\n * - ([\\x80-\\uffff0-9a-zA-Z_-]+), catch legal-chars, with the exception of a\n *   solitary dash, which will already have matched in group 1.\n * - [^], finally, a catch-all that allows us to backslash escape the char.\n *\n * Together, this matches everything necessary for CSS.escape.\n */\nvar regex = /(\\0)|^(-)$|([\\x01-\\x1f\\x7f]|^-?[0-9])|([\\x80-\\uffff0-9a-zA-Z_-]+)|[^]/g;\n\nfunction escaper(match, nil, dash, hexEscape, chars) {\n  // Chars is the legal-chars (group 4) capture\n  if (chars) {\n    return chars;\n  }\n  // Nil is the null terminator (group 1) capture\n  if (nil) {\n    return '\\uFFFD';\n  }\n  // Both UTF control chars, and leading numbers (with optional leading dash)\n  // (group 3) must be backslash escaped with a trailing space.  Funnily, the\n  // leading dash must not be escaped, but the number. :shrug:\n  if (hexEscape) {\n    return match.slice(0, -1) + '\\\\' + match.slice(-1).charCodeAt(0).toString(16) + ' '\n  }\n  // Finally, the solitary dash and the catch-all chars require backslash\n  // escaping.\n  return '\\\\' + match;\n}\n\n/**\n * https://drafts.csswg.org/cssom/#serialize-an-identifier\n * @param {string} value\n * @return {string}\n */\nexport function cssEscape(value) {\n  return String(value).replace(regex, escaper);\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhZHMvX2E0YS1jb25maWcuanMiLCJhZHMvX2NvbmZpZy5qcyIsImFkcy9nb29nbGUvYTRhL2V4cGVyaW1lbnQtdXRpbHMuanMiLCJhZHMvZ29vZ2xlL2E0YS90cmFmZmljLWV4cGVyaW1lbnRzLmpzIiwiYWRzL2dvb2dsZS9hNGEvdXJsLWJ1aWxkZXIuanMiLCJhZHMvZ29vZ2xlL2E0YS91dGlscy5qcyIsImJ1aWxkL2FtcC1hZC0wLjEuY3NzLmpzIiwiZXh0ZW5zaW9ucy9hbXAtYWQtbmV0d29yay1hZHNlbnNlLWltcGwvMC4xL2Fkc2Vuc2UtYTRhLWNvbmZpZy5qcyIsImV4dGVuc2lvbnMvYW1wLWFkLW5ldHdvcmstY2xvdWRmbGFyZS1pbXBsLzAuMS9jbG91ZGZsYXJlLWE0YS1jb25maWcuanMiLCJleHRlbnNpb25zL2FtcC1hZC1uZXR3b3JrLWdtb3NzcC1pbXBsLzAuMS9nbW9zc3AtYTRhLWNvbmZpZy5qcyIsImV4dGVuc2lvbnMvYW1wLWFkLW5ldHdvcmstdHJpcGxlbGlmdC1pbXBsLzAuMS90cmlwbGVsaWZ0LWE0YS1jb25maWcuanMiLCJleHRlbnNpb25zL2FtcC1hZC8wLjEvYW1wLWFkLTNwLWltcGwuanMiLCJleHRlbnNpb25zL2FtcC1hZC8wLjEvYW1wLWFkLWN1c3RvbS5qcyIsImV4dGVuc2lvbnMvYW1wLWFkLzAuMS9hbXAtYWQtdWkuanMiLCJleHRlbnNpb25zL2FtcC1hZC8wLjEvYW1wLWFkLXhvcmlnaW4taWZyYW1lLWhhbmRsZXIuanMiLCJleHRlbnNpb25zL2FtcC1hZC8wLjEvYW1wLWFkLmpzIiwiZXh0ZW5zaW9ucy9hbXAtYWQvMC4xL2NvbmN1cnJlbnQtbG9hZC5qcyIsIm5vZGVfbW9kdWxlcy9kb2N1bWVudC1yZWdpc3Rlci1lbGVtZW50L2J1aWxkL2RvY3VtZW50LXJlZ2lzdGVyLWVsZW1lbnQucGF0Y2hlZC5qcyIsIm5vZGVfbW9kdWxlcy9wcm9taXNlLXBqcy9wcm9taXNlLmpzIiwic3JjLzNwLWZyYW1lLW1lc3NhZ2luZy5qcyIsInNyYy8zcC1mcmFtZS5qcyIsInNyYy9hZC1jaWQuanMiLCJzcmMvYWQtaGVscGVyLmpzIiwic3JjL2FtcC1ldmVudHMuanMiLCJzcmMvYW5hbHl0aWNzLmpzIiwic3JjL2NvbW1vbi1zaWduYWxzLmpzIiwic3JjL2NvbmZpZy5qcyIsInNyYy9jb25zZW50LXN0YXRlLmpzIiwic3JjL2NvbnNlbnQuanMiLCJzcmMvY29va2llcy5qcyIsInNyYy9kb20uanMiLCJzcmMvZWxlbWVudC1zZXJ2aWNlLmpzIiwic3JjL2Vycm9yLmpzIiwic3JjL2V2ZW50LWhlbHBlci1saXN0ZW4uanMiLCJzcmMvZXZlbnQtaGVscGVyLmpzIiwic3JjL2V4cGVyaW1lbnRzLmpzIiwic3JjL2V4cG9uZW50aWFsLWJhY2tvZmYuanMiLCJzcmMvZ2V0LWh0bWwuanMiLCJzcmMvaWZyYW1lLWF0dHJpYnV0ZXMuanMiLCJzcmMvaWZyYW1lLWhlbHBlci5qcyIsInNyYy9pbnRlcnNlY3Rpb24tb2JzZXJ2ZXIuanMiLCJzcmMvanNvbi5qcyIsInNyYy9sYXlvdXQtcmVjdC5qcyIsInNyYy9sYXlvdXQuanMiLCJzcmMvbG9nLmpzIiwic3JjL21vZGUtb2JqZWN0LmpzIiwic3JjL21vZGUuanMiLCJzcmMvcG9seWZpbGxzLmpzIiwic3JjL3BvbHlmaWxscy9hcnJheS1pbmNsdWRlcy5qcyIsInNyYy9wb2x5ZmlsbHMvY3VzdG9tLWVsZW1lbnRzLmpzIiwic3JjL3BvbHlmaWxscy9kb2N1bWVudC1jb250YWlucy5qcyIsInNyYy9wb2x5ZmlsbHMvZG9tdG9rZW5saXN0LXRvZ2dsZS5qcyIsInNyYy9wb2x5ZmlsbHMvbWF0aC1zaWduLmpzIiwic3JjL3BvbHlmaWxscy9vYmplY3QtYXNzaWduLmpzIiwic3JjL3BvbHlmaWxscy9wcm9taXNlLmpzIiwic3JjL3JlbmRlci1kZWxheWluZy1zZXJ2aWNlcy5qcyIsInNyYy9zZXJ2aWNlLmpzIiwic3JjL3NlcnZpY2UvdmFyaWFibGUtc291cmNlLmpzIiwic3JjL3NlcnZpY2VzLmpzIiwic3JjL3N0YXRpYy10ZW1wbGF0ZS5qcyIsInNyYy9zdHJpbmcuanMiLCJzcmMvc3R5bGUtaW5zdGFsbGVyLmpzIiwic3JjL3N0eWxlLmpzIiwic3JjL3R5cGVzLmpzIiwic3JjL3VybC1wYXJzZS1xdWVyeS1zdHJpbmcuanMiLCJzcmMvdXJsLXRyeS1kZWNvZGUtdXJpLWNvbXBvbmVudC5qcyIsInNyYy91cmwuanMiLCJzcmMvdXRpbHMvYXJyYXkuanMiLCJzcmMvdXRpbHMvZG9tLWZpbmdlcnByaW50LmpzIiwic3JjL3V0aWxzL2xydS1jYWNoZS5qcyIsInNyYy91dGlscy9tYXRoLmpzIiwic3JjL3V0aWxzL29iamVjdC5qcyIsInNyYy91dGlscy9wcm9taXNlLmpzIiwic3JjL3V0aWxzL3JhdGUtbGltaXQuanMiLCJ0aGlyZF9wYXJ0eS9jc3MtZXNjYXBlL2Nzcy1lc2NhcGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7O1FDb0RnQixjLEdBQUEsYzs7QUFwQ2hCOztBQUdBOztBQUlBOztBQUlBOztBQUNBOztBQUtBOzs7Ozs7Ozs7Ozs7O0FBYUEsSUFBSSxvQkFBSjs7QUFFQTs7OztBQWhEQTs7Ozs7Ozs7Ozs7Ozs7OztBQW9ETyxTQUFTLGNBQVQsR0FBMEI7QUFDL0IsTUFBSSxDQUFDLFdBQUwsRUFBa0I7QUFDaEIsa0JBQWMsaUJBQUk7QUFDaEIsc0RBRGdCO0FBRWhCLGdCQUFVO0FBQUEsZUFBTSxJQUFOO0FBQUEsT0FGTTtBQUdoQixxQkFBZTtBQUFBLGVBQU0sSUFBTjtBQUFBLE9BSEM7QUFJaEIsK0RBSmdCO0FBS2hCLCtEQUxnQjtBQU1oQixtREFOZ0I7QUFPaEIsY0FBUTtBQUFBLGVBQU0sSUFBTjtBQUFBO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVpnQixLQUFKLENBQWQ7QUFjRDs7QUFFRCxTQUFPLFdBQVA7QUFDRDs7QUFFRDs7OztBQUlPLElBQU0sZ0RBQW9CO0FBQy9CLFlBQVUs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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbjZDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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TyxPQUFPLEtBQWQ7QUFDRDs7QUFFRDs7Ozs7QUFLTyxTQUFTLFNBQVQsQ0FBbUIsS0FBbkIsRUFBMEI7QUFDL0IsU0FBTyxPQUFPLEtBQVAsRUFBYyxPQUFkLENBQXNCLEtBQXRCLEVBQTZCLE9BQTdCLENBQVA7QUFDRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgYWRzZW5zZUlzQTRBRW5hYmxlZCxcbn0gZnJvbSAnLi4vZXh0ZW5zaW9ucy9hbXAtYWQtbmV0d29yay1hZHNlbnNlLWltcGwvMC4xL2Fkc2Vuc2UtYTRhLWNvbmZpZyc7XG5pbXBvcnQge1xuICBjbG91ZGZsYXJlSXNBNEFFbmFibGVkLFxufSBmcm9tXG4gICcuLi9leHRlbnNpb25zL2FtcC1hZC1uZXR3b3JrLWNsb3VkZmxhcmUtaW1wbC8wLjEvY2xvdWRmbGFyZS1hNGEtY29uZmlnJztcbmltcG9ydCB7XG4gIGdtb3NzcElzQTRBRW5hYmxlZCxcbn0gZnJvbVxuICAnLi4vZXh0ZW5zaW9ucy9hbXAtYWQtbmV0d29yay1nbW9zc3AtaW1wbC8wLjEvZ21vc3NwLWE0YS1jb25maWcnO1xuaW1wb3J0IHttYXB9IGZyb20gJy4uL3NyYy91dGlscy9vYmplY3QnO1xuaW1wb3J0IHtcbiAgdHJpcGxlbGlmdElzQTRBRW5hYmxlZCxcbn0gZnJvbVxuICAnLi4vZXh0ZW5zaW9ucy9hbXAtYWQtbmV0d29yay10cmlwbGVsaWZ0LWltcGwvMC4xL3RyaXBsZWxpZnQtYTRhLWNvbmZpZyc7XG5cbi8qKlxuICogUmVnaXN0cnkgZm9yIEE0QSAoQU1QIEFkcyBmb3IgQU1QSFRNTCBwYWdlcykgXCJpcyBzdXBwb3J0ZWRcIiBwcmVkaWNhdGVzLlxuICogSWYgYW4gYWQgbmV0d29yaywge0Bjb2RlICR7TkVUV09SS319LCBpcyByZWdpc3RlcmVkIGluIHRoaXMgb2JqZWN0LCB0aGVuIHRoZVxuICoge0Bjb2RlIDxhbXAtYWQgdHlwZT1cIiR7TkVUV09SS31cIj59IGltcGxlbWVudGF0aW9uIHdpbGwgbG9vayB1cCBpdHMgcHJlZGljYXRlXG4gKiBoZXJlLiBJZiB0aGVyZSBpcyBhIHByZWRpY2F0ZSBhbmQgaXQgYW5kIHJldHVybnMge0Bjb2RlIHRydWV9LCB0aGVuXG4gKiB7QGNvZGUgYW1wLWFkfSB3aWxsIGF0dGVtcHQgdG8gcmVuZGVyIHRoZSBhZCB2aWEgdGhlIEE0QSBwYXRod2F5IChmZXRjaFxuICogYWQgY3JlYXRpdmUgdmlhIGVhcmx5IFhIUiBDT1JTIHJlcXVlc3Q7IHZlcmlmeSB0aGF0IGl0IGlzIHZhbGlkYXRlZCBBTVA7XG4gKiBhbmQgdGhlbiByZW5kZXIgZGlyZWN0bHkgaW4gdGhlIGhvc3QgcGFnZSBieSBzcGxpY2luZyBpbnRvIHRoZSBob3N0IERPTSkuXG4gKiBPdGhlcndpc2UsIGl0IHdpbGwgYXR0ZW1wdCB0byByZW5kZXIgdGhlIGFkIHZpYSB0aGUgZXhpc3RpbmcgXCIzcCBpZnJhbWVcIlxuICogcGF0aHdheSAoZGVsYXkgbG9hZCBpbnRvIGEgY3Jvc3MtZG9tYWluIGlmcmFtZSkuXG4gKlxuICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBmdW5jdGlvbighV2luZG93LCAhRWxlbWVudCk6IGJvb2xlYW4+fVxuICovXG5sZXQgYTRhUmVnaXN0cnk7XG5cbi8qKlxuICogUmV0dXJucyB0aGUgYTRhIHJlZ2lzdHJ5IG1hcFxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QTRBUmVnaXN0cnkoKSB7XG4gIGlmICghYTRhUmVnaXN0cnkpIHtcbiAgICBhNGFSZWdpc3RyeSA9IG1hcCh7XG4gICAgICAnYWRzZW5zZSc6IGFkc2Vuc2VJc0E0QUVuYWJsZWQsXG4gICAgICAnYWR6ZXJrJzogKCkgPT4gdHJ1ZSxcbiAgICAgICdkb3VibGVjbGljayc6ICgpID0+IHRydWUsXG4gICAgICAndHJpcGxlbGlmdCc6IHRyaXBsZWxpZnRJc0E0QUVuYWJsZWQsXG4gICAgICAnY2xvdWRmbGFyZSc6IGNsb3VkZmxhcmVJc0E0QUVuYWJsZWQsXG4gICAgICAnZ21vc3NwJzogZ21vc3NwSXNBNEFFbmFibGVkLFxuICAgICAgJ2Zha2UnOiAoKSA9PiB0cnVlLFxuICAgICAgLy8gVE9ETzogQWRkIG5ldyBhZCBuZXR3b3JrIGltcGxlbWVudGF0aW9uIFwiaXMgZW5hYmxlZFwiIGZ1bmN0aW9ucyBoZXJlLlxuICAgICAgLy8gTm90ZTogaWYgeW91IGFkZCBhIGZ1bmN0aW9uIGhlcmUgdGhhdCByZXF1aXJlcyBhIG5ldyBcImltcG9ydFwiLCBhYm92ZSxcbiAgICAgIC8vIHlvdSdsbCBwcm9iYWJseSBhbHNvIG5lZWQgdG8gYWRkIGEgd2hpdGVsaXN0IGV4Y2VwdGlvbiB0b1xuICAgICAgLy8gYnVpbGQtc3lzdGVtL2RlcC1jaGVjay1jb25maWcuanMgaW4gdGhlIFwiZmlsZXNNYXRjaGluZzogJ2Fkcy8qKi8qLmpzJ1xuICAgICAgLy8gcnVsZS5cbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBhNGFSZWdpc3RyeTtcbn1cblxuLyoqXG4gKiBBbiBvYmplY3QgbWFwcGluZyBzaWduaW5nIHNlcnZlciBuYW1lcyB0byB0aGVpciBjb3JyZXNwb25kaW5nIFVSTHMuXG4gKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz59XG4gKi9cbmV4cG9ydCBjb25zdCBzaWduaW5nU2VydmVyVVJMcyA9IHtcbiAgJ2dvb2dsZSc6ICdodHRwczovL2Nkbi5hbXBwcm9qZWN0Lm9yZy9hbXAtYWQtdmVyaWZ5aW5nLWtleXNldC5qc29uJyxcbiAgJ2dvb2dsZS1kZXYnOiAnaHR0cHM6Ly9jZG4uYW1wcHJvamVjdC5vcmcvYW1wLWFkLXZlcmlmeWluZy1rZXlzZXQtZGV2Lmpzb24nLFxuICAnY2xvdWRmbGFyZSc6ICdodHRwczovL2FtcC5jbG91ZGZsYXJlLmNvbS9hbXAtYWQtdmVyaWZ5aW5nLWtleXNldC5qc29uJyxcbiAgJ2Nsb3VkZmxhcmUtZGV2JzogJ2h0dHBzOi8vYW1wLmNsb3VkZmxhcmUuY29tL2FtcC1hZC12ZXJpZnlpbmcta2V5c2V0LWRldi5qc29uJyxcbn07XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7e1xuICogICBwcmVmZXRjaDogKHN0cmluZ3x1bmRlZmluZWQpLFxuICogICBwcmVjb25uZWN0OiAoc3RyaW5nfHVuZGVmaW5lZCksXG4gKiAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IChib29sZWFufHVuZGVmaW5lZCksXG4gKiAgIGNsaWVudElkU2NvcGU6IChzdHJpbmd8dW5kZWZpbmVkKSxcbiAqICAgY2xpZW50SWRDb29raWVOYW1lOiAoc3RyaW5nfHVuZGVmaW5lZCksXG4gKiAgIGNvbnNlbnRIYW5kbGluZ092ZXJyaWRlOiAoYm9vbGVhbnx1bmRlZmluZWQpLFxuICogICByZW1vdGVIVE1MRGlzYWJsZWQ6IChib29sZWFufHVuZGVmaW5lZCksXG4gKiAgIGZ1bGxXaWR0aEhlaWdodFJhdGlvOiAobnVtYmVyfHVuZGVmaW5lZCksXG4gKiB9fVxuICovXG5sZXQgQWROZXR3b3JrQ29uZmlnRGVmO1xuXG4vKipcbiAqIFRoZSBjb25maWcgb2YgZWFjaCBhZCBuZXR3b3JrLlxuICogUGxlYXNlIGtlZXAgdGhlIGxpc3QgYWxwaGFiZXRpYyBvcmRlci5cbiAqXG4gKiB5b3VyTmV0d29ya05hbWU6IHsgIC8vIFRoaXMgaXMgdGhlIFwidHlwZVwiIGF0dHJpYnV0ZSBvZiA8YW1wLWFkPlxuICpcbiAqICAgLy8gTGlzdCBvZiBVUkxzIGZvciBwcmVmZXRjaFxuICogICBwcmVmZXRjaDogc3RyaW5nfGFycmF5XG4gKlxuICogICAvLyBMaXN0IG9mIGhvc3RzIGZvciBwcmVjb25uZWN0XG4gKiAgIHByZWNvbm5lY3Q6IHN0cmluZ3xhcnJheVxuICpcbiAqICAgLy8gVGhlIHNjb3BlIHVzZWQgdG8gcHJvdmlkZSBDSURzIHRvIGFkc1xuICogICBjbGllbnRJZFNjb3BlOiBzdHJpbmdcbiAqXG4gKiAgIC8vIFRoZSBjb29raWUgbmFtZSB0byBzdG9yZSB0aGUgQ0lELiBJbiBhYnNlbmNlLCBgY2xpZW50SWRTY29wZWAgaXMgdXNlZC5cbiAqICAgY2xpZW50SWRDb29raWVOYW1lOiBzdHJpbmdcbiAqXG4gKiAgIC8vIElmIHRoZSBhZCBuZXR3b3JrIGlzIHdpbGxpbmcgdG8gb3ZlcnJpZGUgdGhlIGNvbnNlbnQgaGFuZGxpbmcsIHdoaWNoXG4gKiAgIC8vIGJ5IGRlZmF1bHQgaXMgYmxvY2tpbmcgYWQgbG9hZCB1bnRpbCB0aGUgY29uc2VudCBpcyBhY2NlcHRlZC5cbiAqICAgY29uc2VudEhhbmRsaW5nT3ZlcnJpZGU6IGJvb2xlYW5cbiAqXG4gKiAgIC8vIFdoZXRoZXIgcmVuZGVyLXN0YXJ0IEFQSSBoYXMgYmVlbiBpbXBsZW1lbnRlZFxuICogICAvLyBXZSBoaWdobHkgcmVjb21tZW5kIGFsbCBuZXR3b3JrcyB0byBpbXBsZW1lbnQgdGhlIEFQSSxcbiAqICAgLy8gc2VlIGRldGFpbHMgaW4gdGhlIFJFQURNRS5tZFxuICogICByZW5kZXJTdGFydEltcGxlbWVudGVkOiBib29sZWFuXG4gKlxuICogICAvLyBUaGUgd2lkdGggLyBoZWlnaHQgcmF0aW8gZm9yIGZ1bGwgd2lkdGggYWQgdW5pdHMuXG4gKiAgIC8vIElmIGFic2VudCwgaXQgbWVhbnMgdGhlIG5ldHdvcmsgZG9lcyBub3Qgc3VwcG9ydCBmdWxsIHdpZHRoIGFkIHVuaXRzLlxuICogICAvLyBFeGFtcGxlIHZhbHVlOiAxLjJcbiAqICAgZnVsbFdpZHRoSGVpZ2h0UmF0aW86IG51bWJlclxuICogfVxuICpcbiAqIEBjb25zdCB7IU9iamVjdDxzdHJpbmcsICFBZE5ldHdvcmtDb25maWdEZWY+fX1cbiAqL1xuZXhwb3J0IGNvbnN0IGFkQ29uZmlnID0ge1xuICAnX3BpbmdfJzoge1xuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gICAgY2xpZW50SWRTY29wZTogJ19QSU5HXycsXG4gICAgY29uc2VudEhhbmRsaW5nT3ZlcnJpZGU6IHRydWUsXG4gIH0sXG5cbiAgJzI0c21pJzoge1xuICAgIHByZWZldGNoOiAnaHR0cHM6Ly9qc24uMjRzbWkubmV0L3NtaS5qcycsXG4gICAgcHJlY29ubmVjdDogJ2h0dHBzOi8vZGF0YS4yNHNtaS5uZXQnLFxuICB9LFxuXG4gICdhOCc6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vc3RhdGljcy5hOC5uZXQvYW1wL2FkLmpzJyxcbiAgICByZW5kZXJTdGFydEltcGxlbWVudGVkOiB0cnVlLFxuICB9LFxuXG4gICdhOSc6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vYy5hbWF6b24tYWRzeXN0ZW0uY29tL2FheDIvYXNzb2MuanMnLFxuICB9LFxuXG4gICdhY2Nlc3N0cmFkZSc6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vaC5hY2Nlc3N0cmFkZS5uZXQvanMvYW1wL2FtcC5qcycsXG4gIH0sXG5cbiAgJ2FkYWdpbyc6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vanMtc3NsLm5lb2RhdGFncm91cC5jb20vYWRhZ2lvX2FtcC5qcycsXG4gICAgcHJlY29ubmVjdDogW1xuICAgICAgJ2h0dHBzOi8vYWQtYXdzLWl0Lm5lb2RhdGFncm91cC5jb20nLFxuICAgICAgJ2h0dHBzOi8vdHJhY2tlci5uZW9kYXRhZ3JvdXAuY29tJyxcbiAgICBdLFxuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ2FkYmxhZGUnOiB7XG4gICAgcHJlZmV0Y2g6ICdodHRwczovL3dlYi5hZGJsYWRlLmNvbS9qcy9hZHMvYXN5bmMvc2hvdy5qcycsXG4gICAgcHJlY29ubmVjdDogW1xuICAgICAgJ2h0dHBzOi8vc3RhdGljZC5jZG4uYWRibGFkZS5jb20nLFxuICAgICAgJ2h0dHBzOi8vc3RhdGljLmFkYmxhZGUuY29tJyxcbiAgICBdLFxuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ2FkYnV0bGVyJzoge1xuICAgIHByZWZldGNoOiAnaHR0cHM6Ly9zZXJ2ZWRieWFkYnV0bGVyLmNvbS9hcHAuanMnLFxuICB9LFxuXG4gICdhZGZvcm0nOiB7fSxcblxuICAnYWRmb3gnOiB7XG4gICAgcHJlZmV0Y2g6ICdodHRwczovL3lhc3RhdGljLm5ldC9wY29kZS9hZGZveC9sb2FkZXIuanMnLFxuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ2FkZ2VuZXJhdGlvbic6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vaS5zb2NkbS5jb20vc2RrL2pzL2FkZy1zY3JpcHQtbG9hZGVyLmpzJyxcbiAgfSxcblxuICAnYWRoZXNlJzoge1xuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ2FkaW5jdWJlJzoge1xuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ2FkaXRpb24nOiB7fSxcblxuICAnYWRtYW4nOiB7fSxcblxuICAnYWRtYW5tZWRpYSc6IHtcbiAgICByZW5kZXJTdGFydEltcGxlbWVudGVkOiB0cnVlLFxuICB9LFxuXG4gICdhZG1peGVyJzoge1xuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gICAgcHJlY29ubmVjdDogW1xuICAgICAgJ2h0dHBzOi8vaW52LW5ldHMuYWRtaXhlci5uZXQnLFxuICAgICAgJ2h0dHBzOi8vY2RuLmFkbWl4ZXIubmV0JyxcbiAgICBdLFxuICB9LFxuXG4gICdhZG9jZWFuJzoge30sXG5cbiAgJ2FkcGlja2VyJzoge1xuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ2FkcGx1Z2cnOiB7XG4gICAgcHJlZmV0Y2g6ICdodHRwczovL3d3dy5hZHBsdWdnLmNvbS9zZXJ2ZS9qcy9hZC5qcycsXG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAnYWRyZWFjdG9yJzoge30sXG5cbiAgJ2Fkc2Vuc2UnOiB7XG4gICAgcHJlZmV0Y2g6ICdodHRwczovL3BhZ2VhZDIuZ29vZ2xlc3luZGljYXRpb24uY29tL3BhZ2VhZC9qcy9hZHNieWdvb2dsZS5qcycsXG4gICAgcHJlY29ubmVjdDogJ2h0dHBzOi8vZ29vZ2xlYWRzLmcuZG91YmxlY2xpY2submV0JyxcbiAgICBjbGllbnRJZFNjb3BlOiAnQU1QX0VDSURfR09PR0xFJyxcbiAgICBjbGllbnRJZENvb2tpZU5hbWU6ICdfZ2EnLFxuICAgIHJlbW90ZUhUTUxEaXNhYmxlZDogdHJ1ZSxcbiAgICBtYXN0ZXJGcmFtZUFjY2Vzc2libGVUeXBlOiAnZ29vZ2xlX25ldHdvcmsnLFxuICAgIGZ1bGxXaWR0aEhlaWdodFJhdGlvOiAxLjIsXG4gICAgY29uc2VudEhhbmRsaW5nT3ZlcnJpZGU6IHRydWUsXG4gIH0sXG5cbiAgJ2Fkc25hdGl2ZSc6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vc3RhdGljLmFkc25hdGl2ZS5jb20vc3RhdGljL2pzL3JlbmRlci52MS5qcycsXG4gICAgcHJlY29ubmVjdDogJ2h0dHBzOi8vYXBpLmFkc25hdGl2ZS5jb20nLFxuICB9LFxuXG4gICdhZHNwZWVkJzoge1xuICAgIHByZWNvbm5lY3Q6ICdodHRwczovL2cuYWRzcGVlZC5uZXQnLFxuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ2Fkc3Bpcml0Jzoge30sXG5cbiAgJ2Fkc3Rpcic6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vanMuYWQtc3Rpci5jb20vanMvYWRzdGlyX2FzeW5jLmpzJyxcbiAgICBwcmVjb25uZWN0OiAnaHR0cHM6Ly9hZC5hZC1zdGlyLmNvbScsXG4gIH0sXG5cbiAgJ2FkdGVjaCc6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vcy5hb2xjZG4uY29tL29zL2Fkcy9hZHNXcmFwcGVyMy5qcycsXG4gICAgcHJlY29ubmVjdDogW1xuICAgICAgJ2h0dHBzOi8vbWFkcy5hdC5hdHdvbGEuY29tJyxcbiAgICAgICdodHRwczovL2FrYS1jZG4uYWR0ZWNodXMuY29tJyxcbiAgICBdLFxuICB9LFxuXG4gICdhZHRocml2ZSc6IHtcbiAgICBwcmVmZXRjaDogW1xuICAgICAgJ2h0dHBzOi8vd3d3Lmdvb2dsZXRhZ3NlcnZpY2VzLmNvbS90YWcvanMvZ3B0LmpzJyxcbiAgICBdLFxuICAgIHByZWNvbm5lY3Q6IFtcbiAgICAgICdodHRwczovL3BhcnRuZXIuZ29vZ2xlYWRzZXJ2aWNlcy5jb20nLFxuICAgICAgJ2h0dHBzOi8vc2VjdXJlcHViYWRzLmcuZG91YmxlY2xpY2submV0JyxcbiAgICAgICdodHRwczovL3RwYy5nb29nbGVzeW5kaWNhdGlvbi5jb20nLFxuICAgIF0sXG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAnYWR1bml0eSc6IHtcbiAgICBwcmVjb25uZWN0OiBbXG4gICAgICAnaHR0cHM6Ly9jb250ZW50LmFkdW5pdHkuY29tJyxcbiAgICBdLFxuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ2FkdXB0ZWNoJzoge1xuICAgIHByZWZldGNoOiAnaHR0cHM6Ly9zLmQuYWR1cC10ZWNoLmNvbS9qc2FwaScsXG4gICAgcHJlY29ubmVjdDogW1xuICAgICAgJ2h0dHBzOi8vZC5hZHVwLXRlY2guY29tJyxcbiAgICAgICdodHRwczovL20uYWR1cC10ZWNoLmNvbScsXG4gICAgXSxcbiAgICByZW5kZXJTdGFydEltcGxlbWVudGVkOiB0cnVlLFxuICB9LFxuXG4gICdhZHZlbnRpdmUnOiB7XG4gICAgcHJlY29ubmVjdDogW1xuICAgICAgJ2h0dHBzOi8vYWRzLmFkdmVudGl2ZS5jb20nLFxuICAgICAgJ2h0dHBzOi8vYW1wLmFkdmVudGl2ZWRldi5jb20nLFxuICAgIF0sXG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAnYWR2ZXJsaW5lJzoge1xuICAgIHByZWZldGNoOiAnaHR0cHM6Ly9hZHMuYWR2ZXJsaW5lLmNvbS9yaWNobWVkaWFzL2FtcC5qcycsXG4gICAgcHJlY29ubmVjdDogW1xuICAgICAgJ2h0dHBzOi8vYWRuZXh0LmZyJyxcbiAgICBdLFxuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ2FkdmVydGljdW0nOiB7fSxcblxuICAnYWR2ZXJ0c2VydmUnOiB7XG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAnYWR6ZXJrJzoge30sXG5cbiAgJ2FmZmlsaWF0ZWInOiB7XG4gICAgcHJlZmV0Y2g6ICdodHRwczovL3RyYWNrLmFmZmlsaWF0ZS1iLmNvbS9hbXAvYS5qcycsXG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAnYWphJzoge1xuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gICAgcHJlZmV0Y2g6ICdodHRwczovL2Nkbi5hcy5hbWFuYWQuYWR0ZHAuY29tL3Nkay9hc290LXYyLmpzJyxcbiAgfSxcblxuICAnYXBwdmFkb3InOiB7XG4gICAgcHJlZmV0Y2g6IFtcbiAgICAgICdodHRwczovL2Nkbi5hcHZkci5jb20vanMvVmFzdEFkVW5pdC5taW4uanMnLFxuICAgICAgJ2h0dHBzOi8vY2RuLmFwdmRyLmNvbS9qcy9WaWRlb0FkLm1pbi5qcycsXG4gICAgICAnaHR0cHM6Ly9jZG4uYXB2ZHIuY29tL2pzL1ZpZGVvQWQzUEFTLm1pbi5qcycsXG4gICAgICAnaHR0cHM6Ly9jZG4uYXB2ZHIuY29tL2pzL1ZpZGVvQWRBdXRvUGxheS5taW4uanMnLFxuICAgICAgJ2h0dHBzOi8vY2RuLmFwdmRyLmNvbS9qcy9WaWRlb0FkTmF0aXZlLm1pbi5qcycsXG4gICAgXSxcbiAgICByZW5kZXJTdGFydEltcGxlbWVudGVkOiB0cnVlLFxuICB9LFxuXG4gICdhbW9hZCc6IHtcbiAgICBwcmVmZXRjaDogW1xuICAgICAgJ2h0dHBzOi8vai5hbW9hZC5jb20vanMvYS5qcycsXG4gICAgICAnaHR0cHM6Ly9qLmFtb2FkLmNvbS9qcy9uLmpzJyxcbiAgICBdLFxuICAgIHByZWNvbm5lY3Q6IFtcbiAgICAgICdodHRwczovL2QuYW1vYWQuY29tJyxcbiAgICAgICdodHRwczovL2kuYW1vYWQuY29tJyxcbiAgICAgICdodHRwczovL20uYW1vYWQuY29tJyxcbiAgICAgICdodHRwczovL3YuYW1vYWQuY29tJyxcbiAgICBdLFxuICB9LFxuXG4gICdhcHBuZXh1cyc6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vYWNkbi5hZG54cy5jb20vYXN0L2FzdC5qcycsXG4gICAgcHJlY29ubmVjdDogJ2h0dHBzOi8vaWIuYWRueHMuY29tJyxcbiAgICByZW5kZXJTdGFydEltcGxlbWVudGVkOiB0cnVlLFxuICB9LFxuXG4gICdhdG9teCc6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vcy5hdG8ubXgvcC5qcycsXG4gIH0sXG5cbiAgJ2Jlb3Bpbmlvbic6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vd2lkZ2V0LmJlb3Bpbmlvbi5jb20vc2RrLmpzJyxcbiAgICBwcmVjb25uZWN0OiBbXG4gICAgICAnaHR0cHM6Ly90LmJlb3Bpbmlvbi5jb20nLFxuICAgICAgJ2h0dHBzOi8vcy5iZW9waW5pb24uY29tJyxcbiAgICAgICdodHRwczovL2RhdGEuYmVvcGluaW9uLmNvbScsXG4gICAgXSxcbiAgICByZW5kZXJTdGFydEltcGxlbWVudGVkOiB0cnVlLFxuICB9LFxuXG4gICdiaWR0ZWxsZWN0Jzoge30sXG5cbiAgJ2JyYWlueSc6IHt9LFxuXG4gICdicmluZ2h1Yic6IHtcbiAgICByZW5kZXJTdGFydEltcGxlbWVudGVkOiB0cnVlLFxuICAgIHByZWNvbm5lY3Q6IFtcbiAgICAgICdodHRwczovL3N0YXRpYy5iaC1jZG4uY29tJyxcbiAgICAgICdodHRwczovL2NvcmUtYXBpLmJyaW5naHViLmlvJyxcbiAgICBdLFxuICB9LFxuXG4gICdicm9hZHN0cmVldGFkcyc6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vY2RuLmJyb2Fkc3RyZWV0YWRzLmNvbS9pbml0LTIubWluLmpzJyxcbiAgfSxcblxuICAnY2FhamFpbmZlZWQnOiB7XG4gICAgcHJlZmV0Y2g6IFtcbiAgICAgICdodHRwczovL2Nkbi5hbWFuYWQuYWR0ZHAuY29tL3Nkay9hamFhbXAuanMnLFxuICAgIF0sXG4gICAgcHJlY29ubmVjdDogW1xuICAgICAgJ2h0dHBzOi8vYWQuYW1hbmFkLmFkdGRwLmNvbScsXG4gICAgXSxcbiAgfSxcblxuICAnY2FwaXJzJzoge1xuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ2NhcHJvZml0eCc6IHtcbiAgICBwcmVmZXRjaDogW1xuICAgICAgJ2h0dHBzOi8vY2RuLmNhcHJvZml0eC5jb20vcGZ4Lm1pbi5qcycsXG4gICAgICAnaHR0cHM6Ly9jZG4uY2Fwcm9maXR4LmNvbS90YWdzL2FtcC9wcm9maXR4X2FtcC5qcycsXG4gICAgXSxcbiAgICBwcmVjb25uZWN0OiAnaHR0cHM6Ly9hZC5jYXByb2ZpdHguYWR0ZHAuY29tJyxcbiAgfSxcblxuICAnY2VkYXRvJzoge1xuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ2NoYXJnZWFkcyc6IHt9LFxuXG4gICdjb2xvbWJpYSc6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vc3RhdGljLmNsbWJ0ZWNoLmNvbS9hZC9jb21tb25zL2pzL2NvbG9tYmlhLWFtcC5qcycsXG4gIH0sXG5cbiAgJ2Nvbm5hdGl4Jzoge1xuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ2NvbnRlbnRhZCc6IHt9LFxuXG5cbiAgJ2NyaXRlbyc6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vc3RhdGljLmNyaXRlby5uZXQvanMvbGQvcHVibGlzaGVydGFnLmpzJyxcbiAgICBwcmVjb25uZWN0OiAnaHR0cHM6Ly9jYXMuY3JpdGVvLmNvbScsXG4gIH0sXG5cbiAgJ2NzYSc6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vd3d3Lmdvb2dsZS5jb20vYWRzZW5zZS9zZWFyY2gvYWRzLmpzJyxcbiAgfSxcblxuICAnZGFibGUnOiB7XG4gICAgcHJlY29ubmVjdDogW1xuICAgICAgJ2h0dHBzOi8vc3RhdGljLmRhYmxlLmlvJyxcbiAgICAgICdodHRwczovL2FwaS5kYWJsZS5pbycsXG4gICAgICAnaHR0cHM6Ly9pbWFnZXMuZGFibGUuaW8nLFxuICAgIF0sXG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAnZGlyZWN0YWR2ZXJ0Jzoge1xuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ2Rpc3Ryb3NjYWxlJzoge1xuICAgIHByZWNvbm5lY3Q6IFtcbiAgICAgICdodHRwczovL2MuanNyZG4uY29tJyxcbiAgICAgICdodHRwczovL3MuanNyZG4uY29tJyxcbiAgICAgICdodHRwczovL2kuanNyZG4uY29tJyxcbiAgICBdLFxuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ2RvdGFuZGFkcyc6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vYW1wLmFkLmRvdGFuZGFkLmNvbS9kb3RhbmRhZHNBbXAuanMnLFxuICAgIHByZWNvbm5lY3Q6ICdodHRwczovL2JhbC5hZC5kb3RhbmRhZC5jb20nLFxuICB9LFxuXG4gICdlYWR2Jzoge1xuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gICAgY2xpZW50SWRTY29wZTogJ0FNUF9FQ0lEX0VBRFYnLFxuICAgIHByZWZldGNoOiBbXG4gICAgICAnaHR0cHM6Ly93d3cuZWFkdi5pdC90cmFjay9lc3IubWluLmpzJyxcbiAgICAgICdodHRwczovL3d3dy5lYWR2Lml0L3RyYWNrL2VhZC5taW4uanMnLFxuICAgIF0sXG4gIH0sXG5cbiAgJ2Vhcyc6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vYW1wLmVtZWRpYXRlLmV1L2FtcC52MC5qcycsXG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAnZW5nYWdleWEnOiB7fSxcblxuICAnZXBlZXgnOiB7fSxcblxuICAnZXBsYW5uaW5nJzoge1xuICAgIHByZWZldGNoOiAnaHR0cHM6Ly91cy5pbWcuZS1wbGFubmluZy5uZXQvbGF5ZXJzL2VwbC1hbXAuanMnLFxuICB9LFxuXG4gICdlem9pYyc6IHtcbiAgICBwcmVmZXRjaDogW1xuICAgICAgJ2h0dHBzOi8vd3d3Lmdvb2dsZXRhZ3NlcnZpY2VzLmNvbS90YWcvanMvZ3B0LmpzJyxcbiAgICAgICdodHRwczovL2cuZXpvaWMubmV0L2V6b2ljL2FtcGFkLmpzJyxcbiAgICBdLFxuICAgIGNsaWVudElkU2NvcGU6ICdBTVBfRUNJRF9FWk9JQycsXG4gICAgY29uc2VudEhhbmRsaW5nT3ZlcnJpZGU6IHRydWUsXG4gIH0sXG5cbiAgJ2YxZSc6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vaW1nLmFrLmltcGFjdC1hZC5qcC91dGlsL2YxZV9hbXAubWluLmpzJyxcbiAgfSxcblxuICAnZjFoJzoge1xuICAgIHByZWNvbm5lY3Q6ICdodHRwczovL2ltZy5hay5pbXBhY3QtYWQuanAnLFxuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ2Zha2UnOiB7fSxcblxuICAnZmVsbWF0Jzoge1xuICAgIHByZWZldGNoOiAnaHR0cHM6Ly90LmZlbG1hdC5uZXQvanMvZm1hbXAuanMnLFxuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ2ZsaXRlJzoge30sXG5cbiAgJ2ZsdWN0Jzoge1xuICAgIHByZWNvbm5lY3Q6IFtcbiAgICAgICdodHRwczovL2Nkbi1mbHVjdC5zaC5hZGluZ28uanAnLFxuICAgICAgJ2h0dHBzOi8vcy5zaC5hZGluZ28uanAnLFxuICAgICAgJ2h0dHBzOi8vaS5hZGluZ28uanAnLFxuICAgIF0sXG4gIH0sXG5cbiAgJ2Z1c2lvbic6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vYXNzZXRzLmFkdG9tYWZ1c2lvbi5uZXQvZnVzaW9uL2xhdGVzdC9mdXNpb24tYW1wLm1pbi5qcycsXG4gIH0sXG5cbiAgJ2dlbmllZXNzcCc6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vanMuZ3NzcGNsbi5qcC9sL2FtcC5qcycsXG4gIH0sXG5cbiAgJ2dpcmFmZic6IHtcbiAgICByZW5kZXJTdGFydEltcGxlbWVudGVkOiB0cnVlLFxuICB9LFxuXG4gICdnbW9zc3AnOiB7XG4gICAgcHJlZmV0Y2g6ICdodHRwczovL2Nkbi5nbW9zc3Atc3AuanAvYWRzL2FtcC5qcycsXG4gIH0sXG5cbiAgJ2d1bWd1bSc6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vZzIuZ3VtZ3VtLmNvbS9qYXZhc2NyaXB0cy9hZC5qcycsXG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAnaG9sZGVyJzoge1xuICAgIHByZWZldGNoOiAnaHR0cHM6Ly9pLmhvbGRlci5jb20udWEvanMyL2hvbGRlci9hamF4L2FtcHYxLmpzJyxcbiAgICBwcmVjb25uZWN0OiAnaHR0cHM6Ly9oLmhvbGRlci5jb20udWEnLFxuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ2liaWxsYm9hcmQnOiB7fSxcblxuICAnaW1lZGlhJzoge1xuICAgIHByZWZldGNoOiAnaHR0cHM6Ly9pLmltZWRpYS5jei9qcy9pbTMuanMnLFxuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ2ltb2JpbGUnOiB7XG4gICAgcHJlZmV0Y2g6ICdodHRwczovL3NwYW1wLmktbW9iaWxlLmNvLmpwL3NjcmlwdC9hbXAuanMnLFxuICAgIHByZWNvbm5lY3Q6ICdodHRwczovL3NwYWQuaS1tb2JpbGUuY28uanAnLFxuICB9LFxuICAnaW1vbm9teSc6IHtcbiAgICByZW5kZXJTdGFydEltcGxlbWVudGVkOiB0cnVlLFxuICB9LFxuICAnaW1wcm92ZWRpZ2l0YWwnOiB7fSxcblxuICAnaW5kdXN0cnlicmFpbnMnOiB7XG4gICAgcHJlZmV0Y2g6ICdodHRwczovL3dlYi5pbmR1c3RyeWJyYWlucy5jb20vanMvYWRzL2FzeW5jL3Nob3cuanMnLFxuICAgIHByZWNvbm5lY3Q6IFtcbiAgICAgICdodHRwczovL3N0YXRpY2QuY2RuLmluZHVzdHJ5YnJhaW5zLmNvbScsXG4gICAgICAnaHR0cHM6Ly9zdGF0aWMuaW5kdXN0cnlicmFpbnMuY29tJyxcbiAgICBdLFxuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ2lubW9iaSc6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vY2YuY2RuLmlubW9iaS5jb20vYWQvaW5tb2JpLnNlY3VyZS5qcycsXG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAnaW5uaXR5Jzoge1xuICAgIHByZWZldGNoOiAnaHR0cHM6Ly9jZG4uaW5uaXR5Lm5ldC9hZG1hbmFnZXIuanMnLFxuICAgIHByZWNvbm5lY3Q6ICdodHRwczovL2FzLmlubml0eS5jb20nLFxuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ2l4Jzoge1xuICAgIHByZWZldGNoOiBbXG4gICAgICAnaHR0cHM6Ly9qcy1zZWMuaW5kZXh3dy5jb20vYXBsL2FtcC5qcycsXG4gICAgXSxcbiAgICBwcmVjb25uZWN0OiAnaHR0cHM6Ly9hcy1zZWMuY2FzYWxlbWVkaWEuY29tJyxcbiAgICByZW5kZXJTdGFydEltcGxlbWVudGVkOiB0cnVlLFxuICB9LFxuXG4gICdrYXJnbyc6IHt9LFxuXG4gICdraW9za2VkJzoge1xuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ2tpeGVyJzoge1xuICAgIHByZWZldGNoOiAnaHR0cHM6Ly9jZG4ua2l4ZXIuY29tL2FkL2xvYWQuanMnLFxuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ2t1YWRpbyc6IHt9LFxuXG4gICdsaWdhdHVzJzoge1xuICAgIHByZWZldGNoOiAnaHR0cHM6Ly9zc2wubGlnYXR1cy5jb20vcmVuZGVyL2xpZ3JlbmQuanMnLFxuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ2xvY2tlcmRvbWUnOiB7XG4gICAgcHJlZmV0Y2g6ICdodHRwczovL2NkbjIubG9ja2VyZG9tZWNkbi5jb20vX2pzL2FtcC5qcycsXG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAnbG9rYSc6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vbG9rYS1jZG4uYWthbWFpemVkLm5ldC9zY2VuZS9hbXAuanMnLFxuICAgIHByZWNvbm5lY3Q6IFtcbiAgICAgICdodHRwczovL3NjZW5lLWZyb250Lmxva2FwbGF0Zm9ybS5jb20nLFxuICAgICAgJ2h0dHBzOi8vbG9rYS1tYXRlcmlhbHMuYWthbWFpemVkLm5ldCcsXG4gICAgXSxcbiAgICByZW5kZXJTdGFydEltcGxlbWVudGVkOiB0cnVlLFxuICB9LFxuXG4gICdtYWRzJzoge1xuICAgIHByZWZldGNoOiAnaHR0cHM6Ly9ldTIubWFkc29uZS5jb20vanMvdGFncy5qcycsXG4gIH0sXG5cbiAgJ21hbnRpcy1kaXNwbGF5Jzoge1xuICAgIHByZWZldGNoOiAnaHR0cHM6Ly9hc3NldHMubWFudGlzYWRuZXR3b3JrLmNvbS9tYW50b2RlYS5taW4uanMnLFxuICAgIHByZWNvbm5lY3Q6IFtcbiAgICAgICdodHRwczovL21hbnRvZGVhLm1hbnRpc2FkbmV0d29yay5jb20nLFxuICAgICAgJ2h0dHBzOi8vcmVzLmNsb3VkaW5hcnkuY29tJyxcbiAgICAgICdodHRwczovL3Jlc2l6ZS5tYW50aXNhZG5ldHdvcmsuY29tJyxcbiAgICBdLFxuICB9LFxuXG4gICdtYW50aXMtcmVjb21tZW5kJzoge1xuICAgIHByZWZldGNoOiAnaHR0cHM6Ly9hc3NldHMubWFudGlzYWRuZXR3b3JrLmNvbS9yZWNvbW1lbmQubWluLmpzJyxcbiAgICBwcmVjb25uZWN0OiBbXG4gICAgICAnaHR0cHM6Ly9tYW50b2RlYS5tYW50aXNhZG5ldHdvcmsuY29tJyxcbiAgICAgICdodHRwczovL3Jlc2l6ZS5tYW50aXNhZG5ldHdvcmsuY29tJyxcbiAgICBdLFxuICB9LFxuXG4gICdtZWRpYWltcGFjdCc6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vZWMtbnMuc2FzY2RuLmNvbS9kaWZmLzI1MS9wYWdlcy9hbXBfZGVmYXVsdC5qcycsXG4gICAgcHJlY29ubmVjdDogW1xuICAgICAgJ2h0dHBzOi8vd3cyNTEuc21hcnRhZHNlcnZlci5jb20nLFxuICAgICAgJ2h0dHBzOi8vc3RhdGljLnNhc2Nkbi5jb20vJyxcbiAgICBdLFxuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ21lZGlhbmV0Jzoge1xuICAgIHByZWNvbm5lY3Q6ICdodHRwczovL2NvbnRleHR1YWwubWVkaWEubmV0JyxcbiAgICByZW5kZXJTdGFydEltcGxlbWVudGVkOiB0cnVlLFxuICB9LFxuXG4gICdtZWRpYXZpbmUnOiB7XG4gICAgcHJlZmV0Y2g6ICdodHRwczovL2FtcC5tZWRpYXZpbmUuY29tL3dyYXBwZXIubWluLmpzJyxcbiAgICBwcmVjb25uZWN0OiBbXG4gICAgICAnaHR0cHM6Ly9wYXJ0bmVyLmdvb2dsZWFkc2VydmljZXMuY29tJyxcbiAgICAgICdodHRwczovL3NlY3VyZXB1YmFkcy5nLmRvdWJsZWNsaWNrLm5ldCcsXG4gICAgICAnaHR0cHM6Ly90cGMuZ29vZ2xlc3luZGljYXRpb24uY29tJyxcbiAgICBdLFxuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gICAgY29uc2VudEhhbmRsaW5nT3ZlcnJpZGU6IHRydWUsXG4gIH0sXG5cbiAgJ21lZHlhbmV0Jzoge1xuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ21lZyc6IHtcbiAgICByZW5kZXJTdGFydEltcGxlbWVudGVkOiB0cnVlLFxuICB9LFxuXG4gICdtaWNyb2FkJzoge1xuICAgIHByZWZldGNoOiAnaHR0cHM6Ly9qLm1pY3JvYWQubmV0L2pzL2NhbXAuanMnLFxuICAgIHByZWNvbm5lY3Q6IFtcbiAgICAgICdodHRwczovL3MtcnRiLnNlbmQubWljcm9hZC5qcCcsXG4gICAgICAnaHR0cHM6Ly9zLXJ0Yi5zZW5kLm1pY3JvYWRpbmMuY29tJyxcbiAgICAgICdodHRwczovL2NhY2hlLnNlbmQubWljcm9hZC5qcCcsXG4gICAgICAnaHR0cHM6Ly9jYWNoZS5zZW5kLm1pY3JvYWRpbmMuY29tJyxcbiAgICAgICdodHRwczovL2RlYi5zZW5kLm1pY3JvYWQuanAnLFxuICAgIF0sXG4gIH0sXG5cbiAgJ21peGltZWRpYSc6IHtcbiAgICByZW5kZXJTdGFydEltcGxlbWVudGVkOiB0cnVlLFxuICB9LFxuXG4gICdtaXhwbyc6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vY2RuLm1peHBvLmNvbS9qcy9sb2FkZXIuanMnLFxuICAgIHByZWNvbm5lY3Q6IFtcbiAgICAgICdodHRwczovL3BsYXllcjEubWl4cG8uY29tJyxcbiAgICAgICdodHRwczovL3BsYXllcjIubWl4cG8uY29tJyxcbiAgICBdLFxuICB9LFxuXG4gICdtb25ldGl6ZXIxMDEnOiB7XG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAnbXl0YXJnZXQnOiB7XG4gICAgcHJlZmV0Y2g6ICdodHRwczovL2FkLm1haWwucnUvc3RhdGljL2Fkcy1hc3luYy5qcycsXG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAnbXl3aWRnZXQnOiB7XG4gICAgcHJlY29ubmVjdDogJ2h0dHBzOi8vbGlrZW1vcmUtZmUuZ28ubWFpbC5ydScsXG4gICAgcHJlZmV0Y2g6ICdodHRwczovL2xpa2Vtb3JlLWdvLmltZ3NtYWlsLnJ1L3dpZGdldF9hbXAuanMnLFxuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ25hdGl2byc6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vcy5udHYuaW8vc2VydmUvbG9hZC5qcycsXG4gIH0sXG5cbiAgJ25hdmVnZyc6IHtcbiAgICByZW5kZXJTdGFydEltcGxlbWVudGVkOiB0cnVlLFxuICB9LFxuXG4gICduZW5kJzoge1xuICAgIHByZWZldGNoOiAnaHR0cHM6Ly9qczEubmVuZC5uZXQvanMvYW1wLmpzJyxcbiAgICBwcmVjb25uZWN0OiBbXG4gICAgICAnaHR0cHM6Ly9vdXRwdXQubmVuZC5uZXQnLFxuICAgICAgJ2h0dHBzOi8vaW1nMS5uZW5kLm5ldCcsXG4gICAgXSxcbiAgfSxcblxuICAnbmV0bGV0aXgnOiB7XG4gICAgcHJlY29ubmVjdDogW1xuICAgICAgJ2h0dHBzOi8vY2FsbC5uZXR6YXRobGV0ZW4tbWVkaWEuZGUnLFxuICAgIF0sXG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAnbm9kZHVzJzoge1xuICAgIHByZWZldGNoOiAnaHR0cHM6Ly9ub2RkdXMuY29tL2FtcF9sb2FkZXIuanMnLFxuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ25va3RhJzoge1xuICAgIHByZWZldGNoOiAnaHR0cHM6Ly9zdGF0aWMudmlyZ3VsLmNvbS90aGVtZS9tb2NrdXBzL25va3RhYW1wL2FtcGpzLmpzJyxcbiAgICByZW5kZXJTdGFydEltcGxlbWVudGVkOiB0cnVlLFxuICB9LFxuXG4gICdvcGVuYWRzdHJlYW0nOiB7fSxcblxuICAnb3BlbngnOiB7XG4gICAgcHJlZmV0Y2g6ICdodHRwczovL3d3dy5nb29nbGV0YWdzZXJ2aWNlcy5jb20vdGFnL2pzL2dwdC5qcycsXG4gICAgcHJlY29ubmVjdDogW1xuICAgICAgJ2h0dHBzOi8vcGFydG5lci5nb29nbGVhZHNlcnZpY2VzLmNvbScsXG4gICAgICAnaHR0cHM6Ly9zZWN1cmVwdWJhZHMuZy5kb3VibGVjbGljay5uZXQnLFxuICAgICAgJ2h0dHBzOi8vdHBjLmdvb2dsZXN5bmRpY2F0aW9uLmNvbScsXG4gICAgXSxcbiAgICByZW5kZXJTdGFydEltcGxlbWVudGVkOiB0cnVlLFxuICB9LFxuXG4gICdvdXRicmFpbic6IHtcbiAgICByZW5kZXJTdGFydEltcGxlbWVudGVkOiB0cnVlLFxuICAgIHByZWZldGNoOiAnaHR0cHM6Ly93aWRnZXRzLm91dGJyYWluLmNvbS93aWRnZXRBTVAvb3V0YnJhaW5BTVAubWluLmpzJyxcbiAgICBwcmVjb25uZWN0OiBbXG4gICAgICAnaHR0cHM6Ly9vZGIub3V0YnJhaW4uY29tJyxcbiAgICBdLFxuICAgIGNvbnNlbnRIYW5kbGluZ092ZXJyaWRlOiB0cnVlLFxuICB9LFxuXG4gICdwaXhlbHMnOiB7XG4gICAgcHJlZmV0Y2g6ICdodHRwczovL2Nkbi5hZHNmYWN0b3IubmV0L2FtcC9waXhlbHMtYW1wLm1pbi5qcycsXG4gICAgY2xpZW50SWRDb29raWVOYW1lOiAnX19BRicsXG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAncGxpc3RhJzoge30sXG5cbiAgJ3BvbHltb3JwaGljYWRzJzoge1xuICAgIHByZWZldGNoOiAnaHR0cHM6Ly93d3cucG9seW1vcnBoaWNhZHMuanAvanMvYW1wLmpzJyxcbiAgICBwcmVjb25uZWN0OiBbXG4gICAgICAnaHR0cHM6Ly9pbWcucG9seW1vcnBoaWNhZHMuanAnLFxuICAgICAgJ2h0dHBzOi8vYWQucG9seW1vcnBoaWNhZHMuanAnLFxuICAgIF0sXG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAncG9waW4nOiB7XG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAncG9zdHF1YXJlJzoge30sXG5cbiAgJ3B1YmV4Y2hhbmdlJzoge30sXG5cbiAgJ3B1Ymd1cnUnOiB7XG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAncHVibWF0aWMnOiB7XG4gICAgcHJlZmV0Y2g6ICdodHRwczovL2Fkcy5wdWJtYXRpYy5jb20vQWRTZXJ2ZXIvanMvYW1wLmpzJyxcbiAgfSxcblxuICAncHVibWluZSc6IHtcbiAgICBwcmVmZXRjaDogW1xuICAgICAgJ2h0dHBzOi8vcy5wdWJtaW5lLmNvbS9oZWFkLmpzJyxcbiAgICAgICdodHRwczovL3MucHVibWluZS5jb20vc2hvd2FkLmpzJyxcbiAgICBdLFxuICAgIHByZWNvbm5lY3Q6ICdodHRwczovL2RlbGl2ZXJ5Lmcuc3dpdGNoYWRodWIuY29tJyxcbiAgICByZW5kZXJTdGFydEltcGxlbWVudGVkOiB0cnVlLFxuICB9LFxuXG4gICdwdWxzZXBvaW50Jzoge1xuICAgIHByZWZldGNoOiAnaHR0cHM6Ly9hZHMuY29udGV4dHdlYi5jb20vVGFnUHVibGlzaC9nZXRqcy5zdGF0aWMuanMnLFxuICAgIHByZWNvbm5lY3Q6ICdodHRwczovL3RhZy5jb250ZXh0d2ViLmNvbScsXG4gIH0sXG5cbiAgJ3B1cmNoJzoge1xuICAgIHByZWZldGNoOiAnaHR0cHM6Ly9yYW1wLnB1cmNoLmNvbS9zZXJ2ZS9jcmVhdGl2ZV9hbXAuanMnLFxuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ3F1b3JhYWQnOiB7XG4gICAgcHJlZmV0Y2g6ICdodHRwczovL2EucXVvcmEuY29tL2FtcF9hZC5qcycsXG4gICAgcHJlY29ubmVjdDogJ2h0dHBzOi8vYW1wYWQucXVvcmEuY29tJyxcbiAgICByZW5kZXJTdGFydEltcGxlbWVudGVkOiB0cnVlLFxuICB9LFxuXG4gICdyZWFsY2xpY2snOiB7XG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAncmVsYXAnOiB7XG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAncmV2Y29udGVudCc6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vbGFicy1jZG4ucmV2Y29udGVudC5jb20vYnVpbGQvYW1waHRtbC9yZXZjb250ZW50LmFtcC5taW4uanMnLFxuICAgIHByZWNvbm5lY3Q6IFtcbiAgICAgICdodHRwczovL3RyZW5kcy5yZXZjb250ZW50LmNvbScsXG4gICAgICAnaHR0cHM6Ly9jZG4ucmV2Y29udGVudC5jb20nLFxuICAgICAgJ2h0dHBzOi8vaW1nLnJldmNvbnRlbnQuY29tJyxcbiAgICBdLFxuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ3JldmpldCc6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vY2RuLnJldmpldC5jb20vfmNkbi9KUy8wMy9hbXAuanMnLFxuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ3J1Ymljb24nOiB7fSxcblxuICAnc2VraW5kbyc6IHtcbiAgICByZW5kZXJTdGFydEltcGxlbWVudGVkOiB0cnVlLFxuICB9LFxuXG4gICdzaGFyZXRocm91Z2gnOiB7XG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAnc2tsaWsnOiB7XG4gICAgcHJlZmV0Y2g6ICdodHRwczovL2MuaW1lZGlhLmN6L2pzL2FtcC5qcycsXG4gIH0sXG5cbiAgJ3NsaW1jdXRtZWRpYSc6IHtcbiAgICBwcmVjb25uZWN0OiBbXG4gICAgICAnaHR0cHM6Ly9zYi5mcmVlc2tyZWVuLmNvbScsXG4gICAgICAnaHR0cHM6Ly9zdGF0aWMuZnJlZXNrcmVlbi5jb20nLFxuICAgICAgJ2h0dHBzOi8vdmlkZW8uZnJlZXNrcmVlbi5jb20nLFxuICAgIF0sXG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAnc21hcnRhZHNlcnZlcic6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vZWMtbnMuc2FzY2RuLmNvbS9kaWZmL2pzL2FtcC52MC5qcycsXG4gICAgcHJlY29ubmVjdDogJ2h0dHBzOi8vc3RhdGljLnNhc2Nkbi5jb20nLFxuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ3NtYXJ0Y2xpcCc6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vY2RuLnNtYXJ0Y2xpcC5uZXQvYW1wL2FtcC52MC5qcycsXG4gICAgcHJlY29ubmVjdDogJ2h0dHBzOi8vZGVzLnNtYXJ0Y2xpcC5uZXQnLFxuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ3NtaTInOiB7XG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAnc29nb3VhZCc6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vdGhldGEuc29nb3VjZG4uY29tL3dhcC9qcy9hdy5qcycsXG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAnc29ydGFibGUnOiB7XG4gICAgcHJlZmV0Y2g6ICdodHRwczovL3d3dy5nb29nbGV0YWdzZXJ2aWNlcy5jb20vdGFnL2pzL2dwdC5qcycsXG4gICAgcHJlY29ubmVjdDogW1xuICAgICAgJ2h0dHBzOi8vdGFncy1jZG4uZGVwbG95YWRzLmNvbScsXG4gICAgICAnaHR0cHM6Ly9wYXJ0bmVyLmdvb2dsZWFkc2VydmljZXMuY29tJyxcbiAgICAgICdodHRwczovL3NlY3VyZXB1YmFkcy5nLmRvdWJsZWNsaWNrLm5ldCcsXG4gICAgICAnaHR0cHM6Ly90cGMuZ29vZ2xlc3luZGljYXRpb24uY29tJyxcbiAgICBdLFxuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ3NvdnJuJzoge1xuICAgIHByZWZldGNoOiAnaHR0cHM6Ly9hcC5saWppdC5jb20vd3d3L3NvdnJuX2FtcC9zb3Zybl9hZHMuanMnLFxuICB9LFxuXG4gICdzcG90eCc6IHtcbiAgICBwcmVjb25uZWN0OiAnaHR0cHM6Ly9qcy5zcG90eC50dicsXG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAnc3VubWVkaWEnOiB7XG4gICAgcHJlZmV0Y2g6ICdodHRwczovL3ZvZC5hZGRldndlYi5jb20vc3VubWVkaWEvYW1wL2Fkcy9zdW5tZWRpYS5qcycsXG4gICAgcHJlY29ubmVjdDogJ2h0dHBzOi8vc3RhdGljLmFkZGV2d2ViLmNvbScsXG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAnc3dvb3AnOiB7XG4gICAgcHJlZmV0Y2g6ICdodHRwczovL3d3dy5zd29vcC1hbXAuY29tL2FtcC5qcycsXG4gICAgcHJlY29ubmVjdDogW1xuICAgICAgJ2h0dHBzOi8vd3d3LnN3cHN2Yy5jb20nLFxuICAgICAgJ2h0dHBzOi8vY2xpZW50LnN3cGNsZC5jb20nLFxuICAgIF0sXG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAndGFib29sYSc6IHt9LFxuXG4gICd0ZWFkcyc6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vY2RuLnRlYWRzLnR2L21lZGlhL2Zvcm1hdC92My90ZWFkcy1mb3JtYXQubWluLmpzJyxcbiAgICBwcmVjb25uZWN0OiBbXG4gICAgICAnaHR0cHM6Ly9jZG4yLnRlYWRzLnR2JyxcbiAgICAgICdodHRwczovL2EudGVhZHMudHYnLFxuICAgICAgJ2h0dHBzOi8vdC50ZWFkcy50dicsXG4gICAgICAnaHR0cHM6Ly9yLnRlYWRzLnR2JyxcbiAgICBdLFxuICAgIGNvbnNlbnRIYW5kbGluZ092ZXJyaWRlOiB0cnVlLFxuICB9LFxuXG4gICd0cmlwbGVsaWZ0Jzoge30sXG5cbiAgJ3RydWdhemUnOiB7XG4gICAgY2xpZW50SWRTY29wZTogJ19fdGdfYW1wJyxcbiAgICByZW5kZXJTdGFydEltcGxlbWVudGVkOiB0cnVlLFxuICB9LFxuXG4gICd1YXMnOiB7XG4gICAgcHJlZmV0Y2g6ICdodHRwczovL2Fkcy5wdWJtYXRpYy5jb20vQWRTZXJ2ZXIvanMvcGhvZW5peC5qcycsXG4gIH0sXG5cbiAgJ3V6b3UnOiB7XG4gICAgcHJlY29ubmVjdDogW1xuICAgICAgJ2h0dHBzOi8vc3BlZWUtYWQuYWthbWFpemVkLm5ldCcsXG4gICAgXSxcbiAgICByZW5kZXJTdGFydEltcGxlbWVudGVkOiB0cnVlLFxuICB9LFxuXG4gICd1bnJ1bHknOiB7XG4gICAgcHJlZmV0Y2g6ICdodHRwczovL3ZpZGVvLnVucnVseW1lZGlhLmNvbS9hbXAtZGVtby9uYXRpdmUtbG9hZGVyLmpzJyxcbiAgICByZW5kZXJTdGFydEltcGxlbWVudGVkOiB0cnVlLFxuICB9LFxuXG4gICd2YWx1ZWNvbW1lcmNlJzoge1xuICAgIHByZWZldGNoOiAnaHR0cHM6Ly9hbXAudmFsdWVjb21tZXJjZS5jb20vYW1wX2JyaWRnZS5qcycsXG4gICAgcHJlY29ubmVjdDogW1xuICAgICAgJ2h0dHBzOi8vYWQuanAuYXAudmFsdWVjb21tZXJjZS5jb20nLFxuICAgICAgJ2h0dHBzOi8vYWQub21rcy52YWx1ZWNvbW1lcmNlLmNvbScsXG4gICAgXSxcbiAgICByZW5kZXJTdGFydEltcGxlbWVudGVkOiB0cnVlLFxuICB9LFxuXG4gICd2aWRlb2ludGVsbGlnZW5jZSc6IHtcbiAgICBwcmVjb25uZWN0OiAnaHR0cHM6Ly9zLnZpLXNlcnZlLmNvbScsXG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAndmlkZW9ub3cnOiB7XG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAndmlyYWxpemUnOiB7XG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAndm1maXZlJzoge1xuICAgIHByZWZldGNoOiAnaHR0cHM6Ly9tYW4udm01YXBpcy5jb20vZGlzdC9hZG4td2ViLXNkay5qcycsXG4gICAgcHJlY29ubmVjdDogW1xuICAgICAgJ2h0dHBzOi8vdmF3cHJvLnZtNWFwaXMuY29tJyxcbiAgICAgICdodHRwczovL3ZhaGZyb250LnZtNWFwaXMuY29tJyxcbiAgICBdLFxuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ3dlYmVkaWFkcyc6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vZXUxLndiZGRzLmNvbS9hbXAubWluLmpzJyxcbiAgICBwcmVjb25uZWN0OiBbXG4gICAgICAnaHR0cHM6Ly9nb3V0ZWUudG9wJyxcbiAgICAgICdodHRwczovL21lZGlhYXRoYXkub3JnLnVrJyxcbiAgICBdLFxuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ3dlYm9yYW1hLWRpc3BsYXknOiB7XG4gICAgcHJlZmV0Y2g6IFtcbiAgICAgICdodHRwczovL2NzdGF0aWMud2Vib3JhbWEuZnIvanMvYWR2ZXJ0aXNlcnYyL2FkcGVyZl9sYXVuY2hfMS4wLjBfc2NyYW1ibGVkLmpzJyxcbiAgICAgICdodHRwczovL2NzdGF0aWMud2Vib3JhbWEuZnIvanMvYWR2ZXJ0aXNlcnYyL2FkcGVyZl9jb3JlXzEuMC4wX3NjcmFtYmxlZC5qcycsXG4gICAgXSxcbiAgfSxcblxuICAnd2lkZXNwYWNlJzoge30sXG5cbiAgJ3dpc3RlcmlhJzoge1xuICAgIHJlbmRlclN0YXJ0SW1wbGVtZW50ZWQ6IHRydWUsXG4gIH0sXG5cbiAgJ3dwbWVkaWEnOiB7XG4gICAgcHJlZmV0Y2g6ICdodHRwczovL3N0ZC53cGNkbi5wbC93cGpzbGliL3dwanNsaWItYW1wLmpzJyxcbiAgICBwcmVjb25uZWN0OiBbXG4gICAgICAnaHR0cHM6Ly93d3cud3AucGwnLFxuICAgICAgJ2h0dHBzOi8vdi53cGltZy5wbCcsXG4gICAgXSxcbiAgICByZW5kZXJTdGFydEltcGxlbWVudGVkOiB0cnVlLFxuICB9LFxuXG4gICd4bGlmdCc6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vY2RuLngtbGlmdC5qcC9yZXNvdXJjZXMvY29tbW9uL3hsaWZ0X2FtcC5qcycsXG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAneWFob28nOiB7XG4gICAgcHJlZmV0Y2g6ICdodHRwczovL3MueWltZy5jb20vb3MvYW1wYWQvZGlzcGxheS5qcycsXG4gICAgcHJlY29ubmVjdDogJ2h0dHBzOi8vdXMuYWRzZXJ2ZXIueWFob28uY29tJyxcbiAgfSxcblxuICAneWFob29qcCc6IHtcbiAgICBwcmVmZXRjaDogW1xuICAgICAgJ2h0dHBzOi8vcy55aW1nLmpwL2ltYWdlcy9saXN0aW5nL3Rvb2wveWFkcy95ZG4vYW1wL2FtcC5qcycsXG4gICAgICAnaHR0cHM6Ly95YWRzLmMueWltZy5qcC9qcy95YWRzLmpzJyxcbiAgICBdLFxuICAgIHByZWNvbm5lY3Q6ICdodHRwczovL3lhZHMueWFob28uY28uanAnLFxuICB9LFxuXG4gICd5YW5kZXgnOiB7XG4gICAgcHJlZmV0Y2g6ICdodHRwczovL3lhc3RhdGljLm5ldC9wYXJ0bmVyLWNvZGUvbG9hZGVycy9jb250ZXh0X2FtcC5qcycsXG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAneWVuZ28nOiB7XG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAneWllbGRib3QnOiB7XG4gICAgcHJlZmV0Y2g6IFtcbiAgICAgICdodHRwczovL2Nkbi55bGRidC5jb20vanMveWllbGRib3QuaW50ZW50LmFtcC5qcycsXG4gICAgICAnaHR0cHM6Ly9tc2cueWxkYnQuY29tL2pzL3libXNnLmh0bWwnLFxuICAgIF0sXG4gICAgcHJlY29ubmVjdDogJ2h0dHBzOi8vaS55bGRidC5jb20nLFxuICB9LFxuXG4gICd5aWVsZG1vJzoge1xuICAgIHByZWZldGNoOiAnaHR0cHM6Ly9zdGF0aWMueWllbGRtby5jb20veW0uMS5qcycsXG4gICAgcHJlY29ubmVjdDogW1xuICAgICAgJ2h0dHBzOi8vcy55aWVsZG1vLmNvbScsXG4gICAgICAnaHR0cHM6Ly9hZHMueWllbGRtby5jb20nLFxuICAgIF0sXG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAneWllbGRvbmUnOiB7XG4gICAgcHJlZmV0Y2g6ICdodHRwczovL2ltZy5hay5pbXBhY3QtYWQuanAvaWMvcG9uZS9jb21tb25qcy95b25lLWFtcC5qcycsXG4gIH0sXG5cbiAgJ3lpZWxkcHJvJzoge1xuICAgIHByZWNvbm5lY3Q6ICdodHRwczovL2NyZWF0aXZlcy55aWVsZHByby5ldScsXG4gICAgcmVuZGVyU3RhcnRJbXBsZW1lbnRlZDogdHJ1ZSxcbiAgfSxcblxuICAnemVkbyc6IHtcbiAgICBwcmVmZXRjaDogJ2h0dHBzOi8vc3MzLnplZG8uY29tL2dlY2tvL3RhZy9HZWNrby5hbXAubWluLmpzJyxcbiAgICByZW5kZXJTdGFydEltcGxlbWVudGVkOiB0cnVlLFxuICB9LFxuXG4gICd6ZXJnbmV0Jzoge30sXG5cbiAgJ3p1Y2tzJzoge1xuICAgIHByZWNvbm5lY3Q6IFtcbiAgICAgICdodHRwczovL2ouenVja3MubmV0LnppbWcuanAnLFxuICAgICAgJ2h0dHBzOi8vc2guenVja3MubmV0JyxcbiAgICAgICdodHRwczovL2suenVja3MubmV0JyxcbiAgICAgICdodHRwczovL3N0YXRpYy56dWNrcy5uZXQuemltZy5qcCcsXG4gICAgXSxcbiAgfSxcblxufTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICBFeHBlcmltZW50SW5mbywgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICBmb3JjZUV4cGVyaW1lbnRCcmFuY2gsXG4gIGdldEV4cGVyaW1lbnRCcmFuY2gsXG4gIHJhbmRvbWx5U2VsZWN0VW5zZXRFeHBlcmltZW50cyxcbn0gZnJvbSAnLi4vLi4vLi4vc3JjL2V4cGVyaW1lbnRzJztcbmltcG9ydCB7XG4gIGFkZEV4cGVyaW1lbnRJZFRvRWxlbWVudCxcbn0gZnJvbSAnLi90cmFmZmljLWV4cGVyaW1lbnRzJztcblxuLyoqXG4gKiBBdHRlbXB0cyB0byBzZWxlY3QgaW50byBleHBlcmltZW50IGFuZCBmb3JjZXMgYnJhbmNoIGlmIHNlbGVjdGVkLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7IUFycmF5PHN0cmluZz59IGJyYW5jaGVzXG4gKiBAcGFyYW0ge3N0cmluZ30gZXhwTmFtZVxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0QWRkRXhwSWRUb0VsZW1lbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdEFuZFNldEV4cGVyaW1lbnRzKFxuICB3aW4sIGVsZW1lbnQsIGJyYW5jaGVzLCBleHBOYW1lLCBvcHRBZGRFeHBJZFRvRWxlbWVudCkge1xuICBjb25zdCBleHBlcmltZW50SWQgPSBleHBVdGlscy5tYXliZVNlbGVjdEV4cGVyaW1lbnQoXG4gICAgICB3aW4sIGVsZW1lbnQsIGJyYW5jaGVzLCBleHBOYW1lKTtcbiAgaWYgKCEhZXhwZXJpbWVudElkKSB7XG4gICAgYWRkRXhwZXJpbWVudElkVG9FbGVtZW50KG9wdEFkZEV4cElkVG9FbGVtZW50ID9cbiAgICAgIGV4cGVyaW1lbnRJZCA6IHVuZGVmaW5lZCwgZWxlbWVudCk7XG4gICAgZm9yY2VFeHBlcmltZW50QnJhbmNoKHdpbiwgZXhwTmFtZSwgZXhwZXJpbWVudElkKTtcbiAgfVxuICByZXR1cm4gZXhwZXJpbWVudElkO1xufVxuXG5leHBvcnQgY2xhc3MgRXhwZXJpbWVudFV0aWxzIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAgICogQHBhcmFtIHshQXJyYXk8c3RyaW5nPn0gc2VsZWN0aW9uQnJhbmNoZXNcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV4cGVyaW1lbnROYW1lXG4gICAqL1xuICBtYXliZVNlbGVjdEV4cGVyaW1lbnQoXG4gICAgd2luLCBlbGVtZW50LCBzZWxlY3Rpb25CcmFuY2hlcywgZXhwZXJpbWVudE5hbWUpIHtcbiAgICBjb25zdCBleHBlcmltZW50SW5mb01hcCA9XG4gICAgLyoqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgIUV4cGVyaW1lbnRJbmZvPn0gKi8gKHt9KTtcbiAgICBleHBlcmltZW50SW5mb01hcFtleHBlcmltZW50TmFtZV0gPSB7XG4gICAgICBpc1RyYWZmaWNFbGlnaWJsZTogKCkgPT4gdHJ1ZSxcbiAgICAgIGJyYW5jaGVzOiBzZWxlY3Rpb25CcmFuY2hlcyxcbiAgICB9O1xuICAgIHJhbmRvbWx5U2VsZWN0VW5zZXRFeHBlcmltZW50cyh3aW4sIGV4cGVyaW1lbnRJbmZvTWFwKTtcbiAgICByZXR1cm4gZ2V0RXhwZXJpbWVudEJyYW5jaCh3aW4sIGV4cGVyaW1lbnROYW1lKTtcbiAgfVxufVxuXG4vKipcbiAqIEV4cGVyaW1lbnRVdGlscyBzaW5nbGV0b24uXG4gKiBAdHlwZSB7IUV4cGVyaW1lbnRVdGlsc31cbiovXG5jb25zdCBleHBVdGlscyA9IG5ldyBFeHBlcmltZW50VXRpbHMoKTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIE1hY2hpbmVyeSBmb3IgZG9pbmcgXCJ0cmFmZmljLWxldmVsXCIgZXhwZXJpbWVudHMuICBUaGF0IGlzLCByYXRoZXIgdGhhblxuICogYSBzaW5nbGUgdXNlciBjaG9vc2luZyB0byBvcHQtaW4gdG8gYW4gZXhwZXJpbWVudGFsIHZlcnNpb24gb2YgYSBtb2R1bGUsXG4gKiB0aGlzIGZyYW1ld29yayBhbGxvd3MgeW91IHRvIGRvIHJhbmRvbWl6ZWQsIGNvbnRyb2xsZWQgZXhwZXJpbWVudHMgb24gYWxsXG4gKiBBTVAgcGFnZSBsb2FkcyB0bywgZm9yIGV4YW1wbGUsIHRlc3QgcmVsYXRpdmUgcGVyZm9ybWFuY2Ugb3IgbG9vayBmb3JcbiAqIGltcGFjdHMgb24gY2xpY2stdGhyb3VnaHMuXG4gKi9cblxuaW1wb3J0IHtcbiAgRVhQRVJJTUVOVF9BVFRSSUJVVEUsXG4gIG1lcmdlRXhwZXJpbWVudElkcyxcbn0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQge1xuICBFeHBlcmltZW50SW5mbywgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICBpc0V4cGVyaW1lbnRPbixcbn0gZnJvbSAnLi4vLi4vLi4vc3JjL2V4cGVyaW1lbnRzJztcbmltcG9ydCB7U2VydmljZXN9IGZyb20gJy4uLy4uLy4uL3NyYy9zZXJ2aWNlcyc7XG5pbXBvcnQge3BhcnNlUXVlcnlTdHJpbmd9IGZyb20gJy4uLy4uLy4uL3NyYy91cmwnO1xuXG4vKiogQHR5cGVkZWYge3tcbiAqICAgIGNvbnRyb2w6IHN0cmluZyxcbiAqICAgIGV4cGVyaW1lbnQ6IHN0cmluZ1xuICogIH19ICovXG5leHBvcnQgbGV0IEE0YUV4cGVyaW1lbnRCcmFuY2hlcztcblxuLyoqIEB0eXBlIHtzdHJpbmd9IEBwcml2YXRlICovXG5leHBvcnQgY29uc3QgTUFOVUFMX0VYUEVSSU1FTlRfSUQgPSAnMTE3MTUyNjMyJztcblxuLyoqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudCBBZCB0YWcgRWxlbWVudC5cbiAqIEByZXR1cm4gez9zdHJpbmd9IGV4cGVyaW1lbnQgZXh0cmFjdGVkIGZyb20gcGFnZSB1cmwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0VXJsRXhwZXJpbWVudElkKHdpbiwgZWxlbWVudCkge1xuICBjb25zdCBleHBQYXJhbSA9IFNlcnZpY2VzLnZpZXdlckZvckRvYyhlbGVtZW50KS5nZXRQYXJhbSgnZXhwJykgfHxcbiAgICBwYXJzZVF1ZXJ5U3RyaW5nKHdpbi5sb2NhdGlvbi5zZWFyY2gpWydleHAnXTtcbiAgaWYgKCFleHBQYXJhbSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIC8vIEFsbG93IGZvciBwZXIgdHlwZSBleHBlcmltZW50IGNvbnRyb2wgd2l0aCBEb3VibGVjbGljayBrZXkgc2V0IGZvciAnZGEnXG4gIC8vIGFuZCBBZFNlbnNlIHVzaW5nICdhYScuICBGYWxsYmFjayB0byAnYTRhJyBpZiB0eXBlIHNwZWNpZmljIGlzIG1pc3NpbmcuXG4gIGNvbnN0IGV4cEtleXMgPSBbXG4gICAgKGVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0eXBlJykgfHwgJycpLnRvTG93ZXJDYXNlKCkgPT0gJ2RvdWJsZWNsaWNrJyA/XG4gICAgICAnZGEnIDogJ2FhJyxcbiAgICAnYTRhJyxcbiAgXTtcbiAgbGV0IGFyZztcbiAgbGV0IG1hdGNoO1xuICBleHBLZXlzLmZvckVhY2goa2V5ID0+IGFyZyA9IGFyZyB8fFxuICAgICgobWF0Y2ggPSBuZXcgUmVnRXhwKGAoPzpefCwpJHtrZXl9OigtP1xcXFxkKylgKS5leGVjKGV4cFBhcmFtKSkgJiZcbiAgICAgIG1hdGNoWzFdKSk7XG4gIHJldHVybiBhcmcgfHwgbnVsbDtcbn1cblxuLyoqXG4gKiBTZXRzIG9mIGV4cGVyaW1lbnQgSURzIGNhbiBiZSBhdHRhY2hlZCB0byBFbGVtZW50cyB2aWEgYXR0cmlidXRlcy4gIEluXG4gKiB0aGF0IGNhc2UsIHdlIGVuY29kZSB0aGVtIGFzIGEgc3RyaW5nIGNvbnRhaW5pbmcgYSBjb21tYS1zZXBhcmF0ZWQgbGlzdFxuICogb2YgZXhwZXJpbWVudCBJRHMuICBUaGlzIHBhcnNlcyBhIGNvbW1hLXNlcGFyYXRlZCBsaXN0IGZyb20gYSBzdHJpbmcgaW50b1xuICogYSBsaXN0IG9mIElEIHN0cmluZ3MuICBJZiB0aGUgaW5wdXQgc3RyaW5nIGlzIGVtcHR5IG9yIG51bGwsIHRoaXMgcmV0dXJuc1xuICogdGhlIGVtcHR5IGxpc3QuICBUaGlzIGRvZXMgbm8gdmFsaWRpdHkgY2hlY2tpbmcgb24gdGhlIElEIGZvcm1hdHMgLS0gZm9yXG4gKiB0aGF0LCB1c2UgdmFsaWRhdGVFeHBlcmltZW50SWRzLlxuICpcbiAqIEBwYXJhbSB7P3N0cmluZ30gaWRTdHJpbmcgIFN0cmluZyB0byBwYXJzZS5cbiAqIEByZXR1cm4geyFBcnJheTxzdHJpbmc+fSAgTGlzdCBvZiBleHBlcmltZW50IElEcyAocG9zc2libHkgZW1wdHkpLlxuICogQHNlZSB2YWxpZGF0ZUV4cGVyaW1lbnRJZHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRXhwZXJpbWVudElkcyhpZFN0cmluZykge1xuICBpZiAoaWRTdHJpbmcpIHtcbiAgICByZXR1cm4gaWRTdHJpbmcuc3BsaXQoJywnKTtcbiAgfVxuICByZXR1cm4gW107XG59XG5cbi8qKlxuICogQ2hlY2tzIHdoZXRoZXIgdGhlIGdpdmVuIGVsZW1lbnQgaXMgYSBtZW1iZXIgb2YgdGhlIGdpdmVuIGV4cGVyaW1lbnQgYnJhbmNoLlxuICogSS5lLiwgd2hldGhlciB0aGUgZWxlbWVudCdzIGRhdGEtZXhwZXJpbWVudC1pZCBhdHRyaWJ1dGUgY29udGFpbnMgdGhlIGlkXG4gKiB2YWx1ZSAocG9zc2libHkgYmVjYXVzZSB0aGUgaG9zdCBwYWdlIFVSTCBjb250YWlucyBhICdleHA9YTRhOlgnIHBhcmFtZXRlclxuICogYW5kICNtYXliZVNldEV4cGVyaW1lbnRGcm9tVXJsIGhhcyBhZGRlZCB0aGUgYXBwcm9wcmlhdGUgRUlEKS5cbiAqXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50IEVsZW1lbnQgdG8gY2hlY2sgZm9yIG1lbWJlcnNoaXAgaW4gYSBzcGVjaWZpY1xuICogICBleHBlcmltZW50LlxuICogQHBhcmFtIHs/c3RyaW5nfSBpZCBFeHBlcmltZW50IElEIHRvIGNoZWNrIGZvciBvbiBgZWxlbWVudGAuXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNJbkV4cGVyaW1lbnQoZWxlbWVudCwgaWQpIHtcbiAgcmV0dXJuIHBhcnNlRXhwZXJpbWVudElkcyhlbGVtZW50LmdldEF0dHJpYnV0ZShFWFBFUklNRU5UX0FUVFJJQlVURSkpLnNvbWUoXG4gICAgICB4ID0+IHsgcmV0dXJuIHggPT09IGlkOyB9KTtcbn1cblxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciB0aGUgZ2l2ZW4gZWxlbWVudCBpcyBhIG1lbWJlciBvZiB0aGUgJ21hbnVhbGx5IHRyaWdnZXJlZFxuICogXCJleHBlcmltZW50XCIgYnJhbmNoJy4gIEkuZS4sIHdoZXRoZXIgdGhlIGVsZW1lbnQncyBkYXRhLWV4cGVyaW1lbnQtaWRcbiAqIGF0dHJpYnV0ZSBjb250YWlucyB0aGUgTUFOVUFMX0VYUEVSSU1FTlRfSUQgdmFsdWUgKGhvcGVmdWxseSBiZWNhdXNlIHRoZVxuICogdXNlciBoYXMgbWFudWFsbHkgc3BlY2lmaWVkICdleHA9YTRhOi0xJyBpbiB0aGUgaG9zdCBwYWdlIFVSTCBhbmRcbiAqICNtYXliZVNldEV4cGVyaW1lbnRGcm9tVXJsIGhhcyBhZGRlZCBpdCkuXG4gKlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudCAgRWxlbWVudCB0byBjaGVjayBmb3IgbWFudWFsIGV4cGVyaW1lbnQgbWVtYmVyc2hpcC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0luTWFudWFsRXhwZXJpbWVudChlbGVtZW50KSB7XG4gIHJldHVybiBpc0luRXhwZXJpbWVudChlbGVtZW50LCBNQU5VQUxfRVhQRVJJTUVOVF9JRCk7XG59XG5cbi8qKlxuICogUHJlZGljYXRlIHRvIGNoZWNrIHdoZXRoZXIgQTRBIGhhcyBsYXVuY2hlZCB5ZXQgb3Igbm90LlxuICogSWYgaXQgaGFzIG5vdCB5ZXQgbGF1bmNoZWQsIHRoZW4gdGhlIGV4cGVyaW1lbnRhbCBicmFuY2ggc2VydmVzIEE0QSwgYW5kXG4gKiBjb250cm9sL2ZpbGxlciBkbyBub3QuIElmIGl0IGhhcyBub3QsIHRoZW4gdGhlIGZpbGxlciBhbmQgY29udHJvbCBicmFuY2ggZG9cbiAqIHNlcnZlIEE0QSwgYW5kIHRoZSBleHBlcmltZW50YWwgYnJhbmNoIGRvZXMgbm90LlxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luICBIb3N0IHdpbmRvdyBmb3IgdGhlIGFkLlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudCAgRWxlbWVudCB0byBjaGVjayBmb3IgcHJlLWxhdW5jaCBtZW1iZXJzaGlwLlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc0xhdW5jaGVkKHdpbiwgZWxlbWVudCkge1xuICBzd2l0Y2ggKGVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0eXBlJykpIHtcbiAgICBjYXNlICdhZHNlbnNlJzpcbiAgICAgIHJldHVybiBpc0V4cGVyaW1lbnRPbih3aW4sICdhNGFGYXN0RmV0Y2hBZFNlbnNlTGF1bmNoZWQnKTtcbiAgICBjYXNlICdkb3VibGVjbGljayc6XG4gICAgICByZXR1cm4gaXNFeHBlcmltZW50T24od2luLCAnYTRhRmFzdEZldGNoRG91YmxlY2xpY2tMYXVuY2hlZCcpO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLyoqXG4gKiBDaGVja3MgdGhhdCBhbGwgc3RyaW5nIGV4cGVyaW1lbnQgSURzIGluIGEgbGlzdCBhcmUgc3ludGFjdGljYWxseSB2YWxpZFxuICogKGludGVnZXIgYmFzZSAxMCkuXG4gKlxuICogQHBhcmFtIHshQXJyYXk8c3RyaW5nPn0gaWRMaXN0ICBMaXN0IG9mIGV4cGVyaW1lbnQgSURzLiAgQ2FuIGJlIGVtcHR5LlxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciBhbGwgbGlzdCBlbGVtZW50cyBhcmUgdmFsaWQgZXhwZXJpbWVudCBJRHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUV4cGVyaW1lbnRJZHMoaWRMaXN0KSB7XG4gIHJldHVybiBpZExpc3QuZXZlcnkoaWQgPT4geyByZXR1cm4gIWlzTmFOKHBhcnNlSW50KGlkLCAxMCkpOyB9KTtcbn1cblxuLyoqXG4gKiBBZGRzIGEgc2luZ2xlIGV4cGVyaW1lbnRJRCB0byBhbiBlbGVtZW50IGlmZiBpdCdzIGEgdmFsaWQgZXhwZXJpbWVudCBJRC5cbiAqIE5vLW9wcyBpZiB0aGUgZXhwZXJpbWVudElkIGlzIHVuZGVmaW5lZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3x1bmRlZmluZWR9IGV4cGVyaW1lbnRJZCAgSUQgdG8gYWRkIHRvIHRoZSBlbGVtZW50LlxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50IHRvIGFkZCB0aGUgZXhwZXJpbWVudCBJRCB0by5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZEV4cGVyaW1lbnRJZFRvRWxlbWVudChleHBlcmltZW50SWQsIGVsZW1lbnQpIHtcbiAgaWYgKCFleHBlcmltZW50SWQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgY3VycmVudEVpZHMgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShFWFBFUklNRU5UX0FUVFJJQlVURSk7XG4gIGlmIChjdXJyZW50RWlkcyAmJiB2YWxpZGF0ZUV4cGVyaW1lbnRJZHMocGFyc2VFeHBlcmltZW50SWRzKGN1cnJlbnRFaWRzKSkpIHtcbiAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShFWFBFUklNRU5UX0FUVFJJQlVURSxcbiAgICAgICAgbWVyZ2VFeHBlcmltZW50SWRzKFtleHBlcmltZW50SWRdLCBjdXJyZW50RWlkcykpO1xuICB9IGVsc2Uge1xuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKEVYUEVSSU1FTlRfQVRUUklCVVRFLCBleHBlcmltZW50SWQpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqIEB0eXBlZGVmIHt7bmFtZTogc3RyaW5nLCB2YWx1ZTogKHN0cmluZ3xudW1iZXJ8bnVsbCl9fSAqL1xuZXhwb3J0IGxldCBRdWVyeVBhcmFtZXRlckRlZjtcblxuLyoqXG4gKiBCdWlsZHMgYSBVUkwgZnJvbSBxdWVyeSBwYXJhbWV0ZXJzLCB0cnVuY2F0aW5nIHRvIGEgbWF4aW11bSBsZW5ndGggaWZcbiAqIG5lY2Vzc2FyeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlVXJsIHNjaGVtZSwgZG9tYWluLCBhbmQgcGF0aCBmb3IgdGhlIFVSTC5cbiAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsc3RyaW5nfG51bWJlcnxudWxsPn0gcXVlcnlQYXJhbXMgcXVlcnkgcGFyYW1ldGVycyBmb3JcbiAqICAgICB0aGUgVVJMLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heExlbmd0aCBsZW5ndGggdG8gdHJ1bmNhdGUgdGhlIFVSTCB0byBpZiBuZWNlc3NhcnkuXG4gKiBAcGFyYW0gez9RdWVyeVBhcmFtZXRlckRlZj19IG9wdF90cnVuY2F0aW9uUXVlcnlQYXJhbSBxdWVyeSBwYXJhbWV0ZXIgdG9cbiAqICAgICBhcHBlbmQgdG8gdGhlIFVSTCBpZmYgYW55IHF1ZXJ5IHBhcmFtZXRlcnMgd2VyZSB0cnVuY2F0ZWQuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IHRoZSBmdWxseSBjb25zdHJ1Y3RlZCBVUkwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBidWlsZFVybChcbiAgYmFzZVVybCwgcXVlcnlQYXJhbXMsIG1heExlbmd0aCwgb3B0X3RydW5jYXRpb25RdWVyeVBhcmFtKSB7XG4gIGNvbnN0IGVuY29kZWRQYXJhbXMgPSBbXTtcbiAgY29uc3QgZW5jb2RlZFRydW5jYXRpb25QYXJhbSA9XG4gICAgICBvcHRfdHJ1bmNhdGlvblF1ZXJ5UGFyYW0gJiZcbiAgICAgICEob3B0X3RydW5jYXRpb25RdWVyeVBhcmFtLnZhbHVlID09IG51bGwgfHxcbiAgICAgIG9wdF90cnVuY2F0aW9uUXVlcnlQYXJhbS52YWx1ZSA9PT0gJycpID9cbiAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KG9wdF90cnVuY2F0aW9uUXVlcnlQYXJhbS5uYW1lKSArICc9JyArXG4gICAgICBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKG9wdF90cnVuY2F0aW9uUXVlcnlQYXJhbS52YWx1ZSkpIDpcbiAgICAgICAgbnVsbDtcbiAgbGV0IGNhcGFjaXR5ID0gbWF4TGVuZ3RoIC0gYmFzZVVybC5sZW5ndGg7XG4gIGlmIChlbmNvZGVkVHJ1bmNhdGlvblBhcmFtKSB7XG4gICAgY2FwYWNpdHkgLT0gZW5jb2RlZFRydW5jYXRpb25QYXJhbS5sZW5ndGggKyAxO1xuICB9XG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhxdWVyeVBhcmFtcyk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGtleSA9IGtleXNbaV07XG4gICAgY29uc3QgdmFsdWUgPSBxdWVyeVBhcmFtc1trZXldO1xuICAgIGlmICh2YWx1ZSA9PSBudWxsIHx8IHZhbHVlID09PSAnJykge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGNvbnN0IGVuY29kZWROYW1lQW5kU2VwID0gZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPSc7XG4gICAgY29uc3QgZW5jb2RlZFZhbHVlID0gZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyh2YWx1ZSkpO1xuICAgIGNvbnN0IGZ1bGxMZW5ndGggPSBlbmNvZGVkTmFtZUFuZFNlcC5sZW5ndGggKyBlbmNvZGVkVmFsdWUubGVuZ3RoICsgMTtcbiAgICBpZiAoZnVsbExlbmd0aCA+IGNhcGFjaXR5KSB7XG4gICAgICBjb25zdCB0cnVuY2F0ZWRWYWx1ZSA9IGVuY29kZWRWYWx1ZVxuICAgICAgICAgIC5zdWJzdHIoMCwgY2FwYWNpdHkgLSBlbmNvZGVkTmFtZUFuZFNlcC5sZW5ndGggLSAxKVxuICAgICAgLy8gRG9uJ3QgZW5kIHdpdGggYSBwYXJ0aWFsbHkgdHJ1bmNhdGVkIGVzY2FwZSBzZXF1ZW5jZVxuICAgICAgICAgIC5yZXBsYWNlKC8lXFx3PyQvLCAnJyk7XG4gICAgICBpZiAodHJ1bmNhdGVkVmFsdWUpIHtcbiAgICAgICAgZW5jb2RlZFBhcmFtcy5wdXNoKGVuY29kZWROYW1lQW5kU2VwICsgdHJ1bmNhdGVkVmFsdWUpO1xuICAgICAgfVxuICAgICAgaWYgKGVuY29kZWRUcnVuY2F0aW9uUGFyYW0pIHtcbiAgICAgICAgZW5jb2RlZFBhcmFtcy5wdXNoKGVuY29kZWRUcnVuY2F0aW9uUGFyYW0pO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGVuY29kZWRQYXJhbXMucHVzaChlbmNvZGVkTmFtZUFuZFNlcCArIGVuY29kZWRWYWx1ZSk7XG4gICAgY2FwYWNpdHkgLT0gZnVsbExlbmd0aDtcbiAgfVxuICBpZiAoIWVuY29kZWRQYXJhbXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGJhc2VVcmw7XG4gIH1cbiAgcmV0dXJuIGJhc2VVcmwgKyAnPycgKyBlbmNvZGVkUGFyYW1zLmpvaW4oJyYnKTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge0RvbUZpbmdlcnByaW50fSBmcm9tICcuLi8uLi8uLi9zcmMvdXRpbHMvZG9tLWZpbmdlcnByaW50JztcbmltcG9ydCB7U2VydmljZXN9IGZyb20gJy4uLy4uLy4uL3NyYy9zZXJ2aWNlcyc7XG5pbXBvcnQge2J1aWxkVXJsfSBmcm9tICcuL3VybC1idWlsZGVyJztcbmltcG9ydCB7ZGV2fSBmcm9tICcuLi8uLi8uLi9zcmMvbG9nJztcbmltcG9ydCB7ZGljdH0gZnJvbSAnLi4vLi4vLi4vc3JjL3V0aWxzL29iamVjdCc7XG5pbXBvcnQge2dldEJpbmFyeVR5cGV9IGZyb20gJy4uLy4uLy4uL3NyYy9leHBlcmltZW50cyc7XG5pbXBvcnQge2dldE1vZGV9IGZyb20gJy4uLy4uLy4uL3NyYy9tb2RlJztcbmltcG9ydCB7Z2V0T3JDcmVhdGVBZENpZH0gZnJvbSAnLi4vLi4vLi4vc3JjL2FkLWNpZCc7XG5pbXBvcnQge2dldFRpbWluZ0RhdGFTeW5jfSBmcm9tICcuLi8uLi8uLi9zcmMvc2VydmljZS92YXJpYWJsZS1zb3VyY2UnO1xuaW1wb3J0IHtcbiAgaXNFeHBlcmltZW50T24sXG4gIHRvZ2dsZUV4cGVyaW1lbnQsXG59IGZyb20gJy4uLy4uLy4uL3NyYy9leHBlcmltZW50cyc7XG5pbXBvcnQge3BhcnNlSnNvbn0gZnJvbSAnLi4vLi4vLi4vc3JjL2pzb24nO1xuaW1wb3J0IHt3aGVuVXBncmFkZWRUb0N1c3RvbUVsZW1lbnR9IGZyb20gJy4uLy4uLy4uL3NyYy9kb20nO1xuXG4vKiogQHR5cGUge3N0cmluZ30gICovXG5jb25zdCBBTVBfQU5BTFlUSUNTX0hFQURFUiA9ICdYLUFtcEFuYWx5dGljcyc7XG5cbi8qKiBAY29uc3Qge251bWJlcn0gKi9cbmNvbnN0IE1BWF9VUkxfTEVOR1RIID0gMTYzODQ7XG5cbi8qKiBAZW51bSB7c3RyaW5nfSAqL1xuY29uc3QgQW1wQWRJbXBsZW1lbnRhdGlvbiA9IHtcbiAgQU1QX0FEX1hIUl9UT19JRlJBTUU6ICcyJyxcbiAgQU1QX0FEX1hIUl9UT19JRlJBTUVfT1JfQU1QOiAnMycsXG4gIEFNUF9BRF9JRlJBTUVfR0VUOiAnNScsXG59O1xuXG4vKiogQGNvbnN0IHshT2JqZWN0fSAqL1xuZXhwb3J0IGNvbnN0IFZhbGlkQWRDb250YWluZXJUeXBlcyA9IHtcbiAgJ0FNUC1DQVJPVVNFTCc6ICdhYycsXG4gICdBTVAtRlgtRkxZSU5HLUNBUlBFVCc6ICdmYycsXG4gICdBTVAtTElHSFRCT1gnOiAnbGInLFxuICAnQU1QLVNUSUNLWS1BRCc6ICdzYScsXG59O1xuXG4vKipcbiAqIFNlZSBgVmlzaWJpbGl0eVN0YXRlYCBlbnVtLlxuICogQGNvbnN0IHshT2JqZWN0PHN0cmluZywgc3RyaW5nPn1cbiAqL1xuY29uc3QgdmlzaWJpbGl0eVN0YXRlQ29kZXMgPSB7XG4gICd2aXNpYmxlJzogJzEnLFxuICAnaGlkZGVuJzogJzInLFxuICAncHJlcmVuZGVyJzogJzMnLFxuICAndW5sb2FkZWQnOiAnNScsXG59O1xuXG4vKiogQGNvbnN0IHtzdHJpbmd9ICovXG5leHBvcnQgY29uc3QgUVFJRF9IRUFERVIgPSAnWC1RUUlEJztcblxuLyoqXG4gKiBFbGVtZW50IGF0dHJpYnV0ZSB0aGF0IHN0b3JlcyBleHBlcmltZW50IElEcy5cbiAqXG4gKiBOb3RlOiBUaGlzIGF0dHJpYnV0ZSBzaG91bGQgYmUgdXNlZCBvbmx5IGZvciB0cmFja2luZyBleHBlcmltZW50YWxcbiAqIGltcGxlbWVudGF0aW9ucyBvZiBBTVAgdGFncywgZS5nLiwgYnkgQU1QSFRNTCBpbXBsZW1lbnRvcnMuICBJdCBzaG91bGQgbm90IGJlXG4gKiBhZGRlZCBieSBhIHB1Ymxpc2hlciBwYWdlLlxuICpcbiAqIEBjb25zdCB7c3RyaW5nfVxuICogQHZpc2libGVGb3JUZXN0aW5nXG4gKi9cbmV4cG9ydCBjb25zdCBFWFBFUklNRU5UX0FUVFJJQlVURSA9ICdkYXRhLWV4cGVyaW1lbnQtaWQnO1xuXG4vKiogQHR5cGVkZWYge3t1cmxzOiAhQXJyYXk8c3RyaW5nPn19XG4gKi9cbmV4cG9ydCBsZXQgQW1wQW5hbHl0aWNzQ29uZmlnRGVmO1xuXG4vKipcbiAqIEB0eXBlZGVmIHt7aW5zdGFudExvYWQ6IGJvb2xlYW4sIHdyaXRlSW5Cb2R5OiBib29sZWFufX1cbiAqL1xuZXhwb3J0IGxldCBOYW1lZnJhbWVFeHBlcmltZW50Q29uZmlnO1xuXG4vKipcbiAqIEBjb25zdCB7IS4vdXJsLWJ1aWxkZXIuUXVlcnlQYXJhbWV0ZXJEZWZ9XG4gKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAqL1xuZXhwb3J0IGNvbnN0IFRSVU5DQVRJT05fUEFSQU0gPSB7bmFtZTogJ3RydW5jJywgdmFsdWU6ICcxJ307XG5cbi8qKiBAY29uc3Qge09iamVjdH0gKi9cbmNvbnN0IENETl9QUk9YWV9SRUdFWFAgPSAvXmh0dHBzOlxcL1xcLyhbYS16QS1aMC05Xy1dK1xcLik/Y2RuXFwuYW1wcHJvamVjdFxcLm9yZygoXFwvLiopfCgkKSkrLztcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiBuYXZpZ2F0aW9uIHN0YXJ0IHVzaW5nIHRoZSBwZXJmb3JtYW5jZSBBUEkgb3IgMCBpZiBub3RcbiAqIHN1cHBvcnRlZCBieSB0aGUgYnJvd3Nlci5cbiAqIEZlYXR1cmUgZGV0ZWN0aW9uIGlzIHVzZWQgZm9yIHNhZmV0eSBvbiBicm93c2VycyB0aGF0IGRvIG5vdCBzdXBwb3J0IHRoZVxuICogcGVyZm9ybWFuY2UgQVBJLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuZnVuY3Rpb24gZ2V0TmF2U3RhcnQod2luKSB7XG4gIHJldHVybiAod2luWydwZXJmb3JtYW5jZSddICYmIHdpblsncGVyZm9ybWFuY2UnXVsndGltaW5nJ10gJiZcbiAgICAgIHdpblsncGVyZm9ybWFuY2UnXVsndGltaW5nJ11bJ25hdmlnYXRpb25TdGFydCddKSB8fCAwO1xufVxuXG4vKipcbiAqIENoZWNrIHdoZXRoZXIgR29vZ2xlIEFkcyBzdXBwb3J0cyB0aGUgQTRBIHJlbmRlcmluZyBwYXRod2F5IGlzIHZhbGlkIGZvciB0aGVcbiAqIGVudmlyb25tZW50IGJ5IGVuc3VyaW5nIG5hdGl2ZSBjcnlwdG8gc3VwcG9ydCBhbmQgcGFnZSBvcmlnaW5hdGVkIGluIHRoZVxuICoge0Bjb2RlIGNkbi5hbXBwcm9qZWN0Lm9yZ30gQ0ROIDxlbT5vcjwvZW0+IHdlIG11c3QgYmUgcnVubmluZyBpbiBsb2NhbFxuICogZGV2IG1vZGUuXG4gKlxuICogQHBhcmFtIHshV2luZG93fSB3aW4gIEhvc3Qgd2luZG93IGZvciB0aGUgYWQuXG4gKiBAcmV0dXJuIHtib29sZWFufSAgV2hldGhlciBHb29nbGUgQWRzIHNob3VsZCBhdHRlbXB0IHRvIHJlbmRlciB2aWEgdGhlIEE0QVxuICogICBwYXRod2F5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNHb29nbGVBZHNBNEFWYWxpZEVudmlyb25tZW50KHdpbikge1xuICByZXR1cm4gc3VwcG9ydHNOYXRpdmVDcnlwdG8od2luKSAmJiAoXG4gICAgISFpc0NkblByb3h5KHdpbikgfHwgZ2V0TW9kZSh3aW4pLmxvY2FsRGV2IHx8IGdldE1vZGUod2luKS50ZXN0KTtcbn1cblxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciBuYXRpdmUgY3J5cHRvIGlzIHN1cHBvcnRlZCBmb3Igd2luLlxuICogQHBhcmFtIHshV2luZG93fSB3aW4gIEhvc3Qgd2luZG93IGZvciB0aGUgYWQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIG5hdGl2ZSBjcnlwdG8gaXMgc3VwcG9ydGVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3VwcG9ydHNOYXRpdmVDcnlwdG8od2luKSB7XG4gIHJldHVybiB3aW4uY3J5cHRvICYmICh3aW4uY3J5cHRvLnN1YnRsZSB8fCB3aW4uY3J5cHRvLndlYmtpdFN1YnRsZSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHshQU1QLkJhc2VFbGVtZW50fSBhbXBFbGVtZW50IFRoZSBlbGVtZW50IG9uIHdob3NlIGxpZmVjeWNsZSB0aGlzXG4gKiAgICByZXBvcnRlciB3aWxsIGJlIHJlcG9ydGluZy5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IHdoZXRoZXIgcmVwb3J0aW5nIGlzIGVuYWJsZWQgZm9yIHRoaXMgZWxlbWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNSZXBvcnRpbmdFbmFibGVkKGFtcEVsZW1lbnQpIHtcbiAgLy8gQ2FydmUtb3V0czogV2Ugb25seSB3YW50IHRvIGVuYWJsZSBwcm9maWxpbmcgcGluZ2JhY2tzIHdoZW46XG4gIC8vICAgLSBUaGUgYWQgaXMgZnJvbSBvbmUgb2YgdGhlIEdvb2dsZSBuZXR3b3JrcyAoQWRTZW5zZSBvciBEb3VibGVjbGljaykuXG4gIC8vICAgLSBUaGUgYWQgc2xvdCBpcyBpbiB0aGUgQTRBLXZzLTNwIGFtcC1hZCBjb250cm9sIGJyYW5jaCAoZWl0aGVyIHZpYVxuICAvLyAgICAgaW50ZXJuYWwsIGNsaWVudC1zaWRlIHNlbGVjdGlvbiBvciB2aWEgZXh0ZXJuYWwsIEdvb2dsZSBTZWFyY2hcbiAgLy8gICAgIHNlbGVjdGlvbikuXG4gIC8vICAgLSBXZSBoYXZlbid0IHR1cm5lZCBvZmYgcHJvZmlsaW5nIHZpYSB0aGUgcmF0ZSBjb250cm9scyBpblxuICAvLyAgICAgYnVpbGQtc3lzdGVtL2dsb2JhbC1jb25maWcve2NhbmFyeSxwcm9kfS1jb25maWcuanNvblxuICAvLyBJZiBhbnkgb2YgdGhvc2UgZmFpbCwgd2UgdXNlIHRoZSBgQmFzZUxpZmVjeWNsZVJlcG9ydGVyYCwgd2hpY2ggaXMgYVxuICAvLyBhIG5vLW9wIChzZW5kcyBubyBwaW5ncykuXG4gIGNvbnN0IHR5cGUgPSBhbXBFbGVtZW50LmVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0eXBlJyk7XG4gIGNvbnN0IHt3aW59ID0gYW1wRWxlbWVudDtcbiAgLy8gSW4gbG9jYWwgZGV2IG1vZGUsIG5laXRoZXIgdGhlIGNhbmFyeSBub3IgcHJvZCBjb25maWcgZmlsZXMgaXMgYXZhaWxhYmxlLFxuICAvLyBzbyBtYW51YWxseSBzZXQgdGhlIHByb2ZpbGluZyByYXRlLCBmb3IgdGVzdGluZy9kZXYuXG4gIGlmIChnZXRNb2RlKGFtcEVsZW1lbnQud2luKS5sb2NhbERldiAmJiAhZ2V0TW9kZShhbXBFbGVtZW50LndpbikudGVzdCkge1xuICAgIHRvZ2dsZUV4cGVyaW1lbnQod2luLCAnYTRhUHJvZmlsaW5nUmF0ZScsIHRydWUsIHRydWUpO1xuICB9XG4gIHJldHVybiAodHlwZSA9PSAnZG91YmxlY2xpY2snIHx8IHR5cGUgPT0gJ2Fkc2Vuc2UnKSAmJlxuICAgICAgaXNFeHBlcmltZW50T24od2luLCAnYTRhUHJvZmlsaW5nUmF0ZScpO1xufVxuXG4vKipcbiAqIEhhcyBzaWRlLWVmZmVjdCBvZiBpbmNyZW1lbnRpbmcgaWZpIGNvdW50ZXIgb24gd2luZG93LlxuICogQHBhcmFtIHshLi4vLi4vLi4vZXh0ZW5zaW9ucy9hbXAtYTRhLzAuMS9hbXAtYTRhLkFtcEE0QX0gYTRhXG4gKiBAcGFyYW0geyFBcnJheTxzdHJpbmc+PX0gb3B0X2V4cGVyaW1lbnRJZHMgQW55IGV4cGVyaW1lbnRzIElEcyAoaW4gYWRkaXRpb25cbiAqICAgICB0byB0aG9zZSBzcGVjaWZpZWQgb24gdGhlIGFkIGVsZW1lbnQpIHRoYXQgc2hvdWxkIGJlIGluY2x1ZGVkIGluIHRoZVxuICogICAgIHJlcXVlc3QuXG4gKiBAcmV0dXJuIHshT2JqZWN0PHN0cmluZyxudWxsfG51bWJlcnxzdHJpbmc+fSBibG9jayBsZXZlbCBwYXJhbWV0ZXJzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnb29nbGVCbG9ja1BhcmFtZXRlcnMoYTRhLCBvcHRfZXhwZXJpbWVudElkcykge1xuICBjb25zdCB7ZWxlbWVudDogYWRFbGVtZW50LCB3aW59ID0gYTRhO1xuICBjb25zdCBzbG90UmVjdCA9IGE0YS5nZXRQYWdlTGF5b3V0Qm94KCk7XG4gIGNvbnN0IGlmcmFtZURlcHRoID0gaWZyYW1lTmVzdGluZ0RlcHRoKHdpbik7XG4gIGNvbnN0IGVuY2xvc2luZ0NvbnRhaW5lcnMgPSBnZXRFbmNsb3NpbmdDb250YWluZXJUeXBlcyhhZEVsZW1lbnQpO1xuICBsZXQgZWlkcyA9IGFkRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZXhwZXJpbWVudC1pZCcpO1xuICBpZiAob3B0X2V4cGVyaW1lbnRJZHMpIHtcbiAgICBlaWRzID0gbWVyZ2VFeHBlcmltZW50SWRzKG9wdF9leHBlcmltZW50SWRzLCBlaWRzKTtcbiAgfVxuICByZXR1cm4ge1xuICAgICdhZGYnOiBEb21GaW5nZXJwcmludC5nZW5lcmF0ZShhZEVsZW1lbnQpLFxuICAgICduaGQnOiBpZnJhbWVEZXB0aCxcbiAgICAnZWlkJzogZWlkcyxcbiAgICAnYWR4Jzogc2xvdFJlY3QubGVmdCxcbiAgICAnYWR5Jzogc2xvdFJlY3QudG9wLFxuICAgICdvaWQnOiAnMicsXG4gICAgJ2FjdCc6IGVuY2xvc2luZ0NvbnRhaW5lcnMubGVuZ3RoID8gZW5jbG9zaW5nQ29udGFpbmVycy5qb2luKCkgOiBudWxsLFxuICB9O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBtYXRjaGluZyB0eXBpbmcgYXR0cmlidXRlLlxuICogQHBhcmFtIHtmdW5jdGlvbighRWxlbWVudCk6c3RyaW5nfSBncm91cEZuXG4gKiBAcmV0dXJuIHshUHJvbWlzZTwhT2JqZWN0PHN0cmluZywhQXJyYXk8IVByb21pc2U8IS4uLy4uLy4uL3NyYy9iYXNlLWVsZW1lbnQuQmFzZUVsZW1lbnQ+Pj4+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ3JvdXBBbXBBZHNCeVR5cGUod2luLCB0eXBlLCBncm91cEZuKSB7XG4gIC8vIExvb2sgZm9yIGFtcC1hZCBlbGVtZW50cyBvZiBjb3JyZWN0IHR5cGUgb3IgdGhvc2UgY29udGFpbmVkIHdpdGhpblxuICAvLyBzdGFuZGFyZCBjb250YWluZXIgdHlwZS4gIE5vdGUgdGhhdCBkaXNwbGF5IG5vbmUgY29udGFpbmVycyB3aWxsIG5vdCBiZVxuICAvLyBpbmNsdWRlZCBhcyB0aGV5IHdpbGwgbmV2ZXIgYmUgbWVhc3VyZWQuXG4gIC8vIFRPRE8oa2VpdGh3cmlnaHRib3MpOiB3aGF0IGFib3V0IHNsb3RzIHRoYXQgYmVjb21lIG1lYXN1cmVkIGR1ZSB0byByZW1vdmFsXG4gIC8vIG9mIGRpc3BsYXkgbm9uZSAoZS5nLiB1c2VyIHJlc2l6ZXMgdmlld3BvcnQgYW5kIG1lZGlhIHNlbGVjdG9yIG1ha2VzXG4gIC8vIHZpc2libGUpLlxuICBjb25zdCBhbXBBZFNlbGVjdG9yID1cbiAgICAgIHIgPT4gci5lbGVtZW50Li8qT0sqL3F1ZXJ5U2VsZWN0b3IoYGFtcC1hZFt0eXBlPSR7dHlwZX1dYCk7XG4gIHJldHVybiBTZXJ2aWNlcy5yZXNvdXJjZXNGb3JEb2Mod2luLmRvY3VtZW50KS5nZXRNZWFzdXJlZFJlc291cmNlcyh3aW4sXG4gICAgICByID0+IHtcbiAgICAgICAgY29uc3QgaXNBbXBBZFR5cGUgPSByLmVsZW1lbnQudGFnTmFtZSA9PSAnQU1QLUFEJyAmJlxuICAgICAgICAgIHIuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSA9PSB0eXBlO1xuICAgICAgICBpZiAoaXNBbXBBZFR5cGUpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpc0FtcEFkQ29udGFpbmVyRWxlbWVudCA9XG4gICAgICAgICAgT2JqZWN0LmtleXMoVmFsaWRBZENvbnRhaW5lclR5cGVzKS5pbmNsdWRlcyhyLmVsZW1lbnQudGFnTmFtZSkgJiZcbiAgICAgICAgICAhIWFtcEFkU2VsZWN0b3Iocik7XG4gICAgICAgIHJldHVybiBpc0FtcEFkQ29udGFpbmVyRWxlbWVudDtcbiAgICAgIH0pXG4gICAgICAvLyBOZWVkIHRvIHdhaXQgb24gYW55IGNvbnRhaW5lZCBlbGVtZW50IHJlc29sdXRpb24gZm9sbG93ZWQgYnkgYnVpbGRcbiAgICAgIC8vIG9mIGNoaWxkIGFkLlxuICAgICAgLnRoZW4ocmVzb3VyY2VzID0+IFByb21pc2UuYWxsKHJlc291cmNlcy5tYXAoXG4gICAgICAgICAgcmVzb3VyY2UgPT4ge1xuICAgICAgICAgICAgaWYgKHJlc291cmNlLmVsZW1lbnQudGFnTmFtZSA9PSAnQU1QLUFEJykge1xuICAgICAgICAgICAgICByZXR1cm4gcmVzb3VyY2UuZWxlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE11c3QgYmUgY29udGFpbmVyIGVsZW1lbnQgc28gbmVlZCB0byB3YWl0IGZvciBjaGlsZCBhbXAtYWQgdG9cbiAgICAgICAgICAgIC8vIGJlIHVwZ3JhZGVkLlxuICAgICAgICAgICAgcmV0dXJuIHdoZW5VcGdyYWRlZFRvQ3VzdG9tRWxlbWVudChcbiAgICAgICAgICAgICAgICBkZXYoKS5hc3NlcnRFbGVtZW50KGFtcEFkU2VsZWN0b3IocmVzb3VyY2UpKSk7XG4gICAgICAgICAgfSkpKVxuICAgICAgLy8gR3JvdXAgYnkgbmV0d29ya0lkLlxuICAgICAgLnRoZW4oZWxlbWVudHMgPT4gZWxlbWVudHMucmVkdWNlKChyZXN1bHQsIGVsZW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgZ3JvdXBJZCA9IGdyb3VwRm4oZWxlbWVudCk7XG4gICAgICAgIChyZXN1bHRbZ3JvdXBJZF0gfHwgKHJlc3VsdFtncm91cElkXSA9IFtdKSkucHVzaChlbGVtZW50LmdldEltcGwoKSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9LCB7fSkpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7ISAuLi8uLi8uLi9leHRlbnNpb25zL2FtcC1hNGEvMC4xL2FtcC1hNGEuQW1wQTRBfSBhNGFcbiAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydFRpbWVcbiAqIEByZXR1cm4geyFQcm9taXNlPCFPYmplY3Q8c3RyaW5nLG51bGx8bnVtYmVyfHN0cmluZz4+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ29vZ2xlUGFnZVBhcmFtZXRlcnMoYTRhLCBzdGFydFRpbWUpIHtcbiAgY29uc3Qge3dpbn0gPSBhNGE7XG4gIGNvbnN0IGFtcERvYyA9IGE0YS5nZXRBbXBEb2MoKTtcbiAgcmV0dXJuIFByb21pc2UuYWxsKFtcbiAgICBnZXRPckNyZWF0ZUFkQ2lkKGFtcERvYywgJ0FNUF9FQ0lEX0dPT0dMRScsICdfZ2EnKSxcbiAgICBTZXJ2aWNlcy52aWV3ZXJGb3JEb2MoYW1wRG9jKS5nZXRSZWZlcnJlclVybCgpXSlcbiAgICAgIC50aGVuKHByb21pc2VSZXN1bHRzID0+IHtcbiAgICAgICAgY29uc3QgY2xpZW50SWQgPSBwcm9taXNlUmVzdWx0c1swXTtcbiAgICAgICAgY29uc3QgZG9jdW1lbnRJbmZvID0gU2VydmljZXMuZG9jdW1lbnRJbmZvRm9yRG9jKGFtcERvYyk7XG4gICAgICAgIC8vIFJlYWQgYnkgR1BUIGZvciBHQS9HUFQgaW50ZWdyYXRpb24uXG4gICAgICAgIHdpbi5nYUdsb2JhbCA9IHdpbi5nYUdsb2JhbCB8fFxuICAgICAgICB7Y2lkOiBjbGllbnRJZCwgaGlkOiBkb2N1bWVudEluZm8ucGFnZVZpZXdJZH07XG4gICAgICAgIGNvbnN0IHtzY3JlZW59ID0gd2luO1xuICAgICAgICBjb25zdCB2aWV3cG9ydCA9IFNlcnZpY2VzLnZpZXdwb3J0Rm9yRG9jKGFtcERvYyk7XG4gICAgICAgIGNvbnN0IHZpZXdwb3J0UmVjdCA9IHZpZXdwb3J0LmdldFJlY3QoKTtcbiAgICAgICAgY29uc3Qgdmlld3BvcnRTaXplID0gdmlld3BvcnQuZ2V0U2l6ZSgpO1xuICAgICAgICBjb25zdCB2aXNpYmlsaXR5U3RhdGUgPSBTZXJ2aWNlcy52aWV3ZXJGb3JEb2MoYW1wRG9jKVxuICAgICAgICAgICAgLmdldFZpc2liaWxpdHlTdGF0ZSgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICdpc19hbXAnOiBhNGEuaXNYaHJBbGxvd2VkKCkgP1xuICAgICAgICAgICAgQW1wQWRJbXBsZW1lbnRhdGlvbi5BTVBfQURfWEhSX1RPX0lGUkFNRV9PUl9BTVAgOlxuICAgICAgICAgICAgQW1wQWRJbXBsZW1lbnRhdGlvbi5BTVBfQURfSUZSQU1FX0dFVCxcbiAgICAgICAgICAnYW1wX3YnOiAnJGludGVybmFsUnVudGltZVZlcnNpb24kJyxcbiAgICAgICAgICAnZF9pbXAnOiAnMScsXG4gICAgICAgICAgJ2MnOiBnZXRDb3JyZWxhdG9yKHdpbiwgYW1wRG9jLCBjbGllbnRJZCksXG4gICAgICAgICAgJ2dhX2NpZCc6IHdpbi5nYUdsb2JhbC5jaWQgfHwgbnVsbCxcbiAgICAgICAgICAnZ2FfaGlkJzogd2luLmdhR2xvYmFsLmhpZCB8fCBudWxsLFxuICAgICAgICAgICdkdCc6IHN0YXJ0VGltZSxcbiAgICAgICAgICAnYml3Jzogdmlld3BvcnRSZWN0LndpZHRoLFxuICAgICAgICAgICdiaWgnOiB2aWV3cG9ydFJlY3QuaGVpZ2h0LFxuICAgICAgICAgICd1X2F3Jzogc2NyZWVuID8gc2NyZWVuLmF2YWlsV2lkdGggOiBudWxsLFxuICAgICAgICAgICd1X2FoJzogc2NyZWVuID8gc2NyZWVuLmF2YWlsSGVpZ2h0IDogbnVsbCxcbiAgICAgICAgICAndV9jZCc6IHNjcmVlbiA/IHNjcmVlbi5jb2xvckRlcHRoIDogbnVsbCxcbiAgICAgICAgICAndV93Jzogc2NyZWVuID8gc2NyZWVuLndpZHRoIDogbnVsbCxcbiAgICAgICAgICAndV9oJzogc2NyZWVuID8gc2NyZWVuLmhlaWdodCA6IG51bGwsXG4gICAgICAgICAgJ3VfdHonOiAtbmV3IERhdGUoKS5nZXRUaW1lem9uZU9mZnNldCgpLFxuICAgICAgICAgICd1X2hpcyc6IGdldEhpc3RvcnlMZW5ndGgod2luKSxcbiAgICAgICAgICAnaXN3Jzogd2luICE9IHdpbi50b3AgPyB2aWV3cG9ydFNpemUud2lkdGggOiBudWxsLFxuICAgICAgICAgICdpc2gnOiB3aW4gIT0gd2luLnRvcCA/IHZpZXdwb3J0U2l6ZS5oZWlnaHQgOiBudWxsLFxuICAgICAgICAgICdhcnQnOiBnZXRBbXBSdW50aW1lVHlwZVBhcmFtZXRlcih3aW4pLFxuICAgICAgICAgICd2aXMnOiB2aXNpYmlsaXR5U3RhdGVDb2Rlc1t2aXNpYmlsaXR5U3RhdGVdIHx8ICcwJyxcbiAgICAgICAgICAnc2NyX3gnOiB2aWV3cG9ydC5nZXRTY3JvbGxMZWZ0KCksXG4gICAgICAgICAgJ3Njcl95Jzogdmlld3BvcnQuZ2V0U2Nyb2xsVG9wKCksXG4gICAgICAgICAgJ2JjJzogZ2V0QnJvd3NlckNhcGFiaWxpdGllc0JpdG1hcCh3aW4pIHx8IG51bGwsXG4gICAgICAgICAgJ2RlYnVnX2V4cGVyaW1lbnRfaWQnOlxuICAgICAgICAgICAgICAoLyg/OiN8LClkZWlkPShbXFxkLF0rKS9pLmV4ZWMod2luLmxvY2F0aW9uLmhhc2gpIHx8IFtdKVsxXSB8fFxuICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAndXJsJzogZG9jdW1lbnRJbmZvLmNhbm9uaWNhbFVybCxcbiAgICAgICAgICAndG9wJzogd2luICE9IHdpbi50b3AgPyB0b3BXaW5kb3dVcmxPckRvbWFpbih3aW4pIDogbnVsbCxcbiAgICAgICAgICAnbG9jJzogd2luLmxvY2F0aW9uLmhyZWYgPT0gZG9jdW1lbnRJbmZvLmNhbm9uaWNhbFVybCA/XG4gICAgICAgICAgICBudWxsIDogd2luLmxvY2F0aW9uLmhyZWYsXG4gICAgICAgICAgJ3JlZic6IHByb21pc2VSZXN1bHRzWzFdIHx8IG51bGwsXG4gICAgICAgIH07XG4gICAgICB9KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyEuLi8uLi8uLi9leHRlbnNpb25zL2FtcC1hNGEvMC4xL2FtcC1hNGEuQW1wQTRBfSBhNGFcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlVXJsXG4gKiBAcGFyYW0ge251bWJlcn0gc3RhcnRUaW1lXG4gKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLG51bGx8bnVtYmVyfHN0cmluZz59IHBhcmFtZXRlcnNcbiAqIEBwYXJhbSB7IUFycmF5PHN0cmluZz49fSBvcHRfZXhwZXJpbWVudElkcyBBbnkgZXhwZXJpbWVudHMgSURzIChpbiBhZGRpdGlvblxuICogICAgIHRvIHRob3NlIHNwZWNpZmllZCBvbiB0aGUgYWQgZWxlbWVudCkgdGhhdCBzaG91bGQgYmUgaW5jbHVkZWQgaW4gdGhlXG4gKiAgICAgcmVxdWVzdC5cbiAqIEByZXR1cm4geyFQcm9taXNlPHN0cmluZz59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnb29nbGVBZFVybChcbiAgYTRhLCBiYXNlVXJsLCBzdGFydFRpbWUsIHBhcmFtZXRlcnMsIG9wdF9leHBlcmltZW50SWRzKSB7XG4gIC8vIFRPRE86IE1heWJlIGFkZCBjaGVja3MgaW4gY2FzZSB0aGVzZSBwcm9taXNlcyBmYWlsLlxuICBjb25zdCBibG9ja0xldmVsUGFyYW1ldGVycyA9IGdvb2dsZUJsb2NrUGFyYW1ldGVycyhhNGEsIG9wdF9leHBlcmltZW50SWRzKTtcbiAgcmV0dXJuIGdvb2dsZVBhZ2VQYXJhbWV0ZXJzKGE0YSwgc3RhcnRUaW1lKVxuICAgICAgLnRoZW4ocGFnZUxldmVsUGFyYW1ldGVycyA9PiB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24ocGFyYW1ldGVycywgYmxvY2tMZXZlbFBhcmFtZXRlcnMsIHBhZ2VMZXZlbFBhcmFtZXRlcnMpO1xuICAgICAgICByZXR1cm4gdHJ1bmNBbmRUaW1lVXJsKGJhc2VVcmwsIHBhcmFtZXRlcnMsIHN0YXJ0VGltZSk7XG4gICAgICB9KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gYmFzZVVybFxuICogQHBhcmFtIHshT2JqZWN0PHN0cmluZyxudWxsfG51bWJlcnxzdHJpbmc+fSBwYXJhbWV0ZXJzXG4gKiBAcGFyYW0ge251bWJlcn0gc3RhcnRUaW1lXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cnVuY0FuZFRpbWVVcmwoYmFzZVVybCwgcGFyYW1ldGVycywgc3RhcnRUaW1lKSB7XG4gIHJldHVybiBidWlsZFVybChcbiAgICAgIGJhc2VVcmwsIHBhcmFtZXRlcnMsIE1BWF9VUkxfTEVOR1RIIC0gMTAsIFRSVU5DQVRJT05fUEFSQU0pXG4gICAgKyAnJmR0ZD0nICsgZWxhcHNlZFRpbWVXaXRoQ2VpbGluZyhEYXRlLm5vdygpLCBzdGFydFRpbWUpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cbmZ1bmN0aW9uIGlmcmFtZU5lc3RpbmdEZXB0aCh3aW4pIHtcbiAgbGV0IHcgPSB3aW47XG4gIGxldCBkZXB0aCA9IDA7XG4gIHdoaWxlICh3ICE9IHcucGFyZW50ICYmIGRlcHRoIDwgMTAwKSB7XG4gICAgdyA9IHcucGFyZW50O1xuICAgIGRlcHRoKys7XG4gIH1cbiAgZGV2KCkuYXNzZXJ0KHcgPT0gd2luLnRvcCk7XG4gIHJldHVybiBkZXB0aDtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5mdW5jdGlvbiBnZXRIaXN0b3J5TGVuZ3RoKHdpbikge1xuICAvLyBXZSBoYXZlIHNlZW4gY2FzZXMgd2hlcmUgYWNjZXNzaW5nIGhpc3RvcnkgbGVuZ3RoIGNhdXNlcyBlcnJvcnMuXG4gIHRyeSB7XG4gICAgcmV0dXJuIHdpbi5oaXN0b3J5Lmxlbmd0aDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiAwO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHJldHVybiB7c3RyaW5nfSBob3N0bmFtZSBwb3J0aW9uIG9mIHVybFxuICogQHZpc2libGVGb3JUZXN0aW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0SG9zdCh1cmwpIHtcbiAgcmV0dXJuICgvXig/Omh0dHBzPzpcXC9cXC8pPyhbXlxcL1xcPzpdKykvaS5leGVjKHVybCkgfHwgW10pWzFdIHx8IHVybDtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7P3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gdG9wV2luZG93VXJsT3JEb21haW4od2luKSB7XG4gIGNvbnN0IHthbmNlc3Rvck9yaWdpbnN9ID0gd2luLmxvY2F0aW9uO1xuICBpZiAoYW5jZXN0b3JPcmlnaW5zKSB7XG4gICAgY29uc3Qge29yaWdpbn0gPSB3aW4ubG9jYXRpb247XG4gICAgY29uc3QgdG9wT3JpZ2luID0gYW5jZXN0b3JPcmlnaW5zW2FuY2VzdG9yT3JpZ2lucy5sZW5ndGggLSAxXTtcbiAgICBpZiAob3JpZ2luID09IHRvcE9yaWdpbikge1xuICAgICAgcmV0dXJuIHdpbi50b3AubG9jYXRpb24uaG9zdG5hbWU7XG4gICAgfVxuICAgIGNvbnN0IHNlY29uZEZyb21Ub3AgPSBzZWNvbmRXaW5kb3dGcm9tVG9wKHdpbik7XG4gICAgaWYgKHNlY29uZEZyb21Ub3AgPT0gd2luIHx8XG4gICAgICAgIG9yaWdpbiA9PSBhbmNlc3Rvck9yaWdpbnNbYW5jZXN0b3JPcmlnaW5zLmxlbmd0aCAtIDJdKSB7XG4gICAgICByZXR1cm4gZXh0cmFjdEhvc3Qoc2Vjb25kRnJvbVRvcC4vKk9LKi9kb2N1bWVudC5yZWZlcnJlcik7XG4gICAgfVxuICAgIHJldHVybiBleHRyYWN0SG9zdCh0b3BPcmlnaW4pO1xuICB9IGVsc2Uge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gd2luLnRvcC5sb2NhdGlvbi5ob3N0bmFtZTtcbiAgICB9IGNhdGNoIChlKSB7fVxuICAgIGNvbnN0IHNlY29uZEZyb21Ub3AgPSBzZWNvbmRXaW5kb3dGcm9tVG9wKHdpbik7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBleHRyYWN0SG9zdChzZWNvbmRGcm9tVG9wLi8qT0sqL2RvY3VtZW50LnJlZmVycmVyKTtcbiAgICB9IGNhdGNoIChlKSB7fVxuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4geyFXaW5kb3d9XG4gKi9cbmZ1bmN0aW9uIHNlY29uZFdpbmRvd0Zyb21Ub3Aod2luKSB7XG4gIGxldCBzZWNvbmRGcm9tVG9wID0gd2luO1xuICBsZXQgZGVwdGggPSAwO1xuICB3aGlsZSAoc2Vjb25kRnJvbVRvcC5wYXJlbnQgIT0gc2Vjb25kRnJvbVRvcC5wYXJlbnQucGFyZW50ICYmXG4gICAgICAgIGRlcHRoIDwgMTAwKSB7XG4gICAgc2Vjb25kRnJvbVRvcCA9IHNlY29uZEZyb21Ub3AucGFyZW50O1xuICAgIGRlcHRoKys7XG4gIH1cbiAgZGV2KCkuYXNzZXJ0KHNlY29uZEZyb21Ub3AucGFyZW50ID09IHdpbi50b3ApO1xuICByZXR1cm4gc2Vjb25kRnJvbVRvcDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gdGltZVxuICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0XG4gKiBAcmV0dXJuIHsobnVtYmVyfHN0cmluZyl9XG4gKi9cbmZ1bmN0aW9uIGVsYXBzZWRUaW1lV2l0aENlaWxpbmcodGltZSwgc3RhcnQpIHtcbiAgY29uc3QgZHVyYXRpb24gPSB0aW1lIC0gc3RhcnQ7XG4gIGlmIChkdXJhdGlvbiA+PSAxZTYpIHtcbiAgICByZXR1cm4gJ00nO1xuICB9IGVsc2UgaWYgKGR1cmF0aW9uID49IDApIHtcbiAgICByZXR1cm4gZHVyYXRpb247XG4gIH1cbiAgcmV0dXJuICctTSc7XG59XG5cbi8qKlxuICogYG5vZGVPckRvY2AgbXVzdCBiZSBwYXNzZWQgZm9yIGNvcnJlY3QgYmVoYXZpb3IgaW4gc2hhZG93IEFNUCAoUFdBKSBjYXNlLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7IUVsZW1lbnR8IS4uLy4uLy4uL3NyYy9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gKiBAcGFyYW0ge3N0cmluZz19IG9wdF9jaWRcbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGNvcnJlbGF0b3IuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb3JyZWxhdG9yKHdpbiwgZWxlbWVudE9yQW1wRG9jLCBvcHRfY2lkKSB7XG4gIGlmICghd2luLmFtcEFkUGFnZUNvcnJlbGF0b3IpIHtcbiAgICB3aW4uYW1wQWRQYWdlQ29ycmVsYXRvciA9IGlzRXhwZXJpbWVudE9uKHdpbiwgJ2V4cC1uZXctY29ycmVsYXRvcicpID9cbiAgICAgIE1hdGguZmxvb3IoNDUwMzU5OTYyNzM3MDQ5NiAqIE1hdGgucmFuZG9tKCkpIDpcbiAgICAgIG1ha2VDb3JyZWxhdG9yKFxuICAgICAgICAgIFNlcnZpY2VzLmRvY3VtZW50SW5mb0ZvckRvYyhlbGVtZW50T3JBbXBEb2MpLnBhZ2VWaWV3SWQsIG9wdF9jaWQpO1xuICB9XG4gIHJldHVybiB3aW4uYW1wQWRQYWdlQ29ycmVsYXRvcjtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGFnZVZpZXdJZFxuICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfY2xpZW50SWRcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuZnVuY3Rpb24gbWFrZUNvcnJlbGF0b3IocGFnZVZpZXdJZCwgb3B0X2NsaWVudElkKSB7XG4gIGNvbnN0IHBhZ2VWaWV3SWROdW1lcmljID0gTnVtYmVyKHBhZ2VWaWV3SWQgfHwgMCk7XG4gIGlmIChvcHRfY2xpZW50SWQpIHtcbiAgICByZXR1cm4gcGFnZVZpZXdJZE51bWVyaWMgKyAoKG9wdF9jbGllbnRJZC5yZXBsYWNlKC9cXEQvZywgJycpICUgMWU2KSAqIDFlNik7XG4gIH0gZWxzZSB7XG4gICAgLy8gSW4gdGhpcyBjYXNlLCBwYWdlVmlld0lkTnVtZXJpYyBpcyBvbmx5IDQgZGlnaXRzID0+IHRvbyBsb3cgZW50cm9weVxuICAgIC8vIHRvIGJlIHVzZWZ1bCBhcyBhIHBhZ2UgY29ycmVsYXRvci4gIFNvIHN5bnRoZXNpemUgb25lIGZyb20gc2NyYXRjaC5cbiAgICAvLyA0NTAzNTk5NjI3MzcwNDk2ID09IDJeNTIuICBUaGUgZ3VhcmFudGVlZCByYW5nZSBvZiBKUyBOdW1iZXIgaXMgYXQgbGVhc3RcbiAgICAvLyAyXjUzIC0gMS5cbiAgICByZXR1cm4gTWF0aC5mbG9vcig0NTAzNTk5NjI3MzcwNDk2ICogTWF0aC5yYW5kb20oKSk7XG4gIH1cbn1cblxuXG4vKipcbiAqIENvbGxlY3QgYWRkaXRpb25hbCBkaW1lbnNpb25zIGZvciB0aGUgYnJkaW0gcGFyYW1ldGVyLlxuICogQHBhcmFtIHshV2luZG93fSB3aW4gVGhlIHdpbmRvdyBmb3Igd2hpY2ggd2UgcmVhZCB0aGUgYnJvd3NlciBkaW1lbnNpb25zLlxuICogQHBhcmFtIHt7d2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXJ9fG51bGx9IHZpZXdwb3J0U2l6ZVxuICogQHJldHVybiB7c3RyaW5nfVxuICogQHZpc2libGVGb3JUZXN0aW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRpdGlvbmFsRGltZW5zaW9ucyh3aW4sIHZpZXdwb3J0U2l6ZSkge1xuICAvLyBTb21lIGJyb3dzZXJzIHRocm93IGVycm9ycyBvbiBzb21lIG9mIHRoZXNlLlxuICBsZXQgc2NyZWVuWCwgc2NyZWVuWSwgb3V0ZXJXaWR0aCwgb3V0ZXJIZWlnaHQsIGlubmVyV2lkdGgsIGlubmVySGVpZ2h0O1xuICB0cnkge1xuICAgIHNjcmVlblggPSB3aW4uc2NyZWVuWDtcbiAgICBzY3JlZW5ZID0gd2luLnNjcmVlblk7XG4gIH0gY2F0Y2ggKGUpIHt9XG4gIHRyeSB7XG4gICAgb3V0ZXJXaWR0aCA9IHdpbi5vdXRlcldpZHRoO1xuICAgIG91dGVySGVpZ2h0ID0gd2luLm91dGVySGVpZ2h0O1xuICB9IGNhdGNoIChlKSB7fVxuICB0cnkge1xuICAgIGlubmVyV2lkdGggPSB2aWV3cG9ydFNpemUud2lkdGg7XG4gICAgaW5uZXJIZWlnaHQgPSB2aWV3cG9ydFNpemUuaGVpZ2h0O1xuICB9IGNhdGNoIChlKSB7fVxuICByZXR1cm4gW3dpbi5zY3JlZW5MZWZ0LFxuICAgIHdpbi5zY3JlZW5Ub3AsXG4gICAgc2NyZWVuWCxcbiAgICBzY3JlZW5ZLFxuICAgIHdpbi5zY3JlZW4gPyB3aW4uc2NyZWVuLmF2YWlsV2lkdGggOiB1bmRlZmluZWQsXG4gICAgd2luLnNjcmVlbiA/IHdpbi5zY3JlZW4uYXZhaWxUb3AgOiB1bmRlZmluZWQsXG4gICAgb3V0ZXJXaWR0aCxcbiAgICBvdXRlckhlaWdodCxcbiAgICBpbm5lcldpZHRoLFxuICAgIGlubmVySGVpZ2h0XS5qb2luKCk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhbXAtYW5hbHl0aWNzIGNvbmZpZyBmb3IgYSBuZXcgQ1NJIHRyaWdnZXIuXG4gKiBAcGFyYW0ge3N0cmluZ30gb24gVGhlIG5hbWUgb2YgdGhlIGFuYWx5dGljcyB0cmlnZ2VyLlxuICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgc3RyaW5nPn0gcGFyYW1zIFBhcmFtcyB0byBiZSBpbmNsdWRlZCBvbiB0aGUgcGluZy5cbiAqIEByZXR1cm4geyFKc29uT2JqZWN0fVxuICovXG5mdW5jdGlvbiBjc2lUcmlnZ2VyKG9uLCBwYXJhbXMpIHtcbiAgcmV0dXJuIGRpY3Qoe1xuICAgICdvbic6IG9uLFxuICAgICdyZXF1ZXN0JzogJ2NzaScsXG4gICAgJ3NhbXBsZVNwZWMnOiB7XG4gICAgICAvLyBQaW5ncyBhcmUgc2FtcGxlZCBvbiBhIHBlci1wYWdldmlldyBiYXNpcy4gQSBwcmVmaXggaXMgaW5jbHVkZWQgaW4gdGhlXG4gICAgICAvLyBzYW1wbGVPbiBzcGVjIHNvIHRoYXQgdGhlIGhhc2ggaXMgb3J0aG9nb25hbCB0byBhbnkgb3RoZXIgc2FtcGxpbmcgaW5cbiAgICAgIC8vIGFtcC5cbiAgICAgICdzYW1wbGVPbic6ICdhNGEtY3NpLSR7cGFnZVZpZXdJZH0nLFxuICAgICAgJ3RocmVzaG9sZCc6IDEsIC8vIDElIHNhbXBsZVxuICAgIH0sXG4gICAgJ3NlbGVjdG9yJzogJ2FtcC1hZCcsXG4gICAgJ3NlbGVjdGlvbk1ldGhvZCc6ICdjbG9zZXN0JyxcbiAgICAnZXh0cmFVcmxQYXJhbXMnOiBwYXJhbXMsXG4gIH0pO1xufVxuXG4vKipcbiAqIFJldHVybnMgYW1wLWFuYWx5dGljcyBjb25maWcgZm9yIEdvb2dsZSBhZHMgbmV0d29yayBpbXBscy5cbiAqIEByZXR1cm4geyFKc29uT2JqZWN0fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3NpQW1wQW5hbHl0aWNzQ29uZmlnKCkge1xuICByZXR1cm4gZGljdCh7XG4gICAgJ3JlcXVlc3RzJzoge1xuICAgICAgJ2NzaSc6ICdodHRwczovL2NzaS5nc3RhdGljLmNvbS9jc2k/JyxcbiAgICB9LFxuICAgICd0cmFuc3BvcnQnOiB7J3hocnBvc3QnOiBmYWxzZX0sXG4gICAgJ3RyaWdnZXJzJzoge1xuICAgICAgJ2FkUmVxdWVzdFN0YXJ0JzogY3NpVHJpZ2dlcignYWQtcmVxdWVzdC1zdGFydCcsIHtcbiAgICAgICAgLy8gYWZzID0+IGFkIGZldGNoIHN0YXJ0XG4gICAgICAgICdtZXQuYTRhJzogJ2Fmc19sdnQuJHt2aWV3ZXJMYXN0VmlzaWJsZVRpbWV9fmFmcy4ke3RpbWV9JyxcbiAgICAgIH0pLFxuICAgICAgJ2FkUmVzcG9uc2VFbmQnOiBjc2lUcmlnZ2VyKCdhZC1yZXNwb25zZS1lbmQnLCB7XG4gICAgICAgIC8vIGFmZSA9PiBhZCBmZXRjaCBlbmRcbiAgICAgICAgJ21ldC5hNGEnOiAnYWZlLiR7dGltZX0nLFxuICAgICAgfSksXG4gICAgICAnYWRSZW5kZXJTdGFydCc6IGNzaVRyaWdnZXIoJ2FkLXJlbmRlci1zdGFydCcsIHtcbiAgICAgICAgLy8gYXN0ID0+IGFkIHNjaGVkdWxlIHRpbWVcbiAgICAgICAgLy8gYXJzID0+IGFkIHJlbmRlciBzdGFydFxuICAgICAgICAnbWV0LmE0YSc6XG4gICAgICAgICAgICAnYXN0LiR7c2NoZWR1bGVUaW1lfX5hcnNfbHZ0LiR7dmlld2VyTGFzdFZpc2libGVUaW1lfX5hcnMuJHt0aW1lfScsXG4gICAgICAgICdxcWlkJzogJyR7cXFpZH0nLFxuICAgICAgfSksXG4gICAgICAnYWRJZnJhbWVMb2FkZWQnOiBjc2lUcmlnZ2VyKCdhZC1pZnJhbWUtbG9hZGVkJywge1xuICAgICAgICAvLyBhaWwgPT4gYWQgaWZyYW1lIGxvYWRlZFxuICAgICAgICAnbWV0LmE0YSc6ICdhaWwuJHt0aW1lfScsXG4gICAgICB9KSxcbiAgICB9LFxuICAgICdleHRyYVVybFBhcmFtcyc6IHtcbiAgICAgICdzJzogJ2FtcGFkJyxcbiAgICAgICdjdHgnOiAnMicsXG4gICAgICAnYyc6ICcke2NvcnJlbGF0b3J9JyxcbiAgICAgICdzbG90SWQnOiAnJHtzbG90SWR9JyxcbiAgICAgIC8vIFRpbWUgdGhhdCB0aGUgYmVhY29uIHdhcyBhY3R1YWxseSBzZW50LiBOb3RlIHRoYXQgdGhlcmUgY2FuIGJlIGRlbGF5c1xuICAgICAgLy8gYmV0d2VlbiB0aGUgdGltZSBhdCB3aGljaCB0aGUgZXZlbnQgaXMgZmlyZWQgYW5kIHdoZW4gJHtub3dNc30gaXNcbiAgICAgIC8vIGV2YWx1YXRlZCB3aGVuIHRoZSBVUkwgaXMgYnVpbHQgYnkgYW1wLWFuYWx5dGljcy5cbiAgICAgICdwdWlkJzogJyR7cmVxdWVzdENvdW50fX4ke3RpbWVzdGFtcH0nLFxuICAgIH0sXG4gIH0pO1xufVxuXG4vKipcbiAqIFJldHVybnMgdmFyaWFibGVzIHRvIGJlIGluY2x1ZGVkIGluIHRoZSBhbXAtYW5hbHl0aWNzIGV2ZW50IGZvciBBNEEuXG4gKiBAcGFyYW0ge3N0cmluZ30gYW5hbHl0aWNzVHJpZ2dlciBUaGUgbmFtZSBvZiB0aGUgYW5hbHl0aWNzIHRyaWdnZXIuXG4gKiBAcGFyYW0geyFBTVAuQmFzZUVsZW1lbnR9IGE0YSBUaGUgQTRBIGVsZW1lbnQuXG4gKiBAcGFyYW0gez9zdHJpbmd9IHFxaWQgVGhlIHF1ZXJ5IElEIG9yIG51bGwgaWYgdGhlIHF1ZXJ5IElEIGhhcyBub3QgYmVlbiBzZXRcbiAqICAgICB5ZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDc2lBbXBBbmFseXRpY3NWYXJpYWJsZXMoYW5hbHl0aWNzVHJpZ2dlciwgYTRhLCBxcWlkKSB7XG4gIGNvbnN0IHt3aW59ID0gYTRhO1xuICBjb25zdCBhbXBkb2MgPSBhNGEuZ2V0QW1wRG9jKCk7XG4gIGNvbnN0IHZpZXdlciA9IFNlcnZpY2VzLnZpZXdlckZvckRvYyhhbXBkb2MpO1xuICBjb25zdCBuYXZTdGFydCA9IGdldE5hdlN0YXJ0KHdpbik7XG4gIGNvbnN0IHZhcnMgPSB7XG4gICAgJ2NvcnJlbGF0b3InOiBnZXRDb3JyZWxhdG9yKHdpbiwgYW1wZG9jKSxcbiAgICAnc2xvdElkJzogYTRhLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWFtcC1zbG90LWluZGV4JyksXG4gICAgJ3ZpZXdlckxhc3RWaXNpYmxlVGltZSc6IHZpZXdlci5nZXRMYXN0VmlzaWJsZVRpbWUoKSAtIG5hdlN0YXJ0LFxuICB9O1xuICBpZiAocXFpZCkge1xuICAgIHZhcnNbJ3FxaWQnXSA9IHFxaWQ7XG4gIH1cbiAgaWYgKGFuYWx5dGljc1RyaWdnZXIgPT0gJ2FkLXJlbmRlci1zdGFydCcpIHtcbiAgICB2YXJzWydzY2hlZHVsZVRpbWUnXSA9IGE0YS5lbGVtZW50LmxheW91dFNjaGVkdWxlVGltZSAtIG5hdlN0YXJ0O1xuICB9XG4gIHJldHVybiB2YXJzO1xufVxuXG4vKipcbiAqIEV4dHJhY3RzIGNvbmZpZ3VyYXRpb24gdXNlZCB0byBidWlsZCBhbXAtYW5hbHl0aWNzIGVsZW1lbnQgZm9yIGFjdGl2ZSB2aWV3LlxuICpcbiAqIEBwYXJhbSB7IS4uLy4uLy4uL2V4dGVuc2lvbnMvYW1wLWE0YS8wLjEvYW1wLWE0YS5BbXBBNEF9IGE0YVxuICogQHBhcmFtIHshLi4vLi4vLi4vc3JjL3V0aWxzL3hoci11dGlscy5GZXRjaFJlc3BvbnNlSGVhZGVyc30gcmVzcG9uc2VIZWFkZXJzXG4gKiAgIFhIUiBzZXJ2aWNlIEZldGNoUmVzcG9uc2VIZWFkZXJzIG9iamVjdCBjb250YWluaW5nIHRoZSByZXNwb25zZVxuICogICBoZWFkZXJzLlxuICogQHJldHVybiB7P0pzb25PYmplY3R9IGNvbmZpZyBvciBudWxsIGlmIGludmFsaWQvbWlzc2luZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RBbXBBbmFseXRpY3NDb25maWcoYTRhLCByZXNwb25zZUhlYWRlcnMpIHtcbiAgaWYgKCFyZXNwb25zZUhlYWRlcnMuaGFzKEFNUF9BTkFMWVRJQ1NfSEVBREVSKSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHRyeSB7XG4gICAgY29uc3QgYW5hbHl0aWNzQ29uZmlnID1cbiAgICAgICAgcGFyc2VKc29uKHJlc3BvbnNlSGVhZGVycy5nZXQoQU1QX0FOQUxZVElDU19IRUFERVIpKTtcbiAgICBkZXYoKS5hc3NlcnQoQXJyYXkuaXNBcnJheShhbmFseXRpY3NDb25maWdbJ3VybCddKSk7XG4gICAgY29uc3QgdXJscyA9IGFuYWx5dGljc0NvbmZpZ1sndXJsJ107XG4gICAgaWYgKCF1cmxzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgY29uZmlnID0gLyoqIEB0eXBlIHtKc29uT2JqZWN0fSovICh7XG4gICAgICAndHJhbnNwb3J0JzogeydiZWFjb24nOiBmYWxzZSwgJ3hocnBvc3QnOiBmYWxzZX0sXG4gICAgICAndHJpZ2dlcnMnOiB7XG4gICAgICAgICdjb250aW51b3VzVmlzaWJsZSc6IHtcbiAgICAgICAgICAnb24nOiAndmlzaWJsZScsXG4gICAgICAgICAgJ3Zpc2liaWxpdHlTcGVjJzoge1xuICAgICAgICAgICAgJ3NlbGVjdG9yJzogJ2FtcC1hZCcsXG4gICAgICAgICAgICAnc2VsZWN0aW9uTWV0aG9kJzogJ2Nsb3Nlc3QnLFxuICAgICAgICAgICAgJ3Zpc2libGVQZXJjZW50YWdlTWluJzogNTAsXG4gICAgICAgICAgICAnY29udGludW91c1RpbWVNaW4nOiAxMDAwLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gRGlzY292ZXIgYW5kIGJ1aWxkIHZpc2liaWxpdHkgZW5kcG9pbnRzLlxuICAgIGNvbnN0IHJlcXVlc3RzID0gZGljdCgpO1xuICAgIGZvciAobGV0IGlkeCA9IDE7IGlkeCA8PSB1cmxzLmxlbmd0aDsgaWR4KyspIHtcbiAgICAgIC8vIFRPRE86IEVuc3VyZSB1cmwgaXMgdmFsaWQgYW5kIG5vdCBmcmVlZm9ybSBKUz9cbiAgICAgIHJlcXVlc3RzW2B2aXNpYmlsaXR5JHtpZHh9YF0gPSBgJHt1cmxzW2lkeCAtIDFdfWA7XG4gICAgfVxuICAgIC8vIFNlY3VyaXR5IHJldmlldyBuZWVkZWQgaGVyZS5cbiAgICBjb25maWdbJ3JlcXVlc3RzJ10gPSByZXF1ZXN0cztcbiAgICBjb25maWdbJ3RyaWdnZXJzJ11bJ2NvbnRpbnVvdXNWaXNpYmxlJ11bJ3JlcXVlc3QnXSA9XG4gICAgICAgIE9iamVjdC5rZXlzKHJlcXVlc3RzKTtcbiAgICByZXR1cm4gY29uZmlnO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBkZXYoKS5lcnJvcignQU1QLUE0QScsICdJbnZhbGlkIGFuYWx5dGljcycsIGVycixcbiAgICAgICAgcmVzcG9uc2VIZWFkZXJzLmdldChBTVBfQU5BTFlUSUNTX0hFQURFUikpO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIEFkZCBuZXcgZXhwZXJpbWVudCBJRHMgdG8gYSAocG9zc2libHkgZW1wdHkpIGV4aXN0aW5nIHNldCBvZiBleHBlcmltZW50IElEcy5cbiAqIFRoZSB7QGNvZGUgY3VycmVudElkU3RyaW5nfSBtYXkgYmUge0Bjb2RlIG51bGx9IG9yIHtAY29kZSAnJ30sIGJ1dCBpZiBpdCBpc1xuICogcG9wdWxhdGVkLCBpdCBtdXN0IGNvbnRhaW4gYSBjb21tYS1zZXBhcmF0ZWQgbGlzdCBvZiBpbnRlZ2VyIGV4cGVyaW1lbnQgSURzXG4gKiAocGVyIHtAY29kZSBwYXJzZUV4cGVyaW1lbnRJZHMoKX0pLiAgUmV0dXJucyB0aGUgbmV3IHNldCBvZiBJRHMsIGVuY29kZWRcbiAqIGFzIGEgY29tbWEtc2VwYXJhdGVkIGxpc3QuICBEb2VzIG5vdCBkZS1kdXBsaWNhdGUgSUQgZW50cmllcy5cbiAqXG4gKiBAcGFyYW0geyFBcnJheTxzdHJpbmc+fSBuZXdJZHMgSURzIHRvIG1lcmdlIGluLiBTaG91bGQgY29udGFpbiBzdHJpbmdpZmllZFxuICogICAgIGludGVnZXIgKGJhc2UgMTApIGV4cGVyaW1lbnQgSURzLlxuICogQHBhcmFtIHs/c3RyaW5nfSBjdXJyZW50SWRTdHJpbmcgIElmIHByZXNlbnQsIGEgc3RyaW5nIGNvbnRhaW5pbmcgYVxuICogICBjb21tYS1zZXBhcmF0ZWQgbGlzdCBvZiBpbnRlZ2VyIGV4cGVyaW1lbnQgSURzLlxuICogQHJldHVybiB7c3RyaW5nfSAgTmV3IGV4cGVyaW1lbnQgbGlzdCBzdHJpbmcsIGluY2x1ZGluZyBuZXdJZCBpZmYgaXQgaXNcbiAqICAgYSB2YWxpZCAoaW50ZWdlcikgZXhwZXJpbWVudCBJRC5cbiAqIEBzZWUgcGFyc2VFeHBlcmltZW50SWRzLCB2YWxpZGF0ZUV4cGVyaW1lbnRJZHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlRXhwZXJpbWVudElkcyhuZXdJZHMsIGN1cnJlbnRJZFN0cmluZykge1xuICBjb25zdCBuZXdJZFN0cmluZyA9IG5ld0lkcy5maWx0ZXIobmV3SWQgPT4gTnVtYmVyKG5ld0lkKSkuam9pbignLCcpO1xuICBjdXJyZW50SWRTdHJpbmcgPSBjdXJyZW50SWRTdHJpbmcgfHwgJyc7XG4gIHJldHVybiBjdXJyZW50SWRTdHJpbmcgKyAoY3VycmVudElkU3RyaW5nICYmIG5ld0lkU3RyaW5nID8gJywnIDogJycpXG4gICAgICArIG5ld0lkU3RyaW5nO1xufVxuXG4vKipcbiAqIEFkZHMgdHdvIENTSSBzaWduYWxzIHRvIHRoZSBnaXZlbiBhbXAtYW5hbHl0aWNzIGNvbmZpZ3VyYXRpb24gb2JqZWN0LCBvbmVcbiAqIGZvciByZW5kZXItc3RhcnQsIGFuZCBvbmUgZm9yIGluaS1sb2FkLlxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50IFRoZSBhZCBzbG90LlxuICogQHBhcmFtIHshSnNvbk9iamVjdH0gY29uZmlnIFRoZSBvcmlnaW5hbCBjb25maWcgb2JqZWN0LlxuICogQHBhcmFtIHs/c3RyaW5nfSBxcWlkXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzVmVyaWZpZWRBbXBDcmVhdGl2ZVxuICogQHJldHVybiB7P0pzb25PYmplY3R9IGNvbmZpZyBvciBudWxsIGlmIGludmFsaWQvbWlzc2luZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZENzaVNpZ25hbHNUb0FtcEFuYWx5dGljc0NvbmZpZyhcbiAgd2luLCBlbGVtZW50LCBjb25maWcsIHFxaWQsIGlzVmVyaWZpZWRBbXBDcmVhdGl2ZSkge1xuICAvLyBBZGQgQ1NJIHBpbmdiYWNrcy5cbiAgY29uc3QgY29ycmVsYXRvciA9IGdldENvcnJlbGF0b3Iod2luLCBlbGVtZW50KTtcbiAgY29uc3Qgc2xvdElkID0gTnVtYmVyKGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWFtcC1zbG90LWluZGV4JykpO1xuICBjb25zdCBlaWRzID0gZW5jb2RlVVJJQ29tcG9uZW50KFxuICAgICAgZWxlbWVudC5nZXRBdHRyaWJ1dGUoRVhQRVJJTUVOVF9BVFRSSUJVVEUpKTtcbiAgY29uc3QgYWRUeXBlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKTtcbiAgY29uc3QgaW5pdFRpbWUgPVxuICAgICAgTnVtYmVyKGdldFRpbWluZ0RhdGFTeW5jKHdpbiwgJ25hdmlnYXRpb25TdGFydCcpIHx8IERhdGUubm93KCkpO1xuICBjb25zdCBkZWx0YVRpbWUgPSBNYXRoLnJvdW5kKHdpbi5wZXJmb3JtYW5jZSAmJiB3aW4ucGVyZm9ybWFuY2Uubm93ID9cbiAgICB3aW4ucGVyZm9ybWFuY2Uubm93KCkgOiAoRGF0ZS5ub3coKSAtIGluaXRUaW1lKSk7XG4gIGNvbnN0IGJhc2VDc2lVcmwgPSAnaHR0cHM6Ly9jc2kuZ3N0YXRpYy5jb20vY3NpP3M9YTRhJyArXG4gICAgICBgJmM9JHtjb3JyZWxhdG9yfSZzbG90SWQ9JHtzbG90SWR9JnFxaWQuJHtzbG90SWR9PSR7cXFpZH1gICtcbiAgICAgIGAmZHQ9JHtpbml0VGltZX1gICtcbiAgICAgIChlaWRzICE9ICdudWxsJyA/IGAmZS4ke3Nsb3RJZH09JHtlaWRzfWAgOiAnJykgK1xuICAgICAgYCZybHM9JGludGVybmFsUnVudGltZVZlcnNpb24kJmFkdC4ke3Nsb3RJZH09JHthZFR5cGV9YDtcbiAgY29uc3QgaXNBbXBTdWZmaXggPSBpc1ZlcmlmaWVkQW1wQ3JlYXRpdmUgPyAnRnJpZW5kbHknIDogJ0Nyb3NzRG9tYWluJztcbiAgY29uZmlnWyd0cmlnZ2VycyddWydjb250aW51b3VzVmlzaWJsZUluaUxvYWQnXSA9IHtcbiAgICAnb24nOiAnaW5pLWxvYWQnLFxuICAgICdzZWxlY3Rvcic6ICdhbXAtYWQnLFxuICAgICdzZWxlY3Rpb25NZXRob2QnOiAnY2xvc2VzdCcsXG4gICAgJ3JlcXVlc3QnOiAnaW5pTG9hZENzaScsXG4gIH07XG4gIGNvbmZpZ1sndHJpZ2dlcnMnXVsnY29udGludW91c1Zpc2libGVSZW5kZXJTdGFydCddID0ge1xuICAgICdvbic6ICdyZW5kZXItc3RhcnQnLFxuICAgICdzZWxlY3Rvcic6ICdhbXAtYWQnLFxuICAgICdzZWxlY3Rpb25NZXRob2QnOiAnY2xvc2VzdCcsXG4gICAgJ3JlcXVlc3QnOiAncmVuZGVyU3RhcnRDc2knLFxuICB9O1xuICBjb25maWdbJ3JlcXVlc3RzJ11bJ2luaUxvYWRDc2knXSA9IGJhc2VDc2lVcmwgK1xuICAgICAgYCZtZXQuYTRhLiR7c2xvdElkfT1pbmlMb2FkQ3NpJHtpc0FtcFN1ZmZpeH0uJHtkZWx0YVRpbWV9YDtcbiAgY29uZmlnWydyZXF1ZXN0cyddWydyZW5kZXJTdGFydENzaSddID0gYmFzZUNzaVVybCArXG4gICAgICBgJm1ldC5hNGEuJHtzbG90SWR9PXJlbmRlclN0YXJ0Q3NpJHtpc0FtcFN1ZmZpeH0uJHtkZWx0YVRpbWV9YDtcblxuICAvLyBBZGQgQ1NJIHBpbmcgZm9yIHZpc2liaWxpdHkuXG4gIGNvbmZpZ1sncmVxdWVzdHMnXVsndmlzaWJpbGl0eUNzaSddID0gYmFzZUNzaVVybCArXG4gICAgICBgJm1ldC5hNGEuJHtzbG90SWR9PXZpc2liaWxpdHlDc2kuJHtkZWx0YVRpbWV9YDtcbiAgY29uZmlnWyd0cmlnZ2VycyddWydjb250aW51b3VzVmlzaWJsZSddWydyZXF1ZXN0J10ucHVzaCgndmlzaWJpbGl0eUNzaScpO1xuICByZXR1cm4gY29uZmlnO1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gYXJyYXkgb2YgdHdvLWxldHRlciBjb2RlcyByZXByZXNlbnRpbmcgdGhlIGFtcC1hZCBjb250YWluZXJzXG4gKiBlbmNsb3NpbmcgdGhlIGdpdmVuIGFkIGVsZW1lbnQuXG4gKlxuICogQHBhcmFtIHshRWxlbWVudH0gYWRFbGVtZW50XG4gKiBAcmV0dXJuIHshQXJyYXk8c3RyaW5nPn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEVuY2xvc2luZ0NvbnRhaW5lclR5cGVzKGFkRWxlbWVudCkge1xuICBjb25zdCBjb250YWluZXJUeXBlU2V0ID0ge307XG4gIGZvciAobGV0IGVsID0gYWRFbGVtZW50LnBhcmVudEVsZW1lbnQsIGNvdW50ZXIgPSAwO1xuICAgIGVsICYmIGNvdW50ZXIgPCAyMDsgZWwgPSBlbC5wYXJlbnRFbGVtZW50LCBjb3VudGVyKyspIHtcbiAgICBjb25zdCB0YWdOYW1lID0gZWwudGFnTmFtZS50b1VwcGVyQ2FzZSgpO1xuICAgIGlmIChWYWxpZEFkQ29udGFpbmVyVHlwZXNbdGFnTmFtZV0pIHtcbiAgICAgIGNvbnRhaW5lclR5cGVTZXRbVmFsaWRBZENvbnRhaW5lclR5cGVzW3RhZ05hbWVdXSA9IHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBPYmplY3Qua2V5cyhjb250YWluZXJUeXBlU2V0KTtcbn1cblxuLyoqXG4gKiBBcHBlbmRzIHBhcmFtZXRlciB0byBhZCByZXF1ZXN0IGluZGljYXRpbmcgZXJyb3Igc3RhdGUgc28gbG9uZyBhcyBlcnJvclxuICogcGFyYW1ldGVyIGlzIG5vdCBhbHJlYWR5IHByZXNlbnQgb3IgdXJsIGhhcyBiZWVuIHRydW5jYXRlZC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBhZFVybCB1c2VkIGZvciBuZXR3b3JrIHJlcXVlc3RcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXJhbWV0ZXJWYWx1ZSB0byBiZSBhcHBlbmRlZFxuICogQHJldHVybiB7c3RyaW5nfHVuZGVmaW5lZH0gcG90ZW50aWFsbHkgbW9kaWZpZWQgdXJsLCB1bmRlZmluZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1heWJlQXBwZW5kRXJyb3JQYXJhbWV0ZXIoYWRVcmwsIHBhcmFtZXRlclZhbHVlKSB7XG4gIGRldigpLmFzc2VydCghIWFkVXJsICYmICEhcGFyYW1ldGVyVmFsdWUpO1xuICAvLyBBZGQgcGFyYW1ldGVyIGluZGljYXRpbmcgZXJyb3Igc28gbG9uZyBhcyB0aGUgdXJsIGhhcyBub3QgYWxyZWFkeSBiZWVuXG4gIC8vIHRydW5jYXRlZCBhbmQgZXJyb3IgcGFyYW1ldGVyIGlzIG5vdCBhbHJlYWR5IHByZXNlbnQuICBOb3RlIHRoYXQgd2UgYXNzdW1lXG4gIC8vIHRoYXQgYWRkZWQsIGVycm9yIHBhcmFtZXRlciBsZW5ndGggd2lsbCBiZSBsZXNzIHRoYW4gdHJ1bmNhdGlvbiBwYXJhbWV0ZXJcbiAgLy8gc28gYWRkaW5nIHdpbGwgbm90IGNhdXNlIGxlbmd0aCB0byBleGNlZWQgbWF4aW11bS5cbiAgaWYgKG5ldyBSZWdFeHAoYFs/fCZdKCR7ZW5jb2RlVVJJQ29tcG9uZW50KFRSVU5DQVRJT05fUEFSQU0ubmFtZSl9PWAgK1xuICAgICAgYCR7ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhUUlVOQ0FUSU9OX1BBUkFNLnZhbHVlKSl9fGFldD1bXiZdKikkYClcbiAgICAgIC50ZXN0KGFkVXJsKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBtb2RpZmllZEFkVXJsID0gYWRVcmwgKyBgJmFldD0ke3BhcmFtZXRlclZhbHVlfWA7XG4gIGRldigpLmFzc2VydChtb2RpZmllZEFkVXJsLmxlbmd0aCA8PSBNQVhfVVJMX0xFTkdUSCk7XG4gIHJldHVybiBtb2RpZmllZEFkVXJsO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBudW1lcmljYWwgY29kZSByZXByZXNlbnRpbmcgdGhlIGJpbmFyeSB0eXBlLlxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAqIEByZXR1cm4gez9zdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRCaW5hcnlUeXBlTnVtZXJpY2FsQ29kZSh0eXBlKSB7XG4gIHJldHVybiB7XG4gICAgJ3Byb2R1Y3Rpb24nOiAnMCcsXG4gICAgJ2NvbnRyb2wnOiAnMScsXG4gICAgJ2NhbmFyeSc6ICcyJyxcbiAgfVt0eXBlXSB8fCBudWxsO1xufVxuXG4vKiogQGNvbnN0IHshUmVnRXhwfSAqL1xuY29uc3QgSURFTlRJVFlfRE9NQUlOX1JFR0VYUF8gPSAvXFwuZ29vZ2xlXFwuKD86Y29tP1xcLik/W2Etel17MiwzfSQvO1xuXG4vKiogQHR5cGVkZWYge3tcbiAgICAgIHRva2VuOiAoc3RyaW5nfHVuZGVmaW5lZCksXG4gICAgICBqYXI6IChzdHJpbmd8dW5kZWZpbmVkKSxcbiAgICAgIHB1Y3JkOiAoc3RyaW5nfHVuZGVmaW5lZCksXG4gICAgICBmcmVzaExpZmV0aW1lU2VjczogKG51bWJlcnx1bmRlZmluZWQpLFxuICAgICAgdmFsaWRMaWZldGltZVNlY3M6IChudW1iZXJ8dW5kZWZpbmVkKSxcbiAgICAgIGZldGNoVGltZU1zOiAobnVtYmVyfHVuZGVmaW5lZClcbiAgIH19ICovXG5leHBvcnQgbGV0IElkZW50aXR5VG9rZW47XG5cbi8qKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7IUVsZW1lbnR8IS4uLy4uLy4uL3NyYy9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gKiBAcmV0dXJuIHshUHJvbWlzZTwhSWRlbnRpdHlUb2tlbj59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRJZGVudGl0eVRva2VuKHdpbiwgZWxlbWVudE9yQW1wRG9jKSB7XG4gIHdpblsnZ29vZ19pZGVudGl0eV9wcm9tJ10gPSB3aW5bJ2dvb2dfaWRlbnRpdHlfcHJvbSddIHx8XG4gICAgICBleGVjdXRlSWRlbnRpdHlUb2tlbkZldGNoKHdpbiwgZWxlbWVudE9yQW1wRG9jKTtcbiAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2U8IUlkZW50aXR5VG9rZW4+fSAqLyh3aW5bJ2dvb2dfaWRlbnRpdHlfcHJvbSddKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHshRWxlbWVudHwhLi4vLi4vLi4vc3JjL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAqIEBwYXJhbSB7bnVtYmVyPX0gcmVkaXJlY3RzUmVtYWluaW5nIChkZWZhdWx0IDEpXG4gKiBAcGFyYW0ge3N0cmluZz19IGRvbWFpblxuICogQHBhcmFtIHtudW1iZXI9fSBzdGFydFRpbWVcbiAqIEByZXR1cm4geyFQcm9taXNlPCFJZGVudGl0eVRva2VuPn1cbiAqL1xuZnVuY3Rpb24gZXhlY3V0ZUlkZW50aXR5VG9rZW5GZXRjaCh3aW4sIGVsZW1lbnRPckFtcERvYywgcmVkaXJlY3RzUmVtYWluaW5nID0gMSxcbiAgZG9tYWluID0gdW5kZWZpbmVkLCBzdGFydFRpbWUgPSBEYXRlLm5vdygpKSB7XG4gIGNvbnN0IHVybCA9IGdldElkZW50aXR5VG9rZW5SZXF1ZXN0VXJsKHdpbiwgZWxlbWVudE9yQW1wRG9jLCBkb21haW4pO1xuICByZXR1cm4gU2VydmljZXMueGhyRm9yKHdpbikuZmV0Y2hKc29uKHVybCwge1xuICAgIG1vZGU6ICdjb3JzJyxcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIGFtcENvcnM6IGZhbHNlLFxuICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsXG4gIH0pLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXG4gICAgICAudGhlbihvYmogPT4ge1xuICAgICAgICBjb25zdCB0b2tlbiA9IG9ialsnbmV3VG9rZW4nXTtcbiAgICAgICAgY29uc3QgamFyID0gb2JqWycxcF9qYXInXSB8fCAnJztcbiAgICAgICAgY29uc3QgcHVjcmQgPSBvYmpbJ3B1Y3JkJ10gfHwgJyc7XG4gICAgICAgIGNvbnN0IGZyZXNoTGlmZXRpbWVTZWNzID0gcGFyc2VJbnQob2JqWydmcmVzaExpZmV0aW1lU2VjcyddIHx8ICcnLCAxMCk7XG4gICAgICAgIGNvbnN0IHZhbGlkTGlmZXRpbWVTZWNzID0gcGFyc2VJbnQob2JqWyd2YWxpZExpZmV0aW1lU2VjcyddIHx8ICcnLCAxMCk7XG4gICAgICAgIGNvbnN0IGFsdERvbWFpbiA9IG9ialsnYWx0RG9tYWluJ107XG4gICAgICAgIGNvbnN0IGZldGNoVGltZU1zID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcbiAgICAgICAgaWYgKElERU5USVRZX0RPTUFJTl9SRUdFWFBfLnRlc3QoYWx0RG9tYWluKSkge1xuICAgICAgICAgIGlmICghcmVkaXJlY3RzUmVtYWluaW5nLS0pIHtcbiAgICAgICAgICAgIC8vIE1heCByZWRpcmVjdHMsIGxvZz9cbiAgICAgICAgICAgIHJldHVybiB7ZmV0Y2hUaW1lTXN9O1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZXhlY3V0ZUlkZW50aXR5VG9rZW5GZXRjaChcbiAgICAgICAgICAgICAgd2luLCBlbGVtZW50T3JBbXBEb2MsIHJlZGlyZWN0c1JlbWFpbmluZywgYWx0RG9tYWluLCBzdGFydFRpbWUpO1xuICAgICAgICB9IGVsc2UgaWYgKGZyZXNoTGlmZXRpbWVTZWNzID4gMCAmJiB2YWxpZExpZmV0aW1lU2VjcyA+IDAgJiZcbiAgICAgICAgICAgIHR5cGVvZiB0b2tlbiA9PSAnc3RyaW5nJykge1xuICAgICAgICAgIHJldHVybiB7dG9rZW4sIGphciwgcHVjcmQsIGZyZXNoTGlmZXRpbWVTZWNzLCB2YWxpZExpZmV0aW1lU2VjcyxcbiAgICAgICAgICAgIGZldGNoVGltZU1zfTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZXR1cm5pbmcgZW1wdHlcbiAgICAgICAgcmV0dXJuIHtmZXRjaFRpbWVNc307XG4gICAgICB9KVxuICAgICAgLmNhdGNoKHVudXNlZEVyciA9PiB7XG4gICAgICAgIC8vIFRPRE8gbG9nP1xuICAgICAgICByZXR1cm4ge307XG4gICAgICB9KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHshRWxlbWVudHwhLi4vLi4vLi4vc3JjL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAqIEBwYXJhbSB7c3RyaW5nPX0gZG9tYWluXG4gKiBAcmV0dXJuIHtzdHJpbmd9IHVybFxuICogQHZpc2libGVGb3JUZXN0aW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRJZGVudGl0eVRva2VuUmVxdWVzdFVybCh3aW4sIGVsZW1lbnRPckFtcERvYyxcbiAgZG9tYWluID0gdW5kZWZpbmVkKSB7XG4gIGlmICghZG9tYWluICYmIHdpbiAhPSB3aW4udG9wICYmIHdpbi5sb2NhdGlvbi5hbmNlc3Rvck9yaWdpbnMpIHtcbiAgICBjb25zdCBtYXRjaGVzID0gSURFTlRJVFlfRE9NQUlOX1JFR0VYUF8uZXhlYyhcbiAgICAgICAgd2luLmxvY2F0aW9uLmFuY2VzdG9yT3JpZ2luc1t3aW4ubG9jYXRpb24uYW5jZXN0b3JPcmlnaW5zLmxlbmd0aCAtIDFdKTtcbiAgICBkb21haW4gPSAobWF0Y2hlcyAmJiBtYXRjaGVzWzBdKSB8fCB1bmRlZmluZWQ7XG4gIH1cbiAgZG9tYWluID0gZG9tYWluIHx8ICcuZ29vZ2xlLmNvbSc7XG4gIGNvbnN0IGNhbm9uaWNhbCA9XG4gICAgZXh0cmFjdEhvc3QoU2VydmljZXMuZG9jdW1lbnRJbmZvRm9yRG9jKGVsZW1lbnRPckFtcERvYykuY2Fub25pY2FsVXJsKTtcbiAgcmV0dXJuIGBodHRwczovL2Fkc2VydmljZSR7ZG9tYWlufS9hZHNpZC9pbnRlZ3JhdG9yLmpzb24/ZG9tYWluPSR7Y2Fub25pY2FsfWA7XG59XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHdlIGFyZSBydW5uaW5nIG9uIHRoZSBBTVAgQ0ROLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0NkblByb3h5KHdpbikge1xuICByZXR1cm4gQ0ROX1BST1hZX1JFR0VYUC50ZXN0KHdpbi5sb2NhdGlvbi5vcmlnaW4pO1xufVxuXG4vKipcbiAqIFBvcHVsYXRlcyB0aGUgZmllbGRzIG9mIHRoZSBnaXZlbiBOYW1lZnJhbWUgZXhwZXJpbWVudCBjb25maWcgb2JqZWN0LlxuICogQHBhcmFtIHshLi4vLi4vLi4vc3JjL3V0aWxzL3hoci11dGlscy5GZXRjaFJlc3BvbnNlSGVhZGVyc30gaGVhZGVyc1xuICogQHBhcmFtIHshTmFtZWZyYW1lRXhwZXJpbWVudENvbmZpZ30gbmFtZWZyYW1lQ29uZmlnXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXROYW1lZnJhbWVFeHBlcmltZW50Q29uZmlncyhoZWFkZXJzLCBuYW1lZnJhbWVDb25maWcpIHtcbiAgY29uc3QgbmFtZWZyYW1lRXhwZXJpbWVudEhlYWRlciA9IGhlYWRlcnMuZ2V0KCdhbXAtbmFtZWZyYW1lLWV4cCcpO1xuICBpZiAobmFtZWZyYW1lRXhwZXJpbWVudEhlYWRlcikge1xuICAgIG5hbWVmcmFtZUV4cGVyaW1lbnRIZWFkZXIuc3BsaXQoJzsnKS5mb3JFYWNoKGNvbmZpZyA9PiB7XG4gICAgICBpZiAoY29uZmlnID09ICdpbnN0YW50TG9hZCcgfHwgY29uZmlnID09ICd3cml0ZUluQm9keScpIHtcbiAgICAgICAgbmFtZWZyYW1lQ29uZmlnW2NvbmZpZ10gPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogRW51bSBmb3IgYnJvd3NlciBjYXBhYmlsaXRpZXMuIE5PVEU6IFNpbmNlIEpTIGlzIDMyLWJpdCwgZG8gbm90IGFkZCBhbnltb3JlXG4gKiB0aGFuIDMyIGNhcGFiaWxpdGllcyB0byB0aGlzIGVudW0uXG4gKiBAZW51bSB7bnVtYmVyfVxuICovXG5jb25zdCBDYXBhYmlsaXR5ID0ge1xuICBTVkdfU1VQUE9SVEVEOiAxIDw8IDAsXG4gIFNBTkRCT1hJTkdfQUxMT1dfVE9QX05BVklHQVRJT05fQllfVVNFUl9BQ1RJVkFUSU9OX1NVUFBPUlRFRDogMSA8PCAxLFxuICBTQU5EQk9YSU5HX0FMTE9XX1BPUFVQU19UT19FU0NBUEVfU0FOREJPWF9TVVBQT1JURUQ6IDEgPDwgMixcbn07XG5cbi8qKlxuICogUmV0dXJucyBhIGJpdG1hcCByZXByZXNlbnRpbmcgd2hhdCBmZWF0dXJlcyBhcmUgc3VwcG9ydGVkIGJ5IHRoaXMgYnJvd3Nlci5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cbmZ1bmN0aW9uIGdldEJyb3dzZXJDYXBhYmlsaXRpZXNCaXRtYXAod2luKSB7XG4gIGxldCBicm93c2VyQ2FwYWJpbGl0aWVzID0gMDtcbiAgY29uc3QgZG9jID0gd2luLmRvY3VtZW50O1xuICBpZiAod2luLlNWR0VsZW1lbnQgJiYgZG9jLmNyZWF0ZUVsZW1lbnROUykge1xuICAgIGJyb3dzZXJDYXBhYmlsaXRpZXMgfD0gQ2FwYWJpbGl0eS5TVkdfU1VQUE9SVEVEO1xuICB9XG4gIGNvbnN0IGlmcmFtZUVsID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICBpZiAoaWZyYW1lRWwuc2FuZGJveCAmJiBpZnJhbWVFbC5zYW5kYm94LnN1cHBvcnRzKSB7XG4gICAgaWYgKGlmcmFtZUVsLnNhbmRib3guc3VwcG9ydHMoJ2FsbG93LXRvcC1uYXZpZ2F0aW9uLWJ5LXVzZXItYWN0aXZhdGlvbicpKSB7XG4gICAgICBicm93c2VyQ2FwYWJpbGl0aWVzIHw9XG4gICAgICAgIENhcGFiaWxpdHkuU0FOREJPWElOR19BTExPV19UT1BfTkFWSUdBVElPTl9CWV9VU0VSX0FDVElWQVRJT05fU1VQUE9SVEVEO1xuICAgIH1cbiAgICBpZiAoaWZyYW1lRWwuc2FuZGJveC5zdXBwb3J0cygnYWxsb3ctcG9wdXBzLXRvLWVzY2FwZS1zYW5kYm94JykpIHtcbiAgICAgIGJyb3dzZXJDYXBhYmlsaXRpZXMgfD1cbiAgICAgICAgQ2FwYWJpbGl0eS5TQU5EQk9YSU5HX0FMTE9XX1BPUFVQU19UT19FU0NBUEVfU0FOREJPWF9TVVBQT1JURUQ7XG4gICAgfVxuICB9XG4gIHJldHVybiBicm93c2VyQ2FwYWJpbGl0aWVzO1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gZW51bSB2YWx1ZSByZXByZXNlbnRpbmcgdGhlIEFNUCBiaW5hcnkgdHlwZSwgb3IgbnVsbCBpZiB0aGlzIGlzIGFcbiAqIGNhbm9uaWNhbCBwYWdlLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4gez9zdHJpbmd9IFRoZSBiaW5hcnkgdHlwZSBlbnVtLlxuICogQHZpc2libGVGb3JUZXN0aW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBbXBSdW50aW1lVHlwZVBhcmFtZXRlcih3aW4pIHtcbiAgY29uc3QgYXJ0ID0gZ2V0QmluYXJ5VHlwZU51bWVyaWNhbENvZGUoZ2V0QmluYXJ5VHlwZSh3aW4pKTtcbiAgcmV0dXJuIGlzQ2RuUHJveHkod2luKSAmJiBhcnQgIT0gJzAnID8gYXJ0IDogbnVsbDtcbn1cbiIsImV4cG9ydCBjb25zdCBDU1MgPSBcImFtcC1hZCBpZnJhbWUsYW1wLWVtYmVkIGlmcmFtZXtib3JkZXI6MCFpbXBvcnRhbnQ7bWFyZ2luOjAhaW1wb3J0YW50O3BhZGRpbmc6MCFpbXBvcnRhbnR9LmktYW1waHRtbC1hZC1kZWZhdWx0LWhvbGRlcntwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjA7cmlnaHQ6MDt0b3A6MDtib3R0b206MDtkaXNwbGF5Oi13ZWJraXQtYm94O2Rpc3BsYXk6LW1zLWZsZXhib3g7ZGlzcGxheTpmbGV4Oy13ZWJraXQtYm94LWFsaWduOmNlbnRlcjstbXMtZmxleC1hbGlnbjpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyOy13ZWJraXQtYm94LXBhY2s6Y2VudGVyOy1tcy1mbGV4LXBhY2s6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7YmFja2dyb3VuZC1jb2xvcjpoc2xhKDAsMCUsNzguNCUsMC4wNSl9LmktYW1waHRtbC1hZC1kZWZhdWx0LWhvbGRlcjphZnRlcntjb250ZW50OlxcXCJBZFxcXCI7Y29udGVudDphdHRyKGRhdGEtYWQtaG9sZGVyLXRleHQpO2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQ7Ym9yZGVyLXJhZGl1czoycHg7Y29sb3I6IzY5Njk2OTtmb250LXNpemU6MTBweDtsaW5lLWhlaWdodDoxO2ZvbnQtZmFtaWx5OkFyaWFsLHNhbnMtc2VyaWY7cGFkZGluZzozcHggNHB4IDFweDtib3JkZXI6MXB4IHNvbGlkICM2OTY5Njl9YW1wLWFkW2RhdGEtYTRhLXVwZ3JhZGUtdHlwZT1hbXAtYWQtbmV0d29yay1kb3VibGVjbGljay1pbXBsXT5pZnJhbWUsYW1wLWFkW3R5cGU9YWRzZW5zZV0+aWZyYW1le3RvcDo1MCUhaW1wb3J0YW50O2xlZnQ6NTAlIWltcG9ydGFudDstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUoLTUwJSwtNTAlKTt0cmFuc2Zvcm06dHJhbnNsYXRlKC01MCUsLTUwJSl9YW1wLWFkW3R5cGU9YWRzZW5zZV0sYW1wLWFkW3R5cGU9ZG91YmxlY2xpY2tde2RpcmVjdGlvbjpsdHJ9YW1wLWFkW2RhdGEtYTRhLXVwZ3JhZGUtdHlwZT1hbXAtYWQtbmV0d29yay1hZHNlbnNlLWltcGxdPmlmcmFtZSxhbXAtYWRbZGF0YS1hNGEtdXBncmFkZS10eXBlPWFtcC1hZC1uZXR3b3JrLWRvdWJsZWNsaWNrLWltcGxdPmlmcmFtZXttaW4taGVpZ2h0OjA7bWluLXdpZHRoOjB9YW1wLWFkW2RhdGEtYTRhLXVwZ3JhZGUtdHlwZT1hbXAtYWQtbmV0d29yay1kb3VibGVjbGljay1pbXBsXVtoZWlnaHQ9Zmx1aWRdPmlmcmFtZXtoZWlnaHQ6MTAwJSFpbXBvcnRhbnQ7d2lkdGg6MTAwJSFpbXBvcnRhbnQ7cG9zaXRpb246cmVsYXRpdmV9YW1wLWFkW2RhdGEtYTRhLXVwZ3JhZGUtdHlwZT1hbXAtYWQtbmV0d29yay1kb3VibGVjbGljay1pbXBsXVtoZWlnaHQ9Zmx1aWRde3dpZHRoOjEwMCUhaW1wb3J0YW50fVxcbi8qIyBzb3VyY2VVUkw9L2V4dGVuc2lvbnMvYW1wLWFkLzAuMS9hbXAtYWQuY3NzKi9cIjtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vLyBCZWNhdXNlIEFkU2Vuc2UgYW5kIERvdWJsZUNsaWNrIGFyZSBib3RoIG9wZXJhdGVkIGJ5IEdvb2dsZSBhbmQgdGhlaXIgQTRBXG4vLyBpbXBsZW1lbnRhdGlvbnMgc2hhcmUgc29tZSBiZWhhdmlvciBpbiBjb21tb24sIHBhcnQgb2YgdGhlIGxvZ2ljIGZvciB0aGlzXG4vLyBpbXBsZW1lbnRhdGlvbiBpcyBsb2NhdGVkIGluIHRoZSBhZHMvZ29vZ2xlL2E0YSBkaXJlY3RvcnkgcmF0aGVyIHRoYW4gaGVyZS5cbi8vIE1vc3Qgb3RoZXIgYWQgbmV0d29ya3Mgd2lsbCB3YW50IHRvIHB1dCB0aGVpciBBNEEgY29kZSBlbnRpcmVseSBpbiB0aGVcbi8vIGV4dGVuc2lvbnMvYW1wLWFkLW5ldHdvcmstJHtORVRXT1JLX05BTUV9LWltcGwgZGlyZWN0b3J5LlxuXG5pbXBvcnQge1xuICBNQU5VQUxfRVhQRVJJTUVOVF9JRCxcbiAgYWRkRXhwZXJpbWVudElkVG9FbGVtZW50LFxuICBleHRyYWN0VXJsRXhwZXJpbWVudElkLFxufSBmcm9tICcuLi8uLi8uLi9hZHMvZ29vZ2xlL2E0YS90cmFmZmljLWV4cGVyaW1lbnRzJztcbmltcG9ydCB7ZGV2fSBmcm9tICcuLi8uLi8uLi9zcmMvbG9nJztcbmltcG9ydCB7XG4gIGZvcmNlRXhwZXJpbWVudEJyYW5jaCxcbiAgZ2V0RXhwZXJpbWVudEJyYW5jaCxcbn0gZnJvbSAnLi4vLi4vLi4vc3JjL2V4cGVyaW1lbnRzJztcbmltcG9ydCB7XG4gIGlzQ2RuUHJveHksXG4gIGlzR29vZ2xlQWRzQTRBVmFsaWRFbnZpcm9ubWVudCxcbn0gZnJvbSAnLi4vLi4vLi4vYWRzL2dvb2dsZS9hNGEvdXRpbHMnO1xuaW1wb3J0IHtzZWxlY3RBbmRTZXRFeHBlcmltZW50c30gZnJvbSAnLi4vLi4vLi4vYWRzL2dvb2dsZS9hNGEvZXhwZXJpbWVudC11dGlscyc7XG5cbi8qKiBAY29uc3Qge3N0cmluZ30gQHZpc2libGVGb3JUZXN0aW5nICovXG5leHBvcnQgY29uc3QgQURTRU5TRV9BNEFfRVhQRVJJTUVOVF9OQU1FID0gJ2V4cEFkc2Vuc2VBNEEnO1xuXG4vKiogQHR5cGUge3N0cmluZ30gKi9cbmNvbnN0IFRBRyA9ICdhbXAtYWQtbmV0d29yay1hZHNlbnNlLWltcGwnO1xuXG4vKiogQGNvbnN0IEB0eXBlIHshT2JqZWN0PHN0cmluZyw/c3RyaW5nPn0gKi9cbmV4cG9ydCBjb25zdCBVUkxfRVhQRVJJTUVOVF9NQVBQSU5HID0ge1xuICAnLTEnOiBNQU5VQUxfRVhQRVJJTUVOVF9JRCxcbiAgJzAnOiBudWxsLFxufTtcblxuLyoqIEBjb25zdCBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz59ICovXG5leHBvcnQgY29uc3QgQURTRU5TRV9FWFBFUklNRU5UUyA9IHtcbiAgVU5DT05ESVRJT05FRF9DQU5PTklDQUxfRVhQOiAnMjEwNjIxNTQnLFxuICBVTkNPTkRJVElPTkVEX0NBTk9OSUNBTF9DVEw6ICcyMTA2MjE1NScsXG4gIENBTk9OSUNBTF9FWFA6ICcyMTA2MjE1OCcsXG4gIENBTk9OSUNBTF9DVEw6ICcyMTA2MjE1OScsXG59O1xuXG4vKiogQGNvbnN0IEB0eXBlIHshT2JqZWN0PHN0cmluZywgc3RyaW5nPn0gKi9cbmV4cG9ydCBjb25zdCBBRFNFTlNFX0VYUF9OQU1FUyA9IHtcbiAgVU5DT05ESVRJT05FRF9DQU5PTklDQUw6ICdleHBBZHNlbnNlVW5jb25kaXRpb25lZENhbm9uaWNhbCcsXG4gIENBTk9OSUNBTDogJ2V4cEFkc2Vuc2VDYW5vbmljYWwnLFxufTtcblxuLyoqXG4gKiBBdHRlbXB0cyB0byBzZWxlY3QgaW50byBBZHNlbnNlIGV4cGVyaW1lbnRzLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqL1xuZnVuY3Rpb24gc2VsZWN0RXhwZXJpbWVudHMod2luLCBlbGVtZW50KSB7XG4gIHNlbGVjdEFuZFNldEV4cGVyaW1lbnRzKHdpbiwgZWxlbWVudCxcbiAgICAgIFtBRFNFTlNFX0VYUEVSSU1FTlRTLlVOQ09ORElUSU9ORURfQ0FOT05JQ0FMX0VYUCxcbiAgICAgICAgQURTRU5TRV9FWFBFUklNRU5UUy5VTkNPTkRJVElPTkVEX0NBTk9OSUNBTF9DVExdLFxuICAgICAgQURTRU5TRV9FWFBfTkFNRVMuVU5DT05ESVRJT05FRF9DQU5PTklDQUwsXG4gICAgICB0cnVlKTtcblxuXG4gIC8vIFNlZSBpZiBpbiBob2xkYmFjayBjb250cm9sL2V4cGVyaW1lbnQuXG4gIGNvbnN0IHVybEV4cGVyaW1lbnRJZCA9IGV4dHJhY3RVcmxFeHBlcmltZW50SWQod2luLCBlbGVtZW50KTtcbiAgY29uc3QgZXhwZXJpbWVudElkID0gVVJMX0VYUEVSSU1FTlRfTUFQUElOR1t1cmxFeHBlcmltZW50SWQgfHwgJyddO1xuICBpZiAoZXhwZXJpbWVudElkKSB7XG4gICAgYWRkRXhwZXJpbWVudElkVG9FbGVtZW50KGV4cGVyaW1lbnRJZCwgZWxlbWVudCk7XG4gICAgZm9yY2VFeHBlcmltZW50QnJhbmNoKHdpbiwgQURTRU5TRV9BNEFfRVhQRVJJTUVOVF9OQU1FLCBleHBlcmltZW50SWQpO1xuICAgIGRldigpLmluZm8oXG4gICAgICAgIFRBRywgYHVybCBleHBlcmltZW50IHNlbGVjdGlvbiAke3VybEV4cGVyaW1lbnRJZH06ICR7ZXhwZXJpbWVudElkfS5gKTtcbiAgfVxuXG4gIC8vIElmIG5vdCBpbiB0aGUgdW5jb25kaXRpb25lZCBjYW5vbmljYWwgZXhwZXJpbWVudCwgYXR0ZW1wdCB0b1xuICAvLyBzZWxlY3QgaW50byB0aGUgdW5kaWx1dGVkIGNhbm9uaWNhbCBleHBlcmltZW50LlxuICBjb25zdCBpblVuY29uZGl0aW9uZWRDYW5vbmljYWxFeHAgPSAhIWdldEV4cGVyaW1lbnRCcmFuY2goXG4gICAgICB3aW4sIEFEU0VOU0VfRVhQX05BTUVTLlVOQ09ORElUSU9ORURfQ0FOT05JQ0FMKTtcbiAgaWYgKCFpblVuY29uZGl0aW9uZWRDYW5vbmljYWxFeHAgJiYgIWlzQ2RuUHJveHkod2luKSkge1xuICAgIHNlbGVjdEFuZFNldEV4cGVyaW1lbnRzKHdpbiwgZWxlbWVudCxcbiAgICAgICAgW0FEU0VOU0VfRVhQRVJJTUVOVFMuQ0FOT05JQ0FMX0VYUCxcbiAgICAgICAgICBBRFNFTlNFX0VYUEVSSU1FTlRTLkNBTk9OSUNBTF9DVExdLFxuICAgICAgICBBRFNFTlNFX0VYUF9OQU1FUy5DQU5PTklDQUwsIHRydWUpO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gdXNlUmVtb3RlSHRtbFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkc2Vuc2VJc0E0QUVuYWJsZWQod2luLCBlbGVtZW50LCB1c2VSZW1vdGVIdG1sKSB7XG4gIGlmICh1c2VSZW1vdGVIdG1sIHx8ICFlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1hZC1jbGllbnQnKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBzZWxlY3RFeHBlcmltZW50cyh3aW4sIGVsZW1lbnQpO1xuICByZXR1cm4gaXNHb29nbGVBZHNBNEFWYWxpZEVudmlyb25tZW50KHdpbikgfHxcbiAgICAgIGdldEV4cGVyaW1lbnRCcmFuY2goXG4gICAgICAgICAgd2luLCBBRFNFTlNFX0VYUF9OQU1FUy5VTkNPTkRJVElPTkVEX0NBTk9OSUNBTCkgPT1cbiAgICAgIEFEU0VOU0VfRVhQRVJJTUVOVFMuVU5DT05ESVRJT05FRF9DQU5PTklDQUxfRVhQIHx8XG4gICAgICBnZXRFeHBlcmltZW50QnJhbmNoKHdpbiwgQURTRU5TRV9FWFBfTkFNRVMuQ0FOT05JQ0FMKSA9PVxuICAgICAgQURTRU5TRV9FWFBFUklNRU5UUy5DQU5PTklDQUxfRVhQO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGljaCB0YWdzIGRlc2lyZSBBNEEgaGFuZGxpbmdcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge2Jvb2xlYW59IHVzZVJlbW90ZUh0bWxcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG91ZGZsYXJlSXNBNEFFbmFibGVkKHdpbiwgZWxlbWVudCwgdXNlUmVtb3RlSHRtbCkge1xuICAvLyBXZSBhc3N1bWUgZmFzdCBmZXRjaCBmb3IgYWxsIGNvbnRlbnQsIGJ1dCB0aGlzIHdpbGwgZ3JhY2VmdWxseSBkZWdyYWRlLFxuICAvLyB3aGVuIG5vbi1hNGEgY29udGVudCBpcyBkZWxpdmVyZWRcbiAgcmV0dXJuICF1c2VSZW1vdGVIdG1sO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7c3RhcnRzV2l0aH0gZnJvbSAnLi4vLi4vLi4vc3JjL3N0cmluZyc7XG5cbi8qKiBAY29uc3QgQHByaXZhdGUge3N0cmluZ30gKi9cbmNvbnN0IEdNT1NTUF9TUkNfUFJFRklYXyA9ICdodHRwczovL3NwLmdtb3NzcC1zcC5qcC8nO1xuXG4vKiogQGNvbnN0IEBwcml2YXRlIHtzdHJpbmd9ICovXG5jb25zdCBHTU9TU1BfU1JDX0E0QV9QUkVGSVhfID0gJ2h0dHBzOi8vYW1wLnNwLmdtb3NzcC1zcC5qcC9fYTRhLyc7XG5cbi8qKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gdXNlUmVtb3RlSHRtbFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdtb3NzcElzQTRBRW5hYmxlZCh3aW4sIGVsZW1lbnQsIHVzZVJlbW90ZUh0bWwpIHtcbiAgbGV0IHNyYztcbiAgcmV0dXJuICF1c2VSZW1vdGVIdG1sICYmICEhKHNyYyA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdzcmMnKSkgJiZcbiAgICAgICEhZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdXNlLWE0YScpICYmXG4gICAgICAoc3RhcnRzV2l0aChzcmMsIEdNT1NTUF9TUkNfUFJFRklYXykgfHxcbiAgICAgICBzdGFydHNXaXRoKHNyYywgR01PU1NQX1NSQ19BNEFfUFJFRklYXykpO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKiBAY29uc3QgQHByaXZhdGUge3N0cmluZ30gKi9cbmNvbnN0IFNSQ19QUkVGSVhfID0gJ2h0dHBzOi8vaWIuM2xpZnQuY29tLyc7XG4vKipcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge2Jvb2xlYW59IHVzZVJlbW90ZUh0bWxcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmlwbGVsaWZ0SXNBNEFFbmFibGVkKHdpbiwgZWxlbWVudCwgdXNlUmVtb3RlSHRtbCkge1xuICBsZXQgc3JjO1xuICByZXR1cm4gIXVzZVJlbW90ZUh0bWwgJiYgISFlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS11c2UtYTRhJykgJiYgISEoc3JjID1cbiAgICBlbGVtZW50LmdldEF0dHJpYnV0ZSgnc3JjJykpICYmIHNyYy5pbmRleE9mKFNSQ19QUkVGSVhfKSA9PSAwO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7QW1wQWRVSUhhbmRsZXJ9IGZyb20gJy4vYW1wLWFkLXVpJztcbmltcG9ydCB7QW1wQWRYT3JpZ2luSWZyYW1lSGFuZGxlcn0gZnJvbSAnLi9hbXAtYWQteG9yaWdpbi1pZnJhbWUtaGFuZGxlcic7XG5pbXBvcnQge1xuICBDT05TRU5UX1BPTElDWV9TVEFURSwgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xufSBmcm9tICcuLi8uLi8uLi9zcmMvY29uc2VudC1zdGF0ZSc7XG5pbXBvcnQge1xuICBMYXlvdXQsIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgTGF5b3V0UHJpb3JpdHksXG59IGZyb20gJy4uLy4uLy4uL3NyYy9sYXlvdXQnO1xuaW1wb3J0IHthZENvbmZpZ30gZnJvbSAnLi4vLi4vLi4vYWRzL19jb25maWcnO1xuaW1wb3J0IHtjbGFtcH0gZnJvbSAnLi4vLi4vLi4vc3JjL3V0aWxzL21hdGgnO1xuaW1wb3J0IHtcbiAgY29tcHV0ZWRTdHlsZSxcbiAgc2V0U3R5bGUsXG59IGZyb20gJy4uLy4uLy4uL3NyYy9zdHlsZSc7XG5pbXBvcnQge2RldiwgdXNlcn0gZnJvbSAnLi4vLi4vLi4vc3JjL2xvZyc7XG5pbXBvcnQge2dldEFkQ2lkfSBmcm9tICcuLi8uLi8uLi9zcmMvYWQtY2lkJztcbmltcG9ydCB7Z2V0QWRDb250YWluZXIsIGlzQWRQb3NpdGlvbkFsbG93ZWR9XG4gIGZyb20gJy4uLy4uLy4uL3NyYy9hZC1oZWxwZXInO1xuaW1wb3J0IHtcbiAgZ2V0QW1wQWRSZW5kZXJPdXRzaWRlVmlld3BvcnQsXG4gIGluY3JlbWVudExvYWRpbmdBZHMsXG4gIGlzM3BUaHJvdHRsZWQsXG59IGZyb20gJy4vY29uY3VycmVudC1sb2FkJztcbmltcG9ydCB7XG4gIGdldENvbnNlbnRQb2xpY3lTaGFyZWREYXRhLFxuICBnZXRDb25zZW50UG9saWN5U3RhdGUsXG59IGZyb20gJy4uLy4uLy4uL3NyYy9jb25zZW50JztcbmltcG9ydCB7Z2V0SWZyYW1lfSBmcm9tICcuLi8uLi8uLi9zcmMvM3AtZnJhbWUnO1xuaW1wb3J0IHtpc0xheW91dFNpemVEZWZpbmVkfSBmcm9tICcuLi8uLi8uLi9zcmMvbGF5b3V0JztcbmltcG9ydCB7bW92ZUxheW91dFJlY3R9IGZyb20gJy4uLy4uLy4uL3NyYy9sYXlvdXQtcmVjdCc7XG5pbXBvcnQge3ByZWxvYWRCb290c3RyYXB9IGZyb20gJy4uLy4uLy4uL3NyYy8zcC1mcmFtZSc7XG5pbXBvcnQge3RvV2lufSBmcm9tICcuLi8uLi8uLi9zcmMvdHlwZXMnO1xuXG4vKiogQGNvbnN0IHtzdHJpbmd9IFRhZyBuYW1lIGZvciAzUCBBRCBpbXBsZW1lbnRhdGlvbi4gKi9cbmV4cG9ydCBjb25zdCBUQUdfM1BfSU1QTCA9ICdhbXAtYWQtM3AtaW1wbCc7XG5cbi8qKiBAY29uc3Qge251bWJlcn0gKi9cbmNvbnN0IE1JTl9GVUxMX1dJRFRIX0hFSUdIVCA9IDEwMDtcblxuLyoqIEBjb25zdCB7bnVtYmVyfSAqL1xuY29uc3QgTUFYX0ZVTExfV0lEVEhfSEVJR0hUID0gNTAwO1xuXG5leHBvcnQgY2xhc3MgQW1wQWQzUEltcGwgZXh0ZW5kcyBBTVAuQmFzZUVsZW1lbnQge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFBbXBFbGVtZW50fSBlbGVtZW50XG4gICAqL1xuICBjb25zdHJ1Y3RvcihlbGVtZW50KSB7XG4gICAgc3VwZXIoZWxlbWVudCk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZSB7P0VsZW1lbnR9XG4gICAgICogQHZpc2libGVGb3JUZXN0aW5nXG4gICAgICovXG4gICAgdGhpcy5pZnJhbWVfID0gbnVsbDtcblxuICAgIC8qKiB7P09iamVjdH0gKi9cbiAgICB0aGlzLmNvbmZpZyA9IG51bGw7XG5cbiAgICAvKiogez9BbXBBZFVJSGFuZGxlcn0gKi9cbiAgICB0aGlzLnVpSGFuZGxlciA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9BbXBBZFhPcmlnaW5JZnJhbWVIYW5kbGVyfSAqL1xuICAgIHRoaXMueE9yaWdpbklmcmFtZUhhbmRsZXJfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlIHs/RWxlbWVudH1cbiAgICAgKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAgICAgKi9cbiAgICB0aGlzLnBsYWNlaG9sZGVyXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZSB7P0VsZW1lbnR9XG4gICAgICogQHZpc2libGVGb3JUZXN0aW5nXG4gICAgICovXG4gICAgdGhpcy5mYWxsYmFja18gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHtib29sZWFufSAqL1xuICAgIHRoaXMuaXNJbkZpeGVkQ29udGFpbmVyXyA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogVGhlIChyZWxhdGl2ZSkgbGF5b3V0IGJveCBvZiB0aGUgYWQgaWZyYW1lIHRvIHRoZSBhbXAtYWQgdGFnLlxuICAgICAqIEBwcml2YXRlIHs/Li4vLi4vLi4vc3JjL2xheW91dC1yZWN0LkxheW91dFJlY3REZWZ9XG4gICAgICovXG4gICAgdGhpcy5pZnJhbWVMYXlvdXRCb3hfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIENhbGwgdG8gc3RvcCBsaXN0ZW5pbmcgdG8gdmlld3BvcnQgY2hhbmdlcy5cbiAgICAgKiBAcHJpdmF0ZSB7P2Z1bmN0aW9uKCl9XG4gICAgICogQHZpc2libGVGb3JUZXN0aW5nXG4gICAgICovXG4gICAgdGhpcy51bmxpc3RlblZpZXdwb3J0Q2hhbmdlc18gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGUge0ludGVyc2VjdGlvbk9ic2VydmVyfVxuICAgICAqIEB2aXNpYmxlRm9yVGVzdGluZ1xuICAgICAqL1xuICAgIHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXJfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P3N0cmluZ3x1bmRlZmluZWR9ICovXG4gICAgdGhpcy5jb250YWluZXJfID0gdW5kZWZpbmVkO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/UHJvbWlzZX0gKi9cbiAgICB0aGlzLmxheW91dFByb21pc2VfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7c3RyaW5nfHVuZGVmaW5lZH0gKi9cbiAgICB0aGlzLnR5cGVfID0gdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogRm9yIGZ1bGwtd2lkdGggcmVzcG9uc2l2ZSBhZHM6IHdoZXRoZXIgdGhlIGVsZW1lbnQgaGFzIGFscmVhZHkgYmVlblxuICAgICAqIGFsaWduZWQgdG8gdGhlIGVkZ2VzIG9mIHRoZSB2aWV3cG9ydC5cbiAgICAgKiBAcHJpdmF0ZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmlzRnVsbFdpZHRoQWxpZ25lZF8gPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgZnVsbC13aWR0aCByZXNwb25zaXZlIHdhcyByZXF1ZXN0ZWQgZm9yIHRoaXMgYWQuXG4gICAgICogQHByaXZhdGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5pc0Z1bGxXaWR0aFJlcXVlc3RlZF8gPSBmYWxzZTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0TGF5b3V0UHJpb3JpdHkoKSB7XG4gICAgLy8gTG9hZHMgYWRzIGFmdGVyIG90aGVyIGNvbnRlbnQsXG4gICAgY29uc3QgaXNQV0EgPSAhdGhpcy5lbGVtZW50LmdldEFtcERvYygpLmlzU2luZ2xlRG9jKCk7XG4gICAgLy8gZ2l2ZSB0aGUgYWQgaGlnaGVyIHByaW9yaXR5IGlmIGl0IGlzIGluc2lkZSBhIFBXQVxuICAgIHJldHVybiBpc1BXQSA/IExheW91dFByaW9yaXR5Lk1FVEFEQVRBIDogTGF5b3V0UHJpb3JpdHkuQURTO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICByZW5kZXJPdXRzaWRlVmlld3BvcnQoKSB7XG4gICAgaWYgKGlzM3BUaHJvdHRsZWQodGhpcy53aW4pKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIE90aGVyd2lzZSB0aGUgYWQgaXMgZ29vZCB0byBnby5cbiAgICBjb25zdCBlbGVtZW50Q2hlY2sgPSBnZXRBbXBBZFJlbmRlck91dHNpZGVWaWV3cG9ydCh0aGlzLmVsZW1lbnQpO1xuICAgIHJldHVybiBlbGVtZW50Q2hlY2sgIT09IG51bGwgP1xuICAgICAgZWxlbWVudENoZWNrIDogc3VwZXIucmVuZGVyT3V0c2lkZVZpZXdwb3J0KCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshTGF5b3V0fSBsYXlvdXRcbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBpc0xheW91dFN1cHBvcnRlZChsYXlvdXQpIHtcbiAgICByZXR1cm4gaXNMYXlvdXRTaXplRGVmaW5lZChsYXlvdXQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyEuLi8uLi8uLi9zcmMvc2VydmljZS9yZXNvdXJjZS5SZXNvdXJjZX1cbiAgICogQHZpc2libGVGb3JUZXN0aW5nXG4gICAqL1xuICBnZXRSZXNvdXJjZSgpIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50LmdldFJlc291cmNlcygpLmdldFJlc291cmNlRm9yRWxlbWVudCh0aGlzLmVsZW1lbnQpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXRDb25zZW50UG9saWN5KCkge1xuICAgIGNvbnN0IHR5cGUgPSB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0eXBlJyk7XG4gICAgY29uc3QgY29uZmlnID0gYWRDb25maWdbdHlwZV07XG4gICAgaWYgKGNvbmZpZyAmJiBjb25maWdbJ2NvbnNlbnRIYW5kbGluZ092ZXJyaWRlJ10pIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gc3VwZXIuZ2V0Q29uc2VudFBvbGljeSgpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBidWlsZENhbGxiYWNrKCkge1xuICAgIHRoaXMudHlwZV8gPSB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0eXBlJyk7XG4gICAgY29uc3QgdXBncmFkZURlbGF5TXMgPSBNYXRoLnJvdW5kKHRoaXMuZ2V0UmVzb3VyY2UoKS5nZXRVcGdyYWRlRGVsYXlNcygpKTtcbiAgICBkZXYoKS5pbmZvKFRBR18zUF9JTVBMLCBgdXBncmFkZURlbGF5ICR7dGhpcy50eXBlX306ICR7dXBncmFkZURlbGF5TXN9YCk7XG5cbiAgICB0aGlzLnBsYWNlaG9sZGVyXyA9IHRoaXMuZ2V0UGxhY2Vob2xkZXIoKTtcbiAgICB0aGlzLmZhbGxiYWNrXyA9IHRoaXMuZ2V0RmFsbGJhY2soKTtcblxuICAgIHRoaXMuY29uZmlnID0gYWRDb25maWdbdGhpcy50eXBlX107XG4gICAgdXNlcigpLmFzc2VydChcbiAgICAgICAgdGhpcy5jb25maWcsIGBUeXBlIFwiJHt0aGlzLnR5cGVffVwiIGlzIG5vdCBzdXBwb3J0ZWQgaW4gYW1wLWFkYCk7XG5cbiAgICB0aGlzLnVpSGFuZGxlciA9IG5ldyBBbXBBZFVJSGFuZGxlcih0aGlzKTtcblxuICAgIHRoaXMuaXNGdWxsV2lkdGhSZXF1ZXN0ZWRfID0gdGhpcy5zaG91bGRSZXF1ZXN0RnVsbFdpZHRoXygpO1xuXG4gICAgaWYgKHRoaXMuaXNGdWxsV2lkdGhSZXF1ZXN0ZWRfKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRlbXB0RnVsbFdpZHRoU2l6ZUNoYW5nZV8oKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHNob3VsZFJlcXVlc3RGdWxsV2lkdGhfKCkge1xuICAgIGNvbnN0IGhhc0Z1bGxXaWR0aCA9IHRoaXMuZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2RhdGEtZnVsbC13aWR0aCcpO1xuICAgIGlmICghaGFzRnVsbFdpZHRoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHVzZXIoKS5hc3NlcnQodGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZSgnd2lkdGgnKSA9PSAnMTAwdncnLFxuICAgICAgICAnQWQgdW5pdHMgd2l0aCBkYXRhLWZ1bGwtd2lkdGggbXVzdCBoYXZlIHdpZHRoPVwiMTAwdndcIi4nKTtcbiAgICB1c2VyKCkuYXNzZXJ0KCEhdGhpcy5jb25maWcuZnVsbFdpZHRoSGVpZ2h0UmF0aW8sXG4gICAgICAgICdBZCBuZXR3b3JrIGRvZXMgbm90IHN1cHBvcnQgZnVsbCB3aWR0aCBhZHMuJyk7XG4gICAgZGV2KCkuaW5mbyhUQUdfM1BfSU1QTCxcbiAgICAgICAgJyMke3RoaXMuZ2V0UmVzb3VyY2UoKS5nZXRJZCgpfSBGdWxsIHdpZHRoIHJlcXVlc3RlZCcpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFByZWZldGNoZXMgYW5kIHByZWNvbm5lY3RzIFVSTHMgcmVsYXRlZCB0byB0aGUgYWQuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9vbkxheW91dFxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHByZWNvbm5lY3RDYWxsYmFjayhvcHRfb25MYXlvdXQpIHtcbiAgICAvLyBXZSBhbHdheXMgbmVlZCB0aGUgYm9vdHN0cmFwLlxuICAgIHByZWxvYWRCb290c3RyYXAoXG4gICAgICAgIHRoaXMud2luLCB0aGlzLnByZWNvbm5lY3QsIHRoaXMudHlwZV8sIHRoaXMuY29uZmlnLnJlbW90ZUhUTUxEaXNhYmxlZCk7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmNvbmZpZy5wcmVmZXRjaCA9PSAnc3RyaW5nJykge1xuICAgICAgdGhpcy5wcmVjb25uZWN0LnByZWxvYWQodGhpcy5jb25maWcucHJlZmV0Y2gsICdzY3JpcHQnKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlnLnByZWZldGNoKSB7XG4gICAgICB0aGlzLmNvbmZpZy5wcmVmZXRjaC5mb3JFYWNoKHAgPT4ge1xuICAgICAgICB0aGlzLnByZWNvbm5lY3QucHJlbG9hZChwLCAnc2NyaXB0Jyk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB0aGlzLmNvbmZpZy5wcmVjb25uZWN0ID09ICdzdHJpbmcnKSB7XG4gICAgICB0aGlzLnByZWNvbm5lY3QudXJsKHRoaXMuY29uZmlnLnByZWNvbm5lY3QsIG9wdF9vbkxheW91dCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmNvbmZpZy5wcmVjb25uZWN0KSB7XG4gICAgICB0aGlzLmNvbmZpZy5wcmVjb25uZWN0LmZvckVhY2gocCA9PiB7XG4gICAgICAgIHRoaXMucHJlY29ubmVjdC51cmwocCwgb3B0X29uTGF5b3V0KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBJZiBmdWxseSBxdWFsaWZpZWQgc3JjIGZvciBhZCBzY3JpcHQgaXMgc3BlY2lmaWVkIHdlIHByZWNvbm5lY3QgdG8gaXQuXG4gICAgY29uc3Qgc3JjID0gdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZSgnc3JjJyk7XG4gICAgaWYgKHNyYykge1xuICAgICAgLy8gV2Ugb25seSBwcmVjb25uZWN0IHRvIHRoZSBzcmMgYmVjYXVzZSB3ZSBjYW5ub3Qga25vdyB3aGV0aGVyIHRoZSBVUkxcbiAgICAgIC8vIHdpbGwgaGF2ZSBjYWNoaW5nIGhlYWRlcnMgc2V0LlxuICAgICAgdGhpcy5wcmVjb25uZWN0LnVybChzcmMpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIG9uTGF5b3V0TWVhc3VyZSgpIHtcbiAgICB0aGlzLmlzSW5GaXhlZENvbnRhaW5lcl8gPSAhaXNBZFBvc2l0aW9uQWxsb3dlZCh0aGlzLmVsZW1lbnQsIHRoaXMud2luKTtcbiAgICAvKiogZGV0ZWN0IGFkIGNvbnRhaW5lcnMsIGFkZCB0aGUgbGlzdCB0byBlbGVtZW50IGFzIGEgbmV3IGF0dHJpYnV0ZSAqL1xuICAgIGlmICh0aGlzLmNvbnRhaW5lcl8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5jb250YWluZXJfID0gZ2V0QWRDb250YWluZXIodGhpcy5lbGVtZW50KTtcbiAgICB9XG4gICAgLy8gV2UgcmVtZWFzdXJlZCB0aGlzIHRhZywgbGV0J3MgYWxzbyByZW1lYXN1cmUgdGhlIGlmcmFtZS4gU2hvdWxkIGJlXG4gICAgLy8gZnJlZSBub3cgYW5kIGl0IG1pZ2h0IGhhdmUgY2hhbmdlZC5cbiAgICB0aGlzLm1lYXN1cmVJZnJhbWVMYXlvdXRCb3hfKCk7XG4gICAgaWYgKHRoaXMueE9yaWdpbklmcmFtZUhhbmRsZXJfKSB7XG4gICAgICB0aGlzLnhPcmlnaW5JZnJhbWVIYW5kbGVyXy5vbkxheW91dE1lYXN1cmUoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pc0Z1bGxXaWR0aFJlcXVlc3RlZF8gJiYgIXRoaXMuaXNGdWxsV2lkdGhBbGlnbmVkXykge1xuICAgICAgdGhpcy5pc0Z1bGxXaWR0aEFsaWduZWRfID0gdHJ1ZTtcbiAgICAgIGNvbnN0IGxheW91dEJveCA9IHRoaXMuZ2V0TGF5b3V0Qm94KCk7XG5cbiAgICAgIC8vIE51ZGdlIGludG8gdGhlIGNvcnJlY3QgaG9yaXpvbnRhbCBwb3NpdGlvbiBieSBjaGFuZ2luZyBzaWRlIG1hcmdpbi5cbiAgICAgIHRoaXMuZ2V0VnN5bmMoKS5ydW4oe1xuICAgICAgICBtZWFzdXJlOiBzdGF0ZSA9PiB7XG4gICAgICAgICAgc3RhdGUuZGlyZWN0aW9uID1cbiAgICAgICAgICAgICAgY29tcHV0ZWRTdHlsZSh0aGlzLndpbiwgdGhpcy5lbGVtZW50KVsnZGlyZWN0aW9uJ107XG4gICAgICAgIH0sXG4gICAgICAgIG11dGF0ZTogc3RhdGUgPT4ge1xuICAgICAgICAgIGlmIChzdGF0ZS5kaXJlY3Rpb24gPT0gJ3J0bCcpIHtcbiAgICAgICAgICAgIHNldFN0eWxlKHRoaXMuZWxlbWVudCwgJ21hcmdpblJpZ2h0JywgbGF5b3V0Qm94LmxlZnQsICdweCcpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRTdHlsZSh0aGlzLmVsZW1lbnQsICdtYXJnaW5MZWZ0JywgLWxheW91dEJveC5sZWZ0LCAncHgnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICB9LCB7ZGlyZWN0aW9uOiAnJ30pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBNZWFzdXJlIHRoZSBsYXlvdXQgYm94IG9mIHRoZSBpZnJhbWUgaWYgd2UgcmVuZGVyZWQgaXQgYWxyZWFkeS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIG1lYXN1cmVJZnJhbWVMYXlvdXRCb3hfKCkge1xuICAgIGlmICh0aGlzLnhPcmlnaW5JZnJhbWVIYW5kbGVyXyAmJiB0aGlzLnhPcmlnaW5JZnJhbWVIYW5kbGVyXy5pZnJhbWUpIHtcbiAgICAgIGNvbnN0IGlmcmFtZUJveCA9XG4gICAgICAgICAgdGhpcy5nZXRWaWV3cG9ydCgpLmdldExheW91dFJlY3QodGhpcy54T3JpZ2luSWZyYW1lSGFuZGxlcl8uaWZyYW1lKTtcbiAgICAgIGNvbnN0IGJveCA9IHRoaXMuZ2V0TGF5b3V0Qm94KCk7XG4gICAgICAvLyBDYWNoZSB0aGUgaWZyYW1lJ3MgcmVsYXRpdmUgcG9zaXRpb24gdG8gdGhlIGFtcC1hZC4gVGhpcyBpc1xuICAgICAgLy8gbmVjZXNzYXJ5IGZvciBmaXhlZC1wb3NpdGlvbiBjb250YWluZXJzIHdoaWNoIFwibW92ZVwiIHdpdGggdGhlXG4gICAgICAvLyB2aWV3cG9ydC5cbiAgICAgIHRoaXMuaWZyYW1lTGF5b3V0Qm94XyA9IG1vdmVMYXlvdXRSZWN0KGlmcmFtZUJveCwgLWJveC5sZWZ0LCAtYm94LnRvcCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgZ2V0SW50ZXJzZWN0aW9uRWxlbWVudExheW91dEJveCgpIHtcbiAgICBpZiAoIXRoaXMueE9yaWdpbklmcmFtZUhhbmRsZXJfIHx8ICF0aGlzLnhPcmlnaW5JZnJhbWVIYW5kbGVyXy5pZnJhbWUpIHtcbiAgICAgIHJldHVybiBzdXBlci5nZXRJbnRlcnNlY3Rpb25FbGVtZW50TGF5b3V0Qm94KCk7XG4gICAgfVxuICAgIGNvbnN0IGJveCA9IHRoaXMuZ2V0TGF5b3V0Qm94KCk7XG4gICAgaWYgKCF0aGlzLmlmcmFtZUxheW91dEJveF8pIHtcbiAgICAgIHRoaXMubWVhc3VyZUlmcmFtZUxheW91dEJveF8oKTtcbiAgICB9XG5cbiAgICBjb25zdCBpZnJhbWUgPSAvKiogQHR5cGUgeyEuLi8uLi8uLi9zcmMvbGF5b3V0LXJlY3QuTGF5b3V0UmVjdERlZn0gKi8oXG4gICAgICBkZXYoKS5hc3NlcnQodGhpcy5pZnJhbWVMYXlvdXRCb3hfKSk7XG4gICAgcmV0dXJuIG1vdmVMYXlvdXRSZWN0KGlmcmFtZSwgYm94LmxlZnQsIGJveC50b3ApO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBsYXlvdXRDYWxsYmFjaygpIHtcbiAgICBpZiAodGhpcy5sYXlvdXRQcm9taXNlXykge1xuICAgICAgcmV0dXJuIHRoaXMubGF5b3V0UHJvbWlzZV87XG4gICAgfVxuICAgIHVzZXIoKS5hc3NlcnQoIXRoaXMuaXNJbkZpeGVkQ29udGFpbmVyXyxcbiAgICAgICAgJzxhbXAtYWQ+IGlzIG5vdCBhbGxvd2VkIHRvIGJlIHBsYWNlZCBpbiBlbGVtZW50cyB3aXRoICcgK1xuICAgICAgICAncG9zaXRpb246Zml4ZWQ6ICVzJywgdGhpcy5lbGVtZW50KTtcblxuICAgIGNvbnN0IGNvbnNlbnRQcm9taXNlID0gdGhpcy5nZXRDb25zZW50U3RhdGUoKTtcbiAgICBjb25zdCBjb25zZW50UG9saWN5SWQgPSBzdXBlci5nZXRDb25zZW50UG9saWN5KCk7XG4gICAgY29uc3Qgc2hhcmVkRGF0YVByb21pc2UgPSBjb25zZW50UG9saWN5SWRcbiAgICAgID8gZ2V0Q29uc2VudFBvbGljeVNoYXJlZERhdGEodGhpcy5nZXRBbXBEb2MoKSwgY29uc2VudFBvbGljeUlkKVxuICAgICAgOiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG5cbiAgICB0aGlzLmxheW91dFByb21pc2VfID0gUHJvbWlzZS5hbGwoXG4gICAgICAgIFtnZXRBZENpZCh0aGlzKSwgY29uc2VudFByb21pc2UsIHNoYXJlZERhdGFQcm9taXNlXSkudGhlbihjb25zZW50cyA9PiB7XG4gICAgICBjb25zdCBvcHRfY29udGV4dCA9IHtcbiAgICAgICAgY2xpZW50SWQ6IGNvbnNlbnRzWzBdIHx8IG51bGwsXG4gICAgICAgIGNvbnRhaW5lcjogdGhpcy5jb250YWluZXJfLFxuICAgICAgICBpbml0aWFsQ29uc2VudFN0YXRlOiBjb25zZW50c1sxXSxcbiAgICAgICAgY29uc2VudFNoYXJlZERhdGE6IGNvbnNlbnRzWzJdLFxuICAgICAgfTtcblxuICAgICAgLy8gSW4gdGhpcyBwYXRoLCB0aGUgcmVxdWVzdCBhbmQgcmVuZGVyIHN0YXJ0IGV2ZW50cyBhcmUgZW50YW5nbGVkLFxuICAgICAgLy8gYmVjYXVzZSBib3RoIGhhcHBlbiBpbnNpZGUgYSBjcm9zcy1kb21haW4gaWZyYW1lLiAgU2VwYXJhdGluZyB0aGVtXG4gICAgICAvLyBoZXJlLCB0aG91Z2gsIGFsbG93cyB1cyB0byBtZWFzdXJlIHRoZSBpbXBhY3Qgb2YgYWQgdGhyb3R0bGluZyB2aWFcbiAgICAgIC8vIGluY3JlbWVudExvYWRpbmdBZHMoKS5cbiAgICAgIGNvbnN0IGlmcmFtZSA9IGdldElmcmFtZSh0b1dpbih0aGlzLmVsZW1lbnQub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldyksXG4gICAgICAgICAgdGhpcy5lbGVtZW50LCB0aGlzLnR5cGVfLCBvcHRfY29udGV4dCxcbiAgICAgICAgICB7ZGlzYWxsb3dDdXN0b206IHRoaXMuY29uZmlnLnJlbW90ZUhUTUxEaXNhYmxlZH0pO1xuICAgICAgdGhpcy54T3JpZ2luSWZyYW1lSGFuZGxlcl8gPSBuZXcgQW1wQWRYT3JpZ2luSWZyYW1lSGFuZGxlcihcbiAgICAgICAgICB0aGlzKTtcbiAgICAgIHJldHVybiB0aGlzLnhPcmlnaW5JZnJhbWVIYW5kbGVyXy5pbml0KGlmcmFtZSk7XG4gICAgfSk7XG4gICAgaW5jcmVtZW50TG9hZGluZ0Fkcyh0aGlzLndpbiwgdGhpcy5sYXlvdXRQcm9taXNlXyk7XG4gICAgcmV0dXJuIHRoaXMubGF5b3V0UHJvbWlzZV87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSBpblZpZXdwb3J0XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgdmlld3BvcnRDYWxsYmFjayhpblZpZXdwb3J0KSB7XG4gICAgaWYgKHRoaXMueE9yaWdpbklmcmFtZUhhbmRsZXJfKSB7XG4gICAgICB0aGlzLnhPcmlnaW5JZnJhbWVIYW5kbGVyXy52aWV3cG9ydENhbGxiYWNrKGluVmlld3BvcnQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgICovXG4gIHVubGF5b3V0Q2FsbGJhY2soKSB7XG4gICAgdGhpcy5sYXlvdXRQcm9taXNlXyA9IG51bGw7XG4gICAgdGhpcy51aUhhbmRsZXIuYXBwbHlVbmxheW91dFVJKCk7XG4gICAgaWYgKHRoaXMueE9yaWdpbklmcmFtZUhhbmRsZXJfKSB7XG4gICAgICB0aGlzLnhPcmlnaW5JZnJhbWVIYW5kbGVyXy5mcmVlWE9yaWdpbklmcmFtZSgpO1xuICAgICAgdGhpcy54T3JpZ2luSWZyYW1lSGFuZGxlcl8gPSBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgY3JlYXRlUGxhY2Vob2xkZXJDYWxsYmFjaygpIHtcbiAgICByZXR1cm4gdGhpcy51aUhhbmRsZXIuY3JlYXRlUGxhY2Vob2xkZXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTw/Q09OU0VOVF9QT0xJQ1lfU1RBVEU+fVxuICAgKi9cbiAgZ2V0Q29uc2VudFN0YXRlKCkge1xuICAgIGNvbnN0IGNvbnNlbnRQb2xpY3lJZCA9IHN1cGVyLmdldENvbnNlbnRQb2xpY3koKTtcbiAgICByZXR1cm4gY29uc2VudFBvbGljeUlkXG4gICAgICA/IGdldENvbnNlbnRQb2xpY3lTdGF0ZSh0aGlzLmdldEFtcERvYygpLCBjb25zZW50UG9saWN5SWQpXG4gICAgICA6IFByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgfVxuXG4gIC8qKlxuICAqIENhbGN1bGF0ZXMgYW5kIGF0dGVtcHRzIHRvIHNldCB0aGUgYXBwcm9wcmlhdGUgaGVpZ2h0ICYgd2lkdGggZm9yIGFcbiAgKiByZXNwb25zaXZlIGZ1bGwgd2lkdGggYWQgdW5pdC5cbiAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgKiBAcHJpdmF0ZVxuICAqL1xuICBhdHRlbXB0RnVsbFdpZHRoU2l6ZUNoYW5nZV8oKSB7XG4gICAgY29uc3Qgdmlld3BvcnRTaXplID0gdGhpcy5nZXRWaWV3cG9ydCgpLmdldFNpemUoKTtcbiAgICBjb25zdCBtYXhIZWlnaHQgPSBNYXRoLm1pbihNQVhfRlVMTF9XSURUSF9IRUlHSFQsIHZpZXdwb3J0U2l6ZS5oZWlnaHQpO1xuICAgIGNvbnN0IHJhdGlvID0gdGhpcy5jb25maWcuZnVsbFdpZHRoSGVpZ2h0UmF0aW87XG4gICAgY29uc3QgaWRlYWxIZWlnaHQgPSBNYXRoLnJvdW5kKHZpZXdwb3J0U2l6ZS53aWR0aCAvIHJhdGlvKTtcbiAgICBjb25zdCBoZWlnaHQgPSBjbGFtcChpZGVhbEhlaWdodCwgTUlOX0ZVTExfV0lEVEhfSEVJR0hULCBtYXhIZWlnaHQpO1xuICAgIGNvbnN0IHt3aWR0aH0gPSB2aWV3cG9ydFNpemU7XG4gICAgLy8gQXR0ZW1wdCB0byByZXNpemUgdG8gdGhlIGNvcnJlY3QgaGVpZ2h0LiBUaGUgd2lkdGggc2hvdWxkIGFscmVhZHkgYmVcbiAgICAvLyAxMDB2dywgYnV0IGlzIGZpeGVkIGhlcmUgc28gdGhhdCBmdXR1cmUgcmVzaXplcyBvZiB0aGUgdmlld3BvcnQgZG9uJ3RcbiAgICAvLyBhZmZlY3QgaXQuXG5cbiAgICByZXR1cm4gdGhpcy5hdHRlbXB0Q2hhbmdlU2l6ZShoZWlnaHQsIHdpZHRoKS50aGVuKFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgZGV2KCkuaW5mbyhUQUdfM1BfSU1QTCwgYFNpemUgY2hhbmdlIGFjY2VwdGVkOiAke3dpZHRofXgke2hlaWdodH1gKTtcbiAgICAgICAgfSxcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIGRldigpLmluZm8oVEFHXzNQX0lNUEwsIGBTaXplIGNoYW5nZSByZWplY3RlZDogJHt3aWR0aH14JHtoZWlnaHR9YCk7XG4gICAgICAgIH1cbiAgICApO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtBbXBBZFVJSGFuZGxlcn0gZnJvbSAnLi9hbXAtYWQtdWknO1xuaW1wb3J0IHtDb21tb25TaWduYWxzfSBmcm9tICcuLi8uLi8uLi9zcmMvY29tbW9uLXNpZ25hbHMnO1xuaW1wb3J0IHtMYXlvdXRQcmlvcml0eX0gZnJvbSAnLi4vLi4vLi4vc3JjL2xheW91dCc7XG5pbXBvcnQge1NlcnZpY2VzfSBmcm9tICcuLi8uLi8uLi9zcmMvc2VydmljZXMnO1xuaW1wb3J0IHthZGRQYXJhbVRvVXJsfSBmcm9tICcuLi8uLi8uLi9zcmMvdXJsJztcbmltcG9ydCB7YW5jZXN0b3JFbGVtZW50c0J5VGFnfSBmcm9tICcuLi8uLi8uLi9zcmMvZG9tJztcbmltcG9ydCB7XG4gIGNoaWxkRWxlbWVudEJ5VGFnLFxuICByZW1vdmVDaGlsZHJlbixcbn0gZnJvbSAnLi4vLi4vLi4vc3JjL2RvbSc7XG5pbXBvcnQge2hhc093bn0gZnJvbSAnLi4vLi4vLi4vc3JjL3V0aWxzL29iamVjdCc7XG5pbXBvcnQge2lzTGF5b3V0U2l6ZURlZmluZWR9IGZyb20gJy4uLy4uLy4uL3NyYy9sYXlvdXQnO1xuaW1wb3J0IHt1c2VyfSBmcm9tICcuLi8uLi8uLi9zcmMvbG9nJztcblxuLyoqIEBjb25zdCB7c3RyaW5nfSBUYWcgbmFtZSBmb3IgY3VzdG9tIGFkIGltcGxlbWVudGF0aW9uLiAqL1xuZXhwb3J0IGNvbnN0IFRBR19BRF9DVVNUT00gPSAnYW1wLWFkLWN1c3RvbSc7XG5cbi8qKiBAdmFyIHtPYmplY3R9IEEgbWFwIG9mIHByb21pc2VzIGZvciBlYWNoIHZhbHVlIG9mIGRhdGEtdXJsLiBUaGUgcHJvbWlzZVxuICogIHdpbGwgZmV0Y2ggZGF0YSBmb3IgdGhlIFVSTCBmb3IgdGhlIGFkIHNlcnZlciwgYW5kIHJldHVybiBpdCBhcyBhIG1hcCBvZlxuICogIG9iamVjdHMsIGtleWVkIGJ5IHNsb3Q7IGVhY2ggb2JqZWN0IGNvbnRhaW5zIHRoZSB2YXJpYWJsZXMgdG8gYmVcbiAqICAgc3Vic3RpdHV0ZWQgaW50byB0aGUgbXVzdGFjaGUgdGVtcGxhdGUuICovXG5jb25zdCBhbXBDdXN0b21hZFhoclByb21pc2VzID0ge307XG5cbi8qKiBAdmFyIHtPYmplY3R9IGEgbWFwIG9mIGZ1bGwgdXJscyAoaS5lLiBpbmNsdWRpbmcgdGhlIGFtcHNsb3RzIHBhcmFtZXRlcilcbiAqIGZvciBlYWNoIHZhbHVlIG9mIGRhdGEtdXJsICovXG5sZXQgYW1wQ3VzdG9tYWRGdWxsVXJscyA9IG51bGw7XG5cbmV4cG9ydCBjbGFzcyBBbXBBZEN1c3RvbSBleHRlbmRzIEFNUC5CYXNlRWxlbWVudCB7XG5cbiAgLyoqIEBwYXJhbSB7IUFtcEVsZW1lbnR9IGVsZW1lbnQgKi9cbiAgY29uc3RydWN0b3IoZWxlbWVudCkge1xuICAgIHN1cGVyKGVsZW1lbnQpO1xuICAgIC8qKiBAcHJpdmF0ZSB7P3N0cmluZ30gVGhlIGJhc2UgVVJMIG9mIHRoZSBhZCBzZXJ2ZXIgZm9yIHRoaXMgYWQgKi9cbiAgICB0aGlzLnVybF8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/c3RyaW5nfSBBIHN0cmluZyBpZGVudGlmeWluZyB0aGlzIGFkIHNsb3Q6IHRoZSBzZXJ2ZXInc1xuICAgICAqICByZXNwb25zZXMgd2lsbCBiZSBrZXllZCBieSBzbG90ICovXG4gICAgdGhpcy5zbG90XyA9IG51bGw7XG5cbiAgICAvKiogez9BbXBBZFVJSGFuZGxlcn0gKi9cbiAgICB0aGlzLnVpSGFuZGxlciA9IG51bGw7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldExheW91dFByaW9yaXR5KCkge1xuICAgIC8vIFNpbmNlIHRoaXMgaXMgQU1QSFRNTCB3ZSBhcmUgdHJ1c3RpbmcgdGhhdCBpdCB3aWxsIGxvYWQgcmVzcG9uc2libHlcbiAgICByZXR1cm4gTGF5b3V0UHJpb3JpdHkuQ09OVEVOVDtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGlzTGF5b3V0U3VwcG9ydGVkKGxheW91dCkge1xuICAgIC8qKiBAVE9ETyBBZGQgcHJvcGVyIHN1cHBvcnQgZm9yIG1vcmUgbGF5b3V0cywgYW5kIGZpZ3VyZSBvdXQgd2hpY2ggb25lc1xuICAgICAqICB3ZSdyZSBwZXJtaXR0aW5nICovXG4gICAgcmV0dXJuIGlzTGF5b3V0U2l6ZURlZmluZWQobGF5b3V0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCdWlsZHMgQW1wQWRVSUhhbmRsZXIgY2FsbGJhY2tcbiAgICovXG4gIGJ1aWxkQ2FsbGJhY2soKSB7XG4gICAgdGhpcy51cmxfID0gdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS11cmwnKTtcbiAgICB0aGlzLnNsb3RfID0gdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1zbG90Jyk7XG4gICAgLy8gRW5zdXJlIHRoYXQgdGhlIHNsb3QgdmFsdWUgaXMgbGVnYWxcbiAgICB1c2VyKCkuYXNzZXJ0KHRoaXMuc2xvdF8gPT09IG51bGwgfHwgdGhpcy5zbG90Xy5tYXRjaCgvXlswLTlhLXpdKyQvKSxcbiAgICAgICAgJ2N1c3RvbSBhZCBzbG90IHNob3VsZCBiZSBhbHBoYW51bWVyaWM6ICcgKyB0aGlzLnNsb3RfKTtcblxuICAgIHRoaXMudWlIYW5kbGVyID0gbmV3IEFtcEFkVUlIYW5kbGVyKHRoaXMpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBsYXlvdXRDYWxsYmFjaygpIHtcbiAgICAvKiogQGNvbnN0IHtzdHJpbmd9IGZ1bGxVcmwgKi9cbiAgICBjb25zdCBmdWxsVXJsID0gdGhpcy5nZXRGdWxsVXJsXygpO1xuICAgIC8vIGlmIHdlIGhhdmUgY2FjaGVkIHRoZSByZXNwb25zZSwgZmluZCBpdCwgb3RoZXJ3aXNlIGZldGNoXG4gICAgY29uc3QgcmVzcG9uc2VQcm9taXNlID0gYW1wQ3VzdG9tYWRYaHJQcm9taXNlc1tmdWxsVXJsXSB8fFxuICAgICAgICBTZXJ2aWNlcy54aHJGb3IodGhpcy53aW4pLmZldGNoSnNvbihmdWxsVXJsKS50aGVuKHJlcyA9PiByZXMuanNvbigpKTtcbiAgICBpZiAodGhpcy5zbG90XyAhPT0gbnVsbCkge1xuICAgICAgLy8gQ2FjaGUgdGhpcyByZXNwb25zZSBpZiB1c2luZyBgZGF0YS1zbG90YCBmZWF0dXJlIHNvIG9ubHkgb25lIHJlcXVlc3RcbiAgICAgIC8vIGlzIG1hZGUgcGVyIHVybFxuICAgICAgYW1wQ3VzdG9tYWRYaHJQcm9taXNlc1tmdWxsVXJsXSA9IHJlc3BvbnNlUHJvbWlzZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3BvbnNlUHJvbWlzZS50aGVuKGRhdGEgPT4ge1xuICAgICAgLy8gV2Ugd2lsbCBnZXQgaGVyZSB3aGVuIHRoZSBkYXRhIGhhcyBiZWVuIGZldGNoZWQgZnJvbSB0aGUgc2VydmVyXG4gICAgICBsZXQgdGVtcGxhdGVEYXRhID0gZGF0YTtcbiAgICAgIGlmICh0aGlzLnNsb3RfICE9PSBudWxsKSB7XG4gICAgICAgIHRlbXBsYXRlRGF0YSA9IGhhc093bihkYXRhLCB0aGlzLnNsb3RfKSA/IGRhdGFbdGhpcy5zbG90X10gOlxuICAgICAgICAgIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGlmICghdGVtcGxhdGVEYXRhIHx8IHR5cGVvZiB0ZW1wbGF0ZURhdGEgIT0gJ29iamVjdCcpIHtcbiAgICAgICAgdGhpcy51aUhhbmRsZXIuYXBwbHlOb0NvbnRlbnRVSSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRlbXBsYXRlRGF0YSA9IHRoaXMuaGFuZGxlVGVtcGxhdGVEYXRhXyh0ZW1wbGF0ZURhdGEpO1xuXG4gICAgICB0aGlzLnJlbmRlclN0YXJ0ZWQoKTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgU2VydmljZXMudGVtcGxhdGVzRm9yKHRoaXMud2luKVxuICAgICAgICAgICAgLmZpbmRBbmRSZW5kZXJUZW1wbGF0ZSh0aGlzLmVsZW1lbnQsIHRlbXBsYXRlRGF0YSlcbiAgICAgICAgICAgIC50aGVuKHJlbmRlcmVkRWxlbWVudCA9PiB7XG4gICAgICAgICAgICAgIC8vIEdldCBoZXJlIHdoZW4gdGhlIHRlbXBsYXRlIGhhcyBiZWVuIHJlbmRlcmVkIENsZWFyIG91dCB0aGVcbiAgICAgICAgICAgICAgLy8gY2hpbGQgdGVtcGxhdGUgYW5kIHJlcGxhY2UgaXQgYnkgdGhlIHJlbmRlcmVkIHZlcnNpb24gTm90ZSB0aGF0XG4gICAgICAgICAgICAgIC8vIHdlIGNhbid0IGNsZWFyIHRlbXBsYXRlcyB0aGF0J3Mgbm90IGFkJ3MgY2hpbGQgYmVjYXVzZSB0aGV5XG4gICAgICAgICAgICAgIC8vIG1heWJlIHVzZWQgYnkgb3RoZXIgYWQgY29tcG9uZW50LlxuICAgICAgICAgICAgICByZW1vdmVDaGlsZHJlbih0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQocmVuZGVyZWRFbGVtZW50KTtcbiAgICAgICAgICAgICAgdGhpcy5zaWduYWxzKCkuc2lnbmFsKENvbW1vblNpZ25hbHMuSU5JX0xPQUQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHRoaXMudWlIYW5kbGVyLmFwcGx5Tm9Db250ZW50VUkoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRoZSB0ZW1wbGF0ZSBkYXRhIHJlc3BvbnNlLlxuICAgKiBUaGVyZSBhcmUgdHdvIHR5cGVzIG9mIHRlbXBsYXRlRGF0YSBmb3JtYXRcbiAgICogRm9ybWF0IG9wdGlvbiAxXG4gICAqIHtcbiAgICogICAndGVtcGxhdGVJZCc6IHt9LFxuICAgKiAgICd2YXJzJzoge30sXG4gICAqICAgJ2RhdGEnOiB7XG4gICAqICAgICAnYSc6ICcxJyxcbiAgICogICAgICdiJzogJzInXG4gICAqICAgfVxuICAgKiB9XG4gICAqIG9yIGZvcm1hdCBvcHRpb24gMlxuICAgKiB7XG4gICAqICAnYSc6ICcxJyxcbiAgICogICdiJzogJzInXG4gICAqIH1cbiAgICogaWYgYHRlbXBsYXRlSWRgIG9yIGB2YXJzYCBhcmUgbm90IHNwZWNpZmllZC5cbiAgICpcbiAgICogQHBhcmFtIHshSnNvbk9iamVjdH0gdGVtcGxhdGVEYXRhXG4gICAqIEByZXR1cm4geyFKc29uT2JqZWN0fVxuICAgKi9cbiAgaGFuZGxlVGVtcGxhdGVEYXRhXyh0ZW1wbGF0ZURhdGEpIHtcbiAgICBpZiAoY2hpbGRFbGVtZW50QnlUYWcodGhpcy5lbGVtZW50LCAndGVtcGxhdGUnKSkge1xuICAgICAgLy8gTmVlZCB0byBjaGVjayBmb3IgdGVtcGxhdGUgYXR0cmlidXRlIGlmIGl0J3MgYWxsb3dlZCBpbiBhbXAtYWQgdGFnXG4gICAgICByZXR1cm4gdGVtcGxhdGVEYXRhO1xuICAgIH1cblxuICAgIC8vIElmIHVzZSByZW1vdGUgdGVtcGxhdGUgc3BlY2lmaWVkIGJ5IHJlc3BvbnNlXG4gICAgdXNlcigpLmFzc2VydCh0ZW1wbGF0ZURhdGFbJ3RlbXBsYXRlSWQnXSwgJ1RlbXBsYXRlSWQgbm90IHNwZWNpZmllZCcpO1xuXG4gICAgdXNlcigpLmFzc2VydChcbiAgICAgICAgdGVtcGxhdGVEYXRhWydkYXRhJ10gJiYgdHlwZW9mIHRlbXBsYXRlRGF0YVsnZGF0YSddID09ICdvYmplY3QnLFxuICAgICAgICAnVGVtcGxhdGUgZGF0YSBub3Qgc3BlY2lmaWVkJyk7XG5cbiAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCd0ZW1wbGF0ZScsIHRlbXBsYXRlRGF0YVsndGVtcGxhdGVJZCddKTtcblxuICAgIGlmICh0ZW1wbGF0ZURhdGFbJ3ZhcnMnXSAmJiB0eXBlb2YgdGVtcGxhdGVEYXRhWyd2YXJzJ10gPT0gJ29iamVjdCcpIHtcbiAgICAgIC8vIFN1cHBvcnQgZm9yIHZhcnNcbiAgICAgIGNvbnN0IHZhcnMgPSB0ZW1wbGF0ZURhdGFbJ3ZhcnMnXTtcbiAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyh2YXJzKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBhdHRyTmFtZSA9ICdkYXRhLXZhcnMtJyArIGtleXNbaV07XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShhdHRyTmFtZSwgdmFyc1trZXlzW2ldXSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICB0aGlzLnVzZXIoKS5lcnJvcihUQUdfQURfQ1VTVE9NLCAnRmFpbCB0byBzZXQgYXR0cmlidXRlOiAnLCBlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0ZW1wbGF0ZURhdGFbJ2RhdGEnXTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgICovXG4gIHVubGF5b3V0Q2FsbGJhY2soKSB7XG4gICAgdGhpcy51aUhhbmRsZXIuYXBwbHlVbmxheW91dFVJKCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGNyZWF0ZVBsYWNlaG9sZGVyQ2FsbGJhY2soKSB7XG4gICAgcmV0dXJuIHRoaXMudWlIYW5kbGVyLmNyZWF0ZVBsYWNlaG9sZGVyKCk7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGUgZ2V0RnVsbFVybF8gR2V0IGEgVVJMIHdoaWNoIGluY2x1ZGVzIGEgcGFyYW1ldGVyIGluZGljYXRpbmdcbiAgICogYWxsIHNsb3RzIHRvIGJlIGZldGNoZWQgZnJvbSB0aGlzIHdlYiBzZXJ2ZXIgVVJMXG4gICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIFVSTCB3aXRoIHRoZSBcImFtcHNsb3RzXCIgcGFyYW1ldGVyIGFwcGVuZGVkXG4gICAqL1xuICBnZXRGdWxsVXJsXygpIHtcbiAgICAvLyBJZiB0aGlzIGFkIGRvZXNuJ3QgaGF2ZSBhIHNsb3QgZGVmaW5lZCwganVzdCByZXR1cm4gdGhlIGJhc2UgVVJMXG4gICAgaWYgKHRoaXMuc2xvdF8gPT09IG51bGwpIHtcbiAgICAgIHJldHVybiAvKiogQHR5cGUge3N0cmluZ30gKi8gKHRoaXMudXJsXyk7XG4gICAgfVxuICAgIGlmIChhbXBDdXN0b21hZEZ1bGxVcmxzID09PSBudWxsKSB7XG4gICAgICAvLyBUaGUgYXJyYXkgb2YgYWQgdXJscyBoYXMgbm90IHlldCBiZWVuIGJ1aWx0LCBkbyBzbyBub3cuXG4gICAgICBhbXBDdXN0b21hZEZ1bGxVcmxzID0ge307XG4gICAgICBjb25zdCBzbG90cyA9IHt9O1xuXG4gICAgICAvLyBHZXQgdGhlIHBhcmVudCBib2R5IG9mIHRoaXMgYW1wLWFkIGVsZW1lbnQuIEl0IGNvdWxkIGJlIHRoZSBib2R5IG9mXG4gICAgICAvLyB0aGUgbWFpbiBkb2N1bWVudCwgb3IgaXQgY291bGQgYmUgYW4gZW5jbG9zaW5nIGlmcmFtZS5cbiAgICAgIGNvbnN0IGJvZHkgPSBhbmNlc3RvckVsZW1lbnRzQnlUYWcodGhpcy5lbGVtZW50LCAnQk9EWScpWzBdO1xuICAgICAgY29uc3QgZWxlbWVudHMgPSBib2R5LnF1ZXJ5U2VsZWN0b3JBbGwoJ2FtcC1hZFt0eXBlPWN1c3RvbV0nKTtcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBlbGVtZW50cy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgY29uc3QgZWxlbSA9IGVsZW1lbnRzW2luZGV4XTtcbiAgICAgICAgY29uc3QgdXJsID0gZWxlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdXJsJyk7XG4gICAgICAgIGNvbnN0IHNsb3RJZCA9IGVsZW0uZ2V0QXR0cmlidXRlKCdkYXRhLXNsb3QnKTtcbiAgICAgICAgaWYgKHNsb3RJZCAhPT0gbnVsbCkge1xuICAgICAgICAgIGlmICghKHVybCBpbiBzbG90cykpIHtcbiAgICAgICAgICAgIHNsb3RzW3VybF0gPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2xvdHNbdXJsXS5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChzbG90SWQpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBiYXNlVXJsIGluIHNsb3RzKSB7XG4gICAgICAgIGFtcEN1c3RvbWFkRnVsbFVybHNbYmFzZVVybF0gPSBhZGRQYXJhbVRvVXJsKGJhc2VVcmwsICdhbXBzbG90cycsXG4gICAgICAgICAgICBzbG90c1tiYXNlVXJsXS5qb2luKCcsJykpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYW1wQ3VzdG9tYWRGdWxsVXJsc1t0aGlzLnVybF9dO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgYmFzZUluc3RhbmNlIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge2dldEFkQ29udGFpbmVyfSBmcm9tICcuLi8uLi8uLi9zcmMvYWQtaGVscGVyJztcblxuZXhwb3J0IGNsYXNzIEFtcEFkVUlIYW5kbGVyIHtcblxuICAvKipcbiAgICogQHBhcmFtIHshQU1QLkJhc2VFbGVtZW50fSBiYXNlSW5zdGFuY2VcbiAgICovXG4gIGNvbnN0cnVjdG9yKGJhc2VJbnN0YW5jZSkge1xuICAgIC8qKiBAcHJpdmF0ZSB7IUFNUC5CYXNlRWxlbWVudH0gKi9cbiAgICB0aGlzLmJhc2VJbnN0YW5jZV8gPSBiYXNlSW5zdGFuY2U7XG5cbiAgICAvKiogQHByaXZhdGUgeyFFbGVtZW50fSAqL1xuICAgIHRoaXMuZWxlbWVudF8gPSBiYXNlSW5zdGFuY2UuZWxlbWVudDtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFEb2N1bWVudH0gKi9cbiAgICB0aGlzLmRvY18gPSBiYXNlSW5zdGFuY2Uud2luLmRvY3VtZW50O1xuXG4gICAgaWYgKCFiYXNlSW5zdGFuY2UuZ2V0RmFsbGJhY2soKSkge1xuICAgICAgY29uc3QgZmFsbGJhY2sgPSB0aGlzLmFkZERlZmF1bHRVaUNvbXBvbmVudF8oJ2ZhbGxiYWNrJyk7XG4gICAgICBpZiAoZmFsbGJhY2spIHtcbiAgICAgICAgdGhpcy5iYXNlSW5zdGFuY2VfLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZmFsbGJhY2spO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBkZWZhdWx0IHBsYWNlaG9sZGVyIGlmIG5vdCBwcm92aWRlZC5cbiAgICogU2hvdWxkIGJlIGNhbGxlZCBpbiBiYXNlRWxlbWVudCBjcmVhdGVQbGFjZWhvbGRlckNhbGxiYWNrLlxuICAgKi9cbiAgY3JlYXRlUGxhY2Vob2xkZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkRGVmYXVsdFVpQ29tcG9uZW50XygncGxhY2Vob2xkZXInKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBseSBVSSBmb3IgbGFpZCBvdXQgYWQgd2l0aCBuby1jb250ZW50XG4gICAqIE9yZGVyOiB0cnkgY29sbGFwc2UgLT4gYXBwbHkgcHJvdmlkZWQgZmFsbGJhY2sgLT4gYXBwbHkgZGVmYXVsdCBmYWxsYmFja1xuICAgKi9cbiAgYXBwbHlOb0NvbnRlbnRVSSgpIHtcbiAgICBpZiAoZ2V0QWRDb250YWluZXIodGhpcy5lbGVtZW50XykgPT0gJ0FNUC1TVElDS1ktQUQnKSB7XG4gICAgICAvLyBTcGVjaWFsIGNhc2U6IGZvcmNlIGNvbGxhcHNlIHN0aWNreS1hZCBpZiBubyBjb250ZW50LlxuICAgICAgdGhpcy5iYXNlSW5zdGFuY2VfLi8qT0sqL2NvbGxhcHNlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIFRoZSBvcmRlciBoZXJlIGlzIGNvbGxhcHNlID4gdXNlciBwcm92aWRlZCBmYWxsYmFjayA+IGRlZmF1bHQgZmFsbGJhY2tcbiAgICB0aGlzLmJhc2VJbnN0YW5jZV8uYXR0ZW1wdENvbGxhcHNlKCkuY2F0Y2goKCkgPT4ge1xuICAgICAgdGhpcy5iYXNlSW5zdGFuY2VfLm11dGF0ZUVsZW1lbnQoKCkgPT4ge1xuICAgICAgICB0aGlzLmJhc2VJbnN0YW5jZV8udG9nZ2xlUGxhY2Vob2xkZXIoZmFsc2UpO1xuICAgICAgICB0aGlzLmJhc2VJbnN0YW5jZV8udG9nZ2xlRmFsbGJhY2sodHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBseSBVSSBmb3IgdW5sYWlkIG91dCBhZDogSGlkZSBmYWxsYmFjay5cbiAgICogTm90ZTogTm8gbmVlZCB0byB0b2dnbGVQbGFjZWhvbGRlciBoZXJlLCB1bmxheW91dCBzaG93IGl0IGJ5IGRlZmF1bHQuXG4gICAqL1xuICBhcHBseVVubGF5b3V0VUkoKSB7XG4gICAgdGhpcy5iYXNlSW5zdGFuY2VfLm11dGF0ZUVsZW1lbnQoKCkgPT4ge1xuICAgICAgdGhpcy5iYXNlSW5zdGFuY2VfLnRvZ2dsZUZhbGxiYWNrKGZhbHNlKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcmV0dXJuIHs/RWxlbWVudH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFkZERlZmF1bHRVaUNvbXBvbmVudF8obmFtZSkge1xuICAgIGlmICh0aGlzLmVsZW1lbnRfLnRhZ05hbWUgPT0gJ0FNUC1FTUJFRCcpIHtcbiAgICAgIC8vIERvIG5vdGhpbmcgZm9yIGFtcC1lbWJlZCBlbGVtZW50O1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHVpQ29tcG9uZW50ID0gdGhpcy5kb2NfLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHVpQ29tcG9uZW50LnNldEF0dHJpYnV0ZShuYW1lLCAnJyk7XG5cbiAgICBjb25zdCBjb250ZW50ID0gdGhpcy5kb2NfLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnaS1hbXBodG1sLWFkLWRlZmF1bHQtaG9sZGVyJyk7XG5cbiAgICAvLyBUT0RPKGFnaGFzc2VtaSwgIzQxNDYpIGkxOG5cbiAgICBjb250ZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1hZC1ob2xkZXItdGV4dCcsICdBZCcpO1xuICAgIHVpQ29tcG9uZW50LmFwcGVuZENoaWxkKGNvbnRlbnQpO1xuXG4gICAgcmV0dXJuIHVpQ29tcG9uZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ3x1bmRlZmluZWR9IGhlaWdodFxuICAgKiBAcGFyYW0ge251bWJlcnxzdHJpbmd8dW5kZWZpbmVkfSB3aWR0aFxuICAgKiBAcGFyYW0ge251bWJlcn0gaWZyYW1lSGVpZ2h0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpZnJhbWVXaWR0aFxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhT2JqZWN0Pn1cbiAgICovXG4gIHVwZGF0ZVNpemUoaGVpZ2h0LCB3aWR0aCwgaWZyYW1lSGVpZ2h0LCBpZnJhbWVXaWR0aCkge1xuICAgIC8vIENhbGN1bGF0ZSBuZXcgd2lkdGggYW5kIGhlaWdodCBvZiB0aGUgY29udGFpbmVyIHRvIGluY2x1ZGUgdGhlIHBhZGRpbmcuXG4gICAgLy8gSWYgcGFkZGluZyBpcyBuZWdhdGl2ZSwganVzdCB1c2UgdGhlIHJlcXVlc3RlZCB3aWR0aCBhbmQgaGVpZ2h0IGRpcmVjdGx5LlxuICAgIGxldCBuZXdIZWlnaHQsIG5ld1dpZHRoO1xuICAgIGhlaWdodCA9IHBhcnNlSW50KGhlaWdodCwgMTApO1xuICAgIGlmICghaXNOYU4oaGVpZ2h0KSkge1xuICAgICAgbmV3SGVpZ2h0ID0gTWF0aC5tYXgodGhpcy5lbGVtZW50Xy4vKk9LKi9vZmZzZXRIZWlnaHQgK1xuICAgICAgICAgIGhlaWdodCAtIGlmcmFtZUhlaWdodCwgaGVpZ2h0KTtcbiAgICB9XG4gICAgd2lkdGggPSBwYXJzZUludCh3aWR0aCwgMTApO1xuICAgIGlmICghaXNOYU4od2lkdGgpKSB7XG4gICAgICBuZXdXaWR0aCA9IE1hdGgubWF4KHRoaXMuZWxlbWVudF8uLypPSyovb2Zmc2V0V2lkdGggK1xuICAgICAgICAgIHdpZHRoIC0gaWZyYW1lV2lkdGgsIHdpZHRoKTtcbiAgICB9XG5cbiAgICAvKiogQHR5cGUgeyFPYmplY3Q8Ym9vbGVhbiwgbnVtYmVyfHVuZGVmaW5lZCwgbnVtYmVyfHVuZGVmaW5lZD59ICovXG4gICAgY29uc3QgcmVzaXplSW5mbyA9IHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBuZXdXaWR0aCxcbiAgICAgIG5ld0hlaWdodCxcbiAgICB9O1xuXG4gICAgaWYgKCFuZXdIZWlnaHQgJiYgIW5ld1dpZHRoKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCd1bmRlZmluZWQgd2lkdGggYW5kIGhlaWdodCcpKTtcbiAgICB9XG5cbiAgICBpZiAoZ2V0QWRDb250YWluZXIodGhpcy5lbGVtZW50XykgPT0gJ0FNUC1TVElDS1ktQUQnKSB7XG4gICAgICAvLyBTcGVjaWFsIGNhc2U6IGZvcmNlIGNvbGxhcHNlIHN0aWNreS1hZCBpZiBubyBjb250ZW50LlxuICAgICAgcmVzaXplSW5mby5zdWNjZXNzID0gZmFsc2U7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc2l6ZUluZm8pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5iYXNlSW5zdGFuY2VfLmF0dGVtcHRDaGFuZ2VTaXplKFxuICAgICAgICBuZXdIZWlnaHQsIG5ld1dpZHRoKS50aGVuKCgpID0+IHtcbiAgICAgIHJldHVybiByZXNpemVJbmZvO1xuICAgIH0sICgpID0+IHtcbiAgICAgIHJlc2l6ZUluZm8uc3VjY2VzcyA9IGZhbHNlO1xuICAgICAgcmV0dXJuIHJlc2l6ZUluZm87XG4gICAgfSk7XG4gIH1cbn1cblxuLy8gTWFrZSB0aGUgY2xhc3MgYXZhaWxhYmxlIHRvIG90aGVyIGxhdGUgbG9hZGVkIGFtcC1hZCBpbXBsZW1lbnRhdGlvbnNcbi8vIHdpdGhvdXQgdGhlbSBoYXZpbmcgdG8gZGVwZW5kIG9uIGl0IGRpcmVjdGx5LlxuQU1QLkFtcEFkVUlIYW5kbGVyID0gQW1wQWRVSUhhbmRsZXI7XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgQURTRU5TRV9FWFBFUklNRU5UUyxcbiAgQURTRU5TRV9FWFBfTkFNRVMsXG59IGZyb20gJy4uLy4uL2FtcC1hZC1uZXR3b3JrLWFkc2Vuc2UtaW1wbC8wLjEvYWRzZW5zZS1hNGEtY29uZmlnJztcbmltcG9ydCB7XG4gIENPTlNUQU5UUyxcbiAgTWVzc2FnZVR5cGUsXG59IGZyb20gJy4uLy4uLy4uL3NyYy8zcC1mcmFtZS1tZXNzYWdpbmcnO1xuaW1wb3J0IHtDb21tb25TaWduYWxzfSBmcm9tICcuLi8uLi8uLi9zcmMvY29tbW9uLXNpZ25hbHMnO1xuaW1wb3J0IHtEZWZlcnJlZH0gZnJvbSAnLi4vLi4vLi4vc3JjL3V0aWxzL3Byb21pc2UnO1xuaW1wb3J0IHtcbiAgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIsXG59IGZyb20gJy4uLy4uLy4uL3NyYy9pbnRlcnNlY3Rpb24tb2JzZXJ2ZXInO1xuaW1wb3J0IHtTZXJ2aWNlc30gZnJvbSAnLi4vLi4vLi4vc3JjL3NlcnZpY2VzJztcbmltcG9ydCB7XG4gIFN1YnNjcmlwdGlvbkFwaSxcbiAgbGlzdGVuRm9yLFxuICBsaXN0ZW5Gb3JPbmNlUHJvbWlzZSxcbiAgcG9zdE1lc3NhZ2VUb1dpbmRvd3MsXG59IGZyb20gJy4uLy4uLy4uL3NyYy9pZnJhbWUtaGVscGVyJztcbmltcG9ydCB7ZGV2fSBmcm9tICcuLi8uLi8uLi9zcmMvbG9nJztcbmltcG9ydCB7ZGljdH0gZnJvbSAnLi4vLi4vLi4vc3JjL3V0aWxzL29iamVjdCc7XG5pbXBvcnQge2dldERhdGEsIGxvYWRQcm9taXNlfSBmcm9tICcuLi8uLi8uLi9zcmMvZXZlbnQtaGVscGVyJztcbmltcG9ydCB7XG4gIGdldEV4cGVyaW1lbnRCcmFuY2gsXG4gIGlzRXhwZXJpbWVudE9uLFxufSBmcm9tICcuLi8uLi8uLi9zcmMvZXhwZXJpbWVudHMnO1xuaW1wb3J0IHtnZXRIdG1sfSBmcm9tICcuLi8uLi8uLi9zcmMvZ2V0LWh0bWwnO1xuaW1wb3J0IHtyZW1vdmVFbGVtZW50fSBmcm9tICcuLi8uLi8uLi9zcmMvZG9tJztcbmltcG9ydCB7cmVwb3J0RXJyb3JUb0FuYWx5dGljc30gZnJvbSAnLi4vLi4vLi4vc3JjL2Vycm9yJztcbmltcG9ydCB7c2V0U3R5bGV9IGZyb20gJy4uLy4uLy4uL3NyYy9zdHlsZSc7XG5pbXBvcnQge3Rocm90dGxlfSBmcm9tICcuLi8uLi8uLi9zcmMvdXRpbHMvcmF0ZS1saW1pdCc7XG5cbmNvbnN0IFZJU0lCSUxJVFlfVElNRU9VVCA9IDEwMDAwO1xuXG5jb25zdCBNSU5fSU5BQk9YX1BPU0lUSU9OX0VWRU5UX0lOVEVSVkFMID0gMTAwO1xuXG5cbmV4cG9ydCBjbGFzcyBBbXBBZFhPcmlnaW5JZnJhbWVIYW5kbGVyIHtcblxuICAvKipcbiAgICogQHBhcmFtIHshLi9hbXAtYWQtM3AtaW1wbC5BbXBBZDNQSW1wbHwhLi4vLi4vYW1wLWE0YS8wLjEvYW1wLWE0YS5BbXBBNEF9IGJhc2VJbnN0YW5jZVxuICAgKi9cbiAgY29uc3RydWN0b3IoYmFzZUluc3RhbmNlKSB7XG4gICAgLyoqIEBwcml2YXRlIHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IGJhc2VJbnN0YW5jZS53aW47XG5cbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICB0aGlzLmJhc2VJbnN0YW5jZV8gPSBiYXNlSW5zdGFuY2U7XG5cbiAgICAvKiogQHByaXZhdGUgeyFFbGVtZW50fSAqL1xuICAgIHRoaXMuZWxlbWVudF8gPSBiYXNlSW5zdGFuY2UuZWxlbWVudDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P0FNUC5BbXBBZFVJSGFuZGxlcn0gKi9cbiAgICB0aGlzLnVpSGFuZGxlcl8gPSBiYXNlSW5zdGFuY2UudWlIYW5kbGVyO1xuXG4gICAgLyoqIHs/RWxlbWVudH0gaWZyYW1lIGluc3RhbmNlICovXG4gICAgdGhpcy5pZnJhbWUgPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/SW50ZXJzZWN0aW9uT2JzZXJ2ZXJ9ICovXG4gICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlcl8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHtTdWJzY3JpcHRpb25BcGl9ICovXG4gICAgdGhpcy5lbWJlZFN0YXRlQXBpXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9TdWJzY3JpcHRpb25BcGl9ICovXG4gICAgdGhpcy5pbmFib3hQb3NpdGlvbkFwaV8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHtib29sZWFufSAqL1xuICAgIHRoaXMuaXNJbmFib3hQb3NpdGlvbkFwaUluaXRfID0gZmFsc2U7XG5cbiAgICAvKiogQHByaXZhdGUgeyFBcnJheTwhRnVuY3Rpb24+fSBmdW5jdGlvbnMgdG8gdW5yZWdpc3RlciBsaXN0ZW5lcnMgKi9cbiAgICB0aGlzLnVubGlzdGVuZXJzXyA9IFtdO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uLy4uLy4uL3NyYy9zZXJ2aWNlL3ZpZXdlci1pbXBsLlZpZXdlcn0gKi9cbiAgICB0aGlzLnZpZXdlcl8gPSBTZXJ2aWNlcy52aWV3ZXJGb3JEb2ModGhpcy5iYXNlSW5zdGFuY2VfLmdldEFtcERvYygpKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi8uLi8uLi9zcmMvc2VydmljZS92aWV3cG9ydC92aWV3cG9ydC1pbXBsLlZpZXdwb3J0fSAqL1xuICAgIHRoaXMudmlld3BvcnRfID0gU2VydmljZXMudmlld3BvcnRGb3JEb2ModGhpcy5iYXNlSW5zdGFuY2VfLmdldEFtcERvYygpKTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLnNlbmRQb3NpdGlvblBlbmRpbmdfID0gZmFsc2U7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBTZXRzIHVwIGxpc3RlbmVycyBhbmQgaWZyYW1lIHN0YXRlIGZvciBpZnJhbWUgY29udGFpbmluZyBhZCBjcmVhdGl2ZS5cbiAgICogQHBhcmFtIHshRWxlbWVudH0gaWZyYW1lXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pc0E0QSB3aGVuIHRydWUgZG8gbm90IGxpc3RlbiB0byBhZCByZXNwb25zZVxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX0gYXdhaXRpbmcgcmVuZGVyIGNvbXBsZXRlIHByb21pc2VcbiAgICovXG4gIGluaXQoaWZyYW1lLCBvcHRfaXNBNEEpIHtcbiAgICBkZXYoKS5hc3NlcnQoXG4gICAgICAgICF0aGlzLmlmcmFtZSwgJ211bHRpcGxlIGludm9jYXRpb25zIG9mIGluaXQgd2l0aG91dCBkZXN0cm95IScpO1xuICAgIHRoaXMuaWZyYW1lID0gaWZyYW1lO1xuICAgIHRoaXMuaWZyYW1lLnNldEF0dHJpYnV0ZSgnc2Nyb2xsaW5nJywgJ25vJyk7XG4gICAgdGhpcy5iYXNlSW5zdGFuY2VfLmFwcGx5RmlsbENvbnRlbnQodGhpcy5pZnJhbWUpO1xuICAgIGNvbnN0IHRpbWVyID0gU2VydmljZXMudGltZXJGb3IodGhpcy5iYXNlSW5zdGFuY2VfLndpbik7XG5cbiAgICAvLyBJbml0IEludGVyc2VjdGlvbk9ic2VydmVyIHNlcnZpY2UuXG4gICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlcl8gPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoXG4gICAgICAgIHRoaXMuYmFzZUluc3RhbmNlXywgdGhpcy5pZnJhbWUsIHRydWUpO1xuXG4gICAgdGhpcy5lbWJlZFN0YXRlQXBpXyA9IG5ldyBTdWJzY3JpcHRpb25BcGkoXG4gICAgICAgIHRoaXMuaWZyYW1lLCAnc2VuZC1lbWJlZC1zdGF0ZScsIHRydWUsXG4gICAgICAgICgpID0+IHRoaXMuc2VuZEVtYmVkSW5mb18odGhpcy5iYXNlSW5zdGFuY2VfLmlzSW5WaWV3cG9ydCgpKSk7XG5cbiAgICAvLyBUT0RPKGJyYWRmcml6emVsbCk6IFdvdWxkIGJlIGJldHRlciB0byB0dXJuIHRoaXMgb24gaWZcbiAgICAvLyBBNEEuaXNYaHJFbmFibGVkKCkgaXMgZmFsc2UsIG9yIGlmIHdlIHNpbXBseSBkZWNpZGUgaXQgaXNcbiAgICAvLyBvayB0byB0dXJuIHRoaXMgb24gZm9yIGFsbCB0cmFmZmljLlxuICAgIGlmIChnZXRFeHBlcmltZW50QnJhbmNoKFxuICAgICAgICB0aGlzLndpbl8sIEFEU0VOU0VfRVhQX05BTUVTLlVOQ09ORElUSU9ORURfQ0FOT05JQ0FMKSA9PVxuICAgICAgIEFEU0VOU0VfRVhQRVJJTUVOVFMuVU5DT05ESVRJT05FRF9DQU5PTklDQUxfRVhQIHx8XG4gICAgICAgZ2V0RXhwZXJpbWVudEJyYW5jaCh0aGlzLndpbl8sIEFEU0VOU0VfRVhQX05BTUVTLkNBTk9OSUNBTCkgPT1cbiAgICAgICAgQURTRU5TRV9FWFBFUklNRU5UUy5DQU5PTklDQUxfRVhQIHx8XG4gICAgICAgaXNFeHBlcmltZW50T24odGhpcy53aW5fLCAnaW5hYm94LXBvc2l0aW9uLWFwaScpKSB7XG4gICAgICAvLyBUbyBwcm92aWRlIHBvc2l0aW9uIHRvIGluYWJveC5cbiAgICAgIHRoaXMuaW5hYm94UG9zaXRpb25BcGlfID0gbmV3IFN1YnNjcmlwdGlvbkFwaShcbiAgICAgICAgICB0aGlzLmlmcmFtZSwgTWVzc2FnZVR5cGUuU0VORF9QT1NJVElPTlMsIHRydWUsICgpID0+IHtcbiAgICAgICAgICAgIC8vIFRPRE8oQHpob3V5eCk6IE1ha2Ugc2VuZFBvc2l0aW9uXyBvbmx5IHNlbmQgdG9cbiAgICAgICAgICAgIC8vIG1lc3NhZ2Ugb3JpZ2luIGlmcmFtZVxuICAgICAgICAgICAgdGhpcy5zZW5kUG9zaXRpb25fKCk7XG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyUG9zaXRpb25fKCk7XG4gICAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIFRyaWdnZXJlZCBieSBjb250ZXh0LnJlcG9ydFJlbmRlcmVkRW50aXR5SWRlbnRpZmllcijigKYpIGluc2lkZSB0aGUgYWRcbiAgICAvLyBpZnJhbWUuXG4gICAgbGlzdGVuRm9yT25jZVByb21pc2UodGhpcy5pZnJhbWUsICdlbnRpdHktaWQnLCB0cnVlKVxuICAgICAgICAudGhlbihpbmZvID0+IHtcbiAgICAgICAgICB0aGlzLmVsZW1lbnRfLmNyZWF0aXZlSWQgPSBpbmZvLmRhdGFbJ2lkJ107XG4gICAgICAgIH0pO1xuXG4gICAgdGhpcy5oYW5kbGVPbmVUaW1lUmVxdWVzdF8oTWVzc2FnZVR5cGUuR0VUX0hUTUwsIHBheWxvYWQgPT4ge1xuICAgICAgY29uc3Qgc2VsZWN0b3IgPSBwYXlsb2FkWydzZWxlY3RvciddO1xuICAgICAgY29uc3QgYXR0cmlidXRlcyA9IHBheWxvYWRbJ2F0dHJpYnV0ZXMnXTtcbiAgICAgIGxldCBjb250ZW50ID0gJyc7XG4gICAgICBpZiAodGhpcy5lbGVtZW50Xy5oYXNBdHRyaWJ1dGUoJ2RhdGEtaHRtbC1hY2Nlc3MtYWxsb3dlZCcpKSB7XG4gICAgICAgIGNvbnRlbnQgPSBnZXRIdG1sKHRoaXMuYmFzZUluc3RhbmNlXy53aW4sIHNlbGVjdG9yLCBhdHRyaWJ1dGVzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoY29udGVudCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmhhbmRsZU9uZVRpbWVSZXF1ZXN0XyhNZXNzYWdlVHlwZS5HRVRfQ09OU0VOVF9TVEFURSwgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYmFzZUluc3RhbmNlXy5nZXRDb25zZW50U3RhdGUoKS50aGVuKGNvbnNlbnRTdGF0ZSA9PiB7XG4gICAgICAgIHJldHVybiB7Y29uc2VudFN0YXRlfTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gSW5zdGFsbCBpZnJhbWUgcmVzaXplIEFQSS5cbiAgICB0aGlzLnVubGlzdGVuZXJzXy5wdXNoKGxpc3RlbkZvcih0aGlzLmlmcmFtZSwgJ2VtYmVkLXNpemUnLFxuICAgICAgICAoZGF0YSwgc291cmNlLCBvcmlnaW4pID0+IHtcbiAgICAgICAgICBpZiAoISFkYXRhWydoYXNPdmVyZmxvdyddKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRfLndhcm5Pbk1pc3NpbmdPdmVyZmxvdyA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmhhbmRsZVJlc2l6ZV8oZGF0YVsnaGVpZ2h0J10sIGRhdGFbJ3dpZHRoJ10sIHNvdXJjZSwgb3JpZ2luKTtcbiAgICAgICAgfSwgdHJ1ZSwgdHJ1ZSkpO1xuXG4gICAgdGhpcy51bmxpc3RlbmVyc18ucHVzaCh0aGlzLnZpZXdlcl8ub25WaXNpYmlsaXR5Q2hhbmdlZCgoKSA9PiB7XG4gICAgICB0aGlzLnNlbmRFbWJlZEluZm9fKHRoaXMuYmFzZUluc3RhbmNlXy5pc0luVmlld3BvcnQoKSk7XG4gICAgfSkpO1xuXG4gICAgdGhpcy51bmxpc3RlbmVyc18ucHVzaChsaXN0ZW5Gb3IodGhpcy5pZnJhbWUsXG4gICAgICAgIE1lc3NhZ2VUeXBlLlVTRVJfRVJST1JfSU5fSUZSQU1FLCBkYXRhID0+IHtcbiAgICAgICAgICB0aGlzLnVzZXJFcnJvckZvckFuYWx5dGljc18oZGF0YVsnbWVzc2FnZSddKTtcbiAgICAgICAgfSwgdHJ1ZSwgdHJ1ZSAvKiBvcHRfaW5jbHVkaW5nTmVzdGVkV2luZG93cyAqLykpO1xuXG4gICAgLy8gSWZyYW1lLm9ubG9hZCBub3JtYWxseSBjYWxsZWQgYnkgdGhlIEFkIGFmdGVyIGZ1bGwgbG9hZC5cbiAgICBjb25zdCBpZnJhbWVMb2FkUHJvbWlzZSA9IGxvYWRQcm9taXNlKHRoaXMuaWZyYW1lKS50aGVuKCgpID0+IHtcbiAgICAgIC8vIFdhaXQganVzdCBhIGxpdHRsZSB0byBhbGxvdyBgbm8tY29udGVudGAgbWVzc2FnZSB0byBhcnJpdmUuXG4gICAgICBpZiAodGhpcy5pZnJhbWUpIHtcbiAgICAgICAgLy8gQ2hyb21lIGRvZXMgbm90IHJlZmxlY3QgdGhlIGlmcmFtZSByZWFkeXN0YXRlLlxuICAgICAgICB0aGlzLmlmcmFtZS5yZWFkeVN0YXRlID0gJ2NvbXBsZXRlJztcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aW1lci5wcm9taXNlKDEwKTtcbiAgICB9KTtcblxuICAgIC8vIENhbGN1bGF0ZSByZW5kZXItc3RhcnQgYW5kIG5vLWNvbnRlbnQgc2lnbmFscy5cbiAgICBjb25zdCB7XG4gICAgICBwcm9taXNlOiByZW5kZXJTdGFydFByb21pc2UsXG4gICAgICByZXNvbHZlOiByZW5kZXJTdGFydFJlc29sdmUsXG4gICAgfSA9IG5ldyBEZWZlcnJlZCgpO1xuICAgIGNvbnN0IHtcbiAgICAgIHByb21pc2U6IG5vQ29udGVudFByb21pc2UsXG4gICAgICByZXNvbHZlOiBub0NvbnRlbnRSZXNvbHZlLFxuICAgIH0gPSBuZXcgRGVmZXJyZWQoKTtcblxuICAgIGlmICh0aGlzLmJhc2VJbnN0YW5jZV8uY29uZmlnICYmXG4gICAgICAgICAgICB0aGlzLmJhc2VJbnN0YW5jZV8uY29uZmlnLnJlbmRlclN0YXJ0SW1wbGVtZW50ZWQpIHtcbiAgICAgIC8vIFdoZW4gYHJlbmRlci1zdGFydGAgaXMgc3VwcG9ydGVkLCB0aGVzZSBzaWduYWxzIGFyZSBtdXR1YWxseVxuICAgICAgLy8gZXhjbHVzaXZlLiBXaGljaGV2ZXIgYXJyaXZlcyBmaXJzdCB3aW5zLlxuICAgICAgbGlzdGVuRm9yT25jZVByb21pc2UodGhpcy5pZnJhbWUsXG4gICAgICAgICAgWydyZW5kZXItc3RhcnQnLCAnbm8tY29udGVudCddLCB0cnVlKS50aGVuKGluZm8gPT4ge1xuICAgICAgICBjb25zdCB7ZGF0YX0gPSBpbmZvO1xuICAgICAgICBpZiAoZGF0YVsndHlwZSddID09ICdyZW5kZXItc3RhcnQnKSB7XG4gICAgICAgICAgdGhpcy5yZW5kZXJTdGFydF8oaW5mbyk7XG4gICAgICAgICAgcmVuZGVyU3RhcnRSZXNvbHZlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5ub0NvbnRlbnRfKCk7XG4gICAgICAgICAgbm9Db250ZW50UmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSWYgYHJlbmRlci1zdGFydGAgaXMgbm90IHN1cHBvcnRlZCwgbGlzdGVuIHRvIGBib290c3RyYXAtbG9hZGVkYC5cbiAgICAgIC8vIFRoaXMgd2lsbCBhdm9pZCBrZWVwaW5nIHRoZSBBZCBlbXB0eSB1bnRpbCBpdCdzIGZ1bGx5IGxvYWRlZCwgd2hpY2hcbiAgICAgIC8vIGNvdWxkIGJlIGEgbG9uZyB0aW1lLlxuICAgICAgbGlzdGVuRm9yT25jZVByb21pc2UodGhpcy5pZnJhbWUsICdib290c3RyYXAtbG9hZGVkJywgdHJ1ZSkudGhlbigoKSA9PiB7XG4gICAgICAgIHRoaXMucmVuZGVyU3RhcnRfKCk7XG4gICAgICAgIHJlbmRlclN0YXJ0UmVzb2x2ZSgpO1xuICAgICAgfSk7XG4gICAgICAvLyBMaWtld2lzZSwgbm8tY29udGVudCBpcyBvYnNlcnZlZCBoZXJlLiBIb3dldmVyLCBpdCdzIGltcG9zc2libGUgdG9cbiAgICAgIC8vIGFzc3VyZSBleGNsdXNpdml0eSBiZXR3ZWVuIGBuby1jb250ZW50YCBhbmQgYGJvb3RzdHJhcC1sb2FkZWRgIGIvY1xuICAgICAgLy8gYGJvb3RzdHJhcC1sb2FkZWRgIGFsd2F5cyBhcnJpdmVzIGZpcnN0LlxuICAgICAgbGlzdGVuRm9yT25jZVByb21pc2UodGhpcy5pZnJhbWUsICduby1jb250ZW50JywgdHJ1ZSkudGhlbigoKSA9PiB7XG4gICAgICAgIHRoaXMubm9Db250ZW50XygpO1xuICAgICAgICBub0NvbnRlbnRSZXNvbHZlKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBXYWl0IGZvciBpbml0aWFsIGxvYWQgc2lnbmFsLiBOb3RpY2UgdGhhdCB0aGlzIHNpZ25hbCBpcyBub3RcbiAgICAvLyB1c2VkIHRvIHJlc29sdmUgdGhlIGZpbmFsIGxheW91dCBwcm9taXNlIGJlY2F1c2UgaWZyYW1lIG1heSBzdGlsbCBiZVxuICAgIC8vIGNvbnN1bWluZyBzaWduaWZpY2FudCBuZXR3b3JrIGFuZCBDUFUgcmVzb3VyY2VzLlxuICAgIGxpc3RlbkZvck9uY2VQcm9taXNlKHRoaXMuaWZyYW1lLCBDb21tb25TaWduYWxzLklOSV9MT0FELCB0cnVlKS50aGVuKCgpID0+IHtcbiAgICAgIC8vIFRPRE8oZHZveXRlbmtvLCAjNzc4OCk6IGVuc3VyZSB0aGF0IGluLWEtYm94IFwiaW5pLWxvYWRcIiBtZXNzYWdlIGlzXG4gICAgICAvLyByZWNlaXZlZCBoZXJlIGFzIHdlbGwuXG4gICAgICB0aGlzLmJhc2VJbnN0YW5jZV8uc2lnbmFscygpLnNpZ25hbChDb21tb25TaWduYWxzLklOSV9MT0FEKTtcbiAgICB9KTtcblxuICAgIHRoaXMuZWxlbWVudF8uYXBwZW5kQ2hpbGQodGhpcy5pZnJhbWUpO1xuICAgIGlmIChvcHRfaXNBNEEpIHtcbiAgICAgIC8vIEE0QSB3cml0ZXMgY3JlYXRpdmUgZnJhbWUgZGlyZWN0bHkgdG8gcGFnZSBvbmNlIGNyZWF0aXZlIGlzIHJlY2VpdmVkXG4gICAgICAvLyBhbmQgdGhlcmVmb3JlIGRvZXMgbm90IHJlcXVpcmUgcmVuZGVyIHN0YXJ0IG1lc3NhZ2Ugc28gYXR0YWNoIGFuZFxuICAgICAgLy8gaW1wb3NlIG5vIGxvYWRlciBkZWxheS4gIE5ldHdvcmsgaXMgdXNpbmcgcmVuZGVyU3RhcnQgb3JcbiAgICAgIC8vIGJvb3RzdHJhcC1sb2FkZWQgdG8gaW5kaWNhdGUgYWQgcmVxdWVzdCB3YXMgc2VudCwgZWl0aGVyIHdheSB3ZSBrbm93XG4gICAgICAvLyB0aGF0IG9jY3VycmVkIGZvciBGYXN0IEZldGNoLlxuICAgICAgdGhpcy5yZW5kZXJTdGFydF8oKTtcbiAgICAgIHJlbmRlclN0YXJ0UmVzb2x2ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTZXQgaWZyYW1lIGluaXRpYWxseSBoaWRkZW4gd2hpY2ggd2lsbCBiZSByZW1vdmVkIG9uIHJlbmRlci1zdGFydCBvclxuICAgICAgLy8gbG9hZCwgd2hpY2hldmVyIGlzIGVhcmxpZXIuXG4gICAgICBzZXRTdHlsZSh0aGlzLmlmcmFtZSwgJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XG4gICAgfVxuXG4gICAgUHJvbWlzZS5yYWNlKFtcbiAgICAgIHJlbmRlclN0YXJ0UHJvbWlzZSxcbiAgICAgIGlmcmFtZUxvYWRQcm9taXNlLFxuICAgICAgdGltZXIucHJvbWlzZShWSVNJQklMSVRZX1RJTUVPVVQpLFxuICAgIF0pLnRoZW4oKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuaWZyYW1lKSB7XG4gICAgICAgIHNldFN0eWxlKHRoaXMuaWZyYW1lLCAndmlzaWJpbGl0eScsICcnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFRoZSBhY3R1YWwgYWQgbG9hZCBpcyBlYXJpbGllc3Qgb2YgaWZyYW1lLm9ubG9hZCBldmVudCBhbmQgbm8tY29udGVudC5cbiAgICByZXR1cm4gUHJvbWlzZS5yYWNlKFtpZnJhbWVMb2FkUHJvbWlzZSwgbm9Db250ZW50UHJvbWlzZV0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0VHlwZVxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCopfSBnZXR0ZXJcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhbmRsZU9uZVRpbWVSZXF1ZXN0XyhyZXF1ZXN0VHlwZSwgZ2V0dGVyKSB7XG4gICAgdGhpcy51bmxpc3RlbmVyc18ucHVzaChsaXN0ZW5Gb3IodGhpcy5pZnJhbWUsIHJlcXVlc3RUeXBlLFxuICAgICAgICAoaW5mbywgc291cmNlLCBvcmlnaW4pID0+IHtcbiAgICAgICAgICBpZiAoIXRoaXMuaWZyYW1lKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgbWVzc2FnZUlkID0gaW5mb1tDT05TVEFOVFMubWVzc2FnZUlkRmllbGROYW1lXTtcbiAgICAgICAgICBjb25zdCBwYXlsb2FkID0gaW5mb1tDT05TVEFOVFMucGF5bG9hZEZpZWxkTmFtZV07XG5cbiAgICAgICAgICBnZXR0ZXIocGF5bG9hZCkudGhlbihjb250ZW50ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGRpY3QoKTtcbiAgICAgICAgICAgIHJlc3VsdFtDT05TVEFOVFMubWVzc2FnZUlkRmllbGROYW1lXSA9IG1lc3NhZ2VJZDtcbiAgICAgICAgICAgIHJlc3VsdFtDT05TVEFOVFMuY29udGVudEZpZWxkTmFtZV0gPSBjb250ZW50O1xuICAgICAgICAgICAgcG9zdE1lc3NhZ2VUb1dpbmRvd3MoXG4gICAgICAgICAgICAgICAgZGV2KCkuYXNzZXJ0RWxlbWVudCh0aGlzLmlmcmFtZSksIFt7d2luOiBzb3VyY2UsIG9yaWdpbn1dLFxuICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlICsgQ09OU1RBTlRTLnJlc3BvbnNlVHlwZVN1ZmZpeCxcbiAgICAgICAgICAgICAgICByZXN1bHQsIHRydWVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sIHRydWUgLyogb3B0X2lzM1AgKi8sIGZhbHNlIC8qIG9wdF9pbmNsdWRpbmdOZXN0ZWRXaW5kb3dzICovKSk7XG4gIH1cblxuICAvKipcbiAgICogY2FsbGJhY2sgZnVuY3RvbiBvbiByZWNlaXZpbmcgcmVuZGVyLXN0YXJ0XG4gICAqIEBwYXJhbSB7e2RhdGE6ICFKc29uT2JqZWN0fT19IG9wdF9pbmZvXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICByZW5kZXJTdGFydF8ob3B0X2luZm8pIHtcbiAgICB0aGlzLmJhc2VJbnN0YW5jZV8ucmVuZGVyU3RhcnRlZCgpO1xuICAgIGlmICghb3B0X2luZm8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IGdldERhdGEob3B0X2luZm8pO1xuICAgIHRoaXMuaGFuZGxlUmVzaXplXyhcbiAgICAgICAgZGF0YVsnaGVpZ2h0J10sIGRhdGFbJ3dpZHRoJ10sIG9wdF9pbmZvWydzb3VyY2UnXSwgb3B0X2luZm9bJ29yaWdpbiddKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbnMgdXAgdGhlIGxpc3RlbmVycyBvbiB0aGUgY3Jvc3MgZG9tYWluIGFkIGlmcmFtZSBhbmQgZnJlZXMgdGhlXG4gICAqIGlmcmFtZSByZXNvdXJjZS5cbiAgICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2tlZXBcbiAgICovXG4gIGZyZWVYT3JpZ2luSWZyYW1lKG9wdF9rZWVwKSB7XG4gICAgdGhpcy5jbGVhbnVwXygpO1xuICAgIC8vIElmIGFzayB0byBrZWVwIHRoZSBpZnJhbWUuXG4gICAgLy8gVXNlIGluIHRoZSBjYXNlIG9mIG5vLWNvbnRlbnQgYW5kIGlmcmFtZSBpcyBhIG1hc3RlciBpZnJhbWUuXG4gICAgaWYgKG9wdF9rZWVwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLmlmcmFtZSkge1xuICAgICAgcmVtb3ZlRWxlbWVudCh0aGlzLmlmcmFtZSk7XG4gICAgICB0aGlzLmlmcmFtZSA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFucyB1cCBsaXN0ZW5lcnMgb24gdGhlIGFkLCBhbmQgYXBwbHkgdGhlIGRlZmF1bHQgVUkgZm9yIGFkLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgbm9Db250ZW50XygpIHtcbiAgICBpZiAoIXRoaXMuaWZyYW1lKSB7XG4gICAgICAvLyB1bmxheW91dCBhbHJlYWR5IGNhbGxlZFxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmZyZWVYT3JpZ2luSWZyYW1lKHRoaXMuaWZyYW1lLm5hbWUuaW5kZXhPZignX21hc3RlcicpID49IDApO1xuICAgIHRoaXMudWlIYW5kbGVyXy5hcHBseU5vQ29udGVudFVJKCk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW5zIHVwIGxpc3RlbmVycyBvbiB0aGUgYWQgaWZyYW1lLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY2xlYW51cF8oKSB7XG4gICAgdGhpcy51bmxpc3RlbmVyc18uZm9yRWFjaCh1bmxpc3RlbmVyID0+IHVubGlzdGVuZXIoKSk7XG4gICAgdGhpcy51bmxpc3RlbmVyc18ubGVuZ3RoID0gMDtcbiAgICBpZiAodGhpcy5lbWJlZFN0YXRlQXBpXykge1xuICAgICAgdGhpcy5lbWJlZFN0YXRlQXBpXy5kZXN0cm95KCk7XG4gICAgICB0aGlzLmVtYmVkU3RhdGVBcGlfID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMuaW5hYm94UG9zaXRpb25BcGlfKSB7XG4gICAgICB0aGlzLmluYWJveFBvc2l0aW9uQXBpXy5kZXN0cm95KCk7XG4gICAgICB0aGlzLmluYWJveFBvc2l0aW9uQXBpXyA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyXykge1xuICAgICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlcl8uZGVzdHJveSgpO1xuICAgICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlcl8gPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBlbGVtZW50J3MgZGltZW5zaW9ucyB0byBhY2NvbW1vZGF0ZSB0aGUgaWZyYW1lJ3NcbiAgICogcmVxdWVzdGVkIGRpbWVuc2lvbnMuIE5vdGlmaWVzIHRoZSB3aW5kb3cgdGhhdCByZXF1ZXN0IHRoZSByZXNpemVcbiAgICogb2Ygc3VjY2VzcyBvciBmYWlsdXJlLlxuICAgKiBAcGFyYW0ge251bWJlcnxzdHJpbmd8dW5kZWZpbmVkfSBoZWlnaHRcbiAgICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfHVuZGVmaW5lZH0gd2lkdGhcbiAgICogQHBhcmFtIHshV2luZG93fSBzb3VyY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9yaWdpblxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlUmVzaXplXyhoZWlnaHQsIHdpZHRoLCBzb3VyY2UsIG9yaWdpbikge1xuICAgIHRoaXMuYmFzZUluc3RhbmNlXy5nZXRWc3luYygpLm11dGF0ZSgoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMuaWZyYW1lKSB7XG4gICAgICAgIC8vIGlmcmFtZSBjYW4gYmUgY2xlYW51cCBiZWZvcmUgdnN5bmMuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGlmcmFtZUhlaWdodCA9IHRoaXMuaWZyYW1lLi8qT0sqL29mZnNldEhlaWdodDtcbiAgICAgIGNvbnN0IGlmcmFtZVdpZHRoID0gdGhpcy5pZnJhbWUuLypPSyovb2Zmc2V0V2lkdGg7XG4gICAgICB0aGlzLnVpSGFuZGxlcl8udXBkYXRlU2l6ZShoZWlnaHQsIHdpZHRoLCBpZnJhbWVIZWlnaHQsXG4gICAgICAgICAgaWZyYW1lV2lkdGgpLnRoZW4oaW5mbyA9PiB7XG4gICAgICAgIHRoaXMuc2VuZEVtYmVkU2l6ZVJlc3BvbnNlXyhpbmZvLnN1Y2Nlc3MsXG4gICAgICAgICAgICBpbmZvLm5ld1dpZHRoLCBpbmZvLm5ld0hlaWdodCwgc291cmNlLCBvcmlnaW4pO1xuICAgICAgfSwgKCkgPT4ge30pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmRzIGEgcmVzcG9uc2UgdG8gdGhlIHdpbmRvdyB3aGljaCByZXF1ZXN0ZWQgYSByZXNpemUuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3VjY2Vzc1xuICAgKiBAcGFyYW0ge251bWJlcn0gcmVxdWVzdGVkV2lkdGhcbiAgICogQHBhcmFtIHtudW1iZXJ9IHJlcXVlc3RlZEhlaWdodFxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHNvdXJjZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3JpZ2luXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzZW5kRW1iZWRTaXplUmVzcG9uc2VfKHN1Y2Nlc3MsIHJlcXVlc3RlZFdpZHRoLCByZXF1ZXN0ZWRIZWlnaHQsIHNvdXJjZSxcbiAgICBvcmlnaW4pIHtcbiAgICAvLyBUaGUgaWZyYW1lIG1heSBoYXZlIGJlZW4gcmVtb3ZlZCBieSB0aGUgdGltZSB3ZSByZXNpemUuXG4gICAgaWYgKCF0aGlzLmlmcmFtZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBwb3N0TWVzc2FnZVRvV2luZG93cyhcbiAgICAgICAgdGhpcy5pZnJhbWUsXG4gICAgICAgIFt7d2luOiBzb3VyY2UsIG9yaWdpbn1dLFxuICAgICAgICBzdWNjZXNzID8gJ2VtYmVkLXNpemUtY2hhbmdlZCcgOiAnZW1iZWQtc2l6ZS1kZW5pZWQnLFxuICAgICAgICBkaWN0KHtcbiAgICAgICAgICAncmVxdWVzdGVkV2lkdGgnOiByZXF1ZXN0ZWRXaWR0aCxcbiAgICAgICAgICAncmVxdWVzdGVkSGVpZ2h0JzogcmVxdWVzdGVkSGVpZ2h0LFxuICAgICAgICB9KSxcbiAgICAgICAgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSBpblZpZXdwb3J0XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzZW5kRW1iZWRJbmZvXyhpblZpZXdwb3J0KSB7XG4gICAgaWYgKCF0aGlzLmVtYmVkU3RhdGVBcGlfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuZW1iZWRTdGF0ZUFwaV8uc2VuZCgnZW1iZWQtc3RhdGUnLCBkaWN0KHtcbiAgICAgICdpblZpZXdwb3J0JzogaW5WaWV3cG9ydCxcbiAgICAgICdwYWdlSGlkZGVuJzogIXRoaXMudmlld2VyXy5pc1Zpc2libGUoKSxcbiAgICB9KSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmUgaWZyYW1lIHBvc2l0aW9uIGVudHJ5IGluIG5leHQgYW5pbWF0aW9uIGZyYW1lLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0SWZyYW1lUG9zaXRpb25Qcm9taXNlXygpIHtcbiAgICByZXR1cm4gdGhpcy52aWV3cG9ydF8uZ2V0Q2xpZW50UmVjdEFzeW5jKFxuICAgICAgICBkZXYoKS5hc3NlcnRFbGVtZW50KHRoaXMuaWZyYW1lKSkudGhlbihwb3NpdGlvbiA9PiB7XG4gICAgICBkZXYoKS5hc3NlcnQocG9zaXRpb24sXG4gICAgICAgICAgJ2VsZW1lbnQgY2xpZW50UmVjdCBzaG91bGQgaW50ZXJzZWN0cyB3aXRoIHJvb3QgY2xpZW50UmVjdCcpO1xuICAgICAgY29uc3Qgdmlld3BvcnQgPSB0aGlzLnZpZXdwb3J0Xy5nZXRSZWN0KCk7XG4gICAgICByZXR1cm4gZGljdCh7XG4gICAgICAgICd0YXJnZXRSZWN0JzogcG9zaXRpb24sXG4gICAgICAgICd2aWV3cG9ydFJlY3QnOiB2aWV3cG9ydCxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBwcml2YXRlICovXG4gIHNlbmRQb3NpdGlvbl8oKSB7XG4gICAgaWYgKHRoaXMuc2VuZFBvc2l0aW9uUGVuZGluZ18pIHtcbiAgICAgIC8vIE9ubHkgc2VuZCBvbmNlIGluIHNpbmdsZSBhbmltYXRpb24gZnJhbWUuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5zZW5kUG9zaXRpb25QZW5kaW5nXyA9IHRydWU7XG4gICAgdGhpcy5nZXRJZnJhbWVQb3NpdGlvblByb21pc2VfKCkudGhlbihwb3NpdGlvbiA9PiB7XG4gICAgICB0aGlzLnNlbmRQb3NpdGlvblBlbmRpbmdfID0gZmFsc2U7XG4gICAgICB0aGlzLmluYWJveFBvc2l0aW9uQXBpXy5zZW5kKE1lc3NhZ2VUeXBlLlBPU0lUSU9OLCBwb3NpdGlvbik7XG4gICAgfSk7XG4gIH1cblxuICAvKiogQHByaXZhdGUgKi9cbiAgcmVnaXN0ZXJQb3NpdGlvbl8oKSB7XG4gICAgaWYgKHRoaXMuaXNJbmFib3hQb3NpdGlvbkFwaUluaXRfKSB7XG4gICAgICAvLyBvbmx5IHJlZ2lzdGVyIHRvIHZpZXdwb3J0IHNjcm9sbC9yZXNpemUgb25jZVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuaXNJbmFib3hQb3NpdGlvbkFwaUluaXRfID0gdHJ1ZTtcbiAgICAvLyBTZW5kIHdpbmRvdyBzY3JvbGwvcmVzaXplIGV2ZW50IHRvIHZpZXdwb3J0LlxuICAgIHRoaXMudW5saXN0ZW5lcnNfLnB1c2godGhpcy52aWV3cG9ydF8ub25TY3JvbGwodGhyb3R0bGUodGhpcy53aW5fLCAoKSA9PiB7XG4gICAgICB0aGlzLmdldElmcmFtZVBvc2l0aW9uUHJvbWlzZV8oKS50aGVuKHBvc2l0aW9uID0+IHtcbiAgICAgICAgdGhpcy5pbmFib3hQb3NpdGlvbkFwaV8uc2VuZChNZXNzYWdlVHlwZS5QT1NJVElPTiwgcG9zaXRpb24pO1xuICAgICAgfSk7XG4gICAgfSwgTUlOX0lOQUJPWF9QT1NJVElPTl9FVkVOVF9JTlRFUlZBTCkpKTtcbiAgICB0aGlzLnVubGlzdGVuZXJzXy5wdXNoKHRoaXMudmlld3BvcnRfLm9uUmVzaXplKCgpID0+IHtcbiAgICAgIHRoaXMuZ2V0SWZyYW1lUG9zaXRpb25Qcm9taXNlXygpLnRoZW4ocG9zaXRpb24gPT4ge1xuICAgICAgICB0aGlzLmluYWJveFBvc2l0aW9uQXBpXy5zZW5kKE1lc3NhZ2VUeXBlLlBPU0lUSU9OLCBwb3NpdGlvbik7XG4gICAgICB9KTtcbiAgICB9KSk7XG4gIH1cblxuICAvKipcbiAgICogU2VlIEJhc2VFbGVtZW50IG1ldGhvZC5cbiAgICogQHBhcmFtIHtib29sZWFufSBpblZpZXdwb3J0XG4gICAqL1xuICB2aWV3cG9ydENhbGxiYWNrKGluVmlld3BvcnQpIHtcbiAgICBpZiAodGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlcl8pIHtcbiAgICAgIHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXJfLm9uVmlld3BvcnRDYWxsYmFjayhpblZpZXdwb3J0KTtcbiAgICB9XG4gICAgdGhpcy5zZW5kRW1iZWRJbmZvXyhpblZpZXdwb3J0KTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIFNlZSBCYXNlRWxlbWVudCBtZXRob2QuXG4gICAqL1xuICBvbkxheW91dE1lYXN1cmUoKSB7XG4gICAgLy8gV2hlbiB0aGUgZnJhbWV3b3JrIGhhcyB0aGUgbmVlZCB0byByZW1lYXN1cmUgdXMsIG91ciBwb3NpdGlvbiBtaWdodFxuICAgIC8vIGhhdmUgY2hhbmdlZC4gU2VuZCBhbiBpbnRlcnNlY3Rpb24gcmVjb3JkIGlmIG5lZWRlZC5cbiAgICBpZiAodGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlcl8pIHtcbiAgICAgIHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXJfLmZpcmUoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2VcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHVzZXJFcnJvckZvckFuYWx5dGljc18obWVzc2FnZSkge1xuICAgIGlmICh0eXBlb2YgbWVzc2FnZSA9PSAnc3RyaW5nJykge1xuICAgICAgY29uc3QgZSA9IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICAgIGUubmFtZSA9ICczcEVycm9yJztcbiAgICAgIHJlcG9ydEVycm9yVG9BbmFseXRpY3MoZSwgdGhpcy5iYXNlSW5zdGFuY2VfLndpbik7XG4gICAgfVxuICB9XG59XG5cbi8vIE1ha2UgdGhlIGNsYXNzIGF2YWlsYWJsZSB0byBvdGhlciBsYXRlIGxvYWRlZCBhbXAtYWQgaW1wbGVtZW50YXRpb25zXG4vLyB3aXRob3V0IHRoZW0gaGF2aW5nIHRvIGRlcGVuZCBvbiBpdCBkaXJlY3RseS5cbkFNUC5BbXBBZFhPcmlnaW5JZnJhbWVIYW5kbGVyID0gQW1wQWRYT3JpZ2luSWZyYW1lSGFuZGxlcjtcbiIsIi8qIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtBbXBBZDNQSW1wbH0gZnJvbSAnLi9hbXAtYWQtM3AtaW1wbCc7XG5pbXBvcnQge0FtcEFkQ3VzdG9tfSBmcm9tICcuL2FtcC1hZC1jdXN0b20nO1xuaW1wb3J0IHtDU1N9IGZyb20gJy4uLy4uLy4uL2J1aWxkL2FtcC1hZC0wLjEuY3NzJztcbmltcG9ydCB7U2VydmljZXN9IGZyb20gJy4uLy4uLy4uL3NyYy9zZXJ2aWNlcyc7XG5pbXBvcnQge2FkQ29uZmlnfSBmcm9tICcuLi8uLi8uLi9hZHMvX2NvbmZpZyc7XG5pbXBvcnQge2dldEE0QVJlZ2lzdHJ5fSBmcm9tICcuLi8uLi8uLi9hZHMvX2E0YS1jb25maWcnO1xuaW1wb3J0IHtoYXNPd259IGZyb20gJy4uLy4uLy4uL3NyYy91dGlscy9vYmplY3QnO1xuaW1wb3J0IHt1c2VyfSBmcm9tICcuLi8uLi8uLi9zcmMvbG9nJztcblxuXG4vKipcbiAqIENvbnN0cnVjdCBhZCBuZXR3b3JrIHR5cGUtc3BlY2lmaWMgdGFnIGFuZCBzY3JpcHQgbmFtZS4gIE5vdGUgdGhhdCB0aGlzXG4gKiBvbWl0cyB0aGUgdmVyc2lvbiBudW1iZXIgYW5kICcuanMnIHN1ZmZpeCBmb3IgdGhlIGV4dGVuc2lvbiBzY3JpcHQsIHdoaWNoXG4gKiB3aWxsIGJlIGhhbmRsZWQgYnkgdGhlIGV4dGVuc2lvbiBsb2FkZXIuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIG5ldHdvcmtJbXBsZW1lbnRhdGlvblRhZyh0eXBlKSB7XG4gIHJldHVybiBgYW1wLWFkLW5ldHdvcmstJHt0eXBlfS1pbXBsYDtcbn1cblxuZXhwb3J0IGNsYXNzIEFtcEFkIGV4dGVuZHMgQU1QLkJhc2VFbGVtZW50IHtcblxuICAvKiogQG92ZXJyaWRlICovXG4gIGlzTGF5b3V0U3VwcG9ydGVkKHVudXNlZExheW91dCkge1xuICAgIC8vIFRPRE8oanJpZGdld2VsbCwgIzU5ODAsICM4MjE4KTogZW5zdXJlIHRoYXQgdW51cGdyYWRlZCBjYWxscyBhcmUgbm90XG4gICAgLy8gZG9uZSBmb3IgYGlzTGF5b3V0U3VwcG9ydGVkYC5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgdXBncmFkZUNhbGxiYWNrKCkge1xuICAgIGNvbnN0IGE0YVJlZ2lzdHJ5ID0gZ2V0QTRBUmVnaXN0cnkoKTtcbiAgICAvLyBCbG9jayB3aG9sZSBhZCBsb2FkIGlmIGEgY29uc2VudCBpcyBuZWVkZWQuXG4gICAgLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIGNvbnN0IGNvbnNlbnRJZCA9IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29uc2VudC1ub3RpZmljYXRpb24taWQnKTtcbiAgICBjb25zdCBjb25zZW50ID0gY29uc2VudElkXG4gICAgICA/IFNlcnZpY2VzLnVzZXJOb3RpZmljYXRpb25NYW5hZ2VyRm9yRG9jKHRoaXMuZWxlbWVudClcbiAgICAgICAgICAudGhlbihzZXJ2aWNlID0+IHNlcnZpY2UuZ2V0KGNvbnNlbnRJZCkpXG4gICAgICA6IFByb21pc2UucmVzb2x2ZSgpO1xuICAgIGNvbnN0IHR5cGUgPSB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0eXBlJyk7XG4gICAgcmV0dXJuIGNvbnNlbnQudGhlbigoKSA9PiB7XG4gICAgICBjb25zdCBpc0N1c3RvbSA9IHR5cGUgPT09ICdjdXN0b20nO1xuICAgICAgdXNlcigpLmFzc2VydChpc0N1c3RvbSB8fCBoYXNPd24oYWRDb25maWcsIHR5cGUpXG4gICAgICAgICAgfHwgaGFzT3duKGE0YVJlZ2lzdHJ5LCB0eXBlKSwgYFVua25vd24gYWQgdHlwZSBcIiR7dHlwZX1cImApO1xuXG4gICAgICAvLyBDaGVjayBmb3IgdGhlIGN1c3RvbSBhZCB0eXBlIChubyBhZCBuZXR3b3JrLCBzZWxmLXNlcnZpY2UpXG4gICAgICBpZiAoaXNDdXN0b20pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBbXBBZEN1c3RvbSh0aGlzLmVsZW1lbnQpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLndpbi5hbXBBZFNsb3RJZENvdW50ZXIgPSB0aGlzLndpbi5hbXBBZFNsb3RJZENvdW50ZXIgfHwgMDtcbiAgICAgIGNvbnN0IHNsb3RJZCA9IHRoaXMud2luLmFtcEFkU2xvdElkQ291bnRlcisrO1xuXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIHRoaXMuZ2V0VnN5bmMoKS5tdXRhdGUoKCkgPT4ge1xuICAgICAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtYW1wLXNsb3QtaW5kZXgnLCBzbG90SWQpO1xuXG4gICAgICAgICAgY29uc3QgdXNlUmVtb3RlSHRtbCA9ICghKGFkQ29uZmlnW3R5cGVdIHx8IHt9KS5yZW1vdGVIVE1MRGlzYWJsZWQgJiZcbiAgICAgICAgICAgICAgdGhpcy53aW4uZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWV0YVtuYW1lPWFtcC0zcC1pZnJhbWUtc3JjXScpKTtcbiAgICAgICAgICAvLyBUT0RPKHRkcmwpOiBDaGVjayBhbXAtYWQgcmVnaXN0cnkgdG8gc2VlIGlmIHRoZXkgaGF2ZSB0aGlzIGFscmVhZHkuXG4gICAgICAgICAgLy8gVE9ETyhhNGEtY2FtKTogU2hvcnRlbiB0aGlzIHByZWRpY2F0ZS5cbiAgICAgICAgICBpZiAoIWE0YVJlZ2lzdHJ5W3R5cGVdIHx8XG4gICAgICAgICAgICAgIC8vIE5vdGUgdGhhdCBwcmVkaWNhdGUgZXhlY3V0aW9uIG1heSBoYXZlIHNpZGUgZWZmZWN0cy5cbiAgICAgICAgICAgICAgIWE0YVJlZ2lzdHJ5W3R5cGVdKHRoaXMud2luLCB0aGlzLmVsZW1lbnQsIHVzZVJlbW90ZUh0bWwpKSB7XG4gICAgICAgICAgICAvLyBFaXRoZXIgdGhpcyBhZCBuZXR3b3JrIGRvZXNuJ3Qgc3VwcG9ydCBGYXN0IEZldGNoLCBpdHMgRmFzdFxuICAgICAgICAgICAgLy8gRmV0Y2ggaW1wbGVtZW50YXRpb24gaGFzIGV4cGxpY2l0bHkgb3B0ZWQgbm90IHRvIGhhbmRsZSB0aGlzXG4gICAgICAgICAgICAvLyB0YWcsIG9yIHRoaXMgcGFnZSB1c2VzIHJlbW90ZS5odG1sIHdoaWNoIGlzIGluaGVyZW50bHlcbiAgICAgICAgICAgIC8vIGluY29tcGF0aWJsZSB3aXRoIEZhc3QgRmV0Y2guIEZhbGwgYmFjayB0byBEZWxheWVkIEZldGNoLlxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUobmV3IEFtcEFkM1BJbXBsKHRoaXMuZWxlbWVudCkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGV4dGVuc2lvblRhZ05hbWUgPSBuZXR3b3JrSW1wbGVtZW50YXRpb25UYWcodHlwZSk7XG4gICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1hNGEtdXBncmFkZS10eXBlJywgZXh0ZW5zaW9uVGFnTmFtZSk7XG4gICAgICAgICAgcmVzb2x2ZShTZXJ2aWNlcy5leHRlbnNpb25zRm9yKHRoaXMud2luKVxuICAgICAgICAgICAgICAubG9hZEVsZW1lbnRDbGFzcyhleHRlbnNpb25UYWdOYW1lKVxuICAgICAgICAgICAgICAudGhlbihjdG9yID0+IG5ldyBjdG9yKHRoaXMuZWxlbWVudCkpXG4gICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICAgIC8vIFdvcmsgYXJvdW5kIHByZXN1Ym1pdCByZXN0cmljdGlvbnMuXG4gICAgICAgICAgICAgICAgY29uc3QgVEFHID0gdGhpcy5lbGVtZW50LnRhZ05hbWU7XG4gICAgICAgICAgICAgICAgLy8gUmVwb3J0IGVycm9yIGFuZCBmYWxsYmFjayB0byAzcFxuICAgICAgICAgICAgICAgIHRoaXMudXNlcigpLmVycm9yKFxuICAgICAgICAgICAgICAgICAgICBUQUcsICdVbmFibGUgdG8gbG9hZCBhZCBpbXBsZW1lbnRhdGlvbiBmb3IgdHlwZSAnLFxuICAgICAgICAgICAgICAgICAgICB0eXBlLCAnLCBmYWxsaW5nIGJhY2sgdG8gM3AsIGVycm9yOiAnLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBbXBBZDNQSW1wbCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cblxuQU1QLmV4dGVuc2lvbignYW1wLWFkJywgJzAuMScsIEFNUCA9PiB7XG4gIEFNUC5yZWdpc3RlckVsZW1lbnQoJ2FtcC1hZCcsIEFtcEFkLCBDU1MpO1xuICBBTVAucmVnaXN0ZXJFbGVtZW50KCdhbXAtZW1iZWQnLCBBbXBBZCk7XG59KTtcbiIsIi8qIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtEZWZlcnJlZH0gZnJvbSAnLi4vLi4vLi4vc3JjL3V0aWxzL3Byb21pc2UnO1xuaW1wb3J0IHtTZXJ2aWNlc30gZnJvbSAnLi4vLi4vLi4vc3JjL3NlcnZpY2VzJztcbmltcG9ydCB7dXNlcn0gZnJvbSAnLi4vLi4vLi4vc3JjL2xvZyc7XG5cbi8qKlxuICogU3RvcmUgbG9hZGluZyBhZHMgaW5mbyB3aXRoaW4gd2luZG93IHRvIGVuc3VyZSBpdCBjYW4gYmUgcHJvcGVybHkgc3RvcmVkXG4gKiBhY3Jvc3Mgc2VwYXJhdGVseSBjb21waWxlZCBiaW5hcmllcyB0aGF0IHNoYXJlIGxvYWQgdGhyb3R0bGluZy5cbiAqIEBjb25zdCBJRCBvZiB3aW5kb3cgdmFyaWFibGUgdXNlZCB0byB0cmFjayAzcCBhZHMgd2FpdGluZyB0byBsb2FkLlxuICovXG5jb25zdCBMT0FESU5HX0FEU19XSU5fSURfID0gJzNwbGEnO1xuXG4vKiogQHByaXZhdGUgez9Qcm9taXNlfSByZXNvbHZlcyB3aGVuIG5vIDNwIHRocm90dGxlICovXG5sZXQgdGhyb3R0bGVQcm9taXNlXyA9IG51bGw7XG4vKiogQHByaXZhdGUgez9GdW5jdGlvbn0gcmVzb2x2ZXIgZm9yIHRocm90dGxlIHByb21pc2UgKi9cbmxldCB0aHJvdHRsZVByb21pc2VSZXNvbHZlcl8gPSBudWxsO1xuXG4vKipcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIDNwIGlzIGN1cnJlbnRseSB0aHJvdHRsZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpczNwVGhyb3R0bGVkKHdpbikge1xuICByZXR1cm4gISF3aW5bTE9BRElOR19BRFNfV0lOX0lEX107XG59XG5cbi8qKiBAcmV0dXJuIHshUHJvbWlzZX0gcmVzb2x2ZXMgd2hlbiBubyAzcCB0aHJvdHRsZSAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdhaXRGb3IzcFRocm90dGxlKCkge1xuICByZXR1cm4gdGhyb3R0bGVQcm9taXNlXyB8fCBQcm9taXNlLnJlc29sdmUoKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcmV0dXJuIHs/bnVtYmVyfSBudW1iZXIgaWYgZXhwbGljaXQgdmFsdWUgc2hvdWxkIGJlIHVzZWQgb3RoZXJ3aXNlIHN1cGVyXG4gKiAgICBkZWZhdWx0IHNob3VsZCBiZSB1c2VkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QW1wQWRSZW5kZXJPdXRzaWRlVmlld3BvcnQoZWxlbWVudCkge1xuICBjb25zdCByYXdWYWx1ZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWxvYWRpbmctc3RyYXRlZ3knKTtcbiAgaWYgKHJhd1ZhbHVlID09IG51bGwpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICAvLyBBZCBvcHRzIGludG8gbGF6aWVyIGxvYWRpbmcgc3RyYXRlZ3kgd2hlcmUgd2Ugb25seSBsb2FkIGFkcyB0aGF0IGFyZVxuICAvLyBhdCBjbG9zZXIgZ2l2ZW4gbnVtYmVyIG9mIHZpZXdwb3J0cyBhd2F5LlxuICBpZiAocmF3VmFsdWUgPT0gJ3ByZWZlci12aWV3YWJpbGl0eS1vdmVyLXZpZXdzJyB8fCByYXdWYWx1ZSA9PSAnJykge1xuICAgIHJldHVybiAxLjI1O1xuICB9XG4gIGNvbnN0IGVycm9yTWVzc2FnZSA9XG4gICAgICAnVmFsdWUgb2YgZGF0YS1sb2FkaW5nLXN0cmF0ZWd5IHNob3VsZCBiZSBhIGZsb2F0IG51bWJlciBpbiByYW5nZSAnICtcbiAgICAgICdvZiBbMCwgM10sIGJ1dCBnb3QgJyArIHJhd1ZhbHVlO1xuICBjb25zdCB2aWV3cG9ydE51bWJlciA9XG4gICAgICB1c2VyKCkuYXNzZXJ0TnVtYmVyKHBhcnNlRmxvYXQocmF3VmFsdWUpLCBlcnJvck1lc3NhZ2UpO1xuICB1c2VyKCkuYXNzZXJ0KHZpZXdwb3J0TnVtYmVyID49IDAgJiYgdmlld3BvcnROdW1iZXIgPD0gMywgZXJyb3JNZXNzYWdlKTtcbiAgcmV0dXJuIHZpZXdwb3J0TnVtYmVyO1xufVxuXG4vKipcbiAqIEluY3JlbWVudHMgbG9hZGluZyBhZHMgY291bnQgZm9yIHRocm90dGxpbmcuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHshUHJvbWlzZT19IG9wdF9sb2FkaW5nUHJvbWlzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5jcmVtZW50TG9hZGluZ0Fkcyh3aW4sIG9wdF9sb2FkaW5nUHJvbWlzZSkge1xuICBpZiAod2luW0xPQURJTkdfQURTX1dJTl9JRF9dID09PSB1bmRlZmluZWQpIHtcbiAgICB3aW5bTE9BRElOR19BRFNfV0lOX0lEX10gPSAwO1xuICB9XG4gIHdpbltMT0FESU5HX0FEU19XSU5fSURfXSsrO1xuXG4gIGlmICghdGhyb3R0bGVQcm9taXNlXykge1xuICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XG4gICAgdGhyb3R0bGVQcm9taXNlXyA9IGRlZmVycmVkLnByb21pc2U7XG4gICAgdGhyb3R0bGVQcm9taXNlUmVzb2x2ZXJfID0gZGVmZXJyZWQucmVzb2x2ZTtcbiAgfVxuXG4gIFNlcnZpY2VzLnRpbWVyRm9yKHdpbilcbiAgICAgIC50aW1lb3V0UHJvbWlzZSgxMDAwLCBvcHRfbG9hZGluZ1Byb21pc2UpXG4gICAgICAuY2F0Y2goKCkgPT4ge30pXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGlmICghLS13aW5bTE9BRElOR19BRFNfV0lOX0lEX10pIHtcbiAgICAgICAgICB0aHJvdHRsZVByb21pc2VSZXNvbHZlcl8oKTtcbiAgICAgICAgICB0aHJvdHRsZVByb21pc2VfID0gbnVsbDtcbiAgICAgICAgICB0aHJvdHRsZVByb21pc2VSZXNvbHZlcl8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9KTtcbn1cbiIsIi8qIVxuXG5Db3B5cmlnaHQgKEMpIDIwMTQtMjAxNiBieSBBbmRyZWEgR2lhbW1hcmNoaSAtIEBXZWJSZWZsZWN0aW9uXG5cblBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbm9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbmluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbnRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbmNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbmFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG5JTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbkZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbk9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cblRIRSBTT0ZUV0FSRS5cblxuKi9cbi8vIGdsb2JhbCB3aW5kb3cgT2JqZWN0XG4vLyBvcHRpb25hbCBwb2x5ZmlsbCBpbmZvXG4vLyAgICAnYXV0bycgdXNlZCBieSBkZWZhdWx0LCBldmVyeXRoaW5nIGlzIGZlYXR1cmUgZGV0ZWN0ZWRcbi8vICAgICdmb3JjZScgdXNlIHRoZSBwb2x5ZmlsbCBldmVuIGlmIG5vdCBmdWxseSBuZWVkZWRcbmZ1bmN0aW9uIGluc3RhbGxDdXN0b21FbGVtZW50cyh3aW5kb3csIHBvbHlmaWxsKSB7J3VzZSBzdHJpY3QnO1xuXG4gIC8vIERPIE5PVCBVU0UgVEhJUyBGSUxFIERJUkVDVExZLCBJVCBXT04nVCBXT1JLXG4gIC8vIFRISVMgSVMgQSBQUk9KRUNUIEJBU0VEIE9OIEEgQlVJTEQgU1lTVEVNXG4gIC8vIFRISVMgRklMRSBJUyBKVVNUIFdSQVBQRUQgVVAgUkVTVUxUSU5HIElOXG4gIC8vIGJ1aWxkL2RvY3VtZW50LXJlZ2lzdGVyLWVsZW1lbnQubm9kZS5qc1xuXG4gIHZhclxuICAgIGRvY3VtZW50ID0gd2luZG93LmRvY3VtZW50LFxuICAgIE9iamVjdCA9IHdpbmRvdy5PYmplY3RcbiAgO1xuXG4gIHZhciBodG1sQ2xhc3MgPSAoZnVuY3Rpb24gKGluZm8pIHtcbiAgICAvLyAoQykgQW5kcmVhIEdpYW1tYXJjaGkgLSBAV2ViUmVmbGVjdGlvbiAtIE1JVCBTdHlsZVxuICAgIHZhclxuICAgICAgY2F0Y2hDbGFzcyA9IC9eW0EtWl0rW2Etel0vLFxuICAgICAgZmlsdGVyQnkgPSBmdW5jdGlvbiAocmUpIHtcbiAgICAgICAgdmFyIGFyciA9IFtdLCB0YWc7XG4gICAgICAgIGZvciAodGFnIGluIHJlZ2lzdGVyKSB7XG4gICAgICAgICAgaWYgKHJlLnRlc3QodGFnKSkgYXJyLnB1c2godGFnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJyO1xuICAgICAgfSxcbiAgICAgIGFkZCA9IGZ1bmN0aW9uIChDbGFzcywgdGFnKSB7XG4gICAgICAgIHRhZyA9IHRhZy50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBpZiAoISh0YWcgaW4gcmVnaXN0ZXIpKSB7XG4gICAgICAgICAgcmVnaXN0ZXJbQ2xhc3NdID0gKHJlZ2lzdGVyW0NsYXNzXSB8fCBbXSkuY29uY2F0KHRhZyk7XG4gICAgICAgICAgcmVnaXN0ZXJbdGFnXSA9IChyZWdpc3Rlclt0YWcudG9VcHBlckNhc2UoKV0gPSBDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICByZWdpc3RlciA9IChPYmplY3QuY3JlYXRlIHx8IE9iamVjdCkobnVsbCksXG4gICAgICBodG1sQ2xhc3MgPSB7fSxcbiAgICAgIGksIHNlY3Rpb24sIHRhZ3MsIENsYXNzXG4gICAgO1xuICAgIGZvciAoc2VjdGlvbiBpbiBpbmZvKSB7XG4gICAgICBmb3IgKENsYXNzIGluIGluZm9bc2VjdGlvbl0pIHtcbiAgICAgICAgdGFncyA9IGluZm9bc2VjdGlvbl1bQ2xhc3NdO1xuICAgICAgICByZWdpc3RlcltDbGFzc10gPSB0YWdzO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGFncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHJlZ2lzdGVyW3RhZ3NbaV0udG9Mb3dlckNhc2UoKV0gPVxuICAgICAgICAgIHJlZ2lzdGVyW3RhZ3NbaV0udG9VcHBlckNhc2UoKV0gPSBDbGFzcztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBodG1sQ2xhc3MuZ2V0ID0gZnVuY3Rpb24gZ2V0KHRhZ09yQ2xhc3MpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgdGFnT3JDbGFzcyA9PT0gJ3N0cmluZycgP1xuICAgICAgICAocmVnaXN0ZXJbdGFnT3JDbGFzc10gfHwgKGNhdGNoQ2xhc3MudGVzdCh0YWdPckNsYXNzKSA/IFtdIDogJycpKSA6XG4gICAgICAgIGZpbHRlckJ5KHRhZ09yQ2xhc3MpO1xuICAgIH07XG4gICAgaHRtbENsYXNzLnNldCA9IGZ1bmN0aW9uIHNldCh0YWcsIENsYXNzKSB7XG4gICAgICByZXR1cm4gKGNhdGNoQ2xhc3MudGVzdCh0YWcpID9cbiAgICAgICAgYWRkKHRhZywgQ2xhc3MpIDpcbiAgICAgICAgYWRkKENsYXNzLCB0YWcpXG4gICAgICApLCBodG1sQ2xhc3M7XG4gICAgfTtcbiAgICByZXR1cm4gaHRtbENsYXNzO1xuICB9KHtcbiAgICBcImNvbGxlY3Rpb25zXCI6IHtcbiAgICAgIFwiSFRNTEFsbENvbGxlY3Rpb25cIjogW1xuICAgICAgICBcImFsbFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MQ29sbGVjdGlvblwiOiBbXG4gICAgICAgIFwiZm9ybXNcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEZvcm1Db250cm9sc0NvbGxlY3Rpb25cIjogW1xuICAgICAgICBcImVsZW1lbnRzXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxPcHRpb25zQ29sbGVjdGlvblwiOiBbXG4gICAgICAgIFwib3B0aW9uc1wiXG4gICAgICBdXG4gICAgfSxcbiAgICBcImVsZW1lbnRzXCI6IHtcbiAgICAgIFwiRWxlbWVudFwiOiBbXG4gICAgICAgIFwiZWxlbWVudFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MQW5jaG9yRWxlbWVudFwiOiBbXG4gICAgICAgIFwiYVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MQXBwbGV0RWxlbWVudFwiOiBbXG4gICAgICAgIFwiYXBwbGV0XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxBcmVhRWxlbWVudFwiOiBbXG4gICAgICAgIFwiYXJlYVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MQXR0YWNobWVudEVsZW1lbnRcIjogW1xuICAgICAgICBcImF0dGFjaG1lbnRcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEF1ZGlvRWxlbWVudFwiOiBbXG4gICAgICAgIFwiYXVkaW9cIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEJSRWxlbWVudFwiOiBbXG4gICAgICAgIFwiYnJcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEJhc2VFbGVtZW50XCI6IFtcbiAgICAgICAgXCJiYXNlXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxCb2R5RWxlbWVudFwiOiBbXG4gICAgICAgIFwiYm9keVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MQnV0dG9uRWxlbWVudFwiOiBbXG4gICAgICAgIFwiYnV0dG9uXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxDYW52YXNFbGVtZW50XCI6IFtcbiAgICAgICAgXCJjYW52YXNcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTENvbnRlbnRFbGVtZW50XCI6IFtcbiAgICAgICAgXCJjb250ZW50XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxETGlzdEVsZW1lbnRcIjogW1xuICAgICAgICBcImRsXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxEYXRhRWxlbWVudFwiOiBbXG4gICAgICAgIFwiZGF0YVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRGF0YUxpc3RFbGVtZW50XCI6IFtcbiAgICAgICAgXCJkYXRhbGlzdFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRGV0YWlsc0VsZW1lbnRcIjogW1xuICAgICAgICBcImRldGFpbHNcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTERpYWxvZ0VsZW1lbnRcIjogW1xuICAgICAgICBcImRpYWxvZ1wiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRGlyZWN0b3J5RWxlbWVudFwiOiBbXG4gICAgICAgIFwiZGlyXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxEaXZFbGVtZW50XCI6IFtcbiAgICAgICAgXCJkaXZcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTERvY3VtZW50XCI6IFtcbiAgICAgICAgXCJkb2N1bWVudFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRWxlbWVudFwiOiBbXG4gICAgICAgIFwiZWxlbWVudFwiLFxuICAgICAgICBcImFiYnJcIixcbiAgICAgICAgXCJhZGRyZXNzXCIsXG4gICAgICAgIFwiYXJ0aWNsZVwiLFxuICAgICAgICBcImFzaWRlXCIsXG4gICAgICAgIFwiYlwiLFxuICAgICAgICBcImJkaVwiLFxuICAgICAgICBcImJkb1wiLFxuICAgICAgICBcImNpdGVcIixcbiAgICAgICAgXCJjb2RlXCIsXG4gICAgICAgIFwiY29tbWFuZFwiLFxuICAgICAgICBcImRkXCIsXG4gICAgICAgIFwiZGZuXCIsXG4gICAgICAgIFwiZHRcIixcbiAgICAgICAgXCJlbVwiLFxuICAgICAgICBcImZpZ2NhcHRpb25cIixcbiAgICAgICAgXCJmaWd1cmVcIixcbiAgICAgICAgXCJmb290ZXJcIixcbiAgICAgICAgXCJoZWFkZXJcIixcbiAgICAgICAgXCJpXCIsXG4gICAgICAgIFwia2JkXCIsXG4gICAgICAgIFwibWFya1wiLFxuICAgICAgICBcIm5hdlwiLFxuICAgICAgICBcIm5vc2NyaXB0XCIsXG4gICAgICAgIFwicnBcIixcbiAgICAgICAgXCJydFwiLFxuICAgICAgICBcInJ1YnlcIixcbiAgICAgICAgXCJzXCIsXG4gICAgICAgIFwic2FtcFwiLFxuICAgICAgICBcInNlY3Rpb25cIixcbiAgICAgICAgXCJzbWFsbFwiLFxuICAgICAgICBcInN0cm9uZ1wiLFxuICAgICAgICBcInN1YlwiLFxuICAgICAgICBcInN1bW1hcnlcIixcbiAgICAgICAgXCJzdXBcIixcbiAgICAgICAgXCJ1XCIsXG4gICAgICAgIFwidmFyXCIsXG4gICAgICAgIFwid2JyXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxFbWJlZEVsZW1lbnRcIjogW1xuICAgICAgICBcImVtYmVkXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxGaWVsZFNldEVsZW1lbnRcIjogW1xuICAgICAgICBcImZpZWxkc2V0XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxGb250RWxlbWVudFwiOiBbXG4gICAgICAgIFwiZm9udFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRm9ybUVsZW1lbnRcIjogW1xuICAgICAgICBcImZvcm1cIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEZyYW1lRWxlbWVudFwiOiBbXG4gICAgICAgIFwiZnJhbWVcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEZyYW1lU2V0RWxlbWVudFwiOiBbXG4gICAgICAgIFwiZnJhbWVzZXRcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEhSRWxlbWVudFwiOiBbXG4gICAgICAgIFwiaHJcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEhlYWRFbGVtZW50XCI6IFtcbiAgICAgICAgXCJoZWFkXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxIZWFkaW5nRWxlbWVudFwiOiBbXG4gICAgICAgIFwiaDFcIixcbiAgICAgICAgXCJoMlwiLFxuICAgICAgICBcImgzXCIsXG4gICAgICAgIFwiaDRcIixcbiAgICAgICAgXCJoNVwiLFxuICAgICAgICBcImg2XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxIdG1sRWxlbWVudFwiOiBbXG4gICAgICAgIFwiaHRtbFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MSUZyYW1lRWxlbWVudFwiOiBbXG4gICAgICAgIFwiaWZyYW1lXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxJbWFnZUVsZW1lbnRcIjogW1xuICAgICAgICBcImltZ1wiXG4gICAgICBdLFxuICAgICAgXCJIVE1MSW5wdXRFbGVtZW50XCI6IFtcbiAgICAgICAgXCJpbnB1dFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MS2V5Z2VuRWxlbWVudFwiOiBbXG4gICAgICAgIFwia2V5Z2VuXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxMSUVsZW1lbnRcIjogW1xuICAgICAgICBcImxpXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxMYWJlbEVsZW1lbnRcIjogW1xuICAgICAgICBcImxhYmVsXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxMZWdlbmRFbGVtZW50XCI6IFtcbiAgICAgICAgXCJsZWdlbmRcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTExpbmtFbGVtZW50XCI6IFtcbiAgICAgICAgXCJsaW5rXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxNYXBFbGVtZW50XCI6IFtcbiAgICAgICAgXCJtYXBcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTE1hcnF1ZWVFbGVtZW50XCI6IFtcbiAgICAgICAgXCJtYXJxdWVlXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxNZWRpYUVsZW1lbnRcIjogW1xuICAgICAgICBcIm1lZGlhXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxNZW51RWxlbWVudFwiOiBbXG4gICAgICAgIFwibWVudVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MTWVudUl0ZW1FbGVtZW50XCI6IFtcbiAgICAgICAgXCJtZW51aXRlbVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MTWV0YUVsZW1lbnRcIjogW1xuICAgICAgICBcIm1ldGFcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTE1ldGVyRWxlbWVudFwiOiBbXG4gICAgICAgIFwibWV0ZXJcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTE1vZEVsZW1lbnRcIjogW1xuICAgICAgICBcImRlbFwiLFxuICAgICAgICBcImluc1wiXG4gICAgICBdLFxuICAgICAgXCJIVE1MT0xpc3RFbGVtZW50XCI6IFtcbiAgICAgICAgXCJvbFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MT2JqZWN0RWxlbWVudFwiOiBbXG4gICAgICAgIFwib2JqZWN0XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxPcHRHcm91cEVsZW1lbnRcIjogW1xuICAgICAgICBcIm9wdGdyb3VwXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxPcHRpb25FbGVtZW50XCI6IFtcbiAgICAgICAgXCJvcHRpb25cIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTE91dHB1dEVsZW1lbnRcIjogW1xuICAgICAgICBcIm91dHB1dFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MUGFyYWdyYXBoRWxlbWVudFwiOiBbXG4gICAgICAgIFwicFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MUGFyYW1FbGVtZW50XCI6IFtcbiAgICAgICAgXCJwYXJhbVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MUGljdHVyZUVsZW1lbnRcIjogW1xuICAgICAgICBcInBpY3R1cmVcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTFByZUVsZW1lbnRcIjogW1xuICAgICAgICBcInByZVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MUHJvZ3Jlc3NFbGVtZW50XCI6IFtcbiAgICAgICAgXCJwcm9ncmVzc1wiXG4gICAgICBdLFxuICAgICAgXCJIVE1MUXVvdGVFbGVtZW50XCI6IFtcbiAgICAgICAgXCJibG9ja3F1b3RlXCIsXG4gICAgICAgIFwicVwiLFxuICAgICAgICBcInF1b3RlXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxTY3JpcHRFbGVtZW50XCI6IFtcbiAgICAgICAgXCJzY3JpcHRcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTFNlbGVjdEVsZW1lbnRcIjogW1xuICAgICAgICBcInNlbGVjdFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MU2hhZG93RWxlbWVudFwiOiBbXG4gICAgICAgIFwic2hhZG93XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxTbG90RWxlbWVudFwiOiBbXG4gICAgICAgIFwic2xvdFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MU291cmNlRWxlbWVudFwiOiBbXG4gICAgICAgIFwic291cmNlXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxTcGFuRWxlbWVudFwiOiBbXG4gICAgICAgIFwic3BhblwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MU3R5bGVFbGVtZW50XCI6IFtcbiAgICAgICAgXCJzdHlsZVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVGFibGVDYXB0aW9uRWxlbWVudFwiOiBbXG4gICAgICAgIFwiY2FwdGlvblwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVGFibGVDZWxsRWxlbWVudFwiOiBbXG4gICAgICAgIFwidGRcIixcbiAgICAgICAgXCJ0aFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVGFibGVDb2xFbGVtZW50XCI6IFtcbiAgICAgICAgXCJjb2xcIixcbiAgICAgICAgXCJjb2xncm91cFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVGFibGVFbGVtZW50XCI6IFtcbiAgICAgICAgXCJ0YWJsZVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVGFibGVSb3dFbGVtZW50XCI6IFtcbiAgICAgICAgXCJ0clwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVGFibGVTZWN0aW9uRWxlbWVudFwiOiBbXG4gICAgICAgIFwidGhlYWRcIixcbiAgICAgICAgXCJ0Ym9keVwiLFxuICAgICAgICBcInRmb290XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUZW1wbGF0ZUVsZW1lbnRcIjogW1xuICAgICAgICBcInRlbXBsYXRlXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUZXh0QXJlYUVsZW1lbnRcIjogW1xuICAgICAgICBcInRleHRhcmVhXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUaW1lRWxlbWVudFwiOiBbXG4gICAgICAgIFwidGltZVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVGl0bGVFbGVtZW50XCI6IFtcbiAgICAgICAgXCJ0aXRsZVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVHJhY2tFbGVtZW50XCI6IFtcbiAgICAgICAgXCJ0cmFja1wiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVUxpc3RFbGVtZW50XCI6IFtcbiAgICAgICAgXCJ1bFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVW5rbm93bkVsZW1lbnRcIjogW1xuICAgICAgICBcInVua25vd25cIixcbiAgICAgICAgXCJ2aGdyb3VwdlwiLFxuICAgICAgICBcInZrZXlnZW5cIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTFZpZGVvRWxlbWVudFwiOiBbXG4gICAgICAgIFwidmlkZW9cIlxuICAgICAgXVxuICAgIH0sXG4gICAgXCJub2Rlc1wiOiB7XG4gICAgICBcIkF0dHJcIjogW1xuICAgICAgICBcIm5vZGVcIlxuICAgICAgXSxcbiAgICAgIFwiQXVkaW9cIjogW1xuICAgICAgICBcImF1ZGlvXCJcbiAgICAgIF0sXG4gICAgICBcIkNEQVRBU2VjdGlvblwiOiBbXG4gICAgICAgIFwibm9kZVwiXG4gICAgICBdLFxuICAgICAgXCJDaGFyYWN0ZXJEYXRhXCI6IFtcbiAgICAgICAgXCJub2RlXCJcbiAgICAgIF0sXG4gICAgICBcIkNvbW1lbnRcIjogW1xuICAgICAgICBcIiNjb21tZW50XCJcbiAgICAgIF0sXG4gICAgICBcIkRvY3VtZW50XCI6IFtcbiAgICAgICAgXCIjZG9jdW1lbnRcIlxuICAgICAgXSxcbiAgICAgIFwiRG9jdW1lbnRGcmFnbWVudFwiOiBbXG4gICAgICAgIFwiI2RvY3VtZW50LWZyYWdtZW50XCJcbiAgICAgIF0sXG4gICAgICBcIkRvY3VtZW50VHlwZVwiOiBbXG4gICAgICAgIFwibm9kZVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRG9jdW1lbnRcIjogW1xuICAgICAgICBcIiNkb2N1bWVudFwiXG4gICAgICBdLFxuICAgICAgXCJJbWFnZVwiOiBbXG4gICAgICAgIFwiaW1nXCJcbiAgICAgIF0sXG4gICAgICBcIk9wdGlvblwiOiBbXG4gICAgICAgIFwib3B0aW9uXCJcbiAgICAgIF0sXG4gICAgICBcIlByb2Nlc3NpbmdJbnN0cnVjdGlvblwiOiBbXG4gICAgICAgIFwibm9kZVwiXG4gICAgICBdLFxuICAgICAgXCJTaGFkb3dSb290XCI6IFtcbiAgICAgICAgXCIjc2hhZG93LXJvb3RcIlxuICAgICAgXSxcbiAgICAgIFwiVGV4dFwiOiBbXG4gICAgICAgIFwiI3RleHRcIlxuICAgICAgXSxcbiAgICAgIFwiWE1MRG9jdW1lbnRcIjogW1xuICAgICAgICBcInhtbFwiXG4gICAgICBdXG4gICAgfVxuICB9KSk7XG4gIFxuICBcbiAgICBcbiAgLy8gcGFzc2VkIGF0IHJ1bnRpbWUsIGNvbmZpZ3VyYWJsZVxuICAvLyB2aWEgbm9kZWpzIG1vZHVsZVxuICBpZiAoIXBvbHlmaWxsKSBwb2x5ZmlsbCA9ICdhdXRvJztcbiAgXG4gIHZhclxuICAgIC8vIFYwIHBvbHlmaWxsIGVudHJ5XG4gICAgUkVHSVNURVJfRUxFTUVOVCA9ICdyZWdpc3RlckVsZW1lbnQnLFxuICBcbiAgICAvLyBJRSA8IDExIG9ubHkgKyBvbGQgV2ViS2l0IGZvciBhdHRyaWJ1dGVzICsgZmVhdHVyZSBkZXRlY3Rpb25cbiAgICBFWFBBTkRPX1VJRCA9ICdfXycgKyBSRUdJU1RFUl9FTEVNRU5UICsgKHdpbmRvdy5NYXRoLnJhbmRvbSgpICogMTBlNCA+PiAwKSxcbiAgXG4gICAgLy8gc2hvcnRjdXRzIGFuZCBjb3N0YW50c1xuICAgIEFERF9FVkVOVF9MSVNURU5FUiA9ICdhZGRFdmVudExpc3RlbmVyJyxcbiAgICBBVFRBQ0hFRCA9ICdhdHRhY2hlZCcsXG4gICAgQ0FMTEJBQ0sgPSAnQ2FsbGJhY2snLFxuICAgIERFVEFDSEVEID0gJ2RldGFjaGVkJyxcbiAgICBFWFRFTkRTID0gJ2V4dGVuZHMnLFxuICBcbiAgICBBVFRSSUJVVEVfQ0hBTkdFRF9DQUxMQkFDSyA9ICdhdHRyaWJ1dGVDaGFuZ2VkJyArIENBTExCQUNLLFxuICAgIEFUVEFDSEVEX0NBTExCQUNLID0gQVRUQUNIRUQgKyBDQUxMQkFDSyxcbiAgICBDT05ORUNURURfQ0FMTEJBQ0sgPSAnY29ubmVjdGVkJyArIENBTExCQUNLLFxuICAgIERJU0NPTk5FQ1RFRF9DQUxMQkFDSyA9ICdkaXNjb25uZWN0ZWQnICsgQ0FMTEJBQ0ssXG4gICAgQ1JFQVRFRF9DQUxMQkFDSyA9ICdjcmVhdGVkJyArIENBTExCQUNLLFxuICAgIERFVEFDSEVEX0NBTExCQUNLID0gREVUQUNIRUQgKyBDQUxMQkFDSyxcbiAgXG4gICAgQURESVRJT04gPSAnQURESVRJT04nLFxuICAgIE1PRElGSUNBVElPTiA9ICdNT0RJRklDQVRJT04nLFxuICAgIFJFTU9WQUwgPSAnUkVNT1ZBTCcsXG4gIFxuICAgIERPTV9BVFRSX01PRElGSUVEID0gJ0RPTUF0dHJNb2RpZmllZCcsXG4gICAgRE9NX0NPTlRFTlRfTE9BREVEID0gJ0RPTUNvbnRlbnRMb2FkZWQnLFxuICAgIERPTV9TVUJUUkVFX01PRElGSUVEID0gJ0RPTVN1YnRyZWVNb2RpZmllZCcsXG4gIFxuICAgIFBSRUZJWF9UQUcgPSAnPCcsXG4gICAgUFJFRklYX0lTID0gJz0nLFxuICBcbiAgICAvLyB2YWxpZCBhbmQgaW52YWxpZCBub2RlIG5hbWVzXG4gICAgdmFsaWROYW1lID0gL15bQS1aXVtBLVowLTldKig/Oi1bQS1aMC05XSspKyQvLFxuICAgIGludmFsaWROYW1lcyA9IFtcbiAgICAgICdBTk5PVEFUSU9OLVhNTCcsXG4gICAgICAnQ09MT1ItUFJPRklMRScsXG4gICAgICAnRk9OVC1GQUNFJyxcbiAgICAgICdGT05ULUZBQ0UtU1JDJyxcbiAgICAgICdGT05ULUZBQ0UtVVJJJyxcbiAgICAgICdGT05ULUZBQ0UtRk9STUFUJyxcbiAgICAgICdGT05ULUZBQ0UtTkFNRScsXG4gICAgICAnTUlTU0lORy1HTFlQSCdcbiAgICBdLFxuICBcbiAgICAvLyByZWdpc3RlcmVkIHR5cGVzIGFuZCB0aGVpciBwcm90b3R5cGVzXG4gICAgdHlwZXMgPSBbXSxcbiAgICBwcm90b3MgPSBbXSxcbiAgXG4gICAgLy8gdG8gcXVlcnkgc3Vibm9kZXNcbiAgICBxdWVyeSA9ICcnLFxuICBcbiAgICAvLyBodG1sIHNob3J0Y3V0IHVzZWQgdG8gZmVhdHVyZSBkZXRlY3RcbiAgICBkb2N1bWVudEVsZW1lbnQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsXG4gIFxuICAgIC8vIEVTNSBpbmxpbmUgaGVscGVycyB8fCBiYXNpYyBwYXRjaGVzXG4gICAgaW5kZXhPZiA9IHR5cGVzLmluZGV4T2YgfHwgZnVuY3Rpb24gKHYpIHtcbiAgICAgIGZvcih2YXIgaSA9IHRoaXMubGVuZ3RoOyBpLS0gJiYgdGhpc1tpXSAhPT0gdjspe31cbiAgICAgIHJldHVybiBpO1xuICAgIH0sXG4gIFxuICAgIC8vIG90aGVyIGhlbHBlcnMgLyBzaG9ydGN1dHNcbiAgICBPUCA9IE9iamVjdC5wcm90b3R5cGUsXG4gICAgaE9QID0gT1AuaGFzT3duUHJvcGVydHksXG4gICAgaVBPID0gT1AuaXNQcm90b3R5cGVPZixcbiAgXG4gICAgZGVmaW5lUHJvcGVydHkgPSBPYmplY3QuZGVmaW5lUHJvcGVydHksXG4gICAgZW1wdHkgPSBbXSxcbiAgICBnT1BEID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcixcbiAgICBnT1BOID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMsXG4gICAgZ1BPID0gT2JqZWN0LmdldFByb3RvdHlwZU9mLFxuICAgIHNQTyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZixcbiAgXG4gICAgLy8ganNoaW50IHByb3RvOiB0cnVlXG4gICAgaGFzUHJvdG8gPSAhIU9iamVjdC5fX3Byb3RvX18sXG4gIFxuICAgIC8vIFYxIGhlbHBlcnNcbiAgICBmaXhHZXRDbGFzcyA9IGZhbHNlLFxuICAgIERSRUNFVjEgPSAnX19kcmVDRXYxJyxcbiAgICBjdXN0b21FbGVtZW50cyA9IHdpbmRvdy5jdXN0b21FbGVtZW50cyxcbiAgICB1c2FibGVDdXN0b21FbGVtZW50cyA9IHBvbHlmaWxsICE9PSAnZm9yY2UnICYmICEhKFxuICAgICAgY3VzdG9tRWxlbWVudHMgJiZcbiAgICAgIGN1c3RvbUVsZW1lbnRzLmRlZmluZSAmJlxuICAgICAgY3VzdG9tRWxlbWVudHMuZ2V0ICYmXG4gICAgICBjdXN0b21FbGVtZW50cy53aGVuRGVmaW5lZFxuICAgICksXG4gICAgRGljdCA9IE9iamVjdC5jcmVhdGUgfHwgT2JqZWN0LFxuICAgIE1hcCA9IHdpbmRvdy5NYXAgfHwgZnVuY3Rpb24gTWFwKCkge1xuICAgICAgdmFyIEsgPSBbXSwgViA9IFtdLCBpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoaykge1xuICAgICAgICAgIHJldHVybiBWW2luZGV4T2YuY2FsbChLLCBrKV07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKGssIHYpIHtcbiAgICAgICAgICBpID0gaW5kZXhPZi5jYWxsKEssIGspO1xuICAgICAgICAgIGlmIChpIDwgMCkgVltLLnB1c2goaykgLSAxXSA9IHY7XG4gICAgICAgICAgZWxzZSBWW2ldID0gdjtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9LFxuICAgIFByb21pc2UgPSB3aW5kb3cuUHJvbWlzZSB8fCBmdW5jdGlvbiAoZm4pIHtcbiAgICAgIHZhclxuICAgICAgICBub3RpZnkgPSBbXSxcbiAgICAgICAgZG9uZSA9IGZhbHNlLFxuICAgICAgICBwID0ge1xuICAgICAgICAgICdjYXRjaCc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBwO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgJ3RoZW4nOiBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgIG5vdGlmeS5wdXNoKGNiKTtcbiAgICAgICAgICAgIGlmIChkb25lKSBzZXRUaW1lb3V0KHJlc29sdmUsIDEpO1xuICAgICAgICAgICAgcmV0dXJuIHA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICA7XG4gICAgICBmdW5jdGlvbiByZXNvbHZlKHZhbHVlKSB7XG4gICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgICB3aGlsZSAobm90aWZ5Lmxlbmd0aCkgbm90aWZ5LnNoaWZ0KCkodmFsdWUpO1xuICAgICAgfVxuICAgICAgZm4ocmVzb2x2ZSk7XG4gICAgICByZXR1cm4gcDtcbiAgICB9LFxuICAgIGp1c3RDcmVhdGVkID0gZmFsc2UsXG4gICAgY29uc3RydWN0b3JzID0gRGljdChudWxsKSxcbiAgICB3YWl0aW5nTGlzdCA9IERpY3QobnVsbCksXG4gICAgbm9kZU5hbWVzID0gbmV3IE1hcCgpLFxuICAgIHNlY29uZEFyZ3VtZW50ID0gZnVuY3Rpb24gKGlzKSB7XG4gICAgICByZXR1cm4gaXMudG9Mb3dlckNhc2UoKTtcbiAgICB9LFxuICBcbiAgICAvLyB1c2VkIHRvIGNyZWF0ZSB1bmlxdWUgaW5zdGFuY2VzXG4gICAgY3JlYXRlID0gT2JqZWN0LmNyZWF0ZSB8fCBmdW5jdGlvbiBCcmlkZ2UocHJvdG8pIHtcbiAgICAgIC8vIHNpbGx5IGJyb2tlbiBwb2x5ZmlsbCBwcm9iYWJseSBldmVyIHVzZWQgYnV0IHNob3J0IGVub3VnaCB0byB3b3JrXG4gICAgICByZXR1cm4gcHJvdG8gPyAoKEJyaWRnZS5wcm90b3R5cGUgPSBwcm90byksIG5ldyBCcmlkZ2UoKSkgOiB0aGlzO1xuICAgIH0sXG4gIFxuICAgIC8vIHdpbGwgc2V0IHRoZSBwcm90b3R5cGUgaWYgcG9zc2libGVcbiAgICAvLyBvciBjb3B5IG92ZXIgYWxsIHByb3BlcnRpZXNcbiAgICBzZXRQcm90b3R5cGUgPSBzUE8gfHwgKFxuICAgICAgaGFzUHJvdG8gP1xuICAgICAgICBmdW5jdGlvbiAobywgcCkge1xuICAgICAgICAgIG8uX19wcm90b19fID0gcDtcbiAgICAgICAgICByZXR1cm4gbztcbiAgICAgICAgfSA6IChcbiAgICAgIChnT1BOICYmIGdPUEQpID9cbiAgICAgICAgKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgZnVuY3Rpb24gc2V0UHJvcGVydGllcyhvLCBwKSB7XG4gICAgICAgICAgICBmb3IgKHZhclxuICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgIG5hbWVzID0gZ09QTihwKSxcbiAgICAgICAgICAgICAgaSA9IDAsIGxlbmd0aCA9IG5hbWVzLmxlbmd0aDtcbiAgICAgICAgICAgICAgaSA8IGxlbmd0aDsgaSsrXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAga2V5ID0gbmFtZXNbaV07XG4gICAgICAgICAgICAgIGlmICghaE9QLmNhbGwobywga2V5KSkge1xuICAgICAgICAgICAgICAgIGRlZmluZVByb3BlcnR5KG8sIGtleSwgZ09QRChwLCBrZXkpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG8sIHApIHtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgc2V0UHJvcGVydGllcyhvLCBwKTtcbiAgICAgICAgICAgIH0gd2hpbGUgKChwID0gZ1BPKHApKSAmJiAhaVBPLmNhbGwocCwgbykpO1xuICAgICAgICAgICAgcmV0dXJuIG87XG4gICAgICAgICAgfTtcbiAgICAgICAgfSgpKSA6XG4gICAgICAgIGZ1bmN0aW9uIChvLCBwKSB7XG4gICAgICAgICAgZm9yICh2YXIga2V5IGluIHApIHtcbiAgICAgICAgICAgIG9ba2V5XSA9IHBba2V5XTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG87XG4gICAgICAgIH1cbiAgICApKSxcbiAgXG4gICAgLy8gRE9NIHNob3J0Y3V0cyBhbmQgaGVscGVycywgaWYgYW55XG4gIFxuICAgIE11dGF0aW9uT2JzZXJ2ZXIgPSB3aW5kb3cuTXV0YXRpb25PYnNlcnZlciB8fFxuICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuV2ViS2l0TXV0YXRpb25PYnNlcnZlcixcbiAgXG4gICAgSFRNTEVsZW1lbnRQcm90b3R5cGUgPSAoXG4gICAgICB3aW5kb3cuSFRNTEVsZW1lbnQgfHxcbiAgICAgIHdpbmRvdy5FbGVtZW50IHx8XG4gICAgICB3aW5kb3cuTm9kZVxuICAgICkucHJvdG90eXBlLFxuICBcbiAgICBJRTggPSAhaVBPLmNhbGwoSFRNTEVsZW1lbnRQcm90b3R5cGUsIGRvY3VtZW50RWxlbWVudCksXG4gIFxuICAgIHNhZmVQcm9wZXJ0eSA9IElFOCA/IGZ1bmN0aW9uIChvLCBrLCBkKSB7XG4gICAgICBvW2tdID0gZC52YWx1ZTtcbiAgICAgIHJldHVybiBvO1xuICAgIH0gOiBkZWZpbmVQcm9wZXJ0eSxcbiAgXG4gICAgaXNWYWxpZE5vZGUgPSBJRTggP1xuICAgICAgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUubm9kZVR5cGUgPT09IDE7XG4gICAgICB9IDpcbiAgICAgIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIHJldHVybiBpUE8uY2FsbChIVE1MRWxlbWVudFByb3RvdHlwZSwgbm9kZSk7XG4gICAgICB9LFxuICBcbiAgICB0YXJnZXRzID0gSUU4ICYmIFtdLFxuICBcbiAgICBhdHRhY2hTaGFkb3cgPSBIVE1MRWxlbWVudFByb3RvdHlwZS5hdHRhY2hTaGFkb3csXG4gICAgY2xvbmVOb2RlID0gSFRNTEVsZW1lbnRQcm90b3R5cGUuY2xvbmVOb2RlLFxuICAgIGRpc3BhdGNoRXZlbnQgPSBIVE1MRWxlbWVudFByb3RvdHlwZS5kaXNwYXRjaEV2ZW50LFxuICAgIGdldEF0dHJpYnV0ZSA9IEhUTUxFbGVtZW50UHJvdG90eXBlLmdldEF0dHJpYnV0ZSxcbiAgICBoYXNBdHRyaWJ1dGUgPSBIVE1MRWxlbWVudFByb3RvdHlwZS5oYXNBdHRyaWJ1dGUsXG4gICAgcmVtb3ZlQXR0cmlidXRlID0gSFRNTEVsZW1lbnRQcm90b3R5cGUucmVtb3ZlQXR0cmlidXRlLFxuICAgIHNldEF0dHJpYnV0ZSA9IEhUTUxFbGVtZW50UHJvdG90eXBlLnNldEF0dHJpYnV0ZSxcbiAgXG4gICAgLy8gcmVwbGFjZWQgbGF0ZXIgb25cbiAgICBjcmVhdGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCxcbiAgICBwYXRjaGVkQ3JlYXRlRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQsXG4gIFxuICAgIC8vIHNoYXJlZCBvYnNlcnZlciBmb3IgYWxsIGF0dHJpYnV0ZXNcbiAgICBhdHRyaWJ1dGVzT2JzZXJ2ZXIgPSBNdXRhdGlvbk9ic2VydmVyICYmIHtcbiAgICAgIGF0dHJpYnV0ZXM6IHRydWUsXG4gICAgICBjaGFyYWN0ZXJEYXRhOiB0cnVlLFxuICAgICAgYXR0cmlidXRlT2xkVmFsdWU6IHRydWVcbiAgICB9LFxuICBcbiAgICAvLyB1c2VmdWwgdG8gZGV0ZWN0IG9ubHkgaWYgdGhlcmUncyBubyBNdXRhdGlvbk9ic2VydmVyXG4gICAgRE9NQXR0ck1vZGlmaWVkID0gTXV0YXRpb25PYnNlcnZlciB8fCBmdW5jdGlvbihlKSB7XG4gICAgICBkb2VzTm90U3VwcG9ydERPTUF0dHJNb2RpZmllZCA9IGZhbHNlO1xuICAgICAgZG9jdW1lbnRFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgICAgIERPTV9BVFRSX01PRElGSUVELFxuICAgICAgICBET01BdHRyTW9kaWZpZWRcbiAgICAgICk7XG4gICAgfSxcbiAgXG4gICAgLy8gd2lsbCBib3RoIGJlIHVzZWQgdG8gbWFrZSBET01Ob2RlSW5zZXJ0ZWQgYXN5bmNocm9ub3VzXG4gICAgYXNhcFF1ZXVlLFxuICAgIGFzYXBUaW1lciA9IDAsXG4gIFxuICAgIC8vIGludGVybmFsIGZsYWdzXG4gICAgVjAgPSBSRUdJU1RFUl9FTEVNRU5UIGluIGRvY3VtZW50LFxuICAgIHNldExpc3RlbmVyID0gdHJ1ZSxcbiAgICBqdXN0U2V0dXAgPSBmYWxzZSxcbiAgICBkb2VzTm90U3VwcG9ydERPTUF0dHJNb2RpZmllZCA9IHRydWUsXG4gICAgZHJvcERvbUNvbnRlbnRMb2FkZWQgPSB0cnVlLFxuICBcbiAgICAvLyBuZWVkZWQgZm9yIHRoZSBpbm5lckhUTUwgaGVscGVyXG4gICAgbm90RnJvbUlubmVySFRNTEhlbHBlciA9IHRydWUsXG4gIFxuICAgIC8vIG9wdGlvbmFsbHkgZGVmaW5lZCBsYXRlciBvblxuICAgIG9uU3VidHJlZU1vZGlmaWVkLFxuICAgIGNhbGxET01BdHRyTW9kaWZpZWQsXG4gICAgZ2V0QXR0cmlidXRlc01pcnJvcixcbiAgICBvYnNlcnZlcixcbiAgICBvYnNlcnZlLFxuICBcbiAgICAvLyBiYXNlZCBvbiBzZXR0aW5nIHByb3RvdHlwZSBjYXBhYmlsaXR5XG4gICAgLy8gd2lsbCBjaGVjayBwcm90byBvciB0aGUgZXhwYW5kbyBhdHRyaWJ1dGVcbiAgICAvLyBpbiBvcmRlciB0byBzZXR1cCB0aGUgbm9kZSBvbmNlXG4gICAgcGF0Y2hJZk5vdEFscmVhZHksXG4gICAgcGF0Y2hcbiAgO1xuICBcbiAgLy8gb25seSBpZiBuZWVkZWRcbiAgaWYgKCFWMCkge1xuICBcbiAgICBpZiAoc1BPIHx8IGhhc1Byb3RvKSB7XG4gICAgICAgIHBhdGNoSWZOb3RBbHJlYWR5ID0gZnVuY3Rpb24gKG5vZGUsIHByb3RvKSB7XG4gICAgICAgICAgaWYgKCFpUE8uY2FsbChwcm90bywgbm9kZSkpIHtcbiAgICAgICAgICAgIHNldHVwTm9kZShub2RlLCBwcm90byk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBwYXRjaCA9IHNldHVwTm9kZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBwYXRjaElmTm90QWxyZWFkeSA9IGZ1bmN0aW9uIChub2RlLCBwcm90bykge1xuICAgICAgICAgIGlmICghbm9kZVtFWFBBTkRPX1VJRF0pIHtcbiAgICAgICAgICAgIG5vZGVbRVhQQU5ET19VSURdID0gT2JqZWN0KHRydWUpO1xuICAgICAgICAgICAgc2V0dXBOb2RlKG5vZGUsIHByb3RvKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHBhdGNoID0gcGF0Y2hJZk5vdEFscmVhZHk7XG4gICAgfVxuICBcbiAgICBpZiAoSUU4KSB7XG4gICAgICBkb2VzTm90U3VwcG9ydERPTUF0dHJNb2RpZmllZCA9IGZhbHNlO1xuICAgICAgKGZ1bmN0aW9uICgpe1xuICAgICAgICB2YXJcbiAgICAgICAgICBkZXNjcmlwdG9yID0gZ09QRChIVE1MRWxlbWVudFByb3RvdHlwZSwgQUREX0VWRU5UX0xJU1RFTkVSKSxcbiAgICAgICAgICBhZGRFdmVudExpc3RlbmVyID0gZGVzY3JpcHRvci52YWx1ZSxcbiAgICAgICAgICBwYXRjaGVkUmVtb3ZlQXR0cmlidXRlID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIHZhciBlID0gbmV3IEN1c3RvbUV2ZW50KERPTV9BVFRSX01PRElGSUVELCB7YnViYmxlczogdHJ1ZX0pO1xuICAgICAgICAgICAgZS5hdHRyTmFtZSA9IG5hbWU7XG4gICAgICAgICAgICBlLnByZXZWYWx1ZSA9IGdldEF0dHJpYnV0ZS5jYWxsKHRoaXMsIG5hbWUpO1xuICAgICAgICAgICAgZS5uZXdWYWx1ZSA9IG51bGw7XG4gICAgICAgICAgICBlW1JFTU9WQUxdID0gZS5hdHRyQ2hhbmdlID0gMjtcbiAgICAgICAgICAgIHJlbW92ZUF0dHJpYnV0ZS5jYWxsKHRoaXMsIG5hbWUpO1xuICAgICAgICAgICAgZGlzcGF0Y2hFdmVudC5jYWxsKHRoaXMsIGUpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgcGF0Y2hlZFNldEF0dHJpYnV0ZSA9IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIGhhZCA9IGhhc0F0dHJpYnV0ZS5jYWxsKHRoaXMsIG5hbWUpLFxuICAgICAgICAgICAgICBvbGQgPSBoYWQgJiYgZ2V0QXR0cmlidXRlLmNhbGwodGhpcywgbmFtZSksXG4gICAgICAgICAgICAgIGUgPSBuZXcgQ3VzdG9tRXZlbnQoRE9NX0FUVFJfTU9ESUZJRUQsIHtidWJibGVzOiB0cnVlfSlcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIHNldEF0dHJpYnV0ZS5jYWxsKHRoaXMsIG5hbWUsIHZhbHVlKTtcbiAgICAgICAgICAgIGUuYXR0ck5hbWUgPSBuYW1lO1xuICAgICAgICAgICAgZS5wcmV2VmFsdWUgPSBoYWQgPyBvbGQgOiBudWxsO1xuICAgICAgICAgICAgZS5uZXdWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgaWYgKGhhZCkge1xuICAgICAgICAgICAgICBlW01PRElGSUNBVElPTl0gPSBlLmF0dHJDaGFuZ2UgPSAxO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZVtBRERJVElPTl0gPSBlLmF0dHJDaGFuZ2UgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGlzcGF0Y2hFdmVudC5jYWxsKHRoaXMsIGUpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgb25Qcm9wZXJ0eUNoYW5nZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAvLyBqc2hpbnQgZXFudWxsOnRydWVcbiAgICAgICAgICAgIHZhclxuICAgICAgICAgICAgICBub2RlID0gZS5jdXJyZW50VGFyZ2V0LFxuICAgICAgICAgICAgICBzdXBlclNlY3JldCA9IG5vZGVbRVhQQU5ET19VSURdLFxuICAgICAgICAgICAgICBwcm9wZXJ0eU5hbWUgPSBlLnByb3BlcnR5TmFtZSxcbiAgICAgICAgICAgICAgZXZlbnRcbiAgICAgICAgICAgIDtcbiAgICAgICAgICAgIGlmIChzdXBlclNlY3JldC5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eU5hbWUpKSB7XG4gICAgICAgICAgICAgIHN1cGVyU2VjcmV0ID0gc3VwZXJTZWNyZXRbcHJvcGVydHlOYW1lXTtcbiAgICAgICAgICAgICAgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoRE9NX0FUVFJfTU9ESUZJRUQsIHtidWJibGVzOiB0cnVlfSk7XG4gICAgICAgICAgICAgIGV2ZW50LmF0dHJOYW1lID0gc3VwZXJTZWNyZXQubmFtZTtcbiAgICAgICAgICAgICAgZXZlbnQucHJldlZhbHVlID0gc3VwZXJTZWNyZXQudmFsdWUgfHwgbnVsbDtcbiAgICAgICAgICAgICAgZXZlbnQubmV3VmFsdWUgPSAoc3VwZXJTZWNyZXQudmFsdWUgPSBub2RlW3Byb3BlcnR5TmFtZV0gfHwgbnVsbCk7XG4gICAgICAgICAgICAgIGlmIChldmVudC5wcmV2VmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGV2ZW50W0FERElUSU9OXSA9IGV2ZW50LmF0dHJDaGFuZ2UgPSAwO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGV2ZW50W01PRElGSUNBVElPTl0gPSBldmVudC5hdHRyQ2hhbmdlID0gMTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBkaXNwYXRjaEV2ZW50LmNhbGwobm9kZSwgZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgO1xuICAgICAgICBkZXNjcmlwdG9yLnZhbHVlID0gZnVuY3Rpb24gKHR5cGUsIGhhbmRsZXIsIGNhcHR1cmUpIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0eXBlID09PSBET01fQVRUUl9NT0RJRklFRCAmJlxuICAgICAgICAgICAgdGhpc1tBVFRSSUJVVEVfQ0hBTkdFRF9DQUxMQkFDS10gJiZcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlICE9PSBwYXRjaGVkU2V0QXR0cmlidXRlXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzW0VYUEFORE9fVUlEXSA9IHtcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ2NsYXNzJyxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5jbGFzc05hbWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlID0gcGF0Y2hlZFNldEF0dHJpYnV0ZTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlID0gcGF0Y2hlZFJlbW92ZUF0dHJpYnV0ZTtcbiAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIuY2FsbCh0aGlzLCAncHJvcGVydHljaGFuZ2UnLCBvblByb3BlcnR5Q2hhbmdlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lci5jYWxsKHRoaXMsIHR5cGUsIGhhbmRsZXIsIGNhcHR1cmUpO1xuICAgICAgICB9O1xuICAgICAgICBkZWZpbmVQcm9wZXJ0eShIVE1MRWxlbWVudFByb3RvdHlwZSwgQUREX0VWRU5UX0xJU1RFTkVSLCBkZXNjcmlwdG9yKTtcbiAgICAgIH0oKSk7XG4gICAgfSBlbHNlIGlmICghTXV0YXRpb25PYnNlcnZlcikge1xuICAgICAgZG9jdW1lbnRFbGVtZW50W0FERF9FVkVOVF9MSVNURU5FUl0oRE9NX0FUVFJfTU9ESUZJRUQsIERPTUF0dHJNb2RpZmllZCk7XG4gICAgICBkb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlKEVYUEFORE9fVUlELCAxKTtcbiAgICAgIGRvY3VtZW50RWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoRVhQQU5ET19VSUQpO1xuICAgICAgaWYgKGRvZXNOb3RTdXBwb3J0RE9NQXR0ck1vZGlmaWVkKSB7XG4gICAgICAgIG9uU3VidHJlZU1vZGlmaWVkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICB2YXJcbiAgICAgICAgICAgIG5vZGUgPSB0aGlzLFxuICAgICAgICAgICAgb2xkQXR0cmlidXRlcyxcbiAgICAgICAgICAgIG5ld0F0dHJpYnV0ZXMsXG4gICAgICAgICAgICBrZXlcbiAgICAgICAgICA7XG4gICAgICAgICAgaWYgKG5vZGUgPT09IGUudGFyZ2V0KSB7XG4gICAgICAgICAgICBvbGRBdHRyaWJ1dGVzID0gbm9kZVtFWFBBTkRPX1VJRF07XG4gICAgICAgICAgICBub2RlW0VYUEFORE9fVUlEXSA9IChuZXdBdHRyaWJ1dGVzID0gZ2V0QXR0cmlidXRlc01pcnJvcihub2RlKSk7XG4gICAgICAgICAgICBmb3IgKGtleSBpbiBuZXdBdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgIGlmICghKGtleSBpbiBvbGRBdHRyaWJ1dGVzKSkge1xuICAgICAgICAgICAgICAgIC8vIGF0dHJpYnV0ZSB3YXMgYWRkZWRcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbERPTUF0dHJNb2RpZmllZChcbiAgICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgICBub2RlLFxuICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgb2xkQXR0cmlidXRlc1trZXldLFxuICAgICAgICAgICAgICAgICAgbmV3QXR0cmlidXRlc1trZXldLFxuICAgICAgICAgICAgICAgICAgQURESVRJT05cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5ld0F0dHJpYnV0ZXNba2V5XSAhPT0gb2xkQXR0cmlidXRlc1trZXldKSB7XG4gICAgICAgICAgICAgICAgLy8gYXR0cmlidXRlIHdhcyBjaGFuZ2VkXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxET01BdHRyTW9kaWZpZWQoXG4gICAgICAgICAgICAgICAgICAxLFxuICAgICAgICAgICAgICAgICAgbm9kZSxcbiAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgIG9sZEF0dHJpYnV0ZXNba2V5XSxcbiAgICAgICAgICAgICAgICAgIG5ld0F0dHJpYnV0ZXNba2V5XSxcbiAgICAgICAgICAgICAgICAgIE1PRElGSUNBVElPTlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNoZWNraW5nIGlmIGl0IGhhcyBiZWVuIHJlbW92ZWRcbiAgICAgICAgICAgIGZvciAoa2V5IGluIG9sZEF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIG5ld0F0dHJpYnV0ZXMpKSB7XG4gICAgICAgICAgICAgICAgLy8gYXR0cmlidXRlIHJlbW92ZWRcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbERPTUF0dHJNb2RpZmllZChcbiAgICAgICAgICAgICAgICAgIDIsXG4gICAgICAgICAgICAgICAgICBub2RlLFxuICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgb2xkQXR0cmlidXRlc1trZXldLFxuICAgICAgICAgICAgICAgICAgbmV3QXR0cmlidXRlc1trZXldLFxuICAgICAgICAgICAgICAgICAgUkVNT1ZBTFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGNhbGxET01BdHRyTW9kaWZpZWQgPSBmdW5jdGlvbiAoXG4gICAgICAgICAgYXR0ckNoYW5nZSxcbiAgICAgICAgICBjdXJyZW50VGFyZ2V0LFxuICAgICAgICAgIGF0dHJOYW1lLFxuICAgICAgICAgIHByZXZWYWx1ZSxcbiAgICAgICAgICBuZXdWYWx1ZSxcbiAgICAgICAgICBhY3Rpb25cbiAgICAgICAgKSB7XG4gICAgICAgICAgdmFyIGUgPSB7XG4gICAgICAgICAgICBhdHRyQ2hhbmdlOiBhdHRyQ2hhbmdlLFxuICAgICAgICAgICAgY3VycmVudFRhcmdldDogY3VycmVudFRhcmdldCxcbiAgICAgICAgICAgIGF0dHJOYW1lOiBhdHRyTmFtZSxcbiAgICAgICAgICAgIHByZXZWYWx1ZTogcHJldlZhbHVlLFxuICAgICAgICAgICAgbmV3VmFsdWU6IG5ld1ZhbHVlXG4gICAgICAgICAgfTtcbiAgICAgICAgICBlW2FjdGlvbl0gPSBhdHRyQ2hhbmdlO1xuICAgICAgICAgIG9uRE9NQXR0ck1vZGlmaWVkKGUpO1xuICAgICAgICB9O1xuICAgICAgICBnZXRBdHRyaWJ1dGVzTWlycm9yID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICBmb3IgKHZhclxuICAgICAgICAgICAgYXR0ciwgbmFtZSxcbiAgICAgICAgICAgIHJlc3VsdCA9IHt9LFxuICAgICAgICAgICAgYXR0cmlidXRlcyA9IG5vZGUuYXR0cmlidXRlcyxcbiAgICAgICAgICAgIGkgPSAwLCBsZW5ndGggPSBhdHRyaWJ1dGVzLmxlbmd0aDtcbiAgICAgICAgICAgIGkgPCBsZW5ndGg7IGkrK1xuICAgICAgICAgICkge1xuICAgICAgICAgICAgYXR0ciA9IGF0dHJpYnV0ZXNbaV07XG4gICAgICAgICAgICBuYW1lID0gYXR0ci5uYW1lO1xuICAgICAgICAgICAgaWYgKG5hbWUgIT09ICdzZXRBdHRyaWJ1dGUnKSB7XG4gICAgICAgICAgICAgIHJlc3VsdFtuYW1lXSA9IGF0dHIudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICBcbiAgICAvLyBzZXQgYXMgZW51bWVyYWJsZSwgd3JpdGFibGUgYW5kIGNvbmZpZ3VyYWJsZVxuICAgIGRvY3VtZW50W1JFR0lTVEVSX0VMRU1FTlRdID0gZnVuY3Rpb24gcmVnaXN0ZXJFbGVtZW50KHR5cGUsIG9wdGlvbnMpIHtcbiAgICAgIHVwcGVyVHlwZSA9IHR5cGUudG9VcHBlckNhc2UoKTtcbiAgICAgIGlmIChzZXRMaXN0ZW5lcikge1xuICAgICAgICAvLyBvbmx5IGZpcnN0IHRpbWUgZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50IGlzIHVzZWRcbiAgICAgICAgLy8gd2UgbmVlZCB0byBzZXQgdGhpcyBsaXN0ZW5lclxuICAgICAgICAvLyBzZXR0aW5nIGl0IGJ5IGRlZmF1bHQgbWlnaHQgc2xvdyBkb3duIGZvciBubyByZWFzb25cbiAgICAgICAgc2V0TGlzdGVuZXIgPSBmYWxzZTtcbiAgICAgICAgaWYgKE11dGF0aW9uT2JzZXJ2ZXIpIHtcbiAgICAgICAgICBvYnNlcnZlciA9IChmdW5jdGlvbihhdHRhY2hlZCwgZGV0YWNoZWQpe1xuICAgICAgICAgICAgZnVuY3Rpb24gY2hlY2tFbUFsbChsaXN0LCBjYWxsYmFjaykge1xuICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gbGlzdC5sZW5ndGg7IGkgPCBsZW5ndGg7IGNhbGxiYWNrKGxpc3RbaSsrXSkpe31cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbiAocmVjb3Jkcykge1xuICAgICAgICAgICAgICBmb3IgKHZhclxuICAgICAgICAgICAgICAgIGN1cnJlbnQsIG5vZGUsIG5ld1ZhbHVlLFxuICAgICAgICAgICAgICAgIGkgPSAwLCBsZW5ndGggPSByZWNvcmRzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSByZWNvcmRzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50LnR5cGUgPT09ICdjaGlsZExpc3QnKSB7XG4gICAgICAgICAgICAgICAgICBjaGVja0VtQWxsKGN1cnJlbnQuYWRkZWROb2RlcywgYXR0YWNoZWQpO1xuICAgICAgICAgICAgICAgICAgY2hlY2tFbUFsbChjdXJyZW50LnJlbW92ZWROb2RlcywgZGV0YWNoZWQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBub2RlID0gY3VycmVudC50YXJnZXQ7XG4gICAgICAgICAgICAgICAgICBpZiAobm90RnJvbUlubmVySFRNTEhlbHBlciAmJlxuICAgICAgICAgICAgICAgICAgICAgIG5vZGVbQVRUUklCVVRFX0NIQU5HRURfQ0FMTEJBQ0tdICYmXG4gICAgICAgICAgICAgICAgICAgICAgY3VycmVudC5hdHRyaWJ1dGVOYW1lICE9PSAnc3R5bGUnKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlID0gZ2V0QXR0cmlidXRlLmNhbGwobm9kZSwgY3VycmVudC5hdHRyaWJ1dGVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlICE9PSBjdXJyZW50Lm9sZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgbm9kZVtBVFRSSUJVVEVfQ0hBTkdFRF9DQUxMQkFDS10oXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50LmF0dHJpYnV0ZU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Lm9sZFZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KGV4ZWN1dGVBY3Rpb24oQVRUQUNIRUQpLCBleGVjdXRlQWN0aW9uKERFVEFDSEVEKSkpO1xuICAgICAgICAgIG9ic2VydmUgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShcbiAgICAgICAgICAgICAgbm9kZSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzdWJ0cmVlOiB0cnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIG9ic2VydmUoZG9jdW1lbnQpO1xuICAgICAgICAgIGlmIChhdHRhY2hTaGFkb3cpIHtcbiAgICAgICAgICAgIEhUTUxFbGVtZW50UHJvdG90eXBlLmF0dGFjaFNoYWRvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG9ic2VydmUoYXR0YWNoU2hhZG93LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXNhcFF1ZXVlID0gW107XG4gICAgICAgICAgZG9jdW1lbnRbQUREX0VWRU5UX0xJU1RFTkVSXSgnRE9NTm9kZUluc2VydGVkJywgb25ET01Ob2RlKEFUVEFDSEVEKSk7XG4gICAgICAgICAgZG9jdW1lbnRbQUREX0VWRU5UX0xJU1RFTkVSXSgnRE9NTm9kZVJlbW92ZWQnLCBvbkRPTU5vZGUoREVUQUNIRUQpKTtcbiAgICAgICAgfVxuICBcbiAgICAgICAgZG9jdW1lbnRbQUREX0VWRU5UX0xJU1RFTkVSXShET01fQ09OVEVOVF9MT0FERUQsIG9uUmVhZHlTdGF0ZUNoYW5nZSk7XG4gICAgICAgIGRvY3VtZW50W0FERF9FVkVOVF9MSVNURU5FUl0oJ3JlYWR5c3RhdGVjaGFuZ2UnLCBvblJlYWR5U3RhdGVDaGFuZ2UpO1xuICBcbiAgICAgICAgSFRNTEVsZW1lbnRQcm90b3R5cGUuY2xvbmVOb2RlID0gZnVuY3Rpb24gKGRlZXApIHtcbiAgICAgICAgICB2YXJcbiAgICAgICAgICAgIG5vZGUgPSBjbG9uZU5vZGUuY2FsbCh0aGlzLCAhIWRlZXApLFxuICAgICAgICAgICAgaSA9IGdldFR5cGVJbmRleChub2RlKVxuICAgICAgICAgIDtcbiAgICAgICAgICBpZiAoLTEgPCBpKSBwYXRjaChub2RlLCBwcm90b3NbaV0pO1xuICAgICAgICAgIGlmIChkZWVwICYmIHF1ZXJ5Lmxlbmd0aCkgbG9vcEFuZFNldHVwKG5vZGUucXVlcnlTZWxlY3RvckFsbChxdWVyeSkpO1xuICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9O1xuICAgICAgfVxuICBcbiAgICAgIGlmIChqdXN0U2V0dXApIHJldHVybiAoanVzdFNldHVwID0gZmFsc2UpO1xuICBcbiAgICAgIGlmICgtMiA8IChcbiAgICAgICAgaW5kZXhPZi5jYWxsKHR5cGVzLCBQUkVGSVhfSVMgKyB1cHBlclR5cGUpICtcbiAgICAgICAgaW5kZXhPZi5jYWxsKHR5cGVzLCBQUkVGSVhfVEFHICsgdXBwZXJUeXBlKVxuICAgICAgKSkge1xuICAgICAgICB0aHJvd1R5cGVFcnJvcih0eXBlKTtcbiAgICAgIH1cbiAgXG4gICAgICBpZiAoIXZhbGlkTmFtZS50ZXN0KHVwcGVyVHlwZSkgfHwgLTEgPCBpbmRleE9mLmNhbGwoaW52YWxpZE5hbWVzLCB1cHBlclR5cGUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHR5cGUgJyArIHR5cGUgKyAnIGlzIGludmFsaWQnKTtcbiAgICAgIH1cbiAgXG4gICAgICB2YXJcbiAgICAgICAgY29uc3RydWN0b3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIGV4dGVuZGluZyA/XG4gICAgICAgICAgICBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5vZGVOYW1lLCB1cHBlclR5cGUpIDpcbiAgICAgICAgICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobm9kZU5hbWUpO1xuICAgICAgICB9LFxuICAgICAgICBvcHQgPSBvcHRpb25zIHx8IE9QLFxuICAgICAgICBleHRlbmRpbmcgPSBoT1AuY2FsbChvcHQsIEVYVEVORFMpLFxuICAgICAgICBub2RlTmFtZSA9IGV4dGVuZGluZyA/IG9wdGlvbnNbRVhURU5EU10udG9VcHBlckNhc2UoKSA6IHVwcGVyVHlwZSxcbiAgICAgICAgdXBwZXJUeXBlLFxuICAgICAgICBpXG4gICAgICA7XG4gIFxuICAgICAgaWYgKGV4dGVuZGluZyAmJiAtMSA8IChcbiAgICAgICAgaW5kZXhPZi5jYWxsKHR5cGVzLCBQUkVGSVhfVEFHICsgbm9kZU5hbWUpXG4gICAgICApKSB7XG4gICAgICAgIHRocm93VHlwZUVycm9yKG5vZGVOYW1lKTtcbiAgICAgIH1cbiAgXG4gICAgICBpID0gdHlwZXMucHVzaCgoZXh0ZW5kaW5nID8gUFJFRklYX0lTIDogUFJFRklYX1RBRykgKyB1cHBlclR5cGUpIC0gMTtcbiAgXG4gICAgICBxdWVyeSA9IHF1ZXJ5LmNvbmNhdChcbiAgICAgICAgcXVlcnkubGVuZ3RoID8gJywnIDogJycsXG4gICAgICAgIGV4dGVuZGluZyA/IG5vZGVOYW1lICsgJ1tpcz1cIicgKyB0eXBlLnRvTG93ZXJDYXNlKCkgKyAnXCJdJyA6IG5vZGVOYW1lXG4gICAgICApO1xuICBcbiAgICAgIGNvbnN0cnVjdG9yLnByb3RvdHlwZSA9IChcbiAgICAgICAgcHJvdG9zW2ldID0gaE9QLmNhbGwob3B0LCAncHJvdG90eXBlJykgP1xuICAgICAgICAgIG9wdC5wcm90b3R5cGUgOlxuICAgICAgICAgIGNyZWF0ZShIVE1MRWxlbWVudFByb3RvdHlwZSlcbiAgICAgICk7XG4gIFxuICAgICAgaWYgKHF1ZXJ5Lmxlbmd0aCkgbG9vcEFuZFZlcmlmeShcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChxdWVyeSksXG4gICAgICAgIEFUVEFDSEVEXG4gICAgICApO1xuICBcbiAgICAgIHJldHVybiBjb25zdHJ1Y3RvcjtcbiAgICB9O1xuICBcbiAgICBkb2N1bWVudC5jcmVhdGVFbGVtZW50ID0gKHBhdGNoZWRDcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24gKGxvY2FsTmFtZSwgdHlwZUV4dGVuc2lvbikge1xuICAgICAgdmFyXG4gICAgICAgIGlzID0gZ2V0SXModHlwZUV4dGVuc2lvbiksXG4gICAgICAgIG5vZGUgPSBpcyA/XG4gICAgICAgICAgY3JlYXRlRWxlbWVudC5jYWxsKGRvY3VtZW50LCBsb2NhbE5hbWUsIHNlY29uZEFyZ3VtZW50KGlzKSkgOlxuICAgICAgICAgIGNyZWF0ZUVsZW1lbnQuY2FsbChkb2N1bWVudCwgbG9jYWxOYW1lKSxcbiAgICAgICAgbmFtZSA9ICcnICsgbG9jYWxOYW1lLFxuICAgICAgICBpID0gaW5kZXhPZi5jYWxsKFxuICAgICAgICAgIHR5cGVzLFxuICAgICAgICAgIChpcyA/IFBSRUZJWF9JUyA6IFBSRUZJWF9UQUcpICtcbiAgICAgICAgICAoaXMgfHwgbmFtZSkudG9VcHBlckNhc2UoKVxuICAgICAgICApLFxuICAgICAgICBzZXR1cCA9IC0xIDwgaVxuICAgICAgO1xuICAgICAgaWYgKGlzKSB7XG4gICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdpcycsIGlzID0gaXMudG9Mb3dlckNhc2UoKSk7XG4gICAgICAgIGlmIChzZXR1cCkge1xuICAgICAgICAgIHNldHVwID0gaXNJblFTQShuYW1lLnRvVXBwZXJDYXNlKCksIGlzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbm90RnJvbUlubmVySFRNTEhlbHBlciA9ICFkb2N1bWVudC5jcmVhdGVFbGVtZW50LmlubmVySFRNTEhlbHBlcjtcbiAgICAgIGlmIChzZXR1cCkgcGF0Y2gobm9kZSwgcHJvdG9zW2ldKTtcbiAgICAgIHJldHVybiBub2RlO1xuICAgIH0pO1xuICBcbiAgfVxuICBcbiAgZnVuY3Rpb24gQVNBUCgpIHtcbiAgICB2YXIgcXVldWUgPSBhc2FwUXVldWUuc3BsaWNlKDAsIGFzYXBRdWV1ZS5sZW5ndGgpO1xuICAgIGFzYXBUaW1lciA9IDA7XG4gICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgcXVldWUuc2hpZnQoKS5jYWxsKFxuICAgICAgICBudWxsLCBxdWV1ZS5zaGlmdCgpXG4gICAgICApO1xuICAgIH1cbiAgfVxuICBcbiAgZnVuY3Rpb24gbG9vcEFuZFZlcmlmeShsaXN0LCBhY3Rpb24pIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gbGlzdC5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmVyaWZ5QW5kU2V0dXBBbmRBY3Rpb24obGlzdFtpXSwgYWN0aW9uKTtcbiAgICB9XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIGxvb3BBbmRTZXR1cChsaXN0KSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGxpc3QubGVuZ3RoLCBub2RlOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIG5vZGUgPSBsaXN0W2ldO1xuICAgICAgcGF0Y2gobm9kZSwgcHJvdG9zW2dldFR5cGVJbmRleChub2RlKV0pO1xuICAgIH1cbiAgfVxuICBcbiAgZnVuY3Rpb24gZXhlY3V0ZUFjdGlvbihhY3Rpb24pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgIGlmIChpc1ZhbGlkTm9kZShub2RlKSkge1xuICAgICAgICB2ZXJpZnlBbmRTZXR1cEFuZEFjdGlvbihub2RlLCBhY3Rpb24pO1xuICAgICAgICBpZiAocXVlcnkubGVuZ3RoKSBsb29wQW5kVmVyaWZ5KFxuICAgICAgICAgIG5vZGUucXVlcnlTZWxlY3RvckFsbChxdWVyeSksXG4gICAgICAgICAgYWN0aW9uXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBcbiAgZnVuY3Rpb24gZ2V0VHlwZUluZGV4KHRhcmdldCkge1xuICAgIHZhclxuICAgICAgaXMgPSBnZXRBdHRyaWJ1dGUuY2FsbCh0YXJnZXQsICdpcycpLFxuICAgICAgbm9kZU5hbWUgPSB0YXJnZXQubm9kZU5hbWUudG9VcHBlckNhc2UoKSxcbiAgICAgIGkgPSBpbmRleE9mLmNhbGwoXG4gICAgICAgIHR5cGVzLFxuICAgICAgICBpcyA/XG4gICAgICAgICAgICBQUkVGSVhfSVMgKyBpcy50b1VwcGVyQ2FzZSgpIDpcbiAgICAgICAgICAgIFBSRUZJWF9UQUcgKyBub2RlTmFtZVxuICAgICAgKVxuICAgIDtcbiAgICByZXR1cm4gaXMgJiYgLTEgPCBpICYmICFpc0luUVNBKG5vZGVOYW1lLCBpcykgPyAtMSA6IGk7XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIGlzSW5RU0EobmFtZSwgdHlwZSkge1xuICAgIHJldHVybiAtMSA8IHF1ZXJ5LmluZGV4T2YobmFtZSArICdbaXM9XCInICsgdHlwZSArICdcIl0nKTtcbiAgfVxuICBcbiAgZnVuY3Rpb24gb25ET01BdHRyTW9kaWZpZWQoZSkge1xuICAgIHZhclxuICAgICAgbm9kZSA9IGUuY3VycmVudFRhcmdldCxcbiAgICAgIGF0dHJDaGFuZ2UgPSBlLmF0dHJDaGFuZ2UsXG4gICAgICBhdHRyTmFtZSA9IGUuYXR0ck5hbWUsXG4gICAgICB0YXJnZXQgPSBlLnRhcmdldCxcbiAgICAgIGFkZGl0aW9uID0gZVtBRERJVElPTl0gfHwgMixcbiAgICAgIHJlbW92YWwgPSBlW1JFTU9WQUxdIHx8IDNcbiAgICA7XG4gICAgaWYgKG5vdEZyb21Jbm5lckhUTUxIZWxwZXIgJiZcbiAgICAgICAgKCF0YXJnZXQgfHwgdGFyZ2V0ID09PSBub2RlKSAmJlxuICAgICAgICBub2RlW0FUVFJJQlVURV9DSEFOR0VEX0NBTExCQUNLXSAmJlxuICAgICAgICBhdHRyTmFtZSAhPT0gJ3N0eWxlJyAmJiAoXG4gICAgICAgICAgZS5wcmV2VmFsdWUgIT09IGUubmV3VmFsdWUgfHxcbiAgICAgICAgICAvLyBJRTksIElFMTAsIGFuZCBPcGVyYSAxMiBnb3RjaGFcbiAgICAgICAgICBlLm5ld1ZhbHVlID09PSAnJyAmJiAoXG4gICAgICAgICAgICBhdHRyQ2hhbmdlID09PSBhZGRpdGlvbiB8fFxuICAgICAgICAgICAgYXR0ckNoYW5nZSA9PT0gcmVtb3ZhbFxuICAgICAgICAgIClcbiAgICApKSB7XG4gICAgICBub2RlW0FUVFJJQlVURV9DSEFOR0VEX0NBTExCQUNLXShcbiAgICAgICAgYXR0ck5hbWUsXG4gICAgICAgIGF0dHJDaGFuZ2UgPT09IGFkZGl0aW9uID8gbnVsbCA6IGUucHJldlZhbHVlLFxuICAgICAgICBhdHRyQ2hhbmdlID09PSByZW1vdmFsID8gbnVsbCA6IGUubmV3VmFsdWVcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIFxuICBmdW5jdGlvbiBvbkRPTU5vZGUoYWN0aW9uKSB7XG4gICAgdmFyIGV4ZWN1dG9yID0gZXhlY3V0ZUFjdGlvbihhY3Rpb24pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZSkge1xuICAgICAgYXNhcFF1ZXVlLnB1c2goZXhlY3V0b3IsIGUudGFyZ2V0KTtcbiAgICAgIGlmIChhc2FwVGltZXIpIGNsZWFyVGltZW91dChhc2FwVGltZXIpO1xuICAgICAgYXNhcFRpbWVyID0gc2V0VGltZW91dChBU0FQLCAxKTtcbiAgICB9O1xuICB9XG4gIFxuICBmdW5jdGlvbiBvblJlYWR5U3RhdGVDaGFuZ2UoZSkge1xuICAgIGlmIChkcm9wRG9tQ29udGVudExvYWRlZCkge1xuICAgICAgZHJvcERvbUNvbnRlbnRMb2FkZWQgPSBmYWxzZTtcbiAgICAgIGUuY3VycmVudFRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKERPTV9DT05URU5UX0xPQURFRCwgb25SZWFkeVN0YXRlQ2hhbmdlKTtcbiAgICB9XG4gICAgaWYgKHF1ZXJ5Lmxlbmd0aCkgbG9vcEFuZFZlcmlmeShcbiAgICAgIChlLnRhcmdldCB8fCBkb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbChxdWVyeSksXG4gICAgICBlLmRldGFpbCA9PT0gREVUQUNIRUQgPyBERVRBQ0hFRCA6IEFUVEFDSEVEXG4gICAgKTtcbiAgICBpZiAoSUU4KSBwdXJnZSgpO1xuICB9XG4gIFxuICBmdW5jdGlvbiBwYXRjaGVkU2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKSB7XG4gICAgLy8ganNoaW50IHZhbGlkdGhpczp0cnVlXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNldEF0dHJpYnV0ZS5jYWxsKHNlbGYsIG5hbWUsIHZhbHVlKTtcbiAgICBvblN1YnRyZWVNb2RpZmllZC5jYWxsKHNlbGYsIHt0YXJnZXQ6IHNlbGZ9KTtcbiAgfVxuICBcbiAgZnVuY3Rpb24gc2V0dXBOb2RlKG5vZGUsIHByb3RvKSB7XG4gICAgc2V0UHJvdG90eXBlKG5vZGUsIHByb3RvKTtcbiAgICBpZiAob2JzZXJ2ZXIpIHtcbiAgICAgIG9ic2VydmVyLm9ic2VydmUobm9kZSwgYXR0cmlidXRlc09ic2VydmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGRvZXNOb3RTdXBwb3J0RE9NQXR0ck1vZGlmaWVkKSB7XG4gICAgICAgIG5vZGUuc2V0QXR0cmlidXRlID0gcGF0Y2hlZFNldEF0dHJpYnV0ZTtcbiAgICAgICAgbm9kZVtFWFBBTkRPX1VJRF0gPSBnZXRBdHRyaWJ1dGVzTWlycm9yKG5vZGUpO1xuICAgICAgICBub2RlW0FERF9FVkVOVF9MSVNURU5FUl0oRE9NX1NVQlRSRUVfTU9ESUZJRUQsIG9uU3VidHJlZU1vZGlmaWVkKTtcbiAgICAgIH1cbiAgICAgIG5vZGVbQUREX0VWRU5UX0xJU1RFTkVSXShET01fQVRUUl9NT0RJRklFRCwgb25ET01BdHRyTW9kaWZpZWQpO1xuICAgIH1cbiAgICBpZiAobm9kZVtDUkVBVEVEX0NBTExCQUNLXSAmJiBub3RGcm9tSW5uZXJIVE1MSGVscGVyKSB7XG4gICAgICBub2RlLmNyZWF0ZWQgPSB0cnVlO1xuICAgICAgbm9kZVtDUkVBVEVEX0NBTExCQUNLXSgpO1xuICAgICAgbm9kZS5jcmVhdGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG4gIFxuICBmdW5jdGlvbiBwdXJnZSgpIHtcbiAgICBmb3IgKHZhclxuICAgICAgbm9kZSxcbiAgICAgIGkgPSAwLFxuICAgICAgbGVuZ3RoID0gdGFyZ2V0cy5sZW5ndGg7XG4gICAgICBpIDwgbGVuZ3RoOyBpKytcbiAgICApIHtcbiAgICAgIG5vZGUgPSB0YXJnZXRzW2ldO1xuICAgICAgaWYgKCFkb2N1bWVudEVsZW1lbnQuY29udGFpbnMobm9kZSkpIHtcbiAgICAgICAgbGVuZ3RoLS07XG4gICAgICAgIHRhcmdldHMuc3BsaWNlKGktLSwgMSk7XG4gICAgICAgIHZlcmlmeUFuZFNldHVwQW5kQWN0aW9uKG5vZGUsIERFVEFDSEVEKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIHRocm93VHlwZUVycm9yKHR5cGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0EgJyArIHR5cGUgKyAnIHR5cGUgaXMgYWxyZWFkeSByZWdpc3RlcmVkJyk7XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIHZlcmlmeUFuZFNldHVwQW5kQWN0aW9uKG5vZGUsIGFjdGlvbikge1xuICAgIHZhclxuICAgICAgZm4sXG4gICAgICBpID0gZ2V0VHlwZUluZGV4KG5vZGUpXG4gICAgO1xuICAgIGlmICgtMSA8IGkpIHtcbiAgICAgIHBhdGNoSWZOb3RBbHJlYWR5KG5vZGUsIHByb3Rvc1tpXSk7XG4gICAgICBpID0gMDtcbiAgICAgIGlmIChhY3Rpb24gPT09IEFUVEFDSEVEICYmICFub2RlW0FUVEFDSEVEXSkge1xuICAgICAgICBub2RlW0RFVEFDSEVEXSA9IGZhbHNlO1xuICAgICAgICBub2RlW0FUVEFDSEVEXSA9IHRydWU7XG4gICAgICAgIGkgPSAxO1xuICAgICAgICBpZiAoSUU4ICYmIGluZGV4T2YuY2FsbCh0YXJnZXRzLCBub2RlKSA8IDApIHtcbiAgICAgICAgICB0YXJnZXRzLnB1c2gobm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSBERVRBQ0hFRCAmJiAhbm9kZVtERVRBQ0hFRF0pIHtcbiAgICAgICAgbm9kZVtBVFRBQ0hFRF0gPSBmYWxzZTtcbiAgICAgICAgbm9kZVtERVRBQ0hFRF0gPSB0cnVlO1xuICAgICAgICBpID0gMTtcbiAgICAgIH1cbiAgICAgIGlmIChpICYmIChmbiA9IG5vZGVbYWN0aW9uICsgQ0FMTEJBQ0tdKSkgZm4uY2FsbChub2RlKTtcbiAgICB9XG4gIH1cbiAgXG4gIFxuICBcbiAgLy8gVjEgaW4gZGEgSG91c2UhXG4gIGZ1bmN0aW9uIEN1c3RvbUVsZW1lbnRSZWdpc3RyeSgpIHt9XG4gIFxuICBDdXN0b21FbGVtZW50UmVnaXN0cnkucHJvdG90eXBlID0ge1xuICAgIGNvbnN0cnVjdG9yOiBDdXN0b21FbGVtZW50UmVnaXN0cnksXG4gICAgLy8gYSB3b3JrYXJvdW5kIGZvciB0aGUgc3R1YmJvcm4gV2ViS2l0XG4gICAgZGVmaW5lOiB1c2FibGVDdXN0b21FbGVtZW50cyA/XG4gICAgICBmdW5jdGlvbiAobmFtZSwgQ2xhc3MsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgICAgICBDRVJEZWZpbmUobmFtZSwgQ2xhc3MsIG9wdGlvbnMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBOQU1FID0gbmFtZS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgIGNvbnN0cnVjdG9yc1tOQU1FXSA9IHtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yOiBDbGFzcyxcbiAgICAgICAgICAgIGNyZWF0ZTogW05BTUVdXG4gICAgICAgICAgfTtcbiAgICAgICAgICBub2RlTmFtZXMuc2V0KENsYXNzLCBOQU1FKTtcbiAgICAgICAgICBjdXN0b21FbGVtZW50cy5kZWZpbmUobmFtZSwgQ2xhc3MpO1xuICAgICAgICB9XG4gICAgICB9IDpcbiAgICAgIENFUkRlZmluZSxcbiAgICBnZXQ6IHVzYWJsZUN1c3RvbUVsZW1lbnRzID9cbiAgICAgIGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHJldHVybiBjdXN0b21FbGVtZW50cy5nZXQobmFtZSkgfHwgZ2V0KG5hbWUpO1xuICAgICAgfSA6XG4gICAgICBnZXQsXG4gICAgd2hlbkRlZmluZWQ6IHVzYWJsZUN1c3RvbUVsZW1lbnRzID9cbiAgICAgIGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJhY2UoW1xuICAgICAgICAgIGN1c3RvbUVsZW1lbnRzLndoZW5EZWZpbmVkKG5hbWUpLFxuICAgICAgICAgIHdoZW5EZWZpbmVkKG5hbWUpXG4gICAgICAgIF0pO1xuICAgICAgfSA6XG4gICAgICB3aGVuRGVmaW5lZFxuICB9O1xuICBcbiAgZnVuY3Rpb24gQ0VSRGVmaW5lKG5hbWUsIENsYXNzLCBvcHRpb25zKSB7XG4gICAgdmFyXG4gICAgICBpcyA9IG9wdGlvbnMgJiYgb3B0aW9uc1tFWFRFTkRTXSB8fCAnJyxcbiAgICAgIENQcm90byA9IENsYXNzLnByb3RvdHlwZSxcbiAgICAgIHByb3RvID0gY3JlYXRlKENQcm90byksXG4gICAgICBhdHRyaWJ1dGVzID0gQ2xhc3Mub2JzZXJ2ZWRBdHRyaWJ1dGVzIHx8IGVtcHR5LFxuICAgICAgZGVmaW5pdGlvbiA9IHtwcm90b3R5cGU6IHByb3RvfVxuICAgIDtcbiAgICAvLyBUT0RPOiBpcyB0aGlzIG5lZWRlZCBhdCBhbGwgc2luY2UgaXQncyBpbmhlcml0ZWQ/XG4gICAgLy8gZGVmaW5lUHJvcGVydHkocHJvdG8sICdjb25zdHJ1Y3RvcicsIHt2YWx1ZTogQ2xhc3N9KTtcbiAgICBzYWZlUHJvcGVydHkocHJvdG8sIENSRUFURURfQ0FMTEJBQ0ssIHtcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoanVzdENyZWF0ZWQpIGp1c3RDcmVhdGVkID0gZmFsc2U7XG4gICAgICAgICAgZWxzZSBpZiAoIXRoaXNbRFJFQ0VWMV0pIHtcbiAgICAgICAgICAgIHRoaXNbRFJFQ0VWMV0gPSB0cnVlO1xuICAgICAgICAgICAgbmV3IENsYXNzKHRoaXMpO1xuICAgICAgICAgICAgaWYgKENQcm90b1tDUkVBVEVEX0NBTExCQUNLXSlcbiAgICAgICAgICAgICAgQ1Byb3RvW0NSRUFURURfQ0FMTEJBQ0tdLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB2YXIgaW5mbyA9IGNvbnN0cnVjdG9yc1tub2RlTmFtZXMuZ2V0KENsYXNzKV07XG4gICAgICAgICAgICBpZiAoIXVzYWJsZUN1c3RvbUVsZW1lbnRzIHx8IGluZm8uY3JlYXRlLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgbm90aWZ5QXR0cmlidXRlcyh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgc2FmZVByb3BlcnR5KHByb3RvLCBBVFRSSUJVVEVfQ0hBTkdFRF9DQUxMQkFDSywge1xuICAgICAgdmFsdWU6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIGlmICgtMSA8IGluZGV4T2YuY2FsbChhdHRyaWJ1dGVzLCBuYW1lKSlcbiAgICAgICAgICBDUHJvdG9bQVRUUklCVVRFX0NIQU5HRURfQ0FMTEJBQ0tdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKENQcm90b1tDT05ORUNURURfQ0FMTEJBQ0tdKSB7XG4gICAgICBzYWZlUHJvcGVydHkocHJvdG8sIEFUVEFDSEVEX0NBTExCQUNLLCB7XG4gICAgICAgIHZhbHVlOiBDUHJvdG9bQ09OTkVDVEVEX0NBTExCQUNLXVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChDUHJvdG9bRElTQ09OTkVDVEVEX0NBTExCQUNLXSkge1xuICAgICAgc2FmZVByb3BlcnR5KHByb3RvLCBERVRBQ0hFRF9DQUxMQkFDSywge1xuICAgICAgICB2YWx1ZTogQ1Byb3RvW0RJU0NPTk5FQ1RFRF9DQUxMQkFDS11cbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoaXMpIGRlZmluaXRpb25bRVhURU5EU10gPSBpcztcbiAgICBuYW1lID0gbmFtZS50b1VwcGVyQ2FzZSgpO1xuICAgIGNvbnN0cnVjdG9yc1tuYW1lXSA9IHtcbiAgICAgIGNvbnN0cnVjdG9yOiBDbGFzcyxcbiAgICAgIGNyZWF0ZTogaXMgPyBbaXMsIHNlY29uZEFyZ3VtZW50KG5hbWUpXSA6IFtuYW1lXVxuICAgIH07XG4gICAgbm9kZU5hbWVzLnNldChDbGFzcywgbmFtZSk7XG4gICAgZG9jdW1lbnRbUkVHSVNURVJfRUxFTUVOVF0obmFtZS50b0xvd2VyQ2FzZSgpLCBkZWZpbml0aW9uKTtcbiAgICB3aGVuRGVmaW5lZChuYW1lKTtcbiAgICB3YWl0aW5nTGlzdFtuYW1lXS5yKCk7XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIGdldChuYW1lKSB7XG4gICAgdmFyIGluZm8gPSBjb25zdHJ1Y3RvcnNbbmFtZS50b1VwcGVyQ2FzZSgpXTtcbiAgICByZXR1cm4gaW5mbyAmJiBpbmZvLmNvbnN0cnVjdG9yO1xuICB9XG4gIFxuICBmdW5jdGlvbiBnZXRJcyhvcHRpb25zKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJyA/XG4gICAgICAgIG9wdGlvbnMgOiAob3B0aW9ucyAmJiBvcHRpb25zLmlzIHx8ICcnKTtcbiAgfVxuICBcbiAgZnVuY3Rpb24gbm90aWZ5QXR0cmlidXRlcyhzZWxmKSB7XG4gICAgdmFyXG4gICAgICBjYWxsYmFjayA9IHNlbGZbQVRUUklCVVRFX0NIQU5HRURfQ0FMTEJBQ0tdLFxuICAgICAgYXR0cmlidXRlcyA9IGNhbGxiYWNrID8gc2VsZi5hdHRyaWJ1dGVzIDogZW1wdHksXG4gICAgICBpID0gYXR0cmlidXRlcy5sZW5ndGgsXG4gICAgICBhdHRyaWJ1dGVcbiAgICA7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgYXR0cmlidXRlID0gIGF0dHJpYnV0ZXNbaV07IC8vIHx8IGF0dHJpYnV0ZXMuaXRlbShpKTtcbiAgICAgIGNhbGxiYWNrLmNhbGwoXG4gICAgICAgIHNlbGYsXG4gICAgICAgIGF0dHJpYnV0ZS5uYW1lIHx8IGF0dHJpYnV0ZS5ub2RlTmFtZSxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgYXR0cmlidXRlLnZhbHVlIHx8IGF0dHJpYnV0ZS5ub2RlVmFsdWVcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIFxuICBmdW5jdGlvbiB3aGVuRGVmaW5lZChuYW1lKSB7XG4gICAgbmFtZSA9IG5hbWUudG9VcHBlckNhc2UoKTtcbiAgICBpZiAoIShuYW1lIGluIHdhaXRpbmdMaXN0KSkge1xuICAgICAgd2FpdGluZ0xpc3RbbmFtZV0gPSB7fTtcbiAgICAgIHdhaXRpbmdMaXN0W25hbWVdLnAgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICB3YWl0aW5nTGlzdFtuYW1lXS5yID0gcmVzb2x2ZTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gd2FpdGluZ0xpc3RbbmFtZV0ucDtcbiAgfVxuICBcbiAgZnVuY3Rpb24gcG9seWZpbGxWMSgpIHtcbiAgICBpZiAoY3VzdG9tRWxlbWVudHMpIGRlbGV0ZSB3aW5kb3cuY3VzdG9tRWxlbWVudHM7XG4gICAgZGVmaW5lUHJvcGVydHkod2luZG93LCAnY3VzdG9tRWxlbWVudHMnLCB7XG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogbmV3IEN1c3RvbUVsZW1lbnRSZWdpc3RyeSgpXG4gICAgfSk7XG4gICAgZGVmaW5lUHJvcGVydHkod2luZG93LCAnQ3VzdG9tRWxlbWVudFJlZ2lzdHJ5Jywge1xuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IEN1c3RvbUVsZW1lbnRSZWdpc3RyeVxuICAgIH0pO1xuICAgIGZvciAodmFyXG4gICAgICBwYXRjaENsYXNzID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgdmFyIENsYXNzID0gd2luZG93W25hbWVdO1xuICAgICAgICBpZiAoQ2xhc3MpIHtcbiAgICAgICAgICB3aW5kb3dbbmFtZV0gPSBmdW5jdGlvbiBDdXN0b21FbGVtZW50c1YxKHNlbGYpIHtcbiAgICAgICAgICAgIHZhciBpbmZvLCBpc05hdGl2ZTtcbiAgICAgICAgICAgIGlmICghc2VsZikgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoIXNlbGZbRFJFQ0VWMV0pIHtcbiAgICAgICAgICAgICAganVzdENyZWF0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICBpbmZvID0gY29uc3RydWN0b3JzW25vZGVOYW1lcy5nZXQoc2VsZi5jb25zdHJ1Y3RvcildO1xuICAgICAgICAgICAgICBpc05hdGl2ZSA9IHVzYWJsZUN1c3RvbUVsZW1lbnRzICYmIGluZm8uY3JlYXRlLmxlbmd0aCA9PT0gMTtcbiAgICAgICAgICAgICAgc2VsZiA9IGlzTmF0aXZlID9cbiAgICAgICAgICAgICAgICBSZWZsZWN0LmNvbnN0cnVjdChDbGFzcywgZW1wdHksIGluZm8uY29uc3RydWN0b3IpIDpcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5jcmVhdGVFbGVtZW50LmFwcGx5KGRvY3VtZW50LCBpbmZvLmNyZWF0ZSk7XG4gICAgICAgICAgICAgIHNlbGZbRFJFQ0VWMV0gPSB0cnVlO1xuICAgICAgICAgICAgICBqdXN0Q3JlYXRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICBpZiAoIWlzTmF0aXZlKSBub3RpZnlBdHRyaWJ1dGVzKHNlbGYpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICAgICAgfTtcbiAgICAgICAgICB3aW5kb3dbbmFtZV0ucHJvdG90eXBlID0gQ2xhc3MucHJvdG90eXBlO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSB3aW5kb3dbbmFtZV07XG4gICAgICAgICAgfSBjYXRjaChXZWJLaXQpIHtcbiAgICAgICAgICAgIGZpeEdldENsYXNzID0gdHJ1ZTtcbiAgICAgICAgICAgIGRlZmluZVByb3BlcnR5KENsYXNzLCBEUkVDRVYxLCB7dmFsdWU6IHdpbmRvd1tuYW1lXX0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIENsYXNzZXMgPSBodG1sQ2xhc3MuZ2V0KC9eSFRNTFtBLVpdKlthLXpdLyksXG4gICAgICBpID0gQ2xhc3Nlcy5sZW5ndGg7XG4gICAgICBpLS07XG4gICAgICBwYXRjaENsYXNzKENsYXNzZXNbaV0pXG4gICAgKSB7fVxuICAgIChkb2N1bWVudC5jcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24gKG5hbWUsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBpcyA9IGdldElzKG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIGlzID9cbiAgICAgICAgcGF0Y2hlZENyZWF0ZUVsZW1lbnQuY2FsbCh0aGlzLCBuYW1lLCBzZWNvbmRBcmd1bWVudChpcykpIDpcbiAgICAgICAgcGF0Y2hlZENyZWF0ZUVsZW1lbnQuY2FsbCh0aGlzLCBuYW1lKTtcbiAgICB9KTtcbiAgICBpZiAoIVYwKSB7XG4gICAgICBqdXN0U2V0dXAgPSB0cnVlO1xuICAgICAgZG9jdW1lbnRbUkVHSVNURVJfRUxFTUVOVF0oJycpO1xuICAgIH1cbiAgfVxuICBcbiAgLy8gaWYgY3VzdG9tRWxlbWVudHMgaXMgbm90IHRoZXJlIGF0IGFsbFxuICBpZiAoIWN1c3RvbUVsZW1lbnRzIHx8IHBvbHlmaWxsID09PSAnZm9yY2UnKSBwb2x5ZmlsbFYxKCk7XG4gIGVsc2Uge1xuICAgIC8vIGlmIGF2YWlsYWJsZSB0ZXN0IGV4dGVuZHMgd29yayBhcyBleHBlY3RlZFxuICAgIHRyeSB7XG4gICAgICAoZnVuY3Rpb24gKERSRSwgb3B0aW9ucywgbmFtZSkge1xuICAgICAgICBvcHRpb25zW0VYVEVORFNdID0gJ2EnO1xuICAgICAgICBEUkUucHJvdG90eXBlID0gY3JlYXRlKEhUTUxBbmNob3JFbGVtZW50LnByb3RvdHlwZSk7XG4gICAgICAgIERSRS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBEUkU7XG4gICAgICAgIHdpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUobmFtZSwgRFJFLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGdldEF0dHJpYnV0ZS5jYWxsKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnLCB7aXM6IG5hbWV9KSwgJ2lzJykgIT09IG5hbWUgfHxcbiAgICAgICAgICAodXNhYmxlQ3VzdG9tRWxlbWVudHMgJiYgZ2V0QXR0cmlidXRlLmNhbGwobmV3IERSRSgpLCAnaXMnKSAhPT0gbmFtZSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhyb3cgb3B0aW9ucztcbiAgICAgICAgfVxuICAgICAgfShcbiAgICAgICAgZnVuY3Rpb24gRFJFKCkge1xuICAgICAgICAgIHJldHVybiBSZWZsZWN0LmNvbnN0cnVjdChIVE1MQW5jaG9yRWxlbWVudCwgW10sIERSRSk7XG4gICAgICAgIH0sXG4gICAgICAgIHt9LFxuICAgICAgICAnZG9jdW1lbnQtcmVnaXN0ZXItZWxlbWVudC1hJ1xuICAgICAgKSk7XG4gICAgfSBjYXRjaChvX08pIHtcbiAgICAgIC8vIG9yIGZvcmNlIHRoZSBwb2x5ZmlsbCBpZiBub3RcbiAgICAgIC8vIGFuZCBrZWVwIGludGVybmFsIG9yaWdpbmFsIHJlZmVyZW5jZVxuICAgICAgcG9seWZpbGxWMSgpO1xuICAgIH1cbiAgfVxuICBcbiAgdHJ5IHtcbiAgICBjcmVhdGVFbGVtZW50LmNhbGwoZG9jdW1lbnQsICdhJywgJ2EnKTtcbiAgfSBjYXRjaChGaXJlRm94KSB7XG4gICAgc2Vjb25kQXJndW1lbnQgPSBmdW5jdGlvbiAoaXMpIHtcbiAgICAgIHJldHVybiB7aXM6IGlzLnRvTG93ZXJDYXNlKCl9O1xuICAgIH07XG4gIH1cbiAgXG59XG5cbmV4cG9ydHMuaW5zdGFsbEN1c3RvbUVsZW1lbnRzID0gaW5zdGFsbEN1c3RvbUVsZW1lbnRzO1xuXG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQ29uc3RydWN0cyBhIEVTNi9Qcm9taXNlcyBBKyBQcm9taXNlIGluc3RhbmNlLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtmdW5jdGlvbihmdW5jdGlvbigqPSksIGZ1bmN0aW9uICgqPSkpfSByZXNvbHZlclxuICovXG5mdW5jdGlvbiBQcm9taXNlKHJlc29sdmVyKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBQcm9taXNlKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0NvbnN0cnVjdG9yIFByb21pc2UgcmVxdWlyZXMgYG5ld2AnKTtcbiAgfVxuICBpZiAoIWlzRnVuY3Rpb24ocmVzb2x2ZXIpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignTXVzdCBwYXNzIHJlc29sdmVyIGZ1bmN0aW9uJyk7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge2Z1bmN0aW9uKHRoaXM6UHJvbWlzZSwqPSxmdW5jdGlvbigqPSksZnVuY3Rpb24oKj0pLERlZmVycmVkKTohUHJvbWlzZX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuX3N0YXRlID0gUGVuZGluZ1Byb21pc2U7XG5cbiAgLyoqXG4gICAqIEB0eXBlIHsqfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5fdmFsdWUgPSBbXTtcblxuICAvKipcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLl9pc0NoYWluRW5kID0gdHJ1ZTtcblxuICBkb1Jlc29sdmUoXG4gICAgdGhpcyxcbiAgICBhZG9wdGVyKHRoaXMsIEZ1bGZpbGxlZFByb21pc2UpLFxuICAgIGFkb3B0ZXIodGhpcywgUmVqZWN0ZWRQcm9taXNlKSxcbiAgICB7IHRoZW46IHJlc29sdmVyIH1cbiAgKTtcbn1cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgUHVibGljIEluc3RhbmNlIE1ldGhvZHNcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgcHJvbWlzZSBpbnN0YW5jZSB0aGF0IHdpbGwgcmVjZWl2ZSB0aGUgcmVzdWx0IG9mIHRoaXMgcHJvbWlzZVxuICogYXMgaW5wdXRzIHRvIHRoZSBvbkZ1bGZpbGxlZCBvciBvblJlamVjdGVkIGNhbGxiYWNrcy5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCopfSBvbkZ1bGZpbGxlZFxuICogQHBhcmFtIHtmdW5jdGlvbigqKX0gb25SZWplY3RlZFxuICovXG5Qcm9taXNlLnByb3RvdHlwZS50aGVuID0gZnVuY3Rpb24ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcbiAgb25GdWxmaWxsZWQgPSBpc0Z1bmN0aW9uKG9uRnVsZmlsbGVkKSA/IG9uRnVsZmlsbGVkIDogdm9pZCAwO1xuICBvblJlamVjdGVkID0gaXNGdW5jdGlvbihvblJlamVjdGVkKSA/IG9uUmVqZWN0ZWQgOiB2b2lkIDA7XG5cbiAgaWYgKG9uRnVsZmlsbGVkIHx8IG9uUmVqZWN0ZWQpIHtcbiAgICB0aGlzLl9pc0NoYWluRW5kID0gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gdGhpcy5fc3RhdGUoXG4gICAgdGhpcy5fdmFsdWUsXG4gICAgb25GdWxmaWxsZWQsXG4gICAgb25SZWplY3RlZFxuICApO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHByb21pc2UgdGhhdCB3aWxsIGhhbmRsZSB0aGUgcmVqZWN0ZWQgc3RhdGUgb2YgdGhpcyBwcm9taXNlLlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKil9IG9uUmVqZWN0ZWRcbiAqIEByZXR1cm5zIHshUHJvbWlzZX1cbiAqL1xuUHJvbWlzZS5wcm90b3R5cGUuY2F0Y2ggPSBmdW5jdGlvbihvblJlamVjdGVkKSB7XG4gIHJldHVybiB0aGlzLnRoZW4odm9pZCAwLCBvblJlamVjdGVkKTtcbn07XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gIFB1YmxpYyBTdGF0aWMgTWV0aG9kc1xuICoqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bGZpbGxlZCBQcm9taXNlIG9mIHZhbHVlLiBJZiB2YWx1ZSBpcyBpdHNlbGYgYSB0aGVuLWFibGUsXG4gKiByZXNvbHZlcyB3aXRoIHRoZSB0aGVuLWFibGUncyB2YWx1ZS5cbiAqXG4gKiBAdGhpcyB7IVByb21pc2V9XG4gKiBAcGFyYW0geyo9fSB2YWx1ZVxuICogQHJldHVybnMgeyFQcm9taXNlfVxuICovXG5Qcm9taXNlLnJlc29sdmUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuICB2YXIgcHJvbWlzZTtcblxuICBpZiAoaXNPYmplY3QodmFsdWUpICYmIHZhbHVlIGluc3RhbmNlb2YgdGhpcykge1xuICAgIHByb21pc2UgPSB2YWx1ZTtcbiAgfSBlbHNlIHtcbiAgICBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uKHJlc29sdmUpIHtcbiAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2V9ICovKHByb21pc2UpO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgcmVqZWN0ZWQgUHJvbWlzZSBvZiByZWFzb24uXG4gKlxuICogQHRoaXMgeyFQcm9taXNlfVxuICogQHBhcmFtIHsqPX0gcmVhc29uXG4gKiBAcmV0dXJucyB7IVByb21pc2V9XG4gKi9cblByb21pc2UucmVqZWN0ID0gZnVuY3Rpb24ocmVhc29uKSB7XG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG4gIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uKF8sIHJlamVjdCkge1xuICAgIHJlamVjdChyZWFzb24pO1xuICB9KTtcblxuICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZX0gKi8ocHJvbWlzZSk7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBQcm9taXNlIHRoYXQgd2lsbCByZXNvbHZlIHdpdGggYW4gYXJyYXkgb2YgdGhlIHZhbHVlcyBvZiB0aGVcbiAqIHBhc3NlZCBpbiBwcm9taXNlcy4gSWYgYW55IHByb21pc2UgcmVqZWN0cywgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbFxuICogcmVqZWN0LlxuICpcbiAqIEB0aGlzIHshUHJvbWlzZX1cbiAqIEBwYXJhbSB7IUFycmF5PFByb21pc2V8Kj59IHByb21pc2VzXG4gKiBAcmV0dXJucyB7IVByb21pc2V9XG4gKi9cblByb21pc2UuYWxsID0gZnVuY3Rpb24ocHJvbWlzZXMpIHtcbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcbiAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFyIGxlbmd0aCA9IHByb21pc2VzLmxlbmd0aDtcbiAgICB2YXIgdmFsdWVzID0gbmV3IEFycmF5KGxlbmd0aCk7XG5cbiAgICBpZiAobGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZSh2YWx1ZXMpO1xuICAgIH1cblxuICAgIGVhY2gocHJvbWlzZXMsIGZ1bmN0aW9uKHByb21pc2UsIGluZGV4KSB7XG4gICAgICBDb25zdHJ1Y3Rvci5yZXNvbHZlKHByb21pc2UpLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgdmFsdWVzW2luZGV4XSA9IHZhbHVlO1xuICAgICAgICBpZiAoLS1sZW5ndGggPT09IDApIHtcbiAgICAgICAgICByZXNvbHZlKHZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgIH0sIHJlamVjdCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlfSAqLyhwcm9taXNlKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIFByb21pc2UgdGhhdCB3aWxsIHJlc29sdmUgb3IgcmVqZWN0IGJhc2VkIG9uIHRoZSBmaXJzdFxuICogcmVzb2x2ZWQgb3IgcmVqZWN0ZWQgcHJvbWlzZS5cbiAqXG4gKiBAdGhpcyB7IVByb21pc2V9XG4gKiBAcGFyYW0geyFBcnJheTxQcm9taXNlfCo+fSBwcm9taXNlc1xuICogQHJldHVybnMgeyFQcm9taXNlfVxuICovXG5Qcm9taXNlLnJhY2UgPSBmdW5jdGlvbihwcm9taXNlcykge1xuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb21pc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBDb25zdHJ1Y3Rvci5yZXNvbHZlKHByb21pc2VzW2ldKS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZX0gKi8ocHJvbWlzZSk7XG59O1xuXG52YXIgb25Qb3NzaWJseVVuaGFuZGxlZFJlamVjdGlvbiA9IGZ1bmN0aW9uKHJlYXNvbiwgcHJvbWlzZSkge1xuICB0aHJvdyByZWFzb247XG59O1xuXG4vKipcbiAqIEFuIGludGVybmFsIHVzZSBzdGF0aWMgZnVuY3Rpb24uXG4gKi9cblByb21pc2UuX292ZXJyaWRlVW5oYW5kbGVkRXhjZXB0aW9uSGFuZGxlciA9IGZ1bmN0aW9uKGhhbmRsZXIpIHtcbiAgb25Qb3NzaWJseVVuaGFuZGxlZFJlamVjdGlvbiA9IGhhbmRsZXI7XG59O1xuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICBQcml2YXRlIGZ1bmN0aW9uc1xuICoqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbi8qKlxuICogVGhlIEZ1bGZpbGxlZCBQcm9taXNlIHN0YXRlLiBDYWxscyBvbkZ1bGZpbGxlZCB3aXRoIHRoZSByZXNvbHZlZCB2YWx1ZSBvZlxuICogdGhpcyBwcm9taXNlLCBjcmVhdGluZyBhIG5ldyBwcm9taXNlLlxuICpcbiAqIElmIHRoZXJlIGlzIG5vIG9uRnVsZmlsbGVkLCByZXR1cm5zIHRoZSBjdXJyZW50IHByb21pc2UgdG8gYXZvaWQgYW4gcHJvbWlzZVxuICogaW5zdGFuY2UuXG4gKlxuICogQHRoaXMgeyFQcm9taXNlfSBUaGUgY3VycmVudCBwcm9taXNlXG4gKiBAcGFyYW0geyo9fSB2YWx1ZSBUaGUgY3VycmVudCBwcm9taXNlJ3MgcmVzb2x2ZWQgdmFsdWUuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCo9KT19IG9uRnVsZmlsbGVkXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCo9KT19IHVudXNlZFxuICogQHBhcmFtIHtEZWZlcnJlZH0gZGVmZXJyZWQgQSBkZWZlcnJlZCBvYmplY3QgdGhhdCBob2xkcyBhIHByb21pc2UgYW5kIGl0c1xuICogICAgIHJlc29sdmUgYW5kIHJlamVjdCBmdW5jdGlvbnMuIEl0IElTIE5PVCBwYXNzZWQgd2hlbiBjYWxsZWQgZnJvbVxuICogICAgIFByb21pc2UjdGhlbiB0byBzYXZlIGFuIG9iamVjdCBpbnN0YW5jZSAoc2luY2Ugd2UgbWF5IHJldHVybiB0aGUgY3VycmVudFxuICogICAgIHByb21pc2UpLiBJdCBJUyBwYXNzZWQgaW4gd2hlbiBhZG9wdGluZyB0aGUgRnVsZmlsbGVkIHN0YXRlIGZyb20gdGhlXG4gKiAgICAgUGVuZGluZyBzdGF0ZS5cbiAqIEByZXR1cm5zIHshUHJvbWlzZX1cbiAqL1xuZnVuY3Rpb24gRnVsZmlsbGVkUHJvbWlzZSh2YWx1ZSwgb25GdWxmaWxsZWQsIHVudXNlZCwgZGVmZXJyZWQpIHtcbiAgaWYgKCFvbkZ1bGZpbGxlZCkge1xuICAgIGRlZmVycmVkQWRvcHQoZGVmZXJyZWQsIEZ1bGZpbGxlZFByb21pc2UsIHZhbHVlKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBpZiAoIWRlZmVycmVkKSB7XG4gICAgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQodGhpcy5jb25zdHJ1Y3Rvcik7XG4gIH1cbiAgZGVmZXIodHJ5Q2F0Y2hEZWZlcnJlZChkZWZlcnJlZCwgb25GdWxmaWxsZWQsIHZhbHVlKSk7XG4gIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufVxuXG4vKipcbiAqIFRoZSBSZWplY3RlZCBQcm9taXNlIHN0YXRlLiBDYWxscyBvblJlamVjdGVkIHdpdGggdGhlIHJlc29sdmVkIHZhbHVlIG9mXG4gKiB0aGlzIHByb21pc2UsIGNyZWF0aW5nIGEgbmV3IHByb21pc2UuXG4gKlxuICogSWYgdGhlcmUgaXMgbm8gb25SZWplY3RlZCwgcmV0dXJucyB0aGUgY3VycmVudCBwcm9taXNlIHRvIGF2b2lkIGFuIHByb21pc2VcbiAqIGluc3RhbmNlLlxuICpcbiAqIEB0aGlzIHshUHJvbWlzZX0gVGhlIGN1cnJlbnQgcHJvbWlzZVxuICogQHBhcmFtIHsqPX0gcmVhc29uIFRoZSBjdXJyZW50IHByb21pc2UncyByZWplY3Rpb24gcmVhc29uLlxuICogQHBhcmFtIHtmdW5jdGlvbigqPSk9fSB1bnVzZWRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKj0pPX0gb25SZWplY3RlZFxuICogQHBhcmFtIHtEZWZlcnJlZH0gZGVmZXJyZWQgQSBkZWZlcnJlZCBvYmplY3QgdGhhdCBob2xkcyBhIHByb21pc2UgYW5kIGl0c1xuICogICAgIHJlc29sdmUgYW5kIHJlamVjdCBmdW5jdGlvbnMuIEl0IElTIE5PVCBwYXNzZWQgd2hlbiBjYWxsZWQgZnJvbVxuICogICAgIFByb21pc2UjdGhlbiB0byBzYXZlIGFuIG9iamVjdCBpbnN0YW5jZSAoc2luY2Ugd2UgbWF5IHJldHVybiB0aGUgY3VycmVudFxuICogICAgIHByb21pc2UpLiBJdCBJUyBwYXNzZWQgaW4gd2hlbiBhZG9wdGluZyB0aGUgUmVqZWN0ZWQgc3RhdGUgZnJvbSB0aGVcbiAqICAgICBQZW5kaW5nIHN0YXRlLlxuICogQHJldHVybnMgeyFQcm9taXNlfVxuICovXG5mdW5jdGlvbiBSZWplY3RlZFByb21pc2UocmVhc29uLCB1bnVzZWQsIG9uUmVqZWN0ZWQsIGRlZmVycmVkKSB7XG4gIGlmICghb25SZWplY3RlZCkge1xuICAgIGRlZmVycmVkQWRvcHQoZGVmZXJyZWQsIFJlamVjdGVkUHJvbWlzZSwgcmVhc29uKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBpZiAoIWRlZmVycmVkKSB7XG4gICAgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQodGhpcy5jb25zdHJ1Y3Rvcik7XG4gIH1cbiAgZGVmZXIodHJ5Q2F0Y2hEZWZlcnJlZChkZWZlcnJlZCwgb25SZWplY3RlZCwgcmVhc29uKSk7XG4gIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufVxuXG4vKipcbiAqIFRoZSBQZW5kaW5nIFByb21pc2Ugc3RhdGUuIEV2ZW50dWFsbHkgY2FsbHMgb25GdWxmaWxsZWQgb25jZSB0aGUgcHJvbWlzZSBoYXNcbiAqIHJlc29sdmVkLCBvciBvblJlamVjdGVkIG9uY2UgdGhlIHByb21pc2UgcmVqZWN0cy5cbiAqXG4gKiBJZiB0aGVyZSBpcyBubyBvbkZ1bGZpbGxlZCBhbmQgbm8gb25SZWplY3RlZCwgcmV0dXJucyB0aGUgY3VycmVudCBwcm9taXNlIHRvXG4gKiBhdm9pZCBhbiBwcm9taXNlIGluc3RhbmNlLlxuICpcbiAqIEB0aGlzIHshUHJvbWlzZX0gVGhlIGN1cnJlbnQgcHJvbWlzZVxuICogQHBhcmFtIHsqPX0gcXVldWUgVGhlIGN1cnJlbnQgcHJvbWlzZSdzIHBlbmRpbmcgcHJvbWlzZXMgcXVldWUuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCo9KT19IG9uRnVsZmlsbGVkXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCo9KT19IG9uUmVqZWN0ZWRcbiAqIEBwYXJhbSB7RGVmZXJyZWR9IGRlZmVycmVkIEEgZGVmZXJyZWQgb2JqZWN0IHRoYXQgaG9sZHMgYSBwcm9taXNlIGFuZCBpdHNcbiAqICAgICByZXNvbHZlIGFuZCByZWplY3QgZnVuY3Rpb25zLiBJdCBJUyBOT1QgcGFzc2VkIHdoZW4gY2FsbGVkIGZyb21cbiAqICAgICBQcm9taXNlI3RoZW4gdG8gc2F2ZSBhbiBvYmplY3QgaW5zdGFuY2UgKHNpbmNlIHdlIG1heSByZXR1cm4gdGhlIGN1cnJlbnRcbiAqICAgICBwcm9taXNlKS4gSXQgSVMgcGFzc2VkIGluIHdoZW4gYWRvcHRpbmcgdGhlIFBlbmRpbmcgc3RhdGUgZnJvbSB0aGVcbiAqICAgICBQZW5kaW5nIHN0YXRlIG9mIGFub3RoZXIgcHJvbWlzZS5cbiAqIEByZXR1cm5zIHshUHJvbWlzZX1cbiAqL1xuZnVuY3Rpb24gUGVuZGluZ1Byb21pc2UocXVldWUsIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCBkZWZlcnJlZCkge1xuICBpZiAoIWRlZmVycmVkKSB7XG4gICAgaWYgKCFvbkZ1bGZpbGxlZCAmJiAhb25SZWplY3RlZCkgeyByZXR1cm4gdGhpczsgfVxuICAgIGRlZmVycmVkID0gbmV3IERlZmVycmVkKHRoaXMuY29uc3RydWN0b3IpO1xuICB9XG4gIHF1ZXVlLnB1c2goe1xuICAgIGRlZmVycmVkOiBkZWZlcnJlZCxcbiAgICBvbkZ1bGZpbGxlZDogb25GdWxmaWxsZWQgfHwgZGVmZXJyZWQucmVzb2x2ZSxcbiAgICBvblJlamVjdGVkOiBvblJlamVjdGVkIHx8IGRlZmVycmVkLnJlamVjdFxuICB9KTtcbiAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59XG5cbi8qKlxuICogQ29uc3RydWN0cyBhIGRlZmVycmVkIGluc3RhbmNlIHRoYXQgaG9sZHMgYSBwcm9taXNlIGFuZCBpdHMgcmVzb2x2ZSBhbmRcbiAqIHJlamVjdCBmdW5jdGlvbnMuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIERlZmVycmVkKFByb21pc2UpIHtcbiAgdmFyIGRlZmVycmVkID0gdGhpcztcbiAgLyoqIEB0eXBlIHshUHJvbWlzZX0gKi9cbiAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgLyoqIEB0eXBlIHtmdW5jdGlvbigqPSl9ICovXG4gICAgZGVmZXJyZWQucmVzb2x2ZSA9IHJlc29sdmU7XG5cbiAgICAvKiogQHR5cGUge2Z1bmN0aW9uKCo9KX0gKi9cbiAgICBkZWZlcnJlZC5yZWplY3QgPSByZWplY3Q7XG4gIH0pO1xuICByZXR1cm4gZGVmZXJyZWQ7XG59XG5cbi8qKlxuICogVHJhbnNpdGlvbnMgdGhlIHN0YXRlIG9mIHByb21pc2UgdG8gYW5vdGhlciBzdGF0ZS4gVGhpcyBpcyBvbmx5IGV2ZXIgY2FsbGVkXG4gKiBvbiB3aXRoIGEgcHJvbWlzZSB0aGF0IGlzIGN1cnJlbnRseSBpbiB0aGUgUGVuZGluZyBzdGF0ZS5cbiAqXG4gKiBAcGFyYW0geyFQcm9taXNlfSBwcm9taXNlXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHRoaXM6UHJvbWlzZSwqPSxmdW5jdGlvbigqPSksZnVuY3Rpb24oKj0pLERlZmVycmVkKTohUHJvbWlzZX0gc3RhdGVcbiAqIEBwYXJhbSB7Kj19IHZhbHVlXG4gKi9cbmZ1bmN0aW9uIGFkb3B0KHByb21pc2UsIHN0YXRlLCB2YWx1ZSwgYWRvcHRlZSkge1xuICB2YXIgcXVldWUgPSBwcm9taXNlLl92YWx1ZTtcbiAgcHJvbWlzZS5fc3RhdGUgPSBzdGF0ZTtcbiAgcHJvbWlzZS5fdmFsdWUgPSB2YWx1ZTtcblxuICBpZiAoYWRvcHRlZSAmJiBzdGF0ZSA9PT0gUGVuZGluZ1Byb21pc2UpIHtcbiAgICBhZG9wdGVlLl9zdGF0ZSh2YWx1ZSwgdm9pZCAwLCB2b2lkIDAsIHtcbiAgICAgIHByb21pc2U6IHByb21pc2UsXG4gICAgICByZXNvbHZlOiB2b2lkIDAsXG4gICAgICByZWplY3Q6IHZvaWQgMFxuICAgIH0pO1xuICB9XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgIHZhciBuZXh0ID0gcXVldWVbaV07XG4gICAgcHJvbWlzZS5fc3RhdGUoXG4gICAgICB2YWx1ZSxcbiAgICAgIG5leHQub25GdWxmaWxsZWQsXG4gICAgICBuZXh0Lm9uUmVqZWN0ZWQsXG4gICAgICBuZXh0LmRlZmVycmVkXG4gICAgKTtcbiAgfVxuICBxdWV1ZS5sZW5ndGggPSAwO1xuXG4gIC8vIERldGVybWluZSBpZiB0aGlzIHJlamVjdGVkIHByb21pc2Ugd2lsbCBiZSBcImhhbmRsZWRcIi5cbiAgaWYgKHN0YXRlID09PSBSZWplY3RlZFByb21pc2UgJiYgcHJvbWlzZS5faXNDaGFpbkVuZCkge1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBpZiAocHJvbWlzZS5faXNDaGFpbkVuZCkge1xuICAgICAgICBvblBvc3NpYmx5VW5oYW5kbGVkUmVqZWN0aW9uKHZhbHVlLCBwcm9taXNlKTtcbiAgICAgIH1cbiAgICB9LCAwKTtcbiAgfVxufVxuXG4vKipcbiAqIEEgcGFydGlhbCBhcHBsaWNhdGlvbiBvZiBhZG9wdC5cbiAqXG4gKiBAcGFyYW0geyFQcm9taXNlfSBwcm9taXNlXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHRoaXM6UHJvbWlzZSwqPSxmdW5jdGlvbigqPSksZnVuY3Rpb24oKj0pLERlZmVycmVkKTohUHJvbWlzZX0gc3RhdGVcbiAqIEByZXR1cm5zIHtmdW5jdGlvbigqPSl9XG4gKi9cbmZ1bmN0aW9uIGFkb3B0ZXIocHJvbWlzZSwgc3RhdGUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgYWRvcHQocHJvbWlzZSwgc3RhdGUsIHZhbHVlKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBVcGRhdGVzIGEgZGVmZXJyZWQgcHJvbWlzZXMgc3RhdGUuIE5lY2Vzc2FyeSBmb3IgdXBkYXRpbmcgYW4gYWRvcHRpbmdcbiAqIHByb21pc2UncyBzdGF0ZSB3aGVuIHRoZSBhZG9wdGVlIHJlc29sdmVzLlxuICpcbiAqIEBwYXJhbSB7P0RlZmVycmVkfSBkZWZlcnJlZFxuICogQHBhcmFtIHtmdW5jdGlvbih0aGlzOlByb21pc2UsKj0sZnVuY3Rpb24oKj0pLGZ1bmN0aW9uKCo9KSxEZWZlcnJlZCk6IVByb21pc2V9IHN0YXRlXG4gKiBAcGFyYW0geyo9fSB2YWx1ZVxuICovXG5mdW5jdGlvbiBkZWZlcnJlZEFkb3B0KGRlZmVycmVkLCBzdGF0ZSwgdmFsdWUpIHtcbiAgaWYgKGRlZmVycmVkKSB7XG4gICAgdmFyIHByb21pc2UgPSBkZWZlcnJlZC5wcm9taXNlO1xuICAgIHByb21pc2UuX3N0YXRlID0gc3RhdGU7XG4gICAgcHJvbWlzZS5fdmFsdWUgPSB2YWx1ZTtcbiAgfVxufVxuXG4vKipcbiAqIEEgbm8tb3AgZnVuY3Rpb24gdG8gcHJldmVudCBkb3VibGUgcmVzb2x2aW5nLlxuICovXG5mdW5jdGlvbiBub29wKCkge31cblxuLyoqXG4gKiBUZXN0cyBpZiBmbiBpcyBhIEZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHsqfSBmblxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oZm4pIHtcbiAgcmV0dXJuIHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuLyoqXG4gKiBUZXN0cyBpZiBmbiBpcyBhbiBPYmplY3RcbiAqXG4gKiBAcGFyYW0geyp9IG9ialxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KG9iaikge1xuICByZXR1cm4gb2JqID09PSBPYmplY3Qob2JqKTtcbn1cblxuLyoqXG4gKiBJdGVyYXRlcyBvdmVyIGVhY2ggZWxlbWVudCBvZiBhbiBhcnJheSwgY2FsbGluZyB0aGUgaXRlcmF0b3Igd2l0aCB0aGVcbiAqIGVsZW1lbnQgYW5kIGl0cyBpbmRleC5cbiAqXG4gKiBAcGFyYW0geyFBcnJheX0gY29sbGVjdGlvblxuICogQHBhcmFtIHtmdW5jdGlvbigqPSxudW1iZXIpfSBpdGVyYXRvclxuICovXG5mdW5jdGlvbiBlYWNoKGNvbGxlY3Rpb24sIGl0ZXJhdG9yKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgY29sbGVjdGlvbi5sZW5ndGg7IGkrKykge1xuICAgIGl0ZXJhdG9yKGNvbGxlY3Rpb25baV0sIGkpO1xuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBhdHRlbXB0IHRvIHJlc29sdmUgdGhlIGRlZmVycmVkIHdpdGggdGhlIHJldHVyblxuICogb2YgZm4uIElmIGFueSBlcnJvciBpcyByYWlzZWQsIHJlamVjdHMgaW5zdGVhZC5cbiAqXG4gKiBAcGFyYW0geyFEZWZlcnJlZH0gZGVmZXJyZWRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKj0pfSBmblxuICogQHBhcmFtIHsqfSBhcmdcbiAqIEByZXR1cm5zIHtmdW5jdGlvbigpfVxuICovXG5mdW5jdGlvbiB0cnlDYXRjaERlZmVycmVkKGRlZmVycmVkLCBmbiwgYXJnKSB7XG4gIHZhciBwcm9taXNlID0gZGVmZXJyZWQucHJvbWlzZTtcbiAgdmFyIHJlc29sdmUgPSBkZWZlcnJlZC5yZXNvbHZlO1xuICB2YXIgcmVqZWN0ID0gZGVmZXJyZWQucmVqZWN0O1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciByZXN1bHQgPSBmbihhcmcpO1xuICAgICAgZG9SZXNvbHZlKHByb21pc2UsIHJlc29sdmUsIHJlamVjdCwgcmVzdWx0LCByZXN1bHQpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJlamVjdChlKTtcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogUXVldWVzIGFuZCBleGVjdXRlcyBtdWx0aXBsZSBkZWZlcnJlZCBmdW5jdGlvbnMgb24gYW5vdGhlciBydW4gbG9vcC5cbiAqL1xudmFyIGRlZmVyID0gKGZ1bmN0aW9uKCkge1xuICAvKipcbiAgICogRGVmZXJzIGZuIHRvIGFub3RoZXIgcnVuIGxvb3AuXG4gICAqL1xuICB2YXIgc2NoZWR1bGVGbHVzaDtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5wb3N0TWVzc2FnZSkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZmx1c2gpO1xuICAgIHNjaGVkdWxlRmx1c2ggPSBmdW5jdGlvbigpIHtcbiAgICAgIHdpbmRvdy5wb3N0TWVzc2FnZSgnbWFjcm8tdGFzaycsICcqJyk7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBzY2hlZHVsZUZsdXNoID0gZnVuY3Rpb24oKSB7XG4gICAgICBzZXRUaW1lb3V0KGZsdXNoLCAwKTtcbiAgICB9O1xuICB9XG5cbiAgdmFyIHF1ZXVlID0gbmV3IEFycmF5KDE2KTtcbiAgdmFyIGxlbmd0aCA9IDA7XG5cbiAgZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGZuID0gcXVldWVbaV07XG4gICAgICBxdWV1ZVtpXSA9IG51bGw7XG4gICAgICBmbigpO1xuICAgIH1cbiAgICBsZW5ndGggPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gZm5cbiAgICovXG4gIGZ1bmN0aW9uIGRlZmVyKGZuKSB7XG4gICAgaWYgKGxlbmd0aCA9PT0gMCkgeyBzY2hlZHVsZUZsdXNoKCk7IH1cbiAgICBxdWV1ZVtsZW5ndGgrK10gPSBmbjtcbiAgfVxuXG4gIHJldHVybiBkZWZlcjtcbn0pKCk7XG5cbi8qKlxuICogVGhlIFByb21pc2UgcmVzb2x1dGlvbiBwcm9jZWR1cmUuXG4gKiBodHRwczovL2dpdGh1Yi5jb20vcHJvbWlzZXMtYXBsdXMvcHJvbWlzZXMtc3BlYyN0aGUtcHJvbWlzZS1yZXNvbHV0aW9uLXByb2NlZHVyZVxuICpcbiAqIEBwYXJhbSB7IVByb21pc2V9IHByb21pc2VcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKj0pfSByZXNvbHZlXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCo9KX0gcmVqZWN0XG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcGFyYW0geyo9fSBjb250ZXh0XG4gKi9cbmZ1bmN0aW9uIGRvUmVzb2x2ZShwcm9taXNlLCByZXNvbHZlLCByZWplY3QsIHZhbHVlLCBjb250ZXh0KSB7XG4gIHZhciBfcmVqZWN0ID0gcmVqZWN0O1xuICB2YXIgdGhlbjtcbiAgdmFyIF9yZXNvbHZlO1xuICB0cnkge1xuICAgIGlmICh2YWx1ZSA9PT0gcHJvbWlzZSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGZ1bGZpbGwgcHJvbWlzZSB3aXRoIGl0c2VsZicpO1xuICAgIH1cbiAgICB2YXIgaXNPYmogPSBpc09iamVjdCh2YWx1ZSk7XG4gICAgaWYgKGlzT2JqICYmIHZhbHVlIGluc3RhbmNlb2YgcHJvbWlzZS5jb25zdHJ1Y3Rvcikge1xuICAgICAgYWRvcHQocHJvbWlzZSwgdmFsdWUuX3N0YXRlLCB2YWx1ZS5fdmFsdWUsIHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKGlzT2JqICYmICh0aGVuID0gdmFsdWUudGhlbikgJiYgaXNGdW5jdGlvbih0aGVuKSkge1xuICAgICAgX3Jlc29sdmUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBfcmVzb2x2ZSA9IF9yZWplY3QgPSBub29wO1xuICAgICAgICBkb1Jlc29sdmUocHJvbWlzZSwgcmVzb2x2ZSwgcmVqZWN0LCB2YWx1ZSwgdmFsdWUpO1xuICAgICAgfTtcbiAgICAgIF9yZWplY3QgPSBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAgICAgX3Jlc29sdmUgPSBfcmVqZWN0ID0gbm9vcDtcbiAgICAgICAgcmVqZWN0KHJlYXNvbik7XG4gICAgICB9O1xuICAgICAgdGhlbi5jYWxsKFxuICAgICAgICBjb250ZXh0LFxuICAgICAgICBmdW5jdGlvbih2YWx1ZSkgeyBfcmVzb2x2ZSh2YWx1ZSk7IH0sXG4gICAgICAgIGZ1bmN0aW9uKHJlYXNvbikgeyBfcmVqZWN0KHJlYXNvbik7IH1cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIF9yZWplY3QoZSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBQcm9taXNlO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7ZGV2fSBmcm9tICcuL2xvZyc7XG5pbXBvcnQge2RpY3R9IGZyb20gJy4vdXRpbHMvb2JqZWN0JztcbmltcG9ydCB7aW50ZXJuYWxMaXN0ZW5JbXBsZW1lbnRhdGlvbn0gZnJvbSAnLi9ldmVudC1oZWxwZXItbGlzdGVuJztcbmltcG9ydCB7cGFyc2VKc29ufSBmcm9tICcuL2pzb24nO1xuXG5cbi8qKiBAY29uc3QgKi9cbmNvbnN0IEFNUF9NRVNTQUdFX1BSRUZJWCA9ICdhbXAtJztcbmV4cG9ydCBjb25zdCBDT05TVEFOVFMgPSB7XG4gIHJlc3BvbnNlVHlwZVN1ZmZpeDogJy1yZXN1bHQnLFxuICBtZXNzYWdlSWRGaWVsZE5hbWU6ICdtZXNzYWdlSWQnLFxuICBwYXlsb2FkRmllbGROYW1lOiAncGF5bG9hZCcsXG4gIGNvbnRlbnRGaWVsZE5hbWU6ICdjb250ZW50Jyxcbn07XG5cbi8qKiBAZW51bSB7c3RyaW5nfSAqL1xuZXhwb3J0IGNvbnN0IE1lc3NhZ2VUeXBlID0ge1xuICAvLyBGb3IgYW1wLWFkXG4gIFNFTkRfRU1CRURfU1RBVEU6ICdzZW5kLWVtYmVkLXN0YXRlJyxcbiAgRU1CRURfU1RBVEU6ICdlbWJlZC1zdGF0ZScsXG4gIFNFTkRfRU1CRURfQ09OVEVYVDogJ3NlbmQtZW1iZWQtY29udGV4dCcsXG4gIEVNQkVEX0NPTlRFWFQ6ICdlbWJlZC1jb250ZXh0JyxcbiAgU0VORF9JTlRFUlNFQ1RJT05TOiAnc2VuZC1pbnRlcnNlY3Rpb25zJyxcbiAgSU5URVJTRUNUSU9OOiAnaW50ZXJzZWN0aW9uJyxcbiAgRU1CRURfU0laRTogJ2VtYmVkLXNpemUnLFxuICBFTUJFRF9TSVpFX0NIQU5HRUQ6ICdlbWJlZC1zaXplLWNoYW5nZWQnLFxuICBFTUJFRF9TSVpFX0RFTklFRDogJ2VtYmVkLXNpemUtZGVuaWVkJyxcbiAgTk9fQ09OVEVOVDogJ25vLWNvbnRlbnQnLFxuICBHRVRfSFRNTDogJ2dldC1odG1sJyxcbiAgR0VUX0NPTlNFTlRfU1RBVEU6ICdnZXQtY29uc2VudC1zdGF0ZScsXG5cbiAgLy8gRm9yIHRoZSBmcmFtZSB0byBiZSBwbGFjZWQgaW4gZnVsbCBvdmVybGF5IG1vZGUgZm9yIGxpZ2h0Ym94ZXNcbiAgRlVMTF9PVkVSTEFZX0ZSQU1FOiAnZnVsbC1vdmVybGF5LWZyYW1lJyxcbiAgRlVMTF9PVkVSTEFZX0ZSQU1FX1JFU1BPTlNFOiAnZnVsbC1vdmVybGF5LWZyYW1lLXJlc3BvbnNlJyxcbiAgQ0FOQ0VMX0ZVTExfT1ZFUkxBWV9GUkFNRTogJ2NhbmNlbC1mdWxsLW92ZXJsYXktZnJhbWUnLFxuICBDQU5DRUxfRlVMTF9PVkVSTEFZX0ZSQU1FX1JFU1BPTlNFOiAnY2FuY2VsLWZ1bGwtb3ZlcmxheS1mcmFtZS1yZXNwb25zZScsXG5cbiAgLy8gRm9yIGFtcC1pbmFib3hcbiAgU0VORF9QT1NJVElPTlM6ICdzZW5kLXBvc2l0aW9ucycsXG4gIFBPU0lUSU9OOiAncG9zaXRpb24nLFxuXG4gIC8vIEZvciBhbXAtYW5hbHl0aWNzJyBpZnJhbWUtdHJhbnNwb3J0XG4gIFNFTkRfSUZSQU1FX1RSQU5TUE9SVF9FVkVOVFM6ICdzZW5kLWlmcmFtZS10cmFuc3BvcnQtZXZlbnRzJyxcbiAgSUZSQU1FX1RSQU5TUE9SVF9FVkVOVFM6ICdpZnJhbWUtdHJhbnNwb3J0LWV2ZW50cycsXG4gIElGUkFNRV9UUkFOU1BPUlRfUkVTUE9OU0U6ICdpZnJhbWUtdHJhbnNwb3J0LXJlc3BvbnNlJyxcblxuICAvLyBGb3IgdXNlci1lcnJvci1pbi1pZnJhbWVcbiAgVVNFUl9FUlJPUl9JTl9JRlJBTUU6ICd1c2VyLWVycm9yLWluLWlmcmFtZScsXG59O1xuXG4vKipcbiAqIExpc3RlbnMgZm9yIHRoZSBzcGVjaWZpZWQgZXZlbnQgb24gdGhlIGVsZW1lbnQuXG4gKiBAcGFyYW0geyFFdmVudFRhcmdldH0gZWxlbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50VHlwZVxuICogQHBhcmFtIHtmdW5jdGlvbighRXZlbnQpfSBsaXN0ZW5lclxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRfZXZ0TGlzdGVuZXJPcHRzXG4gKiBAcmV0dXJuIHshVW5saXN0ZW5EZWZ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4oZWxlbWVudCwgZXZlbnRUeXBlLCBsaXN0ZW5lciwgb3B0X2V2dExpc3RlbmVyT3B0cykge1xuICByZXR1cm4gaW50ZXJuYWxMaXN0ZW5JbXBsZW1lbnRhdGlvbihcbiAgICAgIGVsZW1lbnQsIGV2ZW50VHlwZSwgbGlzdGVuZXIsIG9wdF9ldnRMaXN0ZW5lck9wdHMpO1xufVxuXG5cbi8qKlxuICogU2VyaWFsaXplIGFuIEFNUCBwb3N0IG1lc3NhZ2UuIE91dHB1dCBsb29rcyBsaWtlOlxuICogJ2FtcC0wMTE0ODEzMjMwOTk0OTB7XCJ0eXBlXCI6XCJwb3NpdGlvblwiLFwic2VudGluZWxcIjpcIjEyMzQ1XCIsXCJmb29cIjpcImJhclwifSdcbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlXG4gKiBAcGFyYW0ge3N0cmluZ30gc2VudGluZWxcbiAqIEBwYXJhbSB7SnNvbk9iamVjdD19IGRhdGFcbiAqIEBwYXJhbSB7P3N0cmluZz19IHJ0dlZlcnNpb25cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZU1lc3NhZ2UodHlwZSwgc2VudGluZWwsIGRhdGEgPSBkaWN0KCksXG4gIHJ0dlZlcnNpb24gPSBudWxsKSB7XG4gIC8vIFRPRE86IGNvbnNpZGVyIHdyYXAgdGhlIGRhdGEgaW4gYSBcImRhdGFcIiBmaWVsZC4geyB0eXBlLCBzZW50aW5hbCwgZGF0YSB9XG4gIGNvbnN0IG1lc3NhZ2UgPSBkYXRhO1xuICBtZXNzYWdlWyd0eXBlJ10gPSB0eXBlO1xuICBtZXNzYWdlWydzZW50aW5lbCddID0gc2VudGluZWw7XG4gIHJldHVybiBBTVBfTUVTU0FHRV9QUkVGSVggKyAocnR2VmVyc2lvbiB8fCAnJykgKyBKU09OLnN0cmluZ2lmeShtZXNzYWdlKTtcbn1cblxuXG4vKipcbiAqIERlc2VyaWFsaXplIGFuIEFNUCBwb3N0IG1lc3NhZ2UuXG4gKiBSZXR1cm5zIG51bGwgaWYgaXQncyBub3QgdmFsaWQgQU1QIG1lc3NhZ2UgZm9ybWF0LlxuICpcbiAqIEBwYXJhbSB7Kn0gbWVzc2FnZVxuICogQHJldHVybiB7P0pzb25PYmplY3R8dW5kZWZpbmVkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVzZXJpYWxpemVNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgaWYgKCFpc0FtcE1lc3NhZ2UobWVzc2FnZSkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBzdGFydFBvcyA9IG1lc3NhZ2UuaW5kZXhPZigneycpO1xuICBkZXYoKS5hc3NlcnQoc3RhcnRQb3MgIT0gLTEsICdKU09OIG1pc3NpbmcgaW4gJXMnLCBtZXNzYWdlKTtcbiAgdHJ5IHtcbiAgICByZXR1cm4gcGFyc2VKc29uKG1lc3NhZ2Uuc3Vic3RyKHN0YXJ0UG9zKSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBkZXYoKS5lcnJvcignTUVTU0FHSU5HJywgJ0ZhaWxlZCB0byBwYXJzZSBtZXNzYWdlOiAnICsgbWVzc2FnZSwgZSk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuXG4vKipcbiAqICBSZXR1cm5zIHRydWUgaWYgbWVzc2FnZSBsb29rcyBsaWtlIGl0IGlzIGFuIEFNUCBwb3N0TWVzc2FnZVxuICogIEBwYXJhbSB7Kn0gbWVzc2FnZVxuICogIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0FtcE1lc3NhZ2UobWVzc2FnZSkge1xuICByZXR1cm4gKHR5cGVvZiBtZXNzYWdlID09ICdzdHJpbmcnICYmXG4gICAgICBtZXNzYWdlLmluZGV4T2YoQU1QX01FU1NBR0VfUFJFRklYKSA9PSAwICYmXG4gICAgICBtZXNzYWdlLmluZGV4T2YoJ3snKSAhPSAtMSk7XG59XG5cbi8qKiBAdHlwZWRlZiB7e2NyZWF0aXZlSWQ6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nfX0gKi9cbmV4cG9ydCBsZXQgSWZyYW1lVHJhbnNwb3J0RXZlbnQ7XG4vLyBBbiBldmVudCwgYW5kIHRoZSB0cmFuc3BvcnQgSUQgb2YgdGhlIGFtcC1hbmFseXRpY3MgdGFncyB0aGF0XG4vLyBnZW5lcmF0ZWQgaXQuIEZvciBpbnN0YW5jZSBpZiB0aGUgY3JlYXRpdmUgd2l0aCB0cmFuc3BvcnRcbi8vIElEIDIgc2VuZHMgXCJoaVwiLCB0aGVuIGFuIElmcmFtZVRyYW5zcG9ydEV2ZW50IHdvdWxkIGxvb2sgbGlrZTpcbi8vIHsgY3JlYXRpdmVJZDogXCIyXCIsIG1lc3NhZ2U6IFwiaGlcIiB9XG4vLyBJZiB0aGUgY3JlYXRpdmUgd2l0aCB0cmFuc3BvcnQgSUQgMiBzZW50IHRoYXQsIGFuZCBhbHNvIHNlbnQgXCJoZWxsb1wiLFxuLy8gYW5kIHRoZSBjcmVhdGl2ZSB3aXRoIHRyYW5zcG9ydCBJRCAzIHNlbmRzIFwiZ29vZGJ5ZVwiIHRoZW4gYW4gKmFycmF5KiBvZiAzXG4vLyBBbXBBbmFseXRpY3NJZnJhbWVUcmFuc3BvcnRFdmVudCB3b3VsZCBiZSBzZW50IHRvIHRoZSAzcCBmcmFtZSBsaWtlIHNvOlxuLy8gW1xuLy8gICB7IGNyZWF0aXZlSWQ6IFwiMlwiLCBtZXNzYWdlOiBcImhpXCIgfSwgLy8gQW4gQW1wQW5hbHl0aWNzSWZyYW1lVHJhbnNwb3J0RXZlbnRcbi8vICAgeyBjcmVhdGl2ZUlkOiBcIjJcIiwgbWVzc2FnZTogXCJoZWxsb1wiIH0sIC8vIEFub3RoZXJcbi8vICAgeyBjcmVhdGl2ZUlkOiBcIjNcIiwgbWVzc2FnZTogXCJnb29kYnllXCIgfSAvLyBBbmQgYW5vdGhlclxuLy8gXVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7YXNzZXJ0SHR0cHNVcmwsIHBhcnNlVXJsRGVwcmVjYXRlZH0gZnJvbSAnLi91cmwnO1xuaW1wb3J0IHtkZXYsIHVzZXJ9IGZyb20gJy4vbG9nJztcbmltcG9ydCB7ZGljdH0gZnJvbSAnLi91dGlscy9vYmplY3QnO1xuaW1wb3J0IHtnZXRDb250ZXh0TWV0YWRhdGF9IGZyb20gJy4uL3NyYy9pZnJhbWUtYXR0cmlidXRlcyc7XG5pbXBvcnQge2dldE1vZGV9IGZyb20gJy4vbW9kZSc7XG5pbXBvcnQge2lzRXhwZXJpbWVudE9ufSBmcm9tICcuL2V4cGVyaW1lbnRzJztcbmltcG9ydCB7c2V0U3R5bGV9IGZyb20gJy4vc3R5bGUnO1xuaW1wb3J0IHtzdGFydHNXaXRofSBmcm9tICcuL3N0cmluZyc7XG5pbXBvcnQge3RyeVBhcnNlSnNvbn0gZnJvbSAnLi9qc29uJztcbmltcG9ydCB7dXJsc30gZnJvbSAnLi9jb25maWcnO1xuXG4vKiogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLG51bWJlcj59IE51bWJlciBvZiAzcCBmcmFtZXMgb24gdGhlIGZvciB0aGF0IHR5cGUuICovXG5sZXQgY291bnQgPSB7fTtcblxuLyoqIEB0eXBlIHtzdHJpbmd9ICovXG5sZXQgb3ZlcnJpZGVCb290c3RyYXBCYXNlVXJsO1xuXG4vKiogQGNvbnN0IHtzdHJpbmd9ICovXG5jb25zdCBUQUcgPSAnM3AtZnJhbWUnO1xuXG4vKipcbiAqIFByb2R1Y2VzIHRoZSBhdHRyaWJ1dGVzIGZvciB0aGUgYWQgdGVtcGxhdGUuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHBhcmVudFdpbmRvd1xuICogQHBhcmFtIHshQW1wRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfdHlwZVxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRfY29udGV4dFxuICogQHJldHVybiB7IUpzb25PYmplY3R9IENvbnRhaW5zXG4gKiAgICAgLSB0eXBlLCB3aWR0aCwgaGVpZ2h0LCBzcmMgYXR0cmlidXRlcyBvZiA8YW1wLWFkPiB0YWcuIFRoZXNlIGhhdmVcbiAqICAgICAgIHByZWNlZGVuY2Ugb3ZlciB0aGUgZGF0YS0gYXR0cmlidXRlcy5cbiAqICAgICAtIGRhdGEtKiBhdHRyaWJ1dGVzIG9mIHRoZSA8YW1wLWFkPiB0YWcgd2l0aCB0aGUgXCJkYXRhLVwiIHJlbW92ZWQuXG4gKiAgICAgLSBBIF9jb250ZXh0IG9iamVjdCBmb3IgaW50ZXJuYWwgdXNlLlxuICovXG5mdW5jdGlvbiBnZXRGcmFtZUF0dHJpYnV0ZXMocGFyZW50V2luZG93LCBlbGVtZW50LCBvcHRfdHlwZSwgb3B0X2NvbnRleHQpIHtcbiAgY29uc3QgdHlwZSA9IG9wdF90eXBlIHx8IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0eXBlJyk7XG4gIHVzZXIoKS5hc3NlcnQodHlwZSwgJ0F0dHJpYnV0ZSB0eXBlIHJlcXVpcmVkIGZvciA8YW1wLWFkPjogJXMnLCBlbGVtZW50KTtcbiAgY29uc3Qgc2VudGluZWwgPSBnZW5lcmF0ZVNlbnRpbmVsKHBhcmVudFdpbmRvdyk7XG4gIGxldCBhdHRyaWJ1dGVzID0gZGljdCgpO1xuICAvLyBEbyB0aGVzZSBmaXJzdCwgYXMgdGhlIG90aGVyIGF0dHJpYnV0ZXMgaGF2ZSBwcmVjZWRlbmNlLlxuICBhZGREYXRhQW5kSnNvbkF0dHJpYnV0ZXNfKGVsZW1lbnQsIGF0dHJpYnV0ZXMpO1xuICBhdHRyaWJ1dGVzID0gZ2V0Q29udGV4dE1ldGFkYXRhKHBhcmVudFdpbmRvdywgZWxlbWVudCwgc2VudGluZWwsXG4gICAgICBhdHRyaWJ1dGVzKTtcbiAgYXR0cmlidXRlc1sndHlwZSddID0gdHlwZTtcbiAgT2JqZWN0LmFzc2lnbihhdHRyaWJ1dGVzWydfY29udGV4dCddLCBvcHRfY29udGV4dCk7XG4gIHJldHVybiBhdHRyaWJ1dGVzO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgdGhlIGlmcmFtZSBmb3IgdGhlIGVtYmVkLiBBcHBsaWVzIGNvcnJlY3Qgc2l6ZSBhbmQgcGFzc2VzIHRoZSBlbWJlZFxuICogYXR0cmlidXRlcyB0byB0aGUgZnJhbWUgdmlhIEpTT04gaW5zaWRlIHRoZSBmcmFnbWVudC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gcGFyZW50V2luZG93XG4gKiBAcGFyYW0geyFBbXBFbGVtZW50fSBwYXJlbnRFbGVtZW50XG4gKiBAcGFyYW0ge3N0cmluZz19IG9wdF90eXBlXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdF9jb250ZXh0XG4gKiBAcGFyYW0geyF7XG4gKiAgIGRpc2FsbG93Q3VzdG9tLFxuICogICBhbGxvd0Z1bGxzY3JlZW4sXG4gKiB9PX0gb3B0X29wdGlvbnMgT3B0aW9ucyBmb3IgdGhlIGNyZWF0ZWQgaWZyYW1lLlxuICogQHJldHVybiB7IUVsZW1lbnR9IFRoZSBpZnJhbWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRJZnJhbWUoXG4gIHBhcmVudFdpbmRvdywgcGFyZW50RWxlbWVudCwgb3B0X3R5cGUsIG9wdF9jb250ZXh0LFxuICB7ZGlzYWxsb3dDdXN0b20sIGFsbG93RnVsbHNjcmVlbn0gPSB7fSkge1xuICAvLyBDaGVjayB0aGF0IHRoZSBwYXJlbnRFbGVtZW50IGlzIGFscmVhZHkgaW4gRE9NLiBUaGlzIGNvZGUgdXNlcyBhIG5ldyBhbmRcbiAgLy8gZmFzdCBgaXNDb25uZWN0ZWRgIEFQSSBhbmQgdGh1cyBvbmx5IHVzZWQgd2hlbiBpdCdzIGF2YWlsYWJsZS5cbiAgZGV2KCkuYXNzZXJ0KFxuICAgICAgcGFyZW50RWxlbWVudFsnaXNDb25uZWN0ZWQnXSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICBwYXJlbnRFbGVtZW50Wydpc0Nvbm5lY3RlZCddID09PSB0cnVlLFxuICAgICAgJ1BhcmVudCBlbGVtZW50IG11c3QgYmUgaW4gRE9NJyk7XG4gIGNvbnN0IGF0dHJpYnV0ZXMgPVxuICAgICAgZ2V0RnJhbWVBdHRyaWJ1dGVzKHBhcmVudFdpbmRvdywgcGFyZW50RWxlbWVudCwgb3B0X3R5cGUsIG9wdF9jb250ZXh0KTtcbiAgY29uc3QgaWZyYW1lID0gcGFyZW50V2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuXG4gIGlmICghY291bnRbYXR0cmlidXRlc1sndHlwZSddXSkge1xuICAgIGNvdW50W2F0dHJpYnV0ZXNbJ3R5cGUnXV0gPSAwO1xuICB9XG4gIGNvdW50W2F0dHJpYnV0ZXNbJ3R5cGUnXV0gKz0gMTtcblxuICBjb25zdCBiYXNlVXJsID0gZ2V0Qm9vdHN0cmFwQmFzZVVybChcbiAgICAgIHBhcmVudFdpbmRvdywgdW5kZWZpbmVkLCBvcHRfdHlwZSwgZGlzYWxsb3dDdXN0b20pO1xuICBjb25zdCBob3N0ID0gcGFyc2VVcmxEZXByZWNhdGVkKGJhc2VVcmwpLmhvc3RuYW1lO1xuICAvLyBUaGlzIG5hbWUgYXR0cmlidXRlIG1heSBiZSBvdmVyd3JpdHRlbiBpZiB0aGlzIGZyYW1lIGlzIGNob3NlbiB0b1xuICAvLyBiZSB0aGUgbWFzdGVyIGZyYW1lLiBUaGF0IGlzIG9rLCBhcyB3ZSB3aWxsIHJlYWQgdGhlIG5hbWUgb2ZmXG4gIC8vIGZvciBvdXIgdXNlcyBiZWZvcmUgdGhhdCB3b3VsZCBvY2N1ci5cbiAgLy8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vYW1wcHJvamVjdC9hbXBodG1sL2Jsb2IvbWFzdGVyLzNwL2ludGVncmF0aW9uLmpzXG4gIGNvbnN0IG5hbWUgPSBKU09OLnN0cmluZ2lmeShkaWN0KHtcbiAgICAnaG9zdCc6IGhvc3QsXG4gICAgJ3R5cGUnOiBhdHRyaWJ1dGVzWyd0eXBlJ10sXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FtcHByb2plY3QvYW1waHRtbC9wdWxsLzI5NTVcbiAgICAnY291bnQnOiBjb3VudFthdHRyaWJ1dGVzWyd0eXBlJ11dLFxuICAgICdhdHRyaWJ1dGVzJzogYXR0cmlidXRlcyxcbiAgfSkpO1xuXG4gIGlmcmFtZS5zcmMgPSBiYXNlVXJsO1xuICBpZnJhbWUuYW1wTG9jYXRpb24gPSBwYXJzZVVybERlcHJlY2F0ZWQoYmFzZVVybCk7XG4gIGlmcmFtZS5uYW1lID0gbmFtZTtcbiAgLy8gQWRkIHRoZSBjaGVjayBiZWZvcmUgYXNzaWduaW5nIHRvIHByZXZlbnQgSUUgdGhyb3cgSW52YWxpZCBhcmd1bWVudCBlcnJvclxuICBpZiAoYXR0cmlidXRlc1snd2lkdGgnXSkge1xuICAgIGlmcmFtZS53aWR0aCA9IGF0dHJpYnV0ZXNbJ3dpZHRoJ107XG4gIH1cbiAgaWYgKGF0dHJpYnV0ZXNbJ2hlaWdodCddKSB7XG4gICAgaWZyYW1lLmhlaWdodCA9IGF0dHJpYnV0ZXNbJ2hlaWdodCddO1xuICB9XG4gIGlmIChhdHRyaWJ1dGVzWyd0aXRsZSddKSB7XG4gICAgaWZyYW1lLnRpdGxlID0gYXR0cmlidXRlc1sndGl0bGUnXTtcbiAgfVxuICBpZiAoYWxsb3dGdWxsc2NyZWVuKSB7XG4gICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnYWxsb3dmdWxsc2NyZWVuJywgJ3RydWUnKTtcbiAgfVxuICBpZnJhbWUuc2V0QXR0cmlidXRlKCdzY3JvbGxpbmcnLCAnbm8nKTtcbiAgc2V0U3R5bGUoaWZyYW1lLCAnYm9yZGVyJywgJ25vbmUnKTtcbiAgLyoqIEB0aGlzIHshRWxlbWVudH0gKi9cbiAgaWZyYW1lLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIENocm9tZSBkb2VzIG5vdCByZWZsZWN0IHRoZSBpZnJhbWUgcmVhZHlzdGF0ZS5cbiAgICB0aGlzLnJlYWR5U3RhdGUgPSAnY29tcGxldGUnO1xuICB9O1xuICBpZiAoaXNFeHBlcmltZW50T24ocGFyZW50V2luZG93LCAnbm8tc3luYy14aHItaW4tYWRzJykpIHtcbiAgICAvLyBCbG9jayBzeW5jaHJvbm91cyBYSFIgaW4gYWQuIFRoZXNlIGFyZSB2ZXJ5IHJhcmUsIGJ1dCBzdXBlciBiYWQgZm9yIFVYXG4gICAgLy8gYXMgdGhleSBibG9jayB0aGUgVUkgdGhyZWFkIGZvciB0aGUgYXJiaXRyYXJ5IGFtb3VudCBvZiB0aW1lIHVudGlsIHRoZVxuICAgIC8vIHJlcXVlc3QgY29tcGxldGVzLlxuICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ2FsbG93JywgJ3N5bmMteGhyIFxcJ25vbmVcXCc7Jyk7XG4gIH1cbiAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnZGF0YS1hbXAtM3Atc2VudGluZWwnLFxuICAgICAgYXR0cmlidXRlc1snX2NvbnRleHQnXVsnc2VudGluZWwnXSk7XG4gIHJldHVybiBpZnJhbWU7XG59XG5cbi8qKlxuICogQ29waWVzIGRhdGEtIGF0dHJpYnV0ZXMgZnJvbSB0aGUgZWxlbWVudCBpbnRvIHRoZSBhdHRyaWJ1dGVzIG9iamVjdC5cbiAqIFJlbW92ZXMgdGhlIGRhdGEtIGZyb20gdGhlIG5hbWUgYW5kIGNhcGl0YWxpemVzIGFmdGVyIC0uIElmIHRoZXJlXG4gKiBpcyBhbiBhdHRyaWJ1dGUgY2FsbGVkIGpzb24sIHBhcnNlcyB0aGUgSlNPTiBhbmQgYWRkcyBpdCB0byB0aGVcbiAqIGF0dHJpYnV0ZXMuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0geyFKc29uT2JqZWN0fSBhdHRyaWJ1dGVzIFRoZSBkZXN0aW5hdGlvbi5cbiAqIHZpc2libGVGb3JUZXN0aW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGREYXRhQW5kSnNvbkF0dHJpYnV0ZXNfKGVsZW1lbnQsIGF0dHJpYnV0ZXMpIHtcbiAgY29uc3Qge2RhdGFzZXR9ID0gZWxlbWVudDtcbiAgZm9yIChjb25zdCBuYW1lIGluIGRhdGFzZXQpIHtcbiAgICAvLyBkYXRhLXZhcnMtIGlzIHJlc2VydmVkIGZvciBhbXAtYW5hbHl0aWNzXG4gICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hbXBwcm9qZWN0L2FtcGh0bWwvYmxvYi9tYXN0ZXIvZXh0ZW5zaW9ucy9hbXAtYW5hbHl0aWNzL2FuYWx5dGljcy12YXJzLm1kI3ZhcmlhYmxlcy1hcy1kYXRhLWF0dHJpYnV0ZVxuICAgIGlmICghc3RhcnRzV2l0aChuYW1lLCAndmFycycpKSB7XG4gICAgICBhdHRyaWJ1dGVzW25hbWVdID0gZGF0YXNldFtuYW1lXTtcbiAgICB9XG4gIH1cbiAgY29uc3QganNvbiA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdqc29uJyk7XG4gIGlmIChqc29uKSB7XG4gICAgY29uc3Qgb2JqID0gdHJ5UGFyc2VKc29uKGpzb24pO1xuICAgIGlmIChvYmogPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgdXNlcigpLmNyZWF0ZUVycm9yKFxuICAgICAgICAgICdFcnJvciBwYXJzaW5nIEpTT04gaW4ganNvbiBhdHRyaWJ1dGUgaW4gZWxlbWVudCAlcycsXG4gICAgICAgICAgZWxlbWVudCk7XG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xuICAgICAgYXR0cmlidXRlc1trZXldID0gb2JqW2tleV07XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogUHJlbG9hZHMgVVJMcyByZWxhdGVkIHRvIHRoZSBib290c3RyYXAgaWZyYW1lLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7IS4vcHJlY29ubmVjdC5QcmVjb25uZWN0fSBwcmVjb25uZWN0XG4gKiBAcGFyYW0ge3N0cmluZz19IG9wdF90eXBlXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfZGlzYWxsb3dDdXN0b20gd2hldGhlciAzcCB1cmwgc2hvdWxkIG5vdCB1c2UgbWV0YSB0YWcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwcmVsb2FkQm9vdHN0cmFwKFxuICB3aW4sIHByZWNvbm5lY3QsIG9wdF90eXBlLCBvcHRfZGlzYWxsb3dDdXN0b20pIHtcbiAgY29uc3QgdXJsID0gZ2V0Qm9vdHN0cmFwQmFzZVVybCh3aW4sIHVuZGVmaW5lZCwgb3B0X3R5cGUsIG9wdF9kaXNhbGxvd0N1c3RvbSk7XG4gIHByZWNvbm5lY3QucHJlbG9hZCh1cmwsICdkb2N1bWVudCcpO1xuXG4gIC8vIFdoaWxlIHRoZSBVUkwgbWF5IHBvaW50IHRvIGEgY3VzdG9tIGRvbWFpbiwgdGhpcyBVUkwgd2lsbCBhbHdheXMgYmVcbiAgLy8gZmV0Y2hlZCBieSBpdC5cbiAgY29uc3Qgc2NyaXB0VXJsID0gZ2V0TW9kZSgpLmxvY2FsRGV2XG4gICAgPyBnZXRBZHNMb2NhbGhvc3Qod2luKSArICcvZGlzdC4zcC9jdXJyZW50L2ludGVncmF0aW9uLmpzJ1xuICAgIDogYCR7dXJscy50aGlyZFBhcnR5fS8kaW50ZXJuYWxSdW50aW1lVmVyc2lvbiQvZi5qc2A7XG4gIHByZWNvbm5lY3QucHJlbG9hZChzY3JpcHRVcmwsICdzY3JpcHQnKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBiYXNlIFVSTCBmb3IgM3AgYm9vdHN0cmFwIGlmcmFtZXMuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHBhcmVudFdpbmRvd1xuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X3N0cmljdEZvclVuaXRUZXN0XG4gKiBAcGFyYW0ge3N0cmluZz19IG9wdF90eXBlXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfZGlzYWxsb3dDdXN0b20gd2hldGhlciAzcCB1cmwgc2hvdWxkIG5vdCB1c2UgbWV0YSB0YWcuXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEJvb3RzdHJhcEJhc2VVcmwoXG4gIHBhcmVudFdpbmRvdywgb3B0X3N0cmljdEZvclVuaXRUZXN0LCBvcHRfdHlwZSwgb3B0X2Rpc2FsbG93Q3VzdG9tKSB7XG4gIC8vIFRoZSB2YWx1ZSBpcyBjYWNoZWQgaW4gYSBnbG9iYWwgdmFyaWFibGUgY2FsbGVkIGBib290c3RyYXBCYXNlVXJsYDtcbiAgY29uc3Qge2Jvb3RzdHJhcEJhc2VVcmx9ID0gcGFyZW50V2luZG93O1xuICBpZiAoYm9vdHN0cmFwQmFzZVVybCkge1xuICAgIHJldHVybiBib290c3RyYXBCYXNlVXJsO1xuICB9XG4gIHJldHVybiBwYXJlbnRXaW5kb3cuYm9vdHN0cmFwQmFzZVVybCA9IGdldEN1c3RvbUJvb3RzdHJhcEJhc2VVcmwoXG4gICAgICBwYXJlbnRXaW5kb3csIG9wdF9zdHJpY3RGb3JVbml0VGVzdCwgb3B0X3R5cGUsIG9wdF9kaXNhbGxvd0N1c3RvbSkgfHxcbiAgICAgIGdldERlZmF1bHRCb290c3RyYXBCYXNlVXJsKHBhcmVudFdpbmRvdyk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0RGVmYXVsdEJvb3RzdHJhcEJhc2VVcmxGb3JUZXN0aW5nKHVybCkge1xuICBvdmVycmlkZUJvb3RzdHJhcEJhc2VVcmwgPSB1cmw7XG59XG5cbi8qKlxuICogQHBhcmFtIHsqfSB3aW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0Qm9vdHN0cmFwQmFzZVVybEZvclRlc3Rpbmcod2luKSB7XG4gIHdpbi5ib290c3RyYXBCYXNlVXJsID0gdW5kZWZpbmVkO1xuICB3aW4uZGVmYXVsdEJvb3RzdHJhcFN1YkRvbWFpbiA9IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBkZWZhdWx0IGJhc2UgVVJMIGZvciAzcCBib290c3RyYXAgaWZyYW1lcy5cbiAqIEBwYXJhbSB7IVdpbmRvd30gcGFyZW50V2luZG93XG4gKiBAcGFyYW0ge3N0cmluZz19IG9wdF9zcmNGaWxlQmFzZW5hbWVcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRCb290c3RyYXBCYXNlVXJsKHBhcmVudFdpbmRvdywgb3B0X3NyY0ZpbGVCYXNlbmFtZSkge1xuICBjb25zdCBzcmNGaWxlQmFzZW5hbWUgPSBvcHRfc3JjRmlsZUJhc2VuYW1lIHx8ICdmcmFtZSc7XG4gIGlmIChnZXRNb2RlKCkubG9jYWxEZXYgfHwgZ2V0TW9kZSgpLnRlc3QpIHtcbiAgICByZXR1cm4gb3ZlcnJpZGVCb290c3RyYXBCYXNlVXJsIHx8IGdldEFkc0xvY2FsaG9zdChwYXJlbnRXaW5kb3cpXG4gICAgICAgICAgKyAnL2Rpc3QuM3AvJ1xuICAgICAgICAgICsgKGdldE1vZGUoKS5taW5pZmllZCA/IGAkaW50ZXJuYWxSdW50aW1lVmVyc2lvbiQvJHtzcmNGaWxlQmFzZW5hbWV9YFxuICAgICAgICAgICAgOiBgY3VycmVudC8ke3NyY0ZpbGVCYXNlbmFtZX0ubWF4YClcbiAgICAgICAgICArICcuaHRtbCc7XG4gIH1cbiAgLy8gRW5zdXJlIHNhbWUgc3ViLWRvbWFpbiBpcyB1c2VkIGRlc3BpdGUgcG90ZW50aWFsbHkgZGlmZmVyZW50IGZpbGUuXG4gIHBhcmVudFdpbmRvdy5kZWZhdWx0Qm9vdHN0cmFwU3ViRG9tYWluID1cbiAgICAgIHBhcmVudFdpbmRvdy5kZWZhdWx0Qm9vdHN0cmFwU3ViRG9tYWluIHx8IGdldFN1YkRvbWFpbihwYXJlbnRXaW5kb3cpO1xuICByZXR1cm4gJ2h0dHBzOi8vJyArIHBhcmVudFdpbmRvdy5kZWZhdWx0Qm9vdHN0cmFwU3ViRG9tYWluICtcbiAgICAgIGAuJHt1cmxzLnRoaXJkUGFydHlGcmFtZUhvc3R9LyRpbnRlcm5hbFJ1bnRpbWVWZXJzaW9uJC9gICtcbiAgICAgIGAke3NyY0ZpbGVCYXNlbmFtZX0uaHRtbGA7XG59XG5cbi8qKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZ2V0QWRzTG9jYWxob3N0KHdpbikge1xuICBsZXQgYWRzVXJsID0gdXJscy50aGlyZFBhcnR5OyAvLyBsb2NhbCBkZXYgd2l0aCBhIG5vbi1sb2NhbGhvc3Qgc2VydmVyXG4gIGlmIChhZHNVcmwuaW5kZXhPZignYW1wcHJvamVjdC5uZXQnKSA+IC0xKSB7XG4gICAgYWRzVXJsID0gJ2h0dHA6Ly9hZHMubG9jYWxob3N0JzsgLy8gbG9jYWwgZGV2IHdpdGggYSBsb2NhbGhvc3Qgc2VydmVyXG4gIH1cbiAgcmV0dXJuIGFkc1VybCArICc6JyArICh3aW4ubG9jYXRpb24ucG9ydCB8fCB3aW4ucGFyZW50LmxvY2F0aW9uLnBvcnQpO1xufVxuXG4vKipcbiAqIFN1YiBkb21haW4gb24gd2hpY2ggdGhlIDNwIGlmcmFtZSB3aWxsIGJlIGhvc3RlZC5cbiAqIEJlY2F1c2Ugd2Ugb25seSBjYWxjdWxhdGUgdGhlIFVSTCBvbmNlIHBlciBwYWdlLCB0aGlzIGZ1bmN0aW9uIGlzIG9ubHlcbiAqIGNhbGxlZCBvbmNlIGFuZCBoZW5jZSBhbGwgZnJhbWVzIG9uIGEgcGFnZSB1c2UgdGhlIHNhbWUgVVJMLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqIEB2aXNpYmxlRm9yVGVzdGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3ViRG9tYWluKHdpbikge1xuICByZXR1cm4gJ2QtJyArIGdldFJhbmRvbSh3aW4pO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlcyBhIHJhbmRvbSBub24tbmVnYXRpdmUgaW50ZWdlci5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSYW5kb20od2luKSB7XG4gIGxldCByYW5kO1xuICBpZiAod2luLmNyeXB0byAmJiB3aW4uY3J5cHRvLmdldFJhbmRvbVZhbHVlcykge1xuICAgIC8vIEJ5IGRlZmF1bHQgdXNlIDIgMzIgYml0IGludGVnZXJzLlxuICAgIGNvbnN0IHVpbnQzMmFycmF5ID0gbmV3IFVpbnQzMkFycmF5KDIpO1xuICAgIHdpbi5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKHVpbnQzMmFycmF5KTtcbiAgICByYW5kID0gU3RyaW5nKHVpbnQzMmFycmF5WzBdKSArIHVpbnQzMmFycmF5WzFdO1xuICB9IGVsc2Uge1xuICAgIC8vIEZhbGwgYmFjayB0byBNYXRoLnJhbmRvbS5cbiAgICByYW5kID0gU3RyaW5nKHdpbi5NYXRoLnJhbmRvbSgpKS5zdWJzdHIoMikgKyAnMCc7XG4gIH1cbiAgcmV0dXJuIHJhbmQ7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgY3VzdG9tIGJhc2UgVVJMIGZvciAzcCBib290c3RyYXAgaWZyYW1lcyBpZiBpdCBleGlzdHMuXG4gKiBPdGhlcndpc2UgbnVsbC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gcGFyZW50V2luZG93XG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfc3RyaWN0Rm9yVW5pdFRlc3RcbiAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X3R5cGVcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9kaXNhbGxvd0N1c3RvbSB3aGV0aGVyIDNwIHVybCBzaG91bGQgbm90IHVzZSBtZXRhIHRhZy5cbiAqIEByZXR1cm4gez9zdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGdldEN1c3RvbUJvb3RzdHJhcEJhc2VVcmwoXG4gIHBhcmVudFdpbmRvdywgb3B0X3N0cmljdEZvclVuaXRUZXN0LCBvcHRfdHlwZSwgb3B0X2Rpc2FsbG93Q3VzdG9tKSB7XG4gIGNvbnN0IG1ldGEgPSBwYXJlbnRXaW5kb3cuZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCdtZXRhW25hbWU9XCJhbXAtM3AtaWZyYW1lLXNyY1wiXScpO1xuICBpZiAoIW1ldGEpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpZiAob3B0X2Rpc2FsbG93Q3VzdG9tKSB7XG4gICAgdXNlcigpLmVycm9yKFRBRywgYDNwIGlmcmFtZSB1cmwgZGlzYWJsZWQgZm9yICR7b3B0X3R5cGUgfHwgJ3Vua25vd24nfWApO1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IHVybCA9IGFzc2VydEh0dHBzVXJsKG1ldGEuZ2V0QXR0cmlidXRlKCdjb250ZW50JyksIG1ldGEpO1xuICB1c2VyKCkuYXNzZXJ0KHVybC5pbmRleE9mKCc/JykgPT0gLTEsXG4gICAgICAnM3AgaWZyYW1lIHVybCBtdXN0IG5vdCBpbmNsdWRlIHF1ZXJ5IHN0cmluZyAlcyBpbiBlbGVtZW50ICVzLicsXG4gICAgICB1cmwsIG1ldGEpO1xuICAvLyBUaGlzIGlzIG5vdCBhIHNlY3VyaXR5IHByaW1pdGl2ZSwgd2UganVzdCBkb24ndCB3YW50IHRoaXMgdG8gaGFwcGVuIGluXG4gIC8vIHByYWN0aWNlLiBQZW9wbGUgY291bGQgc3RpbGwgcmVkaXJlY3QgdG8gdGhlIHNhbWUgb3JpZ2luLCBidXQgdGhleSBjYW5ub3RcbiAgLy8gcmVkaXJlY3QgdG8gdGhlIHByb3h5IG9yaWdpbiB3aGljaCBpcyB0aGUgaW1wb3J0YW50IG9uZS5cbiAgY29uc3QgcGFyc2VkID0gcGFyc2VVcmxEZXByZWNhdGVkKHVybCk7XG4gIHVzZXIoKS5hc3NlcnQoKHBhcnNlZC5ob3N0bmFtZSA9PSAnbG9jYWxob3N0JyAmJiAhb3B0X3N0cmljdEZvclVuaXRUZXN0KSB8fFxuICAgICAgcGFyc2VkLm9yaWdpbiAhPSBwYXJzZVVybERlcHJlY2F0ZWQocGFyZW50V2luZG93LmxvY2F0aW9uLmhyZWYpLm9yaWdpbixcbiAgJzNwIGlmcmFtZSB1cmwgbXVzdCBub3QgYmUgb24gdGhlIHNhbWUgb3JpZ2luIGFzIHRoZSBjdXJyZW50IGRvY3VtZW50ICcgK1xuICAgICAgJyVzICglcykgaW4gZWxlbWVudCAlcy4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hbXBwcm9qZWN0L2FtcGh0bWwnICtcbiAgICAgICcvYmxvYi9tYXN0ZXIvc3BlYy9hbXAtaWZyYW1lLW9yaWdpbi1wb2xpY3kubWQgZm9yIGRldGFpbHMuJywgdXJsLFxuICBwYXJzZWQub3JpZ2luLCBtZXRhKTtcbiAgcmV0dXJuIHVybCArICc/JGludGVybmFsUnVudGltZVZlcnNpb24kJztcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgcmFuZG9taXplZCBzZW50aW5lbCB2YWx1ZSBmb3IgM3AgaWZyYW1lcy5cbiAqIFRoZSBmb3JtYXQgaXMgXCIlZC0lZFwiIHdpdGggdGhlIGZpcnN0IHZhbHVlIGJlaW5nIHRoZSBkZXB0aCBvZiBjdXJyZW50XG4gKiB3aW5kb3cgaW4gdGhlIHdpbmRvdyBoaWVyYXJjaHkgYW5kIHRoZSBzZWNvbmQgYSByYW5kb20gaW50ZWdlci5cbiAqIEBwYXJhbSB7IVdpbmRvd30gcGFyZW50V2luZG93XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlU2VudGluZWwocGFyZW50V2luZG93KSB7XG4gIGxldCB3aW5kb3dEZXB0aCA9IDA7XG4gIGZvciAobGV0IHdpbiA9IHBhcmVudFdpbmRvdzsgd2luICYmIHdpbiAhPSB3aW4ucGFyZW50OyB3aW4gPSB3aW4ucGFyZW50KSB7XG4gICAgd2luZG93RGVwdGgrKztcbiAgfVxuICByZXR1cm4gU3RyaW5nKHdpbmRvd0RlcHRoKSArICctJyArIGdldFJhbmRvbShwYXJlbnRXaW5kb3cpO1xufVxuXG4vKipcbiAqIFJlc2V0cyB0aGUgY291bnQgb2YgZWFjaCAzcCBmcmFtZSB0eXBlXG4gKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0Q291bnRGb3JUZXN0aW5nKCkge1xuICBjb3VudCA9IHt9O1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7U2VydmljZXN9IGZyb20gJy4vc2VydmljZXMnO1xuaW1wb3J0IHthZENvbmZpZ30gZnJvbSAnLi4vYWRzL19jb25maWcnO1xuaW1wb3J0IHtkZXZ9IGZyb20gJy4uL3NyYy9sb2cnO1xuXG4vKipcbiAqIEBwYXJhbSB7QU1QLkJhc2VFbGVtZW50fSBhZEVsZW1lbnRcbiAqIEByZXR1cm4geyFQcm9taXNlPHN0cmluZ3x1bmRlZmluZWQ+fSBBIHByb21pc2UgZm9yIGEgQ0lEIG9yIHVuZGVmaW5lZCBpZlxuICogICAgIC0gdGhlIGFkIG5ldHdvcmsgZG9lcyBub3QgcmVxdWVzdCBvbmUgb3JcbiAqICAgICAtIGBhbXAtYW5hbHl0aWNzYCB3aGljaCBwcm92aWRlcyB0aGUgQ0lEIHNlcnZpY2Ugd2FzIG5vdCBpbnN0YWxsZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBZENpZChhZEVsZW1lbnQpIHtcbiAgY29uc3QgY29uZmlnID0gYWRDb25maWdbYWRFbGVtZW50LmVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0eXBlJyldO1xuICBpZiAoIWNvbmZpZyB8fCAhY29uZmlnLmNsaWVudElkU2NvcGUpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cbiAgcmV0dXJuIGdldE9yQ3JlYXRlQWRDaWQoYWRFbGVtZW50LmdldEFtcERvYygpLCBjb25maWcuY2xpZW50SWRTY29wZSxcbiAgICAgIGNvbmZpZy5jbGllbnRJZENvb2tpZU5hbWUpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGFtcERvY1xuICogQHBhcmFtIHtzdHJpbmd9IGNsaWVudElkU2NvcGVcbiAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X2NsaWVudElkQ29va2llTmFtZVxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfdGltZW91dFxuICogQHJldHVybiB7IVByb21pc2U8c3RyaW5nfHVuZGVmaW5lZD59IEEgcHJvbWlzZSBmb3IgYSBDSUQgb3IgdW5kZWZpbmVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3JDcmVhdGVBZENpZChcbiAgYW1wRG9jLCBjbGllbnRJZFNjb3BlLCBvcHRfY2xpZW50SWRDb29raWVOYW1lLCBvcHRfdGltZW91dCkge1xuICBjb25zdCB0aW1lb3V0ID0gaXNOYU4ob3B0X3RpbWVvdXQpIHx8IG9wdF90aW1lb3V0ID09IG51bGwgP1xuICAgIDEwMDAgOiBvcHRfdGltZW91dDtcbiAgY29uc3QgY2lkUHJvbWlzZSA9IFNlcnZpY2VzLmNpZEZvckRvYyhhbXBEb2MpLnRoZW4oY2lkU2VydmljZSA9PiB7XG4gICAgaWYgKCFjaWRTZXJ2aWNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJldHVybiBjaWRTZXJ2aWNlLmdldCh7XG4gICAgICBzY29wZTogZGV2KCkuYXNzZXJ0U3RyaW5nKGNsaWVudElkU2NvcGUpLFxuICAgICAgY3JlYXRlQ29va2llSWZOb3RQcmVzZW50OiB0cnVlLFxuICAgICAgY29va2llTmFtZTogb3B0X2NsaWVudElkQ29va2llTmFtZSxcbiAgICB9LCBQcm9taXNlLnJlc29sdmUodW5kZWZpbmVkKSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgLy8gTm90IGdldHRpbmcgYSBDSUQgaXMgbm90IGZhdGFsLlxuICAgICAgZGV2KCkuZXJyb3IoJ0FELUNJRCcsIGVycm9yKTtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSk7XG4gIH0pO1xuICAvLyBUaGUgQ0lEIHNob3VsZCBuZXZlciBiZSBjcnVjaWFsIGZvciBhbiBhZC4gSWYgaXQgZG9lcyBub3QgY29tZSB3aXRoaW5cbiAgLy8gMSBzZWNvbmQsIGFzc3VtZSBpdCB3aWxsIG5ldmVyIGFycml2ZS5cbiAgcmV0dXJuIFNlcnZpY2VzLnRpbWVyRm9yKGFtcERvYy53aW4pXG4gICAgICAudGltZW91dFByb21pc2UodGltZW91dCwgY2lkUHJvbWlzZSwgJ2NpZCB0aW1lb3V0JykuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAvLyBUaW1lb3V0IGlzIG5vdCBmYXRhbC5cbiAgICAgICAgZGV2KCkud2FybignQUQtQ0lEJywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfSk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtjb21wdXRlZFN0eWxlfSBmcm9tICcuL3N0eWxlJztcbmltcG9ydCB7ZGV2fSBmcm9tICcuL2xvZyc7XG5pbXBvcnQge2dldFBhcmVudFdpbmRvd0ZyYW1lRWxlbWVudH0gZnJvbSAnLi9zZXJ2aWNlJztcblxuY29uc3QgQURfQ09OVEFJTkVSX1BST1AgPSAnX19BTVBfX0FEX0NPTlRBSU5FUic7XG5cbi8qKlxuICogVGFncyB0aGF0IGFyZSBhbGxvd2VkIHRvIGhhdmUgZml4ZWQgcG9zaXRpb25pbmdcbiAqIEBjb25zdCB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fVxuICovXG5jb25zdCBDT05UQUlORVJTID0ge1xuICAnQU1QLUZYLUZMWUlORy1DQVJQRVQnOiB0cnVlLFxuICAnQU1QLUxJR0hUQk9YJzogdHJ1ZSxcbiAgJ0FNUC1TVElDS1ktQUQnOiB0cnVlLFxuICAnQU1QLUxJR0hUQk9YLUdBTExFUlknOiB0cnVlLFxufTtcblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIGFuIGVsZW1lbnQgaXMgZml4ZWQtcG9zaXRpb25lZC5cbiAqIE9LIHRvIHVzZSwgYmVjYXVzZSBpdCdzIG9ubHkgY2FsbGVkIGZyb20gb25MYXlvdXRNZWFzdXJlXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbFxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzUG9zaXRpb25GaXhlZChlbCwgd2luKSB7XG4gIGNvbnN0IHtwb3NpdGlvbn0gPSBjb21wdXRlZFN0eWxlKHdpbiwgZWwpO1xuICAvLyBXZSBjb25zaWRlciBzdGlja3kgcG9zaXRpb25zIGFzIGZpeGVkLCBzaW5jZSB0aGV5IGNhbiBiZSBmaXhlZC5cbiAgcmV0dXJuIHBvc2l0aW9uID09ICdmaXhlZCcgfHwgcG9zaXRpb24gPT0gJ3N0aWNreSc7XG59XG5cbi8qKlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IHdoZXRoZXIgdGhlIGVsZW1lbnQgcG9zaXRpb24gaXMgYWxsb3dlZC4gSWYgdGhlIGVsZW1lbnRcbiAqIGJlbG9uZ3MgdG8gQ09OVEFJTkVSUywgaXQgaXMgYWxsb3dlZCB0byBiZSBwb3NpdGlvbiBmaXhlZC5cbiAqIElmIHRoZSBlbGVtZW50IGhhcyBhIHBvc2l0aW9uIGZpeGVkIGFuY2VzdG9yLCBpdCBpcyBub3QgYWxsb3dlZC5cbiAqIFRoaXMgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIHdoZW4gYSBsYXlvdXQgb24gdGhlIHBhZ2Ugd2FzIGp1c3QgZm9yY2VkXG4gKiBhbnl3YXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0FkUG9zaXRpb25BbGxvd2VkKGVsZW1lbnQsIHdpbikge1xuICBsZXQgaGFzRml4ZWRBbmNlc3RvciA9IGZhbHNlO1xuICBsZXQgY29udGFpbmVycyA9IDA7XG4gIGxldCBlbCA9IGVsZW1lbnQ7XG4gIGRvIHtcbiAgICBpZiAoQ09OVEFJTkVSU1tlbC50YWdOYW1lXSkge1xuICAgICAgLy8gVGhlIGNvbnRhaW5lcnMgbXVzdCBub3QgdGhlbXNlbHZlcyBiZSBjb250YWluZWQgaW4gYSBmaXhlZC1wb3NpdGlvblxuICAgICAgLy8gZWxlbWVudC4gQ29udGludWUgdGhlIHNlYXJjaC5cbiAgICAgIGNvbnRhaW5lcnMrKztcbiAgICAgIGhhc0ZpeGVkQW5jZXN0b3IgPSBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKGlzUG9zaXRpb25GaXhlZChkZXYoKS5hc3NlcnRFbGVtZW50KGVsKSwgd2luKSkge1xuICAgICAgLy8gQmVjYXVzZSBjZXJ0YWluIGJsZXNzZWQgZWxlbWVudHMgbWF5IGNvbnRhaW4gYSBwb3NpdGlvbiBmaXhlZFxuICAgICAgLy8gY29udGFpbmVyICh3aGljaCBjb250YWluIGFuIGFkKSwgd2UgY29udGludWUgdG8gc2VhcmNoIHRoZVxuICAgICAgLy8gYW5jZXN0cnkgdHJlZS5cbiAgICAgIGhhc0ZpeGVkQW5jZXN0b3IgPSB0cnVlO1xuICAgIH1cbiAgICBlbCA9IGVsLnBhcmVudEVsZW1lbnQ7XG4gIH0gd2hpbGUgKGVsICYmIGVsLnRhZ05hbWUgIT0gJ0JPRFknKTtcbiAgcmV0dXJuICFoYXNGaXhlZEFuY2VzdG9yICYmIGNvbnRhaW5lcnMgPD0gMTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBibGVzc2VkIGNvbnRhaW5lciBlbGVtZW50IHRhZ05hbWUgaWYgdGhlIGFkIGlzIGNvbnRhaW5lZCBieSBvbmUuXG4gKiBUaGlzIGlzIGNhbGxlZCBkdXJpbmcgbGF5b3V0IG1lYXN1cmUuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcmV0dXJuIHs/c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWRDb250YWluZXIoZWxlbWVudCkge1xuICBpZiAoZWxlbWVudFtBRF9DT05UQUlORVJfUFJPUF0gPT09IHVuZGVmaW5lZCkge1xuICAgIGxldCBlbCA9IGVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICB3aGlsZSAoZWwgJiYgZWwudGFnTmFtZSAhPSAnQk9EWScpIHtcbiAgICAgIGlmIChDT05UQUlORVJTW2VsLnRhZ05hbWVdKSB7XG4gICAgICAgIHJldHVybiBlbGVtZW50W0FEX0NPTlRBSU5FUl9QUk9QXSA9IGVsLnRhZ05hbWU7XG4gICAgICB9XG4gICAgICBlbCA9IGVsLnBhcmVudEVsZW1lbnQ7XG4gICAgfVxuICAgIGVsZW1lbnRbQURfQ09OVEFJTkVSX1BST1BdID0gbnVsbDtcbiAgfVxuICByZXR1cm4gZWxlbWVudFtBRF9DT05UQUlORVJfUFJPUF07XG59XG5cbi8qKlxuICogR2V0cyB0aGUgcmVzb3VyY2UgSUQgb2YgdGhlIGFtcC1hZCBlbGVtZW50IGNvbnRhaW5pbmcgdGhlIHBhc3NlZCBub2RlLlxuICogSWYgdGhlcmUgaXMgbm8gY29udGFpbmluZyBhbXAtYWQgdGFnLCB0aGVuIG51bGwgd2lsbCBiZSByZXR1cm5lZC5cbiAqIFRPRE8oam9ua2VsbGVyKTogSW52ZXN0aWdhdGUgd2hldGhlciBub24tQTRBIHVzZSBjYXNlIGlzIG5lZWRlZC4gSXNzdWUgMTE0MzZcbiAqIEBwYXJhbSB7IUVsZW1lbnR9IG5vZGVcbiAqIEBwYXJhbSB7IVdpbmRvd30gdG9wV2luXG4gKiBAcmV0dXJuIHs/c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QW1wQWRSZXNvdXJjZUlkKG5vZGUsIHRvcFdpbikge1xuICB0cnkge1xuICAgIGNvbnN0IGZyYW1lUGFyZW50ID0gZ2V0UGFyZW50V2luZG93RnJhbWVFbGVtZW50KG5vZGUsIHRvcFdpbikucGFyZW50RWxlbWVudDtcbiAgICBpZiAoZnJhbWVQYXJlbnQubm9kZU5hbWUgPT0gJ0FNUC1BRCcpIHtcbiAgICAgIHJldHVybiBTdHJpbmcoZnJhbWVQYXJlbnQuZ2V0UmVzb3VyY2VJZCgpKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgfVxuICAvLyBXaGV0aGVyIHdlIGVudGVyZWQgdGhlIGNhdGNoIGFib3ZlIChlLmcuIGR1ZSB0byBhdHRlbXB0IHRvIGFjY2Vzc1xuICAvLyBhY3Jvc3MgeGRvbWFpbiBib3VuZGFyeSksIG9yIGZhaWxlZCB0byBlbnRlciB0aGUgaWYgZnVydGhlciBhYm92ZSwgdGhlXG4gIC8vIG5vZGUgaXMgbm90IHdpdGhpbiBhIGZyaWVuZGx5IGFtcC1hZCB0YWcuIFNvLCB0aGVyZSBpcyBubyBhbXAtYWRcbiAgLy8gcmVzb3VyY2UgSUQuIEhvdyB0byBoYW5kbGUgdGhhdCBpcyB1cCB0byB0aGUgY2FsbGVyLCBidXQgc2VlIFRPRE8gYWJvdmUuXG4gIHJldHVybiBudWxsO1xufVxuXG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBDb21tb24gQU1QIGV2ZW50cy5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBBbXBFdmVudHMgPSB7XG4gIEJVSUxUOiAnYW1wOmJ1aWx0JyxcbiAgRE9NX1VQREFURTogJ2FtcDpkb20tdXBkYXRlJyxcbiAgVklTSUJJTElUWV9DSEFOR0U6ICdhbXA6dmlzaWJpbGl0eWNoYW5nZScsIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbXBwcm9qZWN0L2FtcGh0bWwvYmxvYi9tYXN0ZXIvYWRzL1JFQURNRS5tZCNwYWdlLXZpc2liaWxpdHlcbiAgLy8gVGhlIGZvbGxvd2luZyBjb2RlcyBhcmUgb25seSB1c2VkIGZvciB0ZXN0aW5nLlxuICAvLyBUT0RPKGNob3VteCk6IE1vdmUgdGhlc2UgdG8gYSBzZXBhcmF0ZSBlbnVtIHNvIHRoZXkgY2FuIGJlIERDRSdkLlxuICBBVFRBQ0hFRDogJ2FtcDphdHRhY2hlZCcsXG4gIFNUVUJCRUQ6ICdhbXA6c3R1YmJlZCcsXG4gIExPQURfU1RBUlQ6ICdhbXA6bG9hZDpzdGFydCcsXG4gIExPQURfRU5EOiAnYW1wOmxvYWQ6ZW5kJyxcbiAgRVJST1I6ICdhbXA6ZXJyb3InLFxufTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1NlcnZpY2VzfSBmcm9tICcuL3NlcnZpY2VzJztcblxuLyoqXG4gKiBIZWxwZXIgbWV0aG9kIHRvIHRyaWdnZXIgYW5hbHl0aWNzIGV2ZW50IGlmIGFtcC1hbmFseXRpY3MgaXMgYXZhaWxhYmxlLlxuICogVE9ETzogRG8gbm90IGV4cG9zZSB0aGlzIGZ1bmN0aW9uXG4gKiBAcGFyYW0geyFFbGVtZW50fSB0YXJnZXRcbiAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFR5cGVcbiAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz49fSBvcHRfdmFycyBBIG1hcCBvZiB2YXJzIGFuZCB0aGVpciB2YWx1ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmlnZ2VyQW5hbHl0aWNzRXZlbnQodGFyZ2V0LCBldmVudFR5cGUsIG9wdF92YXJzKSB7XG4gIFNlcnZpY2VzLmFuYWx5dGljc0ZvckRvY09yTnVsbCh0YXJnZXQpLnRoZW4oYW5hbHl0aWNzID0+IHtcbiAgICBpZiAoIWFuYWx5dGljcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhbmFseXRpY3MudHJpZ2dlckV2ZW50Rm9yVGFyZ2V0KHRhcmdldCwgZXZlbnRUeXBlLCBvcHRfdmFycyk7XG4gIH0pO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cblxuLyoqXG4gKiBDb21tb25seSB1c2VkIHNpZ25hbHMgYWNyb3NzIGRpZmZlcmVudCBlbGVtZW50cyBhbmQgZG9jdW1lbnRzLlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IENvbW1vblNpZ25hbHMgPSB7XG5cbiAgLyoqXG4gICAqIFRoZSBlbGVtZW50IGhhcyBiZWVuIGJ1aWx0LlxuICAgKi9cbiAgQlVJTFQ6ICdidWlsdCcsXG5cbiAgLyoqXG4gICAqIFRoZSBpbml0aWFsIGNvbnRlbnRzIG9mIGFuIGVsZW1lbnQvZG9jdW1lbnQvZW1iZWQgaGF2ZSBiZWVuIGxvYWRlZC5cbiAgICovXG4gIElOSV9MT0FEOiAnaW5pLWxvYWQnLFxuXG4gIC8qKlxuICAgKiBUaGUgZWxlbWVudCBoYXMgYmVlbiBsb2FkZWQuXG4gICAqL1xuICBMT0FEX0VORDogJ2xvYWQtZW5kJyxcblxuICAvKipcbiAgICogVGhlIGVsZW1lbnQgaGFzIHN0YXJ0ZWQgbG9hZGluZy5cbiAgICovXG4gIExPQURfU1RBUlQ6ICdsb2FkLXN0YXJ0JyxcblxuICAvKipcbiAgICogUmVuZGVyaW5nIGhhcyBiZWVuIGNvbmZpcm1lZCB0byBoYXZlIGJlZW4gc3RhcnRlZC5cbiAgICovXG4gIFJFTkRFUl9TVEFSVDogJ3JlbmRlci1zdGFydCcsXG5cbiAgLyoqXG4gICAqIFRoZSBlbGVtZW50IGhhcyBiZWVuIHVubGFpZCBvdXQuXG4gICAqL1xuICBVTkxPQUQ6ICd1bmxvYWQnLFxufTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEFsbG93cyBmb3IgcnVudGltZSBjb25maWd1cmF0aW9uLiBJbnRlcm5hbGx5LCB0aGUgcnVudGltZSBzaG91bGRcbiAqIHVzZSB0aGUgc3JjL2NvbmZpZy5qcyBtb2R1bGUgZm9yIHZhcmlvdXMgY29uc3RhbnRzLiBXZSBjYW4gdXNlIHRoZVxuICogQU1QX0NPTkZJRyBnbG9iYWwgdG8gdHJhbnNsYXRlIHVzZXItZGVmaW5lZCBjb25maWd1cmF0aW9ucyB0byB0aGlzXG4gKiBtb2R1bGUuXG4gKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz59XG4gKi9cbmNvbnN0IGVudiA9IHNlbGYuQU1QX0NPTkZJRyB8fCB7fTtcblxuY29uc3QgdGhpcmRQYXJ0eUZyYW1lUmVnZXggPSB0eXBlb2YgZW52Wyd0aGlyZFBhcnR5RnJhbWVSZWdleCddID09ICdzdHJpbmcnID9cbiAgbmV3IFJlZ0V4cChlbnZbJ3RoaXJkUGFydHlGcmFtZVJlZ2V4J10pIDogZW52Wyd0aGlyZFBhcnR5RnJhbWVSZWdleCddO1xuXG5jb25zdCBjZG5Qcm94eVJlZ2V4ID0gdHlwZW9mIGVudlsnY2RuUHJveHlSZWdleCddID09ICdzdHJpbmcnID9cbiAgbmV3IFJlZ0V4cChlbnZbJ2NkblByb3h5UmVnZXgnXSkgOiBlbnZbJ2NkblByb3h5UmVnZXgnXTtcblxuLyoqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgc3RyaW5nfGJvb2xlYW58UmVnRXhwPn0gKi9cbmV4cG9ydCBjb25zdCB1cmxzID0ge1xuICB0aGlyZFBhcnR5OiBlbnZbJ3RoaXJkUGFydHlVcmwnXSB8fCAnaHR0cHM6Ly8zcC5hbXBwcm9qZWN0Lm5ldCcsXG4gIHRoaXJkUGFydHlGcmFtZUhvc3Q6IGVudlsndGhpcmRQYXJ0eUZyYW1lSG9zdCddIHx8ICdhbXBwcm9qZWN0Lm5ldCcsXG4gIHRoaXJkUGFydHlGcmFtZVJlZ2V4OiB0aGlyZFBhcnR5RnJhbWVSZWdleCB8fCAvXmQtXFxkK1xcLmFtcHByb2plY3RcXC5uZXQkLyxcbiAgY2RuOiBlbnZbJ2NkblVybCddIHx8ICdodHRwczovL2Nkbi5hbXBwcm9qZWN0Lm9yZycsXG4gIC8qIE5vdGUgdGhhdCBjZG5Qcm94eVJlZ2V4IGlzIG9ubHkgZXZlciBjaGVja2VkIGFnYWluc3Qgb3JpZ2luc1xuICAgKiAocHJvdG86Ly9ob3N0Wzpwb3J0XSkgc28gZG9lcyBub3QgbmVlZCB0byBjb25zaWRlciBwYXRoXG4gICAqL1xuICBjZG5Qcm94eVJlZ2V4OiBjZG5Qcm94eVJlZ2V4IHx8XG4gICAgICAvXmh0dHBzOlxcL1xcLyhbYS16QS1aMC05Xy1dK1xcLik/Y2RuXFwuYW1wcHJvamVjdFxcLm9yZyQvLFxuICBsb2NhbGhvc3RSZWdleDogL15odHRwcz86XFwvXFwvbG9jYWxob3N0KDpcXGQrKT8kLyxcbiAgZXJyb3JSZXBvcnRpbmc6IGVudlsnZXJyb3JSZXBvcnRpbmdVcmwnXSB8fFxuICAgICAgJ2h0dHBzOi8vYW1wLWVycm9yLXJlcG9ydGluZy5hcHBzcG90LmNvbS9yJyxcbiAgbG9jYWxEZXY6IGVudlsnbG9jYWxEZXYnXSB8fCBmYWxzZSxcbn07XG5cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIHVybHMsXG59O1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8vIFRoaXMgZmlsZSB3aWxsIGJlIGltcG9ydGVkIGJ5IDNQIHNjcmlwdHMuXG5cbi8qKlxuICogUG9zc2libGUgY29uc2VudCBwb2xpY3kgc3RhdGUgdG8gcHJvY2VlZCB3aXRoLlxuICogQGVudW0ge251bWJlcn1cbiAqL1xuZXhwb3J0IGNvbnN0IENPTlNFTlRfUE9MSUNZX1NUQVRFID0ge1xuICAvLyBFbnVtIHZhbHVlIGhhcyBleHRlcm5hbCBkZXBlbmRlbmN5LiBQbGVhc2UgZG8gbm90IGNoYW5nZSBleGlzdGluZyB2YWx1ZS5cbiAgLy8gSWYgbmV3IHZhbHVlcyBhcmUgYWRkZWQsIHBsZWFzZSBub3RpZnkgdGhlIEFNUCBmb3IgQWRzIHRlYW0gdG8gYXNzdXJlXG4gIC8vIGNvcnJlY3QgUmVhbCBUaW1lIENvbmZpZyBiZWhhdmlvciBpcyBtYWludGFpbmVkIGZvciBGYXN0IEZldGNoLlxuICBTVUZGSUNJRU5UOiAxLFxuICBJTlNVRkZJQ0lFTlQ6IDIsXG4gIFVOS05PV05fTk9UX1JFUVVJUkVEOiAzLFxuICBVTktOT1dOOiA0LFxufTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICBDT05TRU5UX1BPTElDWV9TVEFURSwgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xufSBmcm9tICcuL2NvbnNlbnQtc3RhdGUnO1xuaW1wb3J0IHtTZXJ2aWNlc30gZnJvbSAnLi9zZXJ2aWNlcyc7XG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlIHdoZW4gYWxsIGNvbnNlbnQgc3RhdGUgdGhlIHBvbGljeSB3YWl0XG4gKiBmb3IgcmVzb2x2ZS4gT3IgaWYgY29uc2VudCBzZXJ2aWNlIGlzIG5vdCBhdmFpbGFibGUuXG4gKiBAcGFyYW0geyEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBhbXBkb2NcbiAqIEBwYXJhbSB7c3RyaW5nfSBwb2xpY3lJZFxuICogQHJldHVybiB7IVByb21pc2U8P0NPTlNFTlRfUE9MSUNZX1NUQVRFPn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvbnNlbnRQb2xpY3lTdGF0ZShhbXBkb2MsIHBvbGljeUlkKSB7XG4gIHJldHVybiBTZXJ2aWNlcy5jb25zZW50UG9saWN5U2VydmljZUZvckRvY09yTnVsbChhbXBkb2MpXG4gICAgICAudGhlbihjb25zZW50UG9saWN5ID0+IHtcbiAgICAgICAgaWYgKCFjb25zZW50UG9saWN5KSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnNlbnRQb2xpY3kud2hlblBvbGljeVJlc29sdmVkKFxuICAgICAgICAgICAgLyoqIEB0eXBlIHtzdHJpbmd9ICovIChwb2xpY3lJZCkpO1xuICAgICAgfSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIHNoYXJlZERhdGEgcmV0cmlldmVkIGZyb20gY29uc2VudFxuICogcmVtb3RlIGVuZHBvaW50LlxuICogQHBhcmFtIHshLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gYW1wZG9jXG4gKiBAcGFyYW0ge3N0cmluZ30gcG9saWN5SWRcbiAqIEByZXR1cm4geyFQcm9taXNlPD9PYmplY3Q+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29uc2VudFBvbGljeVNoYXJlZERhdGEoYW1wZG9jLCBwb2xpY3lJZCkge1xuICByZXR1cm4gU2VydmljZXMuY29uc2VudFBvbGljeVNlcnZpY2VGb3JEb2NPck51bGwoYW1wZG9jKVxuICAgICAgLnRoZW4oY29uc2VudFBvbGljeSA9PiB7XG4gICAgICAgIGlmICghY29uc2VudFBvbGljeSkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb25zZW50UG9saWN5LmdldE1lcmdlZFNoYXJlZERhdGEoXG4gICAgICAgICAgICAvKiogQHR5cGUge3N0cmluZ30gKi8gKHBvbGljeUlkKSk7XG4gICAgICB9KTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge2VuZHNXaXRofSBmcm9tICcuL3N0cmluZyc7XG5pbXBvcnQge1xuICBpc1Byb3h5T3JpZ2luLFxuICBwYXJzZVVybERlcHJlY2F0ZWQsXG4gIHRyeURlY29kZVVyaUNvbXBvbmVudCxcbn0gZnJvbSAnLi91cmwnO1xuaW1wb3J0IHt1cmxzfSBmcm9tICcuL2NvbmZpZyc7XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgY29va2llLiBUaGUgY29va2llIGFjY2VzcyBpcyByZXN0cmljdGVkIGFuZCBtdXN0XG4gKiBnbyB0aHJvdWdoIHRoZSBwcml2YWN5IHJldmlldy4gQmVmb3JlIHVzaW5nIHRoaXMgbWV0aG9kIHBsZWFzZSBmaWxlIGFcbiAqIEdpdEh1YiBpc3N1ZSB3aXRoIFwiUHJpdmFjeSBSZXZpZXdcIiBsYWJlbC5cbiAqXG4gKiBSZXR1cm5zIHRoZSBjb29raWUncyB2YWx1ZSBvciBgbnVsbGAuXG4gKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gKiBAcmV0dXJuIHs/c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29va2llKHdpbiwgbmFtZSkge1xuICBjb25zdCBjb29raWVTdHJpbmcgPSB0cnlHZXREb2N1bWVudENvb2tpZU5vSW5saW5lKHdpbik7XG4gIGlmICghY29va2llU3RyaW5nKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgY29va2llcyA9IGNvb2tpZVN0cmluZy5zcGxpdCgnOycpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGNvb2tpZXMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBjb29raWUgPSBjb29raWVzW2ldLnRyaW0oKTtcbiAgICBjb25zdCBlcSA9IGNvb2tpZS5pbmRleE9mKCc9Jyk7XG4gICAgaWYgKGVxID09IC0xKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKHRyeURlY29kZVVyaUNvbXBvbmVudChjb29raWUuc3Vic3RyaW5nKDAsIGVxKS50cmltKCkpID09IG5hbWUpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gY29va2llLnN1YnN0cmluZyhlcSArIDEpLnRyaW0oKTtcbiAgICAgIHJldHVybiB0cnlEZWNvZGVVcmlDb21wb25lbnQodmFsdWUsIHZhbHVlKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogVGhpcyBtZXRob2Qgc2hvdWxkIG5vdCBiZSBpbmxpbmVkIHRvIHByZXZlbnQgVHJ5Q2F0Y2ggZGVvcHRpbWl6YXRpb24uXG4gKiBOb0lubGluZSBrZXl3b3JkIGF0IHRoZSBlbmQgb2YgZnVuY3Rpb24gbmFtZSBhbHNvIHByZXZlbnRzIENsb3N1cmUgY29tcGlsZXJcbiAqIGZyb20gaW5saW5pbmcgdGhlIGZ1bmN0aW9uLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gdHJ5R2V0RG9jdW1lbnRDb29raWVOb0lubGluZSh3aW4pIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gd2luLmRvY3VtZW50LmNvb2tpZTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIEFjdCBhcyBpZiBubyBjb29raWUgaXMgYXZhaWxhYmxlLiBFeGNlcHRpb25zIGNhbiBiZSB0aHJvd24gd2hlblxuICAgIC8vIEFNUCBkb2NzIGFyZSBvcGVuZWQgb24gb3JpZ2lucyB0aGF0IGRvIG5vdCBhbGxvdyBzZXR0aW5nXG4gICAgLy8gY29va2llcyBzdWNoIGFzIG51bGwgb3JpZ2lucy5cbiAgICByZXR1cm4gJyc7XG4gIH1cbn1cblxuLyoqXG4gKiBTZXRzIHRoZSB2YWx1ZSBvZiB0aGUgY29va2llLiBUaGUgY29va2llIGFjY2VzcyBpcyByZXN0cmljdGVkIGFuZCBtdXN0XG4gKiBnbyB0aHJvdWdoIHRoZSBwcml2YWN5IHJldmlldy4gQmVmb3JlIHVzaW5nIHRoaXMgbWV0aG9kIHBsZWFzZSBmaWxlIGFcbiAqIEdpdEh1YiBpc3N1ZSB3aXRoIFwiUHJpdmFjeSBSZXZpZXdcIiBsYWJlbC5cbiAqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICogQHBhcmFtIHt0aW1lfSBleHBpcmF0aW9uVGltZVxuICogQHBhcmFtIHt7XG4gKiAgIGhpZ2hlc3RBdmFpbGFibGVEb21haW46KGJvb2xlYW58dW5kZWZpbmVkKSxcbiAqICAgZG9tYWluOihzdHJpbmd8dW5kZWZpbmVkKVxuICogfT19IG9wdF9vcHRpb25zXG4gKiAgICAgLSBoaWdoZXN0QXZhaWxhYmxlRG9tYWluOiBJZiB0cnVlLCBzZXQgdGhlIGNvb2tpZSBhdCB0aGUgd2lkZXN0IGRvbWFpblxuICogICAgICAgc2NvcGUgYWxsb3dlZCBieSB0aGUgYnJvd3Nlci4gRS5nLiBvbiBleGFtcGxlLmNvbSBpZiB3ZSBhcmUgY3VycmVudGx5XG4gKiAgICAgICBvbiB3d3cuZXhhbXBsZS5jb20uXG4gKiAgICAgLSBkb21haW46IEV4cGxpY2l0IGRvbWFpbiB0byBzZXQuXG4gKiAgICAgLSBhbGxvd09uUHJveHlPcmlnaW46IEFsbG93IHNldHRpbmcgYSBjb29raWUgb24gdGhlIEFNUCBDYWNoZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldENvb2tpZSh3aW4sIG5hbWUsIHZhbHVlLCBleHBpcmF0aW9uVGltZSwgb3B0X29wdGlvbnMpIHtcbiAgY2hlY2tPcmlnaW5Gb3JTZXR0aW5nQ29va2llKHdpbiwgb3B0X29wdGlvbnMsIG5hbWUpO1xuICBpZiAob3B0X29wdGlvbnMgJiYgb3B0X29wdGlvbnMuaGlnaGVzdEF2YWlsYWJsZURvbWFpbikge1xuICAgIGNvbnN0IHBhcnRzID0gd2luLmxvY2F0aW9uLmhvc3RuYW1lLnNwbGl0KCcuJyk7XG4gICAgbGV0IGRvbWFpbiA9IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdO1xuICAgIGZvciAobGV0IGkgPSBwYXJ0cy5sZW5ndGggLSAyOyBpID49IDA7IGktLSkge1xuICAgICAgZG9tYWluID0gcGFydHNbaV0gKyAnLicgKyBkb21haW47XG4gICAgICB0cnlTZXRDb29raWUod2luLCBuYW1lLCB2YWx1ZSwgZXhwaXJhdGlvblRpbWUsIGRvbWFpbik7XG4gICAgICBpZiAoZ2V0Q29va2llKHdpbiwgbmFtZSkgPT0gdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBsZXQgZG9tYWluID0gdW5kZWZpbmVkO1xuICBpZiAob3B0X29wdGlvbnMgJiYgb3B0X29wdGlvbnMuZG9tYWluKSB7XG4gICAgZG9tYWluID0gb3B0X29wdGlvbnMuZG9tYWluO1xuICB9XG4gIHRyeVNldENvb2tpZSh3aW4sIG5hbWUsIHZhbHVlLCBleHBpcmF0aW9uVGltZSwgZG9tYWluKTtcbn1cblxuLyoqXG4gKiBBdHRlbXB0IHRvIHNldCBhIGNvb2tpZSB3aXRoIHRoZSBnaXZlbiBwYXJhbXMuXG4gKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAqIEBwYXJhbSB7dGltZX0gZXhwaXJhdGlvblRpbWVcbiAqIEBwYXJhbSB7c3RyaW5nfHVuZGVmaW5lZH0gZG9tYWluXG4gKi9cbmZ1bmN0aW9uIHRyeVNldENvb2tpZSh3aW4sIG5hbWUsIHZhbHVlLCBleHBpcmF0aW9uVGltZSwgZG9tYWluKSB7XG4gIC8vIFdlIGRvIG5vdCBhbGxvdyBzZXR0aW5nIGNvb2tpZXMgb24gdGhlIGRvbWFpbiB0aGF0IGNvbnRhaW5zIGJvdGhcbiAgLy8gdGhlIGNkbi4gYW5kIHd3dy4gaG9zdHMuXG4gIGlmIChkb21haW4gPT0gJ2FtcHByb2plY3Qub3JnJykge1xuICAgIC8vIEFjdGl2ZWx5IGRlbGV0ZSB0aGVtLlxuICAgIHZhbHVlID0gJ2RlbGV0ZSc7XG4gICAgZXhwaXJhdGlvblRpbWUgPSAwO1xuICB9XG4gIGNvbnN0IGNvb2tpZSA9IGVuY29kZVVSSUNvbXBvbmVudChuYW1lKSArICc9JyArXG4gICAgICBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpICtcbiAgICAgICc7IHBhdGg9LycgK1xuICAgICAgKGRvbWFpbiA/ICc7IGRvbWFpbj0nICsgZG9tYWluIDogJycpICtcbiAgICAgICc7IGV4cGlyZXM9JyArIG5ldyBEYXRlKGV4cGlyYXRpb25UaW1lKS50b1VUQ1N0cmluZygpO1xuICB0cnkge1xuICAgIHdpbi5kb2N1bWVudC5jb29raWUgPSBjb29raWU7XG4gIH0gY2F0Y2ggKGlnbm9yZSkge1xuICAgIC8vIERvIG5vdCB0aHJvdyBpZiBzZXR0aW5nIHRoZSBjb29raWUgZmFpbGVkIEV4Y2VwdGlvbnMgY2FuIGJlIHRocm93blxuICAgIC8vIHdoZW4gQU1QIGRvY3MgYXJlIG9wZW5lZCBvbiBvcmlnaW5zIHRoYXQgZG8gbm90IGFsbG93IHNldHRpbmdcbiAgICAvLyBjb29raWVzIHN1Y2ggYXMgbnVsbCBvcmlnaW5zLlxuICB9XG59XG5cbi8qKlxuICogVGhyb3dzIGlmIGEgZ2l2ZW4gY29va2llIHNob3VsZCBub3QgYmUgc2V0IG9uIHRoZSBnaXZlbiBvcmlnaW4uXG4gKiBUaGlzIGlzIGEgZGVmZW5zZS1pbi1kZXB0aC4gQ2FsbGVycyBzaG91bGQgbmV2ZXIgcnVuIGludG8gdGhpcy5cbiAqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHshT2JqZWN0fHVuZGVmaW5lZH0gb3B0aW9uc1xuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgRm9yIHRoZSBlcnJvciBtZXNzYWdlLlxuICovXG5mdW5jdGlvbiBjaGVja09yaWdpbkZvclNldHRpbmdDb29raWUod2luLCBvcHRpb25zLCBuYW1lKSB7XG4gIGlmIChvcHRpb25zICYmIG9wdGlvbnMuYWxsb3dPblByb3h5T3JpZ2luKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChpc1Byb3h5T3JpZ2luKHdpbi5sb2NhdGlvbi5ocmVmKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignU2hvdWxkIG5ldmVyIGF0dGVtcHQgdG8gc2V0IGNvb2tpZSBvbiBwcm94eSBvcmlnaW46ICdcbiAgICAgICAgKyBuYW1lKTtcbiAgfVxuXG4gIGNvbnN0IGN1cnJlbnQgPSBwYXJzZVVybERlcHJlY2F0ZWQod2luLmxvY2F0aW9uLmhyZWYpLmhvc3RuYW1lLnRvTG93ZXJDYXNlKCk7XG4gIGNvbnN0IHByb3h5ID0gcGFyc2VVcmxEZXByZWNhdGVkKHVybHMuY2RuKS5ob3N0bmFtZS50b0xvd2VyQ2FzZSgpO1xuICBpZiAoY3VycmVudCA9PSBwcm94eSB8fCBlbmRzV2l0aChjdXJyZW50LCAnLicgKyBwcm94eSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Nob3VsZCBuZXZlciBhdHRlbXB0IHRvIHNldCBjb29raWUgb24gcHJveHkgb3JpZ2luLidcbiAgICAgICAgKyAnIChpbiBkZXB0aCBjaGVjayk6ICcgKyBuYW1lKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7RGVmZXJyZWR9IGZyb20gJy4vdXRpbHMvcHJvbWlzZSc7XG5pbXBvcnQge2Nzc0VzY2FwZX0gZnJvbSAnLi4vdGhpcmRfcGFydHkvY3NzLWVzY2FwZS9jc3MtZXNjYXBlJztcbmltcG9ydCB7ZGV2fSBmcm9tICcuL2xvZyc7XG5pbXBvcnQge2RpY3R9IGZyb20gJy4vdXRpbHMvb2JqZWN0JztcbmltcG9ydCB7c3RhcnRzV2l0aH0gZnJvbSAnLi9zdHJpbmcnO1xuaW1wb3J0IHt0b1dpbn0gZnJvbSAnLi90eXBlcyc7XG5cbmNvbnN0IEhUTUxfRVNDQVBFX0NIQVJTID0ge1xuICAnJic6ICcmYW1wOycsXG4gICc8JzogJyZsdDsnLFxuICAnPic6ICcmZ3Q7JyxcbiAgJ1wiJzogJyZxdW90OycsXG4gIFwiJ1wiOiAnJiN4Mjc7JyxcbiAgJ2AnOiAnJiN4NjA7Jyxcbn07XG5jb25zdCBIVE1MX0VTQ0FQRV9SRUdFWCA9IC8oJnw8fD58XCJ8J3xgKS9nO1xuXG4vKiogQGNvbnN0IHtzdHJpbmd9ICovXG5leHBvcnQgY29uc3QgVVBHUkFERV9UT19DVVNUT01FTEVNRU5UX1BST01JU0UgPVxuICAgICdfX0FNUF9VUEdfUFJNJztcblxuLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuZXhwb3J0IGNvbnN0IFVQR1JBREVfVE9fQ1VTVE9NRUxFTUVOVF9SRVNPTFZFUiA9XG4gICAgJ19fQU1QX1VQR19SRVMnO1xuXG4vKipcbiAqIFdhaXRzIHVudGlsIHRoZSBjaGlsZCBlbGVtZW50IGlzIGNvbnN0cnVjdGVkLiBPbmNlIHRoZSBjaGlsZCBpcyBmb3VuZCwgdGhlXG4gKiBjYWxsYmFjayBpcyBleGVjdXRlZC5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHBhcmVudFxuICogQHBhcmFtIHtmdW5jdGlvbighRWxlbWVudCk6Ym9vbGVhbn0gY2hlY2tGdW5jXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IGNhbGxiYWNrXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3YWl0Rm9yQ2hpbGQocGFyZW50LCBjaGVja0Z1bmMsIGNhbGxiYWNrKSB7XG4gIGlmIChjaGVja0Z1bmMocGFyZW50KSkge1xuICAgIGNhbGxiYWNrKCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8qKiBAY29uc3QgeyFXaW5kb3d9ICovXG4gIGNvbnN0IHdpbiA9IHRvV2luKHBhcmVudC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3KTtcbiAgaWYgKHdpbi5NdXRhdGlvbk9ic2VydmVyKSB7XG4gICAgLyoqIEBjb25zdCB7TXV0YXRpb25PYnNlcnZlcn0gKi9cbiAgICBjb25zdCBvYnNlcnZlciA9IG5ldyB3aW4uTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7XG4gICAgICBpZiAoY2hlY2tGdW5jKHBhcmVudCkpIHtcbiAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIG9ic2VydmVyLm9ic2VydmUocGFyZW50LCB7Y2hpbGRMaXN0OiB0cnVlfSk7XG4gIH0gZWxzZSB7XG4gICAgLyoqIEBjb25zdCB7bnVtYmVyfSAqL1xuICAgIGNvbnN0IGludGVydmFsID0gd2luLnNldEludGVydmFsKCgpID0+IHtcbiAgICAgIGlmIChjaGVja0Z1bmMocGFyZW50KSkge1xuICAgICAgICB3aW4uY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgfSwgLyogbWlsbGlzZWNvbmRzICovIDUpO1xuICB9XG59XG5cbi8qKlxuICogV2FpdHMgdW50aWwgdGhlIGNoaWxkIGVsZW1lbnQgaXMgY29uc3RydWN0ZWQuIE9uY2UgdGhlIGNoaWxkIGlzIGZvdW5kLCB0aGVcbiAqIHByb21pc2UgaXMgcmVzb2x2ZWQuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBwYXJlbnRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oIUVsZW1lbnQpOmJvb2xlYW59IGNoZWNrRnVuY1xuICogQHJldHVybiB7IVByb21pc2V9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3YWl0Rm9yQ2hpbGRQcm9taXNlKHBhcmVudCwgY2hlY2tGdW5jKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICB3YWl0Rm9yQ2hpbGQocGFyZW50LCBjaGVja0Z1bmMsIHJlc29sdmUpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBXYWl0cyBmb3IgZG9jdW1lbnQncyBib2R5IHRvIGJlIGF2YWlsYWJsZS5cbiAqIFdpbGwgYmUgZGVwcmVjYXRlZCBzb29uOyB1c2Uge0BsaW5rIEFtcERvYyN3aGVuQm9keUF2YWlsYWJsZX0gb3JcbiAqIEB7bGluayBEb2N1bWVudFN0YXRlI29uQm9keUF2YWlsYWJsZX0gaW5zdGVhZC5cbiAqIEBwYXJhbSB7IURvY3VtZW50fSBkb2NcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gY2FsbGJhY2tcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdhaXRGb3JCb2R5KGRvYywgY2FsbGJhY2spIHtcbiAgd2FpdEZvckNoaWxkKGRvYy5kb2N1bWVudEVsZW1lbnQsICgpID0+ICEhZG9jLmJvZHksIGNhbGxiYWNrKTtcbn1cblxuXG4vKipcbiAqIFdhaXRzIGZvciBkb2N1bWVudCdzIGJvZHkgdG8gYmUgYXZhaWxhYmxlLlxuICogQHBhcmFtIHshRG9jdW1lbnR9IGRvY1xuICogQHJldHVybiB7IVByb21pc2V9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3YWl0Rm9yQm9keVByb21pc2UoZG9jKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICB3YWl0Rm9yQm9keShkb2MsIHJlc29sdmUpO1xuICB9KTtcbn1cblxuXG4vKipcbiAqIFJlbW92ZXMgdGhlIGVsZW1lbnQuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVFbGVtZW50KGVsZW1lbnQpIHtcbiAgaWYgKGVsZW1lbnQucGFyZW50RWxlbWVudCkge1xuICAgIGVsZW1lbnQucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChlbGVtZW50KTtcbiAgfVxufVxuXG5cbi8qKlxuICogUmVtb3ZlcyBhbGwgY2hpbGQgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBlbGVtZW50LlxuICogQHBhcmFtIHshRWxlbWVudH0gcGFyZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVDaGlsZHJlbihwYXJlbnQpIHtcbiAgd2hpbGUgKHBhcmVudC5maXJzdENoaWxkKSB7XG4gICAgcGFyZW50LnJlbW92ZUNoaWxkKHBhcmVudC5maXJzdENoaWxkKTtcbiAgfVxufVxuXG5cbi8qKlxuICogQ29waWVzIGFsbCBjaGlsZHJlbiBub2RlcyBvZiBlbGVtZW50IFwiZnJvbVwiIHRvIGVsZW1lbnQgXCJ0b1wiLiBDaGlsZCBub2Rlc1xuICogYXJlIGRlZXBseSBjbG9uZWQuIE5vdGljZSwgdGhhdCB0aGlzIG1ldGhvZCBzaG91bGQgYmUgdXNlZCB3aXRoIGNhcmUgYW5kXG4gKiBwcmVmZXJhYmx5IG9uIHNtYWxsZXIgc3VidHJlZXMuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBmcm9tXG4gKiBAcGFyYW0geyFFbGVtZW50fCFEb2N1bWVudEZyYWdtZW50fSB0b1xuICovXG5leHBvcnQgZnVuY3Rpb24gY29weUNoaWxkcmVuKGZyb20sIHRvKSB7XG4gIGNvbnN0IGZyYWcgPSB0by5vd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgZm9yIChsZXQgbiA9IGZyb20uZmlyc3RDaGlsZDsgbjsgbiA9IG4ubmV4dFNpYmxpbmcpIHtcbiAgICBmcmFnLmFwcGVuZENoaWxkKG4uY2xvbmVOb2RlKHRydWUpKTtcbiAgfVxuICB0by5hcHBlbmRDaGlsZChmcmFnKTtcbn1cblxuLyoqXG4gKiBJbnNlcnQgdGhlIGVsZW1lbnQgaW4gdGhlIHJvb3QgYWZ0ZXIgdGhlIGVsZW1lbnQgbmFtZWQgYWZ0ZXIgb3JcbiAqIGlmIHRoYXQgaXMgbnVsbCBhdCB0aGUgYmVnaW5uaW5nLlxuICogQHBhcmFtIHshRWxlbWVudHwhU2hhZG93Um9vdH0gcm9vdFxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHs/Tm9kZX0gYWZ0ZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluc2VydEFmdGVyT3JBdFN0YXJ0KHJvb3QsIGVsZW1lbnQsIGFmdGVyKSB7XG4gIGNvbnN0IGJlZm9yZSA9IGFmdGVyID8gYWZ0ZXIubmV4dFNpYmxpbmcgOiByb290LmZpcnN0Q2hpbGQ7XG4gIHJvb3QuaW5zZXJ0QmVmb3JlKGVsZW1lbnQsIGJlZm9yZSk7XG59XG5cbi8qKlxuICogQWRkIGF0dHJpYnV0ZXMgdG8gYW4gZWxlbWVudC5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7IUpzb25PYmplY3Q8c3RyaW5nLCBzdHJpbmc+fSBhdHRyaWJ1dGVzXG4gKiBAcmV0dXJuIHshRWxlbWVudH0gY3JlYXRlZCBlbGVtZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRBdHRyaWJ1dGVzVG9FbGVtZW50KGVsZW1lbnQsIGF0dHJpYnV0ZXMpIHtcbiAgZm9yIChjb25zdCBhdHRyIGluIGF0dHJpYnV0ZXMpIHtcbiAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShhdHRyLCBhdHRyaWJ1dGVzW2F0dHJdKTtcbiAgfVxuICByZXR1cm4gZWxlbWVudDtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgZWxlbWVudCBvbiBkb2N1bWVudCB3aXRoIHNwZWNpZmllZCB0YWdOYW1lIGFuZCBhdHRyaWJ1dGVzLlxuICogQHBhcmFtIHshRG9jdW1lbnR9IGRvY1xuICogQHBhcmFtIHtzdHJpbmd9IHRhZ05hbWVcbiAqIEBwYXJhbSB7IUpzb25PYmplY3Q8c3RyaW5nLCBzdHJpbmc+fSBhdHRyaWJ1dGVzXG4gKiBAcmV0dXJuIHshRWxlbWVudH0gY3JlYXRlZCBlbGVtZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbGVtZW50V2l0aEF0dHJpYnV0ZXMoZG9jLCB0YWdOYW1lLCBhdHRyaWJ1dGVzKSB7XG4gIGNvbnN0IGVsZW1lbnQgPSBkb2MuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTtcbiAgcmV0dXJuIGFkZEF0dHJpYnV0ZXNUb0VsZW1lbnQoZWxlbWVudCwgYXR0cmlidXRlcyk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIG5vZGUgaXMgY29ubmVjdGVkIChhdHRhY2hlZCkuXG4gKiBAcGFyYW0geyFOb2RlfSBub2RlXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICogQHNlZSBodHRwczovL2RvbS5zcGVjLndoYXR3Zy5vcmcvI2Nvbm5lY3RlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNDb25uZWN0ZWROb2RlKG5vZGUpIHtcbiAgY29uc3QgY29ubmVjdGVkID0gbm9kZS5pc0Nvbm5lY3RlZDtcbiAgaWYgKGNvbm5lY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIGNvbm5lY3RlZDtcbiAgfVxuXG4gIC8vIFwiQW4gZWxlbWVudCBpcyBjb25uZWN0ZWQgaWYgaXRzIHNoYWRvdy1pbmNsdWRpbmcgcm9vdCBpcyBhIGRvY3VtZW50LlwiXG4gIGxldCBuID0gbm9kZTtcbiAgZG8ge1xuICAgIG4gPSByb290Tm9kZUZvcihuKTtcbiAgICBpZiAobi5ob3N0KSB7XG4gICAgICBuID0gbi5ob3N0O1xuICAgIH0gZWxzZSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH0gd2hpbGUgKHRydWUpO1xuICByZXR1cm4gbi5ub2RlVHlwZSA9PT0gTm9kZS5ET0NVTUVOVF9OT0RFO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHJvb3QgZm9yIGEgZ2l2ZW4gbm9kZS4gRG9lcyBub3QgY3Jvc3Mgc2hhZG93IERPTSBib3VuZGFyeS5cbiAqIEBwYXJhbSB7IU5vZGV9IG5vZGVcbiAqIEByZXR1cm4geyFOb2RlfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcm9vdE5vZGVGb3Iobm9kZSkge1xuICBpZiAoTm9kZS5wcm90b3R5cGUuZ2V0Um9vdE5vZGUpIHtcbiAgICAvLyBUeXBlIGNoZWNrZXIgc2F5cyBgZ2V0Um9vdE5vZGVgIG1heSByZXR1cm4gbnVsbC5cbiAgICByZXR1cm4gbm9kZS5nZXRSb290Tm9kZSgpIHx8IG5vZGU7XG4gIH1cbiAgbGV0IG47XG4gIGZvciAobiA9IG5vZGU7ICEhbi5wYXJlbnROb2RlOyBuID0gbi5wYXJlbnROb2RlKSB7fVxuICByZXR1cm4gbjtcbn1cblxuLyoqXG4gKiBGaW5kcyB0aGUgY2xvc2VzdCBlbGVtZW50IHRoYXQgc2F0aXNmaWVzIHRoZSBjYWxsYmFjayBmcm9tIHRoaXMgZWxlbWVudFxuICogdXAgdGhlIERPTSBzdWJ0cmVlLlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHtmdW5jdGlvbighRWxlbWVudCk6Ym9vbGVhbn0gY2FsbGJhY2tcbiAqIEBwYXJhbSB7RWxlbWVudD19IG9wdF9zdG9wQXQgb3B0aW9uYWwgZWxlbW50IHRvIHN0b3AgdGhlIHNlYXJjaCBhdC5cbiAqIEByZXR1cm4gez9FbGVtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VzdChlbGVtZW50LCBjYWxsYmFjaywgb3B0X3N0b3BBdCkge1xuICBmb3IgKGxldCBlbCA9IGVsZW1lbnQ7IGVsICYmIGVsICE9PSBvcHRfc3RvcEF0OyBlbCA9IGVsLnBhcmVudEVsZW1lbnQpIHtcbiAgICBpZiAoY2FsbGJhY2soZWwpKSB7XG4gICAgICByZXR1cm4gZWw7XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5cbi8qKlxuICogRmluZHMgdGhlIGNsb3Nlc3Qgbm9kZSB0aGF0IHNhdGlzZmllcyB0aGUgY2FsbGJhY2sgZnJvbSB0aGlzIG5vZGVcbiAqIHVwIHRoZSBET00gc3VidHJlZS5cbiAqIEBwYXJhbSB7IU5vZGV9IG5vZGVcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oIU5vZGUpOmJvb2xlYW59IGNhbGxiYWNrXG4gKiBAcmV0dXJuIHs/Tm9kZX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb3Nlc3ROb2RlKG5vZGUsIGNhbGxiYWNrKSB7XG4gIGZvciAobGV0IG4gPSBub2RlOyBuOyBuID0gbi5wYXJlbnROb2RlKSB7XG4gICAgaWYgKGNhbGxiYWNrKG4pKSB7XG4gICAgICByZXR1cm4gbjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cblxuLyoqXG4gKiBGaW5kcyB0aGUgY2xvc2VzdCBlbGVtZW50IHdpdGggdGhlIHNwZWNpZmllZCBuYW1lIGZyb20gdGhpcyBlbGVtZW50XG4gKiB1cCB0aGUgRE9NIHN1YnRyZWUuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gdGFnTmFtZVxuICogQHJldHVybiB7P0VsZW1lbnR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9zZXN0QnlUYWcoZWxlbWVudCwgdGFnTmFtZSkge1xuICBpZiAoZWxlbWVudC5jbG9zZXN0KSB7XG4gICAgcmV0dXJuIGVsZW1lbnQuY2xvc2VzdCh0YWdOYW1lKTtcbiAgfVxuICB0YWdOYW1lID0gdGFnTmFtZS50b1VwcGVyQ2FzZSgpO1xuICByZXR1cm4gY2xvc2VzdChlbGVtZW50LCBlbCA9PiB7XG4gICAgcmV0dXJuIGVsLnRhZ05hbWUgPT0gdGFnTmFtZTtcbiAgfSk7XG59XG5cbi8qKlxuICogRmluZHMgdGhlIGNsb3Nlc3QgZWxlbWVudCB3aXRoIHRoZSBzcGVjaWZpZWQgc2VsZWN0b3IgZnJvbSB0aGlzIGVsZW1lbnRcbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBzZWxlY3RvclxuICogQHJldHVybiB7P0VsZW1lbnR9IGNsb3Nlc3QgYW5jZXN0b3IgaWYgZm91bmQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9zZXN0QnlTZWxlY3RvcihlbGVtZW50LCBzZWxlY3Rvcikge1xuICBpZiAoZWxlbWVudC5jbG9zZXN0KSB7XG4gICAgcmV0dXJuIGVsZW1lbnQuY2xvc2VzdChzZWxlY3Rvcik7XG4gIH1cblxuICByZXR1cm4gY2xvc2VzdChlbGVtZW50LCBlbCA9PiB7XG4gICAgcmV0dXJuIG1hdGNoZXMoZWwsIHNlbGVjdG9yKTtcbiAgfSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSBnaXZlbiBlbGVtZW50IG1hdGNoZXMgdGhlIHNlbGVjdG9yXG4gKiBAcGFyYW0gIHshRWxlbWVudH0gZWwgVGhlIGVsZW1lbnQgdG8gdmVyaWZ5XG4gKiBAcGFyYW0gIHtzdHJpbmd9IHNlbGVjdG9yIFRoZSBzZWxlY3RvciB0byBjaGVjayBhZ2FpbnN0XG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBlbGVtZW50IG1hdGNoZWQgdGhlIHNlbGVjdG9yLiBGYWxzZSBvdGhlcndpc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXRjaGVzKGVsLCBzZWxlY3Rvcikge1xuICBjb25zdCBtYXRjaGVyID0gZWwubWF0Y2hlcyB8fFxuICAgICAgZWwud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8XG4gICAgICBlbC5tb3pNYXRjaGVzU2VsZWN0b3IgfHxcbiAgICAgIGVsLm1zTWF0Y2hlc1NlbGVjdG9yIHx8XG4gICAgICBlbC5vTWF0Y2hlc1NlbGVjdG9yO1xuICBpZiAobWF0Y2hlcikge1xuICAgIHJldHVybiBtYXRjaGVyLmNhbGwoZWwsIHNlbGVjdG9yKTtcbiAgfVxuICByZXR1cm4gZmFsc2U7IC8vIElFOCBhbHdheXMgcmV0dXJucyBmYWxzZS5cbn1cblxuLyoqXG4gKiBGaW5kcyB0aGUgZmlyc3QgZGVzY2VuZGFudCBlbGVtZW50IHdpdGggdGhlIHNwZWNpZmllZCBuYW1lLlxuICogQHBhcmFtIHshRWxlbWVudHwhRG9jdW1lbnR8IVNoYWRvd1Jvb3R9IGVsZW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSB0YWdOYW1lXG4gKiBAcmV0dXJuIHs/RWxlbWVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVsZW1lbnRCeVRhZyhlbGVtZW50LCB0YWdOYW1lKSB7XG4gIGxldCBlbGVtZW50cztcbiAgLy8gZ2V0RWxlbWVudHNCeVRhZ05hbWUoKSBpcyBub3Qgc3VwcG9ydGVkIG9uIFNoYWRvd1Jvb3QuXG4gIGlmICh0eXBlb2YgZWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGVsZW1lbnRzID0gZWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSh0YWdOYW1lKTtcbiAgfSBlbHNlIHtcbiAgICBlbGVtZW50cyA9IGVsZW1lbnQuLypPSyovcXVlcnlTZWxlY3RvckFsbCh0YWdOYW1lKTtcbiAgfVxuICByZXR1cm4gKGVsZW1lbnRzICYmIGVsZW1lbnRzWzBdKSB8fCBudWxsO1xufVxuXG5cbi8qKlxuICogRmluZHMgdGhlIGZpcnN0IGNoaWxkIGVsZW1lbnQgdGhhdCBzYXRpc2ZpZXMgdGhlIGNhbGxiYWNrLlxuICogQHBhcmFtIHshRWxlbWVudH0gcGFyZW50XG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFFbGVtZW50KTpib29sZWFufSBjYWxsYmFja1xuICogQHJldHVybiB7P0VsZW1lbnR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjaGlsZEVsZW1lbnQocGFyZW50LCBjYWxsYmFjaykge1xuICBmb3IgKGxldCBjaGlsZCA9IHBhcmVudC5maXJzdEVsZW1lbnRDaGlsZDsgY2hpbGQ7XG4gICAgY2hpbGQgPSBjaGlsZC5uZXh0RWxlbWVudFNpYmxpbmcpIHtcbiAgICBpZiAoY2FsbGJhY2soY2hpbGQpKSB7XG4gICAgICByZXR1cm4gY2hpbGQ7XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5cbi8qKlxuICogRmluZHMgYWxsIGNoaWxkIGVsZW1lbnRzIHRoYXQgc2F0aXNmeSB0aGUgY2FsbGJhY2suXG4gKiBAcGFyYW0geyFFbGVtZW50fSBwYXJlbnRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oIUVsZW1lbnQpOmJvb2xlYW59IGNhbGxiYWNrXG4gKiBAcmV0dXJuIHshQXJyYXk8IUVsZW1lbnQ+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2hpbGRFbGVtZW50cyhwYXJlbnQsIGNhbGxiYWNrKSB7XG4gIGNvbnN0IGNoaWxkcmVuID0gW107XG4gIGZvciAobGV0IGNoaWxkID0gcGFyZW50LmZpcnN0RWxlbWVudENoaWxkOyBjaGlsZDtcbiAgICBjaGlsZCA9IGNoaWxkLm5leHRFbGVtZW50U2libGluZykge1xuICAgIGlmIChjYWxsYmFjayhjaGlsZCkpIHtcbiAgICAgIGNoaWxkcmVuLnB1c2goY2hpbGQpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gY2hpbGRyZW47XG59XG5cblxuLyoqXG4gKiBGaW5kcyB0aGUgbGFzdCBjaGlsZCBlbGVtZW50IHRoYXQgc2F0aXNmaWVzIHRoZSBjYWxsYmFjay5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHBhcmVudFxuICogQHBhcmFtIHtmdW5jdGlvbighRWxlbWVudCk6Ym9vbGVhbn0gY2FsbGJhY2tcbiAqIEByZXR1cm4gez9FbGVtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gbGFzdENoaWxkRWxlbWVudChwYXJlbnQsIGNhbGxiYWNrKSB7XG4gIGZvciAobGV0IGNoaWxkID0gcGFyZW50Lmxhc3RFbGVtZW50Q2hpbGQ7IGNoaWxkO1xuICAgIGNoaWxkID0gY2hpbGQucHJldmlvdXNFbGVtZW50U2libGluZykge1xuICAgIGlmIChjYWxsYmFjayhjaGlsZCkpIHtcbiAgICAgIHJldHVybiBjaGlsZDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogRmluZHMgYWxsIGNoaWxkIG5vZGVzIHRoYXQgc2F0aXNmeSB0aGUgY2FsbGJhY2suXG4gKiBUaGVzZSBub2RlcyBjYW4gaW5jbHVkZSBUZXh0LCBDb21tZW50IGFuZCBvdGhlciBjaGlsZCBub2Rlcy5cbiAqIEBwYXJhbSB7IU5vZGV9IHBhcmVudFxuICogQHBhcmFtIHtmdW5jdGlvbighTm9kZSk6Ym9vbGVhbn0gY2FsbGJhY2tcbiAqIEByZXR1cm4geyFBcnJheTwhTm9kZT59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjaGlsZE5vZGVzKHBhcmVudCwgY2FsbGJhY2spIHtcbiAgY29uc3Qgbm9kZXMgPSBbXTtcbiAgZm9yIChsZXQgY2hpbGQgPSBwYXJlbnQuZmlyc3RDaGlsZDsgY2hpbGQ7XG4gICAgY2hpbGQgPSBjaGlsZC5uZXh0U2libGluZykge1xuICAgIGlmIChjYWxsYmFjayhjaGlsZCkpIHtcbiAgICAgIG5vZGVzLnB1c2goY2hpbGQpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbm9kZXM7XG59XG5cbi8qKlxuICogQHR5cGUge2Jvb2xlYW58dW5kZWZpbmVkfVxuICogQHZpc2libGVGb3JUZXN0aW5nXG4gKi9cbmxldCBzY29wZVNlbGVjdG9yU3VwcG9ydGVkO1xuXG4vKipcbiAqIEBwYXJhbSB7Ym9vbGVhbnx1bmRlZmluZWR9IHZhbFxuICogQHZpc2libGVGb3JUZXN0aW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRTY29wZVNlbGVjdG9yU3VwcG9ydGVkRm9yVGVzdGluZyh2YWwpIHtcbiAgc2NvcGVTZWxlY3RvclN1cHBvcnRlZCA9IHZhbDtcbn1cblxuLyoqXG4gKiBUZXN0IHRoYXQgdGhlIDpzY29wZSBzZWxlY3RvciBpcyBzdXBwb3J0ZWQgYW5kIGJlaGF2ZXMgY29ycmVjdGx5LlxuICogQHBhcmFtIHshRWxlbWVudH0gcGFyZW50XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc1Njb3BlU2VsZWN0b3JTdXBwb3J0ZWQocGFyZW50KSB7XG4gIGNvbnN0IGRvYyA9IHBhcmVudC5vd25lckRvY3VtZW50O1xuICB0cnkge1xuICAgIGNvbnN0IHRlc3RFbGVtZW50ID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IHRlc3RDaGlsZCA9IGRvYy5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0ZXN0RWxlbWVudC5hcHBlbmRDaGlsZCh0ZXN0Q2hpbGQpO1xuICAgIC8vIE5PVEUoY3ZpYWxpeiwgIzEyMzgzKTogRmlyZWZveCdzIGltcGxlbWVudGF0aW9uIGlzIGluY29tcGxldGUsXG4gICAgLy8gdGhlcmVmb3JlIHdlIHRlc3QgYWN0dWFsIGZ1bmN0aW9uYWxpdHkgb2ZgOnNjb3BlYCBhcyB3ZWxsLlxuICAgIHJldHVybiB0ZXN0RWxlbWVudC4vKk9LKi9xdWVyeVNlbGVjdG9yKCc6c2NvcGUgZGl2JykgPT09IHRlc3RDaGlsZDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vKipcbiAqIEZpbmRzIHRoZSBmaXJzdCBjaGlsZCBlbGVtZW50IHRoYXQgaGFzIHRoZSBzcGVjaWZpZWQgYXR0cmlidXRlLlxuICogQHBhcmFtIHshRWxlbWVudH0gcGFyZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gYXR0clxuICogQHJldHVybiB7P0VsZW1lbnR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjaGlsZEVsZW1lbnRCeUF0dHIocGFyZW50LCBhdHRyKSB7XG4gIHJldHVybiBzY29wZWRRdWVyeVNlbGVjdG9yLypPSyovKHBhcmVudCwgYD4gWyR7YXR0cn1dYCk7XG59XG5cblxuLyoqXG4gKiBGaW5kcyB0aGUgbGFzdCBjaGlsZCBlbGVtZW50IHRoYXQgaGFzIHRoZSBzcGVjaWZpZWQgYXR0cmlidXRlLlxuICogQHBhcmFtIHshRWxlbWVudH0gcGFyZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gYXR0clxuICogQHJldHVybiB7P0VsZW1lbnR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsYXN0Q2hpbGRFbGVtZW50QnlBdHRyKHBhcmVudCwgYXR0cikge1xuICByZXR1cm4gbGFzdENoaWxkRWxlbWVudChwYXJlbnQsIGVsID0+IHtcbiAgICByZXR1cm4gZWwuaGFzQXR0cmlidXRlKGF0dHIpO1xuICB9KTtcbn1cblxuXG4vKipcbiAqIEZpbmRzIGFsbCBjaGlsZCBlbGVtZW50cyB0aGF0IGhhcyB0aGUgc3BlY2lmaWVkIGF0dHJpYnV0ZS5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHBhcmVudFxuICogQHBhcmFtIHtzdHJpbmd9IGF0dHJcbiAqIEByZXR1cm4geyFOb2RlTGlzdDwhRWxlbWVudD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjaGlsZEVsZW1lbnRzQnlBdHRyKHBhcmVudCwgYXR0cikge1xuICByZXR1cm4gc2NvcGVkUXVlcnlTZWxlY3RvckFsbC8qT0sqLyhwYXJlbnQsIGA+IFske2F0dHJ9XWApO1xufVxuXG5cbi8qKlxuICogRmluZHMgdGhlIGZpcnN0IGNoaWxkIGVsZW1lbnQgdGhhdCBoYXMgdGhlIHNwZWNpZmllZCB0YWcgbmFtZS5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHBhcmVudFxuICogQHBhcmFtIHtzdHJpbmd9IHRhZ05hbWVcbiAqIEByZXR1cm4gez9FbGVtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2hpbGRFbGVtZW50QnlUYWcocGFyZW50LCB0YWdOYW1lKSB7XG4gIHJldHVybiBzY29wZWRRdWVyeVNlbGVjdG9yLypPSyovKHBhcmVudCwgYD4gJHt0YWdOYW1lfWApO1xufVxuXG5cbi8qKlxuICogRmluZHMgYWxsIGNoaWxkIGVsZW1lbnRzIHdpdGggdGhlIHNwZWNpZmllZCB0YWcgbmFtZS5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHBhcmVudFxuICogQHBhcmFtIHtzdHJpbmd9IHRhZ05hbWVcbiAqIEByZXR1cm4geyFOb2RlTGlzdDwhRWxlbWVudD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjaGlsZEVsZW1lbnRzQnlUYWcocGFyZW50LCB0YWdOYW1lKSB7XG4gIHJldHVybiBzY29wZWRRdWVyeVNlbGVjdG9yQWxsLypPSyovKHBhcmVudCwgYD4gJHt0YWdOYW1lfWApO1xufVxuXG5cbi8qKlxuICogRmluZHMgdGhlIGZpcnN0IGVsZW1lbnQgdGhhdCBtYXRjaGVzIGBzZWxlY3RvcmAsIHNjb3BlZCBpbnNpZGUgYHJvb3RgLlxuICogTm90ZTogaW4gSUUsIHRoaXMgY2F1c2VzIGEgcXVpY2sgbXV0YXRpb24gb2YgdGhlIGVsZW1lbnQncyBjbGFzcyBsaXN0LlxuICogQHBhcmFtIHshRWxlbWVudH0gcm9vdFxuICogQHBhcmFtIHtzdHJpbmd9IHNlbGVjdG9yXG4gKiBAcmV0dXJuIHs/RWxlbWVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNjb3BlZFF1ZXJ5U2VsZWN0b3Iocm9vdCwgc2VsZWN0b3IpIHtcbiAgaWYgKHNjb3BlU2VsZWN0b3JTdXBwb3J0ZWQgPT0gbnVsbCkge1xuICAgIHNjb3BlU2VsZWN0b3JTdXBwb3J0ZWQgPSBpc1Njb3BlU2VsZWN0b3JTdXBwb3J0ZWQocm9vdCk7XG4gIH1cbiAgaWYgKHNjb3BlU2VsZWN0b3JTdXBwb3J0ZWQpIHtcbiAgICByZXR1cm4gcm9vdC4vKk9LKi9xdWVyeVNlbGVjdG9yKGA6c2NvcGUgJHtzZWxlY3Rvcn1gKTtcbiAgfVxuXG4gIC8vIE9ubHkgSUUuXG4gIGNvbnN0IHVuaXF1ZSA9ICdpLWFtcGh0bWwtc2NvcGVkJztcbiAgcm9vdC5jbGFzc0xpc3QuYWRkKHVuaXF1ZSk7XG4gIGNvbnN0IGVsZW1lbnQgPSByb290Li8qT0sqL3F1ZXJ5U2VsZWN0b3IoYC4ke3VuaXF1ZX0gJHtzZWxlY3Rvcn1gKTtcbiAgcm9vdC5jbGFzc0xpc3QucmVtb3ZlKHVuaXF1ZSk7XG4gIHJldHVybiBlbGVtZW50O1xufVxuXG5cbi8qKlxuICogRmluZHMgdGhlIGV2ZXJ5IGVsZW1lbnQgdGhhdCBtYXRjaGVzIGBzZWxlY3RvcmAsIHNjb3BlZCBpbnNpZGUgYHJvb3RgLlxuICogTm90ZTogaW4gSUUsIHRoaXMgY2F1c2VzIGEgcXVpY2sgbXV0YXRpb24gb2YgdGhlIGVsZW1lbnQncyBjbGFzcyBsaXN0LlxuICogQHBhcmFtIHshRWxlbWVudH0gcm9vdFxuICogQHBhcmFtIHtzdHJpbmd9IHNlbGVjdG9yXG4gKiBAcmV0dXJuIHshTm9kZUxpc3Q8IUVsZW1lbnQ+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NvcGVkUXVlcnlTZWxlY3RvckFsbChyb290LCBzZWxlY3Rvcikge1xuICBpZiAoc2NvcGVTZWxlY3RvclN1cHBvcnRlZCA9PSBudWxsKSB7XG4gICAgc2NvcGVTZWxlY3RvclN1cHBvcnRlZCA9IGlzU2NvcGVTZWxlY3RvclN1cHBvcnRlZChyb290KTtcbiAgfVxuICBpZiAoc2NvcGVTZWxlY3RvclN1cHBvcnRlZCkge1xuICAgIHJldHVybiByb290Li8qT0sqL3F1ZXJ5U2VsZWN0b3JBbGwoYDpzY29wZSAke3NlbGVjdG9yfWApO1xuICB9XG5cbiAgLy8gT25seSBJRS5cbiAgY29uc3QgdW5pcXVlID0gJ2ktYW1waHRtbC1zY29wZWQnO1xuICByb290LmNsYXNzTGlzdC5hZGQodW5pcXVlKTtcbiAgY29uc3QgZWxlbWVudHMgPSByb290Li8qT0sqL3F1ZXJ5U2VsZWN0b3JBbGwoYC4ke3VuaXF1ZX0gJHtzZWxlY3Rvcn1gKTtcbiAgcm9vdC5jbGFzc0xpc3QucmVtb3ZlKHVuaXF1ZSk7XG4gIHJldHVybiBlbGVtZW50cztcbn1cblxuXG4vKipcbiAqIFJldHVybnMgZWxlbWVudCBkYXRhLXBhcmFtLSBhdHRyaWJ1dGVzIGFzIHVybCBwYXJhbWV0ZXJzIGtleS12YWx1ZSBwYWlycy5cbiAqIGUuZy4gZGF0YS1wYXJhbS1zb21lLWF0dHI9dmFsdWUgLT4ge3NvbWVBdHRyOiB2YWx1ZX0uXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHN0cmluZyk6c3RyaW5nPX0gb3B0X2NvbXB1dGVQYXJhbU5hbWVGdW5jIHRvIGNvbXB1dGUgdGhlXG4gKiAgICBwYXJhbWV0ZXIgbmFtZSwgZ2V0IHBhc3NlZCB0aGUgY2FtZWwtY2FzZSBwYXJhbWV0ZXIgbmFtZS5cbiAqIEBwYXJhbSB7IVJlZ0V4cD19IG9wdF9wYXJhbVBhdHRlcm4gUmVnZXggcGF0dGVybiB0byBtYXRjaCBkYXRhIGF0dHJpYnV0ZXMuXG4gKiBAcmV0dXJuIHshSnNvbk9iamVjdH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERhdGFQYXJhbXNGcm9tQXR0cmlidXRlcyhlbGVtZW50LCBvcHRfY29tcHV0ZVBhcmFtTmFtZUZ1bmMsXG4gIG9wdF9wYXJhbVBhdHRlcm4pIHtcbiAgY29uc3QgY29tcHV0ZVBhcmFtTmFtZUZ1bmMgPSBvcHRfY29tcHV0ZVBhcmFtTmFtZUZ1bmMgfHwgKGtleSA9PiBrZXkpO1xuICBjb25zdCB7ZGF0YXNldH0gPSBlbGVtZW50O1xuICBjb25zdCBwYXJhbXMgPSBkaWN0KCk7XG4gIGNvbnN0IHBhcmFtUGF0dGVybiA9IG9wdF9wYXJhbVBhdHRlcm4gPyBvcHRfcGFyYW1QYXR0ZXJuIDogL15wYXJhbSguKykvO1xuICBmb3IgKGNvbnN0IGtleSBpbiBkYXRhc2V0KSB7XG4gICAgY29uc3QgbWF0Y2hlcyA9IGtleS5tYXRjaChwYXJhbVBhdHRlcm4pO1xuICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICBjb25zdCBwYXJhbSA9IG1hdGNoZXNbMV1bMF0udG9Mb3dlckNhc2UoKSArIG1hdGNoZXNbMV0uc3Vic3RyKDEpO1xuICAgICAgcGFyYW1zW2NvbXB1dGVQYXJhbU5hbWVGdW5jKHBhcmFtKV0gPSBkYXRhc2V0W2tleV07XG4gICAgfVxuICB9XG4gIHJldHVybiBwYXJhbXM7XG59XG5cbi8qKlxuICogV2hldGhlciB0aGUgZWxlbWVudCBoYXZlIGEgbmV4dCBub2RlIGluIHRoZSBkb2N1bWVudCBvcmRlci5cbiAqIFRoaXMgbWVhbnMgZWl0aGVyOlxuICogIGEuIFRoZSBlbGVtZW50IGl0c2VsZiBoYXMgYSBuZXh0U2libGluZy5cbiAqICBiLiBBbnkgb2YgdGhlIGVsZW1lbnQgYW5jZXN0b3JzIGhhcyBhIG5leHRTaWJsaW5nLlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHs/Tm9kZX0gb3B0X3N0b3BOb2RlXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzTmV4dE5vZGVJbkRvY3VtZW50T3JkZXIoZWxlbWVudCwgb3B0X3N0b3BOb2RlKSB7XG4gIGxldCBjdXJyZW50RWxlbWVudCA9IGVsZW1lbnQ7XG4gIGRvIHtcbiAgICBpZiAoY3VycmVudEVsZW1lbnQubmV4dFNpYmxpbmcpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSB3aGlsZSAoKGN1cnJlbnRFbGVtZW50ID0gY3VycmVudEVsZW1lbnQucGFyZW50Tm9kZSkgJiZcbiAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50ICE9IG9wdF9zdG9wTm9kZSk7XG4gIHJldHVybiBmYWxzZTtcbn1cblxuXG4vKipcbiAqIEZpbmRzIGFsbCBhbmNlc3RvciBlbGVtZW50cyB0aGF0IHNhdGlzZnkgcHJlZGljYXRlLlxuICogQHBhcmFtIHshRWxlbWVudH0gY2hpbGRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oIUVsZW1lbnQpOmJvb2xlYW59IHByZWRpY2F0ZVxuICogQHJldHVybiB7IUFycmF5PCFFbGVtZW50Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFuY2VzdG9yRWxlbWVudHMoY2hpbGQsIHByZWRpY2F0ZSkge1xuICBjb25zdCBhbmNlc3RvcnMgPSBbXTtcbiAgZm9yIChsZXQgYW5jZXN0b3IgPSBjaGlsZC5wYXJlbnRFbGVtZW50OyBhbmNlc3RvcjtcbiAgICBhbmNlc3RvciA9IGFuY2VzdG9yLnBhcmVudEVsZW1lbnQpIHtcbiAgICBpZiAocHJlZGljYXRlKGFuY2VzdG9yKSkge1xuICAgICAgYW5jZXN0b3JzLnB1c2goYW5jZXN0b3IpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gYW5jZXN0b3JzO1xufVxuXG5cbi8qKlxuICogRmluZHMgYWxsIGFuY2VzdG9yIGVsZW1lbnRzIHRoYXQgaGFzIHRoZSBzcGVjaWZpZWQgdGFnIG5hbWUuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBjaGlsZFxuICogQHBhcmFtIHtzdHJpbmd9IHRhZ05hbWVcbiAqIEByZXR1cm4geyFBcnJheTwhRWxlbWVudD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhbmNlc3RvckVsZW1lbnRzQnlUYWcoY2hpbGQsIHRhZ05hbWUpIHtcbiAgdGFnTmFtZSA9IHRhZ05hbWUudG9VcHBlckNhc2UoKTtcbiAgcmV0dXJuIGFuY2VzdG9yRWxlbWVudHMoY2hpbGQsIGVsID0+IHtcbiAgICByZXR1cm4gZWwudGFnTmFtZSA9PSB0YWdOYW1lO1xuICB9KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgY2xvbmUgb2YgdGhlIGNvbnRlbnQgb2YgYSB0ZW1wbGF0ZSBlbGVtZW50LlxuICpcbiAqIFBvbHlmaWxsIHRvIHJlcGxhY2UgLmNvbnRlbnQgYWNjZXNzIGZvciBicm93c2VycyB0aGF0IGRvIG5vdCBzdXBwb3J0XG4gKiBIVE1MVGVtcGxhdGVFbGVtZW50cyBuYXRpdmVseS5cbiAqXG4gKiBAcGFyYW0geyFIVE1MVGVtcGxhdGVFbGVtZW50fCFFbGVtZW50fSB0ZW1wbGF0ZVxuICogQHJldHVybiB7IURvY3VtZW50RnJhZ21lbnR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0ZW1wbGF0ZUNvbnRlbnRDbG9uZSh0ZW1wbGF0ZSkge1xuICBpZiAoJ2NvbnRlbnQnIGluIHRlbXBsYXRlKSB7XG4gICAgcmV0dXJuIHRlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGNvbnRlbnQgPSB0ZW1wbGF0ZS5vd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICBjb3B5Q2hpbGRyZW4odGVtcGxhdGUsIGNvbnRlbnQpO1xuICAgIHJldHVybiBjb250ZW50O1xuICB9XG59XG5cbi8qKlxuICogSXRlcmF0ZSBvdmVyIGFuIGFycmF5LWxpa2UuIFNvbWUgY29sbGVjdGlvbnMgbGlrZSBOb2RlTGlzdCBhcmVcbiAqIGxhemlseSBldmFsdWF0ZWQgaW4gc29tZSBicm93c2VycywgYW5kIGFjY2Vzc2luZyBgbGVuZ3RoYCBmb3JjZXMgZnVsbFxuICogZXZhbHVhdGlvbi4gV2UgY2FuIGltcHJvdmUgcGVyZm9ybWFuY2UgYnkgaXRlcmF0aW5nIHVudGlsIGFuIGVsZW1lbnQgaXNcbiAqIGB1bmRlZmluZWRgIHRvIGF2b2lkIGNoZWNraW5nIHRoZSBgbGVuZ3RoYCBwcm9wZXJ0eS5cbiAqIFRlc3QgY2FzZXM6IGh0dHBzOi8vanNwZXJmLmNvbS9pdGVyYXRpbmctb3Zlci1jb2xsZWN0aW9ucy1vZi1lbGVtZW50c1xuICogQHBhcmFtIHshSUFycmF5TGlrZTxUPn0gaXRlcmFibGVcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oVCwgbnVtYmVyKX0gY2JcbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpdGVyYXRlQ3Vyc29yKGl0ZXJhYmxlLCBjYikge1xuICBmb3IgKGxldCBpID0gMCwgdmFsdWU7ICh2YWx1ZSA9IGl0ZXJhYmxlW2ldKSAhPT0gdW5kZWZpbmVkOyBpKyspIHtcbiAgICBjYih2YWx1ZSwgaSk7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGlzIG1ldGhvZCB3cmFwcyBhcm91bmQgd2luZG93J3Mgb3BlbiBtZXRob2QuIEl0IGZpcnN0IHRyaWVzIHRvIGV4ZWN1dGVcbiAqIGBvcGVuYCBjYWxsIHdpdGggdGhlIHByb3ZpZGVkIHRhcmdldCBhbmQgaWYgaXQgZmFpbHMsIGl0IHJldHJpZXMgdGhlIGNhbGxcbiAqIHdpdGggdGhlIGBfdG9wYCB0YXJnZXQuIFRoaXMgaXMgbmVjZXNzYXJ5IGdpdmVuIHRoYXQgaW4gc29tZSBlbWJlZGRpbmdcbiAqIHNjZW5hcmlvcywgc3VjaCBhcyBpT1MnIFdLV2ViVmlldywgbmF2aWdhdGlvbiB0byBgX2JsYW5rYCBhbmQgb3RoZXIgdGFyZ2V0c1xuICogaXMgYmxvY2tlZCBieSBkZWZhdWx0LlxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge3N0cmluZ30gdGFyZ2V0XG4gKiBAcGFyYW0ge3N0cmluZz19IG9wdF9mZWF0dXJlc1xuICogQHJldHVybiB7P1dpbmRvd31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9wZW5XaW5kb3dEaWFsb2cod2luLCB1cmwsIHRhcmdldCwgb3B0X2ZlYXR1cmVzKSB7XG4gIC8vIFRyeSBmaXJzdCB3aXRoIHRoZSBzcGVjaWZpZWQgdGFyZ2V0LiBJZiB3ZSdyZSBpbnNpZGUgdGhlIFdLV2ViVmlldyBvclxuICAvLyBhIHNpbWlsYXIgZW52aXJvbm1lbnRzLCB0aGlzIG1ldGhvZCBpcyBleHBlY3RlZCB0byBmYWlsIGJ5IGRlZmF1bHQgZm9yXG4gIC8vIGFsbCB0YXJnZXRzIGV4Y2VwdCBgX3RvcGAuXG4gIGxldCByZXM7XG4gIHRyeSB7XG4gICAgcmVzID0gd2luLm9wZW4odXJsLCB0YXJnZXQsIG9wdF9mZWF0dXJlcyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBkZXYoKS5lcnJvcignRE9NJywgJ0ZhaWxlZCB0byBvcGVuIHVybCBvbiB0YXJnZXQ6ICcsIHRhcmdldCwgZSk7XG4gIH1cblxuICAvLyBUaGVuIHRyeSB3aXRoIGBfdG9wYCB0YXJnZXQuXG4gIGlmICghcmVzICYmIHRhcmdldCAhPSAnX3RvcCcpIHtcbiAgICByZXMgPSB3aW4ub3Blbih1cmwsICdfdG9wJyk7XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiBXaGV0aGVyIHRoZSBlbGVtZW50IGlzIGEgc2NyaXB0IHRhZyB3aXRoIGFwcGxpY2F0aW9uL2pzb24gdHlwZS5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0pzb25TY3JpcHRUYWcoZWxlbWVudCkge1xuICByZXR1cm4gZWxlbWVudC50YWdOYW1lID09ICdTQ1JJUFQnICYmXG4gICAgICAgICAgICBlbGVtZW50LmdldEF0dHJpYnV0ZSgndHlwZScpLnRvVXBwZXJDYXNlKCkgPT0gJ0FQUExJQ0FUSU9OL0pTT04nO1xufVxuXG4vKipcbiAqIFdoZXRoZXIgdGhlIGVsZW1lbnQgaXMgYSBzY3JpcHQgdGFnIHdpdGggYXBwbGljYXRpb24vanNvbiB0eXBlLlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzSnNvbkxkU2NyaXB0VGFnKGVsZW1lbnQpIHtcbiAgcmV0dXJuIGVsZW1lbnQudGFnTmFtZSA9PSAnU0NSSVBUJyAmJlxuICAgICAgZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKS50b1VwcGVyQ2FzZSgpID09ICdBUFBMSUNBVElPTi9MRCtKU09OJztcbn1cblxuLyoqXG4gKiBXaGV0aGVyIHRoZSBwYWdlJ3MgZGlyZWN0aW9uIGlzIHJpZ2h0IHRvIGxlZnQgb3Igbm90LlxuICogQHBhcmFtIHshRG9jdW1lbnR9IGRvY1xuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzUlRMKGRvYykge1xuICBjb25zdCBkaXIgPSBkb2MuYm9keS5nZXRBdHRyaWJ1dGUoJ2RpcicpXG4gICAgICAgICAgICAgICAgIHx8IGRvYy5kb2N1bWVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkaXInKVxuICAgICAgICAgICAgICAgICB8fCAnbHRyJztcbiAgcmV0dXJuIGRpciA9PSAncnRsJztcbn1cblxuXG4vKipcbiAqIEVzY2FwZXMgYW4gaWRlbnQgKElEIG9yIGEgY2xhc3MgbmFtZSkgdG8gYmUgdXNlZCBhcyBhIENTUyBzZWxlY3Rvci5cbiAqXG4gKiBTZWUgaHR0cHM6Ly9kcmFmdHMuY3Nzd2cub3JnL2Nzc29tLyNzZXJpYWxpemUtYW4taWRlbnRpZmllci5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRlbnRcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVzY2FwZUNzc1NlbGVjdG9ySWRlbnQoaWRlbnQpIHtcbiAgcmV0dXJuIGNzc0VzY2FwZShpZGVudCk7XG59XG5cbi8qKlxuICogRXNjYXBlcyBhbiBpZGVudCBpbiBhIHdheSB0aGF0IGNhbiBiZSB1c2VkIGJ5IDpudGgtY2hpbGQoKSBwc3VlZG8tY2xhc3MuXG4gKlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93M2MvY3Nzd2ctZHJhZnRzL2lzc3Vlcy8yMzA2LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gaWRlbnRcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVzY2FwZUNzc1NlbGVjdG9yTnRoKGlkZW50KSB7XG4gIGNvbnN0IGVzY2FwZWQgPSBTdHJpbmcoaWRlbnQpO1xuICAvLyBFbnN1cmUgaXQgZG9lc24ndCBjbG9zZSB0aGUgbnRoLWNoaWxkIHBzdWVkbyBjbGFzcy5cbiAgZGV2KCkuYXNzZXJ0KGVzY2FwZWQuaW5kZXhPZignKScpID09PSAtMSk7XG4gIHJldHVybiBlc2NhcGVkO1xufVxuXG4vKipcbiAqIEVzY2FwZXMgYDxgLCBgPmAgYW5kIG90aGVyIEhUTUwgY2hhcmNhdGVycyB3aXRoIHRoZWlyIGVzY2FwZWQgZm9ybXMuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlSHRtbCh0ZXh0KSB7XG4gIGlmICghdGV4dCkge1xuICAgIHJldHVybiB0ZXh0O1xuICB9XG4gIHJldHVybiB0ZXh0LnJlcGxhY2UoSFRNTF9FU0NBUEVfUkVHRVgsIGVzY2FwZUh0bWxDaGFyKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gY1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBlc2NhcGVIdG1sQ2hhcihjKSB7XG4gIHJldHVybiBIVE1MX0VTQ0FQRV9DSEFSU1tjXTtcbn1cblxuLyoqXG4gKiBUcmllcyB0byBmb2N1cyBvbiB0aGUgZ2l2ZW4gZWxlbWVudDsgZmFpbHMgc2lsZW50bHkgaWYgYnJvd3NlciB0aHJvd3MgYW5cbiAqIGV4Y2VwdGlvbi5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyeUZvY3VzKGVsZW1lbnQpIHtcbiAgdHJ5IHtcbiAgICBlbGVtZW50Li8qT0sqL2ZvY3VzKCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBJRSA8PSA3IG1heSB0aHJvdyBleGNlcHRpb25zIHdoZW4gZm9jdXNpbmcgb24gaGlkZGVuIGl0ZW1zLlxuICB9XG59XG5cbi8qKlxuICogV2hldGhlciB0aGUgZ2l2ZW4gd2luZG93IGlzIGluIGFuIGlmcmFtZSBvciBub3QuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzSWZyYW1lZCh3aW4pIHtcbiAgcmV0dXJuIHdpbi5wYXJlbnQgJiYgd2luLnBhcmVudCAhPSB3aW47XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiB0aGlzIGVsZW1lbnQgaXMgYW4gQU1QIGVsZW1lbnRcbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0FtcEVsZW1lbnQoZWxlbWVudCkge1xuICBjb25zdCB0YWcgPSBlbGVtZW50LnRhZ05hbWU7XG4gIC8vIFVzZSBwcmVmaXggdG8gcmVjb2duaXplIEFNUCBlbGVtZW50LiBUaGlzIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHN0dWJcbiAgLy8gbWF5IG5vdCBiZSBhdHRhY2hlZCB5ZXQuXG4gIHJldHVybiBzdGFydHNXaXRoKHRhZywgJ0FNUC0nKSAmJlxuICAgICAgLy8gU29tZSBcImFtcC0qXCIgZWxlbWVudHMgYXJlIG5vdCByZWFsbHkgQU1QIGVsZW1lbnRzLiA6c21oOlxuICAgICAgISh0YWcgPT0gJ0FNUC1TVElDS1ktQUQtVE9QLVBBRERJTkcnIHx8IHRhZyA9PSAnQU1QLUJPRFknKTtcbn1cblxuLyoqXG4gKiBSZXR1cm4gYSBwcm9taXNlIHRoYXQgcmVzb2x2ZSB3aGVuIGFuIEFNUCBlbGVtZW50IHVwZ3JhZGUgZnJvbSBIVE1MRWxlbWVudFxuICogdG8gQ3VzdG9tRWxlbWVudFxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHJldHVybiB7IVByb21pc2U8IUVsZW1lbnQ+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gd2hlblVwZ3JhZGVkVG9DdXN0b21FbGVtZW50KGVsZW1lbnQpIHtcbiAgZGV2KCkuYXNzZXJ0KGlzQW1wRWxlbWVudChlbGVtZW50KSwgJ2VsZW1lbnQgaXMgbm90IEFtcEVsZW1lbnQnKTtcbiAgaWYgKGVsZW1lbnQuY3JlYXRlZENhbGxiYWNrKSB7XG4gICAgLy8gRWxlbWVudCBhbHJlYWR5IGlzIEN1c3RvbUVsZW1lbnQ7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShlbGVtZW50KTtcbiAgfVxuICAvLyBJZiBFbGVtZW50IGlzIHN0aWxsIEhUTUxFbGVtZW50LCB3YWl0IGZvciBpdCB0byB1cGdyYWRlIHRvIGN1c3RvbUVsZW1lbnRcbiAgLy8gTm90ZTogdXNlIHB1cmUgc3RyaW5nIHRvIGF2b2lkIG9iZnVzY2F0aW9uIGJldHdlZW4gdmVyc2lvbnMuXG4gIGlmICghZWxlbWVudFtVUEdSQURFX1RPX0NVU1RPTUVMRU1FTlRfUFJPTUlTRV0pIHtcbiAgICBjb25zdCBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xuICAgIGVsZW1lbnRbVVBHUkFERV9UT19DVVNUT01FTEVNRU5UX1BST01JU0VdID0gZGVmZXJyZWQucHJvbWlzZTtcbiAgICBlbGVtZW50W1VQR1JBREVfVE9fQ1VTVE9NRUxFTUVOVF9SRVNPTFZFUl0gPSBkZWZlcnJlZC5yZXNvbHZlO1xuXG4gIH1cblxuICByZXR1cm4gZWxlbWVudFtVUEdSQURFX1RPX0NVU1RPTUVMRU1FTlRfUFJPTUlTRV07XG59XG5cbi8qKlxuICogUmVwbGFjZW1lbnQgZm9yIGBFbGVtZW50LnJlcXVlc3RGdWxsc2NyZWVuKClgIG1ldGhvZC5cbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9FbGVtZW50L3JlcXVlc3RGdWxsc2NyZWVuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmdWxsc2NyZWVuRW50ZXIoZWxlbWVudCkge1xuICBjb25zdCByZXF1ZXN0RnMgPSBlbGVtZW50LnJlcXVlc3RGdWxsc2NyZWVuXG4gICB8fCBlbGVtZW50LnJlcXVlc3RGdWxsU2NyZWVuXG4gICB8fCBlbGVtZW50LndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuXG4gICB8fCBlbGVtZW50LndlYmtpdFJlcXVlc3RGdWxsU2NyZWVuXG4gICB8fCBlbGVtZW50LndlYmtpdEVudGVyRnVsbHNjcmVlblxuICAgfHwgZWxlbWVudC53ZWJraXRFbnRlckZ1bGxTY3JlZW5cbiAgIHx8IGVsZW1lbnQubXNSZXF1ZXN0RnVsbHNjcmVlblxuICAgfHwgZWxlbWVudC5tc1JlcXVlc3RGdWxsU2NyZWVuXG4gICB8fCBlbGVtZW50Lm1velJlcXVlc3RGdWxsc2NyZWVuXG4gICB8fCBlbGVtZW50Lm1velJlcXVlc3RGdWxsU2NyZWVuO1xuICBpZiAocmVxdWVzdEZzKSB7XG4gICAgcmVxdWVzdEZzLmNhbGwoZWxlbWVudCk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZXBsYWNlbWVudCBmb3IgYERvY3VtZW50LmV4aXRGdWxsc2NyZWVuKClgIG1ldGhvZC5cbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Eb2N1bWVudC9leGl0RnVsbHNjcmVlblxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gZnVsbHNjcmVlbkV4aXQoZWxlbWVudCkge1xuICBsZXQgZXhpdEZzID0gZWxlbWVudC5jYW5jZWxGdWxsU2NyZWVuXG4gICAgICAgICAgICAgIMKgfHwgZWxlbWVudC5leGl0RnVsbHNjcmVlblxuICAgICAgICAgICAgICDCoHx8IGVsZW1lbnQuZXhpdEZ1bGxTY3JlZW5cbiAgICAgICAgICAgICAgwqB8fCBlbGVtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuXG4gICAgICAgICAgICAgIMKgfHwgZWxlbWVudC53ZWJraXRFeGl0RnVsbFNjcmVlblxuICAgICAgICAgICAgICDCoHx8IGVsZW1lbnQud2Via2l0Q2FuY2VsRnVsbFNjcmVlblxuICAgICAgICAgICAgICDCoHx8IGVsZW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlblxuICAgICAgICAgICAgICDCoHx8IGVsZW1lbnQubXNFeGl0RnVsbHNjcmVlbjtcbiAgaWYgKGV4aXRGcykge1xuICAgIGV4aXRGcy5jYWxsKGVsZW1lbnQpO1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoZWxlbWVudC5vd25lckRvY3VtZW50KSB7XG4gICAgZXhpdEZzID0gZWxlbWVudC5vd25lckRvY3VtZW50LmNhbmNlbEZ1bGxTY3JlZW5cbiAgICAgICAgICAgICB8fCBlbGVtZW50Lm93bmVyRG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW5cbiAgICAgICAgICAgICB8fCBlbGVtZW50Lm93bmVyRG9jdW1lbnQuZXhpdEZ1bGxTY3JlZW5cbiAgICAgICAgICAgICB8fCBlbGVtZW50Lm93bmVyRG9jdW1lbnQud2Via2l0RXhpdEZ1bGxzY3JlZW5cbiAgICAgICAgICAgICB8fCBlbGVtZW50Lm93bmVyRG9jdW1lbnQud2Via2l0RXhpdEZ1bGxTY3JlZW5cbiAgICAgICAgICAgICB8fCBlbGVtZW50Lm93bmVyRG9jdW1lbnQud2Via2l0Q2FuY2VsRnVsbFNjcmVlblxuICAgICAgICAgICAgIHx8IGVsZW1lbnQub3duZXJEb2N1bWVudC5tb3pDYW5jZWxGdWxsU2NyZWVuXG4gICAgICAgICAgICAgfHwgZWxlbWVudC5vd25lckRvY3VtZW50Lm1zRXhpdEZ1bGxzY3JlZW47XG4gIH1cbiAgaWYgKGV4aXRGcykge1xuICAgIGV4aXRGcy5jYWxsKGVsZW1lbnQub3duZXJEb2N1bWVudCk7XG4gICAgcmV0dXJuO1xuICB9XG59XG5cblxuLyoqXG4gKiBSZXBsYWNlbWVudCBmb3IgYERvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50YC5cbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Eb2N1bWVudC9mdWxsc2NyZWVuRWxlbWVudFxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRnVsbHNjcmVlbkVsZW1lbnQoZWxlbWVudCkge1xuICBjb25zdCBpc0Z1bGxzY3JlZW4gPSBlbGVtZW50LndlYmtpdERpc3BsYXlpbmdGdWxsc2NyZWVuO1xuICBpZiAoaXNGdWxsc2NyZWVuKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKGVsZW1lbnQub3duZXJEb2N1bWVudCkge1xuICAgIGNvbnN0IGZ1bGxzY3JlZW5FbGVtZW50ID0gZWxlbWVudC5vd25lckRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50XG4gICAgICAgICAgICAgfHwgZWxlbWVudC5vd25lckRvY3VtZW50LndlYmtpdEZ1bGxzY3JlZW5FbGVtZW50XG4gICAgICAgICAgICAgfHwgZWxlbWVudC5vd25lckRvY3VtZW50Lm1vekZ1bGxTY3JlZW5FbGVtZW50XG4gICAgICAgICAgICAgfHwgZWxlbWVudC53ZWJraXRDdXJyZW50RnVsbFNjcmVlbkVsZW1lbnQ7XG4gICAgaWYgKGZ1bGxzY3JlZW5FbGVtZW50ID09IGVsZW1lbnQpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIG5vZGUgaXMgbm90IGRpc2FibGVkLlxuICpcbiAqIElFOCBjYW4gcmV0dXJuIGZhbHNlIHBvc2l0aXZlcywgc2VlIHtAbGluayBtYXRjaGVzfS5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9mb3Jtcy5odG1sI2NvbmNlcHQtZmUtZGlzYWJsZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRW5hYmxlZChlbGVtZW50KSB7XG4gIHJldHVybiAhKGVsZW1lbnQuZGlzYWJsZWQgfHwgbWF0Y2hlcyhlbGVtZW50LCAnOmRpc2FibGVkJykpO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCAqIGFzIGRvbSBmcm9tICcuL2RvbSc7XG5pbXBvcnQge1xuICBnZXRBbXBkb2MsXG4gIGdldEV4aXN0aW5nU2VydmljZUZvckRvY0luRW1iZWRTY29wZSxcbiAgZ2V0U2VydmljZSxcbiAgZ2V0U2VydmljZVByb21pc2UsXG4gIGdldFNlcnZpY2VQcm9taXNlRm9yRG9jLFxuICBnZXRTZXJ2aWNlUHJvbWlzZU9yTnVsbCxcbiAgZ2V0U2VydmljZVByb21pc2VPck51bGxGb3JEb2MsXG4gIGdldFRvcFdpbmRvdyxcbn0gZnJvbSAnLi9zZXJ2aWNlJztcbmltcG9ydCB7dG9XaW59IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHt1c2VyfSBmcm9tICcuL2xvZyc7XG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2UgZm9yIGEgc2VydmljZSBmb3IgdGhlIGdpdmVuIGlkIGFuZCB3aW5kb3cuIEFsc28gZXhwZWN0cyBhblxuICogZWxlbWVudCB0aGF0IGhhcyB0aGUgYWN0dWFsIGltcGxlbWVudGF0aW9uLiBUaGUgcHJvbWlzZSByZXNvbHZlcyB3aGVuIHRoZVxuICogaW1wbGVtZW50YXRpb24gbG9hZGVkLiBVc2VycyBzaG91bGQgdHlwaWNhbGx5IHdyYXAgdGhpcyBhcyBhIHNwZWNpYWwgcHVycG9zZVxuICogZnVuY3Rpb24gKGUuZy4gU2VydmljZXMudmlld3BvcnRGb3JEb2MoLi4uKSkgZm9yIHR5cGUgc2FmZXR5IGFuZCBiZWNhdXNlIHRoZVxuICogZmFjdG9yeSBzaG91bGQgbm90IGJlIHBhc3NlZCBhcm91bmQuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IGlkIG9mIHRoZSBzZXJ2aWNlLlxuICogQHBhcmFtIHtzdHJpbmd9IGV4dGVuc2lvbiBOYW1lIG9mIHRoZSBjdXN0b20gZXh0ZW5zaW9uIHRoYXQgcHJvdmlkZXMgdGhlXG4gKiAgICAgaW1wbGVtZW50YXRpb24gb2YgdGhpcyBzZXJ2aWNlLlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2VsZW1lbnQgV2hldGhlciB0aGlzIHNlcnZpY2UgaXMgcHJvdmlkZWQgYnkgYW4gZWxlbWVudCxcbiAqICAgICBub3QgdGhlIGV4dGVuc2lvbi5cbiAqIEByZXR1cm4geyFQcm9taXNlPCo+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudFNlcnZpY2Uod2luLCBpZCwgZXh0ZW5zaW9uLCBvcHRfZWxlbWVudCkge1xuICByZXR1cm4gZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZSh3aW4sIGlkLCBleHRlbnNpb24sIG9wdF9lbGVtZW50KS50aGVuKFxuICAgICAgc2VydmljZSA9PiBhc3NlcnRTZXJ2aWNlKHNlcnZpY2UsIGlkLCBleHRlbnNpb24pKTtcbn1cblxuLyoqXG4gKiBTYW1lIGFzIGdldEVsZW1lbnRTZXJ2aWNlIGJ1dCBwcm9kdWNlcyBudWxsIGlmIHRoZSBnaXZlbiBlbGVtZW50IGlzIG5vdFxuICogYWN0dWFsbHkgYXZhaWxhYmxlIG9uIHRoZSBjdXJyZW50IHBhZ2UuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IGlkIG9mIHRoZSBzZXJ2aWNlLlxuICogQHBhcmFtIHtzdHJpbmd9IGV4dGVuc2lvbiBOYW1lIG9mIHRoZSBjdXN0b20gZXh0ZW5zaW9uIHRoYXQgcHJvdmlkZXMgdGhlXG4gKiAgICAgaW1wbGVtZW50YXRpb24gb2YgdGhpcyBzZXJ2aWNlLlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2VsZW1lbnQgV2hldGhlciB0aGlzIHNlcnZpY2UgaXMgcHJvdmlkZWQgYnkgYW5cbiAqICAgICBlbGVtZW50LCBub3QgdGhlIGV4dGVuc2lvbi5cbiAqIEByZXR1cm4geyFQcm9taXNlPD9PYmplY3Q+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZSh3aW4sIGlkLCBleHRlbnNpb24sIG9wdF9lbGVtZW50KSB7XG4gIGNvbnN0IHMgPSBnZXRTZXJ2aWNlUHJvbWlzZU9yTnVsbCh3aW4sIGlkKTtcbiAgaWYgKHMpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZTw/T2JqZWN0Pn0gKi8gKHMpO1xuICB9XG4gIHJldHVybiBnZXRFbGVtZW50U2VydmljZVByb21pc2VPck51bGwod2luLCBpZCwgZXh0ZW5zaW9uLCBvcHRfZWxlbWVudCk7XG59XG5cbi8qKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBlbGVtZW50TmFtZSBOYW1lIG9mIGFuIGV4dGVuZGVkIGN1c3RvbSBlbGVtZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGlzIGVsZW1lbnQgaXMgc2NoZWR1bGVkIHRvIGJlIGxvYWRlZC5cbiAqL1xuZnVuY3Rpb24gaXNFbGVtZW50U2NoZWR1bGVkKHdpbiwgZWxlbWVudE5hbWUpIHtcbiAgLy8gU2V0IGluIGN1c3RvbS1lbGVtZW50LmpzXG4gIGlmICghd2luLmFtcEV4dGVuZGVkRWxlbWVudHMpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuICEhd2luLmFtcEV4dGVuZGVkRWxlbWVudHNbZWxlbWVudE5hbWVdO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2UgZm9yIGEgc2VydmljZSBmb3IgdGhlIGdpdmVuIGlkIGFuZCB3aW5kb3cuIEFsc28gZXhwZWN0cyBhblxuICogZWxlbWVudCB0aGF0IGhhcyB0aGUgYWN0dWFsIGltcGxlbWVudGF0aW9uLiBUaGUgcHJvbWlzZSByZXNvbHZlcyB3aGVuIHRoZVxuICogaW1wbGVtZW50YXRpb24gbG9hZGVkLiBVc2VycyBzaG91bGQgdHlwaWNhbGx5IHdyYXAgdGhpcyBhcyBhIHNwZWNpYWwgcHVycG9zZVxuICogZnVuY3Rpb24gKGUuZy4gU2VydmljZXMudmlld3BvcnRGb3JEb2MoLi4uKSkgZm9yIHR5cGUgc2FmZXR5IGFuZCBiZWNhdXNlIHRoZVxuICogZmFjdG9yeSBzaG91bGQgbm90IGJlIHBhc3NlZCBhcm91bmQuXG4gKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBvZiB0aGUgc2VydmljZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBleHRlbnNpb24gTmFtZSBvZiB0aGUgY3VzdG9tIGV4dGVuc2lvbiB0aGF0IHByb3ZpZGVzIHRoZVxuICogICAgIGltcGxlbWVudGF0aW9uIG9mIHRoaXMgc2VydmljZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9lbGVtZW50IFdoZXRoZXIgdGhpcyBzZXJ2aWNlIGlzIHByb3ZpZGVkIGJ5IGFuIGVsZW1lbnQsXG4gKiAgICAgbm90IHRoZSBleHRlbnNpb24uXG4gKiBAcmV0dXJuIHshUHJvbWlzZTwqPn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnRTZXJ2aWNlRm9yRG9jKGVsZW1lbnRPckFtcERvYywgaWQsIGV4dGVuc2lvbixcbiAgb3B0X2VsZW1lbnQpIHtcbiAgcmV0dXJuIGdldEVsZW1lbnRTZXJ2aWNlSWZBdmFpbGFibGVGb3JEb2MoXG4gICAgICBlbGVtZW50T3JBbXBEb2MsIGlkLCBleHRlbnNpb24sIG9wdF9lbGVtZW50KVxuICAgICAgLnRoZW4oc2VydmljZSA9PiBhc3NlcnRTZXJ2aWNlKHNlcnZpY2UsIGlkLCBleHRlbnNpb24pKTtcbn1cblxuLyoqXG4gKiBTYW1lIGFzIGdldEVsZW1lbnRTZXJ2aWNlIGJ1dCBwcm9kdWNlcyBudWxsIGlmIHRoZSBnaXZlbiBlbGVtZW50IGlzIG5vdFxuICogYWN0dWFsbHkgYXZhaWxhYmxlIG9uIHRoZSBjdXJyZW50IHBhZ2UuXG4gKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBvZiB0aGUgc2VydmljZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBleHRlbnNpb24gTmFtZSBvZiB0aGUgY3VzdG9tIGV4dGVuc2lvbiB0aGF0IHByb3ZpZGVzIHRoZVxuICogICAgIGltcGxlbWVudGF0aW9uIG9mIHRoaXMgc2VydmljZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9lbGVtZW50IFdoZXRoZXIgdGhpcyBzZXJ2aWNlIGlzIHByb3ZpZGVkIGJ5IGFuXG4gKiAgICAgZWxlbWVudCwgbm90IHRoZSBleHRlbnNpb24uXG4gKiBAcmV0dXJuIHshUHJvbWlzZTw/T2JqZWN0Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnRTZXJ2aWNlSWZBdmFpbGFibGVGb3JEb2MoXG4gIGVsZW1lbnRPckFtcERvYywgaWQsIGV4dGVuc2lvbiwgb3B0X2VsZW1lbnQpIHtcbiAgY29uc3QgYW1wZG9jID0gZ2V0QW1wZG9jKGVsZW1lbnRPckFtcERvYyk7XG4gIGNvbnN0IHMgPSBnZXRTZXJ2aWNlUHJvbWlzZU9yTnVsbEZvckRvYyhlbGVtZW50T3JBbXBEb2MsIGlkKTtcbiAgaWYgKHMpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZTw/T2JqZWN0Pn0gKi8gKHMpO1xuICB9XG5cbiAgcmV0dXJuIGFtcGRvYy53aGVuQm9keUF2YWlsYWJsZSgpXG4gICAgICAudGhlbigoKSA9PiB3YWl0Rm9yRXh0ZW5zaW9uSWZQcmVzZW50KFxuICAgICAgICAgIGFtcGRvYy53aW4sIGV4dGVuc2lvbixcbiAgICAgICAgICBhbXBkb2MuZ2V0SGVhZE5vZGUoKSkpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIC8vIElmIHRoaXMgc2VydmljZSBpcyBwcm92aWRlZCBieSBhbiBlbGVtZW50LCB0aGVuIHdlIGNhbid0IGRlcGVuZCBvblxuICAgICAgICAvLyB0aGUgc2VydmljZSAodGhleSBtYXkgbm90IHVzZSB0aGUgZWxlbWVudCkuXG4gICAgICAgIGlmIChvcHRfZWxlbWVudCkge1xuICAgICAgICAgIHJldHVybiBnZXRTZXJ2aWNlUHJvbWlzZU9yTnVsbEZvckRvYyhlbGVtZW50T3JBbXBEb2MsIGlkKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc0VsZW1lbnRTY2hlZHVsZWQoYW1wZG9jLndpbiwgZXh0ZW5zaW9uKSkge1xuICAgICAgICAgIHJldHVybiBnZXRTZXJ2aWNlUHJvbWlzZUZvckRvYyhlbGVtZW50T3JBbXBEb2MsIGlkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0pO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIGZvciBzZXJ2aWNlIGZvciB0aGUgZ2l2ZW4gaWQgaW4gdGhlIGVtYmVkIHNjb3BlIG9mXG4gKiBhIGdpdmVuIG5vZGUsIGlmIGl0IGV4aXN0cy4gT3RoZXJ3aXNlLCBmYWxscyBiYWNrIHRvIGFtcGRvYyBzY29wZSBJRkZcbiAqIHRoZSBnaXZlbiBub2RlIGlzIGluIHRoZSB0b3AtbGV2ZWwgd2luZG93LlxuICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gZXh0ZW5zaW9uIE5hbWUgb2YgdGhlIGN1c3RvbSBlbGVtZW50IHRoYXQgcHJvdmlkZXNcbiAqICAgICB0aGUgaW1wbGVtZW50YXRpb24gb2YgdGhpcyBzZXJ2aWNlLlxuICogQHJldHVybiB7IVByb21pc2U8P09iamVjdD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlRm9yRG9jSW5FbWJlZFNjb3BlKFxuICBlbGVtZW50T3JBbXBEb2MsIGlkLCBleHRlbnNpb24pIHtcbiAgY29uc3QgcyA9IGdldEV4aXN0aW5nU2VydmljZUZvckRvY0luRW1iZWRTY29wZShlbGVtZW50T3JBbXBEb2MsIGlkKTtcbiAgaWYgKHMpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZTw/T2JqZWN0Pn0gKi8gKFByb21pc2UucmVzb2x2ZShzKSk7XG4gIH1cbiAgLy8gUmV0dXJuIGVtYmVkLXNjb3BlIGVsZW1lbnQgc2VydmljZSBwcm9taXNlIGlmIHNjaGVkdWxlZC5cbiAgaWYgKGVsZW1lbnRPckFtcERvYy5ub2RlVHlwZSkge1xuICAgIGNvbnN0IHdpbiA9IHRvV2luKGVsZW1lbnRPckFtcERvYy5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3KTtcbiAgICBjb25zdCB0b3BXaW4gPSBnZXRUb3BXaW5kb3cod2luKTtcbiAgICAvLyBJbiBlbWJlZHMsIGRvYy1zY29wZSBzZXJ2aWNlcyBhcmUgd2luZG93LXNjb3BlLiBCdXQgbWFrZSBzdXJlIHRvXG4gICAgLy8gb25seSBkbyB0aGlzIGZvciBlbWJlZHMgKG5vdCB0aGUgdG9wIHdpbmRvdyksIG90aGVyd2lzZSB3ZSdkIGdyYWJcbiAgICAvLyBhIHByb21pc2UgZnJvbSB0aGUgd3Jvbmcgc2VydmljZSBob2xkZXIgd2hpY2ggd291bGQgbmV2ZXIgcmVzb2x2ZS5cbiAgICBpZiAod2luICE9PSB0b3BXaW4pIHtcbiAgICAgIHJldHVybiBnZXRFbGVtZW50U2VydmljZVByb21pc2VPck51bGwod2luLCBpZCwgZXh0ZW5zaW9uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRmFsbGJhY2sgdG8gYW1wZG9jIElGRiB0aGUgZ2l2ZW4gbm9kZSBpcyBfbm90XyBGSUUuXG4gICAgICByZXR1cm4gZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZUZvckRvYyhlbGVtZW50T3JBbXBEb2MsIGlkLCBleHRlbnNpb24pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZTw/T2JqZWN0Pn0gKi8gKFByb21pc2UucmVzb2x2ZShudWxsKSk7XG59XG5cbi8qKlxuICogVGhyb3dzIHVzZXIgZXJyb3IgaWYgYHNlcnZpY2VgIGlzIG51bGwuXG4gKiBAcGFyYW0ge09iamVjdH0gc2VydmljZVxuICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gKiBAcGFyYW0ge3N0cmluZ30gZXh0ZW5zaW9uXG4gKiBAcmV0dXJuIHshT2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gYXNzZXJ0U2VydmljZShzZXJ2aWNlLCBpZCwgZXh0ZW5zaW9uKSB7XG4gIHJldHVybiAvKiogQHR5cGUgeyFPYmplY3R9ICovICh1c2VyKCkuYXNzZXJ0KHNlcnZpY2UsXG4gICAgICAnU2VydmljZSAlcyB3YXMgcmVxdWVzdGVkIHRvIGJlIHByb3ZpZGVkIHRocm91Z2ggJXMsICcgK1xuICAgICAgJ2J1dCAlcyBpcyBub3QgbG9hZGVkIGluIHRoZSBjdXJyZW50IHBhZ2UuIFRvIGZpeCB0aGlzICcgK1xuICAgICAgJ3Byb2JsZW0gbG9hZCB0aGUgSmF2YVNjcmlwdCBmaWxlIGZvciAlcyBpbiB0aGlzIHBhZ2UuJyxcbiAgICAgIGlkLCBleHRlbnNpb24sIGV4dGVuc2lvbiwgZXh0ZW5zaW9uKSk7XG59XG5cbi8qKlxuICogR2V0IGxpc3Qgb2YgYWxsIHRoZSBleHRlbnNpb24gSlMgZmlsZXNcbiAqIEBwYXJhbSB7SFRNTEhlYWRFbGVtZW50fEVsZW1lbnR8U2hhZG93Um9vdH0gaGVhZFxuICogQHJldHVybiB7IUFycmF5PHN0cmluZz59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbnNpb25TY3JpcHRzSW5Ob2RlKGhlYWQpIHtcbiAgLy8gYW1wZG9jLmdldEhlYWROb2RlKCkgY2FuIHJldHVybiBudWxsXG4gIGlmICghaGVhZCkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBjb25zdCBzY3JpcHRzID0gW107XG4gIGNvbnN0IGxpc3QgPSBoZWFkLnF1ZXJ5U2VsZWN0b3JBbGwoJ3NjcmlwdFtjdXN0b20tZWxlbWVudF0nKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgc2NyaXB0cy5wdXNoKGxpc3RbaV0uZ2V0QXR0cmlidXRlKCdjdXN0b20tZWxlbWVudCcpKTtcbiAgfVxuICByZXR1cm4gc2NyaXB0cztcbn1cblxuLyoqXG4gKiBXYWl0cyBmb3IgYm9keSB0byBiZSBwcmVzZW50IHRoZW4gdmVyaWZpZXMgdGhhdCBhbiBleHRlbnNpb24gc2NyaXB0IGlzXG4gKiBwcmVzZW50IGluIGhlYWQgZm9yIGluc3RhbGxhdGlvbi5cbiAqIEBwYXJhbSB7IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGFtcGRvY1xuICogQHBhcmFtIHtzdHJpbmd9IGV4dGVuc2lvbklkXG4gKiBAcmV0dXJuIHshUHJvbWlzZTxib29sZWFuPn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRXh0ZW5zaW9uU2NyaXB0SW5Ob2RlKGFtcGRvYywgZXh0ZW5zaW9uSWQpIHtcbiAgcmV0dXJuIGFtcGRvYy53aGVuQm9keUF2YWlsYWJsZSgpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIHJldHVybiBleHRlbnNpb25TY3JpcHRJbk5vZGUoXG4gICAgICAgICAgICBhbXBkb2MuZ2V0SGVhZE5vZGUoKSwgZXh0ZW5zaW9uSWQpO1xuICAgICAgfSk7XG59XG5cbi8qKlxuICogVmVyaWZpZXMgdGhhdCBhbiBleHRlbnNpb24gc2NyaXB0IGlzIHByZXNlbnQgaW4gaGVhZCBmb3JcbiAqIGluc3RhbGxhdGlvbi5cbiAqIEBwYXJhbSB7SFRNTEhlYWRFbGVtZW50fEVsZW1lbnR8U2hhZG93Um9vdH0gaGVhZFxuICogQHBhcmFtIHtzdHJpbmd9IGV4dGVuc2lvbklkXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBleHRlbnNpb25TY3JpcHRJbk5vZGUoaGVhZCwgZXh0ZW5zaW9uSWQpIHtcbiAgcmV0dXJuIGV4dGVuc2lvblNjcmlwdHNJbk5vZGUoaGVhZCkuaW5jbHVkZXMoZXh0ZW5zaW9uSWQpO1xufVxuXG4vKipcbiAqIFdhaXRzIGZvciBhbiBleHRlbnNpb24gaWYgaXRzIHNjcmlwdCBpcyBwcmVzZW50XG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IGV4dGVuc2lvblxuICogQHBhcmFtIHtIVE1MSGVhZEVsZW1lbnR8RWxlbWVudHxTaGFkb3dSb290fSBoZWFkXG4gKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHdhaXRGb3JFeHRlbnNpb25JZlByZXNlbnQod2luLCBleHRlbnNpb24sIGhlYWQpIHtcbiAgLyoqXG4gICAqIElmIHRoZXJlIGlzIGFuIGV4dGVuc2lvbiBzY3JpcHQgd2FpdCBmb3IgaXQgdG8gbG9hZCBiZWZvcmUgdHJ5aW5nXG4gICAqIHRvIGdldCB0aGUgc2VydmljZS4gUHJldmVudHMgYSByYWNlIGNvbmRpdGlvbiB3aGVuIGV2ZXJ5dGhpbmcgYnV0XG4gICAqIHRoZSBleHRlbnNpb25zIGlzIGluIGNhY2hlLiBJZiB0aGVyZSBpcyBubyBzY3JpcHQgdGhlbiBpdCdzIGVpdGhlclxuICAgKiBub3QgcHJlc2VudCwgb3IgdGhlIHNlcnZpY2Ugd2FzIGRlZmluZWQgYnkgYSB0ZXN0LiBJbiB0aG9zZSBjYXNlc1xuICAgKiB3ZSBkb24ndCB3YWl0IGFyb3VuZCBmb3IgYW4gZXh0ZW5zaW9uIHRoYXQgZG9lcyBub3QgZXhpc3QuXG4gICAqL1xuXG4gIC8vIFRPRE8oanBldHRpdHQpIGludmVzdGlnYXRlIHJlZ2lzdGVyRXh0ZW5zaW9uIHRvIHNob3J0IGNpcmN1aXRcbiAgLy8gdGhlIGRvbSBjYWxsIGluIGV4dGVuc2lvblNjcmlwdHNJbk5vZGUoKVxuICBpZiAoIWV4dGVuc2lvblNjcmlwdEluTm9kZShoZWFkLCBleHRlbnNpb24pKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9XG5cbiAgY29uc3QgZXh0ZW5zaW9ucyA9IGdldFNlcnZpY2Uod2luLCAnZXh0ZW5zaW9ucycpO1xuICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZTw/T2JqZWN0Pn0gKi8gKFxuICAgIGV4dGVuc2lvbnMud2FpdEZvckV4dGVuc2lvbih3aW4sIGV4dGVuc2lvbikpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHByb21pc2UgZm9yIHNlcnZpY2Ugd2l0aCBgaWRgIG9uIHRoZSBnaXZlbiB3aW5kb3cgaWYgYXZhaWxhYmxlLlxuICogT3RoZXJ3aXNlLCByZXNvbHZlcyB3aXRoIG51bGwgKHNlcnZpY2Ugd2FzIG5vdCByZWdpc3RlcmVkKS5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBleHRlbnNpb25cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9lbGVtZW50XG4gKiBAcmV0dXJuIHshUHJvbWlzZTxPYmplY3Q+fVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZ2V0RWxlbWVudFNlcnZpY2VQcm9taXNlT3JOdWxsKHdpbiwgaWQsIGV4dGVuc2lvbiwgb3B0X2VsZW1lbnQpIHtcbiAgcmV0dXJuIGRvbS53YWl0Rm9yQm9keVByb21pc2Uod2luLmRvY3VtZW50KVxuICAgICAgLnRoZW4oKCkgPT4gd2FpdEZvckV4dGVuc2lvbklmUHJlc2VudCh3aW4sIGV4dGVuc2lvbiwgd2luLmRvY3VtZW50LmhlYWQpKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAvLyBJZiB0aGlzIHNlcnZpY2UgaXMgcHJvdmlkZWQgYnkgYW4gZWxlbWVudCwgdGhlbiB3ZSBjYW4ndCBkZXBlbmQgb25cbiAgICAgICAgLy8gdGhlIHNlcnZpY2UgKHRoZXkgbWF5IG5vdCB1c2UgdGhlIGVsZW1lbnQpLlxuICAgICAgICBpZiAob3B0X2VsZW1lbnQpIHtcbiAgICAgICAgICByZXR1cm4gZ2V0U2VydmljZVByb21pc2VPck51bGwod2luLCBpZCk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNFbGVtZW50U2NoZWR1bGVkKHdpbiwgZXh0ZW5zaW9uKSkge1xuICAgICAgICAgIHJldHVybiBnZXRTZXJ2aWNlUHJvbWlzZSh3aW4sIGlkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0pO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cblxuaW1wb3J0IHtBbXBFdmVudHN9IGZyb20gJy4vYW1wLWV2ZW50cyc7XG5pbXBvcnQge1NlcnZpY2VzfSBmcm9tICcuL3NlcnZpY2VzJztcbmltcG9ydCB7XG4gIFVTRVJfRVJST1JfU0VOVElORUwsXG4gIGRldixcbiAgZHVwbGljYXRlRXJyb3JJZk5lY2Vzc2FyeSxcbiAgaXNVc2VyRXJyb3JFbWJlZCxcbiAgaXNVc2VyRXJyb3JNZXNzYWdlLFxufSBmcm9tICcuL2xvZyc7XG5pbXBvcnQge2V4cGVyaW1lbnRUb2dnbGVzT3JOdWxsLCBnZXRCaW5hcnlUeXBlLCBpc0NhbmFyeX0gZnJvbSAnLi9leHBlcmltZW50cyc7XG5pbXBvcnQge2V4cG9uZW50aWFsQmFja29mZn0gZnJvbSAnLi9leHBvbmVudGlhbC1iYWNrb2ZmJztcbmltcG9ydCB7Z2V0TW9kZX0gZnJvbSAnLi9tb2RlJztcbmltcG9ydCB7aXNFeHBlcmltZW50T259IGZyb20gJy4vZXhwZXJpbWVudHMnO1xuaW1wb3J0IHtcbiAgaXNMb2FkRXJyb3JNZXNzYWdlLFxufSBmcm9tICcuL2V2ZW50LWhlbHBlcic7XG5pbXBvcnQge2lzUHJveHlPcmlnaW59IGZyb20gJy4vdXJsJztcbmltcG9ydCB7bWFrZUJvZHlWaXNpYmxlfSBmcm9tICcuL3N0eWxlLWluc3RhbGxlcic7XG5pbXBvcnQge3N0YXJ0c1dpdGh9IGZyb20gJy4vc3RyaW5nJztcbmltcG9ydCB7dHJpZ2dlckFuYWx5dGljc0V2ZW50fSBmcm9tICcuL2FuYWx5dGljcyc7XG5pbXBvcnQge3VybHN9IGZyb20gJy4vY29uZmlnJztcblxuLyoqXG4gKiBAY29uc3Qge3N0cmluZ31cbiAqL1xuY29uc3QgQ0FOQ0VMTEVEID0gJ0NBTkNFTExFRCc7XG5cbi8qKlxuICogQGNvbnN0IHtzdHJpbmd9XG4gKi9cbmNvbnN0IEJMT0NLX0JZX0NPTlNFTlQgPSAnQkxPQ0tfQllfQ09OU0VOVCc7XG5cblxuLyoqXG4gKiBUaGUgdGhyZXNob2xkIGZvciBlcnJvcnMgdGhyb3R0bGVkIGJlY2F1c2Ugbm90aGluZyBjYW4gYmUgZG9uZSBhYm91dFxuICogdGhlbSwgYnV0IHdlJ2Qgc3RpbGwgbGlrZSB0byByZXBvcnQgdGhlIHJvdWdoIG51bWJlci5cbiAqIEBjb25zdCB7bnVtYmVyfVxuICovXG5jb25zdCBOT05fQUNUSU9OQUJMRV9FUlJPUl9USFJPVFRMRV9USFJFU0hPTEQgPSAwLjAwMTtcblxuLyoqXG4gKiBUaGUgdGhyZXNob2xkIGZvciBlcnJvcnMgdGhyb3R0bGVkIGJlY2F1c2Ugbm90aGluZyBjYW4gYmUgZG9uZSBhYm91dFxuICogdGhlbSwgYnV0IHdlJ2Qgc3RpbGwgbGlrZSB0byByZXBvcnQgdGhlIHJvdWdoIG51bWJlci5cbiAqIEBjb25zdCB7bnVtYmVyfVxuICovXG5jb25zdCBVU0VSX0VSUk9SX1RIUk9UVExFX1RIUkVTSE9MRCA9IDAuMTtcblxuXG4vKipcbiAqIENvbGxlY3RzIGVycm9yIG1lc3NhZ2VzLCBzbyB0aGV5IGNhbiBiZSBpbmNsdWRlZCBpbiBzdWJzZXF1ZW50IHJlcG9ydHMuXG4gKiBUaGF0IGFsbG93cyBpZGVudGlmeWluZyBlcnJvcnMgdGhhdCBtaWdodCBiZSBjYXVzZWQgYnkgcHJldmlvdXMgZXJyb3JzLlxuICovXG5sZXQgYWNjdW11bGF0ZWRFcnJvck1lc3NhZ2VzID0gc2VsZi5BTVBFcnJvcnMgfHwgW107XG4vLyBVc2UgYSB0cnVlIGdsb2JhbCwgdG8gYXZvaWQgbXVsdGktbW9kdWxlIGluY2x1c2lvbiBpc3N1ZXMuXG5zZWxmLkFNUEVycm9ycyA9IGFjY3VtdWxhdGVkRXJyb3JNZXNzYWdlcztcblxuLyoqXG4gKiBQdXNoZXMgZWxlbWVudCBpbnRvIGFycmF5LCBrZWVwaW5nIGF0IG1vc3QgdGhlIG1vc3QgcmVjZW50IGxpbWl0IGVsZW1lbnRzXG4gKlxuICogQHBhcmFtIHshQXJyYXk8VD59IGFycmF5XG4gKiBAcGFyYW0ge1R9IGVsZW1lbnRcbiAqIEBwYXJhbSB7bnVtYmVyfSBsaW1pdFxuICogQHRlbXBsYXRlIFRcbiAqL1xuZnVuY3Rpb24gcHVzaExpbWl0KGFycmF5LCBlbGVtZW50LCBsaW1pdCkge1xuICBpZiAoYXJyYXkubGVuZ3RoID49IGxpbWl0KSB7XG4gICAgYXJyYXkuc3BsaWNlKDAsIGFycmF5Lmxlbmd0aCAtIGxpbWl0ICsgMSk7XG4gIH1cbiAgYXJyYXkucHVzaChlbGVtZW50KTtcbn1cblxuLyoqXG4gKiBBIHdyYXBwZXIgYXJvdW5kIG91ciBleHBvbmVudGlhbEJhY2tvZmYsIHRvIGxhenkgaW5pdGlhbGl6ZSBpdCB0byBhdm9pZCBhblxuICogdW4tRENFJ2FibGUgc2lkZS1lZmZlY3QuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IHdvcmsgdGhlIGZ1bmN0aW9uIHRvIGV4ZWN1dGUgYWZ0ZXIgYmFja29mZlxuICogQHJldHVybiB7bnVtYmVyfSB0aGUgc2V0VGltZW91dCBpZFxuICovXG5sZXQgcmVwb3J0aW5nQmFja29mZiA9IGZ1bmN0aW9uKHdvcmspIHtcbiAgLy8gU2V0IHJlcG9ydGluZ0JhY2tvZmYgYXMgdGhlIGxhenktY3JlYXRlZCBmdW5jdGlvbi4gSlMgVm9vb2Rvb29vLlxuICByZXBvcnRpbmdCYWNrb2ZmID0gZXhwb25lbnRpYWxCYWNrb2ZmKDEuNSk7XG4gIHJldHVybiByZXBvcnRpbmdCYWNrb2ZmKHdvcmspO1xufTtcblxuLyoqXG4gKiBBdHRlbXB0cyB0byBzdHJpbmdpZnkgYSB2YWx1ZSwgZmFsbGluZyBiYWNrIHRvIFN0cmluZy5cbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gdHJ5SnNvblN0cmluZ2lmeSh2YWx1ZSkge1xuICB0cnkge1xuICAgIC8vIENhc3QgaXMgZmluZSwgYmVjYXVzZSB3ZSByZWFsbHkgZG9uJ3QgY2FyZSBoZXJlLiBKdXN0IHRyeWluZy5cbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoLyoqIEB0eXBlIHshSnNvbk9iamVjdH0gKi8gKHZhbHVlKSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gU3RyaW5nKHZhbHVlKTtcbiAgfVxufVxuXG4vKipcbiAqIFRoZSB0cnVlIEpTIGVuZ2luZSwgYXMgZGV0ZWN0ZWQgYnkgaW5zcGVjdGluZyBhbiBFcnJvciBzdGFjay4gVGhpcyBzaG91bGQgYmVcbiAqIHVzZWQgd2l0aCB0aGUgdXNlckFnZW50IHRvIHRlbGwgZGVmaW5pdGVseS4gSS5lLiwgQ2hyb21lIG9uIGlPUyBpcyByZWFsbHkgYVxuICogU2FmYXJpIEpTIGVuZ2luZS5cbiAqL1xubGV0IGRldGVjdGVkSnNFbmdpbmU7XG5cbi8qKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7Kn0gZXJyb3JcbiAqIEBwYXJhbSB7IUVsZW1lbnQ9fSBvcHRfYXNzb2NpYXRlZEVsZW1lbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlcG9ydEVycm9yRm9yV2luKHdpbiwgZXJyb3IsIG9wdF9hc3NvY2lhdGVkRWxlbWVudCkge1xuICByZXBvcnRFcnJvcihlcnJvciwgb3B0X2Fzc29jaWF0ZWRFbGVtZW50KTtcbiAgaWYgKGVycm9yICYmICEhd2luICYmIGlzVXNlckVycm9yTWVzc2FnZShlcnJvci5tZXNzYWdlKVxuICAgICAgJiYgIWlzVXNlckVycm9yRW1iZWQoZXJyb3IubWVzc2FnZSkpIHtcbiAgICByZXBvcnRFcnJvclRvQW5hbHl0aWNzKC8qKiBAdHlwZSB7IUVycm9yfSAqLyhlcnJvciksIHdpbik7XG4gIH1cbn1cblxuLyoqXG4gKiBSZXBvcnRzIGFuIGVycm9yLiBJZiB0aGUgZXJyb3IgaGFzIGFuIFwiYXNzb2NpYXRlZEVsZW1lbnRcIiBwcm9wZXJ0eVxuICogdGhlIGVsZW1lbnQgaXMgbWFya2VkIHdpdGggdGhlIGBpLWFtcGh0bWwtZWxlbWVudC1lcnJvcmAgYW5kIGRpc3BsYXlzXG4gKiB0aGUgbWVzc2FnZSBpdHNlbGYuIFRoZSBtZXNzYWdlIGlzIGFsd2F5cyBzZW5kIHRvIHRoZSBjb25zb2xlLlxuICogSWYgdGhlIGVycm9yIGhhcyBhIFwibWVzc2FnZUFycmF5XCIgcHJvcGVydHksIHRoYXQgYXJyYXkgaXMgbG9nZ2VkLlxuICogVGhpcyB3YXkgb25lIGdldHMgdGhlIG5hdGl2ZSBmaWRlbGl0eSBvZiB0aGUgY29uc29sZSBmb3IgdGhpbmdzIGxpa2VcbiAqIGVsZW1lbnRzIGluc3RlYWQgb2Ygc3RyaW5naWZpY2F0aW9uLlxuICogQHBhcmFtIHsqfSBlcnJvclxuICogQHBhcmFtIHshRWxlbWVudD19IG9wdF9hc3NvY2lhdGVkRWxlbWVudFxuICogQHJldHVybiB7IUVycm9yfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVwb3J0RXJyb3IoZXJyb3IsIG9wdF9hc3NvY2lhdGVkRWxlbWVudCkge1xuICB0cnkge1xuICAgIC8vIENvbnZlcnQgZXJyb3IgdG8gdGhlIGV4cGVjdGVkIHR5cGUuXG4gICAgbGV0IGlzVmFsaWRFcnJvcjtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvci5tZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZXJyb3IgPSBkdXBsaWNhdGVFcnJvcklmTmVjZXNzYXJ5KC8qKiBAdHlwZSB7IUVycm9yfSAqLyhlcnJvcikpO1xuICAgICAgICBpc1ZhbGlkRXJyb3IgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgb3JpZ0Vycm9yID0gZXJyb3I7XG4gICAgICAgIGVycm9yID0gbmV3IEVycm9yKHRyeUpzb25TdHJpbmdpZnkob3JpZ0Vycm9yKSk7XG4gICAgICAgIGVycm9yLm9yaWdFcnJvciA9IG9yaWdFcnJvcjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoJ1Vua25vd24gZXJyb3InKTtcbiAgICB9XG4gICAgLy8gUmVwb3J0IGlmIGVycm9yIGlzIG5vdCBhbiBleHBlY3RlZCB0eXBlLlxuICAgIGlmICghaXNWYWxpZEVycm9yICYmIGdldE1vZGUoKS5sb2NhbERldiAmJiAhZ2V0TW9kZSgpLnRlc3QpIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnN0IHJldGhyb3cgPSBuZXcgRXJyb3IoXG4gICAgICAgICAgICAnX3JlcG9ydGVkXyBFcnJvciByZXBvcnRlZCBpbmNvcnJlY3RseTogJyArIGVycm9yKTtcbiAgICAgICAgdGhyb3cgcmV0aHJvdztcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChlcnJvci5yZXBvcnRlZCkge1xuICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7IUVycm9yfSAqLyAoZXJyb3IpO1xuICAgIH1cbiAgICBlcnJvci5yZXBvcnRlZCA9IHRydWU7XG5cbiAgICAvLyBVcGRhdGUgZWxlbWVudC5cbiAgICBjb25zdCBlbGVtZW50ID0gb3B0X2Fzc29jaWF0ZWRFbGVtZW50IHx8IGVycm9yLmFzc29jaWF0ZWRFbGVtZW50O1xuICAgIGlmIChlbGVtZW50ICYmIGVsZW1lbnQuY2xhc3NMaXN0KSB7XG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2ktYW1waHRtbC1lcnJvcicpO1xuICAgICAgaWYgKGdldE1vZGUoKS5kZXZlbG9wbWVudCkge1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2ktYW1waHRtbC1lbGVtZW50LWVycm9yJyk7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdlcnJvci1tZXNzYWdlJywgZXJyb3IubWVzc2FnZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmVwb3J0IHRvIGNvbnNvbGUuXG4gICAgaWYgKHNlbGYuY29uc29sZSkge1xuICAgICAgY29uc3Qgb3V0cHV0ID0gKGNvbnNvbGUuZXJyb3IgfHwgY29uc29sZS5sb2cpO1xuICAgICAgaWYgKGVycm9yLm1lc3NhZ2VBcnJheSkge1xuICAgICAgICBvdXRwdXQuYXBwbHkoY29uc29sZSwgZXJyb3IubWVzc2FnZUFycmF5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgICAgb3V0cHV0LmNhbGwoY29uc29sZSwgZXJyb3IubWVzc2FnZSwgZWxlbWVudCk7XG4gICAgICAgIH0gZWxzZSBpZiAoIWdldE1vZGUoKS5taW5pZmllZCkge1xuICAgICAgICAgIG91dHB1dC5jYWxsKGNvbnNvbGUsIGVycm9yLnN0YWNrKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvdXRwdXQuY2FsbChjb25zb2xlLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LmRpc3BhdGNoQ3VzdG9tRXZlbnRGb3JUZXN0aW5nKSB7XG4gICAgICBlbGVtZW50LmRpc3BhdGNoQ3VzdG9tRXZlbnRGb3JUZXN0aW5nKEFtcEV2ZW50cy5FUlJPUiwgZXJyb3IubWVzc2FnZSk7XG4gICAgfVxuXG4gICAgLy8gJ2NhbGwnIHRvIG1ha2UgbGludGVyIGhhcHB5LiBBbmQgLmNhbGwgdG8gbWFrZSBjb21waWxlciBoYXBweVxuICAgIC8vIHRoYXQgZXhwZWN0cyBzb21lIEB0aGlzLlxuICAgIHJlcG9ydEVycm9yVG9TZXJ2ZXJbJ2NhbGwnXSh1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsXG4gICAgICAgIHVuZGVmaW5lZCwgZXJyb3IpO1xuICB9IGNhdGNoIChlcnJvclJlcG9ydGluZ0Vycm9yKSB7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIHRocm93IGVycm9yUmVwb3J0aW5nRXJyb3I7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIC8qKiBAdHlwZSB7IUVycm9yfSAqLyAoZXJyb3IpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gZXJyb3IgZm9yIGEgY2FuY2VsbGF0aW9uIG9mIGEgcHJvbWlzZS5cbiAqIEByZXR1cm4geyFFcnJvcn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbmNlbGxhdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBFcnJvcihDQU5DRUxMRUQpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7Kn0gZXJyb3JPck1lc3NhZ2VcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0NhbmNlbGxhdGlvbihlcnJvck9yTWVzc2FnZSkge1xuICBpZiAoIWVycm9yT3JNZXNzYWdlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICh0eXBlb2YgZXJyb3JPck1lc3NhZ2UgPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gc3RhcnRzV2l0aChlcnJvck9yTWVzc2FnZSwgQ0FOQ0VMTEVEKTtcbiAgfVxuICBpZiAodHlwZW9mIGVycm9yT3JNZXNzYWdlLm1lc3NhZ2UgPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gc3RhcnRzV2l0aChlcnJvck9yTWVzc2FnZS5tZXNzYWdlLCBDQU5DRUxMRUQpO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFuIGVycm9yIGZvciBjb21wb25lbnQgYmxvY2tlZCBieSBjb25zZW50XG4gKiBAcmV0dXJuIHshRXJyb3J9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBibG9ja2VkQnlDb25zZW50RXJyb3IoKSB7XG4gIHJldHVybiBuZXcgRXJyb3IoQkxPQ0tfQllfQ09OU0VOVCk7XG59XG5cbi8qKlxuICogQHBhcmFtIHsqfSBlcnJvck9yTWVzc2FnZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQmxvY2tlZEJ5Q29uc2VudChlcnJvck9yTWVzc2FnZSkge1xuICBpZiAoIWVycm9yT3JNZXNzYWdlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICh0eXBlb2YgZXJyb3JPck1lc3NhZ2UgPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gc3RhcnRzV2l0aChlcnJvck9yTWVzc2FnZSwgQkxPQ0tfQllfQ09OU0VOVCk7XG4gIH1cbiAgaWYgKHR5cGVvZiBlcnJvck9yTWVzc2FnZS5tZXNzYWdlID09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHN0YXJ0c1dpdGgoZXJyb3JPck1lc3NhZ2UubWVzc2FnZSwgQkxPQ0tfQllfQ09OU0VOVCk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5cbi8qKlxuICogSW5zdGFsbCBoYW5kbGluZyBvZiBnbG9iYWwgdW5oYW5kbGVkIGV4Y2VwdGlvbnMuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbEVycm9yUmVwb3J0aW5nKHdpbikge1xuICB3aW4ub25lcnJvciA9IC8qKiBAdHlwZSB7IUZ1bmN0aW9ufSAqLyAocmVwb3J0RXJyb3JUb1NlcnZlcik7XG4gIHdpbi5hZGRFdmVudExpc3RlbmVyKCd1bmhhbmRsZWRyZWplY3Rpb24nLCBldmVudCA9PiB7XG4gICAgaWYgKGV2ZW50LnJlYXNvbiAmJlxuICAgICAgKGV2ZW50LnJlYXNvbi5tZXNzYWdlID09PSBDQU5DRUxMRUQgfHxcbiAgICAgIGV2ZW50LnJlYXNvbi5tZXNzYWdlID09PSBCTE9DS19CWV9DT05TRU5UKSkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmVwb3J0RXJyb3IoZXZlbnQucmVhc29uIHx8IG5ldyBFcnJvcigncmVqZWN0ZWQgcHJvbWlzZSAnICsgZXZlbnQpKTtcbiAgfSk7XG59XG5cbi8qKlxuICogU2lnbmF0dXJlIGRlc2lnbmVkLCBzbyBpdCBjYW4gd29yayB3aXRoIHdpbmRvdy5vbmVycm9yXG4gKiBAcGFyYW0ge3N0cmluZ3x1bmRlZmluZWR9IG1lc3NhZ2VcbiAqIEBwYXJhbSB7c3RyaW5nfHVuZGVmaW5lZH0gZmlsZW5hbWVcbiAqIEBwYXJhbSB7c3RyaW5nfHVuZGVmaW5lZH0gbGluZVxuICogQHBhcmFtIHtzdHJpbmd8dW5kZWZpbmVkfSBjb2xcbiAqIEBwYXJhbSB7Knx1bmRlZmluZWR9IGVycm9yXG4gKiBAdGhpcyB7IVdpbmRvd3x1bmRlZmluZWR9XG4gKi9cbmZ1bmN0aW9uIHJlcG9ydEVycm9yVG9TZXJ2ZXIobWVzc2FnZSwgZmlsZW5hbWUsIGxpbmUsIGNvbCwgZXJyb3IpIHtcbiAgLy8gTWFrZSBhbiBhdHRlbXB0IHRvIHVuaGlkZSB0aGUgYm9keS5cbiAgaWYgKHRoaXMgJiYgdGhpcy5kb2N1bWVudCkge1xuICAgIG1ha2VCb2R5VmlzaWJsZSh0aGlzLmRvY3VtZW50KTtcbiAgfVxuICBpZiAoZ2V0TW9kZSgpLmxvY2FsRGV2IHx8IGdldE1vZGUoKS5kZXZlbG9wbWVudCB8fCBnZXRNb2RlKCkudGVzdCkge1xuICAgIHJldHVybjtcbiAgfVxuICBsZXQgaGFzTm9uQW1wSnMgPSBmYWxzZTtcbiAgdHJ5IHtcbiAgICBoYXNOb25BbXBKcyA9IGRldGVjdE5vbkFtcEpzKHNlbGYpO1xuICB9IGNhdGNoIChpZ25vcmUpIHtcbiAgICAvLyBJZ25vcmUgZXJyb3JzIGR1cmluZyBlcnJvciByZXBvcnQgZ2VuZXJhdGlvbi5cbiAgfVxuICBpZiAoaGFzTm9uQW1wSnMgJiYgTWF0aC5yYW5kb20oKSA+IDAuMDEpIHtcbiAgICAvLyBPbmx5IHJlcG9ydCAxJSBvZiBlcnJvcnMgb24gcGFnZXMgd2l0aCBub24tQU1QIEpTLlxuICAgIC8vIFRoZXNlIGVycm9ycyBjYW4gYWxtb3N0IG5ldmVyIGJlIGFjdGVkIHVwb24sIGJ1dCBzcGlrZXMgc3VjaCBhc1xuICAgIC8vIGR1ZSB0byBidWdneSBicm93c2VyIGV4dGVuc2lvbnMgbWF5IGJlIGhlbHBmdWwgdG8gbm90aWZ5IGF1dGhvcnMuXG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGRhdGEgPSBnZXRFcnJvclJlcG9ydERhdGEobWVzc2FnZSwgZmlsZW5hbWUsIGxpbmUsIGNvbCwgZXJyb3IsXG4gICAgICBoYXNOb25BbXBKcyk7XG4gIGlmIChkYXRhKSB7XG4gICAgLy8gUmVwb3J0IHRoZSBlcnJvciB0byB2aWV3ZXIgaWYgaXQgaGFzIHRoZSBjYXBhYmlsaXR5LiBUaGUgZGF0YSBwYXNzZWRcbiAgICAvLyB0byB0aGUgdmlld2VyIGlzIGV4YWN0bHkgdGhlIHNhbWUgYXMgdGhlIGRhdGEgcGFzc2VkIHRvIHRoZSBzZXJ2ZXJcbiAgICAvLyBiZWxvdy5cbiAgICBtYXliZVJlcG9ydEVycm9yVG9WaWV3ZXIodGhpcywgZGF0YSk7XG4gICAgcmVwb3J0aW5nQmFja29mZigoKSA9PiB7XG4gICAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgIHhoci5vcGVuKCdQT1NUJywgdXJscy5lcnJvclJlcG9ydGluZywgdHJ1ZSk7XG4gICAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeShkYXRhKSk7XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBQYXNzZXMgdGhlIGdpdmVuIGVycm9yIGRhdGEgdG8gdGhlIHZpZXdlciBpZiB0aGUgZm9sbG93aW5nIGNyaXRlcmlhIGlzIG1ldDpcbiAqIC0gVGhlIHZpZXdlciBpcyBhIHRydXN0ZWQgdmlld2VyXG4gKiAtIFRoZSB2aWV3ZXIgaGFzIHRoZSBgZXJyb3JSZXBvcnRlcmAgY2FwYWJpbGl0eVxuICogLSBUaGUgQU1QIGRvYyBpcyBpbiBzaW5nbGUgZG9jIG1vZGVcbiAqIC0gVGhlIEFNUCBkb2MgaXMgb3B0ZWQtaW4gZm9yIGVycm9yIGludGVyY2VwdGlvbiAoYDxodG1sPmAgdGFnIGhhcyB0aGVcbiAqICAgYHJlcG9ydC1lcnJvcnMtdG8tdmlld2VyYCBhdHRyaWJ1dGUpXG4gKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7IUpzb25PYmplY3R9IGRhdGEgRGF0YSBmcm9tIGBnZXRFcnJvclJlcG9ydERhdGFgLlxuICogQHJldHVybiB7IVByb21pc2U8Ym9vbGVhbj59IGBQcm9taXNlPFRydWU+YCBpZiB0aGUgZXJyb3Igd2FzIHNlbnQgdG8gdGhlXG4gKiAgICAgdmlld2VyLCBgUHJvbWlzZTxGYWxzZT5gIG90aGVyd2lzZS5cbiAqIEB2aXNpYmxlRm9yVGVzdGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gbWF5YmVSZXBvcnRFcnJvclRvVmlld2VyKHdpbiwgZGF0YSkge1xuICBjb25zdCBhbXBkb2NTZXJ2aWNlID0gU2VydmljZXMuYW1wZG9jU2VydmljZUZvcih3aW4pO1xuICBpZiAoIWFtcGRvY1NlcnZpY2UuaXNTaW5nbGVEb2MoKSkge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZmFsc2UpO1xuICB9XG4gIGNvbnN0IGFtcGRvY1NpbmdsZSA9IGFtcGRvY1NlcnZpY2UuZ2V0QW1wRG9jKCk7XG4gIGNvbnN0IGh0bWxFbGVtZW50ID0gYW1wZG9jU2luZ2xlLmdldFJvb3ROb2RlKCkuZG9jdW1lbnRFbGVtZW50O1xuICBjb25zdCBkb2NPcHRlZEluID0gaHRtbEVsZW1lbnQuaGFzQXR0cmlidXRlKCdyZXBvcnQtZXJyb3JzLXRvLXZpZXdlcicpO1xuICBpZiAoIWRvY09wdGVkSW4pIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZhbHNlKTtcbiAgfVxuXG4gIGNvbnN0IHZpZXdlciA9IFNlcnZpY2VzLnZpZXdlckZvckRvYyhhbXBkb2NTaW5nbGUpO1xuICBpZiAoIXZpZXdlci5oYXNDYXBhYmlsaXR5KCdlcnJvclJlcG9ydGVyJykpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZhbHNlKTtcbiAgfVxuXG4gIHJldHVybiB2aWV3ZXIuaXNUcnVzdGVkVmlld2VyKCkudGhlbih2aWV3ZXJUcnVzdGVkID0+IHtcbiAgICBpZiAoIXZpZXdlclRydXN0ZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmlld2VyLnNlbmRNZXNzYWdlKCdlcnJvcicsIGRhdGEpO1xuICAgIHJldHVybiB0cnVlO1xuICB9KTtcbn1cblxuLyoqXG4gKiBTaWduYXR1cmUgZGVzaWduZWQsIHNvIGl0IGNhbiB3b3JrIHdpdGggd2luZG93Lm9uZXJyb3JcbiAqIEBwYXJhbSB7c3RyaW5nfHVuZGVmaW5lZH0gbWVzc2FnZVxuICogQHBhcmFtIHtzdHJpbmd8dW5kZWZpbmVkfSBmaWxlbmFtZVxuICogQHBhcmFtIHtzdHJpbmd8dW5kZWZpbmVkfSBsaW5lXG4gKiBAcGFyYW0ge3N0cmluZ3x1bmRlZmluZWR9IGNvbFxuICogQHBhcmFtIHsqfHVuZGVmaW5lZH0gZXJyb3JcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaGFzTm9uQW1wSnNcbiAqIEByZXR1cm4geyFKc29uT2JqZWN0fHVuZGVmaW5lZH0gVGhlIGRhdGEgdG8gcG9zdFxuICogdmlzaWJsZUZvclRlc3RpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEVycm9yUmVwb3J0RGF0YShtZXNzYWdlLCBmaWxlbmFtZSwgbGluZSwgY29sLCBlcnJvcixcbiAgaGFzTm9uQW1wSnMpIHtcbiAgbGV0IGV4cGVjdGVkID0gZmFsc2U7XG4gIGlmIChlcnJvcikge1xuICAgIGlmIChlcnJvci5tZXNzYWdlKSB7XG4gICAgICBtZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVGhpcyBzaG91bGQgbmV2ZXIgYmUgYSBzdHJpbmcsIGJ1dCBzb21ldGltZXMgaXQgaXMuXG4gICAgICBtZXNzYWdlID0gU3RyaW5nKGVycm9yKTtcbiAgICB9XG4gICAgLy8gQW4gXCJleHBlY3RlZFwiIGVycm9yIGlzIHN0aWxsIGFuIGVycm9yLCBpLmUuIHNvbWUgZmVhdHVyZXMgYXJlIGRpc2FibGVkXG4gICAgLy8gb3Igbm90IGZ1bmN0aW9uaW5nIGZ1bGx5IGJlY2F1c2Ugb2YgaXQuIEhvd2V2ZXIsIGl0J3MgYW4gZXhwZWN0ZWRcbiAgICAvLyBlcnJvci4gRS5nLiBhcyBpcyB0aGUgY2FzZSB3aXRoIHNvbWUgYnJvd3NlciBBUEkgbWlzc2luZyAoc3RvcmFnZSkuXG4gICAgLy8gVGh1cywgdGhlIGVycm9yIGNhbiBiZSBjbGFzc2lmaWVkIGRpZmZlcmVudGx5IGJ5IGxvZyBhZ2dyZWdhdG9ycy5cbiAgICAvLyBUaGUgbWFpbiBnb2FsIGlzIHRvIG1vbml0b3IgdGhhdCBhbiBcImV4cGVjdGVkXCIgZXJyb3IgZG9lc24ndCBkZXRlcmlvcmF0ZVxuICAgIC8vIG92ZXIgdGltZS4gSXQncyBpbXBvc3NpYmxlIHRvIGNvbXBsZXRlbHkgZWxpbWluYXRlIGl0LlxuICAgIGlmIChlcnJvci5leHBlY3RlZCkge1xuICAgICAgZXhwZWN0ZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuICBpZiAoIW1lc3NhZ2UpIHtcbiAgICBtZXNzYWdlID0gJ1Vua25vd24gZXJyb3InO1xuICB9XG4gIGlmICgvX3JlcG9ydGVkXy8udGVzdChtZXNzYWdlKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAobWVzc2FnZSA9PSBDQU5DRUxMRUQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBkZXRhY2hlZFdpbmRvdyA9ICEoc2VsZiAmJiBzZWxmLndpbmRvdyk7XG4gIGNvbnN0IHRocm90dGxlQmFzZSA9IE1hdGgucmFuZG9tKCk7XG5cbiAgLy8gV2UgdGhyb3R0bGUgbG9hZCBlcnJvcnMgYW5kIGdlbmVyaWMgXCJTY3JpcHQgZXJyb3IuXCIgZXJyb3JzXG4gIC8vIHRoYXQgaGF2ZSBubyBpbmZvcm1hdGlvbiBhbmQgdGh1cyBjYW5ub3QgYmUgYWN0ZWQgdXBvbi5cbiAgaWYgKGlzTG9hZEVycm9yTWVzc2FnZShtZXNzYWdlKSB8fFxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYW1wcHJvamVjdC9hbXBodG1sL2lzc3Vlcy83MzUzXG4gICAgLy8gZm9yIGNvbnRleHQuXG4gICAgbWVzc2FnZSA9PSAnU2NyaXB0IGVycm9yLicgfHxcbiAgICAvLyBXaW5kb3cgaGFzIGJlY29tZSBkZXRhY2hlZCwgcmVhbGx5IGFueXRoaW5nIGNhbiBoYXBwZW5cbiAgICAvLyBhdCB0aGlzIHBvaW50LlxuICAgIGRldGFjaGVkV2luZG93KSB7XG4gICAgZXhwZWN0ZWQgPSB0cnVlO1xuXG4gICAgaWYgKHRocm90dGxlQmFzZSA+IE5PTl9BQ1RJT05BQkxFX0VSUk9SX1RIUk9UVExFX1RIUkVTSE9MRCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGlzVXNlckVycm9yID0gaXNVc2VyRXJyb3JNZXNzYWdlKG1lc3NhZ2UpO1xuXG4gIC8vIE9ubHkgcmVwb3J0IGEgc3Vic2V0IG9mIHVzZXIgZXJyb3JzLlxuICBpZiAoaXNVc2VyRXJyb3IgJiYgdGhyb3R0bGVCYXNlID4gVVNFUl9FUlJPUl9USFJPVFRMRV9USFJFU0hPTEQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBUaGlzIGlzIHRoZSBBcHAgRW5naW5lIGFwcCBpblxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vYW1wcHJvamVjdC9lcnJvci10cmFja2VyXG4gIC8vIEl0IHN0b3JlcyBlcnJvciByZXBvcnRzIHZpYSBodHRwczovL2Nsb3VkLmdvb2dsZS5jb20vZXJyb3ItcmVwb3J0aW5nL1xuICAvLyBmb3IgYW5hbHl6aW5nIHByb2R1Y3Rpb24gaXNzdWVzLlxuICBjb25zdCBkYXRhID0gLyoqIEB0eXBlIHshSnNvbk9iamVjdH0gKi8gKE9iamVjdC5jcmVhdGUobnVsbCkpO1xuICBkYXRhWyd2J10gPSBnZXRNb2RlKCkucnR2VmVyc2lvbjtcbiAgZGF0YVsnbm9BbXAnXSA9IGhhc05vbkFtcEpzID8gJzEnIDogJzAnO1xuICBkYXRhWydtJ10gPSBtZXNzYWdlLnJlcGxhY2UoVVNFUl9FUlJPUl9TRU5USU5FTCwgJycpO1xuICBkYXRhWydhJ10gPSBpc1VzZXJFcnJvciA/ICcxJyA6ICcwJztcblxuICAvLyBFcnJvcnMgYXJlIHRhZ2dlZCB3aXRoIFwiZXhcIiAoXCJleHBlY3RlZFwiKSBsYWJlbCB0byBhbGxvdyBsb2dnZXJzIHRvXG4gIC8vIGNsYXNzaWZ5IHRoZXNlIGVycm9ycyBhcyBiZW5jaG1hcmtzIGFuZCBub3QgZXhjZXB0aW9ucy5cbiAgZGF0YVsnZXgnXSA9IGV4cGVjdGVkID8gJzEnIDogJzAnO1xuICBkYXRhWydkdyddID0gZGV0YWNoZWRXaW5kb3cgPyAnMScgOiAnMCc7XG5cbiAgbGV0IHJ1bnRpbWUgPSAnMXAnO1xuICBpZiAoc2VsZi5jb250ZXh0ICYmIHNlbGYuY29udGV4dC5sb2NhdGlvbikge1xuICAgIGRhdGFbJzNwJ10gPSAnMSc7XG4gICAgcnVudGltZSA9ICczcCc7XG4gIH0gZWxzZSBpZiAoZ2V0TW9kZSgpLnJ1bnRpbWUpIHtcbiAgICBydW50aW1lID0gZ2V0TW9kZSgpLnJ1bnRpbWU7XG4gIH1cbiAgZGF0YVsncnQnXSA9IHJ1bnRpbWU7XG5cbiAgLy8gVE9ETyhlcndpbm0pOiBSZW1vdmUgY2Egd2hlbiBhbGwgc3lzdGVtcyByZWFkIGBidGAgaW5zdGVhZCBvZiBgY2FgIHRvXG4gIC8vIGlkZW50aWZ5IGpzIGJpbmFyeSB0eXBlLlxuICBkYXRhWydjYSddID0gaXNDYW5hcnkoc2VsZikgPyAnMScgOiAnMCc7XG5cbiAgLy8gUGFzcyBiaW5hcnkgdHlwZS5cbiAgZGF0YVsnYnQnXSA9IGdldEJpbmFyeVR5cGUoc2VsZik7XG5cbiAgaWYgKHNlbGYubG9jYXRpb24uYW5jZXN0b3JPcmlnaW5zICYmIHNlbGYubG9jYXRpb24uYW5jZXN0b3JPcmlnaW5zWzBdKSB7XG4gICAgZGF0YVsnb3InXSA9IHNlbGYubG9jYXRpb24uYW5jZXN0b3JPcmlnaW5zWzBdO1xuICB9XG4gIGlmIChzZWxmLnZpZXdlclN0YXRlKSB7XG4gICAgZGF0YVsndnMnXSA9IHNlbGYudmlld2VyU3RhdGU7XG4gIH1cbiAgLy8gSXMgZW1iZWRkZWQ/XG4gIGlmIChzZWxmLnBhcmVudCAmJiBzZWxmLnBhcmVudCAhPSBzZWxmKSB7XG4gICAgZGF0YVsnaWVtJ10gPSAnMSc7XG4gIH1cblxuICBpZiAoc2VsZi5BTVAgJiYgc2VsZi5BTVAudmlld2VyKSB7XG4gICAgY29uc3QgcmVzb2x2ZWRWaWV3ZXJVcmwgPSBzZWxmLkFNUC52aWV3ZXIuZ2V0UmVzb2x2ZWRWaWV3ZXJVcmwoKTtcbiAgICBjb25zdCBtZXNzYWdpbmdPcmlnaW4gPSBzZWxmLkFNUC52aWV3ZXIubWF5YmVHZXRNZXNzYWdpbmdPcmlnaW4oKTtcbiAgICBpZiAocmVzb2x2ZWRWaWV3ZXJVcmwpIHtcbiAgICAgIGRhdGFbJ3J2dSddID0gcmVzb2x2ZWRWaWV3ZXJVcmw7XG4gICAgfVxuICAgIGlmIChtZXNzYWdpbmdPcmlnaW4pIHtcbiAgICAgIGRhdGFbJ21zbyddID0gbWVzc2FnaW5nT3JpZ2luO1xuICAgIH1cbiAgfVxuXG4gIGlmICghZGV0ZWN0ZWRKc0VuZ2luZSkge1xuICAgIGRldGVjdGVkSnNFbmdpbmUgPSBkZXRlY3RKc0VuZ2luZUZyb21TdGFjaygpO1xuICB9XG4gIGRhdGFbJ2pzZSddID0gZGV0ZWN0ZWRKc0VuZ2luZTtcblxuICBjb25zdCBleHBzID0gW107XG4gIGNvbnN0IGV4cGVyaW1lbnRzID0gZXhwZXJpbWVudFRvZ2dsZXNPck51bGwoc2VsZik7XG4gIGZvciAoY29uc3QgZXhwIGluIGV4cGVyaW1lbnRzKSB7XG4gICAgY29uc3Qgb24gPSBleHBlcmltZW50c1tleHBdO1xuICAgIGV4cHMucHVzaChgJHtleHB9PSR7b24gPyAnMScgOiAnMCd9YCk7XG4gIH1cbiAgZGF0YVsnZXhwcyddID0gZXhwcy5qb2luKCcsJyk7XG5cbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc3QgdGFnTmFtZSA9IGVycm9yLmFzc29jaWF0ZWRFbGVtZW50XG4gICAgICA/IGVycm9yLmFzc29jaWF0ZWRFbGVtZW50LnRhZ05hbWVcbiAgICAgIDogJ3UnOyAvLyBVbmtub3duXG4gICAgZGF0YVsnZWwnXSA9IHRhZ05hbWU7XG5cbiAgICBpZiAoZXJyb3IuYXJncykge1xuICAgICAgZGF0YVsnYXJncyddID0gSlNPTi5zdHJpbmdpZnkoZXJyb3IuYXJncyk7XG4gICAgfVxuXG4gICAgaWYgKCFpc1VzZXJFcnJvciAmJiAhZXJyb3IuaWdub3JlU3RhY2sgJiYgZXJyb3Iuc3RhY2spIHtcbiAgICAgIGRhdGFbJ3MnXSA9IGVycm9yLnN0YWNrO1xuICAgIH1cblxuICAgIGVycm9yLm1lc3NhZ2UgKz0gJyBfcmVwb3J0ZWRfJztcbiAgfSBlbHNlIHtcbiAgICBkYXRhWydmJ10gPSBmaWxlbmFtZSB8fCAnJztcbiAgICBkYXRhWydsJ10gPSBsaW5lIHx8ICcnO1xuICAgIGRhdGFbJ2MnXSA9IGNvbCB8fCAnJztcbiAgfVxuICBkYXRhWydyJ10gPSBzZWxmLmRvY3VtZW50LnJlZmVycmVyO1xuICBkYXRhWydhZSddID0gYWNjdW11bGF0ZWRFcnJvck1lc3NhZ2VzLmpvaW4oJywnKTtcbiAgZGF0YVsnZnInXSA9IHNlbGYubG9jYXRpb24ub3JpZ2luYWxIYXNoIHx8IHNlbGYubG9jYXRpb24uaGFzaDtcblxuICBwdXNoTGltaXQoYWNjdW11bGF0ZWRFcnJvck1lc3NhZ2VzLCBtZXNzYWdlLCAyNSk7XG5cbiAgcmV0dXJuIGRhdGE7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGl0IGFwcGVhcnMgbGlrZSB0aGVyZSBpcyBub24tQU1QIEpTIG9uIHRoZVxuICogY3VycmVudCBwYWdlLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRldGVjdE5vbkFtcEpzKHdpbikge1xuICBjb25zdCBzY3JpcHRzID0gd2luLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3NjcmlwdFtzcmNdJyk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2NyaXB0cy5sZW5ndGg7IGkrKykge1xuICAgIGlmICghaXNQcm94eU9yaWdpbihzY3JpcHRzW2ldLnNyYy50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBSZXNldHMgYWNjdW11bGF0ZWQgZXJyb3IgbWVzc2FnZXMgZm9yIHRlc3RpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0QWNjdW11bGF0ZWRFcnJvck1lc3NhZ2VzRm9yVGVzdGluZygpIHtcbiAgYWNjdW11bGF0ZWRFcnJvck1lc3NhZ2VzID0gW107XG59XG5cbi8qKlxuICogRG9lcyBhIHNlcmllcyBvZiBjaGVja3Mgb24gdGhlIHN0YWNrIG9mIGFuIHRocm93biBlcnJvciB0byBkZXRlcm1pbmUgdGhlXG4gKiBKUyBlbmdpbmUgdGhhdCBpcyBjdXJyZW50bHkgcnVubmluZy4gVGhpcyBnaXZlcyBhIGJpdCBtb3JlIGluZm9ybWF0aW9uIHRoYW5cbiAqIGp1c3QgdGhlIFVzZXJBZ2VudCwgc2luY2UgYnJvd3NlcnMgb2Z0ZW4gYWxsb3cgb3ZlcnJpZGluZyBpdCB0byBcImVtdWxhdGVcIlxuICogbW9iaWxlLlxuICogQHJldHVybiB7c3RyaW5nfVxuICogQHZpc2libGVGb3JUZXN0aW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZXRlY3RKc0VuZ2luZUZyb21TdGFjaygpIHtcbiAgLyoqIEBjb25zdHJ1Y3RvciAqL1xuICBmdW5jdGlvbiBGbigpIHt9XG4gIEZuLnByb3RvdHlwZS50ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdtZXNzYWdlJyk7XG4gIH07XG4gIGNvbnN0IG9iamVjdCA9IG5ldyBGbigpO1xuICB0cnkge1xuICAgIG9iamVjdC50KCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zdCB7c3RhY2t9ID0gZTtcblxuICAgIC8vIFNhZmFyaSBvbmx5IG1lbnRpb25zIHRoZSBtZXRob2QgbmFtZS5cbiAgICBpZiAoc3RhcnRzV2l0aChzdGFjaywgJ3RAJykpIHtcbiAgICAgIHJldHVybiAnU2FmYXJpJztcbiAgICB9XG5cbiAgICAvLyBGaXJlZm94IG1lbnRpb25zIFwicHJvdG90eXBlXCIuXG4gICAgaWYgKHN0YWNrLmluZGV4T2YoJy5wcm90b3R5cGUudEAnKSA+IC0xKSB7XG4gICAgICByZXR1cm4gJ0ZpcmVmb3gnO1xuICAgIH1cblxuICAgIC8vIElFIGxvb2tzIGxpa2UgQ2hyb21lLCBidXQgaW5jbHVkZXMgYSBjb250ZXh0IGZvciB0aGUgYmFzZSBzdGFjayBsaW5lLlxuICAgIC8vIEV4cGxpY2l0bHksIHdlJ3JlIGxvb2tpbmcgZm9yIHNvbWV0aGluZyBsaWtlOlxuICAgIC8vIFwiICAgIGF0IEdsb2JhbCBjb2RlIChodHRwczovL2V4YW1wbGUuY29tL2FwcC5qczoxOjIwMClcIiBvclxuICAgIC8vIFwiICAgIGF0IEFub255bW91cyBmdW5jdGlvbiAoaHR0cHM6Ly9leGFtcGxlLmNvbS9hcHAuanM6MToyMDApXCJcbiAgICAvLyB2cyBDaHJvbWUgd2hpY2ggaGFzOlxuICAgIC8vIFwiICAgIGF0IGh0dHBzOi8vZXhhbXBsZS5jb20vYXBwLmpzOjE6MjAwXCJcbiAgICBjb25zdCBsYXN0ID0gc3RhY2suc3BsaXQoJ1xcbicpLnBvcCgpO1xuICAgIGlmICgvXFxiYXQgLiogXFwoL2kudGVzdChsYXN0KSkge1xuICAgICAgcmV0dXJuICdJRSc7XG4gICAgfVxuXG4gICAgLy8gRmluYWxseSwgY2hyb21lIGluY2x1ZGVzIHRoZSBlcnJvciBtZXNzYWdlIGluIHRoZSBzdGFjay5cbiAgICBpZiAoc3RhcnRzV2l0aChzdGFjaywgJ0Vycm9yOiBtZXNzYWdlJykpIHtcbiAgICAgIHJldHVybiAnQ2hyb21lJztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gJ3Vua25vd24nO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IUVycm9yfSBlcnJvclxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlcG9ydEVycm9yVG9BbmFseXRpY3MoZXJyb3IsIHdpbikge1xuICBpZiAoaXNFeHBlcmltZW50T24od2luLCAndXNlci1lcnJvci1yZXBvcnRpbmcnKSkge1xuICAgIGNvbnN0IHZhcnMgPSB7XG4gICAgICAnZXJyb3JOYW1lJzogZXJyb3IubmFtZSxcbiAgICAgICdlcnJvck1lc3NhZ2UnOiBlcnJvci5tZXNzYWdlLFxuICAgIH07XG4gICAgdHJpZ2dlckFuYWx5dGljc0V2ZW50KGdldFJvb3RFbGVtZW50Xyh3aW4pLCAndXNlci1lcnJvcicsIHZhcnMpO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4geyFFbGVtZW50fVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gZ2V0Um9vdEVsZW1lbnRfKHdpbikge1xuICBjb25zdCByb290ID0gU2VydmljZXMuYW1wZG9jU2VydmljZUZvcih3aW4pLmdldEFtcERvYygpLmdldFJvb3ROb2RlKCk7XG4gIHJldHVybiBkZXYoKS5hc3NlcnRFbGVtZW50KHJvb3QuZG9jdW1lbnRFbGVtZW50IHx8IHJvb3QuYm9keSB8fCByb290KTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAgKiBXaGV0aGVyIGFkZEV2ZW50TGlzdGVuZXIgc3VwcG9ydHMgb3B0aW9ucyBvciBvbmx5IHRha2VzIGNhcHR1cmUgYXMgYSBib29sZWFuXG4gICogQHR5cGUge2Jvb2xlYW58dW5kZWZpbmVkfVxuICAqIEB2aXNpYmxlRm9yVGVzdGluZ1xuICAqL1xubGV0IG9wdHNTdXBwb3J0ZWQ7XG5cbi8qKlxuICogTGlzdGVucyBmb3IgdGhlIHNwZWNpZmllZCBldmVudCBvbiB0aGUgZWxlbWVudC5cbiAqXG4gKiBEbyBub3QgdXNlIHRoaXMgZGlyZWN0bHkuIFRoaXMgbWV0aG9kIGlzIGltcGxlbWVudGVkIGFzIGEgc2hhcmVkXG4gKiBkZXBlbmRlbmN5LiBVc2UgYGxpc3RlbigpYCBpbiBlaXRoZXIgYGV2ZW50LWhlbHBlcmAgb3IgYDNwLWZyYW1lLW1lc3NhZ2luZ2AsXG4gKiBkZXBlbmRpbmcgb24geW91ciB1c2UgY2FzZS5cbiAqXG4gKiBAcGFyYW0geyFFdmVudFRhcmdldH0gZWxlbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50VHlwZVxuICogQHBhcmFtIHtmdW5jdGlvbighRXZlbnQpfSBsaXN0ZW5lclxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRfZXZ0TGlzdGVuZXJPcHRzXG4gKiBAcmV0dXJuIHshVW5saXN0ZW5EZWZ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcm5hbExpc3RlbkltcGxlbWVudGF0aW9uKGVsZW1lbnQsIGV2ZW50VHlwZSwgbGlzdGVuZXIsXG4gIG9wdF9ldnRMaXN0ZW5lck9wdHMpIHtcbiAgbGV0IGxvY2FsRWxlbWVudCA9IGVsZW1lbnQ7XG4gIGxldCBsb2NhbExpc3RlbmVyID0gbGlzdGVuZXI7XG4gIC8qKlxuICAgKiBAdHlwZSB7P0Z1bmN0aW9ufVxuICAgKi9cbiAgbGV0IHdyYXBwZWQ7XG5cbiAgd3JhcHBlZCA9IGV2ZW50ID0+IHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGxvY2FsTGlzdGVuZXIoZXZlbnQpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIHJlcG9ydEVycm9yIGlzIGluc3RhbGxlZCBnbG9iYWxseSBwZXIgd2luZG93IGluIHRoZSBlbnRyeSBwb2ludC5cbiAgICAgIHNlbGYucmVwb3J0RXJyb3IoZSk7XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgfTtcbiAgY29uc3Qgb3B0c1N1cHBvcnRlZCA9IGRldGVjdEV2dExpc3RlbmVyT3B0c1N1cHBvcnQoKTtcbiAgbGV0IGNhcHR1cmUgPSBmYWxzZTtcbiAgaWYgKG9wdF9ldnRMaXN0ZW5lck9wdHMpIHtcbiAgICBjYXB0dXJlID0gb3B0X2V2dExpc3RlbmVyT3B0cy5jYXB0dXJlO1xuICB9XG4gIGxvY2FsRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgZXZlbnRUeXBlLFxuICAgICAgd3JhcHBlZCxcbiAgICAgIG9wdHNTdXBwb3J0ZWQgPyBvcHRfZXZ0TGlzdGVuZXJPcHRzIDogY2FwdHVyZVxuICApO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIGlmIChsb2NhbEVsZW1lbnQpIHtcbiAgICAgIGxvY2FsRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgICAgICAgIGV2ZW50VHlwZSxcbiAgICAgICAgICB3cmFwcGVkLFxuICAgICAgICAgIG9wdHNTdXBwb3J0ZWQgPyBvcHRfZXZ0TGlzdGVuZXJPcHRzIDogY2FwdHVyZVxuICAgICAgKTtcbiAgICB9XG4gICAgLy8gRW5zdXJlIHRoZXNlIGFyZSBHQydkXG4gICAgbG9jYWxMaXN0ZW5lciA9IG51bGw7XG4gICAgbG9jYWxFbGVtZW50ID0gbnVsbDtcbiAgICB3cmFwcGVkID0gbnVsbDtcbiAgfTtcbn1cblxuLyoqXG4gKiBUZXN0cyB3aGV0aGVyIHRoZSBicm93c2VyIHN1cHBvcnRzIG9wdGlvbnMgYXMgYW4gYXJndW1lbnQgb2YgYWRkRXZlbnRMaXN0ZW5lclxuICogb3Igbm90LlxuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZXRlY3RFdnRMaXN0ZW5lck9wdHNTdXBwb3J0KCkge1xuICAvLyBPbmx5IHJ1biB0aGUgdGVzdCBvbmNlXG4gIGlmIChvcHRzU3VwcG9ydGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gb3B0c1N1cHBvcnRlZDtcbiAgfVxuXG4gIG9wdHNTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgdHJ5IHtcbiAgICAvLyBUZXN0IHdoZXRoZXIgYnJvd3NlciBzdXBwb3J0cyBFdmVudExpc3RlbmVyT3B0aW9ucyBvciBub3RcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgZ2V0IGNhcHR1cmUoKSB7XG4gICAgICAgIG9wdHNTdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgfSxcbiAgICB9O1xuICAgIHNlbGYuYWRkRXZlbnRMaXN0ZW5lcigndGVzdC1vcHRpb25zJywgbnVsbCwgb3B0aW9ucyk7XG4gICAgc2VsZi5yZW1vdmVFdmVudExpc3RlbmVyKCd0ZXN0LW9wdGlvbnMnLCBudWxsLCBvcHRpb25zKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgLy8gRXZlbnRMaXN0ZW5lck9wdGlvbnMgYXJlIG5vdCBzdXBwb3J0ZWRcbiAgfVxuICByZXR1cm4gb3B0c1N1cHBvcnRlZDtcbn1cblxuLyoqXG4gICogUmVzZXRzIHRoZSB0ZXN0IGZvciB3aGV0aGVyIGFkZEV2ZW50TGlzdGVuZXIgc3VwcG9ydHMgb3B0aW9ucyBvciBub3QuXG4gICovXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRFdnRMaXN0ZW5lck9wdHNTdXBwb3J0Rm9yVGVzdGluZygpIHtcbiAgb3B0c1N1cHBvcnRlZCA9IHVuZGVmaW5lZDtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge2ludGVybmFsTGlzdGVuSW1wbGVtZW50YXRpb259IGZyb20gJy4vZXZlbnQtaGVscGVyLWxpc3Rlbic7XG5pbXBvcnQge3VzZXJ9IGZyb20gJy4vbG9nJztcblxuLyoqIEBjb25zdCB7c3RyaW5nfSAgKi9cbmNvbnN0IExPQURfRkFJTFVSRV9QUkVGSVggPSAnRmFpbGVkIHRvIGxvYWQ6JztcblxuLyoqXG4gKiBSZXR1cm5zIGEgQ3VzdG9tRXZlbnQgd2l0aCBhIGdpdmVuIHR5cGUgYW5kIGRldGFpbDsgc3VwcG9ydHMgZmFsbGJhY2sgZm9yIElFLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlXG4gKiBAcGFyYW0geyFKc29uT2JqZWN0fHN0cmluZ3x1bmRlZmluZWR8bnVsbH0gZGV0YWlsXG4gKiBAcGFyYW0ge0V2ZW50SW5pdD19IG9wdF9ldmVudEluaXRcbiAqIEByZXR1cm4geyFFdmVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUN1c3RvbUV2ZW50KHdpbiwgdHlwZSwgZGV0YWlsLCBvcHRfZXZlbnRJbml0KSB7XG4gIGNvbnN0IGV2ZW50SW5pdCA9IC8qKiBAdHlwZSB7IUN1c3RvbUV2ZW50SW5pdH0gKi8gKHtkZXRhaWx9KTtcbiAgT2JqZWN0LmFzc2lnbihldmVudEluaXQsIG9wdF9ldmVudEluaXQpO1xuICAvLyB3aW4uQ3VzdG9tRXZlbnQgaXMgYSBmdW5jdGlvbiBvbiBFZGdlLCBDaHJvbWUsIEZGLCBTYWZhcmkgYnV0XG4gIC8vIGlzIGFuIG9iamVjdCBvbiBJRSAxMS5cbiAgaWYgKHR5cGVvZiB3aW4uQ3VzdG9tRXZlbnQgPT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBuZXcgd2luLkN1c3RvbUV2ZW50KHR5cGUsIGV2ZW50SW5pdCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gRGVwcmVjYXRlZCBmYWxsYmFjayBmb3IgSUUuXG4gICAgY29uc3QgZSA9IHdpbi5kb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTtcbiAgICBlLmluaXRDdXN0b21FdmVudChcbiAgICAgICAgdHlwZSwgISFldmVudEluaXQuYnViYmxlcywgISFldmVudEluaXQuY2FuY2VsYWJsZSwgZGV0YWlsKTtcbiAgICByZXR1cm4gZTtcbiAgfVxufVxuXG4vKipcbiAqIExpc3RlbnMgZm9yIHRoZSBzcGVjaWZpZWQgZXZlbnQgb24gdGhlIGVsZW1lbnQuXG4gKiBAcGFyYW0geyFFdmVudFRhcmdldH0gZWxlbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50VHlwZVxuICogQHBhcmFtIHtmdW5jdGlvbighRXZlbnQpfSBsaXN0ZW5lclxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRfZXZ0TGlzdGVuZXJPcHRzXG4gKiBAcmV0dXJuIHshVW5saXN0ZW5EZWZ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4oZWxlbWVudCwgZXZlbnRUeXBlLCBsaXN0ZW5lciwgb3B0X2V2dExpc3RlbmVyT3B0cykge1xuICByZXR1cm4gaW50ZXJuYWxMaXN0ZW5JbXBsZW1lbnRhdGlvbihcbiAgICAgIGVsZW1lbnQsIGV2ZW50VHlwZSwgbGlzdGVuZXIsIG9wdF9ldnRMaXN0ZW5lck9wdHMpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGRhdGEgcHJvcGVydHkgb2YgYW4gZXZlbnQgd2l0aCB0aGUgY29ycmVjdCB0eXBlLlxuICogQHBhcmFtIHshRXZlbnR8e2RhdGE6ICFKc29uT2JqZWN0fX0gZXZlbnRcbiAqIEByZXR1cm4gez9Kc29uT2JqZWN0fHN0cmluZ3x1bmRlZmluZWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREYXRhKGV2ZW50KSB7XG4gIHJldHVybiAvKiogQHR5cGUgez9Kc29uT2JqZWN0fHN0cmluZ3x1bmRlZmluZWR9ICovIChldmVudC5kYXRhKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBkZXRhaWwgcHJvcGVydHkgb2YgYW4gZXZlbnQgd2l0aCB0aGUgY29ycmVjdCB0eXBlLlxuICogQHBhcmFtIHshRXZlbnR8e2RldGFpbDogIUpzb25PYmplY3R9fSBldmVudFxuICogQHJldHVybiB7P0pzb25PYmplY3R8c3RyaW5nfHVuZGVmaW5lZH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERldGFpbChldmVudCkge1xuICByZXR1cm4gLyoqIEB0eXBlIHs/SnNvbk9iamVjdHxzdHJpbmd8dW5kZWZpbmVkfSAqLyAoZXZlbnQuZGV0YWlsKTtcbn1cblxuLyoqXG4gKiBMaXN0ZW5zIGZvciB0aGUgc3BlY2lmaWVkIGV2ZW50IG9uIHRoZSBlbGVtZW50IGFuZCByZW1vdmVzIHRoZSBsaXN0ZW5lclxuICogYXMgc29vbiBhcyBldmVudCBoYXMgYmVlbiByZWNlaXZlZC5cbiAqIEBwYXJhbSB7IUV2ZW50VGFyZ2V0fSBlbGVtZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRUeXBlXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFFdmVudCl9IGxpc3RlbmVyXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdF9ldnRMaXN0ZW5lck9wdHNcbiAqIEByZXR1cm4geyFVbmxpc3RlbkRlZn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpc3Rlbk9uY2UoZWxlbWVudCwgZXZlbnRUeXBlLCBsaXN0ZW5lciwgb3B0X2V2dExpc3RlbmVyT3B0cykge1xuICBsZXQgbG9jYWxMaXN0ZW5lciA9IGxpc3RlbmVyO1xuICBjb25zdCB1bmxpc3RlbiA9IGludGVybmFsTGlzdGVuSW1wbGVtZW50YXRpb24oZWxlbWVudCwgZXZlbnRUeXBlLCBldmVudCA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGxvY2FsTGlzdGVuZXIoZXZlbnQpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICAvLyBFbnN1cmUgbGlzdGVuZXIgaXMgR0MnZFxuICAgICAgbG9jYWxMaXN0ZW5lciA9IG51bGw7XG4gICAgICB1bmxpc3RlbigpO1xuICAgIH1cbiAgfSwgb3B0X2V2dExpc3RlbmVyT3B0cyk7XG4gIHJldHVybiB1bmxpc3Rlbjtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgIGEgcHJvbWlzZSB0aGF0IHdpbGwgcmVzb2x2ZSBhcyBzb29uIGFzIHRoZSBzcGVjaWZpZWQgZXZlbnQgaGFzXG4gKiBmaXJlZCBvbiB0aGUgZWxlbWVudC5cbiAqIEBwYXJhbSB7IUV2ZW50VGFyZ2V0fSBlbGVtZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRUeXBlXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdF9ldnRMaXN0ZW5lck9wdHNcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oIVVubGlzdGVuRGVmKT19IG9wdF9jYW5jZWwgQW4gb3B0aW9uYWwgZnVuY3Rpb24gdGhhdCwgd2hlblxuICogICAgIHByb3ZpZGVkLCB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZSB1bmxpc3RlbmVyLiBUaGlzIGdpdmVzIHRoZSBjYWxsZXJcbiAqICAgICBhY2Nlc3MgdG8gdGhlIHVubGlzdGVuZXIsIHNvIGl0IG1heSBiZSBjYWxsZWQgbWFudWFsbHkgd2hlbiBuZWNlc3NhcnkuXG4gKiBAcmV0dXJuIHshUHJvbWlzZTwhRXZlbnQ+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuT25jZVByb21pc2UoZWxlbWVudCwgZXZlbnRUeXBlLCBvcHRfZXZ0TGlzdGVuZXJPcHRzLFxuICBvcHRfY2FuY2VsKSB7XG4gIGxldCB1bmxpc3RlbjtcbiAgY29uc3QgZXZlbnRQcm9taXNlID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgdW5saXN0ZW4gPSBsaXN0ZW5PbmNlKGVsZW1lbnQsIGV2ZW50VHlwZSwgcmVzb2x2ZSwgb3B0X2V2dExpc3RlbmVyT3B0cyk7XG4gIH0pO1xuICBldmVudFByb21pc2UudGhlbih1bmxpc3RlbiwgdW5saXN0ZW4pO1xuICBpZiAob3B0X2NhbmNlbCkge1xuICAgIG9wdF9jYW5jZWwodW5saXN0ZW4pO1xuICB9XG4gIHJldHVybiBldmVudFByb21pc2U7XG59XG5cblxuLyoqXG4gKiBXaGV0aGVyIHRoZSBzcGVjaWZpZWQgZWxlbWVudC93aW5kb3cgaGFzIGJlZW4gbG9hZGVkIGFscmVhZHkuXG4gKiBAcGFyYW0geyFFbGVtZW50fCFXaW5kb3d9IGVsZU9yV2luZG93XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNMb2FkZWQoZWxlT3JXaW5kb3cpIHtcbiAgcmV0dXJuICEhKGVsZU9yV2luZG93LmNvbXBsZXRlIHx8IGVsZU9yV2luZG93LnJlYWR5U3RhdGUgPT0gJ2NvbXBsZXRlJ1xuICAgICAgLy8gSWYgdGhlIHBhc3NlZCBpbiB0aGluZyBpcyBhIFdpbmRvdywgaW5mZXIgbG9hZGVkIHN0YXRlIGZyb21cbiAgICAgIC8vXG4gICAgICB8fCAoZWxlT3JXaW5kb3cuZG9jdW1lbnRcbiAgICAgICAgICAmJiBlbGVPcldpbmRvdy5kb2N1bWVudC5yZWFkeVN0YXRlID09ICdjb21wbGV0ZScpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHdpbGwgcmVzb2x2ZSBvciBmYWlsIGJhc2VkIG9uIHRoZSBlbGVPcldpbmRvdydzICdsb2FkJ1xuICogYW5kICdlcnJvcicgZXZlbnRzLiBPcHRpb25hbGx5IHRoaXMgbWV0aG9kIHRha2VzIGEgdGltZW91dCwgd2hpY2ggd2lsbCByZWplY3RcbiAqIHRoZSBwcm9taXNlIGlmIHRoZSByZXNvdXJjZSBoYXMgbm90IGxvYWRlZCBieSB0aGVuLlxuICogQHBhcmFtIHtUfSBlbGVPcldpbmRvdyBTdXBwb3J0cyBib3RoIEVsZW1lbnRzIGFuZCBhcyBhIHNwZWNpYWwgY2FzZSBXaW5kb3dzLlxuICogQHJldHVybiB7IVByb21pc2U8VD59XG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gbG9hZFByb21pc2UoZWxlT3JXaW5kb3cpIHtcbiAgbGV0IHVubGlzdGVuTG9hZDtcbiAgbGV0IHVubGlzdGVuRXJyb3I7XG4gIGlmIChpc0xvYWRlZChlbGVPcldpbmRvdykpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGVsZU9yV2luZG93KTtcbiAgfVxuICBjb25zdCBsb2FkaW5nUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAvLyBMaXN0ZW4gb25jZSBzaW5jZSBJRSA1LzYvNyBmaXJlIHRoZSBvbmxvYWQgZXZlbnQgY29udGludW91c2x5IGZvclxuICAgIC8vIGFuaW1hdGVkIEdJRnMuXG4gICAgY29uc3Qge3RhZ05hbWV9ID0gZWxlT3JXaW5kb3c7XG4gICAgaWYgKHRhZ05hbWUgPT09ICdBVURJTycgfHwgdGFnTmFtZSA9PT0gJ1ZJREVPJykge1xuICAgICAgdW5saXN0ZW5Mb2FkID0gbGlzdGVuT25jZShlbGVPcldpbmRvdywgJ2xvYWRzdGFydCcsIHJlc29sdmUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB1bmxpc3RlbkxvYWQgPSBsaXN0ZW5PbmNlKGVsZU9yV2luZG93LCAnbG9hZCcsIHJlc29sdmUpO1xuICAgIH1cbiAgICAvLyBGb3IgZWxlbWVudHMsIHVubGlzdGVuIG9uIGVycm9yIChkb24ndCBmb3IgV2luZG93cykuXG4gICAgaWYgKHRhZ05hbWUpIHtcbiAgICAgIHVubGlzdGVuRXJyb3IgPSBsaXN0ZW5PbmNlKGVsZU9yV2luZG93LCAnZXJyb3InLCByZWplY3QpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGxvYWRpbmdQcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgIGlmICh1bmxpc3RlbkVycm9yKSB7XG4gICAgICB1bmxpc3RlbkVycm9yKCk7XG4gICAgfVxuICAgIHJldHVybiBlbGVPcldpbmRvdztcbiAgfSwgKCkgPT4ge1xuICAgIGlmICh1bmxpc3RlbkxvYWQpIHtcbiAgICAgIHVubGlzdGVuTG9hZCgpO1xuICAgIH1cbiAgICBmYWlsZWRUb0xvYWQoZWxlT3JXaW5kb3cpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBFbWl0IGVycm9yIG9uIGxvYWQgZmFpbHVyZS5cbiAqIEBwYXJhbSB7IUVsZW1lbnR8IVdpbmRvd30gZWxlT3JXaW5kb3cgU3VwcG9ydHMgYm90aCBFbGVtZW50cyBhbmQgYXMgYSBzcGVjaWFsXG4gKiAgICAgY2FzZSBXaW5kb3dzLlxuICovXG5mdW5jdGlvbiBmYWlsZWRUb0xvYWQoZWxlT3JXaW5kb3cpIHtcbiAgLy8gUmVwb3J0IGZhaWxlZCBsb2FkcyBhcyB1c2VyIGVycm9ycyBzbyB0aGF0IHRoZXkgYXV0b21hdGljYWxseSBnb1xuICAvLyBpbnRvIHRoZSBcImRvY3VtZW50IGVycm9yXCIgYnVja2V0LlxuICBsZXQgdGFyZ2V0ID0gZWxlT3JXaW5kb3c7XG4gIGlmICh0YXJnZXQgJiYgdGFyZ2V0LnNyYykge1xuICAgIHRhcmdldCA9IHRhcmdldC5zcmM7XG4gIH1cbiAgdGhyb3cgdXNlcigpLmNyZWF0ZUVycm9yKExPQURfRkFJTFVSRV9QUkVGSVgsIHRhcmdldCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoaXMgZXJyb3IgbWVzc2FnZSBpcyB3YXMgY3JlYXRlZCBmb3IgYSBsb2FkIGVycm9yLlxuICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgQW4gZXJyb3IgbWVzc2FnZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTG9hZEVycm9yTWVzc2FnZShtZXNzYWdlKSB7XG4gIHJldHVybiBtZXNzYWdlLmluZGV4T2YoTE9BRF9GQUlMVVJFX1BSRUZJWCkgIT0gLTE7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IEV4cGVyaW1lbnRzIHN5c3RlbSBhbGxvd3MgYSBkZXZlbG9wZXIgdG8gb3B0LWluIHRvIHRlc3RcbiAqIGZlYXR1cmVzIHRoYXQgYXJlIG5vdCB5ZXQgZnVsbHkgdGVzdGVkLlxuICpcbiAqIEV4cGVyaW1lbnRzIHBhZ2U6IGh0dHBzOi8vY2RuLmFtcHByb2plY3Qub3JnL2V4cGVyaW1lbnRzLmh0bWwgKlxuICovXG5cbmltcG9ydCB7Z2V0Q29va2llLCBzZXRDb29raWV9IGZyb20gJy4vY29va2llcyc7XG5pbXBvcnQge2hhc093bn0gZnJvbSAnLi91dGlscy9vYmplY3QnO1xuaW1wb3J0IHtwYXJzZVF1ZXJ5U3RyaW5nfSBmcm9tICcuL3VybCc7XG5cbi8qKiBAY29uc3Qge3N0cmluZ30gKi9cbmNvbnN0IENPT0tJRV9OQU1FID0gJ0FNUF9FWFAnO1xuXG4vKiogQGNvbnN0IHtudW1iZXJ9ICovXG5jb25zdCBDT09LSUVfTUFYX0FHRV9EQVlTID0gMTgwOyAvLyA2IG1vbnRoXG5cbi8qKiBAY29uc3Qge3RpbWV9ICovXG5jb25zdCBDT09LSUVfRVhQSVJBVElPTl9JTlRFUlZBTCA9IENPT0tJRV9NQVhfQUdFX0RBWVMgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xuXG4vKiogQGNvbnN0IHtzdHJpbmd9ICovXG5jb25zdCBUT0dHTEVTX1dJTkRPV19QUk9QRVJUWSA9ICdfX0FNUF9fRVhQRVJJTUVOVF9UT0dHTEVTJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7e1xuICogICBpc1RyYWZmaWNFbGlnaWJsZTogZnVuY3Rpb24oIVdpbmRvdyk6Ym9vbGVhbixcbiAqICAgYnJhbmNoZXM6ICFBcnJheTxzdHJpbmc+XG4gKiB9fVxuICovXG5leHBvcnQgbGV0IEV4cGVyaW1lbnRJbmZvO1xuXG4vKipcbiAqIFdoZXRoZXIgd2UgYXJlIGluIGNhbmFyeS5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNDYW5hcnkod2luKSB7XG4gIHJldHVybiAhISh3aW4uQU1QX0NPTkZJRyAmJiB3aW4uQU1QX0NPTkZJRy5jYW5hcnkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYmluYXJ5IHR5cGUsIGUuZy4sIGNhbmFyeSwgY29udHJvbCwgb3IgcHJvZHVjdGlvbi5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRCaW5hcnlUeXBlKHdpbikge1xuICByZXR1cm4gd2luLkFNUF9DT05GSUcgJiYgd2luLkFNUF9DT05GSUcudHlwZSA/XG4gICAgd2luLkFNUF9DT05GSUcudHlwZSA6ICd1bmtub3duJztcbn1cblxuLyoqXG4gKiBXaGV0aGVyIHRoZSBzcGVjaWZpZWQgZXhwZXJpbWVudCBpcyBvbiBvciBvZmYuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IGV4cGVyaW1lbnRJZFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRXhwZXJpbWVudE9uKHdpbiwgZXhwZXJpbWVudElkKSB7XG4gIGNvbnN0IHRvZ2dsZXMgPSBleHBlcmltZW50VG9nZ2xlcyh3aW4pO1xuICByZXR1cm4gISF0b2dnbGVzW2V4cGVyaW1lbnRJZF07XG59XG5cbi8qKlxuICogVG9nZ2xlcyB0aGUgZXhwZXJpbWVudCBvbiBvciBvZmYuIFJldHVybnMgdGhlIGFjdHVhbCB2YWx1ZSBvZiB0aGUgZXhwZXJpbWVudFxuICogYWZ0ZXIgdG9nZ2xpbmcgaXMgZG9uZS5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gZXhwZXJpbWVudElkXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfb25cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF90cmFuc2llbnRFeHBlcmltZW50ICBXaGV0aGVyIHRvIHRvZ2dsZSB0aGVcbiAqICAgICBleHBlcmltZW50IHN0YXRlIFwidHJhbnNpZW50bHlcIiAoaS5lLiwgZm9yIHRoaXMgcGFnZSBsb2FkIG9ubHkpIG9yXG4gKiAgICAgZHVyYWJseSAoYnkgc2F2aW5nIHRoZSBleHBlcmltZW50IElEcyB0byB0aGUgY29va2llIGFmdGVyIHRvZ2dsaW5nKS5cbiAqICAgICBEZWZhdWx0OiBmYWxzZSAoc2F2ZSBkdXJhYmx5KS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IE5ldyBzdGF0ZSBmb3IgZXhwZXJpbWVudElkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9nZ2xlRXhwZXJpbWVudCh3aW4sIGV4cGVyaW1lbnRJZCwgb3B0X29uLFxuICBvcHRfdHJhbnNpZW50RXhwZXJpbWVudCkge1xuICBjb25zdCBjdXJyZW50bHlPbiA9IGlzRXhwZXJpbWVudE9uKHdpbiwgLypPSyovZXhwZXJpbWVudElkKTtcbiAgY29uc3Qgb24gPSAhIShvcHRfb24gIT09IHVuZGVmaW5lZCA/IG9wdF9vbiA6ICFjdXJyZW50bHlPbik7XG4gIGlmIChvbiAhPSBjdXJyZW50bHlPbikge1xuICAgIGNvbnN0IHRvZ2dsZXMgPSBleHBlcmltZW50VG9nZ2xlcyh3aW4pO1xuICAgIHRvZ2dsZXNbZXhwZXJpbWVudElkXSA9IG9uO1xuXG4gICAgaWYgKCFvcHRfdHJhbnNpZW50RXhwZXJpbWVudCkge1xuICAgICAgY29uc3QgY29va2llVG9nZ2xlcyA9IGdldEV4cGVyaW1lbnRUb2dnbGVzRnJvbUNvb2tpZSh3aW4pO1xuICAgICAgY29va2llVG9nZ2xlc1tleHBlcmltZW50SWRdID0gb247XG4gICAgICBzYXZlRXhwZXJpbWVudFRvZ2dsZXNUb0Nvb2tpZSh3aW4sIGNvb2tpZVRvZ2dsZXMpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gb247XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlIHdoZXRoZXIgdGhlIGV4cGVyaW1lbnQgaXMgb24gb3Igb2ZmIGJhc2VkIG9mZiBvZiB0aGVcbiAqIGNvb2tpZUZsYWcgb3IgdGhlIGdsb2JhbCBjb25maWcgZnJlcXVlbmN5IGdpdmVuLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4geyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4cGVyaW1lbnRUb2dnbGVzKHdpbikge1xuICBpZiAod2luW1RPR0dMRVNfV0lORE9XX1BST1BFUlRZXSkge1xuICAgIHJldHVybiB3aW5bVE9HR0xFU19XSU5ET1dfUFJPUEVSVFldO1xuICB9XG4gIHdpbltUT0dHTEVTX1dJTkRPV19QUk9QRVJUWV0gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBjb25zdCB0b2dnbGVzID0gd2luW1RPR0dMRVNfV0lORE9XX1BST1BFUlRZXTtcblxuICAvLyBSZWFkIHRoZSBkZWZhdWx0IGNvbmZpZyBvZiB0aGlzIGJ1aWxkLlxuICBpZiAod2luLkFNUF9DT05GSUcpIHtcbiAgICBmb3IgKGNvbnN0IGV4cGVyaW1lbnRJZCBpbiB3aW4uQU1QX0NPTkZJRykge1xuICAgICAgY29uc3QgZnJlcXVlbmN5ID0gd2luLkFNUF9DT05GSUdbZXhwZXJpbWVudElkXTtcbiAgICAgIGlmICh0eXBlb2YgZnJlcXVlbmN5ID09PSAnbnVtYmVyJyAmJiBmcmVxdWVuY3kgPj0gMCAmJiBmcmVxdWVuY3kgPD0gMSkge1xuICAgICAgICB0b2dnbGVzW2V4cGVyaW1lbnRJZF0gPSBNYXRoLnJhbmRvbSgpIDwgZnJlcXVlbmN5O1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvLyBSZWFkIGRvY3VtZW50IGxldmVsIG92ZXJyaWRlIGZyb20gbWV0YSB0YWcuXG4gIGlmICh3aW4uQU1QX0NPTkZJR1xuICAgICAgJiYgQXJyYXkuaXNBcnJheSh3aW4uQU1QX0NPTkZJR1snYWxsb3ctZG9jLW9wdC1pbiddKVxuICAgICAgJiYgd2luLkFNUF9DT05GSUdbJ2FsbG93LWRvYy1vcHQtaW4nXS5sZW5ndGggPiAwKSB7XG4gICAgY29uc3QgYWxsb3dlZCA9IHdpbi5BTVBfQ09ORklHWydhbGxvdy1kb2Mtb3B0LWluJ107XG4gICAgY29uc3QgbWV0YSA9XG4gICAgICAgIHdpbi5kb2N1bWVudC5oZWFkLnF1ZXJ5U2VsZWN0b3IoJ21ldGFbbmFtZT1cImFtcC1leHBlcmltZW50cy1vcHQtaW5cIl0nKTtcbiAgICBpZiAobWV0YSkge1xuICAgICAgY29uc3Qgb3B0ZWRJbkV4cGVyaW1lbnRzID0gbWV0YS5nZXRBdHRyaWJ1dGUoJ2NvbnRlbnQnKS5zcGxpdCgnLCcpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcHRlZEluRXhwZXJpbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGFsbG93ZWQuaW5kZXhPZihvcHRlZEluRXhwZXJpbWVudHNbaV0pICE9IC0xKSB7XG4gICAgICAgICAgdG9nZ2xlc1tvcHRlZEluRXhwZXJpbWVudHNbaV1dID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIE9iamVjdC5hc3NpZ24odG9nZ2xlcywgZ2V0RXhwZXJpbWVudFRvZ2dsZXNGcm9tQ29va2llKHdpbikpO1xuXG4gIGlmICh3aW4uQU1QX0NPTkZJR1xuICAgICAgJiYgQXJyYXkuaXNBcnJheSh3aW4uQU1QX0NPTkZJR1snYWxsb3ctdXJsLW9wdC1pbiddKVxuICAgICAgJiYgd2luLkFNUF9DT05GSUdbJ2FsbG93LXVybC1vcHQtaW4nXS5sZW5ndGggPiAwKSB7XG4gICAgY29uc3QgYWxsb3dlZCA9IHdpbi5BTVBfQ09ORklHWydhbGxvdy11cmwtb3B0LWluJ107XG4gICAgY29uc3QgaGFzaCA9IHdpbi5sb2NhdGlvbi5vcmlnaW5hbEhhc2ggfHwgd2luLmxvY2F0aW9uLmhhc2g7XG4gICAgY29uc3QgcGFyYW1zID0gcGFyc2VRdWVyeVN0cmluZyhoYXNoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbG93ZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHBhcmFtID0gcGFyYW1zW2BlLSR7YWxsb3dlZFtpXX1gXTtcbiAgICAgIGlmIChwYXJhbSA9PSAnMScpIHtcbiAgICAgICAgdG9nZ2xlc1thbGxvd2VkW2ldXSA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAocGFyYW0gPT0gJzAnKSB7XG4gICAgICAgIHRvZ2dsZXNbYWxsb3dlZFtpXV0gPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRvZ2dsZXM7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgY2FjaGVkIGV4cGVyaW1lbnRzIHRvZ2dsZXMsIG9yIG51bGwgaWYgdGhleSBoYXZlIG5vdCBiZWVuXG4gKiBjb21wdXRlZCB5ZXQuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7T2JqZWN0PHN0cmluZywgYm9vbGVhbj59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHBlcmltZW50VG9nZ2xlc09yTnVsbCh3aW4pIHtcbiAgcmV0dXJuIHdpbltUT0dHTEVTX1dJTkRPV19QUk9QRVJUWV0gfHwgbnVsbDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc2V0IG9mIGV4cGVyaW1lbnQgSURzIGN1cnJlbnRseSBvbi5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHshT2JqZWN0PHN0cmluZywgYm9vbGVhbj59XG4gKi9cbmZ1bmN0aW9uIGdldEV4cGVyaW1lbnRUb2dnbGVzRnJvbUNvb2tpZSh3aW4pIHtcbiAgY29uc3QgZXhwZXJpbWVudENvb2tpZSA9IGdldENvb2tpZSh3aW4sIENPT0tJRV9OQU1FKTtcbiAgY29uc3QgdG9rZW5zID0gZXhwZXJpbWVudENvb2tpZSA/IGV4cGVyaW1lbnRDb29raWUuc3BsaXQoL1xccyosXFxzKi9nKSA6IFtdO1xuXG4gIGNvbnN0IHRvZ2dsZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHRva2Vucy5sZW5ndGg7IGkrKykge1xuICAgIGlmICh0b2tlbnNbaV0ubGVuZ3RoID09IDApIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAodG9rZW5zW2ldWzBdID09ICctJykge1xuICAgICAgdG9nZ2xlc1t0b2tlbnNbaV0uc3Vic3RyKDEpXSA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0b2dnbGVzW3Rva2Vuc1tpXV0gPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0b2dnbGVzO1xufVxuXG4vKipcbiAqIFNhdmVzIGEgc2V0IG9mIGV4cGVyaW1lbnQgSURzIGN1cnJlbnRseSBvbi5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn0gdG9nZ2xlc1xuICovXG5mdW5jdGlvbiBzYXZlRXhwZXJpbWVudFRvZ2dsZXNUb0Nvb2tpZSh3aW4sIHRvZ2dsZXMpIHtcbiAgY29uc3QgZXhwZXJpbWVudElkcyA9IFtdO1xuICBmb3IgKGNvbnN0IGV4cGVyaW1lbnQgaW4gdG9nZ2xlcykge1xuICAgIGV4cGVyaW1lbnRJZHMucHVzaCgodG9nZ2xlc1tleHBlcmltZW50XSA9PT0gZmFsc2UgPyAnLScgOiAnJykgKyBleHBlcmltZW50KTtcbiAgfVxuXG4gIHNldENvb2tpZSh3aW4sIENPT0tJRV9OQU1FLCBleHBlcmltZW50SWRzLmpvaW4oJywnKSxcbiAgICAgIERhdGUubm93KCkgKyBDT09LSUVfRVhQSVJBVElPTl9JTlRFUlZBTCwge1xuICAgICAgICAvLyBTZXQgZXhwbGljaXQgZG9tYWluLCBzbyB0aGUgY29va2llIGdldHMgc2VuZCB0byBzdWIgZG9tYWlucy5cbiAgICAgICAgZG9tYWluOiB3aW4ubG9jYXRpb24uaG9zdG5hbWUsXG4gICAgICAgIGFsbG93T25Qcm94eU9yaWdpbjogdHJ1ZSxcbiAgICAgIH0pO1xufVxuXG4vKipcbiAqIFNlZSBnZXRFeHBlcmltZW50VG9nZ2xlc0Zyb21Db29raWUoKS5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHshT2JqZWN0PHN0cmluZywgYm9vbGVhbj59XG4gKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEV4cGVyaW1lbnRUb2dsZXNGcm9tQ29va2llRm9yVGVzdGluZyh3aW4pIHtcbiAgcmV0dXJuIGdldEV4cGVyaW1lbnRUb2dnbGVzRnJvbUNvb2tpZSh3aW4pO1xufVxuXG4vKipcbiAqIFJlc2V0cyB0aGUgZXhwZXJpbWVudHNUb2dnbGUgY2FjaGUgZm9yIHRlc3RpbmcgcHVycG9zZXMuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHZpc2libGVGb3JUZXN0aW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNldEV4cGVyaW1lbnRUb2dnbGVzRm9yVGVzdGluZyh3aW4pIHtcbiAgc2V0Q29va2llKHdpbiwgQ09PS0lFX05BTUUsICcnLCAwLCB7XG4gICAgZG9tYWluOiB3aW4ubG9jYXRpb24uaG9zdG5hbWUsXG4gIH0pO1xuICB3aW5bVE9HR0xFU19XSU5ET1dfUFJPUEVSVFldID0gbnVsbDtcbn1cblxuLyoqXG4gKiBJbiBzb21lIGJyb3dzZXIgaW1wbGVtZW50YXRpb25zIG9mIE1hdGgucmFuZG9tKCksIHNlcXVlbnRpYWwgY2FsbHMgb2ZcbiAqIE1hdGgucmFuZG9tKCkgYXJlIGNvcnJlbGF0ZWQgYW5kIGNhbiBjYXVzZSBhIGJpYXMuICBJbiBwYXJ0aWN1bGFyLFxuICogaWYgdGhlIHByZXZpb3VzIHJhbmRvbSgpIGNhbGwgd2FzIDwgMC4wMDEgKGFzIGl0IHdpbGwgYmUgaWYgd2Ugc2VsZWN0XG4gKiBpbnRvIGFuIGV4cGVyaW1lbnQpLCB0aGUgbmV4dCB2YWx1ZSBjb3VsZCBiZSBsZXNzIHRoYW4gMC41IG1vcmUgdGhhblxuICogNTAuNyUgb2YgdGhlIHRpbWUuICBUaGlzIHByb3ZpZGVzIGFuIGltcGxlbWVudGF0aW9uIHRoYXQgcm9vdHMgZG93biBpbnRvXG4gKiB0aGUgY3J5cHRvIEFQSSwgd2hlbiBhdmFpbGFibGUsIHRvIHByb2R1Y2UgbGVzcyBiaWFzZWQgc2FtcGxlcy5cbiAqXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFBzZXVkby1yYW5kb20gZmxvYXRpbmctcG9pbnQgdmFsdWUgb24gdGhlIHJhbmdlIFswLCAxKS5cbiAqL1xuZnVuY3Rpb24gc2xvd0J1dEFjY3VyYXRlUHJuZygpIHtcbiAgLy8gVE9ETyh0ZHJsKTogSW1wbGVtZW50LlxuICByZXR1cm4gTWF0aC5yYW5kb20oKTtcbn1cblxuLyoqXG4gKiBDb250YWluZXIgZm9yIGFsdGVybmF0ZSByYW5kb20gbnVtYmVyIGdlbmVyYXRvciBpbXBsZW1lbnRhdGlvbnMuICBUaGlzXG4gKiBhbGxvd3MgdXMgdG8gc2V0IGFuIFwiYWNjdXJhdGVcIiBQUk5HIGZvciBicmFuY2ggc2VsZWN0aW9uLCBidXQgdG8gbW9jayBpdFxuICogb3V0IGVhc2lseSBpbiB0ZXN0cy5cbiAqXG4gKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAqIEBjb25zdCB7IXthY2N1cmF0ZVBybmc6IGZ1bmN0aW9uKCk6bnVtYmVyfX1cbiAqL1xuZXhwb3J0IGNvbnN0IFJBTkRPTV9OVU1CRVJfR0VORVJBVE9SUyA9IHtcbiAgYWNjdXJhdGVQcm5nOiBzbG93QnV0QWNjdXJhdGVQcm5nLFxufTtcblxuLyoqXG4gKiBTZWxlY3RzLCB1bmlmb3JtbHkgYXQgcmFuZG9tLCBhIHNpbmdsZSBpdGVtIGZyb20gdGhlIGFycmF5LlxuICogQHBhcmFtIHshQXJyYXk8c3RyaW5nPn0gYXJyIE9iamVjdCB0byBzZWxlY3QgZnJvbS5cbiAqIEByZXR1cm4gez9zdHJpbmd9IFNpbmdsZSBpdGVtIGZyb20gYXJyIG9yIG51bGwgaWYgYXJyIHdhcyBlbXB0eS5cbiAqL1xuZnVuY3Rpb24gc2VsZWN0UmFuZG9tSXRlbShhcnIpIHtcbiAgY29uc3Qgcm4gPSBSQU5ET01fTlVNQkVSX0dFTkVSQVRPUlMuYWNjdXJhdGVQcm5nKCk7XG4gIHJldHVybiBhcnJbTWF0aC5mbG9vcihybiAqIGFyci5sZW5ndGgpXSB8fCBudWxsO1xufVxuXG4vKipcbiAqIFNlbGVjdHMgd2hpY2ggcGFnZS1sZXZlbCBleHBlcmltZW50IGJyYW5jaGVzIGFyZSBlbmFibGVkLiBJZiBhIGdpdmVuXG4gKiBleHBlcmltZW50IG5hbWUgaXMgYWxyZWFkeSBzZXQgKGluY2x1ZGluZyB0byB0aGUgbnVsbCAvIG5vIGJyYW5jaGVzIHNlbGVjdGVkXG4gKiBzdGF0ZSksIHRoaXMgd29uJ3QgYWx0ZXIgaXRzIHN0YXRlLlxuICpcbiAqIENoZWNrIHdoZXRoZXIgYSBnaXZlbiBleHBlcmltZW50IGlzIHNldCB1c2luZyBpc0V4cGVyaW1lbnRPbih3aW4sXG4gKiBleHBlcmltZW50TmFtZSkgYW5kLCBpZiBpdCBpcyBvbiwgbG9vayBmb3Igd2hpY2ggYnJhbmNoIGlzIHNlbGVjdGVkIGluXG4gKiB3aW4uZXhwZXJpbWVudEJyYW5jaGVzW2V4cGVyaW1lbnROYW1lXS5cbiAqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpbiBXaW5kb3cgY29udGV4dCBvbiB3aGljaCB0byBzYXZlIGV4cGVyaW1lbnRcbiAqICAgICBzZWxlY3Rpb24gc3RhdGUuXG4gKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCAhRXhwZXJpbWVudEluZm8+fSBleHBlcmltZW50cyAgU2V0IG9mIGV4cGVyaW1lbnRzIHRvXG4gKiAgICAgY29uZmlndXJlIGZvciB0aGlzIHBhZ2UgbG9hZC5cbiAqIEByZXR1cm4geyFPYmplY3Q8c3RyaW5nLCBzdHJpbmc+fSBNYXAgb2YgZXhwZXJpbWVudCBuYW1lcyB0byBzZWxlY3RlZFxuICogICAgIGJyYW5jaGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmFuZG9tbHlTZWxlY3RVbnNldEV4cGVyaW1lbnRzKHdpbiwgZXhwZXJpbWVudHMpIHtcbiAgd2luLmV4cGVyaW1lbnRCcmFuY2hlcyA9IHdpbi5leHBlcmltZW50QnJhbmNoZXMgfHwge307XG4gIGNvbnN0IHNlbGVjdGVkRXhwZXJpbWVudHMgPSB7fTtcbiAgZm9yIChjb25zdCBleHBlcmltZW50TmFtZSBpbiBleHBlcmltZW50cykge1xuICAgIC8vIFNraXAgZXhwZXJpbWVudE5hbWUgaWYgaXQgaXMgbm90IGEga2V5IG9mIGV4cGVyaW1lbnRzIG9iamVjdCBvciBpZiBpdFxuICAgIC8vIGhhcyBhbHJlYWR5IGJlZW4gcG9wdWxhdGVkIGJ5IHNvbWUgb3RoZXIgcHJvcGVydHkuXG4gICAgaWYgKCFoYXNPd24oZXhwZXJpbWVudHMsIGV4cGVyaW1lbnROYW1lKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChoYXNPd24od2luLmV4cGVyaW1lbnRCcmFuY2hlcywgZXhwZXJpbWVudE5hbWUpKSB7XG4gICAgICBzZWxlY3RlZEV4cGVyaW1lbnRzW2V4cGVyaW1lbnROYW1lXSA9XG4gICAgICAgICAgd2luLmV4cGVyaW1lbnRCcmFuY2hlc1tleHBlcmltZW50TmFtZV07XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBpZiAoIWV4cGVyaW1lbnRzW2V4cGVyaW1lbnROYW1lXS5pc1RyYWZmaWNFbGlnaWJsZSB8fFxuICAgICAgICAhZXhwZXJpbWVudHNbZXhwZXJpbWVudE5hbWVdLmlzVHJhZmZpY0VsaWdpYmxlKHdpbikpIHtcbiAgICAgIHdpbi5leHBlcmltZW50QnJhbmNoZXNbZXhwZXJpbWVudE5hbWVdID0gbnVsbDtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIElmIHdlJ3JlIGluIHRoZSBleHBlcmltZW50LCBidXQgd2UgaGF2ZW4ndCBhbHJlYWR5IGZvcmNlZCBhIHNwZWNpZmljXG4gICAgLy8gZXhwZXJpbWVudCBicmFuY2ggKGUuZy4sIHZpYSBhIHRlc3Qgc2V0dXApLCB0aGVuIHJhbmRvbWl6ZSB0aGUgYnJhbmNoXG4gICAgLy8gY2hvaWNlLlxuICAgIGlmICghd2luLmV4cGVyaW1lbnRCcmFuY2hlc1tleHBlcmltZW50TmFtZV0gJiZcbiAgICAgIGlzRXhwZXJpbWVudE9uKHdpbiwgLypPSyovZXhwZXJpbWVudE5hbWUpKSB7XG4gICAgICBjb25zdCB7YnJhbmNoZXN9ID0gZXhwZXJpbWVudHNbZXhwZXJpbWVudE5hbWVdO1xuICAgICAgd2luLmV4cGVyaW1lbnRCcmFuY2hlc1tleHBlcmltZW50TmFtZV0gPSBzZWxlY3RSYW5kb21JdGVtKGJyYW5jaGVzKTtcbiAgICAgIHNlbGVjdGVkRXhwZXJpbWVudHNbZXhwZXJpbWVudE5hbWVdID1cbiAgICAgICAgICB3aW4uZXhwZXJpbWVudEJyYW5jaGVzW2V4cGVyaW1lbnROYW1lXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHNlbGVjdGVkRXhwZXJpbWVudHM7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZXhwZXJpbWVudCBicmFuY2ggZW5hYmxlZCBmb3IgdGhlIGdpdmVuIGV4cGVyaW1lbnQgSUQuXG4gKiBGb3IgZXhhbXBsZSwgJ2NvbnRyb2wnIG9yICdleHBlcmltZW50Jy5cbiAqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpbiBXaW5kb3cgY29udGV4dCB0byBjaGVjayBmb3IgZXhwZXJpbWVudCBzdGF0ZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBleHBlcmltZW50TmFtZSBOYW1lIG9mIHRoZSBleHBlcmltZW50IHRvIGNoZWNrLlxuICogQHJldHVybiB7P3N0cmluZ30gQWN0aXZlIGV4cGVyaW1lbnQgYnJhbmNoIElEIGZvciBleHBlcmltZW50TmFtZSAocG9zc2libHlcbiAqICAgICBudWxsIGlmIGV4cGVyaW1lbnROYW1lIGhhcyBiZWVuIHRlc3RlZCBidXQgbm8gYnJhbmNoIHdhcyBlbmFibGVkKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEV4cGVyaW1lbnRCcmFuY2god2luLCBleHBlcmltZW50TmFtZSkge1xuICByZXR1cm4gd2luLmV4cGVyaW1lbnRCcmFuY2hlcyA/IHdpbi5leHBlcmltZW50QnJhbmNoZXNbZXhwZXJpbWVudE5hbWVdIDogbnVsbDtcbn1cblxuLyoqXG4gKiBGb3JjZSBlbmFibGUgKG9yIGRpc2FibGUpIGEgc3BlY2lmaWMgYnJhbmNoIG9mIGEgZ2l2ZW4gZXhwZXJpbWVudCBuYW1lLlxuICogRGlzYWJsZXMgdGhlIGV4cGVyaW1lbnQgbmFtZSBhbHRvZ2V0aGVyIGlmIGJyYW5jaElkIGlzIGZhbHNlaXNoLlxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luIFdpbmRvdyBjb250ZXh0IHRvIGNoZWNrIGZvciBleHBlcmltZW50IHN0YXRlLlxuICogQHBhcmFtIHtzdHJpbmd9IGV4cGVyaW1lbnROYW1lIE5hbWUgb2YgdGhlIGV4cGVyaW1lbnQgdG8gY2hlY2suXG4gKiBAcGFyYW0gez9zdHJpbmd9IGJyYW5jaElkIElEIG9mIGJyYW5jaCB0byBmb3JjZSBvciBudWxsIHRvIGRpc2FibGVcbiAqICAgICBhbHRvZ2V0aGVyLlxuICogQHZpc2libGVGb3JUZXN0aW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JjZUV4cGVyaW1lbnRCcmFuY2god2luLCBleHBlcmltZW50TmFtZSwgYnJhbmNoSWQpIHtcbiAgd2luLmV4cGVyaW1lbnRCcmFuY2hlcyA9IHdpbi5leHBlcmltZW50QnJhbmNoZXMgfHwge307XG4gIHRvZ2dsZUV4cGVyaW1lbnQod2luLCBleHBlcmltZW50TmFtZSwgISFicmFuY2hJZCwgdHJ1ZSk7XG4gIHdpbi5leHBlcmltZW50QnJhbmNoZXNbZXhwZXJpbWVudE5hbWVdID0gYnJhbmNoSWQ7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X2Jhc2UgRXhwb25lbnRpYWwgYmFzZS4gRGVmYXVsdHMgdG8gMi5cbiAqIEByZXR1cm4ge2Z1bmN0aW9uKGZ1bmN0aW9uKCkpOiBudW1iZXJ9IEZ1bmN0aW9uIHRoYXQgd2hlbiBpbnZva2VkIHdpbGxcbiAqICAgICBjYWxsIHRoZSBwYXNzZWQgaW4gZnVuY3Rpb24uIE9uIGV2ZXJ5IGludm9jYXRpb24gdGhlIG5leHRcbiAqICAgICBpbnZvY2F0aW9uIG9mIHRoZSBwYXNzZWQgaW4gZnVuY3Rpb24gd2lsbCBiZSBleHBvbmVudGlhbGx5XG4gKiAgICAgbGF0ZXIuIFJldHVybmVkIGZ1bmN0aW9uIHJldHVybnMgdGltZW91dCBpZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4cG9uZW50aWFsQmFja29mZihvcHRfYmFzZSkge1xuICBjb25zdCBnZXRUaW1lb3V0ID0gZXhwb25lbnRpYWxCYWNrb2ZmQ2xvY2sob3B0X2Jhc2UpO1xuICByZXR1cm4gd29yayA9PiB7XG4gICAgcmV0dXJuIHNldFRpbWVvdXQod29yaywgZ2V0VGltZW91dCgpKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9iYXNlIEV4cG9uZW50aWFsIGJhc2UuIERlZmF1bHRzIHRvIDIuXG4gKiBAcmV0dXJuIHtmdW5jdGlvbigpOiBudW1iZXJ9IEZ1bmN0aW9uIHRoYXQgd2hlbiBpbnZva2VkIHdpbGwgcmV0dXJuXG4gKiAgICBhIG51bWJlciB0aGF0IGV4cG9uZW50aWFsbHkgZ3Jvd3MgcGVyIGludm9jYXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHBvbmVudGlhbEJhY2tvZmZDbG9jayhvcHRfYmFzZSkge1xuICBjb25zdCBiYXNlID0gb3B0X2Jhc2UgfHwgMjtcbiAgbGV0IGNvdW50ID0gMDtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBsZXQgd2FpdCA9IE1hdGgucG93KGJhc2UsIGNvdW50KyspO1xuICAgIHdhaXQgKz0gZ2V0Sml0dGVyKHdhaXQpO1xuICAgIHJldHVybiB3YWl0ICogMTAwMDtcbiAgfTtcbn1cblxuLyoqXG4gKiBBZGQgaml0dGVyIHRvIGF2b2lkIHRoZSB0aHVuZGVyaW5nIGhlcmQuIFRoaXMgY2FuIGUuZy4gaGFwcGVuIHdoZW5cbiAqIHdlIHBvbGwgYSBiYWNrZW5kIGFuZCBpdCBmYWlscyBmb3IgZXZlcnlvbmUgYXQgdGhlIHNhbWUgdGltZS5cbiAqIFdlIGFkZCB1cCB0byAzMCUgKGRlZmF1bHQpIGxvbmdlciBvciBzaG9ydGVyIHRoYW4gdGhlIGdpdmVuIHRpbWUuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHdhaXQgdGhlIGFtb3VudCBpZiBiYXNlIG1pbGxpc2Vjb25kc1xuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfcGVyYyB0aGUgbWluL21heCBwZXJjZW50YWdlIHRvIGFkZCBvciBzdXRyYWN0XG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRKaXR0ZXIod2FpdCwgb3B0X3BlcmMpIHtcbiAgb3B0X3BlcmMgPSBvcHRfcGVyYyB8fCAuMztcbiAgbGV0IGppdHRlciA9IHdhaXQgKiBvcHRfcGVyYyAqIE1hdGgucmFuZG9tKCk7XG4gIGlmIChNYXRoLnJhbmRvbSgpID4gLjUpIHtcbiAgICBqaXR0ZXIgKj0gLTE7XG4gIH1cbiAgcmV0dXJuIGppdHRlcjtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge3N0YXJ0c1dpdGh9IGZyb20gJy4vc3RyaW5nJztcblxuLyoqIEB0eXBlIHshQXJyYXk8c3RyaW5nPn0gKi9cbmNvbnN0IGV4Y2x1ZGVkVGFncyA9IFsnc2NyaXB0JywgJ3N0eWxlJ107XG5cbi8qKiBAdHlwZSB7IUFycmF5PHN0cmluZz59ICovXG5jb25zdCBhbGxvd2VkQW1wVGFncyA9IFsnYW1wLWFjY29yZGlvbicsICdhbXAtYXBwLWJhbm5lcicsICdhbXAtY2Fyb3VzZWwnLFxuICAnYW1wLWZpdC10ZXh0JywgJ2FtcC1mb3JtJywgJ2FtcC1zZWxlY3RvcicsICdhbXAtc2lkZWJhciddO1xuXG4vKiogQHR5cGUgeyFBcnJheTxzdHJpbmc+fSAqL1xuY29uc3QgYWxsb3dlZEF0dHJpYnV0ZXMgPSBbJ2FjdGlvbicsICdhbHQnLCAnY2xhc3MnLCAnZGlzYWJsZWQnLCAnaGVpZ2h0JyxcbiAgJ2hyZWYnLCAnaWQnLCAnbmFtZScsICdwbGFjZWhvbGRlcicsICdyZWFkb25seScsICdzcmMnLCAndGFiaW5kZXgnLFxuICAndGl0bGUnLCAndHlwZScsICd2YWx1ZScsICd3aWR0aCddO1xuXG4vKipcbiAqIFJldHVybnMgY29udGVudCBvZiBIVE1MIG5vZGVcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3IgLSBDU1Mgc2VsZWN0b3Igb2YgdGhlIG5vZGUgdG8gdGFrZSBjb250ZW50IGZyb21cbiAqIEBwYXJhbSB7IUFycmF5PHN0cmluZz59IGF0dHJzIC0gdGFnIGF0dHJpYnV0ZXMgdG8gYmUgbGVmdCBpbiB0aGUgc3RyaW5naWZpZWRcbiAqIEhUTUxcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEh0bWwod2luLCBzZWxlY3RvciwgYXR0cnMpIHtcbiAgY29uc3Qgcm9vdCA9IHdpbi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgY29uc3QgcmVzdWx0ID0gW107XG5cbiAgaWYgKHJvb3QpIHtcbiAgICBhcHBlbmRUb1Jlc3VsdChyb290LCBhdHRycywgcmVzdWx0KTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQuam9pbignJykucmVwbGFjZSgvXFxzezIsfS9nLCAnICcpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IUVsZW1lbnR9IG5vZGUgLSBub2RlIHRvIHRha2UgY29udGVudCBmcm9tXG4gKiBAcGFyYW0geyFBcnJheTxzdHJpbmc+fSBhdHRycyAtIHRhZyBhdHRyaWJ1dGVzIHRvIGJlIGxlZnQgaW4gdGhlIHN0cmluZ2lmaWVkIEhUTUxcbiAqIEBwYXJhbSB7IUFycmF5PHN0cmluZz59IHJlc3VsdFxuICovXG5mdW5jdGlvbiBhcHBlbmRUb1Jlc3VsdChub2RlLCBhdHRycywgcmVzdWx0KSB7XG4gIGNvbnN0IHN0YWNrID0gW25vZGVdO1xuICBjb25zdCBhbGxvd2VkQXR0cnMgPSBhdHRycy5maWx0ZXIoYXR0ciA9PiB7XG4gICAgcmV0dXJuIGFsbG93ZWRBdHRyaWJ1dGVzLmluY2x1ZGVzKGF0dHIpO1xuICB9KTtcblxuICB3aGlsZSAoc3RhY2subGVuZ3RoID4gMCkge1xuICAgIG5vZGUgPSBzdGFjay5wb3AoKTtcblxuICAgIGlmICh0eXBlb2Ygbm9kZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJlc3VsdC5wdXNoKG5vZGUpO1xuICAgIH0gZWxzZSBpZiAobm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5URVhUX05PREUpIHtcbiAgICAgIHJlc3VsdC5wdXNoKG5vZGUudGV4dENvbnRlbnQpO1xuICAgIH0gZWxzZSBpZiAobm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUgJiYgaXNBcHBsaWNhYmxlTm9kZShub2RlKSkge1xuICAgICAgYXBwZW5kT3BlblRhZyhub2RlLCBhbGxvd2VkQXR0cnMsIHJlc3VsdCk7XG4gICAgICBzdGFjay5wdXNoKGA8LyR7bm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCl9PmApO1xuXG4gICAgICBmb3IgKGxldCBjaGlsZCA9IG5vZGUubGFzdENoaWxkOyBjaGlsZDsgY2hpbGQgPSBjaGlsZC5wcmV2aW91c1NpYmxpbmcpIHtcbiAgICAgICAgc3RhY2sucHVzaChjaGlsZCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cblxuLyoqXG4gKlxuICogQHBhcmFtIHshRWxlbWVudH0gbm9kZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNBcHBsaWNhYmxlTm9kZShub2RlKSB7XG4gIGNvbnN0IHRhZ05hbWUgPSBub2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcblxuICBpZiAoc3RhcnRzV2l0aCh0YWdOYW1lLCAnYW1wLScpKSB7XG4gICAgcmV0dXJuICEhKGFsbG93ZWRBbXBUYWdzLmluY2x1ZGVzKHRhZ05hbWUpICYmIG5vZGUudGV4dENvbnRlbnQpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAhISghZXhjbHVkZWRUYWdzLmluY2x1ZGVzKHRhZ05hbWUpICYmIG5vZGUudGV4dENvbnRlbnQpO1xuICB9XG59XG5cblxuLyoqXG4gKlxuICogQHBhcmFtIHshRWxlbWVudH0gbm9kZVxuICogQHBhcmFtIHshQXJyYXk8c3RyaW5nPn0gYXR0cnNcbiAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gcmVzdWx0XG4gKi9cbmZ1bmN0aW9uIGFwcGVuZE9wZW5UYWcobm9kZSwgYXR0cnMsIHJlc3VsdCkge1xuICByZXN1bHQucHVzaChgPCR7bm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCl9YCk7XG5cbiAgYXR0cnMuZm9yRWFjaChmdW5jdGlvbihhdHRyKSB7XG4gICAgaWYgKG5vZGUuaGFzQXR0cmlidXRlKGF0dHIpKSB7XG4gICAgICByZXN1bHQucHVzaChgICR7YXR0cn09XCIke25vZGUuZ2V0QXR0cmlidXRlKGF0dHIpfVwiYCk7XG4gICAgfVxuICB9KTtcblxuICByZXN1bHQucHVzaCgnPicpO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQge0RvbUZpbmdlcnByaW50fSBmcm9tICcuL3V0aWxzL2RvbS1maW5nZXJwcmludCc7XG5pbXBvcnQge1NlcnZpY2VzfSBmcm9tICcuL3NlcnZpY2VzJztcbmltcG9ydCB7ZGljdH0gZnJvbSAnLi91dGlscy9vYmplY3QuanMnO1xuaW1wb3J0IHtleHBlcmltZW50VG9nZ2xlcywgaXNDYW5hcnl9IGZyb20gJy4vZXhwZXJpbWVudHMnO1xuaW1wb3J0IHtnZXRMZW5ndGhOdW1lcmFsfSBmcm9tICcuL2xheW91dCc7XG5pbXBvcnQge2dldE1vZGVPYmplY3R9IGZyb20gJy4vbW9kZS1vYmplY3QnO1xuaW1wb3J0IHt1cmxzfSBmcm9tICcuL2NvbmZpZyc7XG5cbi8qKlxuICogUHJvZHVjZXMgdGhlIGF0dHJpYnV0ZXMgZm9yIHRoZSBhZCB0ZW1wbGF0ZS5cbiAqIEBwYXJhbSB7IVdpbmRvd30gcGFyZW50V2luZG93XG4gKiBAcGFyYW0geyFBbXBFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gc2VudGluZWxcbiAqIEBwYXJhbSB7IUpzb25PYmplY3Q9fSBhdHRyaWJ1dGVzXG4gKiBAcmV0dXJuIHshSnNvbk9iamVjdH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvbnRleHRNZXRhZGF0YShcbiAgcGFyZW50V2luZG93LCBlbGVtZW50LCBzZW50aW5lbCwgYXR0cmlidXRlcykge1xuICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICBjb25zdCB3aWR0aCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCd3aWR0aCcpO1xuICBjb25zdCBoZWlnaHQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnaGVpZ2h0Jyk7XG4gIGF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzID8gYXR0cmlidXRlcyA6IGRpY3QoKTtcbiAgYXR0cmlidXRlc1snd2lkdGgnXSA9IGdldExlbmd0aE51bWVyYWwod2lkdGgpO1xuICBhdHRyaWJ1dGVzWydoZWlnaHQnXSA9IGdldExlbmd0aE51bWVyYWwoaGVpZ2h0KTtcbiAgaWYgKGVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0aXRsZScpKSB7XG4gICAgYXR0cmlidXRlc1sndGl0bGUnXSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0aXRsZScpO1xuICB9XG4gIGxldCBsb2NhdGlvbkhyZWYgPSBwYXJlbnRXaW5kb3cubG9jYXRpb24uaHJlZjtcbiAgLy8gVGhpcyBpcyByZWFsbHkgb25seSBuZWVkZWQgZm9yIHRlc3RzLCBidXQgd2hhdGV2ZXIuIENoaWxkcmVuXG4gIC8vIHNlZSB1cyBhcyB0aGUgbG9naWNhbCBvcmlnaW4sIHNvIHRlbGxpbmcgdGhlbSB3ZSBhcmUgYWJvdXQ6c3JjZG9jXG4gIC8vIHdpbGwgZmFpbCBhbmNlc3RvciBjaGVja3MuXG4gIGlmIChsb2NhdGlvbkhyZWYgPT0gJ2Fib3V0OnNyY2RvYycpIHtcbiAgICBsb2NhdGlvbkhyZWYgPSBwYXJlbnRXaW5kb3cucGFyZW50LmxvY2F0aW9uLmhyZWY7XG4gIH1cblxuICBjb25zdCBkb2NJbmZvID0gU2VydmljZXMuZG9jdW1lbnRJbmZvRm9yRG9jKGVsZW1lbnQpO1xuICBjb25zdCB2aWV3ZXIgPSBTZXJ2aWNlcy52aWV3ZXJGb3JEb2MoZWxlbWVudCk7XG4gIGNvbnN0IHJlZmVycmVyID0gdmlld2VyLmdldFVuY29uZmlybWVkUmVmZXJyZXJVcmwoKTtcblxuICAvLyBUT0RPKGFsYW5vcm96Y28pOiBSZWRlc2lnbiBkYXRhIHN0cnVjdHVyZSBzbyB0aGF0IGZpZWxkcyBub3QgZXhwb3NlZCBieVxuICAvLyBBbXBDb250ZXh0IGFyZSBub3QgcGFydCBvZiB0aGlzIG9iamVjdC5cbiAgY29uc3QgbGF5b3V0UmVjdCA9IGVsZW1lbnQuZ2V0UGFnZUxheW91dEJveCgpO1xuICBhdHRyaWJ1dGVzWydfY29udGV4dCddID0gZGljdCh7XG4gICAgJ2FtcGNvbnRleHRWZXJzaW9uJzogJyRpbnRlcm5hbFJ1bnRpbWVWZXJzaW9uJCcsXG4gICAgJ2FtcGNvbnRleHRGaWxlcGF0aCc6IHVybHMudGhpcmRQYXJ0eSArICcvJGludGVybmFsUnVudGltZVZlcnNpb24kJyArXG4gICAgICAgICcvYW1wY29udGV4dC12MC5qcycsXG4gICAgJ3NvdXJjZVVybCc6IGRvY0luZm8uc291cmNlVXJsLFxuICAgICdyZWZlcnJlcic6IHJlZmVycmVyLFxuICAgICdjYW5vbmljYWxVcmwnOiBkb2NJbmZvLmNhbm9uaWNhbFVybCxcbiAgICAncGFnZVZpZXdJZCc6IGRvY0luZm8ucGFnZVZpZXdJZCxcbiAgICAnbG9jYXRpb24nOiB7XG4gICAgICAnaHJlZic6IGxvY2F0aW9uSHJlZixcbiAgICB9LFxuICAgICdzdGFydFRpbWUnOiBzdGFydFRpbWUsXG4gICAgJ3RhZ05hbWUnOiBlbGVtZW50LnRhZ05hbWUsXG4gICAgJ21vZGUnOiBnZXRNb2RlT2JqZWN0KCksXG4gICAgJ2NhbmFyeSc6IGlzQ2FuYXJ5KHBhcmVudFdpbmRvdyksXG4gICAgJ2hpZGRlbic6ICF2aWV3ZXIuaXNWaXNpYmxlKCksXG4gICAgJ2luaXRpYWxMYXlvdXRSZWN0JzogbGF5b3V0UmVjdCA/IHtcbiAgICAgICdsZWZ0JzogbGF5b3V0UmVjdC5sZWZ0LFxuICAgICAgJ3RvcCc6IGxheW91dFJlY3QudG9wLFxuICAgICAgJ3dpZHRoJzogbGF5b3V0UmVjdC53aWR0aCxcbiAgICAgICdoZWlnaHQnOiBsYXlvdXRSZWN0LmhlaWdodCxcbiAgICB9IDogbnVsbCxcbiAgICAnaW5pdGlhbEludGVyc2VjdGlvbic6IGVsZW1lbnQuZ2V0SW50ZXJzZWN0aW9uQ2hhbmdlRW50cnkoKSxcbiAgICAnZG9tRmluZ2VycHJpbnQnOiBEb21GaW5nZXJwcmludC5nZW5lcmF0ZShlbGVtZW50KSxcbiAgICAnZXhwZXJpbWVudFRvZ2dsZXMnOiBleHBlcmltZW50VG9nZ2xlcyhwYXJlbnRXaW5kb3cpLFxuICAgICdzZW50aW5lbCc6IHNlbnRpbmVsLFxuICB9KTtcbiAgY29uc3QgYWRTcmMgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnc3JjJyk7XG4gIGlmIChhZFNyYykge1xuICAgIGF0dHJpYnV0ZXNbJ3NyYyddID0gYWRTcmM7XG4gIH1cbiAgcmV0dXJuIGF0dHJpYnV0ZXM7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHthZGRBdHRyaWJ1dGVzVG9FbGVtZW50LCBjbG9zZXN0QnlTZWxlY3Rvcn0gZnJvbSAnLi9kb20nO1xuaW1wb3J0IHtkZXNlcmlhbGl6ZU1lc3NhZ2UsIGlzQW1wTWVzc2FnZX0gZnJvbSAnLi8zcC1mcmFtZS1tZXNzYWdpbmcnO1xuaW1wb3J0IHtkZXZ9IGZyb20gJy4vbG9nJztcbmltcG9ydCB7ZGljdH0gZnJvbSAnLi91dGlscy9vYmplY3QnO1xuaW1wb3J0IHtmaWx0ZXJTcGxpY2V9IGZyb20gJy4vdXRpbHMvYXJyYXknO1xuaW1wb3J0IHtnZXREYXRhfSBmcm9tICcuL2V2ZW50LWhlbHBlcic7XG5pbXBvcnQge3BhcnNlVXJsRGVwcmVjYXRlZH0gZnJvbSAnLi91cmwnO1xuaW1wb3J0IHtzZXRTdHlsZX0gZnJvbSAnLi9zdHlsZSc7XG5pbXBvcnQge3RyeVBhcnNlSnNvbn0gZnJvbSAnLi9qc29uJztcblxuLyoqXG4gKiBTZW50aW5lbCB1c2VkIHRvIGZvcmNlIHVubGlzdGVuaW5nIGFmdGVyIGEgaWZyYW1lIGlzIGRldGFjaGVkLlxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuY29uc3QgVU5MSVNURU5fU0VOVElORUwgPSAndW5saXN0ZW4nO1xuXG4vKipcbiAqIEB0eXBlZGVmIHt7XG4gKiAgIGZyYW1lOiAhRWxlbWVudCxcbiAqICAgZXZlbnRzOiAhT2JqZWN0PHN0cmluZywgIUFycmF5PGZ1bmN0aW9uKCFKc29uT2JqZWN0KT4+XG4gKiB9fVxuICovXG5sZXQgV2luZG93RXZlbnRzRGVmO1xuXG4vKipcbiAqIFJldHVybnMgYSBtYXBwaW5nIGZyb20gYSBVUkwncyBvcmlnaW4gdG8gYW4gYXJyYXkgb2Ygd2luZG93cyBhbmQgdGhlaXJcbiAqIGxpc3RlbkZvciBsaXN0ZW5lcnMuXG4gKiBAcGFyYW0gez9XaW5kb3d9IHBhcmVudFdpbiB0aGUgd2luZG93IHRoYXQgY3JlYXRlZCB0aGUgaWZyYW1lXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfY3JlYXRlIGNyZWF0ZSB0aGUgbWFwcGluZyBpZiBpdCBkb2VzIG5vdCBleGlzdFxuICogQHJldHVybiB7P09iamVjdDxzdHJpbmcsICFBcnJheTwhV2luZG93RXZlbnRzRGVmPj59XG4gKi9cbmZ1bmN0aW9uIGdldExpc3RlbkZvcnMocGFyZW50V2luLCBvcHRfY3JlYXRlKSB7XG4gIGxldCB7bGlzdGVuaW5nRm9yc30gPSBwYXJlbnRXaW47XG5cbiAgaWYgKCFsaXN0ZW5pbmdGb3JzICYmIG9wdF9jcmVhdGUpIHtcbiAgICBsaXN0ZW5pbmdGb3JzID0gcGFyZW50V2luLmxpc3RlbmluZ0ZvcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB9XG4gIHJldHVybiBsaXN0ZW5pbmdGb3JzIHx8IG51bGw7XG59XG5cbi8qKlxuICogUmV0dXJucyBhbiBhcnJheSBvZiBXaW5kb3dFdmVudHNEZWYgdGhhdCBoYXZlIGhhZCBhbnkgbGlzdGVuRm9yIGxpc3RlbmVyc1xuICogcmVnaXN0ZXJlZCBmb3IgdGhpcyBzZW50aW5lbC5cbiAqIEBwYXJhbSB7P1dpbmRvd30gcGFyZW50V2luIHRoZSB3aW5kb3cgdGhhdCBjcmVhdGVkIHRoZSBpZnJhbWVcbiAqIEBwYXJhbSB7c3RyaW5nfSBzZW50aW5lbCB0aGUgc2VudGluZWwgb2YgdGhlIG1lc3NhZ2VcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9jcmVhdGUgY3JlYXRlIHRoZSBhcnJheSBpZiBpdCBkb2VzIG5vdCBleGlzdFxuICogQHJldHVybiB7P0FycmF5PCFXaW5kb3dFdmVudHNEZWY+fVxuICovXG5mdW5jdGlvbiBnZXRMaXN0ZW5Gb3JTZW50aW5lbChwYXJlbnRXaW4sIHNlbnRpbmVsLCBvcHRfY3JlYXRlKSB7XG4gIGNvbnN0IGxpc3RlbmluZ0ZvcnMgPSBnZXRMaXN0ZW5Gb3JzKHBhcmVudFdpbiwgb3B0X2NyZWF0ZSk7XG4gIGlmICghbGlzdGVuaW5nRm9ycykge1xuICAgIHJldHVybiBsaXN0ZW5pbmdGb3JzO1xuICB9XG5cbiAgbGV0IGxpc3RlblNlbnRpbmVsID0gbGlzdGVuaW5nRm9yc1tzZW50aW5lbF07XG4gIGlmICghbGlzdGVuU2VudGluZWwgJiYgb3B0X2NyZWF0ZSkge1xuICAgIGxpc3RlblNlbnRpbmVsID0gbGlzdGVuaW5nRm9yc1tzZW50aW5lbF0gPSBbXTtcbiAgfVxuICByZXR1cm4gbGlzdGVuU2VudGluZWwgfHwgbnVsbDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFuIG1hcHBpbmcgb2YgZXZlbnQgbmFtZXMgdG8gbGlzdGVuRm9yIGxpc3RlbmVycy5cbiAqIEBwYXJhbSB7P1dpbmRvd30gcGFyZW50V2luIHRoZSB3aW5kb3cgdGhhdCBjcmVhdGVkIHRoZSBpZnJhbWVcbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGlmcmFtZSB0aGUgaWZyYW1lIGVsZW1lbnQgd2hvJ3MgY29udGV4dCB3aWxsIHRyaWdnZXIgdGhlXG4gKiAgICAgZXZlbnRcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pczNQIHNldCB0byB0cnVlIGlmIHRoZSBpZnJhbWUgaXMgM3AuXG4gKiBAcmV0dXJuIHs/T2JqZWN0PHN0cmluZywgIUFycmF5PGZ1bmN0aW9uKCFKc29uT2JqZWN0LCAhV2luZG93LCBzdHJpbmcpPj59XG4gKi9cbmZ1bmN0aW9uIGdldE9yQ3JlYXRlTGlzdGVuRm9yRXZlbnRzKHBhcmVudFdpbiwgaWZyYW1lLCBvcHRfaXMzUCkge1xuICBjb25zdCB7b3JpZ2lufSA9IHBhcnNlVXJsRGVwcmVjYXRlZChpZnJhbWUuc3JjKTtcbiAgY29uc3Qgc2VudGluZWwgPSBnZXRTZW50aW5lbF8oaWZyYW1lLCBvcHRfaXMzUCk7XG4gIGNvbnN0IGxpc3RlblNlbnRpbmVsID0gZ2V0TGlzdGVuRm9yU2VudGluZWwocGFyZW50V2luLCBzZW50aW5lbCwgdHJ1ZSk7XG5cbiAgbGV0IHdpbmRvd0V2ZW50cztcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0ZW5TZW50aW5lbC5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHdlID0gbGlzdGVuU2VudGluZWxbaV07XG4gICAgaWYgKHdlLmZyYW1lID09PSBpZnJhbWUpIHtcbiAgICAgIHdpbmRvd0V2ZW50cyA9IHdlO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgaWYgKCF3aW5kb3dFdmVudHMpIHtcbiAgICB3aW5kb3dFdmVudHMgPSB7XG4gICAgICBmcmFtZTogaWZyYW1lLFxuICAgICAgb3JpZ2luLFxuICAgICAgZXZlbnRzOiBPYmplY3QuY3JlYXRlKG51bGwpLFxuICAgIH07XG4gICAgbGlzdGVuU2VudGluZWwucHVzaCh3aW5kb3dFdmVudHMpO1xuICB9XG5cbiAgcmV0dXJuIHdpbmRvd0V2ZW50cy5ldmVudHM7XG59XG5cbi8qKlxuICogUmV0dXJucyBhbiBtYXBwaW5nIG9mIGV2ZW50IG5hbWVzIHRvIGxpc3RlbkZvciBsaXN0ZW5lcnMuXG4gKiBAcGFyYW0gez9XaW5kb3d9IHBhcmVudFdpbiB0aGUgd2luZG93IHRoYXQgY3JlYXRlZCB0aGUgaWZyYW1lXG4gKiBAcGFyYW0ge3N0cmluZ30gc2VudGluZWwgdGhlIHNlbnRpbmVsIG9mIHRoZSBtZXNzYWdlXG4gKiBAcGFyYW0ge3N0cmluZ30gb3JpZ2luIHRoZSBzb3VyY2Ugd2luZG93J3Mgb3JpZ2luXG4gKiBAcGFyYW0gez9XaW5kb3d9IHRyaWdnZXJXaW4gdGhlIHdpbmRvdyB0aGF0IHRyaWdnZXJlZCB0aGUgZXZlbnRcbiAqIEByZXR1cm4gez9PYmplY3Q8c3RyaW5nLCAhQXJyYXk8ZnVuY3Rpb24oIUpzb25PYmplY3QsICFXaW5kb3csIHN0cmluZyk+Pn1cbiAqL1xuZnVuY3Rpb24gZ2V0TGlzdGVuRm9yRXZlbnRzKHBhcmVudFdpbiwgc2VudGluZWwsIG9yaWdpbiwgdHJpZ2dlcldpbikge1xuICBjb25zdCBsaXN0ZW5TZW50aW5lbCA9IGdldExpc3RlbkZvclNlbnRpbmVsKHBhcmVudFdpbiwgc2VudGluZWwpO1xuXG4gIGlmICghbGlzdGVuU2VudGluZWwpIHtcbiAgICByZXR1cm4gbGlzdGVuU2VudGluZWw7XG4gIH1cblxuICAvLyBGaW5kIHRoZSBlbnRyeSBmb3IgdGhlIGZyYW1lLlxuICAvLyBUT0RPKEBuZWtvZG8pOiBBZGQgYSBXZWFrTWFwPFdpbmRvdywgV2luZG93RXZlbnRzRGVmPiBjYWNoZSB0b1xuICAvLyAgICAgc3BlZWQgdXAgdGhpcyBwcm9jZXNzLlxuICBsZXQgd2luZG93RXZlbnRzO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3RlblNlbnRpbmVsLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3Qgd2UgPSBsaXN0ZW5TZW50aW5lbFtpXTtcbiAgICBjb25zdCB7Y29udGVudFdpbmRvd30gPSB3ZS5mcmFtZTtcbiAgICBpZiAoIWNvbnRlbnRXaW5kb3cpIHtcbiAgICAgIHNldFRpbWVvdXQoZHJvcExpc3RlblNlbnRpbmVsLCAwLCBsaXN0ZW5TZW50aW5lbCk7XG4gICAgfSBlbHNlIGlmIChzZW50aW5lbCA9PT0gJ2FtcCcpIHtcbiAgICAgIC8vIEEgbm9uLTNQIGNvZGUgcGF0aCwgb3JpZ2luIG11c3QgbWF0Y2guXG4gICAgICBpZiAod2Uub3JpZ2luID09PSBvcmlnaW4gJiYgY29udGVudFdpbmRvdyA9PSB0cmlnZ2VyV2luKSB7XG4gICAgICAgIHdpbmRvd0V2ZW50cyA9IHdlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRyaWdnZXJXaW4gPT0gY29udGVudFdpbmRvdyB8fFxuICAgICAgICBpc0Rlc2NlbmRhbnRXaW5kb3coY29udGVudFdpbmRvdywgdHJpZ2dlcldpbikpIHtcbiAgICAgIC8vIDNwIGNvZGUgcGF0aCwgd2UgbWF5IGFjY2VwdCBtZXNzYWdlcyBmcm9tIG5lc3RlZCBmcmFtZXMuXG4gICAgICB3aW5kb3dFdmVudHMgPSB3ZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB3aW5kb3dFdmVudHMgPyB3aW5kb3dFdmVudHMuZXZlbnRzIDogbnVsbDtcbn1cblxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciBvbmUgd2luZG93IGlzIGEgZGVzY2VuZGFudCBvZiBhbm90aGVyIGJ5IGNsaW1iaW5nXG4gKiB0aGUgcGFyZW50IGNoYWluLlxuICogQHBhcmFtIHs/V2luZG93fSBhbmNlc3RvciBwb3RlbnRpYWwgYW5jZXN0b3Igd2luZG93XG4gKiBAcGFyYW0gez9XaW5kb3d9IGRlc2NlbmRhbnQgcG90ZW50aWFsIGRlc2NlbmRhbnQgd2luZG93XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc0Rlc2NlbmRhbnRXaW5kb3coYW5jZXN0b3IsIGRlc2NlbmRhbnQpIHtcbiAgZm9yIChsZXQgd2luID0gZGVzY2VuZGFudDsgd2luICYmIHdpbiAhPSB3aW4ucGFyZW50OyB3aW4gPSB3aW4ucGFyZW50KSB7XG4gICAgaWYgKHdpbiA9PSBhbmNlc3Rvcikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGFueSBsaXN0ZW5Gb3JzIHJlZ2lzdGVkIG9uIGxpc3RlblNlbnRpbmVsIHRoYXQgZG8gbm90IGhhdmVcbiAqIGEgY29udGVudFdpbmRvdyAodGhlIGZyYW1lIHdhcyByZW1vdmVkIGZyb20gdGhlIERPTSB0cmVlKS5cbiAqIEBwYXJhbSB7IUFycmF5PCFXaW5kb3dFdmVudHNEZWY+fSBsaXN0ZW5TZW50aW5lbFxuICovXG5mdW5jdGlvbiBkcm9wTGlzdGVuU2VudGluZWwobGlzdGVuU2VudGluZWwpIHtcbiAgY29uc3Qgbm9vcERhdGEgPSBkaWN0KHsnc2VudGluZWwnOiBVTkxJU1RFTl9TRU5USU5FTH0pO1xuXG4gIGZvciAobGV0IGkgPSBsaXN0ZW5TZW50aW5lbC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIGNvbnN0IHdpbmRvd0V2ZW50cyA9IGxpc3RlblNlbnRpbmVsW2ldO1xuXG4gICAgaWYgKCF3aW5kb3dFdmVudHMuZnJhbWUuY29udGVudFdpbmRvdykge1xuICAgICAgbGlzdGVuU2VudGluZWwuc3BsaWNlKGksIDEpO1xuXG4gICAgICBjb25zdCB7ZXZlbnRzfSA9IHdpbmRvd0V2ZW50cztcbiAgICAgIGZvciAoY29uc3QgbmFtZSBpbiBldmVudHMpIHtcbiAgICAgICAgLy8gU3BsaWNlIGhlcmUsIHNvIHRoYXQgZWFjaCB1bmxpc3RlbiBkb2VzIG5vdCBzaGlmdCB0aGUgYXJyYXlcbiAgICAgICAgZXZlbnRzW25hbWVdLnNwbGljZSgwLCBJbmZpbml0eSkuZm9yRWFjaChldmVudCA9PiB7XG4gICAgICAgICAgZXZlbnQobm9vcERhdGEpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgdGhlIGdsb2JhbCBsaXN0ZW5Gb3IgZXZlbnQgbGlzdGVuZXIgaWYgaXQgaGFzIHlldCB0byBiZS5cbiAqIEBwYXJhbSB7P1dpbmRvd30gcGFyZW50V2luXG4gKi9cbmZ1bmN0aW9uIHJlZ2lzdGVyR2xvYmFsTGlzdGVuZXJJZk5lZWRlZChwYXJlbnRXaW4pIHtcbiAgaWYgKHBhcmVudFdpbi5saXN0ZW5pbmdGb3JzKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGxpc3RlbkZvckxpc3RlbmVyID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBpZiAoIWdldERhdGEoZXZlbnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGRhdGEgPSBwYXJzZUlmTmVlZGVkKGdldERhdGEoZXZlbnQpKTtcbiAgICBpZiAoIWRhdGEgfHwgIWRhdGFbJ3NlbnRpbmVsJ10pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBsaXN0ZW5Gb3JFdmVudHMgPSBnZXRMaXN0ZW5Gb3JFdmVudHMoXG4gICAgICAgIHBhcmVudFdpbixcbiAgICAgICAgZGF0YVsnc2VudGluZWwnXSxcbiAgICAgICAgZXZlbnQub3JpZ2luLFxuICAgICAgICBldmVudC5zb3VyY2VcbiAgICApO1xuICAgIGlmICghbGlzdGVuRm9yRXZlbnRzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGxpc3RlbmVycyA9IGxpc3RlbkZvckV2ZW50c1tkYXRhWyd0eXBlJ11dO1xuICAgIGlmICghbGlzdGVuZXJzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gV2Ugc2xpY2UgdG8gYXZvaWQgaXNzdWVzIHdpdGggYWRkaW5nIGFub3RoZXIgbGlzdGVuZXIgb3IgdW5saXN0ZW5pbmdcbiAgICAvLyBkdXJpbmcgaXRlcmF0aW9uLiBXZSBjb3VsZCBtb3ZlIHRvIGEgRG91Ymx5IExpbmtlZCBMaXN0IHdpdGhcbiAgICAvLyBiYWNrdHJhY2tpbmcsIGJ1dCB0aGF0J3Mgb3Zlcmx5IGNvbXBsaWNhdGVkLlxuICAgIGxpc3RlbmVycyA9IGxpc3RlbmVycy5zbGljZSgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBsaXN0ZW5lciA9IGxpc3RlbmVyc1tpXTtcbiAgICAgIGxpc3RlbmVyKGRhdGEsIGV2ZW50LnNvdXJjZSwgZXZlbnQub3JpZ2luKTtcbiAgICB9XG4gIH07XG5cbiAgcGFyZW50V2luLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBsaXN0ZW5Gb3JMaXN0ZW5lcik7XG59XG5cbi8qKlxuICogQWxsb3dzIGxpc3RlbmluZyBmb3IgbWVzc2FnZSBmcm9tIHRoZSBpZnJhbWUuIFJldHVybnMgYW4gdW5saXN0ZW5cbiAqIGZ1bmN0aW9uIHRvIHJlbW92ZSB0aGUgbGlzdGVuZXIuXG4gKlxuICogQHBhcmFtIHs/RWxlbWVudH0gaWZyYW1lXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZU9mTWVzc2FnZVxuICogQHBhcmFtIHs/ZnVuY3Rpb24oIUpzb25PYmplY3QsICFXaW5kb3csIHN0cmluZyl9IGNhbGxiYWNrIENhbGxlZCB3aGVuIGFcbiAqICAgICBtZXNzYWdlIG9mIHRoaXMgdHlwZSBhcnJpdmVzIGZvciB0aGlzIGlmcmFtZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pczNQIHNldCB0byB0cnVlIGlmIHRoZSBpZnJhbWUgaXMgM3AuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaW5jbHVkaW5nTmVzdGVkV2luZG93cyBzZXQgdG8gdHJ1ZSBpZiBhIG1lc3NhZ2VzIGZyb21cbiAqICAgICBuZXN0ZWQgZnJhbWVzIHNob3VsZCBhbHNvIGJlIGFjY2VwdGVkLlxuICogQHJldHVybiB7IVVubGlzdGVuRGVmfVxuICovXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuRm9yKFxuICBpZnJhbWUsIHR5cGVPZk1lc3NhZ2UsIGNhbGxiYWNrLCBvcHRfaXMzUCwgb3B0X2luY2x1ZGluZ05lc3RlZFdpbmRvd3MpIHtcbiAgZGV2KCkuYXNzZXJ0KGlmcmFtZS5zcmMsICdvbmx5IGlmcmFtZXMgd2l0aCBzcmMgc3VwcG9ydGVkJyk7XG4gIGRldigpLmFzc2VydCghaWZyYW1lLnBhcmVudE5vZGUsICdjYW5ub3QgcmVnaXN0ZXIgZXZlbnRzIG9uIGFuIGF0dGFjaGVkICcgK1xuICAgICAgJ2lmcmFtZS4gSXQgd2lsbCBjYXVzZSBoYWlyLXB1bGxpbmcgYnVncyBsaWtlICMyOTQyJyk7XG4gIGRldigpLmFzc2VydChjYWxsYmFjayk7XG4gIGNvbnN0IHBhcmVudFdpbiA9IGlmcmFtZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O1xuXG4gIHJlZ2lzdGVyR2xvYmFsTGlzdGVuZXJJZk5lZWRlZChwYXJlbnRXaW4pO1xuXG4gIGNvbnN0IGxpc3RlbkZvckV2ZW50cyA9IGdldE9yQ3JlYXRlTGlzdGVuRm9yRXZlbnRzKFxuICAgICAgcGFyZW50V2luLFxuICAgICAgaWZyYW1lLFxuICAgICAgb3B0X2lzM1BcbiAgKTtcblxuXG4gIGxldCBldmVudHMgPSBsaXN0ZW5Gb3JFdmVudHNbdHlwZU9mTWVzc2FnZV0gfHxcbiAgICAobGlzdGVuRm9yRXZlbnRzW3R5cGVPZk1lc3NhZ2VdID0gW10pO1xuXG4gIGxldCB1bmxpc3RlbjtcbiAgbGV0IGxpc3RlbmVyID0gZnVuY3Rpb24oZGF0YSwgc291cmNlLCBvcmlnaW4pIHtcbiAgICAvLyBFeGNsdWRlIG5lc3RlZCBmcmFtZXMgaWYgbmVjZXNzYXJ5LlxuICAgIC8vIE5vdGUgdGhhdCB0aGUgc291cmNlIHdhcyBhbHJlYWR5IHZlcmlmaWVkIHRvIGJlIGVpdGhlciB0aGUgY29udGVudFdpbmRvd1xuICAgIC8vIG9mIHRoZSBpZnJhbWUgaXRzZWxmIG9yIGEgZGVzY2VuZGFudCB3aW5kb3cgd2l0aGluIGl0LlxuICAgIGlmICghb3B0X2luY2x1ZGluZ05lc3RlZFdpbmRvd3MgJiYgc291cmNlICE9IGlmcmFtZS5jb250ZW50V2luZG93KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGRhdGEuc2VudGluZWwgPT0gVU5MSVNURU5fU0VOVElORUwpIHtcbiAgICAgIHVubGlzdGVuKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNhbGxiYWNrKGRhdGEsIHNvdXJjZSwgb3JpZ2luKTtcbiAgfTtcblxuICBldmVudHMucHVzaChsaXN0ZW5lcik7XG5cbiAgcmV0dXJuIHVubGlzdGVuID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKGxpc3RlbmVyKSB7XG4gICAgICBjb25zdCBpbmRleCA9IGV2ZW50cy5pbmRleE9mKGxpc3RlbmVyKTtcbiAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgIGV2ZW50cy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgfVxuICAgICAgLy8gTWFrZSBzdXJlIHJlZmVyZW5jZXMgdG8gdGhlIHVubGlzdGVuIGZ1bmN0aW9uIGRvIG5vdCBrZWVwXG4gICAgICAvLyBhbGl2ZSB0b28gbXVjaC5cbiAgICAgIGxpc3RlbmVyID0gbnVsbDtcbiAgICAgIGV2ZW50cyA9IG51bGw7XG4gICAgICBjYWxsYmFjayA9IG51bGw7XG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiBvbmUgb2YgZ2l2ZW4gbWVzc2FnZXMgaGFzIGJlZW4gb2JzZXJ2ZWRcbiAqIGZvciB0aGUgZmlyc3QgdGltZS4gQW5kIHJlbW92ZSBsaXN0ZW5lciBmb3IgYWxsIG90aGVyIG1lc3NhZ2VzLlxuICogQHBhcmFtIHshRWxlbWVudH0gaWZyYW1lXG4gKiBAcGFyYW0ge3N0cmluZ3whQXJyYXk8c3RyaW5nPn0gdHlwZU9mTWVzc2FnZXNcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pczNQXG4gKiBAcmV0dXJuIHshUHJvbWlzZTwhe2RhdGE6ICFKc29uT2JqZWN0LCBzb3VyY2U6ICFXaW5kb3csIG9yaWdpbjogc3RyaW5nfT59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW5Gb3JPbmNlUHJvbWlzZShpZnJhbWUsIHR5cGVPZk1lc3NhZ2VzLCBvcHRfaXMzUCkge1xuICBjb25zdCB1bmxpc3Rlbkxpc3QgPSBbXTtcbiAgaWYgKHR5cGVvZiB0eXBlT2ZNZXNzYWdlcyA9PSAnc3RyaW5nJykge1xuICAgIHR5cGVPZk1lc3NhZ2VzID0gW3R5cGVPZk1lc3NhZ2VzXTtcbiAgfVxuICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0eXBlT2ZNZXNzYWdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IHR5cGVPZk1lc3NhZ2VzW2ldO1xuICAgICAgY29uc3QgdW5saXN0ZW4gPSBsaXN0ZW5Gb3IoaWZyYW1lLCBtZXNzYWdlLCAoZGF0YSwgc291cmNlLCBvcmlnaW4pID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB1bmxpc3Rlbkxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB1bmxpc3Rlbkxpc3RbaV0oKTtcbiAgICAgICAgfVxuICAgICAgICByZXNvbHZlKHtkYXRhLCBzb3VyY2UsIG9yaWdpbn0pO1xuICAgICAgfSwgb3B0X2lzM1ApO1xuICAgICAgdW5saXN0ZW5MaXN0LnB1c2godW5saXN0ZW4pO1xuICAgIH1cbiAgfSk7XG59XG5cbi8qKlxuICogUG9zdHMgYSBtZXNzYWdlIHRvIHRoZSBpZnJhbWUuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBpZnJhbWUgVGhlIGlmcmFtZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFR5cGUgb2YgdGhlIG1lc3NhZ2UuXG4gKiBAcGFyYW0geyFKc29uT2JqZWN0fSBvYmplY3QgTWVzc2FnZSBwYXlsb2FkLlxuICogQHBhcmFtIHtzdHJpbmd9IHRhcmdldE9yaWdpbiBvcmlnaW4gb2YgdGhlIHRhcmdldC5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pczNQIHNldCB0byB0cnVlIGlmIHRoZSBpZnJhbWUgaXMgM3AuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwb3N0TWVzc2FnZShpZnJhbWUsIHR5cGUsIG9iamVjdCwgdGFyZ2V0T3JpZ2luLCBvcHRfaXMzUCkge1xuICBwb3N0TWVzc2FnZVRvV2luZG93cyhpZnJhbWUsXG4gICAgICBbe3dpbjogaWZyYW1lLmNvbnRlbnRXaW5kb3csIG9yaWdpbjogdGFyZ2V0T3JpZ2lufV0sIHR5cGUsIG9iamVjdCxcbiAgICAgIG9wdF9pczNQKTtcbn1cblxuLyoqXG4gKiBQb3N0cyBhbiBpZGVudGljYWwgbWVzc2FnZSB0byBtdWx0aXBsZSB0YXJnZXQgd2luZG93cyB3aXRoIHRoZSBzYW1lXG4gKiBzZW50aW5lbC5cbiAqIFRoZSBtZXNzYWdlIGlzIHNlcmlhbGl6ZWQgb25seSBvbmNlLlxuICogQHBhcmFtIHshRWxlbWVudH0gaWZyYW1lIFRoZSBpZnJhbWUuXG4gKiBAcGFyYW0geyFBcnJheTx7d2luOiAhV2luZG93LCBvcmlnaW46IHN0cmluZ30+fSB0YXJnZXRzIHRvIHNlbmQgdGhlIG1lc3NhZ2VcbiAqICAgICB0bywgcGFpcnMgb2Ygd2luZG93IGFuZCBpdHMgb3JpZ2luLlxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVHlwZSBvZiB0aGUgbWVzc2FnZS5cbiAqIEBwYXJhbSB7IUpzb25PYmplY3R9IG9iamVjdCBNZXNzYWdlIHBheWxvYWQuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaXMzUCBzZXQgdG8gdHJ1ZSBpZiB0aGUgaWZyYW1lIGlzIDNwLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcG9zdE1lc3NhZ2VUb1dpbmRvd3MoaWZyYW1lLCB0YXJnZXRzLCB0eXBlLCBvYmplY3QsIG9wdF9pczNQKSB7XG4gIGlmICghaWZyYW1lLmNvbnRlbnRXaW5kb3cpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgb2JqZWN0Wyd0eXBlJ10gPSB0eXBlO1xuICBvYmplY3RbJ3NlbnRpbmVsJ10gPSBnZXRTZW50aW5lbF8oaWZyYW1lLCBvcHRfaXMzUCk7XG4gIGxldCBwYXlsb2FkID0gb2JqZWN0O1xuICBpZiAob3B0X2lzM1ApIHtcbiAgICAvLyBTZXJpYWxpemUgb3Vyc2VsdmVzIGJlY2F1c2UgdGhhdCBpcyBtdWNoIGZhc3RlciBpbiBDaHJvbWUuXG4gICAgcGF5bG9hZCA9ICdhbXAtJyArIEpTT04uc3RyaW5naWZ5KG9iamVjdCk7XG4gIH1cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0YXJnZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gdGFyZ2V0c1tpXTtcbiAgICB0YXJnZXQud2luLi8qT0sqL3Bvc3RNZXNzYWdlKHBheWxvYWQsIHRhcmdldC5vcmlnaW4pO1xuICB9XG59XG5cbi8qKlxuICogR2V0cyB0aGUgc2VudGluZWwgc3RyaW5nLlxuICogQHBhcmFtIHshRWxlbWVudH0gaWZyYW1lIFRoZSBpZnJhbWUuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaXMzUCBzZXQgdG8gdHJ1ZSBpZiB0aGUgaWZyYW1lIGlzIDNwLlxuICogQHJldHVybiB7c3RyaW5nfSBTZW50aW5lbCBzdHJpbmcuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBnZXRTZW50aW5lbF8oaWZyYW1lLCBvcHRfaXMzUCkge1xuICByZXR1cm4gb3B0X2lzM1AgPyBpZnJhbWUuZ2V0QXR0cmlidXRlKCdkYXRhLWFtcC0zcC1zZW50aW5lbCcpIDogJ2FtcCc7XG59XG5cbi8qKlxuICogSlNPTiBwYXJzZXMgZXZlbnQuZGF0YSBpZiBpdCBuZWVkcyB0byBiZVxuICogQHBhcmFtIHsqfSBkYXRhXG4gKiBAcmV0dXJuIHs/SnNvbk9iamVjdH0gb2JqZWN0IG1lc3NhZ2VcbiAqIEBwcml2YXRlXG4gKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSWZOZWVkZWQoZGF0YSkge1xuICBpZiAodHlwZW9mIGRhdGEgPT0gJ3N0cmluZycpIHtcbiAgICBpZiAoZGF0YS5jaGFyQXQoMCkgPT0gJ3snKSB7XG4gICAgICBkYXRhID0gdHJ5UGFyc2VKc29uKGRhdGEsIGUgPT4ge1xuICAgICAgICBkZXYoKS53YXJuKCdJRlJBTUUtSEVMUEVSJyxcbiAgICAgICAgICAgICdQb3N0bWVzc2FnZSBjb3VsZCBub3QgYmUgcGFyc2VkLiAnICtcbiAgICAgICAgICAgICdJcyBpdCBpbiBhIHZhbGlkIEpTT04gZm9ybWF0PycsIGUpO1xuICAgICAgfSkgfHwgbnVsbDtcbiAgICB9IGVsc2UgaWYgKGlzQW1wTWVzc2FnZShkYXRhKSkge1xuICAgICAgZGF0YSA9IGRlc2VyaWFsaXplTWVzc2FnZShkYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGF0YSA9IG51bGw7XG4gICAgfVxuICB9XG4gIHJldHVybiAvKiogQHR5cGUgez9Kc29uT2JqZWN0fSAqLyAoZGF0YSk7XG59XG5cblxuXG4vKipcbiAqIE1hbmFnZXMgYSBwb3N0TWVzc2FnZSBBUEkgZm9yIGFuIGlmcmFtZSB3aXRoIGEgc3Vic2NyaXB0aW9uIG1lc3NhZ2UgYW5kXG4gKiBhIHdheSB0byBicm9hZGNhc3QgbWVzc2FnZXMgdG8gYWxsIHN1YnNjcmliZWQgd2luZG93cywgd2hpY2hcbiAqIGluIHR1cm4gbXVzdCBhbGwgYmUgZGVzY2VuZGFudHMgb2YgdGhlIGNvbnRlbnRXaW5kb3cgb2YgdGhlIGlmcmFtZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFN1YnNjcmlwdGlvbkFwaSB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fSBpZnJhbWUgVGhlIGlmcmFtZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVHlwZSBvZiB0aGUgc3Vic2NyaXB0aW9uIG1lc3NhZ2UuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXMzcCBzZXQgdG8gdHJ1ZSBpZiB0aGUgaWZyYW1lIGlzIDNwLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFKc29uT2JqZWN0LCAhV2luZG93LCBzdHJpbmcpfSByZXF1ZXN0Q2FsbGJhY2sgQ2FsbGJhY2tcbiAgICogICAgIGludm9rZWQgd2hlbmV2ZXIgYSBuZXcgd2luZG93IHN1YnNjcmliZXMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihpZnJhbWUsIHR5cGUsIGlzM3AsIHJlcXVlc3RDYWxsYmFjaykge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFFbGVtZW50fSAqL1xuICAgIHRoaXMuaWZyYW1lXyA9IGlmcmFtZTtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtib29sZWFufSAqL1xuICAgIHRoaXMuaXMzcF8gPSBpczNwO1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFBcnJheTx7d2luOiAhV2luZG93LCBvcmlnaW46IHN0cmluZ30+fSAqL1xuICAgIHRoaXMuY2xpZW50V2luZG93c18gPSBbXTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFVbmxpc3RlbkRlZn0gKi9cbiAgICB0aGlzLnVubGlzdGVuXyA9IGxpc3RlbkZvcih0aGlzLmlmcmFtZV8sIHR5cGUsIChkYXRhLCBzb3VyY2UsIG9yaWdpbikgPT4ge1xuICAgICAgLy8gVGhpcyBtZXNzYWdlIG1pZ2h0IGJlIGZyb20gYW55IHdpbmRvdyB3aXRoaW4gdGhlIGlmcmFtZSwgd2UgbmVlZFxuICAgICAgLy8gdG8ga2VlcCB0cmFjayBvZiB3aGljaCB3aW5kb3dzIHdhbnQgdG8gYmUgc2VudCB1cGRhdGVzLlxuICAgICAgaWYgKCF0aGlzLmNsaWVudFdpbmRvd3NfLnNvbWUoZW50cnkgPT4gZW50cnkud2luID09IHNvdXJjZSkpIHtcbiAgICAgICAgdGhpcy5jbGllbnRXaW5kb3dzXy5wdXNoKHt3aW46IHNvdXJjZSwgb3JpZ2lufSk7XG4gICAgICB9XG4gICAgICByZXF1ZXN0Q2FsbGJhY2soZGF0YSwgc291cmNlLCBvcmlnaW4pO1xuICAgIH0sIHRoaXMuaXMzcF8sXG4gICAgICAgIC8vIEZvciAzUCBmcmFtZXMgd2UgYWxzbyBhbGxvdyBuZXN0ZWQgZnJhbWVzIHdpdGhpbiB0aGVtIHRvIHN1YnNjcmliZS4uXG4gICAgdGhpcy5pczNwXyAvKiBvcHRfaW5jbHVkaW5nTmVzdGVkV2luZG93cyAqLyk7XG4gIH1cblxuICAvKipcbiAgICogU2VuZHMgYSBtZXNzYWdlIHRvIGFsbCBzdWJzY3JpYmVkIHdpbmRvd3MuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFR5cGUgb2YgdGhlIG1lc3NhZ2UuXG4gICAqIEBwYXJhbSB7IUpzb25PYmplY3R9IGRhdGEgTWVzc2FnZSBwYXlsb2FkLlxuICAgKi9cbiAgc2VuZCh0eXBlLCBkYXRhKSB7XG4gICAgLy8gUmVtb3ZlIGNsaWVudHMgdGhhdCBoYXZlIGJlZW4gcmVtb3ZlZCBmcm9tIHRoZSBET00uXG4gICAgZmlsdGVyU3BsaWNlKHRoaXMuY2xpZW50V2luZG93c18sIGNsaWVudCA9PiAhIWNsaWVudC53aW4ucGFyZW50KTtcbiAgICBwb3N0TWVzc2FnZVRvV2luZG93cyhcbiAgICAgICAgdGhpcy5pZnJhbWVfLFxuICAgICAgICB0aGlzLmNsaWVudFdpbmRvd3NfLFxuICAgICAgICB0eXBlLFxuICAgICAgICBkYXRhLFxuICAgICAgICB0aGlzLmlzM3BfKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXN0cm95cyBpZnJhbWUuXG4gICAqL1xuICBkZXN0cm95KCkge1xuICAgIHRoaXMudW5saXN0ZW5fKCk7XG4gICAgdGhpcy5jbGllbnRXaW5kb3dzXy5sZW5ndGggPSAwO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxvb2tzTGlrZVRyYWNraW5nSWZyYW1lKGVsZW1lbnQpIHtcbiAgY29uc3QgYm94ID0gZWxlbWVudC5nZXRMYXlvdXRCb3goKTtcbiAgLy8gVGhpcyBoZXVyaXN0aWMgaXMgc3ViamVjdCB0byBjaGFuZ2UuXG4gIGlmIChib3gud2lkdGggPiAxMCB8fCBib3guaGVpZ2h0ID4gMTApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy8gSWZyYW1lIGlzIG5vdCB0cmFja2luZyBpZnJhbWUgaWYgb3BlbiB3aXRoIHVzZXIgaW50ZXJhY3Rpb25cbiAgcmV0dXJuICFjbG9zZXN0QnlTZWxlY3RvcihlbGVtZW50LCAnLmktYW1waHRtbC1vdmVybGF5Jyk7XG59XG5cbi8vIE1vc3QgY29tbW9uIGFkIHNpemVzXG4vLyBBcnJheSBvZiBbd2lkdGgsIGhlaWdodF0gcGFpcnMuXG5jb25zdCBhZFNpemVzID0gW1xuICBbMzAwLCAyNTBdLFxuICBbMzIwLCA1MF0sXG4gIFszMDAsIDUwXSxcbiAgWzMyMCwgMTAwXSxcbl07XG5cbi8qKlxuICogR3Vlc3Mgd2hldGhlciB0aGlzIGVsZW1lbnQgbWlnaHQgYmUgYW4gYWQuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50IEFuIGFtcC1pZnJhbWUgZWxlbWVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQWRMaWtlKGVsZW1lbnQpIHtcbiAgY29uc3QgYm94ID0gZWxlbWVudC5nZXRMYXlvdXRCb3goKTtcbiAgY29uc3Qge2hlaWdodCwgd2lkdGh9ID0gYm94O1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGFkU2l6ZXMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCByZWZXaWR0aCA9IGFkU2l6ZXNbaV1bMF07XG4gICAgY29uc3QgcmVmSGVpZ2h0ID0gYWRTaXplc1tpXVsxXTtcbiAgICBpZiAocmVmSGVpZ2h0ID4gaGVpZ2h0KSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKHJlZldpZHRoID4gd2lkdGgpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICAvLyBGdXp6eSBtYXRjaGluZyB0byBhY2NvdW50IGZvciBwYWRkaW5nLlxuICAgIGlmIChoZWlnaHQgLSByZWZIZWlnaHQgPD0gMjAgJiYgd2lkdGggLSByZWZXaWR0aCA8PSAyMCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyFFbGVtZW50fSBpZnJhbWVcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXNhYmxlU2Nyb2xsaW5nT25JZnJhbWUoaWZyYW1lKSB7XG4gIGFkZEF0dHJpYnV0ZXNUb0VsZW1lbnQoaWZyYW1lLCBkaWN0KHsnc2Nyb2xsaW5nJzogJ25vJ30pKTtcblxuICAvLyBUaGlzIHNob3VsZG4ndCB3b3JrLCBidXQgaXQgZG9lcyBvbiBGaXJlZm94LlxuICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTU0OTQ5NjlcbiAgc2V0U3R5bGUoaWZyYW1lLCAnb3ZlcmZsb3cnLCAnaGlkZGVuJyk7XG5cbiAgcmV0dXJuIGlmcmFtZTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1NlcnZpY2VzfSBmcm9tICcuL3NlcnZpY2VzJztcbmltcG9ydCB7U3Vic2NyaXB0aW9uQXBpfSBmcm9tICcuL2lmcmFtZS1oZWxwZXInO1xuaW1wb3J0IHtkZXZ9IGZyb20gJy4vbG9nJztcbmltcG9ydCB7ZGljdH0gZnJvbSAnLi91dGlscy9vYmplY3QnO1xuaW1wb3J0IHtsYXlvdXRSZWN0THR3aCwgbW92ZUxheW91dFJlY3QsIHJlY3RJbnRlcnNlY3Rpb259IGZyb20gJy4vbGF5b3V0LXJlY3QnO1xuXG4vKipcbiAqIFRoZSBzdHJ1Y3R1cmUgdGhhdCBkZWZpbmVzIHRoZSByZWN0YW5nbGUgdXNlZCBpbiBpbnRlcnNlY3Rpb24gb2JzZXJ2ZXJzLlxuICpcbiAqIEB0eXBlZGVmIHt7XG4gKiAgIHRvcDogbnVtYmVyLFxuICogICBib3R0b206IG51bWJlcixcbiAqICAgbGVmdDogbnVtYmVyLFxuICogICByaWdodDogbnVtYmVyLFxuICogICB3aWR0aDogbnVtYmVyLFxuICogICBoZWlnaHQ6IG51bWJlcixcbiAqICAgeDogbnVtYmVyLFxuICogICB5OiBudW1iZXIsXG4gKiB9fVxuICovXG5leHBvcnQgbGV0IERPTVJlY3Q7XG5cbi8qKlxuICogUmV0dXJucyB0aGUgcmF0aW8gb2YgdGhlIHNtYWxsZXIgYm94J3MgYXJlYSB0byB0aGUgbGFyZ2VyIGJveCdzIGFyZWEuXG4gKiBAcGFyYW0geyEuL2xheW91dC1yZWN0LkxheW91dFJlY3REZWZ9IHNtYWxsZXJcbiAqIEBwYXJhbSB7IS4vbGF5b3V0LXJlY3QuTGF5b3V0UmVjdERlZn0gbGFyZ2VyXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cbmZ1bmN0aW9uIGludGVyc2VjdGlvblJhdGlvKHNtYWxsZXIsIGxhcmdlcikge1xuICByZXR1cm4gKHNtYWxsZXIud2lkdGggKiBzbWFsbGVyLmhlaWdodCkgLyAobGFyZ2VyLndpZHRoICogbGFyZ2VyLmhlaWdodCk7XG59XG5cbi8qKlxuICogUHJvZHVjZXMgYSBjaGFuZ2UgZW50cnkgZm9yIHRoYXQgc2hvdWxkIGJlIGNvbXBhdGlibGUgd2l0aFxuICogSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeS5cbiAqXG4gKiBNdXRhdGVzIHBhc3NlZCBpbiByb290Qm91bmRzIHRvIGhhdmUgeCBhbmQgeSBhY2NvcmRpbmcgdG8gc3BlYy5cbiAqXG4gKiBAcGFyYW0geyEuL2xheW91dC1yZWN0LkxheW91dFJlY3REZWZ9IGVsZW1lbnQgVGhlIGVsZW1lbnQncyBsYXlvdXQgcmVjdGFuZ2xlXG4gKiBAcGFyYW0gez8uL2xheW91dC1yZWN0LkxheW91dFJlY3REZWZ9IG93bmVyIFRoZSBvd25lcidzIGxheW91dCByZWN0LCBpZlxuICogICAgIHRoZXJlIGlzIGFuIG93bmVyLlxuICogQHBhcmFtIHshLi9sYXlvdXQtcmVjdC5MYXlvdXRSZWN0RGVmfSB2aWV3cG9ydCBUaGUgdmlld3BvcnQncyBsYXlvdXQgcmVjdC5cbiAqIEByZXR1cm4geyFJbnRlcnNlY3Rpb25PYnNlcnZlckVudHJ5fSBBIGNoYW5nZSBlbnRyeS5cbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbnRlcnNlY3Rpb25DaGFuZ2VFbnRyeShlbGVtZW50LCBvd25lciwgdmlld3BvcnQpIHtcbiAgZGV2KCkuYXNzZXJ0KGVsZW1lbnQud2lkdGggPj0gMCAmJiBlbGVtZW50LmhlaWdodCA+PSAwLFxuICAgICAgJ05lZ2F0aXZlIGRpbWVuc2lvbnMgaW4gZWxlbWVudC4nKTtcbiAgLy8gQnVpbGRpbmcgYW4gSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeS5cblxuICBsZXQgaW50ZXJzZWN0aW9uUmVjdCA9IGVsZW1lbnQ7XG4gIGlmIChvd25lcikge1xuICAgIGludGVyc2VjdGlvblJlY3QgPSByZWN0SW50ZXJzZWN0aW9uKG93bmVyLCBlbGVtZW50KSB8fFxuICAgICAgICAvLyBObyBpbnRlcnNlY3Rpb24uXG4gICAgICAgIGxheW91dFJlY3RMdHdoKDAsIDAsIDAsIDApO1xuICB9XG4gIGludGVyc2VjdGlvblJlY3QgPSByZWN0SW50ZXJzZWN0aW9uKHZpZXdwb3J0LCBpbnRlcnNlY3Rpb25SZWN0KSB8fFxuICAgICAgLy8gTm8gaW50ZXJzZWN0aW9uLlxuICAgICAgbGF5b3V0UmVjdEx0d2goMCwgMCwgMCwgMCk7XG5cbiAgLy8gVGhlIGVsZW1lbnQgaXMgcmVsYXRpdmUgdG8gKDAsIDApLCB3aGlsZSB0aGUgdmlld3BvcnQgbW92ZXMuIFNvLCB3ZSBtdXN0XG4gIC8vIGFkanVzdC5cbiAgY29uc3QgYm91bmRpbmdDbGllbnRSZWN0ID0gbW92ZUxheW91dFJlY3QoZWxlbWVudCwgLXZpZXdwb3J0LmxlZnQsXG4gICAgICAtdmlld3BvcnQudG9wKTtcbiAgaW50ZXJzZWN0aW9uUmVjdCA9IG1vdmVMYXlvdXRSZWN0KGludGVyc2VjdGlvblJlY3QsIC12aWV3cG9ydC5sZWZ0LFxuICAgICAgLXZpZXdwb3J0LnRvcCk7XG4gIC8vIE5vdywgbW92ZSB0aGUgdmlld3BvcnQgdG8gKDAsIDApXG4gIGNvbnN0IHJvb3RCb3VuZHMgPSBtb3ZlTGF5b3V0UmVjdCh2aWV3cG9ydCwgLXZpZXdwb3J0LmxlZnQsIC12aWV3cG9ydC50b3ApO1xuXG4gIHJldHVybiAvKiogQHR5cGUgeyFJbnRlcnNlY3Rpb25PYnNlcnZlckVudHJ5fSAqLyAoe1xuICAgIHRpbWU6IERhdGUubm93KCksXG4gICAgcm9vdEJvdW5kcyxcbiAgICBib3VuZGluZ0NsaWVudFJlY3QsXG4gICAgaW50ZXJzZWN0aW9uUmVjdCxcbiAgICBpbnRlcnNlY3Rpb25SYXRpbzogaW50ZXJzZWN0aW9uUmF0aW8oaW50ZXJzZWN0aW9uUmVjdCwgZWxlbWVudCksXG4gIH0pO1xufVxuXG4vKipcbiAqIFRoZSBJbnRlcnNlY3Rpb25PYnNlcnZlciBjbGFzcyBsZXRzIGFueSBlbGVtZW50IHNoYXJlIGl0cyB2aWV3cG9ydFxuICogaW50ZXJzZWN0aW9uIGRhdGEgd2l0aCBhbiBpZnJhbWUgb2YgaXRzIGNob2ljZSAobW9zdCBsaWtlbHkgY29udGFpbmVkIHdpdGhpblxuICogdGhlIGVsZW1lbnQgaXRzZWxmLikuIFdoZW4gaW5zdGFudGlhdGVkIHRoZSBjbGFzcyB3aWxsIHN0YXJ0IGxpc3RlbmluZyBmb3IgYVxuICogJ3NlbmQtaW50ZXJzZWN0aW9ucycgcG9zdE1lc3NhZ2UgZnJvbSB0aGUgaWZyYW1lLCBhbmQgb25seSB0aGVuICB3b3VsZCBzdGFydFxuICogc2VuZGluZyBpbnRlcnNlY3Rpb24gZGF0YSB0byB0aGUgaWZyYW1lLiBUaGUgaW50ZXJzZWN0aW9uIGRhdGEgd291bGQgYmUgc2VudFxuICogd2hlbiB0aGUgZWxlbWVudCBpcyBtb3ZlZCBpbnNpZGUgb3Igb3V0c2lkZSB0aGUgdmlld3BvcnQgYXMgd2VsbCBhcyBvbiBzY3JvbGxcbiAqIGFuZCByZXNpemUuIFRoZSBlbGVtZW50IHNob3VsZCBjcmVhdGUgYW4gSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgaW5zdGFuY2Ugb25jZVxuICogdGhlIElmcmFtZSBlbGVtZW50IGlzIGNyZWF0ZWQuIFRoZSBJbnRlcnNlY3Rpb25PYnNlcnZlciBjbGFzcyBleHBvc2VzIGFcbiAqIGBmaXJlYCBtZXRob2QgdGhhdCB3b3VsZCBzZW5kIHRoZSBpbnRlcnNlY3Rpb24gZGF0YSB0byB0aGUgaWZyYW1lLiBUaGVcbiAqIEludGVyc2VjdGlvbk9ic2VydmVyIGNsYXNzIGV4cG9zZXMgYSBgb25WaWV3cG9ydENhbGxiYWNrYCBtZXRob2QgdGhhdCBzaG91bGRcbiAqIGJlIGNhbGxlZCBpbnNpZGUgaWYgdGhlIHZpZXdwb3J0Q2FsbGJhY2sgb2YgdGhlIGVsZW1lbnQuIFRoaXMgd291bGQgbGV0IHRoZVxuICogZWxlbWVudCBzZW50IGludGVyc2VjdGlvbiBkYXRhIGF1dG9tYXRpY2FsbHkgd2hlbiB0aGVyZSBlbGVtZW50IGNvbWVzIGluc2lkZVxuICogb3IgZ29lcyBvdXRzaWRlIHRoZSB2aWV3cG9ydCBhbmQgYWxzbyBtYW5hZ2Ugc2VuZGluZyBpbnRlcnNlY3Rpb24gZGF0YVxuICogb25zY3JvbGwgYW5kIHJlc2l6ZS4gTm90ZTogVGhlIEludGVyc2VjdGlvbk9ic2VydmVyIHdvdWxkIG5vdCBzZW5kIGFueSBkYXRhXG4gKiBvdmVyIHRvIHRoZSBpZnJhbWUgaWYgaXQgaGFkIG5vdCByZXF1ZXN0ZWQgdGhlIGludGVyc2VjdGlvbiBkYXRhIGFscmVhZHkgdmlhXG4gKiBhIHBvc3RNZXNzYWdlLlxuICovXG5leHBvcnQgY2xhc3MgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIge1xuICAvKipcbiAgICogQHBhcmFtIHshQU1QLkJhc2VFbGVtZW50fSBiYXNlRWxlbWVudFxuICAgKiBAcGFyYW0geyFFbGVtZW50fSBpZnJhbWUgSWZyYW1lIGVsZW1lbnQgd2hpY2ggcmVxdWVzdGVkIHRoZVxuICAgKiAgICAgaW50ZXJzZWN0aW9uIGRhdGEuXG4gICAqIEBwYXJhbSB7P2Jvb2xlYW59IG9wdF9pczNwIFNldCB0byBgdHJ1ZWAgd2hlbiB0aGUgaWZyYW1lIGlzIDMncmQgcGFydHkuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihiYXNlRWxlbWVudCwgaWZyYW1lLCBvcHRfaXMzcCkge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFBTVAuQmFzZUVsZW1lbnR9ICovXG4gICAgdGhpcy5iYXNlRWxlbWVudF8gPSBiYXNlRWxlbWVudDtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi9zZXJ2aWNlL3RpbWVyLWltcGwuVGltZXJ9ICovXG4gICAgdGhpcy50aW1lcl8gPSBTZXJ2aWNlcy50aW1lckZvcihiYXNlRWxlbWVudC53aW4pO1xuICAgIC8qKiBAcHJpdmF0ZSB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLnNob3VsZFNlbmRJbnRlcnNlY3Rpb25DaGFuZ2VzXyA9IGZhbHNlO1xuICAgIC8qKiBAcHJpdmF0ZSB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLmluVmlld3BvcnRfID0gZmFsc2U7XG5cbiAgICAvKiogQHByaXZhdGUgeyFBcnJheTwhSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeT59ICovXG4gICAgdGhpcy5wZW5kaW5nQ2hhbmdlc18gPSBbXTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7bnVtYmVyfHN0cmluZ30gKi9cbiAgICB0aGlzLmZsdXNoVGltZW91dF8gPSAwO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7ZnVuY3Rpb24oKX0gKi9cbiAgICB0aGlzLmJvdW5kRmx1c2hfID0gdGhpcy5mbHVzaF8uYmluZCh0aGlzKTtcblxuICAgIC8qKlxuICAgICAqIEFuIG9iamVjdCB3aGljaCBoYW5kbGVzIHRyYWNraW5nIHN1YnNjcmliZXJzIHRvIHRoZVxuICAgICAqIGludGVyc2VjdGlvbiB1cGRhdGVzIGZvciB0aGlzIGVsZW1lbnQuXG4gICAgICogVHJpZ2dlcmVkIGJ5IGNvbnRleHQub2JzZXJ2ZUludGVyc2VjdGlvbijigKYpIGluc2lkZSB0aGUgYWQvaWZyYW1lXG4gICAgICogb3IgYnkgZGlyZWN0bHkgcG9zdGluZyBhIHNlbmQtaW50ZXJzZWN0aW9ucyBtZXNzYWdlLlxuICAgICAqIEBwcml2YXRlIHshU3Vic2NyaXB0aW9uQXBpfVxuICAgICAqL1xuICAgIHRoaXMucG9zdE1lc3NhZ2VBcGlfID0gbmV3IFN1YnNjcmlwdGlvbkFwaShcbiAgICAgICAgaWZyYW1lLCAnc2VuZC1pbnRlcnNlY3Rpb25zJywgb3B0X2lzM3AgfHwgZmFsc2UsXG4gICAgICAgIC8vIEVhY2ggdGltZSBzb21lb25lIHN1YnNjcmliZXMgd2UgbWFrZSBzdXJlIHRoYXQgdGhleVxuICAgICAgICAvLyBnZXQgYW4gdXBkYXRlLlxuICAgICAgICAoKSA9PiB0aGlzLnN0YXJ0U2VuZGluZ0ludGVyc2VjdGlvbkNoYW5nZXNfKCkpO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/RnVuY3Rpb259ICovXG4gICAgdGhpcy51bmxpc3RlblZpZXdwb3J0Q2hhbmdlc18gPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpcmVzIGVsZW1lbnQgaW50ZXJzZWN0aW9uXG4gICAqL1xuICBmaXJlKCkge1xuICAgIHRoaXMuc2VuZEVsZW1lbnRJbnRlcnNlY3Rpb25fKCk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgd2UgbmVlZCB0byB1bmxpc3RlbiB3aGVuIG1vdmluZyBvdXQgb2Ygdmlld3BvcnQsXG4gICAqIHVubGlzdGVuIGFuZCByZXNldCB1bmxpc3RlblZpZXdwb3J0Q2hhbmdlc18uXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB1bmxpc3Rlbk9uT3V0Vmlld3BvcnRfKCkge1xuICAgIGlmICh0aGlzLnVubGlzdGVuVmlld3BvcnRDaGFuZ2VzXykge1xuICAgICAgdGhpcy51bmxpc3RlblZpZXdwb3J0Q2hhbmdlc18oKTtcbiAgICAgIHRoaXMudW5saXN0ZW5WaWV3cG9ydENoYW5nZXNfID0gbnVsbDtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENhbGxlZCB2aWEgcG9zdE1lc3NhZ2UgZnJvbSB0aGUgY2hpbGQgaWZyYW1lIHdoZW4gdGhlIGFkL2lmcmFtZSBzdGFydHNcbiAgICogb2JzZXJ2aW5nIGl0cyBwb3NpdGlvbiBpbiB0aGUgdmlld3BvcnQuXG4gICAqIFNldHMgYSBmbGFnLCBtZWFzdXJlcyB0aGUgaWZyYW1lIHBvc2l0aW9uIGlmIG5lY2Vzc2FyeSBhbmQgc2VuZHNcbiAgICogb25lIGNoYW5nZSByZWNvcmQgdG8gdGhlIGlmcmFtZS5cbiAgICogTm90ZSB0aGF0IHRoaXMgbWV0aG9kIG1heSBiZSBjYWxsZWQgbW9yZSB0aGFuIG9uY2UgaWYgYSBzaW5nbGUgYWRcbiAgICogaGFzIG11bHRpcGxlIHBhcnRpZXMgaW50ZXJlc3RlZCBpbiB2aWV3YWJpbGl0eSBkYXRhLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RhcnRTZW5kaW5nSW50ZXJzZWN0aW9uQ2hhbmdlc18oKSB7XG4gICAgdGhpcy5zaG91bGRTZW5kSW50ZXJzZWN0aW9uQ2hhbmdlc18gPSB0cnVlO1xuICAgIHRoaXMuYmFzZUVsZW1lbnRfLmdldFZzeW5jKCkubWVhc3VyZSgoKSA9PiB7XG4gICAgICBpZiAodGhpcy5iYXNlRWxlbWVudF8uaXNJblZpZXdwb3J0KCkpIHtcbiAgICAgICAgdGhpcy5vblZpZXdwb3J0Q2FsbGJhY2sodHJ1ZSk7XG4gICAgICB9XG4gICAgICB0aGlzLmZpcmUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgYnkgdGhlIEFtcEVsZW1lbnQgdG8gd2hlbiBpdCBlaXRoZXIgZW50ZXJzIG9yIGV4aXRzIHRoZSB2aXNpYmxlXG4gICAqIHZpZXdwb3J0LlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGluVmlld3BvcnQgdHJ1ZSBpZiB0aGUgZWxlbWVudCBpcyBpbiB2aWV3cG9ydC5cbiAgICovXG4gIG9uVmlld3BvcnRDYWxsYmFjayhpblZpZXdwb3J0KSB7XG4gICAgaWYgKHRoaXMuaW5WaWV3cG9ydF8gPT0gaW5WaWV3cG9ydCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmluVmlld3BvcnRfID0gaW5WaWV3cG9ydDtcbiAgICAvLyBMZXRzIHRoZSBhZCBrbm93IHRoYXQgaXQgYmVjYW1lIHZpc2libGUgb3Igbm8gbG9uZ2VyIGlzLlxuICAgIHRoaXMuZmlyZSgpO1xuICAgIC8vIEFuZCB1cGRhdGUgdGhlIGFkIGFib3V0IGl0cyBwb3NpdGlvbiBpbiB0aGUgdmlld3BvcnQgd2hpbGVcbiAgICAvLyBpdCBpcyB2aXNpYmxlLlxuICAgIGlmIChpblZpZXdwb3J0KSB7XG4gICAgICBjb25zdCBzZW5kID0gdGhpcy5maXJlLmJpbmQodGhpcyk7XG4gICAgICAvLyBTY3JvbGwgZXZlbnRzLlxuICAgICAgY29uc3QgdW5saXN0ZW5TY3JvbGwgPSB0aGlzLmJhc2VFbGVtZW50Xy5nZXRWaWV3cG9ydCgpLm9uU2Nyb2xsKHNlbmQpO1xuICAgICAgLy8gVGhyb3R0bGVkIHNjcm9sbCBldmVudHMuIEFsc28gZmlyZXMgZm9yIHJlc2l6ZSBldmVudHMuXG4gICAgICBjb25zdCB1bmxpc3RlbkNoYW5nZWQgPSB0aGlzLmJhc2VFbGVtZW50Xy5nZXRWaWV3cG9ydCgpLm9uQ2hhbmdlZChzZW5kKTtcbiAgICAgIHRoaXMudW5saXN0ZW5WaWV3cG9ydENoYW5nZXNfID0gKCkgPT4ge1xuICAgICAgICB1bmxpc3RlblNjcm9sbCgpO1xuICAgICAgICB1bmxpc3RlbkNoYW5nZWQoKTtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudW5saXN0ZW5Pbk91dFZpZXdwb3J0XygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyAnaW50ZXJzZWN0aW9uJyBtZXNzYWdlIHRvIGFkL2lmcmFtZSB3aXRoIGludGVyc2VjdGlvbiBjaGFuZ2UgcmVjb3Jkc1xuICAgKiBpZiB0aGlzIGhhcyBiZWVuIGFjdGl2YXRlZCBhbmQgd2UgbWVhc3VyZWQgdGhlIGxheW91dCBib3ggb2YgdGhlIGlmcmFtZVxuICAgKiBhdCBsZWFzdCBvbmNlLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc2VuZEVsZW1lbnRJbnRlcnNlY3Rpb25fKCkge1xuICAgIGlmICghdGhpcy5zaG91bGRTZW5kSW50ZXJzZWN0aW9uQ2hhbmdlc18pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY2hhbmdlID0gdGhpcy5iYXNlRWxlbWVudF8uZWxlbWVudC5nZXRJbnRlcnNlY3Rpb25DaGFuZ2VFbnRyeSgpO1xuICAgIGlmICh0aGlzLnBlbmRpbmdDaGFuZ2VzXy5sZW5ndGggPiAwICYmXG4gICAgICAgIHRoaXMucGVuZGluZ0NoYW5nZXNfW3RoaXMucGVuZGluZ0NoYW5nZXNfLmxlbmd0aCAtIDFdLnRpbWVcbiAgICAgICAgPT0gY2hhbmdlLnRpbWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5wZW5kaW5nQ2hhbmdlc18ucHVzaChjaGFuZ2UpO1xuICAgIGlmICghdGhpcy5mbHVzaFRpbWVvdXRfKSB7XG4gICAgICAvLyBTZW5kIG9uZSBpbW1lZGlhdGVseSwg4oCmXG4gICAgICB0aGlzLmZsdXNoXygpO1xuICAgICAgLy8gYnV0IG9ubHkgc2VuZCBhIG1heGltdW0gb2YgMTAgcG9zdE1lc3NhZ2VzIHBlciBzZWNvbmQuXG4gICAgICB0aGlzLmZsdXNoVGltZW91dF8gPSB0aGlzLnRpbWVyXy5kZWxheSh0aGlzLmJvdW5kRmx1c2hfLCAxMDApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZmx1c2hfKCkge1xuICAgIC8vIFRPRE8oemhvdXl4KTogT25lIHBvdGVudGlhbCBwbGFjZSB0byBjaGVjayBpZiBlbGVtZW50IGlzIHN0aWxsIGluIGRvYy5cbiAgICB0aGlzLmZsdXNoVGltZW91dF8gPSAwO1xuICAgIGlmICghdGhpcy5wZW5kaW5nQ2hhbmdlc18ubGVuZ3RoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIE5vdGUgdGhhdCBTdWJzY3JpYmVBcGkgbXVsdGljYXN0cyB0aGUgdXBkYXRlIHRvIGFsbCBpbnRlcmVzdGVkIHdpbmRvd3MuXG4gICAgdGhpcy5wb3N0TWVzc2FnZUFwaV8uc2VuZCgnaW50ZXJzZWN0aW9uJywgZGljdCh7XG4gICAgICAnY2hhbmdlcyc6IHRoaXMucGVuZGluZ0NoYW5nZXNfLFxuICAgIH0pKTtcbiAgICB0aGlzLnBlbmRpbmdDaGFuZ2VzXy5sZW5ndGggPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIFByb3ZpZGUgYSBmdW5jdGlvbiB0byBjbGVhciB0aW1lb3V0IGJlZm9yZSBzZXQgdGhpcyBpbnRlcnNlY3Rpb24gdG8gbnVsbC5cbiAgICovXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy50aW1lcl8uY2FuY2VsKHRoaXMuZmx1c2hUaW1lb3V0Xyk7XG4gICAgdGhpcy51bmxpc3Rlbk9uT3V0Vmlld3BvcnRfKCk7XG4gICAgdGhpcy5wb3N0TWVzc2FnZUFwaV8uZGVzdHJveSgpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IFRoaXMgbW9kdWxlIGRlY2xhcmVzIEpTT04gdHlwZXMgYXMgZGVmaW5lZCBpbiB0aGVcbiAqIHtAbGluayBodHRwOi8vanNvbi5vcmcvfS5cbiAqL1xuXG5pbXBvcnQge2lzT2JqZWN0fSBmcm9tICcuL3R5cGVzJztcblxuXG4vLyBOT1RFIFR5cGUgYXJlIGNoYW5nZWQgdG8geyp9IGJlY2F1c2Ugb2Zcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1jb21waWxlci9pc3N1ZXMvMTk5OVxuXG4vKipcbiAqIEpTT04gc2NhbGFyLiBJdCdzIGVpdGhlciBzdHJpbmcsIG51bWJlciBvciBib29sZWFuLlxuICogQHR5cGVkZWYgeyp9IHNob3VsZCBiZSBzdHJpbmd8bnVtYmVyfGJvb2xlYW5cbiAqL1xubGV0IEpTT05TY2FsYXJEZWY7XG5cblxuLyoqXG4gKiBKU09OIG9iamVjdC4gSXQncyBhIG1hcCB3aXRoIHN0cmluZyBrZXlzIGFuZCBKU09OIHZhbHVlcy5cbiAqIEB0eXBlZGVmIHsqfSBzaG91bGQgYmUgIU9iamVjdDxzdHJpbmcsID9KU09OVmFsdWVEZWY+XG4gKi9cbmxldCBKU09OT2JqZWN0RGVmO1xuXG5cbi8qKlxuICogSlNPTiBhcnJheS4gSXQncyBhbiBhcnJheSB3aXRoIEpTT04gdmFsdWVzLlxuICogQHR5cGVkZWYgeyp9IHNob3VsZCBiZSAhQXJyYXk8P0pTT05WYWx1ZURlZj5cbiAqL1xubGV0IEpTT05BcnJheURlZjtcblxuXG4vKipcbiAqIEpTT04gdmFsdWUuIEl0J3MgZWl0aGVyIGEgc2NhbGFyLCBhbiBvYmplY3Qgb3IgYW4gYXJyYXkuXG4gKiBAdHlwZWRlZiB7Kn0gc2hvdWxkIGJlICFKU09OU2NhbGFyRGVmfCFKU09OT2JqZWN0RGVmfCFKU09OQXJyYXlEZWZcbiAqL1xubGV0IEpTT05WYWx1ZURlZjtcblxuLyoqXG4gKiBSZWNyZWF0ZXMgb2JqZWN0cyB3aXRoIHByb3RvdHlwZS1sZXNzIGNvcGllcy5cbiAqIEBwYXJhbSB7IUpzb25PYmplY3R9IG9ialxuICogQHJldHVybiB7IUpzb25PYmplY3R9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWNyZWF0ZU5vblByb3RvT2JqZWN0KG9iaikge1xuICBjb25zdCBjb3B5ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgZm9yIChjb25zdCBrIGluIG9iaikge1xuICAgIGlmICghaGFzT3duUHJvcGVydHkob2JqLCBrKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGNvbnN0IHYgPSBvYmpba107XG4gICAgY29weVtrXSA9IGlzT2JqZWN0KHYpID8gcmVjcmVhdGVOb25Qcm90b09iamVjdCh2KSA6IHY7XG4gIH1cbiAgcmV0dXJuIC8qKiBAdHlwZSB7IUpzb25PYmplY3R9ICovIChjb3B5KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgZnJvbSBhbiBvYmplY3QgZm9yIGEgZmllbGQtYmFzZWQgZXhwcmVzc2lvbi4gVGhlIGV4cHJlc3Npb25cbiAqIGlzIGEgc2ltcGxlIG5lc3RlZCBkb3Qtbm90YXRpb24gb2YgZmllbGRzLCBzdWNoIGFzIGBmaWVsZDEuZmllbGQyYC4gSWYgYW55XG4gKiBmaWVsZCBpbiBhIGNoYWluIGRvZXMgbm90IGV4aXN0IG9yIGlzIG5vdCBhbiBvYmplY3Qgb3IgYXJyYXksIHRoZSByZXR1cm5lZFxuICogdmFsdWUgd2lsbCBiZSBgdW5kZWZpbmVkYC5cbiAqXG4gKiBAcGFyYW0geyFKc29uT2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7c3RyaW5nfSBleHByXG4gKiBAcmV0dXJuIHsqfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmFsdWVGb3JFeHByKG9iaiwgZXhwcikge1xuICAvLyBUaGUgYC5gIGluZGljYXRlcyBcInRoZSBvYmplY3QgaXRzZWxmXCIuXG4gIGlmIChleHByID09ICcuJykge1xuICAgIHJldHVybiBvYmo7XG4gIH1cbiAgLy8gT3RoZXJ3aXNlLCBuYXZpZ2F0ZSB2aWEgcHJvcGVydGllcy5cbiAgY29uc3QgcGFydHMgPSBleHByLnNwbGl0KCcuJyk7XG4gIGxldCB2YWx1ZSA9IG9iajtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHBhcnQgPSBwYXJ0c1tpXTtcbiAgICBpZiAocGFydCAmJlxuICAgICAgICB2YWx1ZSAmJlxuICAgICAgICB2YWx1ZVtwYXJ0XSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgIGhhc093blByb3BlcnR5KHZhbHVlLCBwYXJ0KVxuICAgICkge1xuICAgICAgdmFsdWUgPSB2YWx1ZVtwYXJ0XTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICB2YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICBicmVhaztcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59XG5cbi8qKlxuICogU2ltcGxlIHdyYXBwZXIgYXJvdW5kIEpTT04ucGFyc2UgdGhhdCBjYXN0cyB0aGUgcmV0dXJuIHZhbHVlXG4gKiB0byBKc29uT2JqZWN0LlxuICogQ3JlYXRlIGEgbmV3IHdyYXBwZXIgaWYgYW4gYXJyYXkgcmV0dXJuIHZhbHVlIGlzIGRlc2lyZWQuXG4gKiBAcGFyYW0geyp9IGpzb24gSlNPTiBzdHJpbmcgdG8gcGFyc2VcbiAqIEByZXR1cm4gez9Kc29uT2JqZWN0fSBNYXkgYmUgZXh0ZW5kIHRvIHBhcnNlIGFycmF5cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSnNvbihqc29uKSB7XG4gIHJldHVybiAvKiogQHR5cGUgez9Kc29uT2JqZWN0fSAqLyhKU09OLnBhcnNlKC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAoanNvbikpKTtcbn1cblxuLyoqXG4gKiBQYXJzZXMgdGhlIGdpdmVuIGBqc29uYCBzdHJpbmcgd2l0aG91dCB0aHJvd2luZyBhbiBleGNlcHRpb24gaWYgbm90IHZhbGlkLlxuICogUmV0dXJucyBgdW5kZWZpbmVkYCBpZiBwYXJzaW5nIGZhaWxzLlxuICogUmV0dXJucyB0aGUgYE9iamVjdGAgY29ycmVzcG9uZGluZyB0byB0aGUgSlNPTiBzdHJpbmcgd2hlbiBwYXJzaW5nIHN1Y2NlZWRzLlxuICogQHBhcmFtIHsqfSBqc29uIEpTT04gc3RyaW5nIHRvIHBhcnNlXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFFcnJvcik9fSBvcHRfb25GYWlsZWQgT3B0aW9uYWwgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZFxuICogICAgIHdpdGggdGhlIGVycm9yIGlmIHBhcnNpbmcgZmFpbHMuXG4gKiBAcmV0dXJuIHs/SnNvbk9iamVjdHx1bmRlZmluZWR9IE1heSBiZSBleHRlbmQgdG8gcGFyc2UgYXJyYXlzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJ5UGFyc2VKc29uKGpzb24sIG9wdF9vbkZhaWxlZCkge1xuICB0cnkge1xuICAgIHJldHVybiBwYXJzZUpzb24oanNvbik7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAob3B0X29uRmFpbGVkKSB7XG4gICAgICBvcHRfb25GYWlsZWQoZSk7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuLyoqXG4gKiBSZWN1cnNpdmVseSBjaGVja3Mgc3RyaWN0IGVxdWFsaXR5IG9mIGl0ZW1zIGluIG5lc3RlZCBhcnJheXMgYW5kIG9iamVjdHMuXG4gKlxuICogQHBhcmFtIHtKU09OVmFsdWVEZWZ9IGFcbiAqIEBwYXJhbSB7SlNPTlZhbHVlRGVmfSBiXG4gKiBAcGFyYW0ge251bWJlcn0gZGVwdGggVGhlIG1heGltdW0gcmVjdXJzaW9uIGRlcHRoLiBNdXN0IGJlIGZpbml0ZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgZGVwdGggYXJndW1lbnQgaXMgbm90IGZpbml0ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlY3Vyc2l2ZUVxdWFscyhhLCBiLCBkZXB0aCA9IDMpIHtcbiAgaWYgKCFpc0Zpbml0ZShkZXB0aCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2RlcHRoIGFyZyBtdXN0IGJlIGZpbml0ZTogJyArIGRlcHRoKTtcbiAgfVxuICBpZiAoYSA9PT0gYikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8vIE9ubHkgY2hlY2sgc2hhbGxvdyBlcXVhbGl0eSBmb3IgZGVwdGggPCAxLlxuICBpZiAoZGVwdGggPCAxKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICh0eXBlb2YgYSAhPT0gdHlwZW9mIGIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkoYSkgJiYgQXJyYXkuaXNBcnJheShiKSkge1xuICAgIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoIXJlY3Vyc2l2ZUVxdWFscyhhW2ldLCBiW2ldLCBkZXB0aCAtIDEpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKGEgJiYgYiAmJiB0eXBlb2YgYSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIGIgPT09ICdvYmplY3QnKSB7XG4gICAgY29uc3Qga2V5c0EgPSBPYmplY3Qua2V5cygvKiogQHR5cGUgeyFPYmplY3R9ICovIChhKSk7XG4gICAgY29uc3Qga2V5c0IgPSBPYmplY3Qua2V5cygvKiogQHR5cGUgeyFPYmplY3R9ICovIChiKSk7XG4gICAgaWYgKGtleXNBLmxlbmd0aCAhPT0ga2V5c0IubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5c0EubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGtleUEgPSBrZXlzQVtpXTtcbiAgICAgIGNvbnN0IHZhbHVlQSA9IGFba2V5QV07XG4gICAgICBjb25zdCB2YWx1ZUIgPSBiW2tleUFdO1xuICAgICAgaWYgKCFyZWN1cnNpdmVFcXVhbHModmFsdWVBLCB2YWx1ZUIsIGRlcHRoIC0gMSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0geyp9IG9ialxuICogQHBhcmFtIHtzdHJpbmd9IGtleVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaGFzT3duUHJvcGVydHkob2JqLCBrZXkpIHtcbiAgaWYgKG9iaiA9PSBudWxsIHx8IHR5cGVvZiBvYmogIT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChcbiAgICAgIC8qKiBAdHlwZSB7IU9iamVjdH0gKi8gKG9iaiksIGtleSk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuXG4vKipcbiAqIFRoZSBzdHJ1Y3R1cmUgdGhhdCBjb21iaW5lcyBwb3NpdGlvbiBhbmQgc2l6ZSBmb3IgYW4gZWxlbWVudC4gVGhlIGV4YWN0XG4gKiBpbnRlcnByZXRhdGlvbiBvZiBwb3NpdGlvbiBhbmQgc2l6ZSBkZXBlbmRzIG9uIHRoZSB1c2UgY2FzZS5cbiAqXG4gKiBAdHlwZWRlZiB7e1xuICogICB0b3A6IG51bWJlcixcbiAqICAgYm90dG9tOiBudW1iZXIsXG4gKiAgIGxlZnQ6IG51bWJlcixcbiAqICAgcmlnaHQ6IG51bWJlcixcbiAqICAgd2lkdGg6IG51bWJlcixcbiAqICAgaGVpZ2h0OiBudW1iZXIsXG4gKiAgIHg6IG51bWJlcixcbiAqICAgeTogbnVtYmVyXG4gKiB9fVxuICovXG5leHBvcnQgbGV0IExheW91dFJlY3REZWY7XG5cblxuLyoqXG4gKiBUaGUgc3RydWN0dXJlIHRoYXQgcmVwcmVzZW50cyB0aGUgbWFyZ2lucyBvZiBhbiBFbGVtZW50LlxuICpcbiAqIEB0eXBlZGVmIHt7XG4gKiAgIHRvcDogbnVtYmVyLFxuICogICByaWdodDogbnVtYmVyLFxuICogICBib3R0b206IG51bWJlcixcbiAqICAgbGVmdDogbnVtYmVyXG4gKiB9fVxuICovXG5leHBvcnQgbGV0IExheW91dE1hcmdpbnNEZWY7XG5cblxuLyoqXG4gKiBUaGUgc3RydWN0dXJlIHRoYXQgcmVwcmVzZW50cyBhIHJlcXVlc3RlZCBjaGFuZ2UgdG8gdGhlIG1hcmdpbnMgb2YgYW5cbiAqIEVsZW1lbnQuIEFueSBuZXcgdmFsdWVzIHNwZWNpZmllZCB3aWxsIHJlcGxhY2UgZXhpc3Rpbmcgb25lcyAocmF0aGVyIHRoYW5cbiAqIGJlaW5nIGFkZGl0aXZlKS5cbiAqXG4gKiBAdHlwZWRlZiB7e1xuICogICB0b3A6IChudW1iZXJ8dW5kZWZpbmVkKSxcbiAqICAgcmlnaHQ6IChudW1iZXJ8dW5kZWZpbmVkKSxcbiAqICAgYm90dG9tOiAobnVtYmVyfHVuZGVmaW5lZCksXG4gKiAgIGxlZnQ6IChudW1iZXJ8dW5kZWZpbmVkKVxuICogfX1cbiAqL1xuZXhwb3J0IGxldCBMYXlvdXRNYXJnaW5zQ2hhbmdlRGVmO1xuXG4vKipcbiogUmVsYXRpdmVQb3NpdGlvbnNcbipcbiogRGVzY3JpYmVzIHRoZSByZWxhdGl2ZSBwb3NpdGlvbiBvZiBhbiBlbGVtZW50IHRvIGFub3RoZXIgKHdoZXRoZXIgdGhlXG4qIGZpcnN0IGlzIGluc2lkZSB0aGUgc2Vjb25kLCBvbiB0b3Agb2YgdGhlIHNlY29uZCBvciBvbiB0aGUgYm90dG9tXG4qIEBlbnVtIHtzdHJpbmd9XG4qL1xuZXhwb3J0IGNvbnN0IFJlbGF0aXZlUG9zaXRpb25zID0ge1xuICBJTlNJREU6ICdpbnNpZGUnLFxuICBUT1A6ICd0b3AnLFxuICBCT1RUT006ICdib3R0b20nLFxufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbGF5b3V0IHJlY3QgYmFzZWQgb24gdGhlIGxlZnQsIHRvcCwgd2lkdGggYW5kIGhlaWdodCBwYXJhbWV0ZXJzXG4gKiBpbiB0aGF0IG9yZGVyLlxuICogQHBhcmFtIHtudW1iZXJ9IGxlZnRcbiAqIEBwYXJhbSB7bnVtYmVyfSB0b3BcbiAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aFxuICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodFxuICogQHJldHVybiB7IUxheW91dFJlY3REZWZ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsYXlvdXRSZWN0THR3aChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpIHtcbiAgcmV0dXJuIHtcbiAgICBsZWZ0LFxuICAgIHRvcCxcbiAgICB3aWR0aCxcbiAgICBoZWlnaHQsXG4gICAgYm90dG9tOiB0b3AgKyBoZWlnaHQsXG4gICAgcmlnaHQ6IGxlZnQgKyB3aWR0aCxcbiAgICB4OiBsZWZ0LFxuICAgIHk6IHRvcCxcbiAgfTtcbn1cblxuXG4vKipcbiAqIENyZWF0ZXMgYSBsYXlvdXQgcmVjdCBiYXNlZCBvbiB0aGUgRE9NUmVjdCwgZS5nLiBvYnRhaW5lZCBmcm9tIGNhbGxpbmdcbiAqIGdldEJvdW5kaW5nQ2xpZW50UmVjdC5cbiAqIEBwYXJhbSB7IUNsaWVudFJlY3R9IHJlY3RcbiAqIEByZXR1cm4geyFMYXlvdXRSZWN0RGVmfVxuICovXG5leHBvcnQgZnVuY3Rpb24gbGF5b3V0UmVjdEZyb21Eb21SZWN0KHJlY3QpIHtcbiAgcmV0dXJuIGxheW91dFJlY3RMdHdoKE51bWJlcihyZWN0LmxlZnQpLCBOdW1iZXIocmVjdC50b3ApLFxuICAgICAgTnVtYmVyKHJlY3Qud2lkdGgpLCBOdW1iZXIocmVjdC5oZWlnaHQpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHNwZWNpZmllZCB0d28gcmVjdHMgb3ZlcmxhcCBieSBhIHNpbmdsZSBwaXhlbC5cbiAqIEBwYXJhbSB7IUxheW91dFJlY3REZWZ9IHIxXG4gKiBAcGFyYW0geyFMYXlvdXRSZWN0RGVmfSByMlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxheW91dFJlY3RzT3ZlcmxhcChyMSwgcjIpIHtcbiAgcmV0dXJuIChyMS50b3AgPD0gcjIuYm90dG9tICYmIHIyLnRvcCA8PSByMS5ib3R0b20gJiZcbiAgICAgIHIxLmxlZnQgPD0gcjIucmlnaHQgJiYgcjIubGVmdCA8PSByMS5yaWdodCk7XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbnRlcnNlY3Rpb24gYmV0d2VlbiBhLCBiIG9yIG51bGwgaWYgdGhlcmUgaXMgbm9uZS5cbiAqIEBwYXJhbSB7Li4uP0xheW91dFJlY3REZWZ8dW5kZWZpbmVkfSB2YXJfYXJnc1xuICogQHJldHVybiB7P0xheW91dFJlY3REZWZ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWN0SW50ZXJzZWN0aW9uKHZhcl9hcmdzKSB7XG4gIGxldCB4MCA9IC1JbmZpbml0eTtcbiAgbGV0IHgxID0gSW5maW5pdHk7XG4gIGxldCB5MCA9IC1JbmZpbml0eTtcbiAgbGV0IHkxID0gSW5maW5pdHk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgY3VycmVudCA9IGFyZ3VtZW50c1tpXTtcbiAgICBpZiAoIWN1cnJlbnQpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICB4MCA9IE1hdGgubWF4KHgwLCBjdXJyZW50LmxlZnQpO1xuICAgIHgxID0gTWF0aC5taW4oeDEsIGN1cnJlbnQubGVmdCArIGN1cnJlbnQud2lkdGgpO1xuICAgIHkwID0gTWF0aC5tYXgoeTAsIGN1cnJlbnQudG9wKTtcbiAgICB5MSA9IE1hdGgubWluKHkxLCBjdXJyZW50LnRvcCArIGN1cnJlbnQuaGVpZ2h0KTtcbiAgICBpZiAoeDEgPCB4MCB8fCB5MSA8IHkwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cbiAgaWYgKHgxID09IEluZmluaXR5KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIGxheW91dFJlY3RMdHdoKHgwLCB5MCwgeDEgLSB4MCwgeTEgLSB5MCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgcG9zaXRpb24gb2YgcjIgcmVsYXRpdmUgdG8gcjFcbiAqIEBwYXJhbSB7IUxheW91dFJlY3REZWZ9IHIxXG4gKiBAcGFyYW0geyFMYXlvdXRSZWN0RGVmfSByMlxuICogQHJldHVybiB7UmVsYXRpdmVQb3NpdGlvbnN9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsYXlvdXRSZWN0c1JlbGF0aXZlUG9zKHIxLCByMikge1xuICBpZiAocjEudG9wIDwgcjIudG9wKSB7XG4gICAgcmV0dXJuIFJlbGF0aXZlUG9zaXRpb25zLlRPUDtcbiAgfSBlbHNlIGlmIChyMS5ib3R0b20gPiByMi5ib3R0b20pIHtcbiAgICByZXR1cm4gUmVsYXRpdmVQb3NpdGlvbnMuQk9UVE9NO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBSZWxhdGl2ZVBvc2l0aW9ucy5JTlNJREU7XG4gIH1cbn1cblxuLyoqXG4gKiBFeHBhbmQgdGhlIGxheW91dCByZWN0IHVzaW5nIG11bHRpcGxlcyBvZiB3aWR0aCBhbmQgaGVpZ2h0LlxuICogQHBhcmFtIHshTGF5b3V0UmVjdERlZn0gcmVjdCBPcmlnaW5hbCByZWN0LlxuICogQHBhcmFtIHtudW1iZXJ9IGR3IEV4cGFuc2lvbiBpbiB3aWR0aCwgc3BlY2lmaWVkIGFzIGEgbXVsdGlwbGUgb2Ygd2lkdGguXG4gKiBAcGFyYW0ge251bWJlcn0gZGggRXhwYW5zaW9uIGluIGhlaWdodCwgc3BlY2lmaWVkIGFzIGEgbXVsdGlwbGUgb2YgaGVpZ2h0LlxuICogQHJldHVybiB7IUxheW91dFJlY3REZWZ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHBhbmRMYXlvdXRSZWN0KHJlY3QsIGR3LCBkaCkge1xuICByZXR1cm4gbGF5b3V0UmVjdEx0d2gocmVjdC5sZWZ0IC0gcmVjdC53aWR0aCAqIGR3LFxuICAgICAgcmVjdC50b3AgLSByZWN0LmhlaWdodCAqIGRoLFxuICAgICAgcmVjdC53aWR0aCAqICgxICsgZHcgKiAyKSxcbiAgICAgIHJlY3QuaGVpZ2h0ICogKDEgKyBkaCAqIDIpKTtcbn1cblxuLyoqXG4gKiBNb3ZlcyB0aGUgbGF5b3V0IHJlY3QgdXNpbmcgZHggYW5kIGR5LlxuICogQHBhcmFtIHshTGF5b3V0UmVjdERlZn0gcmVjdCBPcmlnaW5hbCByZWN0LlxuICogQHBhcmFtIHtudW1iZXJ9IGR4IE1vdmUgaG9yaXpvbnRhbGx5IHdpdGggdGhpcyB2YWx1ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeSBNb3ZlIHZlcnRpY2FsbHkgd2l0aCB0aGlzIHZhbHVlLlxuICogQHJldHVybiB7IUxheW91dFJlY3REZWZ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtb3ZlTGF5b3V0UmVjdChyZWN0LCBkeCwgZHkpIHtcbiAgaWYgKChkeCA9PSAwICYmIGR5ID09IDApIHx8XG4gICAgICAocmVjdC53aWR0aCA9PSAwICYmIHJlY3QuaGVpZ2h0ID09IDApKSB7XG4gICAgcmV0dXJuIHJlY3Q7XG4gIH1cbiAgcmV0dXJuIGxheW91dFJlY3RMdHdoKHJlY3QubGVmdCArIGR4LCByZWN0LnRvcCArIGR5LFxuICAgICAgcmVjdC53aWR0aCwgcmVjdC5oZWlnaHQpO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHshTGF5b3V0TWFyZ2luc0RlZn0gbWFyZ2luc1xuICogQHBhcmFtIHshTGF5b3V0TWFyZ2luc0NoYW5nZURlZn0gY2hhbmdlXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXJlTWFyZ2luc0NoYW5nZWQobWFyZ2lucywgY2hhbmdlKSB7XG4gIHJldHVybiAoY2hhbmdlLnRvcCAhPT0gdW5kZWZpbmVkICYmIGNoYW5nZS50b3AgIT0gbWFyZ2lucy50b3ApIHx8XG4gICAgICAoY2hhbmdlLnJpZ2h0ICE9PSB1bmRlZmluZWQgJiYgY2hhbmdlLnJpZ2h0ICE9IG1hcmdpbnMucmlnaHQpIHx8XG4gICAgICAoY2hhbmdlLmJvdHRvbSAhPT0gdW5kZWZpbmVkICYmIGNoYW5nZS5ib3R0b20gIT0gbWFyZ2lucy5ib3R0b20pIHx8XG4gICAgICAoY2hhbmdlLmxlZnQgIT09IHVuZGVmaW5lZCAmJiBjaGFuZ2UubGVmdCAhPSBtYXJnaW5zLmxlZnQpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IUxheW91dFJlY3REZWZ9IGZyb21cbiAqIEBwYXJhbSB7IUxheW91dFJlY3REZWZ9IHRvXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gbGF5b3V0UmVjdFNpemVFcXVhbHMoZnJvbSwgdG8pIHtcbiAgcmV0dXJuIGZyb20ud2lkdGggPT0gdG8ud2lkdGggJiZcbiAgICAgIGZyb20uaGVpZ2h0ID09PSB0by5oZWlnaHQ7XG59XG5cbi8qKlxuICogQHBhcmFtIHs/TGF5b3V0UmVjdERlZn0gcjFcbiAqIEBwYXJhbSB7P0xheW91dFJlY3REZWZ9IHIyXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gbGF5b3V0UmVjdEVxdWFscyhyMSwgcjIpIHtcbiAgaWYgKCFyMSB8fCAhcjIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHIxLmxlZnQgPT0gcjIubGVmdCAmJiByMS50b3AgPT0gcjIudG9wICYmXG4gICAgICByMS53aWR0aCA9PSByMi53aWR0aCAmJiByMS5oZWlnaHQgPT0gcjIuaGVpZ2h0O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7TGF5b3V0TWFyZ2luc0NoYW5nZURlZnx1bmRlZmluZWR9IG1hcmdpbnNDaGFuZ2VcbiAqIEByZXR1cm4ge0xheW91dE1hcmdpbnNDaGFuZ2VEZWZ8dW5kZWZpbmVkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvbmVMYXlvdXRNYXJnaW5zQ2hhbmdlRGVmKG1hcmdpbnNDaGFuZ2UpIHtcbiAgaWYgKCFtYXJnaW5zQ2hhbmdlKSB7XG4gICAgcmV0dXJuIG1hcmdpbnNDaGFuZ2U7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICB0b3A6IG1hcmdpbnNDaGFuZ2UudG9wLFxuICAgIGJvdHRvbTogbWFyZ2luc0NoYW5nZS5ib3R0b20sXG4gICAgbGVmdDogbWFyZ2luc0NoYW5nZS5sZWZ0LFxuICAgIHJpZ2h0OiBtYXJnaW5zQ2hhbmdlLnJpZ2h0LFxuICB9O1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBJbXBsZW1lbnRzIGVsZW1lbnQgbGF5b3V0LiBTZWUgaHR0cHM6Ly9nb28uZ2wvOWF2WHVUIGZvclxuICogZGV0YWlscy5cbiAqL1xuXG5pbXBvcnQge2RldiwgdXNlcn0gZnJvbSAnLi9sb2cnO1xuaW1wb3J0IHtodG1sRm9yfSBmcm9tICcuL3N0YXRpYy10ZW1wbGF0ZSc7XG5pbXBvcnQge2lzRmluaXRlTnVtYmVyfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7c2V0U3R5bGUsIHNldFN0eWxlc30gZnJvbSAnLi9zdHlsZSc7XG5pbXBvcnQge3N0YXJ0c1dpdGh9IGZyb20gJy4vc3RyaW5nJztcblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgTGF5b3V0ID0ge1xuICBOT0RJU1BMQVk6ICdub2Rpc3BsYXknLFxuICBGSVhFRDogJ2ZpeGVkJyxcbiAgRklYRURfSEVJR0hUOiAnZml4ZWQtaGVpZ2h0JyxcbiAgUkVTUE9OU0lWRTogJ3Jlc3BvbnNpdmUnLFxuICBDT05UQUlORVI6ICdjb250YWluZXInLFxuICBGSUxMOiAnZmlsbCcsXG4gIEZMRVhfSVRFTTogJ2ZsZXgtaXRlbScsXG4gIEZMVUlEOiAnZmx1aWQnLFxuICBJTlRSSU5TSUM6ICdpbnRyaW5zaWMnLFxufTtcblxuXG4vKipcbiAqIExheW91dCBwcmlvcml0aWVzIHRvIHVzZSB3aXRoIEJhc2VFbGVtZW50I2dldExheW91dFByaW9yaXR5KCkgYW5kXG4gKiBCYXNlRWxlbWVudCN1cGRhdGVMYXlvdXRQcmlvcml0eSgpLlxuICogQGVudW0ge251bWJlcn1cbiAqL1xuZXhwb3J0IGNvbnN0IExheW91dFByaW9yaXR5ID0ge1xuICBDT05URU5UOiAwLFxuICBNRVRBREFUQTogMSxcbiAgQURTOiAyLFxuICBCQUNLR1JPVU5EOiAzLFxufTtcblxuXG4vKipcbiAqIENTUyBMZW5ndGggdHlwZS4gRS5nLiBcIjFweFwiIG9yIFwiMjB2aFwiLlxuICogQHR5cGVkZWYge3N0cmluZ31cbiAqL1xuZXhwb3J0IGxldCBMZW5ndGhEZWY7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7e1xuICogICB3aWR0aDogc3RyaW5nLFxuICogICBoZWlnaHQ6IHN0cmluZ1xuICogfX1cbiAqL1xubGV0IERpbWVuc2lvbnNEZWY7XG5cblxuLyoqXG4gKiBUaGUgc2V0IG9mIGVsZW1lbnRzIHdpdGggbmF0dXJhbCBkaW1lbnNpb25zLCB0aGF0IGlzLCBlbGVtZW50c1xuICogd2hpY2ggaGF2ZSBhIGtub3duIGRpbWVuc2lvbiBlaXRoZXIgYmFzZWQgb24gdGhlaXIgdmFsdWUgc3BlY2lmaWVkIGhlcmUsXG4gKiBvciwgaWYgdGhlIHZhbHVlIGlzIG51bGwsIGEgZGltZW5zaW9uIHNwZWNpZmljIHRvIHRoZSBicm93c2VyLlxuICogYGhhc05hdHVyYWxEaW1lbnNpb25zYCBjaGVja3MgZm9yIG1lbWJlcnNoaXAgaW4gdGhpcyBzZXQuXG4gKiBgZ2V0TmF0dXJhbERpbWVuc2lvbnNgIGRldGVybWluZXMgdGhlIGRpbWVuc2lvbnMgZm9yIGFuIGVsZW1lbnQgaW4gdGhlXG4gKiAgICBzZXQgYW5kIGNhY2hlcyBpdC5cbiAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgP0RpbWVuc2lvbnNEZWY+fVxuICogQHByaXZhdGUgIFZpc2libGUgZm9yIHRlc3Rpbmcgb25seSFcbiAqL1xuZXhwb3J0IGNvbnN0IG5hdHVyYWxEaW1lbnNpb25zXyA9IHtcbiAgJ0FNUC1QSVhFTCc6IHt3aWR0aDogJzBweCcsIGhlaWdodDogJzBweCd9LFxuICAnQU1QLUFOQUxZVElDUyc6IHt3aWR0aDogJzFweCcsIGhlaWdodDogJzFweCd9LFxuICAvLyBUT0RPKGR2b3l0ZW5rbyk6IGF1ZGlvIHNob3VsZCBoYXZlIHdpZHRoOmF1dG8uXG4gICdBTVAtQVVESU8nOiBudWxsLFxuICAnQU1QLVNPQ0lBTC1TSEFSRSc6IHt3aWR0aDogJzYwcHgnLCBoZWlnaHQ6ICc0NHB4J30sXG59O1xuXG5cbi8qKlxuICogRWxlbWVudHMgdGhhdCB0aGUgcHJvZ2VzcyBjYW4gYmUgc2hvd24gZm9yLiBUaGlzIHNldCBoYXMgdG8gYmUgZXh0ZXJuYWxpemVkXG4gKiBzaW5jZSB0aGUgZWxlbWVudCdzIGltcGxlbWVudGF0aW9uIG1heSBub3QgYmUgZG93bmxvYWRlZCB5ZXQuXG4gKiBAZW51bSB7Ym9vbGVhbn1cbiAqIEBwcml2YXRlICBWaXNpYmxlIGZvciB0ZXN0aW5nIG9ubHkhXG4gKi9cbmV4cG9ydCBjb25zdCBMT0FESU5HX0VMRU1FTlRTXyA9IHtcbiAgJ0FNUC1BTklNJzogdHJ1ZSxcbiAgJ0FNUC1CUklHSFRDT1ZFJzogdHJ1ZSxcbiAgJ0FNUC1HT09HTEUtRE9DVU1FTlQtRU1CRUQnOiB0cnVlLFxuICAnQU1QLUVNQkVEJzogdHJ1ZSxcbiAgJ0FNUC1GQUNFQk9PSyc6IHRydWUsXG4gICdBTVAtRkFDRUJPT0stQ09NTUVOVFMnOiB0cnVlLFxuICAnQU1QLUZBQ0VCT09LLUxJS0UnOiB0cnVlLFxuICAnQU1QLUZBQ0VCT09LLVBBR0UnOiB0cnVlLFxuICAnQU1QLUlGUkFNRSc6IHRydWUsXG4gICdBTVAtSU1HJzogdHJ1ZSxcbiAgJ0FNUC1JTlNUQUdSQU0nOiB0cnVlLFxuICAnQU1QLUxJU1QnOiB0cnVlLFxuICAnQU1QLU9PWUFMQS1QTEFZRVInOiB0cnVlLFxuICAnQU1QLVBJTlRFUkVTVCc6IHRydWUsXG4gICdBTVAtUExBWUJVWlonOiB0cnVlLFxuICAnQU1QLVZJREVPJzogdHJ1ZSxcbiAgJ0FNUC1ZT1VUVUJFJzogdHJ1ZSxcbn07XG5cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gc1xuICogQHJldHVybiB7TGF5b3V0fHVuZGVmaW5lZH0gUmV0dXJucyB1bmRlZmluZWQgaW4gY2FzZSBvZiBmYWlsdXJlIHRvIHBhcnNlXG4gKiAgIHRoZSBsYXlvdXQgc3RyaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VMYXlvdXQocykge1xuICBmb3IgKGNvbnN0IGsgaW4gTGF5b3V0KSB7XG4gICAgaWYgKExheW91dFtrXSA9PSBzKSB7XG4gICAgICByZXR1cm4gTGF5b3V0W2tdO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHshTGF5b3V0fSBsYXlvdXRcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExheW91dENsYXNzKGxheW91dCkge1xuICByZXR1cm4gJ2ktYW1waHRtbC1sYXlvdXQtJyArIGxheW91dDtcbn1cblxuXG4vKipcbiAqIFdoZXRoZXIgYW4gZWxlbWVudCB3aXRoIHRoaXMgbGF5b3V0IGluaGVyZW50bHkgZGVmaW5lcyB0aGUgc2l6ZS5cbiAqIEBwYXJhbSB7IUxheW91dH0gbGF5b3V0XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNMYXlvdXRTaXplRGVmaW5lZChsYXlvdXQpIHtcbiAgcmV0dXJuIChsYXlvdXQgPT0gTGF5b3V0LkZJWEVEIHx8XG4gICAgICBsYXlvdXQgPT0gTGF5b3V0LkZJWEVEX0hFSUdIVCB8fFxuICAgICAgbGF5b3V0ID09IExheW91dC5SRVNQT05TSVZFIHx8XG4gICAgICBsYXlvdXQgPT0gTGF5b3V0LkZJTEwgfHxcbiAgICAgIGxheW91dCA9PSBMYXlvdXQuRkxFWF9JVEVNIHx8XG4gICAgICBsYXlvdXQgPT0gTGF5b3V0LkZMVUlEIHx8XG4gICAgICBsYXlvdXQgPT0gTGF5b3V0LklOVFJJTlNJQyk7XG59XG5cblxuLyoqXG4gKiBXaGV0aGVyIHRoZSB0YWcgaXMgYW4gaW50ZXJuYWwgKHNlcnZpY2UpIEFNUCB0YWcuXG4gKiBAcGFyYW0geyFOb2RlfHN0cmluZ30gdGFnXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNJbnRlcm5hbEVsZW1lbnQodGFnKSB7XG4gIGNvbnN0IHRhZ05hbWUgPSAodHlwZW9mIHRhZyA9PSAnc3RyaW5nJykgPyB0YWcgOiB0YWcudGFnTmFtZTtcbiAgcmV0dXJuIHRhZ05hbWUgJiYgc3RhcnRzV2l0aCh0YWdOYW1lLnRvTG93ZXJDYXNlKCksICdpLScpO1xufVxuXG5cbi8qKlxuICogUGFyc2VzIHRoZSBDU1MgbGVuZ3RoIHZhbHVlLiBJZiBubyB1bml0cyBzcGVjaWZpZWQsIHRoZSBhc3N1bWVkIHZhbHVlIGlzXG4gKiBcInB4XCIuIFJldHVybnMgdW5kZWZpbmVkIGluIGNhc2Ugb2YgcGFyc2luZyBlcnJvci5cbiAqIEBwYXJhbSB7c3RyaW5nfHVuZGVmaW5lZHxudWxsfSBzXG4gKiBAcmV0dXJuIHshTGVuZ3RoRGVmfHVuZGVmaW5lZH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTGVuZ3RoKHMpIHtcbiAgaWYgKHR5cGVvZiBzID09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIHMgKyAncHgnO1xuICB9XG4gIGlmICghcykge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKCEvXlxcZCsoXFwuXFxkKyk/KHB4fGVtfHJlbXx2aHx2d3x2bWlufHZtYXh8Y218bW18cXxpbnxwY3xwdCk/JC8udGVzdChzKSkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKC9eXFxkKyhcXC5cXGQrKT8kLy50ZXN0KHMpKSB7XG4gICAgcmV0dXJuIHMgKyAncHgnO1xuICB9XG4gIHJldHVybiBzO1xufVxuXG5cblxuLyoqXG4gKiBBc3NlcnRzIHRoYXQgdGhlIHN1cHBsaWVkIHZhbHVlIGlzIGEgbm9uLXBlcmNlbnQgQ1NTIExlbmd0aCB2YWx1ZS5cbiAqIEBwYXJhbSB7IUxlbmd0aERlZnxzdHJpbmd8bnVsbHx1bmRlZmluZWR9IGxlbmd0aFxuICogQHJldHVybiB7IUxlbmd0aERlZn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydExlbmd0aChsZW5ndGgpIHtcbiAgdXNlcigpLmFzc2VydChcbiAgICAgIC9eXFxkKyhcXC5cXGQrKT8ocHh8ZW18cmVtfHZofHZ3fHZtaW58dm1heHxjbXxtbXxxfGlufHBjfHB0KSQvLnRlc3QobGVuZ3RoKSxcbiAgICAgICdJbnZhbGlkIGxlbmd0aCB2YWx1ZTogJXMnLCBsZW5ndGgpO1xuICByZXR1cm4gLyoqIEB0eXBlIHshTGVuZ3RoRGVmfSAqLyAobGVuZ3RoKTtcbn1cblxuXG5cblxuLyoqXG4gKiBBc3NlcnRzIHRoYXQgdGhlIHN1cHBsaWVkIHZhbHVlIGlzIGEgQ1NTIExlbmd0aCB2YWx1ZVxuICogKGluY2x1ZGluZyBwZXJjZW50IHVuaXQpLlxuICogQHBhcmFtIHshTGVuZ3RoRGVmfHN0cmluZ30gbGVuZ3RoXG4gKiBAcmV0dXJuIHshTGVuZ3RoRGVmfVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0TGVuZ3RoT3JQZXJjZW50KGxlbmd0aCkge1xuICB1c2VyKCkuYXNzZXJ0KC9eXFxkKyhcXC5cXGQrKT8ocHh8ZW18cmVtfHZofHZ3fHZtaW58dm1heHwlKSQvLnRlc3QobGVuZ3RoKSxcbiAgICAgICdJbnZhbGlkIGxlbmd0aCBvciBwZXJjZW50IHZhbHVlOiAlcycsIGxlbmd0aCk7XG4gIHJldHVybiBsZW5ndGg7XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIHVuaXRzIGZyb20gdGhlIENTUyBsZW5ndGggdmFsdWUuXG4gKiBAcGFyYW0geyFMZW5ndGhEZWZ8c3RyaW5nfG51bGx8dW5kZWZpbmVkfSBsZW5ndGhcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExlbmd0aFVuaXRzKGxlbmd0aCkge1xuICBhc3NlcnRMZW5ndGgobGVuZ3RoKTtcbiAgZGV2KCkuYXNzZXJ0U3RyaW5nKGxlbmd0aCk7XG4gIGNvbnN0IG0gPSB1c2VyKCkuYXNzZXJ0KGxlbmd0aC5tYXRjaCgvW2Etel0rL2kpLFxuICAgICAgJ0ZhaWxlZCB0byByZWFkIHVuaXRzIGZyb20gJXMnLCBsZW5ndGgpO1xuICByZXR1cm4gbVswXTtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgdGhlIG51bWVyaWMgdmFsdWUgb2YgYSBDU1MgbGVuZ3RoIHZhbHVlLlxuICogQHBhcmFtIHshTGVuZ3RoRGVmfHN0cmluZ3xudWxsfHVuZGVmaW5lZH0gbGVuZ3RoXG4gKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGVuZ3RoTnVtZXJhbChsZW5ndGgpIHtcbiAgY29uc3QgcmVzID0gcGFyc2VGbG9hdChsZW5ndGgpO1xuICByZXR1cm4gaXNGaW5pdGVOdW1iZXIocmVzKSA/IHJlcyA6IHVuZGVmaW5lZDtcbn1cblxuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciB0aGUgdGFnTmFtZSBpcyBhIGtub3duIGVsZW1lbnQgdGhhdCBoYXMgbmF0dXJhbCBkaW1lbnNpb25zXG4gKiBpbiBvdXIgcnVudGltZSBvciB0aGUgYnJvd3Nlci5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0YWdOYW1lIFRoZSBlbGVtZW50IHRhZyBuYW1lLlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc05hdHVyYWxEaW1lbnNpb25zKHRhZ05hbWUpIHtcbiAgdGFnTmFtZSA9IHRhZ05hbWUudG9VcHBlckNhc2UoKTtcbiAgcmV0dXJuIG5hdHVyYWxEaW1lbnNpb25zX1t0YWdOYW1lXSAhPT0gdW5kZWZpbmVkO1xufVxuXG5cbi8qKlxuICogRGV0ZXJtaW5lcyB0aGUgZGVmYXVsdCBkaW1lbnNpb25zIGZvciBhbiBlbGVtZW50IHdoaWNoIGNvdWxkIHZhcnkgYWNyb3NzXG4gKiBkaWZmZXJlbnQgYnJvd3NlciBpbXBsZW1lbnRhdGlvbnMsIGxpa2UgPGF1ZGlvPiBmb3IgaW5zdGFuY2UuXG4gKiBUaGlzIG9wZXJhdGlvbiBjYW4gb25seSBiZSBjb21wbGV0ZWQgZm9yIGFuIGVsZW1lbnQgd2hpdGVsaXN0ZWQgYnlcbiAqIGBoYXNOYXR1cmFsRGltZW5zaW9uc2AuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcmV0dXJuIHtEaW1lbnNpb25zRGVmfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TmF0dXJhbERpbWVuc2lvbnMoZWxlbWVudCkge1xuICBjb25zdCB0YWdOYW1lID0gZWxlbWVudC50YWdOYW1lLnRvVXBwZXJDYXNlKCk7XG4gIGRldigpLmFzc2VydChuYXR1cmFsRGltZW5zaW9uc19bdGFnTmFtZV0gIT09IHVuZGVmaW5lZCk7XG4gIGlmICghbmF0dXJhbERpbWVuc2lvbnNfW3RhZ05hbWVdKSB7XG4gICAgY29uc3QgZG9jID0gZWxlbWVudC5vd25lckRvY3VtZW50O1xuICAgIGNvbnN0IG5hdHVyYWxUYWdOYW1lID0gdGFnTmFtZS5yZXBsYWNlKC9eQU1QXFwtLywgJycpO1xuICAgIGNvbnN0IHRlbXAgPSBkb2MuY3JlYXRlRWxlbWVudChuYXR1cmFsVGFnTmFtZSk7XG4gICAgLy8gRm9yIGF1ZGlvLCBzaG91bGQgbm8tb3AgZWxzZXdoZXJlLlxuICAgIHRlbXAuY29udHJvbHMgPSB0cnVlO1xuICAgIHNldFN0eWxlcyh0ZW1wLCB7XG4gICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgIHZpc2liaWxpdHk6ICdoaWRkZW4nLFxuICAgIH0pO1xuICAgIGRvYy5ib2R5LmFwcGVuZENoaWxkKHRlbXApO1xuICAgIG5hdHVyYWxEaW1lbnNpb25zX1t0YWdOYW1lXSA9IHtcbiAgICAgIHdpZHRoOiAodGVtcC4vKk9LKi9vZmZzZXRXaWR0aCB8fCAxKSArICdweCcsXG4gICAgICBoZWlnaHQ6ICh0ZW1wLi8qT0sqL29mZnNldEhlaWdodCB8fCAxKSArICdweCcsXG4gICAgfTtcbiAgICBkb2MuYm9keS5yZW1vdmVDaGlsZCh0ZW1wKTtcbiAgfVxuICByZXR1cm4gLyoqIEB0eXBlIHtEaW1lbnNpb25zRGVmfSAqLyAobmF0dXJhbERpbWVuc2lvbnNfW3RhZ05hbWVdKTtcbn1cblxuXG4vKipcbiAqIFdoZXRoZXIgdGhlIGxvYWRpbmcgY2FuIGJlIHNob3duIGZvciB0aGUgc3BlY2lmaWVkIGVsZW1lZW50LiBUaGlzIHNldCBoYXNcbiAqIHRvIGJlIGV4dGVybmFsaXplZCBzaW5jZSB0aGUgZWxlbWVudCdzIGltcGxlbWVudGF0aW9uIG1heSBub3QgYmVcbiAqIGRvd25sb2FkZWQgeWV0LlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTG9hZGluZ0FsbG93ZWQoZWxlbWVudCkge1xuICBjb25zdCB0YWdOYW1lID0gZWxlbWVudC50YWdOYW1lLnRvVXBwZXJDYXNlKCk7XG4gIGlmICh0YWdOYW1lID09ICdBTVAtQUQnIHx8IHRhZ05hbWUgPT0gJ0FNUC1FTUJFRCcpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gTE9BRElOR19FTEVNRU5UU19bdGFnTmFtZV0gfHwgZmFsc2U7XG59XG5cblxuLyoqXG4gKiBBcHBsaWVzIGxheW91dCB0byB0aGUgZWxlbWVudC4gVmlzaWJsZSBmb3IgdGVzdGluZyBvbmx5LlxuICpcbiAqIFxcICAgXFwgIC8gIFxcICAvICAgLyAvICAgXFwgICAgIHwgICBfICBcXCAgICAgfCAgXFwgfCAgfCB8ICB8IHwgIFxcIHwgIHwgIC8gX19fX198XG4gKiAgXFwgICBcXC8gICAgXFwvICAgLyAvICBeICBcXCAgICB8ICB8XykgIHwgICAgfCAgIFxcfCAgfCB8ICB8IHwgICBcXHwgIHwgfCAgfCAgX19cbiAqICAgXFwgICAgICAgICAgICAvIC8gIC9fXFwgIFxcICAgfCAgICAgIC8gICAgIHwgIC4gYCAgfCB8ICB8IHwgIC4gYCAgfCB8ICB8IHxfIHxcbiAqICAgIFxcICAgIC9cXCAgICAvIC8gIF9fX19fICBcXCAgfCAgfFxcICBcXC0tLS0ufCAgfFxcICAgfCB8ICB8IHwgIHxcXCAgIHwgfCAgfF9ffCB8XG4gKiAgICAgXFxfXy8gIFxcX18vIC9fXy8gICAgIFxcX19cXCB8IF98IGAuX19fX198fF9ffCBcXF9ffCB8X198IHxfX3wgXFxfX3wgIFxcX19fX19ffFxuICpcbiAqIFRoZSBlcXVpdmFsZW50IG9mIHRoaXMgbWV0aG9kIGlzIHVzZWQgZm9yIHNlcnZlci1zaWRlIHJlbmRlcmluZyAoU1NSKSBhbmRcbiAqIGFueSBjaGFuZ2VzIG1hZGUgdG8gaXQgbXVzdCBiZSBtYWRlIGluIGNvb3JkaW5hdGlvbiB3aXRoIGNhY2hlcyB0aGF0XG4gKiBpbXBsZW1lbnQgU1NSLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiBTU1Igc2VlIGJpdC5seS9hbXAtc3NyLlxuICpcbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEByZXR1cm4geyFMYXlvdXR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseVN0YXRpY0xheW91dChlbGVtZW50KSB7XG4gIC8vIENoZWNrIGlmIHRoZSBsYXlvdXQgaGFzIGFscmVhZHkgYmVlbiBkb25lIGJ5IHNlcnZlci1zaWRlIHJlbmRlcmluZy4gVGhlXG4gIC8vIGRvY3VtZW50IG1heSBiZSB2aXNpYmxlIHRvIHRoZSB1c2VyIGlmIHRoZSBib2lsZXJwbGF0ZSB3YXMgcmVtb3ZlZCBzb1xuICAvLyBwbGVhc2UgdGFrZSBjYXJlIGluIG1ha2luZyBjaGFuZ2VzIGhlcmUuXG4gIGNvbnN0IGNvbXBsZXRlZExheW91dEF0dHIgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnaS1hbXBodG1sLWxheW91dCcpO1xuICBpZiAoY29tcGxldGVkTGF5b3V0QXR0cikge1xuICAgIGNvbnN0IGxheW91dCA9IC8qKiBAdHlwZSB7IUxheW91dH0gKi8gKGRldigpLmFzc2VydChcbiAgICAgICAgcGFyc2VMYXlvdXQoY29tcGxldGVkTGF5b3V0QXR0cikpKTtcbiAgICBpZiAoKGxheW91dCA9PSBMYXlvdXQuUkVTUE9OU0lWRSB8fCBsYXlvdXQgPT0gTGF5b3V0LklOVFJJTlNJQylcbiAgICAgICYmIGVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQpIHtcbiAgICAgIC8vIEZpbmQgc2l6ZXIsIGJ1dCBhc3N1bWUgdGhhdCBpdCBtaWdodCBub3QgaGF2ZSBiZWVuIHBhcnNlZCB5ZXQuXG4gICAgICBlbGVtZW50LnNpemVyRWxlbWVudCA9XG4gICAgICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdpLWFtcGh0bWwtc2l6ZXInKSB8fCB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIGlmIChsYXlvdXQgPT0gTGF5b3V0Lk5PRElTUExBWSkge1xuICAgICAgYXBwbHlOb0Rpc3BsYXlMYXlvdXQoZWxlbWVudCk7XG4gICAgfVxuICAgIHJldHVybiBsYXlvdXQ7XG4gIH1cblxuICAvLyBJZiB0aGUgbGF5b3V0IHdhcyBhbHJlYWR5IGRvbmUgYnkgc2VydmVyLXNpZGUgcmVuZGVyaW5nIChTU1IpLCB0aGVuIHRoZVxuICAvLyBjb2RlIGJlbG93IHdpbGwgbm90IHJ1bi4gQW55IGNoYW5nZXMgYmVsb3cgd2lsbCBuZWNlc3NpdGF0ZSBhIGNoYW5nZSB0byBTU1JcbiAgLy8gYW5kIG11c3QgYmUgY29vcmRpbmF0ZWQgd2l0aCBjYWNoZXMgdGhhdCBpbXBsZW1lbnQgU1NSLiBTZWUgYml0Lmx5L2FtcC1zc3IuXG5cbiAgLy8gUGFyc2UgbGF5b3V0IGZyb20gdGhlIGVsZW1lbnQuXG4gIGNvbnN0IGxheW91dEF0dHIgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnbGF5b3V0Jyk7XG4gIGNvbnN0IHdpZHRoQXR0ciA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCd3aWR0aCcpO1xuICBjb25zdCBoZWlnaHRBdHRyID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2hlaWdodCcpO1xuICBjb25zdCBzaXplc0F0dHIgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnc2l6ZXMnKTtcbiAgY29uc3QgaGVpZ2h0c0F0dHIgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnaGVpZ2h0cycpO1xuXG4gIC8vIElucHV0IGxheW91dCBhdHRyaWJ1dGVzLlxuICBjb25zdCBpbnB1dExheW91dCA9IGxheW91dEF0dHIgPyBwYXJzZUxheW91dChsYXlvdXRBdHRyKSA6IG51bGw7XG4gIHVzZXIoKS5hc3NlcnQoaW5wdXRMYXlvdXQgIT09IHVuZGVmaW5lZCwgJ1Vua25vd24gbGF5b3V0OiAlcycsIGxheW91dEF0dHIpO1xuICAvKiogQGNvbnN0IHtzdHJpbmd8bnVsbHx1bmRlZmluZWR9ICovXG4gIGNvbnN0IGlucHV0V2lkdGggPSAod2lkdGhBdHRyICYmIHdpZHRoQXR0ciAhPSAnYXV0bycpID9cbiAgICBwYXJzZUxlbmd0aCh3aWR0aEF0dHIpIDogd2lkdGhBdHRyO1xuICB1c2VyKCkuYXNzZXJ0KGlucHV0V2lkdGggIT09IHVuZGVmaW5lZCwgJ0ludmFsaWQgd2lkdGggdmFsdWU6ICVzJywgd2lkdGhBdHRyKTtcbiAgLyoqIEBjb25zdCB7c3RyaW5nfG51bGx8dW5kZWZpbmVkfSAqL1xuICBjb25zdCBpbnB1dEhlaWdodCA9IChoZWlnaHRBdHRyICYmIGhlaWdodEF0dHIgIT0gJ2ZsdWlkJykgP1xuICAgIHBhcnNlTGVuZ3RoKGhlaWdodEF0dHIpIDogaGVpZ2h0QXR0cjtcbiAgdXNlcigpLmFzc2VydChpbnB1dEhlaWdodCAhPT0gdW5kZWZpbmVkLCAnSW52YWxpZCBoZWlnaHQgdmFsdWU6ICVzJyxcbiAgICAgIGhlaWdodEF0dHIpO1xuXG4gIC8vIEVmZmVjdGl2ZSBsYXlvdXQgYXR0cmlidXRlcy4gVGhlc2UgYXJlIGVmZmVjdGl2ZWx5IGNvbnN0YW50cy5cbiAgbGV0IHdpZHRoO1xuICBsZXQgaGVpZ2h0O1xuICBsZXQgbGF5b3V0O1xuXG4gIC8vIENhbGN1bGF0ZSBlZmZlY3RpdmUgd2lkdGggYW5kIGhlaWdodC5cbiAgaWYgKCghaW5wdXRMYXlvdXQgfHwgaW5wdXRMYXlvdXQgPT0gTGF5b3V0LkZJWEVEIHx8XG4gICAgICBpbnB1dExheW91dCA9PSBMYXlvdXQuRklYRURfSEVJR0hUKSAmJlxuICAgICAgKCFpbnB1dFdpZHRoIHx8ICFpbnB1dEhlaWdodCkgJiYgaGFzTmF0dXJhbERpbWVuc2lvbnMoZWxlbWVudC50YWdOYW1lKSkge1xuICAgIC8vIERlZmF1bHQgd2lkdGggYW5kIGhlaWdodDogaGFuZGxlIGVsZW1lbnRzIHRoYXQgZG8gbm90IHNwZWNpZnkgYVxuICAgIC8vIHdpZHRoL2hlaWdodCBhbmQgYXJlIGRlZmluZWQgdG8gaGF2ZSBuYXR1cmFsIGJyb3dzZXIgZGltZW5zaW9ucy5cbiAgICBjb25zdCBkaW1lbnNpb25zID0gZ2V0TmF0dXJhbERpbWVuc2lvbnMoZWxlbWVudCk7XG4gICAgd2lkdGggPSAoaW5wdXRXaWR0aCB8fCBpbnB1dExheW91dCA9PSBMYXlvdXQuRklYRURfSEVJR0hUKSA/IGlucHV0V2lkdGggOlxuICAgICAgZGltZW5zaW9ucy53aWR0aDtcbiAgICBoZWlnaHQgPSBpbnB1dEhlaWdodCB8fCBkaW1lbnNpb25zLmhlaWdodDtcbiAgfSBlbHNlIHtcbiAgICB3aWR0aCA9IGlucHV0V2lkdGg7XG4gICAgaGVpZ2h0ID0gaW5wdXRIZWlnaHQ7XG4gIH1cblxuICAvLyBDYWxjdWxhdGUgZWZmZWN0aXZlIGxheW91dC5cbiAgaWYgKGlucHV0TGF5b3V0KSB7XG4gICAgbGF5b3V0ID0gaW5wdXRMYXlvdXQ7XG4gIH0gZWxzZSBpZiAoIXdpZHRoICYmICFoZWlnaHQpIHtcbiAgICBsYXlvdXQgPSBMYXlvdXQuQ09OVEFJTkVSO1xuICB9IGVsc2UgaWYgKGhlaWdodCA9PSAnZmx1aWQnKSB7XG4gICAgbGF5b3V0ID0gTGF5b3V0LkZMVUlEO1xuICB9IGVsc2UgaWYgKGhlaWdodCAmJiAoIXdpZHRoIHx8IHdpZHRoID09ICdhdXRvJykpIHtcbiAgICBsYXlvdXQgPSBMYXlvdXQuRklYRURfSEVJR0hUO1xuICB9IGVsc2UgaWYgKGhlaWdodCAmJiB3aWR0aCAmJiAoc2l6ZXNBdHRyIHx8IGhlaWdodHNBdHRyKSkge1xuICAgIGxheW91dCA9IExheW91dC5SRVNQT05TSVZFO1xuICB9IGVsc2Uge1xuICAgIGxheW91dCA9IExheW91dC5GSVhFRDtcbiAgfVxuXG4gIC8vIFZlcmlmeSBsYXlvdXQgYXR0cmlidXRlcy5cbiAgaWYgKGxheW91dCA9PSBMYXlvdXQuRklYRUQgfHwgbGF5b3V0ID09IExheW91dC5GSVhFRF9IRUlHSFQgfHxcbiAgICAgIGxheW91dCA9PSBMYXlvdXQuUkVTUE9OU0lWRSB8fCBsYXlvdXQgPT0gTGF5b3V0LklOVFJJTlNJQykge1xuICAgIHVzZXIoKS5hc3NlcnQoaGVpZ2h0LCAnRXhwZWN0ZWQgaGVpZ2h0IHRvIGJlIGF2YWlsYWJsZTogJXMnLCBoZWlnaHRBdHRyKTtcbiAgfVxuICBpZiAobGF5b3V0ID09IExheW91dC5GSVhFRF9IRUlHSFQpIHtcbiAgICB1c2VyKCkuYXNzZXJ0KCF3aWR0aCB8fCB3aWR0aCA9PSAnYXV0bycsXG4gICAgICAgICdFeHBlY3RlZCB3aWR0aCB0byBiZSBlaXRoZXIgYWJzZW50IG9yIGVxdWFsIFwiYXV0b1wiICcgK1xuICAgICAgICAnZm9yIGZpeGVkLWhlaWdodCBsYXlvdXQ6ICVzJywgd2lkdGhBdHRyKTtcbiAgfVxuICBpZiAobGF5b3V0ID09IExheW91dC5GSVhFRCB8fCBsYXlvdXQgPT0gTGF5b3V0LlJFU1BPTlNJVkUgfHxcbiAgICAgIGxheW91dCA9PSBMYXlvdXQuSU5UUklOU0lDKSB7XG4gICAgdXNlcigpLmFzc2VydCh3aWR0aCAmJiB3aWR0aCAhPSAnYXV0bycsXG4gICAgICAgICdFeHBlY3RlZCB3aWR0aCB0byBiZSBhdmFpbGFibGUgYW5kIG5vdCBlcXVhbCB0byBcImF1dG9cIjogJXMnLFxuICAgICAgICB3aWR0aEF0dHIpO1xuICB9XG5cbiAgaWYgKGxheW91dCA9PSBMYXlvdXQuUkVTUE9OU0lWRSB8fCBsYXlvdXQgPT0gTGF5b3V0LklOVFJJTlNJQykge1xuICAgIHVzZXIoKS5hc3NlcnQoZ2V0TGVuZ3RoVW5pdHMod2lkdGgpID09IGdldExlbmd0aFVuaXRzKGhlaWdodCksXG4gICAgICAgICdMZW5ndGggdW5pdHMgc2hvdWxkIGJlIHRoZSBzYW1lIGZvciB3aWR0aCBhbmQgaGVpZ2h0OiAlcywgJXMnLFxuICAgICAgICB3aWR0aEF0dHIsIGhlaWdodEF0dHIpO1xuICB9IGVsc2Uge1xuICAgIHVzZXIoKS5hc3NlcnQoaGVpZ2h0c0F0dHIgPT09IG51bGwsXG4gICAgICAgICdVbmV4cGVjdGVkIFwiaGVpZ2h0c1wiIGF0dHJpYnV0ZSBmb3Igbm9uZS1yZXNwb25zaXZlIGxheW91dCcpO1xuICB9XG5cbiAgLy8gQXBwbHkgVUkuXG4gIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChnZXRMYXlvdXRDbGFzcyhsYXlvdXQpKTtcbiAgaWYgKGlzTGF5b3V0U2l6ZURlZmluZWQobGF5b3V0KSkge1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaS1hbXBodG1sLWxheW91dC1zaXplLWRlZmluZWQnKTtcbiAgfVxuICBpZiAobGF5b3V0ID09IExheW91dC5OT0RJU1BMQVkpIHtcbiAgICAvLyBDU1MgZGVmaW5lcyBsYXlvdXQ9bm9kaXNwbGF5IGF1dG9tYXRpY2FsbHkgd2l0aCBgZGlzcGxheTpub25lYC4gVGh1c1xuICAgIC8vIG5vIGFkZGl0aW9uYWwgc3R5bGluZyBpcyBuZWVkZWQuXG4gICAgYXBwbHlOb0Rpc3BsYXlMYXlvdXQoZWxlbWVudCk7XG4gIH0gZWxzZSBpZiAobGF5b3V0ID09IExheW91dC5GSVhFRCkge1xuICAgIHNldFN0eWxlcyhlbGVtZW50LCB7XG4gICAgICB3aWR0aDogZGV2KCkuYXNzZXJ0U3RyaW5nKHdpZHRoKSxcbiAgICAgIGhlaWdodDogZGV2KCkuYXNzZXJ0U3RyaW5nKGhlaWdodCksXG4gICAgfSk7XG4gIH0gZWxzZSBpZiAobGF5b3V0ID09IExheW91dC5GSVhFRF9IRUlHSFQpIHtcbiAgICBzZXRTdHlsZShlbGVtZW50LCAnaGVpZ2h0JywgZGV2KCkuYXNzZXJ0U3RyaW5nKGhlaWdodCkpO1xuICB9IGVsc2UgaWYgKGxheW91dCA9PSBMYXlvdXQuUkVTUE9OU0lWRSkge1xuICAgIGNvbnN0IHNpemVyID0gZWxlbWVudC5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ktYW1waHRtbC1zaXplcicpO1xuICAgIHNldFN0eWxlcyhzaXplciwge1xuICAgICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgICAgIHBhZGRpbmdUb3A6XG4gICAgICAgICgoZ2V0TGVuZ3RoTnVtZXJhbChoZWlnaHQpIC8gZ2V0TGVuZ3RoTnVtZXJhbCh3aWR0aCkpICogMTAwKSArICclJyxcbiAgICB9KTtcbiAgICBlbGVtZW50Lmluc2VydEJlZm9yZShzaXplciwgZWxlbWVudC5maXJzdENoaWxkKTtcbiAgICBlbGVtZW50LnNpemVyRWxlbWVudCA9IHNpemVyO1xuICB9IGVsc2UgaWYgKGxheW91dCA9PSBMYXlvdXQuSU5UUklOU0lDKSB7XG4gICAgLy8gSW50cmluc2ljIHVzZXMgYW4gc3ZnIGluc2lkZSB0aGUgc2l6ZXIgZWxlbWVudCByYXRoZXIgdGhhbiB0aGUgcGFkZGluZ1xuICAgIC8vIHRyaWNrIE5vdGUgYSBuYWtlZCBzdmcgd29uJ3Qgd29yayBiZWNhc3VlIG90aGVyIHRoaW5nIGV4cGVjdCB0aGVcbiAgICAvLyBpLWFtcGh0bWwtc2l6ZXIgZWxlbWVudFxuICAgIGNvbnN0IHNpemVyID0gaHRtbEZvcihlbGVtZW50KWBcbiAgICAgIDxpLWFtcGh0bWwtc2l6ZXIgY2xhc3M9XCJpLWFtcGh0bWwtc2l6ZXJcIj5cbiAgICAgICAgPGltZyBjbGFzcz1cImktYW1waHRtbC1pbnRyaW5zaWMtc2l6ZXJcIiAvPlxuICAgICAgPC9pLWFtcGh0bWwtc2l6ZXI+YDtcbiAgICBjb25zdCBpbnRyaW5zaWNTaXplciA9IHNpemVyLmZpcnN0RWxlbWVudENoaWxkO1xuICAgIGludHJpbnNpY1NpemVyLnNldEF0dHJpYnV0ZSgnc3JjJyxcbiAgICAgICAgYGRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LDxzdmcgaGVpZ2h0PVwiJHtoZWlnaHR9XCIgd2lkdGg9XCIke3dpZHRofVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2ZXJzaW9uPVwiMS4xXCIvPmApO1xuICAgIGVsZW1lbnQuaW5zZXJ0QmVmb3JlKHNpemVyLCBlbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgIC8vIFRPRE8oanBldHRpdHQpOiBzaXplciBpcyBsZWFrZWQgYW5kIGNhbid0IGJlIGNsZWFuZWQgdXAuXG4gICAgZWxlbWVudC5zaXplckVsZW1lbnQgPSBpbnRyaW5zaWNTaXplcjtcbiAgfSBlbHNlIGlmIChsYXlvdXQgPT0gTGF5b3V0LkZJTEwpIHtcbiAgICAvLyBEbyBub3RoaW5nLlxuICB9IGVsc2UgaWYgKGxheW91dCA9PSBMYXlvdXQuQ09OVEFJTkVSKSB7XG4gICAgLy8gRG8gbm90aGluZy4gRWxlbWVudHMgdGhlbXNlbHZlcyB3aWxsIGNoZWNrIHdoZXRoZXIgdGhlIHN1cHBsaWVkXG4gICAgLy8gbGF5b3V0IHZhbHVlIGlzIGFjY2VwdGFibGUuIEluIHBhcnRpY3VsYXIgY29udGFpbmVyIGlzIG9ubHkgT0tcbiAgICAvLyBzb21ldGltZXMuXG4gIH0gZWxzZSBpZiAobGF5b3V0ID09IExheW91dC5GTEVYX0lURU0pIHtcbiAgICAvLyBTZXQgaGVpZ2h0IGFuZCB3aWR0aCB0byBhIGZsZXggaXRlbSBpZiB0aGV5IGV4aXN0LlxuICAgIC8vIFRoZSBzaXplIHNldCB0byBhIGZsZXggaXRlbSBjb3VsZCBiZSBvdmVycmlkZGVuIGJ5IGBkaXNwbGF5OiBmbGV4YCBsYXRlci5cbiAgICBpZiAod2lkdGgpIHtcbiAgICAgIHNldFN0eWxlKGVsZW1lbnQsICd3aWR0aCcsIHdpZHRoKTtcbiAgICB9XG4gICAgaWYgKGhlaWdodCkge1xuICAgICAgc2V0U3R5bGUoZWxlbWVudCwgJ2hlaWdodCcsIGhlaWdodCk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGxheW91dCA9PSBMYXlvdXQuRkxVSUQpIHtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2ktYW1waHRtbC1sYXlvdXQtYXdhaXRpbmctc2l6ZScpO1xuICAgIGlmICh3aWR0aCkge1xuICAgICAgc2V0U3R5bGUoZWxlbWVudCwgJ3dpZHRoJywgd2lkdGgpO1xuICAgIH1cbiAgICBzZXRTdHlsZShlbGVtZW50LCAnaGVpZ2h0JywgMCk7XG4gIH1cbiAgcmV0dXJuIGxheW91dDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqL1xuZnVuY3Rpb24gYXBwbHlOb0Rpc3BsYXlMYXlvdXQoZWxlbWVudCkge1xuICAvLyBUT0RPKGR2b3l0ZW5rbywgIzkzNTMpOiBvbmNlIGB0b2dnbGVMYXlvdXREaXNwbGF5YCBBUEkgaGFzIGJlZW4gZGVwbG95ZWRcbiAgLy8gZXZlcnl3aGVyZSwgc3dpdGNoIGFsbCByZWxldmFudCBlbGVtZW50cyB0byB0aGlzIEFQSS4gSW4gdGhlIG1lYW50aW1lLFxuICAvLyBzaW1wbHkgdW5ibG9jayBkaXNwbGF5IHRvZ2dsaW5nIHZpYSBgc3R5bGU9XCJkaXNwbGF5OiAuLi5cImAuXG4gIHNldFN0eWxlKGVsZW1lbnQsICdkaXNwbGF5JywgJ25vbmUnKTtcbiAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdpLWFtcGh0bWwtZGlzcGxheScpO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Z2V0TW9kZX0gZnJvbSAnLi9tb2RlJztcbmltcG9ydCB7Z2V0TW9kZU9iamVjdH0gZnJvbSAnLi9tb2RlLW9iamVjdCc7XG5pbXBvcnQge2lzRW51bVZhbHVlfSBmcm9tICcuL3R5cGVzJztcblxuLyoqXG4gKiBUcmlwbGUgemVybyB3aWR0aCBzcGFjZS5cbiAqXG4gKiBUaGlzIGlzIGFkZGVkIHRvIHVzZXIgZXJyb3IgbWVzc2FnZXMsIHNvIHRoYXQgd2UgY2FuIGxhdGVyIGlkZW50aWZ5XG4gKiB0aGVtLCB3aGVuIHRoZSBvbmx5IHRoaW5nIHRoYXQgd2UgaGF2ZSBpcyB0aGUgbWVzc2FnZS4gVGhpcyBpcyB0aGVcbiAqIGNhc2UgaW4gbWFueSBicm93c2VycyB3aGVuIHRoZSBnbG9iYWwgZXhjZXB0aW9uIGhhbmRsZXIgaXMgaW52b2tlZC5cbiAqXG4gKiBAY29uc3Qge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IFVTRVJfRVJST1JfU0VOVElORUwgPSAnXFx1MjAwQlxcdTIwMEJcXHUyMDBCJztcblxuXG4vKipcbiAqIEZvdXIgemVybyB3aWR0aCBzcGFjZS5cbiAqXG4gKiBAY29uc3Qge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IFVTRVJfRVJST1JfRU1CRURfU0VOVElORUwgPSAnXFx1MjAwQlxcdTIwMEJcXHUyMDBCXFx1MjAwQic7XG5cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZVxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGlzIG1lc3NhZ2Ugd2FzIGEgdXNlciBlcnJvci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVXNlckVycm9yTWVzc2FnZShtZXNzYWdlKSB7XG4gIHJldHVybiBtZXNzYWdlLmluZGV4T2YoVVNFUl9FUlJPUl9TRU5USU5FTCkgPj0gMDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZVxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGlzIG1lc3NhZ2Ugd2FzIGEgYSB1c2VyIGVycm9yIGZyb20gYW4gaWZyYW1lIGVtYmVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNVc2VyRXJyb3JFbWJlZChtZXNzYWdlKSB7XG4gIHJldHVybiBtZXNzYWdlLmluZGV4T2YoVVNFUl9FUlJPUl9FTUJFRF9TRU5USU5FTCkgPj0gMDtcbn1cblxuXG4vKipcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKiBAcHJpdmF0ZSBWaXNpYmxlIGZvciB0ZXN0aW5nIG9ubHkuXG4gKi9cbmV4cG9ydCBjb25zdCBMb2dMZXZlbCA9IHtcbiAgT0ZGOiAwLFxuICBFUlJPUjogMSxcbiAgV0FSTjogMixcbiAgSU5GTzogMyxcbiAgRklORTogNCxcbn07XG5cbi8qKlxuICogU2V0cyByZXBvcnRFcnJvciBmdW5jdGlvbi4gQ2FsbGVkIGZyb20gZXJyb3IuanMgdG8gYnJlYWsgY3ljbGljXG4gKiBkZXBlbmRlbmN5LlxuICogQHBhcmFtIHtmdW5jdGlvbigqLCAhRWxlbWVudD0pfHVuZGVmaW5lZH0gZm5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldFJlcG9ydEVycm9yKGZuKSB7XG4gIHNlbGYucmVwb3J0RXJyb3IgPSBmbjtcbn1cblxuLyoqXG4gKiBAdHlwZSB7IUxvZ0xldmVsfHVuZGVmaW5lZH1cbiAqIEBwcml2YXRlXG4gKi9cbmxldCBsZXZlbE92ZXJyaWRlXyA9IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBAcGFyYW0geyFMb2dMZXZlbH0gbGV2ZWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG92ZXJyaWRlTG9nTGV2ZWwobGV2ZWwpIHtcbiAgbGV2ZWxPdmVycmlkZV8gPSBsZXZlbDtcbn1cblxuLyoqXG4gKiBMb2dnaW5nIGNsYXNzLiBVc2Ugb2Ygc2VudGluZWwgc3RyaW5nIGluc3RlYWQgb2YgYSBib29sZWFuIHRvIGNoZWNrIHVzZXIvZGV2XG4gKiBlcnJvcnMgYmVjYXVzZSBlcnJvcnMgY291bGQgYmUgcmV0aHJvd24gYnkgc29tZSBuYXRpdmUgY29kZSBhcyBhIG5ldyBlcnJvcixcbiAqIGFuZCBvbmx5IGEgbWVzc2FnZSB3b3VsZCBzdXJ2aXZlLiBBbHNvLCBzb21lIGJyb3dzZXIgZG9u4oCZdCBzdXBwb3J0IGEgNXRoXG4gKiBlcnJvciBvYmplY3QgYXJndW1lbnQgaW4gd2luZG93Lm9uZXJyb3IuIExpc3Qgb2Ygc3VwcG9ydGluZyBicm93c2VyIGNhbiBiZVxuICogZm91bmQgaGVyZTpcbiAqIGh0dHBzOi8vYmxvZy5zZW50cnkuaW8vMjAxNi8wMS8wNC9jbGllbnQtamF2YXNjcmlwdC1yZXBvcnRpbmctd2luZG93LW9uZXJyb3IuaHRtbFxuICogQGZpbmFsXG4gKiBAcHJpdmF0ZSBWaXNpYmxlIGZvciB0ZXN0aW5nIG9ubHkuXG4gKi9cbmV4cG9ydCBjbGFzcyBMb2cge1xuICAvKipcbiAgICogb3B0X3N1ZmZpeCB3aWxsIGJlIGFwcGVuZGVkIHRvIGVycm9yIG1lc3NhZ2UgdG8gaWRlbnRpZnkgdGhlIHR5cGUgb2YgdGhlXG4gICAqIGVycm9yIG1lc3NhZ2UuIFdlIGNhbid0IHJlbHkgb24gdGhlIGVycm9yIG9iamVjdCB0byBwYXNzIGFsb25nIHRoZSB0eXBlXG4gICAqIGJlY2F1c2Ugc29tZSBicm93c2VycyBkbyBub3QgaGF2ZSB0aGlzIHBhcmFtIGluIGl0cyB3aW5kb3cub25lcnJvciBBUEkuXG4gICAqIFNlZTpcbiAgICogaHR0cHM6Ly9ibG9nLnNlbnRyeS5pby8yMDE2LzAxLzA0L2NsaWVudC1qYXZhc2NyaXB0LXJlcG9ydGluZy13aW5kb3ctb25lcnJvci5odG1sXG4gICAqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIS4vbW9kZS5Nb2RlRGVmKTohTG9nTGV2ZWx9IGxldmVsRnVuY1xuICAgKiBAcGFyYW0ge3N0cmluZz19IG9wdF9zdWZmaXhcbiAgICovXG4gIGNvbnN0cnVjdG9yKHdpbiwgbGV2ZWxGdW5jLCBvcHRfc3VmZml4KSB7XG4gICAgLyoqXG4gICAgICogSW4gdGVzdHMgd2UgdXNlIHRoZSBtYWluIHRlc3Qgd2luZG93IGluc3RlYWQgb2YgdGhlIGlmcmFtZSB3aGVyZVxuICAgICAqIHRoZSB0ZXN0cyBydW5zIGJlY2F1c2Ugb25seSB0aGUgZm9ybWVyIGlzIHJlbGF5ZWQgdG8gdGhlIGNvbnNvbGUuXG4gICAgICogQGNvbnN0IHshV2luZG93fVxuICAgICAqL1xuICAgIHRoaXMud2luID0gKGdldE1vZGUoKS50ZXN0ICYmIHdpbi5BTVBfVEVTVF9JRlJBTUUpID8gd2luLnBhcmVudCA6IHdpbjtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge2Z1bmN0aW9uKCEuL21vZGUuTW9kZURlZik6IUxvZ0xldmVsfSAqL1xuICAgIHRoaXMubGV2ZWxGdW5jXyA9IGxldmVsRnVuYztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFMb2dMZXZlbH0gKi9cbiAgICB0aGlzLmxldmVsXyA9IHRoaXMuZGVmYXVsdExldmVsXygpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMuc3VmZml4XyA9IG9wdF9zdWZmaXggfHwgJyc7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IUxvZ0xldmVsfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0TGV2ZWxfKCkge1xuICAgIHJldHVybiAobGV2ZWxPdmVycmlkZV8gIT09IHVuZGVmaW5lZCkgPyBsZXZlbE92ZXJyaWRlXyA6IHRoaXMubGV2ZWxfO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFMb2dMZXZlbH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGRlZmF1bHRMZXZlbF8oKSB7XG4gICAgLy8gTm8gY29uc29sZSAtIGNhbid0IGVuYWJsZSBsb2dnaW5nLlxuICAgIGlmICghdGhpcy53aW4uY29uc29sZSB8fCAhdGhpcy53aW4uY29uc29sZS5sb2cpIHtcbiAgICAgIHJldHVybiBMb2dMZXZlbC5PRkY7XG4gICAgfVxuXG4gICAgLy8gTG9nZ2luZyBoYXMgYmVlbiBleHBsaWNpdGx5IGRpc2FibGVkLlxuICAgIGlmIChnZXRNb2RlKCkubG9nID09ICcwJykge1xuICAgICAgcmV0dXJuIExvZ0xldmVsLk9GRjtcbiAgICB9XG5cbiAgICAvLyBMb2dnaW5nIGlzIGVuYWJsZWQgZm9yIHRlc3RzIGRpcmVjdGx5LlxuICAgIGlmIChnZXRNb2RlKCkudGVzdCAmJiB0aGlzLndpbi5FTkFCTEVfTE9HKSB7XG4gICAgICByZXR1cm4gTG9nTGV2ZWwuRklORTtcbiAgICB9XG5cbiAgICAvLyBMb2NhbERldiBieSBkZWZhdWx0IGFsbG93cyBJTkZPIGxldmVsLCB1bmxlc3Mgb3ZlcnJpZGVuIGJ5IGAjbG9nYC5cbiAgICBpZiAoZ2V0TW9kZSgpLmxvY2FsRGV2ICYmICFnZXRNb2RlKCkubG9nKSB7XG4gICAgICByZXR1cm4gTG9nTGV2ZWwuSU5GTztcbiAgICB9XG5cbiAgICAvLyBEZWxlZ2F0ZSB0byB0aGUgc3BlY2lmaWMgcmVzb2x2ZXIuXG4gICAgcmV0dXJuIHRoaXMubGV2ZWxGdW5jXyhnZXRNb2RlT2JqZWN0KCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0YWdcbiAgICogQHBhcmFtIHtzdHJpbmd9IGxldmVsXG4gICAqIEBwYXJhbSB7IUFycmF5fSBtZXNzYWdlc1xuICAgKi9cbiAgbXNnXyh0YWcsIGxldmVsLCBtZXNzYWdlcykge1xuICAgIGlmICh0aGlzLmdldExldmVsXygpICE9IExvZ0xldmVsLk9GRikge1xuICAgICAgbGV0IGZuID0gdGhpcy53aW4uY29uc29sZS5sb2c7XG4gICAgICBpZiAobGV2ZWwgPT0gJ0VSUk9SJykge1xuICAgICAgICBmbiA9IHRoaXMud2luLmNvbnNvbGUuZXJyb3IgfHwgZm47XG4gICAgICB9IGVsc2UgaWYgKGxldmVsID09ICdJTkZPJykge1xuICAgICAgICBmbiA9IHRoaXMud2luLmNvbnNvbGUuaW5mbyB8fCBmbjtcbiAgICAgIH0gZWxzZSBpZiAobGV2ZWwgPT0gJ1dBUk4nKSB7XG4gICAgICAgIGZuID0gdGhpcy53aW4uY29uc29sZS53YXJuIHx8IGZuO1xuICAgICAgfVxuICAgICAgaWYgKGdldE1vZGUoKS5sb2NhbERldikge1xuICAgICAgICBtZXNzYWdlcy51bnNoaWZ0KCdbJyArIHRhZyArICddJyk7XG4gICAgICB9XG4gICAgICBmbi5hcHBseSh0aGlzLndpbi5jb25zb2xlLCBtZXNzYWdlcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIGxvZ2dpbmcgaXMgZW5hYmxlZC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzRW5hYmxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRMZXZlbF8oKSAhPSBMb2dMZXZlbC5PRkY7XG4gIH1cblxuICAvKipcbiAgICogUmVwb3J0cyBhIGZpbmUtZ3JhaW5lZCBtZXNzYWdlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnXG4gICAqIEBwYXJhbSB7Li4uKn0gdmFyX2FyZ3NcbiAgICovXG4gIGZpbmUodGFnLCB2YXJfYXJncykge1xuICAgIGlmICh0aGlzLmdldExldmVsXygpID49IExvZ0xldmVsLkZJTkUpIHtcbiAgICAgIHRoaXMubXNnXyh0YWcsICdGSU5FJywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlcG9ydHMgYSBpbmZvcm1hdGlvbmFsIG1lc3NhZ2UuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0YWdcbiAgICogQHBhcmFtIHsuLi4qfSB2YXJfYXJnc1xuICAgKi9cbiAgaW5mbyh0YWcsIHZhcl9hcmdzKSB7XG4gICAgaWYgKHRoaXMuZ2V0TGV2ZWxfKCkgPj0gTG9nTGV2ZWwuSU5GTykge1xuICAgICAgdGhpcy5tc2dfKHRhZywgJ0lORk8nLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVwb3J0cyBhIHdhcm5pbmcgbWVzc2FnZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRhZ1xuICAgKiBAcGFyYW0gey4uLip9IHZhcl9hcmdzXG4gICAqL1xuICB3YXJuKHRhZywgdmFyX2FyZ3MpIHtcbiAgICBpZiAodGhpcy5nZXRMZXZlbF8oKSA+PSBMb2dMZXZlbC5XQVJOKSB7XG4gICAgICB0aGlzLm1zZ18odGFnLCAnV0FSTicsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXBvcnRzIGFuIGVycm9yIG1lc3NhZ2UuIElmIHRoZSBsb2dnaW5nIGlzIGRpc2FibGVkLCB0aGUgZXJyb3IgaXMgcmV0aHJvd25cbiAgICogYXN5bmNocm9ub3VzbHkuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0YWdcbiAgICogQHBhcmFtIHsuLi4qfSB2YXJfYXJnc1xuICAgKiBAcmV0dXJuIHshRXJyb3J8dW5kZWZpbmVkfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZXJyb3JfKHRhZywgdmFyX2FyZ3MpIHtcbiAgICBpZiAodGhpcy5nZXRMZXZlbF8oKSA+PSBMb2dMZXZlbC5FUlJPUikge1xuICAgICAgdGhpcy5tc2dfKHRhZywgJ0VSUk9SJywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGVycm9yID0gY3JlYXRlRXJyb3JWYXJncy5hcHBseShudWxsLFxuICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICAgICAgdGhpcy5wcmVwYXJlRXJyb3JfKGVycm9yKTtcbiAgICAgIHJldHVybiBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVwb3J0cyBhbiBlcnJvciBtZXNzYWdlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnXG4gICAqIEBwYXJhbSB7Li4uKn0gdmFyX2FyZ3NcbiAgICovXG4gIGVycm9yKHRhZywgdmFyX2FyZ3MpIHtcbiAgICBjb25zdCBlcnJvciA9IHRoaXMuZXJyb3JfLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBlcnJvci5uYW1lID0gdGFnIHx8IGVycm9yLm5hbWU7XG4gICAgICAvLyByZXBvcnRFcnJvciBpcyBpbnN0YWxsZWQgZ2xvYmFsbHkgcGVyIHdpbmRvdyBpbiB0aGUgZW50cnkgcG9pbnQuXG4gICAgICBzZWxmLnJlcG9ydEVycm9yKGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVwb3J0cyBhbiBlcnJvciBtZXNzYWdlIGFuZCBtYXJrcyB3aXRoIGFuIGV4cGVjdGVkIHByb3BlcnR5LiBJZiB0aGVcbiAgICogbG9nZ2luZyBpcyBkaXNhYmxlZCwgdGhlIGVycm9yIGlzIHJldGhyb3duIGFzeW5jaHJvbm91c2x5LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdW51c2VkVGFnXG4gICAqIEBwYXJhbSB7Li4uKn0gdmFyX2FyZ3NcbiAgICovXG4gIGV4cGVjdGVkRXJyb3IodW51c2VkVGFnLCB2YXJfYXJncykge1xuICAgIGNvbnN0IGVycm9yID0gdGhpcy5lcnJvcl8uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGVycm9yLmV4cGVjdGVkID0gdHJ1ZTtcbiAgICAgIC8vIHJlcG9ydEVycm9yIGlzIGluc3RhbGxlZCBnbG9iYWxseSBwZXIgd2luZG93IGluIHRoZSBlbnRyeSBwb2ludC5cbiAgICAgIHNlbGYucmVwb3J0RXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGVycm9yIG9iamVjdC5cbiAgICogQHBhcmFtIHsuLi4qfSB2YXJfYXJnc1xuICAgKiBAcmV0dXJuIHshRXJyb3J9XG4gICAqL1xuICBjcmVhdGVFcnJvcih2YXJfYXJncykge1xuICAgIGNvbnN0IGVycm9yID0gY3JlYXRlRXJyb3JWYXJncy5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgIHRoaXMucHJlcGFyZUVycm9yXyhlcnJvcik7XG4gICAgcmV0dXJuIGVycm9yO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gZXJyb3Igb2JqZWN0IHdpdGggaXRzIGV4cGVjdGVkIHByb3BlcnR5IHNldCB0byB0cnVlLlxuICAgKiBAcGFyYW0gey4uLip9IHZhcl9hcmdzXG4gICAqIEByZXR1cm4geyFFcnJvcn1cbiAgICovXG4gIGNyZWF0ZUV4cGVjdGVkRXJyb3IodmFyX2FyZ3MpIHtcbiAgICBjb25zdCBlcnJvciA9IGNyZWF0ZUVycm9yVmFyZ3MuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICB0aGlzLnByZXBhcmVFcnJvcl8oZXJyb3IpO1xuICAgIGVycm9yLmV4cGVjdGVkID0gdHJ1ZTtcbiAgICByZXR1cm4gZXJyb3I7XG4gIH1cblxuICAvKipcbiAgICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBmaXJzdCBhcmd1bWVudCBpc24ndCB0cnVlaXNoLlxuICAgKlxuICAgKiBTdXBwb3J0cyBhcmd1bWVudCBzdWJzdGl0dXRpb24gaW50byB0aGUgbWVzc2FnZSB2aWEgJXMgcGxhY2Vob2xkZXJzLlxuICAgKlxuICAgKiBUaHJvd3MgYW4gZXJyb3Igb2JqZWN0IHRoYXQgaGFzIHR3byBleHRyYSBwcm9wZXJ0aWVzOlxuICAgKiAtIGFzc29jaWF0ZWRFbGVtZW50OiBUaGlzIGlzIHRoZSBmaXJzdCBlbGVtZW50IHByb3ZpZGVkIGluIHRoZSB2YXIgYXJncy5cbiAgICogICBJdCBjYW4gYmUgdXNlZCBmb3IgaW1wcm92ZWQgZGlzcGxheSBvZiBlcnJvciBtZXNzYWdlcy5cbiAgICogLSBtZXNzYWdlQXJyYXk6IFRoZSBlbGVtZW50cyBvZiB0aGUgc3Vic3RpdHV0ZWQgbWVzc2FnZSBhcyBub24tc3RyaW5naWZpZWRcbiAgICogICBlbGVtZW50cyBpbiBhbiBhcnJheS4gV2hlbiBlLmcuIHBhc3NlZCB0byBjb25zb2xlLmVycm9yIHRoaXMgeWllbGRzXG4gICAqICAgbmF0aXZlIGRpc3BsYXlzIG9mIHRoaW5ncyBsaWtlIEhUTUwgZWxlbWVudHMuXG4gICAqXG4gICAqIEBwYXJhbSB7VH0gc2hvdWxkQmVUcnVlaXNoIFRoZSB2YWx1ZSB0byBhc3NlcnQuIFRoZSBhc3NlcnQgZmFpbHMgaWYgaXQgZG9lc1xuICAgKiAgICAgbm90IGV2YWx1YXRlIHRvIHRydWUuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X21lc3NhZ2UgVGhlIGFzc2VydGlvbiBtZXNzYWdlXG4gICAqIEBwYXJhbSB7Li4uKn0gdmFyX2FyZ3MgQXJndW1lbnRzIHN1YnN0aXR1dGVkIGludG8gJXMgaW4gdGhlIG1lc3NhZ2UuXG4gICAqIEByZXR1cm4ge1R9IFRoZSB2YWx1ZSBvZiBzaG91bGRCZVRydWVpc2guXG4gICAqIEB0ZW1wbGF0ZSBUXG4gICAqIGVzbGludCBcImdvb2dsZS1jYW1lbGNhc2UvZ29vZ2xlLWNhbWVsY2FzZVwiOiAwXG4gICAqL1xuICBhc3NlcnQoc2hvdWxkQmVUcnVlaXNoLCBvcHRfbWVzc2FnZSwgdmFyX2FyZ3MpIHtcbiAgICBsZXQgZmlyc3RFbGVtZW50O1xuICAgIGlmICghc2hvdWxkQmVUcnVlaXNoKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gb3B0X21lc3NhZ2UgfHwgJ0Fzc2VydGlvbiBmYWlsZWQnO1xuICAgICAgY29uc3Qgc3BsaXRNZXNzYWdlID0gbWVzc2FnZS5zcGxpdCgnJXMnKTtcbiAgICAgIGNvbnN0IGZpcnN0ID0gc3BsaXRNZXNzYWdlLnNoaWZ0KCk7XG4gICAgICBsZXQgZm9ybWF0dGVkID0gZmlyc3Q7XG4gICAgICBjb25zdCBtZXNzYWdlQXJyYXkgPSBbXTtcbiAgICAgIHB1c2hJZk5vbkVtcHR5KG1lc3NhZ2VBcnJheSwgZmlyc3QpO1xuICAgICAgZm9yIChsZXQgaSA9IDI7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgdmFsID0gYXJndW1lbnRzW2ldO1xuICAgICAgICBpZiAodmFsICYmIHZhbC50YWdOYW1lKSB7XG4gICAgICAgICAgZmlyc3RFbGVtZW50ID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5leHRDb25zdGFudCA9IHNwbGl0TWVzc2FnZS5zaGlmdCgpO1xuICAgICAgICBtZXNzYWdlQXJyYXkucHVzaCh2YWwpO1xuICAgICAgICBwdXNoSWZOb25FbXB0eShtZXNzYWdlQXJyYXksIG5leHRDb25zdGFudC50cmltKCkpO1xuICAgICAgICBmb3JtYXR0ZWQgKz0gdG9TdHJpbmcodmFsKSArIG5leHRDb25zdGFudDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGUgPSBuZXcgRXJyb3IoZm9ybWF0dGVkKTtcbiAgICAgIGUuZnJvbUFzc2VydCA9IHRydWU7XG4gICAgICBlLmFzc29jaWF0ZWRFbGVtZW50ID0gZmlyc3RFbGVtZW50O1xuICAgICAgZS5tZXNzYWdlQXJyYXkgPSBtZXNzYWdlQXJyYXk7XG4gICAgICB0aGlzLnByZXBhcmVFcnJvcl8oZSk7XG4gICAgICAvLyByZXBvcnRFcnJvciBpcyBpbnN0YWxsZWQgZ2xvYmFsbHkgcGVyIHdpbmRvdyBpbiB0aGUgZW50cnkgcG9pbnQuXG4gICAgICBzZWxmLnJlcG9ydEVycm9yKGUpO1xuICAgICAgdGhyb3cgZTtcbiAgICB9XG4gICAgcmV0dXJuIHNob3VsZEJlVHJ1ZWlzaDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIGZpcnN0IGFyZ3VtZW50IGlzbid0IGFuIEVsZW1lbnRcbiAgICpcbiAgICogT3RoZXJ3aXNlIHNlZSBgYXNzZXJ0YCBmb3IgdXNhZ2VcbiAgICpcbiAgICogQHBhcmFtIHsqfSBzaG91bGRCZUVsZW1lbnRcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfbWVzc2FnZSBUaGUgYXNzZXJ0aW9uIG1lc3NhZ2VcbiAgICogQHJldHVybiB7IUVsZW1lbnR9IFRoZSB2YWx1ZSBvZiBzaG91bGRCZVRydWVpc2guXG4gICAqIEB0ZW1wbGF0ZSBUXG4gICAqIGVzbGludCBcImdvb2dsZS1jYW1lbGNhc2UvZ29vZ2xlLWNhbWVsY2FzZVwiOiAyXG4gICAqL1xuICBhc3NlcnRFbGVtZW50KHNob3VsZEJlRWxlbWVudCwgb3B0X21lc3NhZ2UpIHtcbiAgICBjb25zdCBzaG91bGRCZVRydWVpc2ggPSBzaG91bGRCZUVsZW1lbnQgJiYgc2hvdWxkQmVFbGVtZW50Lm5vZGVUeXBlID09IDE7XG4gICAgdGhpcy5hc3NlcnQoc2hvdWxkQmVUcnVlaXNoLCAob3B0X21lc3NhZ2UgfHwgJ0VsZW1lbnQgZXhwZWN0ZWQnKSArICc6ICVzJyxcbiAgICAgICAgc2hvdWxkQmVFbGVtZW50KTtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshRWxlbWVudH0gKi8gKHNob3VsZEJlRWxlbWVudCk7XG4gIH1cblxuICAvKipcbiAgICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBmaXJzdCBhcmd1bWVudCBpc24ndCBhIHN0cmluZy4gVGhlIHN0cmluZyBjYW5cbiAgICogYmUgZW1wdHkuXG4gICAqXG4gICAqIEZvciBtb3JlIGRldGFpbHMgc2VlIGBhc3NlcnRgLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHNob3VsZEJlU3RyaW5nXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X21lc3NhZ2UgVGhlIGFzc2VydGlvbiBtZXNzYWdlXG4gICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHN0cmluZyB2YWx1ZS4gQ2FuIGJlIGFuIGVtcHR5IHN0cmluZy5cbiAgICogZXNsaW50IFwiZ29vZ2xlLWNhbWVsY2FzZS9nb29nbGUtY2FtZWxjYXNlXCI6IDJcbiAgICovXG4gIGFzc2VydFN0cmluZyhzaG91bGRCZVN0cmluZywgb3B0X21lc3NhZ2UpIHtcbiAgICB0aGlzLmFzc2VydCh0eXBlb2Ygc2hvdWxkQmVTdHJpbmcgPT0gJ3N0cmluZycsXG4gICAgICAgIChvcHRfbWVzc2FnZSB8fCAnU3RyaW5nIGV4cGVjdGVkJykgKyAnOiAlcycsIHNob3VsZEJlU3RyaW5nKTtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtzdHJpbmd9ICovIChzaG91bGRCZVN0cmluZyk7XG4gIH1cblxuICAvKipcbiAgICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBmaXJzdCBhcmd1bWVudCBpc24ndCBhIG51bWJlci4gVGhlIGFsbG93ZWQgdmFsdWVzXG4gICAqIGluY2x1ZGUgYDBgIGFuZCBgTmFOYC5cbiAgICpcbiAgICogRm9yIG1vcmUgZGV0YWlscyBzZWUgYGFzc2VydGAuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gc2hvdWxkQmVOdW1iZXJcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfbWVzc2FnZSBUaGUgYXNzZXJ0aW9uIG1lc3NhZ2VcbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbnVtYmVyIHZhbHVlLiBUaGUgYWxsb3dlZCB2YWx1ZXMgaW5jbHVkZSBgMGBcbiAgICogICBhbmQgYE5hTmAuXG4gICAqL1xuICBhc3NlcnROdW1iZXIoc2hvdWxkQmVOdW1iZXIsIG9wdF9tZXNzYWdlKSB7XG4gICAgdGhpcy5hc3NlcnQodHlwZW9mIHNob3VsZEJlTnVtYmVyID09ICdudW1iZXInLFxuICAgICAgICAob3B0X21lc3NhZ2UgfHwgJ051bWJlciBleHBlY3RlZCcpICsgJzogJXMnLCBzaG91bGRCZU51bWJlcik7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoc2hvdWxkQmVOdW1iZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRocm93cyBhbiBlcnJvciBpZiB0aGUgZmlyc3QgYXJndW1lbnQgaXNuJ3QgYSBib29sZWFuLlxuICAgKlxuICAgKiBGb3IgbW9yZSBkZXRhaWxzIHNlZSBgYXNzZXJ0YC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBzaG91bGRCZUJvb2xlYW5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfbWVzc2FnZSBUaGUgYXNzZXJ0aW9uIG1lc3NhZ2VcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIGJvb2xlYW4gdmFsdWUuXG4gICAqL1xuICBhc3NlcnRCb29sZWFuKHNob3VsZEJlQm9vbGVhbiwgb3B0X21lc3NhZ2UpIHtcbiAgICB0aGlzLmFzc2VydCghIXNob3VsZEJlQm9vbGVhbiA9PT0gc2hvdWxkQmVCb29sZWFuLFxuICAgICAgICAob3B0X21lc3NhZ2UgfHwgJ0Jvb2xlYW4gZXhwZWN0ZWQnKSArICc6ICVzJywgc2hvdWxkQmVCb29sZWFuKTtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtib29sZWFufSAqLyAoc2hvdWxkQmVCb29sZWFuKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBc3NlcnRzIGFuZCByZXR1cm5zIHRoZSBlbnVtIHZhbHVlLiBJZiB0aGUgZW51bSBkb2Vzbid0IGNvbnRhaW4gc3VjaCBhXG4gICAqIHZhbHVlLCB0aGUgZXJyb3IgaXMgdGhyb3duLlxuICAgKlxuICAgKiBAcGFyYW0geyFPYmplY3Q8VD59IGVudW1PYmpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfZW51bU5hbWVcbiAgICogQHJldHVybiB7VH1cbiAgICogQHRlbXBsYXRlIFRcbiAgICogZXNsaW50IFwiZ29vZ2xlLWNhbWVsY2FzZS9nb29nbGUtY2FtZWxjYXNlXCI6IDJcbiAgICovXG4gIGFzc2VydEVudW1WYWx1ZShlbnVtT2JqLCBzLCBvcHRfZW51bU5hbWUpIHtcbiAgICBpZiAoaXNFbnVtVmFsdWUoZW51bU9iaiwgcykpIHtcbiAgICAgIHJldHVybiBzO1xuICAgIH1cbiAgICB0aGlzLmFzc2VydChmYWxzZSxcbiAgICAgICAgJ1Vua25vd24gJXMgdmFsdWU6IFwiJXNcIicsXG4gICAgICAgIG9wdF9lbnVtTmFtZSB8fCAnZW51bScsIHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVycm9yfSBlcnJvclxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJlcGFyZUVycm9yXyhlcnJvcikge1xuICAgIGVycm9yID0gZHVwbGljYXRlRXJyb3JJZk5lY2Vzc2FyeShlcnJvcik7XG4gICAgaWYgKHRoaXMuc3VmZml4Xykge1xuICAgICAgaWYgKCFlcnJvci5tZXNzYWdlKSB7XG4gICAgICAgIGVycm9yLm1lc3NhZ2UgPSB0aGlzLnN1ZmZpeF87XG4gICAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UuaW5kZXhPZih0aGlzLnN1ZmZpeF8pID09IC0xKSB7XG4gICAgICAgIGVycm9yLm1lc3NhZ2UgKz0gdGhpcy5zdWZmaXhfO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNVc2VyRXJyb3JNZXNzYWdlKGVycm9yLm1lc3NhZ2UpKSB7XG4gICAgICBlcnJvci5tZXNzYWdlID0gZXJyb3IubWVzc2FnZS5yZXBsYWNlKFVTRVJfRVJST1JfU0VOVElORUwsICcnKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ3whRWxlbWVudH0gdmFsXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHRvU3RyaW5nKHZhbCkge1xuICAvLyBEbyBjaGVjayBlcXVpdmFsZW50IHRvIGB2YWwgaW5zdGFuY2VvZiBFbGVtZW50YCB3aXRob3V0IGNyb3NzLXdpbmRvdyBidWdcbiAgaWYgKHZhbCAmJiB2YWwubm9kZVR5cGUgPT0gMSkge1xuICAgIHJldHVybiB2YWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpICsgKHZhbC5pZCA/ICcjJyArIHZhbC5pZCA6ICcnKTtcbiAgfVxuICByZXR1cm4gLyoqIEB0eXBlIHtzdHJpbmd9ICovICh2YWwpO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHshQXJyYXl9IGFycmF5XG4gKiBAcGFyYW0geyp9IHZhbFxuICovXG5mdW5jdGlvbiBwdXNoSWZOb25FbXB0eShhcnJheSwgdmFsKSB7XG4gIGlmICh2YWwgIT0gJycpIHtcbiAgICBhcnJheS5wdXNoKHZhbCk7XG4gIH1cbn1cblxuLyoqXG4gKiBTb21lIGV4Y2VwdGlvbnMgKERPTUV4Y2VwdGlvbiwgbmFtZWx5KSBoYXZlIHJlYWQtb25seSBtZXNzYWdlLlxuICogQHBhcmFtIHshRXJyb3J9IGVycm9yXG4gKiBAcmV0dXJuIHshRXJyb3J9O1xuICovXG5leHBvcnQgZnVuY3Rpb24gZHVwbGljYXRlRXJyb3JJZk5lY2Vzc2FyeShlcnJvcikge1xuICBjb25zdCB7bWVzc2FnZX0gPSBlcnJvcjtcbiAgY29uc3QgdGVzdCA9IFN0cmluZyhNYXRoLnJhbmRvbSgpKTtcbiAgZXJyb3IubWVzc2FnZSA9IHRlc3Q7XG5cbiAgaWYgKGVycm9yLm1lc3NhZ2UgPT09IHRlc3QpIHtcbiAgICBlcnJvci5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICByZXR1cm4gZXJyb3I7XG4gIH1cblxuICBjb25zdCBlID0gbmV3IEVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAvLyBDb3B5IGFsbCB0aGUgZXh0cmFuZW91cyB0aGluZ3Mgd2UgYXR0YWNoLlxuICBmb3IgKGNvbnN0IHByb3AgaW4gZXJyb3IpIHtcbiAgICBlW3Byb3BdID0gZXJyb3JbcHJvcF07XG4gIH1cbiAgLy8gRW5zdXJlIHRoZXNlIGFyZSBjb3BpZWQuXG4gIGUuc3RhY2sgPSBlcnJvci5zdGFjaztcbiAgcmV0dXJuIGU7XG59XG5cbi8qKlxuICogQHBhcmFtIHsuLi4qfSB2YXJfYXJnc1xuICogQHJldHVybiB7IUVycm9yfVxuICogQHZpc2libGVGb3JUZXN0aW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFcnJvclZhcmdzKHZhcl9hcmdzKSB7XG4gIGxldCBlcnJvciA9IG51bGw7XG4gIGxldCBtZXNzYWdlID0gJyc7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgYXJnID0gYXJndW1lbnRzW2ldO1xuICAgIGlmIChhcmcgaW5zdGFuY2VvZiBFcnJvciAmJiAhZXJyb3IpIHtcbiAgICAgIGVycm9yID0gZHVwbGljYXRlRXJyb3JJZk5lY2Vzc2FyeShhcmcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAobWVzc2FnZSkge1xuICAgICAgICBtZXNzYWdlICs9ICcgJztcbiAgICAgIH1cbiAgICAgIG1lc3NhZ2UgKz0gYXJnO1xuICAgIH1cbiAgfVxuXG4gIGlmICghZXJyb3IpIHtcbiAgICBlcnJvciA9IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgfSBlbHNlIGlmIChtZXNzYWdlKSB7XG4gICAgZXJyb3IubWVzc2FnZSA9IG1lc3NhZ2UgKyAnOiAnICsgZXJyb3IubWVzc2FnZTtcbiAgfVxuICByZXR1cm4gZXJyb3I7XG59XG5cblxuLyoqXG4gKiBSZXRocm93cyB0aGUgZXJyb3Igd2l0aG91dCB0ZXJtaW5hdGluZyB0aGUgY3VycmVudCBjb250ZXh0LiBUaGlzIHByZXNlcnZlc1xuICogd2hldGhlciB0aGUgb3JpZ2luYWwgZXJyb3IgZGVzaWduYXRpb24gaXMgYSB1c2VyIGVycm9yIG9yIGEgZGV2IGVycm9yLlxuICogQHBhcmFtIHsuLi4qfSB2YXJfYXJnc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmV0aHJvd0FzeW5jKHZhcl9hcmdzKSB7XG4gIGNvbnN0IGVycm9yID0gY3JlYXRlRXJyb3JWYXJncy5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAvLyByZXBvcnRFcnJvciBpcyBpbnN0YWxsZWQgZ2xvYmFsbHkgcGVyIHdpbmRvdyBpbiB0aGUgZW50cnkgcG9pbnQuXG4gICAgc2VsZi5yZXBvcnRFcnJvcihlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH0pO1xufVxuXG5cbi8qKlxuICogQ2FjaGUgZm9yIGxvZ3MuIFdlIGRvIG5vdCB1c2UgYSBTZXJ2aWNlIHNpbmNlIHRoZSBzZXJ2aWNlIG1vZHVsZSBkZXBlbmRzXG4gKiBvbiBMb2cgYW5kIGNsb3N1cmUgbGl0ZXJhbGx5IGNhbid0IGV2ZW4uXG4gKiBAdHlwZSB7e3VzZXI6ID9Mb2csIGRldjogP0xvZywgdXNlckZvckVtYmVkOiA/TG9nfX1cbiAqL1xuc2VsZi5sb2cgPSAoc2VsZi5sb2cgfHwge1xuICB1c2VyOiBudWxsLFxuICBkZXY6IG51bGwsXG4gIHVzZXJGb3JFbWJlZDogbnVsbCxcbn0pO1xuXG5jb25zdCBsb2dzID0gc2VsZi5sb2c7XG5cbi8qKlxuICogRXZlbnR1YWxseSBob2xkcyBhIGNvbnN0cnVjdG9yIGZvciBMb2cgb2JqZWN0cy4gTGF6aWx5IGluaXRpYWxpemVkLCBzbyB3ZVxuICogY2FuIGF2b2lkIGV2ZXIgcmVmZXJlbmNpbmcgdGhlIHJlYWwgY29uc3RydWN0b3IgZXhjZXB0IGluIEpTIGJpbmFyaWVzXG4gKiB0aGF0IGFjdHVhbGx5IHdhbnQgdG8gaW5jbHVkZSB0aGUgaW1wbGVtZW50YXRpb24uXG4gKiBAdHlwZSB7P0Z1bmN0aW9ufVxuICovXG5sZXQgbG9nQ29uc3RydWN0b3IgPSBudWxsO1xuXG4vKipcbiAqIEluaXRpYWxpemVzIGxvZyBjb250cnVjdG9yLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5pdExvZ0NvbnN0cnVjdG9yKCkge1xuICBsb2dDb25zdHJ1Y3RvciA9IExvZztcbiAgLy8gSW5pdGlhbGl6ZSBpbnN0YW5jZXMgZm9yIHVzZS4gSWYgYSBiaW5hcnkgKGFuIGV4dGVuc2lvbiBmb3IgZXhhbXBsZSkgdGhhdFxuICAvLyBkb2VzIG5vdCBjYWxsIGBpbml0TG9nQ29uc3RydWN0b3JgIGludm9rZXMgYGRldigpYCBvciBgdXNlcigpYCBlYXJsaWVyIHRoYW5cbiAgLy8gdGhlIGJpbmFyeSB0aGF0IGRvZXMgY2FsbCBgaW5pdExvZ0NvbnN0cnVjdG9yYCAoYW1wLmpzKSwgdGhlIGV4dGVuc2lvbiB3aWxsXG4gIC8vIHRocm93IGFuIGVycm9yIGFzIHRoYXQgZXh0ZW5zaW9uIHdpbGwgbmV2ZXIgYmUgYWJsZSB0byBpbml0aWFsaXplIHRoZSBsb2dcbiAgLy8gaW5zdGFuY2VzIGFuZCB3ZSBhbHNvIGRvbid0IHdhbnQgaXQgdG8gY2FsbCBgaW5pdExvZ0NvbnN0cnVjdG9yYCBlaXRoZXJcbiAgLy8gKHNpbmNlIHRoYXQgd2lsbCBjYXVzZSB0aGUgTG9nIGltcGxlbWVudGF0aW9uIHRvIGJlIGJ1bmRsZWQgaW50byB0aGF0XG4gIC8vIGJpbmFyeSkuIFNvIHdlIG11c3QgaW5pdGlhbGl6ZSB0aGUgaW5zdGFuY2VzIGVhZ2VybHkgc28gdGhhdCB0aGV5IGFyZSByZWFkeVxuICAvLyBmb3IgdXNlIChzdG9yZWQgZ2xvYmFsbHkpIGFmdGVyIHRoZSBtYWluIGJpbmFyeSBjYWxscyBgaW5pdExvZ0NvbnN0cnVjdG9yYC5cbiAgZGV2KCk7XG4gIHVzZXIoKTtcbn1cblxuLyoqXG4gKiBSZXNldHMgbG9nIGNvbnRydWN0b3IgZm9yIHRlc3RpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNldExvZ0NvbnN0cnVjdG9yRm9yVGVzdGluZygpIHtcbiAgbG9nQ29uc3RydWN0b3IgPSBudWxsO1xufVxuXG4vKipcbiAqIFB1Ymxpc2hlciBsZXZlbCBsb2cuXG4gKlxuICogRW5hYmxlZCBpbiB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKiAgMS4gTm90IGRpc2FibGVkIHVzaW5nIGAjbG9nPTBgLlxuICogIDIuIERldmVsb3BtZW50IG1vZGUgaXMgZW5hYmxlZCB2aWEgYCNkZXZlbG9wbWVudD0xYCBvciBsb2dnaW5nIGlzIGV4cGxpY2l0bHlcbiAqICAgICBlbmFibGVkIHZpYSBgI2xvZz1EYCB3aGVyZSBEID49IDEuXG4gKiAgMy4gQU1QLnNldExvZ0xldmVsKEQpIGlzIGNhbGxlZCwgd2hlcmUgRCA+PSAxLlxuICpcbiAqIEBwYXJhbSB7IUVsZW1lbnQ9fSBvcHRfZWxlbWVudFxuICogQHJldHVybiB7IUxvZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZXIob3B0X2VsZW1lbnQpIHtcbiAgaWYgKCFsb2dzLnVzZXIpIHtcbiAgICBsb2dzLnVzZXIgPSBnZXRVc2VyTG9nZ2VyKFVTRVJfRVJST1JfU0VOVElORUwpO1xuICB9XG4gIGlmICghaXNGcm9tRW1iZWQobG9ncy51c2VyLndpbiwgb3B0X2VsZW1lbnQpKSB7XG4gICAgcmV0dXJuIGxvZ3MudXNlcjtcbiAgfSBlbHNlIHtcbiAgICBpZiAobG9ncy51c2VyRm9yRW1iZWQpIHtcbiAgICAgIHJldHVybiBsb2dzLnVzZXJGb3JFbWJlZDtcbiAgICB9XG4gICAgcmV0dXJuIGxvZ3MudXNlckZvckVtYmVkID0gZ2V0VXNlckxvZ2dlcihVU0VSX0VSUk9SX0VNQkVEX1NFTlRJTkVMKTtcbiAgfVxufVxuXG4vKipcbiAqIEdldHRlciBmb3IgdXNlciBsb2dnZXJcbiAqIEBwYXJhbSB7c3RyaW5nPX0gc3VmZml4XG4gKiBAcmV0dXJuIHshTG9nfVxuICovXG5mdW5jdGlvbiBnZXRVc2VyTG9nZ2VyKHN1ZmZpeCkge1xuICBpZiAoIWxvZ0NvbnN0cnVjdG9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdmYWlsZWQgdG8gY2FsbCBpbml0TG9nQ29uc3RydWN0b3InKTtcbiAgfVxuICByZXR1cm4gbmV3IGxvZ0NvbnN0cnVjdG9yKHNlbGYsIG1vZGUgPT4ge1xuICAgIGNvbnN0IGxvZ051bSA9IHBhcnNlSW50KG1vZGUubG9nLCAxMCk7XG4gICAgaWYgKG1vZGUuZGV2ZWxvcG1lbnQgfHwgbG9nTnVtID49IDEpIHtcbiAgICAgIHJldHVybiBMb2dMZXZlbC5GSU5FO1xuICAgIH1cbiAgICByZXR1cm4gTG9nTGV2ZWwuV0FSTjtcbiAgfSwgc3VmZml4KTtcbn1cblxuLyoqXG4gKiBBTVAgZGV2ZWxvcG1lbnQgbG9nLiBDYWxscyB0byBgZGV2TG9nKCkuYXNzZXJ0YCBhbmQgYGRldi5maW5lYCBhcmUgc3RyaXBwZWRcbiAqIGluIHRoZSBQUk9EIGJpbmFyeS4gSG93ZXZlciwgYGRldkxvZygpLmFzc2VydGAgcmVzdWx0IGlzIHByZXNlcnZlZCBpbiBlaXRoZXJcbiAqIGNhc2UuXG4gKlxuICogRW5hYmxlZCBpbiB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKiAgMS4gTm90IGRpc2FibGVkIHVzaW5nIGAjbG9nPTBgLlxuICogIDIuIExvZ2dpbmcgaXMgZXhwbGljaXRseSBlbmFibGVkIHZpYSBgI2xvZz1EYCwgd2hlcmUgRCA+PSAyLlxuICogIDMuIEFNUC5zZXRMb2dMZXZlbChEKSBpcyBjYWxsZWQsIHdoZXJlIEQgPj0gMi5cbiAqXG4gKiBAcmV0dXJuIHshTG9nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGV2KCkge1xuICBpZiAobG9ncy5kZXYpIHtcbiAgICByZXR1cm4gbG9ncy5kZXY7XG4gIH1cbiAgaWYgKCFsb2dDb25zdHJ1Y3Rvcikge1xuICAgIHRocm93IG5ldyBFcnJvcignZmFpbGVkIHRvIGNhbGwgaW5pdExvZ0NvbnN0cnVjdG9yJyk7XG4gIH1cbiAgcmV0dXJuIGxvZ3MuZGV2ID0gbmV3IGxvZ0NvbnN0cnVjdG9yKHNlbGYsIG1vZGUgPT4ge1xuICAgIGNvbnN0IGxvZ051bSA9IHBhcnNlSW50KG1vZGUubG9nLCAxMCk7XG4gICAgaWYgKGxvZ051bSA+PSAzKSB7XG4gICAgICByZXR1cm4gTG9nTGV2ZWwuRklORTtcbiAgICB9XG4gICAgaWYgKGxvZ051bSA+PSAyKSB7XG4gICAgICByZXR1cm4gTG9nTGV2ZWwuSU5GTztcbiAgICB9XG4gICAgcmV0dXJuIExvZ0xldmVsLk9GRjtcbiAgfSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7IUVsZW1lbnQ9fSBvcHRfZWxlbWVudFxuICogQHJldHVybiB7Ym9vbGVhbn0gaXNFbWJlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNGcm9tRW1iZWQod2luLCBvcHRfZWxlbWVudCkge1xuICBpZiAoIW9wdF9lbGVtZW50KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBvcHRfZWxlbWVudC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3ICE9IHdpbjtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge2dldE1vZGV9IGZyb20gJy4vbW9kZSc7XG5cbi8qKlxuICogUHJvdmlkZXMgaW5mbyBhYm91dCB0aGUgY3VycmVudCBhcHAuIFRoaXMgcmV0dXJuIHZhbHVlIG1heSBiZSBjYWNoZWQgYW5kXG4gKiBwYXNzZWQgYXJvdW5kIGFzIGl0IHdpbGwgYWx3YXlzIGJlIERDRSdkLlxuICogQHBhcmFtIHs/V2luZG93PX0gb3B0X3dpblxuICogQHJldHVybiB7IS4vbW9kZS5Nb2RlRGVmfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TW9kZU9iamVjdChvcHRfd2luKSB7XG4gIHJldHVybiB7XG4gICAgbG9jYWxEZXY6IGdldE1vZGUob3B0X3dpbikubG9jYWxEZXYsXG4gICAgZGV2ZWxvcG1lbnQ6IGdldE1vZGUob3B0X3dpbikuZGV2ZWxvcG1lbnQsXG4gICAgZmlsdGVyOiBnZXRNb2RlKG9wdF93aW4pLmZpbHRlcixcbiAgICBtaW5pZmllZDogZ2V0TW9kZShvcHRfd2luKS5taW5pZmllZCxcbiAgICBsaXRlOiBnZXRNb2RlKG9wdF93aW4pLmxpdGUsXG4gICAgdGVzdDogZ2V0TW9kZShvcHRfd2luKS50ZXN0LFxuICAgIGxvZzogZ2V0TW9kZShvcHRfd2luKS5sb2csXG4gICAgdmVyc2lvbjogZ2V0TW9kZShvcHRfd2luKS52ZXJzaW9uLFxuICAgIHJ0dlZlcnNpb246IGdldE1vZGUob3B0X3dpbikucnR2VmVyc2lvbixcbiAgfTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge3BhcnNlUXVlcnlTdHJpbmdffSBmcm9tICcuL3VybC1wYXJzZS1xdWVyeS1zdHJpbmcnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHt7XG4gKiAgIGxvY2FsRGV2OiBib29sZWFuLFxuICogICBkZXZlbG9wbWVudDogYm9vbGVhbixcbiAqICAgZmlsdGVyOiAoc3RyaW5nfHVuZGVmaW5lZCksXG4gKiAgIG1pbmlmaWVkOiBib29sZWFuLFxuICogICBsaXRlOiBib29sZWFuLFxuICogICB0ZXN0OiBib29sZWFuLFxuICogICBsb2c6IChzdHJpbmd8dW5kZWZpbmVkKSxcbiAqICAgdmVyc2lvbjogc3RyaW5nLFxuICogICBydHZWZXJzaW9uOiBzdHJpbmcsXG4gKiB9fVxuICovXG5leHBvcnQgbGV0IE1vZGVEZWY7XG5cbi8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuY29uc3QgdmVyc2lvbiA9ICckaW50ZXJuYWxSdW50aW1lVmVyc2lvbiQnO1xuXG4vKipcbiAqIGBydHZWZXJzaW9uYCBpcyB0aGUgcHJlZml4ZWQgdmVyc2lvbiB3ZSBzZXJ2ZSBvZmYgb2YgdGhlIGNkbi5cbiAqIFRoZSBwcmVmaXggZGVub3RlcyBjYW5hcnkoMDApIG9yIHByb2QoMDEpIG9yIGFuIGV4cGVyaW1lbnQgdmVyc2lvbiAoID4gMDEpLlxuICogQHR5cGUge3N0cmluZ31cbiAqL1xubGV0IHJ0dlZlcnNpb24gPSAnJztcblxuLyoqXG4gKiBQcm92aWRlcyBpbmZvIGFib3V0IHRoZSBjdXJyZW50IGFwcC5cbiAqIEBwYXJhbSB7P1dpbmRvdz19IG9wdF93aW5cbiAqIEByZXR1cm4geyFNb2RlRGVmfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TW9kZShvcHRfd2luKSB7XG4gIGNvbnN0IHdpbiA9IG9wdF93aW4gfHwgc2VsZjtcbiAgaWYgKHdpbi5BTVBfTU9ERSkge1xuICAgIHJldHVybiB3aW4uQU1QX01PREU7XG4gIH1cbiAgcmV0dXJuIHdpbi5BTVBfTU9ERSA9IGdldE1vZGVfKHdpbik7XG59XG5cbi8qKlxuICogUHJvdmlkZXMgaW5mbyBhYm91dCB0aGUgY3VycmVudCBhcHAuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7IU1vZGVEZWZ9XG4gKi9cbmZ1bmN0aW9uIGdldE1vZGVfKHdpbikge1xuICAvLyBNYWdpYyBjb25zdGFudHMgdGhhdCBhcmUgcmVwbGFjZWQgYnkgY2xvc3VyZSBjb21waWxlci5cbiAgLy8gSVNfTUlOSUZJRUQgaXMgYWx3YXlzIHJlcGxhY2VkIHdpdGggdHJ1ZSB3aGVuIGNsb3N1cmUgY29tcGlsZXIgaXMgdXNlZFxuICAvLyB3aGlsZSBJU19ERVYgaXMgb25seSByZXBsYWNlZCB3aGVuIGBndWxwIGRpc3RgIGlzIGNhbGxlZCB3aXRob3V0IHRoZVxuICAvLyAtLWZvcnRlc3RpbmcgZmxhZy5cbiAgY29uc3QgSVNfREVWID0gdHJ1ZTtcbiAgY29uc3QgSVNfTUlOSUZJRUQgPSBmYWxzZTtcblxuICBjb25zdCBsb2NhbERldkVuYWJsZWQgPSAhIShzZWxmLkFNUF9DT05GSUcgJiYgc2VsZi5BTVBfQ09ORklHLmxvY2FsRGV2KTtcbiAgY29uc3QgcnVubmluZ1Rlc3RzID0gSVNfREVWICYmICEhKHdpbi5BTVBfVEVTVCB8fCB3aW4uX19rYXJtYV9fKTtcbiAgY29uc3QgaXNMb2NhbERldiA9IElTX0RFViAmJiAobG9jYWxEZXZFbmFibGVkIHx8IHJ1bm5pbmdUZXN0cyk7XG4gIGNvbnN0IGhhc2hRdWVyeSA9IHBhcnNlUXVlcnlTdHJpbmdfKFxuICAgICAgLy8gbG9jYXRpb24ub3JpZ2luYWxIYXNoIGlzIHNldCBieSB0aGUgdmlld2VyIHdoZW4gaXQgcmVtb3ZlcyB0aGUgZnJhZ21lbnRcbiAgICAgIC8vIGZyb20gdGhlIFVSTC5cbiAgICAgIHdpbi5sb2NhdGlvbi5vcmlnaW5hbEhhc2ggfHwgd2luLmxvY2F0aW9uLmhhc2gpO1xuXG4gIGNvbnN0IHNlYXJjaFF1ZXJ5ID0gcGFyc2VRdWVyeVN0cmluZ18od2luLmxvY2F0aW9uLnNlYXJjaCk7XG5cbiAgaWYgKCFydHZWZXJzaW9uKSB7XG4gICAgcnR2VmVyc2lvbiA9IGdldFJ0dlZlcnNpb24od2luLCBpc0xvY2FsRGV2KTtcbiAgfVxuXG4gIC8vIFRoZSBgbWluaWZpZWRgLCBgdGVzdGAgYW5kIGBsb2NhbERldmAgcHJvcGVydGllcyBhcmUgcmVwbGFjZWRcbiAgLy8gYXMgYm9vbGVhbiBsaXRlcmFscyB3aGVuIHdlIHJ1biBgZ3VscCBkaXN0YCB3aXRob3V0IHRoZSBgLS1mb3J0ZXN0aW5nYFxuICAvLyBmbGFncy4gVGhpcyBpbXByb3ZlZCBEQ0Ugb24gdGhlIHByb2R1Y3Rpb24gZmlsZSB3ZSBkZXBsb3kgYXMgdGhlIGNvZGVcbiAgLy8gcGF0aHMgZm9yIGxvY2FsaG9zdC90ZXN0aW5nL2RldmVsb3BtZW50IGFyZSBlbGltaW5hdGVkLlxuICByZXR1cm4ge1xuICAgIGxvY2FsRGV2OiBpc0xvY2FsRGV2LFxuICAgIC8vIFRyaWdnZXJzIHZhbGlkYXRpb24gb3IgZW5hYmxlIHB1YiBsZXZlbCBsb2dnaW5nLiBWYWxpZGF0aW9uIGNhbiBiZVxuICAgIC8vIGJ5cGFzc2VkIHZpYSAjdmFsaWRhdGU9MC5cbiAgICAvLyBOb3RlIHRoYXQgQU1QX0RFVl9NT0RFIGZsYWcgaXMgdXNlZCBmb3IgdGVzdGluZyBwdXJwb3Nlcy5cbiAgICBkZXZlbG9wbWVudDogISEoaGFzaFF1ZXJ5WydkZXZlbG9wbWVudCddID09ICcxJyB8fCB3aW4uQU1QX0RFVl9NT0RFKSxcbiAgICBleGFtaW5lcjogaGFzaFF1ZXJ5WydkZXZlbG9wbWVudCddID09ICcyJyxcbiAgICAvLyBBbGxvd3MgZmlsdGVyaW5nIHZhbGlkYXRpb24gZXJyb3JzIGJ5IGVycm9yIGNhdGVnb3J5LiBGb3IgdGhlXG4gICAgLy8gYXZhaWxhYmxlIGNhdGVnb3JpZXMsIHNlZSBFcnJvckNhdGVnb3J5IGluIHZhbGlkYXRvci92YWxpZGF0b3IucHJvdG8uXG4gICAgZmlsdGVyOiBoYXNoUXVlcnlbJ2ZpbHRlciddLFxuICAgIC8vIGFtcC1nZW8gb3ZlcnJpZGVcbiAgICBnZW9PdmVycmlkZTogaGFzaFF1ZXJ5WydhbXAtZ2VvJ10sXG4gICAgbWluaWZpZWQ6IElTX01JTklGSUVELFxuICAgIC8vIFdoZXRoZXIgZG9jdW1lbnQgaXMgaW4gYW4gYW1wLWxpdGUgdmlld2VyLiBJdCBzaWduYWwgdGhhdCB0aGUgdXNlclxuICAgIC8vIHdvdWxkIHByZWZlciB0byB1c2UgbGVzcyBiYW5kd2lkdGguXG4gICAgbGl0ZTogc2VhcmNoUXVlcnlbJ2FtcF9saXRlJ10gIT0gdW5kZWZpbmVkLFxuICAgIHRlc3Q6IHJ1bm5pbmdUZXN0cyxcbiAgICBsb2c6IGhhc2hRdWVyeVsnbG9nJ10sXG4gICAgdmVyc2lvbixcbiAgICBydHZWZXJzaW9uLFxuICB9O1xufVxuXG4vKipcbiAqIFJldHJpZXZlIHRoZSBgcnR2VmVyc2lvbmAgd2hpY2ggd2lsbCBoYXZlIGEgbnVtZXJpYyBwcmVmaXhcbiAqIGRlbm90aW5nIGNhbmFyeS9wcm9kL2V4cGVyaW1lbnQgKHVubGVzcyBgaXNMb2NhbERldmAgaXMgdHJ1ZSkuXG4gKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNMb2NhbERldlxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBnZXRSdHZWZXJzaW9uKHdpbiwgaXNMb2NhbERldikge1xuICAvLyBJZiBpdCdzIGxvY2FsIGRldiB0aGVuIHdlIHdvbid0IGFjdHVhbGx5IGhhdmUgYSBmdWxsIHZlcnNpb24gc29cbiAgLy8ganVzdCB1c2UgdGhlIHZlcnNpb24uXG4gIGlmIChpc0xvY2FsRGV2KSB7XG4gICAgcmV0dXJuIHZlcnNpb247XG4gIH1cblxuICBpZiAod2luLkFNUF9DT05GSUcgJiYgd2luLkFNUF9DT05GSUcudikge1xuICAgIHJldHVybiB3aW4uQU1QX0NPTkZJRy52O1xuICB9XG5cbiAgLy8gQ3VycmVudGx5IGAkaW50ZXJuYWxSdW50aW1lVmVyc2lvbiRgIGFuZCB0aHVzIGBtb2RlLnZlcnNpb25gIGNvbnRhaW4gb25seVxuICAvLyBtYWpvciB2ZXJzaW9uLiBUaGUgZnVsbCB2ZXJzaW9uIGhvd2V2ZXIgbXVzdCBhbHNvIGNhcnJ5IHRoZSBtaW5vciB2ZXJzaW9uLlxuICAvLyBXZSB3aWxsIGRlZmF1bHQgdG8gcHJvZHVjdGlvbiBkZWZhdWx0IGAwMWAgbWlub3IgdmVyc2lvbiBmb3Igbm93LlxuICAvLyBUT0RPKGVyd2lubW9tYmF5KTogZGVjaWRlIHdoZXRoZXIgJGludGVybmFsUnVudGltZVZlcnNpb24kIHNob3VsZCBjb250YWluXG4gIC8vIG1pbm9yIHZlcnNpb24uXG4gIHJldHVybiBgMDEke3ZlcnNpb259YDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzTG9jYWxEZXZcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqIEB2aXNpYmxlRm9yVGVzdGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UnR2VmVyc2lvbkZvclRlc3Rpbmcod2luLCBpc0xvY2FsRGV2KSB7XG4gIHJldHVybiBnZXRSdHZWZXJzaW9uKHdpbiwgaXNMb2NhbERldik7XG59XG5cblxuLyoqIEB2aXNpYmxlRm9yVGVzdGluZyAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0UnR2VmVyc2lvbkZvclRlc3RpbmcoKSB7XG4gIHJ0dlZlcnNpb24gPSAnJztcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge2dldE1vZGV9IGZyb20gJy4vbW9kZSc7XG5pbXBvcnQge2luc3RhbGwgYXMgaW5zdGFsbEFycmF5SW5jbHVkZXN9IGZyb20gJy4vcG9seWZpbGxzL2FycmF5LWluY2x1ZGVzJztcbmltcG9ydCB7aW5zdGFsbCBhcyBpbnN0YWxsQ3VzdG9tRWxlbWVudHN9IGZyb20gJy4vcG9seWZpbGxzL2N1c3RvbS1lbGVtZW50cyc7XG5pbXBvcnQge1xuICBpbnN0YWxsIGFzIGluc3RhbGxET01Ub2tlbkxpc3RUb2dnbGUsXG59IGZyb20gJy4vcG9seWZpbGxzL2RvbXRva2VubGlzdC10b2dnbGUnO1xuaW1wb3J0IHtpbnN0YWxsIGFzIGluc3RhbGxEb2NDb250YWluc30gZnJvbSAnLi9wb2x5ZmlsbHMvZG9jdW1lbnQtY29udGFpbnMnO1xuaW1wb3J0IHtpbnN0YWxsIGFzIGluc3RhbGxNYXRoU2lnbn0gZnJvbSAnLi9wb2x5ZmlsbHMvbWF0aC1zaWduJztcbmltcG9ydCB7aW5zdGFsbCBhcyBpbnN0YWxsT2JqZWN0QXNzaWdufSBmcm9tICcuL3BvbHlmaWxscy9vYmplY3QtYXNzaWduJztcbmltcG9ydCB7aW5zdGFsbCBhcyBpbnN0YWxsUHJvbWlzZX0gZnJvbSAnLi9wb2x5ZmlsbHMvcHJvbWlzZSc7XG5pbXBvcnQge2luc3RhbGxDdXN0b21FbGVtZW50cyBhcyBpbnN0YWxsUmVnaXN0ZXJFbGVtZW50fSBmcm9tXG4gICdkb2N1bWVudC1yZWdpc3Rlci1lbGVtZW50L2J1aWxkL2RvY3VtZW50LXJlZ2lzdGVyLWVsZW1lbnQucGF0Y2hlZCc7XG5pbXBvcnQge2lzRXhwZXJpbWVudE9ufSBmcm9tICcuL2V4cGVyaW1lbnRzJztcblxuaWYgKGlzRXhwZXJpbWVudE9uKHNlbGYsICdjdXN0b20tZWxlbWVudHMtdjEnKSB8fCBnZXRNb2RlKCkudGVzdCkge1xuICBpbnN0YWxsQ3VzdG9tRWxlbWVudHMoc2VsZiwgY2xhc3Mge30pO1xufSBlbHNlIHtcbiAgaW5zdGFsbFJlZ2lzdGVyRWxlbWVudChzZWxmLCAnYXV0bycpO1xufVxuaW5zdGFsbERPTVRva2VuTGlzdFRvZ2dsZShzZWxmKTtcbmluc3RhbGxNYXRoU2lnbihzZWxmKTtcbmluc3RhbGxPYmplY3RBc3NpZ24oc2VsZik7XG5pbnN0YWxsUHJvbWlzZShzZWxmKTtcbmluc3RhbGxEb2NDb250YWlucyhzZWxmKTtcbmluc3RhbGxBcnJheUluY2x1ZGVzKHNlbGYpO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGVsZW1lbnQgaXMgaW4gdGhlIGFycmF5IGFuZCBmYWxzZSBvdGhlcndpc2UuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfZnJvbUluZGV4XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICogQHRoaXMge0FycmF5fVxuICovXG5mdW5jdGlvbiBpbmNsdWRlcyh2YWx1ZSwgb3B0X2Zyb21JbmRleCkge1xuICBjb25zdCBmcm9tSW5kZXggPSBvcHRfZnJvbUluZGV4IHx8IDA7XG4gIGNvbnN0IGxlbiA9IHRoaXMubGVuZ3RoO1xuICBsZXQgaSA9IGZyb21JbmRleCA+PSAwID8gZnJvbUluZGV4IDogTWF0aC5tYXgobGVuICsgZnJvbUluZGV4LCAwKTtcbiAgZm9yICg7IGkgPCBsZW47IGkrKykge1xuICAgIGNvbnN0IG90aGVyID0gdGhpc1tpXTtcbiAgICAvLyBJZiB2YWx1ZSBoYXMgYmVlbiBmb3VuZCBPUiAodmFsdWUgaXMgTmFOIEFORCBvdGhlciBpcyBOYU4pXG4gICAgLyplc2xpbnQgXCJuby1zZWxmLWNvbXBhcmVcIjogMCovXG4gICAgaWYgKG90aGVyID09PSB2YWx1ZSB8fCAodmFsdWUgIT09IHZhbHVlICYmIG90aGVyICE9PSBvdGhlcikpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuKiBTZXRzIHRoZSBBcnJheS5jb250YWlucyBwb2x5ZmlsbCBpZiBpdCBkb2VzIG5vdCBleGlzdC5cbiogQHBhcmFtIHshV2luZG93fSB3aW5cbiovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbCh3aW4pIHtcbiAgaWYgKCF3aW4uQXJyYXkucHJvdG90eXBlLmluY2x1ZGVzKSB7XG4gICAgd2luLk9iamVjdC5kZWZpbmVQcm9wZXJ0eShBcnJheS5wcm90b3R5cGUsICdpbmNsdWRlcycsIHtcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogaW5jbHVkZXMsXG4gICAgfSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHt7XG4gKiAgIHByb21pc2U6ICFQcm9taXNlPHVuZGVmaW5lZD4sXG4gKiAgIHJlc29sdmU6IGZ1bmN0aW9uKCksXG4gKiB9fVxuICovXG5sZXQgRGVmZXJyZWREZWY7XG5cbi8qKlxuICogQHR5cGVkZWYgeyFGdW5jdGlvbn1cbiAqL1xubGV0IEN1c3RvbUVsZW1lbnRDb25zdHJ1Y3RvckRlZjtcblxuLyoqXG4gKiBAdHlwZWRlZiB7e1xuICogIG5hbWU6IHN0cmluZyxcbiAqICBjdG9yOiAhQ3VzdG9tRWxlbWVudENvbnN0cnVjdG9yRGVmLFxuICogfX1cbiAqL1xubGV0IEN1c3RvbUVsZW1lbnREZWY7XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoZSBjdXN0b20gZWxlbWVudCdzIG5hbWUuXG4gKiBUaGlzIGludGVudGlvbmFsbHkgaWdub3JlcyBcInZhbGlkXCIgaGlnaGVyIFVuaWNvZGUgQ29kZSBQb2ludHMuXG4gKiBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9jdXN0b20tZWxlbWVudHMuaHRtbCN2YWxpZC1jdXN0b20tZWxlbWVudC1uYW1lXG4gKi9cbmNvbnN0IFZBTElEX05BTUUgPSAvXlthLXpdW2EtejAtOS5fXSotW2EtejAtOS5fLV0qJC87XG5jb25zdCBJTlZBTElEX05BTUVTID0gW1xuICAnYW5ub3RhdGlvbi14bWwnLFxuICAnY29sb3ItcHJvZmlsZScsXG4gICdmb250LWZhY2UnLFxuICAnZm9udC1mYWNlLXNyYycsXG4gICdmb250LWZhY2UtdXJpJyxcbiAgJ2ZvbnQtZmFjZS1mb3JtYXQnLFxuICAnZm9udC1mYWNlLW5hbWUnLFxuICAnbWlzc2luZy1nbHlwaCcsXG5dO1xuXG4vKipcbiAqIEFzc2VydHMgdGhhdCB0aGUgY3VzdG9tIGVsZW1lbnQgbmFtZSBjb25mb3JtcyB0byB0aGUgc3BlYy5cbiAqXG4gKiBAcGFyYW0geyFGdW5jdGlvbn0gU3ludGF4RXJyb3JcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gKi9cbmZ1bmN0aW9uIGFzc2VydFZhbGlkTmFtZShTeW50YXhFcnJvciwgbmFtZSkge1xuICBpZiAoIVZBTElEX05BTUUudGVzdChuYW1lKSB8fCBJTlZBTElEX05BTUVTLmluZGV4T2YobmFtZSkgPj0gMCkge1xuICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihgaW52YWxpZCBjdXN0b20gZWxlbWVudCBuYW1lIFwiJHtuYW1lfVwiYCk7XG4gIH1cbn1cblxuLyoqXG4gKiBEb2VzIHdpbiBoYXZlIGEgZnVsbCBDdXN0b20gRWxlbWVudHMgcmVnaXN0cnk/XG4gKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGhhc0N1c3RvbUVsZW1lbnRzKHdpbikge1xuICBjb25zdCB7Y3VzdG9tRWxlbWVudHN9ID0gd2luO1xuXG4gIHJldHVybiAhIShcbiAgICBjdXN0b21FbGVtZW50cyAmJlxuICAgIGN1c3RvbUVsZW1lbnRzLmRlZmluZSAmJlxuICAgIGN1c3RvbUVsZW1lbnRzLmdldCAmJlxuICAgIGN1c3RvbUVsZW1lbnRzLndoZW5EZWZpbmVkKTtcbn1cblxuLyoqXG4gKiBXYXMgSFRNTEVsZW1lbnQgYWxyZWFkeSBwYXRjaGVkIGZvciB0aGlzIHdpbmRvdz9cbiAqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNQYXRjaGVkKHdpbikge1xuICBjb25zdCB0YWcgPSB3aW4uSFRNTEVsZW1lbnQudG9TdHJpbmcoKTtcbiAgcmV0dXJuIHRhZy5pbmRleE9mKCdbbmF0aXZlIGNvZGVdJykgPT09IC0xO1xufVxuXG4vKipcbiAqIFRoZSBwdWJsaWMgQ3VzdG9tIEVsZW1lbnRzIEFQSS5cbiAqL1xuY2xhc3MgQ3VzdG9tRWxlbWVudFJlZ2lzdHJ5IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEBwYXJhbSB7IVJlZ2lzdHJ5fSByZWdpc3RyeVxuICAgKi9cbiAgY29uc3RydWN0b3Iod2luLCByZWdpc3RyeSkge1xuICAgIC8qKlxuICAgICAqIEBjb25zdCBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMud2luXyA9IHdpbjtcblxuICAgIC8qKlxuICAgICAqIEBjb25zdCBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMucmVnaXN0cnlfID0gcmVnaXN0cnk7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIERlZmVycmVkRGVmPn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBjb25zdFxuICAgICAqL1xuICAgIHRoaXMucGVuZGluZ0RlZmluZXNfID0gdGhpcy53aW5fLk9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXIgdGhlIGN1c3RvbSBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcGFyYW0geyFDdXN0b21FbGVtZW50Q29uc3RydWN0b3JEZWZ9IGN0b3JcbiAgICogQHBhcmFtIHshT2JqZWN0PX0gb3B0aW9uc1xuICAgKi9cbiAgZGVmaW5lKG5hbWUsIGN0b3IsIG9wdGlvbnMpIHtcbiAgICB0aGlzLnJlZ2lzdHJ5Xy5kZWZpbmUobmFtZSwgY3Rvciwgb3B0aW9ucyk7XG5cbiAgICAvLyBJZiBhbnlvbmUgaXMgd2FpdGluZyBmb3IgdGhpcyBjdXN0b20gZWxlbWVudCB0byBiZSBkZWZpbmVkLCByZXNvbHZlXG4gICAgLy8gdGhlaXIgcHJvbWlzZS5cbiAgICBjb25zdCBwZW5kaW5nID0gdGhpcy5wZW5kaW5nRGVmaW5lc187XG4gICAgY29uc3QgZGVmZXJyZWQgPSBwZW5kaW5nW25hbWVdO1xuICAgIGlmIChkZWZlcnJlZCkge1xuICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgZGVsZXRlIHBlbmRpbmdbbmFtZV07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY29uc3RydWN0b3Igb2YgdGhlIChhbHJlYWR5IGRlZmluZWQpIGN1c3RvbSBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcmV0dXJuIHshQ3VzdG9tRWxlbWVudENvbnN0cnVjdG9yRGVmfHVuZGVmaW5lZH1cbiAgICovXG4gIGdldChuYW1lKSB7XG4gICAgY29uc3QgZGVmID0gdGhpcy5yZWdpc3RyeV8uZ2V0QnlOYW1lKG5hbWUpO1xuICAgIGlmIChkZWYpIHtcbiAgICAgIHJldHVybiBkZWYuY3RvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHByb21pc2UgdGhhdCB3YWl0cyB1bnRpbCB0aGUgY3VzdG9tIGVsZW1lbnQgaXMgZGVmaW5lZC5cbiAgICogSWYgdGhlIGN1c3RvbSBlbGVtZW50IGlzIGFscmVhZHkgZGVmaW5lZCwgcmV0dXJucyBhIHJlc29sdmVkIHByb21pc2UuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEByZXR1cm4geyFQcm9taXNlPHVuZGVmaW5lZD59XG4gICAqL1xuICB3aGVuRGVmaW5lZChuYW1lKSB7XG4gICAgY29uc3Qge1Byb21pc2UsIFN5bnRheEVycm9yfSA9IHRoaXMud2luXztcbiAgICBhc3NlcnRWYWxpZE5hbWUoU3ludGF4RXJyb3IsIG5hbWUpO1xuXG4gICAgaWYgKHRoaXMucmVnaXN0cnlfLmdldEJ5TmFtZShuYW1lKSkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IHBlbmRpbmcgPSB0aGlzLnBlbmRpbmdEZWZpbmVzXztcbiAgICBjb25zdCBkZWZlcnJlZCA9IHBlbmRpbmdbbmFtZV07XG4gICAgaWYgKGRlZmVycmVkKSB7XG4gICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9XG5cbiAgICBsZXQgcmVzb2x2ZTtcbiAgICBjb25zdCBwcm9taXNlID0gbmV3IC8qT0sqL1Byb21pc2UocmVzID0+IHJlc29sdmUgPSByZXMpO1xuICAgIHBlbmRpbmdbbmFtZV0gPSB7XG4gICAgICBwcm9taXNlLFxuICAgICAgcmVzb2x2ZSxcbiAgICB9O1xuXG4gICAgcmV0dXJuIHByb21pc2U7XG4gIH1cblxuICAvKipcbiAgICogVXBncmFkZSBhbGwgY3VzdG9tIGVsZW1lbnRzIGluc2lkZSByb290LlxuICAgKlxuICAgKiBAcGFyYW0geyFOb2RlfSByb290XG4gICAqL1xuICB1cGdyYWRlKHJvb3QpIHtcbiAgICB0aGlzLnJlZ2lzdHJ5Xy51cGdyYWRlKHJvb3QpO1xuICB9XG59XG5cbi8qKlxuICogVGhpcyBpbnRlcm5hbCBBUElzIG5lY2Vzc2FyeSB0byBydW4gdGhlIEN1c3RvbUVsZW1lbnRSZWdpc3RyeS5cbiAqIFNpbmNlIFJlZ2lzdHJ5IGlzIG5ldmVyIGV4cG9zZWQgZXh0ZXJuYWxseSwgYWxsIG1ldGhvZHMgYXJlIGFjdHVhbGx5XG4gKiBhdmFpbGFibGUgb24gdGhlIGluc3RhbmNlLlxuICovXG5jbGFzcyBSZWdpc3RyeSB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKi9cbiAgY29uc3RydWN0b3Iod2luKSB7XG4gICAgLyoqXG4gICAgICogQHByaXZhdGUgQGNvbnN0XG4gICAgICovXG4gICAgdGhpcy53aW5fID0gd2luO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGUgQGNvbnN0XG4gICAgICovXG4gICAgdGhpcy5kb2NfID0gd2luLmRvY3VtZW50O1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCAhQ3VzdG9tRWxlbWVudERlZj59XG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAY29uc3RcbiAgICAgKi9cbiAgICB0aGlzLmRlZmluaXRpb25zXyA9IHdpbi5PYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gICAgLyoqXG4gICAgICogQSB1cC10by1kYXRlIERPTSBzZWxlY3RvciBmb3IgYWxsIGN1c3RvbSBlbGVtZW50cy5cbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIHRoaXMucXVlcnlfID0gJyc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudGx5IHVwZ3JhZGluZyBlbGVtZW50LlxuICAgICAqIEBwcml2YXRlIHtFbGVtZW50fVxuICAgICAqL1xuICAgIHRoaXMuY3VycmVudF8gPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50bHktYmVpbmctdXBncmFkZWQgY3VzdG9tIGVsZW1lbnQuXG4gICAqXG4gICAqIFdoZW4gYW4gYWxyZWFkeSBjcmVhdGVkICh0aHJvdWdoIHRoZSBET00gcGFyc2luZyBBUElzLCBvciBpbm5lckhUTUwpXG4gICAqIGN1c3RvbSBlbGVtZW50IG5vZGUgaXMgYmVpbmcgdXBncmFkZWQsIHdlIGNhbid0IGp1c3QgY3JlYXRlIGEgbmV3IG5vZGVcbiAgICogKGl0J3MgaWxsZWdhbCBpbiB0aGUgc3BlYykuIEJ1dCB3ZSBzdGlsbCBuZWVkIHRvIHJ1biB0aGUgY3VzdG9tIGVsZW1lbnQnc1xuICAgKiBjb25zdHJ1Y3RvciBjb2RlIG9uIHRoZSBub2RlLiBXZSBhdm9pZCB0aGlzIGNvbnVuZHJ1bSBieSBydW5uaW5nIHRoZVxuICAgKiBjb25zdHJ1Y3RvciB3aGlsZSByZXR1cm5pbmcgdGhpcyBjdXJyZW50IG5vZGUgaW4gdGhlIEhUTUxFbGVtZW50XG4gICAqIGNsYXNzIGNvbnN0cnVjdG9yICh0aGUgYmFzZSBjbGFzcyBvZiBhbGwgY3VzdG9tIGVsZW1lbnRzKS5cbiAgICpcbiAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICovXG4gIGN1cnJlbnQoKSB7XG4gICAgY29uc3QgY3VycmVudCA9IHRoaXMuY3VycmVudF87XG4gICAgdGhpcy5jdXJyZW50XyA9IG51bGw7XG4gICAgcmV0dXJuIGN1cnJlbnQ7XG4gIH1cblxuICAvKipcbiAgICogRmluZHMgdGhlIGN1c3RvbSBlbGVtZW50IGRlZmluaXRpb24gYnkgbmFtZS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICogQHJldHVybiB7Q3VzdG9tRWxlbWVudERlZnx1bmRlZmluZWR9XG4gICAqL1xuICBnZXRCeU5hbWUobmFtZSkge1xuICAgIGNvbnN0IGRlZmluaXRpb24gPSB0aGlzLmRlZmluaXRpb25zX1tuYW1lXTtcbiAgICBpZiAoZGVmaW5pdGlvbikge1xuICAgICAgcmV0dXJuIGRlZmluaXRpb247XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZpbmRzIHRoZSBjdXN0b20gZWxlbWVudCBkZWZpbml0aW9uIGJ5IGNvbnN0cnVjdG9yIGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0ge0N1c3RvbUVsZW1lbnRDb25zdHJ1Y3RvckRlZn0gY3RvclxuICAgKiBAcmV0dXJuIHtDdXN0b21FbGVtZW50RGVmfHVuZGVmaW5lZH1cbiAgICovXG4gIGdldEJ5Q29uc3RydWN0b3IoY3Rvcikge1xuICAgIGNvbnN0IGRlZmluaXRpb25zID0gdGhpcy5kZWZpbml0aW9uc187XG5cbiAgICBmb3IgKGNvbnN0IG5hbWUgaW4gZGVmaW5pdGlvbnMpIHtcbiAgICAgIGNvbnN0IGRlZiA9IGRlZmluaXRpb25zW25hbWVdO1xuICAgICAgaWYgKGRlZi5jdG9yID09PSBjdG9yKSB7XG4gICAgICAgIHJldHVybiBkZWY7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyB0aGUgY3VzdG9tIGVsZW1lbnQgZGVmaW5pdGlvbiwgYW5kIHVwZ3JhZGVzIGFsbCBlbGVtZW50cyBieSB0aGF0XG4gICAqIG5hbWUgaW4gdGhlIHJvb3QgZG9jdW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEBwYXJhbSB7IUN1c3RvbUVsZW1lbnRDb25zdHJ1Y3RvckRlZn0gY3RvclxuICAgKiBAcGFyYW0geyFPYmplY3R8dW5kZWZpbmVkfSBvcHRpb25zXG4gICAqL1xuICBkZWZpbmUobmFtZSwgY3Rvciwgb3B0aW9ucykge1xuICAgIGNvbnN0IHtFcnJvciwgU3ludGF4RXJyb3J9ID0gdGhpcy53aW5fO1xuXG4gICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRXh0ZW5kaW5nIG5hdGl2ZSBjdXN0b20gZWxlbWVudHMgaXMgbm90IHN1cHBvcnRlZCcpO1xuICAgIH1cblxuICAgIGFzc2VydFZhbGlkTmFtZShTeW50YXhFcnJvciwgbmFtZSk7XG5cbiAgICBpZiAodGhpcy5nZXRCeU5hbWUobmFtZSkgfHxcbiAgICAgICAgdGhpcy5nZXRCeUNvbnN0cnVjdG9yKGN0b3IpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYGR1cGxpY2F0ZSBkZWZpbml0aW9uIFwiJHtuYW1lfVwiYCk7XG4gICAgfVxuXG4gICAgLy8gVE9ETyhqcmlkZ2V3ZWxsKTogUmVjb3JkIGNvbm5lY3RlZENhbGxiYWNrLCBkaXNjb25uZWN0ZWRDYWxsYmFjayxcbiAgICAvLyBhZG9wdGVkQ2FsbGJhY2ssIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjaywgYW5kIG9ic2VydmVkQXR0cmlidXRlcy5cbiAgICAvLyBUT0RPKGpyaWRnZXdlbGwpOiBJZiBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2ssIGdhdGhlciBvYnNlcnZlZEF0dHJpYnV0ZXNcbiAgICB0aGlzLmRlZmluaXRpb25zX1tuYW1lXSA9IHtcbiAgICAgIG5hbWUsXG4gICAgICBjdG9yLFxuICAgIH07XG5cbiAgICB0aGlzLm9ic2VydmVfKG5hbWUpO1xuICAgIHRoaXMudXBncmFkZSh0aGlzLmRvY18sIG5hbWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZ3JhZGVzIGN1c3RvbSBlbGVtZW50cyBkZXNjZW5kYW50cyBvZiByb290IChidXQgbm90IGluY2x1ZGluZyByb290KS5cbiAgICpcbiAgICogV2hlbiBjYWxsZWQgd2l0aCBhbiBvcHRfcXVlcnksIGl0IGJvdGggdXBncmFkZXMgYW5kIGNvbm5lY3RzIHRoZSBjdXN0b21cbiAgICogZWxlbWVudHMgKHRoaXMgaXMgdXNlZCBkdXJpbmcgdGhlIGN1c3RvbSBlbGVtZW50IGRlZmluZSBhbGdvcml0aG0pLlxuICAgKlxuICAgKiBAcGFyYW0geyFOb2RlfSByb290XG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X3F1ZXJ5XG4gICAqL1xuICB1cGdyYWRlKHJvb3QsIG9wdF9xdWVyeSkge1xuICAgIC8vIE9ubHkgQ3VzdG9tRWxlbWVudFJlZ2lzdHJ5LnAuZGVmaW5lIHByb3ZpZGVzIGEgcXVlcnkgKHRoZSBuZXdseSBkZWZpbmVkXG4gICAgLy8gY3VzdG9tIGVsZW1lbnQpLiBJbiB0aGlzIGNhc2UsIHdlIGFyZSBib3RoIHVwZ3JhZGluZyBfYW5kXyBjb25uZWN0aW5nXG4gICAgLy8gdGhlIGN1c3RvbSBlbGVtZW50cy5cbiAgICBjb25zdCBuZXdseURlZmluZWQgPSAhIW9wdF9xdWVyeTtcbiAgICBjb25zdCBxdWVyeSA9IG9wdF9xdWVyeSB8fCB0aGlzLnF1ZXJ5XztcbiAgICBjb25zdCB1cGdyYWRlQ2FuZGlkYXRlcyA9IHRoaXMucXVlcnlBbGxfKHJvb3QsIHF1ZXJ5KTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdXBncmFkZUNhbmRpZGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGNhbmRpZGF0ZSA9IHVwZ3JhZGVDYW5kaWRhdGVzW2ldO1xuICAgICAgaWYgKG5ld2x5RGVmaW5lZCkge1xuICAgICAgICB0aGlzLmNvbm5lY3RlZENhbGxiYWNrXyhjYW5kaWRhdGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy51cGdyYWRlU2VsZihjYW5kaWRhdGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGdyYWRlcyB0aGUgY3VzdG9tIGVsZW1lbnQgbm9kZSwgaWYgYSBjdXN0b20gZWxlbWVudCBoYXMgYmVlbiByZWdpc3RlcmVkXG4gICAqIGJ5IHRoaXMgbmFtZS5cbiAgICpcbiAgICogQHBhcmFtIHshTm9kZX0gbm9kZVxuICAgKi9cbiAgdXBncmFkZVNlbGYobm9kZSkge1xuICAgIGNvbnN0IGRlZiA9IHRoaXMuZ2V0QnlOYW1lKG5vZGUubG9jYWxOYW1lKTtcbiAgICBpZiAoIWRlZikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMudXBncmFkZVNlbGZfKC8qKiBAdHlwZSB7IUVsZW1lbnR9ICovKG5vZGUpLCBkZWYpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IU5vZGV9IHJvb3RcbiAgICogQHBhcmFtIHtzdHJpbmd9IHF1ZXJ5XG4gICAqIEByZXR1cm4geyFBcnJheXwhTm9kZUxpc3R9XG4gICAqL1xuICBxdWVyeUFsbF8ocm9vdCwgcXVlcnkpIHtcbiAgICBpZiAoIXF1ZXJ5IHx8ICFyb290LnF1ZXJ5U2VsZWN0b3JBbGwpIHtcbiAgICAgIC8vIE5vdGhpbmcgdG8gZG8uLi5cbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICByZXR1cm4gcm9vdC5xdWVyeVNlbGVjdG9yQWxsKHF1ZXJ5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGdyYWRlcyB0aGUgKGFscmVhZHkgY3JlYXRlZCB2aWEgRE9NIHBhcnNpbmcpIGN1c3RvbSBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fSBub2RlXG4gICAqIEBwYXJhbSB7IUN1c3RvbUVsZW1lbnREZWZ9IGRlZlxuICAgKi9cbiAgdXBncmFkZVNlbGZfKG5vZGUsIGRlZikge1xuICAgIGNvbnN0IHtjdG9yfSA9IGRlZjtcbiAgICBpZiAobm9kZSBpbnN0YW5jZW9mIGN0b3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBEZXNwaXRlIGhvdyBpdCBsb29rcywgdGhpcyBpcyBub3QgYSB1c2VsZXNzIGNvbnN0cnVjdGlvbi5cbiAgICAvLyBIVE1MRWxlbWVudFBvbHlmaWxsICh0aGUgYmFzZSBjbGFzcyBvZiBhbGwgY3VzdG9tIGVsZW1lbnRzKSB3aWxsIHJldHVyblxuICAgIC8vIHRoZSBjdXJyZW50IG5vZGUsIGFsbG93aW5nIHRoZSBjdXN0b20gZWxlbWVudCdzIHN1YmNsYXNzIGNvbnN0cnVjdG9yIHRvXG4gICAgLy8gcnVuIG9uIHRoZSBub2RlLiBUaGUgbm9kZSBpdHNlbGYgaXMgYWxyZWFkeSBjb25zdHJ1Y3RlZCwgc28gdGhlIHJldHVyblxuICAgIC8vIHZhbHVlIGlzIGp1c3QgdGhlIG5vZGUuXG4gICAgdGhpcy5jdXJyZW50XyA9IG5vZGU7XG4gICAgY29uc3QgZWwgPSBuZXcgY3RvcigpO1xuXG4gICAgaWYgKGVsICE9PSBub2RlKSB7XG4gICAgICB0aHJvdyBuZXcgdGhpcy53aW5fLkVycm9yKFxuICAgICAgICAgICdDb25zdHJ1Y3RvciBpbGxlZ2FsbHkgcmV0dXJuZWQgYSBkaWZmZXJlbnQgaW5zdGFuY2UuJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZpcmVzIGNvbm5lY3RlZENhbGxiYWNrIG9uIHRoZSBjdXN0b20gZWxlbWVudCwgaWYgaXQgaGFzIG9uZS5cbiAgICogVGhpcyBhbHNvIHVwZ3JhZGVzIHRoZSBjdXN0b20gZWxlbWVudCwgc2luY2UgaXQgbWF5IG5vdCBoYXZlIGJlZW5cbiAgICogYWNjZXNzaWJsZSB2aWEgdGhlIHJvb3QgZG9jdW1lbnQgYmVmb3JlIChhIGRldGFjaGVkIERPTSB0cmVlKS5cbiAgICpcbiAgICogQHBhcmFtIHshTm9kZX0gbm9kZVxuICAgKi9cbiAgY29ubmVjdGVkQ2FsbGJhY2tfKG5vZGUpIHtcbiAgICBjb25zdCBkZWYgPSB0aGlzLmdldEJ5TmFtZShub2RlLmxvY2FsTmFtZSk7XG4gICAgaWYgKCFkZWYpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy51cGdyYWRlU2VsZl8oLyoqIEB0eXBlIHshRWxlbWVudH0gKi8obm9kZSksIGRlZik7XG4gICAgLy8gVE9ETyhqcmlkZ2V3ZWxsKTogSXQgbWF5IGJlIGFwcHJvcHJpYXRlIHRvIGFkb3B0Q2FsbGJhY2ssIGlmIHRoZSBub2RlXG4gICAgLy8gdXNlZCB0byBiZSBpbiBhbm90aGVyIGRvYy5cbiAgICAvLyBUT0RPKGpyaWRnZXdlbGwpOiBJIHNob3VsZCBiZSBjYWxsaW5nIHRoZSBkZWZpbml0aW9ucyBjb25uZWN0ZWRDYWxsYmFja1xuICAgIC8vIHdpdGggbm9kZSBhcyB0aGUgY29udGV4dC5cbiAgICBpZiAobm9kZS5jb25uZWN0ZWRDYWxsYmFjaykge1xuICAgICAgbm9kZS5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBGaXJlcyBkaXNjb25uZWN0ZWRDYWxsYmFjayBvbiB0aGUgY3VzdG9tIGVsZW1lbnQsIGlmIGl0IGhhcyBvbmUuXG4gICAqXG4gICAqIEBwYXJhbSB7IU5vZGV9IG5vZGVcbiAgICovXG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrXyhub2RlKSB7XG4gICAgLy8gVE9ETyhqcmlkZ2V3ZWxsKTogSSBzaG91bGQgYmUgY2FsbGluZyB0aGUgZGVmaW5pdGlvbnMgY29ubmVjdGVkQ2FsbGJhY2tcbiAgICAvLyB3aXRoIG5vZGUgYXMgdGhlIGNvbnRleHQuXG4gICAgaWYgKG5vZGUuZGlzY29ubmVjdGVkQ2FsbGJhY2spIHtcbiAgICAgIG5vZGUuZGlzY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVjb3JkcyBuYW1lIGFzIGEgcmVnaXN0ZXJlZCBjdXN0b20gZWxlbWVudCB0byBvYnNlcnZlLlxuICAgKlxuICAgKiBTdGFydHMgdGhlIE11dGF0aW9uIE9ic2VydmVyIGlmIHRoaXMgaXMgdGhlIGZpcnN0IHJlZ2lzdGVyZWQgY3VzdG9tXG4gICAqIGVsZW1lbnQuIFRoaXMgaXMgZGVmZXJyZWQgdW50aWwgdGhlIGZpcnN0IGN1c3RvbSBlbGVtZW50IGlzIGRlZmluZWQgdG9cbiAgICogc3BlZWQgdXAgaW5pdGlhbCByZW5kZXJpbmcgb2YgdGhlIHBhZ2UuXG4gICAqXG4gICAqIE11dGF0aW9uIE9ic2VydmVycyBhcmUgY29udmVuaWVudGx5IGF2YWlsYWJsZSBpbiBldmVyeSBicm93c2VyIHdlIGNhcmVcbiAgICogYWJvdXQuIFdoZW4gYSBub2RlIGlzIGNvbm5lY3RlZCB0byB0aGUgcm9vdCBkb2N1bWVudCwgYWxsIGN1c3RvbVxuICAgKiBlbGVtZW50cyAoaW5jbHVkaW5nIHRoYXQgbm9kZSBpdGVzZWxmKSB3aWxsIGJlIHVwZ3JhZGVkIGFuZCBjYWxsXG4gICAqIGNvbm5lY3RlZENhbGxiYWNrLiBXaGVuIGEgbm9kZSBpcyBkaXNjb25uZWN0ZWRDYWxsYmFjayBmcm9tIHRoZSByb290XG4gICAqIGRvY3VtZW50LCBhbGwgY3VzdG9tIGVsZW1lbnRzIHdpbGwgY2FsbCBkaXNjb25uZWN0ZWRDYWxsYmFjay5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICovXG4gIG9ic2VydmVfKG5hbWUpIHtcbiAgICBpZiAodGhpcy5xdWVyeV8pIHtcbiAgICAgIHRoaXMucXVlcnlfICs9IGAsJHtuYW1lfWA7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5xdWVyeV8gPSBuYW1lO1xuXG4gICAgLy8gVGhlIGZpcnN0IHJlZ2lzdGVyZWQgbmFtZSBzdGFydHMgdGhlIG11dGF0aW9uIG9ic2VydmVyLlxuICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IHRoaXMud2luXy5NdXRhdGlvbk9ic2VydmVyKHJlY29yZHMgPT4ge1xuICAgICAgaWYgKHJlY29yZHMpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVSZWNvcmRzXyhyZWNvcmRzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBvYnNlcnZlci5vYnNlcnZlKHRoaXMuZG9jXywge1xuICAgICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgICAgc3VidHJlZTogdHJ1ZSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgYWxsIHRoZSBNdXRhdGlvbiBPYnNlcnZlcidzIE11dGF0aW9uIFJlY29yZHMuXG4gICAqIEFsbCBhZGRlZCBjdXN0b20gZWxlbWVudHMgd2lsbCBiZSB1cGdyYWRlZCAoaWYgbm90IGFscmVhZHkpIGFuZCBjYWxsXG4gICAqIGNvbm5lY3RlZENhbGxiYWNrLiBBbGwgcmVtb3ZlZCBjdXN0b20gZWxlbWVudHMgd2lsbCBjYWxsXG4gICAqIGRpc2Nvbm5lY3RlZENhbGxiYWNrLlxuICAgKlxuICAgKiBAcGFyYW0geyFBcnJheTwhTXV0YXRpb25SZWNvcmQ+fSByZWNvcmRzXG4gICAqL1xuICBoYW5kbGVSZWNvcmRzXyhyZWNvcmRzKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZWNvcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCByZWNvcmQgPSByZWNvcmRzW2ldO1xuICAgICAgaWYgKCFyZWNvcmQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHthZGRlZE5vZGVzLCByZW1vdmVkTm9kZXN9ID0gcmVjb3JkO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhZGRlZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBhZGRlZE5vZGVzW2ldO1xuICAgICAgICBjb25zdCBjb25uZWN0ZWRDYW5kaWRhdGVzID0gdGhpcy5xdWVyeUFsbF8obm9kZSwgdGhpcy5xdWVyeV8pO1xuICAgICAgICB0aGlzLmNvbm5lY3RlZENhbGxiYWNrXyhub2RlKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb25uZWN0ZWRDYW5kaWRhdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdGhpcy5jb25uZWN0ZWRDYWxsYmFja18oY29ubmVjdGVkQ2FuZGlkYXRlc1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZW1vdmVkTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IHJlbW92ZWROb2Rlc1tpXTtcbiAgICAgICAgY29uc3QgZGlzY29ubmVjdGVkQ2FuZGlkYXRlcyA9IHRoaXMucXVlcnlBbGxfKG5vZGUsIHRoaXMucXVlcnlfKTtcbiAgICAgICAgdGhpcy5kaXNjb25uZWN0ZWRDYWxsYmFja18obm9kZSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGlzY29ubmVjdGVkQ2FuZGlkYXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHRoaXMuZGlzY29ubmVjdGVkQ2FsbGJhY2tfKGRpc2Nvbm5lY3RlZENhbmRpZGF0ZXNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogRG9lcyB0aGUgcG9seWZpbGxpbmcuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICovXG5mdW5jdGlvbiBwb2x5ZmlsbCh3aW4pIHtcbiAgY29uc3Qge0hUTUxFbGVtZW50LCBFbGVtZW50LCBOb2RlLCBEb2N1bWVudCwgT2JqZWN0LCBkb2N1bWVudH0gPSB3aW47XG4gIGNvbnN0IHtjcmVhdGVFbGVtZW50LCBjbG9uZU5vZGUsIGltcG9ydE5vZGV9ID0gZG9jdW1lbnQ7XG5cbiAgY29uc3QgcmVnaXN0cnkgPSBuZXcgUmVnaXN0cnkod2luKTtcbiAgY29uc3QgY3VzdG9tRWxlbWVudHMgPSBuZXcgQ3VzdG9tRWxlbWVudFJlZ2lzdHJ5KHdpbiwgcmVnaXN0cnkpO1xuXG4gIC8vIEV4cG9zZSB0aGUgY3VzdG9tIGVsZW1lbnQgcmVnaXN0cnkuXG4gIC8vIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iod2luZG93LCAnY3VzdG9tRWxlbWVudHMnKVxuICAvLyB7Z2V0OiDGkiwgc2V0OiB1bmRlZmluZWQsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZX1cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbiwgJ2N1c3RvbUVsZW1lbnRzJywge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIC8vIHdyaXRhYmxlOiBmYWxzZSxcbiAgICB2YWx1ZTogY3VzdG9tRWxlbWVudHMsXG4gIH0pO1xuXG4gIC8vIFBhdGNoIGNyZWF0ZUVsZW1lbnQgdG8gaW1tZWRpYXRlbHkgdXBncmFkZSB0aGUgY3VzdG9tIGVsZW1lbnQuXG4gIC8vIFRoaXMgaGFzIHRoZSBhZGRlZCBiZW5lZml0IHRoYXQgaXQgYXZvaWRzIHRoZSBcImFscmVhZHkgY3JlYXRlZCBidXQgbmVlZHNcbiAgLy8gY29uc3RydWN0b3IgY29kZSBydW5cIiBjaGlja2VuLWFuZC1lZ2cgcHJvYmxlbS5cbiAgRG9jdW1lbnQucHJvdG90eXBlLmNyZWF0ZUVsZW1lbnQgPSBmdW5jdGlvbiBjcmVhdGVFbGVtZW50UG9seWZpbGwobmFtZSkge1xuICAgIGNvbnN0IGRlZiA9IHJlZ2lzdHJ5LmdldEJ5TmFtZShuYW1lKTtcbiAgICBpZiAoZGVmKSB7XG4gICAgICByZXR1cm4gbmV3IGRlZi5jdG9yKCk7XG4gICAgfVxuICAgIHJldHVybiBjcmVhdGVFbGVtZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG5cbiAgLy8gUGF0Y2ggaW1wb3J0Tm9kZSB0byBpbW1lZGlhdGVseSB1cGdyYWRlIGN1c3RvbSBlbGVtZW50cy5cbiAgLy8gVE9ETyhqcmlkZ2V3ZWxsKTogQ2FuIGZpcmUgYWRvcHRlZENhbGxiYWNrIGZvciBjcm9zcyBkb2MgaW1wb3J0cy5cbiAgRG9jdW1lbnQucHJvdG90eXBlLmltcG9ydE5vZGUgPSBmdW5jdGlvbiBpbXBvcnROb2RlUG9seWZpbGwoKSB7XG4gICAgY29uc3QgaW1wb3J0ZWQgPSBpbXBvcnROb2RlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKGltcG9ydGVkKSB7XG4gICAgICByZWdpc3RyeS51cGdyYWRlU2VsZihpbXBvcnRlZCk7XG4gICAgICByZWdpc3RyeS51cGdyYWRlKGltcG9ydGVkKTtcbiAgICB9XG4gICAgcmV0dXJuIGltcG9ydGVkO1xuICB9O1xuXG4gIC8vIFBhdGNoIGNsb25lTm9kZSB0byBpbW1lZGlhdGVseSB1cGdyYWRlIGN1c3RvbSBlbGVtZW50cy5cbiAgTm9kZS5wcm90b3R5cGUuY2xvbmVOb2RlID0gZnVuY3Rpb24gY2xvbmVOb2RlUG9seWZpbGwoKSB7XG4gICAgY29uc3QgY2xvbmVkID0gY2xvbmVOb2RlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgcmVnaXN0cnkudXBncmFkZVNlbGYoY2xvbmVkKTtcbiAgICByZWdpc3RyeS51cGdyYWRlKGNsb25lZCk7XG4gICAgcmV0dXJuIGNsb25lZDtcbiAgfTtcblxuICAvLyBQYXRjaCB0aGUgaW5uZXJIVE1MIHNldHRlciB0byBpbW1lZGlhdGVseSB1cGdyYWRlIGN1c3RvbSBlbGVtZW50cy5cbiAgLy8gTm90ZSwgdGhpcyBjb3VsZCB0ZWNobmljYWxseSBmaXJlIGNvbm5lY3RlZENhbGxiYWNrcyBpZiB0aGlzIG5vZGUgd2FzXG4gIC8vIGNvbm5lY3RlZCwgYnV0IHdlIGxlYXZlIHRoYXQgdG8gdGhlIE11dGF0aW9uIE9ic2VydmVyLlxuICBjb25zdCBpbm5lckhUTUxEZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihFbGVtZW50LnByb3RvdHlwZSxcbiAgICAgICdpbm5lckhUTUwnKTtcbiAgY29uc3QgaW5uZXJIVE1MU2V0dGVyID0gaW5uZXJIVE1MRGVzYy5zZXQ7XG4gIGlubmVySFRNTERlc2Muc2V0ID0gZnVuY3Rpb24oaHRtbCkge1xuICAgIGlubmVySFRNTFNldHRlci5jYWxsKHRoaXMsIGh0bWwpO1xuICAgIHJlZ2lzdHJ5LnVwZ3JhZGUodGhpcyk7XG4gIH07XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShFbGVtZW50LnByb3RvdHlwZSwgJ2lubmVySFRNTCcsIGlubmVySFRNTERlc2MpO1xuXG4gIC8qKlxuICAgKiBZb3UgY2FuJ3QgdXNlIHRoZSByZWFsIEhUTUxFbGVtZW50IGNvbnN0cnVjdG9yLCBiZWNhdXNlIHlvdSBjYW4ndCBzdWJjbGFzc1xuICAgKiBpdCB3aXRob3V0IHVzaW5nIG5hdGl2ZSBjbGFzc2VzLiBTbywgbW9jayBpdHMgYXBwcm94aW1hdGlvbiB1c2luZ1xuICAgKiBjcmVhdGVFbGVtZW50LlxuICAgKi9cbiAgZnVuY3Rpb24gSFRNTEVsZW1lbnRQb2x5ZmlsbCgpIHtcbiAgICBjb25zdCB7Y29uc3RydWN0b3J9ID0gdGhpcztcblxuICAgIC8vIElmIHdlJ3JlIHVwZ3JhZGluZyBhbiBhbHJlYWR5IGNyZWF0ZWQgY3VzdG9tIGVsZW1lbnQsIHdlIGNhbid0IGNyZWF0ZVxuICAgIC8vIGFub3RoZXIgbmV3IG5vZGUgKGJ5IHRoZSBzcGVjLCBpdCBtdXN0IGJlIHRoZSBzYW1lIG5vZGUpLlxuICAgIGxldCBlbCA9IHJlZ2lzdHJ5LmN1cnJlbnQoKTtcblxuICAgIC8vIElmIHRoZXJlJ3Mgbm90IGEgYWxyZWFkeSBjcmVhdGVkIGN1c3RvbSBlbGVtZW50LCB3ZSdyZSBiZWluZyBpbnZva2VkIHZpYVxuICAgIC8vIGBuZXdgaW5nIHRoZSBjb25zdHJ1Y3Rvci5cbiAgICAvL1xuICAgIC8vIFRlY2huaWNhbGx5LCB3ZSBjb3VsZCBnZXQgaGVyZSB2aWEgY3JlYXRlRWxlbWVudCwgYnV0IHdlIHBhdGNoZWQgdGhhdC5cbiAgICAvLyBJZiBpdCB0aGUgY3VzdG9tIGVsZW1lbnQgd2FzIHJlZ2lzdGVyZWQsIHRoZSBwYXRjaCB0dXJuZWQgaXQgaW50byBhXG4gICAgLy8gYG5ld2AgY2FsbC5cbiAgICAvLyBJZiBpdCB3YXMgbm90IHJlZ2lzdGVyZWQsIHRoZSBuYXRpdmUgY3JlYXRlRWxlbWVudCBpcyB1c2VkLiBBbmQgaWZcbiAgICAvLyBuYXRpdmUgY3JlYXRlRWxlbWVudCBpcyBiZWluZyB1c2VkIGFuZCB3ZSBnb3QgdG8gdGhpcyBjb2RlLCB3ZSdyZSByZWFsbHlcbiAgICAvLyBpbiBhbiBpbmZpbml0ZSBsb29wIChhIG5hdGl2ZSBjcmVhdGVFbGVtZW50IGNhbGwganVzdCBiZWxvdykgc28gd2UndmVcbiAgICAvLyBnb3QgYmlnZ2VyIHByb2JsZW1zLlxuICAgIC8vXG4gICAgLy8gU28ganVzdCB0YWtlIG15IHdvcmQgd2UgZ290IGhlcmUgdmlhIGBuZXdgLlxuICAgIGlmICghZWwpIHtcbiAgICAgIC8vIFRoZSBjdXN0b20gZWxlbWVudCBkZWZpbml0aW9uIGlzIGFuIGludmFyaWFudC4gSWYgdGhlIGN1c3RvbSBlbGVtZW50XG4gICAgICAvLyBpcyByZWdpc3RlcmVkLCBldmVyeXRoaW5nIHdvcmtzLiBJZiBpdCdzIG5vdCwgaXQgdGhyb3dzIGluIHRoZSBtZW1iZXJcbiAgICAgIC8vIHByb3BlcnR5IGFjY2VzcyAob25seSBkZWZpbmVkIGN1c3RvbSBlbGVtZW50cyBjYW4gYmUgZGlyZWN0bHlcbiAgICAgIC8vIGNvbnN0cnVjdGVkIHZpYSBgbmV3YCkuXG4gICAgICBjb25zdCBkZWYgPSByZWdpc3RyeS5nZXRCeUNvbnN0cnVjdG9yKGNvbnN0cnVjdG9yKTtcbiAgICAgIGVsID0gY3JlYXRlRWxlbWVudC5jYWxsKGRvY3VtZW50LCBkZWYubmFtZSk7XG4gICAgfVxuXG4gICAgLy8gRmluYWxseSwgaWYgdGhlIG5vZGUgd2FzIGFscmVhZHkgY29uc3RydWN0ZWQsIHdlIG5lZWQgdG8gcmVzZXQgaXQnc1xuICAgIC8vIHByb3RvdHlwZSB0byB0aGUgY3VzdG9tIGVsZW1lbnQgcHJvdG90eXBlLiBBbmQgaWYgaXQgd2Fzbid0IGFscmVhZHlcbiAgICAvLyBjb25zdHJ1Y3RlZCwgd2UgY3JlYXRlZCBhIG5ldyBub2RlIHZpYSBuYXRpdmUgY3JlYXRlRWxlbWVudCwgYW5kIHdlIG5lZWRcbiAgICAvLyB0byByZXNldCBpdCdzIHByb3RvdHlwZS4gQmFzaWNhbGx5IGFsd2F5cyByZXNldCB0aGUgcHJvdG90eXBlLlxuICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihlbCwgY29uc3RydWN0b3IucHJvdG90eXBlKTtcbiAgICByZXR1cm4gZWw7XG4gIH1cbiAgc3ViQ2xhc3MoT2JqZWN0LCBIVE1MRWxlbWVudCwgSFRNTEVsZW1lbnRQb2x5ZmlsbCk7XG5cbiAgLy8gRXhwb3NlIHRoZSBwb2x5ZmlsbGVkIEhUTUxFbGVtZW50IGNvbnN0cnVjdG9yIGZvciBldmVyeW9uZSB0byBleHRlbmQgZnJvbS5cbiAgd2luLkhUTUxFbGVtZW50ID0gSFRNTEVsZW1lbnRQb2x5ZmlsbDtcbn1cblxuLyoqXG4gKiBXcmFwcyBIVE1MRWxlbWVudCBpbiBhIFJlZmxlY3QuY29uc3RydWN0IGNvbnN0cnVjdG9yLCBzbyB0aGF0IHRyYW5zcGlsZWRcbiAqIGNsYXNzZXMgY2FuIGBfdGhpcyA9IHN1cGVyQ2xhc3MuY2FsbCh0aGlzKWAgZHVyaW5nIHRoZWlyIGNvbnN0cnVjdGlvbi5cbiAqXG4gKiBUaGlzIGlzIG9ubHkgdXNlZCB3aGVuIEN1c3RvbSBFbGVtZW50cyB2MSBpcyBhbHJlYWR5IGF2YWlsYWJsZSBfYW5kXyB3ZSdyZVxuICogdXNpbmcgdHJhbnNwaWxlZCBjbGFzc2VzICh3aGljaCB1c2UgRVM1IGNvbnN0cnVjdGlvbiBpZGlvbXMpLlxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKi9cbmZ1bmN0aW9uIHdyYXBIVE1MRWxlbWVudCh3aW4pIHtcbiAgY29uc3Qge0hUTUxFbGVtZW50LCBSZWZsZWN0LCBPYmplY3R9ID0gd2luO1xuICAvKipcbiAgICovXG4gIGZ1bmN0aW9uIEhUTUxFbGVtZW50V3JhcHBlcigpIHtcbiAgICBjb25zdCBjdG9yID0gLyoqIEB0eXBlIHtmdW5jdGlvbiguLi4/KTo/fHVuZGVmaW5lZH0gKi8oXG4gICAgICAvKiogQHR5cGUgeyFIVE1MRWxlbWVudH0gKi8odGhpcykuY29uc3RydWN0b3IpO1xuXG4gICAgLy8gUmVmbGVjdC5jb25zdHJ1Y3QgYWxsb3dzIHVzIHRvIGNvbnN0cnVjdCBhIG5ldyBIVE1MRWxlbWVudCB3aXRob3V0IHVzaW5nXG4gICAgLy8gYG5ld2AgKHdoaWNoIHdpbGwgYWx3YXlzIGZhaWwgYmVjYXVzZSBuYXRpdmUgSFRNTEVsZW1lbnQgaXMgYSByZXN0cmljdGVkXG4gICAgLy8gY29uc3RydWN0b3IpLlxuICAgIHJldHVybiBSZWZsZWN0LmNvbnN0cnVjdChIVE1MRWxlbWVudCwgW10sIGN0b3IpO1xuICB9XG4gIHN1YkNsYXNzKE9iamVjdCwgSFRNTEVsZW1lbnQsIEhUTUxFbGVtZW50V3JhcHBlcik7XG5cbiAgLy8gRXhwb3NlIHRoZSB3cmFwcGVkIEhUTUxFbGVtZW50IGNvbnN0cnVjdG9yIGZvciBldmVyeW9uZSB0byBleHRlbmQgZnJvbS5cbiAgd2luLkhUTUxFbGVtZW50ID0gSFRNTEVsZW1lbnRXcmFwcGVyO1xufVxuXG4vKipcbiAqIFNldHVwcyB1cCBwcm90b3R5cGUgaW5oZXJpdGFuY2VcbiAqXG4gKiBAcGFyYW0geyFPYmplY3R9IE9iamVjdFxuICogQHBhcmFtIHshRnVuY3Rpb259IHN1cGVyQ2xhc3NcbiAqIEBwYXJhbSB7IUZ1bmN0aW9ufSBzdWJDbGFzc1xuICovXG5mdW5jdGlvbiBzdWJDbGFzcyhPYmplY3QsIHN1cGVyQ2xhc3MsIHN1YkNsYXNzKSB7XG4gIC8vIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc3VwZXJDbGFzcy5wcm90b3R5cGUsICdjb25zdHJ1Y3RvcicpXG4gIC8vIHt2YWx1ZTogxpIsIHdyaXRhYmxlOiB0cnVlLCBlbnVtZXJhYmxlOiBmYWxzZSwgY29uZmlndXJhYmxlOiB0cnVlfVxuICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7XG4gICAgY29uc3RydWN0b3I6IHtcbiAgICAgIC8vIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogc3ViQ2xhc3MsXG4gICAgfSxcbiAgfSk7XG59XG5cbi8qKlxuICogUG9seWZpbGxzIEN1c3RvbSBFbGVtZW50cyB2MSBBUEkuIFRoaXMgaGFzIDQgbW9kZXM6XG4gKlxuICogMS4gQ3VzdG9tIGVsZW1lbnRzIHYxIGFscmVhZHkgc3VwcG9ydGVkLCB1c2luZyBuYXRpdmUgY2xhc3Nlc1xuICogMi4gQ3VzdG9tIGVsZW1lbnRzIHYxIGFscmVhZHkgc3VwcG9ydGVkLCB1c2luZyB0cmFuc3BpbGVkIGNsYXNzZXNcbiAqIDMuIEN1c3RvbSBlbGVtZW50cyB2MSBub3Qgc3VwcG9ydGVkLCB1c2luZyBuYXRpdmUgY2xhc3Nlc1xuICogNC4gQ3VzdG9tIGVsZW1lbnRzIHYxIG5vdCBzdXBwb3J0ZWQsIHVzaW5nIHRyYW5zcGlsZWQgY2xhc3Nlc1xuICpcbiAqIEluIG1vZGUgMSwgbm90aGluZyBpcyBkb25lLiBJbiBtb2RlIDIsIGEgbWluaW1hbCBwb2x5ZmlsbCBpcyB1c2VkIHRvIHN1cHBvcnRcbiAqIGV4dGVuZGluZyB0aGUgSFRNTEVsZW1lbnQgYmFzZSBjbGFzcy4gSW4gbW9kZSAzIGFuZCA0LCBhIGZ1bGwgcG9seWZpbGwgaXNcbiAqIGRvbmUuXG4gKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7IUZ1bmN0aW9ufSBjdG9yXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsKHdpbiwgY3Rvcikge1xuICBpZiAoaXNQYXRjaGVkKHdpbikpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBsZXQgaW5zdGFsbCA9IHRydWU7XG4gIGxldCBpbnN0YWxsV3JhcHBlciA9IGZhbHNlO1xuXG4gIGlmIChoYXNDdXN0b21FbGVtZW50cyh3aW4pKSB7XG4gICAgLy8gSWYgY3RvciBpcyBjb25zdHJ1Y3RhYmxlIHdpdGhvdXQgbmV3LCBpdCdzIGEgZnVuY3Rpb24uIFRoYXQgbWVhbnMgaXQgd2FzXG4gICAgLy8gY29tcGlsZWQgZG93biwgYW5kIHdlIG5lZWQgdG8gZG8gdGhlIG1pbmltYWwgcG9seWZpbGwgYmVjYXVzZSBhbGwgeW91XG4gICAgLy8gY2Fubm90IGV4dGVuZCBIVE1MRWxlbWVudCB3aXRob3V0IG5hdGl2ZSBjbGFzc2VzLlxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7T2JqZWN0LCBSZWZsZWN0fSA9IHdpbjtcblxuICAgICAgLy8gXCJDb25zdHJ1Y3RcIiBjdG9yIHVzaW5nIEVTNSBpZGlvbXNcbiAgICAgIGNvbnN0IGluc3RhbmNlID0gT2JqZWN0LmNyZWF0ZShjdG9yLnByb3RvdHlwZSk7XG4gICAgICBjdG9yLmNhbGwoaW5zdGFuY2UpO1xuXG4gICAgICAvLyBJZiB0aGF0IHN1Y2NlZWRlZCwgd2UncmUgaW4gYSB0cmFuc3BpbGVkIGVudmlyb25tZW50XG4gICAgICAvLyBMZXQncyBmaW5kIG91dCBpZiB3ZSBjYW4gd3JhcCBIVE1MRWxlbWVudCBhbmQgYXZvaWQgYSBmdWxsIHBhdGNoLlxuICAgICAgaW5zdGFsbFdyYXBwZXIgPSAhIShSZWZsZWN0ICYmIFJlZmxlY3QuY29uc3RydWN0KTtcbiAgICB9IGNhdGNoIChlKSB7XG5cbiAgICAgIC8vIFRoZSBjdG9yIHRocmV3IHdoZW4gd2UgY29uc3RydWN0ZWQgaXMgdmlhIEVTNSwgc28gaXQncyBhIHJlYWwgY2xhc3MuXG4gICAgICAvLyBXZSdyZSBvayB0byBub3QgaW5zdGFsbCB0aGUgcG9seWZpbGwuXG4gICAgICBpbnN0YWxsID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgaWYgKGluc3RhbGxXcmFwcGVyKSB7XG4gICAgd3JhcEhUTUxFbGVtZW50KHdpbik7XG4gIH0gZWxzZSBpZiAoaW5zdGFsbCkge1xuICAgIHBvbHlmaWxsKHdpbik7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbi8qKlxuICogUG9seWZpbGwgZm9yIGBkb2N1bWVudC5jb250YWlucygpYCBtZXRob2QuIE5vdGljZSB0aGF0IGFjY29yZGluZyB0byBzcGVjXG4gKiBgZG9jdW1lbnQuY29udGFpbnNgIGlzIGluY2x1c2lvbmFyeS5cbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvTm9kZS9jb250YWluc1xuICogQHBhcmFtIHs/Tm9kZX0gbm9kZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqIEB0aGlzIHtOb2RlfVxuICovXG5mdW5jdGlvbiBkb2N1bWVudENvbnRhaW5zUG9seWZpbGwobm9kZSkge1xuICAvLyBQZXIgc3BlYywgXCJjb250YWluc1wiIG1ldGhvZCBpcyBpbmNsdXNpb25hcnlcbiAgLy8gaS5lLiBgbm9kZS5jb250YWlucyhub2RlKSA9PSB0cnVlYC4gSG93ZXZlciwgd2Ugc3RpbGwgbmVlZCB0byB0ZXN0XG4gIC8vIGVxdWFsaXR5IHRvIHRoZSBkb2N1bWVudCBpdHNlbGYuXG4gIHJldHVybiBub2RlID09IHRoaXMgfHwgdGhpcy5kb2N1bWVudEVsZW1lbnQuY29udGFpbnMobm9kZSk7XG59XG5cblxuLyoqXG4gKiBQb2x5ZmlsbHMgYEhUTUxEb2N1bWVudC5jb250YWluc2AgQVBJLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluc3RhbGwod2luKSB7XG4gIC8vIEhUTUxEb2N1bWVudCBpcyB1bmRlZmluZWQgaW4gSW50ZXJuZXQgRXhwbG9yZXIgMTAsIGJ1dCBpdCBoYXMgRG9jdW1lbnQsXG4gIC8vIHNvIHdlIHVzZSB0aGF0IGFzIGEgZmFsbGJhY2suXG4gIGNvbnN0IGRvY3VtZW50Q2xhc3MgPSB3aW4uSFRNTERvY3VtZW50IHx8IHdpbi5Eb2N1bWVudDtcbiAgaWYgKCFkb2N1bWVudENsYXNzLnByb3RvdHlwZS5jb250YWlucykge1xuICAgIHdpbi5PYmplY3QuZGVmaW5lUHJvcGVydHkoZG9jdW1lbnRDbGFzcy5wcm90b3R5cGUsICdjb250YWlucycsIHtcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogZG9jdW1lbnRDb250YWluc1BvbHlmaWxsLFxuICAgIH0pO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuXG4vKipcbiAqIFBvbHlmaWxsIGZvciBgRE9NVG9rZW5MaXN0LnByb3RvdHlwZS50b2dnbGUodG9rZW4sIG9wdF9mb3JjZSlgIG1ldGhvZC4gVGhpc1xuICogaXMgc3BlY2lhbGx5IGltcG9ydGFudCBiZWNhdXNlIElFIGRvZXMgbm90IHN1cHBvcnQgYG9wdF9mb3JjZWAgYXR0cmlidXRlLiBTZWVcbiAqIGh0dHBzOi8vZ29vLmdsL2hnS05ZWSBmb3IgZGV0YWlscy5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0b2tlblxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2ZvcmNlXG4gKiBAdGhpcyB7RE9NVG9rZW5MaXN0fVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gZG9tVG9rZW5MaXN0VG9nZ2xlUG9seWZpbGwodG9rZW4sIG9wdF9mb3JjZSkge1xuICBjb25zdCByZW1vdmUgPSBvcHRfZm9yY2UgPT09IHVuZGVmaW5lZCA/IHRoaXMuY29udGFpbnModG9rZW4pIDogIW9wdF9mb3JjZTtcbiAgaWYgKHJlbW92ZSkge1xuICAgIHRoaXMucmVtb3ZlKHRva2VuKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5hZGQodG9rZW4pO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59XG5cblxuLyoqXG4gKiBQb2x5ZmlsbHMgYERPTVRva2VuTGlzdC5wcm90b3R5cGUudG9nZ2xlYCBBUEkgaW4gSUUuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbCh3aW4pIHtcbiAgaWYgKGlzSWUod2luKSAmJiB3aW4uRE9NVG9rZW5MaXN0KSB7XG4gICAgd2luLk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW4uRE9NVG9rZW5MaXN0LnByb3RvdHlwZSwgJ3RvZ2dsZScsIHtcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogZG9tVG9rZW5MaXN0VG9nZ2xlUG9seWZpbGwsXG4gICAgfSk7XG4gIH1cbn1cblxuXG4vKipcbiAqIFdoZXRoZXIgdGhlIGN1cnJlbnQgYnJvd3NlciBpcyBhIElFIGJyb3dzZXIuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNJZSh3aW4pIHtcbiAgcmV0dXJuIC9UcmlkZW50fE1TSUV8SUVNb2JpbGUvaS50ZXN0KHdpbi5uYXZpZ2F0b3IudXNlckFnZW50KTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIFBhcnNlcyB0aGUgbnVtYmVyIHggYW5kIHJldHVybnMgaXRzIHNpZ24uIEZvciBwb3NpdGl2ZSB4IHJldHVybnMgMSwgZm9yXG4gKiBuZWdhdGl2ZSwgLTEuIEZvciAwIGFuZCAtMCwgcmV0dXJucyAwIGFuZCAtMCByZXNwZWN0aXZlbHkuIEZvciBhbnkgbnVtYmVyXG4gKiB0aGF0IHBhcnNlcyB0byBOYU4sIHJldHVybnMgTmFOLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSB4XG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaWduKHgpIHtcbiAgeCA9IE51bWJlcih4KTtcblxuICAvLyBJZiB4IGlzIDAsIC0wLCBvciBOYU4sIHJldHVybiBpdC5cbiAgaWYgKCF4KSB7XG4gICAgcmV0dXJuIHg7XG4gIH1cblxuICByZXR1cm4geCA+IDAgPyAxIDogLTE7XG59XG5cblxuLyoqXG4gKiBTZXRzIHRoZSBNYXRoLnNpZ24gcG9seWZpbGwgaWYgaXQgZG9lcyBub3QgZXhpc3QuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbCh3aW4pIHtcbiAgaWYgKCF3aW4uTWF0aC5zaWduKSB7XG4gICAgd2luLk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW4uTWF0aCwgJ3NpZ24nLCB7XG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IHNpZ24sXG4gICAgfSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5jb25zdCB7aGFzT3duUHJvcGVydHl9ID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBDb3BpZXMgdmFsdWVzIG9mIGFsbCBlbnVtZXJhYmxlIG93biBwcm9wZXJ0aWVzIGZyb20gb25lIG9yIG1vcmUgc291cmNlXG4gKiBvYmplY3RzIChwcm92aWRlZCBhcyBleHRlbmRlZCBhcmd1bWVudHMgdG8gdGhlIGZ1bmN0aW9uKSB0byBhIHRhcmdldCBvYmplY3QuXG4gKlxuICogQHBhcmFtIHshT2JqZWN0fSB0YXJnZXRcbiAqIEBwYXJhbSB7Li4uT2JqZWN0fSB2YXJfYXJnc1xuICogQHJldHVybiB7IU9iamVjdH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnbih0YXJnZXQsIHZhcl9hcmdzKSB7XG4gIGlmICh0YXJnZXQgPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdCcpO1xuICB9XG5cbiAgY29uc3Qgb3V0cHV0ID0gT2JqZWN0KHRhcmdldCk7XG4gIGZvciAobGV0IGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3Qgc291cmNlID0gYXJndW1lbnRzW2ldO1xuICAgIGlmIChzb3VyY2UgIT0gbnVsbCkge1xuICAgICAgZm9yIChjb25zdCBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuICAgICAgICAgIG91dHB1dFtrZXldID0gc291cmNlW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG91dHB1dDtcbn1cblxuXG4vKipcbiAqIFNldHMgdGhlIE9iamVjdC5hc3NpZ24gcG9seWZpbGwgaWYgaXQgZG9lcyBub3QgZXhpc3QuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbCh3aW4pIHtcbiAgaWYgKCF3aW4uT2JqZWN0LmFzc2lnbikge1xuICAgIHdpbi5PYmplY3QuZGVmaW5lUHJvcGVydHkod2luLk9iamVjdCwgJ2Fzc2lnbicsIHtcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogYXNzaWduLFxuICAgIH0pO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuXG5pbXBvcnQgKiBhcyBQcm9taXNlIGZyb20gJ3Byb21pc2UtcGpzL3Byb21pc2UnO1xuXG4vKipcbiAqIFNldHMgdGhlIFByb21pc2UgcG9seWZpbGwgaWYgaXQgZG9lcyBub3QgZXhpc3QuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbCh3aW4pIHtcbiAgaWYgKCF3aW4uUHJvbWlzZSkge1xuICAgIHdpbi5Qcm9taXNlID0gLyoqIEB0eXBlIHs/fSAqLyAoUHJvbWlzZSk7XG4gICAgLy8gSW4gYmFiZWwgdGhlICogZXhwb3J0IGlzIGFuIE9iamVjdCB3aXRoIGEgZGVmYXVsdCBwcm9wZXJ0eS5cbiAgICAvLyBJbiBjbG9zdXJlIGNvbXBpbGVyIGl0IGlzIHRoZSBQcm9taXNlIGZ1bmN0aW9uIGl0c2VsZi5cbiAgICBpZiAoUHJvbWlzZS5kZWZhdWx0KSB7XG4gICAgICB3aW4uUHJvbWlzZSA9IFByb21pc2UuZGVmYXVsdDtcbiAgICB9XG4gICAgLy8gV2UgY29weSB0aGUgaW5kaXZpZHVhbCBzdGF0aWMgbWV0aG9kcywgYmVjYXVzZSBjbG9zdXJlXG4gICAgLy8gY29tcGlsZXIgZmxhdHRlbnMgdGhlIHBvbHlmaWxsIG5hbWVzcGFjZS5cbiAgICB3aW4uUHJvbWlzZS5yZXNvbHZlID0gUHJvbWlzZS5yZXNvbHZlO1xuICAgIHdpbi5Qcm9taXNlLnJlamVjdCA9IFByb21pc2UucmVqZWN0O1xuICAgIHdpbi5Qcm9taXNlLmFsbCA9IFByb21pc2UuYWxsO1xuICAgIHdpbi5Qcm9taXNlLnJhY2UgPSBQcm9taXNlLnJhY2U7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1NlcnZpY2VzfSBmcm9tICcuL3NlcnZpY2VzJztcbmltcG9ydCB7ZGV2fSBmcm9tICcuL2xvZyc7XG5pbXBvcnQge2dldFNlcnZpY2VQcm9taXNlfSBmcm9tICcuL3NlcnZpY2UnO1xuXG4vKipcbiAqIEEgbWFwIG9mIHNlcnZpY2VzIHRoYXQgZGVsYXkgcmVuZGVyaW5nLiBUaGUga2V5IGlzIHRoZSBuYW1lIG9mIHRoZSBzZXJ2aWNlXG4gKiBhbmQgdGhlIHZhbHVlIGlzIGEgRE9NIHF1ZXJ5IHdoaWNoIGlzIHVzZWQgdG8gY2hlY2sgaWYgdGhlIHNlcnZpY2UgaXMgbmVlZGVkXG4gKiBpbiB0aGUgY3VycmVudCBkb2N1bWVudC5cbiAqIERvIG5vdCBhZGQgYSBzZXJ2aWNlIHVubGVzcyBhYnNvbHV0ZWx5IG5lY2Vzc2FyeS5cbiAqXG4gKiBcXCAgIFxcICAvICBcXCAgLyAgIC8gLyAgIFxcICAgICB8ICAgXyAgXFwgICAgIHwgIFxcIHwgIHwgfCAgfCB8ICBcXCB8ICB8ICAvIF9fX19ffFxuICogIFxcICAgXFwvICAgIFxcLyAgIC8gLyAgXiAgXFwgICAgfCAgfF8pICB8ICAgIHwgICBcXHwgIHwgfCAgfCB8ICAgXFx8ICB8IHwgIHwgIF9fXG4gKiAgIFxcICAgICAgICAgICAgLyAvICAvX1xcICBcXCAgIHwgICAgICAvICAgICB8ICAuIGAgIHwgfCAgfCB8ICAuIGAgIHwgfCAgfCB8XyB8XG4gKiAgICBcXCAgICAvXFwgICAgLyAvICBfX19fXyAgXFwgIHwgIHxcXCAgXFwtLS0tLnwgIHxcXCAgIHwgfCAgfCB8ICB8XFwgICB8IHwgIHxfX3wgfFxuICogICAgIFxcX18vICBcXF9fLyAvX18vICAgICBcXF9fXFwgfCBffCBgLl9fX19ffHxfX3wgXFxfX3wgfF9ffCB8X198IFxcX198ICBcXF9fX19fX3xcbiAqXG4gKiBUaGUgZXF1aXZhbGVudCBvZiB0aGlzIGxpc3QgaXMgdXNlZCBmb3Igc2VydmVyLXNpZGUgcmVuZGVyaW5nIChTU1IpIGFuZCBhbnlcbiAqIGNoYW5nZXMgbWFkZSB0byBpdCBtdXN0IGJlIG1hZGUgaW4gY29vcmRpbmF0aW9uIHdpdGggY2FjaGVzIHRoYXQgaW1wbGVtZW50XG4gKiBTU1IuIEZvciBtb3JlIGluZm9ybWF0aW9uIG9uIFNTUiBzZWUgYml0Lmx5L2FtcC1zc3IuXG4gKlxuICogQGNvbnN0IHshT2JqZWN0PHN0cmluZywgc3RyaW5nPn1cbiAqL1xuY29uc3QgU0VSVklDRVMgPSB7XG4gICdhbXAtZHluYW1pYy1jc3MtY2xhc3Nlcyc6ICdbY3VzdG9tLWVsZW1lbnQ9YW1wLWR5bmFtaWMtY3NzLWNsYXNzZXNdJyxcbiAgJ3ZhcmlhbnQnOiAnYW1wLWV4cGVyaW1lbnQnLFxuICAnYW1wLXN0b3J5JzogJ2FtcC1zdG9yeVtzdGFuZGFsb25lXScsXG59O1xuXG4vKipcbiAqIE1heGltdW0gbWlsbGlzZWNvbmRzIHRvIHdhaXQgZm9yIGFsbCBleHRlbnNpb25zIHRvIGxvYWQgYmVmb3JlIGVycm9yaW5nLlxuICogQGNvbnN0XG4gKi9cbmNvbnN0IExPQURfVElNRU9VVCA9IDMwMDA7XG5cbi8qKlxuICogRGV0ZWN0cyBhbnkgcmVuZGVyIGRlbGF5aW5nIHNlcnZpY2VzIHRoYXQgYXJlIHJlcXVpcmVkIG9uIHRoZSBwYWdlLCBhbmRcbiAqIHJldHVybnMgYSBwcm9taXNlIHdpdGggYSB0aW1lb3V0LlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4geyFQcm9taXNlPCFBcnJheTwqPj59IHJlc29sdmVzIHRvIGFuIEFycmF5IHRoYXQgaGFzIHRoZSBzYW1lIGxlbmd0aFxuICogICAgIGFzIHRoZSBkZXRlY3RlZCByZW5kZXIgZGVsYXlpbmcgc2VydmljZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdhaXRGb3JTZXJ2aWNlcyh3aW4pIHtcbiAgY29uc3QgcHJvbWlzZXMgPSBpbmNsdWRlZFNlcnZpY2VzKHdpbikubWFwKHNlcnZpY2UgPT4ge1xuICAgIHJldHVybiBTZXJ2aWNlcy50aW1lckZvcih3aW4pLnRpbWVvdXRQcm9taXNlKFxuICAgICAgICBMT0FEX1RJTUVPVVQsXG4gICAgICAgIGdldFNlcnZpY2VQcm9taXNlKHdpbiwgc2VydmljZSksXG4gICAgICAgIGBSZW5kZXIgdGltZW91dCB3YWl0aW5nIGZvciBzZXJ2aWNlICR7c2VydmljZX0gdG8gYmUgcmVhZHkuYFxuICAgICk7XG4gIH0pO1xuICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcGFnZSBoYXMgYSByZW5kZXIgZGVsYXlpbmcgc2VydmljZS5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzUmVuZGVyRGVsYXlpbmdTZXJ2aWNlcyh3aW4pIHtcbiAgcmV0dXJuIGluY2x1ZGVkU2VydmljZXMod2luKS5sZW5ndGggPiAwO1xufVxuXG4vKipcbiAqIERldGVjdHMgd2hpY2gsIGlmIGFueSwgcmVuZGVyLWRlbGF5aW5nIGV4dGVuc2lvbnMgYXJlIGluY2x1ZGVkIG9uIHRoZSBwYWdlLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4geyFBcnJheTxzdHJpbmc+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5jbHVkZWRTZXJ2aWNlcyh3aW4pIHtcbiAgLyoqIEBjb25zdCB7IURvY3VtZW50fSAqL1xuICBjb25zdCBkb2MgPSB3aW4uZG9jdW1lbnQ7XG4gIGRldigpLmFzc2VydChkb2MuYm9keSk7XG5cbiAgcmV0dXJuIE9iamVjdC5rZXlzKFNFUlZJQ0VTKS5maWx0ZXIoc2VydmljZSA9PiB7XG4gICAgcmV0dXJuIGRvYy5xdWVyeVNlbGVjdG9yKFNFUlZJQ0VTW3NlcnZpY2VdKTtcbiAgfSk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IFJlZ2lzdHJhdGlvbiBhbmQgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgQU1QIHNlcnZpY2VzLlxuICpcbiAqIEludmFyaWFudDogU2VydmljZSBnZXR0ZXJzIG5ldmVyIHJldHVybiBudWxsIGZvciByZWdpc3RlcmVkIHNlcnZpY2VzLlxuICovXG5cbi8vIHNyYy9wb2x5ZmlsbHMuanMgbXVzdCBiZSB0aGUgZmlyc3QgaW1wb3J0LlxuaW1wb3J0ICcuL3BvbHlmaWxscyc7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgc29ydC1pbXBvcnRzLWVzNi1hdXRvZml4L3NvcnQtaW1wb3J0cy1lczZcblxuaW1wb3J0IHtEZWZlcnJlZH0gZnJvbSAnLi91dGlscy9wcm9taXNlJztcbmltcG9ydCB7ZGV2fSBmcm9tICcuL2xvZyc7XG5pbXBvcnQge3RvV2lufSBmcm9tICcuL3R5cGVzJztcblxuXG4vKipcbiAqIEhvbGRzIGluZm8gYWJvdXQgYSBzZXJ2aWNlLlxuICogLSBvYmo6IEFjdHVhbCBzZXJ2aWNlIGltcGxlbWVudGF0aW9uIHdoZW4gYXZhaWxhYmxlLlxuICogLSBwcm9taXNlOiBQcm9taXNlIGZvciB0aGUgb2JqLlxuICogLSByZXNvbHZlOiBGdW5jdGlvbiB0byByZXNvbHZlIHRoZSBwcm9taXNlIHdpdGggdGhlIG9iamVjdC5cbiAqIC0gY29udGV4dDogQXJndW1lbnQgZm9yIGN0b3IsIGVpdGhlciBhIHdpbmRvdyBvciBhbiBhbXBkb2MuXG4gKiAtIGN0b3I6IEZ1bmN0aW9uIHRoYXQgY29uc3RydWN0cyBhbmQgcmV0dXJucyB0aGUgc2VydmljZS5cbiAqIEB0eXBlZGVmIHt7XG4gKiAgIG9iajogKD9PYmplY3QpLFxuICogICBwcm9taXNlOiAoP1Byb21pc2UpLFxuICogICByZXNvbHZlOiAoP2Z1bmN0aW9uKCFPYmplY3QpKSxcbiAqICAgY29udGV4dDogKD9XaW5kb3d8Py4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2MpLFxuICogICBjdG9yOiAoP2Z1bmN0aW9uKG5ldzpPYmplY3QsICFXaW5kb3cpfFxuICogICAgICAgICAgP2Z1bmN0aW9uKG5ldzpPYmplY3QsICEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jKSksXG4gKiB9fVxuICovXG5sZXQgU2VydmljZUhvbGRlckRlZjtcblxuXG4vKipcbiAqIFRoaXMgaW50ZXJmYWNlIHByb3ZpZGVzIGEgYGRpc3Bvc2VgIG1ldGhvZCB0aGF0IHdpbGwgYmUgY2FsbGVkIGJ5XG4gKiBydW50aW1lIHdoZW4gYSBzZXJ2aWNlIG5lZWRzIHRvIGJlIGRpc3Bvc2VkIG9mLlxuICogQGludGVyZmFjZVxuICovXG5leHBvcnQgY2xhc3MgRGlzcG9zYWJsZSB7XG5cbiAgLyoqXG4gICAqIEluc3RydWN0cyB0aGUgc2VydmljZSB0byByZWxlYXNlIGFueSByZXNvdXJjZXMgaXQgbWlnaHQgYmUgaG9sZGluZy4gQ2FuXG4gICAqIGJlIGNhbGxlZCBvbmx5IG9uY2UgaW4gdGhlIGxpZmVjeWNsZSBvZiBhIHNlcnZpY2UuXG4gICAqL1xuICBkaXNwb3NlKCkge31cbn1cblxuXG4vKipcbiAqIFRoaXMgaW50ZXJmYWNlIHByb3ZpZGVzIGEgYGFkb3B0RW1iZWRXaW5kb3dgIG1ldGhvZCB0aGF0IHdpbGwgYmUgY2FsbGVkIGJ5XG4gKiBydW50aW1lIGZvciBhIG5ldyBlbWJlZCB3aW5kb3cuXG4gKiBAaW50ZXJmYWNlXG4gKi9cbmV4cG9ydCBjbGFzcyBFbWJlZGRhYmxlU2VydmljZSB7XG5cbiAgLyoqXG4gICAqIEluc3RydWN0cyB0aGUgc2VydmljZSB0byBhZG9wdCB0aGUgZW1iZWQgd2luZG93IGFuZCBhZGQgYW55IG5lY2Vzc2FyeVxuICAgKiBsaXN0ZW5lcnMgYW5kIHJlc291cmNlcy5cbiAgICogQHBhcmFtIHshV2luZG93fSB1bnVzZWRFbWJlZFdpblxuICAgKi9cbiAgYWRvcHRFbWJlZFdpbmRvdyh1bnVzZWRFbWJlZFdpbikge31cbn1cblxuXG4vKipcbiAqIFJldHVybnMgYSBzZXJ2aWNlIHdpdGggdGhlIGdpdmVuIGlkLiBBc3N1bWVzIHRoYXQgaXQgaGFzIGJlZW4gcmVnaXN0ZXJlZFxuICogYWxyZWFkeS5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9mYWxsYmFja1RvVG9wV2luXG4gKiBAcmV0dXJuIHtPYmplY3R9IFRoZSBzZXJ2aWNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXhpc3RpbmdTZXJ2aWNlSW5FbWJlZFNjb3BlKHdpbiwgaWQsIG9wdF9mYWxsYmFja1RvVG9wV2luKSB7XG4gIC8vIEZpcnN0LCB0cnkgdG8gcmVzb2x2ZSB2aWEgbG9jYWwgKGVtYmVkKSB3aW5kb3cuXG4gIGNvbnN0IGxvY2FsID0gZ2V0TG9jYWxFeGlzdGluZ1NlcnZpY2VGb3JFbWJlZFdpbk9yTnVsbCh3aW4sIGlkKTtcbiAgaWYgKGxvY2FsKSB7XG4gICAgcmV0dXJuIGxvY2FsO1xuICB9XG4gIGlmIChvcHRfZmFsbGJhY2tUb1RvcFdpbikge1xuICAgIHJldHVybiBnZXRTZXJ2aWNlKHdpbiwgaWQpO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzZXJ2aWNlIHdpdGggdGhlIGdpdmVuIGlkLiBBc3N1bWVzIHRoYXQgaXQgaGFzIGJlZW4gY29uc3RydWN0ZWRcbiAqIGFscmVhZHkuXG4gKlxuICogVW5saWtlIG1vc3Qgc2VydmljZSBnZXR0ZXJzLCBwYXNzaW5nIGBOb2RlYCBpcyBuZWNlc3NhcnkgZm9yIHNvbWUgRklFLXNjb3BlXG4gKiBzZXJ2aWNlcyBzaW5jZSBzb21ldGltZXMgd2Ugb25seSBoYXZlIHRoZSBGSUUgRG9jdW1lbnQgZm9yIGNvbnRleHQuXG4gKlxuICogQHBhcmFtIHshTm9kZXwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gbm9kZU9yRG9jXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9mYWxsYmFja1RvVG9wV2luXG4gKiBAcmV0dXJuIHtPYmplY3R9IFRoZSBzZXJ2aWNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXhpc3RpbmdTZXJ2aWNlRm9yRG9jSW5FbWJlZFNjb3BlKFxuICBub2RlT3JEb2MsIGlkLCBvcHRfZmFsbGJhY2tUb1RvcFdpbikge1xuICAvLyBGaXJzdCwgdHJ5IHRvIHJlc29sdmUgdmlhIGxvY2FsIChlbWJlZCkgd2luZG93LlxuICBpZiAobm9kZU9yRG9jLm5vZGVUeXBlKSB7XG4gICAgLy8gSWYgYSBub2RlIGlzIHBhc3NlZCwgdHJ5IHRvIHJlc29sdmUgdmlhIHRoaXMgbm9kZS5cbiAgICBjb25zdCB3aW4gPSB0b1dpbigvKiogQHR5cGUgeyFEb2N1bWVudH0gKi8gKFxuICAgICAgbm9kZU9yRG9jLm93bmVyRG9jdW1lbnQgfHwgbm9kZU9yRG9jKS5kZWZhdWx0Vmlldyk7XG4gICAgY29uc3QgbG9jYWwgPSBnZXRMb2NhbEV4aXN0aW5nU2VydmljZUZvckVtYmVkV2luT3JOdWxsKHdpbiwgaWQpO1xuICAgIGlmIChsb2NhbCkge1xuICAgICAgcmV0dXJuIGxvY2FsO1xuICAgIH1cbiAgfVxuICAvLyBJZiBhbiBhbXBkb2MgaXMgcGFzc2VkIG9yIGZhbGxiYWNrIGlzIGFsbG93ZWQsIGNvbnRpbnVlIHJlc29sdmluZy5cbiAgaWYgKCFub2RlT3JEb2Mubm9kZVR5cGUgfHwgb3B0X2ZhbGxiYWNrVG9Ub3BXaW4pIHtcbiAgICByZXR1cm4gZ2V0U2VydmljZUZvckRvY0RlcHJlY2F0ZWQobm9kZU9yRG9jLCBpZCk7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogSW5zdGFsbHMgYSBzZXJ2aWNlIG92ZXJyaWRlIG9uIGFtcC1kb2MgbGV2ZWwuXG4gKiBAcGFyYW0geyFXaW5kb3d9IGVtYmVkV2luXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAqIEBwYXJhbSB7IU9iamVjdH0gc2VydmljZSBUaGUgc2VydmljZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluc3RhbGxTZXJ2aWNlSW5FbWJlZFNjb3BlKGVtYmVkV2luLCBpZCwgc2VydmljZSkge1xuICBjb25zdCB0b3BXaW4gPSBnZXRUb3BXaW5kb3coZW1iZWRXaW4pO1xuICBkZXYoKS5hc3NlcnQoZW1iZWRXaW4gIT0gdG9wV2luLFxuICAgICAgJ1NlcnZpY2Ugb3ZlcnJpZGUgY2FuIG9ubHkgYmUgaW5zdGFsbGVkIGluIGVtYmVkIHdpbmRvdzogJXMnLCBpZCk7XG4gIGRldigpLmFzc2VydCghZ2V0TG9jYWxFeGlzdGluZ1NlcnZpY2VGb3JFbWJlZFdpbk9yTnVsbChlbWJlZFdpbiwgaWQpLFxuICAgICAgJ1NlcnZpY2Ugb3ZlcnJpZGUgaGFzIGFscmVhZHkgYmVlbiBpbnN0YWxsZWQ6ICVzJywgaWQpO1xuICByZWdpc3RlclNlcnZpY2VJbnRlcm5hbChlbWJlZFdpbiwgZW1iZWRXaW4sIGlkLCAoKSA9PiBzZXJ2aWNlKTtcbiAgZ2V0U2VydmljZUludGVybmFsKGVtYmVkV2luLCBpZCk7IC8vIEZvcmNlIHNlcnZpY2UgdG8gYnVpbGQuXG59XG5cbi8qKlxuICogQHBhcmFtIHshV2luZG93fSBlbWJlZFdpblxuICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gKiBAcmV0dXJuIHs/T2JqZWN0fVxuICovXG5mdW5jdGlvbiBnZXRMb2NhbEV4aXN0aW5nU2VydmljZUZvckVtYmVkV2luT3JOdWxsKGVtYmVkV2luLCBpZCkge1xuICAvLyBOb3RlIHRoYXQgdGhpcyBtZXRob2QgY3VycmVudGx5IG9ubHkgcmVzb2x2ZXMgYWdhaW5zdCB0aGUgZ2l2ZW4gd2luZG93LlxuICAvLyBJdCBkb2VzIG5vdCB0cnkgdG8gZ28gYWxsIHRoZSB3YXkgdXAgdGhlIHBhcmVudCB3aW5kb3cgY2hhaW4uIFdlIGNhbiBjaGFuZ2VcbiAgLy8gdGhpcyBpbiB0aGUgZnV0dXJlLCBidXQgZm9yIG5vdyB0aGlzIGdpdmVzIHVzIGEgYmV0dGVyIHBlcmZvcm1hbmNlLlxuICBjb25zdCB0b3BXaW4gPSBnZXRUb3BXaW5kb3coZW1iZWRXaW4pO1xuICBpZiAoZW1iZWRXaW4gIT0gdG9wV2luICYmIGlzU2VydmljZVJlZ2lzdGVyZWQoZW1iZWRXaW4sIGlkKSkge1xuICAgIHJldHVybiBnZXRTZXJ2aWNlSW50ZXJuYWwoZW1iZWRXaW4sIGlkKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIFJlZ2lzdGVycyBhIHNlcnZpY2UgZ2l2ZW4gYSBjbGFzcyB0byBiZSB1c2VkIGFzIGltcGxlbWVudGF0aW9uLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBvZiB0aGUgc2VydmljZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24obmV3Ok9iamVjdCwgIVdpbmRvdyl9IGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaW5zdGFudGlhdGUgV2hldGhlciB0byBpbW1lZGlhdGVseSBjcmVhdGUgdGhlIHNlcnZpY2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyU2VydmljZUJ1aWxkZXIod2luLFxuICBpZCxcbiAgY29uc3RydWN0b3IsXG4gIG9wdF9pbnN0YW50aWF0ZSkge1xuICB3aW4gPSBnZXRUb3BXaW5kb3cod2luKTtcbiAgcmVnaXN0ZXJTZXJ2aWNlSW50ZXJuYWwod2luLCB3aW4sIGlkLCBjb25zdHJ1Y3Rvcik7XG4gIGlmIChvcHRfaW5zdGFudGlhdGUpIHtcbiAgICBnZXRTZXJ2aWNlSW50ZXJuYWwod2luLCBpZCk7XG4gIH1cbn1cblxuXG4vKipcbiAqIFJldHVybnMgYSBzZXJ2aWNlIGFuZCByZWdpc3RlcnMgaXQgZ2l2ZW4gYSBjbGFzcyB0byBiZSB1c2VkIGFzXG4gKiBpbXBsZW1lbnRhdGlvbi5cbiAqIEBwYXJhbSB7IU5vZGV8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IG5vZGVPckRvY1xuICogQHBhcmFtIHtzdHJpbmd9IGlkIG9mIHRoZSBzZXJ2aWNlLlxuICogQHBhcmFtIHtmdW5jdGlvbihuZXc6T2JqZWN0LCAhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvYyl9IGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaW5zdGFudGlhdGUgV2hldGhlciB0byBpbW1lZGlhdGVseSBjcmVhdGUgdGhlIHNlcnZpY2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyU2VydmljZUJ1aWxkZXJGb3JEb2Mobm9kZU9yRG9jLFxuICBpZCxcbiAgY29uc3RydWN0b3IsXG4gIG9wdF9pbnN0YW50aWF0ZSkge1xuICBjb25zdCBhbXBkb2MgPSBnZXRBbXBkb2Mobm9kZU9yRG9jKTtcbiAgY29uc3QgaG9sZGVyID0gZ2V0QW1wZG9jU2VydmljZUhvbGRlcihhbXBkb2MpO1xuICByZWdpc3RlclNlcnZpY2VJbnRlcm5hbChob2xkZXIsIGFtcGRvYywgaWQsIGNvbnN0cnVjdG9yKTtcbiAgaWYgKG9wdF9pbnN0YW50aWF0ZSkge1xuICAgIGdldFNlcnZpY2VJbnRlcm5hbChob2xkZXIsIGlkKTtcbiAgfVxufVxuXG5cbi8qKlxuICogUmV0dXJucyBhIHNlcnZpY2UgZm9yIHRoZSBnaXZlbiBpZCBhbmQgd2luZG93IChhIHBlci13aW5kb3cgc2luZ2xldG9uKS4gVXNlcnNcbiAqIHNob3VsZCB0eXBpY2FsbHkgd3JhcCB0aGlzIGFzIGEgc3BlY2lhbCBwdXJwb3NlIGZ1bmN0aW9uIChlLmcuXG4gKiBgU2VydmljZXMudnN5bmNGb3Iod2luKWApIGZvciB0eXBlIHNhZmV0eSBhbmQgYmVjYXVzZSB0aGUgZmFjdG9yeSBzaG91bGQgbm90XG4gKiBiZSBwYXNzZWQgYXJvdW5kLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBvZiB0aGUgc2VydmljZS5cbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcmV0dXJuIHtUfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VydmljZSh3aW4sIGlkKSB7XG4gIHdpbiA9IGdldFRvcFdpbmRvdyh3aW4pO1xuICByZXR1cm4gZ2V0U2VydmljZUludGVybmFsKHdpbiwgaWQpO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2UgZm9yIGEgc2VydmljZSBmb3IgdGhlIGdpdmVuIGlkIGFuZCB3aW5kb3cuIEFsc28gZXhwZWN0cyBhblxuICogZWxlbWVudCB0aGF0IGhhcyB0aGUgYWN0dWFsIGltcGxlbWVudGF0aW9uLiBUaGUgcHJvbWlzZSByZXNvbHZlcyB3aGVuIHRoZVxuICogaW1wbGVtZW50YXRpb24gbG9hZGVkLiBVc2VycyBzaG91bGQgdHlwaWNhbGx5IHdyYXAgdGhpcyBhcyBhIHNwZWNpYWwgcHVycG9zZVxuICogZnVuY3Rpb24gKGUuZy4gYFNlcnZpY2VzLnZzeW5jRm9yKHdpbilgKSBmb3IgdHlwZSBzYWZldHkgYW5kIGJlY2F1c2UgdGhlXG4gKiBmYWN0b3J5IHNob3VsZCBub3QgYmUgcGFzc2VkIGFyb3VuZC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKiBAcmV0dXJuIHshUHJvbWlzZTwhT2JqZWN0Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNlcnZpY2VQcm9taXNlKHdpbiwgaWQpIHtcbiAgcmV0dXJuIGdldFNlcnZpY2VQcm9taXNlSW50ZXJuYWwod2luLCBpZCk7XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIGEgc2VydmljZSBvciBudWxsIHdpdGggdGhlIGdpdmVuIGlkLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICogQHJldHVybiB7P09iamVjdH0gVGhlIHNlcnZpY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFeGlzdGluZ1NlcnZpY2VPck51bGwod2luLCBpZCkge1xuICB3aW4gPSBnZXRUb3BXaW5kb3cod2luKTtcbiAgaWYgKGlzU2VydmljZVJlZ2lzdGVyZWQod2luLCBpZCkpIHtcbiAgICByZXR1cm4gZ2V0U2VydmljZUludGVybmFsKHdpbiwgaWQpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cblxuLyoqXG4gKiBMaWtlIGdldFNlcnZpY2VQcm9taXNlIGJ1dCByZXR1cm5zIG51bGwgaWYgdGhlIHNlcnZpY2Ugd2FzIG5ldmVyIHJlZ2lzdGVyZWQuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gKiBAcmV0dXJuIHs/UHJvbWlzZTwhT2JqZWN0Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNlcnZpY2VQcm9taXNlT3JOdWxsKHdpbiwgaWQpIHtcbiAgcmV0dXJuIGdldFNlcnZpY2VQcm9taXNlT3JOdWxsSW50ZXJuYWwod2luLCBpZCk7XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIGEgc2VydmljZSBmb3IgdGhlIGdpdmVuIGlkIGFuZCBhbXBkb2MgKGEgcGVyLWFtcGRvYyBzaW5nbGV0b24pLlxuICogRXhwZWN0cyBzZXJ2aWNlIGBpZGAgdG8gYmUgcmVnaXN0ZXJlZC5cbiAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gKiBAcmV0dXJuIHtUfVxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNlcnZpY2VGb3JEb2MoZWxlbWVudE9yQW1wRG9jLCBpZCkge1xuICBjb25zdCBhbXBkb2MgPSBnZXRBbXBkb2MoZWxlbWVudE9yQW1wRG9jKTtcbiAgY29uc3QgaG9sZGVyID0gZ2V0QW1wZG9jU2VydmljZUhvbGRlcihhbXBkb2MpO1xuICByZXR1cm4gZ2V0U2VydmljZUludGVybmFsKGhvbGRlciwgaWQpO1xufVxuXG5cbi8qKlxuICogdGw7ZHIgLS0gVXNlIGdldFNlcnZpY2VGb3JEb2MoKSBpbnN0ZWFkIG9mIHRoaXMuXG4gKlxuICogUHJpdmlsZWdlZCB2YXJpYW50IG9mIGdldFNlcnZpY2VGb3JEb2MoKSB0aGF0IGFjY2VwdHMgbm9uLWVsZW1lbnQgcGFyYW1zLFxuICogZS5nLiB3aW5kb3cuZG9jdW1lbnQuIFRoaXMgaXMgY3VycmVudGx5IG5lY2Vzc2FyeSBmb3IgZG9jLWxldmVsIHNlcnZpY2VzXG4gKiB1c2VkIGluIHN0YXJ0dXAsIGUuZy4gQ2h1bmtzLiBFdmVudHVhbGx5IHdlIHdhbnQgdG8gcmVtb3ZlIHRoaXMgZnVuY3Rpb25cbiAqIGFuZCBoYXZlIGNhbGxlcnMgZmluZCB0aGUgYXBwcm9wcmlhdGUgQW1wRG9jIGFuZCB1c2UgZ2V0U2VydmljZUZvckRvYygpLlxuICpcbiAqIEBwYXJhbSB7IU5vZGV8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IG5vZGVPckRvY1xuICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gKiBAcmV0dXJuIHtUfVxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNlcnZpY2VGb3JEb2NEZXByZWNhdGVkKG5vZGVPckRvYywgaWQpIHtcbiAgY29uc3QgYW1wZG9jID0gZ2V0QW1wZG9jKG5vZGVPckRvYyk7XG4gIGNvbnN0IGhvbGRlciA9IGdldEFtcGRvY1NlcnZpY2VIb2xkZXIoYW1wZG9jKTtcbiAgcmV0dXJuIGdldFNlcnZpY2VJbnRlcm5hbChob2xkZXIsIGlkKTtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIGZvciBhIHNlcnZpY2UgZm9yIHRoZSBnaXZlbiBpZCBhbmQgYW1wZG9jLiBBbHNvIGV4cGVjdHNcbiAqIGEgc2VydmljZSB0aGF0IGhhcyB0aGUgYWN0dWFsIGltcGxlbWVudGF0aW9uLiBUaGUgcHJvbWlzZSByZXNvbHZlcyB3aGVuXG4gKiB0aGUgaW1wbGVtZW50YXRpb24gbG9hZGVkLlxuICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAqIEByZXR1cm4geyFQcm9taXNlPCFPYmplY3Q+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VydmljZVByb21pc2VGb3JEb2MoZWxlbWVudE9yQW1wRG9jLCBpZCkge1xuICByZXR1cm4gZ2V0U2VydmljZVByb21pc2VJbnRlcm5hbChcbiAgICAgIGdldEFtcGRvY1NlcnZpY2VIb2xkZXIoZWxlbWVudE9yQW1wRG9jKSwgaWQpO1xufVxuXG5cbi8qKlxuICogTGlrZSBnZXRTZXJ2aWNlUHJvbWlzZUZvckRvYyBidXQgcmV0dXJucyBudWxsIGlmIHRoZSBzZXJ2aWNlIHdhcyBuZXZlclxuICogcmVnaXN0ZXJlZCBmb3IgdGhpcyBhbXBkb2MuXG4gKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICogQHJldHVybiB7P1Byb21pc2U8IU9iamVjdD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTZXJ2aWNlUHJvbWlzZU9yTnVsbEZvckRvYyhlbGVtZW50T3JBbXBEb2MsIGlkKSB7XG4gIHJldHVybiBnZXRTZXJ2aWNlUHJvbWlzZU9yTnVsbEludGVybmFsKFxuICAgICAgZ2V0QW1wZG9jU2VydmljZUhvbGRlcihlbGVtZW50T3JBbXBEb2MpLCBpZCk7XG59XG5cbi8qKlxuICogU2V0IHRoZSBwYXJlbnQgYW5kIHRvcCB3aW5kb3dzIG9uIGEgY2hpbGQgd2luZG93IChmcmllbmRseSBpZnJhbWUpLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7IVdpbmRvd30gcGFyZW50V2luXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRQYXJlbnRXaW5kb3cod2luLCBwYXJlbnRXaW4pIHtcbiAgd2luLl9fQU1QX1BBUkVOVCA9IHBhcmVudFdpbjtcbiAgd2luLl9fQU1QX1RPUCA9IGdldFRvcFdpbmRvdyhwYXJlbnRXaW4pO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgcGFyZW50IHdpbmRvdyBmb3IgYSBjaGlsZCB3aW5kb3cgKGZyaWVuZGx5IGlmcmFtZSkuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7IVdpbmRvd31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFBhcmVudFdpbmRvdyh3aW4pIHtcbiAgcmV0dXJuIHdpbi5fX0FNUF9QQVJFTlQgfHwgd2luO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgdG9wIHdpbmRvdyB3aGVyZSBBTVAgUnVudGltZSBpcyBpbnN0YWxsZWQgZm9yIGEgY2hpbGQgd2luZG93XG4gKiAoZnJpZW5kbHkgaWZyYW1lKS5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHshV2luZG93fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VG9wV2luZG93KHdpbikge1xuICByZXR1cm4gd2luLl9fQU1QX1RPUCB8fCB3aW47XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBwYXJlbnQgXCJmcmllbmRseVwiIGlmcmFtZSBpZiB0aGUgbm9kZSBiZWxvbmdzIHRvIGEgY2hpbGQgd2luZG93LlxuICogQHBhcmFtIHshTm9kZX0gbm9kZVxuICogQHBhcmFtIHshV2luZG93fSB0b3BXaW5cbiAqIEByZXR1cm4gez9IVE1MSUZyYW1lRWxlbWVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFBhcmVudFdpbmRvd0ZyYW1lRWxlbWVudChub2RlLCB0b3BXaW4pIHtcbiAgY29uc3QgY2hpbGRXaW4gPSAobm9kZS5vd25lckRvY3VtZW50IHx8IG5vZGUpLmRlZmF1bHRWaWV3O1xuICBpZiAoY2hpbGRXaW4gJiYgY2hpbGRXaW4gIT0gdG9wV2luICYmIGdldFRvcFdpbmRvdyhjaGlsZFdpbikgPT0gdG9wV2luKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiAvKiogQHR5cGUgez9IVE1MSUZyYW1lRWxlbWVudH0gKi8gKGNoaWxkV2luLmZyYW1lRWxlbWVudCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gSWdub3JlIHRoZSBlcnJvci5cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0geyFOb2RlfCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBub2RlT3JEb2NcbiAqIEByZXR1cm4geyEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QW1wZG9jKG5vZGVPckRvYykge1xuICBpZiAobm9kZU9yRG9jLm5vZGVUeXBlKSB7XG4gICAgY29uc3Qgd2luID0gdG9XaW4oLyoqIEB0eXBlIHshRG9jdW1lbnR9ICovIChcbiAgICAgIG5vZGVPckRvYy5vd25lckRvY3VtZW50IHx8IG5vZGVPckRvYykuZGVmYXVsdFZpZXcpO1xuICAgIHJldHVybiBnZXRBbXBkb2NTZXJ2aWNlKHdpbikuZ2V0QW1wRG9jKC8qKiBAdHlwZSB7IU5vZGV9ICovIChub2RlT3JEb2MpKTtcbiAgfVxuICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gKi8gKG5vZGVPckRvYyk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0geyFOb2RlfCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBub2RlT3JEb2NcbiAqIEByZXR1cm4geyEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfCFXaW5kb3d9XG4gKi9cbmZ1bmN0aW9uIGdldEFtcGRvY1NlcnZpY2VIb2xkZXIobm9kZU9yRG9jKSB7XG4gIGNvbnN0IGFtcGRvYyA9IGdldEFtcGRvYyhub2RlT3JEb2MpO1xuICByZXR1cm4gYW1wZG9jLmlzU2luZ2xlRG9jKCkgPyBhbXBkb2Mud2luIDogYW1wZG9jO1xufVxuXG5cbi8qKlxuICogVGhpcyBpcyBlc3NlbnRpYWxseSBhIGR1cGxpY2F0ZSBvZiBgYW1wZG9jLmpzYCwgYnV0IG5lY2Vzc2FyeSB0byBhdm9pZFxuICogY2lyY3VsYXIgZGVwZW5kZW5jaWVzLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4geyEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jU2VydmljZX1cbiAqL1xuZnVuY3Rpb24gZ2V0QW1wZG9jU2VydmljZSh3aW4pIHtcbiAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2NTZXJ2aWNlfSAqLyAoXG4gICAgZ2V0U2VydmljZSh3aW4sICdhbXBkb2MnKSk7XG59XG5cblxuLyoqXG4gKiBHZXQgc2VydmljZSBgaWRgIGZyb20gYGhvbGRlcmAuIEFzc3VtZXMgdGhlIHNlcnZpY2VcbiAqIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZC5cbiAqIEBwYXJhbSB7IU9iamVjdH0gaG9sZGVyIE9iamVjdCBob2xkaW5nIHRoZSBzZXJ2aWNlIGluc3RhbmNlLlxuICogQHBhcmFtIHtzdHJpbmd9IGlkIG9mIHRoZSBzZXJ2aWNlLlxuICogQHJldHVybiB7T2JqZWN0fVxuICogQHRlbXBsYXRlIFRcbiAqL1xuZnVuY3Rpb24gZ2V0U2VydmljZUludGVybmFsKGhvbGRlciwgaWQpIHtcbiAgZGV2KCkuYXNzZXJ0KGlzU2VydmljZVJlZ2lzdGVyZWQoaG9sZGVyLCBpZCksXG4gICAgICBgRXhwZWN0ZWQgc2VydmljZSAke2lkfSB0byBiZSByZWdpc3RlcmVkYCk7XG4gIGNvbnN0IHNlcnZpY2VzID0gZ2V0U2VydmljZXMoaG9sZGVyKTtcbiAgY29uc3QgcyA9IHNlcnZpY2VzW2lkXTtcbiAgaWYgKCFzLm9iaikge1xuICAgIGRldigpLmFzc2VydChzLmN0b3IsIGBTZXJ2aWNlICR7aWR9IHJlZ2lzdGVyZWQgd2l0aG91dCBjdG9yIG5vciBpbXBsLmApO1xuICAgIGRldigpLmFzc2VydChzLmNvbnRleHQsIGBTZXJ2aWNlICR7aWR9IHJlZ2lzdGVyZWQgd2l0aG91dCBjb250ZXh0LmApO1xuICAgIHMub2JqID0gbmV3IHMuY3RvcihzLmNvbnRleHQpO1xuICAgIGRldigpLmFzc2VydChzLm9iaiwgYFNlcnZpY2UgJHtpZH0gY29uc3RydWN0ZWQgdG8gbnVsbC5gKTtcbiAgICBzLmN0b3IgPSBudWxsO1xuICAgIHMuY29udGV4dCA9IG51bGw7XG4gICAgLy8gVGhlIHNlcnZpY2UgbWF5IGhhdmUgYmVlbiByZXF1ZXN0ZWQgYWxyZWFkeSwgaW4gd2hpY2ggY2FzZSB3ZSBoYXZlIGFcbiAgICAvLyBwZW5kaW5nIHByb21pc2Ugd2UgbmVlZCB0byBmdWxmaWxsLlxuICAgIGlmIChzLnJlc29sdmUpIHtcbiAgICAgIHMucmVzb2x2ZShzLm9iaik7XG4gICAgfVxuICB9XG4gIHJldHVybiBzLm9iajtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyFPYmplY3R9IGhvbGRlciBPYmplY3QgaG9sZGluZyB0aGUgc2VydmljZSBpbnN0YW5jZS5cbiAqIEBwYXJhbSB7IVdpbmRvd3whLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gY29udGV4dCBXaW4gb3IgQW1wRG9jLlxuICogQHBhcmFtIHtzdHJpbmd9IGlkIG9mIHRoZSBzZXJ2aWNlLlxuICogQHBhcmFtIHs/ZnVuY3Rpb24obmV3Ok9iamVjdCwgIVdpbmRvdyl8P2Z1bmN0aW9uKG5ldzpPYmplY3QsICEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jKX0gY3RvciBDb25zdHJ1Y3RvciBmdW5jdGlvbiB0byBuZXcgdGhlIHNlcnZpY2UuIENhbGxlZCB3aXRoIGNvbnRleHQuXG4gKi9cbmZ1bmN0aW9uIHJlZ2lzdGVyU2VydmljZUludGVybmFsKGhvbGRlciwgY29udGV4dCwgaWQsIGN0b3IpIHtcbiAgY29uc3Qgc2VydmljZXMgPSBnZXRTZXJ2aWNlcyhob2xkZXIpO1xuICBsZXQgcyA9IHNlcnZpY2VzW2lkXTtcblxuICBpZiAoIXMpIHtcbiAgICBzID0gc2VydmljZXNbaWRdID0ge1xuICAgICAgb2JqOiBudWxsLFxuICAgICAgcHJvbWlzZTogbnVsbCxcbiAgICAgIHJlc29sdmU6IG51bGwsXG4gICAgICBjb250ZXh0OiBudWxsLFxuICAgICAgY3RvcjogbnVsbCxcbiAgICB9O1xuICB9XG5cbiAgaWYgKHMuY3RvciB8fCBzLm9iaikge1xuICAgIC8vIFNlcnZpY2UgYWxyZWFkeSByZWdpc3RlcmVkLlxuICAgIHJldHVybjtcbiAgfVxuXG4gIHMuY3RvciA9IGN0b3I7XG4gIHMuY29udGV4dCA9IGNvbnRleHQ7XG5cbiAgLy8gVGhlIHNlcnZpY2UgbWF5IGhhdmUgYmVlbiByZXF1ZXN0ZWQgYWxyZWFkeSwgaW4gd2hpY2ggY2FzZSB0aGVyZSBpcyBhXG4gIC8vIHBlbmRpbmcgcHJvbWlzZSB0aGF0IG5lZWRzIHRvIGZ1bGZpbGxlZC5cbiAgaWYgKHMucmVzb2x2ZSkge1xuICAgIC8vIGdldFNlcnZpY2VJbnRlcm5hbCB3aWxsIHJlc29sdmUgdGhlIHByb21pc2UuXG4gICAgZ2V0U2VydmljZUludGVybmFsKGhvbGRlciwgaWQpO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHshT2JqZWN0fSBob2xkZXJcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBvZiB0aGUgc2VydmljZS5cbiAqIEByZXR1cm4geyFQcm9taXNlPCFPYmplY3Q+fVxuICovXG5mdW5jdGlvbiBnZXRTZXJ2aWNlUHJvbWlzZUludGVybmFsKGhvbGRlciwgaWQpIHtcbiAgY29uc3QgY2FjaGVkID0gZ2V0U2VydmljZVByb21pc2VPck51bGxJbnRlcm5hbChob2xkZXIsIGlkKTtcbiAgaWYgKGNhY2hlZCkge1xuICAgIHJldHVybiBjYWNoZWQ7XG4gIH1cbiAgLy8gU2VydmljZSBpcyBub3QgcmVnaXN0ZXJlZC5cblxuICAvLyBUT0RPKEBjcmFtZm9yY2UpOiBBZGQgYSBjaGVjayB0aGF0IGlmIHRoZSBlbGVtZW50IGlzIGV2ZW50dWFsbHkgcmVnaXN0ZXJlZFxuICAvLyB0aGF0IHRoZSBzZXJ2aWNlIGlzIGFjdHVhbGx5IHByb3ZpZGVkIGFuZCB0aGlzIHByb21pc2UgcmVzb2x2ZXMuXG4gIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XG4gIGNvbnN0IHtwcm9taXNlLCByZXNvbHZlfSA9IGRlZmVycmVkO1xuXG4gIGNvbnN0IHNlcnZpY2VzID0gZ2V0U2VydmljZXMoaG9sZGVyKTtcbiAgc2VydmljZXNbaWRdID0ge1xuICAgIG9iajogbnVsbCxcbiAgICBwcm9taXNlLFxuICAgIHJlc29sdmUsXG4gICAgY29udGV4dDogbnVsbCxcbiAgICBjdG9yOiBudWxsLFxuICB9O1xuICByZXR1cm4gcHJvbWlzZTtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIGZvciBzZXJ2aWNlIGBpZGAgaWYgdGhlIHNlcnZpY2UgaGFzIGJlZW4gcmVnaXN0ZXJlZFxuICogb24gYGhvbGRlcmAuXG4gKiBAcGFyYW0geyFPYmplY3R9IGhvbGRlclxuICogQHBhcmFtIHtzdHJpbmd9IGlkIG9mIHRoZSBzZXJ2aWNlLlxuICogQHJldHVybiB7P1Byb21pc2U8IU9iamVjdD59XG4gKi9cbmZ1bmN0aW9uIGdldFNlcnZpY2VQcm9taXNlT3JOdWxsSW50ZXJuYWwoaG9sZGVyLCBpZCkge1xuICBjb25zdCBzZXJ2aWNlcyA9IGdldFNlcnZpY2VzKGhvbGRlcik7XG4gIGNvbnN0IHMgPSBzZXJ2aWNlc1tpZF07XG4gIGlmIChzKSB7XG4gICAgaWYgKHMucHJvbWlzZSkge1xuICAgICAgcmV0dXJuIHMucHJvbWlzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSW5zdGFudGlhdGUgc2VydmljZSBpZiBub3QgYWxyZWFkeSBpbnN0YW50aWF0ZWQuXG4gICAgICBnZXRTZXJ2aWNlSW50ZXJuYWwoaG9sZGVyLCBpZCk7XG4gICAgICByZXR1cm4gcy5wcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKC8qKiBAdHlwZSB7IU9iamVjdH0gKi8gKHMub2JqKSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgb2JqZWN0IHRoYXQgaG9sZHMgdGhlIHNlcnZpY2VzIHJlZ2lzdGVyZWQgaW4gYSBob2xkZXIuXG4gKiBAcGFyYW0geyFPYmplY3R9IGhvbGRlclxuICogQHJldHVybiB7IU9iamVjdDxzdHJpbmcsIVNlcnZpY2VIb2xkZXJEZWY+fVxuICovXG5mdW5jdGlvbiBnZXRTZXJ2aWNlcyhob2xkZXIpIHtcbiAgbGV0IHtzZXJ2aWNlc30gPSBob2xkZXI7XG4gIGlmICghc2VydmljZXMpIHtcbiAgICBzZXJ2aWNlcyA9IGhvbGRlci5zZXJ2aWNlcyA9IHt9O1xuICB9XG4gIHJldHVybiBzZXJ2aWNlcztcbn1cblxuXG4vKipcbiAqIFdoZXRoZXIgdGhlIHNwZWNpZmllZCBzZXJ2aWNlIGltcGxlbWVudHMgYERpc3Bvc2FibGVgIGludGVyZmFjZS5cbiAqIEBwYXJhbSB7IU9iamVjdH0gc2VydmljZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRGlzcG9zYWJsZShzZXJ2aWNlKSB7XG4gIHJldHVybiB0eXBlb2Ygc2VydmljZS5kaXNwb3NlID09ICdmdW5jdGlvbic7XG59XG5cblxuLyoqXG4gKiBBc3NlcnRzIHRoYXQgdGhlIHNwZWNpZmllZCBzZXJ2aWNlIGltcGxlbWVudHMgYERpc3Bvc2FibGVgIGludGVyZmFjZSBhbmRcbiAqIHR5cGVjYXN0cyB0aGUgaW5zdGFuY2UgdG8gYERpc3Bvc2FibGVgLlxuICogQHBhcmFtIHshT2JqZWN0fSBzZXJ2aWNlXG4gKiBAcmV0dXJuIHshRGlzcG9zYWJsZX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydERpc3Bvc2FibGUoc2VydmljZSkge1xuICBkZXYoKS5hc3NlcnQoaXNEaXNwb3NhYmxlKHNlcnZpY2UpLCAncmVxdWlyZWQgdG8gaW1wbGVtZW50IERpc3Bvc2FibGUnKTtcbiAgcmV0dXJuIC8qKiBAdHlwZSB7IURpc3Bvc2FibGV9ICovIChzZXJ2aWNlKTtcbn1cblxuXG4vKipcbiAqIERpc3Bvc2VzIGFsbCBkaXNwb3NhYmxlIChpbXBsZW1lbnRzIGBEaXNwb3NhYmxlYCBpbnRlcmZhY2UpIHNlcnZpY2VzIGluXG4gKiBhbXBkb2Mgc2NvcGUuXG4gKiBAcGFyYW0geyEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBhbXBkb2NcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpc3Bvc2VTZXJ2aWNlc0ZvckRvYyhhbXBkb2MpIHtcbiAgZGlzcG9zZVNlcnZpY2VzSW50ZXJuYWwoYW1wZG9jKTtcbn1cblxuXG4vKipcbiAqIERpc3Bvc2VzIGFsbCBkaXNwb3NhYmxlIChpbXBsZW1lbnRzIGBEaXNwb3NhYmxlYCBpbnRlcmZhY2UpIHNlcnZpY2VzIGluXG4gKiBlbWJlZCBzY29wZS5cbiAqIEBwYXJhbSB7IVdpbmRvd30gZW1iZWRXaW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpc3Bvc2VTZXJ2aWNlc0ZvckVtYmVkKGVtYmVkV2luKSB7XG4gIGRpc3Bvc2VTZXJ2aWNlc0ludGVybmFsKGVtYmVkV2luKTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IU9iamVjdH0gaG9sZGVyIE9iamVjdCBob2xkaW5nIHRoZSBzZXJ2aWNlIGluc3RhbmNlcy5cbiAqL1xuZnVuY3Rpb24gZGlzcG9zZVNlcnZpY2VzSW50ZXJuYWwoaG9sZGVyKSB7XG4gIC8vIFRPRE8oZHZveXRlbmtvKTogQ29uc2lkZXIgbWFya2luZyBob2xkZXIgYXMgZGVzdHJveWVkIGZvciBsYXRlci1hcnJpdmluZ1xuICAvLyBzZXJ2aWNlIHRvIGJlIGNhbmNlbGVkIGF1dG9tYXRpY2FsbHkuXG4gIGNvbnN0IHNlcnZpY2VzID0gZ2V0U2VydmljZXMoaG9sZGVyKTtcbiAgZm9yIChjb25zdCBpZCBpbiBzZXJ2aWNlcykge1xuICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNlcnZpY2VzLCBpZCkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBjb25zdCBzZXJ2aWNlSG9sZGVyID0gc2VydmljZXNbaWRdO1xuICAgIGlmIChzZXJ2aWNlSG9sZGVyLm9iaikge1xuICAgICAgZGlzcG9zZVNlcnZpY2VJbnRlcm5hbChpZCwgc2VydmljZUhvbGRlci5vYmopO1xuICAgIH0gZWxzZSBpZiAoc2VydmljZUhvbGRlci5wcm9taXNlKSB7XG4gICAgICBzZXJ2aWNlSG9sZGVyLnByb21pc2UudGhlbihcbiAgICAgICAgICBpbnN0YW5jZSA9PiBkaXNwb3NlU2VydmljZUludGVybmFsKGlkLCBpbnN0YW5jZSkpO1xuICAgIH1cbiAgfVxufVxuXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gKiBAcGFyYW0geyFPYmplY3R9IHNlcnZpY2VcbiAqL1xuZnVuY3Rpb24gZGlzcG9zZVNlcnZpY2VJbnRlcm5hbChpZCwgc2VydmljZSkge1xuICBpZiAoIWlzRGlzcG9zYWJsZShzZXJ2aWNlKSkge1xuICAgIHJldHVybjtcbiAgfVxuICB0cnkge1xuICAgIGFzc2VydERpc3Bvc2FibGUoc2VydmljZSkuZGlzcG9zZSgpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gRW5zdXJlIHRoYXQgYSBmYWlsdXJlIHRvIGRpc3Bvc2UgYSBzZXJ2aWNlIGRvZXMgbm90IGRpc3J1cHQgb3RoZXJcbiAgICAvLyBzZXJ2aWNlcy5cbiAgICBkZXYoKS5lcnJvcignU0VSVklDRScsICdmYWlsZWQgdG8gZGlzcG9zZSBzZXJ2aWNlJywgaWQsIGUpO1xuICB9XG59XG5cblxuLyoqXG4gKiBXaGV0aGVyIHRoZSBzcGVjaWZpZWQgc2VydmljZSBpbXBsZW1lbnRzIGBFbWJlZGRhYmxlU2VydmljZWAgaW50ZXJmYWNlLlxuICogQHBhcmFtIHshT2JqZWN0fSBzZXJ2aWNlXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNFbWJlZGRhYmxlKHNlcnZpY2UpIHtcbiAgcmV0dXJuIHR5cGVvZiBzZXJ2aWNlLmFkb3B0RW1iZWRXaW5kb3cgPT0gJ2Z1bmN0aW9uJztcbn1cblxuXG4vKipcbiAqIEFkb3B0cyBhbiBlbWJlZGRhYmxlIChpbXBsZW1lbnRzIGBFbWJlZGRhYmxlU2VydmljZWAgaW50ZXJmYWNlKSBzZXJ2aWNlXG4gKiBpbiBlbWJlZCBzY29wZS5cbiAqIEBwYXJhbSB7IVdpbmRvd30gZW1iZWRXaW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzZXJ2aWNlSWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkb3B0U2VydmljZUZvckVtYmVkKGVtYmVkV2luLCBzZXJ2aWNlSWQpIHtcbiAgY29uc3QgYWRvcHRlZCA9IGFkb3B0U2VydmljZUZvckVtYmVkSWZFbWJlZGRhYmxlKGVtYmVkV2luLCBzZXJ2aWNlSWQpO1xuICBkZXYoKS5hc3NlcnQoYWRvcHRlZCwgYFNlcnZpY2UgJHtzZXJ2aWNlSWR9IG5vdCBmb3VuZCBvbiBwYXJlbnQgYCArXG4gICAgICAnb3IgZG9lc25cXCd0IGltcGxlbWVudCBFbWJlZGRhYmxlU2VydmljZS4nKTtcbn1cblxuXG4vKipcbiAqIEFkb3B0cyBhbiBlbWJlZGRhYmxlIChpbXBsZW1lbnRzIGBFbWJlZGRhYmxlU2VydmljZWAgaW50ZXJmYWNlKSBzZXJ2aWNlXG4gKiBpbiBlbWJlZCBzY29wZS5cbiAqIEBwYXJhbSB7IVdpbmRvd30gZW1iZWRXaW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzZXJ2aWNlSWRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZG9wdFNlcnZpY2VGb3JFbWJlZElmRW1iZWRkYWJsZShlbWJlZFdpbiwgc2VydmljZUlkKSB7XG4gIGNvbnN0IGZyYW1lRWxlbWVudCA9IC8qKiBAdHlwZSB7IU5vZGV9ICovIChkZXYoKS5hc3NlcnQoXG4gICAgICBlbWJlZFdpbi5mcmFtZUVsZW1lbnQsXG4gICAgICAnZnJhbWVFbGVtZW50IG5vdCBmb3VuZCBmb3IgZW1iZWQnKSk7XG4gIGNvbnN0IGFtcGRvYyA9IGdldEFtcGRvYyhmcmFtZUVsZW1lbnQpO1xuICBjb25zdCBob2xkZXIgPSBnZXRBbXBkb2NTZXJ2aWNlSG9sZGVyKGFtcGRvYyk7XG4gIGlmICghaXNTZXJ2aWNlUmVnaXN0ZXJlZChob2xkZXIsIHNlcnZpY2VJZCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3Qgc2VydmljZSA9IGdldFNlcnZpY2VGb3JEb2NEZXByZWNhdGVkKGZyYW1lRWxlbWVudCwgc2VydmljZUlkKTtcbiAgaWYgKCFpc0VtYmVkZGFibGUoc2VydmljZSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgc2VydmljZS5hZG9wdEVtYmVkV2luZG93KGVtYmVkV2luKTtcbiAgcmV0dXJuIHRydWU7XG59XG5cblxuLyoqXG4gKiBSZXNldHMgYSBzaW5nbGUgc2VydmljZSwgc28gaXQgZ2V0cyByZWNyZWF0ZWQgb24gbmV4dCBnZXRTZXJ2aWNlIGludm9jYXRpb24uXG4gKiBAcGFyYW0geyFPYmplY3R9IGhvbGRlclxuICogQHBhcmFtIHtzdHJpbmd9IGlkIG9mIHRoZSBzZXJ2aWNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRTZXJ2aWNlRm9yVGVzdGluZyhob2xkZXIsIGlkKSB7XG4gIGlmIChob2xkZXIuc2VydmljZXMpIHtcbiAgICBob2xkZXIuc2VydmljZXNbaWRdID0gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7IU9iamVjdH0gaG9sZGVyIE9iamVjdCBob2xkaW5nIHRoZSBzZXJ2aWNlIGluc3RhbmNlLlxuICogQHBhcmFtIHtzdHJpbmd9IGlkIG9mIHRoZSBzZXJ2aWNlLlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNTZXJ2aWNlUmVnaXN0ZXJlZChob2xkZXIsIGlkKSB7XG4gIGNvbnN0IHNlcnZpY2UgPSBob2xkZXIuc2VydmljZXMgJiYgaG9sZGVyLnNlcnZpY2VzW2lkXTtcbiAgLy8gQWxsIHJlZ2lzdGVyZWQgc2VydmljZXMgbXVzdCBoYXZlIGFuIGltcGxlbWVudGF0aW9uIG9yIGEgY29uc3RydWN0b3IuXG4gIHJldHVybiAhIShzZXJ2aWNlICYmIChzZXJ2aWNlLmN0b3IgfHwgc2VydmljZS5vYmopKTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHtkZXZ9IGZyb20gJy4uL2xvZyc7XG5pbXBvcnQge2lzRmluaXRlTnVtYmVyfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQge2xvYWRQcm9taXNlfSBmcm9tICcuLi9ldmVudC1oZWxwZXInO1xuXG4vKiogQHR5cGVkZWYge3N0cmluZ3xudW1iZXJ8Ym9vbGVhbnx1bmRlZmluZWR8bnVsbH0gKi9cbmxldCBSZXNvbHZlclJldHVybkRlZjtcblxuLyoqIEB0eXBlZGVmIHtmdW5jdGlvbiguLi4qKTpSZXNvbHZlclJldHVybkRlZn0gKi9cbmV4cG9ydCBsZXQgU3luY1Jlc29sdmVyRGVmO1xuXG4vKiogQHR5cGVkZWYge2Z1bmN0aW9uKC4uLiopOiFQcm9taXNlPFJlc29sdmVyUmV0dXJuRGVmPn0gKi9cbmV4cG9ydCBsZXQgQXN5bmNSZXNvbHZlckRlZjtcblxuLyoqIEB0eXBlZGVmIHt7c3luYzogU3luY1Jlc29sdmVyRGVmLCBhc3luYzogQXN5bmNSZXNvbHZlckRlZn19ICovXG5sZXQgUmVwbGFjZW1lbnREZWY7XG5cblxuLyoqXG4gKiBSZXR1cm5zIG5hdmlnYXRpb24gdGltaW5nIGluZm9ybWF0aW9uIGJhc2VkIG9uIHRoZSBzdGFydCBhbmQgZW5kIGV2ZW50cy5cbiAqIFRoZSBkYXRhIGZvciB0aGUgdGltaW5nIGV2ZW50cyBpcyByZXRyaWV2ZWQgZnJvbSBwZXJmb3JtYW5jZS50aW1pbmcgQVBJLlxuICogSWYgc3RhcnQgYW5kIGVuZCBldmVudHMgYXJlIGJvdGggZ2l2ZW4sIHRoZSByZXN1bHQgaXMgdGhlIGRpZmZlcmVuY2UgYmV0d2VlblxuICogdGhlIHR3by4gSWYgb25seSBzdGFydCBldmVudCBpcyBnaXZlbiwgdGhlIHJlc3VsdCBpcyB0aGUgdGltaW5nIHZhbHVlIGF0XG4gKiBzdGFydCBldmVudC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RhcnRFdmVudFxuICogQHBhcmFtIHtzdHJpbmc9fSBlbmRFdmVudFxuICogQHJldHVybiB7IVByb21pc2U8UmVzb2x2ZXJSZXR1cm5EZWY+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGltaW5nRGF0YUFzeW5jKHdpbiwgc3RhcnRFdmVudCwgZW5kRXZlbnQpIHtcbiAgcmV0dXJuIGxvYWRQcm9taXNlKHdpbikudGhlbigoKSA9PiB7XG4gICAgcmV0dXJuIGdldFRpbWluZ0RhdGFTeW5jKHdpbiwgc3RhcnRFdmVudCwgZW5kRXZlbnQpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIG5hdmlnYXRpb24gdGltaW5nIGluZm9ybWF0aW9uIGJhc2VkIG9uIHRoZSBzdGFydCBhbmQgZW5kIGV2ZW50cy5cbiAqIFRoZSBkYXRhIGZvciB0aGUgdGltaW5nIGV2ZW50cyBpcyByZXRyaWV2ZWQgZnJvbSBwZXJmb3JtYW5jZS50aW1pbmcgQVBJLlxuICogSWYgc3RhcnQgYW5kIGVuZCBldmVudHMgYXJlIGJvdGggZ2l2ZW4sIHRoZSByZXN1bHQgaXMgdGhlIGRpZmZlcmVuY2UgYmV0d2VlblxuICogdGhlIHR3by4gSWYgb25seSBzdGFydCBldmVudCBpcyBnaXZlbiwgdGhlIHJlc3VsdCBpcyB0aGUgdGltaW5nIHZhbHVlIGF0XG4gKiBzdGFydCBldmVudC4gRW5mb3JjZXMgc3luY2hyb25vdXMgZXZhbHVhdGlvbi5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RhcnRFdmVudFxuICogQHBhcmFtIHtzdHJpbmc9fSBlbmRFdmVudFxuICogQHJldHVybiB7UmVzb2x2ZXJSZXR1cm5EZWZ9IHVuZGVmaW5lZCBpZiBBUEkgaXMgbm90IGF2YWlsYWJsZSwgZW1wdHkgc3RyaW5nXG4gKiAgICBpZiBpdCBpcyBub3QgeWV0IGF2YWlsYWJsZSwgb3IgdmFsdWUgYXMgc3RyaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUaW1pbmdEYXRhU3luYyh3aW4sIHN0YXJ0RXZlbnQsIGVuZEV2ZW50KSB7XG4gIGNvbnN0IHRpbWluZ0luZm8gPSB3aW5bJ3BlcmZvcm1hbmNlJ10gJiYgd2luWydwZXJmb3JtYW5jZSddWyd0aW1pbmcnXTtcbiAgaWYgKCF0aW1pbmdJbmZvIHx8IHRpbWluZ0luZm9bJ25hdmlnYXRpb25TdGFydCddID09IDApIHtcbiAgICAvLyBOYXZpZ2F0aW9uIHRpbWluZyBBUEkgaXMgbm90IHN1cHBvcnRlZC5cbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBtZXRyaWMgPSAoZW5kRXZlbnQgPT09IHVuZGVmaW5lZClcbiAgICA/IHRpbWluZ0luZm9bc3RhcnRFdmVudF1cbiAgICA6IHRpbWluZ0luZm9bZW5kRXZlbnRdIC0gdGltaW5nSW5mb1tzdGFydEV2ZW50XTtcblxuICBpZiAoIWlzRmluaXRlTnVtYmVyKG1ldHJpYykgfHwgbWV0cmljIDwgMCkge1xuICAgIC8vIFRoZSBtZXRyaWMgaXMgbm90IHN1cHBvcnRlZC5cbiAgICByZXR1cm47XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG1ldHJpYztcbiAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgbmF2aWdhdGlvbiBpbmZvcm1hdGlvbiBmcm9tIHRoZSBjdXJyZW50IGJyb3dzaW5nIGNvbnRleHQuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZVxuICogQHJldHVybiB7UmVzb2x2ZXJSZXR1cm5EZWZ9XG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TmF2aWdhdGlvbkRhdGEod2luLCBhdHRyaWJ1dGUpIHtcbiAgY29uc3QgbmF2aWdhdGlvbkluZm8gPSB3aW5bJ3BlcmZvcm1hbmNlJ10gJiZcbiAgICB3aW5bJ3BlcmZvcm1hbmNlJ11bJ25hdmlnYXRpb24nXTtcbiAgaWYgKCFuYXZpZ2F0aW9uSW5mbyB8fCBuYXZpZ2F0aW9uSW5mb1thdHRyaWJ1dGVdID09PSB1bmRlZmluZWQpIHtcbiAgICAvLyBQZXJmb3JtYW5jZU5hdmlnYXRpb24gaW50ZXJmYWNlIGlzIG5vdCBzdXBwb3J0ZWQgb3IgYXR0cmlidXRlIGlzIG5vdFxuICAgIC8vIGltcGxlbWVudGVkLlxuICAgIHJldHVybjtcbiAgfVxuICByZXR1cm4gbmF2aWdhdGlvbkluZm9bYXR0cmlidXRlXTtcbn1cblxuXG4vKipcbiAqIEEgY2xhc3MgdG8gcHJvdmlkZSB2YXJpYWJsZSBzdWJzdGl0dXRpb24gcmVsYXRlZCBmZWF0dXJlcy4gRXh0ZW5kIHRoaXMgY2xhc3NcbiAqIGFuZCBvdmVycmlkZSBpbml0aWFsaXplKCkgdG8gYWRkIG1vcmUgc3VwcG9ydGVkIHZhcmlhYmxlcy5cbiAqL1xuZXhwb3J0IGNsYXNzIFZhcmlhYmxlU291cmNlIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4vYW1wZG9jLWltcGwuQW1wRG9jfSBhbXBkb2NcbiAgICovXG4gIGNvbnN0cnVjdG9yKGFtcGRvYykge1xuICAgIC8qKiBAcHJvdGVjdGVkIEBjb25zdCB7IS4vYW1wZG9jLWltcGwuQW1wRG9jfSAqL1xuICAgIHRoaXMuYW1wZG9jID0gYW1wZG9jO1xuXG4gICAgLyoqIEBwcml2YXRlIHshUmVnRXhwfHVuZGVmaW5lZH0gKi9cbiAgICB0aGlzLnJlcGxhY2VtZW50RXhwcl8gPSB1bmRlZmluZWQ7XG5cbiAgICAvKiogQHByaXZhdGUgeyFSZWdFeHB8dW5kZWZpbmVkfSAqL1xuICAgIHRoaXMucmVwbGFjZW1lbnRFeHByVjJfID0gdW5kZWZpbmVkO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IU9iamVjdDxzdHJpbmcsICFSZXBsYWNlbWVudERlZj59ICovXG4gICAgdGhpcy5yZXBsYWNlbWVudHNfID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLmluaXRpYWxpemVkXyA9IGZhbHNlO1xuXG4gICAgdGhpcy5nZXRVcmxNYWNyb1doaXRlbGlzdF8oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMYXppbHkgaW5pdGlhbGl6ZSB0aGUgZGVmYXVsdCByZXBsYWNlbWVudHMuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpbml0aWFsaXplXygpIHtcbiAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgICB0aGlzLmluaXRpYWxpemVkXyA9IHRydWU7XG4gIH1cblxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gc2V0IGFsbCB0aGUgdmFyaWFibGVzIHN1cHBvcnRlZCBieSBkZXJpdmVkIGNsYXNzLlxuICAgKi9cbiAgaW5pdGlhbGl6ZSgpIHtcbiAgICAvLyBOZWVkcyB0byBiZSBpbXBsZW1lbnRlZCBieSBkZXJpdmVkIGNsYXNzZXMuXG4gIH1cblxuICAvKipcbiAgICogTWV0aG9kIGV4aXN0cyB0byBhc3Npc3Qgc3R1YmJpbmcgaW4gdGVzdHMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEByZXR1cm4geyFSZXBsYWNlbWVudERlZn1cbiAgICovXG4gIGdldChuYW1lKSB7XG4gICAgaWYgKCF0aGlzLmluaXRpYWxpemVkXykge1xuICAgICAgdGhpcy5pbml0aWFsaXplXygpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnJlcGxhY2VtZW50c19bbmFtZV07XG4gIH1cblxuICAvKipcbiAgICogU2V0cyBhIHN5bmNocm9ub3VzIHZhbHVlIHJlc29sdmVyIGZvciB0aGUgdmFyaWFibGUgd2l0aCB0aGUgc3BlY2lmaWVkIG5hbWUuXG4gICAqIFRoZSB2YWx1ZSByZXNvbHZlciBtYXkgb3B0aW9uYWxseSB0YWtlIGFuIGV4dHJhIHBhcmFtZXRlci5cbiAgICogQ2FuIGJlIGNhbGxlZCBpbiBjb25qdW5jdGlvbiB3aXRoIHNldEFzeW5jIHRvIGFsbG93IGZvciBhZGRpdGlvbmFsXG4gICAqIGFzeW5jaHJvbm91cyByZXNvbHZlciB3aGVyZSBleHBhbmQgd2lsbCB1c2UgYXN5bmMgYW5kIGV4cGFuZFN5bmMgdGhlIHN5bmNcbiAgICogdmVyc2lvbi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhck5hbWVcbiAgICogQHBhcmFtIHshU3luY1Jlc29sdmVyRGVmfSBzeW5jUmVzb2x2ZXJcbiAgICogQHJldHVybiB7IVZhcmlhYmxlU291cmNlfVxuICAgKi9cbiAgc2V0KHZhck5hbWUsIHN5bmNSZXNvbHZlcikge1xuICAgIGRldigpLmFzc2VydCh2YXJOYW1lLmluZGV4T2YoJ1JFVFVSTicpID09IC0xKTtcbiAgICB0aGlzLnJlcGxhY2VtZW50c19bdmFyTmFtZV0gPVxuICAgICAgICB0aGlzLnJlcGxhY2VtZW50c19bdmFyTmFtZV0gfHwge3N5bmM6IHVuZGVmaW5lZCwgYXN5bmM6IHVuZGVmaW5lZH07XG4gICAgdGhpcy5yZXBsYWNlbWVudHNfW3Zhck5hbWVdLnN5bmMgPSBzeW5jUmVzb2x2ZXI7XG4gICAgdGhpcy5yZXBsYWNlbWVudEV4cHJfID0gdW5kZWZpbmVkO1xuICAgIHRoaXMucmVwbGFjZW1lbnRFeHByVjJfID0gdW5kZWZpbmVkO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgYW4gYXN5bmMgdmFsdWUgcmVzb2x2ZXIgZm9yIHRoZSB2YXJpYWJsZSB3aXRoIHRoZSBzcGVjaWZpZWQgbmFtZS5cbiAgICogVGhlIHZhbHVlIHJlc29sdmVyIG1heSBvcHRpb25hbGx5IHRha2UgYW4gZXh0cmEgcGFyYW1ldGVyLlxuICAgKiBDYW4gYmUgY2FsbGVkIGluIGNvbmp1Y3Rpb24gd2l0aCBzZXRBc3luYyB0byBhbGxvdyBmb3IgYWRkaXRpb25hbFxuICAgKiBhc3luY2hyb25vdXMgcmVzb2x2ZXIgd2hlcmUgZXhwYW5kIHdpbGwgdXNlIGFzeW5jIGFuZCBleHBhbmRTeW5jIHRoZSBzeW5jXG4gICAqIHZlcnNpb24uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YXJOYW1lXG4gICAqIEBwYXJhbSB7IUFzeW5jUmVzb2x2ZXJEZWZ9IGFzeW5jUmVzb2x2ZXJcbiAgICogQHJldHVybiB7IVZhcmlhYmxlU291cmNlfVxuICAgKi9cbiAgc2V0QXN5bmModmFyTmFtZSwgYXN5bmNSZXNvbHZlcikge1xuICAgIGRldigpLmFzc2VydCh2YXJOYW1lLmluZGV4T2YoJ1JFVFVSTicpID09IC0xKTtcbiAgICB0aGlzLnJlcGxhY2VtZW50c19bdmFyTmFtZV0gPVxuICAgICAgICB0aGlzLnJlcGxhY2VtZW50c19bdmFyTmFtZV0gfHwge3N5bmM6IHVuZGVmaW5lZCwgYXN5bmM6IHVuZGVmaW5lZH07XG4gICAgdGhpcy5yZXBsYWNlbWVudHNfW3Zhck5hbWVdLmFzeW5jID0gYXN5bmNSZXNvbHZlcjtcbiAgICB0aGlzLnJlcGxhY2VtZW50RXhwcl8gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5yZXBsYWNlbWVudEV4cHJWMl8gPSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogSGVscGVyIG1ldGhvZCB0byBzZXQgYm90aCBzeW5jIGFuZCBhc3luYyByZXNvbHZlcnMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YXJOYW1lXG4gICAqIEBwYXJhbSB7IVN5bmNSZXNvbHZlckRlZn0gc3luY1Jlc29sdmVyXG4gICAqIEBwYXJhbSB7IUFzeW5jUmVzb2x2ZXJEZWZ9IGFzeW5jUmVzb2x2ZXJcbiAgICogQHJldHVybiB7IVZhcmlhYmxlU291cmNlfVxuICAgKi9cbiAgc2V0Qm90aCh2YXJOYW1lLCBzeW5jUmVzb2x2ZXIsIGFzeW5jUmVzb2x2ZXIpIHtcbiAgICByZXR1cm4gdGhpcy5zZXQodmFyTmFtZSwgc3luY1Jlc29sdmVyKS5zZXRBc3luYyh2YXJOYW1lLCBhc3luY1Jlc29sdmVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgUmVndWxhciBleHByZXNzaW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gZGV0ZWN0IGFsbCB0aGUgdmFyaWFibGVzXG4gICAqIGluIGEgdGVtcGxhdGUuXG4gICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsICo+PX0gb3B0X2JpbmRpbmdzXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IGlzVjIgRmxhZyB0byBpZ25vcmUgY2FwdHVyZSBvZiBhcmdzLlxuICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPj19IG9wdF93aGl0ZUxpc3QgT3B0aW9uYWwgd2hpdGUgbGlzdCBvZiBuYW1lc1xuICAgKiAgIHRoYXQgY2FuIGJlIHN1YnN0aXR1dGVkLlxuICAgKi9cbiAgZ2V0RXhwcihvcHRfYmluZGluZ3MsIGlzVjIsIG9wdF93aGl0ZUxpc3QpIHtcbiAgICBpZiAoIXRoaXMuaW5pdGlhbGl6ZWRfKSB7XG4gICAgICB0aGlzLmluaXRpYWxpemVfKCk7XG4gICAgfVxuXG4gICAgY29uc3QgYWRkaXRpb25hbEtleXMgPSBvcHRfYmluZGluZ3MgPyBPYmplY3Qua2V5cyhvcHRfYmluZGluZ3MpIDogbnVsbDtcbiAgICBpZiAoYWRkaXRpb25hbEtleXMgJiYgYWRkaXRpb25hbEtleXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgYWxsS2V5cyA9IE9iamVjdC5rZXlzKHRoaXMucmVwbGFjZW1lbnRzXyk7XG4gICAgICBhZGRpdGlvbmFsS2V5cy5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnJlcGxhY2VtZW50c19ba2V5XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgYWxsS2V5cy5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRoaXMuYnVpbGRFeHByXyhhbGxLZXlzLCBpc1YyLCBvcHRfd2hpdGVMaXN0KTtcbiAgICB9XG4gICAgaWYgKCF0aGlzLnJlcGxhY2VtZW50RXhwcl8gJiYgIWlzVjIpIHtcbiAgICAgIHRoaXMucmVwbGFjZW1lbnRFeHByXyA9IHRoaXMuYnVpbGRFeHByXyhcbiAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLnJlcGxhY2VtZW50c18pKTtcbiAgICB9XG4gICAgLy8gc29tZXRpbWVzIHRoZSB2MSBleHBhbmQgd2lsbCBiZSBjYWxsZWQgYmVmb3JlIHRoZSB2MlxuICAgIC8vIHNvIHdlIG5lZWQgdG8gY2FjaGUgYm90aCB2ZXJzaW9uc1xuICAgIGlmICghdGhpcy5yZXBsYWNlbWVudEV4cHJWMl8gJiYgaXNWMikge1xuICAgICAgdGhpcy5yZXBsYWNlbWVudEV4cHJWMl8gPSB0aGlzLmJ1aWxkRXhwcl8oXG4gICAgICAgICAgT2JqZWN0LmtleXModGhpcy5yZXBsYWNlbWVudHNfKSwgaXNWMiwgb3B0X3doaXRlTGlzdCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGlzVjIgPyB0aGlzLnJlcGxhY2VtZW50RXhwclYyXyA6XG4gICAgICB0aGlzLnJlcGxhY2VtZW50RXhwcl87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshQXJyYXk8c3RyaW5nPn0ga2V5c1xuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBpc1YyIGZsYWcgdG8gaWdub3JlIGNhcHR1cmUgb2YgYXJnc1xuICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPj19IG9wdF93aGl0ZUxpc3QgT3B0aW9uYWwgd2hpdGUgbGlzdCBvZiBuYW1lc1xuICAgKiAgIHRoYXQgY2FuIGJlIHN1YnN0aXR1dGVkLlxuICAgKiBAcmV0dXJuIHshUmVnRXhwfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYnVpbGRFeHByXyhrZXlzLCBpc1YyLCBvcHRfd2hpdGVMaXN0KSB7XG4gICAgLy8gSWYgYSB3aGl0ZWxpc3QgaXMgcHJlc2VudCwgdGhlIGtleXMgbXVzdCBiZWxvbmcgdG8gdGhlIHdoaXRlbGlzdC5cbiAgICAvLyBXZSBmaWx0ZXIgdGhlIGtleXMgb25lIGxhc3QgdGltZSB0byBlbnN1cmUgbm8gdW53aGl0ZWxpc3RlZCBrZXkgaXNcbiAgICAvLyBhbGxvd2VkLlxuICAgIGlmICh0aGlzLmdldFVybE1hY3JvV2hpdGVsaXN0XygpKSB7XG4gICAgICBrZXlzID0ga2V5cy5maWx0ZXIoa2V5ID0+IHRoaXMuZ2V0VXJsTWFjcm9XaGl0ZWxpc3RfKCkuaW5jbHVkZXMoa2V5KSk7XG4gICAgfVxuICAgIC8vIElmIGEgd2hpdGVsaXN0IGlzIHBhc3NlZCBpbnRvIHRoZSBjYWxsIHRvIEdsb2JhbFZhcmlhYmxlU291cmNlLmV4cGFuZF9cbiAgICAvLyB0aGVuIHdlIG9ubHkgcmVzb2x2ZSB2YWx1ZXMgY29udGFpbmVkIGluIHRoZSB3aGl0ZWxpc3QuXG4gICAgaWYgKG9wdF93aGl0ZUxpc3QpIHtcbiAgICAgIGtleXMgPSBrZXlzLmZpbHRlcihrZXkgPT4gb3B0X3doaXRlTGlzdFtrZXldKTtcbiAgICB9XG4gICAgLy8gVGhlIGtleXMgbXVzdCBiZSBzb3J0ZWQgdG8gZW5zdXJlIHRoYXQgdGhlIGxvbmdlc3Qga2V5cyBhcmUgY29uc2lkZXJlZFxuICAgIC8vIGZpcnN0LiBUaGlzIGF2b2lkcyBhIHByb2JsZW0gd2hlcmUgYSBSQU5ET00gY29uZmxpY3RzIHdpdGggUkFORE9NX09ORS5cbiAgICBrZXlzLnNvcnQoKHMxLCBzMikgPT4gczIubGVuZ3RoIC0gczEubGVuZ3RoKTtcbiAgICAvLyBLZXlzIHRoYXQgc3RhcnQgd2l0aCBhIGAkYCBuZWVkIHRvIGJlIGVzY2FwZWQgc28gdGhhdCB0aGV5IGRvIG5vdFxuICAgIC8vIGludGVyZmVyZSB3aXRoIHRoZSByZWdleCB0aGF0IGlzIGNvbnN0cnVjdGVkLlxuICAgIGNvbnN0IGVzY2FwZWQgPSBrZXlzLm1hcChrZXkgPT4ge1xuICAgICAgaWYgKGtleVswXSA9PT0gJyQnKSB7XG4gICAgICAgIHJldHVybiAnXFxcXCcgKyBrZXk7XG4gICAgICB9XG4gICAgICByZXR1cm4ga2V5O1xuICAgIH0pO1xuXG4gICAgY29uc3QgYWxsID0gZXNjYXBlZC5qb2luKCd8Jyk7XG4gICAgLy8gTWF0Y2ggdGhlIGdpdmVuIHJlcGxhY2VtZW50IHBhdHRlcm5zLCBhcyB3ZWxsIGFzIG9wdGlvbmFsbHlcbiAgICAvLyBhcmd1bWVudHMgdG8gdGhlIHJlcGxhY2VtZW50IGJlaGluZCBpdCBpbiBwYXJlbnRoZXNlcy5cbiAgICAvLyBFeGFtcGxlIHN0cmluZyB0aGF0IG1hdGNoXG4gICAgLy8gRk9PX0JBUlxuICAgIC8vIEZPT19CQVIoYXJnMSlcbiAgICAvLyBGT09fQkFSKGFyZzEsYXJnMilcbiAgICAvLyBGT09fQkFSKGFyZzEsIGFyZzIpXG4gICAgbGV0IHJlZ2V4U3RyID0gJ1xcXFwkPygnICsgYWxsICsgJyknO1xuICAgIC8vIGlnbm9yZSB0aGUgY2FwdHVyaW5nIG9mIGFyZ3VtZW50cyBpbiBuZXcgcGFyc2VyXG4gICAgaWYgKCFpc1YyKSB7XG4gICAgICByZWdleFN0ciArPSAnKD86XFxcXCgoKD86XFxcXHMqWzAtOWEtekEtWi1fLl0qXFxcXHMqKD89LHxcXFxcKSksPykqKVxcXFxzKlxcXFwpKT8nO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFJlZ0V4cChyZWdleFN0ciwgJ2cnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/QXJyYXk8c3RyaW5nPn0gVGhlIHdoaXRlbGlzdCBvZiBhbGxvd2VkIEFNUCB2YXJpYWJsZXMuIChpZiBwcm92aWRlZCBpblxuICAgKiAgICAgYSBtZXRhIHRhZykuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRVcmxNYWNyb1doaXRlbGlzdF8oKSB7XG4gICAgaWYgKHRoaXMudmFyaWFibGVXaGl0ZWxpc3RfKSB7XG4gICAgICByZXR1cm4gdGhpcy52YXJpYWJsZVdoaXRlbGlzdF87XG4gICAgfVxuXG4gICAgY29uc3Qge2hlYWR9ID0gdGhpcy5hbXBkb2MuZ2V0Um9vdE5vZGUoKTtcbiAgICBpZiAoIWhlYWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIEEgbWV0YVtuYW1lPVwiYW1wLWFsbG93ZWQtdXJsLW1hY3Jvc1wiXSB0YWcsIGlmIHByZXNlbnQsXG4gICAgLy8gY29udGFpbnMsIGluIGl0cyBjb250ZW50IGF0dHJpYnV0ZSwgYSB3aGl0ZWxpc3Qgb2YgdmFyaWFibGUgc3Vic3RpdHV0aW9uLlxuICAgIGNvbnN0IG1ldGEgPVxuICAgICAgaGVhZC5xdWVyeVNlbGVjdG9yKCdtZXRhW25hbWU9XCJhbXAtYWxsb3dlZC11cmwtbWFjcm9zXCJdJyk7XG4gICAgaWYgKCFtZXRhKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgd2hpdGVsaXN0IG9mIHZhcmlhYmxlcyBhbGxvd2VkIGZvciB2YXJpYWJsZSBzdWJzdGl0dXRpb24uXG4gICAgICogQHByaXZhdGUgez9BcnJheTxzdHJpbmc+fVxuICAgICAqL1xuICAgIHRoaXMudmFyaWFibGVXaGl0ZWxpc3RfID0gbWV0YS5nZXRBdHRyaWJ1dGUoJ2NvbnRlbnQnKS5zcGxpdCgnLCcpXG4gICAgICAgIC5tYXAodmFyaWFibGUgPT4gdmFyaWFibGUudHJpbSgpKTtcbiAgICByZXR1cm4gdGhpcy52YXJpYWJsZVdoaXRlbGlzdF87XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICBnZXRBbXBkb2MsXG4gIGdldEV4aXN0aW5nU2VydmljZUZvckRvY0luRW1iZWRTY29wZSxcbiAgZ2V0RXhpc3RpbmdTZXJ2aWNlT3JOdWxsLFxuICBnZXRTZXJ2aWNlLFxuICBnZXRTZXJ2aWNlRm9yRG9jLFxuICBnZXRTZXJ2aWNlRm9yRG9jRGVwcmVjYXRlZCxcbiAgZ2V0U2VydmljZVByb21pc2VGb3JEb2MsXG59IGZyb20gJy4vc2VydmljZSc7XG5pbXBvcnQge1xuICBnZXRFbGVtZW50U2VydmljZUZvckRvYyxcbiAgZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZSxcbiAgZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZUZvckRvYyxcbiAgZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZUZvckRvY0luRW1iZWRTY29wZSxcbn0gZnJvbSAnLi9lbGVtZW50LXNlcnZpY2UnO1xuXG4vKiogQHR5cGVkZWYgeyEuLi9leHRlbnNpb25zL2FtcC1zdWJzY3JpcHRpb25zLzAuMS9hbXAtc3Vic2NyaXB0aW9ucy5TdWJzY3JpcHRpb25TZXJ2aWNlfSAqL1xuZXhwb3J0IGxldCBTdWJzY3JpcHRpb25TZXJ2aWNlO1xuXG5leHBvcnQgY2xhc3MgU2VydmljZXMge1xuICAvKipcbiAgICogSGludDogQWRkIGV4dGVuc2lvbnMgZm9sZGVyIHBhdGggdG8gY29tcGlsZS5qcyB3aXRoXG4gICAqIHdhcm5pbmdzIGNhbm5vdCBmaW5kIG1vZHVsZXMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIEFjY2VzcyBzZXJ2aWNlLlxuICAgKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAgICogQHJldHVybiB7IVByb21pc2U8IS4uL2V4dGVuc2lvbnMvYW1wLWFjY2Vzcy8wLjEvYW1wLWFjY2Vzcy5BY2Nlc3NTZXJ2aWNlPn1cbiAgICovXG4gIHN0YXRpYyBhY2Nlc3NTZXJ2aWNlRm9yRG9jKGVsZW1lbnRPckFtcERvYykge1xuICAgIHJldHVybiAoLyoqIEB0eXBlIHshUHJvbWlzZTwhLi4vZXh0ZW5zaW9ucy9hbXAtYWNjZXNzLzAuMS9hbXAtYWNjZXNzLkFjY2Vzc1NlcnZpY2U+fSAqLyAoXG4gICAgICBnZXRFbGVtZW50U2VydmljZUZvckRvYyhlbGVtZW50T3JBbXBEb2MsICdhY2Nlc3MnLCAnYW1wLWFjY2VzcycpKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSBBY2Nlc3Mgc2VydmljZSBvciBhIHByb21pc2UgZm9yIG51bGwgaWYgdGhlXG4gICAqIHNlcnZpY2UgaXMgbm90IGF2YWlsYWJsZSBvbiB0aGUgY3VycmVudCBwYWdlLlxuICAgKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAgICogQHJldHVybiB7IVByb21pc2U8Py4uL2V4dGVuc2lvbnMvYW1wLWFjY2Vzcy8wLjEvYW1wLWFjY2Vzcy5BY2Nlc3NTZXJ2aWNlPn1cbiAgICovXG4gIHN0YXRpYyBhY2Nlc3NTZXJ2aWNlRm9yRG9jT3JOdWxsKGVsZW1lbnRPckFtcERvYykge1xuICAgIHJldHVybiAoLyoqIEB0eXBlIHshUHJvbWlzZTw/Li4vZXh0ZW5zaW9ucy9hbXAtYWNjZXNzLzAuMS9hbXAtYWNjZXNzLkFjY2Vzc1NlcnZpY2U+fSAqLyAoXG4gICAgICBnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlRm9yRG9jKGVsZW1lbnRPckFtcERvYywgJ2FjY2VzcycsXG4gICAgICAgICAgJ2FtcC1hY2Nlc3MnKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgU3Vic2NyaXB0aW9ucyBzZXJ2aWNlLlxuICAgKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAgICogQHJldHVybiB7IVByb21pc2U8IVN1YnNjcmlwdGlvblNlcnZpY2U+fVxuICAgKi9cbiAgc3RhdGljIHN1YnNjcmlwdGlvbnNTZXJ2aWNlRm9yRG9jKGVsZW1lbnRPckFtcERvYykge1xuICAgIHJldHVybiAoLyoqIEB0eXBlIHshUHJvbWlzZTwhU3Vic2NyaXB0aW9uU2VydmljZT59ICovIChcbiAgICAgIGdldEVsZW1lbnRTZXJ2aWNlRm9yRG9jKGVsZW1lbnRPckFtcERvYywgJ3N1YnNjcmlwdGlvbnMnLFxuICAgICAgICAgICdhbXAtc3Vic2NyaXB0aW9ucycpKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSBTdWJzY3JpcHRpb25zIHNlcnZpY2UuXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZTw/U3Vic2NyaXB0aW9uU2VydmljZT59XG4gICAqL1xuICBzdGF0aWMgc3Vic2NyaXB0aW9uc1NlcnZpY2VGb3JEb2NPck51bGwoZWxlbWVudE9yQW1wRG9jKSB7XG4gICAgcmV0dXJuICgvKiogQHR5cGUgeyFQcm9taXNlPD9TdWJzY3JpcHRpb25TZXJ2aWNlPn0gKi8gKFxuICAgICAgZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZUZvckRvYyhlbGVtZW50T3JBbXBEb2MsICdzdWJzY3JpcHRpb25zJyxcbiAgICAgICAgICAnYW1wLXN1YnNjcmlwdGlvbnMnKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVubGlrZSBtb3N0IHNlcnZpY2UgZ2V0dGVycywgcGFzc2luZyBgTm9kZWAgaXMgbmVjZXNzYXJ5IGZvciBzb21lIEZJRS1zY29wZVxuICAgKiBzZXJ2aWNlcyBzaW5jZSBzb21ldGltZXMgd2Ugb25seSBoYXZlIHRoZSBGSUUgRG9jdW1lbnQgZm9yIGNvbnRleHQuXG4gICAqIEBwYXJhbSB7IU5vZGV8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IG5vZGVPckRvY1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL2FjdGlvbi1pbXBsLkFjdGlvblNlcnZpY2V9XG4gICAqL1xuICBzdGF0aWMgYWN0aW9uU2VydmljZUZvckRvYyhub2RlT3JEb2MpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL2FjdGlvbi1pbXBsLkFjdGlvblNlcnZpY2V9ICovIChcbiAgICAgIGdldEV4aXN0aW5nU2VydmljZUZvckRvY0luRW1iZWRTY29wZShcbiAgICAgICAgICBub2RlT3JEb2MsICdhY3Rpb24nLCAvKiBvcHRfZmFsbGJhY2tUb1RvcFdpbiAqLyB0cnVlKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFBY3Rpdml0eT59XG4gICAqL1xuICBzdGF0aWMgYWN0aXZpdHlGb3JEb2MoZWxlbWVudE9yQW1wRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2U8IUFjdGl2aXR5Pn0gKi8gKFxuICAgICAgZ2V0RWxlbWVudFNlcnZpY2VGb3JEb2MoZWxlbWVudE9yQW1wRG9jLCAnYWN0aXZpdHknLCAnYW1wLWFuYWx5dGljcycpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBnbG9iYWwgaW5zdGFuY2Ugb2YgdGhlIGBBbXBEb2NTZXJ2aWNlYCBzZXJ2aWNlIHRoYXQgY2FuIGJlXG4gICAqIHVzZWQgdG8gcmVzb2x2ZSBhbiBhbXBkb2MgZm9yIGFueSBub2RlOiBlaXRoZXIgaW4gdGhlIHNpbmdsZS1kb2Mgb3JcbiAgICogc2hhZG93LWRvYyBlbnZpcm9ubWVudC5cbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5kb3dcbiAgICogQHJldHVybiB7IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2NTZXJ2aWNlfVxuICAgKi9cbiAgc3RhdGljIGFtcGRvY1NlcnZpY2VGb3Iod2luZG93KSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2NTZXJ2aWNlfSAqLyAoXG4gICAgICBnZXRTZXJ2aWNlKHdpbmRvdywgJ2FtcGRvYycpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBBbXBEb2MgZm9yIHRoZSBzcGVjaWZpZWQgY29udGV4dCBub2RlLlxuICAgKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAgICogQHJldHVybiB7IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9XG4gICAqL1xuICBzdGF0aWMgYW1wZG9jKGVsZW1lbnRPckFtcERvYykge1xuICAgIHJldHVybiBnZXRBbXBkb2MoZWxlbWVudE9yQW1wRG9jKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAgICogQHBhcmFtIHtib29sZWFuPX0gbG9hZEFuYWx5dGljc1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhLi4vZXh0ZW5zaW9ucy9hbXAtYW5hbHl0aWNzLzAuMS9pbnN0cnVtZW50YXRpb24uSW5zdHJ1bWVudGF0aW9uU2VydmljZT59XG4gICAqL1xuICBzdGF0aWMgYW5hbHl0aWNzRm9yRG9jKGVsZW1lbnRPckFtcERvYywgbG9hZEFuYWx5dGljcyA9IGZhbHNlKSB7XG4gICAgaWYgKGxvYWRBbmFseXRpY3MpIHtcbiAgICAgIC8vIEdldCBFeHRlbnNpb25zIHNlcnZpY2UgYW5kIGZvcmNlIGxvYWQgYW5hbHl0aWNzIGV4dGVuc2lvbi5cbiAgICAgIGNvbnN0IGFtcGRvYyA9IGdldEFtcGRvYyhlbGVtZW50T3JBbXBEb2MpO1xuICAgICAgU2VydmljZXMuZXh0ZW5zaW9uc0ZvcihhbXBkb2Mud2luKS4vKk9LKi9pbnN0YWxsRXh0ZW5zaW9uRm9yRG9jKFxuICAgICAgICAgIGFtcGRvYywgJ2FtcC1hbmFseXRpY3MnKTtcbiAgICB9XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2U8IS4uL2V4dGVuc2lvbnMvYW1wLWFuYWx5dGljcy8wLjEvaW5zdHJ1bWVudGF0aW9uLkluc3RydW1lbnRhdGlvblNlcnZpY2U+fSAqLyAoXG4gICAgICBnZXRFbGVtZW50U2VydmljZUZvckRvYyhlbGVtZW50T3JBbXBEb2MsICdhbXAtYW5hbHl0aWNzLWluc3RydW1lbnRhdGlvbicsXG4gICAgICAgICAgJ2FtcC1hbmFseXRpY3MnKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gICAqIEByZXR1cm4geyFQcm9taXNlPD8uLi9leHRlbnNpb25zL2FtcC1hbmFseXRpY3MvMC4xL2luc3RydW1lbnRhdGlvbi5JbnN0cnVtZW50YXRpb25TZXJ2aWNlPn1cbiAgICovXG4gIHN0YXRpYyBhbmFseXRpY3NGb3JEb2NPck51bGwoZWxlbWVudE9yQW1wRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2U8Py4uL2V4dGVuc2lvbnMvYW1wLWFuYWx5dGljcy8wLjEvaW5zdHJ1bWVudGF0aW9uLkluc3RydW1lbnRhdGlvblNlcnZpY2U+fSAqLyAoXG4gICAgICBnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlRm9yRG9jKGVsZW1lbnRPckFtcERvYyxcbiAgICAgICAgICAnYW1wLWFuYWx5dGljcy1pbnN0cnVtZW50YXRpb24nLCAnYW1wLWFuYWx5dGljcycpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpbmRvd1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL2JhdGNoZWQteGhyLWltcGwuQmF0Y2hlZFhocn1cbiAgICovXG4gIHN0YXRpYyBiYXRjaGVkWGhyRm9yKHdpbmRvdykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UvYmF0Y2hlZC14aHItaW1wbC5CYXRjaGVkWGhyfSAqLyAoXG4gICAgICBnZXRTZXJ2aWNlKHdpbmRvdywgJ2JhdGNoZWQteGhyJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZTw/Li4vZXh0ZW5zaW9ucy9hbXAtYmluZC8wLjEvYmluZC1pbXBsLkJpbmQ+fVxuICAgKi9cbiAgc3RhdGljIGJpbmRGb3JEb2NPck51bGwoZWxlbWVudE9yQW1wRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2U8Py4uL2V4dGVuc2lvbnMvYW1wLWJpbmQvMC4xL2JpbmQtaW1wbC5CaW5kPn0gKi8gKFxuICAgICAgZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZUZvckRvY0luRW1iZWRTY29wZShcbiAgICAgICAgICBlbGVtZW50T3JBbXBEb2MsICdiaW5kJywgJ2FtcC1iaW5kJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhLi9zZXJ2aWNlL2NpZC1pbXBsLkNpZD59XG4gICAqL1xuICBzdGF0aWMgY2lkRm9yRG9jKGVsZW1lbnRPckFtcERvYykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlPCEuL3NlcnZpY2UvY2lkLWltcGwuQ2lkPn0gKi8gKFxuICAgICAgZ2V0U2VydmljZVByb21pc2VGb3JEb2MoZWxlbWVudE9yQW1wRG9jLCAnY2lkJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL25hdmlnYXRpb24uTmF2aWdhdGlvbn1cbiAgICovXG4gIHN0YXRpYyBuYXZpZ2F0aW9uRm9yRG9jKGVsZW1lbnRPckFtcERvYykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UvbmF2aWdhdGlvbi5OYXZpZ2F0aW9ufSAqLyAoXG4gICAgICBnZXRTZXJ2aWNlRm9yRG9jKGVsZW1lbnRPckFtcERvYywgJ25hdmlnYXRpb24nKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5kb3dcbiAgICogQHJldHVybiB7IS4vc2VydmljZS9jcnlwdG8taW1wbC5DcnlwdG99XG4gICAqL1xuICBzdGF0aWMgY3J5cHRvRm9yKHdpbmRvdykge1xuICAgIHJldHVybiAoLyoqIEB0eXBlIHshLi9zZXJ2aWNlL2NyeXB0by1pbXBsLkNyeXB0b30gKi8gKFxuICAgICAgZ2V0U2VydmljZSh3aW5kb3csICdjcnlwdG8nKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL2RvY3VtZW50LWluZm8taW1wbC5Eb2N1bWVudEluZm9EZWZ9IEluZm8gYWJvdXQgdGhlIGRvY1xuICAgKi9cbiAgc3RhdGljIGRvY3VtZW50SW5mb0ZvckRvYyhlbGVtZW50T3JBbXBEb2MpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL2RvY3VtZW50LWluZm8taW1wbC5Eb2NJbmZvfSAqLyAoXG4gICAgICBnZXRTZXJ2aWNlRm9yRG9jKGVsZW1lbnRPckFtcERvYywgJ2RvY3VtZW50SW5mbycpKS5nZXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpbmRvd1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL2RvY3VtZW50LXN0YXRlLkRvY3VtZW50U3RhdGV9XG4gICAqL1xuICBzdGF0aWMgZG9jdW1lbnRTdGF0ZUZvcih3aW5kb3cpIHtcbiAgICByZXR1cm4gZ2V0U2VydmljZSh3aW5kb3csICdkb2N1bWVudFN0YXRlJyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5kb3dcbiAgICogQHJldHVybiB7IS4vc2VydmljZS9leHRlbnNpb25zLWltcGwuRXh0ZW5zaW9uc31cbiAgICovXG4gIHN0YXRpYyBleHRlbnNpb25zRm9yKHdpbmRvdykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UvZXh0ZW5zaW9ucy1pbXBsLkV4dGVuc2lvbnN9ICovIChcbiAgICAgIGdldFNlcnZpY2Uod2luZG93LCAnZXh0ZW5zaW9ucycpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHNlcnZpY2UgaW1wbGVtZW50ZWQgaW4gc2VydmljZS9oaXN0b3J5LWltcGwuXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL2hpc3RvcnktaW1wbC5IaXN0b3J5fVxuICAgKi9cbiAgc3RhdGljIGhpc3RvcnlGb3JEb2MoZWxlbWVudE9yQW1wRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS9oaXN0b3J5LWltcGwuSGlzdG9yeX0gKi8gKFxuICAgICAgZ2V0U2VydmljZUZvckRvYyhlbGVtZW50T3JBbXBEb2MsICdoaXN0b3J5JykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEByZXR1cm4geyEuL2lucHV0LklucHV0fVxuICAgKi9cbiAgc3RhdGljIGlucHV0Rm9yKHdpbikge1xuICAgIHJldHVybiBnZXRTZXJ2aWNlKHdpbiwgJ2lucHV0Jyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvbGF5ZXJzLWltcGwuTGF5b3V0TGF5ZXJzfVxuICAgKi9cbiAgc3RhdGljIGxheWVyc0ZvckRvYyhlbGVtZW50T3JBbXBEb2MpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL2xheWVycy1pbXBsLkxheW91dExheWVyc30gKi8gKFxuICAgICAgZ2V0U2VydmljZUZvckRvYyhlbGVtZW50T3JBbXBEb2MsICdsYXllcnMnKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5kb3dcbiAgICogQHJldHVybiB7IS4vc2VydmljZS9wZXJmb3JtYW5jZS1pbXBsLlBlcmZvcm1hbmNlfVxuICAgKi9cbiAgc3RhdGljIHBlcmZvcm1hbmNlRm9yKHdpbmRvdykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UvcGVyZm9ybWFuY2UtaW1wbC5QZXJmb3JtYW5jZX0qLyAoXG4gICAgICBnZXRTZXJ2aWNlKHdpbmRvdywgJ3BlcmZvcm1hbmNlJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luZG93XG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvcGVyZm9ybWFuY2UtaW1wbC5QZXJmb3JtYW5jZX1cbiAgICovXG4gIHN0YXRpYyBwZXJmb3JtYW5jZUZvck9yTnVsbCh3aW5kb3cpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL3BlcmZvcm1hbmNlLWltcGwuUGVyZm9ybWFuY2V9Ki8gKFxuICAgICAgZ2V0RXhpc3RpbmdTZXJ2aWNlT3JOdWxsKHdpbmRvdywgJ3BlcmZvcm1hbmNlJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luZG93XG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvcGxhdGZvcm0taW1wbC5QbGF0Zm9ybX1cbiAgICovXG4gIHN0YXRpYyBwbGF0Zm9ybUZvcih3aW5kb3cpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL3BsYXRmb3JtLWltcGwuUGxhdGZvcm19ICovIChcbiAgICAgIGdldFNlcnZpY2Uod2luZG93LCAncGxhdGZvcm0nKSk7XG4gIH1cblxuICAvKipcbiAgICogVXNlcyBnZXRTZXJ2aWNlRm9yRG9jRGVwcmVjYXRlZCgpIHNpbmNlIFJlc291cmNlcyBpcyBhIHN0YXJ0dXAgc2VydmljZS5cbiAgICogQHBhcmFtIHshTm9kZXwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gbm9kZU9yRG9jXG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvcmVzb3VyY2VzLWltcGwuUmVzb3VyY2VzfVxuICAgKi9cbiAgc3RhdGljIHJlc291cmNlc0ZvckRvYyhub2RlT3JEb2MpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL3Jlc291cmNlcy1pbXBsLlJlc291cmNlc30gKi8gKFxuICAgICAgZ2V0U2VydmljZUZvckRvY0RlcHJlY2F0ZWQobm9kZU9yRG9jLCAncmVzb3VyY2VzJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEByZXR1cm4gez9Qcm9taXNlPD97aW5jb21pbmdGcmFnbWVudDogc3RyaW5nLCBvdXRnb2luZ0ZyYWdtZW50OiBzdHJpbmd9Pn1cbiAgICovXG4gIHN0YXRpYyBzaGFyZVRyYWNraW5nRm9yT3JOdWxsKHdpbikge1xuICAgIHJldHVybiAoLyoqIEB0eXBlIHshUHJvbWlzZTw/e2luY29taW5nRnJhZ21lbnQ6IHN0cmluZywgb3V0Z29pbmdGcmFnbWVudDogc3RyaW5nfT59ICovIChcbiAgICAgIGdldEVsZW1lbnRTZXJ2aWNlSWZBdmFpbGFibGUod2luLCAnc2hhcmUtdHJhY2tpbmcnLFxuICAgICAgICAgICdhbXAtc2hhcmUtdHJhY2tpbmcnLCB0cnVlKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEByZXR1cm4gez9Qcm9taXNlPD8uLi9leHRlbnNpb25zL2FtcC1zdG9yeS8xLjAvdmFyaWFibGUtc2VydmljZS5TdG9yeVZhcmlhYmxlRGVmPn1cbiAgICovXG4gIHN0YXRpYyBzdG9yeVZhcmlhYmxlU2VydmljZUZvck9yTnVsbCh3aW4pIHtcbiAgICByZXR1cm4gKFxuICAgIC8qKiBAdHlwZSB7IVByb21pc2U8Py4uL2V4dGVuc2lvbnMvYW1wLXN0b3J5LzEuMC92YXJpYWJsZS1zZXJ2aWNlLlN0b3J5VmFyaWFibGVEZWY+fSAqL1xuICAgICAgKGdldEVsZW1lbnRTZXJ2aWNlSWZBdmFpbGFibGUod2luLCAnc3RvcnktdmFyaWFibGUnLCAnYW1wLXN0b3J5JyxcbiAgICAgICAgICB0cnVlKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcnNpb24gb2YgdGhlIHN0b3J5IHN0b3JlIHNlcnZpY2UgZGVwZW5kcyBvbiB3aGljaCB2ZXJzaW9uIG9mIGFtcC1zdG9yeVxuICAgKiB0aGUgcHVibGlzaGVyIGlzIGxvYWRpbmcuIFRoZXkgYWxsIGhhdmUgdGhlIHNhbWUgaW1wbGVtZW50YXRpb24uXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEByZXR1cm4gez9Qcm9taXNlPD8uLi9leHRlbnNpb25zL2FtcC1zdG9yeS8xLjAvYW1wLXN0b3J5LXN0b3JlLXNlcnZpY2UuQW1wU3RvcnlTdG9yZVNlcnZpY2V8Py4uL2V4dGVuc2lvbnMvYW1wLXN0b3J5LzAuMS9hbXAtc3Rvcnktc3RvcmUtc2VydmljZS5BbXBTdG9yeVN0b3JlU2VydmljZT59XG4gICAqL1xuICBzdGF0aWMgc3RvcnlTdG9yZVNlcnZpY2VGb3JPck51bGwod2luKSB7XG4gICAgcmV0dXJuIChcbiAgICAvKiogQHR5cGUgeyFQcm9taXNlPD8uLi9leHRlbnNpb25zL2FtcC1zdG9yeS8xLjAvYW1wLXN0b3J5LXN0b3JlLXNlcnZpY2UuQW1wU3RvcnlTdG9yZVNlcnZpY2V8Py4uL2V4dGVuc2lvbnMvYW1wLXN0b3J5LzAuMS9hbXAtc3Rvcnktc3RvcmUtc2VydmljZS5BbXBTdG9yeVN0b3JlU2VydmljZT59ICovXG4gICAgICAoZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZSh3aW4sICdzdG9yeS1zdG9yZScsICdhbXAtc3RvcnknKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEByZXR1cm4gez8uLi9leHRlbnNpb25zL2FtcC1zdG9yeS8xLjAvYW1wLXN0b3J5LXN0b3JlLXNlcnZpY2UuQW1wU3RvcnlTdG9yZVNlcnZpY2V9XG4gICAqL1xuICBzdGF0aWMgc3RvcnlTdG9yZVNlcnZpY2Uod2luKSB7XG4gICAgcmV0dXJuICgvKiogQHR5cGUgez8uLi9leHRlbnNpb25zL2FtcC1zdG9yeS8xLjAvYW1wLXN0b3J5LXN0b3JlLXNlcnZpY2UuQW1wU3RvcnlTdG9yZVNlcnZpY2V9ICovXG4gICAgICAoZ2V0RXhpc3RpbmdTZXJ2aWNlT3JOdWxsKHdpbiwgJ3N0b3J5LXN0b3JlJykpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcmV0dXJuIHs/Li4vZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMS4wL2FtcC1zdG9yeS1yZXF1ZXN0LXNlcnZpY2UuQW1wU3RvcnlSZXF1ZXN0U2VydmljZX1cbiAgICovXG4gIHN0YXRpYyBzdG9yeVJlcXVlc3RTZXJ2aWNlKHdpbikge1xuICAgIHJldHVybiAoLyoqIEB0eXBlIHs/Li4vZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMS4wL2FtcC1zdG9yeS1yZXF1ZXN0LXNlcnZpY2UuQW1wU3RvcnlSZXF1ZXN0U2VydmljZX0gKi9cbiAgICAgIChnZXRFeGlzdGluZ1NlcnZpY2VPck51bGwod2luLCAnc3RvcnktcmVxdWVzdCcpKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICogQHJldHVybiB7IVByb21pc2U8Py4uL2V4dGVuc2lvbnMvYW1wLXN0b3J5LzEuMC9sb2NhbGl6YXRpb24uTG9jYWxpemF0aW9uU2VydmljZT59XG4gICAqL1xuICBzdGF0aWMgbG9jYWxpemF0aW9uU2VydmljZUZvck9yTnVsbCh3aW4pIHtcbiAgICByZXR1cm4gKFxuICAgIC8qKiBAdHlwZSB7IVByb21pc2U8Py4uL2V4dGVuc2lvbnMvYW1wLXN0b3J5LzEuMC9sb2NhbGl6YXRpb24uTG9jYWxpemF0aW9uU2VydmljZT59ICovXG4gICAgICAoZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZSh3aW4sICdsb2NhbGl6YXRpb24nLCAnYW1wLXN0b3J5JywgdHJ1ZSkpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcmV0dXJuIHshLi4vZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMS4wL2xvY2FsaXphdGlvbi5Mb2NhbGl6YXRpb25TZXJ2aWNlfVxuICAgKi9cbiAgc3RhdGljIGxvY2FsaXphdGlvblNlcnZpY2Uod2luKSB7XG4gICAgcmV0dXJuIGdldFNlcnZpY2Uod2luLCAnbG9jYWxpemF0aW9uJyk7XG4gIH1cblxuICAvKipcbiAgICogVE9ETygjMTQzNTcpOiBSZW1vdmUgdGhpcyB3aGVuIGFtcC1zdG9yeTowLjEgaXMgZGVwcmVjYXRlZC5cbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICogQHJldHVybiB7IS4uL2V4dGVuc2lvbnMvYW1wLXN0b3J5LzAuMS9hbXAtc3Rvcnktc3RvcmUtc2VydmljZS5BbXBTdG9yeVN0b3JlU2VydmljZX1cbiAgICovXG4gIHN0YXRpYyBzdG9yeVN0b3JlU2VydmljZVYwMSh3aW4pIHtcbiAgICByZXR1cm4gZ2V0U2VydmljZSh3aW4sICdzdG9yeS1zdG9yZScpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRPRE8oIzE0MzU3KTogUmVtb3ZlIHRoaXMgd2hlbiBhbXAtc3Rvcnk6MC4xIGlzIGRlcHJlY2F0ZWQuXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEByZXR1cm4geyEuLi9leHRlbnNpb25zL2FtcC1zdG9yeS8wLjEvYW1wLXN0b3J5LXJlcXVlc3Qtc2VydmljZS5BbXBTdG9yeVJlcXVlc3RTZXJ2aWNlfVxuICAgKi9cbiAgc3RhdGljIHN0b3J5UmVxdWVzdFNlcnZpY2VWMDEod2luKSB7XG4gICAgcmV0dXJuIGdldFNlcnZpY2Uod2luLCAnc3RvcnktcmVxdWVzdC12MDEnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUT0RPKCMxNDM1Nyk6IFJlbW92ZSB0aGlzIHdoZW4gYW1wLXN0b3J5OjAuMSBpcyBkZXByZWNhdGVkLlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTw/Li4vZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMC4xL2xvY2FsaXphdGlvbi5Mb2NhbGl6YXRpb25TZXJ2aWNlPn1cbiAgICovXG4gIHN0YXRpYyBsb2NhbGl6YXRpb25TZXJ2aWNlRm9yT3JOdWxsVjAxKHdpbikge1xuICAgIHJldHVybiAoXG4gICAgLyoqIEB0eXBlIHshUHJvbWlzZTw/Li4vZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMC4xL2xvY2FsaXphdGlvbi5Mb2NhbGl6YXRpb25TZXJ2aWNlPn0gKi9cbiAgICAgIChnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlKHdpbiwgJ2xvY2FsaXphdGlvbi12MDEnLCAnYW1wLXN0b3J5JyxcbiAgICAgICAgICB0cnVlKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRPRE8oIzE0MzU3KTogUmVtb3ZlIHRoaXMgd2hlbiBhbXAtc3Rvcnk6MC4xIGlzIGRlcHJlY2F0ZWQuXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEByZXR1cm4geyEuLi9leHRlbnNpb25zL2FtcC1zdG9yeS8wLjEvbG9jYWxpemF0aW9uLkxvY2FsaXphdGlvblNlcnZpY2V9XG4gICAqL1xuICBzdGF0aWMgbG9jYWxpemF0aW9uU2VydmljZVYwMSh3aW4pIHtcbiAgICByZXR1cm4gZ2V0U2VydmljZSh3aW4sICdsb2NhbGl6YXRpb24tdjAxJyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICogQHJldHVybiB7P1Byb21pc2U8Py4uL2V4dGVuc2lvbnMvYW1wLXZpZXdlci1pbnRlZ3JhdGlvbi8wLjEvdmFyaWFibGUtc2VydmljZS5WaWV3ZXJJbnRlZ3JhdGlvblZhcmlhYmxlRGVmPn1cbiAgICovXG4gIHN0YXRpYyB2aWV3ZXJJbnRlZ3JhdGlvblZhcmlhYmxlU2VydmljZUZvck9yTnVsbCh3aW4pIHtcbiAgICByZXR1cm4gKFxuICAgIC8qKiBAdHlwZSB7IVByb21pc2U8Py4uL2V4dGVuc2lvbnMvYW1wLXZpZXdlci1pbnRlZ3JhdGlvbi8wLjEvdmFyaWFibGUtc2VydmljZS5WaWV3ZXJJbnRlZ3JhdGlvblZhcmlhYmxlRGVmPn0gKi9cbiAgICAgIChnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlKHdpbiwgJ3ZpZXdlci1pbnRlZ3JhdGlvbi12YXJpYWJsZScsXG4gICAgICAgICAgJ2FtcC12aWV3ZXItaW50ZWdyYXRpb24nLCB0cnVlKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhLi4vZXh0ZW5zaW9ucy9hbXAtYW5pbWF0aW9uLzAuMS93ZWItYW5pbWF0aW9uLXNlcnZpY2UuV2ViQW5pbWF0aW9uU2VydmljZT59XG4gICAqL1xuICBzdGF0aWMgd2ViQW5pbWF0aW9uU2VydmljZUZvcihlbGVtZW50T3JBbXBEb2MpIHtcbiAgICByZXR1cm4gKC8qKiBAdHlwZSB7IVByb21pc2U8IS4uL2V4dGVuc2lvbnMvYW1wLWFuaW1hdGlvbi8wLjEvd2ViLWFuaW1hdGlvbi1zZXJ2aWNlLldlYkFuaW1hdGlvblNlcnZpY2U+fSAqL1xuICAgICAgKGdldEVsZW1lbnRTZXJ2aWNlRm9yRG9jKFxuICAgICAgICAgIGVsZW1lbnRPckFtcERvYywgJ3dlYi1hbmltYXRpb24nLCAnYW1wLWFuaW1hdGlvbicpKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCEuL3NlcnZpY2Uvc3RvcmFnZS1pbXBsLlN0b3JhZ2U+fVxuICAgKi9cbiAgc3RhdGljIHN0b3JhZ2VGb3JEb2MoZWxlbWVudE9yQW1wRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2U8IS4vc2VydmljZS9zdG9yYWdlLWltcGwuU3RvcmFnZT59ICovIChcbiAgICAgIGdldFNlcnZpY2VQcm9taXNlRm9yRG9jKGVsZW1lbnRPckFtcERvYywgJ3N0b3JhZ2UnKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5kb3dcbiAgICogQHJldHVybiB7IS4vc2VydmljZS90ZW1wbGF0ZS1pbXBsLlRlbXBsYXRlc31cbiAgICovXG4gIHN0YXRpYyB0ZW1wbGF0ZXNGb3Iod2luZG93KSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS90ZW1wbGF0ZS1pbXBsLlRlbXBsYXRlc30gKi8gKFxuICAgICAgZ2V0U2VydmljZSh3aW5kb3csICd0ZW1wbGF0ZXMnKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5kb3dcbiAgICogQHJldHVybiB7IS4vc2VydmljZS90aW1lci1pbXBsLlRpbWVyfVxuICAgKi9cbiAgc3RhdGljIHRpbWVyRm9yKHdpbmRvdykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UvdGltZXItaW1wbC5UaW1lcn0gKi8gKFxuICAgICAgZ2V0U2VydmljZSh3aW5kb3csICd0aW1lcicpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVbmxpa2UgbW9zdCBzZXJ2aWNlIGdldHRlcnMsIHBhc3NpbmcgYE5vZGVgIGlzIG5lY2Vzc2FyeSBmb3Igc29tZSBGSUUtc2NvcGVcbiAgICogc2VydmljZXMgc2luY2Ugc29tZXRpbWVzIHdlIG9ubHkgaGF2ZSB0aGUgRklFIERvY3VtZW50IGZvciBjb250ZXh0LlxuICAgKiBAcGFyYW0geyFOb2RlfCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBub2RlT3JEb2NcbiAgICogQHJldHVybiB7IS4vc2VydmljZS91cmwtcmVwbGFjZW1lbnRzLWltcGwuVXJsUmVwbGFjZW1lbnRzfVxuICAgKi9cbiAgc3RhdGljIHVybFJlcGxhY2VtZW50c0ZvckRvYyhub2RlT3JEb2MpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL3VybC1yZXBsYWNlbWVudHMtaW1wbC5VcmxSZXBsYWNlbWVudHN9ICovIChcbiAgICAgIGdldEV4aXN0aW5nU2VydmljZUZvckRvY0luRW1iZWRTY29wZShcbiAgICAgICAgICBub2RlT3JEb2MsICd1cmwtcmVwbGFjZScsIC8qIG9wdF9mYWxsYmFja1RvVG9wV2luICovIHRydWUpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAgICogQHJldHVybiB7IVByb21pc2U8IS4uL2V4dGVuc2lvbnMvYW1wLXVzZXItbm90aWZpY2F0aW9uLzAuMS9hbXAtdXNlci1ub3RpZmljYXRpb24uVXNlck5vdGlmaWNhdGlvbk1hbmFnZXI+fVxuICAgKi9cbiAgc3RhdGljIHVzZXJOb3RpZmljYXRpb25NYW5hZ2VyRm9yRG9jKGVsZW1lbnRPckFtcERvYykge1xuICAgIHJldHVybiAoLyoqIEB0eXBlIHshUHJvbWlzZTwhLi4vZXh0ZW5zaW9ucy9hbXAtdXNlci1ub3RpZmljYXRpb24vMC4xL2FtcC11c2VyLW5vdGlmaWNhdGlvbi5Vc2VyTm90aWZpY2F0aW9uTWFuYWdlcj59ICovXG4gICAgICAoZ2V0RWxlbWVudFNlcnZpY2VGb3JEb2MoZWxlbWVudE9yQW1wRG9jLCAndXNlck5vdGlmaWNhdGlvbk1hbmFnZXInLFxuICAgICAgICAgICdhbXAtdXNlci1ub3RpZmljYXRpb24nKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgY29uc2VudFBvbGljeSBTZXJ2aWNlIG9yIGEgcHJvbWlzZSBmb3IgbnVsbCBpZlxuICAgKiB0aGUgc2VydmljZSBpcyBub3QgYXZhaWxhYmxlIG9uIHRoZSBjdXJyZW50IHBhZ2UuXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGVsZW1lbnRPckFtcERvY1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZTw/Li4vZXh0ZW5zaW9ucy9hbXAtY29uc2VudC8wLjEvY29uc2VudC1wb2xpY3ktbWFuYWdlci5Db25zZW50UG9saWN5TWFuYWdlcj59XG4gICAqL1xuICBzdGF0aWMgY29uc2VudFBvbGljeVNlcnZpY2VGb3JEb2NPck51bGwoZWxlbWVudE9yQW1wRG9jKSB7XG4gICAgcmV0dXJuICgvKiogQHR5cGUgeyFQcm9taXNlPD8uLi9leHRlbnNpb25zL2FtcC1jb25zZW50LzAuMS9jb25zZW50LXBvbGljeS1tYW5hZ2VyLkNvbnNlbnRQb2xpY3lNYW5hZ2VyPn0gKi9cbiAgICAgIChnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlRm9yRG9jKGVsZW1lbnRPckFtcERvYyxcbiAgICAgICAgICAnY29uc2VudFBvbGljeU1hbmFnZXInLCAnYW1wLWNvbnNlbnQnKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgZ2VvIHNlcnZpY2Ugb3IgYSBwcm9taXNlIGZvciBudWxsIGlmXG4gICAqIHRoZSBzZXJ2aWNlIGlzIG5vdCBhdmFpbGFibGUgb24gdGhlIGN1cnJlbnQgcGFnZS5cbiAgICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gICAqIEByZXR1cm4geyFQcm9taXNlPD8uLi9leHRlbnNpb25zL2FtcC1nZW8vMC4xL2FtcC1nZW8uR2VvRGVmPn1cbiAgICovXG4gIHN0YXRpYyBnZW9Gb3JEb2NPck51bGwoZWxlbWVudE9yQW1wRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2U8Py4uL2V4dGVuc2lvbnMvYW1wLWdlby8wLjEvYW1wLWdlby5HZW9EZWY+fSAqLyAoXG4gICAgICBnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlRm9yRG9jKFxuICAgICAgICAgIGVsZW1lbnRPckFtcERvYywgJ2dlbycsICdhbXAtZ2VvJywgdHJ1ZSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVubGlrZSBtb3N0IHNlcnZpY2UgZ2V0dGVycywgcGFzc2luZyBgTm9kZWAgaXMgbmVjZXNzYXJ5IGZvciBzb21lIEZJRS1zY29wZVxuICAgKiBzZXJ2aWNlcyBzaW5jZSBzb21ldGltZXMgd2Ugb25seSBoYXZlIHRoZSBGSUUgRG9jdW1lbnQgZm9yIGNvbnRleHQuXG4gICAqIEBwYXJhbSB7IU5vZGV8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IG5vZGVPckRvY1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL3VybC1pbXBsLlVybH1cbiAgICovXG4gIHN0YXRpYyB1cmxGb3JEb2Mobm9kZU9yRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS91cmwtaW1wbC5Vcmx9ICovIChcbiAgICAgIGdldEV4aXN0aW5nU2VydmljZUZvckRvY0luRW1iZWRTY29wZShcbiAgICAgICAgICBub2RlT3JEb2MsICd1cmwnLCAvKiBvcHRfZmFsbGJhY2tUb1RvcFdpbiAqLyB0cnVlKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSBleHBlcmltZW50IHZhcmlhbnRzIG9yIGEgcHJvbWlzZSBmb3IgbnVsbCBpZiBpdFxuICAgKiBpcyBub3QgYXZhaWxhYmxlIG9uIHRoZSBjdXJyZW50IHBhZ2UuXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEByZXR1cm4geyFQcm9taXNlPD9PYmplY3Q8c3RyaW5nPj59XG4gICAqL1xuICBzdGF0aWMgdmFyaWFudEZvck9yTnVsbCh3aW4pIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZTw/T2JqZWN0PHN0cmluZz4+fSAqLyAoXG4gICAgICBnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlKHdpbiwgJ3ZhcmlhbnQnLCAnYW1wLWV4cGVyaW1lbnQnLCB0cnVlKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudHwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gZWxlbWVudE9yQW1wRG9jXG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvdmlkZW8tc2VydmljZS1pbnRlcmZhY2UuVmlkZW9TZXJ2aWNlSW50ZXJmYWNlfVxuICAgKi9cbiAgc3RhdGljIHZpZGVvTWFuYWdlckZvckRvYyhlbGVtZW50T3JBbXBEb2MpIHtcbiAgICByZXR1cm4gKFxuICAgICAgLyoqIEB0eXBlIHshLi9zZXJ2aWNlL3ZpZGVvLXNlcnZpY2UtaW50ZXJmYWNlLlZpZGVvU2VydmljZUludGVyZmFjZX0gKi8gKFxuICAgICAgICBnZXRTZXJ2aWNlRm9yRG9jKGVsZW1lbnRPckFtcERvYywgJ3ZpZGVvLW1hbmFnZXInKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZXMgZ2V0U2VydmljZUZvckRvY0RlcHJlY2F0ZWQoKSBzaW5jZSBWaWV3ZXIgaXMgYSBzdGFydHVwIHNlcnZpY2UuXG4gICAqIEBwYXJhbSB7IU5vZGV8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IG5vZGVPckRvY1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL3ZpZXdlci1pbXBsLlZpZXdlcn1cbiAgICovXG4gIHN0YXRpYyB2aWV3ZXJGb3JEb2Mobm9kZU9yRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS92aWV3ZXItaW1wbC5WaWV3ZXJ9ICovIChcbiAgICAgIGdldFNlcnZpY2VGb3JEb2NEZXByZWNhdGVkKG5vZGVPckRvYywgJ3ZpZXdlcicpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHByb21pc2UgZm9yIHRoZSB2aWV3ZXIuIFRoaXMgaXMgYW4gdW51c3VhbCBjYXNlIGFuZCBuZWNlc3Nhcnkgb25seVxuICAgKiBmb3Igc2VydmljZXMgdGhhdCBuZWVkIHJlZmVyZW5jZSB0byB0aGUgdmlld2VyIGJlZm9yZSBpdCBoYXMgYmVlblxuICAgKiBpbml0aWFsaXplZC4gTW9zdCBvZiB0aGUgY29kZSwgaG93ZXZlciwganVzdCBzaG91bGQgdXNlIGB2aWV3ZXJGb3JEb2NgLlxuICAgKiBAcGFyYW0geyFFbGVtZW50fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBlbGVtZW50T3JBbXBEb2NcbiAgICogQHJldHVybiB7IVByb21pc2U8IS4vc2VydmljZS92aWV3ZXItaW1wbC5WaWV3ZXI+fVxuICAgKi9cbiAgc3RhdGljIHZpZXdlclByb21pc2VGb3JEb2MoZWxlbWVudE9yQW1wRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2U8IS4vc2VydmljZS92aWV3ZXItaW1wbC5WaWV3ZXI+fSAqLyAoXG4gICAgICBnZXRTZXJ2aWNlUHJvbWlzZUZvckRvYyhlbGVtZW50T3JBbXBEb2MsICd2aWV3ZXInKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5kb3dcbiAgICogQHJldHVybiB7IS4vc2VydmljZS92c3luYy1pbXBsLlZzeW5jfVxuICAgKi9cbiAgc3RhdGljIHZzeW5jRm9yKHdpbmRvdykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UvdnN5bmMtaW1wbC5Wc3luY30gKi8gKFxuICAgICAgZ2V0U2VydmljZSh3aW5kb3csICd2c3luYycpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2VzIGdldFNlcnZpY2VGb3JEb2NEZXByZWNhdGVkKCkgc2luY2UgVmlld3BvcnQgaXMgYSBzdGFydHVwIHNlcnZpY2UuXG4gICAqIEBwYXJhbSB7IU5vZGV8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IG5vZGVPckRvY1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL3ZpZXdwb3J0L3ZpZXdwb3J0LWltcGwuVmlld3BvcnR9XG4gICAqL1xuICBzdGF0aWMgdmlld3BvcnRGb3JEb2Mobm9kZU9yRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS92aWV3cG9ydC92aWV3cG9ydC1pbXBsLlZpZXdwb3J0fSAqLyAoXG4gICAgICBnZXRTZXJ2aWNlRm9yRG9jRGVwcmVjYXRlZChub2RlT3JEb2MsICd2aWV3cG9ydCcpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpbmRvd1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL3hoci1pbXBsLlhocn1cbiAgICovXG4gIHN0YXRpYyB4aHJGb3Iod2luZG93KSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS94aHItaW1wbC5YaHJ9ICovIChnZXRTZXJ2aWNlKHdpbmRvdywgJ3hocicpKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7ZGV2fSBmcm9tICcuL2xvZyc7XG5pbXBvcnQge21hcH0gZnJvbSAnLi91dGlscy9vYmplY3QuanMnO1xuXG5sZXQgY29udGFpbmVyO1xuXG4vKipcbiAqIENyZWF0ZXMgdGhlIGh0bWwgaGVscGVyIGZvciB0aGUgZG9jLlxuICpcbiAqIEBwYXJhbSB7IUVsZW1lbnR8IURvY3VtZW50fSBub2RlT3JEb2NcbiAqIEByZXR1cm4ge2Z1bmN0aW9uKCFBcnJheTxzdHJpbmc+KTohRWxlbWVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGh0bWxGb3Iobm9kZU9yRG9jKSB7XG4gIGNvbnN0IGRvYyA9IG5vZGVPckRvYy5vd25lckRvY3VtZW50IHx8IG5vZGVPckRvYztcbiAgaWYgKCFjb250YWluZXIgfHwgY29udGFpbmVyLm93bmVyRG9jdW1lbnQgIT09IGRvYykge1xuICAgIGNvbnRhaW5lciA9IGRvYy5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgfVxuXG4gIHJldHVybiBodG1sO1xufVxuXG4vKipcbiAqIEEgdGFnZ2VkIHRlbXBsYXRlIGxpdGVyYWwgaGVscGVyIHRvIGdlbmVyYXRlIHN0YXRpYyBET00gdHJlZXMuXG4gKiBUaGlzIG11c3QgYmUgdXNlZCBhcyBhIHRhZ2dlZCB0ZW1wbGF0ZSwgaWVcbiAqXG4gKiBgYGBcbiAqIGNvbnN0IGRpdiA9IGh0bWxgPGRpdj48c3Bhbj48L3NwYW4+PC9kaXY+YDtcbiAqIGBgYFxuICpcbiAqIE9ubHkgdGhlIHJvb3QgZWxlbWVudCBhbmQgaXRzIHN1YnRyZWUgd2lsbCBiZSByZXR1cm5lZC4gRE8gTk9UIHVzZSB0aGlzIHRvXG4gKiByZW5kZXIgc3VidHJlZSdzIHdpdGggZHluYW1pYyBjb250ZW50LCBpdCBXSUxMIHJlc3VsdCBpbiBhbiBlcnJvciFcbiAqXG4gKiBAcGFyYW0geyFBcnJheTxzdHJpbmc+fSBzdHJpbmdzXG4gKiBAcmV0dXJuIHshRWxlbWVudH1cbiAqL1xuZnVuY3Rpb24gaHRtbChzdHJpbmdzKSB7XG4gIGRldigpLmFzc2VydChzdHJpbmdzLmxlbmd0aCA9PT0gMSwgJ0ltcHJvcGVyIGh0bWwgdGVtcGxhdGUgdGFnIHVzYWdlLicpO1xuICBjb250YWluZXIuLypPSyovaW5uZXJIVE1MID0gc3RyaW5nc1swXTtcblxuICBjb25zdCBlbCA9IGNvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZDtcbiAgZGV2KCkuYXNzZXJ0KGVsLCAnTm8gZWxlbWVudHMgaW4gdGVtcGxhdGUnKTtcbiAgZGV2KCkuYXNzZXJ0KCFlbC5uZXh0RWxlbWVudFNpYmxpbmcsICdUb28gbWFueSByb290IGVsZW1lbnRzIGluIHRlbXBsYXRlJyk7XG5cbiAgLy8gQ2xlYXIgdG8gZnJlZSBtZW1vcnkuXG4gIGNvbnRhaW5lci4vKk9LKi9pbm5lckhUTUwgPSAnJztcblxuICByZXR1cm4gZWw7XG59XG5cbi8qKlxuICogUXVlcmllcyBhbiBlbGVtZW50IGZvciBhbGwgZWxlbWVudHMgd2l0aCBhIFwicmVmXCIgYXR0cmlidXRlLCByZW1vdmluZ1xuICogdGhlIGF0dHJpYnV0ZSBhZnRlcndhcmRzLlxuICogUmV0dXJucyBhIG5hbWVkIG1hcCBvZiBhbGwgcmVmIGVsZW1lbnRzLlxuICpcbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHJvb3RcbiAqIEByZXR1cm4geyFPYmplY3Q8c3RyaW5nLCAhRWxlbWVudD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBodG1sUmVmcyhyb290KSB7XG4gIGNvbnN0IGVsZW1lbnRzID0gcm9vdC5xdWVyeVNlbGVjdG9yQWxsKCdbcmVmXScpO1xuICBjb25zdCByZWZzID0gbWFwKCk7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBlbGVtZW50c1tpXTtcbiAgICBjb25zdCByZWYgPSBkZXYoKS5hc3NlcnQoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3JlZicpLCAnRW1wdHkgcmVmIGF0dHInKTtcbiAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgncmVmJyk7XG4gICAgZGV2KCkuYXNzZXJ0KHJlZnNbcmVmXSA9PT0gdW5kZWZpbmVkLCAnRHVwbGljYXRlIHJlZicpO1xuICAgIHJlZnNbcmVmXSA9IGVsZW1lbnQ7XG4gIH1cblxuICByZXR1cm4gcmVmcztcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBfbWF0Y2hcbiAqIEBwYXJhbSB7c3RyaW5nfSBjaGFyYWN0ZXJcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gdG9VcHBlckNhc2UoX21hdGNoLCBjaGFyYWN0ZXIpIHtcbiAgcmV0dXJuIGNoYXJhY3Rlci50b1VwcGVyQ2FzZSgpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBtYXRjaFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBwcmVwZW5kRGFzaEFuZFRvTG93ZXJDYXNlKG1hdGNoKSB7XG4gIHJldHVybiAnLScgKyBtYXRjaC50b0xvd2VyQ2FzZSgpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEF0dHJpYnV0ZSBuYW1lIGNvbnRhaW5pbmcgZGFzaGVzLlxuICogQHJldHVybiB7c3RyaW5nfSBEYXNoZXMgcmVtb3ZlZCBhbmQgc3VjY2Vzc2l2ZSBjaGFyYWN0ZXIgc2VudCB0byB1cHBlciBjYXNlLlxuICogdmlzaWJsZUZvclRlc3RpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRhc2hUb0NhbWVsQ2FzZShuYW1lKSB7XG4gIHJldHVybiBuYW1lLnJlcGxhY2UoLy0oW2Etel0pL2csIHRvVXBwZXJDYXNlKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhIHN0cmluZyB0aGF0IGlzIGluIGNhbWVsQ2FzZSB0byBvbmUgdGhhdCBpcyBpbiBkYXNoLWNhc2UuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBzdHJpbmcgaW4gZGFzaC1jYXNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FtZWxDYXNlVG9EYXNoKHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoLyg/IV4pW0EtWl0vZywgcHJlcGVuZERhc2hBbmRUb0xvd2VyQ2FzZSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgQXR0cmlidXRlIG5hbWUgd2l0aCBkYXNoZXNcbiAqIEByZXR1cm4ge3N0cmluZ30gRGFzaGVzIHJlcGxhY2VkIGJ5IHVuZGVybGluZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkYXNoVG9VbmRlcmxpbmUobmFtZSkge1xuICByZXR1cm4gbmFtZS5yZXBsYWNlKCctJywgJ18nKTtcbn1cblxuLyoqXG4gKiBQb2x5ZmlsbCBmb3IgU3RyaW5nLnByb3RvdHlwZS5lbmRzV2l0aC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmdcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdWZmaXhcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlbmRzV2l0aChzdHJpbmcsIHN1ZmZpeCkge1xuICBjb25zdCBpbmRleCA9IHN0cmluZy5sZW5ndGggLSBzdWZmaXgubGVuZ3RoO1xuICByZXR1cm4gaW5kZXggPj0gMCAmJiBzdHJpbmcuaW5kZXhPZihzdWZmaXgsIGluZGV4KSA9PSBpbmRleDtcbn1cblxuLyoqXG4gKiBQb2x5ZmlsbCBmb3IgU3RyaW5nLnByb3RvdHlwZS5zdGFydHNXaXRoLlxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZ1xuICogQHBhcmFtIHtzdHJpbmd9IHByZWZpeFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0c1dpdGgoc3RyaW5nLCBwcmVmaXgpIHtcbiAgaWYgKHByZWZpeC5sZW5ndGggPiBzdHJpbmcubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBzdHJpbmcubGFzdEluZGV4T2YocHJlZml4LCAwKSA9PSAwO1xufVxuXG4vKipcbiAqIEV4cGFuZHMgcGxhY2Vob2xkZXJzIGluIGEgZ2l2ZW4gdGVtcGxhdGUgc3RyaW5nIHdpdGggdmFsdWVzLlxuICpcbiAqIFBsYWNlaG9sZGVycyB1c2UgJHtrZXktbmFtZX0gc3ludGF4IGFuZCBhcmUgcmVwbGFjZWQgd2l0aCB0aGUgdmFsdWVcbiAqIHJldHVybmVkIGZyb20gdGhlIGdpdmVuIGdldHRlciBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGVtcGxhdGUgVGhlIHRlbXBsYXRlIHN0cmluZyB0byBleHBhbmQuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHN0cmluZyk6Kn0gZ2V0dGVyIEZ1bmN0aW9uIHVzZWQgdG8gcmV0cmlldmUgYSB2YWx1ZSBmb3IgYVxuICogICBwbGFjZWhvbGRlci4gUmV0dXJucyB2YWx1ZXMgd2lsbCBiZSBjb2VyY2VkIGludG8gc3RyaW5ncy5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0X21heEl0ZXJhdGlvbnMgTnVtYmVyIG9mIHRpbWVzIHRvIGV4cGFuZCB0aGUgdGVtcGxhdGUuXG4gKiAgIERlZmF1bHRzIHRvIDEsIGJ1dCBzaG91bGQgYmUgc2V0IHRvIGEgbGFyZ2VyIHZhbHVlIHlvdXIgcGxhY2Vob2xkZXIgdG9rZW5zXG4gKiAgIGNhbiBiZSBleHBhbmRlZCB0byBvdGhlciBwbGFjZWhvbGRlciB0b2tlbnMuIFRha2UgY2F1dGlvbiB3aXRoIGxhcmdlIHZhbHVlc1xuICogICBhcyByZWN1cnNpdmVseSBleHBhbmRpbmcgYSBzdHJpbmcgY2FuIGJlIGV4cG9uZW50aWFsbHkgZXhwZW5zaXZlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXhwYW5kVGVtcGxhdGUodGVtcGxhdGUsIGdldHRlciwgb3B0X21heEl0ZXJhdGlvbnMpIHtcbiAgY29uc3QgbWF4SXRlcmF0aW9ucyA9IG9wdF9tYXhJdGVyYXRpb25zIHx8IDE7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbWF4SXRlcmF0aW9uczsgaSsrKSB7XG4gICAgbGV0IG1hdGNoZXMgPSAwO1xuICAgIHRlbXBsYXRlID0gdGVtcGxhdGUucmVwbGFjZSgvXFwkeyhbXn1dKil9L2csIChfYSwgYikgPT4ge1xuICAgICAgbWF0Y2hlcysrO1xuICAgICAgcmV0dXJuIGdldHRlcihiKTtcbiAgICB9KTtcbiAgICBpZiAoIW1hdGNoZXMpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdGVtcGxhdGU7XG59XG5cbi8qKlxuICogSGFzaCBmdW5jdGlvbiBkamIyYVxuICogVGhpcyBpcyBpbnRlbmRlZCB0byBiZSBhIHNpbXBsZSwgZmFzdCBoYXNoaW5nIGZ1bmN0aW9uIHVzaW5nIG1pbmltYWwgY29kZS5cbiAqIEl0IGRvZXMgKm5vdCogaGF2ZSBnb29kIGNyeXB0b2dyYXBoaWMgcHJvcGVydGllcy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge3N0cmluZ30gMzItYml0IHVuc2lnbmVkIGhhc2ggb2YgdGhlIHN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5nSGFzaDMyKHN0cikge1xuICBjb25zdCB7bGVuZ3RofSA9IHN0cjtcbiAgbGV0IGhhc2ggPSA1MzgxO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgaGFzaCA9IGhhc2ggKiAzMyBeIHN0ci5jaGFyQ29kZUF0KGkpO1xuICB9XG4gIC8vIENvbnZlcnQgZnJvbSAzMi1iaXQgc2lnbmVkIHRvIHVuc2lnbmVkLlxuICByZXR1cm4gU3RyaW5nKGhhc2ggPj4+IDApO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7U2VydmljZXN9IGZyb20gJy4vc2VydmljZXMnO1xuaW1wb3J0IHtkZXYsIHJldGhyb3dBc3luY30gZnJvbSAnLi9sb2cnO1xuaW1wb3J0IHtpbnNlcnRBZnRlck9yQXRTdGFydCwgd2FpdEZvckJvZHl9IGZyb20gJy4vZG9tJztcbmltcG9ydCB7bWFwfSBmcm9tICcuL3V0aWxzL29iamVjdCc7XG5pbXBvcnQge3NldFN0eWxlc30gZnJvbSAnLi9zdHlsZSc7XG5pbXBvcnQge3dhaXRGb3JTZXJ2aWNlc30gZnJvbSAnLi9yZW5kZXItZGVsYXlpbmctc2VydmljZXMnO1xuXG5jb25zdCBUUkFOU0ZPUk1FUl9QUk9QID0gJ19fQU1QX0NTU19UUic7XG5jb25zdCBTVFlMRV9NQVBfUFJPUCA9ICdfX0FNUF9DU1NfU00nO1xuY29uc3QgYm9keVZpc2libGVTZW50aW5lbCA9ICdfX0FNUF9CT0RZX1ZJU0lCTEUnO1xuXG5cbi8qKlxuICogQWRkcyB0aGUgZ2l2ZW4gY3NzIHRleHQgdG8gdGhlIGdpdmVuIGFtcGRvYy5cbiAqXG4gKiBUaGUgc3R5bGUgdGFncyB3aWxsIGJlIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGhlYWQgYmVmb3JlIGFsbCBhdXRob3JcbiAqIHN0eWxlcy4gT25lIGVsZW1lbnQgY2FuIGJlIHRoZSBtYWluIHJ1bnRpbWUgQ1NTLiBUaGlzIGlzIGd1YXJhbnRlZWRcbiAqIHRvIGFsd2F5cyBiZSB0aGUgZmlyc3Qgc3R5bGVzaGVldCBpbiB0aGUgZG9jLlxuICpcbiAqIEBwYXJhbSB7IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGFtcGRvYyBUaGUgYW1wZG9jIHRoYXQgc2hvdWxkIGdldCB0aGUgbmV3IHN0eWxlcy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBjc3NUZXh0XG4gKiBAcGFyYW0gez9mdW5jdGlvbighRWxlbWVudCl8dW5kZWZpbmVkfSBjYiBDYWxsZWQgd2hlbiB0aGUgbmV3IHN0eWxlcyBhcmUgYXZhaWxhYmxlLlxuICogICAgIE5vdCB1c2luZyBhIHByb21pc2UsIGJlY2F1c2UgdGhpcyBpcyBzeW5jaHJvbm91cyB3aGVuIHBvc3NpYmxlLlxuICogICAgIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2UuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaXNSdW50aW1lQ3NzIElmIHRydWUsIHRoaXMgc3R5bGUgdGFnIHdpbGwgYmUgaW5zZXJ0ZWRcbiAqICAgICBhcyB0aGUgZmlyc3QgZWxlbWVudCBpbiBoZWFkIGFuZCBhbGwgc3R5bGUgZWxlbWVudHMgd2lsbCBiZSBwb3NpdGlvbmVkXG4gKiAgICAgYWZ0ZXIuXG4gKiBAcGFyYW0ge3N0cmluZz19IG9wdF9leHRcbiAqIEByZXR1cm4geyFFbGVtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbFN0eWxlc0ZvckRvYyhcbiAgYW1wZG9jLCBjc3NUZXh0LCBjYiwgb3B0X2lzUnVudGltZUNzcywgb3B0X2V4dCkge1xuICBjb25zdCBjc3NSb290ID0gYW1wZG9jLmdldEhlYWROb2RlKCk7XG4gIGNvbnN0IHN0eWxlID0gaW5zZXJ0U3R5bGVFbGVtZW50KFxuICAgICAgY3NzUm9vdCxcbiAgICAgIG1heWJlVHJhbnNmb3JtKGNzc1Jvb3QsIGNzc1RleHQpLFxuICAgICAgb3B0X2lzUnVudGltZUNzcyB8fCBmYWxzZSxcbiAgICAgIG9wdF9leHQgfHwgbnVsbCk7XG5cbiAgaWYgKGNiKSB7XG4gICAgY29uc3Qgcm9vdE5vZGUgPSBhbXBkb2MuZ2V0Um9vdE5vZGUoKTtcbiAgICAvLyBTdHlsZXMgYXJlbid0IGFsd2F5cyBhdmFpbGFibGUgc3luY2hyb25vdXNseS4gRS5nLiBpZiB0aGVyZSBpcyBhXG4gICAgLy8gcGVuZGluZyBzdHlsZSBkb3dubG9hZCwgaXQgd2lsbCBoYXZlIHRvIGZpbmlzaCBiZWZvcmUgdGhlIG5ld1xuICAgIC8vIHN0eWxlIGlzIHZpc2libGUuXG4gICAgLy8gRm9yIHRoaXMgcmVhc29uIHdlIHBvbGwgdW50aWwgdGhlIHN0eWxlIGJlY29tZXMgYXZhaWxhYmxlLlxuICAgIC8vIFN5bmMgY2FzZS5cbiAgICBpZiAoc3R5bGVMb2FkZWQocm9vdE5vZGUsIHN0eWxlKSkge1xuICAgICAgY2Ioc3R5bGUpO1xuICAgICAgcmV0dXJuIHN0eWxlO1xuICAgIH1cbiAgICAvLyBQb2xsIHVudGlsIHN0eWxlcyBhcmUgYXZhaWxhYmxlLlxuICAgIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgaWYgKHN0eWxlTG9hZGVkKHJvb3ROb2RlLCBzdHlsZSkpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICAgIGNiKHN0eWxlKTtcbiAgICAgIH1cbiAgICB9LCA0KTtcbiAgfVxuICByZXR1cm4gc3R5bGU7XG59XG5cblxuLyoqXG4gKiBBZGRzIHRoZSBnaXZlbiBjc3MgdGV4dCB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQuXG4gKiBUT0RPKGR2b3l0ZW5rbywgIzEwNzA1KTogUmVtb3ZlIHRoaXMgbWV0aG9kIG9uY2UgRklFL2FtcGRvYyBtaWdyYXRpb24gaXNcbiAqIGRvbmUuXG4gKlxuICogQHBhcmFtIHshRG9jdW1lbnR9IGRvYyBUaGUgZG9jdW1lbnQgdGhhdCBzaG91bGQgZ2V0IHRoZSBuZXcgc3R5bGVzLlxuICogQHBhcmFtIHtzdHJpbmd9IGNzc1RleHRcbiAqIEBwYXJhbSB7P2Z1bmN0aW9uKCFFbGVtZW50KXx1bmRlZmluZWR9IGNiIENhbGxlZCB3aGVuIHRoZSBuZXcgc3R5bGVzIGFyZVxuICogICAgIGF2YWlsYWJsZS4gTm90IHVzaW5nIGEgcHJvbWlzZSwgYmVjYXVzZSB0aGlzIGlzIHN5bmNocm9ub3VzIHdoZW5cbiAqICAgICBwb3NzaWJsZS4gZm9yIGJldHRlciBwZXJmb3JtYW5jZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pc1J1bnRpbWVDc3MgSWYgdHJ1ZSwgdGhpcyBzdHlsZSB0YWcgd2lsbCBiZSBpbnNlcnRlZFxuICogICAgIGFzIHRoZSBmaXJzdCBlbGVtZW50IGluIGhlYWQgYW5kIGFsbCBzdHlsZSBlbGVtZW50cyB3aWxsIGJlIHBvc2l0aW9uZWRcbiAqICAgICBhZnRlci5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X2V4dFxuICogQHJldHVybiB7IUVsZW1lbnR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsU3R5bGVzTGVnYWN5KFxuICBkb2MsIGNzc1RleHQsIGNiLCBvcHRfaXNSdW50aW1lQ3NzLCBvcHRfZXh0KSB7XG4gIGNvbnN0IHN0eWxlID0gaW5zZXJ0U3R5bGVFbGVtZW50KFxuICAgICAgZGV2KCkuYXNzZXJ0RWxlbWVudChkb2MuaGVhZCksXG4gICAgICBjc3NUZXh0LFxuICAgICAgb3B0X2lzUnVudGltZUNzcyB8fCBmYWxzZSxcbiAgICAgIG9wdF9leHQgfHwgbnVsbCk7XG5cbiAgaWYgKGNiKSB7XG4gICAgLy8gU3R5bGVzIGFyZW4ndCBhbHdheXMgYXZhaWxhYmxlIHN5bmNocm9ub3VzbHkuIEUuZy4gaWYgdGhlcmUgaXMgYVxuICAgIC8vIHBlbmRpbmcgc3R5bGUgZG93bmxvYWQsIGl0IHdpbGwgaGF2ZSB0byBmaW5pc2ggYmVmb3JlIHRoZSBuZXdcbiAgICAvLyBzdHlsZSBpcyB2aXNpYmxlLlxuICAgIC8vIEZvciB0aGlzIHJlYXNvbiB3ZSBwb2xsIHVudGlsIHRoZSBzdHlsZSBiZWNvbWVzIGF2YWlsYWJsZS5cbiAgICAvLyBTeW5jIGNhc2UuXG4gICAgaWYgKHN0eWxlTG9hZGVkKGRvYywgc3R5bGUpKSB7XG4gICAgICBjYihzdHlsZSk7XG4gICAgICByZXR1cm4gc3R5bGU7XG4gICAgfVxuICAgIC8vIFBvbGwgdW50aWwgc3R5bGVzIGFyZSBhdmFpbGFibGUuXG4gICAgY29uc3QgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBpZiAoc3R5bGVMb2FkZWQoZG9jLCBzdHlsZSkpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICAgIGNiKHN0eWxlKTtcbiAgICAgIH1cbiAgICB9LCA0KTtcbiAgfVxuICByZXR1cm4gc3R5bGU7XG59XG5cblxuLyoqXG4gKiBDcmVhdGVzIHRoZSBwcm9wZXJseSBjb25maWd1cmVkIHN0eWxlIGVsZW1lbnQuXG4gKiBAcGFyYW0geyFFbGVtZW50fCFTaGFkb3dSb290fSBjc3NSb290XG4gKiBAcGFyYW0ge3N0cmluZ30gY3NzVGV4dFxuICogQHBhcmFtIHtib29sZWFufSBpc1J1bnRpbWVDc3NcbiAqIEBwYXJhbSB7P3N0cmluZ30gZXh0XG4gKiBAcmV0dXJuIHshRWxlbWVudH1cbiAqL1xuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KGNzc1Jvb3QsIGNzc1RleHQsIGlzUnVudGltZUNzcywgZXh0KSB7XG4gIGxldCBzdHlsZU1hcCA9IGNzc1Jvb3RbU1RZTEVfTUFQX1BST1BdO1xuICBpZiAoIXN0eWxlTWFwKSB7XG4gICAgc3R5bGVNYXAgPSBjc3NSb290W1NUWUxFX01BUF9QUk9QXSA9IG1hcCgpO1xuICB9XG5cbiAgY29uc3QgaXNFeHRDc3MgPSAhaXNSdW50aW1lQ3NzICYmXG4gICAgICAoZXh0ICYmIGV4dCAhPSAnYW1wLWN1c3RvbScgJiYgZXh0ICE9ICdhbXAta2V5ZnJhbWVzJyk7XG4gIGNvbnN0IGtleSA9XG4gICAgICBpc1J1bnRpbWVDc3MgPyAnYW1wLXJ1bnRpbWUnIDpcbiAgICAgICAgaXNFeHRDc3MgPyBgYW1wLWV4dGVuc2lvbj0ke2V4dH1gIDogbnVsbDtcblxuICAvLyBDaGVjayBpZiBpdCBoYXMgYWxyZWFkeSBiZWVuIGNyZWF0ZWQgb3IgZGlzY292ZXJlZC5cbiAgaWYgKGtleSkge1xuICAgIGNvbnN0IGV4aXN0aW5nID0gZ2V0RXhpc3RpbmdTdHlsZUVsZW1lbnQoY3NzUm9vdCwgc3R5bGVNYXAsIGtleSk7XG4gICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICByZXR1cm4gZXhpc3Rpbmc7XG4gICAgfVxuICB9XG5cbiAgLy8gQ3JlYXRlIHRoZSBuZXcgc3R5bGUgZWxlbWVudCBhbmQgYXBwZW5kIHRvIGNzc1Jvb3QuXG4gIGNvbnN0IGRvYyA9IChjc3NSb290Lm93bmVyRG9jdW1lbnQgfHwgY3NzUm9vdCk7XG4gIGNvbnN0IHN0eWxlID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gIHN0eWxlLi8qT0sqL3RleHRDb250ZW50ID0gY3NzVGV4dDtcbiAgbGV0IGFmdGVyRWxlbWVudCA9IG51bGw7XG4gIC8vIE1ha2Ugc3VyZSB0aGF0IHdlIHBsYWNlIHN0eWxlIHRhZ3MgYWZ0ZXIgdGhlIG1haW4gcnVudGltZSBDU1MuIE90aGVyd2lzZVxuICAvLyB0aGUgb3JkZXIgaXMgcmFuZG9tLlxuICBpZiAoaXNSdW50aW1lQ3NzKSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKCdhbXAtcnVudGltZScsICcnKTtcbiAgfSBlbHNlIGlmIChpc0V4dENzcykge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZSgnYW1wLWV4dGVuc2lvbicsIGV4dCB8fCAnJyk7XG4gICAgYWZ0ZXJFbGVtZW50ID0gZGV2KCkuYXNzZXJ0RWxlbWVudChnZXRFeGlzdGluZ1N0eWxlRWxlbWVudChcbiAgICAgICAgY3NzUm9vdCwgc3R5bGVNYXAsICdhbXAtcnVudGltZScpKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoZXh0KSB7XG4gICAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoZXh0LCAnJyk7XG4gICAgfVxuICAgIGFmdGVyRWxlbWVudCA9IGNzc1Jvb3QubGFzdENoaWxkO1xuICB9XG4gIGluc2VydEFmdGVyT3JBdFN0YXJ0KGNzc1Jvb3QsIHN0eWxlLCBhZnRlckVsZW1lbnQpO1xuICBpZiAoa2V5KSB7XG4gICAgc3R5bGVNYXBba2V5XSA9IHN0eWxlO1xuICB9XG4gIHJldHVybiBzdHlsZTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IUVsZW1lbnR8IVNoYWRvd1Jvb3R9IGNzc1Jvb3RcbiAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsICFFbGVtZW50Pn0gc3R5bGVNYXBcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcbiAqIEByZXR1cm4gez9FbGVtZW50fVxuICovXG5mdW5jdGlvbiBnZXRFeGlzdGluZ1N0eWxlRWxlbWVudChjc3NSb290LCBzdHlsZU1hcCwga2V5KSB7XG4gIC8vIEFscmVhZHkgY2FjaGVkLlxuICBpZiAoc3R5bGVNYXBba2V5XSkge1xuICAgIHJldHVybiBzdHlsZU1hcFtrZXldO1xuICB9XG4gIC8vIENoZWNrIGlmIHRoZSBzdHlsZSBoYXMgYWxyZWFkeSBiZWVuIGFkZGVkIGJ5IHRoZSBzZXJ2ZXIgbGF5b3V0LlxuICBjb25zdCBleGlzdGluZyA9IGNzc1Jvb3QuLypPSyovcXVlcnlTZWxlY3Rvcihgc3R5bGVbJHtrZXl9XWApO1xuICBpZiAoZXhpc3RpbmcpIHtcbiAgICBzdHlsZU1hcFtrZXldID0gZXhpc3Rpbmc7XG4gICAgcmV0dXJuIGV4aXN0aW5nO1xuICB9XG4gIC8vIE5vdGhpbmcgZm91bmQuXG4gIHJldHVybiBudWxsO1xufVxuXG5cbi8qKlxuICogQXBwbGllcyBhIHRyYW5zZm9ybWVyIHRvIHRoZSBDU1MgdGV4dCBpZiBpdCBoYXMgYmVlbiByZWdpc3RlcmVkLlxuICogQHBhcmFtIHshRWxlbWVudHwhU2hhZG93Um9vdH0gY3NzUm9vdFxuICogQHBhcmFtIHtmdW5jdGlvbihzdHJpbmcpOnN0cmluZ30gdHJhbnNmb3JtZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluc3RhbGxDc3NUcmFuc2Zvcm1lcihjc3NSb290LCB0cmFuc2Zvcm1lcikge1xuICBjc3NSb290W1RSQU5TRk9STUVSX1BST1BdID0gdHJhbnNmb3JtZXI7XG59XG5cblxuLyoqXG4gKiBBcHBsaWVzIGEgdHJhbnNmb3JtZXIgdG8gdGhlIENTUyB0ZXh0IGlmIGl0IGhhcyBiZWVuIHJlZ2lzdGVyZWQuXG4gKiBAcGFyYW0geyFFbGVtZW50fCFTaGFkb3dSb290fSBjc3NSb290XG4gKiBAcGFyYW0ge3N0cmluZ30gY3NzVGV4dFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBtYXliZVRyYW5zZm9ybShjc3NSb290LCBjc3NUZXh0KSB7XG4gIGNvbnN0IHRyYW5zZm9ybWVyID0gY3NzUm9vdFtUUkFOU0ZPUk1FUl9QUk9QXTtcbiAgcmV0dXJuIHRyYW5zZm9ybWVyID8gdHJhbnNmb3JtZXIoY3NzVGV4dCkgOiBjc3NUZXh0O1xufVxuXG5cbi8qKlxuICogU2V0cyB0aGUgZG9jdW1lbnQncyBib2R5IG9wYWNpdHkgdG8gMS5cbiAqIElmIHRoZSBib2R5IGlzIG5vdCB5ZXQgYXZhaWxhYmxlIChiZWNhdXNlIG91ciBzY3JpcHQgd2FzIGxvYWRlZFxuICogc3luY2hyb25vdXNseSksIHBvbGxzIHVudGlsIGl0IGlzLlxuICogQHBhcmFtIHshRG9jdW1lbnR9IGRvYyBUaGUgZG9jdW1lbnQgd2hvJ3MgYm9keSB3ZSBzaG91bGQgbWFrZSB2aXNpYmxlLlxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X3dhaXRGb3JTZXJ2aWNlcyBXaGV0aGVyIHRoZSBib2R5IHZpc2liaWxpdHkgc2hvdWxkXG4gKiAgICAgYmUgYmxvY2tlZCBvbiBrZXkgc2VydmljZXMgYmVpbmcgbG9hZGVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWFrZUJvZHlWaXNpYmxlKGRvYywgb3B0X3dhaXRGb3JTZXJ2aWNlcykge1xuICBkZXYoKS5hc3NlcnQoZG9jLmRlZmF1bHRWaWV3LCAnUGFzc2VkIGluIGRvY3VtZW50IG11c3QgaGF2ZSBhIGRlZmF1bHRWaWV3Jyk7XG4gIGNvbnN0IHdpbiA9IC8qKiBAdHlwZSB7IVdpbmRvd30gKi8gKGRvYy5kZWZhdWx0Vmlldyk7XG4gIGlmICh3aW5bYm9keVZpc2libGVTZW50aW5lbF0pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3Qgc2V0ID0gKCkgPT4ge1xuICAgIHdpbltib2R5VmlzaWJsZVNlbnRpbmVsXSA9IHRydWU7XG4gICAgc2V0U3R5bGVzKGRldigpLmFzc2VydEVsZW1lbnQoZG9jLmJvZHkpLCB7XG4gICAgICBvcGFjaXR5OiAxLFxuICAgICAgdmlzaWJpbGl0eTogJ3Zpc2libGUnLFxuICAgICAgJ2FuaW1hdGlvbic6ICdub25lJyxcbiAgICB9KTtcbiAgICByZW5kZXJTdGFydGVkTm9JbmxpbmUoZG9jKTtcbiAgfTtcbiAgdHJ5IHtcbiAgICB3YWl0Rm9yQm9keShkb2MsICgpID0+IHtcbiAgICAgIGlmICh3aW5bYm9keVZpc2libGVTZW50aW5lbF0pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgd2luW2JvZHlWaXNpYmxlU2VudGluZWxdID0gdHJ1ZTtcbiAgICAgIGlmIChvcHRfd2FpdEZvclNlcnZpY2VzKSB7XG4gICAgICAgIHdhaXRGb3JTZXJ2aWNlcyh3aW4pLmNhdGNoKHJlYXNvbiA9PiB7XG4gICAgICAgICAgcmV0aHJvd0FzeW5jKHJlYXNvbik7XG4gICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9KS50aGVuKHNlcnZpY2VzID0+IHtcbiAgICAgICAgICBzZXQoKTtcbiAgICAgICAgICBpZiAoc2VydmljZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgU2VydmljZXMucmVzb3VyY2VzRm9yRG9jKGRvYykuLypPSyovc2NoZWR1bGVQYXNzKFxuICAgICAgICAgICAgICAgIDEsIC8qIHJlbGF5b3V0QWxsICovIHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcGVyZiA9IFNlcnZpY2VzLnBlcmZvcm1hbmNlRm9yKHdpbik7XG4gICAgICAgICAgICBwZXJmLnRpY2soJ21idicpO1xuICAgICAgICAgICAgcGVyZi5mbHVzaCgpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0KCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBJZiB0aGVyZSB3YXMgYW4gZXJyb3IgZHVyaW5nIHRoZSBsb2dpYyBhYm92ZSAoc3VjaCBhcyBzZXJ2aWNlIG5vdFxuICAgIC8vIHlldCBpbnN0YWxsZWQsIGRlZmluaXRlbHkgdHJ5IHRvIG1ha2UgdGhlIGJvZHkgdmlzaWJsZS5cbiAgICBzZXQoKTtcbiAgICAvLyBBdm9pZCBlcnJvcnMgaW4gdGhlIGZ1bmN0aW9uIHRvIGJyZWFrIGV4ZWN1dGlvbiBmbG93IGFzIHRoaXMgaXNcbiAgICAvLyBvZnRlbiBjYWxsZWQgYXMgYSBsYXN0IHJlc29ydC5cbiAgICByZXRocm93QXN5bmMoZSk7XG4gIH1cbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IURvY3VtZW50fSBkb2NcbiAqL1xuZnVuY3Rpb24gcmVuZGVyU3RhcnRlZE5vSW5saW5lKGRvYykge1xuICB0cnkge1xuICAgIFNlcnZpY2VzLnJlc291cmNlc0ZvckRvYyhkb2MpLnJlbmRlclN0YXJ0ZWQoKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIGBtYWtlQm9keVZpc2libGVgIGlzIGNhbGxlZCBpbiB0aGUgZXJyb3ItcHJvY2Vzc2luZyBjeWNsZSBhbmQgdGh1c1xuICAgIC8vIGNvdWxkIGJlIHRyaWdnZXJlZCB3aGVuIHJ1bnRpbWUncyBpbml0aWFsaXphdGlvbiBpcyBpbmNvbXBsZXRlIHdoaWNoXG4gICAgLy8gd291bGQgY2F1c2UgdW5yZWxhdGVkIGVycm9ycyB0byBiZSB0aHJvd24gaGVyZS5cbiAgfVxufVxuXG5cbi8qKlxuICogSW5kaWNhdGVzIHRoYXQgdGhlIGJvZHkgaXMgYWx3YXlzIHZpc2libGUuIEZvciBpbnN0YW5jZSwgaW4gY2FzZSBvZiBQV0EuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICovXG5leHBvcnQgZnVuY3Rpb24gYm9keUFsd2F5c1Zpc2libGUod2luKSB7XG4gIHdpbltib2R5VmlzaWJsZVNlbnRpbmVsXSA9IHRydWU7XG59XG5cblxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciBhIHN0eWxlIGVsZW1lbnQgd2FzIHJlZ2lzdGVyZWQgaW4gdGhlIERPTS5cbiAqIEBwYXJhbSB7IURvY3VtZW50fCFTaGFkb3dSb290fSBkb2NcbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHN0eWxlXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBzdHlsZUxvYWRlZChkb2MsIHN0eWxlKSB7XG4gIGNvbnN0IHNoZWV0cyA9IGRvYy5zdHlsZVNoZWV0cztcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGVldHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBzaGVldCA9IHNoZWV0c1tpXTtcbiAgICBpZiAoc2hlZXQub3duZXJOb2RlID09IHN0eWxlKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8vIE5vdGU6IGxvYWRlZCBieSAzcCBzeXN0ZW0uIENhbm5vdCByZWx5IG9uIGJhYmVsIHBvbHlmaWxscy5cbmltcG9ydCB7bWFwfSBmcm9tICcuL3V0aWxzL29iamVjdC5qcyc7XG5pbXBvcnQge3N0YXJ0c1dpdGh9IGZyb20gJy4vc3RyaW5nJztcblxuXG4vKiogQHR5cGUge09iamVjdDxzdHJpbmcsIHN0cmluZz59ICovXG5sZXQgcHJvcGVydHlOYW1lQ2FjaGU7XG5cbi8qKiBAY29uc3QgeyFBcnJheTxzdHJpbmc+fSAqL1xuY29uc3QgdmVuZG9yUHJlZml4ZXMgPSBbJ1dlYmtpdCcsICd3ZWJraXQnLCAnTW96JywgJ21veicsICdtcycsICdPJywgJ28nXTtcblxuXG4vKipcbiAqIEBleHBvcnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBjYW1lbENhc2UgY2FtZWwgY2FzZWQgc3RyaW5nXG4gKiBAcmV0dXJuIHtzdHJpbmd9IHRpdGxlIGNhc2VkIHN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gY2FtZWxDYXNlVG9UaXRsZUNhc2UoY2FtZWxDYXNlKSB7XG4gIHJldHVybiBjYW1lbENhc2UuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjYW1lbENhc2Uuc2xpY2UoMSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIHRoZSBzdHlsZSBpZiBhIHByZWZpeGVkIHZlcnNpb24gb2YgYSBwcm9wZXJ0eSBleGlzdHMgYW5kIHJldHVybnNcbiAqIGl0IG9yIHJldHVybnMgYW4gZW1wdHkgc3RyaW5nLlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7IU9iamVjdH0gc3R5bGVcbiAqIEBwYXJhbSB7c3RyaW5nfSB0aXRsZUNhc2UgdGhlIHRpdGxlIGNhc2UgdmVyc2lvbiBvZiBhIGNzcyBwcm9wZXJ0eSBuYW1lXG4gKiBAcmV0dXJuIHtzdHJpbmd9IHRoZSBwcmVmaXhlZCBwcm9wZXJ0eSBuYW1lIG9yIG51bGwuXG4gKi9cbmZ1bmN0aW9uIGdldFZlbmRvckpzUHJvcGVydHlOYW1lXyhzdHlsZSwgdGl0bGVDYXNlKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdmVuZG9yUHJlZml4ZXMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBwcm9wZXJ0eU5hbWUgPSB2ZW5kb3JQcmVmaXhlc1tpXSArIHRpdGxlQ2FzZTtcbiAgICBpZiAoc3R5bGVbcHJvcGVydHlOYW1lXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gcHJvcGVydHlOYW1lO1xuICAgIH1cbiAgfVxuICByZXR1cm4gJyc7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgcG9zc2libHkgcHJlZml4ZWQgSmF2YVNjcmlwdCBwcm9wZXJ0eSBuYW1lIG9mIGEgc3R5bGUgcHJvcGVydHlcbiAqIChleC4gV2Via2l0VHJhbnNpdGlvbkR1cmF0aW9uKSBnaXZlbiBhIGNhbWVsQ2FzZSdkIHZlcnNpb24gb2YgdGhlIHByb3BlcnR5XG4gKiAoZXguIHRyYW5zaXRpb25EdXJhdGlvbikuXG4gKiBAZXhwb3J0XG4gKiBAcGFyYW0geyFPYmplY3R9IHN0eWxlXG4gKiBAcGFyYW0ge3N0cmluZ30gY2FtZWxDYXNlIHRoZSBjYW1lbCBjYXNlZCB2ZXJzaW9uIG9mIGEgY3NzIHByb3BlcnR5IG5hbWVcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9ieXBhc3NDYWNoZSBieXBhc3MgdGhlIG1lbW9pemVkIGNhY2hlIG9mIHByb3BlcnR5XG4gKiAgIG1hcHBpbmdcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFZlbmRvckpzUHJvcGVydHlOYW1lKHN0eWxlLCBjYW1lbENhc2UsIG9wdF9ieXBhc3NDYWNoZSkge1xuICBpZiAoc3RhcnRzV2l0aChjYW1lbENhc2UsICctLScpKSB7XG4gICAgLy8gQ1NTIHZhcnMgYXJlIHJldHVybmVkIGFzIGlzLlxuICAgIHJldHVybiBjYW1lbENhc2U7XG4gIH1cbiAgaWYgKCFwcm9wZXJ0eU5hbWVDYWNoZSkge1xuICAgIHByb3BlcnR5TmFtZUNhY2hlID0gbWFwKCk7XG4gIH1cbiAgbGV0IHByb3BlcnR5TmFtZSA9IHByb3BlcnR5TmFtZUNhY2hlW2NhbWVsQ2FzZV07XG4gIGlmICghcHJvcGVydHlOYW1lIHx8IG9wdF9ieXBhc3NDYWNoZSkge1xuICAgIHByb3BlcnR5TmFtZSA9IGNhbWVsQ2FzZTtcbiAgICBpZiAoc3R5bGVbY2FtZWxDYXNlXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCB0aXRsZUNhc2UgPSBjYW1lbENhc2VUb1RpdGxlQ2FzZShjYW1lbENhc2UpO1xuICAgICAgY29uc3QgcHJlZml4ZWRQcm9wZXJ0eU5hbWUgPSBnZXRWZW5kb3JKc1Byb3BlcnR5TmFtZV8oc3R5bGUsIHRpdGxlQ2FzZSk7XG5cbiAgICAgIGlmIChzdHlsZVtwcmVmaXhlZFByb3BlcnR5TmFtZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwcm9wZXJ0eU5hbWUgPSBwcmVmaXhlZFByb3BlcnR5TmFtZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFvcHRfYnlwYXNzQ2FjaGUpIHtcbiAgICAgIHByb3BlcnR5TmFtZUNhY2hlW2NhbWVsQ2FzZV0gPSBwcm9wZXJ0eU5hbWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBwcm9wZXJ0eU5hbWU7XG59XG5cblxuLyoqXG4gKiBTZXRzIHRoZSBDU1Mgc3R5bGVzIG9mIHRoZSBzcGVjaWZpZWQgZWxlbWVudCB3aXRoICFpbXBvcnRhbnQuIFRoZSBzdHlsZXNcbiAqIGFyZSBzcGVjaWZpZWQgYXMgYSBtYXAgZnJvbSBDU1MgcHJvcGVydHkgbmFtZXMgdG8gdGhlaXIgdmFsdWVzLlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgKj59IHN0eWxlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0SW1wb3J0YW50U3R5bGVzKGVsZW1lbnQsIHN0eWxlcykge1xuICBmb3IgKGNvbnN0IGsgaW4gc3R5bGVzKSB7XG4gICAgZWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShcbiAgICAgICAgZ2V0VmVuZG9ySnNQcm9wZXJ0eU5hbWUoc3R5bGVzLCBrKSwgc3R5bGVzW2tdLnRvU3RyaW5nKCksICdpbXBvcnRhbnQnKTtcbiAgfVxufVxuXG5cbi8qKlxuICogU2V0cyB0aGUgQ1NTIHN0eWxlIG9mIHRoZSBzcGVjaWZpZWQgZWxlbWVudCB3aXRoIG9wdGlvbmFsIHVuaXRzLCBlLmcuIFwicHhcIi5cbiAqIEBwYXJhbSB7P0VsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eVxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfdW5pdHNcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9ieXBhc3NDYWNoZVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0U3R5bGUoZWxlbWVudCwgcHJvcGVydHksIHZhbHVlLCBvcHRfdW5pdHMsIG9wdF9ieXBhc3NDYWNoZSkge1xuICBjb25zdCBwcm9wZXJ0eU5hbWUgPSBnZXRWZW5kb3JKc1Byb3BlcnR5TmFtZShlbGVtZW50LnN0eWxlLCBwcm9wZXJ0eSxcbiAgICAgIG9wdF9ieXBhc3NDYWNoZSk7XG4gIGlmIChwcm9wZXJ0eU5hbWUpIHtcbiAgICBlbGVtZW50LnN0eWxlW3Byb3BlcnR5TmFtZV0gPVxuICAgICAgLyoqIEB0eXBlIHtzdHJpbmd9ICovIChvcHRfdW5pdHMgPyB2YWx1ZSArIG9wdF91bml0cyA6IHZhbHVlKTtcbiAgfVxufVxuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIENTUyBzdHlsZSBvZiB0aGUgc3BlY2lmaWVkIGVsZW1lbnQuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHlcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9ieXBhc3NDYWNoZVxuICogQHJldHVybiB7Kn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFN0eWxlKGVsZW1lbnQsIHByb3BlcnR5LCBvcHRfYnlwYXNzQ2FjaGUpIHtcbiAgY29uc3QgcHJvcGVydHlOYW1lID0gZ2V0VmVuZG9ySnNQcm9wZXJ0eU5hbWUoZWxlbWVudC5zdHlsZSwgcHJvcGVydHksXG4gICAgICBvcHRfYnlwYXNzQ2FjaGUpO1xuICBpZiAoIXByb3BlcnR5TmFtZSkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuIGVsZW1lbnQuc3R5bGVbcHJvcGVydHlOYW1lXTtcbn1cblxuXG4vKipcbiAqIFNldHMgdGhlIENTUyBzdHlsZXMgb2YgdGhlIHNwZWNpZmllZCBlbGVtZW50LiBUaGUgc3R5bGVzXG4gKiBhIHNwZWNpZmllZCBhcyBhIG1hcCBmcm9tIENTUyBwcm9wZXJ0eSBuYW1lcyB0byB0aGVpciB2YWx1ZXMuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCAqPn0gc3R5bGVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRTdHlsZXMoZWxlbWVudCwgc3R5bGVzKSB7XG4gIGZvciAoY29uc3QgayBpbiBzdHlsZXMpIHtcbiAgICBzZXRTdHlsZShlbGVtZW50LCBrLCBzdHlsZXNba10pO1xuICB9XG59XG5cblxuLyoqXG4gKiBTaG93cyBvciBoaWRlcyB0aGUgc3BlY2lmaWVkIGVsZW1lbnQuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfZGlzcGxheVxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9nZ2xlKGVsZW1lbnQsIG9wdF9kaXNwbGF5KSB7XG4gIGlmIChvcHRfZGlzcGxheSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgb3B0X2Rpc3BsYXkgPSBnZXRTdHlsZShlbGVtZW50LCAnZGlzcGxheScpID09ICdub25lJztcbiAgfVxuICBzZXRTdHlsZShlbGVtZW50LCAnZGlzcGxheScsIG9wdF9kaXNwbGF5ID8gJycgOiAnbm9uZScpO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyBhIHBpeGVsIHZhbHVlLlxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBweCh2YWx1ZSkge1xuICByZXR1cm4gYCR7dmFsdWV9cHhgO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBkZWdyZWUgdmFsdWUuXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZyh2YWx1ZSkge1xuICByZXR1cm4gYCR7dmFsdWV9ZGVnYDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgXCJ0cmFuc2xhdGVYXCIgZm9yIENTUyBcInRyYW5zZm9ybVwiIHByb3BlcnR5LlxuICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSB2YWx1ZVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNsYXRlWCh2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGB0cmFuc2xhdGVYKCR7dmFsdWV9KWA7XG4gIH1cbiAgcmV0dXJuIGB0cmFuc2xhdGVYKCR7cHgodmFsdWUpfSlgO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyBhIFwidHJhbnNsYXRlWFwiIGZvciBDU1MgXCJ0cmFuc2Zvcm1cIiBwcm9wZXJ0eS5cbiAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30geFxuICogQHBhcmFtIHsobnVtYmVyfHN0cmluZyk9fSBvcHRfeVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNsYXRlKHgsIG9wdF95KSB7XG4gIGlmICh0eXBlb2YgeCA9PSAnbnVtYmVyJykge1xuICAgIHggPSBweCh4KTtcbiAgfVxuICBpZiAob3B0X3kgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBgdHJhbnNsYXRlKCR7eH0pYDtcbiAgfVxuICBpZiAodHlwZW9mIG9wdF95ID09ICdudW1iZXInKSB7XG4gICAgb3B0X3kgPSBweChvcHRfeSk7XG4gIH1cbiAgcmV0dXJuIGB0cmFuc2xhdGUoJHt4fSwgJHtvcHRfeX0pYDtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgYSBcInNjYWxlXCIgZm9yIENTUyBcInRyYW5zZm9ybVwiIHByb3BlcnR5LlxuICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSB2YWx1ZVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUodmFsdWUpIHtcbiAgcmV0dXJuIGBzY2FsZSgke3ZhbHVlfSlgO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBcInJvdGF0ZVwiIGZvciBDU1MgXCJ0cmFuc2Zvcm1cIiBwcm9wZXJ0eS5cbiAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30gdmFsdWVcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZSh2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09ICdudW1iZXInKSB7XG4gICAgdmFsdWUgPSBkZWcodmFsdWUpO1xuICB9XG4gIHJldHVybiBgcm90YXRlKCR7dmFsdWV9KWA7XG59XG5cbi8qKlxuICogUmVtb3ZlIGFscGhhIHZhbHVlIGZyb20gYSByZ2JhIGNvbG9yIHZhbHVlLlxuICogUmV0dXJuIHRoZSBuZXcgY29sb3IgcHJvcGVydHkgd2l0aCBhbHBoYSBlcXVhbHMgaWYgaGFzIHRoZSBhbHBoYSB2YWx1ZS5cbiAqIENhbGxlciBuZWVkcyB0byBtYWtlIHN1cmUgdGhlIGlucHV0IGNvbG9yIHZhbHVlIGlzIGEgdmFsaWQgcmdiYS9yZ2IgdmFsdWVcbiAqIEBwYXJhbSB7c3RyaW5nfSByZ2JhQ29sb3JcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUFscGhhRnJvbUNvbG9yKHJnYmFDb2xvcikge1xuICByZXR1cm4gcmdiYUNvbG9yLnJlcGxhY2UoXG4gICAgICAvXFwoKFteLF0rKSwoW14sXSspLChbXiwpXSspLFteKV0rXFwpL2csICcoJDEsJDIsJDMsIDEpJyk7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgY29tcHV0ZWQgc3R5bGUgb2YgdGhlIGVsZW1lbnQuIFRoZSBoZWxwZXIgaXMgbmVjZXNzYXJ5IHRvIGVuZm9yY2VcbiAqIHRoZSBwb3NzaWJsZSBgbnVsbGAgdmFsdWUgcmV0dXJuZWQgYnkgYSBidWdneSBGaXJlZm94LlxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbFxuICogQHJldHVybiB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlZFN0eWxlKHdpbiwgZWwpIHtcbiAgY29uc3Qgc3R5bGUgPSAvKiogQHR5cGUgez9DU1NTdHlsZURlY2xhcmF0aW9ufSAqLyh3aW4uZ2V0Q29tcHV0ZWRTdHlsZShlbCkpO1xuICByZXR1cm4gLyoqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgc3RyaW5nPn0gKi8oc3R5bGUpIHx8IG1hcCgpO1xufVxuXG5cbi8qKlxuICogUmVzZXRzIHN0eWxlcyB0aGF0IHdlcmUgc2V0IGR5bmFtaWNhbGx5IChpLmUuIGlubGluZSlcbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7IUFycmF5PHN0cmluZz59IHByb3BlcnRpZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0U3R5bGVzKGVsZW1lbnQsIHByb3BlcnRpZXMpIHtcbiAgY29uc3Qgc3R5bGVPYmogPSB7fTtcbiAgcHJvcGVydGllcy5mb3JFYWNoKHByb3AgPT4ge1xuICAgIHN0eWxlT2JqW3Byb3BdID0gbnVsbDtcbiAgfSk7XG4gIHNldFN0eWxlcyhlbGVtZW50LCBzdHlsZU9iaik7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyogQGNvbnN0ICovXG5jb25zdCB0b1N0cmluZ18gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4vKipcbiAqIFJldHVybnMgdGhlIEVDTUEgW1tDbGFzc11dIG9mIGEgdmFsdWVcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gdG9TdHJpbmcodmFsdWUpIHtcbiAgcmV0dXJuIHRvU3RyaW5nXy5jYWxsKHZhbHVlKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHZhbHVlIGlzIGFjdHVhbGx5IGFuIEFycmF5LlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQXJyYXkodmFsdWUpIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsdWUpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIGFycmF5LWxpa2Ugb2JqZWN0IHRvIGFuIGFycmF5LlxuICogQHBhcmFtIHs/SUFycmF5TGlrZTxUPnxzdHJpbmd9IGFycmF5TGlrZVxuICogQHJldHVybiB7IUFycmF5PFQ+fVxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvQXJyYXkoYXJyYXlMaWtlKSB7XG4gIGlmICghYXJyYXlMaWtlKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGNvbnN0IGFycmF5ID0gbmV3IEFycmF5KGFycmF5TGlrZS5sZW5ndGgpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5TGlrZS5sZW5ndGg7IGkrKykge1xuICAgIGFycmF5W2ldID0gYXJyYXlMaWtlW2ldO1xuICB9XG4gIHJldHVybiBhcnJheTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHZhbHVlIGlzIGFjdHVhbGx5IGFuIE9iamVjdC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gdG9TdHJpbmcodmFsdWUpID09PSAnW29iamVjdCBPYmplY3RdJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHZhbHVlIGlzIG9mIG51bWJlciB0eXBlIGFuZCBmaW5pdGUuXG4gKiBOYU4gYW5kIEluZmluaXR5IGFyZSBub3QgY29uc2lkZXJlZCBhIGZpbml0ZSBudW1iZXIuXG4gKiBTdHJpbmcgbnVtYmVycyBhcmUgbm90IGNvbnNpZGVyZWQgbnVtYmVycy5cbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Zpbml0ZU51bWJlcih2YWx1ZSkge1xuICByZXR1cm4gKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgaXNGaW5pdGUodmFsdWUpKTtcbn1cblxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciBgc2AgaXMgYSB2YWxpZCB2YWx1ZSBvZiBgZW51bU9iamAuXG4gKlxuICogQHBhcmFtIHshT2JqZWN0PFQ+fSBlbnVtT2JqXG4gKiBAcGFyYW0ge1R9IHNcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNFbnVtVmFsdWUoZW51bU9iaiwgcykge1xuICBmb3IgKGNvbnN0IGsgaW4gZW51bU9iaikge1xuICAgIGlmIChlbnVtT2JqW2tdID09PSBzKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIEV4dGVybnMgZGVjbGFyZSB0aGF0IGFjY2VzcyBgZGVmYXVsdFZpZXdgIGZyb20gYGRvY3VtZW50YCBvclxuICogYG93bmVyRG9jdW1lbnRgIGlzIG9mIHR5cGUgYChXaW5kb3d8bnVsbClgIGJ1dCBtb3N0IG9mIG91ciBwYXJhbWV0ZXIgdHlwZXNcbiAqIGFzc3VtZSB0aGF0IGl0IGlzIG5ldmVyIG51bGwuIFRoaXMgaXMgT0sgaW4gcHJhY3RpY2UgYXMgd2UgZXZlciBvbmx5IGdldFxuICogbnVsbCBvbiBkaXNjb25uZWN0ZWQgZG9jdW1lbnRzIG9yIG9sZCBJRS5cbiAqIFRoaXMgaGVscGVyIGZ1bmN0aW9uIGNhc3RzIGl0IGludG8ganVzdCBhIHNpbXBsZSBXaW5kb3cgcmV0dXJuIHR5cGUuXG4gKlxuICogQHBhcmFtIHshV2luZG93fG51bGx9IHdpbk9yTnVsbFxuICogQHJldHVybiB7IVdpbmRvd31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvV2luKHdpbk9yTnVsbCkge1xuICByZXR1cm4gLyoqIEB0eXBlIHshV2luZG93fSAqLyAod2luT3JOdWxsKTtcbn1cblxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7dHJ5RGVjb2RlVXJpQ29tcG9uZW50X30gZnJvbSAnLi91cmwtdHJ5LWRlY29kZS11cmktY29tcG9uZW50JztcblxuY29uc3QgcmVnZXggPSAvKD86XlsjP10/fCYpKFtePSZdKykoPzo9KFteJl0qKSk/L2c7XG5cbi8qKlxuICogUGFyc2VzIHRoZSBxdWVyeSBzdHJpbmcgb2YgYW4gVVJMLiBUaGlzIG1ldGhvZCByZXR1cm5zIGEgc2ltcGxlIGtleS92YWx1ZVxuICogbWFwLiBJZiB0aGVyZSBhcmUgZHVwbGljYXRlIGtleXMgdGhlIGxhdGVzdCB2YWx1ZSBpcyByZXR1cm5lZC5cbiAqXG4gKiBETyBOT1QgaW1wb3J0IHRoZSBmdW5jdGlvbiBmcm9tIHRoaXMgZmlsZS4gSW5zdGVhZCwgaW1wb3J0IHBhcnNlUXVlcnlTdHJpbmdcbiAqIGZyb20gYHNyYy91cmwuanNgLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBxdWVyeVN0cmluZ1xuICogQHJldHVybiB7IUpzb25PYmplY3R9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVF1ZXJ5U3RyaW5nXyhxdWVyeVN0cmluZykge1xuICBjb25zdCBwYXJhbXMgPSAvKiogQHR5cGUgeyFKc29uT2JqZWN0fSAqLyAoT2JqZWN0LmNyZWF0ZShudWxsKSk7XG4gIGlmICghcXVlcnlTdHJpbmcpIHtcbiAgICByZXR1cm4gcGFyYW1zO1xuICB9XG5cbiAgbGV0IG1hdGNoO1xuICB3aGlsZSAoKG1hdGNoID0gcmVnZXguZXhlYyhxdWVyeVN0cmluZykpKSB7XG4gICAgY29uc3QgbmFtZSA9IHRyeURlY29kZVVyaUNvbXBvbmVudF8obWF0Y2hbMV0sIG1hdGNoWzFdKTtcbiAgICBjb25zdCB2YWx1ZSA9IG1hdGNoWzJdID8gdHJ5RGVjb2RlVXJpQ29tcG9uZW50XyhtYXRjaFsyXSwgbWF0Y2hbMl0pIDogJyc7XG4gICAgcGFyYW1zW25hbWVdID0gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIHBhcmFtcztcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIFRyaWVzIHRvIGRlY29kZSBhIFVSSSBjb21wb25lbnQsIGZhbGxpbmcgYmFjayB0byBvcHRfZmFsbGJhY2sgKG9yIGFuIGVtcHR5XG4gKiBzdHJpbmcpXG4gKlxuICogRE8gTk9UIGltcG9ydCB0aGUgZnVuY3Rpb24gZnJvbSB0aGlzIGZpbGUuIEluc3RlYWQsIGltcG9ydFxuICogdHJ5RGVjb2RlVXJpQ29tcG9uZW50IGZyb20gYHNyYy91cmwuanNgLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb21wb25lbnRcbiAqIEBwYXJhbSB7c3RyaW5nPX0gZmFsbGJhY2tcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyeURlY29kZVVyaUNvbXBvbmVudF8oY29tcG9uZW50LCBmYWxsYmFjayA9ICcnKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChjb21wb25lbnQpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbGxiYWNrO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtMcnVDYWNoZX0gZnJvbSAnLi91dGlscy9scnUtY2FjaGUnO1xuaW1wb3J0IHtkaWN0fSBmcm9tICcuL3V0aWxzL29iamVjdCc7XG5pbXBvcnQge2VuZHNXaXRoLCBzdGFydHNXaXRofSBmcm9tICcuL3N0cmluZyc7XG5pbXBvcnQge2dldE1vZGV9IGZyb20gJy4vbW9kZSc7XG5pbXBvcnQge2lzQXJyYXl9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHtwYXJzZVF1ZXJ5U3RyaW5nX30gZnJvbSAnLi91cmwtcGFyc2UtcXVlcnktc3RyaW5nJztcbmltcG9ydCB7dHJ5RGVjb2RlVXJpQ29tcG9uZW50X30gZnJvbSAnLi91cmwtdHJ5LWRlY29kZS11cmktY29tcG9uZW50JztcbmltcG9ydCB7dXJsc30gZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0IHt1c2VyfSBmcm9tICcuL2xvZyc7XG5cbi8qKlxuICogQHR5cGUgeyFKc29uT2JqZWN0fVxuICovXG5jb25zdCBTRVJWSU5HX1RZUEVfUFJFRklYID0gZGljdCh7XG4gIC8vIE5vIHZpZXdlclxuICAnYyc6IHRydWUsXG4gIC8vIEluIHZpZXdlclxuICAndic6IHRydWUsXG4gIC8vIEFkIGxhbmRpbmcgcGFnZVxuICAnYSc6IHRydWUsXG4gIC8vIEFkXG4gICdhZCc6IHRydWUsXG59KTtcblxuLyoqXG4gKiBDYWNoZWQgYS10YWcgdG8gYXZvaWQgbWVtb3J5IGFsbG9jYXRpb24gZHVyaW5nIFVSTCBwYXJzaW5nLlxuICogQHR5cGUge0hUTUxBbmNob3JFbGVtZW50fVxuICovXG5sZXQgYTtcblxuLyoqXG4gKiBXZSBjYWNoZWQgYWxsIHBhcnNlZCBVUkxzLiBBcyBvZiBub3cgdGhlcmUgYXJlIG5vIHVzZSBjYXNlc1xuICogb2YgQU1QIGRvY3MgdGhhdCB3b3VsZCBldmVyIHBhcnNlIGFuIGFjdHVhbCBsYXJnZSBudW1iZXIgb2YgVVJMcyxcbiAqIGJ1dCB3ZSBvZnRlbiBwYXJzZSB0aGUgc2FtZSBvbmUgb3ZlciBhbmQgb3ZlciBhZ2Fpbi5cbiAqIEB0eXBlIHtMcnVDYWNoZX1cbiAqL1xubGV0IGNhY2hlO1xuXG4vKiogQHByaXZhdGUgQGNvbnN0IE1hdGNoZXMgYW1wX2pzXyogcGFyYW1ldGVycyBpbiBxdWVyeSBzdHJpbmcuICovXG5jb25zdCBBTVBfSlNfUEFSQU1TX1JFR0VYID0gL1s/Jl1hbXBfanNbXiZdKi87XG5cbi8qKiBAcHJpdmF0ZSBAY29uc3QgTWF0Y2hlcyBhbXBfZ3NhIHBhcmFtZXRlcnMgaW4gcXVlcnkgc3RyaW5nLiAqL1xuY29uc3QgQU1QX0dTQV9QQVJBTVNfUkVHRVggPSAvWz8mXWFtcF9nc2FbXiZdKi87XG5cbi8qKiBAcHJpdmF0ZSBAY29uc3QgTWF0Y2hlcyBhbXBfciBwYXJhbWV0ZXJzIGluIHF1ZXJ5IHN0cmluZy4gKi9cbmNvbnN0IEFNUF9SX1BBUkFNU19SRUdFWCA9IC9bPyZdYW1wX3JbXiZdKi87XG5cbi8qKiBAcHJpdmF0ZSBAY29uc3QgTWF0Y2hlcyB1c3FwIHBhcmFtZXRlcnMgZnJvbSBnb29nIGV4cGVyaW1lbnQgaW4gcXVlcnkgc3RyaW5nLiAqL1xuY29uc3QgR09PR0xFX0VYUEVSSU1FTlRfUEFSQU1TX1JFR0VYID0gL1s/Jl11c3FwW14mXSovO1xuXG5jb25zdCBJTlZBTElEX1BST1RPQ09MUyA9IFtcbiAgLyplc2xpbnQgbm8tc2NyaXB0LXVybDogMCovICdqYXZhc2NyaXB0OicsXG4gIC8qZXNsaW50IG5vLXNjcmlwdC11cmw6IDAqLyAnZGF0YTonLFxuICAvKmVzbGludCBuby1zY3JpcHQtdXJsOiAwKi8gJ3Zic2NyaXB0OicsXG5dO1xuXG4vKiogQGNvbnN0IHtzdHJpbmd9ICovXG5leHBvcnQgY29uc3QgU09VUkNFX09SSUdJTl9QQVJBTSA9ICdfX2FtcF9zb3VyY2Vfb3JpZ2luJztcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBjb3JyZWN0IG9yaWdpbiBmb3IgYSBnaXZlbiB3aW5kb3cuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7c3RyaW5nfSBvcmlnaW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFdpbk9yaWdpbih3aW4pIHtcbiAgcmV0dXJuIHdpbi5vcmlnaW4gfHwgcGFyc2VVcmxEZXByZWNhdGVkKHdpbi5sb2NhdGlvbi5ocmVmKS5vcmlnaW47XG59XG5cbi8qKlxuICogUmV0dXJucyBhIExvY2F0aW9uLWxpa2Ugb2JqZWN0IGZvciB0aGUgZ2l2ZW4gVVJMLiBJZiBpdCBpcyByZWxhdGl2ZSxcbiAqIHRoZSBVUkwgZ2V0cyByZXNvbHZlZC5cbiAqIENvbnNpZGVyIHRoZSByZXR1cm5lZCBvYmplY3QgaW1tdXRhYmxlLiBUaGlzIGlzIGVuZm9yY2VkIGR1cmluZ1xuICogdGVzdGluZyBieSBmcmVlemluZyB0aGUgb2JqZWN0LlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X25vY2FjaGVcbiAqIEByZXR1cm4geyFMb2NhdGlvbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVXJsRGVwcmVjYXRlZCh1cmwsIG9wdF9ub2NhY2hlKSB7XG4gIGlmICghYSkge1xuICAgIGEgPSAvKiogQHR5cGUgeyFIVE1MQW5jaG9yRWxlbWVudH0gKi8gKHNlbGYuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpKTtcbiAgICBjYWNoZSA9IHNlbGYuVXJsQ2FjaGUgfHwgKHNlbGYuVXJsQ2FjaGUgPSBuZXcgTHJ1Q2FjaGUoMTAwKSk7XG4gIH1cblxuICByZXR1cm4gcGFyc2VVcmxXaXRoQShhLCB1cmwsIG9wdF9ub2NhY2hlID8gbnVsbCA6IGNhY2hlKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgTG9jYXRpb24tbGlrZSBvYmplY3QgZm9yIHRoZSBnaXZlbiBVUkwuIElmIGl0IGlzIHJlbGF0aXZlLFxuICogdGhlIFVSTCBnZXRzIHJlc29sdmVkLlxuICogQ29uc2lkZXIgdGhlIHJldHVybmVkIG9iamVjdCBpbW11dGFibGUuIFRoaXMgaXMgZW5mb3JjZWQgZHVyaW5nXG4gKiB0ZXN0aW5nIGJ5IGZyZWV6aW5nIHRoZSBvYmplY3QuXG4gKiBAcGFyYW0geyFIVE1MQW5jaG9yRWxlbWVudH0gYVxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHBhcmFtIHtMcnVDYWNoZT19IG9wdF9jYWNoZVxuICogQHJldHVybiB7IUxvY2F0aW9ufVxuICogQHJlc3RyaWN0ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVXJsV2l0aEEoYSwgdXJsLCBvcHRfY2FjaGUpIHtcbiAgaWYgKG9wdF9jYWNoZSAmJiBvcHRfY2FjaGUuaGFzKHVybCkpIHtcbiAgICByZXR1cm4gb3B0X2NhY2hlLmdldCh1cmwpO1xuICB9XG5cbiAgYS5ocmVmID0gdXJsO1xuXG4gIC8vIElFMTEgZG9lc24ndCBwcm92aWRlIGZ1bGwgVVJMIGNvbXBvbmVudHMgd2hlbiBwYXJzaW5nIHJlbGF0aXZlIFVSTHMuXG4gIC8vIEFzc2lnbmluZyB0byBpdHNlbGYgYWdhaW4gZG9lcyB0aGUgdHJpY2sgIzM0NDkuXG4gIGlmICghYS5wcm90b2NvbCkge1xuICAgIGEuaHJlZiA9IGEuaHJlZjtcbiAgfVxuXG4gIGNvbnN0IGluZm8gPSAvKiogQHR5cGUgeyFMb2NhdGlvbn0gKi8oe1xuICAgIGhyZWY6IGEuaHJlZixcbiAgICBwcm90b2NvbDogYS5wcm90b2NvbCxcbiAgICBob3N0OiBhLmhvc3QsXG4gICAgaG9zdG5hbWU6IGEuaG9zdG5hbWUsXG4gICAgcG9ydDogYS5wb3J0ID09ICcwJyA/ICcnIDogYS5wb3J0LFxuICAgIHBhdGhuYW1lOiBhLnBhdGhuYW1lLFxuICAgIHNlYXJjaDogYS5zZWFyY2gsXG4gICAgaGFzaDogYS5oYXNoLFxuICAgIG9yaWdpbjogbnVsbCwgLy8gU2V0IGJlbG93LlxuICB9KTtcblxuICAvLyBTb21lIElFMTEgc3BlY2lmaWMgcG9seWZpbGxzLlxuICAvLyAxKSBJRTExIHN0cmlwcyBvdXQgdGhlIGxlYWRpbmcgJy8nIGluIHRoZSBwYXRobmFtZS5cbiAgaWYgKGluZm8ucGF0aG5hbWVbMF0gIT09ICcvJykge1xuICAgIGluZm8ucGF0aG5hbWUgPSAnLycgKyBpbmZvLnBhdGhuYW1lO1xuICB9XG5cbiAgLy8gMikgRm9yIFVSTHMgd2l0aCBpbXBsaWNpdCBwb3J0cywgSUUxMSBwYXJzZXMgdG8gZGVmYXVsdCBwb3J0cyB3aGlsZVxuICAvLyBvdGhlciBicm93c2VycyBsZWF2ZSB0aGUgcG9ydCBmaWVsZCBlbXB0eS5cbiAgaWYgKChpbmZvLnByb3RvY29sID09ICdodHRwOicgJiYgaW5mby5wb3J0ID09IDgwKVxuICAgICAgfHwgKGluZm8ucHJvdG9jb2wgPT0gJ2h0dHBzOicgJiYgaW5mby5wb3J0ID09IDQ0MykpIHtcbiAgICBpbmZvLnBvcnQgPSAnJztcbiAgICBpbmZvLmhvc3QgPSBpbmZvLmhvc3RuYW1lO1xuICB9XG5cbiAgLy8gRm9yIGRhdGEgVVJJIGEub3JpZ2luIGlzIGVxdWFsIHRvIHRoZSBzdHJpbmcgJ251bGwnIHdoaWNoIGlzIG5vdCB1c2VmdWwuXG4gIC8vIFdlIGluc3RlYWQgcmV0dXJuIHRoZSBhY3R1YWwgb3JpZ2luIHdoaWNoIGlzIHRoZSBmdWxsIFVSTC5cbiAgaWYgKGEub3JpZ2luICYmIGEub3JpZ2luICE9ICdudWxsJykge1xuICAgIGluZm8ub3JpZ2luID0gYS5vcmlnaW47XG4gIH0gZWxzZSBpZiAoaW5mby5wcm90b2NvbCA9PSAnZGF0YTonIHx8ICFpbmZvLmhvc3QpIHtcbiAgICBpbmZvLm9yaWdpbiA9IGluZm8uaHJlZjtcbiAgfSBlbHNlIHtcbiAgICBpbmZvLm9yaWdpbiA9IGluZm8ucHJvdG9jb2wgKyAnLy8nICsgaW5mby5ob3N0O1xuICB9XG5cbiAgLy8gRnJlZXplIGR1cmluZyB0ZXN0aW5nIHRvIGF2b2lkIGFjY2lkZW50YWwgbXV0YXRpb24uXG4gIGNvbnN0IGZyb3plbiA9IChnZXRNb2RlKCkudGVzdCAmJiBPYmplY3QuZnJlZXplKSA/IE9iamVjdC5mcmVlemUoaW5mbykgOiBpbmZvO1xuXG4gIGlmIChvcHRfY2FjaGUpIHtcbiAgICBvcHRfY2FjaGUucHV0KHVybCwgZnJvemVuKTtcbiAgfVxuXG4gIHJldHVybiBmcm96ZW47XG59XG5cbi8qKlxuICogQXBwZW5kcyB0aGUgc3RyaW5nIGp1c3QgYmVmb3JlIHRoZSBmcmFnbWVudCBwYXJ0IChvciBvcHRpb25hbGx5XG4gKiB0byB0aGUgZnJvbnQgb2YgdGhlIHF1ZXJ5IHN0cmluZykgb2YgdGhlIFVSTC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXJhbVN0cmluZ1xuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2FkZFRvRnJvbnRcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGVuZEVuY29kZWRQYXJhbVN0cmluZ1RvVXJsKHVybCwgcGFyYW1TdHJpbmcsXG4gIG9wdF9hZGRUb0Zyb250KSB7XG4gIGlmICghcGFyYW1TdHJpbmcpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG4gIGNvbnN0IG1haW5BbmRGcmFnbWVudCA9IHVybC5zcGxpdCgnIycsIDIpO1xuICBjb25zdCBtYWluQW5kUXVlcnkgPSBtYWluQW5kRnJhZ21lbnRbMF0uc3BsaXQoJz8nLCAyKTtcblxuICBsZXQgbmV3VXJsID0gbWFpbkFuZFF1ZXJ5WzBdICsgKFxuICAgIG1haW5BbmRRdWVyeVsxXVxuICAgICAgPyAob3B0X2FkZFRvRnJvbnRcbiAgICAgICAgPyBgPyR7cGFyYW1TdHJpbmd9JiR7bWFpbkFuZFF1ZXJ5WzFdfWBcbiAgICAgICAgOiBgPyR7bWFpbkFuZFF1ZXJ5WzFdfSYke3BhcmFtU3RyaW5nfWApXG4gICAgICA6IGA/JHtwYXJhbVN0cmluZ31gKTtcbiAgbmV3VXJsICs9IG1haW5BbmRGcmFnbWVudFsxXSA/IGAjJHttYWluQW5kRnJhZ21lbnRbMV19YCA6ICcnO1xuICByZXR1cm4gbmV3VXJsO1xufVxuLyoqXG4gKiBBcHBlbmRzIGEgcXVlcnkgc3RyaW5nIGZpZWxkIGFuZCB2YWx1ZSB0byBhIHVybC4gYGtleWAgYW5kIGB2YWx1ZWBcbiAqIHdpbGwgYmUgcmFuIHRocm91Z2ggYGVuY29kZVVSSUNvbXBvbmVudGAgYmVmb3JlIGFwcGVuZGluZy5cbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2FkZFRvRnJvbnRcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFBhcmFtVG9VcmwodXJsLCBrZXksIHZhbHVlLCBvcHRfYWRkVG9Gcm9udCkge1xuICBjb25zdCBmaWVsZCA9IGAke2VuY29kZVVSSUNvbXBvbmVudChrZXkpfT0ke2VuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSl9YDtcbiAgcmV0dXJuIGFwcGVuZEVuY29kZWRQYXJhbVN0cmluZ1RvVXJsKHVybCwgZmllbGQsIG9wdF9hZGRUb0Zyb250KTtcbn1cblxuLyoqXG4gKiBBcHBlbmRzIHF1ZXJ5IHN0cmluZyBmaWVsZHMgYW5kIHZhbHVlcyB0byBhIHVybC4gVGhlIGBwYXJhbXNgIG9iamVjdHMnXG4gKiBga2V5YHMgYW5kIGB2YWx1ZWBzIHdpbGwgYmUgdHJhbnNmb3JtZWQgaW50byBxdWVyeSBzdHJpbmcga2V5cy92YWx1ZXMuXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gKiBAcGFyYW0geyFKc29uT2JqZWN0PHN0cmluZywgc3RyaW5nfCFBcnJheTxzdHJpbmc+Pn0gcGFyYW1zXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRQYXJhbXNUb1VybCh1cmwsIHBhcmFtcykge1xuICByZXR1cm4gYXBwZW5kRW5jb2RlZFBhcmFtU3RyaW5nVG9VcmwodXJsLCBzZXJpYWxpemVRdWVyeVN0cmluZyhwYXJhbXMpKTtcbn1cblxuLyoqXG4gKiBTZXJpYWxpemVzIHRoZSBwYXNzZWQgcGFyYW1ldGVyIG1hcCBpbnRvIGEgcXVlcnkgc3RyaW5nIHdpdGggYm90aCBrZXlzXG4gKiBhbmQgdmFsdWVzIGVuY29kZWQuXG4gKiBAcGFyYW0geyFKc29uT2JqZWN0PHN0cmluZywgc3RyaW5nfCFBcnJheTxzdHJpbmc+Pn0gcGFyYW1zXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemVRdWVyeVN0cmluZyhwYXJhbXMpIHtcbiAgY29uc3QgcyA9IFtdO1xuICBmb3IgKGNvbnN0IGsgaW4gcGFyYW1zKSB7XG4gICAgY29uc3QgdiA9IHBhcmFtc1trXTtcbiAgICBpZiAodiA9PSBudWxsKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9IGVsc2UgaWYgKGlzQXJyYXkodikpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBzdiA9IC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAodltpXSk7XG4gICAgICAgIHMucHVzaChgJHtlbmNvZGVVUklDb21wb25lbnQoayl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHN2KX1gKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc3YgPSAvKiogQHR5cGUge3N0cmluZ30gKi8gKHYpO1xuICAgICAgcy5wdXNoKGAke2VuY29kZVVSSUNvbXBvbmVudChrKX09JHtlbmNvZGVVUklDb21wb25lbnQoc3YpfWApO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcy5qb2luKCcmJyk7XG59XG5cbi8qKlxuICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIFVSTCBpcyBzZWN1cmU6IGVpdGhlciBIVFRQUyBvciBsb2NhbGhvc3QgKGZvciB0ZXN0aW5nKS5cbiAqIEBwYXJhbSB7c3RyaW5nfCFMb2NhdGlvbn0gdXJsXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTZWN1cmVVcmxEZXByZWNhdGVkKHVybCkge1xuICBpZiAodHlwZW9mIHVybCA9PSAnc3RyaW5nJykge1xuICAgIHVybCA9IHBhcnNlVXJsRGVwcmVjYXRlZCh1cmwpO1xuICB9XG4gIHJldHVybiAodXJsLnByb3RvY29sID09ICdodHRwczonIHx8XG4gICAgICB1cmwuaG9zdG5hbWUgPT0gJ2xvY2FsaG9zdCcgfHxcbiAgICAgIGVuZHNXaXRoKHVybC5ob3N0bmFtZSwgJy5sb2NhbGhvc3QnKSk7XG59XG5cbi8qKlxuICogQXNzZXJ0cyB0aGF0IGEgZ2l2ZW4gdXJsIGlzIEhUVFBTIG9yIHByb3RvY29sIHJlbGF0aXZlLiBJdCdzIGEgdXNlci1sZXZlbFxuICogYXNzZXJ0LlxuICpcbiAqIFByb3ZpZGVzIGFuIGV4Y2VwdGlvbiBmb3IgbG9jYWxob3N0LlxuICpcbiAqIEBwYXJhbSB7P3N0cmluZ3x1bmRlZmluZWR9IHVybFN0cmluZ1xuICogQHBhcmFtIHshRWxlbWVudHxzdHJpbmd9IGVsZW1lbnRDb250ZXh0IEVsZW1lbnQgd2hlcmUgdGhlIHVybCB3YXMgZm91bmQuXG4gKiBAcGFyYW0ge3N0cmluZz19IHNvdXJjZU5hbWUgVXNlZCBmb3IgZXJyb3IgbWVzc2FnZXMuXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRIdHRwc1VybChcbiAgdXJsU3RyaW5nLCBlbGVtZW50Q29udGV4dCwgc291cmNlTmFtZSA9ICdzb3VyY2UnKSB7XG4gIHVzZXIoKS5hc3NlcnQodXJsU3RyaW5nICE9IG51bGwsICclcyAlcyBtdXN0IGJlIGF2YWlsYWJsZScsXG4gICAgICBlbGVtZW50Q29udGV4dCwgc291cmNlTmFtZSk7XG4gIC8vIChlcndpbm0sICM0NTYwKTogdHlwZSBjYXN0IG5lY2Vzc2FyeSB1bnRpbCAjNDU2MCBpcyBmaXhlZC5cbiAgY29uc3QgdGhlVXJsU3RyaW5nID0gLyoqIEB0eXBlIHtzdHJpbmd9ICovICh1cmxTdHJpbmcpO1xuICB1c2VyKCkuYXNzZXJ0KGlzU2VjdXJlVXJsRGVwcmVjYXRlZCh0aGVVcmxTdHJpbmcpIHx8IC9eKFxcL1xcLykvLnRlc3QodGhlVXJsU3RyaW5nKSxcbiAgICAgICclcyAlcyBtdXN0IHN0YXJ0IHdpdGggJyArXG4gICAgICAnXCJodHRwczovL1wiIG9yIFwiLy9cIiBvciBiZSByZWxhdGl2ZSBhbmQgc2VydmVkIGZyb20gJyArXG4gICAgICAnZWl0aGVyIGh0dHBzIG9yIGZyb20gbG9jYWxob3N0LiBJbnZhbGlkIHZhbHVlOiAlcycsXG4gICAgICBlbGVtZW50Q29udGV4dCwgc291cmNlTmFtZSwgdGhlVXJsU3RyaW5nKTtcbiAgcmV0dXJuIHRoZVVybFN0cmluZztcbn1cblxuLyoqXG4gKiBBc3NlcnRzIHRoYXQgYSBnaXZlbiB1cmwgaXMgYW4gYWJzb2x1dGUgSFRUUCBvciBIVFRQUyBVUkwuXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsU3RyaW5nXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRBYnNvbHV0ZUh0dHBPckh0dHBzVXJsKHVybFN0cmluZykge1xuICB1c2VyKCkuYXNzZXJ0KC9eaHR0cHM/XFw6L2kudGVzdCh1cmxTdHJpbmcpLFxuICAgICAgJ1VSTCBtdXN0IHN0YXJ0IHdpdGggXCJodHRwOi8vXCIgb3IgXCJodHRwczovL1wiLiBJbnZhbGlkIHZhbHVlOiAlcycsXG4gICAgICB1cmxTdHJpbmcpO1xuICByZXR1cm4gcGFyc2VVcmxEZXByZWNhdGVkKHVybFN0cmluZykuaHJlZjtcbn1cblxuXG4vKipcbiAqIFBhcnNlcyB0aGUgcXVlcnkgc3RyaW5nIG9mIGFuIFVSTC4gVGhpcyBtZXRob2QgcmV0dXJucyBhIHNpbXBsZSBrZXkvdmFsdWVcbiAqIG1hcC4gSWYgdGhlcmUgYXJlIGR1cGxpY2F0ZSBrZXlzIHRoZSBsYXRlc3QgdmFsdWUgaXMgcmV0dXJuZWQuXG4gKlxuICogVGhpcyBmdW5jdGlvbiBpcyBpbXBsZW1lbnRlZCBpbiBhIHNlcGFyYXRlIGZpbGUgdG8gYXZvaWQgYSBjaXJjdWxhclxuICogZGVwZW5kZW5jeS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcXVlcnlTdHJpbmdcbiAqIEByZXR1cm4geyFKc29uT2JqZWN0fVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VRdWVyeVN0cmluZyhxdWVyeVN0cmluZykge1xuICByZXR1cm4gcGFyc2VRdWVyeVN0cmluZ18ocXVlcnlTdHJpbmcpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIFVSTCB3aXRob3V0IGZyYWdtZW50LiBJZiBVUkwgZG9lc24ndCBjb250YWluIGZyYWdtZW50LCB0aGUgc2FtZVxuICogc3RyaW5nIGlzIHJldHVybmVkLlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRnJhZ21lbnQodXJsKSB7XG4gIGNvbnN0IGluZGV4ID0gdXJsLmluZGV4T2YoJyMnKTtcbiAgaWYgKGluZGV4ID09IC0xKSB7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuICByZXR1cm4gdXJsLnN1YnN0cmluZygwLCBpbmRleCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZnJhZ21lbnQgZnJvbSB0aGUgVVJMLiBJZiB0aGUgVVJMIGRvZXNuJ3QgY29udGFpbiBmcmFnbWVudCxcbiAqIHRoZSBlbXB0eSBzdHJpbmcgaXMgcmV0dXJuZWQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGcmFnbWVudCh1cmwpIHtcbiAgY29uc3QgaW5kZXggPSB1cmwuaW5kZXhPZignIycpO1xuICBpZiAoaW5kZXggPT0gLTEpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgcmV0dXJuIHVybC5zdWJzdHJpbmcoaW5kZXgpO1xufVxuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciB0aGUgVVJMIGhhcyB0aGUgb3JpZ2luIG9mIGEgcHJveHkuXG4gKiBAcGFyYW0ge3N0cmluZ3whTG9jYXRpb259IHVybCBVUkwgb2YgYW4gQU1QIGRvY3VtZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzUHJveHlPcmlnaW4odXJsKSB7XG4gIGlmICh0eXBlb2YgdXJsID09ICdzdHJpbmcnKSB7XG4gICAgdXJsID0gcGFyc2VVcmxEZXByZWNhdGVkKHVybCk7XG4gIH1cbiAgcmV0dXJuIHVybHMuY2RuUHJveHlSZWdleC50ZXN0KHVybC5vcmlnaW4pO1xufVxuXG4vKipcbiAqIEZvciBwcm94eS1vcmlnaW4gVVJMcywgcmV0dXJucyB0aGUgc2VydmluZyB0eXBlLiBPdGhlcndpc2UsIHJldHVybnMgbnVsbC5cbiAqIEUuZy4sICdodHRwczovL2FtcC1jb20uY2RuLmFtcHByb2plY3Qub3JnL2Evcy9hbXAuY29tL2FtcF9kb2N1bWVudC5odG1sJ1xuICogcmV0dXJucyAnYScuXG4gKiBAcGFyYW0ge3N0cmluZ3whTG9jYXRpb259IHVybCBVUkwgb2YgYW4gQU1QIGRvY3VtZW50LlxuICogQHJldHVybiB7P3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFByb3h5U2VydmluZ1R5cGUodXJsKSB7XG4gIGlmICh0eXBlb2YgdXJsID09ICdzdHJpbmcnKSB7XG4gICAgdXJsID0gcGFyc2VVcmxEZXByZWNhdGVkKHVybCk7XG4gIH1cbiAgaWYgKCFpc1Byb3h5T3JpZ2luKHVybCkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBwYXRoID0gdXJsLnBhdGhuYW1lLnNwbGl0KCcvJywgMik7XG4gIHJldHVybiBwYXRoWzFdO1xufVxuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciB0aGUgVVJMIG9yaWdpbiBpcyBsb2NhbGhvc3QuXG4gKiBAcGFyYW0ge3N0cmluZ3whTG9jYXRpb259IHVybCBVUkwgb2YgYW4gQU1QIGRvY3VtZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTG9jYWxob3N0T3JpZ2luKHVybCkge1xuICBpZiAodHlwZW9mIHVybCA9PSAnc3RyaW5nJykge1xuICAgIHVybCA9IHBhcnNlVXJsRGVwcmVjYXRlZCh1cmwpO1xuICB9XG4gIHJldHVybiB1cmxzLmxvY2FsaG9zdFJlZ2V4LnRlc3QodXJsLm9yaWdpbik7XG59XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSBVUkwgaGFzIHZhbGlkIHByb3RvY29sLlxuICogRGVlcCBsaW5rIHByb3RvY29sIGlzIHZhbGlkLCBidXQgbm90IGphdmFzY3JpcHQgZXRjLlxuICogQHBhcmFtIHtzdHJpbmd8IUxvY2F0aW9ufSB1cmxcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1Byb3RvY29sVmFsaWQodXJsKSB7XG4gIGlmICghdXJsKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKHR5cGVvZiB1cmwgPT0gJ3N0cmluZycpIHtcbiAgICB1cmwgPSBwYXJzZVVybERlcHJlY2F0ZWQodXJsKTtcbiAgfVxuICByZXR1cm4gIUlOVkFMSURfUFJPVE9DT0xTLmluY2x1ZGVzKHVybC5wcm90b2NvbCk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIFVSTCB3aXRob3V0IEFNUCBKUyBwYXJhbWV0ZXJzLlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQW1wSnNQYXJhbXNGcm9tVXJsKHVybCkge1xuICBjb25zdCBwYXJzZWQgPSBwYXJzZVVybERlcHJlY2F0ZWQodXJsKTtcbiAgY29uc3Qgc2VhcmNoID0gcmVtb3ZlQW1wSnNQYXJhbXNGcm9tU2VhcmNoKHBhcnNlZC5zZWFyY2gpO1xuICByZXR1cm4gcGFyc2VkLm9yaWdpbiArIHBhcnNlZC5wYXRobmFtZSArIHNlYXJjaCArIHBhcnNlZC5oYXNoO1xuXG59XG5cbi8qKlxuICogUmV0dXJucyBhIFVSTCB3aXRob3V0IGEgcXVlcnkgc3RyaW5nLlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlU2VhcmNoKHVybCkge1xuICBjb25zdCBpbmRleCA9IHVybC5pbmRleE9mKCc/Jyk7XG4gIGlmIChpbmRleCA9PSAtMSkge1xuICAgIHJldHVybiB1cmw7XG4gIH1cbiAgY29uc3QgZnJhZ21lbnQgPSBnZXRGcmFnbWVudCh1cmwpO1xuICByZXR1cm4gdXJsLnN1YnN0cmluZygwLCBpbmRleCkgKyBmcmFnbWVudDtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIHBhcmFtZXRlcnMgdGhhdCBzdGFydCB3aXRoIGFtcCBqcyBwYXJhbWV0ZXIgcGF0dGVybiBhbmQgcmV0dXJucyB0aGVcbiAqIG5ldyBzZWFyY2ggc3RyaW5nLlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFNlYXJjaFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiByZW1vdmVBbXBKc1BhcmFtc0Zyb21TZWFyY2godXJsU2VhcmNoKSB7XG4gIGlmICghdXJsU2VhcmNoIHx8IHVybFNlYXJjaCA9PSAnPycpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgY29uc3Qgc2VhcmNoID0gdXJsU2VhcmNoXG4gICAgICAucmVwbGFjZShBTVBfSlNfUEFSQU1TX1JFR0VYLCAnJylcbiAgICAgIC5yZXBsYWNlKEFNUF9HU0FfUEFSQU1TX1JFR0VYLCAnJylcbiAgICAgIC5yZXBsYWNlKEFNUF9SX1BBUkFNU19SRUdFWCwgJycpXG4gICAgICAucmVwbGFjZShHT09HTEVfRVhQRVJJTUVOVF9QQVJBTVNfUkVHRVgsICcnKVxuICAgICAgLnJlcGxhY2UoL15bPyZdLywgJycpOyAvLyBSZW1vdmVzIGZpcnN0ID8gb3IgJi5cbiAgcmV0dXJuIHNlYXJjaCA/ICc/JyArIHNlYXJjaCA6ICcnO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHNvdXJjZSBVUkwgb2YgYW4gQU1QIGRvY3VtZW50IGZvciBkb2N1bWVudHMgc2VydmVkXG4gKiBvbiBhIHByb3h5IG9yaWdpbiBvciBkaXJlY3RseS5cbiAqIEBwYXJhbSB7c3RyaW5nfCFMb2NhdGlvbn0gdXJsIFVSTCBvZiBhbiBBTVAgZG9jdW1lbnQuXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTb3VyY2VVcmwodXJsKSB7XG4gIGlmICh0eXBlb2YgdXJsID09ICdzdHJpbmcnKSB7XG4gICAgdXJsID0gcGFyc2VVcmxEZXByZWNhdGVkKHVybCk7XG4gIH1cblxuICAvLyBOb3QgYSBwcm94eSBVUkwgLSByZXR1cm4gdGhlIFVSTCBpdHNlbGYuXG4gIGlmICghaXNQcm94eU9yaWdpbih1cmwpKSB7XG4gICAgcmV0dXJuIHVybC5ocmVmO1xuICB9XG5cbiAgLy8gQSBwcm94eSBVUkwuXG4gIC8vIEV4YW1wbGUgcGF0aCB0aGF0IGlzIGJlaW5nIG1hdGNoZWQgaGVyZS5cbiAgLy8gaHR0cHM6Ly9jZG4uYW1wcHJvamVjdC5vcmcvYy9zL3d3dy5vcmlnaW4uY29tL2Zvby9cbiAgLy8gVGhlIC9zLyBpcyBvcHRpb25hbCBhbmQgc2lnbmFscyBhIHNlY3VyZSBvcmlnaW4uXG4gIGNvbnN0IHBhdGggPSB1cmwucGF0aG5hbWUuc3BsaXQoJy8nKTtcbiAgY29uc3QgcHJlZml4ID0gcGF0aFsxXTtcbiAgdXNlcigpLmFzc2VydChTRVJWSU5HX1RZUEVfUFJFRklYW3ByZWZpeF0sXG4gICAgICAnVW5rbm93biBwYXRoIHByZWZpeCBpbiB1cmwgJXMnLCB1cmwuaHJlZik7XG4gIGNvbnN0IGRvbWFpbk9ySHR0cHNTaWduYWwgPSBwYXRoWzJdO1xuICBjb25zdCBvcmlnaW4gPSBkb21haW5Pckh0dHBzU2lnbmFsID09ICdzJ1xuICAgID8gJ2h0dHBzOi8vJyArIGRlY29kZVVSSUNvbXBvbmVudChwYXRoWzNdKVxuICAgIDogJ2h0dHA6Ly8nICsgZGVjb2RlVVJJQ29tcG9uZW50KGRvbWFpbk9ySHR0cHNTaWduYWwpO1xuICAvLyBTYW5pdHkgdGVzdCB0aGF0IHdoYXQgd2UgZm91bmQgbG9va3MgbGlrZSBhIGRvbWFpbi5cbiAgdXNlcigpLmFzc2VydChvcmlnaW4uaW5kZXhPZignLicpID4gMCwgJ0V4cGVjdGVkIGEgLiBpbiBvcmlnaW4gJXMnLCBvcmlnaW4pO1xuICBwYXRoLnNwbGljZSgxLCBkb21haW5Pckh0dHBzU2lnbmFsID09ICdzJyA/IDMgOiAyKTtcbiAgcmV0dXJuIG9yaWdpbiArIHBhdGguam9pbignLycpICtcbiAgICAgIHJlbW92ZUFtcEpzUGFyYW1zRnJvbVNlYXJjaCh1cmwuc2VhcmNoKSArICh1cmwuaGFzaCB8fCAnJyk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgc291cmNlIG9yaWdpbiBvZiBhbiBBTVAgZG9jdW1lbnQgZm9yIGRvY3VtZW50cyBzZXJ2ZWRcbiAqIG9uIGEgcHJveHkgb3JpZ2luIG9yIGRpcmVjdGx5LlxuICogQHBhcmFtIHtzdHJpbmd8IUxvY2F0aW9ufSB1cmwgVVJMIG9mIGFuIEFNUCBkb2N1bWVudC5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHNvdXJjZSBvcmlnaW4gb2YgdGhlIFVSTC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNvdXJjZU9yaWdpbih1cmwpIHtcbiAgcmV0dXJuIHBhcnNlVXJsRGVwcmVjYXRlZChnZXRTb3VyY2VVcmwodXJsKSkub3JpZ2luO1xufVxuXG4vKipcbiAqIFJldHVybnMgYWJzb2x1dGUgVVJMIHJlc29sdmVkIGJhc2VkIG9uIHRoZSByZWxhdGl2ZSBVUkwgYW5kIHRoZSBiYXNlLlxuICogQHBhcmFtIHtzdHJpbmd9IHJlbGF0aXZlVXJsU3RyaW5nXG4gKiBAcGFyYW0ge3N0cmluZ3whTG9jYXRpb259IGJhc2VVcmxcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVSZWxhdGl2ZVVybChyZWxhdGl2ZVVybFN0cmluZywgYmFzZVVybCkge1xuICBpZiAodHlwZW9mIGJhc2VVcmwgPT0gJ3N0cmluZycpIHtcbiAgICBiYXNlVXJsID0gcGFyc2VVcmxEZXByZWNhdGVkKGJhc2VVcmwpO1xuICB9XG4gIGlmICh0eXBlb2YgVVJMID09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gbmV3IFVSTChyZWxhdGl2ZVVybFN0cmluZywgYmFzZVVybC5ocmVmKS50b1N0cmluZygpO1xuICB9XG4gIHJldHVybiByZXNvbHZlUmVsYXRpdmVVcmxGYWxsYmFja18ocmVsYXRpdmVVcmxTdHJpbmcsIGJhc2VVcmwpO1xufVxuXG4vKipcbiAqIEZhbGxiYWNrIGZvciBVUkwgcmVzb2x2ZXIgd2hlbiBVUkwgY2xhc3MgaXMgbm90IGF2YWlsYWJsZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSByZWxhdGl2ZVVybFN0cmluZ1xuICogQHBhcmFtIHtzdHJpbmd8IUxvY2F0aW9ufSBiYXNlVXJsXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKiBAcHJpdmF0ZSBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZVJlbGF0aXZlVXJsRmFsbGJhY2tfKHJlbGF0aXZlVXJsU3RyaW5nLCBiYXNlVXJsKSB7XG4gIGlmICh0eXBlb2YgYmFzZVVybCA9PSAnc3RyaW5nJykge1xuICAgIGJhc2VVcmwgPSBwYXJzZVVybERlcHJlY2F0ZWQoYmFzZVVybCk7XG4gIH1cbiAgcmVsYXRpdmVVcmxTdHJpbmcgPSByZWxhdGl2ZVVybFN0cmluZy5yZXBsYWNlKC9cXFxcL2csICcvJyk7XG4gIGNvbnN0IHJlbGF0aXZlVXJsID0gcGFyc2VVcmxEZXByZWNhdGVkKHJlbGF0aXZlVXJsU3RyaW5nKTtcblxuICAvLyBBYnNvbHV0ZSBVUkwuXG4gIGlmIChzdGFydHNXaXRoKHJlbGF0aXZlVXJsU3RyaW5nLnRvTG93ZXJDYXNlKCksIHJlbGF0aXZlVXJsLnByb3RvY29sKSkge1xuICAgIHJldHVybiByZWxhdGl2ZVVybC5ocmVmO1xuICB9XG5cbiAgLy8gUHJvdG9jb2wtcmVsYXRpdmUgVVJMLlxuICBpZiAoc3RhcnRzV2l0aChyZWxhdGl2ZVVybFN0cmluZywgJy8vJykpIHtcbiAgICByZXR1cm4gYmFzZVVybC5wcm90b2NvbCArIHJlbGF0aXZlVXJsU3RyaW5nO1xuICB9XG5cbiAgLy8gQWJzb2x1dGUgcGF0aC5cbiAgaWYgKHN0YXJ0c1dpdGgocmVsYXRpdmVVcmxTdHJpbmcsICcvJykpIHtcbiAgICByZXR1cm4gYmFzZVVybC5vcmlnaW4gKyByZWxhdGl2ZVVybFN0cmluZztcbiAgfVxuXG4gIC8vIFJlbGF0aXZlIHBhdGguXG4gIHJldHVybiBiYXNlVXJsLm9yaWdpbiArIGJhc2VVcmwucGF0aG5hbWUucmVwbGFjZSgvXFwvW14vXSokLywgJy8nKVxuICAgICAgKyByZWxhdGl2ZVVybFN0cmluZztcbn1cblxuXG4vKipcbiAqIEFkZCBcIl9fYW1wX3NvdXJjZV9vcmlnaW5cIiBxdWVyeSBwYXJhbWV0ZXIgdG8gdGhlIFVSTC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb3JzVXJsKHdpbiwgdXJsKSB7XG4gIGNoZWNrQ29yc1VybCh1cmwpO1xuICBjb25zdCBzb3VyY2VPcmlnaW4gPSBnZXRTb3VyY2VPcmlnaW4od2luLmxvY2F0aW9uLmhyZWYpO1xuICByZXR1cm4gYWRkUGFyYW1Ub1VybCh1cmwsIFNPVVJDRV9PUklHSU5fUEFSQU0sIHNvdXJjZU9yaWdpbik7XG59XG5cblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIHVybCBoYXMgX19hbXBfc291cmNlX29yaWdpbiBhbmQgdGhyb3dzIGlmIGl0IGRvZXMuXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjaGVja0NvcnNVcmwodXJsKSB7XG4gIGNvbnN0IHBhcnNlZFVybCA9IHBhcnNlVXJsRGVwcmVjYXRlZCh1cmwpO1xuICBjb25zdCBxdWVyeSA9IHBhcnNlUXVlcnlTdHJpbmcocGFyc2VkVXJsLnNlYXJjaCk7XG4gIHVzZXIoKS5hc3NlcnQoIShTT1VSQ0VfT1JJR0lOX1BBUkFNIGluIHF1ZXJ5KSxcbiAgICAgICdTb3VyY2Ugb3JpZ2luIGlzIG5vdCBhbGxvd2VkIGluICVzJywgdXJsKTtcbn1cblxuLyoqXG4gKiBUcmllcyB0byBkZWNvZGUgYSBVUkkgY29tcG9uZW50LCBmYWxsaW5nIGJhY2sgdG8gb3B0X2ZhbGxiYWNrIChvciBhbiBlbXB0eVxuICogc3RyaW5nKVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb21wb25lbnRcbiAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X2ZhbGxiYWNrXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cnlEZWNvZGVVcmlDb21wb25lbnQoY29tcG9uZW50LCBvcHRfZmFsbGJhY2spIHtcbiAgcmV0dXJuIHRyeURlY29kZVVyaUNvbXBvbmVudF8oY29tcG9uZW50LCBvcHRfZmFsbGJhY2spO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cblxuLyoqXG4gKiBDb21wYXJlcyBpZiB0d28gYXJyYXlzIGNvbnRhaW5zIGV4YWN0bHkgc2FtZSBlbGVtZW50cyBvZiBzYW1lIG51bWJlclxuICogb2Ygc2FtZSBvcmRlci5cbiAqIE5vdGljZSB0aGF0IGl0IGRvZXMgTk9UIGhhbmRsZSBOYU4gY2FzZSBhcyBleHBlY3RlZFxuICpcbiAqIEBwYXJhbSB7IUFycmF5PFQ+fSBhcnIxXG4gKiBAcGFyYW0geyFBcnJheTxUPn0gYXJyMlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcmVFcXVhbE9yZGVyZWQoYXJyMSwgYXJyMikge1xuICBpZiAoYXJyMS5sZW5ndGggIT09IGFycjIubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIxLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGFycjFbaV0gIT09IGFycjJbaV0pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBBIGJpdCBsaWtlIEFycmF5I2ZpbHRlciwgYnV0IHJlbW92ZXMgZWxlbWVudHMgdGhhdCBmaWx0ZXIgZmFsc2UgZnJvbSB0aGVcbiAqIGFycmF5LiBSZXR1cm5zIHRoZSBmaWx0ZXJlZCBpdGVtcy5cbiAqXG4gKiBAcGFyYW0geyFBcnJheTxUPn0gYXJyYXlcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oVCwgbnVtYmVyLCAhQXJyYXk8VD4pOmJvb2xlYW59IGZpbHRlclxuICogQHJldHVybiB7IUFycmF5PFQ+fVxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlclNwbGljZShhcnJheSwgZmlsdGVyKSB7XG4gIGNvbnN0IHNwbGljZSA9IFtdO1xuICBsZXQgaW5kZXggPSAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgaXRlbSA9IGFycmF5W2ldO1xuICAgIGlmIChmaWx0ZXIoaXRlbSwgaSwgYXJyYXkpKSB7XG4gICAgICBpZiAoaW5kZXggPCBpKSB7XG4gICAgICAgIGFycmF5W2luZGV4XSA9IGl0ZW07XG4gICAgICB9XG4gICAgICBpbmRleCsrO1xuICAgIH0gZWxzZSB7XG4gICAgICBzcGxpY2UucHVzaChpdGVtKTtcbiAgICB9XG4gIH1cblxuICBpZiAoaW5kZXggPCBhcnJheS5sZW5ndGgpIHtcbiAgICBhcnJheS5sZW5ndGggPSBpbmRleDtcbiAgfVxuXG4gIHJldHVybiBzcGxpY2U7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgbWF0Y2hpbmcgdGhlIHByZWRpY2F0ZS5cbiAqIExpa2UgQXJyYXkjZmluZEluZGV4LlxuICpcbiAqIEBwYXJhbSB7IUFycmF5PFQ+fSBhcnJheVxuICogQHBhcmFtIHtmdW5jdGlvbihULCBudW1iZXIsICFBcnJheTxUPik6Ym9vbGVhbn0gcHJlZGljYXRlXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZEluZGV4KGFycmF5LCBwcmVkaWNhdGUpIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChwcmVkaWNhdGUoYXJyYXlbaV0sIGksIGFycmF5KSkge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICB9XG4gIHJldHVybiAtMTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgZ2l2ZW4gaXRlcmF0b3IgdG8gYW4gYXJyYXkuXG4gKlxuICogQHBhcmFtIHshSXRlcmF0b3I8VD59IGl0ZXJhdG9yXG4gKiBAcmV0dXJuIHtBcnJheTxUPn1cbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tSXRlcmF0b3IoaXRlcmF0b3IpIHtcbiAgY29uc3QgYXJyYXkgPSBbXTtcbiAgZm9yIChsZXQgZSA9IGl0ZXJhdG9yLm5leHQoKTsgIWUuZG9uZTsgZSA9IGl0ZXJhdG9yLm5leHQoKSkge1xuICAgIGFycmF5LnB1c2goZS52YWx1ZSk7XG4gIH1cbiAgcmV0dXJuIGFycmF5O1xufVxuXG4vKipcbiAqIEFkZHMgaXRlbSB0byBhcnJheSBpZiBpdCBpcyBub3QgYWxyZWFkeSBwcmVzZW50LlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8VD59IGFycmF5XG4gKiBAcGFyYW0ge1R9IGl0ZW1cbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwdXNoSWZOb3RFeGlzdChhcnJheSwgaXRlbSkge1xuICBpZiAoYXJyYXkuaW5kZXhPZihpdGVtKSA8IDApIHtcbiAgICBhcnJheS5wdXNoKGl0ZW0pO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtzdHJpbmdIYXNoMzJ9IGZyb20gJy4uL3N0cmluZyc7XG5cblxuLyoqXG4gKiBHZXRzIGEgc3RyaW5nIG9mIGNvbmNhdGVuYXRlZCBlbGVtZW50IG5hbWVzIGFuZCByZWxhdGl2ZSBwb3NpdGlvbnNcbiAqIG9mIHRoZSBET00gZWxlbWVudCBhbmQgaXRzIHBhcmVudEVsZW1lbnQncyAodXAgdG8gMjUpLiAgUmVsYXRpdmUgcG9zaXRpb25cbiAqIGlzIHRoZSBpbmRleCBvZiBub2RlcyB3aXRoIHRoaXMgdGFnIHdpdGhpbiB0aGUgcGFyZW50J3MgY2hpbGRyZW4uXG4gKiBUaGUgb3JkZXIgaXMgZnJvbSB0aGUgaW5uZXIgdG8gb3V0ZXIgbm9kZXMgaW4gRE9NIGhpZXJhcmNoeS5cbiAqXG4gKiBJZiBhIERPTSBoaWVyYXJjaHkgaXMgdGhlIGZvbGxvd2luZzpcbiAqXG4gKiA8ZGl2IGlkPSdpZDEnIC4uLj5cbiAqICAgPGRpdiBpZD0naWQyJyAuLi4+XG4gKiAgICAgPHRhYmxlIC4uLj4gICAgICAgLy8gdGFibGU6MFxuICogICAgICAgPHRyPiAgICAgICAgICAgIC8vIHRyOjBcbiAqICAgICAgICAgPHRkPi4uLjwvdGQ+ICAvLyB0ZDowXG4gKiAgICAgICAgIDx0ZD4gICAgICAgICAgLy8gdGQ6MVxuICogICAgICAgICAgIDxhbXAtYWQgLi4uPjwvYW1wLWFkPlxuICogICAgICAgICA8L3RkPlxuICogICAgICAgPC90cj5cbiAqICAgICAgIDx0cj4uLi48L3RyPiAgICAvLyB0cjoxXG4gKiAgICAgPC90YWJsZT5cbiAqICAgPC9kaXY+XG4gKiA8L2Rpdj5cbiAqXG4gKiBXaXRoIHRoZSBhbXAtYWQgZWxlbWVudCBwYXNzZWQgaW46XG4gKiAnYW1wLWFkLjAsdGQuMSx0ci4wLHRhYmxlLjAsZGl2L2lkMi4wLGRpdi9pZDEuMCdcbiAqXG4gKiBOb3RlOiAyNSBpcyBjaG9zZW4gYXJiaXRyYXJpbHkuXG4gKlxuICogQHBhcmFtIHs/RWxlbWVudH0gZWxlbWVudCBET00gbm9kZSBmcm9tIHdoaWNoIHRvIGdldCBmaW5nZXJwcmludC5cbiAqIEByZXR1cm4ge3N0cmluZ30gQ29uY2F0ZW5hdGVkIGVsZW1lbnQgaWRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZG9tRmluZ2VycHJpbnRQbGFpbihlbGVtZW50KSB7XG4gIGNvbnN0IGlkcyA9IFtdO1xuICBsZXQgbGV2ZWwgPSAwO1xuICB3aGlsZSAoZWxlbWVudCAmJiBlbGVtZW50Lm5vZGVUeXBlID09IC8qIGVsZW1lbnQgKi8gMSAmJiBsZXZlbCA8IDI1KSB7XG4gICAgbGV0IGlkID0gJyc7XG4gICAgaWYgKGVsZW1lbnQuaWQpIHtcbiAgICAgIGlkID0gYC8ke2VsZW1lbnQuaWR9YDtcbiAgICB9XG4gICAgY29uc3Qgbm9kZU5hbWUgPSBlbGVtZW50Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgaWRzLnB1c2goYCR7bm9kZU5hbWV9JHtpZH0ke2luZGV4V2l0aGluUGFyZW50KGVsZW1lbnQpfWApO1xuICAgIGxldmVsKys7XG4gICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgfVxuICByZXR1cm4gaWRzLmpvaW4oKTtcbn1cblxuXG5leHBvcnQgY2xhc3MgRG9tRmluZ2VycHJpbnQge1xuICAvKipcbiAgICogQ2FsY3VsYXRlcyBhZCBzbG90IERPTSBmaW5nZXJwcmludC4gIFRoaXMga2V5IGlzIGludGVuZGVkIHRvXG4gICAqIGlkZW50aWZ5IFwic2FtZVwiIGFkIHVuaXQgYWNyb3NzIG1hbnkgcGFnZSB2aWV3cy4gVGhpcyBpc1xuICAgKiBiYXNlZCBvbiB3aGVyZSB0aGUgYWQgYXBwZWFycyB3aXRoaW4gdGhlIHBhZ2UncyBET00gc3RydWN0dXJlLlxuICAgKlxuICAgKiBAcGFyYW0gez9FbGVtZW50fSBlbGVtZW50IFRoZSBET00gZWxlbWVudCBmcm9tIHdoaWNoIHRvIGNvbGxlY3RcbiAgICogICAgIHRoZSBET00gY2hhaW4gZWxlbWVudCBJRHMuICBJZiBudWxsLCBET00gY2hhaW4gZWxlbWVudCBJRHMgYXJlIG5vdFxuICAgKiAgICAgaW5jbHVkZWQgaW4gdGhlIGhhc2guXG4gICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGFkIHVuaXQgaGFzaCBrZXkgc3RyaW5nLlxuICAgKi9cbiAgc3RhdGljIGdlbmVyYXRlKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gc3RyaW5nSGFzaDMyKGRvbUZpbmdlcnByaW50UGxhaW4oZWxlbWVudCkpO1xuICB9XG59XG5cblxuLyoqXG4gKiBHZXRzIGEgc3RyaW5nIHNob3dpbmcgdGhlIGluZGV4IG9mIGFuIGVsZW1lbnQgd2l0aGluXG4gKiB0aGUgY2hpbGRyZW4gb2YgaXRzIHBhcmVudCwgY291bnRpbmcgb25seSBub2RlcyB3aXRoIHRoZSBzYW1lIHRhZy5cbiAqIFN0b3AgYXQgMjUsIGp1c3QgdG8gaGF2ZSBhIGxpbWl0LlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudCBET00gbm9kZSB0byBnZXQgaW5kZXggb2YuXG4gKiBAcmV0dXJuIHtzdHJpbmd9ICcuPGluZGV4Picgb3IgJycuXG4gKi9cbmZ1bmN0aW9uIGluZGV4V2l0aGluUGFyZW50KGVsZW1lbnQpIHtcbiAgY29uc3Qge25vZGVOYW1lfSA9IGVsZW1lbnQ7XG4gIC8vIEZpbmQgbXkgaW5kZXggd2l0aGluIG15IHBhcmVudCdzIGNoaWxkcmVuXG4gIGxldCBpID0gMDtcbiAgbGV0IGNvdW50ID0gMDtcbiAgbGV0IHNpYmxpbmcgPSBlbGVtZW50LnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gIC8vIERpZmZlcmVudCBicm93c2VycyBoYXZlIGRpZmZlcmVudCBjaGlsZHJlbi5cbiAgLy8gU28gY291bnQgb25seSBub2RlcyB3aXRoIHRoZSBzYW1lIHRhZy5cbiAgLy8gVXNlIGEgbGltaXQgZm9yIHRoZSB0YWdzLCBzbyB0aGF0IGRpZmZlcmVudCBicm93c2VycyBnZXQgdGhlIHNhbWVcbiAgLy8gY291bnQuIFNvIDI1IGFuZCBoaWdoZXIgYWxsIHJldHVybiBubyBpbmRleC5cbiAgd2hpbGUgKHNpYmxpbmcgJiYgY291bnQgPCAyNSAmJiBpIDwgMTAwKSB7XG4gICAgaWYgKHNpYmxpbmcubm9kZU5hbWUgPT0gbm9kZU5hbWUpIHtcbiAgICAgIGNvdW50Kys7XG4gICAgfVxuICAgIGkrKztcbiAgICBzaWJsaW5nID0gc2libGluZy5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICB9XG4gIC8vIElmIHdlIGdvdCB0byB0aGUgZW5kLCB0aGVuIHRoZSBjb3VudCBpcyBhY2N1cmF0ZTsgb3RoZXJ3aXNlIHNraXAgY291bnQuXG4gIHJldHVybiBjb3VudCA8IDI1ICYmIGkgPCAxMDAgPyBgLiR7Y291bnR9YCA6ICcnO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7ZGV2fSBmcm9tICcuLi9sb2cnO1xuXG4vKiogQGNvbnN0IHtzdHJpbmd9ICovXG5jb25zdCBUQUcgPSAnbHJ1LWNhY2hlJztcblxuLyoqXG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgY2xhc3MgTHJ1Q2FjaGUge1xuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IGNhcGFjaXR5XG4gICAqL1xuICBjb25zdHJ1Y3RvcihjYXBhY2l0eSkge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge251bWJlcn0gKi9cbiAgICB0aGlzLmNhcGFjaXR5XyA9IGNhcGFjaXR5O1xuXG4gICAgLyoqIEBwcml2YXRlIHtudW1iZXJ9ICovXG4gICAgdGhpcy5zaXplXyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBBbiBpbmNyZW1lbnRpbmcgY291bnRlciB0byBkZWZpbmUgdGhlIGxhc3QgYWNjZXNzLlxuICAgICAqIEBwcml2YXRlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5hY2Nlc3NfID0gMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7IU9iamVjdDwobnVtYmVyfHN0cmluZyksIHtwYXlsb2FkOiBULCBhY2Nlc3M6IG51bWJlcn0+fSAqL1xuICAgIHRoaXMuY2FjaGVfID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIga2V5IGlzIGNhY2hlZC5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSBrZXlcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGhhcyhrZXkpIHtcbiAgICByZXR1cm4gISF0aGlzLmNhY2hlX1trZXldO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30ga2V5XG4gICAqIEByZXR1cm4ge1R9IFRoZSBjYWNoZWQgcGF5bG9hZC5cbiAgICovXG4gIGdldChrZXkpIHtcbiAgICBjb25zdCBjYWNoZWFibGUgPSB0aGlzLmNhY2hlX1trZXldO1xuICAgIGlmIChjYWNoZWFibGUpIHtcbiAgICAgIGNhY2hlYWJsZS5hY2Nlc3MgPSArK3RoaXMuYWNjZXNzXztcbiAgICAgIHJldHVybiBjYWNoZWFibGUucGF5bG9hZDtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9IGtleVxuICAgKiBAcGFyYW0ge1R9IHBheWxvYWQgVGhlIHBheWxvYWQgdG8gY2FjaGUuXG4gICAqL1xuICBwdXQoa2V5LCBwYXlsb2FkKSB7XG4gICAgaWYgKCF0aGlzLmhhcyhrZXkpKSB7XG4gICAgICB0aGlzLnNpemVfKys7XG4gICAgfVxuICAgIHRoaXMuY2FjaGVfW2tleV0gPSB7cGF5bG9hZCwgYWNjZXNzOiB0aGlzLmFjY2Vzc199O1xuICAgIHRoaXMuZXZpY3RfKCk7XG4gIH1cblxuICAvKipcbiAgICogRXZpY3RzIHRoZSBvbGRlc3QgY2FjaGUgZW50cnksIGlmIHdlJ3ZlIGV4Y2VlZGVkIGNhcGFjaXR5LlxuICAgKi9cbiAgZXZpY3RfKCkge1xuICAgIGlmICh0aGlzLnNpemVfIDw9IHRoaXMuY2FwYWNpdHlfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZGV2KCkud2FybihUQUcsICdUcmltbWluZyBMUlUgY2FjaGUnKTtcbiAgICBjb25zdCBjYWNoZSA9IHRoaXMuY2FjaGVfO1xuICAgIGxldCBvbGRlc3QgPSB0aGlzLmFjY2Vzc18gKyAxO1xuICAgIGxldCBvbGRlc3RLZXk7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gY2FjaGUpIHtcbiAgICAgIGNvbnN0IHthY2Nlc3N9ID0gY2FjaGVba2V5XTtcbiAgICAgIGlmIChhY2Nlc3MgPCBvbGRlc3QpIHtcbiAgICAgICAgb2xkZXN0ID0gYWNjZXNzO1xuICAgICAgICBvbGRlc3RLZXkgPSBrZXk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG9sZGVzdEtleSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBkZWxldGUgY2FjaGVbb2xkZXN0S2V5XTtcbiAgICAgIHRoaXMuc2l6ZV8tLTtcbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIE1hcHMgYSB2YWx1ZSBpbiBhIGZpcnN0IHJhbmdlIHRvIGl0cyBlcXVpdmFsZW50IGluIGEgc2Vjb25kIHJhbmdlXG4gKiBFeC46IDUgaW4gdGhlIHJhbmdlIFswLDEwXSBnaXZlcyA2MCBpbiB0aGUgcmFuZ2VbNDAsODBdXG4gKlxuICogTk9URTogbG93ZXIvdXBwZXIgYm91bmRzIG9uIHRoZSBzb3VyY2UgcmFuZ2UgYXJlIGRldGVjdGVkIGF1dG9tYXRpY2FsbHksXG4gKiBob3dldmVyIHRoZSBib3VuZHMgb24gdGhlIHRhcmdldCByYW5nZSBhcmUgbm90IGFsdGVyZWQgKHRodXMgdGhlIHRhcmdldFxuICogcmFuZ2UgY291bGQgYmUgZGVjcmVhc2luZykuXG4gKiBFeDE6IDggaW4gdGhlIHJhbmdlIFswLCAxMF0gZ2l2ZXMgMiBpbiB0aGUgcmFuZ2UgWzEwLCAwXVxuICogRXgyOiBhbHNvLCA4IGluIHRoZSByYW5nZSBbMTAsIDBdIGdpdmVzIDIgaW4gdGhlIHJhbmdlIFsxMCwgMF1cbiAqXG4gKiBOT1RFOiBJbnB1dCB2YWx1ZSBpcyBlbmZvcmNlZCB0byBiZSBib3VuZGVkIGluc2lkZSB0aGUgc291cmNlIHJhbmdlXG4gKiBFeDE6IC0yIGluIHRoZSByYW5nZSBbMCwgMTBdIGlzIGludGVycHJldGVkIGFzIDAgYW5kIHRodXMgZ2l2ZXMgNDAgaW4gWzQwLDgwXVxuICogRXgyOiAxOSBpbiB0aGUgcmFuZ2UgWzAsIDVdIGlzIGludGVycHJldGVkIGFzIDUgYW5kIHRodXMgZ2l2ZXMgODAgaW4gWzQwLDgwXVxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWwgdGhlIHZhbHVlIGluIHRoZSBzb3VyY2UgcmFuZ2VcbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW4xIHRoZSBsb3dlciBib3VuZCBvZiB0aGUgc291cmNlIHJhbmdlXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4MSB0aGUgdXBwZXIgYm91bmQgb2YgdGhlIHNvdXJjZSByYW5nZVxuICogQHBhcmFtIHtudW1iZXJ9IG1pbjIgdGhlIGxvd2VyIGJvdW5kIG9mIHRoZSB0YXJnZXQgcmFuZ2VcbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXgyIHRoZSB1cHBlciBib3VuZCBvZiB0aGUgdGFyZ2V0IHJhbmdlXG4gKiBAcmV0dXJuIHtudW1iZXJ9IHRoZSBlcXVpdmFsZW50IHZhbHVlIGluIHRoZSB0YXJnZXQgcmFuZ2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hcFJhbmdlKHZhbCwgbWluMSwgbWF4MSwgbWluMiwgbWF4Mikge1xuXG4gIGxldCBtYXgxQm91bmQgPSBtYXgxO1xuICBsZXQgbWluMUJvdW5kID0gbWluMTtcbiAgaWYgKG1pbjEgPiBtYXgxKSB7XG4gICAgbWF4MUJvdW5kID0gbWluMTtcbiAgICBtaW4xQm91bmQgPSBtYXgxO1xuICB9XG5cbiAgaWYgKHZhbCA8IG1pbjFCb3VuZCkge1xuICAgIHZhbCA9IG1pbjFCb3VuZDtcbiAgfSBlbHNlIGlmICh2YWwgPiBtYXgxQm91bmQpIHtcbiAgICB2YWwgPSBtYXgxQm91bmQ7XG4gIH1cblxuICByZXR1cm4gKHZhbCAtIG1pbjEpICogKG1heDIgLSBtaW4yKSAvIChtYXgxIC0gbWluMSkgKyBtaW4yO1xufVxuXG4vKipcbiAqIENvbXB1dGVzIHRoZSBtb2R1bHVzIG9mIHZhbHVlcyBgYWAgYW5kIGBiYC5cbiAqXG4gKiBUaGlzIGlzIG5lZWRlZCBiZWNhdXNlIHRoZSAlIG9wZXJhdG9yIGluIEphdmFTY3JpcHQgZG9lc24ndCBpbXBsZW1lbnRcbiAqIG1vZHVsdXMgYmVoYXZpb3VyIGFzIGNhbiBiZSBzZWVuIGJ5IHRoZSBzcGVjIGhlcmU6XG4gKiBodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNS4xLyNzZWMtMTEuNS4zLlxuICogSXQgaW5zdGVhZCBpcyB1c2VkIHRvIG9idGFpbiB0aGUgcmVtYWluZGVyIG9mIGEgZGl2aXNpb24uXG4gKiBUaGlzIGZ1bmN0aW9uIHVzZXMgdGhlIHJlbWFpbmRlciAoJSkgb3BlcmF0b3IgdG8gZGV0ZXJtaW5lIHRoZSBtb2R1bHVzLlxuICogRGVyaXZlZCBmcm9tIGhlcmU6XG4gKiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yNTcyNjc2MC9qYXZhc2NyaXB0LW1vZHVsYXItYXJpdGhtZXRpYy80NzM1NDM1NiM0NzM1NDM1NlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBhXG4gKiBAcGFyYW0ge251bWJlcn0gYlxuICogQHJldHVybiB7bnVtYmVyfSByZXR1cm5zIHRoZSBtb2R1bHVzIG9mIHRoZSB0d28gbnVtYmVycy5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5taW4oMTAsIDUpO1xuICogLy8gPT4gMFxuICpcbiAqIF8ubW9kKC0xLCA1KTtcbiAqIC8vID0+IDRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1vZChhLCBiKSB7XG4gIHJldHVybiBhID4gMCAmJiBiID4gMCA/IGEgJSBiIDogKChhICUgYikgKyBiKSAlIGI7XG59XG5cbi8qKlxuICogUmVzdHJpY3RzIGEgbnVtYmVyIHRvIGJlIGluIHRoZSBnaXZlbiBtaW4vbWF4IHJhbmdlLlxuICpcbiAqIEV4YW1wbGVzOlxuICogY2xhbXAoMC41LCAwLCAxKSAtPiAwLjVcbiAqIGNsYW1wKDEuNSwgMCwgMSkgLT4gMVxuICogY2xhbXAoLTAuNSwgMCwgMSkgLT4gMFxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWwgdGhlIHZhbHVlIHRvIGNsYW1wLlxuICogQHBhcmFtIHtudW1iZXJ9IG1pbiB0aGUgbG93ZXIgYm91bmQuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4IHRoZSB1cHBlciBib3VuZC5cbiAqIEByZXR1cm4ge251bWJlcn0gdGhlIGNsYW1wZWQgdmFsdWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGFtcCh2YWwsIG1pbiwgbWF4KSB7XG4gIHJldHVybiBNYXRoLm1pbihNYXRoLm1heCh2YWwsIG1pbiksIG1heCk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtpc09iamVjdH0gZnJvbSAnLi4vdHlwZXMnO1xuXG4vKiBAY29uc3QgKi9cbmNvbnN0IGhhc093bl8gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIFJldHVybnMgYSBtYXAtbGlrZSBvYmplY3QuXG4gKiBJZiBvcHRfaW5pdGlhbCBpcyBwcm92aWRlZCwgY29waWVzIGl0cyBvd24gcHJvcGVydGllcyBpbnRvIHRoZVxuICogbmV3bHkgY3JlYXRlZCBvYmplY3QuXG4gKiBAcGFyYW0ge1Q9fSBvcHRfaW5pdGlhbCBUaGlzIHNob3VsZCB0eXBpY2FsbHkgYmUgYW4gb2JqZWN0IGxpdGVyYWwuXG4gKiBAcmV0dXJuIHtUfVxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hcChvcHRfaW5pdGlhbCkge1xuICBjb25zdCBvYmogPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBpZiAob3B0X2luaXRpYWwpIHtcbiAgICBPYmplY3QuYXNzaWduKG9iaiwgb3B0X2luaXRpYWwpO1xuICB9XG4gIHJldHVybiBvYmo7XG59XG5cbi8qKlxuICogUmV0dXJuIGFuIGVtcHR5IEpzb25PYmplY3Qgb3IgbWFrZXMgdGhlIHBhc3NlZCBpbiBvYmplY3QgbGl0ZXJhbFxuICogYW4gSnNvbk9iamVjdC5cbiAqIFRoZSBKc29uT2JqZWN0IHR5cGUgaXMganVzdCBhIHNpbXBsZSBvYmplY3QgdGhhdCBpcyBhdC1kaWN0LlxuICogU2VlXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtY29tcGlsZXIvd2lraS9Ac3RydWN0LWFuZC1AZGljdC1Bbm5vdGF0aW9uc1xuICogZm9yIHdoYXQgYSBkaWN0IGlzIHR5cGUtd2lzZS5cbiAqIFRoZSBsaW50ZXIgZW5mb3JjZXMgdGhhdCB0aGUgYXJndW1lbnQgaXMsIGluIGZhY3QsIGF0LWRpY3QgbGlrZS5cbiAqIEBwYXJhbSB7IU9iamVjdD19IG9wdF9pbml0aWFsXG4gKiBAcmV0dXJuIHshSnNvbk9iamVjdH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpY3Qob3B0X2luaXRpYWwpIHtcbiAgLy8gV2UgZG8gbm90IGNvcHkuIFRoZSBsaW50ZXIgZW5mb3JjZXMgdGhhdCB0aGUgcGFzc2VkIGluIG9iamVjdCBpcyBhIGxpdGVyYWxcbiAgLy8gYW5kIHRodXMgdGhlIGNhbGxlciBjYW5ub3QgaGF2ZSBhIHJlZmVyZW5jZSB0byBpdC5cbiAgcmV0dXJuIC8qKiBAdHlwZSB7IUpzb25PYmplY3R9ICovIChvcHRfaW5pdGlhbCB8fCB7fSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSBnaXZlbiBrZXkgaXMgYSBwcm9wZXJ0eSBpbiB0aGUgbWFwLlxuICpcbiAqIEBwYXJhbSB7VH0gIG9iaiBhIG1hcCBsaWtlIHByb3BlcnR5LlxuICogQHBhcmFtIHtzdHJpbmd9ICBrZXlcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzT3duKG9iaiwga2V5KSB7XG4gIHJldHVybiBoYXNPd25fLmNhbGwob2JqLCBrZXkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgb2JqW2tleV0gaWZmIGtleSBpcyBvYmoncyBvd24gcHJvcGVydHkgKGlzIG5vdCBpbmhlcml0ZWQpLlxuICogT3RoZXJ3aXNlLCByZXR1cm5zIHVuZGVmaW5lZC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5XG4gKiBAcmV0dXJuIHsqfVxuICovXG5leHBvcnQgZnVuY3Rpb24gb3duUHJvcGVydHkob2JqLCBrZXkpIHtcbiAgaWYgKGhhc093bihvYmosIGtleSkpIHtcbiAgICByZXR1cm4gb2JqW2tleV07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuXG4vKipcbiAqIERlZXAgbWVyZ2VzIHNvdXJjZSBpbnRvIHRhcmdldC5cbiAqXG4gKiBAcGFyYW0geyFPYmplY3R9IHRhcmdldFxuICogQHBhcmFtIHshT2JqZWN0fSBzb3VyY2VcbiAqIEBwYXJhbSB7bnVtYmVyfSBkZXB0aCBUaGUgbWF4aW11bSBtZXJnZSBkZXB0aC4gSWYgZXhjZWVkZWQsIE9iamVjdC5hc3NpZ25cbiAqICAgICAgICAgICAgICAgICAgICAgICB3aWxsIGJlIHVzZWQgaW5zdGVhZC5cbiAqIEByZXR1cm4geyFPYmplY3R9XG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgc291cmNlIGNvbnRhaW5zIGEgY2lyY3VsYXIgcmVmZXJlbmNlLlxuICogTm90ZTogT25seSBuZXN0ZWQgb2JqZWN0cyBhcmUgZGVlcC1tZXJnZWQsIHByaW1pdGl2ZXMgYW5kIGFycmF5cyBhcmUgbm90LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVlcE1lcmdlKHRhcmdldCwgc291cmNlLCBkZXB0aCA9IDEwKSB7XG4gIC8vIEtlZXAgdHJhY2sgb2Ygc2VlbiBvYmplY3RzIHRvIGRldGVjdCByZWN1cnNpdmUgcmVmZXJlbmNlcy5cbiAgY29uc3Qgc2VlbiA9IFtdO1xuXG4gIC8qKiBAdHlwZSB7IUFycmF5PHt0OiAhT2JqZWN0LCBzOiAhT2JqZWN0LCBkOiBudW1iZXJ9Pn0gKi9cbiAgY29uc3QgcXVldWUgPSBbXTtcbiAgcXVldWUucHVzaCh7dDogdGFyZ2V0LCBzOiBzb3VyY2UsIGQ6IDB9KTtcblxuICAvLyBCRlMgdG8gZW5zdXJlIG9iamVjdHMgZG9uJ3QgaGF2ZSByZWN1cnNpdmUgcmVmZXJlbmNlcyBhdCBzaGFsbG93ZXIgZGVwdGhzLlxuICB3aGlsZSAocXVldWUubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IHt0LCBzLCBkfSA9IHF1ZXVlLnNoaWZ0KCk7XG4gICAgaWYgKHNlZW4uaW5jbHVkZXMocykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignU291cmNlIG9iamVjdCBoYXMgYSBjaXJjdWxhciByZWZlcmVuY2UuJyk7XG4gICAgfVxuICAgIHNlZW4ucHVzaChzKTtcbiAgICBpZiAodCA9PT0gcykge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChkID4gZGVwdGgpIHtcbiAgICAgIE9iamVjdC5hc3NpZ24odCwgcyk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgT2JqZWN0LmtleXMocykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgY29uc3QgbmV3VmFsdWUgPSBzW2tleV07XG4gICAgICAvLyBQZXJmb3JtIGEgZGVlcCBtZXJnZSBJRkYgYm90aCB0YXJnZXQgYW5kIHNvdXJjZSBoYXZlIHRoZSBzYW1lIGtleVxuICAgICAgLy8gd2hvc2UgY29ycmVzcG9uZGluZyB2YWx1ZXMgYXJlIG9iamVjdHMuXG4gICAgICBpZiAoaGFzT3duKHQsIGtleSkpIHtcbiAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSB0W2tleV07XG4gICAgICAgIGlmIChpc09iamVjdChuZXdWYWx1ZSkgJiYgaXNPYmplY3Qob2xkVmFsdWUpKSB7XG4gICAgICAgICAgcXVldWUucHVzaCh7dDogb2xkVmFsdWUsIHM6IG5ld1ZhbHVlLCBkOiBkICsgMX0pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdFtrZXldID0gbmV3VmFsdWU7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHRhcmdldDtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyFPYmplY3R9IG8gQW4gb2JqZWN0IHRvIHJlbW92ZSBwcm9wZXJ0aWVzIGZyb21cbiAqIEBwYXJhbSB7IUFycmF5PHN0cmluZz59IHByb3BzIEEgbGlzdCBvZiBwcm9wZXJ0aWVzIHRvIHJlbW92ZSBmcm9tIHRoZSBPYmplY3RcbiAqIEByZXR1cm4geyFPYmplY3R9IEFuIG9iamVjdCB3aXRoIHRoZSBnaXZlbiBwcm9wZXJ0aWVzIHJlbW92ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9taXQobywgcHJvcHMpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKG8pLnJlZHVjZSgoYWNjLCBrZXkpID0+IHtcbiAgICBpZiAoIXByb3BzLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgIGFjY1trZXldID0gb1trZXldO1xuICAgIH1cbiAgICByZXR1cm4gYWNjO1xuICB9LCB7fSk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBSZXR1cm5zIGEgRGVmZXJyZWQgc3RydWN0LCB3aGljaCBob2xkcyBhIHBlbmRpbmcgcHJvbWlzZSBhbmQgaXRzIGFzc29jaWF0ZWRcbiAqIHJlc29sdmUgYW5kIHJlamVjdCBmdW5jdGlvbnMuXG4gKlxuICogVGhpcyBpcyBwcmVmZXJyZWQgaW5zdGVhZCBvZiBjcmVhdGluZyBhIFByb21pc2UgaW5zdGFuY2UgdG8gZXh0cmFjdCB0aGVcbiAqIHJlc29sdmUvcmVqZWN0IGZ1bmN0aW9ucyB5b3Vyc2VsZjpcbiAqXG4gKiBgYGBcbiAqIC8vIEF2b2lkIGRvaW5nXG4gKiBsZXQgcmVzb2x2ZTtcbiAqIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZShyZXMgPT4ge1xuICogICByZXNvbHZlID0gcmVzO1xuICogfSk7XG4gKlxuICogLy8gR29vZFxuICogY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcbiAqIGNvbnN0IHsgcHJvbWlzZSwgcmVzb2x2ZSB9ID0gZGVmZXJyZWQ7XG4gKiBgYGBcbiAqXG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgY2xhc3MgRGVmZXJyZWQge1xuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBEZWZlcnJlZC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGxldCByZXNvbHZlLCByZWplY3Q7XG5cbiAgICAvKipcbiAgICAgKiBAY29uc3QgeyFQcm9taXNlPFQ+fVxuICAgICAqL1xuICAgIHRoaXMucHJvbWlzZSA9IG5ldyAvKk9LKi9Qcm9taXNlKChyZXMsIHJlaikgPT4ge1xuICAgICAgcmVzb2x2ZSA9IHJlcztcbiAgICAgIHJlamVjdCA9IHJlajtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEBjb25zdCB7ZnVuY3Rpb24oVD0pfVxuICAgICAqL1xuICAgIHRoaXMucmVzb2x2ZSA9IHJlc29sdmU7XG5cbiAgICAvKipcbiAgICAgKiBAY29uc3Qge2Z1bmN0aW9uKCo9KX1cbiAgICAgKi9cbiAgICB0aGlzLnJlamVjdCA9IHJlamVjdDtcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBwcm9taXNlIHJlc29sdmVkIHRvIHRoZSByZXR1cm4gdmFsdWUgb2YgZm4uXG4gKiBJZiBmbiBzeW5jIHRocm93cywgaXQgd2lsbCBjYXVzZSB0aGUgcHJvbWlzZSB0byByZWplY3QuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbigpOlR9IGZuXG4gKiBAcmV0dXJuIHshUHJvbWlzZTxUPn1cbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cnlSZXNvbHZlKGZuKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICByZXNvbHZlKGZuKCkpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSB3aGljaCByZXNvbHZlcyBpZiBhIHRocmVzaG9sZCBhbW91bnQgb2YgdGhlIGdpdmVuIHByb21pc2VzXG4gKiByZXNvbHZlLCBhbmQgcmVqZWN0cyBvdGhlcndpc2UuXG4gKiBAcGFyYW0geyFBcnJheTwhUHJvbWlzZT59IHByb21pc2VzIFRoZSBhcnJheSBvZiBwcm9taXNlcyB0byB0ZXN0LlxuICogQHBhcmFtIHtudW1iZXJ9IGNvdW50IFRoZSBudW1iZXIgb2YgcHJvbWlzZXMgdGhhdCBtdXN0IHJlc29sdmUgZm9yIHRoZVxuICogICAgIHJldHVybmVkIHByb21pc2UgdG8gcmVzb2x2ZS5cbiAqIEByZXR1cm4geyFQcm9taXNlfSBBIHByb21pc2UgdGhhdCByZXNvbHZlcyBpZiBhbnkgb2YgdGhlIGdpdmVuIHByb21pc2VzXG4gKiAgICAgcmVzb2x2ZSwgYW5kIHdoaWNoIHJlamVjdHMgb3RoZXJ3aXNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc29tZShwcm9taXNlcywgY291bnQgPSAxKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY291bnQgPSBNYXRoLm1heChjb3VudCwgMCk7XG4gICAgY29uc3QgZXh0cmEgPSBwcm9taXNlcy5sZW5ndGggLSBjb3VudDtcbiAgICBpZiAoZXh0cmEgPCAwKSB7XG4gICAgICByZWplY3QobmV3IEVycm9yKCdub3QgZW5vdWdoIHByb21pc2VzIHRvIHJlc29sdmUnKSk7XG4gICAgfVxuICAgIGlmIChwcm9taXNlcy5sZW5ndGggPT0gMCkge1xuICAgICAgcmVzb2x2ZShbXSk7XG4gICAgfVxuICAgIGNvbnN0IHZhbHVlcyA9IFtdO1xuICAgIGNvbnN0IHJlYXNvbnMgPSBbXTtcblxuICAgIGNvbnN0IG9uRnVsZmlsbGVkID0gdmFsdWUgPT4ge1xuICAgICAgaWYgKHZhbHVlcy5sZW5ndGggPCBjb3VudCkge1xuICAgICAgICB2YWx1ZXMucHVzaCh2YWx1ZSk7XG4gICAgICB9XG4gICAgICBpZiAodmFsdWVzLmxlbmd0aCA9PSBjb3VudCkge1xuICAgICAgICByZXNvbHZlKHZhbHVlcyk7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBvblJlamVjdGVkID0gcmVhc29uID0+IHtcbiAgICAgIGlmIChyZWFzb25zLmxlbmd0aCA8PSBleHRyYSkge1xuICAgICAgICByZWFzb25zLnB1c2gocmVhc29uKTtcbiAgICAgIH1cbiAgICAgIGlmIChyZWFzb25zLmxlbmd0aCA+IGV4dHJhKSB7XG4gICAgICAgIHJlamVjdChyZWFzb25zKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvbWlzZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIFByb21pc2UucmVzb2x2ZShwcm9taXNlc1tpXSkudGhlbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCk7XG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBSZXNvbHZlcyB3aXRoIHRoZSByZXN1bHQgb2YgdGhlIGxhc3QgcHJvbWlzZSBhZGRlZC5cbiAqIEBpbXBsZW1lbnRzIHtJVGhlbmFibGV9XG4gKi9cbmV4cG9ydCBjbGFzcyBMYXN0QWRkZWRSZXNvbHZlciB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFBcnJheTwhUHJvbWlzZT49fSBvcHRfcHJvbWlzZXNcbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdF9wcm9taXNlcykge1xuICAgIGxldCByZXNvbHZlXywgcmVqZWN0XztcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshUHJvbWlzZX0gKi9cbiAgICB0aGlzLnByb21pc2VfID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgcmVzb2x2ZV8gPSByZXNvbHZlO1xuICAgICAgcmVqZWN0XyA9IHJlamVjdDtcbiAgICB9KTtcblxuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIHRoaXMucmVzb2x2ZV8gPSByZXNvbHZlXztcblxuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIHRoaXMucmVqZWN0XyA9IHJlamVjdF87XG5cbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICB0aGlzLmNvdW50XyA9IDA7XG5cbiAgICBpZiAob3B0X3Byb21pc2VzKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9wdF9wcm9taXNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLmFkZChvcHRfcHJvbWlzZXNbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSBwcm9taXNlIHRvIHBvc3NpYmx5IGJlIHJlc29sdmVkLlxuICAgKiBAcGFyYW0geyFQcm9taXNlfSBwcm9taXNlXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgYWRkKHByb21pc2UpIHtcbiAgICBjb25zdCBjb3VudEF0QWRkID0gKyt0aGlzLmNvdW50XztcbiAgICBQcm9taXNlLnJlc29sdmUocHJvbWlzZSkudGhlbihyZXN1bHQgPT4ge1xuICAgICAgaWYgKHRoaXMuY291bnRfID09PSBjb3VudEF0QWRkKSB7XG4gICAgICAgIHRoaXMucmVzb2x2ZV8ocmVzdWx0KTtcbiAgICAgIH1cbiAgICB9LCBlcnJvciA9PiB7XG4gICAgICAvLyBEb24ndCBmb2xsb3cgYmVoYXZpb3Igb2YgUHJvbWlzZS5hbGwgYW5kIFByb21pc2UucmFjZSBlcnJvciBzbyB0aGF0XG4gICAgICAvLyB0aGlzIHdpbGwgb25seSByZWplY3Qgd2hlbiBtb3N0IHJlY2VudGx5IGFkZGVkIHByb21pc2UgZmFpbHMuXG4gICAgICBpZiAodGhpcy5jb3VudF8gPT09IGNvdW50QXRBZGQpIHtcbiAgICAgICAgdGhpcy5yZWplY3RfKGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5wcm9taXNlXztcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgdGhlbihvcHRfcmVzb2x2ZSwgb3B0X3JlamVjdCkge1xuICAgIHJldHVybiB0aGlzLnByb21pc2VfLnRoZW4ob3B0X3Jlc29sdmUsIG9wdF9yZWplY3QpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBXcmFwcyBhIGdpdmVuIGNhbGxiYWNrIGFuZCBhcHBsaWVzIGEgcmF0ZSBsaW1pdC5cbiAqIEl0IHRocm90dGxlcyB0aGUgY2FsbHMgc28gdGhhdCBubyBjb25zZXF1ZW50IGNhbGxzIGhhdmUgdGltZSBpbnRlcnZhbFxuICogc21hbGxlciB0aGFuIHRoZSBnaXZlbiBtaW5pbWFsIGludGVydmFsLlxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKC4uLiopfSBjYWxsYmFja1xuICogQHBhcmFtIHtudW1iZXJ9IG1pbkludGVydmFsIHRoZSBtaW5pbXVtIHRpbWUgaW50ZXJ2YWwgaW4gbWlsbGlzZWNvbmRcbiAqIEByZXR1cm4ge2Z1bmN0aW9uKC4uLiopfVxuICovXG5leHBvcnQgZnVuY3Rpb24gdGhyb3R0bGUod2luLCBjYWxsYmFjaywgbWluSW50ZXJ2YWwpIHtcbiAgbGV0IGxvY2tlciA9IDA7XG4gIGxldCBuZXh0Q2FsbEFyZ3MgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFPYmplY3R9IGFyZ3NcbiAgICovXG4gIGZ1bmN0aW9uIGZpcmUoYXJncykge1xuICAgIG5leHRDYWxsQXJncyA9IG51bGw7XG4gICAgLy8gTG9jayB0aGUgZmlyZSBmb3IgbWluSW50ZXJ2YWwgbWlsbGlzZWNvbmRzXG4gICAgbG9ja2VyID0gd2luLnNldFRpbWVvdXQod2FpdGVyLCBtaW5JbnRlcnZhbCk7XG5cbiAgICBjYWxsYmFjay5hcHBseShudWxsLCBhcmdzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXYWl0ZXIgZnVuY3Rpb25cbiAgICovXG4gIGZ1bmN0aW9uIHdhaXRlcigpIHtcbiAgICBsb2NrZXIgPSAwO1xuICAgIC8vIElmIGR1cmluZyB0aGUgcGVyaW9kIHRoZXJlJ3JlIGludm9jYXRpb25zIHF1ZXVlZCB1cCwgZmlyZSBvbmNlLlxuICAgIGlmIChuZXh0Q2FsbEFyZ3MpIHtcbiAgICAgIGZpcmUobmV4dENhbGxBcmdzKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24oLi4uYXJncykge1xuICAgIGlmIChsb2NrZXIpIHtcbiAgICAgIG5leHRDYWxsQXJncyA9IGFyZ3M7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZpcmUoYXJncyk7XG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIFdyYXBzIGEgZ2l2ZW4gY2FsbGJhY2sgYW5kIGFwcGxpZXMgYSB3YWl0IHRpbWVyLCBzbyB0aGF0IG1pbkludGVydmFsXG4gKiBtaWxsaXNlY29uZHMgbXVzdCBwYXNzIHNpbmNlIHRoZSBsYXN0IGNhbGwgYmVmb3JlIHRoZSBjYWxsYmFjayBpcyBhY3R1YWxseVxuICogaW52b2tlZC5cbiAqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtmdW5jdGlvbiguLi4qKX0gY2FsbGJhY2tcbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5JbnRlcnZhbCB0aGUgbWluaW11bSB0aW1lIGludGVydmFsIGluIG1pbGxpc2Vjb25kXG4gKiBAcmV0dXJuIHtmdW5jdGlvbiguLi4qKX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlYm91bmNlKHdpbiwgY2FsbGJhY2ssIG1pbkludGVydmFsKSB7XG4gIGxldCBsb2NrZXIgPSAwO1xuICBsZXQgdGltZXN0YW1wID0gMDtcbiAgbGV0IG5leHRDYWxsQXJncyA9IG51bGw7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7P0FycmF5fSBhcmdzXG4gICAqL1xuICBmdW5jdGlvbiBmaXJlKGFyZ3MpIHtcbiAgICBuZXh0Q2FsbEFyZ3MgPSBudWxsO1xuICAgIGNhbGxiYWNrLmFwcGx5KG51bGwsIGFyZ3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdhaXQgZnVuY3Rpb24gZm9yIGRlYm91bmNlXG4gICAqL1xuICBmdW5jdGlvbiB3YWl0ZXIoKSB7XG4gICAgbG9ja2VyID0gMDtcbiAgICBjb25zdCByZW1haW5pbmcgPSBtaW5JbnRlcnZhbCAtICh3aW4uRGF0ZS5ub3coKSAtIHRpbWVzdGFtcCk7XG4gICAgaWYgKHJlbWFpbmluZyA+IDApIHtcbiAgICAgIGxvY2tlciA9IHdpbi5zZXRUaW1lb3V0KHdhaXRlciwgcmVtYWluaW5nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZmlyZShuZXh0Q2FsbEFyZ3MpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiguLi5hcmdzKSB7XG4gICAgdGltZXN0YW1wID0gd2luLkRhdGUubm93KCk7XG4gICAgbmV4dENhbGxBcmdzID0gYXJncztcbiAgICBpZiAoIWxvY2tlcikge1xuICAgICAgbG9ja2VyID0gd2luLnNldFRpbWVvdXQod2FpdGVyLCBtaW5JbnRlcnZhbCk7XG4gICAgfVxuICB9O1xufVxuIiwiLyohIGh0dHBzOi8vbXRocy5iZS9jc3Nlc2NhcGUgdjEuNS4xIGJ5IEBtYXRoaWFzIHwgTUlUIGxpY2Vuc2UgKi9cblxuXG4vKipcbiAqIFRoaXMgcmVnZXggY29uc2lzdHMgb2YgNCBtYXRjaGluZyBjYXB0dXJlIGdyb3VwcyBhbmQgb25lIChub24tbWF0Y2hpbmcpIGZhbGxiYWNrOlxuICpcbiAqIC0gKFxcMCksIGNhdGNoIHRoZSBudWxsIHRlcm1pbmF0b3IgY2hhcmFjdGVyIHNvIGl0IG1heSBiZSByZXBsYWNlZCBieSBVVEZcbiAqICAgUmVwbGFjZW1lbnQgQ2hhclxuICogLSBeKC0pJCwgY2F0Y2ggYSBzb2xpdGFyeSBkYXNoIGNoYXIsIHNvIHRoYXQgaXQgbWF5IGJlIGJhY2tzbGFzaCBlc2NhcGVkLlxuICogICBUaGlzIGlzIGEgc2VwYXJhdGUgY2FwdHVyZSBncm91cCBzbyB0aGF0IHRoZSBsZWdhbC1jaGFycyAoZ3JvdXAgNCkgZG9lc24ndFxuICogICBjYXB0dXJlIGl0IGZpcnN0LCBzaW5jZSB0aGF0IGdyb3VwIGRvZXNuJ3QgbmVlZCB0byBlc2NhcGUgaXRzIGRhc2guXG4gKiAtIChbXFx4MDEtXFx4MWZcXHg3Zl18Xi0/WzAtOV0pLCBjYXRjaCBhIFVURiBjb250cm9sIGNoYXIsIG9yIGFueSBsZWFkaW5nXG4gKiAgIG51bWJlciAod2l0aCBhbiBvcHRpb25hbCBsZWFkaW5nIGRhc2gpLiBUaGUgY29udHJvbCBvciB0aGUgbnVtYmVyIChidXQgbm90XG4gKiAgIHRoZSBsZWFkaW5nIGRhc2gpIG11c3QgYmUgaGV4LWVzY2FwZWQsLlxuICogLSAoW1xceDgwLVxcdWZmZmYwLTlhLXpBLVpfLV0rKSwgY2F0Y2ggbGVnYWwtY2hhcnMsIHdpdGggdGhlIGV4Y2VwdGlvbiBvZiBhXG4gKiAgIHNvbGl0YXJ5IGRhc2gsIHdoaWNoIHdpbGwgYWxyZWFkeSBoYXZlIG1hdGNoZWQgaW4gZ3JvdXAgMS5cbiAqIC0gW15dLCBmaW5hbGx5LCBhIGNhdGNoLWFsbCB0aGF0IGFsbG93cyB1cyB0byBiYWNrc2xhc2ggZXNjYXBlIHRoZSBjaGFyLlxuICpcbiAqIFRvZ2V0aGVyLCB0aGlzIG1hdGNoZXMgZXZlcnl0aGluZyBuZWNlc3NhcnkgZm9yIENTUy5lc2NhcGUuXG4gKi9cbnZhciByZWdleCA9IC8oXFwwKXxeKC0pJHwoW1xceDAxLVxceDFmXFx4N2ZdfF4tP1swLTldKXwoW1xceDgwLVxcdWZmZmYwLTlhLXpBLVpfLV0rKXxbXl0vZztcblxuZnVuY3Rpb24gZXNjYXBlcihtYXRjaCwgbmlsLCBkYXNoLCBoZXhFc2NhcGUsIGNoYXJzKSB7XG4gIC8vIENoYXJzIGlzIHRoZSBsZWdhbC1jaGFycyAoZ3JvdXAgNCkgY2FwdHVyZVxuICBpZiAoY2hhcnMpIHtcbiAgICByZXR1cm4gY2hhcnM7XG4gIH1cbiAgLy8gTmlsIGlzIHRoZSBudWxsIHRlcm1pbmF0b3IgKGdyb3VwIDEpIGNhcHR1cmVcbiAgaWYgKG5pbCkge1xuICAgIHJldHVybiAnXFx1RkZGRCc7XG4gIH1cbiAgLy8gQm90aCBVVEYgY29udHJvbCBjaGFycywgYW5kIGxlYWRpbmcgbnVtYmVycyAod2l0aCBvcHRpb25hbCBsZWFkaW5nIGRhc2gpXG4gIC8vIChncm91cCAzKSBtdXN0IGJlIGJhY2tzbGFzaCBlc2NhcGVkIHdpdGggYSB0cmFpbGluZyBzcGFjZS4gIEZ1bm5pbHksIHRoZVxuICAvLyBsZWFkaW5nIGRhc2ggbXVzdCBub3QgYmUgZXNjYXBlZCwgYnV0IHRoZSBudW1iZXIuIDpzaHJ1ZzpcbiAgaWYgKGhleEVzY2FwZSkge1xuICAgIHJldHVybiBtYXRjaC5zbGljZSgwLCAtMSkgKyAnXFxcXCcgKyBtYXRjaC5zbGljZSgtMSkuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikgKyAnICdcbiAgfVxuICAvLyBGaW5hbGx5LCB0aGUgc29saXRhcnkgZGFzaCBhbmQgdGhlIGNhdGNoLWFsbCBjaGFycyByZXF1aXJlIGJhY2tzbGFzaFxuICAvLyBlc2NhcGluZy5cbiAgcmV0dXJuICdcXFxcJyArIG1hdGNoO1xufVxuXG4vKipcbiAqIGh0dHBzOi8vZHJhZnRzLmNzc3dnLm9yZy9jc3NvbS8jc2VyaWFsaXplLWFuLWlkZW50aWZpZXJcbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3NzRXNjYXBlKHZhbHVlKSB7XG4gIHJldHVybiBTdHJpbmcodmFsdWUpLnJlcGxhY2UocmVnZXgsIGVzY2FwZXIpO1xufVxuIl19"}