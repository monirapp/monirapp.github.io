(self.AMP=self.AMP||[]).push({n:"amp-experiment",v:"0",f:(function(AMP,_){
function g(a,c){function b(){}b.prototype=c.prototype;a.prototype=new b;a.prototype.constructor=a;for(var d in c)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(c,d);e&&Object.defineProperty(a,d,e)}else a[d]=c[d]};var k=Object.prototype.toString;self.log=self.log||{user:null,dev:null,userForEmbed:null};var l=self.log;function m(){if(!l.user)throw Error("failed to call initLogConstructor");return l.user};var n=Object.prototype.hasOwnProperty;function p(){var a,c;this.promise=new Promise(function(b,d){a=b;c=d});this.resolve=a;this.reject=c};function q(a,c){a=a.__AMP_TOP||a;return r(a,c)}function t(a){a=u(a);a=v(a);return r(a,"viewer")}function u(a){return a.nodeType?q((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function v(a){a=u(a);return a.isSingleDoc()?a.win:a}function r(a,c){var b=w(a);a=b[c];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}
function x(a,c){var b=y(a,c);if(b)return b;var d=new p,e=d,f=e.promise,e=e.resolve;w(a)[c]={obj:null,promise:f,resolve:e,context:null,ctor:null};return f}function y(a,c){var b=w(a)[c];if(b){if(b.promise)return b.promise;r(a,c);return b.promise=Promise.resolve(b.obj)}return null}function w(a){var c=a.services;c||(c=a.services={});return c};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function A(a,c,b){if(c(a))b();else{var d=a.ownerDocument.defaultView;if(d.MutationObserver){var e=new d.MutationObserver(function(){c(a)&&(e.disconnect(),b())});e.observe(a,{childList:!0})}else var f=d.setInterval(function(){c(a)&&(d.clearInterval(f),b())},5)}}function B(a,c){A(a.documentElement,function(){return!!a.body},c)}function C(a){return new Promise(function(c){B(a,c)})};function D(a){return E(a).then(function(a){return m().assert(a,"Service %s was requested to be provided through %s, but %s is not loaded in the current page. To fix this problem load the JavaScript file for %s in this page.","userNotificationManager","amp-user-notification","amp-user-notification","amp-user-notification")})}
function E(a){var c=u(a),b=y(v(a),"userNotificationManager");return b?b:c.whenBodyAvailable().then(function(){var a;a=c.win;var b=c.getHeadNode(),f;if(b){f=[];for(var b=b.querySelectorAll("script[custom-element]"),h=0;h<b.length;h++)f.push(b[h].getAttribute("custom-element"))}else f=[];a=f.includes("amp-user-notification")?q(a,"extensions").waitForExtension(a,"amp-user-notification"):Promise.resolve();return a}).then(function(){var b=c.win;return b.ampExtendedElements&&b.ampExtendedElements["amp-user-notification"]?
x(v(a),"userNotificationManager"):null})};var F=/^[\w-]+$/;
function G(a,c,b){H(c);I(b);var d=t(a),e=d.getParam("amp-x-"+c);if(e&&n.call(b.variants,e))return Promise.resolve(e);var f=!1!==b.sticky,h=b.cidScope||"amp-experiment",z=Promise.resolve(!0);f&&b.consentNotificationId&&(z=D(a).then(function(a){return a.getNotification(b.consentNotificationId)}).then(function(a){m().assert(a,"Notification not found: "+b.consentNotificationId);return a.isDismissed()}));return z.then(function(e){if(!e)return null;var d=b.group||c;return J(a,d,f?h:null).then(function(a){for(var c=0,
e=Object.keys(b.variants).sort(),d=0;d<e.length;d++)if(c+=b.variants[e[d]],a<c)return e[d];return null})})}
function I(a){var c=a.variants;m().assert("[object Object]"===k.call(c)&&0<Object.keys(c).length,"Missing experiment variants config.");a.group&&H(a.group);var b=0,d;for(d in c)if(n.call(c,d)){H(d);var e=c[d];m().assert("number"===typeof e&&0<e&&100>e,"Invalid percentage %s:%s. Has to be greater than 0 and less than 100",d,e);b+=e}m().assert(100>=b.toFixed(6),"Total percentage is bigger than 100: "+b)}
function J(a,c,b){if(!b)return Promise.resolve(100*a.win.Math.random());var d=x(v(a),"cid").then(function(a){return a.get({scope:b,createCookieIfNotPresent:!0},Promise.resolve())});return Promise.all([d,q(a.win,"crypto")]).then(function(a){return a[1].uniform(c+":"+a[0])}).then(function(a){return 100*a})}function H(a){m().assert(F.test(a),"Invalid name "+a+": %s. Allowed chars are [a-zA-Z0-9-_].")};function K(a){return AMP.BaseElement.apply(this,arguments)||this}g(K,AMP.BaseElement);K.prototype.isLayoutSupported=function(a){return"nodisplay"==a||"container"==a};K.prototype.buildCallback=function(){var a=this;try{var c=L(this),b=Object.create(null),d=Object.keys(c).map(function(d){return G(a.getAmpDoc(),d,c[d]).then(function(a){b[d]=a})}),e=Promise.all(d).then(function(){return b}).then(this.c.bind(this));M.resolve(e)}catch(f){throw M.resolve(null),f;}};
function L(a){a=a.element.children;m().assert(1==a.length&&"SCRIPT"==a[0].tagName&&"APPLICATION/JSON"==a[0].getAttribute("type").toUpperCase(),'<amp-experiment> should contain exactly one <script type="application/json"> child.');return JSON.parse(a[0].textContent)}K.prototype.c=function(a){var c=this.win.document;return C(c).then(function(){for(var b in a)a[b]&&c.body.setAttribute("amp-x-"+b,a[b]);return a})};var M=null;
(function(a){M=new p;a.registerElement("amp-experiment",K);a.registerServiceForDoc("variant",function(){return M.promise})})(self.AMP);
})});
//# sourceMappingURL=amp-experiment-0.1.js.map

